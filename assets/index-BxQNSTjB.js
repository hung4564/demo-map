(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();const B5="modulepreload",F5=function(t){return"/demo-map/"+t},T2={},mv=function(e,n,a){let s=Promise.resolve();return n&&n.length>0&&(document.getElementsByTagName("link"),s=Promise.all(n.map(l=>{if(l=F5(l),l in T2)return;T2[l]=!0;const i=l.endsWith(".css"),f=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const m=document.createElement("link");if(m.rel=i?"stylesheet":B5,i||(m.as="script",m.crossOrigin=""),m.href=l,document.head.appendChild(m),i)return new Promise((y,x)=>{m.addEventListener("load",y),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${l}`)))})}))),s.then(()=>e()).catch(l=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=l,window.dispatchEvent(i),!i.defaultPrevented)throw l})};/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function C_(t,e){const n=new Set(t.split(","));return a=>n.has(a)}const po={},Xm=[],ou=()=>{},N5=()=>!1,xy=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),tw=t=>t.startsWith("onUpdate:"),Ho=Object.assign,ew=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},U5=Object.prototype.hasOwnProperty,Fi=(t,e)=>U5.call(t,e),hr=Array.isArray,Qm=t=>xg(t)==="[object Map]",zp=t=>xg(t)==="[object Set]",P2=t=>xg(t)==="[object Date]",V5=t=>xg(t)==="[object RegExp]",Nr=t=>typeof t=="function",Qo=t=>typeof t=="string",Cf=t=>typeof t=="symbol",_o=t=>t!==null&&typeof t=="object",nw=t=>(_o(t)||Nr(t))&&Nr(t.then)&&Nr(t.catch),dE=Object.prototype.toString,xg=t=>dE.call(t),j5=t=>xg(t).slice(8,-1),pE=t=>xg(t)==="[object Object]",rw=t=>Qo(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Jm=C_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),I_=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},H5=/-(\w)/g,Tl=I_(t=>t.replace(H5,(e,n)=>n?n.toUpperCase():"")),G5=/\B([A-Z])/g,Ou=I_(t=>t.replace(G5,"-$1").toLowerCase()),Ay=I_(t=>t.charAt(0).toUpperCase()+t.slice(1)),Dv=I_(t=>t?`on${Ay(t)}`:""),Xc=(t,e)=>!Object.is(t,e),tg=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},mE=(t,e,n,a=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:a,value:n})},W1=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Z1=t=>{const e=Qo(t)?Number(t):NaN;return isNaN(e)?t:e};let k2;const gE=()=>k2||(k2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),W5="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",Z5=C_(W5);function Ni(t){if(hr(t)){const e={};for(let n=0;n<t.length;n++){const a=t[n],s=Qo(a)?Y5(a):Ni(a);if(s)for(const l in s)e[l]=s[l]}return e}else if(Qo(t)||_o(t))return t}const $5=/;(?![^(]*\))/g,K5=/:([^]+)/,q5=/\/\*[^]*?\*\//g;function Y5(t){const e={};return t.replace(q5,"").split($5).forEach(n=>{if(n){const a=n.split(K5);a.length>1&&(e[a[0].trim()]=a[1].trim())}}),e}function mo(t){let e="";if(Qo(t))e=t;else if(hr(t))for(let n=0;n<t.length;n++){const a=mo(t[n]);a&&(e+=a+" ")}else if(_o(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Za(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Qo(e)&&(t.class=mo(e)),n&&(t.style=Ni(n)),t}const X5="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Q5=C_(X5);function vE(t){return!!t||t===""}function J5(t,e){if(t.length!==e.length)return!1;let n=!0;for(let a=0;n&&a<t.length;a++)n=Td(t[a],e[a]);return n}function Td(t,e){if(t===e)return!0;let n=P2(t),a=P2(e);if(n||a)return n&&a?t.getTime()===e.getTime():!1;if(n=Cf(t),a=Cf(e),n||a)return t===e;if(n=hr(t),a=hr(e),n||a)return n&&a?J5(t,e):!1;if(n=_o(t),a=_o(e),n||a){if(!n||!a)return!1;const s=Object.keys(t).length,l=Object.keys(e).length;if(s!==l)return!1;for(const i in t){const f=t.hasOwnProperty(i),m=e.hasOwnProperty(i);if(f&&!m||!f&&m||!Td(t[i],e[i]))return!1}}return String(t)===String(e)}function E_(t,e){return t.findIndex(n=>Td(n,e))}const Mn=t=>Qo(t)?t:t==null?"":hr(t)||_o(t)&&(t.toString===dE||!Nr(t.toString))?JSON.stringify(t,yE,2):String(t),yE=(t,e)=>e&&e.__v_isRef?yE(t,e.value):Qm(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[a,s],l)=>(n[mx(a,l)+" =>"]=s,n),{})}:zp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>mx(n))}:Cf(e)?mx(e):_o(e)&&!hr(e)&&!pE(e)?String(e):e,mx=(t,e="")=>{var n;return Cf(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ku;class iw{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ku,!e&&ku&&(this.index=(ku.scopes||(ku.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=ku;try{return ku=this,e()}finally{ku=n}}}on(){ku=this}off(){ku=this.parent}stop(e){if(this._active){let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.scopes)for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function t4(t){return new iw(t)}function _E(t,e=ku){e&&e.active&&e.effects.push(t)}function ow(){return ku}function bE(t){ku&&ku.cleanups.push(t)}let Ep;class cg{constructor(e,n,a,s){this.fn=e,this.trigger=n,this.scheduler=a,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,_E(this,s)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,Nd();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed){if(n.computed.effect._dirtyLevel===2)return!0;if(e4(n.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),Ud()}return this._dirtyLevel>=5}set dirty(e){this._dirtyLevel=e?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Id,n=Ep;try{return Id=!0,Ep=this,this._runnings++,L2(this),this.fn()}finally{O2(this),this._runnings--,Ep=n,Id=e}}stop(){this.active&&(L2(this),O2(this),this.onStop&&this.onStop(),this.active=!1)}}function e4(t){return t.value}function L2(t){t._trackId++,t._depsLength=0}function O2(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)xE(t.deps[e],t);t.deps.length=t._depsLength}}function xE(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}function n4(t,e){t.effect instanceof cg&&(t=t.effect.fn);const n=new cg(t,ou,()=>{n.dirty&&n.run()});e&&(Ho(n,e),e.scope&&_E(n,e.scope)),(!e||!e.lazy)&&n.run();const a=n.run.bind(n);return a.effect=n,a}function r4(t){t.effect.stop()}let Id=!0,lA=0;const AE=[];function Nd(){AE.push(Id),Id=!1}function Ud(){const t=AE.pop();Id=t===void 0?!0:t}function aw(){lA++}function sw(){for(lA--;!lA&&uA.length;)uA.shift()()}function wE(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const a=t.deps[t._depsLength];a!==e?(a&&xE(a,t),t.deps[t._depsLength++]=e):t._depsLength++}}const uA=[];function CE(t,e,n){aw();for(const a of t.keys()){if(!t.computed&&a.computed&&t.get(a)===a._trackId&&a._runnings>0){a._dirtyLevel=2;continue}let s;a._dirtyLevel<e&&(s??(s=t.get(a)===a._trackId))&&(a._shouldSchedule||(a._shouldSchedule=a._dirtyLevel===0),a.computed&&a._dirtyLevel===2&&(a._shouldSchedule=!0),a._dirtyLevel=e),a._shouldSchedule&&(s??(s=t.get(a)===a._trackId))&&(a.trigger(),(!a._runnings||a.allowRecurse)&&a._dirtyLevel!==3&&(a._shouldSchedule=!1,a.scheduler&&uA.push(a.scheduler)))}sw()}const IE=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},$1=new WeakMap,Sp=Symbol(""),cA=Symbol("");function su(t,e,n){if(Id&&Ep){let a=$1.get(t);a||$1.set(t,a=new Map);let s=a.get(n);s||a.set(n,s=IE(()=>a.delete(n))),wE(Ep,s)}}function bf(t,e,n,a,s,l){const i=$1.get(t);if(!i)return;let f=[];if(e==="clear")f=[...i.values()];else if(n==="length"&&hr(t)){const m=Number(a);i.forEach((y,x)=>{(x==="length"||!Cf(x)&&x>=m)&&f.push(y)})}else switch(n!==void 0&&f.push(i.get(n)),e){case"add":hr(t)?rw(n)&&f.push(i.get("length")):(f.push(i.get(Sp)),Qm(t)&&f.push(i.get(cA)));break;case"delete":hr(t)||(f.push(i.get(Sp)),Qm(t)&&f.push(i.get(cA)));break;case"set":Qm(t)&&f.push(i.get(Sp));break}aw();for(const m of f)m&&CE(m,5);sw()}function i4(t,e){const n=$1.get(t);return n&&n.get(e)}const o4=C_("__proto__,__v_isRef,__isVue"),EE=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Cf)),R2=a4();function a4(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const a=Ri(this);for(let l=0,i=this.length;l<i;l++)su(a,"get",l+"");const s=a[e](...n);return s===-1||s===!1?a[e](...n.map(Ri)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Nd(),aw();const a=Ri(this)[e].apply(this,n);return sw(),Ud(),a}}),t}function s4(t){Cf(t)||(t=String(t));const e=Ri(this);return su(e,"has",t),e.hasOwnProperty(t)}class SE{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,a){const s=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return l;if(n==="__v_raw")return a===(s?l?OE:LE:l?kE:PE).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(a)?e:void 0;const i=hr(e);if(!s){if(i&&Fi(R2,n))return Reflect.get(R2,n,a);if(n==="hasOwnProperty")return s4}const f=Reflect.get(e,n,a);return(Cf(n)?EE.has(n):o4(n))||(s||su(e,"get",n),l)?f:Jo(f)?i&&rw(n)?f:f.value:_o(f)?s?wy(f):sl(f):f}}class ME extends SE{constructor(e=!1){super(!1,e)}set(e,n,a,s){let l=e[n];if(!this._isShallow){const m=hg(l);if(!ny(a)&&!hg(a)&&(l=Ri(l),a=Ri(a)),!hr(e)&&Jo(l)&&!Jo(a))return m?!1:(l.value=a,!0)}const i=hr(e)&&rw(n)?Number(n)<e.length:Fi(e,n),f=Reflect.set(e,n,a,s);return e===Ri(s)&&(i?Xc(a,l)&&bf(e,"set",n,a):bf(e,"add",n,a)),f}deleteProperty(e,n){const a=Fi(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&a&&bf(e,"delete",n,void 0),s}has(e,n){const a=Reflect.has(e,n);return(!Cf(n)||!EE.has(n))&&su(e,"has",n),a}ownKeys(e){return su(e,"iterate",hr(e)?"length":Sp),Reflect.ownKeys(e)}}class TE extends SE{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const l4=new ME,u4=new TE,c4=new ME(!0),h4=new TE(!0),lw=t=>t,S_=t=>Reflect.getPrototypeOf(t);function r1(t,e,n=!1,a=!1){t=t.__v_raw;const s=Ri(t),l=Ri(e);n||(Xc(e,l)&&su(s,"get",e),su(s,"get",l));const{has:i}=S_(s),f=a?lw:n?hw:ry;if(i.call(s,e))return f(t.get(e));if(i.call(s,l))return f(t.get(l));t!==s&&t.get(e)}function i1(t,e=!1){const n=this.__v_raw,a=Ri(n),s=Ri(t);return e||(Xc(t,s)&&su(a,"has",t),su(a,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function o1(t,e=!1){return t=t.__v_raw,!e&&su(Ri(t),"iterate",Sp),Reflect.get(t,"size",t)}function D2(t){t=Ri(t);const e=Ri(this);return S_(e).has.call(e,t)||(e.add(t),bf(e,"add",t,t)),this}function z2(t,e){e=Ri(e);const n=Ri(this),{has:a,get:s}=S_(n);let l=a.call(n,t);l||(t=Ri(t),l=a.call(n,t));const i=s.call(n,t);return n.set(t,e),l?Xc(e,i)&&bf(n,"set",t,e):bf(n,"add",t,e),this}function B2(t){const e=Ri(this),{has:n,get:a}=S_(e);let s=n.call(e,t);s||(t=Ri(t),s=n.call(e,t)),a&&a.call(e,t);const l=e.delete(t);return s&&bf(e,"delete",t,void 0),l}function F2(){const t=Ri(this),e=t.size!==0,n=t.clear();return e&&bf(t,"clear",void 0,void 0),n}function a1(t,e){return function(a,s){const l=this,i=l.__v_raw,f=Ri(i),m=e?lw:t?hw:ry;return!t&&su(f,"iterate",Sp),i.forEach((y,x)=>a.call(s,m(y),m(x),l))}}function s1(t,e,n){return function(...a){const s=this.__v_raw,l=Ri(s),i=Qm(l),f=t==="entries"||t===Symbol.iterator&&i,m=t==="keys"&&i,y=s[t](...a),x=n?lw:e?hw:ry;return!e&&su(l,"iterate",m?cA:Sp),{next(){const{value:A,done:w}=y.next();return w?{value:A,done:w}:{value:f?[x(A[0]),x(A[1])]:x(A),done:w}},[Symbol.iterator](){return this}}}}function hd(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function f4(){const t={get(l){return r1(this,l)},get size(){return o1(this)},has:i1,add:D2,set:z2,delete:B2,clear:F2,forEach:a1(!1,!1)},e={get(l){return r1(this,l,!1,!0)},get size(){return o1(this)},has:i1,add:D2,set:z2,delete:B2,clear:F2,forEach:a1(!1,!0)},n={get(l){return r1(this,l,!0)},get size(){return o1(this,!0)},has(l){return i1.call(this,l,!0)},add:hd("add"),set:hd("set"),delete:hd("delete"),clear:hd("clear"),forEach:a1(!0,!1)},a={get(l){return r1(this,l,!0,!0)},get size(){return o1(this,!0)},has(l){return i1.call(this,l,!0)},add:hd("add"),set:hd("set"),delete:hd("delete"),clear:hd("clear"),forEach:a1(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=s1(l,!1,!1),n[l]=s1(l,!0,!1),e[l]=s1(l,!1,!0),a[l]=s1(l,!0,!0)}),[t,n,e,a]}const[d4,p4,m4,g4]=f4();function M_(t,e){const n=e?t?g4:m4:t?p4:d4;return(a,s,l)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?a:Reflect.get(Fi(n,s)&&s in a?n:a,s,l)}const v4={get:M_(!1,!1)},y4={get:M_(!1,!0)},_4={get:M_(!0,!1)},b4={get:M_(!0,!0)},PE=new WeakMap,kE=new WeakMap,LE=new WeakMap,OE=new WeakMap;function x4(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function A4(t){return t.__v_skip||!Object.isExtensible(t)?0:x4(j5(t))}function sl(t){return hg(t)?t:T_(t,!1,l4,v4,PE)}function uw(t){return T_(t,!1,c4,y4,kE)}function wy(t){return T_(t,!0,u4,_4,LE)}function w4(t){return T_(t,!0,h4,b4,OE)}function T_(t,e,n,a,s){if(!_o(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=s.get(t);if(l)return l;const i=A4(t);if(i===0)return t;const f=new Proxy(t,i===2?a:n);return s.set(t,f),f}function eg(t){return hg(t)?eg(t.__v_raw):!!(t&&t.__v_isReactive)}function hg(t){return!!(t&&t.__v_isReadonly)}function ny(t){return!!(t&&t.__v_isShallow)}function cw(t){return t?!!t.__v_raw:!1}function Ri(t){const e=t&&t.__v_raw;return e?Ri(e):t}function RE(t){return Object.isExtensible(t)&&mE(t,"__v_skip",!0),t}const ry=t=>_o(t)?sl(t):t,hw=t=>_o(t)?wy(t):t;class DE{constructor(e,n,a,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new cg(()=>e(this._value),()=>ng(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=a}get value(){const e=Ri(this);return(!e._cacheable||e.effect.dirty)&&Xc(e._value,e._value=e.effect.run())&&ng(e,5),fw(e),e.effect._dirtyLevel>=2&&ng(e,3),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function C4(t,e,n=!1){let a,s;const l=Nr(t);return l?(a=t,s=ou):(a=t.get,s=t.set),new DE(a,s,l||!s,n)}function fw(t){var e;Id&&Ep&&(t=Ri(t),wE(Ep,(e=t.dep)!=null?e:t.dep=IE(()=>t.dep=void 0,t instanceof DE?t:void 0)))}function ng(t,e=5,n,a){t=Ri(t);const s=t.dep;s&&CE(s,e)}function Jo(t){return!!(t&&t.__v_isRef===!0)}function on(t){return zE(t,!1)}function Cy(t){return zE(t,!0)}function zE(t,e){return Jo(t)?t:new I4(t,e)}class I4{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ri(e),this._value=n?e:ry(e)}get value(){return fw(this),this._value}set value(e){const n=this.__v_isShallow||ny(e)||hg(e);e=n?e:Ri(e),Xc(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=n?e:ry(e),ng(this,5))}}function E4(t){ng(t,5)}function at(t){return Jo(t)?t.value:t}function S4(t){return Nr(t)?t():at(t)}const M4={get:(t,e,n)=>at(Reflect.get(t,e,n)),set:(t,e,n,a)=>{const s=t[e];return Jo(s)&&!Jo(n)?(s.value=n,!0):Reflect.set(t,e,n,a)}};function dw(t){return eg(t)?t:new Proxy(t,M4)}class T4{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:a}=e(()=>fw(this),()=>ng(this));this._get=n,this._set=a}get value(){return this._get()}set value(e){this._set(e)}}function BE(t){return new T4(t)}function P4(t){const e=hr(t)?new Array(t.length):{};for(const n in t)e[n]=FE(t,n);return e}class k4{constructor(e,n,a){this._object=e,this._key=n,this._defaultValue=a,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return i4(Ri(this._object),this._key)}}class L4{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function O4(t,e,n){return Jo(t)?t:Nr(t)?new L4(t):_o(t)&&arguments.length>1?FE(t,e,n):on(t)}function FE(t,e,n){const a=t[e];return Jo(a)?a:new k4(t,e,n)}const R4={GET:"get",HAS:"has",ITERATE:"iterate"},D4={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"};/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function z4(t,e){}const B4={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER"},F4={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function xf(t,e,n,a){try{return a?t(...a):t()}catch(s){Bp(s,e,n)}}function Ru(t,e,n,a){if(Nr(t)){const s=xf(t,e,n,a);return s&&nw(s)&&s.catch(l=>{Bp(l,e,n)}),s}if(hr(t)){const s=[];for(let l=0;l<t.length;l++)s.push(Ru(t[l],e,n,a));return s}}function Bp(t,e,n,a=!0){const s=e?e.vnode:null;if(e){let l=e.parent;const i=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const y=l.ec;if(y){for(let x=0;x<y.length;x++)if(y[x](t,i,f)===!1)return}l=l.parent}const m=e.appContext.config.errorHandler;if(m){Nd(),xf(m,null,10,[t,i,f]),Ud();return}}N4(t,n,s,a)}function N4(t,e,n,a=!0){console.error(t)}let iy=!1,hA=!1;const il=[];let Sh=0;const rg=[];let md=null,Ap=0;const NE=Promise.resolve();let pw=null;function lu(t){const e=pw||NE;return t?e.then(this?t.bind(this):t):e}function U4(t){let e=Sh+1,n=il.length;for(;e<n;){const a=e+n>>>1,s=il[a],l=oy(s);l<t||l===t&&s.pre?e=a+1:n=a}return e}function P_(t){(!il.length||!il.includes(t,iy&&t.allowRecurse?Sh+1:Sh))&&(t.id==null?il.push(t):il.splice(U4(t.id),0,t),UE())}function UE(){!iy&&!hA&&(hA=!0,pw=NE.then(VE))}function V4(t){const e=il.indexOf(t);e>Sh&&il.splice(e,1)}function K1(t){hr(t)?rg.push(...t):(!md||!md.includes(t,t.allowRecurse?Ap+1:Ap))&&rg.push(t),UE()}function N2(t,e,n=iy?Sh+1:0){for(;n<il.length;n++){const a=il[n];if(a&&a.pre){if(t&&a.id!==t.uid)continue;il.splice(n,1),n--,a()}}}function q1(t){if(rg.length){const e=[...new Set(rg)].sort((n,a)=>oy(n)-oy(a));if(rg.length=0,md){md.push(...e);return}for(md=e,Ap=0;Ap<md.length;Ap++){const n=md[Ap];n.active!==!1&&n()}md=null,Ap=0}}const oy=t=>t.id==null?1/0:t.id,j4=(t,e)=>{const n=oy(t)-oy(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function VE(t){hA=!1,iy=!0,il.sort(j4);try{for(Sh=0;Sh<il.length;Sh++){const e=il[Sh];e&&e.active!==!1&&xf(e,null,14)}}finally{Sh=0,il.length=0,q1(),iy=!1,pw=null,(il.length||rg.length)&&VE()}}let jm,l1=[];function jE(t,e){var n,a;jm=t,jm?(jm.enabled=!0,l1.forEach(({event:s,args:l})=>jm.emit(s,...l)),l1=[]):typeof window<"u"&&window.HTMLElement&&!((a=(n=window.navigator)==null?void 0:n.userAgent)!=null&&a.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(l=>{jE(l,e)}),setTimeout(()=>{jm||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,l1=[])},3e3)):l1=[]}function H4(t,e,...n){if(t.isUnmounted)return;const a=t.vnode.props||po;let s=n;const l=e.startsWith("update:"),i=l&&e.slice(7);if(i&&i in a){const x=`${i==="modelValue"?"model":i}Modifiers`,{number:A,trim:w}=a[x]||po;w&&(s=n.map(E=>Qo(E)?E.trim():E)),A&&(s=n.map(W1))}let f,m=a[f=Dv(e)]||a[f=Dv(Tl(e))];!m&&l&&(m=a[f=Dv(Ou(e))]),m&&Ru(m,t,6,s);const y=a[f+"Once"];if(y){if(!t.emitted)t.emitted={};else if(t.emitted[f])return;t.emitted[f]=!0,Ru(y,t,6,s)}}function HE(t,e,n=!1){const a=e.emitsCache,s=a.get(t);if(s!==void 0)return s;const l=t.emits;let i={},f=!1;if(!Nr(t)){const m=y=>{const x=HE(y,e,!0);x&&(f=!0,Ho(i,x))};!n&&e.mixins.length&&e.mixins.forEach(m),t.extends&&m(t.extends),t.mixins&&t.mixins.forEach(m)}return!l&&!f?(_o(t)&&a.set(t,null),null):(hr(l)?l.forEach(m=>i[m]=null):Ho(i,l),_o(t)&&a.set(t,i),i)}function k_(t,e){return!t||!xy(e)?!1:(e=e.slice(2).replace(/Once$/,""),Fi(t,e[0].toLowerCase()+e.slice(1))||Fi(t,Ou(e))||Fi(t,e))}let as=null,L_=null;function ay(t){const e=as;return as=t,L_=t&&t.type.__scopeId||null,e}function th(t){L_=t}function eh(){L_=null}const G4=t=>Ce;function Ce(t,e=as,n){if(!e||t._n)return t;const a=(...s)=>{a._d&&xA(-1);const l=ay(e);let i;try{i=t(...s)}finally{ay(l),a._d&&xA(1)}return i};return a._n=!0,a._c=!0,a._d=!0,a}function M1(t){const{type:e,vnode:n,proxy:a,withProxy:s,propsOptions:[l],slots:i,attrs:f,emit:m,render:y,renderCache:x,props:A,data:w,setupState:E,ctx:L,inheritAttrs:k}=t,z=ay(t);let F,D;try{if(n.shapeFlag&4){const U=s||a,$=U;F=Lu(y.call($,U,x,A,E,w,L)),D=f}else{const U=e;F=Lu(U.length>1?U(A,{attrs:f,slots:i,emit:m}):U(A,null)),D=e.props?f:Z4(f)}}catch(U){Fv.length=0,Bp(U,t,1),F=Jt(xs)}let B=F;if(D&&k!==!1){const U=Object.keys(D),{shapeFlag:$}=B;U.length&&$&7&&(l&&U.some(tw)&&(D=$4(D,l)),B=Lh(B,D,!1,!0))}return n.dirs&&(B=Lh(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&(B.transition=n.transition),F=B,ay(z),F}function W4(t,e=!0){let n;for(let a=0;a<t.length;a++){const s=t[a];if(kd(s)){if(s.type!==xs||s.children==="v-if"){if(n)return;n=s}}else return}return n}const Z4=t=>{let e;for(const n in t)(n==="class"||n==="style"||xy(n))&&((e||(e={}))[n]=t[n]);return e},$4=(t,e)=>{const n={};for(const a in t)(!tw(a)||!(a.slice(9)in e))&&(n[a]=t[a]);return n};function K4(t,e,n){const{props:a,children:s,component:l}=t,{props:i,children:f,patchFlag:m}=e,y=l.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return a?U2(a,i,y):!!i;if(m&8){const x=e.dynamicProps;for(let A=0;A<x.length;A++){const w=x[A];if(i[w]!==a[w]&&!k_(y,w))return!0}}}else return(s||f)&&(!f||!f.$stable)?!0:a===i?!1:a?i?U2(a,i,y):!0:!!i;return!1}function U2(t,e,n){const a=Object.keys(e);if(a.length!==Object.keys(t).length)return!0;for(let s=0;s<a.length;s++){const l=a[s];if(e[l]!==t[l]&&!k_(n,l))return!0}return!1}function mw({vnode:t,parent:e},n){for(;e;){const a=e.subTree;if(a.suspense&&a.suspense.activeBranch===t&&(a.el=t.el),a===t)(t=e.vnode).el=n,e=e.parent;else break}}const gw="components",q4="directives";function Sl(t,e){return vw(gw,t,!0,e)||t}const GE=Symbol.for("v-ndc");function Ga(t){return Qo(t)?vw(gw,t,!1)||t:t||GE}function Y4(t){return vw(q4,t)}function vw(t,e,n=!0,a=!1){const s=as||os;if(s){const l=s.type;if(t===gw){const f=EA(l,!1);if(f&&(f===e||f===Tl(e)||f===Ay(Tl(e))))return l}const i=V2(s[t]||l[t],e)||V2(s.appContext[t],e);return!i&&a?l:i}}function V2(t,e){return t&&(t[e]||t[Tl(e)]||t[Ay(Tl(e))])}const fA=t=>t.__isSuspense;let dA=0;const X4={name:"Suspense",__isSuspense:!0,process(t,e,n,a,s,l,i,f,m,y){if(t==null)J4(e,n,a,s,l,i,f,m,y);else{if(l&&l.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}tP(t,e,n,a,s,i,f,m,y)}},hydrate:eP,create:yw,normalize:nP},Q4=X4;function sy(t,e){const n=t.props&&t.props[e];Nr(n)&&n()}function J4(t,e,n,a,s,l,i,f,m){const{p:y,o:{createElement:x}}=m,A=x("div"),w=t.suspense=yw(t,s,a,e,A,n,l,i,f,m);y(null,w.pendingBranch=t.ssContent,A,null,a,w,l,i),w.deps>0?(sy(t,"onPending"),sy(t,"onFallback"),y(null,t.ssFallback,e,n,a,null,l,i),ig(w,t.ssFallback)):w.resolve(!1,!0)}function tP(t,e,n,a,s,l,i,f,{p:m,um:y,o:{createElement:x}}){const A=e.suspense=t.suspense;A.vnode=e,e.el=t.el;const w=e.ssContent,E=e.ssFallback,{activeBranch:L,pendingBranch:k,isInFallback:z,isHydrating:F}=A;if(k)A.pendingBranch=w,Kc(w,k)?(m(k,w,A.hiddenContainer,null,s,A,l,i,f),A.deps<=0?A.resolve():z&&(F||(m(L,E,n,a,s,null,l,i,f),ig(A,E)))):(A.pendingId=dA++,F?(A.isHydrating=!1,A.activeBranch=k):y(k,s,A),A.deps=0,A.effects.length=0,A.hiddenContainer=x("div"),z?(m(null,w,A.hiddenContainer,null,s,A,l,i,f),A.deps<=0?A.resolve():(m(L,E,n,a,s,null,l,i,f),ig(A,E))):L&&Kc(w,L)?(m(L,w,n,a,s,A,l,i,f),A.resolve(!0)):(m(null,w,A.hiddenContainer,null,s,A,l,i,f),A.deps<=0&&A.resolve()));else if(L&&Kc(w,L))m(L,w,n,a,s,A,l,i,f),ig(A,w);else if(sy(e,"onPending"),A.pendingBranch=w,w.shapeFlag&512?A.pendingId=w.component.suspenseId:A.pendingId=dA++,m(null,w,A.hiddenContainer,null,s,A,l,i,f),A.deps<=0)A.resolve();else{const{timeout:D,pendingId:B}=A;D>0?setTimeout(()=>{A.pendingId===B&&A.fallback(E)},D):D===0&&A.fallback(E)}}function yw(t,e,n,a,s,l,i,f,m,y,x=!1){const{p:A,m:w,um:E,n:L,o:{parentNode:k,remove:z}}=y;let F;const D=rP(t);D&&e&&e.pendingBranch&&(F=e.pendingId,e.deps++);const B=t.props?Z1(t.props.timeout):void 0,U=l,$={vnode:t,parent:e,parentComponent:n,namespace:i,container:a,hiddenContainer:s,deps:0,pendingId:dA++,timeout:typeof B=="number"?B:-1,activeBranch:null,pendingBranch:null,isInFallback:!x,isHydrating:x,isUnmounted:!1,effects:[],resolve(q=!1,tt=!1){const{vnode:Y,activeBranch:G,pendingBranch:rt,pendingId:pt,effects:Q,parentComponent:ot,container:Z}=$;let Kt=!1;$.isHydrating?$.isHydrating=!1:q||(Kt=G&&rt.transition&&rt.transition.mode==="out-in",Kt&&(G.transition.afterLeave=()=>{pt===$.pendingId&&(w(rt,Z,l===U?L(G):l,0),K1(Q))}),G&&(k(G.el)!==$.hiddenContainer&&(l=L(G)),E(G,ot,$,!0)),Kt||w(rt,Z,l,0)),ig($,rt),$.pendingBranch=null,$.isInFallback=!1;let Ft=$.parent,Tt=!1;for(;Ft;){if(Ft.pendingBranch){Ft.effects.push(...Q),Tt=!0;break}Ft=Ft.parent}!Tt&&!Kt&&K1(Q),$.effects=[],D&&e&&e.pendingBranch&&F===e.pendingId&&(e.deps--,e.deps===0&&!tt&&e.resolve()),sy(Y,"onResolve")},fallback(q){if(!$.pendingBranch)return;const{vnode:tt,activeBranch:Y,parentComponent:G,container:rt,namespace:pt}=$;sy(tt,"onFallback");const Q=L(Y),ot=()=>{$.isInFallback&&(A(null,q,rt,Q,G,null,pt,f,m),ig($,q))},Z=q.transition&&q.transition.mode==="out-in";Z&&(Y.transition.afterLeave=ot),$.isInFallback=!0,E(Y,G,null,!0),Z||ot()},move(q,tt,Y){$.activeBranch&&w($.activeBranch,q,tt,Y),$.container=q},next(){return $.activeBranch&&L($.activeBranch)},registerDep(q,tt,Y){const G=!!$.pendingBranch;G&&$.deps++;const rt=q.vnode.el;q.asyncDep.catch(pt=>{Bp(pt,q,0)}).then(pt=>{if(q.isUnmounted||$.isUnmounted||$.pendingId!==q.suspenseId)return;q.asyncResolved=!0;const{vnode:Q}=q;CA(q,pt,!1),rt&&(Q.el=rt);const ot=!rt&&q.subTree.el;tt(q,Q,k(rt||q.subTree.el),rt?null:L(q.subTree),$,i,Y),ot&&z(ot),mw(q,Q.el),G&&--$.deps===0&&$.resolve()})},unmount(q,tt){$.isUnmounted=!0,$.activeBranch&&E($.activeBranch,n,q,tt),$.pendingBranch&&E($.pendingBranch,n,q,tt)}};return $}function eP(t,e,n,a,s,l,i,f,m){const y=e.suspense=yw(e,a,n,t.parentNode,document.createElement("div"),null,s,l,i,f,!0),x=m(t,y.pendingBranch=e.ssContent,n,y,l,i);return y.deps===0&&y.resolve(!1,!0),x}function nP(t){const{shapeFlag:e,children:n}=t,a=e&32;t.ssContent=j2(a?n.default:n),t.ssFallback=a?j2(n.fallback):Jt(xs)}function j2(t){let e;if(Nr(t)){const n=Lp&&t._c;n&&(t._d=!1,Ct()),t=t(),n&&(t._d=!0,e=au,TS())}return hr(t)&&(t=W4(t)),t=Lu(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function WE(t,e){e&&e.pendingBranch?hr(t)?e.effects.push(...t):e.effects.push(t):K1(t)}function ig(t,e){t.activeBranch=e;const{vnode:n,parentComponent:a}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,a&&a.subTree===n&&(a.vnode.el=s,mw(a,s))}function rP(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}function O_(t,e,n=os,a=!1){if(n){const s=n[t]||(n[t]=[]),l=e.__weh||(e.__weh=(...i)=>{Nd();const f=Op(n),m=Ru(e,n,t,i);return f(),Ud(),m});return a?s.unshift(l):s.push(l),l}}const Tf=t=>(e,n=os)=>{(!My||t==="sp")&&O_(t,(...a)=>e(...a),n)},ZE=Tf("bm"),$a=Tf("m"),$E=Tf("bu"),R_=Tf("u"),Iy=Tf("bum"),Pf=Tf("um"),KE=Tf("sp"),qE=Tf("rtg"),YE=Tf("rtc");function XE(t,e=os){O_("ec",t,e)}function Du(t,e){if(as===null)return t;const n=Ty(as),a=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[l,i,f,m=po]=e[s];l&&(Nr(l)&&(l={mounted:l,updated:l}),l.deep&&xd(i),a.push({dir:l,instance:n,value:i,oldValue:void 0,arg:f,modifiers:m}))}return t}function Eh(t,e,n,a){const s=t.dirs,l=e&&e.dirs;for(let i=0;i<s.length;i++){const f=s[i];l&&(f.oldValue=l[i].value);let m=f.dir[a];m&&(Nd(),Ru(m,n,8,[t.el,f,t,e]),Ud())}}function Eo(t,e,n,a){let s;const l=n&&n[a];if(hr(t)||Qo(t)){s=new Array(t.length);for(let i=0,f=t.length;i<f;i++)s[i]=e(t[i],i,void 0,l&&l[i])}else if(typeof t=="number"){s=new Array(t);for(let i=0;i<t;i++)s[i]=e(i+1,i,void 0,l&&l[i])}else if(_o(t))if(t[Symbol.iterator])s=Array.from(t,(i,f)=>e(i,f,void 0,l&&l[f]));else{const i=Object.keys(t);s=new Array(i.length);for(let f=0,m=i.length;f<m;f++){const y=i[f];s[f]=e(t[y],y,f,l&&l[f])}}else s=[];return n&&(n[a]=s),s}function iP(t,e){for(let n=0;n<e.length;n++){const a=e[n];if(hr(a))for(let s=0;s<a.length;s++)t[a[s].name]=a[s].fn;else a&&(t[a.name]=a.key?(...s)=>{const l=a.fn(...s);return l&&(l.key=a.key),l}:a.fn)}return t}/*! #__NO_SIDE_EFFECTS__ */function _r(t,e){return Nr(t)?Ho({name:t.name},e,{setup:t}):t}const Mp=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function oP(t){Nr(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:a,delay:s=200,timeout:l,suspensible:i=!0,onError:f}=t;let m=null,y,x=0;const A=()=>(x++,m=null,w()),w=()=>{let E;return m||(E=m=e().catch(L=>{if(L=L instanceof Error?L:new Error(String(L)),f)return new Promise((k,z)=>{f(L,()=>k(A()),()=>z(L),x+1)});throw L}).then(L=>E!==m&&m?m:(L&&(L.__esModule||L[Symbol.toStringTag]==="Module")&&(L=L.default),y=L,L)))};return _r({name:"AsyncComponentWrapper",__asyncLoader:w,get __asyncResolved(){return y},setup(){const E=os;if(y)return()=>gx(y,E);const L=D=>{m=null,Bp(D,E,13,!a)};if(i&&E.suspense||My)return w().then(D=>()=>gx(D,E)).catch(D=>(L(D),()=>a?Jt(a,{error:D}):null));const k=on(!1),z=on(),F=on(!!s);return s&&setTimeout(()=>{F.value=!1},s),l!=null&&setTimeout(()=>{if(!k.value&&!z.value){const D=new Error(`Async component timed out after ${l}ms.`);L(D),z.value=D}},l),w().then(()=>{k.value=!0,E.parent&&Sy(E.parent.vnode)&&(E.parent.effect.dirty=!0,P_(E.parent.update))}).catch(D=>{L(D),z.value=D}),()=>{if(k.value&&y)return gx(y,E);if(z.value&&a)return Jt(a,{error:z.value});if(n&&!F.value)return Jt(n)}}})}function gx(t,e){const{ref:n,props:a,children:s,ce:l}=e.vnode,i=Jt(t,a,s);return i.ref=n,i.ce=l,delete e.vnode.ce,i}function Zn(t,e,n={},a,s){if(as.isCE||as.parent&&Mp(as.parent)&&as.parent.isCE)return e!=="default"&&(n.name=e),Jt("slot",n,a&&a());let l=t[e];l&&l._c&&(l._d=!1),Ct();const i=l&&QE(l(n)),f=$e(Mr,{key:n.key||i&&i.key||`_${e}`},i||(a?a():[]),i&&t._===1?64:-2);return!s&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),l&&l._c&&(l._d=!0),f}function QE(t){return t.some(e=>kd(e)?!(e.type===xs||e.type===Mr&&!QE(e.children)):!0)?t:null}function aP(t,e){const n={};for(const a in t)n[e&&/[A-Z]/.test(a)?`on:${a}`:Dv(a)]=t[a];return n}const pA=t=>t?OS(t)?Ty(t):pA(t.parent):null,zv=Ho(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>pA(t.parent),$root:t=>pA(t.root),$emit:t=>t.emit,$options:t=>_w(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,P_(t.update)}),$nextTick:t=>t.n||(t.n=lu.bind(t.proxy)),$watch:t=>zP.bind(t)}),vx=(t,e)=>t!==po&&!t.__isScriptSetup&&Fi(t,e),mA={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:a,data:s,props:l,accessCache:i,type:f,appContext:m}=t;let y;if(e[0]!=="$"){const E=i[e];if(E!==void 0)switch(E){case 1:return a[e];case 2:return s[e];case 4:return n[e];case 3:return l[e]}else{if(vx(a,e))return i[e]=1,a[e];if(s!==po&&Fi(s,e))return i[e]=2,s[e];if((y=t.propsOptions[0])&&Fi(y,e))return i[e]=3,l[e];if(n!==po&&Fi(n,e))return i[e]=4,n[e];gA&&(i[e]=0)}}const x=zv[e];let A,w;if(x)return e==="$attrs"&&su(t.attrs,"get",""),x(t);if((A=f.__cssModules)&&(A=A[e]))return A;if(n!==po&&Fi(n,e))return i[e]=4,n[e];if(w=m.config.globalProperties,Fi(w,e))return w[e]},set({_:t},e,n){const{data:a,setupState:s,ctx:l}=t;return vx(s,e)?(s[e]=n,!0):a!==po&&Fi(a,e)?(a[e]=n,!0):Fi(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:a,appContext:s,propsOptions:l}},i){let f;return!!n[i]||t!==po&&Fi(t,i)||vx(e,i)||(f=l[0])&&Fi(f,i)||Fi(a,i)||Fi(zv,i)||Fi(s.config.globalProperties,i)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Fi(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},sP=Ho({},mA,{get(t,e){if(e!==Symbol.unscopables)return mA.get(t,e,t)},has(t,e){return e[0]!=="_"&&!Z5(e)}});function lP(){return null}function uP(){return null}function cP(t){}function hP(t){}function fP(){return null}function dP(){}function pP(t,e){return null}function JE(){return tS().slots}function mP(){return tS().attrs}function tS(){const t=Bu();return t.setupContext||(t.setupContext=zS(t))}function ly(t){return hr(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function gP(t,e){const n=ly(t);for(const a in e){if(a.startsWith("__skip"))continue;let s=n[a];s?hr(s)||Nr(s)?s=n[a]={type:s,default:e[a]}:s.default=e[a]:s===null&&(s=n[a]={default:e[a]}),s&&e[`__skip_${a}`]&&(s.skipFactory=!0)}return n}function Bs(t,e){return!t||!e?t||e:hr(t)&&hr(e)?t.concat(e):Ho({},ly(t),ly(e))}function vP(t,e){const n={};for(const a in t)e.includes(a)||Object.defineProperty(n,a,{enumerable:!0,get:()=>t[a]});return n}function yP(t){const e=Bu();let n=t();return wA(),nw(n)&&(n=n.catch(a=>{throw Op(e),a})),[n,()=>Op(e)]}let gA=!0;function _P(t){const e=_w(t),n=t.proxy,a=t.ctx;gA=!1,e.beforeCreate&&H2(e.beforeCreate,t,"bc");const{data:s,computed:l,methods:i,watch:f,provide:m,inject:y,created:x,beforeMount:A,mounted:w,beforeUpdate:E,updated:L,activated:k,deactivated:z,beforeDestroy:F,beforeUnmount:D,destroyed:B,unmounted:U,render:$,renderTracked:q,renderTriggered:tt,errorCaptured:Y,serverPrefetch:G,expose:rt,inheritAttrs:pt,components:Q,directives:ot,filters:Z}=e;if(y&&bP(y,a,null),i)for(const Tt in i){const ie=i[Tt];Nr(ie)&&(a[Tt]=ie.bind(n))}if(s){const Tt=s.call(n,n);_o(Tt)&&(t.data=sl(Tt))}if(gA=!0,l)for(const Tt in l){const ie=l[Tt],ue=Nr(ie)?ie.bind(n,n):Nr(ie.get)?ie.get.bind(n,n):ou,je=!Nr(ie)&&Nr(ie.set)?ie.set.bind(n):ou,jt=hn({get:ue,set:je});Object.defineProperty(a,Tt,{enumerable:!0,configurable:!0,get:()=>jt.value,set:Ut=>jt.value=Ut})}if(f)for(const Tt in f)eS(f[Tt],a,n,Tt);if(m){const Tt=Nr(m)?m.call(n):m;Reflect.ownKeys(Tt).forEach(ie=>{Ed(ie,Tt[ie])})}x&&H2(x,t,"c");function Ft(Tt,ie){hr(ie)?ie.forEach(ue=>Tt(ue.bind(n))):ie&&Tt(ie.bind(n))}if(Ft(ZE,A),Ft($a,w),Ft($E,E),Ft(R_,L),Ft(AS,k),Ft(wS,z),Ft(XE,Y),Ft(YE,q),Ft(qE,tt),Ft(Iy,D),Ft(Pf,U),Ft(KE,G),hr(rt))if(rt.length){const Tt=t.exposed||(t.exposed={});rt.forEach(ie=>{Object.defineProperty(Tt,ie,{get:()=>n[ie],set:ue=>n[ie]=ue})})}else t.exposed||(t.exposed={});$&&t.render===ou&&(t.render=$),pt!=null&&(t.inheritAttrs=pt),Q&&(t.components=Q),ot&&(t.directives=ot)}function bP(t,e,n=ou){hr(t)&&(t=vA(t));for(const a in t){const s=t[a];let l;_o(s)?"default"in s?l=As(s.from||a,s.default,!0):l=As(s.from||a):l=As(s),Jo(l)?Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>l.value,set:i=>l.value=i}):e[a]=l}}function H2(t,e,n){Ru(hr(t)?t.map(a=>a.bind(e.proxy)):t.bind(e.proxy),e,n)}function eS(t,e,n,a){const s=a.includes(".")?xS(n,a):()=>n[a];if(Qo(t)){const l=e[t];Nr(l)&&Wa(s,l)}else if(Nr(t))Wa(s,t.bind(n));else if(_o(t))if(hr(t))t.forEach(l=>eS(l,e,n,a));else{const l=Nr(t.handler)?t.handler.bind(n):e[t.handler];Nr(l)&&Wa(s,l,t)}}function _w(t){const e=t.type,{mixins:n,extends:a}=e,{mixins:s,optionsCache:l,config:{optionMergeStrategies:i}}=t.appContext,f=l.get(e);let m;return f?m=f:!s.length&&!n&&!a?m=e:(m={},s.length&&s.forEach(y=>Y1(m,y,i,!0)),Y1(m,e,i)),_o(e)&&l.set(e,m),m}function Y1(t,e,n,a=!1){const{mixins:s,extends:l}=e;l&&Y1(t,l,n,!0),s&&s.forEach(i=>Y1(t,i,n,!0));for(const i in e)if(!(a&&i==="expose")){const f=xP[i]||n&&n[i];t[i]=f?f(t[i],e[i]):e[i]}return t}const xP={data:G2,props:W2,emits:W2,methods:Ev,computed:Ev,beforeCreate:Cl,created:Cl,beforeMount:Cl,mounted:Cl,beforeUpdate:Cl,updated:Cl,beforeDestroy:Cl,beforeUnmount:Cl,destroyed:Cl,unmounted:Cl,activated:Cl,deactivated:Cl,errorCaptured:Cl,serverPrefetch:Cl,components:Ev,directives:Ev,watch:wP,provide:G2,inject:AP};function G2(t,e){return e?t?function(){return Ho(Nr(t)?t.call(this,this):t,Nr(e)?e.call(this,this):e)}:e:t}function AP(t,e){return Ev(vA(t),vA(e))}function vA(t){if(hr(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Cl(t,e){return t?[...new Set([].concat(t,e))]:e}function Ev(t,e){return t?Ho(Object.create(null),t,e):e}function W2(t,e){return t?hr(t)&&hr(e)?[...new Set([...t,...e])]:Ho(Object.create(null),ly(t),ly(e??{})):e}function wP(t,e){if(!t)return e;if(!e)return t;const n=Ho(Object.create(null),t);for(const a in e)n[a]=Cl(t[a],e[a]);return n}function nS(){return{app:null,config:{isNativeTag:N5,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let CP=0;function IP(t,e){return function(a,s=null){Nr(a)||(a=Ho({},a)),s!=null&&!_o(s)&&(s=null);const l=nS(),i=new WeakSet;let f=!1;const m=l.app={_uid:CP++,_component:a,_props:s,_container:null,_context:l,_instance:null,version:FS,get config(){return l.config},set config(y){},use(y,...x){return i.has(y)||(y&&Nr(y.install)?(i.add(y),y.install(m,...x)):Nr(y)&&(i.add(y),y(m,...x))),m},mixin(y){return l.mixins.includes(y)||l.mixins.push(y),m},component(y,x){return x?(l.components[y]=x,m):l.components[y]},directive(y,x){return x?(l.directives[y]=x,m):l.directives[y]},mount(y,x,A){if(!f){const w=Jt(a,s);return w.appContext=l,A===!0?A="svg":A===!1&&(A=void 0),x&&e?e(w,y):t(w,y,A),f=!0,m._container=y,y.__vue_app__=m,Ty(w.component)}},unmount(){f&&(t(null,m._container),delete m._container.__vue_app__)},provide(y,x){return l.provides[y]=x,m},runWithContext(y){const x=og;og=m;try{return y()}finally{og=x}}};return m}}let og=null;function Ed(t,e){if(os){let n=os.provides;const a=os.parent&&os.parent.provides;a===n&&(n=os.provides=Object.create(a)),n[t]=e}}function As(t,e,n=!1){const a=os||as;if(a||og){const s=a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:og._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Nr(e)?e.call(a&&a.proxy):e}}function EP(){return!!(os||as||og)}const rS={},iS=()=>Object.create(rS),oS=t=>Object.getPrototypeOf(t)===rS;function SP(t,e,n,a=!1){const s={},l=iS();t.propsDefaults=Object.create(null),aS(t,e,s,l);for(const i in t.propsOptions[0])i in s||(s[i]=void 0);n?t.props=a?s:uw(s):t.type.props?t.props=s:t.props=l,t.attrs=l}function MP(t,e,n,a){const{props:s,attrs:l,vnode:{patchFlag:i}}=t,f=Ri(s),[m]=t.propsOptions;let y=!1;if((a||i>0)&&!(i&16)){if(i&8){const x=t.vnode.dynamicProps;for(let A=0;A<x.length;A++){let w=x[A];if(k_(t.emitsOptions,w))continue;const E=e[w];if(m)if(Fi(l,w))E!==l[w]&&(l[w]=E,y=!0);else{const L=Tl(w);s[L]=yA(m,f,L,E,t,!1)}else E!==l[w]&&(l[w]=E,y=!0)}}}else{aS(t,e,s,l)&&(y=!0);let x;for(const A in f)(!e||!Fi(e,A)&&((x=Ou(A))===A||!Fi(e,x)))&&(m?n&&(n[A]!==void 0||n[x]!==void 0)&&(s[A]=yA(m,f,A,void 0,t,!0)):delete s[A]);if(l!==f)for(const A in l)(!e||!Fi(e,A))&&(delete l[A],y=!0)}y&&bf(t.attrs,"set","")}function aS(t,e,n,a){const[s,l]=t.propsOptions;let i=!1,f;if(e)for(let m in e){if(Jm(m))continue;const y=e[m];let x;s&&Fi(s,x=Tl(m))?!l||!l.includes(x)?n[x]=y:(f||(f={}))[x]=y:k_(t.emitsOptions,m)||(!(m in a)||y!==a[m])&&(a[m]=y,i=!0)}if(l){const m=Ri(n),y=f||po;for(let x=0;x<l.length;x++){const A=l[x];n[A]=yA(s,m,A,y[A],t,!Fi(y,A))}}return i}function yA(t,e,n,a,s,l){const i=t[n];if(i!=null){const f=Fi(i,"default");if(f&&a===void 0){const m=i.default;if(i.type!==Function&&!i.skipFactory&&Nr(m)){const{propsDefaults:y}=s;if(n in y)a=y[n];else{const x=Op(s);a=y[n]=m.call(null,e),x()}}else a=m}i[0]&&(l&&!f?a=!1:i[1]&&(a===""||a===Ou(n))&&(a=!0))}return a}function sS(t,e,n=!1){const a=e.propsCache,s=a.get(t);if(s)return s;const l=t.props,i={},f=[];let m=!1;if(!Nr(t)){const x=A=>{m=!0;const[w,E]=sS(A,e,!0);Ho(i,w),E&&f.push(...E)};!n&&e.mixins.length&&e.mixins.forEach(x),t.extends&&x(t.extends),t.mixins&&t.mixins.forEach(x)}if(!l&&!m)return _o(t)&&a.set(t,Xm),Xm;if(hr(l))for(let x=0;x<l.length;x++){const A=Tl(l[x]);Z2(A)&&(i[A]=po)}else if(l)for(const x in l){const A=Tl(x);if(Z2(A)){const w=l[x],E=i[A]=hr(w)||Nr(w)?{type:w}:Ho({},w);if(E){const L=q2(Boolean,E.type),k=q2(String,E.type);E[0]=L>-1,E[1]=k<0||L<k,(L>-1||Fi(E,"default"))&&f.push(A)}}}const y=[i,f];return _o(t)&&a.set(t,y),y}function Z2(t){return t[0]!=="$"&&!Jm(t)}function $2(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function K2(t,e){return $2(t)===$2(e)}function q2(t,e){return hr(e)?e.findIndex(n=>K2(n,t)):Nr(e)&&K2(e,t)?0:-1}const lS=t=>t[0]==="_"||t==="$stable",bw=t=>hr(t)?t.map(Lu):[Lu(t)],TP=(t,e,n)=>{if(e._n)return e;const a=Ce((...s)=>bw(e(...s)),n);return a._c=!1,a},uS=(t,e,n)=>{const a=t._ctx;for(const s in t){if(lS(s))continue;const l=t[s];if(Nr(l))e[s]=TP(s,l,a);else if(l!=null){const i=bw(l);e[s]=()=>i}}},cS=(t,e)=>{const n=bw(e);t.slots.default=()=>n},PP=(t,e)=>{const n=t.slots=iS();if(t.vnode.shapeFlag&32){const a=e._;a?(Ho(n,e),mE(n,"_",a,!0)):uS(e,n)}else e&&cS(t,e)},kP=(t,e,n)=>{const{vnode:a,slots:s}=t;let l=!0,i=po;if(a.shapeFlag&32){const f=e._;f?n&&f===1?l=!1:(Ho(s,e),!n&&f===1&&delete s._):(l=!e.$stable,uS(e,s)),i=e}else e&&(cS(t,e),i={default:1});if(l)for(const f in s)!lS(f)&&i[f]==null&&delete s[f]};function X1(t,e,n,a,s=!1){if(hr(t)){t.forEach((w,E)=>X1(w,e&&(hr(e)?e[E]:e),n,a,s));return}if(Mp(a)&&!s)return;const l=a.shapeFlag&4?Ty(a.component):a.el,i=s?null:l,{i:f,r:m}=t,y=e&&e.r,x=f.refs===po?f.refs={}:f.refs,A=f.setupState;if(y!=null&&y!==m&&(Qo(y)?(x[y]=null,Fi(A,y)&&(A[y]=null)):Jo(y)&&(y.value=null)),Nr(m))xf(m,f,12,[i,x]);else{const w=Qo(m),E=Jo(m);if(w||E){const L=()=>{if(t.f){const k=w?Fi(A,m)?A[m]:x[m]:m.value;s?hr(k)&&ew(k,l):hr(k)?k.includes(l)||k.push(l):w?(x[m]=[l],Fi(A,m)&&(A[m]=x[m])):(m.value=[l],t.k&&(x[t.k]=m.value))}else w?(x[m]=i,Fi(A,m)&&(A[m]=i)):E&&(m.value=i,t.k&&(x[t.k]=i))};i?(L.id=-1,_s(L,n)):L()}}}let Y2=!1;const Om=()=>{Y2||(console.error("Hydration completed but contains mismatches."),Y2=!0)},LP=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",OP=t=>t.namespaceURI.includes("MathML"),u1=t=>{if(LP(t))return"svg";if(OP(t))return"mathml"},c1=t=>t.nodeType===8;function RP(t){const{mt:e,p:n,o:{patchProp:a,createText:s,nextSibling:l,parentNode:i,remove:f,insert:m,createComment:y}}=t,x=(B,U)=>{if(!U.hasChildNodes()){n(null,B,U),q1(),U._vnode=B;return}A(U.firstChild,B,null,null,null),q1(),U._vnode=B},A=(B,U,$,q,tt,Y=!1)=>{Y=Y||!!U.dynamicChildren;const G=c1(B)&&B.data==="[",rt=()=>k(B,U,$,q,tt,G),{type:pt,ref:Q,shapeFlag:ot,patchFlag:Z}=U;let Kt=B.nodeType;U.el=B,Z===-2&&(Y=!1,U.dynamicChildren=null);let Ft=null;switch(pt){case kp:Kt!==3?U.children===""?(m(U.el=s(""),i(B),B),Ft=B):Ft=rt():(B.data!==U.children&&(Om(),B.data=U.children),Ft=l(B));break;case xs:D(B)?(Ft=l(B),F(U.el=B.content.firstChild,B,$)):Kt!==8||G?Ft=rt():Ft=l(B);break;case Tp:if(G&&(B=l(B),Kt=B.nodeType),Kt===1||Kt===3){Ft=B;const Tt=!U.children.length;for(let ie=0;ie<U.staticCount;ie++)Tt&&(U.children+=Ft.nodeType===1?Ft.outerHTML:Ft.data),ie===U.staticCount-1&&(U.anchor=Ft),Ft=l(Ft);return G?l(Ft):Ft}else rt();break;case Mr:G?Ft=L(B,U,$,q,tt,Y):Ft=rt();break;default:if(ot&1)(Kt!==1||U.type.toLowerCase()!==B.tagName.toLowerCase())&&!D(B)?Ft=rt():Ft=w(B,U,$,q,tt,Y);else if(ot&6){U.slotScopeIds=tt;const Tt=i(B);if(G?Ft=z(B):c1(B)&&B.data==="teleport start"?Ft=z(B,B.data,"teleport end"):Ft=l(B),e(U,Tt,null,$,q,u1(Tt),Y),Mp(U)){let ie;G?(ie=Jt(Mr),ie.anchor=Ft?Ft.previousSibling:Tt.lastChild):ie=B.nodeType===3?_a(""):Jt("div"),ie.el=B,U.component.subTree=ie}}else ot&64?Kt!==8?Ft=rt():Ft=U.type.hydrate(B,U,$,q,tt,Y,t,E):ot&128&&(Ft=U.type.hydrate(B,U,$,q,u1(i(B)),tt,Y,t,A))}return Q!=null&&X1(Q,null,q,U),Ft},w=(B,U,$,q,tt,Y)=>{Y=Y||!!U.dynamicChildren;const{type:G,props:rt,patchFlag:pt,shapeFlag:Q,dirs:ot,transition:Z}=U,Kt=G==="input"||G==="option";if(Kt||pt!==-1){ot&&Eh(U,null,$,"created");let Ft=!1;if(D(B)){Ft=pS(q,Z)&&$&&$.vnode.props&&$.vnode.props.appear;const ie=B.content.firstChild;Ft&&Z.beforeEnter(ie),F(ie,B,$),U.el=B=ie}if(Q&16&&!(rt&&(rt.innerHTML||rt.textContent))){let ie=E(B.firstChild,U,B,$,q,tt,Y);for(;ie;){Om();const ue=ie;ie=ie.nextSibling,f(ue)}}else Q&8&&B.textContent!==U.children&&(Om(),B.textContent=U.children);if(rt)if(Kt||!Y||pt&48)for(const ie in rt)(Kt&&(ie.endsWith("value")||ie==="indeterminate")||xy(ie)&&!Jm(ie)||ie[0]===".")&&a(B,ie,null,rt[ie],void 0,void 0,$);else rt.onClick&&a(B,"onClick",null,rt.onClick,void 0,void 0,$);let Tt;(Tt=rt&&rt.onVnodeBeforeMount)&&ru(Tt,$,U),ot&&Eh(U,null,$,"beforeMount"),((Tt=rt&&rt.onVnodeMounted)||ot||Ft)&&WE(()=>{Tt&&ru(Tt,$,U),Ft&&Z.enter(B),ot&&Eh(U,null,$,"mounted")},q)}return B.nextSibling},E=(B,U,$,q,tt,Y,G)=>{G=G||!!U.dynamicChildren;const rt=U.children,pt=rt.length;for(let Q=0;Q<pt;Q++){const ot=G?rt[Q]:rt[Q]=Lu(rt[Q]);B?B=A(B,ot,q,tt,Y,G):ot.type===kp&&!ot.children?m(ot.el=s(""),$):(Om(),n(null,ot,$,null,q,tt,u1($),Y))}return B},L=(B,U,$,q,tt,Y)=>{const{slotScopeIds:G}=U;G&&(tt=tt?tt.concat(G):G);const rt=i(B),pt=E(l(B),U,rt,$,q,tt,Y);return pt&&c1(pt)&&pt.data==="]"?l(U.anchor=pt):(Om(),m(U.anchor=y("]"),rt,pt),pt)},k=(B,U,$,q,tt,Y)=>{if(Om(),U.el=null,Y){const pt=z(B);for(;;){const Q=l(B);if(Q&&Q!==pt)f(Q);else break}}const G=l(B),rt=i(B);return f(B),n(null,U,rt,G,$,q,u1(rt),tt),G},z=(B,U="[",$="]")=>{let q=0;for(;B;)if(B=l(B),B&&c1(B)&&(B.data===U&&q++,B.data===$)){if(q===0)return l(B);q--}return B},F=(B,U,$)=>{const q=U.parentNode;q&&q.replaceChild(B,U);let tt=$;for(;tt;)tt.vnode.el===U&&(tt.vnode.el=tt.subTree.el=B),tt=tt.parent},D=B=>B.nodeType===1&&B.tagName.toLowerCase()==="template";return[x,A]}const _s=WE;function hS(t){return dS(t)}function fS(t){return dS(t,RP)}function dS(t,e){const n=gE();n.__VUE__=!0;const{insert:a,remove:s,patchProp:l,createElement:i,createText:f,createComment:m,setText:y,setElementText:x,parentNode:A,nextSibling:w,setScopeId:E=ou,insertStaticContent:L}=t,k=(_t,N,Et,wt=null,ht=null,lt=null,Pt=void 0,Wt=null,ee=!!N.dynamicChildren)=>{if(_t===N)return;_t&&!Kc(_t,N)&&(wt=fe(_t),Ut(_t,ht,lt,!0),_t=null),N.patchFlag===-2&&(ee=!1,N.dynamicChildren=null);const{type:Dt,ref:ve,shapeFlag:Te}=N;switch(Dt){case kp:z(_t,N,Et,wt);break;case xs:F(_t,N,Et,wt);break;case Tp:_t==null&&D(N,Et,wt,Pt);break;case Mr:Q(_t,N,Et,wt,ht,lt,Pt,Wt,ee);break;default:Te&1?$(_t,N,Et,wt,ht,lt,Pt,Wt,ee):Te&6?ot(_t,N,Et,wt,ht,lt,Pt,Wt,ee):(Te&64||Te&128)&&Dt.process(_t,N,Et,wt,ht,lt,Pt,Wt,ee,Se)}ve!=null&&ht&&X1(ve,_t&&_t.ref,lt,N||_t,!N)},z=(_t,N,Et,wt)=>{if(_t==null)a(N.el=f(N.children),Et,wt);else{const ht=N.el=_t.el;N.children!==_t.children&&y(ht,N.children)}},F=(_t,N,Et,wt)=>{_t==null?a(N.el=m(N.children||""),Et,wt):N.el=_t.el},D=(_t,N,Et,wt)=>{[_t.el,_t.anchor]=L(_t.children,N,Et,wt,_t.el,_t.anchor)},B=({el:_t,anchor:N},Et,wt)=>{let ht;for(;_t&&_t!==N;)ht=w(_t),a(_t,Et,wt),_t=ht;a(N,Et,wt)},U=({el:_t,anchor:N})=>{let Et;for(;_t&&_t!==N;)Et=w(_t),s(_t),_t=Et;s(N)},$=(_t,N,Et,wt,ht,lt,Pt,Wt,ee)=>{N.type==="svg"?Pt="svg":N.type==="math"&&(Pt="mathml"),_t==null?q(N,Et,wt,ht,lt,Pt,Wt,ee):G(_t,N,ht,lt,Pt,Wt,ee)},q=(_t,N,Et,wt,ht,lt,Pt,Wt)=>{let ee,Dt;const{props:ve,shapeFlag:Te,transition:Ae,dirs:De}=_t;if(ee=_t.el=i(_t.type,lt,ve&&ve.is,ve),Te&8?x(ee,_t.children):Te&16&&Y(_t.children,ee,null,wt,ht,yx(_t,lt),Pt,Wt),De&&Eh(_t,null,wt,"created"),tt(ee,_t,_t.scopeId,Pt,wt),ve){for(const gn in ve)gn!=="value"&&!Jm(gn)&&l(ee,gn,null,ve[gn],lt,_t.children,wt,ht,qe);"value"in ve&&l(ee,"value",null,ve.value,lt),(Dt=ve.onVnodeBeforeMount)&&ru(Dt,wt,_t)}De&&Eh(_t,null,wt,"beforeMount");const un=pS(ht,Ae);un&&Ae.beforeEnter(ee),a(ee,N,Et),((Dt=ve&&ve.onVnodeMounted)||un||De)&&_s(()=>{Dt&&ru(Dt,wt,_t),un&&Ae.enter(ee),De&&Eh(_t,null,wt,"mounted")},ht)},tt=(_t,N,Et,wt,ht)=>{if(Et&&E(_t,Et),wt)for(let lt=0;lt<wt.length;lt++)E(_t,wt[lt]);if(ht){let lt=ht.subTree;if(N===lt){const Pt=ht.vnode;tt(_t,Pt,Pt.scopeId,Pt.slotScopeIds,ht.parent)}}},Y=(_t,N,Et,wt,ht,lt,Pt,Wt,ee=0)=>{for(let Dt=ee;Dt<_t.length;Dt++){const ve=_t[Dt]=Wt?vd(_t[Dt]):Lu(_t[Dt]);k(null,ve,N,Et,wt,ht,lt,Pt,Wt)}},G=(_t,N,Et,wt,ht,lt,Pt)=>{const Wt=N.el=_t.el;let{patchFlag:ee,dynamicChildren:Dt,dirs:ve}=N;ee|=_t.patchFlag&16;const Te=_t.props||po,Ae=N.props||po;let De;if(Et&&gp(Et,!1),(De=Ae.onVnodeBeforeUpdate)&&ru(De,Et,N,_t),ve&&Eh(N,_t,Et,"beforeUpdate"),Et&&gp(Et,!0),Dt?rt(_t.dynamicChildren,Dt,Wt,Et,wt,yx(N,ht),lt):Pt||ie(_t,N,Wt,null,Et,wt,yx(N,ht),lt,!1),ee>0){if(ee&16)pt(Wt,N,Te,Ae,Et,wt,ht);else if(ee&2&&Te.class!==Ae.class&&l(Wt,"class",null,Ae.class,ht),ee&4&&l(Wt,"style",Te.style,Ae.style,ht),ee&8){const un=N.dynamicProps;for(let gn=0;gn<un.length;gn++){const re=un[gn],ce=Te[re],_e=Ae[re];(_e!==ce||re==="value")&&l(Wt,re,ce,_e,ht,_t.children,Et,wt,qe)}}ee&1&&_t.children!==N.children&&x(Wt,N.children)}else!Pt&&Dt==null&&pt(Wt,N,Te,Ae,Et,wt,ht);((De=Ae.onVnodeUpdated)||ve)&&_s(()=>{De&&ru(De,Et,N,_t),ve&&Eh(N,_t,Et,"updated")},wt)},rt=(_t,N,Et,wt,ht,lt,Pt)=>{for(let Wt=0;Wt<N.length;Wt++){const ee=_t[Wt],Dt=N[Wt],ve=ee.el&&(ee.type===Mr||!Kc(ee,Dt)||ee.shapeFlag&70)?A(ee.el):Et;k(ee,Dt,ve,null,wt,ht,lt,Pt,!0)}},pt=(_t,N,Et,wt,ht,lt,Pt)=>{if(Et!==wt){if(Et!==po)for(const Wt in Et)!Jm(Wt)&&!(Wt in wt)&&l(_t,Wt,Et[Wt],null,Pt,N.children,ht,lt,qe);for(const Wt in wt){if(Jm(Wt))continue;const ee=wt[Wt],Dt=Et[Wt];ee!==Dt&&Wt!=="value"&&l(_t,Wt,Dt,ee,Pt,N.children,ht,lt,qe)}"value"in wt&&l(_t,"value",Et.value,wt.value,Pt)}},Q=(_t,N,Et,wt,ht,lt,Pt,Wt,ee)=>{const Dt=N.el=_t?_t.el:f(""),ve=N.anchor=_t?_t.anchor:f("");let{patchFlag:Te,dynamicChildren:Ae,slotScopeIds:De}=N;De&&(Wt=Wt?Wt.concat(De):De),_t==null?(a(Dt,Et,wt),a(ve,Et,wt),Y(N.children||[],Et,ve,ht,lt,Pt,Wt,ee)):Te>0&&Te&64&&Ae&&_t.dynamicChildren?(rt(_t.dynamicChildren,Ae,Et,ht,lt,Pt,Wt),(N.key!=null||ht&&N===ht.subTree)&&xw(_t,N,!0)):ie(_t,N,Et,ve,ht,lt,Pt,Wt,ee)},ot=(_t,N,Et,wt,ht,lt,Pt,Wt,ee)=>{N.slotScopeIds=Wt,_t==null?N.shapeFlag&512?ht.ctx.activate(N,Et,wt,Pt,ee):Z(N,Et,wt,ht,lt,Pt,ee):Kt(_t,N,ee)},Z=(_t,N,Et,wt,ht,lt,Pt)=>{const Wt=_t.component=LS(_t,wt,ht);if(Sy(_t)&&(Wt.ctx.renderer=Se),RS(Wt),Wt.asyncDep){if(ht&&ht.registerDep(Wt,Ft,Pt),!_t.el){const ee=Wt.subTree=Jt(xs);F(null,ee,N,Et)}}else Ft(Wt,_t,N,Et,ht,lt,Pt)},Kt=(_t,N,Et)=>{const wt=N.component=_t.component;if(K4(_t,N,Et))if(wt.asyncDep&&!wt.asyncResolved){Tt(wt,N,Et);return}else wt.next=N,V4(wt.update),wt.effect.dirty=!0,wt.update();else N.el=_t.el,wt.vnode=N},Ft=(_t,N,Et,wt,ht,lt,Pt)=>{const Wt=()=>{if(_t.isMounted){let{next:ve,bu:Te,u:Ae,parent:De,vnode:un}=_t;{const Ue=mS(_t);if(Ue){ve&&(ve.el=un.el,Tt(_t,ve,Pt)),Ue.asyncDep.then(()=>{_t.isUnmounted||Wt()});return}}let gn=ve,re;gp(_t,!1),ve?(ve.el=un.el,Tt(_t,ve,Pt)):ve=un,Te&&tg(Te),(re=ve.props&&ve.props.onVnodeBeforeUpdate)&&ru(re,De,ve,un),gp(_t,!0);const ce=M1(_t),_e=_t.subTree;_t.subTree=ce,k(_e,ce,A(_e.el),fe(_e),_t,ht,lt),ve.el=ce.el,gn===null&&mw(_t,ce.el),Ae&&_s(Ae,ht),(re=ve.props&&ve.props.onVnodeUpdated)&&_s(()=>ru(re,De,ve,un),ht)}else{let ve;const{el:Te,props:Ae}=N,{bm:De,m:un,parent:gn}=_t,re=Mp(N);if(gp(_t,!1),De&&tg(De),!re&&(ve=Ae&&Ae.onVnodeBeforeMount)&&ru(ve,gn,N),gp(_t,!0),Te&&In){const ce=()=>{_t.subTree=M1(_t),In(Te,_t.subTree,_t,ht,null)};re?N.type.__asyncLoader().then(()=>!_t.isUnmounted&&ce()):ce()}else{const ce=_t.subTree=M1(_t);k(null,ce,Et,wt,_t,ht,lt),N.el=ce.el}if(un&&_s(un,ht),!re&&(ve=Ae&&Ae.onVnodeMounted)){const ce=N;_s(()=>ru(ve,gn,ce),ht)}(N.shapeFlag&256||gn&&Mp(gn.vnode)&&gn.vnode.shapeFlag&256)&&_t.a&&_s(_t.a,ht),_t.isMounted=!0,N=Et=wt=null}},ee=_t.effect=new cg(Wt,ou,()=>P_(Dt),_t.scope),Dt=_t.update=()=>{ee.dirty&&ee.run()};Dt.id=_t.uid,gp(_t,!0),Dt()},Tt=(_t,N,Et)=>{N.component=_t;const wt=_t.vnode.props;_t.vnode=N,_t.next=null,MP(_t,N.props,wt,Et),kP(_t,N.children,Et),Nd(),N2(_t),Ud()},ie=(_t,N,Et,wt,ht,lt,Pt,Wt,ee=!1)=>{const Dt=_t&&_t.children,ve=_t?_t.shapeFlag:0,Te=N.children,{patchFlag:Ae,shapeFlag:De}=N;if(Ae>0){if(Ae&128){je(Dt,Te,Et,wt,ht,lt,Pt,Wt,ee);return}else if(Ae&256){ue(Dt,Te,Et,wt,ht,lt,Pt,Wt,ee);return}}De&8?(ve&16&&qe(Dt,ht,lt),Te!==Dt&&x(Et,Te)):ve&16?De&16?je(Dt,Te,Et,wt,ht,lt,Pt,Wt,ee):qe(Dt,ht,lt,!0):(ve&8&&x(Et,""),De&16&&Y(Te,Et,wt,ht,lt,Pt,Wt,ee))},ue=(_t,N,Et,wt,ht,lt,Pt,Wt,ee)=>{_t=_t||Xm,N=N||Xm;const Dt=_t.length,ve=N.length,Te=Math.min(Dt,ve);let Ae;for(Ae=0;Ae<Te;Ae++){const De=N[Ae]=ee?vd(N[Ae]):Lu(N[Ae]);k(_t[Ae],De,Et,null,ht,lt,Pt,Wt,ee)}Dt>ve?qe(_t,ht,lt,!0,!1,Te):Y(N,Et,wt,ht,lt,Pt,Wt,ee,Te)},je=(_t,N,Et,wt,ht,lt,Pt,Wt,ee)=>{let Dt=0;const ve=N.length;let Te=_t.length-1,Ae=ve-1;for(;Dt<=Te&&Dt<=Ae;){const De=_t[Dt],un=N[Dt]=ee?vd(N[Dt]):Lu(N[Dt]);if(Kc(De,un))k(De,un,Et,null,ht,lt,Pt,Wt,ee);else break;Dt++}for(;Dt<=Te&&Dt<=Ae;){const De=_t[Te],un=N[Ae]=ee?vd(N[Ae]):Lu(N[Ae]);if(Kc(De,un))k(De,un,Et,null,ht,lt,Pt,Wt,ee);else break;Te--,Ae--}if(Dt>Te){if(Dt<=Ae){const De=Ae+1,un=De<ve?N[De].el:wt;for(;Dt<=Ae;)k(null,N[Dt]=ee?vd(N[Dt]):Lu(N[Dt]),Et,un,ht,lt,Pt,Wt,ee),Dt++}}else if(Dt>Ae)for(;Dt<=Te;)Ut(_t[Dt],ht,lt,!0),Dt++;else{const De=Dt,un=Dt,gn=new Map;for(Dt=un;Dt<=Ae;Dt++){const Gn=N[Dt]=ee?vd(N[Dt]):Lu(N[Dt]);Gn.key!=null&&gn.set(Gn.key,Dt)}let re,ce=0;const _e=Ae-un+1;let Ue=!1,en=0;const Un=new Array(_e);for(Dt=0;Dt<_e;Dt++)Un[Dt]=0;for(Dt=De;Dt<=Te;Dt++){const Gn=_t[Dt];if(ce>=_e){Ut(Gn,ht,lt,!0);continue}let zr;if(Gn.key!=null)zr=gn.get(Gn.key);else for(re=un;re<=Ae;re++)if(Un[re-un]===0&&Kc(Gn,N[re])){zr=re;break}zr===void 0?Ut(Gn,ht,lt,!0):(Un[zr-un]=Dt+1,zr>=en?en=zr:Ue=!0,k(Gn,N[zr],Et,null,ht,lt,Pt,Wt,ee),ce++)}const lr=Ue?DP(Un):Xm;for(re=lr.length-1,Dt=_e-1;Dt>=0;Dt--){const Gn=un+Dt,zr=N[Gn],ur=Gn+1<ve?N[Gn+1].el:wt;Un[Dt]===0?k(null,zr,Et,ur,ht,lt,Pt,Wt,ee):Ue&&(re<0||Dt!==lr[re]?jt(zr,Et,ur,2):re--)}}},jt=(_t,N,Et,wt,ht=null)=>{const{el:lt,type:Pt,transition:Wt,children:ee,shapeFlag:Dt}=_t;if(Dt&6){jt(_t.component.subTree,N,Et,wt);return}if(Dt&128){_t.suspense.move(N,Et,wt);return}if(Dt&64){Pt.move(_t,N,Et,Se);return}if(Pt===Mr){a(lt,N,Et);for(let Te=0;Te<ee.length;Te++)jt(ee[Te],N,Et,wt);a(_t.anchor,N,Et);return}if(Pt===Tp){B(_t,N,Et);return}if(wt!==2&&Dt&1&&Wt)if(wt===0)Wt.beforeEnter(lt),a(lt,N,Et),_s(()=>Wt.enter(lt),ht);else{const{leave:Te,delayLeave:Ae,afterLeave:De}=Wt,un=()=>a(lt,N,Et),gn=()=>{Te(lt,()=>{un(),De&&De()})};Ae?Ae(lt,un,gn):gn()}else a(lt,N,Et)},Ut=(_t,N,Et,wt=!1,ht=!1)=>{const{type:lt,props:Pt,ref:Wt,children:ee,dynamicChildren:Dt,shapeFlag:ve,patchFlag:Te,dirs:Ae,memoIndex:De}=_t;if(Wt!=null&&X1(Wt,null,Et,_t,!0),De!=null&&(N.renderCache[De]=void 0),ve&256){N.ctx.deactivate(_t);return}const un=ve&1&&Ae,gn=!Mp(_t);let re;if(gn&&(re=Pt&&Pt.onVnodeBeforeUnmount)&&ru(re,N,_t),ve&6)we(_t.component,Et,wt);else{if(ve&128){_t.suspense.unmount(Et,wt);return}un&&Eh(_t,null,N,"beforeUnmount"),ve&64?_t.type.remove(_t,N,Et,ht,Se,wt):Dt&&(lt!==Mr||Te>0&&Te&64)?qe(Dt,N,Et,!1,!0):(lt===Mr&&Te&384||!ht&&ve&16)&&qe(ee,N,Et),wt&&xe(_t)}(gn&&(re=Pt&&Pt.onVnodeUnmounted)||un)&&_s(()=>{re&&ru(re,N,_t),un&&Eh(_t,null,N,"unmounted")},Et)},xe=_t=>{const{type:N,el:Et,anchor:wt,transition:ht}=_t;if(N===Mr){Fe(Et,wt);return}if(N===Tp){U(_t);return}const lt=()=>{s(Et),ht&&!ht.persisted&&ht.afterLeave&&ht.afterLeave()};if(_t.shapeFlag&1&&ht&&!ht.persisted){const{leave:Pt,delayLeave:Wt}=ht,ee=()=>Pt(Et,lt);Wt?Wt(_t.el,lt,ee):ee()}else lt()},Fe=(_t,N)=>{let Et;for(;_t!==N;)Et=w(_t),s(_t),_t=Et;s(N)},we=(_t,N,Et)=>{const{bum:wt,scope:ht,update:lt,subTree:Pt,um:Wt,m:ee,a:Dt}=_t;Q1(ee),Q1(Dt),wt&&tg(wt),ht.stop(),lt&&(lt.active=!1,Ut(Pt,_t,N,Et)),Wt&&_s(Wt,N),_s(()=>{_t.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&_t.asyncDep&&!_t.asyncResolved&&_t.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},qe=(_t,N,Et,wt=!1,ht=!1,lt=0)=>{for(let Pt=lt;Pt<_t.length;Pt++)Ut(_t[Pt],N,Et,wt,ht)},fe=_t=>_t.shapeFlag&6?fe(_t.component.subTree):_t.shapeFlag&128?_t.suspense.next():w(_t.anchor||_t.el);let ge=!1;const ne=(_t,N,Et)=>{_t==null?N._vnode&&Ut(N._vnode,null,null,!0):k(N._vnode||null,_t,N,null,null,null,Et),ge||(ge=!0,N2(),q1(),ge=!1),N._vnode=_t},Se={p:k,um:Ut,m:jt,r:xe,mt:Z,mc:Y,pc:ie,pbc:rt,n:fe,o:t};let We,In;return e&&([We,In]=e(Se)),{render:ne,hydrate:We,createApp:IP(ne,We)}}function yx({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function gp({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function pS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function xw(t,e,n=!1){const a=t.children,s=e.children;if(hr(a)&&hr(s))for(let l=0;l<a.length;l++){const i=a[l];let f=s[l];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=s[l]=vd(s[l]),f.el=i.el),!n&&f.patchFlag!==-2&&xw(i,f)),f.type===kp&&(f.el=i.el)}}function DP(t){const e=t.slice(),n=[0];let a,s,l,i,f;const m=t.length;for(a=0;a<m;a++){const y=t[a];if(y!==0){if(s=n[n.length-1],t[s]<y){e[a]=s,n.push(a);continue}for(l=0,i=n.length-1;l<i;)f=l+i>>1,t[n[f]]<y?l=f+1:i=f;y<t[n[l]]&&(l>0&&(e[a]=n[l-1]),n[l]=a)}}for(l=n.length,i=n[l-1];l-- >0;)n[l]=i,i=e[i];return n}function mS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:mS(e)}function Q1(t){if(t)for(let e=0;e<t.length;e++)t[e].active=!1}const gS=Symbol.for("v-scx"),vS=()=>As(gS);function yS(t,e){return Ey(t,null,e)}function _S(t,e){return Ey(t,null,{flush:"post"})}function bS(t,e){return Ey(t,null,{flush:"sync"})}const h1={};function Wa(t,e,n){return Ey(t,e,n)}function Ey(t,e,{immediate:n,deep:a,flush:s,once:l,onTrack:i,onTrigger:f}=po){if(e&&l){const q=e;e=(...tt)=>{q(...tt),$()}}const m=os,y=q=>a===!0?q:xd(q,a===!1?1:void 0);let x,A=!1,w=!1;if(Jo(t)?(x=()=>t.value,A=ny(t)):eg(t)?(x=()=>y(t),A=!0):hr(t)?(w=!0,A=t.some(q=>eg(q)||ny(q)),x=()=>t.map(q=>{if(Jo(q))return q.value;if(eg(q))return y(q);if(Nr(q))return xf(q,m,2)})):Nr(t)?e?x=()=>xf(t,m,2):x=()=>(E&&E(),Ru(t,m,3,[L])):x=ou,e&&a){const q=x;x=()=>xd(q())}let E,L=q=>{E=B.onStop=()=>{xf(q,m,4),E=B.onStop=void 0}},k;if(My)if(L=ou,e?n&&Ru(e,m,3,[x(),w?[]:void 0,L]):x(),s==="sync"){const q=vS();k=q.__watcherHandles||(q.__watcherHandles=[])}else return ou;let z=w?new Array(t.length).fill(h1):h1;const F=()=>{if(!(!B.active||!B.dirty))if(e){const q=B.run();(a||A||(w?q.some((tt,Y)=>Xc(tt,z[Y])):Xc(q,z)))&&(E&&E(),Ru(e,m,3,[q,z===h1?void 0:w&&z[0]===h1?[]:z,L]),z=q)}else B.run()};F.allowRecurse=!!e;let D;s==="sync"?D=F:s==="post"?D=()=>_s(F,m&&m.suspense):(F.pre=!0,m&&(F.id=m.uid),D=()=>P_(F));const B=new cg(x,ou,D),U=ow(),$=()=>{B.stop(),U&&ew(U.effects,B)};return e?n?F():z=B.run():s==="post"?_s(B.run.bind(B),m&&m.suspense):B.run(),k&&k.push($),$}function zP(t,e,n){const a=this.proxy,s=Qo(t)?t.includes(".")?xS(a,t):()=>a[t]:t.bind(a,a);let l;Nr(e)?l=e:(l=e.handler,n=e);const i=Op(this),f=Ey(s,l.bind(a),n);return i(),f}function xS(t,e){const n=e.split(".");return()=>{let a=t;for(let s=0;s<n.length&&a;s++)a=a[n[s]];return a}}function xd(t,e=1/0,n){if(e<=0||!_o(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Jo(t))xd(t.value,e,n);else if(hr(t))for(let a=0;a<t.length;a++)xd(t[a],e,n);else if(zp(t)||Qm(t))t.forEach(a=>{xd(a,e,n)});else if(pE(t)){for(const a in t)xd(t[a],e,n);for(const a of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,a)&&xd(t[a],e,n)}return t}const Sy=t=>t.type.__isKeepAlive,BP={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Bu(),a=n.ctx;if(!a.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const s=new Map,l=new Set;let i=null;const f=n.suspense,{renderer:{p:m,m:y,um:x,o:{createElement:A}}}=a,w=A("div");a.activate=(D,B,U,$,q)=>{const tt=D.component;y(D,B,U,0,f),m(tt.vnode,D,B,U,tt,f,$,D.slotScopeIds,q),_s(()=>{tt.isDeactivated=!1,tt.a&&tg(tt.a);const Y=D.props&&D.props.onVnodeMounted;Y&&ru(Y,tt.parent,D)},f)},a.deactivate=D=>{const B=D.component;Q1(B.m),Q1(B.a),y(D,w,null,1,f),_s(()=>{B.da&&tg(B.da);const U=D.props&&D.props.onVnodeUnmounted;U&&ru(U,B.parent,D),B.isDeactivated=!0},f)};function E(D){_x(D),x(D,n,f,!0)}function L(D){s.forEach((B,U)=>{const $=EA(B.type);$&&(!D||!D($))&&k(U)})}function k(D){const B=s.get(D);!i||!Kc(B,i)?E(B):i&&_x(i),s.delete(D),l.delete(D)}Wa(()=>[t.include,t.exclude],([D,B])=>{D&&L(U=>Sv(D,U)),B&&L(U=>!Sv(B,U))},{flush:"post",deep:!0});let z=null;const F=()=>{z!=null&&(fA(n.subTree.type)?_s(()=>{s.set(z,f1(n.subTree))},n.subTree.suspense):s.set(z,f1(n.subTree)))};return $a(F),R_(F),Iy(()=>{s.forEach(D=>{const{subTree:B,suspense:U}=n,$=f1(B);if(D.type===$.type&&D.key===$.key){_x($);const q=$.component.da;q&&_s(q,U);return}E(D)})}),()=>{if(z=null,!e.default)return null;const D=e.default(),B=D[0];if(D.length>1)return i=null,D;if(!kd(B)||!(B.shapeFlag&4)&&!(B.shapeFlag&128))return i=null,B;let U=f1(B);const $=U.type,q=EA(Mp(U)?U.type.__asyncResolved||{}:$),{include:tt,exclude:Y,max:G}=t;if(tt&&(!q||!Sv(tt,q))||Y&&q&&Sv(Y,q))return i=U,B;const rt=U.key==null?$:U.key,pt=s.get(rt);return U.el&&(U=Lh(U),B.shapeFlag&128&&(B.ssContent=U)),z=rt,pt?(U.el=pt.el,U.component=pt.component,U.transition&&Pd(U,U.transition),U.shapeFlag|=512,l.delete(rt),l.add(rt)):(l.add(rt),G&&l.size>parseInt(G,10)&&k(l.values().next().value)),U.shapeFlag|=256,i=U,fA(B.type)?B:U}}},FP=BP;function Sv(t,e){return hr(t)?t.some(n=>Sv(n,e)):Qo(t)?t.split(",").includes(e):V5(t)?t.test(e):!1}function AS(t,e){CS(t,"a",e)}function wS(t,e){CS(t,"da",e)}function CS(t,e,n=os){const a=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(O_(e,a,n),n){let s=n.parent;for(;s&&s.parent;)Sy(s.parent.vnode)&&NP(a,e,n,s),s=s.parent}}function NP(t,e,n,a){const s=O_(e,t,a,!0);Pf(()=>{ew(a[e],s)},n)}function _x(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function f1(t){return t.shapeFlag&128?t.ssContent:t}const gd=Symbol("_leaveCb"),d1=Symbol("_enterCb");function Aw(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return $a(()=>{t.isMounted=!0}),Iy(()=>{t.isUnmounting=!0}),t}const fc=[Function,Array],ww={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:fc,onEnter:fc,onAfterEnter:fc,onEnterCancelled:fc,onBeforeLeave:fc,onLeave:fc,onAfterLeave:fc,onLeaveCancelled:fc,onBeforeAppear:fc,onAppear:fc,onAfterAppear:fc,onAppearCancelled:fc},IS=t=>{const e=t.subTree;return e.component?IS(e.component):e},UP={name:"BaseTransition",props:ww,setup(t,{slots:e}){const n=Bu(),a=Aw();return()=>{const s=e.default&&D_(e.default(),!0);if(!s||!s.length)return;let l=s[0];if(s.length>1){for(const w of s)if(w.type!==xs){l=w;break}}const i=Ri(t),{mode:f}=i;if(a.isLeaving)return bx(l);const m=X2(l);if(!m)return bx(l);let y=fg(m,i,a,n,w=>y=w);Pd(m,y);const x=n.subTree,A=x&&X2(x);if(A&&A.type!==xs&&!Kc(m,A)&&IS(n).type!==xs){const w=fg(A,i,a,n);if(Pd(A,w),f==="out-in"&&m.type!==xs)return a.isLeaving=!0,w.afterLeave=()=>{a.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},bx(l);f==="in-out"&&m.type!==xs&&(w.delayLeave=(E,L,k)=>{const z=SS(a,A);z[String(A.key)]=A,E[gd]=()=>{L(),E[gd]=void 0,delete y.delayedLeave},y.delayedLeave=k})}return l}}},ES=UP;function SS(t,e){const{leavingVNodes:n}=t;let a=n.get(e.type);return a||(a=Object.create(null),n.set(e.type,a)),a}function fg(t,e,n,a,s){const{appear:l,mode:i,persisted:f=!1,onBeforeEnter:m,onEnter:y,onAfterEnter:x,onEnterCancelled:A,onBeforeLeave:w,onLeave:E,onAfterLeave:L,onLeaveCancelled:k,onBeforeAppear:z,onAppear:F,onAfterAppear:D,onAppearCancelled:B}=e,U=String(t.key),$=SS(n,t),q=(G,rt)=>{G&&Ru(G,a,9,rt)},tt=(G,rt)=>{const pt=rt[1];q(G,rt),hr(G)?G.every(Q=>Q.length<=1)&&pt():G.length<=1&&pt()},Y={mode:i,persisted:f,beforeEnter(G){let rt=m;if(!n.isMounted)if(l)rt=z||m;else return;G[gd]&&G[gd](!0);const pt=$[U];pt&&Kc(t,pt)&&pt.el[gd]&&pt.el[gd](),q(rt,[G])},enter(G){let rt=y,pt=x,Q=A;if(!n.isMounted)if(l)rt=F||y,pt=D||x,Q=B||A;else return;let ot=!1;const Z=G[d1]=Kt=>{ot||(ot=!0,Kt?q(Q,[G]):q(pt,[G]),Y.delayedLeave&&Y.delayedLeave(),G[d1]=void 0)};rt?tt(rt,[G,Z]):Z()},leave(G,rt){const pt=String(t.key);if(G[d1]&&G[d1](!0),n.isUnmounting)return rt();q(w,[G]);let Q=!1;const ot=G[gd]=Z=>{Q||(Q=!0,rt(),Z?q(k,[G]):q(L,[G]),G[gd]=void 0,$[pt]===t&&delete $[pt])};$[pt]=t,E?tt(E,[G,ot]):ot()},clone(G){const rt=fg(G,e,n,a,s);return s&&s(rt),rt}};return Y}function bx(t){if(Sy(t))return t=Lh(t),t.children=null,t}function X2(t){if(!Sy(t))return t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Nr(n.default))return n.default()}}function Pd(t,e){t.shapeFlag&6&&t.component?Pd(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function D_(t,e=!1,n){let a=[],s=0;for(let l=0;l<t.length;l++){let i=t[l];const f=n==null?i.key:String(n)+String(i.key!=null?i.key:l);i.type===Mr?(i.patchFlag&128&&s++,a=a.concat(D_(i.children,e,f))):(e||i.type!==xs)&&a.push(f!=null?Lh(i,{key:f}):i)}if(s>1)for(let l=0;l<a.length;l++)a[l].patchFlag=-2;return a}const VP=t=>t.__isTeleport,Bv=t=>t&&(t.disabled||t.disabled===""),Q2=t=>typeof SVGElement<"u"&&t instanceof SVGElement,J2=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,_A=(t,e)=>{const n=t&&t.to;return Qo(n)?e?e(n):null:n},jP={name:"Teleport",__isTeleport:!0,process(t,e,n,a,s,l,i,f,m,y){const{mc:x,pc:A,pbc:w,o:{insert:E,querySelector:L,createText:k,createComment:z}}=y,F=Bv(e.props);let{shapeFlag:D,children:B,dynamicChildren:U}=e;if(t==null){const $=e.el=k(""),q=e.anchor=k("");E($,n,a),E(q,n,a);const tt=e.target=_A(e.props,L),Y=e.targetAnchor=k("");tt&&(E(Y,tt),i==="svg"||Q2(tt)?i="svg":(i==="mathml"||J2(tt))&&(i="mathml"));const G=(rt,pt)=>{D&16&&x(B,rt,pt,s,l,i,f,m)};F?G(n,q):tt&&G(tt,Y)}else{e.el=t.el;const $=e.anchor=t.anchor,q=e.target=t.target,tt=e.targetAnchor=t.targetAnchor,Y=Bv(t.props),G=Y?n:q,rt=Y?$:tt;if(i==="svg"||Q2(q)?i="svg":(i==="mathml"||J2(q))&&(i="mathml"),U?(w(t.dynamicChildren,U,G,s,l,i,f),xw(t,e,!0)):m||A(t,e,G,rt,s,l,i,f,!1),F)Y?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):p1(e,n,$,y,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const pt=e.target=_A(e.props,L);pt&&p1(e,pt,null,y,0)}else Y&&p1(e,q,tt,y,1)}MS(e)},remove(t,e,n,a,{um:s,o:{remove:l}},i){const{shapeFlag:f,children:m,anchor:y,targetAnchor:x,target:A,props:w}=t;if(A&&l(x),i&&l(y),f&16){const E=i||!Bv(w);for(let L=0;L<m.length;L++){const k=m[L];s(k,e,n,E,!!k.dynamicChildren)}}},move:p1,hydrate:HP};function p1(t,e,n,{o:{insert:a},m:s},l=2){l===0&&a(t.targetAnchor,e,n);const{el:i,anchor:f,shapeFlag:m,children:y,props:x}=t,A=l===2;if(A&&a(i,e,n),(!A||Bv(x))&&m&16)for(let w=0;w<y.length;w++)s(y[w],e,n,2);A&&a(f,e,n)}function HP(t,e,n,a,s,l,{o:{nextSibling:i,parentNode:f,querySelector:m}},y){const x=e.target=_A(e.props,m);if(x){const A=x._lpa||x.firstChild;if(e.shapeFlag&16)if(Bv(e.props))e.anchor=y(i(t),e,f(t),n,a,s,l),e.targetAnchor=A;else{e.anchor=i(t);let w=A;for(;w;)if(w=i(w),w&&w.nodeType===8&&w.data==="teleport anchor"){e.targetAnchor=w,x._lpa=e.targetAnchor&&i(e.targetAnchor);break}y(A,e,x,n,a,s,l)}MS(e)}return e.anchor&&i(e.anchor)}const bA=jP;function MS(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Mr=Symbol.for("v-fgt"),kp=Symbol.for("v-txt"),xs=Symbol.for("v-cmt"),Tp=Symbol.for("v-stc"),Fv=[];let au=null;function Ct(t=!1){Fv.push(au=t?null:[])}function TS(){Fv.pop(),au=Fv[Fv.length-1]||null}let Lp=1;function xA(t){Lp+=t}function PS(t){return t.dynamicChildren=Lp>0?au||Xm:null,TS(),Lp>0&&au&&au.push(t),t}function le(t,e,n,a,s,l){return PS(kt(t,e,n,a,s,l,!0))}function $e(t,e,n,a,s){return PS(Jt(t,e,n,a,s,!0))}function kd(t){return t?t.__v_isVNode===!0:!1}function Kc(t,e){return t.type===e.type&&t.key===e.key}function GP(t){}const kS=({key:t})=>t??null,T1=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Qo(t)||Jo(t)||Nr(t)?{i:as,r:t,k:e,f:!!n}:t:null);function kt(t,e=null,n=null,a=0,s=null,l=t===Mr?0:1,i=!1,f=!1){const m={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&kS(e),ref:e&&T1(e),scopeId:L_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:a,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:as};return f?(Cw(m,n),l&128&&t.normalize(m)):n&&(m.shapeFlag|=Qo(n)?8:16),Lp>0&&!i&&au&&(m.patchFlag>0||l&6)&&m.patchFlag!==32&&au.push(m),m}const Jt=WP;function WP(t,e=null,n=null,a=0,s=null,l=!1){if((!t||t===GE)&&(t=xs),kd(t)){const f=Lh(t,e,!0);return n&&Cw(f,n),Lp>0&&!l&&au&&(f.shapeFlag&6?au[au.indexOf(t)]=f:au.push(f)),f.patchFlag=-2,f}if(QP(t)&&(t=t.__vccOpts),e){e=ka(e);let{class:f,style:m}=e;f&&!Qo(f)&&(e.class=mo(f)),_o(m)&&(cw(m)&&!hr(m)&&(m=Ho({},m)),e.style=Ni(m))}const i=Qo(t)?1:fA(t)?128:VP(t)?64:_o(t)?4:Nr(t)?2:0;return kt(t,e,n,a,s,i,l,!0)}function ka(t){return t?cw(t)||oS(t)?Ho({},t):t:null}function Lh(t,e,n=!1,a=!1){const{props:s,ref:l,patchFlag:i,children:f,transition:m}=t,y=e?li(s||{},e):s,x={__v_isVNode:!0,__v_skip:!0,type:t.type,props:y,key:y&&kS(y),ref:e&&e.ref?n&&l?hr(l)?l.concat(T1(e)):[l,T1(e)]:T1(e):l,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:f,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Mr?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:m,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Lh(t.ssContent),ssFallback:t.ssFallback&&Lh(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return m&&a&&Pd(x,m.clone(x)),x}function _a(t=" ",e=0){return Jt(kp,null,t,e)}function z_(t,e){const n=Jt(Tp,null,t);return n.staticCount=e,n}function mn(t="",e=!1){return e?(Ct(),$e(xs,null,t)):Jt(xs,null,t)}function Lu(t){return t==null||typeof t=="boolean"?Jt(xs):hr(t)?Jt(Mr,null,t.slice()):typeof t=="object"?vd(t):Jt(kp,null,String(t))}function vd(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Lh(t)}function Cw(t,e){let n=0;const{shapeFlag:a}=t;if(e==null)e=null;else if(hr(e))n=16;else if(typeof e=="object")if(a&65){const s=e.default;s&&(s._c&&(s._d=!1),Cw(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!oS(e)?e._ctx=as:s===3&&as&&(as.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Nr(e)?(e={default:e,_ctx:as},n=32):(e=String(e),a&64?(n=16,e=[_a(e)]):n=8);t.children=e,t.shapeFlag|=n}function li(...t){const e={};for(let n=0;n<t.length;n++){const a=t[n];for(const s in a)if(s==="class")e.class!==a.class&&(e.class=mo([e.class,a.class]));else if(s==="style")e.style=Ni([e.style,a.style]);else if(xy(s)){const l=e[s],i=a[s];i&&l!==i&&!(hr(l)&&l.includes(i))&&(e[s]=l?[].concat(l,i):i)}else s!==""&&(e[s]=a[s])}return e}function ru(t,e,n,a=null){Ru(t,e,7,[n,a])}const ZP=nS();let $P=0;function LS(t,e,n){const a=t.type,s=(e?e.appContext:t.appContext)||ZP,l={uid:$P++,vnode:t,type:a,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new iw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sS(a,s),emitsOptions:HE(a,s),emit:null,emitted:null,propsDefaults:po,inheritAttrs:a.inheritAttrs,ctx:po,data:po,props:po,attrs:po,slots:po,refs:po,setupState:po,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=H4.bind(null,l),t.ce&&t.ce(l),l}let os=null;const Bu=()=>os||as;let J1,AA;{const t=gE(),e=(n,a)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(a),l=>{s.length>1?s.forEach(i=>i(l)):s[0](l)}};J1=e("__VUE_INSTANCE_SETTERS__",n=>os=n),AA=e("__VUE_SSR_SETTERS__",n=>My=n)}const Op=t=>{const e=os;return J1(t),t.scope.on(),()=>{t.scope.off(),J1(e)}},wA=()=>{os&&os.scope.off(),J1(null)};function OS(t){return t.vnode.shapeFlag&4}let My=!1;function RS(t,e=!1){e&&AA(e);const{props:n,children:a}=t.vnode,s=OS(t);SP(t,n,s,e),PP(t,a);const l=s?KP(t,e):void 0;return e&&AA(!1),l}function KP(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,mA);const{setup:a}=n;if(a){const s=t.setupContext=a.length>1?zS(t):null,l=Op(t);Nd();const i=xf(a,t,0,[t.props,s]);if(Ud(),l(),nw(i)){if(i.then(wA,wA),e)return i.then(f=>{CA(t,f,e)}).catch(f=>{Bp(f,t,0)});t.asyncDep=i}else CA(t,i,e)}else DS(t,e)}function CA(t,e,n){Nr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:_o(e)&&(t.setupState=dw(e)),DS(t,n)}let t_,IA;function qP(t){t_=t,IA=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,sP))}}const YP=()=>!t_;function DS(t,e,n){const a=t.type;if(!t.render){if(!e&&t_&&!a.render){const s=a.template||_w(t).template;if(s){const{isCustomElement:l,compilerOptions:i}=t.appContext.config,{delimiters:f,compilerOptions:m}=a,y=Ho(Ho({isCustomElement:l,delimiters:f},i),m);a.render=t_(s,y)}}t.render=a.render||ou,IA&&IA(t)}{const s=Op(t);Nd();try{_P(t)}finally{Ud(),s()}}}const XP={get(t,e){return su(t,"get",""),t[e]}};function zS(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,XP),slots:t.slots,emit:t.emit,expose:e}}function Ty(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(dw(RE(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in zv)return zv[n](t)},has(e,n){return n in e||n in zv}})):t.proxy}function EA(t,e=!0){return Nr(t)?t.displayName||t.name:t.name||e&&t.__name}function QP(t){return Nr(t)&&"__vccOpts"in t}const hn=(t,e)=>C4(t,e,My);function ll(t,e,n=po){const a=Bu(),s=Tl(e),l=Ou(e),i=BE((m,y)=>{let x;return bS(()=>{const A=t[e];Xc(x,A)&&(x=A,y())}),{get(){return m(),n.get?n.get(x):x},set(A){const w=a.vnode.props;!(w&&(e in w||s in w||l in w)&&(`onUpdate:${e}`in w||`onUpdate:${s}`in w||`onUpdate:${l}`in w))&&Xc(A,x)&&(x=A,y()),a.emit(`update:${e}`,n.set?n.set(A):A)}}}),f=e==="modelValue"?"modelModifiers":`${e}Modifiers`;return i[Symbol.iterator]=()=>{let m=0;return{next(){return m<2?{value:m++?t[f]||{}:i,done:!1}:{done:!0}}}},i}function Ld(t,e,n){const a=arguments.length;return a===2?_o(e)&&!hr(e)?kd(e)?Jt(t,null,[e]):Jt(t,e):Jt(t,null,e):(a>3?n=Array.prototype.slice.call(arguments,2):a===3&&kd(n)&&(n=[n]),Jt(t,e,n))}function JP(){}function tk(t,e,n,a){const s=n[a];if(s&&BS(s,t))return s;const l=e();return l.memo=t.slice(),l.memoIndex=a,n[a]=l}function BS(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let a=0;a<n.length;a++)if(Xc(n[a],e[a]))return!1;return Lp>0&&au&&au.push(t),!0}const FS="3.4.29",ek=ou,nk=F4,rk=jm,ik=jE,ok={createComponentInstance:LS,setupComponent:RS,renderComponentRoot:M1,setCurrentRenderingInstance:ay,isVNode:kd,normalizeVNode:Lu,getComponentPublicInstance:Ty},ak=ok,sk=null,lk=null,uk=null;/**
* @vue/runtime-dom v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ck="http://www.w3.org/2000/svg",hk="http://www.w3.org/1998/Math/MathML",gf=typeof document<"u"?document:null,tC=gf&&gf.createElement("template"),fk={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,a)=>{const s=e==="svg"?gf.createElementNS(ck,t):e==="mathml"?gf.createElementNS(hk,t):n?gf.createElement(t,{is:n}):gf.createElement(t);return t==="select"&&a&&a.multiple!=null&&s.setAttribute("multiple",a.multiple),s},createText:t=>gf.createTextNode(t),createComment:t=>gf.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>gf.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,a,s,l){const i=n?n.previousSibling:e.lastChild;if(s&&(s===l||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===l||!(s=s.nextSibling)););else{tC.innerHTML=a==="svg"?`<svg>${t}</svg>`:a==="mathml"?`<math>${t}</math>`:t;const f=tC.content;if(a==="svg"||a==="mathml"){const m=f.firstChild;for(;m.firstChild;)f.appendChild(m.firstChild);f.removeChild(m)}e.insertBefore(f,n)}return[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},fd="transition",gv="animation",dg=Symbol("_vtc"),B_=(t,{slots:e})=>Ld(ES,US(t),e);B_.displayName="Transition";const NS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},dk=B_.props=Ho({},ww,NS),vp=(t,e=[])=>{hr(t)?t.forEach(n=>n(...e)):t&&t(...e)},eC=t=>t?hr(t)?t.some(e=>e.length>1):t.length>1:!1;function US(t){const e={};for(const Q in t)Q in NS||(e[Q]=t[Q]);if(t.css===!1)return e;const{name:n="v",type:a,duration:s,enterFromClass:l=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:f=`${n}-enter-to`,appearFromClass:m=l,appearActiveClass:y=i,appearToClass:x=f,leaveFromClass:A=`${n}-leave-from`,leaveActiveClass:w=`${n}-leave-active`,leaveToClass:E=`${n}-leave-to`}=t,L=pk(s),k=L&&L[0],z=L&&L[1],{onBeforeEnter:F,onEnter:D,onEnterCancelled:B,onLeave:U,onLeaveCancelled:$,onBeforeAppear:q=F,onAppear:tt=D,onAppearCancelled:Y=B}=e,G=(Q,ot,Z)=>{pd(Q,ot?x:f),pd(Q,ot?y:i),Z&&Z()},rt=(Q,ot)=>{Q._isLeaving=!1,pd(Q,A),pd(Q,E),pd(Q,w),ot&&ot()},pt=Q=>(ot,Z)=>{const Kt=Q?tt:D,Ft=()=>G(ot,Q,Z);vp(Kt,[ot,Ft]),nC(()=>{pd(ot,Q?m:l),mf(ot,Q?x:f),eC(Kt)||rC(ot,a,k,Ft)})};return Ho(e,{onBeforeEnter(Q){vp(F,[Q]),mf(Q,l),mf(Q,i)},onBeforeAppear(Q){vp(q,[Q]),mf(Q,m),mf(Q,y)},onEnter:pt(!1),onAppear:pt(!0),onLeave(Q,ot){Q._isLeaving=!0;const Z=()=>rt(Q,ot);mf(Q,A),mf(Q,w),jS(),nC(()=>{Q._isLeaving&&(pd(Q,A),mf(Q,E),eC(U)||rC(Q,a,z,Z))}),vp(U,[Q,Z])},onEnterCancelled(Q){G(Q,!1),vp(B,[Q])},onAppearCancelled(Q){G(Q,!0),vp(Y,[Q])},onLeaveCancelled(Q){rt(Q),vp($,[Q])}})}function pk(t){if(t==null)return null;if(_o(t))return[xx(t.enter),xx(t.leave)];{const e=xx(t);return[e,e]}}function xx(t){return Z1(t)}function mf(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[dg]||(t[dg]=new Set)).add(e)}function pd(t,e){e.split(/\s+/).forEach(a=>a&&t.classList.remove(a));const n=t[dg];n&&(n.delete(e),n.size||(t[dg]=void 0))}function nC(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let mk=0;function rC(t,e,n,a){const s=t._endId=++mk,l=()=>{s===t._endId&&a()};if(n)return setTimeout(l,n);const{type:i,timeout:f,propCount:m}=VS(t,e);if(!i)return a();const y=i+"end";let x=0;const A=()=>{t.removeEventListener(y,w),l()},w=E=>{E.target===t&&++x>=m&&A()};setTimeout(()=>{x<m&&A()},f+1),t.addEventListener(y,w)}function VS(t,e){const n=window.getComputedStyle(t),a=L=>(n[L]||"").split(", "),s=a(`${fd}Delay`),l=a(`${fd}Duration`),i=iC(s,l),f=a(`${gv}Delay`),m=a(`${gv}Duration`),y=iC(f,m);let x=null,A=0,w=0;e===fd?i>0&&(x=fd,A=i,w=l.length):e===gv?y>0&&(x=gv,A=y,w=m.length):(A=Math.max(i,y),x=A>0?i>y?fd:gv:null,w=x?x===fd?l.length:m.length:0);const E=x===fd&&/\b(transform|all)(,|$)/.test(a(`${fd}Property`).toString());return{type:x,timeout:A,propCount:w,hasTransform:E}}function iC(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,a)=>oC(n)+oC(t[a])))}function oC(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function jS(){return document.body.offsetHeight}function gk(t,e,n){const a=t[dg];a&&(e=(e?[e,...a]:[...a]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const e_=Symbol("_vod"),HS=Symbol("_vsh"),F_={beforeMount(t,{value:e},{transition:n}){t[e_]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):vv(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:a}){!e!=!n&&(a?e?(a.beforeEnter(t),vv(t,!0),a.enter(t)):a.leave(t,()=>{vv(t,!1)}):vv(t,e))},beforeUnmount(t,{value:e}){vv(t,e)}};function vv(t,e){t.style.display=e?t[e_]:"none",t[HS]=!e}function vk(){F_.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const GS=Symbol("");function yk(t){const e=Bu();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(l=>MA(l,s))},a=()=>{const s=t(e.proxy);SA(e.subTree,s),n(s)};$a(()=>{_S(a);const s=new MutationObserver(a);s.observe(e.subTree.el.parentNode,{childList:!0}),Pf(()=>s.disconnect())})}function SA(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{SA(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)MA(t.el,e);else if(t.type===Mr)t.children.forEach(n=>SA(n,e));else if(t.type===Tp){let{el:n,anchor:a}=t;for(;n&&(MA(n,e),n!==a);)n=n.nextSibling}}function MA(t,e){if(t.nodeType===1){const n=t.style;let a="";for(const s in e)n.setProperty(`--${s}`,e[s]),a+=`--${s}: ${e[s]};`;n[GS]=a}}const _k=/(^|;)\s*display\s*:/;function bk(t,e,n){const a=t.style,s=Qo(n);let l=!1;if(n&&!s){if(e)if(Qo(e))for(const i of e.split(";")){const f=i.slice(0,i.indexOf(":")).trim();n[f]==null&&P1(a,f,"")}else for(const i in e)n[i]==null&&P1(a,i,"");for(const i in n)i==="display"&&(l=!0),P1(a,i,n[i])}else if(s){if(e!==n){const i=a[GS];i&&(n+=";"+i),a.cssText=n,l=_k.test(n)}}else e&&t.removeAttribute("style");e_ in t&&(t[e_]=l?a.display:"",t[HS]&&(a.display="none"))}const aC=/\s*!important$/;function P1(t,e,n){if(hr(n))n.forEach(a=>P1(t,e,a));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const a=xk(t,e);aC.test(n)?t.setProperty(Ou(a),n.replace(aC,""),"important"):t[a]=n}}const sC=["Webkit","Moz","ms"],Ax={};function xk(t,e){const n=Ax[e];if(n)return n;let a=Tl(e);if(a!=="filter"&&a in t)return Ax[e]=a;a=Ay(a);for(let s=0;s<sC.length;s++){const l=sC[s]+a;if(l in t)return Ax[e]=l}return e}const lC="http://www.w3.org/1999/xlink";function uC(t,e,n,a,s,l=Q5(e)){a&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(lC,e.slice(6,e.length)):t.setAttributeNS(lC,e,n):n==null||l&&!vE(n)?t.removeAttribute(e):t.setAttribute(e,l?"":String(n))}function Ak(t,e,n,a,s,l,i){if(e==="innerHTML"||e==="textContent"){a&&i(a,s,l),t[e]=n??"";return}const f=t.tagName;if(e==="value"&&f!=="PROGRESS"&&!f.includes("-")){const y=f==="OPTION"?t.getAttribute("value")||"":t.value,x=n==null?"":String(n);(y!==x||!("_value"in t))&&(t.value=x),n==null&&t.removeAttribute(e),t._value=n;return}let m=!1;if(n===""||n==null){const y=typeof t[e];y==="boolean"?n=vE(n):n==null&&y==="string"?(n="",m=!0):y==="number"&&(n=0,m=!0)}try{t[e]=n}catch{}m&&t.removeAttribute(e)}function vf(t,e,n,a){t.addEventListener(e,n,a)}function wk(t,e,n,a){t.removeEventListener(e,n,a)}const cC=Symbol("_vei");function Ck(t,e,n,a,s=null){const l=t[cC]||(t[cC]={}),i=l[e];if(a&&i)i.value=a;else{const[f,m]=Ik(e);if(a){const y=l[e]=Mk(a,s);vf(t,f,y,m)}else i&&(wk(t,f,i,m),l[e]=void 0)}}const hC=/(?:Once|Passive|Capture)$/;function Ik(t){let e;if(hC.test(t)){e={};let a;for(;a=t.match(hC);)t=t.slice(0,t.length-a[0].length),e[a[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ou(t.slice(2)),e]}let wx=0;const Ek=Promise.resolve(),Sk=()=>wx||(Ek.then(()=>wx=0),wx=Date.now());function Mk(t,e){const n=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=n.attached)return;Ru(Tk(a,n.value),e,5,[a])};return n.value=t,n.attached=Sk(),n}function Tk(t,e){if(hr(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(a=>s=>!s._stopped&&a&&a(s))}else return e}const fC=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Pk=(t,e,n,a,s,l,i,f,m)=>{const y=s==="svg";e==="class"?gk(t,a,y):e==="style"?bk(t,n,a):xy(e)?tw(e)||Ck(t,e,n,a,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):kk(t,e,a,y))?(Ak(t,e,a,l,i,f,m),(e==="value"||e==="checked"||e==="selected")&&uC(t,e,a,y,i,e!=="value")):(e==="true-value"?t._trueValue=a:e==="false-value"&&(t._falseValue=a),uC(t,e,a,y))};function kk(t,e,n,a){if(a)return!!(e==="innerHTML"||e==="textContent"||e in t&&fC(e)&&Nr(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return fC(e)&&Qo(n)?!1:e in t}/*! #__NO_SIDE_EFFECTS__ */function WS(t,e,n){const a=_r(t,e);class s extends N_{constructor(i){super(a,i,n)}}return s.def=a,s}/*! #__NO_SIDE_EFFECTS__ */const Lk=(t,e)=>WS(t,e,tM),Ok=typeof HTMLElement<"u"?HTMLElement:class{};class N_ extends Ok{constructor(e,n={},a){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&a?a(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,lu(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),TA(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let a=0;a<this.attributes.length;a++)this._setAttr(this.attributes[a].name);this._ob=new MutationObserver(a=>{for(const s of a)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(a,s=!1)=>{const{props:l,styles:i}=a;let f;if(l&&!hr(l))for(const m in l){const y=l[m];(y===Number||y&&y.type===Number)&&(m in this._props&&(this._props[m]=Z1(this._props[m])),(f||(f=Object.create(null)))[Tl(m)]=!0)}this._numberProps=f,s&&this._resolveProps(a),this._applyStyles(i),this._update()},n=this._def.__asyncLoader;n?n().then(a=>e(a,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,a=hr(n)?n:Object.keys(n||{});for(const s of Object.keys(this))s[0]!=="_"&&a.includes(s)&&this._setProp(s,this[s],!0,!1);for(const s of a.map(Tl))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(l){this._setProp(s,l)}})}_setAttr(e){let n=this.hasAttribute(e)?this.getAttribute(e):void 0;const a=Tl(e);this._numberProps&&this._numberProps[a]&&(n=Z1(n)),this._setProp(a,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,a=!0,s=!0){n!==this._props[e]&&(this._props[e]=n,s&&this._instance&&this._update(),a&&(n===!0?this.setAttribute(Ou(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Ou(e),n+""):n||this.removeAttribute(Ou(e))))}_update(){TA(this._createVNode(),this.shadowRoot)}_createVNode(){const e=Jt(this._def,Ho({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const a=(l,i)=>{this.dispatchEvent(new CustomEvent(l,{detail:i}))};n.emit=(l,...i)=>{a(l,i),Ou(l)!==l&&a(Ou(l),i)};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof N_){n.parent=s._instance,n.provides=s._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const a=document.createElement("style");a.textContent=n,this.shadowRoot.appendChild(a)})}}function Rk(t="$style"){{const e=Bu();if(!e)return po;const n=e.type.__cssModules;if(!n)return po;const a=n[t];return a||po}}const ZS=new WeakMap,$S=new WeakMap,n_=Symbol("_moveCb"),dC=Symbol("_enterCb"),KS={name:"TransitionGroup",props:Ho({},dk,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Bu(),a=Aw();let s,l;return R_(()=>{if(!s.length)return;const i=t.moveClass||`${t.name||"v"}-move`;if(!Uk(s[0].el,n.vnode.el,i))return;s.forEach(Bk),s.forEach(Fk);const f=s.filter(Nk);jS(),f.forEach(m=>{const y=m.el,x=y.style;mf(y,i),x.transform=x.webkitTransform=x.transitionDuration="";const A=y[n_]=w=>{w&&w.target!==y||(!w||/transform$/.test(w.propertyName))&&(y.removeEventListener("transitionend",A),y[n_]=null,pd(y,i))};y.addEventListener("transitionend",A)})}),()=>{const i=Ri(t),f=US(i);let m=i.tag||Mr;if(s=[],l)for(let y=0;y<l.length;y++){const x=l[y];x.el&&x.el instanceof Element&&(s.push(x),Pd(x,fg(x,f,a,n)),ZS.set(x,x.el.getBoundingClientRect()))}l=e.default?D_(e.default()):[];for(let y=0;y<l.length;y++){const x=l[y];x.key!=null&&Pd(x,fg(x,f,a,n))}return Jt(m,null,l)}}},Dk=t=>delete t.mode;KS.props;const zk=KS;function Bk(t){const e=t.el;e[n_]&&e[n_](),e[dC]&&e[dC]()}function Fk(t){$S.set(t,t.el.getBoundingClientRect())}function Nk(t){const e=ZS.get(t),n=$S.get(t),a=e.left-n.left,s=e.top-n.top;if(a||s){const l=t.el.style;return l.transform=l.webkitTransform=`translate(${a}px,${s}px)`,l.transitionDuration="0s",t}}function Uk(t,e,n){const a=t.cloneNode(),s=t[dg];s&&s.forEach(f=>{f.split(/\s+/).forEach(m=>m&&a.classList.remove(m))}),n.split(/\s+/).forEach(f=>f&&a.classList.add(f)),a.style.display="none";const l=e.nodeType===1?e:e.parentNode;l.appendChild(a);const{hasTransform:i}=VS(a);return l.removeChild(a),i}const Od=t=>{const e=t.props["onUpdate:modelValue"]||!1;return hr(e)?n=>tg(e,n):e};function Vk(t){t.target.composing=!0}function pC(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const yc=Symbol("_assign"),Oh={created(t,{modifiers:{lazy:e,trim:n,number:a}},s){t[yc]=Od(s);const l=a||s.props&&s.props.type==="number";vf(t,e?"change":"input",i=>{if(i.target.composing)return;let f=t.value;n&&(f=f.trim()),l&&(f=W1(f)),t[yc](f)}),n&&vf(t,"change",()=>{t.value=t.value.trim()}),e||(vf(t,"compositionstart",Vk),vf(t,"compositionend",pC),vf(t,"change",pC))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:a,trim:s,number:l}},i){if(t[yc]=Od(i),t.composing)return;const f=(l||t.type==="number")&&!/^0\d/.test(t.value)?W1(t.value):t.value,m=e??"";f!==m&&(document.activeElement===t&&t.type!=="range"&&(a&&e===n||s&&t.value.trim()===m)||(t.value=m))}},U_={deep:!0,created(t,e,n){t[yc]=Od(n),vf(t,"change",()=>{const a=t._modelValue,s=pg(t),l=t.checked,i=t[yc];if(hr(a)){const f=E_(a,s),m=f!==-1;if(l&&!m)i(a.concat(s));else if(!l&&m){const y=[...a];y.splice(f,1),i(y)}}else if(zp(a)){const f=new Set(a);l?f.add(s):f.delete(s),i(f)}else i(qS(t,l))})},mounted:mC,beforeUpdate(t,e,n){t[yc]=Od(n),mC(t,e,n)}};function mC(t,{value:e,oldValue:n},a){t._modelValue=e,hr(e)?t.checked=E_(e,a.props.value)>-1:zp(e)?t.checked=e.has(a.props.value):e!==n&&(t.checked=Td(e,qS(t,!0)))}const Iw={created(t,{value:e},n){t.checked=Td(e,n.props.value),t[yc]=Od(n),vf(t,"change",()=>{t[yc](pg(t))})},beforeUpdate(t,{value:e,oldValue:n},a){t[yc]=Od(a),e!==n&&(t.checked=Td(e,a.props.value))}},V_={deep:!0,created(t,{value:e,modifiers:{number:n}},a){const s=zp(e);vf(t,"change",()=>{const l=Array.prototype.filter.call(t.options,i=>i.selected).map(i=>n?W1(pg(i)):pg(i));t[yc](t.multiple?s?new Set(l):l:l[0]),t._assigning=!0,lu(()=>{t._assigning=!1})}),t[yc]=Od(a)},mounted(t,{value:e,modifiers:{number:n}}){gC(t,e)},beforeUpdate(t,e,n){t[yc]=Od(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||gC(t,e)}};function gC(t,e,n){const a=t.multiple,s=hr(e);if(!(a&&!s&&!zp(e))){for(let l=0,i=t.options.length;l<i;l++){const f=t.options[l],m=pg(f);if(a)if(s){const y=typeof m;y==="string"||y==="number"?f.selected=e.some(x=>String(x)===String(m)):f.selected=E_(e,m)>-1}else f.selected=e.has(m);else if(Td(pg(f),e)){t.selectedIndex!==l&&(t.selectedIndex=l);return}}!a&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function pg(t){return"_value"in t?t._value:t.value}function qS(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Ew={created(t,e,n){m1(t,e,n,null,"created")},mounted(t,e,n){m1(t,e,n,null,"mounted")},beforeUpdate(t,e,n,a){m1(t,e,n,a,"beforeUpdate")},updated(t,e,n,a){m1(t,e,n,a,"updated")}};function YS(t,e){switch(t){case"SELECT":return V_;case"TEXTAREA":return Oh;default:switch(e){case"checkbox":return U_;case"radio":return Iw;default:return Oh}}}function m1(t,e,n,a,s){const i=YS(t.tagName,n.props&&n.props.type)[s];i&&i(t,e,n,a)}function jk(){Oh.getSSRProps=({value:t})=>({value:t}),Iw.getSSRProps=({value:t},e)=>{if(e.props&&Td(e.props.value,t))return{checked:!0}},U_.getSSRProps=({value:t},e)=>{if(hr(t)){if(e.props&&E_(t,e.props.value)>-1)return{checked:!0}}else if(zp(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},Ew.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=YS(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const Hk=["ctrl","shift","alt","meta"],Gk={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Hk.some(n=>t[`${n}Key`]&&!e.includes(n))},oo=(t,e)=>{const n=t._withMods||(t._withMods={}),a=e.join(".");return n[a]||(n[a]=(s,...l)=>{for(let i=0;i<e.length;i++){const f=Gk[e[i]];if(f&&f(s,e))return}return t(s,...l)})},Wk={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Zk=(t,e)=>{const n=t._withKeys||(t._withKeys={}),a=e.join(".");return n[a]||(n[a]=s=>{if(!("key"in s))return;const l=Ou(s.key);if(e.some(i=>i===l||Wk[i]===l))return t(s)})},XS=Ho({patchProp:Pk},fk);let Nv,vC=!1;function QS(){return Nv||(Nv=hS(XS))}function JS(){return Nv=vC?Nv:fS(XS),vC=!0,Nv}const TA=(...t)=>{QS().render(...t)},tM=(...t)=>{JS().hydrate(...t)},eM=(...t)=>{const e=QS().createApp(...t),{mount:n}=e;return e.mount=a=>{const s=rM(a);if(!s)return;const l=e._component;!Nr(l)&&!l.render&&!l.template&&(l.template=s.innerHTML),s.innerHTML="";const i=n(s,!1,nM(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},e},$k=(...t)=>{const e=JS().createApp(...t),{mount:n}=e;return e.mount=a=>{const s=rM(a);if(s)return n(s,!0,nM(s))},e};function nM(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function rM(t){return Qo(t)?document.querySelector(t):t}let yC=!1;const Kk=()=>{yC||(yC=!0,jk(),vk())};/**
* vue v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const qk=()=>{},Yk=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:ES,BaseTransitionPropsValidators:ww,Comment:xs,DeprecationTypes:uk,EffectScope:iw,ErrorCodes:B4,ErrorTypeStrings:nk,Fragment:Mr,KeepAlive:FP,ReactiveEffect:cg,Static:Tp,Suspense:Q4,Teleport:bA,Text:kp,TrackOpTypes:R4,Transition:B_,TransitionGroup:zk,TriggerOpTypes:D4,VueElement:N_,assertNumber:z4,callWithAsyncErrorHandling:Ru,callWithErrorHandling:xf,camelize:Tl,capitalize:Ay,cloneVNode:Lh,compatUtils:lk,compile:qk,computed:hn,createApp:eM,createBlock:$e,createCommentVNode:mn,createElementBlock:le,createElementVNode:kt,createHydrationRenderer:fS,createPropsRestProxy:vP,createRenderer:hS,createSSRApp:$k,createSlots:iP,createStaticVNode:z_,createTextVNode:_a,createVNode:Jt,customRef:BE,defineAsyncComponent:oP,defineComponent:_r,defineCustomElement:WS,defineEmits:uP,defineExpose:cP,defineModel:dP,defineOptions:hP,defineProps:lP,defineSSRCustomElement:Lk,defineSlots:fP,devtools:rk,effect:n4,effectScope:t4,getCurrentInstance:Bu,getCurrentScope:ow,getTransitionRawChildren:D_,guardReactiveProps:ka,h:Ld,handleError:Bp,hasInjectionContext:EP,hydrate:tM,initCustomFormatter:JP,initDirectivesForSSR:Kk,inject:As,isMemoSame:BS,isProxy:cw,isReactive:eg,isReadonly:hg,isRef:Jo,isRuntimeOnly:YP,isShallow:ny,isVNode:kd,markRaw:RE,mergeDefaults:gP,mergeModels:Bs,mergeProps:li,nextTick:lu,normalizeClass:mo,normalizeProps:Za,normalizeStyle:Ni,onActivated:AS,onBeforeMount:ZE,onBeforeUnmount:Iy,onBeforeUpdate:$E,onDeactivated:wS,onErrorCaptured:XE,onMounted:$a,onRenderTracked:YE,onRenderTriggered:qE,onScopeDispose:bE,onServerPrefetch:KE,onUnmounted:Pf,onUpdated:R_,openBlock:Ct,popScopeId:eh,provide:Ed,proxyRefs:dw,pushScopeId:th,queuePostFlushCb:K1,reactive:sl,readonly:wy,ref:on,registerRuntimeCompiler:qP,render:TA,renderList:Eo,renderSlot:Zn,resolveComponent:Sl,resolveDirective:Y4,resolveDynamicComponent:Ga,resolveFilter:sk,resolveTransitionHooks:fg,setBlockTracking:xA,setDevtoolsHook:ik,setTransitionHooks:Pd,shallowReactive:uw,shallowReadonly:w4,shallowRef:Cy,ssrContextKey:gS,ssrUtils:ak,stop:r4,toDisplayString:Mn,toHandlerKey:Dv,toHandlers:aP,toRaw:Ri,toRef:O4,toRefs:P4,toValue:S4,transformVNodeArgs:GP,triggerRef:E4,unref:at,useAttrs:mP,useCssModule:Rk,useCssVars:yk,useModel:ll,useSSRContext:vS,useSlots:JE,useTransitionState:Aw,vModelCheckbox:U_,vModelDynamic:Ew,vModelRadio:Iw,vModelSelect:V_,vModelText:Oh,vShow:F_,version:FS,warn:ek,watch:Wa,watchEffect:yS,watchPostEffect:_S,watchSyncEffect:bS,withAsyncContext:yP,withCtx:Ce,withDefaults:pP,withDirectives:Du,withKeys:Zk,withMemo:tk,withModifiers:oo,withScopeId:G4},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.3.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Hm=typeof document<"u";function Xk(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const fo=Object.assign;function Cx(t,e){const n={};for(const a in e){const s=e[a];n[a]=Qc(s)?s.map(t):t(s)}return n}const Uv=()=>{},Qc=Array.isArray,iM=/#/g,Qk=/&/g,Jk=/\//g,tL=/=/g,eL=/\?/g,oM=/\+/g,nL=/%5B/g,rL=/%5D/g,aM=/%5E/g,iL=/%60/g,sM=/%7B/g,oL=/%7C/g,lM=/%7D/g,aL=/%20/g;function Sw(t){return encodeURI(""+t).replace(oL,"|").replace(nL,"[").replace(rL,"]")}function sL(t){return Sw(t).replace(sM,"{").replace(lM,"}").replace(aM,"^")}function PA(t){return Sw(t).replace(oM,"%2B").replace(aL,"+").replace(iM,"%23").replace(Qk,"%26").replace(iL,"`").replace(sM,"{").replace(lM,"}").replace(aM,"^")}function lL(t){return PA(t).replace(tL,"%3D")}function uL(t){return Sw(t).replace(iM,"%23").replace(eL,"%3F")}function cL(t){return t==null?"":uL(t).replace(Jk,"%2F")}function uy(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const hL=/\/$/,fL=t=>t.replace(hL,"");function Ix(t,e,n="/"){let a,s={},l="",i="";const f=e.indexOf("#");let m=e.indexOf("?");return f<m&&f>=0&&(m=-1),m>-1&&(a=e.slice(0,m),l=e.slice(m+1,f>-1?f:e.length),s=t(l)),f>-1&&(a=a||e.slice(0,f),i=e.slice(f,e.length)),a=gL(a??e,n),{fullPath:a+(l&&"?")+l+i,path:a,query:s,hash:uy(i)}}function dL(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function _C(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function pL(t,e,n){const a=e.matched.length-1,s=n.matched.length-1;return a>-1&&a===s&&mg(e.matched[a],n.matched[s])&&uM(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function mg(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function uM(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!mL(t[n],e[n]))return!1;return!0}function mL(t,e){return Qc(t)?bC(t,e):Qc(e)?bC(e,t):t===e}function bC(t,e){return Qc(e)?t.length===e.length&&t.every((n,a)=>n===e[a]):t.length===1&&t[0]===e}function gL(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),a=t.split("/"),s=a[a.length-1];(s===".."||s===".")&&a.push("");let l=n.length-1,i,f;for(i=0;i<a.length;i++)if(f=a[i],f!==".")if(f==="..")l>1&&l--;else break;return n.slice(0,l).join("/")+"/"+a.slice(i).join("/")}var cy;(function(t){t.pop="pop",t.push="push"})(cy||(cy={}));var Vv;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Vv||(Vv={}));function vL(t){if(!t)if(Hm){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),fL(t)}const yL=/^[^#]+#/;function _L(t,e){return t.replace(yL,"#")+e}function bL(t,e){const n=document.documentElement.getBoundingClientRect(),a=t.getBoundingClientRect();return{behavior:e.behavior,left:a.left-n.left-(e.left||0),top:a.top-n.top-(e.top||0)}}const j_=()=>({left:window.scrollX,top:window.scrollY});function xL(t){let e;if("el"in t){const n=t.el,a=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=bL(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function xC(t,e){return(history.state?history.state.position-e:-1)+t}const kA=new Map;function AL(t,e){kA.set(t,e)}function wL(t){const e=kA.get(t);return kA.delete(t),e}let CL=()=>location.protocol+"//"+location.host;function cM(t,e){const{pathname:n,search:a,hash:s}=e,l=t.indexOf("#");if(l>-1){let f=s.includes(t.slice(l))?t.slice(l).length:1,m=s.slice(f);return m[0]!=="/"&&(m="/"+m),_C(m,"")}return _C(n,t)+a+s}function IL(t,e,n,a){let s=[],l=[],i=null;const f=({state:w})=>{const E=cM(t,location),L=n.value,k=e.value;let z=0;if(w){if(n.value=E,e.value=w,i&&i===L){i=null;return}z=k?w.position-k.position:0}else a(E);s.forEach(F=>{F(n.value,L,{delta:z,type:cy.pop,direction:z?z>0?Vv.forward:Vv.back:Vv.unknown})})};function m(){i=n.value}function y(w){s.push(w);const E=()=>{const L=s.indexOf(w);L>-1&&s.splice(L,1)};return l.push(E),E}function x(){const{history:w}=window;w.state&&w.replaceState(fo({},w.state,{scroll:j_()}),"")}function A(){for(const w of l)w();l=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",x)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",x,{passive:!0}),{pauseListeners:m,listen:y,destroy:A}}function AC(t,e,n,a=!1,s=!1){return{back:t,current:e,forward:n,replaced:a,position:window.history.length,scroll:s?j_():null}}function EL(t){const{history:e,location:n}=window,a={value:cM(t,n)},s={value:e.state};s.value||l(a.value,{back:null,current:a.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function l(m,y,x){const A=t.indexOf("#"),w=A>-1?(n.host&&document.querySelector("base")?t:t.slice(A))+m:CL()+t+m;try{e[x?"replaceState":"pushState"](y,"",w),s.value=y}catch(E){console.error(E),n[x?"replace":"assign"](w)}}function i(m,y){const x=fo({},e.state,AC(s.value.back,m,s.value.forward,!0),y,{position:s.value.position});l(m,x,!0),a.value=m}function f(m,y){const x=fo({},s.value,e.state,{forward:m,scroll:j_()});l(x.current,x,!0);const A=fo({},AC(a.value,m,null),{position:x.position+1},y);l(m,A,!1),a.value=m}return{location:a,state:s,push:f,replace:i}}function SL(t){t=vL(t);const e=EL(t),n=IL(t,e.state,e.location,e.replace);function a(l,i=!0){i||n.pauseListeners(),history.go(l)}const s=fo({location:"",base:t,go:a,createHref:_L.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function ML(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),SL(t)}function TL(t){return typeof t=="string"||t&&typeof t=="object"}function hM(t){return typeof t=="string"||typeof t=="symbol"}const dd={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},fM=Symbol("");var wC;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(wC||(wC={}));function gg(t,e){return fo(new Error,{type:t,[fM]:!0},e)}function hf(t,e){return t instanceof Error&&fM in t&&(e==null||!!(t.type&e))}const CC="[^/]+?",PL={sensitive:!1,strict:!1,start:!0,end:!0},kL=/[.+*?^${}()[\]/\\]/g;function LL(t,e){const n=fo({},PL,e),a=[];let s=n.start?"^":"";const l=[];for(const y of t){const x=y.length?[]:[90];n.strict&&!y.length&&(s+="/");for(let A=0;A<y.length;A++){const w=y[A];let E=40+(n.sensitive?.25:0);if(w.type===0)A||(s+="/"),s+=w.value.replace(kL,"\\$&"),E+=40;else if(w.type===1){const{value:L,repeatable:k,optional:z,regexp:F}=w;l.push({name:L,repeatable:k,optional:z});const D=F||CC;if(D!==CC){E+=10;try{new RegExp(`(${D})`)}catch(U){throw new Error(`Invalid custom RegExp for param "${L}" (${D}): `+U.message)}}let B=k?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;A||(B=z&&y.length<2?`(?:/${B})`:"/"+B),z&&(B+="?"),s+=B,E+=20,z&&(E+=-8),k&&(E+=-20),D===".*"&&(E+=-50)}x.push(E)}a.push(x)}if(n.strict&&n.end){const y=a.length-1;a[y][a[y].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const i=new RegExp(s,n.sensitive?"":"i");function f(y){const x=y.match(i),A={};if(!x)return null;for(let w=1;w<x.length;w++){const E=x[w]||"",L=l[w-1];A[L.name]=E&&L.repeatable?E.split("/"):E}return A}function m(y){let x="",A=!1;for(const w of t){(!A||!x.endsWith("/"))&&(x+="/"),A=!1;for(const E of w)if(E.type===0)x+=E.value;else if(E.type===1){const{value:L,repeatable:k,optional:z}=E,F=L in y?y[L]:"";if(Qc(F)&&!k)throw new Error(`Provided param "${L}" is an array but it is not repeatable (* or + modifiers)`);const D=Qc(F)?F.join("/"):F;if(!D)if(z)w.length<2&&(x.endsWith("/")?x=x.slice(0,-1):A=!0);else throw new Error(`Missing required param "${L}"`);x+=D}}return x||"/"}return{re:i,score:a,keys:l,parse:f,stringify:m}}function OL(t,e){let n=0;for(;n<t.length&&n<e.length;){const a=e[n]-t[n];if(a)return a;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function dM(t,e){let n=0;const a=t.score,s=e.score;for(;n<a.length&&n<s.length;){const l=OL(a[n],s[n]);if(l)return l;n++}if(Math.abs(s.length-a.length)===1){if(IC(a))return 1;if(IC(s))return-1}return s.length-a.length}function IC(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const RL={type:0,value:""},DL=/[a-zA-Z0-9_]/;function zL(t){if(!t)return[[]];if(t==="/")return[[RL]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(E){throw new Error(`ERR (${n})/"${y}": ${E}`)}let n=0,a=n;const s=[];let l;function i(){l&&s.push(l),l=[]}let f=0,m,y="",x="";function A(){y&&(n===0?l.push({type:0,value:y}):n===1||n===2||n===3?(l.length>1&&(m==="*"||m==="+")&&e(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:y,regexp:x,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):e("Invalid state to consume buffer"),y="")}function w(){y+=m}for(;f<t.length;){if(m=t[f++],m==="\\"&&n!==2){a=n,n=4;continue}switch(n){case 0:m==="/"?(y&&A(),i()):m===":"?(A(),n=1):w();break;case 4:w(),n=a;break;case 1:m==="("?n=2:DL.test(m)?w():(A(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&f--);break;case 2:m===")"?x[x.length-1]=="\\"?x=x.slice(0,-1)+m:n=3:x+=m;break;case 3:A(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&f--,x="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${y}"`),A(),i(),s}function BL(t,e,n){const a=LL(zL(t.path),n),s=fo(a,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function FL(t,e){const n=[],a=new Map;e=MC({strict:!1,end:!0,sensitive:!1},e);function s(x){return a.get(x)}function l(x,A,w){const E=!w,L=NL(x);L.aliasOf=w&&w.record;const k=MC(e,x),z=[L];if("alias"in x){const B=typeof x.alias=="string"?[x.alias]:x.alias;for(const U of B)z.push(fo({},L,{components:w?w.record.components:L.components,path:U,aliasOf:w?w.record:L}))}let F,D;for(const B of z){const{path:U}=B;if(A&&U[0]!=="/"){const $=A.record.path,q=$[$.length-1]==="/"?"":"/";B.path=A.record.path+(U&&q+U)}if(F=BL(B,A,k),w?w.alias.push(F):(D=D||F,D!==F&&D.alias.push(F),E&&x.name&&!SC(F)&&i(x.name)),pM(F)&&m(F),L.children){const $=L.children;for(let q=0;q<$.length;q++)l($[q],F,w&&w.children[q])}w=w||F}return D?()=>{i(D)}:Uv}function i(x){if(hM(x)){const A=a.get(x);A&&(a.delete(x),n.splice(n.indexOf(A),1),A.children.forEach(i),A.alias.forEach(i))}else{const A=n.indexOf(x);A>-1&&(n.splice(A,1),x.record.name&&a.delete(x.record.name),x.children.forEach(i),x.alias.forEach(i))}}function f(){return n}function m(x){const A=jL(x,n);n.splice(A,0,x),x.record.name&&!SC(x)&&a.set(x.record.name,x)}function y(x,A){let w,E={},L,k;if("name"in x&&x.name){if(w=a.get(x.name),!w)throw gg(1,{location:x});k=w.record.name,E=fo(EC(A.params,w.keys.filter(D=>!D.optional).concat(w.parent?w.parent.keys.filter(D=>D.optional):[]).map(D=>D.name)),x.params&&EC(x.params,w.keys.map(D=>D.name))),L=w.stringify(E)}else if(x.path!=null)L=x.path,w=n.find(D=>D.re.test(L)),w&&(E=w.parse(L),k=w.record.name);else{if(w=A.name?a.get(A.name):n.find(D=>D.re.test(A.path)),!w)throw gg(1,{location:x,currentLocation:A});k=w.record.name,E=fo({},A.params,x.params),L=w.stringify(E)}const z=[];let F=w;for(;F;)z.unshift(F.record),F=F.parent;return{name:k,path:L,params:E,matched:z,meta:VL(z)}}return t.forEach(x=>l(x)),{addRoute:l,resolve:y,removeRoute:i,getRoutes:f,getRecordMatcher:s}}function EC(t,e){const n={};for(const a of e)a in t&&(n[a]=t[a]);return n}function NL(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:UL(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function UL(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const a in t.components)e[a]=typeof n=="object"?n[a]:n;return e}function SC(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function VL(t){return t.reduce((e,n)=>fo(e,n.meta),{})}function MC(t,e){const n={};for(const a in t)n[a]=a in e?e[a]:t[a];return n}function jL(t,e){let n=0,a=e.length;for(;n!==a;){const l=n+a>>1;dM(t,e[l])<0?a=l:n=l+1}const s=HL(t);return s&&(a=e.lastIndexOf(s,a-1)),a}function HL(t){let e=t;for(;e=e.parent;)if(pM(e)&&dM(t,e)===0)return e}function pM({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function GL(t){const e={};if(t===""||t==="?")return e;const a=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<a.length;++s){const l=a[s].replace(oM," "),i=l.indexOf("="),f=uy(i<0?l:l.slice(0,i)),m=i<0?null:uy(l.slice(i+1));if(f in e){let y=e[f];Qc(y)||(y=e[f]=[y]),y.push(m)}else e[f]=m}return e}function TC(t){let e="";for(let n in t){const a=t[n];if(n=lL(n),a==null){a!==void 0&&(e+=(e.length?"&":"")+n);continue}(Qc(a)?a.map(l=>l&&PA(l)):[a&&PA(a)]).forEach(l=>{l!==void 0&&(e+=(e.length?"&":"")+n,l!=null&&(e+="="+l))})}return e}function WL(t){const e={};for(const n in t){const a=t[n];a!==void 0&&(e[n]=Qc(a)?a.map(s=>s==null?null:""+s):a==null?a:""+a)}return e}const ZL=Symbol(""),PC=Symbol(""),Mw=Symbol(""),mM=Symbol(""),LA=Symbol("");function yv(){let t=[];function e(a){return t.push(a),()=>{const s=t.indexOf(a);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function yd(t,e,n,a,s,l=i=>i()){const i=a&&(a.enterCallbacks[s]=a.enterCallbacks[s]||[]);return()=>new Promise((f,m)=>{const y=w=>{w===!1?m(gg(4,{from:n,to:e})):w instanceof Error?m(w):TL(w)?m(gg(2,{from:e,to:w})):(i&&a.enterCallbacks[s]===i&&typeof w=="function"&&i.push(w),f())},x=l(()=>t.call(a&&a.instances[s],e,n,y));let A=Promise.resolve(x);t.length<3&&(A=A.then(y)),A.catch(w=>m(w))})}function Ex(t,e,n,a,s=l=>l()){const l=[];for(const i of t)for(const f in i.components){let m=i.components[f];if(!(e!=="beforeRouteEnter"&&!i.instances[f]))if($L(m)){const x=(m.__vccOpts||m)[e];x&&l.push(yd(x,n,a,i,f,s))}else{let y=m();l.push(()=>y.then(x=>{if(!x)return Promise.reject(new Error(`Couldn't resolve component "${f}" at "${i.path}"`));const A=Xk(x)?x.default:x;i.components[f]=A;const E=(A.__vccOpts||A)[e];return E&&yd(E,n,a,i,f,s)()}))}}return l}function $L(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function kC(t){const e=As(Mw),n=As(mM),a=hn(()=>{const m=at(t.to);return e.resolve(m)}),s=hn(()=>{const{matched:m}=a.value,{length:y}=m,x=m[y-1],A=n.matched;if(!x||!A.length)return-1;const w=A.findIndex(mg.bind(null,x));if(w>-1)return w;const E=LC(m[y-2]);return y>1&&LC(x)===E&&A[A.length-1].path!==E?A.findIndex(mg.bind(null,m[y-2])):w}),l=hn(()=>s.value>-1&&XL(n.params,a.value.params)),i=hn(()=>s.value>-1&&s.value===n.matched.length-1&&uM(n.params,a.value.params));function f(m={}){return YL(m)?e[at(t.replace)?"replace":"push"](at(t.to)).catch(Uv):Promise.resolve()}return{route:a,href:hn(()=>a.value.href),isActive:l,isExactActive:i,navigate:f}}const KL=_r({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:kC,setup(t,{slots:e}){const n=sl(kC(t)),{options:a}=As(Mw),s=hn(()=>({[OC(t.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[OC(t.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=e.default&&e.default(n);return t.custom?l:Ld("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},l)}}}),qL=KL;function YL(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function XL(t,e){for(const n in e){const a=e[n],s=t[n];if(typeof a=="string"){if(a!==s)return!1}else if(!Qc(s)||s.length!==a.length||a.some((l,i)=>l!==s[i]))return!1}return!0}function LC(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const OC=(t,e,n)=>t??e??n,QL=_r({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const a=As(LA),s=hn(()=>t.route||a.value),l=As(PC,0),i=hn(()=>{let y=at(l);const{matched:x}=s.value;let A;for(;(A=x[y])&&!A.components;)y++;return y}),f=hn(()=>s.value.matched[i.value]);Ed(PC,hn(()=>i.value+1)),Ed(ZL,f),Ed(LA,s);const m=on();return Wa(()=>[m.value,f.value,t.name],([y,x,A],[w,E,L])=>{x&&(x.instances[A]=y,E&&E!==x&&y&&y===w&&(x.leaveGuards.size||(x.leaveGuards=E.leaveGuards),x.updateGuards.size||(x.updateGuards=E.updateGuards))),y&&x&&(!E||!mg(x,E)||!w)&&(x.enterCallbacks[A]||[]).forEach(k=>k(y))},{flush:"post"}),()=>{const y=s.value,x=t.name,A=f.value,w=A&&A.components[x];if(!w)return RC(n.default,{Component:w,route:y});const E=A.props[x],L=E?E===!0?y.params:typeof E=="function"?E(y):E:null,z=Ld(w,fo({},L,e,{onVnodeUnmounted:F=>{F.component.isUnmounted&&(A.instances[x]=null)},ref:m}));return RC(n.default,{Component:z,route:y})||z}}});function RC(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const gM=QL;function JL(t){const e=FL(t.routes,t),n=t.parseQuery||GL,a=t.stringifyQuery||TC,s=t.history,l=yv(),i=yv(),f=yv(),m=Cy(dd);let y=dd;Hm&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const x=Cx.bind(null,fe=>""+fe),A=Cx.bind(null,cL),w=Cx.bind(null,uy);function E(fe,ge){let ne,Se;return hM(fe)?(ne=e.getRecordMatcher(fe),Se=ge):Se=fe,e.addRoute(Se,ne)}function L(fe){const ge=e.getRecordMatcher(fe);ge&&e.removeRoute(ge)}function k(){return e.getRoutes().map(fe=>fe.record)}function z(fe){return!!e.getRecordMatcher(fe)}function F(fe,ge){if(ge=fo({},ge||m.value),typeof fe=="string"){const N=Ix(n,fe,ge.path),Et=e.resolve({path:N.path},ge),wt=s.createHref(N.fullPath);return fo(N,Et,{params:w(Et.params),hash:uy(N.hash),redirectedFrom:void 0,href:wt})}let ne;if(fe.path!=null)ne=fo({},fe,{path:Ix(n,fe.path,ge.path).path});else{const N=fo({},fe.params);for(const Et in N)N[Et]==null&&delete N[Et];ne=fo({},fe,{params:A(N)}),ge.params=A(ge.params)}const Se=e.resolve(ne,ge),We=fe.hash||"";Se.params=x(w(Se.params));const In=dL(a,fo({},fe,{hash:sL(We),path:Se.path})),_t=s.createHref(In);return fo({fullPath:In,hash:We,query:a===TC?WL(fe.query):fe.query||{}},Se,{redirectedFrom:void 0,href:_t})}function D(fe){return typeof fe=="string"?Ix(n,fe,m.value.path):fo({},fe)}function B(fe,ge){if(y!==fe)return gg(8,{from:ge,to:fe})}function U(fe){return tt(fe)}function $(fe){return U(fo(D(fe),{replace:!0}))}function q(fe){const ge=fe.matched[fe.matched.length-1];if(ge&&ge.redirect){const{redirect:ne}=ge;let Se=typeof ne=="function"?ne(fe):ne;return typeof Se=="string"&&(Se=Se.includes("?")||Se.includes("#")?Se=D(Se):{path:Se},Se.params={}),fo({query:fe.query,hash:fe.hash,params:Se.path!=null?{}:fe.params},Se)}}function tt(fe,ge){const ne=y=F(fe),Se=m.value,We=fe.state,In=fe.force,_t=fe.replace===!0,N=q(ne);if(N)return tt(fo(D(N),{state:typeof N=="object"?fo({},We,N.state):We,force:In,replace:_t}),ge||ne);const Et=ne;Et.redirectedFrom=ge;let wt;return!In&&pL(a,Se,ne)&&(wt=gg(16,{to:Et,from:Se}),jt(Se,Se,!0,!1)),(wt?Promise.resolve(wt):rt(Et,Se)).catch(ht=>hf(ht)?hf(ht,2)?ht:je(ht):ie(ht,Et,Se)).then(ht=>{if(ht){if(hf(ht,2))return tt(fo({replace:_t},D(ht.to),{state:typeof ht.to=="object"?fo({},We,ht.to.state):We,force:In}),ge||Et)}else ht=Q(Et,Se,!0,_t,We);return pt(Et,Se,ht),ht})}function Y(fe,ge){const ne=B(fe,ge);return ne?Promise.reject(ne):Promise.resolve()}function G(fe){const ge=Fe.values().next().value;return ge&&typeof ge.runWithContext=="function"?ge.runWithContext(fe):fe()}function rt(fe,ge){let ne;const[Se,We,In]=t6(fe,ge);ne=Ex(Se.reverse(),"beforeRouteLeave",fe,ge);for(const N of Se)N.leaveGuards.forEach(Et=>{ne.push(yd(Et,fe,ge))});const _t=Y.bind(null,fe,ge);return ne.push(_t),qe(ne).then(()=>{ne=[];for(const N of l.list())ne.push(yd(N,fe,ge));return ne.push(_t),qe(ne)}).then(()=>{ne=Ex(We,"beforeRouteUpdate",fe,ge);for(const N of We)N.updateGuards.forEach(Et=>{ne.push(yd(Et,fe,ge))});return ne.push(_t),qe(ne)}).then(()=>{ne=[];for(const N of In)if(N.beforeEnter)if(Qc(N.beforeEnter))for(const Et of N.beforeEnter)ne.push(yd(Et,fe,ge));else ne.push(yd(N.beforeEnter,fe,ge));return ne.push(_t),qe(ne)}).then(()=>(fe.matched.forEach(N=>N.enterCallbacks={}),ne=Ex(In,"beforeRouteEnter",fe,ge,G),ne.push(_t),qe(ne))).then(()=>{ne=[];for(const N of i.list())ne.push(yd(N,fe,ge));return ne.push(_t),qe(ne)}).catch(N=>hf(N,8)?N:Promise.reject(N))}function pt(fe,ge,ne){f.list().forEach(Se=>G(()=>Se(fe,ge,ne)))}function Q(fe,ge,ne,Se,We){const In=B(fe,ge);if(In)return In;const _t=ge===dd,N=Hm?history.state:{};ne&&(Se||_t?s.replace(fe.fullPath,fo({scroll:_t&&N&&N.scroll},We)):s.push(fe.fullPath,We)),m.value=fe,jt(fe,ge,ne,_t),je()}let ot;function Z(){ot||(ot=s.listen((fe,ge,ne)=>{if(!we.listening)return;const Se=F(fe),We=q(Se);if(We){tt(fo(We,{replace:!0}),Se).catch(Uv);return}y=Se;const In=m.value;Hm&&AL(xC(In.fullPath,ne.delta),j_()),rt(Se,In).catch(_t=>hf(_t,12)?_t:hf(_t,2)?(tt(_t.to,Se).then(N=>{hf(N,20)&&!ne.delta&&ne.type===cy.pop&&s.go(-1,!1)}).catch(Uv),Promise.reject()):(ne.delta&&s.go(-ne.delta,!1),ie(_t,Se,In))).then(_t=>{_t=_t||Q(Se,In,!1),_t&&(ne.delta&&!hf(_t,8)?s.go(-ne.delta,!1):ne.type===cy.pop&&hf(_t,20)&&s.go(-1,!1)),pt(Se,In,_t)}).catch(Uv)}))}let Kt=yv(),Ft=yv(),Tt;function ie(fe,ge,ne){je(fe);const Se=Ft.list();return Se.length?Se.forEach(We=>We(fe,ge,ne)):console.error(fe),Promise.reject(fe)}function ue(){return Tt&&m.value!==dd?Promise.resolve():new Promise((fe,ge)=>{Kt.add([fe,ge])})}function je(fe){return Tt||(Tt=!fe,Z(),Kt.list().forEach(([ge,ne])=>fe?ne(fe):ge()),Kt.reset()),fe}function jt(fe,ge,ne,Se){const{scrollBehavior:We}=t;if(!Hm||!We)return Promise.resolve();const In=!ne&&wL(xC(fe.fullPath,0))||(Se||!ne)&&history.state&&history.state.scroll||null;return lu().then(()=>We(fe,ge,In)).then(_t=>_t&&xL(_t)).catch(_t=>ie(_t,fe,ge))}const Ut=fe=>s.go(fe);let xe;const Fe=new Set,we={currentRoute:m,listening:!0,addRoute:E,removeRoute:L,hasRoute:z,getRoutes:k,resolve:F,options:t,push:U,replace:$,go:Ut,back:()=>Ut(-1),forward:()=>Ut(1),beforeEach:l.add,beforeResolve:i.add,afterEach:f.add,onError:Ft.add,isReady:ue,install(fe){const ge=this;fe.component("RouterLink",qL),fe.component("RouterView",gM),fe.config.globalProperties.$router=ge,Object.defineProperty(fe.config.globalProperties,"$route",{enumerable:!0,get:()=>at(m)}),Hm&&!xe&&m.value===dd&&(xe=!0,U(s.location).catch(We=>{}));const ne={};for(const We in dd)Object.defineProperty(ne,We,{get:()=>m.value[We],enumerable:!0});fe.provide(Mw,ge),fe.provide(mM,uw(ne)),fe.provide(LA,m);const Se=fe.unmount;Fe.add(fe),fe.unmount=function(){Fe.delete(fe),Fe.size<1&&(y=dd,ot&&ot(),ot=null,m.value=dd,xe=!1,Tt=!1),Se()}}};function qe(fe){return fe.reduce((ge,ne)=>ge.then(()=>G(ne)),Promise.resolve())}return we}function t6(t,e){const n=[],a=[],s=[],l=Math.max(e.matched.length,t.matched.length);for(let i=0;i<l;i++){const f=e.matched[i];f&&(t.matched.find(y=>mg(y,f))?a.push(f):n.push(f));const m=t.matched[i];m&&(e.matched.find(y=>mg(y,m))||s.push(m))}return[n,a,s]}function Ag(t){return ow()?(bE(t),!0):!1}function e6(){const t=new Set,e=s=>{t.delete(s)};return{on:s=>{t.add(s);const l=()=>e(s);return Ag(l),{off:l}},off:e,trigger:(...s)=>Promise.all(Array.from(t).map(l=>l(...s)))}}function Tw(t,e){const n=window;return n.$_hungpv_store||(n.$_hungpv_store={}),n.$_hungpv_store[t]?e=n.$_hungpv_store[t]:n.$_hungpv_store[t]=e,e}function n6(t,e){return n=>Object.keys(t).reduce((a,s)=>{const i=typeof t[s]=="object"&&t[s]!=null&&!Array.isArray(t[s])?t[s]:{type:t[s]};return n&&s in n?a[s]={...i,default:n[s]}:a[s]=i,e&&!a[s].source&&(a[s].source=e),a},{})}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function vM(t){return typeof t>"u"||t===null}function r6(t){return typeof t=="object"&&t!==null}function i6(t){return Array.isArray(t)?t:vM(t)?[]:[t]}function o6(t,e){var n,a,s,l;if(e)for(l=Object.keys(e),n=0,a=l.length;n<a;n+=1)s=l[n],t[s]=e[s];return t}function a6(t,e){var n="",a;for(a=0;a<e;a+=1)n+=t;return n}function s6(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var l6=vM,u6=r6,c6=i6,h6=a6,f6=s6,d6=o6,Pw={isNothing:l6,isObject:u6,toArray:c6,repeat:h6,isNegativeZero:f6,extend:d6};function yM(t,e){var n="",a=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),a+" "+n):a}function hy(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=yM(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}hy.prototype=Object.create(Error.prototype);hy.prototype.constructor=hy;hy.prototype.toString=function(e){return this.name+": "+yM(this,e)};var wp=hy,p6=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],m6=["scalar","sequence","mapping"];function g6(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(a){e[String(a)]=n})}),e}function v6(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(p6.indexOf(n)===-1)throw new wp('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=g6(e.styleAliases||null),m6.indexOf(this.kind)===-1)throw new wp('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var al=v6;function DC(t,e){var n=[];return t[e].forEach(function(a){var s=n.length;n.forEach(function(l,i){l.tag===a.tag&&l.kind===a.kind&&l.multi===a.multi&&(s=i)}),n[s]=a}),n}function y6(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function a(s){s.multi?(t.multi[s.kind].push(s),t.multi.fallback.push(s)):t[s.kind][s.tag]=t.fallback[s.tag]=s}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(a);return t}function OA(t){return this.extend(t)}OA.prototype.extend=function(e){var n=[],a=[];if(e instanceof al)a.push(e);else if(Array.isArray(e))a=a.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(a=a.concat(e.explicit));else throw new wp("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(l){if(!(l instanceof al))throw new wp("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(l.loadKind&&l.loadKind!=="scalar")throw new wp("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(l.multi)throw new wp("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(l){if(!(l instanceof al))throw new wp("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(OA.prototype);return s.implicit=(this.implicit||[]).concat(n),s.explicit=(this.explicit||[]).concat(a),s.compiledImplicit=DC(s,"implicit"),s.compiledExplicit=DC(s,"explicit"),s.compiledTypeMap=y6(s.compiledImplicit,s.compiledExplicit),s};var _6=OA,b6=new al("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),x6=new al("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),A6=new al("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),w6=new _6({explicit:[b6,x6,A6]});function C6(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function I6(){return null}function E6(t){return t===null}var S6=new al("tag:yaml.org,2002:null",{kind:"scalar",resolve:C6,construct:I6,predicate:E6,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function M6(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function T6(t){return t==="true"||t==="True"||t==="TRUE"}function P6(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var k6=new al("tag:yaml.org,2002:bool",{kind:"scalar",resolve:M6,construct:T6,predicate:P6,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function L6(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function O6(t){return 48<=t&&t<=55}function R6(t){return 48<=t&&t<=57}function D6(t){if(t===null)return!1;var e=t.length,n=0,a=!1,s;if(!e)return!1;if(s=t[n],(s==="-"||s==="+")&&(s=t[++n]),s==="0"){if(n+1===e)return!0;if(s=t[++n],s==="b"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(s!=="0"&&s!=="1")return!1;a=!0}return a&&s!=="_"}if(s==="x"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(!L6(t.charCodeAt(n)))return!1;a=!0}return a&&s!=="_"}if(s==="o"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(!O6(t.charCodeAt(n)))return!1;a=!0}return a&&s!=="_"}}if(s==="_")return!1;for(;n<e;n++)if(s=t[n],s!=="_"){if(!R6(t.charCodeAt(n)))return!1;a=!0}return!(!a||s==="_")}function z6(t){var e=t,n=1,a;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),a=e[0],(a==="-"||a==="+")&&(a==="-"&&(n=-1),e=e.slice(1),a=e[0]),e==="0")return 0;if(a==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function B6(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Pw.isNegativeZero(t)}var F6=new al("tag:yaml.org,2002:int",{kind:"scalar",resolve:D6,construct:z6,predicate:B6,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),N6=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function U6(t){return!(t===null||!N6.test(t)||t[t.length-1]==="_")}function V6(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var j6=/^[-+]?[0-9]+e/;function H6(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Pw.isNegativeZero(t))return"-0.0";return n=t.toString(10),j6.test(n)?n.replace("e",".e"):n}function G6(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Pw.isNegativeZero(t))}var W6=new al("tag:yaml.org,2002:float",{kind:"scalar",resolve:U6,construct:V6,predicate:G6,represent:H6,defaultStyle:"lowercase"}),Z6=w6.extend({implicit:[S6,k6,F6,W6]}),$6=Z6,_M=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),bM=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function K6(t){return t===null?!1:_M.exec(t)!==null||bM.exec(t)!==null}function q6(t){var e,n,a,s,l,i,f,m=0,y=null,x,A,w;if(e=_M.exec(t),e===null&&(e=bM.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],a=+e[2]-1,s=+e[3],!e[4])return new Date(Date.UTC(n,a,s));if(l=+e[4],i=+e[5],f=+e[6],e[7]){for(m=e[7].slice(0,3);m.length<3;)m+="0";m=+m}return e[9]&&(x=+e[10],A=+(e[11]||0),y=(x*60+A)*6e4,e[9]==="-"&&(y=-y)),w=new Date(Date.UTC(n,a,s,l,i,f,m)),y&&w.setTime(w.getTime()-y),w}function Y6(t){return t.toISOString()}var X6=new al("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:K6,construct:q6,instanceOf:Date,represent:Y6});function Q6(t){return t==="<<"||t===null}var J6=new al("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Q6}),kw=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function tO(t){if(t===null)return!1;var e,n,a=0,s=t.length,l=kw;for(n=0;n<s;n++)if(e=l.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;a+=6}return a%8===0}function eO(t){var e,n,a=t.replace(/[\r\n=]/g,""),s=a.length,l=kw,i=0,f=[];for(e=0;e<s;e++)e%4===0&&e&&(f.push(i>>16&255),f.push(i>>8&255),f.push(i&255)),i=i<<6|l.indexOf(a.charAt(e));return n=s%4*6,n===0?(f.push(i>>16&255),f.push(i>>8&255),f.push(i&255)):n===18?(f.push(i>>10&255),f.push(i>>2&255)):n===12&&f.push(i>>4&255),new Uint8Array(f)}function nO(t){var e="",n=0,a,s,l=t.length,i=kw;for(a=0;a<l;a++)a%3===0&&a&&(e+=i[n>>18&63],e+=i[n>>12&63],e+=i[n>>6&63],e+=i[n&63]),n=(n<<8)+t[a];return s=l%3,s===0?(e+=i[n>>18&63],e+=i[n>>12&63],e+=i[n>>6&63],e+=i[n&63]):s===2?(e+=i[n>>10&63],e+=i[n>>4&63],e+=i[n<<2&63],e+=i[64]):s===1&&(e+=i[n>>2&63],e+=i[n<<4&63],e+=i[64],e+=i[64]),e}function rO(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var iO=new al("tag:yaml.org,2002:binary",{kind:"scalar",resolve:tO,construct:eO,predicate:rO,represent:nO}),oO=Object.prototype.hasOwnProperty,aO=Object.prototype.toString;function sO(t){if(t===null)return!0;var e=[],n,a,s,l,i,f=t;for(n=0,a=f.length;n<a;n+=1){if(s=f[n],i=!1,aO.call(s)!=="[object Object]")return!1;for(l in s)if(oO.call(s,l))if(!i)i=!0;else return!1;if(!i)return!1;if(e.indexOf(l)===-1)e.push(l);else return!1}return!0}function lO(t){return t!==null?t:[]}var uO=new al("tag:yaml.org,2002:omap",{kind:"sequence",resolve:sO,construct:lO}),cO=Object.prototype.toString;function hO(t){if(t===null)return!0;var e,n,a,s,l,i=t;for(l=new Array(i.length),e=0,n=i.length;e<n;e+=1){if(a=i[e],cO.call(a)!=="[object Object]"||(s=Object.keys(a),s.length!==1))return!1;l[e]=[s[0],a[s[0]]]}return!0}function fO(t){if(t===null)return[];var e,n,a,s,l,i=t;for(l=new Array(i.length),e=0,n=i.length;e<n;e+=1)a=i[e],s=Object.keys(a),l[e]=[s[0],a[s[0]]];return l}var dO=new al("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:hO,construct:fO}),pO=Object.prototype.hasOwnProperty;function mO(t){if(t===null)return!0;var e,n=t;for(e in n)if(pO.call(n,e)&&n[e]!==null)return!1;return!0}function gO(t){return t!==null?t:{}}var vO=new al("tag:yaml.org,2002:set",{kind:"mapping",resolve:mO,construct:gO});$6.extend({implicit:[X6,J6],explicit:[iO,uO,dO,vO]});function zC(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}var yO=new Array(256),_O=new Array(256);for(var Rm=0;Rm<256;Rm++)yO[Rm]=zC(Rm)?1:0,_O[Rm]=zC(Rm);function If(t){return typeof t=="function"?t():at(t)}function Lw(t){return JSON.parse(JSON.stringify(t))}const wg=typeof window<"u"&&typeof document<"u",bO=t=>t!=null,xO=Object.prototype.toString,AO=t=>xO.call(t)==="[object Object]",k1=()=>{},wO=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),CO=IO();function IO(){var t,e;return wg&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const Ef=function(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))};function xM(t){return Bu()}function EO(t){let e;function n(){return e||(e=t()),e}return n.reset=async()=>{const a=e;e=void 0,a&&await a},n}function SO(t,e){var l;if(typeof t=="number")return t+e;const n=((l=t.match(/^-?\d+\.?\d*/))==null?void 0:l[0])||"",a=t.slice(n.length),s=Number.parseFloat(n)+e;return Number.isNaN(s)?t:s+a}function MO(t,e){xM()&&Pf(t,e)}function Cp(t){const e=If(t);return(e==null?void 0:e.$el)??e}function TO(t,e,n={}){const{immediate:a=!0}=n,s=on(!1);let l=null;function i(){l&&(clearTimeout(l),l=null)}function f(){s.value=!1,i()}function m(...y){i(),s.value=!0,l=setTimeout(()=>{s.value=!1,l=null,t(...y)},If(e))}return a&&(s.value=!0,wg&&m()),Ag(f),{isPending:wy(s),start:m,stop:f}}function PO(t,e=!0,n){xM()?$a(t,n):e?t():lu(t)}const H_=wg?window:void 0,AM=wg?window.document:void 0,Ow=wg?window.navigator:void 0;function qc(...t){let e,n,a,s;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,a,s]=t,e=H_):[e,n,a,s]=t,!e)return k1;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const l=[],i=()=>{l.forEach(x=>x()),l.length=0},f=(x,A,w,E)=>(x.addEventListener(A,w,E),()=>x.removeEventListener(A,w,E)),m=Wa(()=>[Cp(e),If(s)],([x,A])=>{if(i(),!x)return;const w=AO(A)?{...A}:A;l.push(...n.flatMap(E=>a.map(L=>f(x,E,L,w))))},{immediate:!0,flush:"post"}),y=()=>{m(),i()};return Ag(y),y}let BC=!1;function kO(t,e,n={}){const{window:a=H_,ignore:s=[],capture:l=!0,detectIframe:i=!1}=n;if(!a)return k1;CO&&!BC&&(BC=!0,Array.from(a.document.body.children).forEach(w=>w.addEventListener("click",k1)),a.document.documentElement.addEventListener("click",k1));let f=!0;const m=w=>s.some(E=>{if(typeof E=="string")return Array.from(a.document.querySelectorAll(E)).some(L=>L===w.target||w.composedPath().includes(L));{const L=Cp(E);return L&&(w.target===L||w.composedPath().includes(L))}}),x=[qc(a,"click",w=>{const E=Cp(t);if(!(!E||E===w.target||w.composedPath().includes(E))){if(w.detail===0&&(f=!m(w)),!f){f=!0;return}e(w)}},{passive:!0,capture:l}),qc(a,"pointerdown",w=>{const E=Cp(t);f=!m(w)&&!!(E&&!w.composedPath().includes(E))},{passive:!0}),i&&qc(a,"blur",w=>{setTimeout(()=>{var L;const E=Cp(t);((L=a.document.activeElement)==null?void 0:L.tagName)==="IFRAME"&&!(E!=null&&E.contains(a.document.activeElement))&&e(w)},0)})].filter(Boolean);return()=>x.forEach(w=>w())}function LO(){const t=on(!1),e=Bu();return e&&$a(()=>{t.value=!0},e),t}function Py(t){const e=LO();return hn(()=>(e.value,!!t()))}function _v(t,e={}){const{window:n=H_}=e,a=Py(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let s;const l=on(!1),i=y=>{l.value=y.matches},f=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",i):s.removeListener(i))},m=yS(()=>{a.value&&(f(),s=n.matchMedia(If(t)),"addEventListener"in s?s.addEventListener("change",i):s.addListener(i),l.value=s.matches)});return Ag(()=>{m(),f(),s=void 0}),l}function wM(t,e={}){function n(x,A){let w=If(t[If(x)]);return A!=null&&(w=SO(w,A)),typeof w=="number"&&(w=`${w}px`),w}const{window:a=H_,strategy:s="min-width"}=e;function l(x){return a?a.matchMedia(x).matches:!1}const i=x=>_v(()=>`(min-width: ${n(x)})`,e),f=x=>_v(()=>`(max-width: ${n(x)})`,e),m=Object.keys(t).reduce((x,A)=>(Object.defineProperty(x,A,{get:()=>s==="min-width"?i(A):f(A),enumerable:!0,configurable:!0}),x),{});function y(){const x=Object.keys(t).map(A=>[A,i(A)]);return hn(()=>x.filter(([,A])=>A.value).map(([A])=>A))}return Object.assign(m,{greaterOrEqual:i,smallerOrEqual:f,greater(x){return _v(()=>`(min-width: ${n(x,.1)})`,e)},smaller(x){return _v(()=>`(max-width: ${n(x,-.1)})`,e)},between(x,A){return _v(()=>`(min-width: ${n(x)}) and (max-width: ${n(A,-.1)})`,e)},isGreater(x){return l(`(min-width: ${n(x,.1)})`)},isGreaterOrEqual(x){return l(`(min-width: ${n(x)})`)},isSmaller(x){return l(`(max-width: ${n(x,-.1)})`)},isSmallerOrEqual(x){return l(`(max-width: ${n(x)})`)},isInBetween(x,A){return l(`(min-width: ${n(x)}) and (max-width: ${n(A,-.1)})`)},current:y,active(){const x=y();return hn(()=>x.value.length===0?"":x.value[x.value.length-1])}})}function FC(t,e={}){const{controls:n=!1,navigator:a=Ow}=e,s=Py(()=>a&&"permissions"in a);let l;const i=typeof t=="string"?{name:t}:t,f=on(),m=()=>{l&&(f.value=l.state)},y=EO(async()=>{if(s.value){if(!l)try{l=await a.permissions.query(i),qc(l,"change",m),m()}catch{f.value="prompt"}return l}});return y(),n?{state:f,isSupported:s,query:y}:f}function OO(t={}){const{navigator:e=Ow,read:n=!1,source:a,copiedDuring:s=1500,legacy:l=!0}=t,i=Py(()=>e&&"clipboard"in e),f=FC("clipboard-read"),m=FC("clipboard-write"),y=hn(()=>i.value||l),x=on(""),A=on(!1),w=TO(()=>A.value=!1,s);function E(){i.value&&F(f.value)?e.clipboard.readText().then(D=>{x.value=D}):x.value=z()}y.value&&n&&qc(["copy","cut"],E);async function L(D=If(a)){y.value&&D!=null&&(i.value&&F(m.value)?await e.clipboard.writeText(D):k(D),x.value=D,A.value=!0,w.start())}function k(D){const B=document.createElement("textarea");B.value=D??"",B.style.position="absolute",B.style.opacity="0",document.body.appendChild(B),B.select(),document.execCommand("copy"),B.remove()}function z(){var D,B;return((B=(D=document==null?void 0:document.getSelection)==null?void 0:D.call(document))==null?void 0:B.toString())??""}function F(D){return D==="granted"||D==="prompt"}return{isSupported:y,text:x,copied:A,copy:L}}function RO(t,e={}){const n=on(!1),a=Cy(null);let s=0,l=!0;if(wg){const i=typeof e=="function"?{onDrop:e}:e,f=m=>{var x;const y=Array.from(((x=m.dataTransfer)==null?void 0:x.files)??[]);return a.value=y.length===0?null:y};qc(t,"dragenter",m=>{var x,A;const y=Array.from(((x=m==null?void 0:m.dataTransfer)==null?void 0:x.items)||[]).map(w=>w.kind==="file"?w.type:null).filter(bO);if(i.dataTypes&&m.dataTransfer){const w=at(i.dataTypes);if(l=typeof w=="function"?w(y):w?w.some(E=>y.includes(E)):!0,!l)return}m.preventDefault(),s+=1,n.value=!0,(A=i.onEnter)==null||A.call(i,f(m),m)}),qc(t,"dragover",m=>{var y;l&&(m.preventDefault(),(y=i.onOver)==null||y.call(i,f(m),m))}),qc(t,"dragleave",m=>{var y;l&&(m.preventDefault(),s-=1,s===0&&(n.value=!1),(y=i.onLeave)==null||y.call(i,f(m),m))}),qc(t,"drop",m=>{var y;m.preventDefault(),s=0,n.value=!1,(y=i.onDrop)==null||y.call(i,f(m),m)})}return{files:a,isOverDropZone:n}}const NC=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function DO(t,e={}){const{document:n=AM,autoExit:a=!1}=e,s=hn(()=>Cp(t)??(n==null?void 0:n.querySelector("html"))),l=on(!1),i=hn(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(F=>n&&F in n||s.value&&F in s.value)),f=hn(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(F=>n&&F in n||s.value&&F in s.value)),m=hn(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(F=>n&&F in n||s.value&&F in s.value)),y=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(F=>n&&F in n),x=Py(()=>s.value&&n&&i.value!==void 0&&f.value!==void 0&&m.value!==void 0),A=()=>y?(n==null?void 0:n[y])===s.value:!1,w=()=>{if(m.value){if(n&&n[m.value]!=null)return n[m.value];{const F=s.value;if((F==null?void 0:F[m.value])!=null)return!!F[m.value]}}return!1};async function E(){if(!(!x.value||!l.value)){if(f.value)if((n==null?void 0:n[f.value])!=null)await n[f.value]();else{const F=s.value;(F==null?void 0:F[f.value])!=null&&await F[f.value]()}l.value=!1}}async function L(){if(!x.value||l.value)return;w()&&await E();const F=s.value;i.value&&(F==null?void 0:F[i.value])!=null&&(await F[i.value](),l.value=!0)}async function k(){await(l.value?E():L())}const z=()=>{const F=w();(!F||F&&A())&&(l.value=F)};return qc(n,NC,z,!1),qc(()=>Cp(s),NC,z,!1),a&&Ag(E),{isSupported:x,isFullscreen:l,enter:L,exit:E,toggle:k}}function zO(t={}){const{enableHighAccuracy:e=!0,maximumAge:n=3e4,timeout:a=27e3,navigator:s=Ow,immediate:l=!0}=t,i=Py(()=>s&&"geolocation"in s),f=on(null),m=Cy(null),y=on({accuracy:0,latitude:Number.POSITIVE_INFINITY,longitude:Number.POSITIVE_INFINITY,altitude:null,altitudeAccuracy:null,heading:null,speed:null});function x(L){f.value=L.timestamp,y.value=L.coords,m.value=null}let A;function w(){i.value&&(A=s.geolocation.watchPosition(x,L=>m.value=L,{enableHighAccuracy:e,maximumAge:n,timeout:a}))}l&&w();function E(){A&&s&&s.geolocation.clearWatch(A)}return Ag(()=>{E()}),{isSupported:i,coords:y,locatedAt:f,error:m,resume:w,pause:E}}const BO={multiple:!0,accept:"*",reset:!1,directory:!1};function FO(t={}){const{document:e=AM}=t,n=on(null),{on:a,trigger:s}=e6();let l;e&&(l=e.createElement("input"),l.type="file",l.onchange=m=>{const y=m.target;n.value=y.files,s(n.value)});const i=()=>{n.value=null,l&&l.value&&(l.value="",s(null))},f=m=>{if(!l)return;const y={...BO,...t,...m};l.multiple=y.multiple,l.accept=y.accept,l.webkitdirectory=y.directory,wO(y,"capture")&&(l.capture=y.capture),y.reset&&i(),l.click()};return{files:wy(n),open:f,reset:i,onChange:a}}const NO=z_('<label class="ddf__label" for="upload-file" data-v-70127256><i class="ddf__label-inner" data-v-70127256><svg class="ddf__icon" viewBox="0 0 64 64" aria-hidden="true" data-v-70127256><path fill="currentColor" d="M51,27c-.374,0-.742.025-1.109.056a18,18,0,0,0-35.782,0C13.742,27.025,13.374,27,13,27a13,13,0,0,0,0,26H51a13,13,0,0,0,0-26Z" data-v-70127256></path><path d="M43.764,41.354l-11-13a1.033,1.033,0,0,0-1.526,0l-11,13A1,1,0,0,0,21,43h7V59h8V43h7a1,1,0,0,0,.764-1.646Z" data-v-70127256></path></svg><span class="ddf__text" data-v-70127256> Drag and drop your files here </span><span class="ddf__subtext" data-v-70127256> or click to browse your files </span></i></label>',1),UO=[NO],VO=_r({__name:"index",props:{multiple:Boolean,accept:String},emits:["change"],setup(t,{emit:e}){const n=t,a=e,{onChange:s,open:l}=FO({multiple:n.multiple,accept:n.accept});s(y=>{y&&i(Array.from(y))});function i(y){y&&a("change",n.multiple?y:y[0])}const f=on(),{isOverDropZone:m}=RO(f,i);return(y,x)=>(Ct(),le("div",{class:mo(["ddf__area",{ddf__active:at(m)}]),ref_key:"dropZoneRef",ref:f,onClick:x[0]||(x[0]=A=>at(l)())},UO,2))}}),Yn=(t,e)=>{const n=t.__vccOpts||t;for(const[a,s]of e)n[a]=s;return n},jO=Yn(VO,[["__scopeId","data-v-70127256"]]);function CM(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function IM(t){return Array.isArray(t)&&t.every(CM)}function EM(t){return Array.isArray(t)&&t.every(IM)}function HO(t){return Array.isArray(t)&&t.every(EM)}function GO(t){return t&&typeof t=="object"&&"geometry"in t}function SM(t){return Array.isArray(t)?1+Math.max(0,...t.map(SM)):0}function WO(){return{detectGeoType:e=>{if(e!=null&&e.type&&(e!=null&&e.coordinates))return e.type;switch(SM(e)){case 1:return"Point";case 2:return"LineString";case 3:return"Polygon";case 4:return"MultiPolygon";default:throw new Error("Unsupported geometry depth")}}}}function ZO(){const t=e=>{if(e.type==="GeometryCollection")return e.geometries.every(t);const n=e.coordinates;switch(e.type){case"Point":return CM(n);case"MultiPoint":case"LineString":return IM(n);case"Polygon":case"MultiLineString":return EM(n);case"MultiPolygon":return HO(n);default:return!1}};return{validateGeometry:t}}function $O(){const{detectGeoType:t}=WO(),{validateGeometry:e}=ZO(),n=s=>{if(!GO(s))throw new Error("Invalid input: not an InputFeature");const{geometry:l,...i}=s,f=l!=null&&l.type&&(l!=null&&l.coordinates)?l:{type:t(l),coordinates:l};if(!e(f))throw new Error("Invalid geometry");return{type:"Feature",geometry:f,properties:i}};return{convertFeature:n,convertList:s=>({type:"FeatureCollection",features:s.map(n)})}}const UC=t=>{if(typeof t=="string"){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://"))return"url";if(t.startsWith("data:"))return"base64"}else{if(t instanceof Blob||t instanceof File)return"blob";if(t instanceof ArrayBuffer||t instanceof Uint8Array)return"buffer"}throw new Error("Không thể xác định loại dữ liệu để tải")},VC=t=>{var a;const e=(a=t.split(".").pop())==null?void 0:a.toLowerCase();return{pdf:"application/pdf",txt:"text/plain",csv:"text/csv",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",html:"text/html"}[e||""]||"application/octet-stream"};function KO(){const t=on("idle"),e=on(null),n=()=>{t.value="idle",e.value=null},a=async(l,i,f,m)=>{n();try{t.value="downloading";const y=f||UC(l),x=i||"download",A=m||VC(x);let w;switch(y){case"url":{const E=await fetch(l);if(!E.ok)throw new Error(`Fetch failed: ${E.status} ${E.statusText}`);w=await E.blob();break}case"base64":{const E=l,L=atob(E.split(",")[1]||E),k=new ArrayBuffer(L.length),z=new Uint8Array(k);for(let F=0;F<L.length;F++)z[F]=L.charCodeAt(F);w=new Blob([k],{type:A});break}case"blob":{w=l;break}case"buffer":{if(l instanceof ArrayBuffer)w=new Blob([l],{type:A});else if(l instanceof Uint8Array)w=new Blob([l.buffer],{type:A});else throw new Error("Không thể chuyển buffer thành Blob");break}default:throw new Error("Loại dữ liệu không hợp lệ")}s(w,x),t.value="success"}catch(y){t.value="error",e.value=y.message||"Lỗi không xác định"}},s=(l,i)=>{const f=document.createElement("a"),m=URL.createObjectURL(l);f.href=m,f.download=i,f.click(),URL.revokeObjectURL(m)};return{status:t,error:e,downloadFile:a,detectType:UC,guessMimeType:VC}}function qO(t={}){const e=new YO;async function n(a,s={}){return e.read(a,Object.assign({},t,s))}return{read:n}}class YO{async read(e,n={}){const a=n.parser||this.getParser(e),s=n.type||"text",l=n.onSuccess,i=n.onError;try{let f=await jC.read(e,s);return a&&(f=await a.parse(f,e)),l&&l(f),f}catch(f){throw i&&i(f),f}}getParser(e){switch(jC.getExtension(e)){case"geojson":case"json":return new XO}}}class jC{static getExtension(e){return e.name.split(".").pop()}static async read(e,n){return new Promise((a,s)=>{const l=new window.FileReader;l.onload=i=>i.target&&a(i.target.result),l.onerror=i=>s(i),n==="text"?l.readAsText(e):n==="arraybuffer"?l.readAsArrayBuffer(e):n==="binary"?l.readAsDataURL(e):s(new Error(`Read file as ${n} is not available`))})}}class XO{parse(e,n){const a=JSON.parse(e);return Promise.resolve(this.toGeojson(a))}toGeojson(e){return e.crs,e}}var ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ky(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var s=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(n,a,s.get?s:{enumerable:!0,get:function(){return t[a]}})}),n}var G_={},Rw={};Rw.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31};var MM={},QO={C:254,L:1,D:8,N:18,M:18,F:18,B:8},W_={};W_.lpad=function(e,n,a){for(;e.length<n;)e=a+e;return e};W_.rpad=function(e,n,a){for(;e.length<n;)e=e+a;return e};W_.writeField=function(e,n,a,s){for(var l=0;l<n;l++)e.setUint8(s,a.charCodeAt(l)),s++;return s};var Z_={},JO=QO,tR={string:"C",number:"N",boolean:"L",null:"C"};Z_.multi=eR;Z_.bytesPer=rR;Z_.obj=TM;function eR(t){var e={};t.forEach(n);function n(a){nR(e,a)}return TM(e)}function nR(t,e){for(var n in e){var a=typeof e[n]<"u"&&e[n]!==null;(typeof t[n]>"u"||a)&&(t[n]=e[n])}return t}function TM(t){var e={},n=[];for(var a in t)e[a]=t[a]===null?"null":typeof t[a];for(var s in e){var l=tR[e[s]];l&&n.push({name:s,type:l,size:JO[l]})}return n}function rR(t){return t.reduce(function(e,n){return e+n.size},1)}var Dm=W_,HC=Z_,iR=function(e,n){var a=n||HC.multi(e),s=32*a.length+1,l=HC.bytesPer(a),i=new ArrayBuffer(s+32+l*e.length+1),f=new Date,m=new DataView(i);m.setUint8(0,3),m.setUint8(1,f.getFullYear()-1900),m.setUint8(2,f.getMonth()+1),m.setUint8(3,f.getDate()),m.setUint32(4,e.length,!0);var y=s+32;m.setUint16(8,y,!0),m.setUint16(10,l,!0),m.setInt8(32+s-1,13),a.forEach(function(A,w){A.name.split("").slice(0,10).forEach(function(E,L){m.setInt8(32+w*32+L,E.charCodeAt(0))}),m.setInt8(32+w*32+11,A.type.charCodeAt(0)),m.setInt8(32+w*32+16,A.size),A.type=="N"&&m.setInt8(32+w*32+17,3)});var x=s+32;return e.forEach(function(A,w){m.setUint8(x,32),x++,a.forEach(function(E){var L=A[E.name];switch((L===null||typeof L>"u")&&(L=""),E.type){case"L":m.setUint8(x,L?84:70),x++;break;case"D":x=Dm.writeField(m,8,Dm.lpad(L.toString(),8," "),x);break;case"N":x=Dm.writeField(m,E.size,Dm.lpad(L.toString(),E.size," ").substr(0,18),x);break;case"C":x=Dm.writeField(m,E.size,Dm.rpad(L.toString(),E.size," "),x);break;default:throw new Error("Unknown field type")}})}),m.setUint8(x,26),m};MM.structure=iR;var PM='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]',Cg={},Ly={};Ly.enlarge=function(e,n){return n[0]<e.xmin&&(e.xmin=n[0]),n[0]>e.xmax&&(e.xmax=n[0]),n[1]<e.ymin&&(e.ymin=n[1]),n[1]>e.ymax&&(e.ymax=n[1]),e};Ly.enlargeExtent=function(e,n){return n.xmax>e.xmax&&(e.xmax=n.xmax),n.xmin<e.xmin&&(e.xmin=n.xmin),n.ymax>e.ymax&&(e.ymax=n.ymax),n.ymin<e.ymin&&(e.ymin=n.ymin),e};Ly.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}};var GC=Ly;Cg.write=function(e,n,a,s){var l=28,i=100,f=0,m=0;e.forEach(function(x,A){a.setInt32(f,A+1),a.setInt32(f+4,10),a.setInt32(f+8,1,!0),a.setFloat64(f+12,x[0],!0),a.setFloat64(f+20,x[1],!0),s.setInt32(m,i/2),s.setInt32(m+4,10),m+=8,f+=l,i+=l})};Cg.extent=function(t){return t.reduce(function(e,n){return GC.enlarge(e,n)},GC.blank())};Cg.parts=function(e,n){return e.length};Cg.shxLength=function(t){return t.length*8};Cg.shpLength=function(t){return t.length*28};var Ig={},r_=Ly,WC=Rw;Ig.write=function(e,n,a,s,l){var i=0,f=0,m=100;e.forEach(y);function y(x,A){var w=$_(x),E=kM([x],l),L=w.length*16+48+(E-1)*4,k=w.reduce(function(D,B){return r_.enlarge(D,B)},r_.blank());s.setInt32(f,m/2),s.setInt32(f+4,L/2),f+=8,m+=L+8,a.setInt32(i,A+1),a.setInt32(i+4,L/2),a.setInt32(i+8,l,!0),a.setFloat64(i+12,k.xmin,!0),a.setFloat64(i+20,k.ymin,!0),a.setFloat64(i+28,k.xmax,!0),a.setFloat64(i+36,k.ymax,!0),a.setInt32(i+44,E,!0),a.setInt32(i+48,w.length,!0),a.setInt32(i+52,0,!0);for(var z=x.reduce(function(D,B){return Array.isArray(B[0][0])?D=D.concat(B):D.push(B),D},[]),F=1;F<E;F++)a.setInt32(i+52+F*4,z.reduce(function(D,B,U){return U<F?D+B.length:D},0),!0);w.forEach(function(B,U){a.setFloat64(i+56+U*16+(E-1)*4,B[0],!0),a.setFloat64(i+56+U*16+(E-1)*4+8,B[1],!0)}),i+=L+8}};Ig.shpLength=function(t){return t.length*56+$_(t).length*16};Ig.shxLength=function(t){return t.length*8};Ig.extent=function(t){return $_(t).reduce(function(e,n){return r_.enlarge(e,n)},r_.blank())};function kM(t,e){var n=1;return(e===WC.geometries.POLYGON||e===WC.geometries.POLYLINE)&&(n=t.reduce(function(a,s){return a+=s.length,Array.isArray(s[0][0][0])&&(a+=s.reduce(function(l,i){return l+i.length-1},0)),a},0)),n}Ig.parts=kM;function $_(t,e){return e===void 0&&(e=[]),typeof t[0][0]=="object"?t.reduce(function(n,a){return n.concat($_(a))},e):t}var oR=Rw,aR=MM,sR=PM,lR=Cg,ZC=Ig,uR={1:lR,5:ZC,3:ZC},LM=cR;function cR(t,e,n,a){var s=oR.geometries[e],l=uR[s],i=l.parts(n,s),f=100+(i-n.length)*4+l.shpLength(n),m=100+l.shxLength(n),y=new ArrayBuffer(f),x=new DataView(y),A=new ArrayBuffer(m),w=new DataView(A),E=l.extent(n);$C(x,s),$C(w,s),KC(E,x),KC(E,w),l.write(n,E,new DataView(y,100),new DataView(A,100),s),x.setInt32(24,f/2),w.setInt32(24,50+n.length*4);var L=aR.structure(t);a(null,{shp:x,shx:w,dbf:L,prj:sR})}function $C(t,e){t.setInt32(0,9994),t.setInt32(28,1e3,!0),t.setInt32(32,e,!0)}function KC(t,e){e.setFloat64(36,t.xmin,!0),e.setFloat64(44,t.ymin,!0),e.setFloat64(52,t.xmax,!0),e.setFloat64(60,t.ymax,!0)}var Eg={};Eg.point=Oy("Point","POINT");Eg.line=Oy("LineString","POLYLINE");Eg.multiline=Oy("MultiLineString","POLYLINE");Eg.polygon=Oy("Polygon","POLYGON");Eg.multipolygon=Oy("MultiPolygon","POLYGON");function Oy(t,e){return function(n){var a=n.features.filter(fR(t));return{geometries:e==="POLYLINE"?[a.map(qC)]:a.map(qC),properties:a.map(hR),type:e}}}function qC(t){return t.geometry.coordinates}function hR(t){return t.properties}function fR(t){return Array.isArray(t)?function(e){return t.includes(e.geometry.type)}:function(e){return e.geometry.type===t}}function g1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var OM={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(a,s,l){function i(y,x){if(!s[y]){if(!a[y]){var A=typeof g1=="function"&&g1;if(!x&&A)return A(y,!0);if(f)return f(y,!0);var w=new Error("Cannot find module '"+y+"'");throw w.code="MODULE_NOT_FOUND",w}var E=s[y]={exports:{}};a[y][0].call(E.exports,function(L){var k=a[y][1][L];return i(k||L)},E,E.exports,n,a,s,l)}return s[y].exports}for(var f=typeof g1=="function"&&g1,m=0;m<l.length;m++)i(l[m]);return i}({1:[function(n,a,s){var l=n("./utils"),i=n("./support"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(m){for(var y,x,A,w,E,L,k,z=[],F=0,D=m.length,B=D,U=l.getTypeOf(m)!=="string";F<m.length;)B=D-F,A=U?(y=m[F++],x=F<D?m[F++]:0,F<D?m[F++]:0):(y=m.charCodeAt(F++),x=F<D?m.charCodeAt(F++):0,F<D?m.charCodeAt(F++):0),w=y>>2,E=(3&y)<<4|x>>4,L=1<B?(15&x)<<2|A>>6:64,k=2<B?63&A:64,z.push(f.charAt(w)+f.charAt(E)+f.charAt(L)+f.charAt(k));return z.join("")},s.decode=function(m){var y,x,A,w,E,L,k=0,z=0,F="data:";if(m.substr(0,F.length)===F)throw new Error("Invalid base64 input, it looks like a data url.");var D,B=3*(m=m.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(m.charAt(m.length-1)===f.charAt(64)&&B--,m.charAt(m.length-2)===f.charAt(64)&&B--,B%1!=0)throw new Error("Invalid base64 input, bad content length.");for(D=i.uint8array?new Uint8Array(0|B):new Array(0|B);k<m.length;)y=f.indexOf(m.charAt(k++))<<2|(w=f.indexOf(m.charAt(k++)))>>4,x=(15&w)<<4|(E=f.indexOf(m.charAt(k++)))>>2,A=(3&E)<<6|(L=f.indexOf(m.charAt(k++))),D[z++]=y,E!==64&&(D[z++]=x),L!==64&&(D[z++]=A);return D}},{"./support":30,"./utils":32}],2:[function(n,a,s){var l=n("./external"),i=n("./stream/DataWorker"),f=n("./stream/Crc32Probe"),m=n("./stream/DataLengthProbe");function y(x,A,w,E,L){this.compressedSize=x,this.uncompressedSize=A,this.crc32=w,this.compression=E,this.compressedContent=L}y.prototype={getContentWorker:function(){var x=new i(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),A=this;return x.on("end",function(){if(this.streamInfo.data_length!==A.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),x},getCompressedWorker:function(){return new i(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(x,A,w){return x.pipe(new f).pipe(new m("uncompressedSize")).pipe(A.compressWorker(w)).pipe(new m("compressedSize")).withStreamInfo("compression",A)},a.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,a,s){var l=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,a,s){var l=n("./utils"),i=function(){for(var f,m=[],y=0;y<256;y++){f=y;for(var x=0;x<8;x++)f=1&f?3988292384^f>>>1:f>>>1;m[y]=f}return m}();a.exports=function(f,m){return f!==void 0&&f.length?l.getTypeOf(f)!=="string"?function(y,x,A,w){var E=i,L=w+A;y^=-1;for(var k=w;k<L;k++)y=y>>>8^E[255&(y^x[k])];return-1^y}(0|m,f,f.length,0):function(y,x,A,w){var E=i,L=w+A;y^=-1;for(var k=w;k<L;k++)y=y>>>8^E[255&(y^x.charCodeAt(k))];return-1^y}(0|m,f,f.length,0):0}},{"./utils":32}],5:[function(n,a,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,a,s){var l=null;l=typeof Promise<"u"?Promise:n("lie"),a.exports={Promise:l}},{lie:37}],7:[function(n,a,s){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=n("pako"),f=n("./utils"),m=n("./stream/GenericWorker"),y=l?"uint8array":"array";function x(A,w){m.call(this,"FlateWorker/"+A),this._pako=null,this._pakoAction=A,this._pakoOptions=w,this.meta={}}s.magic="\b\0",f.inherits(x,m),x.prototype.processChunk=function(A){this.meta=A.meta,this._pako===null&&this._createPako(),this._pako.push(f.transformTo(y,A.data),!1)},x.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},x.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},x.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var A=this;this._pako.onData=function(w){A.push({data:w,meta:A.meta})}},s.compressWorker=function(A){return new x("Deflate",A)},s.uncompressWorker=function(){return new x("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,a,s){function l(E,L){var k,z="";for(k=0;k<L;k++)z+=String.fromCharCode(255&E),E>>>=8;return z}function i(E,L,k,z,F,D){var B,U,$=E.file,q=E.compression,tt=D!==y.utf8encode,Y=f.transformTo("string",D($.name)),G=f.transformTo("string",y.utf8encode($.name)),rt=$.comment,pt=f.transformTo("string",D(rt)),Q=f.transformTo("string",y.utf8encode(rt)),ot=G.length!==$.name.length,Z=Q.length!==rt.length,Kt="",Ft="",Tt="",ie=$.dir,ue=$.date,je={crc32:0,compressedSize:0,uncompressedSize:0};L&&!k||(je.crc32=E.crc32,je.compressedSize=E.compressedSize,je.uncompressedSize=E.uncompressedSize);var jt=0;L&&(jt|=8),tt||!ot&&!Z||(jt|=2048);var Ut=0,xe=0;ie&&(Ut|=16),F==="UNIX"?(xe=798,Ut|=function(we,qe){var fe=we;return we||(fe=qe?16893:33204),(65535&fe)<<16}($.unixPermissions,ie)):(xe=20,Ut|=function(we){return 63&(we||0)}($.dosPermissions)),B=ue.getUTCHours(),B<<=6,B|=ue.getUTCMinutes(),B<<=5,B|=ue.getUTCSeconds()/2,U=ue.getUTCFullYear()-1980,U<<=4,U|=ue.getUTCMonth()+1,U<<=5,U|=ue.getUTCDate(),ot&&(Ft=l(1,1)+l(x(Y),4)+G,Kt+="up"+l(Ft.length,2)+Ft),Z&&(Tt=l(1,1)+l(x(pt),4)+Q,Kt+="uc"+l(Tt.length,2)+Tt);var Fe="";return Fe+=`
\0`,Fe+=l(jt,2),Fe+=q.magic,Fe+=l(B,2),Fe+=l(U,2),Fe+=l(je.crc32,4),Fe+=l(je.compressedSize,4),Fe+=l(je.uncompressedSize,4),Fe+=l(Y.length,2),Fe+=l(Kt.length,2),{fileRecord:A.LOCAL_FILE_HEADER+Fe+Y+Kt,dirRecord:A.CENTRAL_FILE_HEADER+l(xe,2)+Fe+l(pt.length,2)+"\0\0\0\0"+l(Ut,4)+l(z,4)+Y+Kt+pt}}var f=n("../utils"),m=n("../stream/GenericWorker"),y=n("../utf8"),x=n("../crc32"),A=n("../signature");function w(E,L,k,z){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=L,this.zipPlatform=k,this.encodeFileName=z,this.streamFiles=E,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}f.inherits(w,m),w.prototype.push=function(E){var L=E.meta.percent||0,k=this.entriesCount,z=this._sources.length;this.accumulate?this.contentBuffer.push(E):(this.bytesWritten+=E.data.length,m.prototype.push.call(this,{data:E.data,meta:{currentFile:this.currentFile,percent:k?(L+100*(k-z-1))/k:100}}))},w.prototype.openedSource=function(E){this.currentSourceOffset=this.bytesWritten,this.currentFile=E.file.name;var L=this.streamFiles&&!E.file.dir;if(L){var k=i(E,L,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:k.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(E){this.accumulate=!1;var L=this.streamFiles&&!E.file.dir,k=i(E,L,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(k.dirRecord),L)this.push({data:function(z){return A.DATA_DESCRIPTOR+l(z.crc32,4)+l(z.compressedSize,4)+l(z.uncompressedSize,4)}(E),meta:{percent:100}});else for(this.push({data:k.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var E=this.bytesWritten,L=0;L<this.dirRecords.length;L++)this.push({data:this.dirRecords[L],meta:{percent:100}});var k=this.bytesWritten-E,z=function(F,D,B,U,$){var q=f.transformTo("string",$(U));return A.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(F,2)+l(F,2)+l(D,4)+l(B,4)+l(q.length,2)+q}(this.dirRecords.length,k,E,this.zipComment,this.encodeFileName);this.push({data:z,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(E){this._sources.push(E);var L=this;return E.on("data",function(k){L.processChunk(k)}),E.on("end",function(){L.closedSource(L.previous.streamInfo),L._sources.length?L.prepareNextSource():L.end()}),E.on("error",function(k){L.error(k)}),this},w.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(E){var L=this._sources;if(!m.prototype.error.call(this,E))return!1;for(var k=0;k<L.length;k++)try{L[k].error(E)}catch{}return!0},w.prototype.lock=function(){m.prototype.lock.call(this);for(var E=this._sources,L=0;L<E.length;L++)E[L].lock()},a.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,a,s){var l=n("../compressions"),i=n("./ZipFileWorker");s.generateWorker=function(f,m,y){var x=new i(m.streamFiles,y,m.platform,m.encodeFileName),A=0;try{f.forEach(function(w,E){A++;var L=function(D,B){var U=D||B,$=l[U];if(!$)throw new Error(U+" is not a valid compression method !");return $}(E.options.compression,m.compression),k=E.options.compressionOptions||m.compressionOptions||{},z=E.dir,F=E.date;E._compressWorker(L,k).withStreamInfo("file",{name:w,dir:z,date:F,comment:E.comment||"",unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions}).pipe(x)}),x.entriesCount=A}catch(w){x.error(w)}return x}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,a,s){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new l;for(var f in this)typeof this[f]!="function"&&(i[f]=this[f]);return i}}(l.prototype=n("./object")).loadAsync=n("./load"),l.support=n("./support"),l.defaults=n("./defaults"),l.version="3.10.1",l.loadAsync=function(i,f){return new l().loadAsync(i,f)},l.external=n("./external"),a.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,a,s){var l=n("./utils"),i=n("./external"),f=n("./utf8"),m=n("./zipEntries"),y=n("./stream/Crc32Probe"),x=n("./nodejsUtils");function A(w){return new i.Promise(function(E,L){var k=w.decompressed.getContentWorker().pipe(new y);k.on("error",function(z){L(z)}).on("end",function(){k.streamInfo.crc32!==w.decompressed.crc32?L(new Error("Corrupted zip : CRC32 mismatch")):E()}).resume()})}a.exports=function(w,E){var L=this;return E=l.extend(E||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:f.utf8decode}),x.isNode&&x.isStream(w)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",w,!0,E.optimizedBinaryString,E.base64).then(function(k){var z=new m(E);return z.load(k),z}).then(function(k){var z=[i.Promise.resolve(k)],F=k.files;if(E.checkCRC32)for(var D=0;D<F.length;D++)z.push(A(F[D]));return i.Promise.all(z)}).then(function(k){for(var z=k.shift(),F=z.files,D=0;D<F.length;D++){var B=F[D],U=B.fileNameStr,$=l.resolve(B.fileNameStr);L.file($,B.decompressed,{binary:!0,optimizedBinaryString:!0,date:B.date,dir:B.dir,comment:B.fileCommentStr.length?B.fileCommentStr:null,unixPermissions:B.unixPermissions,dosPermissions:B.dosPermissions,createFolders:E.createFolders}),B.dir||(L.file($).unsafeOriginalName=U)}return z.zipComment.length&&(L.comment=z.zipComment),L})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,a,s){var l=n("../utils"),i=n("../stream/GenericWorker");function f(m,y){i.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(y)}l.inherits(f,i),f.prototype._bindStream=function(m){var y=this;(this._stream=m).pause(),m.on("data",function(x){y.push({data:x,meta:{percent:0}})}).on("error",function(x){y.isPaused?this.generatedError=x:y.error(x)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},f.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},f.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=f},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,a,s){var l=n("readable-stream").Readable;function i(f,m,y){l.call(this,m),this._helper=f;var x=this;f.on("data",function(A,w){x.push(A)||x._helper.pause(),y&&y(w)}).on("error",function(A){x.emit("error",A)}).on("end",function(){x.push(null)})}n("../utils").inherits(i,l),i.prototype._read=function(){this._helper.resume()},a.exports=i},{"../utils":32,"readable-stream":16}],14:[function(n,a,s){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,i);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,i)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var i=new Buffer(l);return i.fill(0),i},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(n,a,s){function l($,q,tt){var Y,G=f.getTypeOf(q),rt=f.extend(tt||{},x);rt.date=rt.date||new Date,rt.compression!==null&&(rt.compression=rt.compression.toUpperCase()),typeof rt.unixPermissions=="string"&&(rt.unixPermissions=parseInt(rt.unixPermissions,8)),rt.unixPermissions&&16384&rt.unixPermissions&&(rt.dir=!0),rt.dosPermissions&&16&rt.dosPermissions&&(rt.dir=!0),rt.dir&&($=F($)),rt.createFolders&&(Y=z($))&&D.call(this,Y,!0);var pt=G==="string"&&rt.binary===!1&&rt.base64===!1;tt&&tt.binary!==void 0||(rt.binary=!pt),(q instanceof A&&q.uncompressedSize===0||rt.dir||!q||q.length===0)&&(rt.base64=!1,rt.binary=!0,q="",rt.compression="STORE",G="string");var Q=null;Q=q instanceof A||q instanceof m?q:L.isNode&&L.isStream(q)?new k($,q):f.prepareContent($,q,rt.binary,rt.optimizedBinaryString,rt.base64);var ot=new w($,Q,rt);this.files[$]=ot}var i=n("./utf8"),f=n("./utils"),m=n("./stream/GenericWorker"),y=n("./stream/StreamHelper"),x=n("./defaults"),A=n("./compressedObject"),w=n("./zipObject"),E=n("./generate"),L=n("./nodejsUtils"),k=n("./nodejs/NodejsStreamInputAdapter"),z=function($){$.slice(-1)==="/"&&($=$.substring(0,$.length-1));var q=$.lastIndexOf("/");return 0<q?$.substring(0,q):""},F=function($){return $.slice(-1)!=="/"&&($+="/"),$},D=function($,q){return q=q!==void 0?q:x.createFolders,$=F($),this.files[$]||l.call(this,$,null,{dir:!0,createFolders:q}),this.files[$]};function B($){return Object.prototype.toString.call($)==="[object RegExp]"}var U={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function($){var q,tt,Y;for(q in this.files)Y=this.files[q],(tt=q.slice(this.root.length,q.length))&&q.slice(0,this.root.length)===this.root&&$(tt,Y)},filter:function($){var q=[];return this.forEach(function(tt,Y){$(tt,Y)&&q.push(Y)}),q},file:function($,q,tt){if(arguments.length!==1)return $=this.root+$,l.call(this,$,q,tt),this;if(B($)){var Y=$;return this.filter(function(rt,pt){return!pt.dir&&Y.test(rt)})}var G=this.files[this.root+$];return G&&!G.dir?G:null},folder:function($){if(!$)return this;if(B($))return this.filter(function(G,rt){return rt.dir&&$.test(G)});var q=this.root+$,tt=D.call(this,q),Y=this.clone();return Y.root=tt.name,Y},remove:function($){$=this.root+$;var q=this.files[$];if(q||($.slice(-1)!=="/"&&($+="/"),q=this.files[$]),q&&!q.dir)delete this.files[$];else for(var tt=this.filter(function(G,rt){return rt.name.slice(0,$.length)===$}),Y=0;Y<tt.length;Y++)delete this.files[tt[Y].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function($){var q,tt={};try{if((tt=f.extend($||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=tt.type.toLowerCase(),tt.compression=tt.compression.toUpperCase(),tt.type==="binarystring"&&(tt.type="string"),!tt.type)throw new Error("No output type specified.");f.checkSupport(tt.type),tt.platform!=="darwin"&&tt.platform!=="freebsd"&&tt.platform!=="linux"&&tt.platform!=="sunos"||(tt.platform="UNIX"),tt.platform==="win32"&&(tt.platform="DOS");var Y=tt.comment||this.comment||"";q=E.generateWorker(this,tt,Y)}catch(G){(q=new m("error")).error(G)}return new y(q,tt.type||"string",tt.mimeType)},generateAsync:function($,q){return this.generateInternalStream($).accumulate(q)},generateNodeStream:function($,q){return($=$||{}).type||($.type="nodebuffer"),this.generateInternalStream($).toNodejsStream(q)}};a.exports=U},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,a,s){a.exports=n("stream")},{stream:void 0}],17:[function(n,a,s){var l=n("./DataReader");function i(f){l.call(this,f);for(var m=0;m<this.data.length;m++)f[m]=255&f[m]}n("../utils").inherits(i,l),i.prototype.byteAt=function(f){return this.data[this.zero+f]},i.prototype.lastIndexOfSignature=function(f){for(var m=f.charCodeAt(0),y=f.charCodeAt(1),x=f.charCodeAt(2),A=f.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===m&&this.data[w+1]===y&&this.data[w+2]===x&&this.data[w+3]===A)return w-this.zero;return-1},i.prototype.readAndCheckSignature=function(f){var m=f.charCodeAt(0),y=f.charCodeAt(1),x=f.charCodeAt(2),A=f.charCodeAt(3),w=this.readData(4);return m===w[0]&&y===w[1]&&x===w[2]&&A===w[3]},i.prototype.readData=function(f){if(this.checkOffset(f),f===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,m},a.exports=i},{"../utils":32,"./DataReader":18}],18:[function(n,a,s){var l=n("../utils");function i(f){this.data=f,this.length=f.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(f){this.checkIndex(this.index+f)},checkIndex:function(f){if(this.length<this.zero+f||f<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+f+"). Corrupted zip ?")},setIndex:function(f){this.checkIndex(f),this.index=f},skip:function(f){this.setIndex(this.index+f)},byteAt:function(){},readInt:function(f){var m,y=0;for(this.checkOffset(f),m=this.index+f-1;m>=this.index;m--)y=(y<<8)+this.byteAt(m);return this.index+=f,y},readString:function(f){return l.transformTo("string",this.readData(f))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var f=this.readInt(4);return new Date(Date.UTC(1980+(f>>25&127),(f>>21&15)-1,f>>16&31,f>>11&31,f>>5&63,(31&f)<<1))}},a.exports=i},{"../utils":32}],19:[function(n,a,s){var l=n("./Uint8ArrayReader");function i(f){l.call(this,f)}n("../utils").inherits(i,l),i.prototype.readData=function(f){this.checkOffset(f);var m=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,m},a.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,a,s){var l=n("./DataReader");function i(f){l.call(this,f)}n("../utils").inherits(i,l),i.prototype.byteAt=function(f){return this.data.charCodeAt(this.zero+f)},i.prototype.lastIndexOfSignature=function(f){return this.data.lastIndexOf(f)-this.zero},i.prototype.readAndCheckSignature=function(f){return f===this.readData(4)},i.prototype.readData=function(f){this.checkOffset(f);var m=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,m},a.exports=i},{"../utils":32,"./DataReader":18}],21:[function(n,a,s){var l=n("./ArrayReader");function i(f){l.call(this,f)}n("../utils").inherits(i,l),i.prototype.readData=function(f){if(this.checkOffset(f),f===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+f);return this.index+=f,m},a.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(n,a,s){var l=n("../utils"),i=n("../support"),f=n("./ArrayReader"),m=n("./StringReader"),y=n("./NodeBufferReader"),x=n("./Uint8ArrayReader");a.exports=function(A){var w=l.getTypeOf(A);return l.checkSupport(w),w!=="string"||i.uint8array?w==="nodebuffer"?new y(A):i.uint8array?new x(l.transformTo("uint8array",A)):new f(l.transformTo("array",A)):new m(A)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,a,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,a,s){var l=n("./GenericWorker"),i=n("../utils");function f(m){l.call(this,"ConvertWorker to "+m),this.destType=m}i.inherits(f,l),f.prototype.processChunk=function(m){this.push({data:i.transformTo(this.destType,m.data),meta:m.meta})},a.exports=f},{"../utils":32,"./GenericWorker":28}],25:[function(n,a,s){var l=n("./GenericWorker"),i=n("../crc32");function f(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(f,l),f.prototype.processChunk=function(m){this.streamInfo.crc32=i(m.data,this.streamInfo.crc32||0),this.push(m)},a.exports=f},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,a,s){var l=n("../utils"),i=n("./GenericWorker");function f(m){i.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}l.inherits(f,i),f.prototype.processChunk=function(m){if(m){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+m.data.length}i.prototype.processChunk.call(this,m)},a.exports=f},{"../utils":32,"./GenericWorker":28}],27:[function(n,a,s){var l=n("../utils"),i=n("./GenericWorker");function f(m){i.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(x){y.dataIsReady=!0,y.data=x,y.max=x&&x.length||0,y.type=l.getTypeOf(x),y.isPaused||y._tickAndRepeat()},function(x){y.error(x)})}l.inherits(f,i),f.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},f.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},f.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},f.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,y);break;case"uint8array":m=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":m=this.data.slice(this.index,y)}return this.index=y,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=f},{"../utils":32,"./GenericWorker":28}],28:[function(n,a,s){function l(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,f){return this._listeners[i].push(f),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,f){if(this._listeners[i])for(var m=0;m<this._listeners[i].length;m++)this._listeners[i][m].call(this,f)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var f=this;return i.on("data",function(m){f.processChunk(m)}),i.on("end",function(){f.end()}),i.on("error",function(m){f.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,f){return this.extraStreamInfo[i]=f,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},a.exports=l},{}],29:[function(n,a,s){var l=n("../utils"),i=n("./ConvertWorker"),f=n("./GenericWorker"),m=n("../base64"),y=n("../support"),x=n("../external"),A=null;if(y.nodestream)try{A=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(L,k){return new x.Promise(function(z,F){var D=[],B=L._internalType,U=L._outputType,$=L._mimeType;L.on("data",function(q,tt){D.push(q),k&&k(tt)}).on("error",function(q){D=[],F(q)}).on("end",function(){try{var q=function(tt,Y,G){switch(tt){case"blob":return l.newBlob(l.transformTo("arraybuffer",Y),G);case"base64":return m.encode(Y);default:return l.transformTo(tt,Y)}}(U,function(tt,Y){var G,rt=0,pt=null,Q=0;for(G=0;G<Y.length;G++)Q+=Y[G].length;switch(tt){case"string":return Y.join("");case"array":return Array.prototype.concat.apply([],Y);case"uint8array":for(pt=new Uint8Array(Q),G=0;G<Y.length;G++)pt.set(Y[G],rt),rt+=Y[G].length;return pt;case"nodebuffer":return Buffer.concat(Y);default:throw new Error("concat : unsupported type '"+tt+"'")}}(B,D),$);z(q)}catch(tt){F(tt)}D=[]}).resume()})}function E(L,k,z){var F=k;switch(k){case"blob":case"arraybuffer":F="uint8array";break;case"base64":F="string"}try{this._internalType=F,this._outputType=k,this._mimeType=z,l.checkSupport(F),this._worker=L.pipe(new i(F)),L.lock()}catch(D){this._worker=new f("error"),this._worker.error(D)}}E.prototype={accumulate:function(L){return w(this,L)},on:function(L,k){var z=this;return L==="data"?this._worker.on(L,function(F){k.call(z,F.data,F.meta)}):this._worker.on(L,function(){l.delay(k,arguments,z)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(L){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new A(this,{objectMode:this._outputType!=="nodebuffer"},L)}},a.exports=E},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,a,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var l=new ArrayBuffer(0);try{s.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(l),s.blob=i.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,a,s){for(var l=n("./utils"),i=n("./support"),f=n("./nodejsUtils"),m=n("./stream/GenericWorker"),y=new Array(256),x=0;x<256;x++)y[x]=252<=x?6:248<=x?5:240<=x?4:224<=x?3:192<=x?2:1;y[254]=y[254]=1;function A(){m.call(this,"utf-8 decode"),this.leftOver=null}function w(){m.call(this,"utf-8 encode")}s.utf8encode=function(E){return i.nodebuffer?f.newBufferFrom(E,"utf-8"):function(L){var k,z,F,D,B,U=L.length,$=0;for(D=0;D<U;D++)(64512&(z=L.charCodeAt(D)))==55296&&D+1<U&&(64512&(F=L.charCodeAt(D+1)))==56320&&(z=65536+(z-55296<<10)+(F-56320),D++),$+=z<128?1:z<2048?2:z<65536?3:4;for(k=i.uint8array?new Uint8Array($):new Array($),D=B=0;B<$;D++)(64512&(z=L.charCodeAt(D)))==55296&&D+1<U&&(64512&(F=L.charCodeAt(D+1)))==56320&&(z=65536+(z-55296<<10)+(F-56320),D++),z<128?k[B++]=z:(z<2048?k[B++]=192|z>>>6:(z<65536?k[B++]=224|z>>>12:(k[B++]=240|z>>>18,k[B++]=128|z>>>12&63),k[B++]=128|z>>>6&63),k[B++]=128|63&z);return k}(E)},s.utf8decode=function(E){return i.nodebuffer?l.transformTo("nodebuffer",E).toString("utf-8"):function(L){var k,z,F,D,B=L.length,U=new Array(2*B);for(k=z=0;k<B;)if((F=L[k++])<128)U[z++]=F;else if(4<(D=y[F]))U[z++]=65533,k+=D-1;else{for(F&=D===2?31:D===3?15:7;1<D&&k<B;)F=F<<6|63&L[k++],D--;1<D?U[z++]=65533:F<65536?U[z++]=F:(F-=65536,U[z++]=55296|F>>10&1023,U[z++]=56320|1023&F)}return U.length!==z&&(U.subarray?U=U.subarray(0,z):U.length=z),l.applyFromCharCode(U)}(E=l.transformTo(i.uint8array?"uint8array":"array",E))},l.inherits(A,m),A.prototype.processChunk=function(E){var L=l.transformTo(i.uint8array?"uint8array":"array",E.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var k=L;(L=new Uint8Array(k.length+this.leftOver.length)).set(this.leftOver,0),L.set(k,this.leftOver.length)}else L=this.leftOver.concat(L);this.leftOver=null}var z=function(D,B){var U;for((B=B||D.length)>D.length&&(B=D.length),U=B-1;0<=U&&(192&D[U])==128;)U--;return U<0||U===0?B:U+y[D[U]]>B?U:B}(L),F=L;z!==L.length&&(i.uint8array?(F=L.subarray(0,z),this.leftOver=L.subarray(z,L.length)):(F=L.slice(0,z),this.leftOver=L.slice(z,L.length))),this.push({data:s.utf8decode(F),meta:E.meta})},A.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=A,l.inherits(w,m),w.prototype.processChunk=function(E){this.push({data:s.utf8encode(E.data),meta:E.meta})},s.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,a,s){var l=n("./support"),i=n("./base64"),f=n("./nodejsUtils"),m=n("./external");function y(k){return k}function x(k,z){for(var F=0;F<k.length;++F)z[F]=255&k.charCodeAt(F);return z}n("setimmediate"),s.newBlob=function(k,z){s.checkSupport("blob");try{return new Blob([k],{type:z})}catch{try{var F=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return F.append(k),F.getBlob(z)}catch{throw new Error("Bug : can't construct the Blob.")}}};var A={stringifyByChunk:function(k,z,F){var D=[],B=0,U=k.length;if(U<=F)return String.fromCharCode.apply(null,k);for(;B<U;)z==="array"||z==="nodebuffer"?D.push(String.fromCharCode.apply(null,k.slice(B,Math.min(B+F,U)))):D.push(String.fromCharCode.apply(null,k.subarray(B,Math.min(B+F,U)))),B+=F;return D.join("")},stringifyByChar:function(k){for(var z="",F=0;F<k.length;F++)z+=String.fromCharCode(k[F]);return z},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,f.allocBuffer(1)).length===1}catch{return!1}}()}};function w(k){var z=65536,F=s.getTypeOf(k),D=!0;if(F==="uint8array"?D=A.applyCanBeUsed.uint8array:F==="nodebuffer"&&(D=A.applyCanBeUsed.nodebuffer),D)for(;1<z;)try{return A.stringifyByChunk(k,F,z)}catch{z=Math.floor(z/2)}return A.stringifyByChar(k)}function E(k,z){for(var F=0;F<k.length;F++)z[F]=k[F];return z}s.applyFromCharCode=w;var L={};L.string={string:y,array:function(k){return x(k,new Array(k.length))},arraybuffer:function(k){return L.string.uint8array(k).buffer},uint8array:function(k){return x(k,new Uint8Array(k.length))},nodebuffer:function(k){return x(k,f.allocBuffer(k.length))}},L.array={string:w,array:y,arraybuffer:function(k){return new Uint8Array(k).buffer},uint8array:function(k){return new Uint8Array(k)},nodebuffer:function(k){return f.newBufferFrom(k)}},L.arraybuffer={string:function(k){return w(new Uint8Array(k))},array:function(k){return E(new Uint8Array(k),new Array(k.byteLength))},arraybuffer:y,uint8array:function(k){return new Uint8Array(k)},nodebuffer:function(k){return f.newBufferFrom(new Uint8Array(k))}},L.uint8array={string:w,array:function(k){return E(k,new Array(k.length))},arraybuffer:function(k){return k.buffer},uint8array:y,nodebuffer:function(k){return f.newBufferFrom(k)}},L.nodebuffer={string:w,array:function(k){return E(k,new Array(k.length))},arraybuffer:function(k){return L.nodebuffer.uint8array(k).buffer},uint8array:function(k){return E(k,new Uint8Array(k.length))},nodebuffer:y},s.transformTo=function(k,z){if(z=z||"",!k)return z;s.checkSupport(k);var F=s.getTypeOf(z);return L[F][k](z)},s.resolve=function(k){for(var z=k.split("/"),F=[],D=0;D<z.length;D++){var B=z[D];B==="."||B===""&&D!==0&&D!==z.length-1||(B===".."?F.pop():F.push(B))}return F.join("/")},s.getTypeOf=function(k){return typeof k=="string"?"string":Object.prototype.toString.call(k)==="[object Array]"?"array":l.nodebuffer&&f.isBuffer(k)?"nodebuffer":l.uint8array&&k instanceof Uint8Array?"uint8array":l.arraybuffer&&k instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(k){if(!l[k.toLowerCase()])throw new Error(k+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(k){var z,F,D="";for(F=0;F<(k||"").length;F++)D+="\\x"+((z=k.charCodeAt(F))<16?"0":"")+z.toString(16).toUpperCase();return D},s.delay=function(k,z,F){setImmediate(function(){k.apply(F||null,z||[])})},s.inherits=function(k,z){function F(){}F.prototype=z.prototype,k.prototype=new F},s.extend=function(){var k,z,F={};for(k=0;k<arguments.length;k++)for(z in arguments[k])Object.prototype.hasOwnProperty.call(arguments[k],z)&&F[z]===void 0&&(F[z]=arguments[k][z]);return F},s.prepareContent=function(k,z,F,D,B){return m.Promise.resolve(z).then(function(U){return l.blob&&(U instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(U))!==-1)&&typeof FileReader<"u"?new m.Promise(function($,q){var tt=new FileReader;tt.onload=function(Y){$(Y.target.result)},tt.onerror=function(Y){q(Y.target.error)},tt.readAsArrayBuffer(U)}):U}).then(function(U){var $=s.getTypeOf(U);return $?($==="arraybuffer"?U=s.transformTo("uint8array",U):$==="string"&&(B?U=i.decode(U):F&&D!==!0&&(U=function(q){return x(q,l.uint8array?new Uint8Array(q.length):new Array(q.length))}(U))),U):m.Promise.reject(new Error("Can't read the data of '"+k+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,a,s){var l=n("./reader/readerFor"),i=n("./utils"),f=n("./signature"),m=n("./zipEntry"),y=n("./support");function x(A){this.files=[],this.loadOptions=A}x.prototype={checkSignature:function(A){if(!this.reader.readAndCheckSignature(A)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(w)+", expected "+i.pretty(A)+")")}},isSignature:function(A,w){var E=this.reader.index;this.reader.setIndex(A);var L=this.reader.readString(4)===w;return this.reader.setIndex(E),L},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var A=this.reader.readData(this.zipCommentLength),w=y.uint8array?"uint8array":"array",E=i.transformTo(w,A);this.zipComment=this.loadOptions.decodeFileName(E)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var A,w,E,L=this.zip64EndOfCentralSize-44;0<L;)A=this.reader.readInt(2),w=this.reader.readInt(4),E=this.reader.readData(w),this.zip64ExtensibleData[A]={id:A,length:w,value:E}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var A,w;for(A=0;A<this.files.length;A++)w=this.files[A],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(f.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var A;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(f.CENTRAL_FILE_HEADER);)(A=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(A);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var A=this.reader.lastIndexOfSignature(f.CENTRAL_DIRECTORY_END);if(A<0)throw this.isSignature(0,f.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(A);var w=A;if(this.checkSignature(f.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(A=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(A),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,f.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var E=this.centralDirOffset+this.centralDirSize;this.zip64&&(E+=20,E+=12+this.zip64EndOfCentralSize);var L=w-E;if(0<L)this.isSignature(w,f.CENTRAL_FILE_HEADER)||(this.reader.zero=L);else if(L<0)throw new Error("Corrupted zip: missing "+Math.abs(L)+" bytes.")},prepareReader:function(A){this.reader=l(A)},load:function(A){this.prepareReader(A),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=x},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,a,s){var l=n("./reader/readerFor"),i=n("./utils"),f=n("./compressedObject"),m=n("./crc32"),y=n("./utf8"),x=n("./compressions"),A=n("./support");function w(E,L){this.options=E,this.loadOptions=L}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(E){var L,k;if(E.skip(22),this.fileNameLength=E.readInt(2),k=E.readInt(2),this.fileName=E.readData(this.fileNameLength),E.skip(k),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((L=function(z){for(var F in x)if(Object.prototype.hasOwnProperty.call(x,F)&&x[F].magic===z)return x[F];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new f(this.compressedSize,this.uncompressedSize,this.crc32,L,E.readData(this.compressedSize))},readCentralPart:function(E){this.versionMadeBy=E.readInt(2),E.skip(2),this.bitFlag=E.readInt(2),this.compressionMethod=E.readString(2),this.date=E.readDate(),this.crc32=E.readInt(4),this.compressedSize=E.readInt(4),this.uncompressedSize=E.readInt(4);var L=E.readInt(2);if(this.extraFieldsLength=E.readInt(2),this.fileCommentLength=E.readInt(2),this.diskNumberStart=E.readInt(2),this.internalFileAttributes=E.readInt(2),this.externalFileAttributes=E.readInt(4),this.localHeaderOffset=E.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");E.skip(L),this.readExtraFields(E),this.parseZIP64ExtraField(E),this.fileComment=E.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var E=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),E==0&&(this.dosPermissions=63&this.externalFileAttributes),E==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var E=l(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=E.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=E.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=E.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=E.readInt(4))}},readExtraFields:function(E){var L,k,z,F=E.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});E.index+4<F;)L=E.readInt(2),k=E.readInt(2),z=E.readData(k),this.extraFields[L]={id:L,length:k,value:z};E.setIndex(F)},handleUTF8:function(){var E=A.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var L=this.findExtraFieldUnicodePath();if(L!==null)this.fileNameStr=L;else{var k=i.transformTo(E,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(k)}var z=this.findExtraFieldUnicodeComment();if(z!==null)this.fileCommentStr=z;else{var F=i.transformTo(E,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(F)}}},findExtraFieldUnicodePath:function(){var E=this.extraFields[28789];if(E){var L=l(E.value);return L.readInt(1)!==1||m(this.fileName)!==L.readInt(4)?null:y.utf8decode(L.readData(E.length-5))}return null},findExtraFieldUnicodeComment:function(){var E=this.extraFields[25461];if(E){var L=l(E.value);return L.readInt(1)!==1||m(this.fileComment)!==L.readInt(4)?null:y.utf8decode(L.readData(E.length-5))}return null}},a.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,a,s){function l(L,k,z){this.name=L,this.dir=z.dir,this.date=z.date,this.comment=z.comment,this.unixPermissions=z.unixPermissions,this.dosPermissions=z.dosPermissions,this._data=k,this._dataBinary=z.binary,this.options={compression:z.compression,compressionOptions:z.compressionOptions}}var i=n("./stream/StreamHelper"),f=n("./stream/DataWorker"),m=n("./utf8"),y=n("./compressedObject"),x=n("./stream/GenericWorker");l.prototype={internalStream:function(L){var k=null,z="string";try{if(!L)throw new Error("No output type specified.");var F=(z=L.toLowerCase())==="string"||z==="text";z!=="binarystring"&&z!=="text"||(z="string"),k=this._decompressWorker();var D=!this._dataBinary;D&&!F&&(k=k.pipe(new m.Utf8EncodeWorker)),!D&&F&&(k=k.pipe(new m.Utf8DecodeWorker))}catch(B){(k=new x("error")).error(B)}return new i(k,z,"")},async:function(L,k){return this.internalStream(L).accumulate(k)},nodeStream:function(L,k){return this.internalStream(L||"nodebuffer").toNodejsStream(k)},_compressWorker:function(L,k){if(this._data instanceof y&&this._data.compression.magic===L.magic)return this._data.getCompressedWorker();var z=this._decompressWorker();return this._dataBinary||(z=z.pipe(new m.Utf8EncodeWorker)),y.createWorkerFrom(z,L,k)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof x?this._data:new f(this._data)}};for(var A=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},E=0;E<A.length;E++)l.prototype[A[E]]=w;a.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,a,s){(function(l){var i,f,m=l.MutationObserver||l.WebKitMutationObserver;if(m){var y=0,x=new m(L),A=l.document.createTextNode("");x.observe(A,{characterData:!0}),i=function(){A.data=y=++y%2}}else if(l.setImmediate||l.MessageChannel===void 0)i="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var k=l.document.createElement("script");k.onreadystatechange=function(){L(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},l.document.documentElement.appendChild(k)}:function(){setTimeout(L,0)};else{var w=new l.MessageChannel;w.port1.onmessage=L,i=function(){w.port2.postMessage(0)}}var E=[];function L(){var k,z;f=!0;for(var F=E.length;F;){for(z=E,E=[],k=-1;++k<F;)z[k]();F=E.length}f=!1}a.exports=function(k){E.push(k)!==1||f||i()}}).call(this,typeof ca<"u"?ca:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,a,s){var l=n("immediate");function i(){}var f={},m=["REJECTED"],y=["FULFILLED"],x=["PENDING"];function A(F){if(typeof F!="function")throw new TypeError("resolver must be a function");this.state=x,this.queue=[],this.outcome=void 0,F!==i&&k(this,F)}function w(F,D,B){this.promise=F,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof B=="function"&&(this.onRejected=B,this.callRejected=this.otherCallRejected)}function E(F,D,B){l(function(){var U;try{U=D(B)}catch($){return f.reject(F,$)}U===F?f.reject(F,new TypeError("Cannot resolve promise with itself")):f.resolve(F,U)})}function L(F){var D=F&&F.then;if(F&&(typeof F=="object"||typeof F=="function")&&typeof D=="function")return function(){D.apply(F,arguments)}}function k(F,D){var B=!1;function U(tt){B||(B=!0,f.reject(F,tt))}function $(tt){B||(B=!0,f.resolve(F,tt))}var q=z(function(){D($,U)});q.status==="error"&&U(q.value)}function z(F,D){var B={};try{B.value=F(D),B.status="success"}catch(U){B.status="error",B.value=U}return B}(a.exports=A).prototype.finally=function(F){if(typeof F!="function")return this;var D=this.constructor;return this.then(function(B){return D.resolve(F()).then(function(){return B})},function(B){return D.resolve(F()).then(function(){throw B})})},A.prototype.catch=function(F){return this.then(null,F)},A.prototype.then=function(F,D){if(typeof F!="function"&&this.state===y||typeof D!="function"&&this.state===m)return this;var B=new this.constructor(i);return this.state!==x?E(B,this.state===y?F:D,this.outcome):this.queue.push(new w(B,F,D)),B},w.prototype.callFulfilled=function(F){f.resolve(this.promise,F)},w.prototype.otherCallFulfilled=function(F){E(this.promise,this.onFulfilled,F)},w.prototype.callRejected=function(F){f.reject(this.promise,F)},w.prototype.otherCallRejected=function(F){E(this.promise,this.onRejected,F)},f.resolve=function(F,D){var B=z(L,D);if(B.status==="error")return f.reject(F,B.value);var U=B.value;if(U)k(F,U);else{F.state=y,F.outcome=D;for(var $=-1,q=F.queue.length;++$<q;)F.queue[$].callFulfilled(D)}return F},f.reject=function(F,D){F.state=m,F.outcome=D;for(var B=-1,U=F.queue.length;++B<U;)F.queue[B].callRejected(D);return F},A.resolve=function(F){return F instanceof this?F:f.resolve(new this(i),F)},A.reject=function(F){var D=new this(i);return f.reject(D,F)},A.all=function(F){var D=this;if(Object.prototype.toString.call(F)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=F.length,U=!1;if(!B)return this.resolve([]);for(var $=new Array(B),q=0,tt=-1,Y=new this(i);++tt<B;)G(F[tt],tt);return Y;function G(rt,pt){D.resolve(rt).then(function(Q){$[pt]=Q,++q!==B||U||(U=!0,f.resolve(Y,$))},function(Q){U||(U=!0,f.reject(Y,Q))})}},A.race=function(F){var D=this;if(Object.prototype.toString.call(F)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=F.length,U=!1;if(!B)return this.resolve([]);for(var $=-1,q=new this(i);++$<B;)tt=F[$],D.resolve(tt).then(function(Y){U||(U=!0,f.resolve(q,Y))},function(Y){U||(U=!0,f.reject(q,Y))});var tt;return q}},{immediate:36}],38:[function(n,a,s){var l={};(0,n("./lib/utils/common").assign)(l,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),a.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,a,s){var l=n("./zlib/deflate"),i=n("./utils/common"),f=n("./utils/strings"),m=n("./zlib/messages"),y=n("./zlib/zstream"),x=Object.prototype.toString,A=0,w=-1,E=0,L=8;function k(F){if(!(this instanceof k))return new k(F);this.options=i.assign({level:w,method:L,chunkSize:16384,windowBits:15,memLevel:8,strategy:E,to:""},F||{});var D=this.options;D.raw&&0<D.windowBits?D.windowBits=-D.windowBits:D.gzip&&0<D.windowBits&&D.windowBits<16&&(D.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var B=l.deflateInit2(this.strm,D.level,D.method,D.windowBits,D.memLevel,D.strategy);if(B!==A)throw new Error(m[B]);if(D.header&&l.deflateSetHeader(this.strm,D.header),D.dictionary){var U;if(U=typeof D.dictionary=="string"?f.string2buf(D.dictionary):x.call(D.dictionary)==="[object ArrayBuffer]"?new Uint8Array(D.dictionary):D.dictionary,(B=l.deflateSetDictionary(this.strm,U))!==A)throw new Error(m[B]);this._dict_set=!0}}function z(F,D){var B=new k(D);if(B.push(F,!0),B.err)throw B.msg||m[B.err];return B.result}k.prototype.push=function(F,D){var B,U,$=this.strm,q=this.options.chunkSize;if(this.ended)return!1;U=D===~~D?D:D===!0?4:0,typeof F=="string"?$.input=f.string2buf(F):x.call(F)==="[object ArrayBuffer]"?$.input=new Uint8Array(F):$.input=F,$.next_in=0,$.avail_in=$.input.length;do{if($.avail_out===0&&($.output=new i.Buf8(q),$.next_out=0,$.avail_out=q),(B=l.deflate($,U))!==1&&B!==A)return this.onEnd(B),!(this.ended=!0);$.avail_out!==0&&($.avail_in!==0||U!==4&&U!==2)||(this.options.to==="string"?this.onData(f.buf2binstring(i.shrinkBuf($.output,$.next_out))):this.onData(i.shrinkBuf($.output,$.next_out)))}while((0<$.avail_in||$.avail_out===0)&&B!==1);return U===4?(B=l.deflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===A):U!==2||(this.onEnd(A),!($.avail_out=0))},k.prototype.onData=function(F){this.chunks.push(F)},k.prototype.onEnd=function(F){F===A&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=F,this.msg=this.strm.msg},s.Deflate=k,s.deflate=z,s.deflateRaw=function(F,D){return(D=D||{}).raw=!0,z(F,D)},s.gzip=function(F,D){return(D=D||{}).gzip=!0,z(F,D)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,a,s){var l=n("./zlib/inflate"),i=n("./utils/common"),f=n("./utils/strings"),m=n("./zlib/constants"),y=n("./zlib/messages"),x=n("./zlib/zstream"),A=n("./zlib/gzheader"),w=Object.prototype.toString;function E(k){if(!(this instanceof E))return new E(k);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},k||{});var z=this.options;z.raw&&0<=z.windowBits&&z.windowBits<16&&(z.windowBits=-z.windowBits,z.windowBits===0&&(z.windowBits=-15)),!(0<=z.windowBits&&z.windowBits<16)||k&&k.windowBits||(z.windowBits+=32),15<z.windowBits&&z.windowBits<48&&!(15&z.windowBits)&&(z.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new x,this.strm.avail_out=0;var F=l.inflateInit2(this.strm,z.windowBits);if(F!==m.Z_OK)throw new Error(y[F]);this.header=new A,l.inflateGetHeader(this.strm,this.header)}function L(k,z){var F=new E(z);if(F.push(k,!0),F.err)throw F.msg||y[F.err];return F.result}E.prototype.push=function(k,z){var F,D,B,U,$,q,tt=this.strm,Y=this.options.chunkSize,G=this.options.dictionary,rt=!1;if(this.ended)return!1;D=z===~~z?z:z===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof k=="string"?tt.input=f.binstring2buf(k):w.call(k)==="[object ArrayBuffer]"?tt.input=new Uint8Array(k):tt.input=k,tt.next_in=0,tt.avail_in=tt.input.length;do{if(tt.avail_out===0&&(tt.output=new i.Buf8(Y),tt.next_out=0,tt.avail_out=Y),(F=l.inflate(tt,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&G&&(q=typeof G=="string"?f.string2buf(G):w.call(G)==="[object ArrayBuffer]"?new Uint8Array(G):G,F=l.inflateSetDictionary(this.strm,q)),F===m.Z_BUF_ERROR&&rt===!0&&(F=m.Z_OK,rt=!1),F!==m.Z_STREAM_END&&F!==m.Z_OK)return this.onEnd(F),!(this.ended=!0);tt.next_out&&(tt.avail_out!==0&&F!==m.Z_STREAM_END&&(tt.avail_in!==0||D!==m.Z_FINISH&&D!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(B=f.utf8border(tt.output,tt.next_out),U=tt.next_out-B,$=f.buf2string(tt.output,B),tt.next_out=U,tt.avail_out=Y-U,U&&i.arraySet(tt.output,tt.output,B,U,0),this.onData($)):this.onData(i.shrinkBuf(tt.output,tt.next_out)))),tt.avail_in===0&&tt.avail_out===0&&(rt=!0)}while((0<tt.avail_in||tt.avail_out===0)&&F!==m.Z_STREAM_END);return F===m.Z_STREAM_END&&(D=m.Z_FINISH),D===m.Z_FINISH?(F=l.inflateEnd(this.strm),this.onEnd(F),this.ended=!0,F===m.Z_OK):D!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(tt.avail_out=0))},E.prototype.onData=function(k){this.chunks.push(k)},E.prototype.onEnd=function(k){k===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},s.Inflate=E,s.inflate=L,s.inflateRaw=function(k,z){return(z=z||{}).raw=!0,L(k,z)},s.ungzip=L},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,a,s){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(m){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var x=y.shift();if(x){if(typeof x!="object")throw new TypeError(x+"must be non-object");for(var A in x)x.hasOwnProperty(A)&&(m[A]=x[A])}}return m},s.shrinkBuf=function(m,y){return m.length===y?m:m.subarray?m.subarray(0,y):(m.length=y,m)};var i={arraySet:function(m,y,x,A,w){if(y.subarray&&m.subarray)m.set(y.subarray(x,x+A),w);else for(var E=0;E<A;E++)m[w+E]=y[x+E]},flattenChunks:function(m){var y,x,A,w,E,L;for(y=A=0,x=m.length;y<x;y++)A+=m[y].length;for(L=new Uint8Array(A),y=w=0,x=m.length;y<x;y++)E=m[y],L.set(E,w),w+=E.length;return L}},f={arraySet:function(m,y,x,A,w){for(var E=0;E<A;E++)m[w+E]=y[x+E]},flattenChunks:function(m){return[].concat.apply([],m)}};s.setTyped=function(m){m?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,i)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,f))},s.setTyped(l)},{}],42:[function(n,a,s){var l=n("./common"),i=!0,f=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f=!1}for(var m=new l.Buf8(256),y=0;y<256;y++)m[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function x(A,w){if(w<65537&&(A.subarray&&f||!A.subarray&&i))return String.fromCharCode.apply(null,l.shrinkBuf(A,w));for(var E="",L=0;L<w;L++)E+=String.fromCharCode(A[L]);return E}m[254]=m[254]=1,s.string2buf=function(A){var w,E,L,k,z,F=A.length,D=0;for(k=0;k<F;k++)(64512&(E=A.charCodeAt(k)))==55296&&k+1<F&&(64512&(L=A.charCodeAt(k+1)))==56320&&(E=65536+(E-55296<<10)+(L-56320),k++),D+=E<128?1:E<2048?2:E<65536?3:4;for(w=new l.Buf8(D),k=z=0;z<D;k++)(64512&(E=A.charCodeAt(k)))==55296&&k+1<F&&(64512&(L=A.charCodeAt(k+1)))==56320&&(E=65536+(E-55296<<10)+(L-56320),k++),E<128?w[z++]=E:(E<2048?w[z++]=192|E>>>6:(E<65536?w[z++]=224|E>>>12:(w[z++]=240|E>>>18,w[z++]=128|E>>>12&63),w[z++]=128|E>>>6&63),w[z++]=128|63&E);return w},s.buf2binstring=function(A){return x(A,A.length)},s.binstring2buf=function(A){for(var w=new l.Buf8(A.length),E=0,L=w.length;E<L;E++)w[E]=A.charCodeAt(E);return w},s.buf2string=function(A,w){var E,L,k,z,F=w||A.length,D=new Array(2*F);for(E=L=0;E<F;)if((k=A[E++])<128)D[L++]=k;else if(4<(z=m[k]))D[L++]=65533,E+=z-1;else{for(k&=z===2?31:z===3?15:7;1<z&&E<F;)k=k<<6|63&A[E++],z--;1<z?D[L++]=65533:k<65536?D[L++]=k:(k-=65536,D[L++]=55296|k>>10&1023,D[L++]=56320|1023&k)}return x(D,L)},s.utf8border=function(A,w){var E;for((w=w||A.length)>A.length&&(w=A.length),E=w-1;0<=E&&(192&A[E])==128;)E--;return E<0||E===0?w:E+m[A[E]]>w?E:w}},{"./common":41}],43:[function(n,a,s){a.exports=function(l,i,f,m){for(var y=65535&l|0,x=l>>>16&65535|0,A=0;f!==0;){for(f-=A=2e3<f?2e3:f;x=x+(y=y+i[m++]|0)|0,--A;);y%=65521,x%=65521}return y|x<<16|0}},{}],44:[function(n,a,s){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,a,s){var l=function(){for(var i,f=[],m=0;m<256;m++){i=m;for(var y=0;y<8;y++)i=1&i?3988292384^i>>>1:i>>>1;f[m]=i}return f}();a.exports=function(i,f,m,y){var x=l,A=y+m;i^=-1;for(var w=y;w<A;w++)i=i>>>8^x[255&(i^f[w])];return-1^i}},{}],46:[function(n,a,s){var l,i=n("../utils/common"),f=n("./trees"),m=n("./adler32"),y=n("./crc32"),x=n("./messages"),A=0,w=4,E=0,L=-2,k=-1,z=4,F=2,D=8,B=9,U=286,$=30,q=19,tt=2*U+1,Y=15,G=3,rt=258,pt=rt+G+1,Q=42,ot=113,Z=1,Kt=2,Ft=3,Tt=4;function ie(N,Et){return N.msg=x[Et],Et}function ue(N){return(N<<1)-(4<N?9:0)}function je(N){for(var Et=N.length;0<=--Et;)N[Et]=0}function jt(N){var Et=N.state,wt=Et.pending;wt>N.avail_out&&(wt=N.avail_out),wt!==0&&(i.arraySet(N.output,Et.pending_buf,Et.pending_out,wt,N.next_out),N.next_out+=wt,Et.pending_out+=wt,N.total_out+=wt,N.avail_out-=wt,Et.pending-=wt,Et.pending===0&&(Et.pending_out=0))}function Ut(N,Et){f._tr_flush_block(N,0<=N.block_start?N.block_start:-1,N.strstart-N.block_start,Et),N.block_start=N.strstart,jt(N.strm)}function xe(N,Et){N.pending_buf[N.pending++]=Et}function Fe(N,Et){N.pending_buf[N.pending++]=Et>>>8&255,N.pending_buf[N.pending++]=255&Et}function we(N,Et){var wt,ht,lt=N.max_chain_length,Pt=N.strstart,Wt=N.prev_length,ee=N.nice_match,Dt=N.strstart>N.w_size-pt?N.strstart-(N.w_size-pt):0,ve=N.window,Te=N.w_mask,Ae=N.prev,De=N.strstart+rt,un=ve[Pt+Wt-1],gn=ve[Pt+Wt];N.prev_length>=N.good_match&&(lt>>=2),ee>N.lookahead&&(ee=N.lookahead);do if(ve[(wt=Et)+Wt]===gn&&ve[wt+Wt-1]===un&&ve[wt]===ve[Pt]&&ve[++wt]===ve[Pt+1]){Pt+=2,wt++;do;while(ve[++Pt]===ve[++wt]&&ve[++Pt]===ve[++wt]&&ve[++Pt]===ve[++wt]&&ve[++Pt]===ve[++wt]&&ve[++Pt]===ve[++wt]&&ve[++Pt]===ve[++wt]&&ve[++Pt]===ve[++wt]&&ve[++Pt]===ve[++wt]&&Pt<De);if(ht=rt-(De-Pt),Pt=De-rt,Wt<ht){if(N.match_start=Et,ee<=(Wt=ht))break;un=ve[Pt+Wt-1],gn=ve[Pt+Wt]}}while((Et=Ae[Et&Te])>Dt&&--lt!=0);return Wt<=N.lookahead?Wt:N.lookahead}function qe(N){var Et,wt,ht,lt,Pt,Wt,ee,Dt,ve,Te,Ae=N.w_size;do{if(lt=N.window_size-N.lookahead-N.strstart,N.strstart>=Ae+(Ae-pt)){for(i.arraySet(N.window,N.window,Ae,Ae,0),N.match_start-=Ae,N.strstart-=Ae,N.block_start-=Ae,Et=wt=N.hash_size;ht=N.head[--Et],N.head[Et]=Ae<=ht?ht-Ae:0,--wt;);for(Et=wt=Ae;ht=N.prev[--Et],N.prev[Et]=Ae<=ht?ht-Ae:0,--wt;);lt+=Ae}if(N.strm.avail_in===0)break;if(Wt=N.strm,ee=N.window,Dt=N.strstart+N.lookahead,ve=lt,Te=void 0,Te=Wt.avail_in,ve<Te&&(Te=ve),wt=Te===0?0:(Wt.avail_in-=Te,i.arraySet(ee,Wt.input,Wt.next_in,Te,Dt),Wt.state.wrap===1?Wt.adler=m(Wt.adler,ee,Te,Dt):Wt.state.wrap===2&&(Wt.adler=y(Wt.adler,ee,Te,Dt)),Wt.next_in+=Te,Wt.total_in+=Te,Te),N.lookahead+=wt,N.lookahead+N.insert>=G)for(Pt=N.strstart-N.insert,N.ins_h=N.window[Pt],N.ins_h=(N.ins_h<<N.hash_shift^N.window[Pt+1])&N.hash_mask;N.insert&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[Pt+G-1])&N.hash_mask,N.prev[Pt&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=Pt,Pt++,N.insert--,!(N.lookahead+N.insert<G)););}while(N.lookahead<pt&&N.strm.avail_in!==0)}function fe(N,Et){for(var wt,ht;;){if(N.lookahead<pt){if(qe(N),N.lookahead<pt&&Et===A)return Z;if(N.lookahead===0)break}if(wt=0,N.lookahead>=G&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+G-1])&N.hash_mask,wt=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),wt!==0&&N.strstart-wt<=N.w_size-pt&&(N.match_length=we(N,wt)),N.match_length>=G)if(ht=f._tr_tally(N,N.strstart-N.match_start,N.match_length-G),N.lookahead-=N.match_length,N.match_length<=N.max_lazy_match&&N.lookahead>=G){for(N.match_length--;N.strstart++,N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+G-1])&N.hash_mask,wt=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart,--N.match_length!=0;);N.strstart++}else N.strstart+=N.match_length,N.match_length=0,N.ins_h=N.window[N.strstart],N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+1])&N.hash_mask;else ht=f._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++;if(ht&&(Ut(N,!1),N.strm.avail_out===0))return Z}return N.insert=N.strstart<G-1?N.strstart:G-1,Et===w?(Ut(N,!0),N.strm.avail_out===0?Ft:Tt):N.last_lit&&(Ut(N,!1),N.strm.avail_out===0)?Z:Kt}function ge(N,Et){for(var wt,ht,lt;;){if(N.lookahead<pt){if(qe(N),N.lookahead<pt&&Et===A)return Z;if(N.lookahead===0)break}if(wt=0,N.lookahead>=G&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+G-1])&N.hash_mask,wt=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),N.prev_length=N.match_length,N.prev_match=N.match_start,N.match_length=G-1,wt!==0&&N.prev_length<N.max_lazy_match&&N.strstart-wt<=N.w_size-pt&&(N.match_length=we(N,wt),N.match_length<=5&&(N.strategy===1||N.match_length===G&&4096<N.strstart-N.match_start)&&(N.match_length=G-1)),N.prev_length>=G&&N.match_length<=N.prev_length){for(lt=N.strstart+N.lookahead-G,ht=f._tr_tally(N,N.strstart-1-N.prev_match,N.prev_length-G),N.lookahead-=N.prev_length-1,N.prev_length-=2;++N.strstart<=lt&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+G-1])&N.hash_mask,wt=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),--N.prev_length!=0;);if(N.match_available=0,N.match_length=G-1,N.strstart++,ht&&(Ut(N,!1),N.strm.avail_out===0))return Z}else if(N.match_available){if((ht=f._tr_tally(N,0,N.window[N.strstart-1]))&&Ut(N,!1),N.strstart++,N.lookahead--,N.strm.avail_out===0)return Z}else N.match_available=1,N.strstart++,N.lookahead--}return N.match_available&&(ht=f._tr_tally(N,0,N.window[N.strstart-1]),N.match_available=0),N.insert=N.strstart<G-1?N.strstart:G-1,Et===w?(Ut(N,!0),N.strm.avail_out===0?Ft:Tt):N.last_lit&&(Ut(N,!1),N.strm.avail_out===0)?Z:Kt}function ne(N,Et,wt,ht,lt){this.good_length=N,this.max_lazy=Et,this.nice_length=wt,this.max_chain=ht,this.func=lt}function Se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=D,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*tt),this.dyn_dtree=new i.Buf16(2*(2*$+1)),this.bl_tree=new i.Buf16(2*(2*q+1)),je(this.dyn_ltree),je(this.dyn_dtree),je(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(Y+1),this.heap=new i.Buf16(2*U+1),je(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*U+1),je(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function We(N){var Et;return N&&N.state?(N.total_in=N.total_out=0,N.data_type=F,(Et=N.state).pending=0,Et.pending_out=0,Et.wrap<0&&(Et.wrap=-Et.wrap),Et.status=Et.wrap?Q:ot,N.adler=Et.wrap===2?0:1,Et.last_flush=A,f._tr_init(Et),E):ie(N,L)}function In(N){var Et=We(N);return Et===E&&function(wt){wt.window_size=2*wt.w_size,je(wt.head),wt.max_lazy_match=l[wt.level].max_lazy,wt.good_match=l[wt.level].good_length,wt.nice_match=l[wt.level].nice_length,wt.max_chain_length=l[wt.level].max_chain,wt.strstart=0,wt.block_start=0,wt.lookahead=0,wt.insert=0,wt.match_length=wt.prev_length=G-1,wt.match_available=0,wt.ins_h=0}(N.state),Et}function _t(N,Et,wt,ht,lt,Pt){if(!N)return L;var Wt=1;if(Et===k&&(Et=6),ht<0?(Wt=0,ht=-ht):15<ht&&(Wt=2,ht-=16),lt<1||B<lt||wt!==D||ht<8||15<ht||Et<0||9<Et||Pt<0||z<Pt)return ie(N,L);ht===8&&(ht=9);var ee=new Se;return(N.state=ee).strm=N,ee.wrap=Wt,ee.gzhead=null,ee.w_bits=ht,ee.w_size=1<<ee.w_bits,ee.w_mask=ee.w_size-1,ee.hash_bits=lt+7,ee.hash_size=1<<ee.hash_bits,ee.hash_mask=ee.hash_size-1,ee.hash_shift=~~((ee.hash_bits+G-1)/G),ee.window=new i.Buf8(2*ee.w_size),ee.head=new i.Buf16(ee.hash_size),ee.prev=new i.Buf16(ee.w_size),ee.lit_bufsize=1<<lt+6,ee.pending_buf_size=4*ee.lit_bufsize,ee.pending_buf=new i.Buf8(ee.pending_buf_size),ee.d_buf=1*ee.lit_bufsize,ee.l_buf=3*ee.lit_bufsize,ee.level=Et,ee.strategy=Pt,ee.method=wt,In(N)}l=[new ne(0,0,0,0,function(N,Et){var wt=65535;for(wt>N.pending_buf_size-5&&(wt=N.pending_buf_size-5);;){if(N.lookahead<=1){if(qe(N),N.lookahead===0&&Et===A)return Z;if(N.lookahead===0)break}N.strstart+=N.lookahead,N.lookahead=0;var ht=N.block_start+wt;if((N.strstart===0||N.strstart>=ht)&&(N.lookahead=N.strstart-ht,N.strstart=ht,Ut(N,!1),N.strm.avail_out===0)||N.strstart-N.block_start>=N.w_size-pt&&(Ut(N,!1),N.strm.avail_out===0))return Z}return N.insert=0,Et===w?(Ut(N,!0),N.strm.avail_out===0?Ft:Tt):(N.strstart>N.block_start&&(Ut(N,!1),N.strm.avail_out),Z)}),new ne(4,4,8,4,fe),new ne(4,5,16,8,fe),new ne(4,6,32,32,fe),new ne(4,4,16,16,ge),new ne(8,16,32,32,ge),new ne(8,16,128,128,ge),new ne(8,32,128,256,ge),new ne(32,128,258,1024,ge),new ne(32,258,258,4096,ge)],s.deflateInit=function(N,Et){return _t(N,Et,D,15,8,0)},s.deflateInit2=_t,s.deflateReset=In,s.deflateResetKeep=We,s.deflateSetHeader=function(N,Et){return N&&N.state?N.state.wrap!==2?L:(N.state.gzhead=Et,E):L},s.deflate=function(N,Et){var wt,ht,lt,Pt;if(!N||!N.state||5<Et||Et<0)return N?ie(N,L):L;if(ht=N.state,!N.output||!N.input&&N.avail_in!==0||ht.status===666&&Et!==w)return ie(N,N.avail_out===0?-5:L);if(ht.strm=N,wt=ht.last_flush,ht.last_flush=Et,ht.status===Q)if(ht.wrap===2)N.adler=0,xe(ht,31),xe(ht,139),xe(ht,8),ht.gzhead?(xe(ht,(ht.gzhead.text?1:0)+(ht.gzhead.hcrc?2:0)+(ht.gzhead.extra?4:0)+(ht.gzhead.name?8:0)+(ht.gzhead.comment?16:0)),xe(ht,255&ht.gzhead.time),xe(ht,ht.gzhead.time>>8&255),xe(ht,ht.gzhead.time>>16&255),xe(ht,ht.gzhead.time>>24&255),xe(ht,ht.level===9?2:2<=ht.strategy||ht.level<2?4:0),xe(ht,255&ht.gzhead.os),ht.gzhead.extra&&ht.gzhead.extra.length&&(xe(ht,255&ht.gzhead.extra.length),xe(ht,ht.gzhead.extra.length>>8&255)),ht.gzhead.hcrc&&(N.adler=y(N.adler,ht.pending_buf,ht.pending,0)),ht.gzindex=0,ht.status=69):(xe(ht,0),xe(ht,0),xe(ht,0),xe(ht,0),xe(ht,0),xe(ht,ht.level===9?2:2<=ht.strategy||ht.level<2?4:0),xe(ht,3),ht.status=ot);else{var Wt=D+(ht.w_bits-8<<4)<<8;Wt|=(2<=ht.strategy||ht.level<2?0:ht.level<6?1:ht.level===6?2:3)<<6,ht.strstart!==0&&(Wt|=32),Wt+=31-Wt%31,ht.status=ot,Fe(ht,Wt),ht.strstart!==0&&(Fe(ht,N.adler>>>16),Fe(ht,65535&N.adler)),N.adler=1}if(ht.status===69)if(ht.gzhead.extra){for(lt=ht.pending;ht.gzindex<(65535&ht.gzhead.extra.length)&&(ht.pending!==ht.pending_buf_size||(ht.gzhead.hcrc&&ht.pending>lt&&(N.adler=y(N.adler,ht.pending_buf,ht.pending-lt,lt)),jt(N),lt=ht.pending,ht.pending!==ht.pending_buf_size));)xe(ht,255&ht.gzhead.extra[ht.gzindex]),ht.gzindex++;ht.gzhead.hcrc&&ht.pending>lt&&(N.adler=y(N.adler,ht.pending_buf,ht.pending-lt,lt)),ht.gzindex===ht.gzhead.extra.length&&(ht.gzindex=0,ht.status=73)}else ht.status=73;if(ht.status===73)if(ht.gzhead.name){lt=ht.pending;do{if(ht.pending===ht.pending_buf_size&&(ht.gzhead.hcrc&&ht.pending>lt&&(N.adler=y(N.adler,ht.pending_buf,ht.pending-lt,lt)),jt(N),lt=ht.pending,ht.pending===ht.pending_buf_size)){Pt=1;break}Pt=ht.gzindex<ht.gzhead.name.length?255&ht.gzhead.name.charCodeAt(ht.gzindex++):0,xe(ht,Pt)}while(Pt!==0);ht.gzhead.hcrc&&ht.pending>lt&&(N.adler=y(N.adler,ht.pending_buf,ht.pending-lt,lt)),Pt===0&&(ht.gzindex=0,ht.status=91)}else ht.status=91;if(ht.status===91)if(ht.gzhead.comment){lt=ht.pending;do{if(ht.pending===ht.pending_buf_size&&(ht.gzhead.hcrc&&ht.pending>lt&&(N.adler=y(N.adler,ht.pending_buf,ht.pending-lt,lt)),jt(N),lt=ht.pending,ht.pending===ht.pending_buf_size)){Pt=1;break}Pt=ht.gzindex<ht.gzhead.comment.length?255&ht.gzhead.comment.charCodeAt(ht.gzindex++):0,xe(ht,Pt)}while(Pt!==0);ht.gzhead.hcrc&&ht.pending>lt&&(N.adler=y(N.adler,ht.pending_buf,ht.pending-lt,lt)),Pt===0&&(ht.status=103)}else ht.status=103;if(ht.status===103&&(ht.gzhead.hcrc?(ht.pending+2>ht.pending_buf_size&&jt(N),ht.pending+2<=ht.pending_buf_size&&(xe(ht,255&N.adler),xe(ht,N.adler>>8&255),N.adler=0,ht.status=ot)):ht.status=ot),ht.pending!==0){if(jt(N),N.avail_out===0)return ht.last_flush=-1,E}else if(N.avail_in===0&&ue(Et)<=ue(wt)&&Et!==w)return ie(N,-5);if(ht.status===666&&N.avail_in!==0)return ie(N,-5);if(N.avail_in!==0||ht.lookahead!==0||Et!==A&&ht.status!==666){var ee=ht.strategy===2?function(Dt,ve){for(var Te;;){if(Dt.lookahead===0&&(qe(Dt),Dt.lookahead===0)){if(ve===A)return Z;break}if(Dt.match_length=0,Te=f._tr_tally(Dt,0,Dt.window[Dt.strstart]),Dt.lookahead--,Dt.strstart++,Te&&(Ut(Dt,!1),Dt.strm.avail_out===0))return Z}return Dt.insert=0,ve===w?(Ut(Dt,!0),Dt.strm.avail_out===0?Ft:Tt):Dt.last_lit&&(Ut(Dt,!1),Dt.strm.avail_out===0)?Z:Kt}(ht,Et):ht.strategy===3?function(Dt,ve){for(var Te,Ae,De,un,gn=Dt.window;;){if(Dt.lookahead<=rt){if(qe(Dt),Dt.lookahead<=rt&&ve===A)return Z;if(Dt.lookahead===0)break}if(Dt.match_length=0,Dt.lookahead>=G&&0<Dt.strstart&&(Ae=gn[De=Dt.strstart-1])===gn[++De]&&Ae===gn[++De]&&Ae===gn[++De]){un=Dt.strstart+rt;do;while(Ae===gn[++De]&&Ae===gn[++De]&&Ae===gn[++De]&&Ae===gn[++De]&&Ae===gn[++De]&&Ae===gn[++De]&&Ae===gn[++De]&&Ae===gn[++De]&&De<un);Dt.match_length=rt-(un-De),Dt.match_length>Dt.lookahead&&(Dt.match_length=Dt.lookahead)}if(Dt.match_length>=G?(Te=f._tr_tally(Dt,1,Dt.match_length-G),Dt.lookahead-=Dt.match_length,Dt.strstart+=Dt.match_length,Dt.match_length=0):(Te=f._tr_tally(Dt,0,Dt.window[Dt.strstart]),Dt.lookahead--,Dt.strstart++),Te&&(Ut(Dt,!1),Dt.strm.avail_out===0))return Z}return Dt.insert=0,ve===w?(Ut(Dt,!0),Dt.strm.avail_out===0?Ft:Tt):Dt.last_lit&&(Ut(Dt,!1),Dt.strm.avail_out===0)?Z:Kt}(ht,Et):l[ht.level].func(ht,Et);if(ee!==Ft&&ee!==Tt||(ht.status=666),ee===Z||ee===Ft)return N.avail_out===0&&(ht.last_flush=-1),E;if(ee===Kt&&(Et===1?f._tr_align(ht):Et!==5&&(f._tr_stored_block(ht,0,0,!1),Et===3&&(je(ht.head),ht.lookahead===0&&(ht.strstart=0,ht.block_start=0,ht.insert=0))),jt(N),N.avail_out===0))return ht.last_flush=-1,E}return Et!==w?E:ht.wrap<=0?1:(ht.wrap===2?(xe(ht,255&N.adler),xe(ht,N.adler>>8&255),xe(ht,N.adler>>16&255),xe(ht,N.adler>>24&255),xe(ht,255&N.total_in),xe(ht,N.total_in>>8&255),xe(ht,N.total_in>>16&255),xe(ht,N.total_in>>24&255)):(Fe(ht,N.adler>>>16),Fe(ht,65535&N.adler)),jt(N),0<ht.wrap&&(ht.wrap=-ht.wrap),ht.pending!==0?E:1)},s.deflateEnd=function(N){var Et;return N&&N.state?(Et=N.state.status)!==Q&&Et!==69&&Et!==73&&Et!==91&&Et!==103&&Et!==ot&&Et!==666?ie(N,L):(N.state=null,Et===ot?ie(N,-3):E):L},s.deflateSetDictionary=function(N,Et){var wt,ht,lt,Pt,Wt,ee,Dt,ve,Te=Et.length;if(!N||!N.state||(Pt=(wt=N.state).wrap)===2||Pt===1&&wt.status!==Q||wt.lookahead)return L;for(Pt===1&&(N.adler=m(N.adler,Et,Te,0)),wt.wrap=0,Te>=wt.w_size&&(Pt===0&&(je(wt.head),wt.strstart=0,wt.block_start=0,wt.insert=0),ve=new i.Buf8(wt.w_size),i.arraySet(ve,Et,Te-wt.w_size,wt.w_size,0),Et=ve,Te=wt.w_size),Wt=N.avail_in,ee=N.next_in,Dt=N.input,N.avail_in=Te,N.next_in=0,N.input=Et,qe(wt);wt.lookahead>=G;){for(ht=wt.strstart,lt=wt.lookahead-(G-1);wt.ins_h=(wt.ins_h<<wt.hash_shift^wt.window[ht+G-1])&wt.hash_mask,wt.prev[ht&wt.w_mask]=wt.head[wt.ins_h],wt.head[wt.ins_h]=ht,ht++,--lt;);wt.strstart=ht,wt.lookahead=G-1,qe(wt)}return wt.strstart+=wt.lookahead,wt.block_start=wt.strstart,wt.insert=wt.lookahead,wt.lookahead=0,wt.match_length=wt.prev_length=G-1,wt.match_available=0,N.next_in=ee,N.input=Dt,N.avail_in=Wt,wt.wrap=Pt,E},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,a,s){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,a,s){a.exports=function(l,i){var f,m,y,x,A,w,E,L,k,z,F,D,B,U,$,q,tt,Y,G,rt,pt,Q,ot,Z,Kt;f=l.state,m=l.next_in,Z=l.input,y=m+(l.avail_in-5),x=l.next_out,Kt=l.output,A=x-(i-l.avail_out),w=x+(l.avail_out-257),E=f.dmax,L=f.wsize,k=f.whave,z=f.wnext,F=f.window,D=f.hold,B=f.bits,U=f.lencode,$=f.distcode,q=(1<<f.lenbits)-1,tt=(1<<f.distbits)-1;t:do{B<15&&(D+=Z[m++]<<B,B+=8,D+=Z[m++]<<B,B+=8),Y=U[D&q];e:for(;;){if(D>>>=G=Y>>>24,B-=G,(G=Y>>>16&255)===0)Kt[x++]=65535&Y;else{if(!(16&G)){if(!(64&G)){Y=U[(65535&Y)+(D&(1<<G)-1)];continue e}if(32&G){f.mode=12;break t}l.msg="invalid literal/length code",f.mode=30;break t}rt=65535&Y,(G&=15)&&(B<G&&(D+=Z[m++]<<B,B+=8),rt+=D&(1<<G)-1,D>>>=G,B-=G),B<15&&(D+=Z[m++]<<B,B+=8,D+=Z[m++]<<B,B+=8),Y=$[D&tt];n:for(;;){if(D>>>=G=Y>>>24,B-=G,!(16&(G=Y>>>16&255))){if(!(64&G)){Y=$[(65535&Y)+(D&(1<<G)-1)];continue n}l.msg="invalid distance code",f.mode=30;break t}if(pt=65535&Y,B<(G&=15)&&(D+=Z[m++]<<B,(B+=8)<G&&(D+=Z[m++]<<B,B+=8)),E<(pt+=D&(1<<G)-1)){l.msg="invalid distance too far back",f.mode=30;break t}if(D>>>=G,B-=G,(G=x-A)<pt){if(k<(G=pt-G)&&f.sane){l.msg="invalid distance too far back",f.mode=30;break t}if(ot=F,(Q=0)===z){if(Q+=L-G,G<rt){for(rt-=G;Kt[x++]=F[Q++],--G;);Q=x-pt,ot=Kt}}else if(z<G){if(Q+=L+z-G,(G-=z)<rt){for(rt-=G;Kt[x++]=F[Q++],--G;);if(Q=0,z<rt){for(rt-=G=z;Kt[x++]=F[Q++],--G;);Q=x-pt,ot=Kt}}}else if(Q+=z-G,G<rt){for(rt-=G;Kt[x++]=F[Q++],--G;);Q=x-pt,ot=Kt}for(;2<rt;)Kt[x++]=ot[Q++],Kt[x++]=ot[Q++],Kt[x++]=ot[Q++],rt-=3;rt&&(Kt[x++]=ot[Q++],1<rt&&(Kt[x++]=ot[Q++]))}else{for(Q=x-pt;Kt[x++]=Kt[Q++],Kt[x++]=Kt[Q++],Kt[x++]=Kt[Q++],2<(rt-=3););rt&&(Kt[x++]=Kt[Q++],1<rt&&(Kt[x++]=Kt[Q++]))}break}}break}}while(m<y&&x<w);m-=rt=B>>3,D&=(1<<(B-=rt<<3))-1,l.next_in=m,l.next_out=x,l.avail_in=m<y?y-m+5:5-(m-y),l.avail_out=x<w?w-x+257:257-(x-w),f.hold=D,f.bits=B}},{}],49:[function(n,a,s){var l=n("../utils/common"),i=n("./adler32"),f=n("./crc32"),m=n("./inffast"),y=n("./inftrees"),x=1,A=2,w=0,E=-2,L=1,k=852,z=592;function F(Q){return(Q>>>24&255)+(Q>>>8&65280)+((65280&Q)<<8)+((255&Q)<<24)}function D(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function B(Q){var ot;return Q&&Q.state?(ot=Q.state,Q.total_in=Q.total_out=ot.total=0,Q.msg="",ot.wrap&&(Q.adler=1&ot.wrap),ot.mode=L,ot.last=0,ot.havedict=0,ot.dmax=32768,ot.head=null,ot.hold=0,ot.bits=0,ot.lencode=ot.lendyn=new l.Buf32(k),ot.distcode=ot.distdyn=new l.Buf32(z),ot.sane=1,ot.back=-1,w):E}function U(Q){var ot;return Q&&Q.state?((ot=Q.state).wsize=0,ot.whave=0,ot.wnext=0,B(Q)):E}function $(Q,ot){var Z,Kt;return Q&&Q.state?(Kt=Q.state,ot<0?(Z=0,ot=-ot):(Z=1+(ot>>4),ot<48&&(ot&=15)),ot&&(ot<8||15<ot)?E:(Kt.window!==null&&Kt.wbits!==ot&&(Kt.window=null),Kt.wrap=Z,Kt.wbits=ot,U(Q))):E}function q(Q,ot){var Z,Kt;return Q?(Kt=new D,(Q.state=Kt).window=null,(Z=$(Q,ot))!==w&&(Q.state=null),Z):E}var tt,Y,G=!0;function rt(Q){if(G){var ot;for(tt=new l.Buf32(512),Y=new l.Buf32(32),ot=0;ot<144;)Q.lens[ot++]=8;for(;ot<256;)Q.lens[ot++]=9;for(;ot<280;)Q.lens[ot++]=7;for(;ot<288;)Q.lens[ot++]=8;for(y(x,Q.lens,0,288,tt,0,Q.work,{bits:9}),ot=0;ot<32;)Q.lens[ot++]=5;y(A,Q.lens,0,32,Y,0,Q.work,{bits:5}),G=!1}Q.lencode=tt,Q.lenbits=9,Q.distcode=Y,Q.distbits=5}function pt(Q,ot,Z,Kt){var Ft,Tt=Q.state;return Tt.window===null&&(Tt.wsize=1<<Tt.wbits,Tt.wnext=0,Tt.whave=0,Tt.window=new l.Buf8(Tt.wsize)),Kt>=Tt.wsize?(l.arraySet(Tt.window,ot,Z-Tt.wsize,Tt.wsize,0),Tt.wnext=0,Tt.whave=Tt.wsize):(Kt<(Ft=Tt.wsize-Tt.wnext)&&(Ft=Kt),l.arraySet(Tt.window,ot,Z-Kt,Ft,Tt.wnext),(Kt-=Ft)?(l.arraySet(Tt.window,ot,Z-Kt,Kt,0),Tt.wnext=Kt,Tt.whave=Tt.wsize):(Tt.wnext+=Ft,Tt.wnext===Tt.wsize&&(Tt.wnext=0),Tt.whave<Tt.wsize&&(Tt.whave+=Ft))),0}s.inflateReset=U,s.inflateReset2=$,s.inflateResetKeep=B,s.inflateInit=function(Q){return q(Q,15)},s.inflateInit2=q,s.inflate=function(Q,ot){var Z,Kt,Ft,Tt,ie,ue,je,jt,Ut,xe,Fe,we,qe,fe,ge,ne,Se,We,In,_t,N,Et,wt,ht,lt=0,Pt=new l.Buf8(4),Wt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Q||!Q.state||!Q.output||!Q.input&&Q.avail_in!==0)return E;(Z=Q.state).mode===12&&(Z.mode=13),ie=Q.next_out,Ft=Q.output,je=Q.avail_out,Tt=Q.next_in,Kt=Q.input,ue=Q.avail_in,jt=Z.hold,Ut=Z.bits,xe=ue,Fe=je,Et=w;t:for(;;)switch(Z.mode){case L:if(Z.wrap===0){Z.mode=13;break}for(;Ut<16;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}if(2&Z.wrap&&jt===35615){Pt[Z.check=0]=255&jt,Pt[1]=jt>>>8&255,Z.check=f(Z.check,Pt,2,0),Ut=jt=0,Z.mode=2;break}if(Z.flags=0,Z.head&&(Z.head.done=!1),!(1&Z.wrap)||(((255&jt)<<8)+(jt>>8))%31){Q.msg="incorrect header check",Z.mode=30;break}if((15&jt)!=8){Q.msg="unknown compression method",Z.mode=30;break}if(Ut-=4,N=8+(15&(jt>>>=4)),Z.wbits===0)Z.wbits=N;else if(N>Z.wbits){Q.msg="invalid window size",Z.mode=30;break}Z.dmax=1<<N,Q.adler=Z.check=1,Z.mode=512&jt?10:12,Ut=jt=0;break;case 2:for(;Ut<16;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}if(Z.flags=jt,(255&Z.flags)!=8){Q.msg="unknown compression method",Z.mode=30;break}if(57344&Z.flags){Q.msg="unknown header flags set",Z.mode=30;break}Z.head&&(Z.head.text=jt>>8&1),512&Z.flags&&(Pt[0]=255&jt,Pt[1]=jt>>>8&255,Z.check=f(Z.check,Pt,2,0)),Ut=jt=0,Z.mode=3;case 3:for(;Ut<32;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}Z.head&&(Z.head.time=jt),512&Z.flags&&(Pt[0]=255&jt,Pt[1]=jt>>>8&255,Pt[2]=jt>>>16&255,Pt[3]=jt>>>24&255,Z.check=f(Z.check,Pt,4,0)),Ut=jt=0,Z.mode=4;case 4:for(;Ut<16;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}Z.head&&(Z.head.xflags=255&jt,Z.head.os=jt>>8),512&Z.flags&&(Pt[0]=255&jt,Pt[1]=jt>>>8&255,Z.check=f(Z.check,Pt,2,0)),Ut=jt=0,Z.mode=5;case 5:if(1024&Z.flags){for(;Ut<16;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}Z.length=jt,Z.head&&(Z.head.extra_len=jt),512&Z.flags&&(Pt[0]=255&jt,Pt[1]=jt>>>8&255,Z.check=f(Z.check,Pt,2,0)),Ut=jt=0}else Z.head&&(Z.head.extra=null);Z.mode=6;case 6:if(1024&Z.flags&&(ue<(we=Z.length)&&(we=ue),we&&(Z.head&&(N=Z.head.extra_len-Z.length,Z.head.extra||(Z.head.extra=new Array(Z.head.extra_len)),l.arraySet(Z.head.extra,Kt,Tt,we,N)),512&Z.flags&&(Z.check=f(Z.check,Kt,we,Tt)),ue-=we,Tt+=we,Z.length-=we),Z.length))break t;Z.length=0,Z.mode=7;case 7:if(2048&Z.flags){if(ue===0)break t;for(we=0;N=Kt[Tt+we++],Z.head&&N&&Z.length<65536&&(Z.head.name+=String.fromCharCode(N)),N&&we<ue;);if(512&Z.flags&&(Z.check=f(Z.check,Kt,we,Tt)),ue-=we,Tt+=we,N)break t}else Z.head&&(Z.head.name=null);Z.length=0,Z.mode=8;case 8:if(4096&Z.flags){if(ue===0)break t;for(we=0;N=Kt[Tt+we++],Z.head&&N&&Z.length<65536&&(Z.head.comment+=String.fromCharCode(N)),N&&we<ue;);if(512&Z.flags&&(Z.check=f(Z.check,Kt,we,Tt)),ue-=we,Tt+=we,N)break t}else Z.head&&(Z.head.comment=null);Z.mode=9;case 9:if(512&Z.flags){for(;Ut<16;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}if(jt!==(65535&Z.check)){Q.msg="header crc mismatch",Z.mode=30;break}Ut=jt=0}Z.head&&(Z.head.hcrc=Z.flags>>9&1,Z.head.done=!0),Q.adler=Z.check=0,Z.mode=12;break;case 10:for(;Ut<32;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}Q.adler=Z.check=F(jt),Ut=jt=0,Z.mode=11;case 11:if(Z.havedict===0)return Q.next_out=ie,Q.avail_out=je,Q.next_in=Tt,Q.avail_in=ue,Z.hold=jt,Z.bits=Ut,2;Q.adler=Z.check=1,Z.mode=12;case 12:if(ot===5||ot===6)break t;case 13:if(Z.last){jt>>>=7&Ut,Ut-=7&Ut,Z.mode=27;break}for(;Ut<3;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}switch(Z.last=1&jt,Ut-=1,3&(jt>>>=1)){case 0:Z.mode=14;break;case 1:if(rt(Z),Z.mode=20,ot!==6)break;jt>>>=2,Ut-=2;break t;case 2:Z.mode=17;break;case 3:Q.msg="invalid block type",Z.mode=30}jt>>>=2,Ut-=2;break;case 14:for(jt>>>=7&Ut,Ut-=7&Ut;Ut<32;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}if((65535&jt)!=(jt>>>16^65535)){Q.msg="invalid stored block lengths",Z.mode=30;break}if(Z.length=65535&jt,Ut=jt=0,Z.mode=15,ot===6)break t;case 15:Z.mode=16;case 16:if(we=Z.length){if(ue<we&&(we=ue),je<we&&(we=je),we===0)break t;l.arraySet(Ft,Kt,Tt,we,ie),ue-=we,Tt+=we,je-=we,ie+=we,Z.length-=we;break}Z.mode=12;break;case 17:for(;Ut<14;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}if(Z.nlen=257+(31&jt),jt>>>=5,Ut-=5,Z.ndist=1+(31&jt),jt>>>=5,Ut-=5,Z.ncode=4+(15&jt),jt>>>=4,Ut-=4,286<Z.nlen||30<Z.ndist){Q.msg="too many length or distance symbols",Z.mode=30;break}Z.have=0,Z.mode=18;case 18:for(;Z.have<Z.ncode;){for(;Ut<3;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}Z.lens[Wt[Z.have++]]=7&jt,jt>>>=3,Ut-=3}for(;Z.have<19;)Z.lens[Wt[Z.have++]]=0;if(Z.lencode=Z.lendyn,Z.lenbits=7,wt={bits:Z.lenbits},Et=y(0,Z.lens,0,19,Z.lencode,0,Z.work,wt),Z.lenbits=wt.bits,Et){Q.msg="invalid code lengths set",Z.mode=30;break}Z.have=0,Z.mode=19;case 19:for(;Z.have<Z.nlen+Z.ndist;){for(;ne=(lt=Z.lencode[jt&(1<<Z.lenbits)-1])>>>16&255,Se=65535&lt,!((ge=lt>>>24)<=Ut);){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}if(Se<16)jt>>>=ge,Ut-=ge,Z.lens[Z.have++]=Se;else{if(Se===16){for(ht=ge+2;Ut<ht;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}if(jt>>>=ge,Ut-=ge,Z.have===0){Q.msg="invalid bit length repeat",Z.mode=30;break}N=Z.lens[Z.have-1],we=3+(3&jt),jt>>>=2,Ut-=2}else if(Se===17){for(ht=ge+3;Ut<ht;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}Ut-=ge,N=0,we=3+(7&(jt>>>=ge)),jt>>>=3,Ut-=3}else{for(ht=ge+7;Ut<ht;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}Ut-=ge,N=0,we=11+(127&(jt>>>=ge)),jt>>>=7,Ut-=7}if(Z.have+we>Z.nlen+Z.ndist){Q.msg="invalid bit length repeat",Z.mode=30;break}for(;we--;)Z.lens[Z.have++]=N}}if(Z.mode===30)break;if(Z.lens[256]===0){Q.msg="invalid code -- missing end-of-block",Z.mode=30;break}if(Z.lenbits=9,wt={bits:Z.lenbits},Et=y(x,Z.lens,0,Z.nlen,Z.lencode,0,Z.work,wt),Z.lenbits=wt.bits,Et){Q.msg="invalid literal/lengths set",Z.mode=30;break}if(Z.distbits=6,Z.distcode=Z.distdyn,wt={bits:Z.distbits},Et=y(A,Z.lens,Z.nlen,Z.ndist,Z.distcode,0,Z.work,wt),Z.distbits=wt.bits,Et){Q.msg="invalid distances set",Z.mode=30;break}if(Z.mode=20,ot===6)break t;case 20:Z.mode=21;case 21:if(6<=ue&&258<=je){Q.next_out=ie,Q.avail_out=je,Q.next_in=Tt,Q.avail_in=ue,Z.hold=jt,Z.bits=Ut,m(Q,Fe),ie=Q.next_out,Ft=Q.output,je=Q.avail_out,Tt=Q.next_in,Kt=Q.input,ue=Q.avail_in,jt=Z.hold,Ut=Z.bits,Z.mode===12&&(Z.back=-1);break}for(Z.back=0;ne=(lt=Z.lencode[jt&(1<<Z.lenbits)-1])>>>16&255,Se=65535&lt,!((ge=lt>>>24)<=Ut);){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}if(ne&&!(240&ne)){for(We=ge,In=ne,_t=Se;ne=(lt=Z.lencode[_t+((jt&(1<<We+In)-1)>>We)])>>>16&255,Se=65535&lt,!(We+(ge=lt>>>24)<=Ut);){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}jt>>>=We,Ut-=We,Z.back+=We}if(jt>>>=ge,Ut-=ge,Z.back+=ge,Z.length=Se,ne===0){Z.mode=26;break}if(32&ne){Z.back=-1,Z.mode=12;break}if(64&ne){Q.msg="invalid literal/length code",Z.mode=30;break}Z.extra=15&ne,Z.mode=22;case 22:if(Z.extra){for(ht=Z.extra;Ut<ht;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}Z.length+=jt&(1<<Z.extra)-1,jt>>>=Z.extra,Ut-=Z.extra,Z.back+=Z.extra}Z.was=Z.length,Z.mode=23;case 23:for(;ne=(lt=Z.distcode[jt&(1<<Z.distbits)-1])>>>16&255,Se=65535&lt,!((ge=lt>>>24)<=Ut);){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}if(!(240&ne)){for(We=ge,In=ne,_t=Se;ne=(lt=Z.distcode[_t+((jt&(1<<We+In)-1)>>We)])>>>16&255,Se=65535&lt,!(We+(ge=lt>>>24)<=Ut);){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}jt>>>=We,Ut-=We,Z.back+=We}if(jt>>>=ge,Ut-=ge,Z.back+=ge,64&ne){Q.msg="invalid distance code",Z.mode=30;break}Z.offset=Se,Z.extra=15&ne,Z.mode=24;case 24:if(Z.extra){for(ht=Z.extra;Ut<ht;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}Z.offset+=jt&(1<<Z.extra)-1,jt>>>=Z.extra,Ut-=Z.extra,Z.back+=Z.extra}if(Z.offset>Z.dmax){Q.msg="invalid distance too far back",Z.mode=30;break}Z.mode=25;case 25:if(je===0)break t;if(we=Fe-je,Z.offset>we){if((we=Z.offset-we)>Z.whave&&Z.sane){Q.msg="invalid distance too far back",Z.mode=30;break}qe=we>Z.wnext?(we-=Z.wnext,Z.wsize-we):Z.wnext-we,we>Z.length&&(we=Z.length),fe=Z.window}else fe=Ft,qe=ie-Z.offset,we=Z.length;for(je<we&&(we=je),je-=we,Z.length-=we;Ft[ie++]=fe[qe++],--we;);Z.length===0&&(Z.mode=21);break;case 26:if(je===0)break t;Ft[ie++]=Z.length,je--,Z.mode=21;break;case 27:if(Z.wrap){for(;Ut<32;){if(ue===0)break t;ue--,jt|=Kt[Tt++]<<Ut,Ut+=8}if(Fe-=je,Q.total_out+=Fe,Z.total+=Fe,Fe&&(Q.adler=Z.check=Z.flags?f(Z.check,Ft,Fe,ie-Fe):i(Z.check,Ft,Fe,ie-Fe)),Fe=je,(Z.flags?jt:F(jt))!==Z.check){Q.msg="incorrect data check",Z.mode=30;break}Ut=jt=0}Z.mode=28;case 28:if(Z.wrap&&Z.flags){for(;Ut<32;){if(ue===0)break t;ue--,jt+=Kt[Tt++]<<Ut,Ut+=8}if(jt!==(4294967295&Z.total)){Q.msg="incorrect length check",Z.mode=30;break}Ut=jt=0}Z.mode=29;case 29:Et=1;break t;case 30:Et=-3;break t;case 31:return-4;case 32:default:return E}return Q.next_out=ie,Q.avail_out=je,Q.next_in=Tt,Q.avail_in=ue,Z.hold=jt,Z.bits=Ut,(Z.wsize||Fe!==Q.avail_out&&Z.mode<30&&(Z.mode<27||ot!==4))&&pt(Q,Q.output,Q.next_out,Fe-Q.avail_out)?(Z.mode=31,-4):(xe-=Q.avail_in,Fe-=Q.avail_out,Q.total_in+=xe,Q.total_out+=Fe,Z.total+=Fe,Z.wrap&&Fe&&(Q.adler=Z.check=Z.flags?f(Z.check,Ft,Fe,Q.next_out-Fe):i(Z.check,Ft,Fe,Q.next_out-Fe)),Q.data_type=Z.bits+(Z.last?64:0)+(Z.mode===12?128:0)+(Z.mode===20||Z.mode===15?256:0),(xe==0&&Fe===0||ot===4)&&Et===w&&(Et=-5),Et)},s.inflateEnd=function(Q){if(!Q||!Q.state)return E;var ot=Q.state;return ot.window&&(ot.window=null),Q.state=null,w},s.inflateGetHeader=function(Q,ot){var Z;return Q&&Q.state&&2&(Z=Q.state).wrap?((Z.head=ot).done=!1,w):E},s.inflateSetDictionary=function(Q,ot){var Z,Kt=ot.length;return Q&&Q.state?(Z=Q.state).wrap!==0&&Z.mode!==11?E:Z.mode===11&&i(1,ot,Kt,0)!==Z.check?-3:pt(Q,ot,Kt,Kt)?(Z.mode=31,-4):(Z.havedict=1,w):E},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,a,s){var l=n("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(x,A,w,E,L,k,z,F){var D,B,U,$,q,tt,Y,G,rt,pt=F.bits,Q=0,ot=0,Z=0,Kt=0,Ft=0,Tt=0,ie=0,ue=0,je=0,jt=0,Ut=null,xe=0,Fe=new l.Buf16(16),we=new l.Buf16(16),qe=null,fe=0;for(Q=0;Q<=15;Q++)Fe[Q]=0;for(ot=0;ot<E;ot++)Fe[A[w+ot]]++;for(Ft=pt,Kt=15;1<=Kt&&Fe[Kt]===0;Kt--);if(Kt<Ft&&(Ft=Kt),Kt===0)return L[k++]=20971520,L[k++]=20971520,F.bits=1,0;for(Z=1;Z<Kt&&Fe[Z]===0;Z++);for(Ft<Z&&(Ft=Z),Q=ue=1;Q<=15;Q++)if(ue<<=1,(ue-=Fe[Q])<0)return-1;if(0<ue&&(x===0||Kt!==1))return-1;for(we[1]=0,Q=1;Q<15;Q++)we[Q+1]=we[Q]+Fe[Q];for(ot=0;ot<E;ot++)A[w+ot]!==0&&(z[we[A[w+ot]]++]=ot);if(tt=x===0?(Ut=qe=z,19):x===1?(Ut=i,xe-=257,qe=f,fe-=257,256):(Ut=m,qe=y,-1),Q=Z,q=k,ie=ot=jt=0,U=-1,$=(je=1<<(Tt=Ft))-1,x===1&&852<je||x===2&&592<je)return 1;for(;;){for(Y=Q-ie,rt=z[ot]<tt?(G=0,z[ot]):z[ot]>tt?(G=qe[fe+z[ot]],Ut[xe+z[ot]]):(G=96,0),D=1<<Q-ie,Z=B=1<<Tt;L[q+(jt>>ie)+(B-=D)]=Y<<24|G<<16|rt|0,B!==0;);for(D=1<<Q-1;jt&D;)D>>=1;if(D!==0?(jt&=D-1,jt+=D):jt=0,ot++,--Fe[Q]==0){if(Q===Kt)break;Q=A[w+z[ot]]}if(Ft<Q&&(jt&$)!==U){for(ie===0&&(ie=Ft),q+=Z,ue=1<<(Tt=Q-ie);Tt+ie<Kt&&!((ue-=Fe[Tt+ie])<=0);)Tt++,ue<<=1;if(je+=1<<Tt,x===1&&852<je||x===2&&592<je)return 1;L[U=jt&$]=Ft<<24|Tt<<16|q-k|0}}return jt!==0&&(L[q+jt]=Q-ie<<24|64<<16|0),F.bits=Ft,0}},{"../utils/common":41}],51:[function(n,a,s){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,a,s){var l=n("../utils/common"),i=0,f=1;function m(lt){for(var Pt=lt.length;0<=--Pt;)lt[Pt]=0}var y=0,x=29,A=256,w=A+1+x,E=30,L=19,k=2*w+1,z=15,F=16,D=7,B=256,U=16,$=17,q=18,tt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pt=new Array(2*(w+2));m(pt);var Q=new Array(2*E);m(Q);var ot=new Array(512);m(ot);var Z=new Array(256);m(Z);var Kt=new Array(x);m(Kt);var Ft,Tt,ie,ue=new Array(E);function je(lt,Pt,Wt,ee,Dt){this.static_tree=lt,this.extra_bits=Pt,this.extra_base=Wt,this.elems=ee,this.max_length=Dt,this.has_stree=lt&&lt.length}function jt(lt,Pt){this.dyn_tree=lt,this.max_code=0,this.stat_desc=Pt}function Ut(lt){return lt<256?ot[lt]:ot[256+(lt>>>7)]}function xe(lt,Pt){lt.pending_buf[lt.pending++]=255&Pt,lt.pending_buf[lt.pending++]=Pt>>>8&255}function Fe(lt,Pt,Wt){lt.bi_valid>F-Wt?(lt.bi_buf|=Pt<<lt.bi_valid&65535,xe(lt,lt.bi_buf),lt.bi_buf=Pt>>F-lt.bi_valid,lt.bi_valid+=Wt-F):(lt.bi_buf|=Pt<<lt.bi_valid&65535,lt.bi_valid+=Wt)}function we(lt,Pt,Wt){Fe(lt,Wt[2*Pt],Wt[2*Pt+1])}function qe(lt,Pt){for(var Wt=0;Wt|=1&lt,lt>>>=1,Wt<<=1,0<--Pt;);return Wt>>>1}function fe(lt,Pt,Wt){var ee,Dt,ve=new Array(z+1),Te=0;for(ee=1;ee<=z;ee++)ve[ee]=Te=Te+Wt[ee-1]<<1;for(Dt=0;Dt<=Pt;Dt++){var Ae=lt[2*Dt+1];Ae!==0&&(lt[2*Dt]=qe(ve[Ae]++,Ae))}}function ge(lt){var Pt;for(Pt=0;Pt<w;Pt++)lt.dyn_ltree[2*Pt]=0;for(Pt=0;Pt<E;Pt++)lt.dyn_dtree[2*Pt]=0;for(Pt=0;Pt<L;Pt++)lt.bl_tree[2*Pt]=0;lt.dyn_ltree[2*B]=1,lt.opt_len=lt.static_len=0,lt.last_lit=lt.matches=0}function ne(lt){8<lt.bi_valid?xe(lt,lt.bi_buf):0<lt.bi_valid&&(lt.pending_buf[lt.pending++]=lt.bi_buf),lt.bi_buf=0,lt.bi_valid=0}function Se(lt,Pt,Wt,ee){var Dt=2*Pt,ve=2*Wt;return lt[Dt]<lt[ve]||lt[Dt]===lt[ve]&&ee[Pt]<=ee[Wt]}function We(lt,Pt,Wt){for(var ee=lt.heap[Wt],Dt=Wt<<1;Dt<=lt.heap_len&&(Dt<lt.heap_len&&Se(Pt,lt.heap[Dt+1],lt.heap[Dt],lt.depth)&&Dt++,!Se(Pt,ee,lt.heap[Dt],lt.depth));)lt.heap[Wt]=lt.heap[Dt],Wt=Dt,Dt<<=1;lt.heap[Wt]=ee}function In(lt,Pt,Wt){var ee,Dt,ve,Te,Ae=0;if(lt.last_lit!==0)for(;ee=lt.pending_buf[lt.d_buf+2*Ae]<<8|lt.pending_buf[lt.d_buf+2*Ae+1],Dt=lt.pending_buf[lt.l_buf+Ae],Ae++,ee===0?we(lt,Dt,Pt):(we(lt,(ve=Z[Dt])+A+1,Pt),(Te=tt[ve])!==0&&Fe(lt,Dt-=Kt[ve],Te),we(lt,ve=Ut(--ee),Wt),(Te=Y[ve])!==0&&Fe(lt,ee-=ue[ve],Te)),Ae<lt.last_lit;);we(lt,B,Pt)}function _t(lt,Pt){var Wt,ee,Dt,ve=Pt.dyn_tree,Te=Pt.stat_desc.static_tree,Ae=Pt.stat_desc.has_stree,De=Pt.stat_desc.elems,un=-1;for(lt.heap_len=0,lt.heap_max=k,Wt=0;Wt<De;Wt++)ve[2*Wt]!==0?(lt.heap[++lt.heap_len]=un=Wt,lt.depth[Wt]=0):ve[2*Wt+1]=0;for(;lt.heap_len<2;)ve[2*(Dt=lt.heap[++lt.heap_len]=un<2?++un:0)]=1,lt.depth[Dt]=0,lt.opt_len--,Ae&&(lt.static_len-=Te[2*Dt+1]);for(Pt.max_code=un,Wt=lt.heap_len>>1;1<=Wt;Wt--)We(lt,ve,Wt);for(Dt=De;Wt=lt.heap[1],lt.heap[1]=lt.heap[lt.heap_len--],We(lt,ve,1),ee=lt.heap[1],lt.heap[--lt.heap_max]=Wt,lt.heap[--lt.heap_max]=ee,ve[2*Dt]=ve[2*Wt]+ve[2*ee],lt.depth[Dt]=(lt.depth[Wt]>=lt.depth[ee]?lt.depth[Wt]:lt.depth[ee])+1,ve[2*Wt+1]=ve[2*ee+1]=Dt,lt.heap[1]=Dt++,We(lt,ve,1),2<=lt.heap_len;);lt.heap[--lt.heap_max]=lt.heap[1],function(gn,re){var ce,_e,Ue,en,Un,lr,Gn=re.dyn_tree,zr=re.max_code,ur=re.stat_desc.static_tree,Fn=re.stat_desc.has_stree,Jn=re.stat_desc.extra_bits,gr=re.stat_desc.extra_base,rr=re.stat_desc.max_length,Mi=0;for(en=0;en<=z;en++)gn.bl_count[en]=0;for(Gn[2*gn.heap[gn.heap_max]+1]=0,ce=gn.heap_max+1;ce<k;ce++)rr<(en=Gn[2*Gn[2*(_e=gn.heap[ce])+1]+1]+1)&&(en=rr,Mi++),Gn[2*_e+1]=en,zr<_e||(gn.bl_count[en]++,Un=0,gr<=_e&&(Un=Jn[_e-gr]),lr=Gn[2*_e],gn.opt_len+=lr*(en+Un),Fn&&(gn.static_len+=lr*(ur[2*_e+1]+Un)));if(Mi!==0){do{for(en=rr-1;gn.bl_count[en]===0;)en--;gn.bl_count[en]--,gn.bl_count[en+1]+=2,gn.bl_count[rr]--,Mi-=2}while(0<Mi);for(en=rr;en!==0;en--)for(_e=gn.bl_count[en];_e!==0;)zr<(Ue=gn.heap[--ce])||(Gn[2*Ue+1]!==en&&(gn.opt_len+=(en-Gn[2*Ue+1])*Gn[2*Ue],Gn[2*Ue+1]=en),_e--)}}(lt,Pt),fe(ve,un,lt.bl_count)}function N(lt,Pt,Wt){var ee,Dt,ve=-1,Te=Pt[1],Ae=0,De=7,un=4;for(Te===0&&(De=138,un=3),Pt[2*(Wt+1)+1]=65535,ee=0;ee<=Wt;ee++)Dt=Te,Te=Pt[2*(ee+1)+1],++Ae<De&&Dt===Te||(Ae<un?lt.bl_tree[2*Dt]+=Ae:Dt!==0?(Dt!==ve&&lt.bl_tree[2*Dt]++,lt.bl_tree[2*U]++):Ae<=10?lt.bl_tree[2*$]++:lt.bl_tree[2*q]++,ve=Dt,un=(Ae=0)===Te?(De=138,3):Dt===Te?(De=6,3):(De=7,4))}function Et(lt,Pt,Wt){var ee,Dt,ve=-1,Te=Pt[1],Ae=0,De=7,un=4;for(Te===0&&(De=138,un=3),ee=0;ee<=Wt;ee++)if(Dt=Te,Te=Pt[2*(ee+1)+1],!(++Ae<De&&Dt===Te)){if(Ae<un)for(;we(lt,Dt,lt.bl_tree),--Ae!=0;);else Dt!==0?(Dt!==ve&&(we(lt,Dt,lt.bl_tree),Ae--),we(lt,U,lt.bl_tree),Fe(lt,Ae-3,2)):Ae<=10?(we(lt,$,lt.bl_tree),Fe(lt,Ae-3,3)):(we(lt,q,lt.bl_tree),Fe(lt,Ae-11,7));ve=Dt,un=(Ae=0)===Te?(De=138,3):Dt===Te?(De=6,3):(De=7,4)}}m(ue);var wt=!1;function ht(lt,Pt,Wt,ee){Fe(lt,(y<<1)+(ee?1:0),3),function(Dt,ve,Te,Ae){ne(Dt),xe(Dt,Te),xe(Dt,~Te),l.arraySet(Dt.pending_buf,Dt.window,ve,Te,Dt.pending),Dt.pending+=Te}(lt,Pt,Wt)}s._tr_init=function(lt){wt||(function(){var Pt,Wt,ee,Dt,ve,Te=new Array(z+1);for(Dt=ee=0;Dt<x-1;Dt++)for(Kt[Dt]=ee,Pt=0;Pt<1<<tt[Dt];Pt++)Z[ee++]=Dt;for(Z[ee-1]=Dt,Dt=ve=0;Dt<16;Dt++)for(ue[Dt]=ve,Pt=0;Pt<1<<Y[Dt];Pt++)ot[ve++]=Dt;for(ve>>=7;Dt<E;Dt++)for(ue[Dt]=ve<<7,Pt=0;Pt<1<<Y[Dt]-7;Pt++)ot[256+ve++]=Dt;for(Wt=0;Wt<=z;Wt++)Te[Wt]=0;for(Pt=0;Pt<=143;)pt[2*Pt+1]=8,Pt++,Te[8]++;for(;Pt<=255;)pt[2*Pt+1]=9,Pt++,Te[9]++;for(;Pt<=279;)pt[2*Pt+1]=7,Pt++,Te[7]++;for(;Pt<=287;)pt[2*Pt+1]=8,Pt++,Te[8]++;for(fe(pt,w+1,Te),Pt=0;Pt<E;Pt++)Q[2*Pt+1]=5,Q[2*Pt]=qe(Pt,5);Ft=new je(pt,tt,A+1,w,z),Tt=new je(Q,Y,0,E,z),ie=new je(new Array(0),G,0,L,D)}(),wt=!0),lt.l_desc=new jt(lt.dyn_ltree,Ft),lt.d_desc=new jt(lt.dyn_dtree,Tt),lt.bl_desc=new jt(lt.bl_tree,ie),lt.bi_buf=0,lt.bi_valid=0,ge(lt)},s._tr_stored_block=ht,s._tr_flush_block=function(lt,Pt,Wt,ee){var Dt,ve,Te=0;0<lt.level?(lt.strm.data_type===2&&(lt.strm.data_type=function(Ae){var De,un=4093624447;for(De=0;De<=31;De++,un>>>=1)if(1&un&&Ae.dyn_ltree[2*De]!==0)return i;if(Ae.dyn_ltree[18]!==0||Ae.dyn_ltree[20]!==0||Ae.dyn_ltree[26]!==0)return f;for(De=32;De<A;De++)if(Ae.dyn_ltree[2*De]!==0)return f;return i}(lt)),_t(lt,lt.l_desc),_t(lt,lt.d_desc),Te=function(Ae){var De;for(N(Ae,Ae.dyn_ltree,Ae.l_desc.max_code),N(Ae,Ae.dyn_dtree,Ae.d_desc.max_code),_t(Ae,Ae.bl_desc),De=L-1;3<=De&&Ae.bl_tree[2*rt[De]+1]===0;De--);return Ae.opt_len+=3*(De+1)+5+5+4,De}(lt),Dt=lt.opt_len+3+7>>>3,(ve=lt.static_len+3+7>>>3)<=Dt&&(Dt=ve)):Dt=ve=Wt+5,Wt+4<=Dt&&Pt!==-1?ht(lt,Pt,Wt,ee):lt.strategy===4||ve===Dt?(Fe(lt,2+(ee?1:0),3),In(lt,pt,Q)):(Fe(lt,4+(ee?1:0),3),function(Ae,De,un,gn){var re;for(Fe(Ae,De-257,5),Fe(Ae,un-1,5),Fe(Ae,gn-4,4),re=0;re<gn;re++)Fe(Ae,Ae.bl_tree[2*rt[re]+1],3);Et(Ae,Ae.dyn_ltree,De-1),Et(Ae,Ae.dyn_dtree,un-1)}(lt,lt.l_desc.max_code+1,lt.d_desc.max_code+1,Te+1),In(lt,lt.dyn_ltree,lt.dyn_dtree)),ge(lt),ee&&ne(lt)},s._tr_tally=function(lt,Pt,Wt){return lt.pending_buf[lt.d_buf+2*lt.last_lit]=Pt>>>8&255,lt.pending_buf[lt.d_buf+2*lt.last_lit+1]=255&Pt,lt.pending_buf[lt.l_buf+lt.last_lit]=255&Wt,lt.last_lit++,Pt===0?lt.dyn_ltree[2*Wt]++:(lt.matches++,Pt--,lt.dyn_ltree[2*(Z[Wt]+A+1)]++,lt.dyn_dtree[2*Ut(Pt)]++),lt.last_lit===lt.lit_bufsize-1},s._tr_align=function(lt){Fe(lt,2,3),we(lt,B,pt),function(Pt){Pt.bi_valid===16?(xe(Pt,Pt.bi_buf),Pt.bi_buf=0,Pt.bi_valid=0):8<=Pt.bi_valid&&(Pt.pending_buf[Pt.pending++]=255&Pt.bi_buf,Pt.bi_buf>>=8,Pt.bi_valid-=8)}(lt)}},{"../utils/common":41}],53:[function(n,a,s){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,a,s){(function(l){(function(i,f){if(!i.setImmediate){var m,y,x,A,w=1,E={},L=!1,k=i.document,z=Object.getPrototypeOf&&Object.getPrototypeOf(i);z=z&&z.setTimeout?z:i,m={}.toString.call(i.process)==="[object process]"?function(U){process.nextTick(function(){D(U)})}:function(){if(i.postMessage&&!i.importScripts){var U=!0,$=i.onmessage;return i.onmessage=function(){U=!1},i.postMessage("","*"),i.onmessage=$,U}}()?(A="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",B,!1):i.attachEvent("onmessage",B),function(U){i.postMessage(A+U,"*")}):i.MessageChannel?((x=new MessageChannel).port1.onmessage=function(U){D(U.data)},function(U){x.port2.postMessage(U)}):k&&"onreadystatechange"in k.createElement("script")?(y=k.documentElement,function(U){var $=k.createElement("script");$.onreadystatechange=function(){D(U),$.onreadystatechange=null,y.removeChild($),$=null},y.appendChild($)}):function(U){setTimeout(D,0,U)},z.setImmediate=function(U){typeof U!="function"&&(U=new Function(""+U));for(var $=new Array(arguments.length-1),q=0;q<$.length;q++)$[q]=arguments[q+1];var tt={callback:U,args:$};return E[w]=tt,m(w),w++},z.clearImmediate=F}function F(U){delete E[U]}function D(U){if(L)setTimeout(D,0,U);else{var $=E[U];if($){L=!0;try{(function(q){var tt=q.callback,Y=q.args;switch(Y.length){case 0:tt();break;case 1:tt(Y[0]);break;case 2:tt(Y[0],Y[1]);break;case 3:tt(Y[0],Y[1],Y[2]);break;default:tt.apply(f,Y)}})($)}finally{F(U),L=!1}}}}function B(U){U.source===i&&typeof U.data=="string"&&U.data.indexOf(A)===0&&D(+U.data.slice(A.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof ca<"u"?ca:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(OM);var dR=OM.exports,pR=LM,bv=Eg,mR=PM,gR=dR,RM=function(t,e,n=!1){let a=new gR,s=a;e&&e.folder&&(s=a.folder(e.folder));var l=e&&e.prj?e.prj:mR;[bv.point(t),bv.line(t),bv.polygon(t),bv.multipolygon(t),bv.multiline(t)].forEach(function(f){f.geometries.length&&f.geometries[0].length&&pR(f.properties,f.type,f.geometries,function(m,y){var x=e&&e.types&&e.types[f.type.toLowerCase()]?e.types[f.type.toLowerCase()]:f.type;s.file(x+".shp",y.shp.buffer,{binary:!0}),s.file(x+".shx",y.shx.buffer,{binary:!0}),s.file(x+".dbf",y.dbf.buffer,{binary:!0}),s.file(x+".prj",l)})});var i={};return!e||!e.outputType?i.type="base64":i.type=e.outputType,!e||!e.compression?i.compression="DEFLATE":i.compression=e.compression,n?a.generateNodeStream({...i,streamFiles:!0}):a.generateAsync(i)},DM={exports:{}};(function(t,e){(function(n,a){a()})(ca,function(){function n(y,x){return typeof x>"u"?x={autoBom:!1}:typeof x!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),x={autoBom:!x}),x.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function a(y,x,A){var w=new XMLHttpRequest;w.open("GET",y),w.responseType="blob",w.onload=function(){m(w.response,x,A)},w.onerror=function(){console.error("could not download file")},w.send()}function s(y){var x=new XMLHttpRequest;x.open("HEAD",y,!1);try{x.send()}catch{}return 200<=x.status&&299>=x.status}function l(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var x=document.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(x)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ca=="object"&&ca.global===ca?ca:void 0,f=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(y,x,A){var w=i.URL||i.webkitURL,E=document.createElement("a");x=x||y.name||"download",E.download=x,E.rel="noopener",typeof y=="string"?(E.href=y,E.origin===location.origin?l(E):s(E.href)?a(y,x,A):l(E,E.target="_blank")):(E.href=w.createObjectURL(y),setTimeout(function(){w.revokeObjectURL(E.href)},4e4),setTimeout(function(){l(E)},0))}:"msSaveOrOpenBlob"in navigator?function(y,x,A){if(x=x||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(n(y,A),x);else if(s(y))a(y,x,A);else{var w=document.createElement("a");w.href=y,w.target="_blank",setTimeout(function(){l(w)})}}:function(y,x,A,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof y=="string")return a(y,x,A);var E=y.type==="application/octet-stream",L=/constructor/i.test(i.HTMLElement)||i.safari,k=/CriOS\/[\d]+/.test(navigator.userAgent);if((k||E&&L||f)&&typeof FileReader<"u"){var z=new FileReader;z.onloadend=function(){var B=z.result;B=k?B:B.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=B:location=B,w=null},z.readAsDataURL(y)}else{var F=i.URL||i.webkitURL,D=F.createObjectURL(y);w?w.location=D:location.href=D,w=null,setTimeout(function(){F.revokeObjectURL(D)},4e4)}});i.saveAs=m.saveAs=m,t.exports=m})})(DM);var zM=DM.exports;const vR=Fp(zM);var yR=RM,_R=zM.saveAs,bR=function(t,e){let n="download";e&&(e.filename||e.folder)&&(n=e.filename||e.folder),yR(t,e).then(function(a){_R(a,n+".zip")})};G_.download=bR;G_.write=LM;G_.zip=RM;var BM={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,a)=>{t.exports=a()})(ca,function n(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},s,l=!a.document&&!!a.postMessage,i=a.IS_PAPA_WORKER||!1,f={},m=0,y={};function x(Y){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(G){var rt=$(G);rt.chunkSize=parseInt(rt.chunkSize),G.step||G.chunk||(rt.chunkSize=null),this._handle=new k(rt),(this._handle.streamer=this)._config=rt}).call(this,Y),this.parseChunk=function(G,rt){var pt=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<pt){let ot=this._config.newline;ot||(Q=this._config.quoteChar||'"',ot=this._handle.guessLineEndings(G,Q)),G=[...G.split(ot).slice(pt)].join(ot)}this.isFirstChunk&&tt(this._config.beforeFirstChunk)&&(Q=this._config.beforeFirstChunk(G))!==void 0&&(G=Q),this.isFirstChunk=!1,this._halted=!1;var pt=this._partialLine+G,Q=(this._partialLine="",this._handle.parse(pt,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(G=Q.meta.cursor,pt=(this._finished||(this._partialLine=pt.substring(G-this._baseIndex),this._baseIndex=G),Q&&Q.data&&(this._rowCount+=Q.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),i)a.postMessage({results:Q,workerId:y.WORKER_ID,finished:pt});else if(tt(this._config.chunk)&&!rt){if(this._config.chunk(Q,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Q=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Q.data),this._completeResults.errors=this._completeResults.errors.concat(Q.errors),this._completeResults.meta=Q.meta),this._completed||!pt||!tt(this._config.complete)||Q&&Q.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),pt||Q&&Q.meta.paused||this._nextChunk(),Q}this._halted=!0},this._sendError=function(G){tt(this._config.error)?this._config.error(G):i&&this._config.error&&a.postMessage({workerId:y.WORKER_ID,error:G,finished:!1})}}function A(Y){var G;(Y=Y||{}).chunkSize||(Y.chunkSize=y.RemoteChunkSize),x.call(this,Y),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(rt){this._input=rt,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(G=new XMLHttpRequest,this._config.withCredentials&&(G.withCredentials=this._config.withCredentials),l||(G.onload=q(this._chunkLoaded,this),G.onerror=q(this._chunkError,this)),G.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var rt,pt=this._config.downloadRequestHeaders;for(rt in pt)G.setRequestHeader(rt,pt[rt])}var Q;this._config.chunkSize&&(Q=this._start+this._config.chunkSize-1,G.setRequestHeader("Range","bytes="+this._start+"-"+Q));try{G.send(this._config.downloadRequestBody)}catch(ot){this._chunkError(ot.message)}l&&G.status===0&&this._chunkError()}},this._chunkLoaded=function(){G.readyState===4&&(G.status<200||400<=G.status?this._chunkError():(this._start+=this._config.chunkSize||G.responseText.length,this._finished=!this._config.chunkSize||this._start>=(rt=>(rt=rt.getResponseHeader("Content-Range"))!==null?parseInt(rt.substring(rt.lastIndexOf("/")+1)):-1)(G),this.parseChunk(G.responseText)))},this._chunkError=function(rt){rt=G.statusText||rt,this._sendError(new Error(rt))}}function w(Y){(Y=Y||{}).chunkSize||(Y.chunkSize=y.LocalChunkSize),x.call(this,Y);var G,rt,pt=typeof FileReader<"u";this.stream=function(Q){this._input=Q,rt=Q.slice||Q.webkitSlice||Q.mozSlice,pt?((G=new FileReader).onload=q(this._chunkLoaded,this),G.onerror=q(this._chunkError,this)):G=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Q=this._input,ot=(this._config.chunkSize&&(ot=Math.min(this._start+this._config.chunkSize,this._input.size),Q=rt.call(Q,this._start,ot)),G.readAsText(Q,this._config.encoding));pt||this._chunkLoaded({target:{result:ot}})},this._chunkLoaded=function(Q){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Q.target.result)},this._chunkError=function(){this._sendError(G.error)}}function E(Y){var G;x.call(this,Y=Y||{}),this.stream=function(rt){return G=rt,this._nextChunk()},this._nextChunk=function(){var rt,pt;if(!this._finished)return rt=this._config.chunkSize,G=rt?(pt=G.substring(0,rt),G.substring(rt)):(pt=G,""),this._finished=!G,this.parseChunk(pt)}}function L(Y){x.call(this,Y=Y||{});var G=[],rt=!0,pt=!1;this.pause=function(){x.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){x.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Q){this._input=Q,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){pt&&G.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),G.length?this.parseChunk(G.shift()):rt=!0},this._streamData=q(function(Q){try{G.push(typeof Q=="string"?Q:Q.toString(this._config.encoding)),rt&&(rt=!1,this._checkIsFinished(),this.parseChunk(G.shift()))}catch(ot){this._streamError(ot)}},this),this._streamError=q(function(Q){this._streamCleanUp(),this._sendError(Q)},this),this._streamEnd=q(function(){this._streamCleanUp(),pt=!0,this._streamData("")},this),this._streamCleanUp=q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function k(Y){var G,rt,pt,Q,ot=Math.pow(2,53),Z=-ot,Kt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Ft=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Tt=this,ie=0,ue=0,je=!1,jt=!1,Ut=[],xe={data:[],errors:[],meta:{}};function Fe(ge){return Y.skipEmptyLines==="greedy"?ge.join("").trim()==="":ge.length===1&&ge[0].length===0}function we(){if(xe&&pt&&(fe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+y.DefaultDelimiter+"'"),pt=!1),Y.skipEmptyLines&&(xe.data=xe.data.filter(function(We){return!Fe(We)})),qe()){let We=function(In,_t){tt(Y.transformHeader)&&(In=Y.transformHeader(In,_t)),Ut.push(In)};if(xe)if(Array.isArray(xe.data[0])){for(var ge=0;qe()&&ge<xe.data.length;ge++)xe.data[ge].forEach(We);xe.data.splice(0,1)}else xe.data.forEach(We)}function ne(We,In){for(var _t=Y.header?{}:[],N=0;N<We.length;N++){var Et=N,wt=We[N],wt=((ht,lt)=>(Pt=>(Y.dynamicTypingFunction&&Y.dynamicTyping[Pt]===void 0&&(Y.dynamicTyping[Pt]=Y.dynamicTypingFunction(Pt)),(Y.dynamicTyping[Pt]||Y.dynamicTyping)===!0))(ht)?lt==="true"||lt==="TRUE"||lt!=="false"&&lt!=="FALSE"&&((Pt=>{if(Kt.test(Pt)&&(Pt=parseFloat(Pt),Z<Pt&&Pt<ot))return 1})(lt)?parseFloat(lt):Ft.test(lt)?new Date(lt):lt===""?null:lt):lt)(Et=Y.header?N>=Ut.length?"__parsed_extra":Ut[N]:Et,wt=Y.transform?Y.transform(wt,Et):wt);Et==="__parsed_extra"?(_t[Et]=_t[Et]||[],_t[Et].push(wt)):_t[Et]=wt}return Y.header&&(N>Ut.length?fe("FieldMismatch","TooManyFields","Too many fields: expected "+Ut.length+" fields but parsed "+N,ue+In):N<Ut.length&&fe("FieldMismatch","TooFewFields","Too few fields: expected "+Ut.length+" fields but parsed "+N,ue+In)),_t}var Se;xe&&(Y.header||Y.dynamicTyping||Y.transform)&&(Se=1,!xe.data.length||Array.isArray(xe.data[0])?(xe.data=xe.data.map(ne),Se=xe.data.length):xe.data=ne(xe.data,0),Y.header&&xe.meta&&(xe.meta.fields=Ut),ue+=Se)}function qe(){return Y.header&&Ut.length===0}function fe(ge,ne,Se,We){ge={type:ge,code:ne,message:Se},We!==void 0&&(ge.row=We),xe.errors.push(ge)}tt(Y.step)&&(Q=Y.step,Y.step=function(ge){xe=ge,qe()?we():(we(),xe.data.length!==0&&(ie+=ge.data.length,Y.preview&&ie>Y.preview?rt.abort():(xe.data=xe.data[0],Q(xe,Tt))))}),this.parse=function(ge,ne,Se){var We=Y.quoteChar||'"',We=(Y.newline||(Y.newline=this.guessLineEndings(ge,We)),pt=!1,Y.delimiter?tt(Y.delimiter)&&(Y.delimiter=Y.delimiter(ge),xe.meta.delimiter=Y.delimiter):((We=((In,_t,N,Et,wt)=>{var ht,lt,Pt,Wt;wt=wt||[",","	","|",";",y.RECORD_SEP,y.UNIT_SEP];for(var ee=0;ee<wt.length;ee++){for(var Dt,ve=wt[ee],Te=0,Ae=0,De=0,un=(Pt=void 0,new F({comments:Et,delimiter:ve,newline:_t,preview:10}).parse(In)),gn=0;gn<un.data.length;gn++)N&&Fe(un.data[gn])?De++:(Dt=un.data[gn].length,Ae+=Dt,Pt===void 0?Pt=Dt:0<Dt&&(Te+=Math.abs(Dt-Pt),Pt=Dt));0<un.data.length&&(Ae/=un.data.length-De),(lt===void 0||Te<=lt)&&(Wt===void 0||Wt<Ae)&&1.99<Ae&&(lt=Te,ht=ve,Wt=Ae)}return{successful:!!(Y.delimiter=ht),bestDelimiter:ht}})(ge,Y.newline,Y.skipEmptyLines,Y.comments,Y.delimitersToGuess)).successful?Y.delimiter=We.bestDelimiter:(pt=!0,Y.delimiter=y.DefaultDelimiter),xe.meta.delimiter=Y.delimiter),$(Y));return Y.preview&&Y.header&&We.preview++,G=ge,rt=new F(We),xe=rt.parse(G,ne,Se),we(),je?{meta:{paused:!0}}:xe||{meta:{paused:!1}}},this.paused=function(){return je},this.pause=function(){je=!0,rt.abort(),G=tt(Y.chunk)?"":G.substring(rt.getCharIndex())},this.resume=function(){Tt.streamer._halted?(je=!1,Tt.streamer.parseChunk(G,!0)):setTimeout(Tt.resume,3)},this.aborted=function(){return jt},this.abort=function(){jt=!0,rt.abort(),xe.meta.aborted=!0,tt(Y.complete)&&Y.complete(xe),G=""},this.guessLineEndings=function(In,We){In=In.substring(0,1048576);var We=new RegExp(z(We)+"([^]*?)"+z(We),"gm"),Se=(In=In.replace(We,"")).split("\r"),We=In.split(`
`),In=1<We.length&&We[0].length<Se[0].length;if(Se.length===1||In)return`
`;for(var _t=0,N=0;N<Se.length;N++)Se[N][0]===`
`&&_t++;return _t>=Se.length/2?`\r
`:"\r"}}function z(Y){return Y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function F(Y){var G=(Y=Y||{}).delimiter,rt=Y.newline,pt=Y.comments,Q=Y.step,ot=Y.preview,Z=Y.fastMode,Kt=null,Ft=!1,Tt=Y.quoteChar==null?'"':Y.quoteChar,ie=Tt;if(Y.escapeChar!==void 0&&(ie=Y.escapeChar),(typeof G!="string"||-1<y.BAD_DELIMITERS.indexOf(G))&&(G=","),pt===G)throw new Error("Comment character same as delimiter");pt===!0?pt="#":(typeof pt!="string"||-1<y.BAD_DELIMITERS.indexOf(pt))&&(pt=!1),rt!==`
`&&rt!=="\r"&&rt!==`\r
`&&(rt=`
`);var ue=0,je=!1;this.parse=function(jt,Ut,xe){if(typeof jt!="string")throw new Error("Input must be a string");var Fe=jt.length,we=G.length,qe=rt.length,fe=pt.length,ge=tt(Q),ne=[],Se=[],We=[],In=ue=0;if(!jt)return Te();if(Z||Z!==!1&&jt.indexOf(Tt)===-1){for(var _t=jt.split(rt),N=0;N<_t.length;N++){if(We=_t[N],ue+=We.length,N!==_t.length-1)ue+=rt.length;else if(xe)return Te();if(!pt||We.substring(0,fe)!==pt){if(ge){if(ne=[],Wt(We.split(G)),Ae(),je)return Te()}else Wt(We.split(G));if(ot&&ot<=N)return ne=ne.slice(0,ot),Te(!0)}}return Te()}for(var Et=jt.indexOf(G,ue),wt=jt.indexOf(rt,ue),ht=new RegExp(z(ie)+z(Tt),"g"),lt=jt.indexOf(Tt,ue);;)if(jt[ue]===Tt)for(lt=ue,ue++;;){if((lt=jt.indexOf(Tt,lt+1))===-1)return xe||Se.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ne.length,index:ue}),Dt();if(lt===Fe-1)return Dt(jt.substring(ue,lt).replace(ht,Tt));if(Tt===ie&&jt[lt+1]===ie)lt++;else if(Tt===ie||lt===0||jt[lt-1]!==ie){Et!==-1&&Et<lt+1&&(Et=jt.indexOf(G,lt+1));var Pt=ee((wt=wt!==-1&&wt<lt+1?jt.indexOf(rt,lt+1):wt)===-1?Et:Math.min(Et,wt));if(jt.substr(lt+1+Pt,we)===G){We.push(jt.substring(ue,lt).replace(ht,Tt)),jt[ue=lt+1+Pt+we]!==Tt&&(lt=jt.indexOf(Tt,ue)),Et=jt.indexOf(G,ue),wt=jt.indexOf(rt,ue);break}if(Pt=ee(wt),jt.substring(lt+1+Pt,lt+1+Pt+qe)===rt){if(We.push(jt.substring(ue,lt).replace(ht,Tt)),ve(lt+1+Pt+qe),Et=jt.indexOf(G,ue),lt=jt.indexOf(Tt,ue),ge&&(Ae(),je))return Te();if(ot&&ne.length>=ot)return Te(!0);break}Se.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ne.length,index:ue}),lt++}}else if(pt&&We.length===0&&jt.substring(ue,ue+fe)===pt){if(wt===-1)return Te();ue=wt+qe,wt=jt.indexOf(rt,ue),Et=jt.indexOf(G,ue)}else if(Et!==-1&&(Et<wt||wt===-1))We.push(jt.substring(ue,Et)),ue=Et+we,Et=jt.indexOf(G,ue);else{if(wt===-1)break;if(We.push(jt.substring(ue,wt)),ve(wt+qe),ge&&(Ae(),je))return Te();if(ot&&ne.length>=ot)return Te(!0)}return Dt();function Wt(De){ne.push(De),In=ue}function ee(De){var un=0;return un=De!==-1&&(De=jt.substring(lt+1,De))&&De.trim()===""?De.length:un}function Dt(De){return xe||(De===void 0&&(De=jt.substring(ue)),We.push(De),ue=Fe,Wt(We),ge&&Ae()),Te()}function ve(De){ue=De,Wt(We),We=[],wt=jt.indexOf(rt,ue)}function Te(De){if(Y.header&&!Ut&&ne.length&&!Ft){var un=ne[0],gn={},re=new Set(un);let ce=!1;for(let _e=0;_e<un.length;_e++){let Ue=un[_e];if(gn[Ue=tt(Y.transformHeader)?Y.transformHeader(Ue,_e):Ue]){let en,Un=gn[Ue];for(;en=Ue+"_"+Un,Un++,re.has(en););re.add(en),un[_e]=en,gn[Ue]++,ce=!0,(Kt=Kt===null?{}:Kt)[en]=Ue}else gn[Ue]=1,un[_e]=Ue;re.add(Ue)}ce&&console.warn("Duplicate headers found and renamed."),Ft=!0}return{data:ne,errors:Se,meta:{delimiter:G,linebreak:rt,aborted:je,truncated:!!De,cursor:In+(Ut||0),renamedHeaders:Kt}}}function Ae(){Q(Te()),ne=[],Se=[]}},this.abort=function(){je=!0},this.getCharIndex=function(){return ue}}function D(Y){var G=Y.data,rt=f[G.workerId],pt=!1;if(G.error)rt.userError(G.error,G.file);else if(G.results&&G.results.data){var Q={abort:function(){pt=!0,B(G.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if(tt(rt.userStep)){for(var ot=0;ot<G.results.data.length&&(rt.userStep({data:G.results.data[ot],errors:G.results.errors,meta:G.results.meta},Q),!pt);ot++);delete G.results}else tt(rt.userChunk)&&(rt.userChunk(G.results,Q,G.file),delete G.results)}G.finished&&!pt&&B(G.workerId,G.results)}function B(Y,G){var rt=f[Y];tt(rt.userComplete)&&rt.userComplete(G),rt.terminate(),delete f[Y]}function U(){throw new Error("Not implemented.")}function $(Y){if(typeof Y!="object"||Y===null)return Y;var G,rt=Array.isArray(Y)?[]:{};for(G in Y)rt[G]=$(Y[G]);return rt}function q(Y,G){return function(){Y.apply(G,arguments)}}function tt(Y){return typeof Y=="function"}return y.parse=function(Y,G){var rt=(G=G||{}).dynamicTyping||!1;if(tt(rt)&&(G.dynamicTypingFunction=rt,rt={}),G.dynamicTyping=rt,G.transform=!!tt(G.transform)&&G.transform,!G.worker||!y.WORKERS_SUPPORTED)return rt=null,y.NODE_STREAM_INPUT,typeof Y=="string"?(Y=(pt=>pt.charCodeAt(0)!==65279?pt:pt.slice(1))(Y),rt=new(G.download?A:E)(G)):Y.readable===!0&&tt(Y.read)&&tt(Y.on)?rt=new L(G):(a.File&&Y instanceof File||Y instanceof Object)&&(rt=new w(G)),rt.stream(Y);(rt=(()=>{var pt;return!!y.WORKERS_SUPPORTED&&(pt=(()=>{var Q=a.URL||a.webkitURL||null,ot=n.toString();return y.BLOB_URL||(y.BLOB_URL=Q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ot,")();"],{type:"text/javascript"})))})(),(pt=new a.Worker(pt)).onmessage=D,pt.id=m++,f[pt.id]=pt)})()).userStep=G.step,rt.userChunk=G.chunk,rt.userComplete=G.complete,rt.userError=G.error,G.step=tt(G.step),G.chunk=tt(G.chunk),G.complete=tt(G.complete),G.error=tt(G.error),delete G.worker,rt.postMessage({input:Y,config:G,workerId:rt.id})},y.unparse=function(Y,G){var rt=!1,pt=!0,Q=",",ot=`\r
`,Z='"',Kt=Z+Z,Ft=!1,Tt=null,ie=!1,ue=((()=>{if(typeof G=="object"){if(typeof G.delimiter!="string"||y.BAD_DELIMITERS.filter(function(Ut){return G.delimiter.indexOf(Ut)!==-1}).length||(Q=G.delimiter),typeof G.quotes!="boolean"&&typeof G.quotes!="function"&&!Array.isArray(G.quotes)||(rt=G.quotes),typeof G.skipEmptyLines!="boolean"&&typeof G.skipEmptyLines!="string"||(Ft=G.skipEmptyLines),typeof G.newline=="string"&&(ot=G.newline),typeof G.quoteChar=="string"&&(Z=G.quoteChar),typeof G.header=="boolean"&&(pt=G.header),Array.isArray(G.columns)){if(G.columns.length===0)throw new Error("Option columns is empty");Tt=G.columns}G.escapeChar!==void 0&&(Kt=G.escapeChar+Z),G.escapeFormulae instanceof RegExp?ie=G.escapeFormulae:typeof G.escapeFormulae=="boolean"&&G.escapeFormulae&&(ie=/^[=+\-@\t\r].*$/)}})(),new RegExp(z(Z),"g"));if(typeof Y=="string"&&(Y=JSON.parse(Y)),Array.isArray(Y)){if(!Y.length||Array.isArray(Y[0]))return je(null,Y,Ft);if(typeof Y[0]=="object")return je(Tt||Object.keys(Y[0]),Y,Ft)}else if(typeof Y=="object")return typeof Y.data=="string"&&(Y.data=JSON.parse(Y.data)),Array.isArray(Y.data)&&(Y.fields||(Y.fields=Y.meta&&Y.meta.fields||Tt),Y.fields||(Y.fields=Array.isArray(Y.data[0])?Y.fields:typeof Y.data[0]=="object"?Object.keys(Y.data[0]):[]),Array.isArray(Y.data[0])||typeof Y.data[0]=="object"||(Y.data=[Y.data])),je(Y.fields||[],Y.data||[],Ft);throw new Error("Unable to serialize unrecognized input");function je(Ut,xe,Fe){var we="",qe=(typeof Ut=="string"&&(Ut=JSON.parse(Ut)),typeof xe=="string"&&(xe=JSON.parse(xe)),Array.isArray(Ut)&&0<Ut.length),fe=!Array.isArray(xe[0]);if(qe&&pt){for(var ge=0;ge<Ut.length;ge++)0<ge&&(we+=Q),we+=jt(Ut[ge],ge);0<xe.length&&(we+=ot)}for(var ne=0;ne<xe.length;ne++){var Se=(qe?Ut:xe[ne]).length,We=!1,In=qe?Object.keys(xe[ne]).length===0:xe[ne].length===0;if(Fe&&!qe&&(We=Fe==="greedy"?xe[ne].join("").trim()==="":xe[ne].length===1&&xe[ne][0].length===0),Fe==="greedy"&&qe){for(var _t=[],N=0;N<Se;N++){var Et=fe?Ut[N]:N;_t.push(xe[ne][Et])}We=_t.join("").trim()===""}if(!We){for(var wt=0;wt<Se;wt++){0<wt&&!In&&(we+=Q);var ht=qe&&fe?Ut[wt]:wt;we+=jt(xe[ne][ht],wt)}ne<xe.length-1&&(!Fe||0<Se&&!In)&&(we+=ot)}}return we}function jt(Ut,xe){var Fe,we;return Ut==null?"":Ut.constructor===Date?JSON.stringify(Ut).slice(1,25):(we=!1,ie&&typeof Ut=="string"&&ie.test(Ut)&&(Ut="'"+Ut,we=!0),Fe=Ut.toString().replace(ue,Kt),(we=we||rt===!0||typeof rt=="function"&&rt(Ut,xe)||Array.isArray(rt)&&rt[xe]||((qe,fe)=>{for(var ge=0;ge<fe.length;ge++)if(-1<qe.indexOf(fe[ge]))return!0;return!1})(Fe,y.BAD_DELIMITERS)||-1<Fe.indexOf(Q)||Fe.charAt(0)===" "||Fe.charAt(Fe.length-1)===" ")?Z+Fe+Z:Fe)}},y.RECORD_SEP="",y.UNIT_SEP="",y.BYTE_ORDER_MARK="\uFEFF",y.BAD_DELIMITERS=["\r",`
`,'"',y.BYTE_ORDER_MARK],y.WORKERS_SUPPORTED=!l&&!!a.Worker,y.NODE_STREAM_INPUT=1,y.LocalChunkSize=10485760,y.RemoteChunkSize=5242880,y.DefaultDelimiter=",",y.Parser=F,y.ParserHandle=k,y.NetworkStreamer=A,y.FileStreamer=w,y.StringStreamer=E,y.ReadableStreamStreamer=L,a.jQuery&&((s=a.jQuery).fn.parse=function(Y){var G=Y.config||{},rt=[];return this.each(function(ot){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var Z=0;Z<this.files.length;Z++)rt.push({file:this.files[Z],inputElem:this,instanceConfig:s.extend({},G)})}),pt(),this;function pt(){if(rt.length===0)tt(Y.complete)&&Y.complete();else{var ot,Z,Kt,Ft,Tt=rt[0];if(tt(Y.before)){var ie=Y.before(Tt.file,Tt.inputElem);if(typeof ie=="object"){if(ie.action==="abort")return ot="AbortError",Z=Tt.file,Kt=Tt.inputElem,Ft=ie.reason,void(tt(Y.error)&&Y.error({name:ot},Z,Kt,Ft));if(ie.action==="skip")return void Q();typeof ie.config=="object"&&(Tt.instanceConfig=s.extend(Tt.instanceConfig,ie.config))}else if(ie==="skip")return void Q()}var ue=Tt.instanceConfig.complete;Tt.instanceConfig.complete=function(je){tt(ue)&&ue(je,Tt.file,Tt.inputElem),Q()},y.parse(Tt.file,Tt.instanceConfig)}}function Q(){rt.splice(0,1),pt()}}),i&&(a.onmessage=function(Y){Y=Y.data,y.WORKER_ID===void 0&&Y&&(y.WORKER_ID=Y.workerId),typeof Y.input=="string"?a.postMessage({workerId:y.WORKER_ID,results:y.parse(Y.input,Y.config),finished:!0}):(a.File&&Y.input instanceof File||Y.input instanceof Object)&&(Y=y.parse(Y.input,Y.config))&&a.postMessage({workerId:y.WORKER_ID,results:Y,finished:!0})}),(A.prototype=Object.create(x.prototype)).constructor=A,(w.prototype=Object.create(x.prototype)).constructor=w,(E.prototype=Object.create(E.prototype)).constructor=E,(L.prototype=Object.create(x.prototype)).constructor=L,y})})(BM);var xR=BM.exports;const AR=Fp(xR);var Ry={};Ry.attr=Dw;Ry.tagClose=wR;Ry.tag=CR;Ry.encode=IR;function Dw(t){return t&&t.length?" "+t.map(function(e){return e[0]+'="'+e[1]+'"'}).join(" "):""}function wR(t,e){return"<"+t+Dw(e)+"/>"}function CR(t,e,n){return"<"+t+Dw(n)+">"+e+"</"+t+">"}function IR(t){return(t===null?"":t.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var FM=Ry,pi=FM.tag,fy=FM.encode,ER=function(e,n){return n=n||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"},'<?xml version="1.0" encoding="UTF-8"?>'+pi("kml",pi("Document",MR(n)+TR(n)+SR(e,n)),[["xmlns","http://www.opengis.net/kml/2.2"]])};function Sx(t,e){return function(n){if(!n.properties||!gc.valid(n.geometry))return"";var a=gc.any(n.geometry);if(!a)return"";var s="",l="";if(t.simplestyle){var i=VR(n.properties);i&&(gc.isPoint(n.geometry)&&DR(n.properties)?(e.indexOf(i)===-1&&(s=zR(n.properties,i),e.push(i)),l=pi("styleUrl","#"+i)):(gc.isPolygon(n.geometry)||gc.isLine(n.geometry))&&NR(n.properties)&&(e.indexOf(i)===-1&&(s=UR(n.properties,i),e.push(i)),l=pi("styleUrl","#"+i)))}return s+pi("Placemark",PR(n.properties,t)+kR(n.properties,t)+OR(n.properties)+LR(n.properties,t)+a+l)}}function SR(t,e){if(!t.type)return"";var n=[];switch(t.type){case"FeatureCollection":return t.features?t.features.map(Sx(e,n)).join(""):"";case"Feature":return Sx(e,n)(t);default:return Sx(e,n)({type:"Feature",geometry:t,properties:{}})}}function MR(t){return t.documentName!==void 0?pi("name",t.documentName):""}function TR(t){return t.documentDescription!==void 0?pi("description",t.documentDescription):""}function PR(t,e){return t[e.name]?pi("name",fy(t[e.name])):""}function kR(t,e){return t[e.description]?pi("description",fy(t[e.description])):""}function LR(t,e){return t[e.timestamp]?pi("TimeStamp",pi("when",fy(t[e.timestamp]))):""}var gc={Point:function(t){return pi("Point",pi("coordinates",t.coordinates.join(",")))},LineString:function(t){return pi("LineString",pi("coordinates",Mx(t.coordinates)))},Polygon:function(t){if(!t.coordinates.length)return"";var e=t.coordinates[0],n=t.coordinates.slice(1),a=pi("outerBoundaryIs",pi("LinearRing",pi("coordinates",Mx(e)))),s=n.map(function(l){return pi("innerBoundaryIs",pi("LinearRing",pi("coordinates",Mx(l))))}).join("");return pi("Polygon",a+s)},MultiPoint:function(t){return t.coordinates.length?pi("MultiGeometry",t.coordinates.map(function(e){return gc.Point({coordinates:e})}).join("")):""},MultiPolygon:function(t){return t.coordinates.length?pi("MultiGeometry",t.coordinates.map(function(e){return gc.Polygon({coordinates:e})}).join("")):""},MultiLineString:function(t){return t.coordinates.length?pi("MultiGeometry",t.coordinates.map(function(e){return gc.LineString({coordinates:e})}).join("")):""},GeometryCollection:function(t){return pi("MultiGeometry",t.geometries.map(gc.any).join(""))},valid:function(t){return t&&t.type&&(t.coordinates||t.type==="GeometryCollection"&&t.geometries&&t.geometries.every(gc.valid))},any:function(t){return gc[t.type]?gc[t.type](t):""},isPoint:function(t){return t.type==="Point"||t.type==="MultiPoint"},isPolygon:function(t){return t.type==="Polygon"||t.type==="MultiPolygon"},isLine:function(t){return t.type==="LineString"||t.type==="MultiLineString"}};function Mx(t){return t.map(function(e){return e.join(",")}).join(" ")}function OR(t){return pi("ExtendedData",jR(t).map(RR).join(""))}function RR(t){return pi("Data",pi("value",fy(t[1])),[["name",fy(t[0])]])}function DR(t){return!!(t["marker-size"]||t["marker-symbol"]||t["marker-color"])}function zR(t,e){return pi("Style",pi("IconStyle",pi("Icon",pi("href",BR(t))))+FR(),[["id",e]])}function BR(t){var e=t["marker-size"]||"medium",n=t["marker-symbol"]?"-"+t["marker-symbol"]:"",a=(t["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+e.charAt(0)+n+"+"+a+".png"}function FR(t){return pi("hotSpot","",[["xunits","fraction"],["yunits","fraction"],["x",.5],["y",.5]])}function NR(t){for(var e in t)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[e])return!0}function UR(t,e){var n=pi("LineStyle",[pi("color",YC(t.stroke,t["stroke-opacity"])||"ff555555")+pi("width",t["stroke-width"]===void 0?2:t["stroke-width"])]),a="";return(t.fill||t["fill-opacity"])&&(a=pi("PolyStyle",[pi("color",YC(t.fill,t["fill-opacity"])||"88555555")])),pi("Style",n+a,[["id",e]])}function VR(t){var e="";return t["marker-symbol"]&&(e=e+"ms"+t["marker-symbol"]),t["marker-color"]&&(e=e+"mc"+t["marker-color"].replace("#","")),t["marker-size"]&&(e=e+"ms"+t["marker-size"]),t.stroke&&(e=e+"s"+t.stroke.replace("#","")),t["stroke-width"]&&(e=e+"sw"+t["stroke-width"].toString().replace(".","")),t["stroke-opacity"]&&(e=e+"mo"+t["stroke-opacity"].toString().replace(".","")),t.fill&&(e=e+"f"+t.fill.replace("#","")),t["fill-opacity"]&&(e=e+"fo"+t["fill-opacity"].toString().replace(".","")),e}function YC(t,e){if(typeof t!="string")return"";if(t=t.replace("#","").toLowerCase(),t.length===3)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(t.length!==6)return"";var n=t[0]+t[1],a=t[2]+t[3],s=t[4]+t[5],l="ff";return typeof e=="number"&&e>=0&&e<=1&&(l=(e*255).toString(16),l.indexOf(".")>-1&&(l=l.substr(0,l.indexOf("."))),l.length<2&&(l="0"+l)),l+s+a+n}function jR(t){var e=[];for(var n in t)e.push([n,t[n]]);return e}const HR=Fp(ER);function GR(t){var n;switch((n=t.split(".").pop())==null?void 0:n.toLowerCase()){case"geojson":case"json":return"geojson";case"zip":case"shp":return"shapefile";case"kml":return"kml";case"csv":return"csv";default:return null}}function WR(){async function t(e,{format:n,filename:a="data"}={}){const s=n||GR(a);if(!s)return console.error("Không xác định được định dạng đầu ra."),null;switch(s){case"geojson":return new Blob([JSON.stringify(e)],{type:"application/geo+json"});case"shapefile":{const l={folder:"shapefile",types:{point:"points",polygon:"polygons",line:"lines"},compression:"DEFLATE",outputType:"blob"},i=await G_.zip(e,l);return i instanceof Blob?i:i instanceof ArrayBuffer?new Blob([i]):i instanceof Uint8Array?new Blob([i.buffer]):Array.isArray(i)?new Blob([new Uint8Array(i).buffer]):typeof i=="string"?new Blob([i],{type:"text/plain"}):(console.error("Kết quả không xác định:",i),null)}case"kml":{const l=HR(e);return new Blob([l],{type:"application/vnd.google-earth.kml+xml"})}case"csv":{const l=e.features.map(f=>({...f.properties,geometry:JSON.stringify(f.geometry)})),i=AR.unparse(l);return new Blob([i],{type:"text/csv"})}default:return console.error("Định dạng không được hỗ trợ:",s),null}}return{convert:t}}var NM="M17.45,17.55L12,23L6.55,17.55L7.96,16.14L11,19.17V4.83L7.96,7.86L6.55,6.45L12,1L17.45,6.45L16.04,7.86L13,4.83V19.17L16.04,16.14L17.45,17.55Z",ZR="M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12",UM="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",VM="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",i_="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",$R="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",KR="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z",qR="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",YR="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",Sg="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z",XR="M20.94 11C20.5 6.83 17.17 3.5 13 3.06V1H11V3.06C9.87 3.18 8.81 3.5 7.84 4.03L9.34 5.53C10.16 5.19 11.06 5 12 5C15.87 5 19 8.13 19 12C19 12.94 18.81 13.84 18.5 14.65L20 16.15C20.5 15.19 20.82 14.13 20.95 13H23V11H20.94M3 4.27L5.04 6.31C3.97 7.62 3.25 9.23 3.06 11H1V13H3.06C3.5 17.17 6.83 20.5 11 20.94V23H13V20.94C14.77 20.74 16.38 20.03 17.69 18.96L19.73 21L21 19.73L4.27 3L3 4.27M16.27 17.54C15.09 18.45 13.61 19 12 19C8.13 19 5 15.87 5 12C5 10.39 5.55 8.91 6.46 7.73L16.27 17.54Z",QR="M13.75,10.19L14.38,10.32L18.55,12.4C19.25,12.63 19.71,13.32 19.65,14.06V14.19L19.65,14.32L18.75,20.44C18.69,20.87 18.5,21.27 18.15,21.55C17.84,21.85 17.43,22 17,22H10.12C9.63,22 9.18,21.82 8.85,21.47L2.86,15.5L3.76,14.5C4,14.25 4.38,14.11 4.74,14.13H5.03L9,15V4.5A2,2 0 0,1 11,2.5A2,2 0 0,1 13,4.5V10.19H13.75Z",Np="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",zw="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",K_="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",JR="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",tD="M13,5V11H14.17L12,13.17L9.83,11H11V5H13M15,3H9V9H5L12,16L19,9H15V3M19,18H5V20H19V18Z",eD="M9.75 20.85C11.53 20.15 11.14 18.22 10.24 17C9.35 15.75 8.12 14.89 6.88 14.06C6 13.5 5.19 12.8 4.54 12C4.26 11.67 3.69 11.06 4.27 10.94C4.86 10.82 5.88 11.4 6.4 11.62C7.31 12 8.21 12.44 9.05 12.96L10.06 11.26C8.5 10.23 6.5 9.32 4.64 9.05C3.58 8.89 2.46 9.11 2.1 10.26C1.78 11.25 2.29 12.25 2.87 13.03C4.24 14.86 6.37 15.74 7.96 17.32C8.3 17.65 8.71 18.04 8.91 18.5C9.12 18.94 9.07 18.97 8.6 18.97C7.36 18.97 5.81 18 4.8 17.36L3.79 19.06C5.32 20 7.88 21.47 9.75 20.85M20.84 5.25C21.06 5.03 21.06 4.67 20.84 4.46L19.54 3.16C19.33 2.95 18.97 2.95 18.76 3.16L17.74 4.18L19.82 6.26M11 10.92V13H13.08L19.23 6.85L17.15 4.77L11 10.92Z",jM="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",HM="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z",nD="M3,16H8V14H3V16M9.5,16H14.5V14H9.5V16M16,16H21V14H16V16M3,20H5V18H3V20M7,20H9V18H7V20M11,20H13V18H11V20M15,20H17V18H15V20M19,20H21V18H19V20M3,12H11V10H3V12M13,12H21V10H13V12M3,4V8H21V4H3Z",rD="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z",iD="M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z",Bw="M1,1V5H2V19H1V23H5V22H19V23H23V19H22V5H23V1H19V2H5V1M5,4H19V5H20V19H19V20H5V19H4V5H5M6,6V14H9V18H18V9H14V6M8,8H12V12H8M14,11H16V16H11V14H14",oD="M14,3V13L17.2,11.31L17.42,11.28C17.71,11.28 17.97,11.4 18.16,11.6L18.9,12.37L14,16.57C13.74,16.84 13.39,17 13,17H6.5C5.73,17 5,16.3 5,15.5V11.14C5,10.53 5.35,10 5.85,9.8L10.79,7.6L12,7.47V3A1,1 0 0,1 13,2A1,1 0 0,1 14,3M5,19H13V22H5V19Z",aD="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",sD="M19 3H5A2 2 0 0 0 3 5V19A2 2 0 0 0 5 21H19A2 2 0 0 0 21 19V5A2 2 0 0 0 19 3M5 19V17H8.13A4.13 4.13 0 0 0 9.4 19M19 19H14.6A4.13 4.13 0 0 0 15.87 17H19M19 15H14V16A2 2 0 0 1 10 16V15H5V5H19Z",GM="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",Dy="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z",lD="M12,18.54L19.37,12.8L21,14.07L12,21.07L3,14.07L4.62,12.81L12,18.54M12,16L3,9L12,2L21,9L12,16M12,4.53L6.26,9L12,13.47L17.74,9L12,4.53Z",Fw="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z",uD="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",Nw="M12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5M12,2A7,7 0 0,1 19,9C19,14.25 12,22 12,22C12,22 5,14.25 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9C7,10 7,12 12,18.71C17,12 17,10 17,9A5,5 0 0,0 12,4Z",tQ="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",WM="M7,10L12,15L17,10H7Z",cD="M14,7L9,12L14,17V7Z",hD="M7,15L12,10L17,15H7Z",fD="M19,13H5V11H19V13Z",ZM="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",dD="M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z",kf="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",pD="M1.39,18.36L3.16,16.6L4.58,18L5.64,16.95L4.22,15.54L5.64,14.12L8.11,16.6L9.17,15.54L6.7,13.06L8.11,11.65L9.53,13.06L10.59,12L9.17,10.59L10.59,9.17L13.06,11.65L14.12,10.59L11.65,8.11L13.06,6.7L14.47,8.11L15.54,7.05L14.12,5.64L15.54,4.22L18,6.7L19.07,5.64L16.6,3.16L18.36,1.39L22.61,5.64L5.64,22.61L1.39,18.36Z",mD="M20 19.88V22L18.2 20.83L13.41 11.83A4.94 4.94 0 0 0 15.19 10.83M15 7A3 3 0 0 1 12 10A3.27 3.27 0 0 1 11.56 10L5.8 20.83L4 22V19.88L9.79 9A3 3 0 0 1 12 4V2A1 1 0 0 1 13 3V4.18A3 3 0 0 1 15 7M13 7A1 1 0 1 0 12 8A1 1 0 0 0 13 7M4.22 10L6 11.8L4.56 14.56L2.1 12.1M12 17.76L10.5 16.25L9 19L12 22L15 19L13.53 16.23M19.78 10L18 11.8L19.5 14.56L21.9 12.1Z",gD="M4,3H5V5H3V4A1,1 0 0,1 4,3M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M21,20A1,1 0 0,1 20,21H19V19H21V20M15,21V19H17V21H15M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M3,7H5V9H3V7M21,7V9H19V7H21Z",vD="M1 6V19A2 2 0 0 0 3 21H9V11H21V6A2 2 0 0 0 19 4H3A2 2 0 0 0 1 6M3 6H7V9H3M7 19H3V16H7M7 14H3V11H7M9 9V6H13V9M19 9H15V6H19M17 16A1 1 0 1 1 16 17A1 1 0 0 1 17 16M17 13A6.45 6.45 0 0 1 23 17A6.5 6.5 0 0 1 11 17A6.45 6.45 0 0 1 17 13M17 14.5A2.5 2.5 0 1 0 19.5 17A2.5 2.5 0 0 0 17 14.5",yD="M2,2H6V3H13V2H17V6H16V9H18V8H22V12H21V18H22V22H18V21H12V22H8V18H9V16H6V17H2V13H3V6H2V2M18,12V11H16V13H17V17H13V16H11V18H12V19H18V18H19V12H18M13,6V5H6V6H5V13H6V14H9V12H8V8H12V9H14V6H13M12,12H11V14H13V13H14V11H12V12Z",_D="M9,10V16H15V10H19L12,3L5,10H9M12,5.8L14.2,8H13V14H11V8H9.8L12,5.8M19,18H5V20H19V18Z";const XC={mdi:{size:24,viewbox:"0 0 24 24"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},bD={name:"icon",props:{type:String,path:{type:String,required:!0},size:{type:[String,Number],default:24},viewbox:String,flip:{type:String,validator:t=>["horizontal","vertical","both","none"].includes(t)},rotate:{type:Number,default:0}},computed:{styles(){return{"--sx":["both","horizontal"].includes(this.flip)?"-1":"1","--sy":["both","vertical"].includes(this.flip)?"-1":"1","--r":isNaN(this.rotate)?this.rotate:this.rotate+"deg"}},defaults(){return XC[this.type]||XC.default},sizeValue(){return this.size||this.defaults.size},viewboxValue(){return this.viewbox||this.defaults.viewbox}}},xD=["width","height","viewBox"],AD=["d"];function wD(t,e,n,a,s,l){return Ct(),le("svg",{width:l.sizeValue,height:l.sizeValue,viewBox:l.viewboxValue,style:Ni(l.styles)},[kt("path",{d:n.path},null,8,AD)],12,xD)}const nr=Yn(bD,[["render",wD],["__scopeId","data-v-0fb36228"]]),CD={components:{SvgIcon:nr},props:{height:{default:32},width:{default:32},loading:Boolean,active:Boolean,disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},path(){return{loading:Fw}}}},ID=["disabled"],ED={class:"map-control-button__content"};function SD(t,e,n,a,s,l){const i=Sl("SvgIcon");return Ct(),le("button",li({class:"map-control-button",style:l.bindStyle,disabled:n.disabled},t.$attrs,{class:{"map-control-button-active":n.active,"map-control-button-disabled":n.disabled}}),[kt("span",ED,[n.loading?(Ct(),$e(i,{key:0,size:n.height*2/3,type:"mdi",path:l.path.loading,class:"spin"},null,8,["size","path"])):Zn(t.$slots,"default",{key:1},void 0,!0)])],16,ID)}const $M=Yn(CD,[["render",SD],["__scopeId","data-v-06662425"]]),MD={props:{},computed:{iconName(){return""}}};function TD(t,e,n,a,s,l){return Ct(),le("i",{class:mo(["map-icon mdi",l.iconName])},null,2)}const Uw=Yn(MD,[["render",TD],["__scopeId","data-v-d0a88ad0"]]),PD={components:{MapButton:$M,MapIcon:Uw},props:{items:{type:Array,default:()=>[]},row:Boolean,size:{type:[Number,String],default:32}},provide(){return{isGroup:!0,size:this.size}}};function kD(t,e,n,a,s,l){const i=Sl("MapIcon"),f=Sl("MapButton");return Ct(),le("div",{class:mo(["button-container button-group-container",{"button-group-row-container":n.row,"button-group-column-container":!n.row}]),style:Ni({width:n.row?null:n.size+"px",height:n.row?n.size+"px":null})},[kt("div",{class:mo(["button-group-sheet",{"button-group-sheet-column":!n.row}]),style:{"border-radius":"150px"}},[(Ct(!0),le(Mr,null,Eo(n.items,(m,y)=>(Ct(),$e(f,{key:y+""+m.titl,height:n.size,text:"",title:m.title,width:n.size,onClick:m.onClick},{default:Ce(()=>[Jt(i,null,{default:Ce(()=>[_a(Mn(m.icon),1)]),_:2},1024)]),_:2},1032,["height","title","width","onClick"]))),128)),Zn(t.$slots,"default",{},void 0,!0)],2)],6)}const dy=Yn(PD,[["render",kD],["__scopeId","data-v-a47987bf"]]),LD={components:{MapButton:$M,MapIcon:Uw},props:{icon:{type:[String,Boolean]},tooltip:String,title:String,loading:Boolean,size:{type:Number,default:32},active:Boolean,disabled:Boolean},inject:{isGroup:{default:!1},groupSize:{default:0,from:"size"}},computed:{}},OD={key:1,class:"button-container"},RD=["title"];function DD(t,e,n,a,s,l){const i=Sl("MapIcon"),f=Sl("MapButton");return l.isGroup?(Ct(),$e(f,li({key:0},t.$attrs,{active:n.active,height:l.groupSize,title:n.tooltip||n.title,width:l.groupSize,disabled:n.disabled}),{default:Ce(()=>[Zn(t.$slots,"default",{},()=>[Jt(i,null,{default:Ce(()=>[_a(Mn(n.icon),1)]),_:1})],!0)]),_:3},16,["active","height","title","width","disabled"])):(Ct(),le("div",OD,[kt("div",{title:n.tooltip||n.title},[Zn(t.$slots,"content",{},()=>[Jt(f,li(t.$attrs,{active:n.active,height:n.size,loading:n.loading,width:n.size,disabled:n.disabled}),{default:Ce(()=>[Zn(t.$slots,"default",{},()=>[Jt(i,null,{default:Ce(()=>[_a(Mn(n.icon),1)]),_:1})],!0)]),_:3},16,["active","height","loading","width","disabled"])],!0)],8,RD)]))}const yo=Yn(LD,[["render",DD],["__scopeId","data-v-da6cc99f"]]),zD={props:{src:{}},data:()=>({}),computed:{styleImage(){return{"background-image":`url(${this.src})`}}},methods:{}},BD=t=>(th("data-v-52ab30fa"),t=t(),eh(),t),FD={class:"map-image"},ND=BD(()=>kt("div",{class:"map-image__sizer",style:{"padding-bottom":"100%"}},null,-1)),UD={class:"map-image__content"};function VD(t,e,n,a,s,l){return Ct(),le("div",FD,[ND,kt("div",{class:"map-image__image",style:Ni(l.styleImage)},null,4),kt("div",UD,[Zn(t.$slots,"default",{},void 0,!0)])])}const RA=Yn(zD,[["render",VD],["__scopeId","data-v-52ab30fa"]]),jD={props:{height:{},width:{}},data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},HD=z_('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1);function GD(t,e,n,a,s,l){return Ct(),le("div",li({class:"card",style:l.cardStyle},t.$attrs),[kt("div",null,[Zn(t.$slots,"default")]),HD],16)}const WD=Yn(jD,[["render",GD]]),ZD={class:"form-group"},$D={key:0},KD={class:"input-container"},qD=["disabled"],YD=_r({__name:"input-text",props:Bs({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ll(t,"modelValue");return(n,a)=>(Ct(),le("div",ZD,[t.label?(Ct(),le("label",$D,Mn(t.label),1)):mn("",!0),kt("div",KD,[Du(kt("input",li(n.$attrs,{"onUpdate:modelValue":a[0]||(a[0]=s=>e.value=s),disabled:t.disabled}),null,16,qD),[[Ew,e.value]])])]))}}),ua=Yn(YD,[["__scopeId","data-v-3f8ab997"]]),XD={class:"form-group"},QD={key:0},JD={class:"input-container"},t8={value:"",disabled:"",selected:"",hidden:""},e8=["value"],n8=_r({__name:"input-select",props:Bs({label:String,items:{type:Array,default:()=>[]},itemValue:{type:String,default:"value"},itemText:{type:String,default:"text"},returnObject:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ll(t,"modelValue"),n=t;function a(i){return typeof i=="string"||n.returnObject?i:i[n.itemValue]}function s(i){return typeof i=="string"?i:i[n.itemText]}function l(i){return typeof i=="string"?i:i[n.itemValue]}return(i,f)=>(Ct(),le("div",XD,[t.label?(Ct(),le("label",QD,Mn(t.label),1)):mn("",!0),kt("div",JD,[Du(kt("select",li(i.$attrs,{"onUpdate:modelValue":f[0]||(f[0]=m=>e.value=m),required:""}),[kt("option",t8,Mn(i.$attrs.placeholder),1),(Ct(!0),le(Mr,null,Eo(t.items,m=>(Ct(),le("option",{value:a(m),key:l(m)},Mn(s(m)),9,e8))),128))],16),[[V_,e.value]])])]))}}),zy=Yn(n8,[["__scopeId","data-v-2fa00323"]]),r8={__name:"base-button",props:{active:Boolean,disabled:Boolean},setup(t){const e=t;return(n,a)=>(Ct(),le("button",li({class:"map-control__button clickable"},n.$attrs,{class:{"map-control__button-active":e.active,"map-control__button-disabled":e.disabled}}),[Zn(n.$slots,"default",{},void 0,!0)],16))}},Mh=Yn(r8,[["__scopeId","data-v-60fc15c5"]]),i8=["aria-expanded"],o8={class:"collapse-header__title"},a8={class:"collapse-header__icon"},s8={key:0,class:"collapse-content"},l8={class:"collapse-content-box"},u8={name:"Collapse"},c8=Object.assign(u8,{props:{selected:{type:Boolean,default:!0}},emits:["update:selected","open","close"],setup(t,{emit:e}){const n=t,a=e,s=on(n.selected),l=()=>{s.value=!s.value,a("update:selected",s.value),s.value?a("open"):a("close")},i={open:WM,close:hD};return(f,m)=>(Ct(),le("div",{class:mo(["collapse collapse-item",{"is-active":s.value}])},[kt("div",{class:"collapse-header touchable",role:"tab","aria-expanded":s.value?"true":"false",onClick:oo(l,["prevent"])},[kt("div",o8,[Zn(f.$slots,"header",{},void 0,!0)]),kt("div",a8,[s.value?(Ct(),$e(at(nr),{key:0,size:"14",type:"mdi",path:i.close},null,8,["path"])):(Ct(),$e(at(nr),{key:1,size:"14",type:"mdi",path:i.open},null,8,["path"]))])],8,i8),Jt(B_,{name:"fade"},{default:Ce(()=>[s.value?(Ct(),le("div",s8,[kt("div",l8,[Zn(f.$slots,"default",{},void 0,!0)])])):mn("",!0)]),_:3})],2))}}),DA=Yn(c8,[["__scopeId","data-v-208c4e72"]]),h8={class:"form-group"},f8={key:0},d8={class:"input-container"},p8=_r({__name:"input-textarea",props:Bs({label:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ll(t,"modelValue");return(n,a)=>(Ct(),le("div",h8,[t.label?(Ct(),le("label",f8,Mn(t.label),1)):mn("",!0),kt("div",d8,[Du(kt("textarea",li(n.$attrs,{"onUpdate:modelValue":a[0]||(a[0]=s=>e.value=s)}),null,16),[[Oh,e.value]])])]))}}),KM=Yn(p8,[["__scopeId","data-v-23a6d5c7"]]),m8={class:"form-group"},g8={key:0},v8={class:"input-container"},y8=["min","max","step","disabled"],_8={class:"input-slider__value"},b8=["min","max","step","disabled"],x8=_r({__name:"input-slider",props:Bs({label:String,min:{default:0},max:{default:100},step:{default:1},disabled:Boolean},{modelValue:{default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ll(t,"modelValue"),n=t,a=hn(()=>(e.value-n.min)*100/(n.max-n.min)+"% 100%");return(s,l)=>(Ct(),le("div",m8,[t.label?(Ct(),le("label",g8,Mn(t.label),1)):mn("",!0),kt("div",v8,[Du(kt("input",{"onUpdate:modelValue":l[0]||(l[0]=i=>e.value=i),type:"range",min:t.min,max:t.max,step:t.step,style:Ni({backgroundSize:a.value}),disabled:t.disabled},null,12,y8),[[Oh,e.value]]),kt("div",_8,[Du(kt("input",{"onUpdate:modelValue":l[1]||(l[1]=i=>e.value=i),type:"number",min:t.min,max:t.max,step:t.step,disabled:t.disabled},null,8,b8),[[Oh,e.value]])])])]))}}),o_=Yn(x8,[["__scopeId","data-v-6248ac13"]]),A8={class:"form-group"},w8={class:"form-control form-checkbox"},C8=["disabled"],I8=_r({__name:"input-checkbox",props:Bs({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ll(t,"modelValue");return(n,a)=>(Ct(),le("div",A8,[kt("div",w8,[Du(kt("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=s=>e.value=s),disabled:t.disabled},null,8,C8),[[U_,e.value]]),kt("label",null,Mn(t.label),1)])]))}}),E8=Yn(I8,[["__scopeId","data-v-d59a9d80"]]),S8={class:"form-group"},M8={key:0},T8={class:"input-container"},P8=["onClick"],k8={__name:"input-choose",props:Bs({label:String,items:{type:Array,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ll(t,"modelValue");function n(a){e.value=a.value}return(a,s)=>(Ct(),le("div",S8,[t.label?(Ct(),le("label",M8,Mn(t.label),1)):mn("",!0),kt("div",T8,[(Ct(!0),le(Mr,null,Eo(t.items,l=>(Ct(),le("div",{key:l.value,class:mo(["item-choose",{"item-choose-active":l.value===e.value}]),onClick:oo(i=>n(l),["stop"])},Mn(l.text),11,P8))),128))])]))}},L8=Yn(k8,[["__scopeId","data-v-15a326b0"]]),O8="";function Mg(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&a.firstChild?a.insertBefore(s,a.firstChild):a.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}const Tg=function(t,e){const{componentPrefix:n=O8}=e||{};t.component(`${n}${this.name}`,this)},Tx={};var By={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":`url(${D8(this.white,this.grey,this.size)})`}}}};function R8(t,e,n){if(typeof document>"u")return null;const a=document.createElement("canvas");a.width=a.height=n*2;const s=a.getContext("2d");return s?(s.fillStyle=t,s.fillRect(0,0,a.width,a.height),s.fillStyle=e,s.fillRect(0,0,n,n),s.translate(n,n),s.fillRect(0,0,n,n),a.toDataURL()):null}function D8(t,e,n){const a=`${t},${e},${n}`;if(Tx[a])return Tx[a];const s=R8(t,e,n);return Tx[a]=s,s}function z8(t,e,n,a,s,l){return Ct(),le("div",{class:"vc-checkerboard",style:Ni(l.bgStyle)},null,4)}var B8=".vc-checkerboard{background-size:contain;bottom:0;left:0;position:absolute;right:0;top:0}";Mg(B8);By.render=z8;By.__file="src/components/checkboard/checkboard.vue";By.install=Tg;var q_={name:"Alpha",components:{Checkboard:By},props:{value:Object,onChange:Function},computed:{colors(){return this.value},gradientColor(){const{rgba:t}=this.colors,e=[t.r,t.g,t.b].join(",");return`linear-gradient(to right, rgba(${e}, 0) 0%, rgba(${e}, 1) 100%)`}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:n}=this.$refs;if(!n)return;const a=n.clientWidth,s=n.getBoundingClientRect().left+window.pageXOffset,i=(t.pageX||(t.touches?t.touches[0].pageX:0))-s;let f;i<0?f=0:i>a?f=1:f=Math.round(i*100/a)/100,this.colors.a!==f&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:f,source:"rgba"})},handleMouseDown(t){this.handleChange(t,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const F8={class:"vc-alpha"},N8={class:"vc-alpha-checkboard-wrap"},U8=kt("div",{class:"vc-alpha-picker"},null,-1),V8=[U8];function j8(t,e,n,a,s,l){const i=Sl("Checkboard");return Ct(),le("div",F8,[kt("div",N8,[Jt(i)]),kt("div",{class:"vc-alpha-gradient",style:Ni({background:l.gradientColor})},null,4),kt("div",{ref:"container",class:"vc-alpha-container",onMousedown:e[0]||(e[0]=(...f)=>l.handleMouseDown&&l.handleMouseDown(...f)),onTouchmove:e[1]||(e[1]=(...f)=>l.handleChange&&l.handleChange(...f)),onTouchstart:e[2]||(e[2]=(...f)=>l.handleChange&&l.handleChange(...f))},[kt("div",{class:"vc-alpha-pointer",style:Ni({left:`${l.colors.a*100}%`})},V8,4)],544)])}var H8=".vc-alpha,.vc-alpha-checkboard-wrap{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-container{cursor:pointer;height:100%;margin:0 3px;position:relative;z-index:2}.vc-alpha-pointer{position:absolute;z-index:2}.vc-alpha-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";Mg(H8);q_.render=j8;q_.__file="src/components/alpha/alpha.vue";q_.install=Tg;function zs(t,e){G8(t)&&(t="100%");var n=W8(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function v1(t){return Math.min(1,Math.max(0,t))}function G8(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function W8(t){return typeof t=="string"&&t.indexOf("%")!==-1}function qM(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function y1(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Ip(t){return t.length===1?"0"+t:String(t)}function Z8(t,e,n){return{r:zs(t,255)*255,g:zs(e,255)*255,b:zs(n,255)*255}}function QC(t,e,n){t=zs(t,255),e=zs(e,255),n=zs(n,255);var a=Math.max(t,e,n),s=Math.min(t,e,n),l=0,i=0,f=(a+s)/2;if(a===s)i=0,l=0;else{var m=a-s;switch(i=f>.5?m/(2-a-s):m/(a+s),a){case t:l=(e-n)/m+(e<n?6:0);break;case e:l=(n-t)/m+2;break;case n:l=(t-e)/m+4;break}l/=6}return{h:l,s:i,l:f}}function Px(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function $8(t,e,n){var a,s,l;if(t=zs(t,360),e=zs(e,100),n=zs(n,100),e===0)s=n,l=n,a=n;else{var i=n<.5?n*(1+e):n+e-n*e,f=2*n-i;a=Px(f,i,t+1/3),s=Px(f,i,t),l=Px(f,i,t-1/3)}return{r:a*255,g:s*255,b:l*255}}function JC(t,e,n){t=zs(t,255),e=zs(e,255),n=zs(n,255);var a=Math.max(t,e,n),s=Math.min(t,e,n),l=0,i=a,f=a-s,m=a===0?0:f/a;if(a===s)l=0;else{switch(a){case t:l=(e-n)/f+(e<n?6:0);break;case e:l=(n-t)/f+2;break;case n:l=(t-e)/f+4;break}l/=6}return{h:l,s:m,v:i}}function K8(t,e,n){t=zs(t,360)*6,e=zs(e,100),n=zs(n,100);var a=Math.floor(t),s=t-a,l=n*(1-e),i=n*(1-s*e),f=n*(1-(1-s)*e),m=a%6,y=[n,i,l,l,f,n][m],x=[f,n,n,i,l,l][m],A=[l,l,f,n,n,i][m];return{r:y*255,g:x*255,b:A*255}}function tI(t,e,n,a){var s=[Ip(Math.round(t).toString(16)),Ip(Math.round(e).toString(16)),Ip(Math.round(n).toString(16))];return a&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function q8(t,e,n,a,s){var l=[Ip(Math.round(t).toString(16)),Ip(Math.round(e).toString(16)),Ip(Math.round(n).toString(16)),Ip(Y8(a))];return s&&l[0].startsWith(l[0].charAt(1))&&l[1].startsWith(l[1].charAt(1))&&l[2].startsWith(l[2].charAt(1))&&l[3].startsWith(l[3].charAt(1))?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0)+l[3].charAt(0):l.join("")}function Y8(t){return Math.round(parseFloat(t)*255).toString(16)}function eI(t){return Mu(t)/255}function Mu(t){return parseInt(t,16)}function X8(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var zA={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Q8(t){var e={r:0,g:0,b:0},n=1,a=null,s=null,l=null,i=!1,f=!1;return typeof t=="string"&&(t=ez(t)),typeof t=="object"&&(ff(t.r)&&ff(t.g)&&ff(t.b)?(e=Z8(t.r,t.g,t.b),i=!0,f=String(t.r).substr(-1)==="%"?"prgb":"rgb"):ff(t.h)&&ff(t.s)&&ff(t.v)?(a=y1(t.s),s=y1(t.v),e=K8(t.h,a,s),i=!0,f="hsv"):ff(t.h)&&ff(t.s)&&ff(t.l)&&(a=y1(t.s),l=y1(t.l),e=$8(t.h,a,l),i=!0,f="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=qM(n),{ok:i,format:t.format||f,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var J8="[-\\+]?\\d+%?",tz="[-\\+]?\\d*\\.\\d+%?",wd="(?:".concat(tz,")|(?:").concat(J8,")"),kx="[\\s|\\(]+(".concat(wd,")[,|\\s]+(").concat(wd,")[,|\\s]+(").concat(wd,")\\s*\\)?"),Lx="[\\s|\\(]+(".concat(wd,")[,|\\s]+(").concat(wd,")[,|\\s]+(").concat(wd,")[,|\\s]+(").concat(wd,")\\s*\\)?"),Zc={CSS_UNIT:new RegExp(wd),rgb:new RegExp("rgb"+kx),rgba:new RegExp("rgba"+Lx),hsl:new RegExp("hsl"+kx),hsla:new RegExp("hsla"+Lx),hsv:new RegExp("hsv"+kx),hsva:new RegExp("hsva"+Lx),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function ez(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(zA[t])t=zA[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=Zc.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=Zc.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Zc.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=Zc.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Zc.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=Zc.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Zc.hex8.exec(t),n?{r:Mu(n[1]),g:Mu(n[2]),b:Mu(n[3]),a:eI(n[4]),format:e?"name":"hex8"}:(n=Zc.hex6.exec(t),n?{r:Mu(n[1]),g:Mu(n[2]),b:Mu(n[3]),format:e?"name":"hex"}:(n=Zc.hex4.exec(t),n?{r:Mu(n[1]+n[1]),g:Mu(n[2]+n[2]),b:Mu(n[3]+n[3]),a:eI(n[4]+n[4]),format:e?"name":"hex8"}:(n=Zc.hex3.exec(t),n?{r:Mu(n[1]+n[1]),g:Mu(n[2]+n[2]),b:Mu(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function ff(t){return!!Zc.CSS_UNIT.exec(String(t))}var nz=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var a;if(e instanceof t)return e;typeof e=="number"&&(e=X8(e)),this.originalInput=e;var s=Q8(e);this.originalInput=e,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=n.format)!==null&&a!==void 0?a:s.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,a,s,l=e.r/255,i=e.g/255,f=e.b/255;return l<=.03928?n=l/12.92:n=Math.pow((l+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),f<=.03928?s=f/12.92:s=Math.pow((f+.055)/1.055,2.4),.2126*n+.7152*a+.0722*s},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=qM(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=JC(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=JC(this.r,this.g,this.b),n=Math.round(e.h*360),a=Math.round(e.s*100),s=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(a,"%, ").concat(s,"%)"):"hsva(".concat(n,", ").concat(a,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=QC(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=QC(this.r,this.g,this.b),n=Math.round(e.h*360),a=Math.round(e.s*100),s=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(a,"%, ").concat(s,"%)"):"hsla(".concat(n,", ").concat(a,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),tI(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),q8(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(a,")"):"rgba(".concat(e,", ").concat(n,", ").concat(a,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(zs(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(zs(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+tI(this.r,this.g,this.b,!1),n=0,a=Object.entries(zA);n<a.length;n++){var s=a[n],l=s[0],i=s[1];if(e===i)return l}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var a=!1,s=this.a<1&&this.a>=0,l=!n&&s&&(e.startsWith("hex")||e==="name");return l?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(a=this.toRgbString()),e==="prgb"&&(a=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(a=this.toHexString()),e==="hex3"&&(a=this.toHexString(!0)),e==="hex4"&&(a=this.toHex8String(!0)),e==="hex8"&&(a=this.toHex8String()),e==="name"&&(a=this.toName()),e==="hsl"&&(a=this.toHslString()),e==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=v1(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=v1(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=v1(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=v1(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),a=(n.h+e)%360;return n.h=a<0?360+a:a,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var a=this.toRgb(),s=new t(e).toRgb(),l=n/100,i={r:(s.r-a.r)*l+a.r,g:(s.g-a.g)*l+a.g,b:(s.b-a.b)*l+a.b,a:(s.a-a.a)*l+a.a};return new t(i)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var a=this.toHsl(),s=360/n,l=[this];for(a.h=(a.h-(s*e>>1)+720)%360;--e;)a.h=(a.h+s)%360,l.push(new t(a));return l},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),a=n.h,s=n.s,l=n.v,i=[],f=1/e;e--;)i.push(new t({h:a,s,v:l})),l=(l+f)%1;return i},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),a=new t(e).toRgb(),s=n.a+a.a*(1-n.a);return new t({r:(n.r*n.a+a.r*a.a*(1-n.a))/s,g:(n.g*n.a+a.g*a.a*(1-n.a))/s,b:(n.b*n.a+a.b*a.a*(1-n.a))/s,a:s})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),a=n.h,s=[this],l=360/e,i=1;i<e;i++)s.push(new t({h:(a+i*l)%360,s:n.s,l:n.l}));return s},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function _d(...t){return new nz(...t)}function Ox(t,e){const n=t&&t.a;let a;t&&t.hsl?a=_d(t.hsl):t&&t.hex&&t.hex.length>0?a=_d(t.hex):t&&t.hsv?a=_d(t.hsv):t&&t.rgba?a=_d(t.rgba):t&&t.rgb?a=_d(t.rgb):a=_d(t),a&&(a._a===void 0||a._a===null)&&a.setAlpha(n||a.getAlpha());const s=a.toHsl(),l=a.toHsv();return s.s===0&&(l.h=s.h=t.h||t.hsl&&t.hsl.h||e||0),l.v<.0164&&(l.h=t.h||t.hsv&&t.hsv.h||0,l.s=t.s||t.hsv&&t.hsv.s||0),s.l<.01&&(s.h=t.h||t.hsl&&t.hsl.h||0,s.s=t.s||t.hsl&&t.hsl.s||0),{hsl:s,hex:a.toHexString().toUpperCase(),hex8:a.toHex8String().toUpperCase(),rgba:a.toRgb(),hsv:l,oldHue:t.h||e||s.h,source:t.source,a:a.getAlpha()}}var rz={model:{prop:"modelValue",event:"update:modelValue"},props:["modelValue"],data(){return{val:Ox(this.modelValue)}},computed:{colors:{get(){return this.val},set(t){this.val=t,this.$emit("update:modelValue",t)}}},watch:{modelValue(t){this.val=Ox(t)}},methods:{colorChange(t,e){this.oldHue=this.colors.hsl.h,this.colors=Ox(t,e||this.oldHue)},isValidHex(t){return _d(t).isValid},simpleCheckForValidColor(t){const e=["r","g","b","a","h","s","l","v"];let n=0,a=0;for(let s=0;s<e.length;s++){const l=e[s];t[l]&&(n++,isNaN(t[l])||a++)}if(n===a)return t},paletteUpperCase(t){return t.map(e=>e.toUpperCase())},isTransparent(t){return _d(t).getAlpha()===0}}},Y_={name:"EditableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.value},set(t){if(this.max!==void 0&&+t>this.max)this.$refs.input.value=this.max;else return t}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(t){this.handleChange(t.target.value)},handleChange(t){const e={};e[this.label]=t,e.hex===void 0&&e["#"]===void 0?this.$emit("change",e):t.length>5&&this.$emit("change",e)},handleKeyDown(t){let{val:e}=this;const n=Number(e);if(n){const a=this.arrowOffset||1;t.keyCode===38&&(e=n+a,this.handleChange(e),t.preventDefault()),t.keyCode===40&&(e=n-a,this.handleChange(e),t.preventDefault())}}}};const iz={class:"vc-editable-input"},oz=["aria-labelledby"],az=["id","for"],sz={class:"vc-input__desc"};function lz(t,e,n,a,s,l){return Ct(),le("div",iz,[Du(kt("input",{ref:"input","onUpdate:modelValue":e[0]||(e[0]=i=>l.val=i),"aria-labelledby":l.labelId,class:"vc-input__input",onKeydown:e[1]||(e[1]=(...i)=>l.handleKeyDown&&l.handleKeyDown(...i)),onInput:e[2]||(e[2]=(...i)=>l.update&&l.update(...i))},null,40,oz),[[Oh,l.val]]),kt("span",{id:l.labelId,for:n.label,class:"vc-input__label"},Mn(l.labelSpanText),9,az),kt("span",sz,Mn(n.desc),1)])}var uz=".vc-editable-input{position:relative}.vc-input__input{border:0;outline:none;padding:0}.vc-input__label{text-transform:capitalize}";Mg(uz);Y_.render=lz;Y_.__file="src/components/editable-input/editable-input.vue";Y_.install=Tg;function Rx(t,e,n){return e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t}var X_={name:"Saturation",props:{value:Object},computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return`${-(this.colors.hsv.v*100)+1+100}%`},pointerLeft(){return`${this.colors.hsv.s*100}%`}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:n}=this.$refs;if(!n)return;const a=n.clientWidth,s=n.clientHeight,l=n.getBoundingClientRect().left+window.pageXOffset,i=n.getBoundingClientRect().top+window.pageYOffset,f=t.pageX||(t.touches?t.touches[0].pageX:0),m=t.pageY||(t.touches?t.touches[0].pageY:0),y=Rx(f-l,0,a),x=Rx(m-i,0,s),A=y/a,w=Rx(-(x/s)+1,0,1);this.onChange({h:this.colors.hsv.h,s:A,v:w,a:this.colors.hsv.a,source:"hsva"})},onChange(t){this.$emit("change",t)},handleMouseDown(t){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(t){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const cz=kt("div",{class:"vc-saturation--white"},null,-1),hz=kt("div",{class:"vc-saturation--black"},null,-1),fz=kt("div",{class:"vc-saturation-circle"},null,-1),dz=[fz];function pz(t,e,n,a,s,l){return Ct(),le("div",{ref:"container",class:"vc-saturation",style:Ni({background:l.bgColor}),onMousedown:e[0]||(e[0]=(...i)=>l.handleMouseDown&&l.handleMouseDown(...i)),onTouchmove:e[1]||(e[1]=(...i)=>l.handleChange&&l.handleChange(...i)),onTouchstart:e[2]||(e[2]=(...i)=>l.handleChange&&l.handleChange(...i))},[cz,hz,kt("div",{class:"vc-saturation-pointer",style:Ni({top:l.pointerTop,left:l.pointerLeft})},dz,4)],36)}var mz=".vc-saturation,.vc-saturation--black,.vc-saturation--white{bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{border-radius:50%;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);cursor:head;height:4px;transform:translate(-2px,-2px);width:4px}";Mg(mz);X_.render=pz;X_.__file="src/components/saturation/saturation.vue";X_.install=Tg;var Q_={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){return this.value},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:`${-(this.colors.hsl.h*100/360)+100}%`:0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":`${this.colors.hsl.h*100/360}%`}},watch:{value:{handler(t,e){const{h:n}=t.hsl;n!==0&&n-this.oldHue>0&&(this.pullDirection="right"),n!==0&&n-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=n},deep:!0,immediate:!0}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:n}=this.$refs;if(!n)return;const a=n.clientWidth,s=n.clientHeight,l=n.getBoundingClientRect().left+window.pageXOffset,i=n.getBoundingClientRect().top+window.pageYOffset,f=t.pageX||(t.touches?t.touches[0].pageX:0),m=t.pageY||(t.touches?t.touches[0].pageY:0),y=f-l,x=m-i;let A,w;this.direction==="vertical"?(x<0?A=360:x>s?A=0:(w=-(x*100/s)+100,A=360*w/100),this.colors.hsl.h!==A&&this.$emit("change",{h:A,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(y<0?A=0:y>a?A=360:(w=y*100/a,A=360*w/100),this.colors.hsl.h!==A&&this.$emit("change",{h:A,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(t){this.handleChange(t,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(t){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const gz=["aria-valuenow"],vz=kt("div",{class:"vc-hue-picker"},null,-1),yz=[vz];function _z(t,e,n,a,s,l){return Ct(),le("div",{class:mo(["vc-hue",[l.directionClass]])},[kt("div",{ref:"container",class:"vc-hue-container",role:"slider","aria-valuenow":l.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",onMousedown:e[0]||(e[0]=(...i)=>l.handleMouseDown&&l.handleMouseDown(...i)),onTouchmove:e[1]||(e[1]=(...i)=>l.handleChange&&l.handleChange(...i)),onTouchstart:e[2]||(e[2]=(...i)=>l.handleChange&&l.handleChange(...i))},[kt("div",{class:"vc-hue-pointer",style:Ni({top:l.pointerTop,left:l.pointerLeft}),role:"presentation"},yz,4)],40,gz)],2)}var bz=".vc-hue{border-radius:2px;bottom:0;left:0;position:absolute;right:0;top:0}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;height:100%;margin:0 2px;position:relative}.vc-hue-pointer{position:absolute;z-index:2}.vc-hue-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";Mg(bz);Q_.render=_z;Q_.__file="src/components/hue/hue.vue";Q_.install=Tg;const xz=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var J_={name:"Sketch",components:{Saturation:X_,Hue:Q_,Alpha:q_,EdIn:Y_,Checkboard:By},mixins:[rz],props:{presetColors:{type:Array,default(){return xz}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let t;return this.colors.a<1?t=this.colors.hex8:t=this.colors.hex,t.replace("#","")},activeColor(){const{rgba:t}=this.colors;return`rgba(${[t.r,t.g,t.b,t.a].join(",")})`}},methods:{handlePreset(t){this.colorChange(t)},childChange(t){this.colorChange(t)},inputChange(t){t&&(t.hex?this.isValidHex(t.hex)&&this.colorChange({hex:t.hex,source:"hex"}):(t.r||t.g||t.b||t.a)&&this.colorChange({r:t.r||this.colors.rgba.r,g:t.g||this.colors.rgba.g,b:t.b||this.colors.rgba.b,a:t.a||this.colors.rgba.a,source:"rgba"}))}}};const Az={class:"vc-sketch-saturation-wrap"},wz={class:"vc-sketch-controls"},Cz={class:"vc-sketch-sliders"},Iz={class:"vc-sketch-hue-wrap"},Ez={key:0,class:"vc-sketch-alpha-wrap"},Sz={class:"vc-sketch-color-wrap"},Mz=["aria-label"],Tz={key:0,class:"vc-sketch-field"},Pz={class:"vc-sketch-field--double"},kz={class:"vc-sketch-field--single"},Lz={class:"vc-sketch-field--single"},Oz={class:"vc-sketch-field--single"},Rz={key:0,class:"vc-sketch-field--single"},Dz={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},zz=["aria-label","onClick"],Bz=["aria-label","onClick"];function Fz(t,e,n,a,s,l){const i=Sl("Saturation"),f=Sl("Hue"),m=Sl("Alpha"),y=Sl("Checkboard"),x=Sl("EdIn");return Ct(),le("div",{role:"application","aria-label":"Sketch color picker",class:mo(["vc-sketch",[n.disableAlpha?"vc-sketch__disable-alpha":""]])},[kt("div",Az,[Jt(i,{value:t.colors,onChange:l.childChange},null,8,["value","onChange"])]),kt("div",wz,[kt("div",Cz,[kt("div",Iz,[Jt(f,{value:t.colors,onChange:l.childChange},null,8,["value","onChange"])]),n.disableAlpha?mn("v-if",!0):(Ct(),le("div",Ez,[Jt(m,{value:t.colors,onChange:l.childChange},null,8,["value","onChange"])]))]),kt("div",Sz,[kt("div",{"aria-label":`Current color is ${l.activeColor}`,class:"vc-sketch-active-color",style:Ni({background:l.activeColor})},null,12,Mz),Jt(y)])]),n.disableFields?mn("v-if",!0):(Ct(),le("div",Tz,[mn(" rgba "),kt("div",Pz,[Jt(x,{label:"hex",value:l.hex,onChange:l.inputChange},null,8,["value","onChange"])]),kt("div",kz,[Jt(x,{label:"r",value:t.colors.rgba.r,onChange:l.inputChange},null,8,["value","onChange"])]),kt("div",Lz,[Jt(x,{label:"g",value:t.colors.rgba.g,onChange:l.inputChange},null,8,["value","onChange"])]),kt("div",Oz,[Jt(x,{label:"b",value:t.colors.rgba.b,onChange:l.inputChange},null,8,["value","onChange"])]),n.disableAlpha?mn("v-if",!0):(Ct(),le("div",Rz,[Jt(x,{label:"a",value:t.colors.a,"arrow-offset":.01,max:1,onChange:l.inputChange},null,8,["value","arrow-offset","onChange"])]))])),kt("div",Dz,[(Ct(!0),le(Mr,null,Eo(n.presetColors,A=>(Ct(),le(Mr,null,[t.isTransparent(A)?(Ct(),le("div",{key:A,"aria-label":`Color:${A}`,class:"vc-sketch-presets-color",onClick:w=>l.handlePreset(A)},[Jt(y)],8,Bz)):(Ct(),le("div",{key:`!${A}`,class:"vc-sketch-presets-color","aria-label":`Color:${A}`,style:Ni({background:A}),onClick:w=>l.handlePreset(A)},null,12,zz))],64))),256))])],2)}var Nz=".vc-sketch{background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;padding:10px 10px 0;position:relative;width:200px}.vc-sketch-saturation-wrap{overflow:hidden;padding-bottom:75%;position:relative;width:100%}.vc-sketch-controls{display:flex}.vc-sketch-sliders{flex:1;padding:4px 0}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{height:10px;position:relative}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{border-radius:3px;height:24px;margin-left:4px;margin-top:4px;position:relative;width:24px}.vc-sketch-active-color{border-radius:2px;bottom:0;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);left:0;position:absolute;right:0;top:0;z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px;padding:4px 0 3px 10%;width:90%}.vc-sketch-field .vc-input__label{color:#222;display:block;font-size:11px;padding-bottom:4px;padding-top:3px;text-align:center;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{border-top:1px solid #eee;margin-left:-10px;margin-right:-10px;padding-left:10px;padding-top:10px}.vc-sketch-presets-color{cursor:pointer;display:inline-block;height:16px;margin:0 10px 10px 0;overflow:hidden;position:relative;vertical-align:top;width:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}";Mg(Nz);J_.render=Fz;J_.__file="src/components/sketch/sketch.vue";J_.install=Tg;const Uz={class:"form-group"},Vz={key:0},jz={class:"input-container"},Hz=_r({__name:"input-colorPicker",props:Bs({label:String,disabled:Boolean},{modelValue:{default:"#000000"},modelModifiers:{}}),emits:Bs(["change"],["update:modelValue"]),setup(t,{emit:e}){const n=ll(t,"modelValue"),a=e;function s({hex:l}){n.value=l,a("change",l)}return(l,i)=>(Ct(),le("div",Uz,[t.label?(Ct(),le("label",Vz,Mn(t.label),1)):mn("",!0),kt("div",jz,[Jt(at(J_),li({modelValue:n.value},l.$attrs,{"onUpdate:modelValue":s,disabled:t.disabled}),null,16,["modelValue","disabled"])])]))}});var a_={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */a_.exports;(function(t,e){(function(){var n,a="4.17.21",s=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",f="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",y=500,x="__lodash_placeholder__",A=1,w=2,E=4,L=1,k=2,z=1,F=2,D=4,B=8,U=16,$=32,q=64,tt=128,Y=256,G=512,rt=30,pt="...",Q=800,ot=16,Z=1,Kt=2,Ft=3,Tt=1/0,ie=9007199254740991,ue=17976931348623157e292,je=NaN,jt=4294967295,Ut=jt-1,xe=jt>>>1,Fe=[["ary",tt],["bind",z],["bindKey",F],["curry",B],["curryRight",U],["flip",G],["partial",$],["partialRight",q],["rearg",Y]],we="[object Arguments]",qe="[object Array]",fe="[object AsyncFunction]",ge="[object Boolean]",ne="[object Date]",Se="[object DOMException]",We="[object Error]",In="[object Function]",_t="[object GeneratorFunction]",N="[object Map]",Et="[object Number]",wt="[object Null]",ht="[object Object]",lt="[object Promise]",Pt="[object Proxy]",Wt="[object RegExp]",ee="[object Set]",Dt="[object String]",ve="[object Symbol]",Te="[object Undefined]",Ae="[object WeakMap]",De="[object WeakSet]",un="[object ArrayBuffer]",gn="[object DataView]",re="[object Float32Array]",ce="[object Float64Array]",_e="[object Int8Array]",Ue="[object Int16Array]",en="[object Int32Array]",Un="[object Uint8Array]",lr="[object Uint8ClampedArray]",Gn="[object Uint16Array]",zr="[object Uint32Array]",ur=/\b__p \+= '';/g,Fn=/\b(__p \+=) '' \+/g,Jn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gr=/&(?:amp|lt|gt|quot|#39);/g,rr=/[&<>"']/g,Mi=RegExp(gr.source),Ns=RegExp(rr.source),Zi=/<%-([\s\S]+?)%>/g,et=/<%([\s\S]+?)%>/g,ut=/<%=([\s\S]+?)%>/g,dt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,At=/^\w*$/,Rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qt=/[\\^$.*+?()[\]{}|]/g,te=RegExp(qt.source),gt=/^\s+/,Nt=/\s/,me=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ve=/\{\n\/\* \[wrapped with (.+)\] \*/,Ke=/,? & /,Le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ge=/[()=,{}\[\]\/\s]/,kn=/\\(\\)?/g,Tn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Re=/\w*$/,an=/^[-+]0x[0-9a-f]+$/i,dn=/^0b[01]+$/i,pn=/^\[object .+?Constructor\]$/,Er=/^0o[0-7]+$/i,bn=/^(?:0|[1-9]\d*)$/,jr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ei=/($^)/,Lr=/['\n\r\u2028\u2029\\]/g,Ur="\\ud800-\\udfff",Vr="\\u0300-\\u036f",Go="\\ufe20-\\ufe2f",vr="\\u20d0-\\u20ff",$i=Vr+Go+vr,ui="\\u2700-\\u27bf",br="a-z\\xdf-\\xf6\\xf8-\\xff",Tr="\\xac\\xb1\\xd7\\xf7",Wo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ws="\\u2000-\\u206f",Ki=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ta="A-Z\\xc0-\\xd6\\xd8-\\xde",nh="\\ufe0e\\ufe0f",Fu=Tr+Wo+ws+Ki,qi="['’]",Nu="["+Ur+"]",zo="["+Fu+"]",ao="["+$i+"]",La="\\d+",Di="["+ui+"]",us="["+br+"]",Oa="[^"+Ur+Fu+La+ui+br+ta+"]",cu="\\ud83c[\\udffb-\\udfff]",T="(?:"+ao+"|"+cu+")",H="[^"+Ur+"]",ft="(?:\\ud83c[\\udde6-\\uddff]){2}",zt="[\\ud800-\\udbff][\\udc00-\\udfff]",Yt="["+ta+"]",Xt="\\u200d",he="(?:"+us+"|"+Oa+")",nn="(?:"+Yt+"|"+Oa+")",fn="(?:"+qi+"(?:d|ll|m|re|s|t|ve))?",En="(?:"+qi+"(?:D|LL|M|RE|S|T|VE))?",Pn=T+"?",vn="["+nh+"]?",wr="(?:"+Xt+"(?:"+[H,ft,zt].join("|")+")"+vn+Pn+")*",to="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ui=vn+Pn+wr,Ze="(?:"+[Di,ft,zt].join("|")+")"+Ui,Wn="(?:"+[H+ao+"?",ao,ft,zt,Nu].join("|")+")",Ai=RegExp(qi,"g"),xo=RegExp(ao,"g"),mi=RegExp(cu+"(?="+cu+")|"+Wn+Ui,"g"),Us=RegExp([Yt+"?"+us+"+"+fn+"(?="+[zo,Yt,"$"].join("|")+")",nn+"+"+En+"(?="+[zo,Yt+he,"$"].join("|")+")",Yt+"?"+he+"+"+fn,Yt+"+"+En,Pr,to,La,Ze].join("|"),"g"),Pl=RegExp("["+Xt+Ur+$i+nh+"]"),_i=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ul=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],kl=-1,ni={};ni[re]=ni[ce]=ni[_e]=ni[Ue]=ni[en]=ni[Un]=ni[lr]=ni[Gn]=ni[zr]=!0,ni[we]=ni[qe]=ni[un]=ni[ge]=ni[gn]=ni[ne]=ni[We]=ni[In]=ni[N]=ni[Et]=ni[ht]=ni[Wt]=ni[ee]=ni[Dt]=ni[Ae]=!1;var Gr={};Gr[we]=Gr[qe]=Gr[un]=Gr[gn]=Gr[ge]=Gr[ne]=Gr[re]=Gr[ce]=Gr[_e]=Gr[Ue]=Gr[en]=Gr[N]=Gr[Et]=Gr[ht]=Gr[Wt]=Gr[ee]=Gr[Dt]=Gr[ve]=Gr[Un]=Gr[lr]=Gr[Gn]=Gr[zr]=!0,Gr[We]=Gr[In]=Gr[Ae]=!1;var so={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},hu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Df={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zf=parseFloat,zh=parseInt,ih=typeof ca=="object"&&ca&&ca.Object===Object&&ca,Bh=typeof self=="object"&&self&&self.Object===Object&&self,So=ih||Bh||Function("return this")(),Ac=e&&!e.nodeType&&e,cl=Ac&&!0&&t&&!t.nodeType&&t,Bf=cl&&cl.exports===Ac,fu=Bf&&ih.process,Bo=function(){try{var oe=cl&&cl.require&&cl.require("util").types;return oe||fu&&fu.binding&&fu.binding("util")}catch{}}(),wc=Bo&&Bo.isArrayBuffer,Mo=Bo&&Bo.isDate,Ya=Bo&&Bo.isMap,Vs=Bo&&Bo.isRegExp,js=Bo&&Bo.isSet,Ll=Bo&&Bo.isTypedArray;function To(oe,Be,Ie){switch(Ie.length){case 0:return oe.call(Be);case 1:return oe.call(Be,Ie[0]);case 2:return oe.call(Be,Ie[0],Ie[1]);case 3:return oe.call(Be,Ie[0],Ie[1],Ie[2])}return oe.apply(Be,Ie)}function Cs(oe,Be,Ie,Ye){for(var fr=-1,kr=oe==null?0:oe.length;++fr<kr;){var Wr=oe[fr];Be(Ye,Wr,Ie(Wr),oe)}return Ye}function Fo(oe,Be){for(var Ie=-1,Ye=oe==null?0:oe.length;++Ie<Ye&&Be(oe[Ie],Ie,oe)!==!1;);return oe}function Ol(oe,Be){for(var Ie=oe==null?0:oe.length;Ie--&&Be(oe[Ie],Ie,oe)!==!1;);return oe}function hl(oe,Be){for(var Ie=-1,Ye=oe==null?0:oe.length;++Ie<Ye;)if(!Be(oe[Ie],Ie,oe))return!1;return!0}function xa(oe,Be){for(var Ie=-1,Ye=oe==null?0:oe.length,fr=0,kr=[];++Ie<Ye;){var Wr=oe[Ie];Be(Wr,Ie,oe)&&(kr[fr++]=Wr)}return kr}function Uu(oe,Be){var Ie=oe==null?0:oe.length;return!!Ie&&du(oe,Be,0)>-1}function gi(oe,Be,Ie){for(var Ye=-1,fr=oe==null?0:oe.length;++Ye<fr;)if(Ie(Be,oe[Ye]))return!0;return!1}function eo(oe,Be){for(var Ie=-1,Ye=oe==null?0:oe.length,fr=Array(Ye);++Ie<Ye;)fr[Ie]=Be(oe[Ie],Ie,oe);return fr}function Xa(oe,Be){for(var Ie=-1,Ye=Be.length,fr=oe.length;++Ie<Ye;)oe[fr+Ie]=Be[Ie];return oe}function Rl(oe,Be,Ie,Ye){var fr=-1,kr=oe==null?0:oe.length;for(Ye&&kr&&(Ie=oe[++fr]);++fr<kr;)Ie=Be(Ie,oe[fr],fr,oe);return Ie}function oh(oe,Be,Ie,Ye){var fr=oe==null?0:oe.length;for(Ye&&fr&&(Ie=oe[--fr]);fr--;)Ie=Be(Ie,oe[fr],fr,oe);return Ie}function Vu(oe,Be){for(var Ie=-1,Ye=oe==null?0:oe.length;++Ie<Ye;)if(Be(oe[Ie],Ie,oe))return!0;return!1}var ah=Aa("length");function Is(oe){return oe.split("")}function Dl(oe){return oe.match(Le)||[]}function zl(oe,Be,Ie){var Ye;return Ie(oe,function(fr,kr,Wr){if(Be(fr,kr,Wr))return Ye=kr,!1}),Ye}function Cc(oe,Be,Ie,Ye){for(var fr=oe.length,kr=Ie+(Ye?1:-1);Ye?kr--:++kr<fr;)if(Be(oe[kr],kr,oe))return kr;return-1}function du(oe,Be,Ie){return Be===Be?ch(oe,Be,Ie):Cc(oe,fl,Ie)}function Fh(oe,Be,Ie,Ye){for(var fr=Ie-1,kr=oe.length;++fr<kr;)if(Ye(oe[fr],Be))return fr;return-1}function fl(oe){return oe!==oe}function Ic(oe,Be){var Ie=oe==null?0:oe.length;return Ie?qr(oe,Be)/Ie:je}function Aa(oe){return function(Be){return Be==null?n:Be[oe]}}function ea(oe){return function(Be){return oe==null?n:oe[Be]}}function dl(oe,Be,Ie,Ye,fr){return fr(oe,function(kr,Wr,Dn){Ie=Ye?(Ye=!1,kr):Be(Ie,kr,Wr,Dn)}),Ie}function Bl(oe,Be){var Ie=oe.length;for(oe.sort(Be);Ie--;)oe[Ie]=oe[Ie].value;return oe}function qr(oe,Be){for(var Ie,Ye=-1,fr=oe.length;++Ye<fr;){var kr=Be(oe[Ye]);kr!==n&&(Ie=Ie===n?kr:Ie+kr)}return Ie}function ju(oe,Be){for(var Ie=-1,Ye=Array(oe);++Ie<oe;)Ye[Ie]=Be(Ie);return Ye}function sh(oe,Be){return eo(Be,function(Ie){return[Ie,oe[Ie]]})}function Es(oe){return oe&&oe.slice(0,pe(oe)+1).replace(gt,"")}function wa(oe){return function(Be){return oe(Be)}}function lh(oe,Be){return eo(Be,function(Ie){return oe[Ie]})}function Hu(oe,Be){return oe.has(Be)}function Ec(oe,Be){for(var Ie=-1,Ye=oe.length;++Ie<Ye&&du(Be,oe[Ie],0)>-1;);return Ie}function Fl(oe,Be){for(var Ie=oe.length;Ie--&&du(Be,oe[Ie],0)>-1;);return Ie}function Gu(oe,Be){for(var Ie=oe.length,Ye=0;Ie--;)oe[Ie]===Be&&++Ye;return Ye}var pu=ea(so),Hs=ea(hu);function Wu(oe){return"\\"+Df[oe]}function pl(oe,Be){return oe==null?n:oe[Be]}function Ss(oe){return Pl.test(oe)}function na(oe){return _i.test(oe)}function Nh(oe){for(var Be,Ie=[];!(Be=oe.next()).done;)Ie.push(Be.value);return Ie}function uh(oe){var Be=-1,Ie=Array(oe.size);return oe.forEach(function(Ye,fr){Ie[++Be]=[fr,Ye]}),Ie}function Zu(oe,Be){return function(Ie){return oe(Be(Ie))}}function ha(oe,Be){for(var Ie=-1,Ye=oe.length,fr=0,kr=[];++Ie<Ye;){var Wr=oe[Ie];(Wr===Be||Wr===x)&&(oe[Ie]=x,kr[fr++]=Ie)}return kr}function ml(oe){var Be=-1,Ie=Array(oe.size);return oe.forEach(function(Ye){Ie[++Be]=Ye}),Ie}function Sc(oe){var Be=-1,Ie=Array(oe.size);return oe.forEach(function(Ye){Ie[++Be]=[Ye,Ye]}),Ie}function ch(oe,Be,Ie){for(var Ye=Ie-1,fr=oe.length;++Ye<fr;)if(oe[Ye]===Be)return Ye;return-1}function Nl(oe,Be,Ie){for(var Ye=Ie+1;Ye--;)if(oe[Ye]===Be)return Ye;return Ye}function mu(oe){return Ss(oe)?Sn(oe):ah(oe)}function Ra(oe){return Ss(oe)?ir(oe):Is(oe)}function pe(oe){for(var Be=oe.length;Be--&&Nt.test(oe.charAt(Be)););return Be}var ze=ea(rh);function Sn(oe){for(var Be=mi.lastIndex=0;mi.test(oe);)++Be;return Be}function ir(oe){return oe.match(mi)||[]}function zi(oe){return oe.match(Us)||[]}var Yr=function oe(Be){Be=Be==null?So:Ti.defaults(So.Object(),Be,Ti.pick(So,ul));var Ie=Be.Array,Ye=Be.Date,fr=Be.Error,kr=Be.Function,Wr=Be.Math,Dn=Be.Object,ri=Be.RegExp,fa=Be.String,Ao=Be.TypeError,Qa=Ie.prototype,$u=kr.prototype,Ku=Dn.prototype,hh=Be["__core-js_shared__"],ci=$u.toString,tr=Ku.hasOwnProperty,cs=0,Pi=function(){var p=/[^.]+$/.exec(hh&&hh.keys&&hh.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),Gs=Ku.toString,Ja=ci.call(Dn),wi=So._,xn=ri("^"+ci.call(tr).replace(qt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wo=Bf?Be.Buffer:n,Da=Be.Symbol,za=Be.Uint8Array,Zo=wo?wo.allocUnsafe:n,$o=Zu(Dn.getPrototypeOf,Dn),gu=Dn.create,sn=Ku.propertyIsEnumerable,gl=Qa.splice,Ul=Da?Da.isConcatSpreadable:n,Vl=Da?Da.iterator:n,Co=Da?Da.toStringTag:n,Po=function(){try{var p=ks(Dn,"defineProperty");return p({},"",{}),p}catch{}}(),Ff=Be.clearTimeout!==So.clearTimeout&&Be.clearTimeout,Nf=Ye&&Ye.now!==So.Date.now&&Ye.now,hs=Be.setTimeout!==So.setTimeout&&Be.setTimeout,Ws=Wr.ceil,Uh=Wr.floor,Mc=Dn.getOwnPropertySymbols,Hd=wo?wo.isBuffer:n,Uf=Be.isFinite,vl=Qa.join,Ms=Zu(Dn.keys,Dn),or=Wr.max,lo=Wr.min,Zs=Ye.now,da=Be.parseInt,qu=Wr.random,Yu=Qa.reverse,Ts=ks(Be,"DataView"),Ko=ks(Be,"Map"),Tc=ks(Be,"Promise"),Nn=ks(Be,"Set"),Ln=ks(Be,"WeakMap"),Xu=ks(Dn,"create"),ra=Ln&&new Ln,Ba={},pa=_h(Ts),jl=_h(Ko),Gd=_h(Tc),Vf=_h(Nn),vi=_h(Ln),ko=Da?Da.prototype:n,fh=ko?ko.valueOf:n,Qu=ko?ko.toString:n;function bt(p){if(ho(p)&&!yr(p)&&!(p instanceof Br)){if(p instanceof Ia)return p;if(tr.call(p,"__wrapped__"))return Qg(p)}return new Ia(p)}var fs=function(){function p(){}return function(_){if(!co(_))return{};if(gu)return gu(_);p.prototype=_;var P=new p;return p.prototype=n,P}}();function Ca(){}function Ia(p,_){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!_,this.__index__=0,this.__values__=n}bt.templateSettings={escape:Zi,evaluate:et,interpolate:ut,variable:"",imports:{_:bt}},bt.prototype=Ca.prototype,bt.prototype.constructor=bt,Ia.prototype=fs(Ca.prototype),Ia.prototype.constructor=Ia;function Br(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=jt,this.__views__=[]}function jf(){var p=new Br(this.__wrapped__);return p.__actions__=Qs(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=Qs(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=Qs(this.__views__),p}function dh(){if(this.__filtered__){var p=new Br(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function Vh(){var p=this.__wrapped__.value(),_=this.__dir__,P=yr(p),W=_<0,st=P?p.length:0,It=Pb(0,st,this.__views__),$t=It.start,ae=It.end,be=ae-$t,Qe=W?ae:$t-1,tn=this.__iteratees__,ln=tn.length,jn=0,mr=lo(be,this.__takeCount__);if(!P||!W&&st==be&&mr==be)return Fg(p,this.__actions__);var Rr=[];t:for(;be--&&jn<mr;){Qe+=_;for(var di=-1,Dr=p[Qe];++di<ln;){var xi=tn[di],Li=xi.iteratee,Eu=xi.type,wl=Li(Dr);if(Eu==Kt)Dr=wl;else if(!wl){if(Eu==Z)continue t;break t}}Rr[jn++]=Dr}return Rr}Br.prototype=fs(Ca.prototype),Br.prototype.constructor=Br;function vu(p){var _=-1,P=p==null?0:p.length;for(this.clear();++_<P;){var W=p[_];this.set(W[0],W[1])}}function ph(){this.__data__=Xu?Xu(null):{},this.size=0}function Pc(p){var _=this.has(p)&&delete this.__data__[p];return this.size-=_?1:0,_}function Wd(p){var _=this.__data__;if(Xu){var P=_[p];return P===m?n:P}return tr.call(_,p)?_[p]:n}function Ju(p){var _=this.__data__;return Xu?_[p]!==n:tr.call(_,p)}function tc(p,_){var P=this.__data__;return this.size+=this.has(p)?0:1,P[p]=Xu&&_===n?m:_,this}vu.prototype.clear=ph,vu.prototype.delete=Pc,vu.prototype.get=Wd,vu.prototype.has=Ju,vu.prototype.set=tc;function $s(p){var _=-1,P=p==null?0:p.length;for(this.clear();++_<P;){var W=p[_];this.set(W[0],W[1])}}function ec(){this.__data__=[],this.size=0}function Ks(p){var _=this.__data__,P=ke(_,p);if(P<0)return!1;var W=_.length-1;return P==W?_.pop():gl.call(_,P,1),--this.size,!0}function Zd(p){var _=this.__data__,P=ke(_,p);return P<0?n:_[P][1]}function jh(p){return ke(this.__data__,p)>-1}function $d(p,_){var P=this.__data__,W=ke(P,p);return W<0?(++this.size,P.push([p,_])):P[W][1]=_,this}$s.prototype.clear=ec,$s.prototype.delete=Ks,$s.prototype.get=Zd,$s.prototype.has=jh,$s.prototype.set=$d;function qs(p){var _=-1,P=p==null?0:p.length;for(this.clear();++_<P;){var W=p[_];this.set(W[0],W[1])}}function c(){this.size=0,this.__data__={hash:new vu,map:new(Ko||$s),string:new vu}}function d(p){var _=Ci(this,p).delete(p);return this.size-=_?1:0,_}function h(p){return Ci(this,p).get(p)}function v(p){return Ci(this,p).has(p)}function I(p,_){var P=Ci(this,p),W=P.size;return P.set(p,_),this.size+=P.size==W?0:1,this}qs.prototype.clear=c,qs.prototype.delete=d,qs.prototype.get=h,qs.prototype.has=v,qs.prototype.set=I;function M(p){var _=-1,P=p==null?0:p.length;for(this.__data__=new qs;++_<P;)this.add(p[_])}function O(p){return this.__data__.set(p,m),this}function V(p){return this.__data__.has(p)}M.prototype.add=M.prototype.push=O,M.prototype.has=V;function X(p){var _=this.__data__=new $s(p);this.size=_.size}function it(){this.__data__=new $s,this.size=0}function vt(p){var _=this.__data__,P=_.delete(p);return this.size=_.size,P}function yt(p){return this.__data__.get(p)}function xt(p){return this.__data__.has(p)}function Bt(p,_){var P=this.__data__;if(P instanceof $s){var W=P.__data__;if(!Ko||W.length<s-1)return W.push([p,_]),this.size=++P.size,this;P=this.__data__=new qs(W)}return P.set(p,_),this.size=P.size,this}X.prototype.clear=it,X.prototype.delete=vt,X.prototype.get=yt,X.prototype.has=xt,X.prototype.set=Bt;function Lt(p,_){var P=yr(p),W=!P&&vs(p),st=!P&&!W&&Al(p),It=!P&&!W&&!st&&sc(p),$t=P||W||st||It,ae=$t?ju(p.length,fa):[],be=ae.length;for(var Qe in p)(_||tr.call(p,Qe))&&!($t&&(Qe=="length"||st&&(Qe=="offset"||Qe=="parent")||It&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||Js(Qe,be)))&&ae.push(Qe);return ae}function Ht(p){var _=p.length;return _?p[Dg(0,_-1)]:n}function Mt(p,_){return zc(Qs(p),yn(_,0,p.length))}function Gt(p){return zc(Qs(p))}function Qt(p,_,P){(P!==n&&!Ei(p[_],P)||P===n&&!(_ in p))&&Xe(p,_,P)}function de(p,_,P){var W=p[_];(!(tr.call(p,_)&&Ei(W,P))||P===n&&!(_ in p))&&Xe(p,_,P)}function ke(p,_){for(var P=p.length;P--;)if(Ei(p[P][0],_))return P;return-1}function Me(p,_,P,W){return er(p,function(st,It,$t){_(W,st,P(st),$t)}),W}function Oe(p,_){return p&&rc(_,Ma(_),p)}function He(p,_){return p&&rc(_,ma(_),p)}function Xe(p,_,P){_=="__proto__"&&Po?Po(p,_,{configurable:!0,enumerable:!0,value:P,writable:!0}):p[_]=P}function rn(p,_){for(var P=-1,W=_.length,st=Ie(W),It=p==null;++P<W;)st[P]=It?n:Tm(p,_[P]);return st}function yn(p,_,P){return p===p&&(P!==n&&(p=p<=P?p:P),_!==n&&(p=p>=_?p:_)),p}function On(p,_,P,W,st,It){var $t,ae=_&A,be=_&w,Qe=_&E;if(P&&($t=st?P(p,W,st,It):P(p)),$t!==n)return $t;if(!co(p))return p;var tn=yr(p);if(tn){if($t=Lb(p),!ae)return Qs(p,$t)}else{var ln=ps(p),jn=ln==In||ln==_t;if(Al(p))return Jy(p,ae);if(ln==ht||ln==we||jn&&!st){if($t=be||jn?{}:d0(p),!ae)return be?Zf(p,He($t,p)):n0(p,Oe($t,p))}else{if(!Gr[ln])return st?p:{};$t=Ob(p,ln,ae)}}It||(It=new X);var mr=It.get(p);if(mr)return mr;It.set(p,$t),of(p)?p.forEach(function(Dr){$t.add(On(Dr,_,P,Dr,p,It))}):Uc(p)&&p.forEach(function(Dr,xi){$t.set(xi,On(Dr,_,P,xi,p,It))});var Rr=Qe?be?Wg:Gg:be?ma:Ma,di=tn?n:Rr(p);return Fo(di||p,function(Dr,xi){di&&(xi=Dr,Dr=p[xi]),de($t,xi,On(Dr,_,P,xi,p,It))}),$t}function Xn(p){var _=Ma(p);return function(P){return Kn(P,p,_)}}function Kn(p,_,P){var W=P.length;if(p==null)return!W;for(p=Dn(p);W--;){var st=P[W],It=_[st],$t=p[st];if($t===n&&!(st in p)||!It($t))return!1}return!0}function Xr(p,_,P){if(typeof p!="function")throw new Ao(i);return Yh(function(){p.apply(n,P)},_)}function Cn(p,_,P,W){var st=-1,It=Uu,$t=!0,ae=p.length,be=[],Qe=_.length;if(!ae)return be;P&&(_=eo(_,wa(P))),W?(It=gi,$t=!1):_.length>=s&&(It=Hu,$t=!1,_=new M(_));t:for(;++st<ae;){var tn=p[st],ln=P==null?tn:P(tn);if(tn=W||tn!==0?tn:0,$t&&ln===ln){for(var jn=Qe;jn--;)if(_[jn]===ln)continue t;be.push(tn)}else It(_,ln,W)||be.push(tn)}return be}var er=Ug(no),Cr=Ug(No,!0);function dr(p,_){var P=!0;return er(p,function(W,st,It){return P=!!_(W,st,It),P}),P}function sr(p,_,P){for(var W=-1,st=p.length;++W<st;){var It=p[W],$t=_(It);if($t!=null&&(ae===n?$t===$t&&!ja($t):P($t,ae)))var ae=$t,be=It}return be}function Ir(p,_,P,W){var st=p.length;for(P=$r(P),P<0&&(P=-P>st?0:st+P),W=W===n||W>st?st:$r(W),W<0&&(W+=st),W=P>W?0:U0(W);P<W;)p[P++]=_;return p}function cr(p,_){var P=[];return er(p,function(W,st,It){_(W,st,It)&&P.push(W)}),P}function zn(p,_,P,W,st){var It=-1,$t=p.length;for(P||(P=om),st||(st=[]);++It<$t;){var ae=p[It];_>0&&P(ae)?_>1?zn(ae,_-1,P,W,st):Xa(st,ae):W||(st[st.length]=ae)}return st}var Lo=Vg(),uo=Vg(!0);function no(p,_){return p&&Lo(p,_,Ma)}function No(p,_){return p&&uo(p,_,Ma)}function Vi(p,_){return xa(_,function(P){return Xl(p[P])})}function Bi(p,_){_=Rc(_,p);for(var P=0,W=_.length;p!=null&&P<W;)p=p[Cu(_[P++])];return P&&P==W?p:n}function ts(p,_,P){var W=_(p);return yr(p)?W:Xa(W,P(p))}function Oi(p){return p==null?p===n?Te:wt:Co&&Co in Dn(p)?qf(p):lm(p)}function Hl(p,_){return p>_}function es(p,_){return p!=null&&tr.call(p,_)}function yl(p,_){return p!=null&&_ in Dn(p)}function Ys(p,_,P){return p>=lo(_,P)&&p<or(_,P)}function kc(p,_,P){for(var W=P?gi:Uu,st=p[0].length,It=p.length,$t=It,ae=Ie(It),be=1/0,Qe=[];$t--;){var tn=p[$t];$t&&_&&(tn=eo(tn,wa(_))),be=lo(tn.length,be),ae[$t]=!P&&(_||st>=120&&tn.length>=120)?new M($t&&tn):n}tn=p[0];var ln=-1,jn=ae[0];t:for(;++ln<st&&Qe.length<be;){var mr=tn[ln],Rr=_?_(mr):mr;if(mr=P||mr!==0?mr:0,!(jn?Hu(jn,Rr):W(Qe,Rr,P))){for($t=It;--$t;){var di=ae[$t];if(!(di?Hu(di,Rr):W(p[$t],Rr,P)))continue t}jn&&jn.push(Rr),Qe.push(mr)}}return Qe}function mh(p,_,P,W){return no(p,function(st,It,$t){_(W,P(st),It,$t)}),W}function Xs(p,_,P){_=Rc(_,p),p=Kg(p,_);var W=p==null?p:p[Cu(ql(_))];return W==null?n:To(W,p,P)}function Lc(p){return ho(p)&&Oi(p)==we}function Hh(p){return ho(p)&&Oi(p)==un}function Gl(p){return ho(p)&&Oi(p)==ne}function yu(p,_,P,W,st){return p===_?!0:p==null||_==null||!ho(p)&&!ho(_)?p!==p&&_!==_:Wl(p,_,P,W,yu,st)}function Wl(p,_,P,W,st,It){var $t=yr(p),ae=yr(_),be=$t?qe:ps(p),Qe=ae?qe:ps(_);be=be==we?ht:be,Qe=Qe==we?ht:Qe;var tn=be==ht,ln=Qe==ht,jn=be==Qe;if(jn&&Al(p)){if(!Al(_))return!1;$t=!0,tn=!1}if(jn&&!tn)return It||(It=new X),$t||sc(p)?c0(p,_,P,W,st,It):Mb(p,_,be,P,W,st,It);if(!(P&L)){var mr=tn&&tr.call(p,"__wrapped__"),Rr=ln&&tr.call(_,"__wrapped__");if(mr||Rr){var di=mr?p.value():p,Dr=Rr?_.value():_;return It||(It=new X),st(di,Dr,P,W,It)}}return jn?(It||(It=new X),Tb(p,_,P,W,st,It)):!1}function qo(p){return ho(p)&&ps(p)==N}function _l(p,_,P,W){var st=P.length,It=st,$t=!W;if(p==null)return!It;for(p=Dn(p);st--;){var ae=P[st];if($t&&ae[2]?ae[1]!==p[ae[0]]:!(ae[0]in p))return!1}for(;++st<It;){ae=P[st];var be=ae[0],Qe=p[be],tn=ae[1];if($t&&ae[2]){if(Qe===n&&!(be in p))return!1}else{var ln=new X;if(W)var jn=W(Qe,tn,be,p,_,ln);if(!(jn===n?yu(tn,Qe,L|k,W,ln):jn))return!1}}return!0}function _u(p){if(!co(p)||p0(p))return!1;var _=Xl(p)?xn:pn;return _.test(_h(p))}function Oc(p){return ho(p)&&Oi(p)==Wt}function hi(p){return ho(p)&&ps(p)==ee}function Ps(p){return ho(p)&&Ql(p.length)&&!!ni[Oi(p)]}function Fa(p){return typeof p=="function"?p:p==null?Jl:typeof p=="object"?yr(p)?Kd(p[0],p[1]):vh(p):S2(p)}function bu(p){if(!Dc(p))return Ms(p);var _=[];for(var P in Dn(p))tr.call(p,P)&&P!="constructor"&&_.push(P);return _}function Og(p){if(!co(p))return sm(p);var _=Dc(p),P=[];for(var W in p)W=="constructor"&&(_||!tr.call(p,W))||P.push(W);return P}function gh(p,_){return p<_}function Hp(p,_){var P=-1,W=fi(p)?Ie(p.length):[];return er(p,function(st,It,$t){W[++P]=_(st,It,$t)}),W}function vh(p){var _=rm(p);return _.length==1&&_[0][2]?Ls(_[0][0],_[0][1]):function(P){return P===p||_l(P,p,_)}}function Kd(p,_){return Zg(p)&&Yf(_)?Ls(Cu(p),_):function(P){var W=Tm(P,p);return W===n&&W===_?sd(P,p):yu(_,W,L|k)}}function xu(p,_,P,W,st){p!==_&&Lo(_,function(It,$t){if(st||(st=new X),co(It))Hf(p,_,$t,P,xu,W,st);else{var ae=W?W(qg(p,$t),It,$t+"",p,_,st):n;ae===n&&(ae=It),Qt(p,$t,ae)}},ma)}function Hf(p,_,P,W,st,It,$t){var ae=qg(p,P),be=qg(_,P),Qe=$t.get(be);if(Qe){Qt(p,P,Qe);return}var tn=It?It(ae,be,P+"",p,_,$t):n,ln=tn===n;if(ln){var jn=yr(be),mr=!jn&&Al(be),Rr=!jn&&!mr&&sc(be);tn=be,jn||mr||Rr?yr(ae)?tn=ae:Gi(ae)?tn=Qs(ae):mr?(ln=!1,tn=Jy(be,!0)):Rr?(ln=!1,tn=Yp(be,!0)):tn=[]:Vc(be)||vs(be)?(tn=ae,vs(ae)?tn=vo(ae):(!co(ae)||Xl(ae))&&(tn=d0(be))):ln=!1}ln&&($t.set(be,tn),st(tn,be,W,It,$t),$t.delete(be)),Qt(p,P,tn)}function Gp(p,_){var P=p.length;if(P)return _+=_<0?P:0,Js(_,P)?p[_]:n}function yh(p,_,P){_.length?_=eo(_,function(It){return yr(It)?function($t){return Bi($t,It.length===1?It[0]:It)}:It}):_=[Jl];var W=-1;_=eo(_,wa(xr()));var st=Hp(p,function(It,$t,ae){var be=eo(_,function(Qe){return Qe(It)});return{criteria:be,index:++W,value:It}});return Bl(st,function(It,$t){return Au(It,$t,P)})}function ds(p,_){return Ky(p,_,function(P,W){return sd(p,W)})}function Ky(p,_,P){for(var W=-1,st=_.length,It={};++W<st;){var $t=_[W],ae=Bi(p,$t);P(ae,$t)&&Zl(It,Rc($t,p),ae)}return It}function qy(p){return function(_){return Bi(_,p)}}function Rg(p,_,P,W){var st=W?Fh:du,It=-1,$t=_.length,ae=p;for(p===_&&(_=Qs(_)),P&&(ae=eo(p,wa(P)));++It<$t;)for(var be=0,Qe=_[It],tn=P?P(Qe):Qe;(be=st(ae,tn,be,W))>-1;)ae!==p&&gl.call(ae,be,1),gl.call(p,be,1);return p}function Yy(p,_){for(var P=p?_.length:0,W=P-1;P--;){var st=_[P];if(P==W||st!==It){var It=st;Js(st)?gl.call(p,st,1):Bg(p,st)}}return p}function Dg(p,_){return p+Uh(qu()*(_-p+1))}function bb(p,_,P,W){for(var st=-1,It=or(Ws((_-p)/(P||1)),0),$t=Ie(It);It--;)$t[W?It:++st]=p,p+=P;return $t}function qd(p,_){var P="";if(!p||_<1||_>ie)return P;do _%2&&(P+=p),_=Uh(_/2),_&&(p+=p);while(_);return P}function oi(p,_){return ep(gs(p,_,Jl),p+"")}function Wp(p){return Ht(uf(p))}function Xy(p,_){var P=uf(p);return zc(P,yn(_,0,P.length))}function Zl(p,_,P,W){if(!co(p))return p;_=Rc(_,p);for(var st=-1,It=_.length,$t=It-1,ae=p;ae!=null&&++st<It;){var be=Cu(_[st]),Qe=P;if(be==="__proto__"||be==="constructor"||be==="prototype")return p;if(st!=$t){var tn=ae[be];Qe=W?W(tn,be,ae):n,Qe===n&&(Qe=co(tn)?tn:Js(_[st+1])?[]:{})}de(ae,be,Qe),ae=ae[be]}return p}var Gf=ra?function(p,_){return ra.set(p,_),p}:Jl,xb=Po?function(p,_){return Po(p,"toString",{configurable:!0,enumerable:!1,value:ux(_),writable:!0})}:Jl;function Ab(p){return zc(uf(p))}function $l(p,_,P){var W=-1,st=p.length;_<0&&(_=-_>st?0:st+_),P=P>st?st:P,P<0&&(P+=st),st=_>P?0:P-_>>>0,_>>>=0;for(var It=Ie(st);++W<st;)It[W]=p[W+_];return It}function wb(p,_){var P;return er(p,function(W,st,It){return P=_(W,st,It),!P}),!!P}function Zp(p,_,P){var W=0,st=p==null?W:p.length;if(typeof _=="number"&&_===_&&st<=xe){for(;W<st;){var It=W+st>>>1,$t=p[It];$t!==null&&!ja($t)&&(P?$t<=_:$t<_)?W=It+1:st=It}return st}return zg(p,_,Jl,P)}function zg(p,_,P,W){var st=0,It=p==null?0:p.length;if(It===0)return 0;_=P(_);for(var $t=_!==_,ae=_===null,be=ja(_),Qe=_===n;st<It;){var tn=Uh((st+It)/2),ln=P(p[tn]),jn=ln!==n,mr=ln===null,Rr=ln===ln,di=ja(ln);if($t)var Dr=W||Rr;else Qe?Dr=Rr&&(W||jn):ae?Dr=Rr&&jn&&(W||!mr):be?Dr=Rr&&jn&&!mr&&(W||!di):mr||di?Dr=!1:Dr=W?ln<=_:ln<_;Dr?st=tn+1:It=tn}return lo(It,Ut)}function Qy(p,_){for(var P=-1,W=p.length,st=0,It=[];++P<W;){var $t=p[P],ae=_?_($t):$t;if(!P||!Ei(ae,be)){var be=ae;It[st++]=$t===0?0:$t}}return It}function $p(p){return typeof p=="number"?p:ja(p)?je:+p}function bl(p){if(typeof p=="string")return p;if(yr(p))return eo(p,bl)+"";if(ja(p))return Qu?Qu.call(p):"";var _=p+"";return _=="0"&&1/p==-Tt?"-0":_}function xl(p,_,P){var W=-1,st=Uu,It=p.length,$t=!0,ae=[],be=ae;if(P)$t=!1,st=gi;else if(It>=s){var Qe=_?null:ns(p);if(Qe)return ml(Qe);$t=!1,st=Hu,be=new M}else be=_?[]:ae;t:for(;++W<It;){var tn=p[W],ln=_?_(tn):tn;if(tn=P||tn!==0?tn:0,$t&&ln===ln){for(var jn=be.length;jn--;)if(be[jn]===ln)continue t;_&&be.push(ln),ae.push(tn)}else st(be,ln,P)||(be!==ae&&be.push(ln),ae.push(tn))}return ae}function Bg(p,_){return _=Rc(_,p),p=Kg(p,_),p==null||delete p[Cu(ql(_))]}function Oo(p,_,P,W){return Zl(p,_,P(Bi(p,_)),W)}function Gh(p,_,P,W){for(var st=p.length,It=W?st:-1;(W?It--:++It<st)&&_(p[It],It,p););return P?$l(p,W?0:It,W?It+1:st):$l(p,W?It+1:0,W?st:It)}function Fg(p,_){var P=p;return P instanceof Br&&(P=P.value()),Rl(_,function(W,st){return st.func.apply(st.thisArg,Xa([W],st.args))},P)}function Wf(p,_,P){var W=p.length;if(W<2)return W?xl(p[0]):[];for(var st=-1,It=Ie(W);++st<W;)for(var $t=p[st],ae=-1;++ae<W;)ae!=st&&(It[st]=Cn(It[st]||$t,p[ae],_,P));return xl(zn(It,1),_,P)}function Yd(p,_,P){for(var W=-1,st=p.length,It=_.length,$t={};++W<st;){var ae=W<It?_[W]:n;P($t,p[W],ae)}return $t}function Wh(p){return Gi(p)?p:[]}function Kp(p){return typeof p=="function"?p:Jl}function Rc(p,_){return yr(p)?p:Zg(p,_)?[p]:um(Wi(p))}var Xd=oi;function nc(p,_,P){var W=p.length;return P=P===n?W:P,!_&&P>=W?p:$l(p,_,P)}var qp=Ff||function(p){return So.clearTimeout(p)};function Jy(p,_){if(_)return p.slice();var P=p.length,W=Zo?Zo(P):new p.constructor(P);return p.copy(W),W}function Zh(p){var _=new p.constructor(p.byteLength);return new za(_).set(new za(p)),_}function Cb(p,_){var P=_?Zh(p.buffer):p.buffer;return new p.constructor(P,p.byteOffset,p.byteLength)}function Ng(p){var _=new p.constructor(p.source,Re.exec(p));return _.lastIndex=p.lastIndex,_}function Ib(p){return fh?Dn(fh.call(p)):{}}function Yp(p,_){var P=_?Zh(p.buffer):p.buffer;return new p.constructor(P,p.byteOffset,p.length)}function Xp(p,_){if(p!==_){var P=p!==n,W=p===null,st=p===p,It=ja(p),$t=_!==n,ae=_===null,be=_===_,Qe=ja(_);if(!ae&&!Qe&&!It&&p>_||It&&$t&&be&&!ae&&!Qe||W&&$t&&be||!P&&be||!st)return 1;if(!W&&!It&&!Qe&&p<_||Qe&&P&&st&&!W&&!It||ae&&P&&st||!$t&&st||!be)return-1}return 0}function Au(p,_,P){for(var W=-1,st=p.criteria,It=_.criteria,$t=st.length,ae=P.length;++W<$t;){var be=Xp(st[W],It[W]);if(be){if(W>=ae)return be;var Qe=P[W];return be*(Qe=="desc"?-1:1)}}return p.index-_.index}function t0(p,_,P,W){for(var st=-1,It=p.length,$t=P.length,ae=-1,be=_.length,Qe=or(It-$t,0),tn=Ie(be+Qe),ln=!W;++ae<be;)tn[ae]=_[ae];for(;++st<$t;)(ln||st<It)&&(tn[P[st]]=p[st]);for(;Qe--;)tn[ae++]=p[st++];return tn}function e0(p,_,P,W){for(var st=-1,It=p.length,$t=-1,ae=P.length,be=-1,Qe=_.length,tn=or(It-ae,0),ln=Ie(tn+Qe),jn=!W;++st<tn;)ln[st]=p[st];for(var mr=st;++be<Qe;)ln[mr+be]=_[be];for(;++$t<ae;)(jn||st<It)&&(ln[mr+P[$t]]=p[st++]);return ln}function Qs(p,_){var P=-1,W=p.length;for(_||(_=Ie(W));++P<W;)_[P]=p[P];return _}function rc(p,_,P,W){var st=!P;P||(P={});for(var It=-1,$t=_.length;++It<$t;){var ae=_[It],be=W?W(P[ae],p[ae],ae,P,p):n;be===n&&(be=p[ae]),st?Xe(P,ae,be):de(P,ae,be)}return P}function n0(p,_){return rc(p,im(p),_)}function Zf(p,_){return rc(p,h0(p),_)}function Qp(p,_){return function(P,W){var st=yr(P)?Cs:Me,It=_?_():{};return st(P,p,xr(W,2),It)}}function $f(p){return oi(function(_,P){var W=-1,st=P.length,It=st>1?P[st-1]:n,$t=st>2?P[2]:n;for(It=p.length>3&&typeof It=="function"?(st--,It):n,$t&&ms(P[0],P[1],$t)&&(It=st<3?n:It,st=1),_=Dn(_);++W<st;){var ae=P[W];ae&&p(_,ae,W,It)}return _})}function Ug(p,_){return function(P,W){if(P==null)return P;if(!fi(P))return p(P,W);for(var st=P.length,It=_?st:-1,$t=Dn(P);(_?It--:++It<st)&&W($t[It],It,$t)!==!1;);return P}}function Vg(p){return function(_,P,W){for(var st=-1,It=Dn(_),$t=W(_),ae=$t.length;ae--;){var be=$t[p?ae:++st];if(P(It[be],be,It)===!1)break}return _}}function Eb(p,_,P){var W=_&z,st=Qd(p);function It(){var $t=this&&this!==So&&this instanceof It?st:p;return $t.apply(W?P:this,arguments)}return It}function r0(p){return function(_){_=Wi(_);var P=Ss(_)?Ra(_):n,W=P?P[0]:_.charAt(0),st=P?nc(P,1).join(""):_.slice(1);return W[p]()+st}}function wu(p){return function(_){return Rl(I2(pv(_).replace(Ai,"")),p,"")}}function Qd(p){return function(){var _=arguments;switch(_.length){case 0:return new p;case 1:return new p(_[0]);case 2:return new p(_[0],_[1]);case 3:return new p(_[0],_[1],_[2]);case 4:return new p(_[0],_[1],_[2],_[3]);case 5:return new p(_[0],_[1],_[2],_[3],_[4]);case 6:return new p(_[0],_[1],_[2],_[3],_[4],_[5]);case 7:return new p(_[0],_[1],_[2],_[3],_[4],_[5],_[6])}var P=fs(p.prototype),W=p.apply(P,_);return co(W)?W:P}}function jg(p,_,P){var W=Qd(p);function st(){for(var It=arguments.length,$t=Ie(It),ae=It,be=qh(st);ae--;)$t[ae]=arguments[ae];var Qe=It<3&&$t[0]!==be&&$t[It-1]!==be?[]:ha($t,be);if(It-=Qe.length,It<P)return a0(p,_,Jp,st.placeholder,n,$t,Qe,n,n,P-It);var tn=this&&this!==So&&this instanceof st?W:p;return To(tn,this,$t)}return st}function Kf(p){return function(_,P,W){var st=Dn(_);if(!fi(_)){var It=xr(P,3);_=Ma(_),P=function(ae){return It(st[ae],ae,st)}}var $t=p(_,P,W);return $t>-1?st[It?_[$t]:$t]:n}}function Kl(p){return oc(function(_){var P=_.length,W=P,st=Ia.prototype.thru;for(p&&_.reverse();W--;){var It=_[W];if(typeof It!="function")throw new Ao(i);if(st&&!$t&&tp(It)=="wrapper")var $t=new Ia([],!0)}for(W=$t?W:P;++W<P;){It=_[W];var ae=tp(It),be=ae=="wrapper"?Kh(It):n;be&&$g(be[0])&&be[1]==(tt|B|$|Y)&&!be[4].length&&be[9]==1?$t=$t[tp(be[0])].apply($t,be[3]):$t=It.length==1&&$g(It)?$t[ae]():$t.thru(It)}return function(){var Qe=arguments,tn=Qe[0];if($t&&Qe.length==1&&yr(tn))return $t.plant(tn).value();for(var ln=0,jn=P?_[ln].apply(this,Qe):tn;++ln<P;)jn=_[ln].call(this,jn);return jn}})}function Jp(p,_,P,W,st,It,$t,ae,be,Qe){var tn=_&tt,ln=_&z,jn=_&F,mr=_&(B|U),Rr=_&G,di=jn?n:Qd(p);function Dr(){for(var xi=arguments.length,Li=Ie(xi),Eu=xi;Eu--;)Li[Eu]=arguments[Eu];if(mr)var wl=qh(Dr),Su=Gu(Li,wl);if(W&&(Li=t0(Li,W,st,mr)),It&&(Li=e0(Li,It,$t,mr)),xi-=Su,mr&&xi<Qe){var Ta=ha(Li,wl);return a0(p,_,Jp,Dr.placeholder,P,Li,Ta,ae,be,Qe-xi)}var Hc=ln?P:this,cf=jn?Hc[p]:p;return xi=Li.length,ae?Li=m0(Li,ae):Rr&&xi>1&&Li.reverse(),tn&&be<xi&&(Li.length=be),this&&this!==So&&this instanceof Dr&&(cf=di||Qd(cf)),cf.apply(Hc,Li)}return Dr}function i0(p,_){return function(P,W){return mh(P,p,_(W),{})}}function tm(p,_){return function(P,W){var st;if(P===n&&W===n)return _;if(P!==n&&(st=P),W!==n){if(st===n)return W;typeof P=="string"||typeof W=="string"?(P=bl(P),W=bl(W)):(P=$p(P),W=$p(W)),st=p(P,W)}return st}}function $h(p){return oc(function(_){return _=eo(_,wa(xr())),oi(function(P){var W=this;return p(_,function(st){return To(st,W,P)})})})}function Jd(p,_){_=_===n?" ":bl(_);var P=_.length;if(P<2)return P?qd(_,p):_;var W=qd(_,Ws(p/mu(_)));return Ss(_)?nc(Ra(W),0,p).join(""):W.slice(0,p)}function Sb(p,_,P,W){var st=_&z,It=Qd(p);function $t(){for(var ae=-1,be=arguments.length,Qe=-1,tn=W.length,ln=Ie(tn+be),jn=this&&this!==So&&this instanceof $t?It:p;++Qe<tn;)ln[Qe]=W[Qe];for(;be--;)ln[Qe++]=arguments[++ae];return To(jn,st?P:this,ln)}return $t}function o0(p){return function(_,P,W){return W&&typeof W!="number"&&ms(_,P,W)&&(P=W=n),_=lc(_),P===n?(P=_,_=0):P=lc(P),W=W===n?_<P?1:-1:lc(W),bb(_,P,W,p)}}function em(p){return function(_,P){return typeof _=="string"&&typeof P=="string"||(_=ys(_),P=ys(P)),p(_,P)}}function a0(p,_,P,W,st,It,$t,ae,be,Qe){var tn=_&B,ln=tn?$t:n,jn=tn?n:$t,mr=tn?It:n,Rr=tn?n:It;_|=tn?$:q,_&=~(tn?q:$),_&D||(_&=~(z|F));var di=[p,_,st,mr,ln,Rr,jn,ae,be,Qe],Dr=P.apply(n,di);return $g(p)&&Yg(Dr,di),Dr.placeholder=W,g0(Dr,p,_)}function nm(p){var _=Wr[p];return function(P,W){if(P=ys(P),W=W==null?0:lo($r(W),292),W&&Uf(P)){var st=(Wi(P)+"e").split("e"),It=_(st[0]+"e"+(+st[1]+W));return st=(Wi(It)+"e").split("e"),+(st[0]+"e"+(+st[1]-W))}return _(P)}}var ns=Nn&&1/ml(new Nn([,-0]))[1]==Tt?function(p){return new Nn(p)}:fx;function s0(p){return function(_){var P=ps(_);return P==N?uh(_):P==ee?Sc(_):sh(_,p(_))}}function ic(p,_,P,W,st,It,$t,ae){var be=_&F;if(!be&&typeof p!="function")throw new Ao(i);var Qe=W?W.length:0;if(Qe||(_&=~($|q),W=st=n),$t=$t===n?$t:or($r($t),0),ae=ae===n?ae:$r(ae),Qe-=st?st.length:0,_&q){var tn=W,ln=st;W=st=n}var jn=be?n:Kh(p),mr=[p,_,P,W,st,tn,ln,It,$t,ae];if(jn&&Na(mr,jn),p=mr[0],_=mr[1],P=mr[2],W=mr[3],st=mr[4],ae=mr[9]=mr[9]===n?be?0:p.length:or(mr[9]-Qe,0),!ae&&_&(B|U)&&(_&=~(B|U)),!_||_==z)var Rr=Eb(p,_,P);else _==B||_==U?Rr=jg(p,_,ae):(_==$||_==(z|$))&&!st.length?Rr=Sb(p,_,P,W):Rr=Jp.apply(n,mr);var di=jn?Gf:Yg;return g0(di(Rr,mr),p,_)}function Hg(p,_,P,W){return p===n||Ei(p,Ku[P])&&!tr.call(W,P)?_:p}function l0(p,_,P,W,st,It){return co(p)&&co(_)&&(It.set(_,p),xu(p,_,n,l0,It),It.delete(_)),p}function u0(p){return Vc(p)?n:p}function c0(p,_,P,W,st,It){var $t=P&L,ae=p.length,be=_.length;if(ae!=be&&!($t&&be>ae))return!1;var Qe=It.get(p),tn=It.get(_);if(Qe&&tn)return Qe==_&&tn==p;var ln=-1,jn=!0,mr=P&k?new M:n;for(It.set(p,_),It.set(_,p);++ln<ae;){var Rr=p[ln],di=_[ln];if(W)var Dr=$t?W(di,Rr,ln,_,p,It):W(Rr,di,ln,p,_,It);if(Dr!==n){if(Dr)continue;jn=!1;break}if(mr){if(!Vu(_,function(xi,Li){if(!Hu(mr,Li)&&(Rr===xi||st(Rr,xi,P,W,It)))return mr.push(Li)})){jn=!1;break}}else if(!(Rr===di||st(Rr,di,P,W,It))){jn=!1;break}}return It.delete(p),It.delete(_),jn}function Mb(p,_,P,W,st,It,$t){switch(P){case gn:if(p.byteLength!=_.byteLength||p.byteOffset!=_.byteOffset)return!1;p=p.buffer,_=_.buffer;case un:return!(p.byteLength!=_.byteLength||!It(new za(p),new za(_)));case ge:case ne:case Et:return Ei(+p,+_);case We:return p.name==_.name&&p.message==_.message;case Wt:case Dt:return p==_+"";case N:var ae=uh;case ee:var be=W&L;if(ae||(ae=ml),p.size!=_.size&&!be)return!1;var Qe=$t.get(p);if(Qe)return Qe==_;W|=k,$t.set(p,_);var tn=c0(ae(p),ae(_),W,st,It,$t);return $t.delete(p),tn;case ve:if(fh)return fh.call(p)==fh.call(_)}return!1}function Tb(p,_,P,W,st,It){var $t=P&L,ae=Gg(p),be=ae.length,Qe=Gg(_),tn=Qe.length;if(be!=tn&&!$t)return!1;for(var ln=be;ln--;){var jn=ae[ln];if(!($t?jn in _:tr.call(_,jn)))return!1}var mr=It.get(p),Rr=It.get(_);if(mr&&Rr)return mr==_&&Rr==p;var di=!0;It.set(p,_),It.set(_,p);for(var Dr=$t;++ln<be;){jn=ae[ln];var xi=p[jn],Li=_[jn];if(W)var Eu=$t?W(Li,xi,jn,_,p,It):W(xi,Li,jn,p,_,It);if(!(Eu===n?xi===Li||st(xi,Li,P,W,It):Eu)){di=!1;break}Dr||(Dr=jn=="constructor")}if(di&&!Dr){var wl=p.constructor,Su=_.constructor;wl!=Su&&"constructor"in p&&"constructor"in _&&!(typeof wl=="function"&&wl instanceof wl&&typeof Su=="function"&&Su instanceof Su)&&(di=!1)}return It.delete(p),It.delete(_),di}function oc(p){return ep(gs(p,n,w0),p+"")}function Gg(p){return ts(p,Ma,im)}function Wg(p){return ts(p,ma,h0)}var Kh=ra?function(p){return ra.get(p)}:fx;function tp(p){for(var _=p.name+"",P=Ba[_],W=tr.call(Ba,_)?P.length:0;W--;){var st=P[W],It=st.func;if(It==null||It==p)return st.name}return _}function qh(p){var _=tr.call(bt,"placeholder")?bt:p;return _.placeholder}function xr(){var p=bt.iteratee||cx;return p=p===cx?Fa:p,arguments.length?p(arguments[0],arguments[1]):p}function Ci(p,_){var P=p.__data__;return Db(_)?P[typeof _=="string"?"string":"hash"]:P.map}function rm(p){for(var _=Ma(p),P=_.length;P--;){var W=_[P],st=p[W];_[P]=[W,st,Yf(st)]}return _}function ks(p,_){var P=pl(p,_);return _u(P)?P:n}function qf(p){var _=tr.call(p,Co),P=p[Co];try{p[Co]=n;var W=!0}catch{}var st=Gs.call(p);return W&&(_?p[Co]=P:delete p[Co]),st}var im=Mc?function(p){return p==null?[]:(p=Dn(p),xa(Mc(p),function(_){return sn.call(p,_)}))}:dx,h0=Mc?function(p){for(var _=[];p;)Xa(_,im(p)),p=$o(p);return _}:dx,ps=Oi;(Ts&&ps(new Ts(new ArrayBuffer(1)))!=gn||Ko&&ps(new Ko)!=N||Tc&&ps(Tc.resolve())!=lt||Nn&&ps(new Nn)!=ee||Ln&&ps(new Ln)!=Ae)&&(ps=function(p){var _=Oi(p),P=_==ht?p.constructor:n,W=P?_h(P):"";if(W)switch(W){case pa:return gn;case jl:return N;case Gd:return lt;case Vf:return ee;case vi:return Ae}return _});function Pb(p,_,P){for(var W=-1,st=P.length;++W<st;){var It=P[W],$t=It.size;switch(It.type){case"drop":p+=$t;break;case"dropRight":_-=$t;break;case"take":_=lo(_,p+$t);break;case"takeRight":p=or(p,_-$t);break}}return{start:p,end:_}}function kb(p){var _=p.match(Ve);return _?_[1].split(Ke):[]}function f0(p,_,P){_=Rc(_,p);for(var W=-1,st=_.length,It=!1;++W<st;){var $t=Cu(_[W]);if(!(It=p!=null&&P(p,$t)))break;p=p[$t]}return It||++W!=st?It:(st=p==null?0:p.length,!!st&&Ql(st)&&Js($t,st)&&(yr(p)||vs(p)))}function Lb(p){var _=p.length,P=new p.constructor(_);return _&&typeof p[0]=="string"&&tr.call(p,"index")&&(P.index=p.index,P.input=p.input),P}function d0(p){return typeof p.constructor=="function"&&!Dc(p)?fs($o(p)):{}}function Ob(p,_,P){var W=p.constructor;switch(_){case un:return Zh(p);case ge:case ne:return new W(+p);case gn:return Cb(p,P);case re:case ce:case _e:case Ue:case en:case Un:case lr:case Gn:case zr:return Yp(p,P);case N:return new W;case Et:case Dt:return new W(p);case Wt:return Ng(p);case ee:return new W;case ve:return Ib(p)}}function Rb(p,_){var P=_.length;if(!P)return p;var W=P-1;return _[W]=(P>1?"& ":"")+_[W],_=_.join(P>2?", ":" "),p.replace(me,`{
/* [wrapped with `+_+`] */
`)}function om(p){return yr(p)||vs(p)||!!(Ul&&p&&p[Ul])}function Js(p,_){var P=typeof p;return _=_??ie,!!_&&(P=="number"||P!="symbol"&&bn.test(p))&&p>-1&&p%1==0&&p<_}function ms(p,_,P){if(!co(P))return!1;var W=typeof _;return(W=="number"?fi(P)&&Js(_,P.length):W=="string"&&_ in P)?Ei(P[_],p):!1}function Zg(p,_){if(yr(p))return!1;var P=typeof p;return P=="number"||P=="symbol"||P=="boolean"||p==null||ja(p)?!0:At.test(p)||!dt.test(p)||_!=null&&p in Dn(_)}function Db(p){var _=typeof p;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?p!=="__proto__":p===null}function $g(p){var _=tp(p),P=bt[_];if(typeof P!="function"||!(_ in Br.prototype))return!1;if(p===P)return!0;var W=Kh(P);return!!W&&p===W[0]}function p0(p){return!!Pi&&Pi in p}var am=hh?Xl:px;function Dc(p){var _=p&&p.constructor,P=typeof _=="function"&&_.prototype||Ku;return p===P}function Yf(p){return p===p&&!co(p)}function Ls(p,_){return function(P){return P==null?!1:P[p]===_&&(_!==n||p in Dn(P))}}function Xf(p){var _=Qi(p,function(W){return P.size===y&&P.clear(),W}),P=_.cache;return _}function Na(p,_){var P=p[1],W=_[1],st=P|W,It=st<(z|F|tt),$t=W==tt&&P==B||W==tt&&P==Y&&p[7].length<=_[8]||W==(tt|Y)&&_[7].length<=_[8]&&P==B;if(!(It||$t))return p;W&z&&(p[2]=_[2],st|=P&z?0:D);var ae=_[3];if(ae){var be=p[3];p[3]=be?t0(be,ae,_[4]):ae,p[4]=be?ha(p[3],x):_[4]}return ae=_[5],ae&&(be=p[5],p[5]=be?e0(be,ae,_[6]):ae,p[6]=be?ha(p[5],x):_[6]),ae=_[7],ae&&(p[7]=ae),W&tt&&(p[8]=p[8]==null?_[8]:lo(p[8],_[8])),p[9]==null&&(p[9]=_[9]),p[0]=_[0],p[1]=st,p}function sm(p){var _=[];if(p!=null)for(var P in Dn(p))_.push(P);return _}function lm(p){return Gs.call(p)}function gs(p,_,P){return _=or(_===n?p.length-1:_,0),function(){for(var W=arguments,st=-1,It=or(W.length-_,0),$t=Ie(It);++st<It;)$t[st]=W[_+st];st=-1;for(var ae=Ie(_+1);++st<_;)ae[st]=W[st];return ae[_]=P($t),To(p,this,ae)}}function Kg(p,_){return _.length<2?p:Bi(p,$l(_,0,-1))}function m0(p,_){for(var P=p.length,W=lo(_.length,P),st=Qs(p);W--;){var It=_[W];p[W]=Js(It,P)?st[It]:n}return p}function qg(p,_){if(!(_==="constructor"&&typeof p[_]=="function")&&_!="__proto__")return p[_]}var Yg=Xg(Gf),Yh=hs||function(p,_){return So.setTimeout(p,_)},ep=Xg(xb);function g0(p,_,P){var W=_+"";return ep(p,Rb(W,zb(kb(W),P)))}function Xg(p){var _=0,P=0;return function(){var W=Zs(),st=ot-(W-P);if(P=W,st>0){if(++_>=Q)return arguments[0]}else _=0;return p.apply(n,arguments)}}function zc(p,_){var P=-1,W=p.length,st=W-1;for(_=_===n?W:_;++P<_;){var It=Dg(P,st),$t=p[It];p[It]=p[P],p[P]=$t}return p.length=_,p}var um=Xf(function(p){var _=[];return p.charCodeAt(0)===46&&_.push(""),p.replace(Rt,function(P,W,st,It){_.push(st?It.replace(kn,"$1"):W||P)}),_});function Cu(p){if(typeof p=="string"||ja(p))return p;var _=p+"";return _=="0"&&1/p==-Tt?"-0":_}function _h(p){if(p!=null){try{return ci.call(p)}catch{}try{return p+""}catch{}}return""}function zb(p,_){return Fo(Fe,function(P){var W="_."+P[0];_&P[1]&&!Uu(p,W)&&p.push(W)}),p.sort()}function Qg(p){if(p instanceof Br)return p.clone();var _=new Ia(p.__wrapped__,p.__chain__);return _.__actions__=Qs(p.__actions__),_.__index__=p.__index__,_.__values__=p.__values__,_}function v0(p,_,P){(P?ms(p,_,P):_===n)?_=1:_=or($r(_),0);var W=p==null?0:p.length;if(!W||_<1)return[];for(var st=0,It=0,$t=Ie(Ws(W/_));st<W;)$t[It++]=$l(p,st,st+=_);return $t}function y0(p){for(var _=-1,P=p==null?0:p.length,W=0,st=[];++_<P;){var It=p[_];It&&(st[W++]=It)}return st}function _0(){var p=arguments.length;if(!p)return[];for(var _=Ie(p-1),P=arguments[0],W=p;W--;)_[W-1]=arguments[W];return Xa(yr(P)?Qs(P):[P],zn(_,1))}var Bb=oi(function(p,_){return Gi(p)?Cn(p,zn(_,1,Gi,!0)):[]}),Fb=oi(function(p,_){var P=ql(_);return Gi(P)&&(P=n),Gi(p)?Cn(p,zn(_,1,Gi,!0),xr(P,2)):[]}),b0=oi(function(p,_){var P=ql(_);return Gi(P)&&(P=n),Gi(p)?Cn(p,zn(_,1,Gi,!0),n,P):[]});function x0(p,_,P){var W=p==null?0:p.length;return W?(_=P||_===n?1:$r(_),$l(p,_<0?0:_,W)):[]}function cm(p,_,P){var W=p==null?0:p.length;return W?(_=P||_===n?1:$r(_),_=W-_,$l(p,0,_<0?0:_)):[]}function A0(p,_){return p&&p.length?Gh(p,xr(_,3),!0,!0):[]}function hm(p,_){return p&&p.length?Gh(p,xr(_,3),!0):[]}function fm(p,_,P,W){var st=p==null?0:p.length;return st?(P&&typeof P!="number"&&ms(p,_,P)&&(P=0,W=st),Ir(p,_,P,W)):[]}function np(p,_,P){var W=p==null?0:p.length;if(!W)return-1;var st=P==null?0:$r(P);return st<0&&(st=or(W+st,0)),Cc(p,xr(_,3),st)}function Xh(p,_,P){var W=p==null?0:p.length;if(!W)return-1;var st=W-1;return P!==n&&(st=$r(P),st=P<0?or(W+st,0):lo(st,W-1)),Cc(p,xr(_,3),st,!0)}function w0(p){var _=p==null?0:p.length;return _?zn(p,1):[]}function Nb(p){var _=p==null?0:p.length;return _?zn(p,Tt):[]}function Ub(p,_){var P=p==null?0:p.length;return P?(_=_===n?1:$r(_),zn(p,_)):[]}function Qf(p){for(var _=-1,P=p==null?0:p.length,W={};++_<P;){var st=p[_];W[st[0]]=st[1]}return W}function dm(p){return p&&p.length?p[0]:n}function C0(p,_,P){var W=p==null?0:p.length;if(!W)return-1;var st=P==null?0:$r(P);return st<0&&(st=or(W+st,0)),du(p,_,st)}function Jg(p){var _=p==null?0:p.length;return _?$l(p,0,-1):[]}var I0=oi(function(p){var _=eo(p,Wh);return _.length&&_[0]===p[0]?kc(_):[]}),E0=oi(function(p){var _=ql(p),P=eo(p,Wh);return _===ql(P)?_=n:P.pop(),P.length&&P[0]===p[0]?kc(P,xr(_,2)):[]}),Vb=oi(function(p){var _=ql(p),P=eo(p,Wh);return _=typeof _=="function"?_:n,_&&P.pop(),P.length&&P[0]===p[0]?kc(P,n,_):[]});function jb(p,_){return p==null?"":vl.call(p,_)}function ql(p){var _=p==null?0:p.length;return _?p[_-1]:n}function pm(p,_,P){var W=p==null?0:p.length;if(!W)return-1;var st=W;return P!==n&&(st=$r(P),st=st<0?or(W+st,0):lo(st,W-1)),_===_?Nl(p,_,st):Cc(p,fl,st,!0)}function tv(p,_){return p&&p.length?Gp(p,$r(_)):n}var Hb=oi(Qh);function Qh(p,_){return p&&p.length&&_&&_.length?Rg(p,_):p}function rp(p,_,P){return p&&p.length&&_&&_.length?Rg(p,_,xr(P,2)):p}function Ii(p,_,P){return p&&p.length&&_&&_.length?Rg(p,_,n,P):p}var Gb=oc(function(p,_){var P=p==null?0:p.length,W=rn(p,_);return Yy(p,eo(_,function(st){return Js(st,P)?+st:st}).sort(Xp)),W});function ev(p,_){var P=[];if(!(p&&p.length))return P;var W=-1,st=[],It=p.length;for(_=xr(_,3);++W<It;){var $t=p[W];_($t,W,p)&&(P.push($t),st.push(W))}return Yy(p,st),P}function bh(p){return p==null?p:Yu.call(p)}function Wb(p,_,P){var W=p==null?0:p.length;return W?(P&&typeof P!="number"&&ms(p,_,P)?(_=0,P=W):(_=_==null?0:$r(_),P=P===n?W:$r(P)),$l(p,_,P)):[]}function Zb(p,_){return Zp(p,_)}function $b(p,_,P){return zg(p,_,xr(P,2))}function Kb(p,_){var P=p==null?0:p.length;if(P){var W=Zp(p,_);if(W<P&&Ei(p[W],_))return W}return-1}function qb(p,_){return Zp(p,_,!0)}function Yb(p,_,P){return zg(p,_,xr(P,2),!0)}function Xb(p,_){var P=p==null?0:p.length;if(P){var W=Zp(p,_,!0)-1;if(Ei(p[W],_))return W}return-1}function S0(p){return p&&p.length?Qy(p):[]}function M0(p,_){return p&&p.length?Qy(p,xr(_,2)):[]}function T0(p){var _=p==null?0:p.length;return _?$l(p,1,_):[]}function P0(p,_,P){return p&&p.length?(_=P||_===n?1:$r(_),$l(p,0,_<0?0:_)):[]}function mm(p,_,P){var W=p==null?0:p.length;return W?(_=P||_===n?1:$r(_),_=W-_,$l(p,_<0?0:_,W)):[]}function Jh(p,_){return p&&p.length?Gh(p,xr(_,3),!1,!0):[]}function nv(p,_){return p&&p.length?Gh(p,xr(_,3)):[]}var Jf=oi(function(p){return xl(zn(p,1,Gi,!0))}),k0=oi(function(p){var _=ql(p);return Gi(_)&&(_=n),xl(zn(p,1,Gi,!0),xr(_,2))}),Uo=oi(function(p){var _=ql(p);return _=typeof _=="function"?_:n,xl(zn(p,1,Gi,!0),n,_)});function Yi(p){return p&&p.length?xl(p):[]}function L0(p,_){return p&&p.length?xl(p,xr(_,2)):[]}function O0(p,_){return _=typeof _=="function"?_:n,p&&p.length?xl(p,n,_):[]}function gm(p){if(!(p&&p.length))return[];var _=0;return p=xa(p,function(P){if(Gi(P))return _=or(P.length,_),!0}),ju(_,function(P){return eo(p,Aa(P))})}function rv(p,_){if(!(p&&p.length))return[];var P=gm(p);return _==null?P:eo(P,function(W){return To(_,n,W)})}var R0=oi(function(p,_){return Gi(p)?Cn(p,_):[]}),iv=oi(function(p){return Wf(xa(p,Gi))}),tf=oi(function(p){var _=ql(p);return Gi(_)&&(_=n),Wf(xa(p,Gi),xr(_,2))}),ef=oi(function(p){var _=ql(p);return _=typeof _=="function"?_:n,Wf(xa(p,Gi),n,_)}),D0=oi(gm);function Vo(p,_){return Yd(p||[],_||[],de)}function ip(p,_){return Yd(p||[],_||[],Zl)}var Bc=oi(function(p){var _=p.length,P=_>1?p[_-1]:n;return P=typeof P=="function"?(p.pop(),P):n,rv(p,P)});function op(p){var _=bt(p);return _.__chain__=!0,_}function vm(p,_){return _(p),p}function td(p,_){return _(p)}var ed=oc(function(p){var _=p.length,P=_?p[0]:0,W=this.__wrapped__,st=function(It){return rn(It,p)};return _>1||this.__actions__.length||!(W instanceof Br)||!Js(P)?this.thru(st):(W=W.slice(P,+P+(_?1:0)),W.__actions__.push({func:td,args:[st],thisArg:n}),new Ia(W,this.__chain__).thru(function(It){return _&&!It.length&&It.push(n),It}))});function Fc(){return op(this)}function z0(){return new Ia(this.value(),this.__chain__)}function B0(){this.__values__===n&&(this.__values__=wm(this.value()));var p=this.__index__>=this.__values__.length,_=p?n:this.__values__[this.__index__++];return{done:p,value:_}}function Qb(){return this}function ia(p){for(var _,P=this;P instanceof Ca;){var W=Qg(P);W.__index__=0,W.__values__=n,_?st.__wrapped__=W:_=W;var st=W;P=P.__wrapped__}return st.__wrapped__=p,_}function xh(){var p=this.__wrapped__;if(p instanceof Br){var _=p;return this.__actions__.length&&(_=new Br(this)),_=_.reverse(),_.__actions__.push({func:td,args:[bh],thisArg:n}),new Ia(_,this.__chain__)}return this.thru(bh)}function F0(){return Fg(this.__wrapped__,this.__actions__)}var r=Qp(function(p,_,P){tr.call(p,P)?++p[P]:Xe(p,P,1)});function o(p,_,P){var W=yr(p)?hl:dr;return P&&ms(p,_,P)&&(_=n),W(p,xr(_,3))}function u(p,_){var P=yr(p)?xa:cr;return P(p,xr(_,3))}var g=Kf(np),b=Kf(Xh);function C(p,_){return zn(St(p,_),1)}function S(p,_){return zn(St(p,_),Tt)}function R(p,_,P){return P=P===n?1:$r(P),zn(St(p,_),P)}function j(p,_){var P=yr(p)?Fo:er;return P(p,xr(_,3))}function K(p,_){var P=yr(p)?Ol:Cr;return P(p,xr(_,3))}var J=Qp(function(p,_,P){tr.call(p,P)?p[P].push(_):Xe(p,P,[_])});function nt(p,_,P,W){p=fi(p)?p:uf(p),P=P&&!W?$r(P):0;var st=p.length;return P<0&&(P=or(st+P,0)),af(p)?P<=st&&p.indexOf(_,P)>-1:!!st&&du(p,_,P)>-1}var ct=oi(function(p,_,P){var W=-1,st=typeof _=="function",It=fi(p)?Ie(p.length):[];return er(p,function($t){It[++W]=st?To(_,$t,P):Xs($t,_,P)}),It}),mt=Qp(function(p,_,P){Xe(p,P,_)});function St(p,_){var P=yr(p)?eo:Hp;return P(p,xr(_,3))}function Ot(p,_,P,W){return p==null?[]:(yr(_)||(_=_==null?[]:[_]),P=W?n:P,yr(P)||(P=P==null?[]:[P]),yh(p,_,P))}var Zt=Qp(function(p,_,P){p[P?0:1].push(_)},function(){return[[],[]]});function Vt(p,_,P){var W=yr(p)?Rl:dl,st=arguments.length<3;return W(p,xr(_,4),P,st,er)}function se(p,_,P){var W=yr(p)?oh:dl,st=arguments.length<3;return W(p,xr(_,4),P,st,Cr)}function ye(p,_){var P=yr(p)?xa:cr;return P(p,ji(xr(_,3)))}function Ee(p){var _=yr(p)?Ht:Wp;return _(p)}function Pe(p,_,P){(P?ms(p,_,P):_===n)?_=1:_=$r(_);var W=yr(p)?Mt:Xy;return W(p,_)}function Ne(p){var _=yr(p)?Gt:Ab;return _(p)}function Je(p){if(p==null)return 0;if(fi(p))return af(p)?mu(p):p.length;var _=ps(p);return _==N||_==ee?p.size:bu(p).length}function cn(p,_,P){var W=yr(p)?Vu:wb;return P&&ms(p,_,P)&&(_=n),W(p,xr(_,3))}var Vn=oi(function(p,_){if(p==null)return[];var P=_.length;return P>1&&ms(p,_[0],_[1])?_=[]:P>2&&ms(_[0],_[1],_[2])&&(_=[_[0]]),yh(p,zn(_,1),[])}),_n=Nf||function(){return So.Date.now()};function $n(p,_){if(typeof _!="function")throw new Ao(i);return p=$r(p),function(){if(--p<1)return _.apply(this,arguments)}}function wn(p,_,P){return _=P?n:_,_=p&&_==null?p.length:_,ic(p,tt,n,n,n,n,_)}function Sr(p,_){var P;if(typeof _!="function")throw new Ao(i);return p=$r(p),function(){return--p>0&&(P=_.apply(this,arguments)),p<=1&&(_=n),P}}var ar=oi(function(p,_,P){var W=z;if(P.length){var st=ha(P,qh(ar));W|=$}return ic(p,W,_,P,st)}),Rn=oi(function(p,_,P){var W=z|F;if(P.length){var st=ha(P,qh(Rn));W|=$}return ic(_,W,p,P,st)});function Or(p,_,P){_=P?n:_;var W=ic(p,B,n,n,n,n,n,_);return W.placeholder=Or.placeholder,W}function Ar(p,_,P){_=P?n:_;var W=ic(p,U,n,n,n,n,n,_);return W.placeholder=Ar.placeholder,W}function Zr(p,_,P){var W,st,It,$t,ae,be,Qe=0,tn=!1,ln=!1,jn=!0;if(typeof p!="function")throw new Ao(i);_=ys(_)||0,co(P)&&(tn=!!P.leading,ln="maxWait"in P,It=ln?or(ys(P.maxWait)||0,_):It,jn="trailing"in P?!!P.trailing:jn);function mr(Ta){var Hc=W,cf=st;return W=st=n,Qe=Ta,$t=p.apply(cf,Hc),$t}function Rr(Ta){return Qe=Ta,ae=Yh(xi,_),tn?mr(Ta):$t}function di(Ta){var Hc=Ta-be,cf=Ta-Qe,M2=_-Hc;return ln?lo(M2,It-cf):M2}function Dr(Ta){var Hc=Ta-be,cf=Ta-Qe;return be===n||Hc>=_||Hc<0||ln&&cf>=It}function xi(){var Ta=_n();if(Dr(Ta))return Li(Ta);ae=Yh(xi,di(Ta))}function Li(Ta){return ae=n,jn&&W?mr(Ta):(W=st=n,$t)}function Eu(){ae!==n&&qp(ae),Qe=0,W=be=st=ae=n}function wl(){return ae===n?$t:Li(_n())}function Su(){var Ta=_n(),Hc=Dr(Ta);if(W=arguments,st=this,be=Ta,Hc){if(ae===n)return Rr(be);if(ln)return qp(ae),ae=Yh(xi,_),mr(be)}return ae===n&&(ae=Yh(xi,_)),$t}return Su.cancel=Eu,Su.flush=wl,Su}var qn=oi(function(p,_){return Xr(p,1,_)}),ai=oi(function(p,_,P){return Xr(p,ys(_)||0,P)});function Xi(p){return ic(p,G)}function Qi(p,_){if(typeof p!="function"||_!=null&&typeof _!="function")throw new Ao(i);var P=function(){var W=arguments,st=_?_.apply(this,W):W[0],It=P.cache;if(It.has(st))return It.get(st);var $t=p.apply(this,W);return P.cache=It.set(st,$t)||It,$t};return P.cache=new(Qi.Cache||qs),P}Qi.Cache=qs;function ji(p){if(typeof p!="function")throw new Ao(i);return function(){var _=arguments;switch(_.length){case 0:return!p.call(this);case 1:return!p.call(this,_[0]);case 2:return!p.call(this,_[0],_[1]);case 3:return!p.call(this,_[0],_[1],_[2])}return!p.apply(this,_)}}function Ji(p){return Sr(2,p)}var go=Xd(function(p,_){_=_.length==1&&yr(_[0])?eo(_[0],wa(xr())):eo(zn(_,1),wa(xr()));var P=_.length;return oi(function(W){for(var st=-1,It=lo(W.length,P);++st<It;)W[st]=_[st].call(this,W[st]);return To(p,this,W)})}),Ro=oi(function(p,_){var P=ha(_,qh(Ro));return ic(p,$,n,_,P)}),jo=oi(function(p,_){var P=ha(_,qh(jo));return ic(p,q,n,_,P)}),Ua=oc(function(p,_){return ic(p,Y,n,n,n,_)});function oa(p,_){if(typeof p!="function")throw new Ao(i);return _=_===n?_:$r(_),oi(p,_)}function Va(p,_){if(typeof p!="function")throw new Ao(i);return _=_==null?0:or($r(_),0),oi(function(P){var W=P[_],st=nc(P,0,_);return W&&Xa(st,W),To(p,this,st)})}function Io(p,_,P){var W=!0,st=!0;if(typeof p!="function")throw new Ao(i);return co(P)&&(W="leading"in P?!!P.leading:W,st="trailing"in P?!!P.trailing:st),Zr(p,_,{leading:W,maxWait:_,trailing:st})}function aa(p){return wn(p,1)}function Hr(p,_){return Ro(Kp(_),p)}function ki(){if(!arguments.length)return[];var p=arguments[0];return yr(p)?p:[p]}function bi(p){return On(p,E)}function Jr(p,_){return _=typeof _=="function"?_:n,On(p,E,_)}function rs(p){return On(p,A|E)}function Ea(p,_){return _=typeof _=="function"?_:n,On(p,A|E,_)}function Hi(p,_){return _==null||Kn(p,_,Ma(_))}function Ei(p,_){return p===_||p!==p&&_!==_}var Sa=em(Hl),si=em(function(p,_){return p>=_}),vs=Lc(function(){return arguments}())?Lc:function(p){return ho(p)&&tr.call(p,"callee")&&!sn.call(p,"callee")},yr=Ie.isArray,ac=wc?wa(wc):Hh;function fi(p){return p!=null&&Ql(p.length)&&!Xl(p)}function Gi(p){return ho(p)&&fi(p)}function Yl(p){return p===!0||p===!1||ho(p)&&Oi(p)==ge}var Al=Hd||px,nf=Mo?wa(Mo):Gl;function nd(p){return ho(p)&&p.nodeType===1&&!Vc(p)}function Nc(p){if(p==null)return!0;if(fi(p)&&(yr(p)||typeof p=="string"||typeof p.splice=="function"||Al(p)||sc(p)||vs(p)))return!p.length;var _=ps(p);if(_==N||_==ee)return!p.size;if(Dc(p))return!bu(p).length;for(var P in p)if(tr.call(p,P))return!1;return!0}function rd(p,_){return yu(p,_)}function ym(p,_,P){P=typeof P=="function"?P:n;var W=P?P(p,_):n;return W===n?yu(p,_,n,P):!!W}function Ah(p){if(!ho(p))return!1;var _=Oi(p);return _==We||_==Se||typeof p.message=="string"&&typeof p.name=="string"&&!Vc(p)}function ap(p){return typeof p=="number"&&Uf(p)}function Xl(p){if(!co(p))return!1;var _=Oi(p);return _==In||_==_t||_==fe||_==Pt}function sp(p){return typeof p=="number"&&p==$r(p)}function Ql(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=ie}function co(p){var _=typeof p;return p!=null&&(_=="object"||_=="function")}function ho(p){return p!=null&&typeof p=="object"}var Uc=Ya?wa(Ya):qo;function id(p,_){return p===_||_l(p,_,rm(_))}function _m(p,_,P){return P=typeof P=="function"?P:n,_l(p,_,rm(_),P)}function bm(p){return od(p)&&p!=+p}function lp(p){if(am(p))throw new fr(l);return _u(p)}function up(p){return p===null}function xm(p){return p==null}function od(p){return typeof p=="number"||ho(p)&&Oi(p)==Et}function Vc(p){if(!ho(p)||Oi(p)!=ht)return!1;var _=$o(p);if(_===null)return!0;var P=tr.call(_,"constructor")&&_.constructor;return typeof P=="function"&&P instanceof P&&ci.call(P)==Ja}var rf=Vs?wa(Vs):Oc;function Am(p){return sp(p)&&p>=-ie&&p<=ie}var of=js?wa(js):hi;function af(p){return typeof p=="string"||!yr(p)&&ho(p)&&Oi(p)==Dt}function ja(p){return typeof p=="symbol"||ho(p)&&Oi(p)==ve}var sc=Ll?wa(Ll):Ps;function sf(p){return p===n}function cp(p){return ho(p)&&ps(p)==Ae}function ad(p){return ho(p)&&Oi(p)==De}var ov=em(gh),N0=em(function(p,_){return p<=_});function wm(p){if(!p)return[];if(fi(p))return af(p)?Ra(p):Qs(p);if(Vl&&p[Vl])return Nh(p[Vl]());var _=ps(p),P=_==N?uh:_==ee?ml:uf;return P(p)}function lc(p){if(!p)return p===0?p:0;if(p=ys(p),p===Tt||p===-Tt){var _=p<0?-1:1;return _*ue}return p===p?p:0}function $r(p){var _=lc(p),P=_%1;return _===_?P?_-P:_:0}function U0(p){return p?yn($r(p),0,jt):0}function ys(p){if(typeof p=="number")return p;if(ja(p))return je;if(co(p)){var _=typeof p.valueOf=="function"?p.valueOf():p;p=co(_)?_+"":_}if(typeof p!="string")return p===0?p:+p;p=Es(p);var P=dn.test(p);return P||Er.test(p)?zh(p.slice(2),P?2:8):an.test(p)?je:+p}function vo(p){return rc(p,ma(p))}function Iu(p){return p?yn($r(p),-ie,ie):p===0?p:0}function Wi(p){return p==null?"":bl(p)}var wh=$f(function(p,_){if(Dc(_)||fi(_)){rc(_,Ma(_),p);return}for(var P in _)tr.call(_,P)&&de(p,P,_[P])}),Cm=$f(function(p,_){rc(_,ma(_),p)}),hp=$f(function(p,_,P,W){rc(_,ma(_),p,W)}),Im=$f(function(p,_,P,W){rc(_,Ma(_),p,W)}),uc=oc(rn);function Em(p,_){var P=fs(p);return _==null?P:Oe(P,_)}var fp=oi(function(p,_){p=Dn(p);var P=-1,W=_.length,st=W>2?_[2]:n;for(st&&ms(_[0],_[1],st)&&(W=1);++P<W;)for(var It=_[P],$t=ma(It),ae=-1,be=$t.length;++ae<be;){var Qe=$t[ae],tn=p[Qe];(tn===n||Ei(tn,Ku[Qe])&&!tr.call(p,Qe))&&(p[Qe]=It[Qe])}return p}),Sm=oi(function(p){return p.push(n,l0),To(lf,n,p)});function Mm(p,_){return zl(p,xr(_,3),no)}function av(p,_){return zl(p,xr(_,3),No)}function V0(p,_){return p==null?p:Lo(p,xr(_,3),ma)}function dp(p,_){return p==null?p:uo(p,xr(_,3),ma)}function j0(p,_){return p&&no(p,xr(_,3))}function H0(p,_){return p&&No(p,xr(_,3))}function G0(p){return p==null?[]:Vi(p,Ma(p))}function W0(p){return p==null?[]:Vi(p,ma(p))}function Tm(p,_,P){var W=p==null?n:Bi(p,_);return W===n?P:W}function tl(p,_){return p!=null&&f0(p,_,es)}function sd(p,_){return p!=null&&f0(p,_,yl)}var Z0=i0(function(p,_,P){_!=null&&typeof _.toString!="function"&&(_=Gs.call(_)),p[_]=P},ux(Jl)),cc=i0(function(p,_,P){_!=null&&typeof _.toString!="function"&&(_=Gs.call(_)),tr.call(p,_)?p[_].push(P):p[_]=[P]},xr),Jb=oi(Xs);function Ma(p){return fi(p)?Lt(p):bu(p)}function ma(p){return fi(p)?Lt(p,!0):Og(p)}function ld(p,_){var P={};return _=xr(_,3),no(p,function(W,st,It){Xe(P,_(W,st,It),W)}),P}function ud(p,_){var P={};return _=xr(_,3),no(p,function(W,st,It){Xe(P,st,_(W,st,It))}),P}var cd=$f(function(p,_,P){xu(p,_,P)}),lf=$f(function(p,_,P,W){xu(p,_,P,W)}),$0=oc(function(p,_){var P={};if(p==null)return P;var W=!1;_=eo(_,function(It){return It=Rc(It,p),W||(W=It.length>1),It}),rc(p,Wg(p),P),W&&(P=On(P,A|w|E,u0));for(var st=_.length;st--;)Bg(P,_[st]);return P});function K0(p,_){return sv(p,ji(xr(_)))}var q0=oc(function(p,_){return p==null?{}:ds(p,_)});function sv(p,_){if(p==null)return{};var P=eo(Wg(p),function(W){return[W]});return _=xr(_),Ky(p,P,function(W,st){return _(W,st[0])})}function lv(p,_,P){_=Rc(_,p);var W=-1,st=_.length;for(st||(st=1,p=n);++W<st;){var It=p==null?n:p[Cu(_[W])];It===n&&(W=st,It=P),p=Xl(It)?It.call(p):It}return p}function uv(p,_,P){return p==null?p:Zl(p,_,P)}function jc(p,_,P,W){return W=typeof W=="function"?W:n,p==null?p:Zl(p,_,P,W)}var cv=s0(Ma),Pm=s0(ma);function hv(p,_,P){var W=yr(p),st=W||Al(p)||sc(p);if(_=xr(_,4),P==null){var It=p&&p.constructor;st?P=W?new It:[]:co(p)?P=Xl(It)?fs($o(p)):{}:P={}}return(st?Fo:no)(p,function($t,ae,be){return _(P,$t,ae,be)}),P}function Y0(p,_){return p==null?!0:Bg(p,_)}function fv(p,_,P){return p==null?p:Oo(p,_,Kp(P))}function X0(p,_,P,W){return W=typeof W=="function"?W:n,p==null?p:Oo(p,_,Kp(P),W)}function uf(p){return p==null?[]:lh(p,Ma(p))}function dv(p){return p==null?[]:lh(p,ma(p))}function Q0(p,_,P){return P===n&&(P=_,_=n),P!==n&&(P=ys(P),P=P===P?P:0),_!==n&&(_=ys(_),_=_===_?_:0),yn(ys(p),_,P)}function pp(p,_,P){return _=lc(_),P===n?(P=_,_=0):P=lc(P),p=ys(p),Ys(p,_,P)}function J0(p,_,P){if(P&&typeof P!="boolean"&&ms(p,_,P)&&(_=P=n),P===n&&(typeof _=="boolean"?(P=_,_=n):typeof p=="boolean"&&(P=p,p=n)),p===n&&_===n?(p=0,_=1):(p=lc(p),_===n?(_=p,p=0):_=lc(_)),p>_){var W=p;p=_,_=W}if(P||p%1||_%1){var st=qu();return lo(p+st*(_-p+zf("1e-"+((st+"").length-1))),_)}return Dg(p,_)}var km=wu(function(p,_,P){return _=_.toLowerCase(),p+(P?t1(_):_)});function t1(p){return lx(Wi(p).toLowerCase())}function pv(p){return p=Wi(p),p&&p.replace(jr,pu).replace(xo,"")}function tx(p,_,P){p=Wi(p),_=bl(_);var W=p.length;P=P===n?W:yn($r(P),0,W);var st=P;return P-=_.length,P>=0&&p.slice(P,st)==_}function ex(p){return p=Wi(p),p&&Ns.test(p)?p.replace(rr,Hs):p}function nx(p){return p=Wi(p),p&&te.test(p)?p.replace(qt,"\\$&"):p}var rx=wu(function(p,_,P){return p+(P?"-":"")+_.toLowerCase()}),ix=wu(function(p,_,P){return p+(P?" ":"")+_.toLowerCase()}),ox=r0("toLowerCase");function ax(p,_,P){p=Wi(p),_=$r(_);var W=_?mu(p):0;if(!_||W>=_)return p;var st=(_-W)/2;return Jd(Uh(st),P)+p+Jd(Ws(st),P)}function sx(p,_,P){p=Wi(p),_=$r(_);var W=_?mu(p):0;return _&&W<_?p+Jd(_-W,P):p}function hc(p,_,P){p=Wi(p),_=$r(_);var W=_?mu(p):0;return _&&W<_?Jd(_-W,P)+p:p}function Lm(p,_,P){return P||_==null?_=0:_&&(_=+_),da(Wi(p).replace(gt,""),_||0)}function e1(p,_,P){return(P?ms(p,_,P):_===n)?_=1:_=$r(_),qd(Wi(p),_)}function mp(){var p=arguments,_=Wi(p[0]);return p.length<3?_:_.replace(p[1],p[2])}var n1=wu(function(p,_,P){return p+(P?"_":"")+_.toLowerCase()});function U3(p,_,P){return P&&typeof P!="number"&&ms(p,_,P)&&(_=P=n),P=P===n?jt:P>>>0,P?(p=Wi(p),p&&(typeof _=="string"||_!=null&&!rf(_))&&(_=bl(_),!_&&Ss(p))?nc(Ra(p),0,P):p.split(_,P)):[]}var V3=wu(function(p,_,P){return p+(P?" ":"")+lx(_)});function j3(p,_,P){return p=Wi(p),P=P==null?0:yn($r(P),0,p.length),_=bl(_),p.slice(P,P+_.length)==_}function H3(p,_,P){var W=bt.templateSettings;P&&ms(p,_,P)&&(_=n),p=Wi(p),_=hp({},_,W,Hg);var st=hp({},_.imports,W.imports,Hg),It=Ma(st),$t=lh(st,It),ae,be,Qe=0,tn=_.interpolate||ei,ln="__p += '",jn=ri((_.escape||ei).source+"|"+tn.source+"|"+(tn===ut?Tn:ei).source+"|"+(_.evaluate||ei).source+"|$","g"),mr="//# sourceURL="+(tr.call(_,"sourceURL")?(_.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++kl+"]")+`
`;p.replace(jn,function(Dr,xi,Li,Eu,wl,Su){return Li||(Li=Eu),ln+=p.slice(Qe,Su).replace(Lr,Wu),xi&&(ae=!0,ln+=`' +
__e(`+xi+`) +
'`),wl&&(be=!0,ln+=`';
`+wl+`;
__p += '`),Li&&(ln+=`' +
((__t = (`+Li+`)) == null ? '' : __t) +
'`),Qe=Su+Dr.length,Dr}),ln+=`';
`;var Rr=tr.call(_,"variable")&&_.variable;if(!Rr)ln=`with (obj) {
`+ln+`
}
`;else if(Ge.test(Rr))throw new fr(f);ln=(be?ln.replace(ur,""):ln).replace(Fn,"$1").replace(Jn,"$1;"),ln="function("+(Rr||"obj")+`) {
`+(Rr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ae?", __e = _.escape":"")+(be?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ln+`return __p
}`;var di=E2(function(){return kr(It,mr+"return "+ln).apply(n,$t)});if(di.source=ln,Ah(di))throw di;return di}function G3(p){return Wi(p).toLowerCase()}function W3(p){return Wi(p).toUpperCase()}function Z3(p,_,P){if(p=Wi(p),p&&(P||_===n))return Es(p);if(!p||!(_=bl(_)))return p;var W=Ra(p),st=Ra(_),It=Ec(W,st),$t=Fl(W,st)+1;return nc(W,It,$t).join("")}function $3(p,_,P){if(p=Wi(p),p&&(P||_===n))return p.slice(0,pe(p)+1);if(!p||!(_=bl(_)))return p;var W=Ra(p),st=Fl(W,Ra(_))+1;return nc(W,0,st).join("")}function K3(p,_,P){if(p=Wi(p),p&&(P||_===n))return p.replace(gt,"");if(!p||!(_=bl(_)))return p;var W=Ra(p),st=Ec(W,Ra(_));return nc(W,st).join("")}function q3(p,_){var P=rt,W=pt;if(co(_)){var st="separator"in _?_.separator:st;P="length"in _?$r(_.length):P,W="omission"in _?bl(_.omission):W}p=Wi(p);var It=p.length;if(Ss(p)){var $t=Ra(p);It=$t.length}if(P>=It)return p;var ae=P-mu(W);if(ae<1)return W;var be=$t?nc($t,0,ae).join(""):p.slice(0,ae);if(st===n)return be+W;if($t&&(ae+=be.length-ae),rf(st)){if(p.slice(ae).search(st)){var Qe,tn=be;for(st.global||(st=ri(st.source,Wi(Re.exec(st))+"g")),st.lastIndex=0;Qe=st.exec(tn);)var ln=Qe.index;be=be.slice(0,ln===n?ae:ln)}}else if(p.indexOf(bl(st),ae)!=ae){var jn=be.lastIndexOf(st);jn>-1&&(be=be.slice(0,jn))}return be+W}function Y3(p){return p=Wi(p),p&&Mi.test(p)?p.replace(gr,ze):p}var X3=wu(function(p,_,P){return p+(P?" ":"")+_.toUpperCase()}),lx=r0("toUpperCase");function I2(p,_,P){return p=Wi(p),_=P?n:_,_===n?na(p)?zi(p):Dl(p):p.match(_)||[]}var E2=oi(function(p,_){try{return To(p,n,_)}catch(P){return Ah(P)?P:new fr(P)}}),Q3=oc(function(p,_){return Fo(_,function(P){P=Cu(P),Xe(p,P,ar(p[P],p))}),p});function J3(p){var _=p==null?0:p.length,P=xr();return p=_?eo(p,function(W){if(typeof W[1]!="function")throw new Ao(i);return[P(W[0]),W[1]]}):[],oi(function(W){for(var st=-1;++st<_;){var It=p[st];if(To(It[0],this,W))return To(It[1],this,W)}})}function t5(p){return Xn(On(p,A))}function ux(p){return function(){return p}}function e5(p,_){return p==null||p!==p?_:p}var n5=Kl(),r5=Kl(!0);function Jl(p){return p}function cx(p){return Fa(typeof p=="function"?p:On(p,A))}function i5(p){return vh(On(p,A))}function o5(p,_){return Kd(p,On(_,A))}var a5=oi(function(p,_){return function(P){return Xs(P,p,_)}}),s5=oi(function(p,_){return function(P){return Xs(p,P,_)}});function hx(p,_,P){var W=Ma(_),st=Vi(_,W);P==null&&!(co(_)&&(st.length||!W.length))&&(P=_,_=p,p=this,st=Vi(_,Ma(_)));var It=!(co(P)&&"chain"in P)||!!P.chain,$t=Xl(p);return Fo(st,function(ae){var be=_[ae];p[ae]=be,$t&&(p.prototype[ae]=function(){var Qe=this.__chain__;if(It||Qe){var tn=p(this.__wrapped__),ln=tn.__actions__=Qs(this.__actions__);return ln.push({func:be,args:arguments,thisArg:p}),tn.__chain__=Qe,tn}return be.apply(p,Xa([this.value()],arguments))})}),p}function l5(){return So._===this&&(So._=wi),this}function fx(){}function u5(p){return p=$r(p),oi(function(_){return Gp(_,p)})}var c5=$h(eo),h5=$h(hl),f5=$h(Vu);function S2(p){return Zg(p)?Aa(Cu(p)):qy(p)}function d5(p){return function(_){return p==null?n:Bi(p,_)}}var p5=o0(),m5=o0(!0);function dx(){return[]}function px(){return!1}function g5(){return{}}function v5(){return""}function y5(){return!0}function _5(p,_){if(p=$r(p),p<1||p>ie)return[];var P=jt,W=lo(p,jt);_=xr(_),p-=jt;for(var st=ju(W,_);++P<p;)_(P);return st}function b5(p){return yr(p)?eo(p,Cu):ja(p)?[p]:Qs(um(Wi(p)))}function x5(p){var _=++cs;return Wi(p)+_}var A5=tm(function(p,_){return p+_},0),w5=nm("ceil"),C5=tm(function(p,_){return p/_},1),I5=nm("floor");function E5(p){return p&&p.length?sr(p,Jl,Hl):n}function S5(p,_){return p&&p.length?sr(p,xr(_,2),Hl):n}function M5(p){return Ic(p,Jl)}function T5(p,_){return Ic(p,xr(_,2))}function P5(p){return p&&p.length?sr(p,Jl,gh):n}function k5(p,_){return p&&p.length?sr(p,xr(_,2),gh):n}var L5=tm(function(p,_){return p*_},1),O5=nm("round"),R5=tm(function(p,_){return p-_},0);function D5(p){return p&&p.length?qr(p,Jl):0}function z5(p,_){return p&&p.length?qr(p,xr(_,2)):0}return bt.after=$n,bt.ary=wn,bt.assign=wh,bt.assignIn=Cm,bt.assignInWith=hp,bt.assignWith=Im,bt.at=uc,bt.before=Sr,bt.bind=ar,bt.bindAll=Q3,bt.bindKey=Rn,bt.castArray=ki,bt.chain=op,bt.chunk=v0,bt.compact=y0,bt.concat=_0,bt.cond=J3,bt.conforms=t5,bt.constant=ux,bt.countBy=r,bt.create=Em,bt.curry=Or,bt.curryRight=Ar,bt.debounce=Zr,bt.defaults=fp,bt.defaultsDeep=Sm,bt.defer=qn,bt.delay=ai,bt.difference=Bb,bt.differenceBy=Fb,bt.differenceWith=b0,bt.drop=x0,bt.dropRight=cm,bt.dropRightWhile=A0,bt.dropWhile=hm,bt.fill=fm,bt.filter=u,bt.flatMap=C,bt.flatMapDeep=S,bt.flatMapDepth=R,bt.flatten=w0,bt.flattenDeep=Nb,bt.flattenDepth=Ub,bt.flip=Xi,bt.flow=n5,bt.flowRight=r5,bt.fromPairs=Qf,bt.functions=G0,bt.functionsIn=W0,bt.groupBy=J,bt.initial=Jg,bt.intersection=I0,bt.intersectionBy=E0,bt.intersectionWith=Vb,bt.invert=Z0,bt.invertBy=cc,bt.invokeMap=ct,bt.iteratee=cx,bt.keyBy=mt,bt.keys=Ma,bt.keysIn=ma,bt.map=St,bt.mapKeys=ld,bt.mapValues=ud,bt.matches=i5,bt.matchesProperty=o5,bt.memoize=Qi,bt.merge=cd,bt.mergeWith=lf,bt.method=a5,bt.methodOf=s5,bt.mixin=hx,bt.negate=ji,bt.nthArg=u5,bt.omit=$0,bt.omitBy=K0,bt.once=Ji,bt.orderBy=Ot,bt.over=c5,bt.overArgs=go,bt.overEvery=h5,bt.overSome=f5,bt.partial=Ro,bt.partialRight=jo,bt.partition=Zt,bt.pick=q0,bt.pickBy=sv,bt.property=S2,bt.propertyOf=d5,bt.pull=Hb,bt.pullAll=Qh,bt.pullAllBy=rp,bt.pullAllWith=Ii,bt.pullAt=Gb,bt.range=p5,bt.rangeRight=m5,bt.rearg=Ua,bt.reject=ye,bt.remove=ev,bt.rest=oa,bt.reverse=bh,bt.sampleSize=Pe,bt.set=uv,bt.setWith=jc,bt.shuffle=Ne,bt.slice=Wb,bt.sortBy=Vn,bt.sortedUniq=S0,bt.sortedUniqBy=M0,bt.split=U3,bt.spread=Va,bt.tail=T0,bt.take=P0,bt.takeRight=mm,bt.takeRightWhile=Jh,bt.takeWhile=nv,bt.tap=vm,bt.throttle=Io,bt.thru=td,bt.toArray=wm,bt.toPairs=cv,bt.toPairsIn=Pm,bt.toPath=b5,bt.toPlainObject=vo,bt.transform=hv,bt.unary=aa,bt.union=Jf,bt.unionBy=k0,bt.unionWith=Uo,bt.uniq=Yi,bt.uniqBy=L0,bt.uniqWith=O0,bt.unset=Y0,bt.unzip=gm,bt.unzipWith=rv,bt.update=fv,bt.updateWith=X0,bt.values=uf,bt.valuesIn=dv,bt.without=R0,bt.words=I2,bt.wrap=Hr,bt.xor=iv,bt.xorBy=tf,bt.xorWith=ef,bt.zip=D0,bt.zipObject=Vo,bt.zipObjectDeep=ip,bt.zipWith=Bc,bt.entries=cv,bt.entriesIn=Pm,bt.extend=Cm,bt.extendWith=hp,hx(bt,bt),bt.add=A5,bt.attempt=E2,bt.camelCase=km,bt.capitalize=t1,bt.ceil=w5,bt.clamp=Q0,bt.clone=bi,bt.cloneDeep=rs,bt.cloneDeepWith=Ea,bt.cloneWith=Jr,bt.conformsTo=Hi,bt.deburr=pv,bt.defaultTo=e5,bt.divide=C5,bt.endsWith=tx,bt.eq=Ei,bt.escape=ex,bt.escapeRegExp=nx,bt.every=o,bt.find=g,bt.findIndex=np,bt.findKey=Mm,bt.findLast=b,bt.findLastIndex=Xh,bt.findLastKey=av,bt.floor=I5,bt.forEach=j,bt.forEachRight=K,bt.forIn=V0,bt.forInRight=dp,bt.forOwn=j0,bt.forOwnRight=H0,bt.get=Tm,bt.gt=Sa,bt.gte=si,bt.has=tl,bt.hasIn=sd,bt.head=dm,bt.identity=Jl,bt.includes=nt,bt.indexOf=C0,bt.inRange=pp,bt.invoke=Jb,bt.isArguments=vs,bt.isArray=yr,bt.isArrayBuffer=ac,bt.isArrayLike=fi,bt.isArrayLikeObject=Gi,bt.isBoolean=Yl,bt.isBuffer=Al,bt.isDate=nf,bt.isElement=nd,bt.isEmpty=Nc,bt.isEqual=rd,bt.isEqualWith=ym,bt.isError=Ah,bt.isFinite=ap,bt.isFunction=Xl,bt.isInteger=sp,bt.isLength=Ql,bt.isMap=Uc,bt.isMatch=id,bt.isMatchWith=_m,bt.isNaN=bm,bt.isNative=lp,bt.isNil=xm,bt.isNull=up,bt.isNumber=od,bt.isObject=co,bt.isObjectLike=ho,bt.isPlainObject=Vc,bt.isRegExp=rf,bt.isSafeInteger=Am,bt.isSet=of,bt.isString=af,bt.isSymbol=ja,bt.isTypedArray=sc,bt.isUndefined=sf,bt.isWeakMap=cp,bt.isWeakSet=ad,bt.join=jb,bt.kebabCase=rx,bt.last=ql,bt.lastIndexOf=pm,bt.lowerCase=ix,bt.lowerFirst=ox,bt.lt=ov,bt.lte=N0,bt.max=E5,bt.maxBy=S5,bt.mean=M5,bt.meanBy=T5,bt.min=P5,bt.minBy=k5,bt.stubArray=dx,bt.stubFalse=px,bt.stubObject=g5,bt.stubString=v5,bt.stubTrue=y5,bt.multiply=L5,bt.nth=tv,bt.noConflict=l5,bt.noop=fx,bt.now=_n,bt.pad=ax,bt.padEnd=sx,bt.padStart=hc,bt.parseInt=Lm,bt.random=J0,bt.reduce=Vt,bt.reduceRight=se,bt.repeat=e1,bt.replace=mp,bt.result=lv,bt.round=O5,bt.runInContext=oe,bt.sample=Ee,bt.size=Je,bt.snakeCase=n1,bt.some=cn,bt.sortedIndex=Zb,bt.sortedIndexBy=$b,bt.sortedIndexOf=Kb,bt.sortedLastIndex=qb,bt.sortedLastIndexBy=Yb,bt.sortedLastIndexOf=Xb,bt.startCase=V3,bt.startsWith=j3,bt.subtract=R5,bt.sum=D5,bt.sumBy=z5,bt.template=H3,bt.times=_5,bt.toFinite=lc,bt.toInteger=$r,bt.toLength=U0,bt.toLower=G3,bt.toNumber=ys,bt.toSafeInteger=Iu,bt.toString=Wi,bt.toUpper=W3,bt.trim=Z3,bt.trimEnd=$3,bt.trimStart=K3,bt.truncate=q3,bt.unescape=Y3,bt.uniqueId=x5,bt.upperCase=X3,bt.upperFirst=lx,bt.each=j,bt.eachRight=K,bt.first=dm,hx(bt,function(){var p={};return no(bt,function(_,P){tr.call(bt.prototype,P)||(p[P]=_)}),p}(),{chain:!1}),bt.VERSION=a,Fo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){bt[p].placeholder=bt}),Fo(["drop","take"],function(p,_){Br.prototype[p]=function(P){P=P===n?1:or($r(P),0);var W=this.__filtered__&&!_?new Br(this):this.clone();return W.__filtered__?W.__takeCount__=lo(P,W.__takeCount__):W.__views__.push({size:lo(P,jt),type:p+(W.__dir__<0?"Right":"")}),W},Br.prototype[p+"Right"]=function(P){return this.reverse()[p](P).reverse()}}),Fo(["filter","map","takeWhile"],function(p,_){var P=_+1,W=P==Z||P==Ft;Br.prototype[p]=function(st){var It=this.clone();return It.__iteratees__.push({iteratee:xr(st,3),type:P}),It.__filtered__=It.__filtered__||W,It}}),Fo(["head","last"],function(p,_){var P="take"+(_?"Right":"");Br.prototype[p]=function(){return this[P](1).value()[0]}}),Fo(["initial","tail"],function(p,_){var P="drop"+(_?"":"Right");Br.prototype[p]=function(){return this.__filtered__?new Br(this):this[P](1)}}),Br.prototype.compact=function(){return this.filter(Jl)},Br.prototype.find=function(p){return this.filter(p).head()},Br.prototype.findLast=function(p){return this.reverse().find(p)},Br.prototype.invokeMap=oi(function(p,_){return typeof p=="function"?new Br(this):this.map(function(P){return Xs(P,p,_)})}),Br.prototype.reject=function(p){return this.filter(ji(xr(p)))},Br.prototype.slice=function(p,_){p=$r(p);var P=this;return P.__filtered__&&(p>0||_<0)?new Br(P):(p<0?P=P.takeRight(-p):p&&(P=P.drop(p)),_!==n&&(_=$r(_),P=_<0?P.dropRight(-_):P.take(_-p)),P)},Br.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},Br.prototype.toArray=function(){return this.take(jt)},no(Br.prototype,function(p,_){var P=/^(?:filter|find|map|reject)|While$/.test(_),W=/^(?:head|last)$/.test(_),st=bt[W?"take"+(_=="last"?"Right":""):_],It=W||/^find/.test(_);st&&(bt.prototype[_]=function(){var $t=this.__wrapped__,ae=W?[1]:arguments,be=$t instanceof Br,Qe=ae[0],tn=be||yr($t),ln=function(xi){var Li=st.apply(bt,Xa([xi],ae));return W&&jn?Li[0]:Li};tn&&P&&typeof Qe=="function"&&Qe.length!=1&&(be=tn=!1);var jn=this.__chain__,mr=!!this.__actions__.length,Rr=It&&!jn,di=be&&!mr;if(!It&&tn){$t=di?$t:new Br(this);var Dr=p.apply($t,ae);return Dr.__actions__.push({func:td,args:[ln],thisArg:n}),new Ia(Dr,jn)}return Rr&&di?p.apply(this,ae):(Dr=this.thru(ln),Rr?W?Dr.value()[0]:Dr.value():Dr)})}),Fo(["pop","push","shift","sort","splice","unshift"],function(p){var _=Qa[p],P=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",W=/^(?:pop|shift)$/.test(p);bt.prototype[p]=function(){var st=arguments;if(W&&!this.__chain__){var It=this.value();return _.apply(yr(It)?It:[],st)}return this[P](function($t){return _.apply(yr($t)?$t:[],st)})}}),no(Br.prototype,function(p,_){var P=bt[_];if(P){var W=P.name+"";tr.call(Ba,W)||(Ba[W]=[]),Ba[W].push({name:_,func:P})}}),Ba[Jp(n,F).name]=[{name:"wrapper",func:n}],Br.prototype.clone=jf,Br.prototype.reverse=dh,Br.prototype.value=Vh,bt.prototype.at=ed,bt.prototype.chain=Fc,bt.prototype.commit=z0,bt.prototype.next=B0,bt.prototype.plant=ia,bt.prototype.reverse=xh,bt.prototype.toJSON=bt.prototype.valueOf=bt.prototype.value=F0,bt.prototype.first=bt.prototype.head,Vl&&(bt.prototype[Vl]=Qb),bt},Ti=Yr();cl?((cl.exports=Ti)._=Ti,Ac._=Ti):So._=Ti}).call(ca)})(a_,a_.exports);var Fy=a_.exports;const Vw=Tw("map.queue",{pendingFunctions:{},pendingRemoveFunctions:{},mapIds:{}}),L1=Vw.pendingFunctions,Dx=Vw.pendingRemoveFunctions,ag=Vw.mapIds;function Vd(t,e,n){L1[t]=e,YM()}function YM(){for(const t in ag)if(Object.prototype.hasOwnProperty.call(ag,t)){const e=ag[t];for(const n in L1)if(Object.prototype.hasOwnProperty.call(L1,n)&&!e[n]){const a=L1[n];a(t),e[n]=!0}}}function nI(t){ag[t]={},YM()}function Gz(t){for(const e in Dx){const n=ag[t];if(Object.prototype.hasOwnProperty.call(Dx,e)&&!n[e]){const a=Dx[e];a(t),n[e]=!0}}ag[t]={}}const iu=Tw("map.core",{state:{},getters:{getIsMulti(t){return!!iu.state[t].isMulti},getMaps(t){return iu.state[t].maps}},actions:{getMapStore(t){const e=iu.state[t];if(e)return e},initMaps(t,e){iu.state[t]={maps:e,isMulti:e.length>1},nI(t)},initMap(t,e){iu.state[t]={map:e},nI(t)},removeMap(t){delete iu.state[t],Gz(t)},getMap(t,e){var s,l;const n=(s=iu.state[t])==null?void 0:s.map,a=(l=iu.state[t])==null?void 0:l.maps;a&&a.forEach(i=>{e&&e(i)}),n&&e&&e(n)}}}),{state:Wz,getters:eQ,actions:Sd}=iu;function Lf(t,e,n){const a=Sd.getMapStore(t);if(a)return a[e]||(a[e]=n||{}),a[e]}function ba(t,e){const n=Sd.getMapStore(t);return(n==null?void 0:n[e])||{}}const Up=iu.actions.getMap,s_="lang";function XM(t){Lf(t,s_,sl({locale:{},localeDefault:{}}))}function tb(t){const e=ba(t,s_);return e||(XM(t),ba(t,s_))}function Zz(t,e){const n=tb(t);n&&(n.locale=Fy.merge({},n.locale,e))}function $z(t,e){const n=tb(t);n&&(n.localeDefault=Fy.merge({},n.localeDefault,e))}function Kz(t,e){const n=tb(t);n&&(n.translate=e)}Vd(s_,XM);const qz=1e3,zm=new Map;function Ka(t){if(!t)throw new Error("mapId is required");const e=hn(()=>tb(t));function n(f,m){var A,w,E;if((A=e.value)!=null&&A.translate)return e.value.translate(f,m);const y=BA((w=e.value)==null?void 0:w.locale,f);if(y!==void 0)return rI(y,m);const x=BA((E=e.value)==null?void 0:E.localeDefault,f);return x!==void 0?rI(x,m):f}const a=hn(()=>n);function s(f){Zz(t,f)}function l(f){$z(t,f)}function i(f){Kz(t,f)}return{trans:a,setLocale:s,setLocaleDefault:l,setTranslate:i}}function BA(t,e,n){if(!t||!e)return n;const a=Array.isArray(e)?e.join("."):e,s=`${JSON.stringify(t)}_${a}`;if(zm.has(s))return zm.get(s);zm.size>=qz&&zm.clear();const l=Array.isArray(e)?e:e.split(".").filter(f=>f.length);if(l.length<1){const f=t===void 0?n:t;return f!==void 0&&f!==n&&zm.set(s,f),f}const i=BA(t[l.shift()],l,n);return i!==void 0&&i!==n&&zm.set(s,i),i}function rI(t,e){return t?e?t.replace(/\{(\w+)\}/g,(n,a)=>{const s=e[a];return s!==void 0?String(s):n}):t:""}const ti=Tw("drag",{state:{container:sl({}),componentCard:void 0,componentCardHeader:void 0,componentCardSidebarToggle:void 0},getters:{getComponentCard(t){return ti.state.componentCard},getComponentCardHeader(t){return ti.state.componentCardHeader},getComponentCardSidebarToggle(t){return ti.state.componentCardSidebarToggle},getItems(t){return ti.actions.getContainer(t).items},getItemsShow(t){return ti.actions.getContainer(t).show},getWidth(t){return ti.actions.getContainer(t).width},getHeight(t){return ti.actions.getContainer(t).height},getIsMobile(t){return ti.actions.getContainer(t).isMobile}},actions:{initContainer(t){ti.state.container[t]={items:[],show:[],actions:{},height:0,width:0,isMobile:!1}},removeContainer(t){delete ti.state.container[t]},getContainer(t){if(!t)throw"Not set container id";const e=ti.state.container[t];if(!e)throw"Not found container for id "+t;return e},setComponentCard(t){ti.state.componentCard=t},setComponentCardHeader(t){ti.state.componentCardHeader=t},setComponentCardSidebarToggle(t){ti.state.componentCardSidebarToggle=t},setParentProps(t,e){const n=ti.actions.getContainer(t);n.width=e.width,n.height=e.height,n.isMobile=e.isMobile},registerItem(t,e){ti.actions.getContainer(t).items.push(e)},registerAction(t,e,n){const a=ti.actions.getContainer(t);a.actions[e]=n},unRegisterItem(t,e){const n=ti.state.container[t];n&&(n.items=n.items.filter(a=>a!==e),n.show=n.show.filter(a=>a!==e),delete n.actions[e])},registerItemShow(t,e,n){Yz(t,e,n),zx(t)},setToBack(t,e){if(!t||!e)return;const n=iI(t),a=n.show.findIndex(s=>s==e);a>0&&(n.show.splice(a,1),n.show.unshift(e),zx(t))},setToFront(t,e){if(!t||!e)return;const n=iI(t),a=n.show.findIndex(s=>s==e);a<n.show.length-1&&(n.show.splice(a,1),n.show.push(e),zx(t))}}});function Yz(t,e,n){const a=ti.actions.getContainer(t),s=a.show;if(n&&!s.includes(e))s.push(e);else if(!n){const l=s.indexOf(e);l!==-1&&s.splice(l,1)}a.show=s}function zx(t){ti.actions.getContainer(t).show.forEach((n,a)=>{const s=Xz(t,n);s&&s.setZIndex(a<0?1:a+2)})}function Xz(t,e){return ti.actions.getContainer(t).actions[e]}function iI(t){const e=ti.state.container[t];if(!e)throw"Not found container for id "+t;return e}function Qz(t){ti.actions.initContainer(t)}function Jz(t){ti.actions.removeContainer(t)}const tB=ti.actions.setParentProps;function eB(t,e){ti.actions.registerItem(t,e)}function nB(t,e){ti.actions.unRegisterItem(t,e)}const oI=ti.actions.registerItemShow,rB=ti.actions.registerAction,iB=ti.actions.setToFront,oB=ti.actions.setToBack;ti.actions.setComponentCard;ti.actions.setComponentCardHeader;ti.actions.setComponentCardSidebarToggle;const aB=["id"],sB=_r({__name:"draggable-container",props:{containerId:{}},emits:{init:t=>!0,destroy:t=>!0},setup(t,{emit:e}){const n=e,a=on(),{containerId:s}=t,l=on(s||`draggable-container-${Ef()}`),i=on(!1);hn(()=>ti.state),$a(()=>{Qz(l.value),window.addEventListener("resize",f),lu(()=>{f(),i.value=!0,n("init",l.value)})}),Pf(()=>{Jz(l.value),window.removeEventListener("resize",f),n("destroy",l.value)}),Ed("containerId",l);function f(){var y,x;const m=((y=a.value)==null?void 0:y.clientWidth)||0;tB(l.value,{width:m,height:((x=a.value)==null?void 0:x.clientHeight)||0,isMobile:m<600})}return(m,y)=>(Ct(),le("div",{class:"draggable-container",ref_key:"box",ref:a,id:m.containerId},[l.value&&i.value?Zn(m.$slots,"default",{key:0,containerId:m.containerId},void 0,!0):mn("",!0)],8,aB))}}),lB=Yn(sB,[["__scopeId","data-v-57a91267"]]),uB={props:{height:{},width:{}},name:"MapCard",data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},cB={class:"card-container"},hB=z_('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1);function fB(t,e,n,a,s,l){return Ct(),le("div",li({class:"card",style:l.cardStyle},t.$attrs),[kt("div",cB,[Zn(t.$slots,"default")]),hB],16)}const dB=Yn(uB,[["render",fB]]),pB={name:"MapHeader"},jw=t=>(th("data-v-9b566e91"),t=t(),eh(),t),mB=jw(()=>kt("hr",{class:"map-divider"},null,-1)),gB={class:"draggable-header"},vB={class:"draggable-header__content"},yB={class:"draggable-header__title"},_B=jw(()=>kt("div",{class:"map-spacer"},null,-1)),bB=jw(()=>kt("hr",{class:"map-divider"},null,-1));function xB(t,e,n,a,s,l){return Ct(),le(Mr,null,[mB,kt("div",gB,[kt("div",vB,[Zn(t.$slots,"pre-title",{},void 0,!0),kt("div",yB,[Zn(t.$slots,"title",{},void 0,!0)]),_B,Zn(t.$slots,"extra-btn",{},void 0,!0)])]),bB],64)}const AB=Yn(pB,[["render",xB],["__scopeId","data-v-9b566e91"]]);function eb(t){const e=hn(()=>ti.getters.getComponentCard(t.containerId)||t.componentCard||dB),n=hn(()=>ti.getters.getComponentCardHeader(t.containerId)||t.componentCardHeader||AB);return{componentCard:e,componentCardHeader:n}}const wB={componentCard:{type:[String,Object]},componentCardHeader:{type:[String,Object]}},CB={name:"ArrangeBringForwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},IB=["aria-hidden","aria-label"],EB=["fill","width","height"],SB={d:"M2,2H16V16H2V2M22,8V22H8V18H10V20H20V10H18V8H22Z"},MB={key:0};function TB(t,e,n,a,s,l){return Ct(),le("span",li(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrange-bring-forward-icon",role:"img",onClick:e[0]||(e[0]=i=>t.$emit("click",i))}),[(Ct(),le("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[kt("path",SB,[n.title?(Ct(),le("title",MB,Mn(n.title),1)):mn("",!0)])],8,EB))],16,IB)}const PB=Yn(CB,[["render",TB]]),kB={name:"ArrangeSendBackwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},LB=["aria-hidden","aria-label"],OB=["fill","width","height"],RB={d:"M2,2H16V16H2V2M22,8V22H8V18H18V8H22M4,4V14H14V4H4Z"},DB={key:0};function zB(t,e,n,a,s,l){return Ct(),le("span",li(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrange-send-backward-icon",role:"img",onClick:e[0]||(e[0]=i=>t.$emit("click",i))}),[(Ct(),le("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[kt("path",RB,[n.title?(Ct(),le("title",DB,Mn(n.title),1)):mn("",!0)])],8,OB))],16,LB)}const BB=Yn(kB,[["render",zB]]),FB={name:"ArrowDownDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},NB=["aria-hidden","aria-label"],UB=["fill","width","height"],VB={d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M7,10L12,15L17,10H7Z"},jB={key:0};function HB(t,e,n,a,s,l){return Ct(),le("span",li(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrow-down-drop-circle-outline-icon",role:"img",onClick:e[0]||(e[0]=i=>t.$emit("click",i))}),[(Ct(),le("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[kt("path",VB,[n.title?(Ct(),le("title",jB,Mn(n.title),1)):mn("",!0)])],8,UB))],16,NB)}const aI=Yn(FB,[["render",HB]]),GB={name:"ArrowUpDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},WB=["aria-hidden","aria-label"],ZB=["fill","width","height"],$B={d:"M12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M17,14L12,9L7,14H17Z"},KB={key:0};function qB(t,e,n,a,s,l){return Ct(),le("span",li(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrow-up-drop-circle-outline-icon",role:"img",onClick:e[0]||(e[0]=i=>t.$emit("click",i))}),[(Ct(),le("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[kt("path",$B,[n.title?(Ct(),le("title",KB,Mn(n.title),1)):mn("",!0)])],8,ZB))],16,WB)}const sI=Yn(GB,[["render",qB]]),YB={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},XB=["aria-hidden","aria-label"],QB=["fill","width","height"],JB={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},tF={key:0};function eF(t,e,n,a,s,l){return Ct(),le("span",li(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon close-icon",role:"img",onClick:e[0]||(e[0]=i=>t.$emit("click",i))}),[(Ct(),le("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[kt("path",JB,[n.title?(Ct(),le("title",tF,Mn(n.title),1)):mn("",!0)])],8,QB))],16,XB)}const nF=Yn(YB,[["render",eF]]),rF={name:"DragVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},iF=["aria-hidden","aria-label"],oF=["fill","width","height"],aF={d:"M22.67,12L18.18,16.5L15.67,14L17.65,12L15.67,10.04L18.18,7.53L22.67,12M12,1.33L16.47,5.82L13.96,8.33L12,6.35L10,8.33L7.5,5.82L12,1.33M12,22.67L7.53,18.18L10.04,15.67L12,17.65L14,15.67L16.5,18.18L12,22.67M1.33,12L5.82,7.5L8.33,10L6.35,12L8.33,13.96L5.82,16.47L1.33,12M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10Z"},sF={key:0};function lF(t,e,n,a,s,l){return Ct(),le("span",li(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon drag-variant-icon",role:"img",onClick:e[0]||(e[0]=i=>t.$emit("click",i))}),[(Ct(),le("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[kt("path",aF,[n.title?(Ct(),le("title",sF,Mn(n.title),1)):mn("",!0)])],8,oF))],16,iF)}const uF=Yn(rF,[["render",lF]]),cF={name:"MenuLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},hF=["aria-hidden","aria-label"],fF=["fill","width","height"],dF={d:"M14,7L9,12L14,17V7Z"},pF={key:0};function mF(t,e,n,a,s,l){return Ct(),le("span",li(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon menu-left-icon",role:"img",onClick:e[0]||(e[0]=i=>t.$emit("click",i))}),[(Ct(),le("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[kt("path",dF,[n.title?(Ct(),le("title",pF,Mn(n.title),1)):mn("",!0)])],8,fF))],16,hF)}const lI=Yn(cF,[["render",mF]]),gF={name:"MenuRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},vF=["aria-hidden","aria-label"],yF=["fill","width","height"],_F={d:"M10,17L15,12L10,7V17Z"},bF={key:0};function xF(t,e,n,a,s,l){return Ct(),le("span",li(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon menu-right-icon",role:"img",onClick:e[0]||(e[0]=i=>t.$emit("click",i))}),[(Ct(),le("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[kt("path",_F,[n.title?(Ct(),le("title",bF,Mn(n.title),1)):mn("",!0)])],8,yF))],16,vF)}const uI=Yn(gF,[["render",xF]]);function Ny(){return{CloseIcon:nF,FullscreenIcon:aI,OffFullscreenIcon:sI,ToBackIcon:BB,ToFrontIcon:PB,ExpandedIcon:sI,CloseExpandedIcon:aI,DragIcon:uF,SidebarLeftExpandedIcon:lI,SidebarLeftCloseExpandedIcon:uI,SidebarRightExpandedIcon:uI,SidebarRightCloseExpandedIcon:lI}}function AF(t,e){return e.length<1?!1:e[e.length-1]==t}function wF(t,e){return e.length<1?!1:e[0]==t}function nb(t,e,n){const a=on(`draggable-item-${Ef()}`),s=on(0);function l(i){s.value=i}return $a(()=>{eB(t,a.value),rB(t,a.value,{setZIndex:l}),e.value&&oI(t,a.value,e.value)}),Pf(()=>{nB(t,a.value)}),Wa(e,i=>{oI(t,a.value,i)}),{itemId:a,zIndex:s}}function rb(t,e){const n=hn(()=>ti.getters.getItems(t)),a=hn(()=>ti.getters.getItemsShow(t)),s=hn(()=>AF(e,a.value)),l=hn(()=>wF(e,a.value)),i=hn(()=>a.value.length>1);function f(){oB(t,e)}function m(){iB(t,e)}return{items:n,itemShows:a,isLast:s,isFirst:l,isHasItems:i,onToBack:f,onToFront:m}}function CF(t){const e=hn(()=>ti.getters.getWidth(t)),n=hn(()=>ti.getters.getHeight(t));return{containerWidth:e,containerHeight:n}}const ib={disabledExpand:Boolean,disabledHeader:Boolean,disabledClose:Boolean,disabledOrder:Boolean,containerId:String,title:{type:String,default:""},...wB};function ob(t,e,n){const a=on(!!t.show||!!n);return Wa(()=>t.show,l=>{a.value=l}),{show:hn({get(){return a.value},set(l){a.value=l,e("update:show",l),l||e("close")}})}}const ab={show:Boolean},sb={"update:show":t=>Boolean,close:()=>Boolean};function lb(t,e,n){const a=on(!!n);Wa(()=>t.expand,i=>{a.value=i});const s=hn({get(){return a.value},set(i){a.value=i,e("update:expand",i)}});function l(){s.value=!s.value}return{expand:s,toggle:l}}const ub={expand:Boolean},cb={"update:expand":t=>Boolean},IF={props:{height:{default:32},width:{default:32},disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},bindClass(){return{"map-control-button--disabled":this.disabled}}}},EF={class:"map-control-button__content"};function SF(t,e,n,a,s,l){return Ct(),le("button",li({class:"map-control-button"},t.$attrs,{style:l.bindStyle,class:l.bindClass}),[kt("span",EF,[Zn(t.$slots,"default",{},void 0,!0)])],16)}const bs=Yn(IF,[["render",SF],["__scopeId","data-v-cfd74f51"]]),MF={key:0},TF={key:1},PF={name:"MapSidebarToggle"},kF=_r({...PF,props:{right:Boolean,expand:Boolean},setup(t){const{SidebarLeftExpandedIcon:e,SidebarLeftCloseExpandedIcon:n,SidebarRightExpandedIcon:a,SidebarRightCloseExpandedIcon:s}=Ny();return(l,i)=>(Ct(),le("button",null,[t.right?(Ct(),le("span",TF,[t.expand?(Ct(),$e(at(a),{key:0,size:16})):(Ct(),$e(at(s),{key:1,size:16}))])):(Ct(),le("span",MF,[t.expand?(Ct(),$e(at(e),{key:0,size:16})):(Ct(),$e(at(n),{key:1,size:16}))]))]))}}),LF=Yn(kF,[["__scopeId","data-v-cc94c956"]]),OF={class:"sidebar-container--content"},RF={class:"draggable-sidebar"},DF={class:"draggable-sidebar-content"},zF={key:0,class:"complex-button-close"},BF={key:0},FF={key:1},NF={name:"DraggableItemSideBar"},UF=_r({...NF,props:{...ab,...ub,...ib,componentMapSidebarToggle:{type:[String,Object]},width:{type:[Number,String],default:"auto"},right:Boolean},emits:{...sb,...cb},setup(t,{emit:e}){const{CloseIcon:n,SidebarLeftExpandedIcon:a,SidebarLeftCloseExpandedIcon:s,SidebarRightExpandedIcon:l,SidebarRightCloseExpandedIcon:i,ToBackIcon:f,ToFrontIcon:m}=Ny(),y=t,x=e,A=As("containerId",on(y.containerId||""));if(!A.value)throw"Not set container id";const{show:w}=ob(y,x),{zIndex:E,itemId:L}=nb(A.value,w),{isLast:k,isFirst:z,isHasItems:F,onToBack:D,onToFront:B}=rb(A.value,L.value),{expand:U,toggle:$}=lb(y,x,!0),q=hn(()=>!y.width||y.width=="auto"),{componentCard:tt,componentCardHeader:Y}=eb({...y,containerId:A.value});hn(()=>ti.getters.getComponentCardSidebarToggle(A.value)||y.componentMapSidebarToggle||LF);function G(){w.value=!1}const rt=hn(()=>{let pt={};return pt.zIndex=E.value,y.width&&y.width!="auto"&&(y.width&&!isNaN(+y.width)?pt.width=y.width+"px":pt.width=y.width),pt});return(pt,Q)=>at(w)?(Ct(),le("div",{key:0,class:mo(["sidebar-container",{expand:at(U),"left-sidebar-container":!t.right,"right-sidebar-container":t.right,"auto-sidebar-container":q.value}]),style:Ni(rt.value)},[kt("div",OF,[(Ct(),$e(Ga(at(tt)),{width:"100%",height:"100%"},{default:Ce(()=>[kt("div",RF,[pt.disabledHeader?mn("",!0):(Ct(),$e(Ga(at(Y)),{key:0},{title:Ce(()=>[Zn(pt.$slots,"title",{},()=>[_a(Mn(pt.title),1)],!0)]),"extra-btn":Ce(()=>[Zn(pt.$slots,"extra-btn",{},void 0,!0),at(F)&&!pt.disabledOrder?(Ct(),le(Mr,{key:0},[Jt(bs,{disabled:at(z),onClick:Q[0]||(Q[0]=ot=>at(D)())},{default:Ce(()=>[Jt(at(f),{size:16})]),_:1},8,["disabled"]),Jt(bs,{disabled:at(k),onClick:Q[1]||(Q[1]=ot=>at(B)())},{default:Ce(()=>[Jt(at(m),{size:16})]),_:1},8,["disabled"])],64)):mn("",!0),pt.disabledClose?mn("",!0):(Ct(),$e(bs,{key:1,onClick:G},{default:Ce(()=>[Jt(at(n),{size:16})]),_:1}))]),_:3})),kt("div",DF,[Zn(pt.$slots,"default",{},void 0,!0)])])]),_:3}))]),at(w)&&!pt.disabledExpand?(Ct(),le("div",zF,[kt("button",{onClick:Q[2]||(Q[2]=(...ot)=>at($)&&at($)(...ot))},[t.right?(Ct(),le("span",FF,[at(U)?(Ct(),$e(at(l),{key:0,size:16})):(Ct(),$e(at(i),{key:1,size:16}))])):(Ct(),le("span",BF,[at(U)?(Ct(),$e(at(a),{key:0,size:16})):(Ct(),$e(at(s),{key:1,size:16}))]))])])):mn("",!0)],6)):mn("",!0)}}),VF=Yn(UF,[["__scopeId","data-v-a9ffb40e"]]);function cI(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Bm(t,e,n,a=1){const[s,l]=typeof a=="number"?[a,a]:a,i=Math.round(e/s/t[0])*t[0],f=Math.round(n/l/t[1])*t[1];return[i,f]}function Bx(t,e,n){return t-e-n}function Fx(t,e,n){return t-e-n}function dc(t,e,n){return e!==null&&t<e?e:n!==null&&n<t?n:t}function hI(t,e,n){let a=t;const s=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(l=>cI(a[l]));if(!cI(a[s]))return!1;do{if(a[s](e))return!0;if(a===n)return!1;a=a.parentNode}while(a);return!1}function jF(t){const e=window.getComputedStyle(t);return[parseFloat(e.getPropertyValue("width"),10),parseFloat(e.getPropertyValue("height"),10)]}function yp(t,e,n){t&&(t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener?t.addEventListener(e,n,!0):t["on"+e]=n)}function df(t,e,n){t&&(t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener?t.removeEventListener(e,n,!0):t["on"+e]=null)}const HF=(t,e)=>{const n=t.__vccOpts||t;for(const[a,s]of e)n[a]=s;return n},O1={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},GF={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},WF={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let pf=O1.mouse;const ZF={replace:!0,name:"vue-draggable-resizable",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},h:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},minWidth:{type:Number,default:0,validator:t=>t>=0},minHeight:{type:Number,default:0,validator:t=>t>=0},maxWidth:{type:Number,default:null,validator:t=>t>=0},maxHeight:{type:Number,default:null,validator:t=>t>=0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:t=>typeof t=="string"?t==="auto":t>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:t=>{const e=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(t.filter(n=>e.has(n))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:t=>["x","y","both"].includes(t)},grid:{type:Array,default:()=>[1,1]},parent:{type:Boolean,default:!1},scale:{type:[Number,Array],default:1,validator:t=>typeof t=="number"?t>0:t.length===2&&t[0]>0&&t[1]>0},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,handle:null,enabled:this.active,resizing:!1,dragging:!1,dragEnable:!1,resizeEnable:!1,zIndex:this.z}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxHeight&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e;const[n,a]=jF(this.$el);this.aspectFactor=(this.w!=="auto"?this.w:n)/(this.h!=="auto"?this.h:a),this.width=this.w!=="auto"?this.w:n,this.height=this.h!=="auto"?this.h:a,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.active&&this.$emit("activated"),yp(document.documentElement,"mousedown",this.deselect),yp(document.documentElement,"touchend touchcancel",this.deselect),yp(window,"resize",this.checkParentSize)},beforeUnmount:function(){df(document.documentElement,"mousedown",this.deselect),df(document.documentElement,"touchstart",this.handleUp),df(document.documentElement,"mousemove",this.move),df(document.documentElement,"touchmove",this.move),df(document.documentElement,"mouseup",this.handleUp),df(document.documentElement,"touchend touchcancel",this.deselect),df(window,"resize",this.checkParentSize)},methods:{resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top}},getParentSize(){if(this.parent){const t=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(t.getPropertyValue("width"),10),parseInt(t.getPropertyValue("height"),10)]}return[null,null]},elementTouchDown(t){pf=O1.touch,this.elementDown(t)},elementMouseDown(t){pf=O1.mouse,this.elementDown(t)},elementDown(t){if(t instanceof MouseEvent&&t.button!==0)return;const e=t.target||t.srcElement;if(this.$el.contains(e)){if(this.onDragStart(t)===!1)return;if(this.dragHandle&&!hI(e,this.dragHandle,this.$el)||this.dragCancel&&hI(e,this.dragCancel,this.$el)){this.dragging=!1;return}this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragEnable=!0),this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),yp(document.documentElement,pf.move,this.move),yp(document.documentElement,pf.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(t){const e=t.target||t.srcElement,n=new RegExp(this.className+"-([trmbl]{2})","");!this.$el.contains(e)&&!n.test(e.className)&&(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),df(document.documentElement,pf.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown(t,e){pf=O1.touch,this.handleDown(t,e)},handleDown(t,e){e instanceof MouseEvent&&e.which!==1||this.onResizeStart(t,e)!==!1&&(e.stopPropagation&&e.stopPropagation(),this.lockAspectRatio&&!t.includes("m")?this.handle="m"+t.substring(1):this.handle=t,this.resizeEnable=!0,this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),yp(document.documentElement,pf.move,this.handleResize),yp(document.documentElement,pf.stop,this.handleUp))},calcResizeLimits(){let t=this.minW,e=this.minH,n=this.maxW,a=this.maxH;const s=this.aspectFactor,[l,i]=this.grid,f=this.width,m=this.height,y=this.left,x=this.top,A=this.right,w=this.bottom;this.lockAspectRatio&&(t/e>s?e=t/s:t=s*e,n&&a?(n=Math.min(n,s*a),a=Math.min(a,n/s)):n?a=n/s:a&&(n=s*a)),n=n-n%l,a=a-a%i;const E={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(E.minLeft=y%l,E.maxLeft=y+Math.floor((f-t)/l)*l,E.minTop=x%i,E.maxTop=x+Math.floor((m-e)/i)*i,E.minRight=A%l,E.maxRight=A+Math.floor((f-t)/l)*l,E.minBottom=w%i,E.maxBottom=w+Math.floor((m-e)/i)*i,n&&(E.minLeft=Math.max(E.minLeft,this.parentWidth-A-n),E.minRight=Math.max(E.minRight,this.parentWidth-y-n)),a&&(E.minTop=Math.max(E.minTop,this.parentHeight-w-a),E.minBottom=Math.max(E.minBottom,this.parentHeight-x-a)),this.lockAspectRatio&&(E.minLeft=Math.max(E.minLeft,y-x*s),E.minTop=Math.max(E.minTop,x-y/s),E.minRight=Math.max(E.minRight,A-w*s),E.minBottom=Math.max(E.minBottom,w-A/s))):(E.minLeft=null,E.maxLeft=y+Math.floor((f-t)/l)*l,E.minTop=null,E.maxTop=x+Math.floor((m-e)/i)*i,E.minRight=null,E.maxRight=A+Math.floor((f-t)/l)*l,E.minBottom=null,E.maxBottom=w+Math.floor((m-e)/i)*i,n&&(E.minLeft=-(A+n),E.minRight=-(y+n)),a&&(E.minTop=-(w+a),E.minBottom=-(x+a)),this.lockAspectRatio&&n&&a&&(E.minLeft=Math.min(E.minLeft,-(A+n)),E.minTop=Math.min(E.minTop,-(a+w)),E.minRight=Math.min(E.minRight,-y-n),E.minBottom=Math.min(E.minBottom,-x-a))),E},move(t){this.resizing?this.handleResize(t):this.dragEnable&&this.handleDrag(t)},handleDrag(t){const e=this.axis,n=this.grid,a=this.bounds,s=this.mouseClickPosition,l=e&&e!=="y"?s.mouseX-(t.touches?t.touches[0].pageX:t.pageX):0,i=e&&e!=="x"?s.mouseY-(t.touches?t.touches[0].pageY:t.pageY):0,[f,m]=Bm(n,l,i,this.scale),y=dc(s.left-f,a.minLeft,a.maxLeft),x=dc(s.top-m,a.minTop,a.maxTop);if(this.onDrag(y,x)===!1)return;const A=dc(s.right+f,a.minRight,a.maxRight),w=dc(s.bottom+m,a.minBottom,a.maxBottom);this.left=y,this.top=x,this.right=A,this.bottom=w,this.$emit("dragging",this.left,this.top),this.dragging=!0},moveHorizontally(t){const[e,n]=Bm(this.grid,t,this.top,1),a=dc(e,this.bounds.minLeft,this.bounds.maxLeft);this.left=a,this.right=this.parentWidth-this.width-a},moveVertically(t){const[e,n]=Bm(this.grid,this.left,t,1),a=dc(n,this.bounds.minTop,this.bounds.maxTop);this.top=a,this.bottom=this.parentHeight-this.height-a},handleResize(t){let e=this.left,n=this.top,a=this.right,s=this.bottom;const l=this.mouseClickPosition,i=this.aspectFactor,f=l.mouseX-(t.touches?t.touches[0].pageX:t.pageX),m=l.mouseY-(t.touches?t.touches[0].pageY:t.pageY);!this.widthTouched&&f&&(this.widthTouched=!0),!this.heightTouched&&m&&(this.heightTouched=!0);const[y,x]=Bm(this.grid,f,m,this.scale);this.handle.includes("b")?(s=dc(l.bottom+x,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(a=this.right-(this.bottom-s)*i)):this.handle.includes("t")&&(n=dc(l.top-x,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(e=this.left-(this.top-n)*i)),this.handle.includes("r")?(a=dc(l.right+y,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(s=this.bottom-(this.right-a)/i)):this.handle.includes("l")&&(e=dc(l.left-y,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(n=this.top-(this.left-e)/i));const A=Bx(this.parentWidth,e,a),w=Fx(this.parentHeight,n,s);this.onResize(this.handle,e,n,A,w)!==!1&&(this.left=e,this.top=n,this.right=a,this.bottom=s,this.width=A,this.height=w,this.$emit("resizing",this.left,this.top,this.width,this.height),this.resizing=!0)},changeWidth(t){const[e,n]=Bm(this.grid,t,0,1),a=dc(this.parentWidth-e-this.left,this.bounds.minRight,this.bounds.maxRight);let s=this.bottom;this.lockAspectRatio&&(s=this.bottom-(this.right-a)/this.aspectFactor);const l=Bx(this.parentWidth,this.left,a),i=Fx(this.parentHeight,this.top,s);this.right=a,this.bottom=s,this.width=l,this.height=i},changeHeight(t){const[e,n]=Bm(this.grid,0,t,1),a=dc(this.parentHeight-n-this.top,this.bounds.minBottom,this.bounds.maxBottom);let s=this.right;this.lockAspectRatio&&(s=this.right-(this.bottom-a)*this.aspectFactor);const l=Bx(this.parentWidth,this.left,s),i=Fx(this.parentHeight,this.top,a);this.right=s,this.bottom=a,this.width=l,this.height=i},handleUp(t){this.handle=null,this.resetBoundsAndMouseState(),this.dragEnable=!1,this.resizeEnable=!1,this.resizing&&(this.resizing=!1,this.$emit("resizeStop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragStop",this.left,this.top)),df(document.documentElement,pf.move,this.handleResize)}},computed:{style(){return{transform:`translate(${this.left}px, ${this.top}px)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,...this.dragging&&this.disableUserSelect?GF:WF}},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return this.w==="auto"&&!this.widthTouched?"auto":this.width+"px"},computedHeight(){return this.h==="auto"&&!this.heightTouched?"auto":this.height+"px"},minW(){return this.minWidth},minH(){return this.minHeight},maxW(){return this.maxWidth},maxH(){return this.maxHeight},resizingOnX(){return!!this.handle&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return!!this.handle&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return!!this.handle&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(t){this.enabled=t,t?this.$emit("activated"):this.$emit("deactivated")},z(t){(t>=0||t==="auto")&&(this.zIndex=t)},x(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(t))},y(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(t))},lockAspectRatio(t){t?this.aspectFactor=this.width/this.height:this.aspectFactor=void 0},w(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(t))},h(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(t))}}},$F=["onMousedown","onTouchstart"];function KF(t,e,n,a,s,l){return Ct(),le("div",{style:Ni(l.style),class:mo([{[n.classNameActive]:t.enabled,[n.classNameDragging]:t.dragging,[n.classNameResizing]:t.resizing,[n.classNameDraggable]:n.draggable,[n.classNameResizable]:n.resizable},n.className]),onMousedown:e[0]||(e[0]=(...i)=>l.elementMouseDown&&l.elementMouseDown(...i)),onTouchstart:e[1]||(e[1]=(...i)=>l.elementTouchDown&&l.elementTouchDown(...i))},[(Ct(!0),le(Mr,null,Eo(l.actualHandles,i=>(Ct(),le("div",{key:i,class:mo([n.classNameHandle,n.classNameHandle+"-"+i]),style:Ni({display:t.enabled?"block":"none"}),onMousedown:oo(f=>l.handleDown(i,f),["stop","prevent"]),onTouchstart:oo(f=>l.handleTouchDown(i,f),["stop","prevent"])},[Zn(t.$slots,i)],46,$F))),128)),Zn(t.$slots,"default")],38)}const QM=HF(ZF,[["render",KF]]);function FA(t){FA.installed||(FA.installed=!0,t.component("VueDraggableResizable",QM))}const qF={install:FA};let l_=null;typeof window<"u"?l_=window.Vue:typeof global<"u"&&(l_=global.Vue);l_&&l_.use(qF);const YF=t=>(th("data-v-23372390"),t=t(),eh(),t),XF={class:"draggable-popup-desktop"},QF={class:"draggable-popup-drag-container"},JF=YF(()=>kt("div",{class:"drag grabbing"},null,-1)),tN={class:"draggable-popup-desktop-content"},eN={name:"DraggableItemPopup"},nN=_r({...eN,props:{...ab,...ub,...ib,sticks:{type:Array,default:()=>["bl","br"]},top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},centerX:Boolean,centerY:Boolean,center:Boolean},emits:{...sb,...cb},setup(t,{emit:e}){const{CloseIcon:n,CloseExpandedIcon:a,DragIcon:s,ExpandedIcon:l,ToBackIcon:i,ToFrontIcon:f}=Ny(),m=t,y=e,x=As("containerId",on(m.containerId||""));if(!x.value)throw"Not set container id";const{show:A}=ob(m,y),{zIndex:w,itemId:E}=nb(x.value,A),{containerWidth:L,containerHeight:k}=CF(x.value),{isLast:z,isFirst:F,isHasItems:D,onToBack:B,onToFront:U}=rb(x.value,E.value),$=on(!1),q=on(!1),tt=on(m.height||200),Y=on(tt.value),G=on(m.width||200),rt=on(0),pt=on(0),{expand:Q}=lb(m,y,!0);function ot(){q.value=!0}function Z(){q.value=!1}const{componentCard:Kt,componentCardHeader:Ft}=eb({...m,containerId:x.value});function Tt(Ut,xe,Fe,we){G.value=Fe,tt.value=we}function ie(){A.value=!1}Wa(A,()=>{ue()},{immediate:!0});function ue(){$.value=!1,A&&(m.left!=null&&(rt.value=m.left),m.top!=null&&(pt.value=m.top),m.right&&(rt.value=L.value-m.right-G.value),m.bottom&&(pt.value=k.value-m.bottom-tt.value),(m.center||m.centerX)&&(rt.value=(L.value-G.value)/2),(m.center||m.centerY)&&(pt.value=(k.value-tt.value)/2),$.value=!0)}function je(){Q.value&&tt.value>50&&(Y.value=tt.value),Q.value=!Q.value,tt.value=Q.value?Y.value:50}function jt(){var Ut;(Ut=window==null?void 0:window.getSelection())==null||Ut.removeAllRanges()}return(Ut,xe)=>at(A)&&$.value?(Ct(),$e(at(QM),li({key:0},Ut.$attrs,{dragHandle:".drag",parent:!0,handles:t.sticks,w:G.value,h:tt.value,x:rt.value,y:pt.value,z:at(w),onResizing:Tt,active:q.value,onActivated:xe[2]||(xe[2]=Fe=>ot()),onDeactivated:xe[3]||(xe[3]=Fe=>Z()),onDragging:jt}),{default:Ce(()=>[(Ct(),$e(Ga(at(Kt)),{width:G.value,height:tt.value},{default:Ce(()=>[kt("div",XF,[Ut.disabledHeader?mn("",!0):(Ct(),$e(Ga(at(Ft)),{key:0},{title:Ce(()=>[Zn(Ut.$slots,"title",{},()=>[_a(Mn(Ut.title),1)],!0)]),"pre-title":Ce(()=>[kt("div",QF,[Jt(at(s),{size:16}),JF])]),"extra-btn":Ce(()=>[Zn(Ut.$slots,"extra-btn",{},void 0,!0),at(D)&&!Ut.disabledOrder?(Ct(),le(Mr,{key:0},[Jt(bs,{disabled:at(F),onClick:xe[0]||(xe[0]=Fe=>at(B)())},{default:Ce(()=>[Jt(at(i),{size:16})]),_:1},8,["disabled"]),Jt(bs,{disabled:at(z),onClick:xe[1]||(xe[1]=Fe=>at(U)())},{default:Ce(()=>[Jt(at(f),{size:16})]),_:1},8,["disabled"])],64)):mn("",!0),Jt(bs,{onClick:je},{default:Ce(()=>[at(Q)?(Ct(),$e(at(l),{key:0,size:16})):(Ct(),$e(at(a),{key:1,size:16}))]),_:1}),Ut.disabledClose?mn("",!0):(Ct(),$e(bs,{key:1,onClick:ie},{default:Ce(()=>[Jt(at(n),{size:16})]),_:1}))]),_:3})),Du(kt("div",tN,[Zn(Ut.$slots,"default",{},void 0,!0)],512),[[F_,at(Q)]])])]),_:3},8,["width","height"]))]),_:3},16,["handles","w","h","x","y","z","active"])):mn("",!0)}}),rN=Yn(nN,[["__scopeId","data-v-23372390"]]),iN={class:"draggable-float"},oN={name:"DraggableItemFloat"},aN=_r({...oN,props:{...ab,...ub,...ib,top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:[Number,String],default:"auto"},maxHeight:{type:Number,default:500},headerLocation:{type:String,default:"top",validator:function(t){return["top","bottom"].includes(t)}}},emits:{...sb,...cb},setup(t,{emit:e}){const{CloseIcon:n,ToBackIcon:a,ToFrontIcon:s,ExpandedIcon:l,CloseExpandedIcon:i}=Ny(),f=t,m=e,y=As("containerId",on(f.containerId||""));if(!y.value)throw"Not set container id";const{show:x}=ob(f,m),{zIndex:A,itemId:w}=nb(y.value,x),{isLast:E,isFirst:L,isHasItems:k,onToBack:z,onToFront:F}=rb(y.value,w.value),{expand:D,toggle:B}=lb(f,m,!0),{componentCard:U,componentCardHeader:$}=eb({...f,containerId:y.value});function q(){x.value=!1}const tt=hn(()=>{let rt={};return rt.zIndex=A.value,f.top&&(rt.top=f.top+"px"),f.left&&(rt.left=f.left+"px"),f.right&&(rt.right=f.right+"px"),f.bottom&&(rt.bottom=f.bottom+"px"),f.width&&f.width!="auto"&&(f.width&&!isNaN(+f.width)?rt.width=f.width+"px":rt.width=f.width),rt}),Y=hn(()=>{let rt={};return rt.maxHeight=f.maxHeight+"px",rt}),G=hn(()=>!f.width||f.width=="auto");return(rt,pt)=>at(x)?(Ct(),le("div",{key:0,class:mo(["float-container",{"auto-float-container":G.value}]),style:Ni(tt.value)},[(Ct(),$e(Ga(at(U)),null,{default:Ce(()=>[kt("div",iN,[!rt.disabledHeader&&t.headerLocation==="top"?(Ct(),$e(Ga(at($)),{key:0},{title:Ce(()=>[Zn(rt.$slots,"title",{},()=>[_a(Mn(rt.title),1)],!0)]),"extra-btn":Ce(()=>[Zn(rt.$slots,"extra-btn",{},void 0,!0),Jt(bs,{onClick:at(B)},{default:Ce(()=>[at(D)?(Ct(),$e(at(l),{key:0,size:16})):(Ct(),$e(at(i),{key:1,size:16}))]),_:1},8,["onClick"]),at(k)&&!rt.disabledOrder?(Ct(),le(Mr,{key:0},[Jt(bs,{disabled:at(L),onClick:pt[0]||(pt[0]=Q=>at(z)())},{default:Ce(()=>[Jt(at(a),{size:16})]),_:1},8,["disabled"]),Jt(bs,{disabled:at(E),onClick:pt[1]||(pt[1]=Q=>at(F)())},{default:Ce(()=>[Jt(at(s),{size:16})]),_:1},8,["disabled"])],64)):mn("",!0),rt.disabledClose?mn("",!0):(Ct(),$e(bs,{key:1,onClick:q},{default:Ce(()=>[Jt(at(n),{size:16})]),_:1}))]),_:3})):mn("",!0),Du(kt("div",{class:"draggable-float-content",style:Ni(Y.value)},[Zn(rt.$slots,"default",{},void 0,!0)],4),[[F_,at(D)]]),!rt.disabledHeader&&t.headerLocation==="bottom"?(Ct(),$e(Ga(at($)),{key:1},{title:Ce(()=>[Zn(rt.$slots,"title",{},()=>[_a(Mn(rt.title),1)],!0)]),"extra-btn":Ce(()=>[Zn(rt.$slots,"extra-btn",{},void 0,!0),Jt(bs,{onClick:at(B)},{default:Ce(()=>[at(D)?(Ct(),$e(at(l),{key:0,size:16})):(Ct(),$e(at(i),{key:1,size:16}))]),_:1},8,["onClick"]),at(k)&&!rt.disabledOrder?(Ct(),le(Mr,{key:0},[Jt(bs,{disabled:at(L),onClick:pt[2]||(pt[2]=Q=>at(z)())},{default:Ce(()=>[Jt(at(a),{size:16})]),_:1},8,["disabled"]),Jt(bs,{disabled:at(E),onClick:pt[3]||(pt[3]=Q=>at(F)())},{default:Ce(()=>[Jt(at(s),{size:16})]),_:1},8,["disabled"])],64)):mn("",!0),rt.disabledClose?mn("",!0):(Ct(),$e(bs,{key:1,onClick:q},{default:Ce(()=>[Jt(at(n),{size:16})]),_:1}))]),_:3})):mn("",!0)])]),_:3}))],6)):mn("",!0)}}),sN=Yn(aN,[["__scopeId","data-v-ecbbe79b"]]),lN={class:"draggable-bottom"},uN={class:"draggable-bottom-content"},cN={name:"DraggableItemBottom"},hN=_r({...cN,props:{...ab,...ub,...ib},emits:{...sb,...cb},setup(t,{emit:e}){const{CloseIcon:n,ToBackIcon:a,FullscreenIcon:s,OffFullscreenIcon:l}=Ny(),i=t,f=e,m=As("containerId",on(i.containerId||""));if(!m.value)throw"Not set container id";const{show:y}=ob(i,f),{zIndex:x,itemId:A}=nb(m.value,y),{isFirst:w,isHasItems:E,onToBack:L}=rb(m.value,A.value),{expand:k,toggle:z}=lb(i,f,!1),{componentCard:F,componentCardHeader:D}=eb({...i,containerId:m.value});function B(){y.value=!1}const U=hn(()=>{let $={};return $.zIndex=x.value,$.height=k.value?"100%":"45%",$});return($,q)=>at(y)?(Ct(),le("div",{key:0,class:"popup-mobile-container",style:Ni(U.value)},[(Ct(),$e(Ga(at(F)),null,{default:Ce(()=>[kt("div",lN,[$.disabledHeader?mn("",!0):(Ct(),$e(Ga(at(D)),{key:0},{title:Ce(()=>[Zn($.$slots,"title",{},()=>[_a(Mn($.title),1)],!0)]),"extra-btn":Ce(()=>[Zn($.$slots,"extra-btn",{},void 0,!0),at(E)&&!$.disabledOrder?(Ct(),$e(bs,{key:0,disabled:at(w),onClick:q[0]||(q[0]=oo(tt=>at(L)(),["prevent","stop"]))},{default:Ce(()=>[Jt(at(a),{size:16})]),_:1},8,["disabled"])):mn("",!0),Jt(bs,{onClick:q[1]||(q[1]=tt=>at(z)())},{default:Ce(()=>[at(k)?(Ct(),$e(at(s),{key:0,size:16})):(Ct(),$e(at(l),{key:1,size:16}))]),_:1}),$.disabledClose?mn("",!0):(Ct(),$e(bs,{key:1,onClick:B},{default:Ce(()=>[Jt(at(n),{size:16})]),_:1}))]),_:3})),kt("div",uN,[Zn($.$slots,"default",{},void 0,!0)])])]),_:3}))],4)):mn("",!0)}}),Hw=Yn(hN,[["__scopeId","data-v-5c196e37"]]);function Gw(t,e){return _r({name:"WithMobileHandle"+t.name,props:{containerId:String},setup(n){const a=As("containerId",on(n.containerId||"")),s=hn(()=>ti.getters.getIsMobile(a.value));return{p_containerId:a,isMobile:s}},render(){return this.isMobile?Ld(e,{...this.$attrs,containerId:this.p_containerId},this.$slots):Ld(t,{...this.$attrs,containerId:this.p_containerId},this.$slots)}})}const JM=Gw(VF,Hw),jd=Gw(rN,Hw),fN=Gw(sN,Hw),bo=(t={},e,n)=>{const a=As("$map.id"),s=hn(()=>t.mapId||a);$a(()=>{Sd.getMap(s.value,async f=>{e instanceof Function&&await e(f)})}),Pf(async()=>{n instanceof Function&&Sd.getMap(s.value,async f=>{e instanceof Function&&await n(f)})});function l(f){return Sd.getMap(s.value,f)}const i={mapId:t.mapId,dragId:t.dragId,btnWidth:t.btnWidth,position:t.position,controlVisible:t.controlVisible,order:t.order};return{callMap:l,mapId:s,moduleContainerProps:i}},qa={mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}};function Rd(t=!1){const e=on(t);function n(a){if(a!=null){e.value=!!a;return}e.value=!e.value}return[e,n]}const tT=n6({show:Boolean},"show"),dN={class:"module__container"},pN={name:"ModuleContainer"},mN=Object.assign(pN,{props:{mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}},setup(t){const e=JE(),n=t,a=hn(()=>!!e.btn),s=hn(()=>!!e.draggable),l=As("$map.dragId"),i=As("$map.id"),f=hn(()=>n.dragId||l),m=hn(()=>n.mapId||i),y=hn(()=>`#map-draggable-${m.value}`),x=hn(()=>`#${n.position}-${m.value}`),A=hn(()=>{let w={};return n.position.includes("left")&&(w.left=18+n.btnWidth),n.position.includes("right")&&(w.right=18+n.btnWidth),n.position.includes("top")&&(w.top=10),n.position.includes("bottom")&&(w.bottom=10),w.containerId=f.value,w});return(w,E)=>(Ct(),le("div",dN,[t.controlVisible&&a.value?(Ct(),$e(bA,{key:0,to:x.value},[Zn(w.$slots,"btn",{},void 0,!0)],8,["to"])):mn("",!0),Zn(w.$slots,"default",{},void 0,!0),f.value&&s.value?(Ct(),$e(bA,{key:1,to:y.value},[Zn(w.$slots,"draggable",Za(ka(A.value)),void 0,!0)],8,["to"])):mn("",!0)]))}}),ss=Yn(mN,[["__scopeId","data-v-35db38a4"]]);var eT={exports:{}};(function(t,e){(function(n,a){t.exports=a()})(ca,function(){var n,a,s;function l(i,f){if(!n)n=f;else if(!a)a=f;else{var m="var sharedChunk = {}; ("+n+")(sharedChunk); ("+a+")(sharedChunk);",y={};n(y),s=f(y),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([m],{type:"text/javascript"})))}}return l(["exports"],function(i){function f(r,o){return r(o={exports:{}},o.exports),o.exports}var m=y;function y(r,o,u,g){this.cx=3*r,this.bx=3*(u-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(g-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=g,this.p2x=u,this.p2y=g}y.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},y.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},y.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},y.prototype.solveCurveX=function(r,o){var u,g,b,C,S;for(o===void 0&&(o=1e-6),b=r,S=0;S<8;S++){if(C=this.sampleCurveX(b)-r,Math.abs(C)<o)return b;var R=this.sampleCurveDerivativeX(b);if(Math.abs(R)<1e-6)break;b-=C/R}if((b=r)<(u=0))return u;if(b>(g=1))return g;for(;u<g;){if(C=this.sampleCurveX(b),Math.abs(C-r)<o)return b;r>C?u=b:g=b,b=.5*(g-u)+u}return b},y.prototype.solve=function(r,o){return this.sampleCurveY(this.solveCurveX(r,o))};var x=A;function A(r,o){this.x=r,this.y=o}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,o){return this.clone()._rotateAround(r,o)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var o=r.x-this.x,u=r.y-this.y;return o*o+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,o){return Math.atan2(this.x*o-this.y*r,this.x*r+this.y*o)},_matMult:function(r){var o=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=o,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var o=Math.cos(r),u=Math.sin(r),g=u*this.x+o*this.y;return this.x=o*this.x-u*this.y,this.y=g,this},_rotateAround:function(r,o){var u=Math.cos(r),g=Math.sin(r),b=o.y+g*(this.x-o.x)+u*(this.y-o.y);return this.x=o.x+u*(this.x-o.x)-g*(this.y-o.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(r){return r instanceof A?r:Array.isArray(r)?new A(r[0],r[1]):r};var w=typeof self<"u"?self:{},E=Math.pow(2,53)-1;function L(r,o,u,g){var b=new m(r,o,u,g);return function(C){return b.solve(C)}}var k=L(.25,.1,.25,1);function z(r,o,u){return Math.min(u,Math.max(o,r))}function F(r,o,u){var g=u-o,b=((r-o)%g+g)%g+o;return b===o?u:b}function D(r){for(var o=[],u=arguments.length-1;u-- >0;)o[u]=arguments[u+1];for(var g=0,b=o;g<b.length;g+=1){var C=b[g];for(var S in C)r[S]=C[S]}return r}var B=1;function U(){return B++}function $(){return function r(o){return o?(o^16*Math.random()>>o/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function q(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function tt(r,o){r.forEach(function(u){o[u]&&(o[u]=o[u].bind(o))})}function Y(r,o){return r.indexOf(o,r.length-o.length)!==-1}function G(r,o,u){var g={};for(var b in r)g[b]=o.call(u||this,r[b],b,r);return g}function rt(r,o,u){var g={};for(var b in r)o.call(u||this,r[b],b,r)&&(g[b]=r[b]);return g}function pt(r){return Array.isArray(r)?r.map(pt):typeof r=="object"&&r?G(r,pt):r}var Q={};function ot(r){Q[r]||(typeof console<"u"&&console.warn(r),Q[r]=!0)}function Z(r,o,u){return(u.y-r.y)*(o.x-r.x)>(o.y-r.y)*(u.x-r.x)}function Kt(r){for(var o=0,u=0,g=r.length,b=g-1,C=void 0,S=void 0;u<g;b=u++)o+=((S=r[b]).x-(C=r[u]).x)*(C.y+S.y);return o}function Ft(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Tt(r){var o={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(g,b,C,S){var R=C||S;return o[b]=!R||R.toLowerCase(),""}),o["max-age"]){var u=parseInt(o["max-age"],10);isNaN(u)?delete o["max-age"]:o["max-age"]=u}return o}var ie=null;function ue(r){if(ie==null){var o=r.navigator?r.navigator.userAgent:null;ie=!!r.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return ie}function je(r){try{var o=w[r];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}var jt,Ut,xe,Fe,we=w.performance&&w.performance.now?w.performance.now.bind(w.performance):Date.now.bind(Date),qe=w.requestAnimationFrame||w.mozRequestAnimationFrame||w.webkitRequestAnimationFrame||w.msRequestAnimationFrame,fe=w.cancelAnimationFrame||w.mozCancelAnimationFrame||w.webkitCancelAnimationFrame||w.msCancelAnimationFrame,ge={now:we,frame:function(r){var o=qe(r);return{cancel:function(){return fe(o)}}},getImageData:function(r,o){o===void 0&&(o=0);var u=w.document.createElement("canvas"),g=u.getContext("2d");if(!g)throw new Error("failed to create canvas 2d context");return u.width=r.width,u.height=r.height,g.drawImage(r,0,0,r.width,r.height),g.getImageData(-o,-o,r.width+2*o,r.height+2*o)},resolveURL:function(r){return jt||(jt=w.document.createElement("a")),jt.href=r,jt.href},hardwareConcurrency:w.navigator&&w.navigator.hardwareConcurrency||4,get devicePixelRatio(){return w.devicePixelRatio},get prefersReducedMotion(){return!!w.matchMedia&&(Ut==null&&(Ut=w.matchMedia("(prefers-reduced-motion: reduce)")),Ut.matches)}},ne={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Se={supported:!1,testSupport:function(r){!We&&Fe&&(In?_t(r):xe=r)}},We=!1,In=!1;function _t(r){var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,Fe),r.isContextLost())return;Se.supported=!0}catch{}r.deleteTexture(o),We=!0}w.document&&((Fe=w.document.createElement("img")).onload=function(){xe&&_t(xe),xe=null,In=!0},Fe.onerror=function(){We=!0,xe=null},Fe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var N="01",Et=function(r,o){this._transformRequestFn=r,this._customAccessToken=o,this._createSkuToken()};function wt(r){return r.indexOf("mapbox:")===0}Et.prototype._createSkuToken=function(){var r=function(){for(var o="",u=0;u<10;u++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",N,o].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt},Et.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Et.prototype.transformRequest=function(r,o){return this._transformRequestFn&&this._transformRequestFn(r,o)||{url:r}},Et.prototype.normalizeStyleURL=function(r,o){if(!wt(r))return r;var u=Wt(r);return u.path="/styles/v1"+u.path,this._makeAPIURL(u,this._customAccessToken||o)},Et.prototype.normalizeGlyphsURL=function(r,o){if(!wt(r))return r;var u=Wt(r);return u.path="/fonts/v1"+u.path,this._makeAPIURL(u,this._customAccessToken||o)},Et.prototype.normalizeSourceURL=function(r,o){if(!wt(r))return r;var u=Wt(r);return u.path="/v4/"+u.authority+".json",u.params.push("secure"),this._makeAPIURL(u,this._customAccessToken||o)},Et.prototype.normalizeSpriteURL=function(r,o,u,g){var b=Wt(r);return wt(r)?(b.path="/styles/v1"+b.path+"/sprite"+o+u,this._makeAPIURL(b,this._customAccessToken||g)):(b.path+=""+o+u,ee(b))},Et.prototype.normalizeTileURL=function(r,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!wt(r))return r;var u=Wt(r);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ge.devicePixelRatio>=2||o===512?"@2x":"")+(Se.supported?".webp":"$1")),u.path=u.path.replace(/^.+\/v4\//,"/"),u.path="/v4"+u.path;var g=this._customAccessToken||function(b){for(var C=0,S=b;C<S.length;C+=1){var R=S[C].match(/^access_token=(.*)$/);if(R)return R[1]}return null}(u.params)||ne.ACCESS_TOKEN;return ne.REQUIRE_ACCESS_TOKEN&&g&&this._skuToken&&u.params.push("sku="+this._skuToken),this._makeAPIURL(u,g)},Et.prototype.canonicalizeTileURL=function(r,o){var u=Wt(r);if(!u.path.match(/(^\/v4\/)/)||!u.path.match(/\.[\w]+$/))return r;var g="mapbox://tiles/";g+=u.path.replace("/v4/","");var b=u.params;return o&&(b=b.filter(function(C){return!C.match(/^access_token=/)})),b.length&&(g+="?"+b.join("&")),g},Et.prototype.canonicalizeTileset=function(r,o){for(var u=!!o&&wt(o),g=[],b=0,C=r.tiles||[];b<C.length;b+=1){var S=C[b];lt(S)?g.push(this.canonicalizeTileURL(S,u)):g.push(S)}return g},Et.prototype._makeAPIURL=function(r,o){var u="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",g=Wt(ne.API_URL);if(r.protocol=g.protocol,r.authority=g.authority,r.protocol==="http"){var b=r.params.indexOf("secure");b>=0&&r.params.splice(b,1)}if(g.path!=="/"&&(r.path=""+g.path+r.path),!ne.REQUIRE_ACCESS_TOKEN)return ee(r);if(!(o=o||ne.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+u);if(o[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+u);return r.params=r.params.filter(function(C){return C.indexOf("access_token")===-1}),r.params.push("access_token="+o),ee(r)};var ht=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function lt(r){return ht.test(r)}var Pt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Wt(r){var o=r.match(Pt);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function ee(r){var o=r.params.length?"?"+r.params.join("&"):"";return r.protocol+"://"+r.authority+r.path+o}function Dt(r){if(!r)return null;var o=r.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(decodeURIComponent(w.atob(o[1]).split("").map(function(u){return"%"+("00"+u.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var ve=function(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ve.prototype.getStorageKey=function(r){var o,u=Dt(ne.ACCESS_TOKEN);return o=u&&u.u?w.btoa(encodeURIComponent(u.u).replace(/%([0-9A-F]{2})/g,function(g,b){return String.fromCharCode(+("0x"+b))})):ne.ACCESS_TOKEN||"",r?"mapbox.eventData."+r+":"+o:"mapbox.eventData:"+o},ve.prototype.fetchEventData=function(){var r=je("localStorage"),o=this.getStorageKey(),u=this.getStorageKey("uuid");if(r)try{var g=w.localStorage.getItem(o);g&&(this.eventData=JSON.parse(g));var b=w.localStorage.getItem(u);b&&(this.anonId=b)}catch{ot("Unable to read from LocalStorage")}},ve.prototype.saveEventData=function(){var r=je("localStorage"),o=this.getStorageKey(),u=this.getStorageKey("uuid");if(r)try{w.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&w.localStorage.setItem(o,JSON.stringify(this.eventData))}catch{ot("Unable to write to LocalStorage")}},ve.prototype.processRequests=function(r){},ve.prototype.postEvent=function(r,o,u,g){var b=this;if(ne.EVENTS_URL){var C=Wt(ne.EVENTS_URL);C.params.push("access_token="+(g||ne.ACCESS_TOKEN||""));var S={event:this.type,created:new Date(r).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:N,userId:this.anonId},R=o?D(S,o):S,j={url:ee(C),headers:{"Content-Type":"text/plain"},body:JSON.stringify([R])};this.pendingRequest=Zi(j,function(K){b.pendingRequest=null,u(K),b.saveEventData(),b.processRequests(g)})}},ve.prototype.queueRequest=function(r,o){this.queue.push(r),this.processRequests(o)};var Te,Ae,De=function(r){function o(){r.call(this,"map.load"),this.success={},this.skuToken=""}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.postMapLoadEvent=function(u,g,b,C){this.skuToken=b;var S=!(!C&&!ne.ACCESS_TOKEN),R=Array.isArray(u)&&u.some(function(j){return wt(j)||lt(j)});ne.EVENTS_URL&&S&&R&&this.queueRequest({id:g,timestamp:Date.now()},C)},o.prototype.processRequests=function(u){var g=this;if(!this.pendingRequest&&this.queue.length!==0){var b=this.queue.shift(),C=b.id,S=b.timestamp;C&&this.success[C]||(this.anonId||this.fetchEventData(),q(this.anonId)||(this.anonId=$()),this.postEvent(S,{skuToken:this.skuToken},function(R){R||C&&(g.success[C]=!0)},u))}},o}(ve),un=new(function(r){function o(u){r.call(this,"appUserTurnstile"),this._customAccessToken=u}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.postTurnstileEvent=function(u,g){ne.EVENTS_URL&&ne.ACCESS_TOKEN&&Array.isArray(u)&&u.some(function(b){return wt(b)||lt(b)})&&this.queueRequest(Date.now(),g)},o.prototype.processRequests=function(u){var g=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var b=Dt(ne.ACCESS_TOKEN),C=b?b.u:ne.ACCESS_TOKEN,S=C!==this.eventData.tokenU;q(this.anonId)||(this.anonId=$(),S=!0);var R=this.queue.shift();if(this.eventData.lastSuccess){var j=new Date(this.eventData.lastSuccess),K=new Date(R),J=(R-this.eventData.lastSuccess)/864e5;S=S||J>=1||J<-1||j.getDate()!==K.getDate()}else S=!0;if(!S)return this.processRequests();this.postEvent(R,{"enabled.telemetry":!1},function(nt){nt||(g.eventData.lastSuccess=R,g.eventData.tokenU=C)},u)}},o}(ve)),gn=un.postTurnstileEvent.bind(un),re=new De,ce=re.postMapLoadEvent.bind(re),_e=500,Ue=50;function en(){w.caches&&!Te&&(Te=w.caches.open("mapbox-tiles"))}function Un(r){var o=r.indexOf("?");return o<0?r:r.slice(0,o)}var lr,Gn=1/0;function zr(){return lr==null&&(lr=w.OffscreenCanvas&&new w.OffscreenCanvas(1,1).getContext("2d")&&typeof w.createImageBitmap=="function"),lr}var ur={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ur);var Fn=function(r){function o(u,g,b){g===401&&lt(b)&&(u+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),r.call(this,u),this.status=g,this.url=b,this.name=this.constructor.name,this.message=u}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},o}(Error),Jn=Ft()?function(){return self.worker&&self.worker.referrer}:function(){return(w.location.protocol==="blob:"?w.parent:w).location.href},gr,rr,Mi=function(r,o){if(!(/^file:/.test(u=r.url)||/^file:/.test(Jn())&&!/^\w+:/.test(u))){if(w.fetch&&w.Request&&w.AbortController&&w.Request.prototype.hasOwnProperty("signal"))return function(g,b){var C,S=new w.AbortController,R=new w.Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,referrer:Jn(),signal:S.signal}),j=!1,K=!1,J=(C=R.url).indexOf("sku=")>0&&lt(C);g.type==="json"&&R.headers.set("Accept","application/json");var nt=function(mt,St,Ot){if(!K){if(mt&&mt.message!=="SecurityError"&&ot(mt),St&&Ot)return ct(St);var Zt=Date.now();w.fetch(R).then(function(Vt){if(Vt.ok){var se=J?Vt.clone():null;return ct(Vt,se,Zt)}return b(new Fn(Vt.statusText,Vt.status,g.url))}).catch(function(Vt){Vt.code!==20&&b(new Error(Vt.message))})}},ct=function(mt,St,Ot){(g.type==="arrayBuffer"?mt.arrayBuffer():g.type==="json"?mt.json():mt.text()).then(function(Zt){K||(St&&Ot&&function(Vt,se,ye){if(en(),Te){var Ee={status:se.status,statusText:se.statusText,headers:new w.Headers};se.headers.forEach(function(Ne,Je){return Ee.headers.set(Je,Ne)});var Pe=Tt(se.headers.get("Cache-Control")||"");Pe["no-store"]||(Pe["max-age"]&&Ee.headers.set("Expires",new Date(ye+1e3*Pe["max-age"]).toUTCString()),new Date(Ee.headers.get("Expires")).getTime()-ye<42e4||function(Ne,Je){if(Ae===void 0)try{new Response(new ReadableStream),Ae=!0}catch{Ae=!1}Ae?Je(Ne.body):Ne.blob().then(Je)}(se,function(Ne){var Je=new w.Response(Ne,Ee);en(),Te&&Te.then(function(cn){return cn.put(Un(Vt.url),Je)}).catch(function(cn){return ot(cn.message)})}))}}(R,St,Ot),j=!0,b(null,Zt,mt.headers.get("Cache-Control"),mt.headers.get("Expires")))}).catch(function(Zt){K||b(new Error(Zt.message))})};return J?function(mt,St){if(en(),!Te)return St(null);var Ot=Un(mt.url);Te.then(function(Zt){Zt.match(Ot).then(function(Vt){var se=function(ye){if(!ye)return!1;var Ee=new Date(ye.headers.get("Expires")||0),Pe=Tt(ye.headers.get("Cache-Control")||"");return Ee>Date.now()&&!Pe["no-cache"]}(Vt);Zt.delete(Ot),se&&Zt.put(Ot,Vt.clone()),St(null,Vt,se)}).catch(St)}).catch(St)}(R,nt):nt(null,null),{cancel:function(){K=!0,j||S.abort()}}}(r,o);if(Ft()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,o,void 0,!0)}var u;return function(g,b){var C=new w.XMLHttpRequest;for(var S in C.open(g.method||"GET",g.url,!0),g.type==="arrayBuffer"&&(C.responseType="arraybuffer"),g.headers)C.setRequestHeader(S,g.headers[S]);return g.type==="json"&&(C.responseType="text",C.setRequestHeader("Accept","application/json")),C.withCredentials=g.credentials==="include",C.onerror=function(){b(new Error(C.statusText))},C.onload=function(){if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){var R=C.response;if(g.type==="json")try{R=JSON.parse(C.response)}catch(j){return b(j)}b(null,R,C.getResponseHeader("Cache-Control"),C.getResponseHeader("Expires"))}else b(new Fn(C.statusText,C.status,g.url))},C.send(g.body),{cancel:function(){return C.abort()}}}(r,o)},Ns=function(r,o){return Mi(D(r,{type:"arrayBuffer"}),o)},Zi=function(r,o){return Mi(D(r,{method:"POST"}),o)},et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";gr=[],rr=0;var ut=function(r,o){if(Se.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),rr>=ne.MAX_PARALLEL_IMAGE_REQUESTS){var u={requestParameters:r,callback:o,cancelled:!1,cancel:function(){this.cancelled=!0}};return gr.push(u),u}rr++;var g=!1,b=function(){if(!g)for(g=!0,rr--;gr.length&&rr<ne.MAX_PARALLEL_IMAGE_REQUESTS;){var S=gr.shift();S.cancelled||(S.cancel=ut(S.requestParameters,S.callback).cancel)}},C=Ns(r,function(S,R,j,K){b(),S?o(S):R&&(zr()?function(J,nt){var ct=new w.Blob([new Uint8Array(J)],{type:"image/png"});w.createImageBitmap(ct).then(function(mt){nt(null,mt)}).catch(function(mt){nt(new Error("Could not load image because of "+mt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(R,o):function(J,nt,ct,mt){var St=new w.Image,Ot=w.URL;St.onload=function(){nt(null,St),Ot.revokeObjectURL(St.src),St.onload=null,w.requestAnimationFrame(function(){St.src=et})},St.onerror=function(){return nt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Zt=new w.Blob([new Uint8Array(J)],{type:"image/png"});St.cacheControl=ct,St.expires=mt,St.src=J.byteLength?Ot.createObjectURL(Zt):et}(R,o,j,K))});return{cancel:function(){C.cancel(),b()}}};function dt(r,o,u){u[r]&&u[r].indexOf(o)!==-1||(u[r]=u[r]||[],u[r].push(o))}function At(r,o,u){if(u&&u[r]){var g=u[r].indexOf(o);g!==-1&&u[r].splice(g,1)}}var Rt=function(r,o){o===void 0&&(o={}),D(this,o),this.type=r},qt=function(r){function o(u,g){g===void 0&&(g={}),r.call(this,"error",D({error:u},g))}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o}(Rt),te=function(){};te.prototype.on=function(r,o){return this._listeners=this._listeners||{},dt(r,o,this._listeners),this},te.prototype.off=function(r,o){return At(r,o,this._listeners),At(r,o,this._oneTimeListeners),this},te.prototype.once=function(r,o){return this._oneTimeListeners=this._oneTimeListeners||{},dt(r,o,this._oneTimeListeners),this},te.prototype.fire=function(r,o){typeof r=="string"&&(r=new Rt(r,o||{}));var u=r.type;if(this.listens(u)){r.target=this;for(var g=0,b=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];g<b.length;g+=1)b[g].call(this,r);for(var C=0,S=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];C<S.length;C+=1){var R=S[C];At(u,R,this._oneTimeListeners),R.call(this,r)}var j=this._eventedParent;j&&(D(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),j.fire(r))}else r instanceof qt&&console.error(r.error);return this},te.prototype.listens=function(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)},te.prototype.setEventedParent=function(r,o){return this._eventedParent=r,this._eventedParentData=o,this};var gt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Nt=function(r,o,u,g){this.message=(r?r+": ":"")+u,g&&(this.identifier=g),o!=null&&o.__line__&&(this.line=o.__line__)};function me(r){var o=r.value;return o?[new Nt(r.key,o,"constants have been deprecated as of v8")]:[]}function Ve(r){for(var o=[],u=arguments.length-1;u-- >0;)o[u]=arguments[u+1];for(var g=0,b=o;g<b.length;g+=1){var C=b[g];for(var S in C)r[S]=C[S]}return r}function Ke(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Le(r){if(Array.isArray(r))return r.map(Le);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var o={};for(var u in r)o[u]=Le(r[u]);return o}return Ke(r)}var Ge=function(r){function o(u,g){r.call(this,g),this.message=g,this.key=u}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o}(Error),kn=function(r,o){o===void 0&&(o=[]),this.parent=r,this.bindings={};for(var u=0,g=o;u<g.length;u+=1){var b=g[u];this.bindings[b[0]]=b[1]}};kn.prototype.concat=function(r){return new kn(this,r)},kn.prototype.get=function(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(r+" not found in scope.")},kn.prototype.has=function(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)};var Tn={kind:"null"},Re={kind:"number"},an={kind:"string"},dn={kind:"boolean"},pn={kind:"color"},Er={kind:"object"},bn={kind:"value"},jr={kind:"collator"},ei={kind:"formatted"},Lr={kind:"resolvedImage"};function Ur(r,o){return{kind:"array",itemType:r,N:o}}function Vr(r){if(r.kind==="array"){var o=Vr(r.itemType);return typeof r.N=="number"?"array<"+o+", "+r.N+">":r.itemType.kind==="value"?"array":"array<"+o+">"}return r.kind}var Go=[Tn,Re,an,dn,pn,ei,Er,Ur(bn),Lr];function vr(r,o){if(o.kind==="error")return null;if(r.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!vr(r.itemType,o.itemType))&&(typeof r.N!="number"||r.N===o.N))return null}else{if(r.kind===o.kind)return null;if(r.kind==="value"){for(var u=0,g=Go;u<g.length;u+=1)if(!vr(g[u],o))return null}}return"Expected "+Vr(r)+" but found "+Vr(o)+" instead."}function $i(r,o){return o.some(function(u){return u.kind===r.kind})}function ui(r,o){return o.some(function(u){return u==="null"?r===null:u==="array"?Array.isArray(r):u==="object"?r&&!Array.isArray(r)&&typeof r=="object":u===typeof r})}var br=f(function(r,o){var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function g(R){return(R=Math.round(R))<0?0:R>255?255:R}function b(R){return g(R[R.length-1]==="%"?parseFloat(R)/100*255:parseInt(R))}function C(R){return(j=R[R.length-1]==="%"?parseFloat(R)/100:parseFloat(R))<0?0:j>1?1:j;var j}function S(R,j,K){return K<0?K+=1:K>1&&(K-=1),6*K<1?R+(j-R)*K*6:2*K<1?j:3*K<2?R+(j-R)*(2/3-K)*6:R}try{o.parseCSSColor=function(R){var j,K=R.replace(/ /g,"").toLowerCase();if(K in u)return u[K].slice();if(K[0]==="#")return K.length===4?(j=parseInt(K.substr(1),16))>=0&&j<=4095?[(3840&j)>>4|(3840&j)>>8,240&j|(240&j)>>4,15&j|(15&j)<<4,1]:null:K.length===7&&(j=parseInt(K.substr(1),16))>=0&&j<=16777215?[(16711680&j)>>16,(65280&j)>>8,255&j,1]:null;var J=K.indexOf("("),nt=K.indexOf(")");if(J!==-1&&nt+1===K.length){var ct=K.substr(0,J),mt=K.substr(J+1,nt-(J+1)).split(","),St=1;switch(ct){case"rgba":if(mt.length!==4)return null;St=C(mt.pop());case"rgb":return mt.length!==3?null:[b(mt[0]),b(mt[1]),b(mt[2]),St];case"hsla":if(mt.length!==4)return null;St=C(mt.pop());case"hsl":if(mt.length!==3)return null;var Ot=(parseFloat(mt[0])%360+360)%360/360,Zt=C(mt[1]),Vt=C(mt[2]),se=Vt<=.5?Vt*(Zt+1):Vt+Zt-Vt*Zt,ye=2*Vt-se;return[g(255*S(ye,se,Ot+1/3)),g(255*S(ye,se,Ot)),g(255*S(ye,se,Ot-1/3)),St];default:return null}}return null}}catch{}}).parseCSSColor,Tr=function(r,o,u,g){g===void 0&&(g=1),this.r=r,this.g=o,this.b=u,this.a=g};Tr.parse=function(r){if(r){if(r instanceof Tr)return r;if(typeof r=="string"){var o=br(r);if(o)return new Tr(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3])}}},Tr.prototype.toString=function(){var r=this.toArray(),o=r[1],u=r[2],g=r[3];return"rgba("+Math.round(r[0])+","+Math.round(o)+","+Math.round(u)+","+g+")"},Tr.prototype.toArray=function(){var r=this.a;return r===0?[0,0,0,0]:[255*this.r/r,255*this.g/r,255*this.b/r,r]},Tr.black=new Tr(0,0,0,1),Tr.white=new Tr(1,1,1,1),Tr.transparent=new Tr(0,0,0,0),Tr.red=new Tr(1,0,0,1);var Wo=function(r,o,u){this.sensitivity=r?o?"variant":"case":o?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Wo.prototype.compare=function(r,o){return this.collator.compare(r,o)},Wo.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ws=function(r,o,u,g,b){this.text=r,this.image=o,this.scale=u,this.fontStack=g,this.textColor=b},Ki=function(r){this.sections=r};Ki.fromString=function(r){return new Ki([new ws(r,null,null,null,null)])},Ki.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(r){return r.text.length!==0||r.image&&r.image.name.length!==0})},Ki.factory=function(r){return r instanceof Ki?r:Ki.fromString(r)},Ki.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(r){return r.text}).join("")},Ki.prototype.serialize=function(){for(var r=["format"],o=0,u=this.sections;o<u.length;o+=1){var g=u[o];if(g.image)r.push(["image",g.image.name]);else{r.push(g.text);var b={};g.fontStack&&(b["text-font"]=["literal",g.fontStack.split(",")]),g.scale&&(b["font-scale"]=g.scale),g.textColor&&(b["text-color"]=["rgba"].concat(g.textColor.toArray())),r.push(b)}}return r};var ta=function(r){this.name=r.name,this.available=r.available};function nh(r,o,u,g){return typeof r=="number"&&r>=0&&r<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof u=="number"&&u>=0&&u<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:"Invalid rgba value ["+[r,o,u,g].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof g=="number"?[r,o,u,g]:[r,o,u]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Fu(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Tr||r instanceof Wo||r instanceof Ki||r instanceof ta)return!0;if(Array.isArray(r)){for(var o=0,u=r;o<u.length;o+=1)if(!Fu(u[o]))return!1;return!0}if(typeof r=="object"){for(var g in r)if(!Fu(r[g]))return!1;return!0}return!1}function qi(r){if(r===null)return Tn;if(typeof r=="string")return an;if(typeof r=="boolean")return dn;if(typeof r=="number")return Re;if(r instanceof Tr)return pn;if(r instanceof Wo)return jr;if(r instanceof Ki)return ei;if(r instanceof ta)return Lr;if(Array.isArray(r)){for(var o,u=r.length,g=0,b=r;g<b.length;g+=1){var C=qi(b[g]);if(o){if(o===C)continue;o=bn;break}o=C}return Ur(o||bn,u)}return Er}function Nu(r){var o=typeof r;return r===null?"":o==="string"||o==="number"||o==="boolean"?String(r):r instanceof Tr||r instanceof Ki||r instanceof ta?r.toString():JSON.stringify(r)}ta.prototype.toString=function(){return this.name},ta.fromString=function(r){return r?new ta({name:r,available:!1}):null},ta.prototype.serialize=function(){return["image",this.name]};var zo=function(r,o){this.type=r,this.value=o};zo.parse=function(r,o){if(r.length!==2)return o.error("'literal' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(!Fu(r[1]))return o.error("invalid value");var u=r[1],g=qi(u),b=o.expectedType;return g.kind!=="array"||g.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(g=b),new zo(g,u)},zo.prototype.evaluate=function(){return this.value},zo.prototype.eachChild=function(){},zo.prototype.outputDefined=function(){return!0},zo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Tr?["rgba"].concat(this.value.toArray()):this.value instanceof Ki?this.value.serialize():this.value};var ao=function(r){this.name="ExpressionEvaluationError",this.message=r};ao.prototype.toJSON=function(){return this.message};var La={string:an,number:Re,boolean:dn,object:Er},Di=function(r,o){this.type=r,this.args=o};Di.parse=function(r,o){if(r.length<2)return o.error("Expected at least one argument.");var u,g=1,b=r[0];if(b==="array"){var C,S;if(r.length>2){var R=r[1];if(typeof R!="string"||!(R in La)||R==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);C=La[R],g++}else C=bn;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return o.error('The length argument to "array" must be a positive integer literal',2);S=r[2],g++}u=Ur(C,S)}else u=La[b];for(var j=[];g<r.length;g++){var K=o.parse(r[g],g,bn);if(!K)return null;j.push(K)}return new Di(u,j)},Di.prototype.evaluate=function(r){for(var o=0;o<this.args.length;o++){var u=this.args[o].evaluate(r);if(!vr(this.type,qi(u)))return u;if(o===this.args.length-1)throw new ao("Expected value to be of type "+Vr(this.type)+", but found "+Vr(qi(u))+" instead.")}return null},Di.prototype.eachChild=function(r){this.args.forEach(r)},Di.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},Di.prototype.serialize=function(){var r=this.type,o=[r.kind];if(r.kind==="array"){var u=r.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){o.push(u.kind);var g=r.N;(typeof g=="number"||this.args.length>1)&&o.push(g)}}return o.concat(this.args.map(function(b){return b.serialize()}))};var us=function(r){this.type=ei,this.sections=r};us.parse=function(r,o){if(r.length<2)return o.error("Expected at least one argument.");var u=r[1];if(!Array.isArray(u)&&typeof u=="object")return o.error("First argument must be an image or text section.");for(var g=[],b=!1,C=1;C<=r.length-1;++C){var S=r[C];if(b&&typeof S=="object"&&!Array.isArray(S)){b=!1;var R=null;if(S["font-scale"]&&!(R=o.parse(S["font-scale"],1,Re)))return null;var j=null;if(S["text-font"]&&!(j=o.parse(S["text-font"],1,Ur(an))))return null;var K=null;if(S["text-color"]&&!(K=o.parse(S["text-color"],1,pn)))return null;var J=g[g.length-1];J.scale=R,J.font=j,J.textColor=K}else{var nt=o.parse(r[C],1,bn);if(!nt)return null;var ct=nt.type.kind;if(ct!=="string"&&ct!=="value"&&ct!=="null"&&ct!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,g.push({content:nt,scale:null,font:null,textColor:null})}}return new us(g)},us.prototype.evaluate=function(r){return new Ki(this.sections.map(function(o){var u=o.content.evaluate(r);return qi(u)===Lr?new ws("",u,null,null,null):new ws(Nu(u),null,o.scale?o.scale.evaluate(r):null,o.font?o.font.evaluate(r).join(","):null,o.textColor?o.textColor.evaluate(r):null)}))},us.prototype.eachChild=function(r){for(var o=0,u=this.sections;o<u.length;o+=1){var g=u[o];r(g.content),g.scale&&r(g.scale),g.font&&r(g.font),g.textColor&&r(g.textColor)}},us.prototype.outputDefined=function(){return!1},us.prototype.serialize=function(){for(var r=["format"],o=0,u=this.sections;o<u.length;o+=1){var g=u[o];r.push(g.content.serialize());var b={};g.scale&&(b["font-scale"]=g.scale.serialize()),g.font&&(b["text-font"]=g.font.serialize()),g.textColor&&(b["text-color"]=g.textColor.serialize()),r.push(b)}return r};var Oa=function(r){this.type=Lr,this.input=r};Oa.parse=function(r,o){if(r.length!==2)return o.error("Expected two arguments.");var u=o.parse(r[1],1,an);return u?new Oa(u):o.error("No image name provided.")},Oa.prototype.evaluate=function(r){var o=this.input.evaluate(r),u=ta.fromString(o);return u&&r.availableImages&&(u.available=r.availableImages.indexOf(o)>-1),u},Oa.prototype.eachChild=function(r){r(this.input)},Oa.prototype.outputDefined=function(){return!1},Oa.prototype.serialize=function(){return["image",this.input.serialize()]};var cu={"to-boolean":dn,"to-color":pn,"to-number":Re,"to-string":an},T=function(r,o){this.type=r,this.args=o};T.parse=function(r,o){if(r.length<2)return o.error("Expected at least one argument.");var u=r[0];if((u==="to-boolean"||u==="to-string")&&r.length!==2)return o.error("Expected one argument.");for(var g=cu[u],b=[],C=1;C<r.length;C++){var S=o.parse(r[C],C,bn);if(!S)return null;b.push(S)}return new T(g,b)},T.prototype.evaluate=function(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){for(var o,u,g=0,b=this.args;g<b.length;g+=1){if(u=null,(o=b[g].evaluate(r))instanceof Tr)return o;if(typeof o=="string"){var C=r.parseColor(o);if(C)return C}else if(Array.isArray(o)&&!(u=o.length<3||o.length>4?"Invalid rbga value "+JSON.stringify(o)+": expected an array containing either three or four numeric values.":nh(o[0],o[1],o[2],o[3])))return new Tr(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new ao(u||"Could not parse color from value '"+(typeof o=="string"?o:String(JSON.stringify(o)))+"'")}if(this.type.kind==="number"){for(var S=null,R=0,j=this.args;R<j.length;R+=1){if((S=j[R].evaluate(r))===null)return 0;var K=Number(S);if(!isNaN(K))return K}throw new ao("Could not convert "+JSON.stringify(S)+" to number.")}return this.type.kind==="formatted"?Ki.fromString(Nu(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?ta.fromString(Nu(this.args[0].evaluate(r))):Nu(this.args[0].evaluate(r))},T.prototype.eachChild=function(r){this.args.forEach(r)},T.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},T.prototype.serialize=function(){if(this.type.kind==="formatted")return new us([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Oa(this.args[0]).serialize();var r=["to-"+this.type.kind];return this.eachChild(function(o){r.push(o.serialize())}),r};var H=["Unknown","Point","LineString","Polygon"],ft=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ft.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ft.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?H[this.feature.type]:this.feature.type:null},ft.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ft.prototype.canonicalID=function(){return this.canonical},ft.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ft.prototype.parseColor=function(r){var o=this._parseColorCache[r];return o||(o=this._parseColorCache[r]=Tr.parse(r)),o};var zt=function(r,o,u,g){this.name=r,this.type=o,this._evaluate=u,this.args=g};zt.prototype.evaluate=function(r){return this._evaluate(r,this.args)},zt.prototype.eachChild=function(r){this.args.forEach(r)},zt.prototype.outputDefined=function(){return!1},zt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(r){return r.serialize()}))},zt.parse=function(r,o){var u,g=r[0],b=zt.definitions[g];if(!b)return o.error('Unknown expression "'+g+'". If you wanted a literal array, use ["literal", [...]].',0);for(var C=Array.isArray(b)?b[0]:b.type,S=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,R=S.filter(function($n){var wn=$n[0];return!Array.isArray(wn)||wn.length===r.length-1}),j=null,K=0,J=R;K<J.length;K+=1){var nt=J[K],ct=nt[0],mt=nt[1];j=new kl(o.registry,o.path,null,o.scope);for(var St=[],Ot=!1,Zt=1;Zt<r.length;Zt++){var Vt=r[Zt],se=Array.isArray(ct)?ct[Zt-1]:ct.type,ye=j.parse(Vt,1+St.length,se);if(!ye){Ot=!0;break}St.push(ye)}if(!Ot)if(Array.isArray(ct)&&ct.length!==St.length)j.error("Expected "+ct.length+" arguments, but found "+St.length+" instead.");else{for(var Ee=0;Ee<St.length;Ee++){var Pe=Array.isArray(ct)?ct[Ee]:ct.type,Ne=St[Ee];j.concat(Ee+1).checkSubtype(Pe,Ne.type)}if(j.errors.length===0)return new zt(g,C,mt,St)}}if(R.length===1)(u=o.errors).push.apply(u,j.errors);else{for(var Je=(R.length?R:S).map(function($n){var wn;return wn=$n[0],Array.isArray(wn)?"("+wn.map(Vr).join(", ")+")":"("+Vr(wn.type)+"...)"}).join(" | "),cn=[],Vn=1;Vn<r.length;Vn++){var _n=o.parse(r[Vn],1+cn.length);if(!_n)return null;cn.push(Vr(_n.type))}o.error("Expected arguments of type "+Je+", but found ("+cn.join(", ")+") instead.")}return null},zt.register=function(r,o){for(var u in zt.definitions=o,o)r[u]=zt};var Yt=function(r,o,u){this.type=jr,this.locale=u,this.caseSensitive=r,this.diacriticSensitive=o};function Xt(r,o){r[0]=Math.min(r[0],o[0]),r[1]=Math.min(r[1],o[1]),r[2]=Math.max(r[2],o[0]),r[3]=Math.max(r[3],o[1])}function he(r,o){return!(r[0]<=o[0]||r[2]>=o[2]||r[1]<=o[1]||r[3]>=o[3])}function nn(r,o){var u=(180+r[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,b=Math.pow(2,o.z);return[Math.round(u*b*8192),Math.round(g*b*8192)]}function fn(r,o,u){return o[1]>r[1]!=u[1]>r[1]&&r[0]<(u[0]-o[0])*(r[1]-o[1])/(u[1]-o[1])+o[0]}function En(r,o){for(var u,g,b,C,S,R,j,K=!1,J=0,nt=o.length;J<nt;J++)for(var ct=o[J],mt=0,St=ct.length;mt<St-1;mt++){if((C=(u=r)[0]-(g=ct[mt])[0])*(j=u[1]-(b=ct[mt+1])[1])-(R=u[0]-b[0])*(S=u[1]-g[1])==0&&C*R<=0&&S*j<=0)return!1;fn(r,ct[mt],ct[mt+1])&&(K=!K)}return K}function Pn(r,o){for(var u=0;u<o.length;u++)if(En(r,o[u]))return!0;return!1}function vn(r,o,u,g){var b=g[0]-u[0],C=g[1]-u[1],S=(r[0]-u[0])*C-b*(r[1]-u[1]),R=(o[0]-u[0])*C-b*(o[1]-u[1]);return S>0&&R<0||S<0&&R>0}function wr(r,o,u){for(var g=0,b=u;g<b.length;g+=1)for(var C=b[g],S=0;S<C.length-1;++S)if((nt=[(J=C[S+1])[0]-(K=C[S])[0],J[1]-K[1]])[0]*(ct=[(j=o)[0]-(R=r)[0],j[1]-R[1]])[1]-nt[1]*ct[0]!=0&&vn(R,j,K,J)&&vn(K,J,R,j))return!0;var R,j,K,J,nt,ct;return!1}function to(r,o){for(var u=0;u<r.length;++u)if(!En(r[u],o))return!1;for(var g=0;g<r.length-1;++g)if(wr(r[g],r[g+1],o))return!1;return!0}function Pr(r,o){for(var u=0;u<o.length;u++)if(to(r,o[u]))return!0;return!1}function Ui(r,o,u){for(var g=[],b=0;b<r.length;b++){for(var C=[],S=0;S<r[b].length;S++){var R=nn(r[b][S],u);Xt(o,R),C.push(R)}g.push(C)}return g}function Ze(r,o,u){for(var g=[],b=0;b<r.length;b++){var C=Ui(r[b],o,u);g.push(C)}return g}function Wn(r,o,u,g){if(r[0]<u[0]||r[0]>u[2]){var b=.5*g,C=r[0]-u[0]>b?-g:u[0]-r[0]>b?g:0;C===0&&(C=r[0]-u[2]>b?-g:u[2]-r[0]>b?g:0),r[0]+=C}Xt(o,r)}function Ai(r,o,u,g){for(var b=8192*Math.pow(2,g.z),C=[8192*g.x,8192*g.y],S=[],R=0,j=r;R<j.length;R+=1)for(var K=0,J=j[R];K<J.length;K+=1){var nt=J[K],ct=[nt.x+C[0],nt.y+C[1]];Wn(ct,o,u,b),S.push(ct)}return S}function xo(r,o,u,g){for(var b,C=8192*Math.pow(2,g.z),S=[8192*g.x,8192*g.y],R=[],j=0,K=r;j<K.length;j+=1){for(var J=[],nt=0,ct=K[j];nt<ct.length;nt+=1){var mt=ct[nt],St=[mt.x+S[0],mt.y+S[1]];Xt(o,St),J.push(St)}R.push(J)}if(o[2]-o[0]<=C/2){(b=o)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(var Ot=0,Zt=R;Ot<Zt.length;Ot+=1)for(var Vt=0,se=Zt[Ot];Vt<se.length;Vt+=1)Wn(se[Vt],o,u,C)}return R}Yt.parse=function(r,o){if(r.length!==2)return o.error("Expected one argument.");var u=r[1];if(typeof u!="object"||Array.isArray(u))return o.error("Collator options argument must be an object.");var g=o.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,dn);if(!g)return null;var b=o.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,dn);if(!b)return null;var C=null;return u.locale&&!(C=o.parse(u.locale,1,an))?null:new Yt(g,b,C)},Yt.prototype.evaluate=function(r){return new Wo(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)},Yt.prototype.eachChild=function(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)},Yt.prototype.outputDefined=function(){return!1},Yt.prototype.serialize=function(){var r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]};var mi=function(r,o){this.type=dn,this.geojson=r,this.geometries=o};function Us(r){if(r instanceof zt&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof mi)return!1;var o=!0;return r.eachChild(function(u){o&&!Us(u)&&(o=!1)}),o}function Pl(r){if(r instanceof zt&&r.name==="feature-state")return!1;var o=!0;return r.eachChild(function(u){o&&!Pl(u)&&(o=!1)}),o}function _i(r,o){if(r instanceof zt&&o.indexOf(r.name)>=0)return!1;var u=!0;return r.eachChild(function(g){u&&!_i(g,o)&&(u=!1)}),u}mi.parse=function(r,o){if(r.length!==2)return o.error("'within' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(Fu(r[1])){var u=r[1];if(u.type==="FeatureCollection")for(var g=0;g<u.features.length;++g){var b=u.features[g].geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new mi(u,u.features[g].geometry)}else if(u.type==="Feature"){var C=u.geometry.type;if(C==="Polygon"||C==="MultiPolygon")return new mi(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new mi(u,u)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")},mi.prototype.evaluate=function(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(o,u){var g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],C=o.canonicalID();if(u.type==="Polygon"){var S=Ui(u.coordinates,b,C),R=Ai(o.geometry(),g,b,C);if(!he(g,b))return!1;for(var j=0,K=R;j<K.length;j+=1)if(!En(K[j],S))return!1}if(u.type==="MultiPolygon"){var J=Ze(u.coordinates,b,C),nt=Ai(o.geometry(),g,b,C);if(!he(g,b))return!1;for(var ct=0,mt=nt;ct<mt.length;ct+=1)if(!Pn(mt[ct],J))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(o,u){var g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],C=o.canonicalID();if(u.type==="Polygon"){var S=Ui(u.coordinates,b,C),R=xo(o.geometry(),g,b,C);if(!he(g,b))return!1;for(var j=0,K=R;j<K.length;j+=1)if(!to(K[j],S))return!1}if(u.type==="MultiPolygon"){var J=Ze(u.coordinates,b,C),nt=xo(o.geometry(),g,b,C);if(!he(g,b))return!1;for(var ct=0,mt=nt;ct<mt.length;ct+=1)if(!Pr(mt[ct],J))return!1}return!0}(r,this.geometries)}return!1},mi.prototype.eachChild=function(){},mi.prototype.outputDefined=function(){return!0},mi.prototype.serialize=function(){return["within",this.geojson]};var ul=function(r,o){this.type=o.type,this.name=r,this.boundExpression=o};ul.parse=function(r,o){if(r.length!==2||typeof r[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");var u=r[1];return o.scope.has(u)?new ul(u,o.scope.get(u)):o.error('Unknown variable "'+u+'". Make sure "'+u+'" has been bound in an enclosing "let" expression before using it.',1)},ul.prototype.evaluate=function(r){return this.boundExpression.evaluate(r)},ul.prototype.eachChild=function(){},ul.prototype.outputDefined=function(){return!1},ul.prototype.serialize=function(){return["var",this.name]};var kl=function(r,o,u,g,b){o===void 0&&(o=[]),g===void 0&&(g=new kn),b===void 0&&(b=[]),this.registry=r,this.path=o,this.key=o.map(function(C){return"["+C+"]"}).join(""),this.scope=g,this.errors=b,this.expectedType=u};function ni(r,o){for(var u,g=r.length-1,b=0,C=g,S=0;b<=C;)if((u=r[S=Math.floor((b+C)/2)])<=o){if(S===g||o<r[S+1])return S;b=S+1}else{if(!(u>o))throw new ao("Input is not a number.");C=S-1}return 0}kl.prototype.parse=function(r,o,u,g,b){return b===void 0&&(b={}),o?this.concat(o,u,g)._parse(r,b):this._parse(r,b)},kl.prototype._parse=function(r,o){function u(K,J,nt){return nt==="assert"?new Di(J,[K]):nt==="coerce"?new T(J,[K]):K}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var g=r[0];if(typeof g!="string")return this.error("Expression name must be a string, but found "+typeof g+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var b=this.registry[g];if(b){var C=b.parse(r,this);if(!C)return null;if(this.expectedType){var S=this.expectedType,R=C.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||R.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||R.kind!=="value"&&R.kind!=="string"){if(this.checkSubtype(S,R))return null}else C=u(C,S,o.typeAnnotation||"coerce");else C=u(C,S,o.typeAnnotation||"assert")}if(!(C instanceof zo)&&C.type.kind!=="resolvedImage"&&function K(J){if(J instanceof ul)return K(J.boundExpression);if(J instanceof zt&&J.name==="error"||J instanceof Yt||J instanceof mi)return!1;var nt=J instanceof T||J instanceof Di,ct=!0;return J.eachChild(function(mt){ct=nt?ct&&K(mt):ct&&mt instanceof zo}),!!ct&&Us(J)&&_i(J,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(C)){var j=new ft;try{C=new zo(C.type,C.evaluate(j))}catch(K){return this.error(K.message),null}}return C}return this.error('Unknown expression "'+g+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof r+" instead.")},kl.prototype.concat=function(r,o,u){var g=typeof r=="number"?this.path.concat(r):this.path,b=u?this.scope.concat(u):this.scope;return new kl(this.registry,g,o||null,b,this.errors)},kl.prototype.error=function(r){for(var o=[],u=arguments.length-1;u-- >0;)o[u]=arguments[u+1];var g=""+this.key+o.map(function(b){return"["+b+"]"}).join("");this.errors.push(new Ge(g,r))},kl.prototype.checkSubtype=function(r,o){var u=vr(r,o);return u&&this.error(u),u};var Gr=function(r,o,u){this.type=r,this.input=o,this.labels=[],this.outputs=[];for(var g=0,b=u;g<b.length;g+=1){var C=b[g],S=C[1];this.labels.push(C[0]),this.outputs.push(S)}};function so(r,o,u){return r*(1-u)+o*u}Gr.parse=function(r,o){if(r.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");var u=o.parse(r[1],1,Re);if(!u)return null;var g=[],b=null;o.expectedType&&o.expectedType.kind!=="value"&&(b=o.expectedType);for(var C=1;C<r.length;C+=2){var S=C===1?-1/0:r[C],R=r[C+1],j=C,K=C+1;if(typeof S!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(g.length&&g[g.length-1][0]>=S)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);var J=o.parse(R,K,b);if(!J)return null;b=b||J.type,g.push([S,J])}return new Gr(b,u,g)},Gr.prototype.evaluate=function(r){var o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(r);var g=this.input.evaluate(r);if(g<=o[0])return u[0].evaluate(r);var b=o.length;return g>=o[b-1]?u[b-1].evaluate(r):u[ni(o,g)].evaluate(r)},Gr.prototype.eachChild=function(r){r(this.input);for(var o=0,u=this.outputs;o<u.length;o+=1)r(u[o])},Gr.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},Gr.prototype.serialize=function(){for(var r=["step",this.input.serialize()],o=0;o<this.labels.length;o++)o>0&&r.push(this.labels[o]),r.push(this.outputs[o].serialize());return r};var hu=Object.freeze({__proto__:null,number:so,color:function(r,o,u){return new Tr(so(r.r,o.r,u),so(r.g,o.g,u),so(r.b,o.b,u),so(r.a,o.a,u))},array:function(r,o,u){return r.map(function(g,b){return so(g,o[b],u)})}}),rh=6/29*3*(6/29),Df=Math.PI/180,zf=180/Math.PI;function zh(r){return r>.008856451679035631?Math.pow(r,1/3):r/rh+4/29}function ih(r){return r>6/29?r*r*r:rh*(r-4/29)}function Bh(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function So(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Ac(r){var o=So(r.r),u=So(r.g),g=So(r.b),b=zh((.4124564*o+.3575761*u+.1804375*g)/.95047),C=zh((.2126729*o+.7151522*u+.072175*g)/1);return{l:116*C-16,a:500*(b-C),b:200*(C-zh((.0193339*o+.119192*u+.9503041*g)/1.08883)),alpha:r.a}}function cl(r){var o=(r.l+16)/116,u=isNaN(r.a)?o:o+r.a/500,g=isNaN(r.b)?o:o-r.b/200;return o=1*ih(o),u=.95047*ih(u),g=1.08883*ih(g),new Tr(Bh(3.2404542*u-1.5371385*o-.4985314*g),Bh(-.969266*u+1.8760108*o+.041556*g),Bh(.0556434*u-.2040259*o+1.0572252*g),r.alpha)}function Bf(r,o,u){var g=o-r;return r+u*(g>180||g<-180?g-360*Math.round(g/360):g)}var fu={forward:Ac,reverse:cl,interpolate:function(r,o,u){return{l:so(r.l,o.l,u),a:so(r.a,o.a,u),b:so(r.b,o.b,u),alpha:so(r.alpha,o.alpha,u)}}},Bo={forward:function(r){var o=Ac(r),u=o.l,g=o.a,b=o.b,C=Math.atan2(b,g)*zf;return{h:C<0?C+360:C,c:Math.sqrt(g*g+b*b),l:u,alpha:r.a}},reverse:function(r){var o=r.h*Df,u=r.c;return cl({l:r.l,a:Math.cos(o)*u,b:Math.sin(o)*u,alpha:r.alpha})},interpolate:function(r,o,u){return{h:Bf(r.h,o.h,u),c:so(r.c,o.c,u),l:so(r.l,o.l,u),alpha:so(r.alpha,o.alpha,u)}}},wc=Object.freeze({__proto__:null,lab:fu,hcl:Bo}),Mo=function(r,o,u,g,b){this.type=r,this.operator=o,this.interpolation=u,this.input=g,this.labels=[],this.outputs=[];for(var C=0,S=b;C<S.length;C+=1){var R=S[C],j=R[1];this.labels.push(R[0]),this.outputs.push(j)}};function Ya(r,o,u,g){var b=g-u,C=r-u;return b===0?0:o===1?C/b:(Math.pow(o,C)-1)/(Math.pow(o,b)-1)}Mo.interpolationFactor=function(r,o,u,g){var b=0;if(r.name==="exponential")b=Ya(o,r.base,u,g);else if(r.name==="linear")b=Ya(o,1,u,g);else if(r.name==="cubic-bezier"){var C=r.controlPoints;b=new m(C[0],C[1],C[2],C[3]).solve(Ya(o,1,u,g))}return b},Mo.parse=function(r,o){var u=r[0],g=r[1],b=r[2],C=r.slice(3);if(!Array.isArray(g)||g.length===0)return o.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){var S=g[1];if(typeof S!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:S}}else{if(g[0]!=="cubic-bezier")return o.error("Unknown interpolation type "+String(g[0]),1,0);var R=g.slice(1);if(R.length!==4||R.some(function(Zt){return typeof Zt!="number"||Zt<0||Zt>1}))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:R}}if(r.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(!(b=o.parse(b,2,Re)))return null;var j=[],K=null;u==="interpolate-hcl"||u==="interpolate-lab"?K=pn:o.expectedType&&o.expectedType.kind!=="value"&&(K=o.expectedType);for(var J=0;J<C.length;J+=2){var nt=C[J],ct=C[J+1],mt=J+3,St=J+4;if(typeof nt!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',mt);if(j.length&&j[j.length-1][0]>=nt)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',mt);var Ot=o.parse(ct,St,K);if(!Ot)return null;K=K||Ot.type,j.push([nt,Ot])}return K.kind==="number"||K.kind==="color"||K.kind==="array"&&K.itemType.kind==="number"&&typeof K.N=="number"?new Mo(K,u,g,b,j):o.error("Type "+Vr(K)+" is not interpolatable.")},Mo.prototype.evaluate=function(r){var o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(r);var g=this.input.evaluate(r);if(g<=o[0])return u[0].evaluate(r);var b=o.length;if(g>=o[b-1])return u[b-1].evaluate(r);var C=ni(o,g),S=Mo.interpolationFactor(this.interpolation,g,o[C],o[C+1]),R=u[C].evaluate(r),j=u[C+1].evaluate(r);return this.operator==="interpolate"?hu[this.type.kind.toLowerCase()](R,j,S):this.operator==="interpolate-hcl"?Bo.reverse(Bo.interpolate(Bo.forward(R),Bo.forward(j),S)):fu.reverse(fu.interpolate(fu.forward(R),fu.forward(j),S))},Mo.prototype.eachChild=function(r){r(this.input);for(var o=0,u=this.outputs;o<u.length;o+=1)r(u[o])},Mo.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},Mo.prototype.serialize=function(){var r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var o=[this.operator,r,this.input.serialize()],u=0;u<this.labels.length;u++)o.push(this.labels[u],this.outputs[u].serialize());return o};var Vs=function(r,o){this.type=r,this.args=o};Vs.parse=function(r,o){if(r.length<2)return o.error("Expectected at least one argument.");var u=null,g=o.expectedType;g&&g.kind!=="value"&&(u=g);for(var b=[],C=0,S=r.slice(1);C<S.length;C+=1){var R=o.parse(S[C],1+b.length,u,void 0,{typeAnnotation:"omit"});if(!R)return null;u=u||R.type,b.push(R)}var j=g&&b.some(function(K){return vr(g,K.type)});return new Vs(j?bn:u,b)},Vs.prototype.evaluate=function(r){for(var o,u=null,g=0,b=0,C=this.args;b<C.length&&(g++,(u=C[b].evaluate(r))&&u instanceof ta&&!u.available&&(o||(o=u.name),u=null,g===this.args.length&&(u=o)),u===null);b+=1);return u},Vs.prototype.eachChild=function(r){this.args.forEach(r)},Vs.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},Vs.prototype.serialize=function(){var r=["coalesce"];return this.eachChild(function(o){r.push(o.serialize())}),r};var js=function(r,o){this.type=o.type,this.bindings=[].concat(r),this.result=o};js.prototype.evaluate=function(r){return this.result.evaluate(r)},js.prototype.eachChild=function(r){for(var o=0,u=this.bindings;o<u.length;o+=1)r(u[o][1]);r(this.result)},js.parse=function(r,o){if(r.length<4)return o.error("Expected at least 3 arguments, but found "+(r.length-1)+" instead.");for(var u=[],g=1;g<r.length-1;g+=2){var b=r[g];if(typeof b!="string")return o.error("Expected string, but found "+typeof b+" instead.",g);if(/[^a-zA-Z0-9_]/.test(b))return o.error("Variable names must contain only alphanumeric characters or '_'.",g);var C=o.parse(r[g+1],g+1);if(!C)return null;u.push([b,C])}var S=o.parse(r[r.length-1],r.length-1,o.expectedType,u);return S?new js(u,S):null},js.prototype.outputDefined=function(){return this.result.outputDefined()},js.prototype.serialize=function(){for(var r=["let"],o=0,u=this.bindings;o<u.length;o+=1){var g=u[o];r.push(g[0],g[1].serialize())}return r.push(this.result.serialize()),r};var Ll=function(r,o,u){this.type=r,this.index=o,this.input=u};Ll.parse=function(r,o){if(r.length!==3)return o.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var u=o.parse(r[1],1,Re),g=o.parse(r[2],2,Ur(o.expectedType||bn));return u&&g?new Ll(g.type.itemType,u,g):null},Ll.prototype.evaluate=function(r){var o=this.index.evaluate(r),u=this.input.evaluate(r);if(o<0)throw new ao("Array index out of bounds: "+o+" < 0.");if(o>=u.length)throw new ao("Array index out of bounds: "+o+" > "+(u.length-1)+".");if(o!==Math.floor(o))throw new ao("Array index must be an integer, but found "+o+" instead.");return u[o]},Ll.prototype.eachChild=function(r){r(this.index),r(this.input)},Ll.prototype.outputDefined=function(){return!1},Ll.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var To=function(r,o){this.type=dn,this.needle=r,this.haystack=o};To.parse=function(r,o){if(r.length!==3)return o.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var u=o.parse(r[1],1,bn),g=o.parse(r[2],2,bn);return u&&g?$i(u.type,[dn,an,Re,Tn,bn])?new To(u,g):o.error("Expected first argument to be of type boolean, string, number or null, but found "+Vr(u.type)+" instead"):null},To.prototype.evaluate=function(r){var o=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!u)return!1;if(!ui(o,["boolean","string","number","null"]))throw new ao("Expected first argument to be of type boolean, string, number or null, but found "+Vr(qi(o))+" instead.");if(!ui(u,["string","array"]))throw new ao("Expected second argument to be of type array or string, but found "+Vr(qi(u))+" instead.");return u.indexOf(o)>=0},To.prototype.eachChild=function(r){r(this.needle),r(this.haystack)},To.prototype.outputDefined=function(){return!0},To.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Cs=function(r,o,u){this.type=Re,this.needle=r,this.haystack=o,this.fromIndex=u};Cs.parse=function(r,o){if(r.length<=2||r.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var u=o.parse(r[1],1,bn),g=o.parse(r[2],2,bn);if(!u||!g)return null;if(!$i(u.type,[dn,an,Re,Tn,bn]))return o.error("Expected first argument to be of type boolean, string, number or null, but found "+Vr(u.type)+" instead");if(r.length===4){var b=o.parse(r[3],3,Re);return b?new Cs(u,g,b):null}return new Cs(u,g)},Cs.prototype.evaluate=function(r){var o=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!ui(o,["boolean","string","number","null"]))throw new ao("Expected first argument to be of type boolean, string, number or null, but found "+Vr(qi(o))+" instead.");if(!ui(u,["string","array"]))throw new ao("Expected second argument to be of type array or string, but found "+Vr(qi(u))+" instead.");if(this.fromIndex){var g=this.fromIndex.evaluate(r);return u.indexOf(o,g)}return u.indexOf(o)},Cs.prototype.eachChild=function(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)},Cs.prototype.outputDefined=function(){return!1},Cs.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Fo=function(r,o,u,g,b,C){this.inputType=r,this.type=o,this.input=u,this.cases=g,this.outputs=b,this.otherwise=C};Fo.parse=function(r,o){if(r.length<5)return o.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(r.length%2!=1)return o.error("Expected an even number of arguments.");var u,g;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);for(var b={},C=[],S=2;S<r.length-1;S+=2){var R=r[S],j=r[S+1];Array.isArray(R)||(R=[R]);var K=o.concat(S);if(R.length===0)return K.error("Expected at least one branch label.");for(var J=0,nt=R;J<nt.length;J+=1){var ct=nt[J];if(typeof ct!="number"&&typeof ct!="string")return K.error("Branch labels must be numbers or strings.");if(typeof ct=="number"&&Math.abs(ct)>Number.MAX_SAFE_INTEGER)return K.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof ct=="number"&&Math.floor(ct)!==ct)return K.error("Numeric branch labels must be integer values.");if(u){if(K.checkSubtype(u,qi(ct)))return null}else u=qi(ct);if(b[String(ct)]!==void 0)return K.error("Branch labels must be unique.");b[String(ct)]=C.length}var mt=o.parse(j,S,g);if(!mt)return null;g=g||mt.type,C.push(mt)}var St=o.parse(r[1],1,bn);if(!St)return null;var Ot=o.parse(r[r.length-1],r.length-1,g);return Ot?St.type.kind!=="value"&&o.concat(1).checkSubtype(u,St.type)?null:new Fo(u,g,St,b,C,Ot):null},Fo.prototype.evaluate=function(r){var o=this.input.evaluate(r);return(qi(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(r)},Fo.prototype.eachChild=function(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)},Fo.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})&&this.otherwise.outputDefined()},Fo.prototype.serialize=function(){for(var r=this,o=["match",this.input.serialize()],u=[],g={},b=0,C=Object.keys(this.cases).sort();b<C.length;b+=1){var S=C[b];(nt=g[this.cases[S]])===void 0?(g[this.cases[S]]=u.length,u.push([this.cases[S],[S]])):u[nt][1].push(S)}for(var R=function(mt){return r.inputType.kind==="number"?Number(mt):mt},j=0,K=u;j<K.length;j+=1){var J=K[j],nt=J[0],ct=J[1];o.push(ct.length===1?R(ct[0]):ct.map(R)),o.push(this.outputs[outputIndex$1].serialize())}return o.push(this.otherwise.serialize()),o};var Ol=function(r,o,u){this.type=r,this.branches=o,this.otherwise=u};Ol.parse=function(r,o){if(r.length<4)return o.error("Expected at least 3 arguments, but found only "+(r.length-1)+".");if(r.length%2!=0)return o.error("Expected an odd number of arguments.");var u;o.expectedType&&o.expectedType.kind!=="value"&&(u=o.expectedType);for(var g=[],b=1;b<r.length-1;b+=2){var C=o.parse(r[b],b,dn);if(!C)return null;var S=o.parse(r[b+1],b+1,u);if(!S)return null;g.push([C,S]),u=u||S.type}var R=o.parse(r[r.length-1],r.length-1,u);return R?new Ol(u,g,R):null},Ol.prototype.evaluate=function(r){for(var o=0,u=this.branches;o<u.length;o+=1){var g=u[o],b=g[1];if(g[0].evaluate(r))return b.evaluate(r)}return this.otherwise.evaluate(r)},Ol.prototype.eachChild=function(r){for(var o=0,u=this.branches;o<u.length;o+=1){var g=u[o],b=g[1];r(g[0]),r(b)}r(this.otherwise)},Ol.prototype.outputDefined=function(){return this.branches.every(function(r){return r[1].outputDefined()})&&this.otherwise.outputDefined()},Ol.prototype.serialize=function(){var r=["case"];return this.eachChild(function(o){r.push(o.serialize())}),r};var hl=function(r,o,u,g){this.type=r,this.input=o,this.beginIndex=u,this.endIndex=g};function xa(r,o){return r==="=="||r==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Uu(r,o,u,g){return g.compare(o,u)===0}function gi(r,o,u){var g=r!=="=="&&r!=="!=";return function(){function b(C,S,R){this.type=dn,this.lhs=C,this.rhs=S,this.collator=R,this.hasUntypedArgument=C.type.kind==="value"||S.type.kind==="value"}return b.parse=function(C,S){if(C.length!==3&&C.length!==4)return S.error("Expected two or three arguments.");var R=C[0],j=S.parse(C[1],1,bn);if(!j)return null;if(!xa(R,j.type))return S.concat(1).error('"'+R+`" comparisons are not supported for type '`+Vr(j.type)+"'.");var K=S.parse(C[2],2,bn);if(!K)return null;if(!xa(R,K.type))return S.concat(2).error('"'+R+`" comparisons are not supported for type '`+Vr(K.type)+"'.");if(j.type.kind!==K.type.kind&&j.type.kind!=="value"&&K.type.kind!=="value")return S.error("Cannot compare types '"+Vr(j.type)+"' and '"+Vr(K.type)+"'.");g&&(j.type.kind==="value"&&K.type.kind!=="value"?j=new Di(K.type,[j]):j.type.kind!=="value"&&K.type.kind==="value"&&(K=new Di(j.type,[K])));var J=null;if(C.length===4){if(j.type.kind!=="string"&&K.type.kind!=="string"&&j.type.kind!=="value"&&K.type.kind!=="value")return S.error("Cannot use collator to compare non-string types.");if(!(J=S.parse(C[3],3,jr)))return null}return new b(j,K,J)},b.prototype.evaluate=function(C){var S=this.lhs.evaluate(C),R=this.rhs.evaluate(C);if(g&&this.hasUntypedArgument){var j=qi(S),K=qi(R);if(j.kind!==K.kind||j.kind!=="string"&&j.kind!=="number")throw new ao('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+j.kind+", "+K.kind+") instead.")}if(this.collator&&!g&&this.hasUntypedArgument){var J=qi(S),nt=qi(R);if(J.kind!=="string"||nt.kind!=="string")return o(C,S,R)}return this.collator?u(C,S,R,this.collator.evaluate(C)):o(C,S,R)},b.prototype.eachChild=function(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)},b.prototype.outputDefined=function(){return!0},b.prototype.serialize=function(){var C=[r];return this.eachChild(function(S){C.push(S.serialize())}),C},b}()}hl.parse=function(r,o){if(r.length<=2||r.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var u=o.parse(r[1],1,bn),g=o.parse(r[2],2,Re);if(!u||!g)return null;if(!$i(u.type,[Ur(bn),an,bn]))return o.error("Expected first argument to be of type array or string, but found "+Vr(u.type)+" instead");if(r.length===4){var b=o.parse(r[3],3,Re);return b?new hl(u.type,u,g,b):null}return new hl(u.type,u,g)},hl.prototype.evaluate=function(r){var o=this.input.evaluate(r),u=this.beginIndex.evaluate(r);if(!ui(o,["string","array"]))throw new ao("Expected first argument to be of type array or string, but found "+Vr(qi(o))+" instead.");if(this.endIndex){var g=this.endIndex.evaluate(r);return o.slice(u,g)}return o.slice(u)},hl.prototype.eachChild=function(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)},hl.prototype.outputDefined=function(){return!1},hl.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var eo=gi("==",function(r,o,u){return o===u},Uu),Xa=gi("!=",function(r,o,u){return o!==u},function(r,o,u,g){return!Uu(0,o,u,g)}),Rl=gi("<",function(r,o,u){return o<u},function(r,o,u,g){return g.compare(o,u)<0}),oh=gi(">",function(r,o,u){return o>u},function(r,o,u,g){return g.compare(o,u)>0}),Vu=gi("<=",function(r,o,u){return o<=u},function(r,o,u,g){return g.compare(o,u)<=0}),ah=gi(">=",function(r,o,u){return o>=u},function(r,o,u,g){return g.compare(o,u)>=0}),Is=function(r,o,u,g,b){this.type=an,this.number=r,this.locale=o,this.currency=u,this.minFractionDigits=g,this.maxFractionDigits=b};Is.parse=function(r,o){if(r.length!==3)return o.error("Expected two arguments.");var u=o.parse(r[1],1,Re);if(!u)return null;var g=r[2];if(typeof g!="object"||Array.isArray(g))return o.error("NumberFormat options argument must be an object.");var b=null;if(g.locale&&!(b=o.parse(g.locale,1,an)))return null;var C=null;if(g.currency&&!(C=o.parse(g.currency,1,an)))return null;var S=null;if(g["min-fraction-digits"]&&!(S=o.parse(g["min-fraction-digits"],1,Re)))return null;var R=null;return g["max-fraction-digits"]&&!(R=o.parse(g["max-fraction-digits"],1,Re))?null:new Is(u,b,C,S,R)},Is.prototype.evaluate=function(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))},Is.prototype.eachChild=function(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)},Is.prototype.outputDefined=function(){return!1},Is.prototype.serialize=function(){var r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]};var Dl=function(r){this.type=Re,this.input=r};Dl.parse=function(r,o){if(r.length!==2)return o.error("Expected 1 argument, but found "+(r.length-1)+" instead.");var u=o.parse(r[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?o.error("Expected argument of type string or array, but found "+Vr(u.type)+" instead."):new Dl(u):null},Dl.prototype.evaluate=function(r){var o=this.input.evaluate(r);if(typeof o=="string"||Array.isArray(o))return o.length;throw new ao("Expected value to be of type string or array, but found "+Vr(qi(o))+" instead.")},Dl.prototype.eachChild=function(r){r(this.input)},Dl.prototype.outputDefined=function(){return!1},Dl.prototype.serialize=function(){var r=["length"];return this.eachChild(function(o){r.push(o.serialize())}),r};var zl={"==":eo,"!=":Xa,">":oh,"<":Rl,">=":ah,"<=":Vu,array:Di,at:Ll,boolean:Di,case:Ol,coalesce:Vs,collator:Yt,format:us,image:Oa,in:To,"index-of":Cs,interpolate:Mo,"interpolate-hcl":Mo,"interpolate-lab":Mo,length:Dl,let:js,literal:zo,match:Fo,number:Di,"number-format":Is,object:Di,slice:hl,step:Gr,string:Di,"to-boolean":T,"to-color":T,"to-number":T,"to-string":T,var:ul,within:mi};function Cc(r,o){var u=o[0],g=o[1],b=o[2],C=o[3];u=u.evaluate(r),g=g.evaluate(r),b=b.evaluate(r);var S=C?C.evaluate(r):1,R=nh(u,g,b,S);if(R)throw new ao(R);return new Tr(u/255*S,g/255*S,b/255*S,S)}function du(r,o){return r in o}function Fh(r,o){var u=o[r];return u===void 0?null:u}function fl(r){return{type:r}}function Ic(r){return{result:"success",value:r}}function Aa(r){return{result:"error",value:r}}function ea(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function dl(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Bl(r){return!!r.expression&&r.expression.interpolated}function qr(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function ju(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function sh(r){return r}function Es(r,o,u){return r!==void 0?r:o!==void 0?o:u!==void 0?u:void 0}function wa(r,o,u,g,b){return Es(typeof u===b?g[u]:void 0,r.default,o.default)}function lh(r,o,u){if(qr(u)!=="number")return Es(r.default,o.default);var g=r.stops.length;if(g===1||u<=r.stops[0][0])return r.stops[0][1];if(u>=r.stops[g-1][0])return r.stops[g-1][1];var b=ni(r.stops.map(function(C){return C[0]}),u);return r.stops[b][1]}function Hu(r,o,u){var g=r.base!==void 0?r.base:1;if(qr(u)!=="number")return Es(r.default,o.default);var b=r.stops.length;if(b===1||u<=r.stops[0][0])return r.stops[0][1];if(u>=r.stops[b-1][0])return r.stops[b-1][1];var C=ni(r.stops.map(function(nt){return nt[0]}),u),S=function(nt,ct,mt,St){var Ot=St-mt,Zt=nt-mt;return Ot===0?0:ct===1?Zt/Ot:(Math.pow(ct,Zt)-1)/(Math.pow(ct,Ot)-1)}(u,g,r.stops[C][0],r.stops[C+1][0]),R=r.stops[C][1],j=r.stops[C+1][1],K=hu[o.type]||sh;if(r.colorSpace&&r.colorSpace!=="rgb"){var J=wc[r.colorSpace];K=function(nt,ct){return J.reverse(J.interpolate(J.forward(nt),J.forward(ct),S))}}return typeof R.evaluate=="function"?{evaluate:function(){for(var nt=[],ct=arguments.length;ct--;)nt[ct]=arguments[ct];var mt=R.evaluate.apply(void 0,nt),St=j.evaluate.apply(void 0,nt);if(mt!==void 0&&St!==void 0)return K(mt,St,S)}}:K(R,j,S)}function Ec(r,o,u){return o.type==="color"?u=Tr.parse(u):o.type==="formatted"?u=Ki.fromString(u.toString()):o.type==="resolvedImage"?u=ta.fromString(u.toString()):qr(u)===o.type||o.type==="enum"&&o.values[u]||(u=void 0),Es(u,r.default,o.default)}zt.register(zl,{error:[{kind:"error"},[an],function(r,o){throw new ao(o[0].evaluate(r))}],typeof:[an,[bn],function(r,o){return Vr(qi(o[0].evaluate(r)))}],"to-rgba":[Ur(Re,4),[pn],function(r,o){return o[0].evaluate(r).toArray()}],rgb:[pn,[Re,Re,Re],Cc],rgba:[pn,[Re,Re,Re,Re],Cc],has:{type:dn,overloads:[[[an],function(r,o){return du(o[0].evaluate(r),r.properties())}],[[an,Er],function(r,o){var u=o[1];return du(o[0].evaluate(r),u.evaluate(r))}]]},get:{type:bn,overloads:[[[an],function(r,o){return Fh(o[0].evaluate(r),r.properties())}],[[an,Er],function(r,o){var u=o[1];return Fh(o[0].evaluate(r),u.evaluate(r))}]]},"feature-state":[bn,[an],function(r,o){return Fh(o[0].evaluate(r),r.featureState||{})}],properties:[Er,[],function(r){return r.properties()}],"geometry-type":[an,[],function(r){return r.geometryType()}],id:[bn,[],function(r){return r.id()}],zoom:[Re,[],function(r){return r.globals.zoom}],"heatmap-density":[Re,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[Re,[],function(r){return r.globals.lineProgress||0}],accumulated:[bn,[],function(r){return r.globals.accumulated===void 0?null:r.globals.accumulated}],"+":[Re,fl(Re),function(r,o){for(var u=0,g=0,b=o;g<b.length;g+=1)u+=b[g].evaluate(r);return u}],"*":[Re,fl(Re),function(r,o){for(var u=1,g=0,b=o;g<b.length;g+=1)u*=b[g].evaluate(r);return u}],"-":{type:Re,overloads:[[[Re,Re],function(r,o){var u=o[1];return o[0].evaluate(r)-u.evaluate(r)}],[[Re],function(r,o){return-o[0].evaluate(r)}]]},"/":[Re,[Re,Re],function(r,o){var u=o[1];return o[0].evaluate(r)/u.evaluate(r)}],"%":[Re,[Re,Re],function(r,o){var u=o[1];return o[0].evaluate(r)%u.evaluate(r)}],ln2:[Re,[],function(){return Math.LN2}],pi:[Re,[],function(){return Math.PI}],e:[Re,[],function(){return Math.E}],"^":[Re,[Re,Re],function(r,o){var u=o[1];return Math.pow(o[0].evaluate(r),u.evaluate(r))}],sqrt:[Re,[Re],function(r,o){return Math.sqrt(o[0].evaluate(r))}],log10:[Re,[Re],function(r,o){return Math.log(o[0].evaluate(r))/Math.LN10}],ln:[Re,[Re],function(r,o){return Math.log(o[0].evaluate(r))}],log2:[Re,[Re],function(r,o){return Math.log(o[0].evaluate(r))/Math.LN2}],sin:[Re,[Re],function(r,o){return Math.sin(o[0].evaluate(r))}],cos:[Re,[Re],function(r,o){return Math.cos(o[0].evaluate(r))}],tan:[Re,[Re],function(r,o){return Math.tan(o[0].evaluate(r))}],asin:[Re,[Re],function(r,o){return Math.asin(o[0].evaluate(r))}],acos:[Re,[Re],function(r,o){return Math.acos(o[0].evaluate(r))}],atan:[Re,[Re],function(r,o){return Math.atan(o[0].evaluate(r))}],min:[Re,fl(Re),function(r,o){return Math.min.apply(Math,o.map(function(u){return u.evaluate(r)}))}],max:[Re,fl(Re),function(r,o){return Math.max.apply(Math,o.map(function(u){return u.evaluate(r)}))}],abs:[Re,[Re],function(r,o){return Math.abs(o[0].evaluate(r))}],round:[Re,[Re],function(r,o){var u=o[0].evaluate(r);return u<0?-Math.round(-u):Math.round(u)}],floor:[Re,[Re],function(r,o){return Math.floor(o[0].evaluate(r))}],ceil:[Re,[Re],function(r,o){return Math.ceil(o[0].evaluate(r))}],"filter-==":[dn,[an,bn],function(r,o){var u=o[0],g=o[1];return r.properties()[u.value]===g.value}],"filter-id-==":[dn,[bn],function(r,o){var u=o[0];return r.id()===u.value}],"filter-type-==":[dn,[an],function(r,o){var u=o[0];return r.geometryType()===u.value}],"filter-<":[dn,[an,bn],function(r,o){var u=o[0],g=o[1],b=r.properties()[u.value],C=g.value;return typeof b==typeof C&&b<C}],"filter-id-<":[dn,[bn],function(r,o){var u=o[0],g=r.id(),b=u.value;return typeof g==typeof b&&g<b}],"filter->":[dn,[an,bn],function(r,o){var u=o[0],g=o[1],b=r.properties()[u.value],C=g.value;return typeof b==typeof C&&b>C}],"filter-id->":[dn,[bn],function(r,o){var u=o[0],g=r.id(),b=u.value;return typeof g==typeof b&&g>b}],"filter-<=":[dn,[an,bn],function(r,o){var u=o[0],g=o[1],b=r.properties()[u.value],C=g.value;return typeof b==typeof C&&b<=C}],"filter-id-<=":[dn,[bn],function(r,o){var u=o[0],g=r.id(),b=u.value;return typeof g==typeof b&&g<=b}],"filter->=":[dn,[an,bn],function(r,o){var u=o[0],g=o[1],b=r.properties()[u.value],C=g.value;return typeof b==typeof C&&b>=C}],"filter-id->=":[dn,[bn],function(r,o){var u=o[0],g=r.id(),b=u.value;return typeof g==typeof b&&g>=b}],"filter-has":[dn,[bn],function(r,o){return o[0].value in r.properties()}],"filter-has-id":[dn,[],function(r){return r.id()!==null&&r.id()!==void 0}],"filter-type-in":[dn,[Ur(an)],function(r,o){return o[0].value.indexOf(r.geometryType())>=0}],"filter-id-in":[dn,[Ur(bn)],function(r,o){return o[0].value.indexOf(r.id())>=0}],"filter-in-small":[dn,[an,Ur(bn)],function(r,o){var u=o[0];return o[1].value.indexOf(r.properties()[u.value])>=0}],"filter-in-large":[dn,[an,Ur(bn)],function(r,o){var u=o[0],g=o[1];return function(b,C,S,R){for(;S<=R;){var j=S+R>>1;if(C[j]===b)return!0;C[j]>b?R=j-1:S=j+1}return!1}(r.properties()[u.value],g.value,0,g.value.length-1)}],all:{type:dn,overloads:[[[dn,dn],function(r,o){var u=o[1];return o[0].evaluate(r)&&u.evaluate(r)}],[fl(dn),function(r,o){for(var u=0,g=o;u<g.length;u+=1)if(!g[u].evaluate(r))return!1;return!0}]]},any:{type:dn,overloads:[[[dn,dn],function(r,o){var u=o[1];return o[0].evaluate(r)||u.evaluate(r)}],[fl(dn),function(r,o){for(var u=0,g=o;u<g.length;u+=1)if(g[u].evaluate(r))return!0;return!1}]]},"!":[dn,[dn],function(r,o){return!o[0].evaluate(r)}],"is-supported-script":[dn,[an],function(r,o){var u=r.globals&&r.globals.isSupportedScript;return!u||u(o[0].evaluate(r))}],upcase:[an,[an],function(r,o){return o[0].evaluate(r).toUpperCase()}],downcase:[an,[an],function(r,o){return o[0].evaluate(r).toLowerCase()}],concat:[an,fl(bn),function(r,o){return o.map(function(u){return Nu(u.evaluate(r))}).join("")}],"resolved-locale":[an,[jr],function(r,o){return o[0].evaluate(r).resolvedLocale()}]});var Fl=function(r,o){this.expression=r,this._warningHistory={},this._evaluator=new ft,this._defaultValue=o?function(u){return u.type==="color"&&ju(u.default)?new Tr(0,0,0,0):u.type==="color"?Tr.parse(u.default)||null:u.default===void 0?null:u.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null};function Gu(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in zl}function pu(r,o){var u=new kl(zl,[],o?function(b){var C={color:pn,string:an,number:Re,enum:an,boolean:dn,formatted:ei,resolvedImage:Lr};return b.type==="array"?Ur(C[b.value]||bn,b.length):C[b.type]}(o):void 0),g=u.parse(r,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?Ic(new Fl(g,o)):Aa(u.errors)}Fl.prototype.evaluateWithoutErrorHandling=function(r,o,u,g,b,C){return this._evaluator.globals=r,this._evaluator.feature=o,this._evaluator.featureState=u,this._evaluator.canonical=g,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)},Fl.prototype.evaluate=function(r,o,u,g,b,C){this._evaluator.globals=r,this._evaluator.feature=o||null,this._evaluator.featureState=u||null,this._evaluator.canonical=g,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=C||null;try{var S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new ao("Expected value to be one of "+Object.keys(this._enumValues).map(function(R){return JSON.stringify(R)}).join(", ")+", but found "+JSON.stringify(S)+" instead.");return S}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(R.message)),this._defaultValue}};var Hs=function(r,o){this.kind=r,this._styleExpression=o,this.isStateDependent=r!=="constant"&&!Pl(o.expression)};Hs.prototype.evaluateWithoutErrorHandling=function(r,o,u,g,b,C){return this._styleExpression.evaluateWithoutErrorHandling(r,o,u,g,b,C)},Hs.prototype.evaluate=function(r,o,u,g,b,C){return this._styleExpression.evaluate(r,o,u,g,b,C)};var Wu=function(r,o,u,g){this.kind=r,this.zoomStops=u,this._styleExpression=o,this.isStateDependent=r!=="camera"&&!Pl(o.expression),this.interpolationType=g};function pl(r,o){if((r=pu(r,o)).result==="error")return r;var u=r.value.expression,g=Us(u);if(!g&&!ea(o))return Aa([new Ge("","data expressions not supported")]);var b=_i(u,["zoom"]);if(!b&&!dl(o))return Aa([new Ge("","zoom expressions not supported")]);var C=function S(R){var j=null;if(R instanceof js)j=S(R.result);else if(R instanceof Vs)for(var K=0,J=R.args;K<J.length&&!(j=S(J[K]));K+=1);else(R instanceof Gr||R instanceof Mo)&&R.input instanceof zt&&R.input.name==="zoom"&&(j=R);return j instanceof Ge||R.eachChild(function(nt){var ct=S(nt);ct instanceof Ge?j=ct:!j&&ct?j=new Ge("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):j&&ct&&j!==ct&&(j=new Ge("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),j}(u);return C||b?C instanceof Ge?Aa([C]):C instanceof Mo&&!Bl(o)?Aa([new Ge("",'"interpolate" expressions cannot be used with this property')]):Ic(C?new Wu(g?"camera":"composite",r.value,C.labels,C instanceof Mo?C.interpolation:void 0):new Hs(g?"constant":"source",r.value)):Aa([new Ge("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Wu.prototype.evaluateWithoutErrorHandling=function(r,o,u,g,b,C){return this._styleExpression.evaluateWithoutErrorHandling(r,o,u,g,b,C)},Wu.prototype.evaluate=function(r,o,u,g,b,C){return this._styleExpression.evaluate(r,o,u,g,b,C)},Wu.prototype.interpolationFactor=function(r,o,u){return this.interpolationType?Mo.interpolationFactor(this.interpolationType,r,o,u):0};var Ss=function(r,o){this._parameters=r,this._specification=o,Ve(this,function u(g,b){var C,S,R,j=b.type==="color",K=g.stops&&typeof g.stops[0][0]=="object",J=K||!(K||g.property!==void 0),nt=g.type||(Bl(b)?"exponential":"interval");if(j&&((g=Ve({},g)).stops&&(g.stops=g.stops.map(function(_n){return[_n[0],Tr.parse(_n[1])]})),g.default=Tr.parse(g.default?g.default:b.default)),g.colorSpace&&g.colorSpace!=="rgb"&&!wc[g.colorSpace])throw new Error("Unknown color space: "+g.colorSpace);if(nt==="exponential")C=Hu;else if(nt==="interval")C=lh;else if(nt==="categorical"){C=wa,S=Object.create(null);for(var ct=0,mt=g.stops;ct<mt.length;ct+=1){var St=mt[ct];S[St[0]]=St[1]}R=typeof g.stops[0][0]}else{if(nt!=="identity")throw new Error('Unknown function type "'+nt+'"');C=Ec}if(K){for(var Ot={},Zt=[],Vt=0;Vt<g.stops.length;Vt++){var se=g.stops[Vt],ye=se[0].zoom;Ot[ye]===void 0&&(Ot[ye]={zoom:ye,type:g.type,property:g.property,default:g.default,stops:[]},Zt.push(ye)),Ot[ye].stops.push([se[0].value,se[1]])}for(var Ee=[],Pe=0,Ne=Zt;Pe<Ne.length;Pe+=1){var Je=Ne[Pe];Ee.push([Ot[Je].zoom,u(Ot[Je],b)])}var cn={name:"linear"};return{kind:"composite",interpolationType:cn,interpolationFactor:Mo.interpolationFactor.bind(void 0,cn),zoomStops:Ee.map(function(_n){return _n[0]}),evaluate:function(_n,$n){var wn=_n.zoom;return Hu({stops:Ee,base:g.base},b,wn).evaluate(wn,$n)}}}if(J){var Vn=nt==="exponential"?{name:"exponential",base:g.base!==void 0?g.base:1}:null;return{kind:"camera",interpolationType:Vn,interpolationFactor:Mo.interpolationFactor.bind(void 0,Vn),zoomStops:g.stops.map(function(_n){return _n[0]}),evaluate:function(_n){return C(g,b,_n.zoom,S,R)}}}return{kind:"source",evaluate:function(_n,$n){var wn=$n&&$n.properties?$n.properties[g.property]:void 0;return wn===void 0?Es(g.default,b.default):C(g,b,wn,S,R)}}}(this._parameters,this._specification))};function na(r){var o=r.key,u=r.value,g=r.valueSpec||{},b=r.objectElementValidators||{},C=r.style,S=r.styleSpec,R=[],j=qr(u);if(j!=="object")return[new Nt(o,u,"object expected, "+j+" found")];for(var K in u){var J=K.split(".")[0],nt=g[J]||g["*"],ct=void 0;if(b[J])ct=b[J];else if(g[J])ct=Dn;else if(b["*"])ct=b["*"];else{if(!g["*"]){R.push(new Nt(o,u[K],'unknown property "'+K+'"'));continue}ct=Dn}R=R.concat(ct({key:(o&&o+".")+K,value:u[K],valueSpec:nt,style:C,styleSpec:S,object:u,objectKey:K},u))}for(var mt in g)b[mt]||g[mt].required&&g[mt].default===void 0&&u[mt]===void 0&&R.push(new Nt(o,u,'missing required property "'+mt+'"'));return R}function Nh(r){var o=r.value,u=r.valueSpec,g=r.style,b=r.styleSpec,C=r.key,S=r.arrayElementValidator||Dn;if(qr(o)!=="array")return[new Nt(C,o,"array expected, "+qr(o)+" found")];if(u.length&&o.length!==u.length)return[new Nt(C,o,"array length "+u.length+" expected, length "+o.length+" found")];if(u["min-length"]&&o.length<u["min-length"])return[new Nt(C,o,"array length at least "+u["min-length"]+" expected, length "+o.length+" found")];var R={type:u.value,values:u.values};b.$version<7&&(R.function=u.function),qr(u.value)==="object"&&(R=u.value);for(var j=[],K=0;K<o.length;K++)j=j.concat(S({array:o,arrayIndex:K,value:o[K],valueSpec:R,style:g,styleSpec:b,key:C+"["+K+"]"}));return j}function uh(r){var o=r.key,u=r.value,g=r.valueSpec,b=qr(u);return b==="number"&&u!=u&&(b="NaN"),b!=="number"?[new Nt(o,u,"number expected, "+b+" found")]:"minimum"in g&&u<g.minimum?[new Nt(o,u,u+" is less than the minimum value "+g.minimum)]:"maximum"in g&&u>g.maximum?[new Nt(o,u,u+" is greater than the maximum value "+g.maximum)]:[]}function Zu(r){var o,u,g,b=r.valueSpec,C=Ke(r.value.type),S={},R=C!=="categorical"&&r.value.property===void 0,j=!R,K=qr(r.value.stops)==="array"&&qr(r.value.stops[0])==="array"&&qr(r.value.stops[0][0])==="object",J=na({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(mt){if(C==="identity")return[new Nt(mt.key,mt.value,'identity function may not have a "stops" property')];var St=[],Ot=mt.value;return St=St.concat(Nh({key:mt.key,value:Ot,valueSpec:mt.valueSpec,style:mt.style,styleSpec:mt.styleSpec,arrayElementValidator:nt})),qr(Ot)==="array"&&Ot.length===0&&St.push(new Nt(mt.key,Ot,"array must have at least one stop")),St},default:function(mt){return Dn({key:mt.key,value:mt.value,valueSpec:b,style:mt.style,styleSpec:mt.styleSpec})}}});return C==="identity"&&R&&J.push(new Nt(r.key,r.value,'missing required property "property"')),C==="identity"||r.value.stops||J.push(new Nt(r.key,r.value,'missing required property "stops"')),C==="exponential"&&r.valueSpec.expression&&!Bl(r.valueSpec)&&J.push(new Nt(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(j&&!ea(r.valueSpec)?J.push(new Nt(r.key,r.value,"property functions not supported")):R&&!dl(r.valueSpec)&&J.push(new Nt(r.key,r.value,"zoom functions not supported"))),C!=="categorical"&&!K||r.value.property!==void 0||J.push(new Nt(r.key,r.value,'"property" property is required')),J;function nt(mt){var St=[],Ot=mt.value,Zt=mt.key;if(qr(Ot)!=="array")return[new Nt(Zt,Ot,"array expected, "+qr(Ot)+" found")];if(Ot.length!==2)return[new Nt(Zt,Ot,"array length 2 expected, length "+Ot.length+" found")];if(K){if(qr(Ot[0])!=="object")return[new Nt(Zt,Ot,"object expected, "+qr(Ot[0])+" found")];if(Ot[0].zoom===void 0)return[new Nt(Zt,Ot,"object stop key must have zoom")];if(Ot[0].value===void 0)return[new Nt(Zt,Ot,"object stop key must have value")];if(g&&g>Ke(Ot[0].zoom))return[new Nt(Zt,Ot[0].zoom,"stop zoom values must appear in ascending order")];Ke(Ot[0].zoom)!==g&&(g=Ke(Ot[0].zoom),u=void 0,S={}),St=St.concat(na({key:Zt+"[0]",value:Ot[0],valueSpec:{zoom:{}},style:mt.style,styleSpec:mt.styleSpec,objectElementValidators:{zoom:uh,value:ct}}))}else St=St.concat(ct({key:Zt+"[0]",value:Ot[0],valueSpec:{},style:mt.style,styleSpec:mt.styleSpec},Ot));return Gu(Le(Ot[1]))?St.concat([new Nt(Zt+"[1]",Ot[1],"expressions are not allowed in function stops.")]):St.concat(Dn({key:Zt+"[1]",value:Ot[1],valueSpec:b,style:mt.style,styleSpec:mt.styleSpec}))}function ct(mt,St){var Ot=qr(mt.value),Zt=Ke(mt.value),Vt=mt.value!==null?mt.value:St;if(o){if(Ot!==o)return[new Nt(mt.key,Vt,Ot+" stop domain type must match previous stop domain type "+o)]}else o=Ot;if(Ot!=="number"&&Ot!=="string"&&Ot!=="boolean")return[new Nt(mt.key,Vt,"stop domain value must be a number, string, or boolean")];if(Ot!=="number"&&C!=="categorical"){var se="number expected, "+Ot+" found";return ea(b)&&C===void 0&&(se+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Nt(mt.key,Vt,se)]}return C!=="categorical"||Ot!=="number"||isFinite(Zt)&&Math.floor(Zt)===Zt?C!=="categorical"&&Ot==="number"&&u!==void 0&&Zt<u?[new Nt(mt.key,Vt,"stop domain values must appear in ascending order")]:(u=Zt,C==="categorical"&&Zt in S?[new Nt(mt.key,Vt,"stop domain values must be unique")]:(S[Zt]=!0,[])):[new Nt(mt.key,Vt,"integer expected, found "+Zt)]}}function ha(r){var o=(r.expressionContext==="property"?pl:pu)(Le(r.value),r.valueSpec);if(o.result==="error")return o.value.map(function(g){return new Nt(""+r.key+g.key,r.value,g.message)});var u=o.value.expression||o.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!u.outputDefined())return[new Nt(r.key,r.value,'Invalid data expression for "'+r.propertyKey+'". Output values must be contained as literals within the expression.')];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Pl(u))return[new Nt(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Pl(u))return[new Nt(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!_i(u,["zoom","feature-state"]))return[new Nt(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Us(u))return[new Nt(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ml(r){var o=r.key,u=r.value,g=r.valueSpec,b=[];return Array.isArray(g.values)?g.values.indexOf(Ke(u))===-1&&b.push(new Nt(o,u,"expected one of ["+g.values.join(", ")+"], "+JSON.stringify(u)+" found")):Object.keys(g.values).indexOf(Ke(u))===-1&&b.push(new Nt(o,u,"expected one of ["+Object.keys(g.values).join(", ")+"], "+JSON.stringify(u)+" found")),b}function Sc(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(var o=0,u=r.slice(1);o<u.length;o+=1){var g=u[o];if(!Sc(g)&&typeof g!="boolean")return!1}return!0;default:return!0}}Ss.deserialize=function(r){return new Ss(r._parameters,r._specification)},Ss.serialize=function(r){return{_parameters:r._parameters,_specification:r._specification}};var ch={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Nl(r){if(r==null)return{filter:function(){return!0},needGeometry:!1};Sc(r)||(r=Ra(r));var o=pu(r,ch);if(o.result==="error")throw new Error(o.value.map(function(u){return u.key+": "+u.message}).join(", "));return{filter:function(u,g,b){return o.value.evaluate(u,g,{},b)},needGeometry:function u(g){if(!Array.isArray(g))return!1;if(g[0]==="within")return!0;for(var b=1;b<g.length;b++)if(u(g[b]))return!0;return!1}(r)}}function mu(r,o){return r<o?-1:r>o?1:0}function Ra(r){if(!r)return!0;var o,u=r[0];return r.length<=1?u!=="any":u==="=="?pe(r[1],r[2],"=="):u==="!="?ir(pe(r[1],r[2],"==")):u==="<"||u===">"||u==="<="||u===">="?pe(r[1],r[2],u):u==="any"?(o=r.slice(1),["any"].concat(o.map(Ra))):u==="all"?["all"].concat(r.slice(1).map(Ra)):u==="none"?["all"].concat(r.slice(1).map(Ra).map(ir)):u==="in"?ze(r[1],r.slice(2)):u==="!in"?ir(ze(r[1],r.slice(2))):u==="has"?Sn(r[1]):u==="!has"?ir(Sn(r[1])):u!=="within"||r}function pe(r,o,u){switch(r){case"$type":return["filter-type-"+u,o];case"$id":return["filter-id-"+u,o];default:return["filter-"+u,r,o]}}function ze(r,o){if(o.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(function(u){return typeof u!=typeof o[0]})?["filter-in-large",r,["literal",o.sort(mu)]]:["filter-in-small",r,["literal",o]]}}function Sn(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function ir(r){return["!",r]}function zi(r){return Sc(Le(r.value))?ha(Ve({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function o(u){var g=u.value,b=u.key;if(qr(g)!=="array")return[new Nt(b,g,"array expected, "+qr(g)+" found")];var C,S=u.styleSpec,R=[];if(g.length<1)return[new Nt(b,g,"filter array must have at least 1 element")];switch(R=R.concat(ml({key:b+"[0]",value:g[0],valueSpec:S.filter_operator,style:u.style,styleSpec:u.styleSpec})),Ke(g[0])){case"<":case"<=":case">":case">=":g.length>=2&&Ke(g[1])==="$type"&&R.push(new Nt(b,g,'"$type" cannot be use with operator "'+g[0]+'"'));case"==":case"!=":g.length!==3&&R.push(new Nt(b,g,'filter array for operator "'+g[0]+'" must have 3 elements'));case"in":case"!in":g.length>=2&&(C=qr(g[1]))!=="string"&&R.push(new Nt(b+"[1]",g[1],"string expected, "+C+" found"));for(var j=2;j<g.length;j++)C=qr(g[j]),Ke(g[1])==="$type"?R=R.concat(ml({key:b+"["+j+"]",value:g[j],valueSpec:S.geometry_type,style:u.style,styleSpec:u.styleSpec})):C!=="string"&&C!=="number"&&C!=="boolean"&&R.push(new Nt(b+"["+j+"]",g[j],"string, number, or boolean expected, "+C+" found"));break;case"any":case"all":case"none":for(var K=1;K<g.length;K++)R=R.concat(o({key:b+"["+K+"]",value:g[K],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":C=qr(g[1]),g.length!==2?R.push(new Nt(b,g,'filter array for "'+g[0]+'" operator must have 2 elements')):C!=="string"&&R.push(new Nt(b+"[1]",g[1],"string expected, "+C+" found"));break;case"within":C=qr(g[1]),g.length!==2?R.push(new Nt(b,g,'filter array for "'+g[0]+'" operator must have 2 elements')):C!=="object"&&R.push(new Nt(b+"[1]",g[1],"object expected, "+C+" found"))}return R}(r)}function Yr(r,o){var u=r.key,g=r.style,b=r.styleSpec,C=r.value,S=r.objectKey,R=b[o+"_"+r.layerType];if(!R)return[];var j=S.match(/^(.*)-transition$/);if(o==="paint"&&j&&R[j[1]]&&R[j[1]].transition)return Dn({key:u,value:C,valueSpec:b.transition,style:g,styleSpec:b});var K,J=r.valueSpec||R[S];if(!J)return[new Nt(u,C,'unknown property "'+S+'"')];if(qr(C)==="string"&&ea(J)&&!J.tokens&&(K=/^{([^}]+)}$/.exec(C)))return[new Nt(u,C,'"'+S+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(K[1])+" }`.")];var nt=[];return r.layerType==="symbol"&&(S==="text-field"&&g&&!g.glyphs&&nt.push(new Nt(u,C,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&ju(Le(C))&&Ke(C.type)==="identity"&&nt.push(new Nt(u,C,'"text-font" does not support identity functions'))),nt.concat(Dn({key:r.key,value:C,valueSpec:J,style:g,styleSpec:b,expressionContext:"property",propertyType:o,propertyKey:S}))}function Ti(r){return Yr(r,"paint")}function oe(r){return Yr(r,"layout")}function Be(r){var o=[],u=r.value,g=r.key,b=r.style,C=r.styleSpec;u.type||u.ref||o.push(new Nt(g,u,'either "type" or "ref" is required'));var S,R=Ke(u.type),j=Ke(u.ref);if(u.id)for(var K=Ke(u.id),J=0;J<r.arrayIndex;J++){var nt=b.layers[J];Ke(nt.id)===K&&o.push(new Nt(g,u.id,'duplicate layer id "'+u.id+'", previously used at line '+nt.id.__line__))}if("ref"in u)["type","source","source-layer","filter","layout"].forEach(function(St){St in u&&o.push(new Nt(g,u[St],'"'+St+'" is prohibited for ref layers'))}),b.layers.forEach(function(St){Ke(St.id)===j&&(S=St)}),S?S.ref?o.push(new Nt(g,u.ref,"ref cannot reference another ref layer")):R=Ke(S.type):o.push(new Nt(g,u.ref,'ref layer "'+j+'" not found'));else if(R!=="background")if(u.source){var ct=b.sources&&b.sources[u.source],mt=ct&&Ke(ct.type);ct?mt==="vector"&&R==="raster"?o.push(new Nt(g,u.source,'layer "'+u.id+'" requires a raster source')):mt==="raster"&&R!=="raster"?o.push(new Nt(g,u.source,'layer "'+u.id+'" requires a vector source')):mt!=="vector"||u["source-layer"]?mt==="raster-dem"&&R!=="hillshade"?o.push(new Nt(g,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):R!=="line"||!u.paint||!u.paint["line-gradient"]||mt==="geojson"&&ct.lineMetrics||o.push(new Nt(g,u,'layer "'+u.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):o.push(new Nt(g,u,'layer "'+u.id+'" must specify a "source-layer"')):o.push(new Nt(g,u.source,'source "'+u.source+'" not found'))}else o.push(new Nt(g,u,'missing required property "source"'));return o=o.concat(na({key:g,value:u,valueSpec:C.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Dn({key:g+".type",value:u.type,valueSpec:C.layer.type,style:r.style,styleSpec:r.styleSpec,object:u,objectKey:"type"})},filter:zi,layout:function(St){return na({layer:u,key:St.key,value:St.value,style:St.style,styleSpec:St.styleSpec,objectElementValidators:{"*":function(Ot){return oe(Ve({layerType:R},Ot))}}})},paint:function(St){return na({layer:u,key:St.key,value:St.value,style:St.style,styleSpec:St.styleSpec,objectElementValidators:{"*":function(Ot){return Ti(Ve({layerType:R},Ot))}}})}}}))}function Ie(r){var o=r.value,u=r.key,g=qr(o);return g!=="string"?[new Nt(u,o,"string expected, "+g+" found")]:[]}var Ye={promoteId:function(r){var o=r.key,u=r.value;if(qr(u)==="string")return Ie({key:o,value:u});var g=[];for(var b in u)g.push.apply(g,Ie({key:o+"."+b,value:u[b]}));return g}};function fr(r){var o=r.value,u=r.key,g=r.styleSpec,b=r.style;if(!o.type)return[new Nt(u,o,'"type" is required')];var C,S=Ke(o.type);switch(S){case"vector":case"raster":case"raster-dem":return na({key:u,value:o,valueSpec:g["source_"+S.replace("-","_")],style:r.style,styleSpec:g,objectElementValidators:Ye});case"geojson":if(C=na({key:u,value:o,valueSpec:g.source_geojson,style:b,styleSpec:g,objectElementValidators:Ye}),o.cluster)for(var R in o.clusterProperties){var j=o.clusterProperties[R],K=j[0],J=typeof K=="string"?[K,["accumulated"],["get",R]]:K;C.push.apply(C,ha({key:u+"."+R+".map",value:j[1],expressionContext:"cluster-map"})),C.push.apply(C,ha({key:u+"."+R+".reduce",value:J,expressionContext:"cluster-reduce"}))}return C;case"video":return na({key:u,value:o,valueSpec:g.source_video,style:b,styleSpec:g});case"image":return na({key:u,value:o,valueSpec:g.source_image,style:b,styleSpec:g});case"canvas":return[new Nt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ml({key:u+".type",value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:b,styleSpec:g})}}function kr(r){var o=r.value,u=r.styleSpec,g=u.light,b=r.style,C=[],S=qr(o);if(o===void 0)return C;if(S!=="object")return C.concat([new Nt("light",o,"object expected, "+S+" found")]);for(var R in o){var j=R.match(/^(.*)-transition$/);C=C.concat(j&&g[j[1]]&&g[j[1]].transition?Dn({key:R,value:o[R],valueSpec:u.transition,style:b,styleSpec:u}):g[R]?Dn({key:R,value:o[R],valueSpec:g[R],style:b,styleSpec:u}):[new Nt(R,o[R],'unknown property "'+R+'"')])}return C}var Wr={"*":function(){return[]},array:Nh,boolean:function(r){var o=r.value,u=r.key,g=qr(o);return g!=="boolean"?[new Nt(u,o,"boolean expected, "+g+" found")]:[]},number:uh,color:function(r){var o=r.key,u=r.value,g=qr(u);return g!=="string"?[new Nt(o,u,"color expected, "+g+" found")]:br(u)===null?[new Nt(o,u,'color expected, "'+u+'" found')]:[]},constants:me,enum:ml,filter:zi,function:Zu,layer:Be,object:na,source:fr,light:kr,string:Ie,formatted:function(r){return Ie(r).length===0?[]:ha(r)},resolvedImage:function(r){return Ie(r).length===0?[]:ha(r)}};function Dn(r){var o=r.value,u=r.valueSpec,g=r.styleSpec;return u.expression&&ju(Ke(o))?Zu(r):u.expression&&Gu(Le(o))?ha(r):u.type&&Wr[u.type]?Wr[u.type](r):na(Ve({},r,{valueSpec:u.type?g[u.type]:u}))}function ri(r){var o=r.value,u=r.key,g=Ie(r);return g.length||(o.indexOf("{fontstack}")===-1&&g.push(new Nt(u,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&g.push(new Nt(u,o,'"glyphs" url must include a "{range}" token'))),g}function fa(r,o){o===void 0&&(o=gt);var u=[];return u=u.concat(Dn({key:"",value:r,valueSpec:o.$root,styleSpec:o,style:r,objectElementValidators:{glyphs:ri,"*":function(){return[]}}})),r.constants&&(u=u.concat(me({key:"constants",value:r.constants,style:r,styleSpec:o}))),Ao(u)}function Ao(r){return[].concat(r).sort(function(o,u){return o.line-u.line})}function Qa(r){return function(){for(var o=[],u=arguments.length;u--;)o[u]=arguments[u];return Ao(r.apply(this,o))}}fa.source=Qa(fr),fa.light=Qa(kr),fa.layer=Qa(Be),fa.filter=Qa(zi),fa.paintProperty=Qa(Ti),fa.layoutProperty=Qa(oe);var $u=fa,Ku=$u.light,hh=$u.paintProperty,ci=$u.layoutProperty;function tr(r,o){var u=!1;if(o&&o.length)for(var g=0,b=o;g<b.length;g+=1)r.fire(new qt(new Error(b[g].message))),u=!0;return u}var cs=Pi;function Pi(r,o,u){var g=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var b=new Int32Array(this.arrayBuffer);r=b[0],this.d=(o=b[1])+2*(u=b[2]);for(var C=0;C<this.d*this.d;C++){var S=b[3+C],R=b[3+C+1];g.push(S===R?null:b.subarray(S,R))}var j=b[3+g.length+1];this.keys=b.subarray(b[3+g.length],j),this.bboxes=b.subarray(j),this.insert=this._insertReadonly}else{this.d=o+2*u;for(var K=0;K<this.d*this.d;K++)g.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=r,this.padding=u,this.scale=o/r,this.uid=0;var J=u/o*r;this.min=-J,this.max=r+J}Pi.prototype.insert=function(r,o,u,g,b){this._forEachCell(o,u,g,b,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(b)},Pi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Pi.prototype._insertCell=function(r,o,u,g,b,C){this.cells[b].push(C)},Pi.prototype.query=function(r,o,u,g,b){var C=this.min,S=this.max;if(r<=C&&o<=C&&S<=u&&S<=g&&!b)return Array.prototype.slice.call(this.keys);var R=[];return this._forEachCell(r,o,u,g,this._queryCell,R,{},b),R},Pi.prototype._queryCell=function(r,o,u,g,b,C,S,R){var j=this.cells[b];if(j!==null)for(var K=this.keys,J=this.bboxes,nt=0;nt<j.length;nt++){var ct=j[nt];if(S[ct]===void 0){var mt=4*ct;(R?R(J[mt+0],J[mt+1],J[mt+2],J[mt+3]):r<=J[mt+2]&&o<=J[mt+3]&&u>=J[mt+0]&&g>=J[mt+1])?(S[ct]=!0,C.push(K[ct])):S[ct]=!1}}},Pi.prototype._forEachCell=function(r,o,u,g,b,C,S,R){for(var j=this._convertToCellCoord(r),K=this._convertToCellCoord(o),J=this._convertToCellCoord(u),nt=this._convertToCellCoord(g),ct=j;ct<=J;ct++)for(var mt=K;mt<=nt;mt++){var St=this.d*mt+ct;if((!R||R(this._convertFromCellCoord(ct),this._convertFromCellCoord(mt),this._convertFromCellCoord(ct+1),this._convertFromCellCoord(mt+1)))&&b.call(this,r,o,u,g,St,C,S,R))return}},Pi.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},Pi.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},Pi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,o=3+this.cells.length+1+1,u=0,g=0;g<this.cells.length;g++)u+=this.cells[g].length;var b=new Int32Array(o+u+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;for(var C=o,S=0;S<r.length;S++){var R=r[S];b[3+S]=C,b.set(R,C),C+=R.length}return b[3+r.length]=C,b.set(this.keys,C),b[3+r.length+1]=C+=this.keys.length,b.set(this.bboxes,C),C+=this.bboxes.length,b.buffer};var Gs=w.ImageData,Ja=w.ImageBitmap,wi={};function xn(r,o,u){u===void 0&&(u={}),Object.defineProperty(o,"_classRegistryKey",{value:r,writeable:!1}),wi[r]={klass:o,omit:u.omit||[],shallow:u.shallow||[]}}for(var wo in xn("Object",Object),cs.serialize=function(r,o){var u=r.toArrayBuffer();return o&&o.push(u),{buffer:u}},cs.deserialize=function(r){return new cs(r.buffer)},xn("Grid",cs),xn("Color",Tr),xn("Error",Error),xn("ResolvedImage",ta),xn("StylePropertyFunction",Ss),xn("StyleExpression",Fl,{omit:["_evaluator"]}),xn("ZoomDependentExpression",Wu),xn("ZoomConstantExpression",Hs),xn("CompoundExpression",zt,{omit:["_evaluate"]}),zl)zl[wo]._classRegistryKey||xn("Expression_"+wo,zl[wo]);function Da(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function za(r){return Ja&&r instanceof Ja}function Zo(r,o){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(Da(r)||za(r))return o&&o.push(r),r;if(ArrayBuffer.isView(r)){var u=r;return o&&o.push(u.buffer),u}if(r instanceof Gs)return o&&o.push(r.data.buffer),r;if(Array.isArray(r)){for(var g=[],b=0,C=r;b<C.length;b+=1)g.push(Zo(C[b],o));return g}if(typeof r=="object"){var S=r.constructor,R=S._classRegistryKey;if(!R)throw new Error("can't serialize object of unregistered class");var j=S.serialize?S.serialize(r,o):{};if(!S.serialize){for(var K in r)if(r.hasOwnProperty(K)&&!(wi[R].omit.indexOf(K)>=0)){var J=r[K];j[K]=wi[R].shallow.indexOf(K)>=0?J:Zo(J,o)}r instanceof Error&&(j.message=r.message)}if(j.$name)throw new Error("$name property is reserved for worker serialization logic.");return R!=="Object"&&(j.$name=R),j}throw new Error("can't serialize object of type "+typeof r)}function $o(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||Da(r)||za(r)||ArrayBuffer.isView(r)||r instanceof Gs)return r;if(Array.isArray(r))return r.map($o);if(typeof r=="object"){var o=r.$name||"Object",u=wi[o].klass;if(!u)throw new Error("can't deserialize unregistered class "+o);if(u.deserialize)return u.deserialize(r);for(var g=Object.create(u.prototype),b=0,C=Object.keys(r);b<C.length;b+=1){var S=C[b];if(S!=="$name"){var R=r[S];g[S]=wi[o].shallow.indexOf(S)>=0?R:$o(R)}}return g}throw new Error("can't deserialize object of type "+typeof r)}var gu=function(){this.first=!0};gu.prototype.update=function(r,o){var u=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=o),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=u,!0))};var sn={"Latin-1 Supplement":function(r){return r>=128&&r<=255},Arabic:function(r){return r>=1536&&r<=1791},"Arabic Supplement":function(r){return r>=1872&&r<=1919},"Arabic Extended-A":function(r){return r>=2208&&r<=2303},"Hangul Jamo":function(r){return r>=4352&&r<=4607},"Unified Canadian Aboriginal Syllabics":function(r){return r>=5120&&r<=5759},Khmer:function(r){return r>=6016&&r<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(r){return r>=6320&&r<=6399},"General Punctuation":function(r){return r>=8192&&r<=8303},"Letterlike Symbols":function(r){return r>=8448&&r<=8527},"Number Forms":function(r){return r>=8528&&r<=8591},"Miscellaneous Technical":function(r){return r>=8960&&r<=9215},"Control Pictures":function(r){return r>=9216&&r<=9279},"Optical Character Recognition":function(r){return r>=9280&&r<=9311},"Enclosed Alphanumerics":function(r){return r>=9312&&r<=9471},"Geometric Shapes":function(r){return r>=9632&&r<=9727},"Miscellaneous Symbols":function(r){return r>=9728&&r<=9983},"Miscellaneous Symbols and Arrows":function(r){return r>=11008&&r<=11263},"CJK Radicals Supplement":function(r){return r>=11904&&r<=12031},"Kangxi Radicals":function(r){return r>=12032&&r<=12255},"Ideographic Description Characters":function(r){return r>=12272&&r<=12287},"CJK Symbols and Punctuation":function(r){return r>=12288&&r<=12351},Hiragana:function(r){return r>=12352&&r<=12447},Katakana:function(r){return r>=12448&&r<=12543},Bopomofo:function(r){return r>=12544&&r<=12591},"Hangul Compatibility Jamo":function(r){return r>=12592&&r<=12687},Kanbun:function(r){return r>=12688&&r<=12703},"Bopomofo Extended":function(r){return r>=12704&&r<=12735},"CJK Strokes":function(r){return r>=12736&&r<=12783},"Katakana Phonetic Extensions":function(r){return r>=12784&&r<=12799},"Enclosed CJK Letters and Months":function(r){return r>=12800&&r<=13055},"CJK Compatibility":function(r){return r>=13056&&r<=13311},"CJK Unified Ideographs Extension A":function(r){return r>=13312&&r<=19903},"Yijing Hexagram Symbols":function(r){return r>=19904&&r<=19967},"CJK Unified Ideographs":function(r){return r>=19968&&r<=40959},"Yi Syllables":function(r){return r>=40960&&r<=42127},"Yi Radicals":function(r){return r>=42128&&r<=42191},"Hangul Jamo Extended-A":function(r){return r>=43360&&r<=43391},"Hangul Syllables":function(r){return r>=44032&&r<=55215},"Hangul Jamo Extended-B":function(r){return r>=55216&&r<=55295},"Private Use Area":function(r){return r>=57344&&r<=63743},"CJK Compatibility Ideographs":function(r){return r>=63744&&r<=64255},"Arabic Presentation Forms-A":function(r){return r>=64336&&r<=65023},"Vertical Forms":function(r){return r>=65040&&r<=65055},"CJK Compatibility Forms":function(r){return r>=65072&&r<=65103},"Small Form Variants":function(r){return r>=65104&&r<=65135},"Arabic Presentation Forms-B":function(r){return r>=65136&&r<=65279},"Halfwidth and Fullwidth Forms":function(r){return r>=65280&&r<=65519}};function gl(r){for(var o=0,u=r;o<u.length;o+=1)if(Ul(u[o].charCodeAt(0)))return!0;return!1}function Ul(r){return!(r!==746&&r!==747&&(r<4352||!(sn["Bopomofo Extended"](r)||sn.Bopomofo(r)||sn["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||sn["CJK Compatibility Ideographs"](r)||sn["CJK Compatibility"](r)||sn["CJK Radicals Supplement"](r)||sn["CJK Strokes"](r)||!(!sn["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||sn["CJK Unified Ideographs Extension A"](r)||sn["CJK Unified Ideographs"](r)||sn["Enclosed CJK Letters and Months"](r)||sn["Hangul Compatibility Jamo"](r)||sn["Hangul Jamo Extended-A"](r)||sn["Hangul Jamo Extended-B"](r)||sn["Hangul Jamo"](r)||sn["Hangul Syllables"](r)||sn.Hiragana(r)||sn["Ideographic Description Characters"](r)||sn.Kanbun(r)||sn["Kangxi Radicals"](r)||sn["Katakana Phonetic Extensions"](r)||sn.Katakana(r)&&r!==12540||!(!sn["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!sn["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||sn["Unified Canadian Aboriginal Syllabics"](r)||sn["Unified Canadian Aboriginal Syllabics Extended"](r)||sn["Vertical Forms"](r)||sn["Yijing Hexagram Symbols"](r)||sn["Yi Syllables"](r)||sn["Yi Radicals"](r))))}function Vl(r){return!(Ul(r)||function(o){return!!(sn["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||sn["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||sn["Letterlike Symbols"](o)||sn["Number Forms"](o)||sn["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||sn["Control Pictures"](o)&&o!==9251||sn["Optical Character Recognition"](o)||sn["Enclosed Alphanumerics"](o)||sn["Geometric Shapes"](o)||sn["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||sn["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||sn["CJK Symbols and Punctuation"](o)||sn.Katakana(o)||sn["Private Use Area"](o)||sn["CJK Compatibility Forms"](o)||sn["Small Form Variants"](o)||sn["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(r))}function Co(r){return r>=1424&&r<=2303||sn["Arabic Presentation Forms-A"](r)||sn["Arabic Presentation Forms-B"](r)}function Po(r,o){return!(!o&&Co(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||sn.Khmer(r))}function Ff(r){for(var o=0,u=r;o<u.length;o+=1)if(Co(u[o].charCodeAt(0)))return!0;return!1}var Nf=null,hs="unavailable",Ws=null,Uh=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(hs="error"),Nf&&Nf(r)};function Mc(){Hd.fire(new Rt("pluginStateChange",{pluginStatus:hs,pluginURL:Ws}))}var Hd=new te,Uf=function(){return hs},vl=function(){if(hs!=="deferred"||!Ws)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");hs="loading",Mc(),Ws&&Ns({url:Ws},function(r){r?Uh(r):(hs="loaded",Mc())})},Ms={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return hs==="loaded"||Ms.applyArabicShaping!=null},isLoading:function(){return hs==="loading"},setState:function(r){hs=r.pluginStatus,Ws=r.pluginURL},isParsed:function(){return Ms.applyArabicShaping!=null&&Ms.processBidirectionalText!=null&&Ms.processStyledBidirectionalText!=null},getPluginURL:function(){return Ws}},or=function(r,o){this.zoom=r,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new gu,this.transition={})};or.prototype.isSupportedScript=function(r){return function(o,u){for(var g=0,b=o;g<b.length;g+=1)if(!Po(b[g].charCodeAt(0),u))return!1;return!0}(r,Ms.isLoaded())},or.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},or.prototype.getCrossfadeParameters=function(){var r=this.zoom,o=r-Math.floor(r),u=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*o}};var lo=function(r,o){this.property=r,this.value=o,this.expression=function(u,g){if(ju(u))return new Ss(u,g);if(Gu(u)){var b=pl(u,g);if(b.result==="error")throw new Error(b.value.map(function(S){return S.key+": "+S.message}).join(", "));return b.value}var C=u;return typeof u=="string"&&g.type==="color"&&(C=Tr.parse(u)),{kind:"constant",evaluate:function(){return C}}}(o===void 0?r.specification.default:o,r.specification)};lo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},lo.prototype.possiblyEvaluate=function(r,o,u){return this.property.possiblyEvaluate(this,r,o,u)};var Zs=function(r){this.property=r,this.value=new lo(r,void 0)};Zs.prototype.transitioned=function(r,o){return new qu(this.property,this.value,o,D({},r.transition,this.transition),r.now)},Zs.prototype.untransitioned=function(){return new qu(this.property,this.value,null,{},0)};var da=function(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)};da.prototype.getValue=function(r){return pt(this._values[r].value.value)},da.prototype.setValue=function(r,o){this._values.hasOwnProperty(r)||(this._values[r]=new Zs(this._values[r].property)),this._values[r].value=new lo(this._values[r].property,o===null?void 0:pt(o))},da.prototype.getTransition=function(r){return pt(this._values[r].transition)},da.prototype.setTransition=function(r,o){this._values.hasOwnProperty(r)||(this._values[r]=new Zs(this._values[r].property)),this._values[r].transition=pt(o)||void 0},da.prototype.serialize=function(){for(var r={},o=0,u=Object.keys(this._values);o<u.length;o+=1){var g=u[o],b=this.getValue(g);b!==void 0&&(r[g]=b);var C=this.getTransition(g);C!==void 0&&(r[g+"-transition"]=C)}return r},da.prototype.transitioned=function(r,o){for(var u=new Yu(this._properties),g=0,b=Object.keys(this._values);g<b.length;g+=1){var C=b[g];u._values[C]=this._values[C].transitioned(r,o._values[C])}return u},da.prototype.untransitioned=function(){for(var r=new Yu(this._properties),o=0,u=Object.keys(this._values);o<u.length;o+=1){var g=u[o];r._values[g]=this._values[g].untransitioned()}return r};var qu=function(r,o,u,g,b){this.property=r,this.value=o,this.begin=b+g.delay||0,this.end=this.begin+g.duration||0,r.specification.transition&&(g.delay||g.duration)&&(this.prior=u)};qu.prototype.possiblyEvaluate=function(r,o,u){var g=r.now||0,b=this.value.possiblyEvaluate(r,o,u),C=this.prior;if(C){if(g>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(g<this.begin)return C.possiblyEvaluate(r,o,u);var S=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(r,o,u),b,function(R){if(R<=0)return 0;if(R>=1)return 1;var j=R*R,K=j*R;return 4*(R<.5?K:3*(R-j)+K-.75)}(S))}return b};var Yu=function(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)};Yu.prototype.possiblyEvaluate=function(r,o,u){for(var g=new Tc(this._properties),b=0,C=Object.keys(this._values);b<C.length;b+=1){var S=C[b];g._values[S]=this._values[S].possiblyEvaluate(r,o,u)}return g},Yu.prototype.hasTransition=function(){for(var r=0,o=Object.keys(this._values);r<o.length;r+=1)if(this._values[o[r]].prior)return!0;return!1};var Ts=function(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)};Ts.prototype.getValue=function(r){return pt(this._values[r].value)},Ts.prototype.setValue=function(r,o){this._values[r]=new lo(this._values[r].property,o===null?void 0:pt(o))},Ts.prototype.serialize=function(){for(var r={},o=0,u=Object.keys(this._values);o<u.length;o+=1){var g=u[o],b=this.getValue(g);b!==void 0&&(r[g]=b)}return r},Ts.prototype.possiblyEvaluate=function(r,o,u){for(var g=new Tc(this._properties),b=0,C=Object.keys(this._values);b<C.length;b+=1){var S=C[b];g._values[S]=this._values[S].possiblyEvaluate(r,o,u)}return g};var Ko=function(r,o,u){this.property=r,this.value=o,this.parameters=u};Ko.prototype.isConstant=function(){return this.value.kind==="constant"},Ko.prototype.constantOr=function(r){return this.value.kind==="constant"?this.value.value:r},Ko.prototype.evaluate=function(r,o,u,g){return this.property.evaluate(this.value,this.parameters,r,o,u,g)};var Tc=function(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)};Tc.prototype.get=function(r){return this._values[r]};var Nn=function(r){this.specification=r};Nn.prototype.possiblyEvaluate=function(r,o){return r.expression.evaluate(o)},Nn.prototype.interpolate=function(r,o,u){var g=hu[this.specification.type];return g?g(r,o,u):r};var Ln=function(r,o){this.specification=r,this.overrides=o};Ln.prototype.possiblyEvaluate=function(r,o,u,g){return new Ko(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(o,null,{},u,g)}:r.expression,o)},Ln.prototype.interpolate=function(r,o,u){if(r.value.kind!=="constant"||o.value.kind!=="constant")return r;if(r.value.value===void 0||o.value.value===void 0)return new Ko(this,{kind:"constant",value:void 0},r.parameters);var g=hu[this.specification.type];return g?new Ko(this,{kind:"constant",value:g(r.value.value,o.value.value,u)},r.parameters):r},Ln.prototype.evaluate=function(r,o,u,g,b,C){return r.kind==="constant"?r.value:r.evaluate(o,u,g,b,C)};var Xu=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.possiblyEvaluate=function(u,g,b,C){if(u.value===void 0)return new Ko(this,{kind:"constant",value:void 0},g);if(u.expression.kind==="constant"){var S=u.expression.evaluate(g,null,{},b,C),R=u.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,j=this._calculate(R,R,R,g);return new Ko(this,{kind:"constant",value:j},g)}if(u.expression.kind==="camera"){var K=this._calculate(u.expression.evaluate({zoom:g.zoom-1}),u.expression.evaluate({zoom:g.zoom}),u.expression.evaluate({zoom:g.zoom+1}),g);return new Ko(this,{kind:"constant",value:K},g)}return new Ko(this,u.expression,g)},o.prototype.evaluate=function(u,g,b,C,S,R){if(u.kind==="source"){var j=u.evaluate(g,b,C,S,R);return this._calculate(j,j,j,g)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(g.zoom)-1},b,C),u.evaluate({zoom:Math.floor(g.zoom)},b,C),u.evaluate({zoom:Math.floor(g.zoom)+1},b,C),g):u.value},o.prototype._calculate=function(u,g,b,C){return C.zoom>C.zoomHistory.lastIntegerZoom?{from:u,to:g}:{from:b,to:g}},o.prototype.interpolate=function(u){return u},o}(Ln),ra=function(r){this.specification=r};ra.prototype.possiblyEvaluate=function(r,o,u,g){if(r.value!==void 0){if(r.expression.kind==="constant"){var b=r.expression.evaluate(o,null,{},u,g);return this._calculate(b,b,b,o)}return this._calculate(r.expression.evaluate(new or(Math.floor(o.zoom-1),o)),r.expression.evaluate(new or(Math.floor(o.zoom),o)),r.expression.evaluate(new or(Math.floor(o.zoom+1),o)),o)}},ra.prototype._calculate=function(r,o,u,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:u,to:o}},ra.prototype.interpolate=function(r){return r};var Ba=function(r){this.specification=r};Ba.prototype.possiblyEvaluate=function(r,o,u,g){return!!r.expression.evaluate(o,null,{},u,g)},Ba.prototype.interpolate=function(){return!1};var pa=function(r){for(var o in this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],r){var u=r[o];u.specification.overridable&&this.overridableProperties.push(o);var g=this.defaultPropertyValues[o]=new lo(u,void 0),b=this.defaultTransitionablePropertyValues[o]=new Zs(u);this.defaultTransitioningPropertyValues[o]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=g.possiblyEvaluate({})}};xn("DataDrivenProperty",Ln),xn("DataConstantProperty",Nn),xn("CrossFadedDataDrivenProperty",Xu),xn("CrossFadedProperty",ra),xn("ColorRampProperty",Ba);var jl=function(r){function o(u,g){if(r.call(this),this.id=u.id,this.type=u.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},u.type!=="custom"&&(this.metadata=(u=u).metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),g.layout&&(this._unevaluatedLayout=new Ts(g.layout)),g.paint)){for(var b in this._transitionablePaint=new da(g.paint),u.paint)this.setPaintProperty(b,u.paint[b],{validate:!1});for(var C in u.layout)this.setLayoutProperty(C,u.layout[C],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Tc(g.paint)}}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},o.prototype.getLayoutProperty=function(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)},o.prototype.setLayoutProperty=function(u,g,b){b===void 0&&(b={}),g!=null&&this._validate(ci,"layers."+this.id+".layout."+u,u,g,b)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,g):this.visibility=g)},o.prototype.getPaintProperty=function(u){return Y(u,"-transition")?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)},o.prototype.setPaintProperty=function(u,g,b){if(b===void 0&&(b={}),g!=null&&this._validate(hh,"layers."+this.id+".paint."+u,u,g,b))return!1;if(Y(u,"-transition"))return this._transitionablePaint.setTransition(u.slice(0,-11),g||void 0),!1;var C=this._transitionablePaint._values[u],S=C.property.specification["property-type"]==="cross-faded-data-driven",R=C.value.isDataDriven(),j=C.value;this._transitionablePaint.setValue(u,g),this._handleSpecialPaintPropertyUpdate(u);var K=this._transitionablePaint._values[u].value;return K.isDataDriven()||R||S||this._handleOverridablePaintPropertyUpdate(u,j,K)},o.prototype._handleSpecialPaintPropertyUpdate=function(u){},o.prototype._handleOverridablePaintPropertyUpdate=function(u,g,b){return!1},o.prototype.isHidden=function(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"},o.prototype.updateTransitions=function(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)},o.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},o.prototype.recalculate=function(u,g){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,g)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,g)},o.prototype.serialize=function(){var u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),rt(u,function(g,b){return!(g===void 0||b==="layout"&&!Object.keys(g).length||b==="paint"&&!Object.keys(g).length)})},o.prototype._validate=function(u,g,b,C,S){return S===void 0&&(S={}),(!S||S.validate!==!1)&&tr(this,u.call($u,{key:g,layerType:this.type,objectKey:b,value:C,styleSpec:gt,style:{glyphs:!0,sprite:!0}}))},o.prototype.is3D=function(){return!1},o.prototype.isTileClipped=function(){return!1},o.prototype.hasOffscreenPass=function(){return!1},o.prototype.resize=function(){},o.prototype.isStateDependent=function(){for(var u in this.paint._values){var g=this.paint.get(u);if(g instanceof Ko&&ea(g.property.specification)&&(g.value.kind==="source"||g.value.kind==="composite")&&g.value.isStateDependent)return!0}return!1},o}(te),Gd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Vf=function(r,o){this._structArray=r,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},vi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ko(r,o){o===void 0&&(o=1);var u=0,g=0;return{members:r.map(function(b){var C=Gd[b.type].BYTES_PER_ELEMENT,S=u=fh(u,Math.max(o,C)),R=b.components||1;return g=Math.max(g,C),u+=C*R,{name:b.name,type:b.type,components:R,offset:S}}),size:fh(u,Math.max(g,o)),alignment:o}}function fh(r,o){return Math.ceil(r/o)*o}vi.serialize=function(r,o){return r._trim(),o&&(r.isTransferred=!0,o.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}},vi.deserialize=function(r){var o=Object.create(this.prototype);return o.arrayBuffer=r.arrayBuffer,o.length=r.length,o.capacity=r.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o},vi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},vi.prototype.clear=function(){this.length=0},vi.prototype.resize=function(r){this.reserve(r),this.length=r},vi.prototype.reserve=function(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}},vi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Qu=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g){var b=this.length;return this.resize(b+1),this.emplace(b,u,g)},o.prototype.emplace=function(u,g,b){var C=2*u;return this.int16[C+0]=g,this.int16[C+1]=b,u},o}(vi);Qu.prototype.bytesPerElement=4,xn("StructArrayLayout2i4",Qu);var bt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b,C){var S=this.length;return this.resize(S+1),this.emplace(S,u,g,b,C)},o.prototype.emplace=function(u,g,b,C,S){var R=4*u;return this.int16[R+0]=g,this.int16[R+1]=b,this.int16[R+2]=C,this.int16[R+3]=S,u},o}(vi);bt.prototype.bytesPerElement=8,xn("StructArrayLayout4i8",bt);var fs=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b,C,S,R){var j=this.length;return this.resize(j+1),this.emplace(j,u,g,b,C,S,R)},o.prototype.emplace=function(u,g,b,C,S,R,j){var K=6*u;return this.int16[K+0]=g,this.int16[K+1]=b,this.int16[K+2]=C,this.int16[K+3]=S,this.int16[K+4]=R,this.int16[K+5]=j,u},o}(vi);fs.prototype.bytesPerElement=12,xn("StructArrayLayout2i4i12",fs);var Ca=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b,C,S,R){var j=this.length;return this.resize(j+1),this.emplace(j,u,g,b,C,S,R)},o.prototype.emplace=function(u,g,b,C,S,R,j){var K=4*u,J=8*u;return this.int16[K+0]=g,this.int16[K+1]=b,this.uint8[J+4]=C,this.uint8[J+5]=S,this.uint8[J+6]=R,this.uint8[J+7]=j,u},o}(vi);Ca.prototype.bytesPerElement=8,xn("StructArrayLayout2i4ub8",Ca);var Ia=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g){var b=this.length;return this.resize(b+1),this.emplace(b,u,g)},o.prototype.emplace=function(u,g,b){var C=2*u;return this.float32[C+0]=g,this.float32[C+1]=b,u},o}(vi);Ia.prototype.bytesPerElement=8,xn("StructArrayLayout2f8",Ia);var Br=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b,C,S,R,j,K,J,nt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,u,g,b,C,S,R,j,K,J,nt)},o.prototype.emplace=function(u,g,b,C,S,R,j,K,J,nt,ct){var mt=10*u;return this.uint16[mt+0]=g,this.uint16[mt+1]=b,this.uint16[mt+2]=C,this.uint16[mt+3]=S,this.uint16[mt+4]=R,this.uint16[mt+5]=j,this.uint16[mt+6]=K,this.uint16[mt+7]=J,this.uint16[mt+8]=nt,this.uint16[mt+9]=ct,u},o}(vi);Br.prototype.bytesPerElement=20,xn("StructArrayLayout10ui20",Br);var jf=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b,C,S,R,j,K,J,nt,ct,mt){var St=this.length;return this.resize(St+1),this.emplace(St,u,g,b,C,S,R,j,K,J,nt,ct,mt)},o.prototype.emplace=function(u,g,b,C,S,R,j,K,J,nt,ct,mt,St){var Ot=12*u;return this.int16[Ot+0]=g,this.int16[Ot+1]=b,this.int16[Ot+2]=C,this.int16[Ot+3]=S,this.uint16[Ot+4]=R,this.uint16[Ot+5]=j,this.uint16[Ot+6]=K,this.uint16[Ot+7]=J,this.int16[Ot+8]=nt,this.int16[Ot+9]=ct,this.int16[Ot+10]=mt,this.int16[Ot+11]=St,u},o}(vi);jf.prototype.bytesPerElement=24,xn("StructArrayLayout4i4ui4i24",jf);var dh=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b){var C=this.length;return this.resize(C+1),this.emplace(C,u,g,b)},o.prototype.emplace=function(u,g,b,C){var S=3*u;return this.float32[S+0]=g,this.float32[S+1]=b,this.float32[S+2]=C,u},o}(vi);dh.prototype.bytesPerElement=12,xn("StructArrayLayout3f12",dh);var Vh=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u){var g=this.length;return this.resize(g+1),this.emplace(g,u)},o.prototype.emplace=function(u,g){return this.uint32[1*u+0]=g,u},o}(vi);Vh.prototype.bytesPerElement=4,xn("StructArrayLayout1ul4",Vh);var vu=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b,C,S,R,j,K,J){var nt=this.length;return this.resize(nt+1),this.emplace(nt,u,g,b,C,S,R,j,K,J)},o.prototype.emplace=function(u,g,b,C,S,R,j,K,J,nt){var ct=10*u,mt=5*u;return this.int16[ct+0]=g,this.int16[ct+1]=b,this.int16[ct+2]=C,this.int16[ct+3]=S,this.int16[ct+4]=R,this.int16[ct+5]=j,this.uint32[mt+3]=K,this.uint16[ct+8]=J,this.uint16[ct+9]=nt,u},o}(vi);vu.prototype.bytesPerElement=20,xn("StructArrayLayout6i1ul2ui20",vu);var ph=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b,C,S,R){var j=this.length;return this.resize(j+1),this.emplace(j,u,g,b,C,S,R)},o.prototype.emplace=function(u,g,b,C,S,R,j){var K=6*u;return this.int16[K+0]=g,this.int16[K+1]=b,this.int16[K+2]=C,this.int16[K+3]=S,this.int16[K+4]=R,this.int16[K+5]=j,u},o}(vi);ph.prototype.bytesPerElement=12,xn("StructArrayLayout2i2i2i12",ph);var Pc=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b,C,S){var R=this.length;return this.resize(R+1),this.emplace(R,u,g,b,C,S)},o.prototype.emplace=function(u,g,b,C,S,R){var j=4*u,K=8*u;return this.float32[j+0]=g,this.float32[j+1]=b,this.float32[j+2]=C,this.int16[K+6]=S,this.int16[K+7]=R,u},o}(vi);Pc.prototype.bytesPerElement=16,xn("StructArrayLayout2f1f2i16",Pc);var Wd=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b,C){var S=this.length;return this.resize(S+1),this.emplace(S,u,g,b,C)},o.prototype.emplace=function(u,g,b,C,S){var R=12*u,j=3*u;return this.uint8[R+0]=g,this.uint8[R+1]=b,this.float32[j+1]=C,this.float32[j+2]=S,u},o}(vi);Wd.prototype.bytesPerElement=12,xn("StructArrayLayout2ub2f12",Wd);var Ju=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b){var C=this.length;return this.resize(C+1),this.emplace(C,u,g,b)},o.prototype.emplace=function(u,g,b,C){var S=3*u;return this.uint16[S+0]=g,this.uint16[S+1]=b,this.uint16[S+2]=C,u},o}(vi);Ju.prototype.bytesPerElement=6,xn("StructArrayLayout3ui6",Ju);var tc=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b,C,S,R,j,K,J,nt,ct,mt,St,Ot,Zt,Vt,se){var ye=this.length;return this.resize(ye+1),this.emplace(ye,u,g,b,C,S,R,j,K,J,nt,ct,mt,St,Ot,Zt,Vt,se)},o.prototype.emplace=function(u,g,b,C,S,R,j,K,J,nt,ct,mt,St,Ot,Zt,Vt,se,ye){var Ee=24*u,Pe=12*u,Ne=48*u;return this.int16[Ee+0]=g,this.int16[Ee+1]=b,this.uint16[Ee+2]=C,this.uint16[Ee+3]=S,this.uint32[Pe+2]=R,this.uint32[Pe+3]=j,this.uint32[Pe+4]=K,this.uint16[Ee+10]=J,this.uint16[Ee+11]=nt,this.uint16[Ee+12]=ct,this.float32[Pe+7]=mt,this.float32[Pe+8]=St,this.uint8[Ne+36]=Ot,this.uint8[Ne+37]=Zt,this.uint8[Ne+38]=Vt,this.uint32[Pe+10]=se,this.int16[Ee+22]=ye,u},o}(vi);tc.prototype.bytesPerElement=48,xn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",tc);var $s=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b,C,S,R,j,K,J,nt,ct,mt,St,Ot,Zt,Vt,se,ye,Ee,Pe,Ne,Je,cn,Vn,_n,$n,wn,Sr){var ar=this.length;return this.resize(ar+1),this.emplace(ar,u,g,b,C,S,R,j,K,J,nt,ct,mt,St,Ot,Zt,Vt,se,ye,Ee,Pe,Ne,Je,cn,Vn,_n,$n,wn,Sr)},o.prototype.emplace=function(u,g,b,C,S,R,j,K,J,nt,ct,mt,St,Ot,Zt,Vt,se,ye,Ee,Pe,Ne,Je,cn,Vn,_n,$n,wn,Sr,ar){var Rn=34*u,Or=17*u;return this.int16[Rn+0]=g,this.int16[Rn+1]=b,this.int16[Rn+2]=C,this.int16[Rn+3]=S,this.int16[Rn+4]=R,this.int16[Rn+5]=j,this.int16[Rn+6]=K,this.int16[Rn+7]=J,this.uint16[Rn+8]=nt,this.uint16[Rn+9]=ct,this.uint16[Rn+10]=mt,this.uint16[Rn+11]=St,this.uint16[Rn+12]=Ot,this.uint16[Rn+13]=Zt,this.uint16[Rn+14]=Vt,this.uint16[Rn+15]=se,this.uint16[Rn+16]=ye,this.uint16[Rn+17]=Ee,this.uint16[Rn+18]=Pe,this.uint16[Rn+19]=Ne,this.uint16[Rn+20]=Je,this.uint16[Rn+21]=cn,this.uint16[Rn+22]=Vn,this.uint32[Or+12]=_n,this.float32[Or+13]=$n,this.float32[Or+14]=wn,this.float32[Or+15]=Sr,this.float32[Or+16]=ar,u},o}(vi);$s.prototype.bytesPerElement=68,xn("StructArrayLayout8i15ui1ul4f68",$s);var ec=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u){var g=this.length;return this.resize(g+1),this.emplace(g,u)},o.prototype.emplace=function(u,g){return this.float32[1*u+0]=g,u},o}(vi);ec.prototype.bytesPerElement=4,xn("StructArrayLayout1f4",ec);var Ks=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b){var C=this.length;return this.resize(C+1),this.emplace(C,u,g,b)},o.prototype.emplace=function(u,g,b,C){var S=3*u;return this.int16[S+0]=g,this.int16[S+1]=b,this.int16[S+2]=C,u},o}(vi);Ks.prototype.bytesPerElement=6,xn("StructArrayLayout3i6",Ks);var Zd=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b){var C=this.length;return this.resize(C+1),this.emplace(C,u,g,b)},o.prototype.emplace=function(u,g,b,C){var S=4*u;return this.uint32[2*u+0]=g,this.uint16[S+2]=b,this.uint16[S+3]=C,u},o}(vi);Zd.prototype.bytesPerElement=8,xn("StructArrayLayout1ul2ui8",Zd);var jh=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g){var b=this.length;return this.resize(b+1),this.emplace(b,u,g)},o.prototype.emplace=function(u,g,b){var C=2*u;return this.uint16[C+0]=g,this.uint16[C+1]=b,u},o}(vi);jh.prototype.bytesPerElement=4,xn("StructArrayLayout2ui4",jh);var $d=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u){var g=this.length;return this.resize(g+1),this.emplace(g,u)},o.prototype.emplace=function(u,g){return this.uint16[1*u+0]=g,u},o}(vi);$d.prototype.bytesPerElement=2,xn("StructArrayLayout1ui2",$d);var qs=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,g,b,C){var S=this.length;return this.resize(S+1),this.emplace(S,u,g,b,C)},o.prototype.emplace=function(u,g,b,C,S){var R=4*u;return this.float32[R+0]=g,this.float32[R+1]=b,this.float32[R+2]=C,this.float32[R+3]=S,u},o}(vi);qs.prototype.bytesPerElement=16,xn("StructArrayLayout4f16",qs);var c=function(r){function o(){r.apply(this,arguments)}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var u={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return u.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},u.x1.get=function(){return this._structArray.int16[this._pos2+2]},u.y1.get=function(){return this._structArray.int16[this._pos2+3]},u.x2.get=function(){return this._structArray.int16[this._pos2+4]},u.y2.get=function(){return this._structArray.int16[this._pos2+5]},u.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},u.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},u.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},u.anchorPoint.get=function(){return new x(this.anchorPointX,this.anchorPointY)},Object.defineProperties(o.prototype,u),o}(Vf);c.prototype.size=20;var d=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.get=function(u){return new c(this,u)},o}(vu);xn("CollisionBoxArray",d);var h=function(r){function o(){r.apply(this,arguments)}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var u={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return u.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},u.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},u.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},u.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},u.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},u.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},u.segment.get=function(){return this._structArray.uint16[this._pos2+10]},u.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},u.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},u.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},u.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},u.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},u.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},u.placedOrientation.set=function(g){this._structArray.uint8[this._pos1+37]=g},u.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},u.hidden.set=function(g){this._structArray.uint8[this._pos1+38]=g},u.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},u.crossTileID.set=function(g){this._structArray.uint32[this._pos4+10]=g},u.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(o.prototype,u),o}(Vf);h.prototype.size=48;var v=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.get=function(u){return new h(this,u)},o}(tc);xn("PlacedSymbolArray",v);var I=function(r){function o(){r.apply(this,arguments)}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var u={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return u.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},u.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},u.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},u.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},u.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},u.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},u.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},u.key.get=function(){return this._structArray.uint16[this._pos2+8]},u.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},u.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},u.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},u.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},u.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},u.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},u.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},u.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},u.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},u.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},u.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},u.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},u.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},u.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},u.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},u.crossTileID.set=function(g){this._structArray.uint32[this._pos4+12]=g},u.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},u.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},u.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},u.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(o.prototype,u),o}(Vf);I.prototype.size=68;var M=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.get=function(u){return new I(this,u)},o}($s);xn("SymbolInstanceArray",M);var O=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getoffsetX=function(u){return this.float32[1*u+0]},o}(ec);xn("GlyphOffsetArray",O);var V=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getx=function(u){return this.int16[3*u+0]},o.prototype.gety=function(u){return this.int16[3*u+1]},o.prototype.gettileUnitDistanceFromAnchor=function(u){return this.int16[3*u+2]},o}(Ks);xn("SymbolLineVertexArray",V);var X=function(r){function o(){r.apply(this,arguments)}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var u={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return u.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},u.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},u.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(o.prototype,u),o}(Vf);X.prototype.size=8;var it=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.get=function(u){return new X(this,u)},o}(Zd);xn("FeatureIndexArray",it);var vt=ko([{name:"a_pos",components:2,type:"Int16"}],4).members,yt=function(r){r===void 0&&(r=[]),this.segments=r};function xt(r,o){return 256*(r=z(Math.floor(r),0,255))+z(Math.floor(o),0,255)}yt.prototype.prepareSegment=function(r,o,u,g){var b=this.segments[this.segments.length-1];return r>yt.MAX_VERTEX_ARRAY_LENGTH&&ot("Max vertices per segment is "+yt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+r),(!b||b.vertexLength+r>yt.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==g)&&(b={vertexOffset:o.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},g!==void 0&&(b.sortKey=g),this.segments.push(b)),b},yt.prototype.get=function(){return this.segments},yt.prototype.destroy=function(){for(var r=0,o=this.segments;r<o.length;r+=1){var u=o[r];for(var g in u.vaos)u.vaos[g].destroy()}},yt.simpleSegment=function(r,o,u,g){return new yt([{vertexOffset:r,primitiveOffset:o,vertexLength:u,primitiveLength:g,vaos:{},sortKey:0}])},yt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xn("SegmentVector",yt);var Bt=ko([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Lt=f(function(r){r.exports=function(o,u){var g,b,C,S,R,j,K,J;for(b=o.length-(g=3&o.length),C=u,R=3432918353,j=461845907,J=0;J<b;)K=255&o.charCodeAt(J)|(255&o.charCodeAt(++J))<<8|(255&o.charCodeAt(++J))<<16|(255&o.charCodeAt(++J))<<24,++J,C=27492+(65535&(S=5*(65535&(C=(C^=K=(65535&(K=(K=(65535&K)*R+(((K>>>16)*R&65535)<<16)&4294967295)<<15|K>>>17))*j+(((K>>>16)*j&65535)<<16)&4294967295)<<13|C>>>19))+((5*(C>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(K=0,g){case 3:K^=(255&o.charCodeAt(J+2))<<16;case 2:K^=(255&o.charCodeAt(J+1))<<8;case 1:C^=K=(65535&(K=(K=(65535&(K^=255&o.charCodeAt(J)))*R+(((K>>>16)*R&65535)<<16)&4294967295)<<15|K>>>17))*j+(((K>>>16)*j&65535)<<16)&4294967295}return C^=o.length,C=2246822507*(65535&(C^=C>>>16))+((2246822507*(C>>>16)&65535)<<16)&4294967295,C=3266489909*(65535&(C^=C>>>13))+((3266489909*(C>>>16)&65535)<<16)&4294967295,(C^=C>>>16)>>>0}}),Ht=f(function(r){r.exports=function(o,u){for(var g,b=o.length,C=u^b,S=0;b>=4;)g=1540483477*(65535&(g=255&o.charCodeAt(S)|(255&o.charCodeAt(++S))<<8|(255&o.charCodeAt(++S))<<16|(255&o.charCodeAt(++S))<<24))+((1540483477*(g>>>16)&65535)<<16),C=1540483477*(65535&C)+((1540483477*(C>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),b-=4,++S;switch(b){case 3:C^=(255&o.charCodeAt(S+2))<<16;case 2:C^=(255&o.charCodeAt(S+1))<<8;case 1:C=1540483477*(65535&(C^=255&o.charCodeAt(S)))+((1540483477*(C>>>16)&65535)<<16)}return C=1540483477*(65535&(C^=C>>>13))+((1540483477*(C>>>16)&65535)<<16),(C^=C>>>15)>>>0}}),Mt=Lt,Gt=Ht;Mt.murmur3=Lt,Mt.murmur2=Gt;var Qt=function(){this.ids=[],this.positions=[],this.indexed=!1};Qt.prototype.add=function(r,o,u,g){this.ids.push(ke(r)),this.positions.push(o,u,g)},Qt.prototype.getPositions=function(r){for(var o=ke(r),u=0,g=this.ids.length-1;u<g;){var b=u+g>>1;this.ids[b]>=o?g=b:u=b+1}for(var C=[];this.ids[u]===o;)C.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return C},Qt.serialize=function(r,o){var u=new Float64Array(r.ids),g=new Uint32Array(r.positions);return function b(C,S,R,j){for(;R<j;){for(var K=C[R+j>>1],J=R-1,nt=j+1;;){do J++;while(C[J]<K);do nt--;while(C[nt]>K);if(J>=nt)break;Me(C,J,nt),Me(S,3*J,3*nt),Me(S,3*J+1,3*nt+1),Me(S,3*J+2,3*nt+2)}nt-R<j-nt?(b(C,S,R,nt),R=nt+1):(b(C,S,nt+1,j),j=nt)}}(u,g,0,u.length-1),o&&o.push(u.buffer,g.buffer),{ids:u,positions:g}},Qt.deserialize=function(r){var o=new Qt;return o.ids=r.ids,o.positions=r.positions,o.indexed=!0,o};var de=Math.pow(2,53)-1;function ke(r){var o=+r;return!isNaN(o)&&o<=de?o:Mt(String(r))}function Me(r,o,u){var g=r[o];r[o]=r[u],r[u]=g}xn("FeaturePositionMap",Qt);var Oe=function(r,o){this.gl=r.gl,this.location=o},He=function(r){function o(u,g){r.call(this,u,g),this.current=0}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))},o}(Oe),Xe=function(r){function o(u,g){r.call(this,u,g),this.current=0}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))},o}(Oe),rn=function(r){function o(u,g){r.call(this,u,g),this.current=[0,0]}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))},o}(Oe),yn=function(r){function o(u,g){r.call(this,u,g),this.current=[0,0,0]}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))},o}(Oe),On=function(r){function o(u,g){r.call(this,u,g),this.current=[0,0,0,0]}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))},o}(Oe),Xn=function(r){function o(u,g){r.call(this,u,g),this.current=Tr.transparent}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))},o}(Oe),Kn=new Float32Array(16),Xr=function(r){function o(u,g){r.call(this,u,g),this.current=Kn}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(var g=1;g<16;g++)if(u[g]!==this.current[g]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}},o}(Oe);function Cn(r){return[xt(255*r.r,255*r.g),xt(255*r.b,255*r.a)]}var er=function(r,o,u){this.value=r,this.uniformNames=o.map(function(g){return"u_"+g}),this.type=u};er.prototype.setUniform=function(r,o,u){r.set(u.constantOr(this.value))},er.prototype.getBinding=function(r,o,u){return this.type==="color"?new Xn(r,o):new Xe(r,o)};var Cr=function(r,o){this.uniformNames=o.map(function(u){return"u_"+u}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Cr.prototype.setConstantPatternPositions=function(r,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=r.tlbr},Cr.prototype.setUniform=function(r,o,u,g){var b=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;b&&r.set(b)},Cr.prototype.getBinding=function(r,o,u){return u.substr(0,9)==="u_pattern"?new On(r,o):new Xe(r,o)};var dr=function(r,o,u,g){this.expression=r,this.type=u,this.maxValue=0,this.paintVertexAttributes=o.map(function(b){return{name:"a_"+b,type:"Float32",components:u==="color"?2:1,offset:0}}),this.paintVertexArray=new g};dr.prototype.populatePaintArray=function(r,o,u,g,b){var C=this.paintVertexArray.length,S=this.expression.evaluate(new or(0),o,{},g,[],b);this.paintVertexArray.resize(r),this._setPaintValue(C,r,S)},dr.prototype.updatePaintArray=function(r,o,u,g){var b=this.expression.evaluate({zoom:0},u,g);this._setPaintValue(r,o,b)},dr.prototype._setPaintValue=function(r,o,u){if(this.type==="color")for(var g=Cn(u),b=r;b<o;b++)this.paintVertexArray.emplace(b,g[0],g[1]);else{for(var C=r;C<o;C++)this.paintVertexArray.emplace(C,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}},dr.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},dr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var sr=function(r,o,u,g,b,C){this.expression=r,this.uniformNames=o.map(function(S){return"u_"+S+"_t"}),this.type=u,this.useIntegerZoom=g,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=o.map(function(S){return{name:"a_"+S,type:"Float32",components:u==="color"?4:2,offset:0}}),this.paintVertexArray=new C};sr.prototype.populatePaintArray=function(r,o,u,g,b){var C=this.expression.evaluate(new or(this.zoom),o,{},g,[],b),S=this.expression.evaluate(new or(this.zoom+1),o,{},g,[],b),R=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(R,r,C,S)},sr.prototype.updatePaintArray=function(r,o,u,g){var b=this.expression.evaluate({zoom:this.zoom},u,g),C=this.expression.evaluate({zoom:this.zoom+1},u,g);this._setPaintValue(r,o,b,C)},sr.prototype._setPaintValue=function(r,o,u,g){if(this.type==="color")for(var b=Cn(u),C=Cn(g),S=r;S<o;S++)this.paintVertexArray.emplace(S,b[0],b[1],C[0],C[1]);else{for(var R=r;R<o;R++)this.paintVertexArray.emplace(R,u,g);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(g))}},sr.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},sr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},sr.prototype.setUniform=function(r,o){var u=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,g=z(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);r.set(g)},sr.prototype.getBinding=function(r,o,u){return new Xe(r,o)};var Ir=function(r,o,u,g,b,C){this.expression=r,this.type=o,this.useIntegerZoom=u,this.zoom=g,this.layerId=C,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b};Ir.prototype.populatePaintArray=function(r,o,u){var g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(g,r,o.patterns&&o.patterns[this.layerId],u)},Ir.prototype.updatePaintArray=function(r,o,u,g,b){this._setPaintValues(r,o,u.patterns&&u.patterns[this.layerId],b)},Ir.prototype._setPaintValues=function(r,o,u,g){if(g&&u){var b=g[u.min],C=g[u.mid],S=g[u.max];if(b&&C&&S)for(var R=r;R<o;R++)this.zoomInPaintVertexArray.emplace(R,C.tl[0],C.tl[1],C.br[0],C.br[1],b.tl[0],b.tl[1],b.br[0],b.br[1],C.pixelRatio,b.pixelRatio),this.zoomOutPaintVertexArray.emplace(R,C.tl[0],C.tl[1],C.br[0],C.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],C.pixelRatio,S.pixelRatio)}},Ir.prototype.upload=function(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Bt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Bt.members,this.expression.isStateDependent))},Ir.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var cr=function(r,o,u){this.binders={},this._buffers=[];var g=[];for(var b in r.paint._values)if(u(b)){var C=r.paint.get(b);if(C instanceof Ko&&ea(C.property.specification)){var S=Lo(b,r.type),R=C.value,j=C.property.specification.type,K=C.property.useIntegerZoom,J=C.property.specification["property-type"],nt=J==="cross-faded"||J==="cross-faded-data-driven";if(R.kind==="constant")this.binders[b]=nt?new Cr(R.value,S):new er(R.value,S,j),g.push("/u_"+b);else if(R.kind==="source"||nt){var ct=uo(b,j,"source");this.binders[b]=nt?new Ir(R,j,K,o,ct,r.id):new dr(R,S,j,ct),g.push("/a_"+b)}else{var mt=uo(b,j,"composite");this.binders[b]=new sr(R,S,j,K,o,mt),g.push("/z_"+b)}}}this.cacheKey=g.sort().join("")};cr.prototype.getMaxValue=function(r){var o=this.binders[r];return o instanceof dr||o instanceof sr?o.maxValue:0},cr.prototype.populatePaintArrays=function(r,o,u,g,b){for(var C in this.binders){var S=this.binders[C];(S instanceof dr||S instanceof sr||S instanceof Ir)&&S.populatePaintArray(r,o,u,g,b)}},cr.prototype.setConstantPatternPositions=function(r,o){for(var u in this.binders){var g=this.binders[u];g instanceof Cr&&g.setConstantPatternPositions(r,o)}},cr.prototype.updatePaintArrays=function(r,o,u,g,b){var C=!1;for(var S in r)for(var R=0,j=o.getPositions(S);R<j.length;R+=1){var K=j[R],J=u.feature(K.index);for(var nt in this.binders){var ct=this.binders[nt];if((ct instanceof dr||ct instanceof sr||ct instanceof Ir)&&ct.expression.isStateDependent===!0){var mt=g.paint.get(nt);ct.expression=mt.value,ct.updatePaintArray(K.start,K.end,J,r[S],b),C=!0}}}return C},cr.prototype.defines=function(){var r=[];for(var o in this.binders){var u=this.binders[o];(u instanceof er||u instanceof Cr)&&r.push.apply(r,u.uniformNames.map(function(g){return"#define HAS_UNIFORM_"+g}))}return r},cr.prototype.getBinderAttributes=function(){var r=[];for(var o in this.binders){var u=this.binders[o];if(u instanceof dr||u instanceof sr)for(var g=0;g<u.paintVertexAttributes.length;g++)r.push(u.paintVertexAttributes[g].name);else if(u instanceof Ir)for(var b=0;b<Bt.members.length;b++)r.push(Bt.members[b].name)}return r},cr.prototype.getBinderUniforms=function(){var r=[];for(var o in this.binders){var u=this.binders[o];if(u instanceof er||u instanceof Cr||u instanceof sr)for(var g=0,b=u.uniformNames;g<b.length;g+=1)r.push(b[g])}return r},cr.prototype.getPaintVertexBuffers=function(){return this._buffers},cr.prototype.getUniforms=function(r,o){var u=[];for(var g in this.binders){var b=this.binders[g];if(b instanceof er||b instanceof Cr||b instanceof sr)for(var C=0,S=b.uniformNames;C<S.length;C+=1){var R=S[C];if(o[R]){var j=b.getBinding(r,o[R],R);u.push({name:R,property:g,binding:j})}}}return u},cr.prototype.setUniforms=function(r,o,u,g){for(var b=0,C=o;b<C.length;b+=1){var S=C[b],R=S.name,j=S.property;this.binders[j].setUniform(S.binding,g,u.get(j),R)}},cr.prototype.updatePaintBuffers=function(r){for(var o in this._buffers=[],this.binders){var u=this.binders[o];if(r&&u instanceof Ir){var g=r.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(u instanceof dr||u instanceof sr)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}},cr.prototype.upload=function(r){for(var o in this.binders){var u=this.binders[o];(u instanceof dr||u instanceof sr||u instanceof Ir)&&u.upload(r)}this.updatePaintBuffers()},cr.prototype.destroy=function(){for(var r in this.binders){var o=this.binders[r];(o instanceof dr||o instanceof sr||o instanceof Ir)&&o.destroy()}};var zn=function(r,o,u){u===void 0&&(u=function(){return!0}),this.programConfigurations={};for(var g=0,b=r;g<b.length;g+=1){var C=b[g];this.programConfigurations[C.id]=new cr(C,o,u)}this.needsUpload=!1,this._featureMap=new Qt,this._bufferOffset=0};function Lo(r,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(o+"-","").replace(/-/g,"_")]}function uo(r,o,u){var g={color:{source:Ia,composite:qs},number:{source:ec,composite:Ia}},b=function(C){return{"line-pattern":{source:Br,composite:Br},"fill-pattern":{source:Br,composite:Br},"fill-extrusion-pattern":{source:Br,composite:Br}}[C]}(r);return b&&b[u]||g[o][u]}zn.prototype.populatePaintArrays=function(r,o,u,g,b,C){for(var S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(r,o,g,b,C);o.id!==void 0&&this._featureMap.add(o.id,u,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0},zn.prototype.updatePaintArrays=function(r,o,u,g){for(var b=0,C=u;b<C.length;b+=1){var S=C[b];this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(r,this._featureMap,o,S,g)||this.needsUpload}},zn.prototype.get=function(r){return this.programConfigurations[r]},zn.prototype.upload=function(r){if(this.needsUpload){for(var o in this.programConfigurations)this.programConfigurations[o].upload(r);this.needsUpload=!1}},zn.prototype.destroy=function(){for(var r in this.programConfigurations)this.programConfigurations[r].destroy()},xn("ConstantBinder",er),xn("CrossFadedConstantBinder",Cr),xn("SourceExpressionBinder",dr),xn("CrossFadedCompositeBinder",Ir),xn("CompositeExpressionBinder",sr),xn("ProgramConfiguration",cr,{omit:["_buffers"]}),xn("ProgramConfigurationSet",zn);var no=Math.pow(2,14)-1,No=-no-1;function Vi(r){for(var o=8192/r.extent,u=r.loadGeometry(),g=0;g<u.length;g++)for(var b=u[g],C=0;C<b.length;C++){var S=b[C],R=Math.round(S.x*o),j=Math.round(S.y*o);S.x=z(R,No,no),S.y=z(j,No,no),(R<S.x||R>S.x+1||j<S.y||j>S.y+1)&&ot("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return u}function Bi(r,o){return{type:r.type,id:r.id,properties:r.properties,geometry:o?Vi(r):[]}}function ts(r,o,u,g,b){r.emplaceBack(2*o+(g+1)/2,2*u+(b+1)/2)}var Oi=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(o){return o.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Qu,this.indexArray=new Ju,this.segments=new yt,this.programConfigurations=new zn(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(function(o){return o.isStateDependent()}).map(function(o){return o.id})};function Hl(r,o){for(var u=0;u<r.length;u++)if(Gl(o,r[u]))return!0;for(var g=0;g<o.length;g++)if(Gl(r,o[g]))return!0;return!!kc(r,o)}function es(r,o,u){return!!Gl(r,o)||!!Xs(o,r,u)}function yl(r,o){if(r.length===1)return Hh(o,r[0]);for(var u=0;u<o.length;u++)for(var g=o[u],b=0;b<g.length;b++)if(Gl(r,g[b]))return!0;for(var C=0;C<r.length;C++)if(Hh(o,r[C]))return!0;for(var S=0;S<o.length;S++)if(kc(r,o[S]))return!0;return!1}function Ys(r,o,u){if(r.length>1){if(kc(r,o))return!0;for(var g=0;g<o.length;g++)if(Xs(o[g],r,u))return!0}for(var b=0;b<r.length;b++)if(Xs(r[b],o,u))return!0;return!1}function kc(r,o){if(r.length===0||o.length===0)return!1;for(var u=0;u<r.length-1;u++)for(var g=r[u],b=r[u+1],C=0;C<o.length-1;C++)if(mh(g,b,o[C],o[C+1]))return!0;return!1}function mh(r,o,u,g){return Z(r,u,g)!==Z(o,u,g)&&Z(r,o,u)!==Z(r,o,g)}function Xs(r,o,u){var g=u*u;if(o.length===1)return r.distSqr(o[0])<g;for(var b=1;b<o.length;b++)if(Lc(r,o[b-1],o[b])<g)return!0;return!1}function Lc(r,o,u){var g=o.distSqr(u);if(g===0)return r.distSqr(o);var b=((r.x-o.x)*(u.x-o.x)+(r.y-o.y)*(u.y-o.y))/g;return r.distSqr(b<0?o:b>1?u:u.sub(o)._mult(b)._add(o))}function Hh(r,o){for(var u,g,b,C=!1,S=0;S<r.length;S++)for(var R=0,j=(u=r[S]).length-1;R<u.length;j=R++)(g=u[R]).y>o.y!=(b=u[j]).y>o.y&&o.x<(b.x-g.x)*(o.y-g.y)/(b.y-g.y)+g.x&&(C=!C);return C}function Gl(r,o){for(var u=!1,g=0,b=r.length-1;g<r.length;b=g++){var C=r[g],S=r[b];C.y>o.y!=S.y>o.y&&o.x<(S.x-C.x)*(o.y-C.y)/(S.y-C.y)+C.x&&(u=!u)}return u}function yu(r,o,u){var g=u[0],b=u[2];if(r.x<g.x&&o.x<g.x||r.x>b.x&&o.x>b.x||r.y<g.y&&o.y<g.y||r.y>b.y&&o.y>b.y)return!1;var C=Z(r,o,u[0]);return C!==Z(r,o,u[1])||C!==Z(r,o,u[2])||C!==Z(r,o,u[3])}function Wl(r,o,u){var g=o.paint.get(r).value;return g.kind==="constant"?g.value:u.programConfigurations.get(o.id).getMaxValue(r)}function qo(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function _l(r,o,u,g,b){if(!o[0]&&!o[1])return r;var C=x.convert(o)._mult(b);u==="viewport"&&C._rotate(-g);for(var S=[],R=0;R<r.length;R++)S.push(r[R].sub(C));return S}Oi.prototype.populate=function(r,o,u){var g=this.layers[0],b=[],C=null;g.type==="circle"&&(C=g.layout.get("circle-sort-key"));for(var S=0,R=r;S<R.length;S+=1){var j=R[S],K=j.feature,J=j.id,nt=j.index,ct=j.sourceLayerIndex,mt=this.layers[0]._featureFilter.needGeometry,St=Bi(K,mt);if(this.layers[0]._featureFilter.filter(new or(this.zoom),St,u)){var Ot=C?C.evaluate(St,{},u):void 0,Zt={id:J,properties:K.properties,type:K.type,sourceLayerIndex:ct,index:nt,geometry:mt?St.geometry:Vi(K),patterns:{},sortKey:Ot};b.push(Zt)}}C&&b.sort(function(cn,Vn){return cn.sortKey-Vn.sortKey});for(var Vt=0,se=b;Vt<se.length;Vt+=1){var ye=se[Vt],Ee=ye.geometry,Pe=ye.index,Ne=ye.sourceLayerIndex,Je=r[Pe].feature;this.addFeature(ye,Ee,Pe,u),o.featureIndex.insert(Je,Ee,Pe,Ne,this.index)}},Oi.prototype.update=function(r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,u)},Oi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Oi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Oi.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,vt),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},Oi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Oi.prototype.addFeature=function(r,o,u,g){for(var b=0,C=o;b<C.length;b+=1)for(var S=0,R=C[b];S<R.length;S+=1){var j=R[S],K=j.x,J=j.y;if(!(K<0||K>=8192||J<0||J>=8192)){var nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),ct=nt.vertexLength;ts(this.layoutVertexArray,K,J,-1,-1),ts(this.layoutVertexArray,K,J,1,-1),ts(this.layoutVertexArray,K,J,1,1),ts(this.layoutVertexArray,K,J,-1,1),this.indexArray.emplaceBack(ct,ct+1,ct+2),this.indexArray.emplaceBack(ct,ct+3,ct+2),nt.vertexLength+=4,nt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,{},g)},xn("CircleBucket",Oi,{omit:["layers"]});var _u=new pa({"circle-sort-key":new Ln(gt.layout_circle["circle-sort-key"])}),Oc={paint:new pa({"circle-radius":new Ln(gt.paint_circle["circle-radius"]),"circle-color":new Ln(gt.paint_circle["circle-color"]),"circle-blur":new Ln(gt.paint_circle["circle-blur"]),"circle-opacity":new Ln(gt.paint_circle["circle-opacity"]),"circle-translate":new Nn(gt.paint_circle["circle-translate"]),"circle-translate-anchor":new Nn(gt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Nn(gt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Nn(gt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ln(gt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ln(gt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ln(gt.paint_circle["circle-stroke-opacity"])}),layout:_u},hi=typeof Float32Array<"u"?Float32Array:Array;function Ps(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Fa(r,o,u){var g=o[0],b=o[1],C=o[2],S=o[3],R=o[4],j=o[5],K=o[6],J=o[7],nt=o[8],ct=o[9],mt=o[10],St=o[11],Ot=o[12],Zt=o[13],Vt=o[14],se=o[15],ye=u[0],Ee=u[1],Pe=u[2],Ne=u[3];return r[0]=ye*g+Ee*R+Pe*nt+Ne*Ot,r[1]=ye*b+Ee*j+Pe*ct+Ne*Zt,r[2]=ye*C+Ee*K+Pe*mt+Ne*Vt,r[3]=ye*S+Ee*J+Pe*St+Ne*se,r[4]=(ye=u[4])*g+(Ee=u[5])*R+(Pe=u[6])*nt+(Ne=u[7])*Ot,r[5]=ye*b+Ee*j+Pe*ct+Ne*Zt,r[6]=ye*C+Ee*K+Pe*mt+Ne*Vt,r[7]=ye*S+Ee*J+Pe*St+Ne*se,r[8]=(ye=u[8])*g+(Ee=u[9])*R+(Pe=u[10])*nt+(Ne=u[11])*Ot,r[9]=ye*b+Ee*j+Pe*ct+Ne*Zt,r[10]=ye*C+Ee*K+Pe*mt+Ne*Vt,r[11]=ye*S+Ee*J+Pe*St+Ne*se,r[12]=(ye=u[12])*g+(Ee=u[13])*R+(Pe=u[14])*nt+(Ne=u[15])*Ot,r[13]=ye*b+Ee*j+Pe*ct+Ne*Zt,r[14]=ye*C+Ee*K+Pe*mt+Ne*Vt,r[15]=ye*S+Ee*J+Pe*St+Ne*se,r}Math.hypot||(Math.hypot=function(){for(var r=arguments,o=0,u=arguments.length;u--;)o+=r[u]*r[u];return Math.sqrt(o)});var bu,Og=Fa;function gh(r,o,u){var g=o[0],b=o[1],C=o[2],S=o[3];return r[0]=u[0]*g+u[4]*b+u[8]*C+u[12]*S,r[1]=u[1]*g+u[5]*b+u[9]*C+u[13]*S,r[2]=u[2]*g+u[6]*b+u[10]*C+u[14]*S,r[3]=u[3]*g+u[7]*b+u[11]*C+u[15]*S,r}bu=new hi(3),hi!=Float32Array&&(bu[0]=0,bu[1]=0,bu[2]=0),function(){var r=new hi(4);hi!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0)}();var Hp=(function(){var r=new hi(2);hi!=Float32Array&&(r[0]=0,r[1]=0)}(),function(r){function o(u){r.call(this,u,Oc)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.createBucket=function(u){return new Oi(u)},o.prototype.queryRadius=function(u){var g=u;return Wl("circle-radius",this,g)+Wl("circle-stroke-width",this,g)+qo(this.paint.get("circle-translate"))},o.prototype.queryIntersectsFeature=function(u,g,b,C,S,R,j,K){for(var J=_l(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),R.angle,j),nt=this.paint.get("circle-radius").evaluate(g,b)+this.paint.get("circle-stroke-width").evaluate(g,b),ct=this.paint.get("circle-pitch-alignment")==="map",mt=ct?J:function(Je,cn){return Je.map(function(Vn){return vh(Vn,cn)})}(J,K),St=ct?nt*j:nt,Ot=0,Zt=C;Ot<Zt.length;Ot+=1)for(var Vt=0,se=Zt[Ot];Vt<se.length;Vt+=1){var ye=se[Vt],Ee=ct?ye:vh(ye,K),Pe=St,Ne=gh([],[ye.x,ye.y,0,1],K);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Pe*=Ne[3]/R.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Pe*=R.cameraToCenterDistance/Ne[3]),es(mt,Ee,Pe))return!0}return!1},o}(jl));function vh(r,o){var u=gh([],[r.x,r.y,0,1],o);return new x(u[0]/u[3],u[1]/u[3])}var Kd=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o}(Oi);function xu(r,o,u,g){var b=o.width,C=o.height;if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==b*C*u)throw new RangeError("mismatched image size")}else g=new Uint8Array(b*C*u);return r.width=b,r.height=C,r.data=g,r}function Hf(r,o,u){var g=o.width,b=o.height;if(g!==r.width||b!==r.height){var C=xu({},{width:g,height:b},u);Gp(r,C,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,g),height:Math.min(r.height,b)},u),r.width=g,r.height=b,r.data=C.data}}function Gp(r,o,u,g,b,C){if(b.width===0||b.height===0)return o;if(b.width>r.width||b.height>r.height||u.x>r.width-b.width||u.y>r.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>o.width||b.height>o.height||g.x>o.width-b.width||g.y>o.height-b.height)throw new RangeError("out of range destination coordinates for image copy");for(var S=r.data,R=o.data,j=0;j<b.height;j++)for(var K=((u.y+j)*r.width+u.x)*C,J=((g.y+j)*o.width+g.x)*C,nt=0;nt<b.width*C;nt++)R[J+nt]=S[K+nt];return o}xn("HeatmapBucket",Kd,{omit:["layers"]});var yh=function(r,o){xu(this,r,1,o)};yh.prototype.resize=function(r){Hf(this,r,1)},yh.prototype.clone=function(){return new yh({width:this.width,height:this.height},new Uint8Array(this.data))},yh.copy=function(r,o,u,g,b){Gp(r,o,u,g,b,1)};var ds=function(r,o){xu(this,r,4,o)};ds.prototype.resize=function(r){Hf(this,r,4)},ds.prototype.replace=function(r,o){o?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r},ds.prototype.clone=function(){return new ds({width:this.width,height:this.height},new Uint8Array(this.data))},ds.copy=function(r,o,u,g,b){Gp(r,o,u,g,b,4)},xn("AlphaImage",yh),xn("RGBAImage",ds);var Ky={paint:new pa({"heatmap-radius":new Ln(gt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ln(gt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Nn(gt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ba(gt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Nn(gt.paint_heatmap["heatmap-opacity"])})};function qy(r){var o={},u=r.resolution||256,g=r.clips?r.clips.length:1,b=r.image||new ds({width:u,height:g}),C=function(St,Ot,Zt){o[r.evaluationKey]=Zt;var Vt=r.expression.evaluate(o);b.data[St+Ot+0]=Math.floor(255*Vt.r/Vt.a),b.data[St+Ot+1]=Math.floor(255*Vt.g/Vt.a),b.data[St+Ot+2]=Math.floor(255*Vt.b/Vt.a),b.data[St+Ot+3]=Math.floor(255*Vt.a)};if(r.clips)for(var S=0,R=0;S<g;++S,R+=4*u)for(var j=0,K=0;j<u;j++,K+=4){var J=j/(u-1),nt=r.clips[S];C(R,K,nt.start*(1-J)+nt.end*J)}else for(var ct=0,mt=0;ct<u;ct++,mt+=4)C(0,mt,ct/(u-1));return b}var Rg=function(r){function o(u){r.call(this,u,Ky),this._updateColorRamp()}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.createBucket=function(u){return new Kd(u)},o.prototype._handleSpecialPaintPropertyUpdate=function(u){u==="heatmap-color"&&this._updateColorRamp()},o.prototype._updateColorRamp=function(){this.colorRamp=qy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},o.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},o.prototype.queryRadius=function(){return 0},o.prototype.queryIntersectsFeature=function(){return!1},o.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},o}(jl),Yy={paint:new pa({"hillshade-illumination-direction":new Nn(gt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Nn(gt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Nn(gt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Nn(gt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Nn(gt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Nn(gt.paint_hillshade["hillshade-accent-color"])})},Dg=function(r){function o(u){r.call(this,u,Yy)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},o}(jl),bb=ko([{name:"a_pos",components:2,type:"Int16"}],4).members,qd=Wp,oi=Wp;function Wp(r,o,u){u=u||2;var g,b,C,S,R,j,K,J=o&&o.length,nt=J?o[0]*u:r.length,ct=Xy(r,0,nt,u,!0),mt=[];if(!ct||ct.next===ct.prev)return mt;if(J&&(ct=function(Ot,Zt,Vt,se){var ye,Ee,Pe,Ne=[];for(ye=0,Ee=Zt.length;ye<Ee;ye++)(Pe=Xy(Ot,Zt[ye]*se,ye<Ee-1?Zt[ye+1]*se:Ot.length,se,!1))===Pe.next&&(Pe.steiner=!0),Ne.push(bl(Pe));for(Ne.sort(Zp),ye=0;ye<Ne.length;ye++)zg(Ne[ye],Vt),Vt=Zl(Vt,Vt.next);return Vt}(r,o,ct,u)),r.length>80*u){g=C=r[0],b=S=r[1];for(var St=u;St<nt;St+=u)(R=r[St])<g&&(g=R),(j=r[St+1])<b&&(b=j),R>C&&(C=R),j>S&&(S=j);K=(K=Math.max(C-g,S-b))!==0?1/K:0}return Gf(ct,mt,u,g,b,K),mt}function Xy(r,o,u,g,b){var C,S;if(b===qp(r,o,u,g)>0)for(C=o;C<u;C+=g)S=Rc(C,r[C],r[C+1],S);else for(C=u-g;C>=o;C-=g)S=Rc(C,r[C],r[C+1],S);return S&&Gh(S,S.next)&&(Xd(S),S=S.next),S}function Zl(r,o){if(!r)return r;o||(o=r);var u,g=r;do if(u=!1,g.steiner||!Gh(g,g.next)&&Oo(g.prev,g,g.next)!==0)g=g.next;else{if(Xd(g),(g=o=g.prev)===g.next)break;u=!0}while(u||g!==o);return o}function Gf(r,o,u,g,b,C,S){if(r){!S&&C&&function(J,nt,ct,mt){var St=J;do St.z===null&&(St.z=$p(St.x,St.y,nt,ct,mt)),St.prevZ=St.prev,St.nextZ=St.next,St=St.next;while(St!==J);St.prevZ.nextZ=null,St.prevZ=null,function(Ot){var Zt,Vt,se,ye,Ee,Pe,Ne,Je,cn=1;do{for(Vt=Ot,Ot=null,Ee=null,Pe=0;Vt;){for(Pe++,se=Vt,Ne=0,Zt=0;Zt<cn&&(Ne++,se=se.nextZ);Zt++);for(Je=cn;Ne>0||Je>0&&se;)Ne!==0&&(Je===0||!se||Vt.z<=se.z)?(ye=Vt,Vt=Vt.nextZ,Ne--):(ye=se,se=se.nextZ,Je--),Ee?Ee.nextZ=ye:Ot=ye,ye.prevZ=Ee,Ee=ye;Vt=se}Ee.nextZ=null,cn*=2}while(Pe>1)}(St)}(r,g,b,C);for(var R,j,K=r;r.prev!==r.next;)if(R=r.prev,j=r.next,C?Ab(r,g,b,C):xb(r))o.push(R.i/u),o.push(r.i/u),o.push(j.i/u),Xd(r),r=j.next,K=j.next;else if((r=j)===K){S?S===1?Gf(r=$l(Zl(r),o,u),o,u,g,b,C,2):S===2&&wb(r,o,u,g,b,C):Gf(Zl(r),o,u,g,b,C,1);break}}}function xb(r){var o=r.prev,u=r,g=r.next;if(Oo(o,u,g)>=0)return!1;for(var b=r.next.next;b!==r.prev;){if(xl(o.x,o.y,u.x,u.y,g.x,g.y,b.x,b.y)&&Oo(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function Ab(r,o,u,g){var b=r.prev,C=r,S=r.next;if(Oo(b,C,S)>=0)return!1;for(var R=b.x>C.x?b.x>S.x?b.x:S.x:C.x>S.x?C.x:S.x,j=b.y>C.y?b.y>S.y?b.y:S.y:C.y>S.y?C.y:S.y,K=$p(b.x<C.x?b.x<S.x?b.x:S.x:C.x<S.x?C.x:S.x,b.y<C.y?b.y<S.y?b.y:S.y:C.y<S.y?C.y:S.y,o,u,g),J=$p(R,j,o,u,g),nt=r.prevZ,ct=r.nextZ;nt&&nt.z>=K&&ct&&ct.z<=J;){if(nt!==r.prev&&nt!==r.next&&xl(b.x,b.y,C.x,C.y,S.x,S.y,nt.x,nt.y)&&Oo(nt.prev,nt,nt.next)>=0||(nt=nt.prevZ,ct!==r.prev&&ct!==r.next&&xl(b.x,b.y,C.x,C.y,S.x,S.y,ct.x,ct.y)&&Oo(ct.prev,ct,ct.next)>=0))return!1;ct=ct.nextZ}for(;nt&&nt.z>=K;){if(nt!==r.prev&&nt!==r.next&&xl(b.x,b.y,C.x,C.y,S.x,S.y,nt.x,nt.y)&&Oo(nt.prev,nt,nt.next)>=0)return!1;nt=nt.prevZ}for(;ct&&ct.z<=J;){if(ct!==r.prev&&ct!==r.next&&xl(b.x,b.y,C.x,C.y,S.x,S.y,ct.x,ct.y)&&Oo(ct.prev,ct,ct.next)>=0)return!1;ct=ct.nextZ}return!0}function $l(r,o,u){var g=r;do{var b=g.prev,C=g.next.next;!Gh(b,C)&&Fg(b,g,g.next,C)&&Wh(b,C)&&Wh(C,b)&&(o.push(b.i/u),o.push(g.i/u),o.push(C.i/u),Xd(g),Xd(g.next),g=r=C),g=g.next}while(g!==r);return Zl(g)}function wb(r,o,u,g,b,C){var S=r;do{for(var R=S.next.next;R!==S.prev;){if(S.i!==R.i&&Bg(S,R)){var j=Kp(S,R);return S=Zl(S,S.next),j=Zl(j,j.next),Gf(S,o,u,g,b,C),void Gf(j,o,u,g,b,C)}R=R.next}S=S.next}while(S!==r)}function Zp(r,o){return r.x-o.x}function zg(r,o){if(o=function(g,b){var C,S=b,R=g.x,j=g.y,K=-1/0;do{if(j<=S.y&&j>=S.next.y&&S.next.y!==S.y){var J=S.x+(j-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(J<=R&&J>K){if(K=J,J===R){if(j===S.y)return S;if(j===S.next.y)return S.next}C=S.x<S.next.x?S:S.next}}S=S.next}while(S!==b);if(!C)return null;if(R===K)return C;var nt,ct=C,mt=C.x,St=C.y,Ot=1/0;S=C;do R>=S.x&&S.x>=mt&&R!==S.x&&xl(j<St?R:K,j,mt,St,j<St?K:R,j,S.x,S.y)&&(nt=Math.abs(j-S.y)/(R-S.x),Wh(S,g)&&(nt<Ot||nt===Ot&&(S.x>C.x||S.x===C.x&&Qy(C,S)))&&(C=S,Ot=nt)),S=S.next;while(S!==ct);return C}(r,o)){var u=Kp(o,r);Zl(o,o.next),Zl(u,u.next)}}function Qy(r,o){return Oo(r.prev,r,o.prev)<0&&Oo(o.next,r,r.next)<0}function $p(r,o,u,g,b){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-u)*b)|r<<8))|r<<4))|r<<2))|r<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-g)*b)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function bl(r){var o=r,u=r;do(o.x<u.x||o.x===u.x&&o.y<u.y)&&(u=o),o=o.next;while(o!==r);return u}function xl(r,o,u,g,b,C,S,R){return(b-S)*(o-R)-(r-S)*(C-R)>=0&&(r-S)*(g-R)-(u-S)*(o-R)>=0&&(u-S)*(C-R)-(b-S)*(g-R)>=0}function Bg(r,o){return r.next.i!==o.i&&r.prev.i!==o.i&&!function(u,g){var b=u;do{if(b.i!==u.i&&b.next.i!==u.i&&b.i!==g.i&&b.next.i!==g.i&&Fg(b,b.next,u,g))return!0;b=b.next}while(b!==u);return!1}(r,o)&&(Wh(r,o)&&Wh(o,r)&&function(u,g){var b=u,C=!1,S=(u.x+g.x)/2,R=(u.y+g.y)/2;do b.y>R!=b.next.y>R&&b.next.y!==b.y&&S<(b.next.x-b.x)*(R-b.y)/(b.next.y-b.y)+b.x&&(C=!C),b=b.next;while(b!==u);return C}(r,o)&&(Oo(r.prev,r,o.prev)||Oo(r,o.prev,o))||Gh(r,o)&&Oo(r.prev,r,r.next)>0&&Oo(o.prev,o,o.next)>0)}function Oo(r,o,u){return(o.y-r.y)*(u.x-o.x)-(o.x-r.x)*(u.y-o.y)}function Gh(r,o){return r.x===o.x&&r.y===o.y}function Fg(r,o,u,g){var b=Yd(Oo(r,o,u)),C=Yd(Oo(r,o,g)),S=Yd(Oo(u,g,r)),R=Yd(Oo(u,g,o));return b!==C&&S!==R||!(b!==0||!Wf(r,u,o))||!(C!==0||!Wf(r,g,o))||!(S!==0||!Wf(u,r,g))||!(R!==0||!Wf(u,o,g))}function Wf(r,o,u){return o.x<=Math.max(r.x,u.x)&&o.x>=Math.min(r.x,u.x)&&o.y<=Math.max(r.y,u.y)&&o.y>=Math.min(r.y,u.y)}function Yd(r){return r>0?1:r<0?-1:0}function Wh(r,o){return Oo(r.prev,r,r.next)<0?Oo(r,o,r.next)>=0&&Oo(r,r.prev,o)>=0:Oo(r,o,r.prev)<0||Oo(r,r.next,o)<0}function Kp(r,o){var u=new nc(r.i,r.x,r.y),g=new nc(o.i,o.x,o.y),b=r.next,C=o.prev;return r.next=o,o.prev=r,u.next=b,b.prev=u,g.next=u,u.prev=g,C.next=g,g.prev=C,g}function Rc(r,o,u,g){var b=new nc(r,o,u);return g?(b.next=g.next,b.prev=g,g.next.prev=b,g.next=b):(b.prev=b,b.next=b),b}function Xd(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function nc(r,o,u){this.i=r,this.x=o,this.y=u,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qp(r,o,u,g){for(var b=0,C=o,S=u-g;C<u;C+=g)b+=(r[S]-r[C])*(r[C+1]+r[S+1]),S=C;return b}function Jy(r,o,u,g,b){(function C(S,R,j,K,J){for(;K>j;){if(K-j>600){var nt=K-j+1,ct=R-j+1,mt=Math.log(nt),St=.5*Math.exp(2*mt/3),Ot=.5*Math.sqrt(mt*St*(nt-St)/nt)*(ct-nt/2<0?-1:1);C(S,R,Math.max(j,Math.floor(R-ct*St/nt+Ot)),Math.min(K,Math.floor(R+(nt-ct)*St/nt+Ot)),J)}var Zt=S[R],Vt=j,se=K;for(Zh(S,j,R),J(S[K],Zt)>0&&Zh(S,j,K);Vt<se;){for(Zh(S,Vt,se),Vt++,se--;J(S[Vt],Zt)<0;)Vt++;for(;J(S[se],Zt)>0;)se--}J(S[j],Zt)===0?Zh(S,j,se):Zh(S,++se,K),se<=R&&(j=se+1),R<=se&&(K=se-1)}})(r,o,u,g||r.length-1,b||Cb)}function Zh(r,o,u){var g=r[o];r[o]=r[u],r[u]=g}function Cb(r,o){return r<o?-1:r>o?1:0}function Ng(r,o){var u=r.length;if(u<=1)return[r];for(var g,b,C=[],S=0;S<u;S++){var R=Kt(r[S]);R!==0&&(r[S].area=Math.abs(R),b===void 0&&(b=R<0),b===R<0?(g&&C.push(g),g=[r[S]]):g.push(r[S]))}if(g&&C.push(g),o>1)for(var j=0;j<C.length;j++)C[j].length<=o||(Jy(C[j],o,1,C[j].length-1,Ib),C[j]=C[j].slice(0,o));return C}function Ib(r,o){return o.area-r.area}function Yp(r,o,u){for(var g=u.patternDependencies,b=!1,C=0,S=o;C<S.length;C+=1){var R=S[C].paint.get(r+"-pattern");R.isConstant()||(b=!0);var j=R.constantOr(null);j&&(b=!0,g[j.to]=!0,g[j.from]=!0)}return b}function Xp(r,o,u,g,b){for(var C=b.patternDependencies,S=0,R=o;S<R.length;S+=1){var j=R[S],K=j.paint.get(r+"-pattern").value;if(K.kind!=="constant"){var J=K.evaluate({zoom:g-1},u,{},b.availableImages),nt=K.evaluate({zoom:g},u,{},b.availableImages),ct=K.evaluate({zoom:g+1},u,{},b.availableImages);nt=nt&&nt.name?nt.name:nt,ct=ct&&ct.name?ct.name:ct,C[J=J&&J.name?J.name:J]=!0,C[nt]=!0,C[ct]=!0,u.patterns[j.id]={min:J,mid:nt,max:ct}}}return u}Wp.deviation=function(r,o,u,g){var b=o&&o.length,C=Math.abs(qp(r,0,b?o[0]*u:r.length,u));if(b)for(var S=0,R=o.length;S<R;S++)C-=Math.abs(qp(r,o[S]*u,S<R-1?o[S+1]*u:r.length,u));var j=0;for(S=0;S<g.length;S+=3){var K=g[S]*u,J=g[S+1]*u,nt=g[S+2]*u;j+=Math.abs((r[K]-r[nt])*(r[J+1]-r[K+1])-(r[K]-r[J])*(r[nt+1]-r[K+1]))}return C===0&&j===0?0:Math.abs((j-C)/C)},Wp.flatten=function(r){for(var o=r[0][0].length,u={vertices:[],holes:[],dimensions:o},g=0,b=0;b<r.length;b++){for(var C=0;C<r[b].length;C++)for(var S=0;S<o;S++)u.vertices.push(r[b][C][S]);b>0&&u.holes.push(g+=r[b-1].length)}return u},qd.default=oi;var Au=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(o){return o.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qu,this.indexArray=new Ju,this.indexArray2=new jh,this.programConfigurations=new zn(r.layers,r.zoom),this.segments=new yt,this.segments2=new yt,this.stateDependentLayerIds=this.layers.filter(function(o){return o.isStateDependent()}).map(function(o){return o.id})};Au.prototype.populate=function(r,o,u){this.hasPattern=Yp("fill",this.layers,o);for(var g=this.layers[0].layout.get("fill-sort-key"),b=[],C=0,S=r;C<S.length;C+=1){var R=S[C],j=R.feature,K=R.id,J=R.index,nt=R.sourceLayerIndex,ct=this.layers[0]._featureFilter.needGeometry,mt=Bi(j,ct);if(this.layers[0]._featureFilter.filter(new or(this.zoom),mt,u)){var St=g?g.evaluate(mt,{},u,o.availableImages):void 0,Ot={id:K,properties:j.properties,type:j.type,sourceLayerIndex:nt,index:J,geometry:ct?mt.geometry:Vi(j),patterns:{},sortKey:St};b.push(Ot)}}g&&b.sort(function(Je,cn){return Je.sortKey-cn.sortKey});for(var Zt=0,Vt=b;Zt<Vt.length;Zt+=1){var se=Vt[Zt],ye=se.geometry,Ee=se.index,Pe=se.sourceLayerIndex;if(this.hasPattern){var Ne=Xp("fill",this.layers,se,this.zoom,o);this.patternFeatures.push(Ne)}else this.addFeature(se,ye,Ee,u,{});o.featureIndex.insert(r[Ee].feature,ye,Ee,Pe,this.index)}},Au.prototype.update=function(r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,u)},Au.prototype.addFeatures=function(r,o,u){for(var g=0,b=this.patternFeatures;g<b.length;g+=1){var C=b[g];this.addFeature(C,C.geometry,C.index,o,u)}},Au.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Au.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Au.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,bb),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0},Au.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Au.prototype.addFeature=function(r,o,u,g,b){for(var C=0,S=Ng(o,500);C<S.length;C+=1){for(var R=S[C],j=0,K=0,J=R;K<J.length;K+=1)j+=J[K].length;for(var nt=this.segments.prepareSegment(j,this.layoutVertexArray,this.indexArray),ct=nt.vertexLength,mt=[],St=[],Ot=0,Zt=R;Ot<Zt.length;Ot+=1){var Vt=Zt[Ot];if(Vt.length!==0){Vt!==R[0]&&St.push(mt.length/2);var se=this.segments2.prepareSegment(Vt.length,this.layoutVertexArray,this.indexArray2),ye=se.vertexLength;this.layoutVertexArray.emplaceBack(Vt[0].x,Vt[0].y),this.indexArray2.emplaceBack(ye+Vt.length-1,ye),mt.push(Vt[0].x),mt.push(Vt[0].y);for(var Ee=1;Ee<Vt.length;Ee++)this.layoutVertexArray.emplaceBack(Vt[Ee].x,Vt[Ee].y),this.indexArray2.emplaceBack(ye+Ee-1,ye+Ee),mt.push(Vt[Ee].x),mt.push(Vt[Ee].y);se.vertexLength+=Vt.length,se.primitiveLength+=Vt.length}}for(var Pe=qd(mt,St),Ne=0;Ne<Pe.length;Ne+=3)this.indexArray.emplaceBack(ct+Pe[Ne],ct+Pe[Ne+1],ct+Pe[Ne+2]);nt.vertexLength+=j,nt.primitiveLength+=Pe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,b,g)},xn("FillBucket",Au,{omit:["layers","patternFeatures"]});var t0=new pa({"fill-sort-key":new Ln(gt.layout_fill["fill-sort-key"])}),e0={paint:new pa({"fill-antialias":new Nn(gt.paint_fill["fill-antialias"]),"fill-opacity":new Ln(gt.paint_fill["fill-opacity"]),"fill-color":new Ln(gt.paint_fill["fill-color"]),"fill-outline-color":new Ln(gt.paint_fill["fill-outline-color"]),"fill-translate":new Nn(gt.paint_fill["fill-translate"]),"fill-translate-anchor":new Nn(gt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Xu(gt.paint_fill["fill-pattern"])}),layout:t0},Qs=function(r){function o(u){r.call(this,u,e0)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.recalculate=function(u,g){r.prototype.recalculate.call(this,u,g);var b=this.paint._values["fill-outline-color"];b.value.kind==="constant"&&b.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},o.prototype.createBucket=function(u){return new Au(u)},o.prototype.queryRadius=function(){return qo(this.paint.get("fill-translate"))},o.prototype.queryIntersectsFeature=function(u,g,b,C,S,R,j){return yl(_l(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),R.angle,j),C)},o.prototype.isTileClipped=function(){return!0},o}(jl),rc=ko([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,n0=Zf;function Zf(r,o,u,g,b){this.properties={},this.extent=u,this.type=0,this._pbf=r,this._geometry=-1,this._keys=g,this._values=b,r.readFields(Qp,this,o)}function Qp(r,o,u){r==1?o.id=u.readVarint():r==2?function(g,b){for(var C=g.readVarint()+g.pos;g.pos<C;){var S=b._keys[g.readVarint()],R=b._values[g.readVarint()];b.properties[S]=R}}(u,o):r==3?o.type=u.readVarint():r==4&&(o._geometry=u.pos)}function $f(r){for(var o,u,g=0,b=0,C=r.length,S=C-1;b<C;S=b++)g+=((u=r[S]).x-(o=r[b]).x)*(o.y+u.y);return g}Zf.types=["Unknown","Point","LineString","Polygon"],Zf.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var o,u=r.readVarint()+r.pos,g=1,b=0,C=0,S=0,R=[];r.pos<u;){if(b<=0){var j=r.readVarint();g=7&j,b=j>>3}if(b--,g===1||g===2)C+=r.readSVarint(),S+=r.readSVarint(),g===1&&(o&&R.push(o),o=[]),o.push(new x(C,S));else{if(g!==7)throw new Error("unknown command "+g);o&&o.push(o[0].clone())}}return o&&R.push(o),R},Zf.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var o=r.readVarint()+r.pos,u=1,g=0,b=0,C=0,S=1/0,R=-1/0,j=1/0,K=-1/0;r.pos<o;){if(g<=0){var J=r.readVarint();u=7&J,g=J>>3}if(g--,u===1||u===2)(b+=r.readSVarint())<S&&(S=b),b>R&&(R=b),(C+=r.readSVarint())<j&&(j=C),C>K&&(K=C);else if(u!==7)throw new Error("unknown command "+u)}return[S,j,R,K]},Zf.prototype.toGeoJSON=function(r,o,u){var g,b,C=this.extent*Math.pow(2,u),S=this.extent*r,R=this.extent*o,j=this.loadGeometry(),K=Zf.types[this.type];function J(mt){for(var St=0;St<mt.length;St++){var Ot=mt[St];mt[St]=[360*(Ot.x+S)/C-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ot.y+R)/C)*Math.PI/180))-90]}}switch(this.type){case 1:var nt=[];for(g=0;g<j.length;g++)nt[g]=j[g][0];J(j=nt);break;case 2:for(g=0;g<j.length;g++)J(j[g]);break;case 3:for(j=function(mt){var St=mt.length;if(St<=1)return[mt];for(var Ot,Zt,Vt=[],se=0;se<St;se++){var ye=$f(mt[se]);ye!==0&&(Zt===void 0&&(Zt=ye<0),Zt===ye<0?(Ot&&Vt.push(Ot),Ot=[mt[se]]):Ot.push(mt[se]))}return Ot&&Vt.push(Ot),Vt}(j),g=0;g<j.length;g++)for(b=0;b<j[g].length;b++)J(j[g][b])}j.length===1?j=j[0]:K="Multi"+K;var ct={type:"Feature",geometry:{type:K,coordinates:j},properties:this.properties};return"id"in this&&(ct.id=this.id),ct};var Ug=Vg;function Vg(r,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Eb,this,o),this.length=this._features.length}function Eb(r,o,u){r===15?o.version=u.readVarint():r===1?o.name=u.readString():r===5?o.extent=u.readVarint():r===2?o._features.push(u.pos):r===3?o._keys.push(u.readString()):r===4&&o._values.push(function(g){for(var b=null,C=g.readVarint()+g.pos;g.pos<C;){var S=g.readVarint()>>3;b=S===1?g.readString():S===2?g.readFloat():S===3?g.readDouble():S===4?g.readVarint64():S===5?g.readVarint():S===6?g.readSVarint():S===7?g.readBoolean():null}return b}(u))}function r0(r,o,u){if(r===3){var g=new Ug(u,u.readVarint()+u.pos);g.length&&(o[g.name]=g)}}Vg.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var o=this._pbf.readVarint()+this._pbf.pos;return new n0(this._pbf,o,this.extent,this._keys,this._values)};var wu={VectorTile:function(r,o){this.layers=r.readFields(r0,{},o)},VectorTileFeature:n0,VectorTileLayer:Ug},Qd=wu.VectorTileFeature.types,jg=Math.pow(2,13);function Kf(r,o,u,g,b,C,S,R){r.emplaceBack(o,u,2*Math.floor(g*jg)+S,b*jg*2,C*jg*2,Math.round(R))}var Kl=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(o){return o.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new fs,this.indexArray=new Ju,this.programConfigurations=new zn(r.layers,r.zoom),this.segments=new yt,this.stateDependentLayerIds=this.layers.filter(function(o){return o.isStateDependent()}).map(function(o){return o.id})};function Jp(r,o){return r.x===o.x&&(r.x<0||r.x>8192)||r.y===o.y&&(r.y<0||r.y>8192)}Kl.prototype.populate=function(r,o,u){this.features=[],this.hasPattern=Yp("fill-extrusion",this.layers,o);for(var g=0,b=r;g<b.length;g+=1){var C=b[g],S=C.feature,R=C.id,j=C.index,K=C.sourceLayerIndex,J=this.layers[0]._featureFilter.needGeometry,nt=Bi(S,J);if(this.layers[0]._featureFilter.filter(new or(this.zoom),nt,u)){var ct={id:R,sourceLayerIndex:K,index:j,geometry:J?nt.geometry:Vi(S),properties:S.properties,type:S.type,patterns:{}};this.hasPattern?this.features.push(Xp("fill-extrusion",this.layers,ct,this.zoom,o)):this.addFeature(ct,ct.geometry,j,u,{}),o.featureIndex.insert(S,ct.geometry,j,K,this.index,!0)}}},Kl.prototype.addFeatures=function(r,o,u){for(var g=0,b=this.features;g<b.length;g+=1){var C=b[g];this.addFeature(C,C.geometry,C.index,o,u)}},Kl.prototype.update=function(r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,u)},Kl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Kl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Kl.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,rc),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},Kl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Kl.prototype.addFeature=function(r,o,u,g,b){for(var C=0,S=Ng(o,500);C<S.length;C+=1){for(var R=S[C],j=0,K=0,J=R;K<J.length;K+=1)j+=J[K].length;for(var nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),ct=0,mt=R;ct<mt.length;ct+=1){var St=mt[ct];if(St.length!==0&&!((Or=St).every(function(Ar){return Ar.x<0})||Or.every(function(Ar){return Ar.x>8192})||Or.every(function(Ar){return Ar.y<0})||Or.every(function(Ar){return Ar.y>8192})))for(var Ot=0,Zt=0;Zt<St.length;Zt++){var Vt=St[Zt];if(Zt>=1){var se=St[Zt-1];if(!Jp(Vt,se)){nt.vertexLength+4>yt.MAX_VERTEX_ARRAY_LENGTH&&(nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ye=Vt.sub(se)._perp()._unit(),Ee=se.dist(Vt);Ot+Ee>32768&&(Ot=0),Kf(this.layoutVertexArray,Vt.x,Vt.y,ye.x,ye.y,0,0,Ot),Kf(this.layoutVertexArray,Vt.x,Vt.y,ye.x,ye.y,0,1,Ot),Kf(this.layoutVertexArray,se.x,se.y,ye.x,ye.y,0,0,Ot+=Ee),Kf(this.layoutVertexArray,se.x,se.y,ye.x,ye.y,0,1,Ot);var Pe=nt.vertexLength;this.indexArray.emplaceBack(Pe,Pe+2,Pe+1),this.indexArray.emplaceBack(Pe+1,Pe+2,Pe+3),nt.vertexLength+=4,nt.primitiveLength+=2}}}}if(nt.vertexLength+j>yt.MAX_VERTEX_ARRAY_LENGTH&&(nt=this.segments.prepareSegment(j,this.layoutVertexArray,this.indexArray)),Qd[r.type]==="Polygon"){for(var Ne=[],Je=[],cn=nt.vertexLength,Vn=0,_n=R;Vn<_n.length;Vn+=1){var $n=_n[Vn];if($n.length!==0){$n!==R[0]&&Je.push(Ne.length/2);for(var wn=0;wn<$n.length;wn++){var Sr=$n[wn];Kf(this.layoutVertexArray,Sr.x,Sr.y,0,0,1,1,0),Ne.push(Sr.x),Ne.push(Sr.y)}}}for(var ar=qd(Ne,Je),Rn=0;Rn<ar.length;Rn+=3)this.indexArray.emplaceBack(cn+ar[Rn],cn+ar[Rn+2],cn+ar[Rn+1]);nt.primitiveLength+=ar.length/3,nt.vertexLength+=j}}var Or;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,b,g)},xn("FillExtrusionBucket",Kl,{omit:["layers","features"]});var i0={paint:new pa({"fill-extrusion-opacity":new Nn(gt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ln(gt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Nn(gt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Nn(gt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Xu(gt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ln(gt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ln(gt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Nn(gt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},tm=function(r){function o(u){r.call(this,u,i0)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.createBucket=function(u){return new Kl(u)},o.prototype.queryRadius=function(){return qo(this.paint.get("fill-extrusion-translate"))},o.prototype.is3D=function(){return!0},o.prototype.queryIntersectsFeature=function(u,g,b,C,S,R,j,K){var J=_l(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),R.angle,j),nt=this.paint.get("fill-extrusion-height").evaluate(g,b),ct=this.paint.get("fill-extrusion-base").evaluate(g,b),mt=function(Ot,Zt,Vt,se){for(var ye=[],Ee=0,Pe=Ot;Ee<Pe.length;Ee+=1){var Ne=Pe[Ee],Je=[Ne.x,Ne.y,0,1];gh(Je,Je,Zt),ye.push(new x(Je[0]/Je[3],Je[1]/Je[3]))}return ye}(J,K),St=function(Ot,Zt,Vt,se){for(var ye=[],Ee=[],Pe=se[8]*Zt,Ne=se[9]*Zt,Je=se[10]*Zt,cn=se[11]*Zt,Vn=se[8]*Vt,_n=se[9]*Vt,$n=se[10]*Vt,wn=se[11]*Vt,Sr=0,ar=Ot;Sr<ar.length;Sr+=1){for(var Rn=[],Or=[],Ar=0,Zr=ar[Sr];Ar<Zr.length;Ar+=1){var qn=Zr[Ar],ai=qn.x,Xi=qn.y,Qi=se[0]*ai+se[4]*Xi+se[12],ji=se[1]*ai+se[5]*Xi+se[13],Ji=se[2]*ai+se[6]*Xi+se[14],go=se[3]*ai+se[7]*Xi+se[15],Ro=Ji+Je,jo=go+cn,Ua=Qi+Vn,oa=ji+_n,Va=Ji+$n,Io=go+wn,aa=new x((Qi+Pe)/jo,(ji+Ne)/jo);aa.z=Ro/jo,Rn.push(aa);var Hr=new x(Ua/Io,oa/Io);Hr.z=Va/Io,Or.push(Hr)}ye.push(Rn),Ee.push(Or)}return[ye,Ee]}(C,ct,nt,K);return function(Ot,Zt,Vt){var se=1/0;yl(Vt,Zt)&&(se=Jd(Vt,Zt[0]));for(var ye=0;ye<Zt.length;ye++)for(var Ee=Zt[ye],Pe=Ot[ye],Ne=0;Ne<Ee.length-1;Ne++){var Je=Ee[Ne],cn=[Je,Ee[Ne+1],Pe[Ne+1],Pe[Ne],Je];Hl(Vt,cn)&&(se=Math.min(se,Jd(Vt,cn)))}return se!==1/0&&se}(St[0],St[1],mt)},o}(jl);function $h(r,o){return r.x*o.x+r.y*o.y}function Jd(r,o){if(r.length===1){for(var u,g=0,b=o[g++];!u||b.equals(u);)if(!(u=o[g++]))return 1/0;for(;g<o.length;g++){var C=o[g],S=r[0],R=u.sub(b),j=C.sub(b),K=S.sub(b),J=$h(R,R),nt=$h(R,j),ct=$h(j,j),mt=$h(K,R),St=$h(K,j),Ot=J*ct-nt*nt,Zt=(ct*mt-nt*St)/Ot,Vt=(J*St-nt*mt)/Ot,se=b.z*(1-Zt-Vt)+u.z*Zt+C.z*Vt;if(isFinite(se))return se}return 1/0}for(var ye=1/0,Ee=0,Pe=o;Ee<Pe.length;Ee+=1)ye=Math.min(ye,Pe[Ee].z);return ye}var Sb=ko([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,o0=ko([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,em=wu.VectorTileFeature.types,a0=Math.cos(Math.PI/180*37.5),nm=Math.pow(2,14)/.5,ns=function(r){var o=this;this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(u){o.gradients[u.id]={}}),this.layoutVertexArray=new Ca,this.layoutVertexArray2=new Ia,this.indexArray=new Ju,this.programConfigurations=new zn(r.layers,r.zoom),this.segments=new yt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};ns.prototype.populate=function(r,o,u){this.hasPattern=Yp("line",this.layers,o);for(var g=this.layers[0].layout.get("line-sort-key"),b=[],C=0,S=r;C<S.length;C+=1){var R=S[C],j=R.feature,K=R.id,J=R.index,nt=R.sourceLayerIndex,ct=this.layers[0]._featureFilter.needGeometry,mt=Bi(j,ct);if(this.layers[0]._featureFilter.filter(new or(this.zoom),mt,u)){var St=g?g.evaluate(mt,{},u):void 0,Ot={id:K,properties:j.properties,type:j.type,sourceLayerIndex:nt,index:J,geometry:ct?mt.geometry:Vi(j),patterns:{},sortKey:St};b.push(Ot)}}g&&b.sort(function(Je,cn){return Je.sortKey-cn.sortKey});for(var Zt=0,Vt=b;Zt<Vt.length;Zt+=1){var se=Vt[Zt],ye=se.geometry,Ee=se.index,Pe=se.sourceLayerIndex;if(this.hasPattern){var Ne=Xp("line",this.layers,se,this.zoom,o);this.patternFeatures.push(Ne)}else this.addFeature(se,ye,Ee,u,{});o.featureIndex.insert(r[Ee].feature,ye,Ee,Pe,this.index)}},ns.prototype.update=function(r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,u)},ns.prototype.addFeatures=function(r,o,u){for(var g=0,b=this.patternFeatures;g<b.length;g+=1){var C=b[g];this.addFeature(C,C.geometry,C.index,o,u)}},ns.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ns.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ns.prototype.upload=function(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,o0)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Sb),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},ns.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ns.prototype.lineFeatureClips=function(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}},ns.prototype.addFeature=function(r,o,u,g,b){var C=this.layers[0].layout,S=C.get("line-join").evaluate(r,{}),R=C.get("line-cap"),j=C.get("line-miter-limit"),K=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(var J=0,nt=o;J<nt.length;J+=1)this.addLine(nt[J],r,S,R,j,K);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,b,g)},ns.prototype.addLine=function(r,o,u,g,b,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var S=0;S<r.length-1;S++)this.totalDistance+=r[S].dist(r[S+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var R=em[o.type]==="Polygon",j=r.length;j>=2&&r[j-1].equals(r[j-2]);)j--;for(var K=0;K<j-1&&r[K].equals(r[K+1]);)K++;if(!(j<(R?3:2))){u==="bevel"&&(b=1.05);var J,nt=this.overscaling<=16?122880/(512*this.overscaling):0,ct=this.segments.prepareSegment(10*j,this.layoutVertexArray,this.indexArray),mt=void 0,St=void 0,Ot=void 0,Zt=void 0;this.e1=this.e2=-1,R&&(Zt=r[K].sub(J=r[j-2])._unit()._perp());for(var Vt=K;Vt<j;Vt++)if(!(St=Vt===j-1?R?r[K+1]:void 0:r[Vt+1])||!r[Vt].equals(St)){Zt&&(Ot=Zt),J&&(mt=J),J=r[Vt],Zt=St?St.sub(J)._unit()._perp():Ot;var se=(Ot=Ot||Zt).add(Zt);se.x===0&&se.y===0||se._unit();var ye=Ot.x*Zt.x+Ot.y*Zt.y,Ee=se.x*Zt.x+se.y*Zt.y,Pe=Ee!==0?1/Ee:1/0,Ne=2*Math.sqrt(2-2*Ee),Je=Ee<a0&&mt&&St,cn=Ot.x*Zt.y-Ot.y*Zt.x>0;if(Je&&Vt>K){var Vn=J.dist(mt);if(Vn>2*nt){var _n=J.sub(J.sub(mt)._mult(nt/Vn)._round());this.updateDistance(mt,_n),this.addCurrentVertex(_n,Ot,0,0,ct),mt=_n}}var $n=mt&&St,wn=$n?u:R?"butt":g;if($n&&wn==="round"&&(Pe<C?wn="miter":Pe<=2&&(wn="fakeround")),wn==="miter"&&Pe>b&&(wn="bevel"),wn==="bevel"&&(Pe>2&&(wn="flipbevel"),Pe<b&&(wn="miter")),mt&&this.updateDistance(mt,J),wn==="miter")se._mult(Pe),this.addCurrentVertex(J,se,0,0,ct);else if(wn==="flipbevel"){if(Pe>100)se=Zt.mult(-1);else{var Sr=Pe*Ot.add(Zt).mag()/Ot.sub(Zt).mag();se._perp()._mult(Sr*(cn?-1:1))}this.addCurrentVertex(J,se,0,0,ct),this.addCurrentVertex(J,se.mult(-1),0,0,ct)}else if(wn==="bevel"||wn==="fakeround"){var ar=-Math.sqrt(Pe*Pe-1),Rn=cn?ar:0,Or=cn?0:ar;if(mt&&this.addCurrentVertex(J,Ot,Rn,Or,ct),wn==="fakeround")for(var Ar=Math.round(180*Ne/Math.PI/20),Zr=1;Zr<Ar;Zr++){var qn=Zr/Ar;if(qn!==.5){var ai=qn-.5;qn+=qn*ai*(qn-1)*((1.0904+ye*(ye*(3.55645-1.43519*ye)-3.2452))*ai*ai+(.848013+ye*(.215638*ye-1.06021)))}var Xi=Zt.sub(Ot)._mult(qn)._add(Ot)._unit()._mult(cn?-1:1);this.addHalfVertex(J,Xi.x,Xi.y,!1,cn,0,ct)}St&&this.addCurrentVertex(J,Zt,-Rn,-Or,ct)}else if(wn==="butt")this.addCurrentVertex(J,se,0,0,ct);else if(wn==="square"){var Qi=mt?1:-1;this.addCurrentVertex(J,se,Qi,Qi,ct)}else wn==="round"&&(mt&&(this.addCurrentVertex(J,Ot,0,0,ct),this.addCurrentVertex(J,Ot,1,1,ct,!0)),St&&(this.addCurrentVertex(J,Zt,-1,-1,ct,!0),this.addCurrentVertex(J,Zt,0,0,ct)));if(Je&&Vt<j-1){var ji=J.dist(St);if(ji>2*nt){var Ji=J.add(St.sub(J)._mult(nt/ji)._round());this.updateDistance(J,Ji),this.addCurrentVertex(Ji,Zt,0,0,ct),J=Ji}}}}},ns.prototype.addCurrentVertex=function(r,o,u,g,b,C){C===void 0&&(C=!1);var S=o.y*g-o.x,R=-o.y-o.x*g;this.addHalfVertex(r,o.x+o.y*u,o.y-o.x*u,C,!1,u,b),this.addHalfVertex(r,S,R,C,!0,-g,b),this.distance>nm/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(r,o,u,g,b,C))},ns.prototype.addHalfVertex=function(r,o,u,g,b,C,S){var R=.5*(this.lineClips?this.scaledDistance*(nm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r.x<<1)+(g?1:0),(r.y<<1)+(b?1:0),Math.round(63*o)+128,Math.round(63*u)+128,1+(C===0?0:C<0?-1:1)|(63&R)<<2,R>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var j=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,j),S.primitiveLength++),b?this.e2=j:this.e1=j},ns.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},ns.prototype.updateDistance=function(r,o){this.distance+=r.dist(o),this.updateScaledDistance()},xn("LineBucket",ns,{omit:["layers","patternFeatures"]});var s0=new pa({"line-cap":new Nn(gt.layout_line["line-cap"]),"line-join":new Ln(gt.layout_line["line-join"]),"line-miter-limit":new Nn(gt.layout_line["line-miter-limit"]),"line-round-limit":new Nn(gt.layout_line["line-round-limit"]),"line-sort-key":new Ln(gt.layout_line["line-sort-key"])}),ic={paint:new pa({"line-opacity":new Ln(gt.paint_line["line-opacity"]),"line-color":new Ln(gt.paint_line["line-color"]),"line-translate":new Nn(gt.paint_line["line-translate"]),"line-translate-anchor":new Nn(gt.paint_line["line-translate-anchor"]),"line-width":new Ln(gt.paint_line["line-width"]),"line-gap-width":new Ln(gt.paint_line["line-gap-width"]),"line-offset":new Ln(gt.paint_line["line-offset"]),"line-blur":new Ln(gt.paint_line["line-blur"]),"line-dasharray":new ra(gt.paint_line["line-dasharray"]),"line-pattern":new Xu(gt.paint_line["line-pattern"]),"line-gradient":new Ba(gt.paint_line["line-gradient"])}),layout:s0},Hg=new(function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.possiblyEvaluate=function(u,g){return g=new or(Math.floor(g.zoom),{now:g.now,fadeDuration:g.fadeDuration,zoomHistory:g.zoomHistory,transition:g.transition}),r.prototype.possiblyEvaluate.call(this,u,g)},o.prototype.evaluate=function(u,g,b,C){return g=D({},g,{zoom:Math.floor(g.zoom)}),r.prototype.evaluate.call(this,u,g,b,C)},o}(Ln))(ic.paint.properties["line-width"].specification);Hg.useIntegerZoom=!0;var l0=function(r){function o(u){r.call(this,u,ic),this.gradientVersion=0}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._handleSpecialPaintPropertyUpdate=function(u){u==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Gr,this.gradientVersion=(this.gradientVersion+1)%E)},o.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},o.prototype.recalculate=function(u,g){r.prototype.recalculate.call(this,u,g),this.paint._values["line-floorwidth"]=Hg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)},o.prototype.createBucket=function(u){return new ns(u)},o.prototype.queryRadius=function(u){var g=u,b=u0(Wl("line-width",this,g),Wl("line-gap-width",this,g)),C=Wl("line-offset",this,g);return b/2+Math.abs(C)+qo(this.paint.get("line-translate"))},o.prototype.queryIntersectsFeature=function(u,g,b,C,S,R,j){var K=_l(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),R.angle,j),J=j/2*u0(this.paint.get("line-width").evaluate(g,b),this.paint.get("line-gap-width").evaluate(g,b)),nt=this.paint.get("line-offset").evaluate(g,b);return nt&&(C=function(ct,mt){for(var St=[],Ot=new x(0,0),Zt=0;Zt<ct.length;Zt++){for(var Vt=ct[Zt],se=[],ye=0;ye<Vt.length;ye++){var Ee=Vt[ye],Pe=Vt[ye+1],Ne=ye===0?Ot:Ee.sub(Vt[ye-1])._unit()._perp(),Je=ye===Vt.length-1?Ot:Pe.sub(Ee)._unit()._perp(),cn=Ne._add(Je)._unit();cn._mult(1/(cn.x*Je.x+cn.y*Je.y)),se.push(cn._mult(mt)._add(Ee))}St.push(se)}return St}(C,nt*j)),function(ct,mt,St){for(var Ot=0;Ot<mt.length;Ot++){var Zt=mt[Ot];if(ct.length>=3){for(var Vt=0;Vt<Zt.length;Vt++)if(Gl(ct,Zt[Vt]))return!0}if(Ys(ct,Zt,St))return!0}return!1}(K,C,J)},o.prototype.isTileClipped=function(){return!0},o}(jl);function u0(r,o){return o>0?o+2*r:r}var c0=ko([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Mb=ko([{name:"a_projected_pos",components:3,type:"Float32"}],4),Tb=(ko([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ko([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),oc=(ko([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ko([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Gg=ko([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Wg(r,o,u){return r.sections.forEach(function(g){g.text=function(b,C,S){var R=C.layout.get("text-transform").evaluate(S,{});return R==="uppercase"?b=b.toLocaleUpperCase():R==="lowercase"&&(b=b.toLocaleLowerCase()),Ms.applyArabicShaping&&(b=Ms.applyArabicShaping(b)),b}(g.text,o,u)}),r}ko([{name:"triangle",components:3,type:"Uint16"}]),ko([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ko([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ko([{type:"Float32",name:"offsetX"}]),ko([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Kh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},tp=function(r,o,u,g,b){var C,S,R=8*b-g-1,j=(1<<R)-1,K=j>>1,J=-7,nt=b-1,ct=-1,mt=r[o+nt];for(nt+=ct,C=mt&(1<<-J)-1,mt>>=-J,J+=R;J>0;C=256*C+r[o+nt],nt+=ct,J-=8);for(S=C&(1<<-J)-1,C>>=-J,J+=g;J>0;S=256*S+r[o+nt],nt+=ct,J-=8);if(C===0)C=1-K;else{if(C===j)return S?NaN:1/0*(mt?-1:1);S+=Math.pow(2,g),C-=K}return(mt?-1:1)*S*Math.pow(2,C-g)},qh=function(r,o,u,g,b,C){var S,R,j,K=8*C-b-1,J=(1<<K)-1,nt=J>>1,ct=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,mt=0,St=1,Ot=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(R=isNaN(o)?1:0,S=J):(S=Math.floor(Math.log(o)/Math.LN2),o*(j=Math.pow(2,-S))<1&&(S--,j*=2),(o+=S+nt>=1?ct/j:ct*Math.pow(2,1-nt))*j>=2&&(S++,j/=2),S+nt>=J?(R=0,S=J):S+nt>=1?(R=(o*j-1)*Math.pow(2,b),S+=nt):(R=o*Math.pow(2,nt-1)*Math.pow(2,b),S=0));b>=8;r[u+mt]=255&R,mt+=St,R/=256,b-=8);for(S=S<<b|R,K+=b;K>0;r[u+mt]=255&S,mt+=St,S/=256,K-=8);r[u+mt-St]|=128*Ot},xr=Ci;function Ci(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Ci.Varint=0,Ci.Fixed64=1,Ci.Bytes=2,Ci.Fixed32=5;var rm=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ks(r){return r.type===Ci.Bytes?r.readVarint()+r.pos:r.pos+1}function qf(r,o,u){return u?4294967296*o+(r>>>0):4294967296*(o>>>0)+(r>>>0)}function im(r,o,u){var g=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));u.realloc(g);for(var b=u.pos-1;b>=r;b--)u.buf[b+g]=u.buf[b]}function h0(r,o){for(var u=0;u<r.length;u++)o.writeVarint(r[u])}function ps(r,o){for(var u=0;u<r.length;u++)o.writeSVarint(r[u])}function Pb(r,o){for(var u=0;u<r.length;u++)o.writeFloat(r[u])}function kb(r,o){for(var u=0;u<r.length;u++)o.writeDouble(r[u])}function f0(r,o){for(var u=0;u<r.length;u++)o.writeBoolean(r[u])}function Lb(r,o){for(var u=0;u<r.length;u++)o.writeFixed32(r[u])}function d0(r,o){for(var u=0;u<r.length;u++)o.writeSFixed32(r[u])}function Ob(r,o){for(var u=0;u<r.length;u++)o.writeFixed64(r[u])}function Rb(r,o){for(var u=0;u<r.length;u++)o.writeSFixed64(r[u])}function om(r,o){return(r[o]|r[o+1]<<8|r[o+2]<<16)+16777216*r[o+3]}function Js(r,o,u){r[u]=o,r[u+1]=o>>>8,r[u+2]=o>>>16,r[u+3]=o>>>24}function ms(r,o){return(r[o]|r[o+1]<<8|r[o+2]<<16)+(r[o+3]<<24)}function Zg(r,o,u){r===1&&u.readMessage(Db,o)}function Db(r,o,u){if(r===3){var g=u.readMessage($g,{}),b=g.width,C=g.height,S=g.left,R=g.top,j=g.advance;o.push({id:g.id,bitmap:new yh({width:b+6,height:C+6},g.bitmap),metrics:{width:b,height:C,left:S,top:R,advance:j}})}}function $g(r,o,u){r===1?o.id=u.readVarint():r===2?o.bitmap=u.readBytes():r===3?o.width=u.readVarint():r===4?o.height=u.readVarint():r===5?o.left=u.readSVarint():r===6?o.top=u.readSVarint():r===7&&(o.advance=u.readVarint())}function p0(r){for(var o=0,u=0,g=0,b=r;g<b.length;g+=1){var C=b[g];o+=C.w*C.h,u=Math.max(u,C.w)}r.sort(function(Ot,Zt){return Zt.h-Ot.h});for(var S=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),u),h:1/0}],R=0,j=0,K=0,J=r;K<J.length;K+=1)for(var nt=J[K],ct=S.length-1;ct>=0;ct--){var mt=S[ct];if(!(nt.w>mt.w||nt.h>mt.h)){if(nt.x=mt.x,nt.y=mt.y,j=Math.max(j,nt.y+nt.h),R=Math.max(R,nt.x+nt.w),nt.w===mt.w&&nt.h===mt.h){var St=S.pop();ct<S.length&&(S[ct]=St)}else nt.h===mt.h?(mt.x+=nt.w,mt.w-=nt.w):nt.w===mt.w?(mt.y+=nt.h,mt.h-=nt.h):(S.push({x:mt.x+nt.w,y:mt.y,w:mt.w-nt.w,h:nt.h}),mt.y+=nt.h,mt.h-=nt.h);break}}return{w:R,h:j,fill:o/(R*j)||0}}Ci.prototype={destroy:function(){this.buf=null},readFields:function(r,o,u){for(u=u||this.length;this.pos<u;){var g=this.readVarint(),b=g>>3,C=this.pos;this.type=7&g,r(b,o,this),this.pos===C&&this.skip(g)}return o},readMessage:function(r,o){return this.readFields(r,o,this.readVarint()+this.pos)},readFixed32:function(){var r=om(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=ms(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=om(this.buf,this.pos)+4294967296*om(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=om(this.buf,this.pos)+4294967296*ms(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=tp(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=tp(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var o,u,g=this.buf;return o=127&(u=g[this.pos++]),u<128?o:(o|=(127&(u=g[this.pos++]))<<7,u<128?o:(o|=(127&(u=g[this.pos++]))<<14,u<128?o:(o|=(127&(u=g[this.pos++]))<<21,u<128?o:function(b,C,S){var R,j,K=S.buf;if(R=(112&(j=K[S.pos++]))>>4,j<128||(R|=(127&(j=K[S.pos++]))<<3,j<128)||(R|=(127&(j=K[S.pos++]))<<10,j<128)||(R|=(127&(j=K[S.pos++]))<<17,j<128)||(R|=(127&(j=K[S.pos++]))<<24,j<128)||(R|=(1&(j=K[S.pos++]))<<31,j<128))return qf(b,R,C);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(u=g[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,o=this.pos;return this.pos=r,r-o>=12&&rm?function(u,g,b){return rm.decode(u.subarray(g,b))}(this.buf,o,r):function(u,g,b){for(var C="",S=g;S<b;){var R,j,K,J=u[S],nt=null,ct=J>239?4:J>223?3:J>191?2:1;if(S+ct>b)break;ct===1?J<128&&(nt=J):ct===2?(192&(R=u[S+1]))==128&&(nt=(31&J)<<6|63&R)<=127&&(nt=null):ct===3?(j=u[S+2],(192&(R=u[S+1]))==128&&(192&j)==128&&((nt=(15&J)<<12|(63&R)<<6|63&j)<=2047||nt>=55296&&nt<=57343)&&(nt=null)):ct===4&&(j=u[S+2],K=u[S+3],(192&(R=u[S+1]))==128&&(192&j)==128&&(192&K)==128&&((nt=(15&J)<<18|(63&R)<<12|(63&j)<<6|63&K)<=65535||nt>=1114112)&&(nt=null)),nt===null?(nt=65533,ct=1):nt>65535&&(nt-=65536,C+=String.fromCharCode(nt>>>10&1023|55296),nt=56320|1023&nt),C+=String.fromCharCode(nt),S+=ct}return C}(this.buf,o,r)},readBytes:function(){var r=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,r);return this.pos=r,o},readPackedVarint:function(r,o){if(this.type!==Ci.Bytes)return r.push(this.readVarint(o));var u=ks(this);for(r=r||[];this.pos<u;)r.push(this.readVarint(o));return r},readPackedSVarint:function(r){if(this.type!==Ci.Bytes)return r.push(this.readSVarint());var o=ks(this);for(r=r||[];this.pos<o;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Ci.Bytes)return r.push(this.readBoolean());var o=ks(this);for(r=r||[];this.pos<o;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Ci.Bytes)return r.push(this.readFloat());var o=ks(this);for(r=r||[];this.pos<o;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Ci.Bytes)return r.push(this.readDouble());var o=ks(this);for(r=r||[];this.pos<o;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Ci.Bytes)return r.push(this.readFixed32());var o=ks(this);for(r=r||[];this.pos<o;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Ci.Bytes)return r.push(this.readSFixed32());var o=ks(this);for(r=r||[];this.pos<o;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Ci.Bytes)return r.push(this.readFixed64());var o=ks(this);for(r=r||[];this.pos<o;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Ci.Bytes)return r.push(this.readSFixed64());var o=ks(this);for(r=r||[];this.pos<o;)r.push(this.readSFixed64());return r},skip:function(r){var o=7&r;if(o===Ci.Varint)for(;this.buf[this.pos++]>127;);else if(o===Ci.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Ci.Fixed32)this.pos+=4;else{if(o!==Ci.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(r,o){this.writeVarint(r<<3|o)},realloc:function(r){for(var o=this.length||16;o<this.pos+r;)o*=2;if(o!==this.length){var u=new Uint8Array(o);u.set(this.buf),this.buf=u,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Js(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Js(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Js(this.buf,-1&r,this.pos),Js(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Js(this.buf,-1&r,this.pos),Js(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(o,u){var g,b;if(o>=0?(g=o%4294967296|0,b=o/4294967296|0):(b=~(-o/4294967296),4294967295^(g=~(-o%4294967296))?g=g+1|0:(g=0,b=b+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(C,S,R){R.buf[R.pos++]=127&C|128,C>>>=7,R.buf[R.pos++]=127&C|128,C>>>=7,R.buf[R.pos++]=127&C|128,C>>>=7,R.buf[R.pos++]=127&C|128,R.buf[R.pos]=127&(C>>>=7)}(g,0,u),function(C,S){var R=(7&C)<<4;S.buf[S.pos++]|=R|((C>>>=3)?128:0),C&&(S.buf[S.pos++]=127&C|((C>>>=7)?128:0),C&&(S.buf[S.pos++]=127&C|((C>>>=7)?128:0),C&&(S.buf[S.pos++]=127&C|((C>>>=7)?128:0),C&&(S.buf[S.pos++]=127&C|((C>>>=7)?128:0),C&&(S.buf[S.pos++]=127&C)))))}(b,u)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var o=this.pos;this.pos=function(g,b,C){for(var S,R,j=0;j<b.length;j++){if((S=b.charCodeAt(j))>55295&&S<57344){if(!R){S>56319||j+1===b.length?(g[C++]=239,g[C++]=191,g[C++]=189):R=S;continue}if(S<56320){g[C++]=239,g[C++]=191,g[C++]=189,R=S;continue}S=R-55296<<10|S-56320|65536,R=null}else R&&(g[C++]=239,g[C++]=191,g[C++]=189,R=null);S<128?g[C++]=S:(S<2048?g[C++]=S>>6|192:(S<65536?g[C++]=S>>12|224:(g[C++]=S>>18|240,g[C++]=S>>12&63|128),g[C++]=S>>6&63|128),g[C++]=63&S|128)}return C}(this.buf,r,this.pos);var u=this.pos-o;u>=128&&im(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeFloat:function(r){this.realloc(4),qh(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),qh(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var o=r.length;this.writeVarint(o),this.realloc(o);for(var u=0;u<o;u++)this.buf[this.pos++]=r[u]},writeRawMessage:function(r,o){this.pos++;var u=this.pos;r(o,this);var g=this.pos-u;g>=128&&im(u,g,this),this.pos=u-1,this.writeVarint(g),this.pos+=g},writeMessage:function(r,o,u){this.writeTag(r,Ci.Bytes),this.writeRawMessage(o,u)},writePackedVarint:function(r,o){o.length&&this.writeMessage(r,h0,o)},writePackedSVarint:function(r,o){o.length&&this.writeMessage(r,ps,o)},writePackedBoolean:function(r,o){o.length&&this.writeMessage(r,f0,o)},writePackedFloat:function(r,o){o.length&&this.writeMessage(r,Pb,o)},writePackedDouble:function(r,o){o.length&&this.writeMessage(r,kb,o)},writePackedFixed32:function(r,o){o.length&&this.writeMessage(r,Lb,o)},writePackedSFixed32:function(r,o){o.length&&this.writeMessage(r,d0,o)},writePackedFixed64:function(r,o){o.length&&this.writeMessage(r,Ob,o)},writePackedSFixed64:function(r,o){o.length&&this.writeMessage(r,Rb,o)},writeBytesField:function(r,o){this.writeTag(r,Ci.Bytes),this.writeBytes(o)},writeFixed32Field:function(r,o){this.writeTag(r,Ci.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(r,o){this.writeTag(r,Ci.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(r,o){this.writeTag(r,Ci.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(r,o){this.writeTag(r,Ci.Fixed64),this.writeSFixed64(o)},writeVarintField:function(r,o){this.writeTag(r,Ci.Varint),this.writeVarint(o)},writeSVarintField:function(r,o){this.writeTag(r,Ci.Varint),this.writeSVarint(o)},writeStringField:function(r,o){this.writeTag(r,Ci.Bytes),this.writeString(o)},writeFloatField:function(r,o){this.writeTag(r,Ci.Fixed32),this.writeFloat(o)},writeDoubleField:function(r,o){this.writeTag(r,Ci.Fixed64),this.writeDouble(o)},writeBooleanField:function(r,o){this.writeVarintField(r,!!o)}};var am=function(r,o){var u=o.pixelRatio,g=o.version,b=o.stretchX,C=o.stretchY,S=o.content;this.paddedRect=r,this.pixelRatio=u,this.stretchX=b,this.stretchY=C,this.content=S,this.version=g},Dc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Dc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Dc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Dc.tlbr.get=function(){return this.tl.concat(this.br)},Dc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(am.prototype,Dc);var Yf=function(r,o){var u={},g={};this.haveRenderCallbacks=[];var b=[];this.addImages(r,u,b),this.addImages(o,g,b);var C=p0(b),S=new ds({width:C.w||1,height:C.h||1});for(var R in r){var j=r[R],K=u[R].paddedRect;ds.copy(j.data,S,{x:0,y:0},{x:K.x+1,y:K.y+1},j.data)}for(var J in o){var nt=o[J],ct=g[J].paddedRect,mt=ct.x+1,St=ct.y+1,Ot=nt.data.width,Zt=nt.data.height;ds.copy(nt.data,S,{x:0,y:0},{x:mt,y:St},nt.data),ds.copy(nt.data,S,{x:0,y:Zt-1},{x:mt,y:St-1},{width:Ot,height:1}),ds.copy(nt.data,S,{x:0,y:0},{x:mt,y:St+Zt},{width:Ot,height:1}),ds.copy(nt.data,S,{x:Ot-1,y:0},{x:mt-1,y:St},{width:1,height:Zt}),ds.copy(nt.data,S,{x:0,y:0},{x:mt+Ot,y:St},{width:1,height:Zt})}this.image=S,this.iconPositions=u,this.patternPositions=g};Yf.prototype.addImages=function(r,o,u){for(var g in r){var b=r[g],C={x:0,y:0,w:b.data.width+2,h:b.data.height+2};u.push(C),o[g]=new am(C,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(g)}},Yf.prototype.patchUpdatedImages=function(r,o){for(var u in r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[u],r.getImage(u),o),this.patchUpdatedImage(this.patternPositions[u],r.getImage(u),o)},Yf.prototype.patchUpdatedImage=function(r,o,u){if(r&&o&&r.version!==o.version){r.version=o.version;var g=r.tl;u.update(o.data,void 0,{x:g[0],y:g[1]})}},xn("ImagePosition",am),xn("ImageAtlas",Yf);var Ls={horizontal:1,vertical:2,horizontalOnly:3},Xf=function(){this.scale=1,this.fontStack="",this.imageName=null};Xf.forText=function(r,o){var u=new Xf;return u.scale=r||1,u.fontStack=o,u},Xf.forImage=function(r){var o=new Xf;return o.imageName=r,o};var Na=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function sm(r,o,u,g,b,C,S,R,j,K,J,nt,ct,mt,St,Ot){var Zt,Vt=Na.fromFeature(r,b);nt===Ls.vertical&&Vt.verticalizePunctuation();var se=Ms.processBidirectionalText,ye=Ms.processStyledBidirectionalText;if(se&&Vt.sections.length===1){Zt=[];for(var Ee=0,Pe=se(Vt.toString(),Yh(Vt,K,C,o,g,mt,St));Ee<Pe.length;Ee+=1){var Ne=Pe[Ee],Je=new Na;Je.text=Ne,Je.sections=Vt.sections;for(var cn=0;cn<Ne.length;cn++)Je.sectionIndex.push(0);Zt.push(Je)}}else if(ye){Zt=[];for(var Vn=0,_n=ye(Vt.text,Vt.sectionIndex,Yh(Vt,K,C,o,g,mt,St));Vn<_n.length;Vn+=1){var $n=_n[Vn],wn=new Na;wn.text=$n[0],wn.sectionIndex=$n[1],wn.sections=Vt.sections,Zt.push(wn)}}else Zt=function(Rn,Or){for(var Ar=[],Zr=Rn.text,qn=0,ai=0,Xi=Or;ai<Xi.length;ai+=1){var Qi=Xi[ai];Ar.push(Rn.substring(qn,Qi)),qn=Qi}return qn<Zr.length&&Ar.push(Rn.substring(qn,Zr.length)),Ar}(Vt,Yh(Vt,K,C,o,g,mt,St));var Sr=[],ar={positionedLines:Sr,text:Vt.toString(),top:J[1],bottom:J[1],left:J[0],right:J[0],writingMode:nt,iconsInText:!1,verticalizable:!1};return function(Rn,Or,Ar,Zr,qn,ai,Xi,Qi,ji,Ji,go,Ro){for(var jo=0,Ua=-17,oa=0,Va=0,Io=Qi==="right"?1:Qi==="left"?0:.5,aa=0,Hr=0,ki=qn;Hr<ki.length;Hr+=1){var bi=ki[Hr];bi.trim();var Jr=bi.getMaxScale(),rs=24*(Jr-1),Ea={positionedGlyphs:[],lineOffset:0};Rn.positionedLines[aa]=Ea;var Hi=Ea.positionedGlyphs,Ei=0;if(bi.length()){for(var Sa=0;Sa<bi.length();Sa++){var si=bi.getSection(Sa),vs=bi.getSectionIndex(Sa),yr=bi.getCharCode(Sa),ac=0,fi=null,Gi=null,Yl=null,Al=24,nf=!(ji===Ls.horizontal||!go&&!Ul(yr)||go&&(lm[yr]||(Ql=yr,sn.Arabic(Ql)||sn["Arabic Supplement"](Ql)||sn["Arabic Extended-A"](Ql)||sn["Arabic Presentation Forms-A"](Ql)||sn["Arabic Presentation Forms-B"](Ql))));if(si.imageName){var nd=Zr[si.imageName];if(!nd)continue;Yl=si.imageName,Rn.iconsInText=Rn.iconsInText||!0,Gi=nd.paddedRect;var Nc=nd.displaySize;si.scale=24*si.scale/Ro,ac=rs+(24-Nc[1]*si.scale),Al=(fi={width:Nc[0],height:Nc[1],left:1,top:-3,advance:nf?Nc[1]:Nc[0]}).advance;var rd=nf?Nc[0]*si.scale-24*Jr:Nc[1]*si.scale-24*Jr;rd>0&&rd>Ei&&(Ei=rd)}else{var ym=Ar[si.fontStack],Ah=ym&&ym[yr];if(Ah&&Ah.rect)Gi=Ah.rect,fi=Ah.metrics;else{var ap=Or[si.fontStack],Xl=ap&&ap[yr];if(!Xl)continue;fi=Xl.metrics}ac=24*(Jr-si.scale)}nf?(Rn.verticalizable=!0,Hi.push({glyph:yr,imageName:Yl,x:jo,y:Ua+ac,vertical:nf,scale:si.scale,fontStack:si.fontStack,sectionIndex:vs,metrics:fi,rect:Gi}),jo+=Al*si.scale+Ji):(Hi.push({glyph:yr,imageName:Yl,x:jo,y:Ua+ac,vertical:nf,scale:si.scale,fontStack:si.fontStack,sectionIndex:vs,metrics:fi,rect:Gi}),jo+=fi.advance*si.scale+Ji)}Hi.length!==0&&(oa=Math.max(jo-Ji,oa),g0(Hi,0,Hi.length-1,Io,Ei)),jo=0;var sp=ai*Jr+Ei;Ea.lineOffset=Math.max(Ei,rs),Ua+=sp,Va=Math.max(sp,Va),++aa}else Ua+=ai,++aa}var Ql,co=Ua- -17,ho=ep(Xi),Uc=ho.horizontalAlign,id=ho.verticalAlign;(function(_m,bm,lp,up,xm,od,Vc,rf,Am){var of,af=(bm-lp)*xm;of=od!==Vc?-rf*up- -17:(-up*Am+.5)*Vc;for(var ja=0,sc=_m;ja<sc.length;ja+=1)for(var sf=0,cp=sc[ja].positionedGlyphs;sf<cp.length;sf+=1){var ad=cp[sf];ad.x+=af,ad.y+=of}})(Rn.positionedLines,Io,Uc,id,oa,Va,ai,co,qn.length),Rn.top+=-id*co,Rn.bottom=Rn.top+co,Rn.left+=-Uc*oa,Rn.right=Rn.left+oa}(ar,o,u,g,Zt,S,R,j,nt,K,ct,Ot),!function(Rn){for(var Or=0,Ar=Rn;Or<Ar.length;Or+=1)if(Ar[Or].positionedGlyphs.length!==0)return!1;return!0}(Sr)&&ar}Na.fromFeature=function(r,o){for(var u=new Na,g=0;g<r.sections.length;g++){var b=r.sections[g];b.image?u.addImageSection(b):u.addTextSection(b,o)}return u},Na.prototype.length=function(){return this.text.length},Na.prototype.getSection=function(r){return this.sections[this.sectionIndex[r]]},Na.prototype.getSectionIndex=function(r){return this.sectionIndex[r]},Na.prototype.getCharCode=function(r){return this.text.charCodeAt(r)},Na.prototype.verticalizePunctuation=function(){this.text=function(r){for(var o="",u=0;u<r.length;u++){var g=r.charCodeAt(u+1)||null,b=r.charCodeAt(u-1)||null;o+=g&&Vl(g)&&!Kh[r[u+1]]||b&&Vl(b)&&!Kh[r[u-1]]||!Kh[r[u]]?r[u]:Kh[r[u]]}return o}(this.text)},Na.prototype.trim=function(){for(var r=0,o=0;o<this.text.length&&lm[this.text.charCodeAt(o)];o++)r++;for(var u=this.text.length,g=this.text.length-1;g>=0&&g>=r&&lm[this.text.charCodeAt(g)];g--)u--;this.text=this.text.substring(r,u),this.sectionIndex=this.sectionIndex.slice(r,u)},Na.prototype.substring=function(r,o){var u=new Na;return u.text=this.text.substring(r,o),u.sectionIndex=this.sectionIndex.slice(r,o),u.sections=this.sections,u},Na.prototype.toString=function(){return this.text},Na.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce(function(o,u){return Math.max(o,r.sections[u].scale)},0)},Na.prototype.addTextSection=function(r,o){this.text+=r.text,this.sections.push(Xf.forText(r.scale,r.fontStack||o));for(var u=this.sections.length-1,g=0;g<r.text.length;++g)this.sectionIndex.push(u)},Na.prototype.addImageSection=function(r){var o=r.image?r.image.name:"";if(o.length!==0){var u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Xf.forImage(o)),this.sectionIndex.push(this.sections.length-1)):ot("Reached maximum number of images 6401")}else ot("Can't add FormattedSection with an empty image.")},Na.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var lm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},gs={};function Kg(r,o,u,g,b,C){if(o.imageName){var S=g[o.imageName];return S?S.displaySize[0]*o.scale*24/C+b:0}var R=u[o.fontStack],j=R&&R[r];return j?j.metrics.advance*o.scale+b:0}function m0(r,o,u,g){var b=Math.pow(r-o,2);return g?r<o?b/2:2*b:b+Math.abs(u)*u}function qg(r,o,u){var g=0;return r===10&&(g-=1e4),u&&(g+=150),r!==40&&r!==65288||(g+=50),o!==41&&o!==65289||(g+=50),g}function Yg(r,o,u,g,b,C){for(var S=null,R=m0(o,u,b,C),j=0,K=g;j<K.length;j+=1){var J=K[j],nt=m0(o-J.x,u,b,C)+J.badness;nt<=R&&(S=J,R=nt)}return{index:r,x:o,priorBreak:S,badness:R}}function Yh(r,o,u,g,b,C,S){if(C!=="point")return[];if(!r)return[];for(var R,j=[],K=function(Zt,Vt,se,ye,Ee,Pe){for(var Ne=0,Je=0;Je<Zt.length();Je++){var cn=Zt.getSection(Je);Ne+=Kg(Zt.getCharCode(Je),cn,ye,Ee,Vt,Pe)}return Ne/Math.max(1,Math.ceil(Ne/se))}(r,o,u,g,b,S),J=r.text.indexOf("​")>=0,nt=0,ct=0;ct<r.length();ct++){var mt=r.getSection(ct),St=r.getCharCode(ct);if(lm[St]||(nt+=Kg(St,mt,g,b,o,S)),ct<r.length()-1){var Ot=!((R=St)<11904||!(sn["Bopomofo Extended"](R)||sn.Bopomofo(R)||sn["CJK Compatibility Forms"](R)||sn["CJK Compatibility Ideographs"](R)||sn["CJK Compatibility"](R)||sn["CJK Radicals Supplement"](R)||sn["CJK Strokes"](R)||sn["CJK Symbols and Punctuation"](R)||sn["CJK Unified Ideographs Extension A"](R)||sn["CJK Unified Ideographs"](R)||sn["Enclosed CJK Letters and Months"](R)||sn["Halfwidth and Fullwidth Forms"](R)||sn.Hiragana(R)||sn["Ideographic Description Characters"](R)||sn["Kangxi Radicals"](R)||sn["Katakana Phonetic Extensions"](R)||sn.Katakana(R)||sn["Vertical Forms"](R)||sn["Yi Radicals"](R)||sn["Yi Syllables"](R)));(gs[St]||Ot||mt.imageName)&&j.push(Yg(ct+1,nt,K,j,qg(St,r.getCharCode(ct+1),Ot&&J),!1))}}return function Zt(Vt){return Vt?Zt(Vt.priorBreak).concat(Vt.index):[]}(Yg(r.length(),nt,K,j,0,!0))}function ep(r){var o=.5,u=.5;switch(r){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:o,verticalAlign:u}}function g0(r,o,u,g,b){if(g||b)for(var C=r[u],S=(r[u].x+C.metrics.advance*C.scale)*g,R=o;R<=u;R++)r[R].x-=S,r[R].y+=b}function Xg(r,o,u,g,b,C){var S,R=r.image;if(R.content){var j=R.content,K=R.pixelRatio||1;S=[j[0]/K,j[1]/K,R.displaySize[0]-j[2]/K,R.displaySize[1]-j[3]/K]}var J,nt,ct,mt,St=o.left*C,Ot=o.right*C;u==="width"||u==="both"?(mt=b[0]+St-g[3],nt=b[0]+Ot+g[1]):nt=(mt=b[0]+(St+Ot-R.displaySize[0])/2)+R.displaySize[0];var Zt=o.top*C,Vt=o.bottom*C;return u==="height"||u==="both"?(J=b[1]+Zt-g[0],ct=b[1]+Vt+g[2]):ct=(J=b[1]+(Zt+Vt-R.displaySize[1])/2)+R.displaySize[1],{image:R,top:J,right:nt,bottom:ct,left:mt,collisionPadding:S}}gs[10]=!0,gs[32]=!0,gs[38]=!0,gs[40]=!0,gs[41]=!0,gs[43]=!0,gs[45]=!0,gs[47]=!0,gs[173]=!0,gs[183]=!0,gs[8203]=!0,gs[8208]=!0,gs[8211]=!0,gs[8231]=!0;var zc=function(r){function o(u,g,b,C){r.call(this,u,g),this.angle=b,C!==void 0&&(this.segment=C)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.clone=function(){return new o(this.x,this.y,this.angle,this.segment)},o}(x);function um(r,o){var u=o.expression;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new or(r+1))};if(u.kind==="source")return{kind:"source"};for(var g=u.zoomStops,b=u.interpolationType,C=0;C<g.length&&g[C]<=r;)C++;for(var S=C=Math.max(0,C-1);S<g.length&&g[S]<r+1;)S++;S=Math.min(g.length-1,S);var R=g[C],j=g[S];return u.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:j,interpolationType:b}:{kind:"camera",minZoom:R,maxZoom:j,minSize:u.evaluate(new or(R)),maxSize:u.evaluate(new or(j)),interpolationType:b}}function Cu(r,o,u){var g=o.uSize,b=u.lowerSize;return r.kind==="source"?b/128:r.kind==="composite"?so(b/128,u.upperSize/128,o.uSizeT):g}function _h(r,o){var u=0,g=0;if(r.kind==="constant")g=r.layoutSize;else if(r.kind!=="source"){var b=r.interpolationType,C=b?z(Mo.interpolationFactor(b,o,r.minZoom,r.maxZoom),0,1):0;r.kind==="camera"?g=so(r.minSize,r.maxSize,C):u=C}return{uSizeT:u,uSize:g}}xn("Anchor",zc);var zb=Object.freeze({__proto__:null,getSizeData:um,evaluateSizeForFeature:Cu,evaluateSizeForZoom:_h,SIZE_PACK_FACTOR:128});function Qg(r,o,u,g,b){if(o.segment===void 0)return!0;for(var C=o,S=o.segment+1,R=0;R>-u/2;){if(--S<0)return!1;R-=r[S].dist(C),C=r[S]}R+=r[S].dist(r[S+1]),S++;for(var j=[],K=0;R<u/2;){var J=r[S],nt=r[S+1];if(!nt)return!1;var ct=r[S-1].angleTo(J)-J.angleTo(nt);for(ct=Math.abs((ct+3*Math.PI)%(2*Math.PI)-Math.PI),j.push({distance:R,angleDelta:ct}),K+=ct;R-j[0].distance>g;)K-=j.shift().angleDelta;if(K>b)return!1;S++,R+=J.dist(nt)}return!0}function v0(r){for(var o=0,u=0;u<r.length-1;u++)o+=r[u].dist(r[u+1]);return o}function y0(r,o,u){return r?.6*o*u:0}function _0(r,o){return Math.max(r?r.right-r.left:0,o?o.right-o.left:0)}function Bb(r,o,u,g,b,C){for(var S=y0(u,b,C),R=_0(u,g)*C,j=0,K=v0(r)/2,J=0;J<r.length-1;J++){var nt=r[J],ct=r[J+1],mt=nt.dist(ct);if(j+mt>K){var St=(K-j)/mt,Ot=so(nt.x,ct.x,St),Zt=so(nt.y,ct.y,St),Vt=new zc(Ot,Zt,ct.angleTo(nt),J);return Vt._round(),!S||Qg(r,Vt,R,S,o)?Vt:void 0}j+=mt}}function Fb(r,o,u,g,b,C,S,R,j){var K=y0(g,C,S),J=_0(g,b),nt=J*S,ct=r[0].x===0||r[0].x===j||r[0].y===0||r[0].y===j;return o-nt<o/4&&(o=nt+o/4),function mt(St,Ot,Zt,Vt,se,ye,Ee,Pe,Ne){for(var Je=ye/2,cn=v0(St),Vn=0,_n=Ot-Zt,$n=[],wn=0;wn<St.length-1;wn++){for(var Sr=St[wn],ar=St[wn+1],Rn=Sr.dist(ar),Or=ar.angleTo(Sr);_n+Zt<Vn+Rn;){var Ar=((_n+=Zt)-Vn)/Rn,Zr=so(Sr.x,ar.x,Ar),qn=so(Sr.y,ar.y,Ar);if(Zr>=0&&Zr<Ne&&qn>=0&&qn<Ne&&_n-Je>=0&&_n+Je<=cn){var ai=new zc(Zr,qn,Or,wn);ai._round(),Vt&&!Qg(St,ai,ye,Vt,se)||$n.push(ai)}}Vn+=Rn}return Pe||$n.length||Ee||($n=mt(St,Vn/2,Zt,Vt,se,ye,Ee,!0,Ne)),$n}(r,ct?o/2*R%o:(J/2+2*C)*S*R%o,o,K,u,nt,ct,!1,j)}function b0(r,o,u,g,b){for(var C=[],S=0;S<r.length;S++)for(var R=r[S],j=void 0,K=0;K<R.length-1;K++){var J=R[K],nt=R[K+1];J.x<o&&nt.x<o||(J.x<o?J=new x(o,J.y+(o-J.x)/(nt.x-J.x)*(nt.y-J.y))._round():nt.x<o&&(nt=new x(o,J.y+(o-J.x)/(nt.x-J.x)*(nt.y-J.y))._round()),J.y<u&&nt.y<u||(J.y<u?J=new x(J.x+(u-J.y)/(nt.y-J.y)*(nt.x-J.x),u)._round():nt.y<u&&(nt=new x(J.x+(u-J.y)/(nt.y-J.y)*(nt.x-J.x),u)._round()),J.x>=g&&nt.x>=g||(J.x>=g?J=new x(g,J.y+(g-J.x)/(nt.x-J.x)*(nt.y-J.y))._round():nt.x>=g&&(nt=new x(g,J.y+(g-J.x)/(nt.x-J.x)*(nt.y-J.y))._round()),J.y>=b&&nt.y>=b||(J.y>=b?J=new x(J.x+(b-J.y)/(nt.y-J.y)*(nt.x-J.x),b)._round():nt.y>=b&&(nt=new x(J.x+(b-J.y)/(nt.y-J.y)*(nt.x-J.x),b)._round()),j&&J.equals(j[j.length-1])||C.push(j=[J]),j.push(nt)))))}return C}function x0(r,o,u,g){var b=[],C=r.image,S=C.pixelRatio,R=C.paddedRect.w-2,j=C.paddedRect.h-2,K=r.right-r.left,J=r.bottom-r.top,nt=C.stretchX||[[0,R]],ct=C.stretchY||[[0,j]],mt=function(Zr,qn){return Zr+qn[1]-qn[0]},St=nt.reduce(mt,0),Ot=ct.reduce(mt,0),Zt=R-St,Vt=j-Ot,se=0,ye=St,Ee=0,Pe=Ot,Ne=0,Je=Zt,cn=0,Vn=Vt;if(C.content&&g){var _n=C.content;se=cm(nt,0,_n[0]),Ee=cm(ct,0,_n[1]),ye=cm(nt,_n[0],_n[2]),Pe=cm(ct,_n[1],_n[3]),Ne=_n[0]-se,cn=_n[1]-Ee,Je=_n[2]-_n[0]-ye,Vn=_n[3]-_n[1]-Pe}var $n=function(Zr,qn,ai,Xi){var Qi=hm(Zr.stretch-se,ye,K,r.left),ji=fm(Zr.fixed-Ne,Je,Zr.stretch,St),Ji=hm(qn.stretch-Ee,Pe,J,r.top),go=fm(qn.fixed-cn,Vn,qn.stretch,Ot),Ro=hm(ai.stretch-se,ye,K,r.left),jo=fm(ai.fixed-Ne,Je,ai.stretch,St),Ua=hm(Xi.stretch-Ee,Pe,J,r.top),oa=fm(Xi.fixed-cn,Vn,Xi.stretch,Ot),Va=new x(Qi,Ji),Io=new x(Ro,Ji),aa=new x(Ro,Ua),Hr=new x(Qi,Ua),ki=new x(ji/S,go/S),bi=new x(jo/S,oa/S),Jr=o*Math.PI/180;if(Jr){var rs=Math.sin(Jr),Ea=Math.cos(Jr),Hi=[Ea,-rs,rs,Ea];Va._matMult(Hi),Io._matMult(Hi),Hr._matMult(Hi),aa._matMult(Hi)}var Ei=Zr.stretch+Zr.fixed,Sa=qn.stretch+qn.fixed;return{tl:Va,tr:Io,bl:Hr,br:aa,tex:{x:C.paddedRect.x+1+Ei,y:C.paddedRect.y+1+Sa,w:ai.stretch+ai.fixed-Ei,h:Xi.stretch+Xi.fixed-Sa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ki,pixelOffsetBR:bi,minFontScaleX:Je/S/K,minFontScaleY:Vn/S/J,isSDF:u}};if(g&&(C.stretchX||C.stretchY))for(var wn=A0(nt,Zt,St),Sr=A0(ct,Vt,Ot),ar=0;ar<wn.length-1;ar++)for(var Rn=wn[ar],Or=wn[ar+1],Ar=0;Ar<Sr.length-1;Ar++)b.push($n(Rn,Sr[Ar],Or,Sr[Ar+1]));else b.push($n({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:j+1}));return b}function cm(r,o,u){for(var g=0,b=0,C=r;b<C.length;b+=1){var S=C[b];g+=Math.max(o,Math.min(u,S[1]))-Math.max(o,Math.min(u,S[0]))}return g}function A0(r,o,u){for(var g=[{fixed:-1,stretch:0}],b=0,C=r;b<C.length;b+=1){var S=C[b],R=S[0],j=S[1],K=g[g.length-1];g.push({fixed:R-K.stretch,stretch:K.stretch}),g.push({fixed:R-K.stretch,stretch:K.stretch+(j-R)})}return g.push({fixed:o+1,stretch:u}),g}function hm(r,o,u,g){return r/o*u+g}function fm(r,o,u,g){return r-o*u/g}var np=function(r,o,u,g,b,C,S,R,j,K){if(this.boxStartIndex=r.length,j){var J=C.top,nt=C.bottom,ct=C.collisionPadding;ct&&(J-=ct[1],nt+=ct[3]);var mt=nt-J;mt>0&&(mt=Math.max(10,mt),this.circleDiameter=mt)}else{var St=C.top*S-R,Ot=C.bottom*S+R,Zt=C.left*S-R,Vt=C.right*S+R,se=C.collisionPadding;if(se&&(Zt-=se[0]*S,St-=se[1]*S,Vt+=se[2]*S,Ot+=se[3]*S),K){var ye=new x(Zt,St),Ee=new x(Vt,St),Pe=new x(Zt,Ot),Ne=new x(Vt,Ot),Je=K*Math.PI/180;ye._rotate(Je),Ee._rotate(Je),Pe._rotate(Je),Ne._rotate(Je),Zt=Math.min(ye.x,Ee.x,Pe.x,Ne.x),Vt=Math.max(ye.x,Ee.x,Pe.x,Ne.x),St=Math.min(ye.y,Ee.y,Pe.y,Ne.y),Ot=Math.max(ye.y,Ee.y,Pe.y,Ne.y)}r.emplaceBack(o.x,o.y,Zt,St,Vt,Ot,u,g,b)}this.boxEndIndex=r.length},Xh=function(r,o){if(r===void 0&&(r=[]),o===void 0&&(o=w0),this.data=r,this.length=this.data.length,this.compare=o,this.length>0)for(var u=(this.length>>1)-1;u>=0;u--)this._down(u)};function w0(r,o){return r<o?-1:r>o?1:0}function Nb(r,o,u){u===void 0&&(u=!1);for(var g=1/0,b=1/0,C=-1/0,S=-1/0,R=r[0],j=0;j<R.length;j++){var K=R[j];(!j||K.x<g)&&(g=K.x),(!j||K.y<b)&&(b=K.y),(!j||K.x>C)&&(C=K.x),(!j||K.y>S)&&(S=K.y)}var J=Math.min(C-g,S-b),nt=J/2,ct=new Xh([],Ub);if(J===0)return new x(g,b);for(var mt=g;mt<C;mt+=J)for(var St=b;St<S;St+=J)ct.push(new Qf(mt+nt,St+nt,nt,r));for(var Ot=function(se){for(var ye=0,Ee=0,Pe=0,Ne=se[0],Je=0,cn=Ne.length,Vn=cn-1;Je<cn;Vn=Je++){var _n=Ne[Je],$n=Ne[Vn],wn=_n.x*$n.y-$n.x*_n.y;Ee+=(_n.x+$n.x)*wn,Pe+=(_n.y+$n.y)*wn,ye+=3*wn}return new Qf(Ee/ye,Pe/ye,0,se)}(r),Zt=ct.length;ct.length;){var Vt=ct.pop();(Vt.d>Ot.d||!Ot.d)&&(Ot=Vt,u&&console.log("found best %d after %d probes",Math.round(1e4*Vt.d)/1e4,Zt)),Vt.max-Ot.d<=o||(ct.push(new Qf(Vt.p.x-(nt=Vt.h/2),Vt.p.y-nt,nt,r)),ct.push(new Qf(Vt.p.x+nt,Vt.p.y-nt,nt,r)),ct.push(new Qf(Vt.p.x-nt,Vt.p.y+nt,nt,r)),ct.push(new Qf(Vt.p.x+nt,Vt.p.y+nt,nt,r)),Zt+=4)}return u&&(console.log("num probes: "+Zt),console.log("best distance: "+Ot.d)),Ot.p}function Ub(r,o){return o.max-r.max}function Qf(r,o,u,g){this.p=new x(r,o),this.h=u,this.d=function(b,C){for(var S=!1,R=1/0,j=0;j<C.length;j++)for(var K=C[j],J=0,nt=K.length,ct=nt-1;J<nt;ct=J++){var mt=K[J],St=K[ct];mt.y>b.y!=St.y>b.y&&b.x<(St.x-mt.x)*(b.y-mt.y)/(St.y-mt.y)+mt.x&&(S=!S),R=Math.min(R,Lc(b,mt,St))}return(S?1:-1)*Math.sqrt(R)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}Xh.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},Xh.prototype.pop=function(){if(this.length!==0){var r=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),r}},Xh.prototype.peek=function(){return this.data[0]},Xh.prototype._up=function(r){for(var o=this.data,u=this.compare,g=o[r];r>0;){var b=r-1>>1,C=o[b];if(u(g,C)>=0)break;o[r]=C,r=b}o[r]=g},Xh.prototype._down=function(r){for(var o=this.data,u=this.compare,g=this.length>>1,b=o[r];r<g;){var C=1+(r<<1),S=o[C],R=C+1;if(R<this.length&&u(o[R],S)<0&&(C=R,S=o[R]),u(S,b)>=0)break;o[r]=S,r=C}o[r]=b};var dm=Number.POSITIVE_INFINITY;function C0(r,o){return o[1]!==dm?function(u,g,b){var C=0,S=0;switch(g=Math.abs(g),b=Math.abs(b),u){case"top-right":case"top-left":case"top":S=b-7;break;case"bottom-right":case"bottom-left":case"bottom":S=7-b}switch(u){case"top-right":case"bottom-right":case"right":C=-g;break;case"top-left":case"bottom-left":case"left":C=g}return[C,S]}(r,o[0],o[1]):function(u,g){var b=0,C=0;g<0&&(g=0);var S=g/Math.sqrt(2);switch(u){case"top-right":case"top-left":C=S-7;break;case"bottom-right":case"bottom-left":C=7-S;break;case"bottom":C=7-g;break;case"top":C=g-7}switch(u){case"top-right":case"bottom-right":b=-S;break;case"top-left":case"bottom-left":b=S;break;case"left":b=g;break;case"right":b=-g}return[b,C]}(r,o[0])}function Jg(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function I0(r,o,u,g,b,C,S,R,j,K,J,nt,ct,mt,St){var Ot=function(Ee,Pe,Ne,Je,cn,Vn,_n,$n){for(var wn=Je.layout.get("text-rotate").evaluate(Vn,{})*Math.PI/180,Sr=[],ar=0,Rn=Pe.positionedLines;ar<Rn.length;ar+=1)for(var Or=Rn[ar],Ar=0,Zr=Or.positionedGlyphs;Ar<Zr.length;Ar+=1){var qn=Zr[Ar];if(qn.rect){var ai=qn.rect||{},Xi=4,Qi=!0,ji=1,Ji=0,go=(cn||$n)&&qn.vertical,Ro=qn.metrics.advance*qn.scale/2;if($n&&Pe.verticalizable&&(Ji=Or.lineOffset/2-(qn.imageName?-(24-qn.metrics.width*qn.scale)/2:24*(qn.scale-1))),qn.imageName){var jo=_n[qn.imageName];Qi=jo.sdf,Xi=1/(ji=jo.pixelRatio)}var Ua=cn?[qn.x+Ro,qn.y]:[0,0],oa=cn?[0,0]:[qn.x+Ro+Ne[0],qn.y+Ne[1]-Ji],Va=[0,0];go&&(Va=oa,oa=[0,0]);var Io=(qn.metrics.left-Xi)*qn.scale-Ro+oa[0],aa=(-qn.metrics.top-Xi)*qn.scale+oa[1],Hr=Io+ai.w*qn.scale/ji,ki=aa+ai.h*qn.scale/ji,bi=new x(Io,aa),Jr=new x(Hr,aa),rs=new x(Io,ki),Ea=new x(Hr,ki);if(go){var Hi=new x(-Ro,Ro- -17),Ei=-Math.PI/2,Sa=12-Ro,si=new x(22-Sa,-(qn.imageName?Sa:0)),vs=new(Function.prototype.bind.apply(x,[null].concat(Va)));bi._rotateAround(Ei,Hi)._add(si)._add(vs),Jr._rotateAround(Ei,Hi)._add(si)._add(vs),rs._rotateAround(Ei,Hi)._add(si)._add(vs),Ea._rotateAround(Ei,Hi)._add(si)._add(vs)}if(wn){var yr=Math.sin(wn),ac=Math.cos(wn),fi=[ac,-yr,yr,ac];bi._matMult(fi),Jr._matMult(fi),rs._matMult(fi),Ea._matMult(fi)}var Gi=new x(0,0),Yl=new x(0,0);Sr.push({tl:bi,tr:Jr,bl:rs,br:Ea,tex:ai,writingMode:Pe.writingMode,glyphOffset:Ua,sectionIndex:qn.sectionIndex,isSDF:Qi,pixelOffsetTL:Gi,pixelOffsetBR:Yl,minFontScaleX:0,minFontScaleY:0})}}return Sr}(0,u,R,b,C,S,g,r.allowVerticalPlacement),Zt=r.textSizeData,Vt=null;Zt.kind==="source"?(Vt=[128*b.layout.get("text-size").evaluate(S,{})])[0]>32640&&ot(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Zt.kind==="composite"&&((Vt=[128*mt.compositeTextSizes[0].evaluate(S,{},St),128*mt.compositeTextSizes[1].evaluate(S,{},St)])[0]>32640||Vt[1]>32640)&&ot(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),r.addSymbols(r.text,Ot,Vt,R,C,S,K,o,j.lineStartIndex,j.lineLength,ct,St);for(var se=0,ye=J;se<ye.length;se+=1)nt[ye[se]]=r.text.placedSymbolArray.length-1;return 4*Ot.length}function E0(r){for(var o in r)return r[o];return null}function Vb(r,o,u,g){var b=r.compareText;if(o in b){for(var C=b[o],S=C.length-1;S>=0;S--)if(g.dist(C[S])<u)return!0}else b[o]=[];return b[o].push(g),!1}var jb=wu.VectorTileFeature.types,ql=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pm(r,o,u,g,b,C,S,R,j,K,J,nt,ct){var mt=R?Math.min(32640,Math.round(R[0])):0,St=R?Math.min(32640,Math.round(R[1])):0;r.emplaceBack(o,u,Math.round(32*g),Math.round(32*b),C,S,(mt<<1)+(j?1:0),St,16*K,16*J,256*nt,256*ct)}function tv(r,o,u){r.emplaceBack(o.x,o.y,u),r.emplaceBack(o.x,o.y,u),r.emplaceBack(o.x,o.y,u),r.emplaceBack(o.x,o.y,u)}function Hb(r){for(var o=0,u=r.sections;o<u.length;o+=1)if(Ff(u[o].text))return!0;return!1}var Qh=function(r){this.layoutVertexArray=new jf,this.indexArray=new Ju,this.programConfigurations=r,this.segments=new yt,this.dynamicLayoutVertexArray=new dh,this.opacityVertexArray=new Vh,this.placedSymbolArray=new v};Qh.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Qh.prototype.upload=function(r,o,u,g){this.isEmpty()||(u&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,c0.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Mb.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,ql,!0),this.opacityVertexBuffer.itemSize=1),(u||g)&&this.programConfigurations.upload(r))},Qh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},xn("SymbolBuffers",Qh);var rp=function(r,o,u){this.layoutVertexArray=new r,this.layoutAttributes=o,this.indexArray=new u,this.segments=new yt,this.collisionVertexArray=new Wd};rp.prototype.upload=function(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,Tb.members,!0)},rp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},xn("CollisionBuffers",rp);var Ii=function(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ps([]),this.placementViewportMatrix=Ps([]);var o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=um(this.zoom,o["text-size"]),this.iconSizeData=um(this.zoom,o["icon-size"]);var u=this.layers[0].layout,g=u.get("symbol-sort-key"),b=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map(function(C){return Ls[C]})),this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id}),this.sourceID=r.sourceID};Ii.prototype.createArrays=function(){this.text=new Qh(new zn(this.layers,this.zoom,function(r){return/^text/.test(r)})),this.icon=new Qh(new zn(this.layers,this.zoom,function(r){return/^icon/.test(r)})),this.glyphOffsetArray=new O,this.lineVertexArray=new V,this.symbolInstances=new M},Ii.prototype.calculateGlyphDependencies=function(r,o,u,g,b){for(var C=0;C<r.length;C++)if(o[r.charCodeAt(C)]=!0,(u||g)&&b){var S=Kh[r.charAt(C)];S&&(o[S.charCodeAt(0)]=!0)}},Ii.prototype.populate=function(r,o,u){var g=this.layers[0],b=g.layout,C=b.get("text-font"),S=b.get("text-field"),R=b.get("icon-image"),j=(S.value.kind!=="constant"||S.value.value instanceof Ki&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),K=R.value.kind!=="constant"||!!R.value.value||Object.keys(R.parameters).length>0,J=b.get("symbol-sort-key");if(this.features=[],j||K){for(var nt=o.iconDependencies,ct=o.glyphDependencies,mt=o.availableImages,St=new or(this.zoom),Ot=0,Zt=r;Ot<Zt.length;Ot+=1){var Vt=Zt[Ot],se=Vt.feature,ye=Vt.id,Ee=Vt.index,Pe=Vt.sourceLayerIndex,Ne=g._featureFilter.needGeometry,Je=Bi(se,Ne);if(g._featureFilter.filter(St,Je,u)){Ne||(Je.geometry=Vi(se));var cn=void 0;if(j){var Vn=g.getValueAndResolveTokens("text-field",Je,u,mt),_n=Ki.factory(Vn);Hb(_n)&&(this.hasRTLText=!0),(!this.hasRTLText||Uf()==="unavailable"||this.hasRTLText&&Ms.isParsed())&&(cn=Wg(_n,g,Je))}var $n=void 0;if(K){var wn=g.getValueAndResolveTokens("icon-image",Je,u,mt);$n=wn instanceof ta?wn:ta.fromString(wn)}if(cn||$n){var Sr=this.sortFeaturesByKey?J.evaluate(Je,{},u):void 0;if(this.features.push({id:ye,text:cn,icon:$n,index:Ee,sourceLayerIndex:Pe,geometry:Je.geometry,properties:se.properties,type:jb[se.type],sortKey:Sr}),$n&&(nt[$n.name]=!0),cn){var ar=C.evaluate(Je,{},u).join(","),Rn=b.get("text-rotation-alignment")==="map"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ls.vertical)>=0;for(var Or=0,Ar=cn.sections;Or<Ar.length;Or+=1){var Zr=Ar[Or];if(Zr.image)nt[Zr.image.name]=!0;else{var qn=gl(cn.toString()),ai=Zr.fontStack||ar,Xi=ct[ai]=ct[ai]||{};this.calculateGlyphDependencies(Zr.text,Xi,Rn,this.allowVerticalPlacement,qn)}}}}}}b.get("symbol-placement")==="line"&&(this.features=function(Qi){var ji={},Ji={},go=[],Ro=0;function jo(Hi){go.push(Qi[Hi]),Ro++}function Ua(Hi,Ei,Sa){var si=Ji[Hi];return delete Ji[Hi],Ji[Ei]=si,go[si].geometry[0].pop(),go[si].geometry[0]=go[si].geometry[0].concat(Sa[0]),si}function oa(Hi,Ei,Sa){var si=ji[Ei];return delete ji[Ei],ji[Hi]=si,go[si].geometry[0].shift(),go[si].geometry[0]=Sa[0].concat(go[si].geometry[0]),si}function Va(Hi,Ei,Sa){var si=Sa?Ei[0][Ei[0].length-1]:Ei[0][0];return Hi+":"+si.x+":"+si.y}for(var Io=0;Io<Qi.length;Io++){var aa=Qi[Io],Hr=aa.geometry,ki=aa.text?aa.text.toString():null;if(ki){var bi=Va(ki,Hr),Jr=Va(ki,Hr,!0);if(bi in Ji&&Jr in ji&&Ji[bi]!==ji[Jr]){var rs=oa(bi,Jr,Hr),Ea=Ua(bi,Jr,go[rs].geometry);delete ji[bi],delete Ji[Jr],Ji[Va(ki,go[Ea].geometry,!0)]=Ea,go[rs].geometry=null}else bi in Ji?Ua(bi,Jr,Hr):Jr in ji?oa(bi,Jr,Hr):(jo(Io),ji[bi]=Ro-1,Ji[Jr]=Ro-1)}else jo(Io)}return go.filter(function(Hi){return Hi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Qi,ji){return Qi.sortKey-ji.sortKey})}},Ii.prototype.update=function(r,o,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,o,this.layers,u),this.icon.programConfigurations.updatePaintArrays(r,o,this.layers,u))},Ii.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ii.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ii.prototype.upload=function(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ii.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ii.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ii.prototype.addToLineVertexArray=function(r,o){var u=this.lineVertexArray.length;if(r.segment!==void 0){for(var g=r.dist(o[r.segment+1]),b=r.dist(o[r.segment]),C={},S=r.segment+1;S<o.length;S++)C[S]={x:o[S].x,y:o[S].y,tileUnitDistanceFromAnchor:g},S<o.length-1&&(g+=o[S+1].dist(o[S]));for(var R=r.segment||0;R>=0;R--)C[R]={x:o[R].x,y:o[R].y,tileUnitDistanceFromAnchor:b},R>0&&(b+=o[R-1].dist(o[R]));for(var j=0;j<o.length;j++){var K=C[j];this.lineVertexArray.emplaceBack(K.x,K.y,K.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}},Ii.prototype.addSymbols=function(r,o,u,g,b,C,S,R,j,K,J,nt){for(var ct=r.indexArray,mt=r.layoutVertexArray,St=r.segments.prepareSegment(4*o.length,mt,ct,this.canOverlap?C.sortKey:void 0),Ot=this.glyphOffsetArray.length,Zt=St.vertexLength,Vt=this.allowVerticalPlacement&&S===Ls.vertical?Math.PI/2:0,se=C.text&&C.text.sections,ye=0;ye<o.length;ye++){var Ee=o[ye],Pe=Ee.tl,Ne=Ee.tr,Je=Ee.bl,cn=Ee.br,Vn=Ee.tex,_n=Ee.pixelOffsetTL,$n=Ee.pixelOffsetBR,wn=Ee.minFontScaleX,Sr=Ee.minFontScaleY,ar=Ee.glyphOffset,Rn=Ee.isSDF,Or=Ee.sectionIndex,Ar=St.vertexLength,Zr=ar[1];pm(mt,R.x,R.y,Pe.x,Zr+Pe.y,Vn.x,Vn.y,u,Rn,_n.x,_n.y,wn,Sr),pm(mt,R.x,R.y,Ne.x,Zr+Ne.y,Vn.x+Vn.w,Vn.y,u,Rn,$n.x,_n.y,wn,Sr),pm(mt,R.x,R.y,Je.x,Zr+Je.y,Vn.x,Vn.y+Vn.h,u,Rn,_n.x,$n.y,wn,Sr),pm(mt,R.x,R.y,cn.x,Zr+cn.y,Vn.x+Vn.w,Vn.y+Vn.h,u,Rn,$n.x,$n.y,wn,Sr),tv(r.dynamicLayoutVertexArray,R,Vt),ct.emplaceBack(Ar,Ar+1,Ar+2),ct.emplaceBack(Ar+1,Ar+2,Ar+3),St.vertexLength+=4,St.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ar[0]),ye!==o.length-1&&Or===o[ye+1].sectionIndex||r.programConfigurations.populatePaintArrays(mt.length,C,C.index,{},nt,se&&se[Or])}r.placedSymbolArray.emplaceBack(R.x,R.y,Ot,this.glyphOffsetArray.length-Ot,Zt,j,K,R.segment,u?u[0]:0,u?u[1]:0,g[0],g[1],S,0,!1,0,J)},Ii.prototype._addCollisionDebugVertex=function(r,o,u,g,b,C){return o.emplaceBack(0,0),r.emplaceBack(u.x,u.y,g,b,Math.round(C.x),Math.round(C.y))},Ii.prototype.addCollisionDebugVertices=function(r,o,u,g,b,C,S){var R=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),j=R.vertexLength,K=b.layoutVertexArray,J=b.collisionVertexArray,nt=S.anchorX,ct=S.anchorY;this._addCollisionDebugVertex(K,J,C,nt,ct,new x(r,o)),this._addCollisionDebugVertex(K,J,C,nt,ct,new x(u,o)),this._addCollisionDebugVertex(K,J,C,nt,ct,new x(u,g)),this._addCollisionDebugVertex(K,J,C,nt,ct,new x(r,g)),R.vertexLength+=4;var mt=b.indexArray;mt.emplaceBack(j,j+1),mt.emplaceBack(j+1,j+2),mt.emplaceBack(j+2,j+3),mt.emplaceBack(j+3,j),R.primitiveLength+=4},Ii.prototype.addDebugCollisionBoxes=function(r,o,u,g){for(var b=r;b<o;b++){var C=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,g?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,u)}},Ii.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new rp(ph,oc.members,jh),this.iconCollisionBox=new rp(ph,oc.members,jh);for(var r=0;r<this.symbolInstances.length;r++){var o=this.symbolInstances.get(r);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}},Ii.prototype._deserializeCollisionBoxesForSymbol=function(r,o,u,g,b,C,S,R,j){for(var K={},J=o;J<u;J++){var nt=r.get(J);K.textBox={x1:nt.x1,y1:nt.y1,x2:nt.x2,y2:nt.y2,anchorPointX:nt.anchorPointX,anchorPointY:nt.anchorPointY},K.textFeatureIndex=nt.featureIndex;break}for(var ct=g;ct<b;ct++){var mt=r.get(ct);K.verticalTextBox={x1:mt.x1,y1:mt.y1,x2:mt.x2,y2:mt.y2,anchorPointX:mt.anchorPointX,anchorPointY:mt.anchorPointY},K.verticalTextFeatureIndex=mt.featureIndex;break}for(var St=C;St<S;St++){var Ot=r.get(St);K.iconBox={x1:Ot.x1,y1:Ot.y1,x2:Ot.x2,y2:Ot.y2,anchorPointX:Ot.anchorPointX,anchorPointY:Ot.anchorPointY},K.iconFeatureIndex=Ot.featureIndex;break}for(var Zt=R;Zt<j;Zt++){var Vt=r.get(Zt);K.verticalIconBox={x1:Vt.x1,y1:Vt.y1,x2:Vt.x2,y2:Vt.y2,anchorPointX:Vt.anchorPointX,anchorPointY:Vt.anchorPointY},K.verticalIconFeatureIndex=Vt.featureIndex;break}return K},Ii.prototype.deserializeCollisionBoxes=function(r){this.collisionArrays=[];for(var o=0;o<this.symbolInstances.length;o++){var u=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}},Ii.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ii.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ii.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ii.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ii.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ii.prototype.addIndicesForPlacedSymbol=function(r,o){for(var u=r.placedSymbolArray.get(o),g=u.vertexStartIndex+4*u.numGlyphs,b=u.vertexStartIndex;b<g;b+=4)r.indexArray.emplaceBack(b,b+1,b+2),r.indexArray.emplaceBack(b+1,b+2,b+3)},Ii.prototype.getSortedSymbolIndexes=function(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var o=Math.sin(r),u=Math.cos(r),g=[],b=[],C=[],S=0;S<this.symbolInstances.length;++S){C.push(S);var R=this.symbolInstances.get(S);g.push(0|Math.round(o*R.anchorX+u*R.anchorY)),b.push(R.featureIndex)}return C.sort(function(j,K){return g[j]-g[K]||b[K]-b[j]}),C},Ii.prototype.addToSortKeyRanges=function(r,o){var u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===o?u.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:r,symbolInstanceEnd:r+1})},Ii.prototype.sortFeatures=function(r){var o=this;if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var u=0,g=this.symbolInstanceIndexes;u<g.length;u+=1){var b=this.symbolInstances.get(g[u]);this.featureSortOrder.push(b.featureIndex),[b.rightJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.leftJustifiedTextSymbolIndex].forEach(function(C,S,R){C>=0&&R.indexOf(C)===S&&o.addIndicesForPlacedSymbol(o.text,C)}),b.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,b.verticalPlacedTextSymbolIndex),b.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.placedIconSymbolIndex),b.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},xn("SymbolBucket",Ii,{omit:["layers","collisionBoxArray","features","compareText"]}),Ii.MAX_GLYPHS=65535,Ii.addDynamicAttributes=tv;var Gb=new pa({"symbol-placement":new Nn(gt.layout_symbol["symbol-placement"]),"symbol-spacing":new Nn(gt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Nn(gt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ln(gt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Nn(gt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Nn(gt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Nn(gt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Nn(gt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Nn(gt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ln(gt.layout_symbol["icon-size"]),"icon-text-fit":new Nn(gt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Nn(gt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ln(gt.layout_symbol["icon-image"]),"icon-rotate":new Ln(gt.layout_symbol["icon-rotate"]),"icon-padding":new Nn(gt.layout_symbol["icon-padding"]),"icon-keep-upright":new Nn(gt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ln(gt.layout_symbol["icon-offset"]),"icon-anchor":new Ln(gt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Nn(gt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Nn(gt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Nn(gt.layout_symbol["text-rotation-alignment"]),"text-field":new Ln(gt.layout_symbol["text-field"]),"text-font":new Ln(gt.layout_symbol["text-font"]),"text-size":new Ln(gt.layout_symbol["text-size"]),"text-max-width":new Ln(gt.layout_symbol["text-max-width"]),"text-line-height":new Nn(gt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ln(gt.layout_symbol["text-letter-spacing"]),"text-justify":new Ln(gt.layout_symbol["text-justify"]),"text-radial-offset":new Ln(gt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Nn(gt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ln(gt.layout_symbol["text-anchor"]),"text-max-angle":new Nn(gt.layout_symbol["text-max-angle"]),"text-writing-mode":new Nn(gt.layout_symbol["text-writing-mode"]),"text-rotate":new Ln(gt.layout_symbol["text-rotate"]),"text-padding":new Nn(gt.layout_symbol["text-padding"]),"text-keep-upright":new Nn(gt.layout_symbol["text-keep-upright"]),"text-transform":new Ln(gt.layout_symbol["text-transform"]),"text-offset":new Ln(gt.layout_symbol["text-offset"]),"text-allow-overlap":new Nn(gt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Nn(gt.layout_symbol["text-ignore-placement"]),"text-optional":new Nn(gt.layout_symbol["text-optional"])}),ev={paint:new pa({"icon-opacity":new Ln(gt.paint_symbol["icon-opacity"]),"icon-color":new Ln(gt.paint_symbol["icon-color"]),"icon-halo-color":new Ln(gt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ln(gt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ln(gt.paint_symbol["icon-halo-blur"]),"icon-translate":new Nn(gt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Nn(gt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ln(gt.paint_symbol["text-opacity"]),"text-color":new Ln(gt.paint_symbol["text-color"],{runtimeType:pn,getOverride:function(r){return r.textColor},hasOverride:function(r){return!!r.textColor}}),"text-halo-color":new Ln(gt.paint_symbol["text-halo-color"]),"text-halo-width":new Ln(gt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ln(gt.paint_symbol["text-halo-blur"]),"text-translate":new Nn(gt.paint_symbol["text-translate"]),"text-translate-anchor":new Nn(gt.paint_symbol["text-translate-anchor"])}),layout:Gb},bh=function(r){this.type=r.property.overrides?r.property.overrides.runtimeType:Tn,this.defaultValue=r};bh.prototype.evaluate=function(r){if(r.formattedSection){var o=this.defaultValue.property.overrides;if(o&&o.hasOverride(r.formattedSection))return o.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default},bh.prototype.eachChild=function(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)},bh.prototype.outputDefined=function(){return!1},bh.prototype.serialize=function(){return null},xn("FormatSectionOverride",bh,{omit:["defaultValue"]});var Wb=function(r){function o(u){r.call(this,u,ev)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.recalculate=function(u,g){if(r.prototype.recalculate.call(this,u,g),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var b=this.layout.get("text-writing-mode");if(b){for(var C=[],S=0,R=b;S<R.length;S+=1){var j=R[S];C.indexOf(j)<0&&C.push(j)}this.layout._values["text-writing-mode"]=C}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},o.prototype.getValueAndResolveTokens=function(u,g,b,C){var S=this.layout.get(u).evaluate(g,{},b,C),R=this._unevaluatedLayout._values[u];return R.isDataDriven()||Gu(R.value)||!S?S:function(j,K){return K.replace(/{([^{}]+)}/g,function(J,nt){return nt in j?String(j[nt]):""})}(g.properties,S)},o.prototype.createBucket=function(u){return new Ii(u)},o.prototype.queryRadius=function(){return 0},o.prototype.queryIntersectsFeature=function(){return!1},o.prototype._setPaintOverrides=function(){for(var u=0,g=ev.paint.overridableProperties;u<g.length;u+=1){var b=g[u];if(o.hasPaintOverride(this.layout,b)){var C,S=this.paint.get(b),R=new bh(S),j=new Fl(R,S.property.specification);C=S.value.kind==="constant"||S.value.kind==="source"?new Hs("source",j):new Wu("composite",j,S.value.zoomStops,S.value._interpolationType),this.paint._values[b]=new Ko(S.property,C,S.parameters)}}},o.prototype._handleOverridablePaintPropertyUpdate=function(u,g,b){return!(!this.layout||g.isDataDriven()||b.isDataDriven())&&o.hasPaintOverride(this.layout,u)},o.hasPaintOverride=function(u,g){var b=u.get("text-field"),C=ev.paint.properties[g],S=!1,R=function(J){for(var nt=0,ct=J;nt<ct.length;nt+=1)if(C.overrides&&C.overrides.hasOverride(ct[nt]))return void(S=!0)};if(b.value.kind==="constant"&&b.value.value instanceof Ki)R(b.value.value.sections);else if(b.value.kind==="source"){var j=function(J){S||(J instanceof zo&&qi(J.value)===ei?R(J.value.sections):J instanceof us?R(J.sections):J.eachChild(j))},K=b.value;K._styleExpression&&j(K._styleExpression.expression)}return S},o}(jl),Zb={paint:new pa({"background-color":new Nn(gt.paint_background["background-color"]),"background-pattern":new ra(gt.paint_background["background-pattern"]),"background-opacity":new Nn(gt.paint_background["background-opacity"])})},$b=function(r){function o(u){r.call(this,u,Zb)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o}(jl),Kb={paint:new pa({"raster-opacity":new Nn(gt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Nn(gt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Nn(gt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Nn(gt.paint_raster["raster-brightness-max"]),"raster-saturation":new Nn(gt.paint_raster["raster-saturation"]),"raster-contrast":new Nn(gt.paint_raster["raster-contrast"]),"raster-resampling":new Nn(gt.paint_raster["raster-resampling"]),"raster-fade-duration":new Nn(gt.paint_raster["raster-fade-duration"])})},qb=function(r){function o(u){r.call(this,u,Kb)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o}(jl),Yb=function(r){function o(u){r.call(this,u,{}),this.implementation=u}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},o.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},o.prototype.recalculate=function(){},o.prototype.updateTransitions=function(){},o.prototype.hasTransition=function(){},o.prototype.serialize=function(){},o.prototype.onAdd=function(u){this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},o.prototype.onRemove=function(u){this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},o}(jl),Xb={circle:Hp,heatmap:Rg,hillshade:Dg,fill:Qs,"fill-extrusion":tm,line:l0,symbol:Wb,background:$b,raster:qb},S0=w.HTMLImageElement,M0=w.HTMLCanvasElement,T0=w.HTMLVideoElement,P0=w.ImageData,mm=w.ImageBitmap,Jh=function(r,o,u,g){this.context=r,this.format=u,this.texture=r.gl.createTexture(),this.update(o,g)};Jh.prototype.update=function(r,o,u){var g=r.width,b=r.height,C=!(this.size&&this.size[0]===g&&this.size[1]===b||u),S=this.context,R=S.gl;if(this.useMipmap=!!(o&&o.useMipmap),R.bindTexture(R.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!o||o.premultiply!==!1)),C)this.size=[g,b],r instanceof S0||r instanceof M0||r instanceof T0||r instanceof P0||mm&&r instanceof mm?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,r):R.texImage2D(R.TEXTURE_2D,0,this.format,g,b,0,this.format,R.UNSIGNED_BYTE,r.data);else{var j=u||{x:0,y:0},K=j.x,J=j.y;r instanceof S0||r instanceof M0||r instanceof T0||r instanceof P0||mm&&r instanceof mm?R.texSubImage2D(R.TEXTURE_2D,0,K,J,R.RGBA,R.UNSIGNED_BYTE,r):R.texSubImage2D(R.TEXTURE_2D,0,K,J,g,b,R.RGBA,R.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&R.generateMipmap(R.TEXTURE_2D)},Jh.prototype.bind=function(r,o,u){var g=this.context.gl;g.bindTexture(g.TEXTURE_2D,this.texture),u!==g.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(u=g.LINEAR),r!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,r),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,u||r),this.filter=r),o!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,o),this.wrap=o)},Jh.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Jh.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var nv=function(r){var o=this;this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){o._triggered=!1,o._callback()})};nv.prototype.trigger=function(){var r=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){r._triggered=!1,r._callback()},0))},nv.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Jf=function(r,o,u){this.target=r,this.parent=o,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},tt(["receive","process"],this),this.invoker=new nv(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ft()?r:w};function k0(r,o,u){var g=2*Math.PI*6378137/256/Math.pow(2,u);return[r*g-2*Math.PI*6378137/2,o*g-2*Math.PI*6378137/2]}Jf.prototype.send=function(r,o,u,g,b){var C=this;b===void 0&&(b=!1);var S=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[S]=u);var R=ue(this.globalScope)?void 0:[];return this.target.postMessage({id:S,type:r,hasCallback:!!u,targetMapId:g,mustQueue:b,sourceMapId:this.mapId,data:Zo(o,R)},R),{cancel:function(){u&&delete C.callbacks[S],C.target.postMessage({id:S,type:"<cancel>",targetMapId:g,sourceMapId:C.mapId})}}},Jf.prototype.receive=function(r){var o=r.data,u=o.id;if(u&&(!o.targetMapId||this.mapId===o.targetMapId))if(o.type==="<cancel>"){delete this.tasks[u];var g=this.cancelCallbacks[u];delete this.cancelCallbacks[u],g&&g()}else Ft()||o.mustQueue?(this.tasks[u]=o,this.taskQueue.push(u),this.invoker.trigger()):this.processTask(u,o)},Jf.prototype.process=function(){if(this.taskQueue.length){var r=this.taskQueue.shift(),o=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),o&&this.processTask(r,o)}},Jf.prototype.processTask=function(r,o){var u=this;if(o.type==="<response>"){var g=this.callbacks[r];delete this.callbacks[r],g&&(o.error?g($o(o.error)):g(null,$o(o.data)))}else{var b=!1,C=ue(this.globalScope)?void 0:[],S=o.hasCallback?function(J,nt){b=!0,delete u.cancelCallbacks[r],u.target.postMessage({id:r,type:"<response>",sourceMapId:u.mapId,error:J?Zo(J):null,data:Zo(nt,C)},C)}:function(J){b=!0},R=null,j=$o(o.data);if(this.parent[o.type])R=this.parent[o.type](o.sourceMapId,j,S);else if(this.parent.getWorkerSource){var K=o.type.split(".");R=this.parent.getWorkerSource(o.sourceMapId,K[0],j.source)[K[1]](j,S)}else S(new Error("Could not find function "+o.type));!b&&R&&R.cancel&&(this.cancelCallbacks[r]=R.cancel)}},Jf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Uo=function(r,o){r&&(o?this.setSouthWest(r).setNorthEast(o):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))};Uo.prototype.setNorthEast=function(r){return this._ne=r instanceof Yi?new Yi(r.lng,r.lat):Yi.convert(r),this},Uo.prototype.setSouthWest=function(r){return this._sw=r instanceof Yi?new Yi(r.lng,r.lat):Yi.convert(r),this},Uo.prototype.extend=function(r){var o,u,g=this._sw,b=this._ne;if(r instanceof Yi)o=r,u=r;else{if(!(r instanceof Uo))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Uo.convert(r)):this.extend(Yi.convert(r)):this;if(u=r._ne,!(o=r._sw)||!u)return this}return g||b?(g.lng=Math.min(o.lng,g.lng),g.lat=Math.min(o.lat,g.lat),b.lng=Math.max(u.lng,b.lng),b.lat=Math.max(u.lat,b.lat)):(this._sw=new Yi(o.lng,o.lat),this._ne=new Yi(u.lng,u.lat)),this},Uo.prototype.getCenter=function(){return new Yi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Uo.prototype.getSouthWest=function(){return this._sw},Uo.prototype.getNorthEast=function(){return this._ne},Uo.prototype.getNorthWest=function(){return new Yi(this.getWest(),this.getNorth())},Uo.prototype.getSouthEast=function(){return new Yi(this.getEast(),this.getSouth())},Uo.prototype.getWest=function(){return this._sw.lng},Uo.prototype.getSouth=function(){return this._sw.lat},Uo.prototype.getEast=function(){return this._ne.lng},Uo.prototype.getNorth=function(){return this._ne.lat},Uo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Uo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Uo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Uo.prototype.contains=function(r){var o=Yi.convert(r),u=o.lng,g=o.lat,b=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&b},Uo.convert=function(r){return!r||r instanceof Uo?r:new Uo(r)};var Yi=function(r,o){if(isNaN(r)||isNaN(o))throw new Error("Invalid LngLat object: ("+r+", "+o+")");if(this.lng=+r,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Yi.prototype.wrap=function(){return new Yi(F(this.lng,-180,180),this.lat)},Yi.prototype.toArray=function(){return[this.lng,this.lat]},Yi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Yi.prototype.distanceTo=function(r){var o=Math.PI/180,u=this.lat*o,g=r.lat*o,b=Math.sin(u)*Math.sin(g)+Math.cos(u)*Math.cos(g)*Math.cos((r.lng-this.lng)*o);return 63710088e-1*Math.acos(Math.min(b,1))},Yi.prototype.toBounds=function(r){r===void 0&&(r=0);var o=360*r/40075017,u=o/Math.cos(Math.PI/180*this.lat);return new Uo(new Yi(this.lng-u,this.lat-o),new Yi(this.lng+u,this.lat+o))},Yi.convert=function(r){if(r instanceof Yi)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Yi(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Yi(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var L0=2*Math.PI*63710088e-1;function O0(r){return L0*Math.cos(r*Math.PI/180)}function gm(r){return(180+r)/360}function rv(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function R0(r,o){return r/O0(o)}function iv(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}var tf=function(r,o,u){u===void 0&&(u=0),this.x=+r,this.y=+o,this.z=+u};tf.fromLngLat=function(r,o){o===void 0&&(o=0);var u=Yi.convert(r);return new tf(gm(u.lng),rv(u.lat),R0(o,u.lat))},tf.prototype.toLngLat=function(){return new Yi(360*this.x-180,iv(this.y))},tf.prototype.toAltitude=function(){return this.z*O0(iv(this.y))},tf.prototype.meterInMercatorCoordinateUnits=function(){return 1/L0*(r=iv(this.y),1/Math.cos(r*Math.PI/180));var r};var ef=function(r,o,u){this.z=r,this.x=o,this.y=u,this.key=ip(0,r,r,o,u)};ef.prototype.equals=function(r){return this.z===r.z&&this.x===r.x&&this.y===r.y},ef.prototype.url=function(r,o){var u,g,b,C,S,R=(g=this.y,b=this.z,C=k0(256*(u=this.x),256*(g=Math.pow(2,b)-g-1),b),S=k0(256*(u+1),256*(g+1),b),C[0]+","+C[1]+","+S[0]+","+S[1]),j=function(K,J,nt){for(var ct,mt="",St=K;St>0;St--)mt+=(J&(ct=1<<St-1)?1:0)+(nt&ct?2:0);return mt}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",j).replace("{bbox-epsg-3857}",R)},ef.prototype.getTilePoint=function(r){var o=Math.pow(2,this.z);return new x(8192*(r.x*o-this.x),8192*(r.y*o-this.y))},ef.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var D0=function(r,o){this.wrap=r,this.canonical=o,this.key=ip(r,o.z,o.z,o.x,o.y)},Vo=function(r,o,u,g,b){this.overscaledZ=r,this.wrap=o,this.canonical=new ef(u,+g,+b),this.key=ip(o,r,u,g,b)};function ip(r,o,u,g,b){(r*=2)<0&&(r=-1*r-1);var C=1<<u;return(C*C*r+C*b+g).toString(36)+u.toString(36)+o.toString(36)}Vo.prototype.equals=function(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)},Vo.prototype.scaledTo=function(r){var o=this.canonical.z-r;return r>this.canonical.z?new Vo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Vo(r,this.wrap,r,this.canonical.x>>o,this.canonical.y>>o)},Vo.prototype.calculateScaledKey=function(r,o){var u=this.canonical.z-r;return r>this.canonical.z?ip(this.wrap*+o,r,this.canonical.z,this.canonical.x,this.canonical.y):ip(this.wrap*+o,r,r,this.canonical.x>>u,this.canonical.y>>u)},Vo.prototype.isChildOf=function(r){if(r.wrap!==this.wrap)return!1;var o=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>o&&r.canonical.y===this.canonical.y>>o},Vo.prototype.children=function(r){if(this.overscaledZ>=r)return[new Vo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var o=this.canonical.z+1,u=2*this.canonical.x,g=2*this.canonical.y;return[new Vo(o,this.wrap,o,u,g),new Vo(o,this.wrap,o,u+1,g),new Vo(o,this.wrap,o,u,g+1),new Vo(o,this.wrap,o,u+1,g+1)]},Vo.prototype.isLessThan=function(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))},Vo.prototype.wrapped=function(){return new Vo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Vo.prototype.unwrapTo=function(r){return new Vo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)},Vo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Vo.prototype.toUnwrapped=function(){return new D0(this.wrap,this.canonical)},Vo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Vo.prototype.getTilePoint=function(r){return this.canonical.getTilePoint(new tf(r.x-this.wrap,r.y))},xn("CanonicalTileID",ef),xn("OverscaledTileID",Vo,{omit:["posMatrix"]});var Bc=function(r,o,u){if(this.uid=r,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return ot('"'+u+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=o.height;var g=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=u||"mapbox";for(var b=0;b<g;b++)this.data[this._idx(-1,b)]=this.data[this._idx(0,b)],this.data[this._idx(g,b)]=this.data[this._idx(g-1,b)],this.data[this._idx(b,-1)]=this.data[this._idx(b,0)],this.data[this._idx(b,g)]=this.data[this._idx(b,g-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(g,-1)]=this.data[this._idx(g-1,0)],this.data[this._idx(-1,g)]=this.data[this._idx(0,g-1)],this.data[this._idx(g,g)]=this.data[this._idx(g-1,g-1)]};Bc.prototype.get=function(r,o){var u=new Uint8Array(this.data.buffer),g=4*this._idx(r,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(u[g],u[g+1],u[g+2])},Bc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Bc.prototype._idx=function(r,o){if(r<-1||r>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(r+1)},Bc.prototype._unpackMapbox=function(r,o,u){return(256*r*256+256*o+u)/10-1e4},Bc.prototype._unpackTerrarium=function(r,o,u){return 256*r+o+u/256-32768},Bc.prototype.getPixels=function(){return new ds({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Bc.prototype.backfillBorder=function(r,o,u){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");var g=o*this.dim,b=o*this.dim+this.dim,C=u*this.dim,S=u*this.dim+this.dim;switch(o){case-1:g=b-1;break;case 1:b=g+1}switch(u){case-1:C=S-1;break;case 1:S=C+1}for(var R=-o*this.dim,j=-u*this.dim,K=C;K<S;K++)for(var J=g;J<b;J++)this.data[this._idx(J,K)]=r.data[this._idx(J+R,K+j)]},xn("DEMData",Bc);var op=function(r){this._stringToNumber={},this._numberToString=[];for(var o=0;o<r.length;o++){var u=r[o];this._stringToNumber[u]=o,this._numberToString[o]=u}};op.prototype.encode=function(r){return this._stringToNumber[r]},op.prototype.decode=function(r){return this._numberToString[r]};var vm=function(r,o,u,g,b){this.type="Feature",this._vectorTileFeature=r,r._z=o,r._x=u,r._y=g,this.properties=r.properties,this.id=b},td={geometry:{configurable:!0}};td.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},td.geometry.set=function(r){this._geometry=r},vm.prototype.toJSON=function(){var r={geometry:this.geometry};for(var o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(r[o]=this[o]);return r},Object.defineProperties(vm.prototype,td);var ed=function(){this.state={},this.stateChanges={},this.deletedStates={}};ed.prototype.updateState=function(r,o,u){var g=String(o);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][g]=this.stateChanges[r][g]||{},D(this.stateChanges[r][g],u),this.deletedStates[r]===null)for(var b in this.deletedStates[r]={},this.state[r])b!==g&&(this.deletedStates[r][b]=null);else if(this.deletedStates[r]&&this.deletedStates[r][g]===null)for(var C in this.deletedStates[r][g]={},this.state[r][g])u[C]||(this.deletedStates[r][g][C]=null);else for(var S in u)this.deletedStates[r]&&this.deletedStates[r][g]&&this.deletedStates[r][g][S]===null&&delete this.deletedStates[r][g][S]},ed.prototype.removeFeatureState=function(r,o,u){if(this.deletedStates[r]!==null){var g=String(o);if(this.deletedStates[r]=this.deletedStates[r]||{},u&&o!==void 0)this.deletedStates[r][g]!==null&&(this.deletedStates[r][g]=this.deletedStates[r][g]||{},this.deletedStates[r][g][u]=null);else if(o!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][g])for(u in this.deletedStates[r][g]={},this.stateChanges[r][g])this.deletedStates[r][g][u]=null;else this.deletedStates[r][g]=null;else this.deletedStates[r]=null}},ed.prototype.getState=function(r,o){var u=String(o),g=D({},(this.state[r]||{})[u],(this.stateChanges[r]||{})[u]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){var b=this.deletedStates[r][o];if(b===null)return{};for(var C in b)delete g[C]}return g},ed.prototype.initializeTileState=function(r,o){r.setFeatureState(this.state,o)},ed.prototype.coalesceChanges=function(r,o){var u={};for(var g in this.stateChanges){this.state[g]=this.state[g]||{};var b={};for(var C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),D(this.state[g][C],this.stateChanges[g][C]),b[C]=this.state[g][C];u[g]=b}for(var S in this.deletedStates){this.state[S]=this.state[S]||{};var R={};if(this.deletedStates[S]===null)for(var j in this.state[S])R[j]={},this.state[S][j]={};else for(var K in this.deletedStates[S]){if(this.deletedStates[S][K]===null)this.state[S][K]={};else for(var J=0,nt=Object.keys(this.deletedStates[S][K]);J<nt.length;J+=1)delete this.state[S][K][nt[J]];R[K]=this.state[S][K]}u[S]=u[S]||{},D(u[S],R)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(var ct in r)r[ct].setFeatureState(u,o)};var Fc=function(r,o){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new cs(8192,16,0),this.grid3D=new cs(8192,16,0),this.featureIndexArray=new it,this.promoteId=o};function z0(r,o,u,g,b){return G(r,function(C,S){var R=o instanceof Tc?o.get(S):null;return R&&R.evaluate?R.evaluate(u,g,b):R})}function B0(r){for(var o=1/0,u=1/0,g=-1/0,b=-1/0,C=0,S=r;C<S.length;C+=1){var R=S[C];o=Math.min(o,R.x),u=Math.min(u,R.y),g=Math.max(g,R.x),b=Math.max(b,R.y)}return{minX:o,minY:u,maxX:g,maxY:b}}function Qb(r,o){return o-r}Fc.prototype.insert=function(r,o,u,g,b,C){var S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,g,b);for(var R=C?this.grid3D:this.grid,j=0;j<o.length;j++){for(var K=o[j],J=[1/0,1/0,-1/0,-1/0],nt=0;nt<K.length;nt++){var ct=K[nt];J[0]=Math.min(J[0],ct.x),J[1]=Math.min(J[1],ct.y),J[2]=Math.max(J[2],ct.x),J[3]=Math.max(J[3],ct.y)}J[0]<8192&&J[1]<8192&&J[2]>=0&&J[3]>=0&&R.insert(S,J[0],J[1],J[2],J[3])}},Fc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new wu.VectorTile(new xr(this.rawTileData)).layers,this.sourceLayerCoder=new op(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Fc.prototype.query=function(r,o,u,g){var b=this;this.loadVTLayers();for(var C=r.params||{},S=8192/r.tileSize/r.scale,R=Nl(C.filter),j=r.queryGeometry,K=r.queryPadding*S,J=B0(j),nt=this.grid.query(J.minX-K,J.minY-K,J.maxX+K,J.maxY+K),ct=B0(r.cameraQueryGeometry),mt=this.grid3D.query(ct.minX-K,ct.minY-K,ct.maxX+K,ct.maxY+K,function(Ee,Pe,Ne,Je){return function(cn,Vn,_n,$n,wn){for(var Sr=0,ar=cn;Sr<ar.length;Sr+=1){var Rn=ar[Sr];if(Vn<=Rn.x&&_n<=Rn.y&&$n>=Rn.x&&wn>=Rn.y)return!0}var Or=[new x(Vn,_n),new x(Vn,wn),new x($n,wn),new x($n,_n)];if(cn.length>2){for(var Ar=0,Zr=Or;Ar<Zr.length;Ar+=1)if(Gl(cn,Zr[Ar]))return!0}for(var qn=0;qn<cn.length-1;qn++)if(yu(cn[qn],cn[qn+1],Or))return!0;return!1}(r.cameraQueryGeometry,Ee-K,Pe-K,Ne+K,Je+K)}),St=0,Ot=mt;St<Ot.length;St+=1)nt.push(Ot[St]);nt.sort(Qb);for(var Zt,Vt={},se=function(Ee){var Pe=nt[Ee];if(Pe!==Zt){Zt=Pe;var Ne=b.featureIndexArray.get(Pe),Je=null;b.loadMatchingFeature(Vt,Ne.bucketIndex,Ne.sourceLayerIndex,Ne.featureIndex,R,C.layers,C.availableImages,o,u,g,function(cn,Vn,_n){return Je||(Je=Vi(cn)),Vn.queryIntersectsFeature(j,cn,_n,Je,b.z,r.transform,S,r.pixelPosMatrix)})}},ye=0;ye<nt.length;ye++)se(ye);return Vt},Fc.prototype.loadMatchingFeature=function(r,o,u,g,b,C,S,R,j,K,J){var nt=this.bucketLayerIDs[o];if(!C||function(cn,Vn){for(var _n=0;_n<cn.length;_n++)if(Vn.indexOf(cn[_n])>=0)return!0;return!1}(C,nt)){var ct=this.sourceLayerCoder.decode(u),mt=this.vtLayers[ct].feature(g);if(b.needGeometry){var St=Bi(mt,!0);if(!b.filter(new or(this.tileID.overscaledZ),St,this.tileID.canonical))return}else if(!b.filter(new or(this.tileID.overscaledZ),mt))return;for(var Ot=this.getId(mt,ct),Zt=0;Zt<nt.length;Zt++){var Vt=nt[Zt];if(!(C&&C.indexOf(Vt)<0)){var se=R[Vt];if(se){var ye={};Ot!==void 0&&K&&(ye=K.getState(se.sourceLayer||"_geojsonTileLayer",Ot));var Ee=D({},j[Vt]);Ee.paint=z0(Ee.paint,se.paint,mt,ye,S),Ee.layout=z0(Ee.layout,se.layout,mt,ye,S);var Pe=!J||J(mt,se,ye);if(Pe){var Ne=new vm(mt,this.z,this.x,this.y,Ot);Ne.layer=Ee;var Je=r[Vt];Je===void 0&&(Je=r[Vt]=[]),Je.push({featureIndex:g,feature:Ne,intersectionZ:Pe})}}}}}},Fc.prototype.lookupSymbolFeatures=function(r,o,u,g,b,C,S,R){var j={};this.loadVTLayers();for(var K=Nl(b),J=0,nt=r;J<nt.length;J+=1)this.loadMatchingFeature(j,u,g,nt[J],K,C,S,R,o);return j},Fc.prototype.hasLayer=function(r){for(var o=0,u=this.bucketLayerIDs;o<u.length;o+=1)for(var g=0,b=u[o];g<b.length;g+=1)if(r===b[g])return!0;return!1},Fc.prototype.getId=function(r,o){var u=r.id;return this.promoteId&&typeof(u=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]])=="boolean"&&(u=Number(u)),u},xn("FeatureIndex",Fc,{omit:["rawTileData","sourceLayerCoder"]});var ia=function(r,o){this.tileID=r,this.uid=U(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ia.prototype.registerFadeDuration=function(r){var o=r+this.timeAdded;o<ge.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)},ia.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ia.prototype.loadVectorData=function(r,o,u){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){for(var g in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(K,J){var nt={};if(!J)return nt;for(var ct=function(){var Ot=St[mt],Zt=Ot.layerIds.map(function(ye){return J.getLayer(ye)}).filter(Boolean);if(Zt.length!==0){Ot.layers=Zt,Ot.stateDependentLayerIds&&(Ot.stateDependentLayers=Ot.stateDependentLayerIds.map(function(ye){return Zt.filter(function(Ee){return Ee.id===ye})[0]}));for(var Vt=0,se=Zt;Vt<se.length;Vt+=1)nt[se[Vt].id]=Ot}},mt=0,St=K;mt<St.length;mt+=1)ct();return nt}(r.buckets,o.style),this.hasSymbolBuckets=!1,this.buckets){var b=this.buckets[g];if(b instanceof Ii){if(this.hasSymbolBuckets=!0,!u)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var C in this.buckets){var S=this.buckets[C];if(S instanceof Ii&&S.hasRTLText){this.hasRTLText=!0,Ms.isLoading()||Ms.isLoaded()||Uf()!=="deferred"||vl();break}}for(var R in this.queryPadding=0,this.buckets){var j=this.buckets[R];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(R).queryRadius(j))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new d},ia.prototype.unloadVectorData=function(){for(var r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ia.prototype.getBucket=function(r){return this.buckets[r.id]},ia.prototype.upload=function(r){for(var o in this.buckets){var u=this.buckets[o];u.uploadPending()&&u.upload(r)}var g=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Jh(r,this.imageAtlas.image,g.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Jh(r,this.glyphAtlasImage,g.ALPHA),this.glyphAtlasImage=null)},ia.prototype.prepare=function(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)},ia.prototype.queryRenderedFeatures=function(r,o,u,g,b,C,S,R,j,K){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:b,scale:C,tileSize:this.tileSize,pixelPosMatrix:K,transform:R,params:S,queryPadding:this.queryPadding*j},r,o,u):{}},ia.prototype.querySourceFeatures=function(r,o){var u=this.latestFeatureIndex;if(u&&u.rawTileData){var g=u.loadVTLayers(),b=o?o.sourceLayer:"",C=g._geojsonTileLayer||g[b];if(C)for(var S=Nl(o&&o.filter),R=this.tileID.canonical,j=R.z,K=R.x,J=R.y,nt={z:j,x:K,y:J},ct=0;ct<C.length;ct++){var mt=C.feature(ct);if(S.needGeometry){var St=Bi(mt,!0);if(!S.filter(new or(this.tileID.overscaledZ),St,this.tileID.canonical))continue}else if(!S.filter(new or(this.tileID.overscaledZ),mt))continue;var Ot=u.getId(mt,b),Zt=new vm(mt,j,K,J,Ot);Zt.tile=nt,r.push(Zt)}}},ia.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ia.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ia.prototype.setExpiryData=function(r){var o=this.expirationTime;if(r.cacheControl){var u=Tt(r.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){var g=Date.now(),b=!1;if(this.expirationTime>g)b=!1;else if(o)if(this.expirationTime<o)b=!0;else{var C=this.expirationTime-o;C?this.expirationTime=g+Math.max(C,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ia.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ia.prototype.setFeatureState=function(r,o){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(r).length!==0){var u=this.latestFeatureIndex.loadVTLayers();for(var g in this.buckets)if(o.style.hasLayer(g)){var b=this.buckets[g],C=b.layers[0].sourceLayer||"_geojsonTileLayer",S=u[C],R=r[C];if(S&&R&&Object.keys(R).length!==0){b.update(R,S,this.imageAtlas&&this.imageAtlas.patternPositions||{});var j=o&&o.style&&o.style.getLayer(g);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(b)))}}}},ia.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ia.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ge.now()},ia.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ia.prototype.setHoldDuration=function(r){this.symbolFadeHoldUntil=ge.now()+r},ia.prototype.setDependencies=function(r,o){for(var u={},g=0,b=o;g<b.length;g+=1)u[b[g]]=!0;this.dependencies[r]=u},ia.prototype.hasDependency=function(r,o){for(var u=0,g=r;u<g.length;u+=1){var b=this.dependencies[g[u]];if(b){for(var C=0,S=o;C<S.length;C+=1)if(b[S[C]])return!0}}return!1};var xh=w.performance,F0=function(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},xh.mark(this._marks.start)};F0.prototype.finish=function(){xh.mark(this._marks.end);var r=xh.getEntriesByName(this._marks.measure);return r.length===0&&(xh.measure(this._marks.measure,this._marks.start,this._marks.end),r=xh.getEntriesByName(this._marks.measure),xh.clearMarks(this._marks.start),xh.clearMarks(this._marks.end),xh.clearMeasures(this._marks.measure)),r},i.Actor=Jf,i.AlphaImage=yh,i.CanonicalTileID=ef,i.CollisionBoxArray=d,i.Color=Tr,i.DEMData=Bc,i.DataConstantProperty=Nn,i.DictionaryCoder=op,i.EXTENT=8192,i.ErrorEvent=qt,i.EvaluationParameters=or,i.Event=Rt,i.Evented=te,i.FeatureIndex=Fc,i.FillBucket=Au,i.FillExtrusionBucket=Kl,i.ImageAtlas=Yf,i.ImagePosition=am,i.LineBucket=ns,i.LngLat=Yi,i.LngLatBounds=Uo,i.MercatorCoordinate=tf,i.ONE_EM=24,i.OverscaledTileID=Vo,i.Point=x,i.Point$1=x,i.Properties=pa,i.Protobuf=xr,i.RGBAImage=ds,i.RequestManager=Et,i.RequestPerformance=F0,i.ResourceType=ur,i.SegmentVector=yt,i.SourceFeatureState=ed,i.StructArrayLayout1ui2=$d,i.StructArrayLayout2f1f2i16=Pc,i.StructArrayLayout2i4=Qu,i.StructArrayLayout3ui6=Ju,i.StructArrayLayout4i8=bt,i.SymbolBucket=Ii,i.Texture=Jh,i.Tile=ia,i.Transitionable=da,i.Uniform1f=Xe,i.Uniform1i=He,i.Uniform2f=rn,i.Uniform3f=yn,i.Uniform4f=On,i.UniformColor=Xn,i.UniformMatrix4f=Xr,i.UnwrappedTileID=D0,i.ValidationError=Nt,i.WritingMode=Ls,i.ZoomHistory=gu,i.add=function(r,o,u){return r[0]=o[0]+u[0],r[1]=o[1]+u[1],r[2]=o[2]+u[2],r},i.addDynamicAttributes=tv,i.asyncAll=function(r,o,u){if(!r.length)return u(null,[]);var g=r.length,b=new Array(r.length),C=null;r.forEach(function(S,R){o(S,function(j,K){j&&(C=j),b[R]=K,--g==0&&u(C,b)})})},i.bezier=L,i.bindAll=tt,i.browser=ge,i.cacheEntryPossiblyAdded=function(r){++Gn>Ue&&(r.getActor().send("enforceCacheSizeLimit",_e),Gn=0)},i.clamp=z,i.clearTileCache=function(r){var o=w.caches.delete("mapbox-tiles");r&&o.catch(r).then(function(){return r()})},i.clipLine=b0,i.clone=function(r){var o=new hi(16);return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},i.clone$1=pt,i.clone$2=function(r){var o=new hi(3);return o[0]=r[0],o[1]=r[1],o[2]=r[2],o},i.collisionCircleLayout=Gg,i.config=ne,i.create=function(){var r=new hi(16);return hi!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},i.create$1=function(){var r=new hi(9);return hi!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r},i.create$2=function(){var r=new hi(4);return hi!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r},i.createCommonjsModule=f,i.createExpression=pu,i.createLayout=ko,i.createStyleLayer=function(r){return r.type==="custom"?new Yb(r):new Xb[r.type](r)},i.cross=function(r,o,u){var g=o[0],b=o[1],C=o[2],S=u[0],R=u[1],j=u[2];return r[0]=b*j-C*R,r[1]=C*S-g*j,r[2]=g*R-b*S,r},i.deepEqual=function r(o,u){if(Array.isArray(o)){if(!Array.isArray(u)||o.length!==u.length)return!1;for(var g=0;g<o.length;g++)if(!r(o[g],u[g]))return!1;return!0}if(typeof o=="object"&&o!==null&&u!==null){if(typeof u!="object"||Object.keys(o).length!==Object.keys(u).length)return!1;for(var b in o)if(!r(o[b],u[b]))return!1;return!0}return o===u},i.dot=function(r,o){return r[0]*o[0]+r[1]*o[1]+r[2]*o[2]},i.dot$1=function(r,o){return r[0]*o[0]+r[1]*o[1]+r[2]*o[2]+r[3]*o[3]},i.ease=k,i.emitValidationErrors=tr,i.endsWith=Y,i.enforceCacheSizeLimit=function(r){en(),Te&&Te.then(function(o){o.keys().then(function(u){for(var g=0;g<u.length-r;g++)o.delete(u[g])})})},i.evaluateSizeForFeature=Cu,i.evaluateSizeForZoom=_h,i.evaluateVariableOffset=C0,i.evented=Hd,i.extend=D,i.featureFilter=Nl,i.filterObject=rt,i.fromRotation=function(r,o){var u=Math.sin(o),g=Math.cos(o);return r[0]=g,r[1]=u,r[2]=0,r[3]=-u,r[4]=g,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},i.getAnchorAlignment=ep,i.getAnchorJustification=Jg,i.getArrayBuffer=Ns,i.getImage=ut,i.getJSON=function(r,o){return Mi(D(r,{type:"json"}),o)},i.getRTLTextPluginStatus=Uf,i.getReferrer=Jn,i.getVideo=function(r,o){var u,g,b=w.document.createElement("video");b.muted=!0,b.onloadstart=function(){o(null,b)};for(var C=0;C<r.length;C++){var S=w.document.createElement("source");u=r[C],g=void 0,(g=w.document.createElement("a")).href=u,(g.protocol!==w.document.location.protocol||g.host!==w.document.location.host)&&(b.crossOrigin="Anonymous"),S.src=r[C],b.appendChild(S)}return{cancel:function(){}}},i.identity=Ps,i.invert=function(r,o){var u=o[0],g=o[1],b=o[2],C=o[3],S=o[4],R=o[5],j=o[6],K=o[7],J=o[8],nt=o[9],ct=o[10],mt=o[11],St=o[12],Ot=o[13],Zt=o[14],Vt=o[15],se=u*R-g*S,ye=u*j-b*S,Ee=u*K-C*S,Pe=g*j-b*R,Ne=g*K-C*R,Je=b*K-C*j,cn=J*Ot-nt*St,Vn=J*Zt-ct*St,_n=J*Vt-mt*St,$n=nt*Zt-ct*Ot,wn=nt*Vt-mt*Ot,Sr=ct*Vt-mt*Zt,ar=se*Sr-ye*wn+Ee*$n+Pe*_n-Ne*Vn+Je*cn;return ar?(r[0]=(R*Sr-j*wn+K*$n)*(ar=1/ar),r[1]=(b*wn-g*Sr-C*$n)*ar,r[2]=(Ot*Je-Zt*Ne+Vt*Pe)*ar,r[3]=(ct*Ne-nt*Je-mt*Pe)*ar,r[4]=(j*_n-S*Sr-K*Vn)*ar,r[5]=(u*Sr-b*_n+C*Vn)*ar,r[6]=(Zt*Ee-St*Je-Vt*ye)*ar,r[7]=(J*Je-ct*Ee+mt*ye)*ar,r[8]=(S*wn-R*_n+K*cn)*ar,r[9]=(g*_n-u*wn-C*cn)*ar,r[10]=(St*Ne-Ot*Ee+Vt*se)*ar,r[11]=(nt*Ee-J*Ne-mt*se)*ar,r[12]=(R*Vn-S*$n-j*cn)*ar,r[13]=(u*$n-g*Vn+b*cn)*ar,r[14]=(Ot*ye-St*Pe-Zt*se)*ar,r[15]=(J*Pe-nt*ye+ct*se)*ar,r):null},i.isChar=sn,i.isMapboxURL=wt,i.keysDifference=function(r,o){var u=[];for(var g in r)g in o||u.push(g);return u},i.makeRequest=Mi,i.mapObject=G,i.mercatorXfromLng=gm,i.mercatorYfromLat=rv,i.mercatorZfromAltitude=R0,i.mul=Og,i.multiply=Fa,i.mvt=wu,i.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},i.normalize=function(r,o){var u=o[0],g=o[1],b=o[2],C=u*u+g*g+b*b;return C>0&&(C=1/Math.sqrt(C)),r[0]=o[0]*C,r[1]=o[1]*C,r[2]=o[2]*C,r},i.number=so,i.offscreenCanvasSupported=zr,i.ortho=function(r,o,u,g,b,C,S){var R=1/(o-u),j=1/(g-b),K=1/(C-S);return r[0]=-2*R,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*j,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*K,r[11]=0,r[12]=(o+u)*R,r[13]=(b+g)*j,r[14]=(S+C)*K,r[15]=1,r},i.parseGlyphPBF=function(r){return new xr(r).readFields(Zg,[])},i.pbf=xr,i.performSymbolLayout=function(r,o,u,g,b,C,S){r.createArrays(),r.tilePixelRatio=8192/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;var R=r.layers[0].layout,j=r.layers[0]._unevaluatedLayout._values,K={};if(r.textSizeData.kind==="composite"){var J=r.textSizeData,nt=J.maxZoom;K.compositeTextSizes=[j["text-size"].possiblyEvaluate(new or(J.minZoom),S),j["text-size"].possiblyEvaluate(new or(nt),S)]}if(r.iconSizeData.kind==="composite"){var ct=r.iconSizeData,mt=ct.maxZoom;K.compositeIconSizes=[j["icon-size"].possiblyEvaluate(new or(ct.minZoom),S),j["icon-size"].possiblyEvaluate(new or(mt),S)]}K.layoutTextSize=j["text-size"].possiblyEvaluate(new or(r.zoom+1),S),K.layoutIconSize=j["icon-size"].possiblyEvaluate(new or(r.zoom+1),S),K.textMaxSize=j["text-size"].possiblyEvaluate(new or(18));for(var St=24*R.get("text-line-height"),Ot=R.get("text-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",Zt=R.get("text-keep-upright"),Vt=R.get("text-size"),se=function(){var Pe=Ee[ye],Ne=R.get("text-font").evaluate(Pe,{},S).join(","),Je=Vt.evaluate(Pe,{},S),cn=K.layoutTextSize.evaluate(Pe,{},S),Vn=K.layoutIconSize.evaluate(Pe,{},S),_n={horizontal:{},vertical:void 0},$n=Pe.text,wn=[0,0];if($n){var Sr=$n.toString(),ar=24*R.get("text-letter-spacing").evaluate(Pe,{},S),Rn=function(Hr){for(var ki=0,bi=Hr;ki<bi.length;ki+=1)if(Jr=bi[ki].charCodeAt(0),sn.Arabic(Jr)||sn["Arabic Supplement"](Jr)||sn["Arabic Extended-A"](Jr)||sn["Arabic Presentation Forms-A"](Jr)||sn["Arabic Presentation Forms-B"](Jr))return!1;var Jr;return!0}(Sr)?ar:0,Or=R.get("text-anchor").evaluate(Pe,{},S),Ar=R.get("text-variable-anchor");if(!Ar){var Zr=R.get("text-radial-offset").evaluate(Pe,{},S);wn=Zr?C0(Or,[24*Zr,dm]):R.get("text-offset").evaluate(Pe,{},S).map(function(Hr){return 24*Hr})}var qn=Ot?"center":R.get("text-justify").evaluate(Pe,{},S),ai=R.get("symbol-placement"),Xi=ai==="point"?24*R.get("text-max-width").evaluate(Pe,{},S):0,Qi=function(){r.allowVerticalPlacement&&gl(Sr)&&(_n.vertical=sm($n,o,u,b,Ne,Xi,St,Or,"left",Rn,wn,Ls.vertical,!0,ai,cn,Je))};if(!Ot&&Ar){for(var ji=qn==="auto"?Ar.map(function(Hr){return Jg(Hr)}):[qn],Ji=!1,go=0;go<ji.length;go++){var Ro=ji[go];if(!_n.horizontal[Ro])if(Ji)_n.horizontal[Ro]=_n.horizontal[0];else{var jo=sm($n,o,u,b,Ne,Xi,St,"center",Ro,Rn,wn,Ls.horizontal,!1,ai,cn,Je);jo&&(_n.horizontal[Ro]=jo,Ji=jo.positionedLines.length===1)}}Qi()}else{qn==="auto"&&(qn=Jg(Or));var Ua=sm($n,o,u,b,Ne,Xi,St,Or,qn,Rn,wn,Ls.horizontal,!1,ai,cn,Je);Ua&&(_n.horizontal[qn]=Ua),Qi(),gl(Sr)&&Ot&&Zt&&(_n.vertical=sm($n,o,u,b,Ne,Xi,St,Or,qn,Rn,wn,Ls.vertical,!1,ai,cn,Je))}}var oa=void 0,Va=!1;if(Pe.icon&&Pe.icon.name){var Io=g[Pe.icon.name];Io&&(oa=function(Hr,ki,bi){var Jr=ep(bi),rs=ki[0]-Hr.displaySize[0]*Jr.horizontalAlign,Ea=ki[1]-Hr.displaySize[1]*Jr.verticalAlign;return{image:Hr,top:Ea,bottom:Ea+Hr.displaySize[1],left:rs,right:rs+Hr.displaySize[0]}}(b[Pe.icon.name],R.get("icon-offset").evaluate(Pe,{},S),R.get("icon-anchor").evaluate(Pe,{},S)),Va=Io.sdf,r.sdfIcons===void 0?r.sdfIcons=Io.sdf:r.sdfIcons!==Io.sdf&&ot("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Io.pixelRatio!==r.pixelRatio||R.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}var aa=E0(_n.horizontal)||_n.vertical;r.iconsInText=!!aa&&aa.iconsInText,(aa||oa)&&function(Hr,ki,bi,Jr,rs,Ea,Hi,Ei,Sa,si,vs){var yr=Ea.textMaxSize.evaluate(ki,{});yr===void 0&&(yr=Hi);var ac,fi=Hr.layers[0].layout,Gi=fi.get("icon-offset").evaluate(ki,{},vs),Yl=E0(bi.horizontal),Al=Hi/24,nf=Hr.tilePixelRatio*Al,nd=Hr.tilePixelRatio*yr/24,Nc=Hr.tilePixelRatio*Ei,rd=Hr.tilePixelRatio*fi.get("symbol-spacing"),ym=fi.get("text-padding")*Hr.tilePixelRatio,Ah=fi.get("icon-padding")*Hr.tilePixelRatio,ap=fi.get("text-max-angle")/180*Math.PI,Xl=fi.get("text-rotation-alignment")==="map"&&fi.get("symbol-placement")!=="point",sp=fi.get("icon-rotation-alignment")==="map"&&fi.get("symbol-placement")!=="point",Ql=fi.get("symbol-placement"),co=rd/2,ho=fi.get("icon-text-fit");Jr&&ho!=="none"&&(Hr.allowVerticalPlacement&&bi.vertical&&(ac=Xg(Jr,bi.vertical,ho,fi.get("icon-text-fit-padding"),Gi,Al)),Yl&&(Jr=Xg(Jr,Yl,ho,fi.get("icon-text-fit-padding"),Gi,Al)));var Uc=function(U0,ys){ys.x<0||ys.x>=8192||ys.y<0||ys.y>=8192||function(vo,Iu,Wi,wh,Cm,hp,Im,uc,Em,fp,Sm,Mm,av,V0,dp,j0,H0,G0,W0,Tm,tl,sd,Z0,cc,Jb){var Ma,ma,ld,ud,cd,lf=vo.addToLineVertexArray(Iu,Wi),$0=0,K0=0,q0=0,sv=0,lv=-1,uv=-1,jc={},cv=Mt(""),Pm=0,hv=0;if(uc._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Pm=(Ma=uc.layout.get("text-offset").evaluate(tl,{},cc).map(function(mp){return 24*mp}))[0],hv=Ma[1]):(Pm=24*uc.layout.get("text-radial-offset").evaluate(tl,{},cc),hv=dm),vo.allowVerticalPlacement&&wh.vertical){var Y0=uc.layout.get("text-rotate").evaluate(tl,{},cc)+90;ud=new np(Em,Iu,fp,Sm,Mm,wh.vertical,av,V0,dp,Y0),Im&&(cd=new np(Em,Iu,fp,Sm,Mm,Im,H0,G0,dp,Y0))}if(Cm){var fv=uc.layout.get("icon-rotate").evaluate(tl,{}),X0=uc.layout.get("icon-text-fit")!=="none",uf=x0(Cm,fv,Z0,X0),dv=Im?x0(Im,fv,Z0,X0):void 0;ld=new np(Em,Iu,fp,Sm,Mm,Cm,H0,G0,!1,fv),$0=4*uf.length;var Q0=vo.iconSizeData,pp=null;Q0.kind==="source"?(pp=[128*uc.layout.get("icon-size").evaluate(tl,{})])[0]>32640&&ot(vo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Q0.kind==="composite"&&((pp=[128*sd.compositeIconSizes[0].evaluate(tl,{},cc),128*sd.compositeIconSizes[1].evaluate(tl,{},cc)])[0]>32640||pp[1]>32640)&&ot(vo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),vo.addSymbols(vo.icon,uf,pp,Tm,W0,tl,!1,Iu,lf.lineStartIndex,lf.lineLength,-1,cc),lv=vo.icon.placedSymbolArray.length-1,dv&&(K0=4*dv.length,vo.addSymbols(vo.icon,dv,pp,Tm,W0,tl,Ls.vertical,Iu,lf.lineStartIndex,lf.lineLength,-1,cc),uv=vo.icon.placedSymbolArray.length-1)}for(var J0 in wh.horizontal){var km=wh.horizontal[J0];if(!ma){cv=Mt(km.text);var t1=uc.layout.get("text-rotate").evaluate(tl,{},cc);ma=new np(Em,Iu,fp,Sm,Mm,km,av,V0,dp,t1)}var pv=km.positionedLines.length===1;if(q0+=I0(vo,Iu,km,hp,uc,dp,tl,j0,lf,wh.vertical?Ls.horizontal:Ls.horizontalOnly,pv?Object.keys(wh.horizontal):[J0],jc,lv,sd,cc),pv)break}wh.vertical&&(sv+=I0(vo,Iu,wh.vertical,hp,uc,dp,tl,j0,lf,Ls.vertical,["vertical"],jc,uv,sd,cc));var tx=ma?ma.boxStartIndex:vo.collisionBoxArray.length,ex=ma?ma.boxEndIndex:vo.collisionBoxArray.length,nx=ud?ud.boxStartIndex:vo.collisionBoxArray.length,rx=ud?ud.boxEndIndex:vo.collisionBoxArray.length,ix=ld?ld.boxStartIndex:vo.collisionBoxArray.length,ox=ld?ld.boxEndIndex:vo.collisionBoxArray.length,ax=cd?cd.boxStartIndex:vo.collisionBoxArray.length,sx=cd?cd.boxEndIndex:vo.collisionBoxArray.length,hc=-1,Lm=function(mp,n1){return mp&&mp.circleDiameter?Math.max(mp.circleDiameter,n1):n1};hc=Lm(ma,hc),hc=Lm(ud,hc),hc=Lm(ld,hc);var e1=(hc=Lm(cd,hc))>-1?1:0;e1&&(hc*=Jb/24),vo.glyphOffsetArray.length>=Ii.MAX_GLYPHS&&ot("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),tl.sortKey!==void 0&&vo.addToSortKeyRanges(vo.symbolInstances.length,tl.sortKey),vo.symbolInstances.emplaceBack(Iu.x,Iu.y,jc.right>=0?jc.right:-1,jc.center>=0?jc.center:-1,jc.left>=0?jc.left:-1,jc.vertical||-1,lv,uv,cv,tx,ex,nx,rx,ix,ox,ax,sx,fp,q0,sv,$0,K0,e1,0,av,Pm,hv,hc)}(Hr,ys,U0,bi,Jr,rs,ac,Hr.layers[0],Hr.collisionBoxArray,ki.index,ki.sourceLayerIndex,Hr.index,nf,ym,Xl,Sa,Nc,Ah,sp,Gi,ki,Ea,si,vs,Hi)};if(Ql==="line")for(var id=0,_m=b0(ki.geometry,0,0,8192,8192);id<_m.length;id+=1)for(var bm=_m[id],lp=0,up=Fb(bm,rd,ap,bi.vertical||Yl,Jr,24,nd,Hr.overscaling,8192);lp<up.length;lp+=1){var xm=up[lp];Yl&&Vb(Hr,Yl.text,co,xm)||Uc(bm,xm)}else if(Ql==="line-center")for(var od=0,Vc=ki.geometry;od<Vc.length;od+=1){var rf=Vc[od];if(rf.length>1){var Am=Bb(rf,ap,bi.vertical||Yl,Jr,24,nd);Am&&Uc(rf,Am)}}else if(ki.type==="Polygon")for(var of=0,af=Ng(ki.geometry,0);of<af.length;of+=1){var ja=af[of],sc=Nb(ja,16);Uc(ja[0],new zc(sc.x,sc.y,0))}else if(ki.type==="LineString")for(var sf=0,cp=ki.geometry;sf<cp.length;sf+=1){var ad=cp[sf];Uc(ad,new zc(ad[0].x,ad[0].y,0))}else if(ki.type==="Point")for(var ov=0,N0=ki.geometry;ov<N0.length;ov+=1)for(var wm=0,lc=N0[ov];wm<lc.length;wm+=1){var $r=lc[wm];Uc([$r],new zc($r.x,$r.y,0))}}(r,Pe,_n,oa,g,K,cn,Vn,wn,Va,S)},ye=0,Ee=r.features;ye<Ee.length;ye+=1)se();C&&r.generateCollisionDebugBuffers()},i.perspective=function(r,o,u,g,b){var C,S=1/Math.tan(o/2);return r[0]=S/u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=S,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,b!=null&&b!==1/0?(r[10]=(b+g)*(C=1/(g-b)),r[14]=2*b*g*C):(r[10]=-1,r[14]=-2*g),r},i.pick=function(r,o){for(var u={},g=0;g<o.length;g++){var b=o[g];b in r&&(u[b]=r[b])}return u},i.plugin=Ms,i.polygonIntersectsPolygon=Hl,i.postMapLoadEvent=ce,i.postTurnstileEvent=gn,i.potpack=p0,i.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.register=xn,i.registerForPluginStateChange=function(r){return r({pluginStatus:hs,pluginURL:Ws}),Hd.on("pluginStateChange",r),r},i.renderColorRamp=qy,i.rotate=function(r,o,u){var g=o[0],b=o[1],C=o[2],S=o[3],R=Math.sin(u),j=Math.cos(u);return r[0]=g*j+C*R,r[1]=b*j+S*R,r[2]=g*-R+C*j,r[3]=b*-R+S*j,r},i.rotateX=function(r,o,u){var g=Math.sin(u),b=Math.cos(u),C=o[4],S=o[5],R=o[6],j=o[7],K=o[8],J=o[9],nt=o[10],ct=o[11];return o!==r&&(r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15]),r[4]=C*b+K*g,r[5]=S*b+J*g,r[6]=R*b+nt*g,r[7]=j*b+ct*g,r[8]=K*b-C*g,r[9]=J*b-S*g,r[10]=nt*b-R*g,r[11]=ct*b-j*g,r},i.rotateZ=function(r,o,u){var g=Math.sin(u),b=Math.cos(u),C=o[0],S=o[1],R=o[2],j=o[3],K=o[4],J=o[5],nt=o[6],ct=o[7];return o!==r&&(r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15]),r[0]=C*b+K*g,r[1]=S*b+J*g,r[2]=R*b+nt*g,r[3]=j*b+ct*g,r[4]=K*b-C*g,r[5]=J*b-S*g,r[6]=nt*b-R*g,r[7]=ct*b-j*g,r},i.scale=function(r,o,u){var g=u[0],b=u[1],C=u[2];return r[0]=o[0]*g,r[1]=o[1]*g,r[2]=o[2]*g,r[3]=o[3]*g,r[4]=o[4]*b,r[5]=o[5]*b,r[6]=o[6]*b,r[7]=o[7]*b,r[8]=o[8]*C,r[9]=o[9]*C,r[10]=o[10]*C,r[11]=o[11]*C,r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},i.scale$1=function(r,o,u){return r[0]=o[0]*u,r[1]=o[1]*u,r[2]=o[2]*u,r[3]=o[3]*u,r},i.scale$2=function(r,o,u){return r[0]=o[0]*u,r[1]=o[1]*u,r[2]=o[2]*u,r},i.setCacheLimits=function(r,o){_e=r,Ue=o},i.setRTLTextPlugin=function(r,o,u){if(u===void 0&&(u=!1),hs==="deferred"||hs==="loading"||hs==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ws=ge.resolveURL(r),hs="deferred",Nf=o,Mc(),u||vl()},i.sphericalToCartesian=function(r){var o=r[0],u=r[1],g=r[2];return u+=90,u*=Math.PI/180,g*=Math.PI/180,{x:o*Math.cos(u)*Math.sin(g),y:o*Math.sin(u)*Math.sin(g),z:o*Math.cos(g)}},i.sqrLen=function(r){var o=r[0],u=r[1];return o*o+u*u},i.styleSpec=gt,i.sub=function(r,o,u){return r[0]=o[0]-u[0],r[1]=o[1]-u[1],r[2]=o[2]-u[2],r},i.symbolSize=zb,i.transformMat3=function(r,o,u){var g=o[0],b=o[1],C=o[2];return r[0]=g*u[0]+b*u[3]+C*u[6],r[1]=g*u[1]+b*u[4]+C*u[7],r[2]=g*u[2]+b*u[5]+C*u[8],r},i.transformMat4=gh,i.translate=function(r,o,u){var g,b,C,S,R,j,K,J,nt,ct,mt,St,Ot=u[0],Zt=u[1],Vt=u[2];return o===r?(r[12]=o[0]*Ot+o[4]*Zt+o[8]*Vt+o[12],r[13]=o[1]*Ot+o[5]*Zt+o[9]*Vt+o[13],r[14]=o[2]*Ot+o[6]*Zt+o[10]*Vt+o[14],r[15]=o[3]*Ot+o[7]*Zt+o[11]*Vt+o[15]):(b=o[1],C=o[2],S=o[3],R=o[4],j=o[5],K=o[6],J=o[7],nt=o[8],ct=o[9],mt=o[10],St=o[11],r[0]=g=o[0],r[1]=b,r[2]=C,r[3]=S,r[4]=R,r[5]=j,r[6]=K,r[7]=J,r[8]=nt,r[9]=ct,r[10]=mt,r[11]=St,r[12]=g*Ot+R*Zt+nt*Vt+o[12],r[13]=b*Ot+j*Zt+ct*Vt+o[13],r[14]=C*Ot+K*Zt+mt*Vt+o[14],r[15]=S*Ot+J*Zt+St*Vt+o[15]),r},i.triggerPluginCompletionEvent=Uh,i.uniqueId=U,i.validateCustomStyleLayer=function(r){var o=[],u=r.id;return u===void 0&&o.push({message:"layers."+u+': missing required property "id"'}),r.render===void 0&&o.push({message:"layers."+u+': missing required method "render"'}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&o.push({message:"layers."+u+': property "renderingMode" must be either "2d" or "3d"'}),o},i.validateLight=Ku,i.validateStyle=$u,i.values=function(r){var o=[];for(var u in r)o.push(r[u]);return o},i.vectorTile=wu,i.version="1.13.3",i.warnOnce=ot,i.webpSupported=Se,i.window=w,i.wrap=F}),l(["./shared"],function(i){function f(et){var ut=typeof et;if(ut==="number"||ut==="boolean"||ut==="string"||et==null)return JSON.stringify(et);if(Array.isArray(et)){for(var dt="[",At=0,Rt=et;At<Rt.length;At+=1)dt+=f(Rt[At])+",";return dt+"]"}for(var qt=Object.keys(et).sort(),te="{",gt=0;gt<qt.length;gt++)te+=JSON.stringify(qt[gt])+":"+f(et[qt[gt]])+",";return te+"}"}function m(et){for(var ut="",dt=0,At=i.refProperties;dt<At.length;dt+=1)ut+="/"+f(et[At[dt]]);return ut}var y=function(et){this.keyCache={},et&&this.replace(et)};y.prototype.replace=function(et){this._layerConfigs={},this._layers={},this.update(et,[])},y.prototype.update=function(et,ut){for(var dt=this,At=0,Rt=et;At<Rt.length;At+=1){var qt=Rt[At];this._layerConfigs[qt.id]=qt;var te=this._layers[qt.id]=i.createStyleLayer(qt);te._featureFilter=i.featureFilter(te.filter),this.keyCache[qt.id]&&delete this.keyCache[qt.id]}for(var gt=0,Nt=ut;gt<Nt.length;gt+=1){var me=Nt[gt];delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me]}this.familiesBySource={};for(var Ve=0,Ke=function(dn,pn){for(var Er={},bn=0;bn<dn.length;bn++){var jr=pn&&pn[dn[bn].id]||m(dn[bn]);pn&&(pn[dn[bn].id]=jr);var ei=Er[jr];ei||(ei=Er[jr]=[]),ei.push(dn[bn])}var Lr=[];for(var Ur in Er)Lr.push(Er[Ur]);return Lr}(i.values(this._layerConfigs),this.keyCache);Ve<Ke.length;Ve+=1){var Le=Ke[Ve].map(function(dn){return dt._layers[dn.id]}),Ge=Le[0];if(Ge.visibility!=="none"){var kn=Ge.source||"",Tn=this.familiesBySource[kn];Tn||(Tn=this.familiesBySource[kn]={});var Re=Ge.sourceLayer||"_geojsonTileLayer",an=Tn[Re];an||(an=Tn[Re]=[]),an.push(Le)}}};var x=function(et){var ut={},dt=[];for(var At in et){var Rt=et[At],qt=ut[At]={};for(var te in Rt){var gt=Rt[+te];if(gt&&gt.bitmap.width!==0&&gt.bitmap.height!==0){var Nt={x:0,y:0,w:gt.bitmap.width+2,h:gt.bitmap.height+2};dt.push(Nt),qt[te]={rect:Nt,metrics:gt.metrics}}}}var me=i.potpack(dt),Ve=new i.AlphaImage({width:me.w||1,height:me.h||1});for(var Ke in et){var Le=et[Ke];for(var Ge in Le){var kn=Le[+Ge];if(kn&&kn.bitmap.width!==0&&kn.bitmap.height!==0){var Tn=ut[Ke][Ge].rect;i.AlphaImage.copy(kn.bitmap,Ve,{x:0,y:0},{x:Tn.x+1,y:Tn.y+1},kn.bitmap)}}}this.image=Ve,this.positions=ut};i.register("GlyphAtlas",x);var A=function(et){this.tileID=new i.OverscaledTileID(et.tileID.overscaledZ,et.tileID.wrap,et.tileID.canonical.z,et.tileID.canonical.x,et.tileID.canonical.y),this.uid=et.uid,this.zoom=et.zoom,this.pixelRatio=et.pixelRatio,this.tileSize=et.tileSize,this.source=et.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=et.showCollisionBoxes,this.collectResourceTiming=!!et.collectResourceTiming,this.returnDependencies=!!et.returnDependencies,this.promoteId=et.promoteId};function w(et,ut,dt){for(var At=new i.EvaluationParameters(ut),Rt=0,qt=et;Rt<qt.length;Rt+=1)qt[Rt].recalculate(At,dt)}function E(et,ut){var dt=i.getArrayBuffer(et.request,function(At,Rt,qt,te){At?ut(At):Rt&&ut(null,{vectorTile:new i.vectorTile.VectorTile(new i.pbf(Rt)),rawData:Rt,cacheControl:qt,expires:te})});return function(){dt.cancel(),ut()}}A.prototype.parse=function(et,ut,dt,At,Rt){var qt=this;this.status="parsing",this.data=et,this.collisionBoxArray=new i.CollisionBoxArray;var te=new i.DictionaryCoder(Object.keys(et.layers).sort()),gt=new i.FeatureIndex(this.tileID,this.promoteId);gt.bucketLayerIDs=[];var Nt,me,Ve,Ke,Le={},Ge={featureIndex:gt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:dt},kn=ut.familiesBySource[this.source];for(var Tn in kn){var Re=et.layers[Tn];if(Re){Re.version===1&&i.warnOnce('Vector tile source "'+this.source+'" layer "'+Tn+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var an=te.encode(Tn),dn=[],pn=0;pn<Re.length;pn++){var Er=Re.feature(pn),bn=gt.getId(Er,Tn);dn.push({feature:Er,id:bn,index:pn,sourceLayerIndex:an})}for(var jr=0,ei=kn[Tn];jr<ei.length;jr+=1){var Lr=ei[jr],Ur=Lr[0];Ur.minzoom&&this.zoom<Math.floor(Ur.minzoom)||Ur.maxzoom&&this.zoom>=Ur.maxzoom||Ur.visibility!=="none"&&(w(Lr,this.zoom,dt),(Le[Ur.id]=Ur.createBucket({index:gt.bucketLayerIDs.length,layers:Lr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:an,sourceID:this.source})).populate(dn,Ge,this.tileID.canonical),gt.bucketLayerIDs.push(Lr.map(function(ui){return ui.id})))}}}var Vr=i.mapObject(Ge.glyphDependencies,function(ui){return Object.keys(ui).map(Number)});Object.keys(Vr).length?At.send("getGlyphs",{uid:this.uid,stacks:Vr},function(ui,br){Nt||(Nt=ui,me=br,$i.call(qt))}):me={};var Go=Object.keys(Ge.iconDependencies);Go.length?At.send("getImages",{icons:Go,source:this.source,tileID:this.tileID,type:"icons"},function(ui,br){Nt||(Nt=ui,Ve=br,$i.call(qt))}):Ve={};var vr=Object.keys(Ge.patternDependencies);function $i(){if(Nt)return Rt(Nt);if(me&&Ve&&Ke){var ui=new x(me),br=new i.ImageAtlas(Ve,Ke);for(var Tr in Le){var Wo=Le[Tr];Wo instanceof i.SymbolBucket?(w(Wo.layers,this.zoom,dt),i.performSymbolLayout(Wo,me,ui.positions,Ve,br.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Wo.hasPattern&&(Wo instanceof i.LineBucket||Wo instanceof i.FillBucket||Wo instanceof i.FillExtrusionBucket)&&(w(Wo.layers,this.zoom,dt),Wo.addFeatures(Ge,this.tileID.canonical,br.patternPositions))}this.status="done",Rt(null,{buckets:i.values(Le).filter(function(ws){return!ws.isEmpty()}),featureIndex:gt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ui.image,imageAtlas:br,glyphMap:this.returnDependencies?me:null,iconMap:this.returnDependencies?Ve:null,glyphPositions:this.returnDependencies?ui.positions:null})}}vr.length?At.send("getImages",{icons:vr,source:this.source,tileID:this.tileID,type:"patterns"},function(ui,br){Nt||(Nt=ui,Ke=br,$i.call(qt))}):Ke={},$i.call(this)};var L=function(et,ut,dt,At){this.actor=et,this.layerIndex=ut,this.availableImages=dt,this.loadVectorData=At||E,this.loading={},this.loaded={}};L.prototype.loadTile=function(et,ut){var dt=this,At=et.uid;this.loading||(this.loading={});var Rt=!!(et&&et.request&&et.request.collectResourceTiming)&&new i.RequestPerformance(et.request),qt=this.loading[At]=new A(et);qt.abort=this.loadVectorData(et,function(te,gt){if(delete dt.loading[At],te||!gt)return qt.status="done",dt.loaded[At]=qt,ut(te);var Nt=gt.rawData,me={};gt.expires&&(me.expires=gt.expires),gt.cacheControl&&(me.cacheControl=gt.cacheControl);var Ve={};if(Rt){var Ke=Rt.finish();Ke&&(Ve.resourceTiming=JSON.parse(JSON.stringify(Ke)))}qt.vectorTile=gt.vectorTile,qt.parse(gt.vectorTile,dt.layerIndex,dt.availableImages,dt.actor,function(Le,Ge){if(Le||!Ge)return ut(Le);ut(null,i.extend({rawTileData:Nt.slice(0)},Ge,me,Ve))}),dt.loaded=dt.loaded||{},dt.loaded[At]=qt})},L.prototype.reloadTile=function(et,ut){var dt=this,At=this.loaded,Rt=et.uid,qt=this;if(At&&At[Rt]){var te=At[Rt];te.showCollisionBoxes=et.showCollisionBoxes;var gt=function(Nt,me){var Ve=te.reloadCallback;Ve&&(delete te.reloadCallback,te.parse(te.vectorTile,qt.layerIndex,dt.availableImages,qt.actor,Ve)),ut(Nt,me)};te.status==="parsing"?te.reloadCallback=gt:te.status==="done"&&(te.vectorTile?te.parse(te.vectorTile,this.layerIndex,this.availableImages,this.actor,gt):gt())}},L.prototype.abortTile=function(et,ut){var dt=this.loading,At=et.uid;dt&&dt[At]&&dt[At].abort&&(dt[At].abort(),delete dt[At]),ut()},L.prototype.removeTile=function(et,ut){var dt=this.loaded,At=et.uid;dt&&dt[At]&&delete dt[At],ut()};var k=i.window.ImageBitmap,z=function(){this.loaded={}};function F(et,ut){if(et.length!==0){D(et[0],ut);for(var dt=1;dt<et.length;dt++)D(et[dt],!ut)}}function D(et,ut){for(var dt=0,At=0,Rt=0,qt=et.length,te=qt-1;Rt<qt;te=Rt++){var gt=(et[Rt][0]-et[te][0])*(et[te][1]+et[Rt][1]),Nt=dt+gt;At+=Math.abs(dt)>=Math.abs(gt)?dt-Nt+gt:gt-Nt+dt,dt=Nt}dt+At>=0!=!!ut&&et.reverse()}z.prototype.loadTile=function(et,ut){var dt=et.uid,At=et.encoding,Rt=et.rawImageData,qt=k&&Rt instanceof k?this.getImageData(Rt):Rt,te=new i.DEMData(dt,qt,At);this.loaded=this.loaded||{},this.loaded[dt]=te,ut(null,te)},z.prototype.getImageData=function(et){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(et.width,et.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=et.width,this.offscreenCanvas.height=et.height,this.offscreenCanvasContext.drawImage(et,0,0,et.width,et.height);var ut=this.offscreenCanvasContext.getImageData(-1,-1,et.width+2,et.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new i.RGBAImage({width:ut.width,height:ut.height},ut.data)},z.prototype.removeTile=function(et){var ut=this.loaded,dt=et.uid;ut&&ut[dt]&&delete ut[dt]};var B=i.vectorTile.VectorTileFeature.prototype.toGeoJSON,U=function(et){this._feature=et,this.extent=i.EXTENT,this.type=et.type,this.properties=et.tags,"id"in et&&!isNaN(et.id)&&(this.id=parseInt(et.id,10))};U.prototype.loadGeometry=function(){if(this._feature.type===1){for(var et=[],ut=0,dt=this._feature.geometry;ut<dt.length;ut+=1){var At=dt[ut];et.push([new i.Point$1(At[0],At[1])])}return et}for(var Rt=[],qt=0,te=this._feature.geometry;qt<te.length;qt+=1){for(var gt=[],Nt=0,me=te[qt];Nt<me.length;Nt+=1){var Ve=me[Nt];gt.push(new i.Point$1(Ve[0],Ve[1]))}Rt.push(gt)}return Rt},U.prototype.toGeoJSON=function(et,ut,dt){return B.call(this,et,ut,dt)};var $=function(et){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.EXTENT,this.length=et.length,this._features=et};$.prototype.feature=function(et){return new U(this._features[et])};var q=i.vectorTile.VectorTileFeature,tt=Y;function Y(et,ut){this.options=ut||{},this.features=et,this.length=et.length}function G(et,ut){this.id=typeof et.id=="number"?et.id:void 0,this.type=et.type,this.rawGeometry=et.type===1?[et.geometry]:et.geometry,this.properties=et.tags,this.extent=ut||4096}Y.prototype.feature=function(et){return new G(this.features[et],this.options.extent)},G.prototype.loadGeometry=function(){var et=this.rawGeometry;this.geometry=[];for(var ut=0;ut<et.length;ut++){for(var dt=et[ut],At=[],Rt=0;Rt<dt.length;Rt++)At.push(new i.Point$1(dt[Rt][0],dt[Rt][1]));this.geometry.push(At)}return this.geometry},G.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var et=this.geometry,ut=1/0,dt=-1/0,At=1/0,Rt=-1/0,qt=0;qt<et.length;qt++)for(var te=et[qt],gt=0;gt<te.length;gt++){var Nt=te[gt];ut=Math.min(ut,Nt.x),dt=Math.max(dt,Nt.x),At=Math.min(At,Nt.y),Rt=Math.max(Rt,Nt.y)}return[ut,At,dt,Rt]},G.prototype.toGeoJSON=q.prototype.toGeoJSON;var rt=Q,pt=tt;function Q(et){var ut=new i.pbf;return function(dt,At){for(var Rt in dt.layers)At.writeMessage(3,ot,dt.layers[Rt])}(et,ut),ut.finish()}function ot(et,ut){var dt;ut.writeVarintField(15,et.version||1),ut.writeStringField(1,et.name||""),ut.writeVarintField(5,et.extent||4096);var At={keys:[],values:[],keycache:{},valuecache:{}};for(dt=0;dt<et.length;dt++)At.feature=et.feature(dt),ut.writeMessage(2,Z,At);var Rt=At.keys;for(dt=0;dt<Rt.length;dt++)ut.writeStringField(3,Rt[dt]);var qt=At.values;for(dt=0;dt<qt.length;dt++)ut.writeMessage(4,ue,qt[dt])}function Z(et,ut){var dt=et.feature;dt.id!==void 0&&ut.writeVarintField(1,dt.id),ut.writeMessage(2,Kt,et),ut.writeVarintField(3,dt.type),ut.writeMessage(4,ie,dt)}function Kt(et,ut){var dt=et.feature,At=et.keys,Rt=et.values,qt=et.keycache,te=et.valuecache;for(var gt in dt.properties){var Nt=qt[gt];Nt===void 0&&(At.push(gt),qt[gt]=Nt=At.length-1),ut.writeVarint(Nt);var me=dt.properties[gt],Ve=typeof me;Ve!=="string"&&Ve!=="boolean"&&Ve!=="number"&&(me=JSON.stringify(me));var Ke=Ve+":"+me,Le=te[Ke];Le===void 0&&(Rt.push(me),te[Ke]=Le=Rt.length-1),ut.writeVarint(Le)}}function Ft(et,ut){return(ut<<3)+(7&et)}function Tt(et){return et<<1^et>>31}function ie(et,ut){for(var dt=et.loadGeometry(),At=et.type,Rt=0,qt=0,te=dt.length,gt=0;gt<te;gt++){var Nt=dt[gt],me=1;At===1&&(me=Nt.length),ut.writeVarint(Ft(1,me));for(var Ve=At===3?Nt.length-1:Nt.length,Ke=0;Ke<Ve;Ke++){Ke===1&&At!==1&&ut.writeVarint(Ft(2,Ve-1));var Le=Nt[Ke].x-Rt,Ge=Nt[Ke].y-qt;ut.writeVarint(Tt(Le)),ut.writeVarint(Tt(Ge)),Rt+=Le,qt+=Ge}At===3&&ut.writeVarint(Ft(7,1))}}function ue(et,ut){var dt=typeof et;dt==="string"?ut.writeStringField(1,et):dt==="boolean"?ut.writeBooleanField(7,et):dt==="number"&&(et%1!=0?ut.writeDoubleField(3,et):et<0?ut.writeSVarintField(6,et):ut.writeVarintField(5,et))}function je(et,ut,dt,At){jt(et,dt,At),jt(ut,2*dt,2*At),jt(ut,2*dt+1,2*At+1)}function jt(et,ut,dt){var At=et[ut];et[ut]=et[dt],et[dt]=At}function Ut(et,ut,dt,At){var Rt=et-dt,qt=ut-At;return Rt*Rt+qt*qt}rt.fromVectorTileJs=Q,rt.fromGeojsonVt=function(et,ut){ut=ut||{};var dt={};for(var At in et)dt[At]=new tt(et[At].features,ut),dt[At].name=At,dt[At].version=ut.version,dt[At].extent=ut.extent;return Q({layers:dt})},rt.GeoJSONWrapper=pt;var xe=function(et){return et[0]},Fe=function(et){return et[1]},we=function(et,ut,dt,At,Rt){ut===void 0&&(ut=xe),dt===void 0&&(dt=Fe),At===void 0&&(At=64),Rt===void 0&&(Rt=Float64Array),this.nodeSize=At,this.points=et;for(var qt=et.length<65536?Uint16Array:Uint32Array,te=this.ids=new qt(et.length),gt=this.coords=new Rt(2*et.length),Nt=0;Nt<et.length;Nt++)te[Nt]=Nt,gt[2*Nt]=ut(et[Nt]),gt[2*Nt+1]=dt(et[Nt]);(function me(Ve,Ke,Le,Ge,kn,Tn){if(!(kn-Ge<=Le)){var Re=Ge+kn>>1;(function an(dn,pn,Er,bn,jr,ei){for(;jr>bn;){if(jr-bn>600){var Lr=jr-bn+1,Ur=Er-bn+1,Vr=Math.log(Lr),Go=.5*Math.exp(2*Vr/3),vr=.5*Math.sqrt(Vr*Go*(Lr-Go)/Lr)*(Ur-Lr/2<0?-1:1);an(dn,pn,Er,Math.max(bn,Math.floor(Er-Ur*Go/Lr+vr)),Math.min(jr,Math.floor(Er+(Lr-Ur)*Go/Lr+vr)),ei)}var $i=pn[2*Er+ei],ui=bn,br=jr;for(je(dn,pn,bn,Er),pn[2*jr+ei]>$i&&je(dn,pn,bn,jr);ui<br;){for(je(dn,pn,ui,br),ui++,br--;pn[2*ui+ei]<$i;)ui++;for(;pn[2*br+ei]>$i;)br--}pn[2*bn+ei]===$i?je(dn,pn,bn,br):je(dn,pn,++br,jr),br<=Er&&(bn=br+1),Er<=br&&(jr=br-1)}})(Ve,Ke,Re,Ge,kn,Tn%2),me(Ve,Ke,Le,Ge,Re-1,Tn+1),me(Ve,Ke,Le,Re+1,kn,Tn+1)}})(te,gt,At,0,te.length-1,0)};we.prototype.range=function(et,ut,dt,At){return function(Rt,qt,te,gt,Nt,me,Ve){for(var Ke,Le,Ge=[0,Rt.length-1,0],kn=[];Ge.length;){var Tn=Ge.pop(),Re=Ge.pop(),an=Ge.pop();if(Re-an<=Ve)for(var dn=an;dn<=Re;dn++)Le=qt[2*dn+1],(Ke=qt[2*dn])>=te&&Ke<=Nt&&Le>=gt&&Le<=me&&kn.push(Rt[dn]);else{var pn=Math.floor((an+Re)/2);Le=qt[2*pn+1],(Ke=qt[2*pn])>=te&&Ke<=Nt&&Le>=gt&&Le<=me&&kn.push(Rt[pn]);var Er=(Tn+1)%2;(Tn===0?te<=Ke:gt<=Le)&&(Ge.push(an),Ge.push(pn-1),Ge.push(Er)),(Tn===0?Nt>=Ke:me>=Le)&&(Ge.push(pn+1),Ge.push(Re),Ge.push(Er))}}return kn}(this.ids,this.coords,et,ut,dt,At,this.nodeSize)},we.prototype.within=function(et,ut,dt){return function(At,Rt,qt,te,gt,Nt){for(var me=[0,At.length-1,0],Ve=[],Ke=gt*gt;me.length;){var Le=me.pop(),Ge=me.pop(),kn=me.pop();if(Ge-kn<=Nt)for(var Tn=kn;Tn<=Ge;Tn++)Ut(Rt[2*Tn],Rt[2*Tn+1],qt,te)<=Ke&&Ve.push(At[Tn]);else{var Re=Math.floor((kn+Ge)/2),an=Rt[2*Re],dn=Rt[2*Re+1];Ut(an,dn,qt,te)<=Ke&&Ve.push(At[Re]);var pn=(Le+1)%2;(Le===0?qt-gt<=an:te-gt<=dn)&&(me.push(kn),me.push(Re-1),me.push(pn)),(Le===0?qt+gt>=an:te+gt>=dn)&&(me.push(Re+1),me.push(Ge),me.push(pn))}}return Ve}(this.ids,this.coords,et,ut,dt,this.nodeSize)};var qe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(et){return et}},fe=function(et){this.options=N(Object.create(qe),et),this.trees=new Array(this.options.maxZoom+1)};function ge(et,ut,dt,At,Rt){return{x:et,y:ut,zoom:1/0,id:dt,parentId:-1,numPoints:At,properties:Rt}}function ne(et,ut){var dt=et.geometry.coordinates,At=dt[1];return{x:In(dt[0]),y:_t(At),zoom:1/0,index:ut,parentId:-1}}function Se(et){return{type:"Feature",id:et.id,properties:We(et),geometry:{type:"Point",coordinates:[(At=et.x,360*(At-.5)),(ut=et.y,dt=(180-360*ut)*Math.PI/180,360*Math.atan(Math.exp(dt))/Math.PI-90)]}};var ut,dt,At}function We(et){var ut=et.numPoints,dt=ut>=1e4?Math.round(ut/1e3)+"k":ut>=1e3?Math.round(ut/100)/10+"k":ut;return N(N({},et.properties),{cluster:!0,cluster_id:et.id,point_count:ut,point_count_abbreviated:dt})}function In(et){return et/360+.5}function _t(et){var ut=Math.sin(et*Math.PI/180),dt=.5-.25*Math.log((1+ut)/(1-ut))/Math.PI;return dt<0?0:dt>1?1:dt}function N(et,ut){for(var dt in ut)et[dt]=ut[dt];return et}function Et(et){return et.x}function wt(et){return et.y}function ht(et,ut,dt,At,Rt,qt){var te=Rt-dt,gt=qt-At;if(te!==0||gt!==0){var Nt=((et-dt)*te+(ut-At)*gt)/(te*te+gt*gt);Nt>1?(dt=Rt,At=qt):Nt>0&&(dt+=te*Nt,At+=gt*Nt)}return(te=et-dt)*te+(gt=ut-At)*gt}function lt(et,ut,dt,At){var Rt={id:et===void 0?null:et,type:ut,geometry:dt,tags:At,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(qt){var te=qt.geometry,gt=qt.type;if(gt==="Point"||gt==="MultiPoint"||gt==="LineString")Pt(qt,te);else if(gt==="Polygon"||gt==="MultiLineString")for(var Nt=0;Nt<te.length;Nt++)Pt(qt,te[Nt]);else if(gt==="MultiPolygon")for(Nt=0;Nt<te.length;Nt++)for(var me=0;me<te[Nt].length;me++)Pt(qt,te[Nt][me])}(Rt),Rt}function Pt(et,ut){for(var dt=0;dt<ut.length;dt+=3)et.minX=Math.min(et.minX,ut[dt]),et.minY=Math.min(et.minY,ut[dt+1]),et.maxX=Math.max(et.maxX,ut[dt]),et.maxY=Math.max(et.maxY,ut[dt+1])}function Wt(et,ut,dt,At){if(ut.geometry){var Rt=ut.geometry.coordinates,qt=ut.geometry.type,te=Math.pow(dt.tolerance/((1<<dt.maxZoom)*dt.extent),2),gt=[],Nt=ut.id;if(dt.promoteId?Nt=ut.properties[dt.promoteId]:dt.generateId&&(Nt=At||0),qt==="Point")ee(Rt,gt);else if(qt==="MultiPoint")for(var me=0;me<Rt.length;me++)ee(Rt[me],gt);else if(qt==="LineString")Dt(Rt,gt,te,!1);else if(qt==="MultiLineString"){if(dt.lineMetrics){for(me=0;me<Rt.length;me++)Dt(Rt[me],gt=[],te,!1),et.push(lt(Nt,"LineString",gt,ut.properties));return}ve(Rt,gt,te,!1)}else if(qt==="Polygon")ve(Rt,gt,te,!0);else{if(qt!=="MultiPolygon"){if(qt==="GeometryCollection"){for(me=0;me<ut.geometry.geometries.length;me++)Wt(et,{id:Nt,geometry:ut.geometry.geometries[me],properties:ut.properties},dt,At);return}throw new Error("Input data is not a valid GeoJSON object.")}for(me=0;me<Rt.length;me++){var Ve=[];ve(Rt[me],Ve,te,!0),gt.push(Ve)}}et.push(lt(Nt,qt,gt,ut.properties))}}function ee(et,ut){ut.push(Te(et[0])),ut.push(Ae(et[1])),ut.push(0)}function Dt(et,ut,dt,At){for(var Rt,qt,te=0,gt=0;gt<et.length;gt++){var Nt=Te(et[gt][0]),me=Ae(et[gt][1]);ut.push(Nt),ut.push(me),ut.push(0),gt>0&&(te+=At?(Rt*me-Nt*qt)/2:Math.sqrt(Math.pow(Nt-Rt,2)+Math.pow(me-qt,2))),Rt=Nt,qt=me}var Ve=ut.length-3;ut[2]=1,function Ke(Le,Ge,kn,Tn){for(var Re,an=Tn,dn=kn-Ge>>1,pn=kn-Ge,Er=Le[Ge],bn=Le[Ge+1],jr=Le[kn],ei=Le[kn+1],Lr=Ge+3;Lr<kn;Lr+=3){var Ur=ht(Le[Lr],Le[Lr+1],Er,bn,jr,ei);if(Ur>an)Re=Lr,an=Ur;else if(Ur===an){var Vr=Math.abs(Lr-dn);Vr<pn&&(Re=Lr,pn=Vr)}}an>Tn&&(Re-Ge>3&&Ke(Le,Ge,Re,Tn),Le[Re+2]=an,kn-Re>3&&Ke(Le,Re,kn,Tn))}(ut,0,Ve,dt),ut[Ve+2]=1,ut.size=Math.abs(te),ut.start=0,ut.end=ut.size}function ve(et,ut,dt,At){for(var Rt=0;Rt<et.length;Rt++){var qt=[];Dt(et[Rt],qt,dt,At),ut.push(qt)}}function Te(et){return et/360+.5}function Ae(et){var ut=Math.sin(et*Math.PI/180),dt=.5-.25*Math.log((1+ut)/(1-ut))/Math.PI;return dt<0?0:dt>1?1:dt}function De(et,ut,dt,At,Rt,qt,te,gt){if(At/=ut,qt>=(dt/=ut)&&te<At)return et;if(te<dt||qt>=At)return null;for(var Nt=[],me=0;me<et.length;me++){var Ve=et[me],Ke=Ve.geometry,Le=Ve.type,Ge=Rt===0?Ve.minX:Ve.minY,kn=Rt===0?Ve.maxX:Ve.maxY;if(Ge>=dt&&kn<At)Nt.push(Ve);else if(!(kn<dt||Ge>=At)){var Tn=[];if(Le==="Point"||Le==="MultiPoint")un(Ke,Tn,dt,At,Rt);else if(Le==="LineString")gn(Ke,Tn,dt,At,Rt,!1,gt.lineMetrics);else if(Le==="MultiLineString")ce(Ke,Tn,dt,At,Rt,!1);else if(Le==="Polygon")ce(Ke,Tn,dt,At,Rt,!0);else if(Le==="MultiPolygon")for(var Re=0;Re<Ke.length;Re++){var an=[];ce(Ke[Re],an,dt,At,Rt,!0),an.length&&Tn.push(an)}if(Tn.length){if(gt.lineMetrics&&Le==="LineString"){for(Re=0;Re<Tn.length;Re++)Nt.push(lt(Ve.id,Le,Tn[Re],Ve.tags));continue}Le!=="LineString"&&Le!=="MultiLineString"||(Tn.length===1?(Le="LineString",Tn=Tn[0]):Le="MultiLineString"),Le!=="Point"&&Le!=="MultiPoint"||(Le=Tn.length===3?"Point":"MultiPoint"),Nt.push(lt(Ve.id,Le,Tn,Ve.tags))}}}return Nt.length?Nt:null}function un(et,ut,dt,At,Rt){for(var qt=0;qt<et.length;qt+=3){var te=et[qt+Rt];te>=dt&&te<=At&&(ut.push(et[qt]),ut.push(et[qt+1]),ut.push(et[qt+2]))}}function gn(et,ut,dt,At,Rt,qt,te){for(var gt,Nt,me=re(et),Ve=Rt===0?Ue:en,Ke=et.start,Le=0;Le<et.length-3;Le+=3){var Ge=et[Le],kn=et[Le+1],Tn=et[Le+2],Re=et[Le+3],an=et[Le+4],dn=Rt===0?Ge:kn,pn=Rt===0?Re:an,Er=!1;te&&(gt=Math.sqrt(Math.pow(Ge-Re,2)+Math.pow(kn-an,2))),dn<dt?pn>dt&&(Nt=Ve(me,Ge,kn,Re,an,dt),te&&(me.start=Ke+gt*Nt)):dn>At?pn<At&&(Nt=Ve(me,Ge,kn,Re,an,At),te&&(me.start=Ke+gt*Nt)):_e(me,Ge,kn,Tn),pn<dt&&dn>=dt&&(Nt=Ve(me,Ge,kn,Re,an,dt),Er=!0),pn>At&&dn<=At&&(Nt=Ve(me,Ge,kn,Re,an,At),Er=!0),!qt&&Er&&(te&&(me.end=Ke+gt*Nt),ut.push(me),me=re(et)),te&&(Ke+=gt)}var bn=et.length-3;Ge=et[bn],kn=et[bn+1],Tn=et[bn+2],(dn=Rt===0?Ge:kn)>=dt&&dn<=At&&_e(me,Ge,kn,Tn),bn=me.length-3,qt&&bn>=3&&(me[bn]!==me[0]||me[bn+1]!==me[1])&&_e(me,me[0],me[1],me[2]),me.length&&ut.push(me)}function re(et){var ut=[];return ut.size=et.size,ut.start=et.start,ut.end=et.end,ut}function ce(et,ut,dt,At,Rt,qt){for(var te=0;te<et.length;te++)gn(et[te],ut,dt,At,Rt,qt,!1)}function _e(et,ut,dt,At){et.push(ut),et.push(dt),et.push(At)}function Ue(et,ut,dt,At,Rt,qt){var te=(qt-ut)/(At-ut);return et.push(qt),et.push(dt+(Rt-dt)*te),et.push(1),te}function en(et,ut,dt,At,Rt,qt){var te=(qt-dt)/(Rt-dt);return et.push(ut+(At-ut)*te),et.push(qt),et.push(1),te}function Un(et,ut){for(var dt=[],At=0;At<et.length;At++){var Rt,qt=et[At],te=qt.type;if(te==="Point"||te==="MultiPoint"||te==="LineString")Rt=lr(qt.geometry,ut);else if(te==="MultiLineString"||te==="Polygon"){Rt=[];for(var gt=0;gt<qt.geometry.length;gt++)Rt.push(lr(qt.geometry[gt],ut))}else if(te==="MultiPolygon")for(Rt=[],gt=0;gt<qt.geometry.length;gt++){for(var Nt=[],me=0;me<qt.geometry[gt].length;me++)Nt.push(lr(qt.geometry[gt][me],ut));Rt.push(Nt)}dt.push(lt(qt.id,te,Rt,qt.tags))}return dt}function lr(et,ut){var dt=[];dt.size=et.size,et.start!==void 0&&(dt.start=et.start,dt.end=et.end);for(var At=0;At<et.length;At+=3)dt.push(et[At]+ut,et[At+1],et[At+2]);return dt}function Gn(et,ut){if(et.transformed)return et;var dt,At,Rt,qt=1<<et.z,te=et.x,gt=et.y;for(dt=0;dt<et.features.length;dt++){var Nt=et.features[dt],me=Nt.geometry,Ve=Nt.type;if(Nt.geometry=[],Ve===1)for(At=0;At<me.length;At+=2)Nt.geometry.push(zr(me[At],me[At+1],ut,qt,te,gt));else for(At=0;At<me.length;At++){var Ke=[];for(Rt=0;Rt<me[At].length;Rt+=2)Ke.push(zr(me[At][Rt],me[At][Rt+1],ut,qt,te,gt));Nt.geometry.push(Ke)}}return et.transformed=!0,et}function zr(et,ut,dt,At,Rt,qt){return[Math.round(dt*(et*At-Rt)),Math.round(dt*(ut*At-qt))]}function ur(et,ut,dt,At,Rt){for(var qt=ut===Rt.maxZoom?0:Rt.tolerance/((1<<ut)*Rt.extent),te={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:dt,y:At,z:ut,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},gt=0;gt<et.length;gt++){te.numFeatures++,Fn(te,et[gt],qt,Rt);var Nt=et[gt].minX,me=et[gt].minY,Ve=et[gt].maxX,Ke=et[gt].maxY;Nt<te.minX&&(te.minX=Nt),me<te.minY&&(te.minY=me),Ve>te.maxX&&(te.maxX=Ve),Ke>te.maxY&&(te.maxY=Ke)}return te}function Fn(et,ut,dt,At){var Rt=ut.geometry,qt=ut.type,te=[];if(qt==="Point"||qt==="MultiPoint")for(var gt=0;gt<Rt.length;gt+=3)te.push(Rt[gt]),te.push(Rt[gt+1]),et.numPoints++,et.numSimplified++;else if(qt==="LineString")Jn(te,Rt,et,dt,!1,!1);else if(qt==="MultiLineString"||qt==="Polygon")for(gt=0;gt<Rt.length;gt++)Jn(te,Rt[gt],et,dt,qt==="Polygon",gt===0);else if(qt==="MultiPolygon")for(var Nt=0;Nt<Rt.length;Nt++){var me=Rt[Nt];for(gt=0;gt<me.length;gt++)Jn(te,me[gt],et,dt,!0,gt===0)}if(te.length){var Ve=ut.tags||null;if(qt==="LineString"&&At.lineMetrics){for(var Ke in Ve={},ut.tags)Ve[Ke]=ut.tags[Ke];Ve.mapbox_clip_start=Rt.start/Rt.size,Ve.mapbox_clip_end=Rt.end/Rt.size}var Le={geometry:te,type:qt==="Polygon"||qt==="MultiPolygon"?3:qt==="LineString"||qt==="MultiLineString"?2:1,tags:Ve};ut.id!==null&&(Le.id=ut.id),et.features.push(Le)}}function Jn(et,ut,dt,At,Rt,qt){var te=At*At;if(At>0&&ut.size<(Rt?te:At))dt.numPoints+=ut.length/3;else{for(var gt=[],Nt=0;Nt<ut.length;Nt+=3)(At===0||ut[Nt+2]>te)&&(dt.numSimplified++,gt.push(ut[Nt]),gt.push(ut[Nt+1])),dt.numPoints++;Rt&&function(me,Ve){for(var Ke=0,Le=0,Ge=me.length,kn=Ge-2;Le<Ge;kn=Le,Le+=2)Ke+=(me[Le]-me[kn])*(me[Le+1]+me[kn+1]);if(Ke>0===Ve)for(Le=0,Ge=me.length;Le<Ge/2;Le+=2){var Tn=me[Le],Re=me[Le+1];me[Le]=me[Ge-2-Le],me[Le+1]=me[Ge-1-Le],me[Ge-2-Le]=Tn,me[Ge-1-Le]=Re}}(gt,qt),et.push(gt)}}function gr(et,ut){var dt=(ut=this.options=function(Rt,qt){for(var te in qt)Rt[te]=qt[te];return Rt}(Object.create(this.options),ut)).debug;if(dt&&console.time("preprocess data"),ut.maxZoom<0||ut.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ut.promoteId&&ut.generateId)throw new Error("promoteId and generateId cannot be used together.");var At=function(Rt,qt){var te=[];if(Rt.type==="FeatureCollection")for(var gt=0;gt<Rt.features.length;gt++)Wt(te,Rt.features[gt],qt,gt);else Wt(te,Rt.type==="Feature"?Rt:{geometry:Rt},qt);return te}(et,ut);this.tiles={},this.tileCoords=[],dt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ut.indexMaxZoom,ut.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(At=function(Rt,qt){var te=qt.buffer/qt.extent,gt=Rt,Nt=De(Rt,1,-1-te,te,0,-1,2,qt),me=De(Rt,1,1-te,2+te,0,-1,2,qt);return(Nt||me)&&(gt=De(Rt,1,-te,1+te,0,-1,2,qt)||[],Nt&&(gt=Un(Nt,1).concat(gt)),me&&(gt=gt.concat(Un(me,-1)))),gt}(At,ut)).length&&this.splitTile(At,0,0,0),dt&&(At.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function rr(et,ut,dt){return 32*((1<<et)*dt+ut)+et}function Mi(et,ut){var dt=et.tileID.canonical;if(!this._geoJSONIndex)return ut(null,null);var At=this._geoJSONIndex.getTile(dt.z,dt.x,dt.y);if(!At)return ut(null,null);var Rt=new $(At.features),qt=rt(Rt);qt.byteOffset===0&&qt.byteLength===qt.buffer.byteLength||(qt=new Uint8Array(qt)),ut(null,{vectorTile:Rt,rawData:qt.buffer})}fe.prototype.load=function(et){var ut=this.options,dt=ut.log,At=ut.minZoom,Rt=ut.maxZoom,qt=ut.nodeSize;dt&&console.time("total time");var te="prepare "+et.length+" points";dt&&console.time(te),this.points=et;for(var gt=[],Nt=0;Nt<et.length;Nt++)et[Nt].geometry&&gt.push(ne(et[Nt],Nt));this.trees[Rt+1]=new we(gt,Et,wt,qt,Float32Array),dt&&console.timeEnd(te);for(var me=Rt;me>=At;me--){var Ve=+Date.now();gt=this._cluster(gt,me),this.trees[me]=new we(gt,Et,wt,qt,Float32Array),dt&&console.log("z%d: %d clusters in %dms",me,gt.length,+Date.now()-Ve)}return dt&&console.timeEnd("total time"),this},fe.prototype.getClusters=function(et,ut){var dt=((et[0]+180)%360+360)%360-180,At=Math.max(-90,Math.min(90,et[1])),Rt=et[2]===180?180:((et[2]+180)%360+360)%360-180,qt=Math.max(-90,Math.min(90,et[3]));if(et[2]-et[0]>=360)dt=-180,Rt=180;else if(dt>Rt){var te=this.getClusters([dt,At,180,qt],ut),gt=this.getClusters([-180,At,Rt,qt],ut);return te.concat(gt)}for(var Nt=this.trees[this._limitZoom(ut)],me=[],Ve=0,Ke=Nt.range(In(dt),_t(qt),In(Rt),_t(At));Ve<Ke.length;Ve+=1){var Le=Nt.points[Ke[Ve]];me.push(Le.numPoints?Se(Le):this.points[Le.index])}return me},fe.prototype.getChildren=function(et){var ut=this._getOriginId(et),dt=this._getOriginZoom(et),At="No cluster with the specified id.",Rt=this.trees[dt];if(!Rt)throw new Error(At);var qt=Rt.points[ut];if(!qt)throw new Error(At);for(var te=this.options.radius/(this.options.extent*Math.pow(2,dt-1)),gt=[],Nt=0,me=Rt.within(qt.x,qt.y,te);Nt<me.length;Nt+=1){var Ve=Rt.points[me[Nt]];Ve.parentId===et&&gt.push(Ve.numPoints?Se(Ve):this.points[Ve.index])}if(gt.length===0)throw new Error(At);return gt},fe.prototype.getLeaves=function(et,ut,dt){var At=[];return this._appendLeaves(At,et,ut=ut||10,dt=dt||0,0),At},fe.prototype.getTile=function(et,ut,dt){var At=this.trees[this._limitZoom(et)],Rt=Math.pow(2,et),qt=this.options,te=qt.radius/qt.extent,gt=(dt-te)/Rt,Nt=(dt+1+te)/Rt,me={features:[]};return this._addTileFeatures(At.range((ut-te)/Rt,gt,(ut+1+te)/Rt,Nt),At.points,ut,dt,Rt,me),ut===0&&this._addTileFeatures(At.range(1-te/Rt,gt,1,Nt),At.points,Rt,dt,Rt,me),ut===Rt-1&&this._addTileFeatures(At.range(0,gt,te/Rt,Nt),At.points,-1,dt,Rt,me),me.features.length?me:null},fe.prototype.getClusterExpansionZoom=function(et){for(var ut=this._getOriginZoom(et)-1;ut<=this.options.maxZoom;){var dt=this.getChildren(et);if(ut++,dt.length!==1)break;et=dt[0].properties.cluster_id}return ut},fe.prototype._appendLeaves=function(et,ut,dt,At,Rt){for(var qt=0,te=this.getChildren(ut);qt<te.length;qt+=1){var gt=te[qt],Nt=gt.properties;if(Nt&&Nt.cluster?Rt+Nt.point_count<=At?Rt+=Nt.point_count:Rt=this._appendLeaves(et,Nt.cluster_id,dt,At,Rt):Rt<At?Rt++:et.push(gt),et.length===dt)break}return Rt},fe.prototype._addTileFeatures=function(et,ut,dt,At,Rt,qt){for(var te=0,gt=et;te<gt.length;te+=1){var Nt=ut[gt[te]],me=Nt.numPoints,Ve={type:1,geometry:[[Math.round(this.options.extent*(Nt.x*Rt-dt)),Math.round(this.options.extent*(Nt.y*Rt-At))]],tags:me?We(Nt):this.points[Nt.index].properties},Ke=void 0;me?Ke=Nt.id:this.options.generateId?Ke=Nt.index:this.points[Nt.index].id&&(Ke=this.points[Nt.index].id),Ke!==void 0&&(Ve.id=Ke),qt.features.push(Ve)}},fe.prototype._limitZoom=function(et){return Math.max(this.options.minZoom,Math.min(+et,this.options.maxZoom+1))},fe.prototype._cluster=function(et,ut){for(var dt=[],At=this.options,Rt=At.reduce,qt=At.minPoints,te=At.radius/(At.extent*Math.pow(2,ut)),gt=0;gt<et.length;gt++){var Nt=et[gt];if(!(Nt.zoom<=ut)){Nt.zoom=ut;for(var me=this.trees[ut+1],Ve=me.within(Nt.x,Nt.y,te),Ke=Nt.numPoints||1,Le=Ke,Ge=0,kn=Ve;Ge<kn.length;Ge+=1){var Tn=me.points[kn[Ge]];Tn.zoom>ut&&(Le+=Tn.numPoints||1)}if(Le>=qt){for(var Re=Nt.x*Ke,an=Nt.y*Ke,dn=Rt&&Ke>1?this._map(Nt,!0):null,pn=(gt<<5)+(ut+1)+this.points.length,Er=0,bn=Ve;Er<bn.length;Er+=1){var jr=me.points[bn[Er]];if(!(jr.zoom<=ut)){jr.zoom=ut;var ei=jr.numPoints||1;Re+=jr.x*ei,an+=jr.y*ei,jr.parentId=pn,Rt&&(dn||(dn=this._map(Nt,!0)),Rt(dn,this._map(jr)))}}Nt.parentId=pn,dt.push(ge(Re/Le,an/Le,pn,Le,dn))}else if(dt.push(Nt),Le>1)for(var Lr=0,Ur=Ve;Lr<Ur.length;Lr+=1){var Vr=me.points[Ur[Lr]];Vr.zoom<=ut||(Vr.zoom=ut,dt.push(Vr))}}}return dt},fe.prototype._getOriginId=function(et){return et-this.points.length>>5},fe.prototype._getOriginZoom=function(et){return(et-this.points.length)%32},fe.prototype._map=function(et,ut){if(et.numPoints)return ut?N({},et.properties):et.properties;var dt=this.points[et.index].properties,At=this.options.map(dt);return ut&&At===dt?N({},At):At},gr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},gr.prototype.splitTile=function(et,ut,dt,At,Rt,qt,te){for(var gt=[et,ut,dt,At],Nt=this.options,me=Nt.debug;gt.length;){At=gt.pop(),dt=gt.pop(),ut=gt.pop(),et=gt.pop();var Ve=1<<ut,Ke=rr(ut,dt,At),Le=this.tiles[Ke];if(!Le&&(me>1&&console.time("creation"),Le=this.tiles[Ke]=ur(et,ut,dt,At,Nt),this.tileCoords.push({z:ut,x:dt,y:At}),me)){me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ut,dt,At,Le.numFeatures,Le.numPoints,Le.numSimplified),console.timeEnd("creation"));var Ge="z"+ut;this.stats[Ge]=(this.stats[Ge]||0)+1,this.total++}if(Le.source=et,Rt){if(ut===Nt.maxZoom||ut===Rt)continue;var kn=1<<Rt-ut;if(dt!==Math.floor(qt/kn)||At!==Math.floor(te/kn))continue}else if(ut===Nt.indexMaxZoom||Le.numPoints<=Nt.indexMaxPoints)continue;if(Le.source=null,et.length!==0){me>1&&console.time("clipping");var Tn,Re,an,dn,pn,Er,bn=.5*Nt.buffer/Nt.extent,jr=.5-bn,ei=.5+bn,Lr=1+bn;Tn=Re=an=dn=null,pn=De(et,Ve,dt-bn,dt+ei,0,Le.minX,Le.maxX,Nt),Er=De(et,Ve,dt+jr,dt+Lr,0,Le.minX,Le.maxX,Nt),et=null,pn&&(Tn=De(pn,Ve,At-bn,At+ei,1,Le.minY,Le.maxY,Nt),Re=De(pn,Ve,At+jr,At+Lr,1,Le.minY,Le.maxY,Nt),pn=null),Er&&(an=De(Er,Ve,At-bn,At+ei,1,Le.minY,Le.maxY,Nt),dn=De(Er,Ve,At+jr,At+Lr,1,Le.minY,Le.maxY,Nt),Er=null),me>1&&console.timeEnd("clipping"),gt.push(Tn||[],ut+1,2*dt,2*At),gt.push(Re||[],ut+1,2*dt,2*At+1),gt.push(an||[],ut+1,2*dt+1,2*At),gt.push(dn||[],ut+1,2*dt+1,2*At+1)}}},gr.prototype.getTile=function(et,ut,dt){var At=this.options,Rt=At.extent,qt=At.debug;if(et<0||et>24)return null;var te=1<<et,gt=rr(et,ut=(ut%te+te)%te,dt);if(this.tiles[gt])return Gn(this.tiles[gt],Rt);qt>1&&console.log("drilling down to z%d-%d-%d",et,ut,dt);for(var Nt,me=et,Ve=ut,Ke=dt;!Nt&&me>0;)me--,Ve=Math.floor(Ve/2),Ke=Math.floor(Ke/2),Nt=this.tiles[rr(me,Ve,Ke)];return Nt&&Nt.source?(qt>1&&console.log("found parent tile z%d-%d-%d",me,Ve,Ke),qt>1&&console.time("drilling down"),this.splitTile(Nt.source,me,Ve,Ke,et,ut,dt),qt>1&&console.timeEnd("drilling down"),this.tiles[gt]?Gn(this.tiles[gt],Rt):null):null};var Ns=function(et){function ut(dt,At,Rt,qt){et.call(this,dt,At,Rt,Mi),qt&&(this.loadGeoJSON=qt)}return et&&(ut.__proto__=et),(ut.prototype=Object.create(et&&et.prototype)).constructor=ut,ut.prototype.loadData=function(dt,At){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=At,this._pendingLoadDataParams=dt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ut.prototype._loadData=function(){var dt=this;if(this._pendingCallback&&this._pendingLoadDataParams){var At=this._pendingCallback,Rt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var qt=!!(Rt&&Rt.request&&Rt.request.collectResourceTiming)&&new i.RequestPerformance(Rt.request);this.loadGeoJSON(Rt,function(te,gt){if(te||!gt)return At(te);if(typeof gt!="object")return At(new Error("Input data given to '"+Rt.source+"' is not a valid GeoJSON object."));(function Le(Ge,kn){var Tn,Re=Ge&&Ge.type;if(Re==="FeatureCollection")for(Tn=0;Tn<Ge.features.length;Tn++)Le(Ge.features[Tn],kn);else if(Re==="GeometryCollection")for(Tn=0;Tn<Ge.geometries.length;Tn++)Le(Ge.geometries[Tn],kn);else if(Re==="Feature")Le(Ge.geometry,kn);else if(Re==="Polygon")F(Ge.coordinates,kn);else if(Re==="MultiPolygon")for(Tn=0;Tn<Ge.coordinates.length;Tn++)F(Ge.coordinates[Tn],kn);return Ge})(gt,!0);try{if(Rt.filter){var Nt=i.createExpression(Rt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Nt.result==="error")throw new Error(Nt.value.map(function(Le){return Le.key+": "+Le.message}).join(", "));var me=gt.features.filter(function(Le){return Nt.value.evaluate({zoom:0},Le)});gt={type:"FeatureCollection",features:me}}dt._geoJSONIndex=Rt.cluster?new fe(function(Le){var Ge=Le.superclusterOptions,kn=Le.clusterProperties;if(!kn||!Ge)return Ge;for(var Tn={},Re={},an={accumulated:null,zoom:0},dn={properties:null},pn=Object.keys(kn),Er=0,bn=pn;Er<bn.length;Er+=1){var jr=bn[Er],ei=kn[jr],Lr=ei[0],Ur=i.createExpression(ei[1]),Vr=i.createExpression(typeof Lr=="string"?[Lr,["accumulated"],["get",jr]]:Lr);Tn[jr]=Ur.value,Re[jr]=Vr.value}return Ge.map=function(Go){dn.properties=Go;for(var vr={},$i=0,ui=pn;$i<ui.length;$i+=1){var br=ui[$i];vr[br]=Tn[br].evaluate(an,dn)}return vr},Ge.reduce=function(Go,vr){dn.properties=vr;for(var $i=0,ui=pn;$i<ui.length;$i+=1){var br=ui[$i];an.accumulated=Go[br],Go[br]=Re[br].evaluate(an,dn)}},Ge}(Rt)).load(gt.features):function(Le,Ge){return new gr(Le,Ge)}(gt,Rt.geojsonVtOptions)}catch(Le){return At(Le)}dt.loaded={};var Ve={};if(qt){var Ke=qt.finish();Ke&&(Ve.resourceTiming={},Ve.resourceTiming[Rt.source]=JSON.parse(JSON.stringify(Ke)))}At(null,Ve)})}},ut.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ut.prototype.reloadTile=function(dt,At){var Rt=this.loaded;return Rt&&Rt[dt.uid]?et.prototype.reloadTile.call(this,dt,At):this.loadTile(dt,At)},ut.prototype.loadGeoJSON=function(dt,At){if(dt.request)i.getJSON(dt.request,At);else{if(typeof dt.data!="string")return At(new Error("Input data given to '"+dt.source+"' is not a valid GeoJSON object."));try{return At(null,JSON.parse(dt.data))}catch{return At(new Error("Input data given to '"+dt.source+"' is not a valid GeoJSON object."))}}},ut.prototype.removeSource=function(dt,At){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),At()},ut.prototype.getClusterExpansionZoom=function(dt,At){try{At(null,this._geoJSONIndex.getClusterExpansionZoom(dt.clusterId))}catch(Rt){At(Rt)}},ut.prototype.getClusterChildren=function(dt,At){try{At(null,this._geoJSONIndex.getChildren(dt.clusterId))}catch(Rt){At(Rt)}},ut.prototype.getClusterLeaves=function(dt,At){try{At(null,this._geoJSONIndex.getLeaves(dt.clusterId,dt.limit,dt.offset))}catch(Rt){At(Rt)}},ut}(L),Zi=function(et){var ut=this;this.self=et,this.actor=new i.Actor(et,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:L,geojson:Ns},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(dt,At){if(ut.workerSourceTypes[dt])throw new Error('Worker source with name "'+dt+'" already registered.');ut.workerSourceTypes[dt]=At},this.self.registerRTLTextPlugin=function(dt){if(i.plugin.isParsed())throw new Error("RTL text plugin already registered.");i.plugin.applyArabicShaping=dt.applyArabicShaping,i.plugin.processBidirectionalText=dt.processBidirectionalText,i.plugin.processStyledBidirectionalText=dt.processStyledBidirectionalText}};return Zi.prototype.setReferrer=function(et,ut){this.referrer=ut},Zi.prototype.setImages=function(et,ut,dt){for(var At in this.availableImages[et]=ut,this.workerSources[et]){var Rt=this.workerSources[et][At];for(var qt in Rt)Rt[qt].availableImages=ut}dt()},Zi.prototype.setLayers=function(et,ut,dt){this.getLayerIndex(et).replace(ut),dt()},Zi.prototype.updateLayers=function(et,ut,dt){this.getLayerIndex(et).update(ut.layers,ut.removedIds),dt()},Zi.prototype.loadTile=function(et,ut,dt){this.getWorkerSource(et,ut.type,ut.source).loadTile(ut,dt)},Zi.prototype.loadDEMTile=function(et,ut,dt){this.getDEMWorkerSource(et,ut.source).loadTile(ut,dt)},Zi.prototype.reloadTile=function(et,ut,dt){this.getWorkerSource(et,ut.type,ut.source).reloadTile(ut,dt)},Zi.prototype.abortTile=function(et,ut,dt){this.getWorkerSource(et,ut.type,ut.source).abortTile(ut,dt)},Zi.prototype.removeTile=function(et,ut,dt){this.getWorkerSource(et,ut.type,ut.source).removeTile(ut,dt)},Zi.prototype.removeDEMTile=function(et,ut){this.getDEMWorkerSource(et,ut.source).removeTile(ut)},Zi.prototype.removeSource=function(et,ut,dt){if(this.workerSources[et]&&this.workerSources[et][ut.type]&&this.workerSources[et][ut.type][ut.source]){var At=this.workerSources[et][ut.type][ut.source];delete this.workerSources[et][ut.type][ut.source],At.removeSource!==void 0?At.removeSource(ut,dt):dt()}},Zi.prototype.loadWorkerSource=function(et,ut,dt){try{this.self.importScripts(ut.url),dt()}catch(At){dt(At.toString())}},Zi.prototype.syncRTLPluginState=function(et,ut,dt){try{i.plugin.setState(ut);var At=i.plugin.getPluginURL();if(i.plugin.isLoaded()&&!i.plugin.isParsed()&&At!=null){this.self.importScripts(At);var Rt=i.plugin.isParsed();dt(Rt?void 0:new Error("RTL Text Plugin failed to import scripts from "+At),Rt)}}catch(qt){dt(qt.toString())}},Zi.prototype.getAvailableImages=function(et){var ut=this.availableImages[et];return ut||(ut=[]),ut},Zi.prototype.getLayerIndex=function(et){var ut=this.layerIndexes[et];return ut||(ut=this.layerIndexes[et]=new y),ut},Zi.prototype.getWorkerSource=function(et,ut,dt){var At=this;return this.workerSources[et]||(this.workerSources[et]={}),this.workerSources[et][ut]||(this.workerSources[et][ut]={}),this.workerSources[et][ut][dt]||(this.workerSources[et][ut][dt]=new this.workerSourceTypes[ut]({send:function(Rt,qt,te){At.actor.send(Rt,qt,te,et)}},this.getLayerIndex(et),this.getAvailableImages(et))),this.workerSources[et][ut][dt]},Zi.prototype.getDEMWorkerSource=function(et,ut){return this.demWorkerSources[et]||(this.demWorkerSources[et]={}),this.demWorkerSources[et][ut]||(this.demWorkerSources[et][ut]=new z),this.demWorkerSources[et][ut]},Zi.prototype.enforceCacheSizeLimit=function(et,ut){i.enforceCacheSizeLimit(ut)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Zi(self)),Zi}),l(["./shared"],function(i){var f=i.createCommonjsModule(function(c){function d(I){return!h(I)}function h(I){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var O,V,X=new Blob([""],{type:"text/javascript"}),it=URL.createObjectURL(X);try{V=new Worker(it),O=!0}catch{O=!1}return V&&V.terminate(),URL.revokeObjectURL(it),O}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var O=document.createElement("canvas");O.width=O.height=1;var V=O.getContext("2d");if(!V)return!1;var X=V.getImageData(0,0,1,1);return X&&X.width===O.width}()?(v[M=I&&I.failIfMajorPerformanceCaveat]===void 0&&(v[M]=function(O){var V=function(it){var vt=document.createElement("canvas"),yt=Object.create(d.webGLContextAttributes);return yt.failIfMajorPerformanceCaveat=it,vt.probablySupportsContext?vt.probablySupportsContext("webgl",yt)||vt.probablySupportsContext("experimental-webgl",yt):vt.supportsContext?vt.supportsContext("webgl",yt)||vt.supportsContext("experimental-webgl",yt):vt.getContext("webgl",yt)||vt.getContext("experimental-webgl",yt)}(O);if(!V)return!1;var X=V.createShader(V.VERTEX_SHADER);return!(!X||V.isContextLost())&&(V.shaderSource(X,"void main() {}"),V.compileShader(X),V.getShaderParameter(X,V.COMPILE_STATUS)===!0)}(M)),v[M]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var M}c.exports?c.exports=d:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=d,window.mapboxgl.notSupportedReason=h);var v={};d.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),m={create:function(c,d,h){var v=i.window.document.createElement(c);return d!==void 0&&(v.className=d),h&&h.appendChild(v),v},createNS:function(c,d){return i.window.document.createElementNS(c,d)}},y=i.window.document&&i.window.document.documentElement.style;function x(c){if(!y)return c[0];for(var d=0;d<c.length;d++)if(c[d]in y)return c[d];return c[0]}var A,w=x(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);m.disableDrag=function(){y&&w&&(A=y[w],y[w]="none")},m.enableDrag=function(){y&&w&&(y[w]=A)};var E=x(["transform","WebkitTransform"]);m.setTransform=function(c,d){c.style[E]=d};var L=!1;try{var k=Object.defineProperty({},"passive",{get:function(){L=!0}});i.window.addEventListener("test",k,k),i.window.removeEventListener("test",k,k)}catch{L=!1}m.addEventListener=function(c,d,h,v){v===void 0&&(v={}),c.addEventListener(d,h,"passive"in v&&L?v:v.capture)},m.removeEventListener=function(c,d,h,v){v===void 0&&(v={}),c.removeEventListener(d,h,"passive"in v&&L?v:v.capture)};var z=function(c){c.preventDefault(),c.stopPropagation(),i.window.removeEventListener("click",z,!0)};function F(c){var d=c.userImage;return!!(d&&d.render&&d.render())&&(c.data.replace(new Uint8Array(d.data.buffer)),!0)}m.suppressClick=function(){i.window.addEventListener("click",z,!0),i.window.setTimeout(function(){i.window.removeEventListener("click",z,!0)},0)},m.mousePos=function(c,d){var h=c.getBoundingClientRect();return new i.Point(d.clientX-h.left-c.clientLeft,d.clientY-h.top-c.clientTop)},m.touchPos=function(c,d){for(var h=c.getBoundingClientRect(),v=[],I=0;I<d.length;I++)v.push(new i.Point(d[I].clientX-h.left-c.clientLeft,d[I].clientY-h.top-c.clientTop));return v},m.mouseButton=function(c){return i.window.InstallTrigger!==void 0&&c.button===2&&c.ctrlKey&&i.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:c.button},m.remove=function(c){c.parentNode&&c.parentNode.removeChild(c)};var D=function(c){function d(){c.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.RGBAImage({width:1,height:1}),this.dirty=!0}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.isLoaded=function(){return this.loaded},d.prototype.setLoaded=function(h){if(this.loaded!==h&&(this.loaded=h,h)){for(var v=0,I=this.requestors;v<I.length;v+=1){var M=I[v];this._notify(M.ids,M.callback)}this.requestors=[]}},d.prototype.getImage=function(h){return this.images[h]},d.prototype.addImage=function(h,v){this._validate(h,v)&&(this.images[h]=v)},d.prototype._validate=function(h,v){var I=!0;return this._validateStretch(v.stretchX,v.data&&v.data.width)||(this.fire(new i.ErrorEvent(new Error('Image "'+h+'" has invalid "stretchX" value'))),I=!1),this._validateStretch(v.stretchY,v.data&&v.data.height)||(this.fire(new i.ErrorEvent(new Error('Image "'+h+'" has invalid "stretchY" value'))),I=!1),this._validateContent(v.content,v)||(this.fire(new i.ErrorEvent(new Error('Image "'+h+'" has invalid "content" value'))),I=!1),I},d.prototype._validateStretch=function(h,v){if(!h)return!0;for(var I=0,M=0,O=h;M<O.length;M+=1){var V=O[M];if(V[0]<I||V[1]<V[0]||v<V[1])return!1;I=V[1]}return!0},d.prototype._validateContent=function(h,v){return!(h&&(h.length!==4||h[0]<0||v.data.width<h[0]||h[1]<0||v.data.height<h[1]||h[2]<0||v.data.width<h[2]||h[3]<0||v.data.height<h[3]||h[2]<h[0]||h[3]<h[1]))},d.prototype.updateImage=function(h,v){v.version=this.images[h].version+1,this.images[h]=v,this.updatedImages[h]=!0},d.prototype.removeImage=function(h){var v=this.images[h];delete this.images[h],delete this.patterns[h],v.userImage&&v.userImage.onRemove&&v.userImage.onRemove()},d.prototype.listImages=function(){return Object.keys(this.images)},d.prototype.getImages=function(h,v){var I=!0;if(!this.isLoaded())for(var M=0,O=h;M<O.length;M+=1)this.images[O[M]]||(I=!1);this.isLoaded()||I?this._notify(h,v):this.requestors.push({ids:h,callback:v})},d.prototype._notify=function(h,v){for(var I={},M=0,O=h;M<O.length;M+=1){var V=O[M];this.images[V]||this.fire(new i.Event("styleimagemissing",{id:V}));var X=this.images[V];X?I[V]={data:X.data.clone(),pixelRatio:X.pixelRatio,sdf:X.sdf,version:X.version,stretchX:X.stretchX,stretchY:X.stretchY,content:X.content,hasRenderCallback:!!(X.userImage&&X.userImage.render)}:i.warnOnce('Image "'+V+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}v(null,I)},d.prototype.getPixelSize=function(){var h=this.atlasImage;return{width:h.width,height:h.height}},d.prototype.getPattern=function(h){var v=this.patterns[h],I=this.getImage(h);if(!I)return null;if(v&&v.position.version===I.version)return v.position;if(v)v.position.version=I.version;else{var M={w:I.data.width+2,h:I.data.height+2,x:0,y:0},O=new i.ImagePosition(M,I);this.patterns[h]={bin:M,position:O}}return this._updatePatternAtlas(),this.patterns[h].position},d.prototype.bind=function(h){var v=h.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new i.Texture(h,this.atlasImage,v.RGBA),this.atlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE)},d.prototype._updatePatternAtlas=function(){var h=[];for(var v in this.patterns)h.push(this.patterns[v].bin);var I=i.potpack(h),M=I.w,O=I.h,V=this.atlasImage;for(var X in V.resize({width:M||1,height:O||1}),this.patterns){var it=this.patterns[X].bin,vt=it.x+1,yt=it.y+1,xt=this.images[X].data,Bt=xt.width,Lt=xt.height;i.RGBAImage.copy(xt,V,{x:0,y:0},{x:vt,y:yt},{width:Bt,height:Lt}),i.RGBAImage.copy(xt,V,{x:0,y:Lt-1},{x:vt,y:yt-1},{width:Bt,height:1}),i.RGBAImage.copy(xt,V,{x:0,y:0},{x:vt,y:yt+Lt},{width:Bt,height:1}),i.RGBAImage.copy(xt,V,{x:Bt-1,y:0},{x:vt-1,y:yt},{width:1,height:Lt}),i.RGBAImage.copy(xt,V,{x:0,y:0},{x:vt+Bt,y:yt},{width:1,height:Lt})}this.dirty=!0},d.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},d.prototype.dispatchRenderCallbacks=function(h){for(var v=0,I=h;v<I.length;v+=1){var M=I[v];if(!this.callbackDispatchedThisFrame[M]){this.callbackDispatchedThisFrame[M]=!0;var O=this.images[M];F(O)&&this.updateImage(M,O)}}},d}(i.Evented),B=q,U=q,$=1e20;function q(c,d,h,v,I,M){this.fontSize=c||24,this.buffer=d===void 0?3:d,this.cutoff=v||.25,this.fontFamily=I||"sans-serif",this.fontWeight=M||"normal",this.radius=h||8;var O=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=O,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(O*O),this.gridInner=new Float64Array(O*O),this.f=new Float64Array(O),this.d=new Float64Array(O),this.z=new Float64Array(O+1),this.v=new Int16Array(O),this.middle=Math.round(O/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function tt(c,d,h,v,I,M,O){for(var V=0;V<d;V++){for(var X=0;X<h;X++)v[X]=c[X*d+V];for(Y(v,I,M,O,h),X=0;X<h;X++)c[X*d+V]=I[X]}for(X=0;X<h;X++){for(V=0;V<d;V++)v[V]=c[X*d+V];for(Y(v,I,M,O,d),V=0;V<d;V++)c[X*d+V]=Math.sqrt(I[V])}}function Y(c,d,h,v,I){h[0]=0,v[0]=-$,v[1]=+$;for(var M=1,O=0;M<I;M++){for(var V=(c[M]+M*M-(c[h[O]]+h[O]*h[O]))/(2*M-2*h[O]);V<=v[O];)O--,V=(c[M]+M*M-(c[h[O]]+h[O]*h[O]))/(2*M-2*h[O]);h[++O]=M,v[O]=V,v[O+1]=+$}for(M=0,O=0;M<I;M++){for(;v[O+1]<M;)O++;d[M]=(M-h[O])*(M-h[O])+c[h[O]]}}q.prototype.draw=function(c){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(c,this.buffer,this.middle);for(var d=this.ctx.getImageData(0,0,this.size,this.size),h=new Uint8ClampedArray(this.size*this.size),v=0;v<this.size*this.size;v++){var I=d.data[4*v+3]/255;this.gridOuter[v]=I===1?0:I===0?$:Math.pow(Math.max(0,.5-I),2),this.gridInner[v]=I===1?$:I===0?0:Math.pow(Math.max(0,I-.5),2)}for(tt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),tt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),v=0;v<this.size*this.size;v++)h[v]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[v]-this.gridInner[v])/this.radius+this.cutoff))));return h},B.default=U;var G=function(c,d){this.requestManager=c,this.localIdeographFontFamily=d,this.entries={}};G.prototype.setURL=function(c){this.url=c},G.prototype.getGlyphs=function(c,d){var h=this,v=[];for(var I in c)for(var M=0,O=c[I];M<O.length;M+=1)v.push({stack:I,id:O[M]});i.asyncAll(v,function(V,X){var it=V.stack,vt=V.id,yt=h.entries[it];yt||(yt=h.entries[it]={glyphs:{},requests:{},ranges:{}});var xt=yt.glyphs[vt];if(xt===void 0){if(xt=h._tinySDF(yt,it,vt))return yt.glyphs[vt]=xt,void X(null,{stack:it,id:vt,glyph:xt});var Bt=Math.floor(vt/256);if(256*Bt>65535)X(new Error("glyphs > 65535 not supported"));else if(yt.ranges[Bt])X(null,{stack:it,id:vt,glyph:xt});else{var Lt=yt.requests[Bt];Lt||(Lt=yt.requests[Bt]=[],G.loadGlyphRange(it,Bt,h.url,h.requestManager,function(Ht,Mt){if(Mt){for(var Gt in Mt)h._doesCharSupportLocalGlyph(+Gt)||(yt.glyphs[+Gt]=Mt[+Gt]);yt.ranges[Bt]=!0}for(var Qt=0,de=Lt;Qt<de.length;Qt+=1)(0,de[Qt])(Ht,Mt);delete yt.requests[Bt]})),Lt.push(function(Ht,Mt){Ht?X(Ht):Mt&&X(null,{stack:it,id:vt,glyph:Mt[vt]||null})})}}else X(null,{stack:it,id:vt,glyph:xt})},function(V,X){if(V)d(V);else if(X){for(var it={},vt=0,yt=X;vt<yt.length;vt+=1){var xt=yt[vt],Bt=xt.stack,Lt=xt.id,Ht=xt.glyph;(it[Bt]||(it[Bt]={}))[Lt]=Ht&&{id:Ht.id,bitmap:Ht.bitmap.clone(),metrics:Ht.metrics}}d(null,it)}})},G.prototype._doesCharSupportLocalGlyph=function(c){return!!this.localIdeographFontFamily&&(i.isChar["CJK Unified Ideographs"](c)||i.isChar["Hangul Syllables"](c)||i.isChar.Hiragana(c)||i.isChar.Katakana(c))},G.prototype._tinySDF=function(c,d,h){var v=this.localIdeographFontFamily;if(v&&this._doesCharSupportLocalGlyph(h)){var I=c.tinySDF;if(!I){var M="400";/bold/i.test(d)?M="900":/medium/i.test(d)?M="500":/light/i.test(d)&&(M="200"),I=c.tinySDF=new G.TinySDF(24,3,8,.25,v,M)}return{id:h,bitmap:new i.AlphaImage({width:30,height:30},I.draw(String.fromCharCode(h))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},G.loadGlyphRange=function(c,d,h,v,I){var M=256*d,O=M+255,V=v.transformRequest(v.normalizeGlyphsURL(h).replace("{fontstack}",c).replace("{range}",M+"-"+O),i.ResourceType.Glyphs);i.getArrayBuffer(V,function(X,it){if(X)I(X);else if(it){for(var vt={},yt=0,xt=i.parseGlyphPBF(it);yt<xt.length;yt+=1){var Bt=xt[yt];vt[Bt.id]=Bt}I(null,vt)}})},G.TinySDF=B;var rt=function(){this.specification=i.styleSpec.light.position};rt.prototype.possiblyEvaluate=function(c,d){return i.sphericalToCartesian(c.expression.evaluate(d))},rt.prototype.interpolate=function(c,d,h){return{x:i.number(c.x,d.x,h),y:i.number(c.y,d.y,h),z:i.number(c.z,d.z,h)}};var pt=new i.Properties({anchor:new i.DataConstantProperty(i.styleSpec.light.anchor),position:new rt,color:new i.DataConstantProperty(i.styleSpec.light.color),intensity:new i.DataConstantProperty(i.styleSpec.light.intensity)}),Q=function(c){function d(h){c.call(this),this._transitionable=new i.Transitionable(pt),this.setLight(h),this._transitioning=this._transitionable.untransitioned()}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getLight=function(){return this._transitionable.serialize()},d.prototype.setLight=function(h,v){if(v===void 0&&(v={}),!this._validate(i.validateLight,h,v))for(var I in h){var M=h[I];i.endsWith(I,"-transition")?this._transitionable.setTransition(I.slice(0,-11),M):this._transitionable.setValue(I,M)}},d.prototype.updateTransitions=function(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)},d.prototype.hasTransition=function(){return this._transitioning.hasTransition()},d.prototype.recalculate=function(h){this.properties=this._transitioning.possiblyEvaluate(h)},d.prototype._validate=function(h,v,I){return(!I||I.validate!==!1)&&i.emitValidationErrors(this,h.call(i.validateStyle,i.extend({value:v,style:{glyphs:!0,sprite:!0},styleSpec:i.styleSpec})))},d}(i.Evented),ot=function(c,d){this.width=c,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};ot.prototype.getDash=function(c,d){var h=c.join(",")+String(d);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(c,d)),this.dashEntry[h]},ot.prototype.getDashRanges=function(c,d,h){var v=[],I=c.length%2==1?-c[c.length-1]*h:0,M=c[0]*h,O=!0;v.push({left:I,right:M,isDash:O,zeroLength:c[0]===0});for(var V=c[0],X=1;X<c.length;X++){var it=c[X];v.push({left:I=V*h,right:M=(V+=it)*h,isDash:O=!O,zeroLength:it===0})}return v},ot.prototype.addRoundDash=function(c,d,h){for(var v=d/2,I=-h;I<=h;I++)for(var M=this.width*(this.nextRow+h+I),O=0,V=c[O],X=0;X<this.width;X++){X/V.right>1&&(V=c[++O]);var it=Math.abs(X-V.left),vt=Math.abs(X-V.right),yt=Math.min(it,vt),xt=void 0,Bt=I/h*(v+1);if(V.isDash){var Lt=v-Math.abs(Bt);xt=Math.sqrt(yt*yt+Lt*Lt)}else xt=v-Math.sqrt(yt*yt+Bt*Bt);this.data[M+X]=Math.max(0,Math.min(255,xt+128))}},ot.prototype.addRegularDash=function(c){for(var d=c.length-1;d>=0;--d){var h=c[d],v=c[d+1];h.zeroLength?c.splice(d,1):v&&v.isDash===h.isDash&&(v.left=h.left,c.splice(d,1))}var I=c[0],M=c[c.length-1];I.isDash===M.isDash&&(I.left=M.left-this.width,M.right=I.right+this.width);for(var O=this.width*this.nextRow,V=0,X=c[V],it=0;it<this.width;it++){it/X.right>1&&(X=c[++V]);var vt=Math.abs(it-X.left),yt=Math.abs(it-X.right),xt=Math.min(vt,yt);this.data[O+it]=Math.max(0,Math.min(255,(X.isDash?xt:-xt)+128))}},ot.prototype.addDash=function(c,d){var h=d?7:0,v=2*h+1;if(this.nextRow+v>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var I=0,M=0;M<c.length;M++)I+=c[M];if(I!==0){var O=this.width/I,V=this.getDashRanges(c,this.width,O);d?this.addRoundDash(V,O,h):this.addRegularDash(V)}var X={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:I};return this.nextRow+=v,this.dirty=!0,X},ot.prototype.bind=function(c){var d=c.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))};var Z=function c(d,h){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var v=this.workerPool.acquire(this.id),I=0;I<v.length;I++){var M=new c.Actor(v[I],h,this.id);M.name="Worker "+I,this.actors.push(M)}};function Kt(c,d,h){var v=function(I,M){if(I)return h(I);if(M){var O=i.pick(i.extend(M,c),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);M.vector_layers&&(O.vectorLayers=M.vector_layers,O.vectorLayerIds=O.vectorLayers.map(function(V){return V.id})),O.tiles=d.canonicalizeTileset(O,c.url),h(null,O)}};return c.url?i.getJSON(d.transformRequest(d.normalizeSourceURL(c.url),i.ResourceType.Source),v):i.browser.frame(function(){return v(null,c)})}Z.prototype.broadcast=function(c,d,h){i.asyncAll(this.actors,function(v,I){v.send(c,d,I)},h=h||function(){})},Z.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Z.prototype.remove=function(){this.actors.forEach(function(c){c.remove()}),this.actors=[],this.workerPool.release(this.id)},Z.Actor=i.Actor;var Ft=function(c,d,h){this.bounds=i.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=d||0,this.maxzoom=h||24};Ft.prototype.validateBounds=function(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]},Ft.prototype.contains=function(c){var d=Math.pow(2,c.z),h=Math.floor(i.mercatorXfromLng(this.bounds.getWest())*d),v=Math.floor(i.mercatorYfromLat(this.bounds.getNorth())*d),I=Math.ceil(i.mercatorXfromLng(this.bounds.getEast())*d),M=Math.ceil(i.mercatorYfromLat(this.bounds.getSouth())*d);return c.x>=h&&c.x<I&&c.y>=v&&c.y<M};var Tt=function(c){function d(h,v,I,M){if(c.call(this),this.id=h,this.dispatcher=I,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.extend(this,i.pick(v,["url","scheme","tileSize","promoteId"])),this._options=i.extend({type:"vector"},v),this._collectResourceTiming=v.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.load=function(){var h=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Kt(this._options,this.map._requestManager,function(v,I){h._tileJSONRequest=null,h._loaded=!0,v?h.fire(new i.ErrorEvent(v)):I&&(i.extend(h,I),I.bounds&&(h.tileBounds=new Ft(I.bounds,h.minzoom,h.maxzoom)),i.postTurnstileEvent(I.tiles,h.map._requestManager._customAccessToken),i.postMapLoadEvent(I.tiles,h.map._getMapId(),h.map._requestManager._skuToken,h.map._requestManager._customAccessToken),h.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),h.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},d.prototype.loaded=function(){return this._loaded},d.prototype.hasTile=function(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)},d.prototype.onAdd=function(h){this.map=h,this.load()},d.prototype.setSourceProperty=function(h){this._tileJSONRequest&&this._tileJSONRequest.cancel(),h(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},d.prototype.setTiles=function(h){var v=this;return this.setSourceProperty(function(){v._options.tiles=h}),this},d.prototype.setUrl=function(h){var v=this;return this.setSourceProperty(function(){v.url=h,v._options.url=h}),this},d.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},d.prototype.serialize=function(){return i.extend({},this._options)},d.prototype.loadTile=function(h,v){var I=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme)),M={request:this.map._requestManager.transformRequest(I,i.ResourceType.Tile),uid:h.uid,tileID:h.tileID,zoom:h.tileID.overscaledZ,tileSize:this.tileSize*h.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function O(V,X){return delete h.request,h.aborted?v(null):V&&V.status!==404?v(V):(X&&X.resourceTiming&&(h.resourceTiming=X.resourceTiming),this.map._refreshExpiredTiles&&X&&h.setExpiryData(X),h.loadVectorData(X,this.map.painter),i.cacheEntryPossiblyAdded(this.dispatcher),v(null),void(h.reloadCallback&&(this.loadTile(h,h.reloadCallback),h.reloadCallback=null)))}M.request.collectResourceTiming=this._collectResourceTiming,h.actor&&h.state!=="expired"?h.state==="loading"?h.reloadCallback=v:h.request=h.actor.send("reloadTile",M,O.bind(this)):(h.actor=this.dispatcher.getActor(),h.request=h.actor.send("loadTile",M,O.bind(this)))},d.prototype.abortTile=function(h){h.request&&(h.request.cancel(),delete h.request),h.actor&&h.actor.send("abortTile",{uid:h.uid,type:this.type,source:this.id},void 0)},d.prototype.unloadTile=function(h){h.unloadVectorData(),h.actor&&h.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id},void 0)},d.prototype.hasTransition=function(){return!1},d}(i.Evented),ie=function(c){function d(h,v,I,M){c.call(this),this.id=h,this.dispatcher=I,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({type:"raster"},v),i.extend(this,i.pick(v,["url","scheme","tileSize"]))}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.load=function(){var h=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Kt(this._options,this.map._requestManager,function(v,I){h._tileJSONRequest=null,h._loaded=!0,v?h.fire(new i.ErrorEvent(v)):I&&(i.extend(h,I),I.bounds&&(h.tileBounds=new Ft(I.bounds,h.minzoom,h.maxzoom)),i.postTurnstileEvent(I.tiles),i.postMapLoadEvent(I.tiles,h.map._getMapId(),h.map._requestManager._skuToken),h.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),h.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},d.prototype.loaded=function(){return this._loaded},d.prototype.onAdd=function(h){this.map=h,this.load()},d.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},d.prototype.serialize=function(){return i.extend({},this._options)},d.prototype.hasTile=function(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)},d.prototype.loadTile=function(h,v){var I=this,M=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);h.request=i.getImage(this.map._requestManager.transformRequest(M,i.ResourceType.Tile),function(O,V){if(delete h.request,h.aborted)h.state="unloaded",v(null);else if(O)h.state="errored",v(O);else if(V){I.map._refreshExpiredTiles&&h.setExpiryData(V),delete V.cacheControl,delete V.expires;var X=I.map.painter.context,it=X.gl;h.texture=I.map.painter.getTileTexture(V.width),h.texture?h.texture.update(V,{useMipmap:!0}):(h.texture=new i.Texture(X,V,it.RGBA,{useMipmap:!0}),h.texture.bind(it.LINEAR,it.CLAMP_TO_EDGE,it.LINEAR_MIPMAP_NEAREST),X.extTextureFilterAnisotropic&&it.texParameterf(it.TEXTURE_2D,X.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,X.extTextureFilterAnisotropicMax)),h.state="loaded",i.cacheEntryPossiblyAdded(I.dispatcher),v(null)}})},d.prototype.abortTile=function(h,v){h.request&&(h.request.cancel(),delete h.request),v()},d.prototype.unloadTile=function(h,v){h.texture&&this.map.painter.saveTileTexture(h.texture),v()},d.prototype.hasTransition=function(){return!1},d}(i.Evented),ue=function(c){function d(h,v,I,M){c.call(this,h,v,I,M),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({type:"raster-dem"},v),this.encoding=v.encoding||"mapbox"}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},d.prototype.loadTile=function(h,v){var I=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function M(O,V){O&&(h.state="errored",v(O)),V&&(h.dem=V,h.needsHillshadePrepare=!0,h.state="loaded",v(null))}h.request=i.getImage(this.map._requestManager.transformRequest(I,i.ResourceType.Tile),(function(O,V){if(delete h.request,h.aborted)h.state="unloaded",v(null);else if(O)h.state="errored",v(O);else if(V){this.map._refreshExpiredTiles&&h.setExpiryData(V),delete V.cacheControl,delete V.expires;var X=i.window.ImageBitmap&&V instanceof i.window.ImageBitmap&&i.offscreenCanvasSupported()?V:i.browser.getImageData(V,1),it={uid:h.uid,coord:h.tileID,source:this.id,rawImageData:X,encoding:this.encoding};h.actor&&h.state!=="expired"||(h.actor=this.dispatcher.getActor(),h.actor.send("loadDEMTile",it,M.bind(this)))}}).bind(this)),h.neighboringTiles=this._getNeighboringTiles(h.tileID)},d.prototype._getNeighboringTiles=function(h){var v=h.canonical,I=Math.pow(2,v.z),M=(v.x-1+I)%I,O=v.x===0?h.wrap-1:h.wrap,V=(v.x+1+I)%I,X=v.x+1===I?h.wrap+1:h.wrap,it={};return it[new i.OverscaledTileID(h.overscaledZ,O,v.z,M,v.y).key]={backfilled:!1},it[new i.OverscaledTileID(h.overscaledZ,X,v.z,V,v.y).key]={backfilled:!1},v.y>0&&(it[new i.OverscaledTileID(h.overscaledZ,O,v.z,M,v.y-1).key]={backfilled:!1},it[new i.OverscaledTileID(h.overscaledZ,h.wrap,v.z,v.x,v.y-1).key]={backfilled:!1},it[new i.OverscaledTileID(h.overscaledZ,X,v.z,V,v.y-1).key]={backfilled:!1}),v.y+1<I&&(it[new i.OverscaledTileID(h.overscaledZ,O,v.z,M,v.y+1).key]={backfilled:!1},it[new i.OverscaledTileID(h.overscaledZ,h.wrap,v.z,v.x,v.y+1).key]={backfilled:!1},it[new i.OverscaledTileID(h.overscaledZ,X,v.z,V,v.y+1).key]={backfilled:!1}),it},d.prototype.unloadTile=function(h){h.demTexture&&this.map.painter.saveTileTexture(h.demTexture),h.fbo&&(h.fbo.destroy(),delete h.fbo),h.dem&&delete h.dem,delete h.neighboringTiles,h.state="unloaded",h.actor&&h.actor.send("removeDEMTile",{uid:h.uid,source:this.id})},d}(ie),je=function(c){function d(h,v,I,M){c.call(this),this.id=h,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=I.getActor(),this.setEventedParent(M),this._data=v.data,this._options=i.extend({},v),this._collectResourceTiming=v.collectResourceTiming,this._resourceTiming=[],v.maxzoom!==void 0&&(this.maxzoom=v.maxzoom),v.type&&(this.type=v.type),v.attribution&&(this.attribution=v.attribution),this.promoteId=v.promoteId;var O=i.EXTENT/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:v.cluster||!1,geojsonVtOptions:{buffer:(v.buffer!==void 0?v.buffer:128)*O,tolerance:(v.tolerance!==void 0?v.tolerance:.375)*O,extent:i.EXTENT,maxZoom:this.maxzoom,lineMetrics:v.lineMetrics||!1,generateId:v.generateId||!1},superclusterOptions:{maxZoom:v.clusterMaxZoom!==void 0?Math.min(v.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,v.clusterMinPoints||2),extent:i.EXTENT,radius:(v.clusterRadius||50)*O,log:!1,generateId:v.generateId||!1},clusterProperties:v.clusterProperties,filter:v.filter},v.workerOptions)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.load=function(){var h=this;this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(v){if(v)h.fire(new i.ErrorEvent(v));else{var I={dataType:"source",sourceDataType:"metadata"};h._collectResourceTiming&&h._resourceTiming&&h._resourceTiming.length>0&&(I.resourceTiming=h._resourceTiming,h._resourceTiming=[]),h.fire(new i.Event("data",I))}})},d.prototype.onAdd=function(h){this.map=h,this.load()},d.prototype.setData=function(h){var v=this;return this._data=h,this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(I){if(I)v.fire(new i.ErrorEvent(I));else{var M={dataType:"source",sourceDataType:"content"};v._collectResourceTiming&&v._resourceTiming&&v._resourceTiming.length>0&&(M.resourceTiming=v._resourceTiming,v._resourceTiming=[]),v.fire(new i.Event("data",M))}}),this},d.prototype.getClusterExpansionZoom=function(h,v){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:h,source:this.id},v),this},d.prototype.getClusterChildren=function(h,v){return this.actor.send("geojson.getClusterChildren",{clusterId:h,source:this.id},v),this},d.prototype.getClusterLeaves=function(h,v,I,M){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:h,limit:v,offset:I},M),this},d.prototype._updateWorkerData=function(h){var v=this;this._loaded=!1;var I=i.extend({},this.workerOptions),M=this._data;typeof M=="string"?(I.request=this.map._requestManager.transformRequest(i.browser.resolveURL(M),i.ResourceType.Source),I.request.collectResourceTiming=this._collectResourceTiming):I.data=JSON.stringify(M),this.actor.send(this.type+".loadData",I,function(O,V){v._removed||V&&V.abandoned||(v._loaded=!0,V&&V.resourceTiming&&V.resourceTiming[v.id]&&(v._resourceTiming=V.resourceTiming[v.id].slice(0)),v.actor.send(v.type+".coalesce",{source:I.source},null),h(O))})},d.prototype.loaded=function(){return this._loaded},d.prototype.loadTile=function(h,v){var I=this,M=h.actor?"reloadTile":"loadTile";h.actor=this.actor,h.request=this.actor.send(M,{type:this.type,uid:h.uid,tileID:h.tileID,zoom:h.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(O,V){return delete h.request,h.unloadVectorData(),h.aborted?v(null):O?v(O):(h.loadVectorData(V,I.map.painter,M==="reloadTile"),v(null))})},d.prototype.abortTile=function(h){h.request&&(h.request.cancel(),delete h.request),h.aborted=!0},d.prototype.unloadTile=function(h){h.unloadVectorData(),this.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id})},d.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},d.prototype.serialize=function(){return i.extend({},this._options,{type:this.type,data:this._data})},d.prototype.hasTransition=function(){return!1},d}(i.Evented),jt=i.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ut=function(c){function d(h,v,I,M){c.call(this),this.id=h,this.dispatcher=I,this.coordinates=v.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=v}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.load=function(h,v){var I=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this.url=this.options.url,i.getImage(this.map._requestManager.transformRequest(this.url,i.ResourceType.Image),function(M,O){I._loaded=!0,M?I.fire(new i.ErrorEvent(M)):O&&(I.image=O,h&&(I.coordinates=h),v&&v(),I._finishLoading())})},d.prototype.loaded=function(){return this._loaded},d.prototype.updateImage=function(h){var v=this;return this.image&&h.url?(this.options.url=h.url,this.load(h.coordinates,function(){v.texture=null}),this):this},d.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})))},d.prototype.onAdd=function(h){this.map=h,this.load()},d.prototype.setCoordinates=function(h){var v=this;this.coordinates=h;var I=h.map(i.MercatorCoordinate.fromLngLat);this.tileID=function(O){for(var V=1/0,X=1/0,it=-1/0,vt=-1/0,yt=0,xt=O;yt<xt.length;yt+=1){var Bt=xt[yt];V=Math.min(V,Bt.x),X=Math.min(X,Bt.y),it=Math.max(it,Bt.x),vt=Math.max(vt,Bt.y)}var Lt=Math.max(it-V,vt-X),Ht=Math.max(0,Math.floor(-Math.log(Lt)/Math.LN2)),Mt=Math.pow(2,Ht);return new i.CanonicalTileID(Ht,Math.floor((V+it)/2*Mt),Math.floor((X+vt)/2*Mt))}(I),this.minzoom=this.maxzoom=this.tileID.z;var M=I.map(function(O){return v.tileID.getTilePoint(O)._round()});return this._boundsArray=new i.StructArrayLayout4i8,this._boundsArray.emplaceBack(M[0].x,M[0].y,0,0),this._boundsArray.emplaceBack(M[1].x,M[1].y,i.EXTENT,0),this._boundsArray.emplaceBack(M[3].x,M[3].y,0,i.EXTENT),this._boundsArray.emplaceBack(M[2].x,M[2].y,i.EXTENT,i.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})),this},d.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var h=this.map.painter.context,v=h.gl;for(var I in this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,jt.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new i.Texture(h,this.image,v.RGBA),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE)),this.tiles){var M=this.tiles[I];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture)}}},d.prototype.loadTile=function(h,v){this.tileID&&this.tileID.equals(h.tileID.canonical)?(this.tiles[String(h.tileID.wrap)]=h,h.buckets={},v(null)):(h.state="errored",v(null))},d.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},d.prototype.hasTransition=function(){return!1},d}(i.Evented),xe=function(c){function d(h,v,I,M){c.call(this,h,v,I,M),this.roundZoom=!0,this.type="video",this.options=v}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.load=function(){var h=this;this._loaded=!1;var v=this.options;this.urls=[];for(var I=0,M=v.urls;I<M.length;I+=1)this.urls.push(this.map._requestManager.transformRequest(M[I],i.ResourceType.Source).url);i.getVideo(this.urls,function(O,V){h._loaded=!0,O?h.fire(new i.ErrorEvent(O)):V&&(h.video=V,h.video.loop=!0,h.video.setAttribute("playsinline",""),h.video.addEventListener("playing",function(){h.map.triggerRepaint()}),h.map&&h.video.play(),h._finishLoading())})},d.prototype.pause=function(){this.video&&this.video.pause()},d.prototype.play=function(){this.video&&this.video.play()},d.prototype.seek=function(h){if(this.video){var v=this.video.seekable;h<v.start(0)||h>v.end(0)?this.fire(new i.ErrorEvent(new i.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+v.start(0)+" and "+v.end(0)+"-second mark."))):this.video.currentTime=h}},d.prototype.getVideo=function(){return this.video},d.prototype.onAdd=function(h){this.map||(this.map=h,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},d.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var h=this.map.painter.context,v=h.gl;for(var I in this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,jt.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE),v.texSubImage2D(v.TEXTURE_2D,0,0,0,v.RGBA,v.UNSIGNED_BYTE,this.video)):(this.texture=new i.Texture(h,this.video,v.RGBA),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE)),this.tiles){var M=this.tiles[I];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture)}}},d.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},d.prototype.hasTransition=function(){return this.video&&!this.video.paused},d}(Ut),Fe=function(c){function d(h,v,I,M){c.call(this,h,v,I,M),v.coordinates?Array.isArray(v.coordinates)&&v.coordinates.length===4&&!v.coordinates.some(function(O){return!Array.isArray(O)||O.length!==2||O.some(function(V){return typeof V!="number"})})||this.fire(new i.ErrorEvent(new i.ValidationError("sources."+h,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+h,null,'missing required property "coordinates"'))),v.animate&&typeof v.animate!="boolean"&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+h,null,'optional "animate" property must be a boolean value'))),v.canvas?typeof v.canvas=="string"||v.canvas instanceof i.window.HTMLCanvasElement||this.fire(new i.ErrorEvent(new i.ValidationError("sources."+h,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+h,null,'missing required property "canvas"'))),this.options=v,this.animate=v.animate===void 0||v.animate}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof i.window.HTMLCanvasElement?this.options.canvas:i.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},d.prototype.getCanvas=function(){return this.canvas},d.prototype.onAdd=function(h){this.map=h,this.load(),this.canvas&&this.animate&&this.play()},d.prototype.onRemove=function(){this.pause()},d.prototype.prepare=function(){var h=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,h=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,h=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var v=this.map.painter.context,I=v.gl;for(var M in this.boundsBuffer||(this.boundsBuffer=v.createVertexBuffer(this._boundsArray,jt.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(h||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.Texture(v,this.canvas,I.RGBA,{premultiply:!0}),this.tiles){var O=this.tiles[M];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture)}}},d.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},d.prototype.hasTransition=function(){return this._playing},d.prototype._hasInvalidDimensions=function(){for(var h=0,v=[this.canvas.width,this.canvas.height];h<v.length;h+=1){var I=v[h];if(isNaN(I)||I<=0)return!0}return!1},d}(Ut),we={vector:Tt,raster:ie,"raster-dem":ue,geojson:je,video:xe,image:Ut,canvas:Fe};function qe(c,d){var h=i.identity([]);return i.translate(h,h,[1,1,0]),i.scale(h,h,[.5*c.width,.5*c.height,1]),i.multiply(h,h,c.calculatePosMatrix(d.toUnwrapped()))}function fe(c,d,h,v,I,M){var O=function(Ht,Mt,Gt){if(Ht)for(var Qt=0,de=Ht;Qt<de.length;Qt+=1){var ke=Mt[de[Qt]];if(ke&&ke.source===Gt&&ke.type==="fill-extrusion")return!0}else for(var Me in Mt){var Oe=Mt[Me];if(Oe.source===Gt&&Oe.type==="fill-extrusion")return!0}return!1}(I&&I.layers,d,c.id),V=M.maxPitchScaleFactor(),X=c.tilesIn(v,V,O);X.sort(ge);for(var it=[],vt=0,yt=X;vt<yt.length;vt+=1){var xt=yt[vt];it.push({wrappedTileID:xt.tileID.wrapped().key,queryResults:xt.tile.queryRenderedFeatures(d,h,c._state,xt.queryGeometry,xt.cameraQueryGeometry,xt.scale,I,M,V,qe(c.transform,xt.tileID))})}var Bt=function(Ht){for(var Mt={},Gt={},Qt=0,de=Ht;Qt<de.length;Qt+=1){var ke=de[Qt],Me=ke.queryResults,Oe=ke.wrappedTileID,He=Gt[Oe]=Gt[Oe]||{};for(var Xe in Me)for(var rn=Me[Xe],yn=He[Xe]=He[Xe]||{},On=Mt[Xe]=Mt[Xe]||[],Xn=0,Kn=rn;Xn<Kn.length;Xn+=1){var Xr=Kn[Xn];yn[Xr.featureIndex]||(yn[Xr.featureIndex]=!0,On.push(Xr))}}return Mt}(it);for(var Lt in Bt)Bt[Lt].forEach(function(Ht){var Mt=Ht.feature,Gt=c.getFeatureState(Mt.layer["source-layer"],Mt.id);Mt.source=Mt.layer.source,Mt.layer["source-layer"]&&(Mt.sourceLayer=Mt.layer["source-layer"]),Mt.state=Gt});return Bt}function ge(c,d){var h=c.tileID,v=d.tileID;return h.overscaledZ-v.overscaledZ||h.canonical.y-v.canonical.y||h.wrap-v.wrap||h.canonical.x-v.canonical.x}var ne=function(c,d){this.max=c,this.onRemove=d,this.reset()};ne.prototype.reset=function(){for(var c in this.data)for(var d=0,h=this.data[c];d<h.length;d+=1){var v=h[d];v.timeout&&clearTimeout(v.timeout),this.onRemove(v.value)}return this.data={},this.order=[],this},ne.prototype.add=function(c,d,h){var v=this,I=c.wrapped().key;this.data[I]===void 0&&(this.data[I]=[]);var M={value:d,timeout:void 0};if(h!==void 0&&(M.timeout=setTimeout(function(){v.remove(c,M)},h)),this.data[I].push(M),this.order.push(I),this.order.length>this.max){var O=this._getAndRemoveByKey(this.order[0]);O&&this.onRemove(O)}return this},ne.prototype.has=function(c){return c.wrapped().key in this.data},ne.prototype.getAndRemove=function(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null},ne.prototype._getAndRemoveByKey=function(c){var d=this.data[c].shift();return d.timeout&&clearTimeout(d.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),d.value},ne.prototype.getByKey=function(c){var d=this.data[c];return d?d[0].value:null},ne.prototype.get=function(c){return this.has(c)?this.data[c.wrapped().key][0].value:null},ne.prototype.remove=function(c,d){if(!this.has(c))return this;var h=c.wrapped().key,v=d===void 0?0:this.data[h].indexOf(d),I=this.data[h][v];return this.data[h].splice(v,1),I.timeout&&clearTimeout(I.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(I.value),this.order.splice(this.order.indexOf(h),1),this},ne.prototype.setMaxSize=function(c){for(this.max=c;this.order.length>this.max;){var d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this},ne.prototype.filter=function(c){var d=[];for(var h in this.data)for(var v=0,I=this.data[h];v<I.length;v+=1){var M=I[v];c(M.value)||d.push(M)}for(var O=0,V=d;O<V.length;O+=1){var X=V[O];this.remove(X.value.tileID,X)}};var Se=function(c,d,h){this.context=c;var v=c.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer};Se.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Se.prototype.updateData=function(c){var d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)},Se.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var We={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},In=function(c,d,h,v){this.length=d.length,this.attributes=h,this.itemSize=d.bytesPerElement,this.dynamicDraw=v,this.context=c;var I=c.gl;this.buffer=I.createBuffer(),c.bindVertexBuffer.set(this.buffer),I.bufferData(I.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer};In.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},In.prototype.updateData=function(c){var d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,c.arrayBuffer)},In.prototype.enableAttributes=function(c,d){for(var h=0;h<this.attributes.length;h++){var v=d.attributes[this.attributes[h].name];v!==void 0&&c.enableVertexAttribArray(v)}},In.prototype.setVertexAttribPointers=function(c,d,h){for(var v=0;v<this.attributes.length;v++){var I=this.attributes[v],M=d.attributes[I.name];M!==void 0&&c.vertexAttribPointer(M,I.components,c[We[I.type]],!1,this.itemSize,I.offset+this.itemSize*(h||0))}},In.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var _t=function(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};_t.prototype.get=function(){return this.current},_t.prototype.set=function(c){},_t.prototype.getDefault=function(){return this.default},_t.prototype.setDefault=function(){this.set(this.default)};var N=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return i.Color.transparent},d.prototype.set=function(h){var v=this.current;(h.r!==v.r||h.g!==v.g||h.b!==v.b||h.a!==v.a||this.dirty)&&(this.gl.clearColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)},d}(_t),Et=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return 1},d.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.clearDepth(h),this.current=h,this.dirty=!1)},d}(_t),wt=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return 0},d.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.clearStencil(h),this.current=h,this.dirty=!1)},d}(_t),ht=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return[!0,!0,!0,!0]},d.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2]||h[3]!==v[3]||this.dirty)&&(this.gl.colorMask(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)},d}(_t),lt=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return!0},d.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.depthMask(h),this.current=h,this.dirty=!1)},d}(_t),Pt=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return 255},d.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.stencilMask(h),this.current=h,this.dirty=!1)},d}(_t),Wt=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},d.prototype.set=function(h){var v=this.current;(h.func!==v.func||h.ref!==v.ref||h.mask!==v.mask||this.dirty)&&(this.gl.stencilFunc(h.func,h.ref,h.mask),this.current=h,this.dirty=!1)},d}(_t),ee=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){var h=this.gl;return[h.KEEP,h.KEEP,h.KEEP]},d.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2]||this.dirty)&&(this.gl.stencilOp(h[0],h[1],h[2]),this.current=h,this.dirty=!1)},d}(_t),Dt=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return!1},d.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;h?v.enable(v.STENCIL_TEST):v.disable(v.STENCIL_TEST),this.current=h,this.dirty=!1}},d}(_t),ve=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return[0,1]},d.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||this.dirty)&&(this.gl.depthRange(h[0],h[1]),this.current=h,this.dirty=!1)},d}(_t),Te=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return!1},d.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;h?v.enable(v.DEPTH_TEST):v.disable(v.DEPTH_TEST),this.current=h,this.dirty=!1}},d}(_t),Ae=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return this.gl.LESS},d.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.depthFunc(h),this.current=h,this.dirty=!1)},d}(_t),De=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return!1},d.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;h?v.enable(v.BLEND):v.disable(v.BLEND),this.current=h,this.dirty=!1}},d}(_t),un=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){var h=this.gl;return[h.ONE,h.ZERO]},d.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||this.dirty)&&(this.gl.blendFunc(h[0],h[1]),this.current=h,this.dirty=!1)},d}(_t),gn=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return i.Color.transparent},d.prototype.set=function(h){var v=this.current;(h.r!==v.r||h.g!==v.g||h.b!==v.b||h.a!==v.a||this.dirty)&&(this.gl.blendColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)},d}(_t),re=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return this.gl.FUNC_ADD},d.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.blendEquation(h),this.current=h,this.dirty=!1)},d}(_t),ce=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return!1},d.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;h?v.enable(v.CULL_FACE):v.disable(v.CULL_FACE),this.current=h,this.dirty=!1}},d}(_t),_e=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return this.gl.BACK},d.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.cullFace(h),this.current=h,this.dirty=!1)},d}(_t),Ue=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return this.gl.CCW},d.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.frontFace(h),this.current=h,this.dirty=!1)},d}(_t),en=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.useProgram(h),this.current=h,this.dirty=!1)},d}(_t),Un=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return this.gl.TEXTURE0},d.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.activeTexture(h),this.current=h,this.dirty=!1)},d}(_t),lr=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){var h=this.gl;return[0,0,h.drawingBufferWidth,h.drawingBufferHeight]},d.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2]||h[3]!==v[3]||this.dirty)&&(this.gl.viewport(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)},d}(_t),Gn=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.bindFramebuffer(v.FRAMEBUFFER,h),this.current=h,this.dirty=!1}},d}(_t),zr=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.bindRenderbuffer(v.RENDERBUFFER,h),this.current=h,this.dirty=!1}},d}(_t),ur=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.bindTexture(v.TEXTURE_2D,h),this.current=h,this.dirty=!1}},d}(_t),Fn=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.bindBuffer(v.ARRAY_BUFFER,h),this.current=h,this.dirty=!1}},d}(_t),Jn=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(h){var v=this.gl;v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,h),this.current=h,this.dirty=!1},d}(_t),gr=function(c){function d(h){c.call(this,h),this.vao=h.extVertexArrayObject}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(h){this.vao&&(h!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(h),this.current=h,this.dirty=!1)},d}(_t),rr=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return 4},d.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.pixelStorei(v.UNPACK_ALIGNMENT,h),this.current=h,this.dirty=!1}},d}(_t),Mi=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return!1},d.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h),this.current=h,this.dirty=!1}},d}(_t),Ns=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return!1},d.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,h),this.current=h,this.dirty=!1}},d}(_t),Zi=function(c){function d(h,v){c.call(this,h),this.context=h,this.parent=v}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d}(_t),et=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.setDirty=function(){this.dirty=!0},d.prototype.set=function(h){if(h!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var v=this.gl;v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,h,0),this.current=h,this.dirty=!1}},d}(Zi),ut=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.set=function(h){if(h!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var v=this.gl;v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.RENDERBUFFER,h),this.current=h,this.dirty=!1}},d}(Zi),dt=function(c,d,h,v){this.context=c,this.width=d,this.height=h;var I=this.framebuffer=c.gl.createFramebuffer();this.colorAttachment=new et(c,I),v&&(this.depthAttachment=new ut(c,I))};dt.prototype.destroy=function(){var c=this.context.gl,d=this.colorAttachment.get();if(d&&c.deleteTexture(d),this.depthAttachment){var h=this.depthAttachment.get();h&&c.deleteRenderbuffer(h)}c.deleteFramebuffer(this.framebuffer)};var At=function(c,d,h){this.func=c,this.mask=d,this.range=h};At.ReadOnly=!1,At.ReadWrite=!0,At.disabled=new At(519,At.ReadOnly,[0,1]);var Rt=function(c,d,h,v,I,M){this.test=c,this.ref=d,this.mask=h,this.fail=v,this.depthFail=I,this.pass=M};Rt.disabled=new Rt({func:519,mask:0},0,0,7680,7680,7680);var qt=function(c,d,h){this.blendFunction=c,this.blendColor=d,this.mask=h};qt.disabled=new qt(qt.Replace=[1,0],i.Color.transparent,[!1,!1,!1,!1]),qt.unblended=new qt(qt.Replace,i.Color.transparent,[!0,!0,!0,!0]),qt.alphaBlended=new qt([1,771],i.Color.transparent,[!0,!0,!0,!0]);var te=function(c,d,h){this.enable=c,this.mode=d,this.frontFace=h};te.disabled=new te(!1,1029,2305),te.backCCW=new te(!0,1029,2305);var gt=function(c){this.gl=c,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new N(this),this.clearDepth=new Et(this),this.clearStencil=new wt(this),this.colorMask=new ht(this),this.depthMask=new lt(this),this.stencilMask=new Pt(this),this.stencilFunc=new Wt(this),this.stencilOp=new ee(this),this.stencilTest=new Dt(this),this.depthRange=new ve(this),this.depthTest=new Te(this),this.depthFunc=new Ae(this),this.blend=new De(this),this.blendFunc=new un(this),this.blendColor=new gn(this),this.blendEquation=new re(this),this.cullFace=new ce(this),this.cullFaceSide=new _e(this),this.frontFace=new Ue(this),this.program=new en(this),this.activeTexture=new Un(this),this.viewport=new lr(this),this.bindFramebuffer=new Gn(this),this.bindRenderbuffer=new zr(this),this.bindTexture=new ur(this),this.bindVertexBuffer=new Fn(this),this.bindElementBuffer=new Jn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new gr(this),this.pixelStoreUnpack=new rr(this),this.pixelStoreUnpackPremultiplyAlpha=new Mi(this),this.pixelStoreUnpackFlipY=new Ns(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=c.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(c.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)};gt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},gt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},gt.prototype.createIndexBuffer=function(c,d){return new Se(this,c,d)},gt.prototype.createVertexBuffer=function(c,d,h){return new In(this,c,d,h)},gt.prototype.createRenderbuffer=function(c,d,h){var v=this.gl,I=v.createRenderbuffer();return this.bindRenderbuffer.set(I),v.renderbufferStorage(v.RENDERBUFFER,c,d,h),this.bindRenderbuffer.set(null),I},gt.prototype.createFramebuffer=function(c,d,h){return new dt(this,c,d,h)},gt.prototype.clear=function(c){var d=c.color,h=c.depth,v=this.gl,I=0;d&&(I|=v.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(I|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),v.clear(I)},gt.prototype.setCullFace=function(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))},gt.prototype.setDepthMode=function(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)},gt.prototype.setStencilMode=function(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)},gt.prototype.setColorMode=function(c){i.deepEqual(c.blendFunction,qt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)},gt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Nt=function(c){function d(h,v,I){var M=this;c.call(this),this.id=h,this.dispatcher=I,this.on("data",function(O){O.dataType==="source"&&O.sourceDataType==="metadata"&&(M._sourceLoaded=!0),M._sourceLoaded&&!M._paused&&O.dataType==="source"&&O.sourceDataType==="content"&&(M.reload(),M.transform&&M.update(M.transform))}),this.on("error",function(){M._sourceErrored=!0}),this._source=function(O,V,X,it){var vt=new we[V.type](O,V,X,it);if(vt.id!==O)throw new Error("Expected Source id to be "+O+" instead of "+vt.id);return i.bindAll(["load","abort","unload","serialize","prepare"],vt),vt}(h,v,I,this),this._tiles={},this._cache=new ne(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new i.SourceFeatureState}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.onAdd=function(h){this.map=h,this._maxTileCacheSize=h?h._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(h)},d.prototype.onRemove=function(h){this._source&&this._source.onRemove&&this._source.onRemove(h)},d.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var h in this._tiles){var v=this._tiles[h];if(v.state!=="loaded"&&v.state!=="errored")return!1}return!0},d.prototype.getSource=function(){return this._source},d.prototype.pause=function(){this._paused=!0},d.prototype.resume=function(){if(this._paused){var h=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,h&&this.reload(),this.transform&&this.update(this.transform)}},d.prototype._loadTile=function(h,v){return this._source.loadTile(h,v)},d.prototype._unloadTile=function(h){if(this._source.unloadTile)return this._source.unloadTile(h,function(){})},d.prototype._abortTile=function(h){if(this._source.abortTile)return this._source.abortTile(h,function(){})},d.prototype.serialize=function(){return this._source.serialize()},d.prototype.prepare=function(h){for(var v in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var I=this._tiles[v];I.upload(h),I.prepare(this.map.style.imageManager)}},d.prototype.getIds=function(){return i.values(this._tiles).map(function(h){return h.tileID}).sort(me).map(function(h){return h.key})},d.prototype.getRenderableIds=function(h){var v=this,I=[];for(var M in this._tiles)this._isIdRenderable(M,h)&&I.push(this._tiles[M]);return h?I.sort(function(O,V){var X=O.tileID,it=V.tileID,vt=new i.Point(X.canonical.x,X.canonical.y)._rotate(v.transform.angle),yt=new i.Point(it.canonical.x,it.canonical.y)._rotate(v.transform.angle);return X.overscaledZ-it.overscaledZ||yt.y-vt.y||yt.x-vt.x}).map(function(O){return O.tileID.key}):I.map(function(O){return O.tileID}).sort(me).map(function(O){return O.key})},d.prototype.hasRenderableParent=function(h){var v=this.findLoadedParent(h,0);return!!v&&this._isIdRenderable(v.tileID.key)},d.prototype._isIdRenderable=function(h,v){return this._tiles[h]&&this._tiles[h].hasData()&&!this._coveredTiles[h]&&(v||!this._tiles[h].holdingForFade())},d.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var h in this._cache.reset(),this._tiles)this._tiles[h].state!=="errored"&&this._reloadTile(h,"reloading")},d.prototype._reloadTile=function(h,v){var I=this._tiles[h];I&&(I.state!=="loading"&&(I.state=v),this._loadTile(I,this._tileLoaded.bind(this,I,h,v)))},d.prototype._tileLoaded=function(h,v,I,M){if(M)return h.state="errored",void(M.status!==404?this._source.fire(new i.ErrorEvent(M,{tile:h})):this.update(this.transform));h.timeAdded=i.browser.now(),I==="expired"&&(h.refreshedUponExpiration=!0),this._setTileReloadTimer(v,h),this.getSource().type==="raster-dem"&&h.dem&&this._backfillDEM(h),this._state.initializeTileState(h,this.map?this.map.painter:null),this._source.fire(new i.Event("data",{dataType:"source",tile:h,coord:h.tileID}))},d.prototype._backfillDEM=function(h){for(var v=this.getRenderableIds(),I=0;I<v.length;I++){var M=v[I];if(h.neighboringTiles&&h.neighboringTiles[M]){var O=this.getTileByID(M);V(h,O),V(O,h)}}function V(X,it){X.needsHillshadePrepare=!0;var vt=it.tileID.canonical.x-X.tileID.canonical.x,yt=it.tileID.canonical.y-X.tileID.canonical.y,xt=Math.pow(2,X.tileID.canonical.z),Bt=it.tileID.key;vt===0&&yt===0||Math.abs(yt)>1||(Math.abs(vt)>1&&(Math.abs(vt+xt)===1?vt+=xt:Math.abs(vt-xt)===1&&(vt-=xt)),it.dem&&X.dem&&(X.dem.backfillBorder(it.dem,vt,yt),X.neighboringTiles&&X.neighboringTiles[Bt]&&(X.neighboringTiles[Bt].backfilled=!0)))}},d.prototype.getTile=function(h){return this.getTileByID(h.key)},d.prototype.getTileByID=function(h){return this._tiles[h]},d.prototype._retainLoadedChildren=function(h,v,I,M){for(var O in this._tiles){var V=this._tiles[O];if(!(M[O]||!V.hasData()||V.tileID.overscaledZ<=v||V.tileID.overscaledZ>I)){for(var X=V.tileID;V&&V.tileID.overscaledZ>v+1;){var it=V.tileID.scaledTo(V.tileID.overscaledZ-1);(V=this._tiles[it.key])&&V.hasData()&&(X=it)}for(var vt=X;vt.overscaledZ>v;)if(h[(vt=vt.scaledTo(vt.overscaledZ-1)).key]){M[X.key]=X;break}}}},d.prototype.findLoadedParent=function(h,v){if(h.key in this._loadedParentTiles){var I=this._loadedParentTiles[h.key];return I&&I.tileID.overscaledZ>=v?I:null}for(var M=h.overscaledZ-1;M>=v;M--){var O=h.scaledTo(M),V=this._getLoadedTile(O);if(V)return V}},d.prototype._getLoadedTile=function(h){var v=this._tiles[h.key];return v&&v.hasData()?v:this._cache.getByKey(h.wrapped().key)},d.prototype.updateCacheSize=function(h){var v=Math.ceil(h.width/this._source.tileSize)+1,I=Math.ceil(h.height/this._source.tileSize)+1,M=Math.floor(v*I*5),O=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(O)},d.prototype.handleWrapJump=function(h){var v=Math.round((h-(this._prevLng===void 0?h:this._prevLng))/360);if(this._prevLng=h,v){var I={};for(var M in this._tiles){var O=this._tiles[M];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+v),I[O.tileID.key]=O}for(var V in this._tiles=I,this._timers)clearTimeout(this._timers[V]),delete this._timers[V];for(var X in this._tiles)this._setTileReloadTimer(X,this._tiles[X])}},d.prototype.update=function(h){var v=this;if(this.transform=h,this._sourceLoaded&&!this._paused){var I;this.updateCacheSize(h),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?I=h.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(He){return new i.OverscaledTileID(He.canonical.z,He.wrap,He.canonical.z,He.canonical.x,He.canonical.y)}):(I=h.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(I=I.filter(function(He){return v._source.hasTile(He)}))):I=[];var M=h.coveringZoomLevel(this._source),O=Math.max(M-d.maxOverzooming,this._source.minzoom),V=Math.max(M+d.maxUnderzooming,this._source.minzoom),X=this._updateRetainedTiles(I,M);if(Ve(this._source.type)){for(var it={},vt={},yt=0,xt=Object.keys(X);yt<xt.length;yt+=1){var Bt=xt[yt],Lt=X[Bt],Ht=this._tiles[Bt];if(Ht&&!(Ht.fadeEndTime&&Ht.fadeEndTime<=i.browser.now())){var Mt=this.findLoadedParent(Lt,O);Mt&&(this._addTile(Mt.tileID),it[Mt.tileID.key]=Mt.tileID),vt[Bt]=Lt}}for(var Gt in this._retainLoadedChildren(vt,M,V,X),it)X[Gt]||(this._coveredTiles[Gt]=!0,X[Gt]=it[Gt])}for(var Qt in X)this._tiles[Qt].clearFadeHold();for(var de=0,ke=i.keysDifference(this._tiles,X);de<ke.length;de+=1){var Me=ke[de],Oe=this._tiles[Me];Oe.hasSymbolBuckets&&!Oe.holdingForFade()?Oe.setHoldDuration(this.map._fadeDuration):Oe.hasSymbolBuckets&&!Oe.symbolFadeFinished()||this._removeTile(Me)}this._updateLoadedParentTileCache()}},d.prototype.releaseSymbolFadeTiles=function(){for(var h in this._tiles)this._tiles[h].holdingForFade()&&this._removeTile(h)},d.prototype._updateRetainedTiles=function(h,v){for(var I={},M={},O=Math.max(v-d.maxOverzooming,this._source.minzoom),V=Math.max(v+d.maxUnderzooming,this._source.minzoom),X={},it=0,vt=h;it<vt.length;it+=1){var yt=vt[it],xt=this._addTile(yt);I[yt.key]=yt,xt.hasData()||v<this._source.maxzoom&&(X[yt.key]=yt)}this._retainLoadedChildren(X,v,V,I);for(var Bt=0,Lt=h;Bt<Lt.length;Bt+=1){var Ht=Lt[Bt],Mt=this._tiles[Ht.key];if(!Mt.hasData()){if(v+1>this._source.maxzoom){var Gt=Ht.children(this._source.maxzoom)[0],Qt=this.getTile(Gt);if(Qt&&Qt.hasData()){I[Gt.key]=Gt;continue}}else{var de=Ht.children(this._source.maxzoom);if(I[de[0].key]&&I[de[1].key]&&I[de[2].key]&&I[de[3].key])continue}for(var ke=Mt.wasRequested(),Me=Ht.overscaledZ-1;Me>=O;--Me){var Oe=Ht.scaledTo(Me);if(M[Oe.key]||(M[Oe.key]=!0,!(Mt=this.getTile(Oe))&&ke&&(Mt=this._addTile(Oe)),Mt&&(I[Oe.key]=Oe,ke=Mt.wasRequested(),Mt.hasData())))break}}}return I},d.prototype._updateLoadedParentTileCache=function(){for(var h in this._loadedParentTiles={},this._tiles){for(var v=[],I=void 0,M=this._tiles[h].tileID;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){I=this._loadedParentTiles[M.key];break}v.push(M.key);var O=M.scaledTo(M.overscaledZ-1);if(I=this._getLoadedTile(O))break;M=O}for(var V=0,X=v;V<X.length;V+=1)this._loadedParentTiles[X[V]]=I}},d.prototype._addTile=function(h){var v=this._tiles[h.key];if(v)return v;(v=this._cache.getAndRemove(h))&&(this._setTileReloadTimer(h.key,v),v.tileID=h,this._state.initializeTileState(v,this.map?this.map.painter:null),this._cacheTimers[h.key]&&(clearTimeout(this._cacheTimers[h.key]),delete this._cacheTimers[h.key],this._setTileReloadTimer(h.key,v)));var I=!!v;return I||(v=new i.Tile(h,this._source.tileSize*h.overscaleFactor()),this._loadTile(v,this._tileLoaded.bind(this,v,h.key,v.state))),v?(v.uses++,this._tiles[h.key]=v,I||this._source.fire(new i.Event("dataloading",{tile:v,coord:v.tileID,dataType:"source"})),v):null},d.prototype._setTileReloadTimer=function(h,v){var I=this;h in this._timers&&(clearTimeout(this._timers[h]),delete this._timers[h]);var M=v.getExpiryTimeout();M&&(this._timers[h]=setTimeout(function(){I._reloadTile(h,"expired"),delete I._timers[h]},M))},d.prototype._removeTile=function(h){var v=this._tiles[h];v&&(v.uses--,delete this._tiles[h],this._timers[h]&&(clearTimeout(this._timers[h]),delete this._timers[h]),v.uses>0||(v.hasData()&&v.state!=="reloading"?this._cache.add(v.tileID,v,v.getExpiryTimeout()):(v.aborted=!0,this._abortTile(v),this._unloadTile(v))))},d.prototype.clearTiles=function(){for(var h in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(h);this._cache.reset()},d.prototype.tilesIn=function(h,v,I){var M=this,O=[],V=this.transform;if(!V)return O;for(var X=I?V.getCameraQueryGeometry(h):h,it=h.map(function(Me){return V.pointCoordinate(Me)}),vt=X.map(function(Me){return V.pointCoordinate(Me)}),yt=this.getIds(),xt=1/0,Bt=1/0,Lt=-1/0,Ht=-1/0,Mt=0,Gt=vt;Mt<Gt.length;Mt+=1){var Qt=Gt[Mt];xt=Math.min(xt,Qt.x),Bt=Math.min(Bt,Qt.y),Lt=Math.max(Lt,Qt.x),Ht=Math.max(Ht,Qt.y)}for(var de=function(Me){var Oe=M._tiles[yt[Me]];if(!Oe.holdingForFade()){var He=Oe.tileID,Xe=Math.pow(2,V.zoom-Oe.tileID.overscaledZ),rn=v*Oe.queryPadding*i.EXTENT/Oe.tileSize/Xe,yn=[He.getTilePoint(new i.MercatorCoordinate(xt,Bt)),He.getTilePoint(new i.MercatorCoordinate(Lt,Ht))];if(yn[0].x-rn<i.EXTENT&&yn[0].y-rn<i.EXTENT&&yn[1].x+rn>=0&&yn[1].y+rn>=0){var On=it.map(function(Kn){return He.getTilePoint(Kn)}),Xn=vt.map(function(Kn){return He.getTilePoint(Kn)});O.push({tile:Oe,tileID:He,queryGeometry:On,cameraQueryGeometry:Xn,scale:Xe})}}},ke=0;ke<yt.length;ke++)de(ke);return O},d.prototype.getVisibleCoordinates=function(h){for(var v=this,I=this.getRenderableIds(h).map(function(X){return v._tiles[X].tileID}),M=0,O=I;M<O.length;M+=1){var V=O[M];V.posMatrix=this.transform.calculatePosMatrix(V.toUnwrapped())}return I},d.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ve(this._source.type))for(var h in this._tiles){var v=this._tiles[h];if(v.fadeEndTime!==void 0&&v.fadeEndTime>=i.browser.now())return!0}return!1},d.prototype.setFeatureState=function(h,v,I){this._state.updateState(h=h||"_geojsonTileLayer",v,I)},d.prototype.removeFeatureState=function(h,v,I){this._state.removeFeatureState(h=h||"_geojsonTileLayer",v,I)},d.prototype.getFeatureState=function(h,v){return this._state.getState(h=h||"_geojsonTileLayer",v)},d.prototype.setDependencies=function(h,v,I){var M=this._tiles[h];M&&M.setDependencies(v,I)},d.prototype.reloadTilesForDependencies=function(h,v){for(var I in this._tiles)this._tiles[I].hasDependency(h,v)&&this._reloadTile(I,"reloading");this._cache.filter(function(M){return!M.hasDependency(h,v)})},d}(i.Evented);function me(c,d){var h=Math.abs(2*c.wrap)-+(c.wrap<0),v=Math.abs(2*d.wrap)-+(d.wrap<0);return c.overscaledZ-d.overscaledZ||v-h||d.canonical.y-c.canonical.y||d.canonical.x-c.canonical.x}function Ve(c){return c==="raster"||c==="image"||c==="video"}function Ke(){return new i.window.Worker(qs.workerUrl)}Nt.maxOverzooming=10,Nt.maxUnderzooming=3;var Le="mapboxgl_preloaded_worker_pool",Ge=function(){this.active={}};Ge.prototype.acquire=function(c){if(!this.workers)for(this.workers=[];this.workers.length<Ge.workerCount;)this.workers.push(new Ke);return this.active[c]=!0,this.workers.slice()},Ge.prototype.release=function(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(function(d){d.terminate()}),this.workers=null)},Ge.prototype.isPreloaded=function(){return!!this.active[Le]},Ge.prototype.numActive=function(){return Object.keys(this.active).length};var kn,Tn=Math.floor(i.browser.hardwareConcurrency/2);function Re(){return kn||(kn=new Ge),kn}function an(c,d){var h={};for(var v in c)v!=="ref"&&(h[v]=c[v]);return i.refProperties.forEach(function(I){I in d&&(h[I]=d[I])}),h}function dn(c){c=c.slice();for(var d=Object.create(null),h=0;h<c.length;h++)d[c[h].id]=c[h];for(var v=0;v<c.length;v++)"ref"in c[v]&&(c[v]=an(c[v],d[c[v].ref]));return c}Ge.workerCount=Math.max(Math.min(Tn,6),1);var pn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Er(c,d,h){h.push({command:pn.addSource,args:[c,d[c]]})}function bn(c,d,h){d.push({command:pn.removeSource,args:[c]}),h[c]=!0}function jr(c,d,h,v){bn(c,h,v),Er(c,d,h)}function ei(c,d,h){var v;for(v in c[h])if(c[h].hasOwnProperty(v)&&v!=="data"&&!i.deepEqual(c[h][v],d[h][v]))return!1;for(v in d[h])if(d[h].hasOwnProperty(v)&&v!=="data"&&!i.deepEqual(c[h][v],d[h][v]))return!1;return!0}function Lr(c,d,h,v,I,M){var O;for(O in d=d||{},c=c||{})c.hasOwnProperty(O)&&(i.deepEqual(c[O],d[O])||h.push({command:M,args:[v,O,d[O],I]}));for(O in d)d.hasOwnProperty(O)&&!c.hasOwnProperty(O)&&(i.deepEqual(c[O],d[O])||h.push({command:M,args:[v,O,d[O],I]}))}function Ur(c){return c.id}function Vr(c,d){return c[d.id]=d,c}var Go=function(c,d){this.reset(c,d)};Go.prototype.reset=function(c,d){this.points=c||[],this._distances=[0];for(var h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Go.prototype.lerp=function(c){if(this.points.length===1)return this.points[0];c=i.clamp(c,0,1);for(var d=1,h=this._distances[d],v=c*this.paddedLength+this.padding;h<v&&d<this._distances.length;)h=this._distances[++d];var I=d-1,M=this._distances[I],O=h-M,V=O>0?(v-M)/O:0;return this.points[I].mult(1-V).add(this.points[d].mult(V))};var vr=function(c,d,h){var v=this.boxCells=[],I=this.circleCells=[];this.xCellCount=Math.ceil(c/h),this.yCellCount=Math.ceil(d/h);for(var M=0;M<this.xCellCount*this.yCellCount;M++)v.push([]),I.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=d,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0};function $i(c,d,h,v,I){var M=i.create();return d?(i.scale(M,M,[1/I,1/I,1]),h||i.rotateZ(M,M,v.angle)):i.multiply(M,v.labelPlaneMatrix,c),M}function ui(c,d,h,v,I){if(d){var M=i.clone(c);return i.scale(M,M,[I,I,1]),h||i.rotateZ(M,M,-v.angle),M}return v.glCoordMatrix}function br(c,d){var h=[c.x,c.y,0,1];ao(h,h,d);var v=h[3];return{point:new i.Point(h[0]/v,h[1]/v),signedDistanceFromCamera:v}}function Tr(c,d){return .5+c/d*.5}function Wo(c,d){var h=c[0]/c[3],v=c[1]/c[3];return h>=-d[0]&&h<=d[0]&&v>=-d[1]&&v<=d[1]}function ws(c,d,h,v,I,M,O,V){var X=v?c.textSizeData:c.iconSizeData,it=i.evaluateSizeForZoom(X,h.transform.zoom),vt=[256/h.width*2+1,256/h.height*2+1],yt=v?c.text.dynamicLayoutVertexArray:c.icon.dynamicLayoutVertexArray;yt.clear();for(var xt=c.lineVertexArray,Bt=v?c.text.placedSymbolArray:c.icon.placedSymbolArray,Lt=h.transform.width/h.transform.height,Ht=!1,Mt=0;Mt<Bt.length;Mt++){var Gt=Bt.get(Mt);if(Gt.hidden||Gt.writingMode===i.WritingMode.vertical&&!Ht)zo(Gt.numGlyphs,yt);else{Ht=!1;var Qt=[Gt.anchorX,Gt.anchorY,0,1];if(i.transformMat4(Qt,Qt,d),Wo(Qt,vt)){var de=Tr(h.transform.cameraToCenterDistance,Qt[3]),ke=i.evaluateSizeForFeature(X,it,Gt),Me=O?ke/de:ke*de,Oe=new i.Point(Gt.anchorX,Gt.anchorY),He=br(Oe,I).point,Xe={},rn=nh(Gt,Me,!1,V,d,I,M,c.glyphOffsetArray,xt,yt,He,Oe,Xe,Lt);Ht=rn.useVertical,(rn.notEnoughRoom||Ht||rn.needsFlipping&&nh(Gt,Me,!0,V,d,I,M,c.glyphOffsetArray,xt,yt,He,Oe,Xe,Lt).notEnoughRoom)&&zo(Gt.numGlyphs,yt)}else zo(Gt.numGlyphs,yt)}}v?c.text.dynamicLayoutVertexBuffer.updateData(yt):c.icon.dynamicLayoutVertexBuffer.updateData(yt)}function Ki(c,d,h,v,I,M,O,V,X,it,vt){var yt=V.glyphStartIndex+V.numGlyphs,xt=V.lineStartIndex,Bt=V.lineStartIndex+V.lineLength,Lt=d.getoffsetX(V.glyphStartIndex),Ht=d.getoffsetX(yt-1),Mt=qi(c*Lt,h,v,I,M,O,V.segment,xt,Bt,X,it,vt);if(!Mt)return null;var Gt=qi(c*Ht,h,v,I,M,O,V.segment,xt,Bt,X,it,vt);return Gt?{first:Mt,last:Gt}:null}function ta(c,d,h,v){return c===i.WritingMode.horizontal&&Math.abs(h.y-d.y)>Math.abs(h.x-d.x)*v?{useVertical:!0}:(c===i.WritingMode.vertical?d.y<h.y:d.x>h.x)?{needsFlipping:!0}:null}function nh(c,d,h,v,I,M,O,V,X,it,vt,yt,xt,Bt){var Lt,Ht=d/24,Mt=c.lineOffsetX*Ht,Gt=c.lineOffsetY*Ht;if(c.numGlyphs>1){var Qt=c.glyphStartIndex+c.numGlyphs,de=c.lineStartIndex,ke=c.lineStartIndex+c.lineLength,Me=Ki(Ht,V,Mt,Gt,h,vt,yt,c,X,M,xt);if(!Me)return{notEnoughRoom:!0};var Oe=br(Me.first.point,O).point,He=br(Me.last.point,O).point;if(v&&!h){var Xe=ta(c.writingMode,Oe,He,Bt);if(Xe)return Xe}Lt=[Me.first];for(var rn=c.glyphStartIndex+1;rn<Qt-1;rn++)Lt.push(qi(Ht*V.getoffsetX(rn),Mt,Gt,h,vt,yt,c.segment,de,ke,X,M,xt));Lt.push(Me.last)}else{if(v&&!h){var yn=br(yt,I).point,On=c.lineStartIndex+c.segment+1,Xn=new i.Point(X.getx(On),X.gety(On)),Kn=br(Xn,I),Xr=Kn.signedDistanceFromCamera>0?Kn.point:Fu(yt,Xn,yn,1,I),Cn=ta(c.writingMode,yn,Xr,Bt);if(Cn)return Cn}var er=qi(Ht*V.getoffsetX(c.glyphStartIndex),Mt,Gt,h,vt,yt,c.segment,c.lineStartIndex,c.lineStartIndex+c.lineLength,X,M,xt);if(!er)return{notEnoughRoom:!0};Lt=[er]}for(var Cr=0,dr=Lt;Cr<dr.length;Cr+=1){var sr=dr[Cr];i.addDynamicAttributes(it,sr.point,sr.angle)}return{}}function Fu(c,d,h,v,I){var M=br(c.add(c.sub(d)._unit()),I).point,O=h.sub(M);return h.add(O._mult(v/O.mag()))}function qi(c,d,h,v,I,M,O,V,X,it,vt,yt){var xt=v?c-d:c+d,Bt=xt>0?1:-1,Lt=0;v&&(Bt*=-1,Lt=Math.PI),Bt<0&&(Lt+=Math.PI);for(var Ht=Bt>0?V+O:V+O+1,Mt=I,Gt=I,Qt=0,de=0,ke=Math.abs(xt),Me=[];Qt+de<=ke;){if((Ht+=Bt)<V||Ht>=X)return null;if(Gt=Mt,Me.push(Mt),(Mt=yt[Ht])===void 0){var Oe=new i.Point(it.getx(Ht),it.gety(Ht)),He=br(Oe,vt);if(He.signedDistanceFromCamera>0)Mt=yt[Ht]=He.point;else{var Xe=Ht-Bt;Mt=Fu(Qt===0?M:new i.Point(it.getx(Xe),it.gety(Xe)),Oe,Gt,ke-Qt+1,vt)}}Qt+=de,de=Gt.dist(Mt)}var rn=(ke-Qt)/de,yn=Mt.sub(Gt),On=yn.mult(rn)._add(Gt);On._add(yn._unit()._perp()._mult(h*Bt));var Xn=Lt+Math.atan2(Mt.y-Gt.y,Mt.x-Gt.x);return Me.push(On),{point:On,angle:Xn,path:Me}}vr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},vr.prototype.insert=function(c,d,h,v,I){this._forEachCell(d,h,v,I,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(d),this.bboxes.push(h),this.bboxes.push(v),this.bboxes.push(I)},vr.prototype.insertCircle=function(c,d,h,v){this._forEachCell(d-v,h-v,d+v,h+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(d),this.circles.push(h),this.circles.push(v)},vr.prototype._insertBoxCell=function(c,d,h,v,I,M){this.boxCells[I].push(M)},vr.prototype._insertCircleCell=function(c,d,h,v,I,M){this.circleCells[I].push(M)},vr.prototype._query=function(c,d,h,v,I,M){if(h<0||c>this.width||v<0||d>this.height)return!I&&[];var O=[];if(c<=0&&d<=0&&this.width<=h&&this.height<=v){if(I)return!0;for(var V=0;V<this.boxKeys.length;V++)O.push({key:this.boxKeys[V],x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(var X=0;X<this.circleKeys.length;X++){var it=this.circles[3*X],vt=this.circles[3*X+1],yt=this.circles[3*X+2];O.push({key:this.circleKeys[X],x1:it-yt,y1:vt-yt,x2:it+yt,y2:vt+yt})}return M?O.filter(M):O}return this._forEachCell(c,d,h,v,this._queryCell,O,{hitTest:I,seenUids:{box:{},circle:{}}},M),I?O.length>0:O},vr.prototype._queryCircle=function(c,d,h,v,I){var M=c-h,O=c+h,V=d-h,X=d+h;if(O<0||M>this.width||X<0||V>this.height)return!v&&[];var it=[];return this._forEachCell(M,V,O,X,this._queryCellCircle,it,{hitTest:v,circle:{x:c,y:d,radius:h},seenUids:{box:{},circle:{}}},I),v?it.length>0:it},vr.prototype.query=function(c,d,h,v,I){return this._query(c,d,h,v,!1,I)},vr.prototype.hitTest=function(c,d,h,v,I){return this._query(c,d,h,v,!0,I)},vr.prototype.hitTestCircle=function(c,d,h,v){return this._queryCircle(c,d,h,!0,v)},vr.prototype._queryCell=function(c,d,h,v,I,M,O,V){var X=O.seenUids,it=this.boxCells[I];if(it!==null)for(var vt=this.bboxes,yt=0,xt=it;yt<xt.length;yt+=1){var Bt=xt[yt];if(!X.box[Bt]){X.box[Bt]=!0;var Lt=4*Bt;if(c<=vt[Lt+2]&&d<=vt[Lt+3]&&h>=vt[Lt+0]&&v>=vt[Lt+1]&&(!V||V(this.boxKeys[Bt]))){if(O.hitTest)return M.push(!0),!0;M.push({key:this.boxKeys[Bt],x1:vt[Lt],y1:vt[Lt+1],x2:vt[Lt+2],y2:vt[Lt+3]})}}}var Ht=this.circleCells[I];if(Ht!==null)for(var Mt=this.circles,Gt=0,Qt=Ht;Gt<Qt.length;Gt+=1){var de=Qt[Gt];if(!X.circle[de]){X.circle[de]=!0;var ke=3*de;if(this._circleAndRectCollide(Mt[ke],Mt[ke+1],Mt[ke+2],c,d,h,v)&&(!V||V(this.circleKeys[de]))){if(O.hitTest)return M.push(!0),!0;var Me=Mt[ke],Oe=Mt[ke+1],He=Mt[ke+2];M.push({key:this.circleKeys[de],x1:Me-He,y1:Oe-He,x2:Me+He,y2:Oe+He})}}}},vr.prototype._queryCellCircle=function(c,d,h,v,I,M,O,V){var X=O.circle,it=O.seenUids,vt=this.boxCells[I];if(vt!==null)for(var yt=this.bboxes,xt=0,Bt=vt;xt<Bt.length;xt+=1){var Lt=Bt[xt];if(!it.box[Lt]){it.box[Lt]=!0;var Ht=4*Lt;if(this._circleAndRectCollide(X.x,X.y,X.radius,yt[Ht+0],yt[Ht+1],yt[Ht+2],yt[Ht+3])&&(!V||V(this.boxKeys[Lt])))return M.push(!0),!0}}var Mt=this.circleCells[I];if(Mt!==null)for(var Gt=this.circles,Qt=0,de=Mt;Qt<de.length;Qt+=1){var ke=de[Qt];if(!it.circle[ke]){it.circle[ke]=!0;var Me=3*ke;if(this._circlesCollide(Gt[Me],Gt[Me+1],Gt[Me+2],X.x,X.y,X.radius)&&(!V||V(this.circleKeys[ke])))return M.push(!0),!0}}},vr.prototype._forEachCell=function(c,d,h,v,I,M,O,V){for(var X=this._convertToXCellCoord(c),it=this._convertToYCellCoord(d),vt=this._convertToXCellCoord(h),yt=this._convertToYCellCoord(v),xt=X;xt<=vt;xt++)for(var Bt=it;Bt<=yt;Bt++)if(I.call(this,c,d,h,v,this.xCellCount*Bt+xt,M,O,V))return},vr.prototype._convertToXCellCoord=function(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))},vr.prototype._convertToYCellCoord=function(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))},vr.prototype._circlesCollide=function(c,d,h,v,I,M){var O=v-c,V=I-d,X=h+M;return X*X>O*O+V*V},vr.prototype._circleAndRectCollide=function(c,d,h,v,I,M,O){var V=(M-v)/2,X=Math.abs(c-(v+V));if(X>V+h)return!1;var it=(O-I)/2,vt=Math.abs(d-(I+it));if(vt>it+h)return!1;if(X<=V||vt<=it)return!0;var yt=X-V,xt=vt-it;return yt*yt+xt*xt<=h*h};var Nu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zo(c,d){for(var h=0;h<c;h++){var v=d.length;d.resize(v+4),d.float32.set(Nu,3*v)}}function ao(c,d,h){var v=d[0],I=d[1];return c[0]=h[0]*v+h[4]*I+h[12],c[1]=h[1]*v+h[5]*I+h[13],c[3]=h[3]*v+h[7]*I+h[15],c}var La=function(c,d,h){d===void 0&&(d=new vr(c.width+200,c.height+200,25)),h===void 0&&(h=new vr(c.width+200,c.height+200,25)),this.transform=c,this.grid=d,this.ignoredGrid=h,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+100,this.screenBottomBoundary=c.height+100,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200};function Di(c,d,h){return d*(i.EXTENT/(c.tileSize*Math.pow(2,h-c.tileID.overscaledZ)))}La.prototype.placeCollisionBox=function(c,d,h,v,I){var M=this.projectAndGetPerspectiveRatio(v,c.anchorPointX,c.anchorPointY),O=h*M.perspectiveRatio,V=c.x1*O+M.point.x,X=c.y1*O+M.point.y,it=c.x2*O+M.point.x,vt=c.y2*O+M.point.y;return!this.isInsideGrid(V,X,it,vt)||!d&&this.grid.hitTest(V,X,it,vt,I)?{box:[],offscreen:!1}:{box:[V,X,it,vt],offscreen:this.isOffscreen(V,X,it,vt)}},La.prototype.placeCollisionCircles=function(c,d,h,v,I,M,O,V,X,it,vt,yt,xt){var Bt=[],Lt=new i.Point(d.anchorX,d.anchorY),Ht=br(Lt,M),Mt=Tr(this.transform.cameraToCenterDistance,Ht.signedDistanceFromCamera),Gt=(it?I/Mt:I*Mt)/i.ONE_EM,Qt=br(Lt,O).point,de=Ki(Gt,v,d.lineOffsetX*Gt,d.lineOffsetY*Gt,!1,Qt,Lt,d,h,O,{}),ke=!1,Me=!1,Oe=!0;if(de){for(var He=.5*yt*Mt+xt,Xe=new i.Point(-100,-100),rn=new i.Point(this.screenRightBoundary,this.screenBottomBoundary),yn=new Go,On=de.first,Xn=de.last,Kn=[],Xr=On.path.length-1;Xr>=1;Xr--)Kn.push(On.path[Xr]);for(var Cn=1;Cn<Xn.path.length;Cn++)Kn.push(Xn.path[Cn]);var er=2.5*He;if(V){var Cr=Kn.map(function(Ys){return br(Ys,V)});Kn=Cr.some(function(Ys){return Ys.signedDistanceFromCamera<=0})?[]:Cr.map(function(Ys){return Ys.point})}var dr=[];if(Kn.length>0){for(var sr=Kn[0].clone(),Ir=Kn[0].clone(),cr=1;cr<Kn.length;cr++)sr.x=Math.min(sr.x,Kn[cr].x),sr.y=Math.min(sr.y,Kn[cr].y),Ir.x=Math.max(Ir.x,Kn[cr].x),Ir.y=Math.max(Ir.y,Kn[cr].y);dr=sr.x>=Xe.x&&Ir.x<=rn.x&&sr.y>=Xe.y&&Ir.y<=rn.y?[Kn]:Ir.x<Xe.x||sr.x>rn.x||Ir.y<Xe.y||sr.y>rn.y?[]:i.clipLine([Kn],Xe.x,Xe.y,rn.x,rn.y)}for(var zn=0,Lo=dr;zn<Lo.length;zn+=1){var uo;yn.reset(Lo[zn],.25*He),uo=yn.length<=.5*He?1:Math.ceil(yn.paddedLength/er)+1;for(var no=0;no<uo;no++){var No=no/Math.max(uo-1,1),Vi=yn.lerp(No),Bi=Vi.x+100,ts=Vi.y+100;Bt.push(Bi,ts,He,0);var Oi=Bi-He,Hl=ts-He,es=Bi+He,yl=ts+He;if(Oe=Oe&&this.isOffscreen(Oi,Hl,es,yl),Me=Me||this.isInsideGrid(Oi,Hl,es,yl),!c&&this.grid.hitTestCircle(Bi,ts,He,vt)&&(ke=!0,!X))return{circles:[],offscreen:!1,collisionDetected:ke}}}}return{circles:!X&&ke||!Me?[]:Bt,offscreen:Oe,collisionDetected:ke}},La.prototype.queryRenderedSymbols=function(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var d=[],h=1/0,v=1/0,I=-1/0,M=-1/0,O=0,V=c;O<V.length;O+=1){var X=V[O],it=new i.Point(X.x+100,X.y+100);h=Math.min(h,it.x),v=Math.min(v,it.y),I=Math.max(I,it.x),M=Math.max(M,it.y),d.push(it)}for(var vt={},yt={},xt=0,Bt=this.grid.query(h,v,I,M).concat(this.ignoredGrid.query(h,v,I,M));xt<Bt.length;xt+=1){var Lt=Bt[xt],Ht=Lt.key;if(vt[Ht.bucketInstanceId]===void 0&&(vt[Ht.bucketInstanceId]={}),!vt[Ht.bucketInstanceId][Ht.featureIndex]){var Mt=[new i.Point(Lt.x1,Lt.y1),new i.Point(Lt.x2,Lt.y1),new i.Point(Lt.x2,Lt.y2),new i.Point(Lt.x1,Lt.y2)];i.polygonIntersectsPolygon(d,Mt)&&(vt[Ht.bucketInstanceId][Ht.featureIndex]=!0,yt[Ht.bucketInstanceId]===void 0&&(yt[Ht.bucketInstanceId]=[]),yt[Ht.bucketInstanceId].push(Ht.featureIndex))}}return yt},La.prototype.insertCollisionBox=function(c,d,h,v,I){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:h,featureIndex:v,collisionGroupID:I},c[0],c[1],c[2],c[3])},La.prototype.insertCollisionCircles=function(c,d,h,v,I){for(var M=d?this.ignoredGrid:this.grid,O={bucketInstanceId:h,featureIndex:v,collisionGroupID:I},V=0;V<c.length;V+=4)M.insertCircle(O,c[V],c[V+1],c[V+2])},La.prototype.projectAndGetPerspectiveRatio=function(c,d,h){var v=[d,h,0,1];return ao(v,v,c),{point:new i.Point((v[0]/v[3]+1)/2*this.transform.width+100,(-v[1]/v[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}},La.prototype.isOffscreen=function(c,d,h,v){return h<100||c>=this.screenRightBoundary||v<100||d>this.screenBottomBoundary},La.prototype.isInsideGrid=function(c,d,h,v){return h>=0&&c<this.gridRightBoundary&&v>=0&&d<this.gridBottomBoundary},La.prototype.getViewportMatrix=function(){var c=i.identity([]);return i.translate(c,c,[-100,-100,0]),c};var us=function(c,d,h,v){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?d:-d))):v&&h?1:0,this.placed=h};us.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Oa=function(c,d,h,v,I){this.text=new us(c?c.text:null,d,h,I),this.icon=new us(c?c.icon:null,d,v,I)};Oa.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var cu=function(c,d,h){this.text=c,this.icon=d,this.skipFade=h},T=function(){this.invProjMatrix=i.create(),this.viewportMatrix=i.create(),this.circles=[]},H=function(c,d,h,v,I){this.bucketInstanceId=c,this.featureIndex=d,this.sourceLayerIndex=h,this.bucketIndex=v,this.tileID=I},ft=function(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}};function zt(c,d,h,v,I){var M=i.getAnchorAlignment(c),O=-(M.horizontalAlign-.5)*d,V=-(M.verticalAlign-.5)*h,X=i.evaluateVariableOffset(c,v);return new i.Point(O+X[0]*I,V+X[1]*I)}function Yt(c,d,h,v,I,M){var O=c.x1,V=c.x2,X=c.y1,it=c.y2,vt=c.anchorPointX,yt=c.anchorPointY,xt=new i.Point(d,h);return v&&xt._rotate(I?M:-M),{x1:O+xt.x,y1:X+xt.y,x2:V+xt.x,y2:it+xt.y,anchorPointX:vt,anchorPointY:yt}}ft.prototype.get=function(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){var d=++this.maxGroupID;this.collisionGroups[c]={ID:d,predicate:function(h){return h.collisionGroupID===d}}}return this.collisionGroups[c]};var Xt=function(c,d,h,v){this.transform=c.clone(),this.collisionIndex=new La(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new ft(h),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}};function he(c,d,h,v,I){c.emplaceBack(d?1:0,h?1:0,v||0,I||0),c.emplaceBack(d?1:0,h?1:0,v||0,I||0),c.emplaceBack(d?1:0,h?1:0,v||0,I||0),c.emplaceBack(d?1:0,h?1:0,v||0,I||0)}Xt.prototype.getBucketParts=function(c,d,h,v){var I=h.getBucket(d),M=h.latestFeatureIndex;if(I&&M&&d.id===I.layerIds[0]){var O=h.collisionBoxArray,V=I.layers[0].layout,X=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),it=h.tileSize/i.EXTENT,vt=this.transform.calculatePosMatrix(h.tileID.toUnwrapped()),yt=V.get("text-pitch-alignment")==="map",xt=V.get("text-rotation-alignment")==="map",Bt=Di(h,1,this.transform.zoom),Lt=$i(vt,yt,xt,this.transform,Bt),Ht=null;if(yt){var Mt=ui(vt,yt,xt,this.transform,Bt);Ht=i.multiply([],this.transform.labelPlaneMatrix,Mt)}this.retainedQueryData[I.bucketInstanceId]=new H(I.bucketInstanceId,M,I.sourceLayerIndex,I.index,h.tileID);var Gt={bucket:I,layout:V,posMatrix:vt,textLabelPlaneMatrix:Lt,labelToScreenMatrix:Ht,scale:X,textPixelRatio:it,holdingForFade:h.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:i.evaluateSizeForZoom(I.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(I.sourceID)};if(v)for(var Qt=0,de=I.sortKeyRanges;Qt<de.length;Qt+=1){var ke=de[Qt];c.push({sortKey:ke.sortKey,symbolInstanceStart:ke.symbolInstanceStart,symbolInstanceEnd:ke.symbolInstanceEnd,parameters:Gt})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:Gt})}},Xt.prototype.attemptAnchorPlacement=function(c,d,h,v,I,M,O,V,X,it,vt,yt,xt,Bt,Lt){var Ht,Mt=[yt.textOffset0,yt.textOffset1],Gt=zt(c,h,v,Mt,I),Qt=this.collisionIndex.placeCollisionBox(Yt(d,Gt.x,Gt.y,M,O,this.transform.angle),vt,V,X,it.predicate);if(!Lt||this.collisionIndex.placeCollisionBox(Yt(Lt,Gt.x,Gt.y,M,O,this.transform.angle),vt,V,X,it.predicate).box.length!==0)return Qt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[yt.crossTileID]&&this.prevPlacement.placements[yt.crossTileID]&&this.prevPlacement.placements[yt.crossTileID].text&&(Ht=this.prevPlacement.variableOffsets[yt.crossTileID].anchor),this.variableOffsets[yt.crossTileID]={textOffset:Mt,width:h,height:v,anchor:c,textBoxScale:I,prevAnchor:Ht},this.markUsedJustification(xt,c,yt,Bt),xt.allowVerticalPlacement&&(this.markUsedOrientation(xt,Bt,yt),this.placedOrientations[yt.crossTileID]=Bt),{shift:Gt,placedGlyphBoxes:Qt}):void 0},Xt.prototype.placeLayerBucketPart=function(c,d,h){var v=this,I=c.parameters,M=I.bucket,O=I.layout,V=I.posMatrix,X=I.textLabelPlaneMatrix,it=I.labelToScreenMatrix,vt=I.textPixelRatio,yt=I.holdingForFade,xt=I.collisionBoxArray,Bt=I.partiallyEvaluatedTextSize,Lt=I.collisionGroup,Ht=O.get("text-optional"),Mt=O.get("icon-optional"),Gt=O.get("text-allow-overlap"),Qt=O.get("icon-allow-overlap"),de=O.get("text-rotation-alignment")==="map",ke=O.get("text-pitch-alignment")==="map",Me=O.get("icon-text-fit")!=="none",Oe=O.get("symbol-z-order")==="viewport-y",He=Gt&&(Qt||!M.hasIconData()||Mt),Xe=Qt&&(Gt||!M.hasTextData()||Ht);!M.collisionArrays&&xt&&M.deserializeCollisionBoxes(xt);var rn=function(Cn,er){if(!d[Cn.crossTileID])if(yt)v.placements[Cn.crossTileID]=new cu(!1,!1,!1);else{var Cr,dr=!1,sr=!1,Ir=!0,cr=null,zn={box:null,offscreen:null},Lo={box:null,offscreen:null},uo=null,no=null,No=0,Vi=0,Bi=0;er.textFeatureIndex?No=er.textFeatureIndex:Cn.useRuntimeCollisionCircles&&(No=Cn.featureIndex),er.verticalTextFeatureIndex&&(Vi=er.verticalTextFeatureIndex);var ts=er.textBox;if(ts){var Oi=function(hi){var Ps=i.WritingMode.horizontal;if(M.allowVerticalPlacement&&!hi&&v.prevPlacement){var Fa=v.prevPlacement.placedOrientations[Cn.crossTileID];Fa&&(v.placedOrientations[Cn.crossTileID]=Fa,v.markUsedOrientation(M,Ps=Fa,Cn))}return Ps},Hl=function(hi,Ps){if(M.allowVerticalPlacement&&Cn.numVerticalGlyphVertices>0&&er.verticalTextBox)for(var Fa=0,bu=M.writingModes;Fa<bu.length&&(bu[Fa]===i.WritingMode.vertical?(zn=Ps(),Lo=zn):zn=hi(),!(zn&&zn.box&&zn.box.length));Fa+=1);else zn=hi()};if(O.get("text-variable-anchor")){var es=O.get("text-variable-anchor");if(v.prevPlacement&&v.prevPlacement.variableOffsets[Cn.crossTileID]){var yl=v.prevPlacement.variableOffsets[Cn.crossTileID];es.indexOf(yl.anchor)>0&&(es=es.filter(function(hi){return hi!==yl.anchor})).unshift(yl.anchor)}var Ys=function(hi,Ps,Fa){for(var bu=hi.x2-hi.x1,Og=hi.y2-hi.y1,gh=Cn.textBoxScale,Hp=Me&&!Qt?Ps:null,vh={box:[],offscreen:!1},Kd=Gt?2*es.length:es.length,xu=0;xu<Kd;++xu){var Hf=v.attemptAnchorPlacement(es[xu%es.length],hi,bu,Og,gh,de,ke,vt,V,Lt,xu>=es.length,Cn,M,Fa,Hp);if(Hf&&(vh=Hf.placedGlyphBoxes)&&vh.box&&vh.box.length){dr=!0,cr=Hf.shift;break}}return vh};Hl(function(){return Ys(ts,er.iconBox,i.WritingMode.horizontal)},function(){var hi=er.verticalTextBox;return M.allowVerticalPlacement&&!(zn&&zn.box&&zn.box.length)&&Cn.numVerticalGlyphVertices>0&&hi?Ys(hi,er.verticalIconBox,i.WritingMode.vertical):{box:null,offscreen:null}}),zn&&(dr=zn.box,Ir=zn.offscreen);var kc=Oi(zn&&zn.box);if(!dr&&v.prevPlacement){var mh=v.prevPlacement.variableOffsets[Cn.crossTileID];mh&&(v.variableOffsets[Cn.crossTileID]=mh,v.markUsedJustification(M,mh.anchor,Cn,kc))}}else{var Xs=function(hi,Ps){var Fa=v.collisionIndex.placeCollisionBox(hi,Gt,vt,V,Lt.predicate);return Fa&&Fa.box&&Fa.box.length&&(v.markUsedOrientation(M,Ps,Cn),v.placedOrientations[Cn.crossTileID]=Ps),Fa};Hl(function(){return Xs(ts,i.WritingMode.horizontal)},function(){var hi=er.verticalTextBox;return M.allowVerticalPlacement&&Cn.numVerticalGlyphVertices>0&&hi?Xs(hi,i.WritingMode.vertical):{box:null,offscreen:null}}),Oi(zn&&zn.box&&zn.box.length)}}if(dr=(Cr=zn)&&Cr.box&&Cr.box.length>0,Ir=Cr&&Cr.offscreen,Cn.useRuntimeCollisionCircles){var Lc=M.text.placedSymbolArray.get(Cn.centerJustifiedTextSymbolIndex),Hh=i.evaluateSizeForFeature(M.textSizeData,Bt,Lc),Gl=O.get("text-padding");uo=v.collisionIndex.placeCollisionCircles(Gt,Lc,M.lineVertexArray,M.glyphOffsetArray,Hh,V,X,it,h,ke,Lt.predicate,Cn.collisionCircleDiameter,Gl),dr=Gt||uo.circles.length>0&&!uo.collisionDetected,Ir=Ir&&uo.offscreen}if(er.iconFeatureIndex&&(Bi=er.iconFeatureIndex),er.iconBox){var yu=function(hi){var Ps=Me&&cr?Yt(hi,cr.x,cr.y,de,ke,v.transform.angle):hi;return v.collisionIndex.placeCollisionBox(Ps,Qt,vt,V,Lt.predicate)};sr=Lo&&Lo.box&&Lo.box.length&&er.verticalIconBox?(no=yu(er.verticalIconBox)).box.length>0:(no=yu(er.iconBox)).box.length>0,Ir=Ir&&no.offscreen}var Wl=Ht||Cn.numHorizontalGlyphVertices===0&&Cn.numVerticalGlyphVertices===0,qo=Mt||Cn.numIconVertices===0;if(Wl||qo?qo?Wl||(sr=sr&&dr):dr=sr&&dr:sr=dr=sr&&dr,dr&&Cr&&Cr.box&&v.collisionIndex.insertCollisionBox(Cr.box,O.get("text-ignore-placement"),M.bucketInstanceId,Lo&&Lo.box&&Vi?Vi:No,Lt.ID),sr&&no&&v.collisionIndex.insertCollisionBox(no.box,O.get("icon-ignore-placement"),M.bucketInstanceId,Bi,Lt.ID),uo&&(dr&&v.collisionIndex.insertCollisionCircles(uo.circles,O.get("text-ignore-placement"),M.bucketInstanceId,No,Lt.ID),h)){var _l=M.bucketInstanceId,_u=v.collisionCircleArrays[_l];_u===void 0&&(_u=v.collisionCircleArrays[_l]=new T);for(var Oc=0;Oc<uo.circles.length;Oc+=4)_u.circles.push(uo.circles[Oc+0]),_u.circles.push(uo.circles[Oc+1]),_u.circles.push(uo.circles[Oc+2]),_u.circles.push(uo.collisionDetected?1:0)}v.placements[Cn.crossTileID]=new cu(dr||He,sr||Xe,Ir||M.justReloaded),d[Cn.crossTileID]=!0}};if(Oe)for(var yn=M.getSortedSymbolIndexes(this.transform.angle),On=yn.length-1;On>=0;--On){var Xn=yn[On];rn(M.symbolInstances.get(Xn),M.collisionArrays[Xn])}else for(var Kn=c.symbolInstanceStart;Kn<c.symbolInstanceEnd;Kn++)rn(M.symbolInstances.get(Kn),M.collisionArrays[Kn]);if(h&&M.bucketInstanceId in this.collisionCircleArrays){var Xr=this.collisionCircleArrays[M.bucketInstanceId];i.invert(Xr.invProjMatrix,V),Xr.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1},Xt.prototype.markUsedJustification=function(c,d,h,v){var I;I=v===i.WritingMode.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[i.getAnchorJustification(d)];for(var M=0,O=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];M<O.length;M+=1){var V=O[M];V>=0&&(c.text.placedSymbolArray.get(V).crossTileID=I>=0&&V!==I?0:h.crossTileID)}},Xt.prototype.markUsedOrientation=function(c,d,h){for(var v=d===i.WritingMode.horizontal||d===i.WritingMode.horizontalOnly?d:0,I=d===i.WritingMode.vertical?d:0,M=0,O=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];M<O.length;M+=1)c.text.placedSymbolArray.get(O[M]).placedOrientation=v;h.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=I)},Xt.prototype.commit=function(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;var d=this.prevPlacement,h=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;var v=d?d.symbolFadeChange(c):1,I=d?d.opacities:{},M=d?d.variableOffsets:{},O=d?d.placedOrientations:{};for(var V in this.placements){var X=this.placements[V],it=I[V];it?(this.opacities[V]=new Oa(it,v,X.text,X.icon),h=h||X.text!==it.text.placed||X.icon!==it.icon.placed):(this.opacities[V]=new Oa(null,v,X.text,X.icon,X.skipFade),h=h||X.text||X.icon)}for(var vt in I){var yt=I[vt];if(!this.opacities[vt]){var xt=new Oa(yt,v,!1,!1);xt.isHidden()||(this.opacities[vt]=xt,h=h||yt.text.placed||yt.icon.placed)}}for(var Bt in M)this.variableOffsets[Bt]||!this.opacities[Bt]||this.opacities[Bt].isHidden()||(this.variableOffsets[Bt]=M[Bt]);for(var Lt in O)this.placedOrientations[Lt]||!this.opacities[Lt]||this.opacities[Lt].isHidden()||(this.placedOrientations[Lt]=O[Lt]);h?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:c)},Xt.prototype.updateLayerOpacities=function(c,d){for(var h={},v=0,I=d;v<I.length;v+=1){var M=I[v],O=M.getBucket(c);O&&M.latestFeatureIndex&&c.id===O.layerIds[0]&&this.updateBucketOpacities(O,h,M.collisionBoxArray)}},Xt.prototype.updateBucketOpacities=function(c,d,h){var v=this;c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();var I=c.layers[0].layout,M=new Oa(null,0,!1,!1,!0),O=I.get("text-allow-overlap"),V=I.get("icon-allow-overlap"),X=I.get("text-variable-anchor"),it=I.get("text-rotation-alignment")==="map",vt=I.get("text-pitch-alignment")==="map",yt=I.get("icon-text-fit")!=="none",xt=new Oa(null,0,O&&(V||!c.hasIconData()||I.get("icon-optional")),V&&(O||!c.hasTextData()||I.get("text-optional")),!0);!c.collisionArrays&&h&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(h);for(var Bt=function(Gt,Qt,de){for(var ke=0;ke<Qt/4;ke++)Gt.opacityVertexArray.emplaceBack(de)},Lt=function(Gt){var Qt=c.symbolInstances.get(Gt),de=Qt.numHorizontalGlyphVertices,ke=Qt.numVerticalGlyphVertices,Me=Qt.crossTileID,Oe=v.opacities[Me];d[Me]?Oe=M:Oe||(v.opacities[Me]=Oe=xt),d[Me]=!0;var He=Qt.numIconVertices>0,Xe=v.placedOrientations[Qt.crossTileID],rn=Xe===i.WritingMode.vertical,yn=Xe===i.WritingMode.horizontal||Xe===i.WritingMode.horizontalOnly;if(de>0||ke>0){var On=Pr(Oe.text);Bt(c.text,de,rn?Ui:On),Bt(c.text,ke,yn?Ui:On);var Xn=Oe.text.isHidden();[Qt.rightJustifiedTextSymbolIndex,Qt.centerJustifiedTextSymbolIndex,Qt.leftJustifiedTextSymbolIndex].forEach(function(zn){zn>=0&&(c.text.placedSymbolArray.get(zn).hidden=Xn||rn?1:0)}),Qt.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(Qt.verticalPlacedTextSymbolIndex).hidden=Xn||yn?1:0);var Kn=v.variableOffsets[Qt.crossTileID];Kn&&v.markUsedJustification(c,Kn.anchor,Qt,Xe);var Xr=v.placedOrientations[Qt.crossTileID];Xr&&(v.markUsedJustification(c,"left",Qt,Xr),v.markUsedOrientation(c,Xr,Qt))}if(He){var Cn=Pr(Oe.icon),er=!(yt&&Qt.verticalPlacedIconSymbolIndex&&rn);Qt.placedIconSymbolIndex>=0&&(Bt(c.icon,Qt.numIconVertices,er?Cn:Ui),c.icon.placedSymbolArray.get(Qt.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),Qt.verticalPlacedIconSymbolIndex>=0&&(Bt(c.icon,Qt.numVerticalIconVertices,er?Ui:Cn),c.icon.placedSymbolArray.get(Qt.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){var Cr=c.collisionArrays[Gt];if(Cr){var dr=new i.Point(0,0);if(Cr.textBox||Cr.verticalTextBox){var sr=!0;if(X){var Ir=v.variableOffsets[Me];Ir?(dr=zt(Ir.anchor,Ir.width,Ir.height,Ir.textOffset,Ir.textBoxScale),it&&dr._rotate(vt?v.transform.angle:-v.transform.angle)):sr=!1}Cr.textBox&&he(c.textCollisionBox.collisionVertexArray,Oe.text.placed,!sr||rn,dr.x,dr.y),Cr.verticalTextBox&&he(c.textCollisionBox.collisionVertexArray,Oe.text.placed,!sr||yn,dr.x,dr.y)}var cr=!!(!yn&&Cr.verticalIconBox);Cr.iconBox&&he(c.iconCollisionBox.collisionVertexArray,Oe.icon.placed,cr,yt?dr.x:0,yt?dr.y:0),Cr.verticalIconBox&&he(c.iconCollisionBox.collisionVertexArray,Oe.icon.placed,!cr,yt?dr.x:0,yt?dr.y:0)}}},Ht=0;Ht<c.symbolInstances.length;Ht++)Lt(Ht);if(c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){var Mt=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=Mt.invProjMatrix,c.placementViewportMatrix=Mt.viewportMatrix,c.collisionCircleArray=Mt.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}},Xt.prototype.symbolFadeChange=function(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Xt.prototype.zoomAdjustment=function(c){return Math.max(0,(this.transform.zoom-c)/1.5)},Xt.prototype.hasTransitions=function(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration},Xt.prototype.stillRecent=function(c,d){var h=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*h>c},Xt.prototype.setStale=function(){this.stale=!0};var nn=Math.pow(2,25),fn=Math.pow(2,24),En=Math.pow(2,17),Pn=Math.pow(2,16),vn=Math.pow(2,9),wr=Math.pow(2,8),to=Math.pow(2,1);function Pr(c){if(c.opacity===0&&!c.placed)return 0;if(c.opacity===1&&c.placed)return 4294967295;var d=c.placed?1:0,h=Math.floor(127*c.opacity);return h*nn+d*fn+h*En+d*Pn+h*vn+d*wr+h*to+d}var Ui=0,Ze=function(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&c.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ze.prototype.continuePlacement=function(c,d,h,v,I){for(var M=this._bucketParts;this._currentTileIndex<c.length;)if(d.getBucketParts(M,v,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,I())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort(function(O,V){return O.sortKey-V.sortKey}));this._currentPartIndex<M.length;)if(d.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,I())return!0;return!1};var Wn=function(c,d,h,v,I,M,O){this.placement=new Xt(c,I,M,O),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=v,this._done=!1};Wn.prototype.isDone=function(){return this._done},Wn.prototype.continuePlacement=function(c,d,h){for(var v=this,I=i.browser.now(),M=function(){var X=i.browser.now()-I;return!v._forceFullPlacement&&X>2};this._currentPlacementIndex>=0;){var O=d[c[this._currentPlacementIndex]],V=this.placement.collisionIndex.transform.zoom;if(O.type==="symbol"&&(!O.minzoom||O.minzoom<=V)&&(!O.maxzoom||O.maxzoom>V)){if(this._inProgressLayer||(this._inProgressLayer=new Ze(O)),this._inProgressLayer.continuePlacement(h[O.source],this.placement,this._showCollisionBoxes,O,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Wn.prototype.commit=function(c){return this.placement.commit(c),this.placement};var Ai=512/i.EXTENT/2,xo=function(c,d,h){this.tileID=c,this.indexedSymbolInstances={},this.bucketInstanceId=h;for(var v=0;v<d.length;v++){var I=d.get(v),M=I.key;this.indexedSymbolInstances[M]||(this.indexedSymbolInstances[M]=[]),this.indexedSymbolInstances[M].push({crossTileID:I.crossTileID,coord:this.getScaledCoordinates(I,c)})}};xo.prototype.getScaledCoordinates=function(c,d){var h=Ai/Math.pow(2,d.canonical.z-this.tileID.canonical.z);return{x:Math.floor((d.canonical.x*i.EXTENT+c.anchorX)*h),y:Math.floor((d.canonical.y*i.EXTENT+c.anchorY)*h)}},xo.prototype.findMatches=function(c,d,h){for(var v=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),I=0;I<c.length;I++){var M=c.get(I);if(!M.crossTileID){var O=this.indexedSymbolInstances[M.key];if(O)for(var V=this.getScaledCoordinates(M,d),X=0,it=O;X<it.length;X+=1){var vt=it[X];if(Math.abs(vt.coord.x-V.x)<=v&&Math.abs(vt.coord.y-V.y)<=v&&!h[vt.crossTileID]){h[vt.crossTileID]=!0,M.crossTileID=vt.crossTileID;break}}}}};var mi=function(){this.maxCrossTileID=0};mi.prototype.generate=function(){return++this.maxCrossTileID};var Us=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Us.prototype.handleWrapJump=function(c){var d=Math.round((c-this.lng)/360);if(d!==0)for(var h in this.indexes){var v=this.indexes[h],I={};for(var M in v){var O=v[M];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+d),I[O.tileID.key]=O}this.indexes[h]=I}this.lng=c},Us.prototype.addBucket=function(c,d,h){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(var v=0;v<d.symbolInstances.length;v++)d.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});var I=this.usedCrossTileIDs[c.overscaledZ];for(var M in this.indexes){var O=this.indexes[M];if(Number(M)>c.overscaledZ)for(var V in O){var X=O[V];X.tileID.isChildOf(c)&&X.findMatches(d.symbolInstances,c,I)}else{var it=O[c.scaledTo(Number(M)).key];it&&it.findMatches(d.symbolInstances,c,I)}}for(var vt=0;vt<d.symbolInstances.length;vt++){var yt=d.symbolInstances.get(vt);yt.crossTileID||(yt.crossTileID=h.generate(),I[yt.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new xo(c,d.symbolInstances,d.bucketInstanceId),!0},Us.prototype.removeBucketCrossTileIDs=function(c,d){for(var h in d.indexedSymbolInstances)for(var v=0,I=d.indexedSymbolInstances[h];v<I.length;v+=1)delete this.usedCrossTileIDs[c][I[v].crossTileID]},Us.prototype.removeStaleBuckets=function(c){var d=!1;for(var h in this.indexes){var v=this.indexes[h];for(var I in v)c[v[I].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,v[I]),delete v[I],d=!0)}return d};var Pl=function(){this.layerIndexes={},this.crossTileIDs=new mi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Pl.prototype.addLayer=function(c,d,h){var v=this.layerIndexes[c.id];v===void 0&&(v=this.layerIndexes[c.id]=new Us);var I=!1,M={};v.handleWrapJump(h);for(var O=0,V=d;O<V.length;O+=1){var X=V[O],it=X.getBucket(c);it&&c.id===it.layerIds[0]&&(it.bucketInstanceId||(it.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(X.tileID,it,this.crossTileIDs)&&(I=!0),M[it.bucketInstanceId]=!0)}return v.removeStaleBuckets(M)&&(I=!0),I},Pl.prototype.pruneUnusedLayers=function(c){var d={};for(var h in c.forEach(function(v){d[v]=!0}),this.layerIndexes)d[h]||delete this.layerIndexes[h]};var _i=function(c,d){return i.emitValidationErrors(c,d&&d.filter(function(h){return h.identifier!=="source.canvas"}))},ul=i.pick(pn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),kl=i.pick(pn,["setCenter","setZoom","setBearing","setPitch"]),ni=function(){var c={},d=i.styleSpec.$version;for(var h in i.styleSpec.$root){var v,I=i.styleSpec.$root[h];I.required&&(v=h==="version"?d:I.type==="array"?[]:{})!=null&&(c[h]=v)}return c}(),Gr=function(c){function d(h,v){var I=this;v===void 0&&(v={}),c.call(this),this.map=h,this.dispatcher=new Z(Re(),this),this.imageManager=new D,this.imageManager.setEventedParent(this),this.glyphManager=new G(h._requestManager,v.localIdeographFontFamily),this.lineAtlas=new ot(256,512),this.crossTileSymbolIndex=new Pl,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",i.getReferrer());var M=this;this._rtlTextPluginCallback=d.registerForPluginStateChange(function(O){M.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:O.pluginStatus,pluginURL:O.pluginURL},function(V,X){if(i.triggerPluginCompletionEvent(V),X&&X.every(function(vt){return vt}))for(var it in M.sourceCaches)M.sourceCaches[it].reload()})}),this.on("data",function(O){if(O.dataType==="source"&&O.sourceDataType==="metadata"){var V=I.sourceCaches[O.sourceId];if(V){var X=V.getSource();if(X&&X.vectorLayerIds)for(var it in I._layers){var vt=I._layers[it];vt.source===X.id&&I._validateLayer(vt)}}}})}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.loadURL=function(h,v){var I=this;v===void 0&&(v={}),this.fire(new i.Event("dataloading",{dataType:"style"}));var M=typeof v.validate=="boolean"?v.validate:!i.isMapboxURL(h);h=this.map._requestManager.normalizeStyleURL(h,v.accessToken);var O=this.map._requestManager.transformRequest(h,i.ResourceType.Style);this._request=i.getJSON(O,function(V,X){I._request=null,V?I.fire(new i.ErrorEvent(V)):X&&I._load(X,M)})},d.prototype.loadJSON=function(h,v){var I=this;v===void 0&&(v={}),this.fire(new i.Event("dataloading",{dataType:"style"})),this._request=i.browser.frame(function(){I._request=null,I._load(h,v.validate!==!1)})},d.prototype.loadEmpty=function(){this.fire(new i.Event("dataloading",{dataType:"style"})),this._load(ni,!1)},d.prototype._load=function(h,v){if(!v||!_i(this,i.validateStyle(h))){for(var I in this._loaded=!0,this.stylesheet=h,h.sources)this.addSource(I,h.sources[I],{validate:!1});h.sprite?this._loadSprite(h.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(h.glyphs);var M=dn(this.stylesheet.layers);this._order=M.map(function(it){return it.id}),this._layers={},this._serializedLayers={};for(var O=0,V=M;O<V.length;O+=1){var X=V[O];(X=i.createStyleLayer(X)).setEventedParent(this,{layer:{id:X.id}}),this._layers[X.id]=X,this._serializedLayers[X.id]=X.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Q(this.stylesheet.light),this.fire(new i.Event("data",{dataType:"style"})),this.fire(new i.Event("style.load"))}},d.prototype._loadSprite=function(h){var v=this;this._spriteRequest=function(I,M,O){var V,X,it,vt=i.browser.devicePixelRatio>1?"@2x":"",yt=i.getJSON(M.transformRequest(M.normalizeSpriteURL(I,vt,".json"),i.ResourceType.SpriteJSON),function(Lt,Ht){yt=null,it||(it=Lt,V=Ht,Bt())}),xt=i.getImage(M.transformRequest(M.normalizeSpriteURL(I,vt,".png"),i.ResourceType.SpriteImage),function(Lt,Ht){xt=null,it||(it=Lt,X=Ht,Bt())});function Bt(){if(it)O(it);else if(V&&X){var Lt=i.browser.getImageData(X),Ht={};for(var Mt in V){var Gt=V[Mt],Qt=Gt.width,de=Gt.height,ke=Gt.x,Me=Gt.y,Oe=Gt.sdf,He=Gt.pixelRatio,Xe=Gt.stretchX,rn=Gt.stretchY,yn=Gt.content,On=new i.RGBAImage({width:Qt,height:de});i.RGBAImage.copy(Lt,On,{x:ke,y:Me},{x:0,y:0},{width:Qt,height:de}),Ht[Mt]={data:On,pixelRatio:He,sdf:Oe,stretchX:Xe,stretchY:rn,content:yn}}O(null,Ht)}}return{cancel:function(){yt&&(yt.cancel(),yt=null),xt&&(xt.cancel(),xt=null)}}}(h,this.map._requestManager,function(I,M){if(v._spriteRequest=null,I)v.fire(new i.ErrorEvent(I));else if(M)for(var O in M)v.imageManager.addImage(O,M[O]);v.imageManager.setLoaded(!0),v._availableImages=v.imageManager.listImages(),v.dispatcher.broadcast("setImages",v._availableImages),v.fire(new i.Event("data",{dataType:"style"}))})},d.prototype._validateLayer=function(h){var v=this.sourceCaches[h.source];if(v){var I=h.sourceLayer;if(I){var M=v.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(I)===-1)&&this.fire(new i.ErrorEvent(new Error('Source layer "'+I+'" does not exist on source "'+M.id+'" as specified by style layer "'+h.id+'"')))}}},d.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var h in this.sourceCaches)if(!this.sourceCaches[h].loaded())return!1;return!!this.imageManager.isLoaded()},d.prototype._serializeLayers=function(h){for(var v=[],I=0,M=h;I<M.length;I+=1){var O=this._layers[M[I]];O.type!=="custom"&&v.push(O.serialize())}return v},d.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var h in this.sourceCaches)if(this.sourceCaches[h].hasTransition())return!0;for(var v in this._layers)if(this._layers[v].hasTransition())return!0;return!1},d.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},d.prototype.update=function(h){if(this._loaded){var v=this._changed;if(this._changed){var I=Object.keys(this._updatedLayers),M=Object.keys(this._removedLayers);for(var O in(I.length||M.length)&&this._updateWorkerLayers(I,M),this._updatedSources){var V=this._updatedSources[O];V==="reload"?this._reloadSource(O):V==="clear"&&this._clearSource(O)}for(var X in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[X].updateTransitions(h);this.light.updateTransitions(h),this._resetUpdates()}var it={};for(var vt in this.sourceCaches){var yt=this.sourceCaches[vt];it[vt]=yt.used,yt.used=!1}for(var xt=0,Bt=this._order;xt<Bt.length;xt+=1){var Lt=this._layers[Bt[xt]];Lt.recalculate(h,this._availableImages),!Lt.isHidden(h.zoom)&&Lt.source&&(this.sourceCaches[Lt.source].used=!0)}for(var Ht in it){var Mt=this.sourceCaches[Ht];it[Ht]!==Mt.used&&Mt.fire(new i.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Ht}))}this.light.recalculate(h),this.z=h.zoom,v&&this.fire(new i.Event("data",{dataType:"style"}))}},d.prototype._updateTilesForChangedImages=function(){var h=Object.keys(this._changedImages);if(h.length){for(var v in this.sourceCaches)this.sourceCaches[v].reloadTilesForDependencies(["icons","patterns"],h);this._changedImages={}}},d.prototype._updateWorkerLayers=function(h,v){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(h),removedIds:v})},d.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},d.prototype.setState=function(h){var v=this;if(this._checkLoaded(),_i(this,i.validateStyle(h)))return!1;(h=i.clone$1(h)).layers=dn(h.layers);var I=function(O,V){if(!O)return[{command:pn.setStyle,args:[V]}];var X=[];try{if(!i.deepEqual(O.version,V.version))return[{command:pn.setStyle,args:[V]}];i.deepEqual(O.center,V.center)||X.push({command:pn.setCenter,args:[V.center]}),i.deepEqual(O.zoom,V.zoom)||X.push({command:pn.setZoom,args:[V.zoom]}),i.deepEqual(O.bearing,V.bearing)||X.push({command:pn.setBearing,args:[V.bearing]}),i.deepEqual(O.pitch,V.pitch)||X.push({command:pn.setPitch,args:[V.pitch]}),i.deepEqual(O.sprite,V.sprite)||X.push({command:pn.setSprite,args:[V.sprite]}),i.deepEqual(O.glyphs,V.glyphs)||X.push({command:pn.setGlyphs,args:[V.glyphs]}),i.deepEqual(O.transition,V.transition)||X.push({command:pn.setTransition,args:[V.transition]}),i.deepEqual(O.light,V.light)||X.push({command:pn.setLight,args:[V.light]});var it={},vt=[];(function(xt,Bt,Lt,Ht){var Mt;for(Mt in Bt=Bt||{},xt=xt||{})xt.hasOwnProperty(Mt)&&(Bt.hasOwnProperty(Mt)||bn(Mt,Lt,Ht));for(Mt in Bt)Bt.hasOwnProperty(Mt)&&(xt.hasOwnProperty(Mt)?i.deepEqual(xt[Mt],Bt[Mt])||(xt[Mt].type==="geojson"&&Bt[Mt].type==="geojson"&&ei(xt,Bt,Mt)?Lt.push({command:pn.setGeoJSONSourceData,args:[Mt,Bt[Mt].data]}):jr(Mt,Bt,Lt,Ht)):Er(Mt,Bt,Lt))})(O.sources,V.sources,vt,it);var yt=[];O.layers&&O.layers.forEach(function(xt){it[xt.source]?X.push({command:pn.removeLayer,args:[xt.id]}):yt.push(xt)}),X=X.concat(vt),function(xt,Bt,Lt){Bt=Bt||[];var Ht,Mt,Gt,Qt,de,ke,Me,Oe=(xt=xt||[]).map(Ur),He=Bt.map(Ur),Xe=xt.reduce(Vr,{}),rn=Bt.reduce(Vr,{}),yn=Oe.slice(),On=Object.create(null);for(Ht=0,Mt=0;Ht<Oe.length;Ht++)rn.hasOwnProperty(Gt=Oe[Ht])?Mt++:(Lt.push({command:pn.removeLayer,args:[Gt]}),yn.splice(yn.indexOf(Gt,Mt),1));for(Ht=0,Mt=0;Ht<He.length;Ht++)yn[yn.length-1-Ht]!==(Gt=He[He.length-1-Ht])&&(Xe.hasOwnProperty(Gt)?(Lt.push({command:pn.removeLayer,args:[Gt]}),yn.splice(yn.lastIndexOf(Gt,yn.length-Mt),1)):Mt++,Lt.push({command:pn.addLayer,args:[rn[Gt],ke=yn[yn.length-Ht]]}),yn.splice(yn.length-Ht,0,Gt),On[Gt]=!0);for(Ht=0;Ht<He.length;Ht++)if(Qt=Xe[Gt=He[Ht]],de=rn[Gt],!On[Gt]&&!i.deepEqual(Qt,de))if(i.deepEqual(Qt.source,de.source)&&i.deepEqual(Qt["source-layer"],de["source-layer"])&&i.deepEqual(Qt.type,de.type)){for(Me in Lr(Qt.layout,de.layout,Lt,Gt,null,pn.setLayoutProperty),Lr(Qt.paint,de.paint,Lt,Gt,null,pn.setPaintProperty),i.deepEqual(Qt.filter,de.filter)||Lt.push({command:pn.setFilter,args:[Gt,de.filter]}),i.deepEqual(Qt.minzoom,de.minzoom)&&i.deepEqual(Qt.maxzoom,de.maxzoom)||Lt.push({command:pn.setLayerZoomRange,args:[Gt,de.minzoom,de.maxzoom]}),Qt)Qt.hasOwnProperty(Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?Lr(Qt[Me],de[Me],Lt,Gt,Me.slice(6),pn.setPaintProperty):i.deepEqual(Qt[Me],de[Me])||Lt.push({command:pn.setLayerProperty,args:[Gt,Me,de[Me]]}));for(Me in de)de.hasOwnProperty(Me)&&!Qt.hasOwnProperty(Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?Lr(Qt[Me],de[Me],Lt,Gt,Me.slice(6),pn.setPaintProperty):i.deepEqual(Qt[Me],de[Me])||Lt.push({command:pn.setLayerProperty,args:[Gt,Me,de[Me]]}))}else Lt.push({command:pn.removeLayer,args:[Gt]}),ke=yn[yn.lastIndexOf(Gt)+1],Lt.push({command:pn.addLayer,args:[de,ke]})}(yt,V.layers,X)}catch(xt){console.warn("Unable to compute style diff:",xt),X=[{command:pn.setStyle,args:[V]}]}return X}(this.serialize(),h).filter(function(O){return!(O.command in kl)});if(I.length===0)return!1;var M=I.filter(function(O){return!(O.command in ul)});if(M.length>0)throw new Error("Unimplemented: "+M.map(function(O){return O.command}).join(", ")+".");return I.forEach(function(O){O.command!=="setTransition"&&v[O.command].apply(v,O.args)}),this.stylesheet=h,!0},d.prototype.addImage=function(h,v){if(this.getImage(h))return this.fire(new i.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(h,v),this._afterImageUpdated(h)},d.prototype.updateImage=function(h,v){this.imageManager.updateImage(h,v)},d.prototype.getImage=function(h){return this.imageManager.getImage(h)},d.prototype.removeImage=function(h){if(!this.getImage(h))return this.fire(new i.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(h),this._afterImageUpdated(h)},d.prototype._afterImageUpdated=function(h){this._availableImages=this.imageManager.listImages(),this._changedImages[h]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new i.Event("data",{dataType:"style"}))},d.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},d.prototype.addSource=function(h,v,I){var M=this;if(I===void 0&&(I={}),this._checkLoaded(),this.sourceCaches[h]!==void 0)throw new Error("There is already a source with this ID");if(!v.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(v).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(v.type)>=0&&this._validate(i.validateStyle.source,"sources."+h,v,null,I))){this.map&&this.map._collectResourceTiming&&(v.collectResourceTiming=!0);var O=this.sourceCaches[h]=new Nt(h,v,this.dispatcher);O.style=this,O.setEventedParent(this,function(){return{isSourceLoaded:M.loaded(),source:O.serialize(),sourceId:h}}),O.onAdd(this.map),this._changed=!0}},d.prototype.removeSource=function(h){if(this._checkLoaded(),this.sourceCaches[h]===void 0)throw new Error("There is no source with this ID");for(var v in this._layers)if(this._layers[v].source===h)return this.fire(new i.ErrorEvent(new Error('Source "'+h+'" cannot be removed while layer "'+v+'" is using it.')));var I=this.sourceCaches[h];delete this.sourceCaches[h],delete this._updatedSources[h],I.fire(new i.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:h})),I.setEventedParent(null),I.clearTiles(),I.onRemove&&I.onRemove(this.map),this._changed=!0},d.prototype.setGeoJSONSourceData=function(h,v){this._checkLoaded(),this.sourceCaches[h].getSource().setData(v),this._changed=!0},d.prototype.getSource=function(h){return this.sourceCaches[h]&&this.sourceCaches[h].getSource()},d.prototype.addLayer=function(h,v,I){I===void 0&&(I={}),this._checkLoaded();var M=h.id;if(this.getLayer(M))this.fire(new i.ErrorEvent(new Error('Layer with id "'+M+'" already exists on this map')));else{var O;if(h.type==="custom"){if(_i(this,i.validateCustomStyleLayer(h)))return;O=i.createStyleLayer(h)}else{if(typeof h.source=="object"&&(this.addSource(M,h.source),h=i.clone$1(h),h=i.extend(h,{source:M})),this._validate(i.validateStyle.layer,"layers."+M,h,{arrayIndex:-1},I))return;O=i.createStyleLayer(h),this._validateLayer(O),O.setEventedParent(this,{layer:{id:M}}),this._serializedLayers[O.id]=O.serialize()}var V=v?this._order.indexOf(v):this._order.length;if(v&&V===-1)this.fire(new i.ErrorEvent(new Error('Layer with id "'+v+'" does not exist on this map.')));else{if(this._order.splice(V,0,M),this._layerOrderChanged=!0,this._layers[M]=O,this._removedLayers[M]&&O.source&&O.type!=="custom"){var X=this._removedLayers[M];delete this._removedLayers[M],X.type!==O.type?this._updatedSources[O.source]="clear":(this._updatedSources[O.source]="reload",this.sourceCaches[O.source].pause())}this._updateLayer(O),O.onAdd&&O.onAdd(this.map)}}},d.prototype.moveLayer=function(h,v){if(this._checkLoaded(),this._changed=!0,this._layers[h]){if(h!==v){var I=this._order.indexOf(h);this._order.splice(I,1);var M=v?this._order.indexOf(v):this._order.length;v&&M===-1?this.fire(new i.ErrorEvent(new Error('Layer with id "'+v+'" does not exist on this map.'))):(this._order.splice(M,0,h),this._layerOrderChanged=!0)}}else this.fire(new i.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be moved.")))},d.prototype.removeLayer=function(h){this._checkLoaded();var v=this._layers[h];if(v){v.setEventedParent(null);var I=this._order.indexOf(h);this._order.splice(I,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[h]=v,delete this._layers[h],delete this._serializedLayers[h],delete this._updatedLayers[h],delete this._updatedPaintProps[h],v.onRemove&&v.onRemove(this.map)}else this.fire(new i.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be removed.")))},d.prototype.getLayer=function(h){return this._layers[h]},d.prototype.hasLayer=function(h){return h in this._layers},d.prototype.setLayerZoomRange=function(h,v,I){this._checkLoaded();var M=this.getLayer(h);M?M.minzoom===v&&M.maxzoom===I||(v!=null&&(M.minzoom=v),I!=null&&(M.maxzoom=I),this._updateLayer(M)):this.fire(new i.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot have zoom extent.")))},d.prototype.setFilter=function(h,v,I){I===void 0&&(I={}),this._checkLoaded();var M=this.getLayer(h);if(M){if(!i.deepEqual(M.filter,v))return v==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(i.validateStyle.filter,"layers."+M.id+".filter",v,null,I)||(M.filter=i.clone$1(v),this._updateLayer(M)))}else this.fire(new i.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be filtered.")))},d.prototype.getFilter=function(h){return i.clone$1(this.getLayer(h).filter)},d.prototype.setLayoutProperty=function(h,v,I,M){M===void 0&&(M={}),this._checkLoaded();var O=this.getLayer(h);O?i.deepEqual(O.getLayoutProperty(v),I)||(O.setLayoutProperty(v,I,M),this._updateLayer(O)):this.fire(new i.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be styled.")))},d.prototype.getLayoutProperty=function(h,v){var I=this.getLayer(h);if(I)return I.getLayoutProperty(v);this.fire(new i.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style.")))},d.prototype.setPaintProperty=function(h,v,I,M){M===void 0&&(M={}),this._checkLoaded();var O=this.getLayer(h);O?i.deepEqual(O.getPaintProperty(v),I)||(O.setPaintProperty(v,I,M)&&this._updateLayer(O),this._changed=!0,this._updatedPaintProps[h]=!0):this.fire(new i.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be styled.")))},d.prototype.getPaintProperty=function(h,v){return this.getLayer(h).getPaintProperty(v)},d.prototype.setFeatureState=function(h,v){this._checkLoaded();var I=h.source,M=h.sourceLayer,O=this.sourceCaches[I];if(O!==void 0){var V=O.getSource().type;V==="geojson"&&M?this.fire(new i.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):V!=="vector"||M?(h.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),O.setFeatureState(M,h.id,v)):this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error("The source '"+I+"' does not exist in the map's style.")))},d.prototype.removeFeatureState=function(h,v){this._checkLoaded();var I=h.source,M=this.sourceCaches[I];if(M!==void 0){var O=M.getSource().type,V=O==="vector"?h.sourceLayer:void 0;O!=="vector"||V?v&&typeof h.id!="string"&&typeof h.id!="number"?this.fire(new i.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(V,h.id,v):this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error("The source '"+I+"' does not exist in the map's style.")))},d.prototype.getFeatureState=function(h){this._checkLoaded();var v=h.source,I=h.sourceLayer,M=this.sourceCaches[v];if(M!==void 0){if(M.getSource().type!=="vector"||I)return h.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),M.getFeatureState(I,h.id);this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error("The source '"+v+"' does not exist in the map's style.")))},d.prototype.getTransition=function(){return i.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},d.prototype.serialize=function(){return i.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:i.mapObject(this.sourceCaches,function(h){return h.serialize()}),layers:this._serializeLayers(this._order)},function(h){return h!==void 0})},d.prototype._updateLayer=function(h){this._updatedLayers[h.id]=!0,h.source&&!this._updatedSources[h.source]&&this.sourceCaches[h.source].getSource().type!=="raster"&&(this._updatedSources[h.source]="reload",this.sourceCaches[h.source].pause()),this._changed=!0},d.prototype._flattenAndSortRenderedFeatures=function(h){for(var v=this,I=function(Xe){return v._layers[Xe].type==="fill-extrusion"},M={},O=[],V=this._order.length-1;V>=0;V--){var X=this._order[V];if(I(X)){M[X]=V;for(var it=0,vt=h;it<vt.length;it+=1){var yt=vt[it][X];if(yt)for(var xt=0,Bt=yt;xt<Bt.length;xt+=1)O.push(Bt[xt])}}}O.sort(function(Xe,rn){return rn.intersectionZ-Xe.intersectionZ});for(var Lt=[],Ht=this._order.length-1;Ht>=0;Ht--){var Mt=this._order[Ht];if(I(Mt))for(var Gt=O.length-1;Gt>=0;Gt--){var Qt=O[Gt].feature;if(M[Qt.layer.id]<Ht)break;Lt.push(Qt),O.pop()}else for(var de=0,ke=h;de<ke.length;de+=1){var Me=ke[de][Mt];if(Me)for(var Oe=0,He=Me;Oe<He.length;Oe+=1)Lt.push(He[Oe].feature)}}return Lt},d.prototype.queryRenderedFeatures=function(h,v,I){v&&v.filter&&this._validate(i.validateStyle.filter,"queryRenderedFeatures.filter",v.filter,null,v);var M={};if(v&&v.layers){if(!Array.isArray(v.layers))return this.fire(new i.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var O=0,V=v.layers;O<V.length;O+=1){var X=V[O],it=this._layers[X];if(!it)return this.fire(new i.ErrorEvent(new Error("The layer '"+X+"' does not exist in the map's style and cannot be queried for features."))),[];M[it.source]=!0}}var vt=[];for(var yt in v.availableImages=this._availableImages,this.sourceCaches)v.layers&&!M[yt]||vt.push(fe(this.sourceCaches[yt],this._layers,this._serializedLayers,h,v,I));return this.placement&&vt.push(function(xt,Bt,Lt,Ht,Mt,Gt,Qt){for(var de={},ke=Gt.queryRenderedSymbols(Ht),Me=[],Oe=0,He=Object.keys(ke).map(Number);Oe<He.length;Oe+=1)Me.push(Qt[He[Oe]]);Me.sort(ge);for(var Xe=function(){var Kn=yn[rn],Xr=Kn.featureIndex.lookupSymbolFeatures(ke[Kn.bucketInstanceId],Bt,Kn.bucketIndex,Kn.sourceLayerIndex,Mt.filter,Mt.layers,Mt.availableImages,xt);for(var Cn in Xr){var er=de[Cn]=de[Cn]||[],Cr=Xr[Cn];Cr.sort(function(Ir,cr){var zn=Kn.featureSortOrder;if(zn){var Lo=zn.indexOf(Ir.featureIndex);return zn.indexOf(cr.featureIndex)-Lo}return cr.featureIndex-Ir.featureIndex});for(var dr=0,sr=Cr;dr<sr.length;dr+=1)er.push(sr[dr])}},rn=0,yn=Me;rn<yn.length;rn+=1)Xe();var On=function(Kn){de[Kn].forEach(function(Xr){var Cn=Xr.feature,er=Lt[xt[Kn].source].getFeatureState(Cn.layer["source-layer"],Cn.id);Cn.source=Cn.layer.source,Cn.layer["source-layer"]&&(Cn.sourceLayer=Cn.layer["source-layer"]),Cn.state=er})};for(var Xn in de)On(Xn);return de}(this._layers,this._serializedLayers,this.sourceCaches,h,v,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(vt)},d.prototype.querySourceFeatures=function(h,v){v&&v.filter&&this._validate(i.validateStyle.filter,"querySourceFeatures.filter",v.filter,null,v);var I=this.sourceCaches[h];return I?function(M,O){for(var V=M.getRenderableIds().map(function(Bt){return M.getTileByID(Bt)}),X=[],it={},vt=0;vt<V.length;vt++){var yt=V[vt],xt=yt.tileID.canonical.key;it[xt]||(it[xt]=!0,yt.querySourceFeatures(X,O))}return X}(I,v):[]},d.prototype.addSourceType=function(h,v,I){return d.getSourceType(h)?I(new Error('A source type called "'+h+'" already exists.')):(d.setSourceType(h,v),v.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:h,url:v.workerSourceURL},I):I(null,null))},d.prototype.getLight=function(){return this.light.getLight()},d.prototype.setLight=function(h,v){v===void 0&&(v={}),this._checkLoaded();var I=this.light.getLight(),M=!1;for(var O in h)if(!i.deepEqual(h[O],I[O])){M=!0;break}if(M){var V={now:i.browser.now(),transition:i.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(h,v),this.light.updateTransitions(V)}},d.prototype._validate=function(h,v,I,M,O){return O===void 0&&(O={}),(!O||O.validate!==!1)&&_i(this,h.call(i.validateStyle,i.extend({key:v,style:this.serialize(),value:I,styleSpec:i.styleSpec},M)))},d.prototype._remove=function(){for(var h in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[h].setEventedParent(null);for(var v in this.sourceCaches)this.sourceCaches[v].clearTiles(),this.sourceCaches[v].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},d.prototype._clearSource=function(h){this.sourceCaches[h].clearTiles()},d.prototype._reloadSource=function(h){this.sourceCaches[h].resume(),this.sourceCaches[h].reload()},d.prototype._updateSources=function(h){for(var v in this.sourceCaches)this.sourceCaches[v].update(h)},d.prototype._generateCollisionBoxes=function(){for(var h in this.sourceCaches)this._reloadSource(h)},d.prototype._updatePlacement=function(h,v,I,M,O){O===void 0&&(O=!1);for(var V=!1,X=!1,it={},vt=0,yt=this._order;vt<yt.length;vt+=1){var xt=this._layers[yt[vt]];if(xt.type==="symbol"){if(!it[xt.source]){var Bt=this.sourceCaches[xt.source];it[xt.source]=Bt.getRenderableIds(!0).map(function(Qt){return Bt.getTileByID(Qt)}).sort(function(Qt,de){return de.tileID.overscaledZ-Qt.tileID.overscaledZ||(Qt.tileID.isLessThan(de.tileID)?-1:1)})}var Lt=this.crossTileSymbolIndex.addLayer(xt,it[xt.source],h.center.lng);V=V||Lt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((O=O||this._layerOrderChanged||I===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.browser.now(),h.zoom))&&(this.pauseablePlacement=new Wn(h,this._order,O,v,I,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,it),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.browser.now()),X=!0),V&&this.pauseablePlacement.placement.setStale()),X||V)for(var Ht=0,Mt=this._order;Ht<Mt.length;Ht+=1){var Gt=this._layers[Mt[Ht]];Gt.type==="symbol"&&this.placement.updateLayerOpacities(Gt,it[Gt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.browser.now())},d.prototype._releaseSymbolFadeTiles=function(){for(var h in this.sourceCaches)this.sourceCaches[h].releaseSymbolFadeTiles()},d.prototype.getImages=function(h,v,I){this.imageManager.getImages(v.icons,I),this._updateTilesForChangedImages();var M=this.sourceCaches[v.source];M&&M.setDependencies(v.tileID.key,v.type,v.icons)},d.prototype.getGlyphs=function(h,v,I){this.glyphManager.getGlyphs(v.stacks,I)},d.prototype.getResource=function(h,v,I){return i.makeRequest(v,I)},d}(i.Evented);Gr.getSourceType=function(c){return we[c]},Gr.setSourceType=function(c,d){we[c]=d},Gr.registerForPluginStateChange=i.registerForPluginStateChange;var so=i.createLayout([{name:"a_pos",type:"Int16",components:2}]),hu=gi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),rh=gi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Df=gi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),zf=gi(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),zh=gi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ih=gi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Bh=gi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),So=gi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ac=gi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),cl=gi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Bf=gi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fu=gi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Bo=gi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),wc=gi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Mo=gi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ya=gi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Vs=gi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),js=gi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ll=gi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),To=gi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Cs=gi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Fo=gi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Ol=gi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),hl=gi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),xa=gi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Uu=gi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function gi(c,d){var h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=d.match(/attribute ([\w]+) ([\w]+)/g),I=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=M?M.concat(I):I,V={};return{fragmentSource:c=c.replace(h,function(X,it,vt,yt,xt){return V[xt]=!0,it==="define"?`
#ifndef HAS_UNIFORM_u_`+xt+`
varying `+vt+" "+yt+" "+xt+`;
#else
uniform `+vt+" "+yt+" u_"+xt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+xt+`
    `+vt+" "+yt+" "+xt+" = u_"+xt+`;
#endif
`}),vertexSource:d=d.replace(h,function(X,it,vt,yt,xt){var Bt=yt==="float"?"vec2":"vec4",Lt=xt.match(/color/)?"color":Bt;return V[xt]?it==="define"?`
#ifndef HAS_UNIFORM_u_`+xt+`
uniform lowp float u_`+xt+`_t;
attribute `+vt+" "+Bt+" a_"+xt+`;
varying `+vt+" "+yt+" "+xt+`;
#else
uniform `+vt+" "+yt+" u_"+xt+`;
#endif
`:Lt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+xt+`
    `+xt+" = a_"+xt+`;
#else
    `+vt+" "+yt+" "+xt+" = u_"+xt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+xt+`
    `+xt+" = unpack_mix_"+Lt+"(a_"+xt+", u_"+xt+`_t);
#else
    `+vt+" "+yt+" "+xt+" = u_"+xt+`;
#endif
`:it==="define"?`
#ifndef HAS_UNIFORM_u_`+xt+`
uniform lowp float u_`+xt+`_t;
attribute `+vt+" "+Bt+" a_"+xt+`;
#else
uniform `+vt+" "+yt+" u_"+xt+`;
#endif
`:Lt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+xt+`
    `+vt+" "+yt+" "+xt+" = a_"+xt+`;
#else
    `+vt+" "+yt+" "+xt+" = u_"+xt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+xt+`
    `+vt+" "+yt+" "+xt+" = unpack_mix_"+Lt+"(a_"+xt+", u_"+xt+`_t);
#else
    `+vt+" "+yt+" "+xt+" = u_"+xt+`;
#endif
`}),staticAttributes:v,staticUniforms:O}}var eo=Object.freeze({__proto__:null,prelude:hu,background:rh,backgroundPattern:Df,circle:zf,clippingMask:zh,heatmap:ih,heatmapTexture:Bh,collisionBox:So,collisionCircle:Ac,debug:cl,fill:Bf,fillOutline:fu,fillOutlinePattern:Bo,fillPattern:wc,fillExtrusion:Mo,fillExtrusionPattern:Ya,hillshadePrepare:Vs,hillshade:js,line:Ll,lineGradient:To,linePattern:Cs,lineSDF:Fo,raster:Ol,symbolIcon:hl,symbolSDF:xa,symbolTextAndIcon:Uu}),Xa=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Rl(c){for(var d=[],h=0;h<c.length;h++)if(c[h]!==null){var v=c[h].split(" ");d.push(v.pop())}return d}Xa.prototype.bind=function(c,d,h,v,I,M,O,V){this.context=c;for(var X=this.boundPaintVertexBuffers.length!==v.length,it=0;!X&&it<v.length;it++)this.boundPaintVertexBuffers[it]!==v[it]&&(X=!0);c.extVertexArrayObject&&this.vao&&this.boundProgram===d&&this.boundLayoutVertexBuffer===h&&!X&&this.boundIndexBuffer===I&&this.boundVertexOffset===M&&this.boundDynamicVertexBuffer===O&&this.boundDynamicVertexBuffer2===V?(c.bindVertexArrayOES.set(this.vao),O&&O.bind(),I&&I.dynamicDraw&&I.bind(),V&&V.bind()):this.freshBind(d,h,v,I,M,O,V)},Xa.prototype.freshBind=function(c,d,h,v,I,M,O){var V,X=c.numAttributes,it=this.context,vt=it.gl;if(it.extVertexArrayObject)this.vao&&this.destroy(),this.vao=it.extVertexArrayObject.createVertexArrayOES(),it.bindVertexArrayOES.set(this.vao),V=0,this.boundProgram=c,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=v,this.boundVertexOffset=I,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=O;else{V=it.currentNumAttributes||0;for(var yt=X;yt<V;yt++)vt.disableVertexAttribArray(yt)}d.enableAttributes(vt,c);for(var xt=0,Bt=h;xt<Bt.length;xt+=1)Bt[xt].enableAttributes(vt,c);M&&M.enableAttributes(vt,c),O&&O.enableAttributes(vt,c),d.bind(),d.setVertexAttribPointers(vt,c,I);for(var Lt=0,Ht=h;Lt<Ht.length;Lt+=1){var Mt=Ht[Lt];Mt.bind(),Mt.setVertexAttribPointers(vt,c,I)}M&&(M.bind(),M.setVertexAttribPointers(vt,c,I)),v&&v.bind(),O&&(O.bind(),O.setVertexAttribPointers(vt,c,I)),it.currentNumAttributes=X},Xa.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var oh=function(c,d,h,v,I,M){var O=c.gl;this.program=O.createProgram();for(var V=Rl(h.staticAttributes),X=v?v.getBinderAttributes():[],it=V.concat(X),vt=h.staticUniforms?Rl(h.staticUniforms):[],yt=v?v.getBinderUniforms():[],xt=[],Bt=0,Lt=vt.concat(yt);Bt<Lt.length;Bt+=1){var Ht=Lt[Bt];xt.indexOf(Ht)<0&&xt.push(Ht)}var Mt=v?v.defines():[];M&&Mt.push("#define OVERDRAW_INSPECTOR;");var Gt=Mt.concat(hu.fragmentSource,h.fragmentSource).join(`
`),Qt=Mt.concat(hu.vertexSource,h.vertexSource).join(`
`),de=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(de,Gt),O.compileShader(de),O.attachShader(this.program,de);var ke=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(ke,Qt),O.compileShader(ke),O.attachShader(this.program,ke),this.attributes={};var Me={};this.numAttributes=it.length;for(var Oe=0;Oe<this.numAttributes;Oe++)it[Oe]&&(O.bindAttribLocation(this.program,Oe,it[Oe]),this.attributes[it[Oe]]=Oe);O.linkProgram(this.program),O.deleteShader(ke),O.deleteShader(de);for(var He=0;He<xt.length;He++){var Xe=xt[He];if(Xe&&!Me[Xe]){var rn=O.getUniformLocation(this.program,Xe);rn&&(Me[Xe]=rn)}}this.fixedUniforms=I(c,Me),this.binderUniforms=v?v.getUniforms(c,Me):[]}}};function Vu(c,d,h){var v=1/Di(h,1,d.transform.tileZoom),I=Math.pow(2,h.tileID.overscaledZ),M=h.tileSize*Math.pow(2,d.transform.tileZoom)/I,O=M*(h.tileID.canonical.x+h.tileID.wrap*I),V=M*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[v,c.fromScale,c.toScale],u_fade:c.t,u_pixel_coord_upper:[O>>16,V>>16],u_pixel_coord_lower:[65535&O,65535&V]}}oh.prototype.draw=function(c,d,h,v,I,M,O,V,X,it,vt,yt,xt,Bt,Lt,Ht){var Mt,Gt=c.gl;if(!this.failedToCreate){for(var Qt in c.program.set(this.program),c.setDepthMode(h),c.setStencilMode(v),c.setColorMode(I),c.setCullFace(M),this.fixedUniforms)this.fixedUniforms[Qt].set(O[Qt]);Bt&&Bt.setUniforms(c,this.binderUniforms,yt,{zoom:xt});for(var de=(Mt={},Mt[Gt.LINES]=2,Mt[Gt.TRIANGLES]=3,Mt[Gt.LINE_STRIP]=1,Mt)[d],ke=0,Me=vt.get();ke<Me.length;ke+=1){var Oe=Me[ke],He=Oe.vaos||(Oe.vaos={});(He[V]||(He[V]=new Xa)).bind(c,this,X,Bt?Bt.getPaintVertexBuffers():[],it,Oe.vertexOffset,Lt,Ht),Gt.drawElements(d,Oe.primitiveLength*de,Gt.UNSIGNED_SHORT,Oe.primitiveOffset*de*2)}}};var ah=function(c,d,h,v){var I=d.style.light,M=I.properties.get("position"),O=[M.x,M.y,M.z],V=i.create$1();I.properties.get("anchor")==="viewport"&&i.fromRotation(V,-d.transform.angle),i.transformMat3(O,O,V);var X=I.properties.get("color");return{u_matrix:c,u_lightpos:O,u_lightintensity:I.properties.get("intensity"),u_lightcolor:[X.r,X.g,X.b],u_vertical_gradient:+h,u_opacity:v}},Is=function(c,d,h,v,I,M,O){return i.extend(ah(c,d,h,v),Vu(M,d,O),{u_height_factor:-Math.pow(2,I.overscaledZ)/O.tileSize/8})},Dl=function(c){return{u_matrix:c}},zl=function(c,d,h,v){return i.extend(Dl(c),Vu(h,d,v))},Cc=function(c,d){return{u_matrix:c,u_world:d}},du=function(c,d,h,v,I){return i.extend(zl(c,d,h,v),{u_world:I})},Fh=function(c,d,h,v){var I,M,O=c.transform;if(v.paint.get("circle-pitch-alignment")==="map"){var V=Di(h,1,O.zoom);I=!0,M=[V,V]}else I=!1,M=O.pixelsToGLUnits;return{u_camera_to_center_distance:O.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:c.translatePosMatrix(d.posMatrix,h,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+I,u_device_pixel_ratio:i.browser.devicePixelRatio,u_extrude_scale:M}},fl=function(c,d,h){var v=Di(h,1,d.zoom),I=Math.pow(2,d.zoom-h.tileID.overscaledZ),M=h.tileID.overscaleFactor();return{u_matrix:c,u_camera_to_center_distance:d.cameraToCenterDistance,u_pixels_to_tile_units:v,u_extrude_scale:[d.pixelsToGLUnits[0]/(v*I),d.pixelsToGLUnits[1]/(v*I)],u_overscale_factor:M}},Ic=function(c,d,h){return{u_matrix:c,u_inv_matrix:d,u_camera_to_center_distance:h.cameraToCenterDistance,u_viewport_size:[h.width,h.height]}},Aa=function(c,d,h){return h===void 0&&(h=1),{u_matrix:c,u_color:d,u_overlay:0,u_overlay_scale:h}},ea=function(c){return{u_matrix:c}},dl=function(c,d,h,v){return{u_matrix:c,u_extrude_scale:Di(d,1,h),u_intensity:v}},Bl=function(c,d,h){var v=c.transform;return{u_matrix:wa(c,d,h),u_ratio:1/Di(d,1,v.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},qr=function(c,d,h,v){return i.extend(Bl(c,d,h),{u_image:0,u_image_height:v})},ju=function(c,d,h,v){var I=c.transform,M=Es(d,I);return{u_matrix:wa(c,d,h),u_texsize:d.imageAtlasTexture.size,u_ratio:1/Di(d,1,I.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_image:0,u_scale:[M,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},sh=function(c,d,h,v,I){var M=c.lineAtlas,O=Es(d,c.transform),V=h.layout.get("line-cap")==="round",X=M.getDash(v.from,V),it=M.getDash(v.to,V),vt=X.width*I.fromScale,yt=it.width*I.toScale;return i.extend(Bl(c,d,h),{u_patternscale_a:[O/vt,-X.height/2],u_patternscale_b:[O/yt,-it.height/2],u_sdfgamma:M.width/(256*Math.min(vt,yt)*i.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:X.y,u_tex_y_b:it.y,u_mix:I.t})};function Es(c,d){return 1/Di(c,1,d.tileZoom)}function wa(c,d,h){return c.translatePosMatrix(d.tileID.posMatrix,d,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}var lh=function(c,d,h,v,I){return{u_matrix:c,u_tl_parent:d,u_scale_parent:h,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*I.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:I.paint.get("raster-brightness-min"),u_brightness_high:I.paint.get("raster-brightness-max"),u_saturation_factor:(O=I.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(M=I.paint.get("raster-contrast"),M>0?1/(1-M):1+M),u_spin_weights:Hu(I.paint.get("raster-hue-rotate"))};var M,O};function Hu(c){c*=Math.PI/180;var d=Math.sin(c),h=Math.cos(c);return[(2*h+1)/3,(-Math.sqrt(3)*d-h+1)/3,(Math.sqrt(3)*d-h+1)/3]}var Ec,Fl=function(c,d,h,v,I,M,O,V,X,it){var vt=I.transform;return{u_is_size_zoom_constant:+(c==="constant"||c==="source"),u_is_size_feature_constant:+(c==="constant"||c==="camera"),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:vt.cameraToCenterDistance,u_pitch:vt.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:vt.width/vt.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:O,u_coord_matrix:V,u_is_text:+X,u_pitch_with_map:+v,u_texsize:it,u_texture:0}},Gu=function(c,d,h,v,I,M,O,V,X,it,vt){var yt=I.transform;return i.extend(Fl(c,d,h,v,I,M,O,V,X,it),{u_gamma_scale:v?Math.cos(yt._pitch)*yt.cameraToCenterDistance:1,u_device_pixel_ratio:i.browser.devicePixelRatio,u_is_halo:+vt})},pu=function(c,d,h,v,I,M,O,V,X,it){return i.extend(Gu(c,d,h,v,I,M,O,V,!0,X,!0),{u_texsize_icon:it,u_texture_icon:1})},Hs=function(c,d,h){return{u_matrix:c,u_opacity:d,u_color:h}},Wu=function(c,d,h,v,I,M){return i.extend(function(O,V,X,it){var vt=X.imageManager.getPattern(O.from.toString()),yt=X.imageManager.getPattern(O.to.toString()),xt=X.imageManager.getPixelSize(),Bt=xt.width,Lt=xt.height,Ht=Math.pow(2,it.tileID.overscaledZ),Mt=it.tileSize*Math.pow(2,X.transform.tileZoom)/Ht,Gt=Mt*(it.tileID.canonical.x+it.tileID.wrap*Ht),Qt=Mt*it.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:vt.tl,u_pattern_br_a:vt.br,u_pattern_tl_b:yt.tl,u_pattern_br_b:yt.br,u_texsize:[Bt,Lt],u_mix:V.t,u_pattern_size_a:vt.displaySize,u_pattern_size_b:yt.displaySize,u_scale_a:V.fromScale,u_scale_b:V.toScale,u_tile_units_to_pixels:1/Di(it,1,X.transform.tileZoom),u_pixel_coord_upper:[Gt>>16,Qt>>16],u_pixel_coord_lower:[65535&Gt,65535&Qt]}}(v,M,h,I),{u_matrix:c,u_opacity:d})},pl={fillExtrusion:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_lightpos:new i.Uniform3f(c,d.u_lightpos),u_lightintensity:new i.Uniform1f(c,d.u_lightintensity),u_lightcolor:new i.Uniform3f(c,d.u_lightcolor),u_vertical_gradient:new i.Uniform1f(c,d.u_vertical_gradient),u_opacity:new i.Uniform1f(c,d.u_opacity)}},fillExtrusionPattern:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_lightpos:new i.Uniform3f(c,d.u_lightpos),u_lightintensity:new i.Uniform1f(c,d.u_lightintensity),u_lightcolor:new i.Uniform3f(c,d.u_lightcolor),u_vertical_gradient:new i.Uniform1f(c,d.u_vertical_gradient),u_height_factor:new i.Uniform1f(c,d.u_height_factor),u_image:new i.Uniform1i(c,d.u_image),u_texsize:new i.Uniform2f(c,d.u_texsize),u_pixel_coord_upper:new i.Uniform2f(c,d.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(c,d.u_pixel_coord_lower),u_scale:new i.Uniform3f(c,d.u_scale),u_fade:new i.Uniform1f(c,d.u_fade),u_opacity:new i.Uniform1f(c,d.u_opacity)}},fill:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix)}},fillPattern:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_image:new i.Uniform1i(c,d.u_image),u_texsize:new i.Uniform2f(c,d.u_texsize),u_pixel_coord_upper:new i.Uniform2f(c,d.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(c,d.u_pixel_coord_lower),u_scale:new i.Uniform3f(c,d.u_scale),u_fade:new i.Uniform1f(c,d.u_fade)}},fillOutline:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_world:new i.Uniform2f(c,d.u_world)}},fillOutlinePattern:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_world:new i.Uniform2f(c,d.u_world),u_image:new i.Uniform1i(c,d.u_image),u_texsize:new i.Uniform2f(c,d.u_texsize),u_pixel_coord_upper:new i.Uniform2f(c,d.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(c,d.u_pixel_coord_lower),u_scale:new i.Uniform3f(c,d.u_scale),u_fade:new i.Uniform1f(c,d.u_fade)}},circle:function(c,d){return{u_camera_to_center_distance:new i.Uniform1f(c,d.u_camera_to_center_distance),u_scale_with_map:new i.Uniform1i(c,d.u_scale_with_map),u_pitch_with_map:new i.Uniform1i(c,d.u_pitch_with_map),u_extrude_scale:new i.Uniform2f(c,d.u_extrude_scale),u_device_pixel_ratio:new i.Uniform1f(c,d.u_device_pixel_ratio),u_matrix:new i.UniformMatrix4f(c,d.u_matrix)}},collisionBox:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_camera_to_center_distance:new i.Uniform1f(c,d.u_camera_to_center_distance),u_pixels_to_tile_units:new i.Uniform1f(c,d.u_pixels_to_tile_units),u_extrude_scale:new i.Uniform2f(c,d.u_extrude_scale),u_overscale_factor:new i.Uniform1f(c,d.u_overscale_factor)}},collisionCircle:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_inv_matrix:new i.UniformMatrix4f(c,d.u_inv_matrix),u_camera_to_center_distance:new i.Uniform1f(c,d.u_camera_to_center_distance),u_viewport_size:new i.Uniform2f(c,d.u_viewport_size)}},debug:function(c,d){return{u_color:new i.UniformColor(c,d.u_color),u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_overlay:new i.Uniform1i(c,d.u_overlay),u_overlay_scale:new i.Uniform1f(c,d.u_overlay_scale)}},clippingMask:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix)}},heatmap:function(c,d){return{u_extrude_scale:new i.Uniform1f(c,d.u_extrude_scale),u_intensity:new i.Uniform1f(c,d.u_intensity),u_matrix:new i.UniformMatrix4f(c,d.u_matrix)}},heatmapTexture:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_world:new i.Uniform2f(c,d.u_world),u_image:new i.Uniform1i(c,d.u_image),u_color_ramp:new i.Uniform1i(c,d.u_color_ramp),u_opacity:new i.Uniform1f(c,d.u_opacity)}},hillshade:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_image:new i.Uniform1i(c,d.u_image),u_latrange:new i.Uniform2f(c,d.u_latrange),u_light:new i.Uniform2f(c,d.u_light),u_shadow:new i.UniformColor(c,d.u_shadow),u_highlight:new i.UniformColor(c,d.u_highlight),u_accent:new i.UniformColor(c,d.u_accent)}},hillshadePrepare:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_image:new i.Uniform1i(c,d.u_image),u_dimension:new i.Uniform2f(c,d.u_dimension),u_zoom:new i.Uniform1f(c,d.u_zoom),u_unpack:new i.Uniform4f(c,d.u_unpack)}},line:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_ratio:new i.Uniform1f(c,d.u_ratio),u_device_pixel_ratio:new i.Uniform1f(c,d.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(c,d.u_units_to_pixels)}},lineGradient:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_ratio:new i.Uniform1f(c,d.u_ratio),u_device_pixel_ratio:new i.Uniform1f(c,d.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(c,d.u_units_to_pixels),u_image:new i.Uniform1i(c,d.u_image),u_image_height:new i.Uniform1f(c,d.u_image_height)}},linePattern:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_texsize:new i.Uniform2f(c,d.u_texsize),u_ratio:new i.Uniform1f(c,d.u_ratio),u_device_pixel_ratio:new i.Uniform1f(c,d.u_device_pixel_ratio),u_image:new i.Uniform1i(c,d.u_image),u_units_to_pixels:new i.Uniform2f(c,d.u_units_to_pixels),u_scale:new i.Uniform3f(c,d.u_scale),u_fade:new i.Uniform1f(c,d.u_fade)}},lineSDF:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_ratio:new i.Uniform1f(c,d.u_ratio),u_device_pixel_ratio:new i.Uniform1f(c,d.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(c,d.u_units_to_pixels),u_patternscale_a:new i.Uniform2f(c,d.u_patternscale_a),u_patternscale_b:new i.Uniform2f(c,d.u_patternscale_b),u_sdfgamma:new i.Uniform1f(c,d.u_sdfgamma),u_image:new i.Uniform1i(c,d.u_image),u_tex_y_a:new i.Uniform1f(c,d.u_tex_y_a),u_tex_y_b:new i.Uniform1f(c,d.u_tex_y_b),u_mix:new i.Uniform1f(c,d.u_mix)}},raster:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_tl_parent:new i.Uniform2f(c,d.u_tl_parent),u_scale_parent:new i.Uniform1f(c,d.u_scale_parent),u_buffer_scale:new i.Uniform1f(c,d.u_buffer_scale),u_fade_t:new i.Uniform1f(c,d.u_fade_t),u_opacity:new i.Uniform1f(c,d.u_opacity),u_image0:new i.Uniform1i(c,d.u_image0),u_image1:new i.Uniform1i(c,d.u_image1),u_brightness_low:new i.Uniform1f(c,d.u_brightness_low),u_brightness_high:new i.Uniform1f(c,d.u_brightness_high),u_saturation_factor:new i.Uniform1f(c,d.u_saturation_factor),u_contrast_factor:new i.Uniform1f(c,d.u_contrast_factor),u_spin_weights:new i.Uniform3f(c,d.u_spin_weights)}},symbolIcon:function(c,d){return{u_is_size_zoom_constant:new i.Uniform1i(c,d.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(c,d.u_is_size_feature_constant),u_size_t:new i.Uniform1f(c,d.u_size_t),u_size:new i.Uniform1f(c,d.u_size),u_camera_to_center_distance:new i.Uniform1f(c,d.u_camera_to_center_distance),u_pitch:new i.Uniform1f(c,d.u_pitch),u_rotate_symbol:new i.Uniform1i(c,d.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(c,d.u_aspect_ratio),u_fade_change:new i.Uniform1f(c,d.u_fade_change),u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(c,d.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(c,d.u_coord_matrix),u_is_text:new i.Uniform1i(c,d.u_is_text),u_pitch_with_map:new i.Uniform1i(c,d.u_pitch_with_map),u_texsize:new i.Uniform2f(c,d.u_texsize),u_texture:new i.Uniform1i(c,d.u_texture)}},symbolSDF:function(c,d){return{u_is_size_zoom_constant:new i.Uniform1i(c,d.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(c,d.u_is_size_feature_constant),u_size_t:new i.Uniform1f(c,d.u_size_t),u_size:new i.Uniform1f(c,d.u_size),u_camera_to_center_distance:new i.Uniform1f(c,d.u_camera_to_center_distance),u_pitch:new i.Uniform1f(c,d.u_pitch),u_rotate_symbol:new i.Uniform1i(c,d.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(c,d.u_aspect_ratio),u_fade_change:new i.Uniform1f(c,d.u_fade_change),u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(c,d.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(c,d.u_coord_matrix),u_is_text:new i.Uniform1i(c,d.u_is_text),u_pitch_with_map:new i.Uniform1i(c,d.u_pitch_with_map),u_texsize:new i.Uniform2f(c,d.u_texsize),u_texture:new i.Uniform1i(c,d.u_texture),u_gamma_scale:new i.Uniform1f(c,d.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(c,d.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(c,d.u_is_halo)}},symbolTextAndIcon:function(c,d){return{u_is_size_zoom_constant:new i.Uniform1i(c,d.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(c,d.u_is_size_feature_constant),u_size_t:new i.Uniform1f(c,d.u_size_t),u_size:new i.Uniform1f(c,d.u_size),u_camera_to_center_distance:new i.Uniform1f(c,d.u_camera_to_center_distance),u_pitch:new i.Uniform1f(c,d.u_pitch),u_rotate_symbol:new i.Uniform1i(c,d.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(c,d.u_aspect_ratio),u_fade_change:new i.Uniform1f(c,d.u_fade_change),u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(c,d.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(c,d.u_coord_matrix),u_is_text:new i.Uniform1i(c,d.u_is_text),u_pitch_with_map:new i.Uniform1i(c,d.u_pitch_with_map),u_texsize:new i.Uniform2f(c,d.u_texsize),u_texsize_icon:new i.Uniform2f(c,d.u_texsize_icon),u_texture:new i.Uniform1i(c,d.u_texture),u_texture_icon:new i.Uniform1i(c,d.u_texture_icon),u_gamma_scale:new i.Uniform1f(c,d.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(c,d.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(c,d.u_is_halo)}},background:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_opacity:new i.Uniform1f(c,d.u_opacity),u_color:new i.UniformColor(c,d.u_color)}},backgroundPattern:function(c,d){return{u_matrix:new i.UniformMatrix4f(c,d.u_matrix),u_opacity:new i.Uniform1f(c,d.u_opacity),u_image:new i.Uniform1i(c,d.u_image),u_pattern_tl_a:new i.Uniform2f(c,d.u_pattern_tl_a),u_pattern_br_a:new i.Uniform2f(c,d.u_pattern_br_a),u_pattern_tl_b:new i.Uniform2f(c,d.u_pattern_tl_b),u_pattern_br_b:new i.Uniform2f(c,d.u_pattern_br_b),u_texsize:new i.Uniform2f(c,d.u_texsize),u_mix:new i.Uniform1f(c,d.u_mix),u_pattern_size_a:new i.Uniform2f(c,d.u_pattern_size_a),u_pattern_size_b:new i.Uniform2f(c,d.u_pattern_size_b),u_scale_a:new i.Uniform1f(c,d.u_scale_a),u_scale_b:new i.Uniform1f(c,d.u_scale_b),u_pixel_coord_upper:new i.Uniform2f(c,d.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(c,d.u_pixel_coord_lower),u_tile_units_to_pixels:new i.Uniform1f(c,d.u_tile_units_to_pixels)}}};function Ss(c,d,h,v,I,M,O){for(var V=c.context,X=V.gl,it=c.useProgram("collisionBox"),vt=[],yt=0,xt=0,Bt=0;Bt<v.length;Bt++){var Lt=v[Bt],Ht=d.getTile(Lt),Mt=Ht.getBucket(h);if(Mt){var Gt=Lt.posMatrix;I[0]===0&&I[1]===0||(Gt=c.translatePosMatrix(Lt.posMatrix,Ht,I,M));var Qt=O?Mt.textCollisionBox:Mt.iconCollisionBox,de=Mt.collisionCircleArray;if(de.length>0){var ke=i.create(),Me=Gt;i.mul(ke,Mt.placementInvProjMatrix,c.transform.glCoordMatrix),i.mul(ke,ke,Mt.placementViewportMatrix),vt.push({circleArray:de,circleOffset:xt,transform:Me,invTransform:ke}),xt=yt+=de.length/4}Qt&&it.draw(V,X.LINES,At.disabled,Rt.disabled,c.colorModeForRenderPass(),te.disabled,fl(Gt,c.transform,Ht),h.id,Qt.layoutVertexBuffer,Qt.indexBuffer,Qt.segments,null,c.transform.zoom,null,null,Qt.collisionVertexBuffer)}}if(O&&vt.length){var Oe=c.useProgram("collisionCircle"),He=new i.StructArrayLayout2f1f2i16;He.resize(4*yt),He._trim();for(var Xe=0,rn=0,yn=vt;rn<yn.length;rn+=1)for(var On=yn[rn],Xn=0;Xn<On.circleArray.length/4;Xn++){var Kn=4*Xn,Xr=On.circleArray[Kn+0],Cn=On.circleArray[Kn+1],er=On.circleArray[Kn+2],Cr=On.circleArray[Kn+3];He.emplace(Xe++,Xr,Cn,er,Cr,0),He.emplace(Xe++,Xr,Cn,er,Cr,1),He.emplace(Xe++,Xr,Cn,er,Cr,2),He.emplace(Xe++,Xr,Cn,er,Cr,3)}(!Ec||Ec.length<2*yt)&&(Ec=function(uo){var no=2*uo,No=new i.StructArrayLayout3ui6;No.resize(no),No._trim();for(var Vi=0;Vi<no;Vi++){var Bi=6*Vi;No.uint16[Bi+0]=4*Vi+0,No.uint16[Bi+1]=4*Vi+1,No.uint16[Bi+2]=4*Vi+2,No.uint16[Bi+3]=4*Vi+2,No.uint16[Bi+4]=4*Vi+3,No.uint16[Bi+5]=4*Vi+0}return No}(yt));for(var dr=V.createIndexBuffer(Ec,!0),sr=V.createVertexBuffer(He,i.collisionCircleLayout.members,!0),Ir=0,cr=vt;Ir<cr.length;Ir+=1){var zn=cr[Ir],Lo=Ic(zn.transform,zn.invTransform,c.transform);Oe.draw(V,X.TRIANGLES,At.disabled,Rt.disabled,c.colorModeForRenderPass(),te.disabled,Lo,h.id,sr,dr,i.SegmentVector.simpleSegment(0,2*zn.circleOffset,zn.circleArray.length,zn.circleArray.length/2),null,c.transform.zoom,null,null,null)}sr.destroy(),dr.destroy()}}var na=i.identity(new Float32Array(16));function Nh(c,d,h,v,I,M){var O=i.getAnchorAlignment(c),V=-(O.horizontalAlign-.5)*d,X=-(O.verticalAlign-.5)*h,it=i.evaluateVariableOffset(c,v);return new i.Point((V/I+it[0])*M,(X/I+it[1])*M)}function uh(c,d,h,v,I,M,O,V,X,it,vt){var yt=c.text.placedSymbolArray,xt=c.text.dynamicLayoutVertexArray,Bt=c.icon.dynamicLayoutVertexArray,Lt={};xt.clear();for(var Ht=0;Ht<yt.length;Ht++){var Mt=yt.get(Ht),Gt=Mt.hidden||!Mt.crossTileID||c.allowVerticalPlacement&&!Mt.placedOrientation?null:v[Mt.crossTileID];if(Gt){var Qt=new i.Point(Mt.anchorX,Mt.anchorY),de=br(Qt,h?V:O),ke=Tr(M.cameraToCenterDistance,de.signedDistanceFromCamera),Me=I.evaluateSizeForFeature(c.textSizeData,it,Mt)*ke/i.ONE_EM;h&&(Me*=c.tilePixelRatio/X);for(var Oe=Nh(Gt.anchor,Gt.width,Gt.height,Gt.textOffset,Gt.textBoxScale,Me),He=h?br(Qt.add(Oe),O).point:de.point.add(d?Oe.rotate(-M.angle):Oe),Xe=c.allowVerticalPlacement&&Mt.placedOrientation===i.WritingMode.vertical?Math.PI/2:0,rn=0;rn<Mt.numGlyphs;rn++)i.addDynamicAttributes(xt,He,Xe);vt&&Mt.associatedIconIndex>=0&&(Lt[Mt.associatedIconIndex]={shiftedAnchor:He,angle:Xe})}else zo(Mt.numGlyphs,xt)}if(vt){Bt.clear();for(var yn=c.icon.placedSymbolArray,On=0;On<yn.length;On++){var Xn=yn.get(On);if(Xn.hidden)zo(Xn.numGlyphs,Bt);else{var Kn=Lt[On];if(Kn)for(var Xr=0;Xr<Xn.numGlyphs;Xr++)i.addDynamicAttributes(Bt,Kn.shiftedAnchor,Kn.angle);else zo(Xn.numGlyphs,Bt)}}c.icon.dynamicLayoutVertexBuffer.updateData(Bt)}c.text.dynamicLayoutVertexBuffer.updateData(xt)}function Zu(c,d,h){return h.iconsInText&&d?"symbolTextAndIcon":c?"symbolSDF":"symbolIcon"}function ha(c,d,h,v,I,M,O,V,X,it,vt,yt){for(var xt=c.context,Bt=xt.gl,Lt=c.transform,Ht=V==="map",Mt=X==="map",Gt=Ht&&h.layout.get("symbol-placement")!=="point",Qt=Ht&&!Mt&&!Gt,de=h.layout.get("symbol-sort-key").constantOr(1)!==void 0,ke=!1,Me=c.depthModeForSublayer(0,At.ReadOnly),Oe=h.layout.get("text-variable-anchor"),He=[],Xe=0,rn=v;Xe<rn.length;Xe+=1){var yn=rn[Xe],On=d.getTile(yn),Xn=On.getBucket(h);if(Xn){var Kn=I?Xn.text:Xn.icon;if(Kn&&Kn.segments.get().length){var Xr=Kn.programConfigurations.get(h.id),Cn=I||Xn.sdfIcons,er=I?Xn.textSizeData:Xn.iconSizeData,Cr=Mt||Lt.pitch!==0,dr=c.useProgram(Zu(Cn,I,Xn),Xr),sr=i.evaluateSizeForZoom(er,Lt.zoom),Ir=void 0,cr=[0,0],zn=void 0,Lo=void 0,uo=null,no=void 0;if(I)zn=On.glyphAtlasTexture,Lo=Bt.LINEAR,Ir=On.glyphAtlasTexture.size,Xn.iconsInText&&(cr=On.imageAtlasTexture.size,uo=On.imageAtlasTexture,no=Cr||c.options.rotating||c.options.zooming||er.kind==="composite"||er.kind==="camera"?Bt.LINEAR:Bt.NEAREST);else{var No=h.layout.get("icon-size").constantOr(0)!==1||Xn.iconsNeedLinear;zn=On.imageAtlasTexture,Lo=Cn||c.options.rotating||c.options.zooming||No||Cr?Bt.LINEAR:Bt.NEAREST,Ir=On.imageAtlasTexture.size}var Vi=Di(On,1,c.transform.zoom),Bi=$i(yn.posMatrix,Mt,Ht,c.transform,Vi),ts=ui(yn.posMatrix,Mt,Ht,c.transform,Vi),Oi=Oe&&Xn.hasTextData(),Hl=h.layout.get("icon-text-fit")!=="none"&&Oi&&Xn.hasIconData();Gt&&ws(Xn,yn.posMatrix,c,I,Bi,ts,Mt,it);var es=c.translatePosMatrix(yn.posMatrix,On,M,O),yl=Gt||I&&Oe||Hl?na:Bi,Ys=c.translatePosMatrix(ts,On,M,O,!0),kc=Cn&&h.paint.get(I?"text-halo-width":"icon-halo-width").constantOr(1)!==0,mh={program:dr,buffers:Kn,uniformValues:Cn?Xn.iconsInText?pu(er.kind,sr,Qt,Mt,c,es,yl,Ys,Ir,cr):Gu(er.kind,sr,Qt,Mt,c,es,yl,Ys,I,Ir,!0):Fl(er.kind,sr,Qt,Mt,c,es,yl,Ys,I,Ir),atlasTexture:zn,atlasTextureIcon:uo,atlasInterpolation:Lo,atlasInterpolationIcon:no,isSDF:Cn,hasHalo:kc};if(de&&Xn.canOverlap){ke=!0;for(var Xs=0,Lc=Kn.segments.get();Xs<Lc.length;Xs+=1){var Hh=Lc[Xs];He.push({segments:new i.SegmentVector([Hh]),sortKey:Hh.sortKey,state:mh})}}else He.push({segments:Kn.segments,sortKey:0,state:mh})}}}ke&&He.sort(function(_u,Oc){return _u.sortKey-Oc.sortKey});for(var Gl=0,yu=He;Gl<yu.length;Gl+=1){var Wl=yu[Gl],qo=Wl.state;if(xt.activeTexture.set(Bt.TEXTURE0),qo.atlasTexture.bind(qo.atlasInterpolation,Bt.CLAMP_TO_EDGE),qo.atlasTextureIcon&&(xt.activeTexture.set(Bt.TEXTURE1),qo.atlasTextureIcon&&qo.atlasTextureIcon.bind(qo.atlasInterpolationIcon,Bt.CLAMP_TO_EDGE)),qo.isSDF){var _l=qo.uniformValues;qo.hasHalo&&(_l.u_is_halo=1,ml(qo.buffers,Wl.segments,h,c,qo.program,Me,vt,yt,_l)),_l.u_is_halo=0}ml(qo.buffers,Wl.segments,h,c,qo.program,Me,vt,yt,qo.uniformValues)}}function ml(c,d,h,v,I,M,O,V,X){var it=v.context;I.draw(it,it.gl.TRIANGLES,M,O,V,te.disabled,X,h.id,c.layoutVertexBuffer,c.indexBuffer,d,h.paint,v.transform.zoom,c.programConfigurations.get(h.id),c.dynamicLayoutVertexBuffer,c.opacityVertexBuffer)}function Sc(c,d,h,v,I,M,O){var V,X,it,vt,yt,xt=c.context.gl,Bt=h.paint.get("fill-pattern"),Lt=Bt&&Bt.constantOr(1),Ht=h.getCrossfadeParameters();O?(X=Lt&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",V=xt.LINES):(X=Lt?"fillPattern":"fill",V=xt.TRIANGLES);for(var Mt=0,Gt=v;Mt<Gt.length;Mt+=1){var Qt=Gt[Mt],de=d.getTile(Qt);if(!Lt||de.patternsLoaded()){var ke=de.getBucket(h);if(ke){var Me=ke.programConfigurations.get(h.id),Oe=c.useProgram(X,Me);Lt&&(c.context.activeTexture.set(xt.TEXTURE0),de.imageAtlasTexture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE),Me.updatePaintBuffers(Ht));var He=Bt.constantOr(null);if(He&&de.imageAtlas){var Xe=de.imageAtlas,rn=Xe.patternPositions[He.to.toString()],yn=Xe.patternPositions[He.from.toString()];rn&&yn&&Me.setConstantPatternPositions(rn,yn)}var On=c.translatePosMatrix(Qt.posMatrix,de,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(O){vt=ke.indexBuffer2,yt=ke.segments2;var Xn=[xt.drawingBufferWidth,xt.drawingBufferHeight];it=X==="fillOutlinePattern"&&Lt?du(On,c,Ht,de,Xn):Cc(On,Xn)}else vt=ke.indexBuffer,yt=ke.segments,it=Lt?zl(On,c,Ht,de):Dl(On);Oe.draw(c.context,V,I,c.stencilModeForClipping(Qt),M,te.disabled,it,h.id,ke.layoutVertexBuffer,vt,yt,h.paint,c.transform.zoom,Me)}}}}function ch(c,d,h,v,I,M,O){for(var V=c.context,X=V.gl,it=h.paint.get("fill-extrusion-pattern"),vt=it.constantOr(1),yt=h.getCrossfadeParameters(),xt=h.paint.get("fill-extrusion-opacity"),Bt=0,Lt=v;Bt<Lt.length;Bt+=1){var Ht=Lt[Bt],Mt=d.getTile(Ht),Gt=Mt.getBucket(h);if(Gt){var Qt=Gt.programConfigurations.get(h.id),de=c.useProgram(vt?"fillExtrusionPattern":"fillExtrusion",Qt);vt&&(c.context.activeTexture.set(X.TEXTURE0),Mt.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Qt.updatePaintBuffers(yt));var ke=it.constantOr(null);if(ke&&Mt.imageAtlas){var Me=Mt.imageAtlas,Oe=Me.patternPositions[ke.to.toString()],He=Me.patternPositions[ke.from.toString()];Oe&&He&&Qt.setConstantPatternPositions(Oe,He)}var Xe=c.translatePosMatrix(Ht.posMatrix,Mt,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),rn=h.paint.get("fill-extrusion-vertical-gradient"),yn=vt?Is(Xe,c,rn,xt,Ht,yt,Mt):ah(Xe,c,rn,xt);de.draw(V,V.gl.TRIANGLES,I,M,O,te.backCCW,yn,h.id,Gt.layoutVertexBuffer,Gt.indexBuffer,Gt.segments,h.paint,c.transform.zoom,Qt)}}}function Nl(c,d,h,v,I,M){var O=c.context,V=O.gl,X=d.fbo;if(X){var it=c.useProgram("hillshade");O.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,X.colorAttachment.get());var vt=function(yt,xt,Bt){var Lt=Bt.paint.get("hillshade-shadow-color"),Ht=Bt.paint.get("hillshade-highlight-color"),Mt=Bt.paint.get("hillshade-accent-color"),Gt=Bt.paint.get("hillshade-illumination-direction")*(Math.PI/180);Bt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Gt-=yt.transform.angle);var Qt,de,ke,Me=!yt.options.moving;return{u_matrix:yt.transform.calculatePosMatrix(xt.tileID.toUnwrapped(),Me),u_image:0,u_latrange:(Qt=xt.tileID,de=Math.pow(2,Qt.canonical.z),ke=Qt.canonical.y,[new i.MercatorCoordinate(0,ke/de).toLngLat().lat,new i.MercatorCoordinate(0,(ke+1)/de).toLngLat().lat]),u_light:[Bt.paint.get("hillshade-exaggeration"),Gt],u_shadow:Lt,u_highlight:Ht,u_accent:Mt}}(c,d,h);it.draw(O,V.TRIANGLES,v,I,M,te.disabled,vt,h.id,c.rasterBoundsBuffer,c.quadTriangleIndexBuffer,c.rasterBoundsSegments)}}function mu(c,d,h,v,I,M){var O=c.context,V=O.gl,X=d.dem;if(X&&X.data){var it=X.dim,vt=X.stride,yt=X.getPixels();if(O.activeTexture.set(V.TEXTURE1),O.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||c.getTileTexture(vt),d.demTexture){var xt=d.demTexture;xt.update(yt,{premultiply:!1}),xt.bind(V.NEAREST,V.CLAMP_TO_EDGE)}else d.demTexture=new i.Texture(O,yt,V.RGBA,{premultiply:!1}),d.demTexture.bind(V.NEAREST,V.CLAMP_TO_EDGE);O.activeTexture.set(V.TEXTURE0);var Bt=d.fbo;if(!Bt){var Lt=new i.Texture(O,{width:it,height:it,data:null},V.RGBA);Lt.bind(V.LINEAR,V.CLAMP_TO_EDGE),(Bt=d.fbo=O.createFramebuffer(it,it,!0)).colorAttachment.set(Lt.texture)}O.bindFramebuffer.set(Bt.framebuffer),O.viewport.set([0,0,it,it]),c.useProgram("hillshadePrepare").draw(O,V.TRIANGLES,v,I,M,te.disabled,function(Ht,Mt){var Gt=Mt.stride,Qt=i.create();return i.ortho(Qt,0,i.EXTENT,-i.EXTENT,0,0,1),i.translate(Qt,Qt,[0,-i.EXTENT,0]),{u_matrix:Qt,u_image:1,u_dimension:[Gt,Gt],u_zoom:Ht.overscaledZ,u_unpack:Mt.getUnpackVector()}}(d.tileID,X),h.id,c.rasterBoundsBuffer,c.quadTriangleIndexBuffer,c.rasterBoundsSegments),d.needsHillshadePrepare=!1}}function Ra(c,d,h,v,I){var M=v.paint.get("raster-fade-duration");if(M>0){var O=i.browser.now(),V=(O-c.timeAdded)/M,X=d?(O-d.timeAdded)/M:-1,it=h.getSource(),vt=I.coveringZoomLevel({tileSize:it.tileSize,roundZoom:it.roundZoom}),yt=!d||Math.abs(d.tileID.overscaledZ-vt)>Math.abs(c.tileID.overscaledZ-vt),xt=yt&&c.refreshedUponExpiration?1:i.clamp(yt?V:1-X,0,1);return c.refreshedUponExpiration&&V>=1&&(c.refreshedUponExpiration=!1),d?{opacity:1,mix:1-xt}:{opacity:xt,mix:0}}return{opacity:1,mix:0}}var pe=new i.Color(1,0,0,1),ze=new i.Color(0,1,0,1),Sn=new i.Color(0,0,1,1),ir=new i.Color(1,0,1,1),zi=new i.Color(0,1,1,1);function Yr(c,d,h,v){oe(c,0,d+h/2,c.transform.width,h,v)}function Ti(c,d,h,v){oe(c,d-h/2,0,h,c.transform.height,v)}function oe(c,d,h,v,I,M){var O=c.context,V=O.gl;V.enable(V.SCISSOR_TEST),V.scissor(d*i.browser.devicePixelRatio,h*i.browser.devicePixelRatio,v*i.browser.devicePixelRatio,I*i.browser.devicePixelRatio),O.clear({color:M}),V.disable(V.SCISSOR_TEST)}function Be(c,d,h){var v=c.context,I=v.gl,M=h.posMatrix,O=c.useProgram("debug"),V=At.disabled,X=Rt.disabled,it=c.colorModeForRenderPass();v.activeTexture.set(I.TEXTURE0),c.emptyTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),O.draw(v,I.LINE_STRIP,V,X,it,te.disabled,Aa(M,i.Color.red),"$debug",c.debugBuffer,c.tileBorderIndexBuffer,c.debugSegments);var vt=d.getTileByID(h.key).latestRawTileData,yt=Math.floor((vt&&vt.byteLength||0)/1024),xt=d.getTile(h).tileSize,Bt=512/Math.min(xt,512)*(h.overscaledZ/c.transform.zoom)*.5,Lt=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Lt+=" => "+h.overscaledZ),function(Ht,Mt){Ht.initDebugOverlayCanvas();var Gt=Ht.debugOverlayCanvas,Qt=Ht.context.gl,de=Ht.debugOverlayCanvas.getContext("2d");de.clearRect(0,0,Gt.width,Gt.height),de.shadowColor="white",de.shadowBlur=2,de.lineWidth=1.5,de.strokeStyle="white",de.textBaseline="top",de.font="bold 36px Open Sans, sans-serif",de.fillText(Mt,5,5),de.strokeText(Mt,5,5),Ht.debugOverlayTexture.update(Gt),Ht.debugOverlayTexture.bind(Qt.LINEAR,Qt.CLAMP_TO_EDGE)}(c,Lt+" "+yt+"kb"),O.draw(v,I.TRIANGLES,V,X,qt.alphaBlended,te.disabled,Aa(M,i.Color.transparent,Bt),"$debug",c.debugBuffer,c.quadTriangleIndexBuffer,c.debugSegments)}var Ie={symbol:function(c,d,h,v,I){if(c.renderPass==="translucent"){var M=Rt.disabled,O=c.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(V,X,it,vt,yt,xt,Bt){for(var Lt=X.transform,Ht=yt==="map",Mt=xt==="map",Gt=0,Qt=V;Gt<Qt.length;Gt+=1){var de=Qt[Gt],ke=vt.getTile(de),Me=ke.getBucket(it);if(Me&&Me.text&&Me.text.segments.get().length){var Oe=i.evaluateSizeForZoom(Me.textSizeData,Lt.zoom),He=Di(ke,1,X.transform.zoom),Xe=$i(de.posMatrix,Mt,Ht,X.transform,He),rn=it.layout.get("icon-text-fit")!=="none"&&Me.hasIconData();if(Oe){var yn=Math.pow(2,Lt.zoom-ke.tileID.overscaledZ);uh(Me,Ht,Mt,Bt,i.symbolSize,Lt,Xe,de.posMatrix,yn,Oe,rn)}}}}(v,c,h,d,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),I),h.paint.get("icon-opacity").constantOr(1)!==0&&ha(c,d,h,v,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),M,O),h.paint.get("text-opacity").constantOr(1)!==0&&ha(c,d,h,v,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),M,O),d.map.showCollisionBoxes&&(Ss(c,d,h,v,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),Ss(c,d,h,v,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))}},circle:function(c,d,h,v){if(c.renderPass==="translucent"){var I=h.paint.get("circle-opacity"),M=h.paint.get("circle-stroke-width"),O=h.paint.get("circle-stroke-opacity"),V=h.layout.get("circle-sort-key").constantOr(1)!==void 0;if(I.constantOr(1)!==0||M.constantOr(1)!==0&&O.constantOr(1)!==0){for(var X=c.context,it=X.gl,vt=c.depthModeForSublayer(0,At.ReadOnly),yt=Rt.disabled,xt=c.colorModeForRenderPass(),Bt=[],Lt=0;Lt<v.length;Lt++){var Ht=v[Lt],Mt=d.getTile(Ht),Gt=Mt.getBucket(h);if(Gt){var Qt=Gt.programConfigurations.get(h.id),de={programConfiguration:Qt,program:c.useProgram("circle",Qt),layoutVertexBuffer:Gt.layoutVertexBuffer,indexBuffer:Gt.indexBuffer,uniformValues:Fh(c,Ht,Mt,h)};if(V)for(var ke=0,Me=Gt.segments.get();ke<Me.length;ke+=1){var Oe=Me[ke];Bt.push({segments:new i.SegmentVector([Oe]),sortKey:Oe.sortKey,state:de})}else Bt.push({segments:Gt.segments,sortKey:0,state:de})}}V&&Bt.sort(function(On,Xn){return On.sortKey-Xn.sortKey});for(var He=0,Xe=Bt;He<Xe.length;He+=1){var rn=Xe[He],yn=rn.state;yn.program.draw(X,it.TRIANGLES,vt,yt,xt,te.disabled,yn.uniformValues,h.id,yn.layoutVertexBuffer,yn.indexBuffer,rn.segments,h.paint,c.transform.zoom,yn.programConfiguration)}}}},heatmap:function(c,d,h,v){if(h.paint.get("heatmap-opacity")!==0)if(c.renderPass==="offscreen"){var I=c.context,M=I.gl,O=Rt.disabled,V=new qt([M.ONE,M.ONE],i.Color.transparent,[!0,!0,!0,!0]);(function(Bt,Lt,Ht){var Mt=Bt.gl;Bt.activeTexture.set(Mt.TEXTURE1),Bt.viewport.set([0,0,Lt.width/4,Lt.height/4]);var Gt=Ht.heatmapFbo;if(Gt)Mt.bindTexture(Mt.TEXTURE_2D,Gt.colorAttachment.get()),Bt.bindFramebuffer.set(Gt.framebuffer);else{var Qt=Mt.createTexture();Mt.bindTexture(Mt.TEXTURE_2D,Qt),Mt.texParameteri(Mt.TEXTURE_2D,Mt.TEXTURE_WRAP_S,Mt.CLAMP_TO_EDGE),Mt.texParameteri(Mt.TEXTURE_2D,Mt.TEXTURE_WRAP_T,Mt.CLAMP_TO_EDGE),Mt.texParameteri(Mt.TEXTURE_2D,Mt.TEXTURE_MIN_FILTER,Mt.LINEAR),Mt.texParameteri(Mt.TEXTURE_2D,Mt.TEXTURE_MAG_FILTER,Mt.LINEAR),Gt=Ht.heatmapFbo=Bt.createFramebuffer(Lt.width/4,Lt.height/4,!1),function(de,ke,Me,Oe){var He=de.gl;He.texImage2D(He.TEXTURE_2D,0,He.RGBA,ke.width/4,ke.height/4,0,He.RGBA,de.extRenderToTextureHalfFloat?de.extTextureHalfFloat.HALF_FLOAT_OES:He.UNSIGNED_BYTE,null),Oe.colorAttachment.set(Me)}(Bt,Lt,Qt,Gt)}})(I,c,h),I.clear({color:i.Color.transparent});for(var X=0;X<v.length;X++){var it=v[X];if(!d.hasRenderableParent(it)){var vt=d.getTile(it),yt=vt.getBucket(h);if(yt){var xt=yt.programConfigurations.get(h.id);c.useProgram("heatmap",xt).draw(I,M.TRIANGLES,At.disabled,O,V,te.disabled,dl(it.posMatrix,vt,c.transform.zoom,h.paint.get("heatmap-intensity")),h.id,yt.layoutVertexBuffer,yt.indexBuffer,yt.segments,h.paint,c.transform.zoom,xt)}}}I.viewport.set([0,0,c.width,c.height])}else c.renderPass==="translucent"&&(c.context.setColorMode(c.colorModeForRenderPass()),function(Bt,Lt){var Ht=Bt.context,Mt=Ht.gl,Gt=Lt.heatmapFbo;if(Gt){Ht.activeTexture.set(Mt.TEXTURE0),Mt.bindTexture(Mt.TEXTURE_2D,Gt.colorAttachment.get()),Ht.activeTexture.set(Mt.TEXTURE1);var Qt=Lt.colorRampTexture;Qt||(Qt=Lt.colorRampTexture=new i.Texture(Ht,Lt.colorRamp,Mt.RGBA)),Qt.bind(Mt.LINEAR,Mt.CLAMP_TO_EDGE),Bt.useProgram("heatmapTexture").draw(Ht,Mt.TRIANGLES,At.disabled,Rt.disabled,Bt.colorModeForRenderPass(),te.disabled,function(de,ke,Me,Oe){var He=i.create();i.ortho(He,0,de.width,de.height,0,0,1);var Xe=de.context.gl;return{u_matrix:He,u_world:[Xe.drawingBufferWidth,Xe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ke.paint.get("heatmap-opacity")}}(Bt,Lt),Lt.id,Bt.viewportBuffer,Bt.quadTriangleIndexBuffer,Bt.viewportSegments,Lt.paint,Bt.transform.zoom)}}(c,h))},line:function(c,d,h,v){if(c.renderPass==="translucent"){var I=h.paint.get("line-opacity"),M=h.paint.get("line-width");if(I.constantOr(1)!==0&&M.constantOr(1)!==0)for(var O=c.depthModeForSublayer(0,At.ReadOnly),V=c.colorModeForRenderPass(),X=h.paint.get("line-dasharray"),it=h.paint.get("line-pattern"),vt=it.constantOr(1),yt=h.paint.get("line-gradient"),xt=h.getCrossfadeParameters(),Bt=vt?"linePattern":X?"lineSDF":yt?"lineGradient":"line",Lt=c.context,Ht=Lt.gl,Mt=!0,Gt=0,Qt=v;Gt<Qt.length;Gt+=1){var de=Qt[Gt],ke=d.getTile(de);if(!vt||ke.patternsLoaded()){var Me=ke.getBucket(h);if(Me){var Oe=Me.programConfigurations.get(h.id),He=c.context.program.get(),Xe=c.useProgram(Bt,Oe),rn=Mt||Xe.program!==He,yn=it.constantOr(null);if(yn&&ke.imageAtlas){var On=ke.imageAtlas,Xn=On.patternPositions[yn.to.toString()],Kn=On.patternPositions[yn.from.toString()];Xn&&Kn&&Oe.setConstantPatternPositions(Xn,Kn)}var Xr=vt?ju(c,ke,h,xt):X?sh(c,ke,h,X,xt):yt?qr(c,ke,h,Me.lineClipsArray.length):Bl(c,ke,h);if(vt)Lt.activeTexture.set(Ht.TEXTURE0),ke.imageAtlasTexture.bind(Ht.LINEAR,Ht.CLAMP_TO_EDGE),Oe.updatePaintBuffers(xt);else if(X&&(rn||c.lineAtlas.dirty))Lt.activeTexture.set(Ht.TEXTURE0),c.lineAtlas.bind(Lt);else if(yt){var Cn=Me.gradients[h.id],er=Cn.texture;if(h.gradientVersion!==Cn.version){var Cr=256;if(h.stepInterpolant){var dr=d.getSource().maxzoom,sr=de.canonical.z===dr?Math.ceil(1<<c.transform.maxZoom-de.canonical.z):1;Cr=i.clamp(i.nextPowerOfTwo(Me.maxLineLength/i.EXTENT*1024*sr),256,Lt.maxTextureSize)}Cn.gradient=i.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:Cr,image:Cn.gradient||void 0,clips:Me.lineClipsArray}),Cn.texture?Cn.texture.update(Cn.gradient):Cn.texture=new i.Texture(Lt,Cn.gradient,Ht.RGBA),Cn.version=h.gradientVersion,er=Cn.texture}Lt.activeTexture.set(Ht.TEXTURE0),er.bind(h.stepInterpolant?Ht.NEAREST:Ht.LINEAR,Ht.CLAMP_TO_EDGE)}Xe.draw(Lt,Ht.TRIANGLES,O,c.stencilModeForClipping(de),V,te.disabled,Xr,h.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,h.paint,c.transform.zoom,Oe,Me.layoutVertexBuffer2),Mt=!1}}}}},fill:function(c,d,h,v){var I=h.paint.get("fill-color"),M=h.paint.get("fill-opacity");if(M.constantOr(1)!==0){var O=c.colorModeForRenderPass(),V=h.paint.get("fill-pattern"),X=c.opaquePassEnabledForLayer()&&!V.constantOr(1)&&I.constantOr(i.Color.transparent).a===1&&M.constantOr(0)===1?"opaque":"translucent";if(c.renderPass===X){var it=c.depthModeForSublayer(1,c.renderPass==="opaque"?At.ReadWrite:At.ReadOnly);Sc(c,d,h,v,it,O,!1)}if(c.renderPass==="translucent"&&h.paint.get("fill-antialias")){var vt=c.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,At.ReadOnly);Sc(c,d,h,v,vt,O,!0)}}},"fill-extrusion":function(c,d,h,v){var I=h.paint.get("fill-extrusion-opacity");if(I!==0&&c.renderPass==="translucent"){var M=new At(c.context.gl.LEQUAL,At.ReadWrite,c.depthRangeFor3D);if(I!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))ch(c,d,h,v,M,Rt.disabled,qt.disabled),ch(c,d,h,v,M,c.stencilModeFor3D(),c.colorModeForRenderPass());else{var O=c.colorModeForRenderPass();ch(c,d,h,v,M,Rt.disabled,O)}}},hillshade:function(c,d,h,v){if(c.renderPass==="offscreen"||c.renderPass==="translucent"){for(var I=c.context,M=c.depthModeForSublayer(0,At.ReadOnly),O=c.colorModeForRenderPass(),V=c.renderPass==="translucent"?c.stencilConfigForOverlap(v):[{},v],X=V[0],it=0,vt=V[1];it<vt.length;it+=1){var yt=vt[it],xt=d.getTile(yt);xt.needsHillshadePrepare&&c.renderPass==="offscreen"?mu(c,xt,h,M,Rt.disabled,O):c.renderPass==="translucent"&&Nl(c,xt,h,M,X[yt.overscaledZ],O)}I.viewport.set([0,0,c.width,c.height])}},raster:function(c,d,h,v){if(c.renderPass==="translucent"&&h.paint.get("raster-opacity")!==0&&v.length)for(var I=c.context,M=I.gl,O=d.getSource(),V=c.useProgram("raster"),X=c.colorModeForRenderPass(),it=O instanceof Ut?[{},v]:c.stencilConfigForOverlap(v),vt=it[0],yt=it[1],xt=yt[yt.length-1].overscaledZ,Bt=!c.options.moving,Lt=0,Ht=yt;Lt<Ht.length;Lt+=1){var Mt=Ht[Lt],Gt=c.depthModeForSublayer(Mt.overscaledZ-xt,h.paint.get("raster-opacity")===1?At.ReadWrite:At.ReadOnly,M.LESS),Qt=d.getTile(Mt),de=c.transform.calculatePosMatrix(Mt.toUnwrapped(),Bt);Qt.registerFadeDuration(h.paint.get("raster-fade-duration"));var ke=d.findLoadedParent(Mt,0),Me=Ra(Qt,ke,d,h,c.transform),Oe=void 0,He=void 0,Xe=h.paint.get("raster-resampling")==="nearest"?M.NEAREST:M.LINEAR;I.activeTexture.set(M.TEXTURE0),Qt.texture.bind(Xe,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),I.activeTexture.set(M.TEXTURE1),ke?(ke.texture.bind(Xe,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),Oe=Math.pow(2,ke.tileID.overscaledZ-Qt.tileID.overscaledZ),He=[Qt.tileID.canonical.x*Oe%1,Qt.tileID.canonical.y*Oe%1]):Qt.texture.bind(Xe,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST);var rn=lh(de,He||[0,0],Oe||1,Me,h);O instanceof Ut?V.draw(I,M.TRIANGLES,Gt,Rt.disabled,X,te.disabled,rn,h.id,O.boundsBuffer,c.quadTriangleIndexBuffer,O.boundsSegments):V.draw(I,M.TRIANGLES,Gt,vt[Mt.overscaledZ],X,te.disabled,rn,h.id,c.rasterBoundsBuffer,c.quadTriangleIndexBuffer,c.rasterBoundsSegments)}},background:function(c,d,h){var v=h.paint.get("background-color"),I=h.paint.get("background-opacity");if(I!==0){var M=c.context,O=M.gl,V=c.transform,X=V.tileSize,it=h.paint.get("background-pattern");if(!c.isPatternMissing(it)){var vt=!it&&v.a===1&&I===1&&c.opaquePassEnabledForLayer()?"opaque":"translucent";if(c.renderPass===vt){var yt=Rt.disabled,xt=c.depthModeForSublayer(0,vt==="opaque"?At.ReadWrite:At.ReadOnly),Bt=c.colorModeForRenderPass(),Lt=c.useProgram(it?"backgroundPattern":"background"),Ht=V.coveringTiles({tileSize:X});it&&(M.activeTexture.set(O.TEXTURE0),c.imageManager.bind(c.context));for(var Mt=h.getCrossfadeParameters(),Gt=0,Qt=Ht;Gt<Qt.length;Gt+=1){var de=Qt[Gt],ke=c.transform.calculatePosMatrix(de.toUnwrapped()),Me=it?Wu(ke,I,c,it,{tileID:de,tileSize:X},Mt):Hs(ke,I,v);Lt.draw(M,O.TRIANGLES,xt,yt,Bt,te.disabled,Me,h.id,c.tileExtentBuffer,c.quadTriangleIndexBuffer,c.tileExtentSegments)}}}}},debug:function(c,d,h){for(var v=0;v<h.length;v++)Be(c,d,h[v])},custom:function(c,d,h){var v=c.context,I=h.implementation;if(c.renderPass==="offscreen"){var M=I.prerender;M&&(c.setCustomLayerDefaults(),v.setColorMode(c.colorModeForRenderPass()),M.call(I,v.gl,c.transform.customLayerMatrix()),v.setDirty(),c.setBaseState())}else if(c.renderPass==="translucent"){c.setCustomLayerDefaults(),v.setColorMode(c.colorModeForRenderPass()),v.setStencilMode(Rt.disabled);var O=I.renderingMode==="3d"?new At(c.context.gl.LEQUAL,At.ReadWrite,c.depthRangeFor3D):c.depthModeForSublayer(0,At.ReadOnly);v.setDepthMode(O),I.render(v.gl,c.transform.customLayerMatrix()),v.setDirty(),c.setBaseState(),v.bindFramebuffer.set(null)}}},Ye=function(c,d){this.context=new gt(c),this.transform=d,this._tileTextures={},this.setup(),this.numSublayers=Nt.maxUnderzooming+Nt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Pl,this.gpuTimers={}};Ye.prototype.resize=function(c,d){if(this.width=c*i.browser.devicePixelRatio,this.height=d*i.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var h=0,v=this.style._order;h<v.length;h+=1)this.style._layers[v[h]].resize()},Ye.prototype.setup=function(){var c=this.context,d=new i.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(i.EXTENT,0),d.emplaceBack(0,i.EXTENT),d.emplaceBack(i.EXTENT,i.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(d,so.members),this.tileExtentSegments=i.SegmentVector.simpleSegment(0,0,4,2);var h=new i.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(i.EXTENT,0),h.emplaceBack(0,i.EXTENT),h.emplaceBack(i.EXTENT,i.EXTENT),this.debugBuffer=c.createVertexBuffer(h,so.members),this.debugSegments=i.SegmentVector.simpleSegment(0,0,4,5);var v=new i.StructArrayLayout4i8;v.emplaceBack(0,0,0,0),v.emplaceBack(i.EXTENT,0,i.EXTENT,0),v.emplaceBack(0,i.EXTENT,0,i.EXTENT),v.emplaceBack(i.EXTENT,i.EXTENT,i.EXTENT,i.EXTENT),this.rasterBoundsBuffer=c.createVertexBuffer(v,jt.members),this.rasterBoundsSegments=i.SegmentVector.simpleSegment(0,0,4,2);var I=new i.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(1,0),I.emplaceBack(0,1),I.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(I,so.members),this.viewportSegments=i.SegmentVector.simpleSegment(0,0,4,2);var M=new i.StructArrayLayout1ui2;M.emplaceBack(0),M.emplaceBack(1),M.emplaceBack(3),M.emplaceBack(2),M.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(M);var O=new i.StructArrayLayout3ui6;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(O),this.emptyTexture=new i.Texture(c,{width:1,height:1,data:new Uint8Array([0,0,0,0])},c.gl.RGBA);var V=this.context.gl;this.stencilClearMode=new Rt({func:V.ALWAYS,mask:0},0,255,V.ZERO,V.ZERO,V.ZERO)},Ye.prototype.clearStencil=function(){var c=this.context,d=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var h=i.create();i.ortho(h,0,this.width,this.height,0,0,1),i.scale(h,h,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(c,d.TRIANGLES,At.disabled,this.stencilClearMode,qt.disabled,te.disabled,ea(h),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ye.prototype._renderTileClippingMasks=function(c,d){if(this.currentStencilSource!==c.source&&c.isTileClipped()&&d&&d.length){this.currentStencilSource=c.source;var h=this.context,v=h.gl;this.nextStencilID+d.length>256&&this.clearStencil(),h.setColorMode(qt.disabled),h.setDepthMode(At.disabled);var I=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var M=0,O=d;M<O.length;M+=1){var V=O[M],X=this._tileClippingMaskIDs[V.key]=this.nextStencilID++;I.draw(h,v.TRIANGLES,At.disabled,new Rt({func:v.ALWAYS,mask:0},X,255,v.KEEP,v.KEEP,v.REPLACE),qt.disabled,te.disabled,ea(V.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ye.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var c=this.nextStencilID++,d=this.context.gl;return new Rt({func:d.NOTEQUAL,mask:255},c,255,d.KEEP,d.KEEP,d.REPLACE)},Ye.prototype.stencilModeForClipping=function(c){var d=this.context.gl;return new Rt({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,d.KEEP,d.KEEP,d.REPLACE)},Ye.prototype.stencilConfigForOverlap=function(c){var d,h=this.context.gl,v=c.sort(function(X,it){return it.overscaledZ-X.overscaledZ}),I=v[v.length-1].overscaledZ,M=v[0].overscaledZ-I+1;if(M>1){this.currentStencilSource=void 0,this.nextStencilID+M>256&&this.clearStencil();for(var O={},V=0;V<M;V++)O[V+I]=new Rt({func:h.GEQUAL,mask:255},V+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=M,[O,v]}return[(d={},d[I]=Rt.disabled,d),v]},Ye.prototype.colorModeForRenderPass=function(){var c=this.context.gl;return this._showOverdrawInspector?new qt([c.CONSTANT_COLOR,c.ONE],new i.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?qt.unblended:qt.alphaBlended},Ye.prototype.depthModeForSublayer=function(c,d,h){if(!this.opaquePassEnabledForLayer())return At.disabled;var v=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new At(h||this.context.gl.LEQUAL,d,[v,v])},Ye.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ye.prototype.render=function(c,d){var h=this;this.style=c,this.options=d,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(i.browser.now()),this.imageManager.beginFrame();var v=this.style._order,I=this.style.sourceCaches;for(var M in I){var O=I[M];O.used&&O.prepare(this.context)}var V,X,it={},vt={},yt={};for(var xt in I){var Bt=I[xt];it[xt]=Bt.getVisibleCoordinates(),vt[xt]=it[xt].slice().reverse(),yt[xt]=Bt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Lt=0;Lt<v.length;Lt++)if(this.style._layers[v[Lt]].is3D()){this.opaquePassCutoff=Lt;break}this.renderPass="offscreen";for(var Ht=0,Mt=v;Ht<Mt.length;Ht+=1){var Gt=this.style._layers[Mt[Ht]];if(Gt.hasOffscreenPass()&&!Gt.isHidden(this.transform.zoom)){var Qt=vt[Gt.source];(Gt.type==="custom"||Qt.length)&&this.renderLayer(this,I[Gt.source],Gt,Qt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?i.Color.black:i.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){var de=this.style._layers[v[this.currentLayer]],ke=I[de.source],Me=it[de.source];this._renderTileClippingMasks(de,Me),this.renderLayer(this,ke,de,Me)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){var Oe=this.style._layers[v[this.currentLayer]],He=I[Oe.source],Xe=(Oe.type==="symbol"?yt:vt)[Oe.source];this._renderTileClippingMasks(Oe,it[Oe.source]),this.renderLayer(this,He,Oe,Xe)}this.options.showTileBoundaries&&(i.values(this.style._layers).forEach(function(rn){rn.source&&!rn.isHidden(h.transform.zoom)&&(rn.source!==(X&&X.id)&&(X=h.style.sourceCaches[rn.source]),(!V||V.getSource().maxzoom<X.getSource().maxzoom)&&(V=X))}),V&&Ie.debug(this,V,V.getVisibleCoordinates())),this.options.showPadding&&function(rn){var yn=rn.transform.padding;Yr(rn,rn.transform.height-(yn.top||0),3,pe),Yr(rn,yn.bottom||0,3,ze),Ti(rn,yn.left||0,3,Sn),Ti(rn,rn.transform.width-(yn.right||0),3,ir);var On=rn.transform.centerPoint;(function(Xn,Kn,Xr,Cn){oe(Xn,Kn-1,Xr-10,2,20,Cn),oe(Xn,Kn-10,Xr-1,20,2,Cn)})(rn,On.x,rn.transform.height-On.y,zi)}(this),this.context.setDefault()},Ye.prototype.renderLayer=function(c,d,h,v){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||v.length)&&(this.id=h.id,this.gpuTimingStart(h),Ie[h.type](c,d,h,v,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ye.prototype.gpuTimingStart=function(c){if(this.options.gpuTiming){var d=this.context.extTimerQuery,h=this.gpuTimers[c.id];h||(h=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),h.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,h.query)}},Ye.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}},Ye.prototype.collectGpuTimers=function(){var c=this.gpuTimers;return this.gpuTimers={},c},Ye.prototype.queryGpuTimers=function(c){var d={};for(var h in c){var v=c[h],I=this.context.extTimerQuery,M=I.getQueryObjectEXT(v.query,I.QUERY_RESULT_EXT)/1e6;I.deleteQueryEXT(v.query),d[h]=M}return d},Ye.prototype.translatePosMatrix=function(c,d,h,v,I){if(!h[0]&&!h[1])return c;var M=I?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(M){var O=Math.sin(M),V=Math.cos(M);h=[h[0]*V-h[1]*O,h[0]*O+h[1]*V]}var X=[I?h[0]:Di(d,h[0],this.transform.zoom),I?h[1]:Di(d,h[1],this.transform.zoom),0],it=new Float32Array(16);return i.translate(it,c,X),it},Ye.prototype.saveTileTexture=function(c){var d=this._tileTextures[c.size[0]];d?d.push(c):this._tileTextures[c.size[0]]=[c]},Ye.prototype.getTileTexture=function(c){var d=this._tileTextures[c];return d&&d.length>0?d.pop():null},Ye.prototype.isPatternMissing=function(c){if(!c)return!1;if(!c.from||!c.to)return!0;var d=this.imageManager.getPattern(c.from.toString()),h=this.imageManager.getPattern(c.to.toString());return!d||!h},Ye.prototype.useProgram=function(c,d){this.cache=this.cache||{};var h=""+c+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[h]||(this.cache[h]=new oh(this.context,c,eo[c],d,pl[c],this._showOverdrawInspector)),this.cache[h]},Ye.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ye.prototype.setBaseState=function(){var c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)},Ye.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=i.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ye.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var fr=function(c,d){this.points=c,this.planes=d};fr.fromInvProjectionMatrix=function(c,d,h){var v=Math.pow(2,h),I=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(O){return i.transformMat4([],O,c)}).map(function(O){return i.scale$1([],O,1/O[3]/d*v)}),M=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(O){var V=i.sub([],I[O[0]],I[O[1]]),X=i.sub([],I[O[2]],I[O[1]]),it=i.normalize([],i.cross([],V,X)),vt=-i.dot(it,I[O[1]]);return it.concat(vt)});return new fr(I,M)};var kr=function(c,d){this.min=c,this.max=d,this.center=i.scale$2([],i.add([],this.min,this.max),.5)};kr.prototype.quadrant=function(c){for(var d=[c%2==0,c<2],h=i.clone$2(this.min),v=i.clone$2(this.max),I=0;I<d.length;I++)h[I]=d[I]?this.min[I]:this.center[I],v[I]=d[I]?this.center[I]:this.max[I];return v[2]=this.max[2],new kr(h,v)},kr.prototype.distanceX=function(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]},kr.prototype.distanceY=function(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]},kr.prototype.intersects=function(c){for(var d=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],h=!0,v=0;v<c.planes.length;v++){for(var I=c.planes[v],M=0,O=0;O<d.length;O++)M+=i.dot$1(I,d[O])>=0;if(M===0)return 0;M!==d.length&&(h=!1)}if(h)return 2;for(var V=0;V<3;V++){for(var X=Number.MAX_VALUE,it=-Number.MAX_VALUE,vt=0;vt<c.points.length;vt++){var yt=c.points[vt][V]-this.min[V];X=Math.min(X,yt),it=Math.max(it,yt)}if(it<0||X>this.max[V]-this.min[V])return 0}return 1};var Wr=function(c,d,h,v){if(c===void 0&&(c=0),d===void 0&&(d=0),h===void 0&&(h=0),v===void 0&&(v=0),isNaN(c)||c<0||isNaN(d)||d<0||isNaN(h)||h<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=d,this.left=h,this.right=v};Wr.prototype.interpolate=function(c,d,h){return d.top!=null&&c.top!=null&&(this.top=i.number(c.top,d.top,h)),d.bottom!=null&&c.bottom!=null&&(this.bottom=i.number(c.bottom,d.bottom,h)),d.left!=null&&c.left!=null&&(this.left=i.number(c.left,d.left,h)),d.right!=null&&c.right!=null&&(this.right=i.number(c.right,d.right,h)),this},Wr.prototype.getCenter=function(c,d){var h=i.clamp((this.left+c-this.right)/2,0,c),v=i.clamp((this.top+d-this.bottom)/2,0,d);return new i.Point(h,v)},Wr.prototype.equals=function(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right},Wr.prototype.clone=function(){return new Wr(this.top,this.bottom,this.left,this.right)},Wr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Dn=function(c,d,h,v,I){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=I===void 0||I,this._minZoom=c||0,this._maxZoom=d||22,this._minPitch=h??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new i.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Wr,this._posMatrixCache={},this._alignedPosMatrixCache={}},ri={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Dn.prototype.clone=function(){var c=new Dn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return c.tileSize=this.tileSize,c.latRange=this.latRange,c.width=this.width,c.height=this.height,c._center=this._center,c.zoom=this.zoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._calcMatrices(),c},ri.minZoom.get=function(){return this._minZoom},ri.minZoom.set=function(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))},ri.maxZoom.get=function(){return this._maxZoom},ri.maxZoom.set=function(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))},ri.minPitch.get=function(){return this._minPitch},ri.minPitch.set=function(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))},ri.maxPitch.get=function(){return this._maxPitch},ri.maxPitch.set=function(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))},ri.renderWorldCopies.get=function(){return this._renderWorldCopies},ri.renderWorldCopies.set=function(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c},ri.worldSize.get=function(){return this.tileSize*this.scale},ri.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ri.size.get=function(){return new i.Point(this.width,this.height)},ri.bearing.get=function(){return-this.angle/Math.PI*180},ri.bearing.set=function(c){var d=-i.wrap(c,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=i.create$2(),i.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ri.pitch.get=function(){return this._pitch/Math.PI*180},ri.pitch.set=function(c){var d=i.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())},ri.fov.get=function(){return this._fov/Math.PI*180},ri.fov.set=function(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=c/180*Math.PI,this._calcMatrices())},ri.zoom.get=function(){return this._zoom},ri.zoom.set=function(c){var d=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.scale=this.zoomScale(d),this.tileZoom=Math.floor(d),this.zoomFraction=d-this.tileZoom,this._constrain(),this._calcMatrices())},ri.center.get=function(){return this._center},ri.center.set=function(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._constrain(),this._calcMatrices())},ri.padding.get=function(){return this._edgeInsets.toJSON()},ri.padding.set=function(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())},ri.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Dn.prototype.isPaddingEqual=function(c){return this._edgeInsets.equals(c)},Dn.prototype.interpolatePadding=function(c,d,h){this._unmodified=!1,this._edgeInsets.interpolate(c,d,h),this._constrain(),this._calcMatrices()},Dn.prototype.coveringZoomLevel=function(c){var d=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,d)},Dn.prototype.getVisibleUnwrappedCoordinates=function(c){var d=[new i.UnwrappedTileID(0,c)];if(this._renderWorldCopies)for(var h=this.pointCoordinate(new i.Point(0,0)),v=this.pointCoordinate(new i.Point(this.width,0)),I=this.pointCoordinate(new i.Point(this.width,this.height)),M=this.pointCoordinate(new i.Point(0,this.height)),O=Math.floor(Math.min(h.x,v.x,I.x,M.x)),V=Math.floor(Math.max(h.x,v.x,I.x,M.x)),X=O-1;X<=V+1;X++)X!==0&&d.push(new i.UnwrappedTileID(X,c));return d},Dn.prototype.coveringTiles=function(c){var d=this.coveringZoomLevel(c),h=d;if(c.minzoom!==void 0&&d<c.minzoom)return[];c.maxzoom!==void 0&&d>c.maxzoom&&(d=c.maxzoom);var v=i.MercatorCoordinate.fromLngLat(this.center),I=Math.pow(2,d),M=[I*v.x,I*v.y,0],O=fr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d),V=c.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(V=d);var X=function(rn){return{aabb:new kr([rn*I,0,0],[(rn+1)*I,I,0]),zoom:0,x:0,y:0,wrap:rn,fullyVisible:!1}},it=[],vt=[],yt=d,xt=c.reparseOverscaled?h:d;if(this._renderWorldCopies)for(var Bt=1;Bt<=3;Bt++)it.push(X(-Bt)),it.push(X(Bt));for(it.push(X(0));it.length>0;){var Lt=it.pop(),Ht=Lt.x,Mt=Lt.y,Gt=Lt.fullyVisible;if(!Gt){var Qt=Lt.aabb.intersects(O);if(Qt===0)continue;Gt=Qt===2}var de=Lt.aabb.distanceX(M),ke=Lt.aabb.distanceY(M),Me=Math.max(Math.abs(de),Math.abs(ke));if(Lt.zoom===yt||Me>3+(1<<yt-Lt.zoom)-2&&Lt.zoom>=V)vt.push({tileID:new i.OverscaledTileID(Lt.zoom===yt?xt:Lt.zoom,Lt.wrap,Lt.zoom,Ht,Mt),distanceSq:i.sqrLen([M[0]-.5-Ht,M[1]-.5-Mt])});else for(var Oe=0;Oe<4;Oe++){var He=(Ht<<1)+Oe%2,Xe=(Mt<<1)+(Oe>>1);it.push({aabb:Lt.aabb.quadrant(Oe),zoom:Lt.zoom+1,x:He,y:Xe,wrap:Lt.wrap,fullyVisible:Gt})}}return vt.sort(function(rn,yn){return rn.distanceSq-yn.distanceSq}).map(function(rn){return rn.tileID})},Dn.prototype.resize=function(c,d){this.width=c,this.height=d,this.pixelsToGLUnits=[2/c,-2/d],this._constrain(),this._calcMatrices()},ri.unmodified.get=function(){return this._unmodified},Dn.prototype.zoomScale=function(c){return Math.pow(2,c)},Dn.prototype.scaleZoom=function(c){return Math.log(c)/Math.LN2},Dn.prototype.project=function(c){var d=i.clamp(c.lat,-this.maxValidLatitude,this.maxValidLatitude);return new i.Point(i.mercatorXfromLng(c.lng)*this.worldSize,i.mercatorYfromLat(d)*this.worldSize)},Dn.prototype.unproject=function(c){return new i.MercatorCoordinate(c.x/this.worldSize,c.y/this.worldSize).toLngLat()},ri.point.get=function(){return this.project(this.center)},Dn.prototype.setLocationAtPoint=function(c,d){var h=this.pointCoordinate(d),v=this.pointCoordinate(this.centerPoint),I=this.locationCoordinate(c),M=new i.MercatorCoordinate(I.x-(h.x-v.x),I.y-(h.y-v.y));this.center=this.coordinateLocation(M),this._renderWorldCopies&&(this.center=this.center.wrap())},Dn.prototype.locationPoint=function(c){return this.coordinatePoint(this.locationCoordinate(c))},Dn.prototype.pointLocation=function(c){return this.coordinateLocation(this.pointCoordinate(c))},Dn.prototype.locationCoordinate=function(c){return i.MercatorCoordinate.fromLngLat(c)},Dn.prototype.coordinateLocation=function(c){return c.toLngLat()},Dn.prototype.pointCoordinate=function(c){var d=[c.x,c.y,0,1],h=[c.x,c.y,1,1];i.transformMat4(d,d,this.pixelMatrixInverse),i.transformMat4(h,h,this.pixelMatrixInverse);var v=d[3],I=h[3],M=d[1]/v,O=h[1]/I,V=d[2]/v,X=h[2]/I,it=V===X?0:(0-V)/(X-V);return new i.MercatorCoordinate(i.number(d[0]/v,h[0]/I,it)/this.worldSize,i.number(M,O,it)/this.worldSize)},Dn.prototype.coordinatePoint=function(c){var d=[c.x*this.worldSize,c.y*this.worldSize,0,1];return i.transformMat4(d,d,this.pixelMatrix),new i.Point(d[0]/d[3],d[1]/d[3])},Dn.prototype.getBounds=function(){return new i.LngLatBounds().extend(this.pointLocation(new i.Point(0,0))).extend(this.pointLocation(new i.Point(this.width,0))).extend(this.pointLocation(new i.Point(this.width,this.height))).extend(this.pointLocation(new i.Point(0,this.height)))},Dn.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new i.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Dn.prototype.setMaxBounds=function(c){c?(this.lngRange=[c.getWest(),c.getEast()],this.latRange=[c.getSouth(),c.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Dn.prototype.calculatePosMatrix=function(c,d){d===void 0&&(d=!1);var h=c.key,v=d?this._alignedPosMatrixCache:this._posMatrixCache;if(v[h])return v[h];var I=c.canonical,M=this.worldSize/this.zoomScale(I.z),O=I.x+Math.pow(2,I.z)*c.wrap,V=i.identity(new Float64Array(16));return i.translate(V,V,[O*M,I.y*M,0]),i.scale(V,V,[M/i.EXTENT,M/i.EXTENT,1]),i.multiply(V,d?this.alignedProjMatrix:this.projMatrix,V),v[h]=new Float32Array(V),v[h]},Dn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Dn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var c,d,h,v,I=-90,M=90,O=-180,V=180,X=this.size,it=this._unmodified;if(this.latRange){var vt=this.latRange;I=i.mercatorYfromLat(vt[1])*this.worldSize,c=(M=i.mercatorYfromLat(vt[0])*this.worldSize)-I<X.y?X.y/(M-I):0}if(this.lngRange){var yt=this.lngRange;O=i.mercatorXfromLng(yt[0])*this.worldSize,d=(V=i.mercatorXfromLng(yt[1])*this.worldSize)-O<X.x?X.x/(V-O):0}var xt=this.point,Bt=Math.max(d||0,c||0);if(Bt)return this.center=this.unproject(new i.Point(d?(V+O)/2:xt.x,c?(M+I)/2:xt.y)),this.zoom+=this.scaleZoom(Bt),this._unmodified=it,void(this._constraining=!1);if(this.latRange){var Lt=xt.y,Ht=X.y/2;Lt-Ht<I&&(v=I+Ht),Lt+Ht>M&&(v=M-Ht)}if(this.lngRange){var Mt=xt.x,Gt=X.x/2;Mt-Gt<O&&(h=O+Gt),Mt+Gt>V&&(h=V-Gt)}h===void 0&&v===void 0||(this.center=this.unproject(new i.Point(h!==void 0?h:xt.x,v!==void 0?v:xt.y))),this._unmodified=it,this._constraining=!1}},Dn.prototype._calcMatrices=function(){if(this.height){var c=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var d=Math.PI/2+this._pitch,h=this._fov*(.5+c.y/this.height),v=Math.sin(h)*this.cameraToCenterDistance/Math.sin(i.clamp(Math.PI-d-h,.01,Math.PI-.01)),I=this.point,M=I.x,O=I.y,V=1.01*(Math.cos(Math.PI/2-this._pitch)*v+this.cameraToCenterDistance),X=this.height/50,it=new Float64Array(16);i.perspective(it,this._fov,this.width/this.height,X,V),it[8]=2*-c.x/this.width,it[9]=2*c.y/this.height,i.scale(it,it,[1,-1,1]),i.translate(it,it,[0,0,-this.cameraToCenterDistance]),i.rotateX(it,it,this._pitch),i.rotateZ(it,it,this.angle),i.translate(it,it,[-M,-O,0]),this.mercatorMatrix=i.scale([],it,[this.worldSize,this.worldSize,this.worldSize]),i.scale(it,it,[1,1,i.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=it,this.invProjMatrix=i.invert([],this.projMatrix);var vt=this.width%2/2,yt=this.height%2/2,xt=Math.cos(this.angle),Bt=Math.sin(this.angle),Lt=M-Math.round(M)+xt*vt+Bt*yt,Ht=O-Math.round(O)+xt*yt+Bt*vt,Mt=new Float64Array(it);if(i.translate(Mt,Mt,[Lt>.5?Lt-1:Lt,Ht>.5?Ht-1:Ht,0]),this.alignedProjMatrix=Mt,it=i.create(),i.scale(it,it,[this.width/2,-this.height/2,1]),i.translate(it,it,[1,-1,0]),this.labelPlaneMatrix=it,it=i.create(),i.scale(it,it,[1,-1,1]),i.translate(it,it,[-1,-1,0]),i.scale(it,it,[2/this.width,2/this.height,1]),this.glCoordMatrix=it,this.pixelMatrix=i.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(it=i.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=it,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Dn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var c=this.pointCoordinate(new i.Point(0,0)),d=[c.x*this.worldSize,c.y*this.worldSize,0,1];return i.transformMat4(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance},Dn.prototype.getCameraPoint=function(){var c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.Point(0,c))},Dn.prototype.getCameraQueryGeometry=function(c){var d=this.getCameraPoint();if(c.length===1)return[c[0],d];for(var h=d.x,v=d.y,I=d.x,M=d.y,O=0,V=c;O<V.length;O+=1){var X=V[O];h=Math.min(h,X.x),v=Math.min(v,X.y),I=Math.max(I,X.x),M=Math.max(M,X.y)}return[new i.Point(h,v),new i.Point(I,v),new i.Point(I,M),new i.Point(h,M),new i.Point(h,v)]},Object.defineProperties(Dn.prototype,ri);var fa=function(c){var d,h,v,I;this._hashName=c&&encodeURIComponent(c),i.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(d=this._updateHashUnthrottled.bind(this),h=!1,v=null,I=function(){v=null,h&&(d(),v=setTimeout(I,300),h=!1)},function(){return h=!0,v||I(),v})};fa.prototype.addTo=function(c){return this._map=c,i.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},fa.prototype.remove=function(){return i.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},fa.prototype.getHashString=function(c){var d=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,v=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),I=Math.pow(10,v),M=Math.round(d.lng*I)/I,O=Math.round(d.lat*I)/I,V=this._map.getBearing(),X=this._map.getPitch(),it="";if(it+=c?"/"+M+"/"+O+"/"+h:h+"/"+O+"/"+M,(V||X)&&(it+="/"+Math.round(10*V)/10),X&&(it+="/"+Math.round(X)),this._hashName){var vt=this._hashName,yt=!1,xt=i.window.location.hash.slice(1).split("&").map(function(Bt){var Lt=Bt.split("=")[0];return Lt===vt?(yt=!0,Lt+"="+it):Bt}).filter(function(Bt){return Bt});return yt||xt.push(vt+"="+it),"#"+xt.join("&")}return"#"+it},fa.prototype._getCurrentHash=function(){var c,d=this,h=i.window.location.hash.replace("#","");return this._hashName?(h.split("&").map(function(v){return v.split("=")}).forEach(function(v){v[0]===d._hashName&&(c=v)}),(c&&c[1]||"").split("/")):h.split("/")},fa.prototype._onHashChange=function(){var c=this._getCurrentHash();if(c.length>=3&&!c.some(function(h){return isNaN(h)})){var d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:d,pitch:+(c[4]||0)}),!0}return!1},fa.prototype._updateHashUnthrottled=function(){var c=i.window.location.href.replace(/(#.+)?$/,this.getHashString());try{i.window.history.replaceState(i.window.history.state,null,c)}catch{}};var Ao={linearity:.3,easing:i.bezier(0,0,.3,1)},Qa=i.extend({deceleration:2500,maxSpeed:1400},Ao),$u=i.extend({deceleration:20,maxSpeed:1400},Ao),Ku=i.extend({deceleration:1e3,maxSpeed:360},Ao),hh=i.extend({deceleration:1e3,maxSpeed:90},Ao),ci=function(c){this._map=c,this.clear()};function tr(c,d){(!c.duration||c.duration<d.duration)&&(c.duration=d.duration,c.easing=d.easing)}function cs(c,d,h){var v=h.maxSpeed,I=h.linearity,M=h.deceleration,O=i.clamp(c*I/(d/1e3),-v,v),V=Math.abs(O)/(M*I);return{easing:h.easing,duration:1e3*V,amount:O*(V/2)}}ci.prototype.clear=function(){this._inertiaBuffer=[]},ci.prototype.record=function(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.browser.now(),settings:c})},ci.prototype._drainInertiaBuffer=function(){for(var c=this._inertiaBuffer,d=i.browser.now();c.length>0&&d-c[0].time>160;)c.shift()},ci.prototype._onMoveEnd=function(c){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var d={zoom:0,bearing:0,pitch:0,pan:new i.Point(0,0),pinchAround:void 0,around:void 0},h=0,v=this._inertiaBuffer;h<v.length;h+=1){var I=v[h].settings;d.zoom+=I.zoomDelta||0,d.bearing+=I.bearingDelta||0,d.pitch+=I.pitchDelta||0,I.panDelta&&d.pan._add(I.panDelta),I.around&&(d.around=I.around),I.pinchAround&&(d.pinchAround=I.pinchAround)}var M=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,O={};if(d.pan.mag()){var V=cs(d.pan.mag(),M,i.extend({},Qa,c||{}));O.offset=d.pan.mult(V.amount/d.pan.mag()),O.center=this._map.transform.center,tr(O,V)}if(d.zoom){var X=cs(d.zoom,M,$u);O.zoom=this._map.transform.zoom+X.amount,tr(O,X)}if(d.bearing){var it=cs(d.bearing,M,Ku);O.bearing=this._map.transform.bearing+i.clamp(it.amount,-179,179),tr(O,it)}if(d.pitch){var vt=cs(d.pitch,M,hh);O.pitch=this._map.transform.pitch+vt.amount,tr(O,vt)}if(O.zoom||O.bearing){var yt=d.pinchAround===void 0?d.around:d.pinchAround;O.around=yt?this._map.unproject(yt):this._map.getCenter()}return this.clear(),i.extend(O,{noMoveStart:!0})}};var Pi=function(c){function d(v,I,M,O){O===void 0&&(O={});var V=m.mousePos(I.getCanvasContainer(),M),X=I.unproject(V);c.call(this,v,i.extend({point:V,lngLat:X,originalEvent:M},O)),this._defaultPrevented=!1,this.target=I}c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d;var h={defaultPrevented:{configurable:!0}};return d.prototype.preventDefault=function(){this._defaultPrevented=!0},h.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(d.prototype,h),d}(i.Event),Gs=function(c){function d(v,I,M){var O=v==="touchend"?M.changedTouches:M.touches,V=m.touchPos(I.getCanvasContainer(),O),X=V.map(function(yt){return I.unproject(yt)}),it=V.reduce(function(yt,xt,Bt,Lt){return yt.add(xt.div(Lt.length))},new i.Point(0,0)),vt=I.unproject(it);c.call(this,v,{points:V,point:it,lngLats:X,lngLat:vt,originalEvent:M}),this._defaultPrevented=!1}c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d;var h={defaultPrevented:{configurable:!0}};return d.prototype.preventDefault=function(){this._defaultPrevented=!0},h.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(d.prototype,h),d}(i.Event),Ja=function(c){function d(v,I,M){c.call(this,v,{originalEvent:M}),this._defaultPrevented=!1}c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d;var h={defaultPrevented:{configurable:!0}};return d.prototype.preventDefault=function(){this._defaultPrevented=!0},h.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(d.prototype,h),d}(i.Event),wi=function(c,d){this._map=c,this._clickTolerance=d.clickTolerance};wi.prototype.reset=function(){delete this._mousedownPos},wi.prototype.wheel=function(c){return this._firePreventable(new Ja(c.type,this._map,c))},wi.prototype.mousedown=function(c,d){return this._mousedownPos=d,this._firePreventable(new Pi(c.type,this._map,c))},wi.prototype.mouseup=function(c){this._map.fire(new Pi(c.type,this._map,c))},wi.prototype.click=function(c,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Pi(c.type,this._map,c))},wi.prototype.dblclick=function(c){return this._firePreventable(new Pi(c.type,this._map,c))},wi.prototype.mouseover=function(c){this._map.fire(new Pi(c.type,this._map,c))},wi.prototype.mouseout=function(c){this._map.fire(new Pi(c.type,this._map,c))},wi.prototype.touchstart=function(c){return this._firePreventable(new Gs(c.type,this._map,c))},wi.prototype.touchmove=function(c){this._map.fire(new Gs(c.type,this._map,c))},wi.prototype.touchend=function(c){this._map.fire(new Gs(c.type,this._map,c))},wi.prototype.touchcancel=function(c){this._map.fire(new Gs(c.type,this._map,c))},wi.prototype._firePreventable=function(c){if(this._map.fire(c),c.defaultPrevented)return{}},wi.prototype.isEnabled=function(){return!0},wi.prototype.isActive=function(){return!1},wi.prototype.enable=function(){},wi.prototype.disable=function(){};var xn=function(c){this._map=c};xn.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},xn.prototype.mousemove=function(c){this._map.fire(new Pi(c.type,this._map,c))},xn.prototype.mousedown=function(){this._delayContextMenu=!0},xn.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Pi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},xn.prototype.contextmenu=function(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new Pi(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()},xn.prototype.isEnabled=function(){return!0},xn.prototype.isActive=function(){return!1},xn.prototype.enable=function(){},xn.prototype.disable=function(){};var wo=function(c,d){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=d.clickTolerance||1};function Da(c,d){for(var h={},v=0;v<c.length;v++)h[c[v].identifier]=d[v];return h}wo.prototype.isEnabled=function(){return!!this._enabled},wo.prototype.isActive=function(){return!!this._active},wo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},wo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},wo.prototype.mousedown=function(c,d){this.isEnabled()&&c.shiftKey&&c.button===0&&(m.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)},wo.prototype.mousemoveWindow=function(c,d){if(this._active){var h=d;if(!(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)){var v=this._startPos;this._lastPos=h,this._box||(this._box=m.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));var I=Math.min(v.x,h.x),M=Math.max(v.x,h.x),O=Math.min(v.y,h.y),V=Math.max(v.y,h.y);m.setTransform(this._box,"translate("+I+"px,"+O+"px)"),this._box.style.width=M-I+"px",this._box.style.height=V-O+"px"}}},wo.prototype.mouseupWindow=function(c,d){var h=this;if(this._active&&c.button===0){var v=this._startPos,I=d;if(this.reset(),m.suppressClick(),v.x!==I.x||v.y!==I.y)return this._map.fire(new i.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:function(M){return M.fitScreenCoordinates(v,I,h._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",c)}},wo.prototype.keydown=function(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))},wo.prototype.blur=function(){this.reset()},wo.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(m.remove(this._box),this._box=null),m.enableDrag(),delete this._startPos,delete this._lastPos},wo.prototype._fireEvent=function(c,d){return this._map.fire(new i.Event(c,{originalEvent:d}))};var za=function(c){this.reset(),this.numTouches=c.numTouches};za.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},za.prototype.touchstart=function(c,d,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=c.timeStamp),h.length===this.numTouches&&(this.centroid=function(v){for(var I=new i.Point(0,0),M=0,O=v;M<O.length;M+=1)I._add(O[M]);return I.div(v.length)}(d),this.touches=Da(h,d)))},za.prototype.touchmove=function(c,d,h){if(!this.aborted&&this.centroid){var v=Da(h,d);for(var I in this.touches){var M=v[I];(!M||M.dist(this.touches[I])>30)&&(this.aborted=!0)}}},za.prototype.touchend=function(c,d,h){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){var v=!this.aborted&&this.centroid;if(this.reset(),v)return v}};var Zo=function(c){this.singleTap=new za(c),this.numTaps=c.numTaps,this.reset()};Zo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Zo.prototype.touchstart=function(c,d,h){this.singleTap.touchstart(c,d,h)},Zo.prototype.touchmove=function(c,d,h){this.singleTap.touchmove(c,d,h)},Zo.prototype.touchend=function(c,d,h){var v=this.singleTap.touchend(c,d,h);if(v){var I=c.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(v)<30;if(I&&M||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}};var $o=function(){this._zoomIn=new Zo({numTouches:1,numTaps:2}),this._zoomOut=new Zo({numTouches:2,numTaps:1}),this.reset()};$o.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},$o.prototype.touchstart=function(c,d,h){this._zoomIn.touchstart(c,d,h),this._zoomOut.touchstart(c,d,h)},$o.prototype.touchmove=function(c,d,h){this._zoomIn.touchmove(c,d,h),this._zoomOut.touchmove(c,d,h)},$o.prototype.touchend=function(c,d,h){var v=this,I=this._zoomIn.touchend(c,d,h),M=this._zoomOut.touchend(c,d,h);return I?(this._active=!0,c.preventDefault(),setTimeout(function(){return v.reset()},0),{cameraAnimation:function(O){return O.easeTo({duration:300,zoom:O.getZoom()+1,around:O.unproject(I)},{originalEvent:c})}}):M?(this._active=!0,c.preventDefault(),setTimeout(function(){return v.reset()},0),{cameraAnimation:function(O){return O.easeTo({duration:300,zoom:O.getZoom()-1,around:O.unproject(M)},{originalEvent:c})}}):void 0},$o.prototype.touchcancel=function(){this.reset()},$o.prototype.enable=function(){this._enabled=!0},$o.prototype.disable=function(){this._enabled=!1,this.reset()},$o.prototype.isEnabled=function(){return this._enabled},$o.prototype.isActive=function(){return this._active};var gu={0:1,2:2},sn=function(c){this.reset(),this._clickTolerance=c.clickTolerance||1};sn.prototype.blur=function(){this.reset()},sn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},sn.prototype._correctButton=function(c,d){return!1},sn.prototype._move=function(c,d){return{}},sn.prototype.mousedown=function(c,d){if(!this._lastPoint){var h=m.mouseButton(c);this._correctButton(c,h)&&(this._lastPoint=d,this._eventButton=h)}},sn.prototype.mousemoveWindow=function(c,d){var h=this._lastPoint;if(h){if(c.preventDefault(),function(v,I){var M=gu[I];return v.buttons===void 0||(v.buttons&M)!==M}(c,this._eventButton))this.reset();else if(this._moved||!(d.dist(h)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(h,d)}},sn.prototype.mouseupWindow=function(c){this._lastPoint&&m.mouseButton(c)===this._eventButton&&(this._moved&&m.suppressClick(),this.reset())},sn.prototype.enable=function(){this._enabled=!0},sn.prototype.disable=function(){this._enabled=!1,this.reset()},sn.prototype.isEnabled=function(){return this._enabled},sn.prototype.isActive=function(){return this._active};var gl=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.mousedown=function(h,v){c.prototype.mousedown.call(this,h,v),this._lastPoint&&(this._active=!0)},d.prototype._correctButton=function(h,v){return v===0&&!h.ctrlKey},d.prototype._move=function(h,v){return{around:v,panDelta:v.sub(h)}},d}(sn),Ul=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._correctButton=function(h,v){return v===0&&h.ctrlKey||v===2},d.prototype._move=function(h,v){var I=.8*(v.x-h.x);if(I)return this._active=!0,{bearingDelta:I}},d.prototype.contextmenu=function(h){h.preventDefault()},d}(sn),Vl=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype._correctButton=function(h,v){return v===0&&h.ctrlKey||v===2},d.prototype._move=function(h,v){var I=-.5*(v.y-h.y);if(I)return this._active=!0,{pitchDelta:I}},d.prototype.contextmenu=function(h){h.preventDefault()},d}(sn),Co=function(c){this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset()};Co.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new i.Point(0,0)},Co.prototype.touchstart=function(c,d,h){return this._calculateTransform(c,d,h)},Co.prototype.touchmove=function(c,d,h){if(this._active&&!(h.length<this._minTouches))return c.preventDefault(),this._calculateTransform(c,d,h)},Co.prototype.touchend=function(c,d,h){this._calculateTransform(c,d,h),this._active&&h.length<this._minTouches&&this.reset()},Co.prototype.touchcancel=function(){this.reset()},Co.prototype._calculateTransform=function(c,d,h){h.length>0&&(this._active=!0);var v=Da(h,d),I=new i.Point(0,0),M=new i.Point(0,0),O=0;for(var V in v){var X=v[V],it=this._touches[V];it&&(I._add(X),M._add(X.sub(it)),O++,v[V]=X)}if(this._touches=v,!(O<this._minTouches)&&M.mag()){var vt=M.div(O);if(this._sum._add(vt),!(this._sum.mag()<this._clickTolerance))return{around:I.div(O),panDelta:vt}}},Co.prototype.enable=function(){this._enabled=!0},Co.prototype.disable=function(){this._enabled=!1,this.reset()},Co.prototype.isEnabled=function(){return this._enabled},Co.prototype.isActive=function(){return this._active};var Po=function(){this.reset()};function Ff(c,d,h){for(var v=0;v<c.length;v++)if(c[v].identifier===h)return d[v]}function Nf(c,d){return Math.log(c/d)/Math.LN2}Po.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Po.prototype._start=function(c){},Po.prototype._move=function(c,d,h){return{}},Po.prototype.touchstart=function(c,d,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([d[0],d[1]]))},Po.prototype.touchmove=function(c,d,h){if(this._firstTwoTouches){c.preventDefault();var v=this._firstTwoTouches,I=v[1],M=Ff(h,d,v[0]),O=Ff(h,d,I);if(M&&O){var V=this._aroundCenter?null:M.add(O).div(2);return this._move([M,O],V,c)}}},Po.prototype.touchend=function(c,d,h){if(this._firstTwoTouches){var v=this._firstTwoTouches,I=v[1],M=Ff(h,d,v[0]),O=Ff(h,d,I);M&&O||(this._active&&m.suppressClick(),this.reset())}},Po.prototype.touchcancel=function(){this.reset()},Po.prototype.enable=function(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"},Po.prototype.disable=function(){this._enabled=!1,this.reset()},Po.prototype.isEnabled=function(){return this._enabled},Po.prototype.isActive=function(){return this._active};var hs=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.reset=function(){c.prototype.reset.call(this),delete this._distance,delete this._startDistance},d.prototype._start=function(h){this._startDistance=this._distance=h[0].dist(h[1])},d.prototype._move=function(h,v){var I=this._distance;if(this._distance=h[0].dist(h[1]),this._active||!(Math.abs(Nf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Nf(this._distance,I),pinchAround:v}},d}(Po);function Ws(c,d){return 180*c.angleWith(d)/Math.PI}var Uh=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.reset=function(){c.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},d.prototype._start=function(h){this._startVector=this._vector=h[0].sub(h[1]),this._minDiameter=h[0].dist(h[1])},d.prototype._move=function(h,v){var I=this._vector;if(this._vector=h[0].sub(h[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ws(this._vector,I),pinchAround:v}},d.prototype._isBelowThreshold=function(h){this._minDiameter=Math.min(this._minDiameter,h.mag());var v=25/(Math.PI*this._minDiameter)*360,I=Ws(h,this._startVector);return Math.abs(I)<v},d}(Po);function Mc(c){return Math.abs(c.y)>Math.abs(c.x)}var Hd=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.reset=function(){c.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},d.prototype._start=function(h){this._lastPoints=h,Mc(h[0].sub(h[1]))&&(this._valid=!1)},d.prototype._move=function(h,v,I){var M=h[0].sub(this._lastPoints[0]),O=h[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(M,O,I.timeStamp),this._valid)return this._lastPoints=h,this._active=!0,{pitchDelta:(M.y+O.y)/2*-.5}},d.prototype.gestureBeginsVertically=function(h,v,I){if(this._valid!==void 0)return this._valid;var M=h.mag()>=2,O=v.mag()>=2;if(M||O){if(!M||!O)return this._firstMove===void 0&&(this._firstMove=I),I-this._firstMove<100&&void 0;var V=h.y>0==v.y>0;return Mc(h)&&Mc(v)&&V}},d}(Po),Uf={panStep:100,bearingStep:15,pitchStep:10},vl=function(){var c=Uf;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1};function Ms(c){return c*(2-c)}vl.prototype.blur=function(){this.reset()},vl.prototype.reset=function(){this._active=!1},vl.prototype.keydown=function(c){var d=this;if(!(c.altKey||c.ctrlKey||c.metaKey)){var h=0,v=0,I=0,M=0,O=0;switch(c.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:c.shiftKey?v=-1:(c.preventDefault(),M=-1);break;case 39:c.shiftKey?v=1:(c.preventDefault(),M=1);break;case 38:c.shiftKey?I=1:(c.preventDefault(),O=-1);break;case 40:c.shiftKey?I=-1:(c.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(v=0,I=0),{cameraAnimation:function(V){var X=V.getZoom();V.easeTo({duration:300,easeId:"keyboardHandler",easing:Ms,zoom:h?Math.round(X)+h*(c.shiftKey?2:1):X,bearing:V.getBearing()+v*d._bearingStep,pitch:V.getPitch()+I*d._pitchStep,offset:[-M*d._panStep,-O*d._panStep],center:V.getCenter()},{originalEvent:c})}}}},vl.prototype.enable=function(){this._enabled=!0},vl.prototype.disable=function(){this._enabled=!1,this.reset()},vl.prototype.isEnabled=function(){return this._enabled},vl.prototype.isActive=function(){return this._active},vl.prototype.disableRotation=function(){this._rotationDisabled=!0},vl.prototype.enableRotation=function(){this._rotationDisabled=!1};var or=function(c,d){this._map=c,this._el=c.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,i.bindAll(["_onTimeout"],this)};or.prototype.setZoomRate=function(c){this._defaultZoomRate=c},or.prototype.setWheelZoomRate=function(c){this._wheelZoomRate=c},or.prototype.isEnabled=function(){return!!this._enabled},or.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},or.prototype.isZooming=function(){return!!this._zooming},or.prototype.enable=function(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=c&&c.around==="center")},or.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},or.prototype.wheel=function(c){if(this.isEnabled()){var d=c.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY,h=i.browser.now(),v=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,d!==0&&d%4.000244140625==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(v*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),c.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=c,this._delta-=d,this._active||this._start(c)),c.preventDefault()}},or.prototype._onTimeout=function(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)},or.prototype._start=function(c){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var d=m.mousePos(this._el,c);this._around=i.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(d)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},or.prototype.renderFrame=function(){var c=this;if(this._frameId&&(this._frameId=null,this.isActive())){var d=this._map.transform;if(this._delta!==0){var h=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,v=2/(1+Math.exp(-Math.abs(this._delta*h)));this._delta<0&&v!==0&&(v=1/v);var I=typeof this._targetZoom=="number"?d.zoomScale(this._targetZoom):d.scale;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(I*v))),this._type==="wheel"&&(this._startZoom=d.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var M,O=typeof this._targetZoom=="number"?this._targetZoom:d.zoom,V=this._startZoom,X=this._easing,it=!1;if(this._type==="wheel"&&V&&X){var vt=Math.min((i.browser.now()-this._lastWheelEventTime)/200,1),yt=X(vt);M=i.number(V,O,yt),vt<1?this._frameId||(this._frameId=!0):it=!0}else M=O,it=!0;return this._active=!0,it&&(this._active=!1,this._finishTimeout=setTimeout(function(){c._zooming=!1,c._handler._triggerRenderFrame(),delete c._targetZoom,delete c._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!it,zoomDelta:M-d.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},or.prototype._smoothOutEasing=function(c){var d=i.ease;if(this._prevEase){var h=this._prevEase,v=(i.browser.now()-h.start)/h.duration,I=h.easing(v+.01)-h.easing(v),M=.27/Math.sqrt(I*I+1e-4)*.01,O=Math.sqrt(.0729-M*M);d=i.bezier(M,O,.25,1)}return this._prevEase={start:i.browser.now(),duration:c,easing:d},d},or.prototype.blur=function(){this.reset()},or.prototype.reset=function(){this._active=!1};var lo=function(c,d){this._clickZoom=c,this._tapZoom=d};lo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},lo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},lo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},lo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Zs=function(){this.reset()};Zs.prototype.reset=function(){this._active=!1},Zs.prototype.blur=function(){this.reset()},Zs.prototype.dblclick=function(c,d){return c.preventDefault(),{cameraAnimation:function(h){h.easeTo({duration:300,zoom:h.getZoom()+(c.shiftKey?-1:1),around:h.unproject(d)},{originalEvent:c})}}},Zs.prototype.enable=function(){this._enabled=!0},Zs.prototype.disable=function(){this._enabled=!1,this.reset()},Zs.prototype.isEnabled=function(){return this._enabled},Zs.prototype.isActive=function(){return this._active};var da=function(){this._tap=new Zo({numTouches:1,numTaps:1}),this.reset()};da.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},da.prototype.touchstart=function(c,d,h){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?h.length>0&&(this._swipePoint=d[0],this._swipeTouch=h[0].identifier):this._tap.touchstart(c,d,h))},da.prototype.touchmove=function(c,d,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;var v=d[0],I=v.y-this._swipePoint.y;return this._swipePoint=v,c.preventDefault(),this._active=!0,{zoomDelta:I/128}}}else this._tap.touchmove(c,d,h)},da.prototype.touchend=function(c,d,h){this._tapTime?this._swipePoint&&h.length===0&&this.reset():this._tap.touchend(c,d,h)&&(this._tapTime=c.timeStamp)},da.prototype.touchcancel=function(){this.reset()},da.prototype.enable=function(){this._enabled=!0},da.prototype.disable=function(){this._enabled=!1,this.reset()},da.prototype.isEnabled=function(){return this._enabled},da.prototype.isActive=function(){return this._active};var qu=function(c,d,h){this._el=c,this._mousePan=d,this._touchPan=h};qu.prototype.enable=function(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},qu.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},qu.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},qu.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Yu=function(c,d,h){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=d,this._mousePitch=h};Yu.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Yu.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Yu.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Yu.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ts=function(c,d,h,v){this._el=c,this._touchZoom=d,this._touchRotate=h,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0};Ts.prototype.enable=function(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ts.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ts.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ts.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ts.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ts.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ko=function(c){return c.zoom||c.drag||c.pitch||c.rotate},Tc=function(c){function d(){c.apply(this,arguments)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d}(i.Event);function Nn(c){return c.panDelta&&c.panDelta.mag()||c.zoomDelta||c.bearingDelta||c.pitchDelta}var Ln=function(c,d){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ci(c),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d),i.bindAll(["handleEvent","handleWindowEvent"],this);var h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[i.window.document,"mousemove",{capture:!0}],[i.window.document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[i.window,"blur",void 0]];for(var v=0,I=this._listeners;v<I.length;v+=1){var M=I[v],O=M[0];m.addEventListener(O,M[1],O===i.window.document?this.handleWindowEvent:this.handleEvent,M[2])}};Ln.prototype.destroy=function(){for(var c=0,d=this._listeners;c<d.length;c+=1){var h=d[c],v=h[0];m.removeEventListener(v,h[1],v===i.window.document?this.handleWindowEvent:this.handleEvent,h[2])}},Ln.prototype._addDefaultHandlers=function(c){var d=this._map,h=d.getCanvasContainer();this._add("mapEvent",new wi(d,c));var v=d.boxZoom=new wo(d,c);this._add("boxZoom",v);var I=new $o,M=new Zs;d.doubleClickZoom=new lo(M,I),this._add("tapZoom",I),this._add("clickZoom",M);var O=new da;this._add("tapDragZoom",O);var V=d.touchPitch=new Hd;this._add("touchPitch",V);var X=new Ul(c),it=new Vl(c);d.dragRotate=new Yu(c,X,it),this._add("mouseRotate",X,["mousePitch"]),this._add("mousePitch",it,["mouseRotate"]);var vt=new gl(c),yt=new Co(c);d.dragPan=new qu(h,vt,yt),this._add("mousePan",vt),this._add("touchPan",yt,["touchZoom","touchRotate"]);var xt=new Uh,Bt=new hs;d.touchZoomRotate=new Ts(h,Bt,xt,O),this._add("touchRotate",xt,["touchPan","touchZoom"]),this._add("touchZoom",Bt,["touchPan","touchRotate"]);var Lt=d.scrollZoom=new or(d,this);this._add("scrollZoom",Lt,["mousePan"]);var Ht=d.keyboard=new vl;this._add("keyboard",Ht),this._add("blockableMapEvent",new xn(d));for(var Mt=0,Gt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Mt<Gt.length;Mt+=1){var Qt=Gt[Mt];c.interactive&&c[Qt]&&d[Qt].enable(c[Qt])}},Ln.prototype._add=function(c,d,h){this._handlers.push({handlerName:c,handler:d,allowed:h}),this._handlersById[c]=d},Ln.prototype.stop=function(c){if(!this._updatingCamera){for(var d=0,h=this._handlers;d<h.length;d+=1)h[d].handler.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}},Ln.prototype.isActive=function(){for(var c=0,d=this._handlers;c<d.length;c+=1)if(d[c].handler.isActive())return!0;return!1},Ln.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Ln.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Ln.prototype.isMoving=function(){return!!Ko(this._eventsInProgress)||this.isZooming()},Ln.prototype._blockedByActive=function(c,d,h){for(var v in c)if(v!==h&&(!d||d.indexOf(v)<0))return!0;return!1},Ln.prototype.handleWindowEvent=function(c){this.handleEvent(c,c.type+"Window")},Ln.prototype._getMapTouches=function(c){for(var d=[],h=0,v=c;h<v.length;h+=1){var I=v[h];this._el.contains(I.target)&&d.push(I)}return d},Ln.prototype.handleEvent=function(c,d){this._updatingCamera=!0;for(var h=c.type==="renderFrame"?void 0:c,v={needsRenderFrame:!1},I={},M={},O=c.touches?this._getMapTouches(c.touches):void 0,V=O?m.touchPos(this._el,O):m.mousePos(this._el,c),X=0,it=this._handlers;X<it.length;X+=1){var vt=it[X],yt=vt.handlerName,xt=vt.handler,Bt=vt.allowed;if(xt.isEnabled()){var Lt=void 0;this._blockedByActive(M,Bt,yt)?xt.reset():xt[d||c.type]&&(Lt=xt[d||c.type](c,V,O),this.mergeHandlerResult(v,I,Lt,yt,h),Lt&&Lt.needsRenderFrame&&this._triggerRenderFrame()),(Lt||xt.isActive())&&(M[yt]=xt)}}var Ht={};for(var Mt in this._previousActiveHandlers)M[Mt]||(Ht[Mt]=h);this._previousActiveHandlers=M,(Object.keys(Ht).length||Nn(v))&&(this._changes.push([v,I,Ht]),this._triggerRenderFrame()),(Object.keys(M).length||Nn(v))&&this._map._stop(!0),this._updatingCamera=!1;var Gt=v.cameraAnimation;Gt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Gt(this._map))},Ln.prototype.mergeHandlerResult=function(c,d,h,v,I){if(h){i.extend(c,h);var M={handlerName:v,originalEvent:h.originalEvent||I};h.zoomDelta!==void 0&&(d.zoom=M),h.panDelta!==void 0&&(d.drag=M),h.pitchDelta!==void 0&&(d.pitch=M),h.bearingDelta!==void 0&&(d.rotate=M)}},Ln.prototype._applyChanges=function(){for(var c={},d={},h={},v=0,I=this._changes;v<I.length;v+=1){var M=I[v],O=M[0],V=M[1],X=M[2];O.panDelta&&(c.panDelta=(c.panDelta||new i.Point(0,0))._add(O.panDelta)),O.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+O.zoomDelta),O.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+O.bearingDelta),O.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+O.pitchDelta),O.around!==void 0&&(c.around=O.around),O.pinchAround!==void 0&&(c.pinchAround=O.pinchAround),O.noInertia&&(c.noInertia=O.noInertia),i.extend(d,V),i.extend(h,X)}this._updateMapTransform(c,d,h),this._changes=[]},Ln.prototype._updateMapTransform=function(c,d,h){var v=this._map,I=v.transform;if(!Nn(c))return this._fireEvents(d,h,!0);var M=c.panDelta,O=c.zoomDelta,V=c.bearingDelta,X=c.pitchDelta,it=c.around,vt=c.pinchAround;vt!==void 0&&(it=vt),v._stop(!0),it=it||v.transform.centerPoint;var yt=I.pointLocation(M?it.sub(M):it);V&&(I.bearing+=V),X&&(I.pitch+=X),O&&(I.zoom+=O),I.setLocationAtPoint(yt,it),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(d,h,!0)},Ln.prototype._fireEvents=function(c,d,h){var v=this,I=Ko(this._eventsInProgress),M=Ko(c),O={};for(var V in c)this._eventsInProgress[V]||(O[V+"start"]=c[V].originalEvent),this._eventsInProgress[V]=c[V];for(var X in!I&&M&&this._fireEvent("movestart",M.originalEvent),O)this._fireEvent(X,O[X]);for(var it in M&&this._fireEvent("move",M.originalEvent),c)this._fireEvent(it,c[it].originalEvent);var vt,yt={};for(var xt in this._eventsInProgress){var Bt=this._eventsInProgress[xt],Lt=Bt.handlerName,Ht=Bt.originalEvent;this._handlersById[Lt].isActive()||(delete this._eventsInProgress[xt],yt[xt+"end"]=vt=d[Lt]||Ht)}for(var Mt in yt)this._fireEvent(Mt,yt[Mt]);var Gt=Ko(this._eventsInProgress);if(h&&(I||M)&&!Gt){this._updatingCamera=!0;var Qt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),de=function(ke){return ke!==0&&-v._bearingSnap<ke&&ke<v._bearingSnap};Qt?(de(Qt.bearing||this._map.getBearing())&&(Qt.bearing=0),this._map.easeTo(Qt,{originalEvent:vt})):(this._map.fire(new i.Event("moveend",{originalEvent:vt})),de(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Ln.prototype._fireEvent=function(c,d){this._map.fire(new i.Event(c,d?{originalEvent:d}:{}))},Ln.prototype._requestFrame=function(){var c=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(d){delete c._frameId,c.handleEvent(new Tc("renderFrame",{timeStamp:d})),c._applyChanges()})},Ln.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Xu=function(c){function d(h,v){c.call(this),this._moving=!1,this._zooming=!1,this.transform=h,this._bearingSnap=v.bearingSnap,i.bindAll(["_renderFrameCallback"],this)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.getCenter=function(){return new i.LngLat(this.transform.center.lng,this.transform.center.lat)},d.prototype.setCenter=function(h,v){return this.jumpTo({center:h},v)},d.prototype.panBy=function(h,v,I){return h=i.Point.convert(h).mult(-1),this.panTo(this.transform.center,i.extend({offset:h},v),I)},d.prototype.panTo=function(h,v,I){return this.easeTo(i.extend({center:h},v),I)},d.prototype.getZoom=function(){return this.transform.zoom},d.prototype.setZoom=function(h,v){return this.jumpTo({zoom:h},v),this},d.prototype.zoomTo=function(h,v,I){return this.easeTo(i.extend({zoom:h},v),I)},d.prototype.zoomIn=function(h,v){return this.zoomTo(this.getZoom()+1,h,v),this},d.prototype.zoomOut=function(h,v){return this.zoomTo(this.getZoom()-1,h,v),this},d.prototype.getBearing=function(){return this.transform.bearing},d.prototype.setBearing=function(h,v){return this.jumpTo({bearing:h},v),this},d.prototype.getPadding=function(){return this.transform.padding},d.prototype.setPadding=function(h,v){return this.jumpTo({padding:h},v),this},d.prototype.rotateTo=function(h,v,I){return this.easeTo(i.extend({bearing:h},v),I)},d.prototype.resetNorth=function(h,v){return this.rotateTo(0,i.extend({duration:1e3},h),v),this},d.prototype.resetNorthPitch=function(h,v){return this.easeTo(i.extend({bearing:0,pitch:0,duration:1e3},h),v),this},d.prototype.snapToNorth=function(h,v){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(h,v):this},d.prototype.getPitch=function(){return this.transform.pitch},d.prototype.setPitch=function(h,v){return this.jumpTo({pitch:h},v),this},d.prototype.cameraForBounds=function(h,v){h=i.LngLatBounds.convert(h);var I=v&&v.bearing||0;return this._cameraForBoxAndBearing(h.getNorthWest(),h.getSouthEast(),I,v)},d.prototype._cameraForBoxAndBearing=function(h,v,I,M){var O={top:0,bottom:0,right:0,left:0};if(typeof(M=i.extend({padding:O,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){var V=M.padding;M.padding={top:V,bottom:V,right:V,left:V}}M.padding=i.extend(O,M.padding);var X=this.transform,it=X.padding,vt=X.project(i.LngLat.convert(h)),yt=X.project(i.LngLat.convert(v)),xt=vt.rotate(-I*Math.PI/180),Bt=yt.rotate(-I*Math.PI/180),Lt=new i.Point(Math.max(xt.x,Bt.x),Math.max(xt.y,Bt.y)),Ht=new i.Point(Math.min(xt.x,Bt.x),Math.min(xt.y,Bt.y)),Mt=Lt.sub(Ht),Gt=(X.width-(it.left+it.right+M.padding.left+M.padding.right))/Mt.x,Qt=(X.height-(it.top+it.bottom+M.padding.top+M.padding.bottom))/Mt.y;if(!(Qt<0||Gt<0)){var de=Math.min(X.scaleZoom(X.scale*Math.min(Gt,Qt)),M.maxZoom),ke=typeof M.offset.x=="number"?new i.Point(M.offset.x,M.offset.y):i.Point.convert(M.offset),Me=new i.Point((M.padding.left-M.padding.right)/2,(M.padding.top-M.padding.bottom)/2).rotate(I*Math.PI/180),Oe=ke.add(Me).mult(X.scale/X.zoomScale(de));return{center:X.unproject(vt.add(yt).div(2).sub(Oe)),zoom:de,bearing:I}}i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},d.prototype.fitBounds=function(h,v,I){return this._fitInternal(this.cameraForBounds(h,v),v,I)},d.prototype.fitScreenCoordinates=function(h,v,I,M,O){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.Point.convert(h)),this.transform.pointLocation(i.Point.convert(v)),I,M),M,O)},d.prototype._fitInternal=function(h,v,I){return h?(delete(v=i.extend(h,v)).padding,v.linear?this.easeTo(v,I):this.flyTo(v,I)):this},d.prototype.jumpTo=function(h,v){this.stop();var I=this.transform,M=!1,O=!1,V=!1;return"zoom"in h&&I.zoom!==+h.zoom&&(M=!0,I.zoom=+h.zoom),h.center!==void 0&&(I.center=i.LngLat.convert(h.center)),"bearing"in h&&I.bearing!==+h.bearing&&(O=!0,I.bearing=+h.bearing),"pitch"in h&&I.pitch!==+h.pitch&&(V=!0,I.pitch=+h.pitch),h.padding==null||I.isPaddingEqual(h.padding)||(I.padding=h.padding),this.fire(new i.Event("movestart",v)).fire(new i.Event("move",v)),M&&this.fire(new i.Event("zoomstart",v)).fire(new i.Event("zoom",v)).fire(new i.Event("zoomend",v)),O&&this.fire(new i.Event("rotatestart",v)).fire(new i.Event("rotate",v)).fire(new i.Event("rotateend",v)),V&&this.fire(new i.Event("pitchstart",v)).fire(new i.Event("pitch",v)).fire(new i.Event("pitchend",v)),this.fire(new i.Event("moveend",v))},d.prototype.easeTo=function(h,v){var I=this;this._stop(!1,h.easeId),((h=i.extend({offset:[0,0],duration:500,easing:i.ease},h)).animate===!1||!h.essential&&i.browser.prefersReducedMotion)&&(h.duration=0);var M=this.transform,O=this.getZoom(),V=this.getBearing(),X=this.getPitch(),it=this.getPadding(),vt="zoom"in h?+h.zoom:O,yt="bearing"in h?this._normalizeBearing(h.bearing,V):V,xt="pitch"in h?+h.pitch:X,Bt="padding"in h?h.padding:M.padding,Lt=i.Point.convert(h.offset),Ht=M.centerPoint.add(Lt),Mt=M.pointLocation(Ht),Gt=i.LngLat.convert(h.center||Mt);this._normalizeCenter(Gt);var Qt,de,ke=M.project(Mt),Me=M.project(Gt).sub(ke),Oe=M.zoomScale(vt-O);h.around&&(Qt=i.LngLat.convert(h.around),de=M.locationPoint(Qt));var He={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||vt!==O,this._rotating=this._rotating||V!==yt,this._pitching=this._pitching||xt!==X,this._padding=!M.isPaddingEqual(Bt),this._easeId=h.easeId,this._prepareEase(v,h.noMoveStart,He),this._ease(function(Xe){if(I._zooming&&(M.zoom=i.number(O,vt,Xe)),I._rotating&&(M.bearing=i.number(V,yt,Xe)),I._pitching&&(M.pitch=i.number(X,xt,Xe)),I._padding&&(M.interpolatePadding(it,Bt,Xe),Ht=M.centerPoint.add(Lt)),Qt)M.setLocationAtPoint(Qt,de);else{var rn=M.zoomScale(M.zoom-O),yn=vt>O?Math.min(2,Oe):Math.max(.5,Oe),On=Math.pow(yn,1-Xe),Xn=M.unproject(ke.add(Me.mult(Xe*On)).mult(rn));M.setLocationAtPoint(M.renderWorldCopies?Xn.wrap():Xn,Ht)}I._fireMoveEvents(v)},function(Xe){I._afterEase(v,Xe)},h),this},d.prototype._prepareEase=function(h,v,I){I===void 0&&(I={}),this._moving=!0,v||I.moving||this.fire(new i.Event("movestart",h)),this._zooming&&!I.zooming&&this.fire(new i.Event("zoomstart",h)),this._rotating&&!I.rotating&&this.fire(new i.Event("rotatestart",h)),this._pitching&&!I.pitching&&this.fire(new i.Event("pitchstart",h))},d.prototype._fireMoveEvents=function(h){this.fire(new i.Event("move",h)),this._zooming&&this.fire(new i.Event("zoom",h)),this._rotating&&this.fire(new i.Event("rotate",h)),this._pitching&&this.fire(new i.Event("pitch",h))},d.prototype._afterEase=function(h,v){if(!this._easeId||!v||this._easeId!==v){delete this._easeId;var I=this._zooming,M=this._rotating,O=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,I&&this.fire(new i.Event("zoomend",h)),M&&this.fire(new i.Event("rotateend",h)),O&&this.fire(new i.Event("pitchend",h)),this.fire(new i.Event("moveend",h))}},d.prototype.flyTo=function(h,v){var I=this;if(!h.essential&&i.browser.prefersReducedMotion){var M=i.pick(h,["center","zoom","bearing","pitch","around"]);return this.jumpTo(M,v)}this.stop(),h=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},h);var O=this.transform,V=this.getZoom(),X=this.getBearing(),it=this.getPitch(),vt=this.getPadding(),yt="zoom"in h?i.clamp(+h.zoom,O.minZoom,O.maxZoom):V,xt="bearing"in h?this._normalizeBearing(h.bearing,X):X,Bt="pitch"in h?+h.pitch:it,Lt="padding"in h?h.padding:O.padding,Ht=O.zoomScale(yt-V),Mt=i.Point.convert(h.offset),Gt=O.centerPoint.add(Mt),Qt=O.pointLocation(Gt),de=i.LngLat.convert(h.center||Qt);this._normalizeCenter(de);var ke=O.project(Qt),Me=O.project(de).sub(ke),Oe=h.curve,He=Math.max(O.width,O.height),Xe=He/Ht,rn=Me.mag();if("minZoom"in h){var yn=i.clamp(Math.min(h.minZoom,V,yt),O.minZoom,O.maxZoom),On=He/O.zoomScale(yn-V);Oe=Math.sqrt(On/rn*2)}var Xn=Oe*Oe;function Kn(cr){var zn=(Xe*Xe-He*He+(cr?-1:1)*Xn*Xn*rn*rn)/(2*(cr?Xe:He)*Xn*rn);return Math.log(Math.sqrt(zn*zn+1)-zn)}function Xr(cr){return(Math.exp(cr)-Math.exp(-cr))/2}function Cn(cr){return(Math.exp(cr)+Math.exp(-cr))/2}var er=Kn(0),Cr=function(cr){return Cn(er)/Cn(er+Oe*cr)},dr=function(cr){return He*((Cn(er)*(Xr(zn=er+Oe*cr)/Cn(zn))-Xr(er))/Xn)/rn;var zn},sr=(Kn(1)-er)/Oe;if(Math.abs(rn)<1e-6||!isFinite(sr)){if(Math.abs(He-Xe)<1e-6)return this.easeTo(h,v);var Ir=Xe<He?-1:1;sr=Math.abs(Math.log(Xe/He))/Oe,dr=function(){return 0},Cr=function(cr){return Math.exp(Ir*Oe*cr)}}return h.duration="duration"in h?+h.duration:1e3*sr/("screenSpeed"in h?+h.screenSpeed/Oe:+h.speed),h.maxDuration&&h.duration>h.maxDuration&&(h.duration=0),this._zooming=!0,this._rotating=X!==xt,this._pitching=Bt!==it,this._padding=!O.isPaddingEqual(Lt),this._prepareEase(v,!1),this._ease(function(cr){var zn=cr*sr,Lo=1/Cr(zn);O.zoom=cr===1?yt:V+O.scaleZoom(Lo),I._rotating&&(O.bearing=i.number(X,xt,cr)),I._pitching&&(O.pitch=i.number(it,Bt,cr)),I._padding&&(O.interpolatePadding(vt,Lt,cr),Gt=O.centerPoint.add(Mt));var uo=cr===1?de:O.unproject(ke.add(Me.mult(dr(zn))).mult(Lo));O.setLocationAtPoint(O.renderWorldCopies?uo.wrap():uo,Gt),I._fireMoveEvents(v)},function(){return I._afterEase(v)},h),this},d.prototype.isEasing=function(){return!!this._easeFrameId},d.prototype.stop=function(){return this._stop()},d.prototype._stop=function(h,v){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var I=this._onEaseEnd;delete this._onEaseEnd,I.call(this,v)}if(!h){var M=this.handlers;M&&M.stop(!1)}return this},d.prototype._ease=function(h,v,I){I.animate===!1||I.duration===0?(h(1),v()):(this._easeStart=i.browser.now(),this._easeOptions=I,this._onEaseFrame=h,this._onEaseEnd=v,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},d.prototype._renderFrameCallback=function(){var h=Math.min((i.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(h)),h<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},d.prototype._normalizeBearing=function(h,v){h=i.wrap(h,-180,180);var I=Math.abs(h-v);return Math.abs(h-360-v)<I&&(h-=360),Math.abs(h+360-v)<I&&(h+=360),h},d.prototype._normalizeCenter=function(h){var v=this.transform;if(v.renderWorldCopies&&!v.lngRange){var I=h.lng-v.center.lng;h.lng+=I>180?-360:I<-180?360:0}},d}(i.Evented),ra=function(c){c===void 0&&(c={}),this.options=c,i.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};ra.prototype.getDefaultPosition=function(){return"bottom-right"},ra.prototype.onAdd=function(c){var d=this.options&&this.options.compact;return this._map=c,this._container=m.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=m.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=m.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ra.prototype.onRemove=function(){m.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ra.prototype._setElementTitle=function(c,d){var h=this._map._getUIString("AttributionControl."+d);c.title=h,c.setAttribute("aria-label",h)},ra.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},ra.prototype._updateEditLink=function(){var c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));var d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.config.ACCESS_TOKEN}];if(c){var h=d.reduce(function(v,I,M){return I.value&&(v+=I.key+"="+I.value+(M<d.length-1?"&":"")),v},"?");c.href=i.config.FEEDBACK_URL+"/"+h+(this._map._hash?this._map._hash.getHashString(!0):""),c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}},ra.prototype._updateData=function(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},ra.prototype._updateAttributions=function(){if(this._map.style){var c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map(function(V){return typeof V!="string"?"":V})):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){var d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}var h=this._map.style.sourceCaches;for(var v in h){var I=h[v];if(I.used){var M=I.getSource();M.attribution&&c.indexOf(M.attribution)<0&&c.push(M.attribution)}}c.sort(function(V,X){return V.length-X.length});var O=(c=c.filter(function(V,X){for(var it=X+1;it<c.length;it++)if(c[it].indexOf(V)>=0)return!1;return!0})).join(" | ");O!==this._attribHTML&&(this._attribHTML=O,c.length?(this._innerContainer.innerHTML=O,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ra.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Ba=function(){i.bindAll(["_updateLogo"],this),i.bindAll(["_updateCompact"],this)};Ba.prototype.onAdd=function(c){this._map=c,this._container=m.create("div","mapboxgl-ctrl");var d=m.create("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ba.prototype.onRemove=function(){m.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ba.prototype.getDefaultPosition=function(){return"bottom-left"},Ba.prototype._updateLogo=function(c){c&&c.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Ba.prototype._logoRequired=function(){if(this._map.style){var c=this._map.style.sourceCaches;for(var d in c)if(c[d].getSource().mapbox_logo)return!0;return!1}},Ba.prototype._updateCompact=function(){var c=this._container.children;if(c.length){var d=c[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}};var pa=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};pa.prototype.add=function(c){var d=++this._id;return this._queue.push({callback:c,id:d,cancelled:!1}),d},pa.prototype.remove=function(c){for(var d=this._currentlyRunning,h=0,v=d?this._queue.concat(d):this._queue;h<v.length;h+=1){var I=v[h];if(I.id===c)return void(I.cancelled=!0)}},pa.prototype.run=function(c){c===void 0&&(c=0);var d=this._currentlyRunning=this._queue;this._queue=[];for(var h=0,v=d;h<v.length;h+=1){var I=v[h];if(!I.cancelled&&(I.callback(c),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},pa.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var jl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Gd=i.window.HTMLImageElement,Vf=i.window.HTMLElement,vi=i.window.ImageBitmap,ko={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},fh=function(c){function d(v){var I=this;if((v=i.extend({},ko,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var M=new Dn(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies);if(c.call(this,M,v),this._interactive=v.interactive,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new pa,this._controls=[],this._mapId=i.uniqueId(),this._locale=i.extend({},jl,v.locale),this._clickTolerance=v.clickTolerance,this._requestManager=new i.RequestManager(v.transformRequest,v.accessToken),typeof v.container=="string"){if(this._container=i.window.document.getElementById(v.container),!this._container)throw new Error("Container '"+v.container+"' not found.")}else{if(!(v.container instanceof Vf))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return I._update(!1)}),this.on("moveend",function(){return I._update(!1)}),this.on("zoom",function(){return I._update(!0)}),i.window!==void 0&&(i.window.addEventListener("online",this._onWindowOnline,!1),i.window.addEventListener("resize",this._onWindowResize,!1),i.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Ln(this,v),this._hash=v.hash&&new fa(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,i.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new ra({customAttribution:v.customAttribution})),this.addControl(new Ba,v.logoPosition),this.on("style.load",function(){I.transform.unmodified&&I.jumpTo(I.style.stylesheet)}),this.on("data",function(O){I._update(O.dataType==="style"),I.fire(new i.Event(O.dataType+"data",O))}),this.on("dataloading",function(O){I.fire(new i.Event(O.dataType+"dataloading",O))})}c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d;var h={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return d.prototype._getMapId=function(){return this._mapId},d.prototype.addControl=function(v,I){if(I===void 0&&(I=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var M=v.onAdd(this);this._controls.push(v);var O=this._controlPositions[I];return I.indexOf("bottom")!==-1?O.insertBefore(M,O.firstChild):O.appendChild(M),this},d.prototype.removeControl=function(v){if(!v||!v.onRemove)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var I=this._controls.indexOf(v);return I>-1&&this._controls.splice(I,1),v.onRemove(this),this},d.prototype.hasControl=function(v){return this._controls.indexOf(v)>-1},d.prototype.resize=function(v){var I=this._containerDimensions(),M=I[0],O=I[1];if(M===this.transform.width&&O===this.transform.height)return this;this._resizeCanvas(M,O),this.transform.resize(M,O),this.painter.resize(M,O);var V=!this._moving;return V&&this.fire(new i.Event("movestart",v)).fire(new i.Event("move",v)),this.fire(new i.Event("resize",v)),V&&this.fire(new i.Event("moveend",v)),this},d.prototype.getBounds=function(){return this.transform.getBounds()},d.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},d.prototype.setMaxBounds=function(v){return this.transform.setMaxBounds(i.LngLatBounds.convert(v)),this._update()},d.prototype.setMinZoom=function(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},d.prototype.getMinZoom=function(){return this.transform.minZoom},d.prototype.setMaxZoom=function(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")},d.prototype.getMaxZoom=function(){return this.transform.maxZoom},d.prototype.setMinPitch=function(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},d.prototype.getMinPitch=function(){return this.transform.minPitch},d.prototype.setMaxPitch=function(v){if((v=v??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")},d.prototype.getMaxPitch=function(){return this.transform.maxPitch},d.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},d.prototype.setRenderWorldCopies=function(v){return this.transform.renderWorldCopies=v,this._update()},d.prototype.project=function(v){return this.transform.locationPoint(i.LngLat.convert(v))},d.prototype.unproject=function(v){return this.transform.pointLocation(i.Point.convert(v))},d.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},d.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},d.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},d.prototype._createDelegatedListener=function(v,I,M){var O,V=this;if(v==="mouseenter"||v==="mouseover"){var X=!1;return{layer:I,listener:M,delegates:{mousemove:function(vt){var yt=V.getLayer(I)?V.queryRenderedFeatures(vt.point,{layers:[I]}):[];yt.length?X||(X=!0,M.call(V,new Pi(v,V,vt.originalEvent,{features:yt}))):X=!1},mouseout:function(){X=!1}}}}if(v==="mouseleave"||v==="mouseout"){var it=!1;return{layer:I,listener:M,delegates:{mousemove:function(vt){(V.getLayer(I)?V.queryRenderedFeatures(vt.point,{layers:[I]}):[]).length?it=!0:it&&(it=!1,M.call(V,new Pi(v,V,vt.originalEvent)))},mouseout:function(vt){it&&(it=!1,M.call(V,new Pi(v,V,vt.originalEvent)))}}}}return{layer:I,listener:M,delegates:(O={},O[v]=function(vt){var yt=V.getLayer(I)?V.queryRenderedFeatures(vt.point,{layers:[I]}):[];yt.length&&(vt.features=yt,M.call(V,vt),delete vt.features)},O)}},d.prototype.on=function(v,I,M){if(M===void 0)return c.prototype.on.call(this,v,I);var O=this._createDelegatedListener(v,I,M);for(var V in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(O),O.delegates)this.on(V,O.delegates[V]);return this},d.prototype.once=function(v,I,M){if(M===void 0)return c.prototype.once.call(this,v,I);var O=this._createDelegatedListener(v,I,M);for(var V in O.delegates)this.once(V,O.delegates[V]);return this},d.prototype.off=function(v,I,M){var O=this;return M===void 0?c.prototype.off.call(this,v,I):(this._delegatedListeners&&this._delegatedListeners[v]&&function(V){for(var X=V[v],it=0;it<X.length;it++){var vt=X[it];if(vt.layer===I&&vt.listener===M){for(var yt in vt.delegates)O.off(yt,vt.delegates[yt]);return X.splice(it,1),O}}}(this._delegatedListeners),this)},d.prototype.queryRenderedFeatures=function(v,I){if(!this.style)return[];var M;if(I!==void 0||v===void 0||v instanceof i.Point||Array.isArray(v)||(I=v,v=void 0),I=I||{},(v=v||[[0,0],[this.transform.width,this.transform.height]])instanceof i.Point||typeof v[0]=="number")M=[i.Point.convert(v)];else{var O=i.Point.convert(v[0]),V=i.Point.convert(v[1]);M=[O,new i.Point(V.x,O.y),V,new i.Point(O.x,V.y),O]}return this.style.queryRenderedFeatures(M,I,this.transform)},d.prototype.querySourceFeatures=function(v,I){return this.style.querySourceFeatures(v,I)},d.prototype.setStyle=function(v,I){return(I=i.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},I)).diff!==!1&&I.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,I),this):(this._localIdeographFontFamily=I.localIdeographFontFamily,this._updateStyle(v,I))},d.prototype._getUIString=function(v){var I=this._locale[v];if(I==null)throw new Error("Missing UI string '"+v+"'");return I},d.prototype._updateStyle=function(v,I){return this.style&&(this.style.setEventedParent(null),this.style._remove()),v?(this.style=new Gr(this,I||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v):this.style.loadJSON(v),this):(delete this.style,this)},d.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Gr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},d.prototype._diffStyle=function(v,I){var M=this;if(typeof v=="string"){var O=this._requestManager.normalizeStyleURL(v),V=this._requestManager.transformRequest(O,i.ResourceType.Style);i.getJSON(V,function(X,it){X?M.fire(new i.ErrorEvent(X)):it&&M._updateDiff(it,I)})}else typeof v=="object"&&this._updateDiff(v,I)},d.prototype._updateDiff=function(v,I){try{this.style.setState(v)&&this._update(!0)}catch(M){i.warnOnce("Unable to perform style diff: "+(M.message||M.error||M)+".  Rebuilding the style from scratch."),this._updateStyle(v,I)}},d.prototype.getStyle=function(){if(this.style)return this.style.serialize()},d.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},d.prototype.addSource=function(v,I){return this._lazyInitEmptyStyle(),this.style.addSource(v,I),this._update(!0)},d.prototype.isSourceLoaded=function(v){var I=this.style&&this.style.sourceCaches[v];if(I!==void 0)return I.loaded();this.fire(new i.ErrorEvent(new Error("There is no source with ID '"+v+"'")))},d.prototype.areTilesLoaded=function(){var v=this.style&&this.style.sourceCaches;for(var I in v){var M=v[I]._tiles;for(var O in M){var V=M[O];if(V.state!=="loaded"&&V.state!=="errored")return!1}}return!0},d.prototype.addSourceType=function(v,I,M){return this._lazyInitEmptyStyle(),this.style.addSourceType(v,I,M)},d.prototype.removeSource=function(v){return this.style.removeSource(v),this._update(!0)},d.prototype.getSource=function(v){return this.style.getSource(v)},d.prototype.addImage=function(v,I,M){M===void 0&&(M={});var O=M.pixelRatio;O===void 0&&(O=1);var V=M.sdf;V===void 0&&(V=!1);var X=M.stretchX,it=M.stretchY,vt=M.content;if(this._lazyInitEmptyStyle(),I instanceof Gd||vi&&I instanceof vi){var yt=i.browser.getImageData(I);this.style.addImage(v,{data:new i.RGBAImage({width:yt.width,height:yt.height},yt.data),pixelRatio:O,stretchX:X,stretchY:it,content:vt,sdf:V,version:0})}else{if(I.width===void 0||I.height===void 0)return this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var xt=I;this.style.addImage(v,{data:new i.RGBAImage({width:I.width,height:I.height},new Uint8Array(I.data)),pixelRatio:O,stretchX:X,stretchY:it,content:vt,sdf:V,version:0,userImage:xt}),xt.onAdd&&xt.onAdd(this,v)}},d.prototype.updateImage=function(v,I){var M=this.style.getImage(v);if(!M)return this.fire(new i.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var O=I instanceof Gd||vi&&I instanceof vi?i.browser.getImageData(I):I,V=O.width,X=O.height,it=O.data;return V===void 0||X===void 0?this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):V!==M.data.width||X!==M.data.height?this.fire(new i.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(M.data.replace(it,!(I instanceof Gd||vi&&I instanceof vi)),void this.style.updateImage(v,M))},d.prototype.hasImage=function(v){return v?!!this.style.getImage(v):(this.fire(new i.ErrorEvent(new Error("Missing required image id"))),!1)},d.prototype.removeImage=function(v){this.style.removeImage(v)},d.prototype.loadImage=function(v,I){i.getImage(this._requestManager.transformRequest(v,i.ResourceType.Image),I)},d.prototype.listImages=function(){return this.style.listImages()},d.prototype.addLayer=function(v,I){return this._lazyInitEmptyStyle(),this.style.addLayer(v,I),this._update(!0)},d.prototype.moveLayer=function(v,I){return this.style.moveLayer(v,I),this._update(!0)},d.prototype.removeLayer=function(v){return this.style.removeLayer(v),this._update(!0)},d.prototype.getLayer=function(v){return this.style.getLayer(v)},d.prototype.setLayerZoomRange=function(v,I,M){return this.style.setLayerZoomRange(v,I,M),this._update(!0)},d.prototype.setFilter=function(v,I,M){return M===void 0&&(M={}),this.style.setFilter(v,I,M),this._update(!0)},d.prototype.getFilter=function(v){return this.style.getFilter(v)},d.prototype.setPaintProperty=function(v,I,M,O){return O===void 0&&(O={}),this.style.setPaintProperty(v,I,M,O),this._update(!0)},d.prototype.getPaintProperty=function(v,I){return this.style.getPaintProperty(v,I)},d.prototype.setLayoutProperty=function(v,I,M,O){return O===void 0&&(O={}),this.style.setLayoutProperty(v,I,M,O),this._update(!0)},d.prototype.getLayoutProperty=function(v,I){return this.style.getLayoutProperty(v,I)},d.prototype.setLight=function(v,I){return I===void 0&&(I={}),this._lazyInitEmptyStyle(),this.style.setLight(v,I),this._update(!0)},d.prototype.getLight=function(){return this.style.getLight()},d.prototype.setFeatureState=function(v,I){return this.style.setFeatureState(v,I),this._update()},d.prototype.removeFeatureState=function(v,I){return this.style.removeFeatureState(v,I),this._update()},d.prototype.getFeatureState=function(v){return this.style.getFeatureState(v)},d.prototype.getContainer=function(){return this._container},d.prototype.getCanvasContainer=function(){return this._canvasContainer},d.prototype.getCanvas=function(){return this._canvas},d.prototype._containerDimensions=function(){var v=0,I=0;return this._container&&(v=this._container.clientWidth||400,I=this._container.clientHeight||300),[v,I]},d.prototype._detectMissingCSS=function(){i.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&i.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},d.prototype._setupContainer=function(){var v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=m.create("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();var I=this._canvasContainer=m.create("div","mapboxgl-canvas-container",v);this._interactive&&I.classList.add("mapboxgl-interactive"),this._canvas=m.create("canvas","mapboxgl-canvas",I),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var M=this._containerDimensions();this._resizeCanvas(M[0],M[1]);var O=this._controlContainer=m.create("div","mapboxgl-control-container",v),V=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(X){V[X]=m.create("div","mapboxgl-ctrl-"+X,O)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},d.prototype._resizeCanvas=function(v,I){var M=i.browser.devicePixelRatio||1;this._canvas.width=M*v,this._canvas.height=M*I,this._canvas.style.width=v+"px",this._canvas.style.height=I+"px"},d.prototype._setupPainter=function(){var v=i.extend({},f.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),I=this._canvas.getContext("webgl",v)||this._canvas.getContext("experimental-webgl",v);I?(this.painter=new Ye(I,this.transform),i.webpSupported.testSupport(I)):this.fire(new i.ErrorEvent(new Error("Failed to initialize WebGL")))},d.prototype._contextLost=function(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.Event("webglcontextlost",{originalEvent:v}))},d.prototype._contextRestored=function(v){this._setupPainter(),this.resize(),this._update(),this.fire(new i.Event("webglcontextrestored",{originalEvent:v}))},d.prototype._onMapScroll=function(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},d.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},d.prototype._update=function(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this},d.prototype._requestRenderFrame=function(v){return this._update(),this._renderTaskQueue.add(v)},d.prototype._cancelRenderFrame=function(v){this._renderTaskQueue.remove(v)},d.prototype._render=function(v){var I,M=this,O=0,V=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(I=V.createQueryEXT(),V.beginQueryEXT(V.TIME_ELAPSED_EXT,I),O=i.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),!this._removed){var X=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var it=this.transform.zoom,vt=i.browser.now();this.style.zoomHistory.update(it,vt);var yt=new i.EvaluationParameters(it,{now:vt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),xt=yt.crossFadingFactor();xt===1&&xt===this._crossFadingFactor||(X=!0,this._crossFadingFactor=xt),this.style.update(yt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new i.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new i.Event("load"))),this.style&&(this.style.hasTransitions()||X)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Bt=i.browser.now()-O;V.endQueryEXT(V.TIME_ELAPSED_EXT,I),setTimeout(function(){var Mt=V.getQueryObjectEXT(I,V.QUERY_RESULT_EXT)/1e6;V.deleteQueryEXT(I),M.fire(new i.Event("gpu-timing-frame",{cpuTime:Bt,gpuTime:Mt}))},50)}if(this.listens("gpu-timing-layer")){var Lt=this.painter.collectGpuTimers();setTimeout(function(){var Mt=M.painter.queryGpuTimers(Lt);M.fire(new i.Event("gpu-timing-layer",{layerTimes:Mt}))},50)}var Ht=this._sourcesDirty||this._styleDirty||this._placementDirty;return Ht||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new i.Event("idle")),!this._loaded||this._fullyLoaded||Ht||(this._fullyLoaded=!0),this}},d.prototype.remove=function(){this._hash&&this._hash.remove();for(var v=0,I=this._controls;v<I.length;v+=1)I[v].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),i.window!==void 0&&(i.window.removeEventListener("resize",this._onWindowResize,!1),i.window.removeEventListener("orientationchange",this._onWindowResize,!1),i.window.removeEventListener("online",this._onWindowOnline,!1));var M=this.painter.context.gl.getExtension("WEBGL_lose_context");M&&M.loseContext(),Qu(this._canvasContainer),Qu(this._controlContainer),Qu(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new i.Event("remove"))},d.prototype.triggerRepaint=function(){var v=this;this.style&&!this._frame&&(this._frame=i.browser.frame(function(I){v._frame=null,v._render(I)}))},d.prototype._onWindowOnline=function(){this._update()},d.prototype._onWindowResize=function(v){this._trackResize&&this.resize({originalEvent:v})._update()},h.showTileBoundaries.get=function(){return!!this._showTileBoundaries},h.showTileBoundaries.set=function(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())},h.showPadding.get=function(){return!!this._showPadding},h.showPadding.set=function(v){this._showPadding!==v&&(this._showPadding=v,this._update())},h.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},h.showCollisionBoxes.set=function(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())},h.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},h.showOverdrawInspector.set=function(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())},h.repaint.get=function(){return!!this._repaint},h.repaint.set=function(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())},h.vertices.get=function(){return!!this._vertices},h.vertices.set=function(v){this._vertices=v,this._update()},d.prototype._setCacheLimits=function(v,I){i.setCacheLimits(v,I)},h.version.get=function(){return i.version},Object.defineProperties(d.prototype,h),d}(Xu);function Qu(c){c.parentNode&&c.parentNode.removeChild(c)}var bt={showCompass:!0,showZoom:!0,visualizePitch:!1},fs=function(c){var d=this;this.options=i.extend({},bt,c),this._container=m.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(h){return h.preventDefault()}),this.options.showZoom&&(i.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(h){return d._map.zoomIn({},{originalEvent:h})}),m.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(h){return d._map.zoomOut({},{originalEvent:h})}),m.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(h){d.options.visualizePitch?d._map.resetNorthPitch({},{originalEvent:h}):d._map.resetNorth({},{originalEvent:h})}),this._compassIcon=m.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};fs.prototype._updateZoomButtons=function(){var c=this._map.getZoom(),d=c===this._map.getMaxZoom(),h=c===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},fs.prototype._rotateCompassArrow=function(){var c=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=c},fs.prototype.onAdd=function(c){return this._map=c,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ca(this._map,this._compass,this.options.visualizePitch)),this._container},fs.prototype.onRemove=function(){m.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},fs.prototype._createButton=function(c,d){var h=m.create("button",c,this._container);return h.type="button",h.addEventListener("click",d),h},fs.prototype._setButtonTitle=function(c,d){var h=this._map._getUIString("NavigationControl."+d);c.title=h,c.setAttribute("aria-label",h)};var Ca=function(c,d,h){h===void 0&&(h=!1),this._clickTolerance=10,this.element=d,this.mouseRotate=new Ul({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,h&&(this.mousePitch=new Vl({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),i.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),m.addEventListener(d,"mousedown",this.mousedown),m.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),m.addEventListener(d,"touchmove",this.touchmove),m.addEventListener(d,"touchend",this.touchend),m.addEventListener(d,"touchcancel",this.reset)};function Ia(c,d,h){if(c=new i.LngLat(c.lng,c.lat),d){var v=new i.LngLat(c.lng-360,c.lat),I=new i.LngLat(c.lng+360,c.lat),M=h.locationPoint(c).distSqr(d);h.locationPoint(v).distSqr(d)<M?c=v:h.locationPoint(I).distSqr(d)<M&&(c=I)}for(;Math.abs(c.lng-h.center.lng)>180;){var O=h.locationPoint(c);if(O.x>=0&&O.y>=0&&O.x<=h.width&&O.y<=h.height)break;c.lng>h.center.lng?c.lng-=360:c.lng+=360}return c}Ca.prototype.down=function(c,d){this.mouseRotate.mousedown(c,d),this.mousePitch&&this.mousePitch.mousedown(c,d),m.disableDrag()},Ca.prototype.move=function(c,d){var h=this.map,v=this.mouseRotate.mousemoveWindow(c,d);if(v&&v.bearingDelta&&h.setBearing(h.getBearing()+v.bearingDelta),this.mousePitch){var I=this.mousePitch.mousemoveWindow(c,d);I&&I.pitchDelta&&h.setPitch(h.getPitch()+I.pitchDelta)}},Ca.prototype.off=function(){var c=this.element;m.removeEventListener(c,"mousedown",this.mousedown),m.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),m.removeEventListener(c,"touchmove",this.touchmove),m.removeEventListener(c,"touchend",this.touchend),m.removeEventListener(c,"touchcancel",this.reset),this.offTemp()},Ca.prototype.offTemp=function(){m.enableDrag(),m.removeEventListener(i.window,"mousemove",this.mousemove),m.removeEventListener(i.window,"mouseup",this.mouseup)},Ca.prototype.mousedown=function(c){this.down(i.extend({},c,{ctrlKey:!0,preventDefault:function(){return c.preventDefault()}}),m.mousePos(this.element,c)),m.addEventListener(i.window,"mousemove",this.mousemove),m.addEventListener(i.window,"mouseup",this.mouseup)},Ca.prototype.mousemove=function(c){this.move(c,m.mousePos(this.element,c))},Ca.prototype.mouseup=function(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()},Ca.prototype.touchstart=function(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=m.touchPos(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return c.preventDefault()}},this._startPos))},Ca.prototype.touchmove=function(c){c.targetTouches.length!==1?this.reset():(this._lastPos=m.touchPos(this.element,c.targetTouches)[0],this.move({preventDefault:function(){return c.preventDefault()}},this._lastPos))},Ca.prototype.touchend=function(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ca.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Br={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function jf(c,d,h){var v=c.classList;for(var I in Br)v.remove("mapboxgl-"+h+"-anchor-"+I);v.add("mapboxgl-"+h+"-anchor-"+d)}var dh,Vh=function(c){function d(h,v){if(c.call(this),(h instanceof i.window.HTMLElement||v)&&(h=i.extend({element:h},v)),i.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=h&&h.anchor||"center",this._color=h&&h.color||"#3FB1CE",this._scale=h&&h.scale||1,this._draggable=h&&h.draggable||!1,this._clickTolerance=h&&h.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=h&&h.rotation||0,this._rotationAlignment=h&&h.rotationAlignment||"auto",this._pitchAlignment=h&&h.pitchAlignment&&h.pitchAlignment!=="auto"?h.pitchAlignment:this._rotationAlignment,h&&h.element)this._element=h.element,this._offset=i.Point.convert(h&&h.offset||[0,0]);else{this._defaultMarker=!0,this._element=m.create("div"),this._element.setAttribute("aria-label","Map marker");var I=m.createNS("http://www.w3.org/2000/svg","svg");I.setAttributeNS(null,"display","block"),I.setAttributeNS(null,"height","41px"),I.setAttributeNS(null,"width","27px"),I.setAttributeNS(null,"viewBox","0 0 27 41");var M=m.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"stroke","none"),M.setAttributeNS(null,"stroke-width","1"),M.setAttributeNS(null,"fill","none"),M.setAttributeNS(null,"fill-rule","evenodd");var O=m.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill-rule","nonzero");var V=m.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"transform","translate(3.0, 29.0)"),V.setAttributeNS(null,"fill","#000000");for(var X=0,it=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];X<it.length;X+=1){var vt=it[X],yt=m.createNS("http://www.w3.org/2000/svg","ellipse");yt.setAttributeNS(null,"opacity","0.04"),yt.setAttributeNS(null,"cx","10.5"),yt.setAttributeNS(null,"cy","5.80029008"),yt.setAttributeNS(null,"rx",vt.rx),yt.setAttributeNS(null,"ry",vt.ry),V.appendChild(yt)}var xt=m.createNS("http://www.w3.org/2000/svg","g");xt.setAttributeNS(null,"fill",this._color);var Bt=m.createNS("http://www.w3.org/2000/svg","path");Bt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),xt.appendChild(Bt);var Lt=m.createNS("http://www.w3.org/2000/svg","g");Lt.setAttributeNS(null,"opacity","0.25"),Lt.setAttributeNS(null,"fill","#000000");var Ht=m.createNS("http://www.w3.org/2000/svg","path");Ht.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Lt.appendChild(Ht);var Mt=m.createNS("http://www.w3.org/2000/svg","g");Mt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Mt.setAttributeNS(null,"fill","#FFFFFF");var Gt=m.createNS("http://www.w3.org/2000/svg","g");Gt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Qt=m.createNS("http://www.w3.org/2000/svg","circle");Qt.setAttributeNS(null,"fill","#000000"),Qt.setAttributeNS(null,"opacity","0.25"),Qt.setAttributeNS(null,"cx","5.5"),Qt.setAttributeNS(null,"cy","5.5"),Qt.setAttributeNS(null,"r","5.4999962");var de=m.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#FFFFFF"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962"),Gt.appendChild(Qt),Gt.appendChild(de),O.appendChild(V),O.appendChild(xt),O.appendChild(Lt),O.appendChild(Mt),O.appendChild(Gt),I.appendChild(O),I.setAttributeNS(null,"height",41*this._scale+"px"),I.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(I),this._offset=i.Point.convert(h&&h.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ke){ke.preventDefault()}),this._element.addEventListener("mousedown",function(ke){ke.preventDefault()}),jf(this._element,this._anchor,"marker"),this._popup=null}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.addTo=function(h){return this.remove(),this._map=h,h.getCanvasContainer().appendChild(this._element),h.on("move",this._update),h.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},d.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),m.remove(this._element),this._popup&&this._popup.remove(),this},d.prototype.getLngLat=function(){return this._lngLat},d.prototype.setLngLat=function(h){return this._lngLat=i.LngLat.convert(h),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},d.prototype.getElement=function(){return this._element},d.prototype.setPopup=function(h){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),h){if(!("offset"in h.options)){var v=Math.sqrt(Math.pow(13.5,2)/2);h.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(24.6+v)],"bottom-right":[-v,-1*(24.6+v)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=h,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},d.prototype._onKeyPress=function(h){var v=h.code,I=h.charCode||h.keyCode;v!=="Space"&&v!=="Enter"&&I!==32&&I!==13||this.togglePopup()},d.prototype._onMapClick=function(h){var v=h.originalEvent.target,I=this._element;this._popup&&(v===I||I.contains(v))&&this.togglePopup()},d.prototype.getPopup=function(){return this._popup},d.prototype.togglePopup=function(){var h=this._popup;return h?(h.isOpen()?h.remove():h.addTo(this._map),this):this},d.prototype._update=function(h){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ia(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(v="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I="rotateX("+this._map.getPitch()+"deg)"),h&&h.type!=="moveend"||(this._pos=this._pos.round()),m.setTransform(this._element,Br[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+I+" "+v)}},d.prototype.getOffset=function(){return this._offset},d.prototype.setOffset=function(h){return this._offset=i.Point.convert(h),this._update(),this},d.prototype._onMove=function(h){if(!this._isDragging){var v=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.Event("dragstart"))),this.fire(new i.Event("drag")))},d.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new i.Event("dragend")),this._state="inactive"},d.prototype._addDragHandler=function(h){this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},d.prototype.setDraggable=function(h){return this._draggable=!!h,this._map&&(h?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},d.prototype.isDraggable=function(){return this._draggable},d.prototype.setRotation=function(h){return this._rotation=h||0,this._update(),this},d.prototype.getRotation=function(){return this._rotation},d.prototype.setRotationAlignment=function(h){return this._rotationAlignment=h||"auto",this._update(),this},d.prototype.getRotationAlignment=function(){return this._rotationAlignment},d.prototype.setPitchAlignment=function(h){return this._pitchAlignment=h&&h!=="auto"?h:this._rotationAlignment,this._update(),this},d.prototype.getPitchAlignment=function(){return this._pitchAlignment},d}(i.Evented),vu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ph=0,Pc=!1,Wd=function(c){function d(h){c.call(this),this.options=i.extend({},vu,h),i.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.onAdd=function(h){var v;return this._map=h,this._container=m.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),v=this._setupUI,dh!==void 0?v(dh):i.window.navigator.permissions!==void 0?i.window.navigator.permissions.query({name:"geolocation"}).then(function(I){v(dh=I.state!=="denied")}):v(dh=!!i.window.navigator.geolocation),this._container},d.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),m.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ph=0,Pc=!1},d.prototype._isOutOfMapMaxBounds=function(h){var v=this._map.getMaxBounds(),I=h.coords;return v&&(I.longitude<v.getWest()||I.longitude>v.getEast()||I.latitude<v.getSouth()||I.latitude>v.getNorth())},d.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},d.prototype._onSuccess=function(h){if(this._map){if(this._isOutOfMapMaxBounds(h))return this._setErrorState(),this.fire(new i.Event("outofmaxbounds",h)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=h,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(h),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(h),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("geolocate",h)),this._finish()}},d.prototype._updateCamera=function(h){var v=new i.LngLat(h.coords.longitude,h.coords.latitude),I=h.coords.accuracy,M=this._map.getBearing(),O=i.extend({bearing:M},this.options.fitBoundsOptions);this._map.fitBounds(v.toBounds(I),O,{geolocateSource:!0})},d.prototype._updateMarker=function(h){if(h){var v=new i.LngLat(h.coords.longitude,h.coords.latitude);this._accuracyCircleMarker.setLngLat(v).addTo(this._map),this._userLocationDotMarker.setLngLat(v).addTo(this._map),this._accuracy=h.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},d.prototype._updateCircleRadius=function(){var h=this._map._container.clientHeight/2,v=this._map.unproject([0,h]),I=this._map.unproject([1,h]),M=v.distanceTo(I),O=Math.ceil(2*this._accuracy/M);this._circleElement.style.width=O+"px",this._circleElement.style.height=O+"px"},d.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},d.prototype._onError=function(h){if(this._map){if(this.options.trackUserLocation)if(h.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var v=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=v,this._geolocateButton.setAttribute("aria-label",v),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(h.code===3&&Pc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("error",h)),this._finish()}},d.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},d.prototype._setupUI=function(h){var v=this;if(this._container.addEventListener("contextmenu",function(O){return O.preventDefault()}),this._geolocateButton=m.create("button","mapboxgl-ctrl-geolocate",this._container),m.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",h===!1){i.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var I=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=I,this._geolocateButton.setAttribute("aria-label",I)}else{var M=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=M,this._geolocateButton.setAttribute("aria-label",M)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=m.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Vh(this._dotElement),this._circleElement=m.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Vh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(O){O.geolocateSource||v._watchState!=="ACTIVE_LOCK"||O.originalEvent&&O.originalEvent.type==="resize"||(v._watchState="BACKGROUND",v._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),v._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),v.fire(new i.Event("trackuserlocationend")))})},d.prototype.trigger=function(){if(!this._setup)return i.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ph--,Pc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var h;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ph>1?(h={maximumAge:6e5,timeout:0},Pc=!0):(h=this.options.positionOptions,Pc=!1),this._geolocationWatchID=i.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,h)}}else i.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},d.prototype._clearWatch=function(){i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},d}(i.Evented),Ju={maxWidth:100,unit:"metric"},tc=function(c){this.options=i.extend({},Ju,c),i.bindAll(["_onMove","setUnit"],this)};function $s(c,d,h){var v=h&&h.maxWidth||100,I=c._container.clientHeight/2,M=c.unproject([0,I]),O=c.unproject([v,I]),V=M.distanceTo(O);if(h&&h.unit==="imperial"){var X=3.2808*V;X>5280?ec(d,v,X/5280,c._getUIString("ScaleControl.Miles")):ec(d,v,X,c._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?ec(d,v,V/1852,c._getUIString("ScaleControl.NauticalMiles")):V>=1e3?ec(d,v,V/1e3,c._getUIString("ScaleControl.Kilometers")):ec(d,v,V,c._getUIString("ScaleControl.Meters"))}function ec(c,d,h,v){var I,M,O,V=(I=h,(M=Math.pow(10,(""+Math.floor(I)).length-1))*(O=(O=I/M)>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(X){var it=Math.pow(10,Math.ceil(-Math.log(X)/Math.LN10));return Math.round(X*it)/it}(O)));c.style.width=d*(V/h)+"px",c.innerHTML=V+"&nbsp;"+v}tc.prototype.getDefaultPosition=function(){return"bottom-left"},tc.prototype._onMove=function(){$s(this._map,this._container,this.options)},tc.prototype.onAdd=function(c){return this._map=c,this._container=m.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",c.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},tc.prototype.onRemove=function(){m.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},tc.prototype.setUnit=function(c){this.options.unit=c,$s(this._map,this._container,this.options)};var Ks=function(c){this._fullscreen=!1,c&&c.container&&(c.container instanceof i.window.HTMLElement?this._container=c.container:i.warnOnce("Full screen control 'container' must be a DOM element.")),i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in i.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in i.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in i.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in i.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ks.prototype.onAdd=function(c){return this._map=c,this._container||(this._container=this._map.getContainer()),this._controlContainer=m.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ks.prototype.onRemove=function(){m.remove(this._controlContainer),this._map=null,i.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ks.prototype._checkFullscreenSupport=function(){return!!(i.window.document.fullscreenEnabled||i.window.document.mozFullScreenEnabled||i.window.document.msFullscreenEnabled||i.window.document.webkitFullscreenEnabled)},Ks.prototype._setupUI=function(){var c=this._fullscreenButton=m.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);m.create("span","mapboxgl-ctrl-icon",c).setAttribute("aria-hidden",!0),c.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),i.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ks.prototype._updateTitle=function(){var c=this._getTitle();this._fullscreenButton.setAttribute("aria-label",c),this._fullscreenButton.title=c},Ks.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ks.prototype._isFullscreen=function(){return this._fullscreen},Ks.prototype._changeIcon=function(){(i.window.document.fullscreenElement||i.window.document.mozFullScreenElement||i.window.document.webkitFullscreenElement||i.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ks.prototype._onClickFullscreen=function(){this._isFullscreen()?i.window.document.exitFullscreen?i.window.document.exitFullscreen():i.window.document.mozCancelFullScreen?i.window.document.mozCancelFullScreen():i.window.document.msExitFullscreen?i.window.document.msExitFullscreen():i.window.document.webkitCancelFullScreen&&i.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Zd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},jh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),$d=function(c){function d(h){c.call(this),this.options=i.extend(Object.create(Zd),h),i.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return c&&(d.__proto__=c),(d.prototype=Object.create(c&&c.prototype)).constructor=d,d.prototype.addTo=function(h){return this._map&&this.remove(),this._map=h,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new i.Event("open")),this},d.prototype.isOpen=function(){return!!this._map},d.prototype.remove=function(){return this._content&&m.remove(this._content),this._container&&(m.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new i.Event("close")),this},d.prototype.getLngLat=function(){return this._lngLat},d.prototype.setLngLat=function(h){return this._lngLat=i.LngLat.convert(h),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},d.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},d.prototype.getElement=function(){return this._container},d.prototype.setText=function(h){return this.setDOMContent(i.window.document.createTextNode(h))},d.prototype.setHTML=function(h){var v,I=i.window.document.createDocumentFragment(),M=i.window.document.createElement("body");for(M.innerHTML=h;v=M.firstChild;)I.appendChild(v);return this.setDOMContent(I)},d.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},d.prototype.setMaxWidth=function(h){return this.options.maxWidth=h,this._update(),this},d.prototype.setDOMContent=function(h){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=m.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(h),this._createCloseButton(),this._update(),this._focusFirstElement(),this},d.prototype.addClassName=function(h){this._container&&this._container.classList.add(h)},d.prototype.removeClassName=function(h){this._container&&this._container.classList.remove(h)},d.prototype.setOffset=function(h){return this.options.offset=h,this._update(),this},d.prototype.toggleClassName=function(h){if(this._container)return this._container.classList.toggle(h)},d.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=m.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},d.prototype._onMouseUp=function(h){this._update(h.point)},d.prototype._onMouseMove=function(h){this._update(h.point)},d.prototype._onDrag=function(h){this._update(h.point)},d.prototype._update=function(h){var v=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=m.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=m.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(yt){return v._container.classList.add(yt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ia(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||h)){var I=this._pos=this._trackPointer&&h?h:this._map.project(this._lngLat),M=this.options.anchor,O=function yt(xt){if(xt){if(typeof xt=="number"){var Bt=Math.round(Math.sqrt(.5*Math.pow(xt,2)));return{center:new i.Point(0,0),top:new i.Point(0,xt),"top-left":new i.Point(Bt,Bt),"top-right":new i.Point(-Bt,Bt),bottom:new i.Point(0,-xt),"bottom-left":new i.Point(Bt,-Bt),"bottom-right":new i.Point(-Bt,-Bt),left:new i.Point(xt,0),right:new i.Point(-xt,0)}}if(xt instanceof i.Point||Array.isArray(xt)){var Lt=i.Point.convert(xt);return{center:Lt,top:Lt,"top-left":Lt,"top-right":Lt,bottom:Lt,"bottom-left":Lt,"bottom-right":Lt,left:Lt,right:Lt}}return{center:i.Point.convert(xt.center||[0,0]),top:i.Point.convert(xt.top||[0,0]),"top-left":i.Point.convert(xt["top-left"]||[0,0]),"top-right":i.Point.convert(xt["top-right"]||[0,0]),bottom:i.Point.convert(xt.bottom||[0,0]),"bottom-left":i.Point.convert(xt["bottom-left"]||[0,0]),"bottom-right":i.Point.convert(xt["bottom-right"]||[0,0]),left:i.Point.convert(xt.left||[0,0]),right:i.Point.convert(xt.right||[0,0])}}return yt(new i.Point(0,0))}(this.options.offset);if(!M){var V,X=this._container.offsetWidth,it=this._container.offsetHeight;V=I.y+O.bottom.y<it?["top"]:I.y>this._map.transform.height-it?["bottom"]:[],I.x<X/2?V.push("left"):I.x>this._map.transform.width-X/2&&V.push("right"),M=V.length===0?"bottom":V.join("-")}var vt=I.add(O[M]).round();m.setTransform(this._container,Br[M]+" translate("+vt.x+"px,"+vt.y+"px)"),jf(this._container,M,"popup")}},d.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var h=this._container.querySelector(jh);h&&h.focus()}},d.prototype._onClose=function(){this.remove()},d}(i.Evented),qs={version:i.version,supported:f,setRTLTextPlugin:i.setRTLTextPlugin,getRTLTextPluginStatus:i.getRTLTextPluginStatus,Map:fh,NavigationControl:fs,GeolocateControl:Wd,AttributionControl:ra,ScaleControl:tc,FullscreenControl:Ks,Popup:$d,Marker:Vh,Style:Gr,LngLat:i.LngLat,LngLatBounds:i.LngLatBounds,Point:i.Point,MercatorCoordinate:i.MercatorCoordinate,Evented:i.Evented,config:i.config,prewarm:function(){Re().acquire(Le)},clearPrewarmedResources:function(){var c=kn;c&&(c.isPreloaded()&&c.numActive()===1?(c.release(Le),kn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return i.config.ACCESS_TOKEN},set accessToken(c){i.config.ACCESS_TOKEN=c},get baseApiUrl(){return i.config.API_URL},set baseApiUrl(c){i.config.API_URL=c},get workerCount(){return Ge.workerCount},set workerCount(c){Ge.workerCount=c},get maxParallelImageRequests(){return i.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(c){i.config.MAX_PARALLEL_IMAGE_REQUESTS=c},clearStorage:function(c){i.clearTileCache(c)},workerUrl:""};return qs}),s})})(eT);var py=eT.exports;const _1=Fp(py),Vp="event";function gN(t){Lf(t,Vp,sl({items:[],current:{}}))}Vd(Vp,gN);async function vN(t,e){ba(t,Vp).items.unshift(e)}async function yN(t,e){const n=ba(t,Vp);if(!n||!n.items||n.items.length<1)return;const s=n.items.findIndex(l=>l.id===e.id);s<0||n.items.splice(s,1)}function _N(t,e){return(ba(t,Vp).current||{})[e]}function fI(t,e,n){const a=ba(t,Vp);a.current[e]=n}const bN=_r({__name:"ActionControl",props:{...qa},setup(t){const e=t,{callMap:n,mapId:a,moduleContainerProps:s}=bo(e),l={},i=ba(a.value,Vp),f=hn(()=>i.items);Wa(f,y=>{m(y)},{deep:!0});function m(y){const x=Fy.groupBy(y,w=>w.event_map_type),A=[];n(w=>{for(const E in x)if(A.push(E),Object.prototype.hasOwnProperty.call(x,E)){const L=x[E],k=l[E],z=L[0];if(k&&k.id===z.id)return;k&&k.removeFromMap(w),l[E]=z,z&&z.addToMap(w),fI(a.value,E,z)}for(const E in l)if(Object.prototype.hasOwnProperty.call(l,E)){const L=l[E];!A.includes(E)&&L&&(L.removeFromMap(w),fI(a.value,E,void 0),l[E]=void 0)}})}return(y,x)=>(Ct(),$e(ss,Za(ka(at(s))),null,16))}}),xN=t=>(th("data-v-33c09079"),t=t(),eh(),t),AN={key:0,class:""},wN=xN(()=>kt("div",{class:"not-support-map"},[kt("p",{class:""}," Trình duyệt của bạn không hỗ trợ hiển thị bản đồ, vui lòng đổi trình duyệt hoặc cập nhật bản mới để xem. ")],-1)),CN=[wN],IN=["mapId"],EN={class:"map-viewer"},SN=["id"],MN=["id"],TN=["id"],PN=["id"],kN=["id"],LN=_r({__name:"Map",props:{mapboxAccessToken:{type:String,default:""},initOptions:{type:Object,default:()=>({attributionControl:!1,zoomControl:!1})},dragId:{type:String}},emits:["map-loaded","map-destroy"],setup(t,{emit:e}){if(!_1)throw new Error("mapboxgl is not installed.");const n=wM({mobile:0,tablet:640,laptop:1024,desktop:1280}),a={center:[105.19084739818732,15.827971829957548],zoom:5.297175623863693,maxZoom:22},s=t,l=e;_1.accessToken=s.mapboxAccessToken;const i=on(),f=on(_1.supported()),m=on(!1);let y;const x=on(Ef());hn(()=>Wz[x.value]),$a(()=>{const F=Object.assign({},a,s.initOptions);y=new _1.Map({accessToken:s.mapboxAccessToken,container:i.value,style:{version:8,metadata:{},sources:{},sprite:"https://tiles.eofactory.ai/styles/basic/sprite",glyphs:"https://tiles.eofactory.ai/fonts/{fontstack}/{range}.pbf",layers:[]},...F}),y.id=x.value,Sd.initMap(x.value,y),y.once("load",()=>{m.value=!0,l("map-loaded",y)})}),Pf(()=>{y&&(y.remove(),l("map-destroy",y)),y=void 0,Sd.removeMap(x.value)});const A=hn(()=>`map-draggable-${x.value}`),w=hn(()=>`bottom-right-${x.value}`),E=hn(()=>`bottom-left-${x.value}`),L=hn(()=>`top-right-${x.value}`),k=hn(()=>`top-left-${x.value}`);Ed("$map.dragId",s.dragId||A.value),Ed("$map.id",x.value);const z=n.smallerOrEqual("tablet");return(F,D)=>f.value?(Ct(),le("div",{key:1,class:mo(["map-container",{"map-mobile-container":at(z)}]),mapId:x.value},[kt("div",EN,[kt("div",{ref_key:"mapContainer",ref:i,class:"map-content",id:x.value},null,8,SN),s.dragId?mn("",!0):(Ct(),le(Mr,{key:0},[kt("div",{class:"right-bottom-container",id:w.value},null,8,MN),kt("div",{class:"left-bottom-container",id:E.value},null,8,TN),kt("div",{class:"right-top-container",id:L.value},null,8,PN),kt("div",{class:"left-top-container",id:k.value},null,8,kN),Jt(at(lB),{class:"drag-container","container-id":A.value},null,8,["container-id"])],64)),m.value?Zn(F.$slots,"default",{key:1},void 0,!0):mn("",!0),m.value?(Ct(),$e(bN,{key:2})):mn("",!0)])],10,IN)):(Ct(),le("div",AN,CN))}}),ON=Yn(LN,[["__scopeId","data-v-33c09079"]]),Af="crs",dI=[{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"},{name:"VN-2000",epsg:"4756",unit:"degree",proj4js:"+proj=longlat +ellps=WGS84 +towgs84=-191.90441429,-39.30318279,-111.45032835,-0.00928836,0.01975479,-0.00427372,0.252906278 +no_defs +type=crs"}];function RN(t){Lf(t,Af,sl({crs:"4326",items:dI.slice(),item:dI[0]}))}Vd(Af,RN);async function DN(t,e){const n=ba(t,Af);n.items=e}const zN=t=>ba(t,Af).items,nT=t=>ba(t,Af).item,BN=t=>ba(t,Af).crs;function FN(t,e){ba(t,Af).crs=e,ba(t,Af).item=ba(t,Af).items.find(n=>n.epsg==e)}const Ww=Object.freeze(Object.defineProperty({__proto__:null,getCrs:BN,getCrsItem:nT,getCrsItems:zN,setCrs:FN,setCrsItems:DN},Symbol.toStringTag,{value:"Module"}));function NN(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var Rp=1,Dp=2,sg=3,UN=4,NA=5,pI=6378137,VN=6356752314e-3,mI=.0066943799901413165,jv=484813681109536e-20,An=Math.PI/2,jN=.16666666666666666,HN=.04722222222222222,GN=.022156084656084655,Hn=1e-10,Rs=.017453292519943295,Th=57.29577951308232,ro=Math.PI/4,my=Math.PI*2,Pa=3.14159265359,uu={};uu.greenwich=0;uu.lisbon=-9.131906111111;uu.paris=2.337229166667;uu.bogota=-74.080916666667;uu.madrid=-3.687938888889;uu.rome=12.452333333333;uu.bern=7.439583333333;uu.jakarta=106.807719444444;uu.ferro=-17.666666666667;uu.brussels=4.367975;uu.stockholm=18.058277777778;uu.athens=23.7163375;uu.oslo=10.722916666667;const WN={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var gI=/[\s_\-\/\(\)]/g;function Dd(t,e){if(t[e])return t[e];for(var n=Object.keys(t),a=e.toLowerCase().replace(gI,""),s=-1,l,i;++s<n.length;)if(l=n[s],i=l.toLowerCase().replace(gI,""),i===a)return t[l]}function UA(t){var e={},n=t.split("+").map(function(f){return f.trim()}).filter(function(f){return f}).reduce(function(f,m){var y=m.split("=");return y.push(!0),f[y[0].toLowerCase()]=y[1],f},{}),a,s,l,i={proj:"projName",datum:"datumCode",rf:function(f){e.rf=parseFloat(f)},lat_0:function(f){e.lat0=f*Rs},lat_1:function(f){e.lat1=f*Rs},lat_2:function(f){e.lat2=f*Rs},lat_ts:function(f){e.lat_ts=f*Rs},lon_0:function(f){e.long0=f*Rs},lon_1:function(f){e.long1=f*Rs},lon_2:function(f){e.long2=f*Rs},alpha:function(f){e.alpha=parseFloat(f)*Rs},gamma:function(f){e.rectified_grid_angle=parseFloat(f)},lonc:function(f){e.longc=f*Rs},x_0:function(f){e.x0=parseFloat(f)},y_0:function(f){e.y0=parseFloat(f)},k_0:function(f){e.k0=parseFloat(f)},k:function(f){e.k0=parseFloat(f)},a:function(f){e.a=parseFloat(f)},b:function(f){e.b=parseFloat(f)},r:function(f){e.a=e.b=parseFloat(f)},r_a:function(){e.R_A=!0},zone:function(f){e.zone=parseInt(f,10)},south:function(){e.utmSouth=!0},towgs84:function(f){e.datum_params=f.split(",").map(function(m){return parseFloat(m)})},to_meter:function(f){e.to_meter=parseFloat(f)},units:function(f){e.units=f;var m=Dd(WN,f);m&&(e.to_meter=m.to_meter)},from_greenwich:function(f){e.from_greenwich=f*Rs},pm:function(f){var m=Dd(uu,f);e.from_greenwich=(m||parseFloat(f))*Rs},nadgrids:function(f){f==="@null"?e.datumCode="none":e.nadgrids=f},axis:function(f){var m="ewnsud";f.length===3&&m.indexOf(f.substr(0,1))!==-1&&m.indexOf(f.substr(1,1))!==-1&&m.indexOf(f.substr(2,1))!==-1&&(e.axis=f)},approx:function(){e.approx=!0}};for(a in n)s=n[a],a in i?(l=i[a],typeof l=="function"?l(s):e[l]=s):e[a]=s;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var gy=1,rT=2,iT=3,u_=4,oT=5,Zw=-1,ZN=/\s/,$N=/[A-Za-z]/,KN=/[A-Za-z84_]/,hb=/[,\]]/,aT=/[\d\.E\-\+]/;function Of(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=gy}Of.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==u_)for(;ZN.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case gy:return this.neutral(t);case rT:return this.keyword(t);case u_:return this.quoted(t);case oT:return this.afterquote(t);case iT:return this.number(t);case Zw:return}};Of.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=u_;return}if(hb.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Of.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=gy;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=gy,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Zw);return}};Of.prototype.number=function(t){if(aT.test(t)){this.word+=t;return}if(hb.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Of.prototype.quoted=function(t){if(t==='"'){this.state=oT;return}this.word+=t};Of.prototype.keyword=function(t){if(KN.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=gy;return}if(hb.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Of.prototype.neutral=function(t){if($N.test(t)){this.word=t,this.state=rT;return}if(t==='"'){this.word="",this.state=u_;return}if(aT.test(t)){this.word=t,this.state=iT;return}if(hb.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Of.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Zw)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function qN(t){var e=new Of(t);return e.output()}function vI(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var a=e?{}:t,s=n.reduce(function(l,i){return Zm(i,l),l},a);e&&(t[e]=s)}function Zm(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Zm(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var a;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Zm(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Zm(t[3],e[n]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],vI(e,n,t);return;default:for(a=-1;++a<t.length;)if(!Array.isArray(t[a]))return Zm(t,e[n]);return vI(e,n,t)}}var YN=.017453292519943295;function XN(t,e){var n=e[0],a=e[1];!(n in t)&&a in t&&(t[n]=t[a],e.length===3&&(t[n]=e[2](t[n])))}function Ch(t){return t*YN}function QN(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,a=t.AXIS.length;n<a;++n){var s=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?e+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?e+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?e+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var l=t.GEOGCS;t.type==="GEOGCS"&&(l=t),l&&(l.DATUM?t.datumCode=l.DATUM.name.toLowerCase():t.datumCode=l.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),l.DATUM&&l.DATUM.SPHEROID&&(t.ellps=l.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=l.DATUM.SPHEROID.a,t.rf=parseFloat(l.DATUM.SPHEROID.rf,10)),l.DATUM&&l.DATUM.TOWGS84&&(t.datum_params=l.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function i(y){var x=t.to_meter||1;return y*x}var f=function(y){return XN(t,y)},m=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ch],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ch],["x0","false_easting",i],["y0","false_northing",i],["long0","central_meridian",Ch],["lat0","latitude_of_origin",Ch],["lat0","standard_parallel_1",Ch],["lat1","standard_parallel_1",Ch],["lat2","standard_parallel_2",Ch],["azimuth","Azimuth"],["alpha","azimuth",Ch],["srsCode","name"]];m.forEach(f),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=Ch(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=Ch(t.lat0>0?90:-90))}function sT(t){var e=qN(t),n=e.shift(),a=e.shift();e.unshift(["name",a]),e.unshift(["type",n]);var s={};return Zm(e,s),QN(s),s}function El(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?El[t]=UA(arguments[1]):El[t]=sT(arguments[1]):El[t]=n}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(a){Array.isArray(a)?El.apply(e,a):El(a)});if(typeof t=="string"){if(t in El)return El[t]}else"EPSG"in t?El["EPSG:"+t.EPSG]=t:"ESRI"in t?El["ESRI:"+t.ESRI]=t:"IAU2000"in t?El["IAU2000:"+t.IAU2000]=t:console.log(t);return}}NN(El);function JN(t){return typeof t=="string"}function t9(t){return t in El}var e9=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function n9(t){return e9.some(function(e){return t.indexOf(e)>-1})}var r9=["3857","900913","3785","102113"];function i9(t){var e=Dd(t,"authority");if(e){var n=Dd(e,"epsg");return n&&r9.indexOf(n)>-1}}function o9(t){var e=Dd(t,"extension");if(e)return Dd(e,"proj4")}function a9(t){return t[0]==="+"}function s9(t){if(JN(t)){if(t9(t))return El[t];if(n9(t)){var e=sT(t);if(i9(e))return El["EPSG:3857"];var n=o9(e);return n?UA(n):e}if(a9(t))return UA(t)}else return t}function yI(t,e){t=t||{};var n,a;if(!e)return t;for(a in e)n=e[a],n!==void 0&&(t[a]=n);return t}function Rh(t,e,n){var a=t*e;return n/Math.sqrt(1-a*a)}function Uy(t){return t<0?-1:1}function Qn(t){return Math.abs(t)<=Pa?t:t-Uy(t)*my}function Yc(t,e,n){var a=t*n,s=.5*t;return a=Math.pow((1-a)/(1+a),s),Math.tan(.5*(An-e))/a}function vy(t,e){for(var n=.5*t,a,s,l=An-2*Math.atan(e),i=0;i<=15;i++)if(a=t*Math.sin(l),s=An-2*Math.atan(e*Math.pow((1-a)/(1+a),n))-l,l+=s,Math.abs(s)<=1e-10)return l;return-9999}function l9(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Rh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function u9(t){var e=t.x,n=t.y;if(n*Th>90&&n*Th<-90&&e*Th>180&&e*Th<-180)return null;var a,s;if(Math.abs(Math.abs(n)-An)<=Hn)return null;if(this.sphere)a=this.x0+this.a*this.k0*Qn(e-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(ro+.5*n));else{var l=Math.sin(n),i=Yc(this.e,n,l);a=this.x0+this.a*this.k0*Qn(e-this.long0),s=this.y0-this.a*this.k0*Math.log(i)}return t.x=a,t.y=s,t}function c9(t){var e=t.x-this.x0,n=t.y-this.y0,a,s;if(this.sphere)s=An-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var l=Math.exp(-n/(this.a*this.k0));if(s=vy(this.e,l),s===-9999)return null}return a=Qn(this.long0+e/(this.a*this.k0)),t.x=a,t.y=s,t}var h9=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const f9={init:l9,forward:u9,inverse:c9,names:h9};function d9(){}function _I(t){return t}var p9=["longlat","identity"];const m9={init:d9,forward:_I,inverse:_I,names:p9};var g9=[f9,m9],R1={},c_=[];function lT(t,e){var n=c_.length;return t.names?(c_[n]=t,t.names.forEach(function(a){R1[a.toLowerCase()]=n}),this):(console.log(e),!0)}function v9(t){if(!t)return!1;var e=t.toLowerCase();if(typeof R1[e]<"u"&&c_[R1[e]])return c_[R1[e]]}function y9(){g9.forEach(lT)}const _9={start:y9,add:lT,get:v9};var Kr={};Kr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Kr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Kr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Kr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Kr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Kr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Kr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Kr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Kr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Kr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Kr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Kr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Kr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Kr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Kr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Kr.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Kr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Kr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Kr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Kr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Kr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Kr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Kr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Kr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Kr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Kr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Kr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Kr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Kr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Kr.hough={a:6378270,rf:297,ellipseName:"Hough"};Kr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Kr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Kr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Kr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Kr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Kr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Kr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Kr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Kr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Kr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Kr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Kr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var b9=Kr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Kr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function x9(t,e,n,a){var s=t*t,l=e*e,i=(s-l)/s,f=0;a?(t*=1-i*(jN+i*(HN+i*GN)),s=t*t,i=0):f=Math.sqrt(i);var m=(s-l)/l;return{es:i,e:f,ep2:m}}function A9(t,e,n,a,s){if(!t){var l=Dd(Kr,a);l||(l=b9),t=l.a,e=l.b,n=l.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<Hn)&&(s=!0,e=t),{a:t,b:e,rf:n,sphere:s}}var ls={};ls.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};ls.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};ls.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};ls.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};ls.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};ls.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};ls.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};ls.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};ls.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};ls.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};ls.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};ls.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};ls.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};ls.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};ls.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};ls.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};ls.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};ls.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function w9(t,e,n,a,s,l,i){var f={};return t===void 0||t==="none"?f.datum_type=NA:f.datum_type=UN,e&&(f.datum_params=e.map(parseFloat),(f.datum_params[0]!==0||f.datum_params[1]!==0||f.datum_params[2]!==0)&&(f.datum_type=Rp),f.datum_params.length>3&&(f.datum_params[3]!==0||f.datum_params[4]!==0||f.datum_params[5]!==0||f.datum_params[6]!==0)&&(f.datum_type=Dp,f.datum_params[3]*=jv,f.datum_params[4]*=jv,f.datum_params[5]*=jv,f.datum_params[6]=f.datum_params[6]/1e6+1)),i&&(f.datum_type=sg,f.grids=i),f.a=n,f.b=a,f.es=s,f.ep2=l,f}var uT={};function C9(t,e){var n=new DataView(e),a=S9(n),s=M9(n,a),l=T9(n,s,a),i={header:s,subgrids:l};return uT[t]=i,i}function I9(t){if(t===void 0)return null;var e=t.split(",");return e.map(E9)}function E9(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:uT[t]||null,isNull:!1}}function $m(t){return t/3600*Math.PI/180}function S9(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function M9(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:VA(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function VA(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function T9(t,e,n){for(var a=176,s=[],l=0;l<e.nSubgrids;l++){var i=k9(t,a,n),f=L9(t,a,i,n),m=Math.round(1+(i.upperLongitude-i.lowerLongitude)/i.longitudeInterval),y=Math.round(1+(i.upperLatitude-i.lowerLatitude)/i.latitudeInterval);s.push({ll:[$m(i.lowerLongitude),$m(i.lowerLatitude)],del:[$m(i.longitudeInterval),$m(i.latitudeInterval)],lim:[m,y],count:i.gridNodeCount,cvs:P9(f)}),a+=176+i.gridNodeCount*16}return s}function P9(t){return t.map(function(e){return[$m(e.longitudeShift),$m(e.latitudeShift)]})}function k9(t,e,n){return{name:VA(t,e+8,e+16).trim(),parent:VA(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function L9(t,e,n,a){for(var s=e+176,l=16,i=[],f=0;f<n.gridNodeCount;f++){var m={latitudeShift:t.getFloat32(s+f*l,a),longitudeShift:t.getFloat32(s+f*l+4,a),latitudeAccuracy:t.getFloat32(s+f*l+8,a),longitudeAccuracy:t.getFloat32(s+f*l+12,a)};i.push(m)}return i}function Ph(t,e){if(!(this instanceof Ph))return new Ph(t);e=e||function(y){if(y)throw y};var n=s9(t);if(typeof n!="object"){e(t);return}var a=Ph.projections.get(n.projName);if(!a){e(t);return}if(n.datumCode&&n.datumCode!=="none"){var s=Dd(ls,n.datumCode);s&&(n.datum_params=n.datum_params||(s.towgs84?s.towgs84.split(","):null),n.ellps=s.ellipse,n.datumName=s.datumName?s.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var l=A9(n.a,n.b,n.rf,n.ellps,n.sphere),i=x9(l.a,l.b,l.rf,n.R_A),f=I9(n.nadgrids),m=n.datum||w9(n.datumCode,n.datum_params,l.a,l.b,i.es,i.ep2,f);yI(this,n),yI(this,a),this.a=l.a,this.b=l.b,this.rf=l.rf,this.sphere=l.sphere,this.es=i.es,this.e=i.e,this.ep2=i.ep2,this.datum=m,this.init(),e(null,this)}Ph.projections=_9;Ph.projections.start();function O9(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===Rp?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===Dp?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function cT(t,e,n){var a=t.x,s=t.y,l=t.z?t.z:0,i,f,m,y;if(s<-An&&s>-1.001*An)s=-An;else if(s>An&&s<1.001*An)s=An;else{if(s<-An)return{x:-1/0,y:-1/0,z:t.z};if(s>An)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),f=Math.sin(s),y=Math.cos(s),m=f*f,i=n/Math.sqrt(1-e*m),{x:(i+l)*y*Math.cos(a),y:(i+l)*y*Math.sin(a),z:(i*(1-e)+l)*f}}function hT(t,e,n,a){var s=1e-12,l=s*s,i=30,f,m,y,x,A,w,E,L,k,z,F,D,B,U=t.x,$=t.y,q=t.z?t.z:0,tt,Y,G;if(f=Math.sqrt(U*U+$*$),m=Math.sqrt(U*U+$*$+q*q),f/n<s){if(tt=0,m/n<s)return Y=An,G=-a,{x:t.x,y:t.y,z:t.z}}else tt=Math.atan2($,U);y=q/m,x=f/m,A=1/Math.sqrt(1-e*(2-e)*x*x),L=x*(1-e)*A,k=y*A,B=0;do B++,E=n/Math.sqrt(1-e*k*k),G=f*L+q*k-E*(1-e*k*k),w=e*E/(E+G),A=1/Math.sqrt(1-w*(2-w)*x*x),z=x*(1-w)*A,F=y*A,D=F*L-z*k,L=z,k=F;while(D*D>l&&B<i);return Y=Math.atan(F/Math.abs(z)),{x:tt,y:Y,z:G}}function R9(t,e,n){if(e===Rp)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===Dp){var a=n[0],s=n[1],l=n[2],i=n[3],f=n[4],m=n[5],y=n[6];return{x:y*(t.x-m*t.y+f*t.z)+a,y:y*(m*t.x+t.y-i*t.z)+s,z:y*(-f*t.x+i*t.y+t.z)+l}}}function D9(t,e,n){if(e===Rp)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===Dp){var a=n[0],s=n[1],l=n[2],i=n[3],f=n[4],m=n[5],y=n[6],x=(t.x-a)/y,A=(t.y-s)/y,w=(t.z-l)/y;return{x:x+m*A-f*w,y:-m*x+A+i*w,z:f*x-i*A+w}}}function b1(t){return t===Rp||t===Dp}function z9(t,e,n){if(O9(t,e)||t.datum_type===NA||e.datum_type===NA)return n;var a=t.a,s=t.es;if(t.datum_type===sg){var l=bI(t,!1,n);if(l!==0)return;a=pI,s=mI}var i=e.a,f=e.b,m=e.es;if(e.datum_type===sg&&(i=pI,f=VN,m=mI),s===m&&a===i&&!b1(t.datum_type)&&!b1(e.datum_type))return n;if(n=cT(n,s,a),b1(t.datum_type)&&(n=R9(n,t.datum_type,t.datum_params)),b1(e.datum_type)&&(n=D9(n,e.datum_type,e.datum_params)),n=hT(n,m,i,f),e.datum_type===sg){var y=bI(e,!0,n);if(y!==0)return}return n}function bI(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-n.x,y:n.y},s={x:Number.NaN,y:Number.NaN},l=[];t:for(var i=0;i<t.grids.length;i++){var f=t.grids[i];if(l.push(f.name),f.isNull){s=a;break}if(f.mandatory,f.grid===null){if(f.mandatory)return console.log("Unable to find mandatory grid '"+f.name+"'"),-1;continue}for(var m=f.grid.subgrids,y=0,x=m.length;y<x;y++){var A=m[y],w=(Math.abs(A.del[1])+Math.abs(A.del[0]))/1e4,E=A.ll[0]-w,L=A.ll[1]-w,k=A.ll[0]+(A.lim[0]-1)*A.del[0]+w,z=A.ll[1]+(A.lim[1]-1)*A.del[1]+w;if(!(L>a.y||E>a.x||z<a.y||k<a.x)&&(s=B9(a,e,A),!isNaN(s.x)))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*Th+" "+a.y*Th+" tried: '"+l+"'"),-1):(n.x=-s.x,n.y=s.y,0)}function B9(t,e,n){var a={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return a;var s={x:t.x,y:t.y};s.x-=n.ll[0],s.y-=n.ll[1],s.x=Qn(s.x-Math.PI)+Math.PI;var l=xI(s,n);if(e){if(isNaN(l.x))return a;l.x=s.x-l.x,l.y=s.y-l.y;var i=9,f=1e-12,m,y;do{if(y=xI(l,n),isNaN(y.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}m={x:s.x-(y.x+l.x),y:s.y-(y.y+l.y)},l.x+=m.x,l.y+=m.y}while(i--&&Math.abs(m.x)>f&&Math.abs(m.y)>f);if(i<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=Qn(l.x+n.ll[0]),a.y=l.y+n.ll[1]}else isNaN(l.x)||(a.x=t.x+l.x,a.y=t.y+l.y);return a}function xI(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},a={x:Math.floor(n.x),y:Math.floor(n.y)},s={x:n.x-1*a.x,y:n.y-1*a.y},l={x:Number.NaN,y:Number.NaN},i;if(a.x<0||a.x>=e.lim[0]||a.y<0||a.y>=e.lim[1])return l;i=a.y*e.lim[0]+a.x;var f={x:e.cvs[i][0],y:e.cvs[i][1]};i++;var m={x:e.cvs[i][0],y:e.cvs[i][1]};i+=e.lim[0];var y={x:e.cvs[i][0],y:e.cvs[i][1]};i--;var x={x:e.cvs[i][0],y:e.cvs[i][1]},A=s.x*s.y,w=s.x*(1-s.y),E=(1-s.x)*(1-s.y),L=(1-s.x)*s.y;return l.x=E*f.x+w*m.x+L*x.x+A*y.x,l.y=E*f.y+w*m.y+L*x.y+A*y.y,l}function AI(t,e,n){var a=n.x,s=n.y,l=n.z||0,i,f,m,y={};for(m=0;m<3;m++)if(!(e&&m===2&&n.z===void 0))switch(m===0?(i=a,"ew".indexOf(t.axis[m])!==-1?f="x":f="y"):m===1?(i=s,"ns".indexOf(t.axis[m])!==-1?f="y":f="x"):(i=l,f="z"),t.axis[m]){case"e":y[f]=i;break;case"w":y[f]=-i;break;case"n":y[f]=i;break;case"s":y[f]=-i;break;case"u":n[f]!==void 0&&(y.z=i);break;case"d":n[f]!==void 0&&(y.z=-i);break;default:return null}return y}function fT(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function F9(t){wI(t.x),wI(t.y)}function wI(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function N9(t,e){return(t.datum.datum_type===Rp||t.datum.datum_type===Dp||t.datum.datum_type===sg)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Rp||e.datum.datum_type===Dp||e.datum.datum_type===sg)&&t.datumCode!=="WGS84"}function h_(t,e,n,a){var s;Array.isArray(n)?n=fT(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var l=n.z!==void 0;if(F9(n),t.datum&&e.datum&&N9(t,e)&&(s=new Ph("WGS84"),n=h_(t,s,n,a),t=s),a&&t.axis!=="enu"&&(n=AI(t,!1,n)),t.projName==="longlat")n={x:n.x*Rs,y:n.y*Rs,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=z9(t.datum,e.datum,n),!!n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Th,y:n.y*Th,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),a&&e.axis!=="enu"?AI(e,!0,n):(n&&!l&&delete n.z,n)}var CI=Ph("WGS84");function Nx(t,e,n,a){var s,l,i;return Array.isArray(n)?(s=h_(t,e,n,a)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(n.splice(3)):[s.x,s.y,n[2]].concat(n.splice(3)):[s.x,s.y].concat(n.splice(2)):[s.x,s.y]):(l=h_(t,e,n,a),i=Object.keys(n),i.length===2||i.forEach(function(f){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(f==="x"||f==="y"||f==="z")return}else if(f==="x"||f==="y")return;l[f]=n[f]}),l)}function II(t){return t instanceof Ph?t:t.oProj?t.oProj:Ph(t)}function zu(t,e,n){t=II(t);var a=!1,s;return typeof e>"u"?(e=t,t=CI,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,e=t,t=CI,a=!0),e=II(e),n?Nx(t,e,n):(s={forward:function(l,i){return Nx(t,e,l,i)},inverse:function(l,i){return Nx(e,t,l,i)}},a&&(s.oProj=e),s)}var EI=6,dT="AJSAJS",pT="AFAFAF",Km=65,nu=73,mc=79,Mv=86,Tv=90;const U9={forward:mT,inverse:V9,toPoint:gT};function mT(t,e){return e=e||5,G9(j9({lat:t[1],lon:t[0]}),e)}function V9(t){var e=$w(yT(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function gT(t){var e=$w(yT(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Ux(t){return t*(Math.PI/180)}function SI(t){return 180*(t/Math.PI)}function j9(t){var e=t.lat,n=t.lon,a=6378137,s=.00669438,l=.9996,i,f,m,y,x,A,w,E=Ux(e),L=Ux(n),k,z;z=Math.floor((n+180)/6)+1,n===180&&(z=60),e>=56&&e<64&&n>=3&&n<12&&(z=32),e>=72&&e<84&&(n>=0&&n<9?z=31:n>=9&&n<21?z=33:n>=21&&n<33?z=35:n>=33&&n<42&&(z=37)),i=(z-1)*6-180+3,k=Ux(i),f=s/(1-s),m=a/Math.sqrt(1-s*Math.sin(E)*Math.sin(E)),y=Math.tan(E)*Math.tan(E),x=f*Math.cos(E)*Math.cos(E),A=Math.cos(E)*(L-k),w=a*((1-s/4-3*s*s/64-5*s*s*s/256)*E-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*E)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*E)-35*s*s*s/3072*Math.sin(6*E));var F=l*m*(A+(1-y+x)*A*A*A/6+(5-18*y+y*y+72*x-58*f)*A*A*A*A*A/120)+5e5,D=l*(w+m*Math.tan(E)*(A*A/2+(5-y+9*x+4*x*x)*A*A*A*A/24+(61-58*y+y*y+600*x-330*f)*A*A*A*A*A*A/720));return e<0&&(D+=1e7),{northing:Math.round(D),easting:Math.round(F),zoneNumber:z,zoneLetter:H9(e)}}function $w(t){var e=t.northing,n=t.easting,a=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var l=.9996,i=6378137,f=.00669438,m,y=(1-Math.sqrt(1-f))/(1+Math.sqrt(1-f)),x,A,w,E,L,k,z,F,D,B=n-5e5,U=e;a<"N"&&(U-=1e7),z=(s-1)*6-180+3,m=f/(1-f),k=U/l,F=k/(i*(1-f/4-3*f*f/64-5*f*f*f/256)),D=F+(3*y/2-27*y*y*y/32)*Math.sin(2*F)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*F)+151*y*y*y/96*Math.sin(6*F),x=i/Math.sqrt(1-f*Math.sin(D)*Math.sin(D)),A=Math.tan(D)*Math.tan(D),w=m*Math.cos(D)*Math.cos(D),E=i*(1-f)/Math.pow(1-f*Math.sin(D)*Math.sin(D),1.5),L=B/(x*l);var $=D-x*Math.tan(D)/E*(L*L/2-(5+3*A+10*w-4*w*w-9*m)*L*L*L*L/24+(61+90*A+298*w+45*A*A-252*m-3*w*w)*L*L*L*L*L*L/720);$=SI($);var q=(L-(1+2*A+w)*L*L*L/6+(5-2*w+28*A-3*w*w+8*m+24*A*A)*L*L*L*L*L/120)/Math.cos(D);q=z+SI(q);var tt;if(t.accuracy){var Y=$w({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});tt={top:Y.lat,right:Y.lon,bottom:$,left:q}}else tt={lat:$,lon:q};return tt}function H9(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function G9(t,e){var n="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+W9(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+a.substr(a.length-5,e)}function W9(t,e,n){var a=vT(n),s=Math.floor(t/1e5),l=Math.floor(e/1e5)%20;return Z9(s,l,a)}function vT(t){var e=t%EI;return e===0&&(e=EI),e}function Z9(t,e,n){var a=n-1,s=dT.charCodeAt(a),l=pT.charCodeAt(a),i=s+t-1,f=l+e,m=!1;i>Tv&&(i=i-Tv+Km-1,m=!0),(i===nu||s<nu&&i>nu||(i>nu||s<nu)&&m)&&i++,(i===mc||s<mc&&i>mc||(i>mc||s<mc)&&m)&&(i++,i===nu&&i++),i>Tv&&(i=i-Tv+Km-1),f>Mv?(f=f-Mv+Km-1,m=!0):m=!1,(f===nu||l<nu&&f>nu||(f>nu||l<nu)&&m)&&f++,(f===mc||l<mc&&f>mc||(f>mc||l<mc)&&m)&&(f++,f===nu&&f++),f>Mv&&(f=f-Mv+Km-1);var y=String.fromCharCode(i)+String.fromCharCode(f);return y}function yT(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,a="",s,l=0;!/[A-Z]/.test(s=t.charAt(l));){if(l>=2)throw"MGRSPoint bad conversion from: "+t;a+=s,l++}var i=parseInt(a,10);if(l===0||l+3>e)throw"MGRSPoint bad conversion from: "+t;var f=t.charAt(l++);if(f<="A"||f==="B"||f==="Y"||f>="Z"||f==="I"||f==="O")throw"MGRSPoint zone letter "+f+" not handled: "+t;n=t.substring(l,l+=2);for(var m=vT(i),y=$9(n.charAt(0),m),x=K9(n.charAt(1),m);x<q9(f);)x+=2e6;var A=e-l;if(A%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var w=A/2,E=0,L=0,k,z,F,D,B;return w>0&&(k=1e5/Math.pow(10,w),z=t.substring(l,l+w),E=parseFloat(z)*k,F=t.substring(l+w),L=parseFloat(F)*k),D=E+y,B=L+x,{easting:D,northing:B,zoneLetter:f,zoneNumber:i,accuracy:k}}function $9(t,e){for(var n=dT.charCodeAt(e-1),a=1e5,s=!1;n!==t.charCodeAt(0);){if(n++,n===nu&&n++,n===mc&&n++,n>Tv){if(s)throw"Bad character: "+t;n=Km,s=!0}a+=1e5}return a}function K9(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=pT.charCodeAt(e-1),a=0,s=!1;n!==t.charCodeAt(0);){if(n++,n===nu&&n++,n===mc&&n++,n>Mv){if(s)throw"Bad character: "+t;n=Km,s=!0}a+=1e5}return a}function q9(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function vg(t,e,n){if(!(this instanceof vg))return new vg(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}vg.fromMGRS=function(t){return new vg(gT(t))};vg.prototype.toMGRS=function(t){return mT([this.x,this.y],t)};var Y9=1,X9=.25,MI=.046875,TI=.01953125,PI=.01068115234375,Q9=.75,J9=.46875,tU=.013020833333333334,eU=.007120768229166667,nU=.3645833333333333,rU=.005696614583333333,iU=.3076171875;function _T(t){var e=[];e[0]=Y9-t*(X9+t*(MI+t*(TI+t*PI))),e[1]=t*(Q9-t*(MI+t*(TI+t*PI)));var n=t*t;return e[2]=n*(J9-t*(tU+t*eU)),n*=t,e[3]=n*(nU-t*rU),e[4]=n*t*iU,e}function fb(t,e,n,a){return n*=e,e*=e,a[0]*t-n*(a[1]+e*(a[2]+e*(a[3]+e*a[4])))}var oU=20;function bT(t,e,n){for(var a=1/(1-e),s=t,l=oU;l;--l){var i=Math.sin(s),f=1-e*i*i;if(f=(fb(s,i,Math.cos(s),n)-t)*(f*Math.sqrt(f))*a,s-=f,Math.abs(f)<Hn)return s}return s}function aU(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=_T(this.es),this.ml0=fb(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function sU(t){var e=t.x,n=t.y,a=Qn(e-this.long0),s,l,i,f=Math.sin(n),m=Math.cos(n);if(this.es){var x=m*a,A=Math.pow(x,2),w=this.ep2*Math.pow(m,2),E=Math.pow(w,2),L=Math.abs(m)>Hn?Math.tan(n):0,k=Math.pow(L,2),z=Math.pow(k,2);s=1-this.es*Math.pow(f,2),x=x/Math.sqrt(s);var F=fb(n,f,m,this.en);l=this.a*(this.k0*x*(1+A/6*(1-k+w+A/20*(5-18*k+z+14*w-58*k*w+A/42*(61+179*z-z*k-479*k)))))+this.x0,i=this.a*(this.k0*(F-this.ml0+f*a*x/2*(1+A/12*(5-k+9*w+4*E+A/30*(61+z-58*k+270*w-330*k*w+A/56*(1385+543*z-z*k-3111*k))))))+this.y0}else{var y=m*Math.sin(a);if(Math.abs(Math.abs(y)-1)<Hn)return 93;if(l=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,i=m*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),y=Math.abs(i),y>=1){if(y-1>Hn)return 93;i=0}else i=Math.acos(i);n<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=l,t.y=i,t}function lU(t){var e,n,a,s,l=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+i/this.k0,n=bT(e,this.es,this.en),Math.abs(n)<An){var A=Math.sin(n),w=Math.cos(n),E=Math.abs(w)>Hn?Math.tan(n):0,L=this.ep2*Math.pow(w,2),k=Math.pow(L,2),z=Math.pow(E,2),F=Math.pow(z,2);e=1-this.es*Math.pow(A,2);var D=l*Math.sqrt(e)/this.k0,B=Math.pow(D,2);e=e*E,a=n-e*B/(1-this.es)*.5*(1-B/12*(5+3*z-9*L*z+L-4*k-B/30*(61+90*z-252*L*z+45*F+46*L-B/56*(1385+3633*z+4095*F+1574*F*z)))),s=Qn(this.long0+D*(1-B/6*(1+2*z+L-B/20*(5+28*z+24*F+8*L*z+6*L-B/42*(61+662*z+1320*F+720*F*z))))/w)}else a=An*Uy(i),s=0;else{var f=Math.exp(l/this.k0),m=.5*(f-1/f),y=this.lat0+i/this.k0,x=Math.cos(y);e=Math.sqrt((1-Math.pow(x,2))/(1+Math.pow(m,2))),a=Math.asin(e),i<0&&(a=-a),m===0&&x===0?s=0:s=Qn(Math.atan2(m,x)+this.long0)}return t.x=s,t.y=a,t}var uU=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const D1={init:aU,forward:sU,inverse:lU,names:uU};function xT(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function vc(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),a=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(a,2))}function cU(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function hU(t){var e=Math.abs(t);return e=cU(e*(1+e/(vc(1,e)+1))),t<0?-e:e}function Kw(t,e){for(var n=2*Math.cos(2*e),a=t.length-1,s=t[a],l=0,i;--a>=0;)i=-l+n*s+t[a],l=s,s=i;return e+i*Math.sin(2*e)}function fU(t,e){for(var n=2*Math.cos(e),a=t.length-1,s=t[a],l=0,i;--a>=0;)i=-l+n*s+t[a],l=s,s=i;return Math.sin(e)*i}function dU(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function AT(t,e,n){for(var a=Math.sin(e),s=Math.cos(e),l=xT(n),i=dU(n),f=2*s*i,m=-2*a*l,y=t.length-1,x=t[y],A=0,w=0,E=0,L,k;--y>=0;)L=w,k=A,w=x,A=E,x=-L+f*w-m*A+t[y],E=-k+m*w+f*A;return f=a*i,m=s*l,[f*x-m*E,f*E+m*x]}function pU(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(D1.init.apply(this),this.forward=D1.forward,this.inverse=D1.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var a=Kw(this.cbg,this.lat0);this.Zb=-this.Qn*(a+fU(this.gtu,2*a))}function mU(t){var e=Qn(t.x-this.long0),n=t.y;n=Kw(this.cbg,n);var a=Math.sin(n),s=Math.cos(n),l=Math.sin(e),i=Math.cos(e);n=Math.atan2(a,i*s),e=Math.atan2(l*s,vc(a,s*i)),e=hU(Math.tan(e));var f=AT(this.gtu,2*n,2*e);n=n+f[0],e=e+f[1];var m,y;return Math.abs(e)<=2.623395162778?(m=this.a*(this.Qn*e)+this.x0,y=this.a*(this.Qn*n+this.Zb)+this.y0):(m=1/0,y=1/0),t.x=m,t.y=y,t}function gU(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var a,s;if(Math.abs(e)<=2.623395162778){var l=AT(this.utg,2*n,2*e);n=n+l[0],e=e+l[1],e=Math.atan(xT(e));var i=Math.sin(n),f=Math.cos(n),m=Math.sin(e),y=Math.cos(e);n=Math.atan2(i*y,vc(m,y*f)),e=Math.atan2(m,y*f),a=Qn(e+this.long0),s=Kw(this.cgb,n)}else a=1/0,s=1/0;return t.x=a,t.y=s,t}var vU=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const z1={init:pU,forward:mU,inverse:gU,names:vU};function yU(t,e){if(t===void 0){if(t=Math.floor((Qn(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var _U="etmerc";function bU(){var t=yU(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Rs,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,z1.init.apply(this),this.forward=z1.forward,this.inverse=z1.inverse}var xU=["Universal Transverse Mercator System","utm"];const AU={init:bU,names:xU,dependsOn:_U};function qw(t,e){return Math.pow((1-t)/(1+t),e)}var wU=20;function CU(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ro)/(Math.pow(Math.tan(.5*this.lat0+ro),this.C)*qw(this.e*t,this.ratexp))}function IU(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+ro),this.C)*qw(this.e*Math.sin(n),this.ratexp))-An,t.x=this.C*e,t}function EU(t){for(var e=1e-14,n=t.x/this.C,a=t.y,s=Math.pow(Math.tan(.5*a+ro)/this.K,1/this.C),l=wU;l>0&&(a=2*Math.atan(s*qw(this.e*Math.sin(t.y),-.5*this.e))-An,!(Math.abs(a-t.y)<e));--l)t.y=a;return l?(t.x=n,t.y=a,t):null}var SU=["gauss"];const Yw={init:CU,forward:IU,inverse:EU,names:SU};function MU(){Yw.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function TU(t){var e,n,a,s;return t.x=Qn(t.x-this.long0),Yw.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),a=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*a),t.x=s*n*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*n*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function PU(t){var e,n,a,s,l;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,l=vc(t.x,t.y)){var i=2*Math.atan2(l,this.R2);e=Math.sin(i),n=Math.cos(i),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/l),a=Math.atan2(t.x*e,l*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,a=0;return t.x=a,t.y=s,Yw.inverse.apply(this,[t]),t.x=Qn(t.x+this.long0),t}var kU=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const LU={init:MU,forward:TU,inverse:PU,names:kU};function OU(t,e,n){return e*=n,Math.tan(.5*(An+t))*Math.pow((1-e)/(1+e),.5*n)}function RU(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Hn&&(this.k0=.5*(1+Uy(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Hn&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Hn&&Math.abs(Math.cos(this.lat_ts))>Hn&&(this.k0=.5*this.cons*Rh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Yc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Rh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-An,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function DU(t){var e=t.x,n=t.y,a=Math.sin(n),s=Math.cos(n),l,i,f,m,y,x,A=Qn(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Hn&&Math.abs(n+this.lat0)<=Hn?(t.x=NaN,t.y=NaN,t):this.sphere?(l=2*this.k0/(1+this.sinlat0*a+this.coslat0*s*Math.cos(A)),t.x=this.a*l*s*Math.sin(A)+this.x0,t.y=this.a*l*(this.coslat0*a-this.sinlat0*s*Math.cos(A))+this.y0,t):(i=2*Math.atan(this.ssfn_(n,a,this.e))-An,m=Math.cos(i),f=Math.sin(i),Math.abs(this.coslat0)<=Hn?(y=Yc(this.e,n*this.con,this.con*a),x=2*this.a*this.k0*y/this.cons,t.x=this.x0+x*Math.sin(e-this.long0),t.y=this.y0-this.con*x*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<Hn?(l=2*this.a*this.k0/(1+m*Math.cos(A)),t.y=l*f):(l=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*m*Math.cos(A))),t.y=l*(this.cosX0*f-this.sinX0*m*Math.cos(A))+this.y0),t.x=l*m*Math.sin(A)+this.x0,t))}function zU(t){t.x-=this.x0,t.y-=this.y0;var e,n,a,s,l,i=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var f=2*Math.atan(i/(2*this.a*this.k0));return e=this.long0,n=this.lat0,i<=Hn?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(f)*this.sinlat0+t.y*Math.sin(f)*this.coslat0/i),Math.abs(this.coslat0)<Hn?this.lat0>0?e=Qn(this.long0+Math.atan2(t.x,-1*t.y)):e=Qn(this.long0+Math.atan2(t.x,t.y)):e=Qn(this.long0+Math.atan2(t.x*Math.sin(f),i*this.coslat0*Math.cos(f)-t.y*this.sinlat0*Math.sin(f))),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=Hn){if(i<=Hn)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,a=i*this.cons/(2*this.a*this.k0),n=this.con*vy(this.e,a),e=this.con*Qn(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(i*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,i<=Hn?l=this.X0:(l=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/i),e=Qn(this.long0+Math.atan2(t.x*Math.sin(s),i*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),n=-1*vy(this.e,Math.tan(.5*(An+l)));return t.x=e,t.y=n,t}var BU=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const FU={init:RU,forward:DU,inverse:zU,names:BU,ssfn_:OU};function NU(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,a=this.rf,s=1/a,l=2*s-Math.pow(s,2),i=this.e=Math.sqrt(l);this.R=this.k0*n*Math.sqrt(1-l)/(1-l*Math.pow(e,2)),this.alpha=Math.sqrt(1+l/(1-l)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var f=Math.log(Math.tan(Math.PI/4+this.b0/2)),m=Math.log(Math.tan(Math.PI/4+t/2)),y=Math.log((1+i*e)/(1-i*e));this.K=f-this.alpha*m+this.alpha*i/2*y}function UU(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(e+n)+this.K,s=2*(Math.atan(Math.exp(a))-Math.PI/4),l=this.alpha*(t.x-this.lambda0),i=Math.atan(Math.sin(l)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(l))),f=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(l));return t.y=this.R/2*Math.log((1+Math.sin(f))/(1-Math.sin(f)))+this.y0,t.x=this.R*i+this.x0,t}function VU(t){for(var e=t.x-this.x0,n=t.y-this.y0,a=e/this.R,s=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),l=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(a)),i=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(s))),f=this.lambda0+i/this.alpha,m=0,y=l,x=-1e3,A=0;Math.abs(y-x)>1e-7;){if(++A>20)return;m=1/this.alpha*(Math.log(Math.tan(Math.PI/4+l/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(y))/2)),x=y,y=2*Math.atan(Math.exp(m))-Math.PI/2}return t.x=f,t.y=y,t}var jU=["somerc"];const HU={init:NU,forward:UU,inverse:VU,names:jU};var Gm=1e-7;function GU(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1}function WU(){var t,e,n,a,s,l,i,f,m,y,x=0,A,w=0,E=0,L=0,k=0,z=0,F=0;this.no_off=GU(this),this.no_rot="no_rot"in this;var D=!1;"alpha"in this&&(D=!0);var B=!1;if("rectified_grid_angle"in this&&(B=!0),D&&(F=this.alpha),B&&(x=this.rectified_grid_angle*Rs),D||B)w=this.longc;else if(E=this.long1,k=this.lat1,L=this.long2,z=this.lat2,Math.abs(k-z)<=Gm||(t=Math.abs(k))<=Gm||Math.abs(t-An)<=Gm||Math.abs(Math.abs(this.lat0)-An)<=Gm||Math.abs(Math.abs(z)-An)<=Gm)throw new Error;var U=1-this.es;e=Math.sqrt(U),Math.abs(this.lat0)>Hn?(f=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*f*f,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/U),this.A=this.B*this.k0*e/t,a=this.B*e/(n*Math.sqrt(t)),s=a*a-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=a,this.E*=Math.pow(Yc(this.e,this.lat0,f),this.B)):(this.B=1/e,this.A=this.k0,this.E=a=s=1),D||B?(D?(A=Math.asin(Math.sin(F)/a),B||(x=F)):(A=x,F=Math.asin(a*Math.sin(A))),this.lam0=w-Math.asin(.5*(s-1/s)*Math.tan(A))/this.B):(l=Math.pow(Yc(this.e,k,Math.sin(k)),this.B),i=Math.pow(Yc(this.e,z,Math.sin(z)),this.B),s=this.E/l,m=(i-l)/(i+l),y=this.E*this.E,y=(y-i*l)/(y+i*l),t=E-L,t<-Math.pi?L-=my:t>Math.pi&&(L+=my),this.lam0=Qn(.5*(E+L)-Math.atan(y*Math.tan(.5*this.B*(E-L))/m)/this.B),A=Math.atan(2*Math.sin(this.B*Qn(E-this.lam0))/(s-1/s)),x=F=Math.asin(a*Math.sin(A))),this.singam=Math.sin(A),this.cosgam=Math.cos(A),this.sinrot=Math.sin(x),this.cosrot=Math.cos(x),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(F))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*A,this.v_pole_n=this.ArB*Math.log(Math.tan(ro-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(ro+s))}function ZU(t){var e={},n,a,s,l,i,f,m,y;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-An)>Hn){if(i=this.E/Math.pow(Yc(this.e,t.y,Math.sin(t.y)),this.B),f=1/i,n=.5*(i-f),a=.5*(i+f),l=Math.sin(this.B*t.x),s=(n*this.singam-l*this.cosgam)/a,Math.abs(Math.abs(s)-1)<Hn)throw new Error;y=.5*this.ArB*Math.log((1-s)/(1+s)),f=Math.cos(this.B*t.x),Math.abs(f)<Gm?m=this.A*t.x:m=this.ArB*Math.atan2(n*this.cosgam+l*this.singam,f)}else y=t.y>0?this.v_pole_n:this.v_pole_s,m=this.ArB*t.y;return this.no_rot?(e.x=m,e.y=y):(m-=this.u_0,e.x=y*this.cosrot+m*this.sinrot,e.y=m*this.cosrot-y*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function $U(t){var e,n,a,s,l,i,f,m={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*n),s=.5*(a-1/a),l=.5*(a+1/a),i=Math.sin(this.BrA*e),f=(i*this.cosgam+s*this.singam)/l,Math.abs(Math.abs(f)-1)<Hn)m.x=0,m.y=f<0?-An:An;else{if(m.y=this.E/Math.sqrt((1+f)/(1-f)),m.y=vy(this.e,Math.pow(m.y,1/this.B)),m.y===1/0)throw new Error;m.x=-this.rB*Math.atan2(s*this.cosgam-i*this.singam,Math.cos(this.BrA*e))}return m.x+=this.lam0,m}var KU=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const qU={init:WU,forward:ZU,inverse:$U,names:KU};function YU(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Hn)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),a=Rh(this.e,e,n),s=Yc(this.e,this.lat1,e),l=Math.sin(this.lat2),i=Math.cos(this.lat2),f=Rh(this.e,l,i),m=Yc(this.e,this.lat2,l),y=Yc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Hn?this.ns=Math.log(a/f)/Math.log(s/m):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(y,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function XU(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=Hn&&(n=Uy(n)*(An-2*Hn));var a=Math.abs(Math.abs(n)-An),s,l;if(a>Hn)s=Yc(this.e,n,Math.sin(n)),l=this.a*this.f0*Math.pow(s,this.ns);else{if(a=n*this.ns,a<=0)return null;l=0}var i=this.ns*Qn(e-this.long0);return t.x=this.k0*(l*Math.sin(i))+this.x0,t.y=this.k0*(this.rh-l*Math.cos(i))+this.y0,t}function QU(t){var e,n,a,s,l,i=(t.x-this.x0)/this.k0,f=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(i*i+f*f),n=1):(e=-Math.sqrt(i*i+f*f),n=-1);var m=0;if(e!==0&&(m=Math.atan2(n*i,n*f)),e!==0||this.ns>0){if(n=1/this.ns,a=Math.pow(e/(this.a*this.f0),n),s=vy(this.e,a),s===-9999)return null}else s=-An;return l=Qn(m/this.ns+this.long0),t.x=l,t.y=s,t}var JU=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const t7={init:YU,forward:XU,inverse:QU,names:JU};function e7(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function n7(t){var e,n,a,s,l,i,f,m=t.x,y=t.y,x=Qn(m-this.long0);return e=Math.pow((1+this.e*Math.sin(y))/(1-this.e*Math.sin(y)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(y/2+this.s45),this.alfa)/e)-this.s45),a=-x*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(a)),l=Math.asin(Math.cos(n)*Math.sin(a)/Math.cos(s)),i=this.n*l,f=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=f*Math.cos(i)/1,t.x=f*Math.sin(i)/1,this.czech||(t.y*=-1,t.x*=-1),t}function r7(t){var e,n,a,s,l,i,f,m,y=t.x;t.x=t.y,t.y=y,this.czech||(t.y*=-1,t.x*=-1),i=Math.sqrt(t.x*t.x+t.y*t.y),l=Math.atan2(t.y,t.x),s=l/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/i,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(s)),n=Math.asin(Math.cos(a)*Math.sin(s)/Math.cos(e)),t.x=this.long0-n/this.alfa,f=e,m=0;var x=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.e/2))-this.s45),Math.abs(f-t.y)<1e-10&&(m=1),f=t.y,x+=1;while(m===0&&x<15);return x>=15?null:t}var i7=["Krovak","krovak"];const o7={init:e7,forward:n7,inverse:r7,names:i7};function Ml(t,e,n,a,s){return t*s-e*Math.sin(2*s)+n*Math.sin(4*s)-a*Math.sin(6*s)}function Vy(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function jy(t){return .375*t*(1+.25*t*(1+.46875*t))}function Hy(t){return .05859375*t*t*(1+.75*t)}function Gy(t){return t*t*t*(35/3072)}function yg(t,e,n){var a=e*n;return t/Math.sqrt(1-a*a)}function Pg(t){return Math.abs(t)<An?t:t-Uy(t)*Math.PI}function f_(t,e,n,a,s){var l,i;l=t/e;for(var f=0;f<15;f++)if(i=(t-(e*l-n*Math.sin(2*l)+a*Math.sin(4*l)-s*Math.sin(6*l)))/(e-2*n*Math.cos(2*l)+4*a*Math.cos(4*l)-6*s*Math.cos(6*l)),l+=i,Math.abs(i)<=1e-10)return l;return NaN}function a7(){this.sphere||(this.e0=Vy(this.es),this.e1=jy(this.es),this.e2=Hy(this.es),this.e3=Gy(this.es),this.ml0=this.a*Ml(this.e0,this.e1,this.e2,this.e3,this.lat0))}function s7(t){var e,n,a=t.x,s=t.y;if(a=Qn(a-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(a)),n=this.a*(Math.atan2(Math.tan(s),Math.cos(a))-this.lat0);else{var l=Math.sin(s),i=Math.cos(s),f=yg(this.a,this.e,l),m=Math.tan(s)*Math.tan(s),y=a*Math.cos(s),x=y*y,A=this.es*i*i/(1-this.es),w=this.a*Ml(this.e0,this.e1,this.e2,this.e3,s);e=f*y*(1-x*m*(1/6-(8-m+8*A)*x/120)),n=w-this.ml0+f*l/i*x*(.5+(5-m+6*A)*x/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function l7(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,a,s;if(this.sphere){var l=n+this.lat0;a=Math.asin(Math.sin(l)*Math.cos(e)),s=Math.atan2(Math.tan(e),Math.cos(l))}else{var i=this.ml0/this.a+n,f=f_(i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(f)-An)<=Hn)return t.x=this.long0,t.y=An,n<0&&(t.y*=-1),t;var m=yg(this.a,this.e,Math.sin(f)),y=m*m*m/this.a/this.a*(1-this.es),x=Math.pow(Math.tan(f),2),A=e*this.a/m,w=A*A;a=f-m*Math.tan(f)/y*A*A*(.5-(1+3*x)*A*A/24),s=A*(1-w*(x/3+(1+3*x)*x*w/15))/Math.cos(f)}return t.x=Qn(s+this.long0),t.y=Pg(a),t}var u7=["Cassini","Cassini_Soldner","cass"];const c7={init:a7,forward:s7,inverse:l7,names:u7};function Md(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var h7=1,f7=2,d7=3,p7=4;function m7(){var t=Math.abs(this.lat0);if(Math.abs(t-An)<Hn?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<Hn?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Md(this.e,1),this.mmf=.5/(1-this.es),this.apa=C7(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Md(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function g7(t){var e,n,a,s,l,i,f,m,y,x,A=t.x,w=t.y;if(A=Qn(A-this.long0),this.sphere){if(l=Math.sin(w),x=Math.cos(w),a=Math.cos(A),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+x*a:1+this.sinph0*l+this.cosph0*x*a,n<=Hn)return null;n=Math.sqrt(2/n),e=n*x*Math.sin(A),n*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*x*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(w+this.lat0)<Hn)return null;n=ro-w*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(A),n*=a}}else{switch(f=0,m=0,y=0,a=Math.cos(A),s=Math.sin(A),l=Math.sin(w),i=Md(this.e,l),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=i/this.qp,m=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:y=1+this.sinb1*f+this.cosb1*m*a;break;case this.EQUIT:y=1+m*a;break;case this.N_POLE:y=An+w,i=this.qp-i;break;case this.S_POLE:y=w-An,i=this.qp+i;break}if(Math.abs(y)<Hn)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:y=Math.sqrt(2/y),this.mode===this.OBLIQ?n=this.ymf*y*(this.cosb1*f-this.sinb1*m*a):n=(y=Math.sqrt(2/(1+m*a)))*f*this.ymf,e=this.xmf*y*m*s;break;case this.N_POLE:case this.S_POLE:i>=0?(e=(y=Math.sqrt(i))*s,n=a*(this.mode===this.S_POLE?y:-y)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function v7(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,a,s,l,i,f,m,y;if(this.sphere){var x=0,A,w=0;if(A=Math.sqrt(e*e+n*n),s=A*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(w=Math.sin(s),x=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(A)<=Hn?0:Math.asin(n*w/A),e*=w,n=x*A;break;case this.OBLIQ:s=Math.abs(A)<=Hn?this.lat0:Math.asin(x*this.sinph0+n*w*this.cosph0/A),e*=w*this.cosph0,n=(x-Math.sin(s)*this.sinph0)*A;break;case this.N_POLE:n=-n,s=An-s;break;case this.S_POLE:s-=An;break}a=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(y=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,m=Math.sqrt(e*e+n*n),m<Hn)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*m/this.rq),l=Math.cos(i),e*=i=Math.sin(i),this.mode===this.OBLIQ?(y=l*this.sinb1+n*i*this.cosb1/m,f=this.qp*y,n=m*this.cosb1*l-n*this.sinb1*i):(y=n*i/m,f=this.qp*y,n=m*l)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),f=e*e+n*n,!f)return t.x=this.long0,t.y=this.lat0,t;y=1-f/this.qp,this.mode===this.S_POLE&&(y=-y)}a=Math.atan2(e,n),s=I7(Math.asin(y),this.apa)}return t.x=Qn(this.long0+a),t.y=s,t}var y7=.3333333333333333,_7=.17222222222222222,b7=.10257936507936508,x7=.06388888888888888,A7=.0664021164021164,w7=.016415012942191543;function C7(t){var e,n=[];return n[0]=t*y7,e=t*t,n[0]+=e*_7,n[1]=e*x7,e*=t,n[0]+=e*b7,n[1]+=e*A7,n[2]=e*w7,n}function I7(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var E7=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const S7={init:m7,forward:g7,inverse:v7,names:E7,S_POLE:h7,N_POLE:f7,EQUIT:d7,OBLIQ:p7};function zd(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function M7(){Math.abs(this.lat1+this.lat2)<Hn||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Rh(this.e3,this.sin_po,this.cos_po),this.qs1=Md(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Rh(this.e3,this.sin_po,this.cos_po),this.qs2=Md(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Md(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Hn?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function T7(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var a=Md(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,l=this.ns0*Qn(e-this.long0),i=s*Math.sin(l)+this.x0,f=this.rh-s*Math.cos(l)+this.y0;return t.x=i,t.y=f,t}function P7(t){var e,n,a,s,l,i;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1),s=0,e!==0&&(s=Math.atan2(a*t.x,a*t.y)),a=e*this.ns0/this.a,this.sphere?i=Math.asin((this.c-a*a)/(2*this.ns0)):(n=(this.c-a*a)/this.ns0,i=this.phi1z(this.e3,n)),l=Qn(s/this.ns0+this.long0),t.x=l,t.y=i,t}function k7(t,e){var n,a,s,l,i,f=zd(.5*e);if(t<Hn)return f;for(var m=t*t,y=1;y<=25;y++)if(n=Math.sin(f),a=Math.cos(f),s=t*n,l=1-s*s,i=.5*l*l/a*(e/(1-m)-n/l+.5/t*Math.log((1-s)/(1+s))),f=f+i,Math.abs(i)<=1e-7)return f;return null}var L7=["Albers_Conic_Equal_Area","Albers","aea"];const O7={init:M7,forward:T7,inverse:P7,names:L7,phi1z:k7};function R7(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function D7(t){var e,n,a,s,l,i,f,m,y=t.x,x=t.y;return a=Qn(y-this.long0),e=Math.sin(x),n=Math.cos(x),s=Math.cos(a),i=this.sin_p14*e+this.cos_p14*n*s,l=1,i>0||Math.abs(i)<=Hn?(f=this.x0+this.a*l*n*Math.sin(a)/i,m=this.y0+this.a*l*(this.cos_p14*e-this.sin_p14*n*s)/i):(f=this.x0+this.infinity_dist*n*Math.sin(a),m=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*s)),t.x=f,t.y=m,t}function z7(t){var e,n,a,s,l,i;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),n=Math.sin(s),a=Math.cos(s),i=zd(a*this.sin_p14+t.y*n*this.cos_p14/e),l=Math.atan2(t.x*n,e*this.cos_p14*a-t.y*this.sin_p14*n),l=Qn(this.long0+l)):(i=this.phic0,l=0),t.x=l,t.y=i,t}var B7=["gnom"];const F7={init:R7,forward:D7,inverse:z7,names:B7};function N7(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*An:An;for(var a=Math.asin(.5*e),s,l,i,f,m=0;m<30;m++)if(l=Math.sin(a),i=Math.cos(a),f=t*l,s=Math.pow(1-f*f,2)/(2*i)*(e/(1-t*t)-l/(1-f*f)+.5/t*Math.log((1-f)/(1+f))),a+=s,Math.abs(s)<=1e-10)return a;return NaN}function U7(){this.sphere||(this.k0=Rh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function V7(t){var e=t.x,n=t.y,a,s,l=Qn(e-this.long0);if(this.sphere)a=this.x0+this.a*l*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var i=Md(this.e,Math.sin(n));a=this.x0+this.a*this.k0*l,s=this.y0+this.a*i*.5/this.k0}return t.x=a,t.y=s,t}function j7(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Qn(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=N7(this.e,2*t.y*this.k0/this.a),e=Qn(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var H7=["cea"];const G7={init:U7,forward:V7,inverse:j7,names:H7};function W7(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Z7(t){var e=t.x,n=t.y,a=Qn(e-this.long0),s=Pg(n-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*s,t}function $7(t){var e=t.x,n=t.y;return t.x=Qn(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Pg(this.lat0+(n-this.y0)/this.a),t}var K7=["Equirectangular","Equidistant_Cylindrical","eqc"];const q7={init:W7,forward:Z7,inverse:$7,names:K7};var kI=20;function Y7(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Vy(this.es),this.e1=jy(this.es),this.e2=Hy(this.es),this.e3=Gy(this.es),this.ml0=this.a*Ml(this.e0,this.e1,this.e2,this.e3,this.lat0)}function X7(t){var e=t.x,n=t.y,a,s,l,i=Qn(e-this.long0);if(l=i*Math.sin(n),this.sphere)Math.abs(n)<=Hn?(a=this.a*i,s=-1*this.a*this.lat0):(a=this.a*Math.sin(l)/Math.tan(n),s=this.a*(Pg(n-this.lat0)+(1-Math.cos(l))/Math.tan(n)));else if(Math.abs(n)<=Hn)a=this.a*i,s=-1*this.ml0;else{var f=yg(this.a,this.e,Math.sin(n))/Math.tan(n);a=f*Math.sin(l),s=this.a*Ml(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+f*(1-Math.cos(l))}return t.x=a+this.x0,t.y=s+this.y0,t}function Q7(t){var e,n,a,s,l,i,f,m,y;if(a=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=Hn)e=Qn(a/this.a+this.long0),n=0;else{i=this.lat0+s/this.a,f=a*a/this.a/this.a+i*i,m=i;var x;for(l=kI;l;--l)if(x=Math.tan(m),y=-1*(i*(m*x+1)-m-.5*(m*m+f)*x)/((m-i)/x-1),m+=y,Math.abs(y)<=Hn){n=m;break}e=Qn(this.long0+Math.asin(a*Math.tan(m)/this.a)/Math.sin(n))}else if(Math.abs(s+this.ml0)<=Hn)n=0,e=Qn(this.long0+a/this.a);else{i=(this.ml0+s)/this.a,f=a*a/this.a/this.a+i*i,m=i;var A,w,E,L,k;for(l=kI;l;--l)if(k=this.e*Math.sin(m),A=Math.sqrt(1-k*k)*Math.tan(m),w=this.a*Ml(this.e0,this.e1,this.e2,this.e3,m),E=this.e0-2*this.e1*Math.cos(2*m)+4*this.e2*Math.cos(4*m)-6*this.e3*Math.cos(6*m),L=w/this.a,y=(i*(A*L+1)-L-.5*A*(L*L+f))/(this.es*Math.sin(2*m)*(L*L+f-2*i*L)/(4*A)+(i-L)*(A*E-2/Math.sin(2*m))-E),m-=y,Math.abs(y)<=Hn){n=m;break}A=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Qn(this.long0+Math.asin(a*A/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var J7=["Polyconic","poly"];const tV={init:Y7,forward:X7,inverse:Q7,names:J7};function eV(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function nV(t){var e,n=t.x,a=t.y,s=a-this.lat0,l=n-this.long0,i=s/jv*1e-5,f=l,m=1,y=0;for(e=1;e<=10;e++)m=m*i,y=y+this.A[e]*m;var x=y,A=f,w=1,E=0,L,k,z=0,F=0;for(e=1;e<=6;e++)L=w*x-E*A,k=E*x+w*A,w=L,E=k,z=z+this.B_re[e]*w-this.B_im[e]*E,F=F+this.B_im[e]*w+this.B_re[e]*E;return t.x=F*this.a+this.x0,t.y=z*this.a+this.y0,t}function rV(t){var e,n=t.x,a=t.y,s=n-this.x0,l=a-this.y0,i=l/this.a,f=s/this.a,m=1,y=0,x,A,w=0,E=0;for(e=1;e<=6;e++)x=m*i-y*f,A=y*i+m*f,m=x,y=A,w=w+this.C_re[e]*m-this.C_im[e]*y,E=E+this.C_im[e]*m+this.C_re[e]*y;for(var L=0;L<this.iterations;L++){var k=w,z=E,F,D,B=i,U=f;for(e=2;e<=6;e++)F=k*w-z*E,D=z*w+k*E,k=F,z=D,B=B+(e-1)*(this.B_re[e]*k-this.B_im[e]*z),U=U+(e-1)*(this.B_im[e]*k+this.B_re[e]*z);k=1,z=0;var $=this.B_re[1],q=this.B_im[1];for(e=2;e<=6;e++)F=k*w-z*E,D=z*w+k*E,k=F,z=D,$=$+e*(this.B_re[e]*k-this.B_im[e]*z),q=q+e*(this.B_im[e]*k+this.B_re[e]*z);var tt=$*$+q*q;w=(B*$+U*q)/tt,E=(U*$-B*q)/tt}var Y=w,G=E,rt=1,pt=0;for(e=1;e<=9;e++)rt=rt*Y,pt=pt+this.D[e]*rt;var Q=this.lat0+pt*jv*1e5,ot=this.long0+G;return t.x=ot,t.y=Q,t}var iV=["New_Zealand_Map_Grid","nzmg"];const oV={init:eV,forward:nV,inverse:rV,names:iV};function aV(){}function sV(t){var e=t.x,n=t.y,a=Qn(e-this.long0),s=this.x0+this.a*a,l=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=s,t.y=l,t}function lV(t){t.x-=this.x0,t.y-=this.y0;var e=Qn(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var uV=["Miller_Cylindrical","mill"];const cV={init:aV,forward:sV,inverse:lV,names:uV};var hV=20;function fV(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=_T(this.es)}function dV(t){var e,n,a=t.x,s=t.y;if(a=Qn(a-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var l=this.n*Math.sin(s),i=hV;i;--i){var f=(this.m*s+Math.sin(s)-l)/(this.m+Math.cos(s));if(s-=f,Math.abs(f)<Hn)break}e=this.a*this.C_x*a*(this.m+Math.cos(s)),n=this.a*this.C_y*s}else{var m=Math.sin(s),y=Math.cos(s);n=this.a*fb(s,m,y,this.en),e=this.a*a*y/Math.sqrt(1-this.es*m*m)}return t.x=e,t.y=n,t}function pV(t){var e,n,a,s;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(e))),this.m?e=zd((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=zd(Math.sin(e)/this.n)),a=Qn(a+this.long0),e=Pg(e)):(e=bT(t.y/this.a,this.es,this.en),s=Math.abs(e),s<An?(s=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),a=Qn(n)):s-Hn<An&&(a=this.long0)),t.x=a,t.y=e,t}var mV=["Sinusoidal","sinu"];const gV={init:fV,forward:dV,inverse:pV,names:mV};function vV(){}function yV(t){for(var e=t.x,n=t.y,a=Qn(e-this.long0),s=n,l=Math.PI*Math.sin(n);;){var i=-(s+Math.sin(s)-l)/(1+Math.cos(s));if(s+=i,Math.abs(i)<Hn)break}s/=2,Math.PI/2-Math.abs(n)<Hn&&(a=0);var f=.900316316158*this.a*a*Math.cos(s)+this.x0,m=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=f,t.y=m,t}function _V(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var a=Qn(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var s=Math.asin(n);return t.x=a,t.y=s,t}var bV=["Mollweide","moll"];const xV={init:vV,forward:yV,inverse:_V,names:bV};function AV(){Math.abs(this.lat1+this.lat2)<Hn||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Vy(this.es),this.e1=jy(this.es),this.e2=Hy(this.es),this.e3=Gy(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Rh(this.e,this.sinphi,this.cosphi),this.ml1=Ml(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Hn?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Rh(this.e,this.sinphi,this.cosphi),this.ml2=Ml(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ml(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function wV(t){var e=t.x,n=t.y,a;if(this.sphere)a=this.a*(this.g-n);else{var s=Ml(this.e0,this.e1,this.e2,this.e3,n);a=this.a*(this.g-s)}var l=this.ns*Qn(e-this.long0),i=this.x0+a*Math.sin(l),f=this.y0+this.rh-a*Math.cos(l);return t.x=i,t.y=f,t}function CV(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,a,s;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var l=0;if(n!==0&&(l=Math.atan2(e*t.x,e*t.y)),this.sphere)return s=Qn(this.long0+l/this.ns),a=Pg(this.g-n/this.a),t.x=s,t.y=a,t;var i=this.g-n/this.a;return a=f_(i,this.e0,this.e1,this.e2,this.e3),s=Qn(this.long0+l/this.ns),t.x=s,t.y=a,t}var IV=["Equidistant_Conic","eqdc"];const EV={init:AV,forward:wV,inverse:CV,names:IV};function SV(){this.R=this.a}function MV(t){var e=t.x,n=t.y,a=Qn(e-this.long0),s,l;Math.abs(n)<=Hn&&(s=this.x0+this.R*a,l=this.y0);var i=zd(2*Math.abs(n/Math.PI));(Math.abs(a)<=Hn||Math.abs(Math.abs(n)-An)<=Hn)&&(s=this.x0,n>=0?l=this.y0+Math.PI*this.R*Math.tan(.5*i):l=this.y0+Math.PI*this.R*-Math.tan(.5*i));var f=.5*Math.abs(Math.PI/a-a/Math.PI),m=f*f,y=Math.sin(i),x=Math.cos(i),A=x/(y+x-1),w=A*A,E=A*(2/y-1),L=E*E,k=Math.PI*this.R*(f*(A-L)+Math.sqrt(m*(A-L)*(A-L)-(L+m)*(w-L)))/(L+m);a<0&&(k=-k),s=this.x0+k;var z=m+A;return k=Math.PI*this.R*(E*z-f*Math.sqrt((L+m)*(m+1)-z*z))/(L+m),n>=0?l=this.y0+k:l=this.y0-k,t.x=s,t.y=l,t}function TV(t){var e,n,a,s,l,i,f,m,y,x,A,w,E;return t.x-=this.x0,t.y-=this.y0,A=Math.PI*this.R,a=t.x/A,s=t.y/A,l=a*a+s*s,i=-Math.abs(s)*(1+l),f=i-2*s*s+a*a,m=-2*i+1+2*s*s+l*l,E=s*s/m+(2*f*f*f/m/m/m-9*i*f/m/m)/27,y=(i-f*f/3/m)/m,x=2*Math.sqrt(-y/3),A=3*E/y/x,Math.abs(A)>1&&(A>=0?A=1:A=-1),w=Math.acos(A)/3,t.y>=0?n=(-x*Math.cos(w+Math.PI/3)-f/3/m)*Math.PI:n=-(-x*Math.cos(w+Math.PI/3)-f/3/m)*Math.PI,Math.abs(a)<Hn?e=this.long0:e=Qn(this.long0+Math.PI*(l-1+Math.sqrt(1+2*(a*a-s*s)+l*l))/2/a),t.x=e,t.y=n,t}var PV=["Van_der_Grinten_I","VanDerGrinten","vandg"];const kV={init:SV,forward:MV,inverse:TV,names:PV};function LV(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function OV(t){var e=t.x,n=t.y,a=Math.sin(t.y),s=Math.cos(t.y),l=Qn(e-this.long0),i,f,m,y,x,A,w,E,L,k,z,F,D,B,U,$,q,tt,Y,G,rt,pt,Q;return this.sphere?Math.abs(this.sin_p12-1)<=Hn?(t.x=this.x0+this.a*(An-n)*Math.sin(l),t.y=this.y0-this.a*(An-n)*Math.cos(l),t):Math.abs(this.sin_p12+1)<=Hn?(t.x=this.x0+this.a*(An+n)*Math.sin(l),t.y=this.y0+this.a*(An+n)*Math.cos(l),t):(tt=this.sin_p12*a+this.cos_p12*s*Math.cos(l),$=Math.acos(tt),q=$?$/Math.sin($):1,t.x=this.x0+this.a*q*s*Math.sin(l),t.y=this.y0+this.a*q*(this.cos_p12*a-this.sin_p12*s*Math.cos(l)),t):(i=Vy(this.es),f=jy(this.es),m=Hy(this.es),y=Gy(this.es),Math.abs(this.sin_p12-1)<=Hn?(x=this.a*Ml(i,f,m,y,An),A=this.a*Ml(i,f,m,y,n),t.x=this.x0+(x-A)*Math.sin(l),t.y=this.y0-(x-A)*Math.cos(l),t):Math.abs(this.sin_p12+1)<=Hn?(x=this.a*Ml(i,f,m,y,An),A=this.a*Ml(i,f,m,y,n),t.x=this.x0+(x+A)*Math.sin(l),t.y=this.y0+(x+A)*Math.cos(l),t):(w=a/s,E=yg(this.a,this.e,this.sin_p12),L=yg(this.a,this.e,a),k=Math.atan((1-this.es)*w+this.es*E*this.sin_p12/(L*s)),z=Math.atan2(Math.sin(l),this.cos_p12*Math.tan(k)-this.sin_p12*Math.cos(l)),z===0?Y=Math.asin(this.cos_p12*Math.sin(k)-this.sin_p12*Math.cos(k)):Math.abs(Math.abs(z)-Math.PI)<=Hn?Y=-Math.asin(this.cos_p12*Math.sin(k)-this.sin_p12*Math.cos(k)):Y=Math.asin(Math.sin(l)*Math.cos(k)/Math.sin(z)),F=this.e*this.sin_p12/Math.sqrt(1-this.es),D=this.e*this.cos_p12*Math.cos(z)/Math.sqrt(1-this.es),B=F*D,U=D*D,G=Y*Y,rt=G*Y,pt=rt*Y,Q=pt*Y,$=E*Y*(1-G*U*(1-U)/6+rt/8*B*(1-2*U)+pt/120*(U*(4-7*U)-3*F*F*(1-7*U))-Q/48*B),t.x=this.x0+$*Math.sin(z),t.y=this.y0+$*Math.cos(z),t))}function RV(t){t.x-=this.x0,t.y-=this.y0;var e,n,a,s,l,i,f,m,y,x,A,w,E,L,k,z,F,D,B,U,$,q,tt,Y;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*An*this.a?void 0:(n=e/this.a,a=Math.sin(n),s=Math.cos(n),l=this.long0,Math.abs(e)<=Hn?i=this.lat0:(i=zd(s*this.sin_p12+t.y*a*this.cos_p12/e),f=Math.abs(this.lat0)-An,Math.abs(f)<=Hn?this.lat0>=0?l=Qn(this.long0+Math.atan2(t.x,-t.y)):l=Qn(this.long0-Math.atan2(-t.x,t.y)):l=Qn(this.long0+Math.atan2(t.x*a,e*this.cos_p12*s-t.y*this.sin_p12*a))),t.x=l,t.y=i,t)):(m=Vy(this.es),y=jy(this.es),x=Hy(this.es),A=Gy(this.es),Math.abs(this.sin_p12-1)<=Hn?(w=this.a*Ml(m,y,x,A,An),e=Math.sqrt(t.x*t.x+t.y*t.y),E=w-e,i=f_(E/this.a,m,y,x,A),l=Qn(this.long0+Math.atan2(t.x,-1*t.y)),t.x=l,t.y=i,t):Math.abs(this.sin_p12+1)<=Hn?(w=this.a*Ml(m,y,x,A,An),e=Math.sqrt(t.x*t.x+t.y*t.y),E=e-w,i=f_(E/this.a,m,y,x,A),l=Qn(this.long0+Math.atan2(t.x,t.y)),t.x=l,t.y=i,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),z=Math.atan2(t.x,t.y),L=yg(this.a,this.e,this.sin_p12),F=Math.cos(z),D=this.e*this.cos_p12*F,B=-D*D/(1-this.es),U=3*this.es*(1-B)*this.sin_p12*this.cos_p12*F/(1-this.es),$=e/L,q=$-B*(1+B)*Math.pow($,3)/6-U*(1+3*B)*Math.pow($,4)/24,tt=1-B*q*q/2-$*q*q*q/6,k=Math.asin(this.sin_p12*Math.cos(q)+this.cos_p12*Math.sin(q)*F),l=Qn(this.long0+Math.asin(Math.sin(z)*Math.sin(q)/Math.cos(k))),Y=Math.sin(k),i=Math.atan2((Y-this.es*tt*this.sin_p12)*Math.tan(k),Y*(1-this.es)),t.x=l,t.y=i,t))}var DV=["Azimuthal_Equidistant","aeqd"];const zV={init:LV,forward:OV,inverse:RV,names:DV};function BV(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function FV(t){var e,n,a,s,l,i,f,m,y=t.x,x=t.y;return a=Qn(y-this.long0),e=Math.sin(x),n=Math.cos(x),s=Math.cos(a),i=this.sin_p14*e+this.cos_p14*n*s,l=1,(i>0||Math.abs(i)<=Hn)&&(f=this.a*l*n*Math.sin(a),m=this.y0+this.a*l*(this.cos_p14*e-this.sin_p14*n*s)),t.x=f,t.y=m,t}function NV(t){var e,n,a,s,l,i,f;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=zd(e/this.a),a=Math.sin(n),s=Math.cos(n),i=this.long0,Math.abs(e)<=Hn?(f=this.lat0,t.x=i,t.y=f,t):(f=zd(s*this.sin_p14+t.y*a*this.cos_p14/e),l=Math.abs(this.lat0)-An,Math.abs(l)<=Hn?(this.lat0>=0?i=Qn(this.long0+Math.atan2(t.x,-t.y)):i=Qn(this.long0-Math.atan2(-t.x,t.y)),t.x=i,t.y=f,t):(i=Qn(this.long0+Math.atan2(t.x*a,e*this.cos_p14*s-t.y*this.sin_p14*a)),t.x=i,t.y=f,t))}var UV=["ortho"];const VV={init:BV,forward:FV,inverse:NV,names:UV};var la={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},io={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function jV(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=An-ro/2?this.face=la.TOP:this.lat0<=-(An-ro/2)?this.face=la.BOTTOM:Math.abs(this.long0)<=ro?this.face=la.FRONT:Math.abs(this.long0)<=An+ro?this.face=this.long0>0?la.RIGHT:la.LEFT:this.face=la.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function HV(t){var e={x:0,y:0},n,a,s,l,i,f,m={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,a=t.x,this.face===la.TOP)l=An-n,a>=ro&&a<=An+ro?(m.value=io.AREA_0,s=a-An):a>An+ro||a<=-(An+ro)?(m.value=io.AREA_1,s=a>0?a-Pa:a+Pa):a>-(An+ro)&&a<=-ro?(m.value=io.AREA_2,s=a+An):(m.value=io.AREA_3,s=a);else if(this.face===la.BOTTOM)l=An+n,a>=ro&&a<=An+ro?(m.value=io.AREA_0,s=-a+An):a<ro&&a>=-ro?(m.value=io.AREA_1,s=-a):a<-ro&&a>=-(An+ro)?(m.value=io.AREA_2,s=-a-An):(m.value=io.AREA_3,s=a>0?-a+Pa:-a-Pa);else{var y,x,A,w,E,L,k;this.face===la.RIGHT?a=lg(a,+An):this.face===la.BACK?a=lg(a,+Pa):this.face===la.LEFT&&(a=lg(a,-An)),w=Math.sin(n),E=Math.cos(n),L=Math.sin(a),k=Math.cos(a),y=E*k,x=E*L,A=w,this.face===la.FRONT?(l=Math.acos(y),s=x1(l,A,x,m)):this.face===la.RIGHT?(l=Math.acos(x),s=x1(l,A,-y,m)):this.face===la.BACK?(l=Math.acos(-y),s=x1(l,A,-x,m)):this.face===la.LEFT?(l=Math.acos(-x),s=x1(l,A,y,m)):(l=s=0,m.value=io.AREA_0)}return f=Math.atan(12/Pa*(s+Math.acos(Math.sin(s)*Math.cos(ro))-An)),i=Math.sqrt((1-Math.cos(l))/(Math.cos(f)*Math.cos(f))/(1-Math.cos(Math.atan(1/Math.cos(s))))),m.value===io.AREA_1?f+=An:m.value===io.AREA_2?f+=Pa:m.value===io.AREA_3&&(f+=1.5*Pa),e.x=i*Math.cos(f),e.y=i*Math.sin(f),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function GV(t){var e={lam:0,phi:0},n,a,s,l,i,f,m,y,x,A={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,a=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?A.value=io.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(A.value=io.AREA_1,n-=An):t.x<0&&-t.x>=Math.abs(t.y)?(A.value=io.AREA_2,n=n<0?n+Pa:n-Pa):(A.value=io.AREA_3,n+=An),x=Pa/12*Math.tan(n),i=Math.sin(x)/(Math.cos(x)-1/Math.sqrt(2)),f=Math.atan(i),s=Math.cos(n),l=Math.tan(a),m=1-s*s*l*l*(1-Math.cos(Math.atan(1/Math.cos(f)))),m<-1?m=-1:m>1&&(m=1),this.face===la.TOP)y=Math.acos(m),e.phi=An-y,A.value===io.AREA_0?e.lam=f+An:A.value===io.AREA_1?e.lam=f<0?f+Pa:f-Pa:A.value===io.AREA_2?e.lam=f-An:e.lam=f;else if(this.face===la.BOTTOM)y=Math.acos(m),e.phi=y-An,A.value===io.AREA_0?e.lam=-f+An:A.value===io.AREA_1?e.lam=-f:A.value===io.AREA_2?e.lam=-f-An:e.lam=f<0?-f-Pa:-f+Pa;else{var w,E,L;w=m,x=w*w,x>=1?L=0:L=Math.sqrt(1-x)*Math.sin(f),x+=L*L,x>=1?E=0:E=Math.sqrt(1-x),A.value===io.AREA_1?(x=E,E=-L,L=x):A.value===io.AREA_2?(E=-E,L=-L):A.value===io.AREA_3&&(x=E,E=L,L=-x),this.face===la.RIGHT?(x=w,w=-E,E=x):this.face===la.BACK?(w=-w,E=-E):this.face===la.LEFT&&(x=w,w=E,E=-x),e.phi=Math.acos(-L)-An,e.lam=Math.atan2(E,w),this.face===la.RIGHT?e.lam=lg(e.lam,-An):this.face===la.BACK?e.lam=lg(e.lam,-Pa):this.face===la.LEFT&&(e.lam=lg(e.lam,+An))}if(this.es!==0){var k,z,F;k=e.phi<0?1:0,z=Math.tan(e.phi),F=this.b/Math.sqrt(z*z+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-F*F)/(this.one_minus_f*F)),k&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function x1(t,e,n,a){var s;return t<Hn?(a.value=io.AREA_0,s=0):(s=Math.atan2(e,n),Math.abs(s)<=ro?a.value=io.AREA_0:s>ro&&s<=An+ro?(a.value=io.AREA_1,s-=An):s>An+ro||s<=-(An+ro)?(a.value=io.AREA_2,s=s>=0?s-Pa:s+Pa):(a.value=io.AREA_3,s+=An)),s}function lg(t,e){var n=t+e;return n<-Pa?n+=my:n>+Pa&&(n-=my),n}var WV=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const ZV={init:jV,forward:HV,inverse:GV,names:WV};var jA=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Pv=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],wT=.8487,CT=1.3523,IT=Th/5,$V=1/IT,qm=18,d_=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},KV=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function qV(t,e,n,a){for(var s=e;a;--a){var l=t(s);if(s-=l,Math.abs(l)<n)break}return s}function YV(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function XV(t){var e=Qn(t.x-this.long0),n=Math.abs(t.y),a=Math.floor(n*IT);a<0?a=0:a>=qm&&(a=qm-1),n=Th*(n-$V*a);var s={x:d_(jA[a],n)*e,y:d_(Pv[a],n)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*wT+this.x0,s.y=s.y*this.a*CT+this.y0,s}function QV(t){var e={x:(t.x-this.x0)/(this.a*wT),y:Math.abs(t.y-this.y0)/(this.a*CT)};if(e.y>=1)e.x/=jA[qm][0],e.y=t.y<0?-An:An;else{var n=Math.floor(e.y*qm);for(n<0?n=0:n>=qm&&(n=qm-1);;)if(Pv[n][0]>e.y)--n;else if(Pv[n+1][0]<=e.y)++n;else break;var a=Pv[n],s=5*(e.y-a[0])/(Pv[n+1][0]-a[0]);s=qV(function(l){return(d_(a,l)-e.y)/KV(a,l)},s,Hn,100),e.x/=d_(jA[n],s),e.y=(5*n+s)*Rs,t.y<0&&(e.y=-e.y)}return e.x=Qn(e.x+this.long0),e}var JV=["Robinson","robin"];const tj={init:YV,forward:XV,inverse:QV,names:JV};function ej(){this.name="geocent"}function nj(t){var e=cT(t,this.es,this.a);return e}function rj(t){var e=hT(t,this.es,this.a,this.b);return e}var ij=["Geocentric","geocentric","geocent","Geocent"];const oj={init:ej,forward:nj,inverse:rj,names:ij};var rl={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},xv={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function aj(){if(Object.keys(xv).forEach((function(n){if(typeof this[n]>"u")this[n]=xv[n].def;else{if(xv[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);xv[n].num&&(this[n]=parseFloat(this[n]))}xv[n].degrees&&(this[n]=this[n]*Rs)}).bind(this)),Math.abs(Math.abs(this.lat0)-An)<Hn?this.mode=this.lat0<0?rl.S_POLE:rl.N_POLE:Math.abs(this.lat0)<Hn?this.mode=rl.EQUIT:(this.mode=rl.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function sj(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),a=Math.cos(t.x),s,l;switch(this.mode){case rl.OBLIQ:l=this.sinph0*e+this.cosph0*n*a;break;case rl.EQUIT:l=n*a;break;case rl.S_POLE:l=-e;break;case rl.N_POLE:l=e;break}switch(l=this.pn1/(this.p-l),s=l*n*Math.sin(t.x),this.mode){case rl.OBLIQ:l*=this.cosph0*e-this.sinph0*n*a;break;case rl.EQUIT:l*=e;break;case rl.N_POLE:l*=-(n*a);break;case rl.S_POLE:l*=n*a;break}var i,f;return i=l*this.cg+s*this.sg,f=1/(i*this.sw*this.h1+this.cw),s=(s*this.cg-l*this.sg)*this.cw*f,l=i*f,t.x=s*this.a,t.y=l*this.a,t}function lj(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,a,s;s=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*s,a=this.pn1*t.y*this.cw*s,t.x=n*this.cg+a*this.sg,t.y=a*this.cg-n*this.sg;var l=vc(t.x,t.y);if(Math.abs(l)<Hn)e.x=0,e.y=t.y;else{var i,f;switch(f=1-l*l*this.pfact,f=(this.p-Math.sqrt(f))/(this.pn1/l+l/this.pn1),i=Math.sqrt(1-f*f),this.mode){case rl.OBLIQ:e.y=Math.asin(i*this.sinph0+t.y*f*this.cosph0/l),t.y=(i-this.sinph0*Math.sin(e.y))*l,t.x*=f*this.cosph0;break;case rl.EQUIT:e.y=Math.asin(t.y*f/l),t.y=i*l,t.x*=f;break;case rl.N_POLE:e.y=Math.asin(i),t.y=-t.y;break;case rl.S_POLE:e.y=-Math.asin(i);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var uj=["Tilted_Perspective","tpers"];const cj={init:aj,forward:sj,inverse:lj,names:uj};function hj(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function fj(t){var e=t.x,n=t.y,a,s,l,i;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var f=this.radius_p/vc(this.radius_p*Math.cos(n),Math.sin(n));if(s=f*Math.cos(e)*Math.cos(n),l=f*Math.sin(e)*Math.cos(n),i=f*Math.sin(n),(this.radius_g-s)*s-l*l-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(l/vc(i,a)),t.y=this.radius_g_1*Math.atan(i/a)):(t.x=this.radius_g_1*Math.atan(l/a),t.y=this.radius_g_1*Math.atan(i/vc(l,a)))}else this.shape==="sphere"&&(a=Math.cos(n),s=Math.cos(e)*a,l=Math.sin(e)*a,i=Math.sin(n),a=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(l/vc(i,a)),t.y=this.radius_g_1*Math.atan(i/a)):(t.x=this.radius_g_1*Math.atan(l/a),t.y=this.radius_g_1*Math.atan(i/vc(l,a))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function dj(t){var e=-1,n=0,a=0,s,l,i,f;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*vc(1,a)):(n=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*vc(1,n));var m=a/this.radius_p;if(s=n*n+m*m+e*e,l=2*this.radius_g*e,i=l*l-4*s*this.C,i<0)return t.x=Number.NaN,t.y=Number.NaN,t;f=(-l-Math.sqrt(i))/(2*s),e=this.radius_g+f*e,n*=f,a*=f,t.x=Math.atan2(n,e),t.y=Math.atan(a*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(n=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),s=n*n+a*a+e*e,l=2*this.radius_g*e,i=l*l-4*s*this.C,i<0)return t.x=Number.NaN,t.y=Number.NaN,t;f=(-l-Math.sqrt(i))/(2*s),e=this.radius_g+f*e,n*=f,a*=f,t.x=Math.atan2(n,e),t.y=Math.atan(a*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var pj=["Geostationary Satellite View","Geostationary_Satellite","geos"];const mj={init:hj,forward:fj,inverse:dj,names:pj};var Hv=1.340264,Gv=-.081106,Wv=893e-6,Zv=.003796,p_=Math.sqrt(3)/2;function gj(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function vj(t){var e=Qn(t.x-this.long0),n=t.y,a=Math.asin(p_*Math.sin(n)),s=a*a,l=s*s*s;return t.x=e*Math.cos(a)/(p_*(Hv+3*Gv*s+l*(7*Wv+9*Zv*s))),t.y=a*(Hv+Gv*s+l*(Wv+Zv*s)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function yj(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,a=t.y,s,l,i,f,m,y;for(y=0;y<n&&(s=a*a,l=s*s*s,i=a*(Hv+Gv*s+l*(Wv+Zv*s))-t.y,f=Hv+3*Gv*s+l*(7*Wv+9*Zv*s),a-=m=i/f,!(Math.abs(m)<e));++y);return s=a*a,l=s*s*s,t.x=p_*t.x*(Hv+3*Gv*s+l*(7*Wv+9*Zv*s))/Math.cos(a),t.y=Math.asin(Math.sin(a)/p_),t.x=Qn(t.x+this.long0),t}var _j=["eqearth","Equal Earth","Equal_Earth"];const bj={init:gj,forward:vj,inverse:yj,names:_j};function xj(t){t.Proj.projections.add(D1),t.Proj.projections.add(z1),t.Proj.projections.add(AU),t.Proj.projections.add(LU),t.Proj.projections.add(FU),t.Proj.projections.add(HU),t.Proj.projections.add(qU),t.Proj.projections.add(t7),t.Proj.projections.add(o7),t.Proj.projections.add(c7),t.Proj.projections.add(S7),t.Proj.projections.add(O7),t.Proj.projections.add(F7),t.Proj.projections.add(G7),t.Proj.projections.add(q7),t.Proj.projections.add(tV),t.Proj.projections.add(oV),t.Proj.projections.add(cV),t.Proj.projections.add(gV),t.Proj.projections.add(xV),t.Proj.projections.add(EV),t.Proj.projections.add(kV),t.Proj.projections.add(zV),t.Proj.projections.add(VV),t.Proj.projections.add(ZV),t.Proj.projections.add(tj),t.Proj.projections.add(oj),t.Proj.projections.add(cj),t.Proj.projections.add(mj),t.Proj.projections.add(bj)}zu.defaultDatum="WGS84";zu.Proj=Ph;zu.WGS84=new zu.Proj("WGS84");zu.Point=vg;zu.toPoint=fT;zu.defs=El;zu.nadgrid=C9;zu.transform=h_;zu.mgrs=U9;zu.version="__VERSION__";xj(zu);function ET(t){function e({longitude:n,latitude:a},s=!1){const l=nT(t)||{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"};return HA({longitude:n,latitude:a},l,s)}return{format:e}}function HA({longitude:t,latitude:e},n,a=!1){const s={longitude:"0",latitude:"0"};return!t||!e||(n&&!n.default&&n.proj4js&&([t,e]=zu(n.proj4js,[t,e])),n&&n.unit==="meter"?(s.longitude=t.toFixed(0),s.latitude=e.toFixed(0)):a?(s.longitude=wj(+t),s.latitude=Aj(+e)):(s.longitude=t.toFixed(6),s.latitude=e.toFixed(6))),s}const Aj=t=>`${Xw(t)}° ${Qw(t)}' ${parseFloat(ST(t).toFixed(2))}" ${t>0?"N":"S"}`,wj=t=>`${Xw(t)}° ${Qw(t)}' ${parseFloat(ST(t).toFixed(2))}" ${t>0?"E":"W"}`,Xw=t=>t===0?0:Math.floor(Math.abs(t)),Qw=t=>t===0?0:Math.floor((Math.abs(t)-Math.floor(Math.abs(t)))*60),ST=t=>t===0?0:(Math.abs(t)-Xw(t)-Qw(t)/60)*3600;function GA(t,e,n=!1){const{add:a,remove:s,isActive:l}=MT(t,e);return Iy(()=>{s()}),n&&$a(()=>{a()}),{add:a,remove:s,isActive:l}}function MT(t,e){const n=()=>{vN(t,e)},a=()=>{yN(t,e)},s=hn(()=>{const l=_N(t,e.event_map_type);return l&&l.id===e.id});return{add:n,remove:a,isActive:s}}let Cj=class{get id(){return this._id}constructor(){this._id=`${Ef()}`}},TT=class extends Cj{constructor(e,n="map"){super(),this.event_map_type=e,this.type_select=n,this.options={}}setHandler(e){return this.handler=e,this}addToMap(e){return this.handler&&e.on(this.event_map_type,this.handler),this}removeFromMap(e){return this.handler&&e.off(this.event_map_type,this.handler),this}};class Ij extends TT{constructor(){super("click","map"),this._originalHandlers={},this.setClassPointer("pointer")}setClassPointer(e){this.options.classPointer=e}setHandler(e){return this.handler=e,this}addToMap(e){if(!this.handler)return this;this.options.classPointer&&e.getCanvas().classList.add(this.options.classPointer);try{this._originalHandlers={scrollZoom:e.scrollZoom.isEnabled(),dragRotate:e.dragRotate.isEnabled(),touchZoomRotate:e.touchZoomRotate.isEnabled(),doubleClickZoom:e.doubleClickZoom.isEnabled(),dragPan:e.dragPan.isEnabled(),boxZoom:e.boxZoom.isEnabled()},e.scrollZoom.isEnabled()&&e.scrollZoom.disable(),e.dragRotate.isEnabled()&&e.dragRotate.disable(),e.touchZoomRotate.isEnabled()&&e.touchZoomRotate.disable(),e.doubleClickZoom.isEnabled()&&e.doubleClickZoom.disable(),e.dragPan.isEnabled()&&e.dragPan.disable(),e.boxZoom.isEnabled()&&e.boxZoom.disable(),this.map_ranger=Ej(e.getCanvasContainer(),this.handler)}catch(n){console.error("Error disabling map controls:",n)}return this}removeFromMap(e){this.options.classPointer&&e.getCanvas().classList.remove(this.options.classPointer);try{this._originalHandlers.scrollZoom!==!1&&e.scrollZoom.enable(),this._originalHandlers.dragRotate!==!1&&e.dragRotate.enable(),this._originalHandlers.touchZoomRotate!==!1&&e.touchZoomRotate.enable(),this._originalHandlers.doubleClickZoom!==!1&&e.doubleClickZoom.enable(),this._originalHandlers.dragPan!==!1&&e.dragPan.enable(),this._originalHandlers.boxZoom!==!1&&e.boxZoom.enable()}catch(n){console.error("Error re-enabling map controls:",n)}return this.map_ranger&&(this.map_ranger.destroy(),this.map_ranger=void 0),this}}function Ej(t,e){let n,a,s;function l(w){const E=t.getBoundingClientRect();return{x:w.clientX-E.left-t.clientLeft,y:w.clientY-E.top-t.clientTop}}function i(w){w.preventDefault(),w.stopPropagation(),n=l(w),document.addEventListener("mousemove",f),document.addEventListener("mouseup",m),document.addEventListener("keydown",y)}function f(w){w.preventDefault(),w.stopPropagation(),a=l(w),s||(s=document.createElement("div"),s.classList.add("boxdraw"),t.appendChild(s));const E=Math.min(n.x,a.x),L=Math.max(n.x,a.x),k=Math.min(n.y,a.y),z=Math.max(n.y,a.y);s.style.transform=`translate(${E}px, ${k}px)`,s.style.width=L-E+"px",s.style.height=z-k+"px"}function m(w){w.preventDefault(),w.stopPropagation(),x([n,l(w)])}function y(w){w.keyCode===27&&x()}function x(w){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",m),document.removeEventListener("keydown",y),s&&(s.parentNode&&s.parentNode.removeChild(s),s=void 0),w&&e&&e(w)}function A(){t.removeEventListener("mousedown",i,!0),e=void 0,x()}return t.addEventListener("mousedown",i,!0),t.style.cursor="crosshair",{destroy:A}}class Jw extends TT{constructor(e="map"){super("click",e),this.setClassPointer("pointer")}setClassPointer(e){this.options.classPointer=e}addToMap(e){return this.options.classPointer&&e.getCanvas().classList.add(this.options.classPointer),this.handler&&(e.on("click",this.handler),e.on("touchstart",this.handler)),this}removeFromMap(e){return this.options.classPointer&&e.getCanvas().classList.remove(this.options.classPointer),this.handler&&(e.off("click",this.handler),e.off("touchstart",this.handler)),this}}function Sj(t,e,n,a={}){return new Promise((s,l)=>{t.loadImage(n,(i,f)=>{i&&l(i),t.hasImage(e)||t.addImage(e,f,a),s(!0)})})}const t2="image";function PT(t){Lf(t,t2,sl({images:{}}))}Vd(t2,PT);async function Mj(t,e,n,a={}){const s=ba(t,t2);return s.images[e]={path:n,id:e,name:e,is_sprite:!1,category:"custom"},Sd.getMap(t,async i=>Sj(i,e,n,a))}const Tj=Object.freeze(Object.defineProperty({__proto__:null,addImage:Mj,initMapImage:PT},Symbol.toStringTag,{value:"Module"})),Pj={class:"crs-container"},kj={class:"grow"},Lj={class:"crs-item-header"},Oj={class:"crs-item-header__title"},Rj={class:"crs-item-header__action"},Dj=["onClick"],zj={class:"crs-item"},Bj={key:0},Fj={key:1},Nj={class:"crs-item__add"},Uj=_r({__name:"CrsControl",props:{...qa},setup(t){const{getCrsItems:e,setCrsItems:n}=Ww,a=t,{mapId:s,moduleContainerProps:l}=bo(a),{trans:i,setLocaleDefault:f}=Ka(s.value);f({map:{"crs-control":{title:"Crs setting",field:{name:"name",unit:"unit",epsg:"epsg",proj4js:"proj4js"}}}});const[m,y]=Rd(!1);function x(){y(!m.value)}const A=hn(()=>e(s.value)),w=[{text:"degree",value:"degree"},{text:"meter",value:"meter"}],E={delete:Np,plus:kf},L=z=>{n(s.value,A.value.filter(F=>F.epsg!==z.epsg))},k=()=>{A.value.push({name:"",unit:"degree",epsg:""})};return(z,F)=>(Ct(),$e(ss,Za(ka(at(l))),{btn:Ce(()=>[Jt(yo,{onClick:oo(x,["stop"]),tooltip:at(i)("map.crs-control.title")},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:at(sD)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Ce(D=>[at(m)?(Ct(),$e(at(jd),li({key:0,height:200,width:400},D,{show:at(m),"onUpdate:show":F[1]||(F[1]=B=>Jo(m)?m.value=B:null),title:at(i)("map.crs-control.title")}),{default:Ce(()=>[kt("div",Pj,[kt("div",kj,[(Ct(!0),le(Mr,null,Eo(A.value,B=>(Ct(),$e(at(DA),{key:B.epsg,selected:!1},{header:Ce(()=>[kt("div",Lj,[kt("div",Oj,Mn(B.name),1),kt("div",Rj,[B.default?mn("",!0):(Ct(),le("button",{key:0,class:"clickable",onClick:oo(U=>L(B),["stop"])},[Jt(at(nr),{size:"16",type:"mdi",path:E.delete},null,8,["path"])],8,Dj))])])]),default:Ce(()=>[kt("div",zj,[kt("div",null,[Jt(at(ua),{readonly:B.default,modelValue:B.name,"onUpdate:modelValue":U=>B.name=U,label:at(i)("map.crs-control.field.name")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),kt("div",null,[Jt(at(ua),{readonly:B.default,modelValue:B.epsg,"onUpdate:modelValue":U=>B.epsg=U,label:at(i)("map.crs-control.field.epsg")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),B.default?mn("",!0):(Ct(),le("div",Bj,[Jt(at(ua),{modelValue:B.proj4js,"onUpdate:modelValue":U=>B.proj4js=U,label:at(i)("map.crs-control.field.proj4js")},null,8,["modelValue","onUpdate:modelValue","label"])])),B.default?mn("",!0):(Ct(),le("div",Fj,[Jt(at(zy),{modelValue:B.unit,"onUpdate:modelValue":U=>B.unit=U,label:at(i)("map.crs-control.field.unit"),items:w},null,8,["modelValue","onUpdate:modelValue","label"])]))])]),_:2},1024))),128))]),kt("div",Nj,[kt("button",{class:"layer-item__button clickable",onClick:F[0]||(F[0]=oo(B=>k(),["stop"]))},[Jt(at(nr),{size:"16",type:"mdi",path:E.plus},null,8,["path"])])])])]),_:2},1040,["show","title"])):mn("",!0)]),default:Ce(()=>[Zn(z.$slots,"default",{},void 0,!0)]),_:3},16))}}),Vj=Yn(Uj,[["__scopeId","data-v-58016c9c"]]),jj=_r({__name:"FullScreenControl",props:{...qa,type:{type:String,default:"body"}},setup(t){const e={fullscreen:rD,exitFullscreen:iD},n=t,{callMap:a,mapId:s,moduleContainerProps:l}=bo(n),{trans:i,setLocaleDefault:f}=Ka(s.value);f({map:{action:{"fullscreen-control-enter":"Enter fullscreen","fullscreen-control-exit":"Exit fullscreen"}}});const{isFullscreen:m,enter:y,exit:x,toggle:A}=DO(n.type=="body"?document.querySelector("body"):w());function w(E){return a(L=>{if(E||(E=L.getContainer()),E.classList.contains("map-container")||E.tagName==="BODY")return E;E=w(E.parentElement)}),E}return(E,L)=>(Ct(),$e(ss,Za(ka(at(l))),{btn:Ce(()=>[Jt(yo,{icon:"",title:at(m)?at(i)("map.action.fullscreen-control-exit"):at(i)("map.action.fullscreen-control-enter"),onClick:L[0]||(L[0]=k=>at(A)())},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:at(m)?e.exitFullscreen:e.fullscreen},null,8,["path"])]),_:1},8,["title"])]),default:Ce(()=>[Zn(E.$slots,"default")]),_:3},16))}}),Hj=_r({__name:"GeoLocateControl",props:{...qa},setup(t){const{coords:e,error:n,resume:a,pause:s}=zO({immediate:!1}),l=t,{mapId:i,callMap:f,moduleContainerProps:m}=bo(l),{trans:y,setLocaleDefault:x}=Ka(i.value);x({map:{action:{"geolocate-control-find-my-location":"Find my location","geolocate-control-location-not-available":"Location not available"}}});const A=on(!1),w=on(),E=on(0);let L,k,z=on(void 0),F=on(void 0);const D=hn(()=>n.value?XR:Sg),B=hn(()=>n.value?n.value.message||y.value("map.action.geolocate-control-location-not-available"):y.value("map.action.geolocate-control-find-my-location"));Wa(e,pt=>{pt.longitude==Number.POSITIVE_INFINITY||pt.latitude==Number.POSITIVE_INFINITY||(w.value=[pt.longitude,pt.latitude],q(),E.value=pt.accuracy)});async function U(){f(pt=>{if(!A.value){A.value=!0,a(),lu(()=>{w.value&&pt.flyTo({center:If(w),zoom:14})});return}if(rt(pt,If(e))){pt.flyTo({center:w.value,zoom:14});return}s(),A.value=!1,w.value=void 0,$()})}MO(()=>{$()});function $(){f(pt=>{pt.off("zoom",Y)}),z.value&&z.value.remove(),F.value&&F.value.remove()}PO(()=>{L||(L=G("div","mapboxgl-user-location"),L.classList.add("mapboxgl-user-location"),L.appendChild(G("div","mapboxgl-user-location-dot")),L.appendChild(G("div","mapboxgl-user-location-heading"))),k||(k=G("div","mapboxgl-user-location-accuracy-circle"))});function q(){z.value=new py.Marker({element:L,rotationAlignment:"map",pitchAlignment:"map"}),F.value=new py.Marker({element:k,pitchAlignment:"map"}),f(pt=>{pt.on("zoom",Y),w.value&&(z.value&&z.value.setLngLat(w.value).addTo(pt),F.value&&F.value.setLngLat(w.value).addTo(pt)),tt(pt)})}function tt(pt){const Q=pt.getContainer().getBoundingClientRect().height/2,ot=pt.unproject([0,Q]),Z=pt.unproject([100,Q]),Kt=ot.distanceTo(Z)/100,Ft=Math.ceil(2*E.value/Kt);k.style.width=`${Ft}px`,k.style.height=`${Ft}px`}function Y(pt){tt(pt.target)}const G=function(pt,Q,ot){const Z=window.document.createElement(pt);return Q!==void 0&&(Z.className=Q),Z};function rt(pt,Q){const ot=pt.getBounds();return ot&&(Q.longitude<ot.getWest()||Q.longitude>ot.getEast()||Q.latitude<ot.getSouth()||Q.latitude>ot.getNorth())}return(pt,Q)=>(Ct(),$e(ss,Za(ka(at(m))),{btn:Ce(()=>[Jt(yo,{disabled:!!at(n),icon:D.value,tooltip:B.value,active:A.value,onClick:oo(U,["stop"])},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:D.value},null,8,["path"])]),_:1},8,["disabled","icon","tooltip","active"])]),default:Ce(()=>[Zn(pt.$slots,"default")]),_:3},16))}}),Gj={class:"setting-container"},Wj={class:"setting-field-container"},Zj={class:"setting-center-container"},$j={__name:"GotoControl",props:{...qa},setup(t){const e=t,[n,a]=Rd(!1),{callMap:s,mapId:l,moduleContainerProps:i}=bo(e),{trans:f,setLocaleDefault:m}=Ka(l.value);m({map:{"goto-control":{title:"Go to",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Go to"}}}});function y(){a(!n.value),n.value&&s(w=>{x.value.zoom=w.getZoom(),x.value.center=[w.getCenter().lng.toFixed(6),w.getCenter().lat.toFixed(6)],x.value.sprite=w.getStyle().sprite,x.value.glyphs=w.getStyle().glyphs})}const x=on({zoom:null,center:null,sprite:null,glyphs:null}),A=()=>{s(w=>{x.value.zoom&&w.setZoom(x.value.zoom),x.value.center&&w.setCenter(x.value.center)})};return(w,E)=>(Ct(),$e(ss,Za(ka(at(i))),{btn:Ce(()=>[Jt(yo,{onClick:E[0]||(E[0]=oo(L=>y(),["stop"])),tooltip:at(f)("map.goto-control.title")},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:at(Nw)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Ce(L=>[at(n)?(Ct(),$e(at(jd),li({key:0,height:300,width:400},L,{show:at(n),"onUpdate:show":E[5]||(E[5]=k=>Jo(n)?n.value=k:null),title:at(f)("map.goto-control.title")}),{default:Ce(()=>[kt("div",Gj,[kt("div",Wj,[kt("div",null,[kt("label",null,Mn(at(f)("map.goto-control.field.center")),1),kt("div",Zj,[Jt(at(ua),{modelValue:x.value.center[0],"onUpdate:modelValue":E[1]||(E[1]=k=>x.value.center[0]=k),type:"number",step:"0.0000001"},null,8,["modelValue"]),Jt(at(ua),{modelValue:x.value.center[1],"onUpdate:modelValue":E[2]||(E[2]=k=>x.value.center[1]=k),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),kt("div",null,[Jt(at(ua),{label:at(f)("map.goto-control.field.zoom"),modelValue:x.value.zoom,"onUpdate:modelValue":E[3]||(E[3]=k=>x.value.zoom=k),type:"number",min:"0",max:"24"},null,8,["label","modelValue"])])]),Jt(at(Mh),{class:"btn-container",onClick:E[4]||(E[4]=k=>A())},{default:Ce(()=>[_a(Mn(at(f)("map.goto-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):mn("",!0)]),default:Ce(()=>[Zn(w.$slots,"default")]),_:3},16))}},Kj=_r({__name:"HomeControl",props:{...qa,zoom:Number,center:Array},setup(t){const e=t,n=on({lat:0,lng:0}),a=on(e.zoom||0),{callMap:s,mapId:l,moduleContainerProps:i}=bo(e,x),{trans:f,setLocaleDefault:m}=Ka(l.value);m({map:{home:{title:"Default view"}}});function y(){s(A=>{A.setZoom(a.value),A.setCenter(n.value)})}function x(A){e.zoom!=null?a.value=e.zoom:a.value=A.getZoom(),e.center!=null?(n.value.lat=e.center[1],n.value.lng=e.center[0]):n.value=A.getCenter()}return(A,w)=>(Ct(),$e(ss,Za(ka(at(i))),{btn:Ce(()=>[Jt(yo,{onClick:y,tooltip:at(f)("map.home.title")},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:at(aD)},null,8,["path"])]),_:1},8,["tooltip"])]),default:Ce(()=>[Zn(A.$slots,"default")]),_:3},16))}}),qj={class:"button-container mouse-coordinates-container"},Yj={key:0,class:"mouse-coordinates-part zoom-part"},Xj={class:"mouse-coordinates-zoom"},Qj={title:"Current Zoom",class:"icon"},Jj={style:{"margin-left":"4px"}},tH={key:1,class:"mouse-coordinates-part coordinates-part"},eH={class:"mouse-coordinates-point"},nH=["innerHTML"],rH=["title"],iH={key:2,class:"mouse-coordinates-part crs-part"},oH={class:"mouse-coordinates-point"},aH=["value"],sH={key:3,class:"mouse-coordinates-part scale-part"},lH=_r({__name:"MouseCoordinatesControl",props:{...qa,hideZoom:Boolean,hideCrsSelect:Boolean,hideScale:Boolean,hideCoordinates:Boolean},setup(t){const{getCrsItems:e,setCrs:n,getCrs:a,getCrsItem:s}=Ww,l=t,i={icon:Nw,zoom:uD,change:ZR},f=on(),m=on(""),y=on({latitude:0,longitude:0}),x=on(0),A=on(!1),{callMap:w,mapId:E,moduleContainerProps:L}=bo(l,$,q),{format:k}=ET(E.value),z=hn(()=>e(E.value)),F=on(a(E.value)),D=on(s(E.value)),B=hn({get(){return F.value},set(Ft){return F.value=Ft,D.value=z.value.find(Tt=>Tt.epsg==Ft),n(E.value,Ft)}}),U=hn(()=>{var Ft;return((Ft=D.value)==null?void 0:Ft.unit)==="degree"});function $(Ft){x.value=+Ft.getZoom().toFixed(2),Ft.on("zoomend",pt),Ft.on("mousemove",Y),Ft.on("move",tt),x.value=+Ft.getZoom().toFixed(2);let Tt=Ft.getCenter();y.value.latitude=Tt.lat,y.value.longitude=Tt.lng,rt(),lu(()=>{Q(Ft,f.value)})}function q(Ft){Ft.off("zoomend",pt),Ft.off("mousemove",Y),Ft.off("move",tt)}function tt(){w(Ft=>{Q(Ft,f.value)})}const Y=Fy.debounce(function(Ft){let Tt=[Ft.lngLat.lng,Ft.lngLat.lat];y.value.latitude=Tt[1],y.value.longitude=Tt[0],rt()},15);function G(){A.value=!A.value,rt()}function rt(){const Ft=k(y.value,A.value);m.value=Ft.longitude+", &nbsp;"+Ft.latitude}function pt(){w(Ft=>{x.value=+Ft.getZoom().toFixed(2)})}function Q(Ft,Tt){if(l.hideScale)return;const ie=100,ue=Ft.getContainer().clientHeight/2,je=Ft.unproject([0,ue]),jt=Ft.unproject([ie,ue]),Ut=je.distanceTo(jt);Ut>=1e3?ot(Tt,Ut/1e3,"km"):ot(Tt,Ut,"m")}function ot(Ft,Tt,ie){const ue=Kt(Tt);Ft&&(Ft.innerHTML=`${ue}&nbsp;${ie}`)}function Z(Ft){const Tt=Math.pow(10,Math.ceil(-Math.log(Ft)/Math.LN10));return Math.round(Ft*Tt)/Tt}function Kt(Ft){const Tt=Math.pow(10,`${Math.floor(Ft)}`.length-1);let ie=Ft/Tt;return ie=ie>=10?10:ie>=5?5:ie>=3?3:ie>=2?2:ie>=1?1:Z(ie),Tt*ie}return(Ft,Tt)=>(Ct(),$e(ss,Za(ka(at(L))),{btn:Ce(()=>[kt("div",qj,[t.hideZoom?mn("",!0):(Ct(),le("div",Yj,[kt("div",Xj,[kt("span",Qj,[Jt(at(nr),{size:16,type:"mdi",path:i.zoom},null,8,["path"])]),kt("div",Jj,Mn(x.value),1)])])),t.hideCoordinates?mn("",!0):(Ct(),le("div",tH,[kt("div",eH,[kt("div",{style:Ni([{"margin-left":"4px"},{"min-width":A.value?"220px":"100px"}]),class:"selectable",innerHTML:m.value},null,12,nH),U.value?(Ct(),le("i",{key:0,title:A.value?"DMS <=> Latitude, Longitude":"Latitude, Longitude <=> DMS",style:{"margin-left":"4px"},onClick:G,class:"icon icon-clickable"},[Jt(at(nr),{size:16,type:"mdi",path:i.change},null,8,["path"])],8,rH)):mn("",!0)])])),t.hideCrsSelect?mn("",!0):(Ct(),le("div",iH,[kt("div",oH,[Du(kt("select",{"onUpdate:modelValue":Tt[0]||(Tt[0]=ie=>B.value=ie),class:"crs-select",style:{width:"70px"}},[(Ct(!0),le(Mr,null,Eo(z.value,ie=>(Ct(),le("option",{value:ie.epsg,key:ie.epsg},Mn(ie.name||ie.epsg),9,aH))),128))],512),[[V_,B.value]])])])),t.hideScale?mn("",!0):(Ct(),le("div",sH,[kt("div",{ref_key:"scale",ref:f,class:"scale-custom"},null,512)]))])]),_:1},16))}}),uH=Yn(lH,[["__scopeId","data-v-2471b70e"]]),cH={class:"setting-container"},hH={class:"setting-field-container"},fH={class:"setting-center-container"},dH={__name:"SettingControl",props:{...qa},setup(t){const e=t,[n,a]=Rd(!1),{callMap:s,mapId:l,moduleContainerProps:i}=bo(e),{trans:f,setLocaleDefault:m}=Ka(l.value);m({map:{"setting-control":{title:"Setting",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Apply"}}}});function y(){a(!n.value),n.value&&s(w=>{x.value.zoom=w.getZoom(),x.value.center=[w.getCenter().lng.toFixed(6),w.getCenter().lat.toFixed(6)],x.value.sprite=w.getStyle().sprite,x.value.glyphs=w.getStyle().glyphs})}const x=on({zoom:null,center:null,sprite:null,glyphs:null}),A=()=>{s(w=>{x.value.zoom&&w.setZoom(x.value.zoom),x.value.center&&w.setCenter(x.value.center);const E=w.getStyle();x.value.sprite&&(E.sprite=x.value.sprite),x.value.glyphs&&(E.glyphs=x.value.glyphs),w.setStyle(E)})};return(w,E)=>(Ct(),$e(ss,Za(ka(at(i))),{btn:Ce(()=>[Jt(yo,{onClick:E[0]||(E[0]=oo(L=>y(),["stop"])),tooltip:at(f)("map.setting-control.title")},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:at($R)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Ce(L=>[at(n)?(Ct(),$e(at(jd),li({key:0,height:400,width:400},L,{show:at(n),"onUpdate:show":E[7]||(E[7]=k=>Jo(n)?n.value=k:null),title:at(f)("map.setting-control.title")}),{default:Ce(()=>[kt("div",cH,[kt("div",hH,[kt("div",null,[kt("label",null,Mn(at(f)("map.setting-control.field.center")),1),kt("div",fH,[Jt(at(ua),{modelValue:x.value.center[0],"onUpdate:modelValue":E[1]||(E[1]=k=>x.value.center[0]=k),type:"number",step:"0.0000001"},null,8,["modelValue"]),Jt(at(ua),{modelValue:x.value.center[1],"onUpdate:modelValue":E[2]||(E[2]=k=>x.value.center[1]=k),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),kt("div",null,[Jt(at(ua),{label:at(f)("map.setting-control.field.zoom"),modelValue:x.value.zoom,"onUpdate:modelValue":E[3]||(E[3]=k=>x.value.zoom=k)},null,8,["label","modelValue"])]),kt("div",null,[Jt(at(ua),{label:at(f)("map.setting-control.field.sprite"),modelValue:x.value.sprite,"onUpdate:modelValue":E[4]||(E[4]=k=>x.value.sprite=k)},null,8,["label","modelValue"])]),kt("div",null,[Jt(at(ua),{label:at(f)("map.setting-control.field.glyphs"),modelValue:x.value.glyphs,"onUpdate:modelValue":E[5]||(E[5]=k=>x.value.glyphs=k)},null,8,["label","modelValue"])])]),Jt(at(Mh),{class:"btn-container",onClick:E[6]||(E[6]=k=>A())},{default:Ce(()=>[_a(Mn(at(f)("map.setting-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):mn("",!0)]),default:Ce(()=>[Zn(w.$slots,"default")]),_:3},16))}},pH=kt("g",{fill:"none","fill-rule":"evenodd"},[kt("path",{d:"M0 0h24v24H0z"}),kt("path",{d:"M12 3l4 8H8z",fill:"#f44336"}),kt("path",{d:"M12 21l-4-8h8z",fill:"#9E9E9E"})],-1),mH=[pH],gH={__name:"ZoomControl",props:{...qa,showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0}},setup(t){const e={plus:kf,minus:fD},n=t,a=on("rotate(0deg)"),{callMap:s,mapId:l,moduleContainerProps:i}=bo(n,x,A),{trans:f,setLocaleDefault:m}=Ka(l.value);m({map:{action:{"navigation-control-zoom-in":"Zoom in","navigation-control-zoom-out":"Zoom out","navigation-control-reset-bearing":"Reset bearing to north"}}});let y=null;function x(z){y=k.bind(null,z),z.on("rotate",y)}function A(z){z.off("rotate",y)}function w(z){s(F=>{F.zoomIn({},{originalEvent:z})})}function E(z){s(F=>{F.zoomOut({},{originalEvent:z})})}function L(){s(z=>{z.easeTo({bearing:0,pitch:0})})}function k(z){const F=z.getBearing()*-1;a.value=`rotate(${F}deg)`}return(z,F)=>(Ct(),$e(ss,Za(ka(at(i))),{btn:Ce(()=>[Jt(dy,null,{default:Ce(()=>[t.showCompass?(Ct(),$e(yo,{key:0,onClick:L,title:at(f)("map.action.navigation-control-reset-bearing")},{default:Ce(()=>[(Ct(),le("svg",{height:"22",style:Ni({transform:a.value}),viewBox:"0 0 24 24",width:"22",xmlns:"http://www.w3.org/2000/svg"},mH,4))]),_:1},8,["title"])):mn("",!0),t.showZoom?(Ct(),$e(yo,{key:1,onClick:w,title:at(f)("map.action.navigation-control-zoom-in")},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:e.plus},null,8,["path"])]),_:1},8,["title"])):mn("",!0),t.showZoom?(Ct(),$e(yo,{key:2,onClick:E,title:at(f)("map.action.navigation-control-zoom-out")},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:e.minus},null,8,["path"])]),_:1},8,["title"])):mn("",!0)]),_:1})]),default:Ce(()=>[Zn(z.$slots,"default")]),_:3},16))}};function B1(){const t=Math.floor(Math.random()*LI.length);return LI[t]}const LI=["#0E9F6E","#84A2AE","#BAC9CF","#D7E3E8","#EBF1F3","#da251d","#ffbd99","#ffa07f","#ff8365","#ff664c","#fb4834","#b90004","#9a0000","#7c0000","#600000","#25CCF7","#FD7272","#54a0ff","#00d2d3","#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d","#55efc4","#81ecec","#74b9ff","#a29bfe","#dfe6e9","#00b894","#00cec9","#0984e3","#6c5ce7","#ffeaa7","#fab1a0","#ff7675","#fd79a8","#fdcb6e","#e17055","#d63031","#feca57","#5f27cd","#54a0ff","#01a3a4"];var nl=63710088e-1,e2={centimeters:nl*100,centimetres:nl*100,degrees:nl/111325,feet:nl*3.28084,inches:nl*39.37,kilometers:nl/1e3,kilometres:nl/1e3,meters:nl,metres:nl,miles:nl/1609.344,millimeters:nl*1e3,millimetres:nl*1e3,nauticalmiles:nl/1852,radians:1,yards:nl*1.0936},vH={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/nl,yards:1.0936133},WA={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function _c(t,e,n){n===void 0&&(n={});var a={type:"Feature"};return(n.id===0||n.id)&&(a.id=n.id),n.bbox&&(a.bbox=n.bbox),a.properties=e||{},a.geometry=t,a}function yH(t,e,n){switch(t){case"Point":return is(e).geometry;case"LineString":return Ds(e).geometry;case"Polygon":return kg(e).geometry;case"MultiPoint":return kT(e).geometry;case"MultiLineString":return n2(e).geometry;case"MultiPolygon":return LT(e).geometry;default:throw new Error(t+" is invalid")}}function is(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!m_(t[0])||!m_(t[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:t};return _c(a,e,n)}function _H(t,e,n){return n===void 0&&(n={}),Bd(t.map(function(a){return is(a,e)}),n)}function kg(t,e,n){n===void 0&&(n={});for(var a=0,s=t;a<s.length;a++){var l=s[a];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var i=0;i<l[l.length-1].length;i++)if(l[l.length-1][i]!==l[0][i])throw new Error("First and last Position are not equivalent.")}var f={type:"Polygon",coordinates:t};return _c(f,e,n)}function bH(t,e,n){return n===void 0&&(n={}),Bd(t.map(function(a){return kg(a,e)}),n)}function Ds(t,e,n){if(n===void 0&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var a={type:"LineString",coordinates:t};return _c(a,e,n)}function xH(t,e,n){return n===void 0&&(n={}),Bd(t.map(function(a){return Ds(a,e)}),n)}function Bd(t,e){e===void 0&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function n2(t,e,n){n===void 0&&(n={});var a={type:"MultiLineString",coordinates:t};return _c(a,e,n)}function kT(t,e,n){n===void 0&&(n={});var a={type:"MultiPoint",coordinates:t};return _c(a,e,n)}function LT(t,e,n){n===void 0&&(n={});var a={type:"MultiPolygon",coordinates:t};return _c(a,e,n)}function AH(t,e,n){n===void 0&&(n={});var a={type:"GeometryCollection",geometries:t};return _c(a,e,n)}function wH(t,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function r2(t,e){e===void 0&&(e="kilometers");var n=e2[e];if(!n)throw new Error(e+" units is invalid");return t*n}function i2(t,e){e===void 0&&(e="kilometers");var n=e2[e];if(!n)throw new Error(e+" units is invalid");return t/n}function CH(t,e){return o2(i2(t,e))}function OT(t){var e=t%360;return e<0&&(e+=360),e}function o2(t){var e=t%(2*Math.PI);return e*180/Math.PI}function _f(t){var e=t%360;return e*Math.PI/180}function IH(t,e,n){if(e===void 0&&(e="kilometers"),n===void 0&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return r2(i2(t,e),n)}function EH(t,e,n){if(e===void 0&&(e="meters"),n===void 0&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var a=WA[e];if(!a)throw new Error("invalid original units");var s=WA[n];if(!s)throw new Error("invalid final units");return t/a*s}function m_(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function a2(t){return!!t&&t.constructor===Object}function SH(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(t.length!==4&&t.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(e){if(!m_(e))throw new Error("bbox must only contain numbers")})}function MH(t){if(!t)throw new Error("id is required");if(["string","number"].indexOf(typeof t)===-1)throw new Error("id must be a number or a string")}const TH=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:WA,bearingToAzimuth:OT,convertArea:EH,convertLength:IH,degreesToRadians:_f,earthRadius:nl,factors:e2,feature:_c,featureCollection:Bd,geometry:yH,geometryCollection:AH,isNumber:m_,isObject:a2,lengthToDegrees:CH,lengthToRadians:i2,lineString:Ds,lineStrings:xH,multiLineString:n2,multiPoint:kT,multiPolygon:LT,point:is,points:_H,polygon:kg,polygons:bH,radiansToDegrees:o2,radiansToLength:r2,round:wH,unitsFactors:vH,validateBBox:SH,validateId:MH},Symbol.toStringTag,{value:"Module"}));function jp(t,e,n){if(t!==null)for(var a,s,l,i,f,m,y,x=0,A=0,w,E=t.type,L=E==="FeatureCollection",k=E==="Feature",z=L?t.features.length:1,F=0;F<z;F++){y=L?t.features[F].geometry:k?t.geometry:t,w=y?y.type==="GeometryCollection":!1,f=w?y.geometries.length:1;for(var D=0;D<f;D++){var B=0,U=0;if(i=w?y.geometries[D]:y,i!==null){m=i.coordinates;var $=i.type;switch(x=n&&($==="Polygon"||$==="MultiPolygon")?1:0,$){case null:break;case"Point":if(e(m,A,F,B,U)===!1)return!1;A++,B++;break;case"LineString":case"MultiPoint":for(a=0;a<m.length;a++){if(e(m[a],A,F,B,U)===!1)return!1;A++,$==="MultiPoint"&&B++}$==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(a=0;a<m.length;a++){for(s=0;s<m[a].length-x;s++){if(e(m[a][s],A,F,B,U)===!1)return!1;A++}$==="MultiLineString"&&B++,$==="Polygon"&&U++}$==="Polygon"&&B++;break;case"MultiPolygon":for(a=0;a<m.length;a++){for(U=0,s=0;s<m[a].length;s++){for(l=0;l<m[a][s].length-x;l++){if(e(m[a][s][l],A,F,B,U)===!1)return!1;A++}U++}B++}break;case"GeometryCollection":for(a=0;a<i.geometries.length;a++)if(jp(i.geometries[a],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function PH(t,e,n,a){var s=n;return jp(t,function(l,i,f,m,y){i===0&&n===void 0?s=l:s=e(s,l,i,f,m,y)},a),s}function RT(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&e(t.features[n].properties,n)!==!1;n++);break;case"Feature":e(t.properties,0);break}}function kH(t,e,n){var a=n;return RT(t,function(s,l){l===0&&n===void 0?a=s:a=e(a,s,l)}),a}function g_(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var n=0;n<t.features.length&&e(t.features[n],n)!==!1;n++);}function LH(t,e,n){var a=n;return g_(t,function(s,l){l===0&&n===void 0?a=s:a=e(a,s,l)}),a}function OH(t){var e=[];return jp(t,function(n){e.push(n)}),e}function s2(t,e){var n,a,s,l,i,f,m,y,x,A,w=0,E=t.type==="FeatureCollection",L=t.type==="Feature",k=E?t.features.length:1;for(n=0;n<k;n++){for(f=E?t.features[n].geometry:L?t.geometry:t,y=E?t.features[n].properties:L?t.properties:{},x=E?t.features[n].bbox:L?t.bbox:void 0,A=E?t.features[n].id:L?t.id:void 0,m=f?f.type==="GeometryCollection":!1,i=m?f.geometries.length:1,s=0;s<i;s++){if(l=m?f.geometries[s]:f,l===null){if(e(null,w,y,x,A)===!1)return!1;continue}switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(l,w,y,x,A)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<l.geometries.length;a++)if(e(l.geometries[a],w,y,x,A)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}w++}}function DT(t,e,n){var a=n;return s2(t,function(s,l,i,f,m){l===0&&n===void 0?a=s:a=e(a,s,l,i,f,m)}),a}function Sf(t,e){s2(t,function(n,a,s,l,i){var f=n===null?null:n.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return e(_c(n,s,{bbox:l,id:i}),a,0)===!1?!1:void 0}var m;switch(f){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon";break}for(var y=0;y<n.coordinates.length;y++){var x=n.coordinates[y],A={type:m,coordinates:x};if(e(_c(A,s),a,y)===!1)return!1}})}function RH(t,e,n){var a=n;return Sf(t,function(s,l,i){l===0&&i===0&&n===void 0?a=s:a=e(a,s,l,i)}),a}function zT(t,e){Sf(t,function(n,a,s){var l=0;if(n.geometry){var i=n.geometry.type;if(!(i==="Point"||i==="MultiPoint")){var f,m=0,y=0,x=0;if(jp(n,function(A,w,E,L,k){if(f===void 0||a>m||L>y||k>x){f=A,m=a,y=L,x=k,l=0;return}var z=Ds([f,A],n.properties);if(e(z,a,s,k,l)===!1)return!1;l++,f=A})===!1)return!1}}})}function BT(t,e,n){var a=n,s=!1;return zT(t,function(l,i,f,m,y){s===!1&&n===void 0?a=l:a=e(a,l,i,f,m,y),s=!0}),a}function FT(t,e){if(!t)throw new Error("geojson is required");Sf(t,function(n,a,s){if(n.geometry!==null){var l=n.geometry.type,i=n.geometry.coordinates;switch(l){case"LineString":if(e(n,a,s,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<i.length;f++)if(e(Ds(i[f],n.properties),a,s,f)===!1)return!1;break}}})}function DH(t,e,n){var a=n;return FT(t,function(s,l,i,f){l===0&&n===void 0?a=s:a=e(a,s,l,i,f)}),a}function zH(t,e){if(e=e||{},!a2(e))throw new Error("options is invalid");var n=e.featureIndex||0,a=e.multiFeatureIndex||0,s=e.geometryIndex||0,l=e.segmentIndex||0,i=e.properties,f;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),i=i||t.features[n].properties,f=t.features[n].geometry;break;case"Feature":i=i||t.properties,f=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=t;break;default:throw new Error("geojson is invalid")}if(f===null)return null;var m=f.coordinates;switch(f.type){case"Point":case"MultiPoint":return null;case"LineString":return l<0&&(l=m.length+l-1),Ds([m[l],m[l+1]],i,e);case"Polygon":return s<0&&(s=m.length+s),l<0&&(l=m[s].length+l-1),Ds([m[s][l],m[s][l+1]],i,e);case"MultiLineString":return a<0&&(a=m.length+a),l<0&&(l=m[a].length+l-1),Ds([m[a][l],m[a][l+1]],i,e);case"MultiPolygon":return a<0&&(a=m.length+a),s<0&&(s=m[a].length+s),l<0&&(l=m[a][s].length-l-1),Ds([m[a][s][l],m[a][s][l+1]],i,e)}throw new Error("geojson is invalid")}function BH(t,e){if(e=e||{},!a2(e))throw new Error("options is invalid");var n=e.featureIndex||0,a=e.multiFeatureIndex||0,s=e.geometryIndex||0,l=e.coordIndex||0,i=e.properties,f;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),i=i||t.features[n].properties,f=t.features[n].geometry;break;case"Feature":i=i||t.properties,f=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=t;break;default:throw new Error("geojson is invalid")}if(f===null)return null;var m=f.coordinates;switch(f.type){case"Point":return is(m,i,e);case"MultiPoint":return a<0&&(a=m.length+a),is(m[a],i,e);case"LineString":return l<0&&(l=m.length+l),is(m[l],i,e);case"Polygon":return s<0&&(s=m.length+s),l<0&&(l=m[s].length+l),is(m[s][l],i,e);case"MultiLineString":return a<0&&(a=m.length+a),l<0&&(l=m[a].length+l),is(m[a][l],i,e);case"MultiPolygon":return a<0&&(a=m.length+a),s<0&&(s=m[a].length+s),l<0&&(l=m[a][s].length-l),is(m[a][s][l],i,e)}throw new Error("geojson is invalid")}const FH=Object.freeze(Object.defineProperty({__proto__:null,coordAll:OH,coordEach:jp,coordReduce:PH,featureEach:g_,featureReduce:LH,findPoint:BH,findSegment:zH,flattenEach:Sf,flattenReduce:RH,geomEach:s2,geomReduce:DT,lineEach:FT,lineReduce:DH,propEach:RT,propReduce:kH,segmentEach:zT,segmentReduce:BT},Symbol.toStringTag,{value:"Module"}));function Fd(t){var e=[1/0,1/0,-1/0,-1/0];return jp(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}Fd.default=Fd;const NH=Object.freeze(Object.defineProperty({__proto__:null,default:Fd},Symbol.toStringTag,{value:"Module"}));function yy(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function _y(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function db(t){return t.type==="Feature"?t.geometry:t}function by(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var a=yy(t),s=db(e),l=s.type,i=e.bbox,f=s.coordinates;if(i&&UH(a,i)===!1)return!1;l==="Polygon"&&(f=[f]);for(var m=!1,y=0;y<f.length&&!m;y++)if(OI(a,f[y][0],n.ignoreBoundary)){for(var x=!1,A=1;A<f[y].length&&!x;)OI(a,f[y][A],!n.ignoreBoundary)&&(x=!0),A++;x||(m=!0)}return m}function OI(t,e,n){var a=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var s=0,l=e.length-1;s<e.length;l=s++){var i=e[s][0],f=e[s][1],m=e[l][0],y=e[l][1],x=t[1]*(i-m)+f*(m-t[0])+y*(t[0]-i)===0&&(i-t[0])*(m-t[0])<=0&&(f-t[1])*(y-t[1])<=0;if(x)return!n;var A=f>t[1]!=y>t[1]&&t[0]<(m-i)*(t[1]-f)/(y-f)+i;A&&(a=!a)}return a}function UH(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function VH(t,e,n){n===void 0&&(n={});var a=yy(t),s=yy(e),l=_f(s[1]-a[1]),i=_f(s[0]-a[0]),f=_f(a[1]),m=_f(s[1]),y=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(f)*Math.cos(m);return r2(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)),n.units)}function NT(t,e,n){if(n===void 0&&(n={}),n.final===!0)return jH(t,e);var a=yy(t),s=yy(e),l=_f(a[0]),i=_f(s[0]),f=_f(a[1]),m=_f(s[1]),y=Math.sin(i-l)*Math.cos(m),x=Math.cos(f)*Math.sin(m)-Math.sin(f)*Math.cos(m)*Math.cos(i-l);return o2(Math.atan2(y,x))}function jH(t,e){var n=NT(e,t);return n=(n+180)%360,n}function HH(t,e){e===void 0&&(e={});var n=Fd(t),a=(n[0]+n[2])/2,s=(n[1]+n[3])/2;return is([a,s],e.properties,e)}function GH(t,e){e===void 0&&(e={});var n=0,a=0,s=0;return jp(t,function(l){n+=l[0],a+=l[1],s++},!0),is([n/s,a/s],e.properties)}function RI(t){if(!t)throw new Error("geojson is required");var e=[];return Sf(t,function(n){WH(n,e)}),Bd(e)}function WH(t,e){var n=[],a=t.geometry;if(a!==null){switch(a.type){case"Polygon":n=_y(a);break;case"LineString":n=[_y(a)]}n.forEach(function(s){var l=ZH(s,t.properties);l.forEach(function(i){i.id=e.length,e.push(i)})})}}function ZH(t,e){var n=[];return t.reduce(function(a,s){var l=Ds([a,s],e);return l.bbox=$H(a,s),n.push(l),s}),n}function $H(t,e){var n=t[0],a=t[1],s=e[0],l=e[1],i=n<s?n:s,f=a<l?a:l,m=n>s?n:s,y=a>l?a:l;return[i,f,m,y]}var l2={exports:{}},UT={exports:{}};(function(t,e){(function(n,a){t.exports=a()})(ca,function(){function n(D,B,U,$,q){(function tt(Y,G,rt,pt,Q){for(;pt>rt;){if(pt-rt>600){var ot=pt-rt+1,Z=G-rt+1,Kt=Math.log(ot),Ft=.5*Math.exp(2*Kt/3),Tt=.5*Math.sqrt(Kt*Ft*(ot-Ft)/ot)*(Z-ot/2<0?-1:1),ie=Math.max(rt,Math.floor(G-Z*Ft/ot+Tt)),ue=Math.min(pt,Math.floor(G+(ot-Z)*Ft/ot+Tt));tt(Y,G,ie,ue,Q)}var je=Y[G],jt=rt,Ut=pt;for(a(Y,rt,G),Q(Y[pt],je)>0&&a(Y,rt,pt);jt<Ut;){for(a(Y,jt,Ut),jt++,Ut--;Q(Y[jt],je)<0;)jt++;for(;Q(Y[Ut],je)>0;)Ut--}Q(Y[rt],je)===0?a(Y,rt,Ut):a(Y,++Ut,pt),Ut<=G&&(rt=Ut+1),G<=Ut&&(pt=Ut-1)}})(D,B,U||0,$||D.length-1,q||s)}function a(D,B,U){var $=D[B];D[B]=D[U],D[U]=$}function s(D,B){return D<B?-1:D>B?1:0}var l=function(D){D===void 0&&(D=9),this._maxEntries=Math.max(4,D),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(D,B,U){if(!U)return B.indexOf(D);for(var $=0;$<B.length;$++)if(U(D,B[$]))return $;return-1}function f(D,B){m(D,0,D.children.length,B,D)}function m(D,B,U,$,q){q||(q=z(null)),q.minX=1/0,q.minY=1/0,q.maxX=-1/0,q.maxY=-1/0;for(var tt=B;tt<U;tt++){var Y=D.children[tt];y(q,D.leaf?$(Y):Y)}return q}function y(D,B){return D.minX=Math.min(D.minX,B.minX),D.minY=Math.min(D.minY,B.minY),D.maxX=Math.max(D.maxX,B.maxX),D.maxY=Math.max(D.maxY,B.maxY),D}function x(D,B){return D.minX-B.minX}function A(D,B){return D.minY-B.minY}function w(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function E(D){return D.maxX-D.minX+(D.maxY-D.minY)}function L(D,B){return D.minX<=B.minX&&D.minY<=B.minY&&B.maxX<=D.maxX&&B.maxY<=D.maxY}function k(D,B){return B.minX<=D.maxX&&B.minY<=D.maxY&&B.maxX>=D.minX&&B.maxY>=D.minY}function z(D){return{children:D,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function F(D,B,U,$,q){for(var tt=[B,U];tt.length;)if(!((U=tt.pop())-(B=tt.pop())<=$)){var Y=B+Math.ceil((U-B)/$/2)*$;n(D,Y,B,U,q),tt.push(B,Y,Y,U)}}return l.prototype.all=function(){return this._all(this.data,[])},l.prototype.search=function(D){var B=this.data,U=[];if(!k(D,B))return U;for(var $=this.toBBox,q=[];B;){for(var tt=0;tt<B.children.length;tt++){var Y=B.children[tt],G=B.leaf?$(Y):Y;k(D,G)&&(B.leaf?U.push(Y):L(D,G)?this._all(Y,U):q.push(Y))}B=q.pop()}return U},l.prototype.collides=function(D){var B=this.data;if(!k(D,B))return!1;for(var U=[];B;){for(var $=0;$<B.children.length;$++){var q=B.children[$],tt=B.leaf?this.toBBox(q):q;if(k(D,tt)){if(B.leaf||L(D,tt))return!0;U.push(q)}}B=U.pop()}return!1},l.prototype.load=function(D){if(!D||!D.length)return this;if(D.length<this._minEntries){for(var B=0;B<D.length;B++)this.insert(D[B]);return this}var U=this._build(D.slice(),0,D.length-1,0);if(this.data.children.length)if(this.data.height===U.height)this._splitRoot(this.data,U);else{if(this.data.height<U.height){var $=this.data;this.data=U,U=$}this._insert(U,this.data.height-U.height-1,!0)}else this.data=U;return this},l.prototype.insert=function(D){return D&&this._insert(D,this.data.height-1),this},l.prototype.clear=function(){return this.data=z([]),this},l.prototype.remove=function(D,B){if(!D)return this;for(var U,$,q,tt=this.data,Y=this.toBBox(D),G=[],rt=[];tt||G.length;){if(tt||(tt=G.pop(),$=G[G.length-1],U=rt.pop(),q=!0),tt.leaf){var pt=i(D,tt.children,B);if(pt!==-1)return tt.children.splice(pt,1),G.push(tt),this._condense(G),this}q||tt.leaf||!L(tt,Y)?$?(U++,tt=$.children[U],q=!1):tt=null:(G.push(tt),rt.push(U),U=0,$=tt,tt=tt.children[0])}return this},l.prototype.toBBox=function(D){return D},l.prototype.compareMinX=function(D,B){return D.minX-B.minX},l.prototype.compareMinY=function(D,B){return D.minY-B.minY},l.prototype.toJSON=function(){return this.data},l.prototype.fromJSON=function(D){return this.data=D,this},l.prototype._all=function(D,B){for(var U=[];D;)D.leaf?B.push.apply(B,D.children):U.push.apply(U,D.children),D=U.pop();return B},l.prototype._build=function(D,B,U,$){var q,tt=U-B+1,Y=this._maxEntries;if(tt<=Y)return f(q=z(D.slice(B,U+1)),this.toBBox),q;$||($=Math.ceil(Math.log(tt)/Math.log(Y)),Y=Math.ceil(tt/Math.pow(Y,$-1))),(q=z([])).leaf=!1,q.height=$;var G=Math.ceil(tt/Y),rt=G*Math.ceil(Math.sqrt(Y));F(D,B,U,rt,this.compareMinX);for(var pt=B;pt<=U;pt+=rt){var Q=Math.min(pt+rt-1,U);F(D,pt,Q,G,this.compareMinY);for(var ot=pt;ot<=Q;ot+=G){var Z=Math.min(ot+G-1,Q);q.children.push(this._build(D,ot,Z,$-1))}}return f(q,this.toBBox),q},l.prototype._chooseSubtree=function(D,B,U,$){for(;$.push(B),!B.leaf&&$.length-1!==U;){for(var q=1/0,tt=1/0,Y=void 0,G=0;G<B.children.length;G++){var rt=B.children[G],pt=w(rt),Q=(ot=D,Z=rt,(Math.max(Z.maxX,ot.maxX)-Math.min(Z.minX,ot.minX))*(Math.max(Z.maxY,ot.maxY)-Math.min(Z.minY,ot.minY))-pt);Q<tt?(tt=Q,q=pt<q?pt:q,Y=rt):Q===tt&&pt<q&&(q=pt,Y=rt)}B=Y||B.children[0]}var ot,Z;return B},l.prototype._insert=function(D,B,U){var $=U?D:this.toBBox(D),q=[],tt=this._chooseSubtree($,this.data,B,q);for(tt.children.push(D),y(tt,$);B>=0&&q[B].children.length>this._maxEntries;)this._split(q,B),B--;this._adjustParentBBoxes($,q,B)},l.prototype._split=function(D,B){var U=D[B],$=U.children.length,q=this._minEntries;this._chooseSplitAxis(U,q,$);var tt=this._chooseSplitIndex(U,q,$),Y=z(U.children.splice(tt,U.children.length-tt));Y.height=U.height,Y.leaf=U.leaf,f(U,this.toBBox),f(Y,this.toBBox),B?D[B-1].children.push(Y):this._splitRoot(U,Y)},l.prototype._splitRoot=function(D,B){this.data=z([D,B]),this.data.height=D.height+1,this.data.leaf=!1,f(this.data,this.toBBox)},l.prototype._chooseSplitIndex=function(D,B,U){for(var $,q,tt,Y,G,rt,pt,Q=1/0,ot=1/0,Z=B;Z<=U-B;Z++){var Kt=m(D,0,Z,this.toBBox),Ft=m(D,Z,U,this.toBBox),Tt=(q=Kt,tt=Ft,Y=void 0,G=void 0,rt=void 0,pt=void 0,Y=Math.max(q.minX,tt.minX),G=Math.max(q.minY,tt.minY),rt=Math.min(q.maxX,tt.maxX),pt=Math.min(q.maxY,tt.maxY),Math.max(0,rt-Y)*Math.max(0,pt-G)),ie=w(Kt)+w(Ft);Tt<Q?(Q=Tt,$=Z,ot=ie<ot?ie:ot):Tt===Q&&ie<ot&&(ot=ie,$=Z)}return $||U-B},l.prototype._chooseSplitAxis=function(D,B,U){var $=D.leaf?this.compareMinX:x,q=D.leaf?this.compareMinY:A;this._allDistMargin(D,B,U,$)<this._allDistMargin(D,B,U,q)&&D.children.sort($)},l.prototype._allDistMargin=function(D,B,U,$){D.children.sort($);for(var q=this.toBBox,tt=m(D,0,B,q),Y=m(D,U-B,U,q),G=E(tt)+E(Y),rt=B;rt<U-B;rt++){var pt=D.children[rt];y(tt,D.leaf?q(pt):pt),G+=E(tt)}for(var Q=U-B-1;Q>=B;Q--){var ot=D.children[Q];y(Y,D.leaf?q(ot):ot),G+=E(Y)}return G},l.prototype._adjustParentBBoxes=function(D,B,U){for(var $=U;$>=0;$--)y(B[$],D)},l.prototype._condense=function(D){for(var B=D.length-1,U=void 0;B>=0;B--)D[B].children.length===0?B>0?(U=D[B-1].children).splice(U.indexOf(D[B]),1):this.clear():f(D[B],this.toBBox)},l})})(UT);var KH=UT.exports;const qH=ky(TH),YH=ky(FH),XH=ky(NH);var Ih=KH,VT=qH,jT=YH,Fm=XH.default,QH=jT.featureEach;jT.coordEach;VT.polygon;var DI=VT.featureCollection;function HT(t){var e=new Ih(t);return e.insert=function(n){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Fm(n),Ih.prototype.insert.call(this,n)},e.load=function(n){var a=[];return Array.isArray(n)?n.forEach(function(s){if(s.type!=="Feature")throw new Error("invalid features");s.bbox=s.bbox?s.bbox:Fm(s),a.push(s)}):QH(n,function(s){if(s.type!=="Feature")throw new Error("invalid features");s.bbox=s.bbox?s.bbox:Fm(s),a.push(s)}),Ih.prototype.load.call(this,a)},e.remove=function(n,a){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Fm(n),Ih.prototype.remove.call(this,n,a)},e.clear=function(){return Ih.prototype.clear.call(this)},e.search=function(n){var a=Ih.prototype.search.call(this,this.toBBox(n));return DI(a)},e.collides=function(n){return Ih.prototype.collides.call(this,this.toBBox(n))},e.all=function(){var n=Ih.prototype.all.call(this);return DI(n)},e.toJSON=function(){return Ih.prototype.toJSON.call(this)},e.fromJSON=function(n){return Ih.prototype.fromJSON.call(this,n)},e.toBBox=function(n){var a;if(n.bbox)a=n.bbox;else if(Array.isArray(n)&&n.length===4)a=n;else if(Array.isArray(n)&&n.length===6)a=[n[0],n[1],n[3],n[4]];else if(n.type==="Feature")a=Fm(n);else if(n.type==="FeatureCollection")a=Fm(n);else throw new Error("invalid geojson");return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}},e}l2.exports=HT;l2.exports.default=HT;var JH=l2.exports;const tG=Fp(JH);function u2(t,e){var n={},a=[];if(t.type==="LineString"&&(t=_c(t)),e.type==="LineString"&&(e=_c(e)),t.type==="Feature"&&e.type==="Feature"&&t.geometry!==null&&e.geometry!==null&&t.geometry.type==="LineString"&&e.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var s=zI(t,e);return s&&a.push(s),Bd(a)}var l=tG();return l.load(RI(e)),g_(RI(t),function(i){g_(l.search(i),function(f){var m=zI(i,f);if(m){var y=_y(m).join(",");n[y]||(n[y]=!0,a.push(m))}})}),Bd(a)}function zI(t,e){var n=_y(t),a=_y(e);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(a.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var s=n[0][0],l=n[0][1],i=n[1][0],f=n[1][1],m=a[0][0],y=a[0][1],x=a[1][0],A=a[1][1],w=(A-y)*(i-s)-(x-m)*(f-l),E=(x-m)*(l-y)-(A-y)*(s-m),L=(i-s)*(l-y)-(f-l)*(s-m);if(w===0)return null;var k=E/w,z=L/w;if(k>=0&&k<=1&&z>=0&&z<=1){var F=s+k*(i-s),D=l+k*(f-l);return is([F,D])}return null}var BI=6378137;function eG(t){return DT(t,function(e,n){return e+nG(n)},0)}function nG(t){var e=0,n;switch(t.type){case"Polygon":return FI(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=FI(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function FI(t){var e=0;if(t&&t.length>0){e+=Math.abs(NI(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(NI(t[n]))}return e}function NI(t){var e,n,a,s,l,i,f,m=0,y=t.length;if(y>2){for(f=0;f<y;f++)f===y-2?(s=y-2,l=y-1,i=0):f===y-1?(s=y-1,l=0,i=1):(s=f,l=f+1,i=f+2),e=t[s],n=t[l],a=t[i],m+=(Vx(a[0])-Vx(e[0]))*Math.sin(Vx(n[1]));m=m*BI*BI/2}return m}function Vx(t){return t*Math.PI/180}function UI(t,e){return e===void 0&&(e={}),BT(t,function(n,a){var s=a.geometry.coordinates;return n+VH(s[0],s[1],e)},0)}function ZA(t,e){e===void 0&&(e={});var n=db(t);switch(!e.properties&&t.type==="Feature"&&(e.properties=t.properties),n.type){case"Polygon":return rG(n,e);case"MultiPolygon":return iG(n,e);default:throw new Error("invalid poly")}}function rG(t,e){e===void 0&&(e={});var n=db(t),a=n.coordinates,s=e.properties?e.properties:t.type==="Feature"?t.properties:{};return GT(a,s)}function iG(t,e){e===void 0&&(e={});var n=db(t),a=n.coordinates,s=e.properties?e.properties:t.type==="Feature"?t.properties:{},l=[];return a.forEach(function(i){l.push(GT(i,s))}),Bd(l)}function GT(t,e){return t.length>1?n2(t,e):Ds(t[0],e)}function oG(t,e){var n=!0;return Sf(t,function(a){Sf(e,function(s){if(n===!1)return!1;n=aG(a.geometry,s.geometry)})}),n}function aG(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!cG(t.coordinates,e.coordinates);case"LineString":return!VI(e,t);case"Polygon":return!by(t,e)}break;case"LineString":switch(e.type){case"Point":return!VI(t,e);case"LineString":return!sG(t,e);case"Polygon":return!jI(e,t)}break;case"Polygon":switch(e.type){case"Point":return!by(e,t);case"LineString":return!jI(t,e);case"Polygon":return!lG(e,t)}}return!1}function VI(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(uG(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function sG(t,e){var n=u2(t,e);return n.features.length>0}function jI(t,e){for(var n=0,a=e.coordinates;n<a.length;n++){var s=a[n];if(by(s,t))return!0}var l=u2(e,ZA(t));return l.features.length>0}function lG(t,e){for(var n=0,a=t.coordinates[0];n<a.length;n++){var s=a[n];if(by(s,e))return!0}for(var l=0,i=e.coordinates[0];l<i.length;l++){var f=i[l];if(by(f,t))return!0}var m=u2(ZA(t),ZA(e));return m.features.length>0}function uG(t,e,n){var a=n[0]-t[0],s=n[1]-t[1],l=e[0]-t[0],i=e[1]-t[1],f=a*i-s*l;return f!==0?!1:Math.abs(l)>=Math.abs(i)?l>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:i>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]}function cG(t,e){return t[0]===e[0]&&t[1]===e[1]}function hG(t,e){var n=!1;return Sf(t,function(a){Sf(e,function(s){if(n===!0)return!0;n=!oG(a.geometry,s.geometry)})}),n}function WT(t,e,{zoom:n=15}={}){if(!e||!t)return;const a={top:50,bottom:50,left:50,right:50};if(["Point"].includes(e.type)){t.easeTo({center:e.coordinates,zoom:n,duration:0,padding:a});return}a.left=a.left,a.right=a.right;let s;e.length==4?s=e:s=fG(e),s&&t.fitBounds(s,{padding:a,duration:0})}function fG(t){if(!t.type)return;let e;return["Feature","FeatureCollection"].includes(t.type)?e=Fd(t):e=Fd({type:"Feature",properties:{},geometry:t}),e}function dG(t,e={}){if(t.length!=0)return t.length==1?is(t[0],e):t.length==2?Ds(t,e):kg([[...t,t[0]]],e)}const $v="base_map_control_";class pG{constructor(){this._baseMap=void 0,this.layers=[],this.sources={}}getBeforeId(){return this.layers[0].id}async setBaseMap(e){if(this._baseMap&&this._baseMap.id===e.id)return;this._baseMap=e;const{sources:n,layers:a}=await mG(e.type)(e);this.layers=a,this.sources=n}addToMap(e,n){for(const a in this.sources)if(Object.hasOwnProperty.call(this.sources,a)){const s=this.sources[a];e.getSource(a)||e.addSource(a,s)}this.layers.forEach(a=>{e.getLayer(a.id)||e.addLayer(a,n)})}removeFromMap(e){this.layers.forEach(n=>{e.getLayer(n.id)&&e.removeLayer(n.id)});for(const n in this.sources)e.getSource(n)&&e.removeSource(n)}}function mG(t){switch(t){case"vector":return vG;case"raster":return yG;case"no-basemap":return gG;default:throw new Error(`Not support ${t}`)}}async function gG(){return{layers:[],sources:{}}}async function vG(t){const e=await fetch(t.links[0]).then(i=>i.json()),n=[],a={};for(const i in e.sources){const f=$v+i;a[f]=e.sources[i]}for(const i of e.layers){const f=$v+i.id,m=$v+i.source;n.push(Object.assign(i,{id:f,source:m}))}const s=e.glyphs,l=e.sprite;return{layers:n,sources:a,glyphs:s,sprite:l}}async function yG(t){if(!t)throw new Error("Not found item");const e=`${$v}layer`,n=`${$v}source`,a={};return a[n]={type:"raster",tiles:t.links,scheme:t.scheme||"xyz",maxzoom:t.maxzoom||22,minzoom:t.minzoom||0,tileSize:t.tileSize||256},{layers:[{id:e,type:"raster",source:n}],sources:a}}const c2="basemap";function ZT(t){const e=Lf(t,c2,sl({baseMaps:[],defaultBaseMap:"",current:void 0,layer:void 0,loading:!1}));function n(f){e.baseMaps=f}function a(f){e.defaultBaseMap=f,e.current||s(_G(t))}function s(f){e.current=f,xG(t,e.current)}const l=hn(()=>e.baseMaps),i=hn(()=>e.current);return{setBaseMaps:n,baseMaps:l,setDefaultBaseMap:a,setCurrent:s,currentBaseMap:i}}function _G(t){const e=ba(t,c2),n=e.baseMaps.findIndex(s=>s.default||s.title===e.defaultBaseMap),a=n<0?0:n;return e.baseMaps[a]}function bG(t){const e=t.getStyle().layers;return e.length>0?e[0].id:void 0}const xG=async(t,e)=>{if(!e)return;const n=ba(t,c2);if(n.loading)return;n.current=e,n.loading=!0;let a=n.layer;a||(n.layer=new pG,a=n.layer),iu.actions.getMap(t,s=>{a.removeFromMap(s)}),await a.setBaseMap(e),iu.actions.getMap(t,s=>{a.addToMap(s,bG(s))}),n.loading=!1},AG={class:"base-map-card"},wG={class:"base-map-card__image"},CG={class:"base-map-card__content"},IG={class:"base-map-card__title"},EG=_r({__name:"BaseMapCard",props:{mapId:{type:String,required:!0},title:{type:String,default:""}},setup(t){const e=t,{mapId:n}=bo(e),{trans:a}=Ka(n.value),{baseMaps:s,setCurrent:l,currentBaseMap:i}=ZT(n.value),f=m=>{l(m)};return(m,y)=>(Ct(),le("div",AG,[kt("div",wG,[at(i)?(Ct(),$e(at(RA),{key:0,src:at(i).thumbnail},null,8,["src"])):mn("",!0)]),kt("div",CG,[kt("div",IG,Mn(t.title||at(a)("map.basemap.title")),1),kt("div",null,[Jt(at(zy),{modelValue:at(i),items:at(s),returnObject:"",itemText:"title",itemValue:"id","onUpdate:modelValue":f},null,8,["modelValue","items"])])])]))}}),SG=Yn(EG,[["__scopeId","data-v-20f20e83"]]),MG=[{link:"",thumbnail:"/static/img/icon-stack.png",type:"no-basemap",title:"None",id:"null"},{id:1,title:"Streets",type:"vector",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9TfE2haV8QDcaOLS60zxBp9rHc2wJDfaGeEOYiOATgLk8fNzk4Iat+y1f3em+K9U014pESRFadHjwYnTcBnJGDk4xtJOe2Kzfhc15q1vrer2MNlNdwoqTWHkJ/pysvOG+8nKbgOjFeQTk1l+BvHN18LvihcXWppPMxaS3v4xIXdsnOQWPzEEAgk8jPPOa+5WGnPDYnK6UlJxUXyt3alo5WvrZ7rVpN77pfkMcfRhjMJm1SLgpSknJKycLtRvbS61T0TaWq2b92+J3jjTfBnh6T7dcxxyXMbiCFgS1xgDIAHPcc8AZGTXyw0nnOzEsxYkks24k+57mtPxl4ouPF3im81GWWVjNMzQ7mJ8lNxKquScAA9BTNS1K78X6kh8lGlWIqkcEeMKoLtgcn+83tzjA4r2chyf+zaV5auSvJt2tbZJW83d36Hi8UcQLN63uqyg7QSV3K+7bv5KyS6/Mb4Y8OXHi3W4bC12edMT8zkhUAGSTjPAFdV4r+BWoaFp32mzmGoLDEZJ0CbJFx1Krk7gPz9qufCq9sfDPhDVNUt2Da0lnM+6bmKFVYBVwOfmYoTnrlRkd+40DTI/Eej2Sz2l7NbWkiyxPfEidmAYZK8lhl+S2AcngACvk+JOLsdg8bzUPdo03ytOKvN2u7XadtUlZ66vZWfr5Hwxg8Tg7VveqzXMmm/dTdlsmr7t3Wmi3PMPDHgDW9e8PvaW9htt725SRrxpQqL5YddrDqy5fOVzgg/eIwvdeDPhlZWGo2PnWzQ3+n2MTSH5XXzWkk37uSDkAgZH3T2YA13fI9fancKDxgtySO56fyA/Kvgsz48x2OjOCSpxfZu+umt3reOlrJfjf7HLeEMJhXGUm5uPe3rppprre7fntZxG8YPIP61Sm8M6ZPNE0mnWLtCCsZNuh2ArtIHHTHGPpU3lZuBJuk3Ku0DzG2Y/3c4J98ZqTLZr4uGJnDWk2vQ+pnThP41f8TjdG+Amhabp0sE32y9M6pueSXbsZQfmQKBjOe+7oPfPK67+zje288f8AZ15Dcw7RvM/7uQNk5wACCMY6kd69H8T+O9M8GRw/2lc+Q0+fLVUZ2YDqcKDx2z0rBufjdZWcTXclneHSnlaG1uUXLXjLt3FVbbtUZYEk84GBncF/QMozrimUvrWH5pqf8y91tae7eyvpqo9m2rJtfGZnlfDqj9XrcsHDs/eSevvWvp5y72WrV/LPHHw91DwFLEt5GrJIDtuInLRSe3IBUjI4PXPFdZYfs6vqPh62uF1eEXU6CUqIxJAARkAOrc/7wyD29+Y8XfFDUvFN/duks1na3aoptRMXjGw5XsO4BPHJ9uK9Oi+Leh6H4XtJ/tN5fCRmU/ulWbd947lAVRyeMYHB5yDX3Od47iTD4PDKjFe2k3zcq5ul7O6aXW9nZ2urbL5HJ8HkFfFYh1X+6ily8z5etrqzTfTdXV7Pu+R0b4Da7p2rrcrLpTGxnSSIPIzLOVIYZAXIHGDnHQ/WivTfDXirT/GmlPNYP9ohy0ciuu109iPoR7Givz7M+K8fUrcmY0488dLOG3/ky9T7zLuHsJQpc2Xzlyy1up6P8GUNC1DStN0zUtTtxHZC7KXFykyiFYW2Koz8vQ4znkElsck15F8SPE0PivUFuPKhgvIWMEghAcSoANrmQN87dR04GOTir3xd8b2niq5tlsYEWBk815iiiSc8gKw6jYQ2MnvnpiuNr9H4O4Zlh3/aWJ5lUlok3dxilaz+S6q60WjTv+fcV5/CsvqGGs4R1bSsm3rdf1Z67poK0/Ct5LZ6luit/PxtZ2ETyGFQwJb5CDjs3PKkjvWZXd/AfwvqOpeImv7YywW0IMBnULjedpA+Yjpwx4bgYx81fXZ5iIUcDUqTSats21fstE3+B87kGFq4jMKdKje7fRXa7vVpeup0fh7w9o+gpa6fdQ6TdvNP+9jZkmAZs4BJm6YTI+Q8KBlmGTr2/ivwzaapFZTtYqJ2WWKK56RMxPIDqFQdRndnoAvNZPib4HhdPkudDvZ4XUN5pvhKkkxZlDH7o9BztIOe2ARZ0fwtqXh/WVstWv8Aw9dWJncM7ZMm9tzqJlYqGBAcqGLHjjjNfkGIwFDER+sVMQ6js/dfutPul7yt5XWnVW0/aMPUxmHq/V44VU03H3lZxt2bvF36Xs7PWzur9hb+JoNVubyK133LWJUv5ajDblDAK5IU/KwOc4+YYPWrMd5mMM0ckDt/yzfaSecfwsR75z3Ga5XS4dEi1e9kimttN1C4hRQovjHDNtLncmzaHXhgWB+8p+UHk6ug6dBpF3e6lJYeYxbcblD9paRcHDJ8ztjGM4A+UrwccfMYrBKDTSlFNLddbK9rbq97eVj6HDTlNNTkm05bdru1/O1r+Zp3Kz/Z90ccsrNwBB5ZZf8Aay7AEcfy46062sysSRruVIkCjnPTjBPfp196rz682voBpt9GjKfmJh3qQfUHHTrXD/G26m8OaZpd2s9zJcvcAThbh0imUDkCLcVXAAG4Lnk85PPPgsto4zEQwdF+9K+/e2n9dPvMsxxVLCUJYme0d/S6/rz2Mb49XWn392n2WFJr6BVN1cx5bylJxGjEcf3uozyvPauCv9dudS06xtJXzBp0bxwIOi7nLsfqSQPoo9KjuZbdLcQ20cqoGDM8rKWcgEZwANo5PGT9TjNQV/Q2RZRHBYOnhpXlyapy3V013dt2kk9Iu3c/nzOczeKxdSvCy591HZ637K+ybb3av2ClZy55JPGOT2pKK908Y6H4X+Lp/CPi2B4lMsV2wt5od2BJu4U9DyGIOcZ6juaKwIJ3tp0kjO2SNg6sOxByDRXwvE/B8MzxMcTCMea1m22r222/rp0PsuHeKJZfQdCbdr3Widu+5v8AhvwdceLjd/YZLYwW2B+/DF8sDjaEUt/CegwPfGaztc8L3nh6d1niJRCAZUBKAnOASQCp4PysAeOmK7n4F6tYLbT2s/2aO4ifzh5zf61euVycArj5uCcY5GK9HvrK18Q2XlTW1te2U65bLhxxgjGOvOMEHjivnMx42xuU5rPCVqd6St/ia095PZt6vt00aPoMJwnhM0y2GKoztUa/7dT/AJWt1bbe/XU+b69O+E3jm30zwp9lN1HDc2zEossssagFi24hSVcZbGCoJ5BOMVynxU0XTfDni+Wy0xZUSBF81WcsquQGwpPOMEZyeua5wjNfd4zCUs9y6Ek5QUrTW1/mtd0+58hl2YV8hzGbjaUo3i+2+tn6rsfSWneMYtW0z7bb3UNx8u0rADdRwNlsHCqJMnGMZAx9Caj8SS3HiDRDHbsyMZEmhdLcCa2kRt+/95Iv8SjGQODg7gTXknwVgN/rl3A1q9zGIBPmJlSWJ1YKpDFl4+c8ZxnBxxXomv262mhapcJPeSSW9tKYZryR2ihkALBgG/dtyAFOCVzx97FfjOcYOvlua/UqdS+sbOye9rX+f4bJn7HledrMMs+tVY6WakvTe3y8zivjV8RNX1C7l0a5e2jiUhpUt3ck85COSFDdFbhe4561l+CfiPJ4X8IajbeZvvIyraZ5yiSO23EiUoD904JI7EscgiuZ1OwurGZGvElSW6QXA80/O6sThjnnnBPPJBB6EVXr9no5Dg5ZfDBySlG6baWjkt3u9Hazu3ppc/HcTxHjXmE8a5SUmnGzeqi1tsrWvdWS11sdn4G+JM+mWd1FqMt7c2rMZBIsu145G/iLY3MOM4z3JwQMVzt9Nc6yZLu9e5lMwcwTXUpbOzllDHgnBA/HgZIqDStZm0Z5/KEbrcwtBLHICUkVh3AIPBwQQeCK0Ev77xe1tp9vbfaJkiCQpDAqyfKMliVC5JwMsRnAGSSMnKOVwweMqYqjTjGM7OUr2tZb2731lsuXu9m8ynjMJTw1SblON1FW3v3fpot3zdkYtFdVrng278O6dcxalo6RSWiRStdwF/lR/lGfm2N820HA7nvzXKjp/hXs4HHwxUXKmtF1umnpe6s30fWz7o8fG4CphZKFXd9LNNdNbpdV0uvMKM0UV3HCFFFFAHRfCaIv8QNPfZI625eVti5KAIQGI64BI6c+nNek/FTxdF4Q0CRLe6u/t+oBTAhZ0aLDcy84YD5SPfp0rifgbcxaX4h1HUZZVjTT9PkmIb+IZXr3xwOnPSuS1TUrnWL17q7eSWaclyzknOSentnNfA5hkcM1z32mI/h0Iw0/mbblb02v5WXVn3WBzuWWZJ7Oh/ErSk7/AMqSjG/r2+8ju7uW/u5Z55HlmmYvI7sWZmPU5NR0UV95CEYRUIKyR8POcpyc5u7Zs/D/AMRr4X8VW9xLJNFbyZgmaN2Uqj8bvlycKdrEY/hrofjB8QbPxXDb21olrNwsktygYnA+6gLorDGWJGO475A4WivExPD2Fr5jTzOr8cFZLp1s35q+n/APaw+f4mhl88up/DN3b69Lpettf+CWta1mfX9QNzcFTIUSPCLtVVRQigDtwoqrRQRivZp04U4KnTVktEuyR405ynJzm7t6sK9X+DHxB8O+C/A0jXxt7fUfPkQlId9xcJhSOQM7ecDJA+U15RRXDmmWU8fR9hVbSunp5dD08mzerluI+s0Ypys1rqtep9I+HPGGk+ONAvZo7qbULUIftMFxCu+BTn5WVF5yAcfezjg5r5zv3tzf3BtN/wBkMreRvB3eXuO3Oec4x15ptvcG3LYAIdGRgehBBH5jOR7in2EkEV2jXMTzwrkmNH2bzjgE+mcZxzjOMda8rKMgWWVa1SlJyjJK0fS/nZvzsj1c94klnEKMK8FGUb3l3vbpul5XZCw2sQeoOCPSin3N1Ley75XeR9qruYknCgKBk88AAfhTK+lhzOK5tz5afKpPl2CiiiqJOPtPiDrGly+bb3hicqUJEafMp6g8cioh4w1Ef8tx/wB+k/woorg295bs9KyfuvYP+Ex1H/n4H/fpP8Kmh8VX72sjGflen7tf8KKKpSl3Dkj2If8AhMNR/wCfgf8AfpP8KP8AhMNR/wCfgf8AfpP8KKKXPLuHJHsH/CYaj/z8D/v0n+FH/CYaj/z8D/v0n+FFFHPLuHJHsH/CYaj/AM/A/wC/Sf4Uf8JhqP8Az8D/AL9J/hRRRzy7hyR7B/wmGo/8/A/79J/hR/wmGo/8/A/79J/hRRRzy7hyR7B/wmGo/wDPwP8Av0n+FH/CYaj/AM/A/wC/Sf4UUUc8u4ckewf8JhqP/PwP+/Sf4UUUUc8u4ckex//Z",links:["https://tiles.eofactory.ai/styles/basic/style.json"]},{id:2,title:"ArcGIS Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABgESAAMAAAABAAEAAAMBAAUAAAABAAAAVgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAAAAAYagAACxj//bAEMAAgEBAgEBAgICAgICAgIDBQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwHCQ4PDQwOCwwMDP/bAEMBAgICAwMDBgMDBgwIBwgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIAEMAeAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APM/GWnaJ+074c1Hw/qNndab4gjCy6BNazG4kku5Yg7W0qyScrKFVWZFOJhGcgErJ7V/wbkfF/X/AIRftrT/AA/ulure28ZWNxZ6pY3MJRorixjmmjchiCsiASJt2klZGzjbkfH+meLxPf6jdraWKfaosXVgIAbe8TKkruOWT5lVgBxlRnPOdj9jD/goJdfsF/t+6T488QWGo69pNsbqHVLa3vGWa8SeCSPfvkJEmx3DYfOdnUHBH22HwtX6vicqhJS5Ixai3eSlpKVr62d9NWruyd7pfHvFQlXo4+StzOV2lZOOqje2l++z022b/cT/AILLftTeB/gp+zDqnhvxJ4gttP1rxRaytpunfZpbmbUvLHzIqxjK/M0fzM0a5YZcDIr+bH4nBHlur64huGkZsqZWBON2Bk45OOpGMntXdftI/tba5+0v+0h4u+IGsaldXaavqM81qkrvhIS58qNVLHYqR7QFBwvaqOvatefGxYY9UtLW1kECmFLK3S3CxofvOqj5iSTnufbFe9kmUvL4cz3krybdlG2yStru7ttbHnZtmTxVTsov3VbV33bd/JWSRzPwj8P6lca1Htt447aRS7SOdqBNpbPHPABJ9B9QD6lc6DDANtrcrcMsRdwQE3DjlBkk9e+DweOlY9vp9p4c8NWtvatfNOxML/KNgj3AhQe5IGTyMYH1OZdtfWN1/q4txAMe3O9Rg7hjGCAducHGM9wK+V4i4vxuCxrdH3aVN8rTivfaV5Wu07apKz11e294XLcPWo3qaykrpp7Lp3V+915HZafDeSaJNp8MSiO6uY5ZJd+CPLEgww6lcybuO4/iIAW9Y6N5dxG8lobea2Cwhi48uVleQv7FmDAZxkADoRkcLpmpalaTRzGO4WGNx82DnnIGPp0+oB7VutrU1ppsdqzOqTAMW2bQoxxz9P5V+b51xtjsxTg7U4t3tFu+1nd3100tZK3Te/0GW5dh8PrbmaVk3bvdWVtNde/meoS+KYZ7eO8kvj9nGAttHGdznjgnsMEnj6cZyMWXxpa6r4sW1utPtZreRzGmVw+37pBPOPQ4OSABk9/KrXxNPb3En79lWFtqbeBz9fw/L6Vq219qBuFvLi0nkDLiOVuAMHg/Xp1/rXx8cRKEuaDa9Ox7TzDnVrfqd0vhnTND0ljI015G0qxMHJUuyjBYbSP72fqQM9zip4T/ALTuY4rCV7hmTPlyLiRjnHy/w+nVh+PStDQfHEI0uZr+OTznby1VUHJP3iQf9liMj+tU9Q+L+j+CrdZbgTx2szfZoWiTM1xJ2xzhFAzkk9h64H6Fk+ecVO+Kw/PNT6yV4ya093msm1baPRNtWi7eHi8HlErUqijG3RaNddba29e+m5H4s8GXXg54kuogVcZ89JPMikzggDgbSARkHOazvEv7OGj+MYYLm+1Sy0+7mIH2mORWXGOhxnfjI5GeDVLw98f3+I5uobS6u7JDjNlLNvGxG3K4/wCBHJx34ORiuq1rxH4X8PaTeaxr2qTtBIVEMawFt2d/mblVkJcN5e1VIBzJyCoB+5z7MeJaGCwsaaXtZN83KuZbJpSunFO99nZ2urLReLl+Gyt4mq9eVJW5nbrurNNrbddbPXV8r4G+F1p8NvENjPBf6fezpKJI5ZFdYWVXBAYEA4bHOOg57jJXU6tdaVJo0l5oGqWfi/wveosMV49olveafIRlYpwy7o5PlcAcrKsZIwMhSvzzMuKMyq1eTMqceeGlnDVfiv68j6bCYPD0I3w8pWlro/8Ahzh7XxTeaxaR3kdg0UkkSl0mUrvzjJxkFsjHK8HPFct49j03W9EvI7rULO2urVRcsxfdLb/MBygyxB3Y9+PY1V/aS+It5ovhzSm0+4kWPXGadr1GwzhVUBAw5G1XHHB6HArwG2vRc6p5cbuGzgnOOvWv0Dg3h+phUsfjLqrLRRb1jG3Kk++m6aurLZpnz+YYiVePsqcvcWu27vv/AFo9dzsNO1S6v7ZlWT93GCykcZP8+a9I/Zv+KLp4jNldaZdX088kam6htHuDbxBgQJNvKoMAEgYxnPXNeTp4pt9FsbiytfLaaVfmZhu3H09up6V9z/8ABEj9hb4j/GL4gXnjjQ4ZNH8JxxSaPda1NawzLLO7RFo4vNON6rIh4VwdwVhhiR9RxHmFLC5bVr1bcqjtJtJvorpN3fSyZz5bgJYrEwoxTvJ6WWvm9Wl+IkNnoenXjWAjhuFWUGUuT5cEj7gu5ckhDtwCc4C8+77y68OaZq1vb6vqVha31+uEgnYbgHZkU/T5ScnnpxzX2T8av+CCNjqfg9F+DvxAuo/iG8so1OXxBPK0dwZJIo2KtBH+7J8t8+ZEykt1jK710PhF/wAEwfGH7OHxn0vRvjF4i+EfiT4eeIL6aCxurSzkXVdTuUinlEBea3KwFSsk5jEpI8kKjMd238HxlXAYug8ZLGSrNKTcZXjO6s20mpKz3tpddVZ2+2o5XiqNdYV0VBNqzWsfK+sXv1/B3R5v8Fv2ENL+POnzT6PqUOqW/hu+W0vn8wCO3meFZFA5+YbJFII4LMMZYEDN+Lv7KEfhDSrnT2uNJFxkC23OJJEOQu9gv8Az1JAGRzX114S8D+Bf2Rvjf4msf7at9C1TxFHp0f2W9uI4bS5t0juHiubcSKpYZadHMbYEsW0qpUVx3i34kaX8DPi63iXU9C0nVfD2vBrmy1Oytft0tsN21pzE0jySRlgdjooKhcKhUkj5XEUeXlnGMuVxi1fS7cU3bur3s+qsfUU6FF03GfLe7Tt0SbSv20te+zPkjU/+CZ11f6FZR6FrVnrV/M6x3kxnj+zx7MYaJh8rKeQDzjAyK4H46/sg658DdLhj1S6aa8tYi14qyAQxxAfJ5ZY5O7oCechielfSH7QH/BUe/ufGNrY+DFgk+wSl5zNay24vICCGV1Khdqgghhg5UY74+VPif8Rv+Em8PXWtazeL/aUky3M7yuSrqSxaMHgKB97GDjBxg5qsoy+vmGMjhKd05OyvprbT0Xm9tfM8fOp4HDYeTiru3R6afm/66o8c8T+JF0q21ItKZV0vyvNKTKFgzyMsWAVccZPoRivD/id8ZLrxrrlv5KPHY2cJiijzyzHBZyCO5AABHQAnByA74r+NLPVvDpsdFsWt7O3vd00rndLOQjCNiMAKOXOOuRnPauDbUI4ooF2tnP71jlTntj/P4V/TeT5ZHBYKnhG3JU3eLlve1rrV2WrSSeidnrc/OeXnqOs1rLRr/Pvt950dp8Urqwnhkt7bT4LiH/VzCN3dDkkHDOVyM91I4FO1Tx1qXim/jm1LULrUJEGFM0hbYD2UfdUeygCsR7RdT2mzhJkP3ju3bvwxxUFv5kcjBty+hHGa9nmd9Q9lDoj2X4M+Mn0zWPsskK3FrfYgaEyGPeW4GGwcEHB5BGQCQcYJXmvh/UbrSNQguI53WS3kWVOejKQR+oor43iThOOZ144iCipWs221e22x0YHHSw0XTu7Xvsn+Z7LaeB5PiRY32n2uswtpkce5P7WkeZvNIyRwQsONp+ZTkcYzXA+Mvg1deDdQW8s4o7vT9iuWhbfszwWAb5ymejEY+YDPSvQ/g9ZzfFPwillpMMb61pLzSXNiHVZL2E7pDcRRcNIUUbXVQxVURujceifD74eXD62WuJo5LNomgdWVTvU7PkYMTlCSflA2nbnPINfM5pxticpzSph60E6UWla1pNWXvJqyber106aNHVhsrnWoxdPeXXp6fLY+Sbewktr7zvs6XEJbJBO0/Q+lfq1/wSx/4LSaX+y1+zNoPw51PRdLvIfDstw++fLSK8t3LN8q4UfL5pCnLHI69APzv/av0HQ/APjuLTfDUNxatDbRtqIYkw+ew3YiznK7SOehJ4wBXBTWcY0GKRkVm5O7HP8Ak19fmmVYbiXKYQk5QjLlnHRXWjtdarVN9eqZng8dXyzFOcbOSvF9V0v+KR/QHZf8F5/hbqHhS8ml0DUNUGofK2y7WFvlUqzo6cuTgKctyoAB4IOH8af+Cjfhv9s/4WaZoPh3T9Stbgyw3Saj5AafRLuGVZIZ1wSMiRFyD8sgYrwDivxz/Y98Gah8W/7csIdLutRt9LtxdM1suWtyzBB0GeRkg9th7Zz754WbWP2b/Cur3Olx3mj6gIJxbXk1w0Zhl8sqXKhgkn3FChlJXdkcFg34JnnDiyrOI4PDzvJOLi3/AHrW5rdn0s7q2mtj77L88r4qjKriaa5LO9r9F09fz69T17/gtJ/wVB+JXjHRYvgReN4Es9HuLK0v9at9Dea+uWIk8yOGaeeGIQyMY45mihjPyyRqZnUstfLPwl/aruPDX7N2vaLeTK2rWjINDkumJEI8xfNjAPXbGWZVOBnjByAfE/EHhC903xLJH4gW7GparbnUzNcMWuAG3sGcMckvtJ+b5uVPfB5vxBfNHPDCrN+7UvISflLnjj8Av41/QGX8L5fTyungOWMoJqTaWjlFq71b3tyu7b5dLn5/is1xFXGyxEW02mtekWnpsl1vstdbH1F8EfiXH4y0+b/hIGurtvOJa88394jOqqMjHzhVRTtJ5DY6DB8v+Nq3/imy1htcvZVjRpH0a2mfAYxZc4HA3Op4xnkkDPNee+C/itffC3xLJPGI5o/9Tc2zMQtwF46j05wea9Y8L6jfftHaqLHw/ot9Z3yIs/ntF9pU/wB7a3y/3QDx0B5GOaWW0sJi6uJw9OMVOzlK9kklq0rWWustVFxXVnDKpWkoRk3JLbTXW2nd+Wjep4VpOlT/ANjTL+4fcq/LM/CHrnp16/5zUUWi3CFRcKo3HcgIyrfj6H619OfFH9mt/h9oMk1/pEs11GiLM0Fmvku0hI3Yyo3A5G3k8jkDmvGdXdb6C2tVt0S6t4mUAhkGB0BUndnAJxzjHU162X42ljIOdLVLS6cWnondOLfRrez7rYmrKpTlyzVn2aaa6dbdjg21F5pifLjjJ+QsBxwO3p9cfj1qa8W5ljjjmZXVcsjY5Offv06Hpz6mrmteD7vS7Vby4YeTMc/ux359cdcHH0ptlbyzXnl2p86PIKZ+Uc4OOenJx712KL6lc8WrxG6dZNDMrfMFXruNFaUljIs+1gY2wCVaitDllLmd2e1f8E9rufRf2yvBusWsLTT6KLu8i2gkQsLSZI3O3nasjoxxgnHUdR7T+0JJb/s+eA4dSbVoUv8AUYVEFnJahZ5WOAG642D5sn249R55/wAE020yx+OV14g1C+stOtfDOlT3zLM5DXnymMxJg7tw3l/lDHEZwO483/aybxR488bWuqXUn262kjJVGuFVkYn5iAxHy8YGCcba/P8AMuG1m+fe2xH8KhGF1a/M25SS16fzb3WnW696jmCw+XQpRdpzlN3vaySir+r2Xzfk+A8aatN8QNRuNQub1pry4l3OpTAxwBz9PQDGKrT6VjS44SzLxkkk7R71TttPvLO7kWaAx+WdjMrB1B+oyD+BrfhRtZslVNzMowUxwwr9ApwSXLFW6WXkeDUk01qep/8ABO74/aZ8Av2kNNm1eSSPw3q1s2j6iyNsJSVgRKf9yQI3uqYyCcjuv+CgH7Vuh/Eu6utN8O3cWoRxyRs12oIVMEKsUeRk4Vck8jIHPUV8tX+gSRFtsa7mOHUDp6Cl0abGrwrextN5IVYYUAHTpn3+tfP4nhvCV81pZtUv7SmuVL7L3s2u6u7a/ketTzatDAzwMLcknd9+l0n2dlf/AIJsfFzxTqHi7xzeapNNCJJlghHkLsjIijWNQo9BsB9jz6Vmi2OrWxkk+aSMDcW7joKm8TPa6lKqKs1u6ttfzjyn+fpXQan4X/4RTS4LmC6i1CyukA8+NflDAcoeeoz3r6Clh4U4qnTVopWSXRdDyKlZytKXxM47X9Ms4GmuFmlkmEhKq0Xy4J5IOTnr3r7I/Yw/a68D/B34IabDrF9puh6pbyTW900DC4uLqIsHVioyxHO3bkAAAdBx8pzLDqke75VYdgMVj6loy5P3Sx4BI59BXi8Q8P4fN8L9TxDag2m+V2bt066a9j1cmzqtl+IWIo25kmtVda/1/SP1cvP2o/hv8WP2a7yLS7iHV5JpGS9a4ijYQhgdqLvJAOF56/eOOhA/OBNQh8YRap9hcSxpfTCDcP3i27FvLYk4/wBk7j3681zPhCe48D3k0kM3l2+oW0lrcDBdSGUgEgHsSMHqPfkHU+ANmT8SreSVJGhhjkZ4Vk8vz8IQEJ54yRk4zj0JBry+FuEaWRVK31eUpQna0dLq1/NJvs9P1OniDiCpmyjUrqMZR6pWv+bXyv8Aocz8Qxc6abbR5451nt5JJpd3UsflX2JChun96sSzvPKKrICVHGBwcV3fxm8VWt7rs0ccNnc3mSklyssjNEy/KUAJA4AHIyO3UGuHW1a5j29G+lfWWl1362PIpSvBXNbT75ZFX/nmORu6iiqemaTLFchW4ORxRVxu1oYVIxuavw18Vah4X1SGexuWgkf90xwGDKeoIIIPqPQgEYIBqW78Q3+tXcIvL26uMjJ8yUt70UUoRSSkt3v8tvzZdT4ix4hnk1PT2FxJJN9gtneDcxPlnBf8RuycHjk+pqjoFxJFGWWR1YBuQ31ooq+pEfg+f6GRqusXU+qqGmkbbgDmqsl7Lb6o0sblZN33h2oorF7nXyrT0HxXk1y7+ZI8m05G45wT1/kK9C1a1S28G3Ece5Y/Jjn27jtDlsEgfTt0ooraicuI+KPr/kcmkjQxJtO3K/4U2Ri0KsSS2ev40UVHQnqvU0tDcyRyK3zKyHIPOcVQ13Vrrw9cCSxuJrWSZWhZomKsUODjPb8KKKqTfKOlrUszGiG4LnknGTXVeG7SO4gi3orfX6GiilS3NMRsFzMz2MchP7yMEKw4xzRRRRJsyif/2Q==",links:["https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],maxzoom:19},{id:3,title:"Dark",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8VdE1S88J+XfebFd6ZdTPFIQCPLCuVD57Drj2/S58X4YbvS7G7WRG5IjZWyHDYPHHPTOc/nmpfGYg0qbTdPuJbiOCRi0d15hH2YqePl+63DY9QDxgcVoa94fh8Y+DII7IxIAqS2zFdqjjoQBxwT26/SgDz3w14euvEOoBbaJ3WNh5jggCLOcEk/Q+/FexRx+VGqgABQAABgD6CqXh/RY9E0SC1VEGyMCTAHztj5ifXJpbW0t/Ddk37wrG0m5nkbqzEAc9PQflQA/WtYh0HTZLqfPlxjoOrHsBWBoPxUtNTvBDcIbUyPsibO5TnoCex/T3qt4+guNa8QWVjMGXTmnjXCcPIWBycnjgBvpzXLanqD6de3XlS26TTB0cWynygu4cDPT7vGPbk5NAHca34w0zS9WW4kui0ttCyC2EZJbftbcP7rYXHzYz7A5PKeI/GNze29ztm32l3cvsAyp2BU249McZ9x3BrmSP1ozuP8vagAB5zznOc1Yj1e7hR1W6uVEhDMBK3zEHIzz6/wA6hEpERT5ME5zsG7/vrGaZmgDpNQ+KOqXt7HMn2e38ottVEzuDY4bOfTtit3TPjJBJE32y2kjk3fL5XzJjHcnnPXoDXHaH4ZvvEbOLOAyiLG9iwULnpySOa1IPhtdXUwtkuLf7csYlnhZuLcHOASM5JGDwO/PbIB3Xhbxja+KlkMLlXTGYHXEij16kMPpWDdfGEWmrTRHT5DBGxQFn2ScHklSOPp1ra0DwNZ6FZQK0cdxcQFiJ/LCudwwR+XH/ANfmuJb4fanqWuXEPkwWxUAjDkxhegwSSfTrzyOMGgDodS+Kul3umtF5d9/pMbJJtUBogQQec4z/APW96K4nXPD934YvFS5TY2AUZTkN9DRQBPqEF9e3NrYylrjyA0UBjO8yDcx9evtxgAZ6V6F4H0SbQbMxb5ZbaRRIhk+UxsScqExwOh69c8CqPw58FtoD3E93tN3nylXGfKUc5Dd85HT0+tdXQAVR8QxLJp7brj7O2CsZMioCxBx14z1x+dXq5b4naxaQadHayhJZmcSiNhkBRkZIx35A6evagDAu9e1TVX+1wy3EcSQ4+UyBXAwMhgic85PPfsKz7jwte3WlvcLat5cG7cYoxhcY9yx4x29eeCa1dH+IA85IdTt4ZIuNgtzHsiChsDr7n+LP1zgxXN5Yazab7O11KG4MaqEG3YBwvyYBIJ4BwADmgDnW0t4IbaWQxxpdI0iMzcYBIyQAe4IA68VCyYON6yIOrqCAv5gH8K3BJqNtZRoiztDBI4Bjtl3xscBlc87TwOMdD1rP1HF/Oq+dvuHONrkqQc9DkADuMetAFSGNHbl1AHOX3YPt8oJpk7DezEglmJPGPyHapXsWsSDcRSBc4wG2k/Q4P8q6H4VWceoardRvGGTydwk2g+U2cDnGeQTwDzjpQBqfCmK7slPnTGO1mYiCF+PNYDLMo68cfk3pXX2ekQWN7dXCJia8dXlb12qFA+nB/Emi0tZxcmaeUMdmxY0XCRjIJ56seBzx04Ayas0AJtz3NCRiMYUADOeB1NLRQBj+ONAi17QJg52PApljkxymOT+YGP8A9VFa00K3ELxuNyOpVh6g8GigDD1XxFF4fFt9sjmS4myWEB+TCnkksQD1HXmtLR9ettcg3wP/AMBYYYf4j3HFcl8VNOuku47iITyRSpsyg/1TDPBwM/NnjnGc8Vx1rcz6NP5sUsttdITtwmDz15PTqe386APaRmuL8d+G57nXftIi328u1XKRLI4+XHTGew53VtfD/U7/AFnw8tzfvG5ldvKZVCsVBx8wHHUHoOlbdAHkOoeH5tNZle3mOxjn91IjkY7nBT34zSaW0Wn7Lh/LdXDI0bTH51IKkMqoSOP1wR2rt/iiIodOtLh/IMkc21VmQsrqQSRwCR90elcpZGS41awH2WKGCWdA6Wq7WlUsARkfMOOo46e3AB0/w20G2WxS8ie9KqzLGJCUjY9C4TcfcZPoeBVjxP4LXWPElpcYdbWUFb1Ym2mXA+TOOvofYVu2F5b3Ubi2ZGjt28k+WPlUgDgduM44+naplJPWgDmPE3hCzlvInt0t4bhlCLGdoVgOgC4xk+uO2Mgmte2hi0sxQW8cCGIr50UEY438AnAyBnJz6DmrGp6Wmpxx5LRyQuJYpF6ow/oehHcGs1dGs/DKz3cjRwJLIXmcudrluBwd3TJwAe57GgDborntK8SRapdxmy1DzFuGdEhnHO5fmOMcgYyRn0+mN9cqOeff1oAdRjmgNn+VGaACigjIooAxfiJN5fg+7UFN0u1FDMFB+YEjJ46A1xng3we/iS7h89bc2cB/feWRk4HCZXucgnnpXT/FK3kv9GtLWNCzXN2iAg4weQP510GnWMGmWiwW6okcQ24Ue3f3oAdaWkdhapDCixxRKFRV6KKkoooAyfHGinXfDc8SKGmjxNEpXO5l5x+IyPxrN8B+FpdOvXvJ0lg+Ty4onCK3JyxITjHTGeevtXUUUAQadp0el2ghj3lQWbLtuYkkk5P41PRQDmgArhfiF4W1XxB4nC26yzWpiVhufbFE3IPU4zxnjn5hXdUUAeO6/pF34X1GNZYEtZgd0UkLsRIRjlSSemR7167ZCU2UH2jH2gRr5uOm/HzY/HNLcWwuQucgo6uCOoIIP64wfakvklltWWCRYpGwA7Lu2DPJA9cZx2zjNAEisHUEcg8ilqO0tI7GARxKFQEnA7knJP1JJP41JQAUUUUAQ3Fsl9H5cqh1znB7Ed6fuNFFAADg1YgiD2krH7y9DnpRRQBX3GjcaKKADcaNxoooANxo3GiigA3GjcaKKADcaNxoooANxooooA//2Q==",links:["https://cartodb-basemaps-1.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-2.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-3.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"]},{id:4,title:"Open Street Map",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4RFkRXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM4OjM3AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAABJEAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A9oEG5Rng96yr20aFy4GUJ6+/NW5riaCGIn7zZz1qZWW6tiCAW29PfFXFuOphNRmuXqYanDA+9blhKr26qDkjP8zWNNG0cjKykc8cVpaYSUHAAHU+vWrqq8bmOHbU7GlSHoaWoJ7mKAYducZwCM1zJXO5tJXZmakT5gGcr1/HmqNTXM/nSkjO3tmoa7YKyPMqO8mwoopQMkD1qiBAMnFKVK9R1rVtLFAiu4yTzz0qeazilUgqF9CoArJ1Vex0LDycbmFU1qFNym445GPc5qSeykhkC9QehoitJX5jzuBzuGcf/rqnJNGahJS2I7osbl89mIH0zViCz8yzaQ9TjH51NHprup85vmPIIPOffIqwImt7NoyR8vQ/jWbmrWRtGk7uUkMtLUQHJ53de2MVeAxSAZAyMH2oBrGTb1OqMVFWQpGab5Sc8cnrzT6Km5ViD7HD5vmbfm+prOurN3uAsSfw56+9a3z5H3cfrS7RnOBnpmrjNoznSjJWMyHT3NuyyHac9MZ7fWq1xYyQkY+YHv0rdprIrfeUH6imqruRLDxasc0ylGwwwaStybTopnLcr/u4H9KjXS48EMT+H/6q2VWNjneHnfQyTGyqGI4PSm1dvLOSHlSzR9u+KrRR+bIELBc92OKtSTVzKUGpWGrG7KWAyBTa6NLaFE2iNcfQVG9jA4+4F+gArL2yOh4V20ZgVPZsiXKNIcKM5/Krx0pTISGOz68/yqU6ZDgAFgfXI/wqnUi1YmNCadypdESlD5mV54DVYsmi8sorMG65YjP/AOqs6ElpVUjPXitKW2CW4lhG2Tbk988e9TJJLlKpttuSKV9IXm2nadvGR+NWdKl+9GcdsfrVCdJFYGTqw3fnRbztbyhwM47VbjeFkZqfLU5mbF9dG2QbMFj6/hWNNM8773PNTXt0LllIGMZqrRThyrzCtU5paPQuWy27RkyFQR2OOaguDGZj5f3aioqlGzuQ53VrBVqzt2klDMCEU5JI4qsQV61uw+Uke0DALe9TUlZaF0YKUtegs0hRFjg2lzxj0HrxSRLN0nZCT/cJ/rUDusV+u05ymAPxqyvmNLkrtA985rnasjsUrtoZDC7j982QOnP+NWlRUGFUKPQDFIgwNpOcd6dUt3LjFJBTWQN97kelOopFBRRRQAUUUYoADRmiigAoqOWeOEDzG259iahN/BtJV9xHbBH9Kai3sS5xW7LVB4FZ0V6/liWXhe3v2qObVC0eI12t65z/AEqvZyuZutBK7Hz34ScxumU9x3z9elVI5I/tJZosqSSAi81Wd2kbc5yaktpFjnV35A7fhXQoJI5HVcpam/Ecxg4Yf73Wn1ELiMxlwcgVVOpxqwHUev8AkVzcreyO1zjFasvDv9aRhkccVFBcxzDKHv6VPUtNFpprQx5dOEc8ah8q+e3TA+takQKRIvUKAM02OSO4Cvj5hnAbqKexwPlxmrlJvRmcIRjdxK19bG4iyOGXke/WsWRGjcowwRWpNeSiXy3CqmcFgCP1qhdhDLuR92ffNbU7rRnNX5XqtyCiiitjmCpraEzyhAce+KhpyOyHKMVPqDik9tBxaTuy5dxs8a3H8Jzx6dqktLWVE3GP5g2RyKktR58AD4ZB/CvPfvVsJtGNzfga55TaXKdsKak+crpayCZppPmyOnTHOasxtjjGB9aUNgAbgR7mgtGuOR+NZttm8YqKJaTvTUcOMqcikMihgrOAx6DNTYd0PoyfSkJwcjJPTFAb1BA96Big57UtNJA5HX0FHzHrx9KAFPrngUituJ9B0NMkLKOOfWiJiV+7j8KBEmQKDnB45pBz1pc460DMW/in80ySD5eg6dOaprjcM9K0tRnViUBzgY/HmsyuuF3E82qkp6GlqcykiFf4ev6Gs2nO7SMWYkk9zTaqMeVWJqT55XClA9TikopkEvnFQAg2jv3zUVFFFgbbJbeUwyhh+Nb0MwlQYPOBmucq7YXLRyFDk7un4ZrOpC6ub0KnK+V7GotvtIwQPUjrVS+vBEPKjJL92/Ordzcrbx7jyT0HrWFNJ5szPjGSTWdOPM7s2rzUFaO4kkryY3MTj3plFFdBxN33CiiimAVNaRrLcojdDn+VQ1PaJI9wojba3POM44qZbMqHxI0HkjsUIRWBb+8PT/8AXVdb2VhuboTtIXP5j3q+9vHK+J2346DGMflUdxYoE/cR4cHI5/xrCMo9dztnCf2dhkVwvIcghRkev0+tK8bXgSSNiijPGcH/ADxVJba5MjDb8wyTyKkR72H5QMD0yKfKt0yFUbVpJ2LlrFNAWDOCnuTmop2aO7jkwCDhcN9etWkLlAGXce5zilMSTAGWP5lOR81Z82t2buHu2QFpCAV2c+uaUO2MPtP0p+0AAAcY6ZpNoJI24A9+tQaDlUjk4pe+MfjQOOCaWgBuc8ZU0uKQIqkkDk9adQBC9zHG+wnBqne3zxMERQMr3H1pmqKUdHXoc5/SoJZorhxK64wNu3J5/GtoQWjOWpVesdiM58lpHGWZu/v3qvU00wkAVV2qoxjOahrdHJJ6hRRRVEhRRRQAUUUUAFTWpC3KFiAOev0qGgHFJq6GnZ3J49zRNHjOcY56VCylDgipZovIcYYMOxBzSq8vlkLHlT3waSfVFNdGQUUpBHUEUlMgKKKKYDkXc6r6nFbFpAsceM/P3PrWRDxPGf8AaH866CFwYxgjHrWFZvY68LFasBEhOQME9af0ORTW5/Ghs5yB09a5zsHZ65NJkYxmj5ivOMGlX5QB29aAIIJHKFCu51+9zjrRLE5IkT5HHB78U10ZLkTDG0/ez9MCmT3wRM7GJ7HHFXZt6GTaStIZPfPbkK8e/vnOKmtbxbkfd2kdRnNY00pmkLkAfSltpBFOrnoM/wAq2dJcvmcyxD5/I6IjNQ+ahkCBsk9sVBqF0YY1VQCW/pisdCBIrHoCDxWcKd1c2qV1GXKdIDt4NMe4ijBLtjHsarRzpJEIxncRxVC9QxsFJB9MUowu7MupU5Y8yHX1ytwRtb5R0GPpVKplQNb7gfm9PxqGumKSVkcE22+ZhRRRVEBRRRQAUUUUAFFLngj1pKQBRRRTAnhZ5GEe0P8AUZNa8aokaKYuSAD8vFZ2m7ftIz17fka2COQPxrmqvWx3YaN43ZBNaRTJjYF91AFZt1YtAu4cr3rbx6UySJZU2uMj0qY1Gi6lKMltqc3RWvLpSHJjbb6DGf61mTRGGQoeorojNS2OKdKUNyPpV21vjCNsmWX25NUqKbimrMmM3F3RpvqinBRT+I/+vVi2uUuGKqZeBn5qxKt2E3lTgYzu+Xr6kVnKmraG9OvJy1ZtdRjn0ppQKDudsH3p69KjuCPlBbaD1OM1zo7RrFcElwfUE8VlXdx5gCKEC9crVi/mEahYv4up/Ksyt6UOpyYirryIKKKK3OQlknaVMPyR0NRDrRRSSsNtvcuCNhb+YrEFe6n26VFHFNdvnk+5zin29wBE0Mg+VgcfXpU9vM9tu2xb04wd2MVm7q5suWVr7EDf6NcMoUlRjqPaqxBHUVZll8wFiPnPvUaum4+YmQRjOelUr2IkleyZDRWg1nFJCHjbBx0weTVN4jHkMcN6U1JMUqco6sjooIxRVEBRRRQAUUUUAFFFFACg4ORWzZ3MckSRj74xkVi1c00Zuvov9RWdSKaubUJuMrLqbSscnK4H1pST2GajYPuB+XApTJtQs+MDuK5D0SO9lMNqzKcNxj8xWC7F3LHqTk1avL77SAoXCj1HNU66qceVannV6nPLTYKKKK1MQqa1XdcxgnHzD+dQ06NtkqN6EGk9hx3R0WCCPn+X0xSMwHGetMhldgpYx7SgIx1qR3VVLk/L3riPVvpczb90mEcanLjP9Kr3Np9miBY5Yt+lMSRPtIY52/8A1qkv7hZ5VKfdC/410xTVkjgnKMk5PcqUUUVqYBRRRQAUUVJBGJZlRjgHP8qT0BK7sPtoJLiQKnAHf0rRj0uNVbed57dv61djjEa4BP404sB1IFc0qrb0O+FCKWurMj7A4SUkbduWXnOfTvVFy33W7V0oIIyDkVmapbf8twf979BVU6l3ZmdWjaN4mZnjFJSg4OaStzkAjFFFFMAooooAKKKKACtDSkPnM+OMYz+VZ9aul5ELYG47jxnHYVnUfum1BXmjRchVLHoBzWVfXm5PKi4Hf9Kfe3zqTEq7cjB5zWYSWOT1rOnT6s1r1vsxEoooroOQKKKKACiiigDSs7yOODEuSwOBjHTFR3d8sq7IgwU9c1RorP2avc1daXLyhRRRWhkFFFFABRRRQAUqsVYEHBpKKQG1LqcKcKGY+2CP51XGqFnAeNdh68c/zrNorNUoo2eIm2dJDIksYaPGPbtVPVJgsPld2/piqNrdSxERo+1WPoDTbyR3nId92O+MdqiNO0jWdfmplelAJ6UlTRqUUylNyg4xnHvW7djmjFydiGinOQzFgMAnOPSm0EvRhRRRTAKKKKACtix2x2bMT2JP5CserdvOogeJ+NwPP4YrOoro1oyUZFeVt8zsOhYkUynZ2MwXBByKbVozYUUUUxBRRRQAUUUUAFFFFABRRRQAUdqKKACiiigAooooAKKKKACiiigAqae4knI3npUNFKw7tKwUUUUxBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH//ZAP/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo3NjE0NWViZS03M2ZjLTQ0ZjUtYWU5Ny1hMGY3ZTlhOTA2ZjciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzYyNDYxMzAtZTBmNy00YTAyLThkMDUtMTAxODVjMjYxMzY4IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjNlMTAxNmEtMjc5My00Njk1LThjMGItMzdiOGY0Y2I3MGM4IiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTEyMDg1MTU4NSIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJmMWZjYzliLTdmMDQtNDIzNC1iYjIxLWI5MDc0OTVlYjQyYiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzg6NDArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAQCAwUBBgf/xAAZAQADAQEBAAAAAAAAAAAAAAAAAwQCAQX/2gAMAwEAAhADEAAAAfvrI6dr1ZrfJen4VmduppjrOpPboz116ymydJ0yLpnk0x7yXNLsSttIGiizRnscW4DocCrS1mKxq/P2ZPQYW6vWMKzzEXTMYduReqxht2e953gSDFr87Kphr1gBxVDK3ZNMIGlPa4qi3LL1uYwyRxF03nrvJq1gACR1xNK7E06X6CH19BFcO8yKvP51cuNSdKqycADocDdi9XTRX5u/xk2o1pr9WX0PL+l4UO5uyy7DZc6k6bhwAB1VG3H6nmvQ8WHctqoeTVl0wVawBux+lpT2eT9Pw49zwANJFibZqdYAAAA6HAAtzuPecCPcgWc1DuQOAAAAAAAAAAAB/8QAIhAAAgICAgIDAQEAAAAAAAAAAgMBBAAREBIFEyAwMSIz/9oACAEBAAEFAmgL88fMwbmisZ/VrlhNpEELQwwVXEZyQGcGksRPx87dXJOR4/YBRYJV9nimyiw1ksYRS0qvVagCCj4McCsm4MY20TCiysFrYLRDoMWThhYkupikAj2CJdtzk71GX+s4TJIeKrZUy5Yg+aQz3OrOgA+0CPeI1n7ltkqEpjXMTqRSTcYolTlIo9UFvDjsNt+8RalaUWp0RS35UZGQMBYNlYqZlAv7bvRb3gH0yWeyCXAj8KkbsPd6AMpMsrH0bddEwxnsLimSwVEi8C1Bc0v9GMlpfQDJDB1uZ3PAnIff/8QAJxEAAgIBAwMEAgMAAAAAAAAAAQIAEQMEEBIgITETIjJBMFEzQoH/2gAIAQMBAT8BdVy+37mlJBKzI6oO+yIXNCPpmUWImJ2WqiYgK/exVT9QaZAKjaU/1MyYmx+YNLa3cXTODcxW1uImQ4shLR3LtcZjkMwcVQv9wDkBfS2RU+U9dR3+o+ZnM9ZFW7iurixFCiyJmYMb2xNxMGJB2hdQeMBB6NVX+wuSAP1vhfg01GXl2XfSq3KxGwEd0MVWv31BXI753KAEQkVQ6Aa7wYy/xjoyedtMw4VPMYWJqch+FTFnKoRMOft74Tzuz1aQjjUZQ4ozMio1LtpD3Ij2ASI1+W2R+ML8xxqFAB7hR6dP/IJlyemsZixs7YH4PNTlFcVjtzN76coqcjLXIIexNdGl7MTHcubP4Vcr4i1feMeRvdWK+Pz/AP/EACQRAAICAQQCAgMBAAAAAAAAAAECABEDEBIhMSBBEzAiMlJh/9oACAECAQE/AVJTn1M/VxFLHjRjtFxcwPcZ1BuM5OlmHMxgzj3FcP1Pno9Q5lIj0KWMu9OIq7RUACzJZbb6hNeKqW6nxHqLjCz42JjKVPMNngzGCo0cWIXY8zaSLleGG4Fo3rkXcJiSuTrmIqoMg6aEivxnNa4l3cQeJcL3AwbrTMDuvQcTEnuPjtrj4v5gG3ryzA3cBK8iY2LCzpnHFxe6gr1oRc27eYGs8Hxy/oYibzAKFDTIu5ZiQ9mKNuuUMWoTlDB14ZuqiqFFD6SAYf8AIBWpF/f/AP/EACkQAAEDAgUDBAMBAAAAAAAAAAEAAhEhMRASIkFRIGGRMDJSgQNicaH/2gAIAQEABj8CLYyvAlOatRwyhSNSyhtzdNpqAw9qIqZWkyO6E+UDnqp00T3gCfjyiX/aLvCt4Tng64QoYvU9Oowpg5djyjs07IHNK0mUXCkqYh2FpUf4omp2R7dH7Jrdm4jgoNZ7b/3EuFoU/jNd8yh4Ye6d8uMWuB3soHnolHJDgOVDhGEbjDuskBOG4sjmP2nS4njqIioKg1CytODhtdEjhS7fA7goNiYtARzMLXDjpajWuyLjc4CsTRZWx9KccxgO5RsWoxboceApJ9EwTVVt0U9f/8QAIRABAAICAQUAAwAAAAAAAAAAAQARITFBECBRYXEwkbH/2gAIAQEAAT8hDtDD3jURRXn1GdBejzFaYD2strgZOYpoFmfiXhU9/czZHCw8DWo4PqYMV8kJg4eDiNWLl1WIBtlst3Fdw7pAqObDHQrnbgh7CwqjKFG7DxGCyxbI9oJvaga8moKkXzEtMPzMv1CUXNyOKleAmkM37vpUYh3fEv0G21QNddCgQjasy/3HoLfE08RMUWdvgic0Y6Ku5ylhSAbjJMdWimC6uZyr5dwdG39MtjsZU8WFLc8QA22TCru1c9iENmZWOBODLIeh+fNmYqNnyWBkGRrTGwGc1mXHvmyus/zL4R5a7ucqLKciy/poyPHRijdLMY3o6zL8i8reemMqhSSuihUIhVjeRXuPrs/cf5Lpk9GKzezpxw2QayXao13GArrd+0itzfCxCG7Cg+uzFLQuY9c+PX4cGAKQamDn8R7nqwvIpHn8/wD/2gAMAwEAAgADAAAAEFTd6EMr0j2vaa0FntdF+3zUtv5k99sMNnkxNssg8bcFptjJr/s3BsTttltl9iVtttttt//EACYRAQACAgECBgIDAAAAAAAAAAEAESExQRCBIFFhcaHwMLGRwfH/2gAIAQMBAT8QIaUC/jUYhLS4tqwHulyb84gOzv2v7iP2MA/nNzZNoIyVtwTwespQd+IobfiZOMfMVEF5PPvudwmMW+0DYz6Eoh0ZgjB4SRVXElx4D5+0cU0PEAVaXJsgOHefKVYU6f8Aei4S7hd8r9++0BpyxRDjpVyqxLdGHxGbroVdxxOHEEGvfv1QsRVTmhzf39zFlDzt+fpAWHLXVEudec+cHz8CIHEvyqHnj9RWjXRtbk3BBYxahp4g8qX3ljLTX30i2F3j3N6dvFbHcrHZLndFKuEi2QDE3keiXOHDKQWrWP6tiUcK1rvGuPAL736ho88RHuehDenEUGu91FsdcGBzmC9ZGEFp4KK8Es/+GztuYTrNIrqgvKX+b//EACIRAQACAgICAgMBAAAAAAAAAAEAESExEEEgUTBhcYGRsf/aAAgBAgEBPxCm2UAiMAQKKg2InWEtR11DHOFmoF3EBMSpjLyEIaSgZzDaOPfqCB+sIQQHf9lUiLLTnx0+CtHP+QgvLFMqpQobGSpSFs47SIUhSDBFAL3wVGVGdQEG3gAgr7IrdvNAty9Rj6meSRUTqPAJR1A3b4JZTKBxYVa4+kMStkdrdQu8E+juFYj9QKA/PkQdI52cnQpAEL3KCunGP7IWKd7zEBJGfnwVQYDqEWji4+oRqgijnZgieoxKF34ZEdsoB8NbZqWr2lCuROfn/8QAJhABAQACAgEEAgIDAQAAAAAAAREAITFBURBhcaGBsSDBMJHw0f/aAAgBAQABPxAYVIx2r5f+4u3ghNovOLyoa8x0ZWFVVq1yXnmeA85ocUlB5Q7MmBZOA2I+SvX30ybKHZTX9/jCcWvGV1gYWiT9ZwhisIl2T5zViPA32yyHyZ/RPzh6Cps2OKP3nB0aiMfjBxNAtgnTycXw49jVSvPO+evxgmRaF2aDEQOFKQ2/24QPFToDg15ZjMBoSk3d+/GjnWAABo6DACwlzjJTGE+tFX8GbCQKWyWHg3iXIC6CNHjFehqhK5aABivcURInyYabYcFQNzrXuW5ezD1A4XB9LysCCxd8eeHXC5EfVFavUvtrXXnNaxqd7s5ye5gg6Usvx+816Toc3BJEPyykEYO24TxQgrs0PXn684wu4E91V/7xgzrItLCF6MEgWB+7x94zCFwToa9p3/Xq9CadEumERvH/ADgdzitlJ7e3f7w6pKOrbQ30bZ1MMwRDiIcJSuu/b2w9gB4OsQJUuvOJaAOm1bPr7yuytPvw11y/wc2OB9zGCc0jYa4efnKFHnkfh49JwBE3q0c0T7mk/wB/WSFSpaBvjs6+LgWohSEb41o+8iRMnjHn/XOBLy3S79ybD+zHhNbaKbSeZNfwuvSWQRk2PCf9+8RuE1ZvqJjUGD3T1fj026hAKiMOPlzT0oFEQWp3kS0/NF5+vR0wXf4ez3MaHiYL26FtmBWJG2tCKzf7/GAvKeH+DDLpTPlgh8NO7fY6MrgVXosyDQmrxyJzMa41sAHBT9ZCpoRwAT1TAzTsadf7OMnyLUbT3oRyqzS7rTjbHrz6kKWTRrY9/GLieA9Lwf4ZxkI60x14uF0g7Zq+35xFKvgD9erGG4igenFWV449v83/2Q==",links:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"]},{id:5,title:"Google Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4Rn+RXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM5OjE4AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAADkGAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8AqW98IroP5/H8Q2e3FUNZst4N3bt5kchyzYxhzkkYP86pRgvI2JH/AO+uta8F8ZbM6dJBGd3+rYJ8xbG0c10UnOl7z2Mp8stOphWbMCVPGP0Ne1/DHXEuNJXS2fMsHQY/vM7en9a8ae2ltLxkkQof9oEZ5rvvhlOV8QpEoC7s7s8FvkcjHriurFJSp8xjTdpWPZ6o6vIItMnZhkbGz7cGr1c54q17TdNspIbyUhzGWCIy7jww6E+xrzkm3ZHS3ZHjPiq8juLyTyuVBKE/7WWrkpYWZi2M1tardi+vJpIotkRkYoNuCRk4J98GsqQspPUV69KLjBJnJJ3ZQYBfc1LA4Dgn1qCMNK20datRWkhYkkADkmrXck1EIMYbtinAgjjpVBpTGoXcQB0GetMS8ZW7Y965ZYyClY0VN2uamKXdsw3oaijnR03foKWSZFHzdMdO9byqQcL3JSaZKW3nce9MZ8OAD0qAXK5G0HHvRv3Sgjv2rlniFyqMHroaRhrdjnlycCozJtFMYg/xcj3oikVwQRkV59Sbm7s3iktByyl22qPrTjhDwaYzrGuEXnPXFMZi6+lQVcnEjSjaDUkbeWh3tnn0rPDsrYUkfjVlnwnPPNbU684O9zNxUlYsmZScjmnLKrZHpVJ22oMdxTBcMq9OfWtIYuopXewnTjaxpg5paow3ZztI/SrCyMzDGAPU12LGU7XZl7KXQl70YpAwzg4zSk4Ga6IVFKPNchxadijeWUc54OHrNfT54+q8fUf41pn5m3eYQf8Aep4dACXYMPrmuRY2LeqNPYu25n29oznGK1UTy0C+wFQ+fEiEoqg+wFIt2rHD8e9XPF0muXuSqckywIhCWKnPSo3kkJUoxR1O4MDj9fWpZGwhzVZZgz7T0zgVNaKjFU2y4Nt8xZuLmSVEedwzKoG4nJP1Jrs/hhqEB8RQwFIy7btr4GRhHPXNef3hPkZU5AP9KXw/r02gaxDfwjc0eeMgZypHcH1rWVNSpcqIUvfue9+P/FLeHtNVbeSMXEuduW5GCuehB6GvEtS8Q3WsX5lupmkPT5mJAGTwMk8cmtDxz4vj8UG0kSPY8e/cuc9duP4R/drk4ePnP4UsPT5I3a1CpK78jah8qR9skoQEcHcAKhvIlBZYnWTGMMpzn8azxI8rbVq3CSmFPJ9K1jBqTlclvSxn21vIsmdpz9K0LiURRgKM8849KsJGoJPes25l+XAXnuc9qyxFRwhaPUcFd6kWfNZnfcEGcH+lQkqWwCce9WVUyWRUJgbtxbPtVVotpGHz6jFedONkjTm1Lb3CqB5XGetQNOznO4n6mo8EDBOcUAegqJyctwuTpLweTmpUlI53HP1qqn3sZqXAA9ajYqLJWfNMjk2UmciomO0jmgcn1LXmgnml83jHFVg/r1p27LYA5pE8zHg5JNTrKrDDZFVQSpxil3cigFKxoBQyrxx6ioJkAf5cEHtUsMhMWxY93HrilEbEjcmPxq1TnLZFOSsMWMJyafuccdqdNtjyScDufSqj3ipHuVdwzjrjmtfqtRuyBVEaSDcgz1pWBKHBx9TVazu1uE6YYcYq1ICyEL1r0VRUIO29jFzbeplTswkKj/x2neRLg7wUwM4ORmp4oFF2pkG5ecjOM8Vc8+zRo/tz7wXAMmCML6YH415apTk3ZGzkkZS+WcBiw7U+aALGGQ5HrmtfUtKspYhd6VL50ATL/Ky7W5J+8c9MViPNKIymz5enUVLi46Mdy2LvfC77eVx365qkZC5YnuTUbPJEWQ8jjJXoajDE+oGa1q1ZzspdCIuK1RaScfcb7pG3/wCvUN5biNBKhyrfp2qzFbRmPzFYs+MhSc1KYWmtGjdQpHTIwOtduGUorlexnNp6ox0dc57VI0q44Paq9wnkzFFdWHqpyKI8sDXSSXra5WPtyenuauoz4M7Djsv6VguzIeM5BzWjYajGF8ufJ+uMd/U0O7TS3EatsdjGMnkVFdSJJwGypGDxSmRQd6HIP8VViDgnB4rz6tdwXs0WlfUkZl8gIi8Dvn2qq6bqnGdmRjbinpFvUMAee2K5JVJTepViv5PAz361IkIIxt/WrUMAdwGNa9vpsUjbAV3E9DjP8qjU0jC5gQ2hkdjjABx1qYWG47T1rqodDKqx8sdz0/8ArVFNpjIchcH3H/1qnmNFRRys9j5fbIqltXbkdc11N5p7SYjHD+g//VU9t4ZjjzHOjBjyCRx+op3JdJt6HIGFiAfXpU0aBEyeW9K6Gbw/J5pjijcgNkHHBH5VD/YNzHOWlQiL6H0+lPmVheykmYbS/NjHNJv7MP1rQvNPCXO1FbA6nHt9KoOu7kcADJzQmZyTT1L0E6eVhOo6ipUk8z61RgISFnI45/KmNqCQ4bBVffjP05r2qEm6a5jF7lW8uACE657VArGQbUO4Zz6VQnuHkmMjcH0HQUGdlb5SV+nFKlH2cVEp6mmsckUyFPvcMK011AQJm6bHA5x/gK5tryUgfOQQMZBOaaZncYeR3H+02a05n0FY3LjWEZcRruz/ABZxj9KzmneZw0jbiBjOMVU3U9G5pJAalpKUkQg4ZWDKcdCOlW7ud5P3gHzkku3qT3xWRG5DAitOG4YqBsjYgDhhnNYYilzrmW5UXYlmKBdoCkn1FRKscR8yZlC9QuR/I09I/Mck9B39Ky9RnJn8sdF+X9TXPh6bm+aWwMmn1UqWWBVVcnBxg4/A1GmrTeWyOxIbHJJyP1rPYgDk0wGu/bYViwGJbPJq9BHmLccCqsSqoyam8/CFVOMCqTEQXLYYjvmp9OiEzsHXJ7Aj61UDGWXLHvWxo1lNcXo8kYXv09D61E/hb2HHV2NS4t4rW3XaxwfuhiPXmqMczMNxQsM42qM13tp4QW7jRruTzAM/Ltxj8Q30q1f+BbW3tT9hXdKe2SOx9W9cV5dPE0F7s9X3OyWEqtcyWh56DGTw3PXYSOPwqzBbTXREcBCnv1H8qsr4Q1mS+mEUHzIGbG9OQD0+9T4tK1+wugPs3lk9BvjPb6+9buEE705K/qYKEl8SdiGPSrxZNwcEduT/AIVq6Y0trqMRmjXLkJ+8B4BI5Ga63T9EjOnKs8W+4XOTux3PocdKqS6VE1xG8qbmXBDZI7/WuOOITm3L0Ol4dxSsaTMnlEr5ZGzoOuawb6SZpSqJ+YPtWwtuzDbF2OSPasrWfMtAJV4YdentXOtzWWiJLXQpbtRNJMAfXcfp6Vof2WdhL3LSEf3Xz/Sqmmat59uPKfEf93HufakuNUa1Usj8EYxjr+lVrcSStcsxCAOY/OXevJBYZ4qpqeowWqeWyq+fUA+nvXOXeutHdmaOPDkbTz15z6Vm3GrSXsh8wfQf5HtS5ddSZVlFWJbq8d4cCMB26nb71gt5hBA7j3rYV/OU8dKzrkraLluc969KhQjZTtdHDOTbKs0z21qd2CSeM9OlY81w8z5Y/RR0H0q1qVwXjVc/KcN/Os4fM3Wu2PmTYftPUijG4Ywc06Zgvyqc+tLGy456561QEJBzg0o4qaQofujn1qHnPWkA7PvT1YCoR6U7NO4WLSSirltMDKMGsxRU8bNGwYdqHqrAby3G5Qhb94OrYrEvoXSZ36qzE5/Or5tYYow7M+/0BFMYTNC3lxMU91OalPS62ZNtb3MRgxp0StuFaE9o7QCTawYDnI46VUjBRuadi7hK7AGo1LnntUkoJ/8ArUxHCkChIRqaLZG+1K3tgcebIqZ+pA/rXteg+HLbSbGMEbplzvOSN3Jx3I6GvHNEuEj1a0kzwkiMc+zCvV7PxfaQ4jxz36f/ABVefmUp8qjHY7cF7NNuZ0gh322Ryx/xpixTkhnb5QeRgVSPiG0uWVjLGoHqwH9as2msWIkMrTpwMYDr9fWvE5Zdj1PaRvdMvQ3CRK0atubk9MY9qS6JltCWGG7fnVK51nTWlRo7hS2QcF1/xqG71y1jh3+Yn03DP86PeTFeDiUdEu52la1mP72L7/TvkjpWvqWmNeFLqKTy50wpbGcoMnGM461xsd+kuqrfW/KH/WBuv3cDGK2NV8aQ2FqZIbaaQjo2wFQcHrhvau105OalSW5zRnFwaqPYxdY1y58P3nlT2nmCT5lk8wDIJI6AH0pkHiaC6tWmaPEvGFyeOcdcVweua1NrWqPdzpGrHIAQEDG4nuT60mmXOyRl4wcZ/WvT+pxdPVe8ee67U9NjbmlTzvMj+R/XrUF5c3kqhTNvB4+6BUOpTJDs2HO7P9KpwTBpADgDvWNHCuceZkznZ2QB2DFJeWHAp6o7t8o6+9OaFVJkXcQDkfWo7i5K24yp3Htj3qaVDnnyy0IlJsWW+SwHzcuep9P85rFuL9rkgtxxjFWZLd3tSWVh6jHvWSB8/FejFKK5VsiUWmxJbfd3MG9cYGKrFB9Pap4jtjYnHeonk3HocVQxpQgZpURmbC9acoJHANSLI0fykDBoENGVO1hUmEK4ximedgkjHpTWYv2OaYA8IwWPSmKcU4OdpXHFIKQyQNT15PWogtSJxVWJNUOzEjAIHdhUouREuC3ttU1Ha/6RFNt++u3A9arSKRIQ3UHmvOxkve5UUu5aFyZM7guzpt9qT7LDecRLsdfUAZ/ziqwOO1WbV3EmY/lPc9azpYiUN9gauZzxGN9rKR7EU0wo3Pet1rFbrcWXa/8Aezmse9Q2kxjBzj2r0KdaFT4WJprcjV/IKlMhwavw6q4H7zII7jv9eay0ZpH5qdo12e9XOCmrSFsa664SNu6T8/8A69XDq0yRZWU7SccMf8a5XIQZ71p2cguFMTcYO6uWphYcj5VqUpM0W1SYkP5jAg9mOf51NFqctxgSTOQPVj/jWe9vlgEOO2KltoFSUo5+93x0rzLIpNnVaci2A3yyq0HqGyD1/DqayPFviCC5tY7OyKgFhIzR454YEZB+lQ6rqDxWYt4j8o68e4PpXMBCzgOcD1ruwmHvapI2nWtH2cRVIdcHhvWprfMco56+hprweXhlOV9cUDIXf029a9I5Se5vfOwOMDpTYZgpBJGCcVQ307f8n40kktgOmt5kbagAKkDg+vr9KS/W3VAXwMdBxntWRYXgEiB3wVIA47cVqzxw3qqxmwR1+U/57Vi5SSdlr0AzpZ3aQBVfaevHy1mC0eI5YZ/Cte72xZWNuPTFJbxtdnZ5fQ5zuqo33e4FBVAiyUUnOORTAiyybQig+wrQe38qdkdMryevvUTCCOdWQY9eT6U41Iy0QFWSAxNgEio5FynvWhcqj4YNgfSqMzIowpzmtGgRVA4PrmnKcHmkOc4pUjLt1wKgZKyKRlelNEZJpAxBxTw2TTQhQmKXAFKcjrSdaoCW1me3uVlXquf5V0EFlBrCF7WTN0qZePaeT3OTgdTXPMDsKjvW/wCCAI9ddj2hJ/8AHlrlxMFKF+xrS1lZ9Ss1s0ExjlXaVODznmrMUA+8D1q3qziXVJ3wceY3P/AjVbzxtEYBzXkpNuyG0othcyyJE4iPPGelc1dbmldmPzZOa2L64UIVBBJ7jp2rGnLNzjjPWvXw1H2cPe3M5SuxsH3qtPynWqkakkVOwOzAroQis/3q1vD9sbq+2A4IG768jisoIS4GK2dLuEttVt9rApvXJz/tCk03F2BWvqbVzpkqSNkY9Bx/jUC2jJy3IrtFgjeDzt+FZd4568ZrC1J0Dv1wcc/lXgptux2TpKKuc7LCZCsYOSaqaharZoqg5Yn9Of8ACp1uUXUxvPA64+lQa1cCW6jK9Ao/ma9eMZQcYR26nLo02yKNytpt3dW6Y7YqvPkJgdDUYmw+cVKW85QK6LkWKo4qS5URuADxjNKUp1yrM4xzx2oAqF/QVPbiWX5Ix834VGIyhLMCM1s6BHHJdgFsDuM89D0qbpK7Gk27Iv6Rp07RDzVy3pkcdfetk2LjgHmr8T+QGXg46YqUP5kiqnUkDmvJq46bfuaI9OGAjb3nqc9f2kvkHJ27ep4PY1hzW8gAfduU9sYr0fULXyrMGTdkrkAfQ1xmqIsSvIQ3OOPyrow2M9pK0zlr4f2exgudsgO3ge9PMS55FWnw8IkB6VWnzEcIMgjvXo2scokkKmIsvGBmqBcq2Vq9O22xJOMtxj6iswHHFS9xomb95IWPGalWJT1fafpmoQ/SnqCx4xQBMyYAwcgULSLx1p4Az1qhDTyK3fC+5LqaRf8AnmR79VrDCHFb2gAxTsAM7o8/qK58U7UmaUfjRbuwXnb5erE9Pes+8mS0TcceYegrTvHWIPI/G3Jrk9SvftVydv3R0/IVhhsPa05fIKj1aQ0z5bJAPsac0iyL9xRxjgVVzT0Y13mZNGgHIpzZx0pYSM05yB2oAgLLGfU1HA/lyK/oc0503ZbOPQVGF7k8UgO2sPES/wBmiOV87Rjk+w96ytR1cXMgSPIXufy96wUkZTt3YTPPHanySpkbOawWGp8/P1NHVk48rJI5Ee/3HJU/4UXI81gRnAot4No3nr2FSSKwQ44ro6GZRIG7AxUiErUZBD/jUyDOKSQEroOuKc8oBBWNSPcU8gEemKa0Yxwc1QitcShwMLg+wp2nyiG4WUybMZ/ix2NI8XrUZiHpUtDOsPiK3SQOWDDuAQf61La+J7d5lI2pgg/NgH+dcV5eKaoOQR2rljg6SVmjo+s1ejPT7jWxd22WkXgcEntj61yWtXgkXYrZz0IP0qrYXzEeTN8y7cDt6DHFQ6gVMo2DCj/61Y0sJyVL9B1MRKcbMs2zpNbFBjcO34057Uupx6d6zrWYwy5Fb7AFDsX5jx1r0W0kcpzl8zhlix8q4Offmq2DjNbN1YTSHcV/Uf41myx+X8pHtU26sq5BnFPVyOhpCB3puAOlAFhXz1qQNiqqk5xUqHJ5piJ0c5FdTo8MY083TH59/l/hgGuPjfmtnT7hf7yjaOcnr06VjXjzxsi4PldzVvovtMMkYON2ecfWuXutMmhlOz5h68D+tbcupwHKgPkfTH86zp7pZGO3rW+lrEamc9tPGm512g+4NIisMZ71pxGJ2XzN4A9MVDc/KxWL5l6+poAgQ4PSrC4cYI5qru55696nicA9KABoW7jFRvGCuB161caVOhzVSSZF6HNDBEDI2KRVCMC34VMsoKnGOneq8jZcmkMvx3UgXK0Ndl1II61HBcLEnuajaZGPOc44p3JJIVR5wHPGf61rGzhe3HlL831PrWGvLD1zWhYyNbybipI9ccd6aBkD/JxSK9S37Zfdg4P/ANaqinnNAFk4PSo2AHXik3cUFxikMYy8Z70scJI5GKaxzT1koACgikVjyMjIouGR8Mgx6ipVxIMHrio2Qg4osAWcXmTqCOP/AK1dBJGEQktgAZPFc/byLHdKz8KM8/hV2+1ZJIjFGM7hyT+PvSSjuwdyvfzAnET5XoeO/NZ3XrQRk05RQAD0pdmelSrHn61IsRXmiwXK3l881MkdStGrLuB5+tIh2nmmBTToKuWv3qKKlAI/+sf6mox/rKKKYFkdDQv3qKKYFM/6x/8AfNTR9aKKSBiyVSfqKKKBj0+6aY33qKKAFHSk/iFFFAE8f31+taaf6j/PrRRVITIr7/VJ+P8ASqa9KKKHuJCnpTTRRSGJ3pR1oooAni6int940UUwKcn3BUH8QooqEMkHSlXvRRTAsx9an/5ZtRRVEkafcP1pj0UUugz/2f/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo2ZjdlNWMyYS1mODAzLTQ0NjktYmQzZC1kNjYyNGRjMWU3MWYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDFiZjkwZDMtZWVlNy00YzVjLWI4NjEtNGNjMTA4OGU0MjY5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTQzYzI0NTctY2Q4OC00Yzg3LTg2ZDYtZjRhZDExYjQwZmYxIiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTE2MDczODM3MyIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmYxNGJlZGJkLWJjMWItNDQ4Mi04Yzk1LTQ0MTZhNTlhNGU2MyIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzk6MjArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAAAwUEBgABAgcI/8QAGgEAAgMBAQAAAAAAAAAAAAAAAQIAAwQFBv/aAAwDAQACEAMQAAABru7NfdFXrfO0/Ifo+cNCwyWSGgeXpFz7+XU+yom6mTsrWYrcZZId1fWtuRewBz7F/NfnPJAu4lZBJ1zZpU/WpDyL90sues3apSaVZVBjw7h52tFOvFYUC01K+5iQ7YCyZIyoJs0ru4zXW5crdecG3daPqLF1aK2FQ6POpnbpVtOjOAZcDrOqy5olg9n8117hyti6xK92stI287S1r9QRWnkzINAkdXfFtkYIt76w9SNeY7rkX131OaIwJUW1cKIr1BcjYQZg/wAWmbxhWPR0CaWLHon43q3TzAtQYl94fYsXM1+c+w84qVosEto/w3x9lCFhOaRFnRhTJRABIitLSFcbkTgkMmVk1q8yCkjgjk3I4sVep4kkSDQxDJzLsH//xAAnEAACAgICAgEDBQEAAAAAAAABAgMEABEFEgYTIRQiJAcQFTEyI//aAAgBAQABBQLuLsX6e2pK/KeVchFS4u3/AHX7JkdhXJlC40mdvj2fJn1iWA2b3k0STNEI4ckIGcF5B/Cc1y/NPynKN+Qky6O2RgTvtgkzZORHuraiFaZJQY1DTRLGHZyXiHqVywqWA+O7FvWMp8L9Utji+gPjzEW+MlqqknrW1c9souFS1l5TXk3luVoV77cShF8a4ee5JZ8RPSt41LWsQ0l4+ZpkoW7nkQR5bX1mW5gybGEb/aNipeP2rJV9ZC6bx/yaKjQXyul1ueQw3I/K/IJHijvFqifkC4GKIp6dDnb5O8UYimeGCNu14LC+v+dHc6V3aoHVnlkbIrRgkXVx56PqV9EPEy4N71nCnpykjekTn3kr9nAWkrW+Ytx9rcjNPruJIwM4qzDFUnevLR+JcsNoK2Kd5xC7sct7GkXYP+1KEYh7NLp8aEwAqGxo8hZocob994oG1vEB3TlZHew8pk+5YmIx5T37ESdyxb4r71hOIdj2tA3+jGoOH+v/xAApEQACAgEEAQIFBQAAAAAAAAABAgARAwQSITEQIEEFExQwUSIjMjNS/9oACAEDAQE/AXAfj3mHg1HYAczuAbjUbHXUVSRUVAJcNXBjUCfJ/wAx8ZTuDDx3BiYGIbtop2vzGNm4TuiUBcuXL4lyzN494MgEbITN4qBrgcDqMd3PkLU494uNTGxifT/iPiK9xvFeFNGE+dLhfK1iZfhxAvG1zHpjv25KqbFxOYSFbmNlC/xmTIW9QHPnS6tcKbCJ9djmbVJmoL3NZlYftkRclLUDfmD1BbHE23CAD4UXFJx8iEk8n0EEd+nT/wBgjGvOBgj/AKupqGUmlhO7nzo3wItt3MpwZUtZ0YPODhrhbcbP2QfTdff/AP/EACoRAAICAQQBBAEDBQAAAAAAAAECAAMRBBIhMRAFEyBBUSIyQhQwM2GR/9oACAECAQE/AaWej9R5BmsAIDSutrDhZ0I7ipdxlWtVzhuJZqKkfJMt1DNnB4PgMw4Bjay1jkcRPUF/mJTet3UOvAcjbxG11TLt55moCptrYyysW1AJKk2JiKoqXuanc9gQ/thYoxx8a6nt/YJ/SN1nmU6ZK1H5h01jORjEeo1nDR97EK3M06GtcZ48WjeuI+otc7hBW7LuA4jZXBP3MzfN26aEsBk9TaAxcfcyfF9fuJNNQU/U/czMz1C2utMN3KfUlJ22rgf6lmorKbqc5hZrKh+J2MTbmaStbCVM57mfPfce5awN/BiMtgysE9R07Nbv/MOncdyhDU2T1PT9OufdzLtKHsDfX3L9IMg1/wDJsWsAATmY+GuB3A/USxqzlZp7HtTc3jXLlA0QBmAaKFHC/XhxugTZlswOWI2HImfzDB41n+EzT0+8/PUCBV2r41dfu0nHYmhpZTvcRU9sYHgzWrfZZsXqBbtPZzxFyygmHzrOUCj8xahUNqj+yyBu5+r+MxjjwIVDDn5/Xw6Pw//EAC8QAAEDAwMCBQIGAwAAAAAAAAEAAhESITEDIkEQUQQTMmGBIEIjJDNDUnFyseH/2gAIAQEABj8COm/1ftxe6d4Y41Gw4HuFqV6jWPcNoN5TnEKojaows9Jmyjj6L295VjfuowFp6+oC7Rw6nK1/EueXaZcaAe3Chwp/pM070o4U9ZRtKElQMjunO1TSF+G9viNM4c1AFEF4teTx0LXTV3UqTZS0yAiLShS4Pdyt9jyE6TYLb6UCAAVudUqTgoEHc7lZRAyvMaI0+XlflterXOQ+yDPGeSdI4c03KexrqZiyLtRgLHYeboDSpcR25Ti8qGC0oLb1pmf8lUNze4WJC0vDu05p5+Uag6fay02aQMzNX8Sm+D8rTEtBJyf+Lc6XNsFP3J4O0DAR5V1iFfpUwen1Be2EBp/KlOEHanFsyidUms3kqFfHZHygas7lMT3CAi6k4UC/TRdwJ/0nOtCqn4UKh/6bxBThpR8JzlPKLpn2TJpY7mpTUHOTiMyms5yetQ+0SU0Bp8v2VxHXehBV7z1pnae6tjlYl/eetkKiv6HHWVdETbP0SwwcKTnpK//EACUQAQACAgEFAAICAwAAAAAAAAEAESExQVFhcYGRscEQ8KHR8f/aAAgBAQABPyEF6Jyv4c9fzLWBwWcqfuA2E2szgPkYtresuwrTymG+Y1NOLmr0gmONtwMbLi61MXTcB/pGqRnHKcmqHx5PkCrsishN57zPoCFHFXGIwh440vzGM3Vg3Gh0XGIEZeZYKuOYvBLhR8xMwvGJTKF+xWnY2lU39xsiWHSPccnPyDYqYHdxlqAOL43EgOCKdmAv7OBqxBshbrKK5M9LgY/oWzgvAsohBxSy0Ef00Yt4wPrCR3nML3+UoIX0GpWo+Q7QWJK7ZT0rrE3HwWX2+zn+ZtP75l1c7RK0We5ZKYlquGakFKlwmdzxER5pLy4Ix65esqOXWDmMwUe8GN6l9SQvPntWotaeUqZF8SAYN7DVNmAda7VMeRBHslhzc9ZfzT/kyw2F4n9kXOkRnmJwZVthwPs6Qi+gRCW9Ohcd/Efww7sdI+Wa8BjQZXBdAzE4uajmhYqmcSiB7su1kObRXivZzqBZodAmZwcnWCYBdIOE8VL3X5nTlae0uhF8usx0ohaWllQs3V4ZxmPpMKDRjxN55RqqrhtWUKKSsbcaOJhGIYVGU5v6Jov/ABB7pfNWYXjX7JeE25Wy3E7GPB8mZCntxAPQODmGp9sQBiBdmoXZB4h7oXGlwPsMOs2F2CidL+EBWmen1UfZseF+ZYUxomIblla4cioUIIRVlkOcRaxDKXkLW2Glk0Apn//aAAwDAQACAAMAAAAQmzVu8s1W1nzW/vxGlh9XjIpgwdesdisODvLuOoM7ZARAtGWxX8OTVLDMHlpsxtg0ECD3/8QAJhEBAAMAAgIBAQkAAAAAAAAAAQARITFBEFFxYSCBobHB0eHw8f/aAAgBAwEBPxBOpQiVUsSnKNQii1cXg57lRZofvAVdxLREg7FLq4mAiIeUItmRqBvr3FZ+/HdMV2ESw7KJDewOJc4Z3SonpMjb6lIpuCMlgjmXseARyBhlB1OJbqHEOYWKWwsjTAwHy0oC0SsiVOIodxBcd3/kOAs77/GBm6cz9SWDg9zU1U3WBKnzKlVLbBsusYsE+xvyzDBgNj6vUEClg+3+IqN04icKK2WXLnzLqXGR6cwU1gfDJAlvyRiy18VcBujZwipXqGx8Is+fymmpdtsuGe7GXDslq3gZS0NWsdqP99ZGkDicLleEWuhiJ4OPCZC4N+C4hxEO4eGoLhCEQYFcRL5nU7+wAmwi1PpP/8QAJhEBAAIBAwMEAwEBAAAAAAAAAQARITFBUWFx8IGRoeEQscHR8f/aAAgBAgEBPxClS0ns1cIzKUSqjiP9MlfrOkJXEHFc1no94XrB9qK++sqG2ghmqnmbiBwPTJBleeN/uaQDHD7fyMKYKeksIB0ePTRlXGyQCJms948FUu7CfORpvcuQC4xt50iXmakriUy2LK83g6EY2nHeACWbz3iE9zHu2sqxTElNMG958+JYNtRtXStYXAVKdu3idYlZAONvH5jC4N5QByIBzKGUxMykTLT0OXdgPM/wV+IMw0vU0Zc9J29es11DjAOZN0Neu+J0Ujw/qO1I20Da8c/MDUwunvqP+f7DuJcZhnbYeGZoqrg2miY2l1HBN0TGptr/ADSWTsgp0i+zQK9CI1hEGVYTk806y2LaUDQ+4Xils+PfSMDL+X2yiI5rXMBEtvNdJSwJbrox/YLemUnDit5tCScjXv8A8mn8pfvCsYYY2ly0I0jcJLS8tuOmWtI4CtnDZx6eby2AQVv+VC3p+44AaasJYAlbRwcw9NfiOKlYLh69lfduBzAGYasaiBp6/cABUaebxhNMrYEuFawuukQrgft6wZrpEYNtMQiVGIGkrqjXJcunLrKmmZUDCXBs7y248wWotuYYbJrK/IzFcE2gDNrn/8QAJBABAQACAgICAQUBAAAAAAAAAREAITFBUWFxgZGhscHR8OH/2gAIAQEAAT8QZzF2xILVog4HQ4OUaVRAFG3SCJLv04n9Q/GUe1r2Au0Mdpaj4XBriNt5J1++c9Hh6cb6mKRr7/XHOFIK+jJppB3H1fGLJUoQYVwjhp94ikDwBzjHQzlmjnERp5JvHzTZpAL3h376nXf94zOXIrDZuId+MtwEQpgJeA15wV1Cug6fZ0fRgpCDQ0Yu3l0/EyFAFBkPBr44x4KV0jGzAT4zcoSE4wcVHRGFaSzQNtbriKawl5dHrHZUbLTz8ZHmxAo7+3YEpz6ibT+1oYSJQRN0lMNPCyxvIcv9TA/FAraJyhv25ahvE0ODDZk4nR4Trq7wOVEhIT2vJXv3kLjUGD/3LHFjBBFlkeR16zm7RQor6694YKtoFJsRiJx9ZWVL4SR98fnHBVhgaebXqc/eXM0Q7gb/AE/n4P8ArDdPYXn5uIspoLQ+QNGCvCkq+LHwYOdDBFmcvd6xQKER5yH7bdrkXC2aWUFLDhezzgitpQBUNQ73g/VwoIugPInXeEfnDHUoks52aompASMupq2JyF4ZOb6sAAEUCbATWtk494w/fqI9E8F1kIBg9sGlfD/GHJVa+E+MnJe2S+zprO/8MXEJUA8HaBftnR8aQvH+845WzV5f8ywYNk4KHZeXmes1PDNAzbR3XPFB9o0R3UidjLvL5mWGUmhFT2x8tu0rB1bcfQ9YUyCVdQNkH6PxiijV1WbVQ3S8+8r/ADgBz52+8YaRtAu/vJVc4pqa6wjwWx4W44O0+M2SdF86OdjV6T2YFdEkpD2RxP6xSFBKVHRcG3Xajiu5KPJPzrX3hJXelBTdOwlPeS6NqrAee5DXjGeUoeHj+P1w3BXEaTi/78YHSpeQ6gzjUwGMk9fUm5tMQ6VgEj/ObRrbtiNkpQuucVC0wU0TC5hgcJOJ8pzi0hEjboH3m6msBaBxm0Y+LjCQGe2/Rx8L5y0pBB6ChF7ZvD7tJqhIg/WPAEQwxLnQe/3yKZLDrY3wl/3KhWSmniJPGNIj3MGxxu2AJPWn5yKEh32wQVT0vOQKCwG3E+/wZOlEJpebPrKCRpGT6yhCMIg24jVS7N8MOeDgVXl840mtjOjlvFg9XrJMD1hLBeNGMATLadE8OT4tacCY3L10b0oHPr3mnQp6zXR54cVwad/vhyFboP2Y6LGSgpzw5wxQ09YWKB6JctNq6u8FRK2zHMUDGxWOEY9XClcTQW2+speVQsNOveKpG1OVec54JbjAYPYc/Of/2Q==",links:["https://mt0.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt2.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt3.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"]}],TG={class:"base-map-button__content"},PG={class:"base-map-button__title"},kG={class:""},LG={key:1},OG={class:"base-map-control-setting"},RG=["title","onClick"],DG=_r({__name:"BaseMapControl",props:{...qa,baseMaps:{type:Array,default:()=>MG},title:{type:String,default:""},defaultBaseMap:{type:String,default:"Open Street Map"},controlIcon:{type:String,default:""}},setup(t){const e=t,{mapId:n,moduleContainerProps:a}=bo(e),{trans:s,setLocaleDefault:l}=Ka(n.value),{setBaseMaps:i,baseMaps:f,setDefaultBaseMap:m,setCurrent:y,currentBaseMap:x}=ZT(n.value);Wa(()=>e.baseMaps,z=>{i(z)},{immediate:!0}),Wa(()=>e.defaultBaseMap,z=>{m(z)},{immediate:!0}),l({map:{basemap:{title:"Map basemap",setting:"Setting"}}});const A=hn(()=>70),w={layer:lD},E=on(!1);function L(z){y(z)}function k(){E.value=!E.value}return(z,F)=>(Ct(),$e(at(ss),li(at(a),{btnWidth:70}),{btn:Ce(()=>[at(x)?(Ct(),$e(at(yo),{key:0,tooltip:t.title},{content:Ce(()=>[Jt(at(WD),{class:"clickable base-map-button__container",height:"70px",width:"70px",onClick:k},{default:Ce(()=>[kt("div",TG,[Jt(at(RA),{src:at(x).thumbnail},{default:Ce(()=>[kt("div",PG,[t.controlIcon?(Ct(),$e(at(Uw),{key:0,dark:"",small:""},{default:Ce(()=>[_a(Mn(t.controlIcon),1)]),_:1})):(Ct(),$e(at(nr),{key:1,type:"mdi",path:w.layer},null,8,["path"])),kt("div",kG,Mn(t.title||at(s)("map.basemap.title")),1)])]),_:1},8,["src"])])]),_:1})]),_:1},8,["tooltip"])):(Ct(),le("div",LG))]),draggable:Ce(D=>[E.value?(Ct(),$e(at(jd),li({key:0},D,{height:A.value*(Math.floor(at(f).length/3)+1)+48+10,show:E.value,"onUpdate:show":F[0]||(F[0]=B=>E.value=B),"is-resizable":!1,title:at(s)("map.basemap.setting"),width:A.value*3+24}),{default:Ce(()=>[kt("div",OG,[(Ct(!0),le(Mr,null,Eo(at(f),B=>(Ct(),le("div",{key:B.id,class:"clickable base-map-control-setting-item",style:Ni({width:A.value+"px"}),title:B.title,onClick:U=>L(B)},[kt("div",{style:Ni({width:A.value-34+"px",height:A.value-34+"px"})},[Jt(at(RA),{src:B.thumbnail},null,8,["src"])],4),kt("div",{class:mo(["base-map-control-setting-item__title",{"base-map-control-setting-item__active":at(x)&&B.id==at(x).id}]),style:{"font-size":"14px"}},Mn(B.title),3)],12,RG))),128))])]),_:2},1040,["height","show","title","width"])):mn("",!0)]),default:Ce(()=>[Zn(z.$slots,"default",{},void 0,!0)]),_:3},16))}}),zG=Yn(DG,[["__scopeId","data-v-da52311a"]]);class BG{get id(){return this._id}constructor(){this._id=`${Ef()}`}}function FG(){const t=Ef();return{get id(){return t}}}function xc(t,e){try{let n;if(typeof t=="string")n=new Function(`return function ${t}() {}`)();else if(typeof t=="function")n=t;else throw new Error("Invalid prototype source");const a=Object.create(n.prototype);return Object.assign(a,e)}catch{return{...e}}}function NG(t,e){let n;return{...FG(),type:"base",getName(){return t},setName(s){t=s},getData(){return e},setData(s){e=s},setParent(s){n=s},getParent(){return n},isComposite(){return!1},accept(s){return s.visitLeaf(this)}}}function Lg(t,e){return{...NG(t,e),type:"leaf"}}function UG(t,e={}){const n=Lg(t,e);return xc("DataManagementComponent",{...n,get type(){return"dataManagement"},get fields(){return e.fields},showDetail(a,s){throw new Error("Method showDetail not implemented.")},getList(a){throw new Error("Method getList not implemented.")}})}class Wy{visitChildren(e){e.getChildren&&e.getChildren().forEach(n=>n.accept(this))}}class $T extends Wy{constructor(){super(...arguments),this.rootDataset=null}visitLeaf(e){return this.findRoot(e)}visitComposite(e){return this.findRoot(e)}visitRoot(e){return this.rootDataset=e,this.rootDataset}findRoot(e){let n=e;for(;n;){const a=n.getParent();if(!a){this.rootDataset=n;break}n=a}return this.rootDataset}getRootDataset(){return this.rootDataset}reset(){this.rootDataset=null}}class VG extends Wy{constructor(e,n){super(),this.sourceLeaf=null,this.foundLeaf=null,this.sourceLeaf=e,this.typePredicate=n}visitLeaf(e){return this.sourceLeaf&&e===this.sourceLeaf?this.foundLeaf:(this.typePredicate(e)&&!this.foundLeaf&&(this.foundLeaf=e),this.foundLeaf)}visitComposite(e){return this.foundLeaf||this.visitChildren(e),this.foundLeaf}visitRoot(e){return this.visitComposite(e)}getFoundLeaf(){return this.foundLeaf}reset(e,n){this.foundLeaf=null,e&&(this.sourceLeaf=e),n&&(this.typePredicate=n)}}function jG(t,e){const n=new $T;t.accept(n);const a=n.getRootDataset();if(!a)throw new Error("Could not find root dataset");const s=new VG(t,l=>l.type===e);return a.accept(s),s.getFoundLeaf()}function Jc(t,e){const n=t.getParent();if(n&&n.isComposite()&&n.getChildren){const l=n.getChildren();if(l){for(const i of l)if(i!==t&&!i.isComposite()&&e(i))return i}}const a=new $T;t.accept(a);const s=a.getRootDataset();return s?WG(s,e):null}class KT extends Wy{constructor(e,n=[]){super(),this.functions=[],this.foundComponents=[],this.results=new Map,this.typeCheckFunction=e,this.functions=n}addFunction(e){this.functions.push(e)}visitLeaf(e){if(this.typeCheckFunction(e)&&(this.foundComponents.push(e),this.functions.length>0)){const n=this.functions.map(a=>a(e));this.results.set(e.getName(),n)}return this.foundComponents}visitComposite(e){if(this.typeCheckFunction(e)&&(this.foundComponents.push(e),this.functions.length>0)){const n=this.functions.map(a=>a(e));this.results.set(e.getName(),n)}return this.visitChildren(e),this.foundComponents}visitRoot(e){return this.visitComposite(e)}getFoundComponents(){return this.foundComponents}getResults(){return this.results}reset(e,n){this.foundComponents=[],this.results=new Map,e&&(this.typeCheckFunction=e),n&&(this.functions=n)}}function _g(t,e,n=[]){const a=new KT(e,n);return t.accept(a),a.getResults()}function h2(t,e=[]){const n=new KT(a=>!a.isComposite(),e);return t.accept(n),n.getResults()}class HG extends Wy{constructor(e){super(),this.foundComponents=[],this.typeCheckFunction=e}visitLeaf(e){return this.typeCheckFunction(e)&&this.foundComponents.push(e),this.foundComponents}visitComposite(e){return this.typeCheckFunction(e)&&this.foundComponents.push(e),this.visitChildren(e),this.foundComponents}visitRoot(e){return this.visitComposite(e)}getFoundComponents(){return this.foundComponents}reset(e){this.foundComponents=[],e&&(this.typeCheckFunction=e)}}function qT(t,e){const n=new HG(a=>a.type===e);return t.accept(n),n.getFoundComponents()}class GG extends Wy{constructor(e){super(),this.queue=[],this.result=null,this.checkFunction=e}visitLeaf(e){return this.checkFunction(e)?(this.result=e,this.result):null}visitComposite(e){return this.checkFunction(e)?(this.result=e,this.result):(e.getChildren&&this.queue.push(...e.getChildren()),null)}visitRoot(e){for(this.queue=[e],this.result=null;this.queue.length>0&&!this.result;){const n=this.queue.shift();n.isComposite()?this.visitComposite(n):this.visitLeaf(n)}return this.result}getResult(){return this.result}}function WG(t,e){const n=new GG(e);return t.accept(n),n.getResult()}function v_(t){return"removeFromMap"in t&&"addToMap"in t}function ZG(t){return"removeFromMap"in t&&"addToMap"in t}function Mf(t){return"toggleShow"in t&&"setOpacity"in t&&"moveLayer"in t&&"getBeforeId"in t}function $G(t){return t.isComposite()}function KG(t){return"identifyGroupId"in t}function $A(t){return(t==null?void 0:t.type)==="dataManagement"&&typeof t.showDetail=="function"&&typeof t.getList=="function"}const f2="dataset-component";function qG(t="component"){return`${t}-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}function YG(t){const e=[],n=on([]);Lf(t,f2,{components:e,componentIds:n})}Vd(f2,YG);function pb(t){return ba(t,f2)}function XG(t){var e;return(e=pb(t))==null?void 0:e.componentIds}function d2(t,e){const n=pb(t);if(!n)return;const a=qG();return n.components.push({...e,id:a}),n.componentIds.value.push(a),a}function QG(t,e){const n=pb(t);n&&(n.components=n.components.filter(a=>a.id!==e),n.componentIds.value=n.componentIds.value.filter(a=>a!==e))}const p2="dataset-highlight";function JG(t){const e={feature:on(void 0),source:on(void 0)};Lf(t,p2,e)}Vd(p2,JG);function YT(t){return ba(t,p2)}function mb(t,e,n){const a=YT(t);if(a){if(!e&&a.source.value===n&&a.feature.value){a.feature.value=void 0,a.source.value=void 0;return}a.feature.value=e,a.source.value=n}}function tW(t){const e=YT(t);if(e)return e.feature}const gb="dataset";function eW(t){Lf(t,gb,{datasets:{},datasetIds:on([])})}Vd(gb,eW);async function XT(t,e){const n=QT(t);if(!n)return;const a=vb(t,"list"),s=qT(e,"list");n.datasets[e.id]=e,s.forEach((l,i)=>{l.index=i+1+a.length}),n.datasetIds.value.push(e.id),Up(t,async l=>{h2(e,[i=>{v_(i)&&i.addToMap(l)}])})}function jx(t,e){Up(t,async n=>{const a=e.getParent()||e;v_(e)&&e.removeFromMap(n),h2(a,[s=>{v_(s)&&s.removeFromMap(n)}]),a&&$G(a)&&a.remove(e)})}function QT(t){return ba(t,gb)}function vb(t,e){const n=QT(t);if(!n)return[];const a=[];return(Object.values(n.datasets||{})||[]).forEach(s=>{const l=qT(s,e);a.push(...l)}),a}function JT(t){return ba(t,gb).datasetIds}const nW={class:"row-container"},rW={class:"btn-copy"},iW={__name:"table-td-copy",props:{value:{}},setup(t){const{copy:e}=OO({}),n={copy:qR};return(a,s)=>(Ct(),le("div",nW,[kt("div",rW,[Jt(at(Mh),{onClick:s[0]||(s[0]=l=>at(e)(t.value))},{default:Ce(()=>[Jt(at(nr),{path:n.copy,size:"14",type:"mdi"},null,8,["path"])]),_:1})]),Zn(a.$slots,"default",{},void 0,!0)]))}},oW=Yn(iW,[["__scopeId","data-v-94841ed8"]]),aW={key:0,class:"grid-row"},sW=["title"],lW={class:"value-cell"},uW={key:1,class:"grid-row grid-row-full"},cW={__name:"table-td-layer",props:{item:{},view:{},field:{},label:{}},setup(t){const e=t,n=hn(()=>e.item?e.item[e.field.value]:"");return(a,s)=>(Ct(),$e(oW,{value:n.value},{default:Ce(()=>[t.field.inline?(Ct(),le("div",uW,[Jt(at(KM),{readonly:"",rows:"10",modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=l=>n.value=l),label:t.label},null,8,["modelValue","label"])])):(Ct(),le("div",aW,[kt("div",{class:"label-cell",title:t.label},Mn(t.label),9,sW),kt("div",lW,Mn(n.value),1)]))]),_:1},8,["value"]))}},hW=Yn(cW,[["__scopeId","data-v-b9f907c8"]]),fW={class:"table-show-info"},dW={class:"table-content"},pW={name:"detail-layer-info"},mW=Object.assign(pW,{props:{item:{},view:{},fields:{type:Array,default:()=>[]}},emits:["close"],setup(t,{emit:e}){const{mapId:n}=bo(),{trans:a}=Ka(n.value),s=e;function l(f){f||s("close")}function i(){mb(n.value,void 0,"detail")}return(f,m)=>(Ct(),$e(at(ss),Za(ka(f.$attrs)),{draggable:Ce(y=>[Jt(at(jd),li(y,{show:"",onClose:i,"onUpdate:show":l,width:400}),{title:Ce(()=>[_a(Mn(at(a)("map.layer-control.info.title")),1)]),default:Ce(()=>[kt("div",fW,[kt("div",dW,[(Ct(!0),le(Mr,null,Eo(t.fields,(x,A)=>(Ct(),$e(hW,{field:x,label:x.trans?at(a)(x.trans):x.text,item:t.item,view:t.view,key:A},null,8,["field","label","item","view"]))),128))])])]),_:2},1040)]),_:1},16))}}),t3=Yn(mW,[["__scopeId","data-v-b9180281"]]);function e3(t,e={}){const n=UG(t,e);let a=[];const s=m=>m?Promise.resolve(a.filter(y=>m.includes(y.id))):Promise.resolve(a),f=xc("DataManagementMapboxComponent",{...n,addToMap:m=>{s().then(y=>{var A;const x=Jc(n,w=>w.type==="source");x&&ZG(x)&&((A=x.updateData)==null||A.call(x,m,{type:"FeatureCollection",features:y.map(w=>Hx(w))}))})},removeFromMap:m=>{console.warn("removeFromMap not supported")},getList:s,setItems(m){a=m},showDetail:(m,y)=>{d2(m,{component:()=>t3,attr:{item:y,fields:e.fields,view:f}}),mb(m,Hx(y),"detail")},async addFeatures(m=[]){a.push(...m.map(HI)),a=Lw(a)},async updateFeatures(m=[]){const y=m.reduce((x,A)=>(x[A.properties.id]=A,x),{});a=a.map(x=>y[x.id]?HI(y[x.id]):x)},async deleteFeatures(m=[]){const y=m.map(x=>x.properties.id);a=a.filter(x=>!y.includes(x.id))},async getFeatures(m){return a.filter(y=>hG(y.geometry,is(m))).map(Hx)}});return f}function HI(t){return{id:t.id,...t.properties,geometry:t.geometry}}function Hx(t){const{geometry:e,...n}=t;return{id:t.id,type:"Feature",geometry:e,properties:n}}class n3 extends BG{constructor(e,n){super(),this.name=e,this.data=n}setParent(e){this.parent=e}getParent(){return this.parent}accept(e){return e.visitLeaf(this)}isComposite(){return!1}getName(){return this.name}setName(e){this.name=e}getData(){return this.data}setData(e){this.data=e}}class gW extends n3{get type(){return"leaf"}constructor(e,n){super(e,n)}accept(e){return e.visitLeaf(this)}}class vW extends n3{constructor(e){super(e),this.children=[]}get type(){return"composite"}isComposite(){return!0}getData(){return this.children.map(e=>e.getData())}add(e){this.children.push(e),typeof(e==null?void 0:e.setParent)=="function"&&e.setParent(this)}remove(e){const n=this.children.findIndex(a=>a===e||a.id===e.id);n!==-1&&(this.children.splice(n,1),typeof(e==null?void 0:e.setParent)=="function"&&e.setParent(void 0))}getChildren(){return[...this.children]}accept(e){return this.parent?e.visitComposite(this):e.visitRoot(this)}}function yf(t,e,n=!1){return n?new vW(t):new gW(t,e)}function r3(t,e,{zoom:n=15}={}){if(!e||!t)return;const a={top:50,bottom:50,left:50,right:50};if(["Point"].includes(e.type)){t.easeTo({center:e.coordinates,zoom:n,duration:0,padding:a});return}a.left=a.left,a.right=a.right;let s;e.length==4?s=e:s=yW(e),s&&t.fitBounds(s,{padding:a,duration:100})}function yW(t){if(!t.type)return;let e;return["Feature","FeatureCollection"].includes(t.type)?e=Fd(t):e=Fd({type:"Feature",properties:{},geometry:t}),e}const _W="Style Control",bW={area:"Area",line:"Line",point:"Point",symbol:"Symbol"},xW={title:"Layer",id:"Id",type:"Type","min-zoom":"Min zoom","max-zoom":"Max zoom"},AW={title:"Style"},wW={title:_W,add:bW,"back-to-default":"Back to default value",layer:xW,style:AW},CW={color:"Color",width:"Width",opacity:"Opacity",blur:"Blur","stroke-color":"Stroke color","circle-pitch-alignment":"Pitch alignment","circle-pitch-scale":"Pitch scale","stroke-width":"Stroke width","stroke-opacity":"Stroke opacity"},IW={setting:CW},EW={color:"Color",pattern:"Pattern",opacity:"Opacity",antialias:"Antialias",translate:"Translate","fill-antialias":"Antialias","fill-pattern":"Pattern","fill-outline-color":"Outline color"},SW={setting:EW},MW={color:"Color",pattern:"Pattern",opacity:"Opacity",width:"Width",cap:"Cap",join:"Join","round-limit":"Round limit","miter-limit":"Miter limit","dash-array":"Dash array","grap-width":"Grap width",blur:"Blur",offset:"Offset",translate:"Translate","translate-anchor":"Translate anchor"},TW={setting:MW},PW={"raster-brightness-max":"Max brightness","raster-brightness-min":"Min brightness","raster-contrast":"Contrast","raster-fade-duration":"Fade duration","raster-opacity":"Opacity","raster-hue-rotate":"Hue rotate","raster-resampling":"Resampling","raster-saturation":"Saturation"},kW={setting:PW},LW={text:"Text",icon:"Icon",position:"Position",placement:"Placement"},OW={"text-field":"Text field","text-color":"Color","text-size":"Size","text-opacity":"Opacity","text-transform":"Transform","text-letter-spacing":"Letter spacing","text-line-height":"Line height","text-max-width":"Max width","text-halo-blur":"Halo blur","text-halo-width":"Halo width","text-halo-color":"Halo color","icon-image":"Image","icon-size":"Size","icon-opacity":"Opacity","icon-text-fit":"Fill icon to text"},RW={tab:LW,setting:OW},DW={class:"layer-control__title"},zW={class:"style-control"},BW=_r({__name:"style-control",props:{item:{}},emits:["close"],setup(t,{emit:e}){const n=e,a=t,{mapId:s,callMap:l}=bo(),{trans:i,setLocaleDefault:f}=Ka(s.value);f({map:{"style-control":wW},"circle-style":IW,"line-style":TW,"fill-style":SW,"symbol-style":RW,"raster-style":kW});const[m,y]=Rd(!1),x=on(),A=on(void 0);let w=Cy("");$a(()=>{y(!0),A.value=void 0;const k=Jc(a.item,z=>Mf(z));k&&Mf(k)&&(A.value=k||void 0,w.value=k.getComponentUpdate(),x.value=Lw(k.getData()))});const E=()=>{A.value=void 0,x.value=void 0,n("close")},L=k=>{l(z=>{A.value&&A.value.updateValue(z,k)})};return(k,z)=>(Ct(),$e(at(ss),Za(ka(k.$attrs)),{draggable:Ce(F=>[at(w)?(Ct(),$e(at(JM),li({key:0},F,{right:"",show:at(m),"onUpdate:show":z[1]||(z[1]=D=>Jo(m)?m.value=D:null),onClose:E}),{title:Ce(()=>[kt("span",DW,Mn(at(i)("map.style-control.title")),1)]),default:Ce(()=>[kt("div",zW,[(Ct(),$e(Ga(at(w)()),{modelValue:x.value,"onUpdate:modelValue":z[0]||(z[0]=D=>x.value=D),onUpdateStyle:L,trans:at(i),mapId:at(s)},null,40,["modelValue","trans","mapId"]))])]),_:2},1040,["show"])):mn("",!0)]),_:1},16))}}),FW={key:0,class:"toggle-buttons-container"},NW=kt("span",null,"#1",-1),UW=[NW],VW=kt("span",null,"#2",-1),jW=[VW],HW=_r({__name:"toggle-show",props:{item:{},data:{},mapId:{}},setup(t){const e={show:jM,hide:HM},n=t,{callMap:a,mapId:s}=bo(n),l=()=>{const y=!n.data.show;let x=n.data;x.show=!x.show,a(A=>{_g(n.data.getParent(),w=>Mf(w),[w=>{w.toggleShow(A,y)}])})};function i(y){const A=iu.getters.getMaps(s.value)[y],w=m(y);let E=n.data;E.shows[y]=!w,_g(n.data.getParent(),L=>Mf(L),[L=>{L.toggleShow(A,E.shows[y])}])}const f=on(!1);$a(()=>{f.value=iu.getters.getIsMulti(s.value)});function m(y){let x=n.data;if(n.data.shows==null||n.data.shows.length<1){const A=n.data.show==null?!0:n.data.show;x.shows=[A,A]}return n.data.shows[y]}return(y,x)=>f.value?(Ct(),le("div",FW,[kt("button",{class:mo(["layer-item__button",{_active:m(0)}]),onClick:x[0]||(x[0]=oo(A=>i(0),["stop"]))},UW,2),kt("button",{class:mo(["layer-item__button",{_active:m(1)}]),onClick:x[1]||(x[1]=oo(A=>i(1),["stop"]))},jW,2)])):(Ct(),le("button",{key:1,class:"layer-item__button",onClick:oo(l,["stop"])},[y.data.show?(Ct(),$e(at(nr),{key:0,size:"14",type:"mdi",path:e.show},null,8,["path"])):(Ct(),$e(at(nr),{key:1,size:"14",type:"mdi",path:e.hide},null,8,["path"]))]))}});function m2(){const t=[];return{getMenus(){return t},addMenu(e){e.id&&t.some(n=>n.id===e.id)||t.push(e)},addMenus(e){for(const n of e)n.id&&t.some(a=>a.id===n.id)||t.push(n)},removeMenu(e){const n=t.findIndex(a=>a.id===e);n!==-1&&t.splice(n,1)},getMenu(e){return t.find(n=>n.id===e)},hasMenu(e){return t.some(n=>n.id===e)},updateMenu(e,n){const a=t.findIndex(s=>s.id===e);a!==-1&&(t[a]=n(t[a]))}}}function GI(){return{location:"extra",type:"item",name:"Fly to",icon:Sg,click:(t,e)=>{const n=Jc(t,a=>a.type=="metadata");Up(e,a=>{var s;r3(a,(s=n==null?void 0:n.metadata)==null?void 0:s.bbox)})}}}function F1(){return{type:"item",name:"Fly to",icon:Sg,click:(t,e,n)=>{Up(e,a=>{r3(a,n.geometry);const{geometry:s,...l}=n;mb(e,{type:"Feature",geometry:s,properties:l},"identify")})}}}function N1(){return{type:"item",name:"Detail",icon:GM,click:(t,e,n)=>{const a=Jc(t,s=>s.type=="dataManagement");a==null||a.showDetail(e,n)}}}function WI(){return{type:"item",name:"Info",icon:GM,click:(t,e)=>{const n=Jc(t,a=>a.type=="source");n&&d2(e,{component:()=>t3,attr:{item:n.getDataInfo(),fields:n.getFieldsInfo(),view:t}})}}}function GW(){return{type:"item",name:"Edit style",icon:nD,click:(t,e)=>{d2(e,{component:()=>BW,attr:{item:t}})}}}function iQ(){return{type:"item",location:"bottom",name:"ToggleShow",component:()=>HW}}function WW(t){const e=new Set;return t.filter(({identifyId:n,rawId:a})=>{const s=`${n}_${a}`;return e.has(s)?!1:(e.add(s),!0)})}function ZI(t,e){return t.map(({identify:n,identifyId:a,feature:s,rawId:l})=>{var i;return{identify:n,identifyId:a,feature:{id:l,name:((i=s.properties)==null?void 0:i[n.config.field_name||"name"])??"",data:e.get(l)||{...s.properties,geometry:s.geometry}}}})}function ZW(t){return new Map(t.map(e=>[String(e.id),e]))}async function $W(t,e){return new Promise(n=>{const a=e.layerIdMap;Up(e.mapId,s=>{const l=Object.keys(a),i=s.queryRenderedFeatures(e.pointOrBox,{layers:l}),f=[],m=new Set;i.forEach(E=>{var D;const L=E.layer.id,k=a[L],z=((D=E.properties)==null?void 0:D[k.config.field_id||"id"])??E.id;if(!z)return;const F=String(z);m.add(F),f.push({identify:k,identifyId:k.id,feature:E,rawId:F})});const y=WW(f),x=t[0],A=Jc(x,E=>E.type==="dataManagement");if(!$A(A)){const E=ZI(y,new Map);n(E);return}A.getList([...m]).then(E=>{const L=ZW(E),k=ZI(y,L);n(k)})})})}const KW=(t,e,n)=>{const a=new Map;return n.forEach(({identifyId:s,identify:l,feature:i})=>{var f;a.has(s)||a.set(s,{identify:l,features:[]}),(f=a.get(s))==null||f.features.push(i)}),Array.from(a.values())},qW=(t,e,n)=>{const a={};return t.forEach(s=>{const l=_g(s.getParent()||s,f=>Mf(f),[f=>f.getAllLayerIds()]);Array.from(l.values()).flat(2).forEach(f=>{a[f]=s})}),{identifies:t,mapId:e,pointOrBox:n,layerIdMap:a}};function i3(t,e){const n=Lg(t,e),a=m2();return xc("IdentifyComponent",{get config(){return{}},...n,...a,get type(){return"identify"},getFeatures(s,l){throw new Error("Method not implemented.")}})}function o3(t,e){const n=i3(t,e);return xc("IdentifyMapboxComponent",{...n,getFeatures:async(s,l)=>new Promise(i=>{const f=_g(n.getParent()||n,y=>Mf(y),[y=>y.getAllLayerIds()]),m=Array.from(f.values()).flat(2);Up(s,y=>{const x=y.queryRenderedFeatures(l,{layers:m}),A=new Set,w=Jc(n,L=>L.type=="dataManagement");x.forEach(L=>{var z;const k=((z=L.properties)==null?void 0:z[n.config.field_id||"id"])??L.id;A.has(k)||A.add(k)});const E=[...A];if(!E||E.length<1){i([]);return}w.getList([...E]).then(L=>{i(L.map((k,z)=>({id:k.id??z,name:k[n.config.field_name||"name"]??"",data:k})))})})})})}function $I(t,e){const n=i3(t,e);return xc("IdentifyMapboxMergedComponent",{...n,identifyGroupId:"mapbox-group",mergePayload:qW,getMergedFeatures:$W,splitResponse:KW})}function a3(t,e,n){return t.getFeatures(e,n).then(a=>({identify:t,features:a}))}function YW(t,e,n){const a=t[0];if(t.length===1)return a3(a,e,n).then(l=>[l]);const s=a.mergePayload(t,e,n);return a.getMergedFeatures(t,s).then(l=>a.splitResponse(t,s,l))}async function XW(t,e,n){const a=[],s={};t.forEach(l=>{if(!KG(l)){a.push(a3(l,e,n));return}const i=l.identifyGroupId;s[i]||(s[i]=[]),s[i].push(l)});for(const l in s){const i=s[l];a.push(YW(i,e,n))}return Promise.all(a).then(l=>l.flat())}function QW(t,e){const n=Lg(t,e),a=m2();return xc("DatasetPartMapboxLayerComponent",{...n,...a,get type(){return"layer"},getBeforeId(){throw new Error("Method not implemented.")},getAllLayerIds(){throw new Error("Method not implemented.")},addToMap(s,l){throw new Error("Method not implemented.")},removeFromMap(s){throw new Error("Method not implemented.")},moveLayer(s,l){throw new Error("Method not implemented.")},toggleShow(s,l){throw new Error("Method not implemented.")},setOpacity(s,l){throw new Error("Method not implemented.")},updateValue(s,l){throw new Error("Method not implemented.")},getComponentUpdate(){throw new Error("Method not implemented.")}})}class Kv{constructor(){this.type="point"}setColor(e){return this.color=e,this}setStyleType(e){return this.type=e,this}setOpacity(e){return this.opacity=e,this}build(){return JW(this.type,this.color,this.opacity)}}const JW=(t,e,n)=>{switch(t){case"point":return{layout:{visibility:"visible"},type:"circle",paint:{"circle-color":e||B1(),"circle-radius":6,"circle-opacity":n||1}};case"line":return{layout:{visibility:"visible"},type:"line",paint:{"line-color":e||B1(),"line-width":4,"line-opacity":n||1}};case"area":return{layout:{visibility:"visible"},type:"fill",paint:{"fill-color":e||B1(),"fill-opacity":n||1}};case"symbol":return{layout:{visibility:"visible"},type:"symbol",paint:{}};default:throw new Error("Invalid type: "+t)}},tZ={key:0,class:"tab-item-no-content"},eZ=_r({__name:"tab-item",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,active:Boolean},setup(t){const e=t,n=hn(()=>!e.item||!e.item.props||!e.item.props.label?{}:typeof e.item.props.label=="function"?e.item.props.label(e.item):e.item.props.label);return(a,s)=>(Ct(),le("div",li({class:["tab-item",{"tab-item-active":t.active}]},a.$attrs),[kt("div",null,[kt("div",null,Mn(t.text),1),!t.item.component||!t.item.component.label?(Ct(),le("div",tZ,[kt("p",null,Mn(t.value||t.default_value),1)])):(Ct(),$e(Ga(t.item.component.label()),li({key:1},n.value,{tab:t.item,value:t.value,default_value:t.default_value}),null,16,["tab","value","default_value"]))])],16))}}),nZ=Yn(eZ,[["__scopeId","data-v-daae63ad"]]),rZ=t=>(th("data-v-dd360cdf"),t=t(),eh(),t),iZ={class:"tab-item"},oZ={key:0,class:"tab-item-no-content"},aZ={key:2,class:"full-width"},sZ=rZ(()=>kt("hr",{class:"map-divider"},null,-1)),lZ=["disabled"],uZ=_r({__name:"tab-content",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,trans:{required:!0},mapId:{required:!0}},emits:["input"],setup(t,{emit:e}){const n=t,a=e,s=hn({get(){return n.value!=null?n.value:n.default_value},set(f){a("input",f)}}),l=hn(()=>!n.item||!n.item.props||!n.item.props.content?{}:typeof n.item.props.content=="function"?n.item.props.content(n.item):n.item.props.content),i=()=>{s.value=n.default_value};return(f,m)=>(Ct(),le("div",iZ,[!t.item.component||!t.item.component.content?(Ct(),le("div",oZ,[kt("p",null,Mn(t.value||t.default_value),1)])):(Ct(),$e(Ga(t.item.component.content()),li({key:1},l.value,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=y=>s.value=y),mapId:t.mapId}),null,16,["modelValue","mapId"])),t.default_value!=null?(Ct(),le("div",aZ,[sZ,kt("button",{onClick:m[1]||(m[1]=y=>i()),disabled:s.value==null||s.value==t.default_value,class:"map-button text-center full-width"},Mn(t.trans("map.style-control.back-to-default")),9,lZ)])):mn("",!0)]))}}),cZ=Yn(uZ,[["__scopeId","data-v-dd360cdf"]]),s3={TAB:{type:"single",items:[{trans:"circle-style.setting.color",key:"circle-color",type:"color"},{trans:"circle-style.setting.width",key:"circle-radius",type:"unit",unit:"px"},{trans:"circle-style.setting.opacity",key:"circle-opacity",type:"opacity"},{trans:"circle-style.setting.blur",key:"circle-blur",type:"number"},{trans:"circle-style.setting.stroke-color",key:"circle-stroke-color",type:"color"},{trans:"circle-style.setting.stroke-width",key:"circle-stroke-width",type:"unit",unit:"px"},{trans:"circle-style.setting.stroke-opacity",key:"circle-stroke-opacity",type:"opacity"},{trans:"circle-style.setting.circle-pitch-alignment",key:"circle-pitch-alignment",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]},{trans:"circle-style.setting.circle-pitch-scale",key:"circle-pitch-scale",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]}]},DEFAULT:{type:"circle",paint:{"circle-radius":5,"circle-color":"#000000","circle-blur":0,"circle-opacity":1,"circle-stroke-color":"#000000","circle-stroke-width":0,"circle-stroke-opacity":1,"circle-pitch-alignment":"viewport","circle-pitch-scale":"map"}}},hZ={props:{value:{type:String},default_value:{type:String}},data:()=>({}),computed:{},methods:{}};function fZ(t,e,n,a,s,l){return Ct(),le("div",{style:Ni(`
      border: 1px solid #ccc;
      width:20px ; height: 20px ; background-color: ${n.value||n.default_value||"transparent"} ;
              border-radius: 5px `),class:mo({"fill-canvas":!n.value&&!n.default_value})},null,6)}const dZ=Yn(hZ,[["render",fZ]]),pZ={props:{value:{},default_value:{},tab:{default:()=>({})}},data:()=>({}),computed:{},methods:{}};function mZ(t,e,n,a,s,l){return Ct(),le("div",null,Mn(n.value||n.default_value||"0")+" "+Mn(n.tab.unit||""),1)}const gZ=Yn(pZ,[["render",mZ]]),vZ={props:{value:{},default_value:{},format:{default:()=>()=>""}},data:()=>({}),computed:{c_value(){return this.value!=null?this.value:this.default_value}},methods:{}};function yZ(t,e,n,a,s,l){return Ct(),le("div",null,Mn(n.format(l.c_value||"0")),1)}const Gx=Yn(vZ,[["render",yZ]]),KI={image:{component:{content:()=>ua},props:{content:{class:"tab-content-padding"}}},color:{component:{content:()=>Hz,label:()=>dZ},props:{content:{disableAlpha:!0}}},boolean:{component:{content:()=>E8},props:{content:{class:"tab-content-padding"}}},chose:{component:{content:()=>L8,label:()=>Gx},props:{content:t=>({items:t.menu,class:"tab-content-padding"}),label:t=>({format(e){var n;return(n=t.menu.find(a=>a.value==e))==null?void 0:n.text}})}},opacity:{component:{content:()=>o_,label:()=>Gx},props:{content:{class:"tab-content-padding",min:0,max:1,step:.01},label:{format:t=>`${(+t*100).toFixed(0)} %`}},format:t=>+t},minMax:{component:{content:()=>o_,label:()=>Gx},props:{content:{class:"tab-content-padding",min:0,max:1,step:.01},label:{format:t=>`${(+t).toFixed(2)}`}},format:t=>+t},unit:{component:{content:()=>ua,label:()=>gZ},props:{content:{class:"tab-content-padding",type:"number",min:0}},format:t=>+t},default:{component:{content:()=>ua},props:{content:{class:"tab-content-padding"}}}},l3={TAB:{type:"single",items:[{trans:"fill-style.setting.color",key:"fill-color",type:"color"},{trans:"fill-style.setting.opacity",key:"fill-opacity",type:"opacity"},{trans:"fill-style.setting.fill-antialias",key:"fill-antialias",type:"boolean"},{trans:"fill-style.setting.fill-outline-color",key:"fill-outline-color",type:"color"},{trans:"fill-style.setting.fill-pattern",key:"fill-pattern",type:"image"}]},DEFAULT:{type:"fill",paint:{"fill-antialias":!0,"fill-color":"#000000","fill-opacity":1,"fill-translate":[0,0]}}},u3={TAB:{type:"single",items:[{trans:"line-style.setting.color",key:"line-color",type:"color"},{trans:"line-style.setting.opacity",key:"line-opacity",type:"opacity"},{trans:"line-style.setting.width",key:"line-width",type:"unit",unit:"px"},{trans:"line-style.setting.pattern",key:"line-pattern",type:"image"},{trans:"line-style.setting.blur",key:"line-blur",type:"number"},{trans:"line-style.setting.cap",key:"line-cap",type:"chose",menu:[{text:"butt",value:"butt"},{text:"round",value:"round"},{text:"square",value:"square"}]},{trans:"line-style.setting.join",key:"line-join",type:"chose",menu:[{text:"bevel",value:"bevel"},{text:"round",value:"round"},{text:"miter",value:"miter"}]}]},DEFAULT:{type:"line",paint:{"line-color":"#000000","line-opacity":1,"line-width":0,"line-gap-width":0,"line-blur":0,"line-offset":0,"line-translate":[0,0]},layout:{"line-cap":"butt","line-join":"bevel","line-round-limit":0,"line-miter-limit":0}}},c3={TAB:{type:"single",items:[{trans:"raster-style.setting.raster-opacity",key:"raster-opacity",type:"opacity"},{trans:"raster-style.setting.raster-brightness-max",key:"raster-brightness-max",type:"minMax"},{trans:"raster-style.setting.raster-brightness-min",key:"raster-brightness-min",type:"minMax"},{trans:"raster-style.setting.raster-contrast",key:"raster-contrast",type:"minMax",props:{content:{class:"tab-content-padding",min:-1,max:1,step:.01}}},{trans:"raster-style.setting.raster-fade-duration",key:"raster-fade-duration",type:"unit",unit:"milliseconds"},{trans:"raster-style.setting.raster-hue-rotate",key:"raster-hue-rotate",type:"unit",unit:"degrees"},{trans:"raster-style.setting.raster-resampling",key:"raster-resampling",type:"chose",menu:[{text:"linear",value:"linear"},{text:"nearest",value:"nearest"}]},{trans:"raster-style.setting.raster-saturation",key:"raster-saturation",type:"minMax",props:{content:{min:-1,max:1}}}]},DEFAULT:{type:"raster",paint:{"raster-brightness-max":1,"raster-brightness-min":0,"raster-contrast":0,"raster-fade-duration":300,"raster-opacity":1,"raster-hue-rotate":0,"raster-resampling":"linear","raster-saturation":0}}},_Z=[{trans:"symbol-style.setting.text-field",key:"text-field",part:"layout",type:"string"},{trans:"symbol-style.setting.text-color",key:"text-color",type:"color"},{trans:"symbol-style.setting.text-opacity",key:"text-opacity",type:"opacity"},{trans:"symbol-style.setting.text-size",key:"text-size",part:"layout",type:"unit",unit:"px"},{trans:"symbol-style.setting.text-letter-spacing",key:"text-letter-spacing",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.text-line-height",key:"text-line-height",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.text-max-width",key:"text-max-width",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.text-transform",key:"text-transform",part:"layout",type:"chose",menu:[{text:"none",value:"none"},{text:"uppercase",value:"uppercase"},{text:"lowercase",value:"lowercase"}]},{key:"divider",type:"divider"},{trans:"symbol-style.setting.text-halo-color",key:"text-halo-color",type:"color"},{trans:"symbol-style.setting.text-halo-width",key:"text-halo-width",type:"unit",unit:"px"},{trans:"symbol-style.setting.text-halo-blur",key:"text-halo-blur",type:"unit",unit:"px"}],bZ=[{trans:"symbol-style.setting.icon-image",key:"icon-image",type:"image",part:"layout"},{trans:"symbol-style.setting.icon-opacity",key:"icon-opacity",type:"opacity"},{trans:"symbol-style.setting.icon-size",key:"icon-size",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.icon-text-fit",key:"icon-text-fit",type:"chose",part:"layout",menu:[{text:"none",value:"none"},{text:"width",value:"width"},{text:"height",value:"height"},{text:"both",value:"both"}]}],h3={TAB:{type:"multi",tabs:[{trans:"symbol-style.tab.text",items:_Z},{trans:"symbol-style.tab.icon",items:bZ},{trans:"symbol-style.tab.position",items:[]},{trans:"symbol-style.tab.placement",items:[]}]},DEFAULT:{type:"symbol",paint:{"text-color":"#000","text-opacity":1,"text-halo-blur":0,"text-halo-color":"#000","text-halo-width":0,"icon-opacity":1},layout:{"icon-size":1,"icon-text-fit-padding":[0,0,0,0],"icon-text-fit":"both","text-field":"","text-size":16,"text-transform":"none","text-letter-spacing":0,"text-line-height":0,"text-max-width":0}}},xZ={circle:s3.TAB,line:u3.TAB,fill:l3.TAB,raster:c3.TAB,symbol:h3.TAB},AZ={circle:s3.DEFAULT,line:u3.DEFAULT,fill:l3.DEFAULT,raster:c3.DEFAULT,symbol:h3.DEFAULT};function qI(t,e=KI){return t.map(n=>{if(n.type==="divider")return n;const a=Object.assign({},e.default,e[n.type]||{},n);return a.props=Fy.merge({},a.props,(KI[n.type]||{}).props,n.props),a})}const wZ={class:"style-edit-container"},CZ={class:"label-config-container"},IZ={class:"label-config-item"},EZ={class:"label-config-item__label"},SZ={class:"label-config-item__input"},MZ={class:"label-config-item"},TZ={class:"label-config-item__label"},PZ={class:"label-config-item__input"},kZ={class:"label-config-item"},LZ={class:"label-config-item__label"},OZ={class:"label-config-item__input"},RZ={class:"label-config-item"},DZ={class:"label-config-item__label"},zZ={class:"label-config-item__input"},BZ={key:0,class:"tab-group-label"},FZ=["onClick"],NZ={class:"tab-group-container"},UZ={class:"label-container"},VZ={key:0},jZ=["onClick"],HZ={key:0,class:"tab-divider"},GZ={class:"value-container"},WZ={key:0,class:"value-container__label"},ZZ=_r({__name:"single-style",props:Bs({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:Bs(["input","update-style"],["update:modelValue"]),setup(t,{emit:e}){const n=t,a=e,s=ll(t,"modelValue"),l=hn(()=>{const L=xZ[s.value.type];return L.type==="multi"?L.tabs.map(k=>({...k,items:qI(k.items)})):[{type:"single",text:"style",items:qI(L.items)}]}),i=hn(()=>AZ[s.value.type]),f=on(void 0),m=on(void 0),y=L=>{m.value=L,m.value&&m.value.menu&&(m.value.menu=m.value.menu.map(k=>({...k,text:k.text||n.trans(k.text_trans||"")||"",subtitle:k.subtitle||n.trans(k.subtitle_trans||"")||""})))},x=L=>{f.value=L,f.value&&f.value.items&&y(f.value.items[0])},A=(L,k,z)=>{k.type!=="divider"&&(k.format&&(L=k.format(L)),z[k.part||"paint"][k.key]=L,a("update-style",z))};$a(()=>{l.value&&x(l.value[0])});const w=(L,k)=>{k["min-zoom"]=L,a("update-style",k)},E=(L,k)=>{k["max-zoom"]=L,a("update-style",k)};return(L,k)=>(Ct(),le("div",wZ,[Jt(at(DA),null,{header:Ce(()=>[_a(Mn(t.trans("map.style-control.layer.title")),1)]),default:Ce(()=>[kt("div",CZ,[kt("div",IZ,[kt("div",EZ,Mn(t.trans("map.style-control.layer.id")),1),kt("div",SZ,Mn(s.value.id),1)]),kt("div",MZ,[kt("div",TZ,Mn(t.trans("map.style-control.layer.type")),1),kt("div",PZ,Mn(s.value.type),1)]),kt("div",kZ,[kt("div",LZ,Mn(t.trans("map.style-control.layer.min-zoom")),1),kt("div",OZ,[Jt(at(o_),{modelValue:s.value["min-zoom"]!=null?s.value["min-zoom"]:0,"onUpdate:modelValue":k[0]||(k[0]=z=>w(z,s.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])]),kt("div",RZ,[kt("div",DZ,Mn(t.trans("map.style-control.layer.max-zoom")),1),kt("div",zZ,[Jt(at(o_),{modelValue:s.value["max-zoom"]!=null?s.value["max-zoom"]:24,"onUpdate:modelValue":k[1]||(k[1]=z=>E(z,s.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])])])]),_:1}),Jt(at(DA),null,{header:Ce(()=>[_a(Mn(t.trans("map.style-control.style.title")),1)]),default:Ce(()=>[l.value&&l.value.length>1?(Ct(),le("div",BZ,[(Ct(!0),le(Mr,null,Eo(l.value,z=>(Ct(),le("div",{key:z.key,class:mo(["tab clickable",{"tab-active":f.value&&f.value.trans==z.trans}]),onClick:oo(F=>x(z),["stop"])},Mn(z.text||t.trans(z.trans)),11,FZ))),128))])):mn("",!0),kt("div",NZ,[kt("div",UZ,[f.value?(Ct(),le("div",VZ,[(Ct(!0),le(Mr,null,Eo(f.value.items,z=>(Ct(),le("div",{key:z.key,class:"clickable",onClick:oo(F=>y(z),["stop"])},[z.type==="divider"?(Ct(),le("div",HZ)):(Ct(),$e(nZ,{key:1,value:s.value[z.part||"paint"][z.key],item:z,text:z.text||t.trans(z.trans),default_value:i.value[z.part||"paint"][z.key],active:m.value&&m.value.key===z.key},null,8,["value","item","text","default_value","active"]))],8,jZ))),128))])):mn("",!0)]),kt("div",GZ,[kt("div",null,[m.value?(Ct(),le("div",WZ,Mn(m.value.text||t.trans(m.value.trans)),1)):mn("",!0),m.value?(Ct(),$e(cZ,{key:1,item:m.value,value:s.value[m.value.part||"paint"][m.value.key],onInput:k[2]||(k[2]=z=>A(z,m.value,s.value)),default_value:i.value[m.value.part||"paint"][m.value.key],trans:t.trans,mapId:t.mapId},null,8,["item","value","default_value","trans","mapId"])):mn("",!0)])])])]),_:1})]))}}),$Z={class:"multi-style-edit-container"},KZ={class:"tab-container"},qZ={class:"tab-item"},YZ=["disabled"],XZ={key:0,class:"style-container"},QZ={class:"add-style-container"},JZ={key:1,class:"style-container"},t$=_r({__name:"multi-style",props:Bs({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0,default:()=>[]},modelModifiers:{}}),emits:Bs(["input","update-style","close"],["update:modelValue"]),setup(t,{emit:e}){const n=e,a=ll(t,"modelValue");Wa(a,()=>{!m.value&&a.value.length>0&&(m.value=a.value[a.value.length-1].id)});const s=k=>{m.value=void 0,lu(()=>{m.value=k})},l=(k,z)=>{n("update-style",{type:"update-one-layer",layer:k,index:a.value.findIndex(F=>F.id===z)})},i=k=>{m.value=void 0,n("update-style",{type:"add-one-layer",layer:new Kv().setStyleType(k).setColor("#fff").build()}),L(!1)},f=k=>{let z=a.value.findIndex(F=>F.id===k);a.value[z]&&(m.value=void 0,n("update-style",{type:"remove-one-layer",index:z,layer:a.value[z]}),a.value.splice(z,1),a.value[0]&&s(a.value[0].id))},m=on(a.value[0].id),y=hn(()=>a.value.map((k,z)=>({text:`#${z+1}`,value:k.id}))),x=hn(()=>a.value.find(k=>k.id===m.value)),A={delete:Np,create:kf,close:i_},[w,E]=Rd(!1),L=k=>{E(k)};return(k,z)=>(Ct(),le("div",$Z,[kt("div",KZ,[kt("div",qZ,[Jt(at(zy),{modelValue:m.value,"onUpdate:modelValue":s,items:y.value},null,8,["modelValue","items"])]),kt("div",{class:"tab-item tab-add clickable",onClick:z[0]||(z[0]=F=>f(m.value)),disabled:!m.value},[kt("div",null,[Jt(at(nr),{size:"14",type:"mdi",path:A.delete,disabled:!m.value},null,8,["path","disabled"])])],8,YZ),at(w)?(Ct(),le("div",{key:1,class:"tab-item tab-add clickable",onClick:z[2]||(z[2]=F=>L(!1))},[Jt(at(nr),{size:"14",type:"mdi",path:A.close},null,8,["path"])])):(Ct(),le("div",{key:0,class:"tab-item tab-add clickable",onClick:z[1]||(z[1]=F=>L(!0))},[kt("div",null,[Jt(at(nr),{size:"14",type:"mdi",path:A.create},null,8,["path"])])]))]),at(w)?(Ct(),le("div",XZ,[kt("div",QZ,[Jt(at(Mh),{onClick:z[3]||(z[3]=F=>i("area"))},{default:Ce(()=>[_a(Mn(t.trans("map.style-control.add.area")),1)]),_:1}),Jt(at(Mh),{onClick:z[4]||(z[4]=F=>i("line"))},{default:Ce(()=>[_a(Mn(t.trans("map.style-control.add.line")),1)]),_:1}),Jt(at(Mh),{onClick:z[5]||(z[5]=F=>i("point"))},{default:Ce(()=>[_a(Mn(t.trans("map.style-control.add.point")),1)]),_:1}),Jt(at(Mh),{onClick:z[6]||(z[6]=F=>i("symbol"))},{default:Ce(()=>[_a(Mn(t.trans("map.style-control.add.symbol")),1)]),_:1})])])):m.value?(Ct(),le("div",JZ,[Jt(ZZ,{modelValue:x.value,trans:t.trans,mapId:t.mapId,onUpdateStyle:z[7]||(z[7]=F=>l(F,m.value))},null,8,["modelValue","trans","mapId"])])):mn("",!0)]))}});function qv(t,e=[]){const n=QW(t,e),a={};return n.getData().forEach((s,l)=>{var i;s.id||(s.id=`${n.id}-${l}`),a[s.id]=((i=s.paint)==null?void 0:i[YI(s)])??1}),xc("MultiMapboxLayerComponent",{...n,getBeforeId(){var s;return(s=n.getData()[0])==null?void 0:s.id},getAllLayerIds(){return n.getData().map(s=>s.id)},getComponentUpdate(){return()=>t$},addToMap(s,l){const i=jG(n,"source");n.getData().forEach(f=>{s.getLayer(f.id)||(!f.source&&(i!=null&&i.id)&&(f.source=i.id),s.addLayer(f,l))})},removeFromMap(s){n.getData().forEach(l=>{s.getLayer(l.id)&&s.removeLayer(l.id)})},moveLayer(s,l){n.getData().forEach(i=>{s.getLayer(i.id)&&s.moveLayer(i.id,l)})},toggleShow(s,l){n.getData().forEach(i=>{s.getLayer(i.id)&&s.setLayoutProperty(i.id,"visibility",l?"visible":"none")})},setOpacity(s,l){n.getData().forEach(i=>{s.getLayer(i.id)&&s.setPaintProperty(i.id,YI(i),l*(a[i.id]??1))})},updateValue(s,l){var y;const{type:i,index:f}=l;let{layer:m}=l;switch(i){case"update-one-layer":e$(s,n.getData()[f],m),n.getData()[f]=Lw({...n.getData()[f],...m});break;case"add-one-layer":m={...m,id:`${n.id}-${n.getData().length}`,source:(y=n.getData()[0])==null?void 0:y.source},s.addLayer(m),n.getData().push(m);break;case"remove-one-layer":s.getLayer(m.id)&&s.removeLayer(m.id),n.getData().splice(f,1);break}}})}function e$(t,e,n){var a,s;t.setLayerZoomRange(e.id,n["min-zoom"]??e["min-zoom"]??0,n["max-zoom"]??e["max-zoom"]??24);for(const l in n.paint)n.paint[l]!==((a=e.paint)==null?void 0:a[l])&&t.setPaintProperty(e.id,l,n.paint[l]);for(const l in n.layout)n.layout[l]!==((s=e.layout)==null?void 0:s[l])&&t.setLayoutProperty(e.id,l,n.layout[l])}function YI(t){return t.type==="symbol"?"icon-opacity":`${t.type}-opacity`}function Yv(t,e){const n=Lg(t,e),a=m2();return xc("ListViewUIComponent",{...n,...a,get type(){return"list"},opacity:1,selected:!1,color:void 0,config:{disable_delete:!1,disabled_opacity:!1,component:void 0},index:0,group:void 0,show:!0,shows:[],legend:void 0})}function XI(t,e){const n=Lg(t,e);return xc("MetadataComponent",{...n,type:"metadata",metadata:e})}function f3(t,e){const n=Lg(t,e);return xc("DatasetPartMapboxSourceComponent",{...n,get type(){return"source"},addToMap(a){n.id&&!a.getSource(n.id)&&a.addSource(n.id,this.getMapboxSource())},removeFromMap(a){n.id&&a.getSource(n.id)&&a.removeSource(n.id)},getMapboxSource(){throw new Error("Method not implemented.")},getFieldsInfo(){throw new Error("Method not implemented.")},getDataInfo(){throw new Error("Method not implemented.")}})}function d3(t,e){const n=f3(t,e);return xc("GeojsonSourceComponent",{...n,getMapboxSource:()=>({type:"geojson",data:n.getData()||{type:"FeatureCollection",features:[]}}),getFieldsInfo:()=>[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:"bbox"},{trans:"map.layer-control.field.geojson",value:"geojson",inline:!0}],getDataInfo:()=>{var s;const a=Jc(n,l=>l.type==="metadata");return{name:n.getName(),bbox:(s=a==null?void 0:a.metadata)==null?void 0:s.bbox,geojson:JSON.stringify(n.getData(),void 0,2)}},updateData(a,s){const l=a.getSource(n.id);l&&l.setData(s),n.setData(s)}})}function p3(t,e){const n=f3(t,e);return xc("RasterSourceComponent",{...n,getMapboxSource:()=>n.getData(),getFieldsInfo:()=>[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:"bbox"},{trans:"map.layer-control.field.tiles",value:"tiles"}],getDataInfo:()=>{var l,i;const a=Jc(n,f=>f.type==="metadata"),s=n.getData();return{name:n.getName(),bbox:((l=a==null?void 0:a.metadata)==null?void 0:l.bbox)||(s==null?void 0:s.bounds),tiles:(i=s==null?void 0:s.tiles)==null?void 0:i.join(`,
`)}}})}const n$=_r({__name:"ComponentManagementControl",props:{...qa},setup(t){const e=Bu(),n=t,{mapId:a}=bo(n),s=pb(a.value);function l(m){QG(a.value,m.id)}const i=hn(()=>{var m;return((m=XG(a.value))==null?void 0:m.value)||[]}),f=on([]);return Wa(i,()=>{var m;f.value=(s==null?void 0:s.components)||[],(m=e==null?void 0:e.proxy)==null||m.$forceUpdate()},{deep:!0}),(m,y)=>(Ct(!0),le(Mr,null,Eo(f.value,x=>(Ct(),$e(Ga(x.component()),li({key:x.id,ref_for:!0},x.attr,{onClose:A=>l(x)}),null,16,["onClose"]))),128))}}),r$={},i$={class:"map-row"};function o$(t,e,n,a,s,l){return Ct(),le("div",i$,[Zn(t.$slots,"default")])}const m3=Yn(r$,[["render",o$]]),a$={class:"map-row"},s$={class:"map-col-12"},l$={__name:"xyz-json",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=ll(t,"modelValue"),{mapId:n}=bo(),{trans:a}=Ka(n.value);return(s,l)=>(Ct(),le("div",a$,[Zn(s.$slots,"default"),kt("div",s$,[Jt(at(ua),{modelValue:e.value.url,"onUpdate:modelValue":l[0]||(l[0]=i=>e.value.url=i),label:at(a)("map.layer-control.field.url")},null,8,["modelValue","label"])])]))}},u$={class:"map-row"},c$={class:"map-col-12"},h$={class:"map-col-6"},f$={class:"map-col-6"},d$={class:"map-col-6"},p$={class:"map-col-6"},m$={class:"map-col-6"},g$={class:"map-col-6"},v$={__name:"xyz-url",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=ll(t,"modelValue"),{mapId:n}=bo(),{trans:a}=Ka(n.value);return(s,l)=>(Ct(),le("div",u$,[Zn(s.$slots,"default"),kt("div",c$,[Jt(at(ua),{modelValue:e.value.url,"onUpdate:modelValue":l[0]||(l[0]=i=>e.value.url=i),label:at(a)("map.layer-control.field.url")},null,8,["modelValue","label"])]),kt("div",h$,[Jt(at(ua),{modelValue:e.value.minzoom,"onUpdate:modelValue":l[1]||(l[1]=i=>e.value.minzoom=i),label:at(a)("map.layer-control.field.minzoom")},null,8,["modelValue","label"])]),kt("div",f$,[Jt(at(ua),{modelValue:e.value.maxzoom,"onUpdate:modelValue":l[2]||(l[2]=i=>e.value.maxzoom=i),label:at(a)("map.layer-control.field.maxzoom")},null,8,["modelValue","label"])]),e.value.bounds?(Ct(),le(Mr,{key:0},[kt("div",d$,[Jt(at(ua),{modelValue:e.value.bounds[0],"onUpdate:modelValue":l[3]||(l[3]=i=>e.value.bounds[0]=i),label:at(a)("map.layer-control.field.bound.minx")},null,8,["modelValue","label"])]),kt("div",p$,[Jt(at(ua),{modelValue:e.value.bounds[1],"onUpdate:modelValue":l[4]||(l[4]=i=>e.value.bounds[1]=i),label:at(a)("map.layer-control.field.bound.miny")},null,8,["modelValue","label"])]),kt("div",m$,[Jt(at(ua),{modelValue:e.value.bounds[2],"onUpdate:modelValue":l[5]||(l[5]=i=>e.value.bounds[2]=i),label:at(a)("map.layer-control.field.bound.maxx")},null,8,["modelValue","label"])]),kt("div",g$,[Jt(at(ua),{modelValue:e.value.bounds[3],"onUpdate:modelValue":l[6]||(l[6]=i=>e.value.bounds[3]=i),label:at(a)("map.layer-control.field.bound.maxy")},null,8,["modelValue","label"])])],64)):mn("",!0)]))}},y$={class:"map-row"},_$={class:"map-col-12"},b$={class:"map-col-12"},x$={key:0,class:"map-col-12"},A$={__name:"geojson-upload",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const{read:e}=qO(),n=["point","line","area"],a=ll(t,"modelValue"),s=on(null),{mapId:l}=bo(),{trans:i}=Ka(l.value);function f(m){e(m).then(y=>{a.value.geojson=y,s.value=y?JSON.stringify(y,null,2):""})}return(m,y)=>(Ct(),le("div",y$,[Zn(m.$slots,"default"),kt("div",_$,[Jt(at(zy),{modelValue:a.value.type,"onUpdate:modelValue":y[0]||(y[0]=x=>a.value.type=x),items:n,label:at(i)("map.layer-control.field.type")},null,8,["modelValue","label"])]),kt("div",b$,[Jt(at(jO),{onChange:f,accept:".json,.geojson"})]),s.value?(Ct(),le("div",x$,[Jt(at(KM),{modelValue:s.value,rows:"4",readonly:""},null,8,["modelValue"])])):mn("",!0)]))}};function w$(t){const e=yf(t.name,null,!0),n=Yv(t.name);n.color=t.color||B1();const a=yf(t.name,null,!0),s=qv(t.name,[new Kv().setStyleType(t.type).setColor(n.color).setOpacity(n.opacity).build()]);a.add(s),a.add(n);const l=C$(t.geojson),i=e3(t.name,{fields:l.fields});i.setItems(l.items);const f=o3(t.name);f.addMenus([F1(),N1()]);const m=d3(t.name,{type:"FeatureCollection",features:[]});return e.add(m),e.add(i),e.add(a),e.add(f),e}function C$(t){const e=[],n=new Set,a=l=>{const{properties:i={},geometry:f}=l;return Object.keys(i).forEach(m=>n.add(m)),{...i,geometry:f}};if(t.type==="FeatureCollection")for(const l of t.features)e.push(a(l));else t.type==="Feature"&&e.push(a(t));const s=Array.from(n).map(l=>({text:l,value:l}));return{items:e,fields:s}}function g3(t){const e=yf(t.name,null,!0),n=p3(t.name,{name:t.name,type:"raster",tiles:t.tiles,maxzoom:t.maxZoom,minzoom:t.minZoom,bounds:t.bounds}),a=qv(t.name,[{type:"raster"}]),s=Yv(t.name),l=yf(t.name,null,!0);return e.add(n),l.add(s),l.add(a),e.add(l),e}class g2{get default_value(){return{}}validate(e){return!!e.name}}class I$ extends g2{get component(){return()=>l$}validate(e){return!(!e.name||!e.url)}get create(){return e=>g3({...e})}}class E$ extends g2{get component(){return()=>v$}get default_value(){return{bounds:[-180,-85.051129,180,85.051129],minzoom:0,maxzoom:24}}validate(e){return!(!e.name||!e.url)}get create(){return e=>g3({...e,tiles:[e.url]})}}class S$ extends g2{get component(){return()=>A$}get default_value(){return{type:"point",geojson:null}}validate(e){return!(!e.name||!e.geojson||!e.type)}get create(){return e=>w$({...e})}}const QI={"raster-url":"Raster url layer","raster-json":"Raster json layer",geojson:"Geojson layer"};class M${constructor(e){this.setType(e)}setType(e){this.helper=T$.create(e)}get default_value(){return this.helper.default_value}get create(){return this.helper.create}get component(){return this.helper.component||m3}validate(e){return this.helper.validate(e)}}const T$={create(t){switch(t){case"raster-url":return new E$;case"raster-json":return new I$;case"geojson":return new S$;default:throw new Error("not support type: "+t)}}},P$={class:"create-control-container"},k$={class:"form-container"},L$={class:"map-col-12"},O$={class:"map-col-12"},R$={name:"create-layer-control"},D$=Object.assign(R$,{props:{show:Boolean},emits:["update:show"],setup(t,{emit:e}){const n=t,{mapId:a,moduleContainerProps:s,callMap:l}=bo(n),{trans:i}=Ka(a.value),f=e,m=hn({get(){return n.show},set(B){f("update:show",B)}}),y={type:"geojson"},x=on(1),A=on(()=>m3),w=new M$(y.type),E=on({...y,config:{name:"",...w.default_value}}),L=Object.keys(QI).map(B=>({value:B,text:QI[B]}));function k(B){w.setType(B),A.value=w.component,E.value={config:{name:E.value.config.name,...w.default_value},type:E.value.type}}function z(B){const U=w.create;if(!U||!w.validate(B.config))return;let $=U(B.config);l(q=>{XT(q.id,$)}),F(),m.value=!1}function F(){w.setType(y.type),E.value={...y,config:{name:"",...w.default_value}},x.value++}function D(){F()}return $a(()=>{k(E.value.type)}),(B,U)=>(Ct(),$e(at(ss),Za(ka(at(s))),{draggable:Ce($=>[Jt(at(jd),li({show:m.value,"onUpdate:show":U[4]||(U[4]=q=>m.value=q)},$,{width:400,height:300,onClose:D,title:at(i)("map.layer-control.create.title")}),{default:Ce(()=>[kt("div",P$,[kt("div",k$,[(Ct(),$e(Ga(A.value()),{modelValue:E.value.config,"onUpdate:modelValue":U[2]||(U[2]=q=>E.value.config=q),class:"create-control-form",key:x.value},{default:Ce(()=>[kt("div",L$,[Jt(at(ua),{modelValue:E.value.config.name,"onUpdate:modelValue":U[0]||(U[0]=q=>E.value.config.name=q),label:at(i)("map.layer-control.field.name")},null,8,["modelValue","label"])]),kt("div",O$,[Jt(at(zy),{modelValue:E.value.type,"onUpdate:modelValue":[U[1]||(U[1]=q=>E.value.type=q),k],items:at(L),label:at(i)("map.layer-control.field.type")},null,8,["modelValue","items","label"])])]),_:1},8,["modelValue"]))]),Jt(at(Mh),{onClick:U[3]||(U[3]=q=>z(E.value)),class:"btn-container"},{default:Ce(()=>[_a(Mn(at(i)("map.layer-control.create-btn")),1)]),_:1})])]),_:2},1040,["show","title"])]),_:1},16))}}),z$=Yn(D$,[["__scopeId","data-v-2f2c18bd"]]),B$={class:"menu-divider"},F$=_r({__name:"menu-divider",props:{item:{},data:{}},setup(t){return(e,n)=>(Ct(),le("div",B$))}}),N$=["title"],U$=_r({__name:"menu-item",props:{item:{},data:{},mapId:{}},setup(t){return(e,n)=>(Ct(),le("button",li(e.$attrs,{class:"menu-item",title:e.item.name}),[e.item.icon?(Ct(),$e(at(nr),{key:0,size:"14",type:"mdi",path:e.item.icon},null,8,["path"])):mn("",!0)],16,N$))}}),V$=_r({__name:"index",props:{item:{},data:{},mapId:{}},setup(t){const e=t,n=hn(()=>{switch(e.item.type){case"divider":return F$}return U$});return(a,s)=>(Ct(),$e(Ga(n.value),li({item:a.item,data:a.data},a.$attrs,{mapId:a.mapId}),null,16,["item","data","mapId"]))}}),v2=t=>(th("data-v-669b6ae8"),t=t(),eh(),t),j$={class:"identify-control-container"},H$={class:"identify-control-header"},G$=["innerHTML"],W$=v2(()=>kt("hr",{class:"identify-control-separator"},null,-1)),Z$={class:"identify-control-body"},$$={key:0,class:"identify-control-state"},K$={class:"identify-control-state__content"},q$=v2(()=>kt("div",{class:"identify-control-state__loading"},null,-1)),Y$={key:1,class:"identify-control-state"},X$={class:"identify-control-state__content"},Q$={key:2,class:"identify-control-state"},J$={class:"identify-control-state__content"},tK={class:"identify-control-list-item__container"},eK=["title"],nK={class:"identify-control-list-item__child-container"},rK=v2(()=>kt("div",{class:"identify-control-child-item__spacer"},null,-1)),iK={class:"identify-control-child-item__action"},oK=_r({__name:"IdentifyControl",props:{...qa},setup(t){const e={icon:oD,boxSelect:gD,mapClick:QR},n=t,{mapId:a,moduleContainerProps:s}=bo(n),{trans:l,setLocale:i}=Ka(a.value),{format:f}=ET(a.value);i({map:{identify:{title:"Identify",point:"Point",no_selection:"Please select a point on the map",no_data:"No data found",loading:"Loading..."}}});const m=on([]);on();const y=hn(()=>JT(a.value).value);Wa(y,()=>{A()},{deep:!0}),$a(()=>{A()});const x=hn(()=>m.value);function A(){w()}function w(){m.value=vb(a.value,"identify")||[]}const E=hn(()=>m.value.length>0),{add:L,remove:k,isActive:z}=GA(a.value,new Jw().setHandler($)),{add:F,remove:D,isActive:B}=GA(a.value,new Ij().setHandler(q)),U=sl({latitude:0,longitude:0});function $(we){U.latitude=we.lngLat.lat,U.longitude=we.lngLat.lng,pt(we.point)}function q(we){xe(),we&&pt(we)}const tt=sl({items:[],loading:!1}),Y=hn(()=>{if(!U)return"";const we=f(U);return we.longitude+", &nbsp;"+we.latitude}),G=hn(()=>U.latitude!==0||U.longitude!==0);function rt(we){tt.items=we}async function pt(we){tt.loading=!0;try{const qe=Date.now(),fe=await XW(x.value,a.value,we),ge=Date.now()-qe;ge<500&&await new Promise(ne=>setTimeout(ne,500-ge)),rt(fe.filter(ne=>ne.features.length>0))}finally{tt.loading=!1}}const Q=on(!1);function ot(){Q.value=!Q.value,Tt()}function Z(){Kt(),mb(a.value,void 0,"identify"),rt([])}function Kt(){ue(),xe()}const Ft=on(!1);function Tt(){Ft.value?ue():ie()}function ie(){Ft.value=!0,L()}function ue(){Ft.value=!1,k()}const je=on(!1);function jt(){je.value?xe():Ut()}function Ut(){je.value=!0,F()}function xe(){je.value=!1,D()}function Fe(we,qe,fe){qe.type!="item"||!we||!qe.click||qe.click(we,a.value,fe)}return(we,qe)=>(Ct(),$e(at(ss),Za(ka(at(s))),{btn:Ce(()=>[E.value?(Ct(),$e(at(yo),{key:0,tooltip:at(l)("map.identify.title"),onClick:qe[0]||(qe[0]=oo(fe=>ot(),["stop"])),active:Q.value},{default:Ce(()=>[Jt(at(nr),{size:"16",type:"mdi",path:e.icon},null,8,["path"])]),_:1},8,["tooltip","active"])):mn("",!0)]),draggable:Ce(fe=>[Q.value?(Ct(),$e(at(jd),li({key:0,show:Q.value,"onUpdate:show":qe[3]||(qe[3]=ge=>Q.value=ge)},fe,{width:400,height:300,onClose:Z,title:at(l)("map.identify.title")}),{"extra-btn":Ce(()=>[Jt(at(Mh),{onClick:qe[1]||(qe[1]=oo(ge=>Tt(),["stop"])),active:at(z),disabled:at(z)},{default:Ce(()=>[Jt(at(nr),{size:"16",type:"mdi",path:e.mapClick},null,8,["path"])]),_:1},8,["active","disabled"]),Jt(at(Mh),{onClick:qe[2]||(qe[2]=oo(ge=>jt(),["stop"])),active:at(B),disabled:at(B)},{default:Ce(()=>[Jt(at(nr),{size:"16",type:"mdi",path:e.boxSelect},null,8,["path"])]),_:1},8,["active","disabled"])]),default:Ce(()=>[kt("div",j$,[kt("div",H$,[kt("b",null,Mn(at(l)("map.identify.point"))+":",1),kt("span",{innerHTML:Y.value},null,8,G$)]),W$,kt("div",Z$,[tt.loading?(Ct(),le("div",$$,[kt("div",K$,[q$,kt("span",null,Mn(at(l)("map.identify.loading")),1)])])):G.value?tt.items.length===0?(Ct(),le("div",Q$,[kt("div",J$,[kt("span",null,Mn(at(l)("map.identify.no_data")),1)])])):(Ct(!0),le(Mr,{key:3},Eo(tt.items,ge=>(Ct(),le("div",{key:ge.identify.id,class:"identify-control-list-item"},[kt("div",tK,[kt("div",{class:"identify-control-list-item__header",title:ge.identify.getName()},Mn(ge.identify.getName()||"---"),9,eK),kt("div",nK,[(Ct(!0),le(Mr,null,Eo(ge.features,ne=>(Ct(),le("div",{class:"identify-control-child-item",key:ne.id},[kt("span",null,Mn(ne.name),1),rK,kt("div",iK,[(Ct(!0),le(Mr,null,Eo(ge.identify.getMenus(),(Se,We)=>(Ct(),$e(V$,{key:We,class:"layer-item__button",item:Se,data:ne,mapId:at(a),onClick:In=>Fe(ge.identify,Se,ne.data)},null,8,["item","data","mapId","onClick"]))),128))])]))),128))])])]))),128)):(Ct(),le("div",Y$,[kt("div",X$,[kt("span",null,Mn(at(l)("map.identify.no_selection")),1)])]))])])]),_:2},1040,["show","title"])):mn("",!0)]),_:1},16))}}),aK=Yn(oK,[["__scopeId","data-v-669b6ae8"]]),sK=t=>(th("data-v-4881fa35"),t=t(),eh(),t),lK=sK(()=>kt("button",{type:"button",class:"btn-close"},"Close",-1)),uK=[lK],cK=_r({__name:"context-menu",props:{zIndex:{type:[String,Number],default:"9"}},setup(t,{expose:e}){const a=wM({mobile:0,tablet:640,laptop:1024,desktop:1280}).smallerOrEqual("tablet"),s=t,l=on(),i=on(!1),f=on(null),m=on(null);kO(l,()=>x());function y(A){i.value=!0;const w=l.value;if(w)if((!f.value||!m.value)&&(w.style.visibility="hidden",w.style.display="block",f.value=w.offsetWidth,m.value=w.offsetHeight,w.removeAttribute("style")),w.style.position="fixed",w.style.zIndex=s.zIndex+"",!a.value)f.value+A.pageX>=window.innerWidth?w.style.left=A.pageX-f.value+10+"px":w.style.left=A.pageX-10+"px",m.value+A.pageY>=window.innerHeight?w.style.top=A.pageY-m.value+10+"px":w.style.top=A.pageY-10+"px";else{w.style.top="0px",w.style.left="0px",w.style.right="0px",w.style.bottom="0px",w.style.background="#00000085";const E=w.childNodes[0];E.style.width="100%",E.style.position="absolute",E.style.top="50%",E.style.left="50%",E.style.transform="translate(-50%, -50%)",E.style.padding="40px",E.style.height="100%",E.style.overflow="auto"}}function x(){f.value=null,m.value=null,i.value=!1;const A=l.value;A&&(A.style.display="none")}return e({open:y,close:x}),(A,w)=>(Ct(),le("div",{class:"menu-container",ref_key:"target",ref:l},[kt("div",null,[Zn(A.$slots,"default",{},void 0,!0)]),i.value&&at(a)?(Ct(),le("div",{key:0,onClick:w[0]||(w[0]=E=>x())},uK)):mn("",!0)],512))}}),y2=Yn(cK,[["__scopeId","data-v-4881fa35"]]);var v3={exports:{}};const hK=ky(Yk);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function JI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Dh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JI(Object(n),!0).forEach(function(a){fK(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JI(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function U1(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?U1=function(e){return typeof e}:U1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U1(t)}function fK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bc(){return bc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},bc.apply(this,arguments)}function dK(t,e){if(t==null)return{};var n={},a=Object.keys(t),s,l;for(l=0;l<a.length;l++)s=a[l],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function pK(t,e){if(t==null)return{};var n=dK(t,e),a,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)a=l[s],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function mK(t){return gK(t)||vK(t)||yK(t)||_K()}function gK(t){if(Array.isArray(t))return KA(t)}function vK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yK(t,e){if(t){if(typeof t=="string")return KA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KA(t,e)}}function KA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _K(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bK="1.14.0";function wf(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Rf=wf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Zy=wf(/Edge/i),tE=wf(/firefox/i),Xv=wf(/safari/i)&&!wf(/chrome/i)&&!wf(/android/i),y3=wf(/iP(ad|od|hone)/i),xK=wf(/chrome/i)&&wf(/android/i),_3={capture:!1,passive:!1};function Si(t,e,n){t.addEventListener(e,n,!Rf&&_3)}function yi(t,e,n){t.removeEventListener(e,n,!Rf&&_3)}function y_(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function AK(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function $c(t,e,n,a){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&y_(t,e):y_(t,e))||a&&t===n)return t;if(t===n)break}while(t=AK(t))}return null}var eE=/\s+/g;function sa(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var a=(" "+t.className+" ").replace(eE," ").replace(" "+e+" "," ");t.className=(a+(n?" "+e:"")).replace(eE," ")}}function pr(t,e,n){var a=t&&t.style;if(a){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=n+(typeof n=="string"?"":"px")}}function Pp(t,e){var n="";if(typeof t=="string")n=t;else do{var a=pr(t,"transform");a&&a!=="none"&&(n=a+" "+n)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(n)}function b3(t,e,n){if(t){var a=t.getElementsByTagName(e),s=0,l=a.length;if(n)for(;s<l;s++)n(a[s],s);return a}return[]}function kh(){var t=document.scrollingElement;return t||document.documentElement}function Xo(t,e,n,a,s){if(!(!t.getBoundingClientRect&&t!==window)){var l,i,f,m,y,x,A;if(t!==window&&t.parentNode&&t!==kh()?(l=t.getBoundingClientRect(),i=l.top,f=l.left,m=l.bottom,y=l.right,x=l.height,A=l.width):(i=0,f=0,m=window.innerHeight,y=window.innerWidth,x=window.innerHeight,A=window.innerWidth),(e||n)&&t!==window&&(s=s||t.parentNode,!Rf))do if(s&&s.getBoundingClientRect&&(pr(s,"transform")!=="none"||n&&pr(s,"position")!=="static")){var w=s.getBoundingClientRect();i-=w.top+parseInt(pr(s,"border-top-width")),f-=w.left+parseInt(pr(s,"border-left-width")),m=i+l.height,y=f+l.width;break}while(s=s.parentNode);if(a&&t!==window){var E=Pp(s||t),L=E&&E.a,k=E&&E.d;E&&(i/=k,f/=L,A/=L,x/=k,m=i+x,y=f+A)}return{top:i,left:f,bottom:m,right:y,width:A,height:x}}}function nE(t,e,n){for(var a=Cd(t,!0),s=Xo(t)[e];a;){var l=Xo(a)[n],i=void 0;if(i=s>=l,!i)return a;if(a===kh())break;a=Cd(a,!1)}return!1}function bg(t,e,n,a){for(var s=0,l=0,i=t.children;l<i.length;){if(i[l].style.display!=="none"&&i[l]!==Fr.ghost&&(a||i[l]!==Fr.dragged)&&$c(i[l],n.draggable,t,!1)){if(s===e)return i[l];s++}l++}return null}function _2(t,e){for(var n=t.lastElementChild;n&&(n===Fr.ghost||pr(n,"display")==="none"||e&&!y_(n,e));)n=n.previousElementSibling;return n||null}function ya(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Fr.clone&&(!e||y_(t,e))&&n++;return n}function rE(t){var e=0,n=0,a=kh();if(t)do{var s=Pp(t),l=s.a,i=s.d;e+=t.scrollLeft*l,n+=t.scrollTop*i}while(t!==a&&(t=t.parentNode));return[e,n]}function wK(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t[n][a])return Number(n)}return-1}function Cd(t,e){if(!t||!t.getBoundingClientRect)return kh();var n=t,a=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var s=pr(n);if(n.clientWidth<n.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return kh();if(a||e)return n;a=!0}}while(n=n.parentNode);return kh()}function CK(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Wx(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Qv;function x3(t,e){return function(){if(!Qv){var n=arguments,a=this;n.length===1?t.call(a,n[0]):t.apply(a,n),Qv=setTimeout(function(){Qv=void 0},e)}}}function IK(){clearTimeout(Qv),Qv=void 0}function A3(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function b2(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function iE(t,e){pr(t,"position","absolute"),pr(t,"top",e.top),pr(t,"left",e.left),pr(t,"width",e.width),pr(t,"height",e.height)}function Zx(t){pr(t,"position",""),pr(t,"top",""),pr(t,"left",""),pr(t,"width",""),pr(t,"height","")}var ol="Sortable"+new Date().getTime();function EK(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(s){if(!(pr(s,"display")==="none"||s===Fr.ghost)){t.push({target:s,rect:Xo(s)});var l=Dh({},t[t.length-1].rect);if(s.thisAnimationDuration){var i=Pp(s,!0);i&&(l.top-=i.f,l.left-=i.e)}s.fromRect=l}})}},addAnimationState:function(a){t.push(a)},removeAnimationState:function(a){t.splice(wK(t,{target:a}),1)},animateAll:function(a){var s=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var l=!1,i=0;t.forEach(function(f){var m=0,y=f.target,x=y.fromRect,A=Xo(y),w=y.prevFromRect,E=y.prevToRect,L=f.rect,k=Pp(y,!0);k&&(A.top-=k.f,A.left-=k.e),y.toRect=A,y.thisAnimationDuration&&Wx(w,A)&&!Wx(x,A)&&(L.top-A.top)/(L.left-A.left)===(x.top-A.top)/(x.left-A.left)&&(m=MK(L,w,E,s.options)),Wx(A,x)||(y.prevFromRect=x,y.prevToRect=A,m||(m=s.options.animation),s.animate(y,L,A,m)),m&&(l=!0,i=Math.max(i,m),clearTimeout(y.animationResetTimer),y.animationResetTimer=setTimeout(function(){y.animationTime=0,y.prevFromRect=null,y.fromRect=null,y.prevToRect=null,y.thisAnimationDuration=null},m),y.thisAnimationDuration=m)}),clearTimeout(e),l?e=setTimeout(function(){typeof a=="function"&&a()},i):typeof a=="function"&&a(),t=[]},animate:function(a,s,l,i){if(i){pr(a,"transition",""),pr(a,"transform","");var f=Pp(this.el),m=f&&f.a,y=f&&f.d,x=(s.left-l.left)/(m||1),A=(s.top-l.top)/(y||1);a.animatingX=!!x,a.animatingY=!!A,pr(a,"transform","translate3d("+x+"px,"+A+"px,0)"),this.forRepaintDummy=SK(a),pr(a,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),pr(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){pr(a,"transition",""),pr(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},i)}}}}function SK(t){return t.offsetWidth}function MK(t,e,n,a){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*a.animation}var Nm=[],$x={initializeByDefault:!0},$y={mount:function(e){for(var n in $x)$x.hasOwnProperty(n)&&!(n in e)&&(e[n]=$x[n]);Nm.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Nm.push(e)},pluginEvent:function(e,n,a){var s=this;this.eventCanceled=!1,a.cancel=function(){s.eventCanceled=!0};var l=e+"Global";Nm.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][l]&&n[i.pluginName][l](Dh({sortable:n},a)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](Dh({sortable:n},a)))})},initializePlugins:function(e,n,a,s){Nm.forEach(function(f){var m=f.pluginName;if(!(!e.options[m]&&!f.initializeByDefault)){var y=new f(e,n,e.options);y.sortable=e,y.options=e.options,e[m]=y,bc(a,y.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var i=this.modifyOption(e,l,e.options[l]);typeof i<"u"&&(e.options[l]=i)}},getEventProperties:function(e,n){var a={};return Nm.forEach(function(s){typeof s.eventProperties=="function"&&bc(a,s.eventProperties.call(n[s.pluginName],e))}),a},modifyOption:function(e,n,a){var s;return Nm.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[n]=="function"&&(s=l.optionListeners[n].call(e[l.pluginName],a))}),s}};function kv(t){var e=t.sortable,n=t.rootEl,a=t.name,s=t.targetEl,l=t.cloneEl,i=t.toEl,f=t.fromEl,m=t.oldIndex,y=t.newIndex,x=t.oldDraggableIndex,A=t.newDraggableIndex,w=t.originalEvent,E=t.putSortable,L=t.extraEventProperties;if(e=e||n&&n[ol],!!e){var k,z=e.options,F="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Rf&&!Zy?k=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(k=document.createEvent("Event"),k.initEvent(a,!0,!0)),k.to=i||n,k.from=f||n,k.item=s||n,k.clone=l,k.oldIndex=m,k.newIndex=y,k.oldDraggableIndex=x,k.newDraggableIndex=A,k.originalEvent=w,k.pullMode=E?E.lastPutMode:void 0;var D=Dh(Dh({},L),$y.getEventProperties(a,e));for(var B in D)k[B]=D[B];n&&n.dispatchEvent(k),z[F]&&z[F].call(e,k)}}var TK=["evt"],tu=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.evt,l=pK(a,TK);$y.pluginEvent.bind(Fr)(e,n,Dh({dragEl:Bn,parentEl:ga,ghostEl:ii,rootEl:Yo,nextEl:xp,lastDownEl:V1,cloneEl:va,cloneHidden:Ad,dragStarted:Lv,putSortable:Os,activeSortable:Fr.active,originalEvent:s,oldIndex:Ym,oldDraggableIndex:Jv,newIndex:Pu,newDraggableIndex:bd,hideGhostForTarget:E3,unhideGhostForTarget:S3,cloneNowHidden:function(){Ad=!0},cloneNowShown:function(){Ad=!1},dispatchSortableEvent:function(f){Il({sortable:n,name:f,originalEvent:s})}},l))};function Il(t){kv(Dh({putSortable:Os,cloneEl:va,targetEl:Bn,rootEl:Yo,oldIndex:Ym,oldDraggableIndex:Jv,newIndex:Pu,newDraggableIndex:bd},t))}var Bn,ga,ii,Yo,xp,V1,va,Ad,Ym,Pu,Jv,bd,A1,Os,Wm=!1,__=!1,b_=[],_p,Gc,Kx,qx,oE,aE,Lv,Um,ty,ey=!1,w1=!1,j1,el,Yx=[],qA=!1,x_=[],yb=typeof document<"u",C1=y3,sE=Zy||Rf?"cssFloat":"float",PK=yb&&!xK&&!y3&&"draggable"in document.createElement("div"),w3=function(){if(yb){if(Rf)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),C3=function(e,n){var a=pr(e),s=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),l=bg(e,0,n),i=bg(e,1,n),f=l&&pr(l),m=i&&pr(i),y=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Xo(l).width,x=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+Xo(i).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&f.float&&f.float!=="none"){var A=f.float==="left"?"left":"right";return i&&(m.clear==="both"||m.clear===A)?"vertical":"horizontal"}return l&&(f.display==="block"||f.display==="flex"||f.display==="table"||f.display==="grid"||y>=s&&a[sE]==="none"||i&&a[sE]==="none"&&y+x>s)?"vertical":"horizontal"},kK=function(e,n,a){var s=a?e.left:e.top,l=a?e.right:e.bottom,i=a?e.width:e.height,f=a?n.left:n.top,m=a?n.right:n.bottom,y=a?n.width:n.height;return s===f||l===m||s+i/2===f+y/2},LK=function(e,n){var a;return b_.some(function(s){var l=s[ol].options.emptyInsertThreshold;if(!(!l||_2(s))){var i=Xo(s),f=e>=i.left-l&&e<=i.right+l,m=n>=i.top-l&&n<=i.bottom+l;if(f&&m)return a=s}}),a},I3=function(e){function n(l,i){return function(f,m,y,x){var A=f.options.group.name&&m.options.group.name&&f.options.group.name===m.options.group.name;if(l==null&&(i||A))return!0;if(l==null||l===!1)return!1;if(i&&l==="clone")return l;if(typeof l=="function")return n(l(f,m,y,x),i)(f,m,y,x);var w=(i?f:m).options.group.name;return l===!0||typeof l=="string"&&l===w||l.join&&l.indexOf(w)>-1}}var a={},s=e.group;(!s||U1(s)!="object")&&(s={name:s}),a.name=s.name,a.checkPull=n(s.pull,!0),a.checkPut=n(s.put),a.revertClone=s.revertClone,e.group=a},E3=function(){!w3&&ii&&pr(ii,"display","none")},S3=function(){!w3&&ii&&pr(ii,"display","")};yb&&document.addEventListener("click",function(t){if(__)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),__=!1,!1},!0);var bp=function(e){if(Bn){e=e.touches?e.touches[0]:e;var n=LK(e.clientX,e.clientY);if(n){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);a.target=a.rootEl=n,a.preventDefault=void 0,a.stopPropagation=void 0,n[ol]._onDragOver(a)}}},OK=function(e){Bn&&Bn.parentNode[ol]._isOutsideThisEl(e.target)};function Fr(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=bc({},e),t[ol]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return C3(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,f){i.setData("Text",f.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Fr.supportPointer!==!1&&"PointerEvent"in window&&!Xv,emptyInsertThreshold:5};$y.initializePlugins(this,t,n);for(var a in n)!(a in e)&&(e[a]=n[a]);I3(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:PK,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Si(t,"pointerdown",this._onTapStart):(Si(t,"mousedown",this._onTapStart),Si(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Si(t,"dragover",this),Si(t,"dragenter",this)),b_.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),bc(this,EK())}Fr.prototype={constructor:Fr,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Um=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Bn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,a=this.el,s=this.options,l=s.preventOnFilter,i=e.type,f=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,m=(f||e).target,y=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||m,x=s.filter;if(VK(a),!Bn&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||s.disabled)&&!y.isContentEditable&&!(!this.nativeDraggable&&Xv&&m&&m.tagName.toUpperCase()==="SELECT")&&(m=$c(m,s.draggable,a,!1),!(m&&m.animated)&&V1!==m)){if(Ym=ya(m),Jv=ya(m,s.draggable),typeof x=="function"){if(x.call(this,e,m,this)){Il({sortable:n,rootEl:y,name:"filter",targetEl:m,toEl:a,fromEl:a}),tu("filter",n,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(x&&(x=x.split(",").some(function(A){if(A=$c(y,A.trim(),a,!1),A)return Il({sortable:n,rootEl:A,name:"filter",targetEl:m,fromEl:a,toEl:a}),tu("filter",n,{evt:e}),!0}),x)){l&&e.cancelable&&e.preventDefault();return}s.handle&&!$c(y,s.handle,a,!1)||this._prepareDragStart(e,f,m)}}},_prepareDragStart:function(e,n,a){var s=this,l=s.el,i=s.options,f=l.ownerDocument,m;if(a&&!Bn&&a.parentNode===l){var y=Xo(a);if(Yo=l,Bn=a,ga=Bn.parentNode,xp=Bn.nextSibling,V1=a,A1=i.group,Fr.dragged=Bn,_p={target:Bn,clientX:(n||e).clientX,clientY:(n||e).clientY},oE=_p.clientX-y.left,aE=_p.clientY-y.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Bn.style["will-change"]="all",m=function(){if(tu("delayEnded",s,{evt:e}),Fr.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!tE&&s.nativeDraggable&&(Bn.draggable=!0),s._triggerDragStart(e,n),Il({sortable:s,name:"choose",originalEvent:e}),sa(Bn,i.chosenClass,!0)},i.ignore.split(",").forEach(function(x){b3(Bn,x.trim(),Xx)}),Si(f,"dragover",bp),Si(f,"mousemove",bp),Si(f,"touchmove",bp),Si(f,"mouseup",s._onDrop),Si(f,"touchend",s._onDrop),Si(f,"touchcancel",s._onDrop),tE&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Bn.draggable=!0),tu("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Zy||Rf))){if(Fr.eventCanceled){this._onDrop();return}Si(f,"mouseup",s._disableDelayedDrag),Si(f,"touchend",s._disableDelayedDrag),Si(f,"touchcancel",s._disableDelayedDrag),Si(f,"mousemove",s._delayedDragTouchMoveHandler),Si(f,"touchmove",s._delayedDragTouchMoveHandler),i.supportPointer&&Si(f,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(m,i.delay)}else m()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Bn&&Xx(Bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;yi(e,"mouseup",this._disableDelayedDrag),yi(e,"touchend",this._disableDelayedDrag),yi(e,"touchcancel",this._disableDelayedDrag),yi(e,"mousemove",this._delayedDragTouchMoveHandler),yi(e,"touchmove",this._delayedDragTouchMoveHandler),yi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Si(document,"pointermove",this._onTouchMove):n?Si(document,"touchmove",this._onTouchMove):Si(document,"mousemove",this._onTouchMove):(Si(Bn,"dragend",this),Si(Yo,"dragstart",this._onDragStart));try{document.selection?H1(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Wm=!1,Yo&&Bn){tu("dragStarted",this,{evt:n}),this.nativeDraggable&&Si(document,"dragover",OK);var a=this.options;!e&&sa(Bn,a.dragClass,!1),sa(Bn,a.ghostClass,!0),Fr.active=this,e&&this._appendGhost(),Il({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Gc){this._lastX=Gc.clientX,this._lastY=Gc.clientY,E3();for(var e=document.elementFromPoint(Gc.clientX,Gc.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Gc.clientX,Gc.clientY),e!==n);)n=e;if(Bn.parentNode[ol]._isOutsideThisEl(e),n)do{if(n[ol]){var a=void 0;if(a=n[ol]._onDragOver({clientX:Gc.clientX,clientY:Gc.clientY,target:e,rootEl:n}),a&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);S3()}},_onTouchMove:function(e){if(_p){var n=this.options,a=n.fallbackTolerance,s=n.fallbackOffset,l=e.touches?e.touches[0]:e,i=ii&&Pp(ii,!0),f=ii&&i&&i.a,m=ii&&i&&i.d,y=C1&&el&&rE(el),x=(l.clientX-_p.clientX+s.x)/(f||1)+(y?y[0]-Yx[0]:0)/(f||1),A=(l.clientY-_p.clientY+s.y)/(m||1)+(y?y[1]-Yx[1]:0)/(m||1);if(!Fr.active&&!Wm){if(a&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(ii){i?(i.e+=x-(Kx||0),i.f+=A-(qx||0)):i={a:1,b:0,c:0,d:1,e:x,f:A};var w="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");pr(ii,"webkitTransform",w),pr(ii,"mozTransform",w),pr(ii,"msTransform",w),pr(ii,"transform",w),Kx=x,qx=A,Gc=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ii){var e=this.options.fallbackOnBody?document.body:Yo,n=Xo(Bn,!0,C1,!0,e),a=this.options;if(C1){for(el=e;pr(el,"position")==="static"&&pr(el,"transform")==="none"&&el!==document;)el=el.parentNode;el!==document.body&&el!==document.documentElement?(el===document&&(el=kh()),n.top+=el.scrollTop,n.left+=el.scrollLeft):el=kh(),Yx=rE(el)}ii=Bn.cloneNode(!0),sa(ii,a.ghostClass,!1),sa(ii,a.fallbackClass,!0),sa(ii,a.dragClass,!0),pr(ii,"transition",""),pr(ii,"transform",""),pr(ii,"box-sizing","border-box"),pr(ii,"margin",0),pr(ii,"top",n.top),pr(ii,"left",n.left),pr(ii,"width",n.width),pr(ii,"height",n.height),pr(ii,"opacity","0.8"),pr(ii,"position",C1?"absolute":"fixed"),pr(ii,"zIndex","100000"),pr(ii,"pointerEvents","none"),Fr.ghost=ii,e.appendChild(ii),pr(ii,"transform-origin",oE/parseInt(ii.style.width)*100+"% "+aE/parseInt(ii.style.height)*100+"%")}},_onDragStart:function(e,n){var a=this,s=e.dataTransfer,l=a.options;if(tu("dragStart",this,{evt:e}),Fr.eventCanceled){this._onDrop();return}tu("setupClone",this),Fr.eventCanceled||(va=b2(Bn),va.draggable=!1,va.style["will-change"]="",this._hideClone(),sa(va,this.options.chosenClass,!1),Fr.clone=va),a.cloneId=H1(function(){tu("clone",a),!Fr.eventCanceled&&(a.options.removeCloneOnHide||Yo.insertBefore(va,Bn),a._hideClone(),Il({sortable:a,name:"clone"}))}),!n&&sa(Bn,l.dragClass,!0),n?(__=!0,a._loopId=setInterval(a._emulateDragOver,50)):(yi(document,"mouseup",a._onDrop),yi(document,"touchend",a._onDrop),yi(document,"touchcancel",a._onDrop),s&&(s.effectAllowed="move",l.setData&&l.setData.call(a,s,Bn)),Si(document,"drop",a),pr(Bn,"transform","translateZ(0)")),Wm=!0,a._dragStartId=H1(a._dragStarted.bind(a,n,e)),Si(document,"selectstart",a),Lv=!0,Xv&&pr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,a=e.target,s,l,i,f=this.options,m=f.group,y=Fr.active,x=A1===m,A=f.sort,w=Os||y,E,L=this,k=!1;if(qA)return;function z(ie,ue){tu(ie,L,Dh({evt:e,isOwner:x,axis:E?"vertical":"horizontal",revert:i,dragRect:s,targetRect:l,canSort:A,fromSortable:w,target:a,completed:D,onMove:function(jt,Ut){return I1(Yo,n,Bn,s,jt,Xo(jt),e,Ut)},changed:B},ue))}function F(){z("dragOverAnimationCapture"),L.captureAnimationState(),L!==w&&w.captureAnimationState()}function D(ie){return z("dragOverCompleted",{insertion:ie}),ie&&(x?y._hideClone():y._showClone(L),L!==w&&(sa(Bn,Os?Os.options.ghostClass:y.options.ghostClass,!1),sa(Bn,f.ghostClass,!0)),Os!==L&&L!==Fr.active?Os=L:L===Fr.active&&Os&&(Os=null),w===L&&(L._ignoreWhileAnimating=a),L.animateAll(function(){z("dragOverAnimationComplete"),L._ignoreWhileAnimating=null}),L!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(a===Bn&&!Bn.animated||a===n&&!a.animated)&&(Um=null),!f.dragoverBubble&&!e.rootEl&&a!==document&&(Bn.parentNode[ol]._isOutsideThisEl(e.target),!ie&&bp(e)),!f.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),k=!0}function B(){Pu=ya(Bn),bd=ya(Bn,f.draggable),Il({sortable:L,name:"change",toEl:n,newIndex:Pu,newDraggableIndex:bd,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=$c(a,f.draggable,n,!0),z("dragOver"),Fr.eventCanceled)return k;if(Bn.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||L._ignoreWhileAnimating===a)return D(!1);if(__=!1,y&&!f.disabled&&(x?A||(i=ga!==Yo):Os===this||(this.lastPutMode=A1.checkPull(this,y,Bn,e))&&m.checkPut(this,y,Bn,e))){if(E=this._getDirection(e,a)==="vertical",s=Xo(Bn),z("dragOverValid"),Fr.eventCanceled)return k;if(i)return ga=Yo,F(),this._hideClone(),z("revert"),Fr.eventCanceled||(xp?Yo.insertBefore(Bn,xp):Yo.appendChild(Bn)),D(!0);var U=_2(n,f.draggable);if(!U||BK(e,E,this)&&!U.animated){if(U===Bn)return D(!1);if(U&&n===e.target&&(a=U),a&&(l=Xo(a)),I1(Yo,n,Bn,s,a,l,e,!!a)!==!1)return F(),n.appendChild(Bn),ga=n,B(),D(!0)}else if(U&&zK(e,E,this)){var $=bg(n,0,f,!0);if($===Bn)return D(!1);if(a=$,l=Xo(a),I1(Yo,n,Bn,s,a,l,e,!1)!==!1)return F(),n.insertBefore(Bn,$),ga=n,B(),D(!0)}else if(a.parentNode===n){l=Xo(a);var q=0,tt,Y=Bn.parentNode!==n,G=!kK(Bn.animated&&Bn.toRect||s,a.animated&&a.toRect||l,E),rt=E?"top":"left",pt=nE(a,"top","top")||nE(Bn,"top","top"),Q=pt?pt.scrollTop:void 0;Um!==a&&(tt=l[rt],ey=!1,w1=!G&&f.invertSwap||Y),q=FK(e,a,l,E,G?1:f.swapThreshold,f.invertedSwapThreshold==null?f.swapThreshold:f.invertedSwapThreshold,w1,Um===a);var ot;if(q!==0){var Z=ya(Bn);do Z-=q,ot=ga.children[Z];while(ot&&(pr(ot,"display")==="none"||ot===ii))}if(q===0||ot===a)return D(!1);Um=a,ty=q;var Kt=a.nextElementSibling,Ft=!1;Ft=q===1;var Tt=I1(Yo,n,Bn,s,a,l,e,Ft);if(Tt!==!1)return(Tt===1||Tt===-1)&&(Ft=Tt===1),qA=!0,setTimeout(DK,30),F(),Ft&&!Kt?n.appendChild(Bn):a.parentNode.insertBefore(Bn,Ft?Kt:a),pt&&A3(pt,0,Q-pt.scrollTop),ga=Bn.parentNode,tt!==void 0&&!w1&&(j1=Math.abs(tt-Xo(a)[rt])),B(),D(!0)}if(n.contains(Bn))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){yi(document,"mousemove",this._onTouchMove),yi(document,"touchmove",this._onTouchMove),yi(document,"pointermove",this._onTouchMove),yi(document,"dragover",bp),yi(document,"mousemove",bp),yi(document,"touchmove",bp)},_offUpEvents:function(){var e=this.el.ownerDocument;yi(e,"mouseup",this._onDrop),yi(e,"touchend",this._onDrop),yi(e,"pointerup",this._onDrop),yi(e,"touchcancel",this._onDrop),yi(document,"selectstart",this)},_onDrop:function(e){var n=this.el,a=this.options;if(Pu=ya(Bn),bd=ya(Bn,a.draggable),tu("drop",this,{evt:e}),ga=Bn&&Bn.parentNode,Pu=ya(Bn),bd=ya(Bn,a.draggable),Fr.eventCanceled){this._nulling();return}Wm=!1,w1=!1,ey=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),YA(this.cloneId),YA(this._dragStartId),this.nativeDraggable&&(yi(document,"drop",this),yi(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Xv&&pr(document.body,"user-select",""),pr(Bn,"transform",""),e&&(Lv&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),ii&&ii.parentNode&&ii.parentNode.removeChild(ii),(Yo===ga||Os&&Os.lastPutMode!=="clone")&&va&&va.parentNode&&va.parentNode.removeChild(va),Bn&&(this.nativeDraggable&&yi(Bn,"dragend",this),Xx(Bn),Bn.style["will-change"]="",Lv&&!Wm&&sa(Bn,Os?Os.options.ghostClass:this.options.ghostClass,!1),sa(Bn,this.options.chosenClass,!1),Il({sortable:this,name:"unchoose",toEl:ga,newIndex:null,newDraggableIndex:null,originalEvent:e}),Yo!==ga?(Pu>=0&&(Il({rootEl:ga,name:"add",toEl:ga,fromEl:Yo,originalEvent:e}),Il({sortable:this,name:"remove",toEl:ga,originalEvent:e}),Il({rootEl:ga,name:"sort",toEl:ga,fromEl:Yo,originalEvent:e}),Il({sortable:this,name:"sort",toEl:ga,originalEvent:e})),Os&&Os.save()):Pu!==Ym&&Pu>=0&&(Il({sortable:this,name:"update",toEl:ga,originalEvent:e}),Il({sortable:this,name:"sort",toEl:ga,originalEvent:e})),Fr.active&&((Pu==null||Pu===-1)&&(Pu=Ym,bd=Jv),Il({sortable:this,name:"end",toEl:ga,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){tu("nulling",this),Yo=Bn=ga=ii=xp=va=V1=Ad=_p=Gc=Lv=Pu=bd=Ym=Jv=Um=ty=Os=A1=Fr.dragged=Fr.ghost=Fr.clone=Fr.active=null,x_.forEach(function(e){e.checked=!0}),x_.length=Kx=qx=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Bn&&(this._onDragOver(e),RK(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,a=this.el.children,s=0,l=a.length,i=this.options;s<l;s++)n=a[s],$c(n,i.draggable,this.el,!1)&&e.push(n.getAttribute(i.dataIdAttr)||UK(n));return e},sort:function(e,n){var a={},s=this.el;this.toArray().forEach(function(l,i){var f=s.children[i];$c(f,this.options.draggable,s,!1)&&(a[l]=f)},this),n&&this.captureAnimationState(),e.forEach(function(l){a[l]&&(s.removeChild(a[l]),s.appendChild(a[l]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return $c(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var a=this.options;if(n===void 0)return a[e];var s=$y.modifyOption(this,e,n);typeof s<"u"?a[e]=s:a[e]=n,e==="group"&&I3(a)},destroy:function(){tu("destroy",this);var e=this.el;e[ol]=null,yi(e,"mousedown",this._onTapStart),yi(e,"touchstart",this._onTapStart),yi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(yi(e,"dragover",this),yi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),b_.splice(b_.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ad){if(tu("hideClone",this),Fr.eventCanceled)return;pr(va,"display","none"),this.options.removeCloneOnHide&&va.parentNode&&va.parentNode.removeChild(va),Ad=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ad){if(tu("showClone",this),Fr.eventCanceled)return;Bn.parentNode==Yo&&!this.options.group.revertClone?Yo.insertBefore(va,Bn):xp?Yo.insertBefore(va,xp):Yo.appendChild(va),this.options.group.revertClone&&this.animate(Bn,va),pr(va,"display",""),Ad=!1}}};function RK(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function I1(t,e,n,a,s,l,i,f){var m,y=t[ol],x=y.options.onMove,A;return window.CustomEvent&&!Rf&&!Zy?m=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent("move",!0,!0)),m.to=e,m.from=t,m.dragged=n,m.draggedRect=a,m.related=s||e,m.relatedRect=l||Xo(e),m.willInsertAfter=f,m.originalEvent=i,t.dispatchEvent(m),x&&(A=x.call(y,m,i)),A}function Xx(t){t.draggable=!1}function DK(){qA=!1}function zK(t,e,n){var a=Xo(bg(n.el,0,n.options,!0)),s=10;return e?t.clientX<a.left-s||t.clientY<a.top&&t.clientX<a.right:t.clientY<a.top-s||t.clientY<a.bottom&&t.clientX<a.left}function BK(t,e,n){var a=Xo(_2(n.el,n.options.draggable)),s=10;return e?t.clientX>a.right+s||t.clientX<=a.right&&t.clientY>a.bottom&&t.clientX>=a.left:t.clientX>a.right&&t.clientY>a.top||t.clientX<=a.right&&t.clientY>a.bottom+s}function FK(t,e,n,a,s,l,i,f){var m=a?t.clientY:t.clientX,y=a?n.height:n.width,x=a?n.top:n.left,A=a?n.bottom:n.right,w=!1;if(!i){if(f&&j1<y*s){if(!ey&&(ty===1?m>x+y*l/2:m<A-y*l/2)&&(ey=!0),ey)w=!0;else if(ty===1?m<x+j1:m>A-j1)return-ty}else if(m>x+y*(1-s)/2&&m<A-y*(1-s)/2)return NK(e)}return w=w||i,w&&(m<x+y*l/2||m>A-y*l/2)?m>x+y/2?1:-1:0}function NK(t){return ya(Bn)<ya(t)?1:-1}function UK(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,a=0;n--;)a+=e.charCodeAt(n);return a.toString(36)}function VK(t){x_.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var a=e[n];a.checked&&x_.push(a)}}function H1(t){return setTimeout(t,0)}function YA(t){return clearTimeout(t)}yb&&Si(document,"touchmove",function(t){(Fr.active||Wm)&&t.cancelable&&t.preventDefault()});Fr.utils={on:Si,off:yi,css:pr,find:b3,is:function(e,n){return!!$c(e,n,e,!1)},extend:CK,throttle:x3,closest:$c,toggleClass:sa,clone:b2,index:ya,nextTick:H1,cancelNextTick:YA,detectDirection:C3,getChild:bg};Fr.get=function(t){return t[ol]};Fr.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(Fr.utils=Dh(Dh({},Fr.utils),a.utils)),$y.mount(a)})};Fr.create=function(t,e){return new Fr(t,e)};Fr.version=bK;var Ha=[],Ov,XA,QA=!1,Qx,Jx,A_,Rv;function jK(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var a=n.originalEvent;this.sortable.nativeDraggable?Si(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Si(document,"pointermove",this._handleFallbackAutoScroll):a.touches?Si(document,"touchmove",this._handleFallbackAutoScroll):Si(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var a=n.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?yi(document,"dragover",this._handleAutoScroll):(yi(document,"pointermove",this._handleFallbackAutoScroll),yi(document,"touchmove",this._handleFallbackAutoScroll),yi(document,"mousemove",this._handleFallbackAutoScroll)),lE(),G1(),IK()},nulling:function(){A_=XA=Ov=QA=Rv=Qx=Jx=null,Ha.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,a){var s=this,l=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,f=document.elementFromPoint(l,i);if(A_=n,a||this.options.forceAutoScrollFallback||Zy||Rf||Xv){tA(n,this.options,f,a);var m=Cd(f,!0);QA&&(!Rv||l!==Qx||i!==Jx)&&(Rv&&lE(),Rv=setInterval(function(){var y=Cd(document.elementFromPoint(l,i),!0);y!==m&&(m=y,G1()),tA(n,s.options,y,a)},10),Qx=l,Jx=i)}else{if(!this.options.bubbleScroll||Cd(f,!0)===kh()){G1();return}tA(n,this.options,Cd(f,!1),!1)}}},bc(t,{pluginName:"scroll",initializeByDefault:!0})}function G1(){Ha.forEach(function(t){clearInterval(t.pid)}),Ha=[]}function lE(){clearInterval(Rv)}var tA=x3(function(t,e,n,a){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,f=e.scrollSpeed,m=kh(),y=!1,x;XA!==n&&(XA=n,G1(),Ov=e.scroll,x=e.scrollFn,Ov===!0&&(Ov=Cd(n,!0)));var A=0,w=Ov;do{var E=w,L=Xo(E),k=L.top,z=L.bottom,F=L.left,D=L.right,B=L.width,U=L.height,$=void 0,q=void 0,tt=E.scrollWidth,Y=E.scrollHeight,G=pr(E),rt=E.scrollLeft,pt=E.scrollTop;E===m?($=B<tt&&(G.overflowX==="auto"||G.overflowX==="scroll"||G.overflowX==="visible"),q=U<Y&&(G.overflowY==="auto"||G.overflowY==="scroll"||G.overflowY==="visible")):($=B<tt&&(G.overflowX==="auto"||G.overflowX==="scroll"),q=U<Y&&(G.overflowY==="auto"||G.overflowY==="scroll"));var Q=$&&(Math.abs(D-s)<=i&&rt+B<tt)-(Math.abs(F-s)<=i&&!!rt),ot=q&&(Math.abs(z-l)<=i&&pt+U<Y)-(Math.abs(k-l)<=i&&!!pt);if(!Ha[A])for(var Z=0;Z<=A;Z++)Ha[Z]||(Ha[Z]={});(Ha[A].vx!=Q||Ha[A].vy!=ot||Ha[A].el!==E)&&(Ha[A].el=E,Ha[A].vx=Q,Ha[A].vy=ot,clearInterval(Ha[A].pid),(Q!=0||ot!=0)&&(y=!0,Ha[A].pid=setInterval((function(){a&&this.layer===0&&Fr.active._onTouchMove(A_);var Kt=Ha[this.layer].vy?Ha[this.layer].vy*f:0,Ft=Ha[this.layer].vx?Ha[this.layer].vx*f:0;typeof x=="function"&&x.call(Fr.dragged.parentNode[ol],Ft,Kt,t,A_,Ha[this.layer].el)!=="continue"||A3(Ha[this.layer].el,Ft,Kt)}).bind({layer:A}),24))),A++}while(e.bubbleScroll&&w!==m&&(w=Cd(w,!1)));QA=y}},30),M3=function(e){var n=e.originalEvent,a=e.putSortable,s=e.dragEl,l=e.activeSortable,i=e.dispatchSortableEvent,f=e.hideGhostForTarget,m=e.unhideGhostForTarget;if(n){var y=a||l;f();var x=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,A=document.elementFromPoint(x.clientX,x.clientY);m(),y&&!y.el.contains(A)&&(i("spill"),this.onSpill({dragEl:s,putSortable:a}))}};function x2(){}x2.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var s=bg(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(n,s):this.sortable.el.appendChild(n),this.sortable.animateAll(),a&&a.animateAll()},drop:M3};bc(x2,{pluginName:"revertOnSpill"});function A2(){}A2.prototype={onSpill:function(e){var n=e.dragEl,a=e.putSortable,s=a||this.sortable;s.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),s.animateAll()},drop:M3};bc(A2,{pluginName:"removeOnSpill"});var pc;function HK(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var a=n.dragEl;pc=a},dragOverValid:function(n){var a=n.completed,s=n.target,l=n.onMove,i=n.activeSortable,f=n.changed,m=n.cancel;if(i.options.swap){var y=this.sortable.el,x=this.options;if(s&&s!==y){var A=pc;l(s)!==!1?(sa(s,x.swapClass,!0),pc=s):pc=null,A&&A!==pc&&sa(A,x.swapClass,!1)}f(),a(!0),m()}},drop:function(n){var a=n.activeSortable,s=n.putSortable,l=n.dragEl,i=s||this.sortable,f=this.options;pc&&sa(pc,f.swapClass,!1),pc&&(f.swap||s&&s.options.swap)&&l!==pc&&(i.captureAnimationState(),i!==a&&a.captureAnimationState(),GK(l,pc),i.animateAll(),i!==a&&a.animateAll())},nulling:function(){pc=null}},bc(t,{pluginName:"swap",eventProperties:function(){return{swapItem:pc}}})}function GK(t,e){var n=t.parentNode,a=e.parentNode,s,l;!n||!a||n.isEqualNode(e)||a.isEqualNode(t)||(s=ya(t),l=ya(e),n.isEqualNode(a)&&s<l&&l++,n.insertBefore(e,n.children[s]),a.insertBefore(t,a.children[l]))}var Qr=[],Tu=[],Av,Wc,wv=!1,eu=!1,Vm=!1,Do,Cv,E1;function WK(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?Si(document,"pointerup",this._deselectMultiDrag):(Si(document,"mouseup",this._deselectMultiDrag),Si(document,"touchend",this._deselectMultiDrag)),Si(document,"keydown",this._checkKeyDown),Si(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,l){var i="";Qr.length&&Wc===e?Qr.forEach(function(f,m){i+=(m?", ":"")+f.textContent}):i=l.textContent,s.setData("Text",i)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var a=n.dragEl;Do=a},delayEnded:function(){this.isMultiDrag=~Qr.indexOf(Do)},setupClone:function(n){var a=n.sortable,s=n.cancel;if(this.isMultiDrag){for(var l=0;l<Qr.length;l++)Tu.push(b2(Qr[l])),Tu[l].sortableIndex=Qr[l].sortableIndex,Tu[l].draggable=!1,Tu[l].style["will-change"]="",sa(Tu[l],this.options.selectedClass,!1),Qr[l]===Do&&sa(Tu[l],this.options.chosenClass,!1);a._hideClone(),s()}},clone:function(n){var a=n.sortable,s=n.rootEl,l=n.dispatchSortableEvent,i=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Qr.length&&Wc===a&&(uE(!0,s),l("clone"),i()))},showClone:function(n){var a=n.cloneNowShown,s=n.rootEl,l=n.cancel;this.isMultiDrag&&(uE(!1,s),Tu.forEach(function(i){pr(i,"display","")}),a(),E1=!1,l())},hideClone:function(n){var a=this;n.sortable;var s=n.cloneNowHidden,l=n.cancel;this.isMultiDrag&&(Tu.forEach(function(i){pr(i,"display","none"),a.options.removeCloneOnHide&&i.parentNode&&i.parentNode.removeChild(i)}),s(),E1=!0,l())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Wc&&Wc.multiDrag._deselectMultiDrag(),Qr.forEach(function(a){a.sortableIndex=ya(a)}),Qr=Qr.sort(function(a,s){return a.sortableIndex-s.sortableIndex}),Vm=!0},dragStarted:function(n){var a=this,s=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){Qr.forEach(function(i){i!==Do&&pr(i,"position","absolute")});var l=Xo(Do,!1,!0,!0);Qr.forEach(function(i){i!==Do&&iE(i,l)}),eu=!0,wv=!0}s.animateAll(function(){eu=!1,wv=!1,a.options.animation&&Qr.forEach(function(i){Zx(i)}),a.options.sort&&S1()})}},dragOver:function(n){var a=n.target,s=n.completed,l=n.cancel;eu&&~Qr.indexOf(a)&&(s(!1),l())},revert:function(n){var a=n.fromSortable,s=n.rootEl,l=n.sortable,i=n.dragRect;Qr.length>1&&(Qr.forEach(function(f){l.addAnimationState({target:f,rect:eu?Xo(f):i}),Zx(f),f.fromRect=i,a.removeAnimationState(f)}),eu=!1,ZK(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(n){var a=n.sortable,s=n.isOwner,l=n.insertion,i=n.activeSortable,f=n.parentEl,m=n.putSortable,y=this.options;if(l){if(s&&i._hideClone(),wv=!1,y.animation&&Qr.length>1&&(eu||!s&&!i.options.sort&&!m)){var x=Xo(Do,!1,!0,!0);Qr.forEach(function(w){w!==Do&&(iE(w,x),f.appendChild(w))}),eu=!0}if(!s)if(eu||S1(),Qr.length>1){var A=E1;i._showClone(a),i.options.animation&&!E1&&A&&Tu.forEach(function(w){i.addAnimationState({target:w,rect:Cv}),w.fromRect=Cv,w.thisAnimationDuration=null})}else i._showClone(a)}},dragOverAnimationCapture:function(n){var a=n.dragRect,s=n.isOwner,l=n.activeSortable;if(Qr.forEach(function(f){f.thisAnimationDuration=null}),l.options.animation&&!s&&l.multiDrag.isMultiDrag){Cv=bc({},a);var i=Pp(Do,!0);Cv.top-=i.f,Cv.left-=i.e}},dragOverAnimationComplete:function(){eu&&(eu=!1,S1())},drop:function(n){var a=n.originalEvent,s=n.rootEl,l=n.parentEl,i=n.sortable,f=n.dispatchSortableEvent,m=n.oldIndex,y=n.putSortable,x=y||this.sortable;if(a){var A=this.options,w=l.children;if(!Vm)if(A.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),sa(Do,A.selectedClass,!~Qr.indexOf(Do)),~Qr.indexOf(Do))Qr.splice(Qr.indexOf(Do),1),Av=null,kv({sortable:i,rootEl:s,name:"deselect",targetEl:Do,originalEvt:a});else{if(Qr.push(Do),kv({sortable:i,rootEl:s,name:"select",targetEl:Do,originalEvt:a}),a.shiftKey&&Av&&i.el.contains(Av)){var E=ya(Av),L=ya(Do);if(~E&&~L&&E!==L){var k,z;for(L>E?(z=E,k=L):(z=L,k=E+1);z<k;z++)~Qr.indexOf(w[z])||(sa(w[z],A.selectedClass,!0),Qr.push(w[z]),kv({sortable:i,rootEl:s,name:"select",targetEl:w[z],originalEvt:a}))}}else Av=Do;Wc=x}if(Vm&&this.isMultiDrag){if(eu=!1,(l[ol].options.sort||l!==s)&&Qr.length>1){var F=Xo(Do),D=ya(Do,":not(."+this.options.selectedClass+")");if(!wv&&A.animation&&(Do.thisAnimationDuration=null),x.captureAnimationState(),!wv&&(A.animation&&(Do.fromRect=F,Qr.forEach(function(U){if(U.thisAnimationDuration=null,U!==Do){var $=eu?Xo(U):F;U.fromRect=$,x.addAnimationState({target:U,rect:$})}})),S1(),Qr.forEach(function(U){w[D]?l.insertBefore(U,w[D]):l.appendChild(U),D++}),m===ya(Do))){var B=!1;Qr.forEach(function(U){if(U.sortableIndex!==ya(U)){B=!0;return}}),B&&f("update")}Qr.forEach(function(U){Zx(U)}),x.animateAll()}Wc=x}(s===l||y&&y.lastPutMode!=="clone")&&Tu.forEach(function(U){U.parentNode&&U.parentNode.removeChild(U)})}},nullingGlobal:function(){this.isMultiDrag=Vm=!1,Tu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),yi(document,"pointerup",this._deselectMultiDrag),yi(document,"mouseup",this._deselectMultiDrag),yi(document,"touchend",this._deselectMultiDrag),yi(document,"keydown",this._checkKeyDown),yi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Vm<"u"&&Vm)&&Wc===this.sortable&&!(n&&$c(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Qr.length;){var a=Qr[0];sa(a,this.options.selectedClass,!1),Qr.shift(),kv({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:a,originalEvt:n})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},bc(t,{pluginName:"multiDrag",utils:{select:function(n){var a=n.parentNode[ol];!a||!a.options.multiDrag||~Qr.indexOf(n)||(Wc&&Wc!==a&&(Wc.multiDrag._deselectMultiDrag(),Wc=a),sa(n,a.options.selectedClass,!0),Qr.push(n))},deselect:function(n){var a=n.parentNode[ol],s=Qr.indexOf(n);!a||!a.options.multiDrag||!~s||(sa(n,a.options.selectedClass,!1),Qr.splice(s,1))}},eventProperties:function(){var n=this,a=[],s=[];return Qr.forEach(function(l){a.push({multiDragElement:l,index:l.sortableIndex});var i;eu&&l!==Do?i=-1:eu?i=ya(l,":not(."+n.options.selectedClass+")"):i=ya(l),s.push({multiDragElement:l,index:i})}),{items:mK(Qr),clones:[].concat(Tu),oldIndicies:a,newIndicies:s}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function ZK(t,e){Qr.forEach(function(n,a){var s=e.children[n.sortableIndex+(t?Number(a):0)];s?e.insertBefore(n,s):e.appendChild(n)})}function uE(t,e){Tu.forEach(function(n,a){var s=e.children[n.sortableIndex+(t?Number(a):0)];s?e.insertBefore(n,s):e.appendChild(n)})}function S1(){Qr.forEach(function(t){t!==Do&&t.parentNode&&t.parentNode.removeChild(t)})}Fr.mount(new jK);Fr.mount(A2,x2);const $K=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:WK,Sortable:Fr,Swap:HK,default:Fr},Symbol.toStringTag,{value:"Module"})),KK=ky($K);(function(t,e){(function(a,s){t.exports=s(hK,KK)})(typeof self<"u"?self:ca,function(n,a){return function(s){var l={};function i(f){if(l[f])return l[f].exports;var m=l[f]={i:f,l:!1,exports:{}};return s[f].call(m.exports,m,m.exports,i),m.l=!0,m.exports}return i.m=s,i.c=l,i.d=function(f,m,y){i.o(f,m)||Object.defineProperty(f,m,{enumerable:!0,get:y})},i.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},i.t=function(f,m){if(m&1&&(f=i(f)),m&8||m&4&&typeof f=="object"&&f&&f.__esModule)return f;var y=Object.create(null);if(i.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:f}),m&2&&typeof f!="string")for(var x in f)i.d(y,x,(function(A){return f[A]}).bind(null,x));return y},i.n=function(f){var m=f&&f.__esModule?function(){return f.default}:function(){return f};return i.d(m,"a",m),m},i.o=function(f,m){return Object.prototype.hasOwnProperty.call(f,m)},i.p="",i(i.s="fb15")}({"00ee":function(s,l,i){var f=i("b622"),m=f("toStringTag"),y={};y[m]="z",s.exports=String(y)==="[object z]"},"0366":function(s,l,i){var f=i("1c0b");s.exports=function(m,y,x){if(f(m),y===void 0)return m;switch(x){case 0:return function(){return m.call(y)};case 1:return function(A){return m.call(y,A)};case 2:return function(A,w){return m.call(y,A,w)};case 3:return function(A,w,E){return m.call(y,A,w,E)}}return function(){return m.apply(y,arguments)}}},"057f":function(s,l,i){var f=i("fc6a"),m=i("241c").f,y={}.toString,x=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],A=function(w){try{return m(w)}catch{return x.slice()}};s.exports.f=function(E){return x&&y.call(E)=="[object Window]"?A(E):m(f(E))}},"06cf":function(s,l,i){var f=i("83ab"),m=i("d1e7"),y=i("5c6c"),x=i("fc6a"),A=i("c04e"),w=i("5135"),E=i("0cfb"),L=Object.getOwnPropertyDescriptor;l.f=f?L:function(z,F){if(z=x(z),F=A(F,!0),E)try{return L(z,F)}catch{}if(w(z,F))return y(!m.f.call(z,F),z[F])}},"0cfb":function(s,l,i){var f=i("83ab"),m=i("d039"),y=i("cc12");s.exports=!f&&!m(function(){return Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,l,i){var f=i("23e7"),m=i("d58f").left,y=i("a640"),x=i("ae40"),A=y("reduce"),w=x("reduce",{1:0});f({target:"Array",proto:!0,forced:!A||!w},{reduce:function(L){return m(this,L,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,l,i){var f=i("c6b6"),m=i("9263");s.exports=function(y,x){var A=y.exec;if(typeof A=="function"){var w=A.call(y,x);if(typeof w!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return w}if(f(y)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return m.call(y,x)}},"159b":function(s,l,i){var f=i("da84"),m=i("fdbc"),y=i("17c2"),x=i("9112");for(var A in m){var w=f[A],E=w&&w.prototype;if(E&&E.forEach!==y)try{x(E,"forEach",y)}catch{E.forEach=y}}},"17c2":function(s,l,i){var f=i("b727").forEach,m=i("a640"),y=i("ae40"),x=m("forEach"),A=y("forEach");s.exports=!x||!A?function(E){return f(this,E,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,l,i){var f=i("d066");s.exports=f("document","documentElement")},"1c0b":function(s,l){s.exports=function(i){if(typeof i!="function")throw TypeError(String(i)+" is not a function");return i}},"1c7e":function(s,l,i){var f=i("b622"),m=f("iterator"),y=!1;try{var x=0,A={next:function(){return{done:!!x++}},return:function(){y=!0}};A[m]=function(){return this},Array.from(A,function(){throw 2})}catch{}s.exports=function(w,E){if(!E&&!y)return!1;var L=!1;try{var k={};k[m]=function(){return{next:function(){return{done:L=!0}}}},w(k)}catch{}return L}},"1d80":function(s,l){s.exports=function(i){if(i==null)throw TypeError("Can't call method on "+i);return i}},"1dde":function(s,l,i){var f=i("d039"),m=i("b622"),y=i("2d00"),x=m("species");s.exports=function(A){return y>=51||!f(function(){var w=[],E=w.constructor={};return E[x]=function(){return{foo:1}},w[A](Boolean).foo!==1})}},"23cb":function(s,l,i){var f=i("a691"),m=Math.max,y=Math.min;s.exports=function(x,A){var w=f(x);return w<0?m(w+A,0):y(w,A)}},"23e7":function(s,l,i){var f=i("da84"),m=i("06cf").f,y=i("9112"),x=i("6eeb"),A=i("ce4e"),w=i("e893"),E=i("94ca");s.exports=function(L,k){var z=L.target,F=L.global,D=L.stat,B,U,$,q,tt,Y;if(F?U=f:D?U=f[z]||A(z,{}):U=(f[z]||{}).prototype,U)for($ in k){if(tt=k[$],L.noTargetGet?(Y=m(U,$),q=Y&&Y.value):q=U[$],B=E(F?$:z+(D?".":"#")+$,L.forced),!B&&q!==void 0){if(typeof tt==typeof q)continue;w(tt,q)}(L.sham||q&&q.sham)&&y(tt,"sham",!0),x(U,$,tt,L)}}},"241c":function(s,l,i){var f=i("ca84"),m=i("7839"),y=m.concat("length","prototype");l.f=Object.getOwnPropertyNames||function(A){return f(A,y)}},"25f0":function(s,l,i){var f=i("6eeb"),m=i("825a"),y=i("d039"),x=i("ad6d"),A="toString",w=RegExp.prototype,E=w[A],L=y(function(){return E.call({source:"a",flags:"b"})!="/a/b"}),k=E.name!=A;(L||k)&&f(RegExp.prototype,A,function(){var F=m(this),D=String(F.source),B=F.flags,U=String(B===void 0&&F instanceof RegExp&&!("flags"in w)?x.call(F):B);return"/"+D+"/"+U},{unsafe:!0})},"2ca0":function(s,l,i){var f=i("23e7"),m=i("06cf").f,y=i("50c4"),x=i("5a34"),A=i("1d80"),w=i("ab13"),E=i("c430"),L="".startsWith,k=Math.min,z=w("startsWith"),F=!E&&!z&&!!function(){var D=m(String.prototype,"startsWith");return D&&!D.writable}();f({target:"String",proto:!0,forced:!F&&!z},{startsWith:function(B){var U=String(A(this));x(B);var $=y(k(arguments.length>1?arguments[1]:void 0,U.length)),q=String(B);return L?L.call(U,q,$):U.slice($,$+q.length)===q}})},"2d00":function(s,l,i){var f=i("da84"),m=i("342f"),y=f.process,x=y&&y.versions,A=x&&x.v8,w,E;A?(w=A.split("."),E=w[0]+w[1]):m&&(w=m.match(/Edge\/(\d+)/),(!w||w[1]>=74)&&(w=m.match(/Chrome\/(\d+)/),w&&(E=w[1]))),s.exports=E&&+E},"342f":function(s,l,i){var f=i("d066");s.exports=f("navigator","userAgent")||""},"35a1":function(s,l,i){var f=i("f5df"),m=i("3f8c"),y=i("b622"),x=y("iterator");s.exports=function(A){if(A!=null)return A[x]||A["@@iterator"]||m[f(A)]}},"37e8":function(s,l,i){var f=i("83ab"),m=i("9bf2"),y=i("825a"),x=i("df75");s.exports=f?Object.defineProperties:function(w,E){y(w);for(var L=x(E),k=L.length,z=0,F;k>z;)m.f(w,F=L[z++],E[F]);return w}},"3bbe":function(s,l,i){var f=i("861d");s.exports=function(m){if(!f(m)&&m!==null)throw TypeError("Can't set "+String(m)+" as a prototype");return m}},"3ca3":function(s,l,i){var f=i("6547").charAt,m=i("69f3"),y=i("7dd0"),x="String Iterator",A=m.set,w=m.getterFor(x);y(String,"String",function(E){A(this,{type:x,string:String(E),index:0})},function(){var L=w(this),k=L.string,z=L.index,F;return z>=k.length?{value:void 0,done:!0}:(F=f(k,z),L.index+=F.length,{value:F,done:!1})})},"3f8c":function(s,l){s.exports={}},4160:function(s,l,i){var f=i("23e7"),m=i("17c2");f({target:"Array",proto:!0,forced:[].forEach!=m},{forEach:m})},"428f":function(s,l,i){var f=i("da84");s.exports=f},"44ad":function(s,l,i){var f=i("d039"),m=i("c6b6"),y="".split;s.exports=f(function(){return!Object("z").propertyIsEnumerable(0)})?function(x){return m(x)=="String"?y.call(x,""):Object(x)}:Object},"44d2":function(s,l,i){var f=i("b622"),m=i("7c73"),y=i("9bf2"),x=f("unscopables"),A=Array.prototype;A[x]==null&&y.f(A,x,{configurable:!0,value:m(null)}),s.exports=function(w){A[x][w]=!0}},"44e7":function(s,l,i){var f=i("861d"),m=i("c6b6"),y=i("b622"),x=y("match");s.exports=function(A){var w;return f(A)&&((w=A[x])!==void 0?!!w:m(A)=="RegExp")}},4930:function(s,l,i){var f=i("d039");s.exports=!!Object.getOwnPropertySymbols&&!f(function(){return!String(Symbol())})},"4d64":function(s,l,i){var f=i("fc6a"),m=i("50c4"),y=i("23cb"),x=function(A){return function(w,E,L){var k=f(w),z=m(k.length),F=y(L,z),D;if(A&&E!=E){for(;z>F;)if(D=k[F++],D!=D)return!0}else for(;z>F;F++)if((A||F in k)&&k[F]===E)return A||F||0;return!A&&-1}};s.exports={includes:x(!0),indexOf:x(!1)}},"4de4":function(s,l,i){var f=i("23e7"),m=i("b727").filter,y=i("1dde"),x=i("ae40"),A=y("filter"),w=x("filter");f({target:"Array",proto:!0,forced:!A||!w},{filter:function(L){return m(this,L,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,l,i){var f=i("0366"),m=i("7b0b"),y=i("9bdd"),x=i("e95a"),A=i("50c4"),w=i("8418"),E=i("35a1");s.exports=function(k){var z=m(k),F=typeof this=="function"?this:Array,D=arguments.length,B=D>1?arguments[1]:void 0,U=B!==void 0,$=E(z),q=0,tt,Y,G,rt,pt,Q;if(U&&(B=f(B,D>2?arguments[2]:void 0,2)),$!=null&&!(F==Array&&x($)))for(rt=$.call(z),pt=rt.next,Y=new F;!(G=pt.call(rt)).done;q++)Q=U?y(rt,B,[G.value,q],!0):G.value,w(Y,q,Q);else for(tt=A(z.length),Y=new F(tt);tt>q;q++)Q=U?B(z[q],q):z[q],w(Y,q,Q);return Y.length=q,Y}},"4fad":function(s,l,i){var f=i("23e7"),m=i("6f53").entries;f({target:"Object",stat:!0},{entries:function(x){return m(x)}})},"50c4":function(s,l,i){var f=i("a691"),m=Math.min;s.exports=function(y){return y>0?m(f(y),9007199254740991):0}},5135:function(s,l){var i={}.hasOwnProperty;s.exports=function(f,m){return i.call(f,m)}},5319:function(s,l,i){var f=i("d784"),m=i("825a"),y=i("7b0b"),x=i("50c4"),A=i("a691"),w=i("1d80"),E=i("8aa5"),L=i("14c3"),k=Math.max,z=Math.min,F=Math.floor,D=/\$([$&'`]|\d\d?|<[^>]*>)/g,B=/\$([$&'`]|\d\d?)/g,U=function($){return $===void 0?$:String($)};f("replace",2,function($,q,tt,Y){var G=Y.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,rt=Y.REPLACE_KEEPS_$0,pt=G?"$":"$0";return[function(Z,Kt){var Ft=w(this),Tt=Z==null?void 0:Z[$];return Tt!==void 0?Tt.call(Z,Ft,Kt):q.call(String(Ft),Z,Kt)},function(ot,Z){if(!G&&rt||typeof Z=="string"&&Z.indexOf(pt)===-1){var Kt=tt(q,ot,this,Z);if(Kt.done)return Kt.value}var Ft=m(ot),Tt=String(this),ie=typeof Z=="function";ie||(Z=String(Z));var ue=Ft.global;if(ue){var je=Ft.unicode;Ft.lastIndex=0}for(var jt=[];;){var Ut=L(Ft,Tt);if(Ut===null||(jt.push(Ut),!ue))break;var xe=String(Ut[0]);xe===""&&(Ft.lastIndex=E(Tt,x(Ft.lastIndex),je))}for(var Fe="",we=0,qe=0;qe<jt.length;qe++){Ut=jt[qe];for(var fe=String(Ut[0]),ge=k(z(A(Ut.index),Tt.length),0),ne=[],Se=1;Se<Ut.length;Se++)ne.push(U(Ut[Se]));var We=Ut.groups;if(ie){var In=[fe].concat(ne,ge,Tt);We!==void 0&&In.push(We);var _t=String(Z.apply(void 0,In))}else _t=Q(fe,Tt,ge,ne,We,Z);ge>=we&&(Fe+=Tt.slice(we,ge)+_t,we=ge+fe.length)}return Fe+Tt.slice(we)}];function Q(ot,Z,Kt,Ft,Tt,ie){var ue=Kt+ot.length,je=Ft.length,jt=B;return Tt!==void 0&&(Tt=y(Tt),jt=D),q.call(ie,jt,function(Ut,xe){var Fe;switch(xe.charAt(0)){case"$":return"$";case"&":return ot;case"`":return Z.slice(0,Kt);case"'":return Z.slice(ue);case"<":Fe=Tt[xe.slice(1,-1)];break;default:var we=+xe;if(we===0)return Ut;if(we>je){var qe=F(we/10);return qe===0?Ut:qe<=je?Ft[qe-1]===void 0?xe.charAt(1):Ft[qe-1]+xe.charAt(1):Ut}Fe=Ft[we-1]}return Fe===void 0?"":Fe})}})},5692:function(s,l,i){var f=i("c430"),m=i("c6cd");(s.exports=function(y,x){return m[y]||(m[y]=x!==void 0?x:{})})("versions",[]).push({version:"3.6.5",mode:f?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,l,i){var f=i("d066"),m=i("241c"),y=i("7418"),x=i("825a");s.exports=f("Reflect","ownKeys")||function(w){var E=m.f(x(w)),L=y.f;return L?E.concat(L(w)):E}},"5a34":function(s,l,i){var f=i("44e7");s.exports=function(m){if(f(m))throw TypeError("The method doesn't accept regular expressions");return m}},"5c6c":function(s,l){s.exports=function(i,f){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:f}}},"5db7":function(s,l,i){var f=i("23e7"),m=i("a2bf"),y=i("7b0b"),x=i("50c4"),A=i("1c0b"),w=i("65f0");f({target:"Array",proto:!0},{flatMap:function(L){var k=y(this),z=x(k.length),F;return A(L),F=w(k,0),F.length=m(F,k,k,z,0,1,L,arguments.length>1?arguments[1]:void 0),F}})},6547:function(s,l,i){var f=i("a691"),m=i("1d80"),y=function(x){return function(A,w){var E=String(m(A)),L=f(w),k=E.length,z,F;return L<0||L>=k?x?"":void 0:(z=E.charCodeAt(L),z<55296||z>56319||L+1===k||(F=E.charCodeAt(L+1))<56320||F>57343?x?E.charAt(L):z:x?E.slice(L,L+2):(z-55296<<10)+(F-56320)+65536)}};s.exports={codeAt:y(!1),charAt:y(!0)}},"65f0":function(s,l,i){var f=i("861d"),m=i("e8b5"),y=i("b622"),x=y("species");s.exports=function(A,w){var E;return m(A)&&(E=A.constructor,typeof E=="function"&&(E===Array||m(E.prototype))?E=void 0:f(E)&&(E=E[x],E===null&&(E=void 0))),new(E===void 0?Array:E)(w===0?0:w)}},"69f3":function(s,l,i){var f=i("7f9a"),m=i("da84"),y=i("861d"),x=i("9112"),A=i("5135"),w=i("f772"),E=i("d012"),L=m.WeakMap,k,z,F,D=function(G){return F(G)?z(G):k(G,{})},B=function(G){return function(rt){var pt;if(!y(rt)||(pt=z(rt)).type!==G)throw TypeError("Incompatible receiver, "+G+" required");return pt}};if(f){var U=new L,$=U.get,q=U.has,tt=U.set;k=function(G,rt){return tt.call(U,G,rt),rt},z=function(G){return $.call(U,G)||{}},F=function(G){return q.call(U,G)}}else{var Y=w("state");E[Y]=!0,k=function(G,rt){return x(G,Y,rt),rt},z=function(G){return A(G,Y)?G[Y]:{}},F=function(G){return A(G,Y)}}s.exports={set:k,get:z,has:F,enforce:D,getterFor:B}},"6eeb":function(s,l,i){var f=i("da84"),m=i("9112"),y=i("5135"),x=i("ce4e"),A=i("8925"),w=i("69f3"),E=w.get,L=w.enforce,k=String(String).split("String");(s.exports=function(z,F,D,B){var U=B?!!B.unsafe:!1,$=B?!!B.enumerable:!1,q=B?!!B.noTargetGet:!1;if(typeof D=="function"&&(typeof F=="string"&&!y(D,"name")&&m(D,"name",F),L(D).source=k.join(typeof F=="string"?F:"")),z===f){$?z[F]=D:x(F,D);return}else U?!q&&z[F]&&($=!0):delete z[F];$?z[F]=D:m(z,F,D)})(Function.prototype,"toString",function(){return typeof this=="function"&&E(this).source||A(this)})},"6f53":function(s,l,i){var f=i("83ab"),m=i("df75"),y=i("fc6a"),x=i("d1e7").f,A=function(w){return function(E){for(var L=y(E),k=m(L),z=k.length,F=0,D=[],B;z>F;)B=k[F++],(!f||x.call(L,B))&&D.push(w?[B,L[B]]:L[B]);return D}};s.exports={entries:A(!0),values:A(!1)}},"73d9":function(s,l,i){var f=i("44d2");f("flatMap")},7418:function(s,l){l.f=Object.getOwnPropertySymbols},"746f":function(s,l,i){var f=i("428f"),m=i("5135"),y=i("e538"),x=i("9bf2").f;s.exports=function(A){var w=f.Symbol||(f.Symbol={});m(w,A)||x(w,A,{value:y.f(A)})}},7839:function(s,l){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,l,i){var f=i("1d80");s.exports=function(m){return Object(f(m))}},"7c73":function(s,l,i){var f=i("825a"),m=i("37e8"),y=i("7839"),x=i("d012"),A=i("1be4"),w=i("cc12"),E=i("f772"),L=">",k="<",z="prototype",F="script",D=E("IE_PROTO"),B=function(){},U=function(G){return k+F+L+G+k+"/"+F+L},$=function(G){G.write(U("")),G.close();var rt=G.parentWindow.Object;return G=null,rt},q=function(){var G=w("iframe"),rt="java"+F+":",pt;return G.style.display="none",A.appendChild(G),G.src=String(rt),pt=G.contentWindow.document,pt.open(),pt.write(U("document.F=Object")),pt.close(),pt.F},tt,Y=function(){try{tt=document.domain&&new ActiveXObject("htmlfile")}catch{}Y=tt?$(tt):q();for(var G=y.length;G--;)delete Y[z][y[G]];return Y()};x[D]=!0,s.exports=Object.create||function(rt,pt){var Q;return rt!==null?(B[z]=f(rt),Q=new B,B[z]=null,Q[D]=rt):Q=Y(),pt===void 0?Q:m(Q,pt)}},"7dd0":function(s,l,i){var f=i("23e7"),m=i("9ed3"),y=i("e163"),x=i("d2bb"),A=i("d44e"),w=i("9112"),E=i("6eeb"),L=i("b622"),k=i("c430"),z=i("3f8c"),F=i("ae93"),D=F.IteratorPrototype,B=F.BUGGY_SAFARI_ITERATORS,U=L("iterator"),$="keys",q="values",tt="entries",Y=function(){return this};s.exports=function(G,rt,pt,Q,ot,Z,Kt){m(pt,rt,Q);var Ft=function(qe){if(qe===ot&&jt)return jt;if(!B&&qe in ue)return ue[qe];switch(qe){case $:return function(){return new pt(this,qe)};case q:return function(){return new pt(this,qe)};case tt:return function(){return new pt(this,qe)}}return function(){return new pt(this)}},Tt=rt+" Iterator",ie=!1,ue=G.prototype,je=ue[U]||ue["@@iterator"]||ot&&ue[ot],jt=!B&&je||Ft(ot),Ut=rt=="Array"&&ue.entries||je,xe,Fe,we;if(Ut&&(xe=y(Ut.call(new G)),D!==Object.prototype&&xe.next&&(!k&&y(xe)!==D&&(x?x(xe,D):typeof xe[U]!="function"&&w(xe,U,Y)),A(xe,Tt,!0,!0),k&&(z[Tt]=Y))),ot==q&&je&&je.name!==q&&(ie=!0,jt=function(){return je.call(this)}),(!k||Kt)&&ue[U]!==jt&&w(ue,U,jt),z[rt]=jt,ot)if(Fe={values:Ft(q),keys:Z?jt:Ft($),entries:Ft(tt)},Kt)for(we in Fe)(B||ie||!(we in ue))&&E(ue,we,Fe[we]);else f({target:rt,proto:!0,forced:B||ie},Fe);return Fe}},"7f9a":function(s,l,i){var f=i("da84"),m=i("8925"),y=f.WeakMap;s.exports=typeof y=="function"&&/native code/.test(m(y))},"825a":function(s,l,i){var f=i("861d");s.exports=function(m){if(!f(m))throw TypeError(String(m)+" is not an object");return m}},"83ab":function(s,l,i){var f=i("d039");s.exports=!f(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,l,i){var f=i("c04e"),m=i("9bf2"),y=i("5c6c");s.exports=function(x,A,w){var E=f(A);E in x?m.f(x,E,y(0,w)):x[E]=w}},"861d":function(s,l){s.exports=function(i){return typeof i=="object"?i!==null:typeof i=="function"}},8875:function(s,l,i){var f,m,y;(function(x,A){m=[],f=A,y=typeof f=="function"?f.apply(l,m):f,y!==void 0&&(s.exports=y)})(typeof self<"u"?self:this,function(){function x(){var A=Object.getOwnPropertyDescriptor(document,"currentScript");if(!A&&"currentScript"in document&&document.currentScript||A&&A.get!==x&&document.currentScript)return document.currentScript;try{throw new Error}catch(tt){var w=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,E=/@([^@]*):(\d+):(\d+)\s*$/ig,L=w.exec(tt.stack)||E.exec(tt.stack),k=L&&L[1]||!1,z=L&&L[2]||!1,F=document.location.href.replace(document.location.hash,""),D,B,U,$=document.getElementsByTagName("script");k===F&&(D=document.documentElement.outerHTML,B=new RegExp("(?:[^\\n]+?\\n){0,"+(z-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),U=D.replace(B,"$1").trim());for(var q=0;q<$.length;q++)if($[q].readyState==="interactive"||$[q].src===k||k===F&&$[q].innerHTML&&$[q].innerHTML.trim()===U)return $[q];return null}}return x})},8925:function(s,l,i){var f=i("c6cd"),m=Function.toString;typeof f.inspectSource!="function"&&(f.inspectSource=function(y){return m.call(y)}),s.exports=f.inspectSource},"8aa5":function(s,l,i){var f=i("6547").charAt;s.exports=function(m,y,x){return y+(x?f(m,y).length:1)}},"8bbf":function(s,l){s.exports=n},"90e3":function(s,l){var i=0,f=Math.random();s.exports=function(m){return"Symbol("+String(m===void 0?"":m)+")_"+(++i+f).toString(36)}},9112:function(s,l,i){var f=i("83ab"),m=i("9bf2"),y=i("5c6c");s.exports=f?function(x,A,w){return m.f(x,A,y(1,w))}:function(x,A,w){return x[A]=w,x}},9263:function(s,l,i){var f=i("ad6d"),m=i("9f7f"),y=RegExp.prototype.exec,x=String.prototype.replace,A=y,w=function(){var z=/a/,F=/b*/g;return y.call(z,"a"),y.call(F,"a"),z.lastIndex!==0||F.lastIndex!==0}(),E=m.UNSUPPORTED_Y||m.BROKEN_CARET,L=/()??/.exec("")[1]!==void 0,k=w||L||E;k&&(A=function(F){var D=this,B,U,$,q,tt=E&&D.sticky,Y=f.call(D),G=D.source,rt=0,pt=F;return tt&&(Y=Y.replace("y",""),Y.indexOf("g")===-1&&(Y+="g"),pt=String(F).slice(D.lastIndex),D.lastIndex>0&&(!D.multiline||D.multiline&&F[D.lastIndex-1]!==`
`)&&(G="(?: "+G+")",pt=" "+pt,rt++),U=new RegExp("^(?:"+G+")",Y)),L&&(U=new RegExp("^"+G+"$(?!\\s)",Y)),w&&(B=D.lastIndex),$=y.call(tt?U:D,pt),tt?$?($.input=$.input.slice(rt),$[0]=$[0].slice(rt),$.index=D.lastIndex,D.lastIndex+=$[0].length):D.lastIndex=0:w&&$&&(D.lastIndex=D.global?$.index+$[0].length:B),L&&$&&$.length>1&&x.call($[0],U,function(){for(q=1;q<arguments.length-2;q++)arguments[q]===void 0&&($[q]=void 0)}),$}),s.exports=A},"94ca":function(s,l,i){var f=i("d039"),m=/#|\.prototype\./,y=function(L,k){var z=A[x(L)];return z==E?!0:z==w?!1:typeof k=="function"?f(k):!!k},x=y.normalize=function(L){return String(L).replace(m,".").toLowerCase()},A=y.data={},w=y.NATIVE="N",E=y.POLYFILL="P";s.exports=y},"99af":function(s,l,i){var f=i("23e7"),m=i("d039"),y=i("e8b5"),x=i("861d"),A=i("7b0b"),w=i("50c4"),E=i("8418"),L=i("65f0"),k=i("1dde"),z=i("b622"),F=i("2d00"),D=z("isConcatSpreadable"),B=9007199254740991,U="Maximum allowed index exceeded",$=F>=51||!m(function(){var G=[];return G[D]=!1,G.concat()[0]!==G}),q=k("concat"),tt=function(G){if(!x(G))return!1;var rt=G[D];return rt!==void 0?!!rt:y(G)},Y=!$||!q;f({target:"Array",proto:!0,forced:Y},{concat:function(rt){var pt=A(this),Q=L(pt,0),ot=0,Z,Kt,Ft,Tt,ie;for(Z=-1,Ft=arguments.length;Z<Ft;Z++)if(ie=Z===-1?pt:arguments[Z],tt(ie)){if(Tt=w(ie.length),ot+Tt>B)throw TypeError(U);for(Kt=0;Kt<Tt;Kt++,ot++)Kt in ie&&E(Q,ot,ie[Kt])}else{if(ot>=B)throw TypeError(U);E(Q,ot++,ie)}return Q.length=ot,Q}})},"9bdd":function(s,l,i){var f=i("825a");s.exports=function(m,y,x,A){try{return A?y(f(x)[0],x[1]):y(x)}catch(E){var w=m.return;throw w!==void 0&&f(w.call(m)),E}}},"9bf2":function(s,l,i){var f=i("83ab"),m=i("0cfb"),y=i("825a"),x=i("c04e"),A=Object.defineProperty;l.f=f?A:function(E,L,k){if(y(E),L=x(L,!0),y(k),m)try{return A(E,L,k)}catch{}if("get"in k||"set"in k)throw TypeError("Accessors not supported");return"value"in k&&(E[L]=k.value),E}},"9ed3":function(s,l,i){var f=i("ae93").IteratorPrototype,m=i("7c73"),y=i("5c6c"),x=i("d44e"),A=i("3f8c"),w=function(){return this};s.exports=function(E,L,k){var z=L+" Iterator";return E.prototype=m(f,{next:y(1,k)}),x(E,z,!1,!0),A[z]=w,E}},"9f7f":function(s,l,i){var f=i("d039");function m(y,x){return RegExp(y,x)}l.UNSUPPORTED_Y=f(function(){var y=m("a","y");return y.lastIndex=2,y.exec("abcd")!=null}),l.BROKEN_CARET=f(function(){var y=m("^r","gy");return y.lastIndex=2,y.exec("str")!=null})},a2bf:function(s,l,i){var f=i("e8b5"),m=i("50c4"),y=i("0366"),x=function(A,w,E,L,k,z,F,D){for(var B=k,U=0,$=F?y(F,D,3):!1,q;U<L;){if(U in E){if(q=$?$(E[U],U,w):E[U],z>0&&f(q))B=x(A,w,q,m(q.length),B,z-1)-1;else{if(B>=9007199254740991)throw TypeError("Exceed the acceptable array length");A[B]=q}B++}U++}return B};s.exports=x},a352:function(s,l){s.exports=a},a434:function(s,l,i){var f=i("23e7"),m=i("23cb"),y=i("a691"),x=i("50c4"),A=i("7b0b"),w=i("65f0"),E=i("8418"),L=i("1dde"),k=i("ae40"),z=L("splice"),F=k("splice",{ACCESSORS:!0,0:0,1:2}),D=Math.max,B=Math.min,U=9007199254740991,$="Maximum allowed length exceeded";f({target:"Array",proto:!0,forced:!z||!F},{splice:function(tt,Y){var G=A(this),rt=x(G.length),pt=m(tt,rt),Q=arguments.length,ot,Z,Kt,Ft,Tt,ie;if(Q===0?ot=Z=0:Q===1?(ot=0,Z=rt-pt):(ot=Q-2,Z=B(D(y(Y),0),rt-pt)),rt+ot-Z>U)throw TypeError($);for(Kt=w(G,Z),Ft=0;Ft<Z;Ft++)Tt=pt+Ft,Tt in G&&E(Kt,Ft,G[Tt]);if(Kt.length=Z,ot<Z){for(Ft=pt;Ft<rt-Z;Ft++)Tt=Ft+Z,ie=Ft+ot,Tt in G?G[ie]=G[Tt]:delete G[ie];for(Ft=rt;Ft>rt-Z+ot;Ft--)delete G[Ft-1]}else if(ot>Z)for(Ft=rt-Z;Ft>pt;Ft--)Tt=Ft+Z-1,ie=Ft+ot-1,Tt in G?G[ie]=G[Tt]:delete G[ie];for(Ft=0;Ft<ot;Ft++)G[Ft+pt]=arguments[Ft+2];return G.length=rt-Z+ot,Kt}})},a4d3:function(s,l,i){var f=i("23e7"),m=i("da84"),y=i("d066"),x=i("c430"),A=i("83ab"),w=i("4930"),E=i("fdbf"),L=i("d039"),k=i("5135"),z=i("e8b5"),F=i("861d"),D=i("825a"),B=i("7b0b"),U=i("fc6a"),$=i("c04e"),q=i("5c6c"),tt=i("7c73"),Y=i("df75"),G=i("241c"),rt=i("057f"),pt=i("7418"),Q=i("06cf"),ot=i("9bf2"),Z=i("d1e7"),Kt=i("9112"),Ft=i("6eeb"),Tt=i("5692"),ie=i("f772"),ue=i("d012"),je=i("90e3"),jt=i("b622"),Ut=i("e538"),xe=i("746f"),Fe=i("d44e"),we=i("69f3"),qe=i("b727").forEach,fe=ie("hidden"),ge="Symbol",ne="prototype",Se=jt("toPrimitive"),We=we.set,In=we.getterFor(ge),_t=Object[ne],N=m.Symbol,Et=y("JSON","stringify"),wt=Q.f,ht=ot.f,lt=rt.f,Pt=Z.f,Wt=Tt("symbols"),ee=Tt("op-symbols"),Dt=Tt("string-to-symbol-registry"),ve=Tt("symbol-to-string-registry"),Te=Tt("wks"),Ae=m.QObject,De=!Ae||!Ae[ne]||!Ae[ne].findChild,un=A&&L(function(){return tt(ht({},"a",{get:function(){return ht(this,"a",{value:7}).a}})).a!=7})?function(ur,Fn,Jn){var gr=wt(_t,Fn);gr&&delete _t[Fn],ht(ur,Fn,Jn),gr&&ur!==_t&&ht(_t,Fn,gr)}:ht,gn=function(ur,Fn){var Jn=Wt[ur]=tt(N[ne]);return We(Jn,{type:ge,tag:ur,description:Fn}),A||(Jn.description=Fn),Jn},re=E?function(ur){return typeof ur=="symbol"}:function(ur){return Object(ur)instanceof N},ce=function(Fn,Jn,gr){Fn===_t&&ce(ee,Jn,gr),D(Fn);var rr=$(Jn,!0);return D(gr),k(Wt,rr)?(gr.enumerable?(k(Fn,fe)&&Fn[fe][rr]&&(Fn[fe][rr]=!1),gr=tt(gr,{enumerable:q(0,!1)})):(k(Fn,fe)||ht(Fn,fe,q(1,{})),Fn[fe][rr]=!0),un(Fn,rr,gr)):ht(Fn,rr,gr)},_e=function(Fn,Jn){D(Fn);var gr=U(Jn),rr=Y(gr).concat(Gn(gr));return qe(rr,function(Mi){(!A||en.call(gr,Mi))&&ce(Fn,Mi,gr[Mi])}),Fn},Ue=function(Fn,Jn){return Jn===void 0?tt(Fn):_e(tt(Fn),Jn)},en=function(Fn){var Jn=$(Fn,!0),gr=Pt.call(this,Jn);return this===_t&&k(Wt,Jn)&&!k(ee,Jn)?!1:gr||!k(this,Jn)||!k(Wt,Jn)||k(this,fe)&&this[fe][Jn]?gr:!0},Un=function(Fn,Jn){var gr=U(Fn),rr=$(Jn,!0);if(!(gr===_t&&k(Wt,rr)&&!k(ee,rr))){var Mi=wt(gr,rr);return Mi&&k(Wt,rr)&&!(k(gr,fe)&&gr[fe][rr])&&(Mi.enumerable=!0),Mi}},lr=function(Fn){var Jn=lt(U(Fn)),gr=[];return qe(Jn,function(rr){!k(Wt,rr)&&!k(ue,rr)&&gr.push(rr)}),gr},Gn=function(Fn){var Jn=Fn===_t,gr=lt(Jn?ee:U(Fn)),rr=[];return qe(gr,function(Mi){k(Wt,Mi)&&(!Jn||k(_t,Mi))&&rr.push(Wt[Mi])}),rr};if(w||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor");var Fn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Jn=je(Fn),gr=function(rr){this===_t&&gr.call(ee,rr),k(this,fe)&&k(this[fe],Jn)&&(this[fe][Jn]=!1),un(this,Jn,q(1,rr))};return A&&De&&un(_t,Jn,{configurable:!0,set:gr}),gn(Jn,Fn)},Ft(N[ne],"toString",function(){return In(this).tag}),Ft(N,"withoutSetter",function(ur){return gn(je(ur),ur)}),Z.f=en,ot.f=ce,Q.f=Un,G.f=rt.f=lr,pt.f=Gn,Ut.f=function(ur){return gn(jt(ur),ur)},A&&(ht(N[ne],"description",{configurable:!0,get:function(){return In(this).description}}),x||Ft(_t,"propertyIsEnumerable",en,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!w,sham:!w},{Symbol:N}),qe(Y(Te),function(ur){xe(ur)}),f({target:ge,stat:!0,forced:!w},{for:function(ur){var Fn=String(ur);if(k(Dt,Fn))return Dt[Fn];var Jn=N(Fn);return Dt[Fn]=Jn,ve[Jn]=Fn,Jn},keyFor:function(Fn){if(!re(Fn))throw TypeError(Fn+" is not a symbol");if(k(ve,Fn))return ve[Fn]},useSetter:function(){De=!0},useSimple:function(){De=!1}}),f({target:"Object",stat:!0,forced:!w,sham:!A},{create:Ue,defineProperty:ce,defineProperties:_e,getOwnPropertyDescriptor:Un}),f({target:"Object",stat:!0,forced:!w},{getOwnPropertyNames:lr,getOwnPropertySymbols:Gn}),f({target:"Object",stat:!0,forced:L(function(){pt.f(1)})},{getOwnPropertySymbols:function(Fn){return pt.f(B(Fn))}}),Et){var zr=!w||L(function(){var ur=N();return Et([ur])!="[null]"||Et({a:ur})!="{}"||Et(Object(ur))!="{}"});f({target:"JSON",stat:!0,forced:zr},{stringify:function(Fn,Jn,gr){for(var rr=[Fn],Mi=1,Ns;arguments.length>Mi;)rr.push(arguments[Mi++]);if(Ns=Jn,!(!F(Jn)&&Fn===void 0||re(Fn)))return z(Jn)||(Jn=function(Zi,et){if(typeof Ns=="function"&&(et=Ns.call(this,Zi,et)),!re(et))return et}),rr[1]=Jn,Et.apply(null,rr)}})}N[ne][Se]||Kt(N[ne],Se,N[ne].valueOf),Fe(N,ge),ue[fe]=!0},a630:function(s,l,i){var f=i("23e7"),m=i("4df4"),y=i("1c7e"),x=!y(function(A){Array.from(A)});f({target:"Array",stat:!0,forced:x},{from:m})},a640:function(s,l,i){var f=i("d039");s.exports=function(m,y){var x=[][m];return!!x&&f(function(){x.call(null,y||function(){throw 1},1)})}},a691:function(s,l){var i=Math.ceil,f=Math.floor;s.exports=function(m){return isNaN(m=+m)?0:(m>0?f:i)(m)}},ab13:function(s,l,i){var f=i("b622"),m=f("match");s.exports=function(y){var x=/./;try{"/./"[y](x)}catch{try{return x[m]=!1,"/./"[y](x)}catch{}}return!1}},ac1f:function(s,l,i){var f=i("23e7"),m=i("9263");f({target:"RegExp",proto:!0,forced:/./.exec!==m},{exec:m})},ad6d:function(s,l,i){var f=i("825a");s.exports=function(){var m=f(this),y="";return m.global&&(y+="g"),m.ignoreCase&&(y+="i"),m.multiline&&(y+="m"),m.dotAll&&(y+="s"),m.unicode&&(y+="u"),m.sticky&&(y+="y"),y}},ae40:function(s,l,i){var f=i("83ab"),m=i("d039"),y=i("5135"),x=Object.defineProperty,A={},w=function(E){throw E};s.exports=function(E,L){if(y(A,E))return A[E];L||(L={});var k=[][E],z=y(L,"ACCESSORS")?L.ACCESSORS:!1,F=y(L,0)?L[0]:w,D=y(L,1)?L[1]:void 0;return A[E]=!!k&&!m(function(){if(z&&!f)return!0;var B={length:-1};z?x(B,1,{enumerable:!0,get:w}):B[1]=1,k.call(B,F,D)})}},ae93:function(s,l,i){var f=i("e163"),m=i("9112"),y=i("5135"),x=i("b622"),A=i("c430"),w=x("iterator"),E=!1,L=function(){return this},k,z,F;[].keys&&(F=[].keys(),"next"in F?(z=f(f(F)),z!==Object.prototype&&(k=z)):E=!0),k==null&&(k={}),!A&&!y(k,w)&&m(k,w,L),s.exports={IteratorPrototype:k,BUGGY_SAFARI_ITERATORS:E}},b041:function(s,l,i){var f=i("00ee"),m=i("f5df");s.exports=f?{}.toString:function(){return"[object "+m(this)+"]"}},b0c0:function(s,l,i){var f=i("83ab"),m=i("9bf2").f,y=Function.prototype,x=y.toString,A=/^\s*function ([^ (]*)/,w="name";f&&!(w in y)&&m(y,w,{configurable:!0,get:function(){try{return x.call(this).match(A)[1]}catch{return""}}})},b622:function(s,l,i){var f=i("da84"),m=i("5692"),y=i("5135"),x=i("90e3"),A=i("4930"),w=i("fdbf"),E=m("wks"),L=f.Symbol,k=w?L:L&&L.withoutSetter||x;s.exports=function(z){return y(E,z)||(A&&y(L,z)?E[z]=L[z]:E[z]=k("Symbol."+z)),E[z]}},b64b:function(s,l,i){var f=i("23e7"),m=i("7b0b"),y=i("df75"),x=i("d039"),A=x(function(){y(1)});f({target:"Object",stat:!0,forced:A},{keys:function(E){return y(m(E))}})},b727:function(s,l,i){var f=i("0366"),m=i("44ad"),y=i("7b0b"),x=i("50c4"),A=i("65f0"),w=[].push,E=function(L){var k=L==1,z=L==2,F=L==3,D=L==4,B=L==6,U=L==5||B;return function($,q,tt,Y){for(var G=y($),rt=m(G),pt=f(q,tt,3),Q=x(rt.length),ot=0,Z=Y||A,Kt=k?Z($,Q):z?Z($,0):void 0,Ft,Tt;Q>ot;ot++)if((U||ot in rt)&&(Ft=rt[ot],Tt=pt(Ft,ot,G),L)){if(k)Kt[ot]=Tt;else if(Tt)switch(L){case 3:return!0;case 5:return Ft;case 6:return ot;case 2:w.call(Kt,Ft)}else if(D)return!1}return B?-1:F||D?D:Kt}};s.exports={forEach:E(0),map:E(1),filter:E(2),some:E(3),every:E(4),find:E(5),findIndex:E(6)}},c04e:function(s,l,i){var f=i("861d");s.exports=function(m,y){if(!f(m))return m;var x,A;if(y&&typeof(x=m.toString)=="function"&&!f(A=x.call(m))||typeof(x=m.valueOf)=="function"&&!f(A=x.call(m))||!y&&typeof(x=m.toString)=="function"&&!f(A=x.call(m)))return A;throw TypeError("Can't convert object to primitive value")}},c430:function(s,l){s.exports=!1},c6b6:function(s,l){var i={}.toString;s.exports=function(f){return i.call(f).slice(8,-1)}},c6cd:function(s,l,i){var f=i("da84"),m=i("ce4e"),y="__core-js_shared__",x=f[y]||m(y,{});s.exports=x},c740:function(s,l,i){var f=i("23e7"),m=i("b727").findIndex,y=i("44d2"),x=i("ae40"),A="findIndex",w=!0,E=x(A);A in[]&&Array(1)[A](function(){w=!1}),f({target:"Array",proto:!0,forced:w||!E},{findIndex:function(k){return m(this,k,arguments.length>1?arguments[1]:void 0)}}),y(A)},c8ba:function(s,l){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}s.exports=i},c975:function(s,l,i){var f=i("23e7"),m=i("4d64").indexOf,y=i("a640"),x=i("ae40"),A=[].indexOf,w=!!A&&1/[1].indexOf(1,-0)<0,E=y("indexOf"),L=x("indexOf",{ACCESSORS:!0,1:0});f({target:"Array",proto:!0,forced:w||!E||!L},{indexOf:function(z){return w?A.apply(this,arguments)||0:m(this,z,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,l,i){var f=i("5135"),m=i("fc6a"),y=i("4d64").indexOf,x=i("d012");s.exports=function(A,w){var E=m(A),L=0,k=[],z;for(z in E)!f(x,z)&&f(E,z)&&k.push(z);for(;w.length>L;)f(E,z=w[L++])&&(~y(k,z)||k.push(z));return k}},caad:function(s,l,i){var f=i("23e7"),m=i("4d64").includes,y=i("44d2"),x=i("ae40"),A=x("indexOf",{ACCESSORS:!0,1:0});f({target:"Array",proto:!0,forced:!A},{includes:function(E){return m(this,E,arguments.length>1?arguments[1]:void 0)}}),y("includes")},cc12:function(s,l,i){var f=i("da84"),m=i("861d"),y=f.document,x=m(y)&&m(y.createElement);s.exports=function(A){return x?y.createElement(A):{}}},ce4e:function(s,l,i){var f=i("da84"),m=i("9112");s.exports=function(y,x){try{m(f,y,x)}catch{f[y]=x}return x}},d012:function(s,l){s.exports={}},d039:function(s,l){s.exports=function(i){try{return!!i()}catch{return!0}}},d066:function(s,l,i){var f=i("428f"),m=i("da84"),y=function(x){return typeof x=="function"?x:void 0};s.exports=function(x,A){return arguments.length<2?y(f[x])||y(m[x]):f[x]&&f[x][A]||m[x]&&m[x][A]}},d1e7:function(s,l,i){var f={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,y=m&&!f.call({1:2},1);l.f=y?function(A){var w=m(this,A);return!!w&&w.enumerable}:f},d28b:function(s,l,i){var f=i("746f");f("iterator")},d2bb:function(s,l,i){var f=i("825a"),m=i("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var y=!1,x={},A;try{A=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,A.call(x,[]),y=x instanceof Array}catch{}return function(E,L){return f(E),m(L),y?A.call(E,L):E.__proto__=L,E}}():void 0)},d3b7:function(s,l,i){var f=i("00ee"),m=i("6eeb"),y=i("b041");f||m(Object.prototype,"toString",y,{unsafe:!0})},d44e:function(s,l,i){var f=i("9bf2").f,m=i("5135"),y=i("b622"),x=y("toStringTag");s.exports=function(A,w,E){A&&!m(A=E?A:A.prototype,x)&&f(A,x,{configurable:!0,value:w})}},d58f:function(s,l,i){var f=i("1c0b"),m=i("7b0b"),y=i("44ad"),x=i("50c4"),A=function(w){return function(E,L,k,z){f(L);var F=m(E),D=y(F),B=x(F.length),U=w?B-1:0,$=w?-1:1;if(k<2)for(;;){if(U in D){z=D[U],U+=$;break}if(U+=$,w?U<0:B<=U)throw TypeError("Reduce of empty array with no initial value")}for(;w?U>=0:B>U;U+=$)U in D&&(z=L(z,D[U],U,F));return z}};s.exports={left:A(!1),right:A(!0)}},d784:function(s,l,i){i("ac1f");var f=i("6eeb"),m=i("d039"),y=i("b622"),x=i("9263"),A=i("9112"),w=y("species"),E=!m(function(){var D=/./;return D.exec=function(){var B=[];return B.groups={a:"7"},B},"".replace(D,"$<a>")!=="7"}),L=function(){return"a".replace(/./,"$0")==="$0"}(),k=y("replace"),z=function(){return/./[k]?/./[k]("a","$0")==="":!1}(),F=!m(function(){var D=/(?:)/,B=D.exec;D.exec=function(){return B.apply(this,arguments)};var U="ab".split(D);return U.length!==2||U[0]!=="a"||U[1]!=="b"});s.exports=function(D,B,U,$){var q=y(D),tt=!m(function(){var ot={};return ot[q]=function(){return 7},""[D](ot)!=7}),Y=tt&&!m(function(){var ot=!1,Z=/a/;return D==="split"&&(Z={},Z.constructor={},Z.constructor[w]=function(){return Z},Z.flags="",Z[q]=/./[q]),Z.exec=function(){return ot=!0,null},Z[q](""),!ot});if(!tt||!Y||D==="replace"&&!(E&&L&&!z)||D==="split"&&!F){var G=/./[q],rt=U(q,""[D],function(ot,Z,Kt,Ft,Tt){return Z.exec===x?tt&&!Tt?{done:!0,value:G.call(Z,Kt,Ft)}:{done:!0,value:ot.call(Kt,Z,Ft)}:{done:!1}},{REPLACE_KEEPS_$0:L,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:z}),pt=rt[0],Q=rt[1];f(String.prototype,D,pt),f(RegExp.prototype,q,B==2?function(ot,Z){return Q.call(ot,this,Z)}:function(ot){return Q.call(ot,this)})}$&&A(RegExp.prototype[q],"sham",!0)}},d81d:function(s,l,i){var f=i("23e7"),m=i("b727").map,y=i("1dde"),x=i("ae40"),A=y("map"),w=x("map");f({target:"Array",proto:!0,forced:!A||!w},{map:function(L){return m(this,L,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,l,i){(function(f){var m=function(y){return y&&y.Math==Math&&y};s.exports=m(typeof globalThis=="object"&&globalThis)||m(typeof window=="object"&&window)||m(typeof self=="object"&&self)||m(typeof f=="object"&&f)||Function("return this")()}).call(this,i("c8ba"))},dbb4:function(s,l,i){var f=i("23e7"),m=i("83ab"),y=i("56ef"),x=i("fc6a"),A=i("06cf"),w=i("8418");f({target:"Object",stat:!0,sham:!m},{getOwnPropertyDescriptors:function(L){for(var k=x(L),z=A.f,F=y(k),D={},B=0,U,$;F.length>B;)$=z(k,U=F[B++]),$!==void 0&&w(D,U,$);return D}})},dbf1:function(s,l,i){(function(f){i.d(l,"a",function(){return y});function m(){return typeof window<"u"?window.console:f.console}var y=m()}).call(this,i("c8ba"))},ddb0:function(s,l,i){var f=i("da84"),m=i("fdbc"),y=i("e260"),x=i("9112"),A=i("b622"),w=A("iterator"),E=A("toStringTag"),L=y.values;for(var k in m){var z=f[k],F=z&&z.prototype;if(F){if(F[w]!==L)try{x(F,w,L)}catch{F[w]=L}if(F[E]||x(F,E,k),m[k]){for(var D in y)if(F[D]!==y[D])try{x(F,D,y[D])}catch{F[D]=y[D]}}}}},df75:function(s,l,i){var f=i("ca84"),m=i("7839");s.exports=Object.keys||function(x){return f(x,m)}},e01a:function(s,l,i){var f=i("23e7"),m=i("83ab"),y=i("da84"),x=i("5135"),A=i("861d"),w=i("9bf2").f,E=i("e893"),L=y.Symbol;if(m&&typeof L=="function"&&(!("description"in L.prototype)||L().description!==void 0)){var k={},z=function(){var q=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),tt=this instanceof z?new L(q):q===void 0?L():L(q);return q===""&&(k[tt]=!0),tt};E(z,L);var F=z.prototype=L.prototype;F.constructor=z;var D=F.toString,B=String(L("test"))=="Symbol(test)",U=/^Symbol\((.*)\)[^)]+$/;w(F,"description",{configurable:!0,get:function(){var q=A(this)?this.valueOf():this,tt=D.call(q);if(x(k,q))return"";var Y=B?tt.slice(7,-1):tt.replace(U,"$1");return Y===""?void 0:Y}}),f({global:!0,forced:!0},{Symbol:z})}},e163:function(s,l,i){var f=i("5135"),m=i("7b0b"),y=i("f772"),x=i("e177"),A=y("IE_PROTO"),w=Object.prototype;s.exports=x?Object.getPrototypeOf:function(E){return E=m(E),f(E,A)?E[A]:typeof E.constructor=="function"&&E instanceof E.constructor?E.constructor.prototype:E instanceof Object?w:null}},e177:function(s,l,i){var f=i("d039");s.exports=!f(function(){function m(){}return m.prototype.constructor=null,Object.getPrototypeOf(new m)!==m.prototype})},e260:function(s,l,i){var f=i("fc6a"),m=i("44d2"),y=i("3f8c"),x=i("69f3"),A=i("7dd0"),w="Array Iterator",E=x.set,L=x.getterFor(w);s.exports=A(Array,"Array",function(k,z){E(this,{type:w,target:f(k),index:0,kind:z})},function(){var k=L(this),z=k.target,F=k.kind,D=k.index++;return!z||D>=z.length?(k.target=void 0,{value:void 0,done:!0}):F=="keys"?{value:D,done:!1}:F=="values"?{value:z[D],done:!1}:{value:[D,z[D]],done:!1}},"values"),y.Arguments=y.Array,m("keys"),m("values"),m("entries")},e439:function(s,l,i){var f=i("23e7"),m=i("d039"),y=i("fc6a"),x=i("06cf").f,A=i("83ab"),w=m(function(){x(1)}),E=!A||w;f({target:"Object",stat:!0,forced:E,sham:!A},{getOwnPropertyDescriptor:function(k,z){return x(y(k),z)}})},e538:function(s,l,i){var f=i("b622");l.f=f},e893:function(s,l,i){var f=i("5135"),m=i("56ef"),y=i("06cf"),x=i("9bf2");s.exports=function(A,w){for(var E=m(w),L=x.f,k=y.f,z=0;z<E.length;z++){var F=E[z];f(A,F)||L(A,F,k(w,F))}}},e8b5:function(s,l,i){var f=i("c6b6");s.exports=Array.isArray||function(y){return f(y)=="Array"}},e95a:function(s,l,i){var f=i("b622"),m=i("3f8c"),y=f("iterator"),x=Array.prototype;s.exports=function(A){return A!==void 0&&(m.Array===A||x[y]===A)}},f5df:function(s,l,i){var f=i("00ee"),m=i("c6b6"),y=i("b622"),x=y("toStringTag"),A=m(function(){return arguments}())=="Arguments",w=function(E,L){try{return E[L]}catch{}};s.exports=f?m:function(E){var L,k,z;return E===void 0?"Undefined":E===null?"Null":typeof(k=w(L=Object(E),x))=="string"?k:A?m(L):(z=m(L))=="Object"&&typeof L.callee=="function"?"Arguments":z}},f772:function(s,l,i){var f=i("5692"),m=i("90e3"),y=f("keys");s.exports=function(x){return y[x]||(y[x]=m(x))}},fb15:function(s,l,i){if(i.r(l),typeof window<"u"){var f=window.document.currentScript;{var m=i("8875");f=m(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:m})}var y=f&&f.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);y&&(i.p=y[1])}i("99af"),i("4de4"),i("4160"),i("c975"),i("d81d"),i("a434"),i("159b"),i("a4d3"),i("e439"),i("dbb4"),i("b64b");function x(re,ce,_e){return ce in re?Object.defineProperty(re,ce,{value:_e,enumerable:!0,configurable:!0,writable:!0}):re[ce]=_e,re}function A(re,ce){var _e=Object.keys(re);if(Object.getOwnPropertySymbols){var Ue=Object.getOwnPropertySymbols(re);ce&&(Ue=Ue.filter(function(en){return Object.getOwnPropertyDescriptor(re,en).enumerable})),_e.push.apply(_e,Ue)}return _e}function w(re){for(var ce=1;ce<arguments.length;ce++){var _e=arguments[ce]!=null?arguments[ce]:{};ce%2?A(Object(_e),!0).forEach(function(Ue){x(re,Ue,_e[Ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(re,Object.getOwnPropertyDescriptors(_e)):A(Object(_e)).forEach(function(Ue){Object.defineProperty(re,Ue,Object.getOwnPropertyDescriptor(_e,Ue))})}return re}function E(re){if(Array.isArray(re))return re}i("e01a"),i("d28b"),i("e260"),i("d3b7"),i("3ca3"),i("ddb0");function L(re,ce){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(re)))){var _e=[],Ue=!0,en=!1,Un=void 0;try{for(var lr=re[Symbol.iterator](),Gn;!(Ue=(Gn=lr.next()).done)&&(_e.push(Gn.value),!(ce&&_e.length===ce));Ue=!0);}catch(zr){en=!0,Un=zr}finally{try{!Ue&&lr.return!=null&&lr.return()}finally{if(en)throw Un}}return _e}}i("a630"),i("fb6a"),i("b0c0"),i("25f0");function k(re,ce){(ce==null||ce>re.length)&&(ce=re.length);for(var _e=0,Ue=new Array(ce);_e<ce;_e++)Ue[_e]=re[_e];return Ue}function z(re,ce){if(re){if(typeof re=="string")return k(re,ce);var _e=Object.prototype.toString.call(re).slice(8,-1);if(_e==="Object"&&re.constructor&&(_e=re.constructor.name),_e==="Map"||_e==="Set")return Array.from(re);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return k(re,ce)}}function F(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(re,ce){return E(re)||L(re,ce)||z(re,ce)||F()}function B(re){if(Array.isArray(re))return k(re)}function U(re){if(typeof Symbol<"u"&&Symbol.iterator in Object(re))return Array.from(re)}function $(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(re){return B(re)||U(re)||z(re)||$()}var tt=i("a352"),Y=i.n(tt);function G(re){re.parentElement!==null&&re.parentElement.removeChild(re)}function rt(re,ce,_e){var Ue=_e===0?re.children[0]:re.children[_e-1].nextSibling;re.insertBefore(ce,Ue)}var pt=i("dbf1");i("13d5"),i("4fad"),i("ac1f"),i("5319");function Q(re){var ce=Object.create(null);return function(Ue){var en=ce[Ue];return en||(ce[Ue]=re(Ue))}}var ot=/-(\w)/g,Z=Q(function(re){return re.replace(ot,function(ce,_e){return _e.toUpperCase()})});i("5db7"),i("73d9");var Kt=["Start","Add","Remove","Update","End"],Ft=["Choose","Unchoose","Sort","Filter","Clone"],Tt=["Move"],ie=[Tt,Kt,Ft].flatMap(function(re){return re}).map(function(re){return"on".concat(re)}),ue={manage:Tt,manageAndEmit:Kt,emit:Ft};function je(re){return ie.indexOf(re)!==-1}i("caad"),i("2ca0");var jt=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Ut(re){return jt.includes(re)}function xe(re){return["transition-group","TransitionGroup"].includes(re)}function Fe(re){return["id","class","role","style"].includes(re)||re.startsWith("data-")||re.startsWith("aria-")||re.startsWith("on")}function we(re){return re.reduce(function(ce,_e){var Ue=D(_e,2),en=Ue[0],Un=Ue[1];return ce[en]=Un,ce},{})}function qe(re){var ce=re.$attrs,_e=re.componentData,Ue=_e===void 0?{}:_e,en=we(Object.entries(ce).filter(function(Un){var lr=D(Un,2),Gn=lr[0];return lr[1],Fe(Gn)}));return w(w({},en),Ue)}function fe(re){var ce=re.$attrs,_e=re.callBackBuilder,Ue=we(ge(ce));Object.entries(_e).forEach(function(Un){var lr=D(Un,2),Gn=lr[0],zr=lr[1];ue[Gn].forEach(function(ur){Ue["on".concat(ur)]=zr(ur)})});var en="[data-draggable]".concat(Ue.draggable||"");return w(w({},Ue),{},{draggable:en})}function ge(re){return Object.entries(re).filter(function(ce){var _e=D(ce,2),Ue=_e[0];return _e[1],!Fe(Ue)}).map(function(ce){var _e=D(ce,2),Ue=_e[0],en=_e[1];return[Z(Ue),en]}).filter(function(ce){var _e=D(ce,2),Ue=_e[0];return _e[1],!je(Ue)})}i("c740");function ne(re,ce){if(!(re instanceof ce))throw new TypeError("Cannot call a class as a function")}function Se(re,ce){for(var _e=0;_e<ce.length;_e++){var Ue=ce[_e];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(re,Ue.key,Ue)}}function We(re,ce,_e){return ce&&Se(re.prototype,ce),re}var In=function(ce){var _e=ce.el;return _e},_t=function(ce,_e){return ce.__draggable_context=_e},N=function(ce){return ce.__draggable_context},Et=function(){function re(ce){var _e=ce.nodes,Ue=_e.header,en=_e.default,Un=_e.footer,lr=ce.root,Gn=ce.realList;ne(this,re),this.defaultNodes=en,this.children=[].concat(q(Ue),q(en),q(Un)),this.externalComponent=lr.externalComponent,this.rootTransition=lr.transition,this.tag=lr.tag,this.realList=Gn}return We(re,[{key:"render",value:function(_e,Ue){var en=this.tag,Un=this.children,lr=this._isRootComponent,Gn=lr?{default:function(){return Un}}:Un;return _e(en,Ue,Gn)}},{key:"updated",value:function(){var _e=this.defaultNodes,Ue=this.realList;_e.forEach(function(en,Un){_t(In(en),{element:Ue[Un],index:Un})})}},{key:"getUnderlyingVm",value:function(_e){return N(_e)}},{key:"getVmIndexFromDomIndex",value:function(_e,Ue){var en=this.defaultNodes,Un=en.length,lr=Ue.children,Gn=lr.item(_e);if(Gn===null)return Un;var zr=N(Gn);if(zr)return zr.index;if(Un===0)return 0;var ur=In(en[0]),Fn=q(lr).findIndex(function(Jn){return Jn===ur});return _e<Fn?0:Un}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),re}(),wt=i("8bbf");function ht(re,ce){var _e=re[ce];return _e?_e():[]}function lt(re){var ce=re.$slots,_e=re.realList,Ue=re.getKey,en=_e||[],Un=["header","footer"].map(function(Jn){return ht(ce,Jn)}),lr=D(Un,2),Gn=lr[0],zr=lr[1],ur=ce.item;if(!ur)throw new Error("draggable element must have an item slot");var Fn=en.flatMap(function(Jn,gr){return ur({element:Jn,index:gr}).map(function(rr){return rr.key=Ue(Jn),rr.props=w(w({},rr.props||{}),{},{"data-draggable":!0}),rr})});if(Fn.length!==en.length)throw new Error("Item slot must have only one child");return{header:Gn,footer:zr,default:Fn}}function Pt(re){var ce=xe(re),_e=!Ut(re)&&!ce;return{transition:ce,externalComponent:_e,tag:_e?Object(wt.resolveComponent)(re):ce?wt.TransitionGroup:re}}function Wt(re){var ce=re.$slots,_e=re.tag,Ue=re.realList,en=re.getKey,Un=lt({$slots:ce,realList:Ue,getKey:en}),lr=Pt(_e);return new Et({nodes:Un,root:lr,realList:Ue})}function ee(re,ce){var _e=this;Object(wt.nextTick)(function(){return _e.$emit(re.toLowerCase(),ce)})}function Dt(re){var ce=this;return function(_e,Ue){if(ce.realList!==null)return ce["onDrag".concat(re)](_e,Ue)}}function ve(re){var ce=this,_e=Dt.call(this,re);return function(Ue,en){_e.call(ce,Ue,en),ee.call(ce,re,Ue)}}var Te=null,Ae={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ce){return ce}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},De=["update:modelValue","change"].concat(q([].concat(q(ue.manageAndEmit),q(ue.emit)).map(function(re){return re.toLowerCase()}))),un=Object(wt.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ae,emits:De,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ce=this.$slots,_e=this.$attrs,Ue=this.tag,en=this.componentData,Un=this.realList,lr=this.getKey,Gn=Wt({$slots:ce,tag:Ue,realList:Un,getKey:lr});this.componentStructure=Gn;var zr=qe({$attrs:_e,componentData:en});return Gn.render(wt.h,zr)}catch(ur){return this.error=!0,Object(wt.h)("pre",{style:{color:"red"}},ur.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&pt.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ce=this;if(!this.error){var _e=this.$attrs,Ue=this.$el,en=this.componentStructure;en.updated();var Un=fe({$attrs:_e,callBackBuilder:{manageAndEmit:function(zr){return ve.call(ce,zr)},emit:function(zr){return ee.bind(ce,zr)},manage:function(zr){return Dt.call(ce,zr)}}}),lr=Ue.nodeType===1?Ue:Ue.parentElement;this._sortable=new Y.a(lr,Un),this.targetDomElement=lr,lr.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ce=this.list;return ce||this.modelValue},getKey:function(){var ce=this.itemKey;return typeof ce=="function"?ce:function(_e){return _e[ce]}}},watch:{$attrs:{handler:function(ce){var _e=this._sortable;_e&&ge(ce).forEach(function(Ue){var en=D(Ue,2),Un=en[0],lr=en[1];_e.option(Un,lr)})},deep:!0}},methods:{getUnderlyingVm:function(ce){return this.componentStructure.getUnderlyingVm(ce)||null},getUnderlyingPotencialDraggableComponent:function(ce){return ce.__draggable_component__},emitChanges:function(ce){var _e=this;Object(wt.nextTick)(function(){return _e.$emit("change",ce)})},alterList:function(ce){if(this.list){ce(this.list);return}var _e=q(this.modelValue);ce(_e),this.$emit("update:modelValue",_e)},spliceList:function(){var ce=arguments,_e=function(en){return en.splice.apply(en,q(ce))};this.alterList(_e)},updatePosition:function(ce,_e){var Ue=function(Un){return Un.splice(_e,0,Un.splice(ce,1)[0])};this.alterList(Ue)},getRelatedContextFromMoveEvent:function(ce){var _e=ce.to,Ue=ce.related,en=this.getUnderlyingPotencialDraggableComponent(_e);if(!en)return{component:en};var Un=en.realList,lr={list:Un,component:en};if(_e!==Ue&&Un){var Gn=en.getUnderlyingVm(Ue)||{};return w(w({},Gn),lr)}return lr},getVmIndexFromDomIndex:function(ce){return this.componentStructure.getVmIndexFromDomIndex(ce,this.targetDomElement)},onDragStart:function(ce){this.context=this.getUnderlyingVm(ce.item),ce.item._underlying_vm_=this.clone(this.context.element),Te=ce.item},onDragAdd:function(ce){var _e=ce.item._underlying_vm_;if(_e!==void 0){G(ce.item);var Ue=this.getVmIndexFromDomIndex(ce.newIndex);this.spliceList(Ue,0,_e);var en={element:_e,newIndex:Ue};this.emitChanges({added:en})}},onDragRemove:function(ce){if(rt(this.$el,ce.item,ce.oldIndex),ce.pullMode==="clone"){G(ce.clone);return}var _e=this.context,Ue=_e.index,en=_e.element;this.spliceList(Ue,1);var Un={element:en,oldIndex:Ue};this.emitChanges({removed:Un})},onDragUpdate:function(ce){G(ce.item),rt(ce.from,ce.item,ce.oldIndex);var _e=this.context.index,Ue=this.getVmIndexFromDomIndex(ce.newIndex);this.updatePosition(_e,Ue);var en={element:this.context.element,oldIndex:_e,newIndex:Ue};this.emitChanges({moved:en})},computeFutureIndex:function(ce,_e){if(!ce.element)return 0;var Ue=q(_e.to.children).filter(function(Gn){return Gn.style.display!=="none"}),en=Ue.indexOf(_e.related),Un=ce.component.getVmIndexFromDomIndex(en),lr=Ue.indexOf(Te)!==-1;return lr||!_e.willInsertAfter?Un:Un+1},onDragMove:function(ce,_e){var Ue=this.move,en=this.realList;if(!Ue||!en)return!0;var Un=this.getRelatedContextFromMoveEvent(ce),lr=this.computeFutureIndex(Un,ce),Gn=w(w({},this.context),{},{futureIndex:lr}),zr=w(w({},ce),{},{relatedContext:Un,draggedContext:Gn});return Ue(zr,_e)},onDragEnd:function(){Te=null}}}),gn=un;l.default=gn},fb6a:function(s,l,i){var f=i("23e7"),m=i("861d"),y=i("e8b5"),x=i("23cb"),A=i("50c4"),w=i("fc6a"),E=i("8418"),L=i("b622"),k=i("1dde"),z=i("ae40"),F=k("slice"),D=z("slice",{ACCESSORS:!0,0:0,1:2}),B=L("species"),U=[].slice,$=Math.max;f({target:"Array",proto:!0,forced:!F||!D},{slice:function(tt,Y){var G=w(this),rt=A(G.length),pt=x(tt,rt),Q=x(Y===void 0?rt:Y,rt),ot,Z,Kt;if(y(G)&&(ot=G.constructor,typeof ot=="function"&&(ot===Array||y(ot.prototype))?ot=void 0:m(ot)&&(ot=ot[B],ot===null&&(ot=void 0)),ot===Array||ot===void 0))return U.call(G,pt,Q);for(Z=new(ot===void 0?Array:ot)($(Q-pt,0)),Kt=0;pt<Q;pt++,Kt++)pt in G&&E(Z,Kt,G[pt]);return Z.length=Kt,Z}})},fc6a:function(s,l,i){var f=i("44ad"),m=i("1d80");s.exports=function(y){return f(m(y))}},fdbc:function(s,l){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,l,i){var f=i("4930");s.exports=f&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(v3);var qK=v3.exports;const cE=Fp(qK),YK={components:{SvgIcon:nr},props:{isSelected:Boolean,disabledDrag:Boolean,item:{type:Object,default:()=>({})}},computed:{path(){return{draggable:NM}}}},XK={class:"draggable-handle__icon"},QK={class:"draggale-item__info"};function JK(t,e,n,a,s,l){const i=Sl("SvgIcon");return Ct(),le("div",{class:mo(["draggale-item",{"draggale-item-active":n.isSelected}])},[n.disabledDrag?mn("",!0):(Ct(),le("div",{key:0,class:"draggable-handle",style:Ni({background:n.item.color})},[kt("div",XK,[Jt(i,{size:"14",type:"mdi",path:l.path.draggable},null,8,["path"])])],4)),kt("div",QK,[Zn(t.$slots,"default",{},void 0,!0)])],2)}const JA=Yn(YK,[["render",JK],["__scopeId","data-v-4edf7736"]]),tq={class:"draggable-group__info"},eq=["title"],nq={class:"draggable-group__action"},rq={key:0,class:"draggable-group__divider"},iq={key:0,class:"draggable-group__nodata"},oq=_r({__name:"draggable-list-group",props:{layerGroup:{type:Object,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean,checkItemCanPutInChildren:{type:Function},readonly:Boolean},emits:["click:delete","click:un-group","click:select","drag-done","update:layer-group"],setup(t,{emit:e}){const n=e,a={group:{open:VM,close:UM,unGroup:yD,delete:Np,show:jM,hide:HM}},s=on(!0);function l(){s.value=!s.value}function i(){n("click:delete")}function f(){n("click:un-group")}return(m,y)=>(Ct(),$e(JA,{disabledDrag:t.disabledDrag,class:"draggable-group__item"},{default:Ce(()=>[kt("div",tq,[kt("span",{class:"draggable-group__title",title:t.layerGroup.name},Mn(t.layerGroup.name),9,eq),kt("div",nq,[!t.readonly&&t.layerGroup.children&&t.layerGroup.children.length>0?(Ct(),le("span",{key:0,onClick:y[0]||(y[0]=x=>f())},[Jt(at(nr),{size:"14",type:"mdi",path:a.group.unGroup},null,8,["path"])])):mn("",!0),t.readonly?mn("",!0):(Ct(),le("span",{key:1,onClick:y[1]||(y[1]=x=>i())},[Jt(at(nr),{size:"14",type:"mdi",path:a.group.delete},null,8,["path"])])),kt("span",{onClick:y[2]||(y[2]=x=>l())},[s.value?(Ct(),$e(at(nr),{key:0,size:"14",type:"mdi",path:a.group.close},null,8,["path"])):(Ct(),$e(at(nr),{key:1,size:"14",type:"mdi",path:a.group.open},null,8,["path"]))])])]),s.value?(Ct(),le("div",rq)):mn("",!0),kt("div",{class:mo({"draggable-group__children-container":!0,_show:s.value})},[Zn(m.$slots,"item",{group:t.layerGroup},()=>[!m.p_children||m.p_children.length<1?(Ct(),le("div",iq," Drag layer inside this group ")):mn("",!0)],!0)],2)]),_:3},8,["disabledDrag"]))}}),aq=Yn(oq,[["__scopeId","data-v-465facc7"]]),sq={class:"draggable__item item"},lq={class:"draggable__item"},uq=_r({__name:"draggable-list",props:{items:{type:Array,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean},emits:["update:selected","click-group:remove","click-drag:done","update:items"],setup(t,{expose:e,emit:n}){const a=t,s=n,l=on([]),i=on({}),f=hn({get(){return a.selected},set(U){s("update:selected",U)}}),m=U=>U&&U.isGroup,y=U=>{var G;const $=U.draggedContext.element,q=(G=U.to.__vue__)==null?void 0:G.element,tt=m($),Y=q&&m(q);return tt&&Y?!1:(!tt&&!q||!tt&&q&&!m(q),!0)};$a(()=>{x(a.items)});function x(U=[]){(U==null||U.length===0)&&(U=a.items),l.value=A(U)}function A(U){let $=[];if(!U||U.length==0)return $;let q={};return U.forEach(tt=>{if(!tt.group){$.push(tt);return}q[tt.group.id]||(q[tt.group.id]=B(tt.group),$.push(q[tt.group.id])),q[tt.group.id].children.push(tt)}),$}function w(U){return U.reduce(($,q)=>(q.isGroup?q.children.length>0&&$.push(...q.children.map(tt=>(tt.group={id:q.id,name:q.name},tt))):(q.group=void 0,$.push(q)),$),[])}function E(U){a.disabledSelect||(f.value.includes(U.id)?f.value=f.value.filter($=>$!=U.id):(f.value.push(U.id),i.value[U.id]=U))}function L(U){let $=[];f.value&&f.value.length>0&&(l.value=l.value.filter(tt=>!f.value.includes(tt.id)).map(tt=>("isGroup"in tt&&tt.isGroup&&(tt.children=tt.children.filter(Y=>!f.value.includes(Y.id))),tt)),$=f.value.map(tt=>i.value[tt]),f.value=[],i.value={});let q=B({name:U||"New Group",children:$});l.value.unshift(q),q.children.length>0&&F()}function k(U,$){l.value.splice($,1),U.children.length>0&&l.value.splice($,0,...U.children)}function z(U,$){l.value[$]={...l.value[$],...U}}function F(){lu(()=>{s("update:items",w(l.value)),s("click-drag:done")})}function D(U,$){l.value.splice($,1),s("click-group:remove",U)}function B(U){let $={id:`group-${new Date().getTime()}`,name:"New Group",isGroup:!0,show:!0,children:[]};return $=Object.assign({},$,U),$}return e({update:x,addNewGroup:L}),(U,$)=>(Ct(),$e(at(cE),{modelValue:l.value,"onUpdate:modelValue":$[0]||($[0]=q=>l.value=q),group:"layers","item-key":"id",animation:200,move:y,handle:".draggable-handle",class:"draggable-group-container",onEnd:F},{item:Ce(({element:q,index:tt})=>[kt("div",sq,[q.isGroup?(Ct(),$e(aq,{key:q.id,"layer-group":q,"onUpdate:layerGroup":Y=>z(Y,tt),disabledDrag:t.disabledDrag,"onClick:delete":Y=>D(q,tt),"onClick:unGroup":Y=>k(q,tt),onDragDone:F,"onClick:select":E,onEnd:F},{item:Ce(()=>[Jt(at(cE),{modelValue:q.children,"onUpdate:modelValue":Y=>q.children=Y,group:"layers",handle:".draggable-handle","item-key":"id",animation:200,move:y,class:"draggable-group-container"},{item:Ce(({element:Y,index:G})=>[kt("div",lq,[(Ct(),$e(JA,{disabledDrag:t.disabledDrag,isSelected:f.value.includes(Y.id),item:Y,key:Y.id+"-child"},{default:Ce(()=>[Zn(U.$slots,"item",{isSelected:f.value.includes(Y.id),item:Y,index:G,toggleSelect:E},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["layer-group","onUpdate:layerGroup","disabledDrag","onClick:delete","onClick:unGroup"])):(Ct(),$e(JA,{disabledDrag:t.disabledDrag,isSelected:f.value.includes(q.id),item:q,key:q.id+"-child"},{default:Ce(()=>[Zn(U.$slots,"item",{isSelected:f.value.includes(q.id),item:q,index:tt,toggleSelect:E},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))])]),_:3},8,["modelValue"]))}}),cq=Yn(uq,[["__scopeId","data-v-f4c80f65"]]),hq={__name:"layer-item-icon",props:{loading:Boolean,item:{require:!0,type:Object}},setup(t){const e={loading:Fw,layer:Dy};return(n,a)=>(Ct(),le("div",null,[t.loading?(Ct(),$e(at(nr),{key:0,size:"14",type:"mdi",path:e.loading,class:"spin"},null,8,["path"])):(Ct(),$e(at(nr),{key:1,size:"14",type:"mdi",path:e.layer},null,8,["path"]))]))}},fq={name:"VueSlider",props:{modelValue:{},min:{default:0},max:{default:1},step:{default:.01},disabled:Boolean},computed:{backgroundSize(){return(this.modelValue-this.min)*100/(this.max-this.min)+"% 100%"},form:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}},dq=["value","min","max","step","disabled"];function pq(t,e,n,a,s,l){return Ct(),le("input",{value:l.form,onChange:e[0]||(e[0]=({target:i})=>l.form=parseFloat(i.value)),type:"range",min:n.min,max:n.max,step:n.step,style:Ni({backgroundSize:l.backgroundSize}),disabled:n.disabled},null,44,dq)}const mq=Yn(fq,[["render",pq],["__scopeId","data-v-fb1c3ee7"]]),gq={class:"menu-divider"},vq=_r({__name:"menu-divider",props:{item:{},data:{}},setup(t){return(e,n)=>(Ct(),le("div",gq))}}),yq=["title"],_q=_r({__name:"menu-item",props:{item:{}},setup(t){return(e,n)=>(Ct(),le("button",li(e.$attrs,{class:"menu-item",title:e.item.name}),[e.item.icon?(Ct(),$e(at(nr),{key:0,size:"14",type:"mdi",path:e.item.icon},null,8,["path"])):mn("",!0)],16,yq))}}),eA=_r({__name:"index",props:{item:{},data:{},mapId:{}},setup(t){const e=t,n=hn(()=>{switch(e.item.type){case"divider":return vq}return e.item.type=="item"&&"component"in e.item?e.item.component():_q});return(a,s)=>(Ct(),$e(Ga(n.value),li({item:a.item,data:a.data,mapId:a.mapId},a.$attrs),null,16,["item","data","mapId"]))}}),T3=t=>(th("data-v-1b24f90a"),t=t(),eh(),t),bq={class:"layer-item-container"},xq={class:"layer-item__info"},Aq=["title"],wq=T3(()=>kt("div",{class:"v-spacer"},null,-1)),Cq={class:"layer-item__title-action"},Iq=["disabled"],Eq=["disabled"],Sq={key:0,class:"layer-item__action"},Mq={key:0,class:"layer-item__opacity"},Tq=T3(()=>kt("div",{class:"v-spacer"},null,-1)),Pq={key:1},kq=_r({__name:"layer-item",props:{item:{},mapId:{},readonly:{type:Boolean}},emits:["update:item","click","click:remove","click:action","click:content-menu"],setup(t,{emit:e}){const n=t,a=e,s={menu:K_,loading:Fw,layer:Dy,flyTo:Sg,delete:Np,edit:dD,legendOpen:cD,legendClose:WM},l=on(!1),i=hn({get(){return n.item.opacity},set(D){let B=n.item;B.opacity=D,a("update:item",B)}}),f=()=>{a("click:remove",n.item)},m=hn(()=>n.item?n.item.getMenus()||[]:[]),y=hn(()=>m.value.filter(D=>!D.location||D.location=="extra").sort((D,B)=>(D.order||0)-(B.order||0))),x=hn(()=>m.value.filter(D=>D.location=="bottom").sort((D,B)=>(D.order||0)-(B.order||0))),A=hn(()=>m.value.filter(D=>D.location=="menu").sort((D,B)=>(D.order||0)-(B.order||0))),w=hn(()=>!n.readonly&&(!n.item.config.disabled_opacity||x.value.length>0));function E(D){a("click:action",{action:D,item:n.item})}function L(D){a("click:content-menu",{event:D,actions:A.value,item:n.item})}const k=hn(()=>n.item&&n.item.legend),z=on(!1);function F(){z.value=!z.value}return(D,B)=>(Ct(),le("div",bq,[kt("div",xq,[Jt(hq,{class:"layer-item__icon",loading:l.value,item:{item:D.item}},null,8,["loading","item"]),kt("span",{class:"layer-item__title",title:D.item.getName(),onClick:B[0]||(B[0]=U=>a("click",D.item))},[kt("span",null,Mn(D.item.getName()),1)],8,Aq),wq,kt("div",Cq,[Zn(D.$slots,"pre-btn",{loading:l.value},void 0,!0),(Ct(!0),le(Mr,null,Eo(y.value,(U,$)=>(Ct(),$e(eA,{key:$,class:"layer-item__button",item:U,data:D.item,disabled:l.value,mapId:D.mapId,onClick:q=>E(U)},null,8,["item","data","disabled","mapId","onClick"]))),128)),!D.item.config.disable_delete&&!n.readonly?(Ct(),le("button",{key:0,class:"layer-item__button",disabled:l.value,onClick:oo(f,["stop"])},[Jt(at(nr),{size:"14",type:"mdi",path:s.delete},null,8,["path"])],8,Iq)):mn("",!0),Zn(D.$slots,"extra-btn",{loading:l.value},void 0,!0),A.value.length>0?(Ct(),le("button",{key:1,class:"layer-item__button",disabled:l.value,onClick:oo(L,["prevent","stop"])},[Jt(at(nr),{size:"14",type:"mdi",path:s.menu},null,8,["path"])],8,Eq)):mn("",!0),w.value?mn("",!0):(Ct(),le(Mr,{key:2},[(Ct(!0),le(Mr,null,Eo(x.value,(U,$)=>(Ct(),$e(eA,{key:$,class:"layer-item__button",item:U,data:D.item,disabled:l.value,mapId:D.mapId,onClick:q=>E(U)},null,8,["item","data","disabled","mapId","onClick"]))),128)),k.value?(Ct(),le("button",{key:0,class:"layer-item__button",onClick:oo(F,["stop"])},[Jt(at(nr),{size:"14",type:"mdi",path:z.value?s.legendClose:s.legendOpen},null,8,["path"])])):mn("",!0)],64))])]),w.value?(Ct(),le("div",Sq,[D.item.config.disabled_opacity?mn("",!0):(Ct(),le("div",Mq,[Jt(mq,{modelValue:i.value,"onUpdate:modelValue":B[1]||(B[1]=U=>i.value=U),modelModifiers:{number:!0},disabled:l.value},null,8,["modelValue","disabled"])])),Tq,(Ct(!0),le(Mr,null,Eo(x.value,(U,$)=>(Ct(),$e(eA,{key:$,class:"layer-item__button",item:U,data:D.item,disabled:l.value,mapId:D.mapId,onClick:q=>E(U)},null,8,["item","data","disabled","mapId","onClick"]))),128)),k.value?(Ct(),le("button",{key:1,class:"layer-item__button",onClick:oo(F,["stop"])},[Jt(at(nr),{size:"14",type:"mdi",path:z.value?s.legendClose:s.legendOpen},null,8,["path"])])):mn("",!0)])):mn("",!0),n.item.legend&&z.value?(Ct(),le("div",Pq,[(Ct(),$e(Ga(n.item.legend())))])):mn("",!0)]))}}),P3=Yn(kq,[["__scopeId","data-v-1b24f90a"]]),Lq=t=>(th("data-v-286327a2"),t=t(),eh(),t),Oq={class:"layer-control-container"},Rq={class:"layer-control__header"},Dq=Lq(()=>kt("div",{class:"v-spacer"},null,-1)),zq={class:"layer-control__list"},Bq={class:"layer-context-menu"},Fq=["onClick"],Nq={class:"layer-context-menu__item-icon"},Uq=["innerHTML"],Vq=_r({__name:"LayerList",props:{...qa,disabledDrag:Boolean,disabled:Boolean},setup(t){const e=t,n={icon:Dy,menu:K_,group:{create:Bw},deleteAll:Np,layer:{create:kf}},{callMap:a,mapId:s}=bo(e),l=on([]),i=hn(()=>JT(s.value).value);Wa(i,()=>{E()},{deep:!0}),$a(()=>{E()});const f=on(void 0),m=on([]);function y(){a(tt=>{let Y="";l.value.slice().forEach((G,rt)=>{G.index=rt,h2(G.getParent(),[pt=>{Mf(pt)&&(pt.moveLayer(tt,Y),Y=pt.getBeforeId())}])})})}function x(tt){tt&&typeof tt!="string"&&(!tt||!tt.children||tt.children.length===0||tt.children.forEach(Y=>{jx(s.value,Y)}))}function A(tt){a(Y=>{_g(tt.getParent(),G=>Mf(G),[G=>{tt.config.disabled_opacity||G.setOpacity(Y,tt.opacity)}])})}function w(tt){tt&&(jx(s.value,tt),E())}function E(){k(),lu(()=>{L()})}function L(){f.value&&f.value.update(l.value)}function k(){l.value=vb(s.value,"list").sort((tt,Y)=>Y.index-tt.index)||[]}function z(){f.value&&f.value.addNewGroup("")}function F(){!l.value||l.value.length===0||(l.value.forEach(tt=>{jx(s.value,tt)}),E())}const D=on(),B=sl({items:[],view:void 0});function U({event:tt,item:Y,actions:G}){B.items=G?[...G]:[],B.view=Y,D.value&&D.value.open(tt,Y)}function $(){B.items=[],B.view=void 0,D.value&&D.value.close()}function q({action:tt,item:Y}){tt&&tt.type==="item"&&Y&&"click"in tt&&tt.click(Y,s.value,Y)}return(tt,Y)=>(Ct(),le("div",Oq,[kt("div",Rq,[Zn(tt.$slots,"title",{},void 0,!0),Dq,kt("button",{class:"layer-item__button",onClick:Y[0]||(Y[0]=G=>z())},[Jt(at(nr),{size:"16",type:"mdi",path:n.group.create},null,8,["path"])]),kt("button",{class:"layer-item__button",onClick:F},[Jt(at(nr),{size:"16",type:"mdi",path:n.deleteAll},null,8,["path"])])]),kt("div",zq,[Jt(cq,{ref_key:"groupRef",ref:f,items:l.value,"onUpdate:items":Y[1]||(Y[1]=G=>l.value=G),selected:m.value,"onUpdate:selected":Y[2]||(Y[2]=G=>m.value=G),disabled:t.disabled,disabledDrag:t.disabledDrag,"onClickDrag:done":Y[3]||(Y[3]=G=>y()),"onClickGroup:remove":x},{item:Ce(({isSelected:G,item:rt,toggleSelect:pt})=>[Zn(tt.$slots,"item",{item:rt,isSelected:G,toggleSelect:pt},()=>[(Ct(),$e(Ga(rt.component||P3),{item:rt,isSelected:G,onClick:Q=>pt(rt),"onUpdate:item":A,"onClick:remove":w,"onClick:contentMenu":U,"onClick:action":q,mapId:at(s),readonly:!1},null,40,["item","isSelected","onClick","mapId"]))],!0)]),_:3},8,["items","selected","disabled","disabledDrag"])]),Jt(at(y2),{ref_key:"contextMenuRef",ref:D},{default:Ce(()=>[kt("ul",Bq,[(Ct(!0),le(Mr,null,Eo(B.items,(G,rt)=>(Ct(),le("li",{key:rt,onClick:oo(pt=>{q({action:G,item:B.view}),$()},["stop"]),class:mo(["layer-context-menu__item",[G.class,G.type==="divider"?"layer-context-menu__divider":""]])},[kt("div",Nq,[Jt(at(nr),{size:"16",type:"mdi",path:G.icon||tt.mdiCircleSmall},null,8,["path"])]),kt("span",{innerHTML:G.name},null,8,Uq)],10,Fq))),128))])]),_:1},512)]))}}),jq=Yn(Vq,[["__scopeId","data-v-286327a2"]]),Hq={class:"layer-control__title"},Gq={class:"layer-control"},Wq={class:"base-map-card-container"},Zq={name:"layer-control"},$q=_r({...Zq,props:{...qa,...tT({show:!1})},setup(t){const e=t,{mapId:n,moduleContainerProps:a}=bo(e),{trans:s,setLocale:l}=Ka(n.value);l({map:{"layer-control":{title:"Layer Control","create-btn":"Create Layer",create:{title:"New Layer"},field:{name:"Name",type:"Type",url:"Url",minzoom:"Min zoom",maxzoom:"Max zoom",file:"File",geojson:"Geojson",tiles:"Tiles",bound:{title:"Bound",minx:"Min Longitude",miny:"Min Latitude",maxx:"Max Longitude",maxy:"Max Latitude"}},info:{title:"Info"}}}});const i={icon:Dy,menu:K_,group:{create:Bw},deleteAll:Np,layer:{create:kf}},[f,m]=Rd(e.show),[y,x]=Rd();function A(){x()}return(w,E)=>(Ct(),$e(at(ss),Za(ka(at(a))),{btn:Ce(()=>[at(f)?mn("",!0):(Ct(),$e(at(yo),{key:0,tooltip:at(s)("map.layer-control.title"),onClick:E[0]||(E[0]=oo(L=>at(m)(),["stop"])),active:at(f)},{default:Ce(()=>[Jt(at(nr),{size:"14",type:"mdi",path:i.icon},null,8,["path"])]),_:1},8,["tooltip","active"]))]),draggable:Ce(L=>[Jt(at(JM),{containerId:L.containerId,show:at(f),"onUpdate:show":E[2]||(E[2]=k=>Jo(f)?f.value=k:null)},{title:Ce(()=>[kt("span",Hq,Mn(at(s)("map.layer-control.title")),1)]),default:Ce(()=>[kt("div",Gq,[Jt(jq,{mapId:at(n)},{title:Ce(()=>[Zn(w.$slots,"titleList",{mapId:at(n)},()=>[kt("button",{class:"layer-item__button",onClick:E[1]||(E[1]=oo(k=>A(),["stop"]))},[Jt(at(nr),{size:"14",type:"mdi",path:i.layer.create},null,8,["path"])])],!0)]),_:3},8,["mapId"]),kt("div",Wq,[Zn(w.$slots,"endList",{mapId:at(n)},void 0,!0)])])]),_:2},1032,["containerId","show"])]),default:Ce(()=>[Jt(z$,{show:at(y),"onUpdate:show":E[3]||(E[3]=L=>Jo(y)?y.value=L:null)},null,8,["show"]),Zn(w.$slots,"default",{},void 0,!0)]),_:3},16))}}),Kq=Yn($q,[["__scopeId","data-v-d955a1d5"]]);function qq(t){const e=[];if(!t||t.length==0)return e;const n={};return t.forEach(a=>{if(!a.group){e.push(a);return}n[a.group.id]||(n[a.group.id]=Yq(a.group),e.push(n[a.group.id])),n[a.group.id].children.push(a)}),e}function Yq(t){let e={id:`group-${new Date().getTime()}`,name:"New Group",isGroup:!0,show:!0,children:[]};return e=Object.assign({},e,t),e}const Xq={components:{SvgIcon:nr},props:{isSelected:Boolean,disabledDrag:Boolean,item:{type:Object,default:()=>({})}},computed:{path(){return{draggable:NM}}}},Qq={class:"draggable-handle__icon"},Jq={class:"draggale-item__info"};function tY(t,e,n,a,s,l){const i=Sl("SvgIcon");return Ct(),le("div",{class:mo(["draggale-item",{"draggale-item-active":n.isSelected}])},[n.disabledDrag?mn("",!0):(Ct(),le("div",{key:0,class:"draggable-handle",style:Ni({background:n.item.color})},[kt("div",Qq,[Jt(i,{size:"14",type:"mdi",path:l.path.draggable},null,8,["path"])])],4)),kt("div",Jq,[Zn(t.$slots,"default",{},void 0,!0)])],2)}const k3=Yn(Xq,[["render",tY],["__scopeId","data-v-7e4827cb"]]),eY={class:"draggable-group__info"},nY=["title"],rY={class:"draggable-group__action"},iY={key:0,class:"draggable-group__divider"},oY={key:0,class:"draggable-group__nodata"},aY=_r({__name:"ListGroupItem",props:{item:{type:Object,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean,readonly:Boolean},setup(t){const e={group:{open:VM,close:UM}},n=on(!0);function a(){n.value=!n.value}return(s,l)=>(Ct(),$e(k3,{disabledDrag:t.disabledDrag,class:"draggable-group__item"},{default:Ce(()=>[kt("div",eY,[kt("span",{class:"draggable-group__title",title:t.item.name},Mn(t.item.name),9,nY),kt("div",rY,[Zn(s.$slots,"extra-data",{item:t.item},void 0,!0),kt("span",{onClick:l[0]||(l[0]=i=>a())},[n.value?(Ct(),$e(at(nr),{key:0,size:"14",type:"mdi",path:e.group.close},null,8,["path"])):(Ct(),$e(at(nr),{key:1,size:"14",type:"mdi",path:e.group.open},null,8,["path"]))])])]),n.value?(Ct(),le("div",iY)):mn("",!0),kt("div",{class:mo({"draggable-group__children-container":!0,_show:n.value})},[Zn(s.$slots,"items-list",{},()=>[!t.item.children||t.item.children.length===0?(Ct(),le("div",oY," Drag layer inside this group ")):mn("",!0)],!0)],2)]),_:3},8,["disabledDrag"]))}}),sY=Yn(aY,[["__scopeId","data-v-2a8c9003"]]),lY={class:"draggable-group__children"},uY={class:"leaf-item"},cY=["title"],hY={name:"RecursiveList"},fY=_r({...hY,props:{item:{type:Object,required:!0},disabledDrag:{type:Boolean,default:!1},isGroup:{type:Function,default:t=>Array.isArray(t.children)},isLeaf:{type:Function,default:t=>!Array.isArray(t.children)}},setup(t){return(e,n)=>{const a=Sl("RecursiveList",!0);return t.isGroup(t.item)?(Ct(),$e(sY,{key:0,item:t.item,"disabled-drag":t.disabledDrag},{"extra-data":Ce(({item:s})=>[Zn(e.$slots,"group-extra-data",{item:s},void 0,!0)]),"items-list":Ce(()=>[kt("div",lY,[(Ct(!0),le(Mr,null,Eo(t.item.children,(s,l)=>(Ct(),$e(a,{key:s.id||l,item:s,"disabled-drag":t.disabledDrag,"is-group":t.isGroup,"is-leaf":t.isLeaf},{"group-extra-data":Ce(({item:i})=>[Zn(e.$slots,"group-extra-data",{item:i},void 0,!0)]),leaf:Ce(({item:i})=>[Zn(e.$slots,"leaf",{item:i},void 0,!0)]),_:2},1032,["item","disabled-drag","is-group","is-leaf"]))),128))])]),_:3},8,["item","disabled-drag"])):(Ct(),$e(k3,{key:1,item:t.item,"disabled-drag":t.disabledDrag},{default:Ce(()=>[Zn(e.$slots,"leaf",{item:t.item},()=>[kt("div",uY,[kt("span",{class:"leaf-item__title",title:t.item.name},Mn(t.item.name),9,cY)])],!0)]),_:3},8,["item","disabled-drag"]))}}}),dY=Yn(fY,[["__scopeId","data-v-58a983c4"]]),pY=t=>(th("data-v-eedfe689"),t=t(),eh(),t),mY={class:"layer-control-container"},gY=pY(()=>kt("div",{class:"layer-control__header"},[kt("div",{class:"v-spacer"})],-1)),vY={class:"layer-control__list"},yY={class:"layer-context-menu"},_Y=["onClick"],bY={class:"layer-context-menu__item-icon"},xY=["innerHTML"],AY=_r({__name:"LayerListReadonly",props:{...qa,disabledDrag:Boolean,disabled:Boolean},setup(t){const e=t,{callMap:n,mapId:a}=bo(e),s=on([]);$a(()=>{i()});function l(z){n(F=>{_g(z.getParent(),D=>Mf(D),[D=>{D.toggleShow(F,z.show)},D=>{z.config.disabled_opacity||D.setOpacity(F,z.opacity)}])})}function i(){x(),lu(()=>{y()})}const f=Bu(),m=on([]);function y(){var z;m.value=qq(s.value),(z=f==null?void 0:f.proxy)==null||z.$forceUpdate()}function x(){s.value=vb(a.value,"list").sort((z,F)=>F.index-z.index)||[]}const A=on(),w=sl({items:[],view:void 0});function E({event:z,item:F,actions:D}){w.items=D?[...D]:[],w.view=F,A.value&&A.value.open(z,F)}function L(){w.items=[],w.view=void 0,A.value&&A.value.close()}function k({action:z,item:F}){z&&z.type==="item"&&F&&z.click(F,a.value,F)}return(z,F)=>(Ct(),le("div",mY,[gY,kt("div",vY,[(Ct(!0),le(Mr,null,Eo(m.value,(D,B)=>(Ct(),le("div",{key:D.id||B},[Jt(dY,{item:D,disabledDrag:""},{leaf:Ce(({item:U})=>[(Ct(),$e(Ga(U.component||P3),{item:U,"onUpdate:item":l,"onClick:contentMenu":E,"onClick:action":k,mapId:at(a),readonly:""},null,40,["item","mapId"]))]),_:2},1032,["item"])]))),128))]),Jt(at(y2),{ref_key:"contextMenuRef",ref:A},{default:Ce(()=>[kt("ul",yY,[(Ct(!0),le(Mr,null,Eo(w.items,(D,B)=>(Ct(),le("li",{key:B,onClick:oo(U=>{k({action:D,item:w.view}),L()},["stop"]),class:mo(["layer-context-menu__item",[D.class,D.type==="divider"?"layer-context-menu__divider":""]])},[kt("div",bY,[Jt(at(nr),{size:"16",type:"mdi",path:D.icon||z.mdiCircleSmall},null,8,["path"])]),kt("span",{innerHTML:D.name},null,8,xY)],10,_Y))),128))])]),_:1},512)]))}}),wY=Yn(AY,[["__scopeId","data-v-eedfe689"]]),CY={class:"layer-control__title"},IY={class:"layer-control"},EY={class:"base-map-card-container"},SY={name:"layer-control"};({...SY,props:{...qa,...tT({show:!1})}});const nA="source-highlighted",rA="layer-highlighted",MY=_r({__name:"LayerHighlight",props:{...qa,layer:{type:Object,default:()=>({type:"line",paint:{"line-color":"#004E98","line-width":4,"line-dasharray":[2,2]}})}},setup(t){const e=t;let n;const{mapId:a,callMap:s}=bo(e),l=hn(()=>{var x;return((x=tW(a.value))==null?void 0:x.value)||{type:"FeatureCollection",features:[]}}),i=(x,A)=>{const w=x.getSource(nA);w?w.setData(A):x.addSource(nA,{type:"geojson",data:A})},f=x=>{var A,w;if(x.getLayer(rA))x.moveLayer(rA);else{const E={...e.layer};E.source=nA,E.id=rA;const L=(w=(A=x.getStyle().layers)==null?void 0:A[x.getStyle().layers.length-1])==null?void 0:w.id;x.addLayer(E,L)}},m=(x,A)=>{var k,z;if(n==null||n.remove(),n=void 0,!A||typeof A=="string"||!(A.type==="Feature"||A.type==="FeatureCollection"&&((k=A.features)==null?void 0:k.length)>0))return;const E=HH(A),L=(z=E==null?void 0:E.geometry)==null?void 0:z.coordinates;if(Array.isArray(L)){const[F,D]=L;n=new py.Marker({}).setLngLat([F,D]).addTo(x)}};function y(x){s(A=>{i(A,x),f(A),m(A,x)})}return Wa(l,()=>{y(l.value)},{deep:!0}),(x,A)=>(Ct(),le("div"))}}),TY={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value},items(){return this.value.items||[]},colors(){return this.items.map(t=>t.color)}}},PY={class:"legend-item"},kY={class:"legend-text"},LY={class:"legend-value-container"};function OY(t,e,n,a,s,l){return Ct(),le("div",PY,[kt("div",kY,Mn(l.item.text)+":",1),kt("div",LY,[(Ct(!0),le(Mr,null,Eo(l.items,(i,f)=>(Ct(),le("div",{class:"legend-value",key:f},Mn(i.value),1))),128))]),kt("div",null,[kt("div",{style:Ni({background:`linear-gradient(to right,${l.colors.join(",")})`}),class:"legend-item-color"},null,4)])])}const RY=Yn(TY,[["render",OY],["__scopeId","data-v-38b04422"]]),DY={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value}}},zY={class:"legend-item"},BY={class:"legend-text"},FY={class:"legend-value"};function NY(t,e,n,a,s,l){return Ct(),le("div",zY,[kt("div",BY,Mn(l.item.text)+":",1),kt("div",{style:Ni({background:`${l.item.color}`}),class:"legend-item-color"},null,4),kt("div",FY,Mn(l.item.value),1)])}const UY=Yn(DY,[["render",NY],["__scopeId","data-v-261080ab"]]),VY={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value}}},jY={class:"legend-item"},HY={class:"legend-text"},GY={class:"legend-value"};function WY(t,e,n,a,s,l){return Ct(),le("div",jY,[kt("div",HY,Mn(l.item.text)+":",1),kt("div",GY,Mn(l.item.value),1)])}const ZY=Yn(VY,[["render",WY],["__scopeId","data-v-81e4c2e4"]]),L3={linear:RY,color:UY,text:ZY};function $Y(t,e){const n=L3[t];return()=>Ld(n,{value:e})}function KY(t){return()=>_r({name:"MultiLegend",setup(){return()=>t.map(e=>{const n=L3[e.type];return Ld(n,{value:e.value})})}})}var O3={exports:{}};(function(t,e){(function(n,a){t.exports=a()})(ca,function(){var n=function(T,H){var ft={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},zt={on:function(Xt,he,nn){if(ft[Xt]===void 0)throw new Error("Invalid event type: "+Xt);ft[Xt].push({selector:he,fn:nn})},render:function(Xt){H.store.featureChanged(Xt)}},Yt=function(Xt,he){for(var nn=ft[Xt],fn=nn.length;fn--;){var En=nn[fn];if(En.selector(he)){En.fn.call(zt,he)||H.store.render(),H.ui.updateMapClasses();break}}};return T.start.call(zt),{render:T.render,stop:function(){T.stop&&T.stop()},trash:function(){T.trash&&(T.trash(),H.store.render())},combineFeatures:function(){T.combineFeatures&&T.combineFeatures()},uncombineFeatures:function(){T.uncombineFeatures&&T.uncombineFeatures()},drag:function(Xt){Yt("drag",Xt)},click:function(Xt){Yt("click",Xt)},mousemove:function(Xt){Yt("mousemove",Xt)},mousedown:function(Xt){Yt("mousedown",Xt)},mouseup:function(Xt){Yt("mouseup",Xt)},mouseout:function(Xt){Yt("mouseout",Xt)},keydown:function(Xt){Yt("keydown",Xt)},keyup:function(Xt){Yt("keyup",Xt)},touchstart:function(Xt){Yt("touchstart",Xt)},touchmove:function(Xt){Yt("touchmove",Xt)},touchend:function(Xt){Yt("touchend",Xt)},tap:function(Xt){Yt("tap",Xt)}}};function a(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}function s(T){if(T.__esModule)return T;var H=T.default;if(typeof H=="function"){var ft=function zt(){if(this instanceof zt){var Yt=[null];Yt.push.apply(Yt,arguments);var Xt=Function.bind.apply(H,Yt);return new Xt}return H.apply(this,arguments)};ft.prototype=H.prototype}else ft={};return Object.defineProperty(ft,"__esModule",{value:!0}),Object.keys(T).forEach(function(zt){var Yt=Object.getOwnPropertyDescriptor(T,zt);Object.defineProperty(ft,zt,Yt.get?Yt:{enumerable:!0,get:function(){return T[zt]}})}),ft}var l={},i={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},f=i;function m(T){var H=0;if(T&&T.length>0){H+=Math.abs(y(T[0]));for(var ft=1;ft<T.length;ft++)H-=Math.abs(y(T[ft]))}return H}function y(T){var H,ft,zt,Yt,Xt,he,nn=0,fn=T.length;if(fn>2){for(he=0;he<fn;he++)he===fn-2?(zt=fn-2,Yt=fn-1,Xt=0):he===fn-1?(zt=fn-1,Yt=0,Xt=1):(zt=he,Yt=he+1,Xt=he+2),H=T[zt],ft=T[Yt],nn+=(x(T[Xt][0])-x(H[0]))*Math.sin(x(ft[1]));nn=nn*f.RADIUS*f.RADIUS/2}return nn}function x(T){return T*Math.PI/180}l.geometry=function T(H){var ft,zt=0;switch(H.type){case"Polygon":return m(H.coordinates);case"MultiPolygon":for(ft=0;ft<H.coordinates.length;ft++)zt+=m(H.coordinates[ft]);return zt;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(ft=0;ft<H.geometries.length;ft++)zt+=T(H.geometries[ft]);return zt}},l.ring=y;var A={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},w={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},E={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},L={POLYGON:"polygon",LINE:"line_string",POINT:"point"},k={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},z={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},F={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},D={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},B={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},U={ACTIVE:"true",INACTIVE:"false"},$=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],q=-85,tt=Object.freeze({__proto__:null,classes:A,sources:w,cursors:E,types:L,geojsonTypes:k,modes:z,events:F,updateActions:D,meta:B,activeStates:U,interactions:$,LAT_MIN:-90,LAT_RENDERED_MIN:q,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),Y={Point:0,LineString:1,MultiLineString:1,Polygon:2};function G(T,H){var ft=Y[T.geometry.type]-Y[H.geometry.type];return ft===0&&T.geometry.type===k.POLYGON?T.area-H.area:ft}function rt(T){return T.map(function(H){return H.geometry.type===k.POLYGON&&(H.area=l.geometry({type:k.FEATURE,property:{},geometry:H.geometry})),H}).sort(G).map(function(H){return delete H.area,H})}function pt(T,H){return H===void 0&&(H=0),[[T.point.x-H,T.point.y-H],[T.point.x+H,T.point.y+H]]}function Q(T){if(this._items={},this._nums={},this._length=T?T.length:0,T)for(var H=0,ft=T.length;H<ft;H++)this.add(T[H]),T[H]!==void 0&&(typeof T[H]=="string"?this._items[T[H]]=H:this._nums[T[H]]=H)}Q.prototype.add=function(T){return this.has(T)||(this._length++,typeof T=="string"?this._items[T]=this._length:this._nums[T]=this._length),this},Q.prototype.delete=function(T){return this.has(T)===!1||(this._length--,delete this._items[T],delete this._nums[T]),this},Q.prototype.has=function(T){return(typeof T=="string"||typeof T=="number")&&(this._items[T]!==void 0||this._nums[T]!==void 0)},Q.prototype.values=function(){var T=this,H=[];return Object.keys(this._items).forEach(function(ft){H.push({k:ft,v:T._items[ft]})}),Object.keys(this._nums).forEach(function(ft){H.push({k:JSON.parse(ft),v:T._nums[ft]})}),H.sort(function(ft,zt){return ft.v-zt.v}).map(function(ft){return ft.k})},Q.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ot=[B.FEATURE,B.MIDPOINT,B.VERTEX],Z={click:function(T,H,ft){return Kt(T,H,ft,ft.options.clickBuffer)},touch:function(T,H,ft){return Kt(T,H,ft,ft.options.touchBuffer)}};function Kt(T,H,ft,zt){if(ft.map===null)return[];var Yt=T?pt(T,zt):H,Xt={};ft.options.styles&&(Xt.layers=ft.options.styles.map(function(En){return En.id}).filter(function(En){return ft.map.getLayer(En)!=null}));var he=ft.map.queryRenderedFeatures(Yt,Xt).filter(function(En){return ot.indexOf(En.properties.meta)!==-1}),nn=new Q,fn=[];return he.forEach(function(En){var Pn=En.properties.id;nn.has(Pn)||(nn.add(Pn),fn.push(En))}),rt(fn)}function Ft(T,H){var ft=Z.click(T,null,H),zt={mouse:E.NONE};return ft[0]&&(zt.mouse=ft[0].properties.active===U.ACTIVE?E.MOVE:E.POINTER,zt.feature=ft[0].properties.meta),H.events.currentModeName().indexOf("draw")!==-1&&(zt.mouse=E.ADD),H.ui.queueMapClasses(zt),H.ui.updateMapClasses(),ft[0]}function Tt(T,H){var ft=T.x-H.x,zt=T.y-H.y;return Math.sqrt(ft*ft+zt*zt)}function ie(T,H,ft){ft===void 0&&(ft={});var zt=ft.fineTolerance!=null?ft.fineTolerance:4,Yt=ft.grossTolerance!=null?ft.grossTolerance:12,Xt=ft.interval!=null?ft.interval:500;T.point=T.point||H.point,T.time=T.time||H.time;var he=Tt(T.point,H.point);return he<zt||he<Yt&&H.time-T.time<Xt}function ue(T,H,ft){ft===void 0&&(ft={});var zt=ft.tolerance!=null?ft.tolerance:25,Yt=ft.interval!=null?ft.interval:250;return T.point=T.point||H.point,T.time=T.time||H.time,Tt(T.point,H.point)<zt&&H.time-T.time<Yt}var je={exports:{}},jt=je.exports=function(T,H){if(H||(H=16),T===void 0&&(T=128),T<=0)return"0";for(var ft=Math.log(Math.pow(2,T))/Math.log(H),zt=2;ft===1/0;zt*=2)ft=Math.log(Math.pow(2,T/zt))/Math.log(H)*zt;var Yt=ft-Math.floor(ft),Xt="";for(zt=0;zt<Math.floor(ft);zt++)Xt=Math.floor(Math.random()*H).toString(H)+Xt;if(Yt){var he=Math.pow(H,Yt);Xt=Math.floor(Math.random()*he).toString(H)+Xt}var nn=parseInt(Xt,H);return nn!==1/0&&nn>=Math.pow(2,T)?jt(T,H):Xt};jt.rack=function(T,H,ft){var zt=function(Xt){var he=0;do{if(he++>10){if(!ft)throw new Error("too many ID collisions, use more bits");T+=ft}var nn=jt(T,H)}while(Object.hasOwnProperty.call(Yt,nn));return Yt[nn]=Xt,nn},Yt=zt.hats={};return zt.get=function(Xt){return zt.hats[Xt]},zt.set=function(Xt,he){return zt.hats[Xt]=he,zt},zt.bits=T||128,zt.base=H||16,zt};var Ut=a(je.exports),xe=function(T,H){this.ctx=T,this.properties=H.properties||{},this.coordinates=H.geometry.coordinates,this.id=H.id||Ut(),this.type=H.geometry.type};xe.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},xe.prototype.incomingCoords=function(T){this.setCoordinates(T)},xe.prototype.setCoordinates=function(T){this.coordinates=T,this.changed()},xe.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},xe.prototype.setProperty=function(T,H){this.properties[T]=H},xe.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:k.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},xe.prototype.internal=function(T){var H={id:this.id,meta:B.FEATURE,"meta:type":this.type,active:U.INACTIVE,mode:T};if(this.ctx.options.userProperties)for(var ft in this.properties)H["user_"+ft]=this.properties[ft];return{type:k.FEATURE,properties:H,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Fe=function(T,H){xe.call(this,T,H)};(Fe.prototype=Object.create(xe.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Fe.prototype.updateCoordinate=function(T,H,ft){this.coordinates=arguments.length===3?[H,ft]:[T,H],this.changed()},Fe.prototype.getCoordinate=function(){return this.getCoordinates()};var we=function(T,H){xe.call(this,T,H)};(we.prototype=Object.create(xe.prototype)).isValid=function(){return this.coordinates.length>1},we.prototype.addCoordinate=function(T,H,ft){this.changed();var zt=parseInt(T,10);this.coordinates.splice(zt,0,[H,ft])},we.prototype.getCoordinate=function(T){var H=parseInt(T,10);return JSON.parse(JSON.stringify(this.coordinates[H]))},we.prototype.removeCoordinate=function(T){this.changed(),this.coordinates.splice(parseInt(T,10),1)},we.prototype.updateCoordinate=function(T,H,ft){var zt=parseInt(T,10);this.coordinates[zt]=[H,ft],this.changed()};var qe=function(T,H){xe.call(this,T,H),this.coordinates=this.coordinates.map(function(ft){return ft.slice(0,-1)})};(qe.prototype=Object.create(xe.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(T){return T.length>2})},qe.prototype.incomingCoords=function(T){this.coordinates=T.map(function(H){return H.slice(0,-1)}),this.changed()},qe.prototype.setCoordinates=function(T){this.coordinates=T,this.changed()},qe.prototype.addCoordinate=function(T,H,ft){this.changed();var zt=T.split(".").map(function(Yt){return parseInt(Yt,10)});this.coordinates[zt[0]].splice(zt[1],0,[H,ft])},qe.prototype.removeCoordinate=function(T){this.changed();var H=T.split(".").map(function(zt){return parseInt(zt,10)}),ft=this.coordinates[H[0]];ft&&(ft.splice(H[1],1),ft.length<3&&this.coordinates.splice(H[0],1))},qe.prototype.getCoordinate=function(T){var H=T.split(".").map(function(zt){return parseInt(zt,10)}),ft=this.coordinates[H[0]];return JSON.parse(JSON.stringify(ft[H[1]]))},qe.prototype.getCoordinates=function(){return this.coordinates.map(function(T){return T.concat([T[0]])})},qe.prototype.updateCoordinate=function(T,H,ft){this.changed();var zt=T.split("."),Yt=parseInt(zt[0],10),Xt=parseInt(zt[1],10);this.coordinates[Yt]===void 0&&(this.coordinates[Yt]=[]),this.coordinates[Yt][Xt]=[H,ft]};var fe={MultiPoint:Fe,MultiLineString:we,MultiPolygon:qe},ge=function(T,H,ft,zt,Yt){var Xt=ft.split("."),he=parseInt(Xt[0],10),nn=Xt[1]?Xt.slice(1).join("."):null;return T[he][H](nn,zt,Yt)},ne=function(T,H){if(xe.call(this,T,H),delete this.coordinates,this.model=fe[H.geometry.type],this.model===void 0)throw new TypeError(H.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(H.geometry.coordinates)};function Se(T){this.map=T.map,this.drawConfig=JSON.parse(JSON.stringify(T.options||{})),this._ctx=T}(ne.prototype=Object.create(xe.prototype))._coordinatesToFeatures=function(T){var H=this,ft=this.model.bind(this);return T.map(function(zt){return new ft(H.ctx,{id:Ut(),type:k.FEATURE,properties:{},geometry:{coordinates:zt,type:H.type.replace("Multi","")}})})},ne.prototype.isValid=function(){return this.features.every(function(T){return T.isValid()})},ne.prototype.setCoordinates=function(T){this.features=this._coordinatesToFeatures(T),this.changed()},ne.prototype.getCoordinate=function(T){return ge(this.features,"getCoordinate",T)},ne.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(T){return T.type===k.POLYGON?T.getCoordinates():T.coordinates})))},ne.prototype.updateCoordinate=function(T,H,ft){ge(this.features,"updateCoordinate",T,H,ft),this.changed()},ne.prototype.addCoordinate=function(T,H,ft){ge(this.features,"addCoordinate",T,H,ft),this.changed()},ne.prototype.removeCoordinate=function(T){ge(this.features,"removeCoordinate",T),this.changed()},ne.prototype.getFeatures=function(){return this.features},Se.prototype.setSelected=function(T){return this._ctx.store.setSelected(T)},Se.prototype.setSelectedCoordinates=function(T){var H=this;this._ctx.store.setSelectedCoordinates(T),T.reduce(function(ft,zt){return ft[zt.feature_id]===void 0&&(ft[zt.feature_id]=!0,H._ctx.store.get(zt.feature_id).changed()),ft},{})},Se.prototype.getSelected=function(){return this._ctx.store.getSelected()},Se.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Se.prototype.isSelected=function(T){return this._ctx.store.isSelected(T)},Se.prototype.getFeature=function(T){return this._ctx.store.get(T)},Se.prototype.select=function(T){return this._ctx.store.select(T)},Se.prototype.deselect=function(T){return this._ctx.store.deselect(T)},Se.prototype.deleteFeature=function(T,H){return H===void 0&&(H={}),this._ctx.store.delete(T,H)},Se.prototype.addFeature=function(T){return this._ctx.store.add(T)},Se.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Se.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Se.prototype.setActionableState=function(T){T===void 0&&(T={});var H={trash:T.trash||!1,combineFeatures:T.combineFeatures||!1,uncombineFeatures:T.uncombineFeatures||!1};return this._ctx.events.actionable(H)},Se.prototype.changeMode=function(T,H,ft){return H===void 0&&(H={}),ft===void 0&&(ft={}),this._ctx.events.changeMode(T,H,ft)},Se.prototype.updateUIClasses=function(T){return this._ctx.ui.queueMapClasses(T)},Se.prototype.activateUIButton=function(T){return this._ctx.ui.setActiveButton(T)},Se.prototype.featuresAt=function(T,H,ft){if(ft===void 0&&(ft="click"),ft!=="click"&&ft!=="touch")throw new Error("invalid buffer type");return Z[ft](T,H,this._ctx)},Se.prototype.newFeature=function(T){var H=T.geometry.type;return H===k.POINT?new Fe(this._ctx,T):H===k.LINE_STRING?new we(this._ctx,T):H===k.POLYGON?new qe(this._ctx,T):new ne(this._ctx,T)},Se.prototype.isInstanceOf=function(T,H){if(T===k.POINT)return H instanceof Fe;if(T===k.LINE_STRING)return H instanceof we;if(T===k.POLYGON)return H instanceof qe;if(T==="MultiFeature")return H instanceof ne;throw new Error("Unknown feature class: "+T)},Se.prototype.doRender=function(T){return this._ctx.store.featureChanged(T)},Se.prototype.onSetup=function(){},Se.prototype.onDrag=function(){},Se.prototype.onClick=function(){},Se.prototype.onMouseMove=function(){},Se.prototype.onMouseDown=function(){},Se.prototype.onMouseUp=function(){},Se.prototype.onMouseOut=function(){},Se.prototype.onKeyUp=function(){},Se.prototype.onKeyDown=function(){},Se.prototype.onTouchStart=function(){},Se.prototype.onTouchMove=function(){},Se.prototype.onTouchEnd=function(){},Se.prototype.onTap=function(){},Se.prototype.onStop=function(){},Se.prototype.onTrash=function(){},Se.prototype.onCombineFeature=function(){},Se.prototype.onUncombineFeature=function(){},Se.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var We={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},In=Object.keys(We);function _t(T){var H=Object.keys(T);return function(ft,zt){zt===void 0&&(zt={});var Yt={},Xt=H.reduce(function(he,nn){return he[nn]=T[nn],he},new Se(ft));return{start:function(){var he=this;Yt=Xt.onSetup(zt),In.forEach(function(nn){var fn,En=We[nn],Pn=function(){return!1};T[En]&&(Pn=function(){return!0}),he.on(nn,Pn,(fn=En,function(vn){return Xt[fn](Yt,vn)}))})},stop:function(){Xt.onStop(Yt)},trash:function(){Xt.onTrash(Yt)},combineFeatures:function(){Xt.onCombineFeatures(Yt)},uncombineFeatures:function(){Xt.onUncombineFeatures(Yt)},render:function(he,nn){Xt.toDisplayFeatures(Yt,he,nn)}}}}function N(T){return[].concat(T).filter(function(H){return H!==void 0})}function Et(){var T=this;if(!(T.ctx.map&&T.ctx.map.getSource(w.HOT)!==void 0))return fn();var H=T.ctx.events.currentModeName();T.ctx.ui.queueMapClasses({mode:H});var ft=[],zt=[];T.isDirty?zt=T.getAllIds():(ft=T.getChangedIds().filter(function(En){return T.get(En)!==void 0}),zt=T.sources.hot.filter(function(En){return En.properties.id&&ft.indexOf(En.properties.id)===-1&&T.get(En.properties.id)!==void 0}).map(function(En){return En.properties.id})),T.sources.hot=[];var Yt=T.sources.cold.length;T.sources.cold=T.isDirty?[]:T.sources.cold.filter(function(En){var Pn=En.properties.id||En.properties.parent;return ft.indexOf(Pn)===-1});var Xt=Yt!==T.sources.cold.length||zt.length>0;function he(En,Pn){var vn=T.get(En).internal(H);T.ctx.events.currentModeRender(vn,function(wr){T.sources[Pn].push(wr)})}if(ft.forEach(function(En){return he(En,"hot")}),zt.forEach(function(En){return he(En,"cold")}),Xt&&T.ctx.map.getSource(w.COLD).setData({type:k.FEATURE_COLLECTION,features:T.sources.cold}),T.ctx.map.getSource(w.HOT).setData({type:k.FEATURE_COLLECTION,features:T.sources.hot}),T._emitSelectionChange&&(T.ctx.map.fire(F.SELECTION_CHANGE,{features:T.getSelected().map(function(En){return En.toGeoJSON()}),points:T.getSelectedCoordinates().map(function(En){return{type:k.FEATURE,properties:{},geometry:{type:k.POINT,coordinates:En.coordinates}}})}),T._emitSelectionChange=!1),T._deletedFeaturesToEmit.length){var nn=T._deletedFeaturesToEmit.map(function(En){return En.toGeoJSON()});T._deletedFeaturesToEmit=[],T.ctx.map.fire(F.DELETE,{features:nn})}function fn(){T.isDirty=!1,T.clearChangedIds()}fn(),T.ctx.map.fire(F.RENDER,{})}function wt(T){var H,ft=this;this._features={},this._featureIds=new Q,this._selectedFeatureIds=new Q,this._selectedCoordinates=[],this._changedFeatureIds=new Q,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=T,this.sources={hot:[],cold:[]},this.render=function(){H||(H=requestAnimationFrame(function(){H=null,Et.call(ft)}))},this.isDirty=!1}function ht(T,H){var ft=T._selectedCoordinates.filter(function(zt){return T._selectedFeatureIds.has(zt.feature_id)});T._selectedCoordinates.length===ft.length||H.silent||(T._emitSelectionChange=!0),T._selectedCoordinates=ft}wt.prototype.createRenderBatch=function(){var T=this,H=this.render,ft=0;return this.render=function(){ft++},function(){T.render=H,ft>0&&T.render()}},wt.prototype.setDirty=function(){return this.isDirty=!0,this},wt.prototype.featureChanged=function(T){return this._changedFeatureIds.add(T),this},wt.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},wt.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},wt.prototype.getAllIds=function(){return this._featureIds.values()},wt.prototype.add=function(T){return this.featureChanged(T.id),this._features[T.id]=T,this._featureIds.add(T.id),this},wt.prototype.delete=function(T,H){var ft=this;return H===void 0&&(H={}),N(T).forEach(function(zt){ft._featureIds.has(zt)&&(ft._featureIds.delete(zt),ft._selectedFeatureIds.delete(zt),H.silent||ft._deletedFeaturesToEmit.indexOf(ft._features[zt])===-1&&ft._deletedFeaturesToEmit.push(ft._features[zt]),delete ft._features[zt],ft.isDirty=!0)}),ht(this,H),this},wt.prototype.get=function(T){return this._features[T]},wt.prototype.getAll=function(){var T=this;return Object.keys(this._features).map(function(H){return T._features[H]})},wt.prototype.select=function(T,H){var ft=this;return H===void 0&&(H={}),N(T).forEach(function(zt){ft._selectedFeatureIds.has(zt)||(ft._selectedFeatureIds.add(zt),ft._changedFeatureIds.add(zt),H.silent||(ft._emitSelectionChange=!0))}),this},wt.prototype.deselect=function(T,H){var ft=this;return H===void 0&&(H={}),N(T).forEach(function(zt){ft._selectedFeatureIds.has(zt)&&(ft._selectedFeatureIds.delete(zt),ft._changedFeatureIds.add(zt),H.silent||(ft._emitSelectionChange=!0))}),ht(this,H),this},wt.prototype.clearSelected=function(T){return T===void 0&&(T={}),this.deselect(this._selectedFeatureIds.values(),{silent:T.silent}),this},wt.prototype.setSelected=function(T,H){var ft=this;return H===void 0&&(H={}),T=N(T),this.deselect(this._selectedFeatureIds.values().filter(function(zt){return T.indexOf(zt)===-1}),{silent:H.silent}),this.select(T.filter(function(zt){return!ft._selectedFeatureIds.has(zt)}),{silent:H.silent}),this},wt.prototype.setSelectedCoordinates=function(T){return this._selectedCoordinates=T,this._emitSelectionChange=!0,this},wt.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},wt.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},wt.prototype.getSelected=function(){var T=this;return this._selectedFeatureIds.values().map(function(H){return T.get(H)})},wt.prototype.getSelectedCoordinates=function(){var T=this;return this._selectedCoordinates.map(function(H){return{coordinates:T.get(H.feature_id).getCoordinate(H.coord_path)}})},wt.prototype.isSelected=function(T){return this._selectedFeatureIds.has(T)},wt.prototype.setFeatureProperty=function(T,H,ft){this.get(T).setProperty(H,ft),this.featureChanged(T)},wt.prototype.storeMapConfig=function(){var T=this;$.forEach(function(H){T.ctx.map[H]&&(T._mapInitialConfig[H]=T.ctx.map[H].isEnabled())})},wt.prototype.restoreMapConfig=function(){var T=this;Object.keys(this._mapInitialConfig).forEach(function(H){T._mapInitialConfig[H]?T.ctx.map[H].enable():T.ctx.map[H].disable()})},wt.prototype.getInitialConfigValue=function(T){return this._mapInitialConfig[T]===void 0||this._mapInitialConfig[T]};var lt=function(){for(var T=arguments,H={},ft=0;ft<arguments.length;ft++){var zt=T[ft];for(var Yt in zt)Pt.call(zt,Yt)&&(H[Yt]=zt[Yt])}return H},Pt=Object.prototype.hasOwnProperty,Wt=a(lt),ee=["mode","feature","mouse"];function Dt(T){var H=null,ft=null,zt={onRemove:function(){return T.map.off("load",zt.connect),clearInterval(ft),zt.removeLayers(),T.store.restoreMapConfig(),T.ui.removeButtons(),T.events.removeEventListeners(),T.ui.clearMapClasses(),T.boxZoomInitial&&T.map.boxZoom.enable(),T.map=null,T.container=null,T.store=null,H&&H.parentNode&&H.parentNode.removeChild(H),H=null,this},connect:function(){T.map.off("load",zt.connect),clearInterval(ft),zt.addLayers(),T.store.storeMapConfig(),T.events.addEventListeners()},onAdd:function(Yt){var Xt=Yt.fire;return Yt.fire=function(he,nn){var fn=arguments;return Xt.length===1&&arguments.length!==1&&(fn=[Wt({},{type:he},nn)]),Xt.apply(Yt,fn)},T.map=Yt,T.events=function(he){var nn=Object.keys(he.options.modes).reduce(function(Ze,Wn){return Ze[Wn]=_t(he.options.modes[Wn]),Ze},{}),fn={},En={},Pn={},vn=null,wr=null;Pn.drag=function(Ze,Wn){Wn({point:Ze.point,time:new Date().getTime()})?(he.ui.queueMapClasses({mouse:E.DRAG}),wr.drag(Ze)):Ze.originalEvent.stopPropagation()},Pn.mousedrag=function(Ze){Pn.drag(Ze,function(Wn){return!ie(fn,Wn)})},Pn.touchdrag=function(Ze){Pn.drag(Ze,function(Wn){return!ue(En,Wn)})},Pn.mousemove=function(Ze){if((Ze.originalEvent.buttons!==void 0?Ze.originalEvent.buttons:Ze.originalEvent.which)===1)return Pn.mousedrag(Ze);var Wn=Ft(Ze,he);Ze.featureTarget=Wn,wr.mousemove(Ze)},Pn.mousedown=function(Ze){fn={time:new Date().getTime(),point:Ze.point};var Wn=Ft(Ze,he);Ze.featureTarget=Wn,wr.mousedown(Ze)},Pn.mouseup=function(Ze){var Wn=Ft(Ze,he);Ze.featureTarget=Wn,ie(fn,{point:Ze.point,time:new Date().getTime()})?wr.click(Ze):wr.mouseup(Ze)},Pn.mouseout=function(Ze){wr.mouseout(Ze)},Pn.touchstart=function(Ze){if(he.options.touchEnabled){En={time:new Date().getTime(),point:Ze.point};var Wn=Z.touch(Ze,null,he)[0];Ze.featureTarget=Wn,wr.touchstart(Ze)}},Pn.touchmove=function(Ze){if(he.options.touchEnabled)return wr.touchmove(Ze),Pn.touchdrag(Ze)},Pn.touchend=function(Ze){if(Ze.originalEvent.preventDefault(),he.options.touchEnabled){var Wn=Z.touch(Ze,null,he)[0];Ze.featureTarget=Wn,ue(En,{time:new Date().getTime(),point:Ze.point})?wr.tap(Ze):wr.touchend(Ze)}};var to=function(Ze){return!(Ze===8||Ze===46||Ze>=48&&Ze<=57)};function Pr(Ze,Wn,Ai){Ai===void 0&&(Ai={}),wr.stop();var xo=nn[Ze];if(xo===void 0)throw new Error(Ze+" is not valid");vn=Ze;var mi=xo(he,Wn);wr=n(mi,he),Ai.silent||he.map.fire(F.MODE_CHANGE,{mode:Ze}),he.store.setDirty(),he.store.render()}Pn.keydown=function(Ze){(Ze.srcElement||Ze.target).classList.contains("mapboxgl-canvas")&&(Ze.keyCode!==8&&Ze.keyCode!==46||!he.options.controls.trash?to(Ze.keyCode)?wr.keydown(Ze):Ze.keyCode===49&&he.options.controls.point?Pr(z.DRAW_POINT):Ze.keyCode===50&&he.options.controls.line_string?Pr(z.DRAW_LINE_STRING):Ze.keyCode===51&&he.options.controls.polygon&&Pr(z.DRAW_POLYGON):(Ze.preventDefault(),wr.trash()))},Pn.keyup=function(Ze){to(Ze.keyCode)&&wr.keyup(Ze)},Pn.zoomend=function(){he.store.changeZoom()},Pn.data=function(Ze){if(Ze.dataType==="style"){var Wn=he.setup,Ai=he.map,xo=he.options,mi=he.store;xo.styles.some(function(Us){return Ai.getLayer(Us.id)})||(Wn.addLayers(),mi.setDirty(),mi.render())}};var Ui={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){vn=he.options.defaultMode,wr=n(nn[vn](he),he)},changeMode:Pr,actionable:function(Ze){var Wn=!1;Object.keys(Ze).forEach(function(Ai){if(Ui[Ai]===void 0)throw new Error("Invalid action type");Ui[Ai]!==Ze[Ai]&&(Wn=!0),Ui[Ai]=Ze[Ai]}),Wn&&he.map.fire(F.ACTIONABLE,{actions:Ui})},currentModeName:function(){return vn},currentModeRender:function(Ze,Wn){return wr.render(Ze,Wn)},fire:function(Ze,Wn){Pn[Ze]&&Pn[Ze](Wn)},addEventListeners:function(){he.map.on("mousemove",Pn.mousemove),he.map.on("mousedown",Pn.mousedown),he.map.on("mouseup",Pn.mouseup),he.map.on("data",Pn.data),he.map.on("touchmove",Pn.touchmove),he.map.on("touchstart",Pn.touchstart),he.map.on("touchend",Pn.touchend),he.container.addEventListener("mouseout",Pn.mouseout),he.options.keybindings&&(he.container.addEventListener("keydown",Pn.keydown),he.container.addEventListener("keyup",Pn.keyup))},removeEventListeners:function(){he.map.off("mousemove",Pn.mousemove),he.map.off("mousedown",Pn.mousedown),he.map.off("mouseup",Pn.mouseup),he.map.off("data",Pn.data),he.map.off("touchmove",Pn.touchmove),he.map.off("touchstart",Pn.touchstart),he.map.off("touchend",Pn.touchend),he.container.removeEventListener("mouseout",Pn.mouseout),he.options.keybindings&&(he.container.removeEventListener("keydown",Pn.keydown),he.container.removeEventListener("keyup",Pn.keyup))},trash:function(Ze){wr.trash(Ze)},combineFeatures:function(){wr.combineFeatures()},uncombineFeatures:function(){wr.uncombineFeatures()},getMode:function(){return vn}}}(T),T.ui=function(he){var nn={},fn=null,En={mode:null,feature:null,mouse:null},Pn={mode:null,feature:null,mouse:null};function vn(Ze){Pn=Wt(Pn,Ze)}function wr(){var Ze,Wn;if(he.container){var Ai=[],xo=[];ee.forEach(function(mi){Pn[mi]!==En[mi]&&(Ai.push(mi+"-"+En[mi]),Pn[mi]!==null&&xo.push(mi+"-"+Pn[mi]))}),Ai.length>0&&(Ze=he.container.classList).remove.apply(Ze,Ai),xo.length>0&&(Wn=he.container.classList).add.apply(Wn,xo),En=Wt(En,Pn)}}function to(Ze,Wn){Wn===void 0&&(Wn={});var Ai=document.createElement("button");return Ai.className=A.CONTROL_BUTTON+" "+Wn.className,Ai.setAttribute("title",Wn.title),Wn.container.appendChild(Ai),Ai.addEventListener("click",function(xo){if(xo.preventDefault(),xo.stopPropagation(),xo.target===fn)return Pr(),void Wn.onDeactivate();Ui(Ze),Wn.onActivate()},!0),Ai}function Pr(){fn&&(fn.classList.remove(A.ACTIVE_BUTTON),fn=null)}function Ui(Ze){Pr();var Wn=nn[Ze];Wn&&Wn&&Ze!=="trash"&&(Wn.classList.add(A.ACTIVE_BUTTON),fn=Wn)}return{setActiveButton:Ui,queueMapClasses:vn,updateMapClasses:wr,clearMapClasses:function(){vn({mode:null,feature:null,mouse:null}),wr()},addButtons:function(){var Ze=he.options.controls,Wn=document.createElement("div");return Wn.className=A.CONTROL_GROUP+" "+A.CONTROL_BASE,Ze&&(Ze[L.LINE]&&(nn[L.LINE]=to(L.LINE,{container:Wn,className:A.CONTROL_BUTTON_LINE,title:"LineString tool "+(he.options.keybindings?"(l)":""),onActivate:function(){return he.events.changeMode(z.DRAW_LINE_STRING)},onDeactivate:function(){return he.events.trash()}})),Ze[L.POLYGON]&&(nn[L.POLYGON]=to(L.POLYGON,{container:Wn,className:A.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(he.options.keybindings?"(p)":""),onActivate:function(){return he.events.changeMode(z.DRAW_POLYGON)},onDeactivate:function(){return he.events.trash()}})),Ze[L.POINT]&&(nn[L.POINT]=to(L.POINT,{container:Wn,className:A.CONTROL_BUTTON_POINT,title:"Marker tool "+(he.options.keybindings?"(m)":""),onActivate:function(){return he.events.changeMode(z.DRAW_POINT)},onDeactivate:function(){return he.events.trash()}})),Ze.trash&&(nn.trash=to("trash",{container:Wn,className:A.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){he.events.trash()}})),Ze.combine_features&&(nn.combine_features=to("combineFeatures",{container:Wn,className:A.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){he.events.combineFeatures()}})),Ze.uncombine_features&&(nn.uncombine_features=to("uncombineFeatures",{container:Wn,className:A.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){he.events.uncombineFeatures()}}))),Wn},removeButtons:function(){Object.keys(nn).forEach(function(Ze){var Wn=nn[Ze];Wn.parentNode&&Wn.parentNode.removeChild(Wn),delete nn[Ze]})}}}(T),T.container=Yt.getContainer(),T.store=new wt(T),H=T.ui.addButtons(),T.options.boxSelect&&(T.boxZoomInitial=Yt.boxZoom.isEnabled(),Yt.boxZoom.disable(),Yt.dragPan.disable(),Yt.dragPan.enable()),Yt.loaded()?zt.connect():(Yt.on("load",zt.connect),ft=setInterval(function(){Yt.loaded()&&zt.connect()},16)),T.events.start(),H},addLayers:function(){T.map.addSource(w.COLD,{data:{type:k.FEATURE_COLLECTION,features:[]},type:"geojson"}),T.map.addSource(w.HOT,{data:{type:k.FEATURE_COLLECTION,features:[]},type:"geojson"}),T.options.styles.forEach(function(Yt){T.map.addLayer(Yt)}),T.store.setDirty(!0),T.store.render()},removeLayers:function(){T.options.styles.forEach(function(Yt){T.map.getLayer(Yt.id)&&T.map.removeLayer(Yt.id)}),T.map.getSource(w.COLD)&&T.map.removeSource(w.COLD),T.map.getSource(w.HOT)&&T.map.removeSource(w.HOT)}};return T.setup=zt,zt}var ve=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Te(T){return function(H){var ft=H.featureTarget;return!!ft&&!!ft.properties&&ft.properties.meta===T}}function Ae(T){return!!T.originalEvent&&!!T.originalEvent.shiftKey&&T.originalEvent.button===0}function De(T){return!!T.featureTarget&&!!T.featureTarget.properties&&T.featureTarget.properties.active===U.ACTIVE&&T.featureTarget.properties.meta===B.FEATURE}function un(T){return!!T.featureTarget&&!!T.featureTarget.properties&&T.featureTarget.properties.active===U.INACTIVE&&T.featureTarget.properties.meta===B.FEATURE}function gn(T){return T.featureTarget===void 0}function re(T){return!!T.featureTarget&&!!T.featureTarget.properties&&T.featureTarget.properties.meta===B.FEATURE}function ce(T){var H=T.featureTarget;return!!H&&!!H.properties&&H.properties.meta===B.VERTEX}function _e(T){return!!T.originalEvent&&T.originalEvent.shiftKey===!0}function Ue(T){return T.keyCode===27}function en(T){return T.keyCode===13}var Un=Object.freeze({__proto__:null,isOfMetaType:Te,isShiftMousedown:Ae,isActiveFeature:De,isInactiveFeature:un,noTarget:gn,isFeature:re,isVertex:ce,isShiftDown:_e,isEscapeKey:Ue,isEnterKey:en,isTrue:function(){return!0}}),lr=Gn;function Gn(T,H){this.x=T,this.y=H}Gn.prototype={clone:function(){return new Gn(this.x,this.y)},add:function(T){return this.clone()._add(T)},sub:function(T){return this.clone()._sub(T)},multByPoint:function(T){return this.clone()._multByPoint(T)},divByPoint:function(T){return this.clone()._divByPoint(T)},mult:function(T){return this.clone()._mult(T)},div:function(T){return this.clone()._div(T)},rotate:function(T){return this.clone()._rotate(T)},rotateAround:function(T,H){return this.clone()._rotateAround(T,H)},matMult:function(T){return this.clone()._matMult(T)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(T){return this.x===T.x&&this.y===T.y},dist:function(T){return Math.sqrt(this.distSqr(T))},distSqr:function(T){var H=T.x-this.x,ft=T.y-this.y;return H*H+ft*ft},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(T){return Math.atan2(this.y-T.y,this.x-T.x)},angleWith:function(T){return this.angleWithSep(T.x,T.y)},angleWithSep:function(T,H){return Math.atan2(this.x*H-this.y*T,this.x*T+this.y*H)},_matMult:function(T){var H=T[0]*this.x+T[1]*this.y,ft=T[2]*this.x+T[3]*this.y;return this.x=H,this.y=ft,this},_add:function(T){return this.x+=T.x,this.y+=T.y,this},_sub:function(T){return this.x-=T.x,this.y-=T.y,this},_mult:function(T){return this.x*=T,this.y*=T,this},_div:function(T){return this.x/=T,this.y/=T,this},_multByPoint:function(T){return this.x*=T.x,this.y*=T.y,this},_divByPoint:function(T){return this.x/=T.x,this.y/=T.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var T=this.y;return this.y=this.x,this.x=-T,this},_rotate:function(T){var H=Math.cos(T),ft=Math.sin(T),zt=H*this.x-ft*this.y,Yt=ft*this.x+H*this.y;return this.x=zt,this.y=Yt,this},_rotateAround:function(T,H){var ft=Math.cos(T),zt=Math.sin(T),Yt=H.x+ft*(this.x-H.x)-zt*(this.y-H.y),Xt=H.y+zt*(this.x-H.x)+ft*(this.y-H.y);return this.x=Yt,this.y=Xt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Gn.convert=function(T){return T instanceof Gn?T:Array.isArray(T)?new Gn(T[0],T[1]):T};var zr=a(lr);function ur(T,H){var ft=H.getBoundingClientRect();return new zr(T.clientX-ft.left-(H.clientLeft||0),T.clientY-ft.top-(H.clientTop||0))}function Fn(T,H,ft,zt){return{type:k.FEATURE,properties:{meta:B.VERTEX,parent:T,coord_path:ft,active:zt?U.ACTIVE:U.INACTIVE},geometry:{type:k.POINT,coordinates:H}}}function Jn(T,H,ft){var zt=H.geometry.coordinates,Yt=ft.geometry.coordinates;if(zt[1]>85||zt[1]<q||Yt[1]>85||Yt[1]<q)return null;var Xt={lng:(zt[0]+Yt[0])/2,lat:(zt[1]+Yt[1])/2};return{type:k.FEATURE,properties:{meta:B.MIDPOINT,parent:T,lng:Xt.lng,lat:Xt.lat,coord_path:ft.properties.coord_path},geometry:{type:k.POINT,coordinates:[Xt.lng,Xt.lat]}}}function gr(T,H,ft){H===void 0&&(H={}),ft===void 0&&(ft=null);var zt,Yt=T.geometry,Xt=Yt.type,he=Yt.coordinates,nn=T.properties&&T.properties.id,fn=[];function En(vn,wr){var to="",Pr=null;vn.forEach(function(Ui,Ze){var Wn=wr!=null?wr+"."+Ze:String(Ze),Ai=Fn(nn,Ui,Wn,Pn(Wn));if(H.midpoints&&Pr){var xo=Jn(nn,Pr,Ai);xo&&fn.push(xo)}Pr=Ai;var mi=JSON.stringify(Ui);to!==mi&&fn.push(Ai),Ze===0&&(to=mi)})}function Pn(vn){return!!H.selectedPaths&&H.selectedPaths.indexOf(vn)!==-1}return Xt===k.POINT?fn.push(Fn(nn,he,ft,Pn(ft))):Xt===k.POLYGON?he.forEach(function(vn,wr){En(vn,ft!==null?ft+"."+wr:String(wr))}):Xt===k.LINE_STRING?En(he,ft):Xt.indexOf(k.MULTI_PREFIX)===0&&(zt=Xt.replace(k.MULTI_PREFIX,""),he.forEach(function(vn,wr){var to={type:k.FEATURE,properties:T.properties,geometry:{type:zt,coordinates:vn}};fn=fn.concat(gr(to,H,wr))})),fn}var rr={enable:function(T){setTimeout(function(){T.map&&T.map.doubleClickZoom&&T._ctx&&T._ctx.store&&T._ctx.store.getInitialConfigValue&&T._ctx.store.getInitialConfigValue("doubleClickZoom")&&T.map.doubleClickZoom.enable()},0)},disable:function(T){setTimeout(function(){T.map&&T.map.doubleClickZoom&&T.map.doubleClickZoom.disable()},0)}},Mi={exports:{}},Ns=function(T){if(!T||!T.type)return null;var H=Zi[T.type];if(!H)return null;if(H==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:T}]};if(H==="feature")return{type:"FeatureCollection",features:[T]};if(H==="featurecollection")return T},Zi={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},et=a(Ns),ut=Object.freeze({__proto__:null,default:function T(H){switch(H&&H.type||null){case"FeatureCollection":return H.features=H.features.reduce(function(ft,zt){return ft.concat(T(zt))},[]),H;case"Feature":return H.geometry?T(H.geometry).map(function(ft){var zt={type:"Feature",properties:JSON.parse(JSON.stringify(H.properties)),geometry:ft};return H.id!==void 0&&(zt.id=H.id),zt}):[H];case"MultiPoint":return H.coordinates.map(function(ft){return{type:"Point",coordinates:ft}});case"MultiPolygon":return H.coordinates.map(function(ft){return{type:"Polygon",coordinates:ft}});case"MultiLineString":return H.coordinates.map(function(ft){return{type:"LineString",coordinates:ft}});case"GeometryCollection":return H.geometries.map(T).reduce(function(ft,zt){return ft.concat(zt)},[]);case"Point":case"Polygon":case"LineString":return[H]}}}),dt=Ns,At=s(ut),Rt=function(T){return function H(ft){return Array.isArray(ft)&&ft.length&&typeof ft[0]=="number"?[ft]:ft.reduce(function(zt,Yt){return Array.isArray(Yt)&&Array.isArray(Yt[0])?zt.concat(H(Yt)):(zt.push(Yt),zt)},[])}(T)};At instanceof Function||(At=At.default);var qt={exports:{}},te=qt.exports=function(T){return new gt(T)};function gt(T){this.value=T}function Nt(T,H,ft){var zt=[],Yt=[],Xt=!0;return function he(nn){var fn=ft?me(nn):nn,En={},Pn=!0,vn={node:fn,node_:nn,path:[].concat(zt),parent:Yt[Yt.length-1],parents:Yt,key:zt.slice(-1)[0],isRoot:zt.length===0,level:zt.length,circular:null,update:function(Pr,Ui){vn.isRoot||(vn.parent.node[vn.key]=Pr),vn.node=Pr,Ui&&(Pn=!1)},delete:function(Pr){delete vn.parent.node[vn.key],Pr&&(Pn=!1)},remove:function(Pr){Le(vn.parent.node)?vn.parent.node.splice(vn.key,1):delete vn.parent.node[vn.key],Pr&&(Pn=!1)},keys:null,before:function(Pr){En.before=Pr},after:function(Pr){En.after=Pr},pre:function(Pr){En.pre=Pr},post:function(Pr){En.post=Pr},stop:function(){Xt=!1},block:function(){Pn=!1}};if(!Xt)return vn;function wr(){if(typeof vn.node=="object"&&vn.node!==null){vn.keys&&vn.node_===vn.node||(vn.keys=Ve(vn.node)),vn.isLeaf=vn.keys.length==0;for(var Pr=0;Pr<Yt.length;Pr++)if(Yt[Pr].node_===nn){vn.circular=Yt[Pr];break}}else vn.isLeaf=!0,vn.keys=null;vn.notLeaf=!vn.isLeaf,vn.notRoot=!vn.isRoot}wr();var to=H.call(vn,vn.node);return to!==void 0&&vn.update&&vn.update(to),En.before&&En.before.call(vn,vn.node),Pn&&(typeof vn.node!="object"||vn.node===null||vn.circular||(Yt.push(vn),wr(),Ge(vn.keys,function(Pr,Ui){zt.push(Pr),En.pre&&En.pre.call(vn,vn.node[Pr],Pr);var Ze=he(vn.node[Pr]);ft&&kn.call(vn.node,Pr)&&(vn.node[Pr]=Ze.node),Ze.isLast=Ui==vn.keys.length-1,Ze.isFirst=Ui==0,En.post&&En.post.call(vn,Ze),zt.pop()}),Yt.pop()),En.after&&En.after.call(vn,vn.node)),vn}(T).node}function me(T){if(typeof T=="object"&&T!==null){var H;if(Le(T))H=[];else if(Ke(T)==="[object Date]")H=new Date(T.getTime?T.getTime():T);else if(function(Yt){return Ke(Yt)==="[object RegExp]"}(T))H=new RegExp(T);else if(function(Yt){return Ke(Yt)==="[object Error]"}(T))H={message:T.message};else if(function(Yt){return Ke(Yt)==="[object Boolean]"}(T))H=new Boolean(T);else if(function(Yt){return Ke(Yt)==="[object Number]"}(T))H=new Number(T);else if(function(Yt){return Ke(Yt)==="[object String]"}(T))H=new String(T);else if(Object.create&&Object.getPrototypeOf)H=Object.create(Object.getPrototypeOf(T));else if(T.constructor===Object)H={};else{var ft=T.constructor&&T.constructor.prototype||T.__proto__||{},zt=function(){};zt.prototype=ft,H=new zt}return Ge(Ve(T),function(Yt){H[Yt]=T[Yt]}),H}return T}gt.prototype.get=function(T){for(var H=this.value,ft=0;ft<T.length;ft++){var zt=T[ft];if(!H||!kn.call(H,zt)){H=void 0;break}H=H[zt]}return H},gt.prototype.has=function(T){for(var H=this.value,ft=0;ft<T.length;ft++){var zt=T[ft];if(!H||!kn.call(H,zt))return!1;H=H[zt]}return!0},gt.prototype.set=function(T,H){for(var ft=this.value,zt=0;zt<T.length-1;zt++){var Yt=T[zt];kn.call(ft,Yt)||(ft[Yt]={}),ft=ft[Yt]}return ft[T[zt]]=H,H},gt.prototype.map=function(T){return Nt(this.value,T,!0)},gt.prototype.forEach=function(T){return this.value=Nt(this.value,T,!1),this.value},gt.prototype.reduce=function(T,H){var ft=arguments.length===1,zt=ft?this.value:H;return this.forEach(function(Yt){this.isRoot&&ft||(zt=T.call(this,zt,Yt))}),zt},gt.prototype.paths=function(){var T=[];return this.forEach(function(H){T.push(this.path)}),T},gt.prototype.nodes=function(){var T=[];return this.forEach(function(H){T.push(this.node)}),T},gt.prototype.clone=function(){var T=[],H=[];return function ft(zt){for(var Yt=0;Yt<T.length;Yt++)if(T[Yt]===zt)return H[Yt];if(typeof zt=="object"&&zt!==null){var Xt=me(zt);return T.push(zt),H.push(Xt),Ge(Ve(zt),function(he){Xt[he]=ft(zt[he])}),T.pop(),H.pop(),Xt}return zt}(this.value)};var Ve=Object.keys||function(T){var H=[];for(var ft in T)H.push(ft);return H};function Ke(T){return Object.prototype.toString.call(T)}var Le=Array.isArray||function(T){return Object.prototype.toString.call(T)==="[object Array]"},Ge=function(T,H){if(T.forEach)return T.forEach(H);for(var ft=0;ft<T.length;ft++)H(T[ft],ft,T)};Ge(Ve(gt.prototype),function(T){te[T]=function(H){var ft=[].slice.call(arguments,1),zt=new gt(H);return zt[T].apply(zt,ft)}});var kn=Object.hasOwnProperty||function(T,H){return H in T},Tn=qt.exports,Re=an;function an(T){if(!(this instanceof an))return new an(T);this._bbox=T||[1/0,1/0,-1/0,-1/0],this._valid=!!T}an.prototype.include=function(T){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],T[0]),this._bbox[1]=Math.min(this._bbox[1],T[1]),this._bbox[2]=Math.max(this._bbox[2],T[0]),this._bbox[3]=Math.max(this._bbox[3],T[1]),this},an.prototype.equals=function(T){var H;return H=T instanceof an?T.bbox():T,this._bbox[0]==H[0]&&this._bbox[1]==H[1]&&this._bbox[2]==H[2]&&this._bbox[3]==H[3]},an.prototype.center=function(T){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},an.prototype.union=function(T){var H;return this._valid=!0,H=T instanceof an?T.bbox():T,this._bbox[0]=Math.min(this._bbox[0],H[0]),this._bbox[1]=Math.min(this._bbox[1],H[1]),this._bbox[2]=Math.max(this._bbox[2],H[2]),this._bbox[3]=Math.max(this._bbox[3],H[3]),this},an.prototype.bbox=function(){return this._valid?this._bbox:null},an.prototype.contains=function(T){if(!T)return this._fastContains();if(!this._valid)return null;var H=T[0],ft=T[1];return this._bbox[0]<=H&&this._bbox[1]<=ft&&this._bbox[2]>=H&&this._bbox[3]>=ft},an.prototype.intersect=function(T){return this._valid?(H=T instanceof an?T.bbox():T,!(this._bbox[0]>H[2]||this._bbox[2]<H[0]||this._bbox[3]<H[1]||this._bbox[1]>H[3])):null;var H},an.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var T="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",T)},an.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var dn=function(T){if(!T)return[];var H=At(dt(T)),ft=[];return H.features.forEach(function(zt){zt.geometry&&(ft=ft.concat(Rt(zt.geometry.coordinates)))}),ft},pn=Tn,Er=Re,bn={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},jr=Object.keys(bn);function ei(T){for(var H=Er(),ft=dn(T),zt=0;zt<ft.length;zt++)H.include(ft[zt]);return H}Mi.exports=function(T){return ei(T).bbox()},Mi.exports.polygon=function(T){return ei(T).polygon()},Mi.exports.bboxify=function(T){return pn(T).map(function(H){H&&jr.some(function(ft){return!!H[ft]&&bn[ft].indexOf(H.type)!==-1})&&(H.bbox=ei(H).bbox(),this.update(H))})};var Lr=a(Mi.exports),Ur=-90;function Vr(T,H){var ft=Ur,zt=90,Yt=Ur,Xt=90,he=270,nn=-270;T.forEach(function(En){var Pn=Lr(En),vn=Pn[1],wr=Pn[3],to=Pn[0],Pr=Pn[2];vn>ft&&(ft=vn),wr<zt&&(zt=wr),wr>Yt&&(Yt=wr),vn<Xt&&(Xt=vn),to<he&&(he=to),Pr>nn&&(nn=Pr)});var fn=H;return ft+fn.lat>85&&(fn.lat=85-ft),Yt+fn.lat>90&&(fn.lat=90-Yt),zt+fn.lat<-85&&(fn.lat=-85-zt),Xt+fn.lat<Ur&&(fn.lat=Ur-Xt),he+fn.lng<=-270&&(fn.lng+=360*Math.ceil(Math.abs(fn.lng)/360)),nn+fn.lng>=270&&(fn.lng-=360*Math.ceil(Math.abs(fn.lng)/360)),fn}function Go(T,H){var ft=Vr(T.map(function(zt){return zt.toGeoJSON()}),H);T.forEach(function(zt){var Yt,Xt=zt.getCoordinates(),he=function(fn){var En={lng:fn[0]+ft.lng,lat:fn[1]+ft.lat};return[En.lng,En.lat]},nn=function(fn){return fn.map(function(En){return he(En)})};zt.type===k.POINT?Yt=he(Xt):zt.type===k.LINE_STRING||zt.type===k.MULTI_POINT?Yt=Xt.map(he):zt.type===k.POLYGON||zt.type===k.MULTI_LINE_STRING?Yt=Xt.map(nn):zt.type===k.MULTI_POLYGON&&(Yt=Xt.map(function(fn){return fn.map(function(En){return nn(En)})})),zt.incomingCoords(Yt)})}var vr={onSetup:function(T){var H=this,ft={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:T.featureIds||[]};return this.setSelected(ft.initiallySelectedFeatureIds.filter(function(zt){return H.getFeature(zt)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),ft},fireUpdate:function(){this.map.fire(F.UPDATE,{action:D.MOVE,features:this.getSelected().map(function(T){return T.toGeoJSON()})})},fireActionable:function(){var T=this,H=this.getSelected(),ft=H.filter(function(nn){return T.isInstanceOf("MultiFeature",nn)}),zt=!1;if(H.length>1){zt=!0;var Yt=H[0].type.replace("Multi","");H.forEach(function(nn){nn.type.replace("Multi","")!==Yt&&(zt=!1)})}var Xt=ft.length>0,he=H.length>0;this.setActionableState({combineFeatures:zt,uncombineFeatures:Xt,trash:he})},getUniqueIds:function(T){return T.length?T.map(function(H){return H.properties.id}).filter(function(H){return H!==void 0}).reduce(function(H,ft){return H.add(ft),H},new Q).values():[]},stopExtendedInteractions:function(T){T.boxSelectElement&&(T.boxSelectElement.parentNode&&T.boxSelectElement.parentNode.removeChild(T.boxSelectElement),T.boxSelectElement=null),this.map.dragPan.enable(),T.boxSelecting=!1,T.canBoxSelect=!1,T.dragMoving=!1,T.canDragMove=!1},onStop:function(){rr.enable(this)},onMouseMove:function(T,H){return re(H)&&T.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(T),!0},onMouseOut:function(T){return!T.dragMoving||this.fireUpdate()}};vr.onTap=vr.onClick=function(T,H){return gn(H)?this.clickAnywhere(T,H):Te(B.VERTEX)(H)?this.clickOnVertex(T,H):re(H)?this.clickOnFeature(T,H):void 0},vr.clickAnywhere=function(T){var H=this,ft=this.getSelectedIds();ft.length&&(this.clearSelectedFeatures(),ft.forEach(function(zt){return H.doRender(zt)})),rr.enable(this),this.stopExtendedInteractions(T)},vr.clickOnVertex=function(T,H){this.changeMode(z.DIRECT_SELECT,{featureId:H.featureTarget.properties.parent,coordPath:H.featureTarget.properties.coord_path,startPos:H.lngLat}),this.updateUIClasses({mouse:E.MOVE})},vr.startOnActiveFeature=function(T,H){this.stopExtendedInteractions(T),this.map.dragPan.disable(),this.doRender(H.featureTarget.properties.id),T.canDragMove=!0,T.dragMoveLocation=H.lngLat},vr.clickOnFeature=function(T,H){var ft=this;rr.disable(this),this.stopExtendedInteractions(T);var zt=_e(H),Yt=this.getSelectedIds(),Xt=H.featureTarget.properties.id,he=this.isSelected(Xt);if(!zt&&he&&this.getFeature(Xt).type!==k.POINT)return this.changeMode(z.DIRECT_SELECT,{featureId:Xt});he&&zt?(this.deselect(Xt),this.updateUIClasses({mouse:E.POINTER}),Yt.length===1&&rr.enable(this)):!he&&zt?(this.select(Xt),this.updateUIClasses({mouse:E.MOVE})):he||zt||(Yt.forEach(function(nn){return ft.doRender(nn)}),this.setSelected(Xt),this.updateUIClasses({mouse:E.MOVE})),this.doRender(Xt)},vr.onMouseDown=function(T,H){return De(H)?this.startOnActiveFeature(T,H):this.drawConfig.boxSelect&&Ae(H)?this.startBoxSelect(T,H):void 0},vr.startBoxSelect=function(T,H){this.stopExtendedInteractions(T),this.map.dragPan.disable(),T.boxSelectStartLocation=ur(H.originalEvent,this.map.getContainer()),T.canBoxSelect=!0},vr.onTouchStart=function(T,H){if(De(H))return this.startOnActiveFeature(T,H)},vr.onDrag=function(T,H){return T.canDragMove?this.dragMove(T,H):this.drawConfig.boxSelect&&T.canBoxSelect?this.whileBoxSelect(T,H):void 0},vr.whileBoxSelect=function(T,H){T.boxSelecting=!0,this.updateUIClasses({mouse:E.ADD}),T.boxSelectElement||(T.boxSelectElement=document.createElement("div"),T.boxSelectElement.classList.add(A.BOX_SELECT),this.map.getContainer().appendChild(T.boxSelectElement));var ft=ur(H.originalEvent,this.map.getContainer()),zt=Math.min(T.boxSelectStartLocation.x,ft.x),Yt=Math.max(T.boxSelectStartLocation.x,ft.x),Xt=Math.min(T.boxSelectStartLocation.y,ft.y),he=Math.max(T.boxSelectStartLocation.y,ft.y),nn="translate("+zt+"px, "+Xt+"px)";T.boxSelectElement.style.transform=nn,T.boxSelectElement.style.WebkitTransform=nn,T.boxSelectElement.style.width=Yt-zt+"px",T.boxSelectElement.style.height=he-Xt+"px"},vr.dragMove=function(T,H){T.dragMoving=!0,H.originalEvent.stopPropagation();var ft={lng:H.lngLat.lng-T.dragMoveLocation.lng,lat:H.lngLat.lat-T.dragMoveLocation.lat};Go(this.getSelected(),ft),T.dragMoveLocation=H.lngLat},vr.onTouchEnd=vr.onMouseUp=function(T,H){var ft=this;if(T.dragMoving)this.fireUpdate();else if(T.boxSelecting){var zt=[T.boxSelectStartLocation,ur(H.originalEvent,this.map.getContainer())],Yt=this.featuresAt(null,zt,"click"),Xt=this.getUniqueIds(Yt).filter(function(he){return!ft.isSelected(he)});Xt.length&&(this.select(Xt),Xt.forEach(function(he){return ft.doRender(he)}),this.updateUIClasses({mouse:E.MOVE}))}this.stopExtendedInteractions(T)},vr.toDisplayFeatures=function(T,H,ft){H.properties.active=this.isSelected(H.properties.id)?U.ACTIVE:U.INACTIVE,ft(H),this.fireActionable(),H.properties.active===U.ACTIVE&&H.geometry.type!==k.POINT&&gr(H).forEach(ft)},vr.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},vr.onCombineFeatures=function(){var T=this.getSelected();if(!(T.length===0||T.length<2)){for(var H=[],ft=[],zt=T[0].type.replace("Multi",""),Yt=0;Yt<T.length;Yt++){var Xt=T[Yt];if(Xt.type.replace("Multi","")!==zt)return;Xt.type.includes("Multi")?Xt.getCoordinates().forEach(function(nn){H.push(nn)}):H.push(Xt.getCoordinates()),ft.push(Xt.toGeoJSON())}if(ft.length>1){var he=this.newFeature({type:k.FEATURE,properties:ft[0].properties,geometry:{type:"Multi"+zt,coordinates:H}});this.addFeature(he),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([he.id]),this.map.fire(F.COMBINE_FEATURES,{createdFeatures:[he.toGeoJSON()],deletedFeatures:ft})}this.fireActionable()}},vr.onUncombineFeatures=function(){var T=this,H=this.getSelected();if(H.length!==0){for(var ft=[],zt=[],Yt=function(he){var nn=H[he];T.isInstanceOf("MultiFeature",nn)&&(nn.getFeatures().forEach(function(fn){T.addFeature(fn),fn.properties=nn.properties,ft.push(fn.toGeoJSON()),T.select([fn.id])}),T.deleteFeature(nn.id,{silent:!0}),zt.push(nn.toGeoJSON()))},Xt=0;Xt<H.length;Xt++)Yt(Xt);ft.length>1&&this.map.fire(F.UNCOMBINE_FEATURES,{createdFeatures:ft,deletedFeatures:zt}),this.fireActionable()}};var $i=Te(B.VERTEX),ui=Te(B.MIDPOINT),br={fireUpdate:function(){this.map.fire(F.UPDATE,{action:D.CHANGE_COORDINATES,features:this.getSelected().map(function(T){return T.toGeoJSON()})})},fireActionable:function(T){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:T.selectedCoordPaths.length>0})},startDragging:function(T,H){this.map.dragPan.disable(),T.canDragMove=!0,T.dragMoveLocation=H.lngLat},stopDragging:function(T){this.map.dragPan.enable(),T.dragMoving=!1,T.canDragMove=!1,T.dragMoveLocation=null},onVertex:function(T,H){this.startDragging(T,H);var ft=H.featureTarget.properties,zt=T.selectedCoordPaths.indexOf(ft.coord_path);_e(H)||zt!==-1?_e(H)&&zt===-1&&T.selectedCoordPaths.push(ft.coord_path):T.selectedCoordPaths=[ft.coord_path];var Yt=this.pathsToCoordinates(T.featureId,T.selectedCoordPaths);this.setSelectedCoordinates(Yt)},onMidpoint:function(T,H){this.startDragging(T,H);var ft=H.featureTarget.properties;T.feature.addCoordinate(ft.coord_path,ft.lng,ft.lat),this.fireUpdate(),T.selectedCoordPaths=[ft.coord_path]},pathsToCoordinates:function(T,H){return H.map(function(ft){return{feature_id:T,coord_path:ft}})},onFeature:function(T,H){T.selectedCoordPaths.length===0?this.startDragging(T,H):this.stopDragging(T)},dragFeature:function(T,H,ft){Go(this.getSelected(),ft),T.dragMoveLocation=H.lngLat},dragVertex:function(T,H,ft){for(var zt=T.selectedCoordPaths.map(function(nn){return T.feature.getCoordinate(nn)}),Yt=Vr(zt.map(function(nn){return{type:k.FEATURE,properties:{},geometry:{type:k.POINT,coordinates:nn}}}),ft),Xt=0;Xt<zt.length;Xt++){var he=zt[Xt];T.feature.updateCoordinate(T.selectedCoordPaths[Xt],he[0]+Yt.lng,he[1]+Yt.lat)}},clickNoTarget:function(){this.changeMode(z.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(z.SIMPLE_SELECT)},clickActiveFeature:function(T){T.selectedCoordPaths=[],this.clearSelectedCoordinates(),T.feature.changed()},onSetup:function(T){var H=T.featureId,ft=this.getFeature(H);if(!ft)throw new Error("You must provide a featureId to enter direct_select mode");if(ft.type===k.POINT)throw new TypeError("direct_select mode doesn't handle point features");var zt={featureId:H,feature:ft,dragMoveLocation:T.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:T.coordPath?[T.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(H,zt.selectedCoordPaths)),this.setSelected(H),rr.disable(this),this.setActionableState({trash:!0}),zt},onStop:function(){rr.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(T,H,ft){T.featureId===H.properties.id?(H.properties.active=U.ACTIVE,ft(H),gr(H,{map:this.map,midpoints:!0,selectedPaths:T.selectedCoordPaths}).forEach(ft)):(H.properties.active=U.INACTIVE,ft(H)),this.fireActionable(T)},onTrash:function(T){T.selectedCoordPaths.sort(function(H,ft){return ft.localeCompare(H,"en",{numeric:!0})}).forEach(function(H){return T.feature.removeCoordinate(H)}),this.fireUpdate(),T.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(T),T.feature.isValid()===!1&&(this.deleteFeature([T.featureId]),this.changeMode(z.SIMPLE_SELECT,{}))},onMouseMove:function(T,H){var ft=De(H),zt=$i(H),Yt=ui(H),Xt=T.selectedCoordPaths.length===0;return ft&&Xt||zt&&!Xt?this.updateUIClasses({mouse:E.MOVE}):this.updateUIClasses({mouse:E.NONE}),(zt||ft||Yt)&&T.dragMoving&&this.fireUpdate(),this.stopDragging(T),!0},onMouseOut:function(T){return T.dragMoving&&this.fireUpdate(),!0}};br.onTouchStart=br.onMouseDown=function(T,H){return $i(H)?this.onVertex(T,H):De(H)?this.onFeature(T,H):ui(H)?this.onMidpoint(T,H):void 0},br.onDrag=function(T,H){if(T.canDragMove===!0){T.dragMoving=!0,H.originalEvent.stopPropagation();var ft={lng:H.lngLat.lng-T.dragMoveLocation.lng,lat:H.lngLat.lat-T.dragMoveLocation.lat};T.selectedCoordPaths.length>0?this.dragVertex(T,H,ft):this.dragFeature(T,H,ft),T.dragMoveLocation=H.lngLat}},br.onClick=function(T,H){return gn(H)?this.clickNoTarget(T,H):De(H)?this.clickActiveFeature(T,H):un(H)?this.clickInactive(T,H):void this.stopDragging(T)},br.onTap=function(T,H){return gn(H)?this.clickNoTarget(T,H):De(H)?this.clickActiveFeature(T,H):un(H)?this.clickInactive(T,H):void 0},br.onTouchEnd=br.onMouseUp=function(T){T.dragMoving&&this.fireUpdate(),this.stopDragging(T)};var Tr={};function Wo(T,H){return!!T.lngLat&&T.lngLat.lng===H[0]&&T.lngLat.lat===H[1]}Tr.onSetup=function(){var T=this.newFeature({type:k.FEATURE,properties:{},geometry:{type:k.POINT,coordinates:[]}});return this.addFeature(T),this.clearSelectedFeatures(),this.updateUIClasses({mouse:E.ADD}),this.activateUIButton(L.POINT),this.setActionableState({trash:!0}),{point:T}},Tr.stopDrawingAndRemove=function(T){this.deleteFeature([T.point.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT)},Tr.onTap=Tr.onClick=function(T,H){this.updateUIClasses({mouse:E.MOVE}),T.point.updateCoordinate("",H.lngLat.lng,H.lngLat.lat),this.map.fire(F.CREATE,{features:[T.point.toGeoJSON()]}),this.changeMode(z.SIMPLE_SELECT,{featureIds:[T.point.id]})},Tr.onStop=function(T){this.activateUIButton(),T.point.getCoordinate().length||this.deleteFeature([T.point.id],{silent:!0})},Tr.toDisplayFeatures=function(T,H,ft){var zt=H.properties.id===T.point.id;if(H.properties.active=zt?U.ACTIVE:U.INACTIVE,!zt)return ft(H)},Tr.onTrash=Tr.stopDrawingAndRemove,Tr.onKeyUp=function(T,H){if(Ue(H)||en(H))return this.stopDrawingAndRemove(T,H)};var ws={onSetup:function(){var T=this.newFeature({type:k.FEATURE,properties:{},geometry:{type:k.POLYGON,coordinates:[[]]}});return this.addFeature(T),this.clearSelectedFeatures(),rr.disable(this),this.updateUIClasses({mouse:E.ADD}),this.activateUIButton(L.POLYGON),this.setActionableState({trash:!0}),{polygon:T,currentVertexPosition:0}},clickAnywhere:function(T,H){if(T.currentVertexPosition>0&&Wo(H,T.polygon.coordinates[0][T.currentVertexPosition-1]))return this.changeMode(z.SIMPLE_SELECT,{featureIds:[T.polygon.id]});this.updateUIClasses({mouse:E.ADD}),T.polygon.updateCoordinate("0."+T.currentVertexPosition,H.lngLat.lng,H.lngLat.lat),T.currentVertexPosition++,T.polygon.updateCoordinate("0."+T.currentVertexPosition,H.lngLat.lng,H.lngLat.lat)},clickOnVertex:function(T){return this.changeMode(z.SIMPLE_SELECT,{featureIds:[T.polygon.id]})},onMouseMove:function(T,H){T.polygon.updateCoordinate("0."+T.currentVertexPosition,H.lngLat.lng,H.lngLat.lat),ce(H)&&this.updateUIClasses({mouse:E.POINTER})}};ws.onTap=ws.onClick=function(T,H){return ce(H)?this.clickOnVertex(T,H):this.clickAnywhere(T,H)},ws.onKeyUp=function(T,H){Ue(H)?(this.deleteFeature([T.polygon.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT)):en(H)&&this.changeMode(z.SIMPLE_SELECT,{featureIds:[T.polygon.id]})},ws.onStop=function(T){this.updateUIClasses({mouse:E.NONE}),rr.enable(this),this.activateUIButton(),this.getFeature(T.polygon.id)!==void 0&&(T.polygon.removeCoordinate("0."+T.currentVertexPosition),T.polygon.isValid()?this.map.fire(F.CREATE,{features:[T.polygon.toGeoJSON()]}):(this.deleteFeature([T.polygon.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT,{},{silent:!0})))},ws.toDisplayFeatures=function(T,H,ft){var zt=H.properties.id===T.polygon.id;if(H.properties.active=zt?U.ACTIVE:U.INACTIVE,!zt)return ft(H);if(H.geometry.coordinates.length!==0){var Yt=H.geometry.coordinates[0].length;if(!(Yt<3)){if(H.properties.meta=B.FEATURE,ft(Fn(T.polygon.id,H.geometry.coordinates[0][0],"0.0",!1)),Yt>3){var Xt=H.geometry.coordinates[0].length-3;ft(Fn(T.polygon.id,H.geometry.coordinates[0][Xt],"0."+Xt,!1))}if(Yt<=4){var he=[[H.geometry.coordinates[0][0][0],H.geometry.coordinates[0][0][1]],[H.geometry.coordinates[0][1][0],H.geometry.coordinates[0][1][1]]];if(ft({type:k.FEATURE,properties:H.properties,geometry:{coordinates:he,type:k.LINE_STRING}}),Yt===3)return}return ft(H)}}},ws.onTrash=function(T){this.deleteFeature([T.polygon.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT)};var Ki={onSetup:function(T){var H,ft,zt=(T=T||{}).featureId,Yt="forward";if(zt){if(!(H=this.getFeature(zt)))throw new Error("Could not find a feature with the provided featureId");var Xt=T.from;if(Xt&&Xt.type==="Feature"&&Xt.geometry&&Xt.geometry.type==="Point"&&(Xt=Xt.geometry),Xt&&Xt.type==="Point"&&Xt.coordinates&&Xt.coordinates.length===2&&(Xt=Xt.coordinates),!Xt||!Array.isArray(Xt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var he=H.coordinates.length-1;if(H.coordinates[he][0]===Xt[0]&&H.coordinates[he][1]===Xt[1])ft=he+1,H.addCoordinate.apply(H,[ft].concat(H.coordinates[he]));else{if(H.coordinates[0][0]!==Xt[0]||H.coordinates[0][1]!==Xt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");Yt="backwards",ft=0,H.addCoordinate.apply(H,[ft].concat(H.coordinates[0]))}}else H=this.newFeature({type:k.FEATURE,properties:{},geometry:{type:k.LINE_STRING,coordinates:[]}}),ft=0,this.addFeature(H);return this.clearSelectedFeatures(),rr.disable(this),this.updateUIClasses({mouse:E.ADD}),this.activateUIButton(L.LINE),this.setActionableState({trash:!0}),{line:H,currentVertexPosition:ft,direction:Yt}},clickAnywhere:function(T,H){if(T.currentVertexPosition>0&&Wo(H,T.line.coordinates[T.currentVertexPosition-1])||T.direction==="backwards"&&Wo(H,T.line.coordinates[T.currentVertexPosition+1]))return this.changeMode(z.SIMPLE_SELECT,{featureIds:[T.line.id]});this.updateUIClasses({mouse:E.ADD}),T.line.updateCoordinate(T.currentVertexPosition,H.lngLat.lng,H.lngLat.lat),T.direction==="forward"?(T.currentVertexPosition++,T.line.updateCoordinate(T.currentVertexPosition,H.lngLat.lng,H.lngLat.lat)):T.line.addCoordinate(0,H.lngLat.lng,H.lngLat.lat)},clickOnVertex:function(T){return this.changeMode(z.SIMPLE_SELECT,{featureIds:[T.line.id]})},onMouseMove:function(T,H){T.line.updateCoordinate(T.currentVertexPosition,H.lngLat.lng,H.lngLat.lat),ce(H)&&this.updateUIClasses({mouse:E.POINTER})}};Ki.onTap=Ki.onClick=function(T,H){if(ce(H))return this.clickOnVertex(T,H);this.clickAnywhere(T,H)},Ki.onKeyUp=function(T,H){en(H)?this.changeMode(z.SIMPLE_SELECT,{featureIds:[T.line.id]}):Ue(H)&&(this.deleteFeature([T.line.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT))},Ki.onStop=function(T){rr.enable(this),this.activateUIButton(),this.getFeature(T.line.id)!==void 0&&(T.line.removeCoordinate(""+T.currentVertexPosition),T.line.isValid()?this.map.fire(F.CREATE,{features:[T.line.toGeoJSON()]}):(this.deleteFeature([T.line.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT,{},{silent:!0})))},Ki.onTrash=function(T){this.deleteFeature([T.line.id],{silent:!0}),this.changeMode(z.SIMPLE_SELECT)},Ki.toDisplayFeatures=function(T,H,ft){var zt=H.properties.id===T.line.id;if(H.properties.active=zt?U.ACTIVE:U.INACTIVE,!zt)return ft(H);H.geometry.coordinates.length<2||(H.properties.meta=B.FEATURE,ft(Fn(T.line.id,H.geometry.coordinates[T.direction==="forward"?H.geometry.coordinates.length-2:1],""+(T.direction==="forward"?H.geometry.coordinates.length-2:1),!1)),ft(H))};var ta={simple_select:vr,direct_select:br,draw_point:Tr,draw_polygon:ws,draw_line_string:Ki},nh={defaultMode:z.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:ve,modes:ta,controls:{},userProperties:!1},Fu={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},qi={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Nu(T,H){return T.map(function(ft){return ft.source?ft:Wt(ft,{id:ft.id+"."+H,source:H==="hot"?w.HOT:w.COLD})})}var zo={exports:{}};(function(T,H){var ft="__lodash_hash_undefined__",zt=9007199254740991,Yt="[object Arguments]",Xt="[object Array]",he="[object Boolean]",nn="[object Date]",fn="[object Error]",En="[object Function]",Pn="[object Map]",vn="[object Number]",wr="[object Object]",to="[object Promise]",Pr="[object RegExp]",Ui="[object Set]",Ze="[object String]",Wn="[object Symbol]",Ai="[object WeakMap]",xo="[object ArrayBuffer]",mi="[object DataView]",Us=/^\[object .+?Constructor\]$/,Pl=/^(?:0|[1-9]\d*)$/,_i={};_i["[object Float32Array]"]=_i["[object Float64Array]"]=_i["[object Int8Array]"]=_i["[object Int16Array]"]=_i["[object Int32Array]"]=_i["[object Uint8Array]"]=_i["[object Uint8ClampedArray]"]=_i["[object Uint16Array]"]=_i["[object Uint32Array]"]=!0,_i[Yt]=_i[Xt]=_i[xo]=_i[he]=_i[mi]=_i[nn]=_i[fn]=_i[En]=_i[Pn]=_i[vn]=_i[wr]=_i[Pr]=_i[Ui]=_i[Ze]=_i[Ai]=!1;var ul=typeof ca=="object"&&ca&&ca.Object===Object&&ca,kl=typeof self=="object"&&self&&self.Object===Object&&self,ni=ul||kl||Function("return this")(),Gr=H&&!H.nodeType&&H,so=Gr&&T&&!T.nodeType&&T,hu=so&&so.exports===Gr,rh=hu&&ul.process,Df=function(){try{return rh&&rh.binding&&rh.binding("util")}catch{}}(),zf=Df&&Df.isTypedArray;function zh(pe,ze){for(var Sn=-1,ir=pe==null?0:pe.length;++Sn<ir;)if(ze(pe[Sn],Sn,pe))return!0;return!1}function ih(pe){var ze=-1,Sn=Array(pe.size);return pe.forEach(function(ir,zi){Sn[++ze]=[zi,ir]}),Sn}function Bh(pe){var ze=-1,Sn=Array(pe.size);return pe.forEach(function(ir){Sn[++ze]=ir}),Sn}var So,Ac,cl,Bf=Array.prototype,fu=Function.prototype,Bo=Object.prototype,wc=ni["__core-js_shared__"],Mo=fu.toString,Ya=Bo.hasOwnProperty,Vs=(So=/[^.]+$/.exec(wc&&wc.keys&&wc.keys.IE_PROTO||""))?"Symbol(src)_1."+So:"",js=Bo.toString,Ll=RegExp("^"+Mo.call(Ya).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),To=hu?ni.Buffer:void 0,Cs=ni.Symbol,Fo=ni.Uint8Array,Ol=Bo.propertyIsEnumerable,hl=Bf.splice,xa=Cs?Cs.toStringTag:void 0,Uu=Object.getOwnPropertySymbols,gi=To?To.isBuffer:void 0,eo=(Ac=Object.keys,cl=Object,function(pe){return Ac(cl(pe))}),Xa=Hs(ni,"DataView"),Rl=Hs(ni,"Map"),oh=Hs(ni,"Promise"),Vu=Hs(ni,"Set"),ah=Hs(ni,"WeakMap"),Is=Hs(Object,"create"),Dl=na(Xa),zl=na(Rl),Cc=na(oh),du=na(Vu),Fh=na(ah),fl=Cs?Cs.prototype:void 0,Ic=fl?fl.valueOf:void 0;function Aa(pe){var ze=-1,Sn=pe==null?0:pe.length;for(this.clear();++ze<Sn;){var ir=pe[ze];this.set(ir[0],ir[1])}}function ea(pe){var ze=-1,Sn=pe==null?0:pe.length;for(this.clear();++ze<Sn;){var ir=pe[ze];this.set(ir[0],ir[1])}}function dl(pe){var ze=-1,Sn=pe==null?0:pe.length;for(this.clear();++ze<Sn;){var ir=pe[ze];this.set(ir[0],ir[1])}}function Bl(pe){var ze=-1,Sn=pe==null?0:pe.length;for(this.__data__=new dl;++ze<Sn;)this.add(pe[ze])}function qr(pe){var ze=this.__data__=new ea(pe);this.size=ze.size}function ju(pe,ze){var Sn=Zu(pe),ir=!Sn&&uh(pe),zi=!Sn&&!ir&&ha(pe),Yr=!Sn&&!ir&&!zi&&mu(pe),Ti=Sn||ir||zi||Yr,oe=Ti?function(Ye,fr){for(var kr=-1,Wr=Array(Ye);++kr<Ye;)Wr[kr]=fr(kr);return Wr}(pe.length,String):[],Be=oe.length;for(var Ie in pe)!Ya.call(pe,Ie)||Ti&&(Ie=="length"||zi&&(Ie=="offset"||Ie=="parent")||Yr&&(Ie=="buffer"||Ie=="byteLength"||Ie=="byteOffset")||Ss(Ie,Be))||oe.push(Ie);return oe}function sh(pe,ze){for(var Sn=pe.length;Sn--;)if(Nh(pe[Sn][0],ze))return Sn;return-1}function Es(pe){return pe==null?pe===void 0?"[object Undefined]":"[object Null]":xa&&xa in Object(pe)?function(ze){var Sn=Ya.call(ze,xa),ir=ze[xa];try{ze[xa]=void 0;var zi=!0}catch{}var Yr=js.call(ze);return zi&&(Sn?ze[xa]=ir:delete ze[xa]),Yr}(pe):function(ze){return js.call(ze)}(pe)}function wa(pe){return Nl(pe)&&Es(pe)==Yt}function lh(pe,ze,Sn,ir,zi){return pe===ze||(pe==null||ze==null||!Nl(pe)&&!Nl(ze)?pe!=pe&&ze!=ze:function(Yr,Ti,oe,Be,Ie,Ye){var fr=Zu(Yr),kr=Zu(Ti),Wr=fr?Xt:pl(Yr),Dn=kr?Xt:pl(Ti),ri=(Wr=Wr==Yt?wr:Wr)==wr,fa=(Dn=Dn==Yt?wr:Dn)==wr,Ao=Wr==Dn;if(Ao&&ha(Yr)){if(!ha(Ti))return!1;fr=!0,ri=!1}if(Ao&&!ri)return Ye||(Ye=new qr),fr||mu(Yr)?Fl(Yr,Ti,oe,Be,Ie,Ye):function(ci,tr,cs,Pi,Gs,Ja,wi){switch(cs){case mi:if(ci.byteLength!=tr.byteLength||ci.byteOffset!=tr.byteOffset)return!1;ci=ci.buffer,tr=tr.buffer;case xo:return!(ci.byteLength!=tr.byteLength||!Ja(new Fo(ci),new Fo(tr)));case he:case nn:case vn:return Nh(+ci,+tr);case fn:return ci.name==tr.name&&ci.message==tr.message;case Pr:case Ze:return ci==tr+"";case Pn:var xn=ih;case Ui:var wo=1&Pi;if(xn||(xn=Bh),ci.size!=tr.size&&!wo)return!1;var Da=wi.get(ci);if(Da)return Da==tr;Pi|=2,wi.set(ci,tr);var za=Fl(xn(ci),xn(tr),Pi,Gs,Ja,wi);return wi.delete(ci),za;case Wn:if(Ic)return Ic.call(ci)==Ic.call(tr)}return!1}(Yr,Ti,Wr,oe,Be,Ie,Ye);if(!(1&oe)){var Qa=ri&&Ya.call(Yr,"__wrapped__"),$u=fa&&Ya.call(Ti,"__wrapped__");if(Qa||$u){var Ku=Qa?Yr.value():Yr,hh=$u?Ti.value():Ti;return Ye||(Ye=new qr),Ie(Ku,hh,oe,Be,Ye)}}return Ao?(Ye||(Ye=new qr),function(ci,tr,cs,Pi,Gs,Ja){var wi=1&cs,xn=Gu(ci),wo=xn.length,Da=Gu(tr).length;if(wo!=Da&&!wi)return!1;for(var za=wo;za--;){var Zo=xn[za];if(!(wi?Zo in tr:Ya.call(tr,Zo)))return!1}var $o=Ja.get(ci);if($o&&Ja.get(tr))return $o==tr;var gu=!0;Ja.set(ci,tr),Ja.set(tr,ci);for(var sn=wi;++za<wo;){var gl=ci[Zo=xn[za]],Ul=tr[Zo];if(Pi)var Vl=wi?Pi(Ul,gl,Zo,tr,ci,Ja):Pi(gl,Ul,Zo,ci,tr,Ja);if(!(Vl===void 0?gl===Ul||Gs(gl,Ul,cs,Pi,Ja):Vl)){gu=!1;break}sn||(sn=Zo=="constructor")}if(gu&&!sn){var Co=ci.constructor,Po=tr.constructor;Co==Po||!("constructor"in ci)||!("constructor"in tr)||typeof Co=="function"&&Co instanceof Co&&typeof Po=="function"&&Po instanceof Po||(gu=!1)}return Ja.delete(ci),Ja.delete(tr),gu}(Yr,Ti,oe,Be,Ie,Ye)):!1}(pe,ze,Sn,ir,lh,zi))}function Hu(pe){return!(!ch(pe)||function(ze){return!!Vs&&Vs in ze}(pe))&&(ml(pe)?Ll:Us).test(na(pe))}function Ec(pe){if(Sn=(ze=pe)&&ze.constructor,ir=typeof Sn=="function"&&Sn.prototype||Bo,ze!==ir)return eo(pe);var ze,Sn,ir,zi=[];for(var Yr in Object(pe))Ya.call(pe,Yr)&&Yr!="constructor"&&zi.push(Yr);return zi}function Fl(pe,ze,Sn,ir,zi,Yr){var Ti=1&Sn,oe=pe.length,Be=ze.length;if(oe!=Be&&!(Ti&&Be>oe))return!1;var Ie=Yr.get(pe);if(Ie&&Yr.get(ze))return Ie==ze;var Ye=-1,fr=!0,kr=2&Sn?new Bl:void 0;for(Yr.set(pe,ze),Yr.set(ze,pe);++Ye<oe;){var Wr=pe[Ye],Dn=ze[Ye];if(ir)var ri=Ti?ir(Dn,Wr,Ye,ze,pe,Yr):ir(Wr,Dn,Ye,pe,ze,Yr);if(ri!==void 0){if(ri)continue;fr=!1;break}if(kr){if(!zh(ze,function(fa,Ao){if(Qa=Ao,!kr.has(Qa)&&(Wr===fa||zi(Wr,fa,Sn,ir,Yr)))return kr.push(Ao);var Qa})){fr=!1;break}}else if(Wr!==Dn&&!zi(Wr,Dn,Sn,ir,Yr)){fr=!1;break}}return Yr.delete(pe),Yr.delete(ze),fr}function Gu(pe){return function(ze,Sn,ir){var zi=Sn(ze);return Zu(ze)?zi:function(Yr,Ti){for(var oe=-1,Be=Ti.length,Ie=Yr.length;++oe<Be;)Yr[Ie+oe]=Ti[oe];return Yr}(zi,ir(ze))}(pe,Ra,Wu)}function pu(pe,ze){var Sn,ir,zi=pe.__data__;return((ir=typeof(Sn=ze))=="string"||ir=="number"||ir=="symbol"||ir=="boolean"?Sn!=="__proto__":Sn===null)?zi[typeof ze=="string"?"string":"hash"]:zi.map}function Hs(pe,ze){var Sn=function(ir,zi){return ir==null?void 0:ir[zi]}(pe,ze);return Hu(Sn)?Sn:void 0}Aa.prototype.clear=function(){this.__data__=Is?Is(null):{},this.size=0},Aa.prototype.delete=function(pe){var ze=this.has(pe)&&delete this.__data__[pe];return this.size-=ze?1:0,ze},Aa.prototype.get=function(pe){var ze=this.__data__;if(Is){var Sn=ze[pe];return Sn===ft?void 0:Sn}return Ya.call(ze,pe)?ze[pe]:void 0},Aa.prototype.has=function(pe){var ze=this.__data__;return Is?ze[pe]!==void 0:Ya.call(ze,pe)},Aa.prototype.set=function(pe,ze){var Sn=this.__data__;return this.size+=this.has(pe)?0:1,Sn[pe]=Is&&ze===void 0?ft:ze,this},ea.prototype.clear=function(){this.__data__=[],this.size=0},ea.prototype.delete=function(pe){var ze=this.__data__,Sn=sh(ze,pe);return!(Sn<0)&&(Sn==ze.length-1?ze.pop():hl.call(ze,Sn,1),--this.size,!0)},ea.prototype.get=function(pe){var ze=this.__data__,Sn=sh(ze,pe);return Sn<0?void 0:ze[Sn][1]},ea.prototype.has=function(pe){return sh(this.__data__,pe)>-1},ea.prototype.set=function(pe,ze){var Sn=this.__data__,ir=sh(Sn,pe);return ir<0?(++this.size,Sn.push([pe,ze])):Sn[ir][1]=ze,this},dl.prototype.clear=function(){this.size=0,this.__data__={hash:new Aa,map:new(Rl||ea),string:new Aa}},dl.prototype.delete=function(pe){var ze=pu(this,pe).delete(pe);return this.size-=ze?1:0,ze},dl.prototype.get=function(pe){return pu(this,pe).get(pe)},dl.prototype.has=function(pe){return pu(this,pe).has(pe)},dl.prototype.set=function(pe,ze){var Sn=pu(this,pe),ir=Sn.size;return Sn.set(pe,ze),this.size+=Sn.size==ir?0:1,this},Bl.prototype.add=Bl.prototype.push=function(pe){return this.__data__.set(pe,ft),this},Bl.prototype.has=function(pe){return this.__data__.has(pe)},qr.prototype.clear=function(){this.__data__=new ea,this.size=0},qr.prototype.delete=function(pe){var ze=this.__data__,Sn=ze.delete(pe);return this.size=ze.size,Sn},qr.prototype.get=function(pe){return this.__data__.get(pe)},qr.prototype.has=function(pe){return this.__data__.has(pe)},qr.prototype.set=function(pe,ze){var Sn=this.__data__;if(Sn instanceof ea){var ir=Sn.__data__;if(!Rl||ir.length<199)return ir.push([pe,ze]),this.size=++Sn.size,this;Sn=this.__data__=new dl(ir)}return Sn.set(pe,ze),this.size=Sn.size,this};var Wu=Uu?function(pe){return pe==null?[]:(pe=Object(pe),function(ze,Sn){for(var ir=-1,zi=ze==null?0:ze.length,Yr=0,Ti=[];++ir<zi;){var oe=ze[ir];Sn(oe,ir,ze)&&(Ti[Yr++]=oe)}return Ti}(Uu(pe),function(ze){return Ol.call(pe,ze)}))}:function(){return[]},pl=Es;function Ss(pe,ze){return!!(ze=ze??zt)&&(typeof pe=="number"||Pl.test(pe))&&pe>-1&&pe%1==0&&pe<ze}function na(pe){if(pe!=null){try{return Mo.call(pe)}catch{}try{return pe+""}catch{}}return""}function Nh(pe,ze){return pe===ze||pe!=pe&&ze!=ze}(Xa&&pl(new Xa(new ArrayBuffer(1)))!=mi||Rl&&pl(new Rl)!=Pn||oh&&pl(oh.resolve())!=to||Vu&&pl(new Vu)!=Ui||ah&&pl(new ah)!=Ai)&&(pl=function(pe){var ze=Es(pe),Sn=ze==wr?pe.constructor:void 0,ir=Sn?na(Sn):"";if(ir)switch(ir){case Dl:return mi;case zl:return Pn;case Cc:return to;case du:return Ui;case Fh:return Ai}return ze});var uh=wa(function(){return arguments}())?wa:function(pe){return Nl(pe)&&Ya.call(pe,"callee")&&!Ol.call(pe,"callee")},Zu=Array.isArray,ha=gi||function(){return!1};function ml(pe){if(!ch(pe))return!1;var ze=Es(pe);return ze==En||ze=="[object GeneratorFunction]"||ze=="[object AsyncFunction]"||ze=="[object Proxy]"}function Sc(pe){return typeof pe=="number"&&pe>-1&&pe%1==0&&pe<=zt}function ch(pe){var ze=typeof pe;return pe!=null&&(ze=="object"||ze=="function")}function Nl(pe){return pe!=null&&typeof pe=="object"}var mu=zf?function(pe){return function(ze){return pe(ze)}}(zf):function(pe){return Nl(pe)&&Sc(pe.length)&&!!_i[Es(pe)]};function Ra(pe){return(ze=pe)!=null&&Sc(ze.length)&&!ml(ze)?ju(pe):Ec(pe);var ze}T.exports=function(pe,ze){return lh(pe,ze)}})(zo,zo.exports);var ao=a(zo.exports);function La(T,H){return T.length===H.length&&JSON.stringify(T.map(function(ft){return ft}).sort())===JSON.stringify(H.map(function(ft){return ft}).sort())}var Di={Polygon:qe,LineString:we,Point:Fe,MultiPolygon:ne,MultiLineString:ne,MultiPoint:ne},us=Object.freeze({__proto__:null,CommonSelectors:Un,constrainFeatureMovement:Vr,createMidPoint:Jn,createSupplementaryPoints:gr,createVertex:Fn,doubleClickZoom:rr,euclideanDistance:Tt,featuresAt:Z,getFeatureAtAndSetCursors:Ft,isClick:ie,isEventAtCoordinates:Wo,isTap:ue,mapEventToBoundingBox:pt,ModeHandler:n,moveFeatures:Go,sortFeatures:rt,stringSetsAreEqual:La,StringSet:Q,theme:ve,toDenseArray:N}),Oa=function(T,H){var ft={options:T=function(Yt){Yt===void 0&&(Yt={});var Xt=Wt(Yt);return Yt.controls||(Xt.controls={}),Yt.displayControlsDefault===!1?Xt.controls=Wt(qi,Yt.controls):Xt.controls=Wt(Fu,Yt.controls),(Xt=Wt(nh,Xt)).styles=Nu(Xt.styles,"cold").concat(Nu(Xt.styles,"hot")),Xt}(T)};H=function(Yt,Xt){return Xt.modes=z,Xt.getFeatureIdsAt=function(he){return Z.click({point:he},null,Yt).map(function(nn){return nn.properties.id})},Xt.getSelectedIds=function(){return Yt.store.getSelectedIds()},Xt.getSelected=function(){return{type:k.FEATURE_COLLECTION,features:Yt.store.getSelectedIds().map(function(he){return Yt.store.get(he)}).map(function(he){return he.toGeoJSON()})}},Xt.getSelectedPoints=function(){return{type:k.FEATURE_COLLECTION,features:Yt.store.getSelectedCoordinates().map(function(he){return{type:k.FEATURE,properties:{},geometry:{type:k.POINT,coordinates:he.coordinates}}})}},Xt.set=function(he){if(he.type===void 0||he.type!==k.FEATURE_COLLECTION||!Array.isArray(he.features))throw new Error("Invalid FeatureCollection");var nn=Yt.store.createRenderBatch(),fn=Yt.store.getAllIds().slice(),En=Xt.add(he),Pn=new Q(En);return(fn=fn.filter(function(vn){return!Pn.has(vn)})).length&&Xt.delete(fn),nn(),En},Xt.add=function(he){var nn=JSON.parse(JSON.stringify(et(he))).features.map(function(fn){if(fn.id=fn.id||Ut(),fn.geometry===null)throw new Error("Invalid geometry: null");if(Yt.store.get(fn.id)===void 0||Yt.store.get(fn.id).type!==fn.geometry.type){var En=Di[fn.geometry.type];if(En===void 0)throw new Error("Invalid geometry type: "+fn.geometry.type+".");var Pn=new En(Yt,fn);Yt.store.add(Pn)}else{var vn=Yt.store.get(fn.id);vn.properties=fn.properties,ao(vn.properties,fn.properties)||Yt.store.featureChanged(vn.id),ao(vn.getCoordinates(),fn.geometry.coordinates)||vn.incomingCoords(fn.geometry.coordinates)}return fn.id});return Yt.store.render(),nn},Xt.get=function(he){var nn=Yt.store.get(he);if(nn)return nn.toGeoJSON()},Xt.getAll=function(){return{type:k.FEATURE_COLLECTION,features:Yt.store.getAll().map(function(he){return he.toGeoJSON()})}},Xt.delete=function(he){return Yt.store.delete(he,{silent:!0}),Xt.getMode()!==z.DIRECT_SELECT||Yt.store.getSelectedIds().length?Yt.store.render():Yt.events.changeMode(z.SIMPLE_SELECT,void 0,{silent:!0}),Xt},Xt.deleteAll=function(){return Yt.store.delete(Yt.store.getAllIds(),{silent:!0}),Xt.getMode()===z.DIRECT_SELECT?Yt.events.changeMode(z.SIMPLE_SELECT,void 0,{silent:!0}):Yt.store.render(),Xt},Xt.changeMode=function(he,nn){return nn===void 0&&(nn={}),he===z.SIMPLE_SELECT&&Xt.getMode()===z.SIMPLE_SELECT?(La(nn.featureIds||[],Yt.store.getSelectedIds())||(Yt.store.setSelected(nn.featureIds,{silent:!0}),Yt.store.render()),Xt):(he===z.DIRECT_SELECT&&Xt.getMode()===z.DIRECT_SELECT&&nn.featureId===Yt.store.getSelectedIds()[0]||Yt.events.changeMode(he,nn,{silent:!0}),Xt)},Xt.getMode=function(){return Yt.events.getMode()},Xt.trash=function(){return Yt.events.trash({silent:!0}),Xt},Xt.combineFeatures=function(){return Yt.events.combineFeatures({silent:!0}),Xt},Xt.uncombineFeatures=function(){return Yt.events.uncombineFeatures({silent:!0}),Xt},Xt.setFeatureProperty=function(he,nn,fn){return Yt.store.setFeatureProperty(he,nn,fn),Xt},Xt}(ft,H),ft.api=H;var zt=Dt(ft);return H.onAdd=zt.onAdd,H.onRemove=zt.onRemove,H.types=L,H.options=T,H};function cu(T){Oa(T,this)}return cu.modes=ta,cu.constants=tt,cu.lib=us,cu})})(O3);var qY=O3.exports;const YY=Fp(qY),w2="draw";function XY(t){Lf(t,w2,{control:null,state:sl({activated:!1,register_id:void 0,show:!1,draw_support:[],cleanAfterDone:!1}),featuresAdded:{},featuresUpdated:{},featuresDeleted:{},action:{}})}Vd(w2,XY);function Fs(t){return ba(t,w2)}const QY=(t,e)=>{Fs(t).control=e},hE=(t,e,n)=>{if(!e)throw new Error("Need register id");const a=Fs(t),s=a.state,l=a.control;s.register_id=e,s.activated=!0,l.changeMode("simple_select")},JY=t=>{const e=Fs(t),n=e.control,a=D3(e);e.action.save&&e.action.save(a.geojson),e.action.close&&e.action.close(),e.state.draw_support=[];const s=e.state;s.show=!1,e.action={},s.register_id=void 0,s.activated=!1,e.callback=void 0,e.featuresAdded={},e.featuresUpdated={},e.featuresDeleted={},n==null||n.deleteAll()};function R3(t,e){const a=Fs(t).state;if(!a.activated)throw new Error("Need to call activateDraw first");if(a.register_id&&a.register_id!==e)throw new Error("register id not match")}const fE=(t,e,n,a,s)=>{const l=Fs(t);R3(t,e);const i=l.control;l.callback=a,i.changeMode(n,s)};function D3(t){const e=t.control,n=t.featuresDeleted,a=t.featuresAdded,s=t.featuresUpdated,l={added:{},updated:{},deleted:n,geojson:{type:"FeatureCollection",features:[]}},i=e.getAll();return i.features.forEach(f=>{const m=f.id;a[m]?(l.added[m]=f,f.properties||(f.properties={}),f.properties.id=f.id):s[m]&&(l.updated[m]=f)}),l.geojson=i,l}const z3=(t,e,n)=>{const a=Fs(t),s=a.state,l=a.action;if(R3(t,e),n&&!(n instanceof Function))throw new Error("Callback is not available");const i=D3(a);l.deleteFeatures&&l.deleteFeatures(Object.values(i.deleted)),l.addFeatures&&l.addFeatures(Object.values(i.added)),l.updateFeatures&&l.updateFeatures(Object.values(i.updated)),l.reset&&l.reset(),n&&n(i),s.activated=!1,B3(t)};function tX(t){const n=Fs(t).state;B3(t),n.activated=!1}const B3=t=>{const e=Fs(t),n=e.state;e.featuresAdded={},e.featuresAdded={},e.featuresDeleted={},n.cleanAfterDone&&e.control.deleteAll(),e.control.changeMode("simple_select")};function iA(t,e,n){const a=Fs(t);switch(e){case"added":a.featuresAdded[n.id]=!0;break;case"updated":if(a.featuresAdded[n.id])return;a.featuresUpdated[n.id]=!0;break;case"deleted":if(a.featuresAdded[n.id])return;a.featuresDeleted[n.id]=n;break}}function oA(t,e){const n=Fs(t);n.callback&&(z3(t,e,n.callback),n.callback=void 0)}function F3(t,e){const n=Ef(),a=Fs(t),s=a.state,l=a.action;return s.register_id=n,s.show=!0,s.cleanAfterDone=!!e.cleanAfterDone,s.draw_support=e.draw_support,l.addFeatures=e.addFeatures,l.updateFeatures=e.updateFeatures,l.deleteFeatures=e.deleteFeatures,l.getFeatures=e.getFeatures,l.reset=e.reset,l.save=e.save,n}const eX=t=>Fs(t).state.activated,nX=t=>Fs(t).state.draw_support,rX=t=>Fs(t).state.register_id,iX=t=>Fs(t).state.show,oX=t=>Fs(t).action,aX=t=>Fs(t).control,sX={key:0,class:"d-flex button-custom-container"},lX={key:1,class:"d-flex button-custom-container"},uX={class:"context-menu"},cX=["onClick"],hX=["innerHTML"],fX=_r({__name:"DrawControl",props:{...qa,drawOptions:Object},setup(t){const e=t,n=e.drawOptions,{mapId:a,moduleContainerProps:s}=bo(e,ot=>{E("select"),ot.on("draw.create",m),ot.on("draw.update",y),ot.on("draw.delete",x),ot.addControl(f)},ot=>{ot.off("draw.create",m),ot.off("draw.update",y),ot.off("draw.delete",x),ot.removeControl(f)}),{add:l,remove:i}=GA(a.value,new Jw().setHandler(tt));let f=new YY({displayControlsDefault:!1,boxSelect:!1});function m(ot){for(const Z of ot.features)iA(a.value,"added",Z);oA(a.value,L.value),E("select")}function y(ot){for(const Z of ot.features)iA(a.value,"updated",Z);oA(a.value,L.value),E("select")}function x(ot){for(const Z of ot.features)iA(a.value,"deleted",Z);oA(a.value,L.value),E("select")}QY(a.value,f);const A={add:kf,delete:zw,update:ZM,save:YR,discard:i_,close:i_,draw:eD},w=on("");function E(ot){switch(i(),w.value=ot,ot){case"select":case"delete":l();break}}const L=hn(()=>rX(a.value));function k(ot){hE(a.value,L.value),fE(a.value,L.value,ot)}const z=hn(()=>eX(a.value)),F=hn(()=>iX(a.value)),D=hn(()=>nX(a.value)),B=hn(()=>z.value);function U(){z3(a.value,L.value)}function $(){tX(a.value)}function q(){JY(a.value),i()}async function tt(ot){const Z=oX(a.value),Kt=aX(a.value),Ft=await(Z.getFeatures&&Z.getFeatures([ot.lngLat.lng,ot.lngLat.lat]))||[];switch(w.value){case"select":{const Tt=Kt==null?void 0:Kt.add({type:"FeatureCollection",features:Ft});Tt&&Tt.length>0&&(hE(a.value,L.value),fE(a.value,L.value,"direct_select",void 0,{featureId:Tt[0]}));break}case"delete":{Kt==null||Kt.delete(Kt.getSelectedIds()),Z.deleteFeatures&&Z.deleteFeatures(Ft),Z.reset&&Z.reset();break}}}const Y=on(),G=hn(()=>D.value.map(ot=>typeof ot=="string"?{id:ot,name:pX[ot]||ot}:ot));function rt(){Y.value&&Y.value.close()}function pt(ot){if(D.value.length>1){Y.value&&Y.value.open(ot);return}E("create"),k(D.value[0])}function Q(){n&&F3(a.value,n)}return(ot,Z)=>(Ct(),$e(at(ss),Za(ka(at(s))),{btn:Ce(()=>[F.value?(Ct(),le("div",sX,[B.value?(Ct(),$e(at(dy),{key:0,row:""},{default:Ce(()=>[Jt(at(yo),{onClick:Z[0]||(Z[0]=Kt=>$())},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:A.discard},null,8,["path"])]),_:1}),Jt(at(yo),{onClick:Z[1]||(Z[1]=Kt=>U())},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:A.save},null,8,["path"])]),_:1})]),_:1})):(Ct(),$e(at(dy),{key:1,row:""},{default:Ce(()=>[Jt(at(yo),{onClick:Z[2]||(Z[2]=Kt=>q())},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:A.close},null,8,["path"])]),_:1}),Jt(at(yo),{active:w.value==="create",onClick:pt},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:A.add},null,8,["path"])]),_:1},8,["active"]),Jt(at(yo),{active:w.value==="select",onClick:Z[3]||(Z[3]=Kt=>E("select"))},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:A.update},null,8,["path"])]),_:1},8,["active"]),Jt(at(yo),{active:w.value==="delete",onClick:Z[4]||(Z[4]=Kt=>E("delete"))},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:A.delete},null,8,["path"])]),_:1},8,["active"])]),_:1}))])):at(n)?(Ct(),le("div",lX,[Jt(at(yo),null,{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:A.draw,onClick:Q},null,8,["path"])]),_:1})])):mn("",!0)]),default:Ce(()=>[Jt(at(y2),{ref_key:"contextMenuRef",ref:Y},{default:Ce(()=>[kt("ul",uX,[(Ct(!0),le(Mr,null,Eo(G.value,(Kt,Ft)=>(Ct(),le("li",{key:Ft,onClick:oo(Tt=>{E("create"),k(Kt.id),rt()},["stop"]),class:"context-menu__item"},[kt("span",{innerHTML:Kt.name},null,8,hX)],8,cX))),128))])]),_:1},512)]),_:1},16))}}),dX=Yn(fX,[["__scopeId","data-v-7299412e"]]),ug={POINT:"draw_point",LINE_STRING:"draw_line_string",POLYGON:"draw_polygon"},pX={[ug.POINT]:"draw point",[ug.LINE_STRING]:"draw line string",[ug.POLYGON]:"draw polygon"},mX={class:"field-container"},gX={class:"label-container"},vX={class:"label-field"},yX=["disabled","title"],_X=["disabled"],bX={class:"geometry-list-container"},xX={class:""},AX=["onUpdate:modelValue","onChange"],wX={class:""},CX=["onUpdate:modelValue","onChange"],IX={class:""},EX=["onClick"],SX={__name:"field-geometry",props:Bs({modelValue:{type:Array,default:()=>[[0,0]]},maxLength:{type:Number,default:0},title:String,titleActionDownload:String,titleActionFillBound:String,titleActionAddPoint:String},{modelValue:{default:[[0,0]]},modelModifiers:{}}),emits:Bs(["click:remove","click:fillbound"],["update:modelValue"]),setup(t,{emit:e}){const n=t,a=ll(t,"modelValue"),s={add:kf,fillBound:Sg,delete:zw,download:tD,upload:_D},l=e,i=L=>{a.value=L},f=()=>{a.value||(a.value=[]),a.value.push([null,null])},m=()=>{i(a)},y=L=>{a.value.splice(L,1),l("click:remove",L),i(a)},x=L=>{if(!(!L||!L.length))return L.length==1?is(L[0]):L.length==2?Ds(L):kg([[...L,L[0]]])},A=()=>{let L={type:"FeatureCollection",features:[x(a.value)]};const k=new window.Blob([JSON.stringify(L)],{type:"text/plain;charset=utf-8"});vR.saveAs(k,"geojson.json")},w=()=>{l("click:fillbound",x(a.value))},E=hn(()=>!n.maxLength||a.value.length<n.maxLength);return(L,k)=>(Ct(),le("div",mX,[kt("div",gX,[kt("div",vX,Mn(t.title),1),kt("div",null,[kt("button",{onClick:w,disabled:!t.modelValue||t.modelValue.length<1,class:"setting-button",title:t.titleActionFillBound},[Jt(at(nr),{size:16,type:"mdi",path:s.fillBound,title:t.titleActionDownload},null,8,["path","title"])],8,yX),kt("button",{onClick:A,class:"setting-button",disabled:!t.modelValue||t.modelValue.length<1},[Jt(at(nr),{size:16,type:"mdi",path:s.download,title:t.titleActionAddPoint},null,8,["path","title"])],8,_X),E.value?(Ct(),le("button",{key:0,onClick:f,class:"setting-button"},[Jt(at(nr),{size:16,type:"mdi",path:s.add},null,8,["path"])])):mn("",!0)])]),kt("div",bX,[(Ct(!0),le(Mr,null,Eo(t.modelValue,(z,F)=>(Ct(),le("div",{class:"geometry-list-item",key:F},[kt("div",null,"#"+Mn(F+1),1),kt("div",xX,[Du(kt("input",{class:"setting-input","onUpdate:modelValue":D=>a.value[F][0]=D,type:"number",step:"any",onChange:D=>m()},null,40,AX),[[Oh,a.value[F][0]]])]),kt("div",wX,[Du(kt("input",{class:"setting-input","onUpdate:modelValue":D=>a.value[F][1]=D,type:"number",step:"any",onChange:D=>m()},null,40,CX),[[Oh,a.value[F][1]]])]),kt("div",IX,[kt("button",{onClick:D=>y(F),class:"setting-button"},[Jt(at(nr),{size:16,type:"mdi",path:s.delete},null,8,["path"])],8,EX)])]))),128))])]))}},MX=Yn(SX,[["__scopeId","data-v-e28afdf9"]]),TX={class:"label-container"},PX={class:"label-field"},kX={class:"label-field-value"},LX={__name:"fields-show",props:{fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]}},setup(t){return(e,n)=>(Ct(),le("div",null,[(Ct(!0),le(Mr,null,Eo(t.fields,(a,s)=>(Ct(),le("div",{class:"field-container label-value",key:s},[kt("div",TX,[kt("div",PX,Mn(a.text),1),kt("div",kX,Mn(a.value),1)])]))),128))]))}},OX=Yn(LX,[["__scopeId","data-v-6556841c"]]),RX={class:"setting-container"},DX={__name:"MeasurementSettingPopup",props:Bs({...qa,modelValue:Array,maxLength:{type:Number,default:0},fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]},popUpPosition:{type:Object,default:()=>({top:50,right:40,width:350,height:300})}},{modelValue:{default:[[0,0]]},modelModifiers:{},show:{default:!1},showModifiers:{}}),emits:Bs(["update:modelValue"],["update:modelValue","update:show"]),setup(t,{emit:e}){const n=e,a=t,{callMap:s,moduleContainerProps:l,mapId:i}=bo(a),{trans:f}=Ka(i.value),m=ll(t,"modelValue"),y=ll(t,"show"),x=w=>{s(E=>{WT(E,w)})};function A(w){n("update:modelValue",w.value)}return(w,E)=>(Ct(),$e(at(ss),Za(ka(at(l))),{draggable:Ce(L=>[y.value?(Ct(),$e(at(jd),li({key:0},Object.assign(L,t.popUpPosition),{show:y.value,"onUpdate:show":E[0]||(E[0]=k=>y.value=k),title:at(f)("map.measurement.setting.title")}),{default:Ce(()=>[kt("div",RX,[Jt(OX,{fields:t.fields},null,8,["fields"]),Jt(MX,{"onUpdate:modelValue":A,modelValue:m.value,maxLength:t.maxLength,"onClick:fillbound":x,title:at(f)("map.measurement.setting.field.data"),titleActionDownload:at(f)("map.measurement.action.download"),titleActionFillBound:at(f)("map.measurement.action.fly-to"),titleActionAddPoint:at(f)("map.measurement.action.add-point")},null,8,["modelValue","maxLength","title","titleActionDownload","titleActionFillBound","titleActionAddPoint"])])]),_:2},1040,["show","title"])):mn("",!0)]),default:Ce(()=>[Zn(w.$slots,"default",{},void 0,!0)]),_:3},16))}},zX=Yn(DX,[["__scopeId","data-v-1a628ab0"]]);class _b{constructor(){this.value=[]}get coordinates(){return this.value.filter(e=>e[0]!=null&&e[1]!=null)}start(){}add(e){const n=BX(this.value);n>=0?this.value[n]=e:this.value.push(e)}init(e){this.value=e}getResult(){return{}}reset(){this.value=[]}destroy(){this.value=[]}}function BX(t=[]){return t.findIndex(e=>!e[0]||!e[1])}function w_(t,e="vi"){return new Intl.NumberFormat(e).format(t)}class FX extends _b{get name(){return"Measure Area"}get type(){return"area"}getResult(){const s={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return s;if(this.coordinates.length==1)return s.features=[is(this.coordinates[0])],s;if(this.coordinates.length==2)return s.features=[Ds(this.coordinates)],s;const l=kg([[...this.coordinates,this.coordinates[0]]]);return s.features=[l],s.value=eG(l),s.format=aA(s.value),s.features_label=[GH(l,{properties:{is_label:!0,is_center:!0,text:aA(s.value)}})],s.fields=[{trans:"map.measurement.setting.area",value:aA(s.value)}],s}}function aA(t=0){return t<1e6?`${w_(t.toFixed(2))} m²`:`${w_((t/1e6).toFixed(2))} km²`}class NX extends _b{get name(){return"Measure Azimuth"}get type(){return"line"}get setting(){return{maxLength:2}}add(e){this.value.length>1&&(this.value=this.value.slice(0,1)),this.value.push(e)}getResult(){const s={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return s;if(this.coordinates.length==1)return s.features=[is(this.coordinates[0])],s;const l=this.coordinates[this.coordinates.length-1],i=this.coordinates[this.coordinates.length-2],f=Ds(this.coordinates);s.features=[f];const m=NT(i,l);return s.value=OT(m).toFixed(3),s.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:l},properties:{is_label:!0,text:`${s.value} °`,rotation:m}}],s.fields=[{trans:"map.measurement.setting.azimuth",value:`${s.value} °`}],s}}class UX extends _b{get name(){return"Measure Distance"}get type(){return"line"}getResult(){const s={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return s;if(this.coordinates.length==1)return s.features=[is(this.coordinates[0])],s;const l=Ds(this.coordinates);return s.features=[l],s.value=UI(l),s.format=sA(s.value),s.features_label=this.coordinates.map((i,f,m)=>({type:"Feature",properties:{is_label:!0,text:sA(f<1?0:UI(Ds(m.slice(0,f+1))))},geometry:{type:"Point",coordinates:i}})),s.fields=[{trans:"map.measurement.setting.distance",value:sA(s.value)}],s}}function sA(t=0){return t<1?`${w_((t*1e3).toFixed(2))} m`:`${w_(t.toFixed(2))} km`}class VX extends _b{constructor(e=[]){super(),this.crs_items=e}get name(){return"Measure Point"}get type(){return"point"}get setting(){return{maxLength:1}}add(e){this.value.length>0&&(this.value=[]),this.value.push(e)}getResult(){const s={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return s;s.features=[is(this.coordinates[0])];const l=this.coordinates[0][0],i=this.coordinates[0][1],f=HA({longitude:l,latitude:i},void 0,!1);if(f&&(s.value=`${f.longitude}, ${f.latitude}`),this.crs_items){const m=this.crs_items.find(y=>y.default);s.fields=[{trans:m==null?void 0:m.name,value:s.value}],this.crs_items.filter(y=>!y.default).forEach(y=>{var x;if(!y.default&&y.proj4js){const A=HA({longitude:l,latitude:i},y,!1);A&&((x=s.fields)==null||x.push({trans:y.name,value:`${A.longitude}, ${A.latitude}`}))}})}else s.fields=[{trans:"map.measurement.setting.point",value:s.value}];return s.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:this.coordinates[0]},properties:{is_label:!0,text:s.value}}],s}}class C2{start(e){}view(e){}reset(){}destroy(){}}class jX extends C2{constructor(e){super(),this.layers=[],this.map=e}init(e,n){return n.id||(n.id=`measurment-control-${Ef()}`),this.map.addSource(n.id,n.data),e.forEach(a=>{a.id||(a.id=`measurment-control-${Ef()}`),a.source||(a.source=n.id),this.map.addLayer(a)}),this.source=n,this.layers=e,this}start(){this.onStart&&this.onStart(),this.layers.forEach(e=>{const n=e.id;this.map.getLayer(n)&&this.map.moveLayer(n)})}reset(){const e=this.map.getSource(this.source.id);e&&e.setData({type:"FeatureCollection",features:[]}),this.onReset&&this.onReset()}destroy(){this.map&&(this.layers.forEach(e=>{const n=e.id;this.map.getLayer(n)&&this.map.removeLayer(n),this.map.getSource(n)&&this.map.removeSource(n)}),this.map.getSource(this.source.id)&&this.map.removeSource(this.source.id))}view({features:e=[],features_label:n=[]}={}){const a=this.map.getSource(this.source.id);a&&a.setData({type:"FeatureCollection",features:[...e,...n]})}}class HX extends C2{constructor(e){super(),this.markers=[],this.bindEvent={},this.color="#fff",this.map=e,this.markers=[]}setColor(e){return this.color=e,this}view({coordinates:e=[]}={}){const n=!!this.onDragMarker;if(e.length<this.markers.length)for(;e.length<this.markers.length;){const a=this.markers.pop();a&&a.remove()}e.forEach((a,s)=>{if(!a[0]||!a[1])return;let l=this.markers[s];l||(this.bindEvent[s]={},l=GX({color:this.color,draggable:n}),this.markers[s]=l),l.setLngLat({lng:a[0],lat:a[1]}).addTo(this.map),n&&(this.bindEvent[s].dragend&&l.off("dragend",this.bindEvent[s].dragend),this.bindEvent[s].dragend=()=>{const f=l.getLngLat(),m=[f.lng,f.lat],y=e.slice();y[s]=m,this.onDragMarker&&this.onDragMarker(y,m,s,l)},l.on("dragend",this.bindEvent[s].dragend));const i=l.getElement();this.onRightClickMarker&&(this.bindEvent[s].contextmenu&&i.removeEventListener("contextmenu",this.bindEvent[s].contextmenu),this.bindEvent[s].contextmenu=f=>{f.preventDefault();const m=l.getLngLat();this.onRightClickMarker&&this.onRightClickMarker([m.lng,m.lat],s,l)},i.addEventListener("contextmenu",this.bindEvent[s].contextmenu))})}reset(){this.markers.forEach(e=>{e.remove()}),this.markers=[]}destroy(){this.reset()}}function GX({color:t,draggable:e=!1}={}){const n=document.createElement("div");return n.style.width="12px",n.style.height="12px",n.style.borderRadius="50%",n.style.background="#fff",n.style.boxSizing="border-box",n.style.border=`2px solid ${t}`,n.style.cursor="pointer",new py.Marker({element:n,draggable:e})}const WX=function(){let t=null;const e=[],n=A=>{for(let w=0;w<e.length;w++)A(e[w])},a=A=>{t=A},s=A=>{e.push(A)},l=()=>{t&&t.start(),n(A=>{A.start&&A.start(m())})},i=()=>{t&&t.reset(),n(A=>{A.reset&&A.reset()})},f=()=>{t&&t.destroy(),n(A=>{A.destroy()})},m=()=>({coordinates:t.value,setting:t.setting,...t.getResult()});return{get type(){return t?t.type:null},get action(){return t},setAction:a,addView:s,start:l,reset:i,destroy:f,add:A=>{t&&t.add(A),n(w=>{w.view&&w.view(m())})},init:(A=[])=>{t&&t.init(A),n(w=>{w.view(m())})},getResult:m}};class ZX extends C2{start({setting:e}={}){this.onChangeSetting&&this.onChangeSetting(e)}view({coordinates:e=[],setting:n={},fields:a=[]}={}){this.onChangeValue&&this.onChangeValue(e),this.onChangeSetting&&(n.fields=a,this.onChangeSetting(n))}reset(){this.onChangeValue&&this.onChangeValue([]),this.onChangeSetting&&this.onChangeSetting()}}const $X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAADo6zjiAAAAAXNSR0IArs4c6QAAA4RJREFUWEe9l09o02AYxtdkTRlfL13aie1Cdwgt7cqwiptUA2MHYb04xXhRUFQ6ENHT7rnvpOBhZaIieMlBPYyBIBtEKhtq/TM7W3JYyVpxbdZLvkHTtUrKNrou/5pt5tCWfu/7Pr/naXlJbF2HuKLRqFdpT6fTRatjbFYblT4AwHflHUI4ZHWOZQCapjGWZauKME3TDpZlZSsQlgFcLtfLSqVyQxHFcfyVKIrX/ytAV1fX3zZBS2YsNXm93gfFYvFRK4DX631YLBYfd5qCJQAEQbYbjQbaKoYgSL3RaHQfO0AgELiQy+U4NaFAIEDlcrkPnUB0nIDdbt+s1WouNREMwyqyLPceGwBFUSc5jtNdOhRFeTmO+20WoqMEAABpCOEpveEAgK8QwuiRAyQSCXsymTS1bDpZTKYTwHH8uSiKN804w3H8hSiKt8zUmgZQWTxG803NNlVEEMQ9QRCeGCm2nhMEcd9MjykAtcVjBGN2MRkCkCR5juf5j0aCaueRSOT8yspKSq/XEADDsLIsy7gVAAzDRFmW3ZYBYrFYXyqV+mNFfLcnFoudSKVSG1ozdBMAAHyCEJ45DIDT6fwiSZLmDE2AThaPEWAikcCSyWRNrU4ToLe3d3Zzc/OO0XAz5x6P51mpVLrdEYCFxWPEompW9Uufz5coFAozRhM7Off5fJOFQiHZ3qMKgCBIzcrdjR4QiqLb9XrdbggQDoeHM5nMkhl3PT09WQRBlOeCoJn6cDg8kslklltrDyTgcDg2qtWqx2hgMBi8ls1mWaWOJMmrPM83P+tdDoejVK1W+zQBKIrycBynuTSURgBAdmpqKsIwzHbrIIZhuqenp1eM0qAoqo/juNJu774EAABLEMJhLRd+v/9KPp9/reeSIIgJQRA0awAAyxDCkQMAo6Oj3YuLi6rLQnEdj8cHWZatG8WsnNM0jc7Pz/+UJEn1v8EwjH03wb0E3G73TLlcTrQLEARxWRCEN2aE22sGBgYm1tbWDqThdruT5XJ5Uqlv/Qn2PWo5nc5f4+PjEbOutQB30vghSVKoraap3Xzp7++/s76+PrtbsEP+1oprrR6SJC/xPL+XpN/vv5vP5582AVAUlZUlAQDIxOPxocO61ktjbm7u29bW1iCKorV6vY7ZQqHQ6dXV1c8kSU7wPH+kro3SiEQiZ204jr8fGxu7eFyu9dJYWFh49w9KoVXl/UeUKQAAAABJRU5ErkJggg==",KX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGmSURBVDiNldPBitpAGAfwv5mMmy85JCistD5Ai/gCPYovYJENCPZQF8VD36HXUkrfQws9R8WLF58gh2h2W2PpoeTWxBgzMr1spd3uUvOHOQ2//3yHb4C/UyGi95Zl3XLOUwASgFRVNTVN8ysRfQTwFA+FMdYhoqjf7+9ns5kMgkCGYSjDMJTb7VbO53M5HA4PRBRzzl//g8vlcrxYLE7osbNcLmWlUok459cAULgb+2YymRi1Wu3B6e7H9300Go1dkiTPGRG97Xa7LzqdjnqWBlAqlRBFEVzXNZRisXhl2/bFufh3bNvmAF4WOOd73/cvDMPIVSCEQLVaFUqWZbkxAKiqCsaYVHLLe1E452kcx7mhEALH47Gg6Lr+3fO83AXr9Rq6rofK4XD4NB6P07wFo9Eok1J+LgC41DTt1nEco16vn4VXqxWazeYuSZJnCoAfWZZdt9vtneu6/8We56HVasVCiDcAvp0uGGM2Ef3s9Xp7x3HkZrM57X8QBHI6ncrBYJASUcQYe/XYA5eapr2zLOuGc77H3XfmnKemaX4hog8AnvwJfgHMKs1jQ++4tQAAAABJRU5ErkJggg==",Iv="#004E98",qX=_r({__name:"MeasurementControl",props:{...qa},setup(t){const{getCrsItems:e}=Ww,{addImage:n}=Tj;let a=WX();const s=t,l=on(""),i=on([]),f=on({show:!0,maxLength:0,fields:[]}),m={add:kf,fillBound:Sg,distance:pD,area:mD,azimuth:vD,point:Nw,clear:zw,close:i_,setting:KR},{callMap:y,mapId:x,moduleContainerProps:A}=bo(s,k,z),{trans:w,setLocaleDefault:E}=Ka(x.value);E({map:{measurement:{action:{clear:"Clear",close:"Close",setting:"Setting",download:"Download","add-point":"Add point","fly-to":"Fill bound",add:"Add"},title:"Measurement",result:"Measurement Result",field:{"unit-distance":"Unit distance","unit-area":"Unit area"},tools:{point:"Measure Point",distance:"Measure Distance",area:"Measure Area",azimuth:"Measure azimuth"},unit:{meter:"Meter",kilometer:"Kilometer","square-meter":"Square Meter",hecta:"Hecta","square-kilometer":"Square Kilometer"},setting:{title:"Setting",field:{data:"Data"},point:"Point",distance:"Distance",area:"Area",azimuth:"Azimuthị"},"no-data":{text:"Status",value:"Waiting..."}}}});const L=new Jw().setHandler(F);function k(Q){n(Q.id,"azimuth-arrow",$X,{sdf:!0}),n(Q.id,"measurment-round",KX,{content:[4,4,12,12],stretchX:[[6,10]],stretchY:[[6,10]]});let ot=new jX(Q);ot.init([{type:"line",paint:{"line-color":Iv,"line-width":2}},{type:"fill",filter:["==","$type","Polygon"],paint:{"fill-color":Iv,"fill-opacity":.3}},{type:"symbol",filter:["has","rotation"],paint:{"icon-color":Iv},layout:{"icon-size":1.2,"icon-rotate":{type:"identity",property:"rotation"},"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":"azimuth-arrow",visibility:"visible"}},{type:"symbol",filter:["all",["has","is_label"],["==","$type","Point"]],layout:{"text-field":"{text}","text-offset":["case",["to-boolean",["get","is_center"]],["literal",[0,0]],["literal",[0,2]]],"text-size":14,"text-allow-overlap":!0,"icon-allow-overlap":!0,"icon-image":"measurment-round","icon-text-fit":"both"},paint:{"text-color":"#fff","text-halo-color":Iv,"text-halo-width":2}}],{data:{type:"geojson",data:{type:"FeatureCollection",features:[]}}});const{add:Z,remove:Kt}=MT(Q.id,L);ot.onStart=()=>{Q&&Z()},ot.onReset=()=>{Kt()};let Ft=new HX(Q);Ft.setColor(Iv),Ft.onDragMarker=ie=>{a.init(ie)},Ft.onRightClickMarker=(ie,ue)=>{i.value.splice(ue,1),a.init(i.value)};let Tt=new ZX;Tt.onChangeValue=ie=>{i.value=(ie||[]).slice()},Tt.onChangeSetting=(ie={})=>{f.value.maxLength=ie.maxLength||0;let ue=ie.fields;(!ue||ue.length==0)&&(ue=[{text:w.value("map.measurement.no-data.text"),value:w.value("map.measurement.no-data.value")}]),f.value.fields=ue.map(je=>({...je,text:je.trans?w.value(je.trans):je.text}))},a.addView(ot),a.addView(Ft),a.addView(Tt)}function z(){a&&a.destroy(),rt()}function F(Q){const ot=[Q.lngLat.lng,Q.lngLat.lat];a.action&&a.add(ot)}function D(Q){return G(!1),l.value==Q?(l.value=void 0,a.setAction(null),!1):(l.value=Q,!0)}function B(){D("distance")&&(a.setAction(new UX),a.start())}function U(){D("area")&&(a.setAction(new FX),a.start())}function $(){D("azimuth")&&(a.setAction(new NX),a.start())}function q(){D("point")&&(a.setAction(new VX(e(x.value))),a.start())}function tt(){f.value.show=!f.value.show}function Y(){y(Q=>{WT(Q,dG(i.value))})}function G(Q=!0){a&&(a.reset(),Q&&lu(()=>{a.start()}))}function rt(){G(!1),l.value=void 0,a&&a.setAction(null)}function pt(Q=[]){a&&a.init(Q)}return(Q,ot)=>(Ct(),$e(at(ss),Za(ka(at(A))),{btn:Ce(()=>[l.value?(Ct(),$e(at(dy),{key:1,row:""},{default:Ce(()=>[Jt(at(yo),{tooltip:at(w)("map.measurement.action.setting"),onClick:ot[4]||(ot[4]=Z=>tt()),active:f.value.show},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:m.setting},null,8,["path"])]),_:1},8,["tooltip","active"]),Jt(at(yo),{disabled:!i.value||i.value.length<1,tooltip:at(w)("map.measurement.action.fly-to"),onClick:ot[5]||(ot[5]=Z=>Y())},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:m.fillBound},null,8,["path"])]),_:1},8,["disabled","tooltip"]),Jt(at(yo),{tooltip:at(w)("map.measurement.action.clear"),onClick:ot[6]||(ot[6]=Z=>G())},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:m.clear},null,8,["path"])]),_:1},8,["tooltip"]),Jt(at(yo),{tooltip:at(w)("map.measurement.action.close"),onClick:ot[7]||(ot[7]=Z=>rt())},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:m.close},null,8,["path"])]),_:1},8,["tooltip"])]),_:1})):(Ct(),$e(at(dy),{key:0,row:""},{default:Ce(()=>[Jt(at(yo),{tooltip:at(w)("map.measurement.tools.distance"),onClick:ot[0]||(ot[0]=Z=>B()),active:l.value=="distance"},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:m.distance},null,8,["path"])]),_:1},8,["tooltip","active"]),Jt(at(yo),{tooltip:at(w)("map.measurement.tools.area"),onClick:ot[1]||(ot[1]=Z=>U()),active:l.value=="area"},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:m.area},null,8,["path"])]),_:1},8,["tooltip","active"]),Jt(at(yo),{tooltip:at(w)("map.measurement.tools.azimuth"),onClick:ot[2]||(ot[2]=Z=>$()),active:l.value=="azimuth"},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:m.azimuth},null,8,["path"])]),_:1},8,["tooltip","active"]),Jt(at(yo),{tooltip:at(w)("map.measurement.tools.point"),onClick:ot[3]||(ot[3]=Z=>q()),active:l.value=="point"},{default:Ce(()=>[Jt(at(nr),{size:18,type:"mdi",path:m.point},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1}))]),default:Ce(()=>[Zn(Q.$slots,"default"),l.value?(Ct(),$e(zX,{key:0,modelValue:i.value,show:f.value.show,"onUpdate:show":ot[8]||(ot[8]=Z=>f.value.show=Z),position:Q.position,"onUpdate:modelValue":pt,maxLength:f.value.maxLength,fields:f.value.fields},null,8,["modelValue","show","position","maxLength","fields"])):mn("",!0)]),_:3},16))}}),YX=_r({__name:"AllMapView",setup(t){const{status:e,error:n,downloadFile:a}=KO(),s=on(),{convertList:l}=$O(),{convert:i}=WR();function f(x){const A=yf("Group test",null,!0),w=p3("source",{name:"raster 1",type:"raster",tiles:["https://naturalearthtiles.roblabs.com/tiles/natural_earth_cross_blended_hypso_shaded_relief.raster/{z}/{x}/{y}.png"],maxzoom:6,bounds:[104.96327341667353,18.461221184685627,106.65936430823979,19.549518287564368]}),E=qv("layer raster",[{type:"raster"}]),L=Yv("test raster");L.color="#0000FF";const k=yf("Group layer 1",null,!0);A.add(w),k.add(L),k.add(E),A.add(k),L.addMenu(WI());const z=yf("Group test",null,!0),F=d3("source",{type:"FeatureCollection",features:[]}),D=yf("Group layer 1",null,!0),B=Yv("test area");B.color="#0000FF",B.legend=KY([{type:"text",value:{text:"text-test",value:"test-value"}},{type:"linear",value:{text:"legend linear",items:[{value:"test 1",color:"#fff"},{value:"test 2",color:"#000"},{value:"test 3",color:"red"}]}}]);const U=qv("layer area",[new Kv().setStyleType("area").setColor(B.color).setOpacity(.5).build()]);D.add(U),D.add(B);const $=yf("Group layer 2",null,!0),q=Yv("test point");q.color="#ff0000",q.legend=$Y("color",{text:"color-test",color:"#fff"});const tt=qv("layer point",[new Kv().setStyleType("point").setColor(q.color).setOpacity(q.opacity).build(),new Kv().setStyleType("line").setColor(q.color).setOpacity(.5).build()]);B.addMenus([GI(),WI(),GW()]),q.addMenus([GI(),y(),m()]);const Y=XI("metadata for list2",{bbox:[105.88454157202995,20.878811643339404,106.16710803591963,21.0854254401454]}),G=XI("metadata",{bbox:[104.96327341667353,18.461221184685627,107.53334783357559,20.18022781865689]}),rt=o3("test identify"),pt=$I("test identify 1"),Q=$I("test identify 2");rt.addMenus([F1(),N1()]),pt.addMenus([F1(),N1()]),Q.addMenus([F1(),N1()]);const ot={id:"test",name:"test"};B.group=ot,D.add(pt),q.group=ot,$.add(tt),$.add(q),$.add(Q),$.add(Y);const Z=e3("data management",{fields:[{text:"Name rat dai rat dai rat dai rat dai",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"}]});Z.setItems([{id:"1",name:"feature 1",geometry:{coordinates:[[[104.96327341667353,19.549518287564368],[104.96327341667353,18.461221184685627],[106.65936430823979,18.461221184685627],[106.65936430823979,19.549518287564368],[104.96327341667353,19.549518287564368]]],type:"Polygon"}},{id:"2",name:"feature 2",geometry:{coordinates:[[[105.80782070639765,20.18022781865689],[105.80782070639765,18.841791883714322],[107.53334783357559,18.841791883714322],[107.53334783357559,20.18022781865689],[105.80782070639765,20.18022781865689]]],type:"Polygon"}}]),z.add(F),z.add(Z),z.add(D),z.add($),z.add(rt),z.add(G),XT(x.id,z)}function m(){return{type:"item",name:"Download",icon:JR,click:async(x,A)=>{const w=Jc(x,E=>E.type==="dataManagement");if($A(w)){const E=await i(l(await w.getList()||[]),{filename:"download.geojson"});E&&a(E,"download.geojson")}}}}function y(){return{type:"item",name:"Edit feature",icon:ZM,click:(x,A)=>{const w=Jc(x,E=>E.type==="dataManagement");$A(w)&&F3(A,{cleanAfterDone:!0,draw_support:[ug.POINT,ug.POLYGON,ug.LINE_STRING],getFeatures:w.getFeatures&&w.getFeatures.bind(w),addFeatures:w.addFeatures&&w.addFeatures.bind(w),updateFeatures:w.updateFeatures&&w.updateFeatures.bind(w),deleteFeatures:w.deleteFeatures&&w.deleteFeatures.bind(w),reset:async()=>{Up(A,E=>{v_(w)&&w.addToMap(E)})}})}}}return(x,A)=>(Ct(),$e(at(ON),{ref_key:"mapRef",ref:s,onMapLoaded:f},{default:Ce(()=>[Jt(at(n$)),Jt(at(qX),{position:"top-right"}),Jt(at(dX),{position:"top-right"}),Jt(at(Kq),{position:"top-left",show:""},{endList:Ce(({mapId:w})=>[Jt(at(SG),{mapId:w},null,8,["mapId"])]),_:1}),Jt(at(aK),{position:"top-right"}),Jt(at($j),{position:"top-right"}),Jt(at(Vj)),Jt(at(dH)),Jt(at(Hj)),Jt(at(jj)),Jt(at(gH)),Jt(at(Kj)),Jt(at(uH)),Jt(at(zG),{position:"bottom-left"}),Jt(at(MY))]),_:1},512))}}),XX=JL({history:ML("/demo-map/"),routes:[{path:"/",name:"home",component:YX},{path:"/draw/",component:()=>mv(()=>import("./example-BXBFY2s3.js"),__vite__mapDeps([0,1,2,3]))},{path:"/compare/",component:()=>mv(()=>import("./AllMapCompareView-D5WtN1ay.js"),__vite__mapDeps([4,3]))},{path:"/basemap/",component:()=>mv(()=>import("./example-CoozIGNv.js"),__vite__mapDeps([5,1,2,6]))},{path:"/measurement/",component:()=>mv(()=>import("./example-qTceDwSQ.js"),__vite__mapDeps([7,1,2,3]))},{path:"/story-telling/",component:()=>mv(()=>import("./example-C7i4yX6C.js"),__vite__mapDeps([8,9]))}]}),QX=_r({__name:"App",setup(t){return(e,n)=>(Ct(),$e(at(gM)))}}),JX=Yn(QX,[["__scopeId","data-v-b7680054"]]),N3=eM(JX);N3.use(XX);N3.mount("#root");export{RA as $,ss as A,zG as B,Fp as C,dX as D,wM as E,_1 as F,Ef as G,$a as H,E8 as I,lu as J,Pf as K,hn as L,ON as M,Ed as N,Sd as O,mo as P,Mr as Q,Eo as R,nr as S,lB as T,bN as U,iu as V,Wa as W,th as X,eh as Y,ZT as Z,Yn as _,Jt as a,Mn as a0,zy as a1,MG as a2,Uw as a3,_a as a4,WD as a5,lD as a6,Ni as a7,n$ as a8,qX as a9,N1 as aA,e3 as aB,XT as aC,dy as aD,SG as aE,n6 as aF,sl as aG,yS as aH,P4 as aI,Bu as aJ,Fy as aK,Ga as aL,Ld as aM,JM as aN,qL as aO,tT as aP,tQ as aQ,Sl as aR,Up as aS,Kq as aa,aK as ab,$j as ac,Vj as ad,dH as ae,Hj as af,jj as ag,gH as ah,Kj as ai,uH as aj,MY as ak,yf as al,p3 as am,qv as an,Yv as ao,WI as ap,iQ as aq,d3 as ar,KY as as,Kv as at,$Y as au,GW as av,XI as aw,o3 as ax,$I as ay,F1 as az,ug as b,$e as c,_r as d,Lf as e,Ka as f,ba as g,le as h,kt as i,qa as j,Rd as k,bo as l,$R as m,oo as n,Ct as o,yo as p,jd as q,on as r,li as s,Jo as t,at as u,mn as v,Ce as w,Zn as x,Za as y,ka as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/example-BXBFY2s3.js","assets/aside-control-BMvV0wPp.js","assets/aside-control-CNIY_DRj.css","assets/example-BRI0LJKA.css","assets/AllMapCompareView-D5WtN1ay.js","assets/example-CoozIGNv.js","assets/example-7vOpaiIK.css","assets/example-qTceDwSQ.js","assets/example-C7i4yX6C.js","assets/example-Ca6w4nUQ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
