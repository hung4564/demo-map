(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(s){if(s.ep)return;s.ep=!0;const d=n(s);fetch(s.href,d)}})();const Y3="modulepreload",X3=function(t){return"/demo-map/"+t},fC={},Lm=function(e,n,a){let s=Promise.resolve();return n&&n.length>0&&(document.getElementsByTagName("link"),s=Promise.all(n.map(d=>{if(d=X3(d),d in fC)return;fC[d]=!0;const l=d.endsWith(".css"),o=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${o}`))return;const g=document.createElement("link");if(g.rel=l?"stylesheet":Y3,l||(g.as="script",g.crossOrigin=""),g.href=d,document.head.appendChild(g),l)return new Promise((_,I)=>{g.addEventListener("load",_),g.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${d}`)))})}))),s.then(()=>e()).catch(d=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=d,window.dispatchEvent(l),!l.defaultPrevented)throw d})};/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function V1(t,e){const n=new Set(t.split(","));return a=>n.has(a)}const zi={},tg=[],Il=()=>{},Q3=()=>!1,By=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Nw=t=>t.startsWith("onUpdate:"),Ji=Object.assign,jw=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},J3=Object.prototype.hasOwnProperty,hi=(t,e)=>J3.call(t,e),ar=Array.isArray,eg=t=>Ig(t)==="[object Map]",Gp=t=>Ig(t)==="[object Set]",pC=t=>Ig(t)==="[object Date]",tk=t=>Ig(t)==="[object RegExp]",Mr=t=>typeof t=="function",fo=t=>typeof t=="string",fd=t=>typeof t=="symbol",ji=t=>t!==null&&typeof t=="object",Vw=t=>(ji(t)||Mr(t))&&Mr(t.then)&&Mr(t.catch),XM=Object.prototype.toString,Ig=t=>XM.call(t),ek=t=>Ig(t).slice(8,-1),QM=t=>Ig(t)==="[object Object]",Uw=t=>fo(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ng=V1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),U1=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},nk=/-(\w)/g,el=U1(t=>t.replace(nk,(e,n)=>n?n.toUpperCase():"")),rk=/\B([A-Z])/g,pc=U1(t=>t.replace(rk,"-$1").toLowerCase()),Ny=U1(t=>t.charAt(0).toUpperCase()+t.slice(1)),ey=U1(t=>t?`on${Ny(t)}`:""),Bu=(t,e)=>!Object.is(t,e),rg=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},JM=(t,e,n,a=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:a,value:n})},l1=t=>{const e=parseFloat(t);return isNaN(e)?t:e},c1=t=>{const e=fo(t)?Number(t):NaN;return isNaN(e)?t:e};let mC;const tS=()=>mC||(mC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ik="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",ok=V1(ik);function fi(t){if(ar(t)){const e={};for(let n=0;n<t.length;n++){const a=t[n],s=fo(a)?ck(a):fi(a);if(s)for(const d in s)e[d]=s[d]}return e}else if(fo(t)||ji(t))return t}const ak=/;(?![^(]*\))/g,sk=/:([^]+)/,lk=/\/\*[^]*?\*\//g;function ck(t){const e={};return t.replace(lk,"").split(ak).forEach(n=>{if(n){const a=n.split(sk);a.length>1&&(e[a[0].trim()]=a[1].trim())}}),e}function Li(t){let e="";if(fo(t))e=t;else if(ar(t))for(let n=0;n<t.length;n++){const a=Li(t[n]);a&&(e+=a+" ")}else if(ji(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function No(t){if(!t)return null;let{class:e,style:n}=t;return e&&!fo(e)&&(t.class=Li(e)),n&&(t.style=fi(n)),t}const uk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hk=V1(uk);function eS(t){return!!t||t===""}function dk(t,e){if(t.length!==e.length)return!1;let n=!0;for(let a=0;n&&a<t.length;a++)n=Cf(t[a],e[a]);return n}function Cf(t,e){if(t===e)return!0;let n=pC(t),a=pC(e);if(n||a)return n&&a?t.getTime()===e.getTime():!1;if(n=fd(t),a=fd(e),n||a)return t===e;if(n=ar(t),a=ar(e),n||a)return n&&a?dk(t,e):!1;if(n=ji(t),a=ji(e),n||a){if(!n||!a)return!1;const s=Object.keys(t).length,d=Object.keys(e).length;if(s!==d)return!1;for(const l in t){const o=t.hasOwnProperty(l),g=e.hasOwnProperty(l);if(o&&!g||!o&&g||!Cf(t[l],e[l]))return!1}}return String(t)===String(e)}function H1(t,e){return t.findIndex(n=>Cf(n,e))}const Rn=t=>fo(t)?t:t==null?"":ar(t)||ji(t)&&(t.toString===XM||!Mr(t.toString))?JSON.stringify(t,nS,2):String(t),nS=(t,e)=>e&&e.__v_isRef?nS(t,e.value):eg(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[a,s],d)=>(n[$x(a,d)+" =>"]=s,n),{})}:Gp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>$x(n))}:fd(e)?$x(e):ji(e)&&!ar(e)&&!QM(e)?String(e):e,$x=(t,e="")=>{var n;return fd(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dc;class Hw{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=dc,!e&&dc&&(this.index=(dc.scopes||(dc.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=dc;try{return dc=this,e()}finally{dc=n}}}on(){dc=this}off(){dc=this.parent}stop(e){if(this._active){let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.scopes)for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function fk(t){return new Hw(t)}function rS(t,e=dc){e&&e.active&&e.effects.push(t)}function Gw(){return dc}function iS(t){dc&&dc.cleanups.push(t)}let Rp;class fg{constructor(e,n,a,s){this.fn=e,this.trigger=n,this.scheduler=a,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,rS(this,s)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,Of();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed){if(n.computed.effect._dirtyLevel===2)return!0;if(pk(n.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),zf()}return this._dirtyLevel>=5}set dirty(e){this._dirtyLevel=e?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=bf,n=Rp;try{return bf=!0,Rp=this,this._runnings++,gC(this),this.fn()}finally{yC(this),this._runnings--,Rp=n,bf=e}}stop(){this.active&&(gC(this),yC(this),this.onStop&&this.onStop(),this.active=!1)}}function pk(t){return t.value}function gC(t){t._trackId++,t._depsLength=0}function yC(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)oS(t.deps[e],t);t.deps.length=t._depsLength}}function oS(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}function mk(t,e){t.effect instanceof fg&&(t=t.effect.fn);const n=new fg(t,Il,()=>{n.dirty&&n.run()});e&&(Ji(n,e),e.scope&&rS(n,e.scope)),(!e||!e.lazy)&&n.run();const a=n.run.bind(n);return a.effect=n,a}function gk(t){t.effect.stop()}let bf=!0,HA=0;const aS=[];function Of(){aS.push(bf),bf=!1}function zf(){const t=aS.pop();bf=t===void 0?!0:t}function $w(){HA++}function Zw(){for(HA--;!HA&&GA.length;)GA.shift()()}function sS(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const a=t.deps[t._depsLength];a!==e?(a&&oS(a,t),t.deps[t._depsLength++]=e):t._depsLength++}}const GA=[];function lS(t,e,n){$w();for(const a of t.keys()){if(!t.computed&&a.computed&&t.get(a)===a._trackId&&a._runnings>0){a._dirtyLevel=2;continue}let s;a._dirtyLevel<e&&(s??(s=t.get(a)===a._trackId))&&(a._shouldSchedule||(a._shouldSchedule=a._dirtyLevel===0),a.computed&&a._dirtyLevel===2&&(a._shouldSchedule=!0),a._dirtyLevel=e),a._shouldSchedule&&(s??(s=t.get(a)===a._trackId))&&(a.trigger(),(!a._runnings||a.allowRecurse)&&a._dirtyLevel!==3&&(a._shouldSchedule=!1,a.scheduler&&GA.push(a.scheduler)))}Zw()}const cS=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},u1=new WeakMap,Dp=Symbol(""),$A=Symbol("");function Sl(t,e,n){if(bf&&Rp){let a=u1.get(t);a||u1.set(t,a=new Map);let s=a.get(n);s||a.set(n,s=cS(()=>a.delete(n))),sS(Rp,s)}}function cd(t,e,n,a,s,d){const l=u1.get(t);if(!l)return;let o=[];if(e==="clear")o=[...l.values()];else if(n==="length"&&ar(t)){const g=Number(a);l.forEach((_,I)=>{(I==="length"||!fd(I)&&I>=g)&&o.push(_)})}else switch(n!==void 0&&o.push(l.get(n)),e){case"add":ar(t)?Uw(n)&&o.push(l.get("length")):(o.push(l.get(Dp)),eg(t)&&o.push(l.get($A)));break;case"delete":ar(t)||(o.push(l.get(Dp)),eg(t)&&o.push(l.get($A)));break;case"set":eg(t)&&o.push(l.get(Dp));break}$w();for(const g of o)g&&lS(g,5);Zw()}function yk(t,e){const n=u1.get(t);return n&&n.get(e)}const vk=V1("__proto__,__v_isRef,__isVue"),uS=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(fd)),vC=_k();function _k(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const a=ui(this);for(let d=0,l=this.length;d<l;d++)Sl(a,"get",d+"");const s=a[e](...n);return s===-1||s===!1?a[e](...n.map(ui)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Of(),$w();const a=ui(this)[e].apply(this,n);return Zw(),zf(),a}}),t}function bk(t){fd(t)||(t=String(t));const e=ui(this);return Sl(e,"has",t),e.hasOwnProperty(t)}class hS{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,a){const s=this._isReadonly,d=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return d;if(n==="__v_raw")return a===(s?d?yS:gS:d?mS:pS).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(a)?e:void 0;const l=ar(e);if(!s){if(l&&hi(vC,n))return Reflect.get(vC,n,a);if(n==="hasOwnProperty")return bk}const o=Reflect.get(e,n,a);return(fd(n)?uS.has(n):vk(n))||(s||Sl(e,"get",n),d)?o:po(o)?l&&Uw(n)?o:o.value:ji(o)?s?jy(o):ls(o):o}}class dS extends hS{constructor(e=!1){super(!1,e)}set(e,n,a,s){let d=e[n];if(!this._isShallow){const g=pg(d);if(!_y(a)&&!pg(a)&&(d=ui(d),a=ui(a)),!ar(e)&&po(d)&&!po(a))return g?!1:(d.value=a,!0)}const l=ar(e)&&Uw(n)?Number(n)<e.length:hi(e,n),o=Reflect.set(e,n,a,s);return e===ui(s)&&(l?Bu(a,d)&&cd(e,"set",n,a):cd(e,"add",n,a)),o}deleteProperty(e,n){const a=hi(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&a&&cd(e,"delete",n,void 0),s}has(e,n){const a=Reflect.has(e,n);return(!fd(n)||!uS.has(n))&&Sl(e,"has",n),a}ownKeys(e){return Sl(e,"iterate",ar(e)?"length":Dp),Reflect.ownKeys(e)}}class fS extends hS{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const xk=new dS,Ak=new fS,wk=new dS(!0),Ck=new fS(!0),Ww=t=>t,G1=t=>Reflect.getPrototypeOf(t);function x_(t,e,n=!1,a=!1){t=t.__v_raw;const s=ui(t),d=ui(e);n||(Bu(e,d)&&Sl(s,"get",e),Sl(s,"get",d));const{has:l}=G1(s),o=a?Ww:n?Yw:by;if(l.call(s,e))return o(t.get(e));if(l.call(s,d))return o(t.get(d));t!==s&&t.get(e)}function A_(t,e=!1){const n=this.__v_raw,a=ui(n),s=ui(t);return e||(Bu(t,s)&&Sl(a,"has",t),Sl(a,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function w_(t,e=!1){return t=t.__v_raw,!e&&Sl(ui(t),"iterate",Dp),Reflect.get(t,"size",t)}function _C(t){t=ui(t);const e=ui(this);return G1(e).has.call(e,t)||(e.add(t),cd(e,"add",t,t)),this}function bC(t,e){e=ui(e);const n=ui(this),{has:a,get:s}=G1(n);let d=a.call(n,t);d||(t=ui(t),d=a.call(n,t));const l=s.call(n,t);return n.set(t,e),d?Bu(e,l)&&cd(n,"set",t,e):cd(n,"add",t,e),this}function xC(t){const e=ui(this),{has:n,get:a}=G1(e);let s=n.call(e,t);s||(t=ui(t),s=n.call(e,t)),a&&a.call(e,t);const d=e.delete(t);return s&&cd(e,"delete",t,void 0),d}function AC(){const t=ui(this),e=t.size!==0,n=t.clear();return e&&cd(t,"clear",void 0,void 0),n}function C_(t,e){return function(a,s){const d=this,l=d.__v_raw,o=ui(l),g=e?Ww:t?Yw:by;return!t&&Sl(o,"iterate",Dp),l.forEach((_,I)=>a.call(s,g(_),g(I),d))}}function I_(t,e,n){return function(...a){const s=this.__v_raw,d=ui(s),l=eg(d),o=t==="entries"||t===Symbol.iterator&&l,g=t==="keys"&&l,_=s[t](...a),I=n?Ww:e?Yw:by;return!e&&Sl(d,"iterate",g?$A:Dp),{next(){const{value:C,done:E}=_.next();return E?{value:C,done:E}:{value:o?[I(C[0]),I(C[1])]:I(C),done:E}},[Symbol.iterator](){return this}}}}function af(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ik(){const t={get(d){return x_(this,d)},get size(){return w_(this)},has:A_,add:_C,set:bC,delete:xC,clear:AC,forEach:C_(!1,!1)},e={get(d){return x_(this,d,!1,!0)},get size(){return w_(this)},has:A_,add:_C,set:bC,delete:xC,clear:AC,forEach:C_(!1,!0)},n={get(d){return x_(this,d,!0)},get size(){return w_(this,!0)},has(d){return A_.call(this,d,!0)},add:af("add"),set:af("set"),delete:af("delete"),clear:af("clear"),forEach:C_(!0,!1)},a={get(d){return x_(this,d,!0,!0)},get size(){return w_(this,!0)},has(d){return A_.call(this,d,!0)},add:af("add"),set:af("set"),delete:af("delete"),clear:af("clear"),forEach:C_(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{t[d]=I_(d,!1,!1),n[d]=I_(d,!0,!1),e[d]=I_(d,!1,!0),a[d]=I_(d,!0,!0)}),[t,n,e,a]}const[Mk,Sk,Ek,Tk]=Ik();function $1(t,e){const n=e?t?Tk:Ek:t?Sk:Mk;return(a,s,d)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?a:Reflect.get(hi(n,s)&&s in a?n:a,s,d)}const Pk={get:$1(!1,!1)},kk={get:$1(!1,!0)},Lk={get:$1(!0,!1)},Rk={get:$1(!0,!0)},pS=new WeakMap,mS=new WeakMap,gS=new WeakMap,yS=new WeakMap;function Dk(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ok(t){return t.__v_skip||!Object.isExtensible(t)?0:Dk(ek(t))}function ls(t){return pg(t)?t:Z1(t,!1,xk,Pk,pS)}function qw(t){return Z1(t,!1,wk,kk,mS)}function jy(t){return Z1(t,!0,Ak,Lk,gS)}function zk(t){return Z1(t,!0,Ck,Rk,yS)}function Z1(t,e,n,a,s){if(!ji(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const d=s.get(t);if(d)return d;const l=Ok(t);if(l===0)return t;const o=new Proxy(t,l===2?a:n);return s.set(t,o),o}function ig(t){return pg(t)?ig(t.__v_raw):!!(t&&t.__v_isReactive)}function pg(t){return!!(t&&t.__v_isReadonly)}function _y(t){return!!(t&&t.__v_isShallow)}function Kw(t){return t?!!t.__v_raw:!1}function ui(t){const e=t&&t.__v_raw;return e?ui(e):t}function vS(t){return Object.isExtensible(t)&&JM(t,"__v_skip",!0),t}const by=t=>ji(t)?ls(t):t,Yw=t=>ji(t)?jy(t):t;class _S{constructor(e,n,a,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new fg(()=>e(this._value),()=>og(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=a}get value(){const e=ui(this);return(!e._cacheable||e.effect.dirty)&&Bu(e._value,e._value=e.effect.run())&&og(e,5),Xw(e),e.effect._dirtyLevel>=2&&og(e,3),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Fk(t,e,n=!1){let a,s;const d=Mr(t);return d?(a=t,s=Il):(a=t.get,s=t.set),new _S(a,s,d||!s,n)}function Xw(t){var e;bf&&Rp&&(t=ui(t),sS(Rp,(e=t.dep)!=null?e:t.dep=cS(()=>t.dep=void 0,t instanceof _S?t:void 0)))}function og(t,e=5,n,a){t=ui(t);const s=t.dep;s&&lS(s,e)}function po(t){return!!(t&&t.__v_isRef===!0)}function gn(t){return bS(t,!1)}function Mg(t){return bS(t,!0)}function bS(t,e){return po(t)?t:new Bk(t,e)}class Bk{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:ui(e),this._value=n?e:by(e)}get value(){return Xw(this),this._value}set value(e){const n=this.__v_isShallow||_y(e)||pg(e);e=n?e:ui(e),Bu(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=n?e:by(e),og(this,5))}}function Nk(t){og(t,5)}function ct(t){return po(t)?t.value:t}function jk(t){return Mr(t)?t():ct(t)}const Vk={get:(t,e,n)=>ct(Reflect.get(t,e,n)),set:(t,e,n,a)=>{const s=t[e];return po(s)&&!po(n)?(s.value=n,!0):Reflect.set(t,e,n,a)}};function Qw(t){return ig(t)?t:new Proxy(t,Vk)}class Uk{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:a}=e(()=>Xw(this),()=>og(this));this._get=n,this._set=a}get value(){return this._get()}set value(e){this._set(e)}}function xS(t){return new Uk(t)}function Hk(t){const e=ar(t)?new Array(t.length):{};for(const n in t)e[n]=AS(t,n);return e}class Gk{constructor(e,n,a){this._object=e,this._key=n,this._defaultValue=a,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return yk(ui(this._object),this._key)}}class $k{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Zk(t,e,n){return po(t)?t:Mr(t)?new $k(t):ji(t)&&arguments.length>1?AS(t,e,n):gn(t)}function AS(t,e,n){const a=t[e];return po(a)?a:new Gk(t,e,n)}const Wk={GET:"get",HAS:"has",ITERATE:"iterate"},qk={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"};/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Kk(t,e){}const Yk={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER"},Xk={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function ud(t,e,n,a){try{return a?t(...a):t()}catch(s){$p(s,e,n)}}function mc(t,e,n,a){if(Mr(t)){const s=ud(t,e,n,a);return s&&Vw(s)&&s.catch(d=>{$p(d,e,n)}),s}if(ar(t)){const s=[];for(let d=0;d<t.length;d++)s.push(mc(t[d],e,n,a));return s}}function $p(t,e,n,a=!0){const s=e?e.vnode:null;if(e){let d=e.parent;const l=e.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;for(;d;){const _=d.ec;if(_){for(let I=0;I<_.length;I++)if(_[I](t,l,o)===!1)return}d=d.parent}const g=e.appContext.config.errorHandler;if(g){Of(),ud(g,null,10,[t,l,o]),zf();return}}Qk(t,n,s,a)}function Qk(t,e,n,a=!0){console.error(t)}let xy=!1,ZA=!1;const ws=[];let vh=0;const ag=[];let uf=null,Tp=0;const wS=Promise.resolve();let Jw=null;function El(t){const e=Jw||wS;return t?e.then(this?t.bind(this):t):e}function Jk(t){let e=vh+1,n=ws.length;for(;e<n;){const a=e+n>>>1,s=ws[a],d=Ay(s);d<t||d===t&&s.pre?e=a+1:n=a}return e}function W1(t){(!ws.length||!ws.includes(t,xy&&t.allowRecurse?vh+1:vh))&&(t.id==null?ws.push(t):ws.splice(Jk(t.id),0,t),CS())}function CS(){!xy&&!ZA&&(ZA=!0,Jw=wS.then(IS))}function t5(t){const e=ws.indexOf(t);e>vh&&ws.splice(e,1)}function h1(t){ar(t)?ag.push(...t):(!uf||!uf.includes(t,t.allowRecurse?Tp+1:Tp))&&ag.push(t),CS()}function wC(t,e,n=xy?vh+1:0){for(;n<ws.length;n++){const a=ws[n];if(a&&a.pre){if(t&&a.id!==t.uid)continue;ws.splice(n,1),n--,a()}}}function d1(t){if(ag.length){const e=[...new Set(ag)].sort((n,a)=>Ay(n)-Ay(a));if(ag.length=0,uf){uf.push(...e);return}for(uf=e,Tp=0;Tp<uf.length;Tp++){const n=uf[Tp];n.active!==!1&&n()}uf=null,Tp=0}}const Ay=t=>t.id==null?1/0:t.id,e5=(t,e)=>{const n=Ay(t)-Ay(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function IS(t){ZA=!1,xy=!0,ws.sort(e5);try{for(vh=0;vh<ws.length;vh++){const e=ws[vh];e&&e.active!==!1&&ud(e,null,14)}}finally{vh=0,ws.length=0,d1(),xy=!1,Jw=null,(ws.length||ag.length)&&IS()}}let Um,M_=[];function MS(t,e){var n,a;Um=t,Um?(Um.enabled=!0,M_.forEach(({event:s,args:d})=>Um.emit(s,...d)),M_=[]):typeof window<"u"&&window.HTMLElement&&!((a=(n=window.navigator)==null?void 0:n.userAgent)!=null&&a.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(d=>{MS(d,e)}),setTimeout(()=>{Um||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,M_=[])},3e3)):M_=[]}function n5(t,e,...n){if(t.isUnmounted)return;const a=t.vnode.props||zi;let s=n;const d=e.startsWith("update:"),l=d&&e.slice(7);if(l&&l in a){const I=`${l==="modelValue"?"model":l}Modifiers`,{number:C,trim:E}=a[I]||zi;E&&(s=n.map(S=>fo(S)?S.trim():S)),C&&(s=n.map(l1))}let o,g=a[o=ey(e)]||a[o=ey(el(e))];!g&&d&&(g=a[o=ey(pc(e))]),g&&mc(g,t,6,s);const _=a[o+"Once"];if(_){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,mc(_,t,6,s)}}function SS(t,e,n=!1){const a=e.emitsCache,s=a.get(t);if(s!==void 0)return s;const d=t.emits;let l={},o=!1;if(!Mr(t)){const g=_=>{const I=SS(_,e,!0);I&&(o=!0,Ji(l,I))};!n&&e.mixins.length&&e.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}return!d&&!o?(ji(t)&&a.set(t,null),null):(ar(d)?d.forEach(g=>l[g]=null):Ji(l,d),ji(t)&&a.set(t,l),l)}function q1(t,e){return!t||!By(e)?!1:(e=e.slice(2).replace(/Once$/,""),hi(t,e[0].toLowerCase()+e.slice(1))||hi(t,pc(e))||hi(t,e))}let Ca=null,K1=null;function wy(t){const e=Ca;return Ca=t,K1=t&&t.type.__scopeId||null,e}function _c(t){K1=t}function bc(){K1=null}const r5=t=>Se;function Se(t,e=Ca,n){if(!e||t._n)return t;const a=(...s)=>{a._d&&nw(-1);const d=wy(e);let l;try{l=t(...s)}finally{wy(d),a._d&&nw(1)}return l};return a._n=!0,a._c=!0,a._d=!0,a}function $_(t){const{type:e,vnode:n,proxy:a,withProxy:s,propsOptions:[d],slots:l,attrs:o,emit:g,render:_,renderCache:I,props:C,data:E,setupState:S,ctx:k,inheritAttrs:D}=t,N=wy(t);let U,F;try{if(n.shapeFlag&4){const $=s||a,K=$;U=fc(_.call(K,$,I,C,S,E,k)),F=o}else{const $=e;U=fc($.length>1?$(C,{attrs:o,slots:l,emit:g}):$(C,null)),F=e.props?o:o5(o)}}catch($){iy.length=0,$p($,t,1),U=te(ja)}let j=U;if(F&&D!==!1){const $=Object.keys(F),{shapeFlag:K}=j;$.length&&K&7&&(d&&$.some(Nw)&&(F=a5(F,d)),j=Ah(j,F,!1,!0))}return n.dirs&&(j=Ah(j,null,!1,!0),j.dirs=j.dirs?j.dirs.concat(n.dirs):n.dirs),n.transition&&(j.transition=n.transition),U=j,wy(N),U}function i5(t,e=!0){let n;for(let a=0;a<t.length;a++){const s=t[a];if(Mf(s)){if(s.type!==ja||s.children==="v-if"){if(n)return;n=s}}else return}return n}const o5=t=>{let e;for(const n in t)(n==="class"||n==="style"||By(n))&&((e||(e={}))[n]=t[n]);return e},a5=(t,e)=>{const n={};for(const a in t)(!Nw(a)||!(a.slice(9)in e))&&(n[a]=t[a]);return n};function s5(t,e,n){const{props:a,children:s,component:d}=t,{props:l,children:o,patchFlag:g}=e,_=d.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&g>=0){if(g&1024)return!0;if(g&16)return a?CC(a,l,_):!!l;if(g&8){const I=e.dynamicProps;for(let C=0;C<I.length;C++){const E=I[C];if(l[E]!==a[E]&&!q1(_,E))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:a===l?!1:a?l?CC(a,l,_):!0:!!l;return!1}function CC(t,e,n){const a=Object.keys(e);if(a.length!==Object.keys(t).length)return!0;for(let s=0;s<a.length;s++){const d=a[s];if(e[d]!==t[d]&&!q1(n,d))return!0}return!1}function t2({vnode:t,parent:e},n){for(;e;){const a=e.subTree;if(a.suspense&&a.suspense.activeBranch===t&&(a.el=t.el),a===t)(t=e.vnode).el=n,e=e.parent;else break}}const e2="components",l5="directives";function Js(t,e){return n2(e2,t,!0,e)||t}const ES=Symbol.for("v-ndc");function sa(t){return fo(t)?n2(e2,t,!1)||t:t||ES}function c5(t){return n2(l5,t)}function n2(t,e,n=!0,a=!1){const s=Ca||wa;if(s){const d=s.type;if(t===e2){const o=sw(d,!1);if(o&&(o===e||o===el(e)||o===Ny(el(e))))return d}const l=IC(s[t]||d[t],e)||IC(s.appContext[t],e);return!l&&a?d:l}}function IC(t,e){return t&&(t[e]||t[el(e)]||t[Ny(el(e))])}const WA=t=>t.__isSuspense;let qA=0;const u5={name:"Suspense",__isSuspense:!0,process(t,e,n,a,s,d,l,o,g,_){if(t==null)d5(e,n,a,s,d,l,o,g,_);else{if(d&&d.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}f5(t,e,n,a,s,l,o,g,_)}},hydrate:p5,create:r2,normalize:m5},h5=u5;function Cy(t,e){const n=t.props&&t.props[e];Mr(n)&&n()}function d5(t,e,n,a,s,d,l,o,g){const{p:_,o:{createElement:I}}=g,C=I("div"),E=t.suspense=r2(t,s,a,e,C,n,d,l,o,g);_(null,E.pendingBranch=t.ssContent,C,null,a,E,d,l),E.deps>0?(Cy(t,"onPending"),Cy(t,"onFallback"),_(null,t.ssFallback,e,n,a,null,d,l),sg(E,t.ssFallback)):E.resolve(!1,!0)}function f5(t,e,n,a,s,d,l,o,{p:g,um:_,o:{createElement:I}}){const C=e.suspense=t.suspense;C.vnode=e,e.el=t.el;const E=e.ssContent,S=e.ssFallback,{activeBranch:k,pendingBranch:D,isInFallback:N,isHydrating:U}=C;if(D)C.pendingBranch=E,Ou(E,D)?(g(D,E,C.hiddenContainer,null,s,C,d,l,o),C.deps<=0?C.resolve():N&&(U||(g(k,S,n,a,s,null,d,l,o),sg(C,S)))):(C.pendingId=qA++,U?(C.isHydrating=!1,C.activeBranch=D):_(D,s,C),C.deps=0,C.effects.length=0,C.hiddenContainer=I("div"),N?(g(null,E,C.hiddenContainer,null,s,C,d,l,o),C.deps<=0?C.resolve():(g(k,S,n,a,s,null,d,l,o),sg(C,S))):k&&Ou(E,k)?(g(k,E,n,a,s,C,d,l,o),C.resolve(!0)):(g(null,E,C.hiddenContainer,null,s,C,d,l,o),C.deps<=0&&C.resolve()));else if(k&&Ou(E,k))g(k,E,n,a,s,C,d,l,o),sg(C,E);else if(Cy(e,"onPending"),C.pendingBranch=E,E.shapeFlag&512?C.pendingId=E.component.suspenseId:C.pendingId=qA++,g(null,E,C.hiddenContainer,null,s,C,d,l,o),C.deps<=0)C.resolve();else{const{timeout:F,pendingId:j}=C;F>0?setTimeout(()=>{C.pendingId===j&&C.fallback(S)},F):F===0&&C.fallback(S)}}function r2(t,e,n,a,s,d,l,o,g,_,I=!1){const{p:C,m:E,um:S,n:k,o:{parentNode:D,remove:N}}=_;let U;const F=g5(t);F&&e&&e.pendingBranch&&(U=e.pendingId,e.deps++);const j=t.props?c1(t.props.timeout):void 0,$=d,K={vnode:t,parent:e,parentComponent:n,namespace:l,container:a,hiddenContainer:s,deps:0,pendingId:qA++,timeout:typeof j=="number"?j:-1,activeBranch:null,pendingBranch:null,isInFallback:!I,isHydrating:I,isUnmounted:!1,effects:[],resolve(tt=!1,it=!1){const{vnode:et,activeBranch:q,pendingBranch:ut,pendingId:Ct,effects:ot,parentComponent:bt,container:X}=K;let Wt=!1;K.isHydrating?K.isHydrating=!1:tt||(Wt=q&&ut.transition&&ut.transition.mode==="out-in",Wt&&(q.transition.afterLeave=()=>{Ct===K.pendingId&&(E(ut,X,d===$?k(q):d,0),h1(ot))}),q&&(D(q.el)!==K.hiddenContainer&&(d=k(q)),S(q,bt,K,!0)),Wt||E(ut,X,d,0)),sg(K,ut),K.pendingBranch=null,K.isInFallback=!1;let Vt=K.parent,Bt=!1;for(;Vt;){if(Vt.pendingBranch){Vt.effects.push(...ot),Bt=!0;break}Vt=Vt.parent}!Bt&&!Wt&&h1(ot),K.effects=[],F&&e&&e.pendingBranch&&U===e.pendingId&&(e.deps--,e.deps===0&&!it&&e.resolve()),Cy(et,"onResolve")},fallback(tt){if(!K.pendingBranch)return;const{vnode:it,activeBranch:et,parentComponent:q,container:ut,namespace:Ct}=K;Cy(it,"onFallback");const ot=k(et),bt=()=>{K.isInFallback&&(C(null,tt,ut,ot,q,null,Ct,o,g),sg(K,tt))},X=tt.transition&&tt.transition.mode==="out-in";X&&(et.transition.afterLeave=bt),K.isInFallback=!0,S(et,q,null,!0),X||bt()},move(tt,it,et){K.activeBranch&&E(K.activeBranch,tt,it,et),K.container=tt},next(){return K.activeBranch&&k(K.activeBranch)},registerDep(tt,it,et){const q=!!K.pendingBranch;q&&K.deps++;const ut=tt.vnode.el;tt.asyncDep.catch(Ct=>{$p(Ct,tt,0)}).then(Ct=>{if(tt.isUnmounted||K.isUnmounted||K.pendingId!==tt.suspenseId)return;tt.asyncResolved=!0;const{vnode:ot}=tt;ow(tt,Ct,!1),ut&&(ot.el=ut);const bt=!ut&&tt.subTree.el;it(tt,ot,D(ut||tt.subTree.el),ut?null:k(tt.subTree),K,l,et),bt&&N(bt),t2(tt,ot.el),q&&--K.deps===0&&K.resolve()})},unmount(tt,it){K.isUnmounted=!0,K.activeBranch&&S(K.activeBranch,n,tt,it),K.pendingBranch&&S(K.pendingBranch,n,tt,it)}};return K}function p5(t,e,n,a,s,d,l,o,g){const _=e.suspense=r2(e,a,n,t.parentNode,document.createElement("div"),null,s,d,l,o,!0),I=g(t,_.pendingBranch=e.ssContent,n,_,d,l);return _.deps===0&&_.resolve(!1,!0),I}function m5(t){const{shapeFlag:e,children:n}=t,a=e&32;t.ssContent=MC(a?n.default:n),t.ssFallback=a?MC(n.fallback):te(ja)}function MC(t){let e;if(Mr(t)){const n=Np&&t._c;n&&(t._d=!1,St()),t=t(),n&&(t._d=!0,e=Ml,fE())}return ar(t)&&(t=i5(t)),t=fc(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function TS(t,e){e&&e.pendingBranch?ar(t)?e.effects.push(...t):e.effects.push(t):h1(t)}function sg(t,e){t.activeBranch=e;const{vnode:n,parentComponent:a}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,a&&a.subTree===n&&(a.vnode.el=s,t2(a,s))}function g5(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}function Y1(t,e,n=wa,a=!1){if(n){const s=n[t]||(n[t]=[]),d=e.__weh||(e.__weh=(...l)=>{Of();const o=jp(n),g=mc(e,n,t,l);return o(),zf(),g});return a?s.unshift(d):s.push(d),d}}const gd=t=>(e,n=wa)=>{(!Hy||t==="sp")&&Y1(t,(...a)=>e(...a),n)},PS=gd("bm"),mo=gd("m"),kS=gd("bu"),X1=gd("u"),Zp=gd("bum"),yd=gd("um"),LS=gd("sp"),RS=gd("rtg"),DS=gd("rtc");function OS(t,e=wa){Y1("ec",t,e)}function gc(t,e){if(Ca===null)return t;const n=Gy(Ca),a=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[d,l,o,g=zi]=e[s];d&&(Mr(d)&&(d={mounted:d,updated:d}),d.deep&&gf(l),a.push({dir:d,instance:n,value:l,oldValue:void 0,arg:o,modifiers:g}))}return t}function yh(t,e,n,a){const s=t.dirs,d=e&&e.dirs;for(let l=0;l<s.length;l++){const o=s[l];d&&(o.oldValue=d[l].value);let g=o.dir[a];g&&(Of(),mc(g,n,8,[t.el,o,t,e]),zf())}}function ki(t,e,n,a){let s;const d=n&&n[a];if(ar(t)||fo(t)){s=new Array(t.length);for(let l=0,o=t.length;l<o;l++)s[l]=e(t[l],l,void 0,d&&d[l])}else if(typeof t=="number"){s=new Array(t);for(let l=0;l<t;l++)s[l]=e(l+1,l,void 0,d&&d[l])}else if(ji(t))if(t[Symbol.iterator])s=Array.from(t,(l,o)=>e(l,o,void 0,d&&d[o]));else{const l=Object.keys(t);s=new Array(l.length);for(let o=0,g=l.length;o<g;o++){const _=l[o];s[o]=e(t[_],_,o,d&&d[o])}}else s=[];return n&&(n[a]=s),s}function y5(t,e){for(let n=0;n<e.length;n++){const a=e[n];if(ar(a))for(let s=0;s<a.length;s++)t[a[s].name]=a[s].fn;else a&&(t[a.name]=a.key?(...s)=>{const d=a.fn(...s);return d&&(d.key=a.key),d}:a.fn)}return t}/*! #__NO_SIDE_EFFECTS__ */function rr(t,e){return Mr(t)?Ji({name:t.name},e,{setup:t}):t}const Op=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function v5(t){Mr(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:a,delay:s=200,timeout:d,suspensible:l=!0,onError:o}=t;let g=null,_,I=0;const C=()=>(I++,g=null,E()),E=()=>{let S;return g||(S=g=e().catch(k=>{if(k=k instanceof Error?k:new Error(String(k)),o)return new Promise((D,N)=>{o(k,()=>D(C()),()=>N(k),I+1)});throw k}).then(k=>S!==g&&g?g:(k&&(k.__esModule||k[Symbol.toStringTag]==="Module")&&(k=k.default),_=k,k)))};return rr({name:"AsyncComponentWrapper",__asyncLoader:E,get __asyncResolved(){return _},setup(){const S=wa;if(_)return()=>Zx(_,S);const k=F=>{g=null,$p(F,S,13,!a)};if(l&&S.suspense||Hy)return E().then(F=>()=>Zx(F,S)).catch(F=>(k(F),()=>a?te(a,{error:F}):null));const D=gn(!1),N=gn(),U=gn(!!s);return s&&setTimeout(()=>{U.value=!1},s),d!=null&&setTimeout(()=>{if(!D.value&&!N.value){const F=new Error(`Async component timed out after ${d}ms.`);k(F),N.value=F}},d),E().then(()=>{D.value=!0,S.parent&&Uy(S.parent.vnode)&&(S.parent.effect.dirty=!0,W1(S.parent.update))}).catch(F=>{k(F),N.value=F}),()=>{if(D.value&&_)return Zx(_,S);if(N.value&&a)return te(a,{error:N.value});if(n&&!U.value)return te(n)}}})}function Zx(t,e){const{ref:n,props:a,children:s,ce:d}=e.vnode,l=te(t,a,s);return l.ref=n,l.ce=d,delete e.vnode.ce,l}function qn(t,e,n={},a,s){if(Ca.isCE||Ca.parent&&Op(Ca.parent)&&Ca.parent.isCE)return e!=="default"&&(n.name=e),te("slot",n,a&&a());let d=t[e];d&&d._c&&(d._d=!1),St();const l=d&&zS(d(n)),o=tn(mr,{key:n.key||l&&l.key||`_${e}`},l||(a?a():[]),l&&t._===1?64:-2);return!s&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),d&&d._c&&(d._d=!0),o}function zS(t){return t.some(e=>Mf(e)?!(e.type===ja||e.type===mr&&!zS(e.children)):!0)?t:null}function _5(t,e){const n={};for(const a in t)n[e&&/[A-Z]/.test(a)?`on:${a}`:ey(a)]=t[a];return n}const KA=t=>t?yE(t)?Gy(t):KA(t.parent):null,ny=Ji(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>KA(t.parent),$root:t=>KA(t.root),$emit:t=>t.emit,$options:t=>i2(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,W1(t.update)}),$nextTick:t=>t.n||(t.n=El.bind(t.proxy)),$watch:t=>K5.bind(t)}),Wx=(t,e)=>t!==zi&&!t.__isScriptSetup&&hi(t,e),YA={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:a,data:s,props:d,accessCache:l,type:o,appContext:g}=t;let _;if(e[0]!=="$"){const S=l[e];if(S!==void 0)switch(S){case 1:return a[e];case 2:return s[e];case 4:return n[e];case 3:return d[e]}else{if(Wx(a,e))return l[e]=1,a[e];if(s!==zi&&hi(s,e))return l[e]=2,s[e];if((_=t.propsOptions[0])&&hi(_,e))return l[e]=3,d[e];if(n!==zi&&hi(n,e))return l[e]=4,n[e];XA&&(l[e]=0)}}const I=ny[e];let C,E;if(I)return e==="$attrs"&&Sl(t.attrs,"get",""),I(t);if((C=o.__cssModules)&&(C=C[e]))return C;if(n!==zi&&hi(n,e))return l[e]=4,n[e];if(E=g.config.globalProperties,hi(E,e))return E[e]},set({_:t},e,n){const{data:a,setupState:s,ctx:d}=t;return Wx(s,e)?(s[e]=n,!0):a!==zi&&hi(a,e)?(a[e]=n,!0):hi(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(d[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:a,appContext:s,propsOptions:d}},l){let o;return!!n[l]||t!==zi&&hi(t,l)||Wx(e,l)||(o=d[0])&&hi(o,l)||hi(a,l)||hi(ny,l)||hi(s.config.globalProperties,l)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:hi(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},b5=Ji({},YA,{get(t,e){if(e!==Symbol.unscopables)return YA.get(t,e,t)},has(t,e){return e[0]!=="_"&&!ok(e)}});function x5(){return null}function A5(){return null}function w5(t){}function C5(t){}function I5(){return null}function M5(){}function S5(t,e){return null}function FS(){return BS().slots}function E5(){return BS().attrs}function BS(){const t=xc();return t.setupContext||(t.setupContext=bE(t))}function Iy(t){return ar(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function T5(t,e){const n=Iy(t);for(const a in e){if(a.startsWith("__skip"))continue;let s=n[a];s?ar(s)||Mr(s)?s=n[a]={type:s,default:e[a]}:s.default=e[a]:s===null&&(s=n[a]={default:e[a]}),s&&e[`__skip_${a}`]&&(s.skipFactory=!0)}return n}function to(t,e){return!t||!e?t||e:ar(t)&&ar(e)?t.concat(e):Ji({},Iy(t),Iy(e))}function P5(t,e){const n={};for(const a in t)e.includes(a)||Object.defineProperty(n,a,{enumerable:!0,get:()=>t[a]});return n}function k5(t){const e=xc();let n=t();return iw(),Vw(n)&&(n=n.catch(a=>{throw jp(e),a})),[n,()=>jp(e)]}let XA=!0;function L5(t){const e=i2(t),n=t.proxy,a=t.ctx;XA=!1,e.beforeCreate&&SC(e.beforeCreate,t,"bc");const{data:s,computed:d,methods:l,watch:o,provide:g,inject:_,created:I,beforeMount:C,mounted:E,beforeUpdate:S,updated:k,activated:D,deactivated:N,beforeDestroy:U,beforeUnmount:F,destroyed:j,unmounted:$,render:K,renderTracked:tt,renderTriggered:it,errorCaptured:et,serverPrefetch:q,expose:ut,inheritAttrs:Ct,components:ot,directives:bt,filters:X}=e;if(_&&R5(_,a,null),l)for(const Bt in l){const ae=l[Bt];Mr(ae)&&(a[Bt]=ae.bind(n))}if(s){const Bt=s.call(n,n);ji(Bt)&&(t.data=ls(Bt))}if(XA=!0,d)for(const Bt in d){const ae=d[Bt],ye=Mr(ae)?ae.bind(n,n):Mr(ae.get)?ae.get.bind(n,n):Il,en=!Mr(ae)&&Mr(ae.set)?ae.set.bind(n):Il,Jt=bn({get:ye,set:en});Object.defineProperty(a,Bt,{enumerable:!0,configurable:!0,get:()=>Jt.value,set:Gt=>Jt.value=Gt})}if(o)for(const Bt in o)NS(o[Bt],a,n,Bt);if(g){const Bt=Mr(g)?g.call(n):g;Reflect.ownKeys(Bt).forEach(ae=>{xf(ae,Bt[ae])})}I&&SC(I,t,"c");function Vt(Bt,ae){ar(ae)?ae.forEach(ye=>Bt(ye.bind(n))):ae&&Bt(ae.bind(n))}if(Vt(PS,C),Vt(mo,E),Vt(kS,S),Vt(X1,k),Vt(aE,D),Vt(sE,N),Vt(OS,et),Vt(DS,tt),Vt(RS,it),Vt(Zp,F),Vt(yd,$),Vt(LS,q),ar(ut))if(ut.length){const Bt=t.exposed||(t.exposed={});ut.forEach(ae=>{Object.defineProperty(Bt,ae,{get:()=>n[ae],set:ye=>n[ae]=ye})})}else t.exposed||(t.exposed={});K&&t.render===Il&&(t.render=K),Ct!=null&&(t.inheritAttrs=Ct),ot&&(t.components=ot),bt&&(t.directives=bt)}function R5(t,e,n=Il){ar(t)&&(t=QA(t));for(const a in t){const s=t[a];let d;ji(s)?"default"in s?d=Va(s.from||a,s.default,!0):d=Va(s.from||a):d=Va(s),po(d)?Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>d.value,set:l=>d.value=l}):e[a]=d}}function SC(t,e,n){mc(ar(t)?t.map(a=>a.bind(e.proxy)):t.bind(e.proxy),e,n)}function NS(t,e,n,a){const s=a.includes(".")?oE(n,a):()=>n[a];if(fo(t)){const d=e[t];Mr(d)&&Xo(s,d)}else if(Mr(t))Xo(s,t.bind(n));else if(ji(t))if(ar(t))t.forEach(d=>NS(d,e,n,a));else{const d=Mr(t.handler)?t.handler.bind(n):e[t.handler];Mr(d)&&Xo(s,d,t)}}function i2(t){const e=t.type,{mixins:n,extends:a}=e,{mixins:s,optionsCache:d,config:{optionMergeStrategies:l}}=t.appContext,o=d.get(e);let g;return o?g=o:!s.length&&!n&&!a?g=e:(g={},s.length&&s.forEach(_=>f1(g,_,l,!0)),f1(g,e,l)),ji(e)&&d.set(e,g),g}function f1(t,e,n,a=!1){const{mixins:s,extends:d}=e;d&&f1(t,d,n,!0),s&&s.forEach(l=>f1(t,l,n,!0));for(const l in e)if(!(a&&l==="expose")){const o=D5[l]||n&&n[l];t[l]=o?o(t[l],e[l]):e[l]}return t}const D5={data:EC,props:TC,emits:TC,methods:Z0,computed:Z0,beforeCreate:Ys,created:Ys,beforeMount:Ys,mounted:Ys,beforeUpdate:Ys,updated:Ys,beforeDestroy:Ys,beforeUnmount:Ys,destroyed:Ys,unmounted:Ys,activated:Ys,deactivated:Ys,errorCaptured:Ys,serverPrefetch:Ys,components:Z0,directives:Z0,watch:z5,provide:EC,inject:O5};function EC(t,e){return e?t?function(){return Ji(Mr(t)?t.call(this,this):t,Mr(e)?e.call(this,this):e)}:e:t}function O5(t,e){return Z0(QA(t),QA(e))}function QA(t){if(ar(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ys(t,e){return t?[...new Set([].concat(t,e))]:e}function Z0(t,e){return t?Ji(Object.create(null),t,e):e}function TC(t,e){return t?ar(t)&&ar(e)?[...new Set([...t,...e])]:Ji(Object.create(null),Iy(t),Iy(e??{})):e}function z5(t,e){if(!t)return e;if(!e)return t;const n=Ji(Object.create(null),t);for(const a in e)n[a]=Ys(t[a],e[a]);return n}function jS(){return{app:null,config:{isNativeTag:Q3,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let F5=0;function B5(t,e){return function(a,s=null){Mr(a)||(a=Ji({},a)),s!=null&&!ji(s)&&(s=null);const d=jS(),l=new WeakSet;let o=!1;const g=d.app={_uid:F5++,_component:a,_props:s,_container:null,_context:d,_instance:null,version:AE,get config(){return d.config},set config(_){},use(_,...I){return l.has(_)||(_&&Mr(_.install)?(l.add(_),_.install(g,...I)):Mr(_)&&(l.add(_),_(g,...I))),g},mixin(_){return d.mixins.includes(_)||d.mixins.push(_),g},component(_,I){return I?(d.components[_]=I,g):d.components[_]},directive(_,I){return I?(d.directives[_]=I,g):d.directives[_]},mount(_,I,C){if(!o){const E=te(a,s);return E.appContext=d,C===!0?C="svg":C===!1&&(C=void 0),I&&e?e(E,_):t(E,_,C),o=!0,g._container=_,_.__vue_app__=g,Gy(E.component)}},unmount(){o&&(t(null,g._container),delete g._container.__vue_app__)},provide(_,I){return d.provides[_]=I,g},runWithContext(_){const I=lg;lg=g;try{return _()}finally{lg=I}}};return g}}let lg=null;function xf(t,e){if(wa){let n=wa.provides;const a=wa.parent&&wa.parent.provides;a===n&&(n=wa.provides=Object.create(a)),n[t]=e}}function Va(t,e,n=!1){const a=wa||Ca;if(a||lg){const s=a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:lg._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Mr(e)?e.call(a&&a.proxy):e}}function N5(){return!!(wa||Ca||lg)}const VS={},US=()=>Object.create(VS),HS=t=>Object.getPrototypeOf(t)===VS;function j5(t,e,n,a=!1){const s={},d=US();t.propsDefaults=Object.create(null),GS(t,e,s,d);for(const l in t.propsOptions[0])l in s||(s[l]=void 0);n?t.props=a?s:qw(s):t.type.props?t.props=s:t.props=d,t.attrs=d}function V5(t,e,n,a){const{props:s,attrs:d,vnode:{patchFlag:l}}=t,o=ui(s),[g]=t.propsOptions;let _=!1;if((a||l>0)&&!(l&16)){if(l&8){const I=t.vnode.dynamicProps;for(let C=0;C<I.length;C++){let E=I[C];if(q1(t.emitsOptions,E))continue;const S=e[E];if(g)if(hi(d,E))S!==d[E]&&(d[E]=S,_=!0);else{const k=el(E);s[k]=JA(g,o,k,S,t,!1)}else S!==d[E]&&(d[E]=S,_=!0)}}}else{GS(t,e,s,d)&&(_=!0);let I;for(const C in o)(!e||!hi(e,C)&&((I=pc(C))===C||!hi(e,I)))&&(g?n&&(n[C]!==void 0||n[I]!==void 0)&&(s[C]=JA(g,o,C,void 0,t,!0)):delete s[C]);if(d!==o)for(const C in d)(!e||!hi(e,C))&&(delete d[C],_=!0)}_&&cd(t.attrs,"set","")}function GS(t,e,n,a){const[s,d]=t.propsOptions;let l=!1,o;if(e)for(let g in e){if(ng(g))continue;const _=e[g];let I;s&&hi(s,I=el(g))?!d||!d.includes(I)?n[I]=_:(o||(o={}))[I]=_:q1(t.emitsOptions,g)||(!(g in a)||_!==a[g])&&(a[g]=_,l=!0)}if(d){const g=ui(n),_=o||zi;for(let I=0;I<d.length;I++){const C=d[I];n[C]=JA(s,g,C,_[C],t,!hi(_,C))}}return l}function JA(t,e,n,a,s,d){const l=t[n];if(l!=null){const o=hi(l,"default");if(o&&a===void 0){const g=l.default;if(l.type!==Function&&!l.skipFactory&&Mr(g)){const{propsDefaults:_}=s;if(n in _)a=_[n];else{const I=jp(s);a=_[n]=g.call(null,e),I()}}else a=g}l[0]&&(d&&!o?a=!1:l[1]&&(a===""||a===pc(n))&&(a=!0))}return a}function $S(t,e,n=!1){const a=e.propsCache,s=a.get(t);if(s)return s;const d=t.props,l={},o=[];let g=!1;if(!Mr(t)){const I=C=>{g=!0;const[E,S]=$S(C,e,!0);Ji(l,E),S&&o.push(...S)};!n&&e.mixins.length&&e.mixins.forEach(I),t.extends&&I(t.extends),t.mixins&&t.mixins.forEach(I)}if(!d&&!g)return ji(t)&&a.set(t,tg),tg;if(ar(d))for(let I=0;I<d.length;I++){const C=el(d[I]);PC(C)&&(l[C]=zi)}else if(d)for(const I in d){const C=el(I);if(PC(C)){const E=d[I],S=l[C]=ar(E)||Mr(E)?{type:E}:Ji({},E);if(S){const k=RC(Boolean,S.type),D=RC(String,S.type);S[0]=k>-1,S[1]=D<0||k<D,(k>-1||hi(S,"default"))&&o.push(C)}}}const _=[l,o];return ji(t)&&a.set(t,_),_}function PC(t){return t[0]!=="$"&&!ng(t)}function kC(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function LC(t,e){return kC(t)===kC(e)}function RC(t,e){return ar(e)?e.findIndex(n=>LC(n,t)):Mr(e)&&LC(e,t)?0:-1}const ZS=t=>t[0]==="_"||t==="$stable",o2=t=>ar(t)?t.map(fc):[fc(t)],U5=(t,e,n)=>{if(e._n)return e;const a=Se((...s)=>o2(e(...s)),n);return a._c=!1,a},WS=(t,e,n)=>{const a=t._ctx;for(const s in t){if(ZS(s))continue;const d=t[s];if(Mr(d))e[s]=U5(s,d,a);else if(d!=null){const l=o2(d);e[s]=()=>l}}},qS=(t,e)=>{const n=o2(e);t.slots.default=()=>n},H5=(t,e)=>{const n=t.slots=US();if(t.vnode.shapeFlag&32){const a=e._;a?(Ji(n,e),JM(n,"_",a,!0)):WS(e,n)}else e&&qS(t,e)},G5=(t,e,n)=>{const{vnode:a,slots:s}=t;let d=!0,l=zi;if(a.shapeFlag&32){const o=e._;o?n&&o===1?d=!1:(Ji(s,e),!n&&o===1&&delete s._):(d=!e.$stable,WS(e,s)),l=e}else e&&(qS(t,e),l={default:1});if(d)for(const o in s)!ZS(o)&&l[o]==null&&delete s[o]};function p1(t,e,n,a,s=!1){if(ar(t)){t.forEach((E,S)=>p1(E,e&&(ar(e)?e[S]:e),n,a,s));return}if(Op(a)&&!s)return;const d=a.shapeFlag&4?Gy(a.component):a.el,l=s?null:d,{i:o,r:g}=t,_=e&&e.r,I=o.refs===zi?o.refs={}:o.refs,C=o.setupState;if(_!=null&&_!==g&&(fo(_)?(I[_]=null,hi(C,_)&&(C[_]=null)):po(_)&&(_.value=null)),Mr(g))ud(g,o,12,[l,I]);else{const E=fo(g),S=po(g);if(E||S){const k=()=>{if(t.f){const D=E?hi(C,g)?C[g]:I[g]:g.value;s?ar(D)&&jw(D,d):ar(D)?D.includes(d)||D.push(d):E?(I[g]=[d],hi(C,g)&&(C[g]=I[g])):(g.value=[d],t.k&&(I[t.k]=g.value))}else E?(I[g]=l,hi(C,g)&&(C[g]=l)):S&&(g.value=l,t.k&&(I[t.k]=l))};l?(k.id=-1,Ba(k,n)):k()}}}let DC=!1;const Rm=()=>{DC||(console.error("Hydration completed but contains mismatches."),DC=!0)},$5=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",Z5=t=>t.namespaceURI.includes("MathML"),S_=t=>{if($5(t))return"svg";if(Z5(t))return"mathml"},E_=t=>t.nodeType===8;function W5(t){const{mt:e,p:n,o:{patchProp:a,createText:s,nextSibling:d,parentNode:l,remove:o,insert:g,createComment:_}}=t,I=(j,$)=>{if(!$.hasChildNodes()){n(null,j,$),d1(),$._vnode=j;return}C($.firstChild,j,null,null,null),d1(),$._vnode=j},C=(j,$,K,tt,it,et=!1)=>{et=et||!!$.dynamicChildren;const q=E_(j)&&j.data==="[",ut=()=>D(j,$,K,tt,it,q),{type:Ct,ref:ot,shapeFlag:bt,patchFlag:X}=$;let Wt=j.nodeType;$.el=j,X===-2&&(et=!1,$.dynamicChildren=null);let Vt=null;switch(Ct){case Bp:Wt!==3?$.children===""?(g($.el=s(""),l(j),j),Vt=j):Vt=ut():(j.data!==$.children&&(Rm(),j.data=$.children),Vt=d(j));break;case ja:F(j)?(Vt=d(j),U($.el=j.content.firstChild,j,K)):Wt!==8||q?Vt=ut():Vt=d(j);break;case zp:if(q&&(j=d(j),Wt=j.nodeType),Wt===1||Wt===3){Vt=j;const Bt=!$.children.length;for(let ae=0;ae<$.staticCount;ae++)Bt&&($.children+=Vt.nodeType===1?Vt.outerHTML:Vt.data),ae===$.staticCount-1&&($.anchor=Vt),Vt=d(Vt);return q?d(Vt):Vt}else ut();break;case mr:q?Vt=k(j,$,K,tt,it,et):Vt=ut();break;default:if(bt&1)(Wt!==1||$.type.toLowerCase()!==j.tagName.toLowerCase())&&!F(j)?Vt=ut():Vt=E(j,$,K,tt,it,et);else if(bt&6){$.slotScopeIds=it;const Bt=l(j);if(q?Vt=N(j):E_(j)&&j.data==="teleport start"?Vt=N(j,j.data,"teleport end"):Vt=d(j),e($,Bt,null,K,tt,S_(Bt),et),Op($)){let ae;q?(ae=te(mr),ae.anchor=Vt?Vt.previousSibling:Bt.lastChild):ae=j.nodeType===3?ho(""):te("div"),ae.el=j,$.component.subTree=ae}}else bt&64?Wt!==8?Vt=ut():Vt=$.type.hydrate(j,$,K,tt,it,et,t,S):bt&128&&(Vt=$.type.hydrate(j,$,K,tt,S_(l(j)),it,et,t,C))}return ot!=null&&p1(ot,null,tt,$),Vt},E=(j,$,K,tt,it,et)=>{et=et||!!$.dynamicChildren;const{type:q,props:ut,patchFlag:Ct,shapeFlag:ot,dirs:bt,transition:X}=$,Wt=q==="input"||q==="option";if(Wt||Ct!==-1){bt&&yh($,null,K,"created");let Vt=!1;if(F(j)){Vt=QS(tt,X)&&K&&K.vnode.props&&K.vnode.props.appear;const ae=j.content.firstChild;Vt&&X.beforeEnter(ae),U(ae,j,K),$.el=j=ae}if(ot&16&&!(ut&&(ut.innerHTML||ut.textContent))){let ae=S(j.firstChild,$,j,K,tt,it,et);for(;ae;){Rm();const ye=ae;ae=ae.nextSibling,o(ye)}}else ot&8&&j.textContent!==$.children&&(Rm(),j.textContent=$.children);if(ut)if(Wt||!et||Ct&48)for(const ae in ut)(Wt&&(ae.endsWith("value")||ae==="indeterminate")||By(ae)&&!ng(ae)||ae[0]===".")&&a(j,ae,null,ut[ae],void 0,void 0,K);else ut.onClick&&a(j,"onClick",null,ut.onClick,void 0,void 0,K);let Bt;(Bt=ut&&ut.onVnodeBeforeMount)&&Al(Bt,K,$),bt&&yh($,null,K,"beforeMount"),((Bt=ut&&ut.onVnodeMounted)||bt||Vt)&&TS(()=>{Bt&&Al(Bt,K,$),Vt&&X.enter(j),bt&&yh($,null,K,"mounted")},tt)}return j.nextSibling},S=(j,$,K,tt,it,et,q)=>{q=q||!!$.dynamicChildren;const ut=$.children,Ct=ut.length;for(let ot=0;ot<Ct;ot++){const bt=q?ut[ot]:ut[ot]=fc(ut[ot]);j?j=C(j,bt,tt,it,et,q):bt.type===Bp&&!bt.children?g(bt.el=s(""),K):(Rm(),n(null,bt,K,null,tt,it,S_(K),et))}return j},k=(j,$,K,tt,it,et)=>{const{slotScopeIds:q}=$;q&&(it=it?it.concat(q):q);const ut=l(j),Ct=S(d(j),$,ut,K,tt,it,et);return Ct&&E_(Ct)&&Ct.data==="]"?d($.anchor=Ct):(Rm(),g($.anchor=_("]"),ut,Ct),Ct)},D=(j,$,K,tt,it,et)=>{if(Rm(),$.el=null,et){const Ct=N(j);for(;;){const ot=d(j);if(ot&&ot!==Ct)o(ot);else break}}const q=d(j),ut=l(j);return o(j),n(null,$,ut,q,K,tt,S_(ut),it),q},N=(j,$="[",K="]")=>{let tt=0;for(;j;)if(j=d(j),j&&E_(j)&&(j.data===$&&tt++,j.data===K)){if(tt===0)return d(j);tt--}return j},U=(j,$,K)=>{const tt=$.parentNode;tt&&tt.replaceChild(j,$);let it=K;for(;it;)it.vnode.el===$&&(it.vnode.el=it.subTree.el=j),it=it.parent},F=j=>j.nodeType===1&&j.tagName.toLowerCase()==="template";return[I,C]}const Ba=TS;function KS(t){return XS(t)}function YS(t){return XS(t,W5)}function XS(t,e){const n=tS();n.__VUE__=!0;const{insert:a,remove:s,patchProp:d,createElement:l,createText:o,createComment:g,setText:_,setElementText:I,parentNode:C,nextSibling:E,setScopeId:S=Il,insertStaticContent:k}=t,D=(Tt,H,Rt,Pt=null,gt=null,yt=null,jt=void 0,ee=null,ue=!!H.dynamicChildren)=>{if(Tt===H)return;Tt&&!Ou(Tt,H)&&(Pt=be(Tt),Gt(Tt,gt,yt,!0),Tt=null),H.patchFlag===-2&&(ue=!1,H.dynamicChildren=null);const{type:Ut,ref:Ie,shapeFlag:je}=H;switch(Ut){case Bp:N(Tt,H,Rt,Pt);break;case ja:U(Tt,H,Rt,Pt);break;case zp:Tt==null&&F(H,Rt,Pt,jt);break;case mr:ot(Tt,H,Rt,Pt,gt,yt,jt,ee,ue);break;default:je&1?K(Tt,H,Rt,Pt,gt,yt,jt,ee,ue):je&6?bt(Tt,H,Rt,Pt,gt,yt,jt,ee,ue):(je&64||je&128)&&Ut.process(Tt,H,Rt,Pt,gt,yt,jt,ee,ue,Be)}Ie!=null&&gt&&p1(Ie,Tt&&Tt.ref,yt,H||Tt,!H)},N=(Tt,H,Rt,Pt)=>{if(Tt==null)a(H.el=o(H.children),Rt,Pt);else{const gt=H.el=Tt.el;H.children!==Tt.children&&_(gt,H.children)}},U=(Tt,H,Rt,Pt)=>{Tt==null?a(H.el=g(H.children||""),Rt,Pt):H.el=Tt.el},F=(Tt,H,Rt,Pt)=>{[Tt.el,Tt.anchor]=k(Tt.children,H,Rt,Pt,Tt.el,Tt.anchor)},j=({el:Tt,anchor:H},Rt,Pt)=>{let gt;for(;Tt&&Tt!==H;)gt=E(Tt),a(Tt,Rt,Pt),Tt=gt;a(H,Rt,Pt)},$=({el:Tt,anchor:H})=>{let Rt;for(;Tt&&Tt!==H;)Rt=E(Tt),s(Tt),Tt=Rt;s(H)},K=(Tt,H,Rt,Pt,gt,yt,jt,ee,ue)=>{H.type==="svg"?jt="svg":H.type==="math"&&(jt="mathml"),Tt==null?tt(H,Rt,Pt,gt,yt,jt,ee,ue):q(Tt,H,gt,yt,jt,ee,ue)},tt=(Tt,H,Rt,Pt,gt,yt,jt,ee)=>{let ue,Ut;const{props:Ie,shapeFlag:je,transition:Le,dirs:Ke}=Tt;if(ue=Tt.el=l(Tt.type,yt,Ie&&Ie.is,Ie),je&8?I(ue,Tt.children):je&16&&et(Tt.children,ue,null,Pt,gt,qx(Tt,yt),jt,ee),Ke&&yh(Tt,null,Pt,"created"),it(ue,Tt,Tt.scopeId,jt,Pt),Ie){for(const wn in Ie)wn!=="value"&&!ng(wn)&&d(ue,wn,null,Ie[wn],yt,Tt.children,Pt,gt,nn);"value"in Ie&&d(ue,"value",null,Ie.value,yt),(Ut=Ie.onVnodeBeforeMount)&&Al(Ut,Pt,Tt)}Ke&&yh(Tt,null,Pt,"beforeMount");const _n=QS(gt,Le);_n&&Le.beforeEnter(ue),a(ue,H,Rt),((Ut=Ie&&Ie.onVnodeMounted)||_n||Ke)&&Ba(()=>{Ut&&Al(Ut,Pt,Tt),_n&&Le.enter(ue),Ke&&yh(Tt,null,Pt,"mounted")},gt)},it=(Tt,H,Rt,Pt,gt)=>{if(Rt&&S(Tt,Rt),Pt)for(let yt=0;yt<Pt.length;yt++)S(Tt,Pt[yt]);if(gt){let yt=gt.subTree;if(H===yt){const jt=gt.vnode;it(Tt,jt,jt.scopeId,jt.slotScopeIds,gt.parent)}}},et=(Tt,H,Rt,Pt,gt,yt,jt,ee,ue=0)=>{for(let Ut=ue;Ut<Tt.length;Ut++){const Ie=Tt[Ut]=ee?df(Tt[Ut]):fc(Tt[Ut]);D(null,Ie,H,Rt,Pt,gt,yt,jt,ee)}},q=(Tt,H,Rt,Pt,gt,yt,jt)=>{const ee=H.el=Tt.el;let{patchFlag:ue,dynamicChildren:Ut,dirs:Ie}=H;ue|=Tt.patchFlag&16;const je=Tt.props||zi,Le=H.props||zi;let Ke;if(Rt&&wp(Rt,!1),(Ke=Le.onVnodeBeforeUpdate)&&Al(Ke,Rt,H,Tt),Ie&&yh(H,Tt,Rt,"beforeUpdate"),Rt&&wp(Rt,!0),Ut?ut(Tt.dynamicChildren,Ut,ee,Rt,Pt,qx(H,gt),yt):jt||ae(Tt,H,ee,null,Rt,Pt,qx(H,gt),yt,!1),ue>0){if(ue&16)Ct(ee,H,je,Le,Rt,Pt,gt);else if(ue&2&&je.class!==Le.class&&d(ee,"class",null,Le.class,gt),ue&4&&d(ee,"style",je.style,Le.style,gt),ue&8){const _n=H.dynamicProps;for(let wn=0;wn<_n.length;wn++){const de=_n[wn],ve=je[de],Te=Le[de];(Te!==ve||de==="value")&&d(ee,de,ve,Te,gt,Tt.children,Rt,Pt,nn)}}ue&1&&Tt.children!==H.children&&I(ee,H.children)}else!jt&&Ut==null&&Ct(ee,H,je,Le,Rt,Pt,gt);((Ke=Le.onVnodeUpdated)||Ie)&&Ba(()=>{Ke&&Al(Ke,Rt,H,Tt),Ie&&yh(H,Tt,Rt,"updated")},Pt)},ut=(Tt,H,Rt,Pt,gt,yt,jt)=>{for(let ee=0;ee<H.length;ee++){const ue=Tt[ee],Ut=H[ee],Ie=ue.el&&(ue.type===mr||!Ou(ue,Ut)||ue.shapeFlag&70)?C(ue.el):Rt;D(ue,Ut,Ie,null,Pt,gt,yt,jt,!0)}},Ct=(Tt,H,Rt,Pt,gt,yt,jt)=>{if(Rt!==Pt){if(Rt!==zi)for(const ee in Rt)!ng(ee)&&!(ee in Pt)&&d(Tt,ee,Rt[ee],null,jt,H.children,gt,yt,nn);for(const ee in Pt){if(ng(ee))continue;const ue=Pt[ee],Ut=Rt[ee];ue!==Ut&&ee!=="value"&&d(Tt,ee,Ut,ue,jt,H.children,gt,yt,nn)}"value"in Pt&&d(Tt,"value",Rt.value,Pt.value,jt)}},ot=(Tt,H,Rt,Pt,gt,yt,jt,ee,ue)=>{const Ut=H.el=Tt?Tt.el:o(""),Ie=H.anchor=Tt?Tt.anchor:o("");let{patchFlag:je,dynamicChildren:Le,slotScopeIds:Ke}=H;Ke&&(ee=ee?ee.concat(Ke):Ke),Tt==null?(a(Ut,Rt,Pt),a(Ie,Rt,Pt),et(H.children||[],Rt,Ie,gt,yt,jt,ee,ue)):je>0&&je&64&&Le&&Tt.dynamicChildren?(ut(Tt.dynamicChildren,Le,Rt,gt,yt,jt,ee),(H.key!=null||gt&&H===gt.subTree)&&a2(Tt,H,!0)):ae(Tt,H,Rt,Ie,gt,yt,jt,ee,ue)},bt=(Tt,H,Rt,Pt,gt,yt,jt,ee,ue)=>{H.slotScopeIds=ee,Tt==null?H.shapeFlag&512?gt.ctx.activate(H,Rt,Pt,jt,ue):X(H,Rt,Pt,gt,yt,jt,ue):Wt(Tt,H,ue)},X=(Tt,H,Rt,Pt,gt,yt,jt)=>{const ee=Tt.component=gE(Tt,Pt,gt);if(Uy(Tt)&&(ee.ctx.renderer=Be),vE(ee),ee.asyncDep){if(gt&&gt.registerDep(ee,Vt,jt),!Tt.el){const ue=ee.subTree=te(ja);U(null,ue,H,Rt)}}else Vt(ee,Tt,H,Rt,gt,yt,jt)},Wt=(Tt,H,Rt)=>{const Pt=H.component=Tt.component;if(s5(Tt,H,Rt))if(Pt.asyncDep&&!Pt.asyncResolved){Bt(Pt,H,Rt);return}else Pt.next=H,t5(Pt.update),Pt.effect.dirty=!0,Pt.update();else H.el=Tt.el,Pt.vnode=H},Vt=(Tt,H,Rt,Pt,gt,yt,jt)=>{const ee=()=>{if(Tt.isMounted){let{next:Ie,bu:je,u:Le,parent:Ke,vnode:_n}=Tt;{const Ye=JS(Tt);if(Ye){Ie&&(Ie.el=_n.el,Bt(Tt,Ie,jt)),Ye.asyncDep.then(()=>{Tt.isUnmounted||ee()});return}}let wn=Ie,de;wp(Tt,!1),Ie?(Ie.el=_n.el,Bt(Tt,Ie,jt)):Ie=_n,je&&rg(je),(de=Ie.props&&Ie.props.onVnodeBeforeUpdate)&&Al(de,Ke,Ie,_n),wp(Tt,!0);const ve=$_(Tt),Te=Tt.subTree;Tt.subTree=ve,D(Te,ve,C(Te.el),be(Te),Tt,gt,yt),Ie.el=ve.el,wn===null&&t2(Tt,ve.el),Le&&Ba(Le,gt),(de=Ie.props&&Ie.props.onVnodeUpdated)&&Ba(()=>Al(de,Ke,Ie,_n),gt)}else{let Ie;const{el:je,props:Le}=H,{bm:Ke,m:_n,parent:wn}=Tt,de=Op(H);if(wp(Tt,!1),Ke&&rg(Ke),!de&&(Ie=Le&&Le.onVnodeBeforeMount)&&Al(Ie,wn,H),wp(Tt,!0),je&&Ln){const ve=()=>{Tt.subTree=$_(Tt),Ln(je,Tt.subTree,Tt,gt,null)};de?H.type.__asyncLoader().then(()=>!Tt.isUnmounted&&ve()):ve()}else{const ve=Tt.subTree=$_(Tt);D(null,ve,Rt,Pt,Tt,gt,yt),H.el=ve.el}if(_n&&Ba(_n,gt),!de&&(Ie=Le&&Le.onVnodeMounted)){const ve=H;Ba(()=>Al(Ie,wn,ve),gt)}(H.shapeFlag&256||wn&&Op(wn.vnode)&&wn.vnode.shapeFlag&256)&&Tt.a&&Ba(Tt.a,gt),Tt.isMounted=!0,H=Rt=Pt=null}},ue=Tt.effect=new fg(ee,Il,()=>W1(Ut),Tt.scope),Ut=Tt.update=()=>{ue.dirty&&ue.run()};Ut.id=Tt.uid,wp(Tt,!0),Ut()},Bt=(Tt,H,Rt)=>{H.component=Tt;const Pt=Tt.vnode.props;Tt.vnode=H,Tt.next=null,V5(Tt,H.props,Pt,Rt),G5(Tt,H.children,Rt),Of(),wC(Tt),zf()},ae=(Tt,H,Rt,Pt,gt,yt,jt,ee,ue=!1)=>{const Ut=Tt&&Tt.children,Ie=Tt?Tt.shapeFlag:0,je=H.children,{patchFlag:Le,shapeFlag:Ke}=H;if(Le>0){if(Le&128){en(Ut,je,Rt,Pt,gt,yt,jt,ee,ue);return}else if(Le&256){ye(Ut,je,Rt,Pt,gt,yt,jt,ee,ue);return}}Ke&8?(Ie&16&&nn(Ut,gt,yt),je!==Ut&&I(Rt,je)):Ie&16?Ke&16?en(Ut,je,Rt,Pt,gt,yt,jt,ee,ue):nn(Ut,gt,yt,!0):(Ie&8&&I(Rt,""),Ke&16&&et(je,Rt,Pt,gt,yt,jt,ee,ue))},ye=(Tt,H,Rt,Pt,gt,yt,jt,ee,ue)=>{Tt=Tt||tg,H=H||tg;const Ut=Tt.length,Ie=H.length,je=Math.min(Ut,Ie);let Le;for(Le=0;Le<je;Le++){const Ke=H[Le]=ue?df(H[Le]):fc(H[Le]);D(Tt[Le],Ke,Rt,null,gt,yt,jt,ee,ue)}Ut>Ie?nn(Tt,gt,yt,!0,!1,je):et(H,Rt,Pt,gt,yt,jt,ee,ue,je)},en=(Tt,H,Rt,Pt,gt,yt,jt,ee,ue)=>{let Ut=0;const Ie=H.length;let je=Tt.length-1,Le=Ie-1;for(;Ut<=je&&Ut<=Le;){const Ke=Tt[Ut],_n=H[Ut]=ue?df(H[Ut]):fc(H[Ut]);if(Ou(Ke,_n))D(Ke,_n,Rt,null,gt,yt,jt,ee,ue);else break;Ut++}for(;Ut<=je&&Ut<=Le;){const Ke=Tt[je],_n=H[Le]=ue?df(H[Le]):fc(H[Le]);if(Ou(Ke,_n))D(Ke,_n,Rt,null,gt,yt,jt,ee,ue);else break;je--,Le--}if(Ut>je){if(Ut<=Le){const Ke=Le+1,_n=Ke<Ie?H[Ke].el:Pt;for(;Ut<=Le;)D(null,H[Ut]=ue?df(H[Ut]):fc(H[Ut]),Rt,_n,gt,yt,jt,ee,ue),Ut++}}else if(Ut>Le)for(;Ut<=je;)Gt(Tt[Ut],gt,yt,!0),Ut++;else{const Ke=Ut,_n=Ut,wn=new Map;for(Ut=_n;Ut<=Le;Ut++){const ht=H[Ut]=ue?df(H[Ut]):fc(H[Ut]);ht.key!=null&&wn.set(ht.key,Ut)}let de,ve=0;const Te=Le-_n+1;let Ye=!1,un=0;const Nn=new Array(Te);for(Ut=0;Ut<Te;Ut++)Nn[Ut]=0;for(Ut=Ke;Ut<=je;Ut++){const ht=Tt[Ut];if(ve>=Te){Gt(ht,gt,yt,!0);continue}let mt;if(ht.key!=null)mt=wn.get(ht.key);else for(de=_n;de<=Le;de++)if(Nn[de-_n]===0&&Ou(ht,H[de])){mt=de;break}mt===void 0?Gt(ht,gt,yt,!0):(Nn[mt-_n]=Ut+1,mt>=un?un=mt:Ye=!0,D(ht,H[mt],Rt,null,gt,yt,jt,ee,ue),ve++)}const oe=Ye?q5(Nn):tg;for(de=oe.length-1,Ut=Te-1;Ut>=0;Ut--){const ht=_n+Ut,mt=H[ht],wt=ht+1<Ie?H[ht+1].el:Pt;Nn[Ut]===0?D(null,mt,Rt,wt,gt,yt,jt,ee,ue):Ye&&(de<0||Ut!==oe[de]?Jt(mt,Rt,wt,2):de--)}}},Jt=(Tt,H,Rt,Pt,gt=null)=>{const{el:yt,type:jt,transition:ee,children:ue,shapeFlag:Ut}=Tt;if(Ut&6){Jt(Tt.component.subTree,H,Rt,Pt);return}if(Ut&128){Tt.suspense.move(H,Rt,Pt);return}if(Ut&64){jt.move(Tt,H,Rt,Be);return}if(jt===mr){a(yt,H,Rt);for(let je=0;je<ue.length;je++)Jt(ue[je],H,Rt,Pt);a(Tt.anchor,H,Rt);return}if(jt===zp){j(Tt,H,Rt);return}if(Pt!==2&&Ut&1&&ee)if(Pt===0)ee.beforeEnter(yt),a(yt,H,Rt),Ba(()=>ee.enter(yt),gt);else{const{leave:je,delayLeave:Le,afterLeave:Ke}=ee,_n=()=>a(yt,H,Rt),wn=()=>{je(yt,()=>{_n(),Ke&&Ke()})};Le?Le(yt,_n,wn):wn()}else a(yt,H,Rt)},Gt=(Tt,H,Rt,Pt=!1,gt=!1)=>{const{type:yt,props:jt,ref:ee,children:ue,dynamicChildren:Ut,shapeFlag:Ie,patchFlag:je,dirs:Le,memoIndex:Ke}=Tt;if(ee!=null&&p1(ee,null,Rt,Tt,!0),Ke!=null&&(H.renderCache[Ke]=void 0),Ie&256){H.ctx.deactivate(Tt);return}const _n=Ie&1&&Le,wn=!Op(Tt);let de;if(wn&&(de=jt&&jt.onVnodeBeforeUnmount)&&Al(de,H,Tt),Ie&6)Ce(Tt.component,Rt,Pt);else{if(Ie&128){Tt.suspense.unmount(Rt,Pt);return}_n&&yh(Tt,null,H,"beforeUnmount"),Ie&64?Tt.type.remove(Tt,H,Rt,gt,Be,Pt):Ut&&(yt!==mr||je>0&&je&64)?nn(Ut,H,Rt,!1,!0):(yt===mr&&je&384||!gt&&Ie&16)&&nn(ue,H,Rt),Pt&&Re(Tt)}(wn&&(de=jt&&jt.onVnodeUnmounted)||_n)&&Ba(()=>{de&&Al(de,H,Tt),_n&&yh(Tt,null,H,"unmounted")},Rt)},Re=Tt=>{const{type:H,el:Rt,anchor:Pt,transition:gt}=Tt;if(H===mr){$e(Rt,Pt);return}if(H===zp){$(Tt);return}const yt=()=>{s(Rt),gt&&!gt.persisted&&gt.afterLeave&&gt.afterLeave()};if(Tt.shapeFlag&1&&gt&&!gt.persisted){const{leave:jt,delayLeave:ee}=gt,ue=()=>jt(Rt,yt);ee?ee(Tt.el,yt,ue):ue()}else yt()},$e=(Tt,H)=>{let Rt;for(;Tt!==H;)Rt=E(Tt),s(Tt),Tt=Rt;s(H)},Ce=(Tt,H,Rt)=>{const{bum:Pt,scope:gt,update:yt,subTree:jt,um:ee,m:ue,a:Ut}=Tt;m1(ue),m1(Ut),Pt&&rg(Pt),gt.stop(),yt&&(yt.active=!1,Gt(jt,Tt,H,Rt)),ee&&Ba(ee,H),Ba(()=>{Tt.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&Tt.asyncDep&&!Tt.asyncResolved&&Tt.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},nn=(Tt,H,Rt,Pt=!1,gt=!1,yt=0)=>{for(let jt=yt;jt<Tt.length;jt++)Gt(Tt[jt],H,Rt,Pt,gt)},be=Tt=>Tt.shapeFlag&6?be(Tt.component.subTree):Tt.shapeFlag&128?Tt.suspense.next():E(Tt.anchor||Tt.el);let Me=!1;const xe=(Tt,H,Rt)=>{Tt==null?H._vnode&&Gt(H._vnode,null,null,!0):D(H._vnode||null,Tt,H,null,null,null,Rt),Me||(Me=!0,wC(),d1(),Me=!1),H._vnode=Tt},Be={p:D,um:Gt,m:Jt,r:Re,mt:X,mc:et,pc:ae,pbc:ut,n:be,o:t};let Je,Ln;return e&&([Je,Ln]=e(Be)),{render:xe,hydrate:Je,createApp:B5(xe,Je)}}function qx({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function wp({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function QS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function a2(t,e,n=!1){const a=t.children,s=e.children;if(ar(a)&&ar(s))for(let d=0;d<a.length;d++){const l=a[d];let o=s[d];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[d]=df(s[d]),o.el=l.el),!n&&o.patchFlag!==-2&&a2(l,o)),o.type===Bp&&(o.el=l.el)}}function q5(t){const e=t.slice(),n=[0];let a,s,d,l,o;const g=t.length;for(a=0;a<g;a++){const _=t[a];if(_!==0){if(s=n[n.length-1],t[s]<_){e[a]=s,n.push(a);continue}for(d=0,l=n.length-1;d<l;)o=d+l>>1,t[n[o]]<_?d=o+1:l=o;_<t[n[d]]&&(d>0&&(e[a]=n[d-1]),n[d]=a)}}for(d=n.length,l=n[d-1];d-- >0;)n[d]=l,l=e[l];return n}function JS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:JS(e)}function m1(t){if(t)for(let e=0;e<t.length;e++)t[e].active=!1}const tE=Symbol.for("v-scx"),eE=()=>Va(tE);function nE(t,e){return Vy(t,null,e)}function rE(t,e){return Vy(t,null,{flush:"post"})}function iE(t,e){return Vy(t,null,{flush:"sync"})}const T_={};function Xo(t,e,n){return Vy(t,e,n)}function Vy(t,e,{immediate:n,deep:a,flush:s,once:d,onTrack:l,onTrigger:o}=zi){if(e&&d){const tt=e;e=(...it)=>{tt(...it),K()}}const g=wa,_=tt=>a===!0?tt:gf(tt,a===!1?1:void 0);let I,C=!1,E=!1;if(po(t)?(I=()=>t.value,C=_y(t)):ig(t)?(I=()=>_(t),C=!0):ar(t)?(E=!0,C=t.some(tt=>ig(tt)||_y(tt)),I=()=>t.map(tt=>{if(po(tt))return tt.value;if(ig(tt))return _(tt);if(Mr(tt))return ud(tt,g,2)})):Mr(t)?e?I=()=>ud(t,g,2):I=()=>(S&&S(),mc(t,g,3,[k])):I=Il,e&&a){const tt=I;I=()=>gf(tt())}let S,k=tt=>{S=j.onStop=()=>{ud(tt,g,4),S=j.onStop=void 0}},D;if(Hy)if(k=Il,e?n&&mc(e,g,3,[I(),E?[]:void 0,k]):I(),s==="sync"){const tt=eE();D=tt.__watcherHandles||(tt.__watcherHandles=[])}else return Il;let N=E?new Array(t.length).fill(T_):T_;const U=()=>{if(!(!j.active||!j.dirty))if(e){const tt=j.run();(a||C||(E?tt.some((it,et)=>Bu(it,N[et])):Bu(tt,N)))&&(S&&S(),mc(e,g,3,[tt,N===T_?void 0:E&&N[0]===T_?[]:N,k]),N=tt)}else j.run()};U.allowRecurse=!!e;let F;s==="sync"?F=U:s==="post"?F=()=>Ba(U,g&&g.suspense):(U.pre=!0,g&&(U.id=g.uid),F=()=>W1(U));const j=new fg(I,Il,F),$=Gw(),K=()=>{j.stop(),$&&jw($.effects,j)};return e?n?U():N=j.run():s==="post"?Ba(j.run.bind(j),g&&g.suspense):j.run(),D&&D.push(K),K}function K5(t,e,n){const a=this.proxy,s=fo(t)?t.includes(".")?oE(a,t):()=>a[t]:t.bind(a,a);let d;Mr(e)?d=e:(d=e.handler,n=e);const l=jp(this),o=Vy(s,d.bind(a),n);return l(),o}function oE(t,e){const n=e.split(".");return()=>{let a=t;for(let s=0;s<n.length&&a;s++)a=a[n[s]];return a}}function gf(t,e=1/0,n){if(e<=0||!ji(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,po(t))gf(t.value,e,n);else if(ar(t))for(let a=0;a<t.length;a++)gf(t[a],e,n);else if(Gp(t)||eg(t))t.forEach(a=>{gf(a,e,n)});else if(QM(t)){for(const a in t)gf(t[a],e,n);for(const a of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,a)&&gf(t[a],e,n)}return t}const Uy=t=>t.type.__isKeepAlive,Y5={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=xc(),a=n.ctx;if(!a.renderer)return()=>{const F=e.default&&e.default();return F&&F.length===1?F[0]:F};const s=new Map,d=new Set;let l=null;const o=n.suspense,{renderer:{p:g,m:_,um:I,o:{createElement:C}}}=a,E=C("div");a.activate=(F,j,$,K,tt)=>{const it=F.component;_(F,j,$,0,o),g(it.vnode,F,j,$,it,o,K,F.slotScopeIds,tt),Ba(()=>{it.isDeactivated=!1,it.a&&rg(it.a);const et=F.props&&F.props.onVnodeMounted;et&&Al(et,it.parent,F)},o)},a.deactivate=F=>{const j=F.component;m1(j.m),m1(j.a),_(F,E,null,1,o),Ba(()=>{j.da&&rg(j.da);const $=F.props&&F.props.onVnodeUnmounted;$&&Al($,j.parent,F),j.isDeactivated=!0},o)};function S(F){Kx(F),I(F,n,o,!0)}function k(F){s.forEach((j,$)=>{const K=sw(j.type);K&&(!F||!F(K))&&D($)})}function D(F){const j=s.get(F);!l||!Ou(j,l)?S(j):l&&Kx(l),s.delete(F),d.delete(F)}Xo(()=>[t.include,t.exclude],([F,j])=>{F&&k($=>W0(F,$)),j&&k($=>!W0(j,$))},{flush:"post",deep:!0});let N=null;const U=()=>{N!=null&&(WA(n.subTree.type)?Ba(()=>{s.set(N,P_(n.subTree))},n.subTree.suspense):s.set(N,P_(n.subTree)))};return mo(U),X1(U),Zp(()=>{s.forEach(F=>{const{subTree:j,suspense:$}=n,K=P_(j);if(F.type===K.type&&F.key===K.key){Kx(K);const tt=K.component.da;tt&&Ba(tt,$);return}S(F)})}),()=>{if(N=null,!e.default)return null;const F=e.default(),j=F[0];if(F.length>1)return l=null,F;if(!Mf(j)||!(j.shapeFlag&4)&&!(j.shapeFlag&128))return l=null,j;let $=P_(j);const K=$.type,tt=sw(Op($)?$.type.__asyncResolved||{}:K),{include:it,exclude:et,max:q}=t;if(it&&(!tt||!W0(it,tt))||et&&tt&&W0(et,tt))return l=$,j;const ut=$.key==null?K:$.key,Ct=s.get(ut);return $.el&&($=Ah($),j.shapeFlag&128&&(j.ssContent=$)),N=ut,Ct?($.el=Ct.el,$.component=Ct.component,$.transition&&If($,$.transition),$.shapeFlag|=512,d.delete(ut),d.add(ut)):(d.add(ut),q&&d.size>parseInt(q,10)&&D(d.values().next().value)),$.shapeFlag|=256,l=$,WA(j.type)?j:$}}},X5=Y5;function W0(t,e){return ar(t)?t.some(n=>W0(n,e)):fo(t)?t.split(",").includes(e):tk(t)?t.test(e):!1}function aE(t,e){lE(t,"a",e)}function sE(t,e){lE(t,"da",e)}function lE(t,e,n=wa){const a=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Y1(e,a,n),n){let s=n.parent;for(;s&&s.parent;)Uy(s.parent.vnode)&&Q5(a,e,n,s),s=s.parent}}function Q5(t,e,n,a){const s=Y1(e,t,a,!0);yd(()=>{jw(a[e],s)},n)}function Kx(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function P_(t){return t.shapeFlag&128?t.ssContent:t}const hf=Symbol("_leaveCb"),k_=Symbol("_enterCb");function s2(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return mo(()=>{t.isMounted=!0}),Zp(()=>{t.isUnmounting=!0}),t}const Hc=[Function,Array],l2={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Hc,onEnter:Hc,onAfterEnter:Hc,onEnterCancelled:Hc,onBeforeLeave:Hc,onLeave:Hc,onAfterLeave:Hc,onLeaveCancelled:Hc,onBeforeAppear:Hc,onAppear:Hc,onAfterAppear:Hc,onAppearCancelled:Hc},cE=t=>{const e=t.subTree;return e.component?cE(e.component):e},J5={name:"BaseTransition",props:l2,setup(t,{slots:e}){const n=xc(),a=s2();return()=>{const s=e.default&&Q1(e.default(),!0);if(!s||!s.length)return;let d=s[0];if(s.length>1){for(const E of s)if(E.type!==ja){d=E;break}}const l=ui(t),{mode:o}=l;if(a.isLeaving)return Yx(d);const g=OC(d);if(!g)return Yx(d);let _=mg(g,l,a,n,E=>_=E);If(g,_);const I=n.subTree,C=I&&OC(I);if(C&&C.type!==ja&&!Ou(g,C)&&cE(n).type!==ja){const E=mg(C,l,a,n);if(If(C,E),o==="out-in"&&g.type!==ja)return a.isLeaving=!0,E.afterLeave=()=>{a.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Yx(d);o==="in-out"&&g.type!==ja&&(E.delayLeave=(S,k,D)=>{const N=hE(a,C);N[String(C.key)]=C,S[hf]=()=>{k(),S[hf]=void 0,delete _.delayedLeave},_.delayedLeave=D})}return d}}},uE=J5;function hE(t,e){const{leavingVNodes:n}=t;let a=n.get(e.type);return a||(a=Object.create(null),n.set(e.type,a)),a}function mg(t,e,n,a,s){const{appear:d,mode:l,persisted:o=!1,onBeforeEnter:g,onEnter:_,onAfterEnter:I,onEnterCancelled:C,onBeforeLeave:E,onLeave:S,onAfterLeave:k,onLeaveCancelled:D,onBeforeAppear:N,onAppear:U,onAfterAppear:F,onAppearCancelled:j}=e,$=String(t.key),K=hE(n,t),tt=(q,ut)=>{q&&mc(q,a,9,ut)},it=(q,ut)=>{const Ct=ut[1];tt(q,ut),ar(q)?q.every(ot=>ot.length<=1)&&Ct():q.length<=1&&Ct()},et={mode:l,persisted:o,beforeEnter(q){let ut=g;if(!n.isMounted)if(d)ut=N||g;else return;q[hf]&&q[hf](!0);const Ct=K[$];Ct&&Ou(t,Ct)&&Ct.el[hf]&&Ct.el[hf](),tt(ut,[q])},enter(q){let ut=_,Ct=I,ot=C;if(!n.isMounted)if(d)ut=U||_,Ct=F||I,ot=j||C;else return;let bt=!1;const X=q[k_]=Wt=>{bt||(bt=!0,Wt?tt(ot,[q]):tt(Ct,[q]),et.delayedLeave&&et.delayedLeave(),q[k_]=void 0)};ut?it(ut,[q,X]):X()},leave(q,ut){const Ct=String(t.key);if(q[k_]&&q[k_](!0),n.isUnmounting)return ut();tt(E,[q]);let ot=!1;const bt=q[hf]=X=>{ot||(ot=!0,ut(),X?tt(D,[q]):tt(k,[q]),q[hf]=void 0,K[Ct]===t&&delete K[Ct])};K[Ct]=t,S?it(S,[q,bt]):bt()},clone(q){const ut=mg(q,e,n,a,s);return s&&s(ut),ut}};return et}function Yx(t){if(Uy(t))return t=Ah(t),t.children=null,t}function OC(t){if(!Uy(t))return t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Mr(n.default))return n.default()}}function If(t,e){t.shapeFlag&6&&t.component?If(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Q1(t,e=!1,n){let a=[],s=0;for(let d=0;d<t.length;d++){let l=t[d];const o=n==null?l.key:String(n)+String(l.key!=null?l.key:d);l.type===mr?(l.patchFlag&128&&s++,a=a.concat(Q1(l.children,e,o))):(e||l.type!==ja)&&a.push(o!=null?Ah(l,{key:o}):l)}if(s>1)for(let d=0;d<a.length;d++)a[d].patchFlag=-2;return a}const tL=t=>t.__isTeleport,ry=t=>t&&(t.disabled||t.disabled===""),zC=t=>typeof SVGElement<"u"&&t instanceof SVGElement,FC=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,tw=(t,e)=>{const n=t&&t.to;return fo(n)?e?e(n):null:n},eL={name:"Teleport",__isTeleport:!0,process(t,e,n,a,s,d,l,o,g,_){const{mc:I,pc:C,pbc:E,o:{insert:S,querySelector:k,createText:D,createComment:N}}=_,U=ry(e.props);let{shapeFlag:F,children:j,dynamicChildren:$}=e;if(t==null){const K=e.el=D(""),tt=e.anchor=D("");S(K,n,a),S(tt,n,a);const it=e.target=tw(e.props,k),et=e.targetAnchor=D("");it&&(S(et,it),l==="svg"||zC(it)?l="svg":(l==="mathml"||FC(it))&&(l="mathml"));const q=(ut,Ct)=>{F&16&&I(j,ut,Ct,s,d,l,o,g)};U?q(n,tt):it&&q(it,et)}else{e.el=t.el;const K=e.anchor=t.anchor,tt=e.target=t.target,it=e.targetAnchor=t.targetAnchor,et=ry(t.props),q=et?n:tt,ut=et?K:it;if(l==="svg"||zC(tt)?l="svg":(l==="mathml"||FC(tt))&&(l="mathml"),$?(E(t.dynamicChildren,$,q,s,d,l,o),a2(t,e,!0)):g||C(t,e,q,ut,s,d,l,o,!1),U)et?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):L_(e,n,K,_,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const Ct=e.target=tw(e.props,k);Ct&&L_(e,Ct,null,_,0)}else et&&L_(e,tt,it,_,1)}dE(e)},remove(t,e,n,a,{um:s,o:{remove:d}},l){const{shapeFlag:o,children:g,anchor:_,targetAnchor:I,target:C,props:E}=t;if(C&&d(I),l&&d(_),o&16){const S=l||!ry(E);for(let k=0;k<g.length;k++){const D=g[k];s(D,e,n,S,!!D.dynamicChildren)}}},move:L_,hydrate:nL};function L_(t,e,n,{o:{insert:a},m:s},d=2){d===0&&a(t.targetAnchor,e,n);const{el:l,anchor:o,shapeFlag:g,children:_,props:I}=t,C=d===2;if(C&&a(l,e,n),(!C||ry(I))&&g&16)for(let E=0;E<_.length;E++)s(_[E],e,n,2);C&&a(o,e,n)}function nL(t,e,n,a,s,d,{o:{nextSibling:l,parentNode:o,querySelector:g}},_){const I=e.target=tw(e.props,g);if(I){const C=I._lpa||I.firstChild;if(e.shapeFlag&16)if(ry(e.props))e.anchor=_(l(t),e,o(t),n,a,s,d),e.targetAnchor=C;else{e.anchor=l(t);let E=C;for(;E;)if(E=l(E),E&&E.nodeType===8&&E.data==="teleport anchor"){e.targetAnchor=E,I._lpa=e.targetAnchor&&l(e.targetAnchor);break}_(C,e,I,n,a,s,d)}dE(e)}return e.anchor&&l(e.anchor)}const ew=eL;function dE(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const mr=Symbol.for("v-fgt"),Bp=Symbol.for("v-txt"),ja=Symbol.for("v-cmt"),zp=Symbol.for("v-stc"),iy=[];let Ml=null;function St(t=!1){iy.push(Ml=t?null:[])}function fE(){iy.pop(),Ml=iy[iy.length-1]||null}let Np=1;function nw(t){Np+=t}function pE(t){return t.dynamicChildren=Np>0?Ml||tg:null,fE(),Np>0&&Ml&&Ml.push(t),t}function pe(t,e,n,a,s,d){return pE(zt(t,e,n,a,s,d,!0))}function tn(t,e,n,a,s){return pE(te(t,e,n,a,s,!0))}function Mf(t){return t?t.__v_isVNode===!0:!1}function Ou(t,e){return t.type===e.type&&t.key===e.key}function rL(t){}const mE=({key:t})=>t??null,Z_=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?fo(t)||po(t)||Mr(t)?{i:Ca,r:t,k:e,f:!!n}:t:null);function zt(t,e=null,n=null,a=0,s=null,d=t===mr?0:1,l=!1,o=!1){const g={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&mE(e),ref:e&&Z_(e),scopeId:K1,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:a,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ca};return o?(c2(g,n),d&128&&t.normalize(g)):n&&(g.shapeFlag|=fo(n)?8:16),Np>0&&!l&&Ml&&(g.patchFlag>0||d&6)&&g.patchFlag!==32&&Ml.push(g),g}const te=iL;function iL(t,e=null,n=null,a=0,s=null,d=!1){if((!t||t===ES)&&(t=ja),Mf(t)){const o=Ah(t,e,!0);return n&&c2(o,n),Np>0&&!d&&Ml&&(o.shapeFlag&6?Ml[Ml.indexOf(t)]=o:Ml.push(o)),o.patchFlag=-2,o}if(hL(t)&&(t=t.__vccOpts),e){e=Mo(e);let{class:o,style:g}=e;o&&!fo(o)&&(e.class=Li(o)),ji(g)&&(Kw(g)&&!ar(g)&&(g=Ji({},g)),e.style=fi(g))}const l=fo(t)?1:WA(t)?128:tL(t)?64:ji(t)?4:Mr(t)?2:0;return zt(t,e,n,a,s,l,d,!0)}function Mo(t){return t?Kw(t)||HS(t)?Ji({},t):t:null}function Ah(t,e,n=!1,a=!1){const{props:s,ref:d,patchFlag:l,children:o,transition:g}=t,_=e?Tr(s||{},e):s,I={__v_isVNode:!0,__v_skip:!0,type:t.type,props:_,key:_&&mE(_),ref:e&&e.ref?n&&d?ar(d)?d.concat(Z_(e)):[d,Z_(e)]:Z_(e):d,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==mr?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:g,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ah(t.ssContent),ssFallback:t.ssFallback&&Ah(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return g&&a&&If(I,g.clone(I)),I}function ho(t=" ",e=0){return te(Bp,null,t,e)}function J1(t,e){const n=te(zp,null,t);return n.staticCount=e,n}function Cn(t="",e=!1){return e?(St(),tn(ja,null,t)):te(ja,null,t)}function fc(t){return t==null||typeof t=="boolean"?te(ja):ar(t)?te(mr,null,t.slice()):typeof t=="object"?df(t):te(Bp,null,String(t))}function df(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ah(t)}function c2(t,e){let n=0;const{shapeFlag:a}=t;if(e==null)e=null;else if(ar(e))n=16;else if(typeof e=="object")if(a&65){const s=e.default;s&&(s._c&&(s._d=!1),c2(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!HS(e)?e._ctx=Ca:s===3&&Ca&&(Ca.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Mr(e)?(e={default:e,_ctx:Ca},n=32):(e=String(e),a&64?(n=16,e=[ho(e)]):n=8);t.children=e,t.shapeFlag|=n}function Tr(...t){const e={};for(let n=0;n<t.length;n++){const a=t[n];for(const s in a)if(s==="class")e.class!==a.class&&(e.class=Li([e.class,a.class]));else if(s==="style")e.style=fi([e.style,a.style]);else if(By(s)){const d=e[s],l=a[s];l&&d!==l&&!(ar(d)&&d.includes(l))&&(e[s]=d?[].concat(d,l):l)}else s!==""&&(e[s]=a[s])}return e}function Al(t,e,n,a=null){mc(t,e,7,[n,a])}const oL=jS();let aL=0;function gE(t,e,n){const a=t.type,s=(e?e.appContext:t.appContext)||oL,d={uid:aL++,vnode:t,type:a,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Hw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$S(a,s),emitsOptions:SS(a,s),emit:null,emitted:null,propsDefaults:zi,inheritAttrs:a.inheritAttrs,ctx:zi,data:zi,props:zi,attrs:zi,slots:zi,refs:zi,setupState:zi,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=e?e.root:d,d.emit=n5.bind(null,d),t.ce&&t.ce(d),d}let wa=null;const xc=()=>wa||Ca;let g1,rw;{const t=tS(),e=(n,a)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(a),d=>{s.length>1?s.forEach(l=>l(d)):s[0](d)}};g1=e("__VUE_INSTANCE_SETTERS__",n=>wa=n),rw=e("__VUE_SSR_SETTERS__",n=>Hy=n)}const jp=t=>{const e=wa;return g1(t),t.scope.on(),()=>{t.scope.off(),g1(e)}},iw=()=>{wa&&wa.scope.off(),g1(null)};function yE(t){return t.vnode.shapeFlag&4}let Hy=!1;function vE(t,e=!1){e&&rw(e);const{props:n,children:a}=t.vnode,s=yE(t);j5(t,n,s,e),H5(t,a);const d=s?sL(t,e):void 0;return e&&rw(!1),d}function sL(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,YA);const{setup:a}=n;if(a){const s=t.setupContext=a.length>1?bE(t):null,d=jp(t);Of();const l=ud(a,t,0,[t.props,s]);if(zf(),d(),Vw(l)){if(l.then(iw,iw),e)return l.then(o=>{ow(t,o,e)}).catch(o=>{$p(o,t,0)});t.asyncDep=l}else ow(t,l,e)}else _E(t,e)}function ow(t,e,n){Mr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ji(e)&&(t.setupState=Qw(e)),_E(t,n)}let y1,aw;function lL(t){y1=t,aw=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,b5))}}const cL=()=>!y1;function _E(t,e,n){const a=t.type;if(!t.render){if(!e&&y1&&!a.render){const s=a.template||i2(t).template;if(s){const{isCustomElement:d,compilerOptions:l}=t.appContext.config,{delimiters:o,compilerOptions:g}=a,_=Ji(Ji({isCustomElement:d,delimiters:o},l),g);a.render=y1(s,_)}}t.render=a.render||Il,aw&&aw(t)}{const s=jp(t);Of();try{L5(t)}finally{zf(),s()}}}const uL={get(t,e){return Sl(t,"get",""),t[e]}};function bE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,uL),slots:t.slots,emit:t.emit,expose:e}}function Gy(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Qw(vS(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ny)return ny[n](t)},has(e,n){return n in e||n in ny}})):t.proxy}function sw(t,e=!0){return Mr(t)?t.displayName||t.name:t.name||e&&t.__name}function hL(t){return Mr(t)&&"__vccOpts"in t}const bn=(t,e)=>Fk(t,e,Hy);function la(t,e,n=zi){const a=xc(),s=el(e),d=pc(e),l=xS((g,_)=>{let I;return iE(()=>{const C=t[e];Bu(I,C)&&(I=C,_())}),{get(){return g(),n.get?n.get(I):I},set(C){const E=a.vnode.props;!(E&&(e in E||s in E||d in E)&&(`onUpdate:${e}`in E||`onUpdate:${s}`in E||`onUpdate:${d}`in E))&&Bu(C,I)&&(I=C,_()),a.emit(`update:${e}`,n.set?n.set(C):C)}}}),o=e==="modelValue"?"modelModifiers":`${e}Modifiers`;return l[Symbol.iterator]=()=>{let g=0;return{next(){return g<2?{value:g++?t[o]||{}:l,done:!1}:{done:!0}}}},l}function Sf(t,e,n){const a=arguments.length;return a===2?ji(e)&&!ar(e)?Mf(e)?te(t,null,[e]):te(t,e):te(t,null,e):(a>3?n=Array.prototype.slice.call(arguments,2):a===3&&Mf(n)&&(n=[n]),te(t,e,n))}function dL(){}function fL(t,e,n,a){const s=n[a];if(s&&xE(s,t))return s;const d=e();return d.memo=t.slice(),d.memoIndex=a,n[a]=d}function xE(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let a=0;a<n.length;a++)if(Bu(n[a],e[a]))return!1;return Np>0&&Ml&&Ml.push(t),!0}const AE="3.4.29",pL=Il,mL=Xk,gL=Um,yL=MS,vL={createComponentInstance:gE,setupComponent:vE,renderComponentRoot:$_,setCurrentRenderingInstance:wy,isVNode:Mf,normalizeVNode:fc,getComponentPublicInstance:Gy},_L=vL,bL=null,xL=null,AL=null;/**
* @vue/runtime-dom v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const wL="http://www.w3.org/2000/svg",CL="http://www.w3.org/1998/Math/MathML",ad=typeof document<"u"?document:null,BC=ad&&ad.createElement("template"),IL={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,a)=>{const s=e==="svg"?ad.createElementNS(wL,t):e==="mathml"?ad.createElementNS(CL,t):n?ad.createElement(t,{is:n}):ad.createElement(t);return t==="select"&&a&&a.multiple!=null&&s.setAttribute("multiple",a.multiple),s},createText:t=>ad.createTextNode(t),createComment:t=>ad.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ad.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,a,s,d){const l=n?n.previousSibling:e.lastChild;if(s&&(s===d||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===d||!(s=s.nextSibling)););else{BC.innerHTML=a==="svg"?`<svg>${t}</svg>`:a==="mathml"?`<math>${t}</math>`:t;const o=BC.content;if(a==="svg"||a==="mathml"){const g=o.firstChild;for(;g.firstChild;)o.appendChild(g.firstChild);o.removeChild(g)}e.insertBefore(o,n)}return[l?l.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},sf="transition",z0="animation",gg=Symbol("_vtc"),tb=(t,{slots:e})=>Sf(uE,CE(t),e);tb.displayName="Transition";const wE={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ML=tb.props=Ji({},l2,wE),Cp=(t,e=[])=>{ar(t)?t.forEach(n=>n(...e)):t&&t(...e)},NC=t=>t?ar(t)?t.some(e=>e.length>1):t.length>1:!1;function CE(t){const e={};for(const ot in t)ot in wE||(e[ot]=t[ot]);if(t.css===!1)return e;const{name:n="v",type:a,duration:s,enterFromClass:d=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:g=d,appearActiveClass:_=l,appearToClass:I=o,leaveFromClass:C=`${n}-leave-from`,leaveActiveClass:E=`${n}-leave-active`,leaveToClass:S=`${n}-leave-to`}=t,k=SL(s),D=k&&k[0],N=k&&k[1],{onBeforeEnter:U,onEnter:F,onEnterCancelled:j,onLeave:$,onLeaveCancelled:K,onBeforeAppear:tt=U,onAppear:it=F,onAppearCancelled:et=j}=e,q=(ot,bt,X)=>{cf(ot,bt?I:o),cf(ot,bt?_:l),X&&X()},ut=(ot,bt)=>{ot._isLeaving=!1,cf(ot,C),cf(ot,S),cf(ot,E),bt&&bt()},Ct=ot=>(bt,X)=>{const Wt=ot?it:F,Vt=()=>q(bt,ot,X);Cp(Wt,[bt,Vt]),jC(()=>{cf(bt,ot?g:d),od(bt,ot?I:o),NC(Wt)||VC(bt,a,D,Vt)})};return Ji(e,{onBeforeEnter(ot){Cp(U,[ot]),od(ot,d),od(ot,l)},onBeforeAppear(ot){Cp(tt,[ot]),od(ot,g),od(ot,_)},onEnter:Ct(!1),onAppear:Ct(!0),onLeave(ot,bt){ot._isLeaving=!0;const X=()=>ut(ot,bt);od(ot,C),od(ot,E),ME(),jC(()=>{ot._isLeaving&&(cf(ot,C),od(ot,S),NC($)||VC(ot,a,N,X))}),Cp($,[ot,X])},onEnterCancelled(ot){q(ot,!1),Cp(j,[ot])},onAppearCancelled(ot){q(ot,!0),Cp(et,[ot])},onLeaveCancelled(ot){ut(ot),Cp(K,[ot])}})}function SL(t){if(t==null)return null;if(ji(t))return[Xx(t.enter),Xx(t.leave)];{const e=Xx(t);return[e,e]}}function Xx(t){return c1(t)}function od(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[gg]||(t[gg]=new Set)).add(e)}function cf(t,e){e.split(/\s+/).forEach(a=>a&&t.classList.remove(a));const n=t[gg];n&&(n.delete(e),n.size||(t[gg]=void 0))}function jC(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let EL=0;function VC(t,e,n,a){const s=t._endId=++EL,d=()=>{s===t._endId&&a()};if(n)return setTimeout(d,n);const{type:l,timeout:o,propCount:g}=IE(t,e);if(!l)return a();const _=l+"end";let I=0;const C=()=>{t.removeEventListener(_,E),d()},E=S=>{S.target===t&&++I>=g&&C()};setTimeout(()=>{I<g&&C()},o+1),t.addEventListener(_,E)}function IE(t,e){const n=window.getComputedStyle(t),a=k=>(n[k]||"").split(", "),s=a(`${sf}Delay`),d=a(`${sf}Duration`),l=UC(s,d),o=a(`${z0}Delay`),g=a(`${z0}Duration`),_=UC(o,g);let I=null,C=0,E=0;e===sf?l>0&&(I=sf,C=l,E=d.length):e===z0?_>0&&(I=z0,C=_,E=g.length):(C=Math.max(l,_),I=C>0?l>_?sf:z0:null,E=I?I===sf?d.length:g.length:0);const S=I===sf&&/\b(transform|all)(,|$)/.test(a(`${sf}Property`).toString());return{type:I,timeout:C,propCount:E,hasTransform:S}}function UC(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,a)=>HC(n)+HC(t[a])))}function HC(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function ME(){return document.body.offsetHeight}function TL(t,e,n){const a=t[gg];a&&(e=(e?[e,...a]:[...a]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const v1=Symbol("_vod"),SE=Symbol("_vsh"),eb={beforeMount(t,{value:e},{transition:n}){t[v1]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):F0(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:a}){!e!=!n&&(a?e?(a.beforeEnter(t),F0(t,!0),a.enter(t)):a.leave(t,()=>{F0(t,!1)}):F0(t,e))},beforeUnmount(t,{value:e}){F0(t,e)}};function F0(t,e){t.style.display=e?t[v1]:"none",t[SE]=!e}function PL(){eb.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const EE=Symbol("");function kL(t){const e=xc();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(d=>cw(d,s))},a=()=>{const s=t(e.proxy);lw(e.subTree,s),n(s)};mo(()=>{rE(a);const s=new MutationObserver(a);s.observe(e.subTree.el.parentNode,{childList:!0}),yd(()=>s.disconnect())})}function lw(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{lw(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)cw(t.el,e);else if(t.type===mr)t.children.forEach(n=>lw(n,e));else if(t.type===zp){let{el:n,anchor:a}=t;for(;n&&(cw(n,e),n!==a);)n=n.nextSibling}}function cw(t,e){if(t.nodeType===1){const n=t.style;let a="";for(const s in e)n.setProperty(`--${s}`,e[s]),a+=`--${s}: ${e[s]};`;n[EE]=a}}const LL=/(^|;)\s*display\s*:/;function RL(t,e,n){const a=t.style,s=fo(n);let d=!1;if(n&&!s){if(e)if(fo(e))for(const l of e.split(";")){const o=l.slice(0,l.indexOf(":")).trim();n[o]==null&&W_(a,o,"")}else for(const l in e)n[l]==null&&W_(a,l,"");for(const l in n)l==="display"&&(d=!0),W_(a,l,n[l])}else if(s){if(e!==n){const l=a[EE];l&&(n+=";"+l),a.cssText=n,d=LL.test(n)}}else e&&t.removeAttribute("style");v1 in t&&(t[v1]=d?a.display:"",t[SE]&&(a.display="none"))}const GC=/\s*!important$/;function W_(t,e,n){if(ar(n))n.forEach(a=>W_(t,e,a));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const a=DL(t,e);GC.test(n)?t.setProperty(pc(a),n.replace(GC,""),"important"):t[a]=n}}const $C=["Webkit","Moz","ms"],Qx={};function DL(t,e){const n=Qx[e];if(n)return n;let a=el(e);if(a!=="filter"&&a in t)return Qx[e]=a;a=Ny(a);for(let s=0;s<$C.length;s++){const d=$C[s]+a;if(d in t)return Qx[e]=d}return e}const ZC="http://www.w3.org/1999/xlink";function WC(t,e,n,a,s,d=hk(e)){a&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(ZC,e.slice(6,e.length)):t.setAttributeNS(ZC,e,n):n==null||d&&!eS(n)?t.removeAttribute(e):t.setAttribute(e,d?"":String(n))}function OL(t,e,n,a,s,d,l){if(e==="innerHTML"||e==="textContent"){a&&l(a,s,d),t[e]=n??"";return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const _=o==="OPTION"?t.getAttribute("value")||"":t.value,I=n==null?"":String(n);(_!==I||!("_value"in t))&&(t.value=I),n==null&&t.removeAttribute(e),t._value=n;return}let g=!1;if(n===""||n==null){const _=typeof t[e];_==="boolean"?n=eS(n):n==null&&_==="string"?(n="",g=!0):_==="number"&&(n=0,g=!0)}try{t[e]=n}catch{}g&&t.removeAttribute(e)}function sd(t,e,n,a){t.addEventListener(e,n,a)}function zL(t,e,n,a){t.removeEventListener(e,n,a)}const qC=Symbol("_vei");function FL(t,e,n,a,s=null){const d=t[qC]||(t[qC]={}),l=d[e];if(a&&l)l.value=a;else{const[o,g]=BL(e);if(a){const _=d[e]=VL(a,s);sd(t,o,_,g)}else l&&(zL(t,o,l,g),d[e]=void 0)}}const KC=/(?:Once|Passive|Capture)$/;function BL(t){let e;if(KC.test(t)){e={};let a;for(;a=t.match(KC);)t=t.slice(0,t.length-a[0].length),e[a[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):pc(t.slice(2)),e]}let Jx=0;const NL=Promise.resolve(),jL=()=>Jx||(NL.then(()=>Jx=0),Jx=Date.now());function VL(t,e){const n=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=n.attached)return;mc(UL(a,n.value),e,5,[a])};return n.value=t,n.attached=jL(),n}function UL(t,e){if(ar(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(a=>s=>!s._stopped&&a&&a(s))}else return e}const YC=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,HL=(t,e,n,a,s,d,l,o,g)=>{const _=s==="svg";e==="class"?TL(t,a,_):e==="style"?RL(t,n,a):By(e)?Nw(e)||FL(t,e,n,a,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):GL(t,e,a,_))?(OL(t,e,a,d,l,o,g),(e==="value"||e==="checked"||e==="selected")&&WC(t,e,a,_,l,e!=="value")):(e==="true-value"?t._trueValue=a:e==="false-value"&&(t._falseValue=a),WC(t,e,a,_))};function GL(t,e,n,a){if(a)return!!(e==="innerHTML"||e==="textContent"||e in t&&YC(e)&&Mr(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return YC(e)&&fo(n)?!1:e in t}/*! #__NO_SIDE_EFFECTS__ */function TE(t,e,n){const a=rr(t,e);class s extends nb{constructor(l){super(a,l,n)}}return s.def=a,s}/*! #__NO_SIDE_EFFECTS__ */const $L=(t,e)=>TE(t,e,BE),ZL=typeof HTMLElement<"u"?HTMLElement:class{};class nb extends ZL{constructor(e,n={},a){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&a?a(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,El(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),uw(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let a=0;a<this.attributes.length;a++)this._setAttr(this.attributes[a].name);this._ob=new MutationObserver(a=>{for(const s of a)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(a,s=!1)=>{const{props:d,styles:l}=a;let o;if(d&&!ar(d))for(const g in d){const _=d[g];(_===Number||_&&_.type===Number)&&(g in this._props&&(this._props[g]=c1(this._props[g])),(o||(o=Object.create(null)))[el(g)]=!0)}this._numberProps=o,s&&this._resolveProps(a),this._applyStyles(l),this._update()},n=this._def.__asyncLoader;n?n().then(a=>e(a,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,a=ar(n)?n:Object.keys(n||{});for(const s of Object.keys(this))s[0]!=="_"&&a.includes(s)&&this._setProp(s,this[s],!0,!1);for(const s of a.map(el))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(d){this._setProp(s,d)}})}_setAttr(e){let n=this.hasAttribute(e)?this.getAttribute(e):void 0;const a=el(e);this._numberProps&&this._numberProps[a]&&(n=c1(n)),this._setProp(a,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,a=!0,s=!0){n!==this._props[e]&&(this._props[e]=n,s&&this._instance&&this._update(),a&&(n===!0?this.setAttribute(pc(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(pc(e),n+""):n||this.removeAttribute(pc(e))))}_update(){uw(this._createVNode(),this.shadowRoot)}_createVNode(){const e=te(this._def,Ji({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const a=(d,l)=>{this.dispatchEvent(new CustomEvent(d,{detail:l}))};n.emit=(d,...l)=>{a(d,l),pc(d)!==d&&a(pc(d),l)};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof nb){n.parent=s._instance,n.provides=s._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const a=document.createElement("style");a.textContent=n,this.shadowRoot.appendChild(a)})}}function WL(t="$style"){{const e=xc();if(!e)return zi;const n=e.type.__cssModules;if(!n)return zi;const a=n[t];return a||zi}}const PE=new WeakMap,kE=new WeakMap,_1=Symbol("_moveCb"),XC=Symbol("_enterCb"),LE={name:"TransitionGroup",props:Ji({},ML,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=xc(),a=s2();let s,d;return X1(()=>{if(!s.length)return;const l=t.moveClass||`${t.name||"v"}-move`;if(!JL(s[0].el,n.vnode.el,l))return;s.forEach(YL),s.forEach(XL);const o=s.filter(QL);ME(),o.forEach(g=>{const _=g.el,I=_.style;od(_,l),I.transform=I.webkitTransform=I.transitionDuration="";const C=_[_1]=E=>{E&&E.target!==_||(!E||/transform$/.test(E.propertyName))&&(_.removeEventListener("transitionend",C),_[_1]=null,cf(_,l))};_.addEventListener("transitionend",C)})}),()=>{const l=ui(t),o=CE(l);let g=l.tag||mr;if(s=[],d)for(let _=0;_<d.length;_++){const I=d[_];I.el&&I.el instanceof Element&&(s.push(I),If(I,mg(I,o,a,n)),PE.set(I,I.el.getBoundingClientRect()))}d=e.default?Q1(e.default()):[];for(let _=0;_<d.length;_++){const I=d[_];I.key!=null&&If(I,mg(I,o,a,n))}return te(g,null,d)}}},qL=t=>delete t.mode;LE.props;const KL=LE;function YL(t){const e=t.el;e[_1]&&e[_1](),e[XC]&&e[XC]()}function XL(t){kE.set(t,t.el.getBoundingClientRect())}function QL(t){const e=PE.get(t),n=kE.get(t),a=e.left-n.left,s=e.top-n.top;if(a||s){const d=t.el.style;return d.transform=d.webkitTransform=`translate(${a}px,${s}px)`,d.transitionDuration="0s",t}}function JL(t,e,n){const a=t.cloneNode(),s=t[gg];s&&s.forEach(o=>{o.split(/\s+/).forEach(g=>g&&a.classList.remove(g))}),n.split(/\s+/).forEach(o=>o&&a.classList.add(o)),a.style.display="none";const d=e.nodeType===1?e:e.parentNode;d.appendChild(a);const{hasTransform:l}=IE(a);return d.removeChild(a),l}const Ef=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ar(e)?n=>rg(e,n):e};function tR(t){t.target.composing=!0}function QC(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Kc=Symbol("_assign"),wh={created(t,{modifiers:{lazy:e,trim:n,number:a}},s){t[Kc]=Ef(s);const d=a||s.props&&s.props.type==="number";sd(t,e?"change":"input",l=>{if(l.target.composing)return;let o=t.value;n&&(o=o.trim()),d&&(o=l1(o)),t[Kc](o)}),n&&sd(t,"change",()=>{t.value=t.value.trim()}),e||(sd(t,"compositionstart",tR),sd(t,"compositionend",QC),sd(t,"change",QC))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:a,trim:s,number:d}},l){if(t[Kc]=Ef(l),t.composing)return;const o=(d||t.type==="number")&&!/^0\d/.test(t.value)?l1(t.value):t.value,g=e??"";o!==g&&(document.activeElement===t&&t.type!=="range"&&(a&&e===n||s&&t.value.trim()===g)||(t.value=g))}},rb={deep:!0,created(t,e,n){t[Kc]=Ef(n),sd(t,"change",()=>{const a=t._modelValue,s=yg(t),d=t.checked,l=t[Kc];if(ar(a)){const o=H1(a,s),g=o!==-1;if(d&&!g)l(a.concat(s));else if(!d&&g){const _=[...a];_.splice(o,1),l(_)}}else if(Gp(a)){const o=new Set(a);d?o.add(s):o.delete(s),l(o)}else l(RE(t,d))})},mounted:JC,beforeUpdate(t,e,n){t[Kc]=Ef(n),JC(t,e,n)}};function JC(t,{value:e,oldValue:n},a){t._modelValue=e,ar(e)?t.checked=H1(e,a.props.value)>-1:Gp(e)?t.checked=e.has(a.props.value):e!==n&&(t.checked=Cf(e,RE(t,!0)))}const u2={created(t,{value:e},n){t.checked=Cf(e,n.props.value),t[Kc]=Ef(n),sd(t,"change",()=>{t[Kc](yg(t))})},beforeUpdate(t,{value:e,oldValue:n},a){t[Kc]=Ef(a),e!==n&&(t.checked=Cf(e,a.props.value))}},ib={deep:!0,created(t,{value:e,modifiers:{number:n}},a){const s=Gp(e);sd(t,"change",()=>{const d=Array.prototype.filter.call(t.options,l=>l.selected).map(l=>n?l1(yg(l)):yg(l));t[Kc](t.multiple?s?new Set(d):d:d[0]),t._assigning=!0,El(()=>{t._assigning=!1})}),t[Kc]=Ef(a)},mounted(t,{value:e,modifiers:{number:n}}){tI(t,e)},beforeUpdate(t,e,n){t[Kc]=Ef(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||tI(t,e)}};function tI(t,e,n){const a=t.multiple,s=ar(e);if(!(a&&!s&&!Gp(e))){for(let d=0,l=t.options.length;d<l;d++){const o=t.options[d],g=yg(o);if(a)if(s){const _=typeof g;_==="string"||_==="number"?o.selected=e.some(I=>String(I)===String(g)):o.selected=H1(e,g)>-1}else o.selected=e.has(g);else if(Cf(yg(o),e)){t.selectedIndex!==d&&(t.selectedIndex=d);return}}!a&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function yg(t){return"_value"in t?t._value:t.value}function RE(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const h2={created(t,e,n){R_(t,e,n,null,"created")},mounted(t,e,n){R_(t,e,n,null,"mounted")},beforeUpdate(t,e,n,a){R_(t,e,n,a,"beforeUpdate")},updated(t,e,n,a){R_(t,e,n,a,"updated")}};function DE(t,e){switch(t){case"SELECT":return ib;case"TEXTAREA":return wh;default:switch(e){case"checkbox":return rb;case"radio":return u2;default:return wh}}}function R_(t,e,n,a,s){const l=DE(t.tagName,n.props&&n.props.type)[s];l&&l(t,e,n,a)}function eR(){wh.getSSRProps=({value:t})=>({value:t}),u2.getSSRProps=({value:t},e)=>{if(e.props&&Cf(e.props.value,t))return{checked:!0}},rb.getSSRProps=({value:t},e)=>{if(ar(t)){if(e.props&&H1(t,e.props.value)>-1)return{checked:!0}}else if(Gp(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},h2.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=DE(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const nR=["ctrl","shift","alt","meta"],rR={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>nR.some(n=>t[`${n}Key`]&&!e.includes(n))},_i=(t,e)=>{const n=t._withMods||(t._withMods={}),a=e.join(".");return n[a]||(n[a]=(s,...d)=>{for(let l=0;l<e.length;l++){const o=rR[e[l]];if(o&&o(s,e))return}return t(s,...d)})},iR={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},oR=(t,e)=>{const n=t._withKeys||(t._withKeys={}),a=e.join(".");return n[a]||(n[a]=s=>{if(!("key"in s))return;const d=pc(s.key);if(e.some(l=>l===d||iR[l]===d))return t(s)})},OE=Ji({patchProp:HL},IL);let oy,eI=!1;function zE(){return oy||(oy=KS(OE))}function FE(){return oy=eI?oy:YS(OE),eI=!0,oy}const uw=(...t)=>{zE().render(...t)},BE=(...t)=>{FE().hydrate(...t)},NE=(...t)=>{const e=zE().createApp(...t),{mount:n}=e;return e.mount=a=>{const s=VE(a);if(!s)return;const d=e._component;!Mr(d)&&!d.render&&!d.template&&(d.template=s.innerHTML),s.innerHTML="";const l=n(s,!1,jE(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),l},e},aR=(...t)=>{const e=FE().createApp(...t),{mount:n}=e;return e.mount=a=>{const s=VE(a);if(s)return n(s,!0,jE(s))},e};function jE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function VE(t){return fo(t)?document.querySelector(t):t}let nI=!1;const sR=()=>{nI||(nI=!0,eR(),PL())};/**
* vue v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const lR=()=>{},cR=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:uE,BaseTransitionPropsValidators:l2,Comment:ja,DeprecationTypes:AL,EffectScope:Hw,ErrorCodes:Yk,ErrorTypeStrings:mL,Fragment:mr,KeepAlive:X5,ReactiveEffect:fg,Static:zp,Suspense:h5,Teleport:ew,Text:Bp,TrackOpTypes:Wk,Transition:tb,TransitionGroup:KL,TriggerOpTypes:qk,VueElement:nb,assertNumber:Kk,callWithAsyncErrorHandling:mc,callWithErrorHandling:ud,camelize:el,capitalize:Ny,cloneVNode:Ah,compatUtils:xL,compile:lR,computed:bn,createApp:NE,createBlock:tn,createCommentVNode:Cn,createElementBlock:pe,createElementVNode:zt,createHydrationRenderer:YS,createPropsRestProxy:P5,createRenderer:KS,createSSRApp:aR,createSlots:y5,createStaticVNode:J1,createTextVNode:ho,createVNode:te,customRef:xS,defineAsyncComponent:v5,defineComponent:rr,defineCustomElement:TE,defineEmits:A5,defineExpose:w5,defineModel:M5,defineOptions:C5,defineProps:x5,defineSSRCustomElement:$L,defineSlots:I5,devtools:gL,effect:mk,effectScope:fk,getCurrentInstance:xc,getCurrentScope:Gw,getTransitionRawChildren:Q1,guardReactiveProps:Mo,h:Sf,handleError:$p,hasInjectionContext:N5,hydrate:BE,initCustomFormatter:dL,initDirectivesForSSR:sR,inject:Va,isMemoSame:xE,isProxy:Kw,isReactive:ig,isReadonly:pg,isRef:po,isRuntimeOnly:cL,isShallow:_y,isVNode:Mf,markRaw:vS,mergeDefaults:T5,mergeModels:to,mergeProps:Tr,nextTick:El,normalizeClass:Li,normalizeProps:No,normalizeStyle:fi,onActivated:aE,onBeforeMount:PS,onBeforeUnmount:Zp,onBeforeUpdate:kS,onDeactivated:sE,onErrorCaptured:OS,onMounted:mo,onRenderTracked:DS,onRenderTriggered:RS,onScopeDispose:iS,onServerPrefetch:LS,onUnmounted:yd,onUpdated:X1,openBlock:St,popScopeId:bc,provide:xf,proxyRefs:Qw,pushScopeId:_c,queuePostFlushCb:h1,reactive:ls,readonly:jy,ref:gn,registerRuntimeCompiler:lL,render:uw,renderList:ki,renderSlot:qn,resolveComponent:Js,resolveDirective:c5,resolveDynamicComponent:sa,resolveFilter:bL,resolveTransitionHooks:mg,setBlockTracking:nw,setDevtoolsHook:yL,setTransitionHooks:If,shallowReactive:qw,shallowReadonly:zk,shallowRef:Mg,ssrContextKey:tE,ssrUtils:_L,stop:gk,toDisplayString:Rn,toHandlerKey:ey,toHandlers:_5,toRaw:ui,toRef:Zk,toRefs:Hk,toValue:jk,transformVNodeArgs:rL,triggerRef:Nk,unref:ct,useAttrs:E5,useCssModule:WL,useCssVars:kL,useModel:la,useSSRContext:eE,useSlots:FS,useTransitionState:s2,vModelCheckbox:rb,vModelDynamic:h2,vModelRadio:u2,vModelSelect:ib,vModelText:wh,vShow:eb,version:AE,warn:pL,watch:Xo,watchEffect:nE,watchPostEffect:rE,watchSyncEffect:iE,withAsyncContext:k5,withCtx:Se,withDefaults:S5,withDirectives:gc,withKeys:oR,withMemo:fL,withModifiers:_i,withScopeId:r5},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.3.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Hm=typeof document<"u";function uR(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Oi=Object.assign;function tA(t,e){const n={};for(const a in e){const s=e[a];n[a]=Nu(s)?s.map(t):t(s)}return n}const ay=()=>{},Nu=Array.isArray,UE=/#/g,hR=/&/g,dR=/\//g,fR=/=/g,pR=/\?/g,HE=/\+/g,mR=/%5B/g,gR=/%5D/g,GE=/%5E/g,yR=/%60/g,$E=/%7B/g,vR=/%7C/g,ZE=/%7D/g,_R=/%20/g;function d2(t){return encodeURI(""+t).replace(vR,"|").replace(mR,"[").replace(gR,"]")}function bR(t){return d2(t).replace($E,"{").replace(ZE,"}").replace(GE,"^")}function hw(t){return d2(t).replace(HE,"%2B").replace(_R,"+").replace(UE,"%23").replace(hR,"%26").replace(yR,"`").replace($E,"{").replace(ZE,"}").replace(GE,"^")}function xR(t){return hw(t).replace(fR,"%3D")}function AR(t){return d2(t).replace(UE,"%23").replace(pR,"%3F")}function wR(t){return t==null?"":AR(t).replace(dR,"%2F")}function My(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const CR=/\/$/,IR=t=>t.replace(CR,"");function eA(t,e,n="/"){let a,s={},d="",l="";const o=e.indexOf("#");let g=e.indexOf("?");return o<g&&o>=0&&(g=-1),g>-1&&(a=e.slice(0,g),d=e.slice(g+1,o>-1?o:e.length),s=t(d)),o>-1&&(a=a||e.slice(0,o),l=e.slice(o,e.length)),a=TR(a??e,n),{fullPath:a+(d&&"?")+d+l,path:a,query:s,hash:My(l)}}function MR(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function rI(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function SR(t,e,n){const a=e.matched.length-1,s=n.matched.length-1;return a>-1&&a===s&&vg(e.matched[a],n.matched[s])&&WE(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function vg(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function WE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!ER(t[n],e[n]))return!1;return!0}function ER(t,e){return Nu(t)?iI(t,e):Nu(e)?iI(e,t):t===e}function iI(t,e){return Nu(e)?t.length===e.length&&t.every((n,a)=>n===e[a]):t.length===1&&t[0]===e}function TR(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),a=t.split("/"),s=a[a.length-1];(s===".."||s===".")&&a.push("");let d=n.length-1,l,o;for(l=0;l<a.length;l++)if(o=a[l],o!==".")if(o==="..")d>1&&d--;else break;return n.slice(0,d).join("/")+"/"+a.slice(l).join("/")}var Sy;(function(t){t.pop="pop",t.push="push"})(Sy||(Sy={}));var sy;(function(t){t.back="back",t.forward="forward",t.unknown=""})(sy||(sy={}));function PR(t){if(!t)if(Hm){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),IR(t)}const kR=/^[^#]+#/;function LR(t,e){return t.replace(kR,"#")+e}function RR(t,e){const n=document.documentElement.getBoundingClientRect(),a=t.getBoundingClientRect();return{behavior:e.behavior,left:a.left-n.left-(e.left||0),top:a.top-n.top-(e.top||0)}}const ob=()=>({left:window.scrollX,top:window.scrollY});function DR(t){let e;if("el"in t){const n=t.el,a=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=RR(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function oI(t,e){return(history.state?history.state.position-e:-1)+t}const dw=new Map;function OR(t,e){dw.set(t,e)}function zR(t){const e=dw.get(t);return dw.delete(t),e}let FR=()=>location.protocol+"//"+location.host;function qE(t,e){const{pathname:n,search:a,hash:s}=e,d=t.indexOf("#");if(d>-1){let o=s.includes(t.slice(d))?t.slice(d).length:1,g=s.slice(o);return g[0]!=="/"&&(g="/"+g),rI(g,"")}return rI(n,t)+a+s}function BR(t,e,n,a){let s=[],d=[],l=null;const o=({state:E})=>{const S=qE(t,location),k=n.value,D=e.value;let N=0;if(E){if(n.value=S,e.value=E,l&&l===k){l=null;return}N=D?E.position-D.position:0}else a(S);s.forEach(U=>{U(n.value,k,{delta:N,type:Sy.pop,direction:N?N>0?sy.forward:sy.back:sy.unknown})})};function g(){l=n.value}function _(E){s.push(E);const S=()=>{const k=s.indexOf(E);k>-1&&s.splice(k,1)};return d.push(S),S}function I(){const{history:E}=window;E.state&&E.replaceState(Oi({},E.state,{scroll:ob()}),"")}function C(){for(const E of d)E();d=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",I)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",I,{passive:!0}),{pauseListeners:g,listen:_,destroy:C}}function aI(t,e,n,a=!1,s=!1){return{back:t,current:e,forward:n,replaced:a,position:window.history.length,scroll:s?ob():null}}function NR(t){const{history:e,location:n}=window,a={value:qE(t,n)},s={value:e.state};s.value||d(a.value,{back:null,current:a.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function d(g,_,I){const C=t.indexOf("#"),E=C>-1?(n.host&&document.querySelector("base")?t:t.slice(C))+g:FR()+t+g;try{e[I?"replaceState":"pushState"](_,"",E),s.value=_}catch(S){console.error(S),n[I?"replace":"assign"](E)}}function l(g,_){const I=Oi({},e.state,aI(s.value.back,g,s.value.forward,!0),_,{position:s.value.position});d(g,I,!0),a.value=g}function o(g,_){const I=Oi({},s.value,e.state,{forward:g,scroll:ob()});d(I.current,I,!0);const C=Oi({},aI(a.value,g,null),{position:I.position+1},_);d(g,C,!1),a.value=g}return{location:a,state:s,push:o,replace:l}}function jR(t){t=PR(t);const e=NR(t),n=BR(t,e.state,e.location,e.replace);function a(d,l=!0){l||n.pauseListeners(),history.go(d)}const s=Oi({location:"",base:t,go:a,createHref:LR.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function VR(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),jR(t)}function UR(t){return typeof t=="string"||t&&typeof t=="object"}function KE(t){return typeof t=="string"||typeof t=="symbol"}const lf={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},YE=Symbol("");var sI;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(sI||(sI={}));function _g(t,e){return Oi(new Error,{type:t,[YE]:!0},e)}function ed(t,e){return t instanceof Error&&YE in t&&(e==null||!!(t.type&e))}const lI="[^/]+?",HR={sensitive:!1,strict:!1,start:!0,end:!0},GR=/[.+*?^${}()[\]/\\]/g;function $R(t,e){const n=Oi({},HR,e),a=[];let s=n.start?"^":"";const d=[];for(const _ of t){const I=_.length?[]:[90];n.strict&&!_.length&&(s+="/");for(let C=0;C<_.length;C++){const E=_[C];let S=40+(n.sensitive?.25:0);if(E.type===0)C||(s+="/"),s+=E.value.replace(GR,"\\$&"),S+=40;else if(E.type===1){const{value:k,repeatable:D,optional:N,regexp:U}=E;d.push({name:k,repeatable:D,optional:N});const F=U||lI;if(F!==lI){S+=10;try{new RegExp(`(${F})`)}catch($){throw new Error(`Invalid custom RegExp for param "${k}" (${F}): `+$.message)}}let j=D?`((?:${F})(?:/(?:${F}))*)`:`(${F})`;C||(j=N&&_.length<2?`(?:/${j})`:"/"+j),N&&(j+="?"),s+=j,S+=20,N&&(S+=-8),D&&(S+=-20),F===".*"&&(S+=-50)}I.push(S)}a.push(I)}if(n.strict&&n.end){const _=a.length-1;a[_][a[_].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const l=new RegExp(s,n.sensitive?"":"i");function o(_){const I=_.match(l),C={};if(!I)return null;for(let E=1;E<I.length;E++){const S=I[E]||"",k=d[E-1];C[k.name]=S&&k.repeatable?S.split("/"):S}return C}function g(_){let I="",C=!1;for(const E of t){(!C||!I.endsWith("/"))&&(I+="/"),C=!1;for(const S of E)if(S.type===0)I+=S.value;else if(S.type===1){const{value:k,repeatable:D,optional:N}=S,U=k in _?_[k]:"";if(Nu(U)&&!D)throw new Error(`Provided param "${k}" is an array but it is not repeatable (* or + modifiers)`);const F=Nu(U)?U.join("/"):U;if(!F)if(N)E.length<2&&(I.endsWith("/")?I=I.slice(0,-1):C=!0);else throw new Error(`Missing required param "${k}"`);I+=F}}return I||"/"}return{re:l,score:a,keys:d,parse:o,stringify:g}}function ZR(t,e){let n=0;for(;n<t.length&&n<e.length;){const a=e[n]-t[n];if(a)return a;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function XE(t,e){let n=0;const a=t.score,s=e.score;for(;n<a.length&&n<s.length;){const d=ZR(a[n],s[n]);if(d)return d;n++}if(Math.abs(s.length-a.length)===1){if(cI(a))return 1;if(cI(s))return-1}return s.length-a.length}function cI(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const WR={type:0,value:""},qR=/[a-zA-Z0-9_]/;function KR(t){if(!t)return[[]];if(t==="/")return[[WR]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(S){throw new Error(`ERR (${n})/"${_}": ${S}`)}let n=0,a=n;const s=[];let d;function l(){d&&s.push(d),d=[]}let o=0,g,_="",I="";function C(){_&&(n===0?d.push({type:0,value:_}):n===1||n===2||n===3?(d.length>1&&(g==="*"||g==="+")&&e(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),d.push({type:1,value:_,regexp:I,repeatable:g==="*"||g==="+",optional:g==="*"||g==="?"})):e("Invalid state to consume buffer"),_="")}function E(){_+=g}for(;o<t.length;){if(g=t[o++],g==="\\"&&n!==2){a=n,n=4;continue}switch(n){case 0:g==="/"?(_&&C(),l()):g===":"?(C(),n=1):E();break;case 4:E(),n=a;break;case 1:g==="("?n=2:qR.test(g)?E():(C(),n=0,g!=="*"&&g!=="?"&&g!=="+"&&o--);break;case 2:g===")"?I[I.length-1]=="\\"?I=I.slice(0,-1)+g:n=3:I+=g;break;case 3:C(),n=0,g!=="*"&&g!=="?"&&g!=="+"&&o--,I="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${_}"`),C(),l(),s}function YR(t,e,n){const a=$R(KR(t.path),n),s=Oi(a,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function XR(t,e){const n=[],a=new Map;e=dI({strict:!1,end:!0,sensitive:!1},e);function s(I){return a.get(I)}function d(I,C,E){const S=!E,k=QR(I);k.aliasOf=E&&E.record;const D=dI(e,I),N=[k];if("alias"in I){const j=typeof I.alias=="string"?[I.alias]:I.alias;for(const $ of j)N.push(Oi({},k,{components:E?E.record.components:k.components,path:$,aliasOf:E?E.record:k}))}let U,F;for(const j of N){const{path:$}=j;if(C&&$[0]!=="/"){const K=C.record.path,tt=K[K.length-1]==="/"?"":"/";j.path=C.record.path+($&&tt+$)}if(U=YR(j,C,D),E?E.alias.push(U):(F=F||U,F!==U&&F.alias.push(U),S&&I.name&&!hI(U)&&l(I.name)),QE(U)&&g(U),k.children){const K=k.children;for(let tt=0;tt<K.length;tt++)d(K[tt],U,E&&E.children[tt])}E=E||U}return F?()=>{l(F)}:ay}function l(I){if(KE(I)){const C=a.get(I);C&&(a.delete(I),n.splice(n.indexOf(C),1),C.children.forEach(l),C.alias.forEach(l))}else{const C=n.indexOf(I);C>-1&&(n.splice(C,1),I.record.name&&a.delete(I.record.name),I.children.forEach(l),I.alias.forEach(l))}}function o(){return n}function g(I){const C=e4(I,n);n.splice(C,0,I),I.record.name&&!hI(I)&&a.set(I.record.name,I)}function _(I,C){let E,S={},k,D;if("name"in I&&I.name){if(E=a.get(I.name),!E)throw _g(1,{location:I});D=E.record.name,S=Oi(uI(C.params,E.keys.filter(F=>!F.optional).concat(E.parent?E.parent.keys.filter(F=>F.optional):[]).map(F=>F.name)),I.params&&uI(I.params,E.keys.map(F=>F.name))),k=E.stringify(S)}else if(I.path!=null)k=I.path,E=n.find(F=>F.re.test(k)),E&&(S=E.parse(k),D=E.record.name);else{if(E=C.name?a.get(C.name):n.find(F=>F.re.test(C.path)),!E)throw _g(1,{location:I,currentLocation:C});D=E.record.name,S=Oi({},C.params,I.params),k=E.stringify(S)}const N=[];let U=E;for(;U;)N.unshift(U.record),U=U.parent;return{name:D,path:k,params:S,matched:N,meta:t4(N)}}return t.forEach(I=>d(I)),{addRoute:d,resolve:_,removeRoute:l,getRoutes:o,getRecordMatcher:s}}function uI(t,e){const n={};for(const a of e)a in t&&(n[a]=t[a]);return n}function QR(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:JR(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function JR(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const a in t.components)e[a]=typeof n=="object"?n[a]:n;return e}function hI(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function t4(t){return t.reduce((e,n)=>Oi(e,n.meta),{})}function dI(t,e){const n={};for(const a in t)n[a]=a in e?e[a]:t[a];return n}function e4(t,e){let n=0,a=e.length;for(;n!==a;){const d=n+a>>1;XE(t,e[d])<0?a=d:n=d+1}const s=n4(t);return s&&(a=e.lastIndexOf(s,a-1)),a}function n4(t){let e=t;for(;e=e.parent;)if(QE(e)&&XE(t,e)===0)return e}function QE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function r4(t){const e={};if(t===""||t==="?")return e;const a=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<a.length;++s){const d=a[s].replace(HE," "),l=d.indexOf("="),o=My(l<0?d:d.slice(0,l)),g=l<0?null:My(d.slice(l+1));if(o in e){let _=e[o];Nu(_)||(_=e[o]=[_]),_.push(g)}else e[o]=g}return e}function fI(t){let e="";for(let n in t){const a=t[n];if(n=xR(n),a==null){a!==void 0&&(e+=(e.length?"&":"")+n);continue}(Nu(a)?a.map(d=>d&&hw(d)):[a&&hw(a)]).forEach(d=>{d!==void 0&&(e+=(e.length?"&":"")+n,d!=null&&(e+="="+d))})}return e}function i4(t){const e={};for(const n in t){const a=t[n];a!==void 0&&(e[n]=Nu(a)?a.map(s=>s==null?null:""+s):a==null?a:""+a)}return e}const o4=Symbol(""),pI=Symbol(""),f2=Symbol(""),JE=Symbol(""),fw=Symbol("");function B0(){let t=[];function e(a){return t.push(a),()=>{const s=t.indexOf(a);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ff(t,e,n,a,s,d=l=>l()){const l=a&&(a.enterCallbacks[s]=a.enterCallbacks[s]||[]);return()=>new Promise((o,g)=>{const _=E=>{E===!1?g(_g(4,{from:n,to:e})):E instanceof Error?g(E):UR(E)?g(_g(2,{from:e,to:E})):(l&&a.enterCallbacks[s]===l&&typeof E=="function"&&l.push(E),o())},I=d(()=>t.call(a&&a.instances[s],e,n,_));let C=Promise.resolve(I);t.length<3&&(C=C.then(_)),C.catch(E=>g(E))})}function nA(t,e,n,a,s=d=>d()){const d=[];for(const l of t)for(const o in l.components){let g=l.components[o];if(!(e!=="beforeRouteEnter"&&!l.instances[o]))if(a4(g)){const I=(g.__vccOpts||g)[e];I&&d.push(ff(I,n,a,l,o,s))}else{let _=g();d.push(()=>_.then(I=>{if(!I)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${l.path}"`));const C=uR(I)?I.default:I;l.components[o]=C;const S=(C.__vccOpts||C)[e];return S&&ff(S,n,a,l,o,s)()}))}}return d}function a4(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function mI(t){const e=Va(f2),n=Va(JE),a=bn(()=>{const g=ct(t.to);return e.resolve(g)}),s=bn(()=>{const{matched:g}=a.value,{length:_}=g,I=g[_-1],C=n.matched;if(!I||!C.length)return-1;const E=C.findIndex(vg.bind(null,I));if(E>-1)return E;const S=gI(g[_-2]);return _>1&&gI(I)===S&&C[C.length-1].path!==S?C.findIndex(vg.bind(null,g[_-2])):E}),d=bn(()=>s.value>-1&&u4(n.params,a.value.params)),l=bn(()=>s.value>-1&&s.value===n.matched.length-1&&WE(n.params,a.value.params));function o(g={}){return c4(g)?e[ct(t.replace)?"replace":"push"](ct(t.to)).catch(ay):Promise.resolve()}return{route:a,href:bn(()=>a.value.href),isActive:d,isExactActive:l,navigate:o}}const s4=rr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:mI,setup(t,{slots:e}){const n=ls(mI(t)),{options:a}=Va(f2),s=bn(()=>({[yI(t.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[yI(t.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const d=e.default&&e.default(n);return t.custom?d:Sf("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},d)}}}),l4=s4;function c4(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function u4(t,e){for(const n in e){const a=e[n],s=t[n];if(typeof a=="string"){if(a!==s)return!1}else if(!Nu(s)||s.length!==a.length||a.some((d,l)=>d!==s[l]))return!1}return!0}function gI(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const yI=(t,e,n)=>t??e??n,h4=rr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const a=Va(fw),s=bn(()=>t.route||a.value),d=Va(pI,0),l=bn(()=>{let _=ct(d);const{matched:I}=s.value;let C;for(;(C=I[_])&&!C.components;)_++;return _}),o=bn(()=>s.value.matched[l.value]);xf(pI,bn(()=>l.value+1)),xf(o4,o),xf(fw,s);const g=gn();return Xo(()=>[g.value,o.value,t.name],([_,I,C],[E,S,k])=>{I&&(I.instances[C]=_,S&&S!==I&&_&&_===E&&(I.leaveGuards.size||(I.leaveGuards=S.leaveGuards),I.updateGuards.size||(I.updateGuards=S.updateGuards))),_&&I&&(!S||!vg(I,S)||!E)&&(I.enterCallbacks[C]||[]).forEach(D=>D(_))},{flush:"post"}),()=>{const _=s.value,I=t.name,C=o.value,E=C&&C.components[I];if(!E)return vI(n.default,{Component:E,route:_});const S=C.props[I],k=S?S===!0?_.params:typeof S=="function"?S(_):S:null,N=Sf(E,Oi({},k,e,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(C.instances[I]=null)},ref:g}));return vI(n.default,{Component:N,route:_})||N}}});function vI(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const tT=h4;function d4(t){const e=XR(t.routes,t),n=t.parseQuery||r4,a=t.stringifyQuery||fI,s=t.history,d=B0(),l=B0(),o=B0(),g=Mg(lf);let _=lf;Hm&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const I=tA.bind(null,be=>""+be),C=tA.bind(null,wR),E=tA.bind(null,My);function S(be,Me){let xe,Be;return KE(be)?(xe=e.getRecordMatcher(be),Be=Me):Be=be,e.addRoute(Be,xe)}function k(be){const Me=e.getRecordMatcher(be);Me&&e.removeRoute(Me)}function D(){return e.getRoutes().map(be=>be.record)}function N(be){return!!e.getRecordMatcher(be)}function U(be,Me){if(Me=Oi({},Me||g.value),typeof be=="string"){const H=eA(n,be,Me.path),Rt=e.resolve({path:H.path},Me),Pt=s.createHref(H.fullPath);return Oi(H,Rt,{params:E(Rt.params),hash:My(H.hash),redirectedFrom:void 0,href:Pt})}let xe;if(be.path!=null)xe=Oi({},be,{path:eA(n,be.path,Me.path).path});else{const H=Oi({},be.params);for(const Rt in H)H[Rt]==null&&delete H[Rt];xe=Oi({},be,{params:C(H)}),Me.params=C(Me.params)}const Be=e.resolve(xe,Me),Je=be.hash||"";Be.params=I(E(Be.params));const Ln=MR(a,Oi({},be,{hash:bR(Je),path:Be.path})),Tt=s.createHref(Ln);return Oi({fullPath:Ln,hash:Je,query:a===fI?i4(be.query):be.query||{}},Be,{redirectedFrom:void 0,href:Tt})}function F(be){return typeof be=="string"?eA(n,be,g.value.path):Oi({},be)}function j(be,Me){if(_!==be)return _g(8,{from:Me,to:be})}function $(be){return it(be)}function K(be){return $(Oi(F(be),{replace:!0}))}function tt(be){const Me=be.matched[be.matched.length-1];if(Me&&Me.redirect){const{redirect:xe}=Me;let Be=typeof xe=="function"?xe(be):xe;return typeof Be=="string"&&(Be=Be.includes("?")||Be.includes("#")?Be=F(Be):{path:Be},Be.params={}),Oi({query:be.query,hash:be.hash,params:Be.path!=null?{}:be.params},Be)}}function it(be,Me){const xe=_=U(be),Be=g.value,Je=be.state,Ln=be.force,Tt=be.replace===!0,H=tt(xe);if(H)return it(Oi(F(H),{state:typeof H=="object"?Oi({},Je,H.state):Je,force:Ln,replace:Tt}),Me||xe);const Rt=xe;Rt.redirectedFrom=Me;let Pt;return!Ln&&SR(a,Be,xe)&&(Pt=_g(16,{to:Rt,from:Be}),Jt(Be,Be,!0,!1)),(Pt?Promise.resolve(Pt):ut(Rt,Be)).catch(gt=>ed(gt)?ed(gt,2)?gt:en(gt):ae(gt,Rt,Be)).then(gt=>{if(gt){if(ed(gt,2))return it(Oi({replace:Tt},F(gt.to),{state:typeof gt.to=="object"?Oi({},Je,gt.to.state):Je,force:Ln}),Me||Rt)}else gt=ot(Rt,Be,!0,Tt,Je);return Ct(Rt,Be,gt),gt})}function et(be,Me){const xe=j(be,Me);return xe?Promise.reject(xe):Promise.resolve()}function q(be){const Me=$e.values().next().value;return Me&&typeof Me.runWithContext=="function"?Me.runWithContext(be):be()}function ut(be,Me){let xe;const[Be,Je,Ln]=f4(be,Me);xe=nA(Be.reverse(),"beforeRouteLeave",be,Me);for(const H of Be)H.leaveGuards.forEach(Rt=>{xe.push(ff(Rt,be,Me))});const Tt=et.bind(null,be,Me);return xe.push(Tt),nn(xe).then(()=>{xe=[];for(const H of d.list())xe.push(ff(H,be,Me));return xe.push(Tt),nn(xe)}).then(()=>{xe=nA(Je,"beforeRouteUpdate",be,Me);for(const H of Je)H.updateGuards.forEach(Rt=>{xe.push(ff(Rt,be,Me))});return xe.push(Tt),nn(xe)}).then(()=>{xe=[];for(const H of Ln)if(H.beforeEnter)if(Nu(H.beforeEnter))for(const Rt of H.beforeEnter)xe.push(ff(Rt,be,Me));else xe.push(ff(H.beforeEnter,be,Me));return xe.push(Tt),nn(xe)}).then(()=>(be.matched.forEach(H=>H.enterCallbacks={}),xe=nA(Ln,"beforeRouteEnter",be,Me,q),xe.push(Tt),nn(xe))).then(()=>{xe=[];for(const H of l.list())xe.push(ff(H,be,Me));return xe.push(Tt),nn(xe)}).catch(H=>ed(H,8)?H:Promise.reject(H))}function Ct(be,Me,xe){o.list().forEach(Be=>q(()=>Be(be,Me,xe)))}function ot(be,Me,xe,Be,Je){const Ln=j(be,Me);if(Ln)return Ln;const Tt=Me===lf,H=Hm?history.state:{};xe&&(Be||Tt?s.replace(be.fullPath,Oi({scroll:Tt&&H&&H.scroll},Je)):s.push(be.fullPath,Je)),g.value=be,Jt(be,Me,xe,Tt),en()}let bt;function X(){bt||(bt=s.listen((be,Me,xe)=>{if(!Ce.listening)return;const Be=U(be),Je=tt(Be);if(Je){it(Oi(Je,{replace:!0}),Be).catch(ay);return}_=Be;const Ln=g.value;Hm&&OR(oI(Ln.fullPath,xe.delta),ob()),ut(Be,Ln).catch(Tt=>ed(Tt,12)?Tt:ed(Tt,2)?(it(Tt.to,Be).then(H=>{ed(H,20)&&!xe.delta&&xe.type===Sy.pop&&s.go(-1,!1)}).catch(ay),Promise.reject()):(xe.delta&&s.go(-xe.delta,!1),ae(Tt,Be,Ln))).then(Tt=>{Tt=Tt||ot(Be,Ln,!1),Tt&&(xe.delta&&!ed(Tt,8)?s.go(-xe.delta,!1):xe.type===Sy.pop&&ed(Tt,20)&&s.go(-1,!1)),Ct(Be,Ln,Tt)}).catch(ay)}))}let Wt=B0(),Vt=B0(),Bt;function ae(be,Me,xe){en(be);const Be=Vt.list();return Be.length?Be.forEach(Je=>Je(be,Me,xe)):console.error(be),Promise.reject(be)}function ye(){return Bt&&g.value!==lf?Promise.resolve():new Promise((be,Me)=>{Wt.add([be,Me])})}function en(be){return Bt||(Bt=!be,X(),Wt.list().forEach(([Me,xe])=>be?xe(be):Me()),Wt.reset()),be}function Jt(be,Me,xe,Be){const{scrollBehavior:Je}=t;if(!Hm||!Je)return Promise.resolve();const Ln=!xe&&zR(oI(be.fullPath,0))||(Be||!xe)&&history.state&&history.state.scroll||null;return El().then(()=>Je(be,Me,Ln)).then(Tt=>Tt&&DR(Tt)).catch(Tt=>ae(Tt,be,Me))}const Gt=be=>s.go(be);let Re;const $e=new Set,Ce={currentRoute:g,listening:!0,addRoute:S,removeRoute:k,hasRoute:N,getRoutes:D,resolve:U,options:t,push:$,replace:K,go:Gt,back:()=>Gt(-1),forward:()=>Gt(1),beforeEach:d.add,beforeResolve:l.add,afterEach:o.add,onError:Vt.add,isReady:ye,install(be){const Me=this;be.component("RouterLink",l4),be.component("RouterView",tT),be.config.globalProperties.$router=Me,Object.defineProperty(be.config.globalProperties,"$route",{enumerable:!0,get:()=>ct(g)}),Hm&&!Re&&g.value===lf&&(Re=!0,$(s.location).catch(Je=>{}));const xe={};for(const Je in lf)Object.defineProperty(xe,Je,{get:()=>g.value[Je],enumerable:!0});be.provide(f2,Me),be.provide(JE,qw(xe)),be.provide(fw,g);const Be=be.unmount;$e.add(be),be.unmount=function(){$e.delete(be),$e.size<1&&(_=lf,bt&&bt(),bt=null,g.value=lf,Re=!1,Bt=!1),Be()}}};function nn(be){return be.reduce((Me,xe)=>Me.then(()=>q(xe)),Promise.resolve())}return Ce}function f4(t,e){const n=[],a=[],s=[],d=Math.max(e.matched.length,t.matched.length);for(let l=0;l<d;l++){const o=e.matched[l];o&&(t.matched.find(_=>vg(_,o))?a.push(o):n.push(o));const g=t.matched[l];g&&(e.matched.find(_=>vg(_,g))||s.push(g))}return[n,a,s]}function Sg(t){return Gw()?(iS(t),!0):!1}function p4(){const t=new Set,e=s=>{t.delete(s)};return{on:s=>{t.add(s);const d=()=>e(s);return Sg(d),{off:d}},off:e,trigger:(...s)=>Promise.all(Array.from(t).map(d=>d(...s)))}}function p2(t,e){const n=window;return n.$_hungpv_store||(n.$_hungpv_store={}),n.$_hungpv_store[t]?e=n.$_hungpv_store[t]:n.$_hungpv_store[t]=e,e}function m4(t,e){return n=>Object.keys(t).reduce((a,s)=>{const l=typeof t[s]=="object"&&t[s]!=null&&!Array.isArray(t[s])?t[s]:{type:t[s]};return n&&s in n?a[s]={...l,default:n[s]}:a[s]=l,e&&!a[s].source&&(a[s].source=e),a},{})}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function eT(t){return typeof t>"u"||t===null}function g4(t){return typeof t=="object"&&t!==null}function y4(t){return Array.isArray(t)?t:eT(t)?[]:[t]}function v4(t,e){var n,a,s,d;if(e)for(d=Object.keys(e),n=0,a=d.length;n<a;n+=1)s=d[n],t[s]=e[s];return t}function _4(t,e){var n="",a;for(a=0;a<e;a+=1)n+=t;return n}function b4(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var x4=eT,A4=g4,w4=y4,C4=_4,I4=b4,M4=v4,m2={isNothing:x4,isObject:A4,toArray:w4,repeat:C4,isNegativeZero:I4,extend:M4};function nT(t,e){var n="",a=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),a+" "+n):a}function Ey(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=nT(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ey.prototype=Object.create(Error.prototype);Ey.prototype.constructor=Ey;Ey.prototype.toString=function(e){return this.name+": "+nT(this,e)};var Pp=Ey,S4=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],E4=["scalar","sequence","mapping"];function T4(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(a){e[String(a)]=n})}),e}function P4(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(S4.indexOf(n)===-1)throw new Pp('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=T4(e.styleAliases||null),E4.indexOf(this.kind)===-1)throw new Pp('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Is=P4;function _I(t,e){var n=[];return t[e].forEach(function(a){var s=n.length;n.forEach(function(d,l){d.tag===a.tag&&d.kind===a.kind&&d.multi===a.multi&&(s=l)}),n[s]=a}),n}function k4(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function a(s){s.multi?(t.multi[s.kind].push(s),t.multi.fallback.push(s)):t[s.kind][s.tag]=t.fallback[s.tag]=s}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(a);return t}function pw(t){return this.extend(t)}pw.prototype.extend=function(e){var n=[],a=[];if(e instanceof Is)a.push(e);else if(Array.isArray(e))a=a.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(a=a.concat(e.explicit));else throw new Pp("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(d){if(!(d instanceof Is))throw new Pp("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(d.loadKind&&d.loadKind!=="scalar")throw new Pp("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(d.multi)throw new Pp("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(d){if(!(d instanceof Is))throw new Pp("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(pw.prototype);return s.implicit=(this.implicit||[]).concat(n),s.explicit=(this.explicit||[]).concat(a),s.compiledImplicit=_I(s,"implicit"),s.compiledExplicit=_I(s,"explicit"),s.compiledTypeMap=k4(s.compiledImplicit,s.compiledExplicit),s};var L4=pw,R4=new Is("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),D4=new Is("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),O4=new Is("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),z4=new L4({explicit:[R4,D4,O4]});function F4(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function B4(){return null}function N4(t){return t===null}var j4=new Is("tag:yaml.org,2002:null",{kind:"scalar",resolve:F4,construct:B4,predicate:N4,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function V4(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function U4(t){return t==="true"||t==="True"||t==="TRUE"}function H4(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var G4=new Is("tag:yaml.org,2002:bool",{kind:"scalar",resolve:V4,construct:U4,predicate:H4,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function $4(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Z4(t){return 48<=t&&t<=55}function W4(t){return 48<=t&&t<=57}function q4(t){if(t===null)return!1;var e=t.length,n=0,a=!1,s;if(!e)return!1;if(s=t[n],(s==="-"||s==="+")&&(s=t[++n]),s==="0"){if(n+1===e)return!0;if(s=t[++n],s==="b"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(s!=="0"&&s!=="1")return!1;a=!0}return a&&s!=="_"}if(s==="x"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(!$4(t.charCodeAt(n)))return!1;a=!0}return a&&s!=="_"}if(s==="o"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(!Z4(t.charCodeAt(n)))return!1;a=!0}return a&&s!=="_"}}if(s==="_")return!1;for(;n<e;n++)if(s=t[n],s!=="_"){if(!W4(t.charCodeAt(n)))return!1;a=!0}return!(!a||s==="_")}function K4(t){var e=t,n=1,a;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),a=e[0],(a==="-"||a==="+")&&(a==="-"&&(n=-1),e=e.slice(1),a=e[0]),e==="0")return 0;if(a==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function Y4(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!m2.isNegativeZero(t)}var X4=new Is("tag:yaml.org,2002:int",{kind:"scalar",resolve:q4,construct:K4,predicate:Y4,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Q4=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function J4(t){return!(t===null||!Q4.test(t)||t[t.length-1]==="_")}function tD(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var eD=/^[-+]?[0-9]+e/;function nD(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(m2.isNegativeZero(t))return"-0.0";return n=t.toString(10),eD.test(n)?n.replace("e",".e"):n}function rD(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||m2.isNegativeZero(t))}var iD=new Is("tag:yaml.org,2002:float",{kind:"scalar",resolve:J4,construct:tD,predicate:rD,represent:nD,defaultStyle:"lowercase"}),oD=z4.extend({implicit:[j4,G4,X4,iD]}),aD=oD,rT=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),iT=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function sD(t){return t===null?!1:rT.exec(t)!==null||iT.exec(t)!==null}function lD(t){var e,n,a,s,d,l,o,g=0,_=null,I,C,E;if(e=rT.exec(t),e===null&&(e=iT.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],a=+e[2]-1,s=+e[3],!e[4])return new Date(Date.UTC(n,a,s));if(d=+e[4],l=+e[5],o=+e[6],e[7]){for(g=e[7].slice(0,3);g.length<3;)g+="0";g=+g}return e[9]&&(I=+e[10],C=+(e[11]||0),_=(I*60+C)*6e4,e[9]==="-"&&(_=-_)),E=new Date(Date.UTC(n,a,s,d,l,o,g)),_&&E.setTime(E.getTime()-_),E}function cD(t){return t.toISOString()}var uD=new Is("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:sD,construct:lD,instanceOf:Date,represent:cD});function hD(t){return t==="<<"||t===null}var dD=new Is("tag:yaml.org,2002:merge",{kind:"scalar",resolve:hD}),g2=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function fD(t){if(t===null)return!1;var e,n,a=0,s=t.length,d=g2;for(n=0;n<s;n++)if(e=d.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;a+=6}return a%8===0}function pD(t){var e,n,a=t.replace(/[\r\n=]/g,""),s=a.length,d=g2,l=0,o=[];for(e=0;e<s;e++)e%4===0&&e&&(o.push(l>>16&255),o.push(l>>8&255),o.push(l&255)),l=l<<6|d.indexOf(a.charAt(e));return n=s%4*6,n===0?(o.push(l>>16&255),o.push(l>>8&255),o.push(l&255)):n===18?(o.push(l>>10&255),o.push(l>>2&255)):n===12&&o.push(l>>4&255),new Uint8Array(o)}function mD(t){var e="",n=0,a,s,d=t.length,l=g2;for(a=0;a<d;a++)a%3===0&&a&&(e+=l[n>>18&63],e+=l[n>>12&63],e+=l[n>>6&63],e+=l[n&63]),n=(n<<8)+t[a];return s=d%3,s===0?(e+=l[n>>18&63],e+=l[n>>12&63],e+=l[n>>6&63],e+=l[n&63]):s===2?(e+=l[n>>10&63],e+=l[n>>4&63],e+=l[n<<2&63],e+=l[64]):s===1&&(e+=l[n>>2&63],e+=l[n<<4&63],e+=l[64],e+=l[64]),e}function gD(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var yD=new Is("tag:yaml.org,2002:binary",{kind:"scalar",resolve:fD,construct:pD,predicate:gD,represent:mD}),vD=Object.prototype.hasOwnProperty,_D=Object.prototype.toString;function bD(t){if(t===null)return!0;var e=[],n,a,s,d,l,o=t;for(n=0,a=o.length;n<a;n+=1){if(s=o[n],l=!1,_D.call(s)!=="[object Object]")return!1;for(d in s)if(vD.call(s,d))if(!l)l=!0;else return!1;if(!l)return!1;if(e.indexOf(d)===-1)e.push(d);else return!1}return!0}function xD(t){return t!==null?t:[]}var AD=new Is("tag:yaml.org,2002:omap",{kind:"sequence",resolve:bD,construct:xD}),wD=Object.prototype.toString;function CD(t){if(t===null)return!0;var e,n,a,s,d,l=t;for(d=new Array(l.length),e=0,n=l.length;e<n;e+=1){if(a=l[e],wD.call(a)!=="[object Object]"||(s=Object.keys(a),s.length!==1))return!1;d[e]=[s[0],a[s[0]]]}return!0}function ID(t){if(t===null)return[];var e,n,a,s,d,l=t;for(d=new Array(l.length),e=0,n=l.length;e<n;e+=1)a=l[e],s=Object.keys(a),d[e]=[s[0],a[s[0]]];return d}var MD=new Is("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:CD,construct:ID}),SD=Object.prototype.hasOwnProperty;function ED(t){if(t===null)return!0;var e,n=t;for(e in n)if(SD.call(n,e)&&n[e]!==null)return!1;return!0}function TD(t){return t!==null?t:{}}var PD=new Is("tag:yaml.org,2002:set",{kind:"mapping",resolve:ED,construct:TD});aD.extend({implicit:[uD,dD],explicit:[yD,AD,MD,PD]});function bI(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}var kD=new Array(256),LD=new Array(256);for(var Dm=0;Dm<256;Dm++)kD[Dm]=bI(Dm)?1:0,LD[Dm]=bI(Dm);function pd(t){return typeof t=="function"?t():ct(t)}function Ty(t){return JSON.parse(JSON.stringify(t))}const Eg=typeof window<"u"&&typeof document<"u",RD=t=>t!=null,DD=Object.prototype.toString,OD=t=>DD.call(t)==="[object Object]",q_=()=>{},zD=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),FD=BD();function BD(){var t,e;return Eg&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const ju=function(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))};function oT(t){return xc()}function ND(t){let e;function n(){return e||(e=t()),e}return n.reset=async()=>{const a=e;e=void 0,a&&await a},n}function jD(t,e){var d;if(typeof t=="number")return t+e;const n=((d=t.match(/^-?\d+\.?\d*/))==null?void 0:d[0])||"",a=t.slice(n.length),s=Number.parseFloat(n)+e;return Number.isNaN(s)?t:s+a}function VD(t,e){oT()&&yd(t,e)}function kp(t){const e=pd(t);return(e==null?void 0:e.$el)??e}function UD(t,e,n={}){const{immediate:a=!0}=n,s=gn(!1);let d=null;function l(){d&&(clearTimeout(d),d=null)}function o(){s.value=!1,l()}function g(..._){l(),s.value=!0,d=setTimeout(()=>{s.value=!1,d=null,t(..._)},pd(e))}return a&&(s.value=!0,Eg&&g()),Sg(o),{isPending:jy(s),start:g,stop:o}}function HD(t,e=!0,n){oT()?mo(t,n):e?t():El(t)}const ab=Eg?window:void 0,aT=Eg?window.document:void 0,y2=Eg?window.navigator:void 0;function zu(...t){let e,n,a,s;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,a,s]=t,e=ab):[e,n,a,s]=t,!e)return q_;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const d=[],l=()=>{d.forEach(I=>I()),d.length=0},o=(I,C,E,S)=>(I.addEventListener(C,E,S),()=>I.removeEventListener(C,E,S)),g=Xo(()=>[kp(e),pd(s)],([I,C])=>{if(l(),!I)return;const E=OD(C)?{...C}:C;d.push(...n.flatMap(S=>a.map(k=>o(I,S,k,E))))},{immediate:!0,flush:"post"}),_=()=>{g(),l()};return Sg(_),_}let xI=!1;function GD(t,e,n={}){const{window:a=ab,ignore:s=[],capture:d=!0,detectIframe:l=!1}=n;if(!a)return q_;FD&&!xI&&(xI=!0,Array.from(a.document.body.children).forEach(E=>E.addEventListener("click",q_)),a.document.documentElement.addEventListener("click",q_));let o=!0;const g=E=>s.some(S=>{if(typeof S=="string")return Array.from(a.document.querySelectorAll(S)).some(k=>k===E.target||E.composedPath().includes(k));{const k=kp(S);return k&&(E.target===k||E.composedPath().includes(k))}}),I=[zu(a,"click",E=>{const S=kp(t);if(!(!S||S===E.target||E.composedPath().includes(S))){if(E.detail===0&&(o=!g(E)),!o){o=!0;return}e(E)}},{passive:!0,capture:d}),zu(a,"pointerdown",E=>{const S=kp(t);o=!g(E)&&!!(S&&!E.composedPath().includes(S))},{passive:!0}),l&&zu(a,"blur",E=>{setTimeout(()=>{var k;const S=kp(t);((k=a.document.activeElement)==null?void 0:k.tagName)==="IFRAME"&&!(S!=null&&S.contains(a.document.activeElement))&&e(E)},0)})].filter(Boolean);return()=>I.forEach(E=>E())}function $D(){const t=gn(!1),e=xc();return e&&mo(()=>{t.value=!0},e),t}function $y(t){const e=$D();return bn(()=>(e.value,!!t()))}function N0(t,e={}){const{window:n=ab}=e,a=$y(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let s;const d=gn(!1),l=_=>{d.value=_.matches},o=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",l):s.removeListener(l))},g=nE(()=>{a.value&&(o(),s=n.matchMedia(pd(t)),"addEventListener"in s?s.addEventListener("change",l):s.addListener(l),d.value=s.matches)});return Sg(()=>{g(),o(),s=void 0}),d}function sT(t,e={}){function n(I,C){let E=pd(t[pd(I)]);return C!=null&&(E=jD(E,C)),typeof E=="number"&&(E=`${E}px`),E}const{window:a=ab,strategy:s="min-width"}=e;function d(I){return a?a.matchMedia(I).matches:!1}const l=I=>N0(()=>`(min-width: ${n(I)})`,e),o=I=>N0(()=>`(max-width: ${n(I)})`,e),g=Object.keys(t).reduce((I,C)=>(Object.defineProperty(I,C,{get:()=>s==="min-width"?l(C):o(C),enumerable:!0,configurable:!0}),I),{});function _(){const I=Object.keys(t).map(C=>[C,l(C)]);return bn(()=>I.filter(([,C])=>C.value).map(([C])=>C))}return Object.assign(g,{greaterOrEqual:l,smallerOrEqual:o,greater(I){return N0(()=>`(min-width: ${n(I,.1)})`,e)},smaller(I){return N0(()=>`(max-width: ${n(I,-.1)})`,e)},between(I,C){return N0(()=>`(min-width: ${n(I)}) and (max-width: ${n(C,-.1)})`,e)},isGreater(I){return d(`(min-width: ${n(I,.1)})`)},isGreaterOrEqual(I){return d(`(min-width: ${n(I)})`)},isSmaller(I){return d(`(max-width: ${n(I,-.1)})`)},isSmallerOrEqual(I){return d(`(max-width: ${n(I)})`)},isInBetween(I,C){return d(`(min-width: ${n(I)}) and (max-width: ${n(C,-.1)})`)},current:_,active(){const I=_();return bn(()=>I.value.length===0?"":I.value[I.value.length-1])}})}function AI(t,e={}){const{controls:n=!1,navigator:a=y2}=e,s=$y(()=>a&&"permissions"in a);let d;const l=typeof t=="string"?{name:t}:t,o=gn(),g=()=>{d&&(o.value=d.state)},_=ND(async()=>{if(s.value){if(!d)try{d=await a.permissions.query(l),zu(d,"change",g),g()}catch{o.value="prompt"}return d}});return _(),n?{state:o,isSupported:s,query:_}:o}function ZD(t={}){const{navigator:e=y2,read:n=!1,source:a,copiedDuring:s=1500,legacy:d=!0}=t,l=$y(()=>e&&"clipboard"in e),o=AI("clipboard-read"),g=AI("clipboard-write"),_=bn(()=>l.value||d),I=gn(""),C=gn(!1),E=UD(()=>C.value=!1,s);function S(){l.value&&U(o.value)?e.clipboard.readText().then(F=>{I.value=F}):I.value=N()}_.value&&n&&zu(["copy","cut"],S);async function k(F=pd(a)){_.value&&F!=null&&(l.value&&U(g.value)?await e.clipboard.writeText(F):D(F),I.value=F,C.value=!0,E.start())}function D(F){const j=document.createElement("textarea");j.value=F??"",j.style.position="absolute",j.style.opacity="0",document.body.appendChild(j),j.select(),document.execCommand("copy"),j.remove()}function N(){var F,j;return((j=(F=document==null?void 0:document.getSelection)==null?void 0:F.call(document))==null?void 0:j.toString())??""}function U(F){return F==="granted"||F==="prompt"}return{isSupported:_,text:I,copied:C,copy:k}}function WD(t,e={}){const n=gn(!1),a=Mg(null);let s=0,d=!0;if(Eg){const l=typeof e=="function"?{onDrop:e}:e,o=g=>{var I;const _=Array.from(((I=g.dataTransfer)==null?void 0:I.files)??[]);return a.value=_.length===0?null:_};zu(t,"dragenter",g=>{var I,C;const _=Array.from(((I=g==null?void 0:g.dataTransfer)==null?void 0:I.items)||[]).map(E=>E.kind==="file"?E.type:null).filter(RD);if(l.dataTypes&&g.dataTransfer){const E=ct(l.dataTypes);if(d=typeof E=="function"?E(_):E?E.some(S=>_.includes(S)):!0,!d)return}g.preventDefault(),s+=1,n.value=!0,(C=l.onEnter)==null||C.call(l,o(g),g)}),zu(t,"dragover",g=>{var _;d&&(g.preventDefault(),(_=l.onOver)==null||_.call(l,o(g),g))}),zu(t,"dragleave",g=>{var _;d&&(g.preventDefault(),s-=1,s===0&&(n.value=!1),(_=l.onLeave)==null||_.call(l,o(g),g))}),zu(t,"drop",g=>{var _;g.preventDefault(),s=0,n.value=!1,(_=l.onDrop)==null||_.call(l,o(g),g)})}return{files:a,isOverDropZone:n}}const wI=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function qD(t,e={}){const{document:n=aT,autoExit:a=!1}=e,s=bn(()=>kp(t)??(n==null?void 0:n.querySelector("html"))),d=gn(!1),l=bn(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(U=>n&&U in n||s.value&&U in s.value)),o=bn(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(U=>n&&U in n||s.value&&U in s.value)),g=bn(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(U=>n&&U in n||s.value&&U in s.value)),_=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(U=>n&&U in n),I=$y(()=>s.value&&n&&l.value!==void 0&&o.value!==void 0&&g.value!==void 0),C=()=>_?(n==null?void 0:n[_])===s.value:!1,E=()=>{if(g.value){if(n&&n[g.value]!=null)return n[g.value];{const U=s.value;if((U==null?void 0:U[g.value])!=null)return!!U[g.value]}}return!1};async function S(){if(!(!I.value||!d.value)){if(o.value)if((n==null?void 0:n[o.value])!=null)await n[o.value]();else{const U=s.value;(U==null?void 0:U[o.value])!=null&&await U[o.value]()}d.value=!1}}async function k(){if(!I.value||d.value)return;E()&&await S();const U=s.value;l.value&&(U==null?void 0:U[l.value])!=null&&(await U[l.value](),d.value=!0)}async function D(){await(d.value?S():k())}const N=()=>{const U=E();(!U||U&&C())&&(d.value=U)};return zu(n,wI,N,!1),zu(()=>kp(s),wI,N,!1),a&&Sg(S),{isSupported:I,isFullscreen:d,enter:k,exit:S,toggle:D}}function KD(t={}){const{enableHighAccuracy:e=!0,maximumAge:n=3e4,timeout:a=27e3,navigator:s=y2,immediate:d=!0}=t,l=$y(()=>s&&"geolocation"in s),o=gn(null),g=Mg(null),_=gn({accuracy:0,latitude:Number.POSITIVE_INFINITY,longitude:Number.POSITIVE_INFINITY,altitude:null,altitudeAccuracy:null,heading:null,speed:null});function I(k){o.value=k.timestamp,_.value=k.coords,g.value=null}let C;function E(){l.value&&(C=s.geolocation.watchPosition(I,k=>g.value=k,{enableHighAccuracy:e,maximumAge:n,timeout:a}))}d&&E();function S(){C&&s&&s.geolocation.clearWatch(C)}return Sg(()=>{S()}),{isSupported:l,coords:_,locatedAt:o,error:g,resume:E,pause:S}}const YD={multiple:!0,accept:"*",reset:!1,directory:!1};function XD(t={}){const{document:e=aT}=t,n=gn(null),{on:a,trigger:s}=p4();let d;e&&(d=e.createElement("input"),d.type="file",d.onchange=g=>{const _=g.target;n.value=_.files,s(n.value)});const l=()=>{n.value=null,d&&d.value&&(d.value="",s(null))},o=g=>{if(!d)return;const _={...YD,...t,...g};d.multiple=_.multiple,d.accept=_.accept,d.webkitdirectory=_.directory,zD(_,"capture")&&(d.capture=_.capture),_.reset&&l(),d.click()};return{files:jy(n),open:o,reset:l,onChange:a}}const QD=J1('<label class="ddf__label" for="upload-file" data-v-70127256><i class="ddf__label-inner" data-v-70127256><svg class="ddf__icon" viewBox="0 0 64 64" aria-hidden="true" data-v-70127256><path fill="currentColor" d="M51,27c-.374,0-.742.025-1.109.056a18,18,0,0,0-35.782,0C13.742,27.025,13.374,27,13,27a13,13,0,0,0,0,26H51a13,13,0,0,0,0-26Z" data-v-70127256></path><path d="M43.764,41.354l-11-13a1.033,1.033,0,0,0-1.526,0l-11,13A1,1,0,0,0,21,43h7V59h8V43h7a1,1,0,0,0,.764-1.646Z" data-v-70127256></path></svg><span class="ddf__text" data-v-70127256> Drag and drop your files here </span><span class="ddf__subtext" data-v-70127256> or click to browse your files </span></i></label>',1),JD=[QD],t6=rr({__name:"index",props:{multiple:Boolean,accept:String},emits:["change"],setup(t,{emit:e}){const n=t,a=e,{onChange:s,open:d}=XD({multiple:n.multiple,accept:n.accept});s(_=>{_&&l(Array.from(_))});function l(_){_&&a("change",n.multiple?_:_[0])}const o=gn(),{isOverDropZone:g}=WD(o,l);return(_,I)=>(St(),pe("div",{class:Li(["ddf__area",{ddf__active:ct(g)}]),ref_key:"dropZoneRef",ref:o,onClick:I[0]||(I[0]=C=>ct(d)())},JD,2))}}),Vn=(t,e)=>{const n=t.__vccOpts||t;for(const[a,s]of e)n[a]=s;return n},e6=Vn(t6,[["__scopeId","data-v-70127256"]]);function lT(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function cT(t){return Array.isArray(t)&&t.every(lT)}function uT(t){return Array.isArray(t)&&t.every(cT)}function n6(t){return Array.isArray(t)&&t.every(uT)}function r6(t){return t&&typeof t=="object"&&"geometry"in t}function hT(t){return Array.isArray(t)?1+Math.max(0,...t.map(hT)):0}function i6(){return{detectGeoType:e=>{if(e!=null&&e.type&&(e!=null&&e.coordinates))return e.type;switch(hT(e)){case 1:return"Point";case 2:return"LineString";case 3:return"Polygon";case 4:return"MultiPolygon";default:throw new Error("Unsupported geometry depth")}}}}function o6(){const t=e=>{if(e.type==="GeometryCollection")return e.geometries.every(t);const n=e.coordinates;switch(e.type){case"Point":return lT(n);case"MultiPoint":case"LineString":return cT(n);case"Polygon":case"MultiLineString":return uT(n);case"MultiPolygon":return n6(n);default:return!1}};return{validateGeometry:t}}function a6(){const{detectGeoType:t}=i6(),{validateGeometry:e}=o6(),n=s=>{if(!r6(s))throw new Error("Invalid input: not an InputFeature");const{geometry:d,...l}=s,o=d!=null&&d.type&&(d!=null&&d.coordinates)?d:{type:t(d),coordinates:d};if(!e(o))throw new Error("Invalid geometry");return{type:"Feature",geometry:o,properties:l}};return{convertFeature:n,convertList:s=>({type:"FeatureCollection",features:s.map(n)})}}const CI=t=>{if(typeof t=="string"){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://"))return"url";if(t.startsWith("data:"))return"base64"}else{if(t instanceof Blob||t instanceof File)return"blob";if(t instanceof ArrayBuffer||t instanceof Uint8Array)return"buffer"}throw new Error("Không thể xác định loại dữ liệu để tải")},II=t=>{var a;const e=(a=t.split(".").pop())==null?void 0:a.toLowerCase();return{pdf:"application/pdf",txt:"text/plain",csv:"text/csv",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",html:"text/html"}[e||""]||"application/octet-stream"};function s6(){const t=gn("idle"),e=gn(null),n=()=>{t.value="idle",e.value=null},a=async(d,l,o,g)=>{n();try{t.value="downloading";const _=o||CI(d),I=l||"download",C=g||II(I);let E;switch(_){case"url":{const S=await fetch(d);if(!S.ok)throw new Error(`Fetch failed: ${S.status} ${S.statusText}`);E=await S.blob();break}case"base64":{const S=d,k=atob(S.split(",")[1]||S),D=new ArrayBuffer(k.length),N=new Uint8Array(D);for(let U=0;U<k.length;U++)N[U]=k.charCodeAt(U);E=new Blob([D],{type:C});break}case"blob":{E=d;break}case"buffer":{if(d instanceof ArrayBuffer)E=new Blob([d],{type:C});else if(d instanceof Uint8Array)E=new Blob([d.buffer],{type:C});else throw new Error("Không thể chuyển buffer thành Blob");break}default:throw new Error("Loại dữ liệu không hợp lệ")}s(E,I),t.value="success"}catch(_){t.value="error",e.value=_.message||"Lỗi không xác định"}},s=(d,l)=>{const o=document.createElement("a"),g=URL.createObjectURL(d);o.href=g,o.download=l,o.click(),URL.revokeObjectURL(g)};return{status:t,error:e,downloadFile:a,detectType:CI,guessMimeType:II}}function l6(t={}){const e=new c6;async function n(a,s={}){return e.read(a,Object.assign({},t,s))}return{read:n}}class c6{async read(e,n={}){const a=n.parser||this.getParser(e),s=n.type||"text",d=n.onSuccess,l=n.onError;try{let o=await MI.read(e,s);return a&&(o=await a.parse(o,e)),d&&d(o),o}catch(o){throw l&&l(o),o}}getParser(e){switch(MI.getExtension(e)){case"geojson":case"json":return new u6}}}class MI{static getExtension(e){return e.name.split(".").pop()}static async read(e,n){return new Promise((a,s)=>{const d=new window.FileReader;d.onload=l=>l.target&&a(l.target.result),d.onerror=l=>s(l),n==="text"?d.readAsText(e):n==="arraybuffer"?d.readAsArrayBuffer(e):n==="binary"?d.readAsDataURL(e):s(new Error(`Read file as ${n} is not available`))})}}class u6{parse(e,n){const a=JSON.parse(e);return Promise.resolve(this.toGeojson(a))}toGeojson(e){return e.crs,e}}var Io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Zy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var s=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(n,a,s.get?s:{enumerable:!0,get:function(){return t[a]}})}),n}var sb={},v2={};v2.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31};var dT={},h6={C:254,L:1,D:8,N:18,M:18,F:18,B:8},lb={};lb.lpad=function(e,n,a){for(;e.length<n;)e=a+e;return e};lb.rpad=function(e,n,a){for(;e.length<n;)e=e+a;return e};lb.writeField=function(e,n,a,s){for(var d=0;d<n;d++)e.setUint8(s,a.charCodeAt(d)),s++;return s};var cb={},d6=h6,f6={string:"C",number:"N",boolean:"L",null:"C"};cb.multi=p6;cb.bytesPer=g6;cb.obj=fT;function p6(t){var e={};t.forEach(n);function n(a){m6(e,a)}return fT(e)}function m6(t,e){for(var n in e){var a=typeof e[n]<"u"&&e[n]!==null;(typeof t[n]>"u"||a)&&(t[n]=e[n])}return t}function fT(t){var e={},n=[];for(var a in t)e[a]=t[a]===null?"null":typeof t[a];for(var s in e){var d=f6[e[s]];d&&n.push({name:s,type:d,size:d6[d]})}return n}function g6(t){return t.reduce(function(e,n){return e+n.size},1)}var Om=lb,SI=cb,y6=function(e,n){var a=n||SI.multi(e),s=32*a.length+1,d=SI.bytesPer(a),l=new ArrayBuffer(s+32+d*e.length+1),o=new Date,g=new DataView(l);g.setUint8(0,3),g.setUint8(1,o.getFullYear()-1900),g.setUint8(2,o.getMonth()+1),g.setUint8(3,o.getDate()),g.setUint32(4,e.length,!0);var _=s+32;g.setUint16(8,_,!0),g.setUint16(10,d,!0),g.setInt8(32+s-1,13),a.forEach(function(C,E){C.name.split("").slice(0,10).forEach(function(S,k){g.setInt8(32+E*32+k,S.charCodeAt(0))}),g.setInt8(32+E*32+11,C.type.charCodeAt(0)),g.setInt8(32+E*32+16,C.size),C.type=="N"&&g.setInt8(32+E*32+17,3)});var I=s+32;return e.forEach(function(C,E){g.setUint8(I,32),I++,a.forEach(function(S){var k=C[S.name];switch((k===null||typeof k>"u")&&(k=""),S.type){case"L":g.setUint8(I,k?84:70),I++;break;case"D":I=Om.writeField(g,8,Om.lpad(k.toString(),8," "),I);break;case"N":I=Om.writeField(g,S.size,Om.lpad(k.toString(),S.size," ").substr(0,18),I);break;case"C":I=Om.writeField(g,S.size,Om.rpad(k.toString(),S.size," "),I);break;default:throw new Error("Unknown field type")}})}),g.setUint8(I,26),g};dT.structure=y6;var pT='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]',Tg={},Wy={};Wy.enlarge=function(e,n){return n[0]<e.xmin&&(e.xmin=n[0]),n[0]>e.xmax&&(e.xmax=n[0]),n[1]<e.ymin&&(e.ymin=n[1]),n[1]>e.ymax&&(e.ymax=n[1]),e};Wy.enlargeExtent=function(e,n){return n.xmax>e.xmax&&(e.xmax=n.xmax),n.xmin<e.xmin&&(e.xmin=n.xmin),n.ymax>e.ymax&&(e.ymax=n.ymax),n.ymin<e.ymin&&(e.ymin=n.ymin),e};Wy.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}};var EI=Wy;Tg.write=function(e,n,a,s){var d=28,l=100,o=0,g=0;e.forEach(function(I,C){a.setInt32(o,C+1),a.setInt32(o+4,10),a.setInt32(o+8,1,!0),a.setFloat64(o+12,I[0],!0),a.setFloat64(o+20,I[1],!0),s.setInt32(g,l/2),s.setInt32(g+4,10),g+=8,o+=d,l+=d})};Tg.extent=function(t){return t.reduce(function(e,n){return EI.enlarge(e,n)},EI.blank())};Tg.parts=function(e,n){return e.length};Tg.shxLength=function(t){return t.length*8};Tg.shpLength=function(t){return t.length*28};var Pg={},b1=Wy,TI=v2;Pg.write=function(e,n,a,s,d){var l=0,o=0,g=100;e.forEach(_);function _(I,C){var E=ub(I),S=mT([I],d),k=E.length*16+48+(S-1)*4,D=E.reduce(function(F,j){return b1.enlarge(F,j)},b1.blank());s.setInt32(o,g/2),s.setInt32(o+4,k/2),o+=8,g+=k+8,a.setInt32(l,C+1),a.setInt32(l+4,k/2),a.setInt32(l+8,d,!0),a.setFloat64(l+12,D.xmin,!0),a.setFloat64(l+20,D.ymin,!0),a.setFloat64(l+28,D.xmax,!0),a.setFloat64(l+36,D.ymax,!0),a.setInt32(l+44,S,!0),a.setInt32(l+48,E.length,!0),a.setInt32(l+52,0,!0);for(var N=I.reduce(function(F,j){return Array.isArray(j[0][0])?F=F.concat(j):F.push(j),F},[]),U=1;U<S;U++)a.setInt32(l+52+U*4,N.reduce(function(F,j,$){return $<U?F+j.length:F},0),!0);E.forEach(function(j,$){a.setFloat64(l+56+$*16+(S-1)*4,j[0],!0),a.setFloat64(l+56+$*16+(S-1)*4+8,j[1],!0)}),l+=k+8}};Pg.shpLength=function(t){return t.length*56+ub(t).length*16};Pg.shxLength=function(t){return t.length*8};Pg.extent=function(t){return ub(t).reduce(function(e,n){return b1.enlarge(e,n)},b1.blank())};function mT(t,e){var n=1;return(e===TI.geometries.POLYGON||e===TI.geometries.POLYLINE)&&(n=t.reduce(function(a,s){return a+=s.length,Array.isArray(s[0][0][0])&&(a+=s.reduce(function(d,l){return d+l.length-1},0)),a},0)),n}Pg.parts=mT;function ub(t,e){return e===void 0&&(e=[]),typeof t[0][0]=="object"?t.reduce(function(n,a){return n.concat(ub(a))},e):t}var v6=v2,_6=dT,b6=pT,x6=Tg,PI=Pg,A6={1:x6,5:PI,3:PI},gT=w6;function w6(t,e,n,a){var s=v6.geometries[e],d=A6[s],l=d.parts(n,s),o=100+(l-n.length)*4+d.shpLength(n),g=100+d.shxLength(n),_=new ArrayBuffer(o),I=new DataView(_),C=new ArrayBuffer(g),E=new DataView(C),S=d.extent(n);kI(I,s),kI(E,s),LI(S,I),LI(S,E),d.write(n,S,new DataView(_,100),new DataView(C,100),s),I.setInt32(24,o/2),E.setInt32(24,50+n.length*4);var k=_6.structure(t);a(null,{shp:I,shx:E,dbf:k,prj:b6})}function kI(t,e){t.setInt32(0,9994),t.setInt32(28,1e3,!0),t.setInt32(32,e,!0)}function LI(t,e){e.setFloat64(36,t.xmin,!0),e.setFloat64(44,t.ymin,!0),e.setFloat64(52,t.xmax,!0),e.setFloat64(60,t.ymax,!0)}var kg={};kg.point=qy("Point","POINT");kg.line=qy("LineString","POLYLINE");kg.multiline=qy("MultiLineString","POLYLINE");kg.polygon=qy("Polygon","POLYGON");kg.multipolygon=qy("MultiPolygon","POLYGON");function qy(t,e){return function(n){var a=n.features.filter(I6(t));return{geometries:e==="POLYLINE"?[a.map(RI)]:a.map(RI),properties:a.map(C6),type:e}}}function RI(t){return t.geometry.coordinates}function C6(t){return t.properties}function I6(t){return Array.isArray(t)?function(e){return t.includes(e.geometry.type)}:function(e){return e.geometry.type===t}}function D_(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var yT={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(a,s,d){function l(_,I){if(!s[_]){if(!a[_]){var C=typeof D_=="function"&&D_;if(!I&&C)return C(_,!0);if(o)return o(_,!0);var E=new Error("Cannot find module '"+_+"'");throw E.code="MODULE_NOT_FOUND",E}var S=s[_]={exports:{}};a[_][0].call(S.exports,function(k){var D=a[_][1][k];return l(D||k)},S,S.exports,n,a,s,d)}return s[_].exports}for(var o=typeof D_=="function"&&D_,g=0;g<d.length;g++)l(d[g]);return l}({1:[function(n,a,s){var d=n("./utils"),l=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(g){for(var _,I,C,E,S,k,D,N=[],U=0,F=g.length,j=F,$=d.getTypeOf(g)!=="string";U<g.length;)j=F-U,C=$?(_=g[U++],I=U<F?g[U++]:0,U<F?g[U++]:0):(_=g.charCodeAt(U++),I=U<F?g.charCodeAt(U++):0,U<F?g.charCodeAt(U++):0),E=_>>2,S=(3&_)<<4|I>>4,k=1<j?(15&I)<<2|C>>6:64,D=2<j?63&C:64,N.push(o.charAt(E)+o.charAt(S)+o.charAt(k)+o.charAt(D));return N.join("")},s.decode=function(g){var _,I,C,E,S,k,D=0,N=0,U="data:";if(g.substr(0,U.length)===U)throw new Error("Invalid base64 input, it looks like a data url.");var F,j=3*(g=g.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(g.charAt(g.length-1)===o.charAt(64)&&j--,g.charAt(g.length-2)===o.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(F=l.uint8array?new Uint8Array(0|j):new Array(0|j);D<g.length;)_=o.indexOf(g.charAt(D++))<<2|(E=o.indexOf(g.charAt(D++)))>>4,I=(15&E)<<4|(S=o.indexOf(g.charAt(D++)))>>2,C=(3&S)<<6|(k=o.indexOf(g.charAt(D++))),F[N++]=_,S!==64&&(F[N++]=I),k!==64&&(F[N++]=C);return F}},{"./support":30,"./utils":32}],2:[function(n,a,s){var d=n("./external"),l=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),g=n("./stream/DataLengthProbe");function _(I,C,E,S,k){this.compressedSize=I,this.uncompressedSize=C,this.crc32=E,this.compression=S,this.compressedContent=k}_.prototype={getContentWorker:function(){var I=new l(d.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),C=this;return I.on("end",function(){if(this.streamInfo.data_length!==C.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),I},getCompressedWorker:function(){return new l(d.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},_.createWorkerFrom=function(I,C,E){return I.pipe(new o).pipe(new g("uncompressedSize")).pipe(C.compressWorker(E)).pipe(new g("compressedSize")).withStreamInfo("compression",C)},a.exports=_},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,a,s){var d=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new d("STORE compression")},uncompressWorker:function(){return new d("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,a,s){var d=n("./utils"),l=function(){for(var o,g=[],_=0;_<256;_++){o=_;for(var I=0;I<8;I++)o=1&o?3988292384^o>>>1:o>>>1;g[_]=o}return g}();a.exports=function(o,g){return o!==void 0&&o.length?d.getTypeOf(o)!=="string"?function(_,I,C,E){var S=l,k=E+C;_^=-1;for(var D=E;D<k;D++)_=_>>>8^S[255&(_^I[D])];return-1^_}(0|g,o,o.length,0):function(_,I,C,E){var S=l,k=E+C;_^=-1;for(var D=E;D<k;D++)_=_>>>8^S[255&(_^I.charCodeAt(D))];return-1^_}(0|g,o,o.length,0):0}},{"./utils":32}],5:[function(n,a,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,a,s){var d=null;d=typeof Promise<"u"?Promise:n("lie"),a.exports={Promise:d}},{lie:37}],7:[function(n,a,s){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=n("pako"),o=n("./utils"),g=n("./stream/GenericWorker"),_=d?"uint8array":"array";function I(C,E){g.call(this,"FlateWorker/"+C),this._pako=null,this._pakoAction=C,this._pakoOptions=E,this.meta={}}s.magic="\b\0",o.inherits(I,g),I.prototype.processChunk=function(C){this.meta=C.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(_,C.data),!1)},I.prototype.flush=function(){g.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},I.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this._pako=null},I.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var C=this;this._pako.onData=function(E){C.push({data:E,meta:C.meta})}},s.compressWorker=function(C){return new I("Deflate",C)},s.uncompressWorker=function(){return new I("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,a,s){function d(S,k){var D,N="";for(D=0;D<k;D++)N+=String.fromCharCode(255&S),S>>>=8;return N}function l(S,k,D,N,U,F){var j,$,K=S.file,tt=S.compression,it=F!==_.utf8encode,et=o.transformTo("string",F(K.name)),q=o.transformTo("string",_.utf8encode(K.name)),ut=K.comment,Ct=o.transformTo("string",F(ut)),ot=o.transformTo("string",_.utf8encode(ut)),bt=q.length!==K.name.length,X=ot.length!==ut.length,Wt="",Vt="",Bt="",ae=K.dir,ye=K.date,en={crc32:0,compressedSize:0,uncompressedSize:0};k&&!D||(en.crc32=S.crc32,en.compressedSize=S.compressedSize,en.uncompressedSize=S.uncompressedSize);var Jt=0;k&&(Jt|=8),it||!bt&&!X||(Jt|=2048);var Gt=0,Re=0;ae&&(Gt|=16),U==="UNIX"?(Re=798,Gt|=function(Ce,nn){var be=Ce;return Ce||(be=nn?16893:33204),(65535&be)<<16}(K.unixPermissions,ae)):(Re=20,Gt|=function(Ce){return 63&(Ce||0)}(K.dosPermissions)),j=ye.getUTCHours(),j<<=6,j|=ye.getUTCMinutes(),j<<=5,j|=ye.getUTCSeconds()/2,$=ye.getUTCFullYear()-1980,$<<=4,$|=ye.getUTCMonth()+1,$<<=5,$|=ye.getUTCDate(),bt&&(Vt=d(1,1)+d(I(et),4)+q,Wt+="up"+d(Vt.length,2)+Vt),X&&(Bt=d(1,1)+d(I(Ct),4)+ot,Wt+="uc"+d(Bt.length,2)+Bt);var $e="";return $e+=`
\0`,$e+=d(Jt,2),$e+=tt.magic,$e+=d(j,2),$e+=d($,2),$e+=d(en.crc32,4),$e+=d(en.compressedSize,4),$e+=d(en.uncompressedSize,4),$e+=d(et.length,2),$e+=d(Wt.length,2),{fileRecord:C.LOCAL_FILE_HEADER+$e+et+Wt,dirRecord:C.CENTRAL_FILE_HEADER+d(Re,2)+$e+d(Ct.length,2)+"\0\0\0\0"+d(Gt,4)+d(N,4)+et+Wt+Ct}}var o=n("../utils"),g=n("../stream/GenericWorker"),_=n("../utf8"),I=n("../crc32"),C=n("../signature");function E(S,k,D,N){g.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=k,this.zipPlatform=D,this.encodeFileName=N,this.streamFiles=S,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(E,g),E.prototype.push=function(S){var k=S.meta.percent||0,D=this.entriesCount,N=this._sources.length;this.accumulate?this.contentBuffer.push(S):(this.bytesWritten+=S.data.length,g.prototype.push.call(this,{data:S.data,meta:{currentFile:this.currentFile,percent:D?(k+100*(D-N-1))/D:100}}))},E.prototype.openedSource=function(S){this.currentSourceOffset=this.bytesWritten,this.currentFile=S.file.name;var k=this.streamFiles&&!S.file.dir;if(k){var D=l(S,k,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:D.fileRecord,meta:{percent:0}})}else this.accumulate=!0},E.prototype.closedSource=function(S){this.accumulate=!1;var k=this.streamFiles&&!S.file.dir,D=l(S,k,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(D.dirRecord),k)this.push({data:function(N){return C.DATA_DESCRIPTOR+d(N.crc32,4)+d(N.compressedSize,4)+d(N.uncompressedSize,4)}(S),meta:{percent:100}});else for(this.push({data:D.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},E.prototype.flush=function(){for(var S=this.bytesWritten,k=0;k<this.dirRecords.length;k++)this.push({data:this.dirRecords[k],meta:{percent:100}});var D=this.bytesWritten-S,N=function(U,F,j,$,K){var tt=o.transformTo("string",K($));return C.CENTRAL_DIRECTORY_END+"\0\0\0\0"+d(U,2)+d(U,2)+d(F,4)+d(j,4)+d(tt.length,2)+tt}(this.dirRecords.length,D,S,this.zipComment,this.encodeFileName);this.push({data:N,meta:{percent:100}})},E.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},E.prototype.registerPrevious=function(S){this._sources.push(S);var k=this;return S.on("data",function(D){k.processChunk(D)}),S.on("end",function(){k.closedSource(k.previous.streamInfo),k._sources.length?k.prepareNextSource():k.end()}),S.on("error",function(D){k.error(D)}),this},E.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},E.prototype.error=function(S){var k=this._sources;if(!g.prototype.error.call(this,S))return!1;for(var D=0;D<k.length;D++)try{k[D].error(S)}catch{}return!0},E.prototype.lock=function(){g.prototype.lock.call(this);for(var S=this._sources,k=0;k<S.length;k++)S[k].lock()},a.exports=E},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,a,s){var d=n("../compressions"),l=n("./ZipFileWorker");s.generateWorker=function(o,g,_){var I=new l(g.streamFiles,_,g.platform,g.encodeFileName),C=0;try{o.forEach(function(E,S){C++;var k=function(F,j){var $=F||j,K=d[$];if(!K)throw new Error($+" is not a valid compression method !");return K}(S.options.compression,g.compression),D=S.options.compressionOptions||g.compressionOptions||{},N=S.dir,U=S.date;S._compressWorker(k,D).withStreamInfo("file",{name:E,dir:N,date:U,comment:S.comment||"",unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions}).pipe(I)}),I.entriesCount=C}catch(E){I.error(E)}return I}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,a,s){function d(){if(!(this instanceof d))return new d;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new d;for(var o in this)typeof this[o]!="function"&&(l[o]=this[o]);return l}}(d.prototype=n("./object")).loadAsync=n("./load"),d.support=n("./support"),d.defaults=n("./defaults"),d.version="3.10.1",d.loadAsync=function(l,o){return new d().loadAsync(l,o)},d.external=n("./external"),a.exports=d},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,a,s){var d=n("./utils"),l=n("./external"),o=n("./utf8"),g=n("./zipEntries"),_=n("./stream/Crc32Probe"),I=n("./nodejsUtils");function C(E){return new l.Promise(function(S,k){var D=E.decompressed.getContentWorker().pipe(new _);D.on("error",function(N){k(N)}).on("end",function(){D.streamInfo.crc32!==E.decompressed.crc32?k(new Error("Corrupted zip : CRC32 mismatch")):S()}).resume()})}a.exports=function(E,S){var k=this;return S=d.extend(S||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),I.isNode&&I.isStream(E)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):d.prepareContent("the loaded zip file",E,!0,S.optimizedBinaryString,S.base64).then(function(D){var N=new g(S);return N.load(D),N}).then(function(D){var N=[l.Promise.resolve(D)],U=D.files;if(S.checkCRC32)for(var F=0;F<U.length;F++)N.push(C(U[F]));return l.Promise.all(N)}).then(function(D){for(var N=D.shift(),U=N.files,F=0;F<U.length;F++){var j=U[F],$=j.fileNameStr,K=d.resolve(j.fileNameStr);k.file(K,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:S.createFolders}),j.dir||(k.file(K).unsafeOriginalName=$)}return N.zipComment.length&&(k.comment=N.zipComment),k})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,a,s){var d=n("../utils"),l=n("../stream/GenericWorker");function o(g,_){l.call(this,"Nodejs stream input adapter for "+g),this._upstreamEnded=!1,this._bindStream(_)}d.inherits(o,l),o.prototype._bindStream=function(g){var _=this;(this._stream=g).pause(),g.on("data",function(I){_.push({data:I,meta:{percent:0}})}).on("error",function(I){_.isPaused?this.generatedError=I:_.error(I)}).on("end",function(){_.isPaused?_._upstreamEnded=!0:_.end()})},o.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,a,s){var d=n("readable-stream").Readable;function l(o,g,_){d.call(this,g),this._helper=o;var I=this;o.on("data",function(C,E){I.push(C)||I._helper.pause(),_&&_(E)}).on("error",function(C){I.emit("error",C)}).on("end",function(){I.push(null)})}n("../utils").inherits(l,d),l.prototype._read=function(){this._helper.resume()},a.exports=l},{"../utils":32,"readable-stream":16}],14:[function(n,a,s){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(d,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(d,l);if(typeof d=="number")throw new Error('The "data" argument must not be a number');return new Buffer(d,l)},allocBuffer:function(d){if(Buffer.alloc)return Buffer.alloc(d);var l=new Buffer(d);return l.fill(0),l},isBuffer:function(d){return Buffer.isBuffer(d)},isStream:function(d){return d&&typeof d.on=="function"&&typeof d.pause=="function"&&typeof d.resume=="function"}}},{}],15:[function(n,a,s){function d(K,tt,it){var et,q=o.getTypeOf(tt),ut=o.extend(it||{},I);ut.date=ut.date||new Date,ut.compression!==null&&(ut.compression=ut.compression.toUpperCase()),typeof ut.unixPermissions=="string"&&(ut.unixPermissions=parseInt(ut.unixPermissions,8)),ut.unixPermissions&&16384&ut.unixPermissions&&(ut.dir=!0),ut.dosPermissions&&16&ut.dosPermissions&&(ut.dir=!0),ut.dir&&(K=U(K)),ut.createFolders&&(et=N(K))&&F.call(this,et,!0);var Ct=q==="string"&&ut.binary===!1&&ut.base64===!1;it&&it.binary!==void 0||(ut.binary=!Ct),(tt instanceof C&&tt.uncompressedSize===0||ut.dir||!tt||tt.length===0)&&(ut.base64=!1,ut.binary=!0,tt="",ut.compression="STORE",q="string");var ot=null;ot=tt instanceof C||tt instanceof g?tt:k.isNode&&k.isStream(tt)?new D(K,tt):o.prepareContent(K,tt,ut.binary,ut.optimizedBinaryString,ut.base64);var bt=new E(K,ot,ut);this.files[K]=bt}var l=n("./utf8"),o=n("./utils"),g=n("./stream/GenericWorker"),_=n("./stream/StreamHelper"),I=n("./defaults"),C=n("./compressedObject"),E=n("./zipObject"),S=n("./generate"),k=n("./nodejsUtils"),D=n("./nodejs/NodejsStreamInputAdapter"),N=function(K){K.slice(-1)==="/"&&(K=K.substring(0,K.length-1));var tt=K.lastIndexOf("/");return 0<tt?K.substring(0,tt):""},U=function(K){return K.slice(-1)!=="/"&&(K+="/"),K},F=function(K,tt){return tt=tt!==void 0?tt:I.createFolders,K=U(K),this.files[K]||d.call(this,K,null,{dir:!0,createFolders:tt}),this.files[K]};function j(K){return Object.prototype.toString.call(K)==="[object RegExp]"}var $={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(K){var tt,it,et;for(tt in this.files)et=this.files[tt],(it=tt.slice(this.root.length,tt.length))&&tt.slice(0,this.root.length)===this.root&&K(it,et)},filter:function(K){var tt=[];return this.forEach(function(it,et){K(it,et)&&tt.push(et)}),tt},file:function(K,tt,it){if(arguments.length!==1)return K=this.root+K,d.call(this,K,tt,it),this;if(j(K)){var et=K;return this.filter(function(ut,Ct){return!Ct.dir&&et.test(ut)})}var q=this.files[this.root+K];return q&&!q.dir?q:null},folder:function(K){if(!K)return this;if(j(K))return this.filter(function(q,ut){return ut.dir&&K.test(q)});var tt=this.root+K,it=F.call(this,tt),et=this.clone();return et.root=it.name,et},remove:function(K){K=this.root+K;var tt=this.files[K];if(tt||(K.slice(-1)!=="/"&&(K+="/"),tt=this.files[K]),tt&&!tt.dir)delete this.files[K];else for(var it=this.filter(function(q,ut){return ut.name.slice(0,K.length)===K}),et=0;et<it.length;et++)delete this.files[it[et].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(K){var tt,it={};try{if((it=o.extend(K||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=it.type.toLowerCase(),it.compression=it.compression.toUpperCase(),it.type==="binarystring"&&(it.type="string"),!it.type)throw new Error("No output type specified.");o.checkSupport(it.type),it.platform!=="darwin"&&it.platform!=="freebsd"&&it.platform!=="linux"&&it.platform!=="sunos"||(it.platform="UNIX"),it.platform==="win32"&&(it.platform="DOS");var et=it.comment||this.comment||"";tt=S.generateWorker(this,it,et)}catch(q){(tt=new g("error")).error(q)}return new _(tt,it.type||"string",it.mimeType)},generateAsync:function(K,tt){return this.generateInternalStream(K).accumulate(tt)},generateNodeStream:function(K,tt){return(K=K||{}).type||(K.type="nodebuffer"),this.generateInternalStream(K).toNodejsStream(tt)}};a.exports=$},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,a,s){a.exports=n("stream")},{stream:void 0}],17:[function(n,a,s){var d=n("./DataReader");function l(o){d.call(this,o);for(var g=0;g<this.data.length;g++)o[g]=255&o[g]}n("../utils").inherits(l,d),l.prototype.byteAt=function(o){return this.data[this.zero+o]},l.prototype.lastIndexOfSignature=function(o){for(var g=o.charCodeAt(0),_=o.charCodeAt(1),I=o.charCodeAt(2),C=o.charCodeAt(3),E=this.length-4;0<=E;--E)if(this.data[E]===g&&this.data[E+1]===_&&this.data[E+2]===I&&this.data[E+3]===C)return E-this.zero;return-1},l.prototype.readAndCheckSignature=function(o){var g=o.charCodeAt(0),_=o.charCodeAt(1),I=o.charCodeAt(2),C=o.charCodeAt(3),E=this.readData(4);return g===E[0]&&_===E[1]&&I===E[2]&&C===E[3]},l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var g=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,g},a.exports=l},{"../utils":32,"./DataReader":18}],18:[function(n,a,s){var d=n("../utils");function l(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var g,_=0;for(this.checkOffset(o),g=this.index+o-1;g>=this.index;g--)_=(_<<8)+this.byteAt(g);return this.index+=o,_},readString:function(o){return d.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},a.exports=l},{"../utils":32}],19:[function(n,a,s){var d=n("./Uint8ArrayReader");function l(o){d.call(this,o)}n("../utils").inherits(l,d),l.prototype.readData=function(o){this.checkOffset(o);var g=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,g},a.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,a,s){var d=n("./DataReader");function l(o){d.call(this,o)}n("../utils").inherits(l,d),l.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},l.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},l.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},l.prototype.readData=function(o){this.checkOffset(o);var g=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,g},a.exports=l},{"../utils":32,"./DataReader":18}],21:[function(n,a,s){var d=n("./ArrayReader");function l(o){d.call(this,o)}n("../utils").inherits(l,d),l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var g=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,g},a.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(n,a,s){var d=n("../utils"),l=n("../support"),o=n("./ArrayReader"),g=n("./StringReader"),_=n("./NodeBufferReader"),I=n("./Uint8ArrayReader");a.exports=function(C){var E=d.getTypeOf(C);return d.checkSupport(E),E!=="string"||l.uint8array?E==="nodebuffer"?new _(C):l.uint8array?new I(d.transformTo("uint8array",C)):new o(d.transformTo("array",C)):new g(C)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,a,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,a,s){var d=n("./GenericWorker"),l=n("../utils");function o(g){d.call(this,"ConvertWorker to "+g),this.destType=g}l.inherits(o,d),o.prototype.processChunk=function(g){this.push({data:l.transformTo(this.destType,g.data),meta:g.meta})},a.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,a,s){var d=n("./GenericWorker"),l=n("../crc32");function o(){d.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,d),o.prototype.processChunk=function(g){this.streamInfo.crc32=l(g.data,this.streamInfo.crc32||0),this.push(g)},a.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,a,s){var d=n("../utils"),l=n("./GenericWorker");function o(g){l.call(this,"DataLengthProbe for "+g),this.propName=g,this.withStreamInfo(g,0)}d.inherits(o,l),o.prototype.processChunk=function(g){if(g){var _=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=_+g.data.length}l.prototype.processChunk.call(this,g)},a.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,a,s){var d=n("../utils"),l=n("./GenericWorker");function o(g){l.call(this,"DataWorker");var _=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,g.then(function(I){_.dataIsReady=!0,_.data=I,_.max=I&&I.length||0,_.type=d.getTypeOf(I),_.isPaused||_._tickAndRepeat()},function(I){_.error(I)})}d.inherits(o,l),o.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,d.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(d.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var g=null,_=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":g=this.data.substring(this.index,_);break;case"uint8array":g=this.data.subarray(this.index,_);break;case"array":case"nodebuffer":g=this.data.slice(this.index,_)}return this.index=_,this.push({data:g,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,a,s){function d(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}d.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,o){return this._listeners[l].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,o){if(this._listeners[l])for(var g=0;g<this._listeners[l].length;g++)this._listeners[l][g].call(this,o)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var o=this;return l.on("data",function(g){o.processChunk(g)}),l.on("end",function(){o.end()}),l.on("error",function(g){o.error(g)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,o){return this.extraStreamInfo[l]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},a.exports=d},{}],29:[function(n,a,s){var d=n("../utils"),l=n("./ConvertWorker"),o=n("./GenericWorker"),g=n("../base64"),_=n("../support"),I=n("../external"),C=null;if(_.nodestream)try{C=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function E(k,D){return new I.Promise(function(N,U){var F=[],j=k._internalType,$=k._outputType,K=k._mimeType;k.on("data",function(tt,it){F.push(tt),D&&D(it)}).on("error",function(tt){F=[],U(tt)}).on("end",function(){try{var tt=function(it,et,q){switch(it){case"blob":return d.newBlob(d.transformTo("arraybuffer",et),q);case"base64":return g.encode(et);default:return d.transformTo(it,et)}}($,function(it,et){var q,ut=0,Ct=null,ot=0;for(q=0;q<et.length;q++)ot+=et[q].length;switch(it){case"string":return et.join("");case"array":return Array.prototype.concat.apply([],et);case"uint8array":for(Ct=new Uint8Array(ot),q=0;q<et.length;q++)Ct.set(et[q],ut),ut+=et[q].length;return Ct;case"nodebuffer":return Buffer.concat(et);default:throw new Error("concat : unsupported type '"+it+"'")}}(j,F),K);N(tt)}catch(it){U(it)}F=[]}).resume()})}function S(k,D,N){var U=D;switch(D){case"blob":case"arraybuffer":U="uint8array";break;case"base64":U="string"}try{this._internalType=U,this._outputType=D,this._mimeType=N,d.checkSupport(U),this._worker=k.pipe(new l(U)),k.lock()}catch(F){this._worker=new o("error"),this._worker.error(F)}}S.prototype={accumulate:function(k){return E(this,k)},on:function(k,D){var N=this;return k==="data"?this._worker.on(k,function(U){D.call(N,U.data,U.meta)}):this._worker.on(k,function(){d.delay(D,arguments,N)}),this},resume:function(){return d.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(k){if(d.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new C(this,{objectMode:this._outputType!=="nodebuffer"},k)}},a.exports=S},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,a,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var d=new ArrayBuffer(0);try{s.blob=new Blob([d],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(d),s.blob=l.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,a,s){for(var d=n("./utils"),l=n("./support"),o=n("./nodejsUtils"),g=n("./stream/GenericWorker"),_=new Array(256),I=0;I<256;I++)_[I]=252<=I?6:248<=I?5:240<=I?4:224<=I?3:192<=I?2:1;_[254]=_[254]=1;function C(){g.call(this,"utf-8 decode"),this.leftOver=null}function E(){g.call(this,"utf-8 encode")}s.utf8encode=function(S){return l.nodebuffer?o.newBufferFrom(S,"utf-8"):function(k){var D,N,U,F,j,$=k.length,K=0;for(F=0;F<$;F++)(64512&(N=k.charCodeAt(F)))==55296&&F+1<$&&(64512&(U=k.charCodeAt(F+1)))==56320&&(N=65536+(N-55296<<10)+(U-56320),F++),K+=N<128?1:N<2048?2:N<65536?3:4;for(D=l.uint8array?new Uint8Array(K):new Array(K),F=j=0;j<K;F++)(64512&(N=k.charCodeAt(F)))==55296&&F+1<$&&(64512&(U=k.charCodeAt(F+1)))==56320&&(N=65536+(N-55296<<10)+(U-56320),F++),N<128?D[j++]=N:(N<2048?D[j++]=192|N>>>6:(N<65536?D[j++]=224|N>>>12:(D[j++]=240|N>>>18,D[j++]=128|N>>>12&63),D[j++]=128|N>>>6&63),D[j++]=128|63&N);return D}(S)},s.utf8decode=function(S){return l.nodebuffer?d.transformTo("nodebuffer",S).toString("utf-8"):function(k){var D,N,U,F,j=k.length,$=new Array(2*j);for(D=N=0;D<j;)if((U=k[D++])<128)$[N++]=U;else if(4<(F=_[U]))$[N++]=65533,D+=F-1;else{for(U&=F===2?31:F===3?15:7;1<F&&D<j;)U=U<<6|63&k[D++],F--;1<F?$[N++]=65533:U<65536?$[N++]=U:(U-=65536,$[N++]=55296|U>>10&1023,$[N++]=56320|1023&U)}return $.length!==N&&($.subarray?$=$.subarray(0,N):$.length=N),d.applyFromCharCode($)}(S=d.transformTo(l.uint8array?"uint8array":"array",S))},d.inherits(C,g),C.prototype.processChunk=function(S){var k=d.transformTo(l.uint8array?"uint8array":"array",S.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var D=k;(k=new Uint8Array(D.length+this.leftOver.length)).set(this.leftOver,0),k.set(D,this.leftOver.length)}else k=this.leftOver.concat(k);this.leftOver=null}var N=function(F,j){var $;for((j=j||F.length)>F.length&&(j=F.length),$=j-1;0<=$&&(192&F[$])==128;)$--;return $<0||$===0?j:$+_[F[$]]>j?$:j}(k),U=k;N!==k.length&&(l.uint8array?(U=k.subarray(0,N),this.leftOver=k.subarray(N,k.length)):(U=k.slice(0,N),this.leftOver=k.slice(N,k.length))),this.push({data:s.utf8decode(U),meta:S.meta})},C.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=C,d.inherits(E,g),E.prototype.processChunk=function(S){this.push({data:s.utf8encode(S.data),meta:S.meta})},s.Utf8EncodeWorker=E},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,a,s){var d=n("./support"),l=n("./base64"),o=n("./nodejsUtils"),g=n("./external");function _(D){return D}function I(D,N){for(var U=0;U<D.length;++U)N[U]=255&D.charCodeAt(U);return N}n("setimmediate"),s.newBlob=function(D,N){s.checkSupport("blob");try{return new Blob([D],{type:N})}catch{try{var U=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return U.append(D),U.getBlob(N)}catch{throw new Error("Bug : can't construct the Blob.")}}};var C={stringifyByChunk:function(D,N,U){var F=[],j=0,$=D.length;if($<=U)return String.fromCharCode.apply(null,D);for(;j<$;)N==="array"||N==="nodebuffer"?F.push(String.fromCharCode.apply(null,D.slice(j,Math.min(j+U,$)))):F.push(String.fromCharCode.apply(null,D.subarray(j,Math.min(j+U,$)))),j+=U;return F.join("")},stringifyByChar:function(D){for(var N="",U=0;U<D.length;U++)N+=String.fromCharCode(D[U]);return N},applyCanBeUsed:{uint8array:function(){try{return d.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return d.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function E(D){var N=65536,U=s.getTypeOf(D),F=!0;if(U==="uint8array"?F=C.applyCanBeUsed.uint8array:U==="nodebuffer"&&(F=C.applyCanBeUsed.nodebuffer),F)for(;1<N;)try{return C.stringifyByChunk(D,U,N)}catch{N=Math.floor(N/2)}return C.stringifyByChar(D)}function S(D,N){for(var U=0;U<D.length;U++)N[U]=D[U];return N}s.applyFromCharCode=E;var k={};k.string={string:_,array:function(D){return I(D,new Array(D.length))},arraybuffer:function(D){return k.string.uint8array(D).buffer},uint8array:function(D){return I(D,new Uint8Array(D.length))},nodebuffer:function(D){return I(D,o.allocBuffer(D.length))}},k.array={string:E,array:_,arraybuffer:function(D){return new Uint8Array(D).buffer},uint8array:function(D){return new Uint8Array(D)},nodebuffer:function(D){return o.newBufferFrom(D)}},k.arraybuffer={string:function(D){return E(new Uint8Array(D))},array:function(D){return S(new Uint8Array(D),new Array(D.byteLength))},arraybuffer:_,uint8array:function(D){return new Uint8Array(D)},nodebuffer:function(D){return o.newBufferFrom(new Uint8Array(D))}},k.uint8array={string:E,array:function(D){return S(D,new Array(D.length))},arraybuffer:function(D){return D.buffer},uint8array:_,nodebuffer:function(D){return o.newBufferFrom(D)}},k.nodebuffer={string:E,array:function(D){return S(D,new Array(D.length))},arraybuffer:function(D){return k.nodebuffer.uint8array(D).buffer},uint8array:function(D){return S(D,new Uint8Array(D.length))},nodebuffer:_},s.transformTo=function(D,N){if(N=N||"",!D)return N;s.checkSupport(D);var U=s.getTypeOf(N);return k[U][D](N)},s.resolve=function(D){for(var N=D.split("/"),U=[],F=0;F<N.length;F++){var j=N[F];j==="."||j===""&&F!==0&&F!==N.length-1||(j===".."?U.pop():U.push(j))}return U.join("/")},s.getTypeOf=function(D){return typeof D=="string"?"string":Object.prototype.toString.call(D)==="[object Array]"?"array":d.nodebuffer&&o.isBuffer(D)?"nodebuffer":d.uint8array&&D instanceof Uint8Array?"uint8array":d.arraybuffer&&D instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(D){if(!d[D.toLowerCase()])throw new Error(D+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(D){var N,U,F="";for(U=0;U<(D||"").length;U++)F+="\\x"+((N=D.charCodeAt(U))<16?"0":"")+N.toString(16).toUpperCase();return F},s.delay=function(D,N,U){setImmediate(function(){D.apply(U||null,N||[])})},s.inherits=function(D,N){function U(){}U.prototype=N.prototype,D.prototype=new U},s.extend=function(){var D,N,U={};for(D=0;D<arguments.length;D++)for(N in arguments[D])Object.prototype.hasOwnProperty.call(arguments[D],N)&&U[N]===void 0&&(U[N]=arguments[D][N]);return U},s.prepareContent=function(D,N,U,F,j){return g.Promise.resolve(N).then(function($){return d.blob&&($ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call($))!==-1)&&typeof FileReader<"u"?new g.Promise(function(K,tt){var it=new FileReader;it.onload=function(et){K(et.target.result)},it.onerror=function(et){tt(et.target.error)},it.readAsArrayBuffer($)}):$}).then(function($){var K=s.getTypeOf($);return K?(K==="arraybuffer"?$=s.transformTo("uint8array",$):K==="string"&&(j?$=l.decode($):U&&F!==!0&&($=function(tt){return I(tt,d.uint8array?new Uint8Array(tt.length):new Array(tt.length))}($))),$):g.Promise.reject(new Error("Can't read the data of '"+D+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,a,s){var d=n("./reader/readerFor"),l=n("./utils"),o=n("./signature"),g=n("./zipEntry"),_=n("./support");function I(C){this.files=[],this.loadOptions=C}I.prototype={checkSignature:function(C){if(!this.reader.readAndCheckSignature(C)){this.reader.index-=4;var E=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(E)+", expected "+l.pretty(C)+")")}},isSignature:function(C,E){var S=this.reader.index;this.reader.setIndex(C);var k=this.reader.readString(4)===E;return this.reader.setIndex(S),k},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var C=this.reader.readData(this.zipCommentLength),E=_.uint8array?"uint8array":"array",S=l.transformTo(E,C);this.zipComment=this.loadOptions.decodeFileName(S)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var C,E,S,k=this.zip64EndOfCentralSize-44;0<k;)C=this.reader.readInt(2),E=this.reader.readInt(4),S=this.reader.readData(E),this.zip64ExtensibleData[C]={id:C,length:E,value:S}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var C,E;for(C=0;C<this.files.length;C++)E=this.files[C],this.reader.setIndex(E.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),E.readLocalPart(this.reader),E.handleUTF8(),E.processAttributes()},readCentralDir:function(){var C;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(C=new g({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(C);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var C=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(C<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(C);var E=C;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(C=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(C),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var S=this.centralDirOffset+this.centralDirSize;this.zip64&&(S+=20,S+=12+this.zip64EndOfCentralSize);var k=E-S;if(0<k)this.isSignature(E,o.CENTRAL_FILE_HEADER)||(this.reader.zero=k);else if(k<0)throw new Error("Corrupted zip: missing "+Math.abs(k)+" bytes.")},prepareReader:function(C){this.reader=d(C)},load:function(C){this.prepareReader(C),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=I},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,a,s){var d=n("./reader/readerFor"),l=n("./utils"),o=n("./compressedObject"),g=n("./crc32"),_=n("./utf8"),I=n("./compressions"),C=n("./support");function E(S,k){this.options=S,this.loadOptions=k}E.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(S){var k,D;if(S.skip(22),this.fileNameLength=S.readInt(2),D=S.readInt(2),this.fileName=S.readData(this.fileNameLength),S.skip(D),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((k=function(N){for(var U in I)if(Object.prototype.hasOwnProperty.call(I,U)&&I[U].magic===N)return I[U];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,k,S.readData(this.compressedSize))},readCentralPart:function(S){this.versionMadeBy=S.readInt(2),S.skip(2),this.bitFlag=S.readInt(2),this.compressionMethod=S.readString(2),this.date=S.readDate(),this.crc32=S.readInt(4),this.compressedSize=S.readInt(4),this.uncompressedSize=S.readInt(4);var k=S.readInt(2);if(this.extraFieldsLength=S.readInt(2),this.fileCommentLength=S.readInt(2),this.diskNumberStart=S.readInt(2),this.internalFileAttributes=S.readInt(2),this.externalFileAttributes=S.readInt(4),this.localHeaderOffset=S.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");S.skip(k),this.readExtraFields(S),this.parseZIP64ExtraField(S),this.fileComment=S.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var S=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),S==0&&(this.dosPermissions=63&this.externalFileAttributes),S==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var S=d(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=S.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=S.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=S.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=S.readInt(4))}},readExtraFields:function(S){var k,D,N,U=S.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});S.index+4<U;)k=S.readInt(2),D=S.readInt(2),N=S.readData(D),this.extraFields[k]={id:k,length:D,value:N};S.setIndex(U)},handleUTF8:function(){var S=C.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_.utf8decode(this.fileName),this.fileCommentStr=_.utf8decode(this.fileComment);else{var k=this.findExtraFieldUnicodePath();if(k!==null)this.fileNameStr=k;else{var D=l.transformTo(S,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(D)}var N=this.findExtraFieldUnicodeComment();if(N!==null)this.fileCommentStr=N;else{var U=l.transformTo(S,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(U)}}},findExtraFieldUnicodePath:function(){var S=this.extraFields[28789];if(S){var k=d(S.value);return k.readInt(1)!==1||g(this.fileName)!==k.readInt(4)?null:_.utf8decode(k.readData(S.length-5))}return null},findExtraFieldUnicodeComment:function(){var S=this.extraFields[25461];if(S){var k=d(S.value);return k.readInt(1)!==1||g(this.fileComment)!==k.readInt(4)?null:_.utf8decode(k.readData(S.length-5))}return null}},a.exports=E},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,a,s){function d(k,D,N){this.name=k,this.dir=N.dir,this.date=N.date,this.comment=N.comment,this.unixPermissions=N.unixPermissions,this.dosPermissions=N.dosPermissions,this._data=D,this._dataBinary=N.binary,this.options={compression:N.compression,compressionOptions:N.compressionOptions}}var l=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),g=n("./utf8"),_=n("./compressedObject"),I=n("./stream/GenericWorker");d.prototype={internalStream:function(k){var D=null,N="string";try{if(!k)throw new Error("No output type specified.");var U=(N=k.toLowerCase())==="string"||N==="text";N!=="binarystring"&&N!=="text"||(N="string"),D=this._decompressWorker();var F=!this._dataBinary;F&&!U&&(D=D.pipe(new g.Utf8EncodeWorker)),!F&&U&&(D=D.pipe(new g.Utf8DecodeWorker))}catch(j){(D=new I("error")).error(j)}return new l(D,N,"")},async:function(k,D){return this.internalStream(k).accumulate(D)},nodeStream:function(k,D){return this.internalStream(k||"nodebuffer").toNodejsStream(D)},_compressWorker:function(k,D){if(this._data instanceof _&&this._data.compression.magic===k.magic)return this._data.getCompressedWorker();var N=this._decompressWorker();return this._dataBinary||(N=N.pipe(new g.Utf8EncodeWorker)),_.createWorkerFrom(N,k,D)},_decompressWorker:function(){return this._data instanceof _?this._data.getContentWorker():this._data instanceof I?this._data:new o(this._data)}};for(var C=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],E=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},S=0;S<C.length;S++)d.prototype[C[S]]=E;a.exports=d},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,a,s){(function(d){var l,o,g=d.MutationObserver||d.WebKitMutationObserver;if(g){var _=0,I=new g(k),C=d.document.createTextNode("");I.observe(C,{characterData:!0}),l=function(){C.data=_=++_%2}}else if(d.setImmediate||d.MessageChannel===void 0)l="document"in d&&"onreadystatechange"in d.document.createElement("script")?function(){var D=d.document.createElement("script");D.onreadystatechange=function(){k(),D.onreadystatechange=null,D.parentNode.removeChild(D),D=null},d.document.documentElement.appendChild(D)}:function(){setTimeout(k,0)};else{var E=new d.MessageChannel;E.port1.onmessage=k,l=function(){E.port2.postMessage(0)}}var S=[];function k(){var D,N;o=!0;for(var U=S.length;U;){for(N=S,S=[],D=-1;++D<U;)N[D]();U=S.length}o=!1}a.exports=function(D){S.push(D)!==1||o||l()}}).call(this,typeof Io<"u"?Io:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,a,s){var d=n("immediate");function l(){}var o={},g=["REJECTED"],_=["FULFILLED"],I=["PENDING"];function C(U){if(typeof U!="function")throw new TypeError("resolver must be a function");this.state=I,this.queue=[],this.outcome=void 0,U!==l&&D(this,U)}function E(U,F,j){this.promise=U,typeof F=="function"&&(this.onFulfilled=F,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function S(U,F,j){d(function(){var $;try{$=F(j)}catch(K){return o.reject(U,K)}$===U?o.reject(U,new TypeError("Cannot resolve promise with itself")):o.resolve(U,$)})}function k(U){var F=U&&U.then;if(U&&(typeof U=="object"||typeof U=="function")&&typeof F=="function")return function(){F.apply(U,arguments)}}function D(U,F){var j=!1;function $(it){j||(j=!0,o.reject(U,it))}function K(it){j||(j=!0,o.resolve(U,it))}var tt=N(function(){F(K,$)});tt.status==="error"&&$(tt.value)}function N(U,F){var j={};try{j.value=U(F),j.status="success"}catch($){j.status="error",j.value=$}return j}(a.exports=C).prototype.finally=function(U){if(typeof U!="function")return this;var F=this.constructor;return this.then(function(j){return F.resolve(U()).then(function(){return j})},function(j){return F.resolve(U()).then(function(){throw j})})},C.prototype.catch=function(U){return this.then(null,U)},C.prototype.then=function(U,F){if(typeof U!="function"&&this.state===_||typeof F!="function"&&this.state===g)return this;var j=new this.constructor(l);return this.state!==I?S(j,this.state===_?U:F,this.outcome):this.queue.push(new E(j,U,F)),j},E.prototype.callFulfilled=function(U){o.resolve(this.promise,U)},E.prototype.otherCallFulfilled=function(U){S(this.promise,this.onFulfilled,U)},E.prototype.callRejected=function(U){o.reject(this.promise,U)},E.prototype.otherCallRejected=function(U){S(this.promise,this.onRejected,U)},o.resolve=function(U,F){var j=N(k,F);if(j.status==="error")return o.reject(U,j.value);var $=j.value;if($)D(U,$);else{U.state=_,U.outcome=F;for(var K=-1,tt=U.queue.length;++K<tt;)U.queue[K].callFulfilled(F)}return U},o.reject=function(U,F){U.state=g,U.outcome=F;for(var j=-1,$=U.queue.length;++j<$;)U.queue[j].callRejected(F);return U},C.resolve=function(U){return U instanceof this?U:o.resolve(new this(l),U)},C.reject=function(U){var F=new this(l);return o.reject(F,U)},C.all=function(U){var F=this;if(Object.prototype.toString.call(U)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=U.length,$=!1;if(!j)return this.resolve([]);for(var K=new Array(j),tt=0,it=-1,et=new this(l);++it<j;)q(U[it],it);return et;function q(ut,Ct){F.resolve(ut).then(function(ot){K[Ct]=ot,++tt!==j||$||($=!0,o.resolve(et,K))},function(ot){$||($=!0,o.reject(et,ot))})}},C.race=function(U){var F=this;if(Object.prototype.toString.call(U)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=U.length,$=!1;if(!j)return this.resolve([]);for(var K=-1,tt=new this(l);++K<j;)it=U[K],F.resolve(it).then(function(et){$||($=!0,o.resolve(tt,et))},function(et){$||($=!0,o.reject(tt,et))});var it;return tt}},{immediate:36}],38:[function(n,a,s){var d={};(0,n("./lib/utils/common").assign)(d,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),a.exports=d},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,a,s){var d=n("./zlib/deflate"),l=n("./utils/common"),o=n("./utils/strings"),g=n("./zlib/messages"),_=n("./zlib/zstream"),I=Object.prototype.toString,C=0,E=-1,S=0,k=8;function D(U){if(!(this instanceof D))return new D(U);this.options=l.assign({level:E,method:k,chunkSize:16384,windowBits:15,memLevel:8,strategy:S,to:""},U||{});var F=this.options;F.raw&&0<F.windowBits?F.windowBits=-F.windowBits:F.gzip&&0<F.windowBits&&F.windowBits<16&&(F.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var j=d.deflateInit2(this.strm,F.level,F.method,F.windowBits,F.memLevel,F.strategy);if(j!==C)throw new Error(g[j]);if(F.header&&d.deflateSetHeader(this.strm,F.header),F.dictionary){var $;if($=typeof F.dictionary=="string"?o.string2buf(F.dictionary):I.call(F.dictionary)==="[object ArrayBuffer]"?new Uint8Array(F.dictionary):F.dictionary,(j=d.deflateSetDictionary(this.strm,$))!==C)throw new Error(g[j]);this._dict_set=!0}}function N(U,F){var j=new D(F);if(j.push(U,!0),j.err)throw j.msg||g[j.err];return j.result}D.prototype.push=function(U,F){var j,$,K=this.strm,tt=this.options.chunkSize;if(this.ended)return!1;$=F===~~F?F:F===!0?4:0,typeof U=="string"?K.input=o.string2buf(U):I.call(U)==="[object ArrayBuffer]"?K.input=new Uint8Array(U):K.input=U,K.next_in=0,K.avail_in=K.input.length;do{if(K.avail_out===0&&(K.output=new l.Buf8(tt),K.next_out=0,K.avail_out=tt),(j=d.deflate(K,$))!==1&&j!==C)return this.onEnd(j),!(this.ended=!0);K.avail_out!==0&&(K.avail_in!==0||$!==4&&$!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(l.shrinkBuf(K.output,K.next_out))):this.onData(l.shrinkBuf(K.output,K.next_out)))}while((0<K.avail_in||K.avail_out===0)&&j!==1);return $===4?(j=d.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===C):$!==2||(this.onEnd(C),!(K.avail_out=0))},D.prototype.onData=function(U){this.chunks.push(U)},D.prototype.onEnd=function(U){U===C&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=U,this.msg=this.strm.msg},s.Deflate=D,s.deflate=N,s.deflateRaw=function(U,F){return(F=F||{}).raw=!0,N(U,F)},s.gzip=function(U,F){return(F=F||{}).gzip=!0,N(U,F)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,a,s){var d=n("./zlib/inflate"),l=n("./utils/common"),o=n("./utils/strings"),g=n("./zlib/constants"),_=n("./zlib/messages"),I=n("./zlib/zstream"),C=n("./zlib/gzheader"),E=Object.prototype.toString;function S(D){if(!(this instanceof S))return new S(D);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},D||{});var N=this.options;N.raw&&0<=N.windowBits&&N.windowBits<16&&(N.windowBits=-N.windowBits,N.windowBits===0&&(N.windowBits=-15)),!(0<=N.windowBits&&N.windowBits<16)||D&&D.windowBits||(N.windowBits+=32),15<N.windowBits&&N.windowBits<48&&!(15&N.windowBits)&&(N.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new I,this.strm.avail_out=0;var U=d.inflateInit2(this.strm,N.windowBits);if(U!==g.Z_OK)throw new Error(_[U]);this.header=new C,d.inflateGetHeader(this.strm,this.header)}function k(D,N){var U=new S(N);if(U.push(D,!0),U.err)throw U.msg||_[U.err];return U.result}S.prototype.push=function(D,N){var U,F,j,$,K,tt,it=this.strm,et=this.options.chunkSize,q=this.options.dictionary,ut=!1;if(this.ended)return!1;F=N===~~N?N:N===!0?g.Z_FINISH:g.Z_NO_FLUSH,typeof D=="string"?it.input=o.binstring2buf(D):E.call(D)==="[object ArrayBuffer]"?it.input=new Uint8Array(D):it.input=D,it.next_in=0,it.avail_in=it.input.length;do{if(it.avail_out===0&&(it.output=new l.Buf8(et),it.next_out=0,it.avail_out=et),(U=d.inflate(it,g.Z_NO_FLUSH))===g.Z_NEED_DICT&&q&&(tt=typeof q=="string"?o.string2buf(q):E.call(q)==="[object ArrayBuffer]"?new Uint8Array(q):q,U=d.inflateSetDictionary(this.strm,tt)),U===g.Z_BUF_ERROR&&ut===!0&&(U=g.Z_OK,ut=!1),U!==g.Z_STREAM_END&&U!==g.Z_OK)return this.onEnd(U),!(this.ended=!0);it.next_out&&(it.avail_out!==0&&U!==g.Z_STREAM_END&&(it.avail_in!==0||F!==g.Z_FINISH&&F!==g.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=o.utf8border(it.output,it.next_out),$=it.next_out-j,K=o.buf2string(it.output,j),it.next_out=$,it.avail_out=et-$,$&&l.arraySet(it.output,it.output,j,$,0),this.onData(K)):this.onData(l.shrinkBuf(it.output,it.next_out)))),it.avail_in===0&&it.avail_out===0&&(ut=!0)}while((0<it.avail_in||it.avail_out===0)&&U!==g.Z_STREAM_END);return U===g.Z_STREAM_END&&(F=g.Z_FINISH),F===g.Z_FINISH?(U=d.inflateEnd(this.strm),this.onEnd(U),this.ended=!0,U===g.Z_OK):F!==g.Z_SYNC_FLUSH||(this.onEnd(g.Z_OK),!(it.avail_out=0))},S.prototype.onData=function(D){this.chunks.push(D)},S.prototype.onEnd=function(D){D===g.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=D,this.msg=this.strm.msg},s.Inflate=S,s.inflate=k,s.inflateRaw=function(D,N){return(N=N||{}).raw=!0,k(D,N)},s.ungzip=k},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,a,s){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(g){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var I=_.shift();if(I){if(typeof I!="object")throw new TypeError(I+"must be non-object");for(var C in I)I.hasOwnProperty(C)&&(g[C]=I[C])}}return g},s.shrinkBuf=function(g,_){return g.length===_?g:g.subarray?g.subarray(0,_):(g.length=_,g)};var l={arraySet:function(g,_,I,C,E){if(_.subarray&&g.subarray)g.set(_.subarray(I,I+C),E);else for(var S=0;S<C;S++)g[E+S]=_[I+S]},flattenChunks:function(g){var _,I,C,E,S,k;for(_=C=0,I=g.length;_<I;_++)C+=g[_].length;for(k=new Uint8Array(C),_=E=0,I=g.length;_<I;_++)S=g[_],k.set(S,E),E+=S.length;return k}},o={arraySet:function(g,_,I,C,E){for(var S=0;S<C;S++)g[E+S]=_[I+S]},flattenChunks:function(g){return[].concat.apply([],g)}};s.setTyped=function(g){g?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,l)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,o))},s.setTyped(d)},{}],42:[function(n,a,s){var d=n("./common"),l=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var g=new d.Buf8(256),_=0;_<256;_++)g[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function I(C,E){if(E<65537&&(C.subarray&&o||!C.subarray&&l))return String.fromCharCode.apply(null,d.shrinkBuf(C,E));for(var S="",k=0;k<E;k++)S+=String.fromCharCode(C[k]);return S}g[254]=g[254]=1,s.string2buf=function(C){var E,S,k,D,N,U=C.length,F=0;for(D=0;D<U;D++)(64512&(S=C.charCodeAt(D)))==55296&&D+1<U&&(64512&(k=C.charCodeAt(D+1)))==56320&&(S=65536+(S-55296<<10)+(k-56320),D++),F+=S<128?1:S<2048?2:S<65536?3:4;for(E=new d.Buf8(F),D=N=0;N<F;D++)(64512&(S=C.charCodeAt(D)))==55296&&D+1<U&&(64512&(k=C.charCodeAt(D+1)))==56320&&(S=65536+(S-55296<<10)+(k-56320),D++),S<128?E[N++]=S:(S<2048?E[N++]=192|S>>>6:(S<65536?E[N++]=224|S>>>12:(E[N++]=240|S>>>18,E[N++]=128|S>>>12&63),E[N++]=128|S>>>6&63),E[N++]=128|63&S);return E},s.buf2binstring=function(C){return I(C,C.length)},s.binstring2buf=function(C){for(var E=new d.Buf8(C.length),S=0,k=E.length;S<k;S++)E[S]=C.charCodeAt(S);return E},s.buf2string=function(C,E){var S,k,D,N,U=E||C.length,F=new Array(2*U);for(S=k=0;S<U;)if((D=C[S++])<128)F[k++]=D;else if(4<(N=g[D]))F[k++]=65533,S+=N-1;else{for(D&=N===2?31:N===3?15:7;1<N&&S<U;)D=D<<6|63&C[S++],N--;1<N?F[k++]=65533:D<65536?F[k++]=D:(D-=65536,F[k++]=55296|D>>10&1023,F[k++]=56320|1023&D)}return I(F,k)},s.utf8border=function(C,E){var S;for((E=E||C.length)>C.length&&(E=C.length),S=E-1;0<=S&&(192&C[S])==128;)S--;return S<0||S===0?E:S+g[C[S]]>E?S:E}},{"./common":41}],43:[function(n,a,s){a.exports=function(d,l,o,g){for(var _=65535&d|0,I=d>>>16&65535|0,C=0;o!==0;){for(o-=C=2e3<o?2e3:o;I=I+(_=_+l[g++]|0)|0,--C;);_%=65521,I%=65521}return _|I<<16|0}},{}],44:[function(n,a,s){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,a,s){var d=function(){for(var l,o=[],g=0;g<256;g++){l=g;for(var _=0;_<8;_++)l=1&l?3988292384^l>>>1:l>>>1;o[g]=l}return o}();a.exports=function(l,o,g,_){var I=d,C=_+g;l^=-1;for(var E=_;E<C;E++)l=l>>>8^I[255&(l^o[E])];return-1^l}},{}],46:[function(n,a,s){var d,l=n("../utils/common"),o=n("./trees"),g=n("./adler32"),_=n("./crc32"),I=n("./messages"),C=0,E=4,S=0,k=-2,D=-1,N=4,U=2,F=8,j=9,$=286,K=30,tt=19,it=2*$+1,et=15,q=3,ut=258,Ct=ut+q+1,ot=42,bt=113,X=1,Wt=2,Vt=3,Bt=4;function ae(H,Rt){return H.msg=I[Rt],Rt}function ye(H){return(H<<1)-(4<H?9:0)}function en(H){for(var Rt=H.length;0<=--Rt;)H[Rt]=0}function Jt(H){var Rt=H.state,Pt=Rt.pending;Pt>H.avail_out&&(Pt=H.avail_out),Pt!==0&&(l.arraySet(H.output,Rt.pending_buf,Rt.pending_out,Pt,H.next_out),H.next_out+=Pt,Rt.pending_out+=Pt,H.total_out+=Pt,H.avail_out-=Pt,Rt.pending-=Pt,Rt.pending===0&&(Rt.pending_out=0))}function Gt(H,Rt){o._tr_flush_block(H,0<=H.block_start?H.block_start:-1,H.strstart-H.block_start,Rt),H.block_start=H.strstart,Jt(H.strm)}function Re(H,Rt){H.pending_buf[H.pending++]=Rt}function $e(H,Rt){H.pending_buf[H.pending++]=Rt>>>8&255,H.pending_buf[H.pending++]=255&Rt}function Ce(H,Rt){var Pt,gt,yt=H.max_chain_length,jt=H.strstart,ee=H.prev_length,ue=H.nice_match,Ut=H.strstart>H.w_size-Ct?H.strstart-(H.w_size-Ct):0,Ie=H.window,je=H.w_mask,Le=H.prev,Ke=H.strstart+ut,_n=Ie[jt+ee-1],wn=Ie[jt+ee];H.prev_length>=H.good_match&&(yt>>=2),ue>H.lookahead&&(ue=H.lookahead);do if(Ie[(Pt=Rt)+ee]===wn&&Ie[Pt+ee-1]===_n&&Ie[Pt]===Ie[jt]&&Ie[++Pt]===Ie[jt+1]){jt+=2,Pt++;do;while(Ie[++jt]===Ie[++Pt]&&Ie[++jt]===Ie[++Pt]&&Ie[++jt]===Ie[++Pt]&&Ie[++jt]===Ie[++Pt]&&Ie[++jt]===Ie[++Pt]&&Ie[++jt]===Ie[++Pt]&&Ie[++jt]===Ie[++Pt]&&Ie[++jt]===Ie[++Pt]&&jt<Ke);if(gt=ut-(Ke-jt),jt=Ke-ut,ee<gt){if(H.match_start=Rt,ue<=(ee=gt))break;_n=Ie[jt+ee-1],wn=Ie[jt+ee]}}while((Rt=Le[Rt&je])>Ut&&--yt!=0);return ee<=H.lookahead?ee:H.lookahead}function nn(H){var Rt,Pt,gt,yt,jt,ee,ue,Ut,Ie,je,Le=H.w_size;do{if(yt=H.window_size-H.lookahead-H.strstart,H.strstart>=Le+(Le-Ct)){for(l.arraySet(H.window,H.window,Le,Le,0),H.match_start-=Le,H.strstart-=Le,H.block_start-=Le,Rt=Pt=H.hash_size;gt=H.head[--Rt],H.head[Rt]=Le<=gt?gt-Le:0,--Pt;);for(Rt=Pt=Le;gt=H.prev[--Rt],H.prev[Rt]=Le<=gt?gt-Le:0,--Pt;);yt+=Le}if(H.strm.avail_in===0)break;if(ee=H.strm,ue=H.window,Ut=H.strstart+H.lookahead,Ie=yt,je=void 0,je=ee.avail_in,Ie<je&&(je=Ie),Pt=je===0?0:(ee.avail_in-=je,l.arraySet(ue,ee.input,ee.next_in,je,Ut),ee.state.wrap===1?ee.adler=g(ee.adler,ue,je,Ut):ee.state.wrap===2&&(ee.adler=_(ee.adler,ue,je,Ut)),ee.next_in+=je,ee.total_in+=je,je),H.lookahead+=Pt,H.lookahead+H.insert>=q)for(jt=H.strstart-H.insert,H.ins_h=H.window[jt],H.ins_h=(H.ins_h<<H.hash_shift^H.window[jt+1])&H.hash_mask;H.insert&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[jt+q-1])&H.hash_mask,H.prev[jt&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=jt,jt++,H.insert--,!(H.lookahead+H.insert<q)););}while(H.lookahead<Ct&&H.strm.avail_in!==0)}function be(H,Rt){for(var Pt,gt;;){if(H.lookahead<Ct){if(nn(H),H.lookahead<Ct&&Rt===C)return X;if(H.lookahead===0)break}if(Pt=0,H.lookahead>=q&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+q-1])&H.hash_mask,Pt=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),Pt!==0&&H.strstart-Pt<=H.w_size-Ct&&(H.match_length=Ce(H,Pt)),H.match_length>=q)if(gt=o._tr_tally(H,H.strstart-H.match_start,H.match_length-q),H.lookahead-=H.match_length,H.match_length<=H.max_lazy_match&&H.lookahead>=q){for(H.match_length--;H.strstart++,H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+q-1])&H.hash_mask,Pt=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart,--H.match_length!=0;);H.strstart++}else H.strstart+=H.match_length,H.match_length=0,H.ins_h=H.window[H.strstart],H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+1])&H.hash_mask;else gt=o._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++;if(gt&&(Gt(H,!1),H.strm.avail_out===0))return X}return H.insert=H.strstart<q-1?H.strstart:q-1,Rt===E?(Gt(H,!0),H.strm.avail_out===0?Vt:Bt):H.last_lit&&(Gt(H,!1),H.strm.avail_out===0)?X:Wt}function Me(H,Rt){for(var Pt,gt,yt;;){if(H.lookahead<Ct){if(nn(H),H.lookahead<Ct&&Rt===C)return X;if(H.lookahead===0)break}if(Pt=0,H.lookahead>=q&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+q-1])&H.hash_mask,Pt=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),H.prev_length=H.match_length,H.prev_match=H.match_start,H.match_length=q-1,Pt!==0&&H.prev_length<H.max_lazy_match&&H.strstart-Pt<=H.w_size-Ct&&(H.match_length=Ce(H,Pt),H.match_length<=5&&(H.strategy===1||H.match_length===q&&4096<H.strstart-H.match_start)&&(H.match_length=q-1)),H.prev_length>=q&&H.match_length<=H.prev_length){for(yt=H.strstart+H.lookahead-q,gt=o._tr_tally(H,H.strstart-1-H.prev_match,H.prev_length-q),H.lookahead-=H.prev_length-1,H.prev_length-=2;++H.strstart<=yt&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+q-1])&H.hash_mask,Pt=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),--H.prev_length!=0;);if(H.match_available=0,H.match_length=q-1,H.strstart++,gt&&(Gt(H,!1),H.strm.avail_out===0))return X}else if(H.match_available){if((gt=o._tr_tally(H,0,H.window[H.strstart-1]))&&Gt(H,!1),H.strstart++,H.lookahead--,H.strm.avail_out===0)return X}else H.match_available=1,H.strstart++,H.lookahead--}return H.match_available&&(gt=o._tr_tally(H,0,H.window[H.strstart-1]),H.match_available=0),H.insert=H.strstart<q-1?H.strstart:q-1,Rt===E?(Gt(H,!0),H.strm.avail_out===0?Vt:Bt):H.last_lit&&(Gt(H,!1),H.strm.avail_out===0)?X:Wt}function xe(H,Rt,Pt,gt,yt){this.good_length=H,this.max_lazy=Rt,this.nice_length=Pt,this.max_chain=gt,this.func=yt}function Be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=F,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*it),this.dyn_dtree=new l.Buf16(2*(2*K+1)),this.bl_tree=new l.Buf16(2*(2*tt+1)),en(this.dyn_ltree),en(this.dyn_dtree),en(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(et+1),this.heap=new l.Buf16(2*$+1),en(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*$+1),en(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Je(H){var Rt;return H&&H.state?(H.total_in=H.total_out=0,H.data_type=U,(Rt=H.state).pending=0,Rt.pending_out=0,Rt.wrap<0&&(Rt.wrap=-Rt.wrap),Rt.status=Rt.wrap?ot:bt,H.adler=Rt.wrap===2?0:1,Rt.last_flush=C,o._tr_init(Rt),S):ae(H,k)}function Ln(H){var Rt=Je(H);return Rt===S&&function(Pt){Pt.window_size=2*Pt.w_size,en(Pt.head),Pt.max_lazy_match=d[Pt.level].max_lazy,Pt.good_match=d[Pt.level].good_length,Pt.nice_match=d[Pt.level].nice_length,Pt.max_chain_length=d[Pt.level].max_chain,Pt.strstart=0,Pt.block_start=0,Pt.lookahead=0,Pt.insert=0,Pt.match_length=Pt.prev_length=q-1,Pt.match_available=0,Pt.ins_h=0}(H.state),Rt}function Tt(H,Rt,Pt,gt,yt,jt){if(!H)return k;var ee=1;if(Rt===D&&(Rt=6),gt<0?(ee=0,gt=-gt):15<gt&&(ee=2,gt-=16),yt<1||j<yt||Pt!==F||gt<8||15<gt||Rt<0||9<Rt||jt<0||N<jt)return ae(H,k);gt===8&&(gt=9);var ue=new Be;return(H.state=ue).strm=H,ue.wrap=ee,ue.gzhead=null,ue.w_bits=gt,ue.w_size=1<<ue.w_bits,ue.w_mask=ue.w_size-1,ue.hash_bits=yt+7,ue.hash_size=1<<ue.hash_bits,ue.hash_mask=ue.hash_size-1,ue.hash_shift=~~((ue.hash_bits+q-1)/q),ue.window=new l.Buf8(2*ue.w_size),ue.head=new l.Buf16(ue.hash_size),ue.prev=new l.Buf16(ue.w_size),ue.lit_bufsize=1<<yt+6,ue.pending_buf_size=4*ue.lit_bufsize,ue.pending_buf=new l.Buf8(ue.pending_buf_size),ue.d_buf=1*ue.lit_bufsize,ue.l_buf=3*ue.lit_bufsize,ue.level=Rt,ue.strategy=jt,ue.method=Pt,Ln(H)}d=[new xe(0,0,0,0,function(H,Rt){var Pt=65535;for(Pt>H.pending_buf_size-5&&(Pt=H.pending_buf_size-5);;){if(H.lookahead<=1){if(nn(H),H.lookahead===0&&Rt===C)return X;if(H.lookahead===0)break}H.strstart+=H.lookahead,H.lookahead=0;var gt=H.block_start+Pt;if((H.strstart===0||H.strstart>=gt)&&(H.lookahead=H.strstart-gt,H.strstart=gt,Gt(H,!1),H.strm.avail_out===0)||H.strstart-H.block_start>=H.w_size-Ct&&(Gt(H,!1),H.strm.avail_out===0))return X}return H.insert=0,Rt===E?(Gt(H,!0),H.strm.avail_out===0?Vt:Bt):(H.strstart>H.block_start&&(Gt(H,!1),H.strm.avail_out),X)}),new xe(4,4,8,4,be),new xe(4,5,16,8,be),new xe(4,6,32,32,be),new xe(4,4,16,16,Me),new xe(8,16,32,32,Me),new xe(8,16,128,128,Me),new xe(8,32,128,256,Me),new xe(32,128,258,1024,Me),new xe(32,258,258,4096,Me)],s.deflateInit=function(H,Rt){return Tt(H,Rt,F,15,8,0)},s.deflateInit2=Tt,s.deflateReset=Ln,s.deflateResetKeep=Je,s.deflateSetHeader=function(H,Rt){return H&&H.state?H.state.wrap!==2?k:(H.state.gzhead=Rt,S):k},s.deflate=function(H,Rt){var Pt,gt,yt,jt;if(!H||!H.state||5<Rt||Rt<0)return H?ae(H,k):k;if(gt=H.state,!H.output||!H.input&&H.avail_in!==0||gt.status===666&&Rt!==E)return ae(H,H.avail_out===0?-5:k);if(gt.strm=H,Pt=gt.last_flush,gt.last_flush=Rt,gt.status===ot)if(gt.wrap===2)H.adler=0,Re(gt,31),Re(gt,139),Re(gt,8),gt.gzhead?(Re(gt,(gt.gzhead.text?1:0)+(gt.gzhead.hcrc?2:0)+(gt.gzhead.extra?4:0)+(gt.gzhead.name?8:0)+(gt.gzhead.comment?16:0)),Re(gt,255&gt.gzhead.time),Re(gt,gt.gzhead.time>>8&255),Re(gt,gt.gzhead.time>>16&255),Re(gt,gt.gzhead.time>>24&255),Re(gt,gt.level===9?2:2<=gt.strategy||gt.level<2?4:0),Re(gt,255&gt.gzhead.os),gt.gzhead.extra&&gt.gzhead.extra.length&&(Re(gt,255&gt.gzhead.extra.length),Re(gt,gt.gzhead.extra.length>>8&255)),gt.gzhead.hcrc&&(H.adler=_(H.adler,gt.pending_buf,gt.pending,0)),gt.gzindex=0,gt.status=69):(Re(gt,0),Re(gt,0),Re(gt,0),Re(gt,0),Re(gt,0),Re(gt,gt.level===9?2:2<=gt.strategy||gt.level<2?4:0),Re(gt,3),gt.status=bt);else{var ee=F+(gt.w_bits-8<<4)<<8;ee|=(2<=gt.strategy||gt.level<2?0:gt.level<6?1:gt.level===6?2:3)<<6,gt.strstart!==0&&(ee|=32),ee+=31-ee%31,gt.status=bt,$e(gt,ee),gt.strstart!==0&&($e(gt,H.adler>>>16),$e(gt,65535&H.adler)),H.adler=1}if(gt.status===69)if(gt.gzhead.extra){for(yt=gt.pending;gt.gzindex<(65535&gt.gzhead.extra.length)&&(gt.pending!==gt.pending_buf_size||(gt.gzhead.hcrc&&gt.pending>yt&&(H.adler=_(H.adler,gt.pending_buf,gt.pending-yt,yt)),Jt(H),yt=gt.pending,gt.pending!==gt.pending_buf_size));)Re(gt,255&gt.gzhead.extra[gt.gzindex]),gt.gzindex++;gt.gzhead.hcrc&&gt.pending>yt&&(H.adler=_(H.adler,gt.pending_buf,gt.pending-yt,yt)),gt.gzindex===gt.gzhead.extra.length&&(gt.gzindex=0,gt.status=73)}else gt.status=73;if(gt.status===73)if(gt.gzhead.name){yt=gt.pending;do{if(gt.pending===gt.pending_buf_size&&(gt.gzhead.hcrc&&gt.pending>yt&&(H.adler=_(H.adler,gt.pending_buf,gt.pending-yt,yt)),Jt(H),yt=gt.pending,gt.pending===gt.pending_buf_size)){jt=1;break}jt=gt.gzindex<gt.gzhead.name.length?255&gt.gzhead.name.charCodeAt(gt.gzindex++):0,Re(gt,jt)}while(jt!==0);gt.gzhead.hcrc&&gt.pending>yt&&(H.adler=_(H.adler,gt.pending_buf,gt.pending-yt,yt)),jt===0&&(gt.gzindex=0,gt.status=91)}else gt.status=91;if(gt.status===91)if(gt.gzhead.comment){yt=gt.pending;do{if(gt.pending===gt.pending_buf_size&&(gt.gzhead.hcrc&&gt.pending>yt&&(H.adler=_(H.adler,gt.pending_buf,gt.pending-yt,yt)),Jt(H),yt=gt.pending,gt.pending===gt.pending_buf_size)){jt=1;break}jt=gt.gzindex<gt.gzhead.comment.length?255&gt.gzhead.comment.charCodeAt(gt.gzindex++):0,Re(gt,jt)}while(jt!==0);gt.gzhead.hcrc&&gt.pending>yt&&(H.adler=_(H.adler,gt.pending_buf,gt.pending-yt,yt)),jt===0&&(gt.status=103)}else gt.status=103;if(gt.status===103&&(gt.gzhead.hcrc?(gt.pending+2>gt.pending_buf_size&&Jt(H),gt.pending+2<=gt.pending_buf_size&&(Re(gt,255&H.adler),Re(gt,H.adler>>8&255),H.adler=0,gt.status=bt)):gt.status=bt),gt.pending!==0){if(Jt(H),H.avail_out===0)return gt.last_flush=-1,S}else if(H.avail_in===0&&ye(Rt)<=ye(Pt)&&Rt!==E)return ae(H,-5);if(gt.status===666&&H.avail_in!==0)return ae(H,-5);if(H.avail_in!==0||gt.lookahead!==0||Rt!==C&&gt.status!==666){var ue=gt.strategy===2?function(Ut,Ie){for(var je;;){if(Ut.lookahead===0&&(nn(Ut),Ut.lookahead===0)){if(Ie===C)return X;break}if(Ut.match_length=0,je=o._tr_tally(Ut,0,Ut.window[Ut.strstart]),Ut.lookahead--,Ut.strstart++,je&&(Gt(Ut,!1),Ut.strm.avail_out===0))return X}return Ut.insert=0,Ie===E?(Gt(Ut,!0),Ut.strm.avail_out===0?Vt:Bt):Ut.last_lit&&(Gt(Ut,!1),Ut.strm.avail_out===0)?X:Wt}(gt,Rt):gt.strategy===3?function(Ut,Ie){for(var je,Le,Ke,_n,wn=Ut.window;;){if(Ut.lookahead<=ut){if(nn(Ut),Ut.lookahead<=ut&&Ie===C)return X;if(Ut.lookahead===0)break}if(Ut.match_length=0,Ut.lookahead>=q&&0<Ut.strstart&&(Le=wn[Ke=Ut.strstart-1])===wn[++Ke]&&Le===wn[++Ke]&&Le===wn[++Ke]){_n=Ut.strstart+ut;do;while(Le===wn[++Ke]&&Le===wn[++Ke]&&Le===wn[++Ke]&&Le===wn[++Ke]&&Le===wn[++Ke]&&Le===wn[++Ke]&&Le===wn[++Ke]&&Le===wn[++Ke]&&Ke<_n);Ut.match_length=ut-(_n-Ke),Ut.match_length>Ut.lookahead&&(Ut.match_length=Ut.lookahead)}if(Ut.match_length>=q?(je=o._tr_tally(Ut,1,Ut.match_length-q),Ut.lookahead-=Ut.match_length,Ut.strstart+=Ut.match_length,Ut.match_length=0):(je=o._tr_tally(Ut,0,Ut.window[Ut.strstart]),Ut.lookahead--,Ut.strstart++),je&&(Gt(Ut,!1),Ut.strm.avail_out===0))return X}return Ut.insert=0,Ie===E?(Gt(Ut,!0),Ut.strm.avail_out===0?Vt:Bt):Ut.last_lit&&(Gt(Ut,!1),Ut.strm.avail_out===0)?X:Wt}(gt,Rt):d[gt.level].func(gt,Rt);if(ue!==Vt&&ue!==Bt||(gt.status=666),ue===X||ue===Vt)return H.avail_out===0&&(gt.last_flush=-1),S;if(ue===Wt&&(Rt===1?o._tr_align(gt):Rt!==5&&(o._tr_stored_block(gt,0,0,!1),Rt===3&&(en(gt.head),gt.lookahead===0&&(gt.strstart=0,gt.block_start=0,gt.insert=0))),Jt(H),H.avail_out===0))return gt.last_flush=-1,S}return Rt!==E?S:gt.wrap<=0?1:(gt.wrap===2?(Re(gt,255&H.adler),Re(gt,H.adler>>8&255),Re(gt,H.adler>>16&255),Re(gt,H.adler>>24&255),Re(gt,255&H.total_in),Re(gt,H.total_in>>8&255),Re(gt,H.total_in>>16&255),Re(gt,H.total_in>>24&255)):($e(gt,H.adler>>>16),$e(gt,65535&H.adler)),Jt(H),0<gt.wrap&&(gt.wrap=-gt.wrap),gt.pending!==0?S:1)},s.deflateEnd=function(H){var Rt;return H&&H.state?(Rt=H.state.status)!==ot&&Rt!==69&&Rt!==73&&Rt!==91&&Rt!==103&&Rt!==bt&&Rt!==666?ae(H,k):(H.state=null,Rt===bt?ae(H,-3):S):k},s.deflateSetDictionary=function(H,Rt){var Pt,gt,yt,jt,ee,ue,Ut,Ie,je=Rt.length;if(!H||!H.state||(jt=(Pt=H.state).wrap)===2||jt===1&&Pt.status!==ot||Pt.lookahead)return k;for(jt===1&&(H.adler=g(H.adler,Rt,je,0)),Pt.wrap=0,je>=Pt.w_size&&(jt===0&&(en(Pt.head),Pt.strstart=0,Pt.block_start=0,Pt.insert=0),Ie=new l.Buf8(Pt.w_size),l.arraySet(Ie,Rt,je-Pt.w_size,Pt.w_size,0),Rt=Ie,je=Pt.w_size),ee=H.avail_in,ue=H.next_in,Ut=H.input,H.avail_in=je,H.next_in=0,H.input=Rt,nn(Pt);Pt.lookahead>=q;){for(gt=Pt.strstart,yt=Pt.lookahead-(q-1);Pt.ins_h=(Pt.ins_h<<Pt.hash_shift^Pt.window[gt+q-1])&Pt.hash_mask,Pt.prev[gt&Pt.w_mask]=Pt.head[Pt.ins_h],Pt.head[Pt.ins_h]=gt,gt++,--yt;);Pt.strstart=gt,Pt.lookahead=q-1,nn(Pt)}return Pt.strstart+=Pt.lookahead,Pt.block_start=Pt.strstart,Pt.insert=Pt.lookahead,Pt.lookahead=0,Pt.match_length=Pt.prev_length=q-1,Pt.match_available=0,H.next_in=ue,H.input=Ut,H.avail_in=ee,Pt.wrap=jt,S},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,a,s){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,a,s){a.exports=function(d,l){var o,g,_,I,C,E,S,k,D,N,U,F,j,$,K,tt,it,et,q,ut,Ct,ot,bt,X,Wt;o=d.state,g=d.next_in,X=d.input,_=g+(d.avail_in-5),I=d.next_out,Wt=d.output,C=I-(l-d.avail_out),E=I+(d.avail_out-257),S=o.dmax,k=o.wsize,D=o.whave,N=o.wnext,U=o.window,F=o.hold,j=o.bits,$=o.lencode,K=o.distcode,tt=(1<<o.lenbits)-1,it=(1<<o.distbits)-1;t:do{j<15&&(F+=X[g++]<<j,j+=8,F+=X[g++]<<j,j+=8),et=$[F&tt];e:for(;;){if(F>>>=q=et>>>24,j-=q,(q=et>>>16&255)===0)Wt[I++]=65535&et;else{if(!(16&q)){if(!(64&q)){et=$[(65535&et)+(F&(1<<q)-1)];continue e}if(32&q){o.mode=12;break t}d.msg="invalid literal/length code",o.mode=30;break t}ut=65535&et,(q&=15)&&(j<q&&(F+=X[g++]<<j,j+=8),ut+=F&(1<<q)-1,F>>>=q,j-=q),j<15&&(F+=X[g++]<<j,j+=8,F+=X[g++]<<j,j+=8),et=K[F&it];n:for(;;){if(F>>>=q=et>>>24,j-=q,!(16&(q=et>>>16&255))){if(!(64&q)){et=K[(65535&et)+(F&(1<<q)-1)];continue n}d.msg="invalid distance code",o.mode=30;break t}if(Ct=65535&et,j<(q&=15)&&(F+=X[g++]<<j,(j+=8)<q&&(F+=X[g++]<<j,j+=8)),S<(Ct+=F&(1<<q)-1)){d.msg="invalid distance too far back",o.mode=30;break t}if(F>>>=q,j-=q,(q=I-C)<Ct){if(D<(q=Ct-q)&&o.sane){d.msg="invalid distance too far back",o.mode=30;break t}if(bt=U,(ot=0)===N){if(ot+=k-q,q<ut){for(ut-=q;Wt[I++]=U[ot++],--q;);ot=I-Ct,bt=Wt}}else if(N<q){if(ot+=k+N-q,(q-=N)<ut){for(ut-=q;Wt[I++]=U[ot++],--q;);if(ot=0,N<ut){for(ut-=q=N;Wt[I++]=U[ot++],--q;);ot=I-Ct,bt=Wt}}}else if(ot+=N-q,q<ut){for(ut-=q;Wt[I++]=U[ot++],--q;);ot=I-Ct,bt=Wt}for(;2<ut;)Wt[I++]=bt[ot++],Wt[I++]=bt[ot++],Wt[I++]=bt[ot++],ut-=3;ut&&(Wt[I++]=bt[ot++],1<ut&&(Wt[I++]=bt[ot++]))}else{for(ot=I-Ct;Wt[I++]=Wt[ot++],Wt[I++]=Wt[ot++],Wt[I++]=Wt[ot++],2<(ut-=3););ut&&(Wt[I++]=Wt[ot++],1<ut&&(Wt[I++]=Wt[ot++]))}break}}break}}while(g<_&&I<E);g-=ut=j>>3,F&=(1<<(j-=ut<<3))-1,d.next_in=g,d.next_out=I,d.avail_in=g<_?_-g+5:5-(g-_),d.avail_out=I<E?E-I+257:257-(I-E),o.hold=F,o.bits=j}},{}],49:[function(n,a,s){var d=n("../utils/common"),l=n("./adler32"),o=n("./crc32"),g=n("./inffast"),_=n("./inftrees"),I=1,C=2,E=0,S=-2,k=1,D=852,N=592;function U(ot){return(ot>>>24&255)+(ot>>>8&65280)+((65280&ot)<<8)+((255&ot)<<24)}function F(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(ot){var bt;return ot&&ot.state?(bt=ot.state,ot.total_in=ot.total_out=bt.total=0,ot.msg="",bt.wrap&&(ot.adler=1&bt.wrap),bt.mode=k,bt.last=0,bt.havedict=0,bt.dmax=32768,bt.head=null,bt.hold=0,bt.bits=0,bt.lencode=bt.lendyn=new d.Buf32(D),bt.distcode=bt.distdyn=new d.Buf32(N),bt.sane=1,bt.back=-1,E):S}function $(ot){var bt;return ot&&ot.state?((bt=ot.state).wsize=0,bt.whave=0,bt.wnext=0,j(ot)):S}function K(ot,bt){var X,Wt;return ot&&ot.state?(Wt=ot.state,bt<0?(X=0,bt=-bt):(X=1+(bt>>4),bt<48&&(bt&=15)),bt&&(bt<8||15<bt)?S:(Wt.window!==null&&Wt.wbits!==bt&&(Wt.window=null),Wt.wrap=X,Wt.wbits=bt,$(ot))):S}function tt(ot,bt){var X,Wt;return ot?(Wt=new F,(ot.state=Wt).window=null,(X=K(ot,bt))!==E&&(ot.state=null),X):S}var it,et,q=!0;function ut(ot){if(q){var bt;for(it=new d.Buf32(512),et=new d.Buf32(32),bt=0;bt<144;)ot.lens[bt++]=8;for(;bt<256;)ot.lens[bt++]=9;for(;bt<280;)ot.lens[bt++]=7;for(;bt<288;)ot.lens[bt++]=8;for(_(I,ot.lens,0,288,it,0,ot.work,{bits:9}),bt=0;bt<32;)ot.lens[bt++]=5;_(C,ot.lens,0,32,et,0,ot.work,{bits:5}),q=!1}ot.lencode=it,ot.lenbits=9,ot.distcode=et,ot.distbits=5}function Ct(ot,bt,X,Wt){var Vt,Bt=ot.state;return Bt.window===null&&(Bt.wsize=1<<Bt.wbits,Bt.wnext=0,Bt.whave=0,Bt.window=new d.Buf8(Bt.wsize)),Wt>=Bt.wsize?(d.arraySet(Bt.window,bt,X-Bt.wsize,Bt.wsize,0),Bt.wnext=0,Bt.whave=Bt.wsize):(Wt<(Vt=Bt.wsize-Bt.wnext)&&(Vt=Wt),d.arraySet(Bt.window,bt,X-Wt,Vt,Bt.wnext),(Wt-=Vt)?(d.arraySet(Bt.window,bt,X-Wt,Wt,0),Bt.wnext=Wt,Bt.whave=Bt.wsize):(Bt.wnext+=Vt,Bt.wnext===Bt.wsize&&(Bt.wnext=0),Bt.whave<Bt.wsize&&(Bt.whave+=Vt))),0}s.inflateReset=$,s.inflateReset2=K,s.inflateResetKeep=j,s.inflateInit=function(ot){return tt(ot,15)},s.inflateInit2=tt,s.inflate=function(ot,bt){var X,Wt,Vt,Bt,ae,ye,en,Jt,Gt,Re,$e,Ce,nn,be,Me,xe,Be,Je,Ln,Tt,H,Rt,Pt,gt,yt=0,jt=new d.Buf8(4),ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ot||!ot.state||!ot.output||!ot.input&&ot.avail_in!==0)return S;(X=ot.state).mode===12&&(X.mode=13),ae=ot.next_out,Vt=ot.output,en=ot.avail_out,Bt=ot.next_in,Wt=ot.input,ye=ot.avail_in,Jt=X.hold,Gt=X.bits,Re=ye,$e=en,Rt=E;t:for(;;)switch(X.mode){case k:if(X.wrap===0){X.mode=13;break}for(;Gt<16;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}if(2&X.wrap&&Jt===35615){jt[X.check=0]=255&Jt,jt[1]=Jt>>>8&255,X.check=o(X.check,jt,2,0),Gt=Jt=0,X.mode=2;break}if(X.flags=0,X.head&&(X.head.done=!1),!(1&X.wrap)||(((255&Jt)<<8)+(Jt>>8))%31){ot.msg="incorrect header check",X.mode=30;break}if((15&Jt)!=8){ot.msg="unknown compression method",X.mode=30;break}if(Gt-=4,H=8+(15&(Jt>>>=4)),X.wbits===0)X.wbits=H;else if(H>X.wbits){ot.msg="invalid window size",X.mode=30;break}X.dmax=1<<H,ot.adler=X.check=1,X.mode=512&Jt?10:12,Gt=Jt=0;break;case 2:for(;Gt<16;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}if(X.flags=Jt,(255&X.flags)!=8){ot.msg="unknown compression method",X.mode=30;break}if(57344&X.flags){ot.msg="unknown header flags set",X.mode=30;break}X.head&&(X.head.text=Jt>>8&1),512&X.flags&&(jt[0]=255&Jt,jt[1]=Jt>>>8&255,X.check=o(X.check,jt,2,0)),Gt=Jt=0,X.mode=3;case 3:for(;Gt<32;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}X.head&&(X.head.time=Jt),512&X.flags&&(jt[0]=255&Jt,jt[1]=Jt>>>8&255,jt[2]=Jt>>>16&255,jt[3]=Jt>>>24&255,X.check=o(X.check,jt,4,0)),Gt=Jt=0,X.mode=4;case 4:for(;Gt<16;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}X.head&&(X.head.xflags=255&Jt,X.head.os=Jt>>8),512&X.flags&&(jt[0]=255&Jt,jt[1]=Jt>>>8&255,X.check=o(X.check,jt,2,0)),Gt=Jt=0,X.mode=5;case 5:if(1024&X.flags){for(;Gt<16;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}X.length=Jt,X.head&&(X.head.extra_len=Jt),512&X.flags&&(jt[0]=255&Jt,jt[1]=Jt>>>8&255,X.check=o(X.check,jt,2,0)),Gt=Jt=0}else X.head&&(X.head.extra=null);X.mode=6;case 6:if(1024&X.flags&&(ye<(Ce=X.length)&&(Ce=ye),Ce&&(X.head&&(H=X.head.extra_len-X.length,X.head.extra||(X.head.extra=new Array(X.head.extra_len)),d.arraySet(X.head.extra,Wt,Bt,Ce,H)),512&X.flags&&(X.check=o(X.check,Wt,Ce,Bt)),ye-=Ce,Bt+=Ce,X.length-=Ce),X.length))break t;X.length=0,X.mode=7;case 7:if(2048&X.flags){if(ye===0)break t;for(Ce=0;H=Wt[Bt+Ce++],X.head&&H&&X.length<65536&&(X.head.name+=String.fromCharCode(H)),H&&Ce<ye;);if(512&X.flags&&(X.check=o(X.check,Wt,Ce,Bt)),ye-=Ce,Bt+=Ce,H)break t}else X.head&&(X.head.name=null);X.length=0,X.mode=8;case 8:if(4096&X.flags){if(ye===0)break t;for(Ce=0;H=Wt[Bt+Ce++],X.head&&H&&X.length<65536&&(X.head.comment+=String.fromCharCode(H)),H&&Ce<ye;);if(512&X.flags&&(X.check=o(X.check,Wt,Ce,Bt)),ye-=Ce,Bt+=Ce,H)break t}else X.head&&(X.head.comment=null);X.mode=9;case 9:if(512&X.flags){for(;Gt<16;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}if(Jt!==(65535&X.check)){ot.msg="header crc mismatch",X.mode=30;break}Gt=Jt=0}X.head&&(X.head.hcrc=X.flags>>9&1,X.head.done=!0),ot.adler=X.check=0,X.mode=12;break;case 10:for(;Gt<32;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}ot.adler=X.check=U(Jt),Gt=Jt=0,X.mode=11;case 11:if(X.havedict===0)return ot.next_out=ae,ot.avail_out=en,ot.next_in=Bt,ot.avail_in=ye,X.hold=Jt,X.bits=Gt,2;ot.adler=X.check=1,X.mode=12;case 12:if(bt===5||bt===6)break t;case 13:if(X.last){Jt>>>=7&Gt,Gt-=7&Gt,X.mode=27;break}for(;Gt<3;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}switch(X.last=1&Jt,Gt-=1,3&(Jt>>>=1)){case 0:X.mode=14;break;case 1:if(ut(X),X.mode=20,bt!==6)break;Jt>>>=2,Gt-=2;break t;case 2:X.mode=17;break;case 3:ot.msg="invalid block type",X.mode=30}Jt>>>=2,Gt-=2;break;case 14:for(Jt>>>=7&Gt,Gt-=7&Gt;Gt<32;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}if((65535&Jt)!=(Jt>>>16^65535)){ot.msg="invalid stored block lengths",X.mode=30;break}if(X.length=65535&Jt,Gt=Jt=0,X.mode=15,bt===6)break t;case 15:X.mode=16;case 16:if(Ce=X.length){if(ye<Ce&&(Ce=ye),en<Ce&&(Ce=en),Ce===0)break t;d.arraySet(Vt,Wt,Bt,Ce,ae),ye-=Ce,Bt+=Ce,en-=Ce,ae+=Ce,X.length-=Ce;break}X.mode=12;break;case 17:for(;Gt<14;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}if(X.nlen=257+(31&Jt),Jt>>>=5,Gt-=5,X.ndist=1+(31&Jt),Jt>>>=5,Gt-=5,X.ncode=4+(15&Jt),Jt>>>=4,Gt-=4,286<X.nlen||30<X.ndist){ot.msg="too many length or distance symbols",X.mode=30;break}X.have=0,X.mode=18;case 18:for(;X.have<X.ncode;){for(;Gt<3;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}X.lens[ee[X.have++]]=7&Jt,Jt>>>=3,Gt-=3}for(;X.have<19;)X.lens[ee[X.have++]]=0;if(X.lencode=X.lendyn,X.lenbits=7,Pt={bits:X.lenbits},Rt=_(0,X.lens,0,19,X.lencode,0,X.work,Pt),X.lenbits=Pt.bits,Rt){ot.msg="invalid code lengths set",X.mode=30;break}X.have=0,X.mode=19;case 19:for(;X.have<X.nlen+X.ndist;){for(;xe=(yt=X.lencode[Jt&(1<<X.lenbits)-1])>>>16&255,Be=65535&yt,!((Me=yt>>>24)<=Gt);){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}if(Be<16)Jt>>>=Me,Gt-=Me,X.lens[X.have++]=Be;else{if(Be===16){for(gt=Me+2;Gt<gt;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}if(Jt>>>=Me,Gt-=Me,X.have===0){ot.msg="invalid bit length repeat",X.mode=30;break}H=X.lens[X.have-1],Ce=3+(3&Jt),Jt>>>=2,Gt-=2}else if(Be===17){for(gt=Me+3;Gt<gt;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}Gt-=Me,H=0,Ce=3+(7&(Jt>>>=Me)),Jt>>>=3,Gt-=3}else{for(gt=Me+7;Gt<gt;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}Gt-=Me,H=0,Ce=11+(127&(Jt>>>=Me)),Jt>>>=7,Gt-=7}if(X.have+Ce>X.nlen+X.ndist){ot.msg="invalid bit length repeat",X.mode=30;break}for(;Ce--;)X.lens[X.have++]=H}}if(X.mode===30)break;if(X.lens[256]===0){ot.msg="invalid code -- missing end-of-block",X.mode=30;break}if(X.lenbits=9,Pt={bits:X.lenbits},Rt=_(I,X.lens,0,X.nlen,X.lencode,0,X.work,Pt),X.lenbits=Pt.bits,Rt){ot.msg="invalid literal/lengths set",X.mode=30;break}if(X.distbits=6,X.distcode=X.distdyn,Pt={bits:X.distbits},Rt=_(C,X.lens,X.nlen,X.ndist,X.distcode,0,X.work,Pt),X.distbits=Pt.bits,Rt){ot.msg="invalid distances set",X.mode=30;break}if(X.mode=20,bt===6)break t;case 20:X.mode=21;case 21:if(6<=ye&&258<=en){ot.next_out=ae,ot.avail_out=en,ot.next_in=Bt,ot.avail_in=ye,X.hold=Jt,X.bits=Gt,g(ot,$e),ae=ot.next_out,Vt=ot.output,en=ot.avail_out,Bt=ot.next_in,Wt=ot.input,ye=ot.avail_in,Jt=X.hold,Gt=X.bits,X.mode===12&&(X.back=-1);break}for(X.back=0;xe=(yt=X.lencode[Jt&(1<<X.lenbits)-1])>>>16&255,Be=65535&yt,!((Me=yt>>>24)<=Gt);){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}if(xe&&!(240&xe)){for(Je=Me,Ln=xe,Tt=Be;xe=(yt=X.lencode[Tt+((Jt&(1<<Je+Ln)-1)>>Je)])>>>16&255,Be=65535&yt,!(Je+(Me=yt>>>24)<=Gt);){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}Jt>>>=Je,Gt-=Je,X.back+=Je}if(Jt>>>=Me,Gt-=Me,X.back+=Me,X.length=Be,xe===0){X.mode=26;break}if(32&xe){X.back=-1,X.mode=12;break}if(64&xe){ot.msg="invalid literal/length code",X.mode=30;break}X.extra=15&xe,X.mode=22;case 22:if(X.extra){for(gt=X.extra;Gt<gt;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}X.length+=Jt&(1<<X.extra)-1,Jt>>>=X.extra,Gt-=X.extra,X.back+=X.extra}X.was=X.length,X.mode=23;case 23:for(;xe=(yt=X.distcode[Jt&(1<<X.distbits)-1])>>>16&255,Be=65535&yt,!((Me=yt>>>24)<=Gt);){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}if(!(240&xe)){for(Je=Me,Ln=xe,Tt=Be;xe=(yt=X.distcode[Tt+((Jt&(1<<Je+Ln)-1)>>Je)])>>>16&255,Be=65535&yt,!(Je+(Me=yt>>>24)<=Gt);){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}Jt>>>=Je,Gt-=Je,X.back+=Je}if(Jt>>>=Me,Gt-=Me,X.back+=Me,64&xe){ot.msg="invalid distance code",X.mode=30;break}X.offset=Be,X.extra=15&xe,X.mode=24;case 24:if(X.extra){for(gt=X.extra;Gt<gt;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}X.offset+=Jt&(1<<X.extra)-1,Jt>>>=X.extra,Gt-=X.extra,X.back+=X.extra}if(X.offset>X.dmax){ot.msg="invalid distance too far back",X.mode=30;break}X.mode=25;case 25:if(en===0)break t;if(Ce=$e-en,X.offset>Ce){if((Ce=X.offset-Ce)>X.whave&&X.sane){ot.msg="invalid distance too far back",X.mode=30;break}nn=Ce>X.wnext?(Ce-=X.wnext,X.wsize-Ce):X.wnext-Ce,Ce>X.length&&(Ce=X.length),be=X.window}else be=Vt,nn=ae-X.offset,Ce=X.length;for(en<Ce&&(Ce=en),en-=Ce,X.length-=Ce;Vt[ae++]=be[nn++],--Ce;);X.length===0&&(X.mode=21);break;case 26:if(en===0)break t;Vt[ae++]=X.length,en--,X.mode=21;break;case 27:if(X.wrap){for(;Gt<32;){if(ye===0)break t;ye--,Jt|=Wt[Bt++]<<Gt,Gt+=8}if($e-=en,ot.total_out+=$e,X.total+=$e,$e&&(ot.adler=X.check=X.flags?o(X.check,Vt,$e,ae-$e):l(X.check,Vt,$e,ae-$e)),$e=en,(X.flags?Jt:U(Jt))!==X.check){ot.msg="incorrect data check",X.mode=30;break}Gt=Jt=0}X.mode=28;case 28:if(X.wrap&&X.flags){for(;Gt<32;){if(ye===0)break t;ye--,Jt+=Wt[Bt++]<<Gt,Gt+=8}if(Jt!==(4294967295&X.total)){ot.msg="incorrect length check",X.mode=30;break}Gt=Jt=0}X.mode=29;case 29:Rt=1;break t;case 30:Rt=-3;break t;case 31:return-4;case 32:default:return S}return ot.next_out=ae,ot.avail_out=en,ot.next_in=Bt,ot.avail_in=ye,X.hold=Jt,X.bits=Gt,(X.wsize||$e!==ot.avail_out&&X.mode<30&&(X.mode<27||bt!==4))&&Ct(ot,ot.output,ot.next_out,$e-ot.avail_out)?(X.mode=31,-4):(Re-=ot.avail_in,$e-=ot.avail_out,ot.total_in+=Re,ot.total_out+=$e,X.total+=$e,X.wrap&&$e&&(ot.adler=X.check=X.flags?o(X.check,Vt,$e,ot.next_out-$e):l(X.check,Vt,$e,ot.next_out-$e)),ot.data_type=X.bits+(X.last?64:0)+(X.mode===12?128:0)+(X.mode===20||X.mode===15?256:0),(Re==0&&$e===0||bt===4)&&Rt===E&&(Rt=-5),Rt)},s.inflateEnd=function(ot){if(!ot||!ot.state)return S;var bt=ot.state;return bt.window&&(bt.window=null),ot.state=null,E},s.inflateGetHeader=function(ot,bt){var X;return ot&&ot.state&&2&(X=ot.state).wrap?((X.head=bt).done=!1,E):S},s.inflateSetDictionary=function(ot,bt){var X,Wt=bt.length;return ot&&ot.state?(X=ot.state).wrap!==0&&X.mode!==11?S:X.mode===11&&l(1,bt,Wt,0)!==X.check?-3:Ct(ot,bt,Wt,Wt)?(X.mode=31,-4):(X.havedict=1,E):S},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,a,s){var d=n("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(I,C,E,S,k,D,N,U){var F,j,$,K,tt,it,et,q,ut,Ct=U.bits,ot=0,bt=0,X=0,Wt=0,Vt=0,Bt=0,ae=0,ye=0,en=0,Jt=0,Gt=null,Re=0,$e=new d.Buf16(16),Ce=new d.Buf16(16),nn=null,be=0;for(ot=0;ot<=15;ot++)$e[ot]=0;for(bt=0;bt<S;bt++)$e[C[E+bt]]++;for(Vt=Ct,Wt=15;1<=Wt&&$e[Wt]===0;Wt--);if(Wt<Vt&&(Vt=Wt),Wt===0)return k[D++]=20971520,k[D++]=20971520,U.bits=1,0;for(X=1;X<Wt&&$e[X]===0;X++);for(Vt<X&&(Vt=X),ot=ye=1;ot<=15;ot++)if(ye<<=1,(ye-=$e[ot])<0)return-1;if(0<ye&&(I===0||Wt!==1))return-1;for(Ce[1]=0,ot=1;ot<15;ot++)Ce[ot+1]=Ce[ot]+$e[ot];for(bt=0;bt<S;bt++)C[E+bt]!==0&&(N[Ce[C[E+bt]]++]=bt);if(it=I===0?(Gt=nn=N,19):I===1?(Gt=l,Re-=257,nn=o,be-=257,256):(Gt=g,nn=_,-1),ot=X,tt=D,ae=bt=Jt=0,$=-1,K=(en=1<<(Bt=Vt))-1,I===1&&852<en||I===2&&592<en)return 1;for(;;){for(et=ot-ae,ut=N[bt]<it?(q=0,N[bt]):N[bt]>it?(q=nn[be+N[bt]],Gt[Re+N[bt]]):(q=96,0),F=1<<ot-ae,X=j=1<<Bt;k[tt+(Jt>>ae)+(j-=F)]=et<<24|q<<16|ut|0,j!==0;);for(F=1<<ot-1;Jt&F;)F>>=1;if(F!==0?(Jt&=F-1,Jt+=F):Jt=0,bt++,--$e[ot]==0){if(ot===Wt)break;ot=C[E+N[bt]]}if(Vt<ot&&(Jt&K)!==$){for(ae===0&&(ae=Vt),tt+=X,ye=1<<(Bt=ot-ae);Bt+ae<Wt&&!((ye-=$e[Bt+ae])<=0);)Bt++,ye<<=1;if(en+=1<<Bt,I===1&&852<en||I===2&&592<en)return 1;k[$=Jt&K]=Vt<<24|Bt<<16|tt-D|0}}return Jt!==0&&(k[tt+Jt]=ot-ae<<24|64<<16|0),U.bits=Vt,0}},{"../utils/common":41}],51:[function(n,a,s){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,a,s){var d=n("../utils/common"),l=0,o=1;function g(yt){for(var jt=yt.length;0<=--jt;)yt[jt]=0}var _=0,I=29,C=256,E=C+1+I,S=30,k=19,D=2*E+1,N=15,U=16,F=7,j=256,$=16,K=17,tt=18,it=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],et=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ut=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ct=new Array(2*(E+2));g(Ct);var ot=new Array(2*S);g(ot);var bt=new Array(512);g(bt);var X=new Array(256);g(X);var Wt=new Array(I);g(Wt);var Vt,Bt,ae,ye=new Array(S);function en(yt,jt,ee,ue,Ut){this.static_tree=yt,this.extra_bits=jt,this.extra_base=ee,this.elems=ue,this.max_length=Ut,this.has_stree=yt&&yt.length}function Jt(yt,jt){this.dyn_tree=yt,this.max_code=0,this.stat_desc=jt}function Gt(yt){return yt<256?bt[yt]:bt[256+(yt>>>7)]}function Re(yt,jt){yt.pending_buf[yt.pending++]=255&jt,yt.pending_buf[yt.pending++]=jt>>>8&255}function $e(yt,jt,ee){yt.bi_valid>U-ee?(yt.bi_buf|=jt<<yt.bi_valid&65535,Re(yt,yt.bi_buf),yt.bi_buf=jt>>U-yt.bi_valid,yt.bi_valid+=ee-U):(yt.bi_buf|=jt<<yt.bi_valid&65535,yt.bi_valid+=ee)}function Ce(yt,jt,ee){$e(yt,ee[2*jt],ee[2*jt+1])}function nn(yt,jt){for(var ee=0;ee|=1&yt,yt>>>=1,ee<<=1,0<--jt;);return ee>>>1}function be(yt,jt,ee){var ue,Ut,Ie=new Array(N+1),je=0;for(ue=1;ue<=N;ue++)Ie[ue]=je=je+ee[ue-1]<<1;for(Ut=0;Ut<=jt;Ut++){var Le=yt[2*Ut+1];Le!==0&&(yt[2*Ut]=nn(Ie[Le]++,Le))}}function Me(yt){var jt;for(jt=0;jt<E;jt++)yt.dyn_ltree[2*jt]=0;for(jt=0;jt<S;jt++)yt.dyn_dtree[2*jt]=0;for(jt=0;jt<k;jt++)yt.bl_tree[2*jt]=0;yt.dyn_ltree[2*j]=1,yt.opt_len=yt.static_len=0,yt.last_lit=yt.matches=0}function xe(yt){8<yt.bi_valid?Re(yt,yt.bi_buf):0<yt.bi_valid&&(yt.pending_buf[yt.pending++]=yt.bi_buf),yt.bi_buf=0,yt.bi_valid=0}function Be(yt,jt,ee,ue){var Ut=2*jt,Ie=2*ee;return yt[Ut]<yt[Ie]||yt[Ut]===yt[Ie]&&ue[jt]<=ue[ee]}function Je(yt,jt,ee){for(var ue=yt.heap[ee],Ut=ee<<1;Ut<=yt.heap_len&&(Ut<yt.heap_len&&Be(jt,yt.heap[Ut+1],yt.heap[Ut],yt.depth)&&Ut++,!Be(jt,ue,yt.heap[Ut],yt.depth));)yt.heap[ee]=yt.heap[Ut],ee=Ut,Ut<<=1;yt.heap[ee]=ue}function Ln(yt,jt,ee){var ue,Ut,Ie,je,Le=0;if(yt.last_lit!==0)for(;ue=yt.pending_buf[yt.d_buf+2*Le]<<8|yt.pending_buf[yt.d_buf+2*Le+1],Ut=yt.pending_buf[yt.l_buf+Le],Le++,ue===0?Ce(yt,Ut,jt):(Ce(yt,(Ie=X[Ut])+C+1,jt),(je=it[Ie])!==0&&$e(yt,Ut-=Wt[Ie],je),Ce(yt,Ie=Gt(--ue),ee),(je=et[Ie])!==0&&$e(yt,ue-=ye[Ie],je)),Le<yt.last_lit;);Ce(yt,j,jt)}function Tt(yt,jt){var ee,ue,Ut,Ie=jt.dyn_tree,je=jt.stat_desc.static_tree,Le=jt.stat_desc.has_stree,Ke=jt.stat_desc.elems,_n=-1;for(yt.heap_len=0,yt.heap_max=D,ee=0;ee<Ke;ee++)Ie[2*ee]!==0?(yt.heap[++yt.heap_len]=_n=ee,yt.depth[ee]=0):Ie[2*ee+1]=0;for(;yt.heap_len<2;)Ie[2*(Ut=yt.heap[++yt.heap_len]=_n<2?++_n:0)]=1,yt.depth[Ut]=0,yt.opt_len--,Le&&(yt.static_len-=je[2*Ut+1]);for(jt.max_code=_n,ee=yt.heap_len>>1;1<=ee;ee--)Je(yt,Ie,ee);for(Ut=Ke;ee=yt.heap[1],yt.heap[1]=yt.heap[yt.heap_len--],Je(yt,Ie,1),ue=yt.heap[1],yt.heap[--yt.heap_max]=ee,yt.heap[--yt.heap_max]=ue,Ie[2*Ut]=Ie[2*ee]+Ie[2*ue],yt.depth[Ut]=(yt.depth[ee]>=yt.depth[ue]?yt.depth[ee]:yt.depth[ue])+1,Ie[2*ee+1]=Ie[2*ue+1]=Ut,yt.heap[1]=Ut++,Je(yt,Ie,1),2<=yt.heap_len;);yt.heap[--yt.heap_max]=yt.heap[1],function(wn,de){var ve,Te,Ye,un,Nn,oe,ht=de.dyn_tree,mt=de.max_code,wt=de.stat_desc.static_tree,kt=de.stat_desc.has_stree,vt=de.stat_desc.extra_bits,ie=de.stat_desc.extra_base,he=de.stat_desc.max_length,Kt=0;for(un=0;un<=N;un++)wn.bl_count[un]=0;for(ht[2*wn.heap[wn.heap_max]+1]=0,ve=wn.heap_max+1;ve<D;ve++)he<(un=ht[2*ht[2*(Te=wn.heap[ve])+1]+1]+1)&&(un=he,Kt++),ht[2*Te+1]=un,mt<Te||(wn.bl_count[un]++,Nn=0,ie<=Te&&(Nn=vt[Te-ie]),oe=ht[2*Te],wn.opt_len+=oe*(un+Nn),kt&&(wn.static_len+=oe*(wt[2*Te+1]+Nn)));if(Kt!==0){do{for(un=he-1;wn.bl_count[un]===0;)un--;wn.bl_count[un]--,wn.bl_count[un+1]+=2,wn.bl_count[he]--,Kt-=2}while(0<Kt);for(un=he;un!==0;un--)for(Te=wn.bl_count[un];Te!==0;)mt<(Ye=wn.heap[--ve])||(ht[2*Ye+1]!==un&&(wn.opt_len+=(un-ht[2*Ye+1])*ht[2*Ye],ht[2*Ye+1]=un),Te--)}}(yt,jt),be(Ie,_n,yt.bl_count)}function H(yt,jt,ee){var ue,Ut,Ie=-1,je=jt[1],Le=0,Ke=7,_n=4;for(je===0&&(Ke=138,_n=3),jt[2*(ee+1)+1]=65535,ue=0;ue<=ee;ue++)Ut=je,je=jt[2*(ue+1)+1],++Le<Ke&&Ut===je||(Le<_n?yt.bl_tree[2*Ut]+=Le:Ut!==0?(Ut!==Ie&&yt.bl_tree[2*Ut]++,yt.bl_tree[2*$]++):Le<=10?yt.bl_tree[2*K]++:yt.bl_tree[2*tt]++,Ie=Ut,_n=(Le=0)===je?(Ke=138,3):Ut===je?(Ke=6,3):(Ke=7,4))}function Rt(yt,jt,ee){var ue,Ut,Ie=-1,je=jt[1],Le=0,Ke=7,_n=4;for(je===0&&(Ke=138,_n=3),ue=0;ue<=ee;ue++)if(Ut=je,je=jt[2*(ue+1)+1],!(++Le<Ke&&Ut===je)){if(Le<_n)for(;Ce(yt,Ut,yt.bl_tree),--Le!=0;);else Ut!==0?(Ut!==Ie&&(Ce(yt,Ut,yt.bl_tree),Le--),Ce(yt,$,yt.bl_tree),$e(yt,Le-3,2)):Le<=10?(Ce(yt,K,yt.bl_tree),$e(yt,Le-3,3)):(Ce(yt,tt,yt.bl_tree),$e(yt,Le-11,7));Ie=Ut,_n=(Le=0)===je?(Ke=138,3):Ut===je?(Ke=6,3):(Ke=7,4)}}g(ye);var Pt=!1;function gt(yt,jt,ee,ue){$e(yt,(_<<1)+(ue?1:0),3),function(Ut,Ie,je,Le){xe(Ut),Re(Ut,je),Re(Ut,~je),d.arraySet(Ut.pending_buf,Ut.window,Ie,je,Ut.pending),Ut.pending+=je}(yt,jt,ee)}s._tr_init=function(yt){Pt||(function(){var jt,ee,ue,Ut,Ie,je=new Array(N+1);for(Ut=ue=0;Ut<I-1;Ut++)for(Wt[Ut]=ue,jt=0;jt<1<<it[Ut];jt++)X[ue++]=Ut;for(X[ue-1]=Ut,Ut=Ie=0;Ut<16;Ut++)for(ye[Ut]=Ie,jt=0;jt<1<<et[Ut];jt++)bt[Ie++]=Ut;for(Ie>>=7;Ut<S;Ut++)for(ye[Ut]=Ie<<7,jt=0;jt<1<<et[Ut]-7;jt++)bt[256+Ie++]=Ut;for(ee=0;ee<=N;ee++)je[ee]=0;for(jt=0;jt<=143;)Ct[2*jt+1]=8,jt++,je[8]++;for(;jt<=255;)Ct[2*jt+1]=9,jt++,je[9]++;for(;jt<=279;)Ct[2*jt+1]=7,jt++,je[7]++;for(;jt<=287;)Ct[2*jt+1]=8,jt++,je[8]++;for(be(Ct,E+1,je),jt=0;jt<S;jt++)ot[2*jt+1]=5,ot[2*jt]=nn(jt,5);Vt=new en(Ct,it,C+1,E,N),Bt=new en(ot,et,0,S,N),ae=new en(new Array(0),q,0,k,F)}(),Pt=!0),yt.l_desc=new Jt(yt.dyn_ltree,Vt),yt.d_desc=new Jt(yt.dyn_dtree,Bt),yt.bl_desc=new Jt(yt.bl_tree,ae),yt.bi_buf=0,yt.bi_valid=0,Me(yt)},s._tr_stored_block=gt,s._tr_flush_block=function(yt,jt,ee,ue){var Ut,Ie,je=0;0<yt.level?(yt.strm.data_type===2&&(yt.strm.data_type=function(Le){var Ke,_n=4093624447;for(Ke=0;Ke<=31;Ke++,_n>>>=1)if(1&_n&&Le.dyn_ltree[2*Ke]!==0)return l;if(Le.dyn_ltree[18]!==0||Le.dyn_ltree[20]!==0||Le.dyn_ltree[26]!==0)return o;for(Ke=32;Ke<C;Ke++)if(Le.dyn_ltree[2*Ke]!==0)return o;return l}(yt)),Tt(yt,yt.l_desc),Tt(yt,yt.d_desc),je=function(Le){var Ke;for(H(Le,Le.dyn_ltree,Le.l_desc.max_code),H(Le,Le.dyn_dtree,Le.d_desc.max_code),Tt(Le,Le.bl_desc),Ke=k-1;3<=Ke&&Le.bl_tree[2*ut[Ke]+1]===0;Ke--);return Le.opt_len+=3*(Ke+1)+5+5+4,Ke}(yt),Ut=yt.opt_len+3+7>>>3,(Ie=yt.static_len+3+7>>>3)<=Ut&&(Ut=Ie)):Ut=Ie=ee+5,ee+4<=Ut&&jt!==-1?gt(yt,jt,ee,ue):yt.strategy===4||Ie===Ut?($e(yt,2+(ue?1:0),3),Ln(yt,Ct,ot)):($e(yt,4+(ue?1:0),3),function(Le,Ke,_n,wn){var de;for($e(Le,Ke-257,5),$e(Le,_n-1,5),$e(Le,wn-4,4),de=0;de<wn;de++)$e(Le,Le.bl_tree[2*ut[de]+1],3);Rt(Le,Le.dyn_ltree,Ke-1),Rt(Le,Le.dyn_dtree,_n-1)}(yt,yt.l_desc.max_code+1,yt.d_desc.max_code+1,je+1),Ln(yt,yt.dyn_ltree,yt.dyn_dtree)),Me(yt),ue&&xe(yt)},s._tr_tally=function(yt,jt,ee){return yt.pending_buf[yt.d_buf+2*yt.last_lit]=jt>>>8&255,yt.pending_buf[yt.d_buf+2*yt.last_lit+1]=255&jt,yt.pending_buf[yt.l_buf+yt.last_lit]=255&ee,yt.last_lit++,jt===0?yt.dyn_ltree[2*ee]++:(yt.matches++,jt--,yt.dyn_ltree[2*(X[ee]+C+1)]++,yt.dyn_dtree[2*Gt(jt)]++),yt.last_lit===yt.lit_bufsize-1},s._tr_align=function(yt){$e(yt,2,3),Ce(yt,j,Ct),function(jt){jt.bi_valid===16?(Re(jt,jt.bi_buf),jt.bi_buf=0,jt.bi_valid=0):8<=jt.bi_valid&&(jt.pending_buf[jt.pending++]=255&jt.bi_buf,jt.bi_buf>>=8,jt.bi_valid-=8)}(yt)}},{"../utils/common":41}],53:[function(n,a,s){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,a,s){(function(d){(function(l,o){if(!l.setImmediate){var g,_,I,C,E=1,S={},k=!1,D=l.document,N=Object.getPrototypeOf&&Object.getPrototypeOf(l);N=N&&N.setTimeout?N:l,g={}.toString.call(l.process)==="[object process]"?function($){process.nextTick(function(){F($)})}:function(){if(l.postMessage&&!l.importScripts){var $=!0,K=l.onmessage;return l.onmessage=function(){$=!1},l.postMessage("","*"),l.onmessage=K,$}}()?(C="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",j,!1):l.attachEvent("onmessage",j),function($){l.postMessage(C+$,"*")}):l.MessageChannel?((I=new MessageChannel).port1.onmessage=function($){F($.data)},function($){I.port2.postMessage($)}):D&&"onreadystatechange"in D.createElement("script")?(_=D.documentElement,function($){var K=D.createElement("script");K.onreadystatechange=function(){F($),K.onreadystatechange=null,_.removeChild(K),K=null},_.appendChild(K)}):function($){setTimeout(F,0,$)},N.setImmediate=function($){typeof $!="function"&&($=new Function(""+$));for(var K=new Array(arguments.length-1),tt=0;tt<K.length;tt++)K[tt]=arguments[tt+1];var it={callback:$,args:K};return S[E]=it,g(E),E++},N.clearImmediate=U}function U($){delete S[$]}function F($){if(k)setTimeout(F,0,$);else{var K=S[$];if(K){k=!0;try{(function(tt){var it=tt.callback,et=tt.args;switch(et.length){case 0:it();break;case 1:it(et[0]);break;case 2:it(et[0],et[1]);break;case 3:it(et[0],et[1],et[2]);break;default:it.apply(o,et)}})(K)}finally{U($),k=!1}}}}function j($){$.source===l&&typeof $.data=="string"&&$.data.indexOf(C)===0&&F(+$.data.slice(C.length))}})(typeof self>"u"?d===void 0?this:d:self)}).call(this,typeof Io<"u"?Io:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(yT);var M6=yT.exports,S6=gT,j0=kg,E6=pT,T6=M6,vT=function(t,e,n=!1){let a=new T6,s=a;e&&e.folder&&(s=a.folder(e.folder));var d=e&&e.prj?e.prj:E6;[j0.point(t),j0.line(t),j0.polygon(t),j0.multipolygon(t),j0.multiline(t)].forEach(function(o){o.geometries.length&&o.geometries[0].length&&S6(o.properties,o.type,o.geometries,function(g,_){var I=e&&e.types&&e.types[o.type.toLowerCase()]?e.types[o.type.toLowerCase()]:o.type;s.file(I+".shp",_.shp.buffer,{binary:!0}),s.file(I+".shx",_.shx.buffer,{binary:!0}),s.file(I+".dbf",_.dbf.buffer,{binary:!0}),s.file(I+".prj",d)})});var l={};return!e||!e.outputType?l.type="base64":l.type=e.outputType,!e||!e.compression?l.compression="DEFLATE":l.compression=e.compression,n?a.generateNodeStream({...l,streamFiles:!0}):a.generateAsync(l)},_T={exports:{}};(function(t,e){(function(n,a){a()})(Io,function(){function n(_,I){return typeof I>"u"?I={autoBom:!1}:typeof I!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),I={autoBom:!I}),I.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_}function a(_,I,C){var E=new XMLHttpRequest;E.open("GET",_),E.responseType="blob",E.onload=function(){g(E.response,I,C)},E.onerror=function(){console.error("could not download file")},E.send()}function s(_){var I=new XMLHttpRequest;I.open("HEAD",_,!1);try{I.send()}catch{}return 200<=I.status&&299>=I.status}function d(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var I=document.createEvent("MouseEvents");I.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(I)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Io=="object"&&Io.global===Io?Io:void 0,o=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(_,I,C){var E=l.URL||l.webkitURL,S=document.createElement("a");I=I||_.name||"download",S.download=I,S.rel="noopener",typeof _=="string"?(S.href=_,S.origin===location.origin?d(S):s(S.href)?a(_,I,C):d(S,S.target="_blank")):(S.href=E.createObjectURL(_),setTimeout(function(){E.revokeObjectURL(S.href)},4e4),setTimeout(function(){d(S)},0))}:"msSaveOrOpenBlob"in navigator?function(_,I,C){if(I=I||_.name||"download",typeof _!="string")navigator.msSaveOrOpenBlob(n(_,C),I);else if(s(_))a(_,I,C);else{var E=document.createElement("a");E.href=_,E.target="_blank",setTimeout(function(){d(E)})}}:function(_,I,C,E){if(E=E||open("","_blank"),E&&(E.document.title=E.document.body.innerText="downloading..."),typeof _=="string")return a(_,I,C);var S=_.type==="application/octet-stream",k=/constructor/i.test(l.HTMLElement)||l.safari,D=/CriOS\/[\d]+/.test(navigator.userAgent);if((D||S&&k||o)&&typeof FileReader<"u"){var N=new FileReader;N.onloadend=function(){var j=N.result;j=D?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),E?E.location.href=j:location=j,E=null},N.readAsDataURL(_)}else{var U=l.URL||l.webkitURL,F=U.createObjectURL(_);E?E.location=F:location.href=F,E=null,setTimeout(function(){U.revokeObjectURL(F)},4e4)}});l.saveAs=g.saveAs=g,t.exports=g})})(_T);var hb=_T.exports;const P6=Wp(hb);var k6=vT,L6=hb.saveAs,R6=function(t,e){let n="download";e&&(e.filename||e.folder)&&(n=e.filename||e.folder),k6(t,e).then(function(a){L6(a,n+".zip")})};sb.download=R6;sb.write=gT;sb.zip=vT;var bT={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,a)=>{t.exports=a()})(Io,function n(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},s,d=!a.document&&!!a.postMessage,l=a.IS_PAPA_WORKER||!1,o={},g=0,_={};function I(et){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(q){var ut=K(q);ut.chunkSize=parseInt(ut.chunkSize),q.step||q.chunk||(ut.chunkSize=null),this._handle=new D(ut),(this._handle.streamer=this)._config=ut}).call(this,et),this.parseChunk=function(q,ut){var Ct=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<Ct){let bt=this._config.newline;bt||(ot=this._config.quoteChar||'"',bt=this._handle.guessLineEndings(q,ot)),q=[...q.split(bt).slice(Ct)].join(bt)}this.isFirstChunk&&it(this._config.beforeFirstChunk)&&(ot=this._config.beforeFirstChunk(q))!==void 0&&(q=ot),this.isFirstChunk=!1,this._halted=!1;var Ct=this._partialLine+q,ot=(this._partialLine="",this._handle.parse(Ct,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(q=ot.meta.cursor,Ct=(this._finished||(this._partialLine=Ct.substring(q-this._baseIndex),this._baseIndex=q),ot&&ot.data&&(this._rowCount+=ot.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)a.postMessage({results:ot,workerId:_.WORKER_ID,finished:Ct});else if(it(this._config.chunk)&&!ut){if(this._config.chunk(ot,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=ot=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ot.data),this._completeResults.errors=this._completeResults.errors.concat(ot.errors),this._completeResults.meta=ot.meta),this._completed||!Ct||!it(this._config.complete)||ot&&ot.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Ct||ot&&ot.meta.paused||this._nextChunk(),ot}this._halted=!0},this._sendError=function(q){it(this._config.error)?this._config.error(q):l&&this._config.error&&a.postMessage({workerId:_.WORKER_ID,error:q,finished:!1})}}function C(et){var q;(et=et||{}).chunkSize||(et.chunkSize=_.RemoteChunkSize),I.call(this,et),this._nextChunk=d?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(ut){this._input=ut,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(q=new XMLHttpRequest,this._config.withCredentials&&(q.withCredentials=this._config.withCredentials),d||(q.onload=tt(this._chunkLoaded,this),q.onerror=tt(this._chunkError,this)),q.open(this._config.downloadRequestBody?"POST":"GET",this._input,!d),this._config.downloadRequestHeaders){var ut,Ct=this._config.downloadRequestHeaders;for(ut in Ct)q.setRequestHeader(ut,Ct[ut])}var ot;this._config.chunkSize&&(ot=this._start+this._config.chunkSize-1,q.setRequestHeader("Range","bytes="+this._start+"-"+ot));try{q.send(this._config.downloadRequestBody)}catch(bt){this._chunkError(bt.message)}d&&q.status===0&&this._chunkError()}},this._chunkLoaded=function(){q.readyState===4&&(q.status<200||400<=q.status?this._chunkError():(this._start+=this._config.chunkSize||q.responseText.length,this._finished=!this._config.chunkSize||this._start>=(ut=>(ut=ut.getResponseHeader("Content-Range"))!==null?parseInt(ut.substring(ut.lastIndexOf("/")+1)):-1)(q),this.parseChunk(q.responseText)))},this._chunkError=function(ut){ut=q.statusText||ut,this._sendError(new Error(ut))}}function E(et){(et=et||{}).chunkSize||(et.chunkSize=_.LocalChunkSize),I.call(this,et);var q,ut,Ct=typeof FileReader<"u";this.stream=function(ot){this._input=ot,ut=ot.slice||ot.webkitSlice||ot.mozSlice,Ct?((q=new FileReader).onload=tt(this._chunkLoaded,this),q.onerror=tt(this._chunkError,this)):q=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var ot=this._input,bt=(this._config.chunkSize&&(bt=Math.min(this._start+this._config.chunkSize,this._input.size),ot=ut.call(ot,this._start,bt)),q.readAsText(ot,this._config.encoding));Ct||this._chunkLoaded({target:{result:bt}})},this._chunkLoaded=function(ot){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(ot.target.result)},this._chunkError=function(){this._sendError(q.error)}}function S(et){var q;I.call(this,et=et||{}),this.stream=function(ut){return q=ut,this._nextChunk()},this._nextChunk=function(){var ut,Ct;if(!this._finished)return ut=this._config.chunkSize,q=ut?(Ct=q.substring(0,ut),q.substring(ut)):(Ct=q,""),this._finished=!q,this.parseChunk(Ct)}}function k(et){I.call(this,et=et||{});var q=[],ut=!0,Ct=!1;this.pause=function(){I.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){I.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(ot){this._input=ot,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Ct&&q.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),q.length?this.parseChunk(q.shift()):ut=!0},this._streamData=tt(function(ot){try{q.push(typeof ot=="string"?ot:ot.toString(this._config.encoding)),ut&&(ut=!1,this._checkIsFinished(),this.parseChunk(q.shift()))}catch(bt){this._streamError(bt)}},this),this._streamError=tt(function(ot){this._streamCleanUp(),this._sendError(ot)},this),this._streamEnd=tt(function(){this._streamCleanUp(),Ct=!0,this._streamData("")},this),this._streamCleanUp=tt(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function D(et){var q,ut,Ct,ot,bt=Math.pow(2,53),X=-bt,Wt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Vt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Bt=this,ae=0,ye=0,en=!1,Jt=!1,Gt=[],Re={data:[],errors:[],meta:{}};function $e(Me){return et.skipEmptyLines==="greedy"?Me.join("").trim()==="":Me.length===1&&Me[0].length===0}function Ce(){if(Re&&Ct&&(be("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+_.DefaultDelimiter+"'"),Ct=!1),et.skipEmptyLines&&(Re.data=Re.data.filter(function(Je){return!$e(Je)})),nn()){let Je=function(Ln,Tt){it(et.transformHeader)&&(Ln=et.transformHeader(Ln,Tt)),Gt.push(Ln)};if(Re)if(Array.isArray(Re.data[0])){for(var Me=0;nn()&&Me<Re.data.length;Me++)Re.data[Me].forEach(Je);Re.data.splice(0,1)}else Re.data.forEach(Je)}function xe(Je,Ln){for(var Tt=et.header?{}:[],H=0;H<Je.length;H++){var Rt=H,Pt=Je[H],Pt=((gt,yt)=>(jt=>(et.dynamicTypingFunction&&et.dynamicTyping[jt]===void 0&&(et.dynamicTyping[jt]=et.dynamicTypingFunction(jt)),(et.dynamicTyping[jt]||et.dynamicTyping)===!0))(gt)?yt==="true"||yt==="TRUE"||yt!=="false"&&yt!=="FALSE"&&((jt=>{if(Wt.test(jt)&&(jt=parseFloat(jt),X<jt&&jt<bt))return 1})(yt)?parseFloat(yt):Vt.test(yt)?new Date(yt):yt===""?null:yt):yt)(Rt=et.header?H>=Gt.length?"__parsed_extra":Gt[H]:Rt,Pt=et.transform?et.transform(Pt,Rt):Pt);Rt==="__parsed_extra"?(Tt[Rt]=Tt[Rt]||[],Tt[Rt].push(Pt)):Tt[Rt]=Pt}return et.header&&(H>Gt.length?be("FieldMismatch","TooManyFields","Too many fields: expected "+Gt.length+" fields but parsed "+H,ye+Ln):H<Gt.length&&be("FieldMismatch","TooFewFields","Too few fields: expected "+Gt.length+" fields but parsed "+H,ye+Ln)),Tt}var Be;Re&&(et.header||et.dynamicTyping||et.transform)&&(Be=1,!Re.data.length||Array.isArray(Re.data[0])?(Re.data=Re.data.map(xe),Be=Re.data.length):Re.data=xe(Re.data,0),et.header&&Re.meta&&(Re.meta.fields=Gt),ye+=Be)}function nn(){return et.header&&Gt.length===0}function be(Me,xe,Be,Je){Me={type:Me,code:xe,message:Be},Je!==void 0&&(Me.row=Je),Re.errors.push(Me)}it(et.step)&&(ot=et.step,et.step=function(Me){Re=Me,nn()?Ce():(Ce(),Re.data.length!==0&&(ae+=Me.data.length,et.preview&&ae>et.preview?ut.abort():(Re.data=Re.data[0],ot(Re,Bt))))}),this.parse=function(Me,xe,Be){var Je=et.quoteChar||'"',Je=(et.newline||(et.newline=this.guessLineEndings(Me,Je)),Ct=!1,et.delimiter?it(et.delimiter)&&(et.delimiter=et.delimiter(Me),Re.meta.delimiter=et.delimiter):((Je=((Ln,Tt,H,Rt,Pt)=>{var gt,yt,jt,ee;Pt=Pt||[",","	","|",";",_.RECORD_SEP,_.UNIT_SEP];for(var ue=0;ue<Pt.length;ue++){for(var Ut,Ie=Pt[ue],je=0,Le=0,Ke=0,_n=(jt=void 0,new U({comments:Rt,delimiter:Ie,newline:Tt,preview:10}).parse(Ln)),wn=0;wn<_n.data.length;wn++)H&&$e(_n.data[wn])?Ke++:(Ut=_n.data[wn].length,Le+=Ut,jt===void 0?jt=Ut:0<Ut&&(je+=Math.abs(Ut-jt),jt=Ut));0<_n.data.length&&(Le/=_n.data.length-Ke),(yt===void 0||je<=yt)&&(ee===void 0||ee<Le)&&1.99<Le&&(yt=je,gt=Ie,ee=Le)}return{successful:!!(et.delimiter=gt),bestDelimiter:gt}})(Me,et.newline,et.skipEmptyLines,et.comments,et.delimitersToGuess)).successful?et.delimiter=Je.bestDelimiter:(Ct=!0,et.delimiter=_.DefaultDelimiter),Re.meta.delimiter=et.delimiter),K(et));return et.preview&&et.header&&Je.preview++,q=Me,ut=new U(Je),Re=ut.parse(q,xe,Be),Ce(),en?{meta:{paused:!0}}:Re||{meta:{paused:!1}}},this.paused=function(){return en},this.pause=function(){en=!0,ut.abort(),q=it(et.chunk)?"":q.substring(ut.getCharIndex())},this.resume=function(){Bt.streamer._halted?(en=!1,Bt.streamer.parseChunk(q,!0)):setTimeout(Bt.resume,3)},this.aborted=function(){return Jt},this.abort=function(){Jt=!0,ut.abort(),Re.meta.aborted=!0,it(et.complete)&&et.complete(Re),q=""},this.guessLineEndings=function(Ln,Je){Ln=Ln.substring(0,1048576);var Je=new RegExp(N(Je)+"([^]*?)"+N(Je),"gm"),Be=(Ln=Ln.replace(Je,"")).split("\r"),Je=Ln.split(`
`),Ln=1<Je.length&&Je[0].length<Be[0].length;if(Be.length===1||Ln)return`
`;for(var Tt=0,H=0;H<Be.length;H++)Be[H][0]===`
`&&Tt++;return Tt>=Be.length/2?`\r
`:"\r"}}function N(et){return et.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function U(et){var q=(et=et||{}).delimiter,ut=et.newline,Ct=et.comments,ot=et.step,bt=et.preview,X=et.fastMode,Wt=null,Vt=!1,Bt=et.quoteChar==null?'"':et.quoteChar,ae=Bt;if(et.escapeChar!==void 0&&(ae=et.escapeChar),(typeof q!="string"||-1<_.BAD_DELIMITERS.indexOf(q))&&(q=","),Ct===q)throw new Error("Comment character same as delimiter");Ct===!0?Ct="#":(typeof Ct!="string"||-1<_.BAD_DELIMITERS.indexOf(Ct))&&(Ct=!1),ut!==`
`&&ut!=="\r"&&ut!==`\r
`&&(ut=`
`);var ye=0,en=!1;this.parse=function(Jt,Gt,Re){if(typeof Jt!="string")throw new Error("Input must be a string");var $e=Jt.length,Ce=q.length,nn=ut.length,be=Ct.length,Me=it(ot),xe=[],Be=[],Je=[],Ln=ye=0;if(!Jt)return je();if(X||X!==!1&&Jt.indexOf(Bt)===-1){for(var Tt=Jt.split(ut),H=0;H<Tt.length;H++){if(Je=Tt[H],ye+=Je.length,H!==Tt.length-1)ye+=ut.length;else if(Re)return je();if(!Ct||Je.substring(0,be)!==Ct){if(Me){if(xe=[],ee(Je.split(q)),Le(),en)return je()}else ee(Je.split(q));if(bt&&bt<=H)return xe=xe.slice(0,bt),je(!0)}}return je()}for(var Rt=Jt.indexOf(q,ye),Pt=Jt.indexOf(ut,ye),gt=new RegExp(N(ae)+N(Bt),"g"),yt=Jt.indexOf(Bt,ye);;)if(Jt[ye]===Bt)for(yt=ye,ye++;;){if((yt=Jt.indexOf(Bt,yt+1))===-1)return Re||Be.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:xe.length,index:ye}),Ut();if(yt===$e-1)return Ut(Jt.substring(ye,yt).replace(gt,Bt));if(Bt===ae&&Jt[yt+1]===ae)yt++;else if(Bt===ae||yt===0||Jt[yt-1]!==ae){Rt!==-1&&Rt<yt+1&&(Rt=Jt.indexOf(q,yt+1));var jt=ue((Pt=Pt!==-1&&Pt<yt+1?Jt.indexOf(ut,yt+1):Pt)===-1?Rt:Math.min(Rt,Pt));if(Jt.substr(yt+1+jt,Ce)===q){Je.push(Jt.substring(ye,yt).replace(gt,Bt)),Jt[ye=yt+1+jt+Ce]!==Bt&&(yt=Jt.indexOf(Bt,ye)),Rt=Jt.indexOf(q,ye),Pt=Jt.indexOf(ut,ye);break}if(jt=ue(Pt),Jt.substring(yt+1+jt,yt+1+jt+nn)===ut){if(Je.push(Jt.substring(ye,yt).replace(gt,Bt)),Ie(yt+1+jt+nn),Rt=Jt.indexOf(q,ye),yt=Jt.indexOf(Bt,ye),Me&&(Le(),en))return je();if(bt&&xe.length>=bt)return je(!0);break}Be.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:xe.length,index:ye}),yt++}}else if(Ct&&Je.length===0&&Jt.substring(ye,ye+be)===Ct){if(Pt===-1)return je();ye=Pt+nn,Pt=Jt.indexOf(ut,ye),Rt=Jt.indexOf(q,ye)}else if(Rt!==-1&&(Rt<Pt||Pt===-1))Je.push(Jt.substring(ye,Rt)),ye=Rt+Ce,Rt=Jt.indexOf(q,ye);else{if(Pt===-1)break;if(Je.push(Jt.substring(ye,Pt)),Ie(Pt+nn),Me&&(Le(),en))return je();if(bt&&xe.length>=bt)return je(!0)}return Ut();function ee(Ke){xe.push(Ke),Ln=ye}function ue(Ke){var _n=0;return _n=Ke!==-1&&(Ke=Jt.substring(yt+1,Ke))&&Ke.trim()===""?Ke.length:_n}function Ut(Ke){return Re||(Ke===void 0&&(Ke=Jt.substring(ye)),Je.push(Ke),ye=$e,ee(Je),Me&&Le()),je()}function Ie(Ke){ye=Ke,ee(Je),Je=[],Pt=Jt.indexOf(ut,ye)}function je(Ke){if(et.header&&!Gt&&xe.length&&!Vt){var _n=xe[0],wn={},de=new Set(_n);let ve=!1;for(let Te=0;Te<_n.length;Te++){let Ye=_n[Te];if(wn[Ye=it(et.transformHeader)?et.transformHeader(Ye,Te):Ye]){let un,Nn=wn[Ye];for(;un=Ye+"_"+Nn,Nn++,de.has(un););de.add(un),_n[Te]=un,wn[Ye]++,ve=!0,(Wt=Wt===null?{}:Wt)[un]=Ye}else wn[Ye]=1,_n[Te]=Ye;de.add(Ye)}ve&&console.warn("Duplicate headers found and renamed."),Vt=!0}return{data:xe,errors:Be,meta:{delimiter:q,linebreak:ut,aborted:en,truncated:!!Ke,cursor:Ln+(Gt||0),renamedHeaders:Wt}}}function Le(){ot(je()),xe=[],Be=[]}},this.abort=function(){en=!0},this.getCharIndex=function(){return ye}}function F(et){var q=et.data,ut=o[q.workerId],Ct=!1;if(q.error)ut.userError(q.error,q.file);else if(q.results&&q.results.data){var ot={abort:function(){Ct=!0,j(q.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:$,resume:$};if(it(ut.userStep)){for(var bt=0;bt<q.results.data.length&&(ut.userStep({data:q.results.data[bt],errors:q.results.errors,meta:q.results.meta},ot),!Ct);bt++);delete q.results}else it(ut.userChunk)&&(ut.userChunk(q.results,ot,q.file),delete q.results)}q.finished&&!Ct&&j(q.workerId,q.results)}function j(et,q){var ut=o[et];it(ut.userComplete)&&ut.userComplete(q),ut.terminate(),delete o[et]}function $(){throw new Error("Not implemented.")}function K(et){if(typeof et!="object"||et===null)return et;var q,ut=Array.isArray(et)?[]:{};for(q in et)ut[q]=K(et[q]);return ut}function tt(et,q){return function(){et.apply(q,arguments)}}function it(et){return typeof et=="function"}return _.parse=function(et,q){var ut=(q=q||{}).dynamicTyping||!1;if(it(ut)&&(q.dynamicTypingFunction=ut,ut={}),q.dynamicTyping=ut,q.transform=!!it(q.transform)&&q.transform,!q.worker||!_.WORKERS_SUPPORTED)return ut=null,_.NODE_STREAM_INPUT,typeof et=="string"?(et=(Ct=>Ct.charCodeAt(0)!==65279?Ct:Ct.slice(1))(et),ut=new(q.download?C:S)(q)):et.readable===!0&&it(et.read)&&it(et.on)?ut=new k(q):(a.File&&et instanceof File||et instanceof Object)&&(ut=new E(q)),ut.stream(et);(ut=(()=>{var Ct;return!!_.WORKERS_SUPPORTED&&(Ct=(()=>{var ot=a.URL||a.webkitURL||null,bt=n.toString();return _.BLOB_URL||(_.BLOB_URL=ot.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",bt,")();"],{type:"text/javascript"})))})(),(Ct=new a.Worker(Ct)).onmessage=F,Ct.id=g++,o[Ct.id]=Ct)})()).userStep=q.step,ut.userChunk=q.chunk,ut.userComplete=q.complete,ut.userError=q.error,q.step=it(q.step),q.chunk=it(q.chunk),q.complete=it(q.complete),q.error=it(q.error),delete q.worker,ut.postMessage({input:et,config:q,workerId:ut.id})},_.unparse=function(et,q){var ut=!1,Ct=!0,ot=",",bt=`\r
`,X='"',Wt=X+X,Vt=!1,Bt=null,ae=!1,ye=((()=>{if(typeof q=="object"){if(typeof q.delimiter!="string"||_.BAD_DELIMITERS.filter(function(Gt){return q.delimiter.indexOf(Gt)!==-1}).length||(ot=q.delimiter),typeof q.quotes!="boolean"&&typeof q.quotes!="function"&&!Array.isArray(q.quotes)||(ut=q.quotes),typeof q.skipEmptyLines!="boolean"&&typeof q.skipEmptyLines!="string"||(Vt=q.skipEmptyLines),typeof q.newline=="string"&&(bt=q.newline),typeof q.quoteChar=="string"&&(X=q.quoteChar),typeof q.header=="boolean"&&(Ct=q.header),Array.isArray(q.columns)){if(q.columns.length===0)throw new Error("Option columns is empty");Bt=q.columns}q.escapeChar!==void 0&&(Wt=q.escapeChar+X),q.escapeFormulae instanceof RegExp?ae=q.escapeFormulae:typeof q.escapeFormulae=="boolean"&&q.escapeFormulae&&(ae=/^[=+\-@\t\r].*$/)}})(),new RegExp(N(X),"g"));if(typeof et=="string"&&(et=JSON.parse(et)),Array.isArray(et)){if(!et.length||Array.isArray(et[0]))return en(null,et,Vt);if(typeof et[0]=="object")return en(Bt||Object.keys(et[0]),et,Vt)}else if(typeof et=="object")return typeof et.data=="string"&&(et.data=JSON.parse(et.data)),Array.isArray(et.data)&&(et.fields||(et.fields=et.meta&&et.meta.fields||Bt),et.fields||(et.fields=Array.isArray(et.data[0])?et.fields:typeof et.data[0]=="object"?Object.keys(et.data[0]):[]),Array.isArray(et.data[0])||typeof et.data[0]=="object"||(et.data=[et.data])),en(et.fields||[],et.data||[],Vt);throw new Error("Unable to serialize unrecognized input");function en(Gt,Re,$e){var Ce="",nn=(typeof Gt=="string"&&(Gt=JSON.parse(Gt)),typeof Re=="string"&&(Re=JSON.parse(Re)),Array.isArray(Gt)&&0<Gt.length),be=!Array.isArray(Re[0]);if(nn&&Ct){for(var Me=0;Me<Gt.length;Me++)0<Me&&(Ce+=ot),Ce+=Jt(Gt[Me],Me);0<Re.length&&(Ce+=bt)}for(var xe=0;xe<Re.length;xe++){var Be=(nn?Gt:Re[xe]).length,Je=!1,Ln=nn?Object.keys(Re[xe]).length===0:Re[xe].length===0;if($e&&!nn&&(Je=$e==="greedy"?Re[xe].join("").trim()==="":Re[xe].length===1&&Re[xe][0].length===0),$e==="greedy"&&nn){for(var Tt=[],H=0;H<Be;H++){var Rt=be?Gt[H]:H;Tt.push(Re[xe][Rt])}Je=Tt.join("").trim()===""}if(!Je){for(var Pt=0;Pt<Be;Pt++){0<Pt&&!Ln&&(Ce+=ot);var gt=nn&&be?Gt[Pt]:Pt;Ce+=Jt(Re[xe][gt],Pt)}xe<Re.length-1&&(!$e||0<Be&&!Ln)&&(Ce+=bt)}}return Ce}function Jt(Gt,Re){var $e,Ce;return Gt==null?"":Gt.constructor===Date?JSON.stringify(Gt).slice(1,25):(Ce=!1,ae&&typeof Gt=="string"&&ae.test(Gt)&&(Gt="'"+Gt,Ce=!0),$e=Gt.toString().replace(ye,Wt),(Ce=Ce||ut===!0||typeof ut=="function"&&ut(Gt,Re)||Array.isArray(ut)&&ut[Re]||((nn,be)=>{for(var Me=0;Me<be.length;Me++)if(-1<nn.indexOf(be[Me]))return!0;return!1})($e,_.BAD_DELIMITERS)||-1<$e.indexOf(ot)||$e.charAt(0)===" "||$e.charAt($e.length-1)===" ")?X+$e+X:$e)}},_.RECORD_SEP="",_.UNIT_SEP="",_.BYTE_ORDER_MARK="\uFEFF",_.BAD_DELIMITERS=["\r",`
`,'"',_.BYTE_ORDER_MARK],_.WORKERS_SUPPORTED=!d&&!!a.Worker,_.NODE_STREAM_INPUT=1,_.LocalChunkSize=10485760,_.RemoteChunkSize=5242880,_.DefaultDelimiter=",",_.Parser=U,_.ParserHandle=D,_.NetworkStreamer=C,_.FileStreamer=E,_.StringStreamer=S,_.ReadableStreamStreamer=k,a.jQuery&&((s=a.jQuery).fn.parse=function(et){var q=et.config||{},ut=[];return this.each(function(bt){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var X=0;X<this.files.length;X++)ut.push({file:this.files[X],inputElem:this,instanceConfig:s.extend({},q)})}),Ct(),this;function Ct(){if(ut.length===0)it(et.complete)&&et.complete();else{var bt,X,Wt,Vt,Bt=ut[0];if(it(et.before)){var ae=et.before(Bt.file,Bt.inputElem);if(typeof ae=="object"){if(ae.action==="abort")return bt="AbortError",X=Bt.file,Wt=Bt.inputElem,Vt=ae.reason,void(it(et.error)&&et.error({name:bt},X,Wt,Vt));if(ae.action==="skip")return void ot();typeof ae.config=="object"&&(Bt.instanceConfig=s.extend(Bt.instanceConfig,ae.config))}else if(ae==="skip")return void ot()}var ye=Bt.instanceConfig.complete;Bt.instanceConfig.complete=function(en){it(ye)&&ye(en,Bt.file,Bt.inputElem),ot()},_.parse(Bt.file,Bt.instanceConfig)}}function ot(){ut.splice(0,1),Ct()}}),l&&(a.onmessage=function(et){et=et.data,_.WORKER_ID===void 0&&et&&(_.WORKER_ID=et.workerId),typeof et.input=="string"?a.postMessage({workerId:_.WORKER_ID,results:_.parse(et.input,et.config),finished:!0}):(a.File&&et.input instanceof File||et.input instanceof Object)&&(et=_.parse(et.input,et.config))&&a.postMessage({workerId:_.WORKER_ID,results:et,finished:!0})}),(C.prototype=Object.create(I.prototype)).constructor=C,(E.prototype=Object.create(I.prototype)).constructor=E,(S.prototype=Object.create(S.prototype)).constructor=S,(k.prototype=Object.create(I.prototype)).constructor=k,_})})(bT);var D6=bT.exports;const O6=Wp(D6);var Ky={};Ky.attr=_2;Ky.tagClose=z6;Ky.tag=F6;Ky.encode=B6;function _2(t){return t&&t.length?" "+t.map(function(e){return e[0]+'="'+e[1]+'"'}).join(" "):""}function z6(t,e){return"<"+t+_2(e)+"/>"}function F6(t,e,n){return"<"+t+_2(n)+">"+e+"</"+t+">"}function B6(t){return(t===null?"":t.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var xT=Ky,Kr=xT.tag,Py=xT.encode,N6=function(e,n){return n=n||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"},'<?xml version="1.0" encoding="UTF-8"?>'+Kr("kml",Kr("Document",V6(n)+U6(n)+j6(e,n)),[["xmlns","http://www.opengis.net/kml/2.2"]])};function rA(t,e){return function(n){if(!n.properties||!Wc.valid(n.geometry))return"";var a=Wc.any(n.geometry);if(!a)return"";var s="",d="";if(t.simplestyle){var l=tO(n.properties);l&&(Wc.isPoint(n.geometry)&&q6(n.properties)?(e.indexOf(l)===-1&&(s=K6(n.properties,l),e.push(l)),d=Kr("styleUrl","#"+l)):(Wc.isPolygon(n.geometry)||Wc.isLine(n.geometry))&&Q6(n.properties)&&(e.indexOf(l)===-1&&(s=J6(n.properties,l),e.push(l)),d=Kr("styleUrl","#"+l)))}return s+Kr("Placemark",H6(n.properties,t)+G6(n.properties,t)+Z6(n.properties)+$6(n.properties,t)+a+d)}}function j6(t,e){if(!t.type)return"";var n=[];switch(t.type){case"FeatureCollection":return t.features?t.features.map(rA(e,n)).join(""):"";case"Feature":return rA(e,n)(t);default:return rA(e,n)({type:"Feature",geometry:t,properties:{}})}}function V6(t){return t.documentName!==void 0?Kr("name",t.documentName):""}function U6(t){return t.documentDescription!==void 0?Kr("description",t.documentDescription):""}function H6(t,e){return t[e.name]?Kr("name",Py(t[e.name])):""}function G6(t,e){return t[e.description]?Kr("description",Py(t[e.description])):""}function $6(t,e){return t[e.timestamp]?Kr("TimeStamp",Kr("when",Py(t[e.timestamp]))):""}var Wc={Point:function(t){return Kr("Point",Kr("coordinates",t.coordinates.join(",")))},LineString:function(t){return Kr("LineString",Kr("coordinates",iA(t.coordinates)))},Polygon:function(t){if(!t.coordinates.length)return"";var e=t.coordinates[0],n=t.coordinates.slice(1),a=Kr("outerBoundaryIs",Kr("LinearRing",Kr("coordinates",iA(e)))),s=n.map(function(d){return Kr("innerBoundaryIs",Kr("LinearRing",Kr("coordinates",iA(d))))}).join("");return Kr("Polygon",a+s)},MultiPoint:function(t){return t.coordinates.length?Kr("MultiGeometry",t.coordinates.map(function(e){return Wc.Point({coordinates:e})}).join("")):""},MultiPolygon:function(t){return t.coordinates.length?Kr("MultiGeometry",t.coordinates.map(function(e){return Wc.Polygon({coordinates:e})}).join("")):""},MultiLineString:function(t){return t.coordinates.length?Kr("MultiGeometry",t.coordinates.map(function(e){return Wc.LineString({coordinates:e})}).join("")):""},GeometryCollection:function(t){return Kr("MultiGeometry",t.geometries.map(Wc.any).join(""))},valid:function(t){return t&&t.type&&(t.coordinates||t.type==="GeometryCollection"&&t.geometries&&t.geometries.every(Wc.valid))},any:function(t){return Wc[t.type]?Wc[t.type](t):""},isPoint:function(t){return t.type==="Point"||t.type==="MultiPoint"},isPolygon:function(t){return t.type==="Polygon"||t.type==="MultiPolygon"},isLine:function(t){return t.type==="LineString"||t.type==="MultiLineString"}};function iA(t){return t.map(function(e){return e.join(",")}).join(" ")}function Z6(t){return Kr("ExtendedData",eO(t).map(W6).join(""))}function W6(t){return Kr("Data",Kr("value",Py(t[1])),[["name",Py(t[0])]])}function q6(t){return!!(t["marker-size"]||t["marker-symbol"]||t["marker-color"])}function K6(t,e){return Kr("Style",Kr("IconStyle",Kr("Icon",Kr("href",Y6(t))))+X6(),[["id",e]])}function Y6(t){var e=t["marker-size"]||"medium",n=t["marker-symbol"]?"-"+t["marker-symbol"]:"",a=(t["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+e.charAt(0)+n+"+"+a+".png"}function X6(t){return Kr("hotSpot","",[["xunits","fraction"],["yunits","fraction"],["x",.5],["y",.5]])}function Q6(t){for(var e in t)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[e])return!0}function J6(t,e){var n=Kr("LineStyle",[Kr("color",DI(t.stroke,t["stroke-opacity"])||"ff555555")+Kr("width",t["stroke-width"]===void 0?2:t["stroke-width"])]),a="";return(t.fill||t["fill-opacity"])&&(a=Kr("PolyStyle",[Kr("color",DI(t.fill,t["fill-opacity"])||"88555555")])),Kr("Style",n+a,[["id",e]])}function tO(t){var e="";return t["marker-symbol"]&&(e=e+"ms"+t["marker-symbol"]),t["marker-color"]&&(e=e+"mc"+t["marker-color"].replace("#","")),t["marker-size"]&&(e=e+"ms"+t["marker-size"]),t.stroke&&(e=e+"s"+t.stroke.replace("#","")),t["stroke-width"]&&(e=e+"sw"+t["stroke-width"].toString().replace(".","")),t["stroke-opacity"]&&(e=e+"mo"+t["stroke-opacity"].toString().replace(".","")),t.fill&&(e=e+"f"+t.fill.replace("#","")),t["fill-opacity"]&&(e=e+"fo"+t["fill-opacity"].toString().replace(".","")),e}function DI(t,e){if(typeof t!="string")return"";if(t=t.replace("#","").toLowerCase(),t.length===3)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(t.length!==6)return"";var n=t[0]+t[1],a=t[2]+t[3],s=t[4]+t[5],d="ff";return typeof e=="number"&&e>=0&&e<=1&&(d=(e*255).toString(16),d.indexOf(".")>-1&&(d=d.substr(0,d.indexOf("."))),d.length<2&&(d="0"+d)),d+s+a+n}function eO(t){var e=[];for(var n in t)e.push([n,t[n]]);return e}const nO=Wp(N6);function rO(t){var n;switch((n=t.split(".").pop())==null?void 0:n.toLowerCase()){case"geojson":case"json":return"geojson";case"zip":case"shp":return"shapefile";case"kml":return"kml";case"csv":return"csv";default:return null}}function iO(){async function t(e,{format:n,filename:a="data"}={}){const s=n||rO(a);if(!s)return console.error("Không xác định được định dạng đầu ra."),null;switch(s){case"geojson":return new Blob([JSON.stringify(e)],{type:"application/geo+json"});case"shapefile":{const d={folder:"shapefile",types:{point:"points",polygon:"polygons",line:"lines"},compression:"DEFLATE",outputType:"blob"},l=await sb.zip(e,d);return l instanceof Blob?l:l instanceof ArrayBuffer?new Blob([l]):l instanceof Uint8Array?new Blob([l.buffer]):Array.isArray(l)?new Blob([new Uint8Array(l).buffer]):typeof l=="string"?new Blob([l],{type:"text/plain"}):(console.error("Kết quả không xác định:",l),null)}case"kml":{const d=nO(e);return new Blob([d],{type:"application/vnd.google-earth.kml+xml"})}case"csv":{const d=e.features.map(o=>({...o.properties,geometry:JSON.stringify(o.geometry)})),l=O6.unparse(d);return new Blob([l],{type:"text/csv"})}default:return console.error("Định dạng không được hỗ trợ:",s),null}}return{convert:t}}var AT="M17.45,17.55L12,23L6.55,17.55L7.96,16.14L11,19.17V4.83L7.96,7.86L6.55,6.45L12,1L17.45,6.45L16.04,7.86L13,4.83V19.17L16.04,16.14L17.45,17.55Z",oO="M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12",wT="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",CT="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",bg="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",aO="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",IT="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z",sO="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",lO="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",MT="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z",Lg="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z",cO="M20.94 11C20.5 6.83 17.17 3.5 13 3.06V1H11V3.06C9.87 3.18 8.81 3.5 7.84 4.03L9.34 5.53C10.16 5.19 11.06 5 12 5C15.87 5 19 8.13 19 12C19 12.94 18.81 13.84 18.5 14.65L20 16.15C20.5 15.19 20.82 14.13 20.95 13H23V11H20.94M3 4.27L5.04 6.31C3.97 7.62 3.25 9.23 3.06 11H1V13H3.06C3.5 17.17 6.83 20.5 11 20.94V23H13V20.94C14.77 20.74 16.38 20.03 17.69 18.96L19.73 21L21 19.73L4.27 3L3 4.27M16.27 17.54C15.09 18.45 13.61 19 12 19C8.13 19 5 15.87 5 12C5 10.39 5.55 8.91 6.46 7.73L16.27 17.54Z",uO="M13.75,10.19L14.38,10.32L18.55,12.4C19.25,12.63 19.71,13.32 19.65,14.06V14.19L19.65,14.32L18.75,20.44C18.69,20.87 18.5,21.27 18.15,21.55C17.84,21.85 17.43,22 17,22H10.12C9.63,22 9.18,21.82 8.85,21.47L2.86,15.5L3.76,14.5C4,14.25 4.38,14.11 4.74,14.13H5.03L9,15V4.5A2,2 0 0,1 11,2.5A2,2 0 0,1 13,4.5V10.19H13.75Z",Ff="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",b2="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",db="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",hO="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",dO="M13,5V11H14.17L12,13.17L9.83,11H11V5H13M15,3H9V9H5L12,16L19,9H15V3M19,18H5V20H19V18Z",fO="M9.75 20.85C11.53 20.15 11.14 18.22 10.24 17C9.35 15.75 8.12 14.89 6.88 14.06C6 13.5 5.19 12.8 4.54 12C4.26 11.67 3.69 11.06 4.27 10.94C4.86 10.82 5.88 11.4 6.4 11.62C7.31 12 8.21 12.44 9.05 12.96L10.06 11.26C8.5 10.23 6.5 9.32 4.64 9.05C3.58 8.89 2.46 9.11 2.1 10.26C1.78 11.25 2.29 12.25 2.87 13.03C4.24 14.86 6.37 15.74 7.96 17.32C8.3 17.65 8.71 18.04 8.91 18.5C9.12 18.94 9.07 18.97 8.6 18.97C7.36 18.97 5.81 18 4.8 17.36L3.79 19.06C5.32 20 7.88 21.47 9.75 20.85M20.84 5.25C21.06 5.03 21.06 4.67 20.84 4.46L19.54 3.16C19.33 2.95 18.97 2.95 18.76 3.16L17.74 4.18L19.82 6.26M11 10.92V13H13.08L19.23 6.85L17.15 4.77L11 10.92Z",ST="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",ET="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z",pO="M3,16H8V14H3V16M9.5,16H14.5V14H9.5V16M16,16H21V14H16V16M3,20H5V18H3V20M7,20H9V18H7V20M11,20H13V18H11V20M15,20H17V18H15V20M19,20H21V18H19V20M3,12H11V10H3V12M13,12H21V10H13V12M3,4V8H21V4H3Z",mO="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z",gO="M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z",x2="M1,1V5H2V19H1V23H5V22H19V23H23V19H22V5H23V1H19V2H5V1M5,4H19V5H20V19H19V20H5V19H4V5H5M6,6V14H9V18H18V9H14V6M8,8H12V12H8M14,11H16V16H11V14H14",yO="M14,3V13L17.2,11.31L17.42,11.28C17.71,11.28 17.97,11.4 18.16,11.6L18.9,12.37L14,16.57C13.74,16.84 13.39,17 13,17H6.5C5.73,17 5,16.3 5,15.5V11.14C5,10.53 5.35,10 5.85,9.8L10.79,7.6L12,7.47V3A1,1 0 0,1 13,2A1,1 0 0,1 14,3M5,19H13V22H5V19Z",vO="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",_O="M19 3H5A2 2 0 0 0 3 5V19A2 2 0 0 0 5 21H19A2 2 0 0 0 21 19V5A2 2 0 0 0 19 3M5 19V17H8.13A4.13 4.13 0 0 0 9.4 19M19 19H14.6A4.13 4.13 0 0 0 15.87 17H19M19 15H14V16A2 2 0 0 1 10 16V15H5V5H19Z",TT="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",Yy="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z",bO="M12,18.54L19.37,12.8L21,14.07L12,21.07L3,14.07L4.62,12.81L12,18.54M12,16L3,9L12,2L21,9L12,16M12,4.53L6.26,9L12,13.47L17.74,9L12,4.53Z",A2="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z",xO="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",w2="M12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5M12,2A7,7 0 0,1 19,9C19,14.25 12,22 12,22C12,22 5,14.25 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9C7,10 7,12 12,18.71C17,12 17,10 17,9A5,5 0 0,0 12,4Z",YQ="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",PT="M7,10L12,15L17,10H7Z",AO="M14,7L9,12L14,17V7Z",wO="M7,15L12,10L17,15H7Z",CO="M19,13H5V11H19V13Z",kT="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",IO="M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z",vd="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",MO="M9.8 21C9.6 20.6 9.3 20.2 9.2 19.7L8.8 19H8V14H13C14.2 13.4 15.6 13 17 13C18.9 13 20.6 13.6 22 14.6V11C22 9.3 20.7 8 19 8H5C3.3 8 2 9.3 2 11V17H6V21H9.8M19 10C19.6 10 20 10.4 20 11S19.6 12 19 12 18 11.6 18 11 18.4 10 19 10M18 7H6V3H18V7M17 18C17.6 18 18 18.4 18 19S17.6 20 17 20 16 19.6 16 19 16.4 18 17 18M17 15C14.3 15 11.9 16.7 11 19C11.9 21.3 14.3 23 17 23S22.1 21.3 23 19C22.1 16.7 19.7 15 17 15M17 21.5C15.6 21.5 14.5 20.4 14.5 19S15.6 16.5 17 16.5 19.5 17.6 19.5 19 18.4 21.5 17 21.5Z",SO="M19 8C20.66 8 22 9.34 22 11V17H18V21H6V17H2V11C2 9.34 3.34 8 5 8H6V3H18V8H19M8 5V8H16V5H8M16 19V15H8V19H16M18 15H20V11C20 10.45 19.55 10 19 10H5C4.45 10 4 10.45 4 11V15H6V13H18V15M19 11.5C19 12.05 18.55 12.5 18 12.5C17.45 12.5 17 12.05 17 11.5C17 10.95 17.45 10.5 18 10.5C18.55 10.5 19 10.95 19 11.5Z",EO="M1.39,18.36L3.16,16.6L4.58,18L5.64,16.95L4.22,15.54L5.64,14.12L8.11,16.6L9.17,15.54L6.7,13.06L8.11,11.65L9.53,13.06L10.59,12L9.17,10.59L10.59,9.17L13.06,11.65L14.12,10.59L11.65,8.11L13.06,6.7L14.47,8.11L15.54,7.05L14.12,5.64L15.54,4.22L18,6.7L19.07,5.64L16.6,3.16L18.36,1.39L22.61,5.64L5.64,22.61L1.39,18.36Z",TO="M20 19.88V22L18.2 20.83L13.41 11.83A4.94 4.94 0 0 0 15.19 10.83M15 7A3 3 0 0 1 12 10A3.27 3.27 0 0 1 11.56 10L5.8 20.83L4 22V19.88L9.79 9A3 3 0 0 1 12 4V2A1 1 0 0 1 13 3V4.18A3 3 0 0 1 15 7M13 7A1 1 0 1 0 12 8A1 1 0 0 0 13 7M4.22 10L6 11.8L4.56 14.56L2.1 12.1M12 17.76L10.5 16.25L9 19L12 22L15 19L13.53 16.23M19.78 10L18 11.8L19.5 14.56L21.9 12.1Z",PO="M4,3H5V5H3V4A1,1 0 0,1 4,3M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M21,20A1,1 0 0,1 20,21H19V19H21V20M15,21V19H17V21H15M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M3,7H5V9H3V7M21,7V9H19V7H21Z",kO="M1 6V19A2 2 0 0 0 3 21H9V11H21V6A2 2 0 0 0 19 4H3A2 2 0 0 0 1 6M3 6H7V9H3M7 19H3V16H7M7 14H3V11H7M9 9V6H13V9M19 9H15V6H19M17 16A1 1 0 1 1 16 17A1 1 0 0 1 17 16M17 13A6.45 6.45 0 0 1 23 17A6.5 6.5 0 0 1 11 17A6.45 6.45 0 0 1 17 13M17 14.5A2.5 2.5 0 1 0 19.5 17A2.5 2.5 0 0 0 17 14.5",LO="M2,2H6V3H13V2H17V6H16V9H18V8H22V12H21V18H22V22H18V21H12V22H8V18H9V16H6V17H2V13H3V6H2V2M18,12V11H16V13H17V17H13V16H11V18H12V19H18V18H19V12H18M13,6V5H6V6H5V13H6V14H9V12H8V8H12V9H14V6H13M12,12H11V14H13V13H14V11H12V12Z",RO="M9,10V16H15V10H19L12,3L5,10H9M12,5.8L14.2,8H13V14H11V8H9.8L12,5.8M19,18H5V20H19V18Z";const OI={mdi:{size:24,viewbox:"0 0 24 24"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},DO={name:"icon",props:{type:String,path:{type:String,required:!0},size:{type:[String,Number],default:24},viewbox:String,flip:{type:String,validator:t=>["horizontal","vertical","both","none"].includes(t)},rotate:{type:Number,default:0}},computed:{styles(){return{"--sx":["both","horizontal"].includes(this.flip)?"-1":"1","--sy":["both","vertical"].includes(this.flip)?"-1":"1","--r":isNaN(this.rotate)?this.rotate:this.rotate+"deg"}},defaults(){return OI[this.type]||OI.default},sizeValue(){return this.size||this.defaults.size},viewboxValue(){return this.viewbox||this.defaults.viewbox}}},OO=["width","height","viewBox"],zO=["d"];function FO(t,e,n,a,s,d){return St(),pe("svg",{width:d.sizeValue,height:d.sizeValue,viewBox:d.viewboxValue,style:fi(d.styles)},[zt("path",{d:n.path},null,8,zO)],12,OO)}const Wn=Vn(DO,[["render",FO],["__scopeId","data-v-0fb36228"]]),BO={components:{SvgIcon:Wn},props:{height:{default:32},width:{default:32},loading:Boolean,active:Boolean,disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},path(){return{loading:A2}}}},NO=["disabled"],jO={class:"map-control-button__content"};function VO(t,e,n,a,s,d){const l=Js("SvgIcon");return St(),pe("button",Tr({class:"map-control-button",style:d.bindStyle,disabled:n.disabled},t.$attrs,{class:{"map-control-button-active":n.active,"map-control-button-disabled":n.disabled}}),[zt("span",jO,[n.loading?(St(),tn(l,{key:0,size:n.height*2/3,type:"mdi",path:d.path.loading,class:"spin"},null,8,["size","path"])):qn(t.$slots,"default",{key:1},void 0,!0)])],16,NO)}const LT=Vn(BO,[["render",VO],["__scopeId","data-v-06662425"]]),UO={props:{},computed:{iconName(){return""}}};function HO(t,e,n,a,s,d){return St(),pe("i",{class:Li(["map-icon mdi",d.iconName])},null,2)}const C2=Vn(UO,[["render",HO],["__scopeId","data-v-d0a88ad0"]]),GO={components:{MapButton:LT,MapIcon:C2},props:{items:{type:Array,default:()=>[]},row:Boolean,size:{type:[Number,String],default:32}},provide(){return{isGroup:!0,size:this.size}}};function $O(t,e,n,a,s,d){const l=Js("MapIcon"),o=Js("MapButton");return St(),pe("div",{class:Li(["button-container button-group-container",{"button-group-row-container":n.row,"button-group-column-container":!n.row}]),style:fi({width:n.row?null:n.size+"px",height:n.row?n.size+"px":null})},[zt("div",{class:Li(["button-group-sheet",{"button-group-sheet-column":!n.row}]),style:{"border-radius":"150px"}},[(St(!0),pe(mr,null,ki(n.items,(g,_)=>(St(),tn(o,{key:_+""+g.titl,height:n.size,text:"",title:g.title,width:n.size,onClick:g.onClick},{default:Se(()=>[te(l,null,{default:Se(()=>[ho(Rn(g.icon),1)]),_:2},1024)]),_:2},1032,["height","title","width","onClick"]))),128)),qn(t.$slots,"default",{},void 0,!0)],2)],6)}const xg=Vn(GO,[["render",$O],["__scopeId","data-v-a47987bf"]]),ZO={components:{MapButton:LT,MapIcon:C2},props:{icon:{type:[String,Boolean]},tooltip:String,title:String,loading:Boolean,size:{type:Number,default:32},active:Boolean,disabled:Boolean},inject:{isGroup:{default:!1},groupSize:{default:0,from:"size"}},computed:{}},WO={key:1,class:"button-container"},qO=["title"];function KO(t,e,n,a,s,d){const l=Js("MapIcon"),o=Js("MapButton");return d.isGroup?(St(),tn(o,Tr({key:0},t.$attrs,{active:n.active,height:d.groupSize,title:n.tooltip||n.title,width:d.groupSize,disabled:n.disabled}),{default:Se(()=>[qn(t.$slots,"default",{},()=>[te(l,null,{default:Se(()=>[ho(Rn(n.icon),1)]),_:1})],!0)]),_:3},16,["active","height","title","width","disabled"])):(St(),pe("div",WO,[zt("div",{title:n.tooltip||n.title},[qn(t.$slots,"content",{},()=>[te(o,Tr(t.$attrs,{active:n.active,height:n.size,loading:n.loading,width:n.size,disabled:n.disabled}),{default:Se(()=>[qn(t.$slots,"default",{},()=>[te(l,null,{default:Se(()=>[ho(Rn(n.icon),1)]),_:1})],!0)]),_:3},16,["active","height","loading","width","disabled"])],!0)],8,qO)]))}const di=Vn(ZO,[["render",KO],["__scopeId","data-v-da6cc99f"]]),YO={props:{src:{}},data:()=>({}),computed:{styleImage(){return this.src?{"background-image":`url(${this.src})`}:{}}},methods:{}},XO=t=>(_c("data-v-97c90e54"),t=t(),bc(),t),QO={class:"map-image"},JO=XO(()=>zt("div",{class:"map-image__sizer",style:{"padding-bottom":"100%"}},null,-1)),t8={class:"map-image__content"};function e8(t,e,n,a,s,d){return St(),pe("div",QO,[JO,zt("div",{class:"map-image__image",style:fi(d.styleImage)},null,4),zt("div",t8,[qn(t.$slots,"default",{},void 0,!0)])])}const mw=Vn(YO,[["render",e8],["__scopeId","data-v-97c90e54"]]),n8={props:{height:{},width:{}},data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},r8=J1('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1);function i8(t,e,n,a,s,d){return St(),pe("div",Tr({class:"card",style:d.cardStyle},t.$attrs),[zt("div",null,[qn(t.$slots,"default")]),r8],16)}const o8=Vn(n8,[["render",i8]]),a8={class:"form-group"},s8={key:0},l8={class:"input-container"},c8=["disabled"],u8={name:"InputText"},h8=rr({...u8,props:to({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=la(t,"modelValue");return(n,a)=>(St(),pe("div",a8,[t.label?(St(),pe("label",s8,Rn(t.label),1)):Cn("",!0),zt("div",l8,[gc(zt("input",Tr(n.$attrs,{"onUpdate:modelValue":a[0]||(a[0]=s=>e.value=s),disabled:t.disabled}),null,16,c8),[[h2,e.value]])])]))}}),Pi=Vn(h8,[["__scopeId","data-v-52d6ae64"]]),d8={class:"form-group"},f8={key:0},p8={class:"input-container"},m8={value:"",disabled:"",selected:"",hidden:""},g8=["value"],y8=rr({__name:"input-select",props:to({label:String,items:{type:Array,default:()=>[]},itemValue:{type:String,default:"value"},itemText:{type:String,default:"text"},returnObject:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=la(t,"modelValue"),n=t;function a(l){return typeof l=="string"||n.returnObject?l:l[n.itemValue]}function s(l){return typeof l=="string"?l:l[n.itemText]}function d(l){return typeof l=="string"?l:l[n.itemValue]}return(l,o)=>(St(),pe("div",d8,[t.label?(St(),pe("label",f8,Rn(t.label),1)):Cn("",!0),zt("div",p8,[gc(zt("select",Tr(l.$attrs,{"onUpdate:modelValue":o[0]||(o[0]=g=>e.value=g),required:""}),[zt("option",m8,Rn(l.$attrs.placeholder),1),(St(!0),pe(mr,null,ki(t.items,g=>(St(),pe("option",{value:a(g),key:d(g)},Rn(s(g)),9,g8))),128))],16),[[ib,e.value]])])]))}}),Tf=Vn(y8,[["__scopeId","data-v-2fa00323"]]),v8={__name:"base-button",props:{active:Boolean,disabled:Boolean},setup(t){const e=t;return(n,a)=>(St(),pe("button",Tr({class:"map-control__button clickable"},n.$attrs,{class:{"map-control__button-active":e.active,"map-control__button-disabled":e.disabled}}),[qn(n.$slots,"default",{},void 0,!0)],16))}},Cl=Vn(v8,[["__scopeId","data-v-60fc15c5"]]),_8=["aria-expanded"],b8={class:"collapse-header__title"},x8={class:"collapse-header__icon"},A8={key:0,class:"collapse-content"},w8={class:"collapse-content-box"},C8={name:"Collapse"},I8=Object.assign(C8,{props:{selected:{type:Boolean,default:!0}},emits:["update:selected","open","close"],setup(t,{emit:e}){const n=t,a=e,s=gn(n.selected),d=()=>{s.value=!s.value,a("update:selected",s.value),s.value?a("open"):a("close")},l={open:PT,close:wO};return(o,g)=>(St(),pe("div",{class:Li(["collapse collapse-item",{"is-active":s.value}])},[zt("div",{class:"collapse-header touchable",role:"tab","aria-expanded":s.value?"true":"false",onClick:_i(d,["prevent"])},[zt("div",b8,[qn(o.$slots,"header",{},void 0,!0)]),zt("div",x8,[s.value?(St(),tn(ct(Wn),{key:0,size:"14",type:"mdi",path:l.close},null,8,["path"])):(St(),tn(ct(Wn),{key:1,size:"14",type:"mdi",path:l.open},null,8,["path"]))])],8,_8),te(tb,{name:"fade"},{default:Se(()=>[s.value?(St(),pe("div",A8,[zt("div",w8,[qn(o.$slots,"default",{},void 0,!0)])])):Cn("",!0)]),_:3})],2))}}),gw=Vn(I8,[["__scopeId","data-v-208c4e72"]]),M8={class:"form-group"},S8={key:0},E8={class:"input-container"},T8=rr({__name:"input-textarea",props:to({label:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=la(t,"modelValue");return(n,a)=>(St(),pe("div",M8,[t.label?(St(),pe("label",S8,Rn(t.label),1)):Cn("",!0),zt("div",E8,[gc(zt("textarea",Tr(n.$attrs,{"onUpdate:modelValue":a[0]||(a[0]=s=>e.value=s)}),null,16),[[wh,e.value]])])]))}}),RT=Vn(T8,[["__scopeId","data-v-23a6d5c7"]]),P8={class:"form-group"},k8={key:0},L8={class:"input-container"},R8=["min","max","step","disabled"],D8={class:"input-slider__value"},O8=["min","max","step","disabled"],z8=rr({__name:"input-slider",props:to({label:String,min:{default:0},max:{default:100},step:{default:1},disabled:Boolean},{modelValue:{default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=la(t,"modelValue"),n=t,a=bn(()=>(e.value-n.min)*100/(n.max-n.min)+"% 100%");return(s,d)=>(St(),pe("div",P8,[t.label?(St(),pe("label",k8,Rn(t.label),1)):Cn("",!0),zt("div",L8,[gc(zt("input",{"onUpdate:modelValue":d[0]||(d[0]=l=>e.value=l),type:"range",min:t.min,max:t.max,step:t.step,style:fi({backgroundSize:a.value}),disabled:t.disabled},null,12,R8),[[wh,e.value]]),zt("div",D8,[gc(zt("input",{"onUpdate:modelValue":d[1]||(d[1]=l=>e.value=l),type:"number",min:t.min,max:t.max,step:t.step,disabled:t.disabled},null,8,O8),[[wh,e.value]])])])]))}}),x1=Vn(z8,[["__scopeId","data-v-6248ac13"]]),F8={class:"form-group"},B8={class:"form-control form-checkbox"},N8=["disabled"],j8=rr({__name:"input-checkbox",props:to({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=la(t,"modelValue");return(n,a)=>(St(),pe("div",F8,[zt("div",B8,[gc(zt("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=s=>e.value=s),disabled:t.disabled},null,8,N8),[[rb,e.value]]),zt("label",null,Rn(t.label),1)])]))}}),V8=Vn(j8,[["__scopeId","data-v-d59a9d80"]]),U8={class:"form-group"},H8={key:0},G8={class:"input-container"},$8=["onClick"],Z8={__name:"input-choose",props:to({label:String,items:{type:Array,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=la(t,"modelValue");function n(a){e.value=a.value}return(a,s)=>(St(),pe("div",U8,[t.label?(St(),pe("label",H8,Rn(t.label),1)):Cn("",!0),zt("div",G8,[(St(!0),pe(mr,null,ki(t.items,d=>(St(),pe("div",{key:d.value,class:Li(["item-choose",{"item-choose-active":d.value===e.value}]),onClick:_i(l=>n(d),["stop"])},Rn(d.text),11,$8))),128))])]))}},W8=Vn(Z8,[["__scopeId","data-v-4763dc50"]]),q8="";function Rg(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&a.firstChild?a.insertBefore(s,a.firstChild):a.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}const Dg=function(t,e){const{componentPrefix:n=q8}=e||{};t.component(`${n}${this.name}`,this)},oA={};var Xy={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":`url(${Y8(this.white,this.grey,this.size)})`}}}};function K8(t,e,n){if(typeof document>"u")return null;const a=document.createElement("canvas");a.width=a.height=n*2;const s=a.getContext("2d");return s?(s.fillStyle=t,s.fillRect(0,0,a.width,a.height),s.fillStyle=e,s.fillRect(0,0,n,n),s.translate(n,n),s.fillRect(0,0,n,n),a.toDataURL()):null}function Y8(t,e,n){const a=`${t},${e},${n}`;if(oA[a])return oA[a];const s=K8(t,e,n);return oA[a]=s,s}function X8(t,e,n,a,s,d){return St(),pe("div",{class:"vc-checkerboard",style:fi(d.bgStyle)},null,4)}var Q8=".vc-checkerboard{background-size:contain;bottom:0;left:0;position:absolute;right:0;top:0}";Rg(Q8);Xy.render=X8;Xy.__file="src/components/checkboard/checkboard.vue";Xy.install=Dg;var fb={name:"Alpha",components:{Checkboard:Xy},props:{value:Object,onChange:Function},computed:{colors(){return this.value},gradientColor(){const{rgba:t}=this.colors,e=[t.r,t.g,t.b].join(",");return`linear-gradient(to right, rgba(${e}, 0) 0%, rgba(${e}, 1) 100%)`}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:n}=this.$refs;if(!n)return;const a=n.clientWidth,s=n.getBoundingClientRect().left+window.pageXOffset,l=(t.pageX||(t.touches?t.touches[0].pageX:0))-s;let o;l<0?o=0:l>a?o=1:o=Math.round(l*100/a)/100,this.colors.a!==o&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:o,source:"rgba"})},handleMouseDown(t){this.handleChange(t,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const J8={class:"vc-alpha"},tz={class:"vc-alpha-checkboard-wrap"},ez=zt("div",{class:"vc-alpha-picker"},null,-1),nz=[ez];function rz(t,e,n,a,s,d){const l=Js("Checkboard");return St(),pe("div",J8,[zt("div",tz,[te(l)]),zt("div",{class:"vc-alpha-gradient",style:fi({background:d.gradientColor})},null,4),zt("div",{ref:"container",class:"vc-alpha-container",onMousedown:e[0]||(e[0]=(...o)=>d.handleMouseDown&&d.handleMouseDown(...o)),onTouchmove:e[1]||(e[1]=(...o)=>d.handleChange&&d.handleChange(...o)),onTouchstart:e[2]||(e[2]=(...o)=>d.handleChange&&d.handleChange(...o))},[zt("div",{class:"vc-alpha-pointer",style:fi({left:`${d.colors.a*100}%`})},nz,4)],544)])}var iz=".vc-alpha,.vc-alpha-checkboard-wrap{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-container{cursor:pointer;height:100%;margin:0 3px;position:relative;z-index:2}.vc-alpha-pointer{position:absolute;z-index:2}.vc-alpha-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";Rg(iz);fb.render=rz;fb.__file="src/components/alpha/alpha.vue";fb.install=Dg;function ss(t,e){oz(t)&&(t="100%");var n=az(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function O_(t){return Math.min(1,Math.max(0,t))}function oz(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function az(t){return typeof t=="string"&&t.indexOf("%")!==-1}function DT(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function z_(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Lp(t){return t.length===1?"0"+t:String(t)}function sz(t,e,n){return{r:ss(t,255)*255,g:ss(e,255)*255,b:ss(n,255)*255}}function zI(t,e,n){t=ss(t,255),e=ss(e,255),n=ss(n,255);var a=Math.max(t,e,n),s=Math.min(t,e,n),d=0,l=0,o=(a+s)/2;if(a===s)l=0,d=0;else{var g=a-s;switch(l=o>.5?g/(2-a-s):g/(a+s),a){case t:d=(e-n)/g+(e<n?6:0);break;case e:d=(n-t)/g+2;break;case n:d=(t-e)/g+4;break}d/=6}return{h:d,s:l,l:o}}function aA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function lz(t,e,n){var a,s,d;if(t=ss(t,360),e=ss(e,100),n=ss(n,100),e===0)s=n,d=n,a=n;else{var l=n<.5?n*(1+e):n+e-n*e,o=2*n-l;a=aA(o,l,t+1/3),s=aA(o,l,t),d=aA(o,l,t-1/3)}return{r:a*255,g:s*255,b:d*255}}function FI(t,e,n){t=ss(t,255),e=ss(e,255),n=ss(n,255);var a=Math.max(t,e,n),s=Math.min(t,e,n),d=0,l=a,o=a-s,g=a===0?0:o/a;if(a===s)d=0;else{switch(a){case t:d=(e-n)/o+(e<n?6:0);break;case e:d=(n-t)/o+2;break;case n:d=(t-e)/o+4;break}d/=6}return{h:d,s:g,v:l}}function cz(t,e,n){t=ss(t,360)*6,e=ss(e,100),n=ss(n,100);var a=Math.floor(t),s=t-a,d=n*(1-e),l=n*(1-s*e),o=n*(1-(1-s)*e),g=a%6,_=[n,l,d,d,o,n][g],I=[o,n,n,l,d,d][g],C=[d,d,o,n,n,l][g];return{r:_*255,g:I*255,b:C*255}}function BI(t,e,n,a){var s=[Lp(Math.round(t).toString(16)),Lp(Math.round(e).toString(16)),Lp(Math.round(n).toString(16))];return a&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function uz(t,e,n,a,s){var d=[Lp(Math.round(t).toString(16)),Lp(Math.round(e).toString(16)),Lp(Math.round(n).toString(16)),Lp(hz(a))];return s&&d[0].startsWith(d[0].charAt(1))&&d[1].startsWith(d[1].charAt(1))&&d[2].startsWith(d[2].charAt(1))&&d[3].startsWith(d[3].charAt(1))?d[0].charAt(0)+d[1].charAt(0)+d[2].charAt(0)+d[3].charAt(0):d.join("")}function hz(t){return Math.round(parseFloat(t)*255).toString(16)}function NI(t){return cc(t)/255}function cc(t){return parseInt(t,16)}function dz(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var yw={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function fz(t){var e={r:0,g:0,b:0},n=1,a=null,s=null,d=null,l=!1,o=!1;return typeof t=="string"&&(t=gz(t)),typeof t=="object"&&(nd(t.r)&&nd(t.g)&&nd(t.b)?(e=sz(t.r,t.g,t.b),l=!0,o=String(t.r).substr(-1)==="%"?"prgb":"rgb"):nd(t.h)&&nd(t.s)&&nd(t.v)?(a=z_(t.s),s=z_(t.v),e=cz(t.h,a,s),l=!0,o="hsv"):nd(t.h)&&nd(t.s)&&nd(t.l)&&(a=z_(t.s),d=z_(t.l),e=lz(t.h,a,d),l=!0,o="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=DT(n),{ok:l,format:t.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var pz="[-\\+]?\\d+%?",mz="[-\\+]?\\d*\\.\\d+%?",vf="(?:".concat(mz,")|(?:").concat(pz,")"),sA="[\\s|\\(]+(".concat(vf,")[,|\\s]+(").concat(vf,")[,|\\s]+(").concat(vf,")\\s*\\)?"),lA="[\\s|\\(]+(".concat(vf,")[,|\\s]+(").concat(vf,")[,|\\s]+(").concat(vf,")[,|\\s]+(").concat(vf,")\\s*\\)?"),Lu={CSS_UNIT:new RegExp(vf),rgb:new RegExp("rgb"+sA),rgba:new RegExp("rgba"+lA),hsl:new RegExp("hsl"+sA),hsla:new RegExp("hsla"+lA),hsv:new RegExp("hsv"+sA),hsva:new RegExp("hsva"+lA),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function gz(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(yw[t])t=yw[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=Lu.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=Lu.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Lu.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=Lu.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Lu.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=Lu.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Lu.hex8.exec(t),n?{r:cc(n[1]),g:cc(n[2]),b:cc(n[3]),a:NI(n[4]),format:e?"name":"hex8"}:(n=Lu.hex6.exec(t),n?{r:cc(n[1]),g:cc(n[2]),b:cc(n[3]),format:e?"name":"hex"}:(n=Lu.hex4.exec(t),n?{r:cc(n[1]+n[1]),g:cc(n[2]+n[2]),b:cc(n[3]+n[3]),a:NI(n[4]+n[4]),format:e?"name":"hex8"}:(n=Lu.hex3.exec(t),n?{r:cc(n[1]+n[1]),g:cc(n[2]+n[2]),b:cc(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function nd(t){return!!Lu.CSS_UNIT.exec(String(t))}var yz=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var a;if(e instanceof t)return e;typeof e=="number"&&(e=dz(e)),this.originalInput=e;var s=fz(e);this.originalInput=e,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=n.format)!==null&&a!==void 0?a:s.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,a,s,d=e.r/255,l=e.g/255,o=e.b/255;return d<=.03928?n=d/12.92:n=Math.pow((d+.055)/1.055,2.4),l<=.03928?a=l/12.92:a=Math.pow((l+.055)/1.055,2.4),o<=.03928?s=o/12.92:s=Math.pow((o+.055)/1.055,2.4),.2126*n+.7152*a+.0722*s},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=DT(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=FI(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=FI(this.r,this.g,this.b),n=Math.round(e.h*360),a=Math.round(e.s*100),s=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(a,"%, ").concat(s,"%)"):"hsva(".concat(n,", ").concat(a,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=zI(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=zI(this.r,this.g,this.b),n=Math.round(e.h*360),a=Math.round(e.s*100),s=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(a,"%, ").concat(s,"%)"):"hsla(".concat(n,", ").concat(a,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),BI(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),uz(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(a,")"):"rgba(".concat(e,", ").concat(n,", ").concat(a,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(ss(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(ss(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+BI(this.r,this.g,this.b,!1),n=0,a=Object.entries(yw);n<a.length;n++){var s=a[n],d=s[0],l=s[1];if(e===l)return d}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var a=!1,s=this.a<1&&this.a>=0,d=!n&&s&&(e.startsWith("hex")||e==="name");return d?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(a=this.toRgbString()),e==="prgb"&&(a=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(a=this.toHexString()),e==="hex3"&&(a=this.toHexString(!0)),e==="hex4"&&(a=this.toHex8String(!0)),e==="hex8"&&(a=this.toHex8String()),e==="name"&&(a=this.toName()),e==="hsl"&&(a=this.toHslString()),e==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=O_(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=O_(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=O_(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=O_(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),a=(n.h+e)%360;return n.h=a<0?360+a:a,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var a=this.toRgb(),s=new t(e).toRgb(),d=n/100,l={r:(s.r-a.r)*d+a.r,g:(s.g-a.g)*d+a.g,b:(s.b-a.b)*d+a.b,a:(s.a-a.a)*d+a.a};return new t(l)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var a=this.toHsl(),s=360/n,d=[this];for(a.h=(a.h-(s*e>>1)+720)%360;--e;)a.h=(a.h+s)%360,d.push(new t(a));return d},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),a=n.h,s=n.s,d=n.v,l=[],o=1/e;e--;)l.push(new t({h:a,s,v:d})),d=(d+o)%1;return l},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),a=new t(e).toRgb(),s=n.a+a.a*(1-n.a);return new t({r:(n.r*n.a+a.r*a.a*(1-n.a))/s,g:(n.g*n.a+a.g*a.a*(1-n.a))/s,b:(n.b*n.a+a.b*a.a*(1-n.a))/s,a:s})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),a=n.h,s=[this],d=360/e,l=1;l<e;l++)s.push(new t({h:(a+l*d)%360,s:n.s,l:n.l}));return s},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function pf(...t){return new yz(...t)}function cA(t,e){const n=t&&t.a;let a;t&&t.hsl?a=pf(t.hsl):t&&t.hex&&t.hex.length>0?a=pf(t.hex):t&&t.hsv?a=pf(t.hsv):t&&t.rgba?a=pf(t.rgba):t&&t.rgb?a=pf(t.rgb):a=pf(t),a&&(a._a===void 0||a._a===null)&&a.setAlpha(n||a.getAlpha());const s=a.toHsl(),d=a.toHsv();return s.s===0&&(d.h=s.h=t.h||t.hsl&&t.hsl.h||e||0),d.v<.0164&&(d.h=t.h||t.hsv&&t.hsv.h||0,d.s=t.s||t.hsv&&t.hsv.s||0),s.l<.01&&(s.h=t.h||t.hsl&&t.hsl.h||0,s.s=t.s||t.hsl&&t.hsl.s||0),{hsl:s,hex:a.toHexString().toUpperCase(),hex8:a.toHex8String().toUpperCase(),rgba:a.toRgb(),hsv:d,oldHue:t.h||e||s.h,source:t.source,a:a.getAlpha()}}var vz={model:{prop:"modelValue",event:"update:modelValue"},props:["modelValue"],data(){return{val:cA(this.modelValue)}},computed:{colors:{get(){return this.val},set(t){this.val=t,this.$emit("update:modelValue",t)}}},watch:{modelValue(t){this.val=cA(t)}},methods:{colorChange(t,e){this.oldHue=this.colors.hsl.h,this.colors=cA(t,e||this.oldHue)},isValidHex(t){return pf(t).isValid},simpleCheckForValidColor(t){const e=["r","g","b","a","h","s","l","v"];let n=0,a=0;for(let s=0;s<e.length;s++){const d=e[s];t[d]&&(n++,isNaN(t[d])||a++)}if(n===a)return t},paletteUpperCase(t){return t.map(e=>e.toUpperCase())},isTransparent(t){return pf(t).getAlpha()===0}}},pb={name:"EditableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.value},set(t){if(this.max!==void 0&&+t>this.max)this.$refs.input.value=this.max;else return t}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(t){this.handleChange(t.target.value)},handleChange(t){const e={};e[this.label]=t,e.hex===void 0&&e["#"]===void 0?this.$emit("change",e):t.length>5&&this.$emit("change",e)},handleKeyDown(t){let{val:e}=this;const n=Number(e);if(n){const a=this.arrowOffset||1;t.keyCode===38&&(e=n+a,this.handleChange(e),t.preventDefault()),t.keyCode===40&&(e=n-a,this.handleChange(e),t.preventDefault())}}}};const _z={class:"vc-editable-input"},bz=["aria-labelledby"],xz=["id","for"],Az={class:"vc-input__desc"};function wz(t,e,n,a,s,d){return St(),pe("div",_z,[gc(zt("input",{ref:"input","onUpdate:modelValue":e[0]||(e[0]=l=>d.val=l),"aria-labelledby":d.labelId,class:"vc-input__input",onKeydown:e[1]||(e[1]=(...l)=>d.handleKeyDown&&d.handleKeyDown(...l)),onInput:e[2]||(e[2]=(...l)=>d.update&&d.update(...l))},null,40,bz),[[wh,d.val]]),zt("span",{id:d.labelId,for:n.label,class:"vc-input__label"},Rn(d.labelSpanText),9,xz),zt("span",Az,Rn(n.desc),1)])}var Cz=".vc-editable-input{position:relative}.vc-input__input{border:0;outline:none;padding:0}.vc-input__label{text-transform:capitalize}";Rg(Cz);pb.render=wz;pb.__file="src/components/editable-input/editable-input.vue";pb.install=Dg;function uA(t,e,n){return e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t}var mb={name:"Saturation",props:{value:Object},computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return`${-(this.colors.hsv.v*100)+1+100}%`},pointerLeft(){return`${this.colors.hsv.s*100}%`}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:n}=this.$refs;if(!n)return;const a=n.clientWidth,s=n.clientHeight,d=n.getBoundingClientRect().left+window.pageXOffset,l=n.getBoundingClientRect().top+window.pageYOffset,o=t.pageX||(t.touches?t.touches[0].pageX:0),g=t.pageY||(t.touches?t.touches[0].pageY:0),_=uA(o-d,0,a),I=uA(g-l,0,s),C=_/a,E=uA(-(I/s)+1,0,1);this.onChange({h:this.colors.hsv.h,s:C,v:E,a:this.colors.hsv.a,source:"hsva"})},onChange(t){this.$emit("change",t)},handleMouseDown(t){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(t){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const Iz=zt("div",{class:"vc-saturation--white"},null,-1),Mz=zt("div",{class:"vc-saturation--black"},null,-1),Sz=zt("div",{class:"vc-saturation-circle"},null,-1),Ez=[Sz];function Tz(t,e,n,a,s,d){return St(),pe("div",{ref:"container",class:"vc-saturation",style:fi({background:d.bgColor}),onMousedown:e[0]||(e[0]=(...l)=>d.handleMouseDown&&d.handleMouseDown(...l)),onTouchmove:e[1]||(e[1]=(...l)=>d.handleChange&&d.handleChange(...l)),onTouchstart:e[2]||(e[2]=(...l)=>d.handleChange&&d.handleChange(...l))},[Iz,Mz,zt("div",{class:"vc-saturation-pointer",style:fi({top:d.pointerTop,left:d.pointerLeft})},Ez,4)],36)}var Pz=".vc-saturation,.vc-saturation--black,.vc-saturation--white{bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{border-radius:50%;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);cursor:head;height:4px;transform:translate(-2px,-2px);width:4px}";Rg(Pz);mb.render=Tz;mb.__file="src/components/saturation/saturation.vue";mb.install=Dg;var gb={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){return this.value},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:`${-(this.colors.hsl.h*100/360)+100}%`:0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":`${this.colors.hsl.h*100/360}%`}},watch:{value:{handler(t,e){const{h:n}=t.hsl;n!==0&&n-this.oldHue>0&&(this.pullDirection="right"),n!==0&&n-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=n},deep:!0,immediate:!0}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:n}=this.$refs;if(!n)return;const a=n.clientWidth,s=n.clientHeight,d=n.getBoundingClientRect().left+window.pageXOffset,l=n.getBoundingClientRect().top+window.pageYOffset,o=t.pageX||(t.touches?t.touches[0].pageX:0),g=t.pageY||(t.touches?t.touches[0].pageY:0),_=o-d,I=g-l;let C,E;this.direction==="vertical"?(I<0?C=360:I>s?C=0:(E=-(I*100/s)+100,C=360*E/100),this.colors.hsl.h!==C&&this.$emit("change",{h:C,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(_<0?C=0:_>a?C=360:(E=_*100/a,C=360*E/100),this.colors.hsl.h!==C&&this.$emit("change",{h:C,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(t){this.handleChange(t,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(t){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const kz=["aria-valuenow"],Lz=zt("div",{class:"vc-hue-picker"},null,-1),Rz=[Lz];function Dz(t,e,n,a,s,d){return St(),pe("div",{class:Li(["vc-hue",[d.directionClass]])},[zt("div",{ref:"container",class:"vc-hue-container",role:"slider","aria-valuenow":d.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",onMousedown:e[0]||(e[0]=(...l)=>d.handleMouseDown&&d.handleMouseDown(...l)),onTouchmove:e[1]||(e[1]=(...l)=>d.handleChange&&d.handleChange(...l)),onTouchstart:e[2]||(e[2]=(...l)=>d.handleChange&&d.handleChange(...l))},[zt("div",{class:"vc-hue-pointer",style:fi({top:d.pointerTop,left:d.pointerLeft}),role:"presentation"},Rz,4)],40,kz)],2)}var Oz=".vc-hue{border-radius:2px;bottom:0;left:0;position:absolute;right:0;top:0}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;height:100%;margin:0 2px;position:relative}.vc-hue-pointer{position:absolute;z-index:2}.vc-hue-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";Rg(Oz);gb.render=Dz;gb.__file="src/components/hue/hue.vue";gb.install=Dg;const zz=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var yb={name:"Sketch",components:{Saturation:mb,Hue:gb,Alpha:fb,EdIn:pb,Checkboard:Xy},mixins:[vz],props:{presetColors:{type:Array,default(){return zz}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let t;return this.colors.a<1?t=this.colors.hex8:t=this.colors.hex,t.replace("#","")},activeColor(){const{rgba:t}=this.colors;return`rgba(${[t.r,t.g,t.b,t.a].join(",")})`}},methods:{handlePreset(t){this.colorChange(t)},childChange(t){this.colorChange(t)},inputChange(t){t&&(t.hex?this.isValidHex(t.hex)&&this.colorChange({hex:t.hex,source:"hex"}):(t.r||t.g||t.b||t.a)&&this.colorChange({r:t.r||this.colors.rgba.r,g:t.g||this.colors.rgba.g,b:t.b||this.colors.rgba.b,a:t.a||this.colors.rgba.a,source:"rgba"}))}}};const Fz={class:"vc-sketch-saturation-wrap"},Bz={class:"vc-sketch-controls"},Nz={class:"vc-sketch-sliders"},jz={class:"vc-sketch-hue-wrap"},Vz={key:0,class:"vc-sketch-alpha-wrap"},Uz={class:"vc-sketch-color-wrap"},Hz=["aria-label"],Gz={key:0,class:"vc-sketch-field"},$z={class:"vc-sketch-field--double"},Zz={class:"vc-sketch-field--single"},Wz={class:"vc-sketch-field--single"},qz={class:"vc-sketch-field--single"},Kz={key:0,class:"vc-sketch-field--single"},Yz={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},Xz=["aria-label","onClick"],Qz=["aria-label","onClick"];function Jz(t,e,n,a,s,d){const l=Js("Saturation"),o=Js("Hue"),g=Js("Alpha"),_=Js("Checkboard"),I=Js("EdIn");return St(),pe("div",{role:"application","aria-label":"Sketch color picker",class:Li(["vc-sketch",[n.disableAlpha?"vc-sketch__disable-alpha":""]])},[zt("div",Fz,[te(l,{value:t.colors,onChange:d.childChange},null,8,["value","onChange"])]),zt("div",Bz,[zt("div",Nz,[zt("div",jz,[te(o,{value:t.colors,onChange:d.childChange},null,8,["value","onChange"])]),n.disableAlpha?Cn("v-if",!0):(St(),pe("div",Vz,[te(g,{value:t.colors,onChange:d.childChange},null,8,["value","onChange"])]))]),zt("div",Uz,[zt("div",{"aria-label":`Current color is ${d.activeColor}`,class:"vc-sketch-active-color",style:fi({background:d.activeColor})},null,12,Hz),te(_)])]),n.disableFields?Cn("v-if",!0):(St(),pe("div",Gz,[Cn(" rgba "),zt("div",$z,[te(I,{label:"hex",value:d.hex,onChange:d.inputChange},null,8,["value","onChange"])]),zt("div",Zz,[te(I,{label:"r",value:t.colors.rgba.r,onChange:d.inputChange},null,8,["value","onChange"])]),zt("div",Wz,[te(I,{label:"g",value:t.colors.rgba.g,onChange:d.inputChange},null,8,["value","onChange"])]),zt("div",qz,[te(I,{label:"b",value:t.colors.rgba.b,onChange:d.inputChange},null,8,["value","onChange"])]),n.disableAlpha?Cn("v-if",!0):(St(),pe("div",Kz,[te(I,{label:"a",value:t.colors.a,"arrow-offset":.01,max:1,onChange:d.inputChange},null,8,["value","arrow-offset","onChange"])]))])),zt("div",Yz,[(St(!0),pe(mr,null,ki(n.presetColors,C=>(St(),pe(mr,null,[t.isTransparent(C)?(St(),pe("div",{key:C,"aria-label":`Color:${C}`,class:"vc-sketch-presets-color",onClick:E=>d.handlePreset(C)},[te(_)],8,Qz)):(St(),pe("div",{key:`!${C}`,class:"vc-sketch-presets-color","aria-label":`Color:${C}`,style:fi({background:C}),onClick:E=>d.handlePreset(C)},null,12,Xz))],64))),256))])],2)}var tF=".vc-sketch{background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;padding:10px 10px 0;position:relative;width:200px}.vc-sketch-saturation-wrap{overflow:hidden;padding-bottom:75%;position:relative;width:100%}.vc-sketch-controls{display:flex}.vc-sketch-sliders{flex:1;padding:4px 0}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{height:10px;position:relative}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{border-radius:3px;height:24px;margin-left:4px;margin-top:4px;position:relative;width:24px}.vc-sketch-active-color{border-radius:2px;bottom:0;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);left:0;position:absolute;right:0;top:0;z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px;padding:4px 0 3px 10%;width:90%}.vc-sketch-field .vc-input__label{color:#222;display:block;font-size:11px;padding-bottom:4px;padding-top:3px;text-align:center;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{border-top:1px solid #eee;margin-left:-10px;margin-right:-10px;padding-left:10px;padding-top:10px}.vc-sketch-presets-color{cursor:pointer;display:inline-block;height:16px;margin:0 10px 10px 0;overflow:hidden;position:relative;vertical-align:top;width:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}";Rg(tF);yb.render=Jz;yb.__file="src/components/sketch/sketch.vue";yb.install=Dg;const eF={class:"form-group"},nF={key:0},rF={class:"input-container"},iF=rr({__name:"input-colorPicker",props:to({label:String,disabled:Boolean},{modelValue:{default:"#000000"},modelModifiers:{}}),emits:to(["change"],["update:modelValue"]),setup(t,{emit:e}){const n=la(t,"modelValue"),a=e;function s({hex:d}){n.value=d,a("change",d)}return(d,l)=>(St(),pe("div",eF,[t.label?(St(),pe("label",nF,Rn(t.label),1)):Cn("",!0),zt("div",rF,[te(ct(yb),Tr({modelValue:n.value},d.$attrs,{"onUpdate:modelValue":s,disabled:t.disabled}),null,16,["modelValue","disabled"])])]))}});var A1={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */A1.exports;(function(t,e){(function(){var n,a="4.17.21",s=200,d="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",o="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",_=500,I="__lodash_placeholder__",C=1,E=2,S=4,k=1,D=2,N=1,U=2,F=4,j=8,$=16,K=32,tt=64,it=128,et=256,q=512,ut=30,Ct="...",ot=800,bt=16,X=1,Wt=2,Vt=3,Bt=1/0,ae=9007199254740991,ye=17976931348623157e292,en=NaN,Jt=4294967295,Gt=Jt-1,Re=Jt>>>1,$e=[["ary",it],["bind",N],["bindKey",U],["curry",j],["curryRight",$],["flip",q],["partial",K],["partialRight",tt],["rearg",et]],Ce="[object Arguments]",nn="[object Array]",be="[object AsyncFunction]",Me="[object Boolean]",xe="[object Date]",Be="[object DOMException]",Je="[object Error]",Ln="[object Function]",Tt="[object GeneratorFunction]",H="[object Map]",Rt="[object Number]",Pt="[object Null]",gt="[object Object]",yt="[object Promise]",jt="[object Proxy]",ee="[object RegExp]",ue="[object Set]",Ut="[object String]",Ie="[object Symbol]",je="[object Undefined]",Le="[object WeakMap]",Ke="[object WeakSet]",_n="[object ArrayBuffer]",wn="[object DataView]",de="[object Float32Array]",ve="[object Float64Array]",Te="[object Int8Array]",Ye="[object Int16Array]",un="[object Int32Array]",Nn="[object Uint8Array]",oe="[object Uint8ClampedArray]",ht="[object Uint16Array]",mt="[object Uint32Array]",wt=/\b__p \+= '';/g,kt=/\b(__p \+=) '' \+/g,vt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ie=/&(?:amp|lt|gt|quot|#39);/g,he=/[&<>"']/g,Kt=RegExp(ie.source),Fe=RegExp(he.source),Ve=/<%-([\s\S]+?)%>/g,we=/<%([\s\S]+?)%>/g,rn=/<%=([\s\S]+?)%>/g,Sn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,En=/^\w*$/,ir=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gr=/[\\^$.*+?()[\]{}|]/g,Ue=RegExp(gr.source),Gn=/^\s+/,Fr=/\s/,Yr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pr=/\{\n\/\* \[wrapped with (.+)\] \*/,Ze=/,? & /,zn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Jn=/[()=,{}\[\]\/\s]/,eo=/\\(\\)?/g,Eo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pi=/\w*$/,Xn=/^[-+]0x[0-9a-f]+$/i,tu=/^0b[01]+$/i,Pl=/^\[object .+?Constructor\]$/,Uu=/^0o[0-7]+$/i,Ms=/^(?:0|[1-9]\d*)$/,Hu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ri=/($^)/,mi=/['\n\r\u2028\u2029\\]/g,wi="\\ud800-\\udfff",kl="\\u0300-\\u036f",Ac="\\ufe20-\\ufe2f",ri="\\u20d0-\\u20ff",Ss=kl+Ac+ri,Gu="\\u2700-\\u27bf",us="a-z\\xdf-\\xf6\\xf8-\\xff",Ma="\\xac\\xb1\\xd7\\xf7",Es="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ts="\\u2000-\\u206f",Ll=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Sh="A-Z\\xc0-\\xd6\\xd8-\\xde",wd="\\ufe0e\\ufe0f",Eh=Ma+Es+Ts+Ll,$u="['’]",Zu="["+wi+"]",wc="["+Eh+"]",Rl="["+Ss+"]",Ps="\\d+",Th="["+Gu+"]",eu="["+us+"]",Dl="[^"+wi+Eh+Ps+Gu+us+Sh+"]",Ua="\\ud83c[\\udffb-\\udfff]",O="(?:"+Rl+"|"+Ua+")",W="[^"+wi+"]",xt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ht="[\\ud800-\\udbff][\\udc00-\\udfff]",$t="["+Sh+"]",Xt="\\u200d",_e="(?:"+eu+"|"+Dl+")",cn="(?:"+$t+"|"+Dl+")",dn="(?:"+$u+"(?:d|ll|m|re|s|t|ve))?",An="(?:"+$u+"(?:D|LL|M|RE|S|T|VE))?",mn=O+"?",Mn="["+wd+"]?",Kn="(?:"+Xt+"(?:"+[W,xt,Ht].join("|")+")"+Mn+mn+")*",Zr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",or="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ai=Mn+mn+Kn,on="(?:"+[Th,xt,Ht].join("|")+")"+ai,kn="(?:"+[W+Rl+"?",Rl,xt,Ht,Zu].join("|")+")",Rr=RegExp($u,"g"),bi=RegExp(Rl,"g"),gi=RegExp(Ua+"(?="+Ua+")|"+kn+ai,"g"),Jo=RegExp([$t+"?"+eu+"+"+dn+"(?="+[wc,$t,"$"].join("|")+")",cn+"+"+An+"(?="+[wc,$t+_e,"$"].join("|")+")",$t+"?"+_e+"+"+dn,$t+"+"+An,or,Zr,Ps,on].join("|"),"g"),nu=RegExp("["+Xt+wi+Ss+wd+"]"),ur=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wr=-1,Fn={};Fn[de]=Fn[ve]=Fn[Te]=Fn[Ye]=Fn[un]=Fn[Nn]=Fn[oe]=Fn[ht]=Fn[mt]=!0,Fn[Ce]=Fn[nn]=Fn[_n]=Fn[Me]=Fn[wn]=Fn[xe]=Fn[Je]=Fn[Ln]=Fn[H]=Fn[Rt]=Fn[gt]=Fn[ee]=Fn[ue]=Fn[Ut]=Fn[Le]=!1;var Xr={};Xr[Ce]=Xr[nn]=Xr[_n]=Xr[wn]=Xr[Me]=Xr[xe]=Xr[de]=Xr[ve]=Xr[Te]=Xr[Ye]=Xr[un]=Xr[H]=Xr[Rt]=Xr[gt]=Xr[ee]=Xr[ue]=Xr[Ut]=Xr[Ie]=Xr[Nn]=Xr[oe]=Xr[ht]=Xr[mt]=!0,Xr[Je]=Xr[Ln]=Xr[Le]=!1;var Dr={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Cc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ca={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ol={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ru=parseFloat,qu=parseInt,zl=typeof Io=="object"&&Io&&Io.Object===Object&&Io,iu=typeof self=="object"&&self&&self.Object===Object&&self,Fi=zl||iu||Function("return this")(),ou=e&&!e.nodeType&&e,Ha=ou&&!0&&t&&!t.nodeType&&t,Fl=Ha&&Ha.exports===ou,no=Fl&&zl.process,ro=function(){try{var me=Ha&&Ha.require&&Ha.require("util").types;return me||no&&no.binding&&no.binding("util")}catch{}}(),go=ro&&ro.isArrayBuffer,nl=ro&&ro.isDate,Br=ro&&ro.isMap,Bl=ro&&ro.isRegExp,Ic=ro&&ro.isSet,Ku=ro&&ro.isTypedArray;function Xi(me,We,ze){switch(ze.length){case 0:return me.call(We);case 1:return me.call(We,ze[0]);case 2:return me.call(We,ze[0],ze[1]);case 3:return me.call(We,ze[0],ze[1],ze[2])}return me.apply(We,ze)}function Nl(me,We,ze,Tn){for(var nr=-1,br=me==null?0:me.length;++nr<br;){var xr=me[nr];We(Tn,xr,ze(xr),me)}return Tn}function Vo(me,We){for(var ze=-1,Tn=me==null?0:me.length;++ze<Tn&&We(me[ze],ze,me)!==!1;);return me}function Cd(me,We){for(var ze=me==null?0:me.length;ze--&&We(me[ze],ze,me)!==!1;);return me}function au(me,We){for(var ze=-1,Tn=me==null?0:me.length;++ze<Tn;)if(!We(me[ze],ze,me))return!1;return!0}function yo(me,We){for(var ze=-1,Tn=me==null?0:me.length,nr=0,br=[];++ze<Tn;){var xr=me[ze];We(xr,ze,me)&&(br[nr++]=xr)}return br}function Uo(me,We){var ze=me==null?0:me.length;return!!ze&&hs(me,We,0)>-1}function jl(me,We,ze){for(var Tn=-1,nr=me==null?0:me.length;++Tn<nr;)if(ze(We,me[Tn]))return!0;return!1}function ii(me,We){for(var ze=-1,Tn=me==null?0:me.length,nr=Array(Tn);++ze<Tn;)nr[ze]=We(me[ze],ze,me);return nr}function ua(me,We){for(var ze=-1,Tn=We.length,nr=me.length;++ze<Tn;)me[nr+ze]=We[ze];return me}function Ga(me,We,ze,Tn){var nr=-1,br=me==null?0:me.length;for(Tn&&br&&(ze=me[++nr]);++nr<br;)ze=We(ze,me[nr],nr,me);return ze}function su(me,We,ze,Tn){var nr=me==null?0:me.length;for(Tn&&nr&&(ze=me[--nr]);nr--;)ze=We(ze,me[nr],nr,me);return ze}function ta(me,We){for(var ze=-1,Tn=me==null?0:me.length;++ze<Tn;)if(We(me[ze],ze,me))return!0;return!1}var Ph=ds("length");function Vl(me){return me.split("")}function rl(me){return me.match(zn)||[]}function Mc(me,We,ze){var Tn;return ze(me,function(nr,br,xr){if(We(nr,br,xr))return Tn=br,!1}),Tn}function lu(me,We,ze,Tn){for(var nr=me.length,br=ze+(Tn?1:-1);Tn?br--:++br<nr;)if(We(me[br],br,me))return br;return-1}function hs(me,We,ze){return We===We?Rh(me,We,ze):lu(me,ks,ze)}function Bf(me,We,ze,Tn){for(var nr=ze-1,br=me.length;++nr<br;)if(Tn(me[nr],We))return nr;return-1}function ks(me){return me!==me}function Yu(me,We){var ze=me==null?0:me.length;return ze?Sa(me,We)/ze:en}function ds(me){return function(We){return We==null?n:We[me]}}function $a(me){return function(We){return me==null?n:me[We]}}function Ls(me,We,ze,Tn,nr){return nr(me,function(br,xr,Gr){ze=Tn?(Tn=!1,br):We(ze,br,xr,Gr)}),ze}function Sc(me,We){var ze=me.length;for(me.sort(We);ze--;)me[ze]=me[ze].value;return me}function Sa(me,We){for(var ze,Tn=-1,nr=me.length;++Tn<nr;){var br=We(me[Tn]);br!==n&&(ze=ze===n?br:ze+br)}return ze}function cu(me,We){for(var ze=-1,Tn=Array(me);++ze<me;)Tn[ze]=We(ze);return Tn}function Ec(me,We){return ii(We,function(ze){return[ze,me[ze]]})}function Ul(me){return me&&me.slice(0,Ae(me)+1).replace(Gn,"")}function Zi(me){return function(We){return me(We)}}function uu(me,We){return ii(We,function(ze){return me[ze]})}function il(me,We){return me.has(We)}function Tc(me,We){for(var ze=-1,Tn=me.length;++ze<Tn&&hs(We,me[ze],0)>-1;);return ze}function kh(me,We){for(var ze=me.length;ze--&&hs(We,me[ze],0)>-1;);return ze}function hu(me,We){for(var ze=me.length,Tn=0;ze--;)me[ze]===We&&++Tn;return Tn}var du=$a(Dr),Hl=$a(Cc);function Id(me){return"\\"+Ol[me]}function Rs(me,We){return me==null?n:me[We]}function ol(me){return nu.test(me)}function fs(me){return ur.test(me)}function Lh(me){for(var We,ze=[];!(We=me.next()).done;)ze.push(We.value);return ze}function Pc(me){var We=-1,ze=Array(me.size);return me.forEach(function(Tn,nr){ze[++We]=[nr,Tn]}),ze}function ha(me,We){return function(ze){return me(We(ze))}}function da(me,We){for(var ze=-1,Tn=me.length,nr=0,br=[];++ze<Tn;){var xr=me[ze];(xr===We||xr===I)&&(me[ze]=I,br[nr++]=ze)}return br}function Gl(me){var We=-1,ze=Array(me.size);return me.forEach(function(Tn){ze[++We]=Tn}),ze}function Xu(me){var We=-1,ze=Array(me.size);return me.forEach(function(Tn){ze[++We]=[Tn,Tn]}),ze}function Rh(me,We,ze){for(var Tn=ze-1,nr=me.length;++Tn<nr;)if(me[Tn]===We)return Tn;return-1}function $l(me,We,ze){for(var Tn=ze+1;Tn--;)if(me[Tn]===We)return Tn;return Tn}function _r(me){return ol(me)?Dn(me):Ph(me)}function fa(me){return ol(me)?sr(me):Vl(me)}function Ae(me){for(var We=me.length;We--&&Fr.test(me.charAt(We)););return We}var qe=$a(ca);function Dn(me){for(var We=gi.lastIndex=0;gi.test(me);)++We;return We}function sr(me){return me.match(gi)||[]}function yi(me){return me.match(Jo)||[]}var Hr=function me(We){We=We==null?Fi:si.defaults(Fi.Object(),We,si.pick(Fi,Wu));var ze=We.Array,Tn=We.Date,nr=We.Error,br=We.Function,xr=We.Math,Gr=We.Object,Ds=We.RegExp,kc=We.String,Di=We.TypeError,Za=ze.prototype,fu=br.prototype,ps=Gr.prototype,Zl=We["__core-js_shared__"],Jr=fu.toString,tr=ps.hasOwnProperty,Os=0,ms=function(){var m=/[^.]+$/.exec(Zl&&Zl.keys&&Zl.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),al=ps.toString,vr=Jr.call(Gr),Ea=Fi._,sl=Ds("^"+Jr.call(tr).replace(gr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wa=Fl?We.Buffer:n,Ho=We.Symbol,zs=We.Uint8Array,ll=Wa?Wa.allocUnsafe:n,Wl=ha(Gr.getPrototypeOf,Gr),pu=Gr.create,Lc=ps.propertyIsEnumerable,pa=Za.splice,Fs=Ho?Ho.isConcatSpreadable:n,cl=Ho?Ho.iterator:n,Ta=Ho?Ho.toStringTag:n,ul=function(){try{var m=wu(Gr,"defineProperty");return m({},"",{}),m}catch{}}(),Md=We.clearTimeout!==Fi.clearTimeout&&We.clearTimeout,Sd=Tn&&Tn.now!==Fi.Date.now&&Tn.now,Ed=We.setTimeout!==Fi.setTimeout&&We.setTimeout,Dh=xr.ceil,Qu=xr.floor,Nf=Gr.getOwnPropertySymbols,jf=Wa?Wa.isBuffer:n,Ju=We.isFinite,Td=Za.join,Vf=ha(Gr.keys,Gr),Wi=xr.max,Qi=xr.min,Oh=Tn.now,Pd=We.parseInt,Uf=xr.random,qi=Za.reverse,ql=wu(We,"DataView"),ea=wu(We,"Map"),zh=wu(We,"Promise"),Rc=wu(We,"Set"),mu=wu(We,"WeakMap"),Bs=wu(Gr,"create"),Ns=mu&&new mu,Dc={},Hf=dh(ql),Gf=dh(ea),Yp=dh(zh),$f=dh(Rc),Zf=dh(mu),Pa=Ho?Ho.prototype:n,th=Pa?Pa.valueOf:n,Wf=Pa?Pa.toString:n;function Mt(m){if(Gi(m)&&!Er(m)&&!(m instanceof kr)){if(m instanceof qa)return m;if(tr.call(m,"__wrapped__"))return vv(m)}return new qa(m)}var gu=function(){function m(){}return function(x){if(!Ki(x))return{};if(pu)return pu(x);m.prototype=x;var R=new m;return m.prototype=n,R}}();function Fh(){}function qa(m,x){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!x,this.__index__=0,this.__values__=n}Mt.templateSettings={escape:Ve,evaluate:we,interpolate:rn,variable:"",imports:{_:Mt}},Mt.prototype=Fh.prototype,Mt.prototype.constructor=Mt,qa.prototype=gu(Fh.prototype),qa.prototype.constructor=qa;function kr(m){this.__wrapped__=m,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Jt,this.__views__=[]}function Oc(){var m=new kr(this.__wrapped__);return m.__actions__=va(this.__actions__),m.__dir__=this.__dir__,m.__filtered__=this.__filtered__,m.__iteratees__=va(this.__iteratees__),m.__takeCount__=this.__takeCount__,m.__views__=va(this.__views__),m}function ka(){if(this.__filtered__){var m=new kr(this);m.__dir__=-1,m.__filtered__=!0}else m=this.clone(),m.__dir__*=-1;return m}function ma(){var m=this.__wrapped__.value(),x=this.__dir__,R=Er(m),Q=x<0,pt=R?m.length:0,Lt=Nb(0,pt,this.__views__),re=Lt.start,ge=Lt.end,Pe=ge-re,hn=Q?ge:re-1,fn=this.__iteratees__,xn=fn.length,Un=0,dr=Qi(Pe,this.__takeCount__);if(!R||!Q&&pt==Pe&&dr==Pe)return $o(m,this.__actions__);var wr=[];t:for(;Pe--&&Un<dr;){hn+=x;for(var qr=-1,Cr=m[hn];++qr<xn;){var ei=fn[qr],oi=ei.iteratee,sc=ei.type,Ks=oi(Cr);if(sc==Wt)Cr=Ks;else if(!Ks){if(sc==X)continue t;break t}}wr[Un++]=Cr}return wr}kr.prototype=gu(Fh.prototype),kr.prototype.constructor=kr;function Go(m){var x=-1,R=m==null?0:m.length;for(this.clear();++x<R;){var Q=m[x];this.set(Q[0],Q[1])}}function Xp(){this.__data__=Bs?Bs(null):{},this.size=0}function hl(m){var x=this.has(m)&&delete this.__data__[m];return this.size-=x?1:0,x}function dl(m){var x=this.__data__;if(Bs){var R=x[m];return R===g?n:R}return tr.call(x,m)?x[m]:n}function Qp(m){var x=this.__data__;return Bs?x[m]!==n:tr.call(x,m)}function qf(m,x){var R=this.__data__;return this.size+=this.has(m)?0:1,R[m]=Bs&&x===n?g:x,this}Go.prototype.clear=Xp,Go.prototype.delete=hl,Go.prototype.get=dl,Go.prototype.has=Qp,Go.prototype.set=qf;function Kl(m){var x=-1,R=m==null?0:m.length;for(this.clear();++x<R;){var Q=m[x];this.set(Q[0],Q[1])}}function Kf(){this.__data__=[],this.size=0}function Jp(m){var x=this.__data__,R=zc(x,m);if(R<0)return!1;var Q=x.length-1;return R==Q?x.pop():pa.call(x,R,1),--this.size,!0}function Yl(m){var x=this.__data__,R=zc(x,m);return R<0?n:x[R][1]}function Xl(m){return zc(this.__data__,m)>-1}function On(m,x){var R=this.__data__,Q=zc(R,m);return Q<0?(++this.size,R.push([m,x])):R[Q][1]=x,this}Kl.prototype.clear=Kf,Kl.prototype.delete=Jp,Kl.prototype.get=Yl,Kl.prototype.has=Xl,Kl.prototype.set=On;function fl(m){var x=-1,R=m==null?0:m.length;for(this.clear();++x<R;){var Q=m[x];this.set(Q[0],Q[1])}}function Yf(){this.size=0,this.__data__={hash:new Go,map:new(ea||Kl),string:new Go}}function Bh(m){var x=dm(this,m).delete(m);return this.size-=x?1:0,x}function Nh(m){return dm(this,m).get(m)}function yu(m){return dm(this,m).has(m)}function jh(m,x){var R=dm(this,m),Q=R.size;return R.set(m,x),this.size+=R.size==Q?0:1,this}fl.prototype.clear=Yf,fl.prototype.delete=Bh,fl.prototype.get=Nh,fl.prototype.has=yu,fl.prototype.set=jh;function Ar(m){var x=-1,R=m==null?0:m.length;for(this.__data__=new fl;++x<R;)this.add(m[x])}function kd(m){return this.__data__.set(m,g),this}function tm(m){return this.__data__.has(m)}Ar.prototype.add=Ar.prototype.push=kd,Ar.prototype.has=tm;function La(m){var x=this.__data__=new Kl(m);this.size=x.size}function Xf(){this.__data__=new Kl,this.size=0}function em(m){var x=this.__data__,R=x.delete(m);return this.size=x.size,R}function nm(m){return this.__data__.get(m)}function Ld(m){return this.__data__.has(m)}function rm(m,x){var R=this.__data__;if(R instanceof Kl){var Q=R.__data__;if(!ea||Q.length<s-1)return Q.push([m,x]),this.size=++R.size,this;R=this.__data__=new fl(Q)}return R.set(m,x),this.size=R.size,this}La.prototype.clear=Xf,La.prototype.delete=em,La.prototype.get=nm,La.prototype.has=Ld,La.prototype.set=rm;function Qf(m,x){var R=Er(m),Q=!R&&ph(m),pt=!R&&!Q&&Ja(m),Lt=!R&&!Q&&!pt&&Yh(m),re=R||Q||pt||Lt,ge=re?cu(m.length,kc):[],Pe=ge.length;for(var hn in m)(x||tr.call(m,hn))&&!(re&&(hn=="length"||pt&&(hn=="offset"||hn=="parent")||Lt&&(hn=="buffer"||hn=="byteLength"||hn=="byteOffset")||Cu(hn,Pe)))&&ge.push(hn);return ge}function Rd(m){var x=m.length;return x?m[le(0,x-1)]:n}function im(m,x){return hh(va(m),na(x,0,m.length))}function Bg(m){return hh(va(m))}function pl(m,x,R){(R!==n&&!Fa(m[x],R)||R===n&&!(x in m))&&ml(m,x,R)}function li(m,x,R){var Q=m[x];(!(tr.call(m,x)&&Fa(Q,R))||R===n&&!(x in m))&&ml(m,x,R)}function zc(m,x){for(var R=m.length;R--;)if(Fa(m[R][0],x))return R;return-1}function Dd(m,x,R,Q){return gl(m,function(pt,Lt,re){x(Q,pt,R(pt),re)}),Q}function Od(m,x){return m&&vs(x,at(x),m)}function Vh(m,x){return m&&vs(x,It(x),m)}function ml(m,x,R){x=="__proto__"&&ul?ul(m,x,{configurable:!0,enumerable:!0,value:R,writable:!0}):m[x]=R}function Uh(m,x){for(var R=-1,Q=x.length,pt=ze(Q),Lt=m==null;++R<Q;)pt[R]=Lt?n:dt(m,x[R]);return pt}function na(m,x,R){return m===m&&(R!==n&&(m=m<=R?m:R),x!==n&&(m=m>=x?m:x)),m}function ga(m,x,R,Q,pt,Lt){var re,ge=x&C,Pe=x&E,hn=x&S;if(R&&(re=pt?R(m,Q,pt,Lt):R(m)),re!==n)return re;if(!Ki(m))return m;var fn=Er(m);if(fn){if(re=Vb(m),!ge)return va(m,re)}else{var xn=To(m),Un=xn==Ln||xn==Tt;if(Ja(m))return Jl(m,ge);if(xn==gt||xn==Ce||Un&&!pt){if(re=Pe||Un?{}:dv(m),!ge)return Pe?Ya(m,Vh(re,m)):lm(m,Od(re,m))}else{if(!Xr[xn])return pt?m:{};re=Ub(m,xn,ge)}}Lt||(Lt=new La);var dr=Lt.get(m);if(dr)return dr;Lt.set(m,re),Sm(m)?m.forEach(function(Cr){re.add(ga(Cr,x,R,Cr,m,Lt))}):Ap(m)&&m.forEach(function(Cr,ei){re.set(ei,ga(Cr,x,R,ei,m,Lt))});var wr=hn?Pe?sp:hm:Pe?It:at,qr=fn?n:wr(m);return Vo(qr||m,function(Cr,ei){qr&&(ei=Cr,Cr=m[ei]),li(re,ei,ga(Cr,x,R,ei,m,Lt))}),re}function Yn(m){var x=at(m);return function(R){return lr(R,m,x)}}function lr(m,x,R){var Q=R.length;if(m==null)return!Q;for(m=Gr(m);Q--;){var pt=R[Q],Lt=x[pt],re=m[pt];if(re===n&&!(pt in m)||!Lt(re))return!1}return!0}function eh(m,x,R){if(typeof m!="function")throw new Di(l);return Zd(function(){m.apply(n,R)},x)}function vu(m,x,R,Q){var pt=-1,Lt=Uo,re=!0,ge=m.length,Pe=[],hn=x.length;if(!ge)return Pe;R&&(x=ii(x,Zi(R))),Q?(Lt=jl,re=!1):x.length>=s&&(Lt=il,re=!1,x=new Ar(x));t:for(;++pt<ge;){var fn=m[pt],xn=R==null?fn:R(fn);if(fn=Q||fn!==0?fn:0,re&&xn===xn){for(var Un=hn;Un--;)if(x[Un]===xn)continue t;Pe.push(fn)}else Lt(x,xn,Q)||Pe.push(fn)}return Pe}var gl=tp(Ra),ya=tp(ih,!0);function om(m,x){var R=!0;return gl(m,function(Q,pt,Lt){return R=!!x(Q,pt,Lt),R}),R}function Ka(m,x,R){for(var Q=-1,pt=m.length;++Q<pt;){var Lt=m[Q],re=x(Lt);if(re!=null&&(ge===n?re===re&&!_s(re):R(re,ge)))var ge=re,Pe=Lt}return Pe}function nh(m,x,R,Q){var pt=m.length;for(R=Or(R),R<0&&(R=-R>pt?0:pt+R),Q=Q===n||Q>pt?pt:Or(Q),Q<0&&(Q+=pt),Q=R>Q?0:Tm(Q);R<Q;)m[R++]=x;return m}function rh(m,x){var R=[];return gl(m,function(Q,pt,Lt){x(Q,pt,Lt)&&R.push(Q)}),R}function Nr(m,x,R,Q,pt){var Lt=-1,re=m.length;for(R||(R=Qg),pt||(pt=[]);++Lt<re;){var ge=m[Lt];x>0&&R(ge)?x>1?Nr(ge,x-1,R,Q,pt):ua(pt,ge):Q||(pt[pt.length]=ge)}return pt}var Vi=sh(),zd=sh(!0);function Ra(m,x){return m&&Vi(m,x,at)}function ih(m,x){return m&&zd(m,x,at)}function gs(m,x){return yo(x,function(R){return Zs(m[R])})}function yl(m,x){x=Zo(x,m);for(var R=0,Q=x.length;m!=null&&R<Q;)m=m[ec(x[R++])];return R&&R==Q?m:n}function oh(m,x,R){var Q=x(m);return Er(m)?Q:ua(Q,R(m))}function io(m){return m==null?m===n?je:Pt:Ta&&Ta in Gr(m)?Xg(m):Jg(m)}function _u(m,x){return m>x}function Jf(m,x){return m!=null&&tr.call(m,x)}function ah(m,x){return m!=null&&x in Gr(m)}function bu(m,x,R){return m>=Qi(x,R)&&m<Wi(x,R)}function Hh(m,x,R){for(var Q=R?jl:Uo,pt=m[0].length,Lt=m.length,re=Lt,ge=ze(Lt),Pe=1/0,hn=[];re--;){var fn=m[re];re&&x&&(fn=ii(fn,Zi(x))),Pe=Qi(fn.length,Pe),ge[re]=!R&&(x||pt>=120&&fn.length>=120)?new Ar(re&&fn):n}fn=m[0];var xn=-1,Un=ge[0];t:for(;++xn<pt&&hn.length<Pe;){var dr=fn[xn],wr=x?x(dr):dr;if(dr=R||dr!==0?dr:0,!(Un?il(Un,wr):Q(hn,wr,R))){for(re=Lt;--re;){var qr=ge[re];if(!(qr?il(qr,wr):Q(m[re],wr,R)))continue t}Un&&Un.push(wr),hn.push(dr)}}return hn}function Fd(m,x,R,Q){return Ra(m,function(pt,Lt,re){x(Q,R(pt),Lt,re)}),Q}function js(m,x,R){x=Zo(x,m),m=hp(m,x);var Q=m==null?m:m[ec(vl(x))];return Q==null?n:Xi(Q,m,R)}function Bd(m){return Gi(m)&&io(m)==Ce}function Nd(m){return Gi(m)&&io(m)==_n}function jd(m){return Gi(m)&&io(m)==xe}function xu(m,x,R,Q,pt){return m===x?!0:m==null||x==null||!Gi(m)&&!Gi(x)?m!==m&&x!==x:b(m,x,R,Q,xu,pt)}function b(m,x,R,Q,pt,Lt){var re=Er(m),ge=Er(x),Pe=re?nn:To(m),hn=ge?nn:To(x);Pe=Pe==Ce?gt:Pe,hn=hn==Ce?gt:hn;var fn=Pe==gt,xn=hn==gt,Un=Pe==hn;if(Un&&Ja(m)){if(!Ja(x))return!1;re=!0,fn=!1}if(Un&&!fn)return Lt||(Lt=new La),re||Yh(m)?Wg(m,x,R,Q,pt,Lt):qg(m,x,Pe,R,Q,pt,Lt);if(!(R&k)){var dr=fn&&tr.call(m,"__wrapped__"),wr=xn&&tr.call(x,"__wrapped__");if(dr||wr){var qr=dr?m.value():m,Cr=wr?x.value():x;return Lt||(Lt=new La),pt(qr,Cr,R,Q,Lt)}}return Un?(Lt||(Lt=new La),ap(m,x,R,Q,pt,Lt)):!1}function r(m){return Gi(m)&&To(m)==H}function c(m,x,R,Q){var pt=R.length,Lt=pt,re=!Q;if(m==null)return!Lt;for(m=Gr(m);pt--;){var ge=R[pt];if(re&&ge[2]?ge[1]!==m[ge[0]]:!(ge[0]in m))return!1}for(;++pt<Lt;){ge=R[pt];var Pe=ge[0],hn=m[Pe],fn=ge[1];if(re&&ge[2]){if(hn===n&&!(Pe in m))return!1}else{var xn=new La;if(Q)var Un=Q(hn,fn,Pe,m,x,xn);if(!(Un===n?xu(fn,hn,k|D,Q,xn):Un))return!1}}return!0}function p(m){if(!Ki(m)||Hd(m))return!1;var x=Zs(m)?sl:Pl;return x.test(dh(m))}function y(m){return Gi(m)&&io(m)==ee}function A(m){return Gi(m)&&To(m)==ue}function T(m){return Gi(m)&&qh(m.length)&&!!Fn[io(m)]}function L(m){return typeof m=="function"?m:m==null?ba:typeof m=="object"?Er(m)?ft(m[0],m[1]):rt(m):hC(m)}function B(m){if(!uh(m))return Vf(m);var x=[];for(var R in Gr(m))tr.call(m,R)&&R!="constructor"&&x.push(R);return x}function G(m){if(!Ki(m))return up(m);var x=uh(m),R=[];for(var Q in m)Q=="constructor"&&(x||!tr.call(m,Q))||R.push(Q);return R}function Y(m,x){return m<x}function nt(m,x){var R=-1,Q=Qa(m)?ze(m.length):[];return gl(m,function(pt,Lt,re){Q[++R]=x(pt,Lt,re)}),Q}function rt(m){var x=Yg(m);return x.length==1&&x[0][2]?Gd(x[0][0],x[0][1]):function(R){return R===m||c(R,m,x)}}function ft(m,x){return $h(m)&&cp(x)?Gd(ec(m),x):function(R){var Q=dt(R,m);return Q===n&&Q===x?Et(R,m):xu(x,Q,k|D)}}function _t(m,x,R,Q,pt){m!==x&&Vi(x,function(Lt,re){if(pt||(pt=new La),Ki(Lt))Ot(m,x,re,R,_t,Q,pt);else{var ge=Q?Q(Wh(m,re),Lt,re+"",m,x,pt):n;ge===n&&(ge=Lt),pl(m,re,ge)}},It)}function Ot(m,x,R,Q,pt,Lt,re){var ge=Wh(m,R),Pe=Wh(x,R),hn=re.get(Pe);if(hn){pl(m,R,hn);return}var fn=Lt?Lt(ge,Pe,R+"",m,x,re):n,xn=fn===n;if(xn){var Un=Er(Pe),dr=!Un&&Ja(Pe),wr=!Un&&!dr&&Yh(Pe);fn=Pe,Un||dr||wr?Er(ge)?fn=ge:bo(ge)?fn=va(ge):dr?(xn=!1,fn=Jl(Pe,!0)):wr?(xn=!1,fn=Ui(Pe,!0)):fn=[]:Kh(Pe)||ph(Pe)?(fn=ge,ph(ge)?fn=Jd(ge):(!Ki(ge)||Zs(ge))&&(fn=dv(Pe))):xn=!1}xn&&(re.set(Pe,fn),pt(fn,Pe,Q,Lt,re),re.delete(Pe)),pl(m,R,fn)}function Dt(m,x){var R=m.length;if(R)return x+=x<0?R:0,Cu(x,R)?m[x]:n}function Ft(m,x,R){x.length?x=ii(x,function(Lt){return Er(Lt)?function(re){return yl(re,Lt.length===1?Lt[0]:Lt)}:Lt}):x=[ba];var Q=-1;x=ii(x,Zi(yr()));var pt=nt(m,function(Lt,re,ge){var Pe=ii(x,function(hn){return hn(Lt)});return{criteria:Pe,index:++Q,value:Lt}});return Sc(pt,function(Lt,re){return am(Lt,re,R)})}function Zt(m,x){return Qt(m,x,function(R,Q){return Et(m,Q)})}function Qt(m,x,R){for(var Q=-1,pt=x.length,Lt={};++Q<pt;){var re=x[Q],ge=yl(m,re);R(ge,re)&&In(Lt,Zo(re,m),ge)}return Lt}function ne(m){return function(x){return yl(x,m)}}function se(m,x,R,Q){var pt=Q?Bf:hs,Lt=-1,re=x.length,ge=m;for(m===x&&(x=va(x)),R&&(ge=ii(m,Zi(R)));++Lt<re;)for(var Pe=0,hn=x[Lt],fn=R?R(hn):hn;(Pe=pt(ge,fn,Pe,Q))>-1;)ge!==m&&pa.call(ge,Pe,1),pa.call(m,Pe,1);return m}function fe(m,x){for(var R=m?x.length:0,Q=R-1;R--;){var pt=x[R];if(R==Q||pt!==Lt){var Lt=pt;Cu(pt)?pa.call(m,pt,1):oo(m,pt)}}return m}function le(m,x){return m+Qu(Uf()*(x-m+1))}function ke(m,x,R,Q){for(var pt=-1,Lt=Wi(Dh((x-m)/(R||1)),0),re=ze(Lt);Lt--;)re[Q?Lt:++pt]=m,m+=R;return re}function De(m,x){var R="";if(!m||x<1||x>ae)return R;do x%2&&(R+=m),x=Qu(x/2),x&&(m+=m);while(x);return R}function Ee(m,x){return Iu(Zh(m,x,ba),m+"")}function Qe(m){return Rd(oa(m))}function Ge(m,x){var R=oa(m);return hh(R,na(x,0,R.length))}function In(m,x,R,Q){if(!Ki(m))return m;x=Zo(x,m);for(var pt=-1,Lt=x.length,re=Lt-1,ge=m;ge!=null&&++pt<Lt;){var Pe=ec(x[pt]),hn=R;if(Pe==="__proto__"||Pe==="constructor"||Pe==="prototype")return m;if(pt!=re){var fn=ge[Pe];hn=Q?Q(fn,Pe,ge):n,hn===n&&(hn=Ki(fn)?fn:Cu(x[pt+1])?[]:{})}li(ge,Pe,hn),ge=ge[Pe]}return m}var yn=Ns?function(m,x){return Ns.set(m,x),m}:ba,an=ul?function(m,x){return ul(m,"toString",{configurable:!0,enumerable:!1,value:O0(x),writable:!0})}:ba;function Zn(m){return hh(oa(m))}function fr(m,x,R){var Q=-1,pt=m.length;x<0&&(x=-x>pt?0:pt+x),R=R>pt?pt:R,R<0&&(R+=pt),pt=x>R?0:R-x>>>0,x>>>=0;for(var Lt=ze(pt);++Q<pt;)Lt[Q]=m[Q+x];return Lt}function pr(m,x){var R;return gl(m,function(Q,pt,Lt){return R=x(Q,pt,Lt),!R}),!!R}function vi(m,x,R){var Q=0,pt=m==null?Q:m.length;if(typeof x=="number"&&x===x&&pt<=Re){for(;Q<pt;){var Lt=Q+pt>>>1,re=m[Lt];re!==null&&!_s(re)&&(R?re<=x:re<x)?Q=Lt+1:pt=Lt}return pt}return ti(m,x,ba,R)}function ti(m,x,R,Q){var pt=0,Lt=m==null?0:m.length;if(Lt===0)return 0;x=R(x);for(var re=x!==x,ge=x===null,Pe=_s(x),hn=x===n;pt<Lt;){var fn=Qu((pt+Lt)/2),xn=R(m[fn]),Un=xn!==n,dr=xn===null,wr=xn===xn,qr=_s(xn);if(re)var Cr=Q||wr;else hn?Cr=wr&&(Q||Un):ge?Cr=wr&&Un&&(Q||!dr):Pe?Cr=wr&&Un&&!dr&&(Q||!qr):dr||qr?Cr=!1:Cr=Q?xn<=x:xn<x;Cr?pt=fn+1:Lt=fn}return Qi(Lt,Gt)}function Ci(m,x){for(var R=-1,Q=m.length,pt=0,Lt=[];++R<Q;){var re=m[R],ge=x?x(re):re;if(!R||!Fa(ge,Pe)){var Pe=ge;Lt[pt++]=re===0?0:re}}return Lt}function xi(m){return typeof m=="number"?m:_s(m)?en:+m}function Sr(m){if(typeof m=="string")return m;if(Er(m))return ii(m,Sr)+"";if(_s(m))return Wf?Wf.call(m):"";var x=m+"";return x=="0"&&1/m==-Bt?"-0":x}function jr(m,x,R){var Q=-1,pt=Uo,Lt=m.length,re=!0,ge=[],Pe=ge;if(R)re=!1,pt=jl;else if(Lt>=s){var hn=x?null:Bb(m);if(hn)return Gl(hn);re=!1,pt=il,Pe=new Ar}else Pe=x?[]:ge;t:for(;++Q<Lt;){var fn=m[Q],xn=x?x(fn):fn;if(fn=R||fn!==0?fn:0,re&&xn===xn){for(var Un=Pe.length;Un--;)if(Pe[Un]===xn)continue t;x&&Pe.push(xn),ge.push(fn)}else pt(Pe,xn,R)||(Pe!==ge&&Pe.push(xn),ge.push(fn))}return ge}function oo(m,x){return x=Zo(x,m),m=hp(m,x),m==null||delete m[ec(vl(x))]}function ao(m,x,R,Q){return In(m,x,R(yl(m,x)),Q)}function so(m,x,R,Q){for(var pt=m.length,Lt=Q?pt:-1;(Q?Lt--:++Lt<pt)&&x(m[Lt],Lt,m););return R?fr(m,Q?0:Lt,Q?Lt+1:pt):fr(m,Q?Lt+1:0,Q?pt:Lt)}function $o(m,x){var R=m;return R instanceof kr&&(R=R.value()),Ga(x,function(Q,pt){return pt.func.apply(pt.thisArg,ua([Q],pt.args))},R)}function ys(m,x,R){var Q=m.length;if(Q<2)return Q?jr(m[0]):[];for(var pt=-1,Lt=ze(Q);++pt<Q;)for(var re=m[pt],ge=-1;++ge<Q;)ge!=pt&&(Lt[pt]=vu(Lt[pt]||re,m[ge],x,R));return jr(Nr(Lt,1),x,R)}function Ql(m,x,R){for(var Q=-1,pt=m.length,Lt=x.length,re={};++Q<pt;){var ge=Q<Lt?x[Q]:n;R(re,m[Q],ge)}return re}function Vs(m){return bo(m)?m:[]}function Us(m){return typeof m=="function"?m:ba}function Zo(m,x){return Er(m)?m:$h(m,x)?[m]:pm(ci(m))}var Au=Ee;function Da(m,x,R){var Q=m.length;return R=R===n?Q:R,!x&&R>=Q?m:fr(m,x,R)}var Oa=Md||function(m){return Fi.clearTimeout(m)};function Jl(m,x){if(x)return m.slice();var R=m.length,Q=ll?ll(R):new m.constructor(R);return m.copy(Q),Q}function Hs(m){var x=new m.constructor(m.byteLength);return new zs(x).set(new zs(m)),x}function tc(m,x){var R=x?Hs(m.buffer):m.buffer;return new m.constructor(R,m.byteOffset,m.byteLength)}function Bi(m){var x=new m.constructor(m.source,pi.exec(m));return x.lastIndex=m.lastIndex,x}function Ii(m){return th?Gr(th.call(m)):{}}function Ui(m,x){var R=x?Hs(m.buffer):m.buffer;return new m.constructor(R,m.byteOffset,m.length)}function Mi(m,x){if(m!==x){var R=m!==n,Q=m===null,pt=m===m,Lt=_s(m),re=x!==n,ge=x===null,Pe=x===x,hn=_s(x);if(!ge&&!hn&&!Lt&&m>x||Lt&&re&&Pe&&!ge&&!hn||Q&&re&&Pe||!R&&Pe||!pt)return 1;if(!Q&&!Lt&&!hn&&m<x||hn&&R&&pt&&!Q&&!Lt||ge&&R&&pt||!re&&pt||!Pe)return-1}return 0}function am(m,x,R){for(var Q=-1,pt=m.criteria,Lt=x.criteria,re=pt.length,ge=R.length;++Q<re;){var Pe=Mi(pt[Q],Lt[Q]);if(Pe){if(Q>=ge)return Pe;var hn=R[Q];return Pe*(hn=="desc"?-1:1)}}return m.index-x.index}function Fc(m,x,R,Q){for(var pt=-1,Lt=m.length,re=R.length,ge=-1,Pe=x.length,hn=Wi(Lt-re,0),fn=ze(Pe+hn),xn=!Q;++ge<Pe;)fn[ge]=x[ge];for(;++pt<re;)(xn||pt<Lt)&&(fn[R[pt]]=m[pt]);for(;hn--;)fn[ge++]=m[pt++];return fn}function sm(m,x,R,Q){for(var pt=-1,Lt=m.length,re=-1,ge=R.length,Pe=-1,hn=x.length,fn=Wi(Lt-ge,0),xn=ze(fn+hn),Un=!Q;++pt<fn;)xn[pt]=m[pt];for(var dr=pt;++Pe<hn;)xn[dr+Pe]=x[Pe];for(;++re<ge;)(Un||pt<Lt)&&(xn[dr+R[re]]=m[pt++]);return xn}function va(m,x){var R=-1,Q=m.length;for(x||(x=ze(Q));++R<Q;)x[R]=m[R];return x}function vs(m,x,R,Q){var pt=!R;R||(R={});for(var Lt=-1,re=x.length;++Lt<re;){var ge=x[Lt],Pe=Q?Q(R[ge],m[ge],ge,R,m):n;Pe===n&&(Pe=m[ge]),pt?ml(R,ge,Pe):li(R,ge,Pe)}return R}function lm(m,x){return vs(m,fm(m),x)}function Ya(m,x){return vs(m,ch(m),x)}function Gs(m,x){return function(R,Q){var pt=Er(R)?Nl:Dd,Lt=x?x():{};return pt(R,m,yr(Q,2),Lt)}}function Bc(m){return Ee(function(x,R){var Q=-1,pt=R.length,Lt=pt>1?R[pt-1]:n,re=pt>2?R[2]:n;for(Lt=m.length>3&&typeof Lt=="function"?(pt--,Lt):n,re&&za(R[0],R[1],re)&&(Lt=pt<3?n:Lt,pt=1),x=Gr(x);++Q<pt;){var ge=R[Q];ge&&m(x,ge,Q,Lt)}return x})}function tp(m,x){return function(R,Q){if(R==null)return R;if(!Qa(R))return m(R,Q);for(var pt=R.length,Lt=x?pt:-1,re=Gr(R);(x?Lt--:++Lt<pt)&&Q(re[Lt],Lt,re)!==!1;);return R}}function sh(m){return function(x,R,Q){for(var pt=-1,Lt=Gr(x),re=Q(x),ge=re.length;ge--;){var Pe=re[m?ge:++pt];if(R(Lt[Pe],Pe,Lt)===!1)break}return x}}function ep(m,x,R){var Q=x&N,pt=np(m);function Lt(){var re=this&&this!==Fi&&this instanceof Lt?pt:m;return re.apply(Q?R:this,arguments)}return Lt}function Vd(m){return function(x){x=ci(x);var R=ol(x)?fa(x):n,Q=R?R[0]:x.charAt(0),pt=R?Da(R,1).join(""):x.slice(1);return Q[m]()+pt}}function Gh(m){return function(x){return Ga(__(_a(x).replace(Rr,"")),m,"")}}function np(m){return function(){var x=arguments;switch(x.length){case 0:return new m;case 1:return new m(x[0]);case 2:return new m(x[0],x[1]);case 3:return new m(x[0],x[1],x[2]);case 4:return new m(x[0],x[1],x[2],x[3]);case 5:return new m(x[0],x[1],x[2],x[3],x[4]);case 6:return new m(x[0],x[1],x[2],x[3],x[4],x[5]);case 7:return new m(x[0],x[1],x[2],x[3],x[4],x[5],x[6])}var R=gu(m.prototype),Q=m.apply(R,x);return Ki(Q)?Q:R}}function Ng(m,x,R){var Q=np(m);function pt(){for(var Lt=arguments.length,re=ze(Lt),ge=Lt,Pe=Ud(pt);ge--;)re[ge]=arguments[ge];var hn=Lt<3&&re[0]!==Pe&&re[Lt-1]!==Pe?[]:da(re,Pe);if(Lt-=hn.length,Lt<R)return Ug(m,x,rp,pt.placeholder,n,re,hn,n,n,R-Lt);var fn=this&&this!==Fi&&this instanceof pt?Q:m;return Xi(fn,this,re)}return pt}function cv(m){return function(x,R,Q){var pt=Gr(x);if(!Qa(x)){var Lt=yr(R,3);x=at(x),R=function(ge){return Lt(pt[ge],ge,pt)}}var re=m(x,R,Q);return re>-1?pt[Lt?x[re]:re]:n}}function cm(m){return vo(function(x){var R=x.length,Q=R,pt=qa.prototype.thru;for(m&&x.reverse();Q--;){var Lt=x[Q];if(typeof Lt!="function")throw new Di(l);if(pt&&!re&&lp(Lt)=="wrapper")var re=new qa([],!0)}for(Q=re?Q:R;++Q<R;){Lt=x[Q];var ge=lp(Lt),Pe=ge=="wrapper"?Kg(Lt):n;Pe&&Hi(Pe[0])&&Pe[1]==(it|j|K|et)&&!Pe[4].length&&Pe[9]==1?re=re[lp(Pe[0])].apply(re,Pe[3]):re=Lt.length==1&&Hi(Lt)?re[ge]():re.thru(Lt)}return function(){var hn=arguments,fn=hn[0];if(re&&hn.length==1&&Er(fn))return re.plant(fn).value();for(var xn=0,Un=R?x[xn].apply(this,hn):fn;++xn<R;)Un=x[xn].call(this,Un);return Un}})}function rp(m,x,R,Q,pt,Lt,re,ge,Pe,hn){var fn=x&it,xn=x&N,Un=x&U,dr=x&(j|$),wr=x&q,qr=Un?n:np(m);function Cr(){for(var ei=arguments.length,oi=ze(ei),sc=ei;sc--;)oi[sc]=arguments[sc];if(dr)var Ks=Ud(Cr),lc=hu(oi,Ks);if(Q&&(oi=Fc(oi,Q,pt,dr)),Lt&&(oi=sm(oi,Lt,re,dr)),ei-=lc,dr&&ei<hn){var Ko=da(oi,Ks);return Ug(m,x,rp,Cr.placeholder,R,oi,Ko,ge,Pe,hn-ei)}var Tu=xn?R:this,td=Un?Tu[m]:m;return ei=oi.length,ge?oi=$d(oi,ge):wr&&ei>1&&oi.reverse(),fn&&Pe<ei&&(oi.length=Pe),this&&this!==Fi&&this instanceof Cr&&(td=qr||np(td)),td.apply(Tu,oi)}return Cr}function jg(m,x){return function(R,Q){return Fd(R,m,x(Q),{})}}function Nc(m,x){return function(R,Q){var pt;if(R===n&&Q===n)return x;if(R!==n&&(pt=R),Q!==n){if(pt===n)return Q;typeof R=="string"||typeof Q=="string"?(R=Sr(R),Q=Sr(Q)):(R=xi(R),Q=xi(Q)),pt=m(R,Q)}return pt}}function Vg(m){return vo(function(x){return x=ii(x,Zi(yr())),Ee(function(R){var Q=this;return m(x,function(pt){return Xi(pt,Q,R)})})})}function lh(m,x){x=x===n?" ":Sr(x);var R=x.length;if(R<2)return R?De(x,m):x;var Q=De(x,Dh(m/_r(x)));return ol(x)?Da(fa(Q),0,m).join(""):Q.slice(0,m)}function um(m,x,R,Q){var pt=x&N,Lt=np(m);function re(){for(var ge=-1,Pe=arguments.length,hn=-1,fn=Q.length,xn=ze(fn+Pe),Un=this&&this!==Fi&&this instanceof re?Lt:m;++hn<fn;)xn[hn]=Q[hn];for(;Pe--;)xn[hn++]=arguments[++ge];return Xi(Un,pt?R:this,xn)}return re}function ip(m){return function(x,R,Q){return Q&&typeof Q!="number"&&za(x,R,Q)&&(R=Q=n),x=rc(x),R===n?(R=x,x=0):R=rc(R),Q=Q===n?x<R?1:-1:rc(Q),ke(x,R,Q,m)}}function op(m){return function(x,R){return typeof x=="string"&&typeof R=="string"||(x=ts(x),R=ts(R)),m(x,R)}}function Ug(m,x,R,Q,pt,Lt,re,ge,Pe,hn){var fn=x&j,xn=fn?re:n,Un=fn?n:re,dr=fn?Lt:n,wr=fn?n:Lt;x|=fn?K:tt,x&=~(fn?tt:K),x&F||(x&=~(N|U));var qr=[m,x,pt,dr,xn,wr,Un,ge,Pe,hn],Cr=R.apply(n,qr);return Hi(m)&&gv(Cr,qr),Cr.placeholder=Q,yv(Cr,m,x)}function Hg(m){var x=xr[m];return function(R,Q){if(R=ts(R),Q=Q==null?0:Qi(Or(Q),292),Q&&Ju(R)){var pt=(ci(R)+"e").split("e"),Lt=x(pt[0]+"e"+(+pt[1]+Q));return pt=(ci(Lt)+"e").split("e"),+(pt[0]+"e"+(+pt[1]-Q))}return x(R)}}var Bb=Rc&&1/Gl(new Rc([,-0]))[1]==Bt?function(m){return new Rc(m)}:qs;function Gg(m){return function(x){var R=To(x);return R==H?Pc(x):R==ue?Xu(x):Ec(x,m(x))}}function jc(m,x,R,Q,pt,Lt,re,ge){var Pe=x&U;if(!Pe&&typeof m!="function")throw new Di(l);var hn=Q?Q.length:0;if(hn||(x&=~(K|tt),Q=pt=n),re=re===n?re:Wi(Or(re),0),ge=ge===n?ge:Or(ge),hn-=pt?pt.length:0,x&tt){var fn=Q,xn=pt;Q=pt=n}var Un=Pe?n:Kg(m),dr=[m,x,R,Q,pt,fn,xn,Lt,re,ge];if(Un&&mv(dr,Un),m=dr[0],x=dr[1],R=dr[2],Q=dr[3],pt=dr[4],ge=dr[9]=dr[9]===n?Pe?0:m.length:Wi(dr[9]-hn,0),!ge&&x&(j|$)&&(x&=~(j|$)),!x||x==N)var wr=ep(m,x,R);else x==j||x==$?wr=Ng(m,x,ge):(x==K||x==(N|K))&&!pt.length?wr=um(m,x,R,Q):wr=rp.apply(n,dr);var qr=Un?yn:gv;return yv(qr(wr,dr),m,x)}function $g(m,x,R,Q){return m===n||Fa(m,ps[R])&&!tr.call(Q,R)?x:m}function uv(m,x,R,Q,pt,Lt){return Ki(m)&&Ki(x)&&(Lt.set(x,m),_t(m,x,n,uv,Lt),Lt.delete(x)),m}function Zg(m){return Kh(m)?n:m}function Wg(m,x,R,Q,pt,Lt){var re=R&k,ge=m.length,Pe=x.length;if(ge!=Pe&&!(re&&Pe>ge))return!1;var hn=Lt.get(m),fn=Lt.get(x);if(hn&&fn)return hn==x&&fn==m;var xn=-1,Un=!0,dr=R&D?new Ar:n;for(Lt.set(m,x),Lt.set(x,m);++xn<ge;){var wr=m[xn],qr=x[xn];if(Q)var Cr=re?Q(qr,wr,xn,x,m,Lt):Q(wr,qr,xn,m,x,Lt);if(Cr!==n){if(Cr)continue;Un=!1;break}if(dr){if(!ta(x,function(ei,oi){if(!il(dr,oi)&&(wr===ei||pt(wr,ei,R,Q,Lt)))return dr.push(oi)})){Un=!1;break}}else if(!(wr===qr||pt(wr,qr,R,Q,Lt))){Un=!1;break}}return Lt.delete(m),Lt.delete(x),Un}function qg(m,x,R,Q,pt,Lt,re){switch(R){case wn:if(m.byteLength!=x.byteLength||m.byteOffset!=x.byteOffset)return!1;m=m.buffer,x=x.buffer;case _n:return!(m.byteLength!=x.byteLength||!Lt(new zs(m),new zs(x)));case Me:case xe:case Rt:return Fa(+m,+x);case Je:return m.name==x.name&&m.message==x.message;case ee:case Ut:return m==x+"";case H:var ge=Pc;case ue:var Pe=Q&k;if(ge||(ge=Gl),m.size!=x.size&&!Pe)return!1;var hn=re.get(m);if(hn)return hn==x;Q|=D,re.set(m,x);var fn=Wg(ge(m),ge(x),Q,pt,Lt,re);return re.delete(m),fn;case Ie:if(th)return th.call(m)==th.call(x)}return!1}function ap(m,x,R,Q,pt,Lt){var re=R&k,ge=hm(m),Pe=ge.length,hn=hm(x),fn=hn.length;if(Pe!=fn&&!re)return!1;for(var xn=Pe;xn--;){var Un=ge[xn];if(!(re?Un in x:tr.call(x,Un)))return!1}var dr=Lt.get(m),wr=Lt.get(x);if(dr&&wr)return dr==x&&wr==m;var qr=!0;Lt.set(m,x),Lt.set(x,m);for(var Cr=re;++xn<Pe;){Un=ge[xn];var ei=m[Un],oi=x[Un];if(Q)var sc=re?Q(oi,ei,Un,x,m,Lt):Q(ei,oi,Un,m,x,Lt);if(!(sc===n?ei===oi||pt(ei,oi,R,Q,Lt):sc)){qr=!1;break}Cr||(Cr=Un=="constructor")}if(qr&&!Cr){var Ks=m.constructor,lc=x.constructor;Ks!=lc&&"constructor"in m&&"constructor"in x&&!(typeof Ks=="function"&&Ks instanceof Ks&&typeof lc=="function"&&lc instanceof lc)&&(qr=!1)}return Lt.delete(m),Lt.delete(x),qr}function vo(m){return Iu(Zh(m,n,a0),m+"")}function hm(m){return oh(m,at,fm)}function sp(m){return oh(m,It,ch)}var Kg=Ns?function(m){return Ns.get(m)}:qs;function lp(m){for(var x=m.name+"",R=Dc[x],Q=tr.call(Dc,x)?R.length:0;Q--;){var pt=R[Q],Lt=pt.func;if(Lt==null||Lt==m)return pt.name}return x}function Ud(m){var x=tr.call(Mt,"placeholder")?Mt:m;return x.placeholder}function yr(){var m=Mt.iteratee||km;return m=m===km?L:m,arguments.length?m(arguments[0],arguments[1]):m}function dm(m,x){var R=m.__data__;return Gb(x)?R[typeof x=="string"?"string":"hash"]:R.map}function Yg(m){for(var x=at(m),R=x.length;R--;){var Q=x[R],pt=m[Q];x[R]=[Q,pt,cp(pt)]}return x}function wu(m,x){var R=Rs(m,x);return p(R)?R:n}function Xg(m){var x=tr.call(m,Ta),R=m[Ta];try{m[Ta]=n;var Q=!0}catch{}var pt=al.call(m);return Q&&(x?m[Ta]=R:delete m[Ta]),pt}var fm=Nf?function(m){return m==null?[]:(m=Gr(m),yo(Nf(m),function(x){return Lc.call(m,x)}))}:Hx,ch=Nf?function(m){for(var x=[];m;)ua(x,fm(m)),m=Wl(m);return x}:Hx,To=io;(ql&&To(new ql(new ArrayBuffer(1)))!=wn||ea&&To(new ea)!=H||zh&&To(zh.resolve())!=yt||Rc&&To(new Rc)!=ue||mu&&To(new mu)!=Le)&&(To=function(m){var x=io(m),R=x==gt?m.constructor:n,Q=R?dh(R):"";if(Q)switch(Q){case Hf:return wn;case Gf:return H;case Yp:return yt;case $f:return ue;case Zf:return Le}return x});function Nb(m,x,R){for(var Q=-1,pt=R.length;++Q<pt;){var Lt=R[Q],re=Lt.size;switch(Lt.type){case"drop":m+=re;break;case"dropRight":x-=re;break;case"take":x=Qi(x,m+re);break;case"takeRight":m=Wi(m,x-re);break}}return{start:m,end:x}}function jb(m){var x=m.match(Pr);return x?x[1].split(Ze):[]}function hv(m,x,R){x=Zo(x,m);for(var Q=-1,pt=x.length,Lt=!1;++Q<pt;){var re=ec(x[Q]);if(!(Lt=m!=null&&R(m,re)))break;m=m[re]}return Lt||++Q!=pt?Lt:(pt=m==null?0:m.length,!!pt&&qh(pt)&&Cu(re,pt)&&(Er(m)||ph(m)))}function Vb(m){var x=m.length,R=new m.constructor(x);return x&&typeof m[0]=="string"&&tr.call(m,"index")&&(R.index=m.index,R.input=m.input),R}function dv(m){return typeof m.constructor=="function"&&!uh(m)?gu(Wl(m)):{}}function Ub(m,x,R){var Q=m.constructor;switch(x){case _n:return Hs(m);case Me:case xe:return new Q(+m);case wn:return tc(m,R);case de:case ve:case Te:case Ye:case un:case Nn:case oe:case ht:case mt:return Ui(m,R);case H:return new Q;case Rt:case Ut:return new Q(m);case ee:return Bi(m);case ue:return new Q;case Ie:return Ii(m)}}function Hb(m,x){var R=x.length;if(!R)return m;var Q=R-1;return x[Q]=(R>1?"& ":"")+x[Q],x=x.join(R>2?", ":" "),m.replace(Yr,`{
/* [wrapped with `+x+`] */
`)}function Qg(m){return Er(m)||ph(m)||!!(Fs&&m&&m[Fs])}function Cu(m,x){var R=typeof m;return x=x??ae,!!x&&(R=="number"||R!="symbol"&&Ms.test(m))&&m>-1&&m%1==0&&m<x}function za(m,x,R){if(!Ki(R))return!1;var Q=typeof x;return(Q=="number"?Qa(R)&&Cu(x,R.length):Q=="string"&&x in R)?Fa(R[x],m):!1}function $h(m,x){if(Er(m))return!1;var R=typeof m;return R=="number"||R=="symbol"||R=="boolean"||m==null||_s(m)?!0:En.test(m)||!Sn.test(m)||x!=null&&m in Gr(x)}function Gb(m){var x=typeof m;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?m!=="__proto__":m===null}function Hi(m){var x=lp(m),R=Mt[x];if(typeof R!="function"||!(x in kr.prototype))return!1;if(m===R)return!0;var Q=Kg(R);return!!Q&&m===Q[0]}function Hd(m){return!!ms&&ms in m}var fv=Zl?Zs:Gx;function uh(m){var x=m&&m.constructor,R=typeof x=="function"&&x.prototype||ps;return m===R}function cp(m){return m===m&&!Ki(m)}function Gd(m,x){return function(R){return R==null?!1:R[m]===x&&(x!==n||m in Gr(R))}}function pv(m){var x=wm(m,function(Q){return R.size===_&&R.clear(),Q}),R=x.cache;return x}function mv(m,x){var R=m[1],Q=x[1],pt=R|Q,Lt=pt<(N|U|it),re=Q==it&&R==j||Q==it&&R==et&&m[7].length<=x[8]||Q==(it|et)&&x[7].length<=x[8]&&R==j;if(!(Lt||re))return m;Q&N&&(m[2]=x[2],pt|=R&N?0:F);var ge=x[3];if(ge){var Pe=m[3];m[3]=Pe?Fc(Pe,ge,x[4]):ge,m[4]=Pe?da(m[3],I):x[4]}return ge=x[5],ge&&(Pe=m[5],m[5]=Pe?sm(Pe,ge,x[6]):ge,m[6]=Pe?da(m[5],I):x[6]),ge=x[7],ge&&(m[7]=ge),Q&it&&(m[8]=m[8]==null?x[8]:Qi(m[8],x[8])),m[9]==null&&(m[9]=x[9]),m[0]=x[0],m[1]=pt,m}function up(m){var x=[];if(m!=null)for(var R in Gr(m))x.push(R);return x}function Jg(m){return al.call(m)}function Zh(m,x,R){return x=Wi(x===n?m.length-1:x,0),function(){for(var Q=arguments,pt=-1,Lt=Wi(Q.length-x,0),re=ze(Lt);++pt<Lt;)re[pt]=Q[x+pt];pt=-1;for(var ge=ze(x+1);++pt<x;)ge[pt]=Q[pt];return ge[x]=R(re),Xi(m,this,ge)}}function hp(m,x){return x.length<2?m:yl(m,fr(x,0,-1))}function $d(m,x){for(var R=m.length,Q=Qi(x.length,R),pt=va(m);Q--;){var Lt=x[Q];m[Q]=Cu(Lt,R)?pt[Lt]:n}return m}function Wh(m,x){if(!(x==="constructor"&&typeof m[x]=="function")&&x!="__proto__")return m[x]}var gv=t0(yn),Zd=Ed||function(m,x){return Fi.setTimeout(m,x)},Iu=t0(an);function yv(m,x,R){var Q=x+"";return Iu(m,Hb(Q,$b(jb(Q),R)))}function t0(m){var x=0,R=0;return function(){var Q=Oh(),pt=bt-(Q-R);if(R=Q,pt>0){if(++x>=ot)return arguments[0]}else x=0;return m.apply(n,arguments)}}function hh(m,x){var R=-1,Q=m.length,pt=Q-1;for(x=x===n?Q:x;++R<x;){var Lt=le(R,pt),re=m[Lt];m[Lt]=m[R],m[R]=re}return m.length=x,m}var pm=pv(function(m){var x=[];return m.charCodeAt(0)===46&&x.push(""),m.replace(ir,function(R,Q,pt,Lt){x.push(pt?Lt.replace(eo,"$1"):Q||R)}),x});function ec(m){if(typeof m=="string"||_s(m))return m;var x=m+"";return x=="0"&&1/m==-Bt?"-0":x}function dh(m){if(m!=null){try{return Jr.call(m)}catch{}try{return m+""}catch{}}return""}function $b(m,x){return Vo($e,function(R){var Q="_."+R[0];x&R[1]&&!Uo(m,Q)&&m.push(Q)}),m.sort()}function vv(m){if(m instanceof kr)return m.clone();var x=new qa(m.__wrapped__,m.__chain__);return x.__actions__=va(m.__actions__),x.__index__=m.__index__,x.__values__=m.__values__,x}function Zb(m,x,R){(R?za(m,x,R):x===n)?x=1:x=Wi(Or(x),0);var Q=m==null?0:m.length;if(!Q||x<1)return[];for(var pt=0,Lt=0,re=ze(Dh(Q/x));pt<Q;)re[Lt++]=fr(m,pt,pt+=x);return re}function Wb(m){for(var x=-1,R=m==null?0:m.length,Q=0,pt=[];++x<R;){var Lt=m[x];Lt&&(pt[Q++]=Lt)}return pt}function qb(){var m=arguments.length;if(!m)return[];for(var x=ze(m-1),R=arguments[0],Q=m;Q--;)x[Q-1]=arguments[Q];return ua(Er(R)?va(R):[R],Nr(x,1))}var e0=Ee(function(m,x){return bo(m)?vu(m,Nr(x,1,bo,!0)):[]}),_v=Ee(function(m,x){var R=vl(x);return bo(R)&&(R=n),bo(m)?vu(m,Nr(x,1,bo,!0),yr(R,2)):[]}),n0=Ee(function(m,x){var R=vl(x);return bo(R)&&(R=n),bo(m)?vu(m,Nr(x,1,bo,!0),n,R):[]});function bv(m,x,R){var Q=m==null?0:m.length;return Q?(x=R||x===n?1:Or(x),fr(m,x<0?0:x,Q)):[]}function r0(m,x,R){var Q=m==null?0:m.length;return Q?(x=R||x===n?1:Or(x),x=Q-x,fr(m,0,x<0?0:x)):[]}function xv(m,x){return m&&m.length?so(m,yr(x,3),!0,!0):[]}function Av(m,x){return m&&m.length?so(m,yr(x,3),!0):[]}function mm(m,x,R,Q){var pt=m==null?0:m.length;return pt?(R&&typeof R!="number"&&za(m,x,R)&&(R=0,Q=pt),nh(m,x,R,Q)):[]}function i0(m,x,R){var Q=m==null?0:m.length;if(!Q)return-1;var pt=R==null?0:Or(R);return pt<0&&(pt=Wi(Q+pt,0)),lu(m,yr(x,3),pt)}function o0(m,x,R){var Q=m==null?0:m.length;if(!Q)return-1;var pt=Q-1;return R!==n&&(pt=Or(R),pt=R<0?Wi(Q+pt,0):Qi(pt,Q-1)),lu(m,yr(x,3),pt,!0)}function a0(m){var x=m==null?0:m.length;return x?Nr(m,1):[]}function dp(m){var x=m==null?0:m.length;return x?Nr(m,Bt):[]}function Kb(m,x){var R=m==null?0:m.length;return R?(x=x===n?1:Or(x),Nr(m,x)):[]}function s0(m){for(var x=-1,R=m==null?0:m.length,Q={};++x<R;){var pt=m[x];Q[pt[0]]=pt[1]}return Q}function Wd(m){return m&&m.length?m[0]:n}function l0(m,x,R){var Q=m==null?0:m.length;if(!Q)return-1;var pt=R==null?0:Or(R);return pt<0&&(pt=Wi(Q+pt,0)),hs(m,x,pt)}function Yb(m){var x=m==null?0:m.length;return x?fr(m,0,-1):[]}var Xb=Ee(function(m){var x=ii(m,Vs);return x.length&&x[0]===m[0]?Hh(x):[]}),wv=Ee(function(m){var x=vl(m),R=ii(m,Vs);return x===vl(R)?x=n:R.pop(),R.length&&R[0]===m[0]?Hh(R,yr(x,2)):[]}),Cv=Ee(function(m){var x=vl(m),R=ii(m,Vs);return x=typeof x=="function"?x:n,x&&R.pop(),R.length&&R[0]===m[0]?Hh(R,n,x):[]});function Qb(m,x){return m==null?"":Td.call(m,x)}function vl(m){var x=m==null?0:m.length;return x?m[x-1]:n}function fp(m,x,R){var Q=m==null?0:m.length;if(!Q)return-1;var pt=Q;return R!==n&&(pt=Or(R),pt=pt<0?Wi(Q+pt,0):Qi(pt,Q-1)),x===x?$l(m,x,pt):lu(m,ks,pt,!0)}function Iv(m,x){return m&&m.length?Dt(m,Or(x)):n}var Jb=Ee(Mv);function Mv(m,x){return m&&m.length&&x&&x.length?se(m,x):m}function tx(m,x,R){return m&&m.length&&x&&x.length?se(m,x,yr(R,2)):m}function ex(m,x,R){return m&&m.length&&x&&x.length?se(m,x,n,R):m}var nx=vo(function(m,x){var R=m==null?0:m.length,Q=Uh(m,x);return fe(m,ii(x,function(pt){return Cu(pt,R)?+pt:pt}).sort(Mi)),Q});function rx(m,x){var R=[];if(!(m&&m.length))return R;var Q=-1,pt=[],Lt=m.length;for(x=yr(x,3);++Q<Lt;){var re=m[Q];x(re,Q,m)&&(R.push(re),pt.push(Q))}return fe(m,pt),R}function gm(m){return m==null?m:qi.call(m)}function c0(m,x,R){var Q=m==null?0:m.length;return Q?(R&&typeof R!="number"&&za(m,x,R)?(x=0,R=Q):(x=x==null?0:Or(x),R=R===n?Q:Or(R)),fr(m,x,R)):[]}function Sv(m,x){return vi(m,x)}function Ev(m,x,R){return ti(m,x,yr(R,2))}function Tv(m,x){var R=m==null?0:m.length;if(R){var Q=vi(m,x);if(Q<R&&Fa(m[Q],x))return Q}return-1}function ix(m,x){return vi(m,x,!0)}function ym(m,x,R){return ti(m,x,yr(R,2),!0)}function ox(m,x){var R=m==null?0:m.length;if(R){var Q=vi(m,x,!0)-1;if(Fa(m[Q],x))return Q}return-1}function Pv(m){return m&&m.length?Ci(m):[]}function ax(m,x){return m&&m.length?Ci(m,yr(x,2)):[]}function sx(m){var x=m==null?0:m.length;return x?fr(m,1,x):[]}function lx(m,x,R){return m&&m.length?(x=R||x===n?1:Or(x),fr(m,0,x<0?0:x)):[]}function kv(m,x,R){var Q=m==null?0:m.length;return Q?(x=R||x===n?1:Or(x),x=Q-x,fr(m,x<0?0:x,Q)):[]}function cx(m,x){return m&&m.length?so(m,yr(x,3),!1,!0):[]}function ux(m,x){return m&&m.length?so(m,yr(x,3)):[]}var pp=Ee(function(m){return jr(Nr(m,1,bo,!0))}),Lv=Ee(function(m){var x=vl(m);return bo(x)&&(x=n),jr(Nr(m,1,bo,!0),yr(x,2))}),u0=Ee(function(m){var x=vl(m);return x=typeof x=="function"?x:n,jr(Nr(m,1,bo,!0),n,x)});function Rv(m){return m&&m.length?jr(m):[]}function _o(m,x){return m&&m.length?jr(m,yr(x,2)):[]}function h0(m,x){return x=typeof x=="function"?x:n,m&&m.length?jr(m,n,x):[]}function d0(m){if(!(m&&m.length))return[];var x=0;return m=yo(m,function(R){if(bo(R))return x=Wi(R.length,x),!0}),cu(x,function(R){return ii(m,ds(R))})}function f0(m,x){if(!(m&&m.length))return[];var R=d0(m);return x==null?R:ii(R,function(Q){return Xi(x,n,Q)})}var p0=Ee(function(m,x){return bo(m)?vu(m,x):[]}),m0=Ee(function(m){return ys(yo(m,bo))}),hx=Ee(function(m){var x=vl(m);return bo(x)&&(x=n),ys(yo(m,bo),yr(x,2))}),dx=Ee(function(m){var x=vl(m);return x=typeof x=="function"?x:n,ys(yo(m,bo),n,x)}),fx=Ee(d0);function px(m,x){return Ql(m||[],x||[],li)}function Dv(m,x){return Ql(m||[],x||[],In)}var Xa=Ee(function(m){var x=m.length,R=x>1?m[x-1]:n;return R=typeof R=="function"?(m.pop(),R):n,f0(m,R)});function vm(m){var x=Mt(m);return x.__chain__=!0,x}function Ov(m,x){return x(m),m}function nc(m,x){return x(m)}var _m=vo(function(m){var x=m.length,R=x?m[0]:0,Q=this.__wrapped__,pt=function(Lt){return Uh(Lt,m)};return x>1||this.__actions__.length||!(Q instanceof kr)||!Cu(R)?this.thru(pt):(Q=Q.slice(R,+R+(x?1:0)),Q.__actions__.push({func:nc,args:[pt],thisArg:n}),new qa(Q,this.__chain__).thru(function(Lt){return x&&!Lt.length&&Lt.push(n),Lt}))});function mp(){return vm(this)}function qd(){return new qa(this.value(),this.__chain__)}function bm(){this.__values__===n&&(this.__values__=Qd(this.value()));var m=this.__index__>=this.__values__.length,x=m?n:this.__values__[this.__index__++];return{done:m,value:x}}function xm(){return this}function mx(m){for(var x,R=this;R instanceof Fh;){var Q=vv(R);Q.__index__=0,Q.__values__=n,x?pt.__wrapped__=Q:x=Q;var pt=Q;R=R.__wrapped__}return pt.__wrapped__=m,x}function gx(){var m=this.__wrapped__;if(m instanceof kr){var x=m;return this.__actions__.length&&(x=new kr(this)),x=x.reverse(),x.__actions__.push({func:nc,args:[gm],thisArg:n}),new qa(x,this.__chain__)}return this.thru(gm)}function zv(){return $o(this.__wrapped__,this.__actions__)}var Fv=Gs(function(m,x,R){tr.call(m,R)?++m[R]:ml(m,R,1)});function yx(m,x,R){var Q=Er(m)?au:om;return R&&za(m,x,R)&&(x=n),Q(m,yr(x,3))}function Bv(m,x){var R=Er(m)?yo:rh;return R(m,yr(x,3))}var Nv=cv(i0),g0=cv(o0);function y0(m,x){return Nr(gp(m,x),1)}function vx(m,x){return Nr(gp(m,x),Bt)}function jv(m,x,R){return R=R===n?1:Or(R),Nr(gp(m,x),R)}function Vv(m,x){var R=Er(m)?Vo:gl;return R(m,yr(x,3))}function Uv(m,x){var R=Er(m)?Cd:ya;return R(m,yr(x,3))}var _x=Gs(function(m,x,R){tr.call(m,R)?m[R].push(x):ml(m,R,[x])});function bx(m,x,R,Q){m=Qa(m)?m:oa(m),R=R&&!Q?Or(R):0;var pt=m.length;return R<0&&(R=Wi(pt+R,0)),Em(m)?R<=pt&&m.indexOf(x,R)>-1:!!pt&&hs(m,x,R)>-1}var xx=Ee(function(m,x,R){var Q=-1,pt=typeof x=="function",Lt=Qa(m)?ze(m.length):[];return gl(m,function(re){Lt[++Q]=pt?Xi(x,re,R):js(re,x,R)}),Lt}),Hv=Gs(function(m,x,R){ml(m,R,x)});function gp(m,x){var R=Er(m)?ii:nt;return R(m,yr(x,3))}function yp(m,x,R,Q){return m==null?[]:(Er(x)||(x=x==null?[]:[x]),R=Q?n:R,Er(R)||(R=R==null?[]:[R]),Ft(m,x,R))}var Vc=Gs(function(m,x,R){m[R?0:1].push(x)},function(){return[[],[]]});function fh(m,x,R){var Q=Er(m)?Ga:Ls,pt=arguments.length<3;return Q(m,yr(x,4),R,pt,gl)}function Gv(m,x,R){var Q=Er(m)?su:Ls,pt=arguments.length<3;return Q(m,yr(x,4),R,pt,ya)}function v0(m,x){var R=Er(m)?yo:rh;return R(m,Cm(yr(x,3)))}function Ax(m){var x=Er(m)?Rd:Qe;return x(m)}function wx(m,x,R){(R?za(m,x,R):x===n)?x=1:x=Or(x);var Q=Er(m)?im:Ge;return Q(m,x)}function Am(m){var x=Er(m)?Bg:Zn;return x(m)}function _0(m){if(m==null)return 0;if(Qa(m))return Em(m)?_r(m):m.length;var x=To(m);return x==H||x==ue?m.size:B(m).length}function Cx(m,x,R){var Q=Er(m)?ta:pr;return R&&za(m,x,R)&&(x=n),Q(m,yr(x,3))}var b0=Ee(function(m,x){if(m==null)return[];var R=x.length;return R>1&&za(m,x[0],x[1])?x=[]:R>2&&za(x[0],x[1],x[2])&&(x=[x[0]]),Ft(m,Nr(x,1),[])}),Kd=Sd||function(){return Fi.Date.now()};function Yd(m,x){if(typeof x!="function")throw new Di(l);return m=Or(m),function(){if(--m<1)return x.apply(this,arguments)}}function x0(m,x,R){return x=R?n:x,x=m&&x==null?m.length:x,jc(m,it,n,n,n,n,x)}function A0(m,x){var R;if(typeof x!="function")throw new Di(l);return m=Or(m),function(){return--m>0&&(R=x.apply(this,arguments)),m<=1&&(x=n),R}}var vp=Ee(function(m,x,R){var Q=N;if(R.length){var pt=da(R,Ud(vp));Q|=K}return jc(m,Q,x,R,pt)}),w0=Ee(function(m,x,R){var Q=N|U;if(R.length){var pt=da(R,Ud(w0));Q|=K}return jc(x,Q,m,R,pt)});function _p(m,x,R){x=R?n:x;var Q=jc(m,j,n,n,n,n,n,x);return Q.placeholder=_p.placeholder,Q}function C0(m,x,R){x=R?n:x;var Q=jc(m,$,n,n,n,n,n,x);return Q.placeholder=C0.placeholder,Q}function $v(m,x,R){var Q,pt,Lt,re,ge,Pe,hn=0,fn=!1,xn=!1,Un=!0;if(typeof m!="function")throw new Di(l);x=ts(x)||0,Ki(R)&&(fn=!!R.leading,xn="maxWait"in R,Lt=xn?Wi(ts(R.maxWait)||0,x):Lt,Un="trailing"in R?!!R.trailing:Un);function dr(Ko){var Tu=Q,td=pt;return Q=pt=n,hn=Ko,re=m.apply(td,Tu),re}function wr(Ko){return hn=Ko,ge=Zd(ei,x),fn?dr(Ko):re}function qr(Ko){var Tu=Ko-Pe,td=Ko-hn,dC=x-Tu;return xn?Qi(dC,Lt-td):dC}function Cr(Ko){var Tu=Ko-Pe,td=Ko-hn;return Pe===n||Tu>=x||Tu<0||xn&&td>=Lt}function ei(){var Ko=Kd();if(Cr(Ko))return oi(Ko);ge=Zd(ei,qr(Ko))}function oi(Ko){return ge=n,Un&&Q?dr(Ko):(Q=pt=n,re)}function sc(){ge!==n&&Oa(ge),hn=0,Q=Pe=pt=ge=n}function Ks(){return ge===n?re:oi(Kd())}function lc(){var Ko=Kd(),Tu=Cr(Ko);if(Q=arguments,pt=this,Pe=Ko,Tu){if(ge===n)return wr(Pe);if(xn)return Oa(ge),ge=Zd(ei,x),dr(Pe)}return ge===n&&(ge=Zd(ei,x)),re}return lc.cancel=sc,lc.flush=Ks,lc}var Ix=Ee(function(m,x){return eh(m,1,x)}),Zv=Ee(function(m,x,R){return eh(m,ts(x)||0,R)});function Mx(m){return jc(m,q)}function wm(m,x){if(typeof m!="function"||x!=null&&typeof x!="function")throw new Di(l);var R=function(){var Q=arguments,pt=x?x.apply(this,Q):Q[0],Lt=R.cache;if(Lt.has(pt))return Lt.get(pt);var re=m.apply(this,Q);return R.cache=Lt.set(pt,re)||Lt,re};return R.cache=new(wm.Cache||fl),R}wm.Cache=fl;function Cm(m){if(typeof m!="function")throw new Di(l);return function(){var x=arguments;switch(x.length){case 0:return!m.call(this);case 1:return!m.call(this,x[0]);case 2:return!m.call(this,x[0],x[1]);case 3:return!m.call(this,x[0],x[1],x[2])}return!m.apply(this,x)}}function Sx(m){return A0(2,m)}var Ex=Au(function(m,x){x=x.length==1&&Er(x[0])?ii(x[0],Zi(yr())):ii(Nr(x,1),Zi(yr()));var R=x.length;return Ee(function(Q){for(var pt=-1,Lt=Qi(Q.length,R);++pt<Lt;)Q[pt]=x[pt].call(this,Q[pt]);return Xi(m,this,Q)})}),bp=Ee(function(m,x){var R=da(x,Ud(bp));return jc(m,K,n,x,R)}),Mu=Ee(function(m,x){var R=da(x,Ud(Mu));return jc(m,tt,n,x,R)}),Wv=vo(function(m,x){return jc(m,et,n,n,n,x)});function qv(m,x){if(typeof m!="function")throw new Di(l);return x=x===n?x:Or(x),Ee(m,x)}function Kv(m,x){if(typeof m!="function")throw new Di(l);return x=x==null?0:Wi(Or(x),0),Ee(function(R){var Q=R[x],pt=Da(R,0,x);return Q&&ua(pt,Q),Xi(m,this,pt)})}function Yv(m,x,R){var Q=!0,pt=!0;if(typeof m!="function")throw new Di(l);return Ki(R)&&(Q="leading"in R?!!R.leading:Q,pt="trailing"in R?!!R.trailing:pt),$v(m,x,{leading:Q,maxWait:x,trailing:pt})}function Xv(m){return x0(m,1)}function I0(m,x){return bp(Us(x),m)}function Qv(){if(!arguments.length)return[];var m=arguments[0];return Er(m)?m:[m]}function xp(m){return ga(m,S)}function Jv(m,x){return x=typeof x=="function"?x:n,ga(m,S,x)}function M0(m){return ga(m,C|S)}function t_(m,x){return x=typeof x=="function"?x:n,ga(m,C|S,x)}function $s(m,x){return x==null||lr(m,x,at(x))}function Fa(m,x){return m===x||m!==m&&x!==x}var e_=op(_u),n_=op(function(m,x){return m>=x}),ph=Bd(function(){return arguments}())?Bd:function(m){return Gi(m)&&tr.call(m,"callee")&&!Lc.call(m,"callee")},Er=ze.isArray,r_=go?Zi(go):Nd;function Qa(m){return m!=null&&qh(m.length)&&!Zs(m)}function bo(m){return Gi(m)&&Qa(m)}function i_(m){return m===!0||m===!1||Gi(m)&&io(m)==Me}var Ja=jf||Gx,o_=nl?Zi(nl):jd;function a_(m){return Gi(m)&&m.nodeType===1&&!Kh(m)}function s_(m){if(m==null)return!0;if(Qa(m)&&(Er(m)||typeof m=="string"||typeof m.splice=="function"||Ja(m)||Yh(m)||ph(m)))return!m.length;var x=To(m);if(x==H||x==ue)return!m.size;if(uh(m))return!B(m).length;for(var R in m)if(tr.call(m,R))return!1;return!0}function l_(m,x){return xu(m,x)}function Tx(m,x,R){R=typeof R=="function"?R:n;var Q=R?R(m,x):n;return Q===n?xu(m,x,n,R):!!Q}function S0(m){if(!Gi(m))return!1;var x=io(m);return x==Je||x==Be||typeof m.message=="string"&&typeof m.name=="string"&&!Kh(m)}function c_(m){return typeof m=="number"&&Ju(m)}function Zs(m){if(!Ki(m))return!1;var x=io(m);return x==Ln||x==Tt||x==be||x==jt}function E0(m){return typeof m=="number"&&m==Or(m)}function qh(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=ae}function Ki(m){var x=typeof m;return m!=null&&(x=="object"||x=="function")}function Gi(m){return m!=null&&typeof m=="object"}var Ap=Br?Zi(Br):r;function Im(m,x){return m===x||c(m,x,Yg(x))}function Px(m,x,R){return R=typeof R=="function"?R:n,c(m,x,Yg(x),R)}function kx(m){return Su(m)&&m!=+m}function Lx(m){if(fv(m))throw new nr(d);return p(m)}function Xd(m){return m===null}function ra(m){return m==null}function Su(m){return typeof m=="number"||Gi(m)&&io(m)==Rt}function Kh(m){if(!Gi(m)||io(m)!=gt)return!1;var x=Wl(m);if(x===null)return!0;var R=tr.call(x,"constructor")&&x.constructor;return typeof R=="function"&&R instanceof R&&Jr.call(R)==vr}var Mm=Bl?Zi(Bl):y;function u_(m){return E0(m)&&m>=-ae&&m<=ae}var Sm=Ic?Zi(Ic):A;function Em(m){return typeof m=="string"||!Er(m)&&Gi(m)&&io(m)==Ut}function _s(m){return typeof m=="symbol"||Gi(m)&&io(m)==Ie}var Yh=Ku?Zi(Ku):T;function Rx(m){return m===n}function h_(m){return Gi(m)&&To(m)==Le}function T0(m){return Gi(m)&&io(m)==Ke}var P0=op(Y),d_=op(function(m,x){return m<=x});function Qd(m){if(!m)return[];if(Qa(m))return Em(m)?fa(m):va(m);if(cl&&m[cl])return Lh(m[cl]());var x=To(m),R=x==H?Pc:x==ue?Gl:oa;return R(m)}function rc(m){if(!m)return m===0?m:0;if(m=ts(m),m===Bt||m===-Bt){var x=m<0?-1:1;return x*ye}return m===m?m:0}function Or(m){var x=rc(m),R=x%1;return x===x?R?x-R:x:0}function Tm(m){return m?na(Or(m),0,Jt):0}function ts(m){if(typeof m=="number")return m;if(_s(m))return en;if(Ki(m)){var x=typeof m.valueOf=="function"?m.valueOf():m;m=Ki(x)?x+"":x}if(typeof m!="string")return m===0?m:+m;m=Ul(m);var R=tu.test(m);return R||Uu.test(m)?qu(m.slice(2),R?2:8):Xn.test(m)?en:+m}function Jd(m){return vs(m,It(m))}function k0(m){return m?na(Or(m),-ae,ae):m===0?m:0}function ci(m){return m==null?"":Sr(m)}var L0=Bc(function(m,x){if(uh(x)||Qa(x)){vs(x,at(x),m);return}for(var R in x)tr.call(x,R)&&li(m,R,x[R])}),f_=Bc(function(m,x){vs(x,It(x),m)}),u=Bc(function(m,x,R,Q){vs(x,It(x),m,Q)}),i=Bc(function(m,x,R,Q){vs(x,at(x),m,Q)}),h=vo(Uh);function f(m,x){var R=gu(m);return x==null?R:Od(R,x)}var v=Ee(function(m,x){m=Gr(m);var R=-1,Q=x.length,pt=Q>2?x[2]:n;for(pt&&za(x[0],x[1],pt)&&(Q=1);++R<Q;)for(var Lt=x[R],re=It(Lt),ge=-1,Pe=re.length;++ge<Pe;){var hn=re[ge],fn=m[hn];(fn===n||Fa(fn,ps[hn])&&!tr.call(m,hn))&&(m[hn]=Lt[hn])}return m}),w=Ee(function(m){return m.push(n,uv),Xi(Ne,n,m)});function M(m,x){return Mc(m,yr(x,3),Ra)}function P(m,x){return Mc(m,yr(x,3),ih)}function z(m,x){return m==null?m:Vi(m,yr(x,3),It)}function V(m,x){return m==null?m:zd(m,yr(x,3),It)}function Z(m,x){return m&&Ra(m,yr(x,3))}function J(m,x){return m&&ih(m,yr(x,3))}function st(m){return m==null?[]:gs(m,at(m))}function lt(m){return m==null?[]:gs(m,It(m))}function dt(m,x,R){var Q=m==null?n:yl(m,x);return Q===n?R:Q}function At(m,x){return m!=null&&hv(m,x,Jf)}function Et(m,x){return m!=null&&hv(m,x,ah)}var Nt=jg(function(m,x,R){x!=null&&typeof x.toString!="function"&&(x=al.call(x)),m[x]=R},O0(ba)),ce=jg(function(m,x,R){x!=null&&typeof x.toString!="function"&&(x=al.call(x)),tr.call(m,x)?m[x].push(R):m[x]=[R]},yr),qt=Ee(js);function at(m){return Qa(m)?Qf(m):B(m)}function It(m){return Qa(m)?Qf(m,!0):G(m)}function Yt(m,x){var R={};return x=yr(x,3),Ra(m,function(Q,pt,Lt){ml(R,x(Q,pt,Lt),Q)}),R}function Oe(m,x){var R={};return x=yr(x,3),Ra(m,function(Q,pt,Lt){ml(R,pt,x(Q,pt,Lt))}),R}var sn=Bc(function(m,x,R){_t(m,x,R)}),Ne=Bc(function(m,x,R,Q){_t(m,x,R,Q)}),He=vo(function(m,x){var R={};if(m==null)return R;var Q=!1;x=ii(x,function(Lt){return Lt=Zo(Lt,m),Q||(Q=Lt.length>1),Lt}),vs(m,sp(m),R),Q&&(R=ga(R,C|E|S,Zg));for(var pt=x.length;pt--;)oo(R,x[pt]);return R});function pn(m,x){return vn(m,Cm(yr(x)))}var ln=vo(function(m,x){return m==null?{}:Zt(m,x)});function vn(m,x){if(m==null)return{};var R=ii(sp(m),function(Q){return[Q]});return x=yr(x),Qt(m,R,function(Q,pt){return x(Q,pt[0])})}function Xe(m,x,R){x=Zo(x,m);var Q=-1,pt=x.length;for(pt||(pt=1,m=n);++Q<pt;){var Lt=m==null?n:m[ec(x[Q])];Lt===n&&(Q=pt,Lt=R),m=Zs(Lt)?Lt.call(m):Lt}return m}function jn(m,x,R){return m==null?m:In(m,x,R)}function cr(m,x,R,Q){return Q=typeof Q=="function"?Q:n,m==null?m:In(m,x,R,Q)}var er=Gg(at),$n=Gg(It);function Vr(m,x,R){var Q=Er(m),pt=Q||Ja(m)||Yh(m);if(x=yr(x,4),R==null){var Lt=m&&m.constructor;pt?R=Q?new Lt:[]:Ki(m)?R=Zs(Lt)?gu(Wl(m)):{}:R={}}return(pt?Vo:Ra)(m,function(re,ge,Pe){return x(R,re,ge,Pe)}),R}function $i(m,x){return m==null?!0:oo(m,x)}function xo(m,x,R){return m==null?m:ao(m,x,Us(R))}function ia(m,x,R,Q){return Q=typeof Q=="function"?Q:n,m==null?m:ao(m,x,Us(R),Q)}function oa(m){return m==null?[]:uu(m,at(m))}function es(m){return m==null?[]:uu(m,It(m))}function Wo(m,x,R){return R===n&&(R=x,x=n),R!==n&&(R=ts(R),R=R===R?R:0),x!==n&&(x=ts(x),x=x===x?x:0),na(ts(m),x,R)}function Ni(m,x,R){return x=rc(x),R===n?(R=x,x=0):R=rc(R),m=ts(m),bu(m,x,R)}function Po(m,x,R){if(R&&typeof R!="boolean"&&za(m,x,R)&&(x=R=n),R===n&&(typeof x=="boolean"?(R=x,x=n):typeof m=="boolean"&&(R=m,m=n)),m===n&&x===n?(m=0,x=1):(m=rc(m),x===n?(x=m,m=0):x=rc(x)),m>x){var Q=m;m=x,x=Q}if(R||m%1||x%1){var pt=Uf();return Qi(m+pt*(x-m+ru("1e-"+((pt+"").length-1))),x)}return le(m,x)}var qo=Gh(function(m,x,R){return x=x.toLowerCase(),m+(R?ko(x):x)});function ko(m){return Pm(ci(m).toLowerCase())}function _a(m){return m=ci(m),m&&m.replace(Hu,du).replace(bi,"")}function Ws(m,x,R){m=ci(m),x=Sr(x);var Q=m.length;R=R===n?Q:na(Or(R),0,Q);var pt=R;return R-=x.length,R>=0&&m.slice(R,pt)==x}function Lo(m){return m=ci(m),m&&Fe.test(m)?m.replace(he,Hl):m}function ns(m){return m=ci(m),m&&Ue.test(m)?m.replace(gr,"\\$&"):m}var Ao=Gh(function(m,x,R){return m+(R?"-":"")+x.toLowerCase()}),Ro=Gh(function(m,x,R){return m+(R?" ":"")+x.toLowerCase()}),Do=Vd("toLowerCase");function lo(m,x,R){m=ci(m),x=Or(x);var Q=x?_r(m):0;if(!x||Q>=x)return m;var pt=(x-Q)/2;return lh(Qu(pt),R)+m+lh(Dh(pt),R)}function Si(m,x,R){m=ci(m),x=Or(x);var Q=x?_r(m):0;return x&&Q<x?m+lh(x-Q,R):m}function ic(m,x,R){m=ci(m),x=Or(x);var Q=x?_r(m):0;return x&&Q<x?lh(x-Q,R)+m:m}function tf(m,x,R){return R||x==null?x=0:x&&(x=+x),Pd(ci(m).replace(Gn,""),x||0)}function oc(m,x,R){return(R?za(m,x,R):x===n)?x=1:x=Or(x),De(ci(m),x)}function Dx(){var m=arguments,x=ci(m[0]);return m.length<3?x:x.replace(m[1],m[2])}var ef=Gh(function(m,x,R){return m+(R?"_":"")+x.toLowerCase()});function Xh(m,x,R){return R&&typeof R!="number"&&za(m,x,R)&&(x=R=n),R=R===n?Jt:R>>>0,R?(m=ci(m),m&&(typeof x=="string"||x!=null&&!Mm(x))&&(x=Sr(x),!x&&ol(m))?Da(fa(m),0,R):m.split(x,R)):[]}var nf=Gh(function(m,x,R){return m+(R?" ":"")+Pm(x)});function rf(m,x,R){return m=ci(m),R=R==null?0:na(Or(R),0,m.length),x=Sr(x),m.slice(R,R+x.length)==x}function of(m,x,R){var Q=Mt.templateSettings;R&&za(m,x,R)&&(x=n),m=ci(m),x=u({},x,Q,$g);var pt=u({},x.imports,Q.imports,$g),Lt=at(pt),re=uu(pt,Lt),ge,Pe,hn=0,fn=x.interpolate||Ri,xn="__p += '",Un=Ds((x.escape||Ri).source+"|"+fn.source+"|"+(fn===rn?Eo:Ri).source+"|"+(x.evaluate||Ri).source+"|$","g"),dr="//# sourceURL="+(tr.call(x,"sourceURL")?(x.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wr+"]")+`
`;m.replace(Un,function(Cr,ei,oi,sc,Ks,lc){return oi||(oi=sc),xn+=m.slice(hn,lc).replace(mi,Id),ei&&(ge=!0,xn+=`' +
__e(`+ei+`) +
'`),Ks&&(Pe=!0,xn+=`';
`+Ks+`;
__p += '`),oi&&(xn+=`' +
((__t = (`+oi+`)) == null ? '' : __t) +
'`),hn=lc+Cr.length,Cr}),xn+=`';
`;var wr=tr.call(x,"variable")&&x.variable;if(!wr)xn=`with (obj) {
`+xn+`
}
`;else if(Jn.test(wr))throw new nr(o);xn=(Pe?xn.replace(wt,""):xn).replace(kt,"$1").replace(vt,"$1;"),xn="function("+(wr||"obj")+`) {
`+(wr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ge?", __e = _.escape":"")+(Pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xn+`return __p
}`;var qr=b_(function(){return br(Lt,dr+"return "+xn).apply(n,re)});if(qr.source=xn,S0(qr))throw qr;return qr}function p_(m){return ci(m).toLowerCase()}function m_(m){return ci(m).toUpperCase()}function g_(m,x,R){if(m=ci(m),m&&(R||x===n))return Ul(m);if(!m||!(x=Sr(x)))return m;var Q=fa(m),pt=fa(x),Lt=Tc(Q,pt),re=kh(Q,pt)+1;return Da(Q,Lt,re).join("")}function y_(m,x,R){if(m=ci(m),m&&(R||x===n))return m.slice(0,Ae(m)+1);if(!m||!(x=Sr(x)))return m;var Q=fa(m),pt=kh(Q,fa(x))+1;return Da(Q,0,pt).join("")}function R0(m,x,R){if(m=ci(m),m&&(R||x===n))return m.replace(Gn,"");if(!m||!(x=Sr(x)))return m;var Q=fa(m),pt=Tc(Q,fa(x));return Da(Q,pt).join("")}function D0(m,x){var R=ut,Q=Ct;if(Ki(x)){var pt="separator"in x?x.separator:pt;R="length"in x?Or(x.length):R,Q="omission"in x?Sr(x.omission):Q}m=ci(m);var Lt=m.length;if(ol(m)){var re=fa(m);Lt=re.length}if(R>=Lt)return m;var ge=R-_r(Q);if(ge<1)return Q;var Pe=re?Da(re,0,ge).join(""):m.slice(0,ge);if(pt===n)return Pe+Q;if(re&&(ge+=Pe.length-ge),Mm(pt)){if(m.slice(ge).search(pt)){var hn,fn=Pe;for(pt.global||(pt=Ds(pt.source,ci(pi.exec(pt))+"g")),pt.lastIndex=0;hn=pt.exec(fn);)var xn=hn.index;Pe=Pe.slice(0,xn===n?ge:xn)}}else if(m.indexOf(Sr(pt),ge)!=ge){var Un=Pe.lastIndexOf(pt);Un>-1&&(Pe=Pe.slice(0,Un))}return Pe+Q}function Eu(m){return m=ci(m),m&&Kt.test(m)?m.replace(ie,qe):m}var v_=Gh(function(m,x,R){return m+(R?" ":"")+x.toUpperCase()}),Pm=Vd("toUpperCase");function __(m,x,R){return m=ci(m),x=R?n:x,x===n?fs(m)?yi(m):rl(m):m.match(x)||[]}var b_=Ee(function(m,x){try{return Xi(m,n,x)}catch(R){return S0(R)?R:new nr(R)}}),Ox=vo(function(m,x){return Vo(x,function(R){R=ec(R),ml(m,R,vp(m[R],m))}),m});function zx(m){var x=m==null?0:m.length,R=yr();return m=x?ii(m,function(Q){if(typeof Q[1]!="function")throw new Di(l);return[R(Q[0]),Q[1]]}):[],Ee(function(Q){for(var pt=-1;++pt<x;){var Lt=m[pt];if(Xi(Lt[0],this,Q))return Xi(Lt[1],this,Q)}})}function Fx(m){return Yn(ga(m,C))}function O0(m){return function(){return m}}function Bx(m,x){return m==null||m!==m?x:m}var Nx=cm(),ac=cm(!0);function ba(m){return m}function km(m){return L(typeof m=="function"?m:ga(m,C))}function jx(m){return rt(ga(m,C))}function Vx(m,x){return ft(m,ga(x,C))}var Ux=Ee(function(m,x){return function(R){return js(R,m,x)}}),xa=Ee(function(m,x){return function(R){return js(m,R,x)}});function rs(m,x,R){var Q=at(x),pt=gs(x,Q);R==null&&!(Ki(x)&&(pt.length||!Q.length))&&(R=x,x=m,m=this,pt=gs(x,at(x)));var Lt=!(Ki(R)&&"chain"in R)||!!R.chain,re=Zs(m);return Vo(pt,function(ge){var Pe=x[ge];m[ge]=Pe,re&&(m.prototype[ge]=function(){var hn=this.__chain__;if(Lt||hn){var fn=m(this.__wrapped__),xn=fn.__actions__=va(this.__actions__);return xn.push({func:Pe,args:arguments,thisArg:m}),fn.__chain__=hn,fn}return Pe.apply(m,ua([this.value()],arguments))})}),m}function Qh(){return Fi._===this&&(Fi._=Ea),this}function qs(){}function Jh(m){return m=Or(m),Ee(function(x){return Dt(x,m)})}var Uc=Vg(ii),C3=Vg(au),I3=Vg(ta);function hC(m){return $h(m)?ds(ec(m)):ne(m)}function M3(m){return function(x){return m==null?n:yl(m,x)}}var S3=ip(),E3=ip(!0);function Hx(){return[]}function Gx(){return!1}function T3(){return{}}function P3(){return""}function k3(){return!0}function L3(m,x){if(m=Or(m),m<1||m>ae)return[];var R=Jt,Q=Qi(m,Jt);x=yr(x),m-=Jt;for(var pt=cu(Q,x);++R<m;)x(R);return pt}function R3(m){return Er(m)?ii(m,ec):_s(m)?[m]:va(pm(ci(m)))}function D3(m){var x=++Os;return ci(m)+x}var O3=Nc(function(m,x){return m+x},0),z3=Hg("ceil"),F3=Nc(function(m,x){return m/x},1),B3=Hg("floor");function N3(m){return m&&m.length?Ka(m,ba,_u):n}function j3(m,x){return m&&m.length?Ka(m,yr(x,2),_u):n}function V3(m){return Yu(m,ba)}function U3(m,x){return Yu(m,yr(x,2))}function H3(m){return m&&m.length?Ka(m,ba,Y):n}function G3(m,x){return m&&m.length?Ka(m,yr(x,2),Y):n}var $3=Nc(function(m,x){return m*x},1),Z3=Hg("round"),W3=Nc(function(m,x){return m-x},0);function q3(m){return m&&m.length?Sa(m,ba):0}function K3(m,x){return m&&m.length?Sa(m,yr(x,2)):0}return Mt.after=Yd,Mt.ary=x0,Mt.assign=L0,Mt.assignIn=f_,Mt.assignInWith=u,Mt.assignWith=i,Mt.at=h,Mt.before=A0,Mt.bind=vp,Mt.bindAll=Ox,Mt.bindKey=w0,Mt.castArray=Qv,Mt.chain=vm,Mt.chunk=Zb,Mt.compact=Wb,Mt.concat=qb,Mt.cond=zx,Mt.conforms=Fx,Mt.constant=O0,Mt.countBy=Fv,Mt.create=f,Mt.curry=_p,Mt.curryRight=C0,Mt.debounce=$v,Mt.defaults=v,Mt.defaultsDeep=w,Mt.defer=Ix,Mt.delay=Zv,Mt.difference=e0,Mt.differenceBy=_v,Mt.differenceWith=n0,Mt.drop=bv,Mt.dropRight=r0,Mt.dropRightWhile=xv,Mt.dropWhile=Av,Mt.fill=mm,Mt.filter=Bv,Mt.flatMap=y0,Mt.flatMapDeep=vx,Mt.flatMapDepth=jv,Mt.flatten=a0,Mt.flattenDeep=dp,Mt.flattenDepth=Kb,Mt.flip=Mx,Mt.flow=Nx,Mt.flowRight=ac,Mt.fromPairs=s0,Mt.functions=st,Mt.functionsIn=lt,Mt.groupBy=_x,Mt.initial=Yb,Mt.intersection=Xb,Mt.intersectionBy=wv,Mt.intersectionWith=Cv,Mt.invert=Nt,Mt.invertBy=ce,Mt.invokeMap=xx,Mt.iteratee=km,Mt.keyBy=Hv,Mt.keys=at,Mt.keysIn=It,Mt.map=gp,Mt.mapKeys=Yt,Mt.mapValues=Oe,Mt.matches=jx,Mt.matchesProperty=Vx,Mt.memoize=wm,Mt.merge=sn,Mt.mergeWith=Ne,Mt.method=Ux,Mt.methodOf=xa,Mt.mixin=rs,Mt.negate=Cm,Mt.nthArg=Jh,Mt.omit=He,Mt.omitBy=pn,Mt.once=Sx,Mt.orderBy=yp,Mt.over=Uc,Mt.overArgs=Ex,Mt.overEvery=C3,Mt.overSome=I3,Mt.partial=bp,Mt.partialRight=Mu,Mt.partition=Vc,Mt.pick=ln,Mt.pickBy=vn,Mt.property=hC,Mt.propertyOf=M3,Mt.pull=Jb,Mt.pullAll=Mv,Mt.pullAllBy=tx,Mt.pullAllWith=ex,Mt.pullAt=nx,Mt.range=S3,Mt.rangeRight=E3,Mt.rearg=Wv,Mt.reject=v0,Mt.remove=rx,Mt.rest=qv,Mt.reverse=gm,Mt.sampleSize=wx,Mt.set=jn,Mt.setWith=cr,Mt.shuffle=Am,Mt.slice=c0,Mt.sortBy=b0,Mt.sortedUniq=Pv,Mt.sortedUniqBy=ax,Mt.split=Xh,Mt.spread=Kv,Mt.tail=sx,Mt.take=lx,Mt.takeRight=kv,Mt.takeRightWhile=cx,Mt.takeWhile=ux,Mt.tap=Ov,Mt.throttle=Yv,Mt.thru=nc,Mt.toArray=Qd,Mt.toPairs=er,Mt.toPairsIn=$n,Mt.toPath=R3,Mt.toPlainObject=Jd,Mt.transform=Vr,Mt.unary=Xv,Mt.union=pp,Mt.unionBy=Lv,Mt.unionWith=u0,Mt.uniq=Rv,Mt.uniqBy=_o,Mt.uniqWith=h0,Mt.unset=$i,Mt.unzip=d0,Mt.unzipWith=f0,Mt.update=xo,Mt.updateWith=ia,Mt.values=oa,Mt.valuesIn=es,Mt.without=p0,Mt.words=__,Mt.wrap=I0,Mt.xor=m0,Mt.xorBy=hx,Mt.xorWith=dx,Mt.zip=fx,Mt.zipObject=px,Mt.zipObjectDeep=Dv,Mt.zipWith=Xa,Mt.entries=er,Mt.entriesIn=$n,Mt.extend=f_,Mt.extendWith=u,rs(Mt,Mt),Mt.add=O3,Mt.attempt=b_,Mt.camelCase=qo,Mt.capitalize=ko,Mt.ceil=z3,Mt.clamp=Wo,Mt.clone=xp,Mt.cloneDeep=M0,Mt.cloneDeepWith=t_,Mt.cloneWith=Jv,Mt.conformsTo=$s,Mt.deburr=_a,Mt.defaultTo=Bx,Mt.divide=F3,Mt.endsWith=Ws,Mt.eq=Fa,Mt.escape=Lo,Mt.escapeRegExp=ns,Mt.every=yx,Mt.find=Nv,Mt.findIndex=i0,Mt.findKey=M,Mt.findLast=g0,Mt.findLastIndex=o0,Mt.findLastKey=P,Mt.floor=B3,Mt.forEach=Vv,Mt.forEachRight=Uv,Mt.forIn=z,Mt.forInRight=V,Mt.forOwn=Z,Mt.forOwnRight=J,Mt.get=dt,Mt.gt=e_,Mt.gte=n_,Mt.has=At,Mt.hasIn=Et,Mt.head=Wd,Mt.identity=ba,Mt.includes=bx,Mt.indexOf=l0,Mt.inRange=Ni,Mt.invoke=qt,Mt.isArguments=ph,Mt.isArray=Er,Mt.isArrayBuffer=r_,Mt.isArrayLike=Qa,Mt.isArrayLikeObject=bo,Mt.isBoolean=i_,Mt.isBuffer=Ja,Mt.isDate=o_,Mt.isElement=a_,Mt.isEmpty=s_,Mt.isEqual=l_,Mt.isEqualWith=Tx,Mt.isError=S0,Mt.isFinite=c_,Mt.isFunction=Zs,Mt.isInteger=E0,Mt.isLength=qh,Mt.isMap=Ap,Mt.isMatch=Im,Mt.isMatchWith=Px,Mt.isNaN=kx,Mt.isNative=Lx,Mt.isNil=ra,Mt.isNull=Xd,Mt.isNumber=Su,Mt.isObject=Ki,Mt.isObjectLike=Gi,Mt.isPlainObject=Kh,Mt.isRegExp=Mm,Mt.isSafeInteger=u_,Mt.isSet=Sm,Mt.isString=Em,Mt.isSymbol=_s,Mt.isTypedArray=Yh,Mt.isUndefined=Rx,Mt.isWeakMap=h_,Mt.isWeakSet=T0,Mt.join=Qb,Mt.kebabCase=Ao,Mt.last=vl,Mt.lastIndexOf=fp,Mt.lowerCase=Ro,Mt.lowerFirst=Do,Mt.lt=P0,Mt.lte=d_,Mt.max=N3,Mt.maxBy=j3,Mt.mean=V3,Mt.meanBy=U3,Mt.min=H3,Mt.minBy=G3,Mt.stubArray=Hx,Mt.stubFalse=Gx,Mt.stubObject=T3,Mt.stubString=P3,Mt.stubTrue=k3,Mt.multiply=$3,Mt.nth=Iv,Mt.noConflict=Qh,Mt.noop=qs,Mt.now=Kd,Mt.pad=lo,Mt.padEnd=Si,Mt.padStart=ic,Mt.parseInt=tf,Mt.random=Po,Mt.reduce=fh,Mt.reduceRight=Gv,Mt.repeat=oc,Mt.replace=Dx,Mt.result=Xe,Mt.round=Z3,Mt.runInContext=me,Mt.sample=Ax,Mt.size=_0,Mt.snakeCase=ef,Mt.some=Cx,Mt.sortedIndex=Sv,Mt.sortedIndexBy=Ev,Mt.sortedIndexOf=Tv,Mt.sortedLastIndex=ix,Mt.sortedLastIndexBy=ym,Mt.sortedLastIndexOf=ox,Mt.startCase=nf,Mt.startsWith=rf,Mt.subtract=W3,Mt.sum=q3,Mt.sumBy=K3,Mt.template=of,Mt.times=L3,Mt.toFinite=rc,Mt.toInteger=Or,Mt.toLength=Tm,Mt.toLower=p_,Mt.toNumber=ts,Mt.toSafeInteger=k0,Mt.toString=ci,Mt.toUpper=m_,Mt.trim=g_,Mt.trimEnd=y_,Mt.trimStart=R0,Mt.truncate=D0,Mt.unescape=Eu,Mt.uniqueId=D3,Mt.upperCase=v_,Mt.upperFirst=Pm,Mt.each=Vv,Mt.eachRight=Uv,Mt.first=Wd,rs(Mt,function(){var m={};return Ra(Mt,function(x,R){tr.call(Mt.prototype,R)||(m[R]=x)}),m}(),{chain:!1}),Mt.VERSION=a,Vo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(m){Mt[m].placeholder=Mt}),Vo(["drop","take"],function(m,x){kr.prototype[m]=function(R){R=R===n?1:Wi(Or(R),0);var Q=this.__filtered__&&!x?new kr(this):this.clone();return Q.__filtered__?Q.__takeCount__=Qi(R,Q.__takeCount__):Q.__views__.push({size:Qi(R,Jt),type:m+(Q.__dir__<0?"Right":"")}),Q},kr.prototype[m+"Right"]=function(R){return this.reverse()[m](R).reverse()}}),Vo(["filter","map","takeWhile"],function(m,x){var R=x+1,Q=R==X||R==Vt;kr.prototype[m]=function(pt){var Lt=this.clone();return Lt.__iteratees__.push({iteratee:yr(pt,3),type:R}),Lt.__filtered__=Lt.__filtered__||Q,Lt}}),Vo(["head","last"],function(m,x){var R="take"+(x?"Right":"");kr.prototype[m]=function(){return this[R](1).value()[0]}}),Vo(["initial","tail"],function(m,x){var R="drop"+(x?"":"Right");kr.prototype[m]=function(){return this.__filtered__?new kr(this):this[R](1)}}),kr.prototype.compact=function(){return this.filter(ba)},kr.prototype.find=function(m){return this.filter(m).head()},kr.prototype.findLast=function(m){return this.reverse().find(m)},kr.prototype.invokeMap=Ee(function(m,x){return typeof m=="function"?new kr(this):this.map(function(R){return js(R,m,x)})}),kr.prototype.reject=function(m){return this.filter(Cm(yr(m)))},kr.prototype.slice=function(m,x){m=Or(m);var R=this;return R.__filtered__&&(m>0||x<0)?new kr(R):(m<0?R=R.takeRight(-m):m&&(R=R.drop(m)),x!==n&&(x=Or(x),R=x<0?R.dropRight(-x):R.take(x-m)),R)},kr.prototype.takeRightWhile=function(m){return this.reverse().takeWhile(m).reverse()},kr.prototype.toArray=function(){return this.take(Jt)},Ra(kr.prototype,function(m,x){var R=/^(?:filter|find|map|reject)|While$/.test(x),Q=/^(?:head|last)$/.test(x),pt=Mt[Q?"take"+(x=="last"?"Right":""):x],Lt=Q||/^find/.test(x);pt&&(Mt.prototype[x]=function(){var re=this.__wrapped__,ge=Q?[1]:arguments,Pe=re instanceof kr,hn=ge[0],fn=Pe||Er(re),xn=function(ei){var oi=pt.apply(Mt,ua([ei],ge));return Q&&Un?oi[0]:oi};fn&&R&&typeof hn=="function"&&hn.length!=1&&(Pe=fn=!1);var Un=this.__chain__,dr=!!this.__actions__.length,wr=Lt&&!Un,qr=Pe&&!dr;if(!Lt&&fn){re=qr?re:new kr(this);var Cr=m.apply(re,ge);return Cr.__actions__.push({func:nc,args:[xn],thisArg:n}),new qa(Cr,Un)}return wr&&qr?m.apply(this,ge):(Cr=this.thru(xn),wr?Q?Cr.value()[0]:Cr.value():Cr)})}),Vo(["pop","push","shift","sort","splice","unshift"],function(m){var x=Za[m],R=/^(?:push|sort|unshift)$/.test(m)?"tap":"thru",Q=/^(?:pop|shift)$/.test(m);Mt.prototype[m]=function(){var pt=arguments;if(Q&&!this.__chain__){var Lt=this.value();return x.apply(Er(Lt)?Lt:[],pt)}return this[R](function(re){return x.apply(Er(re)?re:[],pt)})}}),Ra(kr.prototype,function(m,x){var R=Mt[x];if(R){var Q=R.name+"";tr.call(Dc,Q)||(Dc[Q]=[]),Dc[Q].push({name:x,func:R})}}),Dc[rp(n,U).name]=[{name:"wrapper",func:n}],kr.prototype.clone=Oc,kr.prototype.reverse=ka,kr.prototype.value=ma,Mt.prototype.at=_m,Mt.prototype.chain=mp,Mt.prototype.commit=qd,Mt.prototype.next=bm,Mt.prototype.plant=mx,Mt.prototype.reverse=gx,Mt.prototype.toJSON=Mt.prototype.valueOf=Mt.prototype.value=zv,Mt.prototype.first=Mt.prototype.head,cl&&(Mt.prototype[cl]=xm),Mt},si=Hr();Ha?((Ha.exports=si)._=si,ou._=si):Fi._=si}).call(Io)})(A1,A1.exports);var Qy=A1.exports;const I2=p2("map.queue",{pendingFunctions:{},pendingRemoveFunctions:{},mapIds:{}}),K_=I2.pendingFunctions,hA=I2.pendingRemoveFunctions,cg=I2.mapIds;function _d(t,e,n){K_[t]=e,OT()}function OT(){for(const t in cg)if(Object.prototype.hasOwnProperty.call(cg,t)){const e=cg[t];for(const n in K_)if(Object.prototype.hasOwnProperty.call(K_,n)&&!e[n]){const a=K_[n];a(t),e[n]=!0}}}function jI(t){cg[t]={},OT()}function oF(t){for(const e in hA){const n=cg[t];if(Object.prototype.hasOwnProperty.call(hA,e)&&!n[e]){const a=hA[e];a(t),n[e]=!0}}cg[t]={}}const wl=p2("map.core",{state:{},getters:{getIsMulti(t){return!!wl.state[t].isMulti},getMaps(t){return wl.state[t].maps}},actions:{getMapStore(t){const e=wl.state[t];if(e)return e},initMaps(t,e){wl.state[t]={maps:e,isMulti:e.length>1},jI(t)},initMap(t,e){wl.state[t]={map:e},jI(t)},removeMap(t){delete wl.state[t],oF(t)},getMap(t,e){var s,d;const n=(s=wl.state[t])==null?void 0:s.map,a=(d=wl.state[t])==null?void 0:d.maps;a&&a.forEach(l=>{e&&e(l)}),n&&e&&e(n)}}}),{state:aF,getters:XQ,actions:Af}=wl;function Vu(t,e,n){const a=Af.getMapStore(t);if(a)return a[e]||(a[e]=n||{}),a[e]}function Bo(t,e){const n=Af.getMapStore(t);return(n==null?void 0:n[e])||{}}const Yc=wl.actions.getMap,w1="lang";function zT(t){Vu(t,w1,ls({locale:{},localeDefault:{}}))}function vb(t){const e=Bo(t,w1);return e||(zT(t),Bo(t,w1))}function sF(t,e){const n=vb(t);n&&(n.locale=Qy.merge({},n.locale,e))}function lF(t,e){const n=vb(t);n&&(n.localeDefault=Qy.merge({},n.localeDefault,e))}function cF(t,e){const n=vb(t);n&&(n.translate=e)}_d(w1,zT);const uF=1e3,zm=new Map;function jo(t){if(!t)throw new Error("mapId is required");const e=bn(()=>vb(t));function n(o,g){var C,E,S;if((C=e.value)!=null&&C.translate)return e.value.translate(o,g);const _=vw((E=e.value)==null?void 0:E.locale,o);if(_!==void 0)return VI(_,g);const I=vw((S=e.value)==null?void 0:S.localeDefault,o);return I!==void 0?VI(I,g):o}const a=bn(()=>n);function s(o){sF(t,o)}function d(o){lF(t,o)}function l(o){cF(t,o)}return{trans:a,setLocale:s,setLocaleDefault:d,setTranslate:l}}function vw(t,e,n){if(!t||!e)return n;const a=Array.isArray(e)?e.join("."):e,s=`${JSON.stringify(t)}_${a}`;if(zm.has(s))return zm.get(s);zm.size>=uF&&zm.clear();const d=Array.isArray(e)?e:e.split(".").filter(o=>o.length);if(d.length<1){const o=t===void 0?n:t;return o!==void 0&&o!==n&&zm.set(s,o),o}const l=vw(t[d.shift()],d,n);return l!==void 0&&l!==n&&zm.set(s,l),l}function VI(t,e){return t?e?t.replace(/\{(\w+)\}/g,(n,a)=>{const s=e[a];return s!==void 0?String(s):n}):t:""}const Ur=p2("drag",{state:{container:ls({}),componentCard:void 0,componentCardHeader:void 0,componentCardSidebarToggle:void 0},getters:{getComponentCard(t){return Ur.state.componentCard},getComponentCardHeader(t){return Ur.state.componentCardHeader},getComponentCardSidebarToggle(t){return Ur.state.componentCardSidebarToggle},getItems(t){return Ur.actions.getContainer(t).items},getItemsShow(t){return Ur.actions.getContainer(t).show},getWidth(t){return Ur.actions.getContainer(t).width},getHeight(t){return Ur.actions.getContainer(t).height},getIsMobile(t){return Ur.actions.getContainer(t).isMobile}},actions:{initContainer(t){Ur.state.container[t]={items:[],show:[],actions:{},height:0,width:0,isMobile:!1}},removeContainer(t){delete Ur.state.container[t]},getContainer(t){if(!t)throw"Not set container id";const e=Ur.state.container[t];if(!e)throw"Not found container for id "+t;return e},setComponentCard(t){Ur.state.componentCard=t},setComponentCardHeader(t){Ur.state.componentCardHeader=t},setComponentCardSidebarToggle(t){Ur.state.componentCardSidebarToggle=t},setParentProps(t,e){const n=Ur.actions.getContainer(t);n.width=e.width,n.height=e.height,n.isMobile=e.isMobile},registerItem(t,e){Ur.actions.getContainer(t).items.push(e)},registerAction(t,e,n){const a=Ur.actions.getContainer(t);a.actions[e]=n},unRegisterItem(t,e){const n=Ur.state.container[t];n&&(n.items=n.items.filter(a=>a!==e),n.show=n.show.filter(a=>a!==e),delete n.actions[e])},registerItemShow(t,e,n){hF(t,e,n),dA(t)},setToBack(t,e){if(!t||!e)return;const n=UI(t),a=n.show.findIndex(s=>s==e);a>0&&(n.show.splice(a,1),n.show.unshift(e),dA(t))},setToFront(t,e){if(!t||!e)return;const n=UI(t),a=n.show.findIndex(s=>s==e);a<n.show.length-1&&(n.show.splice(a,1),n.show.push(e),dA(t))}}});function hF(t,e,n){const a=Ur.actions.getContainer(t),s=a.show;if(n&&!s.includes(e))s.push(e);else if(!n){const d=s.indexOf(e);d!==-1&&s.splice(d,1)}a.show=s}function dA(t){Ur.actions.getContainer(t).show.forEach((n,a)=>{const s=dF(t,n);s&&s.setZIndex(a<0?1:a+2)})}function dF(t,e){return Ur.actions.getContainer(t).actions[e]}function UI(t){const e=Ur.state.container[t];if(!e)throw"Not found container for id "+t;return e}function fF(t){Ur.actions.initContainer(t)}function pF(t){Ur.actions.removeContainer(t)}const mF=Ur.actions.setParentProps;function gF(t,e){Ur.actions.registerItem(t,e)}function yF(t,e){Ur.actions.unRegisterItem(t,e)}const HI=Ur.actions.registerItemShow,vF=Ur.actions.registerAction,_F=Ur.actions.setToFront,bF=Ur.actions.setToBack;Ur.actions.setComponentCard;Ur.actions.setComponentCardHeader;Ur.actions.setComponentCardSidebarToggle;const xF=["id"],AF=rr({__name:"draggable-container",props:{containerId:{}},emits:{init:t=>!0,destroy:t=>!0},setup(t,{emit:e}){const n=e,a=gn(),{containerId:s}=t,d=gn(s||`draggable-container-${ju()}`),l=gn(!1);bn(()=>Ur.state),mo(()=>{fF(d.value),window.addEventListener("resize",o),El(()=>{o(),l.value=!0,n("init",d.value)})}),yd(()=>{pF(d.value),window.removeEventListener("resize",o),n("destroy",d.value)}),xf("containerId",d);function o(){var _,I;const g=((_=a.value)==null?void 0:_.clientWidth)||0;mF(d.value,{width:g,height:((I=a.value)==null?void 0:I.clientHeight)||0,isMobile:g<600})}return(g,_)=>(St(),pe("div",{class:"draggable-container",ref_key:"box",ref:a,id:g.containerId},[d.value&&l.value?qn(g.$slots,"default",{key:0,containerId:g.containerId},void 0,!0):Cn("",!0)],8,xF))}}),wF=Vn(AF,[["__scopeId","data-v-57a91267"]]),CF={props:{height:{},width:{}},name:"MapCard",data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},IF={class:"card-container"},MF=J1('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1);function SF(t,e,n,a,s,d){return St(),pe("div",Tr({class:"card",style:d.cardStyle},t.$attrs),[zt("div",IF,[qn(t.$slots,"default")]),MF],16)}const EF=Vn(CF,[["render",SF]]),TF={name:"MapHeader"},M2=t=>(_c("data-v-9b566e91"),t=t(),bc(),t),PF=M2(()=>zt("hr",{class:"map-divider"},null,-1)),kF={class:"draggable-header"},LF={class:"draggable-header__content"},RF={class:"draggable-header__title"},DF=M2(()=>zt("div",{class:"map-spacer"},null,-1)),OF=M2(()=>zt("hr",{class:"map-divider"},null,-1));function zF(t,e,n,a,s,d){return St(),pe(mr,null,[PF,zt("div",kF,[zt("div",LF,[qn(t.$slots,"pre-title",{},void 0,!0),zt("div",RF,[qn(t.$slots,"title",{},void 0,!0)]),DF,qn(t.$slots,"extra-btn",{},void 0,!0)])]),OF],64)}const FF=Vn(TF,[["render",zF],["__scopeId","data-v-9b566e91"]]);function _b(t){const e=bn(()=>Ur.getters.getComponentCard(t.containerId)||t.componentCard||EF),n=bn(()=>Ur.getters.getComponentCardHeader(t.containerId)||t.componentCardHeader||FF);return{componentCard:e,componentCardHeader:n}}const BF={componentCard:{type:[String,Object]},componentCardHeader:{type:[String,Object]}},NF={name:"ArrangeBringForwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},jF=["aria-hidden","aria-label"],VF=["fill","width","height"],UF={d:"M2,2H16V16H2V2M22,8V22H8V18H10V20H20V10H18V8H22Z"},HF={key:0};function GF(t,e,n,a,s,d){return St(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrange-bring-forward-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(St(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[zt("path",UF,[n.title?(St(),pe("title",HF,Rn(n.title),1)):Cn("",!0)])],8,VF))],16,jF)}const $F=Vn(NF,[["render",GF]]),ZF={name:"ArrangeSendBackwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},WF=["aria-hidden","aria-label"],qF=["fill","width","height"],KF={d:"M2,2H16V16H2V2M22,8V22H8V18H18V8H22M4,4V14H14V4H4Z"},YF={key:0};function XF(t,e,n,a,s,d){return St(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrange-send-backward-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(St(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[zt("path",KF,[n.title?(St(),pe("title",YF,Rn(n.title),1)):Cn("",!0)])],8,qF))],16,WF)}const QF=Vn(ZF,[["render",XF]]),JF={name:"ArrowDownDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},tB=["aria-hidden","aria-label"],eB=["fill","width","height"],nB={d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M7,10L12,15L17,10H7Z"},rB={key:0};function iB(t,e,n,a,s,d){return St(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrow-down-drop-circle-outline-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(St(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[zt("path",nB,[n.title?(St(),pe("title",rB,Rn(n.title),1)):Cn("",!0)])],8,eB))],16,tB)}const GI=Vn(JF,[["render",iB]]),oB={name:"ArrowUpDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},aB=["aria-hidden","aria-label"],sB=["fill","width","height"],lB={d:"M12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M17,14L12,9L7,14H17Z"},cB={key:0};function uB(t,e,n,a,s,d){return St(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrow-up-drop-circle-outline-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(St(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[zt("path",lB,[n.title?(St(),pe("title",cB,Rn(n.title),1)):Cn("",!0)])],8,sB))],16,aB)}const $I=Vn(oB,[["render",uB]]),hB={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},dB=["aria-hidden","aria-label"],fB=["fill","width","height"],pB={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},mB={key:0};function gB(t,e,n,a,s,d){return St(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon close-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(St(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[zt("path",pB,[n.title?(St(),pe("title",mB,Rn(n.title),1)):Cn("",!0)])],8,fB))],16,dB)}const yB=Vn(hB,[["render",gB]]),vB={name:"DragVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},_B=["aria-hidden","aria-label"],bB=["fill","width","height"],xB={d:"M22.67,12L18.18,16.5L15.67,14L17.65,12L15.67,10.04L18.18,7.53L22.67,12M12,1.33L16.47,5.82L13.96,8.33L12,6.35L10,8.33L7.5,5.82L12,1.33M12,22.67L7.53,18.18L10.04,15.67L12,17.65L14,15.67L16.5,18.18L12,22.67M1.33,12L5.82,7.5L8.33,10L6.35,12L8.33,13.96L5.82,16.47L1.33,12M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10Z"},AB={key:0};function wB(t,e,n,a,s,d){return St(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon drag-variant-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(St(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[zt("path",xB,[n.title?(St(),pe("title",AB,Rn(n.title),1)):Cn("",!0)])],8,bB))],16,_B)}const CB=Vn(vB,[["render",wB]]),IB={name:"MenuLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},MB=["aria-hidden","aria-label"],SB=["fill","width","height"],EB={d:"M14,7L9,12L14,17V7Z"},TB={key:0};function PB(t,e,n,a,s,d){return St(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon menu-left-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(St(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[zt("path",EB,[n.title?(St(),pe("title",TB,Rn(n.title),1)):Cn("",!0)])],8,SB))],16,MB)}const ZI=Vn(IB,[["render",PB]]),kB={name:"MenuRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},LB=["aria-hidden","aria-label"],RB=["fill","width","height"],DB={d:"M10,17L15,12L10,7V17Z"},OB={key:0};function zB(t,e,n,a,s,d){return St(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon menu-right-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(St(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[zt("path",DB,[n.title?(St(),pe("title",OB,Rn(n.title),1)):Cn("",!0)])],8,RB))],16,LB)}const WI=Vn(kB,[["render",zB]]);function Jy(){return{CloseIcon:yB,FullscreenIcon:GI,OffFullscreenIcon:$I,ToBackIcon:QF,ToFrontIcon:$F,ExpandedIcon:$I,CloseExpandedIcon:GI,DragIcon:CB,SidebarLeftExpandedIcon:ZI,SidebarLeftCloseExpandedIcon:WI,SidebarRightExpandedIcon:WI,SidebarRightCloseExpandedIcon:ZI}}function FB(t,e){return e.length<1?!1:e[e.length-1]==t}function BB(t,e){return e.length<1?!1:e[0]==t}function bb(t,e,n){const a=gn(`draggable-item-${ju()}`),s=gn(0);function d(l){s.value=l}return mo(()=>{gF(t,a.value),vF(t,a.value,{setZIndex:d}),e.value&&HI(t,a.value,e.value)}),yd(()=>{yF(t,a.value)}),Xo(e,l=>{HI(t,a.value,l)}),{itemId:a,zIndex:s}}function xb(t,e){const n=bn(()=>Ur.getters.getItems(t)),a=bn(()=>Ur.getters.getItemsShow(t)),s=bn(()=>FB(e,a.value)),d=bn(()=>BB(e,a.value)),l=bn(()=>a.value.length>1);function o(){bF(t,e)}function g(){_F(t,e)}return{items:n,itemShows:a,isLast:s,isFirst:d,isHasItems:l,onToBack:o,onToFront:g}}function NB(t){const e=bn(()=>Ur.getters.getWidth(t)),n=bn(()=>Ur.getters.getHeight(t));return{containerWidth:e,containerHeight:n}}const Ab={disabledExpand:Boolean,disabledHeader:Boolean,disabledClose:Boolean,disabledOrder:Boolean,containerId:String,title:{type:String,default:""},...BF};function wb(t,e,n){const a=gn(!!t.show||!!n);return Xo(()=>t.show,d=>{a.value=d}),{show:bn({get(){return a.value},set(d){a.value=d,e("update:show",d),d||e("close")}})}}const Cb={show:Boolean},Ib={"update:show":t=>Boolean,close:()=>Boolean};function Mb(t,e,n){const a=gn(!!n);Xo(()=>t.expand,l=>{a.value=l});const s=bn({get(){return a.value},set(l){a.value=l,e("update:expand",l)}});function d(){s.value=!s.value}return{expand:s,toggle:d}}const Sb={expand:Boolean},Eb={"update:expand":t=>Boolean},jB={props:{height:{default:32},width:{default:32},disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},bindClass(){return{"map-control-button--disabled":this.disabled}}}},VB={class:"map-control-button__content"};function UB(t,e,n,a,s,d){return St(),pe("button",Tr({class:"map-control-button"},t.$attrs,{style:d.bindStyle,class:d.bindClass}),[zt("span",VB,[qn(t.$slots,"default",{},void 0,!0)])],16)}const Na=Vn(jB,[["render",UB],["__scopeId","data-v-cfd74f51"]]),HB={key:0},GB={key:1},$B={name:"MapSidebarToggle"},ZB=rr({...$B,props:{right:Boolean,expand:Boolean},setup(t){const{SidebarLeftExpandedIcon:e,SidebarLeftCloseExpandedIcon:n,SidebarRightExpandedIcon:a,SidebarRightCloseExpandedIcon:s}=Jy();return(d,l)=>(St(),pe("button",null,[t.right?(St(),pe("span",GB,[t.expand?(St(),tn(ct(a),{key:0,size:16})):(St(),tn(ct(s),{key:1,size:16}))])):(St(),pe("span",HB,[t.expand?(St(),tn(ct(e),{key:0,size:16})):(St(),tn(ct(n),{key:1,size:16}))]))]))}}),WB=Vn(ZB,[["__scopeId","data-v-cc94c956"]]),qB={class:"sidebar-container--content"},KB={class:"draggable-sidebar"},YB={class:"draggable-sidebar-content"},XB={key:0,class:"complex-button-close"},QB={key:0},JB={key:1},tN={name:"DraggableItemSideBar"},eN=rr({...tN,props:{...Cb,...Sb,...Ab,componentMapSidebarToggle:{type:[String,Object]},width:{type:[Number,String],default:"auto"},right:Boolean},emits:{...Ib,...Eb},setup(t,{emit:e}){const{CloseIcon:n,SidebarLeftExpandedIcon:a,SidebarLeftCloseExpandedIcon:s,SidebarRightExpandedIcon:d,SidebarRightCloseExpandedIcon:l,ToBackIcon:o,ToFrontIcon:g}=Jy(),_=t,I=e,C=Va("containerId",gn(_.containerId||""));if(!C.value)throw"Not set container id";const{show:E}=wb(_,I),{zIndex:S,itemId:k}=bb(C.value,E),{isLast:D,isFirst:N,isHasItems:U,onToBack:F,onToFront:j}=xb(C.value,k.value),{expand:$,toggle:K}=Mb(_,I,!0),tt=bn(()=>!_.width||_.width=="auto"),{componentCard:it,componentCardHeader:et}=_b({..._,containerId:C.value});bn(()=>Ur.getters.getComponentCardSidebarToggle(C.value)||_.componentMapSidebarToggle||WB);function q(){E.value=!1}const ut=bn(()=>{let Ct={};return Ct.zIndex=S.value,_.width&&_.width!="auto"&&(_.width&&!isNaN(+_.width)?Ct.width=_.width+"px":Ct.width=_.width),Ct});return(Ct,ot)=>ct(E)?(St(),pe("div",{key:0,class:Li(["sidebar-container",{expand:ct($),"left-sidebar-container":!t.right,"right-sidebar-container":t.right,"auto-sidebar-container":tt.value}]),style:fi(ut.value)},[zt("div",qB,[(St(),tn(sa(ct(it)),{width:"100%",height:"100%"},{default:Se(()=>[zt("div",KB,[Ct.disabledHeader?Cn("",!0):(St(),tn(sa(ct(et)),{key:0},{title:Se(()=>[qn(Ct.$slots,"title",{},()=>[ho(Rn(Ct.title),1)],!0)]),"extra-btn":Se(()=>[qn(Ct.$slots,"extra-btn",{},void 0,!0),ct(U)&&!Ct.disabledOrder?(St(),pe(mr,{key:0},[te(Na,{disabled:ct(N),onClick:ot[0]||(ot[0]=bt=>ct(F)())},{default:Se(()=>[te(ct(o),{size:16})]),_:1},8,["disabled"]),te(Na,{disabled:ct(D),onClick:ot[1]||(ot[1]=bt=>ct(j)())},{default:Se(()=>[te(ct(g),{size:16})]),_:1},8,["disabled"])],64)):Cn("",!0),Ct.disabledClose?Cn("",!0):(St(),tn(Na,{key:1,onClick:q},{default:Se(()=>[te(ct(n),{size:16})]),_:1}))]),_:3})),zt("div",YB,[qn(Ct.$slots,"default",{},void 0,!0)])])]),_:3}))]),ct(E)&&!Ct.disabledExpand?(St(),pe("div",XB,[zt("button",{onClick:ot[2]||(ot[2]=(...bt)=>ct(K)&&ct(K)(...bt))},[t.right?(St(),pe("span",JB,[ct($)?(St(),tn(ct(d),{key:0,size:16})):(St(),tn(ct(l),{key:1,size:16}))])):(St(),pe("span",QB,[ct($)?(St(),tn(ct(a),{key:0,size:16})):(St(),tn(ct(s),{key:1,size:16}))]))])])):Cn("",!0)],6)):Cn("",!0)}}),nN=Vn(eN,[["__scopeId","data-v-a9ffb40e"]]);function qI(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Fm(t,e,n,a=1){const[s,d]=typeof a=="number"?[a,a]:a,l=Math.round(e/s/t[0])*t[0],o=Math.round(n/d/t[1])*t[1];return[l,o]}function fA(t,e,n){return t-e-n}function pA(t,e,n){return t-e-n}function Gc(t,e,n){return e!==null&&t<e?e:n!==null&&n<t?n:t}function KI(t,e,n){let a=t;const s=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(d=>qI(a[d]));if(!qI(a[s]))return!1;do{if(a[s](e))return!0;if(a===n)return!1;a=a.parentNode}while(a);return!1}function rN(t){const e=window.getComputedStyle(t);return[parseFloat(e.getPropertyValue("width"),10),parseFloat(e.getPropertyValue("height"),10)]}function Ip(t,e,n){t&&(t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener?t.addEventListener(e,n,!0):t["on"+e]=n)}function rd(t,e,n){t&&(t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener?t.removeEventListener(e,n,!0):t["on"+e]=null)}const iN=(t,e)=>{const n=t.__vccOpts||t;for(const[a,s]of e)n[a]=s;return n},Y_={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},oN={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},aN={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let id=Y_.mouse;const sN={replace:!0,name:"vue-draggable-resizable",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},h:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},minWidth:{type:Number,default:0,validator:t=>t>=0},minHeight:{type:Number,default:0,validator:t=>t>=0},maxWidth:{type:Number,default:null,validator:t=>t>=0},maxHeight:{type:Number,default:null,validator:t=>t>=0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:t=>typeof t=="string"?t==="auto":t>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:t=>{const e=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(t.filter(n=>e.has(n))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:t=>["x","y","both"].includes(t)},grid:{type:Array,default:()=>[1,1]},parent:{type:Boolean,default:!1},scale:{type:[Number,Array],default:1,validator:t=>typeof t=="number"?t>0:t.length===2&&t[0]>0&&t[1]>0},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,handle:null,enabled:this.active,resizing:!1,dragging:!1,dragEnable:!1,resizeEnable:!1,zIndex:this.z}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxHeight&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e;const[n,a]=rN(this.$el);this.aspectFactor=(this.w!=="auto"?this.w:n)/(this.h!=="auto"?this.h:a),this.width=this.w!=="auto"?this.w:n,this.height=this.h!=="auto"?this.h:a,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.active&&this.$emit("activated"),Ip(document.documentElement,"mousedown",this.deselect),Ip(document.documentElement,"touchend touchcancel",this.deselect),Ip(window,"resize",this.checkParentSize)},beforeUnmount:function(){rd(document.documentElement,"mousedown",this.deselect),rd(document.documentElement,"touchstart",this.handleUp),rd(document.documentElement,"mousemove",this.move),rd(document.documentElement,"touchmove",this.move),rd(document.documentElement,"mouseup",this.handleUp),rd(document.documentElement,"touchend touchcancel",this.deselect),rd(window,"resize",this.checkParentSize)},methods:{resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top}},getParentSize(){if(this.parent){const t=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(t.getPropertyValue("width"),10),parseInt(t.getPropertyValue("height"),10)]}return[null,null]},elementTouchDown(t){id=Y_.touch,this.elementDown(t)},elementMouseDown(t){id=Y_.mouse,this.elementDown(t)},elementDown(t){if(t instanceof MouseEvent&&t.button!==0)return;const e=t.target||t.srcElement;if(this.$el.contains(e)){if(this.onDragStart(t)===!1)return;if(this.dragHandle&&!KI(e,this.dragHandle,this.$el)||this.dragCancel&&KI(e,this.dragCancel,this.$el)){this.dragging=!1;return}this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragEnable=!0),this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),Ip(document.documentElement,id.move,this.move),Ip(document.documentElement,id.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(t){const e=t.target||t.srcElement,n=new RegExp(this.className+"-([trmbl]{2})","");!this.$el.contains(e)&&!n.test(e.className)&&(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),rd(document.documentElement,id.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown(t,e){id=Y_.touch,this.handleDown(t,e)},handleDown(t,e){e instanceof MouseEvent&&e.which!==1||this.onResizeStart(t,e)!==!1&&(e.stopPropagation&&e.stopPropagation(),this.lockAspectRatio&&!t.includes("m")?this.handle="m"+t.substring(1):this.handle=t,this.resizeEnable=!0,this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),Ip(document.documentElement,id.move,this.handleResize),Ip(document.documentElement,id.stop,this.handleUp))},calcResizeLimits(){let t=this.minW,e=this.minH,n=this.maxW,a=this.maxH;const s=this.aspectFactor,[d,l]=this.grid,o=this.width,g=this.height,_=this.left,I=this.top,C=this.right,E=this.bottom;this.lockAspectRatio&&(t/e>s?e=t/s:t=s*e,n&&a?(n=Math.min(n,s*a),a=Math.min(a,n/s)):n?a=n/s:a&&(n=s*a)),n=n-n%d,a=a-a%l;const S={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(S.minLeft=_%d,S.maxLeft=_+Math.floor((o-t)/d)*d,S.minTop=I%l,S.maxTop=I+Math.floor((g-e)/l)*l,S.minRight=C%d,S.maxRight=C+Math.floor((o-t)/d)*d,S.minBottom=E%l,S.maxBottom=E+Math.floor((g-e)/l)*l,n&&(S.minLeft=Math.max(S.minLeft,this.parentWidth-C-n),S.minRight=Math.max(S.minRight,this.parentWidth-_-n)),a&&(S.minTop=Math.max(S.minTop,this.parentHeight-E-a),S.minBottom=Math.max(S.minBottom,this.parentHeight-I-a)),this.lockAspectRatio&&(S.minLeft=Math.max(S.minLeft,_-I*s),S.minTop=Math.max(S.minTop,I-_/s),S.minRight=Math.max(S.minRight,C-E*s),S.minBottom=Math.max(S.minBottom,E-C/s))):(S.minLeft=null,S.maxLeft=_+Math.floor((o-t)/d)*d,S.minTop=null,S.maxTop=I+Math.floor((g-e)/l)*l,S.minRight=null,S.maxRight=C+Math.floor((o-t)/d)*d,S.minBottom=null,S.maxBottom=E+Math.floor((g-e)/l)*l,n&&(S.minLeft=-(C+n),S.minRight=-(_+n)),a&&(S.minTop=-(E+a),S.minBottom=-(I+a)),this.lockAspectRatio&&n&&a&&(S.minLeft=Math.min(S.minLeft,-(C+n)),S.minTop=Math.min(S.minTop,-(a+E)),S.minRight=Math.min(S.minRight,-_-n),S.minBottom=Math.min(S.minBottom,-I-a))),S},move(t){this.resizing?this.handleResize(t):this.dragEnable&&this.handleDrag(t)},handleDrag(t){const e=this.axis,n=this.grid,a=this.bounds,s=this.mouseClickPosition,d=e&&e!=="y"?s.mouseX-(t.touches?t.touches[0].pageX:t.pageX):0,l=e&&e!=="x"?s.mouseY-(t.touches?t.touches[0].pageY:t.pageY):0,[o,g]=Fm(n,d,l,this.scale),_=Gc(s.left-o,a.minLeft,a.maxLeft),I=Gc(s.top-g,a.minTop,a.maxTop);if(this.onDrag(_,I)===!1)return;const C=Gc(s.right+o,a.minRight,a.maxRight),E=Gc(s.bottom+g,a.minBottom,a.maxBottom);this.left=_,this.top=I,this.right=C,this.bottom=E,this.$emit("dragging",this.left,this.top),this.dragging=!0},moveHorizontally(t){const[e,n]=Fm(this.grid,t,this.top,1),a=Gc(e,this.bounds.minLeft,this.bounds.maxLeft);this.left=a,this.right=this.parentWidth-this.width-a},moveVertically(t){const[e,n]=Fm(this.grid,this.left,t,1),a=Gc(n,this.bounds.minTop,this.bounds.maxTop);this.top=a,this.bottom=this.parentHeight-this.height-a},handleResize(t){let e=this.left,n=this.top,a=this.right,s=this.bottom;const d=this.mouseClickPosition,l=this.aspectFactor,o=d.mouseX-(t.touches?t.touches[0].pageX:t.pageX),g=d.mouseY-(t.touches?t.touches[0].pageY:t.pageY);!this.widthTouched&&o&&(this.widthTouched=!0),!this.heightTouched&&g&&(this.heightTouched=!0);const[_,I]=Fm(this.grid,o,g,this.scale);this.handle.includes("b")?(s=Gc(d.bottom+I,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(a=this.right-(this.bottom-s)*l)):this.handle.includes("t")&&(n=Gc(d.top-I,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(e=this.left-(this.top-n)*l)),this.handle.includes("r")?(a=Gc(d.right+_,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(s=this.bottom-(this.right-a)/l)):this.handle.includes("l")&&(e=Gc(d.left-_,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(n=this.top-(this.left-e)/l));const C=fA(this.parentWidth,e,a),E=pA(this.parentHeight,n,s);this.onResize(this.handle,e,n,C,E)!==!1&&(this.left=e,this.top=n,this.right=a,this.bottom=s,this.width=C,this.height=E,this.$emit("resizing",this.left,this.top,this.width,this.height),this.resizing=!0)},changeWidth(t){const[e,n]=Fm(this.grid,t,0,1),a=Gc(this.parentWidth-e-this.left,this.bounds.minRight,this.bounds.maxRight);let s=this.bottom;this.lockAspectRatio&&(s=this.bottom-(this.right-a)/this.aspectFactor);const d=fA(this.parentWidth,this.left,a),l=pA(this.parentHeight,this.top,s);this.right=a,this.bottom=s,this.width=d,this.height=l},changeHeight(t){const[e,n]=Fm(this.grid,0,t,1),a=Gc(this.parentHeight-n-this.top,this.bounds.minBottom,this.bounds.maxBottom);let s=this.right;this.lockAspectRatio&&(s=this.right-(this.bottom-a)*this.aspectFactor);const d=fA(this.parentWidth,this.left,s),l=pA(this.parentHeight,this.top,a);this.right=s,this.bottom=a,this.width=d,this.height=l},handleUp(t){this.handle=null,this.resetBoundsAndMouseState(),this.dragEnable=!1,this.resizeEnable=!1,this.resizing&&(this.resizing=!1,this.$emit("resizeStop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragStop",this.left,this.top)),rd(document.documentElement,id.move,this.handleResize)}},computed:{style(){return{transform:`translate(${this.left}px, ${this.top}px)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,...this.dragging&&this.disableUserSelect?oN:aN}},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return this.w==="auto"&&!this.widthTouched?"auto":this.width+"px"},computedHeight(){return this.h==="auto"&&!this.heightTouched?"auto":this.height+"px"},minW(){return this.minWidth},minH(){return this.minHeight},maxW(){return this.maxWidth},maxH(){return this.maxHeight},resizingOnX(){return!!this.handle&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return!!this.handle&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return!!this.handle&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(t){this.enabled=t,t?this.$emit("activated"):this.$emit("deactivated")},z(t){(t>=0||t==="auto")&&(this.zIndex=t)},x(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(t))},y(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(t))},lockAspectRatio(t){t?this.aspectFactor=this.width/this.height:this.aspectFactor=void 0},w(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(t))},h(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(t))}}},lN=["onMousedown","onTouchstart"];function cN(t,e,n,a,s,d){return St(),pe("div",{style:fi(d.style),class:Li([{[n.classNameActive]:t.enabled,[n.classNameDragging]:t.dragging,[n.classNameResizing]:t.resizing,[n.classNameDraggable]:n.draggable,[n.classNameResizable]:n.resizable},n.className]),onMousedown:e[0]||(e[0]=(...l)=>d.elementMouseDown&&d.elementMouseDown(...l)),onTouchstart:e[1]||(e[1]=(...l)=>d.elementTouchDown&&d.elementTouchDown(...l))},[(St(!0),pe(mr,null,ki(d.actualHandles,l=>(St(),pe("div",{key:l,class:Li([n.classNameHandle,n.classNameHandle+"-"+l]),style:fi({display:t.enabled?"block":"none"}),onMousedown:_i(o=>d.handleDown(l,o),["stop","prevent"]),onTouchstart:_i(o=>d.handleTouchDown(l,o),["stop","prevent"])},[qn(t.$slots,l)],46,lN))),128)),qn(t.$slots,"default")],38)}const FT=iN(sN,[["render",cN]]);function _w(t){_w.installed||(_w.installed=!0,t.component("VueDraggableResizable",FT))}const uN={install:_w};let C1=null;typeof window<"u"?C1=window.Vue:typeof global<"u"&&(C1=global.Vue);C1&&C1.use(uN);const hN=t=>(_c("data-v-23372390"),t=t(),bc(),t),dN={class:"draggable-popup-desktop"},fN={class:"draggable-popup-drag-container"},pN=hN(()=>zt("div",{class:"drag grabbing"},null,-1)),mN={class:"draggable-popup-desktop-content"},gN={name:"DraggableItemPopup"},yN=rr({...gN,props:{...Cb,...Sb,...Ab,sticks:{type:Array,default:()=>["bl","br"]},top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},centerX:Boolean,centerY:Boolean,center:Boolean},emits:{...Ib,...Eb},setup(t,{emit:e}){const{CloseIcon:n,CloseExpandedIcon:a,DragIcon:s,ExpandedIcon:d,ToBackIcon:l,ToFrontIcon:o}=Jy(),g=t,_=e,I=Va("containerId",gn(g.containerId||""));if(!I.value)throw"Not set container id";const{show:C}=wb(g,_),{zIndex:E,itemId:S}=bb(I.value,C),{containerWidth:k,containerHeight:D}=NB(I.value),{isLast:N,isFirst:U,isHasItems:F,onToBack:j,onToFront:$}=xb(I.value,S.value),K=gn(!1),tt=gn(!1),it=gn(g.height||200),et=gn(it.value),q=gn(g.width||200),ut=gn(0),Ct=gn(0),{expand:ot}=Mb(g,_,!0);function bt(){tt.value=!0}function X(){tt.value=!1}const{componentCard:Wt,componentCardHeader:Vt}=_b({...g,containerId:I.value});function Bt(Gt,Re,$e,Ce){q.value=$e,it.value=Ce}function ae(){C.value=!1}Xo(C,()=>{ye()},{immediate:!0});function ye(){K.value=!1,C&&(g.left!=null&&(ut.value=g.left),g.top!=null&&(Ct.value=g.top),g.right&&(ut.value=k.value-g.right-q.value),g.bottom&&(Ct.value=D.value-g.bottom-it.value),(g.center||g.centerX)&&(ut.value=(k.value-q.value)/2),(g.center||g.centerY)&&(Ct.value=(D.value-it.value)/2),K.value=!0)}function en(){ot.value&&it.value>50&&(et.value=it.value),ot.value=!ot.value,it.value=ot.value?et.value:50}function Jt(){var Gt;(Gt=window==null?void 0:window.getSelection())==null||Gt.removeAllRanges()}return(Gt,Re)=>ct(C)&&K.value?(St(),tn(ct(FT),Tr({key:0},Gt.$attrs,{dragHandle:".drag",parent:!0,handles:t.sticks,w:q.value,h:it.value,x:ut.value,y:Ct.value,z:ct(E),onResizing:Bt,active:tt.value,onActivated:Re[2]||(Re[2]=$e=>bt()),onDeactivated:Re[3]||(Re[3]=$e=>X()),onDragging:Jt}),{default:Se(()=>[(St(),tn(sa(ct(Wt)),{width:q.value,height:it.value},{default:Se(()=>[zt("div",dN,[Gt.disabledHeader?Cn("",!0):(St(),tn(sa(ct(Vt)),{key:0},{title:Se(()=>[qn(Gt.$slots,"title",{},()=>[ho(Rn(Gt.title),1)],!0)]),"pre-title":Se(()=>[zt("div",fN,[te(ct(s),{size:16}),pN])]),"extra-btn":Se(()=>[qn(Gt.$slots,"extra-btn",{},void 0,!0),ct(F)&&!Gt.disabledOrder?(St(),pe(mr,{key:0},[te(Na,{disabled:ct(U),onClick:Re[0]||(Re[0]=$e=>ct(j)())},{default:Se(()=>[te(ct(l),{size:16})]),_:1},8,["disabled"]),te(Na,{disabled:ct(N),onClick:Re[1]||(Re[1]=$e=>ct($)())},{default:Se(()=>[te(ct(o),{size:16})]),_:1},8,["disabled"])],64)):Cn("",!0),te(Na,{onClick:en},{default:Se(()=>[ct(ot)?(St(),tn(ct(d),{key:0,size:16})):(St(),tn(ct(a),{key:1,size:16}))]),_:1}),Gt.disabledClose?Cn("",!0):(St(),tn(Na,{key:1,onClick:ae},{default:Se(()=>[te(ct(n),{size:16})]),_:1}))]),_:3})),gc(zt("div",mN,[qn(Gt.$slots,"default",{},void 0,!0)],512),[[eb,ct(ot)]])])]),_:3},8,["width","height"]))]),_:3},16,["handles","w","h","x","y","z","active"])):Cn("",!0)}}),vN=Vn(yN,[["__scopeId","data-v-23372390"]]),_N={class:"draggable-float"},bN={name:"DraggableItemFloat"},xN=rr({...bN,props:{...Cb,...Sb,...Ab,top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:[Number,String],default:"auto"},maxHeight:{type:Number,default:500},headerLocation:{type:String,default:"top",validator:function(t){return["top","bottom"].includes(t)}}},emits:{...Ib,...Eb},setup(t,{emit:e}){const{CloseIcon:n,ToBackIcon:a,ToFrontIcon:s,ExpandedIcon:d,CloseExpandedIcon:l}=Jy(),o=t,g=e,_=Va("containerId",gn(o.containerId||""));if(!_.value)throw"Not set container id";const{show:I}=wb(o,g),{zIndex:C,itemId:E}=bb(_.value,I),{isLast:S,isFirst:k,isHasItems:D,onToBack:N,onToFront:U}=xb(_.value,E.value),{expand:F,toggle:j}=Mb(o,g,!0),{componentCard:$,componentCardHeader:K}=_b({...o,containerId:_.value});function tt(){I.value=!1}const it=bn(()=>{let ut={};return ut.zIndex=C.value,o.top&&(ut.top=o.top+"px"),o.left&&(ut.left=o.left+"px"),o.right&&(ut.right=o.right+"px"),o.bottom&&(ut.bottom=o.bottom+"px"),o.width&&o.width!="auto"&&(o.width&&!isNaN(+o.width)?ut.width=o.width+"px":ut.width=o.width),ut}),et=bn(()=>{let ut={};return ut.maxHeight=o.maxHeight+"px",ut}),q=bn(()=>!o.width||o.width=="auto");return(ut,Ct)=>ct(I)?(St(),pe("div",{key:0,class:Li(["float-container",{"auto-float-container":q.value}]),style:fi(it.value)},[(St(),tn(sa(ct($)),null,{default:Se(()=>[zt("div",_N,[!ut.disabledHeader&&t.headerLocation==="top"?(St(),tn(sa(ct(K)),{key:0},{title:Se(()=>[qn(ut.$slots,"title",{},()=>[ho(Rn(ut.title),1)],!0)]),"extra-btn":Se(()=>[qn(ut.$slots,"extra-btn",{},void 0,!0),te(Na,{onClick:ct(j)},{default:Se(()=>[ct(F)?(St(),tn(ct(d),{key:0,size:16})):(St(),tn(ct(l),{key:1,size:16}))]),_:1},8,["onClick"]),ct(D)&&!ut.disabledOrder?(St(),pe(mr,{key:0},[te(Na,{disabled:ct(k),onClick:Ct[0]||(Ct[0]=ot=>ct(N)())},{default:Se(()=>[te(ct(a),{size:16})]),_:1},8,["disabled"]),te(Na,{disabled:ct(S),onClick:Ct[1]||(Ct[1]=ot=>ct(U)())},{default:Se(()=>[te(ct(s),{size:16})]),_:1},8,["disabled"])],64)):Cn("",!0),ut.disabledClose?Cn("",!0):(St(),tn(Na,{key:1,onClick:tt},{default:Se(()=>[te(ct(n),{size:16})]),_:1}))]),_:3})):Cn("",!0),gc(zt("div",{class:"draggable-float-content",style:fi(et.value)},[qn(ut.$slots,"default",{},void 0,!0)],4),[[eb,ct(F)]]),!ut.disabledHeader&&t.headerLocation==="bottom"?(St(),tn(sa(ct(K)),{key:1},{title:Se(()=>[qn(ut.$slots,"title",{},()=>[ho(Rn(ut.title),1)],!0)]),"extra-btn":Se(()=>[qn(ut.$slots,"extra-btn",{},void 0,!0),te(Na,{onClick:ct(j)},{default:Se(()=>[ct(F)?(St(),tn(ct(d),{key:0,size:16})):(St(),tn(ct(l),{key:1,size:16}))]),_:1},8,["onClick"]),ct(D)&&!ut.disabledOrder?(St(),pe(mr,{key:0},[te(Na,{disabled:ct(k),onClick:Ct[2]||(Ct[2]=ot=>ct(N)())},{default:Se(()=>[te(ct(a),{size:16})]),_:1},8,["disabled"]),te(Na,{disabled:ct(S),onClick:Ct[3]||(Ct[3]=ot=>ct(U)())},{default:Se(()=>[te(ct(s),{size:16})]),_:1},8,["disabled"])],64)):Cn("",!0),ut.disabledClose?Cn("",!0):(St(),tn(Na,{key:1,onClick:tt},{default:Se(()=>[te(ct(n),{size:16})]),_:1}))]),_:3})):Cn("",!0)])]),_:3}))],6)):Cn("",!0)}}),AN=Vn(xN,[["__scopeId","data-v-ecbbe79b"]]),wN={class:"draggable-bottom"},CN={class:"draggable-bottom-content"},IN={name:"DraggableItemBottom"},MN=rr({...IN,props:{...Cb,...Sb,...Ab},emits:{...Ib,...Eb},setup(t,{emit:e}){const{CloseIcon:n,ToBackIcon:a,FullscreenIcon:s,OffFullscreenIcon:d}=Jy(),l=t,o=e,g=Va("containerId",gn(l.containerId||""));if(!g.value)throw"Not set container id";const{show:_}=wb(l,o),{zIndex:I,itemId:C}=bb(g.value,_),{isFirst:E,isHasItems:S,onToBack:k}=xb(g.value,C.value),{expand:D,toggle:N}=Mb(l,o,!1),{componentCard:U,componentCardHeader:F}=_b({...l,containerId:g.value});function j(){_.value=!1}const $=bn(()=>{let K={};return K.zIndex=I.value,K.height=D.value?"100%":"45%",K});return(K,tt)=>ct(_)?(St(),pe("div",{key:0,class:"popup-mobile-container",style:fi($.value)},[(St(),tn(sa(ct(U)),null,{default:Se(()=>[zt("div",wN,[K.disabledHeader?Cn("",!0):(St(),tn(sa(ct(F)),{key:0},{title:Se(()=>[qn(K.$slots,"title",{},()=>[ho(Rn(K.title),1)],!0)]),"extra-btn":Se(()=>[qn(K.$slots,"extra-btn",{},void 0,!0),ct(S)&&!K.disabledOrder?(St(),tn(Na,{key:0,disabled:ct(E),onClick:tt[0]||(tt[0]=_i(it=>ct(k)(),["prevent","stop"]))},{default:Se(()=>[te(ct(a),{size:16})]),_:1},8,["disabled"])):Cn("",!0),te(Na,{onClick:tt[1]||(tt[1]=it=>ct(N)())},{default:Se(()=>[ct(D)?(St(),tn(ct(s),{key:0,size:16})):(St(),tn(ct(d),{key:1,size:16}))]),_:1}),K.disabledClose?Cn("",!0):(St(),tn(Na,{key:1,onClick:j},{default:Se(()=>[te(ct(n),{size:16})]),_:1}))]),_:3})),zt("div",CN,[qn(K.$slots,"default",{},void 0,!0)])])]),_:3}))],4)):Cn("",!0)}}),S2=Vn(MN,[["__scopeId","data-v-5c196e37"]]);function E2(t,e){return rr({name:"WithMobileHandle"+t.name,props:{containerId:String},setup(n){const a=Va("containerId",gn(n.containerId||"")),s=bn(()=>Ur.getters.getIsMobile(a.value));return{p_containerId:a,isMobile:s}},render(){return this.isMobile?Sf(e,{...this.$attrs,containerId:this.p_containerId},this.$slots):Sf(t,{...this.$attrs,containerId:this.p_containerId},this.$slots)}})}const BT=E2(nN,S2),bd=E2(vN,S2),SN=E2(AN,S2),Ai=(t={},e,n)=>{const a=Va("$map.id"),s=bn(()=>t.mapId||a);mo(()=>{Af.getMap(s.value,async o=>{e instanceof Function&&await e(o)})}),yd(async()=>{n instanceof Function&&Af.getMap(s.value,async o=>{e instanceof Function&&await n(o)})});function d(o){return Af.getMap(s.value,o)}const l={mapId:t.mapId,dragId:t.dragId,btnWidth:t.btnWidth,position:t.position,controlVisible:t.controlVisible,order:t.order};return{callMap:d,mapId:s,moduleContainerProps:l}},So={mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}};function Pf(t=!1){const e=gn(t);function n(a){if(a!=null){e.value=!!a;return}e.value=!e.value}return[e,n]}const NT=m4({show:Boolean},"show"),EN={class:"module__container"},TN={name:"ModuleContainer"},PN=Object.assign(TN,{props:{mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}},setup(t){const e=FS(),n=t,a=bn(()=>!!e.btn),s=bn(()=>!!e.draggable),d=Va("$map.dragId"),l=Va("$map.id"),o=bn(()=>n.dragId||d),g=bn(()=>n.mapId||l),_=bn(()=>`#map-draggable-${g.value}`),I=bn(()=>`#${n.position}-${g.value}`),C=bn(()=>{let E={};return n.position.includes("left")&&(E.left=18+n.btnWidth),n.position.includes("right")&&(E.right=18+n.btnWidth),n.position.includes("top")&&(E.top=10),n.position.includes("bottom")&&(E.bottom=10),E.containerId=o.value,E});return(E,S)=>(St(),pe("div",EN,[t.controlVisible&&a.value?(St(),tn(ew,{key:0,to:I.value},[qn(E.$slots,"btn",{},void 0,!0)],8,["to"])):Cn("",!0),qn(E.$slots,"default",{},void 0,!0),o.value&&s.value?(St(),tn(ew,{key:1,to:_.value},[qn(E.$slots,"draggable",No(Mo(C.value)),void 0,!0)],8,["to"])):Cn("",!0)]))}}),Qo=Vn(PN,[["__scopeId","data-v-35db38a4"]]);var jT={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.4.0/LICENSE.txt
 */(function(t,e){(function(n,a){t.exports=a()})(Io,function(){var n={},a={};function s(l,o,g){if(a[l]=g,l==="index"){var _="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",I={};return a.shared(I),a.index(n,I),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([_],{type:"text/javascript"}))),n}}s("shared",["exports"],function(l){function o(u,i,h,f){return new(h||(h=Promise))(function(v,w){function M(V){try{z(f.next(V))}catch(Z){w(Z)}}function P(V){try{z(f.throw(V))}catch(Z){w(Z)}}function z(V){var Z;V.done?v(V.value):(Z=V.value,Z instanceof h?Z:new h(function(J){J(Z)})).then(M,P)}z((f=f.apply(u,i||[])).next())})}function g(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var _,I;function C(){if(I)return _;function u(i,h){this.x=i,this.y=h}return I=1,_=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,h){return this.clone()._rotateAround(i,h)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var h=i.x-this.x,f=i.y-this.y;return h*h+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,h){return Math.atan2(this.x*h-this.y*i,this.x*i+this.y*h)},_matMult:function(i){var h=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=h,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var h=Math.cos(i),f=Math.sin(i),v=f*this.x+h*this.y;return this.x=h*this.x-f*this.y,this.y=v,this},_rotateAround:function(i,h){var f=Math.cos(i),v=Math.sin(i),w=h.y+v*(this.x-h.x)+f*(this.y-h.y);return this.x=h.x+f*(this.x-h.x)-v*(this.y-h.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(i){return i instanceof u?i:Array.isArray(i)?new u(i[0],i[1]):i},_}typeof SuppressedError=="function"&&SuppressedError;var E,S,k=g(C()),D=function(){if(S)return E;function u(i,h,f,v){this.cx=3*i,this.bx=3*(f-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(v-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=h,this.p2x=f,this.p2y=v}return S=1,E=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,h){if(h===void 0&&(h=1e-6),i<0)return 0;if(i>1)return 1;for(var f=i,v=0;v<8;v++){var w=this.sampleCurveX(f)-i;if(Math.abs(w)<h)return f;var M=this.sampleCurveDerivativeX(f);if(Math.abs(M)<1e-6)break;f-=w/M}var P=0,z=1;for(f=i,v=0;v<20&&(w=this.sampleCurveX(f),!(Math.abs(w-i)<h));v++)i>w?P=f:z=f,f=.5*(z-P)+P;return f},solve:function(i,h){return this.sampleCurveY(this.solveCurveX(i,h))}},E}(),N=g(D);let U,F;function j(){return U==null&&(U=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),U}function $(){if(F==null&&(F=!1,j())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let f=0;f<5*5;f++){const v=4*f;i.fillStyle=`rgb(${v},${v+1},${v+2})`,i.fillRect(f%5,Math.floor(f/5),1,1)}const h=i.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&h[f]!==f){F=!0;break}}}return F||!1}var K=1e-6,tt=typeof Float32Array<"u"?Float32Array:Array;function it(){var u=new tt(9);return tt!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function et(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function q(){var u=new tt(3);return tt!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function ut(u){return Math.hypot(u[0],u[1],u[2])}function Ct(u,i,h){var f=new tt(3);return f[0]=u,f[1]=i,f[2]=h,f}Math.hypot||(Math.hypot=function(){for(var u=0,i=arguments.length;i--;)u+=arguments[i]*arguments[i];return Math.sqrt(u)});var ot,bt=ut;function X(u,i,h){var f=i[0],v=i[1],w=i[2],M=i[3];return u[0]=h[0]*f+h[4]*v+h[8]*w+h[12]*M,u[1]=h[1]*f+h[5]*v+h[9]*w+h[13]*M,u[2]=h[2]*f+h[6]*v+h[10]*w+h[14]*M,u[3]=h[3]*f+h[7]*v+h[11]*w+h[15]*M,u}function Wt(){var u=new tt(4);return tt!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function Vt(){var u=new tt(2);return tt!=Float32Array&&(u[0]=0,u[1]=0),u}function Bt(u,i){var h=new tt(2);return h[0]=u,h[1]=i,h}q(),ot=new tt(4),tt!=Float32Array&&(ot[0]=0,ot[1]=0,ot[2]=0,ot[3]=0),q(),Ct(1,0,0),Ct(0,1,0),Wt(),Wt(),it(),Vt();const ae=8192;function ye(u,i,h){return i*(ae/(u.tileSize*Math.pow(2,h-u.tileID.overscaledZ)))}function en(u,i){return(u%i+i)%i}function Jt(u,i,h){return u*(1-h)+i*h}function Gt(u){if(u<=0)return 0;if(u>=1)return 1;const i=u*u,h=i*u;return 4*(u<.5?h:3*(u-i)+h-.75)}function Re(u,i,h,f){const v=new N(u,i,h,f);return w=>v.solve(w)}const $e=Re(.25,.1,.25,1);function Ce(u,i,h){return Math.min(h,Math.max(i,u))}function nn(u,i,h){const f=h-i,v=((u-i)%f+f)%f+i;return v===i?h:v}function be(u,...i){for(const h of i)for(const f in h)u[f]=h[f];return u}let Me=1;function xe(u,i,h){const f={};for(const v in u)f[v]=i.call(this,u[v],v,u);return f}function Be(u,i,h){const f={};for(const v in u)i.call(this,u[v],v,u)&&(f[v]=u[v]);return f}function Je(u){return Array.isArray(u)?u.map(Je):typeof u=="object"&&u?xe(u,Je):u}const Ln={};function Tt(u){Ln[u]||(typeof console<"u"&&console.warn(u),Ln[u]=!0)}function H(u,i,h){return(h.y-u.y)*(i.x-u.x)>(i.y-u.y)*(h.x-u.x)}function Rt(u){return typeof WorkerGlobalScope<"u"&&u!==void 0&&u instanceof WorkerGlobalScope}let Pt=null;function gt(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function jt(u,i,h,f,v){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const w=new VideoFrame(u,{timestamp:0});try{const M=w==null?void 0:w.format;if(!M||!M.startsWith("BGR")&&!M.startsWith("RGB"))throw new Error(`Unrecognized format ${M}`);const P=M.startsWith("BGR"),z=new Uint8ClampedArray(f*v*4);if(yield w.copyTo(z,function(V,Z,J,st,lt){const dt=4*Math.max(1,0),At=(Math.max(0,J)-J)*st*4+dt,Et=4*st,Nt=Math.max(0,Z),ce=Math.max(0,J);return{rect:{x:Nt,y:ce,width:Math.min(V.width,Z+st)-Nt,height:Math.min(V.height,J+lt)-ce},layout:[{offset:At,stride:Et}]}}(u,i,h,f,v)),P)for(let V=0;V<z.length;V+=4){const Z=z[V];z[V]=z[V+2],z[V+2]=Z}return z}finally{w.close()}})}let ee,ue;function Ut(u,i,h,f){return u.addEventListener(i,h,f),{unsubscribe:()=>{u.removeEventListener(i,h,f)}}}function Ie(u){return u/Math.PI*180}const je={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Le={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ke="AbortError";function _n(){return new Error(Ke)}const wn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function de(u){return wn.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}const ve="global-dispatcher";class Te extends Error{constructor(i,h,f,v){super(`AJAXError: ${h} (${i}): ${f}`),this.status=i,this.statusText=h,this.url=f,this.body=v}}const Ye=()=>Rt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,un=function(u,i){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){const f=de(u.url);if(f)return f(u,i);if(Rt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:ve},i)}if(!(/^file:/.test(h=u.url)||/^file:/.test(Ye())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(f,v){return o(this,void 0,void 0,function*(){const w=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:Ye(),signal:v.signal});let M,P;f.type!=="json"||w.headers.has("Accept")||w.headers.set("Accept","application/json");try{M=yield fetch(w)}catch(V){throw new Te(0,V.message,f.url,new Blob)}if(!M.ok){const V=yield M.blob();throw new Te(M.status,M.statusText,f.url,V)}P=f.type==="arrayBuffer"||f.type==="image"?M.arrayBuffer():f.type==="json"?M.json():M.text();const z=yield P;if(v.signal.aborted)throw _n();return{data:z,cacheControl:M.headers.get("Cache-Control"),expires:M.headers.get("Expires")}})}(u,i);if(Rt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:ve},i)}var h;return function(f,v){return new Promise((w,M)=>{var P;const z=new XMLHttpRequest;z.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(z.responseType="arraybuffer");for(const V in f.headers)z.setRequestHeader(V,f.headers[V]);f.type==="json"&&(z.responseType="text",!((P=f.headers)===null||P===void 0)&&P.Accept||z.setRequestHeader("Accept","application/json")),z.withCredentials=f.credentials==="include",z.onerror=()=>{M(new Error(z.statusText))},z.onload=()=>{if(!v.signal.aborted)if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let V=z.response;if(f.type==="json")try{V=JSON.parse(z.response)}catch(Z){return void M(Z)}w({data:V,cacheControl:z.getResponseHeader("Cache-Control"),expires:z.getResponseHeader("Expires")})}else{const V=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});M(new Te(z.status,z.statusText,f.url,V))}},v.signal.addEventListener("abort",()=>{z.abort(),M(_n())}),z.send(f.body)})}(u,i)};function Nn(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;const i=new URL(u),h=window.location;return i.protocol===h.protocol&&i.host===h.host}function oe(u,i,h){h[u]&&h[u].indexOf(i)!==-1||(h[u]=h[u]||[],h[u].push(i))}function ht(u,i,h){if(h&&h[u]){const f=h[u].indexOf(i);f!==-1&&h[u].splice(f,1)}}class mt{constructor(i,h={}){be(this,h),this.type=i}}class wt extends mt{constructor(i,h={}){super("error",be({error:i},h))}}class kt{on(i,h){return this._listeners=this._listeners||{},oe(i,h,this._listeners),{unsubscribe:()=>{this.off(i,h)}}}off(i,h){return ht(i,h,this._listeners),ht(i,h,this._oneTimeListeners),this}once(i,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},oe(i,h,this._oneTimeListeners),this):new Promise(f=>this.once(i,f))}fire(i,h){typeof i=="string"&&(i=new mt(i,h||{}));const f=i.type;if(this.listens(f)){i.target=this;const v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const P of v)P.call(this,i);const w=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const P of w)ht(f,P,this._oneTimeListeners),P.call(this,i);const M=this._eventedParent;M&&(be(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(i))}else i instanceof wt&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,h){return this._eventedParent=i,this._eventedParentData=h,this}}var vt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ie=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function he(u,i){const h={};for(const f in u)f!=="ref"&&(h[f]=u[f]);return ie.forEach(f=>{f in i&&(h[f]=i[f])}),h}function Kt(u,i){if(Array.isArray(u)){if(!Array.isArray(i)||u.length!==i.length)return!1;for(let h=0;h<u.length;h++)if(!Kt(u[h],i[h]))return!1;return!0}if(typeof u=="object"&&u!==null&&i!==null){if(typeof i!="object"||Object.keys(u).length!==Object.keys(i).length)return!1;for(const h in u)if(!Kt(u[h],i[h]))return!1;return!0}return u===i}function Fe(u,i){u.push(i)}function Ve(u,i,h){Fe(h,{command:"addSource",args:[u,i[u]]})}function we(u,i,h){Fe(i,{command:"removeSource",args:[u]}),h[u]=!0}function rn(u,i,h,f){we(u,h,f),Ve(u,i,h)}function Sn(u,i,h){let f;for(f in u[h])if(Object.prototype.hasOwnProperty.call(u[h],f)&&f!=="data"&&!Kt(u[h][f],i[h][f]))return!1;for(f in i[h])if(Object.prototype.hasOwnProperty.call(i[h],f)&&f!=="data"&&!Kt(u[h][f],i[h][f]))return!1;return!0}function En(u,i,h,f,v,w){u=u||{},i=i||{};for(const M in u)Object.prototype.hasOwnProperty.call(u,M)&&(Kt(u[M],i[M])||h.push({command:w,args:[f,M,i[M],v]}));for(const M in i)Object.prototype.hasOwnProperty.call(i,M)&&!Object.prototype.hasOwnProperty.call(u,M)&&(Kt(u[M],i[M])||h.push({command:w,args:[f,M,i[M],v]}))}function ir(u){return u.id}function gr(u,i){return u[i.id]=i,u}class Ue{constructor(i,h,f,v){this.message=(i?`${i}: `:"")+f,v&&(this.identifier=v),h!=null&&h.__line__&&(this.line=h.__line__)}}function Gn(u,...i){for(const h of i)for(const f in h)u[f]=h[f];return u}class Fr extends Error{constructor(i,h){super(h),this.message=h,this.key=i}}class Yr{constructor(i,h=[]){this.parent=i,this.bindings={};for(const[f,v]of h)this.bindings[f]=v}concat(i){return new Yr(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Pr={kind:"null"},Ze={kind:"number"},zn={kind:"string"},Jn={kind:"boolean"},eo={kind:"color"},Eo={kind:"projectionDefinition"},pi={kind:"object"},Xn={kind:"value"},tu={kind:"collator"},Pl={kind:"formatted"},Uu={kind:"padding"},Ms={kind:"resolvedImage"},Hu={kind:"variableAnchorOffsetCollection"};function Ri(u,i){return{kind:"array",itemType:u,N:i}}function mi(u){if(u.kind==="array"){const i=mi(u.itemType);return typeof u.N=="number"?`array<${i}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${i}>`}return u.kind}const wi=[Pr,Ze,zn,Jn,eo,Eo,Pl,pi,Ri(Xn),Uu,Ms,Hu];function kl(u,i){if(i.kind==="error")return null;if(u.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!kl(u.itemType,i.itemType))&&(typeof u.N!="number"||u.N===i.N))return null}else{if(u.kind===i.kind)return null;if(u.kind==="value"){for(const h of wi)if(!kl(h,i))return null}}return`Expected ${mi(u)} but found ${mi(i)} instead.`}function Ac(u,i){return i.some(h=>h.kind===u.kind)}function ri(u,i){return i.some(h=>h==="null"?u===null:h==="array"?Array.isArray(u):h==="object"?u&&!Array.isArray(u)&&typeof u=="object":h===typeof u)}function Ss(u,i){return u.kind==="array"&&i.kind==="array"?u.itemType.kind===i.itemType.kind&&typeof u.N=="number":u.kind===i.kind}const Gu=.96422,us=.82521,Ma=4/29,Es=6/29,Ts=3*Es*Es,Ll=Es*Es*Es,Sh=Math.PI/180,wd=180/Math.PI;function Eh(u){return(u%=360)<0&&(u+=360),u}function $u([u,i,h,f]){let v,w;const M=wc((.2225045*(u=Zu(u))+.7168786*(i=Zu(i))+.0606169*(h=Zu(h)))/1);u===i&&i===h?v=w=M:(v=wc((.4360747*u+.3850649*i+.1430804*h)/Gu),w=wc((.0139322*u+.0971045*i+.7141733*h)/us));const P=116*M-16;return[P<0?0:P,500*(v-M),200*(M-w),f]}function Zu(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function wc(u){return u>Ll?Math.pow(u,1/3):u/Ts+Ma}function Rl([u,i,h,f]){let v=(u+16)/116,w=isNaN(i)?v:v+i/500,M=isNaN(h)?v:v-h/200;return v=1*Th(v),w=Gu*Th(w),M=us*Th(M),[Ps(3.1338561*w-1.6168667*v-.4906146*M),Ps(-.9787684*w+1.9161415*v+.033454*M),Ps(.0719453*w-.2289914*v+1.4052427*M),f]}function Ps(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function Th(u){return u>Es?u*u*u:Ts*(u-Ma)}function eu(u){return parseInt(u.padEnd(2,u),16)/255}function Dl(u,i){return Ua(i?u/100:u,0,1)}function Ua(u,i,h){return Math.min(Math.max(i,u),h)}function O(u){return!u.some(Number.isNaN)}const W={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function xt(u,i,h){return u+h*(i-u)}function Ht(u,i,h){return u.map((f,v)=>xt(f,i[v],h))}class $t{constructor(i,h,f,v=1,w=!0){this.r=i,this.g=h,this.b=f,this.a=v,w||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[i,h,f,v]))}static parse(i){if(i instanceof $t)return i;if(typeof i!="string")return;const h=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=W[f];if(v){const[M,P,z]=v;return[M/255,P/255,z/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const M=f.length<6?1:2;let P=1;return[eu(f.slice(P,P+=M)),eu(f.slice(P,P+=M)),eu(f.slice(P,P+=M)),eu(f.slice(P,P+M)||"ff")]}if(f.startsWith("rgb")){const M=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(M){const[P,z,V,Z,J,st,lt,dt,At,Et,Nt,ce]=M,qt=[Z||" ",lt||" ",Et].join("");if(qt==="  "||qt==="  /"||qt===",,"||qt===",,,"){const at=[V,st,At].join(""),It=at==="%%%"?100:at===""?255:0;if(It){const Yt=[Ua(+z/It,0,1),Ua(+J/It,0,1),Ua(+dt/It,0,1),Nt?Dl(+Nt,ce):1];if(O(Yt))return Yt}}return}}const w=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[M,P,z,V,Z,J,st,lt,dt]=w,At=[z||" ",Z||" ",st].join("");if(At==="  "||At==="  /"||At===",,"||At===",,,"){const Et=[+P,Ua(+V,0,100),Ua(+J,0,100),lt?Dl(+lt,dt):1];if(O(Et))return function([Nt,ce,qt,at]){function It(Yt){const Oe=(Yt+Nt/30)%12,sn=ce*Math.min(qt,1-qt);return qt-sn*Math.max(-1,Math.min(Oe-3,9-Oe,1))}return Nt=Eh(Nt),ce/=100,qt/=100,[It(0),It(8),It(4),at]}(Et)}}}(i);return h?new $t(...h,!1):void 0}get rgb(){const{r:i,g:h,b:f,a:v}=this,w=v||1/0;return this.overwriteGetter("rgb",[i/w,h/w,f/w,v])}get hcl(){return this.overwriteGetter("hcl",function(i){const[h,f,v,w]=$u(i),M=Math.sqrt(f*f+v*v);return[Math.round(1e4*M)?Eh(Math.atan2(v,f)*wd):NaN,M,h,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",$u(this.rgb))}overwriteGetter(i,h){return Object.defineProperty(this,i,{value:h}),h}toString(){const[i,h,f,v]=this.rgb;return`rgba(${[i,h,f].map(w=>Math.round(255*w)).join(",")},${v})`}static interpolate(i,h,f,v="rgb"){switch(v){case"rgb":{const[w,M,P,z]=Ht(i.rgb,h.rgb,f);return new $t(w,M,P,z,!1)}case"hcl":{const[w,M,P,z]=i.hcl,[V,Z,J,st]=h.hcl;let lt,dt;if(isNaN(w)||isNaN(V))isNaN(w)?isNaN(V)?lt=NaN:(lt=V,P!==1&&P!==0||(dt=Z)):(lt=w,J!==1&&J!==0||(dt=M));else{let qt=V-w;V>w&&qt>180?qt-=360:V<w&&w-V>180&&(qt+=360),lt=w+f*qt}const[At,Et,Nt,ce]=function([qt,at,It,Yt]){return qt=isNaN(qt)?0:qt*Sh,Rl([It,Math.cos(qt)*at,Math.sin(qt)*at,Yt])}([lt,dt??xt(M,Z,f),xt(P,J,f),xt(z,st,f)]);return new $t(At,Et,Nt,ce,!1)}case"lab":{const[w,M,P,z]=Rl(Ht(i.lab,h.lab,f));return new $t(w,M,P,z,!1)}}}}$t.black=new $t(0,0,0,1),$t.white=new $t(1,1,1,1),$t.transparent=new $t(0,0,0,0),$t.red=new $t(1,0,0,1);class Xt{constructor(i,h,f){this.sensitivity=i?h?"variant":"case":h?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,h){return this.collator.compare(i,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const _e=["bottom","center","top"];class cn{constructor(i,h,f,v,w,M){this.text=i,this.image=h,this.scale=f,this.fontStack=v,this.textColor=w,this.verticalAlign=M}}class dn{constructor(i){this.sections=i}static fromString(i){return new dn([new cn(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof dn?i:dn.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class An{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof An)return i;if(typeof i=="number")return new An([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const h of i)if(typeof h!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new An(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,h,f){return new An(Ht(i.values,h.values,f))}}class mn{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const Mn=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Kn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Kn)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let h=0;h<i.length;h+=2){const f=i[h],v=i[h+1];if(typeof f!="string"||!Mn.has(f)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new Kn(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,h,f){const v=i.values,w=h.values;if(v.length!==w.length)throw new mn(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${h.toString()}`);const M=[];for(let P=0;P<v.length;P+=2){if(v[P]!==w[P])throw new mn(`Cannot interpolate values containing mismatched anchors. from[${P}]: ${v[P]}, to[${P}]: ${w[P]}`);M.push(v[P]);const[z,V]=v[P+1],[Z,J]=w[P+1];M.push([xt(z,Z,f),xt(V,J,f)])}return new Kn(M)}}class Zr{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Zr({name:i,available:!1}):null}}class or{constructor(i,h,f){this.from=i,this.to=h,this.transition=f}static interpolate(i,h,f){return new or(i,h,f)}static parse(i){return i instanceof or?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new or(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new or(i.from,i.to,i.transition):typeof i=="string"?new or(i,i,1):void 0}}function ai(u,i,h,f){return typeof u=="number"&&u>=0&&u<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof h=="number"&&h>=0&&h<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[u,i,h,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[u,i,h,f]:[u,i,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function on(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof or||u instanceof $t||u instanceof Xt||u instanceof dn||u instanceof An||u instanceof Kn||u instanceof Zr)return!0;if(Array.isArray(u)){for(const i of u)if(!on(i))return!1;return!0}if(typeof u=="object"){for(const i in u)if(!on(u[i]))return!1;return!0}return!1}function kn(u){if(u===null)return Pr;if(typeof u=="string")return zn;if(typeof u=="boolean")return Jn;if(typeof u=="number")return Ze;if(u instanceof $t)return eo;if(u instanceof or)return Eo;if(u instanceof Xt)return tu;if(u instanceof dn)return Pl;if(u instanceof An)return Uu;if(u instanceof Kn)return Hu;if(u instanceof Zr)return Ms;if(Array.isArray(u)){const i=u.length;let h;for(const f of u){const v=kn(f);if(h){if(h===v)continue;h=Xn;break}h=v}return Ri(h||Xn,i)}return pi}function Rr(u){const i=typeof u;return u===null?"":i==="string"||i==="number"||i==="boolean"?String(u):u instanceof $t||u instanceof or||u instanceof dn||u instanceof An||u instanceof Kn||u instanceof Zr?u.toString():JSON.stringify(u)}class bi{constructor(i,h){this.type=i,this.value=h}static parse(i,h){if(i.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!on(i[1]))return h.error("invalid value");const f=i[1];let v=kn(f);const w=h.expectedType;return v.kind!=="array"||v.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(v=w),new bi(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const gi={string:zn,number:Ze,boolean:Jn,object:pi};class Jo{constructor(i,h){this.type=i,this.args=h}static parse(i,h){if(i.length<2)return h.error("Expected at least one argument.");let f,v=1;const w=i[0];if(w==="array"){let P,z;if(i.length>2){const V=i[1];if(typeof V!="string"||!(V in gi)||V==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);P=gi[V],v++}else P=Xn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return h.error('The length argument to "array" must be a positive integer literal',2);z=i[2],v++}f=Ri(P,z)}else{if(!gi[w])throw new Error(`Types doesn't contain name = ${w}`);f=gi[w]}const M=[];for(;v<i.length;v++){const P=h.parse(i[v],v,Xn);if(!P)return null;M.push(P)}return new Jo(f,M)}evaluate(i){for(let h=0;h<this.args.length;h++){const f=this.args[h].evaluate(i);if(!kl(this.type,kn(f)))return f;if(h===this.args.length-1)throw new mn(`Expected value to be of type ${mi(this.type)}, but found ${mi(kn(f))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const nu={"to-boolean":Jn,"to-color":eo,"to-number":Ze,"to-string":zn};class ur{constructor(i,h){this.type=i,this.args=h}static parse(i,h){if(i.length<2)return h.error("Expected at least one argument.");const f=i[0];if(!nu[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&i.length!==2)return h.error("Expected one argument.");const v=nu[f],w=[];for(let M=1;M<i.length;M++){const P=h.parse(i[M],M,Xn);if(!P)return null;w.push(P)}return new ur(v,w)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let h,f;for(const v of this.args){if(h=v.evaluate(i),f=null,h instanceof $t)return h;if(typeof h=="string"){const w=i.parseColor(h);if(w)return w}else if(Array.isArray(h)&&(f=h.length<3||h.length>4?`Invalid rgba value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:ai(h[0],h[1],h[2],h[3]),!f))return new $t(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new mn(f||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const f of this.args){h=f.evaluate(i);const v=An.parse(h);if(v)return v}throw new mn(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const f of this.args){h=f.evaluate(i);const v=Kn.parse(h);if(v)return v}throw new mn(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const f of this.args){if(h=f.evaluate(i),h===null)return 0;const v=Number(h);if(!isNaN(v))return v}throw new mn(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return dn.fromString(Rr(this.args[0].evaluate(i)));case"resolvedImage":return Zr.fromString(Rr(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return Rr(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Wu=["Unknown","Point","LineString","Polygon"];class Wr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Wu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let h=this._parseColorCache[i];return h||(h=this._parseColorCache[i]=$t.parse(i)),h}}class Fn{constructor(i,h,f=[],v,w=new Yr,M=[]){this.registry=i,this.path=f,this.key=f.map(P=>`[${P}]`).join(""),this.scope=w,this.errors=M,this.expectedType=v,this._isConstant=h}parse(i,h,f,v,w={}){return h?this.concat(h,f,v)._parse(i,w):this._parse(i,w)}_parse(i,h){function f(v,w,M){return M==="assert"?new Jo(w,[v]):M==="coerce"?new ur(w,[v]):v}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=i[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[v];if(w){let M=w.parse(i,this);if(!M)return null;if(this.expectedType){const P=this.expectedType,z=M.type;if(P.kind!=="string"&&P.kind!=="number"&&P.kind!=="boolean"&&P.kind!=="object"&&P.kind!=="array"||z.kind!=="value")if(P.kind!=="projectionDefinition"||z.kind!=="string"&&z.kind!=="array")if(P.kind!=="color"&&P.kind!=="formatted"&&P.kind!=="resolvedImage"||z.kind!=="value"&&z.kind!=="string")if(P.kind!=="padding"||z.kind!=="value"&&z.kind!=="number"&&z.kind!=="array")if(P.kind!=="variableAnchorOffsetCollection"||z.kind!=="value"&&z.kind!=="array"){if(this.checkSubtype(P,z))return null}else M=f(M,P,h.typeAnnotation||"coerce");else M=f(M,P,h.typeAnnotation||"coerce");else M=f(M,P,h.typeAnnotation||"coerce");else M=f(M,P,h.typeAnnotation||"coerce");else M=f(M,P,h.typeAnnotation||"assert")}if(!(M instanceof bi)&&M.type.kind!=="resolvedImage"&&this._isConstant(M)){const P=new Wr;try{M=new bi(M.type,M.evaluate(P))}catch(z){return this.error(z.message),null}}return M}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,h,f){const v=typeof i=="number"?this.path.concat(i):this.path,w=f?this.scope.concat(f):this.scope;return new Fn(this.registry,this._isConstant,v,h||null,w,this.errors)}error(i,...h){const f=`${this.key}${h.map(v=>`[${v}]`).join("")}`;this.errors.push(new Fr(f,i))}checkSubtype(i,h){const f=kl(i,h);return f&&this.error(f),f}}class Xr{constructor(i,h){this.type=h.type,this.bindings=[].concat(i),this.result=h}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const h of this.bindings)i(h[1]);i(this.result)}static parse(i,h){if(i.length<4)return h.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const f=[];for(let w=1;w<i.length-1;w+=2){const M=i[w];if(typeof M!="string")return h.error(`Expected string, but found ${typeof M} instead.`,w);if(/[^a-zA-Z0-9_]/.test(M))return h.error("Variable names must contain only alphanumeric characters or '_'.",w);const P=h.parse(i[w+1],w+1);if(!P)return null;f.push([M,P])}const v=h.parse(i[i.length-1],i.length-1,h.expectedType,f);return v?new Xr(f,v):null}outputDefined(){return this.result.outputDefined()}}class Dr{constructor(i,h){this.type=h.type,this.name=i,this.boundExpression=h}static parse(i,h){if(i.length!==2||typeof i[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const f=i[1];return h.scope.has(f)?new Dr(f,h.scope.get(f)):h.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Cc{constructor(i,h,f){this.type=i,this.index=h,this.input=f}static parse(i,h){if(i.length!==3)return h.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=h.parse(i[1],1,Ze),v=h.parse(i[2],2,Ri(h.expectedType||Xn));return f&&v?new Cc(v.type.itemType,f,v):null}evaluate(i){const h=this.index.evaluate(i),f=this.input.evaluate(i);if(h<0)throw new mn(`Array index out of bounds: ${h} < 0.`);if(h>=f.length)throw new mn(`Array index out of bounds: ${h} > ${f.length-1}.`);if(h!==Math.floor(h))throw new mn(`Array index must be an integer, but found ${h} instead.`);return f[h]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class ca{constructor(i,h){this.type=Jn,this.needle=i,this.haystack=h}static parse(i,h){if(i.length!==3)return h.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=h.parse(i[1],1,Xn),v=h.parse(i[2],2,Xn);return f&&v?Ac(f.type,[Jn,zn,Ze,Pr,Xn])?new ca(f,v):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${mi(f.type)} instead`):null}evaluate(i){const h=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!f)return!1;if(!ri(h,["boolean","string","number","null"]))throw new mn(`Expected first argument to be of type boolean, string, number or null, but found ${mi(kn(h))} instead.`);if(!ri(f,["string","array"]))throw new mn(`Expected second argument to be of type array or string, but found ${mi(kn(f))} instead.`);return f.indexOf(h)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class Ol{constructor(i,h,f){this.type=Ze,this.needle=i,this.haystack=h,this.fromIndex=f}static parse(i,h){if(i.length<=2||i.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=h.parse(i[1],1,Xn),v=h.parse(i[2],2,Xn);if(!f||!v)return null;if(!Ac(f.type,[Jn,zn,Ze,Pr,Xn]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${mi(f.type)} instead`);if(i.length===4){const w=h.parse(i[3],3,Ze);return w?new Ol(f,v,w):null}return new Ol(f,v)}evaluate(i){const h=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!ri(h,["boolean","string","number","null"]))throw new mn(`Expected first argument to be of type boolean, string, number or null, but found ${mi(kn(h))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(i)),ri(f,["string"])){const w=f.indexOf(h,v);return w===-1?-1:[...f.slice(0,w)].length}if(ri(f,["array"]))return f.indexOf(h,v);throw new mn(`Expected second argument to be of type array or string, but found ${mi(kn(f))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class ru{constructor(i,h,f,v,w,M){this.inputType=i,this.type=h,this.input=f,this.cases=v,this.outputs=w,this.otherwise=M}static parse(i,h){if(i.length<5)return h.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return h.error("Expected an even number of arguments.");let f,v;h.expectedType&&h.expectedType.kind!=="value"&&(v=h.expectedType);const w={},M=[];for(let V=2;V<i.length-1;V+=2){let Z=i[V];const J=i[V+1];Array.isArray(Z)||(Z=[Z]);const st=h.concat(V);if(Z.length===0)return st.error("Expected at least one branch label.");for(const dt of Z){if(typeof dt!="number"&&typeof dt!="string")return st.error("Branch labels must be numbers or strings.");if(typeof dt=="number"&&Math.abs(dt)>Number.MAX_SAFE_INTEGER)return st.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof dt=="number"&&Math.floor(dt)!==dt)return st.error("Numeric branch labels must be integer values.");if(f){if(st.checkSubtype(f,kn(dt)))return null}else f=kn(dt);if(w[String(dt)]!==void 0)return st.error("Branch labels must be unique.");w[String(dt)]=M.length}const lt=h.parse(J,V,v);if(!lt)return null;v=v||lt.type,M.push(lt)}const P=h.parse(i[1],1,Xn);if(!P)return null;const z=h.parse(i[i.length-1],i.length-1,v);return z?P.type.kind!=="value"&&h.concat(1).checkSubtype(f,P.type)?null:new ru(f,v,P,w,M,z):null}evaluate(i){const h=this.input.evaluate(i);return(kn(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class qu{constructor(i,h,f){this.type=i,this.branches=h,this.otherwise=f}static parse(i,h){if(i.length<4)return h.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return h.error("Expected an odd number of arguments.");let f;h.expectedType&&h.expectedType.kind!=="value"&&(f=h.expectedType);const v=[];for(let M=1;M<i.length-1;M+=2){const P=h.parse(i[M],M,Jn);if(!P)return null;const z=h.parse(i[M+1],M+1,f);if(!z)return null;v.push([P,z]),f=f||z.type}const w=h.parse(i[i.length-1],i.length-1,f);if(!w)return null;if(!f)throw new Error("Can't infer output type");return new qu(f,v,w)}evaluate(i){for(const[h,f]of this.branches)if(h.evaluate(i))return f.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[h,f]of this.branches)i(h),i(f);i(this.otherwise)}outputDefined(){return this.branches.every(([i,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class zl{constructor(i,h,f,v){this.type=i,this.input=h,this.beginIndex=f,this.endIndex=v}static parse(i,h){if(i.length<=2||i.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=h.parse(i[1],1,Xn),v=h.parse(i[2],2,Ze);if(!f||!v)return null;if(!Ac(f.type,[Ri(Xn),zn,Xn]))return h.error(`Expected first argument to be of type array or string, but found ${mi(f.type)} instead`);if(i.length===4){const w=h.parse(i[3],3,Ze);return w?new zl(f.type,f,v,w):null}return new zl(f.type,f,v)}evaluate(i){const h=this.input.evaluate(i),f=this.beginIndex.evaluate(i);let v;if(this.endIndex&&(v=this.endIndex.evaluate(i)),ri(h,["string"]))return[...h].slice(f,v).join("");if(ri(h,["array"]))return h.slice(f,v);throw new mn(`Expected first argument to be of type array or string, but found ${mi(kn(h))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function iu(u,i){const h=u.length-1;let f,v,w=0,M=h,P=0;for(;w<=M;)if(P=Math.floor((w+M)/2),f=u[P],v=u[P+1],f<=i){if(P===h||i<v)return P;w=P+1}else{if(!(f>i))throw new mn("Input is not a number.");M=P-1}return 0}class Fi{constructor(i,h,f){this.type=i,this.input=h,this.labels=[],this.outputs=[];for(const[v,w]of f)this.labels.push(v),this.outputs.push(w)}static parse(i,h){if(i.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return h.error("Expected an even number of arguments.");const f=h.parse(i[1],1,Ze);if(!f)return null;const v=[];let w=null;h.expectedType&&h.expectedType.kind!=="value"&&(w=h.expectedType);for(let M=1;M<i.length;M+=2){const P=M===1?-1/0:i[M],z=i[M+1],V=M,Z=M+1;if(typeof P!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(v.length&&v[v.length-1][0]>=P)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const J=h.parse(z,Z,w);if(!J)return null;w=w||J.type,v.push([P,J])}return new Fi(w,f,v)}evaluate(i){const h=this.labels,f=this.outputs;if(h.length===1)return f[0].evaluate(i);const v=this.input.evaluate(i);if(v<=h[0])return f[0].evaluate(i);const w=h.length;return v>=h[w-1]?f[w-1].evaluate(i):f[iu(h,v)].evaluate(i)}eachChild(i){i(this.input);for(const h of this.outputs)i(h)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function ou(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Ha,Fl,no=function(){if(Fl)return Ha;function u(i,h,f,v){this.cx=3*i,this.bx=3*(f-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(v-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=h,this.p2x=f,this.p2y=v}return Fl=1,Ha=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,h){if(h===void 0&&(h=1e-6),i<0)return 0;if(i>1)return 1;for(var f=i,v=0;v<8;v++){var w=this.sampleCurveX(f)-i;if(Math.abs(w)<h)return f;var M=this.sampleCurveDerivativeX(f);if(Math.abs(M)<1e-6)break;f-=w/M}var P=0,z=1;for(f=i,v=0;v<20&&(w=this.sampleCurveX(f),!(Math.abs(w-i)<h));v++)i>w?P=f:z=f,f=.5*(z-P)+P;return f},solve:function(i,h){return this.sampleCurveY(this.solveCurveX(i,h))}},Ha}(),ro=ou(no);class go{constructor(i,h,f,v,w){this.type=i,this.operator=h,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(const[M,P]of w)this.labels.push(M),this.outputs.push(P)}static interpolationFactor(i,h,f,v){let w=0;if(i.name==="exponential")w=nl(h,i.base,f,v);else if(i.name==="linear")w=nl(h,1,f,v);else if(i.name==="cubic-bezier"){const M=i.controlPoints;w=new ro(M[0],M[1],M[2],M[3]).solve(nl(h,1,f,v))}return w}static parse(i,h){let[f,v,w,...M]=i;if(!Array.isArray(v)||v.length===0)return h.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const V=v[1];if(typeof V!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:V}}else{if(v[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const V=v.slice(1);if(V.length!==4||V.some(Z=>typeof Z!="number"||Z<0||Z>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:V}}}if(i.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(w=h.parse(w,2,Ze),!w)return null;const P=[];let z=null;f==="interpolate-hcl"||f==="interpolate-lab"?z=eo:h.expectedType&&h.expectedType.kind!=="value"&&(z=h.expectedType);for(let V=0;V<M.length;V+=2){const Z=M[V],J=M[V+1],st=V+3,lt=V+4;if(typeof Z!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',st);if(P.length&&P[P.length-1][0]>=Z)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',st);const dt=h.parse(J,lt,z);if(!dt)return null;z=z||dt.type,P.push([Z,dt])}return Ss(z,Ze)||Ss(z,Eo)||Ss(z,eo)||Ss(z,Uu)||Ss(z,Hu)||Ss(z,Ri(Ze))?new go(z,f,v,w,P):h.error(`Type ${mi(z)} is not interpolatable.`)}evaluate(i){const h=this.labels,f=this.outputs;if(h.length===1)return f[0].evaluate(i);const v=this.input.evaluate(i);if(v<=h[0])return f[0].evaluate(i);const w=h.length;if(v>=h[w-1])return f[w-1].evaluate(i);const M=iu(h,v),P=go.interpolationFactor(this.interpolation,v,h[M],h[M+1]),z=f[M].evaluate(i),V=f[M+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return xt(z,V,P);case"color":return $t.interpolate(z,V,P);case"padding":return An.interpolate(z,V,P);case"variableAnchorOffsetCollection":return Kn.interpolate(z,V,P);case"array":return Ht(z,V,P);case"projectionDefinition":return or.interpolate(z,V,P)}case"interpolate-hcl":return $t.interpolate(z,V,P,"hcl");case"interpolate-lab":return $t.interpolate(z,V,P,"lab")}}eachChild(i){i(this.input);for(const h of this.outputs)i(h)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function nl(u,i,h,f){const v=f-h,w=u-h;return v===0?0:i===1?w/v:(Math.pow(i,w)-1)/(Math.pow(i,v)-1)}const Br={color:$t.interpolate,number:xt,padding:An.interpolate,variableAnchorOffsetCollection:Kn.interpolate,array:Ht};class Bl{constructor(i,h){this.type=i,this.args=h}static parse(i,h){if(i.length<2)return h.error("Expected at least one argument.");let f=null;const v=h.expectedType;v&&v.kind!=="value"&&(f=v);const w=[];for(const P of i.slice(1)){const z=h.parse(P,1+w.length,f,void 0,{typeAnnotation:"omit"});if(!z)return null;f=f||z.type,w.push(z)}if(!f)throw new Error("No output type");const M=v&&w.some(P=>kl(v,P.type));return new Bl(M?Xn:f,w)}evaluate(i){let h,f=null,v=0;for(const w of this.args)if(v++,f=w.evaluate(i),f&&f instanceof Zr&&!f.available&&(h||(h=f.name),f=null,v===this.args.length&&(f=h)),f!==null)break;return f}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function Ic(u,i){return u==="=="||u==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Ku(u,i,h,f){return f.compare(i,h)===0}function Xi(u,i,h){const f=u!=="=="&&u!=="!=";return class VT{constructor(w,M,P){this.type=Jn,this.lhs=w,this.rhs=M,this.collator=P,this.hasUntypedArgument=w.type.kind==="value"||M.type.kind==="value"}static parse(w,M){if(w.length!==3&&w.length!==4)return M.error("Expected two or three arguments.");const P=w[0];let z=M.parse(w[1],1,Xn);if(!z)return null;if(!Ic(P,z.type))return M.concat(1).error(`"${P}" comparisons are not supported for type '${mi(z.type)}'.`);let V=M.parse(w[2],2,Xn);if(!V)return null;if(!Ic(P,V.type))return M.concat(2).error(`"${P}" comparisons are not supported for type '${mi(V.type)}'.`);if(z.type.kind!==V.type.kind&&z.type.kind!=="value"&&V.type.kind!=="value")return M.error(`Cannot compare types '${mi(z.type)}' and '${mi(V.type)}'.`);f&&(z.type.kind==="value"&&V.type.kind!=="value"?z=new Jo(V.type,[z]):z.type.kind!=="value"&&V.type.kind==="value"&&(V=new Jo(z.type,[V])));let Z=null;if(w.length===4){if(z.type.kind!=="string"&&V.type.kind!=="string"&&z.type.kind!=="value"&&V.type.kind!=="value")return M.error("Cannot use collator to compare non-string types.");if(Z=M.parse(w[3],3,tu),!Z)return null}return new VT(z,V,Z)}evaluate(w){const M=this.lhs.evaluate(w),P=this.rhs.evaluate(w);if(f&&this.hasUntypedArgument){const z=kn(M),V=kn(P);if(z.kind!==V.kind||z.kind!=="string"&&z.kind!=="number")throw new mn(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${z.kind}, ${V.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const z=kn(M),V=kn(P);if(z.kind!=="string"||V.kind!=="string")return i(w,M,P)}return this.collator?h(w,M,P,this.collator.evaluate(w)):i(w,M,P)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const Nl=Xi("==",function(u,i,h){return i===h},Ku),Vo=Xi("!=",function(u,i,h){return i!==h},function(u,i,h,f){return!Ku(0,i,h,f)}),Cd=Xi("<",function(u,i,h){return i<h},function(u,i,h,f){return f.compare(i,h)<0}),au=Xi(">",function(u,i,h){return i>h},function(u,i,h,f){return f.compare(i,h)>0}),yo=Xi("<=",function(u,i,h){return i<=h},function(u,i,h,f){return f.compare(i,h)<=0}),Uo=Xi(">=",function(u,i,h){return i>=h},function(u,i,h,f){return f.compare(i,h)>=0});class jl{constructor(i,h,f){this.type=tu,this.locale=f,this.caseSensitive=i,this.diacriticSensitive=h}static parse(i,h){if(i.length!==2)return h.error("Expected one argument.");const f=i[1];if(typeof f!="object"||Array.isArray(f))return h.error("Collator options argument must be an object.");const v=h.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Jn);if(!v)return null;const w=h.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Jn);if(!w)return null;let M=null;return f.locale&&(M=h.parse(f.locale,1,zn),!M)?null:new jl(v,w,M)}evaluate(i){return new Xt(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class ii{constructor(i,h,f,v,w){this.type=zn,this.number=i,this.locale=h,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=w}static parse(i,h){if(i.length!==3)return h.error("Expected two arguments.");const f=h.parse(i[1],1,Ze);if(!f)return null;const v=i[2];if(typeof v!="object"||Array.isArray(v))return h.error("NumberFormat options argument must be an object.");let w=null;if(v.locale&&(w=h.parse(v.locale,1,zn),!w))return null;let M=null;if(v.currency&&(M=h.parse(v.currency,1,zn),!M))return null;let P=null;if(v["min-fraction-digits"]&&(P=h.parse(v["min-fraction-digits"],1,Ze),!P))return null;let z=null;return v["max-fraction-digits"]&&(z=h.parse(v["max-fraction-digits"],1,Ze),!z)?null:new ii(f,w,M,P,z)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class ua{constructor(i){this.type=Pl,this.sections=i}static parse(i,h){if(i.length<2)return h.error("Expected at least one argument.");const f=i[1];if(!Array.isArray(f)&&typeof f=="object")return h.error("First argument must be an image or text section.");const v=[];let w=!1;for(let M=1;M<=i.length-1;++M){const P=i[M];if(w&&typeof P=="object"&&!Array.isArray(P)){w=!1;let z=null;if(P["font-scale"]&&(z=h.parse(P["font-scale"],1,Ze),!z))return null;let V=null;if(P["text-font"]&&(V=h.parse(P["text-font"],1,Ri(zn)),!V))return null;let Z=null;if(P["text-color"]&&(Z=h.parse(P["text-color"],1,eo),!Z))return null;let J=null;if(P["vertical-align"]){if(typeof P["vertical-align"]=="string"&&!_e.includes(P["vertical-align"]))return h.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${P["vertical-align"]}' instead.`);if(J=h.parse(P["vertical-align"],1,zn),!J)return null}const st=v[v.length-1];st.scale=z,st.font=V,st.textColor=Z,st.verticalAlign=J}else{const z=h.parse(i[M],1,Xn);if(!z)return null;const V=z.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,v.push({content:z,scale:null,font:null,textColor:null,verticalAlign:null})}}return new ua(v)}evaluate(i){return new dn(this.sections.map(h=>{const f=h.content.evaluate(i);return kn(f)===Ms?new cn("",f,null,null,null,h.verticalAlign?h.verticalAlign.evaluate(i):null):new cn(Rr(f),null,h.scale?h.scale.evaluate(i):null,h.font?h.font.evaluate(i).join(","):null,h.textColor?h.textColor.evaluate(i):null,h.verticalAlign?h.verticalAlign.evaluate(i):null)}))}eachChild(i){for(const h of this.sections)i(h.content),h.scale&&i(h.scale),h.font&&i(h.font),h.textColor&&i(h.textColor),h.verticalAlign&&i(h.verticalAlign)}outputDefined(){return!1}}class Ga{constructor(i){this.type=Ms,this.input=i}static parse(i,h){if(i.length!==2)return h.error("Expected two arguments.");const f=h.parse(i[1],1,zn);return f?new Ga(f):h.error("No image name provided.")}evaluate(i){const h=this.input.evaluate(i),f=Zr.fromString(h);return f&&i.availableImages&&(f.available=i.availableImages.indexOf(h)>-1),f}eachChild(i){i(this.input)}outputDefined(){return!1}}class su{constructor(i){this.type=Ze,this.input=i}static parse(i,h){if(i.length!==2)return h.error(`Expected 1 argument, but found ${i.length-1} instead.`);const f=h.parse(i[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${mi(f.type)} instead.`):new su(f):null}evaluate(i){const h=this.input.evaluate(i);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new mn(`Expected value to be of type string or array, but found ${mi(kn(h))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const ta=8192;function Ph(u,i){const h=(180+u[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,v=Math.pow(2,i.z);return[Math.round(h*v*ta),Math.round(f*v*ta)]}function Vl(u,i){const h=Math.pow(2,i.z);return[(v=(u[0]/ta+i.x)/h,360*v-180),(f=(u[1]/ta+i.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,v}function rl(u,i){u[0]=Math.min(u[0],i[0]),u[1]=Math.min(u[1],i[1]),u[2]=Math.max(u[2],i[0]),u[3]=Math.max(u[3],i[1])}function Mc(u,i){return!(u[0]<=i[0]||u[2]>=i[2]||u[1]<=i[1]||u[3]>=i[3])}function lu(u,i,h){const f=u[0]-i[0],v=u[1]-i[1],w=u[0]-h[0],M=u[1]-h[1];return f*M-w*v==0&&f*w<=0&&v*M<=0}function hs(u,i,h,f){return(v=[f[0]-h[0],f[1]-h[1]])[0]*(w=[i[0]-u[0],i[1]-u[1]])[1]-v[1]*w[0]!=0&&!(!Ls(u,i,h,f)||!Ls(h,f,u,i));var v,w}function Bf(u,i,h){for(const f of h)for(let v=0;v<f.length-1;++v)if(hs(u,i,f[v],f[v+1]))return!0;return!1}function ks(u,i,h=!1){let f=!1;for(const P of i)for(let z=0;z<P.length-1;z++){if(lu(u,P[z],P[z+1]))return h;(w=P[z])[1]>(v=u)[1]!=(M=P[z+1])[1]>v[1]&&v[0]<(M[0]-w[0])*(v[1]-w[1])/(M[1]-w[1])+w[0]&&(f=!f)}var v,w,M;return f}function Yu(u,i){for(const h of i)if(ks(u,h))return!0;return!1}function ds(u,i){for(const h of u)if(!ks(h,i))return!1;for(let h=0;h<u.length-1;++h)if(Bf(u[h],u[h+1],i))return!1;return!0}function $a(u,i){for(const h of i)if(ds(u,h))return!0;return!1}function Ls(u,i,h,f){const v=f[0]-h[0],w=f[1]-h[1],M=(u[0]-h[0])*w-v*(u[1]-h[1]),P=(i[0]-h[0])*w-v*(i[1]-h[1]);return M>0&&P<0||M<0&&P>0}function Sc(u,i,h){const f=[];for(let v=0;v<u.length;v++){const w=[];for(let M=0;M<u[v].length;M++){const P=Ph(u[v][M],h);rl(i,P),w.push(P)}f.push(w)}return f}function Sa(u,i,h){const f=[];for(let v=0;v<u.length;v++){const w=Sc(u[v],i,h);f.push(w)}return f}function cu(u,i,h,f){if(u[0]<h[0]||u[0]>h[2]){const v=.5*f;let w=u[0]-h[0]>v?-f:h[0]-u[0]>v?f:0;w===0&&(w=u[0]-h[2]>v?-f:h[2]-u[0]>v?f:0),u[0]+=w}rl(i,u)}function Ec(u,i,h,f){const v=Math.pow(2,f.z)*ta,w=[f.x*ta,f.y*ta],M=[];for(const P of u)for(const z of P){const V=[z.x+w[0],z.y+w[1]];cu(V,i,h,v),M.push(V)}return M}function Ul(u,i,h,f){const v=Math.pow(2,f.z)*ta,w=[f.x*ta,f.y*ta],M=[];for(const z of u){const V=[];for(const Z of z){const J=[Z.x+w[0],Z.y+w[1]];rl(i,J),V.push(J)}M.push(V)}if(i[2]-i[0]<=v/2){(P=i)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(const z of M)for(const V of z)cu(V,i,h,v)}var P;return M}class Zi{constructor(i,h){this.type=Jn,this.geojson=i,this.geometries=h}static parse(i,h){if(i.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(on(i[1])){const f=i[1];if(f.type==="FeatureCollection"){const v=[];for(const w of f.features){const{type:M,coordinates:P}=w.geometry;M==="Polygon"&&v.push(P),M==="MultiPolygon"&&v.push(...P)}if(v.length)return new Zi(f,{type:"MultiPolygon",coordinates:v})}else if(f.type==="Feature"){const v=f.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Zi(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Zi(f,f)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(h,f){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],M=h.canonicalID();if(f.type==="Polygon"){const P=Sc(f.coordinates,w,M),z=Ec(h.geometry(),v,w,M);if(!Mc(v,w))return!1;for(const V of z)if(!ks(V,P))return!1}if(f.type==="MultiPolygon"){const P=Sa(f.coordinates,w,M),z=Ec(h.geometry(),v,w,M);if(!Mc(v,w))return!1;for(const V of z)if(!Yu(V,P))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(h,f){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],M=h.canonicalID();if(f.type==="Polygon"){const P=Sc(f.coordinates,w,M),z=Ul(h.geometry(),v,w,M);if(!Mc(v,w))return!1;for(const V of z)if(!ds(V,P))return!1}if(f.type==="MultiPolygon"){const P=Sa(f.coordinates,w,M),z=Ul(h.geometry(),v,w,M);if(!Mc(v,w))return!1;for(const V of z)if(!$a(V,P))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let uu=class{constructor(u=[],i=(h,f)=>h<f?-1:h>f?1:0){if(this.data=u,this.length=this.data.length,this.compare=i,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:i,compare:h}=this,f=i[u];for(;u>0;){const v=u-1>>1,w=i[v];if(h(f,w)>=0)break;i[u]=w,u=v}i[u]=f}_down(u){const{data:i,compare:h}=this,f=this.length>>1,v=i[u];for(;u<f;){let w=1+(u<<1);const M=w+1;if(M<this.length&&h(i[M],i[w])<0&&(w=M),h(i[w],v)>=0)break;i[u]=i[w],u=w}i[u]=v}};function il(u,i,h=0,f=u.length-1,v=kh){for(;f>h;){if(f-h>600){const z=f-h+1,V=i-h+1,Z=Math.log(z),J=.5*Math.exp(2*Z/3),st=.5*Math.sqrt(Z*J*(z-J)/z)*(V-z/2<0?-1:1);il(u,i,Math.max(h,Math.floor(i-V*J/z+st)),Math.min(f,Math.floor(i+(z-V)*J/z+st)),v)}const w=u[i];let M=h,P=f;for(Tc(u,h,i),v(u[f],w)>0&&Tc(u,h,f);M<P;){for(Tc(u,M,P),M++,P--;v(u[M],w)<0;)M++;for(;v(u[P],w)>0;)P--}v(u[h],w)===0?Tc(u,h,P):(P++,Tc(u,P,f)),P<=i&&(h=P+1),i<=P&&(f=P-1)}}function Tc(u,i,h){const f=u[i];u[i]=u[h],u[h]=f}function kh(u,i){return u<i?-1:u>i?1:0}function hu(u,i){if(u.length<=1)return[u];const h=[];let f,v;for(const w of u){const M=Hl(w);M!==0&&(w.area=Math.abs(M),v===void 0&&(v=M<0),v===M<0?(f&&h.push(f),f=[w]):f.push(w))}if(f&&h.push(f),i>1)for(let w=0;w<h.length;w++)h[w].length<=i||(il(h[w],i,1,h[w].length-1,du),h[w]=h[w].slice(0,i));return h}function du(u,i){return i.area-u.area}function Hl(u){let i=0;for(let h,f,v=0,w=u.length,M=w-1;v<w;M=v++)h=u[v],f=u[M],i+=(f.x-h.x)*(h.y+f.y);return i}const Id=1/298.257223563,Rs=Id*(2-Id),ol=Math.PI/180;class fs{constructor(i){const h=6378.137*ol*1e3,f=Math.cos(i*ol),v=1/(1-Rs*(1-f*f)),w=Math.sqrt(v);this.kx=h*w*f,this.ky=h*w*v*(1-Rs)}distance(i,h){const f=this.wrap(i[0]-h[0])*this.kx,v=(i[1]-h[1])*this.ky;return Math.sqrt(f*f+v*v)}pointOnLine(i,h){let f,v,w,M,P=1/0;for(let z=0;z<i.length-1;z++){let V=i[z][0],Z=i[z][1],J=this.wrap(i[z+1][0]-V)*this.kx,st=(i[z+1][1]-Z)*this.ky,lt=0;J===0&&st===0||(lt=(this.wrap(h[0]-V)*this.kx*J+(h[1]-Z)*this.ky*st)/(J*J+st*st),lt>1?(V=i[z+1][0],Z=i[z+1][1]):lt>0&&(V+=J/this.kx*lt,Z+=st/this.ky*lt)),J=this.wrap(h[0]-V)*this.kx,st=(h[1]-Z)*this.ky;const dt=J*J+st*st;dt<P&&(P=dt,f=V,v=Z,w=z,M=lt)}return{point:[f,v],index:w,t:Math.max(0,Math.min(1,M))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function Lh(u,i){return i[0]-u[0]}function Pc(u){return u[1]-u[0]+1}function ha(u,i){return u[1]>=u[0]&&u[1]<i}function da(u,i){if(u[0]>u[1])return[null,null];const h=Pc(u);if(i){if(h===2)return[u,null];const v=Math.floor(h/2);return[[u[0],u[0]+v],[u[0]+v,u[1]]]}if(h===1)return[u,null];const f=Math.floor(h/2)-1;return[[u[0],u[0]+f],[u[0]+f+1,u[1]]]}function Gl(u,i){if(!ha(i,u.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let f=i[0];f<=i[1];++f)rl(h,u[f]);return h}function Xu(u){const i=[1/0,1/0,-1/0,-1/0];for(const h of u)for(const f of h)rl(i,f);return i}function Rh(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function $l(u,i,h){if(!Rh(u)||!Rh(i))return NaN;let f=0,v=0;return u[2]<i[0]&&(f=i[0]-u[2]),u[0]>i[2]&&(f=u[0]-i[2]),u[1]>i[3]&&(v=u[1]-i[3]),u[3]<i[1]&&(v=i[1]-u[3]),h.distance([0,0],[f,v])}function _r(u,i,h){const f=h.pointOnLine(i,u);return h.distance(u,f.point)}function fa(u,i,h,f,v){const w=Math.min(_r(u,[h,f],v),_r(i,[h,f],v)),M=Math.min(_r(h,[u,i],v),_r(f,[u,i],v));return Math.min(w,M)}function Ae(u,i,h,f,v){if(!ha(i,u.length)||!ha(f,h.length))return 1/0;let w=1/0;for(let M=i[0];M<i[1];++M){const P=u[M],z=u[M+1];for(let V=f[0];V<f[1];++V){const Z=h[V],J=h[V+1];if(hs(P,z,Z,J))return 0;w=Math.min(w,fa(P,z,Z,J,v))}}return w}function qe(u,i,h,f,v){if(!ha(i,u.length)||!ha(f,h.length))return NaN;let w=1/0;for(let M=i[0];M<=i[1];++M)for(let P=f[0];P<=f[1];++P)if(w=Math.min(w,v.distance(u[M],h[P])),w===0)return w;return w}function Dn(u,i,h){if(ks(u,i,!0))return 0;let f=1/0;for(const v of i){const w=v[0],M=v[v.length-1];if(w!==M&&(f=Math.min(f,_r(u,[M,w],h)),f===0))return f;const P=h.pointOnLine(v,u);if(f=Math.min(f,h.distance(u,P.point)),f===0)return f}return f}function sr(u,i,h,f){if(!ha(i,u.length))return NaN;for(let w=i[0];w<=i[1];++w)if(ks(u[w],h,!0))return 0;let v=1/0;for(let w=i[0];w<i[1];++w){const M=u[w],P=u[w+1];for(const z of h)for(let V=0,Z=z.length,J=Z-1;V<Z;J=V++){const st=z[J],lt=z[V];if(hs(M,P,st,lt))return 0;v=Math.min(v,fa(M,P,st,lt,f))}}return v}function yi(u,i){for(const h of u)for(const f of h)if(ks(f,i,!0))return!0;return!1}function Hr(u,i,h,f=1/0){const v=Xu(u),w=Xu(i);if(f!==1/0&&$l(v,w,h)>=f)return f;if(Mc(v,w)){if(yi(u,i))return 0}else if(yi(i,u))return 0;let M=1/0;for(const P of u)for(let z=0,V=P.length,Z=V-1;z<V;Z=z++){const J=P[Z],st=P[z];for(const lt of i)for(let dt=0,At=lt.length,Et=At-1;dt<At;Et=dt++){const Nt=lt[Et],ce=lt[dt];if(hs(J,st,Nt,ce))return 0;M=Math.min(M,fa(J,st,Nt,ce,h))}}return M}function si(u,i,h,f,v,w){if(!w)return;const M=$l(Gl(f,w),v,h);M<i&&u.push([M,w,[0,0]])}function me(u,i,h,f,v,w,M){if(!w||!M)return;const P=$l(Gl(f,w),Gl(v,M),h);P<i&&u.push([P,w,M])}function We(u,i,h,f,v=1/0){let w=Math.min(f.distance(u[0],h[0][0]),v);if(w===0)return w;const M=new uu([[0,[0,u.length-1],[0,0]]],Lh),P=Xu(h);for(;M.length>0;){const z=M.pop();if(z[0]>=w)continue;const V=z[1],Z=i?50:100;if(Pc(V)<=Z){if(!ha(V,u.length))return NaN;if(i){const J=sr(u,V,h,f);if(isNaN(J)||J===0)return J;w=Math.min(w,J)}else for(let J=V[0];J<=V[1];++J){const st=Dn(u[J],h,f);if(w=Math.min(w,st),w===0)return 0}}else{const J=da(V,i);si(M,w,f,u,P,J[0]),si(M,w,f,u,P,J[1])}}return w}function ze(u,i,h,f,v,w=1/0){let M=Math.min(w,v.distance(u[0],h[0]));if(M===0)return M;const P=new uu([[0,[0,u.length-1],[0,h.length-1]]],Lh);for(;P.length>0;){const z=P.pop();if(z[0]>=M)continue;const V=z[1],Z=z[2],J=i?50:100,st=f?50:100;if(Pc(V)<=J&&Pc(Z)<=st){if(!ha(V,u.length)&&ha(Z,h.length))return NaN;let lt;if(i&&f)lt=Ae(u,V,h,Z,v),M=Math.min(M,lt);else if(i&&!f){const dt=u.slice(V[0],V[1]+1);for(let At=Z[0];At<=Z[1];++At)if(lt=_r(h[At],dt,v),M=Math.min(M,lt),M===0)return M}else if(!i&&f){const dt=h.slice(Z[0],Z[1]+1);for(let At=V[0];At<=V[1];++At)if(lt=_r(u[At],dt,v),M=Math.min(M,lt),M===0)return M}else lt=qe(u,V,h,Z,v),M=Math.min(M,lt)}else{const lt=da(V,i),dt=da(Z,f);me(P,M,v,u,h,lt[0],dt[0]),me(P,M,v,u,h,lt[0],dt[1]),me(P,M,v,u,h,lt[1],dt[0]),me(P,M,v,u,h,lt[1],dt[1])}}return M}function Tn(u){return u.type==="MultiPolygon"?u.coordinates.map(i=>({type:"Polygon",coordinates:i})):u.type==="MultiLineString"?u.coordinates.map(i=>({type:"LineString",coordinates:i})):u.type==="MultiPoint"?u.coordinates.map(i=>({type:"Point",coordinates:i})):[u]}class nr{constructor(i,h){this.type=Ze,this.geojson=i,this.geometries=h}static parse(i,h){if(i.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(on(i[1])){const f=i[1];if(f.type==="FeatureCollection")return new nr(f,f.features.map(v=>Tn(v.geometry)).flat());if(f.type==="Feature")return new nr(f,Tn(f.geometry));if("type"in f&&"coordinates"in f)return new nr(f,Tn(f))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(h,f){const v=h.geometry(),w=v.flat().map(z=>Vl([z.x,z.y],h.canonical));if(v.length===0)return NaN;const M=new fs(w[0][1]);let P=1/0;for(const z of f){switch(z.type){case"Point":P=Math.min(P,ze(w,!1,[z.coordinates],!1,M,P));break;case"LineString":P=Math.min(P,ze(w,!1,z.coordinates,!0,M,P));break;case"Polygon":P=Math.min(P,We(w,!1,z.coordinates,M,P))}if(P===0)return P}return P}(i,this.geometries);if(i.geometryType()==="LineString")return function(h,f){const v=h.geometry(),w=v.flat().map(z=>Vl([z.x,z.y],h.canonical));if(v.length===0)return NaN;const M=new fs(w[0][1]);let P=1/0;for(const z of f){switch(z.type){case"Point":P=Math.min(P,ze(w,!0,[z.coordinates],!1,M,P));break;case"LineString":P=Math.min(P,ze(w,!0,z.coordinates,!0,M,P));break;case"Polygon":P=Math.min(P,We(w,!0,z.coordinates,M,P))}if(P===0)return P}return P}(i,this.geometries);if(i.geometryType()==="Polygon")return function(h,f){const v=h.geometry();if(v.length===0||v[0].length===0)return NaN;const w=hu(v,0).map(z=>z.map(V=>V.map(Z=>Vl([Z.x,Z.y],h.canonical)))),M=new fs(w[0][0][0][1]);let P=1/0;for(const z of f)for(const V of w){switch(z.type){case"Point":P=Math.min(P,We([z.coordinates],!1,V,M,P));break;case"LineString":P=Math.min(P,We(z.coordinates,!0,V,M,P));break;case"Polygon":P=Math.min(P,Hr(V,z.coordinates,M,P))}if(P===0)return P}return P}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const br={"==":Nl,"!=":Vo,">":au,"<":Cd,">=":Uo,"<=":yo,array:Jo,at:Cc,boolean:Jo,case:qu,coalesce:Bl,collator:jl,format:ua,image:Ga,in:ca,"index-of":Ol,interpolate:go,"interpolate-hcl":go,"interpolate-lab":go,length:su,let:Xr,literal:bi,match:ru,number:Jo,"number-format":ii,object:Jo,slice:zl,step:Fi,string:Jo,"to-boolean":ur,"to-color":ur,"to-number":ur,"to-string":ur,var:Dr,within:Zi,distance:nr};class xr{constructor(i,h,f,v){this.name=i,this.type=h,this._evaluate=f,this.args=v}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,h){const f=i[0],v=xr.definitions[f];if(!v)return h.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(v)?v[0]:v.type,M=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,P=M.filter(([V])=>!Array.isArray(V)||V.length===i.length-1);let z=null;for(const[V,Z]of P){z=new Fn(h.registry,Za,h.path,null,h.scope);const J=[];let st=!1;for(let lt=1;lt<i.length;lt++){const dt=i[lt],At=Array.isArray(V)?V[lt-1]:V.type,Et=z.parse(dt,1+J.length,At);if(!Et){st=!0;break}J.push(Et)}if(!st)if(Array.isArray(V)&&V.length!==J.length)z.error(`Expected ${V.length} arguments, but found ${J.length} instead.`);else{for(let lt=0;lt<J.length;lt++){const dt=Array.isArray(V)?V[lt]:V.type,At=J[lt];z.concat(lt+1).checkSubtype(dt,At.type)}if(z.errors.length===0)return new xr(f,w,Z,J)}}if(P.length===1)h.errors.push(...z.errors);else{const V=(P.length?P:M).map(([J])=>{return st=J,Array.isArray(st)?`(${st.map(mi).join(", ")})`:`(${mi(st.type)}...)`;var st}).join(" | "),Z=[];for(let J=1;J<i.length;J++){const st=h.parse(i[J],1+Z.length);if(!st)return null;Z.push(mi(st.type))}h.error(`Expected arguments of type ${V}, but found (${Z.join(", ")}) instead.`)}return null}static register(i,h){xr.definitions=h;for(const f in h)i[f]=xr}}function Gr(u,[i,h,f,v]){i=i.evaluate(u),h=h.evaluate(u),f=f.evaluate(u);const w=v?v.evaluate(u):1,M=ai(i,h,f,w);if(M)throw new mn(M);return new $t(i/255,h/255,f/255,w,!1)}function Ds(u,i){return u in i}function kc(u,i){const h=i[u];return h===void 0?null:h}function Di(u){return{type:u}}function Za(u){if(u instanceof Dr)return Za(u.boundExpression);if(u instanceof xr&&u.name==="error"||u instanceof jl||u instanceof Zi||u instanceof nr)return!1;const i=u instanceof ur||u instanceof Jo;let h=!0;return u.eachChild(f=>{h=i?h&&Za(f):h&&f instanceof bi}),!!h&&fu(u)&&Zl(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function fu(u){if(u instanceof xr&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof Zi||u instanceof nr)return!1;let i=!0;return u.eachChild(h=>{i&&!fu(h)&&(i=!1)}),i}function ps(u){if(u instanceof xr&&u.name==="feature-state")return!1;let i=!0;return u.eachChild(h=>{i&&!ps(h)&&(i=!1)}),i}function Zl(u,i){if(u instanceof xr&&i.indexOf(u.name)>=0)return!1;let h=!0;return u.eachChild(f=>{h&&!Zl(f,i)&&(h=!1)}),h}function Jr(u){return{result:"success",value:u}}function tr(u){return{result:"error",value:u}}function Os(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function ms(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function al(u){return!!u.expression&&u.expression.interpolated}function vr(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Ea(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function sl(u){return u}function Wa(u,i){const h=i.type==="color",f=u.stops&&typeof u.stops[0][0]=="object",v=f||!(f||u.property!==void 0),w=u.type||(al(i)?"exponential":"interval");if(h||i.type==="padding"){const Z=h?$t.parse:An.parse;(u=Gn({},u)).stops&&(u.stops=u.stops.map(J=>[J[0],Z(J[1])])),u.default=Z(u.default?u.default:i.default)}if(u.colorSpace&&(M=u.colorSpace)!=="rgb"&&M!=="hcl"&&M!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var M;let P,z,V;if(w==="exponential")P=Wl;else if(w==="interval")P=ll;else if(w==="categorical"){P=zs,z=Object.create(null);for(const Z of u.stops)z[Z[0]]=Z[1];V=typeof u.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);P=pu}if(f){const Z={},J=[];for(let dt=0;dt<u.stops.length;dt++){const At=u.stops[dt],Et=At[0].zoom;Z[Et]===void 0&&(Z[Et]={zoom:Et,type:u.type,property:u.property,default:u.default,stops:[]},J.push(Et)),Z[Et].stops.push([At[0].value,At[1]])}const st=[];for(const dt of J)st.push([Z[dt].zoom,Wa(Z[dt],i)]);const lt={name:"linear"};return{kind:"composite",interpolationType:lt,interpolationFactor:go.interpolationFactor.bind(void 0,lt),zoomStops:st.map(dt=>dt[0]),evaluate:({zoom:dt},At)=>Wl({stops:st,base:u.base},i,dt).evaluate(dt,At)}}if(v){const Z=w==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:Z,interpolationFactor:go.interpolationFactor.bind(void 0,Z),zoomStops:u.stops.map(J=>J[0]),evaluate:({zoom:J})=>P(u,i,J,z,V)}}return{kind:"source",evaluate(Z,J){const st=J&&J.properties?J.properties[u.property]:void 0;return st===void 0?Ho(u.default,i.default):P(u,i,st,z,V)}}}function Ho(u,i,h){return u!==void 0?u:i!==void 0?i:h!==void 0?h:void 0}function zs(u,i,h,f,v){return Ho(typeof h===v?f[h]:void 0,u.default,i.default)}function ll(u,i,h){if(vr(h)!=="number")return Ho(u.default,i.default);const f=u.stops.length;if(f===1||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[f-1][0])return u.stops[f-1][1];const v=iu(u.stops.map(w=>w[0]),h);return u.stops[v][1]}function Wl(u,i,h){const f=u.base!==void 0?u.base:1;if(vr(h)!=="number")return Ho(u.default,i.default);const v=u.stops.length;if(v===1||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[v-1][0])return u.stops[v-1][1];const w=iu(u.stops.map(Z=>Z[0]),h),M=function(Z,J,st,lt){const dt=lt-st,At=Z-st;return dt===0?0:J===1?At/dt:(Math.pow(J,At)-1)/(Math.pow(J,dt)-1)}(h,f,u.stops[w][0],u.stops[w+1][0]),P=u.stops[w][1],z=u.stops[w+1][1],V=Br[i.type]||sl;return typeof P.evaluate=="function"?{evaluate(...Z){const J=P.evaluate.apply(void 0,Z),st=z.evaluate.apply(void 0,Z);if(J!==void 0&&st!==void 0)return V(J,st,M,u.colorSpace)}}:V(P,z,M,u.colorSpace)}function pu(u,i,h){switch(i.type){case"color":h=$t.parse(h);break;case"formatted":h=dn.fromString(h.toString());break;case"resolvedImage":h=Zr.fromString(h.toString());break;case"padding":h=An.parse(h);break;default:vr(h)===i.type||i.type==="enum"&&i.values[h]||(h=void 0)}return Ho(h,u.default,i.default)}xr.register(br,{error:[{kind:"error"},[zn],(u,[i])=>{throw new mn(i.evaluate(u))}],typeof:[zn,[Xn],(u,[i])=>mi(kn(i.evaluate(u)))],"to-rgba":[Ri(Ze,4),[eo],(u,[i])=>{const[h,f,v,w]=i.evaluate(u).rgb;return[255*h,255*f,255*v,w]}],rgb:[eo,[Ze,Ze,Ze],Gr],rgba:[eo,[Ze,Ze,Ze,Ze],Gr],has:{type:Jn,overloads:[[[zn],(u,[i])=>Ds(i.evaluate(u),u.properties())],[[zn,pi],(u,[i,h])=>Ds(i.evaluate(u),h.evaluate(u))]]},get:{type:Xn,overloads:[[[zn],(u,[i])=>kc(i.evaluate(u),u.properties())],[[zn,pi],(u,[i,h])=>kc(i.evaluate(u),h.evaluate(u))]]},"feature-state":[Xn,[zn],(u,[i])=>kc(i.evaluate(u),u.featureState||{})],properties:[pi,[],u=>u.properties()],"geometry-type":[zn,[],u=>u.geometryType()],id:[Xn,[],u=>u.id()],zoom:[Ze,[],u=>u.globals.zoom],"heatmap-density":[Ze,[],u=>u.globals.heatmapDensity||0],"line-progress":[Ze,[],u=>u.globals.lineProgress||0],accumulated:[Xn,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[Ze,Di(Ze),(u,i)=>{let h=0;for(const f of i)h+=f.evaluate(u);return h}],"*":[Ze,Di(Ze),(u,i)=>{let h=1;for(const f of i)h*=f.evaluate(u);return h}],"-":{type:Ze,overloads:[[[Ze,Ze],(u,[i,h])=>i.evaluate(u)-h.evaluate(u)],[[Ze],(u,[i])=>-i.evaluate(u)]]},"/":[Ze,[Ze,Ze],(u,[i,h])=>i.evaluate(u)/h.evaluate(u)],"%":[Ze,[Ze,Ze],(u,[i,h])=>i.evaluate(u)%h.evaluate(u)],ln2:[Ze,[],()=>Math.LN2],pi:[Ze,[],()=>Math.PI],e:[Ze,[],()=>Math.E],"^":[Ze,[Ze,Ze],(u,[i,h])=>Math.pow(i.evaluate(u),h.evaluate(u))],sqrt:[Ze,[Ze],(u,[i])=>Math.sqrt(i.evaluate(u))],log10:[Ze,[Ze],(u,[i])=>Math.log(i.evaluate(u))/Math.LN10],ln:[Ze,[Ze],(u,[i])=>Math.log(i.evaluate(u))],log2:[Ze,[Ze],(u,[i])=>Math.log(i.evaluate(u))/Math.LN2],sin:[Ze,[Ze],(u,[i])=>Math.sin(i.evaluate(u))],cos:[Ze,[Ze],(u,[i])=>Math.cos(i.evaluate(u))],tan:[Ze,[Ze],(u,[i])=>Math.tan(i.evaluate(u))],asin:[Ze,[Ze],(u,[i])=>Math.asin(i.evaluate(u))],acos:[Ze,[Ze],(u,[i])=>Math.acos(i.evaluate(u))],atan:[Ze,[Ze],(u,[i])=>Math.atan(i.evaluate(u))],min:[Ze,Di(Ze),(u,i)=>Math.min(...i.map(h=>h.evaluate(u)))],max:[Ze,Di(Ze),(u,i)=>Math.max(...i.map(h=>h.evaluate(u)))],abs:[Ze,[Ze],(u,[i])=>Math.abs(i.evaluate(u))],round:[Ze,[Ze],(u,[i])=>{const h=i.evaluate(u);return h<0?-Math.round(-h):Math.round(h)}],floor:[Ze,[Ze],(u,[i])=>Math.floor(i.evaluate(u))],ceil:[Ze,[Ze],(u,[i])=>Math.ceil(i.evaluate(u))],"filter-==":[Jn,[zn,Xn],(u,[i,h])=>u.properties()[i.value]===h.value],"filter-id-==":[Jn,[Xn],(u,[i])=>u.id()===i.value],"filter-type-==":[Jn,[zn],(u,[i])=>u.geometryType()===i.value],"filter-<":[Jn,[zn,Xn],(u,[i,h])=>{const f=u.properties()[i.value],v=h.value;return typeof f==typeof v&&f<v}],"filter-id-<":[Jn,[Xn],(u,[i])=>{const h=u.id(),f=i.value;return typeof h==typeof f&&h<f}],"filter->":[Jn,[zn,Xn],(u,[i,h])=>{const f=u.properties()[i.value],v=h.value;return typeof f==typeof v&&f>v}],"filter-id->":[Jn,[Xn],(u,[i])=>{const h=u.id(),f=i.value;return typeof h==typeof f&&h>f}],"filter-<=":[Jn,[zn,Xn],(u,[i,h])=>{const f=u.properties()[i.value],v=h.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[Jn,[Xn],(u,[i])=>{const h=u.id(),f=i.value;return typeof h==typeof f&&h<=f}],"filter->=":[Jn,[zn,Xn],(u,[i,h])=>{const f=u.properties()[i.value],v=h.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[Jn,[Xn],(u,[i])=>{const h=u.id(),f=i.value;return typeof h==typeof f&&h>=f}],"filter-has":[Jn,[Xn],(u,[i])=>i.value in u.properties()],"filter-has-id":[Jn,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[Jn,[Ri(zn)],(u,[i])=>i.value.indexOf(u.geometryType())>=0],"filter-id-in":[Jn,[Ri(Xn)],(u,[i])=>i.value.indexOf(u.id())>=0],"filter-in-small":[Jn,[zn,Ri(Xn)],(u,[i,h])=>h.value.indexOf(u.properties()[i.value])>=0],"filter-in-large":[Jn,[zn,Ri(Xn)],(u,[i,h])=>function(f,v,w,M){for(;w<=M;){const P=w+M>>1;if(v[P]===f)return!0;v[P]>f?M=P-1:w=P+1}return!1}(u.properties()[i.value],h.value,0,h.value.length-1)],all:{type:Jn,overloads:[[[Jn,Jn],(u,[i,h])=>i.evaluate(u)&&h.evaluate(u)],[Di(Jn),(u,i)=>{for(const h of i)if(!h.evaluate(u))return!1;return!0}]]},any:{type:Jn,overloads:[[[Jn,Jn],(u,[i,h])=>i.evaluate(u)||h.evaluate(u)],[Di(Jn),(u,i)=>{for(const h of i)if(h.evaluate(u))return!0;return!1}]]},"!":[Jn,[Jn],(u,[i])=>!i.evaluate(u)],"is-supported-script":[Jn,[zn],(u,[i])=>{const h=u.globals&&u.globals.isSupportedScript;return!h||h(i.evaluate(u))}],upcase:[zn,[zn],(u,[i])=>i.evaluate(u).toUpperCase()],downcase:[zn,[zn],(u,[i])=>i.evaluate(u).toLowerCase()],concat:[zn,Di(Xn),(u,i)=>i.map(h=>Rr(h.evaluate(u))).join("")],"resolved-locale":[zn,[tu],(u,[i])=>i.evaluate(u).resolvedLocale()]});class Lc{constructor(i,h){var f;this.expression=i,this._warningHistory={},this._evaluator=new Wr,this._defaultValue=h?(f=h).type==="color"&&Ea(f.default)?new $t(0,0,0,0):f.type==="color"?$t.parse(f.default)||null:f.type==="padding"?An.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?Kn.parse(f.default)||null:f.type==="projectionDefinition"?or.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(i,h,f,v,w,M){return this._evaluator.globals=i,this._evaluator.feature=h,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=M,this.expression.evaluate(this._evaluator)}evaluate(i,h,f,v,w,M){this._evaluator.globals=i,this._evaluator.feature=h||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=M||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new mn(`Expected value to be one of ${Object.keys(this._enumValues).map(z=>JSON.stringify(z)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(P.message)),this._defaultValue}}}function pa(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in br}function Fs(u,i){const h=new Fn(br,Za,[],i?function(v){const w={color:eo,string:zn,number:Ze,enum:zn,boolean:Jn,formatted:Pl,padding:Uu,projectionDefinition:Eo,resolvedImage:Ms,variableAnchorOffsetCollection:Hu};return v.type==="array"?Ri(w[v.value]||Xn,v.length):w[v.type]}(i):void 0),f=h.parse(u,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Jr(new Lc(f,i)):tr(h.errors)}class cl{constructor(i,h){this.kind=i,this._styleExpression=h,this.isStateDependent=i!=="constant"&&!ps(h.expression)}evaluateWithoutErrorHandling(i,h,f,v,w,M){return this._styleExpression.evaluateWithoutErrorHandling(i,h,f,v,w,M)}evaluate(i,h,f,v,w,M){return this._styleExpression.evaluate(i,h,f,v,w,M)}}class Ta{constructor(i,h,f,v){this.kind=i,this.zoomStops=f,this._styleExpression=h,this.isStateDependent=i!=="camera"&&!ps(h.expression),this.interpolationType=v}evaluateWithoutErrorHandling(i,h,f,v,w,M){return this._styleExpression.evaluateWithoutErrorHandling(i,h,f,v,w,M)}evaluate(i,h,f,v,w,M){return this._styleExpression.evaluate(i,h,f,v,w,M)}interpolationFactor(i,h,f){return this.interpolationType?go.interpolationFactor(this.interpolationType,i,h,f):0}}function ul(u,i){const h=Fs(u,i);if(h.result==="error")return h;const f=h.value.expression,v=fu(f);if(!v&&!Os(i))return tr([new Fr("","data expressions not supported")]);const w=Zl(f,["zoom"]);if(!w&&!ms(i))return tr([new Fr("","zoom expressions not supported")]);const M=Sd(f);return M||w?M instanceof Fr?tr([M]):M instanceof go&&!al(i)?tr([new Fr("",'"interpolate" expressions cannot be used with this property')]):Jr(M?new Ta(v?"camera":"composite",h.value,M.labels,M instanceof go?M.interpolation:void 0):new cl(v?"constant":"source",h.value)):tr([new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Md{constructor(i,h){this._parameters=i,this._specification=h,Gn(this,Wa(this._parameters,this._specification))}static deserialize(i){return new Md(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Sd(u){let i=null;if(u instanceof Xr)i=Sd(u.result);else if(u instanceof Bl){for(const h of u.args)if(i=Sd(h),i)break}else(u instanceof Fi||u instanceof go)&&u.input instanceof xr&&u.input.name==="zoom"&&(i=u);return i instanceof Fr||u.eachChild(h=>{const f=Sd(h);f instanceof Fr?i=f:!i&&f?i=new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&f&&i!==f&&(i=new Fr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function Ed(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const i of u.slice(1))if(!Ed(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const Dh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Qu(u){if(u==null)return{filter:()=>!0,needGeometry:!1};Ed(u)||(u=Ju(u));const i=Fs(u,Dh);if(i.result==="error")throw new Error(i.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,f,v)=>i.value.evaluate(h,f,{},v),needGeometry:jf(u)}}function Nf(u,i){return u<i?-1:u>i?1:0}function jf(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let i=1;i<u.length;i++)if(jf(u[i]))return!0;return!1}function Ju(u){if(!u)return!0;const i=u[0];return u.length<=1?i!=="any":i==="=="?Td(u[1],u[2],"=="):i==="!="?Qi(Td(u[1],u[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Td(u[1],u[2],i):i==="any"?(h=u.slice(1),["any"].concat(h.map(Ju))):i==="all"?["all"].concat(u.slice(1).map(Ju)):i==="none"?["all"].concat(u.slice(1).map(Ju).map(Qi)):i==="in"?Vf(u[1],u.slice(2)):i==="!in"?Qi(Vf(u[1],u.slice(2))):i==="has"?Wi(u[1]):i!=="!has"||Qi(Wi(u[1]));var h}function Td(u,i,h){switch(u){case"$type":return[`filter-type-${h}`,i];case"$id":return[`filter-id-${h}`,i];default:return[`filter-${h}`,u,i]}}function Vf(u,i){if(i.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(h=>typeof h!=typeof i[0])?["filter-in-large",u,["literal",i.sort(Nf)]]:["filter-in-small",u,["literal",i]]}}function Wi(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Qi(u){return["!",u]}function Oh(u){const i=typeof u;if(i==="number"||i==="boolean"||i==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let v="[";for(const w of u)v+=`${Oh(w)},`;return`${v}]`}const h=Object.keys(u).sort();let f="{";for(let v=0;v<h.length;v++)f+=`${JSON.stringify(h[v])}:${Oh(u[h[v]])},`;return`${f}}`}function Pd(u){let i="";for(const h of ie)i+=`/${Oh(u[h])}`;return i}function Uf(u){const i=u.value;return i?[new Ue(u.key,i,"constants have been deprecated as of v8")]:[]}function qi(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function ql(u){if(Array.isArray(u))return u.map(ql);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const i={};for(const h in u)i[h]=ql(u[h]);return i}return qi(u)}function ea(u){const i=u.key,h=u.value,f=u.valueSpec||{},v=u.objectElementValidators||{},w=u.style,M=u.styleSpec,P=u.validateSpec;let z=[];const V=vr(h);if(V!=="object")return[new Ue(i,h,`object expected, ${V} found`)];for(const Z in h){const J=Z.split(".")[0],st=f[J]||f["*"];let lt;if(v[J])lt=v[J];else if(f[J])lt=P;else if(v["*"])lt=v["*"];else{if(!f["*"]){z.push(new Ue(i,h[Z],`unknown property "${Z}"`));continue}lt=P}z=z.concat(lt({key:(i&&`${i}.`)+Z,value:h[Z],valueSpec:st,style:w,styleSpec:M,object:h,objectKey:Z,validateSpec:P},h))}for(const Z in f)v[Z]||f[Z].required&&f[Z].default===void 0&&h[Z]===void 0&&z.push(new Ue(i,h,`missing required property "${Z}"`));return z}function zh(u){const i=u.value,h=u.valueSpec,f=u.style,v=u.styleSpec,w=u.key,M=u.arrayElementValidator||u.validateSpec;if(vr(i)!=="array")return[new Ue(w,i,`array expected, ${vr(i)} found`)];if(h.length&&i.length!==h.length)return[new Ue(w,i,`array length ${h.length} expected, length ${i.length} found`)];if(h["min-length"]&&i.length<h["min-length"])return[new Ue(w,i,`array length at least ${h["min-length"]} expected, length ${i.length} found`)];let P={type:h.value,values:h.values};v.$version<7&&(P.function=h.function),vr(h.value)==="object"&&(P=h.value);let z=[];for(let V=0;V<i.length;V++)z=z.concat(M({array:i,arrayIndex:V,value:i[V],valueSpec:P,validateSpec:u.validateSpec,style:f,styleSpec:v,key:`${w}[${V}]`}));return z}function Rc(u){const i=u.key,h=u.value,f=u.valueSpec;let v=vr(h);return v==="number"&&h!=h&&(v="NaN"),v!=="number"?[new Ue(i,h,`number expected, ${v} found`)]:"minimum"in f&&h<f.minimum?[new Ue(i,h,`${h} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&h>f.maximum?[new Ue(i,h,`${h} is greater than the maximum value ${f.maximum}`)]:[]}function mu(u){const i=u.valueSpec,h=qi(u.value.type);let f,v,w,M={};const P=h!=="categorical"&&u.value.property===void 0,z=!P,V=vr(u.value.stops)==="array"&&vr(u.value.stops[0])==="array"&&vr(u.value.stops[0][0])==="object",Z=ea({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(lt){if(h==="identity")return[new Ue(lt.key,lt.value,'identity function may not have a "stops" property')];let dt=[];const At=lt.value;return dt=dt.concat(zh({key:lt.key,value:At,valueSpec:lt.valueSpec,validateSpec:lt.validateSpec,style:lt.style,styleSpec:lt.styleSpec,arrayElementValidator:J})),vr(At)==="array"&&At.length===0&&dt.push(new Ue(lt.key,At,"array must have at least one stop")),dt},default:function(lt){return lt.validateSpec({key:lt.key,value:lt.value,valueSpec:i,validateSpec:lt.validateSpec,style:lt.style,styleSpec:lt.styleSpec})}}});return h==="identity"&&P&&Z.push(new Ue(u.key,u.value,'missing required property "property"')),h==="identity"||u.value.stops||Z.push(new Ue(u.key,u.value,'missing required property "stops"')),h==="exponential"&&u.valueSpec.expression&&!al(u.valueSpec)&&Z.push(new Ue(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(z&&!Os(u.valueSpec)?Z.push(new Ue(u.key,u.value,"property functions not supported")):P&&!ms(u.valueSpec)&&Z.push(new Ue(u.key,u.value,"zoom functions not supported"))),h!=="categorical"&&!V||u.value.property!==void 0||Z.push(new Ue(u.key,u.value,'"property" property is required')),Z;function J(lt){let dt=[];const At=lt.value,Et=lt.key;if(vr(At)!=="array")return[new Ue(Et,At,`array expected, ${vr(At)} found`)];if(At.length!==2)return[new Ue(Et,At,`array length 2 expected, length ${At.length} found`)];if(V){if(vr(At[0])!=="object")return[new Ue(Et,At,`object expected, ${vr(At[0])} found`)];if(At[0].zoom===void 0)return[new Ue(Et,At,"object stop key must have zoom")];if(At[0].value===void 0)return[new Ue(Et,At,"object stop key must have value")];if(w&&w>qi(At[0].zoom))return[new Ue(Et,At[0].zoom,"stop zoom values must appear in ascending order")];qi(At[0].zoom)!==w&&(w=qi(At[0].zoom),v=void 0,M={}),dt=dt.concat(ea({key:`${Et}[0]`,value:At[0],valueSpec:{zoom:{}},validateSpec:lt.validateSpec,style:lt.style,styleSpec:lt.styleSpec,objectElementValidators:{zoom:Rc,value:st}}))}else dt=dt.concat(st({key:`${Et}[0]`,value:At[0],validateSpec:lt.validateSpec,style:lt.style,styleSpec:lt.styleSpec},At));return pa(ql(At[1]))?dt.concat([new Ue(`${Et}[1]`,At[1],"expressions are not allowed in function stops.")]):dt.concat(lt.validateSpec({key:`${Et}[1]`,value:At[1],valueSpec:i,validateSpec:lt.validateSpec,style:lt.style,styleSpec:lt.styleSpec}))}function st(lt,dt){const At=vr(lt.value),Et=qi(lt.value),Nt=lt.value!==null?lt.value:dt;if(f){if(At!==f)return[new Ue(lt.key,Nt,`${At} stop domain type must match previous stop domain type ${f}`)]}else f=At;if(At!=="number"&&At!=="string"&&At!=="boolean")return[new Ue(lt.key,Nt,"stop domain value must be a number, string, or boolean")];if(At!=="number"&&h!=="categorical"){let ce=`number expected, ${At} found`;return Os(i)&&h===void 0&&(ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ue(lt.key,Nt,ce)]}return h!=="categorical"||At!=="number"||isFinite(Et)&&Math.floor(Et)===Et?h!=="categorical"&&At==="number"&&v!==void 0&&Et<v?[new Ue(lt.key,Nt,"stop domain values must appear in ascending order")]:(v=Et,h==="categorical"&&Et in M?[new Ue(lt.key,Nt,"stop domain values must be unique")]:(M[Et]=!0,[])):[new Ue(lt.key,Nt,`integer expected, found ${Et}`)]}}function Bs(u){const i=(u.expressionContext==="property"?ul:Fs)(ql(u.value),u.valueSpec);if(i.result==="error")return i.value.map(f=>new Ue(`${u.key}${f.key}`,u.value,f.message));const h=i.value.expression||i.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!h.outputDefined())return[new Ue(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!ps(h))return[new Ue(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!ps(h))return[new Ue(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Zl(h,["zoom","feature-state"]))return[new Ue(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!fu(h))return[new Ue(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ns(u){const i=u.key,h=u.value,f=u.valueSpec,v=[];return Array.isArray(f.values)?f.values.indexOf(qi(h))===-1&&v.push(new Ue(i,h,`expected one of [${f.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(f.values).indexOf(qi(h))===-1&&v.push(new Ue(i,h,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(h)} found`)),v}function Dc(u){return Ed(ql(u.value))?Bs(Gn({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Hf(u)}function Hf(u){const i=u.value,h=u.key;if(vr(i)!=="array")return[new Ue(h,i,`array expected, ${vr(i)} found`)];const f=u.styleSpec;let v,w=[];if(i.length<1)return[new Ue(h,i,"filter array must have at least 1 element")];switch(w=w.concat(Ns({key:`${h}[0]`,value:i[0],valueSpec:f.filter_operator,style:u.style,styleSpec:u.styleSpec})),qi(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&qi(i[1])==="$type"&&w.push(new Ue(h,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&w.push(new Ue(h,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(v=vr(i[1]),v!=="string"&&w.push(new Ue(`${h}[1]`,i[1],`string expected, ${v} found`)));for(let M=2;M<i.length;M++)v=vr(i[M]),qi(i[1])==="$type"?w=w.concat(Ns({key:`${h}[${M}]`,value:i[M],valueSpec:f.geometry_type,style:u.style,styleSpec:u.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&w.push(new Ue(`${h}[${M}]`,i[M],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let M=1;M<i.length;M++)w=w.concat(Hf({key:`${h}[${M}]`,value:i[M],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":v=vr(i[1]),i.length!==2?w.push(new Ue(h,i,`filter array for "${i[0]}" operator must have 2 elements`)):v!=="string"&&w.push(new Ue(`${h}[1]`,i[1],`string expected, ${v} found`))}return w}function Gf(u,i){const h=u.key,f=u.validateSpec,v=u.style,w=u.styleSpec,M=u.value,P=u.objectKey,z=w[`${i}_${u.layerType}`];if(!z)return[];const V=P.match(/^(.*)-transition$/);if(i==="paint"&&V&&z[V[1]]&&z[V[1]].transition)return f({key:h,value:M,valueSpec:w.transition,style:v,styleSpec:w});const Z=u.valueSpec||z[P];if(!Z)return[new Ue(h,M,`unknown property "${P}"`)];let J;if(vr(M)==="string"&&Os(Z)&&!Z.tokens&&(J=/^{([^}]+)}$/.exec(M)))return[new Ue(h,M,`"${P}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(J[1])} }\`.`)];const st=[];return u.layerType==="symbol"&&(P==="text-field"&&v&&!v.glyphs&&st.push(new Ue(h,M,'use of "text-field" requires a style "glyphs" property')),P==="text-font"&&Ea(ql(M))&&qi(M.type)==="identity"&&st.push(new Ue(h,M,'"text-font" does not support identity functions'))),st.concat(f({key:u.key,value:M,valueSpec:Z,style:v,styleSpec:w,expressionContext:"property",propertyType:i,propertyKey:P}))}function Yp(u){return Gf(u,"paint")}function $f(u){return Gf(u,"layout")}function Zf(u){let i=[];const h=u.value,f=u.key,v=u.style,w=u.styleSpec;h.type||h.ref||i.push(new Ue(f,h,'either "type" or "ref" is required'));let M=qi(h.type);const P=qi(h.ref);if(h.id){const z=qi(h.id);for(let V=0;V<u.arrayIndex;V++){const Z=v.layers[V];qi(Z.id)===z&&i.push(new Ue(f,h.id,`duplicate layer id "${h.id}", previously used at line ${Z.id.__line__}`))}}if("ref"in h){let z;["type","source","source-layer","filter","layout"].forEach(V=>{V in h&&i.push(new Ue(f,h[V],`"${V}" is prohibited for ref layers`))}),v.layers.forEach(V=>{qi(V.id)===P&&(z=V)}),z?z.ref?i.push(new Ue(f,h.ref,"ref cannot reference another ref layer")):M=qi(z.type):i.push(new Ue(f,h.ref,`ref layer "${P}" not found`))}else if(M!=="background")if(h.source){const z=v.sources&&v.sources[h.source],V=z&&qi(z.type);z?V==="vector"&&M==="raster"?i.push(new Ue(f,h.source,`layer "${h.id}" requires a raster source`)):V!=="raster-dem"&&M==="hillshade"?i.push(new Ue(f,h.source,`layer "${h.id}" requires a raster-dem source`)):V==="raster"&&M!=="raster"?i.push(new Ue(f,h.source,`layer "${h.id}" requires a vector source`)):V!=="vector"||h["source-layer"]?V==="raster-dem"&&M!=="hillshade"?i.push(new Ue(f,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):M!=="line"||!h.paint||!h.paint["line-gradient"]||V==="geojson"&&z.lineMetrics||i.push(new Ue(f,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Ue(f,h,`layer "${h.id}" must specify a "source-layer"`)):i.push(new Ue(f,h.source,`source "${h.source}" not found`))}else i.push(new Ue(f,h,'missing required property "source"'));return i=i.concat(ea({key:f,value:h,valueSpec:w.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${f}.type`,value:h.type,valueSpec:w.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:h,objectKey:"type"}),filter:Dc,layout:z=>ea({layer:h,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":V=>$f(Gn({layerType:M},V))}}),paint:z=>ea({layer:h,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":V=>Yp(Gn({layerType:M},V))}})}})),i}function Pa(u){const i=u.value,h=u.key,f=vr(i);return f!=="string"?[new Ue(h,i,`string expected, ${f} found`)]:[]}const th={promoteId:function({key:u,value:i}){if(vr(i)==="string")return Pa({key:u,value:i});{const h=[];for(const f in i)h.push(...Pa({key:`${u}.${f}`,value:i[f]}));return h}}};function Wf(u){const i=u.value,h=u.key,f=u.styleSpec,v=u.style,w=u.validateSpec;if(!i.type)return[new Ue(h,i,'"type" is required')];const M=qi(i.type);let P;switch(M){case"vector":case"raster":return P=ea({key:h,value:i,valueSpec:f[`source_${M.replace("-","_")}`],style:u.style,styleSpec:f,objectElementValidators:th,validateSpec:w}),P;case"raster-dem":return P=function(z){var V;const Z=(V=z.sourceName)!==null&&V!==void 0?V:"",J=z.value,st=z.styleSpec,lt=st.source_raster_dem,dt=z.style;let At=[];const Et=vr(J);if(J===void 0)return At;if(Et!=="object")return At.push(new Ue("source_raster_dem",J,`object expected, ${Et} found`)),At;const Nt=qi(J.encoding)==="custom",ce=["redFactor","greenFactor","blueFactor","baseShift"],qt=z.value.encoding?`"${z.value.encoding}"`:"Default";for(const at in J)!Nt&&ce.includes(at)?At.push(new Ue(at,J[at],`In "${Z}": "${at}" is only valid when "encoding" is set to "custom". ${qt} encoding found`)):lt[at]?At=At.concat(z.validateSpec({key:at,value:J[at],valueSpec:lt[at],validateSpec:z.validateSpec,style:dt,styleSpec:st})):At.push(new Ue(at,J[at],`unknown property "${at}"`));return At}({sourceName:h,value:i,style:u.style,styleSpec:f,validateSpec:w}),P;case"geojson":if(P=ea({key:h,value:i,valueSpec:f.source_geojson,style:v,styleSpec:f,validateSpec:w,objectElementValidators:th}),i.cluster)for(const z in i.clusterProperties){const[V,Z]=i.clusterProperties[z],J=typeof V=="string"?[V,["accumulated"],["get",z]]:V;P.push(...Bs({key:`${h}.${z}.map`,value:Z,expressionContext:"cluster-map"})),P.push(...Bs({key:`${h}.${z}.reduce`,value:J,expressionContext:"cluster-reduce"}))}return P;case"video":return ea({key:h,value:i,valueSpec:f.source_video,style:v,validateSpec:w,styleSpec:f});case"image":return ea({key:h,value:i,valueSpec:f.source_image,style:v,validateSpec:w,styleSpec:f});case"canvas":return[new Ue(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ns({key:`${h}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Mt(u){const i=u.value,h=u.styleSpec,f=h.light,v=u.style;let w=[];const M=vr(i);if(i===void 0)return w;if(M!=="object")return w=w.concat([new Ue("light",i,`object expected, ${M} found`)]),w;for(const P in i){const z=P.match(/^(.*)-transition$/);w=w.concat(z&&f[z[1]]&&f[z[1]].transition?u.validateSpec({key:P,value:i[P],valueSpec:h.transition,validateSpec:u.validateSpec,style:v,styleSpec:h}):f[P]?u.validateSpec({key:P,value:i[P],valueSpec:f[P],validateSpec:u.validateSpec,style:v,styleSpec:h}):[new Ue(P,i[P],`unknown property "${P}"`)])}return w}function gu(u){const i=u.value,h=u.styleSpec,f=h.sky,v=u.style,w=vr(i);if(i===void 0)return[];if(w!=="object")return[new Ue("sky",i,`object expected, ${w} found`)];let M=[];for(const P in i)M=M.concat(f[P]?u.validateSpec({key:P,value:i[P],valueSpec:f[P],style:v,styleSpec:h}):[new Ue(P,i[P],`unknown property "${P}"`)]);return M}function Fh(u){const i=u.value,h=u.styleSpec,f=h.terrain,v=u.style;let w=[];const M=vr(i);if(i===void 0)return w;if(M!=="object")return w=w.concat([new Ue("terrain",i,`object expected, ${M} found`)]),w;for(const P in i)w=w.concat(f[P]?u.validateSpec({key:P,value:i[P],valueSpec:f[P],validateSpec:u.validateSpec,style:v,styleSpec:h}):[new Ue(P,i[P],`unknown property "${P}"`)]);return w}function qa(u){let i=[];const h=u.value,f=u.key;if(Array.isArray(h)){const v=[],w=[];for(const M in h)h[M].id&&v.includes(h[M].id)&&i.push(new Ue(f,h,`all the sprites' ids must be unique, but ${h[M].id} is duplicated`)),v.push(h[M].id),h[M].url&&w.includes(h[M].url)&&i.push(new Ue(f,h,`all the sprites' URLs must be unique, but ${h[M].url} is duplicated`)),w.push(h[M].url),i=i.concat(ea({key:`${f}[${M}]`,value:h[M],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return i}return Pa({key:f,value:h})}const kr={"*":()=>[],array:zh,boolean:function(u){const i=u.value,h=u.key,f=vr(i);return f!=="boolean"?[new Ue(h,i,`boolean expected, ${f} found`)]:[]},number:Rc,color:function(u){const i=u.key,h=u.value,f=vr(h);return f!=="string"?[new Ue(i,h,`color expected, ${f} found`)]:$t.parse(String(h))?[]:[new Ue(i,h,`color expected, "${h}" found`)]},constants:Uf,enum:Ns,filter:Dc,function:mu,layer:Zf,object:ea,source:Wf,light:Mt,sky:gu,terrain:Fh,projection:function(u){const i=u.value,h=u.styleSpec,f=h.projection,v=u.style,w=vr(i);if(i===void 0)return[];if(w!=="object")return[new Ue("projection",i,`object expected, ${w} found`)];let M=[];for(const P in i)M=M.concat(f[P]?u.validateSpec({key:P,value:i[P],valueSpec:f[P],style:v,styleSpec:h}):[new Ue(P,i[P],`unknown property "${P}"`)]);return M},projectionDefinition:function(u){const i=u.key;let h=u.value;h=h instanceof String?h.valueOf():h;const f=vr(h);return f!=="array"||function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"}(h)||function(v){return!!["interpolate","step","literal"].includes(v[0])}(h)?["array","string"].includes(f)?[]:[new Ue(i,h,`projection expected, invalid type "${f}" found`)]:[new Ue(i,h,`projection expected, invalid array ${JSON.stringify(h)} found`)]},string:Pa,formatted:function(u){return Pa(u).length===0?[]:Bs(u)},resolvedImage:function(u){return Pa(u).length===0?[]:Bs(u)},padding:function(u){const i=u.key,h=u.value;if(vr(h)==="array"){if(h.length<1||h.length>4)return[new Ue(i,h,`padding requires 1 to 4 values; ${h.length} values found`)];const f={type:"number"};let v=[];for(let w=0;w<h.length;w++)v=v.concat(u.validateSpec({key:`${i}[${w}]`,value:h[w],validateSpec:u.validateSpec,valueSpec:f}));return v}return Rc({key:i,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(u){const i=u.key,h=u.value,f=vr(h),v=u.styleSpec;if(f!=="array"||h.length<1||h.length%2!=0)return[new Ue(i,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let M=0;M<h.length;M+=2)w=w.concat(Ns({key:`${i}[${M}]`,value:h[M],valueSpec:v.layout_symbol["text-anchor"]})),w=w.concat(zh({key:`${i}[${M+1}]`,value:h[M+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:v}));return w},sprite:qa};function Oc(u){const i=u.value,h=u.valueSpec,f=u.styleSpec;return u.validateSpec=Oc,h.expression&&Ea(qi(i))?mu(u):h.expression&&pa(ql(i))?Bs(u):h.type&&kr[h.type]?kr[h.type](u):ea(Gn({},u,{valueSpec:h.type?f[h.type]:h}))}function ka(u){const i=u.value,h=u.key,f=Pa(u);return f.length||(i.indexOf("{fontstack}")===-1&&f.push(new Ue(h,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&f.push(new Ue(h,i,'"glyphs" url must include a "{range}" token'))),f}function ma(u,i=vt){let h=[];return h=h.concat(Oc({key:"",value:u,valueSpec:i.$root,styleSpec:i,style:u,validateSpec:Oc,objectElementValidators:{glyphs:ka,"*":()=>[]}})),u.constants&&(h=h.concat(Uf({key:"constants",value:u.constants}))),Xp(h)}function Go(u){return function(i){return u({...i,validateSpec:Oc})}}function Xp(u){return[].concat(u).sort((i,h)=>i.line-h.line)}function hl(u){return function(...i){return Xp(u.apply(this,i))}}ma.source=hl(Go(Wf)),ma.sprite=hl(Go(qa)),ma.glyphs=hl(Go(ka)),ma.light=hl(Go(Mt)),ma.sky=hl(Go(gu)),ma.terrain=hl(Go(Fh)),ma.layer=hl(Go(Zf)),ma.filter=hl(Go(Dc)),ma.paintProperty=hl(Go(Yp)),ma.layoutProperty=hl(Go($f));const dl=ma,Qp=dl.light,qf=dl.sky,Kl=dl.paintProperty,Kf=dl.layoutProperty;function Jp(u,i){let h=!1;if(i&&i.length)for(const f of i)u.fire(new wt(new Error(f.message))),h=!0;return h}class Yl{constructor(i,h,f){const v=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const M=new Int32Array(this.arrayBuffer);i=M[0],this.d=(h=M[1])+2*(f=M[2]);for(let z=0;z<this.d*this.d;z++){const V=M[3+z],Z=M[3+z+1];v.push(V===Z?null:M.subarray(V,Z))}const P=M[3+v.length+1];this.keys=M.subarray(M[3+v.length],P),this.bboxes=M.subarray(P),this.insert=this._insertReadonly}else{this.d=h+2*f;for(let M=0;M<this.d*this.d;M++)v.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=i,this.padding=f,this.scale=h/i,this.uid=0;const w=f/h*i;this.min=-w,this.max=i+w}insert(i,h,f,v,w){this._forEachCell(h,f,v,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,h,f,v,w,M){this.cells[w].push(M)}query(i,h,f,v,w){const M=this.min,P=this.max;if(i<=M&&h<=M&&P<=f&&P<=v&&!w)return Array.prototype.slice.call(this.keys);{const z=[];return this._forEachCell(i,h,f,v,this._queryCell,z,{},w),z}}_queryCell(i,h,f,v,w,M,P,z){const V=this.cells[w];if(V!==null){const Z=this.keys,J=this.bboxes;for(let st=0;st<V.length;st++){const lt=V[st];if(P[lt]===void 0){const dt=4*lt;(z?z(J[dt+0],J[dt+1],J[dt+2],J[dt+3]):i<=J[dt+2]&&h<=J[dt+3]&&f>=J[dt+0]&&v>=J[dt+1])?(P[lt]=!0,M.push(Z[lt])):P[lt]=!1}}}}_forEachCell(i,h,f,v,w,M,P,z){const V=this._convertToCellCoord(i),Z=this._convertToCellCoord(h),J=this._convertToCellCoord(f),st=this._convertToCellCoord(v);for(let lt=V;lt<=J;lt++)for(let dt=Z;dt<=st;dt++){const At=this.d*dt+lt;if((!z||z(this._convertFromCellCoord(lt),this._convertFromCellCoord(dt),this._convertFromCellCoord(lt+1),this._convertFromCellCoord(dt+1)))&&w.call(this,i,h,f,v,At,M,P,z))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,h=3+this.cells.length+1+1;let f=0;for(let M=0;M<this.cells.length;M++)f+=this.cells[M].length;const v=new Int32Array(h+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let w=h;for(let M=0;M<i.length;M++){const P=i[M];v[3+M]=w,v.set(P,w),w+=P.length}return v[3+i.length]=w,v.set(this.keys,w),w+=this.keys.length,v[3+i.length+1]=w,v.set(this.bboxes,w),w+=this.bboxes.length,v.buffer}static serialize(i,h){const f=i.toArrayBuffer();return h&&h.push(f),{buffer:f}}static deserialize(i){return new Yl(i.buffer)}}const Xl={};function On(u,i,h={}){if(Xl[u])throw new Error(`${u} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:u,writeable:!1}),Xl[u]={klass:i,omit:h.omit||[],shallow:h.shallow||[]}}On("Object",Object),On("TransferableGridIndex",Yl),On("Color",$t),On("Error",Error),On("AJAXError",Te),On("ResolvedImage",Zr),On("StylePropertyFunction",Md),On("StyleExpression",Lc,{omit:["_evaluator"]}),On("ZoomDependentExpression",Ta),On("ZoomConstantExpression",cl),On("CompoundExpression",xr,{omit:["_evaluate"]});for(const u in br)br[u]._classRegistryKey||On(`Expression_${u}`,br[u]);function fl(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Yf(u){return u.$name||u.constructor._classRegistryKey}function Bh(u){return!function(i){if(i===null||typeof i!="object")return!1;const h=Yf(i);return!(!h||h==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||fl(u)||gt(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function Nh(u,i){if(Bh(u))return(fl(u)||gt(u))&&i&&i.push(u),ArrayBuffer.isView(u)&&i&&i.push(u.buffer),u instanceof ImageData&&i&&i.push(u.data.buffer),u;if(Array.isArray(u)){const w=[];for(const M of u)w.push(Nh(M,i));return w}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);const h=Yf(u);if(!h)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!Xl[h])throw new Error(`${h} is not registered.`);const{klass:f}=Xl[h],v=f.serialize?f.serialize(u,i):{};if(f.serialize){if(i&&v===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in u){if(!u.hasOwnProperty(w)||Xl[h].omit.indexOf(w)>=0)continue;const M=u[w];v[w]=Xl[h].shallow.indexOf(w)>=0?M:Nh(M,i)}u instanceof Error&&(v.message=u.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(v.$name=h),v}function yu(u){if(Bh(u))return u;if(Array.isArray(u))return u.map(yu);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);const i=Yf(u)||"Object";if(!Xl[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:h}=Xl[i];if(!h)throw new Error(`can't deserialize unregistered class ${i}`);if(h.deserialize)return h.deserialize(u);const f=Object.create(h.prototype);for(const v of Object.keys(u)){if(v==="$name")continue;const w=u[v];f[v]=Xl[i].shallow.indexOf(v)>=0?w:yu(w)}return f}class jh{constructor(){this.first=!0}update(i,h){const f=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=h),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=f,!0))}}const Ar={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Hangul Syllables":u=>u>=44032&&u<=55215,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function kd(u){for(const i of u)if(Ld(i.charCodeAt(0)))return!0;return!1}function tm(u){for(const i of u)if(!em(i.charCodeAt(0)))return!1;return!0}function La(u){const i=u.map(h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}}).filter(h=>h);return new RegExp(i.join("|"),"u")}const Xf=La(["Arab","Dupl","Mong","Ougr","Syrc"]);function em(u){return!Xf.test(String.fromCodePoint(u))}const nm=La(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ld(u){return!(u!==746&&u!==747&&(u<4352||!(Ar["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Ar["CJK Compatibility"](u)||Ar["CJK Strokes"](u)||!(!Ar["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Ar["Enclosed CJK Letters and Months"](u)||Ar["Ideographic Description Characters"](u)||Ar.Kanbun(u)||Ar.Katakana(u)&&u!==12540||!(!Ar["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Ar["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Ar["Vertical Forms"](u)||Ar["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||nm.test(String.fromCodePoint(u)))))}function rm(u){return!(Ld(u)||function(i){return!!(Ar["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Ar["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Ar["Letterlike Symbols"](i)||Ar["Number Forms"](i)||Ar["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Ar["Control Pictures"](i)&&i!==9251||Ar["Optical Character Recognition"](i)||Ar["Enclosed Alphanumerics"](i)||Ar["Geometric Shapes"](i)||Ar["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Ar["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Ar["CJK Symbols and Punctuation"](i)||Ar.Katakana(i)||Ar["Private Use Area"](i)||Ar["CJK Compatibility Forms"](i)||Ar["Small Form Variants"](i)||Ar["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(u))}const Qf=La(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Rd(u){return Qf.test(String.fromCodePoint(u))}function im(u,i){return!(!i&&Rd(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Ar.Khmer(u))}function Bg(u){for(const i of u)if(Rd(i.charCodeAt(0)))return!0;return!1}const pl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){if(pl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(u,i){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(u.pluginStatus!=="loading")return this.setState(u),u;const h=u.pluginURL,f=new Promise(w=>{this.loadScriptResolve=w});i(h);const v=new Promise(w=>setTimeout(()=>w(),this.TIMEOUT));if(yield Promise.race([f,v]),this.isParsed()){const w={pluginStatus:"loaded",pluginURL:h};return this.setState(w),w}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${h}`)})}};class li{constructor(i,h){this.zoom=i,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new jh,this.transition={})}isSupportedScript(i){return function(h,f){for(const v of h)if(!im(v.charCodeAt(0),f))return!1;return!0}(i,pl.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,h=i-Math.floor(i),f=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*h}}}class zc{constructor(i,h){this.property=i,this.value=h,this.expression=function(f,v){if(Ea(f))return new Md(f,v);if(pa(f)){const w=ul(f,v);if(w.result==="error")throw new Error(w.value.map(M=>`${M.key}: ${M.message}`).join(", "));return w.value}{let w=f;return v.type==="color"&&typeof f=="string"?w=$t.parse(f):v.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(f)?w=Kn.parse(f):v.type==="projectionDefinition"&&typeof f=="string"&&(w=or.parse(f)):w=An.parse(f),{kind:"constant",evaluate:()=>w}}}(h===void 0?i.specification.default:h,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,h,f){return this.property.possiblyEvaluate(this,i,h,f)}}class Dd{constructor(i){this.property=i,this.value=new zc(i,void 0)}transitioned(i,h){return new Vh(this.property,this.value,h,be({},i.transition,this.transition),i.now)}untransitioned(){return new Vh(this.property,this.value,null,{},0)}}class Od{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Je(this._values[i].value.value)}setValue(i,h){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Dd(this._values[i].property)),this._values[i].value=new zc(this._values[i].property,h===null?void 0:Je(h))}getTransition(i){return Je(this._values[i].transition)}setTransition(i,h){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Dd(this._values[i].property)),this._values[i].transition=Je(h)||void 0}serialize(){const i={};for(const h of Object.keys(this._values)){const f=this.getValue(h);f!==void 0&&(i[h]=f);const v=this.getTransition(h);v!==void 0&&(i[`${h}-transition`]=v)}return i}transitioned(i,h){const f=new ml(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(i,h._values[v]);return f}untransitioned(){const i=new ml(this._properties);for(const h of Object.keys(this._values))i._values[h]=this._values[h].untransitioned();return i}}class Vh{constructor(i,h,f,v,w){this.property=i,this.value=h,this.begin=w+v.delay||0,this.end=this.begin+v.duration||0,i.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(i,h,f){const v=i.now||0,w=this.value.possiblyEvaluate(i,h,f),M=this.prior;if(M){if(v>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(v<this.begin)return M.possiblyEvaluate(i,h,f);{const P=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(i,h,f),w,Gt(P))}}return w}}class ml{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,h,f){const v=new ga(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(i,h,f);return v}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Uh{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Je(this._values[i].value)}setValue(i,h){this._values[i]=new zc(this._values[i].property,h===null?void 0:Je(h))}serialize(){const i={};for(const h of Object.keys(this._values)){const f=this.getValue(h);f!==void 0&&(i[h]=f)}return i}possiblyEvaluate(i,h,f){const v=new ga(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(i,h,f);return v}}class na{constructor(i,h,f){this.property=i,this.value=h,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,h,f,v){return this.property.evaluate(this.value,this.parameters,i,h,f,v)}}class ga{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Yn{constructor(i){this.specification=i}possiblyEvaluate(i,h){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(h)}interpolate(i,h,f){const v=Br[this.specification.type];return v?v(i,h,f):i}}class lr{constructor(i,h){this.specification=i,this.overrides=h}possiblyEvaluate(i,h,f,v){return new na(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(h,null,{},f,v)}:i.expression,h)}interpolate(i,h,f){if(i.value.kind!=="constant"||h.value.kind!=="constant")return i;if(i.value.value===void 0||h.value.value===void 0)return new na(this,{kind:"constant",value:void 0},i.parameters);const v=Br[this.specification.type];if(v){const w=v(i.value.value,h.value.value,f);return new na(this,{kind:"constant",value:w},i.parameters)}return i}evaluate(i,h,f,v,w,M){return i.kind==="constant"?i.value:i.evaluate(h,f,v,w,M)}}class eh extends lr{possiblyEvaluate(i,h,f,v){if(i.value===void 0)return new na(this,{kind:"constant",value:void 0},h);if(i.expression.kind==="constant"){const w=i.expression.evaluate(h,null,{},f,v),M=i.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,P=this._calculate(M,M,M,h);return new na(this,{kind:"constant",value:P},h)}if(i.expression.kind==="camera"){const w=this._calculate(i.expression.evaluate({zoom:h.zoom-1}),i.expression.evaluate({zoom:h.zoom}),i.expression.evaluate({zoom:h.zoom+1}),h);return new na(this,{kind:"constant",value:w},h)}return new na(this,i.expression,h)}evaluate(i,h,f,v,w,M){if(i.kind==="source"){const P=i.evaluate(h,f,v,w,M);return this._calculate(P,P,P,h)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(h.zoom)-1},f,v),i.evaluate({zoom:Math.floor(h.zoom)},f,v),i.evaluate({zoom:Math.floor(h.zoom)+1},f,v),h):i.value}_calculate(i,h,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:i,to:h}:{from:f,to:h}}interpolate(i){return i}}class vu{constructor(i){this.specification=i}possiblyEvaluate(i,h,f,v){if(i.value!==void 0){if(i.expression.kind==="constant"){const w=i.expression.evaluate(h,null,{},f,v);return this._calculate(w,w,w,h)}return this._calculate(i.expression.evaluate(new li(Math.floor(h.zoom-1),h)),i.expression.evaluate(new li(Math.floor(h.zoom),h)),i.expression.evaluate(new li(Math.floor(h.zoom+1),h)),h)}}_calculate(i,h,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:i,to:h}:{from:f,to:h}}interpolate(i){return i}}class gl{constructor(i){this.specification=i}possiblyEvaluate(i,h,f,v){return!!i.expression.evaluate(h,null,{},f,v)}interpolate(){return!1}}class ya{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in i){const f=i[h];f.specification.overridable&&this.overridableProperties.push(h);const v=this.defaultPropertyValues[h]=new zc(f,void 0),w=this.defaultTransitionablePropertyValues[h]=new Dd(f);this.defaultTransitioningPropertyValues[h]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=v.possiblyEvaluate({})}}}On("DataDrivenProperty",lr),On("DataConstantProperty",Yn),On("CrossFadedDataDrivenProperty",eh),On("CrossFadedProperty",vu),On("ColorRampProperty",gl);const om="-transition";class Ka extends kt{constructor(i,h){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),h.layout&&(this._unevaluatedLayout=new Uh(h.layout)),h.paint)){this._transitionablePaint=new Od(h.paint);for(const f in i.paint)this.setPaintProperty(f,i.paint[f],{validate:!1});for(const f in i.layout)this.setLayoutProperty(f,i.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ga(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,h,f={}){h!=null&&this._validate(Kf,`layers.${this.id}.layout.${i}`,i,h,f)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,h):this.visibility=h)}getPaintProperty(i){return i.endsWith(om)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,h,f={}){if(h!=null&&this._validate(Kl,`layers.${this.id}.paint.${i}`,i,h,f))return!1;if(i.endsWith(om))return this._transitionablePaint.setTransition(i.slice(0,-11),h||void 0),!1;{const v=this._transitionablePaint._values[i],w=v.property.specification["property-type"]==="cross-faded-data-driven",M=v.value.isDataDriven(),P=v.value;this._transitionablePaint.setValue(i,h),this._handleSpecialPaintPropertyUpdate(i);const z=this._transitionablePaint._values[i].value;return z.isDataDriven()||M||w||this._handleOverridablePaintPropertyUpdate(i,P,z)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,h,f){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,h){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,h)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Be(i,(h,f)=>!(h===void 0||f==="layout"&&!Object.keys(h).length||f==="paint"&&!Object.keys(h).length))}_validate(i,h,f,v,w={}){return(!w||w.validate!==!1)&&Jp(this,i.call(dl,{key:h,layerType:this.type,objectKey:f,value:v,styleSpec:vt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const h=this.paint.get(i);if(h instanceof na&&Os(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const nh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class rh{constructor(i,h){this._structArray=i,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Nr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,h){return i._trim(),h&&(i.isTransferred=!0,h.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const h=Object.create(this.prototype);return h.arrayBuffer=i.arrayBuffer,h.length=i.length,h.capacity=i.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Vi(u,i=1){let h=0,f=0;return{members:u.map(v=>{const w=nh[v.type].BYTES_PER_ELEMENT,M=h=zd(h,Math.max(i,w)),P=v.components||1;return f=Math.max(f,w),h+=w*P,{name:v.name,type:v.type,components:P,offset:M}}),size:zd(h,Math.max(f,i)),alignment:i}}function zd(u,i){return Math.ceil(u/i)*i}class Ra extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h){const f=this.length;return this.resize(f+1),this.emplace(f,i,h)}emplace(i,h,f){const v=2*i;return this.int16[v+0]=h,this.int16[v+1]=f,i}}Ra.prototype.bytesPerElement=4,On("StructArrayLayout2i4",Ra);class ih extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,h,f)}emplace(i,h,f,v){const w=3*i;return this.int16[w+0]=h,this.int16[w+1]=f,this.int16[w+2]=v,i}}ih.prototype.bytesPerElement=6,On("StructArrayLayout3i6",ih);class gs extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,i,h,f,v)}emplace(i,h,f,v,w){const M=4*i;return this.int16[M+0]=h,this.int16[M+1]=f,this.int16[M+2]=v,this.int16[M+3]=w,i}}gs.prototype.bytesPerElement=8,On("StructArrayLayout4i8",gs);class yl extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M){const P=this.length;return this.resize(P+1),this.emplace(P,i,h,f,v,w,M)}emplace(i,h,f,v,w,M,P){const z=6*i;return this.int16[z+0]=h,this.int16[z+1]=f,this.int16[z+2]=v,this.int16[z+3]=w,this.int16[z+4]=M,this.int16[z+5]=P,i}}yl.prototype.bytesPerElement=12,On("StructArrayLayout2i4i12",yl);class oh extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M){const P=this.length;return this.resize(P+1),this.emplace(P,i,h,f,v,w,M)}emplace(i,h,f,v,w,M,P){const z=4*i,V=8*i;return this.int16[z+0]=h,this.int16[z+1]=f,this.uint8[V+4]=v,this.uint8[V+5]=w,this.uint8[V+6]=M,this.uint8[V+7]=P,i}}oh.prototype.bytesPerElement=8,On("StructArrayLayout2i4ub8",oh);class io extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,h){const f=this.length;return this.resize(f+1),this.emplace(f,i,h)}emplace(i,h,f){const v=2*i;return this.float32[v+0]=h,this.float32[v+1]=f,i}}io.prototype.bytesPerElement=8,On("StructArrayLayout2f8",io);class _u extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M,P,z,V,Z){const J=this.length;return this.resize(J+1),this.emplace(J,i,h,f,v,w,M,P,z,V,Z)}emplace(i,h,f,v,w,M,P,z,V,Z,J){const st=10*i;return this.uint16[st+0]=h,this.uint16[st+1]=f,this.uint16[st+2]=v,this.uint16[st+3]=w,this.uint16[st+4]=M,this.uint16[st+5]=P,this.uint16[st+6]=z,this.uint16[st+7]=V,this.uint16[st+8]=Z,this.uint16[st+9]=J,i}}_u.prototype.bytesPerElement=20,On("StructArrayLayout10ui20",_u);class Jf extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M,P,z,V,Z,J,st){const lt=this.length;return this.resize(lt+1),this.emplace(lt,i,h,f,v,w,M,P,z,V,Z,J,st)}emplace(i,h,f,v,w,M,P,z,V,Z,J,st,lt){const dt=12*i;return this.int16[dt+0]=h,this.int16[dt+1]=f,this.int16[dt+2]=v,this.int16[dt+3]=w,this.uint16[dt+4]=M,this.uint16[dt+5]=P,this.uint16[dt+6]=z,this.uint16[dt+7]=V,this.int16[dt+8]=Z,this.int16[dt+9]=J,this.int16[dt+10]=st,this.int16[dt+11]=lt,i}}Jf.prototype.bytesPerElement=24,On("StructArrayLayout4i4ui4i24",Jf);class ah extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,h,f)}emplace(i,h,f,v){const w=3*i;return this.float32[w+0]=h,this.float32[w+1]=f,this.float32[w+2]=v,i}}ah.prototype.bytesPerElement=12,On("StructArrayLayout3f12",ah);class bu extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const h=this.length;return this.resize(h+1),this.emplace(h,i)}emplace(i,h){return this.uint32[1*i+0]=h,i}}bu.prototype.bytesPerElement=4,On("StructArrayLayout1ul4",bu);class Hh extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M,P,z,V){const Z=this.length;return this.resize(Z+1),this.emplace(Z,i,h,f,v,w,M,P,z,V)}emplace(i,h,f,v,w,M,P,z,V,Z){const J=10*i,st=5*i;return this.int16[J+0]=h,this.int16[J+1]=f,this.int16[J+2]=v,this.int16[J+3]=w,this.int16[J+4]=M,this.int16[J+5]=P,this.uint32[st+3]=z,this.uint16[J+8]=V,this.uint16[J+9]=Z,i}}Hh.prototype.bytesPerElement=20,On("StructArrayLayout6i1ul2ui20",Hh);class Fd extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M){const P=this.length;return this.resize(P+1),this.emplace(P,i,h,f,v,w,M)}emplace(i,h,f,v,w,M,P){const z=6*i;return this.int16[z+0]=h,this.int16[z+1]=f,this.int16[z+2]=v,this.int16[z+3]=w,this.int16[z+4]=M,this.int16[z+5]=P,i}}Fd.prototype.bytesPerElement=12,On("StructArrayLayout2i2i2i12",Fd);class js extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w){const M=this.length;return this.resize(M+1),this.emplace(M,i,h,f,v,w)}emplace(i,h,f,v,w,M){const P=4*i,z=8*i;return this.float32[P+0]=h,this.float32[P+1]=f,this.float32[P+2]=v,this.int16[z+6]=w,this.int16[z+7]=M,i}}js.prototype.bytesPerElement=16,On("StructArrayLayout2f1f2i16",js);class Bd extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M){const P=this.length;return this.resize(P+1),this.emplace(P,i,h,f,v,w,M)}emplace(i,h,f,v,w,M,P){const z=16*i,V=4*i,Z=8*i;return this.uint8[z+0]=h,this.uint8[z+1]=f,this.float32[V+1]=v,this.float32[V+2]=w,this.int16[Z+6]=M,this.int16[Z+7]=P,i}}Bd.prototype.bytesPerElement=16,On("StructArrayLayout2ub2f2i16",Bd);class Nd extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,h,f)}emplace(i,h,f,v){const w=3*i;return this.uint16[w+0]=h,this.uint16[w+1]=f,this.uint16[w+2]=v,i}}Nd.prototype.bytesPerElement=6,On("StructArrayLayout3ui6",Nd);class jd extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M,P,z,V,Z,J,st,lt,dt,At,Et,Nt){const ce=this.length;return this.resize(ce+1),this.emplace(ce,i,h,f,v,w,M,P,z,V,Z,J,st,lt,dt,At,Et,Nt)}emplace(i,h,f,v,w,M,P,z,V,Z,J,st,lt,dt,At,Et,Nt,ce){const qt=24*i,at=12*i,It=48*i;return this.int16[qt+0]=h,this.int16[qt+1]=f,this.uint16[qt+2]=v,this.uint16[qt+3]=w,this.uint32[at+2]=M,this.uint32[at+3]=P,this.uint32[at+4]=z,this.uint16[qt+10]=V,this.uint16[qt+11]=Z,this.uint16[qt+12]=J,this.float32[at+7]=st,this.float32[at+8]=lt,this.uint8[It+36]=dt,this.uint8[It+37]=At,this.uint8[It+38]=Et,this.uint32[at+10]=Nt,this.int16[qt+22]=ce,i}}jd.prototype.bytesPerElement=48,On("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",jd);class xu extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M,P,z,V,Z,J,st,lt,dt,At,Et,Nt,ce,qt,at,It,Yt,Oe,sn,Ne,He,pn,ln){const vn=this.length;return this.resize(vn+1),this.emplace(vn,i,h,f,v,w,M,P,z,V,Z,J,st,lt,dt,At,Et,Nt,ce,qt,at,It,Yt,Oe,sn,Ne,He,pn,ln)}emplace(i,h,f,v,w,M,P,z,V,Z,J,st,lt,dt,At,Et,Nt,ce,qt,at,It,Yt,Oe,sn,Ne,He,pn,ln,vn){const Xe=32*i,jn=16*i;return this.int16[Xe+0]=h,this.int16[Xe+1]=f,this.int16[Xe+2]=v,this.int16[Xe+3]=w,this.int16[Xe+4]=M,this.int16[Xe+5]=P,this.int16[Xe+6]=z,this.int16[Xe+7]=V,this.uint16[Xe+8]=Z,this.uint16[Xe+9]=J,this.uint16[Xe+10]=st,this.uint16[Xe+11]=lt,this.uint16[Xe+12]=dt,this.uint16[Xe+13]=At,this.uint16[Xe+14]=Et,this.uint16[Xe+15]=Nt,this.uint16[Xe+16]=ce,this.uint16[Xe+17]=qt,this.uint16[Xe+18]=at,this.uint16[Xe+19]=It,this.uint16[Xe+20]=Yt,this.uint16[Xe+21]=Oe,this.uint16[Xe+22]=sn,this.uint32[jn+12]=Ne,this.float32[jn+13]=He,this.float32[jn+14]=pn,this.uint16[Xe+30]=ln,this.uint16[Xe+31]=vn,i}}xu.prototype.bytesPerElement=64,On("StructArrayLayout8i15ui1ul2f2ui64",xu);class b extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const h=this.length;return this.resize(h+1),this.emplace(h,i)}emplace(i,h){return this.float32[1*i+0]=h,i}}b.prototype.bytesPerElement=4,On("StructArrayLayout1f4",b);class r extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,h,f)}emplace(i,h,f,v){const w=3*i;return this.uint16[6*i+0]=h,this.float32[w+1]=f,this.float32[w+2]=v,i}}r.prototype.bytesPerElement=12,On("StructArrayLayout1ui2f12",r);class c extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,h,f)}emplace(i,h,f,v){const w=4*i;return this.uint32[2*i+0]=h,this.uint16[w+2]=f,this.uint16[w+3]=v,i}}c.prototype.bytesPerElement=8,On("StructArrayLayout1ul2ui8",c);class p extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,h){const f=this.length;return this.resize(f+1),this.emplace(f,i,h)}emplace(i,h,f){const v=2*i;return this.uint16[v+0]=h,this.uint16[v+1]=f,i}}p.prototype.bytesPerElement=4,On("StructArrayLayout2ui4",p);class y extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const h=this.length;return this.resize(h+1),this.emplace(h,i)}emplace(i,h){return this.uint16[1*i+0]=h,i}}y.prototype.bytesPerElement=2,On("StructArrayLayout1ui2",y);class A extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,h,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,i,h,f,v)}emplace(i,h,f,v,w){const M=4*i;return this.float32[M+0]=h,this.float32[M+1]=f,this.float32[M+2]=v,this.float32[M+3]=w,i}}A.prototype.bytesPerElement=16,On("StructArrayLayout4f16",A);class T extends rh{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}T.prototype.size=20;class L extends Hh{get(i){return new T(this,i)}}On("CollisionBoxArray",L);class B extends rh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}B.prototype.size=48;class G extends jd{get(i){return new B(this,i)}}On("PlacedSymbolArray",G);class Y extends rh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Y.prototype.size=64;class nt extends xu{get(i){return new Y(this,i)}}On("SymbolInstanceArray",nt);class rt extends b{getoffsetX(i){return this.float32[1*i+0]}}On("GlyphOffsetArray",rt);class ft extends ih{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}On("SymbolLineVertexArray",ft);class _t extends rh{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}_t.prototype.size=12;class Ot extends r{get(i){return new _t(this,i)}}On("TextAnchorOffsetArray",Ot);class Dt extends rh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Dt.prototype.size=8;class Ft extends c{get(i){return new Dt(this,i)}}On("FeatureIndexArray",Ft);class Zt extends Ra{}class Qt extends Ra{}class ne extends Ra{}class se extends yl{}class fe extends oh{}class le extends io{}class ke extends _u{}class De extends Jf{}class Ee extends ah{}class Qe extends bu{}class Ge extends Fd{}class In extends Bd{}class yn extends Nd{}class an extends p{}const Zn=Vi([{name:"a_pos",components:2,type:"Int16"}],4),{members:fr}=Zn;class pr{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,h,f,v){const w=this.segments[this.segments.length-1];return i>pr.MAX_VERTEX_ARRAY_LENGTH&&Tt(`Max vertices per segment is ${pr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${pr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!w||w.vertexLength+i>pr.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==v?this.createNewSegment(h,f,v):w}createNewSegment(i,h,f){const v={vertexOffset:i.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(v.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(i,h,f){return this.prepareSegment(0,i,h,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const i of this.segments)for(const h in i.vaos)i.vaos[h].destroy()}static simpleSegment(i,h,f,v){return new pr([{vertexOffset:i,primitiveOffset:h,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function vi(u,i){return 256*(u=Ce(Math.floor(u),0,255))+Ce(Math.floor(i),0,255)}pr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,On("SegmentVector",pr);const ti=Vi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ci,xi,Sr,jr={exports:{}},oo={exports:{}},ao={exports:{}},so=function(){if(Sr)return jr.exports;Sr=1;var u=(Ci||(Ci=1,oo.exports=function(h,f){var v,w,M,P,z,V,Z,J;for(w=h.length-(v=3&h.length),M=f,z=3432918353,V=461845907,J=0;J<w;)Z=255&h.charCodeAt(J)|(255&h.charCodeAt(++J))<<8|(255&h.charCodeAt(++J))<<16|(255&h.charCodeAt(++J))<<24,++J,M=27492+(65535&(P=5*(65535&(M=(M^=Z=(65535&(Z=(Z=(65535&Z)*z+(((Z>>>16)*z&65535)<<16)&4294967295)<<15|Z>>>17))*V+(((Z>>>16)*V&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(P>>>16)&65535)<<16);switch(Z=0,v){case 3:Z^=(255&h.charCodeAt(J+2))<<16;case 2:Z^=(255&h.charCodeAt(J+1))<<8;case 1:M^=Z=(65535&(Z=(Z=(65535&(Z^=255&h.charCodeAt(J)))*z+(((Z>>>16)*z&65535)<<16)&4294967295)<<15|Z>>>17))*V+(((Z>>>16)*V&65535)<<16)&4294967295}return M^=h.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0}),oo.exports),i=(xi||(xi=1,ao.exports=function(h,f){for(var v,w=h.length,M=f^w,P=0;w>=4;)v=1540483477*(65535&(v=255&h.charCodeAt(P)|(255&h.charCodeAt(++P))<<8|(255&h.charCodeAt(++P))<<16|(255&h.charCodeAt(++P))<<24))+((1540483477*(v>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),w-=4,++P;switch(w){case 3:M^=(255&h.charCodeAt(P+2))<<16;case 2:M^=(255&h.charCodeAt(P+1))<<8;case 1:M=1540483477*(65535&(M^=255&h.charCodeAt(P)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0}),ao.exports);return jr.exports=u,jr.exports.murmur3=u,jr.exports.murmur2=i,jr.exports}(),$o=g(so);class ys{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,h,f,v){this.ids.push(Ql(i)),this.positions.push(h,f,v)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=Ql(i);let f=0,v=this.ids.length-1;for(;f<v;){const M=f+v>>1;this.ids[M]>=h?v=M:f=M+1}const w=[];for(;this.ids[f]===h;)w.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return w}static serialize(i,h){const f=new Float64Array(i.ids),v=new Uint32Array(i.positions);return Vs(f,v,0,f.length-1),h&&h.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(i){const h=new ys;return h.ids=i.ids,h.positions=i.positions,h.indexed=!0,h}}function Ql(u){const i=+u;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:$o(String(u))}function Vs(u,i,h,f){for(;h<f;){const v=u[h+f>>1];let w=h-1,M=f+1;for(;;){do w++;while(u[w]<v);do M--;while(u[M]>v);if(w>=M)break;Us(u,w,M),Us(i,3*w,3*M),Us(i,3*w+1,3*M+1),Us(i,3*w+2,3*M+2)}M-h<f-M?(Vs(u,i,h,M),h=M+1):(Vs(u,i,M+1,f),f=M)}}function Us(u,i,h){const f=u[i];u[i]=u[h],u[h]=f}On("FeaturePositionMap",ys);class Zo{constructor(i,h){this.gl=i.gl,this.location=h}}class Au extends Zo{constructor(i,h){super(i,h),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Da extends Zo{constructor(i,h){super(i,h),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class Oa extends Zo{constructor(i,h){super(i,h),this.current=$t.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const Jl=new Float32Array(16);function Hs(u){return[vi(255*u.r,255*u.g),vi(255*u.b,255*u.a)]}class tc{constructor(i,h,f){this.value=i,this.uniformNames=h.map(v=>`u_${v}`),this.type=f}setUniform(i,h,f){i.set(f.constantOr(this.value))}getBinding(i,h,f){return this.type==="color"?new Oa(i,h):new Au(i,h)}}class Bi{constructor(i,h){this.uniformNames=h.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=i.tlbr}setUniform(i,h,f,v){const w=v==="u_pattern_to"?this.patternTo:v==="u_pattern_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&i.set(w)}getBinding(i,h,f){return f.substr(0,9)==="u_pattern"?new Da(i,h):new Au(i,h)}}class Ii{constructor(i,h,f,v){this.expression=i,this.type=f,this.maxValue=0,this.paintVertexAttributes=h.map(w=>({name:`a_${w}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(i,h,f,v,w){const M=this.paintVertexArray.length,P=this.expression.evaluate(new li(0),h,{},v,[],w);this.paintVertexArray.resize(i),this._setPaintValue(M,i,P)}updatePaintArray(i,h,f,v){const w=this.expression.evaluate({zoom:0},f,v);this._setPaintValue(i,h,w)}_setPaintValue(i,h,f){if(this.type==="color"){const v=Hs(f);for(let w=i;w<h;w++)this.paintVertexArray.emplace(w,v[0],v[1])}else{for(let v=i;v<h;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ui{constructor(i,h,f,v,w,M){this.expression=i,this.uniformNames=h.map(P=>`u_${P}_t`),this.type=f,this.useIntegerZoom=v,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=h.map(P=>({name:`a_${P}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new M}populatePaintArray(i,h,f,v,w){const M=this.expression.evaluate(new li(this.zoom),h,{},v,[],w),P=this.expression.evaluate(new li(this.zoom+1),h,{},v,[],w),z=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(z,i,M,P)}updatePaintArray(i,h,f,v){const w=this.expression.evaluate({zoom:this.zoom},f,v),M=this.expression.evaluate({zoom:this.zoom+1},f,v);this._setPaintValue(i,h,w,M)}_setPaintValue(i,h,f,v){if(this.type==="color"){const w=Hs(f),M=Hs(v);for(let P=i;P<h;P++)this.paintVertexArray.emplace(P,w[0],w[1],M[0],M[1])}else{for(let w=i;w<h;w++)this.paintVertexArray.emplace(w,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,h){const f=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,v=Ce(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);i.set(v)}getBinding(i,h,f){return new Au(i,h)}}class Mi{constructor(i,h,f,v,w,M){this.expression=i,this.type=h,this.useIntegerZoom=f,this.zoom=v,this.layerId=M,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(i,h,f){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(v,i,h.patterns&&h.patterns[this.layerId],f)}updatePaintArray(i,h,f,v,w){this._setPaintValues(i,h,f.patterns&&f.patterns[this.layerId],w)}_setPaintValues(i,h,f,v){if(!v||!f)return;const{min:w,mid:M,max:P}=f,z=v[w],V=v[M],Z=v[P];if(z&&V&&Z)for(let J=i;J<h;J++)this.zoomInPaintVertexArray.emplace(J,V.tl[0],V.tl[1],V.br[0],V.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],V.pixelRatio,z.pixelRatio),this.zoomOutPaintVertexArray.emplace(J,V.tl[0],V.tl[1],V.br[0],V.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],V.pixelRatio,Z.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,ti.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,ti.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class am{constructor(i,h,f){this.binders={},this._buffers=[];const v=[];for(const w in i.paint._values){if(!f(w))continue;const M=i.paint.get(w);if(!(M instanceof na&&Os(M.property.specification)))continue;const P=sm(w,i.type),z=M.value,V=M.property.specification.type,Z=M.property.useIntegerZoom,J=M.property.specification["property-type"],st=J==="cross-faded"||J==="cross-faded-data-driven";if(z.kind==="constant")this.binders[w]=st?new Bi(z.value,P):new tc(z.value,P,V),v.push(`/u_${w}`);else if(z.kind==="source"||st){const lt=va(w,V,"source");this.binders[w]=st?new Mi(z,V,Z,h,lt,i.id):new Ii(z,P,V,lt),v.push(`/a_${w}`)}else{const lt=va(w,V,"composite");this.binders[w]=new Ui(z,P,V,Z,h,lt),v.push(`/z_${w}`)}}this.cacheKey=v.sort().join("")}getMaxValue(i){const h=this.binders[i];return h instanceof Ii||h instanceof Ui?h.maxValue:0}populatePaintArrays(i,h,f,v,w){for(const M in this.binders){const P=this.binders[M];(P instanceof Ii||P instanceof Ui||P instanceof Mi)&&P.populatePaintArray(i,h,f,v,w)}}setConstantPatternPositions(i,h){for(const f in this.binders){const v=this.binders[f];v instanceof Bi&&v.setConstantPatternPositions(i,h)}}updatePaintArrays(i,h,f,v,w){let M=!1;for(const P in i){const z=h.getPositions(P);for(const V of z){const Z=f.feature(V.index);for(const J in this.binders){const st=this.binders[J];if((st instanceof Ii||st instanceof Ui||st instanceof Mi)&&st.expression.isStateDependent===!0){const lt=v.paint.get(J);st.expression=lt.value,st.updatePaintArray(V.start,V.end,Z,i[P],w),M=!0}}}}return M}defines(){const i=[];for(const h in this.binders){const f=this.binders[h];(f instanceof tc||f instanceof Bi)&&i.push(...f.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return i}getBinderAttributes(){const i=[];for(const h in this.binders){const f=this.binders[h];if(f instanceof Ii||f instanceof Ui)for(let v=0;v<f.paintVertexAttributes.length;v++)i.push(f.paintVertexAttributes[v].name);else if(f instanceof Mi)for(let v=0;v<ti.members.length;v++)i.push(ti.members[v].name)}return i}getBinderUniforms(){const i=[];for(const h in this.binders){const f=this.binders[h];if(f instanceof tc||f instanceof Bi||f instanceof Ui)for(const v of f.uniformNames)i.push(v)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,h){const f=[];for(const v in this.binders){const w=this.binders[v];if(w instanceof tc||w instanceof Bi||w instanceof Ui){for(const M of w.uniformNames)if(h[M]){const P=w.getBinding(i,h[M],M);f.push({name:M,property:v,binding:P})}}}return f}setUniforms(i,h,f,v){for(const{name:w,property:M,binding:P}of h)this.binders[M].setUniform(P,v,f.get(M),w)}updatePaintBuffers(i){this._buffers=[];for(const h in this.binders){const f=this.binders[h];if(i&&f instanceof Mi){const v=i.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof Ii||f instanceof Ui)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(i){for(const h in this.binders){const f=this.binders[h];(f instanceof Ii||f instanceof Ui||f instanceof Mi)&&f.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const h=this.binders[i];(h instanceof Ii||h instanceof Ui||h instanceof Mi)&&h.destroy()}}}class Fc{constructor(i,h,f=()=>!0){this.programConfigurations={};for(const v of i)this.programConfigurations[v.id]=new am(v,h,f);this.needsUpload=!1,this._featureMap=new ys,this._bufferOffset=0}populatePaintArrays(i,h,f,v,w,M){for(const P in this.programConfigurations)this.programConfigurations[P].populatePaintArrays(i,h,v,w,M);h.id!==void 0&&this._featureMap.add(h.id,f,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,h,f,v){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(i,this._featureMap,h,w,v)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function sm(u,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${i}-`,"").replace(/-/g,"_")]}function va(u,i,h){const f={color:{source:io,composite:A},number:{source:b,composite:io}},v=function(w){return{"line-pattern":{source:ke,composite:ke},"fill-pattern":{source:ke,composite:ke},"fill-extrusion-pattern":{source:ke,composite:ke}}[w]}(u);return v&&v[h]||f[i][h]}On("ConstantBinder",tc),On("CrossFadedConstantBinder",Bi),On("SourceExpressionBinder",Ii),On("CrossFadedCompositeBinder",Mi),On("CompositeExpressionBinder",Ui),On("ProgramConfiguration",am,{omit:["_buffers"]}),On("ProgramConfigurationSet",Fc);const vs=Math.pow(2,14)-1,lm=-vs-1;function Ya(u){const i=ae/u.extent,h=u.loadGeometry();for(let f=0;f<h.length;f++){const v=h[f];for(let w=0;w<v.length;w++){const M=v[w],P=Math.round(M.x*i),z=Math.round(M.y*i);M.x=Ce(P,lm,vs),M.y=Ce(z,lm,vs),(P<M.x||P>M.x+1||z<M.y||z>M.y+1)&&Tt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function Gs(u,i){return{type:u.type,id:u.id,properties:u.properties,geometry:i?Ya(u):[]}}const Bc=-32768;function tp(u,i,h,f,v){u.emplaceBack(Bc+8*i+f,Bc+8*h+v)}class sh{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(h=>h.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Qt,this.indexArray=new yn,this.segments=new pr,this.programConfigurations=new Fc(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(i,h,f){const v=this.layers[0],w=[];let M=null,P=!1,z=v.type==="heatmap";if(v.type==="circle"){const Z=v;M=Z.layout.get("circle-sort-key"),P=!M.isConstant(),z=z||Z.paint.get("circle-pitch-alignment")==="map"}const V=z?h.subdivisionGranularity.circle:1;for(const{feature:Z,id:J,index:st,sourceLayerIndex:lt}of i){const dt=this.layers[0]._featureFilter.needGeometry,At=Gs(Z,dt);if(!this.layers[0]._featureFilter.filter(new li(this.zoom),At,f))continue;const Et=P?M.evaluate(At,{},f):void 0,Nt={id:J,properties:Z.properties,type:Z.type,sourceLayerIndex:lt,index:st,geometry:dt?At.geometry:Ya(Z),patterns:{},sortKey:Et};w.push(Nt)}P&&w.sort((Z,J)=>Z.sortKey-J.sortKey);for(const Z of w){const{geometry:J,index:st,sourceLayerIndex:lt}=Z,dt=i[st].feature;this.addFeature(Z,J,st,f,V),h.featureIndex.insert(dt,J,st,lt,this.index)}}update(i,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,h,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,fr),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,h,f,v,w=1){let M;switch(w){case 1:M=[0,7];break;case 3:M=[0,2,5,7];break;case 5:M=[0,1,3,4,6,7];break;case 7:M=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${w}; valid values are 1, 3, 5, 7.`)}const P=M.length;for(const z of h)for(const V of z){const Z=V.x,J=V.y;if(Z<0||Z>=ae||J<0||J>=ae)continue;const st=this.segments.prepareSegment(P*P,this.layoutVertexArray,this.indexArray,i.sortKey),lt=st.vertexLength;for(let dt=0;dt<P;dt++)for(let At=0;At<P;At++)tp(this.layoutVertexArray,Z,J,M[At],M[dt]);for(let dt=0;dt<P-1;dt++)for(let At=0;At<P-1;At++){const Et=lt+dt*P+At,Nt=lt+(dt+1)*P+At;this.indexArray.emplaceBack(Et,Nt+1,Et+1),this.indexArray.emplaceBack(Et,Nt,Nt+1)}st.vertexLength+=P*P,st.primitiveLength+=(P-1)*(P-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{},v)}}function ep(u,i){for(let h=0;h<u.length;h++)if(Nc(i,u[h]))return!0;for(let h=0;h<i.length;h++)if(Nc(u,i[h]))return!0;return!!Ng(u,i)}function Vd(u,i,h){return!!Nc(u,i)||!!cm(i,u,h)}function Gh(u,i){if(u.length===1)return jg(i,u[0]);for(let h=0;h<i.length;h++){const f=i[h];for(let v=0;v<f.length;v++)if(Nc(u,f[v]))return!0}for(let h=0;h<u.length;h++)if(jg(i,u[h]))return!0;for(let h=0;h<i.length;h++)if(Ng(u,i[h]))return!0;return!1}function np(u,i,h){if(u.length>1){if(Ng(u,i))return!0;for(let f=0;f<i.length;f++)if(cm(i[f],u,h))return!0}for(let f=0;f<u.length;f++)if(cm(u[f],i,h))return!0;return!1}function Ng(u,i){if(u.length===0||i.length===0)return!1;for(let h=0;h<u.length-1;h++){const f=u[h],v=u[h+1];for(let w=0;w<i.length-1;w++)if(cv(f,v,i[w],i[w+1]))return!0}return!1}function cv(u,i,h,f){return H(u,h,f)!==H(i,h,f)&&H(u,i,h)!==H(u,i,f)}function cm(u,i,h){const f=h*h;if(i.length===1)return u.distSqr(i[0])<f;for(let v=1;v<i.length;v++)if(rp(u,i[v-1],i[v])<f)return!0;return!1}function rp(u,i,h){const f=i.distSqr(h);if(f===0)return u.distSqr(i);const v=((u.x-i.x)*(h.x-i.x)+(u.y-i.y)*(h.y-i.y))/f;return u.distSqr(v<0?i:v>1?h:h.sub(i)._mult(v)._add(i))}function jg(u,i){for(let h=0;h<u.length;h++)if(Nc(u[h],i))return!0;return!1}function Nc(u,i){let h=!1;for(let f=0,v=u.length-1;f<u.length;v=f++){const w=u[f],M=u[v];w.y>i.y!=M.y>i.y&&i.x<(M.x-w.x)*(i.y-w.y)/(M.y-w.y)+w.x&&(h=!h)}return h}function Vg(u,i,h){const f=h[0],v=h[2];if(u.x<f.x&&i.x<f.x||u.x>v.x&&i.x>v.x||u.y<f.y&&i.y<f.y||u.y>v.y&&i.y>v.y)return!1;const w=H(u,i,h[0]);return w!==H(u,i,h[1])||w!==H(u,i,h[2])||w!==H(u,i,h[3])}function lh(u,i,h){const f=i.paint.get(u).value;return f.kind==="constant"?f.value:h.programConfigurations.get(i.id).getMaxValue(u)}function um(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function ip(u,i,h,f,v){if(!i[0]&&!i[1])return u;const w=k.convert(i)._mult(v);h==="viewport"&&w._rotate(-f);const M=[];for(let P=0;P<u.length;P++)M.push(u[P].sub(w));return M}let op,Ug;On("CircleBucket",sh,{omit:["layers"]});var Hg={get paint(){return Ug=Ug||new ya({"circle-radius":new lr(vt.paint_circle["circle-radius"]),"circle-color":new lr(vt.paint_circle["circle-color"]),"circle-blur":new lr(vt.paint_circle["circle-blur"]),"circle-opacity":new lr(vt.paint_circle["circle-opacity"]),"circle-translate":new Yn(vt.paint_circle["circle-translate"]),"circle-translate-anchor":new Yn(vt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Yn(vt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Yn(vt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new lr(vt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new lr(vt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new lr(vt.paint_circle["circle-stroke-opacity"])})},get layout(){return op=op||new ya({"circle-sort-key":new lr(vt.layout_circle["circle-sort-key"])})}};class Bb extends Ka{constructor(i){super(i,Hg)}createBucket(i){return new sh(i)}queryRadius(i){const h=i;return lh("circle-radius",this,h)+lh("circle-stroke-width",this,h)+um(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:h,featureState:f,geometry:v,transform:w,pixelsToTileUnits:M,unwrappedTileID:P,getElevation:z}){const V=ip(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-w.bearingInRadians,M),Z=this.paint.get("circle-radius").evaluate(h,f)+this.paint.get("circle-stroke-width").evaluate(h,f),J=this.paint.get("circle-pitch-alignment")==="map",st=J?V:function(dt,At,Et,Nt){return dt.map(ce=>Gg(ce,At,Et,Nt))}(V,w,P,z),lt=J?Z*M:Z;for(const dt of v)for(const At of dt){const Et=J?At:Gg(At,w,P,z);let Nt=lt;const ce=w.projectTileCoordinates(At.x,At.y,P,z).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Nt*=ce/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Nt*=w.cameraToCenterDistance/ce),Vd(st,Et,Nt))return!0}return!1}}function Gg(u,i,h,f){const v=i.projectTileCoordinates(u.x,u.y,h,f).point;return new k((.5*v.x+.5)*i.width,(.5*-v.y+.5)*i.height)}class jc extends sh{}let $g;On("HeatmapBucket",jc,{omit:["layers"]});var uv={get paint(){return $g=$g||new ya({"heatmap-radius":new lr(vt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new lr(vt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Yn(vt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new gl(vt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Yn(vt.paint_heatmap["heatmap-opacity"])})}};function Zg(u,{width:i,height:h},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==i*h*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${i*h*f}`)}else v=new Uint8Array(i*h*f);return u.width=i,u.height=h,u.data=v,u}function Wg(u,{width:i,height:h},f){if(i===u.width&&h===u.height)return;const v=Zg({},{width:i,height:h},f);qg(u,v,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,i),height:Math.min(u.height,h)},f),u.width=i,u.height=h,u.data=v.data}function qg(u,i,h,f,v,w){if(v.width===0||v.height===0)return i;if(v.width>u.width||v.height>u.height||h.x>u.width-v.width||h.y>u.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>i.width||v.height>i.height||f.x>i.width-v.width||f.y>i.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const M=u.data,P=i.data;if(M===P)throw new Error("srcData equals dstData, so image is already copied");for(let z=0;z<v.height;z++){const V=((h.y+z)*u.width+h.x)*w,Z=((f.y+z)*i.width+f.x)*w;for(let J=0;J<v.width*w;J++)P[Z+J]=M[V+J]}return i}class ap{constructor(i,h){Zg(this,i,1,h)}resize(i){Wg(this,i,1)}clone(){return new ap({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,h,f,v,w){qg(i,h,f,v,w,1)}}class vo{constructor(i,h){Zg(this,i,4,h)}resize(i){Wg(this,i,4)}replace(i,h){h?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new vo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,h,f,v,w){qg(i,h,f,v,w,4)}}function hm(u){const i={},h=u.resolution||256,f=u.clips?u.clips.length:1,v=u.image||new vo({width:h,height:f});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const w=(M,P,z)=>{i[u.evaluationKey]=z;const V=u.expression.evaluate(i);v.data[M+P+0]=Math.floor(255*V.r/V.a),v.data[M+P+1]=Math.floor(255*V.g/V.a),v.data[M+P+2]=Math.floor(255*V.b/V.a),v.data[M+P+3]=Math.floor(255*V.a)};if(u.clips)for(let M=0,P=0;M<f;++M,P+=4*h)for(let z=0,V=0;z<h;z++,V+=4){const Z=z/(h-1),{start:J,end:st}=u.clips[M];w(P,V,J*(1-Z)+st*Z)}else for(let M=0,P=0;M<h;M++,P+=4)w(0,P,M/(h-1));return v}On("AlphaImage",ap),On("RGBAImage",vo);const sp="big-fb";class Kg extends Ka{createBucket(i){return new jc(i)}constructor(i){super(i,uv),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hm({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(sp)&&this.heatmapFbos.delete(sp)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let lp;var Ud={get paint(){return lp=lp||new ya({"hillshade-illumination-direction":new Yn(vt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Yn(vt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Yn(vt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Yn(vt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Yn(vt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Yn(vt.paint_hillshade["hillshade-accent-color"])})}};class yr extends Ka{constructor(i){super(i,Ud)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const dm=Vi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Yg}=dm;function wu(u,i,h){const f=h.patternDependencies;let v=!1;for(const w of i){const M=w.paint.get(`${u}-pattern`);M.isConstant()||(v=!0);const P=M.constantOr(null);P&&(v=!0,f[P.to]=!0,f[P.from]=!0)}return v}function Xg(u,i,h,f,v){const w=v.patternDependencies;for(const M of i){const P=M.paint.get(`${u}-pattern`).value;if(P.kind!=="constant"){let z=P.evaluate({zoom:f-1},h,{},v.availableImages),V=P.evaluate({zoom:f},h,{},v.availableImages),Z=P.evaluate({zoom:f+1},h,{},v.availableImages);z=z&&z.name?z.name:z,V=V&&V.name?V.name:V,Z=Z&&Z.name?Z.name:Z,w[z]=!0,w[V]=!0,w[Z]=!0,h.patterns[M.id]={min:z,mid:V,max:Z}}}return h}function fm(u,i,h,f,v){let w;if(v===function(M,P,z,V){let Z=0;for(let J=P,st=z-V;J<z;J+=V)Z+=(M[st]-M[J])*(M[J+1]+M[st+1]),st=J;return Z}(u,i,h,f)>0)for(let M=i;M<h;M+=f)w=mv(M/f|0,u[M],u[M+1],w);else for(let M=h-f;M>=i;M-=f)w=mv(M/f|0,u[M],u[M+1],w);return w&&Hd(w,w.next)&&(up(w),w=w.next),w}function ch(u,i){if(!u)return u;i||(i=u);let h,f=u;do if(h=!1,f.steiner||!Hd(f,f.next)&&Hi(f.prev,f,f.next)!==0)f=f.next;else{if(up(f),f=i=f.prev,f===f.next)break;h=!0}while(h||f!==i);return i}function To(u,i,h,f,v,w,M){if(!u)return;!M&&w&&function(z,V,Z,J){let st=z;do st.z===0&&(st.z=Qg(st.x,st.y,V,Z,J)),st.prevZ=st.prev,st.nextZ=st.next,st=st.next;while(st!==z);st.prevZ.nextZ=null,st.prevZ=null,function(lt){let dt,At=1;do{let Et,Nt=lt;lt=null;let ce=null;for(dt=0;Nt;){dt++;let qt=Nt,at=0;for(let Yt=0;Yt<At&&(at++,qt=qt.nextZ,qt);Yt++);let It=At;for(;at>0||It>0&&qt;)at!==0&&(It===0||!qt||Nt.z<=qt.z)?(Et=Nt,Nt=Nt.nextZ,at--):(Et=qt,qt=qt.nextZ,It--),ce?ce.nextZ=Et:lt=Et,Et.prevZ=ce,ce=Et;Nt=qt}ce.nextZ=null,At*=2}while(dt>1)}(st)}(u,f,v,w);let P=u;for(;u.prev!==u.next;){const z=u.prev,V=u.next;if(w?jb(u,f,v,w):Nb(u))i.push(z.i,u.i,V.i),up(u),u=V.next,P=V.next;else if((u=V)===P){M?M===1?To(u=hv(ch(u),i),i,h,f,v,w,2):M===2&&Vb(u,i,h,f,v,w):To(ch(u),i,h,f,v,w,1);break}}}function Nb(u){const i=u.prev,h=u,f=u.next;if(Hi(i,h,f)>=0)return!1;const v=i.x,w=h.x,M=f.x,P=i.y,z=h.y,V=f.y,Z=Math.min(v,w,M),J=Math.min(P,z,V),st=Math.max(v,w,M),lt=Math.max(P,z,V);let dt=f.next;for(;dt!==i;){if(dt.x>=Z&&dt.x<=st&&dt.y>=J&&dt.y<=lt&&$h(v,P,w,z,M,V,dt.x,dt.y)&&Hi(dt.prev,dt,dt.next)>=0)return!1;dt=dt.next}return!0}function jb(u,i,h,f){const v=u.prev,w=u,M=u.next;if(Hi(v,w,M)>=0)return!1;const P=v.x,z=w.x,V=M.x,Z=v.y,J=w.y,st=M.y,lt=Math.min(P,z,V),dt=Math.min(Z,J,st),At=Math.max(P,z,V),Et=Math.max(Z,J,st),Nt=Qg(lt,dt,i,h,f),ce=Qg(At,Et,i,h,f);let qt=u.prevZ,at=u.nextZ;for(;qt&&qt.z>=Nt&&at&&at.z<=ce;){if(qt.x>=lt&&qt.x<=At&&qt.y>=dt&&qt.y<=Et&&qt!==v&&qt!==M&&$h(P,Z,z,J,V,st,qt.x,qt.y)&&Hi(qt.prev,qt,qt.next)>=0||(qt=qt.prevZ,at.x>=lt&&at.x<=At&&at.y>=dt&&at.y<=Et&&at!==v&&at!==M&&$h(P,Z,z,J,V,st,at.x,at.y)&&Hi(at.prev,at,at.next)>=0))return!1;at=at.nextZ}for(;qt&&qt.z>=Nt;){if(qt.x>=lt&&qt.x<=At&&qt.y>=dt&&qt.y<=Et&&qt!==v&&qt!==M&&$h(P,Z,z,J,V,st,qt.x,qt.y)&&Hi(qt.prev,qt,qt.next)>=0)return!1;qt=qt.prevZ}for(;at&&at.z<=ce;){if(at.x>=lt&&at.x<=At&&at.y>=dt&&at.y<=Et&&at!==v&&at!==M&&$h(P,Z,z,J,V,st,at.x,at.y)&&Hi(at.prev,at,at.next)>=0)return!1;at=at.nextZ}return!0}function hv(u,i){let h=u;do{const f=h.prev,v=h.next.next;!Hd(f,v)&&fv(f,h,h.next,v)&&Gd(f,v)&&Gd(v,f)&&(i.push(f.i,h.i,v.i),up(h),up(h.next),h=u=v),h=h.next}while(h!==u);return ch(h)}function Vb(u,i,h,f,v,w){let M=u;do{let P=M.next.next;for(;P!==M.prev;){if(M.i!==P.i&&Gb(M,P)){let z=pv(M,P);return M=ch(M,M.next),z=ch(z,z.next),To(M,i,h,f,v,w,0),void To(z,i,h,f,v,w,0)}P=P.next}M=M.next}while(M!==u)}function dv(u,i){let h=u.x-i.x;return h===0&&(h=u.y-i.y,h===0)&&(h=(u.next.y-u.y)/(u.next.x-u.x)-(i.next.y-i.y)/(i.next.x-i.x)),h}function Ub(u,i){const h=function(v,w){let M=w;const P=v.x,z=v.y;let V,Z=-1/0;if(Hd(v,M))return M;do{if(Hd(v,M.next))return M.next;if(z<=M.y&&z>=M.next.y&&M.next.y!==M.y){const At=M.x+(z-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(At<=P&&At>Z&&(Z=At,V=M.x<M.next.x?M:M.next,At===P))return V}M=M.next}while(M!==w);if(!V)return null;const J=V,st=V.x,lt=V.y;let dt=1/0;M=V;do{if(P>=M.x&&M.x>=st&&P!==M.x&&za(z<lt?P:Z,z,st,lt,z<lt?Z:P,z,M.x,M.y)){const At=Math.abs(z-M.y)/(P-M.x);Gd(M,v)&&(At<dt||At===dt&&(M.x>V.x||M.x===V.x&&Hb(V,M)))&&(V=M,dt=At)}M=M.next}while(M!==J);return V}(u,i);if(!h)return i;const f=pv(h,u);return ch(f,f.next),ch(h,h.next)}function Hb(u,i){return Hi(u.prev,u,i.prev)<0&&Hi(i.next,u,u.next)<0}function Qg(u,i,h,f,v){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-h)*v|0)|u<<8))|u<<4))|u<<2))|u<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-f)*v|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Cu(u){let i=u,h=u;do(i.x<h.x||i.x===h.x&&i.y<h.y)&&(h=i),i=i.next;while(i!==u);return h}function za(u,i,h,f,v,w,M,P){return(v-M)*(i-P)>=(u-M)*(w-P)&&(u-M)*(f-P)>=(h-M)*(i-P)&&(h-M)*(w-P)>=(v-M)*(f-P)}function $h(u,i,h,f,v,w,M,P){return!(u===M&&i===P)&&za(u,i,h,f,v,w,M,P)}function Gb(u,i){return u.next.i!==i.i&&u.prev.i!==i.i&&!function(h,f){let v=h;do{if(v.i!==h.i&&v.next.i!==h.i&&v.i!==f.i&&v.next.i!==f.i&&fv(v,v.next,h,f))return!0;v=v.next}while(v!==h);return!1}(u,i)&&(Gd(u,i)&&Gd(i,u)&&function(h,f){let v=h,w=!1;const M=(h.x+f.x)/2,P=(h.y+f.y)/2;do v.y>P!=v.next.y>P&&v.next.y!==v.y&&M<(v.next.x-v.x)*(P-v.y)/(v.next.y-v.y)+v.x&&(w=!w),v=v.next;while(v!==h);return w}(u,i)&&(Hi(u.prev,u,i.prev)||Hi(u,i.prev,i))||Hd(u,i)&&Hi(u.prev,u,u.next)>0&&Hi(i.prev,i,i.next)>0)}function Hi(u,i,h){return(i.y-u.y)*(h.x-i.x)-(i.x-u.x)*(h.y-i.y)}function Hd(u,i){return u.x===i.x&&u.y===i.y}function fv(u,i,h,f){const v=cp(Hi(u,i,h)),w=cp(Hi(u,i,f)),M=cp(Hi(h,f,u)),P=cp(Hi(h,f,i));return v!==w&&M!==P||!(v!==0||!uh(u,h,i))||!(w!==0||!uh(u,f,i))||!(M!==0||!uh(h,u,f))||!(P!==0||!uh(h,i,f))}function uh(u,i,h){return i.x<=Math.max(u.x,h.x)&&i.x>=Math.min(u.x,h.x)&&i.y<=Math.max(u.y,h.y)&&i.y>=Math.min(u.y,h.y)}function cp(u){return u>0?1:u<0?-1:0}function Gd(u,i){return Hi(u.prev,u,u.next)<0?Hi(u,i,u.next)>=0&&Hi(u,u.prev,i)>=0:Hi(u,i,u.prev)<0||Hi(u,u.next,i)<0}function pv(u,i){const h=Jg(u.i,u.x,u.y),f=Jg(i.i,i.x,i.y),v=u.next,w=i.prev;return u.next=i,i.prev=u,h.next=v,v.prev=h,f.next=h,h.prev=f,w.next=f,f.prev=w,f}function mv(u,i,h,f){const v=Jg(u,i,h);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function up(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Jg(u,i,h){return{i:u,x:i,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Zh{constructor(i,h){if(h>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=h}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class hp{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}hp.noSubdivision=new hp({fill:new Zh(0,0),line:new Zh(0,0),tile:new Zh(0,0),stencil:new Zh(0,0),circle:1}),On("SubdivisionGranularityExpression",Zh),On("SubdivisionGranularitySetting",hp);const $d=-32768,Wh=32767;class gv{constructor(i,h){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=ae/i,this._canonical=h}_getKey(i,h){return(i+=32768)<<16|(h+=32768)<<0}_vertexToIndex(i,h){if(i<-32768||h<-32768||i>32767||h>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(i),v=0|Math.round(h),w=this._getKey(f,v);if(this._vertexDictionary.has(w))return this._vertexDictionary.get(w);const M=this._vertexBuffer.length/2;return this._vertexDictionary.set(w,M),this._vertexBuffer.push(f,v),M}_subdivideTrianglesScanline(i){if(this._granularity<2)return function(v,w){const M=[];for(let P=0;P<w.length;P+=3){const z=w[P],V=w[P+1],Z=w[P+2],J=v[2*z],st=v[2*z+1];(v[2*V]-J)*(v[2*Z+1]-st)-(v[2*V+1]-st)*(v[2*Z]-J)>0?(M.push(z),M.push(Z),M.push(V)):(M.push(z),M.push(V),M.push(Z))}return M}(this._vertexBuffer,i);const h=[],f=i.length;for(let v=0;v<f;v+=3){const w=[i[v+0],i[v+1],i[v+2]],M=[this._vertexBuffer[2*i[v+0]+0],this._vertexBuffer[2*i[v+0]+1],this._vertexBuffer[2*i[v+1]+0],this._vertexBuffer[2*i[v+1]+1],this._vertexBuffer[2*i[v+2]+0],this._vertexBuffer[2*i[v+2]+1]];let P=1/0,z=1/0,V=-1/0,Z=-1/0;for(let At=0;At<3;At++){const Et=M[2*At],Nt=M[2*At+1];P=Math.min(P,Et),V=Math.max(V,Et),z=Math.min(z,Nt),Z=Math.max(Z,Nt)}if(P===V||z===Z)continue;const J=Math.floor(P/this._granularityCellSize),st=Math.ceil(V/this._granularityCellSize),lt=Math.floor(z/this._granularityCellSize),dt=Math.ceil(Z/this._granularityCellSize);if(J!==st||lt!==dt)for(let At=lt;At<dt;At++){const Et=this._scanlineGenerateVertexRingForCellRow(At,M,w);yv(this._vertexBuffer,Et,h)}else h.push(...w)}return h}_scanlineGenerateVertexRingForCellRow(i,h,f){const v=i*this._granularityCellSize,w=v+this._granularityCellSize,M=[];for(let P=0;P<3;P++){const z=h[2*P],V=h[2*P+1],Z=h[2*(P+1)%6],J=h[(2*(P+1)+1)%6],st=h[2*(P+2)%6],lt=h[(2*(P+2)+1)%6],dt=Z-z,At=J-V,Et=dt===0,Nt=At===0,ce=(v-V)/At,qt=(w-V)/At,at=Math.min(ce,qt),It=Math.max(ce,qt);if(!Nt&&(at>=1||It<=0)||Nt&&(V<v||V>w)){J>=v&&J<=w&&M.push(f[(P+1)%3]);continue}!Nt&&at>0&&M.push(this._vertexToIndex(z+dt*at,V+At*at));const Yt=z+dt*Math.max(at,0),Oe=z+dt*Math.min(It,1);Et||this._generateIntraEdgeVertices(M,z,V,Z,J,Yt,Oe),!Nt&&It<1&&M.push(this._vertexToIndex(z+dt*It,V+At*It)),(Nt||J>=v&&J<=w)&&M.push(f[(P+1)%3]),!Nt&&(J<=v||J>=w)&&this._generateInterEdgeVertices(M,z,V,Z,J,st,lt,Oe,v,w)}return M}_generateIntraEdgeVertices(i,h,f,v,w,M,P){const z=v-h,V=w-f,Z=V===0,J=Z?Math.min(h,v):Math.min(M,P),st=Z?Math.max(h,v):Math.max(M,P),lt=Math.floor(J/this._granularityCellSize)+1,dt=Math.ceil(st/this._granularityCellSize)-1;if(Z?h<v:M<P)for(let At=lt;At<=dt;At++){const Et=At*this._granularityCellSize;i.push(this._vertexToIndex(Et,f+V*(Et-h)/z))}else for(let At=dt;At>=lt;At--){const Et=At*this._granularityCellSize;i.push(this._vertexToIndex(Et,f+V*(Et-h)/z))}}_generateInterEdgeVertices(i,h,f,v,w,M,P,z,V,Z){const J=w-f,st=M-v,lt=P-w,dt=(V-w)/lt,At=(Z-w)/lt,Et=Math.min(dt,At),Nt=Math.max(dt,At),ce=v+st*Et;let qt=Math.floor(Math.min(ce,z)/this._granularityCellSize)+1,at=Math.ceil(Math.max(ce,z)/this._granularityCellSize)-1,It=z<ce;const Yt=lt===0;if(Yt&&(P===V||P===Z))return;if(Yt||Et>=1||Nt<=0){const sn=f-P,Ne=M+(h-M)*Math.min((V-P)/sn,(Z-P)/sn);qt=Math.floor(Math.min(Ne,z)/this._granularityCellSize)+1,at=Math.ceil(Math.max(Ne,z)/this._granularityCellSize)-1,It=z<Ne}const Oe=J>0?Z:V;if(It)for(let sn=qt;sn<=at;sn++)i.push(this._vertexToIndex(sn*this._granularityCellSize,Oe));else for(let sn=at;sn>=qt;sn--)i.push(this._vertexToIndex(sn*this._granularityCellSize,Oe))}_generateOutline(i){const h=[];for(const f of i){const v=Iu(f,this._granularity,!0),w=this._pointArrayToIndices(v),M=[];for(let P=1;P<w.length;P++)M.push(w[P-1]),M.push(w[P]);h.push(M)}return h}_handlePoles(i){let h=!1,f=!1;this._canonical&&(this._canonical.y===0&&(h=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(h||f)&&this._fillPoles(i,h,f)}_ensureNoPoleVertices(){const i=this._vertexBuffer;for(let h=0;h<i.length;h+=2){const f=i[h+1];f===$d&&(i[h+1]=-32767),f===Wh&&(i[h+1]=32766)}}_generatePoleQuad(i,h,f,v,w,M){v>w!=(M===$d)?(i.push(h),i.push(f),i.push(this._vertexToIndex(v,M)),i.push(f),i.push(this._vertexToIndex(w,M)),i.push(this._vertexToIndex(v,M))):(i.push(f),i.push(h),i.push(this._vertexToIndex(v,M)),i.push(this._vertexToIndex(w,M)),i.push(f),i.push(this._vertexToIndex(v,M)))}_fillPoles(i,h,f){const v=this._vertexBuffer,w=ae,M=i.length;for(let P=2;P<M;P+=3){const z=i[P-2],V=i[P-1],Z=i[P],J=v[2*z],st=v[2*z+1],lt=v[2*V],dt=v[2*V+1],At=v[2*Z],Et=v[2*Z+1];h&&(st===0&&dt===0&&this._generatePoleQuad(i,z,V,J,lt,$d),dt===0&&Et===0&&this._generatePoleQuad(i,V,Z,lt,At,$d),Et===0&&st===0&&this._generatePoleQuad(i,Z,z,At,J,$d)),f&&(st===w&&dt===w&&this._generatePoleQuad(i,z,V,J,lt,Wh),dt===w&&Et===w&&this._generatePoleQuad(i,V,Z,lt,At,Wh),Et===w&&st===w&&this._generatePoleQuad(i,Z,z,At,J,Wh))}}_initializeVertices(i){for(let h=0;h<i.length;h+=2)this._vertexToIndex(i[h],i[h+1])}subdividePolygonInternal(i,h){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:v}=function(P){const z=[],V=[];for(const Z of P)if(Z.length!==0){Z!==P[0]&&z.push(V.length/2);for(let J=0;J<Z.length;J++)V.push(Z[J].x),V.push(Z[J].y)}return{flattened:V,holeIndices:z}}(i);let w;this._initializeVertices(f);try{const P=function(V,Z,J=2){const st=Z&&Z.length,lt=st?Z[0]*J:V.length;let dt=fm(V,0,lt,J,!0);const At=[];if(!dt||dt.next===dt.prev)return At;let Et,Nt,ce;if(st&&(dt=function(qt,at,It,Yt){const Oe=[];for(let sn=0,Ne=at.length;sn<Ne;sn++){const He=fm(qt,at[sn]*Yt,sn<Ne-1?at[sn+1]*Yt:qt.length,Yt,!1);He===He.next&&(He.steiner=!0),Oe.push(Cu(He))}Oe.sort(dv);for(let sn=0;sn<Oe.length;sn++)It=Ub(Oe[sn],It);return It}(V,Z,dt,J)),V.length>80*J){Et=1/0,Nt=1/0;let qt=-1/0,at=-1/0;for(let It=J;It<lt;It+=J){const Yt=V[It],Oe=V[It+1];Yt<Et&&(Et=Yt),Oe<Nt&&(Nt=Oe),Yt>qt&&(qt=Yt),Oe>at&&(at=Oe)}ce=Math.max(qt-Et,at-Nt),ce=ce!==0?32767/ce:0}return To(dt,At,J,Et,Nt,ce,0),At}(f,v),z=this._convertIndices(f,P);w=this._subdivideTrianglesScanline(z)}catch(P){console.error(P)}let M=[];return h&&(M=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(w),{verticesFlattened:this._vertexBuffer,indicesTriangles:w,indicesLineList:M}}_convertIndices(i,h){const f=[];for(let v=0;v<h.length;v++)f.push(this._vertexToIndex(i[2*h[v]],i[2*h[v]+1]));return f}_pointArrayToIndices(i){const h=[];for(let f=0;f<i.length;f++){const v=i[f];h.push(this._vertexToIndex(v.x,v.y))}return h}}function Zd(u,i,h,f=!0){return new gv(h,i).subdividePolygonInternal(u,f)}function Iu(u,i,h=!1){if(!u||u.length<1)return[];if(u.length<2)return[];const f=u[0],v=u[u.length-1],w=h&&(f.x!==v.x||f.y!==v.y);if(i<2)return w?[...u,u[0]]:[...u];const M=Math.floor(ae/i),P=[];P.push(new k(u[0].x,u[0].y));const z=u.length,V=w?z:z-1;for(let Z=0;Z<V;Z++){const J=u[Z],st=Z<z-1?u[Z+1]:u[0],lt=J.x,dt=J.y,At=st.x,Et=st.y,Nt=lt!==At,ce=dt!==Et;if(!Nt&&!ce)continue;const qt=At-lt,at=Et-dt,It=Math.abs(qt),Yt=Math.abs(at);let Oe=lt,sn=dt;for(;;){const He=qt>0?(Math.floor(Oe/M)+1)*M:(Math.ceil(Oe/M)-1)*M,pn=at>0?(Math.floor(sn/M)+1)*M:(Math.ceil(sn/M)-1)*M,ln=Math.abs(Oe-He),vn=Math.abs(sn-pn),Xe=Math.abs(Oe-At),jn=Math.abs(sn-Et),cr=Nt?ln/It:Number.POSITIVE_INFINITY,er=ce?vn/Yt:Number.POSITIVE_INFINITY;if((Xe<=ln||!Nt)&&(jn<=vn||!ce))break;if(cr<er&&Nt||!ce){Oe=He,sn+=at*cr;const $n=new k(Oe,Math.round(sn));P[P.length-1].x===$n.x&&P[P.length-1].y===$n.y||P.push($n)}else{Oe+=qt*er,sn=pn;const $n=new k(Math.round(Oe),sn);P[P.length-1].x===$n.x&&P[P.length-1].y===$n.y||P.push($n)}}const Ne=new k(At,Et);P[P.length-1].x===Ne.x&&P[P.length-1].y===Ne.y||P.push(Ne)}return P}function yv(u,i,h){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,v=u[2*i[0]];for(let z=1;z<i.length;z++){const V=u[2*i[z]];V<v&&(v=V,f=z)}const w=i.length;let M=f,P=(M+1)%w;for(;;){const z=M-1>=0?M-1:w-1,V=(P+1)%w,Z=u[2*i[z]],J=u[2*i[V]],st=u[2*i[M]],lt=u[2*i[M]+1],dt=u[2*i[P]+1];let At=!1;if(Z<J)At=!0;else if(Z>J)At=!1;else{const Et=dt-lt,Nt=-(u[2*i[P]]-st),ce=lt<dt?1:-1;((Z-st)*Et+(u[2*i[z]+1]-lt)*Nt)*ce>((J-st)*Et+(u[2*i[V]+1]-lt)*Nt)*ce&&(At=!0)}if(At){const Et=i[z],Nt=i[M],ce=i[P];Et!==Nt&&Et!==ce&&Nt!==ce&&h.push(ce,Nt,Et),M--,M<0&&(M=w-1)}else{const Et=i[V],Nt=i[M],ce=i[P];Et!==Nt&&Et!==ce&&Nt!==ce&&h.push(ce,Nt,Et),P++,P>=w&&(P=0)}if(z===V)break}}function t0(u,i,h,f,v,w,M,P,z){const V=v.length/2,Z=M&&P&&z;if(V<pr.MAX_VERTEX_ARRAY_LENGTH){const J=i.prepareSegment(V,h,f),st=J.vertexLength;for(let At=0;At<w.length;At+=3)f.emplaceBack(st+w[At],st+w[At+1],st+w[At+2]);let lt,dt;J.vertexLength+=V,J.primitiveLength+=w.length/3,Z&&(dt=M.prepareSegment(V,h,P),lt=dt.vertexLength,dt.vertexLength+=V);for(let At=0;At<v.length;At+=2)u(v[At],v[At+1]);if(Z)for(let At=0;At<z.length;At++){const Et=z[At];for(let Nt=1;Nt<Et.length;Nt+=2)P.emplaceBack(lt+Et[Nt-1],lt+Et[Nt]);dt.primitiveLength+=Et.length/2}}else(function(J,st,lt,dt,At,Et){const Nt=[];for(let Yt=0;Yt<dt.length/2;Yt++)Nt.push(-1);const ce={count:0};let qt=0,at=J.getOrCreateLatestSegment(st,lt),It=at.vertexLength;for(let Yt=2;Yt<At.length;Yt+=3){const Oe=At[Yt-2],sn=At[Yt-1],Ne=At[Yt];let He=Nt[Oe]<qt,pn=Nt[sn]<qt,ln=Nt[Ne]<qt;at.vertexLength+((He?1:0)+(pn?1:0)+(ln?1:0))>pr.MAX_VERTEX_ARRAY_LENGTH&&(at=J.createNewSegment(st,lt),qt=ce.count,He=!0,pn=!0,ln=!0,It=0);const vn=hh(Nt,dt,Et,ce,Oe,He,at),Xe=hh(Nt,dt,Et,ce,sn,pn,at),jn=hh(Nt,dt,Et,ce,Ne,ln,at);lt.emplaceBack(It+vn-qt,It+Xe-qt,It+jn-qt),at.primitiveLength++}})(i,h,f,v,w,u),Z&&function(J,st,lt,dt,At,Et){const Nt=[];for(let Yt=0;Yt<dt.length/2;Yt++)Nt.push(-1);const ce={count:0};let qt=0,at=J.getOrCreateLatestSegment(st,lt),It=at.vertexLength;for(let Yt=0;Yt<At.length;Yt++){const Oe=At[Yt];for(let sn=1;sn<At[Yt].length;sn+=2){const Ne=Oe[sn-1],He=Oe[sn];let pn=Nt[Ne]<qt,ln=Nt[He]<qt;at.vertexLength+((pn?1:0)+(ln?1:0))>pr.MAX_VERTEX_ARRAY_LENGTH&&(at=J.createNewSegment(st,lt),qt=ce.count,pn=!0,ln=!0,It=0);const vn=hh(Nt,dt,Et,ce,Ne,pn,at),Xe=hh(Nt,dt,Et,ce,He,ln,at);lt.emplaceBack(It+vn-qt,It+Xe-qt),at.primitiveLength++}}}(M,h,P,v,z,u),i.forceNewSegmentOnNextPrepare(),M==null||M.forceNewSegmentOnNextPrepare()}function hh(u,i,h,f,v,w,M){if(w){const P=f.count;return h(i[2*v],i[2*v+1]),u[v]=f.count,f.count++,M.vertexLength++,P}return u[v]}class pm{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(h=>h.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ne,this.indexArray=new yn,this.indexArray2=new an,this.programConfigurations=new Fc(i.layers,i.zoom),this.segments=new pr,this.segments2=new pr,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(i,h,f){this.hasPattern=wu("fill",this.layers,h);const v=this.layers[0].layout.get("fill-sort-key"),w=!v.isConstant(),M=[];for(const{feature:P,id:z,index:V,sourceLayerIndex:Z}of i){const J=this.layers[0]._featureFilter.needGeometry,st=Gs(P,J);if(!this.layers[0]._featureFilter.filter(new li(this.zoom),st,f))continue;const lt=w?v.evaluate(st,{},f,h.availableImages):void 0,dt={id:z,properties:P.properties,type:P.type,sourceLayerIndex:Z,index:V,geometry:J?st.geometry:Ya(P),patterns:{},sortKey:lt};M.push(dt)}w&&M.sort((P,z)=>P.sortKey-z.sortKey);for(const P of M){const{geometry:z,index:V,sourceLayerIndex:Z}=P;if(this.hasPattern){const J=Xg("fill",this.layers,P,this.zoom,h);this.patternFeatures.push(J)}else this.addFeature(P,z,V,f,{},h.subdivisionGranularity);h.featureIndex.insert(i[V].feature,z,V,Z,this.index)}}update(i,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,h,this.stateDependentLayers,f)}addFeatures(i,h,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,h,f,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Yg),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,h,f,v,w,M){for(const P of hu(h,500)){const z=Zd(P,v,M.fill.getGranularityForZoomLevel(v.z)),V=this.layoutVertexArray;t0((Z,J)=>{V.emplaceBack(Z,J)},this.segments,this.layoutVertexArray,this.indexArray,z.verticesFlattened,z.indicesTriangles,this.segments2,this.indexArray2,z.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,w,v)}}let ec,dh;On("FillBucket",pm,{omit:["layers","patternFeatures"]});var $b={get paint(){return dh=dh||new ya({"fill-antialias":new Yn(vt.paint_fill["fill-antialias"]),"fill-opacity":new lr(vt.paint_fill["fill-opacity"]),"fill-color":new lr(vt.paint_fill["fill-color"]),"fill-outline-color":new lr(vt.paint_fill["fill-outline-color"]),"fill-translate":new Yn(vt.paint_fill["fill-translate"]),"fill-translate-anchor":new Yn(vt.paint_fill["fill-translate-anchor"]),"fill-pattern":new eh(vt.paint_fill["fill-pattern"])})},get layout(){return ec=ec||new ya({"fill-sort-key":new lr(vt.layout_fill["fill-sort-key"])})}};class vv extends Ka{constructor(i){super(i,$b)}recalculate(i,h){super.recalculate(i,h);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new pm(i)}queryRadius(){return um(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:h,transform:f,pixelsToTileUnits:v}){return Gh(ip(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,v),h)}isTileClipped(){return!0}}const Zb=Vi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Wb=Vi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:qb}=Zb;var e0,_v,n0,bv,r0,xv,Av,mm={};function i0(){if(_v)return e0;_v=1;var u=C();function i(v,w,M,P,z){this.properties={},this.extent=M,this.type=0,this._pbf=v,this._geometry=-1,this._keys=P,this._values=z,v.readFields(h,this,w)}function h(v,w,M){v==1?w.id=M.readVarint():v==2?function(P,z){for(var V=P.readVarint()+P.pos;P.pos<V;){var Z=z._keys[P.readVarint()],J=z._values[P.readVarint()];z.properties[Z]=J}}(M,w):v==3?w.type=M.readVarint():v==4&&(w._geometry=M.pos)}function f(v){for(var w,M,P=0,z=0,V=v.length,Z=V-1;z<V;Z=z++)P+=((M=v[Z]).x-(w=v[z]).x)*(w.y+M.y);return P}return e0=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var v=this._pbf;v.pos=this._geometry;for(var w,M=v.readVarint()+v.pos,P=1,z=0,V=0,Z=0,J=[];v.pos<M;){if(z<=0){var st=v.readVarint();P=7&st,z=st>>3}if(z--,P===1||P===2)V+=v.readSVarint(),Z+=v.readSVarint(),P===1&&(w&&J.push(w),w=[]),w.push(new u(V,Z));else{if(P!==7)throw new Error("unknown command "+P);w&&w.push(w[0].clone())}}return w&&J.push(w),J},i.prototype.bbox=function(){var v=this._pbf;v.pos=this._geometry;for(var w=v.readVarint()+v.pos,M=1,P=0,z=0,V=0,Z=1/0,J=-1/0,st=1/0,lt=-1/0;v.pos<w;){if(P<=0){var dt=v.readVarint();M=7&dt,P=dt>>3}if(P--,M===1||M===2)(z+=v.readSVarint())<Z&&(Z=z),z>J&&(J=z),(V+=v.readSVarint())<st&&(st=V),V>lt&&(lt=V);else if(M!==7)throw new Error("unknown command "+M)}return[Z,st,J,lt]},i.prototype.toGeoJSON=function(v,w,M){var P,z,V=this.extent*Math.pow(2,M),Z=this.extent*v,J=this.extent*w,st=this.loadGeometry(),lt=i.types[this.type];function dt(Nt){for(var ce=0;ce<Nt.length;ce++){var qt=Nt[ce];Nt[ce]=[360*(qt.x+Z)/V-180,360/Math.PI*Math.atan(Math.exp((180-360*(qt.y+J)/V)*Math.PI/180))-90]}}switch(this.type){case 1:var At=[];for(P=0;P<st.length;P++)At[P]=st[P][0];dt(st=At);break;case 2:for(P=0;P<st.length;P++)dt(st[P]);break;case 3:for(st=function(Nt){var ce=Nt.length;if(ce<=1)return[Nt];for(var qt,at,It=[],Yt=0;Yt<ce;Yt++){var Oe=f(Nt[Yt]);Oe!==0&&(at===void 0&&(at=Oe<0),at===Oe<0?(qt&&It.push(qt),qt=[Nt[Yt]]):qt.push(Nt[Yt]))}return qt&&It.push(qt),It}(st),P=0;P<st.length;P++)for(z=0;z<st[P].length;z++)dt(st[P][z])}st.length===1?st=st[0]:lt="Multi"+lt;var Et={type:"Feature",geometry:{type:lt,coordinates:st},properties:this.properties};return"id"in this&&(Et.id=this.id),Et},e0}function o0(){if(bv)return n0;bv=1;var u=i0();function i(f,v){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(h,this,v),this.length=this._features.length}function h(f,v,w){f===15?v.version=w.readVarint():f===1?v.name=w.readString():f===5?v.extent=w.readVarint():f===2?v._features.push(w.pos):f===3?v._keys.push(w.readString()):f===4&&v._values.push(function(M){for(var P=null,z=M.readVarint()+M.pos;M.pos<z;){var V=M.readVarint()>>3;P=V===1?M.readString():V===2?M.readFloat():V===3?M.readDouble():V===4?M.readVarint64():V===5?M.readVarint():V===6?M.readSVarint():V===7?M.readBoolean():null}return P}(w))}return n0=i,i.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var v=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,v,this.extent,this._keys,this._values)},n0}function a0(){return Av||(Av=1,mm.VectorTile=function(){if(xv)return r0;xv=1;var u=o0();function i(h,f,v){if(h===3){var w=new u(v,v.readVarint()+v.pos);w.length&&(f[w.name]=w)}}return r0=function(h,f){this.layers=h.readFields(i,{},f)},r0}(),mm.VectorTileFeature=i0(),mm.VectorTileLayer=o0()),mm}var dp=g(a0());const Kb=dp.VectorTileFeature.types,s0=Math.pow(2,13);function Wd(u,i,h,f,v,w,M,P){u.emplaceBack(i,h,2*Math.floor(f*s0)+M,v*s0*2,w*s0*2,Math.round(P))}class l0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(h=>h.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new se,this.centroidVertexArray=new Zt,this.indexArray=new yn,this.programConfigurations=new Fc(i.layers,i.zoom),this.segments=new pr,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(i,h,f){this.features=[],this.hasPattern=wu("fill-extrusion",this.layers,h);for(const{feature:v,id:w,index:M,sourceLayerIndex:P}of i){const z=this.layers[0]._featureFilter.needGeometry,V=Gs(v,z);if(!this.layers[0]._featureFilter.filter(new li(this.zoom),V,f))continue;const Z={id:w,sourceLayerIndex:P,index:M,geometry:z?V.geometry:Ya(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Xg("fill-extrusion",this.layers,Z,this.zoom,h)):this.addFeature(Z,Z.geometry,M,f,{},h.subdivisionGranularity),h.featureIndex.insert(v,Z.geometry,M,P,this.index,!0)}}addFeatures(i,h,f){for(const v of this.features){const{geometry:w}=v;this.addFeature(v,w,v.index,h,f,i.subdivisionGranularity)}}update(i,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,h,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,qb),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,Wb.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,h,f,v,w,M){for(const P of hu(h,500)){const z={x:0,y:0,sampleCount:0},V=this.layoutVertexArray.length;this.processPolygon(z,v,i,P,M);const Z=this.layoutVertexArray.length-V,J=Math.floor(z.x/z.sampleCount),st=Math.floor(z.y/z.sampleCount);for(let lt=0;lt<Z;lt++)this.centroidVertexArray.emplaceBack(J,st)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,w,v)}processPolygon(i,h,f,v,w){if(v.length<1||wv(v[0]))return;for(const J of v)J.length!==0&&Yb(i,J);const M={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},P=w.fill.getGranularityForZoomLevel(h.z),z=Kb[f.type]==="Polygon";for(const J of v){if(J.length===0||wv(J))continue;const st=Iu(J,P,z);this._generateSideFaces(st,M)}if(!z)return;const V=Zd(v,h,P,!1),Z=this.layoutVertexArray;t0((J,st)=>{Wd(Z,J,st,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,V.verticesFlattened,V.indicesTriangles)}_generateSideFaces(i,h){let f=0;for(let v=1;v<i.length;v++){const w=i[v],M=i[v-1];if(Xb(w,M))continue;h.segment.vertexLength+4>pr.MAX_VERTEX_ARRAY_LENGTH&&(h.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const P=w.sub(M)._perp()._unit(),z=M.dist(w);f+z>32768&&(f=0),Wd(this.layoutVertexArray,w.x,w.y,P.x,P.y,0,0,f),Wd(this.layoutVertexArray,w.x,w.y,P.x,P.y,0,1,f),f+=z,Wd(this.layoutVertexArray,M.x,M.y,P.x,P.y,0,0,f),Wd(this.layoutVertexArray,M.x,M.y,P.x,P.y,0,1,f);const V=h.segment.vertexLength;this.indexArray.emplaceBack(V,V+2,V+1),this.indexArray.emplaceBack(V+1,V+2,V+3),h.segment.vertexLength+=4,h.segment.primitiveLength+=2}}}function Yb(u,i){for(let h=0;h<i.length;h++){const f=i[h];h===i.length-1&&i[0].x===f.x&&i[0].y===f.y||(u.x+=f.x,u.y+=f.y,u.sampleCount++)}}function Xb(u,i){return u.x===i.x&&(u.x<0||u.x>ae)||u.y===i.y&&(u.y<0||u.y>ae)}function wv(u){return u.every(i=>i.x<0)||u.every(i=>i.x>ae)||u.every(i=>i.y<0)||u.every(i=>i.y>ae)}let Cv;On("FillExtrusionBucket",l0,{omit:["layers","features"]});var Qb={get paint(){return Cv=Cv||new ya({"fill-extrusion-opacity":new Yn(vt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new lr(vt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Yn(vt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Yn(vt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new eh(vt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new lr(vt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new lr(vt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Yn(vt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class vl extends Ka{constructor(i){super(i,Qb)}createBucket(i){return new l0(i)}queryRadius(){return um(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:h,featureState:f,geometry:v,transform:w,pixelsToTileUnits:M,pixelPosMatrix:P}){const z=ip(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-w.bearingInRadians,M),V=this.paint.get("fill-extrusion-height").evaluate(h,f),Z=this.paint.get("fill-extrusion-base").evaluate(h,f),J=function(lt,dt,At){const Et=[];for(const Nt of lt){const ce=[Nt.x,Nt.y,0,1];X(ce,ce,dt),Et.push(new k(ce[0]/ce[3],ce[1]/ce[3]))}return Et}(z,P),st=function(lt,dt,At,Et){const Nt=[],ce=[],qt=Et[8]*dt,at=Et[9]*dt,It=Et[10]*dt,Yt=Et[11]*dt,Oe=Et[8]*At,sn=Et[9]*At,Ne=Et[10]*At,He=Et[11]*At;for(const pn of lt){const ln=[],vn=[];for(const Xe of pn){const jn=Xe.x,cr=Xe.y,er=Et[0]*jn+Et[4]*cr+Et[12],$n=Et[1]*jn+Et[5]*cr+Et[13],Vr=Et[2]*jn+Et[6]*cr+Et[14],$i=Et[3]*jn+Et[7]*cr+Et[15],xo=Vr+It,ia=$i+Yt,oa=er+Oe,es=$n+sn,Wo=Vr+Ne,Ni=$i+He,Po=new k((er+qt)/ia,($n+at)/ia);Po.z=xo/ia,ln.push(Po);const qo=new k(oa/Ni,es/Ni);qo.z=Wo/Ni,vn.push(qo)}Nt.push(ln),ce.push(vn)}return[Nt,ce]}(v,Z,V,P);return function(lt,dt,At){let Et=1/0;Gh(At,dt)&&(Et=Iv(At,dt[0]));for(let Nt=0;Nt<dt.length;Nt++){const ce=dt[Nt],qt=lt[Nt];for(let at=0;at<ce.length-1;at++){const It=ce[at],Yt=[It,ce[at+1],qt[at+1],qt[at],It];ep(At,Yt)&&(Et=Math.min(Et,Iv(At,Yt)))}}return Et!==1/0&&Et}(st[0],st[1],J)}}function fp(u,i){return u.x*i.x+u.y*i.y}function Iv(u,i){if(u.length===1){let h=0;const f=i[h++];let v;for(;!v||f.equals(v);)if(v=i[h++],!v)return 1/0;for(;h<i.length;h++){const w=i[h],M=u[0],P=v.sub(f),z=w.sub(f),V=M.sub(f),Z=fp(P,P),J=fp(P,z),st=fp(z,z),lt=fp(V,P),dt=fp(V,z),At=Z*st-J*J,Et=(st*lt-J*dt)/At,Nt=(Z*dt-J*lt)/At,ce=f.z*(1-Et-Nt)+v.z*Et+w.z*Nt;if(isFinite(ce))return ce}return 1/0}{let h=1/0;for(const f of i)h=Math.min(h,f.z);return h}}const Jb=Vi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Mv}=Jb,tx=Vi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ex}=tx,nx=dp.VectorTileFeature.types,rx=Math.cos(Math.PI/180*37.5),gm=Math.pow(2,14)/.5;class c0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(h=>h.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new fe,this.layoutVertexArray2=new le,this.indexArray=new yn,this.programConfigurations=new Fc(i.layers,i.zoom),this.segments=new pr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(i,h,f){this.hasPattern=wu("line",this.layers,h);const v=this.layers[0].layout.get("line-sort-key"),w=!v.isConstant(),M=[];for(const{feature:P,id:z,index:V,sourceLayerIndex:Z}of i){const J=this.layers[0]._featureFilter.needGeometry,st=Gs(P,J);if(!this.layers[0]._featureFilter.filter(new li(this.zoom),st,f))continue;const lt=w?v.evaluate(st,{},f):void 0,dt={id:z,properties:P.properties,type:P.type,sourceLayerIndex:Z,index:V,geometry:J?st.geometry:Ya(P),patterns:{},sortKey:lt};M.push(dt)}w&&M.sort((P,z)=>P.sortKey-z.sortKey);for(const P of M){const{geometry:z,index:V,sourceLayerIndex:Z}=P;if(this.hasPattern){const J=Xg("line",this.layers,P,this.zoom,h);this.patternFeatures.push(J)}else this.addFeature(P,z,V,f,{},h.subdivisionGranularity);h.featureIndex.insert(i[V].feature,z,V,Z,this.index)}}update(i,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,h,this.stateDependentLayers,f)}addFeatures(i,h,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,h,f,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,ex)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Mv),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,h,f,v,w,M){const P=this.layers[0].layout,z=P.get("line-join").evaluate(i,{}),V=P.get("line-cap"),Z=P.get("line-miter-limit"),J=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const st of h)this.addLine(st,i,z,V,Z,J,v,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,w,v)}addLine(i,h,f,v,w,M,P,z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=Iu(i,P?z.line.getGranularityForZoomLevel(P.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let qt=0;qt<i.length-1;qt++)this.totalDistance+=i[qt].dist(i[qt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const V=nx[h.type]==="Polygon";let Z=i.length;for(;Z>=2&&i[Z-1].equals(i[Z-2]);)Z--;let J=0;for(;J<Z-1&&i[J].equals(i[J+1]);)J++;if(Z<(V?3:2))return;f==="bevel"&&(w=1.05);const st=this.overscaling<=16?15*ae/(512*this.overscaling):0,lt=this.segments.prepareSegment(10*Z,this.layoutVertexArray,this.indexArray);let dt,At,Et,Nt,ce;this.e1=this.e2=-1,V&&(dt=i[Z-2],ce=i[J].sub(dt)._unit()._perp());for(let qt=J;qt<Z;qt++){if(Et=qt===Z-1?V?i[J+1]:void 0:i[qt+1],Et&&i[qt].equals(Et))continue;ce&&(Nt=ce),dt&&(At=dt),dt=i[qt],ce=Et?Et.sub(dt)._unit()._perp():Nt,Nt=Nt||ce;let at=Nt.add(ce);at.x===0&&at.y===0||at._unit();const It=Nt.x*ce.x+Nt.y*ce.y,Yt=at.x*ce.x+at.y*ce.y,Oe=Yt!==0?1/Yt:1/0,sn=2*Math.sqrt(2-2*Yt),Ne=Yt<rx&&At&&Et,He=Nt.x*ce.y-Nt.y*ce.x>0;if(Ne&&qt>J){const vn=dt.dist(At);if(vn>2*st){const Xe=dt.sub(dt.sub(At)._mult(st/vn)._round());this.updateDistance(At,Xe),this.addCurrentVertex(Xe,Nt,0,0,lt),At=Xe}}const pn=At&&Et;let ln=pn?f:V?"butt":v;if(pn&&ln==="round"&&(Oe<M?ln="miter":Oe<=2&&(ln="fakeround")),ln==="miter"&&Oe>w&&(ln="bevel"),ln==="bevel"&&(Oe>2&&(ln="flipbevel"),Oe<w&&(ln="miter")),At&&this.updateDistance(At,dt),ln==="miter")at._mult(Oe),this.addCurrentVertex(dt,at,0,0,lt);else if(ln==="flipbevel"){if(Oe>100)at=ce.mult(-1);else{const vn=Oe*Nt.add(ce).mag()/Nt.sub(ce).mag();at._perp()._mult(vn*(He?-1:1))}this.addCurrentVertex(dt,at,0,0,lt),this.addCurrentVertex(dt,at.mult(-1),0,0,lt)}else if(ln==="bevel"||ln==="fakeround"){const vn=-Math.sqrt(Oe*Oe-1),Xe=He?vn:0,jn=He?0:vn;if(At&&this.addCurrentVertex(dt,Nt,Xe,jn,lt),ln==="fakeround"){const cr=Math.round(180*sn/Math.PI/20);for(let er=1;er<cr;er++){let $n=er/cr;if($n!==.5){const $i=$n-.5;$n+=$n*$i*($n-1)*((1.0904+It*(It*(3.55645-1.43519*It)-3.2452))*$i*$i+(.848013+It*(.215638*It-1.06021)))}const Vr=ce.sub(Nt)._mult($n)._add(Nt)._unit()._mult(He?-1:1);this.addHalfVertex(dt,Vr.x,Vr.y,!1,He,0,lt)}}Et&&this.addCurrentVertex(dt,ce,-Xe,-jn,lt)}else if(ln==="butt")this.addCurrentVertex(dt,at,0,0,lt);else if(ln==="square"){const vn=At?1:-1;this.addCurrentVertex(dt,at,vn,vn,lt)}else ln==="round"&&(At&&(this.addCurrentVertex(dt,Nt,0,0,lt),this.addCurrentVertex(dt,Nt,1,1,lt,!0)),Et&&(this.addCurrentVertex(dt,ce,-1,-1,lt,!0),this.addCurrentVertex(dt,ce,0,0,lt)));if(Ne&&qt<Z-1){const vn=dt.dist(Et);if(vn>2*st){const Xe=dt.add(Et.sub(dt)._mult(st/vn)._round());this.updateDistance(dt,Xe),this.addCurrentVertex(Xe,ce,0,0,lt),dt=Xe}}}}addCurrentVertex(i,h,f,v,w,M=!1){const P=h.y*v-h.x,z=-h.y-h.x*v;this.addHalfVertex(i,h.x+h.y*f,h.y-h.x*f,M,!1,f,w),this.addHalfVertex(i,P,z,M,!0,-v,w),this.distance>gm/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,h,f,v,w,M))}addHalfVertex({x:i,y:h},f,v,w,M,P,z){const V=.5*(this.lineClips?this.scaledDistance*(gm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(w?1:0),(h<<1)+(M?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(P===0?0:P<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Z=z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Z,this.e2),z.primitiveLength++),M?this.e2=Z:this.e1=Z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,h){this.distance+=i.dist(h),this.updateScaledDistance()}}let Sv,Ev;On("LineBucket",c0,{omit:["layers","patternFeatures"]});var Tv={get paint(){return Ev=Ev||new ya({"line-opacity":new lr(vt.paint_line["line-opacity"]),"line-color":new lr(vt.paint_line["line-color"]),"line-translate":new Yn(vt.paint_line["line-translate"]),"line-translate-anchor":new Yn(vt.paint_line["line-translate-anchor"]),"line-width":new lr(vt.paint_line["line-width"]),"line-gap-width":new lr(vt.paint_line["line-gap-width"]),"line-offset":new lr(vt.paint_line["line-offset"]),"line-blur":new lr(vt.paint_line["line-blur"]),"line-dasharray":new vu(vt.paint_line["line-dasharray"]),"line-pattern":new eh(vt.paint_line["line-pattern"]),"line-gradient":new gl(vt.paint_line["line-gradient"])})},get layout(){return Sv=Sv||new ya({"line-cap":new Yn(vt.layout_line["line-cap"]),"line-join":new lr(vt.layout_line["line-join"]),"line-miter-limit":new Yn(vt.layout_line["line-miter-limit"]),"line-round-limit":new Yn(vt.layout_line["line-round-limit"]),"line-sort-key":new lr(vt.layout_line["line-sort-key"])})}};class ix extends lr{possiblyEvaluate(i,h){return h=new li(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(i,h)}evaluate(i,h,f,v){return h=be({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(i,h,f,v)}}let ym;class ox extends Ka{constructor(i){super(i,Tv),this.gradientVersion=0,ym||(ym=new ix(Tv.paint.properties["line-width"].specification),ym.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof Fi,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,h){super.recalculate(i,h),this.paint._values["line-floorwidth"]=ym.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new c0(i)}queryRadius(i){const h=i,f=Pv(lh("line-width",this,h),lh("line-gap-width",this,h)),v=lh("line-offset",this,h);return f/2+Math.abs(v)+um(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:h,featureState:f,geometry:v,transform:w,pixelsToTileUnits:M}){const P=ip(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-w.bearingInRadians,M),z=M/2*Pv(this.paint.get("line-width").evaluate(h,f),this.paint.get("line-gap-width").evaluate(h,f)),V=this.paint.get("line-offset").evaluate(h,f);return V&&(v=function(Z,J){const st=[];for(let lt=0;lt<Z.length;lt++){const dt=Z[lt],At=[];for(let Et=0;Et<dt.length;Et++){const Nt=dt[Et-1],ce=dt[Et],qt=dt[Et+1],at=Et===0?new k(0,0):ce.sub(Nt)._unit()._perp(),It=Et===dt.length-1?new k(0,0):qt.sub(ce)._unit()._perp(),Yt=at._add(It)._unit(),Oe=Yt.x*It.x+Yt.y*It.y;Oe!==0&&Yt._mult(1/Oe),At.push(Yt._mult(J)._add(ce))}st.push(At)}return st}(v,V*M)),function(Z,J,st){for(let lt=0;lt<J.length;lt++){const dt=J[lt];if(Z.length>=3){for(let At=0;At<dt.length;At++)if(Nc(Z,dt[At]))return!0}if(np(Z,dt,st))return!0}return!1}(P,v,z)}isTileClipped(){return!0}}function Pv(u,i){return i>0?i+2*u:u}const ax=Vi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),sx=Vi([{name:"a_projected_pos",components:3,type:"Float32"}],4);Vi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const lx=Vi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Vi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const kv=Vi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),cx=Vi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ux(u,i,h){return u.sections.forEach(f=>{f.text=function(v,w,M){const P=w.layout.get("text-transform").evaluate(M,{});return P==="uppercase"?v=v.toLocaleUpperCase():P==="lowercase"&&(v=v.toLocaleLowerCase()),pl.applyArabicShaping&&(v=pl.applyArabicShaping(v)),v}(f.text,i,h)}),u}Vi([{name:"triangle",components:3,type:"Uint16"}]),Vi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Vi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Vi([{type:"Float32",name:"offsetX"}]),Vi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Vi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const pp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Lv,u0,Rv,_o=24,h0={};function d0(){return Lv||(Lv=1,h0.read=function(u,i,h,f,v){var w,M,P=8*v-f-1,z=(1<<P)-1,V=z>>1,Z=-7,J=h?v-1:0,st=h?-1:1,lt=u[i+J];for(J+=st,w=lt&(1<<-Z)-1,lt>>=-Z,Z+=P;Z>0;w=256*w+u[i+J],J+=st,Z-=8);for(M=w&(1<<-Z)-1,w>>=-Z,Z+=f;Z>0;M=256*M+u[i+J],J+=st,Z-=8);if(w===0)w=1-V;else{if(w===z)return M?NaN:1/0*(lt?-1:1);M+=Math.pow(2,f),w-=V}return(lt?-1:1)*M*Math.pow(2,w-f)},h0.write=function(u,i,h,f,v,w){var M,P,z,V=8*w-v-1,Z=(1<<V)-1,J=Z>>1,st=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,lt=f?0:w-1,dt=f?1:-1,At=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(P=isNaN(i)?1:0,M=Z):(M=Math.floor(Math.log(i)/Math.LN2),i*(z=Math.pow(2,-M))<1&&(M--,z*=2),(i+=M+J>=1?st/z:st*Math.pow(2,1-J))*z>=2&&(M++,z/=2),M+J>=Z?(P=0,M=Z):M+J>=1?(P=(i*z-1)*Math.pow(2,v),M+=J):(P=i*Math.pow(2,J-1)*Math.pow(2,v),M=0));v>=8;u[h+lt]=255&P,lt+=dt,P/=256,v-=8);for(M=M<<v|P,V+=v;V>0;u[h+lt]=255&M,lt+=dt,M/=256,V-=8);u[h+lt-dt]|=128*At}),h0}function f0(){if(Rv)return u0;Rv=1,u0=i;var u=d0();function i(at){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(at)?at:new Uint8Array(at||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var h=4294967296,f=1/h,v=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function w(at){return at.type===i.Bytes?at.readVarint()+at.pos:at.pos+1}function M(at,It,Yt){return Yt?4294967296*It+(at>>>0):4294967296*(It>>>0)+(at>>>0)}function P(at,It,Yt){var Oe=It<=16383?1:It<=2097151?2:It<=268435455?3:Math.floor(Math.log(It)/(7*Math.LN2));Yt.realloc(Oe);for(var sn=Yt.pos-1;sn>=at;sn--)Yt.buf[sn+Oe]=Yt.buf[sn]}function z(at,It){for(var Yt=0;Yt<at.length;Yt++)It.writeVarint(at[Yt])}function V(at,It){for(var Yt=0;Yt<at.length;Yt++)It.writeSVarint(at[Yt])}function Z(at,It){for(var Yt=0;Yt<at.length;Yt++)It.writeFloat(at[Yt])}function J(at,It){for(var Yt=0;Yt<at.length;Yt++)It.writeDouble(at[Yt])}function st(at,It){for(var Yt=0;Yt<at.length;Yt++)It.writeBoolean(at[Yt])}function lt(at,It){for(var Yt=0;Yt<at.length;Yt++)It.writeFixed32(at[Yt])}function dt(at,It){for(var Yt=0;Yt<at.length;Yt++)It.writeSFixed32(at[Yt])}function At(at,It){for(var Yt=0;Yt<at.length;Yt++)It.writeFixed64(at[Yt])}function Et(at,It){for(var Yt=0;Yt<at.length;Yt++)It.writeSFixed64(at[Yt])}function Nt(at,It){return(at[It]|at[It+1]<<8|at[It+2]<<16)+16777216*at[It+3]}function ce(at,It,Yt){at[Yt]=It,at[Yt+1]=It>>>8,at[Yt+2]=It>>>16,at[Yt+3]=It>>>24}function qt(at,It){return(at[It]|at[It+1]<<8|at[It+2]<<16)+(at[It+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(at,It,Yt){for(Yt=Yt||this.length;this.pos<Yt;){var Oe=this.readVarint(),sn=Oe>>3,Ne=this.pos;this.type=7&Oe,at(sn,It,this),this.pos===Ne&&this.skip(Oe)}return It},readMessage:function(at,It){return this.readFields(at,It,this.readVarint()+this.pos)},readFixed32:function(){var at=Nt(this.buf,this.pos);return this.pos+=4,at},readSFixed32:function(){var at=qt(this.buf,this.pos);return this.pos+=4,at},readFixed64:function(){var at=Nt(this.buf,this.pos)+Nt(this.buf,this.pos+4)*h;return this.pos+=8,at},readSFixed64:function(){var at=Nt(this.buf,this.pos)+qt(this.buf,this.pos+4)*h;return this.pos+=8,at},readFloat:function(){var at=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,at},readDouble:function(){var at=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,at},readVarint:function(at){var It,Yt,Oe=this.buf;return It=127&(Yt=Oe[this.pos++]),Yt<128?It:(It|=(127&(Yt=Oe[this.pos++]))<<7,Yt<128?It:(It|=(127&(Yt=Oe[this.pos++]))<<14,Yt<128?It:(It|=(127&(Yt=Oe[this.pos++]))<<21,Yt<128?It:function(sn,Ne,He){var pn,ln,vn=He.buf;if(pn=(112&(ln=vn[He.pos++]))>>4,ln<128||(pn|=(127&(ln=vn[He.pos++]))<<3,ln<128)||(pn|=(127&(ln=vn[He.pos++]))<<10,ln<128)||(pn|=(127&(ln=vn[He.pos++]))<<17,ln<128)||(pn|=(127&(ln=vn[He.pos++]))<<24,ln<128)||(pn|=(1&(ln=vn[He.pos++]))<<31,ln<128))return M(sn,pn,Ne);throw new Error("Expected varint not more than 10 bytes")}(It|=(15&(Yt=Oe[this.pos]))<<28,at,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var at=this.readVarint();return at%2==1?(at+1)/-2:at/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var at=this.readVarint()+this.pos,It=this.pos;return this.pos=at,at-It>=12&&v?function(Yt,Oe,sn){return v.decode(Yt.subarray(Oe,sn))}(this.buf,It,at):function(Yt,Oe,sn){for(var Ne="",He=Oe;He<sn;){var pn,ln,vn,Xe=Yt[He],jn=null,cr=Xe>239?4:Xe>223?3:Xe>191?2:1;if(He+cr>sn)break;cr===1?Xe<128&&(jn=Xe):cr===2?(192&(pn=Yt[He+1]))==128&&(jn=(31&Xe)<<6|63&pn)<=127&&(jn=null):cr===3?(ln=Yt[He+2],(192&(pn=Yt[He+1]))==128&&(192&ln)==128&&((jn=(15&Xe)<<12|(63&pn)<<6|63&ln)<=2047||jn>=55296&&jn<=57343)&&(jn=null)):cr===4&&(ln=Yt[He+2],vn=Yt[He+3],(192&(pn=Yt[He+1]))==128&&(192&ln)==128&&(192&vn)==128&&((jn=(15&Xe)<<18|(63&pn)<<12|(63&ln)<<6|63&vn)<=65535||jn>=1114112)&&(jn=null)),jn===null?(jn=65533,cr=1):jn>65535&&(jn-=65536,Ne+=String.fromCharCode(jn>>>10&1023|55296),jn=56320|1023&jn),Ne+=String.fromCharCode(jn),He+=cr}return Ne}(this.buf,It,at)},readBytes:function(){var at=this.readVarint()+this.pos,It=this.buf.subarray(this.pos,at);return this.pos=at,It},readPackedVarint:function(at,It){if(this.type!==i.Bytes)return at.push(this.readVarint(It));var Yt=w(this);for(at=at||[];this.pos<Yt;)at.push(this.readVarint(It));return at},readPackedSVarint:function(at){if(this.type!==i.Bytes)return at.push(this.readSVarint());var It=w(this);for(at=at||[];this.pos<It;)at.push(this.readSVarint());return at},readPackedBoolean:function(at){if(this.type!==i.Bytes)return at.push(this.readBoolean());var It=w(this);for(at=at||[];this.pos<It;)at.push(this.readBoolean());return at},readPackedFloat:function(at){if(this.type!==i.Bytes)return at.push(this.readFloat());var It=w(this);for(at=at||[];this.pos<It;)at.push(this.readFloat());return at},readPackedDouble:function(at){if(this.type!==i.Bytes)return at.push(this.readDouble());var It=w(this);for(at=at||[];this.pos<It;)at.push(this.readDouble());return at},readPackedFixed32:function(at){if(this.type!==i.Bytes)return at.push(this.readFixed32());var It=w(this);for(at=at||[];this.pos<It;)at.push(this.readFixed32());return at},readPackedSFixed32:function(at){if(this.type!==i.Bytes)return at.push(this.readSFixed32());var It=w(this);for(at=at||[];this.pos<It;)at.push(this.readSFixed32());return at},readPackedFixed64:function(at){if(this.type!==i.Bytes)return at.push(this.readFixed64());var It=w(this);for(at=at||[];this.pos<It;)at.push(this.readFixed64());return at},readPackedSFixed64:function(at){if(this.type!==i.Bytes)return at.push(this.readSFixed64());var It=w(this);for(at=at||[];this.pos<It;)at.push(this.readSFixed64());return at},skip:function(at){var It=7&at;if(It===i.Varint)for(;this.buf[this.pos++]>127;);else if(It===i.Bytes)this.pos=this.readVarint()+this.pos;else if(It===i.Fixed32)this.pos+=4;else{if(It!==i.Fixed64)throw new Error("Unimplemented type: "+It);this.pos+=8}},writeTag:function(at,It){this.writeVarint(at<<3|It)},realloc:function(at){for(var It=this.length||16;It<this.pos+at;)It*=2;if(It!==this.length){var Yt=new Uint8Array(It);Yt.set(this.buf),this.buf=Yt,this.length=It}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(at){this.realloc(4),ce(this.buf,at,this.pos),this.pos+=4},writeSFixed32:function(at){this.realloc(4),ce(this.buf,at,this.pos),this.pos+=4},writeFixed64:function(at){this.realloc(8),ce(this.buf,-1&at,this.pos),ce(this.buf,Math.floor(at*f),this.pos+4),this.pos+=8},writeSFixed64:function(at){this.realloc(8),ce(this.buf,-1&at,this.pos),ce(this.buf,Math.floor(at*f),this.pos+4),this.pos+=8},writeVarint:function(at){(at=+at||0)>268435455||at<0?function(It,Yt){var Oe,sn;if(It>=0?(Oe=It%4294967296|0,sn=It/4294967296|0):(sn=~(-It/4294967296),4294967295^(Oe=~(-It%4294967296))?Oe=Oe+1|0:(Oe=0,sn=sn+1|0)),It>=18446744073709552e3||It<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Yt.realloc(10),function(Ne,He,pn){pn.buf[pn.pos++]=127&Ne|128,Ne>>>=7,pn.buf[pn.pos++]=127&Ne|128,Ne>>>=7,pn.buf[pn.pos++]=127&Ne|128,Ne>>>=7,pn.buf[pn.pos++]=127&Ne|128,pn.buf[pn.pos]=127&(Ne>>>=7)}(Oe,0,Yt),function(Ne,He){var pn=(7&Ne)<<4;He.buf[He.pos++]|=pn|((Ne>>>=3)?128:0),Ne&&(He.buf[He.pos++]=127&Ne|((Ne>>>=7)?128:0),Ne&&(He.buf[He.pos++]=127&Ne|((Ne>>>=7)?128:0),Ne&&(He.buf[He.pos++]=127&Ne|((Ne>>>=7)?128:0),Ne&&(He.buf[He.pos++]=127&Ne|((Ne>>>=7)?128:0),Ne&&(He.buf[He.pos++]=127&Ne)))))}(sn,Yt)}(at,this):(this.realloc(4),this.buf[this.pos++]=127&at|(at>127?128:0),at<=127||(this.buf[this.pos++]=127&(at>>>=7)|(at>127?128:0),at<=127||(this.buf[this.pos++]=127&(at>>>=7)|(at>127?128:0),at<=127||(this.buf[this.pos++]=at>>>7&127))))},writeSVarint:function(at){this.writeVarint(at<0?2*-at-1:2*at)},writeBoolean:function(at){this.writeVarint(!!at)},writeString:function(at){at=String(at),this.realloc(4*at.length),this.pos++;var It=this.pos;this.pos=function(Oe,sn,Ne){for(var He,pn,ln=0;ln<sn.length;ln++){if((He=sn.charCodeAt(ln))>55295&&He<57344){if(!pn){He>56319||ln+1===sn.length?(Oe[Ne++]=239,Oe[Ne++]=191,Oe[Ne++]=189):pn=He;continue}if(He<56320){Oe[Ne++]=239,Oe[Ne++]=191,Oe[Ne++]=189,pn=He;continue}He=pn-55296<<10|He-56320|65536,pn=null}else pn&&(Oe[Ne++]=239,Oe[Ne++]=191,Oe[Ne++]=189,pn=null);He<128?Oe[Ne++]=He:(He<2048?Oe[Ne++]=He>>6|192:(He<65536?Oe[Ne++]=He>>12|224:(Oe[Ne++]=He>>18|240,Oe[Ne++]=He>>12&63|128),Oe[Ne++]=He>>6&63|128),Oe[Ne++]=63&He|128)}return Ne}(this.buf,at,this.pos);var Yt=this.pos-It;Yt>=128&&P(It,Yt,this),this.pos=It-1,this.writeVarint(Yt),this.pos+=Yt},writeFloat:function(at){this.realloc(4),u.write(this.buf,at,this.pos,!0,23,4),this.pos+=4},writeDouble:function(at){this.realloc(8),u.write(this.buf,at,this.pos,!0,52,8),this.pos+=8},writeBytes:function(at){var It=at.length;this.writeVarint(It),this.realloc(It);for(var Yt=0;Yt<It;Yt++)this.buf[this.pos++]=at[Yt]},writeRawMessage:function(at,It){this.pos++;var Yt=this.pos;at(It,this);var Oe=this.pos-Yt;Oe>=128&&P(Yt,Oe,this),this.pos=Yt-1,this.writeVarint(Oe),this.pos+=Oe},writeMessage:function(at,It,Yt){this.writeTag(at,i.Bytes),this.writeRawMessage(It,Yt)},writePackedVarint:function(at,It){It.length&&this.writeMessage(at,z,It)},writePackedSVarint:function(at,It){It.length&&this.writeMessage(at,V,It)},writePackedBoolean:function(at,It){It.length&&this.writeMessage(at,st,It)},writePackedFloat:function(at,It){It.length&&this.writeMessage(at,Z,It)},writePackedDouble:function(at,It){It.length&&this.writeMessage(at,J,It)},writePackedFixed32:function(at,It){It.length&&this.writeMessage(at,lt,It)},writePackedSFixed32:function(at,It){It.length&&this.writeMessage(at,dt,It)},writePackedFixed64:function(at,It){It.length&&this.writeMessage(at,At,It)},writePackedSFixed64:function(at,It){It.length&&this.writeMessage(at,Et,It)},writeBytesField:function(at,It){this.writeTag(at,i.Bytes),this.writeBytes(It)},writeFixed32Field:function(at,It){this.writeTag(at,i.Fixed32),this.writeFixed32(It)},writeSFixed32Field:function(at,It){this.writeTag(at,i.Fixed32),this.writeSFixed32(It)},writeFixed64Field:function(at,It){this.writeTag(at,i.Fixed64),this.writeFixed64(It)},writeSFixed64Field:function(at,It){this.writeTag(at,i.Fixed64),this.writeSFixed64(It)},writeVarintField:function(at,It){this.writeTag(at,i.Varint),this.writeVarint(It)},writeSVarintField:function(at,It){this.writeTag(at,i.Varint),this.writeSVarint(It)},writeStringField:function(at,It){this.writeTag(at,i.Bytes),this.writeString(It)},writeFloatField:function(at,It){this.writeTag(at,i.Fixed32),this.writeFloat(It)},writeDoubleField:function(at,It){this.writeTag(at,i.Fixed64),this.writeDouble(It)},writeBooleanField:function(at,It){this.writeVarintField(at,!!It)}},u0}var p0=g(f0());const m0=3;function hx(u,i,h){u===1&&h.readMessage(dx,i)}function dx(u,i,h){if(u===3){const{id:f,bitmap:v,width:w,height:M,left:P,top:z,advance:V}=h.readMessage(fx,{});i.push({id:f,bitmap:new ap({width:w+2*m0,height:M+2*m0},v),metrics:{width:w,height:M,left:P,top:z,advance:V}})}}function fx(u,i,h){u===1?i.id=h.readVarint():u===2?i.bitmap=h.readBytes():u===3?i.width=h.readVarint():u===4?i.height=h.readVarint():u===5?i.left=h.readSVarint():u===6?i.top=h.readSVarint():u===7&&(i.advance=h.readVarint())}const px=m0;function Dv(u){let i=0,h=0;for(const M of u)i+=M.w*M.h,h=Math.max(h,M.w);u.sort((M,P)=>P.h-M.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),h),h:1/0}];let v=0,w=0;for(const M of u)for(let P=f.length-1;P>=0;P--){const z=f[P];if(!(M.w>z.w||M.h>z.h)){if(M.x=z.x,M.y=z.y,w=Math.max(w,M.y+M.h),v=Math.max(v,M.x+M.w),M.w===z.w&&M.h===z.h){const V=f.pop();P<f.length&&(f[P]=V)}else M.h===z.h?(z.x+=M.w,z.w-=M.w):M.w===z.w?(z.y+=M.h,z.h-=M.h):(f.push({x:z.x+M.w,y:z.y,w:z.w-M.w,h:M.h}),z.y+=M.h,z.h-=M.h);break}}return{w:v,h:w,fill:i/(v*w)||0}}const Xa=1;class vm{constructor(i,{pixelRatio:h,version:f,stretchX:v,stretchY:w,content:M,textFitWidth:P,textFitHeight:z}){this.paddedRect=i,this.pixelRatio=h,this.stretchX=v,this.stretchY=w,this.content=M,this.version=f,this.textFitWidth=P,this.textFitHeight=z}get tl(){return[this.paddedRect.x+Xa,this.paddedRect.y+Xa]}get br(){return[this.paddedRect.x+this.paddedRect.w-Xa,this.paddedRect.y+this.paddedRect.h-Xa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Xa)/this.pixelRatio,(this.paddedRect.h-2*Xa)/this.pixelRatio]}}class Ov{constructor(i,h){const f={},v={};this.haveRenderCallbacks=[];const w=[];this.addImages(i,f,w),this.addImages(h,v,w);const{w:M,h:P}=Dv(w),z=new vo({width:M||1,height:P||1});for(const V in i){const Z=i[V],J=f[V].paddedRect;vo.copy(Z.data,z,{x:0,y:0},{x:J.x+Xa,y:J.y+Xa},Z.data)}for(const V in h){const Z=h[V],J=v[V].paddedRect,st=J.x+Xa,lt=J.y+Xa,dt=Z.data.width,At=Z.data.height;vo.copy(Z.data,z,{x:0,y:0},{x:st,y:lt},Z.data),vo.copy(Z.data,z,{x:0,y:At-1},{x:st,y:lt-1},{width:dt,height:1}),vo.copy(Z.data,z,{x:0,y:0},{x:st,y:lt+At},{width:dt,height:1}),vo.copy(Z.data,z,{x:dt-1,y:0},{x:st-1,y:lt},{width:1,height:At}),vo.copy(Z.data,z,{x:0,y:0},{x:st+dt,y:lt},{width:1,height:At})}this.image=z,this.iconPositions=f,this.patternPositions=v}addImages(i,h,f){for(const v in i){const w=i[v],M={x:0,y:0,w:w.data.width+2*Xa,h:w.data.height+2*Xa};f.push(M),h[v]=new vm(M,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(i,h){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in i.updatedImages)this.patchUpdatedImage(this.iconPositions[f],i.getImage(f),h),this.patchUpdatedImage(this.patternPositions[f],i.getImage(f),h)}patchUpdatedImage(i,h,f){if(!i||!h||i.version===h.version)return;i.version=h.version;const[v,w]=i.tl;f.update(h.data,void 0,{x:v,y:w})}}var nc;On("ImagePosition",vm),On("ImageAtlas",Ov),l.al=void 0,(nc=l.al||(l.al={}))[nc.none=0]="none",nc[nc.horizontal=1]="horizontal",nc[nc.vertical=2]="vertical",nc[nc.horizontalOnly=3]="horizontalOnly";const _m=-17;class mp{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(i,h,f){const v=new mp;return v.scale=i||1,v.fontStack=h,v.verticalAlign=f||"bottom",v}static forImage(i,h){const f=new mp;return f.imageName=i,f.verticalAlign=h||"bottom",f}}class qd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,h){const f=new qd;for(let v=0;v<i.sections.length;v++){const w=i.sections[v];w.image?f.addImageSection(w):f.addTextSection(w,h)}return f}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let h="";for(let f=0;f<i.length;f++){const v=i.charCodeAt(f+1)||null,w=i.charCodeAt(f-1)||null;h+=v&&rm(v)&&!pp[i[f+1]]||w&&rm(w)&&!pp[i[f-1]]||!pp[i[f]]?i[f]:pp[i[f]]}return h}(this.text)}trim(){let i=0;for(let f=0;f<this.text.length&&xm[this.text.charCodeAt(f)];f++)i++;let h=this.text.length;for(let f=this.text.length-1;f>=0&&f>=i&&xm[this.text.charCodeAt(f)];f--)h--;this.text=this.text.substring(i,h),this.sectionIndex=this.sectionIndex.slice(i,h)}substring(i,h){const f=new qd;return f.text=this.text.substring(i,h),f.sectionIndex=this.sectionIndex.slice(i,h),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,h)=>Math.max(i,this.sections[h].scale),0)}getMaxImageSize(i){let h=0,f=0;for(let v=0;v<this.length();v++){const w=this.getSection(v);if(w.imageName){const M=i[w.imageName];if(!M)continue;const P=M.displaySize;h=Math.max(h,P[0]),f=Math.max(f,P[1])}}return{maxImageWidth:h,maxImageHeight:f}}addTextSection(i,h){this.text+=i.text,this.sections.push(mp.forText(i.scale,i.fontStack||h,i.verticalAlign));const f=this.sections.length-1;for(let v=0;v<i.text.length;++v)this.sectionIndex.push(f)}addImageSection(i){const h=i.image?i.image.name:"";if(h.length===0)return void Tt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(mp.forImage(h,i.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Tt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function bm(u,i,h,f,v,w,M,P,z,V,Z,J,st,lt,dt){const At=qd.fromFeature(u,v);let Et;J===l.al.vertical&&At.verticalizePunctuation();const{processBidirectionalText:Nt,processStyledBidirectionalText:ce}=pl;if(Nt&&At.sections.length===1){Et=[];const It=Nt(At.toString(),g0(At,V,w,i,f,lt));for(const Yt of It){const Oe=new qd;Oe.text=Yt,Oe.sections=At.sections;for(let sn=0;sn<Yt.length;sn++)Oe.sectionIndex.push(0);Et.push(Oe)}}else if(ce){Et=[];const It=ce(At.text,At.sectionIndex,g0(At,V,w,i,f,lt));for(const Yt of It){const Oe=new qd;Oe.text=Yt[0],Oe.sectionIndex=Yt[1],Oe.sections=At.sections,Et.push(Oe)}}else Et=function(It,Yt){const Oe=[],sn=It.text;let Ne=0;for(const He of Yt)Oe.push(It.substring(Ne,He)),Ne=He;return Ne<sn.length&&Oe.push(It.substring(Ne,sn.length)),Oe}(At,g0(At,V,w,i,f,lt));const qt=[],at={positionedLines:qt,text:At.toString(),top:Z[1],bottom:Z[1],left:Z[0],right:Z[0],writingMode:J,iconsInText:!1,verticalizable:!1};return function(It,Yt,Oe,sn,Ne,He,pn,ln,vn,Xe,jn,cr){let er=0,$n=0,Vr=0,$i=0;const xo=ln==="right"?1:ln==="left"?0:.5,ia=_o/cr;let oa=0;for(const Ni of Ne){Ni.trim();const Po=Ni.getMaxScale(),qo={positionedGlyphs:[],lineOffset:0};It.positionedLines[oa]=qo;const ko=qo.positionedGlyphs;let _a=0;if(!Ni.length()){$n+=He,++oa;continue}const Ws=vx(sn,Ni,ia);for(let ns=0;ns<Ni.length();ns++){const Ao=Ni.getSection(ns),Ro=Ni.getSectionIndex(ns),Do=Ni.getCharCode(ns),lo=Vv(vn,jn,Do);let Si;if(Ao.imageName){if(It.iconsInText=!0,Ao.scale=Ao.scale*ia,Si=_x(Ao,lo,Po,Ws,sn),!Si)continue;_a=Math.max(_a,Si.imageOffset)}else if(Si=Uv(Ao,Do,lo,Ws,Yt,Oe),!Si)continue;const{rect:ic,metrics:tf,baselineOffset:oc}=Si;ko.push({glyph:Do,imageName:Ao.imageName,x:er,y:$n+oc+_m,vertical:lo,scale:Ao.scale,fontStack:Ao.fontStack,sectionIndex:Ro,metrics:tf,rect:ic}),lo?(It.verticalizable=!0,er+=(Ao.imageName?tf.advance:_o)*Ao.scale+Xe):er+=tf.advance*Ao.scale+Xe}ko.length!==0&&(Vr=Math.max(er-Xe,Vr),bx(ko,0,ko.length-1,xo)),er=0,qo.lineOffset=Math.max(_a,(Po-1)*_o);const Lo=He*Po+_a;$n+=Lo,$i=Math.max(Lo,$i),++oa}const{horizontalAlign:es,verticalAlign:Wo}=y0(pn);(function(Ni,Po,qo,ko,_a,Ws,Lo,ns,Ao){const Ro=(Po-qo)*_a;let Do=0;Do=Ws!==Lo?-ns*ko-_m:-ko*Ao*Lo+.5*Lo;for(const lo of Ni)for(const Si of lo.positionedGlyphs)Si.x+=Ro,Si.y+=Do})(It.positionedLines,xo,es,Wo,Vr,$i,He,$n,Ne.length),It.top+=-Wo*$n,It.bottom=It.top+$n,It.left+=-es*Vr,It.right=It.left+Vr}(at,i,h,f,Et,M,P,z,J,V,st,dt),!function(It){for(const Yt of It)if(Yt.positionedGlyphs.length!==0)return!1;return!0}(qt)&&at}const xm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},mx={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},gx={40:!0};function zv(u,i,h,f,v,w){if(i.imageName){const M=f[i.imageName];return M?M.displaySize[0]*i.scale*_o/w+v:0}{const M=h[i.fontStack],P=M&&M[u];return P?P.metrics.advance*i.scale+v:0}}function Fv(u,i,h,f){const v=Math.pow(u-i,2);return f?u<i?v/2:2*v:v+Math.abs(h)*h}function yx(u,i,h){let f=0;return u===10&&(f-=1e4),h&&(f+=150),u!==40&&u!==65288||(f+=50),i!==41&&i!==65289||(f+=50),f}function Bv(u,i,h,f,v,w){let M=null,P=Fv(i,h,v,w);for(const z of f){const V=Fv(i-z.x,h,v,w)+z.badness;V<=P&&(M=z,P=V)}return{index:u,x:i,priorBreak:M,badness:P}}function Nv(u){return u?Nv(u.priorBreak).concat(u.index):[]}function g0(u,i,h,f,v,w){if(!u)return[];const M=[],P=function(J,st,lt,dt,At,Et){let Nt=0;for(let ce=0;ce<J.length();ce++){const qt=J.getSection(ce);Nt+=zv(J.getCharCode(ce),qt,dt,At,st,Et)}return Nt/Math.max(1,Math.ceil(Nt/lt))}(u,i,h,f,v,w),z=u.text.indexOf("​")>=0;let V=0;for(let J=0;J<u.length();J++){const st=u.getSection(J),lt=u.getCharCode(J);if(xm[lt]||(V+=zv(lt,st,f,v,i,w)),J<u.length()-1){const dt=!((Z=lt)<11904)&&(!!Ar["CJK Compatibility Forms"](Z)||!!Ar["CJK Compatibility"](Z)||!!Ar["CJK Strokes"](Z)||!!Ar["CJK Symbols and Punctuation"](Z)||!!Ar["Enclosed CJK Letters and Months"](Z)||!!Ar["Halfwidth and Fullwidth Forms"](Z)||!!Ar["Ideographic Description Characters"](Z)||!!Ar["Vertical Forms"](Z)||nm.test(String.fromCodePoint(Z)));(mx[lt]||dt||st.imageName||J!==u.length()-2&&gx[u.getCharCode(J+1)])&&M.push(Bv(J+1,V,P,M,yx(lt,u.getCharCode(J+1),dt&&z),!1))}}var Z;return Nv(Bv(u.length(),V,P,M,0,!0))}function y0(u){let i=.5,h=.5;switch(u){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:i,verticalAlign:h}}function vx(u,i,h){const f=i.getMaxScale()*_o,{maxImageWidth:v,maxImageHeight:w}=i.getMaxImageSize(u),M=Math.max(f,w*h);return{verticalLineContentWidth:Math.max(f,v*h),horizontalLineContentHeight:M}}function jv(u){switch(u){case"top":return 0;case"center":return .5;default:return 1}}function Vv(u,i,h){return!(u===l.al.horizontal||!i&&!Ld(h)||i&&(xm[h]||(f=h,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function Uv(u,i,h,f,v,w){const M=w[u.fontStack],P=function(V,Z,J,st){if(V&&V.rect)return V;const lt=Z[J.fontStack],dt=lt&&lt[st];return dt?{rect:null,metrics:dt.metrics}:null}(M&&M[i],v,u,i);if(P===null)return null;let z;if(h)z=f.verticalLineContentWidth-u.scale*_o;else{const V=jv(u.verticalAlign);z=(f.horizontalLineContentHeight-u.scale*_o)*V}return{rect:P.rect,metrics:P.metrics,baselineOffset:z}}function _x(u,i,h,f,v){const w=v[u.imageName];if(!w)return null;const M=w.paddedRect,P=w.displaySize,z={width:P[0],height:P[1],left:Xa,top:-3,advance:i?P[1]:P[0]};let V;if(i)V=f.verticalLineContentWidth-P[1]*u.scale;else{const Z=jv(u.verticalAlign);V=(f.horizontalLineContentHeight-P[1]*u.scale)*Z}return{rect:M,metrics:z,baselineOffset:V,imageOffset:(i?P[0]:P[1])*u.scale-_o*h}}function bx(u,i,h,f){if(f===0)return;const v=u[h],w=(u[h].x+v.metrics.advance*v.scale)*f;for(let M=i;M<=h;M++)u[M].x-=w}function xx(u,i,h){const{horizontalAlign:f,verticalAlign:v}=y0(h),w=i[0]-u.displaySize[0]*f,M=i[1]-u.displaySize[1]*v;return{image:u,top:M,bottom:M+u.displaySize[1],left:w,right:w+u.displaySize[0]}}function Hv(u){var i,h;let f=u.left,v=u.top,w=u.right-f,M=u.bottom-v;const P=(i=u.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",z=(h=u.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",V=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(z==="proportional"){if(P==="stretchOnly"&&w/M<V||P==="proportional"){const Z=Math.ceil(M*V);f*=Z/w,w=Z}}else if(P==="proportional"&&z==="stretchOnly"&&V!==0&&w/M>V){const Z=Math.ceil(w/V);v*=Z/M,M=Z}return{x1:f,y1:v,x2:f+w,y2:v+M}}function gp(u,i,h,f,v,w){const M=u.image;let P;if(M.content){const Et=M.content,Nt=M.pixelRatio||1;P=[Et[0]/Nt,Et[1]/Nt,M.displaySize[0]-Et[2]/Nt,M.displaySize[1]-Et[3]/Nt]}const z=i.left*w,V=i.right*w;let Z,J,st,lt;h==="width"||h==="both"?(lt=v[0]+z-f[3],J=v[0]+V+f[1]):(lt=v[0]+(z+V-M.displaySize[0])/2,J=lt+M.displaySize[0]);const dt=i.top*w,At=i.bottom*w;return h==="height"||h==="both"?(Z=v[1]+dt-f[0],st=v[1]+At+f[2]):(Z=v[1]+(dt+At-M.displaySize[1])/2,st=Z+M.displaySize[1]),{image:M,top:Z,right:J,bottom:st,left:lt,collisionPadding:P}}const yp=255,Vc=128,fh=yp*Vc;function Gv(u,i){const{expression:h}=i;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new li(u+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:v}=h;let w=0;for(;w<f.length&&f[w]<=u;)w++;w=Math.max(0,w-1);let M=w;for(;M<f.length&&f[M]<u+1;)M++;M=Math.min(f.length-1,M);const P=f[w],z=f[M];return h.kind==="composite"?{kind:"composite",minZoom:P,maxZoom:z,interpolationType:v}:{kind:"camera",minZoom:P,maxZoom:z,minSize:h.evaluate(new li(P)),maxSize:h.evaluate(new li(z)),interpolationType:v}}}function v0(u,i,h){let f="never";const v=u.get(i);return v?f=v:u.get(h)&&(f="always"),f}const Ax=dp.VectorTileFeature.types,wx=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Am(u,i,h,f,v,w,M,P,z,V,Z,J,st){const lt=P?Math.min(fh,Math.round(P[0])):0,dt=P?Math.min(fh,Math.round(P[1])):0;u.emplaceBack(i,h,Math.round(32*f),Math.round(32*v),w,M,(lt<<1)+(z?1:0),dt,16*V,16*Z,256*J,256*st)}function _0(u,i,h){u.emplaceBack(i.x,i.y,h),u.emplaceBack(i.x,i.y,h),u.emplaceBack(i.x,i.y,h),u.emplaceBack(i.x,i.y,h)}function Cx(u){for(const i of u.sections)if(Bg(i.text))return!0;return!1}class b0{constructor(i){this.layoutVertexArray=new De,this.indexArray=new yn,this.programConfigurations=i,this.segments=new pr,this.dynamicLayoutVertexArray=new Ee,this.opacityVertexArray=new Qe,this.hasVisibleVertices=!1,this.placedSymbolArray=new G}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,h,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,ax.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,sx.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,wx,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}On("SymbolBuffers",b0);class Kd{constructor(i,h,f){this.layoutVertexArray=new i,this.layoutAttributes=h,this.indexArray=new f,this.segments=new pr,this.collisionVertexArray=new In}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,lx.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}On("CollisionBuffers",Kd);class Yd{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(M=>M.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Gv(this.zoom,h["text-size"]),this.iconSizeData=Gv(this.zoom,h["icon-size"]);const f=this.layers[0].layout,v=f.get("symbol-sort-key"),w=f.get("symbol-z-order");this.canOverlap=v0(f,"text-overlap","text-allow-overlap")!=="never"||v0(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(M=>l.al[M])),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.sourceID=i.sourceID}createArrays(){this.text=new b0(new Fc(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new b0(new Fc(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new rt,this.lineVertexArray=new ft,this.symbolInstances=new nt,this.textAnchorOffsets=new Ot}calculateGlyphDependencies(i,h,f,v,w){for(let M=0;M<i.length;M++)if(h[i.charCodeAt(M)]=!0,(f||v)&&w){const P=pp[i.charAt(M)];P&&(h[P.charCodeAt(0)]=!0)}}populate(i,h,f){const v=this.layers[0],w=v.layout,M=w.get("text-font"),P=w.get("text-field"),z=w.get("icon-image"),V=(P.value.kind!=="constant"||P.value.value instanceof dn&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),Z=z.value.kind!=="constant"||!!z.value.value||Object.keys(z.parameters).length>0,J=w.get("symbol-sort-key");if(this.features=[],!V&&!Z)return;const st=h.iconDependencies,lt=h.glyphDependencies,dt=h.availableImages,At=new li(this.zoom);for(const{feature:Et,id:Nt,index:ce,sourceLayerIndex:qt}of i){const at=v._featureFilter.needGeometry,It=Gs(Et,at);if(!v._featureFilter.filter(At,It,f))continue;let Yt,Oe;if(at||(It.geometry=Ya(Et)),V){const Ne=v.getValueAndResolveTokens("text-field",It,f,dt),He=dn.factory(Ne),pn=this.hasRTLText=this.hasRTLText||Cx(He);(!pn||pl.getRTLTextPluginStatus()==="unavailable"||pn&&pl.isParsed())&&(Yt=ux(He,v,It))}if(Z){const Ne=v.getValueAndResolveTokens("icon-image",It,f,dt);Oe=Ne instanceof Zr?Ne:Zr.fromString(Ne)}if(!Yt&&!Oe)continue;const sn=this.sortFeaturesByKey?J.evaluate(It,{},f):void 0;if(this.features.push({id:Nt,text:Yt,icon:Oe,index:ce,sourceLayerIndex:qt,geometry:It.geometry,properties:Et.properties,type:Ax[Et.type],sortKey:sn}),Oe&&(st[Oe.name]=!0),Yt){const Ne=M.evaluate(It,{},f).join(","),He=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.al.vertical)>=0;for(const pn of Yt.sections)if(pn.image)st[pn.image.name]=!0;else{const ln=kd(Yt.toString()),vn=pn.fontStack||Ne,Xe=lt[vn]=lt[vn]||{};this.calculateGlyphDependencies(pn.text,Xe,He,this.allowVerticalPlacement,ln)}}}w.get("symbol-placement")==="line"&&(this.features=function(Et){const Nt={},ce={},qt=[];let at=0;function It(Ne){qt.push(Et[Ne]),at++}function Yt(Ne,He,pn){const ln=ce[Ne];return delete ce[Ne],ce[He]=ln,qt[ln].geometry[0].pop(),qt[ln].geometry[0]=qt[ln].geometry[0].concat(pn[0]),ln}function Oe(Ne,He,pn){const ln=Nt[He];return delete Nt[He],Nt[Ne]=ln,qt[ln].geometry[0].shift(),qt[ln].geometry[0]=pn[0].concat(qt[ln].geometry[0]),ln}function sn(Ne,He,pn){const ln=pn?He[0][He[0].length-1]:He[0][0];return`${Ne}:${ln.x}:${ln.y}`}for(let Ne=0;Ne<Et.length;Ne++){const He=Et[Ne],pn=He.geometry,ln=He.text?He.text.toString():null;if(!ln){It(Ne);continue}const vn=sn(ln,pn),Xe=sn(ln,pn,!0);if(vn in ce&&Xe in Nt&&ce[vn]!==Nt[Xe]){const jn=Oe(vn,Xe,pn),cr=Yt(vn,Xe,qt[jn].geometry);delete Nt[vn],delete ce[Xe],ce[sn(ln,qt[cr].geometry,!0)]=cr,qt[jn].geometry=null}else vn in ce?Yt(vn,Xe,pn):Xe in Nt?Oe(vn,Xe,pn):(It(Ne),Nt[vn]=at-1,ce[Xe]=at-1)}return qt.filter(Ne=>Ne.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Et,Nt)=>Et.sortKey-Nt.sortKey)}update(i,h,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,h,this.layers,f),this.icon.programConfigurations.updatePaintArrays(i,h,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,h){const f=this.lineVertexArray.length;if(i.segment!==void 0){let v=i.dist(h[i.segment+1]),w=i.dist(h[i.segment]);const M={};for(let P=i.segment+1;P<h.length;P++)M[P]={x:h[P].x,y:h[P].y,tileUnitDistanceFromAnchor:v},P<h.length-1&&(v+=h[P+1].dist(h[P]));for(let P=i.segment||0;P>=0;P--)M[P]={x:h[P].x,y:h[P].y,tileUnitDistanceFromAnchor:w},P>0&&(w+=h[P-1].dist(h[P]));for(let P=0;P<h.length;P++){const z=M[P];this.lineVertexArray.emplaceBack(z.x,z.y,z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(i,h,f,v,w,M,P,z,V,Z,J,st){const lt=i.indexArray,dt=i.layoutVertexArray,At=i.segments.prepareSegment(4*h.length,dt,lt,this.canOverlap?M.sortKey:void 0),Et=this.glyphOffsetArray.length,Nt=At.vertexLength,ce=this.allowVerticalPlacement&&P===l.al.vertical?Math.PI/2:0,qt=M.text&&M.text.sections;for(let at=0;at<h.length;at++){const{tl:It,tr:Yt,bl:Oe,br:sn,tex:Ne,pixelOffsetTL:He,pixelOffsetBR:pn,minFontScaleX:ln,minFontScaleY:vn,glyphOffset:Xe,isSDF:jn,sectionIndex:cr}=h[at],er=At.vertexLength,$n=Xe[1];Am(dt,z.x,z.y,It.x,$n+It.y,Ne.x,Ne.y,f,jn,He.x,He.y,ln,vn),Am(dt,z.x,z.y,Yt.x,$n+Yt.y,Ne.x+Ne.w,Ne.y,f,jn,pn.x,He.y,ln,vn),Am(dt,z.x,z.y,Oe.x,$n+Oe.y,Ne.x,Ne.y+Ne.h,f,jn,He.x,pn.y,ln,vn),Am(dt,z.x,z.y,sn.x,$n+sn.y,Ne.x+Ne.w,Ne.y+Ne.h,f,jn,pn.x,pn.y,ln,vn),_0(i.dynamicLayoutVertexArray,z,ce),lt.emplaceBack(er,er+2,er+1),lt.emplaceBack(er+1,er+2,er+3),At.vertexLength+=4,At.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Xe[0]),at!==h.length-1&&cr===h[at+1].sectionIndex||i.programConfigurations.populatePaintArrays(dt.length,M,M.index,{},st,qt&&qt[cr])}i.placedSymbolArray.emplaceBack(z.x,z.y,Et,this.glyphOffsetArray.length-Et,Nt,V,Z,z.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],P,0,!1,0,J)}_addCollisionDebugVertex(i,h,f,v,w,M){return h.emplaceBack(0,0),i.emplaceBack(f.x,f.y,v,w,Math.round(M.x),Math.round(M.y))}addCollisionDebugVertices(i,h,f,v,w,M,P){const z=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),V=z.vertexLength,Z=w.layoutVertexArray,J=w.collisionVertexArray,st=P.anchorX,lt=P.anchorY;this._addCollisionDebugVertex(Z,J,M,st,lt,new k(i,h)),this._addCollisionDebugVertex(Z,J,M,st,lt,new k(f,h)),this._addCollisionDebugVertex(Z,J,M,st,lt,new k(f,v)),this._addCollisionDebugVertex(Z,J,M,st,lt,new k(i,v)),z.vertexLength+=4;const dt=w.indexArray;dt.emplaceBack(V,V+1),dt.emplaceBack(V+1,V+2),dt.emplaceBack(V+2,V+3),dt.emplaceBack(V+3,V),z.primitiveLength+=4}addDebugCollisionBoxes(i,h,f,v){for(let w=i;w<h;w++){const M=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(M.x1,M.y1,M.x2,M.y2,v?this.textCollisionBox:this.iconCollisionBox,M.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Kd(Ge,kv.members,an),this.iconCollisionBox=new Kd(Ge,kv.members,an);for(let i=0;i<this.symbolInstances.length;i++){const h=this.symbolInstances.get(i);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(i,h,f,v,w,M,P,z,V){const Z={};for(let J=h;J<f;J++){const st=i.get(J);Z.textBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},Z.textFeatureIndex=st.featureIndex;break}for(let J=v;J<w;J++){const st=i.get(J);Z.verticalTextBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},Z.verticalTextFeatureIndex=st.featureIndex;break}for(let J=M;J<P;J++){const st=i.get(J);Z.iconBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},Z.iconFeatureIndex=st.featureIndex;break}for(let J=z;J<V;J++){const st=i.get(J);Z.verticalIconBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},Z.verticalIconFeatureIndex=st.featureIndex;break}return Z}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const f=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,h){const f=i.placedSymbolArray.get(h),v=f.vertexStartIndex+4*f.numGlyphs;for(let w=f.vertexStartIndex;w<v;w+=4)i.indexArray.emplaceBack(w,w+2,w+1),i.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(i),f=Math.cos(i),v=[],w=[],M=[];for(let P=0;P<this.symbolInstances.length;++P){M.push(P);const z=this.symbolInstances.get(P);v.push(0|Math.round(h*z.anchorX+f*z.anchorY)),w.push(z.featureIndex)}return M.sort((P,z)=>v[P]-v[z]||w[z]-w[P]),M}addToSortKeyRanges(i,h){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===h?f.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const f=this.symbolInstances.get(h);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((v,w,M)=>{v>=0&&M.indexOf(v)===w&&this.addIndicesForPlacedSymbol(this.text,v)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let x0,A0;On("SymbolBucket",Yd,{omit:["layers","collisionBoxArray","features","compareText"]}),Yd.MAX_GLYPHS=65535,Yd.addDynamicAttributes=_0;var vp={get paint(){return A0=A0||new ya({"icon-opacity":new lr(vt.paint_symbol["icon-opacity"]),"icon-color":new lr(vt.paint_symbol["icon-color"]),"icon-halo-color":new lr(vt.paint_symbol["icon-halo-color"]),"icon-halo-width":new lr(vt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new lr(vt.paint_symbol["icon-halo-blur"]),"icon-translate":new Yn(vt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Yn(vt.paint_symbol["icon-translate-anchor"]),"text-opacity":new lr(vt.paint_symbol["text-opacity"]),"text-color":new lr(vt.paint_symbol["text-color"],{runtimeType:eo,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new lr(vt.paint_symbol["text-halo-color"]),"text-halo-width":new lr(vt.paint_symbol["text-halo-width"]),"text-halo-blur":new lr(vt.paint_symbol["text-halo-blur"]),"text-translate":new Yn(vt.paint_symbol["text-translate"]),"text-translate-anchor":new Yn(vt.paint_symbol["text-translate-anchor"])})},get layout(){return x0=x0||new ya({"symbol-placement":new Yn(vt.layout_symbol["symbol-placement"]),"symbol-spacing":new Yn(vt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Yn(vt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new lr(vt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Yn(vt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Yn(vt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Yn(vt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Yn(vt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Yn(vt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Yn(vt.layout_symbol["icon-rotation-alignment"]),"icon-size":new lr(vt.layout_symbol["icon-size"]),"icon-text-fit":new Yn(vt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yn(vt.layout_symbol["icon-text-fit-padding"]),"icon-image":new lr(vt.layout_symbol["icon-image"]),"icon-rotate":new lr(vt.layout_symbol["icon-rotate"]),"icon-padding":new lr(vt.layout_symbol["icon-padding"]),"icon-keep-upright":new Yn(vt.layout_symbol["icon-keep-upright"]),"icon-offset":new lr(vt.layout_symbol["icon-offset"]),"icon-anchor":new lr(vt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Yn(vt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Yn(vt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Yn(vt.layout_symbol["text-rotation-alignment"]),"text-field":new lr(vt.layout_symbol["text-field"]),"text-font":new lr(vt.layout_symbol["text-font"]),"text-size":new lr(vt.layout_symbol["text-size"]),"text-max-width":new lr(vt.layout_symbol["text-max-width"]),"text-line-height":new Yn(vt.layout_symbol["text-line-height"]),"text-letter-spacing":new lr(vt.layout_symbol["text-letter-spacing"]),"text-justify":new lr(vt.layout_symbol["text-justify"]),"text-radial-offset":new lr(vt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Yn(vt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new lr(vt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new lr(vt.layout_symbol["text-anchor"]),"text-max-angle":new Yn(vt.layout_symbol["text-max-angle"]),"text-writing-mode":new Yn(vt.layout_symbol["text-writing-mode"]),"text-rotate":new lr(vt.layout_symbol["text-rotate"]),"text-padding":new Yn(vt.layout_symbol["text-padding"]),"text-keep-upright":new Yn(vt.layout_symbol["text-keep-upright"]),"text-transform":new lr(vt.layout_symbol["text-transform"]),"text-offset":new lr(vt.layout_symbol["text-offset"]),"text-allow-overlap":new Yn(vt.layout_symbol["text-allow-overlap"]),"text-overlap":new Yn(vt.layout_symbol["text-overlap"]),"text-ignore-placement":new Yn(vt.layout_symbol["text-ignore-placement"]),"text-optional":new Yn(vt.layout_symbol["text-optional"])})}};class w0{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Pr,this.defaultValue=i}evaluate(i){if(i.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(i.formattedSection))return h.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}On("FormatSectionOverride",w0,{omit:["defaultValue"]});class _p extends Ka{constructor(i){super(i,vp)}recalculate(i,h){if(super.recalculate(i,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const v=[];for(const w of f)v.indexOf(w)<0&&v.push(w);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,h,f,v){const w=this.layout.get(i).evaluate(h,{},f,v),M=this._unevaluatedLayout._values[i];return M.isDataDriven()||pa(M.value)||!w?w:function(P,z){return z.replace(/{([^{}]+)}/g,(V,Z)=>P&&Z in P?String(P[Z]):"")}(h.properties,w)}createBucket(i){return new Yd(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of vp.paint.overridableProperties){if(!_p.hasPaintOverride(this.layout,i))continue;const h=this.paint.get(i),f=new w0(h),v=new Lc(f,h.property.specification);let w=null;w=h.value.kind==="constant"||h.value.kind==="source"?new cl("source",v):new Ta("composite",v,h.value.zoomStops),this.paint._values[i]=new na(h.property,w,h.parameters)}}_handleOverridablePaintPropertyUpdate(i,h,f){return!(!this.layout||h.isDataDriven()||f.isDataDriven())&&_p.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,h){const f=i.get("text-field"),v=vp.paint.properties[h];let w=!1;const M=P=>{for(const z of P)if(v.overrides&&v.overrides.hasOverride(z))return void(w=!0)};if(f.value.kind==="constant"&&f.value.value instanceof dn)M(f.value.value.sections);else if(f.value.kind==="source"){const P=V=>{w||(V instanceof bi&&kn(V.value)===Pl?M(V.value.sections):V instanceof ua?M(V.sections):V.eachChild(P))},z=f.value;z._styleExpression&&P(z._styleExpression.expression)}return w}}let C0;var $v={get paint(){return C0=C0||new ya({"background-color":new Yn(vt.paint_background["background-color"]),"background-pattern":new vu(vt.paint_background["background-pattern"]),"background-opacity":new Yn(vt.paint_background["background-opacity"])})}};class Ix extends Ka{constructor(i){super(i,$v)}}let Zv;var Mx={get paint(){return Zv=Zv||new ya({"raster-opacity":new Yn(vt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Yn(vt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Yn(vt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Yn(vt.paint_raster["raster-brightness-max"]),"raster-saturation":new Yn(vt.paint_raster["raster-saturation"]),"raster-contrast":new Yn(vt.paint_raster["raster-contrast"]),"raster-resampling":new Yn(vt.paint_raster["raster-resampling"]),"raster-fade-duration":new Yn(vt.paint_raster["raster-fade-duration"])})}};class wm extends Ka{constructor(i){super(i,Mx)}}class Cm extends Ka{constructor(i){super(i,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Sx{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Ex={once:!0},bp=63710088e-1;class Mu{constructor(i,h){if(isNaN(i)||isNaN(h))throw new Error(`Invalid LngLat object: (${i}, ${h})`);if(this.lng=+i,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Mu(nn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const h=Math.PI/180,f=this.lat*h,v=i.lat*h,w=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((i.lng-this.lng)*h);return bp*Math.acos(Math.min(w,1))}static convert(i){if(i instanceof Mu)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Mu(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Mu(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Wv=2*Math.PI*bp;function qv(u){return Wv*Math.cos(u*Math.PI/180)}function Kv(u){return(180+u)/360}function Yv(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function Xv(u,i){return u/qv(i)}function I0(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function Qv(u,i){return u*qv(I0(i))}class xp{constructor(i,h,f=0){this.x=+i,this.y=+h,this.z=+f}static fromLngLat(i,h=0){const f=Mu.convert(i);return new xp(Kv(f.lng),Yv(f.lat),Xv(h,f.lat))}toLngLat(){return new Mu(360*this.x-180,I0(this.y))}toAltitude(){return Qv(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Wv*(i=I0(this.y),1/Math.cos(i*Math.PI/180));var i}}function Jv(u,i,h){var f=2*Math.PI*6378137/256/Math.pow(2,h);return[u*f-2*Math.PI*6378137/2,i*f-2*Math.PI*6378137/2]}class M0{constructor(i,h,f){if(!function(v,w,M){return!(v<0||v>25||M<0||M>=Math.pow(2,v)||w<0||w>=Math.pow(2,v))}(i,h,f))throw new Error(`x=${h}, y=${f}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=h,this.y=f,this.key=Fa(0,i,i,h,f)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,h,f){const v=(M=this.y,P=this.z,z=Jv(256*(w=this.x),256*(M=Math.pow(2,P)-M-1),P),V=Jv(256*(w+1),256*(M+1),P),z[0]+","+z[1]+","+V[0]+","+V[1]);var w,M,P,z,V;const Z=function(J,st,lt){let dt,At="";for(let Et=J;Et>0;Et--)dt=1<<Et-1,At+=(st&dt?1:0)+(lt&dt?2:0);return At}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,Z).replace(/{bbox-epsg-3857}/g,v)}isChildOf(i){const h=this.z-i.z;return h>0&&i.x===this.x>>h&&i.y===this.y>>h}getTilePoint(i){const h=Math.pow(2,this.z);return new k((i.x*h-this.x)*ae,(i.y*h-this.y)*ae)}toString(){return`${this.z}/${this.x}/${this.y}`}}class t_{constructor(i,h){this.wrap=i,this.canonical=h,this.key=Fa(i,h.z,h.z,h.x,h.y)}}class $s{constructor(i,h,f,v,w){if(this.terrainRttPosMatrix32f=null,i<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${f}`);this.overscaledZ=i,this.wrap=h,this.canonical=new M0(f,+v,+w),this.key=Fa(h,i,f,v,w)}clone(){return new $s(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-i;return i>this.canonical.z?new $s(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new $s(i,this.wrap,i,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(i,h){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-i;return i>this.canonical.z?Fa(this.wrap*+h,i,this.canonical.z,this.canonical.x,this.canonical.y):Fa(this.wrap*+h,i,i,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const h=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>h&&i.canonical.y===this.canonical.y>>h}children(i){if(this.overscaledZ>=i)return[new $s(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new $s(h,this.wrap,h,f,v),new $s(h,this.wrap,h,f+1,v),new $s(h,this.wrap,h,f,v+1),new $s(h,this.wrap,h,f+1,v+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new $s(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new $s(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new t_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new xp(i.x-this.wrap,i.y))}}function Fa(u,i,h,f,v){(u*=2)<0&&(u=-1*u-1);const w=1<<h;return(w*w*u+w*v+f).toString(36)+h.toString(36)+i.toString(36)}On("CanonicalTileID",M0),On("OverscaledTileID",$s,{omit:["terrainRttPosMatrix32f"]});class e_{constructor(i,h,f,v=1,w=1,M=1,P=0){if(this.uid=i,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Tt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const z=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=w,this.blueFactor=M,this.baseShift=P;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let V=0;V<z;V++)this.data[this._idx(-1,V)]=this.data[this._idx(0,V)],this.data[this._idx(z,V)]=this.data[this._idx(z-1,V)],this.data[this._idx(V,-1)]=this.data[this._idx(V,0)],this.data[this._idx(V,z)]=this.data[this._idx(V,z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(z,-1)]=this.data[this._idx(z-1,0)],this.data[this._idx(-1,z)]=this.data[this._idx(0,z-1)],this.data[this._idx(z,z)]=this.data[this._idx(z-1,z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let V=0;V<z;V++)for(let Z=0;Z<z;Z++){const J=this.get(V,Z);J>this.max&&(this.max=J),J<this.min&&(this.min=J)}}get(i,h){const f=new Uint8Array(this.data.buffer),v=4*this._idx(i,h);return this.unpack(f[v],f[v+1],f[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,h){if(i<-1||i>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(i+1)}unpack(i,h,f){return i*this.redFactor+h*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new vo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,h,f){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let v=h*this.dim,w=h*this.dim+this.dim,M=f*this.dim,P=f*this.dim+this.dim;switch(h){case-1:v=w-1;break;case 1:w=v+1}switch(f){case-1:M=P-1;break;case 1:P=M+1}const z=-h*this.dim,V=-f*this.dim;for(let Z=M;Z<P;Z++)for(let J=v;J<w;J++)this.data[this._idx(J,Z)]=i.data[this._idx(J+z,Z+V)]}}On("DEMData",e_);class n_{constructor(i){this._stringToNumber={},this._numberToString=[];for(let h=0;h<i.length;h++){const f=i[h];this._stringToNumber[f]=h,this._numberToString[h]=f}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class ph{constructor(i,h,f,v,w){this.type="Feature",this._vectorTileFeature=i,i._z=h,i._x=f,i._y=v,this.properties=i.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(i[h]=this[h]);return i}}class Er{constructor(i,h){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Yl(ae,16,0),this.grid3D=new Yl(ae,16,0),this.featureIndexArray=new Ft,this.promoteId=h}insert(i,h,f,v,w,M){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,w);const z=M?this.grid3D:this.grid;for(let V=0;V<h.length;V++){const Z=h[V],J=[1/0,1/0,-1/0,-1/0];for(let st=0;st<Z.length;st++){const lt=Z[st];J[0]=Math.min(J[0],lt.x),J[1]=Math.min(J[1],lt.y),J[2]=Math.max(J[2],lt.x),J[3]=Math.max(J[3],lt.y)}J[0]<ae&&J[1]<ae&&J[2]>=0&&J[3]>=0&&z.insert(P,J[0],J[1],J[2],J[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new dp.VectorTile(new p0(this.rawTileData)).layers,this.sourceLayerCoder=new n_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,h,f,v){this.loadVTLayers();const w=i.params,M=ae/i.tileSize/i.scale,P=Qu(w.filter),z=i.queryGeometry,V=i.queryPadding*M,Z=Qa(z),J=this.grid.query(Z.minX-V,Z.minY-V,Z.maxX+V,Z.maxY+V),st=Qa(i.cameraQueryGeometry),lt=this.grid3D.query(st.minX-V,st.minY-V,st.maxX+V,st.maxY+V,(Et,Nt,ce,qt)=>function(at,It,Yt,Oe,sn){for(const He of at)if(It<=He.x&&Yt<=He.y&&Oe>=He.x&&sn>=He.y)return!0;const Ne=[new k(It,Yt),new k(It,sn),new k(Oe,sn),new k(Oe,Yt)];if(at.length>2){for(const He of Ne)if(Nc(at,He))return!0}for(let He=0;He<at.length-1;He++)if(Vg(at[He],at[He+1],Ne))return!0;return!1}(i.cameraQueryGeometry,Et-V,Nt-V,ce+V,qt+V));for(const Et of lt)J.push(Et);J.sort(bo);const dt={};let At;for(let Et=0;Et<J.length;Et++){const Nt=J[Et];if(Nt===At)continue;At=Nt;const ce=this.featureIndexArray.get(Nt);let qt=null;this.loadMatchingFeature(dt,ce.bucketIndex,ce.sourceLayerIndex,ce.featureIndex,P,w.layers,w.availableImages,h,f,v,(at,It,Yt)=>(qt||(qt=Ya(at)),It.queryIntersectsFeature({queryGeometry:z,feature:at,featureState:Yt,geometry:qt,zoom:this.z,transform:i.transform,pixelsToTileUnits:M,pixelPosMatrix:i.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:i.getElevation})))}return dt}loadMatchingFeature(i,h,f,v,w,M,P,z,V,Z,J){const st=this.bucketLayerIDs[h];if(M&&!st.some(Et=>M.has(Et)))return;const lt=this.sourceLayerCoder.decode(f),dt=this.vtLayers[lt].feature(v);if(w.needGeometry){const Et=Gs(dt,!0);if(!w.filter(new li(this.tileID.overscaledZ),Et,this.tileID.canonical))return}else if(!w.filter(new li(this.tileID.overscaledZ),dt))return;const At=this.getId(dt,lt);for(let Et=0;Et<st.length;Et++){const Nt=st[Et];if(M&&!M.has(Nt))continue;const ce=z[Nt];if(!ce)continue;let qt={};At&&Z&&(qt=Z.getState(ce.sourceLayer||"_geojsonTileLayer",At));const at=be({},V[Nt]);at.paint=r_(at.paint,ce.paint,dt,qt,P),at.layout=r_(at.layout,ce.layout,dt,qt,P);const It=!J||J(dt,ce,qt);if(!It)continue;const Yt=new ph(dt,this.z,this.x,this.y,At);Yt.layer=at;let Oe=i[Nt];Oe===void 0&&(Oe=i[Nt]=[]),Oe.push({featureIndex:v,feature:Yt,intersectionZ:It})}}lookupSymbolFeatures(i,h,f,v,w,M,P,z){const V={};this.loadVTLayers();const Z=Qu(w);for(const J of i)this.loadMatchingFeature(V,f,v,J,Z,M,P,z,h);return V}hasLayer(i){for(const h of this.bucketLayerIDs)for(const f of h)if(i===f)return!0;return!1}getId(i,h){var f;let v=i.id;return this.promoteId&&(v=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((f=i.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(v=Number(i.properties.cluster_id))),v}}function r_(u,i,h,f,v){return xe(u,(w,M)=>{const P=i instanceof ga?i.get(M):null;return P&&P.evaluate?P.evaluate(h,f,v):P})}function Qa(u){let i=1/0,h=1/0,f=-1/0,v=-1/0;for(const w of u)i=Math.min(i,w.x),h=Math.min(h,w.y),f=Math.max(f,w.x),v=Math.max(v,w.y);return{minX:i,minY:h,maxX:f,maxY:v}}function bo(u,i){return i-u}function i_(u,i,h,f,v){const w=[];for(let M=0;M<u.length;M++){const P=u[M];let z;for(let V=0;V<P.length-1;V++){let Z=P[V],J=P[V+1];Z.x<i&&J.x<i||(Z.x<i?Z=new k(i,Z.y+(i-Z.x)/(J.x-Z.x)*(J.y-Z.y))._round():J.x<i&&(J=new k(i,Z.y+(i-Z.x)/(J.x-Z.x)*(J.y-Z.y))._round()),Z.y<h&&J.y<h||(Z.y<h?Z=new k(Z.x+(h-Z.y)/(J.y-Z.y)*(J.x-Z.x),h)._round():J.y<h&&(J=new k(Z.x+(h-Z.y)/(J.y-Z.y)*(J.x-Z.x),h)._round()),Z.x>=f&&J.x>=f||(Z.x>=f?Z=new k(f,Z.y+(f-Z.x)/(J.x-Z.x)*(J.y-Z.y))._round():J.x>=f&&(J=new k(f,Z.y+(f-Z.x)/(J.x-Z.x)*(J.y-Z.y))._round()),Z.y>=v&&J.y>=v||(Z.y>=v?Z=new k(Z.x+(v-Z.y)/(J.y-Z.y)*(J.x-Z.x),v)._round():J.y>=v&&(J=new k(Z.x+(v-Z.y)/(J.y-Z.y)*(J.x-Z.x),v)._round()),z&&Z.equals(z[z.length-1])||(z=[Z],w.push(z)),z.push(J)))))}}return w}On("FeatureIndex",Er,{omit:["rawTileData","sourceLayerCoder"]});class Ja extends k{constructor(i,h,f,v){super(i,h),this.angle=f,v!==void 0&&(this.segment=v)}clone(){return new Ja(this.x,this.y,this.angle,this.segment)}}function o_(u,i,h,f,v){if(i.segment===void 0||h===0)return!0;let w=i,M=i.segment+1,P=0;for(;P>-h/2;){if(M--,M<0)return!1;P-=u[M].dist(w),w=u[M]}P+=u[M].dist(u[M+1]),M++;const z=[];let V=0;for(;P<h/2;){const Z=u[M],J=u[M+1];if(!J)return!1;let st=u[M-1].angleTo(Z)-Z.angleTo(J);for(st=Math.abs((st+3*Math.PI)%(2*Math.PI)-Math.PI),z.push({distance:P,angleDelta:st}),V+=st;P-z[0].distance>f;)V-=z.shift().angleDelta;if(V>v)return!1;M++,P+=Z.dist(J)}return!0}function a_(u){let i=0;for(let h=0;h<u.length-1;h++)i+=u[h].dist(u[h+1]);return i}function s_(u,i,h){return u?.6*i*h:0}function l_(u,i){return Math.max(u?u.right-u.left:0,i?i.right-i.left:0)}function Tx(u,i,h,f,v,w){const M=s_(h,v,w),P=l_(h,f)*w;let z=0;const V=a_(u)/2;for(let Z=0;Z<u.length-1;Z++){const J=u[Z],st=u[Z+1],lt=J.dist(st);if(z+lt>V){const dt=(V-z)/lt,At=Br.number(J.x,st.x,dt),Et=Br.number(J.y,st.y,dt),Nt=new Ja(At,Et,st.angleTo(J),Z);return Nt._round(),!M||o_(u,Nt,P,M,i)?Nt:void 0}z+=lt}}function S0(u,i,h,f,v,w,M,P,z){const V=s_(f,w,M),Z=l_(f,v),J=Z*M,st=u[0].x===0||u[0].x===z||u[0].y===0||u[0].y===z;return i-J<i/4&&(i=J+i/4),c_(u,st?i/2*P%i:(Z/2+2*w)*M*P%i,i,V,h,J,st,!1,z)}function c_(u,i,h,f,v,w,M,P,z){const V=w/2,Z=a_(u);let J=0,st=i-h,lt=[];for(let dt=0;dt<u.length-1;dt++){const At=u[dt],Et=u[dt+1],Nt=At.dist(Et),ce=Et.angleTo(At);for(;st+h<J+Nt;){st+=h;const qt=(st-J)/Nt,at=Br.number(At.x,Et.x,qt),It=Br.number(At.y,Et.y,qt);if(at>=0&&at<z&&It>=0&&It<z&&st-V>=0&&st+V<=Z){const Yt=new Ja(at,It,ce,dt);Yt._round(),f&&!o_(u,Yt,w,f,v)||lt.push(Yt)}}J+=Nt}return P||lt.length||M||(lt=c_(u,J/2,h,f,v,w,M,!0,z)),lt}On("Anchor",Ja);const Zs=Xa;function E0(u,i,h,f){const v=[],w=u.image,M=w.pixelRatio,P=w.paddedRect.w-2*Zs,z=w.paddedRect.h-2*Zs;let V={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom};const Z=w.stretchX||[[0,P]],J=w.stretchY||[[0,z]],st=(Xe,jn)=>Xe+jn[1]-jn[0],lt=Z.reduce(st,0),dt=J.reduce(st,0),At=P-lt,Et=z-dt;let Nt=0,ce=lt,qt=0,at=dt,It=0,Yt=At,Oe=0,sn=Et;if(w.content&&f){const Xe=w.content,jn=Xe[2]-Xe[0],cr=Xe[3]-Xe[1];(w.textFitWidth||w.textFitHeight)&&(V=Hv(u)),Nt=qh(Z,0,Xe[0]),qt=qh(J,0,Xe[1]),ce=qh(Z,Xe[0],Xe[2]),at=qh(J,Xe[1],Xe[3]),It=Xe[0]-Nt,Oe=Xe[1]-qt,Yt=jn-ce,sn=cr-at}const Ne=V.x1,He=V.y1,pn=V.x2-Ne,ln=V.y2-He,vn=(Xe,jn,cr,er)=>{const $n=Gi(Xe.stretch-Nt,ce,pn,Ne),Vr=Ap(Xe.fixed-It,Yt,Xe.stretch,lt),$i=Gi(jn.stretch-qt,at,ln,He),xo=Ap(jn.fixed-Oe,sn,jn.stretch,dt),ia=Gi(cr.stretch-Nt,ce,pn,Ne),oa=Ap(cr.fixed-It,Yt,cr.stretch,lt),es=Gi(er.stretch-qt,at,ln,He),Wo=Ap(er.fixed-Oe,sn,er.stretch,dt),Ni=new k($n,$i),Po=new k(ia,$i),qo=new k(ia,es),ko=new k($n,es),_a=new k(Vr/M,xo/M),Ws=new k(oa/M,Wo/M),Lo=i*Math.PI/180;if(Lo){const Ro=Math.sin(Lo),Do=Math.cos(Lo),lo=[Do,-Ro,Ro,Do];Ni._matMult(lo),Po._matMult(lo),ko._matMult(lo),qo._matMult(lo)}const ns=Xe.stretch+Xe.fixed,Ao=jn.stretch+jn.fixed;return{tl:Ni,tr:Po,bl:ko,br:qo,tex:{x:w.paddedRect.x+Zs+ns,y:w.paddedRect.y+Zs+Ao,w:cr.stretch+cr.fixed-ns,h:er.stretch+er.fixed-Ao},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:_a,pixelOffsetBR:Ws,minFontScaleX:Yt/M/pn,minFontScaleY:sn/M/ln,isSDF:h}};if(f&&(w.stretchX||w.stretchY)){const Xe=Ki(Z,At,lt),jn=Ki(J,Et,dt);for(let cr=0;cr<Xe.length-1;cr++){const er=Xe[cr],$n=Xe[cr+1];for(let Vr=0;Vr<jn.length-1;Vr++)v.push(vn(er,jn[Vr],$n,jn[Vr+1]))}}else v.push(vn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:z+1}));return v}function qh(u,i,h){let f=0;for(const v of u)f+=Math.max(i,Math.min(h,v[1]))-Math.max(i,Math.min(h,v[0]));return f}function Ki(u,i,h){const f=[{fixed:-1,stretch:0}];for(const[v,w]of u){const M=f[f.length-1];f.push({fixed:v-M.stretch,stretch:M.stretch}),f.push({fixed:v-M.stretch,stretch:M.stretch+(w-v)})}return f.push({fixed:i+Zs,stretch:h}),f}function Gi(u,i,h,f){return u/i*h+f}function Ap(u,i,h,f){return u-i*h/f}class Im{constructor(i,h,f,v,w,M,P,z,V,Z){var J;if(this.boxStartIndex=i.length,V){let st=M.top,lt=M.bottom;const dt=M.collisionPadding;dt&&(st-=dt[1],lt+=dt[3]);let At=lt-st;At>0&&(At=Math.max(10,At),this.circleDiameter=At)}else{const st=!((J=M.image)===null||J===void 0)&&J.content&&(M.image.textFitWidth||M.image.textFitHeight)?Hv(M):{x1:M.left,y1:M.top,x2:M.right,y2:M.bottom};st.y1=st.y1*P-z[0],st.y2=st.y2*P+z[2],st.x1=st.x1*P-z[3],st.x2=st.x2*P+z[1];const lt=M.collisionPadding;if(lt&&(st.x1-=lt[0]*P,st.y1-=lt[1]*P,st.x2+=lt[2]*P,st.y2+=lt[3]*P),Z){const dt=new k(st.x1,st.y1),At=new k(st.x2,st.y1),Et=new k(st.x1,st.y2),Nt=new k(st.x2,st.y2),ce=Z*Math.PI/180;dt._rotate(ce),At._rotate(ce),Et._rotate(ce),Nt._rotate(ce),st.x1=Math.min(dt.x,At.x,Et.x,Nt.x),st.x2=Math.max(dt.x,At.x,Et.x,Nt.x),st.y1=Math.min(dt.y,At.y,Et.y,Nt.y),st.y2=Math.max(dt.y,At.y,Et.y,Nt.y)}i.emplaceBack(h.x,h.y,st.x1,st.y1,st.x2,st.y2,f,v,w)}this.boxEndIndex=i.length}}class Px{constructor(i=[],h=(f,v)=>f<v?-1:f>v?1:0){if(this.data=i,this.length=this.data.length,this.compare=h,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:h,compare:f}=this,v=h[i];for(;i>0;){const w=i-1>>1,M=h[w];if(f(v,M)>=0)break;h[i]=M,i=w}h[i]=v}_down(i){const{data:h,compare:f}=this,v=this.length>>1,w=h[i];for(;i<v;){let M=1+(i<<1);const P=M+1;if(P<this.length&&f(h[P],h[M])<0&&(M=P),f(h[M],w)>=0)break;h[i]=h[M],i=M}h[i]=w}}function kx(u,i=1,h=!1){let f=1/0,v=1/0,w=-1/0,M=-1/0;const P=u[0];for(let lt=0;lt<P.length;lt++){const dt=P[lt];(!lt||dt.x<f)&&(f=dt.x),(!lt||dt.y<v)&&(v=dt.y),(!lt||dt.x>w)&&(w=dt.x),(!lt||dt.y>M)&&(M=dt.y)}const z=Math.min(w-f,M-v);let V=z/2;const Z=new Px([],Lx);if(z===0)return new k(f,v);for(let lt=f;lt<w;lt+=z)for(let dt=v;dt<M;dt+=z)Z.push(new Xd(lt+V,dt+V,V,u));let J=function(lt){let dt=0,At=0,Et=0;const Nt=lt[0];for(let ce=0,qt=Nt.length,at=qt-1;ce<qt;at=ce++){const It=Nt[ce],Yt=Nt[at],Oe=It.x*Yt.y-Yt.x*It.y;At+=(It.x+Yt.x)*Oe,Et+=(It.y+Yt.y)*Oe,dt+=3*Oe}return new Xd(At/dt,Et/dt,0,lt)}(u),st=Z.length;for(;Z.length;){const lt=Z.pop();(lt.d>J.d||!J.d)&&(J=lt,h&&console.log("found best %d after %d probes",Math.round(1e4*lt.d)/1e4,st)),lt.max-J.d<=i||(V=lt.h/2,Z.push(new Xd(lt.p.x-V,lt.p.y-V,V,u)),Z.push(new Xd(lt.p.x+V,lt.p.y-V,V,u)),Z.push(new Xd(lt.p.x-V,lt.p.y+V,V,u)),Z.push(new Xd(lt.p.x+V,lt.p.y+V,V,u)),st+=4)}return h&&(console.log(`num probes: ${st}`),console.log(`best distance: ${J.d}`)),J.p}function Lx(u,i){return i.max-u.max}function Xd(u,i,h,f){this.p=new k(u,i),this.h=h,this.d=function(v,w){let M=!1,P=1/0;for(let z=0;z<w.length;z++){const V=w[z];for(let Z=0,J=V.length,st=J-1;Z<J;st=Z++){const lt=V[Z],dt=V[st];lt.y>v.y!=dt.y>v.y&&v.x<(dt.x-lt.x)*(v.y-lt.y)/(dt.y-lt.y)+lt.x&&(M=!M),P=Math.min(P,rp(v,lt,dt))}}return(M?1:-1)*Math.sqrt(P)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var ra;l.aB=void 0,(ra=l.aB||(l.aB={}))[ra.center=1]="center",ra[ra.left=2]="left",ra[ra.right=3]="right",ra[ra.top=4]="top",ra[ra.bottom=5]="bottom",ra[ra["top-left"]=6]="top-left",ra[ra["top-right"]=7]="top-right",ra[ra["bottom-left"]=8]="bottom-left",ra[ra["bottom-right"]=9]="bottom-right";const Su=7,Kh=Number.POSITIVE_INFINITY;function Mm(u,i){return i[1]!==Kh?function(h,f,v){let w=0,M=0;switch(f=Math.abs(f),v=Math.abs(v),h){case"top-right":case"top-left":case"top":M=v-Su;break;case"bottom-right":case"bottom-left":case"bottom":M=-v+Su}switch(h){case"top-right":case"bottom-right":case"right":w=-f;break;case"top-left":case"bottom-left":case"left":w=f}return[w,M]}(u,i[0],i[1]):function(h,f){let v=0,w=0;f<0&&(f=0);const M=f/Math.SQRT2;switch(h){case"top-right":case"top-left":w=M-Su;break;case"bottom-right":case"bottom-left":w=-M+Su;break;case"bottom":w=-f+Su;break;case"top":w=f-Su}switch(h){case"top-right":case"bottom-right":v=-M;break;case"top-left":case"bottom-left":v=M;break;case"left":v=f;break;case"right":v=-f}return[v,w]}(u,i[0])}function u_(u,i,h){var f;const v=u.layout,w=(f=v.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(i,{},h);if(w){const P=w.values,z=[];for(let V=0;V<P.length;V+=2){const Z=z[V]=P[V],J=P[V+1].map(st=>st*_o);Z.startsWith("top")?J[1]-=Su:Z.startsWith("bottom")&&(J[1]+=Su),z[V+1]=J}return new Kn(z)}const M=v.get("text-variable-anchor");if(M){let P;P=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(i,{},h)*_o,Kh]:v.get("text-offset").evaluate(i,{},h).map(V=>V*_o);const z=[];for(const V of M)z.push(V,Mm(V,P));return new Kn(z)}return null}function Sm(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Em(u,i,h,f,v,w,M,P,z,V,Z,J){let st=w.textMaxSize.evaluate(i,{});st===void 0&&(st=M);const lt=u.layers[0].layout,dt=lt.get("icon-offset").evaluate(i,{},Z),At=Yh(h.horizontal),Et=M/24,Nt=u.tilePixelRatio*Et,ce=u.tilePixelRatio*st/24,qt=u.tilePixelRatio*P,at=u.tilePixelRatio*lt.get("symbol-spacing"),It=lt.get("text-padding")*u.tilePixelRatio,Yt=function(cr,er,$n,Vr=1){const $i=cr.get("icon-padding").evaluate(er,{},$n),xo=$i&&$i.values;return[xo[0]*Vr,xo[1]*Vr,xo[2]*Vr,xo[3]*Vr]}(lt,i,Z,u.tilePixelRatio),Oe=lt.get("text-max-angle")/180*Math.PI,sn=lt.get("text-rotation-alignment")!=="viewport"&&lt.get("symbol-placement")!=="point",Ne=lt.get("icon-rotation-alignment")==="map"&&lt.get("symbol-placement")!=="point",He=lt.get("symbol-placement"),pn=at/2,ln=lt.get("icon-text-fit");let vn;f&&ln!=="none"&&(u.allowVerticalPlacement&&h.vertical&&(vn=gp(f,h.vertical,ln,lt.get("icon-text-fit-padding"),dt,Et)),At&&(f=gp(f,At,ln,lt.get("icon-text-fit-padding"),dt,Et)));const Xe=Z?J.line.getGranularityForZoomLevel(Z.z):1,jn=(cr,er)=>{er.x<0||er.x>=ae||er.y<0||er.y>=ae||function($n,Vr,$i,xo,ia,oa,es,Wo,Ni,Po,qo,ko,_a,Ws,Lo,ns,Ao,Ro,Do,lo,Si,ic,tf,oc,Dx){const ef=$n.addToLineVertexArray(Vr,$i);let Xh,nf,rf,of,p_=0,m_=0,g_=0,y_=0,R0=-1,D0=-1;const Eu={};let v_=$o("");if($n.allowVerticalPlacement&&xo.vertical){const xa=Wo.layout.get("text-rotate").evaluate(Si,{},oc)+90;rf=new Im(Ni,Vr,Po,qo,ko,xo.vertical,_a,Ws,Lo,xa),es&&(of=new Im(Ni,Vr,Po,qo,ko,es,Ao,Ro,Lo,xa))}if(ia){const xa=Wo.layout.get("icon-rotate").evaluate(Si,{}),rs=Wo.layout.get("icon-text-fit")!=="none",Qh=E0(ia,xa,tf,rs),qs=es?E0(es,xa,tf,rs):void 0;nf=new Im(Ni,Vr,Po,qo,ko,ia,Ao,Ro,!1,xa),p_=4*Qh.length;const Jh=$n.iconSizeData;let Uc=null;Jh.kind==="source"?(Uc=[Vc*Wo.layout.get("icon-size").evaluate(Si,{})],Uc[0]>fh&&Tt(`${$n.layerIds[0]}: Value for "icon-size" is >= ${yp}. Reduce your "icon-size".`)):Jh.kind==="composite"&&(Uc=[Vc*ic.compositeIconSizes[0].evaluate(Si,{},oc),Vc*ic.compositeIconSizes[1].evaluate(Si,{},oc)],(Uc[0]>fh||Uc[1]>fh)&&Tt(`${$n.layerIds[0]}: Value for "icon-size" is >= ${yp}. Reduce your "icon-size".`)),$n.addSymbols($n.icon,Qh,Uc,lo,Do,Si,l.al.none,Vr,ef.lineStartIndex,ef.lineLength,-1,oc),R0=$n.icon.placedSymbolArray.length-1,qs&&(m_=4*qs.length,$n.addSymbols($n.icon,qs,Uc,lo,Do,Si,l.al.vertical,Vr,ef.lineStartIndex,ef.lineLength,-1,oc),D0=$n.icon.placedSymbolArray.length-1)}const Pm=Object.keys(xo.horizontal);for(const xa of Pm){const rs=xo.horizontal[xa];if(!Xh){v_=$o(rs.text);const qs=Wo.layout.get("text-rotate").evaluate(Si,{},oc);Xh=new Im(Ni,Vr,Po,qo,ko,rs,_a,Ws,Lo,qs)}const Qh=rs.positionedLines.length===1;if(g_+=_s($n,Vr,rs,oa,Wo,Lo,Si,ns,ef,xo.vertical?l.al.horizontal:l.al.horizontalOnly,Qh?Pm:[xa],Eu,R0,ic,oc),Qh)break}xo.vertical&&(y_+=_s($n,Vr,xo.vertical,oa,Wo,Lo,Si,ns,ef,l.al.vertical,["vertical"],Eu,D0,ic,oc));const __=Xh?Xh.boxStartIndex:$n.collisionBoxArray.length,b_=Xh?Xh.boxEndIndex:$n.collisionBoxArray.length,Ox=rf?rf.boxStartIndex:$n.collisionBoxArray.length,zx=rf?rf.boxEndIndex:$n.collisionBoxArray.length,Fx=nf?nf.boxStartIndex:$n.collisionBoxArray.length,O0=nf?nf.boxEndIndex:$n.collisionBoxArray.length,Bx=of?of.boxStartIndex:$n.collisionBoxArray.length,Nx=of?of.boxEndIndex:$n.collisionBoxArray.length;let ac=-1;const ba=(xa,rs)=>xa&&xa.circleDiameter?Math.max(xa.circleDiameter,rs):rs;ac=ba(Xh,ac),ac=ba(rf,ac),ac=ba(nf,ac),ac=ba(of,ac);const km=ac>-1?1:0;km&&(ac*=Dx/_o),$n.glyphOffsetArray.length>=Yd.MAX_GLYPHS&&Tt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Si.sortKey!==void 0&&$n.addToSortKeyRanges($n.symbolInstances.length,Si.sortKey);const jx=u_(Wo,Si,oc),[Vx,Ux]=function(xa,rs){const Qh=xa.length,qs=rs==null?void 0:rs.values;if((qs==null?void 0:qs.length)>0)for(let Jh=0;Jh<qs.length;Jh+=2){const Uc=qs[Jh+1];xa.emplaceBack(l.aB[qs[Jh]],Uc[0],Uc[1])}return[Qh,xa.length]}($n.textAnchorOffsets,jx);$n.symbolInstances.emplaceBack(Vr.x,Vr.y,Eu.right>=0?Eu.right:-1,Eu.center>=0?Eu.center:-1,Eu.left>=0?Eu.left:-1,Eu.vertical||-1,R0,D0,v_,__,b_,Ox,zx,Fx,O0,Bx,Nx,Po,g_,y_,p_,m_,km,0,_a,ac,Vx,Ux)}(u,er,cr,h,f,v,vn,u.layers[0],u.collisionBoxArray,i.index,i.sourceLayerIndex,u.index,Nt,[It,It,It,It],sn,z,qt,Yt,Ne,dt,i,w,V,Z,M)};if(He==="line")for(const cr of i_(i.geometry,0,0,ae,ae)){const er=Iu(cr,Xe),$n=S0(er,at,Oe,h.vertical||At,f,24,ce,u.overscaling,ae);for(const Vr of $n)At&&Rx(u,At.text,pn,Vr)||jn(er,Vr)}else if(He==="line-center"){for(const cr of i.geometry)if(cr.length>1){const er=Iu(cr,Xe),$n=Tx(er,Oe,h.vertical||At,f,24,ce);$n&&jn(er,$n)}}else if(i.type==="Polygon")for(const cr of hu(i.geometry,0)){const er=kx(cr,16);jn(Iu(cr[0],Xe,!0),new Ja(er.x,er.y,0))}else if(i.type==="LineString")for(const cr of i.geometry){const er=Iu(cr,Xe);jn(er,new Ja(er[0].x,er[0].y,0))}else if(i.type==="Point")for(const cr of i.geometry)for(const er of cr)jn([er],new Ja(er.x,er.y,0))}function _s(u,i,h,f,v,w,M,P,z,V,Z,J,st,lt,dt){const At=function(ce,qt,at,It,Yt,Oe,sn,Ne){const He=It.layout.get("text-rotate").evaluate(Oe,{})*Math.PI/180,pn=[];for(const ln of qt.positionedLines)for(const vn of ln.positionedGlyphs){if(!vn.rect)continue;const Xe=vn.rect||{};let jn=px+1,cr=!0,er=1,$n=0;const Vr=(Yt||Ne)&&vn.vertical,$i=vn.metrics.advance*vn.scale/2;if(Ne&&qt.verticalizable&&($n=ln.lineOffset/2-(vn.imageName?-(_o-vn.metrics.width*vn.scale)/2:(vn.scale-1)*_o)),vn.imageName){const Ro=sn[vn.imageName];cr=Ro.sdf,er=Ro.pixelRatio,jn=Xa/er}const xo=Yt?[vn.x+$i,vn.y]:[0,0];let ia=Yt?[0,0]:[vn.x+$i+at[0],vn.y+at[1]-$n],oa=[0,0];Vr&&(oa=ia,ia=[0,0]);const es=vn.metrics.isDoubleResolution?2:1,Wo=(vn.metrics.left-jn)*vn.scale-$i+ia[0],Ni=(-vn.metrics.top-jn)*vn.scale+ia[1],Po=Wo+Xe.w/es*vn.scale/er,qo=Ni+Xe.h/es*vn.scale/er,ko=new k(Wo,Ni),_a=new k(Po,Ni),Ws=new k(Wo,qo),Lo=new k(Po,qo);if(Vr){const Ro=new k(-$i,$i-_m),Do=-Math.PI/2,lo=_o/2-$i,Si=new k(5-_m-lo,-(vn.imageName?lo:0)),ic=new k(...oa);ko._rotateAround(Do,Ro)._add(Si)._add(ic),_a._rotateAround(Do,Ro)._add(Si)._add(ic),Ws._rotateAround(Do,Ro)._add(Si)._add(ic),Lo._rotateAround(Do,Ro)._add(Si)._add(ic)}if(He){const Ro=Math.sin(He),Do=Math.cos(He),lo=[Do,-Ro,Ro,Do];ko._matMult(lo),_a._matMult(lo),Ws._matMult(lo),Lo._matMult(lo)}const ns=new k(0,0),Ao=new k(0,0);pn.push({tl:ko,tr:_a,bl:Ws,br:Lo,tex:Xe,writingMode:qt.writingMode,glyphOffset:xo,sectionIndex:vn.sectionIndex,isSDF:cr,pixelOffsetTL:ns,pixelOffsetBR:Ao,minFontScaleX:0,minFontScaleY:0})}return pn}(0,h,P,v,w,M,f,u.allowVerticalPlacement),Et=u.textSizeData;let Nt=null;Et.kind==="source"?(Nt=[Vc*v.layout.get("text-size").evaluate(M,{})],Nt[0]>fh&&Tt(`${u.layerIds[0]}: Value for "text-size" is >= ${yp}. Reduce your "text-size".`)):Et.kind==="composite"&&(Nt=[Vc*lt.compositeTextSizes[0].evaluate(M,{},dt),Vc*lt.compositeTextSizes[1].evaluate(M,{},dt)],(Nt[0]>fh||Nt[1]>fh)&&Tt(`${u.layerIds[0]}: Value for "text-size" is >= ${yp}. Reduce your "text-size".`)),u.addSymbols(u.text,At,Nt,P,w,M,V,i,z.lineStartIndex,z.lineLength,st,dt);for(const ce of Z)J[ce]=u.text.placedSymbolArray.length-1;return 4*At.length}function Yh(u){for(const i in u)return u[i];return null}function Rx(u,i,h,f){const v=u.compareText;if(i in v){const w=v[i];for(let M=w.length-1;M>=0;M--)if(f.dist(w[M])<h)return!0}else v[i]=[];return v[i].push(f),!1}const h_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class T0{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,f]=new Uint8Array(i,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=f>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const w=h_[15&f];if(!w)throw new Error("Unrecognized array type.");const[M]=new Uint16Array(i,2,1),[P]=new Uint32Array(i,4,1);return new T0(P,M,w,i)}constructor(i,h=64,f=Float64Array,v){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=f,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const w=h_.indexOf(this.ArrayType),M=2*i*this.ArrayType.BYTES_PER_ELEMENT,P=i*this.IndexArrayType.BYTES_PER_ELEMENT,z=(8-P%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${f}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+P+z,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+M+P+z),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+P+z,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=i)}add(i,h){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=i,this.coords[this._pos++]=h,f}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return P0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,h,f,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:M,nodeSize:P}=this,z=[0,w.length-1,0],V=[];for(;z.length;){const Z=z.pop()||0,J=z.pop()||0,st=z.pop()||0;if(J-st<=P){for(let Et=st;Et<=J;Et++){const Nt=M[2*Et],ce=M[2*Et+1];Nt>=i&&Nt<=f&&ce>=h&&ce<=v&&V.push(w[Et])}continue}const lt=st+J>>1,dt=M[2*lt],At=M[2*lt+1];dt>=i&&dt<=f&&At>=h&&At<=v&&V.push(w[lt]),(Z===0?i<=dt:h<=At)&&(z.push(st),z.push(lt-1),z.push(1-Z)),(Z===0?f>=dt:v>=At)&&(z.push(lt+1),z.push(J),z.push(1-Z))}return V}within(i,h,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:w,nodeSize:M}=this,P=[0,v.length-1,0],z=[],V=f*f;for(;P.length;){const Z=P.pop()||0,J=P.pop()||0,st=P.pop()||0;if(J-st<=M){for(let Et=st;Et<=J;Et++)Or(w[2*Et],w[2*Et+1],i,h)<=V&&z.push(v[Et]);continue}const lt=st+J>>1,dt=w[2*lt],At=w[2*lt+1];Or(dt,At,i,h)<=V&&z.push(v[lt]),(Z===0?i-f<=dt:h-f<=At)&&(P.push(st),P.push(lt-1),P.push(1-Z)),(Z===0?i+f>=dt:h+f>=At)&&(P.push(lt+1),P.push(J),P.push(1-Z))}return z}}function P0(u,i,h,f,v,w){if(v-f<=h)return;const M=f+v>>1;d_(u,i,M,f,v,w),P0(u,i,h,f,M-1,1-w),P0(u,i,h,M+1,v,1-w)}function d_(u,i,h,f,v,w){for(;v>f;){if(v-f>600){const V=v-f+1,Z=h-f+1,J=Math.log(V),st=.5*Math.exp(2*J/3),lt=.5*Math.sqrt(J*st*(V-st)/V)*(Z-V/2<0?-1:1);d_(u,i,h,Math.max(f,Math.floor(h-Z*st/V+lt)),Math.min(v,Math.floor(h+(V-Z)*st/V+lt)),w)}const M=i[2*h+w];let P=f,z=v;for(Qd(u,i,f,h),i[2*v+w]>M&&Qd(u,i,f,v);P<z;){for(Qd(u,i,P,z),P++,z--;i[2*P+w]<M;)P++;for(;i[2*z+w]>M;)z--}i[2*f+w]===M?Qd(u,i,f,z):(z++,Qd(u,i,z,v)),z<=h&&(f=z+1),h<=z&&(v=z-1)}}function Qd(u,i,h,f){rc(u,h,f),rc(i,2*h,2*f),rc(i,2*h+1,2*f+1)}function rc(u,i,h){const f=u[i];u[i]=u[h],u[h]=f}function Or(u,i,h,f){const v=u-h,w=i-f;return v*v+w*w}var Tm;l.cm=void 0,(Tm=l.cm||(l.cm={})).create="create",Tm.load="load",Tm.fullLoad="fullLoad";let ts=null,Jd=[];const k0=1e3/60,ci="loadTime",L0="fullLoadTime",f_={mark(u){performance.mark(u)},frame(u){const i=u;ts!=null&&Jd.push(i-ts),ts=i},clearMetrics(){ts=null,Jd=[],performance.clearMeasures(ci),performance.clearMeasures(L0);for(const u in l.cm)performance.clearMarks(l.cm[u])},getPerformanceMetrics(){performance.measure(ci,l.cm.create,l.cm.load),performance.measure(L0,l.cm.create,l.cm.fullLoad);const u=performance.getEntriesByName(ci)[0].duration,i=performance.getEntriesByName(L0)[0].duration,h=Jd.length,f=1/(Jd.reduce((w,M)=>w+M,0)/h/1e3),v=Jd.filter(w=>w>k0).reduce((w,M)=>w+(M-k0)/k0,0);return{loadTime:u,fullLoadTime:i,fps:f,percentDroppedFrames:v/(h+v)*100,totalFrames:h}}};l.$=xp,l.A=tt,l.B=Br,l.C=li,l.D=Yn,l.E=kt,l.F=qf,l.G=function(u){if(Pt==null){const i=u.navigator?u.navigator.userAgent:null;Pt=!!u.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Pt},l.H=class{constructor(u,i){this.target=u,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Sx(()=>this.process()),this.subscription=Ut(this.target,"message",h=>this.receive(h),!1),this.globalScope=Rt(self)?u:window}registerMessageHandler(u,i){this.messageHandlers[u]=i}sendAsync(u,i){return new Promise((h,f)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),w=i?Ut(i.signal,"abort",()=>{w==null||w.unsubscribe(),delete this.resolveRejects[v];const z={id:v,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(z)},Ex):null;this.resolveRejects[v]={resolve:z=>{w==null||w.unsubscribe(),h(z)},reject:z=>{w==null||w.unsubscribe(),f(z)}};const M=[],P=Object.assign(Object.assign({},u),{id:v,sourceMapId:this.mapId,origin:location.origin,data:Nh(u.data,M)});this.target.postMessage(P,{transfer:M})})}receive(u){const i=u.data,h=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[h];const f=this.abortControllers[h];return delete this.abortControllers[h],void(f&&f.abort())}if(Rt(self)||i.mustQueue)return this.tasks[h]=i,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,i)}}process(){if(this.taskQueue.length===0)return;const u=this.taskQueue.shift(),i=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(u,i)}processTask(u,i){return o(this,void 0,void 0,function*(){if(i.type==="<response>"){const v=this.resolveRejects[u];return delete this.resolveRejects[u],v?void(i.error?v.reject(yu(i.error)):v.resolve(yu(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=yu(i.data),f=new AbortController;this.abortControllers[u]=f;try{const v=yield this.messageHandlers[i.type](i.sourceMapId,h,f);this.completeTask(u,null,v)}catch(v){this.completeTask(u,v)}})}completeTask(u,i,h){const f=[];delete this.abortControllers[u];const v={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?Nh(i):null,data:Nh(h,f)};this.target.postMessage(v,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.I=vm,l.J=ve,l.K=function(){var u=new tt(16);return tt!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},l.L=function(u,i,h){var f,v,w,M,P,z,V,Z,J,st,lt,dt,At=h[0],Et=h[1],Nt=h[2];return i===u?(u[12]=i[0]*At+i[4]*Et+i[8]*Nt+i[12],u[13]=i[1]*At+i[5]*Et+i[9]*Nt+i[13],u[14]=i[2]*At+i[6]*Et+i[10]*Nt+i[14],u[15]=i[3]*At+i[7]*Et+i[11]*Nt+i[15]):(v=i[1],w=i[2],M=i[3],P=i[4],z=i[5],V=i[6],Z=i[7],J=i[8],st=i[9],lt=i[10],dt=i[11],u[0]=f=i[0],u[1]=v,u[2]=w,u[3]=M,u[4]=P,u[5]=z,u[6]=V,u[7]=Z,u[8]=J,u[9]=st,u[10]=lt,u[11]=dt,u[12]=f*At+P*Et+J*Nt+i[12],u[13]=v*At+z*Et+st*Nt+i[13],u[14]=w*At+V*Et+lt*Nt+i[14],u[15]=M*At+Z*Et+dt*Nt+i[15]),u},l.M=function(u,i,h){var f=h[0],v=h[1],w=h[2];return u[0]=i[0]*f,u[1]=i[1]*f,u[2]=i[2]*f,u[3]=i[3]*f,u[4]=i[4]*v,u[5]=i[5]*v,u[6]=i[6]*v,u[7]=i[7]*v,u[8]=i[8]*w,u[9]=i[9]*w,u[10]=i[10]*w,u[11]=i[11]*w,u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15],u},l.N=function(u,i,h){var f=i[0],v=i[1],w=i[2],M=i[3],P=i[4],z=i[5],V=i[6],Z=i[7],J=i[8],st=i[9],lt=i[10],dt=i[11],At=i[12],Et=i[13],Nt=i[14],ce=i[15],qt=h[0],at=h[1],It=h[2],Yt=h[3];return u[0]=qt*f+at*P+It*J+Yt*At,u[1]=qt*v+at*z+It*st+Yt*Et,u[2]=qt*w+at*V+It*lt+Yt*Nt,u[3]=qt*M+at*Z+It*dt+Yt*ce,u[4]=(qt=h[4])*f+(at=h[5])*P+(It=h[6])*J+(Yt=h[7])*At,u[5]=qt*v+at*z+It*st+Yt*Et,u[6]=qt*w+at*V+It*lt+Yt*Nt,u[7]=qt*M+at*Z+It*dt+Yt*ce,u[8]=(qt=h[8])*f+(at=h[9])*P+(It=h[10])*J+(Yt=h[11])*At,u[9]=qt*v+at*z+It*st+Yt*Et,u[10]=qt*w+at*V+It*lt+Yt*Nt,u[11]=qt*M+at*Z+It*dt+Yt*ce,u[12]=(qt=h[12])*f+(at=h[13])*P+(It=h[14])*J+(Yt=h[15])*At,u[13]=qt*v+at*z+It*st+Yt*Et,u[14]=qt*w+at*V+It*lt+Yt*Nt,u[15]=qt*M+at*Z+It*dt+Yt*ce,u},l.O=function(u,i){const h={};for(let f=0;f<i.length;f++){const v=i[f];v in u&&(h[v]=u[v])}return h},l.P=k,l.Q=Mu,l.R=vo,l.S=Yv,l.T=Od,l.U=Kv,l.V=j,l.W=$,l.X=jt,l.Y=$s,l.Z=ae,l._=o,l.a=wn,l.a$=function(u,i,h){var f=Math.sin(h),v=Math.cos(h),w=i[4],M=i[5],P=i[6],z=i[7],V=i[8],Z=i[9],J=i[10],st=i[11];return i!==u&&(u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[3],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[4]=w*v+V*f,u[5]=M*v+Z*f,u[6]=P*v+J*f,u[7]=z*v+st*f,u[8]=V*v-w*f,u[9]=Z*v-M*f,u[10]=J*v-P*f,u[11]=st*v-z*f,u},l.a0=25,l.a1=M0,l.a2=u=>{const i=window.document.createElement("video");return i.muted=!0,new Promise(h=>{i.onloadstart=()=>{h(i)};for(const f of u){const v=window.document.createElement("source");Nn(f)||(i.crossOrigin="Anonymous"),v.src=f,i.appendChild(v)}})},l.a3=Ue,l.a4=function(){return Me++},l.a5=L,l.a6=Yd,l.a7=Qu,l.a8=Gs,l.a9=ph,l.aA=function(u,i,h,f,v=!1){if(!h[0]&&!h[1])return[0,0];const w=v?f==="map"?-u.bearingInRadians:0:f==="viewport"?u.bearingInRadians:0;if(w){const M=Math.sin(w),P=Math.cos(w);h=[h[0]*P-h[1]*M,h[0]*M+h[1]*P]}return[v?h[0]:ye(i,h[0],u.zoom),v?h[1]:ye(i,h[1],u.zoom)]},l.aC=v0,l.aD=Sm,l.aE=y0,l.aF=T0,l.aG=Vi,l.aH=hp,l.aI=Zt,l.aJ=pr,l.aK=yn,l.aL=nn,l.aM=Ie,l.aN=Qv,l.aO=function(u,i,h){return u[0]=i[0]*h,u[1]=i[1]*h,u[2]=i[2]*h,u},l.aP=function(u,i,h){return u[0]=i[0]+h[0],u[1]=i[1]+h[1],u[2]=i[2]+h[2],u},l.aQ=function(u){var i=new tt(3);return i[0]=u[0],i[1]=u[1],i[2]=u[2],i},l.aR=function(u,i,h){return u[0]=i[0]*h[0],u[1]=i[1]*h[1],u[2]=i[2]*h[2],u[3]=i[3]*h[3],u},l.aS=function(u,i,h){return u[0]=i[0]-h[0],u[1]=i[1]-h[1],u[2]=i[2]-h[2],u},l.aT=function(u,i){var h=i[0],f=i[1],v=i[2],w=h*h+f*f+v*v;return w>0&&(w=1/Math.sqrt(w)),u[0]=i[0]*w,u[1]=i[1]*w,u[2]=i[2]*w,u},l.aU=function(u,i,h){var f=i[0],v=i[1],w=i[2],M=h[0],P=h[1],z=h[2];return u[0]=v*z-w*P,u[1]=w*M-f*z,u[2]=f*P-v*M,u},l.aV=function(u,i){return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]},l.aW=t_,l.aX=Fa,l.aY=function(u,i,h,f,v){var w,M=1/Math.tan(i/2);return u[0]=M/h,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=M,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,v!=null&&v!==1/0?(u[10]=(v+f)*(w=1/(f-v)),u[14]=2*v*f*w):(u[10]=-1,u[14]=-2*f),u},l.aZ=function(u){var i=new tt(16);return i[0]=u[0],i[1]=u[1],i[2]=u[2],i[3]=u[3],i[4]=u[4],i[5]=u[5],i[6]=u[6],i[7]=u[7],i[8]=u[8],i[9]=u[9],i[10]=u[10],i[11]=u[11],i[12]=u[12],i[13]=u[13],i[14]=u[14],i[15]=u[15],i},l.a_=function(u,i,h){var f=Math.sin(h),v=Math.cos(h),w=i[0],M=i[1],P=i[2],z=i[3],V=i[4],Z=i[5],J=i[6],st=i[7];return i!==u&&(u[8]=i[8],u[9]=i[9],u[10]=i[10],u[11]=i[11],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[0]=w*v+V*f,u[1]=M*v+Z*f,u[2]=P*v+J*f,u[3]=z*v+st*f,u[4]=V*v-w*f,u[5]=Z*v-M*f,u[6]=J*v-P*f,u[7]=st*v-z*f,u},l.aa=function(u){const i={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,f,v,w)=>{const M=v||w;return i[f]=!M||M.toLowerCase(),""}),i["max-age"]){const h=parseInt(i["max-age"],10);isNaN(h)?delete i["max-age"]:i["max-age"]=h}return i},l.ab=function(u){return u*Math.PI/180},l.ac=function(u){return Math.pow(2,u)},l.ad=et,l.ae=Ce,l.af=85.051129,l.ag=Xv,l.ah=function(u){return Math.log(u)/Math.LN2},l.ai=function(u){var i=u[0],h=u[1];return i*i+h*h},l.aj=function(u,i){const h=[];for(const f in u)f in i||h.push(f);return h},l.ak=function(u,i){let h=0,f=0;if(u.kind==="constant")f=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:v,minZoom:w,maxZoom:M}=u,P=v?Ce(go.interpolationFactor(v,i,w,M),0,1):0;u.kind==="camera"?f=Br.number(u.minSize,u.maxSize,P):h=P}return{uSizeT:h,uSize:f}},l.am=function(u,{uSize:i,uSizeT:h},{lowerSize:f,upperSize:v}){return u.kind==="source"?f/Vc:u.kind==="composite"?Br.number(f/Vc,v/Vc,h):i},l.an=function(u,i){var h=i[0],f=i[1],v=i[2],w=i[3],M=i[4],P=i[5],z=i[6],V=i[7],Z=i[8],J=i[9],st=i[10],lt=i[11],dt=i[12],At=i[13],Et=i[14],Nt=i[15],ce=h*P-f*M,qt=h*z-v*M,at=h*V-w*M,It=f*z-v*P,Yt=f*V-w*P,Oe=v*V-w*z,sn=Z*At-J*dt,Ne=Z*Et-st*dt,He=Z*Nt-lt*dt,pn=J*Et-st*At,ln=J*Nt-lt*At,vn=st*Nt-lt*Et,Xe=ce*vn-qt*ln+at*pn+It*He-Yt*Ne+Oe*sn;return Xe?(u[0]=(P*vn-z*ln+V*pn)*(Xe=1/Xe),u[1]=(v*ln-f*vn-w*pn)*Xe,u[2]=(At*Oe-Et*Yt+Nt*It)*Xe,u[3]=(st*Yt-J*Oe-lt*It)*Xe,u[4]=(z*He-M*vn-V*Ne)*Xe,u[5]=(h*vn-v*He+w*Ne)*Xe,u[6]=(Et*at-dt*Oe-Nt*qt)*Xe,u[7]=(Z*Oe-st*at+lt*qt)*Xe,u[8]=(M*ln-P*He+V*sn)*Xe,u[9]=(f*He-h*ln-w*sn)*Xe,u[10]=(dt*Yt-At*at+Nt*ce)*Xe,u[11]=(J*at-Z*Yt-lt*ce)*Xe,u[12]=(P*Ne-M*pn-z*sn)*Xe,u[13]=(h*pn-f*Ne+v*sn)*Xe,u[14]=(At*qt-dt*It-Et*ce)*Xe,u[15]=(Z*It-J*qt+st*ce)*Xe,u):null},l.ao=Vt,l.ap=function(u){return Math.hypot(u[0],u[1])},l.aq=function(u){return u[0]=0,u[1]=0,u},l.ar=function(u,i,h){return u[0]=i[0]*h,u[1]=i[1]*h,u},l.as=_0,l.at=X,l.au=function(u,i,h,f){const v=i.y-u.y,w=i.x-u.x,M=f.y-h.y,P=f.x-h.x,z=M*w-P*v;if(z===0)return null;const V=(P*(u.y-h.y)-M*(u.x-h.x))/z;return new k(u.x+V*w,u.y+V*v)},l.av=i_,l.aw=ep,l.ax=function(u){let i=1/0,h=1/0,f=-1/0,v=-1/0;for(const w of u)i=Math.min(i,w.x),h=Math.min(h,w.y),f=Math.max(f,w.x),v=Math.max(v,w.y);return[i,h,f,v]},l.ay=_o,l.az=ye,l.b=gt,l.b$=function(u,i){var h=u[0],f=u[1],v=u[2],w=u[3],M=u[4],P=u[5],z=u[6],V=u[7],Z=u[8],J=u[9],st=u[10],lt=u[11],dt=u[12],At=u[13],Et=u[14],Nt=u[15],ce=i[0],qt=i[1],at=i[2],It=i[3],Yt=i[4],Oe=i[5],sn=i[6],Ne=i[7],He=i[8],pn=i[9],ln=i[10],vn=i[11],Xe=i[12],jn=i[13],cr=i[14],er=i[15];return Math.abs(h-ce)<=K*Math.max(1,Math.abs(h),Math.abs(ce))&&Math.abs(f-qt)<=K*Math.max(1,Math.abs(f),Math.abs(qt))&&Math.abs(v-at)<=K*Math.max(1,Math.abs(v),Math.abs(at))&&Math.abs(w-It)<=K*Math.max(1,Math.abs(w),Math.abs(It))&&Math.abs(M-Yt)<=K*Math.max(1,Math.abs(M),Math.abs(Yt))&&Math.abs(P-Oe)<=K*Math.max(1,Math.abs(P),Math.abs(Oe))&&Math.abs(z-sn)<=K*Math.max(1,Math.abs(z),Math.abs(sn))&&Math.abs(V-Ne)<=K*Math.max(1,Math.abs(V),Math.abs(Ne))&&Math.abs(Z-He)<=K*Math.max(1,Math.abs(Z),Math.abs(He))&&Math.abs(J-pn)<=K*Math.max(1,Math.abs(J),Math.abs(pn))&&Math.abs(st-ln)<=K*Math.max(1,Math.abs(st),Math.abs(ln))&&Math.abs(lt-vn)<=K*Math.max(1,Math.abs(lt),Math.abs(vn))&&Math.abs(dt-Xe)<=K*Math.max(1,Math.abs(dt),Math.abs(Xe))&&Math.abs(At-jn)<=K*Math.max(1,Math.abs(At),Math.abs(jn))&&Math.abs(Et-cr)<=K*Math.max(1,Math.abs(Et),Math.abs(cr))&&Math.abs(Nt-er)<=K*Math.max(1,Math.abs(Nt),Math.abs(er))},l.b0=function(){const u=new Float32Array(16);return et(u),u},l.b1=function(){const u=new Float64Array(16);return et(u),u},l.b2=function(){return new Float64Array(16)},l.b3=function(u,i,h){const f=new Float64Array(4);return function(v,w,M,P){var z=.5*Math.PI/180;w*=z,M*=z,P*=z;var V=Math.sin(w),Z=Math.cos(w),J=Math.sin(M),st=Math.cos(M),lt=Math.sin(P),dt=Math.cos(P);v[0]=V*st*dt-Z*J*lt,v[1]=Z*J*dt+V*st*lt,v[2]=Z*st*lt-V*J*dt,v[3]=Z*st*dt+V*J*lt}(f,u,i-90,h),f},l.b4=function(u,i,h,f){var v,w,M,P,z,V=i[0],Z=i[1],J=i[2],st=i[3],lt=h[0],dt=h[1],At=h[2],Et=h[3];return(w=V*lt+Z*dt+J*At+st*Et)<0&&(w=-w,lt=-lt,dt=-dt,At=-At,Et=-Et),1-w>K?(v=Math.acos(w),M=Math.sin(v),P=Math.sin((1-f)*v)/M,z=Math.sin(f*v)/M):(P=1-f,z=f),u[0]=P*V+z*lt,u[1]=P*Z+z*dt,u[2]=P*J+z*At,u[3]=P*st+z*Et,u},l.b5=function(u){const i=new Float64Array(9);var h,f,v,w,M,P,z,V,Z,J,st,lt,dt,At,Et,Nt,ce,qt;J=(v=(f=u)[0])*(z=v+v),st=(w=f[1])*z,dt=(M=f[2])*z,At=M*(V=w+w),Nt=(P=f[3])*z,ce=P*V,qt=P*(Z=M+M),(h=i)[0]=1-(lt=w*V)-(Et=M*Z),h[3]=st-qt,h[6]=dt+ce,h[1]=st+qt,h[4]=1-J-Et,h[7]=At-Nt,h[2]=dt-ce,h[5]=At+Nt,h[8]=1-J-lt;const at=Ie(-Math.asin(Ce(i[2],-1,1)));let It,Yt;return Math.hypot(i[5],i[8])<.001?(It=0,Yt=-Ie(Math.atan2(i[3],i[4]))):(It=Ie(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),Yt=Ie(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:It,pitch:at+90,bearing:Yt}},l.b6=function(u,i){return u.roll==i.roll&&u.pitch==i.pitch&&u.bearing==i.bearing},l.b7=$t,l.b8=Au,l.b9=$d,l.bA=function(u){if(u.type==="custom")return new Cm(u);switch(u.type){case"background":return new Ix(u);case"circle":return new Bb(u);case"fill":return new vv(u);case"fill-extrusion":return new vl(u);case"heatmap":return new Kg(u);case"hillshade":return new yr(u);case"line":return new ox(u);case"raster":return new wm(u);case"symbol":return new _p(u)}},l.bB=Je,l.bC=function(u,i){if(!u)return[{command:"setStyle",args:[i]}];let h=[];try{if(!Kt(u.version,i.version))return[{command:"setStyle",args:[i]}];Kt(u.center,i.center)||h.push({command:"setCenter",args:[i.center]}),Kt(u.centerAltitude,i.centerAltitude)||h.push({command:"setCenterAltitude",args:[i.centerAltitude]}),Kt(u.zoom,i.zoom)||h.push({command:"setZoom",args:[i.zoom]}),Kt(u.bearing,i.bearing)||h.push({command:"setBearing",args:[i.bearing]}),Kt(u.pitch,i.pitch)||h.push({command:"setPitch",args:[i.pitch]}),Kt(u.roll,i.roll)||h.push({command:"setRoll",args:[i.roll]}),Kt(u.sprite,i.sprite)||h.push({command:"setSprite",args:[i.sprite]}),Kt(u.glyphs,i.glyphs)||h.push({command:"setGlyphs",args:[i.glyphs]}),Kt(u.transition,i.transition)||h.push({command:"setTransition",args:[i.transition]}),Kt(u.light,i.light)||h.push({command:"setLight",args:[i.light]}),Kt(u.terrain,i.terrain)||h.push({command:"setTerrain",args:[i.terrain]}),Kt(u.sky,i.sky)||h.push({command:"setSky",args:[i.sky]}),Kt(u.projection,i.projection)||h.push({command:"setProjection",args:[i.projection]});const f={},v=[];(function(M,P,z,V){let Z;for(Z in P=P||{},M=M||{})Object.prototype.hasOwnProperty.call(M,Z)&&(Object.prototype.hasOwnProperty.call(P,Z)||we(Z,z,V));for(Z in P)Object.prototype.hasOwnProperty.call(P,Z)&&(Object.prototype.hasOwnProperty.call(M,Z)?Kt(M[Z],P[Z])||(M[Z].type==="geojson"&&P[Z].type==="geojson"&&Sn(M,P,Z)?Fe(z,{command:"setGeoJSONSourceData",args:[Z,P[Z].data]}):rn(Z,P,z,V)):Ve(Z,P,z))})(u.sources,i.sources,v,f);const w=[];u.layers&&u.layers.forEach(M=>{"source"in M&&f[M.source]?h.push({command:"removeLayer",args:[M.id]}):w.push(M)}),h=h.concat(v),function(M,P,z){P=P||[];const V=(M=M||[]).map(ir),Z=P.map(ir),J=M.reduce(gr,{}),st=P.reduce(gr,{}),lt=V.slice(),dt=Object.create(null);let At,Et,Nt,ce,qt;for(let at=0,It=0;at<V.length;at++)At=V[at],Object.prototype.hasOwnProperty.call(st,At)?It++:(Fe(z,{command:"removeLayer",args:[At]}),lt.splice(lt.indexOf(At,It),1));for(let at=0,It=0;at<Z.length;at++)At=Z[Z.length-1-at],lt[lt.length-1-at]!==At&&(Object.prototype.hasOwnProperty.call(J,At)?(Fe(z,{command:"removeLayer",args:[At]}),lt.splice(lt.lastIndexOf(At,lt.length-It),1)):It++,ce=lt[lt.length-at],Fe(z,{command:"addLayer",args:[st[At],ce]}),lt.splice(lt.length-at,0,At),dt[At]=!0);for(let at=0;at<Z.length;at++)if(At=Z[at],Et=J[At],Nt=st[At],!dt[At]&&!Kt(Et,Nt))if(Kt(Et.source,Nt.source)&&Kt(Et["source-layer"],Nt["source-layer"])&&Kt(Et.type,Nt.type)){for(qt in En(Et.layout,Nt.layout,z,At,null,"setLayoutProperty"),En(Et.paint,Nt.paint,z,At,null,"setPaintProperty"),Kt(Et.filter,Nt.filter)||Fe(z,{command:"setFilter",args:[At,Nt.filter]}),Kt(Et.minzoom,Nt.minzoom)&&Kt(Et.maxzoom,Nt.maxzoom)||Fe(z,{command:"setLayerZoomRange",args:[At,Nt.minzoom,Nt.maxzoom]}),Et)Object.prototype.hasOwnProperty.call(Et,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?En(Et[qt],Nt[qt],z,At,qt.slice(6),"setPaintProperty"):Kt(Et[qt],Nt[qt])||Fe(z,{command:"setLayerProperty",args:[At,qt,Nt[qt]]}));for(qt in Nt)Object.prototype.hasOwnProperty.call(Nt,qt)&&!Object.prototype.hasOwnProperty.call(Et,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?En(Et[qt],Nt[qt],z,At,qt.slice(6),"setPaintProperty"):Kt(Et[qt],Nt[qt])||Fe(z,{command:"setLayerProperty",args:[At,qt,Nt[qt]]}))}else Fe(z,{command:"removeLayer",args:[At]}),ce=lt[lt.lastIndexOf(At)+1],Fe(z,{command:"addLayer",args:[Nt,ce]})}(w,i.layers,h)}catch(f){console.warn("Unable to compute style diff:",f),h=[{command:"setStyle",args:[i]}]}return h},l.bD=function(u){const i=[],h=u.id;return h===void 0&&i.push({message:`layers.${h}: missing required property "id"`}),u.render===void 0&&i.push({message:`layers.${h}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&i.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),i},l.bE=function u(i,h){if(Array.isArray(i)){if(!Array.isArray(h)||i.length!==h.length)return!1;for(let f=0;f<i.length;f++)if(!u(i[f],h[f]))return!1;return!0}if(typeof i=="object"&&i!==null&&h!==null){if(typeof h!="object"||Object.keys(i).length!==Object.keys(h).length)return!1;for(const f in i)if(!u(i[f],h[f]))return!1;return!0}return i===h},l.bF=xe,l.bG=Be,l.bH=class extends Zo{constructor(u,i){super(u,i),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},l.bI=Oa,l.bJ=class extends Zo{constructor(u,i){super(u,i),this.current=Jl}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let i=1;i<16;i++)if(u[i]!==this.current[i]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},l.bK=Da,l.bL=class extends Zo{constructor(u,i){super(u,i),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},l.bM=class extends Zo{constructor(u,i){super(u,i),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},l.bN=it,l.bO=function(u,i){var h=Math.sin(i),f=Math.cos(i);return u[0]=f,u[1]=h,u[2]=0,u[3]=-h,u[4]=f,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},l.bP=function(u,i,h){var f=i[0],v=i[1],w=i[2];return u[0]=f*h[0]+v*h[3]+w*h[6],u[1]=f*h[1]+v*h[4]+w*h[7],u[2]=f*h[2]+v*h[5]+w*h[8],u},l.bQ=function(u,i,h,f,v,w,M){var P=1/(i-h),z=1/(f-v),V=1/(w-M);return u[0]=-2*P,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*z,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*V,u[11]=0,u[12]=(i+h)*P,u[13]=(v+f)*z,u[14]=(M+w)*V,u[15]=1,u},l.bR=class extends js{},l.bS=cx,l.bT=class extends Nd{},l.bU=sp,l.bV=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},l.bW=hm,l.bX=function(u,i,h){var f=i[0],v=i[1],w=i[2],M=h[3]*f+h[7]*v+h[11]*w+h[15];return u[0]=(h[0]*f+h[4]*v+h[8]*w+h[12])/(M=M||1),u[1]=(h[1]*f+h[5]*v+h[9]*w+h[13])/M,u[2]=(h[2]*f+h[6]*v+h[10]*w+h[14])/M,u},l.bY=class extends gs{},l.bZ=class extends y{},l.b_=function(u,i){return u[0]===i[0]&&u[1]===i[1]&&u[2]===i[2]&&u[3]===i[3]&&u[4]===i[4]&&u[5]===i[5]&&u[6]===i[6]&&u[7]===i[7]&&u[8]===i[8]&&u[9]===i[9]&&u[10]===i[10]&&u[11]===i[11]&&u[12]===i[12]&&u[13]===i[13]&&u[14]===i[14]&&u[15]===i[15]},l.ba=Wh,l.bb=Zh,l.bc=Jt,l.bd=Gt,l.be=or,l.bf=function(u,i,h,f,v){return Jt(f,v,Ce((u-i)/(h-i),0,1))},l.bg=en,l.bh=function(){return new Float64Array(3)},l.bi=function(u,i,h,f){return u[0]=i[0]+h[0]*f,u[1]=i[1]+h[1]*f,u[2]=i[2]+h[2]*f,u},l.bj=bt,l.bk=function(){return new Float64Array(4)},l.bl=function(u,i,h,f){var v=[],w=[];return v[0]=i[0]-h[0],v[1]=i[1]-h[1],v[2]=i[2]-h[2],w[0]=v[0]*Math.cos(f)-v[1]*Math.sin(f),w[1]=v[0]*Math.sin(f)+v[1]*Math.cos(f),w[2]=v[2],u[0]=w[0]+h[0],u[1]=w[1]+h[1],u[2]=w[2]+h[2],u},l.bm=function(u,i,h,f){var v=[],w=[];return v[0]=i[0]-h[0],v[1]=i[1]-h[1],v[2]=i[2]-h[2],w[0]=v[0],w[1]=v[1]*Math.cos(f)-v[2]*Math.sin(f),w[2]=v[1]*Math.sin(f)+v[2]*Math.cos(f),u[0]=w[0]+h[0],u[1]=w[1]+h[1],u[2]=w[2]+h[2],u},l.bn=function(u,i,h,f){var v=[],w=[];return v[0]=i[0]-h[0],v[1]=i[1]-h[1],v[2]=i[2]-h[2],w[0]=v[2]*Math.sin(f)+v[0]*Math.cos(f),w[1]=v[1],w[2]=v[2]*Math.cos(f)-v[0]*Math.sin(f),u[0]=w[0]+h[0],u[1]=w[1]+h[1],u[2]=w[2]+h[2],u},l.bo=ut,l.bp=function(u,i,h){var f=Math.sin(h),v=Math.cos(h),w=i[0],M=i[1],P=i[2],z=i[3],V=i[8],Z=i[9],J=i[10],st=i[11];return i!==u&&(u[4]=i[4],u[5]=i[5],u[6]=i[6],u[7]=i[7],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[0]=w*v-V*f,u[1]=M*v-Z*f,u[2]=P*v-J*f,u[3]=z*v-st*f,u[8]=w*f+V*v,u[9]=M*f+Z*v,u[10]=P*f+J*v,u[11]=z*f+st*v,u},l.bq=function(u,i){const h=en(u,360),f=en(i,360),v=f-h,w=f>h?v-360:v+360;return Math.abs(v)<Math.abs(w)?v:w},l.br=function(u){return u[0]=0,u[1]=0,u[2]=0,u},l.bs=function(u,i,h,f){const v=Math.sqrt(u*u+i*i),w=Math.sqrt(h*h+f*f);u/=v,i/=v,h/=w,f/=w;const M=Math.acos(u*h+i*f);return-i*h+u*f>0?M:-M},l.bt=function(u,i){return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]+u[3]},l.bu=bp,l.bv=function(u,i){const h=en(u,2*Math.PI),f=en(i,2*Math.PI);return Math.min(Math.abs(h-f),Math.abs(h-f+2*Math.PI),Math.abs(h-f-2*Math.PI))},l.bw=function(){const u={},i=vt.$version;for(const h in vt.$root){const f=vt.$root[h];if(f.required){let v=null;v=h==="version"?i:f.type==="array"?[]:{},v!=null&&(u[h]=v)}}return u},l.bx=jh,l.by=Ye,l.bz=function(u){u=u.slice();const i=Object.create(null);for(let h=0;h<u.length;h++)i[u[h].id]=u[h];for(let h=0;h<u.length;h++)"ref"in u[h]&&(u[h]=he(u[h],i[u[h].ref]));return u},l.c=_n,l.c0=function(u,i){return u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[3],u[4]=i[4],u[5]=i[5],u[6]=i[6],u[7]=i[7],u[8]=i[8],u[9]=i[9],u[10]=i[10],u[11]=i[11],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15],u},l.c1=u=>u.type==="symbol",l.c2=u=>u.type==="circle",l.c3=u=>u.type==="heatmap",l.c4=u=>u.type==="line",l.c5=u=>u.type==="fill",l.c6=u=>u.type==="fill-extrusion",l.c7=u=>u.type==="hillshade",l.c8=u=>u.type==="raster",l.c9=u=>u.type==="background",l.cA=dp,l.cB=p0,l.cC=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},l.cD=function(u,i,h,f,v){return o(this,void 0,void 0,function*(){if($())try{return yield jt(u,i,h,f,v)}catch{}return function(w,M,P,z,V){const Z=w.width,J=w.height;ee&&ue||(ee=new OffscreenCanvas(Z,J),ue=ee.getContext("2d",{willReadFrequently:!0})),ee.width=Z,ee.height=J,ue.drawImage(w,0,0,Z,J);const st=ue.getImageData(M,P,z,V);return ue.clearRect(0,0,Z,J),st.data}(u,i,h,f,v)})},l.cE=e_,l.cF=g,l.cG=C,l.cH=a0,l.cI=f0,l.cJ=Fs,l.cK=pl,l.ca=u=>u.type==="custom",l.cb=Re,l.cc=function(u,i,h){const f=Bt(i.x-h.x,i.y-h.y),v=Bt(u.x-h.x,u.y-h.y);var w,M;return Ie(Math.atan2(f[0]*v[1]-f[1]*v[0],(w=f)[0]*(M=v)[0]+w[1]*M[1]))},l.cd=$e,l.ce=function(u,i){return Le[i]&&(u instanceof MouseEvent||u instanceof WheelEvent)},l.cf=function(u,i){return je[i]&&"touches"in u},l.cg=function(u){return je[u]||Le[u]},l.ch=function(u,i,h){var f=i[0],v=i[1];return u[0]=h[0]*f+h[4]*v+h[12],u[1]=h[1]*f+h[5]*v+h[13],u},l.ci=function(u,i){const{x:h,y:f}=xp.fromLngLat(i);return!(u<0||u>25||f<0||f>=1||h<0||h>=1)},l.cj=function(u,i){return u[0]=i[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=i[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=i[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},l.ck=class extends ih{},l.cl=f_,l.cn=function(u){return u.message===Ke},l.co=Te,l.cp=function(u,i){wn.REGISTERED_PROTOCOLS[u]=i},l.cq=function(u){delete wn.REGISTERED_PROTOCOLS[u]},l.cr=function(u,i){const h={};for(let v=0;v<u.length;v++){const w=i&&i[u[v].id]||Pd(u[v]);i&&(i[u[v].id]=w);let M=h[w];M||(M=h[w]=[]),M.push(u[v])}const f=[];for(const v in h)f.push(h[v]);return f},l.cs=On,l.ct=n_,l.cu=Er,l.cv=Ov,l.cw=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=ae/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const i=u.bucket.layers[0],h=i.layout,f=i._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new li(u.bucket.zoom+1),u.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new li(u.bucket.zoom+1),u.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new li(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:V,maxZoom:Z}=u.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new li(V),u.canonical),f["text-size"].possiblyEvaluate(new li(Z),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:V,maxZoom:Z}=u.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new li(V),u.canonical),f["icon-size"].possiblyEvaluate(new li(Z),u.canonical)]}const w=h.get("text-line-height")*_o,M=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",P=h.get("text-keep-upright"),z=h.get("text-size");for(const V of u.bucket.features){const Z=h.get("text-font").evaluate(V,{},u.canonical).join(","),J=z.evaluate(V,{},u.canonical),st=v.layoutTextSize.evaluate(V,{},u.canonical),lt=v.layoutIconSize.evaluate(V,{},u.canonical),dt={horizontal:{},vertical:void 0},At=V.text;let Et,Nt=[0,0];if(At){const at=At.toString(),It=h.get("text-letter-spacing").evaluate(V,{},u.canonical)*_o,Yt=tm(at)?It:0,Oe=h.get("text-anchor").evaluate(V,{},u.canonical),sn=u_(i,V,u.canonical);if(!sn){const ln=h.get("text-radial-offset").evaluate(V,{},u.canonical);Nt=ln?Mm(Oe,[ln*_o,Kh]):h.get("text-offset").evaluate(V,{},u.canonical).map(vn=>vn*_o)}let Ne=M?"center":h.get("text-justify").evaluate(V,{},u.canonical);const He=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(V,{},u.canonical)*_o:1/0,pn=()=>{u.bucket.allowVerticalPlacement&&kd(at)&&(dt.vertical=bm(At,u.glyphMap,u.glyphPositions,u.imagePositions,Z,He,w,Oe,"left",Yt,Nt,l.al.vertical,!0,st,J))};if(!M&&sn){const ln=new Set;if(Ne==="auto")for(let Xe=0;Xe<sn.values.length;Xe+=2)ln.add(Sm(sn.values[Xe]));else ln.add(Ne);let vn=!1;for(const Xe of ln)if(!dt.horizontal[Xe])if(vn)dt.horizontal[Xe]=dt.horizontal[0];else{const jn=bm(At,u.glyphMap,u.glyphPositions,u.imagePositions,Z,He,w,"center",Xe,Yt,Nt,l.al.horizontal,!1,st,J);jn&&(dt.horizontal[Xe]=jn,vn=jn.positionedLines.length===1)}pn()}else{Ne==="auto"&&(Ne=Sm(Oe));const ln=bm(At,u.glyphMap,u.glyphPositions,u.imagePositions,Z,He,w,Oe,Ne,Yt,Nt,l.al.horizontal,!1,st,J);ln&&(dt.horizontal[Ne]=ln),pn(),kd(at)&&M&&P&&(dt.vertical=bm(At,u.glyphMap,u.glyphPositions,u.imagePositions,Z,He,w,Oe,Ne,Yt,Nt,l.al.vertical,!1,st,J))}}let ce=!1;if(V.icon&&V.icon.name){const at=u.imageMap[V.icon.name];at&&(Et=xx(u.imagePositions[V.icon.name],h.get("icon-offset").evaluate(V,{},u.canonical),h.get("icon-anchor").evaluate(V,{},u.canonical)),ce=!!at.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=ce:u.bucket.sdfIcons!==ce&&Tt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(at.pixelRatio!==u.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const qt=Yh(dt.horizontal)||dt.vertical;u.bucket.iconsInText=!!qt&&qt.iconsInText,(qt||Et)&&Em(u.bucket,V,dt,Et,u.imageMap,v,st,lt,Nt,ce,u.canonical,u.subdivisionGranularity)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},l.cx=c0,l.cy=pm,l.cz=l0,l.d=Nn,l.e=be,l.f=u=>o(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(i)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.g=de,l.h=u=>new Promise((i,h)=>{const f=new Image;f.onload=()=>{i(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame(()=>{f.src=yt})},f.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(u)],{type:"image/png"});f.src=u.byteLength?URL.createObjectURL(v):yt}),l.i=Rt,l.j=(u,i)=>un(be(u,{type:"json"}),i),l.k=wt,l.l=mt,l.m=un,l.n=(u,i)=>un(be(u,{type:"arrayBuffer"}),i),l.o=function(u){return new p0(u).readFields(hx,[])},l.p=Dv,l.q=ap,l.r=ya,l.s=Ut,l.t=Qp,l.u=Ar,l.v=vt,l.w=Tt,l.x=Jp,l.y=dl,l.z=function([u,i,h]){return i+=90,i*=Math.PI/180,h*=Math.PI/180,{x:u*Math.cos(i)*Math.sin(h),y:u*Math.sin(i)*Math.sin(h),z:u*Math.cos(h)}}}),s("worker",["./shared"],function(l){class o{constructor(ht){this.keyCache={},ht&&this.replace(ht)}replace(ht){this._layerConfigs={},this._layers={},this.update(ht,[])}update(ht,mt){for(const kt of ht){this._layerConfigs[kt.id]=kt;const vt=this._layers[kt.id]=l.bA(kt);vt._featureFilter=l.a7(vt.filter),this.keyCache[kt.id]&&delete this.keyCache[kt.id]}for(const kt of mt)delete this.keyCache[kt],delete this._layerConfigs[kt],delete this._layers[kt];this.familiesBySource={};const wt=l.cr(Object.values(this._layerConfigs),this.keyCache);for(const kt of wt){const vt=kt.map(we=>this._layers[we.id]),ie=vt[0];if(ie.visibility==="none")continue;const he=ie.source||"";let Kt=this.familiesBySource[he];Kt||(Kt=this.familiesBySource[he]={});const Fe=ie.sourceLayer||"_geojsonTileLayer";let Ve=Kt[Fe];Ve||(Ve=Kt[Fe]=[]),Ve.push(vt)}}}class g{constructor(ht){const mt={},wt=[];for(const he in ht){const Kt=ht[he],Fe=mt[he]={};for(const Ve in Kt){const we=Kt[+Ve];if(!we||we.bitmap.width===0||we.bitmap.height===0)continue;const rn={x:0,y:0,w:we.bitmap.width+2,h:we.bitmap.height+2};wt.push(rn),Fe[Ve]={rect:rn,metrics:we.metrics}}}const{w:kt,h:vt}=l.p(wt),ie=new l.q({width:kt||1,height:vt||1});for(const he in ht){const Kt=ht[he];for(const Fe in Kt){const Ve=Kt[+Fe];if(!Ve||Ve.bitmap.width===0||Ve.bitmap.height===0)continue;const we=mt[he][Fe].rect;l.q.copy(Ve.bitmap,ie,{x:0,y:0},{x:we.x+1,y:we.y+1},Ve.bitmap)}}this.image=ie,this.positions=mt}}l.cs("GlyphAtlas",g);class _{constructor(ht){this.tileID=new l.Y(ht.tileID.overscaledZ,ht.tileID.wrap,ht.tileID.canonical.z,ht.tileID.canonical.x,ht.tileID.canonical.y),this.uid=ht.uid,this.zoom=ht.zoom,this.pixelRatio=ht.pixelRatio,this.tileSize=ht.tileSize,this.source=ht.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ht.showCollisionBoxes,this.collectResourceTiming=!!ht.collectResourceTiming,this.returnDependencies=!!ht.returnDependencies,this.promoteId=ht.promoteId,this.inFlightDependencies=[]}parse(ht,mt,wt,kt,vt){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=ht,this.collisionBoxArray=new l.a5;const ie=new l.ct(Object.keys(ht.layers).sort()),he=new l.cu(this.tileID,this.promoteId);he.bucketLayerIDs=[];const Kt={},Fe={featureIndex:he,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:wt,subdivisionGranularity:vt},Ve=mt.familiesBySource[this.source];for(const Ze in Ve){const zn=ht.layers[Ze];if(!zn)continue;zn.version===1&&l.w(`Vector tile source "${this.source}" layer "${Ze}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Jn=ie.encode(Ze),eo=[];for(let Eo=0;Eo<zn.length;Eo++){const pi=zn.feature(Eo),Xn=he.getId(pi,Ze);eo.push({feature:pi,id:Xn,index:Eo,sourceLayerIndex:Jn})}for(const Eo of Ve[Ze]){const pi=Eo[0];pi.source!==this.source&&l.w(`layer.source = ${pi.source} does not equal this.source = ${this.source}`),pi.minzoom&&this.zoom<Math.floor(pi.minzoom)||pi.maxzoom&&this.zoom>=pi.maxzoom||pi.visibility!=="none"&&(I(Eo,this.zoom,wt),(Kt[pi.id]=pi.createBucket({index:he.bucketLayerIDs.length,layers:Eo,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Jn,sourceID:this.source})).populate(eo,Fe,this.tileID.canonical),he.bucketLayerIDs.push(Eo.map(Xn=>Xn.id)))}}const we=l.bF(Fe.glyphDependencies,Ze=>Object.keys(Ze).map(Number));this.inFlightDependencies.forEach(Ze=>Ze==null?void 0:Ze.abort()),this.inFlightDependencies=[];let rn=Promise.resolve({});if(Object.keys(we).length){const Ze=new AbortController;this.inFlightDependencies.push(Ze),rn=kt.sendAsync({type:"GG",data:{stacks:we,source:this.source,tileID:this.tileID,type:"glyphs"}},Ze)}const Sn=Object.keys(Fe.iconDependencies);let En=Promise.resolve({});if(Sn.length){const Ze=new AbortController;this.inFlightDependencies.push(Ze),En=kt.sendAsync({type:"GI",data:{icons:Sn,source:this.source,tileID:this.tileID,type:"icons"}},Ze)}const ir=Object.keys(Fe.patternDependencies);let gr=Promise.resolve({});if(ir.length){const Ze=new AbortController;this.inFlightDependencies.push(Ze),gr=kt.sendAsync({type:"GI",data:{icons:ir,source:this.source,tileID:this.tileID,type:"patterns"}},Ze)}const[Ue,Gn,Fr]=yield Promise.all([rn,En,gr]),Yr=new g(Ue),Pr=new l.cv(Gn,Fr);for(const Ze in Kt){const zn=Kt[Ze];zn instanceof l.a6?(I(zn.layers,this.zoom,wt),l.cw({bucket:zn,glyphMap:Ue,glyphPositions:Yr.positions,imageMap:Gn,imagePositions:Pr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Fe.subdivisionGranularity})):zn.hasPattern&&(zn instanceof l.cx||zn instanceof l.cy||zn instanceof l.cz)&&(I(zn.layers,this.zoom,wt),zn.addFeatures(Fe,this.tileID.canonical,Pr.patternPositions))}return this.status="done",{buckets:Object.values(Kt).filter(Ze=>!Ze.isEmpty()),featureIndex:he,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Yr.image,imageAtlas:Pr,glyphMap:this.returnDependencies?Ue:null,iconMap:this.returnDependencies?Gn:null,glyphPositions:this.returnDependencies?Yr.positions:null}})}}function I(oe,ht,mt){const wt=new l.C(ht);for(const kt of oe)kt.recalculate(wt,mt)}class C{constructor(ht,mt,wt){this.actor=ht,this.layerIndex=mt,this.availableImages=wt,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ht,mt){return l._(this,void 0,void 0,function*(){const wt=yield l.n(ht.request,mt);try{return{vectorTile:new l.cA.VectorTile(new l.cB(wt.data)),rawData:wt.data,cacheControl:wt.cacheControl,expires:wt.expires}}catch(kt){const vt=new Uint8Array(wt.data);let ie=`Unable to parse the tile at ${ht.request.url}, `;throw ie+=vt[0]===31&&vt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${kt.message}`,new Error(ie)}})}loadTile(ht){return l._(this,void 0,void 0,function*(){const mt=ht.uid,wt=!!(ht&&ht.request&&ht.request.collectResourceTiming)&&new l.cC(ht.request),kt=new _(ht);this.loading[mt]=kt;const vt=new AbortController;kt.abort=vt;try{const ie=yield this.loadVectorTile(ht,vt);if(delete this.loading[mt],!ie)return null;const he=ie.rawData,Kt={};ie.expires&&(Kt.expires=ie.expires),ie.cacheControl&&(Kt.cacheControl=ie.cacheControl);const Fe={};if(wt){const we=wt.finish();we&&(Fe.resourceTiming=JSON.parse(JSON.stringify(we)))}kt.vectorTile=ie.vectorTile;const Ve=kt.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor,ht.subdivisionGranularity);this.loaded[mt]=kt,this.fetching[mt]={rawTileData:he,cacheControl:Kt,resourceTiming:Fe};try{const we=yield Ve;return l.e({rawTileData:he.slice(0)},we,Kt,Fe)}finally{delete this.fetching[mt]}}catch(ie){throw delete this.loading[mt],kt.status="done",this.loaded[mt]=kt,ie}})}reloadTile(ht){return l._(this,void 0,void 0,function*(){const mt=ht.uid;if(!this.loaded||!this.loaded[mt])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const wt=this.loaded[mt];if(wt.showCollisionBoxes=ht.showCollisionBoxes,wt.status==="parsing"){const kt=yield wt.parse(wt.vectorTile,this.layerIndex,this.availableImages,this.actor,ht.subdivisionGranularity);let vt;if(this.fetching[mt]){const{rawTileData:ie,cacheControl:he,resourceTiming:Kt}=this.fetching[mt];delete this.fetching[mt],vt=l.e({rawTileData:ie.slice(0)},kt,he,Kt)}else vt=kt;return vt}if(wt.status==="done"&&wt.vectorTile)return wt.parse(wt.vectorTile,this.layerIndex,this.availableImages,this.actor,ht.subdivisionGranularity)})}abortTile(ht){return l._(this,void 0,void 0,function*(){const mt=this.loading,wt=ht.uid;mt&&mt[wt]&&mt[wt].abort&&(mt[wt].abort.abort(),delete mt[wt])})}removeTile(ht){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ht.uid]&&delete this.loaded[ht.uid]})}}class E{constructor(){this.loaded={}}loadTile(ht){return l._(this,void 0,void 0,function*(){const{uid:mt,encoding:wt,rawImageData:kt,redFactor:vt,greenFactor:ie,blueFactor:he,baseShift:Kt}=ht,Fe=kt.width+2,Ve=kt.height+2,we=l.b(kt)?new l.R({width:Fe,height:Ve},yield l.cD(kt,-1,-1,Fe,Ve)):kt,rn=new l.cE(mt,we,wt,vt,ie,he,Kt);return this.loaded=this.loaded||{},this.loaded[mt]=rn,rn})}removeTile(ht){const mt=this.loaded,wt=ht.uid;mt&&mt[wt]&&delete mt[wt]}}var S,k,D=function(){if(k)return S;function oe(mt,wt){if(mt.length!==0){ht(mt[0],wt);for(var kt=1;kt<mt.length;kt++)ht(mt[kt],!wt)}}function ht(mt,wt){for(var kt=0,vt=0,ie=0,he=mt.length,Kt=he-1;ie<he;Kt=ie++){var Fe=(mt[ie][0]-mt[Kt][0])*(mt[Kt][1]+mt[ie][1]),Ve=kt+Fe;vt+=Math.abs(kt)>=Math.abs(Fe)?kt-Ve+Fe:Fe-Ve+kt,kt=Ve}kt+vt>=0!=!!wt&&mt.reverse()}return k=1,S=function mt(wt,kt){var vt,ie=wt&&wt.type;if(ie==="FeatureCollection")for(vt=0;vt<wt.features.length;vt++)mt(wt.features[vt],kt);else if(ie==="GeometryCollection")for(vt=0;vt<wt.geometries.length;vt++)mt(wt.geometries[vt],kt);else if(ie==="Feature")mt(wt.geometry,kt);else if(ie==="Polygon")oe(wt.coordinates,kt);else if(ie==="MultiPolygon")for(vt=0;vt<wt.coordinates.length;vt++)oe(wt.coordinates[vt],kt);return wt}}(),N=l.cF(D);const U=l.cA.VectorTileFeature.prototype.toGeoJSON;class F{constructor(ht){this._feature=ht,this.extent=l.Z,this.type=ht.type,this.properties=ht.tags,"id"in ht&&!isNaN(ht.id)&&(this.id=parseInt(ht.id,10))}loadGeometry(){if(this._feature.type===1){const ht=[];for(const mt of this._feature.geometry)ht.push([new l.P(mt[0],mt[1])]);return ht}{const ht=[];for(const mt of this._feature.geometry){const wt=[];for(const kt of mt)wt.push(new l.P(kt[0],kt[1]));ht.push(wt)}return ht}}toGeoJSON(ht,mt,wt){return U.call(this,ht,mt,wt)}}class j{constructor(ht){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.Z,this.length=ht.length,this._features=ht}feature(ht){return new F(this._features[ht])}}var $,K,tt,it={exports:{}},et=function(){if(tt)return it.exports;tt=1;var oe=l.cI(),ht=function(){if(K)return $;K=1;var Ve=l.cG(),we=l.cH().VectorTileFeature;function rn(En,ir){this.options=ir||{},this.features=En,this.length=En.length}function Sn(En,ir){this.id=typeof En.id=="number"?En.id:void 0,this.type=En.type,this.rawGeometry=En.type===1?[En.geometry]:En.geometry,this.properties=En.tags,this.extent=ir||4096}return $=rn,rn.prototype.feature=function(En){return new Sn(this.features[En],this.options.extent)},Sn.prototype.loadGeometry=function(){var En=this.rawGeometry;this.geometry=[];for(var ir=0;ir<En.length;ir++){for(var gr=En[ir],Ue=[],Gn=0;Gn<gr.length;Gn++)Ue.push(new Ve(gr[Gn][0],gr[Gn][1]));this.geometry.push(Ue)}return this.geometry},Sn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var En=this.geometry,ir=1/0,gr=-1/0,Ue=1/0,Gn=-1/0,Fr=0;Fr<En.length;Fr++)for(var Yr=En[Fr],Pr=0;Pr<Yr.length;Pr++){var Ze=Yr[Pr];ir=Math.min(ir,Ze.x),gr=Math.max(gr,Ze.x),Ue=Math.min(Ue,Ze.y),Gn=Math.max(Gn,Ze.y)}return[ir,Ue,gr,Gn]},Sn.prototype.toGeoJSON=we.prototype.toGeoJSON,$}();function mt(Ve){var we=new oe;return function(rn,Sn){for(var En in rn.layers)Sn.writeMessage(3,wt,rn.layers[En])}(Ve,we),we.finish()}function wt(Ve,we){var rn;we.writeVarintField(15,Ve.version||1),we.writeStringField(1,Ve.name||""),we.writeVarintField(5,Ve.extent||4096);var Sn={keys:[],values:[],keycache:{},valuecache:{}};for(rn=0;rn<Ve.length;rn++)Sn.feature=Ve.feature(rn),we.writeMessage(2,kt,Sn);var En=Sn.keys;for(rn=0;rn<En.length;rn++)we.writeStringField(3,En[rn]);var ir=Sn.values;for(rn=0;rn<ir.length;rn++)we.writeMessage(4,Fe,ir[rn])}function kt(Ve,we){var rn=Ve.feature;rn.id!==void 0&&we.writeVarintField(1,rn.id),we.writeMessage(2,vt,Ve),we.writeVarintField(3,rn.type),we.writeMessage(4,Kt,rn)}function vt(Ve,we){var rn=Ve.feature,Sn=Ve.keys,En=Ve.values,ir=Ve.keycache,gr=Ve.valuecache;for(var Ue in rn.properties){var Gn=rn.properties[Ue],Fr=ir[Ue];if(Gn!==null){Fr===void 0&&(Sn.push(Ue),ir[Ue]=Fr=Sn.length-1),we.writeVarint(Fr);var Yr=typeof Gn;Yr!=="string"&&Yr!=="boolean"&&Yr!=="number"&&(Gn=JSON.stringify(Gn));var Pr=Yr+":"+Gn,Ze=gr[Pr];Ze===void 0&&(En.push(Gn),gr[Pr]=Ze=En.length-1),we.writeVarint(Ze)}}}function ie(Ve,we){return(we<<3)+(7&Ve)}function he(Ve){return Ve<<1^Ve>>31}function Kt(Ve,we){for(var rn=Ve.loadGeometry(),Sn=Ve.type,En=0,ir=0,gr=rn.length,Ue=0;Ue<gr;Ue++){var Gn=rn[Ue],Fr=1;Sn===1&&(Fr=Gn.length),we.writeVarint(ie(1,Fr));for(var Yr=Sn===3?Gn.length-1:Gn.length,Pr=0;Pr<Yr;Pr++){Pr===1&&Sn!==1&&we.writeVarint(ie(2,Yr-1));var Ze=Gn[Pr].x-En,zn=Gn[Pr].y-ir;we.writeVarint(he(Ze)),we.writeVarint(he(zn)),En+=Ze,ir+=zn}Sn===3&&we.writeVarint(ie(7,1))}}function Fe(Ve,we){var rn=typeof Ve;rn==="string"?we.writeStringField(1,Ve):rn==="boolean"?we.writeBooleanField(7,Ve):rn==="number"&&(Ve%1!=0?we.writeDoubleField(3,Ve):Ve<0?we.writeSVarintField(6,Ve):we.writeVarintField(5,Ve))}return it.exports=mt,it.exports.fromVectorTileJs=mt,it.exports.fromGeojsonVt=function(Ve,we){we=we||{};var rn={};for(var Sn in Ve)rn[Sn]=new ht(Ve[Sn].features,we),rn[Sn].name=Sn,rn[Sn].version=we.version,rn[Sn].extent=we.extent;return mt({layers:rn})},it.exports.GeoJSONWrapper=ht,it.exports}(),q=l.cF(et);const ut={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},Ct=Math.fround||(ot=new Float32Array(1),oe=>(ot[0]=+oe,ot[0]));var ot;const bt=3,X=5,Wt=6;class Vt{constructor(ht){this.options=Object.assign(Object.create(ut),ht),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ht){const{log:mt,minZoom:wt,maxZoom:kt}=this.options;mt&&console.time("total time");const vt=`prepare ${ht.length} points`;mt&&console.time(vt),this.points=ht;const ie=[];for(let Kt=0;Kt<ht.length;Kt++){const Fe=ht[Kt];if(!Fe.geometry)continue;const[Ve,we]=Fe.geometry.coordinates,rn=Ct(ye(Ve)),Sn=Ct(en(we));ie.push(rn,Sn,1/0,Kt,-1,1),this.options.reduce&&ie.push(0)}let he=this.trees[kt+1]=this._createTree(ie);mt&&console.timeEnd(vt);for(let Kt=kt;Kt>=wt;Kt--){const Fe=+Date.now();he=this.trees[Kt]=this._createTree(this._cluster(he,Kt)),mt&&console.log("z%d: %d clusters in %dms",Kt,he.numItems,+Date.now()-Fe)}return mt&&console.timeEnd("total time"),this}getClusters(ht,mt){let wt=((ht[0]+180)%360+360)%360-180;const kt=Math.max(-90,Math.min(90,ht[1]));let vt=ht[2]===180?180:((ht[2]+180)%360+360)%360-180;const ie=Math.max(-90,Math.min(90,ht[3]));if(ht[2]-ht[0]>=360)wt=-180,vt=180;else if(wt>vt){const we=this.getClusters([wt,kt,180,ie],mt),rn=this.getClusters([-180,kt,vt,ie],mt);return we.concat(rn)}const he=this.trees[this._limitZoom(mt)],Kt=he.range(ye(wt),en(ie),ye(vt),en(kt)),Fe=he.data,Ve=[];for(const we of Kt){const rn=this.stride*we;Ve.push(Fe[rn+X]>1?Bt(Fe,rn,this.clusterProps):this.points[Fe[rn+bt]])}return Ve}getChildren(ht){const mt=this._getOriginId(ht),wt=this._getOriginZoom(ht),kt="No cluster with the specified id.",vt=this.trees[wt];if(!vt)throw new Error(kt);const ie=vt.data;if(mt*this.stride>=ie.length)throw new Error(kt);const he=this.options.radius/(this.options.extent*Math.pow(2,wt-1)),Kt=vt.within(ie[mt*this.stride],ie[mt*this.stride+1],he),Fe=[];for(const Ve of Kt){const we=Ve*this.stride;ie[we+4]===ht&&Fe.push(ie[we+X]>1?Bt(ie,we,this.clusterProps):this.points[ie[we+bt]])}if(Fe.length===0)throw new Error(kt);return Fe}getLeaves(ht,mt,wt){const kt=[];return this._appendLeaves(kt,ht,mt=mt||10,wt=wt||0,0),kt}getTile(ht,mt,wt){const kt=this.trees[this._limitZoom(ht)],vt=Math.pow(2,ht),{extent:ie,radius:he}=this.options,Kt=he/ie,Fe=(wt-Kt)/vt,Ve=(wt+1+Kt)/vt,we={features:[]};return this._addTileFeatures(kt.range((mt-Kt)/vt,Fe,(mt+1+Kt)/vt,Ve),kt.data,mt,wt,vt,we),mt===0&&this._addTileFeatures(kt.range(1-Kt/vt,Fe,1,Ve),kt.data,vt,wt,vt,we),mt===vt-1&&this._addTileFeatures(kt.range(0,Fe,Kt/vt,Ve),kt.data,-1,wt,vt,we),we.features.length?we:null}getClusterExpansionZoom(ht){let mt=this._getOriginZoom(ht)-1;for(;mt<=this.options.maxZoom;){const wt=this.getChildren(ht);if(mt++,wt.length!==1)break;ht=wt[0].properties.cluster_id}return mt}_appendLeaves(ht,mt,wt,kt,vt){const ie=this.getChildren(mt);for(const he of ie){const Kt=he.properties;if(Kt&&Kt.cluster?vt+Kt.point_count<=kt?vt+=Kt.point_count:vt=this._appendLeaves(ht,Kt.cluster_id,wt,kt,vt):vt<kt?vt++:ht.push(he),ht.length===wt)break}return vt}_createTree(ht){const mt=new l.aF(ht.length/this.stride|0,this.options.nodeSize,Float32Array);for(let wt=0;wt<ht.length;wt+=this.stride)mt.add(ht[wt],ht[wt+1]);return mt.finish(),mt.data=ht,mt}_addTileFeatures(ht,mt,wt,kt,vt,ie){for(const he of ht){const Kt=he*this.stride,Fe=mt[Kt+X]>1;let Ve,we,rn;if(Fe)Ve=ae(mt,Kt,this.clusterProps),we=mt[Kt],rn=mt[Kt+1];else{const ir=this.points[mt[Kt+bt]];Ve=ir.properties;const[gr,Ue]=ir.geometry.coordinates;we=ye(gr),rn=en(Ue)}const Sn={type:1,geometry:[[Math.round(this.options.extent*(we*vt-wt)),Math.round(this.options.extent*(rn*vt-kt))]],tags:Ve};let En;En=Fe||this.options.generateId?mt[Kt+bt]:this.points[mt[Kt+bt]].id,En!==void 0&&(Sn.id=En),ie.features.push(Sn)}}_limitZoom(ht){return Math.max(this.options.minZoom,Math.min(Math.floor(+ht),this.options.maxZoom+1))}_cluster(ht,mt){const{radius:wt,extent:kt,reduce:vt,minPoints:ie}=this.options,he=wt/(kt*Math.pow(2,mt)),Kt=ht.data,Fe=[],Ve=this.stride;for(let we=0;we<Kt.length;we+=Ve){if(Kt[we+2]<=mt)continue;Kt[we+2]=mt;const rn=Kt[we],Sn=Kt[we+1],En=ht.within(Kt[we],Kt[we+1],he),ir=Kt[we+X];let gr=ir;for(const Ue of En){const Gn=Ue*Ve;Kt[Gn+2]>mt&&(gr+=Kt[Gn+X])}if(gr>ir&&gr>=ie){let Ue,Gn=rn*ir,Fr=Sn*ir,Yr=-1;const Pr=((we/Ve|0)<<5)+(mt+1)+this.points.length;for(const Ze of En){const zn=Ze*Ve;if(Kt[zn+2]<=mt)continue;Kt[zn+2]=mt;const Jn=Kt[zn+X];Gn+=Kt[zn]*Jn,Fr+=Kt[zn+1]*Jn,Kt[zn+4]=Pr,vt&&(Ue||(Ue=this._map(Kt,we,!0),Yr=this.clusterProps.length,this.clusterProps.push(Ue)),vt(Ue,this._map(Kt,zn)))}Kt[we+4]=Pr,Fe.push(Gn/gr,Fr/gr,1/0,Pr,-1,gr),vt&&Fe.push(Yr)}else{for(let Ue=0;Ue<Ve;Ue++)Fe.push(Kt[we+Ue]);if(gr>1)for(const Ue of En){const Gn=Ue*Ve;if(!(Kt[Gn+2]<=mt)){Kt[Gn+2]=mt;for(let Fr=0;Fr<Ve;Fr++)Fe.push(Kt[Gn+Fr])}}}}return Fe}_getOriginId(ht){return ht-this.points.length>>5}_getOriginZoom(ht){return(ht-this.points.length)%32}_map(ht,mt,wt){if(ht[mt+X]>1){const ie=this.clusterProps[ht[mt+Wt]];return wt?Object.assign({},ie):ie}const kt=this.points[ht[mt+bt]].properties,vt=this.options.map(kt);return wt&&vt===kt?Object.assign({},vt):vt}}function Bt(oe,ht,mt){return{type:"Feature",id:oe[ht+bt],properties:ae(oe,ht,mt),geometry:{type:"Point",coordinates:[(wt=oe[ht],360*(wt-.5)),Jt(oe[ht+1])]}};var wt}function ae(oe,ht,mt){const wt=oe[ht+X],kt=wt>=1e4?`${Math.round(wt/1e3)}k`:wt>=1e3?Math.round(wt/100)/10+"k":wt,vt=oe[ht+Wt],ie=vt===-1?{}:Object.assign({},mt[vt]);return Object.assign(ie,{cluster:!0,cluster_id:oe[ht+bt],point_count:wt,point_count_abbreviated:kt})}function ye(oe){return oe/360+.5}function en(oe){const ht=Math.sin(oe*Math.PI/180),mt=.5-.25*Math.log((1+ht)/(1-ht))/Math.PI;return mt<0?0:mt>1?1:mt}function Jt(oe){const ht=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(ht))/Math.PI-90}function Gt(oe,ht,mt,wt){let kt=wt;const vt=ht+(mt-ht>>1);let ie,he=mt-ht;const Kt=oe[ht],Fe=oe[ht+1],Ve=oe[mt],we=oe[mt+1];for(let rn=ht+3;rn<mt;rn+=3){const Sn=Re(oe[rn],oe[rn+1],Kt,Fe,Ve,we);if(Sn>kt)ie=rn,kt=Sn;else if(Sn===kt){const En=Math.abs(rn-vt);En<he&&(ie=rn,he=En)}}kt>wt&&(ie-ht>3&&Gt(oe,ht,ie,wt),oe[ie+2]=kt,mt-ie>3&&Gt(oe,ie,mt,wt))}function Re(oe,ht,mt,wt,kt,vt){let ie=kt-mt,he=vt-wt;if(ie!==0||he!==0){const Kt=((oe-mt)*ie+(ht-wt)*he)/(ie*ie+he*he);Kt>1?(mt=kt,wt=vt):Kt>0&&(mt+=ie*Kt,wt+=he*Kt)}return ie=oe-mt,he=ht-wt,ie*ie+he*he}function $e(oe,ht,mt,wt){const kt={id:oe??null,type:ht,geometry:mt,tags:wt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ht==="Point"||ht==="MultiPoint"||ht==="LineString")Ce(kt,mt);else if(ht==="Polygon")Ce(kt,mt[0]);else if(ht==="MultiLineString")for(const vt of mt)Ce(kt,vt);else if(ht==="MultiPolygon")for(const vt of mt)Ce(kt,vt[0]);return kt}function Ce(oe,ht){for(let mt=0;mt<ht.length;mt+=3)oe.minX=Math.min(oe.minX,ht[mt]),oe.minY=Math.min(oe.minY,ht[mt+1]),oe.maxX=Math.max(oe.maxX,ht[mt]),oe.maxY=Math.max(oe.maxY,ht[mt+1])}function nn(oe,ht,mt,wt){if(!ht.geometry)return;const kt=ht.geometry.coordinates;if(kt&&kt.length===0)return;const vt=ht.geometry.type,ie=Math.pow(mt.tolerance/((1<<mt.maxZoom)*mt.extent),2);let he=[],Kt=ht.id;if(mt.promoteId?Kt=ht.properties[mt.promoteId]:mt.generateId&&(Kt=wt||0),vt==="Point")be(kt,he);else if(vt==="MultiPoint")for(const Fe of kt)be(Fe,he);else if(vt==="LineString")Me(kt,he,ie,!1);else if(vt==="MultiLineString"){if(mt.lineMetrics){for(const Fe of kt)he=[],Me(Fe,he,ie,!1),oe.push($e(Kt,"LineString",he,ht.properties));return}xe(kt,he,ie,!1)}else if(vt==="Polygon")xe(kt,he,ie,!0);else{if(vt!=="MultiPolygon"){if(vt==="GeometryCollection"){for(const Fe of ht.geometry.geometries)nn(oe,{id:Kt,geometry:Fe,properties:ht.properties},mt,wt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Fe of kt){const Ve=[];xe(Fe,Ve,ie,!0),he.push(Ve)}}oe.push($e(Kt,vt,he,ht.properties))}function be(oe,ht){ht.push(Be(oe[0]),Je(oe[1]),0)}function Me(oe,ht,mt,wt){let kt,vt,ie=0;for(let Kt=0;Kt<oe.length;Kt++){const Fe=Be(oe[Kt][0]),Ve=Je(oe[Kt][1]);ht.push(Fe,Ve,0),Kt>0&&(ie+=wt?(kt*Ve-Fe*vt)/2:Math.sqrt(Math.pow(Fe-kt,2)+Math.pow(Ve-vt,2))),kt=Fe,vt=Ve}const he=ht.length-3;ht[2]=1,Gt(ht,0,he,mt),ht[he+2]=1,ht.size=Math.abs(ie),ht.start=0,ht.end=ht.size}function xe(oe,ht,mt,wt){for(let kt=0;kt<oe.length;kt++){const vt=[];Me(oe[kt],vt,mt,wt),ht.push(vt)}}function Be(oe){return oe/360+.5}function Je(oe){const ht=Math.sin(oe*Math.PI/180),mt=.5-.25*Math.log((1+ht)/(1-ht))/Math.PI;return mt<0?0:mt>1?1:mt}function Ln(oe,ht,mt,wt,kt,vt,ie,he){if(wt/=ht,vt>=(mt/=ht)&&ie<wt)return oe;if(ie<mt||vt>=wt)return null;const Kt=[];for(const Fe of oe){const Ve=Fe.geometry;let we=Fe.type;const rn=kt===0?Fe.minX:Fe.minY,Sn=kt===0?Fe.maxX:Fe.maxY;if(rn>=mt&&Sn<wt){Kt.push(Fe);continue}if(Sn<mt||rn>=wt)continue;let En=[];if(we==="Point"||we==="MultiPoint")Tt(Ve,En,mt,wt,kt);else if(we==="LineString")H(Ve,En,mt,wt,kt,!1,he.lineMetrics);else if(we==="MultiLineString")Pt(Ve,En,mt,wt,kt,!1);else if(we==="Polygon")Pt(Ve,En,mt,wt,kt,!0);else if(we==="MultiPolygon")for(const ir of Ve){const gr=[];Pt(ir,gr,mt,wt,kt,!0),gr.length&&En.push(gr)}if(En.length){if(he.lineMetrics&&we==="LineString"){for(const ir of En)Kt.push($e(Fe.id,we,ir,Fe.tags));continue}we!=="LineString"&&we!=="MultiLineString"||(En.length===1?(we="LineString",En=En[0]):we="MultiLineString"),we!=="Point"&&we!=="MultiPoint"||(we=En.length===3?"Point":"MultiPoint"),Kt.push($e(Fe.id,we,En,Fe.tags))}}return Kt.length?Kt:null}function Tt(oe,ht,mt,wt,kt){for(let vt=0;vt<oe.length;vt+=3){const ie=oe[vt+kt];ie>=mt&&ie<=wt&&gt(ht,oe[vt],oe[vt+1],oe[vt+2])}}function H(oe,ht,mt,wt,kt,vt,ie){let he=Rt(oe);const Kt=kt===0?yt:jt;let Fe,Ve,we=oe.start;for(let gr=0;gr<oe.length-3;gr+=3){const Ue=oe[gr],Gn=oe[gr+1],Fr=oe[gr+2],Yr=oe[gr+3],Pr=oe[gr+4],Ze=kt===0?Ue:Gn,zn=kt===0?Yr:Pr;let Jn=!1;ie&&(Fe=Math.sqrt(Math.pow(Ue-Yr,2)+Math.pow(Gn-Pr,2))),Ze<mt?zn>mt&&(Ve=Kt(he,Ue,Gn,Yr,Pr,mt),ie&&(he.start=we+Fe*Ve)):Ze>wt?zn<wt&&(Ve=Kt(he,Ue,Gn,Yr,Pr,wt),ie&&(he.start=we+Fe*Ve)):gt(he,Ue,Gn,Fr),zn<mt&&Ze>=mt&&(Ve=Kt(he,Ue,Gn,Yr,Pr,mt),Jn=!0),zn>wt&&Ze<=wt&&(Ve=Kt(he,Ue,Gn,Yr,Pr,wt),Jn=!0),!vt&&Jn&&(ie&&(he.end=we+Fe*Ve),ht.push(he),he=Rt(oe)),ie&&(we+=Fe)}let rn=oe.length-3;const Sn=oe[rn],En=oe[rn+1],ir=kt===0?Sn:En;ir>=mt&&ir<=wt&&gt(he,Sn,En,oe[rn+2]),rn=he.length-3,vt&&rn>=3&&(he[rn]!==he[0]||he[rn+1]!==he[1])&&gt(he,he[0],he[1],he[2]),he.length&&ht.push(he)}function Rt(oe){const ht=[];return ht.size=oe.size,ht.start=oe.start,ht.end=oe.end,ht}function Pt(oe,ht,mt,wt,kt,vt){for(const ie of oe)H(ie,ht,mt,wt,kt,vt,!1)}function gt(oe,ht,mt,wt){oe.push(ht,mt,wt)}function yt(oe,ht,mt,wt,kt,vt){const ie=(vt-ht)/(wt-ht);return gt(oe,vt,mt+(kt-mt)*ie,1),ie}function jt(oe,ht,mt,wt,kt,vt){const ie=(vt-mt)/(kt-mt);return gt(oe,ht+(wt-ht)*ie,vt,1),ie}function ee(oe,ht){const mt=[];for(let wt=0;wt<oe.length;wt++){const kt=oe[wt],vt=kt.type;let ie;if(vt==="Point"||vt==="MultiPoint"||vt==="LineString")ie=ue(kt.geometry,ht);else if(vt==="MultiLineString"||vt==="Polygon"){ie=[];for(const he of kt.geometry)ie.push(ue(he,ht))}else if(vt==="MultiPolygon"){ie=[];for(const he of kt.geometry){const Kt=[];for(const Fe of he)Kt.push(ue(Fe,ht));ie.push(Kt)}}mt.push($e(kt.id,vt,ie,kt.tags))}return mt}function ue(oe,ht){const mt=[];mt.size=oe.size,oe.start!==void 0&&(mt.start=oe.start,mt.end=oe.end);for(let wt=0;wt<oe.length;wt+=3)mt.push(oe[wt]+ht,oe[wt+1],oe[wt+2]);return mt}function Ut(oe,ht){if(oe.transformed)return oe;const mt=1<<oe.z,wt=oe.x,kt=oe.y;for(const vt of oe.features){const ie=vt.geometry,he=vt.type;if(vt.geometry=[],he===1)for(let Kt=0;Kt<ie.length;Kt+=2)vt.geometry.push(Ie(ie[Kt],ie[Kt+1],ht,mt,wt,kt));else for(let Kt=0;Kt<ie.length;Kt++){const Fe=[];for(let Ve=0;Ve<ie[Kt].length;Ve+=2)Fe.push(Ie(ie[Kt][Ve],ie[Kt][Ve+1],ht,mt,wt,kt));vt.geometry.push(Fe)}}return oe.transformed=!0,oe}function Ie(oe,ht,mt,wt,kt,vt){return[Math.round(mt*(oe*wt-kt)),Math.round(mt*(ht*wt-vt))]}function je(oe,ht,mt,wt,kt){const vt=ht===kt.maxZoom?0:kt.tolerance/((1<<ht)*kt.extent),ie={features:[],numPoints:0,numSimplified:0,numFeatures:oe.length,source:null,x:mt,y:wt,z:ht,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const he of oe)Le(ie,he,vt,kt);return ie}function Le(oe,ht,mt,wt){const kt=ht.geometry,vt=ht.type,ie=[];if(oe.minX=Math.min(oe.minX,ht.minX),oe.minY=Math.min(oe.minY,ht.minY),oe.maxX=Math.max(oe.maxX,ht.maxX),oe.maxY=Math.max(oe.maxY,ht.maxY),vt==="Point"||vt==="MultiPoint")for(let he=0;he<kt.length;he+=3)ie.push(kt[he],kt[he+1]),oe.numPoints++,oe.numSimplified++;else if(vt==="LineString")Ke(ie,kt,oe,mt,!1,!1);else if(vt==="MultiLineString"||vt==="Polygon")for(let he=0;he<kt.length;he++)Ke(ie,kt[he],oe,mt,vt==="Polygon",he===0);else if(vt==="MultiPolygon")for(let he=0;he<kt.length;he++){const Kt=kt[he];for(let Fe=0;Fe<Kt.length;Fe++)Ke(ie,Kt[Fe],oe,mt,!0,Fe===0)}if(ie.length){let he=ht.tags||null;if(vt==="LineString"&&wt.lineMetrics){he={};for(const Fe in ht.tags)he[Fe]=ht.tags[Fe];he.mapbox_clip_start=kt.start/kt.size,he.mapbox_clip_end=kt.end/kt.size}const Kt={geometry:ie,type:vt==="Polygon"||vt==="MultiPolygon"?3:vt==="LineString"||vt==="MultiLineString"?2:1,tags:he};ht.id!==null&&(Kt.id=ht.id),oe.features.push(Kt)}}function Ke(oe,ht,mt,wt,kt,vt){const ie=wt*wt;if(wt>0&&ht.size<(kt?ie:wt))return void(mt.numPoints+=ht.length/3);const he=[];for(let Kt=0;Kt<ht.length;Kt+=3)(wt===0||ht[Kt+2]>ie)&&(mt.numSimplified++,he.push(ht[Kt],ht[Kt+1])),mt.numPoints++;kt&&function(Kt,Fe){let Ve=0;for(let we=0,rn=Kt.length,Sn=rn-2;we<rn;Sn=we,we+=2)Ve+=(Kt[we]-Kt[Sn])*(Kt[we+1]+Kt[Sn+1]);if(Ve>0===Fe)for(let we=0,rn=Kt.length;we<rn/2;we+=2){const Sn=Kt[we],En=Kt[we+1];Kt[we]=Kt[rn-2-we],Kt[we+1]=Kt[rn-1-we],Kt[rn-2-we]=Sn,Kt[rn-1-we]=En}}(he,vt),oe.push(he)}const _n={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class wn{constructor(ht,mt){const wt=(mt=this.options=function(vt,ie){for(const he in ie)vt[he]=ie[he];return vt}(Object.create(_n),mt)).debug;if(wt&&console.time("preprocess data"),mt.maxZoom<0||mt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(mt.promoteId&&mt.generateId)throw new Error("promoteId and generateId cannot be used together.");let kt=function(vt,ie){const he=[];if(vt.type==="FeatureCollection")for(let Kt=0;Kt<vt.features.length;Kt++)nn(he,vt.features[Kt],ie,Kt);else nn(he,vt.type==="Feature"?vt:{geometry:vt},ie);return he}(ht,mt);this.tiles={},this.tileCoords=[],wt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",mt.indexMaxZoom,mt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),kt=function(vt,ie){const he=ie.buffer/ie.extent;let Kt=vt;const Fe=Ln(vt,1,-1-he,he,0,-1,2,ie),Ve=Ln(vt,1,1-he,2+he,0,-1,2,ie);return(Fe||Ve)&&(Kt=Ln(vt,1,-he,1+he,0,-1,2,ie)||[],Fe&&(Kt=ee(Fe,1).concat(Kt)),Ve&&(Kt=Kt.concat(ee(Ve,-1)))),Kt}(kt,mt),kt.length&&this.splitTile(kt,0,0,0),wt&&(kt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ht,mt,wt,kt,vt,ie,he){const Kt=[ht,mt,wt,kt],Fe=this.options,Ve=Fe.debug;for(;Kt.length;){kt=Kt.pop(),wt=Kt.pop(),mt=Kt.pop(),ht=Kt.pop();const we=1<<mt,rn=de(mt,wt,kt);let Sn=this.tiles[rn];if(!Sn&&(Ve>1&&console.time("creation"),Sn=this.tiles[rn]=je(ht,mt,wt,kt,Fe),this.tileCoords.push({z:mt,x:wt,y:kt}),Ve)){Ve>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",mt,wt,kt,Sn.numFeatures,Sn.numPoints,Sn.numSimplified),console.timeEnd("creation"));const Jn=`z${mt}`;this.stats[Jn]=(this.stats[Jn]||0)+1,this.total++}if(Sn.source=ht,vt==null){if(mt===Fe.indexMaxZoom||Sn.numPoints<=Fe.indexMaxPoints)continue}else{if(mt===Fe.maxZoom||mt===vt)continue;if(vt!=null){const Jn=vt-mt;if(wt!==ie>>Jn||kt!==he>>Jn)continue}}if(Sn.source=null,ht.length===0)continue;Ve>1&&console.time("clipping");const En=.5*Fe.buffer/Fe.extent,ir=.5-En,gr=.5+En,Ue=1+En;let Gn=null,Fr=null,Yr=null,Pr=null,Ze=Ln(ht,we,wt-En,wt+gr,0,Sn.minX,Sn.maxX,Fe),zn=Ln(ht,we,wt+ir,wt+Ue,0,Sn.minX,Sn.maxX,Fe);ht=null,Ze&&(Gn=Ln(Ze,we,kt-En,kt+gr,1,Sn.minY,Sn.maxY,Fe),Fr=Ln(Ze,we,kt+ir,kt+Ue,1,Sn.minY,Sn.maxY,Fe),Ze=null),zn&&(Yr=Ln(zn,we,kt-En,kt+gr,1,Sn.minY,Sn.maxY,Fe),Pr=Ln(zn,we,kt+ir,kt+Ue,1,Sn.minY,Sn.maxY,Fe),zn=null),Ve>1&&console.timeEnd("clipping"),Kt.push(Gn||[],mt+1,2*wt,2*kt),Kt.push(Fr||[],mt+1,2*wt,2*kt+1),Kt.push(Yr||[],mt+1,2*wt+1,2*kt),Kt.push(Pr||[],mt+1,2*wt+1,2*kt+1)}}getTile(ht,mt,wt){ht=+ht,mt=+mt,wt=+wt;const kt=this.options,{extent:vt,debug:ie}=kt;if(ht<0||ht>24)return null;const he=1<<ht,Kt=de(ht,mt=mt+he&he-1,wt);if(this.tiles[Kt])return Ut(this.tiles[Kt],vt);ie>1&&console.log("drilling down to z%d-%d-%d",ht,mt,wt);let Fe,Ve=ht,we=mt,rn=wt;for(;!Fe&&Ve>0;)Ve--,we>>=1,rn>>=1,Fe=this.tiles[de(Ve,we,rn)];return Fe&&Fe.source?(ie>1&&(console.log("found parent tile z%d-%d-%d",Ve,we,rn),console.time("drilling down")),this.splitTile(Fe.source,Ve,we,rn,ht,mt,wt),ie>1&&console.timeEnd("drilling down"),this.tiles[Kt]?Ut(this.tiles[Kt],vt):null):null}}function de(oe,ht,mt){return 32*((1<<oe)*mt+ht)+oe}function ve(oe,ht){return ht?oe.properties[ht]:oe.id}function Te(oe,ht){if(oe==null)return!0;if(oe.type==="Feature")return ve(oe,ht)!=null;if(oe.type==="FeatureCollection"){const mt=new Set;for(const wt of oe.features){const kt=ve(wt,ht);if(kt==null||mt.has(kt))return!1;mt.add(kt)}return!0}return!1}function Ye(oe,ht){const mt=new Map;if(oe!=null)if(oe.type==="Feature")mt.set(ve(oe,ht),oe);else for(const wt of oe.features)mt.set(ve(wt,ht),wt);return mt}class un extends C{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ht,mt){return l._(this,void 0,void 0,function*(){const wt=ht.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const kt=this._geoJSONIndex.getTile(wt.z,wt.x,wt.y);if(!kt)return null;const vt=new j(kt.features);let ie=q(vt);return ie.byteOffset===0&&ie.byteLength===ie.buffer.byteLength||(ie=new Uint8Array(ie)),{vectorTile:vt,rawData:ie.buffer}})}loadData(ht){return l._(this,void 0,void 0,function*(){var mt;(mt=this._pendingRequest)===null||mt===void 0||mt.abort();const wt=!!(ht&&ht.request&&ht.request.collectResourceTiming)&&new l.cC(ht.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ht,this._pendingRequest),this._geoJSONIndex=ht.cluster?new Vt(function({superclusterOptions:ie,clusterProperties:he}){if(!he||!ie)return ie;const Kt={},Fe={},Ve={accumulated:null,zoom:0},we={properties:null},rn=Object.keys(he);for(const Sn of rn){const[En,ir]=he[Sn],gr=l.cJ(ir),Ue=l.cJ(typeof En=="string"?[En,["accumulated"],["get",Sn]]:En);Kt[Sn]=gr.value,Fe[Sn]=Ue.value}return ie.map=Sn=>{we.properties=Sn;const En={};for(const ir of rn)En[ir]=Kt[ir].evaluate(Ve,we);return En},ie.reduce=(Sn,En)=>{we.properties=En;for(const ir of rn)Ve.accumulated=Sn[ir],Sn[ir]=Fe[ir].evaluate(Ve,we)},ie}(ht)).load((yield this._pendingData).features):(kt=yield this._pendingData,new wn(kt,ht.geojsonVtOptions)),this.loaded={};const vt={};if(wt){const ie=wt.finish();ie&&(vt.resourceTiming={},vt.resourceTiming[ht.source]=JSON.parse(JSON.stringify(ie)))}return vt}catch(vt){if(delete this._pendingRequest,l.cn(vt))return{abandoned:!0};throw vt}var kt})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ht){const mt=this.loaded;return mt&&mt[ht.uid]?super.reloadTile(ht):this.loadTile(ht)}loadAndProcessGeoJSON(ht,mt){return l._(this,void 0,void 0,function*(){let wt=yield this.loadGeoJSON(ht,mt);if(delete this._pendingRequest,typeof wt!="object")throw new Error(`Input data given to '${ht.source}' is not a valid GeoJSON object.`);if(N(wt,!0),ht.filter){const kt=l.cJ(ht.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(kt.result==="error")throw new Error(kt.value.map(ie=>`${ie.key}: ${ie.message}`).join(", "));wt={type:"FeatureCollection",features:wt.features.filter(ie=>kt.value.evaluate({zoom:0},ie))}}return wt})}loadGeoJSON(ht,mt){return l._(this,void 0,void 0,function*(){const{promoteId:wt}=ht;if(ht.request){const kt=yield l.j(ht.request,mt);return this._dataUpdateable=Te(kt.data,wt)?Ye(kt.data,wt):void 0,kt.data}if(typeof ht.data=="string")try{const kt=JSON.parse(ht.data);return this._dataUpdateable=Te(kt,wt)?Ye(kt,wt):void 0,kt}catch{throw new Error(`Input data given to '${ht.source}' is not a valid GeoJSON object.`)}if(!ht.dataDiff)throw new Error(`Input data given to '${ht.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ht.source}`);return function(kt,vt,ie){var he,Kt,Fe,Ve;if(vt.removeAll&&kt.clear(),vt.remove)for(const we of vt.remove)kt.delete(we);if(vt.add)for(const we of vt.add){const rn=ve(we,ie);rn!=null&&kt.set(rn,we)}if(vt.update)for(const we of vt.update){let rn=kt.get(we.id);if(rn==null)continue;const Sn=!we.removeAllProperties&&(((he=we.removeProperties)===null||he===void 0?void 0:he.length)>0||((Kt=we.addOrUpdateProperties)===null||Kt===void 0?void 0:Kt.length)>0);if((we.newGeometry||we.removeAllProperties||Sn)&&(rn=Object.assign({},rn),kt.set(we.id,rn),Sn&&(rn.properties=Object.assign({},rn.properties))),we.newGeometry&&(rn.geometry=we.newGeometry),we.removeAllProperties)rn.properties={};else if(((Fe=we.removeProperties)===null||Fe===void 0?void 0:Fe.length)>0)for(const En of we.removeProperties)Object.prototype.hasOwnProperty.call(rn.properties,En)&&delete rn.properties[En];if(((Ve=we.addOrUpdateProperties)===null||Ve===void 0?void 0:Ve.length)>0)for(const{key:En,value:ir}of we.addOrUpdateProperties)rn.properties[En]=ir}}(this._dataUpdateable,ht.dataDiff,wt),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ht){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ht){return this._geoJSONIndex.getClusterExpansionZoom(ht.clusterId)}getClusterChildren(ht){return this._geoJSONIndex.getChildren(ht.clusterId)}getClusterLeaves(ht){return this._geoJSONIndex.getLeaves(ht.clusterId,ht.limit,ht.offset)}}class Nn{constructor(ht){this.self=ht,this.actor=new l.H(ht),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(mt,wt)=>{if(this.externalWorkerSourceTypes[mt])throw new Error(`Worker source with name "${mt}" already registered.`);this.externalWorkerSourceTypes[mt]=wt},this.self.addProtocol=l.cp,this.self.removeProtocol=l.cq,this.self.registerRTLTextPlugin=mt=>{l.cK.setMethods(mt)},this.actor.registerMessageHandler("LDT",(mt,wt)=>this._getDEMWorkerSource(mt,wt.source).loadTile(wt)),this.actor.registerMessageHandler("RDT",(mt,wt)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(mt,wt.source).removeTile(wt)})),this.actor.registerMessageHandler("GCEZ",(mt,wt)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(mt,wt.type,wt.source).getClusterExpansionZoom(wt)})),this.actor.registerMessageHandler("GCC",(mt,wt)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(mt,wt.type,wt.source).getClusterChildren(wt)})),this.actor.registerMessageHandler("GCL",(mt,wt)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(mt,wt.type,wt.source).getClusterLeaves(wt)})),this.actor.registerMessageHandler("LD",(mt,wt)=>this._getWorkerSource(mt,wt.type,wt.source).loadData(wt)),this.actor.registerMessageHandler("GD",(mt,wt)=>this._getWorkerSource(mt,wt.type,wt.source).getData()),this.actor.registerMessageHandler("LT",(mt,wt)=>this._getWorkerSource(mt,wt.type,wt.source).loadTile(wt)),this.actor.registerMessageHandler("RT",(mt,wt)=>this._getWorkerSource(mt,wt.type,wt.source).reloadTile(wt)),this.actor.registerMessageHandler("AT",(mt,wt)=>this._getWorkerSource(mt,wt.type,wt.source).abortTile(wt)),this.actor.registerMessageHandler("RMT",(mt,wt)=>this._getWorkerSource(mt,wt.type,wt.source).removeTile(wt)),this.actor.registerMessageHandler("RS",(mt,wt)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[mt]||!this.workerSources[mt][wt.type]||!this.workerSources[mt][wt.type][wt.source])return;const kt=this.workerSources[mt][wt.type][wt.source];delete this.workerSources[mt][wt.type][wt.source],kt.removeSource!==void 0&&kt.removeSource(wt)})),this.actor.registerMessageHandler("RM",mt=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[mt],delete this.availableImages[mt],delete this.workerSources[mt],delete this.demWorkerSources[mt]})),this.actor.registerMessageHandler("SR",(mt,wt)=>l._(this,void 0,void 0,function*(){this.referrer=wt})),this.actor.registerMessageHandler("SRPS",(mt,wt)=>this._syncRTLPluginState(mt,wt)),this.actor.registerMessageHandler("IS",(mt,wt)=>l._(this,void 0,void 0,function*(){this.self.importScripts(wt)})),this.actor.registerMessageHandler("SI",(mt,wt)=>this._setImages(mt,wt)),this.actor.registerMessageHandler("UL",(mt,wt)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(mt).update(wt.layers,wt.removedIds)})),this.actor.registerMessageHandler("SL",(mt,wt)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(mt).replace(wt)}))}_setImages(ht,mt){return l._(this,void 0,void 0,function*(){this.availableImages[ht]=mt;for(const wt in this.workerSources[ht]){const kt=this.workerSources[ht][wt];for(const vt in kt)kt[vt].availableImages=mt}})}_syncRTLPluginState(ht,mt){return l._(this,void 0,void 0,function*(){return yield l.cK.syncState(mt,this.self.importScripts)})}_getAvailableImages(ht){let mt=this.availableImages[ht];return mt||(mt=[]),mt}_getLayerIndex(ht){let mt=this.layerIndexes[ht];return mt||(mt=this.layerIndexes[ht]=new o),mt}_getWorkerSource(ht,mt,wt){if(this.workerSources[ht]||(this.workerSources[ht]={}),this.workerSources[ht][mt]||(this.workerSources[ht][mt]={}),!this.workerSources[ht][mt][wt]){const kt={sendAsync:(vt,ie)=>(vt.targetMapId=ht,this.actor.sendAsync(vt,ie))};switch(mt){case"vector":this.workerSources[ht][mt][wt]=new C(kt,this._getLayerIndex(ht),this._getAvailableImages(ht));break;case"geojson":this.workerSources[ht][mt][wt]=new un(kt,this._getLayerIndex(ht),this._getAvailableImages(ht));break;default:this.workerSources[ht][mt][wt]=new this.externalWorkerSourceTypes[mt](kt,this._getLayerIndex(ht),this._getAvailableImages(ht))}}return this.workerSources[ht][mt][wt]}_getDEMWorkerSource(ht,mt){return this.demWorkerSources[ht]||(this.demWorkerSources[ht]={}),this.demWorkerSources[ht][mt]||(this.demWorkerSources[ht][mt]=new E),this.demWorkerSources[ht][mt]}}return l.i(self)&&(self.worker=new Nn(self)),Nn}),s("index",["exports","./shared"],function(l,o){var g="5.4.0";function _(){var b=new o.A(4);return o.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}let I,C;const E={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(b,r,c){const p=requestAnimationFrame(A=>{y(),r(A)}),{unsubscribe:y}=o.s(b.signal,"abort",()=>{y(),cancelAnimationFrame(p),c(o.c())},!1)},frameAsync(b){return new Promise((r,c)=>{this.frame(b,r,c)})},getImageData(b,r=0){return this.getImageCanvasContext(b).getImageData(-r,-r,b.width+2*r,b.height+2*r)},getImageCanvasContext(b){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=b.width,r.height=b.height,c.drawImage(b,0,0,b.width,b.height),c},resolveURL:b=>(I||(I=document.createElement("a")),I.href=b,I.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(C==null&&(C=matchMedia("(prefers-reduced-motion: reduce)")),C.matches)}};class S{static testProp(r){if(!S.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in S.docStyle)return r[c];return r[0]}static create(r,c,p){const y=window.document.createElement(r);return c!==void 0&&(y.className=c),p&&p.appendChild(y),y}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){S.docStyle&&S.selectProp&&(S.userSelect=S.docStyle[S.selectProp],S.docStyle[S.selectProp]="none")}static enableDrag(){S.docStyle&&S.selectProp&&(S.docStyle[S.selectProp]=S.userSelect)}static setTransform(r,c){r.style[S.transformProp]=c}static addEventListener(r,c,p,y={}){r.addEventListener(c,p,"passive"in y?y:y.capture)}static removeEventListener(r,c,p,y={}){r.removeEventListener(c,p,"passive"in y?y:y.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",S.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",S.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",S.suppressClickInternal,!0)},0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,p){const y=c.boundingClientRect;return new o.P((p.clientX-y.left)/c.x-r.clientLeft,(p.clientY-y.top)/c.y-r.clientTop)}static mousePos(r,c){const p=S.getScale(r);return S.getPoint(r,p,c)}static touchPos(r,c){const p=[],y=S.getScale(r);for(let A=0;A<c.length;A++)p.push(S.getPoint(r,y,c[A]));return p}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const c=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),p=c.querySelectorAll("script");for(const y of p)y.remove();return S.clean(c),c.innerHTML}static isPossiblyDangerous(r,c){const p=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!p.includes("javascript:")&&!p.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const c=r.children;for(const p of c)S.removeAttributes(p),S.clean(p)}static removeAttributes(r){for(const{name:c,value:p}of r.attributes)S.isPossiblyDangerous(c,p)&&r.removeAttribute(c)}}S.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,S.selectProp=S.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),S.transformProp=S.testProp(["transform","WebkitTransform"]);const k={supported:!1,testSupport:function(b){!U&&N&&(F?j(b):D=b)}};let D,N,U=!1,F=!1;function j(b){const r=b.createTexture();b.bindTexture(b.TEXTURE_2D,r);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,N),b.isContextLost())return;k.supported=!0}catch{}b.deleteTexture(r),U=!0}var $;typeof document<"u"&&(N=document.createElement("img"),N.onload=()=>{D&&j(D),D=null,F=!0},N.onerror=()=>{U=!0,D=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(b){let r,c,p,y;b.resetRequestQueue=()=>{r=[],c=0,p=0,y={}},b.addThrottleControl=B=>{const G=p++;return y[G]=B,G},b.removeThrottleControl=B=>{delete y[B],T()},b.getImage=(B,G,Y=!0)=>new Promise((nt,rt)=>{k.supported&&(B.headers||(B.headers={}),B.headers.accept="image/webp,*/*"),o.e(B,{type:"image"}),r.push({abortController:G,requestParameters:B,supportImageRefresh:Y,state:"queued",onError:ft=>{rt(ft)},onSuccess:ft=>{nt(ft)}}),T()});const A=B=>o._(this,void 0,void 0,function*(){B.state="running";const{requestParameters:G,supportImageRefresh:Y,onError:nt,onSuccess:rt,abortController:ft}=B,_t=Y===!1&&!o.i(self)&&!o.g(G.url)&&(!G.headers||Object.keys(G.headers).reduce((Ft,Zt)=>Ft&&Zt==="accept",!0));c++;const Ot=_t?L(G,ft):o.m(G,ft);try{const Ft=yield Ot;delete B.abortController,B.state="completed",Ft.data instanceof HTMLImageElement||o.b(Ft.data)?rt(Ft):Ft.data&&rt({data:yield(Dt=Ft.data,typeof createImageBitmap=="function"?o.f(Dt):o.h(Dt)),cacheControl:Ft.cacheControl,expires:Ft.expires})}catch(Ft){delete B.abortController,nt(Ft)}finally{c--,T()}var Dt}),T=()=>{const B=(()=>{for(const G of Object.keys(y))if(y[G]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let G=c;G<B&&r.length>0;G++){const Y=r.shift();Y.abortController.signal.aborted?G--:A(Y)}},L=(B,G)=>new Promise((Y,nt)=>{const rt=new Image,ft=B.url,_t=B.credentials;_t&&_t==="include"?rt.crossOrigin="use-credentials":(_t&&_t==="same-origin"||!o.d(ft))&&(rt.crossOrigin="anonymous"),G.signal.addEventListener("abort",()=>{rt.src="",nt(o.c())}),rt.fetchPriority="high",rt.onload=()=>{rt.onerror=rt.onload=null,Y({data:rt})},rt.onerror=()=>{rt.onerror=rt.onload=null,G.signal.aborted||nt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},rt.src=ft})}($||($={})),$.resetRequestQueue();class K{constructor(r){this._transformRequestFn=r}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function tt(b){const r=[];if(typeof b=="string")r.push({id:"default",url:b});else if(b&&b.length>0){const c=[];for(const{id:p,url:y}of b){const A=`${p}${y}`;c.indexOf(A)===-1&&(c.push(A),r.push({id:p,url:y}))}}return r}function it(b,r,c){try{const p=new URL(b);return p.pathname+=`${r}${c}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${b}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class et{constructor(r,c,p,y){this.context=r,this.format=p,this.texture=r.gl.createTexture(),this.update(c,y)}update(r,c,p){const{width:y,height:A}=r,T=!(this.size&&this.size[0]===y&&this.size[1]===A||p),{context:L}=this,{gl:B}=L;if(this.useMipmap=!!(c&&c.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!c||c.premultiply!==!1)),T)this.size=[y,A],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||o.b(r)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,r):B.texImage2D(B.TEXTURE_2D,0,this.format,y,A,0,this.format,B.UNSIGNED_BYTE,r.data);else{const{x:G,y:Y}=p||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||o.b(r)?B.texSubImage2D(B.TEXTURE_2D,0,G,Y,B.RGBA,B.UNSIGNED_BYTE,r):B.texSubImage2D(B.TEXTURE_2D,0,G,Y,y,A,B.RGBA,B.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D),L.pixelStoreUnpackFlipY.setDefault(),L.pixelStoreUnpack.setDefault(),L.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,c,p){const{context:y}=this,{gl:A}=y;A.bindTexture(A.TEXTURE_2D,this.texture),p!==A.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=A.LINEAR),r!==this.filter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,r),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,p||r),this.filter=r),c!==this.wrap&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,c),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function q(b){const{userImage:r}=b;return!!(r&&r.render&&r.render())&&(b.data.replace(new Uint8Array(r.data.buffer)),!0)}class ut extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:p}of this.requestors)p(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new o.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let p=!0;const y=c.data||c.spriteData;return this._validateStretch(c.stretchX,y&&y.width)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,y&&y.height)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "content" value`))),p=!1),p}_validateStretch(r,c){if(!r)return!0;let p=0;for(const y of r){if(y[0]<p||y[1]<y[0]||c<y[1])return!1;p=y[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const p=c.spriteData,y=p&&p.width||c.data.width,A=p&&p.height||c.data.height;return!(r[0]<0||y<r[0]||r[1]<0||A<r[1]||r[2]<0||y<r[2]||r[3]<0||A<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,p=!0){const y=this.getImage(r);if(p&&(y.data.width!==c.data.width||y.data.height!==c.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=y.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((c,p)=>{let y=!0;if(!this.isLoaded())for(const A of r)this.images[A]||(y=!1);this.isLoaded()||y?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})})}_getImagesForIds(r){const c={};for(const p of r){let y=this.getImage(p);y||(this.fire(new o.l("styleimagemissing",{id:p})),y=this.getImage(p)),y?c[p]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:o.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],p=this.getImage(r);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const y={w:p.data.width+2,h:p.data.height+2,x:0,y:0},A=new o.I(y,p);this.patterns[r]={bin:y,position:A}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new et(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const A in this.patterns)r.push(this.patterns[A].bin);const{w:c,h:p}=o.p(r),y=this.atlasImage;y.resize({width:c||1,height:p||1});for(const A in this.patterns){const{bin:T}=this.patterns[A],L=T.x+1,B=T.y+1,G=this.getImage(A).data,Y=G.width,nt=G.height;o.R.copy(G,y,{x:0,y:0},{x:L,y:B},{width:Y,height:nt}),o.R.copy(G,y,{x:0,y:nt-1},{x:L,y:B-1},{width:Y,height:1}),o.R.copy(G,y,{x:0,y:0},{x:L,y:B+nt},{width:Y,height:1}),o.R.copy(G,y,{x:Y-1,y:0},{x:L-1,y:B},{width:1,height:nt}),o.R.copy(G,y,{x:0,y:0},{x:L+Y,y:B},{width:1,height:nt})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||o.w(`Image with ID: "${c}" was not found`),q(p)&&this.updateImage(c,p)}}}const Ct=1e20;function ot(b,r,c,p,y,A,T,L,B){for(let G=r;G<r+p;G++)bt(b,c*A+G,A,y,T,L,B);for(let G=c;G<c+y;G++)bt(b,G*A+r,1,p,T,L,B)}function bt(b,r,c,p,y,A,T){A[0]=0,T[0]=-1e20,T[1]=Ct,y[0]=b[r];for(let L=1,B=0,G=0;L<p;L++){y[L]=b[r+L*c];const Y=L*L;do{const nt=A[B];G=(y[L]-y[nt]+Y-nt*nt)/(L-nt)/2}while(G<=T[B]&&--B>-1);B++,A[B]=L,T[B]=G,T[B+1]=Ct}for(let L=0,B=0;L<p;L++){for(;T[B+1]<L;)B++;const G=A[B],Y=L-G;b[r+L*c]=y[G]+Y*Y}}class X{constructor(r,c){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return o._(this,void 0,void 0,function*(){const c=[];for(const A in r)for(const T of r[A])c.push(this._getAndCacheGlyphsPromise(A,T));const p=yield Promise.all(c),y={};for(const{stack:A,id:T,glyph:L}of p)y[A]||(y[A]={}),y[A][T]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics};return y})}_getAndCacheGlyphsPromise(r,c){return o._(this,void 0,void 0,function*(){let p=this.entries[r];p||(p=this.entries[r]={glyphs:{},requests:{},ranges:{}});let y=p.glyphs[c];if(y!==void 0)return{stack:r,id:c,glyph:y};if(y=this._tinySDF(p,r,c),y)return p.glyphs[c]=y,{stack:r,id:c,glyph:y};const A=Math.floor(c/256);if(256*A>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[A])return{stack:r,id:c,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[A]){const L=X.loadGlyphRange(r,A,this.url,this.requestManager);p.requests[A]=L}const T=yield p.requests[A];for(const L in T)this._doesCharSupportLocalGlyph(+L)||(p.glyphs[+L]=T[+L]);return p.ranges[A]=!0,{stack:r,id:c,glyph:T[c]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||o.u["CJK Unified Ideographs"](r)||o.u["Hangul Syllables"](r)||o.u.Hiragana(r)||o.u.Katakana(r)||o.u["CJK Symbols and Punctuation"](r)||o.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,c,p){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(p))return;let A=r.tinySDF;if(!A){let L="400";/bold/i.test(c)?L="900":/medium/i.test(c)?L="500":/light/i.test(c)&&(L="200"),A=r.tinySDF=new X.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:L})}const T=A.draw(String.fromCharCode(p));return{id:p,bitmap:new o.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}X.loadGlyphRange=function(b,r,c,p){return o._(this,void 0,void 0,function*(){const y=256*r,A=y+255,T=p.transformRequest(c.replace("{fontstack}",b).replace("{range}",`${y}-${A}`),"Glyphs"),L=yield o.n(T,new AbortController);if(!L||!L.data)throw new Error(`Could not load glyph range. range: ${r}, ${y}-${A}`);const B={};for(const G of o.o(L.data))B[G.id]=G;return B})},X.TinySDF=class{constructor({fontSize:b=24,buffer:r=3,radius:c=8,cutoff:p=.25,fontFamily:y="sans-serif",fontWeight:A="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=p,this.radius=c;const L=this.size=b+4*r,B=this._createCanvas(L),G=this.ctx=B.getContext("2d",{willReadFrequently:!0});G.font=`${T} ${A} ${b}px ${y}`,G.textBaseline="alphabetic",G.textAlign="left",G.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(b){const r=document.createElement("canvas");return r.width=r.height=b,r}draw(b){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:y,actualBoundingBoxRight:A}=this.ctx.measureText(b),T=Math.ceil(c),L=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(A-y))),B=Math.min(this.size-this.buffer,T+Math.ceil(p)),G=L+2*this.buffer,Y=B+2*this.buffer,nt=Math.max(G*Y,0),rt=new Uint8ClampedArray(nt),ft={data:rt,width:G,height:Y,glyphWidth:L,glyphHeight:B,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(L===0||B===0)return ft;const{ctx:_t,buffer:Ot,gridInner:Dt,gridOuter:Ft}=this;_t.clearRect(Ot,Ot,L,B),_t.fillText(b,Ot,Ot+T);const Zt=_t.getImageData(Ot,Ot,L,B);Ft.fill(Ct,0,nt),Dt.fill(0,0,nt);for(let Qt=0;Qt<B;Qt++)for(let ne=0;ne<L;ne++){const se=Zt.data[4*(Qt*L+ne)+3]/255;if(se===0)continue;const fe=(Qt+Ot)*G+ne+Ot;if(se===1)Ft[fe]=0,Dt[fe]=Ct;else{const le=.5-se;Ft[fe]=le>0?le*le:0,Dt[fe]=le<0?le*le:0}}ot(Ft,0,0,G,Y,G,this.f,this.v,this.z),ot(Dt,Ot,Ot,L,B,G,this.f,this.v,this.z);for(let Qt=0;Qt<nt;Qt++){const ne=Math.sqrt(Ft[Qt])-Math.sqrt(Dt[Qt]);rt[Qt]=Math.round(255-255*(ne/this.radius+this.cutoff))}return ft}};class Wt{constructor(){this.specification=o.v.light.position}possiblyEvaluate(r,c){return o.z(r.expression.evaluate(c))}interpolate(r,c,p){return{x:o.B.number(r.x,c.x,p),y:o.B.number(r.y,c.y,p),z:o.B.number(r.z,c.z,p)}}}let Vt;class Bt extends o.E{constructor(r){super(),Vt=Vt||new o.r({anchor:new o.D(o.v.light.anchor),position:new Wt,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(Vt),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(o.t,r,c))for(const p in r){const y=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),y):this._transitionable.setValue(p,y)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,p){return(!p||p.validate!==!1)&&o.x(this,r.call(o.y,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const ae=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class ye extends o.E{constructor(r){super(),this._transitionable=new o.T(ae),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0))}setSky(r,c={}){if(!this._validate(o.F,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in r){const y=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),y):this._transitionable.setValue(p,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,p={}){return(p==null?void 0:p.validate)!==!1&&o.x(this,r.call(o.y,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class en{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const p=r.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(r,c)),this.dashEntry[p]}getDashRanges(r,c,p){const y=[];let A=r.length%2==1?-r[r.length-1]*p:0,T=r[0]*p,L=!0;y.push({left:A,right:T,isDash:L,zeroLength:r[0]===0});let B=r[0];for(let G=1;G<r.length;G++){L=!L;const Y=r[G];A=B*p,B+=Y,T=B*p,y.push({left:A,right:T,isDash:L,zeroLength:Y===0})}return y}addRoundDash(r,c,p){const y=c/2;for(let A=-p;A<=p;A++){const T=this.width*(this.nextRow+p+A);let L=0,B=r[L];for(let G=0;G<this.width;G++){G/B.right>1&&(B=r[++L]);const Y=Math.abs(G-B.left),nt=Math.abs(G-B.right),rt=Math.min(Y,nt);let ft;const _t=A/p*(y+1);if(B.isDash){const Ot=y-Math.abs(_t);ft=Math.sqrt(rt*rt+Ot*Ot)}else ft=y-Math.sqrt(rt*rt+_t*_t);this.data[T+G]=Math.max(0,Math.min(255,ft+128))}}}addRegularDash(r){for(let L=r.length-1;L>=0;--L){const B=r[L],G=r[L+1];B.zeroLength?r.splice(L,1):G&&G.isDash===B.isDash&&(G.left=B.left,r.splice(L,1))}const c=r[0],p=r[r.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const y=this.width*this.nextRow;let A=0,T=r[A];for(let L=0;L<this.width;L++){L/T.right>1&&(T=r[++A]);const B=Math.abs(L-T.left),G=Math.abs(L-T.right),Y=Math.min(B,G);this.data[y+L]=Math.max(0,Math.min(255,(T.isDash?Y:-Y)+128))}}addDash(r,c){const p=c?7:0,y=2*p+1;if(this.nextRow+y>this.height)return o.w("LineAtlas out of space"),null;let A=0;for(let L=0;L<r.length;L++)A+=r[L];if(A!==0){const L=this.width/A,B=this.getDashRanges(r,this.width,L);c?this.addRoundDash(B,L,p):this.addRegularDash(B)}const T={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:A};return this.nextRow+=y,this.dirty=!0,T}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Jt="maplibre_preloaded_worker_pool";class Gt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Gt.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Jt]}numActive(){return Object.keys(this.active).length}}const Re=Math.floor(E.hardwareConcurrency/2);let $e,Ce;function nn(){return $e||($e=new Gt),$e}Gt.workerCount=o.G(globalThis)?Math.max(Math.min(Re,3),1):1;class be{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const p=this.workerPool.acquire(c);for(let y=0;y<p.length;y++){const A=new o.H(p[y],c);A.name=`Worker ${y}`,this.actors.push(A)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const p=[];for(const y of this.actors)p.push(y.sendAsync({type:r,data:c}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const p of this.actors)p.registerMessageHandler(r,c)}}function Me(){return Ce||(Ce=new be(nn(),o.J),Ce.registerMessageHandler("GR",(b,r,c)=>o.m(r,c))),Ce}function xe(b,r){const c=o.K();return o.L(c,c,[1,1,0]),o.M(c,c,[.5*b.width,.5*b.height,1]),b.calculatePosMatrix?o.N(c,c,b.calculatePosMatrix(r.toUnwrapped())):c}function Be(b,r,c,p,y,A,T){var L;const B=function(rt,ft,_t){if(rt)for(const Ot of rt){const Dt=ft[Ot];if(Dt&&Dt.source===_t&&Dt.type==="fill-extrusion")return!0}else for(const Ot in ft){const Dt=ft[Ot];if(Dt.source===_t&&Dt.type==="fill-extrusion")return!0}return!1}((L=y==null?void 0:y.layers)!==null&&L!==void 0?L:null,r,b.id),G=A.maxPitchScaleFactor(),Y=b.tilesIn(p,G,B);Y.sort(Je);const nt=[];for(const rt of Y)nt.push({wrappedTileID:rt.tileID.wrapped().key,queryResults:rt.tile.queryRenderedFeatures(r,c,b._state,rt.queryGeometry,rt.cameraQueryGeometry,rt.scale,y,A,G,xe(b.transform,rt.tileID),T?(ft,_t)=>T(rt.tileID,ft,_t):void 0)});return function(rt,ft){for(const _t in rt)for(const Ot of rt[_t])Ln(Ot,ft);return rt}(function(rt){const ft={},_t={};for(const Ot of rt){const Dt=Ot.queryResults,Ft=Ot.wrappedTileID,Zt=_t[Ft]=_t[Ft]||{};for(const Qt in Dt){const ne=Dt[Qt],se=Zt[Qt]=Zt[Qt]||{},fe=ft[Qt]=ft[Qt]||[];for(const le of ne)se[le.featureIndex]||(se[le.featureIndex]=!0,fe.push(le))}}return ft}(nt),b)}function Je(b,r){const c=b.tileID,p=r.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function Ln(b,r){const c=b.feature,p=r.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=p}function Tt(b,r,c){return o._(this,void 0,void 0,function*(){let p=b;if(b.url?p=(yield o.j(r.transformRequest(b.url,"Source"),c)).data:yield E.frameAsync(c),!p)return null;const y=o.O(o.e(p,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(y.vectorLayerIds=p.vector_layers.map(A=>A.id)),y})}class H{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof o.Q?new o.Q(r.lng,r.lat):o.Q.convert(r),this}setSouthWest(r){return this._sw=r instanceof o.Q?new o.Q(r.lng,r.lat):o.Q.convert(r),this}extend(r){const c=this._sw,p=this._ne;let y,A;if(r instanceof o.Q)y=r,A=r;else{if(!(r instanceof H))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(H.convert(r)):this.extend(o.Q.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(o.Q.convert(r)):this;if(y=r._sw,A=r._ne,!y||!A)return this}return c||p?(c.lng=Math.min(y.lng,c.lng),c.lat=Math.min(y.lat,c.lat),p.lng=Math.max(A.lng,p.lng),p.lat=Math.max(A.lat,p.lat)):(this._sw=new o.Q(y.lng,y.lat),this._ne=new o.Q(A.lng,A.lat)),this}getCenter(){return new o.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.Q(this.getWest(),this.getNorth())}getSouthEast(){return new o.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:p}=o.Q.convert(r);let y=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&y}static convert(r){return r instanceof H?r:r&&new H(r)}static fromLngLat(r,c=0){const p=360*c/40075017,y=p/Math.cos(Math.PI/180*r.lat);return new H(new o.Q(r.lng-y,r.lat-p),new o.Q(r.lng+y,r.lat+p))}adjustAntiMeridian(){const r=new o.Q(this._sw.lng,this._sw.lat),c=new o.Q(this._ne.lng,this._ne.lat);return new H(r,r.lng>c.lng?new o.Q(c.lng+360,c.lat):c)}}class Rt{constructor(r,c,p){this.bounds=H.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),p=Math.floor(o.U(this.bounds.getWest())*c),y=Math.floor(o.S(this.bounds.getNorth())*c),A=Math.ceil(o.U(this.bounds.getEast())*c),T=Math.ceil(o.S(this.bounds.getSouth())*c);return r.x>=p&&r.x<A&&r.y>=y&&r.y<T}}class Pt extends o.E{constructor(r,c,p,y){if(super(),this.id=r,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.O(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Tt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(o.e(this,r),r.bounds&&(this.tileBounds=new Rt(r.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new o.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(r){return o._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};p.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((A,T)=>{r.reloadPromise={resolve:A,reject:T}})}else r.actor=this.dispatcher.getActor(),y="LT";r.abortController=new AbortController;try{const A=yield r.actor.sendAsync({type:y,data:p},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,A)}catch(A){if(delete r.abortController,r.aborted)return;if(A&&A.status!==404)throw A;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const p=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(p.resolve).catch(p.reject)}}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class gt extends o.E{constructor(r,c,p,y){super(),this.id=r,this.dispatcher=p,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.O(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield Tt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new Rt(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(c){this._tileJSONRequest=null,this.fire(new o.k(c))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return o.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return o._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const p=yield $.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&r.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const y=this.map.painter.context,A=y.gl,T=p.data;r.texture=this.map.painter.getTileTexture(T.width),r.texture?r.texture.update(T,{useMipmap:!0}):(r.texture=new et(y,T,A.RGBA,{useMipmap:!0}),r.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(p){if(delete r.abortController,r.aborted)r.state="unloaded";else if(p)throw r.state="errored",p}})}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class yt extends gt{constructor(r,c,p,y){super(r,c,p,y),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return o._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const y=yield $.getImage(p,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(y&&y.data){const A=y.data;this.map._refreshExpiredTiles&&y.cacheControl&&y.expires&&r.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const T=o.b(A)&&o.V()?A:yield this.readImageNow(A),L={type:this.type,uid:r.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const B=yield r.actor.sendAsync({type:"LDT",data:L});r.dem=B,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(y){if(delete r.abortController,r.aborted)r.state="unloaded";else if(y)throw r.state="errored",y}})}readImageNow(r){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.W()){const c=r.width+2,p=r.height+2;try{return new o.R({width:c,height:p},yield o.X(r,-1,-1,c,p))}catch{}}return E.getImageData(r,1)})}_getNeighboringTiles(r){const c=r.canonical,p=Math.pow(2,c.z),y=(c.x-1+p)%p,A=c.x===0?r.wrap-1:r.wrap,T=(c.x+1+p)%p,L=c.x+1===p?r.wrap+1:r.wrap,B={};return B[new o.Y(r.overscaledZ,A,c.z,y,c.y).key]={backfilled:!1},B[new o.Y(r.overscaledZ,L,c.z,T,c.y).key]={backfilled:!1},c.y>0&&(B[new o.Y(r.overscaledZ,A,c.z,y,c.y-1).key]={backfilled:!1},B[new o.Y(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},B[new o.Y(r.overscaledZ,L,c.z,T,c.y-1).key]={backfilled:!1}),c.y+1<p&&(B[new o.Y(r.overscaledZ,A,c.z,y,c.y+1).key]={backfilled:!1},B[new o.Y(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},B[new o.Y(r.overscaledZ,L,c.z,T,c.y+1).key]={backfilled:!1}),B}unloadTile(r){return o._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class jt extends o.E{constructor(r,c,p,y){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(y),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.Z,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.Z,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(o.Z/this.tileSize)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return o._(this,void 0,void 0,function*(){const r=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(c=>c.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){const r=new H,c=yield this.getData();let p;switch(c.type){case"FeatureCollection":p=c.features.map(y=>this.getCoordinatesFromGeometry(y.geometry)).flat(1/0);break;case"Feature":p=this.getCoordinatesFromGeometry(c.geometry);break;default:p=this.getCoordinatesFromGeometry(c)}if(p.length==0)return r;for(let y=0;y<p.length-1;y+=2)r.extend([p[y],p[y+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:p}})}_updateWorkerData(r){return o._(this,void 0,void 0,function*(){const c=o.e({type:this.type},this.workerOptions);r?c.dataDiff=r:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(E.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.l("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));let y=null;p.resourceTiming&&p.resourceTiming[this.id]&&(y=p.resourceTiming[this.id].slice(0));const A={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&o.e(A,{resourceTiming:y}),this.fire(new o.l("data",Object.assign(Object.assign({},A),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},A),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(p))}})}loaded(){return this._pendingLoads===0}loadTile(r){return o._(this,void 0,void 0,function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const p={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const y=yield this.actor.sendAsync({type:c,data:p},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(y,this.map.painter,c==="RT")})}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class ee extends o.E{constructor(r,c,p,y){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}load(r){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield $.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new o.k(c))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(o.$.fromLngLat);var p;return this.tileID=function(y){let A=1/0,T=1/0,L=-1/0,B=-1/0;for(const rt of y)A=Math.min(A,rt.x),T=Math.min(T,rt.y),L=Math.max(L,rt.x),B=Math.max(B,rt.y);const G=Math.max(L-A,B-T),Y=Math.max(0,Math.floor(-Math.log(G)/Math.LN2)),nt=Math.pow(2,Y);return new o.a1(Y,Math.floor((A+L)/2*nt),Math.floor((T+B)/2*nt))}(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(y=>this.tileID.getTilePoint(y)._round()),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.texture||(this.texture=new et(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const y in this.tiles){const A=this.tiles[y];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,p=!0)}p&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){let c=1/0,p=1/0,y=-1/0,A=-1/0;for(const L of r)c=Math.min(c,L.x),p=Math.min(p,L.y),y=Math.max(y,L.x),A=Math.max(A,L.y);const T={};for(let L=0;L<=o.a0;L++){const B=Math.pow(2,L),G=Math.floor(c*B),Y=Math.floor(p*B),nt=Math.floor(y*B),rt=Math.floor(A*B);T[L]={minTileX:G,minTileY:Y,maxTileX:nt,maxTileY:rt}}return T}}class ue extends ee{constructor(r,c,p,y){super(r,c,p,y),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.a2(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.k(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new o.k(new o.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new et(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const y in this.tiles){const A=this.tiles[y];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,p=!0)}p&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ut extends ee{constructor(r,c,p,y){super(r,c,p,y),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(A=>!Array.isArray(A)||A.length!==2||A.some(T=>typeof T!="number"))||this.fire(new o.k(new o.a3(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a3(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.k(new o.a3(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a3(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a3(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,p=c.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new et(c,this.canvas,p.RGBA,{premultiply:!0});let y=!1;for(const A in this.tiles){const T=this.tiles[A];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Ie={},je=b=>{switch(b){case"geojson":return jt;case"image":return ee;case"raster":return gt;case"raster-dem":return yt;case"vector":return Pt;case"video":return ue;case"canvas":return Ut}return Ie[b]},Le="RTLPluginLoaded";class Ke extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Me()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return o._(this,arguments,void 0,function*(c,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=E.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(Le))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let _n=null;function wn(){return _n||(_n=new Ke),_n}class de{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=o.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(y,A){const T={};if(!A)return T;for(const L of y){const B=L.layerIds.map(G=>A.getLayer(G)).filter(Boolean);if(B.length!==0){L.layers=B,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map(G=>B.filter(Y=>Y.id===G)[0]));for(const G of B)T[G.id]=L}}return T}(r.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const A=this.buckets[y];if(A instanceof o.a6){if(this.hasSymbolBuckets=!0,!p)break;A.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const A=this.buckets[y];if(A instanceof o.a6&&A.hasRTLText){this.hasRTLText=!0,wn().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const A=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(y).queryRadius(A))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const p in this.buckets){const y=this.buckets[p];y.uploadPending()&&y.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new et(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new et(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,p,y,A,T,L,B,G,Y,nt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:A,scale:T,tileSize:this.tileSize,pixelPosMatrix:Y,transform:B,params:L,queryPadding:this.queryPadding*G,getElevation:nt},r,c,p):{}}querySourceFeatures(r,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const y=p.loadVTLayers(),A=c&&c.sourceLayer?c.sourceLayer:"",T=y._geojsonTileLayer||y[A];if(!T)return;const L=o.a7(c&&c.filter),{z:B,x:G,y:Y}=this.tileID.canonical,nt={z:B,x:G,y:Y};for(let rt=0;rt<T.length;rt++){const ft=T.feature(rt);if(L.needGeometry){const Dt=o.a8(ft,!0);if(!L.filter(new o.C(this.tileID.overscaledZ),Dt,this.tileID.canonical))continue}else if(!L.filter(new o.C(this.tileID.overscaledZ),ft))continue;const _t=p.getId(ft,A),Ot=new o.a9(ft,B,G,Y,_t);Ot.tile=nt,r.push(Ot)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const p=o.aa(r.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const p=Date.now();let y=!1;if(this.expirationTime>p)y=!1;else if(c)if(this.expirationTime<c)y=!0;else{const A=this.expirationTime-c;A?this.expirationTime=p+Math.max(A,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!c.style.hasLayer(y))continue;const A=this.buckets[y],T=A.layers[0].sourceLayer||"_geojsonTileLayer",L=p[T],B=r[T];if(!L||!B||Object.keys(B).length===0)continue;A.update(B,L,this.imageAtlas&&this.imageAtlas.patternPositions||{});const G=c&&c.style&&c.style.getLayer(y);G&&(this.queryPadding=Math.max(this.queryPadding,G.queryRadius(A)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<E.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=E.now()+r}setDependencies(r,c){const p={};for(const y of c)p[y]=!0;this.dependencies[r]=p}hasDependency(r,c){for(const p of r){const y=this.dependencies[p];if(y){for(const A of c)if(y[A])return!0}}return!1}}class ve{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,p){const y=r.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const A={value:c,timeout:void 0};if(p!==void 0&&(A.timeout=setTimeout(()=>{this.remove(r,A)},p)),this.data[y].push(A),this.order.push(y),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const p=r.wrapped().key,y=c===void 0?0:this.data[p].indexOf(c),A=this.data[p][y];return this.data[p].splice(y,1),A.timeout&&clearTimeout(A.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(A.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const p in this.data)for(const y of this.data[p])r(y.value)||c.push(y);for(const p of c)this.remove(p.value.tileID,p)}}class Te{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,p){const y=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][y]=this.stateChanges[r][y]||{},o.e(this.stateChanges[r][y],p),this.deletedStates[r]===null){this.deletedStates[r]={};for(const A in this.state[r])A!==y&&(this.deletedStates[r][A]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][y]===null){this.deletedStates[r][y]={};for(const A in this.state[r][y])p[A]||(this.deletedStates[r][y][A]=null)}else for(const A in p)this.deletedStates[r]&&this.deletedStates[r][y]&&this.deletedStates[r][y][A]===null&&delete this.deletedStates[r][y][A]}removeFeatureState(r,c,p){if(this.deletedStates[r]===null)return;const y=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},p&&c!==void 0)this.deletedStates[r][y]!==null&&(this.deletedStates[r][y]=this.deletedStates[r][y]||{},this.deletedStates[r][y][p]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][y])for(p in this.deletedStates[r][y]={},this.stateChanges[r][y])this.deletedStates[r][y][p]=null;else this.deletedStates[r][y]=null;else this.deletedStates[r]=null}getState(r,c){const p=String(c),y=o.e({},(this.state[r]||{})[p],(this.stateChanges[r]||{})[p]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const A=this.deletedStates[r][c];if(A===null)return{};for(const T in A)delete y[T]}return y}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const p={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const A={};for(const T in this.stateChanges[y])this.state[y][T]||(this.state[y][T]={}),o.e(this.state[y][T],this.stateChanges[y][T]),A[T]=this.state[y][T];p[y]=A}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const A={};if(this.deletedStates[y]===null)for(const T in this.state[y])A[T]={},this.state[y][T]={};else for(const T in this.deletedStates[y]){if(this.deletedStates[y][T]===null)this.state[y][T]={};else for(const L of Object.keys(this.deletedStates[y][T]))delete this.state[y][T][L];A[T]=this.state[y][T]}p[y]=p[y]||{},o.e(p[y],A)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const y in r)r[y].setFeatureState(p,c)}}const Ye=89.25;function un(b,r){const c=o.ae(r.lat,-85.051129,o.af);return new o.P(o.U(r.lng)*b,o.S(c)*b)}function Nn(b,r){return new o.$(r.x/b,r.y/b).toLngLat()}function oe(b){return b.cameraToCenterDistance*Math.min(.85*Math.tan(o.ab(90-b.pitch)),Math.tan(o.ab(Ye-b.pitch)))}function ht(b,r){const c=b.canonical,p=r/o.ac(c.z),y=c.x+Math.pow(2,c.z)*b.wrap,A=o.ad(new Float64Array(16));return o.L(A,A,[y*p,c.y*p,0]),o.M(A,A,[p/o.Z,p/o.Z,1]),A}function mt(b,r,c,p,y){const A=o.$.fromLngLat(b,r),T=y*o.ag(1,b.lat),L=T*Math.cos(o.ab(c)),B=Math.sqrt(T*T-L*L),G=B*Math.sin(o.ab(-p)),Y=B*Math.cos(o.ab(-p));return new o.$(A.x+G,A.y+Y,A.z+L)}function wt(b,r,c){const p=r.intersectsFrustum(b);if(!c)return p;const y=r.intersectsPlane(c);return p===0||y===0?0:p===2&&y===2?2:1}function kt(b,r,c){let p=0;const y=(c-r)/10;for(let A=0;A<10;A++)p+=y*Math.pow(Math.cos(r+(A+.5)/10*(c-r)),b);return p}function vt(b,r){return function(c,p,y,A,T){const L=2*((b-1)/o.ah(Math.cos(o.ab(Ye-T))/Math.cos(o.ab(Ye)))-1),B=Math.acos(y/A),G=2*kt(L-1,0,o.ab(T/2)),Y=Math.min(o.ab(Ye),B+o.ab(T/2)),nt=kt(L-1,Math.min(Y,B-o.ab(T/2)),Y),rt=Math.atan(p/y),ft=Math.hypot(p,y);let _t=c;return _t+=o.ah(A/ft/Math.max(.5,Math.cos(o.ab(T/2)))),_t+=L*o.ah(Math.cos(rt))/2,_t-=o.ah(Math.max(1,nt/G/r))/2,_t}}const ie=vt(9.314,3);function he(b,r){const c=(r.roundZoom?Math.round:Math.floor)(b.zoom+o.ah(b.tileSize/r.tileSize));return Math.max(0,c)}function Kt(b,r){const c=b.getCameraFrustum(),p=b.getClippingPlane(),y=b.screenPointToMercatorCoordinate(b.getCameraPoint()),A=o.$.fromLngLat(b.center,b.elevation);y.z=A.z+Math.cos(b.pitchInRadians)*b.cameraToCenterDistance/b.worldSize;const T=b.getCoveringTilesDetailsProvider(),L=T.allowVariableZoom(b,r),B=he(b,r),G=r.minzoom||0,Y=r.maxzoom!==void 0?r.maxzoom:b.maxZoom,nt=Math.min(Math.max(0,B),Y),rt=Math.pow(2,nt),ft=[rt*y.x,rt*y.y,0],_t=[rt*A.x,rt*A.y,0],Ot=Math.hypot(A.x-y.x,A.y-y.y),Dt=Math.abs(A.z-y.z),Ft=Math.hypot(Ot,Dt),Zt=se=>({zoom:0,x:0,y:0,wrap:se,fullyVisible:!1}),Qt=[],ne=[];if(b.renderWorldCopies&&T.allowWorldCopies())for(let se=1;se<=3;se++)Qt.push(Zt(-se)),Qt.push(Zt(se));for(Qt.push(Zt(0));Qt.length>0;){const se=Qt.pop(),fe=se.x,le=se.y;let ke=se.fullyVisible;const De={x:fe,y:le,z:se.zoom},Ee=T.getTileAABB(De,se.wrap,b.elevation,r);if(!ke){const yn=wt(c,Ee,p);if(yn===0)continue;ke=yn===2}const Qe=T.distanceToTile2d(y.x,y.y,De,Ee);let Ge=B;L&&(Ge=(r.calculateTileZoom||ie)(b.zoom+o.ah(b.tileSize/r.tileSize),Qe,Dt,Ft,b.fov)),Ge=(r.roundZoom?Math.round:Math.floor)(Ge),Ge=Math.max(0,Ge);const In=Math.min(Ge,Y);if(se.wrap=T.getWrap(A,De,se.wrap),se.zoom>=In){if(se.zoom<G)continue;const yn=nt-se.zoom,an=ft[0]-.5-(fe<<yn),Zn=ft[1]-.5-(le<<yn),fr=r.reparseOverscaled?Math.max(se.zoom,Ge):se.zoom;ne.push({tileID:new o.Y(se.zoom===Y?fr:se.zoom,se.wrap,se.zoom,fe,le),distanceSq:o.ai([_t[0]-.5-fe,_t[1]-.5-le]),tileDistanceToCamera:Math.sqrt(an*an+Zn*Zn)})}else for(let yn=0;yn<4;yn++)Qt.push({zoom:se.zoom+1,x:(fe<<1)+yn%2,y:(le<<1)+(yn>>1),wrap:se.wrap,fullyVisible:ke})}return ne.sort((se,fe)=>se.distanceSq-fe.distanceSq).map(se=>se.tileID)}class Fe extends o.E{constructor(r,c,p){super(),this.id=r,this.dispatcher=p,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,A,T,L)=>{const B=new(je(A.type))(y,A,T,L);if(B.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${B.id}`);return B})(r,c,p,this),this._tiles={},this._cache=new ve(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Te,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,p){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,p)}catch(y){r.state="errored",y.status!==404?this._source.fire(new o.k(y,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new o.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const p=this._tiles[c];p.upload(r),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Ve).map(r=>r.key)}getRenderableIds(r){const c=[];for(const p in this._tiles)this._isIdRenderable(p,r)&&c.push(this._tiles[p]);return r?c.sort((p,y)=>{const A=p.tileID,T=y.tileID,L=new o.P(A.canonical.x,A.canonical.y)._rotate(-this.transform.bearingInRadians),B=new o.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians);return A.overscaledZ-T.overscaledZ||B.y-L.y||B.x-L.x}).map(p=>p.tileID.key):c.map(p=>p.tileID).sort(Ve).map(p=>p.key)}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(r||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(r,c){return o._(this,void 0,void 0,function*(){const p=this._tiles[r];p&&(p.state!=="loading"&&(p.state=c),yield this._loadTile(p,r,c))})}_tileLoaded(r,c,p){r.timeAdded=E.now(),p==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let y=0;y<c.length;y++){const A=c[y];if(r.neighboringTiles&&r.neighboringTiles[A]){const T=this.getTileByID(A);p(r,T),p(T,r)}}function p(y,A){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let T=A.tileID.canonical.x-y.tileID.canonical.x;const L=A.tileID.canonical.y-y.tileID.canonical.y,B=Math.pow(2,y.tileID.canonical.z),G=A.tileID.key;T===0&&L===0||Math.abs(L)>1||(Math.abs(T)>1&&(Math.abs(T+B)===1?T+=B:Math.abs(T-B)===1&&(T-=B)),A.dem&&y.dem&&(y.dem.backfillBorder(A.dem,T,L),y.neighboringTiles&&y.neighboringTiles[G]&&(y.neighboringTiles[G].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c,p,y){for(const A in this._tiles){let T=this._tiles[A];if(y[A]||!T.hasData()||T.tileID.overscaledZ<=c||T.tileID.overscaledZ>p)continue;let L=T.tileID;for(;T&&T.tileID.overscaledZ>c+1;){const G=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[G.key],T&&T.hasData()&&(L=G)}let B=L;for(;B.overscaledZ>c;)if(B=B.scaledTo(B.overscaledZ-1),r[B.key]||r[B.canonical.key]){y[L.key]=L;break}}}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const p=this._loadedParentTiles[r.key];return p&&p.tileID.overscaledZ>=c?p:null}for(let p=r.overscaledZ-1;p>=c;p--){const y=r.scaledTo(p),A=this._getLoadedTile(y);if(A)return A}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,p=Math.ceil(r.height/this._source.tileSize)+1,y=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),A=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(A)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const p={};for(const y in this._tiles){const A=this._tiles[y];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+c),p[A.tileID.key]=A}this._tiles=p;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(r,c,p,y,A,T){const L={},B={},G=Object.keys(r),Y=E.now();for(const nt of G){const rt=r[nt],ft=this._tiles[nt];if(!ft||ft.fadeEndTime!==0&&ft.fadeEndTime<=Y)continue;const _t=this.findLoadedParent(rt,c),Ot=this.findLoadedSibling(rt),Dt=_t||Ot||null;Dt&&(this._addTile(Dt.tileID),L[Dt.tileID.key]=Dt.tileID),B[nt]=rt}this._retainLoadedChildren(B,y,p,r);for(const nt in L)r[nt]||(this._coveredTiles[nt]=!0,r[nt]=L[nt]);if(T){const nt={},rt={};for(const ft of A)this._tiles[ft.key].hasData()?nt[ft.key]=ft:rt[ft.key]=ft;for(const ft in rt){const _t=rt[ft].children(this._source.maxzoom);this._tiles[_t[0].key]&&this._tiles[_t[1].key]&&this._tiles[_t[2].key]&&this._tiles[_t[3].key]&&(nt[_t[0].key]=r[_t[0].key]=_t[0],nt[_t[1].key]=r[_t[1].key]=_t[1],nt[_t[2].key]=r[_t[2].key]=_t[2],nt[_t[3].key]=r[_t[3].key]=_t[3],delete rt[ft])}for(const ft in rt){const _t=rt[ft],Ot=this.findLoadedParent(_t,this._source.minzoom),Dt=this.findLoadedSibling(_t),Ft=Ot||Dt||null;if(Ft){nt[Ft.tileID.key]=r[Ft.tileID.key]=Ft.tileID;for(const Zt in nt)nt[Zt].isChildOf(Ft.tileID)&&delete nt[Zt]}}for(const ft in this._tiles)nt[ft]||(this._coveredTiles[ft]=!0)}}update(r,c){if(!this._sourceLoaded||this._paused)return;let p;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(Y=>new o.Y(Y.canonical.z,Y.wrap,Y.canonical.z,Y.canonical.x,Y.canonical.y)):(p=Kt(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter(Y=>this._source.hasTile(Y)))):p=[];const y=he(r,this._source),A=Math.max(y-Fe.maxOverzooming,this._source.minzoom),T=Math.max(y+Fe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Y={};for(const nt of p)if(nt.canonical.z>this._source.minzoom){const rt=nt.scaledTo(nt.canonical.z-1);Y[rt.key]=rt;const ft=nt.scaledTo(Math.max(this._source.minzoom,Math.min(nt.canonical.z,5)));Y[ft.key]=ft}p=p.concat(Object.values(Y))}const L=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,L&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const B=this._updateRetainedTiles(p,y);we(this._source.type)&&this._updateCoveredAndRetainedTiles(B,A,T,y,p,c);for(const Y in B)this._tiles[Y].clearFadeHold();const G=o.aj(this._tiles,B);for(const Y of G){const nt=this._tiles[Y];nt.hasSymbolBuckets&&!nt.holdingForFade()?nt.setHoldDuration(this.map._fadeDuration):nt.hasSymbolBuckets&&!nt.symbolFadeFinished()||this._removeTile(Y)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var p;const y={},A={},T=Math.max(c-Fe.maxOverzooming,this._source.minzoom),L=Math.max(c+Fe.maxUnderzooming,this._source.minzoom),B={};for(const G of r){const Y=this._addTile(G);y[G.key]=G,Y.hasData()||c<this._source.maxzoom&&(B[G.key]=G)}this._retainLoadedChildren(B,c,L,y);for(const G of r){let Y=this._tiles[G.key];if(Y.hasData())continue;if(c+1>this._source.maxzoom){const rt=G.children(this._source.maxzoom)[0],ft=this.getTile(rt);if(ft&&ft.hasData()){y[rt.key]=rt;continue}}else{const rt=G.children(this._source.maxzoom);if(y[rt[0].key]&&y[rt[1].key]&&y[rt[2].key]&&y[rt[3].key])continue}let nt=Y.wasRequested();for(let rt=G.overscaledZ-1;rt>=T;--rt){const ft=G.scaledTo(rt);if(A[ft.key])break;if(A[ft.key]=!0,Y=this.getTile(ft),!Y&&nt&&(Y=this._addTile(ft)),Y){const _t=Y.hasData();if((_t||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||nt)&&(y[ft.key]=ft),nt=Y.wasRequested(),_t)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let p,y=this._tiles[r].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){p=this._loadedParentTiles[y.key];break}c.push(y.key);const A=y.scaledTo(y.overscaledZ-1);if(p=this._getLoadedTile(A),p)break;y=A}for(const A of c)this._loadedParentTiles[A]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const c=this._tiles[r].tileID,p=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=p}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const p=c;return c||(c=new de(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._tiles[r.key]=c,p||this._source.fire(new o.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const p=c.getExpiryTimeout();p&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},p))}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){const c=r.sourceDataType;r.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&c==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,p){const y=[],A=this.transform;if(!A)return y;const T=p?A.getCameraQueryGeometry(r):r,L=r.map(_t=>A.screenPointToMercatorCoordinate(_t,this.terrain)),B=T.map(_t=>A.screenPointToMercatorCoordinate(_t,this.terrain)),G=this.getIds();let Y=1/0,nt=1/0,rt=-1/0,ft=-1/0;for(const _t of B)Y=Math.min(Y,_t.x),nt=Math.min(nt,_t.y),rt=Math.max(rt,_t.x),ft=Math.max(ft,_t.y);for(let _t=0;_t<G.length;_t++){const Ot=this._tiles[G[_t]];if(Ot.holdingForFade())continue;const Dt=A.getCoveringTilesDetailsProvider().allowWorldCopies()?Ot.tileID:Ot.tileID.unwrapTo(0),Ft=Math.pow(2,A.zoom-Ot.tileID.overscaledZ),Zt=c*Ot.queryPadding*o.Z/Ot.tileSize/Ft,Qt=[Dt.getTilePoint(new o.$(Y,nt)),Dt.getTilePoint(new o.$(rt,ft))];if(Qt[0].x-Zt<o.Z&&Qt[0].y-Zt<o.Z&&Qt[1].x+Zt>=0&&Qt[1].y+Zt>=0){const ne=L.map(fe=>Dt.getTilePoint(fe)),se=B.map(fe=>Dt.getTilePoint(fe));y.push({tile:Ot,tileID:Dt,queryGeometry:ne,cameraQueryGeometry:se,scale:Ft})}}return y}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map(p=>this._tiles[p].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(we(this._source.type)){const r=E.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,p){this._state.updateState(r=r||"_geojsonTileLayer",c,p)}removeFeatureState(r,c,p){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,p)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,p){const y=this._tiles[r];y&&y.setDependencies(c,p)}reloadTilesForDependencies(r,c){for(const p in this._tiles)this._tiles[p].hasDependency(r,c)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(r,c))}}function Ve(b,r){const c=Math.abs(2*b.wrap)-+(b.wrap<0),p=Math.abs(2*r.wrap)-+(r.wrap<0);return b.overscaledZ-r.overscaledZ||p-c||r.canonical.y-b.canonical.y||r.canonical.x-b.canonical.x}function we(b){return b==="raster"||b==="image"||b==="video"}Fe.maxOverzooming=10,Fe.maxUnderzooming=3;class rn{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=o.ae(r,0,1);let c=1,p=this._distances[c];const y=r*this.paddedLength+this.padding;for(;p<y&&c<this._distances.length;)p=this._distances[++c];const A=c-1,T=this._distances[A],L=p-T,B=L>0?(y-T)/L:0;return this.points[A].mult(1-B).add(this.points[c].mult(B))}}function Sn(b,r){let c=!0;return b==="always"||b!=="never"&&r!=="never"||(c=!1),c}class En{constructor(r,c,p){const y=this.boxCells=[],A=this.circleCells=[];this.xCellCount=Math.ceil(r/p),this.yCellCount=Math.ceil(c/p);for(let T=0;T<this.xCellCount*this.yCellCount;T++)y.push([]),A.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,p,y,A){this._forEachCell(c,p,y,A,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(A)}insertCircle(r,c,p,y){this._forEachCell(c-y,p-y,c+y,p+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(p),this.circles.push(y)}_insertBoxCell(r,c,p,y,A,T){this.boxCells[A].push(T)}_insertCircleCell(r,c,p,y,A,T){this.circleCells[A].push(T)}_query(r,c,p,y,A,T,L){if(p<0||r>this.width||y<0||c>this.height)return[];const B=[];if(r<=0&&c<=0&&this.width<=p&&this.height<=y){if(A)return[{key:null,x1:r,y1:c,x2:p,y2:y}];for(let G=0;G<this.boxKeys.length;G++)B.push({key:this.boxKeys[G],x1:this.bboxes[4*G],y1:this.bboxes[4*G+1],x2:this.bboxes[4*G+2],y2:this.bboxes[4*G+3]});for(let G=0;G<this.circleKeys.length;G++){const Y=this.circles[3*G],nt=this.circles[3*G+1],rt=this.circles[3*G+2];B.push({key:this.circleKeys[G],x1:Y-rt,y1:nt-rt,x2:Y+rt,y2:nt+rt})}}else this._forEachCell(r,c,p,y,this._queryCell,B,{hitTest:A,overlapMode:T,seenUids:{box:{},circle:{}}},L);return B}query(r,c,p,y){return this._query(r,c,p,y,!1,null)}hitTest(r,c,p,y,A,T){return this._query(r,c,p,y,!0,A,T).length>0}hitTestCircle(r,c,p,y,A){const T=r-p,L=r+p,B=c-p,G=c+p;if(L<0||T>this.width||G<0||B>this.height)return!1;const Y=[];return this._forEachCell(T,B,L,G,this._queryCellCircle,Y,{hitTest:!0,overlapMode:y,circle:{x:r,y:c,radius:p},seenUids:{box:{},circle:{}}},A),Y.length>0}_queryCell(r,c,p,y,A,T,L,B){const{seenUids:G,hitTest:Y,overlapMode:nt}=L,rt=this.boxCells[A];if(rt!==null){const _t=this.bboxes;for(const Ot of rt)if(!G.box[Ot]){G.box[Ot]=!0;const Dt=4*Ot,Ft=this.boxKeys[Ot];if(r<=_t[Dt+2]&&c<=_t[Dt+3]&&p>=_t[Dt+0]&&y>=_t[Dt+1]&&(!B||B(Ft))&&(!Y||!Sn(nt,Ft.overlapMode))&&(T.push({key:Ft,x1:_t[Dt],y1:_t[Dt+1],x2:_t[Dt+2],y2:_t[Dt+3]}),Y))return!0}}const ft=this.circleCells[A];if(ft!==null){const _t=this.circles;for(const Ot of ft)if(!G.circle[Ot]){G.circle[Ot]=!0;const Dt=3*Ot,Ft=this.circleKeys[Ot];if(this._circleAndRectCollide(_t[Dt],_t[Dt+1],_t[Dt+2],r,c,p,y)&&(!B||B(Ft))&&(!Y||!Sn(nt,Ft.overlapMode))){const Zt=_t[Dt],Qt=_t[Dt+1],ne=_t[Dt+2];if(T.push({key:Ft,x1:Zt-ne,y1:Qt-ne,x2:Zt+ne,y2:Qt+ne}),Y)return!0}}}return!1}_queryCellCircle(r,c,p,y,A,T,L,B){const{circle:G,seenUids:Y,overlapMode:nt}=L,rt=this.boxCells[A];if(rt!==null){const _t=this.bboxes;for(const Ot of rt)if(!Y.box[Ot]){Y.box[Ot]=!0;const Dt=4*Ot,Ft=this.boxKeys[Ot];if(this._circleAndRectCollide(G.x,G.y,G.radius,_t[Dt+0],_t[Dt+1],_t[Dt+2],_t[Dt+3])&&(!B||B(Ft))&&!Sn(nt,Ft.overlapMode))return T.push(!0),!0}}const ft=this.circleCells[A];if(ft!==null){const _t=this.circles;for(const Ot of ft)if(!Y.circle[Ot]){Y.circle[Ot]=!0;const Dt=3*Ot,Ft=this.circleKeys[Ot];if(this._circlesCollide(_t[Dt],_t[Dt+1],_t[Dt+2],G.x,G.y,G.radius)&&(!B||B(Ft))&&!Sn(nt,Ft.overlapMode))return T.push(!0),!0}}}_forEachCell(r,c,p,y,A,T,L,B){const G=this._convertToXCellCoord(r),Y=this._convertToYCellCoord(c),nt=this._convertToXCellCoord(p),rt=this._convertToYCellCoord(y);for(let ft=G;ft<=nt;ft++)for(let _t=Y;_t<=rt;_t++)if(A.call(this,r,c,p,y,this.xCellCount*_t+ft,T,L,B))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,p,y,A,T){const L=y-r,B=A-c,G=p+T;return G*G>L*L+B*B}_circleAndRectCollide(r,c,p,y,A,T,L){const B=(T-y)/2,G=Math.abs(r-(y+B));if(G>B+p)return!1;const Y=(L-A)/2,nt=Math.abs(c-(A+Y));if(nt>Y+p)return!1;if(G<=B||nt<=Y)return!0;const rt=G-B,ft=nt-Y;return rt*rt+ft*ft<=p*p}}function ir(b,r,c){const p=o.K();if(!b){const{vecSouth:nt,vecEast:rt}=Ue(r),ft=_();ft[0]=rt[0],ft[1]=rt[1],ft[2]=nt[0],ft[3]=nt[1],y=ft,(Y=(T=(A=ft)[0])*(G=A[3])-(B=A[2])*(L=A[1]))&&(y[0]=G*(Y=1/Y),y[1]=-L*Y,y[2]=-B*Y,y[3]=T*Y),p[0]=ft[0],p[1]=ft[1],p[4]=ft[2],p[5]=ft[3]}var y,A,T,L,B,G,Y;return o.M(p,p,[1/c,1/c,1]),p}function gr(b,r,c,p){if(b){const y=o.K();if(!r){const{vecSouth:A,vecEast:T}=Ue(c);y[0]=T[0],y[1]=T[1],y[4]=A[0],y[5]=A[1]}return o.M(y,y,[p,p,1]),y}return c.pixelsToClipSpaceMatrix}function Ue(b){const r=Math.cos(b.rollInRadians),c=Math.sin(b.rollInRadians),p=Math.cos(b.pitchInRadians),y=Math.cos(b.bearingInRadians),A=Math.sin(b.bearingInRadians),T=o.ao();T[0]=-y*p*c-A*r,T[1]=-A*p*c+y*r;const L=o.ap(T);L<1e-9?o.aq(T):o.ar(T,T,1/L);const B=o.ao();B[0]=y*p*r-A*c,B[1]=A*p*r+y*c;const G=o.ap(B);return G<1e-9?o.aq(B):o.ar(B,B,1/G),{vecEast:B,vecSouth:T}}function Gn(b,r,c,p){let y;p?(y=[b,r,p(b,r),1],o.at(y,y,c)):(y=[b,r,0,1],mi(y,y,c));const A=y[3];return{point:new o.P(y[0]/A,y[1]/A),signedDistanceFromCamera:A,isOccluded:!1}}function Fr(b,r){return .5+b/r*.5}function Yr(b,r){return b.x>=-r[0]&&b.x<=r[0]&&b.y>=-r[1]&&b.y<=r[1]}function Pr(b,r,c,p,y,A,T,L,B,G,Y,nt,rt){const ft=c?b.textSizeData:b.iconSizeData,_t=o.ak(ft,r.transform.zoom),Ot=[256/r.width*2+1,256/r.height*2+1],Dt=c?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;Dt.clear();const Ft=b.lineVertexArray,Zt=c?b.text.placedSymbolArray:b.icon.placedSymbolArray,Qt=r.transform.width/r.transform.height;let ne=!1;for(let se=0;se<Zt.length;se++){const fe=Zt.get(se);if(fe.hidden||fe.writingMode===o.al.vertical&&!ne){Ri(fe.numGlyphs,Dt);continue}ne=!1;const le=new o.P(fe.anchorX,fe.anchorY),ke={getElevation:rt,pitchedLabelPlaneMatrix:p,lineVertexArray:Ft,pitchWithMap:A,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:le,unwrappedTileID:B,width:G,height:Y,translation:nt},De=tu(fe.anchorX,fe.anchorY,ke);if(!Yr(De.point,Ot)){Ri(fe.numGlyphs,Dt);continue}const Ee=Fr(r.transform.cameraToCenterDistance,De.signedDistanceFromCamera),Qe=o.am(ft,_t,fe),Ge=A?Qe*r.transform.getPitchedTextCorrection(fe.anchorX,fe.anchorY,B)/Ee:Qe*Ee,In=Jn({projectionContext:ke,pitchedLabelPlaneMatrixInverse:y,symbol:fe,fontSize:Ge,flip:!1,keepUpright:T,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:Dt,aspectRatio:Qt,rotateToLine:L});ne=In.useVertical,(In.notEnoughRoom||ne||In.needsFlipping&&Jn({projectionContext:ke,pitchedLabelPlaneMatrixInverse:y,symbol:fe,fontSize:Ge,flip:!0,keepUpright:T,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:Dt,aspectRatio:Qt,rotateToLine:L}).notEnoughRoom)&&Ri(fe.numGlyphs,Dt)}c?b.text.dynamicLayoutVertexBuffer.updateData(Dt):b.icon.dynamicLayoutVertexBuffer.updateData(Dt)}function Ze(b,r,c,p,y,A,T,L){const B=A.glyphStartIndex+A.numGlyphs,G=A.lineStartIndex,Y=A.lineStartIndex+A.lineLength,nt=r.getoffsetX(A.glyphStartIndex),rt=r.getoffsetX(B-1),ft=Ms(b*nt,c,p,y,A.segment,G,Y,L,T);if(!ft)return null;const _t=Ms(b*rt,c,p,y,A.segment,G,Y,L,T);return _t?L.projectionCache.anyProjectionOccluded?null:{first:ft,last:_t}:null}function zn(b,r,c,p){return b===o.al.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*p?{useVertical:!0}:(b===o.al.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function Jn(b){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:c,symbol:p,fontSize:y,flip:A,keepUpright:T,glyphOffsetArray:L,dynamicLayoutVertexArray:B,aspectRatio:G,rotateToLine:Y}=b,nt=y/24,rt=p.lineOffsetX*nt,ft=p.lineOffsetY*nt;let _t;if(p.numGlyphs>1){const Ot=p.glyphStartIndex+p.numGlyphs,Dt=p.lineStartIndex,Ft=p.lineStartIndex+p.lineLength,Zt=Ze(nt,L,rt,ft,A,p,Y,r);if(!Zt)return{notEnoughRoom:!0};const Qt=Xn(Zt.first.point.x,Zt.first.point.y,r,c),ne=Xn(Zt.last.point.x,Zt.last.point.y,r,c);if(T&&!A){const se=zn(p.writingMode,Qt,ne,G);if(se)return se}_t=[Zt.first];for(let se=p.glyphStartIndex+1;se<Ot-1;se++)_t.push(Ms(nt*L.getoffsetX(se),rt,ft,A,p.segment,Dt,Ft,r,Y));_t.push(Zt.last)}else{if(T&&!A){const Dt=pi(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,Ft=p.lineStartIndex+p.segment+1,Zt=new o.P(r.lineVertexArray.getx(Ft),r.lineVertexArray.gety(Ft)),Qt=pi(Zt.x,Zt.y,r),ne=Qt.signedDistanceFromCamera>0?Qt.point:eo(r.tileAnchorPoint,Zt,Dt,1,r),se=Xn(Dt.x,Dt.y,r,c),fe=Xn(ne.x,ne.y,r,c),le=zn(p.writingMode,se,fe,G);if(le)return le}const Ot=Ms(nt*L.getoffsetX(p.glyphStartIndex),rt,ft,A,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,r,Y);if(!Ot||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};_t=[Ot]}for(const Ot of _t)o.as(B,Ot.point,Ot.angle);return{}}function eo(b,r,c,p,y){const A=b.add(b.sub(r)._unit()),T=pi(A.x,A.y,y).point,L=c.sub(T);return c.add(L._mult(p/L.mag()))}function Eo(b,r,c){const p=r.projectionCache;if(p.projections[b])return p.projections[b];const y=new o.P(r.lineVertexArray.getx(b),r.lineVertexArray.gety(b)),A=pi(y.x,y.y,r);if(A.signedDistanceFromCamera>0)return p.projections[b]=A.point,p.anyProjectionOccluded=p.anyProjectionOccluded||A.isOccluded,A.point;const T=b-c.direction;return eo(c.distanceFromAnchor===0?r.tileAnchorPoint:new o.P(r.lineVertexArray.getx(T),r.lineVertexArray.gety(T)),y,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function pi(b,r,c){const p=b+c.translation[0],y=r+c.translation[1];let A;return c.pitchWithMap?(A=Gn(p,y,c.pitchedLabelPlaneMatrix,c.getElevation),A.isOccluded=!1):(A=c.transform.projectTileCoordinates(p,y,c.unwrappedTileID,c.getElevation),A.point.x=(.5*A.point.x+.5)*c.width,A.point.y=(.5*-A.point.y+.5)*c.height),A}function Xn(b,r,c,p){if(c.pitchWithMap){const y=[b,r,0,1];return o.at(y,y,p),c.transform.projectTileCoordinates(y[0]/y[3],y[1]/y[3],c.unwrappedTileID,c.getElevation).point}return{x:b/c.width*2-1,y:r/c.height*2-1}}function tu(b,r,c){return c.transform.projectTileCoordinates(b,r,c.unwrappedTileID,c.getElevation)}function Pl(b,r,c){return b._unit()._perp()._mult(r*c)}function Uu(b,r,c,p,y,A,T,L,B){if(L.projectionCache.offsets[b])return L.projectionCache.offsets[b];const G=c.add(r);if(b+B.direction<p||b+B.direction>=y)return L.projectionCache.offsets[b]=G,G;const Y=Eo(b+B.direction,L,B),nt=Pl(Y.sub(c),T,B.direction),rt=c.add(nt),ft=Y.add(nt);return L.projectionCache.offsets[b]=o.au(A,G,rt,ft)||G,L.projectionCache.offsets[b]}function Ms(b,r,c,p,y,A,T,L,B){const G=p?b-r:b+r;let Y=G>0?1:-1,nt=0;p&&(Y*=-1,nt=Math.PI),Y<0&&(nt+=Math.PI);let rt,ft=Y>0?A+y:A+y+1;L.projectionCache.cachedAnchorPoint?rt=L.projectionCache.cachedAnchorPoint:(rt=pi(L.tileAnchorPoint.x,L.tileAnchorPoint.y,L).point,L.projectionCache.cachedAnchorPoint=rt);let _t,Ot,Dt=rt,Ft=rt,Zt=0,Qt=0;const ne=Math.abs(G),se=[];let fe;for(;Zt+Qt<=ne;){if(ft+=Y,ft<A||ft>=T)return null;Zt+=Qt,Ft=Dt,Ot=_t;const De={absOffsetX:ne,direction:Y,distanceFromAnchor:Zt,previousVertex:Ft};if(Dt=Eo(ft,L,De),c===0)se.push(Ft),fe=Dt.sub(Ft);else{let Ee;const Qe=Dt.sub(Ft);Ee=Qe.mag()===0?Pl(Eo(ft+Y,L,De).sub(Dt),c,Y):Pl(Qe,c,Y),Ot||(Ot=Ft.add(Ee)),_t=Uu(ft,Ee,Dt,A,T,Ot,c,L,De),se.push(Ot),fe=_t.sub(Ot)}Qt=fe.mag()}const le=fe._mult((ne-Zt)/Qt)._add(Ot||Ft),ke=nt+Math.atan2(Dt.y-Ft.y,Dt.x-Ft.x);return se.push(le),{point:le,angle:B?ke:0,path:se}}const Hu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ri(b,r){for(let c=0;c<b;c++){const p=r.length;r.resize(p+4),r.float32.set(Hu,3*p)}}function mi(b,r,c){const p=r[0],y=r[1];return b[0]=c[0]*p+c[4]*y+c[12],b[1]=c[1]*p+c[5]*y+c[13],b[3]=c[3]*p+c[7]*y+c[15],b}const wi=100;class kl{constructor(r,c=new En(r.width+200,r.height+200,25),p=new En(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=p,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+wi,this.screenBottomBoundary=r.height+wi,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,p,y,A,T,L,B,G,Y,nt,rt){const ft=this.projectAndGetPerspectiveRatio(r.anchorPointX+B[0],r.anchorPointY+B[1],A,Y,rt),_t=p*ft.perspectiveRatio;let Ot;if(T||L)Ot=this._projectCollisionBox(r,_t,y,A,T,L,B,ft,Y,nt,rt);else{const fe=ft.x+(nt?nt.x*_t:0),le=ft.y+(nt?nt.y*_t:0);Ot={allPointsOccluded:!1,box:[fe+r.x1*_t,le+r.y1*_t,fe+r.x2*_t,le+r.y2*_t]}}const[Dt,Ft,Zt,Qt]=Ot.box,ne=T?Ot.allPointsOccluded:ft.isOccluded;let se=ne;return se||(se=ft.perspectiveRatio<this.perspectiveRatioCutoff),se||(se=!this.isInsideGrid(Dt,Ft,Zt,Qt)),se||c!=="always"&&this.grid.hitTest(Dt,Ft,Zt,Qt,c,G)?{box:[Dt,Ft,Zt,Qt],placeable:!1,offscreen:!1,occluded:ne}:{box:[Dt,Ft,Zt,Qt],placeable:!0,offscreen:this.isOffscreen(Dt,Ft,Zt,Qt),occluded:ne}}placeCollisionCircles(r,c,p,y,A,T,L,B,G,Y,nt,rt,ft,_t){const Ot=[],Dt=new o.P(c.anchorX,c.anchorY),Ft=this.getPerspectiveRatio(Dt.x,Dt.y,T,_t),Zt=(G?A*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,T)/Ft:A*Ft)/o.ay,Qt={getElevation:_t,pitchedLabelPlaneMatrix:L,lineVertexArray:p,pitchWithMap:G,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Dt,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:ft},ne=Ze(Zt,y,c.lineOffsetX*Zt,c.lineOffsetY*Zt,!1,c,!1,Qt);let se=!1,fe=!1,le=!0;if(ne){const ke=.5*nt*Ft+rt,De=new o.P(-100,-100),Ee=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Qe=new rn,Ge=ne.first,In=ne.last;let yn=[];for(let fr=Ge.path.length-1;fr>=1;fr--)yn.push(Ge.path[fr]);for(let fr=1;fr<In.path.length;fr++)yn.push(In.path[fr]);const an=2.5*ke;if(G){const fr=this.projectPathToScreenSpace(yn,Qt);yn=fr.some(pr=>pr.signedDistanceFromCamera<=0)?[]:fr.map(pr=>pr.point)}let Zn=[];if(yn.length>0){const fr=yn[0].clone(),pr=yn[0].clone();for(let vi=1;vi<yn.length;vi++)fr.x=Math.min(fr.x,yn[vi].x),fr.y=Math.min(fr.y,yn[vi].y),pr.x=Math.max(pr.x,yn[vi].x),pr.y=Math.max(pr.y,yn[vi].y);Zn=fr.x>=De.x&&pr.x<=Ee.x&&fr.y>=De.y&&pr.y<=Ee.y?[yn]:pr.x<De.x||fr.x>Ee.x||pr.y<De.y||fr.y>Ee.y?[]:o.av([yn],De.x,De.y,Ee.x,Ee.y)}for(const fr of Zn){Qe.reset(fr,.25*ke);let pr=0;pr=Qe.length<=.5*ke?1:Math.ceil(Qe.paddedLength/an)+1;for(let vi=0;vi<pr;vi++){const ti=vi/Math.max(pr-1,1),Ci=Qe.lerp(ti),xi=Ci.x+wi,Sr=Ci.y+wi;Ot.push(xi,Sr,ke,0);const jr=xi-ke,oo=Sr-ke,ao=xi+ke,so=Sr+ke;if(le=le&&this.isOffscreen(jr,oo,ao,so),fe=fe||this.isInsideGrid(jr,oo,ao,so),r!=="always"&&this.grid.hitTestCircle(xi,Sr,ke,r,Y)&&(se=!0,!B))return{circles:[],offscreen:!1,collisionDetected:se}}}}return{circles:!B&&se||!fe||Ft<this.perspectiveRatioCutoff?[]:Ot,offscreen:le,collisionDetected:se}}projectPathToScreenSpace(r,c){const p=function(y,A){const T=o.K();return o.an(T,A.pitchedLabelPlaneMatrix),y.map(L=>{const B=Gn(L.x,L.y,T,A.getElevation),G=A.transform.projectTileCoordinates(B.point.x,B.point.y,A.unwrappedTileID,A.getElevation);return G.point.x=(.5*G.point.x+.5)*A.width,G.point.y=(.5*-G.point.y+.5)*A.height,G})}(r,c);return function(y){let A=0,T=0,L=0,B=0;for(let G=0;G<y.length;G++)y[G].isOccluded?(L=G+1,B=0):(B++,B>T&&(T=B,A=L));return y.slice(A,A+T)}(p)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,y=1/0,A=-1/0,T=-1/0;for(const Y of r){const nt=new o.P(Y.x+wi,Y.y+wi);p=Math.min(p,nt.x),y=Math.min(y,nt.y),A=Math.max(A,nt.x),T=Math.max(T,nt.y),c.push(nt)}const L=this.grid.query(p,y,A,T).concat(this.ignoredGrid.query(p,y,A,T)),B={},G={};for(const Y of L){const nt=Y.key;if(B[nt.bucketInstanceId]===void 0&&(B[nt.bucketInstanceId]={}),B[nt.bucketInstanceId][nt.featureIndex])continue;const rt=[new o.P(Y.x1,Y.y1),new o.P(Y.x2,Y.y1),new o.P(Y.x2,Y.y2),new o.P(Y.x1,Y.y2)];o.aw(c,rt)&&(B[nt.bucketInstanceId][nt.featureIndex]=!0,G[nt.bucketInstanceId]===void 0&&(G[nt.bucketInstanceId]=[]),G[nt.bucketInstanceId].push(nt.featureIndex))}return G}insertCollisionBox(r,c,p,y,A,T){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:A,collisionGroupID:T,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,p,y,A,T){const L=p?this.ignoredGrid:this.grid,B={bucketInstanceId:y,featureIndex:A,collisionGroupID:T,overlapMode:c};for(let G=0;G<r.length;G+=4)L.insertCircle(B,r[G],r[G+1],r[G+2])}projectAndGetPerspectiveRatio(r,c,p,y,A){if(A){let T;y?(T=[r,c,y(r,c),1],o.at(T,T,A)):(T=[r,c,0,1],mi(T,T,A));const L=T[3];return{x:(T[0]/L+1)/2*this.transform.width+wi,y:(-T[1]/L+1)/2*this.transform.height+wi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/L*.5,isOccluded:!1,signedDistanceFromCamera:L}}{const T=this.transform.projectTileCoordinates(r,c,p,y);return{x:(T.point.x+1)/2*this.transform.width+wi,y:(1-T.point.y)/2*this.transform.height+wi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}}getPerspectiveRatio(r,c,p,y){const A=this.transform.projectTileCoordinates(r,c,p,y);return .5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5}isOffscreen(r,c,p,y){return p<wi||r>=this.screenRightBoundary||y<wi||c>this.screenBottomBoundary}isInsideGrid(r,c,p,y){return p>=0&&r<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=o.ad([]);return o.L(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,p,y,A,T,L,B,G,Y,nt){let rt=1,ft=0,_t=0,Ot=1;const Dt=r.anchorPointX+L[0],Ft=r.anchorPointY+L[1];if(T&&!A){const yn=this.projectAndGetPerspectiveRatio(Dt+1,Ft,y,G,nt),an=yn.x-B.x,Zn=Math.atan((yn.y-B.y)/an)+(an<0?Math.PI:0),fr=Math.sin(Zn),pr=Math.cos(Zn);rt=pr,ft=fr,_t=-fr,Ot=pr}else if(!T&&A){const yn=Ue(this.transform);rt=yn.vecEast[0],ft=yn.vecEast[1],_t=yn.vecSouth[0],Ot=yn.vecSouth[1]}let Zt=B.x,Qt=B.y,ne=c;A&&(Zt=Dt,Qt=Ft,ne=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),ne*=this.transform.getPitchedTextCorrection(Dt,Ft,y),Y||(ne*=o.ae(.5+B.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),Y&&(Zt+=rt*Y.x*ne+_t*Y.y*ne,Qt+=ft*Y.x*ne+Ot*Y.y*ne);const se=r.x1*ne,fe=r.x2*ne,le=(se+fe)/2,ke=r.y1*ne,De=r.y2*ne,Ee=(ke+De)/2,Qe=[{offsetX:se,offsetY:ke},{offsetX:le,offsetY:ke},{offsetX:fe,offsetY:ke},{offsetX:fe,offsetY:Ee},{offsetX:fe,offsetY:De},{offsetX:le,offsetY:De},{offsetX:se,offsetY:De},{offsetX:se,offsetY:Ee}];let Ge=[];for(const{offsetX:yn,offsetY:an}of Qe)Ge.push(new o.P(Zt+rt*yn+_t*an,Qt+ft*yn+Ot*an));let In=!1;if(A){const yn=Ge.map(an=>this.projectAndGetPerspectiveRatio(an.x,an.y,y,G,nt));In=yn.some(an=>!an.isOccluded),Ge=yn.map(an=>new o.P(an.x,an.y))}else In=!0;return{box:o.ax(Ge),allPointsOccluded:!In}}}class Ac{constructor(r,c,p,y){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):y&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class ri{constructor(r,c,p,y,A){this.text=new Ac(r?r.text:null,c,p,A),this.icon=new Ac(r?r.icon:null,c,y,A)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ss{constructor(r,c,p){this.text=r,this.icon=c,this.skipFade=p}}class Gu{constructor(r,c,p,y,A){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=y,this.tileID=A}}class us{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[r]}}function Ma(b,r,c,p,y){const{horizontalAlign:A,verticalAlign:T}=o.aE(b);return new o.P(-(A-.5)*r+p[0]*y,-(T-.5)*c+p[1]*y)}class Es{constructor(r,c,p,y,A){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new kl(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new us(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=A,A&&(A.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(p,y)=>c.getElevation(r,p,y):null}getBucketParts(r,c,p,y){const A=p.getBucket(c),T=p.latestFeatureIndex;if(!A||!T||c.id!==A.layerIds[0])return;const L=p.collisionBoxArray,B=A.layers[0].layout,G=A.layers[0].paint,Y=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),nt=p.tileSize/o.Z,rt=p.tileID.toUnwrapped(),ft=B.get("text-rotation-alignment")==="map",_t=o.az(p,1,this.transform.zoom),Ot=o.aA(this.collisionIndex.transform,p,G.get("text-translate"),G.get("text-translate-anchor")),Dt=o.aA(this.collisionIndex.transform,p,G.get("icon-translate"),G.get("icon-translate-anchor")),Ft=ir(ft,this.transform,_t);this.retainedQueryData[A.bucketInstanceId]=new Gu(A.bucketInstanceId,T,A.sourceLayerIndex,A.index,p.tileID);const Zt={bucket:A,layout:B,translationText:Ot,translationIcon:Dt,unwrappedTileID:rt,pitchedLabelPlaneMatrix:Ft,scale:Y,textPixelRatio:nt,holdingForFade:p.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:o.ak(A.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(A.sourceID)};if(y)for(const Qt of A.sortKeyRanges){const{sortKey:ne,symbolInstanceStart:se,symbolInstanceEnd:fe}=Qt;r.push({sortKey:ne,symbolInstanceStart:se,symbolInstanceEnd:fe,parameters:Zt})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:A.symbolInstances.length,parameters:Zt})}attemptAnchorPlacement(r,c,p,y,A,T,L,B,G,Y,nt,rt,ft,_t,Ot,Dt,Ft,Zt,Qt,ne){const se=o.aB[r.textAnchor],fe=[r.textOffset0,r.textOffset1],le=Ma(se,p,y,fe,A),ke=this.collisionIndex.placeCollisionBox(c,rt,B,G,Y,L,T,Dt,nt.predicate,Qt,le,ne);if((!Zt||this.collisionIndex.placeCollisionBox(Zt,rt,B,G,Y,L,T,Ft,nt.predicate,Qt,le,ne).placeable)&&ke.placeable){let De;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ft.crossTileID]&&this.prevPlacement.placements[ft.crossTileID]&&this.prevPlacement.placements[ft.crossTileID].text&&(De=this.prevPlacement.variableOffsets[ft.crossTileID].anchor),ft.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ft.crossTileID]={textOffset:fe,width:p,height:y,anchor:se,textBoxScale:A,prevAnchor:De},this.markUsedJustification(_t,se,ft,Ot),_t.allowVerticalPlacement&&(this.markUsedOrientation(_t,Ot,ft),this.placedOrientations[ft.crossTileID]=Ot),{shift:le,placedGlyphBoxes:ke}}}placeLayerBucketPart(r,c,p){const{bucket:y,layout:A,translationText:T,translationIcon:L,unwrappedTileID:B,pitchedLabelPlaneMatrix:G,textPixelRatio:Y,holdingForFade:nt,collisionBoxArray:rt,partiallyEvaluatedTextSize:ft,collisionGroup:_t}=r.parameters,Ot=A.get("text-optional"),Dt=A.get("icon-optional"),Ft=o.aC(A,"text-overlap","text-allow-overlap"),Zt=Ft==="always",Qt=o.aC(A,"icon-overlap","icon-allow-overlap"),ne=Qt==="always",se=A.get("text-rotation-alignment")==="map",fe=A.get("text-pitch-alignment")==="map",le=A.get("icon-text-fit")!=="none",ke=A.get("symbol-z-order")==="viewport-y",De=Zt&&(ne||!y.hasIconData()||Dt),Ee=ne&&(Zt||!y.hasTextData()||Ot);!y.collisionArrays&&rt&&y.deserializeCollisionBoxes(rt);const Qe=this.retainedQueryData[y.bucketInstanceId].tileID,Ge=this._getTerrainElevationFunc(Qe),In=this.transform.getFastPathSimpleProjectionMatrix(Qe),yn=(an,Zn,fr)=>{var pr,vi;if(c[an.crossTileID])return;if(nt)return void(this.placements[an.crossTileID]=new Ss(!1,!1,!1));let ti=!1,Ci=!1,xi=!0,Sr=null,jr={box:null,placeable:!1,offscreen:null,occluded:!1},oo={placeable:!1},ao=null,so=null,$o=null,ys=0,Ql=0,Vs=0;Zn.textFeatureIndex?ys=Zn.textFeatureIndex:an.useRuntimeCollisionCircles&&(ys=an.featureIndex),Zn.verticalTextFeatureIndex&&(Ql=Zn.verticalTextFeatureIndex);const Us=Zn.textBox;if(Us){const Oa=Bi=>{let Ii=o.al.horizontal;if(y.allowVerticalPlacement&&!Bi&&this.prevPlacement){const Ui=this.prevPlacement.placedOrientations[an.crossTileID];Ui&&(this.placedOrientations[an.crossTileID]=Ui,Ii=Ui,this.markUsedOrientation(y,Ii,an))}return Ii},Jl=(Bi,Ii)=>{if(y.allowVerticalPlacement&&an.numVerticalGlyphVertices>0&&Zn.verticalTextBox){for(const Ui of y.writingModes)if(Ui===o.al.vertical?(jr=Ii(),oo=jr):jr=Bi(),jr&&jr.placeable)break}else jr=Bi()},Hs=an.textAnchorOffsetStartIndex,tc=an.textAnchorOffsetEndIndex;if(tc===Hs){const Bi=(Ii,Ui)=>{const Mi=this.collisionIndex.placeCollisionBox(Ii,Ft,Y,Qe,B,fe,se,T,_t.predicate,Ge,void 0,In);return Mi&&Mi.placeable&&(this.markUsedOrientation(y,Ui,an),this.placedOrientations[an.crossTileID]=Ui),Mi};Jl(()=>Bi(Us,o.al.horizontal),()=>{const Ii=Zn.verticalTextBox;return y.allowVerticalPlacement&&an.numVerticalGlyphVertices>0&&Ii?Bi(Ii,o.al.vertical):{box:null,offscreen:null}}),Oa(jr&&jr.placeable)}else{let Bi=o.aB[(vi=(pr=this.prevPlacement)===null||pr===void 0?void 0:pr.variableOffsets[an.crossTileID])===null||vi===void 0?void 0:vi.anchor];const Ii=(Mi,am,Fc)=>{const sm=Mi.x2-Mi.x1,va=Mi.y2-Mi.y1,vs=an.textBoxScale,lm=le&&Qt==="never"?am:null;let Ya=null,Gs=Ft==="never"?1:2,Bc="never";Bi&&Gs++;for(let tp=0;tp<Gs;tp++){for(let sh=Hs;sh<tc;sh++){const ep=y.textAnchorOffsets.get(sh);if(Bi&&ep.textAnchor!==Bi)continue;const Vd=this.attemptAnchorPlacement(ep,Mi,sm,va,vs,se,fe,Y,Qe,B,_t,Bc,an,y,Fc,T,L,lm,Ge);if(Vd&&(Ya=Vd.placedGlyphBoxes,Ya&&Ya.placeable))return ti=!0,Sr=Vd.shift,Ya}Bi?Bi=null:Bc=Ft}return p&&!Ya&&(Ya={box:this.collisionIndex.placeCollisionBox(Us,"always",Y,Qe,B,fe,se,T,_t.predicate,Ge,void 0,In).box,offscreen:!1,placeable:!1,occluded:!1}),Ya};Jl(()=>Ii(Us,Zn.iconBox,o.al.horizontal),()=>{const Mi=Zn.verticalTextBox;return y.allowVerticalPlacement&&(!jr||!jr.placeable)&&an.numVerticalGlyphVertices>0&&Mi?Ii(Mi,Zn.verticalIconBox,o.al.vertical):{box:null,occluded:!0,offscreen:null}}),jr&&(ti=jr.placeable,xi=jr.offscreen);const Ui=Oa(jr&&jr.placeable);if(!ti&&this.prevPlacement){const Mi=this.prevPlacement.variableOffsets[an.crossTileID];Mi&&(this.variableOffsets[an.crossTileID]=Mi,this.markUsedJustification(y,Mi.anchor,an,Ui))}}}if(ao=jr,ti=ao&&ao.placeable,xi=ao&&ao.offscreen,an.useRuntimeCollisionCircles){const Oa=y.text.placedSymbolArray.get(an.centerJustifiedTextSymbolIndex),Jl=o.am(y.textSizeData,ft,Oa),Hs=A.get("text-padding");so=this.collisionIndex.placeCollisionCircles(Ft,Oa,y.lineVertexArray,y.glyphOffsetArray,Jl,B,G,p,fe,_t.predicate,an.collisionCircleDiameter,Hs,T,Ge),so.circles.length&&so.collisionDetected&&!p&&o.w("Collisions detected, but collision boxes are not shown"),ti=Zt||so.circles.length>0&&!so.collisionDetected,xi=xi&&so.offscreen}if(Zn.iconFeatureIndex&&(Vs=Zn.iconFeatureIndex),Zn.iconBox){const Oa=Jl=>this.collisionIndex.placeCollisionBox(Jl,Qt,Y,Qe,B,fe,se,L,_t.predicate,Ge,le&&Sr?Sr:void 0,In);oo&&oo.placeable&&Zn.verticalIconBox?($o=Oa(Zn.verticalIconBox),Ci=$o.placeable):($o=Oa(Zn.iconBox),Ci=$o.placeable),xi=xi&&$o.offscreen}const Zo=Ot||an.numHorizontalGlyphVertices===0&&an.numVerticalGlyphVertices===0,Au=Dt||an.numIconVertices===0;Zo||Au?Au?Zo||(Ci=Ci&&ti):ti=Ci&&ti:Ci=ti=Ci&&ti;const Da=Ci&&$o.placeable;if(ti&&ao.placeable&&this.collisionIndex.insertCollisionBox(ao.box,Ft,A.get("text-ignore-placement"),y.bucketInstanceId,oo&&oo.placeable&&Ql?Ql:ys,_t.ID),Da&&this.collisionIndex.insertCollisionBox($o.box,Qt,A.get("icon-ignore-placement"),y.bucketInstanceId,Vs,_t.ID),so&&ti&&this.collisionIndex.insertCollisionCircles(so.circles,Ft,A.get("text-ignore-placement"),y.bucketInstanceId,ys,_t.ID),p&&this.storeCollisionData(y.bucketInstanceId,fr,Zn,ao,$o,so),an.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[an.crossTileID]=new Ss((ti||De)&&!(ao!=null&&ao.occluded),(Ci||Ee)&&!($o!=null&&$o.occluded),xi||y.justReloaded),c[an.crossTileID]=!0};if(ke){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const an=y.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Zn=an.length-1;Zn>=0;--Zn){const fr=an[Zn];yn(y.symbolInstances.get(fr),y.collisionArrays[fr],fr)}}else for(let an=r.symbolInstanceStart;an<r.symbolInstanceEnd;an++)yn(y.symbolInstances.get(an),y.collisionArrays[an],an);y.justReloaded=!1}storeCollisionData(r,c,p,y,A,T){if(p.textBox||p.iconBox){let L,B;this.collisionBoxArrays.has(r)?L=this.collisionBoxArrays.get(r):(L=new Map,this.collisionBoxArrays.set(r,L)),L.has(c)?B=L.get(c):(B={text:null,icon:null},L.set(c,B)),p.textBox&&(B.text=y.box),p.iconBox&&(B.icon=A.box)}if(T){let L=this.collisionCircleArrays[r];L===void 0&&(L=this.collisionCircleArrays[r]=[]);for(let B=0;B<T.circles.length;B+=4)L.push(T.circles[B+0]-wi),L.push(T.circles[B+1]-wi),L.push(T.circles[B+2]),L.push(T.collisionDetected?1:0)}}markUsedJustification(r,c,p,y){let A;A=y===o.al.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[o.aD(c)];const T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const L of T)L>=0&&(r.text.placedSymbolArray.get(L).crossTileID=A>=0&&L!==A?0:p.crossTileID)}markUsedOrientation(r,c,p){const y=c===o.al.horizontal||c===o.al.horizontalOnly?c:0,A=c===o.al.vertical?c:0,T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const L of T)r.text.placedSymbolArray.get(L).placedOrientation=y;p.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=A)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(r):1,A=c?c.opacities:{},T=c?c.variableOffsets:{},L=c?c.placedOrientations:{};for(const B in this.placements){const G=this.placements[B],Y=A[B];Y?(this.opacities[B]=new ri(Y,y,G.text,G.icon),p=p||G.text!==Y.text.placed||G.icon!==Y.icon.placed):(this.opacities[B]=new ri(null,y,G.text,G.icon,G.skipFade),p=p||G.text||G.icon)}for(const B in A){const G=A[B];if(!this.opacities[B]){const Y=new ri(G,y,!1,!1);Y.isHidden()||(this.opacities[B]=Y,p=p||G.text.placed||G.icon.placed)}}for(const B in T)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=T[B]);for(const B in L)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=L[B]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const p={};for(const y of c){const A=y.getBucket(r);A&&y.latestFeatureIndex&&r.id===A.layerIds[0]&&this.updateBucketOpacities(A,y.tileID,p,y.collisionBoxArray)}}updateBucketOpacities(r,c,p,y){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const A=r.layers[0],T=A.layout,L=new ri(null,0,!1,!1,!0),B=T.get("text-allow-overlap"),G=T.get("icon-allow-overlap"),Y=A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"),nt=T.get("text-rotation-alignment")==="map",rt=T.get("text-pitch-alignment")==="map",ft=T.get("icon-text-fit")!=="none",_t=new ri(null,0,B&&(G||!r.hasIconData()||T.get("icon-optional")),G&&(B||!r.hasTextData()||T.get("text-optional")),!0);!r.collisionArrays&&y&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(y);const Ot=(Ft,Zt,Qt)=>{for(let ne=0;ne<Zt/4;ne++)Ft.opacityVertexArray.emplaceBack(Qt);Ft.hasVisibleVertices=Ft.hasVisibleVertices||Qt!==Ps},Dt=this.collisionBoxArrays.get(r.bucketInstanceId);for(let Ft=0;Ft<r.symbolInstances.length;Ft++){const Zt=r.symbolInstances.get(Ft),{numHorizontalGlyphVertices:Qt,numVerticalGlyphVertices:ne,crossTileID:se}=Zt;let fe=this.opacities[se];p[se]?fe=L:fe||(fe=_t,this.opacities[se]=fe),p[se]=!0;const le=Zt.numIconVertices>0,ke=this.placedOrientations[Zt.crossTileID],De=ke===o.al.vertical,Ee=ke===o.al.horizontal||ke===o.al.horizontalOnly;if(Qt>0||ne>0){const Ge=Rl(fe.text);Ot(r.text,Qt,De?Ps:Ge),Ot(r.text,ne,Ee?Ps:Ge);const In=fe.text.isHidden();[Zt.rightJustifiedTextSymbolIndex,Zt.centerJustifiedTextSymbolIndex,Zt.leftJustifiedTextSymbolIndex].forEach(Zn=>{Zn>=0&&(r.text.placedSymbolArray.get(Zn).hidden=In||De?1:0)}),Zt.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Zt.verticalPlacedTextSymbolIndex).hidden=In||Ee?1:0);const yn=this.variableOffsets[Zt.crossTileID];yn&&this.markUsedJustification(r,yn.anchor,Zt,ke);const an=this.placedOrientations[Zt.crossTileID];an&&(this.markUsedJustification(r,"left",Zt,an),this.markUsedOrientation(r,an,Zt))}if(le){const Ge=Rl(fe.icon),In=!(ft&&Zt.verticalPlacedIconSymbolIndex&&De);Zt.placedIconSymbolIndex>=0&&(Ot(r.icon,Zt.numIconVertices,In?Ge:Ps),r.icon.placedSymbolArray.get(Zt.placedIconSymbolIndex).hidden=fe.icon.isHidden()),Zt.verticalPlacedIconSymbolIndex>=0&&(Ot(r.icon,Zt.numVerticalIconVertices,In?Ps:Ge),r.icon.placedSymbolArray.get(Zt.verticalPlacedIconSymbolIndex).hidden=fe.icon.isHidden())}const Qe=Dt&&Dt.has(Ft)?Dt.get(Ft):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Ge=r.collisionArrays[Ft];if(Ge){let In=new o.P(0,0);if(Ge.textBox||Ge.verticalTextBox){let yn=!0;if(Y){const an=this.variableOffsets[se];an?(In=Ma(an.anchor,an.width,an.height,an.textOffset,an.textBoxScale),nt&&In._rotate(rt?-this.transform.bearingInRadians:this.transform.bearingInRadians)):yn=!1}if(Ge.textBox||Ge.verticalTextBox){let an;Ge.textBox&&(an=De),Ge.verticalTextBox&&(an=Ee),Ts(r.textCollisionBox.collisionVertexArray,fe.text.placed,!yn||an,Qe.text,In.x,In.y)}}if(Ge.iconBox||Ge.verticalIconBox){const yn=!!(!Ee&&Ge.verticalIconBox);let an;Ge.iconBox&&(an=yn),Ge.verticalIconBox&&(an=!yn),Ts(r.iconCollisionBox.collisionVertexArray,fe.icon.placed,an,Qe.icon,ft?In.x:0,ft?In.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>r}setStale(){this.stale=!0}}function Ts(b,r,c,p,y,A){p&&p.length!==0||(p=[0,0,0,0]);const T=p[0]-wi,L=p[1]-wi,B=p[2]-wi,G=p[3]-wi;b.emplaceBack(r?1:0,c?1:0,y||0,A||0,T,L),b.emplaceBack(r?1:0,c?1:0,y||0,A||0,B,L),b.emplaceBack(r?1:0,c?1:0,y||0,A||0,B,G),b.emplaceBack(r?1:0,c?1:0,y||0,A||0,T,G)}const Ll=Math.pow(2,25),Sh=Math.pow(2,24),wd=Math.pow(2,17),Eh=Math.pow(2,16),$u=Math.pow(2,9),Zu=Math.pow(2,8),wc=Math.pow(2,1);function Rl(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const r=b.placed?1:0,c=Math.floor(127*b.opacity);return c*Ll+r*Sh+c*wd+r*Eh+c*$u+r*Zu+c*wc+r}const Ps=0;class Th{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,p,y,A){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(T,y,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,A())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((L,B)=>L.sortKey-B.sortKey));this._currentPartIndex<T.length;)if(c.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,A())return!0;return!1}}class eu{constructor(r,c,p,y,A,T,L,B){this.placement=new Es(r,c,T,L,B),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=A,this._done=!1}isDone(){return this._done}continuePlacement(r,c,p){const y=E.now(),A=()=>!this._forceFullPlacement&&E.now()-y>2;for(;this._currentPlacementIndex>=0;){const T=c[r[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=L)&&(!T.maxzoom||T.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new Th(T)),this._inProgressLayer.continuePlacement(p[T.source],this.placement,this._showCollisionBoxes,T,A))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Dl=512/o.Z/2;class Ua{constructor(r,c,p){this.tileID=r,this.bucketInstanceId=p,this._symbolsByKey={};const y=new Map;for(let A=0;A<c.length;A++){const T=c.get(A),L=T.key,B=y.get(L);B?B.push(T):y.set(L,[T])}for(const[A,T]of y){const L={positions:T.map(B=>({x:Math.floor(B.anchorX*Dl),y:Math.floor(B.anchorY*Dl)})),crossTileIDs:T.map(B=>B.crossTileID)};if(L.positions.length>128){const B=new o.aF(L.positions.length,16,Uint16Array);for(const{x:G,y:Y}of L.positions)B.add(G,Y);B.finish(),delete L.positions,L.index=B}this._symbolsByKey[A]=L}}getScaledCoordinates(r,c){const{x:p,y,z:A}=this.tileID.canonical,{x:T,y:L,z:B}=c.canonical,G=Dl/Math.pow(2,B-A),Y=(L*o.Z+r.anchorY)*G,nt=y*o.Z*Dl;return{x:Math.floor((T*o.Z+r.anchorX)*G-p*o.Z*Dl),y:Math.floor(Y-nt)}}findMatches(r,c,p){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let A=0;A<r.length;A++){const T=r.get(A);if(T.crossTileID)continue;const L=this._symbolsByKey[T.key];if(!L)continue;const B=this.getScaledCoordinates(T,c);if(L.index){const G=L.index.range(B.x-y,B.y-y,B.x+y,B.y+y).sort();for(const Y of G){const nt=L.crossTileIDs[Y];if(!p[nt]){p[nt]=!0,T.crossTileID=nt;break}}}else if(L.positions)for(let G=0;G<L.positions.length;G++){const Y=L.positions[G],nt=L.crossTileIDs[G];if(Math.abs(Y.x-B.x)<=y&&Math.abs(Y.y-B.y)<=y&&!p[nt]){p[nt]=!0,T.crossTileID=nt;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class O{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class W{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const p in this.indexes){const y=this.indexes[p],A={};for(const T in y){const L=y[T];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+c),A[L.tileID.key]=L}this.indexes[p]=A}this.lng=r}addBucket(r,c,p){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let A=0;A<c.symbolInstances.length;A++)c.symbolInstances.get(A).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const y=this.usedCrossTileIDs[r.overscaledZ];for(const A in this.indexes){const T=this.indexes[A];if(Number(A)>r.overscaledZ)for(const L in T){const B=T[L];B.tileID.isChildOf(r)&&B.findMatches(c.symbolInstances,r,y)}else{const L=T[r.scaledTo(Number(A)).key];L&&L.findMatches(c.symbolInstances,r,y)}}for(let A=0;A<c.symbolInstances.length;A++){const T=c.symbolInstances.get(A);T.crossTileID||(T.crossTileID=p.generate(),y[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ua(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const p of c.getCrossTileIDsLists())for(const y of p)delete this.usedCrossTileIDs[r][y]}removeStaleBuckets(r){let c=!1;for(const p in this.indexes){const y=this.indexes[p];for(const A in y)r[y[A].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,y[A]),delete y[A],c=!0)}return c}}class xt{constructor(){this.layerIndexes={},this.crossTileIDs=new O,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,p){let y=this.layerIndexes[r.id];y===void 0&&(y=this.layerIndexes[r.id]=new W);let A=!1;const T={};y.handleWrapJump(p);for(const L of c){const B=L.getBucket(r);B&&r.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(L.tileID,B,this.crossTileIDs)&&(A=!0),T[B.bucketInstanceId]=!0)}return y.removeStaleBuckets(T)&&(A=!0),A}pruneUnusedLayers(r){const c={};r.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}var Ht="void main() {fragColor=vec4(1.0);}";const $t={prelude:Xt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Xt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Xt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Xt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Xt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Xt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Xt(Ht,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Xt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Xt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Xt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Xt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Xt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Xt(Ht,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Xt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Xt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Xt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Xt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Xt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Xt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Xt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Xt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Xt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Xt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Xt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Xt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Xt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Xt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Xt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Xt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Xt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Xt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Xt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Xt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Xt(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Xt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Xt(b,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=r.match(/in ([\w]+) ([\w]+)/g),y=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=A?A.concat(y):y,L={};return{fragmentSource:b=b.replace(c,(B,G,Y,nt,rt)=>(L[rt]=!0,G==="define"?`
#ifndef HAS_UNIFORM_u_${rt}
in ${Y} ${nt} ${rt};
#else
uniform ${Y} ${nt} u_${rt};
#endif
`:`
#ifdef HAS_UNIFORM_u_${rt}
    ${Y} ${nt} ${rt} = u_${rt};
#endif
`)),vertexSource:r=r.replace(c,(B,G,Y,nt,rt)=>{const ft=nt==="float"?"vec2":"vec4",_t=rt.match(/color/)?"color":ft;return L[rt]?G==="define"?`
#ifndef HAS_UNIFORM_u_${rt}
uniform lowp float u_${rt}_t;
in ${Y} ${ft} a_${rt};
out ${Y} ${nt} ${rt};
#else
uniform ${Y} ${nt} u_${rt};
#endif
`:_t==="vec4"?`
#ifndef HAS_UNIFORM_u_${rt}
    ${rt} = a_${rt};
#else
    ${Y} ${nt} ${rt} = u_${rt};
#endif
`:`
#ifndef HAS_UNIFORM_u_${rt}
    ${rt} = unpack_mix_${_t}(a_${rt}, u_${rt}_t);
#else
    ${Y} ${nt} ${rt} = u_${rt};
#endif
`:G==="define"?`
#ifndef HAS_UNIFORM_u_${rt}
uniform lowp float u_${rt}_t;
in ${Y} ${ft} a_${rt};
#else
uniform ${Y} ${nt} u_${rt};
#endif
`:_t==="vec4"?`
#ifndef HAS_UNIFORM_u_${rt}
    ${Y} ${nt} ${rt} = a_${rt};
#else
    ${Y} ${nt} ${rt} = u_${rt};
#endif
`:`
#ifndef HAS_UNIFORM_u_${rt}
    ${Y} ${nt} ${rt} = unpack_mix_${_t}(a_${rt}, u_${rt}_t);
#else
    ${Y} ${nt} ${rt} = u_${rt};
#endif
`}),staticAttributes:p,staticUniforms:T}}class _e{constructor(r,c,p){this.vertexBuffer=r,this.indexBuffer=c,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var cn=o.aG([{name:"a_pos",type:"Int16",components:2}]);const dn="#define PROJECTION_MERCATOR",An="mercator";class mn{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return An}get shaderDefine(){return dn}get shaderPreludeCode(){return $t.projectionMercator}get vertexShaderPreludeCode(){return $t.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,c,p,y,A){if(this._cachedMesh)return this._cachedMesh;const T=new o.aI;T.emplaceBack(0,0),T.emplaceBack(o.Z,0),T.emplaceBack(0,o.Z),T.emplaceBack(o.Z,o.Z);const L=r.createVertexBuffer(T,cn.members),B=o.aJ.simpleSegment(0,0,4,2),G=new o.aK;G.emplaceBack(1,0,2),G.emplaceBack(1,2,3);const Y=r.createIndexBuffer(G);return this._cachedMesh=new _e(L,Y,B),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class Mn{constructor(r=0,c=0,p=0,y=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=p,this.right=y}interpolate(r,c,p){return c.top!=null&&r.top!=null&&(this.top=o.B.number(r.top,c.top,p)),c.bottom!=null&&r.bottom!=null&&(this.bottom=o.B.number(r.bottom,c.bottom,p)),c.left!=null&&r.left!=null&&(this.left=o.B.number(r.left,c.left,p)),c.right!=null&&r.right!=null&&(this.right=o.B.number(r.right,c.right,p)),this}getCenter(r,c){const p=o.ae((this.left+r-this.right)/2,0,r),y=o.ae((this.top+c-this.bottom)/2,0,c);return new o.P(p,y)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Mn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Kn(b,r){if(!b.renderWorldCopies||b.lngRange)return;const c=r.lng-b.center.lng;r.lng+=c>180?-360:c<-180?360:0}function Zr(b){return Math.max(0,Math.floor(b))}class or{constructor(r,c,p,y,A,T){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=T===void 0||!!T,this._minZoom=c||0,this._maxZoom=p||22,this._minPitch=y??0,this._maxPitch=A??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Zr(this._zoom),this._scale=o.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Mn,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,c,p){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=Zr(this._zoom),this._scale=o.ac(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new Mn(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!p&&r.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const c=o.aL(r,-180,180)*Math.PI/180;var p,y,A,T,L,B,G,Y,nt;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=_(),p=this._rotationMatrix,A=-this._bearingInRadians,T=(y=this._rotationMatrix)[0],L=y[1],B=y[2],G=y[3],Y=Math.sin(A),nt=Math.cos(A),p[0]=T*nt+B*Y,p[1]=L*nt+G*Y,p[2]=T*-Y+B*nt,p[3]=L*-Y+G*nt)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const c=o.ae(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const c=r/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aM(this._fovInRadians)}setFov(r){r=o.ae(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=o.ab(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const c=this.getConstrained(this._center,r).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.ac(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,c){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,p){this._unmodified=!1,this._edgeInsets.interpolate(r,c,p),this._constrain(),this._calcMatrices()}resize(r,c,p=!0){this._width=r,this._height=c,p&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new H([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.af])}getConstrained(r,c){return this._callbacks.getConstrained(r,c)}getCameraQueryGeometry(r,c){if(c.length===1)return[c[0],r];{let p=r.x,y=r.y,A=r.x,T=r.y;for(const L of c)p=Math.min(p,L.x),y=Math.min(y,L.y),A=Math.max(A,L.x),T=Math.max(T,L.y);return[new o.P(p,y),new o.P(A,y),new o.P(A,T),new o.P(p,T),new o.P(p,y)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:p}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(p),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=o.ad(new Float64Array(16));o.M(r,r,[this._width/2,-this._height/2,1]),o.L(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=o.ad(new Float64Array(16)),o.M(r,r,[1,-1,1]),o.L(r,r,[-1,-1,0]),o.M(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,c,p,y){const A=p!==void 0?p:this.bearing,T=y=y!==void 0?y:this.pitch,L=o.$.fromLngLat(r,c),B=-Math.cos(o.ab(T)),G=Math.sin(o.ab(T)),Y=G*Math.sin(o.ab(A)),nt=-G*Math.cos(o.ab(A));let rt=this.elevation;const ft=c-rt;let _t;B*ft>=0||Math.abs(B)<.1?(_t=1e4,rt=c+_t*B):_t=-ft/B;let Ot,Dt,Ft=o.aN(1,L.y),Zt=0;do{if(Zt+=1,Zt>10)break;Dt=_t/Ft,Ot=new o.$(L.x+Y*Dt,L.y+nt*Dt),Ft=1/Ot.meterInMercatorCoordinateUnits()}while(Math.abs(_t-Dt*Ft)>1e-12);return{center:Ot.toLngLat(),elevation:rt,zoom:o.ah(this.height/2/Math.tan(this.fovInRadians/2)/Dt/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const c=o.ag(1,this.center.lat)*this.worldSize,p=this.cameraToCenterDistance/c,y=o.$.fromLngLat(this.center,this.elevation),A=mt(this.center,this.elevation,this.pitch,this.bearing,p);this._elevation=r;const T=this.calculateCenterFromCameraLngLatAlt(A.toLngLat(),o.aN(A.z,y.y),this.bearing,this.pitch);this._elevation=T.elevation,this._center=T.center,this.setZoom(T.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=o.ag(1,this.center.lat)*this.worldSize;return mt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const c=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/c,r.canonical.y/c,1/c/o.Z,1/c/o.Z]}}class ai{constructor(r,c){this.min=r,this.max=c,this.center=o.aO([],o.aP([],this.min,this.max),.5)}quadrant(r){const c=[r%2==0,r<2],p=o.aQ(this.min),y=o.aQ(this.max);for(let A=0;A<c.length;A++)p[A]=c[A]?this.min[A]:this.center[A],y[A]=c[A]?this.center[A]:this.max[A];return y[2]=this.max[2],new ai(p,y)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let c=!0;for(let p=0;p<r.planes.length;p++){const y=this.intersectsPlane(r.planes[p]);if(y===0)return 0;y===1&&(c=!1)}return c?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let c=r[3],p=r[3];for(let y=0;y<3;y++)r[y]>0?(c+=r[y]*this.min[y],p+=r[y]*this.max[y]):(p+=r[y]*this.min[y],c+=r[y]*this.max[y]);return c>=0?2:p<0?0:1}}class on{distanceToTile2d(r,c,p,y){const A=y.distanceX([r,c]),T=y.distanceY([r,c]);return Math.hypot(A,T)}getWrap(r,c,p){return p}getTileAABB(r,c,p,y){var A,T;let L=p,B=p;if(y.terrain){const Y=new o.Y(r.z,c,r.z,r.x,r.y),nt=y.terrain.getMinMaxElevation(Y);L=(A=nt.minElevation)!==null&&A!==void 0?A:p,B=(T=nt.maxElevation)!==null&&T!==void 0?T:p}const G=1<<r.z;return new ai([c+r.x/G,r.y/G,L],[c+(r.x+1)/G,(r.y+1)/G,B])}allowVariableZoom(r,c){const p=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,y=o.ae(78.5-p/2,0,60);return!!c.terrain||r.pitch>y}allowWorldCopies(){return!0}recalculateCache(){}}class kn{constructor(r,c,p){this.points=r,this.planes=c,this.aabb=p}static fromInvProjectionMatrix(r,c=1,p=0){const y=Math.pow(2,p),A=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(G=>{const Y=1/(G=o.at([],G,r))[3]/c*y;return o.aR(G,G,[Y,Y,1/G[3],Y])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(G=>{const Y=o.aS([],A[G[0]],A[G[1]]),nt=o.aS([],A[G[2]],A[G[1]]),rt=o.aT([],o.aU([],Y,nt)),ft=-o.aV(rt,A[G[1]]);return rt.concat(ft)}),L=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],B=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const G of A)for(let Y=0;Y<3;Y++)L[Y]=Math.min(L[Y],G[Y]),B[Y]=Math.max(B[Y],G[Y]);return new kn(A,T,new ai(L,B))}}class Rr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,p){return this._helper.interpolatePadding(r,c,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,p=!0){this._helper.resize(r,c,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,c){}constructor(r,c,p,y,A){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new or({calcMatrices:()=>{this._calcMatrices()},getConstrained:(T,L)=>this.getConstrained(T,L)},r,c,p,y,A),this._coveringTilesDetailsProvider=new on}clone(){const r=new Rr;return r.apply(this),r}apply(r,c,p){this._helper.apply(r,c,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const c=[new o.aW(0,r)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new o.P(0,0)),y=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),A=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),T=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),L=Math.floor(Math.min(p.x,y.x,A.x,T.x)),B=Math.floor(Math.max(p.x,y.x,A.x,T.x)),G=1;for(let Y=L-G;Y<=B+G;Y++)Y!==0&&c.push(new o.aW(Y,r))}return c}getCameraFrustum(){return kn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const c=this.screenPointToLocation(this.centerPoint,r),p=r?r.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(r,c){const p=o.ag(this.elevation,this.center.lat),y=this.screenPointToMercatorCoordinateAtZ(c,p),A=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),T=o.$.fromLngLat(r),L=new o.$(T.x-(y.x-A.x),T.y-(y.y-A.y));this.setCenter(L==null?void 0:L.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,c){return c?this.coordinatePoint(o.$.fromLngLat(r),c.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.$.fromLngLat(r))}screenPointToLocation(r,c){var p;return(p=this.screenPointToMercatorCoordinate(r,c))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(r,c){if(c){const p=c.pointCoordinate(r);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,c){const p=c||0,y=[r.x,r.y,0,1],A=[r.x,r.y,1,1];o.at(y,y,this._pixelMatrixInverse),o.at(A,A,this._pixelMatrixInverse);const T=y[3],L=A[3],B=y[1]/T,G=A[1]/L,Y=y[2]/T,nt=A[2]/L,rt=Y===nt?0:(p-Y)/(nt-Y);return new o.$(o.B.number(y[0]/T,A[0]/L,rt)/this.worldSize,o.B.number(B,G,rt)/this.worldSize,p)}coordinatePoint(r,c=0,p=this._pixelMatrix){const y=[r.x*this.worldSize,r.y*this.worldSize,c,1];return o.at(y,y,p),new o.P(y[0]/y[3],y[1]/y[3])}getBounds(){const r=Math.max(0,this._helper._height/2-oe(this));return new H().extend(this.screenPointToLocation(new o.P(0,r))).extend(this.screenPointToLocation(new o.P(this._helper._width,r))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(r,c){return c?c.pointCoordinate(r)!=null:r.y>this.height/2-oe(this)}calculatePosMatrix(r,c=!1,p){var y;const A=(y=r.key)!==null&&y!==void 0?y:o.aX(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),T=c?this._alignedPosMatrixCache:this._posMatrixCache;if(T.has(A)){const G=T.get(A);return p?G.f32:G.f64}const L=ht(r,this.worldSize);o.N(L,c?this._alignedProjMatrix:this._viewProjMatrix,L);const B={f64:L,f32:new Float32Array(L)};return T.set(A,B),p?B.f32:B.f64}calculateFogMatrix(r){const c=r.key,p=this._fogMatrixCacheF32;if(p.has(c))return p.get(c);const y=ht(r,this.worldSize);return o.N(y,this._fogMatrix,y),p.set(c,new Float32Array(y)),p.get(c)}getConstrained(r,c){c=o.ae(+c,this.minZoom,this.maxZoom);const p={center:new o.Q(r.lng,r.lat),zoom:c};let y=this._helper._lngRange;this._helper._renderWorldCopies||y!==null||(y=[-179.9999999999,180-1e-10]);const A=this.tileSize*o.ac(p.zoom);let T=0,L=A,B=0,G=A,Y=0,nt=0;const{x:rt,y:ft}=this.size;if(this._helper._latRange){const Qt=this._helper._latRange;T=o.S(Qt[1])*A,L=o.S(Qt[0])*A,L-T<ft&&(Y=ft/(L-T))}y&&(B=o.aL(o.U(y[0])*A,0,A),G=o.aL(o.U(y[1])*A,0,A),G<B&&(G+=A),G-B<rt&&(nt=rt/(G-B)));const{x:_t,y:Ot}=un(A,r);let Dt,Ft;const Zt=Math.max(nt||0,Y||0);if(Zt){const Qt=new o.P(nt?(G+B)/2:_t,Y?(L+T)/2:Ot);return p.center=Nn(A,Qt).wrap(),p.zoom+=o.ah(Zt),p}if(this._helper._latRange){const Qt=ft/2;Ot-Qt<T&&(Ft=T+Qt),Ot+Qt>L&&(Ft=L-Qt)}if(y){const Qt=(B+G)/2;let ne=_t;this._helper._renderWorldCopies&&(ne=o.aL(_t,Qt-A/2,Qt+A/2));const se=rt/2;ne-se<B&&(Dt=B+se),ne+se>G&&(Dt=G-se)}if(Dt!==void 0||Ft!==void 0){const Qt=new o.P(Dt??_t,Ft??Ot);p.center=Nn(A,Qt).wrap()}return p}calculateCenterFromCameraLngLatAlt(r,c,p,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,p,y)}_calculateNearFarZIfNeeded(r,c,p){if(!this._helper.autoCalculateNearFarZ)return;const y=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),A=r-y*this._helper._pixelPerMeter/Math.cos(c),T=y<0?A:r,L=Math.PI/2+this.pitchInRadians,B=o.ab(this.fov)*(Math.abs(Math.cos(o.ab(this.roll)))*this.height+Math.abs(Math.sin(o.ab(this.roll)))*this.width)/this.height*(.5+p.y/this.height),G=Math.sin(B)*T/Math.sin(o.ae(Math.PI-L-B,.01,Math.PI-.01)),Y=oe(this),nt=Math.atan(Y/this._helper.cameraToCenterDistance),rt=o.ab(.75),ft=nt>rt?2*nt*(.5+p.y/(2*Y)):rt,_t=Math.sin(ft)*T/Math.sin(o.ae(Math.PI-L-ft,.01,Math.PI-.01)),Ot=Math.min(G,_t);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*Ot+T),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,c=un(this.worldSize,this.center),p=c.x,y=c.y;this._helper._pixelPerMeter=o.ag(1,this.center.lat)*this.worldSize;const A=o.ab(Math.min(this.pitch,Ye)),T=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(A));let L;this._calculateNearFarZIfNeeded(T,A,r),L=new Float64Array(16),o.aY(L,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.an(this._invProjMatrix,L),L[8]=2*-r.x/this._helper._width,L[9]=2*r.y/this._helper._height,this._projectionMatrix=o.aZ(L),o.M(L,L,[1,-1,1]),o.L(L,L,[0,0,-this._helper.cameraToCenterDistance]),o.a_(L,L,-this.rollInRadians),o.a$(L,L,this.pitchInRadians),o.a_(L,L,-this.bearingInRadians),o.L(L,L,[-p,-y,0]),this._mercatorMatrix=o.M([],L,[this.worldSize,this.worldSize,this.worldSize]),o.M(L,L,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,L),o.L(L,L,[0,0,-this.elevation]),this._viewProjMatrix=L,this._invViewProjMatrix=o.an([],L);const B=[0,0,-1,1];o.at(B,B,this._invViewProjMatrix),this._cameraPosition=[B[0]/B[3],B[1]/B[3],B[2]/B[3]],this._fogMatrix=new Float64Array(16),o.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,T,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,o.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.L(this._fogMatrix,this._fogMatrix,[-p,-y,0]),o.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,L);const G=this._helper._width%2/2,Y=this._helper._height%2/2,nt=Math.cos(this.bearingInRadians),rt=Math.sin(-this.bearingInRadians),ft=p-Math.round(p)+nt*G+rt*Y,_t=y-Math.round(y)+nt*Y+rt*G,Ot=new Float64Array(L);if(o.L(Ot,Ot,[ft>.5?ft-1:ft,_t>.5?_t-1:_t,0]),this._alignedProjMatrix=Ot,L=o.an(new Float64Array(16),this._pixelMatrix),!L)throw new Error("failed to invert matrix");this._pixelMatrixInverse=L,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return o.at(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=o.ag(1,this.center.lat)*this.worldSize;return mt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,c){const p=o.$.fromLngLat(r),y=[p.x*this.worldSize,p.y*this.worldSize,c,1];return o.at(y,y,this._viewProjMatrix),y[2]/y[3]}getProjectionData(r){const{overscaledTileID:c,aligned:p,applyTerrainMatrix:y}=r,A=this._helper.getMercatorTileCoordinates(c),T=c?this.calculatePosMatrix(c,p,!0):null;let L;return L=c&&c.terrainRttPosMatrix32f&&y?c.terrainRttPosMatrix32f:T||o.b0(),{mainMatrix:L,tileMercatorCoords:A,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:L}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,c,p){return 1}transformLightDirection(r){return o.aQ(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,c,p,y){const A=this.calculatePosMatrix(p);let T;y?(T=[r,c,y(r,c),1],o.at(T,T,A)):(T=[r,c,0,1],mi(T,T,A));const L=T[3];return{point:new o.P(T[0]/L,T[1]/L),signedDistanceFromCamera:L,isOccluded:!1}}populateCache(r){for(const c of r)this.calculatePosMatrix(c)}getMatrixForModel(r,c){const p=o.$.fromLngLat(r,c),y=p.meterInMercatorCoordinateUnits(),A=o.b1();return o.L(A,A,[p.x,p.y,p.z]),o.a_(A,A,Math.PI),o.a$(A,A,Math.PI/2),o.M(A,A,[-y,y,y]),A}getProjectionDataForCustomLayer(r=!0){const c=new o.Y(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:r}),y=ht(c,this.worldSize);o.N(y,this._viewProjMatrix,y),p.tileMercatorCoords=[0,0,1,1];const A=[o.Z,o.Z,this.worldSize/this._helper.pixelsPerMeter],T=o.b2();return o.M(T,y,A),p.fallbackMatrix=T,p.mainMatrix=T,p}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function bi(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function gi(b){if(b.useSlerp)if(b.k<1){const r=o.b3(b.startEulerAngles.roll,b.startEulerAngles.pitch,b.startEulerAngles.bearing),c=o.b3(b.endEulerAngles.roll,b.endEulerAngles.pitch,b.endEulerAngles.bearing),p=new Float64Array(4);o.b4(p,r,c,b.k);const y=o.b5(p);b.tr.setRoll(y.roll),b.tr.setPitch(y.pitch),b.tr.setBearing(y.bearing)}else b.tr.setRoll(b.endEulerAngles.roll),b.tr.setPitch(b.endEulerAngles.pitch),b.tr.setBearing(b.endEulerAngles.bearing);else b.tr.setRoll(o.B.number(b.startEulerAngles.roll,b.endEulerAngles.roll,b.k)),b.tr.setPitch(o.B.number(b.startEulerAngles.pitch,b.endEulerAngles.pitch,b.k)),b.tr.setBearing(o.B.number(b.startEulerAngles.bearing,b.endEulerAngles.bearing,b.k))}function Jo(b,r,c,p,y){const A=y.padding,T=un(y.worldSize,c.getNorthWest()),L=un(y.worldSize,c.getNorthEast()),B=un(y.worldSize,c.getSouthEast()),G=un(y.worldSize,c.getSouthWest()),Y=o.ab(-p),nt=T.rotate(Y),rt=L.rotate(Y),ft=B.rotate(Y),_t=G.rotate(Y),Ot=new o.P(Math.max(nt.x,rt.x,_t.x,ft.x),Math.max(nt.y,rt.y,_t.y,ft.y)),Dt=new o.P(Math.min(nt.x,rt.x,_t.x,ft.x),Math.min(nt.y,rt.y,_t.y,ft.y)),Ft=Ot.sub(Dt),Zt=(y.width-(A.left+A.right+r.left+r.right))/Ft.x,Qt=(y.height-(A.top+A.bottom+r.top+r.bottom))/Ft.y;if(Qt<0||Zt<0)return void bi();const ne=Math.min(o.ah(y.scale*Math.min(Zt,Qt)),b.maxZoom),se=o.P.convert(b.offset),fe=new o.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(o.ab(p)),le=se.add(fe).mult(y.scale/o.ac(ne));return{center:Nn(y.worldSize,T.add(B).div(2).sub(le)),zoom:ne,bearing:p}}class nu{get useGlobeControls(){return!1}handlePanInertia(r,c){return{easingOffset:r,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(r,c){r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta),r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta)}handleMapControlsPan(r,c,p){r.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(p,r.around)}cameraForBoxAndBearing(r,c,p,y,A){return Jo(r,c,p,y,A)}handleJumpToCenterZoom(r,c){r.zoom!==(c.zoom!==void 0?+c.zoom:r.zoom)&&r.setZoom(+c.zoom),c.center!==void 0&&r.setCenter(o.Q.convert(c.center))}handleEaseTo(r,c){const p=r.zoom,y=r.padding,A={roll:r.roll,pitch:r.pitch,bearing:r.bearing},T={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},L=c.zoom!==void 0,B=!r.isPaddingEqual(c.padding);let G=!1;const Y=L?+c.zoom:r.zoom;let nt=r.centerPoint.add(c.offsetAsPoint);const rt=r.screenPointToLocation(nt),{center:ft,zoom:_t}=r.getConstrained(o.Q.convert(c.center||rt),Y??p);Kn(r,ft);const Ot=un(r.worldSize,rt),Dt=un(r.worldSize,ft).sub(Ot),Ft=o.ac(_t-p);return G=_t!==p,{easeFunc:Zt=>{if(G&&r.setZoom(o.B.number(p,_t,Zt)),o.b6(A,T)||gi({startEulerAngles:A,endEulerAngles:T,tr:r,k:Zt,useSlerp:A.roll!=T.roll}),B&&(r.interpolatePadding(y,c.padding,Zt),nt=r.centerPoint.add(c.offsetAsPoint)),c.around)r.setLocationAtPoint(c.around,c.aroundPoint);else{const Qt=o.ac(r.zoom-p),ne=_t>p?Math.min(2,Ft):Math.max(.5,Ft),se=Math.pow(ne,1-Zt),fe=Nn(r.worldSize,Ot.add(Dt.mult(Zt*se)).mult(Qt));r.setLocationAtPoint(r.renderWorldCopies?fe.wrap():fe,nt)}},isZooming:G,elevationCenter:ft}}handleFlyTo(r,c){const p=c.zoom!==void 0,y=r.zoom,A=r.getConstrained(o.Q.convert(c.center||c.locationAtOffset),p?+c.zoom:y),T=A.center,L=A.zoom;Kn(r,T);const B=un(r.worldSize,c.locationAtOffset),G=un(r.worldSize,T).sub(B),Y=G.mag(),nt=o.ac(L-y);let rt;if(c.minZoom!==void 0){const ft=Math.min(+c.minZoom,y,L),_t=r.getConstrained(T,ft).zoom;rt=o.ac(_t-y)}return{easeFunc:(ft,_t,Ot,Dt)=>{r.setZoom(ft===1?L:y+o.ah(_t));const Ft=ft===1?T:Nn(r.worldSize,B.add(G.mult(Ot)).mult(_t));r.setLocationAtPoint(r.renderWorldCopies?Ft.wrap():Ft,Dt)},scaleOfZoom:nt,targetCenter:T,scaleOfMinZoom:rt,pixelPathLength:Y}}}class ur{constructor(r,c,p){this.blendFunction=r,this.blendColor=c,this.mask=p}}ur.Replace=[1,0],ur.disabled=new ur(ur.Replace,o.b7.transparent,[!1,!1,!1,!1]),ur.unblended=new ur(ur.Replace,o.b7.transparent,[!0,!0,!0,!0]),ur.alphaBlended=new ur([1,771],o.b7.transparent,[!0,!0,!0,!0]);const Wu=2305;class Wr{constructor(r,c,p){this.enable=r,this.mode=c,this.frontFace=p}}Wr.disabled=new Wr(!1,1029,Wu),Wr.backCCW=new Wr(!0,1029,Wu),Wr.frontCCW=new Wr(!0,1028,Wu);class Fn{constructor(r,c,p){this.func=r,this.mask=c,this.range=p}}Fn.ReadOnly=!1,Fn.ReadWrite=!0,Fn.disabled=new Fn(519,Fn.ReadOnly,[0,1]);const Xr=7680;class Dr{constructor(r,c,p,y,A,T){this.test=r,this.ref=c,this.mask=p,this.fail=y,this.depthFail=A,this.pass=T}}Dr.disabled=new Dr({func:519,mask:0},0,0,Xr,Xr,Xr);const Cc=new WeakMap;function ca(b){var r;if(Cc.has(b))return Cc.get(b);{const c=(r=b.getParameter(b.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Cc.set(b,c),c}}class Ol{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const c=r.context,p=c.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const y=new o.aI;y.emplaceBack(-1,-1),y.emplaceBack(2,-1),y.emplaceBack(-1,2);const A=new o.aK;A.emplaceBack(0,1,2),this._fullscreenTriangle=new _e(c.createVertexBuffer(y,cn.members),c.createIndexBuffer(A),o.aJ.simpleSegment(0,0,y.length,A.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(p.TEXTURE1);const T=p.createTexture();p.bindTexture(p.TEXTURE_2D,T),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(T),ca(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,c){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,c=r.gl;r.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,c){const p=this._cachedRenderContext.context,y=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:o.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,y.TRIANGLES,Fn.disabled,Dr.disabled,ur.unblended,Wr.disabled,((A,T)=>({u_input:A,u_output_expected:T}))(r,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ca(y)){y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.readBuffer(y.COLOR_ATTACHMENT0),y.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),y.bindBuffer(y.PIXEL_PACK_BUFFER,null);const A=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0);y.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:A}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ca(r)){const c=r.clientWaitSync(this._readbackQueue.sync,0,0);if(c===r.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ol._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let c=0;return c+=r[0]/256,c+=r[1]/65536,c+=r[2]/16777216,r[3]<127&&(c=-c),c/128}}const ru=o.Z/128;function qu(b,r){const c=b.granularity!==void 0?Math.max(b.granularity,1):1,p=c+(b.generateBorders?2:0),y=c+(b.extendToNorthPole||b.generateBorders?1:0)+(b.extendToSouthPole||b.generateBorders?1:0),A=p+1,T=y+1,L=b.generateBorders?-1:0,B=b.generateBorders||b.extendToNorthPole?-1:0,G=c+(b.generateBorders?1:0),Y=c+(b.generateBorders||b.extendToSouthPole?1:0),nt=A*T,rt=p*y*6,ft=A*T>65536;if(ft&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const _t=ft||r==="32bit",Ot=new Int16Array(2*nt);let Dt=0;for(let Qt=B;Qt<=Y;Qt++)for(let ne=L;ne<=G;ne++){let se=ne/c*o.Z;ne===-1&&(se=-64),ne===c+1&&(se=o.Z+ru);let fe=Qt/c*o.Z;Qt===-1&&(fe=b.extendToNorthPole?o.b9:-64),Qt===c+1&&(fe=b.extendToSouthPole?o.ba:o.Z+ru),Ot[Dt++]=se,Ot[Dt++]=fe}const Ft=_t?new Uint32Array(rt):new Uint16Array(rt);let Zt=0;for(let Qt=0;Qt<y;Qt++)for(let ne=0;ne<p;ne++){const se=ne+1+Qt*A,fe=ne+(Qt+1)*A,le=ne+1+(Qt+1)*A;Ft[Zt++]=ne+Qt*A,Ft[Zt++]=fe,Ft[Zt++]=se,Ft[Zt++]=se,Ft[Zt++]=fe,Ft[Zt++]=le}return{vertices:Ot.buffer.slice(0),indices:Ft.buffer.slice(0),uses32bitIndices:_t}}const zl=new o.aH({fill:new o.bb(128,2),line:new o.bb(512,0),tile:new o.bb(128,32),stencil:new o.bb(128,1),circle:3});class iu{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return $t.projectionGlobe}get vertexShaderPreludeCode(){return $t.projectionMercator.vertexSource}get subdivisionGranularity(){return zl}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new Ol(r));const c=o.S(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,y=this._errorMeasurement.updateErrorLoop(c,p),A=E.now();y!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=y,this._errorMeasurementLastChangeTime=A);const T=Math.min(Math.max((A-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bd(T))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,c,p,y,A){const T=(A==="stencil"?zl.stencil:zl.tile).getGranularityForZoomLevel(c.z);return this._getMesh(r,{granularity:T,generateBorders:p,extendToNorthPole:c.y===0&&y,extendToSouthPole:c.y===(1<<c.z)-1&&y})}_getMesh(r,c){const p=this._getMeshKey(c);if(p in this._tileMeshCache)return this._tileMeshCache[p];const y=function(A,T){const L=qu(T,"16bit"),B=o.aI.deserialize({arrayBuffer:L.vertices,length:L.vertices.byteLength/2/2}),G=o.aK.deserialize({arrayBuffer:L.indices,length:L.indices.byteLength/2/3});return new _e(A.createVertexBuffer(B,cn.members),A.createIndexBuffer(G),o.aJ.simpleSegment(0,0,B.length,G.length))}(r,c);return this._tileMeshCache[p]=y,y}recalculate(r){}hasTransition(){const r=E.now();let c=!1;return c=c||(r-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const Fi=new o.r({type:new o.D(o.v.projection.type)});class ou extends o.E{constructor(r){super(),this._transitionable=new o.T(Fi),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0)),this._mercatorProjection=new mn,this._verticalPerspectiveProjection=new iu}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof o.be){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,c,p,y,A){return this.currentProjection.getMeshFromTileID(r,c,p,y,A)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Ha(b){const r=ro(b.worldSize,b.center.lat);return 2*Math.PI*r}function Fl(b,r,c,p,y){const A=1/(1<<y),T=r/o.Z*A+p*A,L=o.bg((b/o.Z*A+c*A)*Math.PI*2+Math.PI,2*Math.PI),B=2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI,G=Math.cos(B),Y=new Float64Array(3);return Y[0]=Math.sin(L)*G,Y[1]=Math.sin(B),Y[2]=Math.cos(L)*G,Y}function no(b){return function(r,c){const p=Math.cos(c),y=new Float64Array(3);return y[0]=Math.sin(r)*p,y[1]=Math.sin(c),y[2]=Math.cos(r)*p,y}(b.lng*Math.PI/180,b.lat*Math.PI/180)}function ro(b,r){return b/(2*Math.PI)/Math.cos(r*Math.PI/180)}function go(b){const r=Math.asin(b[1])/Math.PI*180,c=Math.sqrt(b[0]*b[0]+b[2]*b[2]);if(c>1e-6){const p=b[0]/c,y=Math.acos(b[2]/c),A=(p>0?y:-y)/Math.PI*180;return new o.Q(o.aL(A,-180,180),r)}return new o.Q(0,r)}function nl(b){return Math.cos(b*Math.PI/180)}function Br(b,r){const c=nl(b),p=nl(r);return o.ah(p/c)}function Bl(b,r){const c=b.rotate(r.bearingInRadians),p=r.zoom+Br(r.center.lat,0),y=o.bc(1/nl(r.center.lat),1/nl(Math.min(Math.abs(r.center.lat),60)),o.bf(p,7,3,0,1)),A=360/Ha({worldSize:r.worldSize,center:{lat:r.center.lat}});return new o.Q(r.center.lng-c.x*A*y,o.ae(r.center.lat+c.y*A,-85.051129,o.af))}function Ic(b){const r=.5*b,c=Math.sin(r),p=Math.cos(r);return Math.log(c+p)-Math.log(p-c)}function Ku(b,r,c,p){const y=b.lat+c*p;if(Math.abs(c)>1){const A=(Math.sign(b.lat+c)!==Math.sign(b.lat)?-Math.abs(b.lat):Math.abs(b.lat))*Math.PI/180,T=Math.abs(b.lat+c)*Math.PI/180,L=Ic(A+p*(T-A)),B=Ic(A),G=Ic(T);return new o.Q(b.lng+r*((L-B)/(G-B)),y)}return new o.Q(b.lng+r*p,y)}class Xi{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=r}recalculateCache(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(r,c,p,y){const A=`${r.z}_${r.x}_${r.y}`,T=this._cache.get(A);if(T)return T;const L=this._cachePrevious.get(A);if(L)return this._cache.set(A,L),L;const B=this._aabbFactory(r,c,p,y);return this._cache.set(A,B),this._hadAnyChanges=!0,B}}function Nl(b,r,c){const p=b-r;return p<0?-p:Math.max(0,p-c)}function Vo(b,r,c,p,y){const A=b-c;let T;return T=A<0?Math.min(-A,1+A-y):A>1?Math.min(Math.max(A-y,0),1-A):0,Math.max(T,Nl(r,p,y))}class Cd{constructor(){this._aabbCache=new Xi(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(r,c,p,y){const A=1<<p.z,T=1/A,L=p.x/A,B=p.y/A;let G=2;return G=Math.min(G,Vo(r,c,L,B,T)),G=Math.min(G,Vo(r,c,L+.5,-B-T,T)),G=Math.min(G,Vo(r,c,L+.5,2-B-T,T)),G}getWrap(r,c,p){const y=1<<c.z,A=1/y,T=c.x/y,L=Nl(r.x,T,A),B=Nl(r.x,T-1,A),G=Nl(r.x,T+1,A),Y=Math.min(L,B,G);return Y===G?1:Y===B?-1:0}allowVariableZoom(r,c){return he(r,c)>4}allowWorldCopies(){return!1}getTileAABB(r,c,p,y){return this._aabbCache.getTileAABB(r,c,p,y)}_computeTileAABB(r,c,p,y){if(r.z<=0)return new ai([-1,-1,-1],[1,1,1]);if(r.z===1)return new ai([r.x===0?-1:0,r.y===0?0:-1,-1],[r.x===0?0:1,r.y===0?1:0,1]);{const A=[Fl(0,0,r.x,r.y,r.z),Fl(o.Z,0,r.x,r.y,r.z),Fl(o.Z,o.Z,r.x,r.y,r.z),Fl(0,o.Z,r.x,r.y,r.z)],T=[1,1,1],L=[-1,-1,-1];for(const B of A)for(let G=0;G<3;G++)T[G]=Math.min(T[G],B[G]),L[G]=Math.max(L[G],B[G]);if(r.y===0||r.y===(1<<r.z)-1){const B=[0,r.y===0?1:-1,0];for(let G=0;G<3;G++)T[G]=Math.min(T[G],B[G]),L[G]=Math.max(L[G],B[G])}return new ai(T,L)}}}class au{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,p){return this._helper.interpolatePadding(r,c,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c){this._helper.resize(r,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=o.bk(),this._projectionMatrix=o.b1(),this._globeViewProjMatrix32f=o.b0(),this._globeViewProjMatrixNoCorrection=o.b1(),this._globeViewProjMatrixNoCorrectionInverted=o.b1(),this._globeProjMatrixInverted=o.b1(),this._cameraPosition=o.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new or({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._coveringTilesDetailsProvider=new Cd}clone(){const r=new au;return r.apply(this),r}apply(r,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=o.bh();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:c,applyGlobeMatrix:p}=r,y=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:y,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const c=this.pitchInRadians,p=this.cameraToCenterDistance/r,y=Math.sin(c)*p,A=Math.cos(c)*p+1,T=1/Math.sqrt(y*y+A*A)*1;let L=-y,B=A;const G=Math.sqrt(L*L+B*B);L/=G,B/=G;const Y=[0,L,B];o.bl(Y,Y,[0,0,0],-this.bearingInRadians),o.bm(Y,Y,[0,0,0],-1*this.center.lat*Math.PI/180),o.bn(Y,Y,[0,0,0],this.center.lng*Math.PI/180);const nt=1/o.bo(Y);return o.aO(Y,Y,nt),[...Y,-T*nt]}isLocationOccluded(r){return!this.isSurfacePointVisible(no(r))}transformLightDirection(r){const c=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,y=Math.cos(p),A=[Math.sin(c)*y,Math.sin(p),Math.cos(c)*y],T=[A[2],0,-A[0]],L=[0,0,0];o.aU(L,T,A),o.aT(T,T),o.aT(L,L);const B=[0,0,0];return o.aT(B,[T[0]*r[0]+L[0]*r[1]+A[0]*r[2],T[1]*r[0]+L[1]*r[1]+A[1]*r[2],T[2]*r[0]+L[2]*r[1]+A[2]*r[2]]),B}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,c,p){const y=function(L,B,G){const Y=1/(1<<G.z);return new o.$(L/o.Z*Y+G.x*Y,B/o.Z*Y+G.y*Y)}(r,c,p.canonical),A=(T=y.y,[o.bg(y.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI]);var T;return this.getCircleRadiusCorrection()/Math.cos(A[1])}projectTileCoordinates(r,c,p,y){const A=p.canonical,T=Fl(r,c,A.x,A.y,A.z),L=1+(y?y(r,c):0)/o.bu,B=[T[0]*L,T[1]*L,T[2]*L,1];o.at(B,B,this._globeViewProjMatrixNoCorrection);const G=this._cachedClippingPlane,Y=G[0]*T[0]+G[1]*T[1]+G[2]*T[2]+G[3]<0;return{point:new o.P(B[0]/B[3],B[1]/B[3]),signedDistanceFromCamera:B[3],isOccluded:Y}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=ro(this.worldSize,this.center.lat),c=o.b2(),p=o.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),o.aY(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const y=this.centerOffset;c[8]=2*-y.x/this._helper._width,c[9]=2*y.y/this._helper._height,this._projectionMatrix=o.aZ(c),this._globeProjMatrixInverted=o.b2(),o.an(this._globeProjMatrixInverted,c),o.L(c,c,[0,0,-this.cameraToCenterDistance]),o.a_(c,c,this.rollInRadians),o.a$(c,c,-this.pitchInRadians),o.a_(c,c,this.bearingInRadians),o.L(c,c,[0,0,-r]);const A=o.bh();A[0]=r,A[1]=r,A[2]=r,o.a$(p,c,this.center.lat*Math.PI/180),o.bp(p,p,-this.center.lng*Math.PI/180),o.M(p,p,A),this._globeViewProjMatrixNoCorrection=p,o.a$(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bp(c,c,-this.center.lng*Math.PI/180),o.M(c,c,A),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.b2(),o.an(this._globeViewProjMatrixNoCorrectionInverted,p);const T=o.bh();this._cameraPosition=o.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/r,o.bl(this._cameraPosition,this._cameraPosition,T,-this.rollInRadians),o.bm(this._cameraPosition,this._cameraPosition,T,this.pitchInRadians),o.bl(this._cameraPosition,this._cameraPosition,T,-this.bearingInRadians),o.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bm(this._cameraPosition,this._cameraPosition,T,-this.center.lat*Math.PI/180),o.bn(this._cameraPosition,this._cameraPosition,T,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const L=o.aZ(this._globeViewProjMatrixNoCorrectionInverted);o.M(L,L,[1,1,-1]),this._cachedFrustum=kn.fromInvProjectionMatrix(L)}calculateFogMatrix(r){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.b2();return o.ad(c),c}getVisibleUnwrappedCoordinates(r){return[new o.aW(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=no(r);o.aO(p,p,1+c/o.bu);const y=o.bk();return o.at(y,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),y[2]/y[3]}populateCache(r){}getBounds(){const r=.5*this.width,c=.5*this.height,p=[new o.P(0,0),new o.P(r,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(r,this.height),new o.P(0,this.height),new o.P(0,c)],y=[];for(const nt of p)y.push(this.unprojectScreenPoint(nt));let A=0,T=0,L=0,B=0;const G=this.center;for(const nt of y){const rt=o.bq(G.lng,nt.lng),ft=o.bq(G.lat,nt.lat);rt<T&&(T=rt),rt>A&&(A=rt),ft<B&&(B=ft),ft>L&&(L=ft)}const Y=[G.lng+T,G.lat+B,G.lng+A,G.lat+L];return this.isSurfacePointOnScreen([0,1,0])&&(Y[3]=90,Y[0]=-180,Y[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(Y[1]=-90,Y[0]=-180,Y[2]=180),new H(Y)}getConstrained(r,c){const p=o.ae(r.lat,-85.051129,o.af),y=o.ae(+c,this.minZoom+Br(0,p),this.maxZoom);return{center:new o.Q(r.lng,p),zoom:y}}calculateCenterFromCameraLngLatAlt(r,c,p,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,p,y)}setLocationAtPoint(r,c){const p=no(this.unprojectScreenPoint(c)),y=no(r),A=o.bh();o.br(A);const T=o.bh();o.bn(T,p,A,-this.center.lng*Math.PI/180),o.bm(T,T,A,this.center.lat*Math.PI/180);const L=y[0]*y[0]+y[2]*y[2],B=T[0]*T[0];if(L<B)return;const G=Math.sqrt(L-B),Y=-G,nt=o.bs(y[0],y[2],T[0],G),rt=o.bs(y[0],y[2],T[0],Y),ft=o.bh();o.bn(ft,y,A,-nt);const _t=o.bs(ft[1],ft[2],T[1],T[2]),Ot=o.bh();o.bn(Ot,y,A,-rt);const Dt=o.bs(Ot[1],Ot[2],T[1],T[2]),Ft=.5*Math.PI,Zt=_t>=-Ft&&_t<=Ft,Qt=Dt>=-Ft&&Dt<=Ft;let ne,se;if(Zt&&Qt){const De=this.center.lng*Math.PI/180,Ee=this.center.lat*Math.PI/180;o.bv(nt,De)+o.bv(_t,Ee)<o.bv(rt,De)+o.bv(Dt,Ee)?(ne=nt,se=_t):(ne=rt,se=Dt)}else if(Zt)ne=nt,se=_t;else{if(!Qt)return;ne=rt,se=Dt}const fe=ne/Math.PI*180,le=se/Math.PI*180,ke=this.center.lat;this.setCenter(new o.Q(fe,o.ae(le,-90,90))),this.setZoom(this.zoom+Br(ke,this.center.lat))}locationToScreenPoint(r,c){const p=no(r);if(c){const y=c.getElevationForLngLatZoom(r,this._helper._tileZoom);o.aO(p,p,1+y/o.bu)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(r){const c=o.bk();return o.at(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,c){if(c){const p=c.pointCoordinate(r);if(p)return p}return o.$.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,c){var p;return(p=this.screenPointToMercatorCoordinate(r,c))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(r,c){const p=this._cameraPosition,y=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(p,y)}getRayDirectionFromPixel(r){const c=o.bk();c[0]=r.x/this.width*2-1,c[1]=-1*(r.y/this.height*2-1),c[2]=1,c[3]=1,o.at(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const p=o.bh();p[0]=c[0]-this._cameraPosition[0],p[1]=c[1]-this._cameraPosition[1],p[2]=c[2]-this._cameraPosition[2];const y=o.bh();return o.aT(y,p),y}isSurfacePointVisible(r){const c=this._cachedClippingPlane;return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]+c[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const c=o.bk();return o.at(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(r,c){const p=o.aV(r,c),y=o.bh(),A=o.bh();o.aO(A,c,p),o.aS(y,r,A);const T=1-o.aV(y,y);if(T<0)return null;const L=o.aV(r,r)-1,B=-p+(p<0?1:-1)*Math.sqrt(T),G=L/B,Y=B;return{tMin:Math.min(G,Y),tMax:Math.max(G,Y)}}unprojectScreenPoint(r){const c=this._cameraPosition,p=this.getRayDirectionFromPixel(r),y=this.rayPlanetIntersection(c,p);if(y){const Y=o.bh();o.aP(Y,c,[p[0]*y.tMin,p[1]*y.tMin,p[2]*y.tMin]);const nt=o.bh();return o.aT(nt,Y),go(nt)}const A=this._cachedClippingPlane,T=A[0]*p[0]+A[1]*p[1]+A[2]*p[2],L=-o.bt(A,c)/T,B=o.bh();if(L>0)o.aP(B,c,[p[0]*L,p[1]*L,p[2]*L]);else{const Y=o.bh();o.aP(Y,c,[2*p[0],2*p[1],2*p[2]]);const nt=o.bt(this._cachedClippingPlane,Y);o.aS(B,Y,[this._cachedClippingPlane[0]*nt,this._cachedClippingPlane[1]*nt,this._cachedClippingPlane[2]*nt])}const G=function(Y){const nt=o.bh();return nt[0]=Y[0]*-Y[3],nt[1]=Y[1]*-Y[3],nt[2]=Y[2]*-Y[3],{center:nt,radius:Math.sqrt(1-Y[3]*Y[3])}}(A);return go(function(Y,nt,rt){const ft=o.bh();o.aS(ft,rt,Y);const _t=o.bh();return o.bi(_t,Y,ft,nt/o.bj(ft)),_t}(G.center,G.radius,B))}getMatrixForModel(r,c){const p=o.Q.convert(r),y=1/o.bu,A=o.b1();return o.bp(A,A,p.lng/180*Math.PI),o.a$(A,A,-p.lat/180*Math.PI),o.L(A,A,[0,0,1+c/o.bu]),o.a$(A,A,.5*Math.PI),o.M(A,A,[y,y,y]),A}getProjectionDataForCustomLayer(r=!0){const c=this.getProjectionData({overscaledTileID:new o.Y(0,0,0,0,0),applyGlobeMatrix:r});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(r){}}class yo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,p){return this._helper.interpolatePadding(r,c,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,p=!0){this._helper.resize(r,c,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,c){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new or({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._globeness=1,this._mercatorTransform=new Rr,this._verticalPerspectiveTransform=new au}clone(){const r=new yo;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const c=this._mercatorTransform.getProjectionData(r),p=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:c.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return o.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,c,p){const y=this._mercatorTransform.getPitchedTextCorrection(r,c,p),A=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,c,p);return o.bc(y,A,this._globeness)}projectTileCoordinates(r,c,p,y){return this.currentTransform.projectTileCoordinates(r,c,p,y)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){return this.currentTransform.lngLatToCameraDepth(r,c)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,c){return this.currentTransform.getConstrained(r,c)}calculateCenterFromCameraLngLatAlt(r,c,p,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,p,y)}setLocationAtPoint(r,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,c){return this.currentTransform.locationToScreenPoint(r,c)}screenPointToMercatorCoordinate(r,c){return this.currentTransform.screenPointToMercatorCoordinate(r,c)}screenPointToLocation(r,c){return this.currentTransform.screenPointToLocation(r,c)}isPointOnMapSurface(r,c){return this.currentTransform.isPointOnMapSurface(r,c)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,c){return this.currentTransform.getMatrixForModel(r,c)}getProjectionDataForCustomLayer(r=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return c;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return p.fallbackMatrix=c.mainMatrix,p}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class Uo{get useGlobeControls(){return!0}handlePanInertia(r,c){const p=Bl(r,c);return Math.abs(p.lng-c.center.lng)>180&&(p.lng=c.center.lng+179.5*Math.sign(p.lng-c.center.lng)),{easingCenter:p,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,c){const p=r.around,y=c.screenPointToLocation(p);r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta);const A=c.zoom;r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta);const T=c.zoom-A;if(T===0)return;const L=o.bq(c.center.lng,y.lng),B=L/(Math.abs(L/180)+1),G=o.bq(c.center.lat,y.lat),Y=c.getRayDirectionFromPixel(p),nt=c.cameraPosition,rt=-1*o.aV(nt,Y),ft=o.bh();o.aP(ft,nt,[Y[0]*rt,Y[1]*rt,Y[2]*rt]);const _t=o.bo(ft)-1,Ot=Math.exp(.5*-Math.max(_t-.3,0)),Dt=ro(c.worldSize,c.center.lat)/Math.min(c.width,c.height),Ft=o.bf(Dt,.9,.5,1,.25),Zt=(1-o.ac(-T))*Math.min(Ot,Ft),Qt=c.center.lat,ne=c.zoom,se=new o.Q(c.center.lng+B*Zt,o.ae(c.center.lat+G*Zt,-85.051129,o.af));c.setLocationAtPoint(y,p);const fe=c.center,le=o.bf(Math.abs(L),45,85,0,1),ke=o.bf(Dt,.75,.35,0,1),De=Math.pow(Math.max(le,ke),.25),Ee=o.bq(fe.lng,se.lng),Qe=o.bq(fe.lat,se.lat);c.setCenter(new o.Q(fe.lng+Ee*De,fe.lat+Qe*De).wrap()),c.setZoom(ne+Br(Qt,c.center.lat))}handleMapControlsPan(r,c,p){if(!r.panDelta)return;const y=c.center.lat,A=c.zoom;c.setCenter(Bl(r.panDelta,c).wrap()),c.setZoom(A+Br(y,c.center.lat))}cameraForBoxAndBearing(r,c,p,y,A){const T=Jo(r,c,p,y,A),L=c.left/A.width*2-1,B=(A.width-c.right)/A.width*2-1,G=c.top/A.height*-2+1,Y=(A.height-c.bottom)/A.height*-2+1,nt=o.bq(p.getWest(),p.getEast())<0,rt=nt?p.getEast():p.getWest(),ft=nt?p.getWest():p.getEast(),_t=Math.max(p.getNorth(),p.getSouth()),Ot=Math.min(p.getNorth(),p.getSouth()),Dt=rt+.5*o.bq(rt,ft),Ft=_t+.5*o.bq(_t,Ot),Zt=A.clone();Zt.setCenter(T.center),Zt.setBearing(T.bearing),Zt.setPitch(0),Zt.setRoll(0),Zt.setZoom(T.zoom);const Qt=Zt.modelViewProjectionMatrix,ne=[no(p.getNorthWest()),no(p.getNorthEast()),no(p.getSouthWest()),no(p.getSouthEast()),no(new o.Q(ft,Ft)),no(new o.Q(rt,Ft)),no(new o.Q(Dt,_t)),no(new o.Q(Dt,Ot))],se=no(T.center);let fe=Number.POSITIVE_INFINITY;for(const le of ne)L<0&&(fe=Uo.getLesserNonNegativeNonNull(fe,Uo.solveVectorScale(le,se,Qt,"x",L))),B>0&&(fe=Uo.getLesserNonNegativeNonNull(fe,Uo.solveVectorScale(le,se,Qt,"x",B))),G>0&&(fe=Uo.getLesserNonNegativeNonNull(fe,Uo.solveVectorScale(le,se,Qt,"y",G))),Y<0&&(fe=Uo.getLesserNonNegativeNonNull(fe,Uo.solveVectorScale(le,se,Qt,"y",Y)));if(Number.isFinite(fe)&&fe!==0)return T.zoom=Zt.zoom+o.ah(fe),T;bi()}handleJumpToCenterZoom(r,c){const p=r.center.lat,y=r.getConstrained(c.center?o.Q.convert(c.center):r.center,r.zoom).center;r.setCenter(y.wrap());const A=c.zoom!==void 0?+c.zoom:r.zoom+Br(p,y.lat);r.zoom!==A&&r.setZoom(A)}handleEaseTo(r,c){const p=r.zoom,y=r.center,A=r.padding,T={roll:r.roll,pitch:r.pitch,bearing:r.bearing},L={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},B=c.zoom!==void 0,G=!r.isPaddingEqual(c.padding);let Y=!1;const nt=c.center?o.Q.convert(c.center):y,rt=r.getConstrained(nt,p).center;Kn(r,rt);const ft=r.clone();ft.setCenter(rt),ft.setZoom(B?+c.zoom:p+Br(y.lat,nt.lat)),ft.setBearing(c.bearing);const _t=new o.P(o.ae(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),o.ae(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));ft.setLocationAtPoint(rt,_t);const Ot=(c.offset&&c.offsetAsPoint.mag())>0?ft.center:rt,Dt=B?+c.zoom:p+Br(y.lat,Ot.lat),Ft=p+Br(y.lat,0),Zt=Dt+Br(Ot.lat,0),Qt=o.bq(y.lng,Ot.lng),ne=o.bq(y.lat,Ot.lat),se=o.ac(Zt-Ft);return Y=Dt!==p,{easeFunc:fe=>{if(o.b6(T,L)||gi({startEulerAngles:T,endEulerAngles:L,tr:r,k:fe,useSlerp:T.roll!=L.roll}),G&&r.interpolatePadding(A,c.padding,fe),c.around)o.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(c.around,c.aroundPoint);else{const le=Zt>Ft?Math.min(2,se):Math.max(.5,se),ke=Math.pow(le,1-fe),De=Ku(y,Qt,ne,fe*ke);r.setCenter(De.wrap())}if(Y){const le=o.B.number(Ft,Zt,fe)+Br(0,r.center.lat);r.setZoom(le)}},isZooming:Y,elevationCenter:Ot}}handleFlyTo(r,c){const p=c.zoom!==void 0,y=r.center,A=r.zoom,T=r.padding,L=!r.isPaddingEqual(c.padding),B=r.getConstrained(o.Q.convert(c.center||c.locationAtOffset),A).center,G=p?+c.zoom:r.zoom+Br(r.center.lat,B.lat),Y=r.clone();Y.setCenter(B),Y.setZoom(G),Y.setBearing(c.bearing);const nt=new o.P(o.ae(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),o.ae(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));Y.setLocationAtPoint(B,nt);const rt=Y.center;Kn(r,rt);const ft=function(ne,se,fe){const le=no(se),ke=no(fe),De=o.aV(le,ke),Ee=Math.acos(De),Qe=Ha(ne);return Ee/(2*Math.PI)*Qe}(r,y,rt),_t=A+Br(y.lat,0),Ot=G+Br(rt.lat,0),Dt=o.ac(Ot-_t);let Ft;if(typeof c.minZoom=="number"){const ne=+c.minZoom+Br(rt.lat,0),se=Math.min(ne,_t,Ot)+Br(0,rt.lat),fe=r.getConstrained(rt,se).zoom+Br(rt.lat,0);Ft=o.ac(fe-_t)}const Zt=o.bq(y.lng,rt.lng),Qt=o.bq(y.lat,rt.lat);return{easeFunc:(ne,se,fe,le)=>{const ke=Ku(y,Zt,Qt,fe);L&&r.interpolatePadding(T,c.padding,ne);const De=ne===1?rt:ke;r.setCenter(De.wrap());const Ee=_t+o.ah(se);r.setZoom(ne===1?G:Ee+Br(0,De.lat))},scaleOfZoom:Dt,targetCenter:rt,scaleOfMinZoom:Ft,pixelPathLength:ft}}static solveVectorScale(r,c,p,y,A){const T=y==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],L=[p[3],p[7],p[11],p[15]],B=r[0]*T[0]+r[1]*T[1]+r[2]*T[2],G=r[0]*L[0]+r[1]*L[1]+r[2]*L[2],Y=c[0]*T[0]+c[1]*T[1]+c[2]*T[2],nt=c[0]*L[0]+c[1]*L[1]+c[2]*L[2];return Y+A*G===B+A*nt||L[3]*(B-Y)+T[3]*(nt-G)+B*nt==Y*G?null:(Y+T[3]-A*nt-A*L[3])/(Y-B-A*nt+A*G)}static getLesserNonNegativeNonNull(r,c){return c!==null&&c>=0&&c<r?c:r}}class jl{constructor(r){this._globe=r,this._mercatorCameraHelper=new nu,this._verticalPerspectiveCameraHelper=new Uo}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,c){return this.currentHelper.handlePanInertia(r,c)}handleMapControlsRollPitchBearingZoom(r,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,c)}handleMapControlsPan(r,c,p){this.currentHelper.handleMapControlsPan(r,c,p)}cameraForBoxAndBearing(r,c,p,y,A){return this.currentHelper.cameraForBoxAndBearing(r,c,p,y,A)}handleJumpToCenterZoom(r,c){this.currentHelper.handleJumpToCenterZoom(r,c)}handleEaseTo(r,c){return this.currentHelper.handleEaseTo(r,c)}handleFlyTo(r,c){return this.currentHelper.handleFlyTo(r,c)}}const ii=(b,r)=>o.x(b,r&&r.filter(c=>c.identifier!=="source.canvas")),ua=o.bw();class Ga extends o.E{constructor(r,c={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const y=this.sourceCaches[p].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[p].reload()}},this.map=r,this.dispatcher=new be(nn(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,y)=>this.getGlyphs(p,y)),this.dispatcher.registerMessageHandler("GI",(p,y)=>this.getImages(p,y)),this.imageManager=new ut,this.imageManager.setEventedParent(this),this.glyphManager=new X(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new en(256,512),this.crossTileSymbolIndex=new xt,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.by()),wn().on(Le,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const y=this.sourceCaches[p.sourceId];if(!y)return;const A=y.getSource();if(A&&A.vectorLayerIds)for(const T in this._layers){const L=this._layers[T];L.source===A.id&&this._validateLayer(L)}})}loadURL(r,c={},p){this.fire(new o.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const y=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const A=this._loadStyleRequest;o.j(y,this._loadStyleRequest).then(T=>{this._loadStyleRequest=null,this._load(T.data,c,p)}).catch(T=>{this._loadStyleRequest=null,T&&!A.signal.aborted&&this.fire(new o.k(T))})}loadJSON(r,c={},p){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,E.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,p)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(ua,{validate:!1})}_load(r,c,p){var y,A;const T=c.transformStyle?c.transformStyle(p,r):r;if(!c.validate||!ii(this,o.y(T))){this._loaded=!0,this.stylesheet=T;for(const L in T.sources)this.addSource(L,T.sources[L],{validate:!1});T.sprite?this._loadSprite(T.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(T.glyphs),this._createLayers(),this.light=new Bt(this.stylesheet.light),this._setProjectionInternal(((y=this.stylesheet.projection)===null||y===void 0?void 0:y.type)||"mercator"),this.sky=new ye(this.stylesheet.sky),this.map.setTerrain((A=this.stylesheet.terrain)!==null&&A!==void 0?A:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){const r=o.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of r){const p=o.bA(c);p.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=p}}_loadSprite(r,c=!1,p=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(A,T,L,B){return o._(this,void 0,void 0,function*(){const G=tt(A),Y=L>1?"@2x":"",nt={},rt={};for(const{id:ft,url:_t}of G){const Ot=T.transformRequest(it(_t,Y,".json"),"SpriteJSON");nt[ft]=o.j(Ot,B);const Dt=T.transformRequest(it(_t,Y,".png"),"SpriteImage");rt[ft]=$.getImage(Dt,B)}return yield Promise.all([...Object.values(nt),...Object.values(rt)]),function(ft,_t){return o._(this,void 0,void 0,function*(){const Ot={};for(const Dt in ft){Ot[Dt]={};const Ft=E.getImageCanvasContext((yield _t[Dt]).data),Zt=(yield ft[Dt]).data;for(const Qt in Zt){const{width:ne,height:se,x:fe,y:le,sdf:ke,pixelRatio:De,stretchX:Ee,stretchY:Qe,content:Ge,textFitWidth:In,textFitHeight:yn}=Zt[Qt];Ot[Dt][Qt]={data:null,pixelRatio:De,sdf:ke,stretchX:Ee,stretchY:Qe,content:Ge,textFitWidth:In,textFitHeight:yn,spriteData:{width:ne,height:se,x:fe,y:le,context:Ft}}}}return Ot})}(nt,rt)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(A=>{if(this._spriteRequest=null,A)for(const T in A){this._spritesImagesIds[T]=[];const L=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(B=>!(B in A)):[];for(const B of L)this.imageManager.removeImage(B),this._changedImages[B]=!0;for(const B in A[T]){const G=T==="default"?B:`${T}:${B}`;this._spritesImagesIds[T].push(G),G in this.imageManager.images?this.imageManager.updateImage(G,A[T][B],!1):this.imageManager.addImage(G,A[T][B]),c&&(this._changedImages[G]=!0)}}}).catch(A=>{this._spriteRequest=null,y=A,this.fire(new o.k(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),p&&p(y)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const p=r.sourceLayer;if(!p)return;const y=c.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(p)===-1)&&this.fire(new o.k(new Error(`Source layer "${p}" does not exist on source "${y.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){const p=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?o.bB(p):p);const y=[];for(const A of r)if(p[A]){const T=c?o.bB(p[A]):p[A];y.push(T)}return y}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const y=this._layers[p];y.type!=="custom"&&(r[p]=y.serialize())}return r}hasTransitions(){var r,c,p;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const y in this.sourceCaches)if(this.sourceCaches[y].hasTransition())return!0;for(const y in this._layers)if(this._layers[y].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const y=Object.keys(this._updatedLayers),A=Object.keys(this._removedLayers);(y.length||A.length)&&this._updateWorkerLayers(y,A);for(const T in this._updatedSources){const L=this._updatedSources[T];if(L==="reload")this._reloadSource(T);else{if(L!=="clear")throw new Error(`Invalid action ${L}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const p={};for(const y in this.sourceCaches){const A=this.sourceCaches[y];p[y]=A.used,A.used=!1}for(const y of this._order){const A=this._layers[y];A.recalculate(r,this._availableImages),!A.isHidden(r.zoom)&&A.source&&(this.sourceCaches[A.source].used=!0)}for(const y in p){const A=this.sourceCaches[y];!!p[y]!=!!A.used&&A.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,c&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var p;this._checkLoaded();const y=this.serialize();if(r=c.transformStyle?c.transformStyle(y,r):r,((p=c.validate)===null||p===void 0||p)&&ii(this,o.y(r)))return!1;(r=o.bB(r)).layers=o.bz(r.layers);const A=o.bC(y,r),T=this._getOperationsToPerform(A);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const L of T.operations)L();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],p=[];for(const y of r)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":c.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":c.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,y.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setSky":c.push(()=>this.setSky.apply(this,y.args));break;case"setProjection":this.setProjection.apply(this,y.args);break;case"setTransition":c.push(()=>{});break;default:p.push(y.command)}return{operations:c,unimplemented:p}}addImage(r,c){if(this.getImage(r))return this.fire(new o.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new o.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,p={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.y.source,`sources.${r}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=this.sourceCaches[r]=new Fe(r,c,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:r})),y.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===r)return this.fire(new o.k(new Error(`Source "${r}" cannot be removed while layer "${p}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const p=this.sourceCaches[r].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,p={}){this._checkLoaded();const y=r.id;if(this.getLayer(y))return void this.fire(new o.k(new Error(`Layer "${y}" already exists on this map.`)));let A;if(r.type==="custom"){if(ii(this,o.bD(r)))return;A=o.bA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(y,r.source),r=o.bB(r),r=o.e(r,{source:y})),this._validate(o.y.layer,`layers.${y}`,r,{arrayIndex:-1},p))return;A=o.bA(r),this._validateLayer(A),A.setEventedParent(this,{layer:{id:y}})}const T=c?this._order.indexOf(c):this._order.length;if(c&&T===-1)this.fire(new o.k(new Error(`Cannot add layer "${y}" before non-existing layer "${c}".`)));else{if(this._order.splice(T,0,y),this._layerOrderChanged=!0,this._layers[y]=A,this._removedLayers[y]&&A.source&&A.type!=="custom"){const L=this._removedLayers[y];delete this._removedLayers[y],L.type!==A.type?this._updatedSources[A.source]="clear":(this._updatedSources[A.source]="reload",this.sourceCaches[A.source].pause())}this._updateLayer(A),A.onAdd&&A.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new o.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const p=this._order.indexOf(r);this._order.splice(p,1);const y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new o.k(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(y,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const p=this._order.indexOf(r);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,p){this._checkLoaded();const y=this.getLayer(r);y?y.minzoom===c&&y.maxzoom===p||(c!=null&&(y.minzoom=c),p!=null&&(y.maxzoom=p),this._updateLayer(y)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,p={}){this._checkLoaded();const y=this.getLayer(r);if(y){if(!o.bE(y.filter,c))return c==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(o.y.filter,`layers.${y.id}.filter`,c,null,p)||(y.filter=o.bB(c),this._updateLayer(y)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return o.bB(this.getLayer(r).filter)}setLayoutProperty(r,c,p,y={}){this._checkLoaded();const A=this.getLayer(r);A?o.bE(A.getLayoutProperty(c),p)||(A.setLayoutProperty(c,p,y),this._updateLayer(A)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const p=this.getLayer(r);if(p)return p.getLayoutProperty(c);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,p,y={}){this._checkLoaded();const A=this.getLayer(r);A?o.bE(A.getPaintProperty(c),p)||(A.setPaintProperty(c,p,y)&&this._updateLayer(A),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new o.k(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const p=r.source,y=r.sourceLayer,A=this.sourceCaches[p];if(A===void 0)return void this.fire(new o.k(new Error(`The source '${p}' does not exist in the map's style.`)));const T=A.getSource().type;T==="geojson"&&y?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||y?(r.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),A.setFeatureState(y,r.id,c)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const p=r.source,y=this.sourceCaches[p];if(y===void 0)return void this.fire(new o.k(new Error(`The source '${p}' does not exist in the map's style.`)));const A=y.getSource().type,T=A==="vector"?r.sourceLayer:void 0;A!=="vector"||T?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(T,r.id,c):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,p=r.sourceLayer,y=this.sourceCaches[c];if(y!==void 0)return y.getSource().type!=="vector"||p?(r.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),y.getFeatureState(p,r.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=o.bF(this.sourceCaches,A=>A.serialize()),c=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,y=this.stylesheet;return o.bG({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,projection:y.projection,sources:r,layers:c,terrain:p},A=>A!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=T=>this._layers[T].type==="fill-extrusion",p={},y=[];for(let T=this._order.length-1;T>=0;T--){const L=this._order[T];if(c(L)){p[L]=T;for(const B of r){const G=B[L];if(G)for(const Y of G)y.push(Y)}}}y.sort((T,L)=>L.intersectionZ-T.intersectionZ);const A=[];for(let T=this._order.length-1;T>=0;T--){const L=this._order[T];if(c(L))for(let B=y.length-1;B>=0;B--){const G=y[B].feature;if(p[G.layer.id]<T)break;A.push(G),y.pop()}else for(const B of r){const G=B[L];if(G)for(const Y of G)A.push(Y.feature)}}return A}queryRenderedFeatures(r,c,p){c&&c.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const G of c.layers){const Y=this._layers[G];if(!Y)return this.fire(new o.k(new Error(`The layer '${G}' does not exist in the map's style and cannot be queried for features.`))),[];y[Y.source]=!0}}const A=[];c.availableImages=this._availableImages;const T=this._serializedAllLayers(),L=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,B=Object.assign(Object.assign({},c),{layers:L});for(const G in this.sourceCaches)c.layers&&!y[G]||A.push(Be(this.sourceCaches[G],this._layers,T,r,B,p,this.map.terrain?(Y,nt,rt)=>this.map.terrain.getElevation(Y,nt,rt):void 0));return this.placement&&A.push(function(G,Y,nt,rt,ft,_t,Ot){const Dt={},Ft=_t.queryRenderedSymbols(rt),Zt=[];for(const Qt of Object.keys(Ft).map(Number))Zt.push(Ot[Qt]);Zt.sort(Je);for(const Qt of Zt){const ne=Qt.featureIndex.lookupSymbolFeatures(Ft[Qt.bucketInstanceId],Y,Qt.bucketIndex,Qt.sourceLayerIndex,ft.filter,ft.layers,ft.availableImages,G);for(const se in ne){const fe=Dt[se]=Dt[se]||[],le=ne[se];le.sort((ke,De)=>{const Ee=Qt.featureSortOrder;if(Ee){const Qe=Ee.indexOf(ke.featureIndex);return Ee.indexOf(De.featureIndex)-Qe}return De.featureIndex-ke.featureIndex});for(const ke of le)fe.push(ke)}}return function(Qt,ne,se){for(const fe in Qt)for(const le of Qt[fe])Ln(le,se[ne[fe].source]);return Qt}(Dt,G,nt)}(this._layers,T,this.sourceCaches,r,B,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(A)}querySourceFeatures(r,c){c&&c.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.sourceCaches[r];return p?function(y,A){const T=y.getRenderableIds().map(G=>y.getTileByID(G)),L=[],B={};for(let G=0;G<T.length;G++){const Y=T[G],nt=Y.tileID.canonical.key;B[nt]||(B[nt]=!0,Y.querySourceFeatures(L,A))}return L}(p,c):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const p=this.light.getLight();let y=!1;for(const T in r)if(!o.bE(r[T],p[T])){y=!0;break}if(!y)return;const A={now:E.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(A)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){this._checkLoaded();const p=this.getSky();let y=!1;if(!r&&!p)return;if(r&&!p)y=!0;else if(!r&&p)y=!0;else for(const T in r)if(!o.bE(r[T],p[T])){y=!0;break}if(!y)return;const A={now:E.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(A)}_setProjectionInternal(r){const c=function(p){if(Array.isArray(p)){const y=new ou({type:p});return{projection:y,transform:new yo,cameraHelper:new jl(y)}}switch(p){case"mercator":return{projection:new mn,transform:new Rr,cameraHelper:new nu};case"globe":{const y=new ou({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:y,transform:new yo,cameraHelper:new jl(y)}}case"vertical-perspective":return{projection:new iu,transform:new au,cameraHelper:new Uo};default:return o.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new mn,transform:new Rr,cameraHelper:new nu}}}(r);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const p in this.sourceCaches)this.sourceCaches[p].reload()}_validate(r,c,p,y,A={}){return(!A||A.validate!==!1)&&ii(this,r.call(o.y,o.e({key:c,style:this.serialize(),value:p,styleSpec:o.v},y)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),wn().off(Le,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const p=this.sourceCaches[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,p,y,A=!1){let T=!1,L=!1;const B={};for(const G of this._order){const Y=this._layers[G];if(Y.type!=="symbol")continue;if(!B[Y.source]){const rt=this.sourceCaches[Y.source];B[Y.source]=rt.getRenderableIds(!0).map(ft=>rt.getTileByID(ft)).sort((ft,_t)=>_t.tileID.overscaledZ-ft.tileID.overscaledZ||(ft.tileID.isLessThan(_t.tileID)?-1:1))}const nt=this.crossTileSymbolIndex.addLayer(Y,B[Y.source],r.center.lng);T=T||nt}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((A=A||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(E.now(),r.zoom))&&(this.pauseablePlacement=new eu(r,this.map.terrain,this._order,A,c,p,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(E.now()),L=!0),T&&this.pauseablePlacement.placement.setStale()),L||T)for(const G of this._order){const Y=this._layers[G];Y.type==="symbol"&&this.placement.updateLayerOpacities(Y,B[Y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(E.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c){return o._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const y=this.sourceCaches[c.source];return y&&y.setDependencies(c.tileID.key,c.type,c.icons),p})}getGlyphs(r,c){return o._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(c.stacks),y=this.sourceCaches[c.source];return y&&y.setDependencies(c.tileID.key,c.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(o.y.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,p={},y){this._checkLoaded();const A=[{id:r,url:c}],T=[...tt(this.stylesheet.sprite),...A];this._validate(o.y.sprite,"sprite",T,null,p)||(this.stylesheet.sprite=T,this._loadSprite(A,!0,y))}removeSprite(r){this._checkLoaded();const c=tt(this.stylesheet.sprite);if(c.find(p=>p.id===r)){if(this._spritesImagesIds[r])for(const p of this._spritesImagesIds[r])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex(p=>p.id===r),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return tt(this.stylesheet.sprite)}setSprite(r,c={},p){this._checkLoaded(),r&&this._validate(o.y.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,p):(this._unloadSprite(),p&&p(null)))}}var su=o.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ta{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,p,y,A,T,L,B,G){this.context=r;let Y=this.boundPaintVertexBuffers.length!==y.length;for(let nt=0;!Y&&nt<y.length;nt++)this.boundPaintVertexBuffers[nt]!==y[nt]&&(Y=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||Y||this.boundIndexBuffer!==A||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==L||this.boundDynamicVertexBuffer2!==B||this.boundDynamicVertexBuffer3!==G?this.freshBind(c,p,y,A,T,L,B,G):(r.bindVertexArray.set(this.vao),L&&L.bind(),A&&A.dynamicDraw&&A.bind(),B&&B.bind(),G&&G.bind())}freshBind(r,c,p,y,A,T,L,B){const G=r.numAttributes,Y=this.context,nt=Y.gl;this.vao&&this.destroy(),this.vao=Y.createVertexArray(),Y.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=y,this.boundVertexOffset=A,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=L,this.boundDynamicVertexBuffer3=B,c.enableAttributes(nt,r);for(const rt of p)rt.enableAttributes(nt,r);T&&T.enableAttributes(nt,r),L&&L.enableAttributes(nt,r),B&&B.enableAttributes(nt,r),c.bind(),c.setVertexAttribPointers(nt,r,A);for(const rt of p)rt.bind(),rt.setVertexAttribPointers(nt,r,A);T&&(T.bind(),T.setVertexAttribPointers(nt,r,A)),y&&y.bind(),L&&(L.bind(),L.setVertexAttribPointers(nt,r,A)),B&&(B.bind(),B.setVertexAttribPointers(nt,r,A)),Y.currentNumAttributes=G}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Ph=(b,r,c,p,y)=>({u_texture:0,u_ele_delta:b,u_fog_matrix:r,u_fog_color:c?c.properties.get("fog-color"):o.b7.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:y?0:c?c.calculateFogBlendOpacity(p):0,u_horizon_color:c?c.properties.get("horizon-color"):o.b7.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:y?1:0}),Vl={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function rl(b){const r=[];for(let c=0;c<b.length;c++){if(b[c]===null)continue;const p=b[c].split(" ");r.push(p.pop())}return r}class Mc{constructor(r,c,p,y,A,T,L,B){const G=r.gl;this.program=G.createProgram();const Y=rl(c.staticAttributes),nt=p?p.getBinderAttributes():[],rt=Y.concat(nt),ft=$t.prelude.staticUniforms?rl($t.prelude.staticUniforms):[],_t=L.staticUniforms?rl(L.staticUniforms):[],Ot=c.staticUniforms?rl(c.staticUniforms):[],Dt=p?p.getBinderUniforms():[],Ft=ft.concat(_t).concat(Ot).concat(Dt),Zt=[];for(const De of Ft)Zt.indexOf(De)<0&&Zt.push(De);const Qt=p?p.defines():[];ca(G)&&Qt.unshift("#version 300 es"),A&&Qt.push("#define OVERDRAW_INSPECTOR;"),T&&Qt.push("#define TERRAIN3D;"),B&&Qt.push(B);let ne=Qt.concat($t.prelude.fragmentSource,L.fragmentSource,c.fragmentSource).join(`
`),se=Qt.concat($t.prelude.vertexSource,L.vertexSource,c.vertexSource).join(`
`);ca(G)||(ne=function(De){return De.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(ne),se=function(De){return De.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(se));const fe=G.createShader(G.FRAGMENT_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);if(G.shaderSource(fe,ne),G.compileShader(fe),!G.getShaderParameter(fe,G.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${G.getShaderInfoLog(fe)}`);G.attachShader(this.program,fe);const le=G.createShader(G.VERTEX_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);if(G.shaderSource(le,se),G.compileShader(le),!G.getShaderParameter(le,G.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${G.getShaderInfoLog(le)}`);G.attachShader(this.program,le),this.attributes={};const ke={};this.numAttributes=rt.length;for(let De=0;De<this.numAttributes;De++)rt[De]&&(G.bindAttribLocation(this.program,De,rt[De]),this.attributes[rt[De]]=De);if(G.linkProgram(this.program),!G.getProgramParameter(this.program,G.LINK_STATUS))throw new Error(`Program failed to link: ${G.getProgramInfoLog(this.program)}`);G.deleteShader(le),G.deleteShader(fe);for(let De=0;De<Zt.length;De++){const Ee=Zt[De];if(Ee&&!ke[Ee]){const Qe=G.getUniformLocation(this.program,Ee);Qe&&(ke[Ee]=Qe)}}this.fixedUniforms=y(r,ke),this.terrainUniforms=((De,Ee)=>({u_depth:new o.bH(De,Ee.u_depth),u_terrain:new o.bH(De,Ee.u_terrain),u_terrain_dim:new o.b8(De,Ee.u_terrain_dim),u_terrain_matrix:new o.bJ(De,Ee.u_terrain_matrix),u_terrain_unpack:new o.bK(De,Ee.u_terrain_unpack),u_terrain_exaggeration:new o.b8(De,Ee.u_terrain_exaggeration)}))(r,ke),this.projectionUniforms=((De,Ee)=>({u_projection_matrix:new o.bJ(De,Ee.u_projection_matrix),u_projection_tile_mercator_coords:new o.bK(De,Ee.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bK(De,Ee.u_projection_clipping_plane),u_projection_transition:new o.b8(De,Ee.u_projection_transition),u_projection_fallback_matrix:new o.bJ(De,Ee.u_projection_fallback_matrix)}))(r,ke),this.binderUniforms=p?p.getUniforms(r,ke):[]}draw(r,c,p,y,A,T,L,B,G,Y,nt,rt,ft,_t,Ot,Dt,Ft,Zt,Qt){const ne=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(p),r.setStencilMode(y),r.setColorMode(A),r.setCullFace(T),B){r.activeTexture.set(ne.TEXTURE2),ne.bindTexture(ne.TEXTURE_2D,B.depthTexture),r.activeTexture.set(ne.TEXTURE3),ne.bindTexture(ne.TEXTURE_2D,B.texture);for(const fe in this.terrainUniforms)this.terrainUniforms[fe].set(B[fe])}if(G)for(const fe in G)this.projectionUniforms[Vl[fe]].set(G[fe]);if(L)for(const fe in this.fixedUniforms)this.fixedUniforms[fe].set(L[fe]);Dt&&Dt.setUniforms(r,this.binderUniforms,_t,{zoom:Ot});let se=0;switch(c){case ne.LINES:se=2;break;case ne.TRIANGLES:se=3;break;case ne.LINE_STRIP:se=1}for(const fe of ft.get()){const le=fe.vaos||(fe.vaos={});(le[Y]||(le[Y]=new ta)).bind(r,this,nt,Dt?Dt.getPaintVertexBuffers():[],rt,fe.vertexOffset,Ft,Zt,Qt),ne.drawElements(c,fe.primitiveLength*se,ne.UNSIGNED_SHORT,fe.primitiveOffset*se*2)}}}function lu(b,r,c){const p=1/o.az(c,1,r.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),A=c.tileSize*Math.pow(2,r.transform.tileZoom)/y,T=A*(c.tileID.canonical.x+c.tileID.wrap*y),L=A*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[T>>16,L>>16],u_pixel_coord_lower:[65535&T,65535&L]}}const hs=(b,r,c,p)=>{const y=b.style.light,A=y.properties.get("position"),T=[A.x,A.y,A.z],L=o.bN();y.properties.get("anchor")==="viewport"&&o.bO(L,b.transform.bearingInRadians),o.bP(T,T,L);const B=b.transform.transformLightDirection(T),G=y.properties.get("color");return{u_lightpos:T,u_lightpos_globe:B,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[G.r,G.g,G.b],u_vertical_gradient:+r,u_opacity:c,u_fill_translate:p}},Bf=(b,r,c,p,y,A,T)=>o.e(hs(b,r,c,p),lu(A,b,T),{u_height_factor:-Math.pow(2,y.overscaledZ)/T.tileSize/8}),ks=(b,r,c,p)=>o.e(lu(r,b,c),{u_fill_translate:p}),Yu=(b,r)=>({u_world:b,u_fill_translate:r}),ds=(b,r,c,p,y)=>o.e(ks(b,r,c,y),{u_world:p}),$a=(b,r,c,p,y)=>{const A=b.transform;let T,L,B=0;if(c.paint.get("circle-pitch-alignment")==="map"){const G=o.az(r,1,A.zoom);T=!0,L=[G,G],B=G/(o.Z*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*y}else T=!1,L=A.pixelsToGLUnits;return{u_camera_to_center_distance:A.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+T,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:L,u_globe_extrude_scale:B,u_translate:p}},Ls=b=>({u_pixel_extrude_scale:[1/b.width,1/b.height]}),Sc=b=>({u_viewport_size:[b.width,b.height]}),Sa=(b,r=1)=>({u_color:b,u_overlay:0,u_overlay_scale:r}),cu=(b,r,c,p)=>{const y=o.az(b,1,r)/(o.Z*Math.pow(2,b.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:o.az(b,1,r),u_intensity:c,u_globe_extrude_scale:y}},Ec=(b,r,c,p)=>{const y=o.K();o.bQ(y,0,b.width,b.height,0,0,1);const A=b.context.gl;return{u_matrix:y,u_world:[A.drawingBufferWidth,A.drawingBufferHeight],u_image:c,u_color_ramp:p,u_opacity:r.paint.get("heatmap-opacity")}},Ul=(b,r,c)=>{const p=c.paint.get("hillshade-shadow-color"),y=c.paint.get("hillshade-highlight-color"),A=c.paint.get("hillshade-accent-color");let T=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);return c.paint.get("hillshade-illumination-anchor")==="viewport"&&(T+=b.transform.bearingInRadians),{u_image:0,u_latrange:uu(0,r.tileID),u_light:[c.paint.get("hillshade-exaggeration"),T],u_shadow:p,u_highlight:y,u_accent:A}},Zi=(b,r)=>{const c=r.stride,p=o.K();return o.bQ(p,0,o.Z,-8192,0,0,1),o.L(p,p,[0,-8192,0]),{u_matrix:p,u_image:1,u_dimension:[c,c],u_zoom:b.overscaledZ,u_unpack:r.getUnpackVector()}};function uu(b,r){const c=Math.pow(2,r.canonical.z),p=r.canonical.y;return[new o.$(0,p/c).toLngLat().lat,new o.$(0,(p+1)/c).toLngLat().lat]}const il=(b,r,c,p)=>{const y=b.transform;return{u_translation:Hl(b,r,c),u_ratio:p/o.az(r,1,y.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Tc=(b,r,c,p,y)=>o.e(il(b,r,c,p),{u_image:0,u_image_height:y}),kh=(b,r,c,p,y)=>{const A=b.transform,T=du(r,A);return{u_translation:Hl(b,r,c),u_texsize:r.imageAtlasTexture.size,u_ratio:p/o.az(r,1,A.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[T,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]]}},hu=(b,r,c,p,y,A)=>{const T=b.lineAtlas,L=du(r,b.transform),B=c.layout.get("line-cap")==="round",G=T.getDash(y.from,B),Y=T.getDash(y.to,B),nt=G.width*A.fromScale,rt=Y.width*A.toScale;return o.e(il(b,r,c,p),{u_patternscale_a:[L/nt,-G.height/2],u_patternscale_b:[L/rt,-Y.height/2],u_sdfgamma:T.width/(256*Math.min(nt,rt)*b.pixelRatio)/2,u_image:0,u_tex_y_a:G.y,u_tex_y_b:Y.y,u_mix:A.t})};function du(b,r){return 1/o.az(b,1,r.tileZoom)}function Hl(b,r,c){return o.aA(b.transform,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Id=(b,r,c,p,y)=>{return{u_tl_parent:b,u_scale_parent:r,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(T=p.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(A=p.paint.get("raster-contrast"),A>0?1/(1-A):1+A),u_spin_weights:Rs(p.paint.get("raster-hue-rotate")),u_coords_top:[y[0].x,y[0].y,y[1].x,y[1].y],u_coords_bottom:[y[3].x,y[3].y,y[2].x,y[2].y]};var A,T};function Rs(b){b*=Math.PI/180;const r=Math.sin(b),c=Math.cos(b);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const ol=(b,r,c,p,y,A,T,L,B,G,Y,nt,rt)=>{const ft=T.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:ft.cameraToCenterDistance,u_pitch:ft.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:ft.width/ft.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_label_plane_matrix:L,u_coord_matrix:B,u_is_text:+Y,u_pitch_with_map:+p,u_is_along_line:y,u_is_variable_anchor:A,u_texsize:nt,u_texture:0,u_translation:G,u_pitched_scale:rt}},fs=(b,r,c,p,y,A,T,L,B,G,Y,nt,rt,ft)=>{const _t=T.transform;return o.e(ol(b,r,c,p,y,A,T,L,B,G,Y,nt,ft),{u_gamma_scale:p?Math.cos(_t.pitch*Math.PI/180)*_t.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:1})},Lh=(b,r,c,p,y,A,T,L,B,G,Y,nt,rt)=>o.e(fs(b,r,c,p,y,A,T,L,B,G,!0,Y,0,rt),{u_texsize_icon:nt,u_texture_icon:1}),Pc=(b,r)=>({u_opacity:b,u_color:r}),ha=(b,r,c,p,y)=>o.e(function(A,T,L,B){const G=L.imageManager.getPattern(A.from.toString()),Y=L.imageManager.getPattern(A.to.toString()),{width:nt,height:rt}=L.imageManager.getPixelSize(),ft=Math.pow(2,B.tileID.overscaledZ),_t=B.tileSize*Math.pow(2,L.transform.tileZoom)/ft,Ot=_t*(B.tileID.canonical.x+B.tileID.wrap*ft),Dt=_t*B.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:G.tl,u_pattern_br_a:G.br,u_pattern_tl_b:Y.tl,u_pattern_br_b:Y.br,u_texsize:[nt,rt],u_mix:T.t,u_pattern_size_a:G.displaySize,u_pattern_size_b:Y.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/o.az(B,1,L.transform.tileZoom),u_pixel_coord_upper:[Ot>>16,Dt>>16],u_pixel_coord_lower:[65535&Ot,65535&Dt]}}(c,y,r,p),{u_opacity:b}),da=(b,r)=>{},Gl={fillExtrusion:(b,r)=>({u_lightpos:new o.bL(b,r.u_lightpos),u_lightpos_globe:new o.bL(b,r.u_lightpos_globe),u_lightintensity:new o.b8(b,r.u_lightintensity),u_lightcolor:new o.bL(b,r.u_lightcolor),u_vertical_gradient:new o.b8(b,r.u_vertical_gradient),u_opacity:new o.b8(b,r.u_opacity),u_fill_translate:new o.bM(b,r.u_fill_translate)}),fillExtrusionPattern:(b,r)=>({u_lightpos:new o.bL(b,r.u_lightpos),u_lightpos_globe:new o.bL(b,r.u_lightpos_globe),u_lightintensity:new o.b8(b,r.u_lightintensity),u_lightcolor:new o.bL(b,r.u_lightcolor),u_vertical_gradient:new o.b8(b,r.u_vertical_gradient),u_height_factor:new o.b8(b,r.u_height_factor),u_opacity:new o.b8(b,r.u_opacity),u_fill_translate:new o.bM(b,r.u_fill_translate),u_image:new o.bH(b,r.u_image),u_texsize:new o.bM(b,r.u_texsize),u_pixel_coord_upper:new o.bM(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(b,r.u_pixel_coord_lower),u_scale:new o.bL(b,r.u_scale),u_fade:new o.b8(b,r.u_fade)}),fill:(b,r)=>({u_fill_translate:new o.bM(b,r.u_fill_translate)}),fillPattern:(b,r)=>({u_image:new o.bH(b,r.u_image),u_texsize:new o.bM(b,r.u_texsize),u_pixel_coord_upper:new o.bM(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(b,r.u_pixel_coord_lower),u_scale:new o.bL(b,r.u_scale),u_fade:new o.b8(b,r.u_fade),u_fill_translate:new o.bM(b,r.u_fill_translate)}),fillOutline:(b,r)=>({u_world:new o.bM(b,r.u_world),u_fill_translate:new o.bM(b,r.u_fill_translate)}),fillOutlinePattern:(b,r)=>({u_world:new o.bM(b,r.u_world),u_image:new o.bH(b,r.u_image),u_texsize:new o.bM(b,r.u_texsize),u_pixel_coord_upper:new o.bM(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(b,r.u_pixel_coord_lower),u_scale:new o.bL(b,r.u_scale),u_fade:new o.b8(b,r.u_fade),u_fill_translate:new o.bM(b,r.u_fill_translate)}),circle:(b,r)=>({u_camera_to_center_distance:new o.b8(b,r.u_camera_to_center_distance),u_scale_with_map:new o.bH(b,r.u_scale_with_map),u_pitch_with_map:new o.bH(b,r.u_pitch_with_map),u_extrude_scale:new o.bM(b,r.u_extrude_scale),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_globe_extrude_scale:new o.b8(b,r.u_globe_extrude_scale),u_translate:new o.bM(b,r.u_translate)}),collisionBox:(b,r)=>({u_pixel_extrude_scale:new o.bM(b,r.u_pixel_extrude_scale)}),collisionCircle:(b,r)=>({u_viewport_size:new o.bM(b,r.u_viewport_size)}),debug:(b,r)=>({u_color:new o.bI(b,r.u_color),u_overlay:new o.bH(b,r.u_overlay),u_overlay_scale:new o.b8(b,r.u_overlay_scale)}),depth:da,clippingMask:da,heatmap:(b,r)=>({u_extrude_scale:new o.b8(b,r.u_extrude_scale),u_intensity:new o.b8(b,r.u_intensity),u_globe_extrude_scale:new o.b8(b,r.u_globe_extrude_scale)}),heatmapTexture:(b,r)=>({u_matrix:new o.bJ(b,r.u_matrix),u_world:new o.bM(b,r.u_world),u_image:new o.bH(b,r.u_image),u_color_ramp:new o.bH(b,r.u_color_ramp),u_opacity:new o.b8(b,r.u_opacity)}),hillshade:(b,r)=>({u_image:new o.bH(b,r.u_image),u_latrange:new o.bM(b,r.u_latrange),u_light:new o.bM(b,r.u_light),u_shadow:new o.bI(b,r.u_shadow),u_highlight:new o.bI(b,r.u_highlight),u_accent:new o.bI(b,r.u_accent)}),hillshadePrepare:(b,r)=>({u_matrix:new o.bJ(b,r.u_matrix),u_image:new o.bH(b,r.u_image),u_dimension:new o.bM(b,r.u_dimension),u_zoom:new o.b8(b,r.u_zoom),u_unpack:new o.bK(b,r.u_unpack)}),line:(b,r)=>({u_translation:new o.bM(b,r.u_translation),u_ratio:new o.b8(b,r.u_ratio),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_units_to_pixels:new o.bM(b,r.u_units_to_pixels)}),lineGradient:(b,r)=>({u_translation:new o.bM(b,r.u_translation),u_ratio:new o.b8(b,r.u_ratio),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_units_to_pixels:new o.bM(b,r.u_units_to_pixels),u_image:new o.bH(b,r.u_image),u_image_height:new o.b8(b,r.u_image_height)}),linePattern:(b,r)=>({u_translation:new o.bM(b,r.u_translation),u_texsize:new o.bM(b,r.u_texsize),u_ratio:new o.b8(b,r.u_ratio),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_image:new o.bH(b,r.u_image),u_units_to_pixels:new o.bM(b,r.u_units_to_pixels),u_scale:new o.bL(b,r.u_scale),u_fade:new o.b8(b,r.u_fade)}),lineSDF:(b,r)=>({u_translation:new o.bM(b,r.u_translation),u_ratio:new o.b8(b,r.u_ratio),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_units_to_pixels:new o.bM(b,r.u_units_to_pixels),u_patternscale_a:new o.bM(b,r.u_patternscale_a),u_patternscale_b:new o.bM(b,r.u_patternscale_b),u_sdfgamma:new o.b8(b,r.u_sdfgamma),u_image:new o.bH(b,r.u_image),u_tex_y_a:new o.b8(b,r.u_tex_y_a),u_tex_y_b:new o.b8(b,r.u_tex_y_b),u_mix:new o.b8(b,r.u_mix)}),raster:(b,r)=>({u_tl_parent:new o.bM(b,r.u_tl_parent),u_scale_parent:new o.b8(b,r.u_scale_parent),u_buffer_scale:new o.b8(b,r.u_buffer_scale),u_fade_t:new o.b8(b,r.u_fade_t),u_opacity:new o.b8(b,r.u_opacity),u_image0:new o.bH(b,r.u_image0),u_image1:new o.bH(b,r.u_image1),u_brightness_low:new o.b8(b,r.u_brightness_low),u_brightness_high:new o.b8(b,r.u_brightness_high),u_saturation_factor:new o.b8(b,r.u_saturation_factor),u_contrast_factor:new o.b8(b,r.u_contrast_factor),u_spin_weights:new o.bL(b,r.u_spin_weights),u_coords_top:new o.bK(b,r.u_coords_top),u_coords_bottom:new o.bK(b,r.u_coords_bottom)}),symbolIcon:(b,r)=>({u_is_size_zoom_constant:new o.bH(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(b,r.u_is_size_feature_constant),u_size_t:new o.b8(b,r.u_size_t),u_size:new o.b8(b,r.u_size),u_camera_to_center_distance:new o.b8(b,r.u_camera_to_center_distance),u_pitch:new o.b8(b,r.u_pitch),u_rotate_symbol:new o.bH(b,r.u_rotate_symbol),u_aspect_ratio:new o.b8(b,r.u_aspect_ratio),u_fade_change:new o.b8(b,r.u_fade_change),u_label_plane_matrix:new o.bJ(b,r.u_label_plane_matrix),u_coord_matrix:new o.bJ(b,r.u_coord_matrix),u_is_text:new o.bH(b,r.u_is_text),u_pitch_with_map:new o.bH(b,r.u_pitch_with_map),u_is_along_line:new o.bH(b,r.u_is_along_line),u_is_variable_anchor:new o.bH(b,r.u_is_variable_anchor),u_texsize:new o.bM(b,r.u_texsize),u_texture:new o.bH(b,r.u_texture),u_translation:new o.bM(b,r.u_translation),u_pitched_scale:new o.b8(b,r.u_pitched_scale)}),symbolSDF:(b,r)=>({u_is_size_zoom_constant:new o.bH(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(b,r.u_is_size_feature_constant),u_size_t:new o.b8(b,r.u_size_t),u_size:new o.b8(b,r.u_size),u_camera_to_center_distance:new o.b8(b,r.u_camera_to_center_distance),u_pitch:new o.b8(b,r.u_pitch),u_rotate_symbol:new o.bH(b,r.u_rotate_symbol),u_aspect_ratio:new o.b8(b,r.u_aspect_ratio),u_fade_change:new o.b8(b,r.u_fade_change),u_label_plane_matrix:new o.bJ(b,r.u_label_plane_matrix),u_coord_matrix:new o.bJ(b,r.u_coord_matrix),u_is_text:new o.bH(b,r.u_is_text),u_pitch_with_map:new o.bH(b,r.u_pitch_with_map),u_is_along_line:new o.bH(b,r.u_is_along_line),u_is_variable_anchor:new o.bH(b,r.u_is_variable_anchor),u_texsize:new o.bM(b,r.u_texsize),u_texture:new o.bH(b,r.u_texture),u_gamma_scale:new o.b8(b,r.u_gamma_scale),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_is_halo:new o.bH(b,r.u_is_halo),u_translation:new o.bM(b,r.u_translation),u_pitched_scale:new o.b8(b,r.u_pitched_scale)}),symbolTextAndIcon:(b,r)=>({u_is_size_zoom_constant:new o.bH(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(b,r.u_is_size_feature_constant),u_size_t:new o.b8(b,r.u_size_t),u_size:new o.b8(b,r.u_size),u_camera_to_center_distance:new o.b8(b,r.u_camera_to_center_distance),u_pitch:new o.b8(b,r.u_pitch),u_rotate_symbol:new o.bH(b,r.u_rotate_symbol),u_aspect_ratio:new o.b8(b,r.u_aspect_ratio),u_fade_change:new o.b8(b,r.u_fade_change),u_label_plane_matrix:new o.bJ(b,r.u_label_plane_matrix),u_coord_matrix:new o.bJ(b,r.u_coord_matrix),u_is_text:new o.bH(b,r.u_is_text),u_pitch_with_map:new o.bH(b,r.u_pitch_with_map),u_is_along_line:new o.bH(b,r.u_is_along_line),u_is_variable_anchor:new o.bH(b,r.u_is_variable_anchor),u_texsize:new o.bM(b,r.u_texsize),u_texsize_icon:new o.bM(b,r.u_texsize_icon),u_texture:new o.bH(b,r.u_texture),u_texture_icon:new o.bH(b,r.u_texture_icon),u_gamma_scale:new o.b8(b,r.u_gamma_scale),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_is_halo:new o.bH(b,r.u_is_halo),u_translation:new o.bM(b,r.u_translation),u_pitched_scale:new o.b8(b,r.u_pitched_scale)}),background:(b,r)=>({u_opacity:new o.b8(b,r.u_opacity),u_color:new o.bI(b,r.u_color)}),backgroundPattern:(b,r)=>({u_opacity:new o.b8(b,r.u_opacity),u_image:new o.bH(b,r.u_image),u_pattern_tl_a:new o.bM(b,r.u_pattern_tl_a),u_pattern_br_a:new o.bM(b,r.u_pattern_br_a),u_pattern_tl_b:new o.bM(b,r.u_pattern_tl_b),u_pattern_br_b:new o.bM(b,r.u_pattern_br_b),u_texsize:new o.bM(b,r.u_texsize),u_mix:new o.b8(b,r.u_mix),u_pattern_size_a:new o.bM(b,r.u_pattern_size_a),u_pattern_size_b:new o.bM(b,r.u_pattern_size_b),u_scale_a:new o.b8(b,r.u_scale_a),u_scale_b:new o.b8(b,r.u_scale_b),u_pixel_coord_upper:new o.bM(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(b,r.u_pixel_coord_lower),u_tile_units_to_pixels:new o.b8(b,r.u_tile_units_to_pixels)}),terrain:(b,r)=>({u_texture:new o.bH(b,r.u_texture),u_ele_delta:new o.b8(b,r.u_ele_delta),u_fog_matrix:new o.bJ(b,r.u_fog_matrix),u_fog_color:new o.bI(b,r.u_fog_color),u_fog_ground_blend:new o.b8(b,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.b8(b,r.u_fog_ground_blend_opacity),u_horizon_color:new o.bI(b,r.u_horizon_color),u_horizon_fog_blend:new o.b8(b,r.u_horizon_fog_blend),u_is_globe_mode:new o.b8(b,r.u_is_globe_mode)}),terrainDepth:(b,r)=>({u_ele_delta:new o.b8(b,r.u_ele_delta)}),terrainCoords:(b,r)=>({u_texture:new o.bH(b,r.u_texture),u_terrain_coords_id:new o.b8(b,r.u_terrain_coords_id),u_ele_delta:new o.b8(b,r.u_ele_delta)}),projectionErrorMeasurement:(b,r)=>({u_input:new o.b8(b,r.u_input),u_output_expected:new o.b8(b,r.u_output_expected)}),atmosphere:(b,r)=>({u_sun_pos:new o.bL(b,r.u_sun_pos),u_atmosphere_blend:new o.b8(b,r.u_atmosphere_blend),u_globe_position:new o.bL(b,r.u_globe_position),u_globe_radius:new o.b8(b,r.u_globe_radius),u_inv_proj_matrix:new o.bJ(b,r.u_inv_proj_matrix)}),sky:(b,r)=>({u_sky_color:new o.bI(b,r.u_sky_color),u_horizon_color:new o.bI(b,r.u_horizon_color),u_horizon:new o.bM(b,r.u_horizon),u_horizon_normal:new o.bM(b,r.u_horizon_normal),u_sky_horizon_blend:new o.b8(b,r.u_sky_horizon_blend),u_sky_blend:new o.b8(b,r.u_sky_blend)})};class Xu{constructor(r,c,p){this.context=r;const y=r.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class $l{constructor(r,c,p,y){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=r;const A=r.gl;this.buffer=A.createBuffer(),r.bindVertexBuffer.set(this.buffer),A.bufferData(A.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?A.DYNAMIC_DRAW:A.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let p=0;p<this.attributes.length;p++){const y=c.attributes[this.attributes[p].name];y!==void 0&&r.enableVertexAttribArray(y)}}setVertexAttribPointers(r,c,p){for(let y=0;y<this.attributes.length;y++){const A=this.attributes[y],T=c.attributes[A.name];T!==void 0&&r.vertexAttribPointer(T,A.components,r[Rh[A.type]],!1,this.itemSize,A.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class _r{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class fa extends _r{getDefault(){return o.b7.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ae extends _r{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class qe extends _r{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Dn extends _r{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class sr extends _r{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class yi extends _r{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Hr extends _r{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class si extends _r{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class me extends _r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class We extends _r{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class ze extends _r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class Tn extends _r{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class nr extends _r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class br extends _r{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class xr extends _r{getDefault(){return o.b7.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Gr extends _r{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Ds extends _r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class kc extends _r{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Di extends _r{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Za extends _r{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class fu extends _r{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class ps extends _r{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Zl extends _r{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Jr extends _r{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class tr extends _r{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Os extends _r{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ms extends _r{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class al extends _r{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const p=this.gl;ca(p)?p.bindVertexArray(r):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class vr extends _r{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Ea extends _r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class sl extends _r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Wa extends _r{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class Ho extends Wa{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class zs extends Wa{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ll extends Wa{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const Wl="Framebuffer is not complete";class pu{constructor(r,c,p,y,A){this.context=r,this.width=c,this.height=p;const T=r.gl,L=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Ho(r,L),y)this.depthAttachment=A?new ll(r,L):new zs(r,L);else if(A)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error(Wl)}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&r.deleteRenderbuffer(p)}r.deleteFramebuffer(this.framebuffer)}}class Lc{constructor(r){var c,p;if(this.gl=r,this.clearColor=new fa(this),this.clearDepth=new Ae(this),this.clearStencil=new qe(this),this.colorMask=new Dn(this),this.depthMask=new sr(this),this.stencilMask=new yi(this),this.stencilFunc=new Hr(this),this.stencilOp=new si(this),this.stencilTest=new me(this),this.depthRange=new We(this),this.depthTest=new ze(this),this.depthFunc=new Tn(this),this.blend=new nr(this),this.blendFunc=new br(this),this.blendColor=new xr(this),this.blendEquation=new Gr(this),this.cullFace=new Ds(this),this.cullFaceSide=new kc(this),this.frontFace=new Di(this),this.program=new Za(this),this.activeTexture=new fu(this),this.viewport=new ps(this),this.bindFramebuffer=new Zl(this),this.bindRenderbuffer=new Jr(this),this.bindTexture=new tr(this),this.bindVertexBuffer=new Os(this),this.bindElementBuffer=new ms(this),this.bindVertexArray=new al(this),this.pixelStoreUnpack=new vr(this),this.pixelStoreUnpackPremultiplyAlpha=new Ea(this),this.pixelStoreUnpackFlipY=new sl(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),ca(r)){this.HALF_FLOAT=r.HALF_FLOAT;const y=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(p=r.RGB16F)!==null&&p!==void 0?p:y==null?void 0:y.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const y=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new Xu(this,r,c)}createVertexBuffer(r,c,p){return new $l(this,r,c,p)}createRenderbuffer(r,c,p){const y=this.gl,A=y.createRenderbuffer();return this.bindRenderbuffer.set(A),y.renderbufferStorage(y.RENDERBUFFER,r,c,p),this.bindRenderbuffer.set(null),A}createFramebuffer(r,c,p,y){return new pu(this,r,c,p,y)}clear({color:r,depth:c,stencil:p}){const y=this.gl;let A=0;r&&(A|=y.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(A|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(A|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),y.clear(A)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){o.bE(r.blendFunction,ur.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return ca(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return ca(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let pa;function Fs(b,r,c,p,y){const A=b.context,T=b.transform,L=A.gl,B=b.useProgram("collisionBox"),G=[];let Y=0,nt=0;for(let Ft=0;Ft<p.length;Ft++){const Zt=p[Ft],Qt=r.getTile(Zt).getBucket(c);if(!Qt)continue;const ne=y?Qt.textCollisionBox:Qt.iconCollisionBox,se=Qt.collisionCircleArray;se.length>0&&(G.push({circleArray:se,circleOffset:nt,coord:Zt}),Y+=se.length/4,nt=Y),ne&&B.draw(A,L.LINES,Fn.disabled,Dr.disabled,b.colorModeForRenderPass(),Wr.disabled,Ls(b.transform),b.style.map.terrain&&b.style.map.terrain.getTerrainData(Zt),T.getProjectionData({overscaledTileID:Zt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,null,b.transform.zoom,null,null,ne.collisionVertexBuffer)}if(!y||!G.length)return;const rt=b.useProgram("collisionCircle"),ft=new o.bR;ft.resize(4*Y),ft._trim();let _t=0;for(const Ft of G)for(let Zt=0;Zt<Ft.circleArray.length/4;Zt++){const Qt=4*Zt,ne=Ft.circleArray[Qt+0],se=Ft.circleArray[Qt+1],fe=Ft.circleArray[Qt+2],le=Ft.circleArray[Qt+3];ft.emplace(_t++,ne,se,fe,le,0),ft.emplace(_t++,ne,se,fe,le,1),ft.emplace(_t++,ne,se,fe,le,2),ft.emplace(_t++,ne,se,fe,le,3)}(!pa||pa.length<2*Y)&&(pa=function(Ft){const Zt=2*Ft,Qt=new o.bT;Qt.resize(Zt),Qt._trim();for(let ne=0;ne<Zt;ne++){const se=6*ne;Qt.uint16[se+0]=4*ne+0,Qt.uint16[se+1]=4*ne+1,Qt.uint16[se+2]=4*ne+2,Qt.uint16[se+3]=4*ne+2,Qt.uint16[se+4]=4*ne+3,Qt.uint16[se+5]=4*ne+0}return Qt}(Y));const Ot=A.createIndexBuffer(pa,!0),Dt=A.createVertexBuffer(ft,o.bS.members,!0);for(const Ft of G){const Zt=Sc(b.transform);rt.draw(A,L.TRIANGLES,Fn.disabled,Dr.disabled,b.colorModeForRenderPass(),Wr.disabled,Zt,b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ft.coord),null,c.id,Dt,Ot,o.aJ.simpleSegment(0,2*Ft.circleOffset,Ft.circleArray.length,Ft.circleArray.length/2),null,b.transform.zoom,null,null,null)}Dt.destroy(),Ot.destroy()}const cl=o.ad(new Float32Array(16));function Ta(b,r,c,p,y,A){const{horizontalAlign:T,verticalAlign:L}=o.aE(b);return new o.P((-(T-.5)*r/y+p[0])*A,(-(L-.5)*c/y+p[1])*A)}function ul(b,r,c,p,y,A){const T=r.tileAnchorPoint.add(new o.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let L=p.mult(A);c||(L=L.rotate(-y));const B=T.add(L);return Gn(B.x,B.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(c){const L=pi(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(b),B=Math.atan(L.y/L.x)+(L.x<0?Math.PI:0);return b.add(p.rotate(B))}return b.add(p)}function Md(b,r,c,p,y,A,T,L,B,G,Y,nt){const rt=b.text.placedSymbolArray,ft=b.text.dynamicLayoutVertexArray,_t=b.icon.dynamicLayoutVertexArray,Ot={};ft.clear();for(let Dt=0;Dt<rt.length;Dt++){const Ft=rt.get(Dt),Zt=Ft.hidden||!Ft.crossTileID||b.allowVerticalPlacement&&!Ft.placedOrientation?null:p[Ft.crossTileID];if(Zt){const Qt=new o.P(Ft.anchorX,Ft.anchorY),ne={getElevation:nt,width:y.width,height:y.height,pitchedLabelPlaneMatrix:A,pitchWithMap:c,transform:y,tileAnchorPoint:Qt,translation:G,unwrappedTileID:Y},se=c?tu(Qt.x,Qt.y,ne):pi(Qt.x,Qt.y,ne),fe=Fr(y.cameraToCenterDistance,se.signedDistanceFromCamera);let le=o.am(b.textSizeData,L,Ft)*fe/o.ay;c&&(le*=b.tilePixelRatio/T);const{width:ke,height:De,anchor:Ee,textOffset:Qe,textBoxScale:Ge}=Zt,In=Ta(Ee,ke,De,Qe,Ge,le),yn=y.getPitchedTextCorrection(Qt.x+G[0],Qt.y+G[1],Y),an=ul(se.point,ne,r,In,-y.bearingInRadians,yn),Zn=b.allowVerticalPlacement&&Ft.placedOrientation===o.al.vertical?Math.PI/2:0;for(let fr=0;fr<Ft.numGlyphs;fr++)o.as(ft,an,Zn);B&&Ft.associatedIconIndex>=0&&(Ot[Ft.associatedIconIndex]={shiftedAnchor:an,angle:Zn})}else Ri(Ft.numGlyphs,ft)}if(B){_t.clear();const Dt=b.icon.placedSymbolArray;for(let Ft=0;Ft<Dt.length;Ft++){const Zt=Dt.get(Ft);if(Zt.hidden)Ri(Zt.numGlyphs,_t);else{const Qt=Ot[Ft];if(Qt)for(let ne=0;ne<Zt.numGlyphs;ne++)o.as(_t,Qt.shiftedAnchor,Qt.angle);else Ri(Zt.numGlyphs,_t)}}b.icon.dynamicLayoutVertexBuffer.updateData(_t)}b.text.dynamicLayoutVertexBuffer.updateData(ft)}function Sd(b,r,c){return c.iconsInText&&r?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function Ed(b,r,c,p,y,A,T,L,B,G,Y,nt,rt){const ft=b.context,_t=ft.gl,Ot=b.transform,Dt=L==="map",Ft=B==="map",Zt=L!=="viewport"&&c.layout.get("symbol-placement")!=="point",Qt=Dt&&!Ft&&!Zt,ne=!c.layout.get("symbol-sort-key").isConstant();let se=!1;const fe=b.getDepthModeForSublayer(0,Fn.ReadOnly),le=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ke=[],De=Ot.getCircleRadiusCorrection();for(const Ee of p){const Qe=r.getTile(Ee),Ge=Qe.getBucket(c);if(!Ge)continue;const In=y?Ge.text:Ge.icon;if(!In||!In.segments.get().length||!In.hasVisibleVertices)continue;const yn=In.programConfigurations.get(c.id),an=y||Ge.sdfIcons,Zn=y?Ge.textSizeData:Ge.iconSizeData,fr=Ft||Ot.pitch!==0,pr=b.useProgram(Sd(an,y,Ge),yn),vi=o.ak(Zn,Ot.zoom),ti=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ee);let Ci,xi,Sr,jr,oo=[0,0],ao=null;if(y)xi=Qe.glyphAtlasTexture,Sr=_t.LINEAR,Ci=Qe.glyphAtlasTexture.size,Ge.iconsInText&&(oo=Qe.imageAtlasTexture.size,ao=Qe.imageAtlasTexture,jr=fr||b.options.rotating||b.options.zooming||Zn.kind==="composite"||Zn.kind==="camera"?_t.LINEAR:_t.NEAREST);else{const Bi=c.layout.get("icon-size").constantOr(0)!==1||Ge.iconsNeedLinear;xi=Qe.imageAtlasTexture,Sr=an||b.options.rotating||b.options.zooming||Bi||fr?_t.LINEAR:_t.NEAREST,Ci=Qe.imageAtlasTexture.size}const so=o.az(Qe,1,b.transform.zoom),$o=ir(Dt,b.transform,so),ys=o.K();o.an(ys,$o);const Ql=gr(Ft,Dt,b.transform,so),Vs=o.aA(Ot,Qe,A,T),Us=Ot.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!rt,applyTerrainMatrix:!0}),Zo=le&&Ge.hasTextData(),Au=c.layout.get("icon-text-fit")!=="none"&&Zo&&Ge.hasIconData();if(Zt){const Bi=b.style.map.terrain?(Ui,Mi)=>b.style.map.terrain.getElevation(Ee,Ui,Mi):null,Ii=c.layout.get("text-rotation-alignment")==="map";Pr(Ge,b,y,$o,ys,Ft,G,Ii,Ee.toUnwrapped(),Ot.width,Ot.height,Vs,Bi)}const Da=y&&le||Au,Oa=Zt||Da?cl:Ft?$o:b.transform.clipSpaceToPixelsMatrix,Jl=an&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Hs;Hs=an?Ge.iconsInText?Lh(Zn.kind,vi,Qt,Ft,Zt,Da,b,Oa,Ql,Vs,Ci,oo,De):fs(Zn.kind,vi,Qt,Ft,Zt,Da,b,Oa,Ql,Vs,y,Ci,0,De):ol(Zn.kind,vi,Qt,Ft,Zt,Da,b,Oa,Ql,Vs,y,Ci,De);const tc={program:pr,buffers:In,uniformValues:Hs,projectionData:Us,atlasTexture:xi,atlasTextureIcon:ao,atlasInterpolation:Sr,atlasInterpolationIcon:jr,isSDF:an,hasHalo:Jl};if(ne&&Ge.canOverlap){se=!0;const Bi=In.segments.get();for(const Ii of Bi)ke.push({segments:new o.aJ([Ii]),sortKey:Ii.sortKey,state:tc,terrainData:ti})}else ke.push({segments:In.segments,sortKey:0,state:tc,terrainData:ti})}se&&ke.sort((Ee,Qe)=>Ee.sortKey-Qe.sortKey);for(const Ee of ke){const Qe=Ee.state;if(ft.activeTexture.set(_t.TEXTURE0),Qe.atlasTexture.bind(Qe.atlasInterpolation,_t.CLAMP_TO_EDGE),Qe.atlasTextureIcon&&(ft.activeTexture.set(_t.TEXTURE1),Qe.atlasTextureIcon&&Qe.atlasTextureIcon.bind(Qe.atlasInterpolationIcon,_t.CLAMP_TO_EDGE)),Qe.isSDF){const Ge=Qe.uniformValues;Qe.hasHalo&&(Ge.u_is_halo=1,Dh(Qe.buffers,Ee.segments,c,b,Qe.program,fe,Y,nt,Ge,Qe.projectionData,Ee.terrainData)),Ge.u_is_halo=0}Dh(Qe.buffers,Ee.segments,c,b,Qe.program,fe,Y,nt,Qe.uniformValues,Qe.projectionData,Ee.terrainData)}}function Dh(b,r,c,p,y,A,T,L,B,G,Y){const nt=p.context;y.draw(nt,nt.gl.TRIANGLES,A,T,L,Wr.backCCW,B,Y,G,c.id,b.layoutVertexBuffer,b.indexBuffer,r,c.paint,p.transform.zoom,b.programConfigurations.get(c.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function Qu(b,r,c,p,y){const A=b.context,T=A.gl,L=Dr.disabled,B=new ur([T.ONE,T.ONE],o.b7.transparent,[!0,!0,!0,!0]),G=r.getBucket(c);if(!G)return;const Y=p.key;let nt=c.heatmapFbos.get(Y);nt||(nt=jf(A,r.tileSize,r.tileSize),c.heatmapFbos.set(Y,nt)),A.bindFramebuffer.set(nt.framebuffer),A.viewport.set([0,0,r.tileSize,r.tileSize]),A.clear({color:o.b7.transparent});const rt=G.programConfigurations.get(c.id),ft=b.useProgram("heatmap",rt,!y),_t=b.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ot=b.style.map.terrain.getTerrainData(p);ft.draw(A,T.TRIANGLES,Fn.disabled,L,B,Wr.disabled,cu(r,b.transform.zoom,c.paint.get("heatmap-intensity"),1),Ot,_t,c.id,G.layoutVertexBuffer,G.indexBuffer,G.segments,c.paint,b.transform.zoom,rt)}function Nf(b,r,c,p,y){const A=b.context,T=A.gl,L=b.transform;A.setColorMode(b.colorModeForRenderPass());const B=Ju(A,r),G=c.key,Y=r.heatmapFbos.get(G);if(!Y)return;A.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,Y.colorAttachment.get()),A.activeTexture.set(T.TEXTURE1),B.bind(T.LINEAR,T.CLAMP_TO_EDGE);const nt=L.getProjectionData({overscaledTileID:c,applyTerrainMatrix:y,applyGlobeMatrix:!p});b.useProgram("heatmapTexture").draw(A,T.TRIANGLES,Fn.disabled,Dr.disabled,b.colorModeForRenderPass(),Wr.disabled,Ec(b,r,0,1),null,nt,r.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,r.paint,L.zoom),Y.destroy(),r.heatmapFbos.delete(G)}function jf(b,r,c){var p,y;const A=b.gl,T=A.createTexture();A.bindTexture(A.TEXTURE_2D,T),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR);const L=(p=b.HALF_FLOAT)!==null&&p!==void 0?p:A.UNSIGNED_BYTE,B=(y=b.RGBA16F)!==null&&y!==void 0?y:A.RGBA;A.texImage2D(A.TEXTURE_2D,0,B,r,c,0,A.RGBA,L,null);const G=b.createFramebuffer(r,c,!1,!1);return G.colorAttachment.set(T),G}function Ju(b,r){return r.colorRampTexture||(r.colorRampTexture=new et(b,r.colorRamp,b.gl.RGBA)),r.colorRampTexture}function Td(b,r,c,p,y){if(!c||!p||!p.imageAtlas)return;const A=p.imageAtlas.patternPositions;let T=A[c.to.toString()],L=A[c.from.toString()];if(!T&&L&&(T=L),!L&&T&&(L=T),!T||!L){const B=y.getPaintProperty(r);T=A[B],L=A[B]}T&&L&&b.setConstantPatternPositions(T,L)}function Vf(b,r,c,p,y,A,T,L){const B=b.context.gl,G="fill-pattern",Y=c.paint.get(G),nt=Y&&Y.constantOr(1),rt=c.getCrossfadeParameters();let ft,_t,Ot,Dt,Ft;const Zt=b.transform,Qt=c.paint.get("fill-translate"),ne=c.paint.get("fill-translate-anchor");T?(_t=nt&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ft=B.LINES):(_t=nt?"fillPattern":"fill",ft=B.TRIANGLES);const se=Y.constantOr(null);for(const fe of p){const le=r.getTile(fe);if(nt&&!le.patternsLoaded())continue;const ke=le.getBucket(c);if(!ke)continue;const De=ke.programConfigurations.get(c.id),Ee=b.useProgram(_t,De),Qe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(fe);nt&&(b.context.activeTexture.set(B.TEXTURE0),le.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),De.updatePaintBuffers(rt)),Td(De,G,se,le,c);const Ge=Zt.getProjectionData({overscaledTileID:fe,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),In=o.aA(Zt,le,Qt,ne);if(T){Dt=ke.indexBuffer2,Ft=ke.segments2;const an=[B.drawingBufferWidth,B.drawingBufferHeight];Ot=_t==="fillOutlinePattern"&&nt?ds(b,rt,le,an,In):Yu(an,In)}else Dt=ke.indexBuffer,Ft=ke.segments,Ot=nt?ks(b,rt,le,In):{u_fill_translate:In};let yn;if(b.renderPass==="translucent"&&L){const[an]=b.getStencilConfigForOverlapAndUpdateStencilID(p);yn=an[fe.overscaledZ]}else yn=b.stencilModeForClipping(fe);Ee.draw(b.context,ft,y,yn,A,Wr.backCCW,Ot,Qe,Ge,c.id,ke.layoutVertexBuffer,Dt,Ft,c.paint,b.transform.zoom,De)}}function Wi(b,r,c,p,y,A,T,L){const B=b.context,G=B.gl,Y="fill-extrusion-pattern",nt=c.paint.get(Y),rt=nt.constantOr(1),ft=c.getCrossfadeParameters(),_t=c.paint.get("fill-extrusion-opacity"),Ot=nt.constantOr(null),Dt=b.transform;for(const Ft of p){const Zt=r.getTile(Ft),Qt=Zt.getBucket(c);if(!Qt)continue;const ne=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ft),se=Qt.programConfigurations.get(c.id),fe=b.useProgram(rt?"fillExtrusionPattern":"fillExtrusion",se);rt&&(b.context.activeTexture.set(G.TEXTURE0),Zt.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),se.updatePaintBuffers(ft));const le=Dt.getProjectionData({overscaledTileID:Ft,applyGlobeMatrix:!L,applyTerrainMatrix:!0});Td(se,Y,Ot,Zt,c);const ke=o.aA(Dt,Zt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),De=c.paint.get("fill-extrusion-vertical-gradient"),Ee=rt?Bf(b,De,_t,ke,Ft,ft,Zt):hs(b,De,_t,ke);fe.draw(B,B.gl.TRIANGLES,y,A,T,Wr.backCCW,Ee,ne,le,c.id,Qt.layoutVertexBuffer,Qt.indexBuffer,Qt.segments,c.paint,b.transform.zoom,se,b.style.map.terrain&&Qt.centroidVertexBuffer)}}function Qi(b,r,c,p,y,A,T,L,B){var G;const Y=b.style.projection,nt=b.context,rt=b.transform,ft=nt.gl,_t=b.useProgram("hillshade"),Ot=!b.options.moving;for(const Dt of p){const Ft=r.getTile(Dt),Zt=Ft.fbo;if(!Zt)continue;const Qt=Y.getMeshFromTileID(nt,Dt.canonical,L,!0,"raster"),ne=(G=b.style.map.terrain)===null||G===void 0?void 0:G.getTerrainData(Dt);nt.activeTexture.set(ft.TEXTURE0),ft.bindTexture(ft.TEXTURE_2D,Zt.colorAttachment.get());const se=rt.getProjectionData({overscaledTileID:Dt,aligned:Ot,applyGlobeMatrix:!B,applyTerrainMatrix:!0});_t.draw(nt,ft.TRIANGLES,A,y[Dt.overscaledZ],T,Wr.backCCW,Ul(b,Ft,c),ne,se,c.id,Qt.vertexBuffer,Qt.indexBuffer,Qt.segments)}}const Oh=[new o.P(0,0),new o.P(o.Z,0),new o.P(o.Z,o.Z),new o.P(0,o.Z)];function Pd(b,r,c,p,y,A,T,L,B=!1,G=!1){const Y=p[p.length-1].overscaledZ,nt=b.context,rt=nt.gl,ft=b.useProgram("raster"),_t=b.transform,Ot=b.style.projection,Dt=b.colorModeForRenderPass(),Ft=!b.options.moving;for(const Zt of p){const Qt=b.getDepthModeForSublayer(Zt.overscaledZ-Y,c.paint.get("raster-opacity")===1?Fn.ReadWrite:Fn.ReadOnly,rt.LESS),ne=r.getTile(Zt);ne.registerFadeDuration(c.paint.get("raster-fade-duration"));const se=r.findLoadedParent(Zt,0),fe=r.findLoadedSibling(Zt),le=Uf(ne,se||fe||null,r,c,b.transform,b.style.map.terrain);let ke,De;const Ee=c.paint.get("raster-resampling")==="nearest"?rt.NEAREST:rt.LINEAR;nt.activeTexture.set(rt.TEXTURE0),ne.texture.bind(Ee,rt.CLAMP_TO_EDGE,rt.LINEAR_MIPMAP_NEAREST),nt.activeTexture.set(rt.TEXTURE1),se?(se.texture.bind(Ee,rt.CLAMP_TO_EDGE,rt.LINEAR_MIPMAP_NEAREST),ke=Math.pow(2,se.tileID.overscaledZ-ne.tileID.overscaledZ),De=[ne.tileID.canonical.x*ke%1,ne.tileID.canonical.y*ke%1]):ne.texture.bind(Ee,rt.CLAMP_TO_EDGE,rt.LINEAR_MIPMAP_NEAREST),ne.texture.useMipmap&&nt.extTextureFilterAnisotropic&&b.transform.pitch>20&&rt.texParameterf(rt.TEXTURE_2D,nt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,nt.extTextureFilterAnisotropicMax);const Qe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Zt),Ge=_t.getProjectionData({overscaledTileID:Zt,aligned:Ft,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),In=Id(De||[0,0],ke||1,le,c,L),yn=Ot.getMeshFromTileID(nt,Zt.canonical,A,T,"raster");ft.draw(nt,rt.TRIANGLES,Qt,y?y[Zt.overscaledZ]:Dr.disabled,Dt,B?Wr.frontCCW:Wr.backCCW,In,Qe,Ge,c.id,yn.vertexBuffer,yn.indexBuffer,yn.segments)}}function Uf(b,r,c,p,y,A){const T=p.paint.get("raster-fade-duration");if(!A&&T>0){const L=E.now(),B=(L-b.timeAdded)/T,G=r?(L-r.timeAdded)/T:-1,Y=c.getSource(),nt=he(y,{tileSize:Y.tileSize,roundZoom:Y.roundZoom}),rt=!r||Math.abs(r.tileID.overscaledZ-nt)>Math.abs(b.tileID.overscaledZ-nt),ft=rt&&b.refreshedUponExpiration?1:o.ae(rt?B:1-G,0,1);return b.refreshedUponExpiration&&B>=1&&(b.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ft}:{opacity:ft,mix:0}}return{opacity:1,mix:0}}const qi=new o.b7(1,0,0,1),ql=new o.b7(0,1,0,1),ea=new o.b7(0,0,1,1),zh=new o.b7(1,0,1,1),Rc=new o.b7(0,1,1,1);function mu(b,r,c,p){Ns(b,0,r+c/2,b.transform.width,c,p)}function Bs(b,r,c,p){Ns(b,r-c/2,0,c,b.transform.height,p)}function Ns(b,r,c,p,y,A){const T=b.context,L=T.gl;L.enable(L.SCISSOR_TEST),L.scissor(r*b.pixelRatio,c*b.pixelRatio,p*b.pixelRatio,y*b.pixelRatio),T.clear({color:A}),L.disable(L.SCISSOR_TEST)}function Dc(b,r,c){const p=b.context,y=p.gl,A=b.useProgram("debug"),T=Fn.disabled,L=Dr.disabled,B=b.colorModeForRenderPass(),G="$debug",Y=b.style.map.terrain&&b.style.map.terrain.getTerrainData(c);p.activeTexture.set(y.TEXTURE0);const nt=r.getTileByID(c.key).latestRawTileData,rt=Math.floor((nt&&nt.byteLength||0)/1024),ft=r.getTile(c).tileSize,_t=512/Math.min(ft,512)*(c.overscaledZ/b.transform.zoom)*.5;let Ot=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Ot+=` => ${c.overscaledZ}`),function(Ft,Zt){Ft.initDebugOverlayCanvas();const Qt=Ft.debugOverlayCanvas,ne=Ft.context.gl,se=Ft.debugOverlayCanvas.getContext("2d");se.clearRect(0,0,Qt.width,Qt.height),se.shadowColor="white",se.shadowBlur=2,se.lineWidth=1.5,se.strokeStyle="white",se.textBaseline="top",se.font="bold 36px Open Sans, sans-serif",se.fillText(Zt,5,5),se.strokeText(Zt,5,5),Ft.debugOverlayTexture.update(Qt),Ft.debugOverlayTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE)}(b,`${Ot} ${rt}kB`);const Dt=b.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});A.draw(p,y.TRIANGLES,T,L,ur.alphaBlended,Wr.disabled,Sa(o.b7.transparent,_t),null,Dt,G,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),A.draw(p,y.LINE_STRIP,T,L,B,Wr.disabled,Sa(o.b7.red),Y,Dt,G,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function Hf(b,r,c,p){const{isRenderingGlobe:y}=p,A=b.context,T=A.gl,L=b.transform,B=b.colorModeForRenderPass(),G=b.getDepthModeFor3D(),Y=b.useProgram("terrain");A.bindFramebuffer.set(null),A.viewport.set([0,0,b.width,b.height]);for(const nt of c){const rt=r.getTerrainMesh(nt.tileID),ft=b.renderToTexture.getTexture(nt),_t=r.getTerrainData(nt.tileID);A.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,ft.texture);const Ot=r.getMeshFrameDelta(L.zoom),Dt=L.calculateFogMatrix(nt.tileID.toUnwrapped()),Ft=Ph(Ot,Dt,b.style.sky,L.pitch,y),Zt=L.getProjectionData({overscaledTileID:nt.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Y.draw(A,T.TRIANGLES,G,Dr.disabled,B,Wr.backCCW,Ft,_t,Zt,"terrain",rt.vertexBuffer,rt.indexBuffer,rt.segments)}}function Gf(b,r){if(!r.mesh){const c=new o.aI;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const p=new o.aK;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),r.mesh=new _e(b.createVertexBuffer(c,cn.members),b.createIndexBuffer(p),o.aJ.simpleSegment(0,0,c.length,p.length))}return r.mesh}class Yp{constructor(r,c){this.context=new Lc(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Fe.maxUnderzooming+Fe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new xt}resize(r,c,p){if(this.width=Math.floor(r*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const r=this.context,c=new o.aI;c.emplaceBack(0,0),c.emplaceBack(o.Z,0),c.emplaceBack(0,o.Z),c.emplaceBack(o.Z,o.Z),this.tileExtentBuffer=r.createVertexBuffer(c,cn.members),this.tileExtentSegments=o.aJ.simpleSegment(0,0,4,2);const p=new o.aI;p.emplaceBack(0,0),p.emplaceBack(o.Z,0),p.emplaceBack(0,o.Z),p.emplaceBack(o.Z,o.Z),this.debugBuffer=r.createVertexBuffer(p,cn.members),this.debugSegments=o.aJ.simpleSegment(0,0,4,5);const y=new o.bY;y.emplaceBack(0,0,0,0),y.emplaceBack(o.Z,0,o.Z,0),y.emplaceBack(0,o.Z,0,o.Z),y.emplaceBack(o.Z,o.Z,o.Z,o.Z),this.rasterBoundsBuffer=r.createVertexBuffer(y,su.members),this.rasterBoundsSegments=o.aJ.simpleSegment(0,0,4,2);const A=new o.aI;A.emplaceBack(0,0),A.emplaceBack(o.Z,0),A.emplaceBack(0,o.Z),A.emplaceBack(o.Z,o.Z),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(A,cn.members),this.rasterBoundsSegmentsPosOnly=o.aJ.simpleSegment(0,0,4,5);const T=new o.aI;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(T,cn.members),this.viewportSegments=o.aJ.simpleSegment(0,0,4,2);const L=new o.bZ;L.emplaceBack(0),L.emplaceBack(1),L.emplaceBack(3),L.emplaceBack(2),L.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(L);const B=new o.aK;B.emplaceBack(1,0,2),B.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(B);const G=this.context.gl;this.stencilClearMode=new Dr({func:G.ALWAYS,mask:0},0,255,G.ZERO,G.ZERO,G.ZERO),this.tileExtentMesh=new _e(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=o.K();o.bQ(p,0,this.width,this.height,0,0,1),o.M(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const y={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(r,c.TRIANGLES,Fn.disabled,this.stencilClearMode,ur.disabled,Wr.disabled,null,null,y,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c,p){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source,this.nextStencilID+c.length>256&&this.clearStencil();const y=this.context;y.setColorMode(ur.disabled),y.setDepthMode(Fn.disabled);const A={};for(const T of c)A[T.key]=this.nextStencilID++;this._renderTileMasks(A,c,p,!0),this._renderTileMasks(A,c,p,!1),this._tileClippingMaskIDs=A}_renderTileMasks(r,c,p,y){const A=this.context,T=A.gl,L=this.style.projection,B=this.transform,G=this.useProgram("clippingMask");for(const Y of c){const nt=r[Y.key],rt=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Y),ft=L.getMeshFromTileID(this.context,Y.canonical,y,!0,"stencil"),_t=B.getProjectionData({overscaledTileID:Y,applyGlobeMatrix:!0,applyTerrainMatrix:!0});G.draw(A,T.TRIANGLES,Fn.disabled,new Dr({func:T.ALWAYS,mask:0},nt,255,T.KEEP,T.KEEP,T.REPLACE),ur.disabled,p?Wr.disabled:Wr.backCCW,null,rt,_t,"$clipping",ft.vertexBuffer,ft.indexBuffer,ft.segments)}}_renderTilesDepthBuffer(){const r=this.context,c=r.gl,p=this.style.projection,y=this.transform,A=this.useProgram("depth"),T=this.getDepthModeFor3D(),L=Kt(y,{tileSize:y.tileSize});for(const B of L){const G=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B),Y=p.getMeshFromTileID(this.context,B.canonical,!0,!0,"raster"),nt=y.getProjectionData({overscaledTileID:B,applyGlobeMatrix:!0,applyTerrainMatrix:!0});A.draw(r,c.TRIANGLES,T,Dr.disabled,ur.disabled,Wr.backCCW,null,G,nt,"$clipping",Y.vertexBuffer,Y.indexBuffer,Y.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new Dr({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new Dr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const c=this.context.gl,p=r.sort((T,L)=>L.overscaledZ-T.overscaledZ),y=p[p.length-1].overscaledZ,A=p[0].overscaledZ-y+1;if(A>1){this.currentStencilSource=void 0,this.nextStencilID+A>256&&this.clearStencil();const T={};for(let L=0;L<A;L++)T[L+y]=new Dr({func:c.GEQUAL,mask:255},L+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=A,[T,p]}return[{[y]:Dr.disabled},p]}stencilConfigForOverlapTwoPass(r){const c=this.context.gl,p=r.sort((T,L)=>L.overscaledZ-T.overscaledZ),y=p[p.length-1].overscaledZ,A=p[0].overscaledZ-y+1;if(this.clearStencil(),A>1){const T={},L={};for(let B=0;B<A;B++)T[B+y]=new Dr({func:c.GREATER,mask:255},A+1+B,255,c.KEEP,c.KEEP,c.REPLACE),L[B+y]=new Dr({func:c.GREATER,mask:255},1+B,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*A+1,[T,L,p]}return this.nextStencilID=3,[{[y]:new Dr({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[y]:new Dr({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},p]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new ur([r.CONSTANT_COLOR,r.ONE],new o.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ur.unblended:ur.alphaBlended}getDepthModeForSublayer(r,c,p){if(!this.opaquePassEnabledForLayer())return Fn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Fn(p||this.context.gl.LEQUAL,c,[y,y])}getDepthModeFor3D(){return new Fn(this.context.gl.LEQUAL,Fn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){var p,y;this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(E.now()),this.imageManager.beginFrame();const A=this.style._order,T=this.style.sourceCaches,L={},B={},G={},Y={isRenderingToTexture:!1,isRenderingGlobe:((p=r.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const rt in T){const ft=T[rt];ft.used&&ft.prepare(this.context),L[rt]=ft.getVisibleCoordinates(!1),B[rt]=L[rt].slice().reverse(),G[rt]=ft.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let rt=0;rt<A.length;rt++)if(this.style._layers[A[rt]].is3D()){this.opaquePassCutoff=rt;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const rt of A){const ft=this.style._layers[rt];if(!ft.hasOffscreenPass()||ft.isHidden(this.transform.zoom))continue;const _t=B[ft.source];(ft.type==="custom"||_t.length)&&this.renderLayer(this,T[ft.source],ft,_t,Y)}if((y=this.style.projection)===null||y===void 0||y.updateGPUdependent({context:this.context,useProgram:rt=>this.useProgram(rt)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.b7.black:o.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(rt,ft){const _t=rt.context,Ot=_t.gl,Dt=((fe,le,ke)=>{const De=Math.cos(le.rollInRadians),Ee=Math.sin(le.rollInRadians),Qe=oe(le),Ge=le.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:fe.properties.get("sky-color"),u_horizon_color:fe.properties.get("horizon-color"),u_horizon:[(le.width/2-Qe*Ee)*ke,(le.height/2+Qe*De)*ke],u_horizon_normal:[-Ee,De],u_sky_horizon_blend:fe.properties.get("sky-horizon-blend")*le.height/2*ke,u_sky_blend:Ge}})(ft,rt.style.map.transform,rt.pixelRatio),Ft=new Fn(Ot.LEQUAL,Fn.ReadWrite,[0,1]),Zt=Dr.disabled,Qt=rt.colorModeForRenderPass(),ne=rt.useProgram("sky"),se=Gf(_t,ft);ne.draw(_t,Ot.TRIANGLES,Ft,Zt,Qt,Wr.disabled,Dt,null,void 0,"sky",se.vertexBuffer,se.indexBuffer,se.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=A.length-1;this.currentLayer>=0;this.currentLayer--){const rt=this.style._layers[A[this.currentLayer]],ft=T[rt.source],_t=L[rt.source];this._renderTileClippingMasks(rt,_t,!1),this.renderLayer(this,ft,rt,_t,Y)}this.renderPass="translucent";let nt=!1;for(this.currentLayer=0;this.currentLayer<A.length;this.currentLayer++){const rt=this.style._layers[A[this.currentLayer]],ft=T[rt.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(rt,Y))continue;this.opaquePassEnabledForLayer()||nt||(nt=!0,Y.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const _t=(rt.type==="symbol"?G:B)[rt.source];this._renderTileClippingMasks(rt,L[rt.source],!1),this.renderLayer(this,ft,rt,_t,Y)}if(Y.isRenderingGlobe&&function(rt,ft,_t){const Ot=rt.context,Dt=Ot.gl,Ft=rt.useProgram("atmosphere"),Zt=new Fn(Dt.LEQUAL,Fn.ReadOnly,[0,1]),Qt=rt.transform,ne=function(Ge,In){const yn=Ge.properties.get("position"),an=[-yn.x,-yn.y,-yn.z],Zn=o.ad(new Float64Array(16));return Ge.properties.get("anchor")==="map"&&(o.a_(Zn,Zn,In.rollInRadians),o.a$(Zn,Zn,-In.pitchInRadians),o.a_(Zn,Zn,In.bearingInRadians),o.a$(Zn,Zn,In.center.lat*Math.PI/180),o.bp(Zn,Zn,-In.center.lng*Math.PI/180)),o.bX(an,an,Zn),an}(_t,rt.transform),se=Qt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),fe=ft.properties.get("atmosphere-blend")*se.projectionTransition;if(fe===0)return;const le=ro(Qt.worldSize,Qt.center.lat),ke=Qt.inverseProjectionMatrix,De=new Float64Array(4);De[3]=1,o.at(De,De,Qt.modelViewProjectionMatrix),De[0]/=De[3],De[1]/=De[3],De[2]/=De[3],De[3]=1,o.at(De,De,ke),De[0]/=De[3],De[1]/=De[3],De[2]/=De[3],De[3]=1;const Ee=((Ge,In,yn,an,Zn)=>({u_sun_pos:Ge,u_atmosphere_blend:In,u_globe_position:yn,u_globe_radius:an,u_inv_proj_matrix:Zn}))(ne,fe,[De[0],De[1],De[2]],le,ke),Qe=Gf(Ot,ft);Ft.draw(Ot,Dt.TRIANGLES,Zt,Dr.disabled,ur.alphaBlended,Wr.disabled,Ee,null,null,"atmosphere",Qe.vertexBuffer,Qe.indexBuffer,Qe.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const rt=function(ft,_t){let Ot=null;const Dt=Object.values(ft._layers).flatMap(ne=>ne.source&&!ne.isHidden(_t)?[ft.sourceCaches[ne.source]]:[]),Ft=Dt.filter(ne=>ne.getSource().type==="vector"),Zt=Dt.filter(ne=>ne.getSource().type!=="vector"),Qt=ne=>{(!Ot||Ot.getSource().maxzoom<ne.getSource().maxzoom)&&(Ot=ne)};return Ft.forEach(ne=>Qt(ne)),Ot||Zt.forEach(ne=>Qt(ne)),Ot}(this.style,this.transform.zoom);rt&&function(ft,_t,Ot){for(let Dt=0;Dt<Ot.length;Dt++)Dc(ft,_t,Ot[Dt])}(this,rt,rt.getVisibleCoordinates())}this.options.showPadding&&function(rt){const ft=rt.transform.padding;mu(rt,rt.transform.height-(ft.top||0),3,qi),mu(rt,ft.bottom||0,3,ql),Bs(rt,ft.left||0,3,ea),Bs(rt,rt.transform.width-(ft.right||0),3,zh);const _t=rt.transform.centerPoint;(function(Ot,Dt,Ft,Zt){Ns(Ot,Dt-1,Ft-10,2,20,Zt),Ns(Ot,Dt-10,Ft-1,20,2,Zt)})(rt,_t.x,rt.transform.height-_t.y,Rc)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=r?!o.b_(c,p):!o.b$(c,p)),y||(y=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),y&&(o.c0(c,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(A,T){const L=A.context,B=L.gl,G=A.transform,Y=ur.unblended,nt=new Fn(B.LEQUAL,Fn.ReadWrite,[0,1]),rt=T.sourceCache.getRenderableTiles(),ft=A.useProgram("terrainDepth");L.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),L.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),L.clear({color:o.b7.transparent,depth:1});for(const _t of rt){const Ot=T.getTerrainMesh(_t.tileID),Dt=T.getTerrainData(_t.tileID),Ft=G.getProjectionData({overscaledTileID:_t.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Zt={u_ele_delta:T.getMeshFrameDelta(G.zoom)};ft.draw(L,B.TRIANGLES,nt,Dr.disabled,Y,Wr.backCCW,Zt,Dt,Ft,"terrain",Ot.vertexBuffer,Ot.indexBuffer,Ot.segments)}L.bindFramebuffer.set(null),L.viewport.set([0,0,A.width,A.height])}(this,this.style.map.terrain),function(A,T){const L=A.context,B=L.gl,G=A.transform,Y=ur.unblended,nt=new Fn(B.LEQUAL,Fn.ReadWrite,[0,1]),rt=T.getCoordsTexture(),ft=T.sourceCache.getRenderableTiles(),_t=A.useProgram("terrainCoords");L.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),L.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),L.clear({color:o.b7.transparent,depth:1}),T.coordsIndex=[];for(const Ot of ft){const Dt=T.getTerrainMesh(Ot.tileID),Ft=T.getTerrainData(Ot.tileID);L.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,rt.texture);const Zt={u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(G.zoom)},Qt=G.getProjectionData({overscaledTileID:Ot.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});_t.draw(L,B.TRIANGLES,nt,Dr.disabled,Y,Wr.backCCW,Zt,Ft,Qt,"terrain",Dt.vertexBuffer,Dt.indexBuffer,Dt.segments),T.coordsIndex.push(Ot.tileID.key)}L.bindFramebuffer.set(null),L.viewport.set([0,0,A.width,A.height])}(this,this.style.map.terrain))}renderLayer(r,c,p,y,A){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(y||[]).length)&&(this.id=p.id,o.c1(p)?function(T,L,B,G,Y,nt){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:rt}=nt,ft=Dr.disabled,_t=T.colorModeForRenderPass();(B._unevaluatedLayout.hasValue("text-variable-anchor")||B._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Ot,Dt,Ft,Zt,Qt,ne,se,fe,le){const ke=Dt.transform,De=Dt.style.map.terrain,Ee=Qt==="map",Qe=ne==="map";for(const Ge of Ot){const In=Zt.getTile(Ge),yn=In.getBucket(Ft);if(!yn||!yn.text||!yn.text.segments.get().length)continue;const an=o.ak(yn.textSizeData,ke.zoom),Zn=o.az(In,1,Dt.transform.zoom),fr=ir(Ee,Dt.transform,Zn),pr=Ft.layout.get("icon-text-fit")!=="none"&&yn.hasIconData();if(an){const vi=Math.pow(2,ke.zoom-In.tileID.overscaledZ),ti=De?(Ci,xi)=>De.getElevation(Ge,Ci,xi):null;Md(yn,Ee,Qe,le,ke,fr,vi,an,pr,o.aA(ke,In,se,fe),Ge.toUnwrapped(),ti)}}}(G,T,B,L,B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),Y),B.paint.get("icon-opacity").constantOr(1)!==0&&Ed(T,L,B,G,!1,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),B.layout.get("icon-rotation-alignment"),B.layout.get("icon-pitch-alignment"),B.layout.get("icon-keep-upright"),ft,_t,rt),B.paint.get("text-opacity").constantOr(1)!==0&&Ed(T,L,B,G,!0,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.layout.get("text-keep-upright"),ft,_t,rt),L.map.showCollisionBoxes&&(Fs(T,L,B,G,!0),Fs(T,L,B,G,!1))}(r,c,p,y,this.style.placement.variableOffsets,A):o.c2(p)?function(T,L,B,G,Y){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:nt}=Y,rt=B.paint.get("circle-opacity"),ft=B.paint.get("circle-stroke-width"),_t=B.paint.get("circle-stroke-opacity"),Ot=!B.layout.get("circle-sort-key").isConstant();if(rt.constantOr(1)===0&&(ft.constantOr(1)===0||_t.constantOr(1)===0))return;const Dt=T.context,Ft=Dt.gl,Zt=T.transform,Qt=T.getDepthModeForSublayer(0,Fn.ReadOnly),ne=Dr.disabled,se=T.colorModeForRenderPass(),fe=[],le=Zt.getCircleRadiusCorrection();for(let ke=0;ke<G.length;ke++){const De=G[ke],Ee=L.getTile(De),Qe=Ee.getBucket(B);if(!Qe)continue;const Ge=B.paint.get("circle-translate"),In=B.paint.get("circle-translate-anchor"),yn=o.aA(Zt,Ee,Ge,In),an=Qe.programConfigurations.get(B.id),Zn=T.useProgram("circle",an),fr=Qe.layoutVertexBuffer,pr=Qe.indexBuffer,vi=T.style.map.terrain&&T.style.map.terrain.getTerrainData(De),ti={programConfiguration:an,program:Zn,layoutVertexBuffer:fr,indexBuffer:pr,uniformValues:$a(T,Ee,B,yn,le),terrainData:vi,projectionData:Zt.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!nt,applyTerrainMatrix:!0})};if(Ot){const Ci=Qe.segments.get();for(const xi of Ci)fe.push({segments:new o.aJ([xi]),sortKey:xi.sortKey,state:ti})}else fe.push({segments:Qe.segments,sortKey:0,state:ti})}Ot&&fe.sort((ke,De)=>ke.sortKey-De.sortKey);for(const ke of fe){const{programConfiguration:De,program:Ee,layoutVertexBuffer:Qe,indexBuffer:Ge,uniformValues:In,terrainData:yn,projectionData:an}=ke.state;Ee.draw(Dt,Ft.TRIANGLES,Qt,ne,se,Wr.backCCW,In,yn,an,B.id,Qe,Ge,ke.segments,B.paint,T.transform.zoom,De)}}(r,c,p,y,A):o.c3(p)?function(T,L,B,G,Y){if(B.paint.get("heatmap-opacity")===0)return;const nt=T.context,{isRenderingToTexture:rt,isRenderingGlobe:ft}=Y;if(T.style.map.terrain){for(const _t of G){const Ot=L.getTile(_t);L.hasRenderableParent(_t)||(T.renderPass==="offscreen"?Qu(T,Ot,B,_t,ft):T.renderPass==="translucent"&&Nf(T,B,_t,rt,ft))}nt.viewport.set([0,0,T.width,T.height])}else T.renderPass==="offscreen"?function(_t,Ot,Dt,Ft){const Zt=_t.context,Qt=Zt.gl,ne=_t.transform,se=Dr.disabled,fe=new ur([Qt.ONE,Qt.ONE],o.b7.transparent,[!0,!0,!0,!0]);(function(le,ke,De){const Ee=le.gl;le.activeTexture.set(Ee.TEXTURE1),le.viewport.set([0,0,ke.width/4,ke.height/4]);let Qe=De.heatmapFbos.get(o.bU);Qe?(Ee.bindTexture(Ee.TEXTURE_2D,Qe.colorAttachment.get()),le.bindFramebuffer.set(Qe.framebuffer)):(Qe=jf(le,ke.width/4,ke.height/4),De.heatmapFbos.set(o.bU,Qe))})(Zt,_t,Dt),Zt.clear({color:o.b7.transparent});for(let le=0;le<Ft.length;le++){const ke=Ft[le];if(Ot.hasRenderableParent(ke))continue;const De=Ot.getTile(ke),Ee=De.getBucket(Dt);if(!Ee)continue;const Qe=Ee.programConfigurations.get(Dt.id),Ge=_t.useProgram("heatmap",Qe),In=ne.getProjectionData({overscaledTileID:ke,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),yn=ne.getCircleRadiusCorrection();Ge.draw(Zt,Qt.TRIANGLES,Fn.disabled,se,fe,Wr.backCCW,cu(De,ne.zoom,Dt.paint.get("heatmap-intensity"),yn),null,In,Dt.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,Dt.paint,ne.zoom,Qe)}Zt.viewport.set([0,0,_t.width,_t.height])}(T,L,B,G):T.renderPass==="translucent"&&function(_t,Ot){const Dt=_t.context,Ft=Dt.gl;Dt.setColorMode(_t.colorModeForRenderPass());const Zt=Ot.heatmapFbos.get(o.bU);Zt&&(Dt.activeTexture.set(Ft.TEXTURE0),Ft.bindTexture(Ft.TEXTURE_2D,Zt.colorAttachment.get()),Dt.activeTexture.set(Ft.TEXTURE1),Ju(Dt,Ot).bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE),_t.useProgram("heatmapTexture").draw(Dt,Ft.TRIANGLES,Fn.disabled,Dr.disabled,_t.colorModeForRenderPass(),Wr.disabled,Ec(_t,Ot,0,1),null,null,Ot.id,_t.viewportBuffer,_t.quadTriangleIndexBuffer,_t.viewportSegments,Ot.paint,_t.transform.zoom))}(T,B)}(r,c,p,y,A):o.c4(p)?function(T,L,B,G,Y){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:nt}=Y,rt=B.paint.get("line-opacity"),ft=B.paint.get("line-width");if(rt.constantOr(1)===0||ft.constantOr(1)===0)return;const _t=T.getDepthModeForSublayer(0,Fn.ReadOnly),Ot=T.colorModeForRenderPass(),Dt=B.paint.get("line-dasharray"),Ft=B.paint.get("line-pattern"),Zt=Ft.constantOr(1),Qt=B.paint.get("line-gradient"),ne=B.getCrossfadeParameters(),se=Zt?"linePattern":Dt?"lineSDF":Qt?"lineGradient":"line",fe=T.context,le=fe.gl,ke=T.transform;let De=!0;for(const Ee of G){const Qe=L.getTile(Ee);if(Zt&&!Qe.patternsLoaded())continue;const Ge=Qe.getBucket(B);if(!Ge)continue;const In=Ge.programConfigurations.get(B.id),yn=T.context.program.get(),an=T.useProgram(se,In),Zn=De||an.program!==yn,fr=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ee),pr=Ft.constantOr(null);if(pr&&Qe.imageAtlas){const Sr=Qe.imageAtlas,jr=Sr.patternPositions[pr.to.toString()],oo=Sr.patternPositions[pr.from.toString()];jr&&oo&&In.setConstantPatternPositions(jr,oo)}const vi=ke.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!nt,applyTerrainMatrix:!0}),ti=ke.getPixelScale(),Ci=Zt?kh(T,Qe,B,ti,ne):Dt?hu(T,Qe,B,ti,Dt,ne):Qt?Tc(T,Qe,B,ti,Ge.lineClipsArray.length):il(T,Qe,B,ti);if(Zt)fe.activeTexture.set(le.TEXTURE0),Qe.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),In.updatePaintBuffers(ne);else if(Dt&&(Zn||T.lineAtlas.dirty))fe.activeTexture.set(le.TEXTURE0),T.lineAtlas.bind(fe);else if(Qt){const Sr=Ge.gradients[B.id];let jr=Sr.texture;if(B.gradientVersion!==Sr.version){let oo=256;if(B.stepInterpolant){const ao=L.getSource().maxzoom,so=Ee.canonical.z===ao?Math.ceil(1<<T.transform.maxZoom-Ee.canonical.z):1;oo=o.ae(o.bV(Ge.maxLineLength/o.Z*1024*so),256,fe.maxTextureSize)}Sr.gradient=o.bW({expression:B.gradientExpression(),evaluationKey:"lineProgress",resolution:oo,image:Sr.gradient||void 0,clips:Ge.lineClipsArray}),Sr.texture?Sr.texture.update(Sr.gradient):Sr.texture=new et(fe,Sr.gradient,le.RGBA),Sr.version=B.gradientVersion,jr=Sr.texture}fe.activeTexture.set(le.TEXTURE0),jr.bind(B.stepInterpolant?le.NEAREST:le.LINEAR,le.CLAMP_TO_EDGE)}let xi;if(nt){const[Sr]=T.getStencilConfigForOverlapAndUpdateStencilID(G);xi=Sr[Ee.overscaledZ]}else xi=T.stencilModeForClipping(Ee);an.draw(fe,le.TRIANGLES,_t,xi,Ot,Wr.disabled,Ci,fr,vi,B.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,B.paint,T.transform.zoom,In,Ge.layoutVertexBuffer2),De=!1}}(r,c,p,y,A):o.c5(p)?function(T,L,B,G,Y){const nt=B.paint.get("fill-color"),rt=B.paint.get("fill-opacity");if(rt.constantOr(1)===0)return;const{isRenderingToTexture:ft}=Y,_t=T.colorModeForRenderPass(),Ot=B.paint.get("fill-pattern"),Dt=T.opaquePassEnabledForLayer()&&!Ot.constantOr(1)&&nt.constantOr(o.b7.transparent).a===1&&rt.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===Dt){const Ft=T.getDepthModeForSublayer(1,T.renderPass==="opaque"?Fn.ReadWrite:Fn.ReadOnly);Vf(T,L,B,G,Ft,_t,!1,ft)}if(T.renderPass==="translucent"&&B.paint.get("fill-antialias")){const Ft=T.getDepthModeForSublayer(B.getPaintProperty("fill-outline-color")?2:0,Fn.ReadOnly);Vf(T,L,B,G,Ft,_t,!0,ft)}}(r,c,p,y,A):o.c6(p)?function(T,L,B,G,Y){const nt=B.paint.get("fill-extrusion-opacity");if(nt===0)return;const{isRenderingToTexture:rt}=Y;if(T.renderPass==="translucent"){const ft=new Fn(T.context.gl.LEQUAL,Fn.ReadWrite,T.depthRangeFor3D);if(nt!==1||B.paint.get("fill-extrusion-pattern").constantOr(1))Wi(T,L,B,G,ft,Dr.disabled,ur.disabled,rt),Wi(T,L,B,G,ft,T.stencilModeFor3D(),T.colorModeForRenderPass(),rt);else{const _t=T.colorModeForRenderPass();Wi(T,L,B,G,ft,Dr.disabled,_t,rt)}}}(r,c,p,y,A):o.c7(p)?function(T,L,B,G,Y){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const{isRenderingToTexture:nt}=Y,rt=T.context,ft=T.style.projection.useSubdivision,_t=T.getDepthModeForSublayer(0,Fn.ReadOnly),Ot=T.colorModeForRenderPass();if(T.renderPass==="offscreen")(function(Dt,Ft,Zt,Qt,ne,se,fe){const le=Dt.context,ke=le.gl;for(const De of Zt){const Ee=Ft.getTile(De),Qe=Ee.dem;if(!Qe||!Qe.data||!Ee.needsHillshadePrepare)continue;const Ge=Qe.dim,In=Qe.stride,yn=Qe.getPixels();if(le.activeTexture.set(ke.TEXTURE1),le.pixelStoreUnpackPremultiplyAlpha.set(!1),Ee.demTexture=Ee.demTexture||Dt.getTileTexture(In),Ee.demTexture){const Zn=Ee.demTexture;Zn.update(yn,{premultiply:!1}),Zn.bind(ke.NEAREST,ke.CLAMP_TO_EDGE)}else Ee.demTexture=new et(le,yn,ke.RGBA,{premultiply:!1}),Ee.demTexture.bind(ke.NEAREST,ke.CLAMP_TO_EDGE);le.activeTexture.set(ke.TEXTURE0);let an=Ee.fbo;if(!an){const Zn=new et(le,{width:Ge,height:Ge,data:null},ke.RGBA);Zn.bind(ke.LINEAR,ke.CLAMP_TO_EDGE),an=Ee.fbo=le.createFramebuffer(Ge,Ge,!0,!1),an.colorAttachment.set(Zn.texture)}le.bindFramebuffer.set(an.framebuffer),le.viewport.set([0,0,Ge,Ge]),Dt.useProgram("hillshadePrepare").draw(le,ke.TRIANGLES,ne,se,fe,Wr.disabled,Zi(Ee.tileID,Qe),null,null,Qt.id,Dt.rasterBoundsBuffer,Dt.quadTriangleIndexBuffer,Dt.rasterBoundsSegments),Ee.needsHillshadePrepare=!1}})(T,L,G,B,_t,Dr.disabled,Ot),rt.viewport.set([0,0,T.width,T.height]);else if(T.renderPass==="translucent")if(ft){const[Dt,Ft,Zt]=T.stencilConfigForOverlapTwoPass(G);Qi(T,L,B,Zt,Dt,_t,Ot,!1,nt),Qi(T,L,B,Zt,Ft,_t,Ot,!0,nt)}else{const[Dt,Ft]=T.getStencilConfigForOverlapAndUpdateStencilID(G);Qi(T,L,B,Ft,Dt,_t,Ot,!1,nt)}}(r,c,p,y,A):o.c8(p)?function(T,L,B,G,Y){if(T.renderPass!=="translucent"||B.paint.get("raster-opacity")===0||!G.length)return;const{isRenderingToTexture:nt}=Y,rt=L.getSource(),ft=T.style.projection.useSubdivision;if(rt instanceof ee)Pd(T,L,B,G,null,!1,!1,rt.tileCoords,rt.flippedWindingOrder,nt);else if(ft){const[_t,Ot,Dt]=T.stencilConfigForOverlapTwoPass(G);Pd(T,L,B,Dt,_t,!1,!0,Oh,!1,nt),Pd(T,L,B,Dt,Ot,!0,!0,Oh,!1,nt)}else{const[_t,Ot]=T.getStencilConfigForOverlapAndUpdateStencilID(G);Pd(T,L,B,Ot,_t,!1,!0,Oh,!1,nt)}}(r,c,p,y,A):o.c9(p)?function(T,L,B,G,Y){const nt=B.paint.get("background-color"),rt=B.paint.get("background-opacity");if(rt===0)return;const{isRenderingToTexture:ft}=Y,_t=T.context,Ot=_t.gl,Dt=T.style.projection,Ft=T.transform,Zt=Ft.tileSize,Qt=B.paint.get("background-pattern");if(T.isPatternMissing(Qt))return;const ne=!Qt&&nt.a===1&&rt===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==ne)return;const se=Dr.disabled,fe=T.getDepthModeForSublayer(0,ne==="opaque"?Fn.ReadWrite:Fn.ReadOnly),le=T.colorModeForRenderPass(),ke=T.useProgram(Qt?"backgroundPattern":"background"),De=G||Kt(Ft,{tileSize:Zt,terrain:T.style.map.terrain});Qt&&(_t.activeTexture.set(Ot.TEXTURE0),T.imageManager.bind(T.context));const Ee=B.getCrossfadeParameters();for(const Qe of De){const Ge=Ft.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!ft,applyTerrainMatrix:!0}),In=Qt?ha(rt,T,Qt,{tileID:Qe,tileSize:Zt},Ee):Pc(rt,nt),yn=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Qe),an=Dt.getMeshFromTileID(_t,Qe.canonical,!1,!0,"raster");ke.draw(_t,Ot.TRIANGLES,fe,se,le,Wr.backCCW,In,yn,Ge,B.id,an.vertexBuffer,an.indexBuffer,an.segments)}}(r,0,p,y,A):o.ca(p)&&function(T,L,B,G){const{isRenderingGlobe:Y}=G,nt=T.context,rt=B.implementation,ft=T.style.projection,_t=T.transform,Ot=_t.getProjectionDataForCustomLayer(Y),Dt={farZ:_t.farZ,nearZ:_t.nearZ,fov:_t.fov*Math.PI/180,modelViewProjectionMatrix:_t.modelViewProjectionMatrix,projectionMatrix:_t.projectionMatrix,shaderData:{variantName:ft.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ft.shaderPreludeCode.vertexSource}`,define:ft.shaderDefine},defaultProjectionData:Ot},Ft=rt.renderingMode?rt.renderingMode:"2d";if(T.renderPass==="offscreen"){const Zt=rt.prerender;Zt&&(T.setCustomLayerDefaults(),nt.setColorMode(T.colorModeForRenderPass()),Zt.call(rt,nt.gl,Dt),nt.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),nt.setColorMode(T.colorModeForRenderPass()),nt.setStencilMode(Dr.disabled);const Zt=Ft==="3d"?T.getDepthModeFor3D():T.getDepthModeForSublayer(0,Fn.ReadOnly);nt.setDepthMode(Zt),rt.render(nt.gl,Dt),nt.setDirty(),T.setBaseState(),nt.bindFramebuffer.set(null)}}(r,0,p,A))}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),p=this.imageManager.getPattern(r.to.toString());return!c||!p}useProgram(r,c,p=!1){this.cache=this.cache||{};const y=!!this.style.map.terrain,A=this.style.projection,T=r+(c?c.cacheKey:"")+`/${p?An:A.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(y?"/terrain":"");return this.cache[T]||(this.cache[T]=new Mc(this.context,$t[r],c,Gl[r],this._showOverdrawInspector,y,p?$t.projectionMercator:A.shaderPreludeCode,p?dn:A.shaderDefine)),this.cache[T]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new et(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}function $f(b,r){let c,p=!1,y=null,A=null;const T=()=>{y=null,p&&(b.apply(A,c),y=setTimeout(T,r),p=!1)};return(...L)=>(p=!0,A=this,c=L,y||T(),y)}class Zf{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(p=y)}),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const p=c.join("/");let y=p;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${p}`);let A=window.location.hash.replace(y,"");A.startsWith("#&")?A=A.slice(0,1)+A.slice(2):A==="#"&&(A="");let T=window.location.href.replace(/(#.+)?$/,A);T=T.replace("&&","&"),window.history.replaceState(window.history.state,null,T)},this._updateHash=$f(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,y=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),A=Math.pow(10,y),T=Math.round(c.lng*A)/A,L=Math.round(c.lat*A)/A,B=this._map.getBearing(),G=this._map.getPitch();let Y="";if(Y+=r?`/${T}/${L}/${p}`:`${p}/${L}/${T}`,(B||G)&&(Y+="/"+Math.round(10*B)/10),G&&(Y+=`/${Math.round(G)}`),this._hashName){const nt=this._hashName;let rt=!1;const ft=window.location.hash.slice(1).split("&").map(_t=>{const Ot=_t.split("=")[0];return Ot===nt?(rt=!0,`${Ot}=${Y}`):_t}).filter(_t=>_t);return rt||ft.push(`${nt}=${Y}`),`#${ft.join("&")}`}return`#${Y}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new o.Q(+r[2],+r[1])}catch{return!1}const c=+r[0],p=+(r[3]||0),y=+(r[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&p>=-180&&p<=180&&y>=this._map.getMinPitch()&&y<=this._map.getMaxPitch()}}const Pa={linearity:.3,easing:o.cb(0,0,.3,1)},th=o.e({deceleration:2500,maxSpeed:1400},Pa),Wf=o.e({deceleration:20,maxSpeed:1400},Pa),Mt=o.e({deceleration:1e3,maxSpeed:360},Pa),gu=o.e({deceleration:1e3,maxSpeed:90},Pa),Fh=o.e({deceleration:1e3,maxSpeed:360},Pa);class qa{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:E.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=E.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:A}of this._inertiaBuffer)c.zoom+=A.zoomDelta||0,c.bearing+=A.bearingDelta||0,c.pitch+=A.pitchDelta||0,c.roll+=A.rollDelta||0,A.panDelta&&c.pan._add(A.panDelta),A.around&&(c.around=A.around),A.pinchAround&&(c.pinchAround=A.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const A=Oc(c.pan.mag(),p,o.e({},th,r||{})),T=c.pan.mult(A.amount/c.pan.mag()),L=this._map.cameraHelper.handlePanInertia(T,this._map.transform);y.center=L.easingCenter,y.offset=L.easingOffset,kr(y,A)}if(c.zoom){const A=Oc(c.zoom,p,Wf);y.zoom=this._map.transform.zoom+A.amount,kr(y,A)}if(c.bearing){const A=Oc(c.bearing,p,Mt);y.bearing=this._map.transform.bearing+o.ae(A.amount,-179,179),kr(y,A)}if(c.pitch){const A=Oc(c.pitch,p,gu);y.pitch=this._map.transform.pitch+A.amount,kr(y,A)}if(c.roll){const A=Oc(c.roll,p,Fh);y.roll=this._map.transform.roll+o.ae(A.amount,-179,179),kr(y,A)}if(y.zoom||y.bearing){const A=c.pinchAround===void 0?c.around:c.pinchAround;y.around=A?this._map.unproject(A):this._map.getCenter()}return this.clear(),o.e(y,{noMoveStart:!0})}}function kr(b,r){(!b.duration||b.duration<r.duration)&&(b.duration=r.duration,b.easing=r.easing)}function Oc(b,r,c){const{maxSpeed:p,linearity:y,deceleration:A}=c,T=o.ae(b*y/(r/1e3),-p,p),L=Math.abs(T)/(A*y);return{easing:c.easing,duration:1e3*L,amount:T*(L/2)}}class ka extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,p,y={}){p=p instanceof MouseEvent?p:new MouseEvent(r,p);const A=S.mousePos(c.getCanvas(),p),T=c.unproject(A);super(r,o.e({point:A,lngLat:T,originalEvent:p},y)),this._defaultPrevented=!1,this.target=c}}class ma extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,p){const y=r==="touchend"?p.changedTouches:p.touches,A=S.touchPos(c.getCanvasContainer(),y),T=A.map(B=>c.unproject(B)),L=A.reduce((B,G,Y,nt)=>B.add(G.div(nt.length)),new o.P(0,0));super(r,{points:A,point:L,lngLats:T,lngLat:c.unproject(L),originalEvent:p}),this._defaultPrevented=!1}}class Go extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,p){super(r,{originalEvent:p}),this._defaultPrevented=!1}}class Xp{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Go(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new ka(r.type,this._map,r))}mouseup(r){this._map.fire(new ka(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new ka(r.type,this._map,r))}dblclick(r){return this._firePreventable(new ka(r.type,this._map,r))}mouseover(r){this._map.fire(new ka(r.type,this._map,r))}mouseout(r){this._map.fire(new ka(r.type,this._map,r))}touchstart(r){return this._firePreventable(new ma(r.type,this._map,r))}touchmove(r){this._map.fire(new ma(r.type,this._map,r))}touchend(r){this._map.fire(new ma(r.type,this._map,r))}touchcancel(r){this._map.fire(new ma(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hl{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new ka(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ka("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new ka(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class dl{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(o.P.convert(r),this._map.terrain)}}class Qp{constructor(r,c){this._map=r,this._tr=new dl(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(S.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=p,this._box||(this._box=S.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const A=Math.min(y.x,p.x),T=Math.max(y.x,p.x),L=Math.min(y.y,p.y),B=Math.max(y.y,p.y);S.setTransform(this._box,`translate(${A}px,${L}px)`),this._box.style.width=T-A+"px",this._box.style.height=B-L+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const p=this._startPos,y=c;if(this.reset(),S.suppressClick(),p.x!==y.x||p.y!==y.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:r})),{cameraAnimation:A=>A.fitScreenCoordinates(p,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(S.remove(this._box),this._box=null),S.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new o.l(r,{originalEvent:c}))}}function qf(b,r){if(b.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${r.length}`);const c={};for(let p=0;p<b.length;p++)c[b[p].identifier]=r[p];return c}class Kl{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),p.length===this.numTouches&&(this.centroid=function(y){const A=new o.P(0,0);for(const T of y)A._add(T);return A.div(y.length)}(c),this.touches=qf(p,c)))}touchmove(r,c,p){if(this.aborted||!this.centroid)return;const y=qf(p,c);for(const A in this.touches){const T=y[A];(!T||T.dist(this.touches[A])>30)&&(this.aborted=!0)}}touchend(r,c,p){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Kf{constructor(r){this.singleTap=new Kl(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,p){this.singleTap.touchstart(r,c,p)}touchmove(r,c,p){this.singleTap.touchmove(r,c,p)}touchend(r,c,p){const y=this.singleTap.touchend(r,c,p);if(y){const A=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(y)<30;if(A&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Jp{constructor(r){this._tr=new dl(r),this._zoomIn=new Kf({numTouches:1,numTaps:2}),this._zoomOut=new Kf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,p){this._zoomIn.touchstart(r,c,p),this._zoomOut.touchstart(r,c,p)}touchmove(r,c,p){this._zoomIn.touchmove(r,c,p),this._zoomOut.touchmove(r,c,p)}touchend(r,c,p){const y=this._zoomIn.touchend(r,c,p),A=this._zoomOut.touchend(r,c,p),T=this._tr;return y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(y)},{originalEvent:r})}):A?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(A)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yl{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const y=Array.isArray(c)?c[0]:c;return!this._moved&&y.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(p,y))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&S.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Xl={0:1,2:2};class On{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=S.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(c,p){const y=Xl[p];return c.buttons===void 0||(c.buttons&y)!==y}(r,this._eventButton)}isValidEndEvent(r){return S.mouseButton(r)===this._eventButton}}class fl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class Yf{constructor(r=new On({checkCorrectEvent:()=>!0}),c=new fl){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(r,c,p){return r instanceof MouseEvent?c(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?p(r):void 0}startMove(r){this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(r){this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(r){return this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(r){return this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(r){return this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const Bh=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=r=>{r.preventDefault()}};class Nh{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,p){return this._calculateTransform(r,c,p)}touchmove(r,c,p){if(this._active){if(!this._shouldBePrevented(p.length))return r.preventDefault(),this._calculateTransform(r,c,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,p){this._calculateTransform(r,c,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,p){p.length>0&&(this._active=!0);const y=qf(p,c),A=new o.P(0,0),T=new o.P(0,0);let L=0;for(const G in y){const Y=y[G],nt=this._touches[G];nt&&(A._add(Y),T._add(Y.sub(nt)),L++,y[G]=Y)}if(this._touches=y,this._shouldBePrevented(L)||!T.mag())return;const B=T.div(L);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:A.div(L),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,p){if(!this._firstTwoTouches)return;r.preventDefault();const[y,A]=this._firstTwoTouches,T=jh(p,c,y),L=jh(p,c,A);if(!T||!L)return;const B=this._aroundCenter?null:T.add(L).div(2);return this._move([T,L],B,r)}touchend(r,c,p){if(!this._firstTwoTouches)return;const[y,A]=this._firstTwoTouches,T=jh(p,c,y),L=jh(p,c,A);T&&L||(this._active&&S.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function jh(b,r,c){for(let p=0;p<b.length;p++)if(b[p].identifier===c)return r[p]}function Ar(b,r){return Math.log(b/r)/Math.LN2}class kd extends yu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const p=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Ar(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ar(this._distance,p),pinchAround:c}}}function tm(b,r){return 180*b.angleWith(r)/Math.PI}class La extends yu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,p){const y=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:tm(this._vector,y),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,p=tm(r,this._startVector);return Math.abs(p)<c}}function Xf(b){return Math.abs(b.y)>Math.abs(b.x)}class em extends yu{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,p){super.touchstart(r,c,p),this._currentTouchCount=p.length}_start(r){this._lastPoints=r,Xf(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=r[0].sub(this._lastPoints[0]),A=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,A,p.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(y.y+A.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,p){if(this._valid!==void 0)return this._valid;const y=r.mag()>=2,A=c.mag()>=2;if(!y&&!A)return;if(!y||!A)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const T=r.y>0==c.y>0;return Xf(r)&&Xf(c)&&T}}const nm={panStep:100,bearingStep:15,pitchStep:10};class Ld{constructor(r){this._tr=new dl(r);const c=nm;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,p=0,y=0,A=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?p=-1:(r.preventDefault(),A=-1);break;case 39:r.shiftKey?p=1:(r.preventDefault(),A=1);break;case 38:r.shiftKey?y=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?y=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(p=0,y=0),{cameraAnimation:L=>{const B=this._tr;L.easeTo({duration:300,easeId:"keyboardHandler",easing:rm,zoom:c?Math.round(B.zoom)+c*(r.shiftKey?2:1):B.zoom,bearing:B.bearing+p*this._bearingStep,pitch:B.pitch+y*this._pitchStep,offset:[-A*this._panStep,-T*this._panStep],center:B.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rm(b){return b*(2-b)}const Qf=4.000244140625;class Rd{constructor(r,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=r,this._tr=new dl(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const p=E.now(),y=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%Qf==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=S.mousePos(this._map.getCanvas(),r),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(o.Q.convert(p.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const L=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=L),typeof this._targetZoom=="number"&&(this._targetZoom+=L)}if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>Qf?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&B!==0&&(B=1/B);const G=typeof this._targetZoom!="number"?r.scale:o.ac(this._targetZoom);this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,o.ah(G*B))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,p=this._startZoom,y=this._easing;let A,T=!1;if(this._type==="wheel"&&p&&y){const L=E.now()-this._lastWheelEventTime,B=Math.min((L+5)/200,1),G=y(B);A=o.B.number(p,c,G),B<1?this._frameId||(this._frameId=!0):T=!0}else A=c,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=A,{noInertia:!0,needsRenderFrame:!T,zoomDelta:A-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=o.cd;if(this._prevEase){const p=this._prevEase,y=(E.now()-p.start)/p.duration,A=p.easing(y+.01)-p.easing(y),T=.27/Math.sqrt(A*A+1e-4)*.01,L=Math.sqrt(.0729-T*T);c=o.cb(T,L,.25,1)}return this._prevEase={start:E.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class im{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Bg{constructor(r){this._tr=new dl(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pl{constructor(){this._tap=new Kf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,p){if(!this._swipePoint)if(this._tapTime){const y=c[0],A=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(y)<30;A&&T?p.length>0&&(this._swipePoint=y,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(r,c,p)}touchmove(r,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const y=c[0],A=y.y-this._swipePoint.y;return this._swipePoint=y,r.preventDefault(),this._active=!0,{zoomDelta:A/128}}}else this._tap.touchmove(r,c,p)}touchend(r,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const y=this._tap.touchend(r,c,p);y&&(this._tapTime=r.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class li{constructor(r,c,p){this._el=r,this._mousePan=c,this._touchPan=p}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zc{constructor(r,c,p,y){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=c,this._mousePitch=p,this._mouseRoll=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Dd{constructor(r,c,p,y){this._el=r,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Od{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=S.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=c,this._container.appendChild(y);const A=document.createElement("div");A.className="maplibregl-mobile-message",A.textContent=p,this._container.appendChild(A),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(S.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Vh=b=>b.zoom||b.drag||b.roll||b.pitch||b.rotate;class ml extends o.l{}function Uh(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta||b.rollDelta}class na{constructor(r,c){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,A)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=y.type==="renderFrame"?void 0:y,L={needsRenderFrame:!1},B={},G={};for(const{handlerName:rt,handler:ft,allowed:_t}of this._handlers){if(!ft.isEnabled())continue;let Ot;if(this._blockedByActive(G,_t,rt))ft.reset();else if(ft[A||y.type]){if(o.ce(y,A||y.type)){const Dt=S.mousePos(this._map.getCanvas(),y);Ot=ft[A||y.type](y,Dt)}else if(o.cf(y,A||y.type)){const Dt=this._getMapTouches(y.touches),Ft=S.touchPos(this._map.getCanvas(),Dt);Ot=ft[A||y.type](y,Ft,Dt)}else o.cg(A||y.type)||(Ot=ft[A||y.type](y));this.mergeHandlerResult(L,B,Ot,rt,T),Ot&&Ot.needsRenderFrame&&this._triggerRenderFrame()}(Ot||ft.isActive())&&(G[rt]=ft)}const Y={};for(const rt in this._previousActiveHandlers)G[rt]||(Y[rt]=T);this._previousActiveHandlers=G,(Object.keys(Y).length||Uh(L))&&(this._changes.push([L,B,Y]),this._triggerRenderFrame()),(Object.keys(G).length||Uh(L))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:nt}=L;nt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],nt(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new qa(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,A,T]of this._listeners)S.addEventListener(y,A,y===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,c,p]of this._listeners)S.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(r){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new Xp(c,r));const y=c.boxZoom=new Qp(c,r);this._add("boxZoom",y),r.interactive&&r.boxZoom&&y.enable();const A=c.cooperativeGestures=new Od(c,r.cooperativeGestures);this._add("cooperativeGestures",A),r.cooperativeGestures&&A.enable();const T=new Jp(c),L=new Bg(c);c.doubleClickZoom=new im(L,T),this._add("tapZoom",T),this._add("clickZoom",L),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const B=new pl;this._add("tapDragZoom",B);const G=c.touchPitch=new em(c);this._add("touchPitch",G),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const Y=()=>c.project(c.getCenter()),nt=function({enable:ne,clickTolerance:se,aroundCenter:fe=!0,minPixelCenterThreshold:le=100,rotateDegreesPerPixelMoved:ke=.8},De){const Ee=new On({checkCorrectEvent:Qe=>S.mouseButton(Qe)===0&&Qe.ctrlKey||S.mouseButton(Qe)===2&&!Qe.ctrlKey});return new Yl({clickTolerance:se,move:(Qe,Ge)=>{const In=De();if(fe&&Math.abs(In.y-Qe.y)>le)return{bearingDelta:o.cc(new o.P(Qe.x,Ge.y),Ge,In)};let yn=(Ge.x-Qe.x)*ke;return fe&&Ge.y<In.y&&(yn=-yn),{bearingDelta:yn}},moveStateManager:Ee,enable:ne,assignEvents:Bh})}(r,Y),rt=function({enable:ne,clickTolerance:se,pitchDegreesPerPixelMoved:fe=-.5}){const le=new On({checkCorrectEvent:ke=>S.mouseButton(ke)===0&&ke.ctrlKey||S.mouseButton(ke)===2});return new Yl({clickTolerance:se,move:(ke,De)=>({pitchDelta:(De.y-ke.y)*fe}),moveStateManager:le,enable:ne,assignEvents:Bh})}(r),ft=function({enable:ne,clickTolerance:se,rollDegreesPerPixelMoved:fe=.3},le){const ke=new On({checkCorrectEvent:De=>S.mouseButton(De)===2&&De.ctrlKey});return new Yl({clickTolerance:se,move:(De,Ee)=>{const Qe=le();let Ge=(Ee.x-De.x)*fe;return Ee.y<Qe.y&&(Ge=-Ge),{rollDelta:Ge}},moveStateManager:ke,enable:ne,assignEvents:Bh})}(r,Y);c.dragRotate=new zc(r,nt,rt,ft),this._add("mouseRotate",nt,["mousePitch"]),this._add("mousePitch",rt,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ft,["mousePitch"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const _t=function({enable:ne,clickTolerance:se}){const fe=new On({checkCorrectEvent:le=>S.mouseButton(le)===0&&!le.ctrlKey});return new Yl({clickTolerance:se,move:(le,ke)=>({around:ke,panDelta:ke.sub(le)}),activateOnStart:!0,moveStateManager:fe,enable:ne,assignEvents:Bh})}(r),Ot=new Nh(r,c);c.dragPan=new li(p,_t,Ot),this._add("mousePan",_t),this._add("touchPan",Ot,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const Dt=new La,Ft=new kd;c.touchZoomRotate=new Dd(p,Ft,Dt,B),this._add("touchRotate",Dt,["touchPan","touchZoom"]),this._add("touchZoom",Ft,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const Zt=c.scrollZoom=new Rd(c,()=>this._triggerRenderFrame());this._add("scrollZoom",Zt,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const Qt=c.keyboard=new Ld(c);this._add("keyboard",Qt),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new hl(c))}_add(r,c,p){this._handlers.push({handlerName:r,handler:c,allowed:p}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Vh(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,p){for(const y in r)if(y!==p&&(!c||c.indexOf(y)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const p of r)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(r,c,p,y,A){if(!p)return;o.e(r,p);const T={handlerName:y,originalEvent:p.originalEvent||A};p.zoomDelta!==void 0&&(c.zoom=T),p.panDelta!==void 0&&(c.drag=T),p.rollDelta!==void 0&&(c.roll=T),p.pitchDelta!==void 0&&(c.pitch=T),p.bearingDelta!==void 0&&(c.rotate=T)}_applyChanges(){const r={},c={},p={};for(const[y,A,T]of this._changes)y.panDelta&&(r.panDelta=(r.panDelta||new o.P(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.rollDelta&&(r.rollDelta=(r.rollDelta||0)+y.rollDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),o.e(c,A),o.e(p,T);this._updateMapTransform(r,c,p),this._changes=[]}_updateMapTransform(r,c,p){const y=this._map,A=y._getTransformForUpdate(),T=y.terrain;if(!(Uh(r)||T&&this._terrainMovement))return this._fireEvents(c,p,!0);y._stop(!0);let{panDelta:L,zoomDelta:B,bearingDelta:G,pitchDelta:Y,rollDelta:nt,around:rt,pinchAround:ft}=r;ft!==void 0&&(rt=ft),rt=rt||y.transform.centerPoint,T&&!A.isPointOnMapSurface(rt)&&(rt=A.centerPoint);const _t={panDelta:L,zoomDelta:B,rollDelta:nt,pitchDelta:Y,bearingDelta:G,around:rt};this._map.cameraHelper.useGlobeControls&&!A.isPointOnMapSurface(rt)&&(rt=A.centerPoint);const Ot=rt.distSqr(A.centerPoint)<.01?A.center:A.screenPointToLocation(L?rt.sub(L):rt);T?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(_t,A),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?A.setCenter(A.screenPointToLocation(A.centerPoint.sub(L))):this._map.cameraHelper.handleMapControlsPan(_t,A,Ot):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(_t,A,Ot))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(_t,A),this._map.cameraHelper.handleMapControlsPan(_t,A,Ot)),y._applyUpdatedTransform(A),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,p,!0)}_fireEvents(r,c,p){const y=Vh(this._eventsInProgress),A=Vh(r),T={};for(const nt in r){const{originalEvent:rt}=r[nt];this._eventsInProgress[nt]||(T[`${nt}start`]=rt),this._eventsInProgress[nt]=r[nt]}!y&&A&&this._fireEvent("movestart",A.originalEvent);for(const nt in T)this._fireEvent(nt,T[nt]);A&&this._fireEvent("move",A.originalEvent);for(const nt in r){const{originalEvent:rt}=r[nt];this._fireEvent(nt,rt)}const L={};let B;for(const nt in this._eventsInProgress){const{handlerName:rt,originalEvent:ft}=this._eventsInProgress[nt];this._handlersById[rt].isActive()||(delete this._eventsInProgress[nt],B=c[rt]||ft,L[`${nt}end`]=B)}for(const nt in L)this._fireEvent(nt,L[nt]);const G=Vh(this._eventsInProgress),Y=(y||A)&&!G;if(Y&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const nt=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&nt.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(nt)}if(p&&Y){this._updatingCamera=!0;const nt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),rt=ft=>ft!==0&&-this._bearingSnap<ft&&ft<this._bearingSnap;!nt||!nt.essential&&E.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:B})),rt(this._map.getBearing())&&this._map.resetNorth()):(rt(nt.bearing||this._map.getBearing())&&(nt.bearing=0),nt.freezeElevation=!0,this._map.easeTo(nt,{originalEvent:B})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new o.l(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new ml("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ga extends o.E{constructor(r,c,p){super(),this._renderFrameCallback=()=>{const y=Math.min((E.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=p.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,c){r.apply(this.transform),this.transform=r,this.cameraHelper=c}getCenter(){return new o.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,c){return this.jumpTo({elevation:r},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,c,p){return r=o.P.convert(r).mult(-1),this.panTo(this.transform.center,o.e({offset:r},c),p)}panTo(r,c,p){return this.easeTo(o.e({center:r},c),p)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,p){return this.easeTo(o.e({zoom:r},c),p)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,c){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)).fire(new o.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,p){return this.easeTo(o.e({bearing:r},c),p)}resetNorth(r,c){return this.rotateTo(0,o.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}getRoll(){return this.transform.roll}setRoll(r,c){return this.jumpTo({roll:r},c),this}cameraForBounds(r,c){r=H.convert(r).adjustAntiMeridian();const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),p,c)}_cameraForBoxAndBearing(r,c,p,y){const A={top:0,bottom:0,right:0,left:0};if(typeof(y=o.e({padding:A,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const G=y.padding;y.padding={top:G,bottom:G,right:G,left:G}}const T=o.e(A,y.padding);y.padding=T;const L=this.transform,B=new H(r,c);return this.cameraHelper.cameraForBoxAndBearing(y,T,B,p,L)}fitBounds(r,c,p){return this._fitInternal(this.cameraForBounds(r,c),c,p)}fitScreenCoordinates(r,c,p,y,A){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(r)),this.transform.screenPointToLocation(o.P.convert(c)),p,y),y,A)}_fitInternal(r,c,p){return r?(delete(c=o.e(r,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(r,c){this.stop();const p=this._getTransformForUpdate();let y=!1,A=!1,T=!1;const L=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,r);const B=p.zoom!==L;return"elevation"in r&&p.elevation!==+r.elevation&&p.setElevation(+r.elevation),"bearing"in r&&p.bearing!==+r.bearing&&(y=!0,p.setBearing(+r.bearing)),"pitch"in r&&p.pitch!==+r.pitch&&(A=!0,p.setPitch(+r.pitch)),"roll"in r&&p.roll!==+r.roll&&(T=!0,p.setRoll(+r.roll)),r.padding==null||p.isPaddingEqual(r.padding)||p.setPadding(r.padding),this._applyUpdatedTransform(p),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)),B&&this.fire(new o.l("zoomstart",c)).fire(new o.l("zoom",c)).fire(new o.l("zoomend",c)),y&&this.fire(new o.l("rotatestart",c)).fire(new o.l("rotate",c)).fire(new o.l("rotateend",c)),A&&this.fire(new o.l("pitchstart",c)).fire(new o.l("pitch",c)).fire(new o.l("pitchend",c)),T&&this.fire(new o.l("rollstart",c)).fire(new o.l("roll",c)).fire(new o.l("rollend",c)),this.fire(new o.l("moveend",c))}calculateCameraOptionsFromTo(r,c,p,y=0){const A=o.$.fromLngLat(r,c),T=o.$.fromLngLat(p,y),L=T.x-A.x,B=T.y-A.y,G=T.z-A.z,Y=Math.hypot(L,B,G);if(Y===0)throw new Error("Can't calculate camera options with same From and To");const nt=Math.hypot(L,B),rt=o.ah(this.transform.cameraToCenterDistance/Y/this.transform.tileSize),ft=180*Math.atan2(L,-B)/Math.PI;let _t=180*Math.acos(nt/Y)/Math.PI;return _t=G<0?90-_t:90+_t,{center:T.toLngLat(),elevation:y,zoom:rt,pitch:_t,bearing:ft}}calculateCameraOptionsFromCameraLngLatAltRotation(r,c,p,y,A){const T=this.transform.calculateCenterFromCameraLngLatAlt(r,c,p,y);return{center:T.center,elevation:T.elevation,zoom:T.zoom,bearing:p,pitch:y,roll:A}}easeTo(r,c){this._stop(!1,r.easeId),((r=o.e({offset:[0,0],duration:500,easing:o.cd},r)).animate===!1||!r.essential&&E.prefersReducedMotion)&&(r.duration=0);const p=this._getTransformForUpdate(),y=this.getBearing(),A=p.pitch,T=p.roll,L="bearing"in r?this._normalizeBearing(r.bearing,y):y,B="pitch"in r?+r.pitch:A,G="roll"in r?this._normalizeBearing(r.roll,T):T,Y="padding"in r?r.padding:p.padding,nt=o.P.convert(r.offset);let rt,ft;r.around&&(rt=o.Q.convert(r.around),ft=p.locationToScreenPoint(rt));const _t={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ot=this.cameraHelper.handleEaseTo(p,{bearing:L,pitch:B,roll:G,padding:Y,around:rt,aroundPoint:ft,offsetAsPoint:nt,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||y!==L,this._pitching=this._pitching||B!==A,this._rolling=this._rolling||G!==T,this._padding=!p.isPaddingEqual(Y),this._zooming=this._zooming||Ot.isZooming,this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,_t),this.terrain&&this._prepareElevation(Ot.elevationCenter),this._ease(Dt=>{Ot.easeFunc(Dt),this.terrain&&!r.freezeElevation&&this._updateElevation(Dt),this._applyUpdatedTransform(p),this._fireMoveEvents(c)},Dt=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,Dt)},r),this}_prepareEase(r,c,p={}){this._moving=!0,c||p.moving||this.fire(new o.l("movestart",r)),this._zooming&&!p.zooming&&this.fire(new o.l("zoomstart",r)),this._rotating&&!p.rotating&&this.fire(new o.l("rotatestart",r)),this._pitching&&!p.pitching&&this.fire(new o.l("pitchstart",r)),this._rolling&&!p.rolling&&this.fire(new o.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(p-(c-(p*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.setElevation(o.B.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const c=r.getCameraLngLat(),p=r.getCameraAltitude(),y=this.terrain?this.terrain.getElevationForLngLatZoom(c,r.zoom):0;if(p<y){const A=this.calculateCameraOptionsFromTo(c,y,r.center,r.elevation);return{pitch:A.pitch,zoom:A.zoom}}return{}}_applyUpdatedTransform(r){const c=[];if(c.push(y=>this._elevateCameraIfInsideTerrain(y)),this.transformCameraUpdate&&c.push(y=>this.transformCameraUpdate(y)),!c.length)return;const p=r.clone();for(const y of c){const A=p.clone(),{center:T,zoom:L,roll:B,pitch:G,bearing:Y,elevation:nt}=y(A);T&&A.setCenter(T),nt!==void 0&&A.setElevation(nt),L!==void 0&&A.setZoom(L),B!==void 0&&A.setRoll(B),G!==void 0&&A.setPitch(G),Y!==void 0&&A.setBearing(Y),p.apply(A)}this.transform.apply(p)}_fireMoveEvents(r){this.fire(new o.l("move",r)),this._zooming&&this.fire(new o.l("zoom",r)),this._rotating&&this.fire(new o.l("rotate",r)),this._pitching&&this.fire(new o.l("pitch",r)),this._rolling&&this.fire(new o.l("roll",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,y=this._rotating,A=this._pitching,T=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new o.l("zoomend",r)),y&&this.fire(new o.l("rotateend",r)),A&&this.fire(new o.l("pitchend",r)),T&&this.fire(new o.l("rollend",r)),this.fire(new o.l("moveend",r))}flyTo(r,c){if(!r.essential&&E.prefersReducedMotion){const Ge=o.O(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Ge,c)}this.stop(),r=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cd},r);const p=this._getTransformForUpdate(),y=p.bearing,A=p.pitch,T=p.roll,L=p.padding,B="bearing"in r?this._normalizeBearing(r.bearing,y):y,G="pitch"in r?+r.pitch:A,Y="roll"in r?this._normalizeBearing(r.roll,T):T,nt="padding"in r?r.padding:p.padding,rt=o.P.convert(r.offset);let ft=p.centerPoint.add(rt);const _t=p.screenPointToLocation(ft),Ot=this.cameraHelper.handleFlyTo(p,{bearing:B,pitch:G,roll:Y,padding:nt,locationAtOffset:_t,offsetAsPoint:rt,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let Dt=r.curve;const Ft=Math.max(p.width,p.height),Zt=Ft/Ot.scaleOfZoom,Qt=Ot.pixelPathLength;typeof Ot.scaleOfMinZoom=="number"&&(Dt=Math.sqrt(Ft/Ot.scaleOfMinZoom/Qt*2));const ne=Dt*Dt;function se(Ge){const In=(Zt*Zt-Ft*Ft+(Ge?-1:1)*ne*ne*Qt*Qt)/(2*(Ge?Zt:Ft)*ne*Qt);return Math.log(Math.sqrt(In*In+1)-In)}function fe(Ge){return(Math.exp(Ge)-Math.exp(-Ge))/2}function le(Ge){return(Math.exp(Ge)+Math.exp(-Ge))/2}const ke=se(!1);let De=function(Ge){return le(ke)/le(ke+Dt*Ge)},Ee=function(Ge){return Ft*((le(ke)*(fe(In=ke+Dt*Ge)/le(In))-fe(ke))/ne)/Qt;var In},Qe=(se(!0)-ke)/Dt;if(Math.abs(Qt)<2e-6||!isFinite(Qe)){if(Math.abs(Ft-Zt)<1e-6)return this.easeTo(r,c);const Ge=Zt<Ft?-1:1;Qe=Math.abs(Math.log(Zt/Ft))/Dt,Ee=()=>0,De=In=>Math.exp(Ge*Dt*In)}return r.duration="duration"in r?+r.duration:1e3*Qe/("screenSpeed"in r?+r.screenSpeed/Dt:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=y!==B,this._pitching=G!==A,this._rolling=Y!==T,this._padding=!p.isPaddingEqual(nt),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(Ot.targetCenter),this._ease(Ge=>{const In=Ge*Qe,yn=1/De(In),an=Ee(In);this._rotating&&p.setBearing(o.B.number(y,B,Ge)),this._pitching&&p.setPitch(o.B.number(A,G,Ge)),this._rolling&&p.setRoll(o.B.number(T,Y,Ge)),this._padding&&(p.interpolatePadding(L,nt,Ge),ft=p.centerPoint.add(rt)),Ot.easeFunc(Ge,yn,an,ft),this.terrain&&!r.freezeElevation&&this._updateElevation(Ge),this._applyUpdatedTransform(p),this._fireMoveEvents(c)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,c)}return r||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(r,c,p){p.animate===!1||p.duration===0?(r(1),c()):(this._easeStart=E.now(),this._easeOptions=p,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=o.aL(r,-180,180);const p=Math.abs(r-c);return Math.abs(r-360-c)<p&&(r-=360),Math.abs(r+360-c)<p&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(o.Q.convert(r),this.transform.tileZoom):null}}const Yn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class lr{constructor(r=Yn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=S.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=S.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=S.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){S.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const p=this._map._getUIString(`AttributionControl.${c}`);r.title=p,r.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style.sourceCaches;for(const y in c){const A=c[y];if(A.used||A.usedForTerrain){const T=A.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(y=>String(y).trim()),r.sort((y,A)=>y.length-A.length),r=r.filter((y,A)=>{for(let T=A+1;T<r.length;T++)if(r[T].indexOf(y)>=0)return!1;return!0});const p=r.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,r.length?(this._innerContainer.innerHTML=S.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class eh{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=S.create("div","maplibregl-ctrl");const c=S.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){S.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class vu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const y of p)if(y.id===r)return void(y.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var gl=o.aG([{name:"a_pos3d",type:"Int16",components:3}]);class ya extends o.E{constructor(r){super(),this._lastTilesetChange=E.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const p={};for(const y of Kt(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))p[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.terrainRttPosMatrix32f=new Float64Array(16),o.bQ(y.terrainRttPosMatrix32f,0,o.Z,o.Z,0,0,1),this._tiles[y.key]=new de(y,this.tileSize),this._lastTilesetChange=E.now());for(const y in this._tiles)p[y]||delete this._tiles[y]}freeRtt(r){for(const c in this._tiles){const p=this._tiles[c];(!r||p.tileID.equals(r)||p.tileID.isChildOf(r)||r.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,c){return c?this._getTerrainCoordsForTileRanges(r,c):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const c={};for(const p of this._renderableTilesKeys){const y=this._tiles[p].tileID,A=r.clone(),T=o.b2();if(y.canonical.equals(r.canonical))o.bQ(T,0,o.Z,o.Z,0,0,1);else if(y.canonical.isChildOf(r.canonical)){const L=y.canonical.z-r.canonical.z,B=y.canonical.x-(y.canonical.x>>L<<L),G=y.canonical.y-(y.canonical.y>>L<<L),Y=o.Z>>L;o.bQ(T,0,Y,Y,0,0,1),o.L(T,T,[-B*Y,-G*Y,0])}else{if(!r.canonical.isChildOf(y.canonical))continue;{const L=r.canonical.z-y.canonical.z,B=r.canonical.x-(r.canonical.x>>L<<L),G=r.canonical.y-(r.canonical.y>>L<<L),Y=o.Z>>L;o.bQ(T,0,o.Z,o.Z,0,0,1),o.L(T,T,[B*Y,G*Y,0]),o.M(T,T,[1/2**L,1/2**L,0])}}A.terrainRttPosMatrix32f=new Float32Array(T),c[p]=A}return c}_getTerrainCoordsForTileRanges(r,c){const p={};for(const y of this._renderableTilesKeys){const A=this._tiles[y].tileID;if(!this._isWithinTileRanges(A,c))continue;const T=r.clone(),L=o.b2();if(A.canonical.z===r.canonical.z){const B=r.canonical.x-A.canonical.x,G=r.canonical.y-A.canonical.y;o.bQ(L,0,o.Z,o.Z,0,0,1),o.L(L,L,[B*o.Z,G*o.Z,0])}else if(A.canonical.z>r.canonical.z){const B=A.canonical.z-r.canonical.z,G=A.canonical.x-(A.canonical.x>>B<<B),Y=A.canonical.y-(A.canonical.y>>B<<B),nt=r.canonical.x-(A.canonical.x>>B),rt=r.canonical.y-(A.canonical.y>>B),ft=o.Z>>B;o.bQ(L,0,ft,ft,0,0,1),o.L(L,L,[-G*ft+nt*o.Z,-Y*ft+rt*o.Z,0])}else{const B=r.canonical.z-A.canonical.z,G=r.canonical.x-(r.canonical.x>>B<<B),Y=r.canonical.y-(r.canonical.y>>B<<B),nt=(r.canonical.x>>B)-A.canonical.x,rt=(r.canonical.y>>B)-A.canonical.y,ft=o.Z<<B;o.bQ(L,0,ft,ft,0,0,1),o.L(L,L,[G*o.Z+nt*ft,Y*o.Z+rt*ft,0])}T.terrainRttPosMatrix32f=new Float32Array(L),p[y]=T}return p}getSourceTile(r,c){const p=this.sourceCache._source;let y=r.overscaledZ-this.deltaZoom;if(y>p.maxzoom&&(y=p.maxzoom),y<p.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(y).key);let A=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!A||!A.dem)&&c)for(;y>=p.minzoom&&(!A||!A.dem);)A=this.sourceCache.getTileByID(r.scaledTo(y--).key);return A}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,c){return c[r.canonical.z]&&r.canonical.x>=c[r.canonical.z].minTileX&&r.canonical.x<=c[r.canonical.z].maxTileX&&r.canonical.y>=c[r.canonical.z].minTileY&&r.canonical.y<=c[r.canonical.z].maxTileY}}class om{constructor(r,c,p){this._meshCache={},this.painter=r,this.sourceCache=new ya(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,p,y=o.Z){var A;if(!(c>=0&&c<y&&p>=0&&p<y))return 0;const T=this.getTerrainData(r),L=(A=T.tile)===null||A===void 0?void 0:A.dem;if(!L)return 0;const B=o.ch([],[c/y*o.Z,p/y*o.Z],T.u_terrain_matrix),G=[B[0]*L.dim,B[1]*L.dim],Y=Math.floor(G[0]),nt=Math.floor(G[1]),rt=G[0]-Y,ft=G[1]-nt;return L.get(Y,nt)*(1-rt)*(1-ft)+L.get(Y+1,nt)*rt*(1-ft)+L.get(Y,nt+1)*(1-rt)*ft+L.get(Y+1,nt+1)*rt*ft}getElevationForLngLatZoom(r,c){if(!o.ci(c,r.wrap()))return 0;const{tileID:p,mercatorX:y,mercatorY:A}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(p,y%o.Z,A%o.Z,o.Z)}getElevation(r,c,p,y=o.Z){return this.getDEMElevation(r,c,p,y)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const y=this.painter.context,A=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new et(y,A,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new et(y,new o.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ad([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const y=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new et(y,c.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),c.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c+c.tileID.key+r.key;if(p&&!this._demMatrixCache[p]){const y=this.sourceCache.sourceCache._source.maxzoom;let A=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=y?A=r.canonical.z-y:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>A<<A),L=r.canonical.y-(r.canonical.y>>A<<A),B=o.cj(new Float64Array(16),[1/(o.Z<<A),1/(o.Z<<A),0]);o.L(B,B,[T*o.Z,L*o.Z,0]),this._demMatrixCache[r.key]={matrix:B,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,p=c.width/devicePixelRatio,y=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new et(c.context,{width:p,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new et(c.context,{width:p,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,y,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,y))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let A=0,T=0;A<this._coordsTextureSize;A++)for(let L=0;L<this._coordsTextureSize;L++,T+=4)c[T+0]=255&L,c[T+1]=255&A,c[T+2]=L>>8<<4|A>>8,c[T+3]=0;const p=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),y=new et(r,p,r.gl.RGBA,{premultiply:!1});return y.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),p=this.painter.context,y=p.gl,A=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),L=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(A,L-T-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const B=c[0]+(c[2]>>4<<8),G=c[1]+((15&c[2])<<8),Y=this.coordsIndex[255-c[3]],nt=Y&&this.sourceCache.getTileByID(Y);if(!nt)return null;const rt=this._coordsTextureSize,ft=(1<<nt.tileID.canonical.z)*rt;return new o.$((nt.tileID.canonical.x*rt+B)/ft+nt.tileID.wrap,(nt.tileID.canonical.y*rt+G)/ft,this.getElevation(nt.tileID,B,G,rt))}depthAtPoint(r){const c=new Uint8Array(4),p=this.painter.context,y=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(r){var c;const p=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,y=p&&r.canonical.y===0,A=p&&r.canonical.y===(1<<r.canonical.z)-1,T=`m_${y?"n":""}_${A?"s":""}`;if(this._meshCache[T])return this._meshCache[T];const L=this.painter.context,B=new o.ck,G=new o.aK,Y=this.meshSize,nt=o.Z/Y,rt=Y*Y;for(let le=0;le<=Y;le++)for(let ke=0;ke<=Y;ke++)B.emplaceBack(ke*nt,le*nt,0);for(let le=0;le<rt;le+=Y+1)for(let ke=0;ke<Y;ke++)G.emplaceBack(ke+le,Y+ke+le+1,Y+ke+le+2),G.emplaceBack(ke+le,Y+ke+le+2,ke+le+1);const ft=B.length,_t=ft+(Y+1),Ot=(Y+1)*Y,Dt=y?o.b9:0,Ft=y?0:1,Zt=A?o.ba:o.Z,Qt=A?0:1;for(let le=0;le<=Y;le++)B.emplaceBack(le*nt,Dt,Ft);for(let le=0;le<=Y;le++)B.emplaceBack(le*nt,Zt,Qt);for(let le=0;le<Y;le++)G.emplaceBack(Ot+le,_t+le,_t+le+1),G.emplaceBack(Ot+le,_t+le+1,Ot+le+1),G.emplaceBack(0+le,ft+le+1,ft+le),G.emplaceBack(0+le,0+le+1,ft+le+1);const ne=B.length,se=ne+2*(Y+1);for(const le of[0,1])for(let ke=0;ke<=Y;ke++)for(const De of[0,1])B.emplaceBack(le*o.Z,ke*nt,De);for(let le=0;le<2*Y;le+=2)G.emplaceBack(ne+le,ne+le+1,ne+le+3),G.emplaceBack(ne+le,ne+le+3,ne+le+2),G.emplaceBack(se+le,se+le+3,se+le+1),G.emplaceBack(se+le,se+le+2,se+le+3);const fe=new _e(L.createVertexBuffer(B,gl.members),L.createIndexBuffer(G),o.aJ.simpleSegment(0,0,B.length,G.length));return this._meshCache[T]=fe,fe}getMeshFrameDelta(r){return 2*Math.PI*o.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,c){var p;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(p=this.getMinMaxElevation(y).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(r,c){const p=o.$.fromLngLat(r.wrap()),y=(1<<c)*o.Z,A=p.x*y,T=p.y*y,L=Math.floor(A/o.Z),B=Math.floor(T/o.Z);return{tileID:new o.Y(c,0,c,L,B),mercatorX:A,mercatorY:T}}}class Ka{constructor(r,c,p){this._context=r,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new et(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:r,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>r.id!==c),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const nh={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class rh{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new Ka(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(p=>!r._layers[p].isHidden(c)),this._coordsAscending={};for(const p in r.sourceCaches){this._coordsAscending[p]={};const y=r.sourceCaches[p].getVisibleCoordinates(),A=r.sourceCaches[p].getSource(),T=A instanceof ee?A.terrainTileRanges:null;for(const L of y){const B=this.terrain.sourceCache.getTerrainCoords(L,T);for(const G in B)this._coordsAscending[p][G]||(this._coordsAscending[p][G]=[]),this._coordsAscending[p][G].push(B[G])}}this._coordsAscendingStr={};for(const p of r._order){const y=r._layers[p],A=y.source;if(nh[y.type]&&!this._coordsAscendingStr[A]){this._coordsAscendingStr[A]={};for(const T in this._coordsAscending[A])this._coordsAscendingStr[A][T]=this._coordsAscending[A][T].map(L=>L.key).sort().join()}}for(const p of this._renderableTiles)for(const y in this._coordsAscendingStr){const A=this._coordsAscendingStr[y][p.tileID.key];A&&A!==p.rttCoords[y]&&(p.rtt=[])}}renderLayer(r,c){if(r.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),y=r.type,A=this.painter,T=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(nh[y]&&(this._prevType&&nh[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(r.id),!T))return!0;if(nh[this._prevType]||nh[y]&&T){this._prevType=y;const L=this._stacks.length-1,B=this._stacks[L]||[];for(const G of this._renderableTiles){if(this.pool.isFull()&&(Hf(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(G),G.rtt[L]){const nt=this.pool.getObjectForId(G.rtt[L].id);if(nt.stamp===G.rtt[L].stamp){this.pool.useObject(nt);continue}}const Y=this.pool.getOrCreateFreeObject();this.pool.useObject(Y),this.pool.stampObject(Y),G.rtt[L]={id:Y.id,stamp:Y.stamp},A.context.bindFramebuffer.set(Y.fbo.framebuffer),A.context.clear({color:o.b7.transparent,stencil:0}),A.currentStencilSource=void 0;for(let nt=0;nt<B.length;nt++){const rt=A.style._layers[B[nt]],ft=rt.source?this._coordsAscending[rt.source][G.tileID.key]:[G.tileID];A.context.viewport.set([0,0,Y.fbo.width,Y.fbo.height]),A._renderTileClippingMasks(rt,ft,!0),A.renderLayer(A,A.style.sourceCaches[rt.source],rt,ft,p),rt.source&&(G.rttCoords[rt.source]=this._coordsAscendingStr[rt.source][G.tileID.key])}}return Hf(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),nh[y]}return!1}}const Nr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Vi=g,zd={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Yn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Ra={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ih{constructor(r,c,p=!1){this.mousedown=A=>{this.startMove(A,S.mousePos(this.element,A)),S.addEventListener(window,"mousemove",this.mousemove),S.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.move(A,S.mousePos(this.element,A))},this.mouseup=A=>{this._rotatePitchHanlder.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=S.touchPos(this.element,A.targetTouches)[0],this.startMove(A,this._startPos),S.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),S.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=S.touchPos(this.element,A.targetTouches)[0],this.move(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const y=new Yf;this._rotatePitchHanlder=new Yl({clickTolerance:3,move:(A,T)=>{const L=c.getBoundingClientRect(),B=new o.P((L.bottom-L.top)/2,(L.right-L.left)/2);return{bearingDelta:o.cc(new o.P(A.x,T.y),T,B),pitchDelta:p?-.5*(T.y-A.y):void 0}},moveStateManager:y,enable:!0,assignEvents:()=>{}}),this.map=r,S.addEventListener(c,"mousedown",this.mousedown),S.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),S.addEventListener(c,"touchcancel",this.reset)}startMove(r,c){this._rotatePitchHanlder.dragStart(r,c),S.disableDrag()}move(r,c){const p=this.map,{bearingDelta:y,pitchDelta:A}=this._rotatePitchHanlder.dragMove(r,c)||{};y&&p.setBearing(p.getBearing()+y),A&&p.setPitch(p.getPitch()+A)}off(){const r=this.element;S.removeEventListener(r,"mousedown",this.mousedown),S.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),S.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),S.removeEventListener(window,"touchend",this.touchend),S.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){S.enableDrag(),S.removeEventListener(window,"mousemove",this.mousemove),S.removeEventListener(window,"mouseup",this.mouseup),S.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),S.removeEventListener(window,"touchend",this.touchend)}}let gs;function yl(b,r,c,p=!1){if(p||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return b==null?void 0:b.wrap();const y=new o.Q(b.lng,b.lat);if(b=new o.Q(b.lng,b.lat),r){const A=new o.Q(b.lng-360,b.lat),T=new o.Q(b.lng+360,b.lat),L=c.locationToScreenPoint(b).distSqr(r);c.locationToScreenPoint(A).distSqr(r)<L?b=A:c.locationToScreenPoint(T).distSqr(r)<L&&(b=T)}for(;Math.abs(b.lng-c.center.lng)>180;){const A=c.locationToScreenPoint(b);if(A.x>=0&&A.y>=0&&A.x<=c.width&&A.y<=c.height)break;b.lng>c.center.lng?b.lng-=360:b.lng+=360}return b.lng!==y.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(b))?b:y}const oh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function io(b,r,c){const p=b.classList;for(const y in oh)p.remove(`maplibregl-${c}-anchor-${y}`);p.add(`maplibregl-${c}-anchor-${r}`)}class _u extends o.E{constructor(r){if(super(),this._onKeyPress=c=>{const p=c.code,y=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,y=this._element;this._popup&&(p===y||y.contains(p))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=yl(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),S.setTransform(this._element,`${oh[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${y}`),E.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=o.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=S.create("div");const c=S.createNS("http://www.w3.org/2000/svg","svg"),p=41,y=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${y}px`),c.setAttributeNS(null,"viewBox",`0 0 ${y} ${p}`);const A=S.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"stroke","none"),A.setAttributeNS(null,"stroke-width","1"),A.setAttributeNS(null,"fill","none"),A.setAttributeNS(null,"fill-rule","evenodd");const T=S.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const L=S.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");const B=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ft of B){const Zt=S.createNS("http://www.w3.org/2000/svg","ellipse");Zt.setAttributeNS(null,"opacity","0.04"),Zt.setAttributeNS(null,"cx","10.5"),Zt.setAttributeNS(null,"cy","5.80029008"),Zt.setAttributeNS(null,"rx",Ft.rx),Zt.setAttributeNS(null,"ry",Ft.ry),L.appendChild(Zt)}const G=S.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"fill",this._color);const Y=S.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),G.appendChild(Y);const nt=S.createNS("http://www.w3.org/2000/svg","g");nt.setAttributeNS(null,"opacity","0.25"),nt.setAttributeNS(null,"fill","#000000");const rt=S.createNS("http://www.w3.org/2000/svg","path");rt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),nt.appendChild(rt);const ft=S.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ft.setAttributeNS(null,"fill","#FFFFFF");const _t=S.createNS("http://www.w3.org/2000/svg","g");_t.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ot=S.createNS("http://www.w3.org/2000/svg","circle");Ot.setAttributeNS(null,"fill","#000000"),Ot.setAttributeNS(null,"opacity","0.25"),Ot.setAttributeNS(null,"cx","5.5"),Ot.setAttributeNS(null,"cy","5.5"),Ot.setAttributeNS(null,"r","5.4999962");const Dt=S.createNS("http://www.w3.org/2000/svg","circle");Dt.setAttributeNS(null,"fill","#FFFFFF"),Dt.setAttributeNS(null,"cx","5.5"),Dt.setAttributeNS(null,"cy","5.5"),Dt.setAttributeNS(null,"r","5.4999962"),_t.appendChild(Ot),_t.appendChild(Dt),T.appendChild(L),T.appendChild(G),T.appendChild(nt),T.appendChild(ft),T.appendChild(_t),c.appendChild(T),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),io(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),S.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=o.Q.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const y=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,p;if(!(!((c=this._map)===null||c===void 0)&&c.terrain)){const nt=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==nt&&(this._element.style.opacity=nt))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const y=this._map,A=y.terrain.depthAtPoint(this._pos),T=y.terrain.getElevationForLngLatZoom(this._lngLat,y.transform.tileZoom);if(y.transform.lngLatToCameraDepth(this._lngLat,T)-A<.006)return void(this._element.style.opacity=this._opacity);const L=-this._offset.y/y.transform.pixelsPerMeter,B=Math.sin(y.getPitch()*Math.PI/180)*L,G=y.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),Y=y.transform.lngLatToCameraDepth(this._lngLat,T+B)-G>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&Y&&this._popup.remove(),this._element.style.opacity=Y?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=o.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return(this._opacity===void 0||r===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const Jf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ah=0,bu=!1;const Hh={maxWidth:100,unit:"metric"};function Fd(b,r,c){const p=c&&c.maxWidth||100,y=b._container.clientHeight/2,A=b._container.clientWidth/2,T=b.unproject([A-p/2,y]),L=b.unproject([A+p/2,y]),B=Math.round(b.project(L).x-b.project(T).x),G=Math.min(p,B,b._container.clientWidth),Y=T.distanceTo(L);if(c&&c.unit==="imperial"){const nt=3.2808*Y;nt>5280?js(r,G,nt/5280,b._getUIString("ScaleControl.Miles")):js(r,G,nt,b._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?js(r,G,Y/1852,b._getUIString("ScaleControl.NauticalMiles")):Y>=1e3?js(r,G,Y/1e3,b._getUIString("ScaleControl.Kilometers")):js(r,G,Y,b._getUIString("ScaleControl.Meters"))}function js(b,r,c,p){const y=function(A){const T=Math.pow(10,`${Math.floor(A)}`.length-1);let L=A/T;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(B){const G=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*G)/G}(L),T*L}(c);b.style.width=r*(y/c)+"px",b.innerHTML=`${y}&nbsp;${p}`}const Bd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Nd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function jd(b){if(b){if(typeof b=="number"){const r=Math.round(Math.abs(b)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,b),"top-left":new o.P(r,r),"top-right":new o.P(-r,r),bottom:new o.P(0,-b),"bottom-left":new o.P(r,-r),"bottom-right":new o.P(-r,-r),left:new o.P(b,0),right:new o.P(-b,0)}}if(b instanceof o.P||Array.isArray(b)){const r=o.P.convert(b);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:o.P.convert(b.center||[0,0]),top:o.P.convert(b.top||[0,0]),"top-left":o.P.convert(b["top-left"]||[0,0]),"top-right":o.P.convert(b["top-right"]||[0,0]),bottom:o.P.convert(b.bottom||[0,0]),"bottom-left":o.P.convert(b["bottom-left"]||[0,0]),"bottom-right":o.P.convert(b["bottom-right"]||[0,0]),left:o.P.convert(b.left||[0,0]),right:o.P.convert(b.right||[0,0])}}return jd(new o.P(0,0))}const xu=g;l.AJAXError=o.co,l.Event=o.l,l.Evented=o.E,l.LngLat=o.Q,l.MercatorCoordinate=o.$,l.Point=o.P,l.addProtocol=o.cp,l.config=o.a,l.removeProtocol=o.cq,l.AttributionControl=lr,l.BoxZoomHandler=Qp,l.CanvasSource=Ut,l.CooperativeGesturesHandler=Od,l.DoubleClickZoomHandler=im,l.DragPanHandler=li,l.DragRotateHandler=zc,l.EdgeInsets=Mn,l.FullscreenControl=class extends o.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c==null?void 0:c.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){S.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=S.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);S.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=jt,l.GeolocateControl=class extends o.E{constructor(b){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new o.Q(r.coords.longitude,r.coords.latitude),p=r.coords.accuracy,y=this._map.getBearing(),A=o.e({bearing:y},this.options.fitBoundsOptions),T=H.fromLngLat(c,p);this._map.fitBounds(T,A,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new o.Q(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&bu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=S.create("button","maplibregl-ctrl-geolocate",this._container),S.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=S.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new _u({element:this._dotElement}),this._circleElement=S.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new _u({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},Jf,b)}onAdd(b){return this._map=b,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(r=!1){if(gs!==void 0&&!r)return gs;if(window.navigator.permissions===void 0)return gs=!!window.navigator.geolocation,gs;try{gs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{gs=!!window.navigator.geolocation}return gs})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),S.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ah=0,bu=!1}_isOutOfMapMaxBounds(b){const r=this._map.getMaxBounds(),c=b.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const b=this._map.getBounds(),r=b.getSouthEast(),c=b.getNorthEast(),p=r.distanceTo(c),y=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ah--,bu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ah++,ah>1?(b={maximumAge:6e5,timeout:0},bu=!0):(b=this.options.positionOptions,bu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var b;const r=(b=this._map.getProjection())===null||b===void 0?void 0:b.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var b;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((b=this._map.getProjection())===null||b===void 0?void 0:b.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(b){return this._map=b,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=S.create("button","maplibregl-ctrl-globe",this._container),S.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){S.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=Zf,l.ImageSource=ee,l.KeyboardHandler=Ld,l.LngLatBounds=H,l.LogoControl=eh,l.Map=class extends ga{constructor(b){var r,c;o.cl.mark(o.cm.create);const p=Object.assign(Object.assign(Object.assign({},zd),b),{canvasContextAttributes:Object.assign(Object.assign({},zd.canvasContextAttributes),b.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const y=new Rr,A=new nu;if(p.minZoom!==void 0&&y.setMinZoom(p.minZoom),p.maxZoom!==void 0&&y.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&y.setMinPitch(p.minPitch),p.maxPitch!==void 0&&y.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&y.setRenderWorldCopies(p.renderWorldCopies),super(y,A,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new vu,this._controls=[],this._mapId=o.a4(),this._contextLost=L=>{L.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:L}))},this._contextRestored=L=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:L}))},this._onMapScroll=L=>{if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Nr),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this.transformCameraUpdate=p.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=$.addThrottleControl(()=>this.isMoving()),this._requestManager=new K(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let L=!1;const B=$f(G=>{this._trackResize&&!this._removed&&(this.resize(G),this.redraw())},50);this._resizeObserver=new ResizeObserver(G=>{L?B(G):L=!0}),this._resizeObserver.observe(this._container)}this.handlers=new na(this,p),this._hash=p.hash&&new Zf(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,o.e({},p.fitBoundsOptions,{duration:0}))));const T=typeof p.style=="string"||((c=(r=p.style)===null||r===void 0?void 0:r.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,T),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new lr(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new eh,p.logoPosition),this.on("style.load",()=>{if(T||this._resizeTransform(),this.transform.unmodified){const L=o.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(L)}}),this.on("data",L=>{this._update(L.dataType==="style"),this.fire(new o.l(`${L.dataType}data`,L))}),this.on("dataloading",L=>{this.fire(new o.l(`${L.dataType}dataloading`,L))}),this.on("dataabort",L=>{this.fire(new o.l("sourcedataabort",L))})}_getMapId(){return this._mapId}addControl(b,r){if(r===void 0&&(r=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=b.onAdd(this);this._controls.push(b);const p=this._controlPositions[r];return r.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(b);return r>-1&&this._controls.splice(r,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}calculateCameraOptionsFromTo(b,r,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,r,c,p)}resize(b,r=!0){const[c,p]=this._containerDimensions(),y=this._getClampedPixelRatio(c,p);if(this._resizeCanvas(c,p,y),this.painter.resize(c,p,y),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const L=this._getClampedPixelRatio(c,p);this._resizeCanvas(c,p,L),this.painter.resize(c,p,L)}this._resizeTransform(r);const A=!this._moving;return A&&(this.stop(),this.fire(new o.l("movestart",b)).fire(new o.l("move",b))),this.fire(new o.l("resize",b)),A&&this.fire(new o.l("moveend",b)),this}_resizeTransform(b=!0){var r;const[c,p]=this._containerDimensions();this.transform.resize(c,p,b),(r=this._requestedCameraState)===null||r===void 0||r.resize(c,p,b)}_getClampedPixelRatio(b,r){const{0:c,1:p}=this._maxCanvasSize,y=this.getPixelRatio(),A=b*y,T=r*y;return Math.min(A>c?c/A:1,T>p?p/T:1)*y}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(H.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.setMinZoom(b),this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.setMaxZoom(b),this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.setMinPitch(b),this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(b>=this.transform.minPitch)return this.transform.setMaxPitch(b),this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.setRenderWorldCopies(b),this._update()}project(b){return this.transform.locationToScreenPoint(o.Q.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.screenPointToLocation(o.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,r,c){if(b==="mouseenter"||b==="mouseover"){let p=!1;return{layers:r,listener:c,delegates:{mousemove:A=>{const T=r.filter(B=>this.getLayer(B)),L=T.length!==0?this.queryRenderedFeatures(A.point,{layers:T}):[];L.length?p||(p=!0,c.call(this,new ka(b,this,A.originalEvent,{features:L}))):p=!1},mouseout:()=>{p=!1}}}}if(b==="mouseleave"||b==="mouseout"){let p=!1;return{layers:r,listener:c,delegates:{mousemove:T=>{const L=r.filter(B=>this.getLayer(B));(L.length!==0?this.queryRenderedFeatures(T.point,{layers:L}):[]).length?p=!0:p&&(p=!1,c.call(this,new ka(b,this,T.originalEvent)))},mouseout:T=>{p&&(p=!1,c.call(this,new ka(b,this,T.originalEvent)))}}}}{const p=y=>{const A=r.filter(L=>this.getLayer(L)),T=A.length!==0?this.queryRenderedFeatures(y.point,{layers:A}):[];T.length&&(y.features=T,c.call(this,y),delete y.features)};return{layers:r,listener:c,delegates:{[b]:p}}}}_saveDelegatedListener(b,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(r)}_removeDelegatedListener(b,r,c){if(!this._delegatedListeners||!this._delegatedListeners[b])return;const p=this._delegatedListeners[b];for(let y=0;y<p.length;y++){const A=p[y];if(A.listener===c&&A.layers.length===r.length&&A.layers.every(T=>r.includes(T))){for(const T in A.delegates)this.off(T,A.delegates[T]);return void p.splice(y,1)}}}on(b,r,c){if(c===void 0)return super.on(b,r);const p=typeof r=="string"?[r]:r,y=this._createDelegatedListener(b,p,c);this._saveDelegatedListener(b,y);for(const A in y.delegates)this.on(A,y.delegates[A]);return{unsubscribe:()=>{this._removeDelegatedListener(b,p,c)}}}once(b,r,c){if(c===void 0)return super.once(b,r);const p=typeof r=="string"?[r]:r,y=this._createDelegatedListener(b,p,c);for(const A in y.delegates){const T=y.delegates[A];y.delegates[A]=(...L)=>{this._removeDelegatedListener(b,p,c),T(...L)}}this._saveDelegatedListener(b,y);for(const A in y.delegates)this.once(A,y.delegates[A]);return this}off(b,r,c){return c===void 0?super.off(b,r):(this._removeDelegatedListener(b,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(b,r){if(!this.style)return[];let c;const p=b instanceof o.P||Array.isArray(b),y=p?b:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(p?{}:b)||{},y instanceof o.P||typeof y[0]=="number")c=[o.P.convert(y)];else{const A=o.P.convert(y[0]),T=o.P.convert(y[1]);c=[A,new o.P(T.x,A.y),T,new o.P(A.x,T.y),A]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(b,r){return this.style.querySourceFeatures(b,r)}setStyle(b,r){return(r=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(b,r))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const r=this._locale[b];if(r==null)throw new Error(`Missing UI string '${b}'`);return r}_updateStyle(b,r){var c,p;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(b,r));const y=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new Ga(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,r,y):this.style.loadJSON(b,r,y),this):((p=(c=this.style)===null||c===void 0?void 0:c.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ga(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,r){if(typeof b=="string"){const c=this._requestManager.transformRequest(b,"Style");o.j(c,new AbortController).then(p=>{this._updateDiff(p.data,r)}).catch(p=>{p&&this.fire(new o.k(p))})}else typeof b=="object"&&this._updateDiff(b,r)}_updateDiff(b,r){try{this.style.setState(b,r)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(b,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(b,r){return this._lazyInitEmptyStyle(),this.style.addSource(b,r),this._update(!0)}isSourceLoaded(b){const r=this.style&&this.style.sourceCaches[b];if(r!==void 0)return r.loaded();this.fire(new o.k(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const r=this.style.sourceCaches[b.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===b.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new om(this.painter,r,b),this.painter.renderToTexture=new rh(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var p;c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==b.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=c.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:b})),this}getTerrain(){var b,r;return(r=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const r in b){const c=b[r]._tiles;for(const p in c){const y=c[p];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}setSourceTileLodParams(b,r,c){if(c){const p=this.getSource(c);if(!p)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);p.calculateTileZoom=vt(Math.max(1,b),Math.max(1,r))}else for(const p in this.style.sourceCaches)this.style.sourceCaches[p].getSource().calculateTileZoom=vt(Math.max(1,b),Math.max(1,r));return this._update(!0),this}addImage(b,r,c={}){const{pixelRatio:p=1,sdf:y=!1,stretchX:A,stretchY:T,content:L,textFitWidth:B,textFitHeight:G}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||o.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Y,height:nt,data:rt}=r,ft=r;return this.style.addImage(b,{data:new o.R({width:Y,height:nt},new Uint8Array(rt)),pixelRatio:p,stretchX:A,stretchY:T,content:L,textFitWidth:B,textFitHeight:G,sdf:y,version:0,userImage:ft}),ft.onAdd&&ft.onAdd(this,b),this}}{const{width:Y,height:nt,data:rt}=E.getImageData(r);this.style.addImage(b,{data:new o.R({width:Y,height:nt},rt),pixelRatio:p,stretchX:A,stretchY:T,content:L,textFitWidth:B,textFitHeight:G,sdf:y,version:0})}}updateImage(b,r){const c=this.style.getImage(b);if(!c)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=r instanceof HTMLImageElement||o.b(r)?E.getImageData(r):r,{width:y,height:A,data:T}=p;if(y===void 0||A===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==c.data.width||A!==c.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const L=!(r instanceof HTMLImageElement||o.b(r));return c.data.replace(T,L),this.style.updateImage(b,c),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return $.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,r){return this._lazyInitEmptyStyle(),this.style.addLayer(b,r),this._update(!0)}moveLayer(b,r){return this.style.moveLayer(b,r),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,r,c){return this.style.setLayerZoomRange(b,r,c),this._update(!0)}setFilter(b,r,c={}){return this.style.setFilter(b,r,c),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,r,c,p={}){return this.style.setPaintProperty(b,r,c,p),this._update(!0)}getPaintProperty(b,r){return this.style.getPaintProperty(b,r)}setLayoutProperty(b,r,c,p={}){return this.style.setLayoutProperty(b,r,c,p),this._update(!0)}getLayoutProperty(b,r){return this.style.getLayoutProperty(b,r)}setGlyphs(b,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,r,c,p=>{p||this._update(!0)}),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,r,c=>{c||this._update(!0)}),this}setLight(b,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(b,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(b,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,r){return this.style.setFeatureState(b,r),this._update()}removeFeatureState(b,r){return this.style.removeFeatureState(b,r),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,r=0;return this._container&&(b=this._container.clientWidth||400,r=this._container.clientHeight||300),[b,r]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const r=this._canvasContainer=S.create("div","maplibregl-canvas-container",b);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=S.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const y=this._controlContainer=S.create("div","maplibregl-control-container",b),A=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{A[T]=S.create("div",`maplibregl-ctrl-${T} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,r,c){this._canvas.width=Math.floor(c*b),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const b=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{r={requestedAttributes:b},p&&(r.statusMessage=p.statusMessage,r.type=p.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,b):this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b),!c){const p="Failed to initialize WebGL";throw r?(r.message=p,new Error(JSON.stringify(r))):new Error(p)}this.painter=new Yp(c,this.transform),k.testSupport(c)}migrateProjection(b,r){super.migrateProjection(b,r),this.painter.transform=b,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){var r,c,p,y,A;const T=this._idleTriggered?this._fadeDuration:0,L=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let B=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const nt=this.transform.zoom,rt=E.now();this.style.zoomHistory.update(nt,rt);const ft=new o.C(nt,{now:rt,fadeDuration:T,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),_t=ft.crossFadingFactor();_t===1&&_t===this._crossFadingFactor||(B=!0,this._crossFadingFactor=_t),this.style.update(ft)}const G=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==L;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((y=this.style.projection)===null||y===void 0?void 0:y.transitionState,(A=this.style.projection)===null||A===void 0?void 0:A.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||G)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,T,this._crossSourceCollisions,G),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cl.mark(o.cm.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||B)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const Y=this._sourcesDirty||this._styleDirty||this._placementDirty;return Y||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||Y||(this._fullyLoaded=!0,o.cl.mark(o.cm.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),S.remove(this._canvasContainer),S.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cl.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,E.frame(this._frameRequest,b=>{o.cl.frame(b),this._frameRequest=null;try{this._render(b)}catch(r){if(!o.cn(r)&&!function(c){return c.message===Wl}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return Vi}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(b){return this._lazyInitEmptyStyle(),this.style.setProjection(b),this._update(!0)}},l.MapMouseEvent=ka,l.MapTouchEvent=ma,l.MapWheelEvent=Go,l.Marker=_u,l.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),p=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);r.title=p,r.setAttribute("aria-label",p)},this.options=o.e({},Ra,b),this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),S.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),S.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=S.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ih(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){S.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,r){const c=S.create("button",b,this._container);return c.type="button",c.addEventListener("click",r),c}},l.Popup=class extends o.E{constructor(b){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&S.remove(this._content),this._container&&(S.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=S.create("div","maplibregl-popup",this._map.getContainer()),this._tip=S.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=yl(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const c=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const y=jd(this.options.offset);if(!p){const T=this._container.offsetWidth,L=this._container.offsetHeight;let B;B=c.y+y.bottom.y<L?["top"]:c.y>this._map.transform.height-L?["bottom"]:[],c.x<T/2?B.push("left"):c.x>this._map.transform.width-T/2&&B.push("right"),p=B.length===0?"bottom":B.join("-")}let A=c.add(y[p]);this.options.subpixelPositioning||(A=A.round()),S.setTransform(this._container,`${oh[p]} translate(${A.x}px,${A.y}px)`),io(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Bd),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=o.Q.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const r=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=b;p=c.firstChild,p;)r.appendChild(p);return this.setDOMContent(r)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=S.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=S.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(Nd);b&&b.focus()}},l.RasterDEMTileSource=yt,l.RasterTileSource=gt,l.ScaleControl=class{constructor(b){this._onMove=()=>{Fd(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Fd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Hh),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){S.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=Rd,l.Style=Ga,l.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=S.create("button","maplibregl-ctrl-terrain",this._container),S.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){S.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=em,l.TwoFingersTouchRotateHandler=La,l.TwoFingersTouchZoomHandler=kd,l.TwoFingersTouchZoomRotateHandler=Dd,l.VectorTileSource=Pt,l.VideoSource=ue,l.addSourceType=(b,r)=>o._(void 0,void 0,void 0,function*(){if(je(b))throw new Error(`A source type called "${b}" already exists.`);((c,p)=>{Ie[c]=p})(b,r)}),l.clearPrewarmedResources=function(){const b=$e;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(Jt),$e=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=qu,l.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return wn().getRTLTextPluginStatus()},l.getVersion=function(){return xu},l.getWorkerCount=function(){return Gt.workerCount},l.getWorkerUrl=function(){return o.a.WORKER_URL},l.importScriptInWorkers=function(b){return Me().broadcast("IS",b)},l.prewarm=function(){nn().acquire(Jt)},l.setMaxParallelImageRequests=function(b){o.a.MAX_PARALLEL_IMAGE_REQUESTS=b},l.setRTLTextPlugin=function(b,r){return wn().setRTLTextPlugin(b,r)},l.setWorkerCount=function(b){Gt.workerCount=b},l.setWorkerUrl=function(b){o.a.WORKER_URL=b}});var d=n;return d})})(jT);var ky=jT.exports;const bw=Wp(ky),qp="event";function kN(t){Vu(t,qp,ls({items:[],current:{}}))}_d(qp,kN);async function LN(t,e){Bo(t,qp).items.unshift(e)}async function RN(t,e){const n=Bo(t,qp);if(!n||!n.items||n.items.length<1)return;const s=n.items.findIndex(d=>d.id===e.id);s<0||n.items.splice(s,1)}function DN(t,e){return(Bo(t,qp).current||{})[e]}function YI(t,e,n){const a=Bo(t,qp);a.current[e]=n}const ON=rr({__name:"ActionControl",props:{...So},setup(t){const e=t,{callMap:n,mapId:a,moduleContainerProps:s}=Ai(e),d={},l=Bo(a.value,qp),o=bn(()=>l.items);Xo(o,_=>{g(_)},{deep:!0});function g(_){const I=Qy.groupBy(_,C=>C.event_map_type);n(C=>{const E=[];d[C.id]||(d[C.id]={});for(const S in I)if(E.push(S),Object.prototype.hasOwnProperty.call(I,S)){const k=I[S],D=d[C.id][S],N=k[0];if(D&&D.id===N.id)return;D&&D.removeFromMap(C),d[C.id][S]=N,N&&N.addToMap(C),YI(a.value,S,N)}for(const S in d[C.id])if(Object.prototype.hasOwnProperty.call(d[C.id],S)){const k=d[C.id][S];!E.includes(S)&&k&&(k.removeFromMap(C),YI(a.value,S,void 0),d[C.id][S]=void 0)}})}return(_,I)=>(St(),tn(Qo,No(Mo(ct(s))),null,16))}}),zN=t=>(_c("data-v-23125816"),t=t(),bc(),t),FN={key:0,class:""},BN=zN(()=>zt("div",{class:"not-support-map"},[zt("p",{class:""}," Trình duyệt của bạn không hỗ trợ hiển thị bản đồ, vui lòng đổi trình duyệt hoặc cập nhật bản mới để xem. ")],-1)),NN=[BN],jN=["mapId"],VN={class:"map-viewer"},UN=["id"],HN=["id"],GN=["id"],$N=["id"],ZN=["id"],WN=rr({__name:"Map",props:{mapboxAccessToken:{type:String,default:""},initOptions:{type:Object,default:()=>({attributionControl:!1,zoomControl:!1})},dragId:{type:String}},emits:["map-loaded","map-destroy"],setup(t,{emit:e}){if(!bw)throw new Error("mapboxgl is not installed.");const n=sT({mobile:0,tablet:640,laptop:1024,desktop:1280}),a={center:[105.19084739818732,15.827971829957548],zoom:5.297175623863693,maxZoom:22},s=t,d=e;function l(){if(window.WebGLRenderingContext){const F=document.createElement("canvas");try{const j=F.getContext("webgl2")||F.getContext("webgl");if(j&&typeof j.getParameter=="function")return!0}catch{}return!1}return!1}const o=gn(),g=gn(l()),_=gn(!1);let I;const C=gn(ju());bn(()=>aF[C.value]),mo(()=>{const F=Object.assign({},a,s.initOptions);I=new bw.Map({container:o.value,style:{version:8,metadata:{},sources:{},sprite:"https://tiles.eofactory.ai/styles/basic/sprite",glyphs:"https://tiles.eofactory.ai/fonts/{fontstack}/{range}.pbf",layers:[]},...F}),I.id=C.value,Af.initMap(C.value,I),I.once("load",()=>{_.value=!0,d("map-loaded",I)})}),yd(()=>{I&&(I.remove(),d("map-destroy",I)),I=void 0,Af.removeMap(C.value)});const E=bn(()=>`map-draggable-${C.value}`),S=bn(()=>`bottom-right-${C.value}`),k=bn(()=>`bottom-left-${C.value}`),D=bn(()=>`top-right-${C.value}`),N=bn(()=>`top-left-${C.value}`);xf("$map.dragId",s.dragId||E.value),xf("$map.id",C.value);const U=n.smallerOrEqual("tablet");return(F,j)=>g.value?(St(),pe("div",{key:1,class:Li(["map-container",{"map-mobile-container":ct(U)}]),mapId:C.value},[zt("div",VN,[zt("div",{ref_key:"mapContainer",ref:o,class:"map-content",id:C.value},null,8,UN),s.dragId?Cn("",!0):(St(),pe(mr,{key:0},[zt("div",{class:"right-bottom-container",id:S.value},null,8,HN),zt("div",{class:"left-bottom-container",id:k.value},null,8,GN),zt("div",{class:"right-top-container",id:D.value},null,8,$N),zt("div",{class:"left-top-container",id:N.value},null,8,ZN),te(ct(wF),{class:"drag-container","container-id":E.value},null,8,["container-id"])],64)),_.value?qn(F.$slots,"default",{key:1},void 0,!0):Cn("",!0),_.value?(St(),tn(ON,{key:2})):Cn("",!0)])],10,jN)):(St(),pe("div",FN,NN))}}),qN=Vn(WN,[["__scopeId","data-v-23125816"]]),hd="crs",XI=[{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"},{name:"VN-2000",epsg:"4756",unit:"degree",proj4js:"+proj=longlat +ellps=WGS84 +towgs84=-191.90441429,-39.30318279,-111.45032835,-0.00928836,0.01975479,-0.00427372,0.252906278 +no_defs +type=crs"}];function KN(t){Vu(t,hd,ls({crs:"4326",items:XI.slice(),item:XI[0]}))}_d(hd,KN);async function YN(t,e){const n=Bo(t,hd);n.items=e}const XN=t=>Bo(t,hd).items,UT=t=>Bo(t,hd).item,QN=t=>Bo(t,hd).crs;function JN(t,e){Bo(t,hd).crs=e,Bo(t,hd).item=Bo(t,hd).items.find(n=>n.epsg==e)}const T2=Object.freeze(Object.defineProperty({__proto__:null,getCrs:QN,getCrsItem:UT,getCrsItems:XN,setCrs:JN,setCrsItems:YN},Symbol.toStringTag,{value:"Module"}));function t9(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var Vp=1,Up=2,ug=3,e9=4,xw=5,QI=6378137,n9=6356752314e-3,JI=.0066943799901413165,ly=484813681109536e-20,Pn=Math.PI/2,r9=.16666666666666666,i9=.04722222222222222,o9=.022156084656084655,Hn=1e-10,os=.017453292519943295,_h=57.29577951308232,Ei=Math.PI/4,Ly=Math.PI*2,Yo=3.14159265359,Tl={};Tl.greenwich=0;Tl.lisbon=-9.131906111111;Tl.paris=2.337229166667;Tl.bogota=-74.080916666667;Tl.madrid=-3.687938888889;Tl.rome=12.452333333333;Tl.bern=7.439583333333;Tl.jakarta=106.807719444444;Tl.ferro=-17.666666666667;Tl.brussels=4.367975;Tl.stockholm=18.058277777778;Tl.athens=23.7163375;Tl.oslo=10.722916666667;const a9={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var tM=/[\s_\-\/\(\)]/g;function kf(t,e){if(t[e])return t[e];for(var n=Object.keys(t),a=e.toLowerCase().replace(tM,""),s=-1,d,l;++s<n.length;)if(d=n[s],l=d.toLowerCase().replace(tM,""),l===a)return t[d]}function Aw(t){var e={},n=t.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,g){var _=g.split("=");return _.push(!0),o[_[0].toLowerCase()]=_[1],o},{}),a,s,d,l={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*os},lat_1:function(o){e.lat1=o*os},lat_2:function(o){e.lat2=o*os},lat_ts:function(o){e.lat_ts=o*os},lon_0:function(o){e.long0=o*os},lon_1:function(o){e.long1=o*os},lon_2:function(o){e.long2=o*os},alpha:function(o){e.alpha=parseFloat(o)*os},gamma:function(o){e.rectified_grid_angle=parseFloat(o)},lonc:function(o){e.longc=o*os},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(g){return parseFloat(g)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var g=kf(a9,o);g&&(e.to_meter=g.to_meter)},from_greenwich:function(o){e.from_greenwich=o*os},pm:function(o){var g=kf(Tl,o);e.from_greenwich=(g||parseFloat(o))*os},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var g="ewnsud";o.length===3&&g.indexOf(o.substr(0,1))!==-1&&g.indexOf(o.substr(1,1))!==-1&&g.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0}};for(a in n)s=n[a],a in l?(d=l[a],typeof d=="function"?d(s):e[d]=s):e[a]=s;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Ry=1,HT=2,GT=3,I1=4,$T=5,P2=-1,s9=/\s/,l9=/[A-Za-z]/,c9=/[A-Za-z84_]/,Tb=/[,\]]/,ZT=/[\d\.E\-\+]/;function xd(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Ry}xd.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==I1)for(;s9.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Ry:return this.neutral(t);case HT:return this.keyword(t);case I1:return this.quoted(t);case $T:return this.afterquote(t);case GT:return this.number(t);case P2:return}};xd.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=I1;return}if(Tb.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};xd.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Ry;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Ry,this.currentObject=this.stack.pop(),this.currentObject||(this.state=P2);return}};xd.prototype.number=function(t){if(ZT.test(t)){this.word+=t;return}if(Tb.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};xd.prototype.quoted=function(t){if(t==='"'){this.state=$T;return}this.word+=t};xd.prototype.keyword=function(t){if(c9.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Ry;return}if(Tb.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};xd.prototype.neutral=function(t){if(l9.test(t)){this.word=t,this.state=HT;return}if(t==='"'){this.word="",this.state=I1;return}if(ZT.test(t)){this.word=t,this.state=GT;return}if(Tb.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};xd.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===P2)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function u9(t){var e=new xd(t);return e.output()}function eM(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var a=e?{}:t,s=n.reduce(function(d,l){return Zm(l,d),d},a);e&&(t[e]=s)}function Zm(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Zm(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var a;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Zm(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Zm(t[3],e[n]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],eM(e,n,t);return;default:for(a=-1;++a<t.length;)if(!Array.isArray(t[a]))return Zm(t,e[n]);return eM(e,n,t)}}var h9=.017453292519943295;function d9(t,e){var n=e[0],a=e[1];!(n in t)&&a in t&&(t[n]=t[a],e.length===3&&(t[n]=e[2](t[n])))}function mh(t){return t*h9}function f9(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,a=t.AXIS.length;n<a;++n){var s=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?e+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?e+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?e+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var d=t.GEOGCS;t.type==="GEOGCS"&&(d=t),d&&(d.DATUM?t.datumCode=d.DATUM.name.toLowerCase():t.datumCode=d.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),d.DATUM&&d.DATUM.SPHEROID&&(t.ellps=d.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=d.DATUM.SPHEROID.a,t.rf=parseFloat(d.DATUM.SPHEROID.rf,10)),d.DATUM&&d.DATUM.TOWGS84&&(t.datum_params=d.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function l(_){var I=t.to_meter||1;return _*I}var o=function(_){return d9(t,_)},g=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",mh],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",mh],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",mh],["lat0","latitude_of_origin",mh],["lat0","standard_parallel_1",mh],["lat1","standard_parallel_1",mh],["lat2","standard_parallel_2",mh],["azimuth","Azimuth"],["alpha","azimuth",mh],["srsCode","name"]];g.forEach(o),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=mh(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=mh(t.lat0>0?90:-90))}function WT(t){var e=u9(t),n=e.shift(),a=e.shift();e.unshift(["name",a]),e.unshift(["type",n]);var s={};return Zm(e,s),f9(s),s}function Qs(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?Qs[t]=Aw(arguments[1]):Qs[t]=WT(arguments[1]):Qs[t]=n}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(a){Array.isArray(a)?Qs.apply(e,a):Qs(a)});if(typeof t=="string"){if(t in Qs)return Qs[t]}else"EPSG"in t?Qs["EPSG:"+t.EPSG]=t:"ESRI"in t?Qs["ESRI:"+t.ESRI]=t:"IAU2000"in t?Qs["IAU2000:"+t.IAU2000]=t:console.log(t);return}}t9(Qs);function p9(t){return typeof t=="string"}function m9(t){return t in Qs}var g9=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function y9(t){return g9.some(function(e){return t.indexOf(e)>-1})}var v9=["3857","900913","3785","102113"];function _9(t){var e=kf(t,"authority");if(e){var n=kf(e,"epsg");return n&&v9.indexOf(n)>-1}}function b9(t){var e=kf(t,"extension");if(e)return kf(e,"proj4")}function x9(t){return t[0]==="+"}function A9(t){if(p9(t)){if(m9(t))return Qs[t];if(y9(t)){var e=WT(t);if(_9(e))return Qs["EPSG:3857"];var n=b9(e);return n?Aw(n):e}if(x9(t))return Aw(t)}else return t}function nM(t,e){t=t||{};var n,a;if(!e)return t;for(a in e)n=e[a],n!==void 0&&(t[a]=n);return t}function Ch(t,e,n){var a=t*e;return n/Math.sqrt(1-a*a)}function tv(t){return t<0?-1:1}function Qn(t){return Math.abs(t)<=Yo?t:t-tv(t)*Ly}function Fu(t,e,n){var a=t*n,s=.5*t;return a=Math.pow((1-a)/(1+a),s),Math.tan(.5*(Pn-e))/a}function Dy(t,e){for(var n=.5*t,a,s,d=Pn-2*Math.atan(e),l=0;l<=15;l++)if(a=t*Math.sin(d),s=Pn-2*Math.atan(e*Math.pow((1-a)/(1+a),n))-d,d+=s,Math.abs(s)<=1e-10)return d;return-9999}function w9(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ch(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function C9(t){var e=t.x,n=t.y;if(n*_h>90&&n*_h<-90&&e*_h>180&&e*_h<-180)return null;var a,s;if(Math.abs(Math.abs(n)-Pn)<=Hn)return null;if(this.sphere)a=this.x0+this.a*this.k0*Qn(e-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(Ei+.5*n));else{var d=Math.sin(n),l=Fu(this.e,n,d);a=this.x0+this.a*this.k0*Qn(e-this.long0),s=this.y0-this.a*this.k0*Math.log(l)}return t.x=a,t.y=s,t}function I9(t){var e=t.x-this.x0,n=t.y-this.y0,a,s;if(this.sphere)s=Pn-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var d=Math.exp(-n/(this.a*this.k0));if(s=Dy(this.e,d),s===-9999)return null}return a=Qn(this.long0+e/(this.a*this.k0)),t.x=a,t.y=s,t}var M9=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const S9={init:w9,forward:C9,inverse:I9,names:M9};function E9(){}function rM(t){return t}var T9=["longlat","identity"];const P9={init:E9,forward:rM,inverse:rM,names:T9};var k9=[S9,P9],X_={},M1=[];function qT(t,e){var n=M1.length;return t.names?(M1[n]=t,t.names.forEach(function(a){X_[a.toLowerCase()]=n}),this):(console.log(e),!0)}function L9(t){if(!t)return!1;var e=t.toLowerCase();if(typeof X_[e]<"u"&&M1[X_[e]])return M1[X_[e]]}function R9(){k9.forEach(qT)}const D9={start:R9,add:qT,get:L9};var Lr={};Lr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Lr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Lr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Lr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Lr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Lr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Lr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Lr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Lr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Lr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Lr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Lr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Lr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Lr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Lr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Lr.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Lr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Lr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Lr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Lr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Lr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Lr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Lr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Lr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Lr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Lr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Lr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Lr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Lr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Lr.hough={a:6378270,rf:297,ellipseName:"Hough"};Lr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Lr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Lr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Lr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Lr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Lr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Lr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Lr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Lr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Lr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Lr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Lr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var O9=Lr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Lr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function z9(t,e,n,a){var s=t*t,d=e*e,l=(s-d)/s,o=0;a?(t*=1-l*(r9+l*(i9+l*o9)),s=t*t,l=0):o=Math.sqrt(l);var g=(s-d)/d;return{es:l,e:o,ep2:g}}function F9(t,e,n,a,s){if(!t){var d=kf(Lr,a);d||(d=O9),t=d.a,e=d.b,n=d.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<Hn)&&(s=!0,e=t),{a:t,b:e,rf:n,sphere:s}}var Ia={};Ia.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Ia.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Ia.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Ia.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Ia.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Ia.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Ia.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Ia.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Ia.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};Ia.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Ia.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Ia.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Ia.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Ia.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Ia.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Ia.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Ia.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Ia.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function B9(t,e,n,a,s,d,l){var o={};return t===void 0||t==="none"?o.datum_type=xw:o.datum_type=e9,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=Vp),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=Up,o.datum_params[3]*=ly,o.datum_params[4]*=ly,o.datum_params[5]*=ly,o.datum_params[6]=o.datum_params[6]/1e6+1)),l&&(o.datum_type=ug,o.grids=l),o.a=n,o.b=a,o.es=s,o.ep2=d,o}var KT={};function N9(t,e){var n=new DataView(e),a=U9(n),s=H9(n,a),d=G9(n,s,a),l={header:s,subgrids:d};return KT[t]=l,l}function j9(t){if(t===void 0)return null;var e=t.split(",");return e.map(V9)}function V9(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:KT[t]||null,isNull:!1}}function Wm(t){return t/3600*Math.PI/180}function U9(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function H9(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:ww(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function ww(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function G9(t,e,n){for(var a=176,s=[],d=0;d<e.nSubgrids;d++){var l=Z9(t,a,n),o=W9(t,a,l,n),g=Math.round(1+(l.upperLongitude-l.lowerLongitude)/l.longitudeInterval),_=Math.round(1+(l.upperLatitude-l.lowerLatitude)/l.latitudeInterval);s.push({ll:[Wm(l.lowerLongitude),Wm(l.lowerLatitude)],del:[Wm(l.longitudeInterval),Wm(l.latitudeInterval)],lim:[g,_],count:l.gridNodeCount,cvs:$9(o)}),a+=176+l.gridNodeCount*16}return s}function $9(t){return t.map(function(e){return[Wm(e.longitudeShift),Wm(e.latitudeShift)]})}function Z9(t,e,n){return{name:ww(t,e+8,e+16).trim(),parent:ww(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function W9(t,e,n,a){for(var s=e+176,d=16,l=[],o=0;o<n.gridNodeCount;o++){var g={latitudeShift:t.getFloat32(s+o*d,a),longitudeShift:t.getFloat32(s+o*d+4,a),latitudeAccuracy:t.getFloat32(s+o*d+8,a),longitudeAccuracy:t.getFloat32(s+o*d+12,a)};l.push(g)}return l}function bh(t,e){if(!(this instanceof bh))return new bh(t);e=e||function(_){if(_)throw _};var n=A9(t);if(typeof n!="object"){e(t);return}var a=bh.projections.get(n.projName);if(!a){e(t);return}if(n.datumCode&&n.datumCode!=="none"){var s=kf(Ia,n.datumCode);s&&(n.datum_params=n.datum_params||(s.towgs84?s.towgs84.split(","):null),n.ellps=s.ellipse,n.datumName=s.datumName?s.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var d=F9(n.a,n.b,n.rf,n.ellps,n.sphere),l=z9(d.a,d.b,d.rf,n.R_A),o=j9(n.nadgrids),g=n.datum||B9(n.datumCode,n.datum_params,d.a,d.b,l.es,l.ep2,o);nM(this,n),nM(this,a),this.a=d.a,this.b=d.b,this.rf=d.rf,this.sphere=d.sphere,this.es=l.es,this.e=l.e,this.ep2=l.ep2,this.datum=g,this.init(),e(null,this)}bh.projections=D9;bh.projections.start();function q9(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===Vp?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===Up?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function YT(t,e,n){var a=t.x,s=t.y,d=t.z?t.z:0,l,o,g,_;if(s<-Pn&&s>-1.001*Pn)s=-Pn;else if(s>Pn&&s<1.001*Pn)s=Pn;else{if(s<-Pn)return{x:-1/0,y:-1/0,z:t.z};if(s>Pn)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),o=Math.sin(s),_=Math.cos(s),g=o*o,l=n/Math.sqrt(1-e*g),{x:(l+d)*_*Math.cos(a),y:(l+d)*_*Math.sin(a),z:(l*(1-e)+d)*o}}function XT(t,e,n,a){var s=1e-12,d=s*s,l=30,o,g,_,I,C,E,S,k,D,N,U,F,j,$=t.x,K=t.y,tt=t.z?t.z:0,it,et,q;if(o=Math.sqrt($*$+K*K),g=Math.sqrt($*$+K*K+tt*tt),o/n<s){if(it=0,g/n<s)return et=Pn,q=-a,{x:t.x,y:t.y,z:t.z}}else it=Math.atan2(K,$);_=tt/g,I=o/g,C=1/Math.sqrt(1-e*(2-e)*I*I),k=I*(1-e)*C,D=_*C,j=0;do j++,S=n/Math.sqrt(1-e*D*D),q=o*k+tt*D-S*(1-e*D*D),E=e*S/(S+q),C=1/Math.sqrt(1-E*(2-E)*I*I),N=I*(1-E)*C,U=_*C,F=U*k-N*D,k=N,D=U;while(F*F>d&&j<l);return et=Math.atan(U/Math.abs(N)),{x:it,y:et,z:q}}function K9(t,e,n){if(e===Vp)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===Up){var a=n[0],s=n[1],d=n[2],l=n[3],o=n[4],g=n[5],_=n[6];return{x:_*(t.x-g*t.y+o*t.z)+a,y:_*(g*t.x+t.y-l*t.z)+s,z:_*(-o*t.x+l*t.y+t.z)+d}}}function Y9(t,e,n){if(e===Vp)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===Up){var a=n[0],s=n[1],d=n[2],l=n[3],o=n[4],g=n[5],_=n[6],I=(t.x-a)/_,C=(t.y-s)/_,E=(t.z-d)/_;return{x:I+g*C-o*E,y:-g*I+C+l*E,z:o*I-l*C+E}}}function F_(t){return t===Vp||t===Up}function X9(t,e,n){if(q9(t,e)||t.datum_type===xw||e.datum_type===xw)return n;var a=t.a,s=t.es;if(t.datum_type===ug){var d=iM(t,!1,n);if(d!==0)return;a=QI,s=JI}var l=e.a,o=e.b,g=e.es;if(e.datum_type===ug&&(l=QI,o=n9,g=JI),s===g&&a===l&&!F_(t.datum_type)&&!F_(e.datum_type))return n;if(n=YT(n,s,a),F_(t.datum_type)&&(n=K9(n,t.datum_type,t.datum_params)),F_(e.datum_type)&&(n=Y9(n,e.datum_type,e.datum_params)),n=XT(n,g,l,o),e.datum_type===ug){var _=iM(e,!0,n);if(_!==0)return}return n}function iM(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-n.x,y:n.y},s={x:Number.NaN,y:Number.NaN},d=[];t:for(var l=0;l<t.grids.length;l++){var o=t.grids[l];if(d.push(o.name),o.isNull){s=a;break}if(o.mandatory,o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var g=o.grid.subgrids,_=0,I=g.length;_<I;_++){var C=g[_],E=(Math.abs(C.del[1])+Math.abs(C.del[0]))/1e4,S=C.ll[0]-E,k=C.ll[1]-E,D=C.ll[0]+(C.lim[0]-1)*C.del[0]+E,N=C.ll[1]+(C.lim[1]-1)*C.del[1]+E;if(!(k>a.y||S>a.x||N<a.y||D<a.x)&&(s=Q9(a,e,C),!isNaN(s.x)))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*_h+" "+a.y*_h+" tried: '"+d+"'"),-1):(n.x=-s.x,n.y=s.y,0)}function Q9(t,e,n){var a={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return a;var s={x:t.x,y:t.y};s.x-=n.ll[0],s.y-=n.ll[1],s.x=Qn(s.x-Math.PI)+Math.PI;var d=oM(s,n);if(e){if(isNaN(d.x))return a;d.x=s.x-d.x,d.y=s.y-d.y;var l=9,o=1e-12,g,_;do{if(_=oM(d,n),isNaN(_.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}g={x:s.x-(_.x+d.x),y:s.y-(_.y+d.y)},d.x+=g.x,d.y+=g.y}while(l--&&Math.abs(g.x)>o&&Math.abs(g.y)>o);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=Qn(d.x+n.ll[0]),a.y=d.y+n.ll[1]}else isNaN(d.x)||(a.x=t.x+d.x,a.y=t.y+d.y);return a}function oM(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},a={x:Math.floor(n.x),y:Math.floor(n.y)},s={x:n.x-1*a.x,y:n.y-1*a.y},d={x:Number.NaN,y:Number.NaN},l;if(a.x<0||a.x>=e.lim[0]||a.y<0||a.y>=e.lim[1])return d;l=a.y*e.lim[0]+a.x;var o={x:e.cvs[l][0],y:e.cvs[l][1]};l++;var g={x:e.cvs[l][0],y:e.cvs[l][1]};l+=e.lim[0];var _={x:e.cvs[l][0],y:e.cvs[l][1]};l--;var I={x:e.cvs[l][0],y:e.cvs[l][1]},C=s.x*s.y,E=s.x*(1-s.y),S=(1-s.x)*(1-s.y),k=(1-s.x)*s.y;return d.x=S*o.x+E*g.x+k*I.x+C*_.x,d.y=S*o.y+E*g.y+k*I.y+C*_.y,d}function aM(t,e,n){var a=n.x,s=n.y,d=n.z||0,l,o,g,_={};for(g=0;g<3;g++)if(!(e&&g===2&&n.z===void 0))switch(g===0?(l=a,"ew".indexOf(t.axis[g])!==-1?o="x":o="y"):g===1?(l=s,"ns".indexOf(t.axis[g])!==-1?o="y":o="x"):(l=d,o="z"),t.axis[g]){case"e":_[o]=l;break;case"w":_[o]=-l;break;case"n":_[o]=l;break;case"s":_[o]=-l;break;case"u":n[o]!==void 0&&(_.z=l);break;case"d":n[o]!==void 0&&(_.z=-l);break;default:return null}return _}function QT(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function J9(t){sM(t.x),sM(t.y)}function sM(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function tj(t,e){return(t.datum.datum_type===Vp||t.datum.datum_type===Up||t.datum.datum_type===ug)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Vp||e.datum.datum_type===Up||e.datum.datum_type===ug)&&t.datumCode!=="WGS84"}function S1(t,e,n,a){var s;Array.isArray(n)?n=QT(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var d=n.z!==void 0;if(J9(n),t.datum&&e.datum&&tj(t,e)&&(s=new bh("WGS84"),n=S1(t,s,n,a),t=s),a&&t.axis!=="enu"&&(n=aM(t,!1,n)),t.projName==="longlat")n={x:n.x*os,y:n.y*os,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=X9(t.datum,e.datum,n),!!n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*_h,y:n.y*_h,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),a&&e.axis!=="enu"?aM(e,!0,n):(n&&!d&&delete n.z,n)}var lM=bh("WGS84");function mA(t,e,n,a){var s,d,l;return Array.isArray(n)?(s=S1(t,e,n,a)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(n.splice(3)):[s.x,s.y,n[2]].concat(n.splice(3)):[s.x,s.y].concat(n.splice(2)):[s.x,s.y]):(d=S1(t,e,n,a),l=Object.keys(n),l.length===2||l.forEach(function(o){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;d[o]=n[o]}),d)}function cM(t){return t instanceof bh?t:t.oProj?t.oProj:bh(t)}function yc(t,e,n){t=cM(t);var a=!1,s;return typeof e>"u"?(e=t,t=lM,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,e=t,t=lM,a=!0),e=cM(e),n?mA(t,e,n):(s={forward:function(d,l){return mA(t,e,d,l)},inverse:function(d,l){return mA(e,t,d,l)}},a&&(s.oProj=e),s)}var uM=6,JT="AJSAJS",tP="AFAFAF",qm=65,xl=73,Zc=79,q0=86,K0=90;const ej={forward:eP,inverse:nj,toPoint:nP};function eP(t,e){return e=e||5,oj(rj({lat:t[1],lon:t[0]}),e)}function nj(t){var e=k2(iP(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function nP(t){var e=k2(iP(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function gA(t){return t*(Math.PI/180)}function hM(t){return 180*(t/Math.PI)}function rj(t){var e=t.lat,n=t.lon,a=6378137,s=.00669438,d=.9996,l,o,g,_,I,C,E,S=gA(e),k=gA(n),D,N;N=Math.floor((n+180)/6)+1,n===180&&(N=60),e>=56&&e<64&&n>=3&&n<12&&(N=32),e>=72&&e<84&&(n>=0&&n<9?N=31:n>=9&&n<21?N=33:n>=21&&n<33?N=35:n>=33&&n<42&&(N=37)),l=(N-1)*6-180+3,D=gA(l),o=s/(1-s),g=a/Math.sqrt(1-s*Math.sin(S)*Math.sin(S)),_=Math.tan(S)*Math.tan(S),I=o*Math.cos(S)*Math.cos(S),C=Math.cos(S)*(k-D),E=a*((1-s/4-3*s*s/64-5*s*s*s/256)*S-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*S)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*S)-35*s*s*s/3072*Math.sin(6*S));var U=d*g*(C+(1-_+I)*C*C*C/6+(5-18*_+_*_+72*I-58*o)*C*C*C*C*C/120)+5e5,F=d*(E+g*Math.tan(S)*(C*C/2+(5-_+9*I+4*I*I)*C*C*C*C/24+(61-58*_+_*_+600*I-330*o)*C*C*C*C*C*C/720));return e<0&&(F+=1e7),{northing:Math.round(F),easting:Math.round(U),zoneNumber:N,zoneLetter:ij(e)}}function k2(t){var e=t.northing,n=t.easting,a=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var d=.9996,l=6378137,o=.00669438,g,_=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),I,C,E,S,k,D,N,U,F,j=n-5e5,$=e;a<"N"&&($-=1e7),N=(s-1)*6-180+3,g=o/(1-o),D=$/d,U=D/(l*(1-o/4-3*o*o/64-5*o*o*o/256)),F=U+(3*_/2-27*_*_*_/32)*Math.sin(2*U)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*U)+151*_*_*_/96*Math.sin(6*U),I=l/Math.sqrt(1-o*Math.sin(F)*Math.sin(F)),C=Math.tan(F)*Math.tan(F),E=g*Math.cos(F)*Math.cos(F),S=l*(1-o)/Math.pow(1-o*Math.sin(F)*Math.sin(F),1.5),k=j/(I*d);var K=F-I*Math.tan(F)/S*(k*k/2-(5+3*C+10*E-4*E*E-9*g)*k*k*k*k/24+(61+90*C+298*E+45*C*C-252*g-3*E*E)*k*k*k*k*k*k/720);K=hM(K);var tt=(k-(1+2*C+E)*k*k*k/6+(5-2*E+28*C-3*E*E+8*g+24*C*C)*k*k*k*k*k/120)/Math.cos(F);tt=N+hM(tt);var it;if(t.accuracy){var et=k2({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});it={top:et.lat,right:et.lon,bottom:K,left:tt}}else it={lat:K,lon:tt};return it}function ij(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function oj(t,e){var n="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+aj(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+a.substr(a.length-5,e)}function aj(t,e,n){var a=rP(n),s=Math.floor(t/1e5),d=Math.floor(e/1e5)%20;return sj(s,d,a)}function rP(t){var e=t%uM;return e===0&&(e=uM),e}function sj(t,e,n){var a=n-1,s=JT.charCodeAt(a),d=tP.charCodeAt(a),l=s+t-1,o=d+e,g=!1;l>K0&&(l=l-K0+qm-1,g=!0),(l===xl||s<xl&&l>xl||(l>xl||s<xl)&&g)&&l++,(l===Zc||s<Zc&&l>Zc||(l>Zc||s<Zc)&&g)&&(l++,l===xl&&l++),l>K0&&(l=l-K0+qm-1),o>q0?(o=o-q0+qm-1,g=!0):g=!1,(o===xl||d<xl&&o>xl||(o>xl||d<xl)&&g)&&o++,(o===Zc||d<Zc&&o>Zc||(o>Zc||d<Zc)&&g)&&(o++,o===xl&&o++),o>q0&&(o=o-q0+qm-1);var _=String.fromCharCode(l)+String.fromCharCode(o);return _}function iP(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,a="",s,d=0;!/[A-Z]/.test(s=t.charAt(d));){if(d>=2)throw"MGRSPoint bad conversion from: "+t;a+=s,d++}var l=parseInt(a,10);if(d===0||d+3>e)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(d++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+t;n=t.substring(d,d+=2);for(var g=rP(l),_=lj(n.charAt(0),g),I=cj(n.charAt(1),g);I<uj(o);)I+=2e6;var C=e-d;if(C%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var E=C/2,S=0,k=0,D,N,U,F,j;return E>0&&(D=1e5/Math.pow(10,E),N=t.substring(d,d+E),S=parseFloat(N)*D,U=t.substring(d+E),k=parseFloat(U)*D),F=S+_,j=k+I,{easting:F,northing:j,zoneLetter:o,zoneNumber:l,accuracy:D}}function lj(t,e){for(var n=JT.charCodeAt(e-1),a=1e5,s=!1;n!==t.charCodeAt(0);){if(n++,n===xl&&n++,n===Zc&&n++,n>K0){if(s)throw"Bad character: "+t;n=qm,s=!0}a+=1e5}return a}function cj(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=tP.charCodeAt(e-1),a=0,s=!1;n!==t.charCodeAt(0);){if(n++,n===xl&&n++,n===Zc&&n++,n>q0){if(s)throw"Bad character: "+t;n=qm,s=!0}a+=1e5}return a}function uj(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Ag(t,e,n){if(!(this instanceof Ag))return new Ag(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ag.fromMGRS=function(t){return new Ag(nP(t))};Ag.prototype.toMGRS=function(t){return eP([this.x,this.y],t)};var hj=1,dj=.25,dM=.046875,fM=.01953125,pM=.01068115234375,fj=.75,pj=.46875,mj=.013020833333333334,gj=.007120768229166667,yj=.3645833333333333,vj=.005696614583333333,_j=.3076171875;function oP(t){var e=[];e[0]=hj-t*(dj+t*(dM+t*(fM+t*pM))),e[1]=t*(fj-t*(dM+t*(fM+t*pM)));var n=t*t;return e[2]=n*(pj-t*(mj+t*gj)),n*=t,e[3]=n*(yj-t*vj),e[4]=n*t*_j,e}function Pb(t,e,n,a){return n*=e,e*=e,a[0]*t-n*(a[1]+e*(a[2]+e*(a[3]+e*a[4])))}var bj=20;function aP(t,e,n){for(var a=1/(1-e),s=t,d=bj;d;--d){var l=Math.sin(s),o=1-e*l*l;if(o=(Pb(s,l,Math.cos(s),n)-t)*(o*Math.sqrt(o))*a,s-=o,Math.abs(o)<Hn)return s}return s}function xj(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=oP(this.es),this.ml0=Pb(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Aj(t){var e=t.x,n=t.y,a=Qn(e-this.long0),s,d,l,o=Math.sin(n),g=Math.cos(n);if(this.es){var I=g*a,C=Math.pow(I,2),E=this.ep2*Math.pow(g,2),S=Math.pow(E,2),k=Math.abs(g)>Hn?Math.tan(n):0,D=Math.pow(k,2),N=Math.pow(D,2);s=1-this.es*Math.pow(o,2),I=I/Math.sqrt(s);var U=Pb(n,o,g,this.en);d=this.a*(this.k0*I*(1+C/6*(1-D+E+C/20*(5-18*D+N+14*E-58*D*E+C/42*(61+179*N-N*D-479*D)))))+this.x0,l=this.a*(this.k0*(U-this.ml0+o*a*I/2*(1+C/12*(5-D+9*E+4*S+C/30*(61+N-58*D+270*E-330*D*E+C/56*(1385+543*N-N*D-3111*D))))))+this.y0}else{var _=g*Math.sin(a);if(Math.abs(Math.abs(_)-1)<Hn)return 93;if(d=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,l=g*Math.cos(a)/Math.sqrt(1-Math.pow(_,2)),_=Math.abs(l),_>=1){if(_-1>Hn)return 93;l=0}else l=Math.acos(l);n<0&&(l=-l),l=this.a*this.k0*(l-this.lat0)+this.y0}return t.x=d,t.y=l,t}function wj(t){var e,n,a,s,d=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+l/this.k0,n=aP(e,this.es,this.en),Math.abs(n)<Pn){var C=Math.sin(n),E=Math.cos(n),S=Math.abs(E)>Hn?Math.tan(n):0,k=this.ep2*Math.pow(E,2),D=Math.pow(k,2),N=Math.pow(S,2),U=Math.pow(N,2);e=1-this.es*Math.pow(C,2);var F=d*Math.sqrt(e)/this.k0,j=Math.pow(F,2);e=e*S,a=n-e*j/(1-this.es)*.5*(1-j/12*(5+3*N-9*k*N+k-4*D-j/30*(61+90*N-252*k*N+45*U+46*k-j/56*(1385+3633*N+4095*U+1574*U*N)))),s=Qn(this.long0+F*(1-j/6*(1+2*N+k-j/20*(5+28*N+24*U+8*k*N+6*k-j/42*(61+662*N+1320*U+720*U*N))))/E)}else a=Pn*tv(l),s=0;else{var o=Math.exp(d/this.k0),g=.5*(o-1/o),_=this.lat0+l/this.k0,I=Math.cos(_);e=Math.sqrt((1-Math.pow(I,2))/(1+Math.pow(g,2))),a=Math.asin(e),l<0&&(a=-a),g===0&&I===0?s=0:s=Qn(Math.atan2(g,I)+this.long0)}return t.x=s,t.y=a,t}var Cj=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Q_={init:xj,forward:Aj,inverse:wj,names:Cj};function sP(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function qc(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),a=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(a,2))}function Ij(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function Mj(t){var e=Math.abs(t);return e=Ij(e*(1+e/(qc(1,e)+1))),t<0?-e:e}function L2(t,e){for(var n=2*Math.cos(2*e),a=t.length-1,s=t[a],d=0,l;--a>=0;)l=-d+n*s+t[a],d=s,s=l;return e+l*Math.sin(2*e)}function Sj(t,e){for(var n=2*Math.cos(e),a=t.length-1,s=t[a],d=0,l;--a>=0;)l=-d+n*s+t[a],d=s,s=l;return Math.sin(e)*l}function Ej(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function lP(t,e,n){for(var a=Math.sin(e),s=Math.cos(e),d=sP(n),l=Ej(n),o=2*s*l,g=-2*a*d,_=t.length-1,I=t[_],C=0,E=0,S=0,k,D;--_>=0;)k=E,D=C,E=I,C=S,I=-k+o*E-g*C+t[_],S=-D+g*E+o*C;return o=a*l,g=s*d,[o*I-g*S,o*S+g*I]}function Tj(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Q_.init.apply(this),this.forward=Q_.forward,this.inverse=Q_.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var a=L2(this.cbg,this.lat0);this.Zb=-this.Qn*(a+Sj(this.gtu,2*a))}function Pj(t){var e=Qn(t.x-this.long0),n=t.y;n=L2(this.cbg,n);var a=Math.sin(n),s=Math.cos(n),d=Math.sin(e),l=Math.cos(e);n=Math.atan2(a,l*s),e=Math.atan2(d*s,qc(a,s*l)),e=Mj(Math.tan(e));var o=lP(this.gtu,2*n,2*e);n=n+o[0],e=e+o[1];var g,_;return Math.abs(e)<=2.623395162778?(g=this.a*(this.Qn*e)+this.x0,_=this.a*(this.Qn*n+this.Zb)+this.y0):(g=1/0,_=1/0),t.x=g,t.y=_,t}function kj(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var a,s;if(Math.abs(e)<=2.623395162778){var d=lP(this.utg,2*n,2*e);n=n+d[0],e=e+d[1],e=Math.atan(sP(e));var l=Math.sin(n),o=Math.cos(n),g=Math.sin(e),_=Math.cos(e);n=Math.atan2(l*_,qc(g,_*o)),e=Math.atan2(g,_*o),a=Qn(e+this.long0),s=L2(this.cgb,n)}else a=1/0,s=1/0;return t.x=a,t.y=s,t}var Lj=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const J_={init:Tj,forward:Pj,inverse:kj,names:Lj};function Rj(t,e){if(t===void 0){if(t=Math.floor((Qn(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var Dj="etmerc";function Oj(){var t=Rj(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*os,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,J_.init.apply(this),this.forward=J_.forward,this.inverse=J_.inverse}var zj=["Universal Transverse Mercator System","utm"];const Fj={init:Oj,names:zj,dependsOn:Dj};function R2(t,e){return Math.pow((1-t)/(1+t),e)}var Bj=20;function Nj(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Ei)/(Math.pow(Math.tan(.5*this.lat0+Ei),this.C)*R2(this.e*t,this.ratexp))}function jj(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Ei),this.C)*R2(this.e*Math.sin(n),this.ratexp))-Pn,t.x=this.C*e,t}function Vj(t){for(var e=1e-14,n=t.x/this.C,a=t.y,s=Math.pow(Math.tan(.5*a+Ei)/this.K,1/this.C),d=Bj;d>0&&(a=2*Math.atan(s*R2(this.e*Math.sin(t.y),-.5*this.e))-Pn,!(Math.abs(a-t.y)<e));--d)t.y=a;return d?(t.x=n,t.y=a,t):null}var Uj=["gauss"];const D2={init:Nj,forward:jj,inverse:Vj,names:Uj};function Hj(){D2.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Gj(t){var e,n,a,s;return t.x=Qn(t.x-this.long0),D2.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),a=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*a),t.x=s*n*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*n*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function $j(t){var e,n,a,s,d;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,d=qc(t.x,t.y)){var l=2*Math.atan2(d,this.R2);e=Math.sin(l),n=Math.cos(l),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/d),a=Math.atan2(t.x*e,d*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,a=0;return t.x=a,t.y=s,D2.inverse.apply(this,[t]),t.x=Qn(t.x+this.long0),t}var Zj=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Wj={init:Hj,forward:Gj,inverse:$j,names:Zj};function qj(t,e,n){return e*=n,Math.tan(.5*(Pn+t))*Math.pow((1-e)/(1+e),.5*n)}function Kj(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Hn&&(this.k0=.5*(1+tv(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Hn&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Hn&&Math.abs(Math.cos(this.lat_ts))>Hn&&(this.k0=.5*this.cons*Ch(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Fu(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ch(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Pn,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Yj(t){var e=t.x,n=t.y,a=Math.sin(n),s=Math.cos(n),d,l,o,g,_,I,C=Qn(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Hn&&Math.abs(n+this.lat0)<=Hn?(t.x=NaN,t.y=NaN,t):this.sphere?(d=2*this.k0/(1+this.sinlat0*a+this.coslat0*s*Math.cos(C)),t.x=this.a*d*s*Math.sin(C)+this.x0,t.y=this.a*d*(this.coslat0*a-this.sinlat0*s*Math.cos(C))+this.y0,t):(l=2*Math.atan(this.ssfn_(n,a,this.e))-Pn,g=Math.cos(l),o=Math.sin(l),Math.abs(this.coslat0)<=Hn?(_=Fu(this.e,n*this.con,this.con*a),I=2*this.a*this.k0*_/this.cons,t.x=this.x0+I*Math.sin(e-this.long0),t.y=this.y0-this.con*I*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<Hn?(d=2*this.a*this.k0/(1+g*Math.cos(C)),t.y=d*o):(d=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*g*Math.cos(C))),t.y=d*(this.cosX0*o-this.sinX0*g*Math.cos(C))+this.y0),t.x=d*g*Math.sin(C)+this.x0,t))}function Xj(t){t.x-=this.x0,t.y-=this.y0;var e,n,a,s,d,l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var o=2*Math.atan(l/(2*this.a*this.k0));return e=this.long0,n=this.lat0,l<=Hn?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(o)*this.sinlat0+t.y*Math.sin(o)*this.coslat0/l),Math.abs(this.coslat0)<Hn?this.lat0>0?e=Qn(this.long0+Math.atan2(t.x,-1*t.y)):e=Qn(this.long0+Math.atan2(t.x,t.y)):e=Qn(this.long0+Math.atan2(t.x*Math.sin(o),l*this.coslat0*Math.cos(o)-t.y*this.sinlat0*Math.sin(o))),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=Hn){if(l<=Hn)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,a=l*this.cons/(2*this.a*this.k0),n=this.con*Dy(this.e,a),e=this.con*Qn(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,l<=Hn?d=this.X0:(d=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/l),e=Qn(this.long0+Math.atan2(t.x*Math.sin(s),l*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),n=-1*Dy(this.e,Math.tan(.5*(Pn+d)));return t.x=e,t.y=n,t}var Qj=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const Jj={init:Kj,forward:Yj,inverse:Xj,names:Qj,ssfn_:qj};function t7(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,a=this.rf,s=1/a,d=2*s-Math.pow(s,2),l=this.e=Math.sqrt(d);this.R=this.k0*n*Math.sqrt(1-d)/(1-d*Math.pow(e,2)),this.alpha=Math.sqrt(1+d/(1-d)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),g=Math.log(Math.tan(Math.PI/4+t/2)),_=Math.log((1+l*e)/(1-l*e));this.K=o-this.alpha*g+this.alpha*l/2*_}function e7(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(e+n)+this.K,s=2*(Math.atan(Math.exp(a))-Math.PI/4),d=this.alpha*(t.x-this.lambda0),l=Math.atan(Math.sin(d)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(d))),o=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(d));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*l+this.x0,t}function n7(t){for(var e=t.x-this.x0,n=t.y-this.y0,a=e/this.R,s=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),d=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(a)),l=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(s))),o=this.lambda0+l/this.alpha,g=0,_=d,I=-1e3,C=0;Math.abs(_-I)>1e-7;){if(++C>20)return;g=1/this.alpha*(Math.log(Math.tan(Math.PI/4+d/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(_))/2)),I=_,_=2*Math.atan(Math.exp(g))-Math.PI/2}return t.x=o,t.y=_,t}var r7=["somerc"];const i7={init:t7,forward:e7,inverse:n7,names:r7};var Gm=1e-7;function o7(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1}function a7(){var t,e,n,a,s,d,l,o,g,_,I=0,C,E=0,S=0,k=0,D=0,N=0,U=0;this.no_off=o7(this),this.no_rot="no_rot"in this;var F=!1;"alpha"in this&&(F=!0);var j=!1;if("rectified_grid_angle"in this&&(j=!0),F&&(U=this.alpha),j&&(I=this.rectified_grid_angle*os),F||j)E=this.longc;else if(S=this.long1,D=this.lat1,k=this.long2,N=this.lat2,Math.abs(D-N)<=Gm||(t=Math.abs(D))<=Gm||Math.abs(t-Pn)<=Gm||Math.abs(Math.abs(this.lat0)-Pn)<=Gm||Math.abs(Math.abs(N)-Pn)<=Gm)throw new Error;var $=1-this.es;e=Math.sqrt($),Math.abs(this.lat0)>Hn?(o=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*o*o,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/$),this.A=this.B*this.k0*e/t,a=this.B*e/(n*Math.sqrt(t)),s=a*a-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=a,this.E*=Math.pow(Fu(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=a=s=1),F||j?(F?(C=Math.asin(Math.sin(U)/a),j||(I=U)):(C=I,U=Math.asin(a*Math.sin(C))),this.lam0=E-Math.asin(.5*(s-1/s)*Math.tan(C))/this.B):(d=Math.pow(Fu(this.e,D,Math.sin(D)),this.B),l=Math.pow(Fu(this.e,N,Math.sin(N)),this.B),s=this.E/d,g=(l-d)/(l+d),_=this.E*this.E,_=(_-l*d)/(_+l*d),t=S-k,t<-Math.pi?k-=Ly:t>Math.pi&&(k+=Ly),this.lam0=Qn(.5*(S+k)-Math.atan(_*Math.tan(.5*this.B*(S-k))/g)/this.B),C=Math.atan(2*Math.sin(this.B*Qn(S-this.lam0))/(s-1/s)),I=U=Math.asin(a*Math.sin(C))),this.singam=Math.sin(C),this.cosgam=Math.cos(C),this.sinrot=Math.sin(I),this.cosrot=Math.cos(I),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(U))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*C,this.v_pole_n=this.ArB*Math.log(Math.tan(Ei-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(Ei+s))}function s7(t){var e={},n,a,s,d,l,o,g,_;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Pn)>Hn){if(l=this.E/Math.pow(Fu(this.e,t.y,Math.sin(t.y)),this.B),o=1/l,n=.5*(l-o),a=.5*(l+o),d=Math.sin(this.B*t.x),s=(n*this.singam-d*this.cosgam)/a,Math.abs(Math.abs(s)-1)<Hn)throw new Error;_=.5*this.ArB*Math.log((1-s)/(1+s)),o=Math.cos(this.B*t.x),Math.abs(o)<Gm?g=this.A*t.x:g=this.ArB*Math.atan2(n*this.cosgam+d*this.singam,o)}else _=t.y>0?this.v_pole_n:this.v_pole_s,g=this.ArB*t.y;return this.no_rot?(e.x=g,e.y=_):(g-=this.u_0,e.x=_*this.cosrot+g*this.sinrot,e.y=g*this.cosrot-_*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function l7(t){var e,n,a,s,d,l,o,g={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*n),s=.5*(a-1/a),d=.5*(a+1/a),l=Math.sin(this.BrA*e),o=(l*this.cosgam+s*this.singam)/d,Math.abs(Math.abs(o)-1)<Hn)g.x=0,g.y=o<0?-Pn:Pn;else{if(g.y=this.E/Math.sqrt((1+o)/(1-o)),g.y=Dy(this.e,Math.pow(g.y,1/this.B)),g.y===1/0)throw new Error;g.x=-this.rB*Math.atan2(s*this.cosgam-l*this.singam,Math.cos(this.BrA*e))}return g.x+=this.lam0,g}var c7=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const u7={init:a7,forward:s7,inverse:l7,names:c7};function h7(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Hn)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),a=Ch(this.e,e,n),s=Fu(this.e,this.lat1,e),d=Math.sin(this.lat2),l=Math.cos(this.lat2),o=Ch(this.e,d,l),g=Fu(this.e,this.lat2,d),_=Fu(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Hn?this.ns=Math.log(a/o)/Math.log(s/g):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(_,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function d7(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=Hn&&(n=tv(n)*(Pn-2*Hn));var a=Math.abs(Math.abs(n)-Pn),s,d;if(a>Hn)s=Fu(this.e,n,Math.sin(n)),d=this.a*this.f0*Math.pow(s,this.ns);else{if(a=n*this.ns,a<=0)return null;d=0}var l=this.ns*Qn(e-this.long0);return t.x=this.k0*(d*Math.sin(l))+this.x0,t.y=this.k0*(this.rh-d*Math.cos(l))+this.y0,t}function f7(t){var e,n,a,s,d,l=(t.x-this.x0)/this.k0,o=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(l*l+o*o),n=1):(e=-Math.sqrt(l*l+o*o),n=-1);var g=0;if(e!==0&&(g=Math.atan2(n*l,n*o)),e!==0||this.ns>0){if(n=1/this.ns,a=Math.pow(e/(this.a*this.f0),n),s=Dy(this.e,a),s===-9999)return null}else s=-Pn;return d=Qn(g/this.ns+this.long0),t.x=d,t.y=s,t}var p7=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const m7={init:h7,forward:d7,inverse:f7,names:p7};function g7(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function y7(t){var e,n,a,s,d,l,o,g=t.x,_=t.y,I=Qn(g-this.long0);return e=Math.pow((1+this.e*Math.sin(_))/(1-this.e*Math.sin(_)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(_/2+this.s45),this.alfa)/e)-this.s45),a=-I*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(a)),d=Math.asin(Math.cos(n)*Math.sin(a)/Math.cos(s)),l=this.n*d,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=o*Math.cos(l)/1,t.x=o*Math.sin(l)/1,this.czech||(t.y*=-1,t.x*=-1),t}function v7(t){var e,n,a,s,d,l,o,g,_=t.x;t.x=t.y,t.y=_,this.czech||(t.y*=-1,t.x*=-1),l=Math.sqrt(t.x*t.x+t.y*t.y),d=Math.atan2(t.y,t.x),s=d/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/l,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(s)),n=Math.asin(Math.cos(a)*Math.sin(s)/Math.cos(e)),t.x=this.long0-n/this.alfa,o=e,g=0;var I=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(g=1),o=t.y,I+=1;while(g===0&&I<15);return I>=15?null:t}var _7=["Krovak","krovak"];const b7={init:g7,forward:y7,inverse:v7,names:_7};function tl(t,e,n,a,s){return t*s-e*Math.sin(2*s)+n*Math.sin(4*s)-a*Math.sin(6*s)}function ev(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function nv(t){return .375*t*(1+.25*t*(1+.46875*t))}function rv(t){return .05859375*t*t*(1+.75*t)}function iv(t){return t*t*t*(35/3072)}function wg(t,e,n){var a=e*n;return t/Math.sqrt(1-a*a)}function Og(t){return Math.abs(t)<Pn?t:t-tv(t)*Math.PI}function E1(t,e,n,a,s){var d,l;d=t/e;for(var o=0;o<15;o++)if(l=(t-(e*d-n*Math.sin(2*d)+a*Math.sin(4*d)-s*Math.sin(6*d)))/(e-2*n*Math.cos(2*d)+4*a*Math.cos(4*d)-6*s*Math.cos(6*d)),d+=l,Math.abs(l)<=1e-10)return d;return NaN}function x7(){this.sphere||(this.e0=ev(this.es),this.e1=nv(this.es),this.e2=rv(this.es),this.e3=iv(this.es),this.ml0=this.a*tl(this.e0,this.e1,this.e2,this.e3,this.lat0))}function A7(t){var e,n,a=t.x,s=t.y;if(a=Qn(a-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(a)),n=this.a*(Math.atan2(Math.tan(s),Math.cos(a))-this.lat0);else{var d=Math.sin(s),l=Math.cos(s),o=wg(this.a,this.e,d),g=Math.tan(s)*Math.tan(s),_=a*Math.cos(s),I=_*_,C=this.es*l*l/(1-this.es),E=this.a*tl(this.e0,this.e1,this.e2,this.e3,s);e=o*_*(1-I*g*(1/6-(8-g+8*C)*I/120)),n=E-this.ml0+o*d/l*I*(.5+(5-g+6*C)*I/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function w7(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,a,s;if(this.sphere){var d=n+this.lat0;a=Math.asin(Math.sin(d)*Math.cos(e)),s=Math.atan2(Math.tan(e),Math.cos(d))}else{var l=this.ml0/this.a+n,o=E1(l,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Pn)<=Hn)return t.x=this.long0,t.y=Pn,n<0&&(t.y*=-1),t;var g=wg(this.a,this.e,Math.sin(o)),_=g*g*g/this.a/this.a*(1-this.es),I=Math.pow(Math.tan(o),2),C=e*this.a/g,E=C*C;a=o-g*Math.tan(o)/_*C*C*(.5-(1+3*I)*C*C/24),s=C*(1-E*(I/3+(1+3*I)*I*E/15))/Math.cos(o)}return t.x=Qn(s+this.long0),t.y=Og(a),t}var C7=["Cassini","Cassini_Soldner","cass"];const I7={init:x7,forward:A7,inverse:w7,names:C7};function wf(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var M7=1,S7=2,E7=3,T7=4;function P7(){var t=Math.abs(this.lat0);if(Math.abs(t-Pn)<Hn?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<Hn?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=wf(this.e,1),this.mmf=.5/(1-this.es),this.apa=N7(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=wf(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function k7(t){var e,n,a,s,d,l,o,g,_,I,C=t.x,E=t.y;if(C=Qn(C-this.long0),this.sphere){if(d=Math.sin(E),I=Math.cos(E),a=Math.cos(C),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+I*a:1+this.sinph0*d+this.cosph0*I*a,n<=Hn)return null;n=Math.sqrt(2/n),e=n*I*Math.sin(C),n*=this.mode===this.EQUIT?d:this.cosph0*d-this.sinph0*I*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(E+this.lat0)<Hn)return null;n=Ei-E*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(C),n*=a}}else{switch(o=0,g=0,_=0,a=Math.cos(C),s=Math.sin(C),d=Math.sin(E),l=wf(this.e,d),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=l/this.qp,g=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:_=1+this.sinb1*o+this.cosb1*g*a;break;case this.EQUIT:_=1+g*a;break;case this.N_POLE:_=Pn+E,l=this.qp-l;break;case this.S_POLE:_=E-Pn,l=this.qp+l;break}if(Math.abs(_)<Hn)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:_=Math.sqrt(2/_),this.mode===this.OBLIQ?n=this.ymf*_*(this.cosb1*o-this.sinb1*g*a):n=(_=Math.sqrt(2/(1+g*a)))*o*this.ymf,e=this.xmf*_*g*s;break;case this.N_POLE:case this.S_POLE:l>=0?(e=(_=Math.sqrt(l))*s,n=a*(this.mode===this.S_POLE?_:-_)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function L7(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,a,s,d,l,o,g,_;if(this.sphere){var I=0,C,E=0;if(C=Math.sqrt(e*e+n*n),s=C*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(E=Math.sin(s),I=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(C)<=Hn?0:Math.asin(n*E/C),e*=E,n=I*C;break;case this.OBLIQ:s=Math.abs(C)<=Hn?this.lat0:Math.asin(I*this.sinph0+n*E*this.cosph0/C),e*=E*this.cosph0,n=(I-Math.sin(s)*this.sinph0)*C;break;case this.N_POLE:n=-n,s=Pn-s;break;case this.S_POLE:s-=Pn;break}a=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(_=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,g=Math.sqrt(e*e+n*n),g<Hn)return t.x=this.long0,t.y=this.lat0,t;l=2*Math.asin(.5*g/this.rq),d=Math.cos(l),e*=l=Math.sin(l),this.mode===this.OBLIQ?(_=d*this.sinb1+n*l*this.cosb1/g,o=this.qp*_,n=g*this.cosb1*d-n*this.sinb1*l):(_=n*l/g,o=this.qp*_,n=g*d)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),o=e*e+n*n,!o)return t.x=this.long0,t.y=this.lat0,t;_=1-o/this.qp,this.mode===this.S_POLE&&(_=-_)}a=Math.atan2(e,n),s=j7(Math.asin(_),this.apa)}return t.x=Qn(this.long0+a),t.y=s,t}var R7=.3333333333333333,D7=.17222222222222222,O7=.10257936507936508,z7=.06388888888888888,F7=.0664021164021164,B7=.016415012942191543;function N7(t){var e,n=[];return n[0]=t*R7,e=t*t,n[0]+=e*D7,n[1]=e*z7,e*=t,n[0]+=e*O7,n[1]+=e*F7,n[2]=e*B7,n}function j7(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var V7=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const U7={init:P7,forward:k7,inverse:L7,names:V7,S_POLE:M7,N_POLE:S7,EQUIT:E7,OBLIQ:T7};function Lf(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function H7(){Math.abs(this.lat1+this.lat2)<Hn||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ch(this.e3,this.sin_po,this.cos_po),this.qs1=wf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ch(this.e3,this.sin_po,this.cos_po),this.qs2=wf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=wf(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Hn?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function G7(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var a=wf(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,d=this.ns0*Qn(e-this.long0),l=s*Math.sin(d)+this.x0,o=this.rh-s*Math.cos(d)+this.y0;return t.x=l,t.y=o,t}function $7(t){var e,n,a,s,d,l;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1),s=0,e!==0&&(s=Math.atan2(a*t.x,a*t.y)),a=e*this.ns0/this.a,this.sphere?l=Math.asin((this.c-a*a)/(2*this.ns0)):(n=(this.c-a*a)/this.ns0,l=this.phi1z(this.e3,n)),d=Qn(s/this.ns0+this.long0),t.x=d,t.y=l,t}function Z7(t,e){var n,a,s,d,l,o=Lf(.5*e);if(t<Hn)return o;for(var g=t*t,_=1;_<=25;_++)if(n=Math.sin(o),a=Math.cos(o),s=t*n,d=1-s*s,l=.5*d*d/a*(e/(1-g)-n/d+.5/t*Math.log((1-s)/(1+s))),o=o+l,Math.abs(l)<=1e-7)return o;return null}var W7=["Albers_Conic_Equal_Area","Albers","aea"];const q7={init:H7,forward:G7,inverse:$7,names:W7,phi1z:Z7};function K7(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Y7(t){var e,n,a,s,d,l,o,g,_=t.x,I=t.y;return a=Qn(_-this.long0),e=Math.sin(I),n=Math.cos(I),s=Math.cos(a),l=this.sin_p14*e+this.cos_p14*n*s,d=1,l>0||Math.abs(l)<=Hn?(o=this.x0+this.a*d*n*Math.sin(a)/l,g=this.y0+this.a*d*(this.cos_p14*e-this.sin_p14*n*s)/l):(o=this.x0+this.infinity_dist*n*Math.sin(a),g=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*s)),t.x=o,t.y=g,t}function X7(t){var e,n,a,s,d,l;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),n=Math.sin(s),a=Math.cos(s),l=Lf(a*this.sin_p14+t.y*n*this.cos_p14/e),d=Math.atan2(t.x*n,e*this.cos_p14*a-t.y*this.sin_p14*n),d=Qn(this.long0+d)):(l=this.phic0,d=0),t.x=d,t.y=l,t}var Q7=["gnom"];const J7={init:K7,forward:Y7,inverse:X7,names:Q7};function tV(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*Pn:Pn;for(var a=Math.asin(.5*e),s,d,l,o,g=0;g<30;g++)if(d=Math.sin(a),l=Math.cos(a),o=t*d,s=Math.pow(1-o*o,2)/(2*l)*(e/(1-t*t)-d/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),a+=s,Math.abs(s)<=1e-10)return a;return NaN}function eV(){this.sphere||(this.k0=Ch(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function nV(t){var e=t.x,n=t.y,a,s,d=Qn(e-this.long0);if(this.sphere)a=this.x0+this.a*d*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var l=wf(this.e,Math.sin(n));a=this.x0+this.a*this.k0*d,s=this.y0+this.a*l*.5/this.k0}return t.x=a,t.y=s,t}function rV(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Qn(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=tV(this.e,2*t.y*this.k0/this.a),e=Qn(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var iV=["cea"];const oV={init:eV,forward:nV,inverse:rV,names:iV};function aV(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function sV(t){var e=t.x,n=t.y,a=Qn(e-this.long0),s=Og(n-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*s,t}function lV(t){var e=t.x,n=t.y;return t.x=Qn(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Og(this.lat0+(n-this.y0)/this.a),t}var cV=["Equirectangular","Equidistant_Cylindrical","eqc"];const uV={init:aV,forward:sV,inverse:lV,names:cV};var mM=20;function hV(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ev(this.es),this.e1=nv(this.es),this.e2=rv(this.es),this.e3=iv(this.es),this.ml0=this.a*tl(this.e0,this.e1,this.e2,this.e3,this.lat0)}function dV(t){var e=t.x,n=t.y,a,s,d,l=Qn(e-this.long0);if(d=l*Math.sin(n),this.sphere)Math.abs(n)<=Hn?(a=this.a*l,s=-1*this.a*this.lat0):(a=this.a*Math.sin(d)/Math.tan(n),s=this.a*(Og(n-this.lat0)+(1-Math.cos(d))/Math.tan(n)));else if(Math.abs(n)<=Hn)a=this.a*l,s=-1*this.ml0;else{var o=wg(this.a,this.e,Math.sin(n))/Math.tan(n);a=o*Math.sin(d),s=this.a*tl(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+o*(1-Math.cos(d))}return t.x=a+this.x0,t.y=s+this.y0,t}function fV(t){var e,n,a,s,d,l,o,g,_;if(a=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=Hn)e=Qn(a/this.a+this.long0),n=0;else{l=this.lat0+s/this.a,o=a*a/this.a/this.a+l*l,g=l;var I;for(d=mM;d;--d)if(I=Math.tan(g),_=-1*(l*(g*I+1)-g-.5*(g*g+o)*I)/((g-l)/I-1),g+=_,Math.abs(_)<=Hn){n=g;break}e=Qn(this.long0+Math.asin(a*Math.tan(g)/this.a)/Math.sin(n))}else if(Math.abs(s+this.ml0)<=Hn)n=0,e=Qn(this.long0+a/this.a);else{l=(this.ml0+s)/this.a,o=a*a/this.a/this.a+l*l,g=l;var C,E,S,k,D;for(d=mM;d;--d)if(D=this.e*Math.sin(g),C=Math.sqrt(1-D*D)*Math.tan(g),E=this.a*tl(this.e0,this.e1,this.e2,this.e3,g),S=this.e0-2*this.e1*Math.cos(2*g)+4*this.e2*Math.cos(4*g)-6*this.e3*Math.cos(6*g),k=E/this.a,_=(l*(C*k+1)-k-.5*C*(k*k+o))/(this.es*Math.sin(2*g)*(k*k+o-2*l*k)/(4*C)+(l-k)*(C*S-2/Math.sin(2*g))-S),g-=_,Math.abs(_)<=Hn){n=g;break}C=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Qn(this.long0+Math.asin(a*C/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var pV=["Polyconic","poly"];const mV={init:hV,forward:dV,inverse:fV,names:pV};function gV(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function yV(t){var e,n=t.x,a=t.y,s=a-this.lat0,d=n-this.long0,l=s/ly*1e-5,o=d,g=1,_=0;for(e=1;e<=10;e++)g=g*l,_=_+this.A[e]*g;var I=_,C=o,E=1,S=0,k,D,N=0,U=0;for(e=1;e<=6;e++)k=E*I-S*C,D=S*I+E*C,E=k,S=D,N=N+this.B_re[e]*E-this.B_im[e]*S,U=U+this.B_im[e]*E+this.B_re[e]*S;return t.x=U*this.a+this.x0,t.y=N*this.a+this.y0,t}function vV(t){var e,n=t.x,a=t.y,s=n-this.x0,d=a-this.y0,l=d/this.a,o=s/this.a,g=1,_=0,I,C,E=0,S=0;for(e=1;e<=6;e++)I=g*l-_*o,C=_*l+g*o,g=I,_=C,E=E+this.C_re[e]*g-this.C_im[e]*_,S=S+this.C_im[e]*g+this.C_re[e]*_;for(var k=0;k<this.iterations;k++){var D=E,N=S,U,F,j=l,$=o;for(e=2;e<=6;e++)U=D*E-N*S,F=N*E+D*S,D=U,N=F,j=j+(e-1)*(this.B_re[e]*D-this.B_im[e]*N),$=$+(e-1)*(this.B_im[e]*D+this.B_re[e]*N);D=1,N=0;var K=this.B_re[1],tt=this.B_im[1];for(e=2;e<=6;e++)U=D*E-N*S,F=N*E+D*S,D=U,N=F,K=K+e*(this.B_re[e]*D-this.B_im[e]*N),tt=tt+e*(this.B_im[e]*D+this.B_re[e]*N);var it=K*K+tt*tt;E=(j*K+$*tt)/it,S=($*K-j*tt)/it}var et=E,q=S,ut=1,Ct=0;for(e=1;e<=9;e++)ut=ut*et,Ct=Ct+this.D[e]*ut;var ot=this.lat0+Ct*ly*1e5,bt=this.long0+q;return t.x=bt,t.y=ot,t}var _V=["New_Zealand_Map_Grid","nzmg"];const bV={init:gV,forward:yV,inverse:vV,names:_V};function xV(){}function AV(t){var e=t.x,n=t.y,a=Qn(e-this.long0),s=this.x0+this.a*a,d=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=s,t.y=d,t}function wV(t){t.x-=this.x0,t.y-=this.y0;var e=Qn(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var CV=["Miller_Cylindrical","mill"];const IV={init:xV,forward:AV,inverse:wV,names:CV};var MV=20;function SV(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=oP(this.es)}function EV(t){var e,n,a=t.x,s=t.y;if(a=Qn(a-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var d=this.n*Math.sin(s),l=MV;l;--l){var o=(this.m*s+Math.sin(s)-d)/(this.m+Math.cos(s));if(s-=o,Math.abs(o)<Hn)break}e=this.a*this.C_x*a*(this.m+Math.cos(s)),n=this.a*this.C_y*s}else{var g=Math.sin(s),_=Math.cos(s);n=this.a*Pb(s,g,_,this.en),e=this.a*a*_/Math.sqrt(1-this.es*g*g)}return t.x=e,t.y=n,t}function TV(t){var e,n,a,s;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(e))),this.m?e=Lf((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Lf(Math.sin(e)/this.n)),a=Qn(a+this.long0),e=Og(e)):(e=aP(t.y/this.a,this.es,this.en),s=Math.abs(e),s<Pn?(s=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),a=Qn(n)):s-Hn<Pn&&(a=this.long0)),t.x=a,t.y=e,t}var PV=["Sinusoidal","sinu"];const kV={init:SV,forward:EV,inverse:TV,names:PV};function LV(){}function RV(t){for(var e=t.x,n=t.y,a=Qn(e-this.long0),s=n,d=Math.PI*Math.sin(n);;){var l=-(s+Math.sin(s)-d)/(1+Math.cos(s));if(s+=l,Math.abs(l)<Hn)break}s/=2,Math.PI/2-Math.abs(n)<Hn&&(a=0);var o=.900316316158*this.a*a*Math.cos(s)+this.x0,g=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=o,t.y=g,t}function DV(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var a=Qn(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var s=Math.asin(n);return t.x=a,t.y=s,t}var OV=["Mollweide","moll"];const zV={init:LV,forward:RV,inverse:DV,names:OV};function FV(){Math.abs(this.lat1+this.lat2)<Hn||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ev(this.es),this.e1=nv(this.es),this.e2=rv(this.es),this.e3=iv(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ch(this.e,this.sinphi,this.cosphi),this.ml1=tl(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Hn?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ch(this.e,this.sinphi,this.cosphi),this.ml2=tl(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=tl(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function BV(t){var e=t.x,n=t.y,a;if(this.sphere)a=this.a*(this.g-n);else{var s=tl(this.e0,this.e1,this.e2,this.e3,n);a=this.a*(this.g-s)}var d=this.ns*Qn(e-this.long0),l=this.x0+a*Math.sin(d),o=this.y0+this.rh-a*Math.cos(d);return t.x=l,t.y=o,t}function NV(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,a,s;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var d=0;if(n!==0&&(d=Math.atan2(e*t.x,e*t.y)),this.sphere)return s=Qn(this.long0+d/this.ns),a=Og(this.g-n/this.a),t.x=s,t.y=a,t;var l=this.g-n/this.a;return a=E1(l,this.e0,this.e1,this.e2,this.e3),s=Qn(this.long0+d/this.ns),t.x=s,t.y=a,t}var jV=["Equidistant_Conic","eqdc"];const VV={init:FV,forward:BV,inverse:NV,names:jV};function UV(){this.R=this.a}function HV(t){var e=t.x,n=t.y,a=Qn(e-this.long0),s,d;Math.abs(n)<=Hn&&(s=this.x0+this.R*a,d=this.y0);var l=Lf(2*Math.abs(n/Math.PI));(Math.abs(a)<=Hn||Math.abs(Math.abs(n)-Pn)<=Hn)&&(s=this.x0,n>=0?d=this.y0+Math.PI*this.R*Math.tan(.5*l):d=this.y0+Math.PI*this.R*-Math.tan(.5*l));var o=.5*Math.abs(Math.PI/a-a/Math.PI),g=o*o,_=Math.sin(l),I=Math.cos(l),C=I/(_+I-1),E=C*C,S=C*(2/_-1),k=S*S,D=Math.PI*this.R*(o*(C-k)+Math.sqrt(g*(C-k)*(C-k)-(k+g)*(E-k)))/(k+g);a<0&&(D=-D),s=this.x0+D;var N=g+C;return D=Math.PI*this.R*(S*N-o*Math.sqrt((k+g)*(g+1)-N*N))/(k+g),n>=0?d=this.y0+D:d=this.y0-D,t.x=s,t.y=d,t}function GV(t){var e,n,a,s,d,l,o,g,_,I,C,E,S;return t.x-=this.x0,t.y-=this.y0,C=Math.PI*this.R,a=t.x/C,s=t.y/C,d=a*a+s*s,l=-Math.abs(s)*(1+d),o=l-2*s*s+a*a,g=-2*l+1+2*s*s+d*d,S=s*s/g+(2*o*o*o/g/g/g-9*l*o/g/g)/27,_=(l-o*o/3/g)/g,I=2*Math.sqrt(-_/3),C=3*S/_/I,Math.abs(C)>1&&(C>=0?C=1:C=-1),E=Math.acos(C)/3,t.y>=0?n=(-I*Math.cos(E+Math.PI/3)-o/3/g)*Math.PI:n=-(-I*Math.cos(E+Math.PI/3)-o/3/g)*Math.PI,Math.abs(a)<Hn?e=this.long0:e=Qn(this.long0+Math.PI*(d-1+Math.sqrt(1+2*(a*a-s*s)+d*d))/2/a),t.x=e,t.y=n,t}var $V=["Van_der_Grinten_I","VanDerGrinten","vandg"];const ZV={init:UV,forward:HV,inverse:GV,names:$V};function WV(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function qV(t){var e=t.x,n=t.y,a=Math.sin(t.y),s=Math.cos(t.y),d=Qn(e-this.long0),l,o,g,_,I,C,E,S,k,D,N,U,F,j,$,K,tt,it,et,q,ut,Ct,ot;return this.sphere?Math.abs(this.sin_p12-1)<=Hn?(t.x=this.x0+this.a*(Pn-n)*Math.sin(d),t.y=this.y0-this.a*(Pn-n)*Math.cos(d),t):Math.abs(this.sin_p12+1)<=Hn?(t.x=this.x0+this.a*(Pn+n)*Math.sin(d),t.y=this.y0+this.a*(Pn+n)*Math.cos(d),t):(it=this.sin_p12*a+this.cos_p12*s*Math.cos(d),K=Math.acos(it),tt=K?K/Math.sin(K):1,t.x=this.x0+this.a*tt*s*Math.sin(d),t.y=this.y0+this.a*tt*(this.cos_p12*a-this.sin_p12*s*Math.cos(d)),t):(l=ev(this.es),o=nv(this.es),g=rv(this.es),_=iv(this.es),Math.abs(this.sin_p12-1)<=Hn?(I=this.a*tl(l,o,g,_,Pn),C=this.a*tl(l,o,g,_,n),t.x=this.x0+(I-C)*Math.sin(d),t.y=this.y0-(I-C)*Math.cos(d),t):Math.abs(this.sin_p12+1)<=Hn?(I=this.a*tl(l,o,g,_,Pn),C=this.a*tl(l,o,g,_,n),t.x=this.x0+(I+C)*Math.sin(d),t.y=this.y0+(I+C)*Math.cos(d),t):(E=a/s,S=wg(this.a,this.e,this.sin_p12),k=wg(this.a,this.e,a),D=Math.atan((1-this.es)*E+this.es*S*this.sin_p12/(k*s)),N=Math.atan2(Math.sin(d),this.cos_p12*Math.tan(D)-this.sin_p12*Math.cos(d)),N===0?et=Math.asin(this.cos_p12*Math.sin(D)-this.sin_p12*Math.cos(D)):Math.abs(Math.abs(N)-Math.PI)<=Hn?et=-Math.asin(this.cos_p12*Math.sin(D)-this.sin_p12*Math.cos(D)):et=Math.asin(Math.sin(d)*Math.cos(D)/Math.sin(N)),U=this.e*this.sin_p12/Math.sqrt(1-this.es),F=this.e*this.cos_p12*Math.cos(N)/Math.sqrt(1-this.es),j=U*F,$=F*F,q=et*et,ut=q*et,Ct=ut*et,ot=Ct*et,K=S*et*(1-q*$*(1-$)/6+ut/8*j*(1-2*$)+Ct/120*($*(4-7*$)-3*U*U*(1-7*$))-ot/48*j),t.x=this.x0+K*Math.sin(N),t.y=this.y0+K*Math.cos(N),t))}function KV(t){t.x-=this.x0,t.y-=this.y0;var e,n,a,s,d,l,o,g,_,I,C,E,S,k,D,N,U,F,j,$,K,tt,it,et;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*Pn*this.a?void 0:(n=e/this.a,a=Math.sin(n),s=Math.cos(n),d=this.long0,Math.abs(e)<=Hn?l=this.lat0:(l=Lf(s*this.sin_p12+t.y*a*this.cos_p12/e),o=Math.abs(this.lat0)-Pn,Math.abs(o)<=Hn?this.lat0>=0?d=Qn(this.long0+Math.atan2(t.x,-t.y)):d=Qn(this.long0-Math.atan2(-t.x,t.y)):d=Qn(this.long0+Math.atan2(t.x*a,e*this.cos_p12*s-t.y*this.sin_p12*a))),t.x=d,t.y=l,t)):(g=ev(this.es),_=nv(this.es),I=rv(this.es),C=iv(this.es),Math.abs(this.sin_p12-1)<=Hn?(E=this.a*tl(g,_,I,C,Pn),e=Math.sqrt(t.x*t.x+t.y*t.y),S=E-e,l=E1(S/this.a,g,_,I,C),d=Qn(this.long0+Math.atan2(t.x,-1*t.y)),t.x=d,t.y=l,t):Math.abs(this.sin_p12+1)<=Hn?(E=this.a*tl(g,_,I,C,Pn),e=Math.sqrt(t.x*t.x+t.y*t.y),S=e-E,l=E1(S/this.a,g,_,I,C),d=Qn(this.long0+Math.atan2(t.x,t.y)),t.x=d,t.y=l,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),N=Math.atan2(t.x,t.y),k=wg(this.a,this.e,this.sin_p12),U=Math.cos(N),F=this.e*this.cos_p12*U,j=-F*F/(1-this.es),$=3*this.es*(1-j)*this.sin_p12*this.cos_p12*U/(1-this.es),K=e/k,tt=K-j*(1+j)*Math.pow(K,3)/6-$*(1+3*j)*Math.pow(K,4)/24,it=1-j*tt*tt/2-K*tt*tt*tt/6,D=Math.asin(this.sin_p12*Math.cos(tt)+this.cos_p12*Math.sin(tt)*U),d=Qn(this.long0+Math.asin(Math.sin(N)*Math.sin(tt)/Math.cos(D))),et=Math.sin(D),l=Math.atan2((et-this.es*it*this.sin_p12)*Math.tan(D),et*(1-this.es)),t.x=d,t.y=l,t))}var YV=["Azimuthal_Equidistant","aeqd"];const XV={init:WV,forward:qV,inverse:KV,names:YV};function QV(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function JV(t){var e,n,a,s,d,l,o,g,_=t.x,I=t.y;return a=Qn(_-this.long0),e=Math.sin(I),n=Math.cos(I),s=Math.cos(a),l=this.sin_p14*e+this.cos_p14*n*s,d=1,(l>0||Math.abs(l)<=Hn)&&(o=this.a*d*n*Math.sin(a),g=this.y0+this.a*d*(this.cos_p14*e-this.sin_p14*n*s)),t.x=o,t.y=g,t}function tU(t){var e,n,a,s,d,l,o;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Lf(e/this.a),a=Math.sin(n),s=Math.cos(n),l=this.long0,Math.abs(e)<=Hn?(o=this.lat0,t.x=l,t.y=o,t):(o=Lf(s*this.sin_p14+t.y*a*this.cos_p14/e),d=Math.abs(this.lat0)-Pn,Math.abs(d)<=Hn?(this.lat0>=0?l=Qn(this.long0+Math.atan2(t.x,-t.y)):l=Qn(this.long0-Math.atan2(-t.x,t.y)),t.x=l,t.y=o,t):(l=Qn(this.long0+Math.atan2(t.x*a,e*this.cos_p14*s-t.y*this.sin_p14*a)),t.x=l,t.y=o,t))}var eU=["ortho"];const nU={init:QV,forward:JV,inverse:tU,names:eU};var Co={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ti={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function rU(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Pn-Ei/2?this.face=Co.TOP:this.lat0<=-(Pn-Ei/2)?this.face=Co.BOTTOM:Math.abs(this.long0)<=Ei?this.face=Co.FRONT:Math.abs(this.long0)<=Pn+Ei?this.face=this.long0>0?Co.RIGHT:Co.LEFT:this.face=Co.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function iU(t){var e={x:0,y:0},n,a,s,d,l,o,g={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,a=t.x,this.face===Co.TOP)d=Pn-n,a>=Ei&&a<=Pn+Ei?(g.value=Ti.AREA_0,s=a-Pn):a>Pn+Ei||a<=-(Pn+Ei)?(g.value=Ti.AREA_1,s=a>0?a-Yo:a+Yo):a>-(Pn+Ei)&&a<=-Ei?(g.value=Ti.AREA_2,s=a+Pn):(g.value=Ti.AREA_3,s=a);else if(this.face===Co.BOTTOM)d=Pn+n,a>=Ei&&a<=Pn+Ei?(g.value=Ti.AREA_0,s=-a+Pn):a<Ei&&a>=-Ei?(g.value=Ti.AREA_1,s=-a):a<-Ei&&a>=-(Pn+Ei)?(g.value=Ti.AREA_2,s=-a-Pn):(g.value=Ti.AREA_3,s=a>0?-a+Yo:-a-Yo);else{var _,I,C,E,S,k,D;this.face===Co.RIGHT?a=hg(a,+Pn):this.face===Co.BACK?a=hg(a,+Yo):this.face===Co.LEFT&&(a=hg(a,-Pn)),E=Math.sin(n),S=Math.cos(n),k=Math.sin(a),D=Math.cos(a),_=S*D,I=S*k,C=E,this.face===Co.FRONT?(d=Math.acos(_),s=B_(d,C,I,g)):this.face===Co.RIGHT?(d=Math.acos(I),s=B_(d,C,-_,g)):this.face===Co.BACK?(d=Math.acos(-_),s=B_(d,C,-I,g)):this.face===Co.LEFT?(d=Math.acos(-I),s=B_(d,C,_,g)):(d=s=0,g.value=Ti.AREA_0)}return o=Math.atan(12/Yo*(s+Math.acos(Math.sin(s)*Math.cos(Ei))-Pn)),l=Math.sqrt((1-Math.cos(d))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(s))))),g.value===Ti.AREA_1?o+=Pn:g.value===Ti.AREA_2?o+=Yo:g.value===Ti.AREA_3&&(o+=1.5*Yo),e.x=l*Math.cos(o),e.y=l*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function oU(t){var e={lam:0,phi:0},n,a,s,d,l,o,g,_,I,C={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,a=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?C.value=Ti.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(C.value=Ti.AREA_1,n-=Pn):t.x<0&&-t.x>=Math.abs(t.y)?(C.value=Ti.AREA_2,n=n<0?n+Yo:n-Yo):(C.value=Ti.AREA_3,n+=Pn),I=Yo/12*Math.tan(n),l=Math.sin(I)/(Math.cos(I)-1/Math.sqrt(2)),o=Math.atan(l),s=Math.cos(n),d=Math.tan(a),g=1-s*s*d*d*(1-Math.cos(Math.atan(1/Math.cos(o)))),g<-1?g=-1:g>1&&(g=1),this.face===Co.TOP)_=Math.acos(g),e.phi=Pn-_,C.value===Ti.AREA_0?e.lam=o+Pn:C.value===Ti.AREA_1?e.lam=o<0?o+Yo:o-Yo:C.value===Ti.AREA_2?e.lam=o-Pn:e.lam=o;else if(this.face===Co.BOTTOM)_=Math.acos(g),e.phi=_-Pn,C.value===Ti.AREA_0?e.lam=-o+Pn:C.value===Ti.AREA_1?e.lam=-o:C.value===Ti.AREA_2?e.lam=-o-Pn:e.lam=o<0?-o-Yo:-o+Yo;else{var E,S,k;E=g,I=E*E,I>=1?k=0:k=Math.sqrt(1-I)*Math.sin(o),I+=k*k,I>=1?S=0:S=Math.sqrt(1-I),C.value===Ti.AREA_1?(I=S,S=-k,k=I):C.value===Ti.AREA_2?(S=-S,k=-k):C.value===Ti.AREA_3&&(I=S,S=k,k=-I),this.face===Co.RIGHT?(I=E,E=-S,S=I):this.face===Co.BACK?(E=-E,S=-S):this.face===Co.LEFT&&(I=E,E=S,S=-I),e.phi=Math.acos(-k)-Pn,e.lam=Math.atan2(S,E),this.face===Co.RIGHT?e.lam=hg(e.lam,-Pn):this.face===Co.BACK?e.lam=hg(e.lam,-Yo):this.face===Co.LEFT&&(e.lam=hg(e.lam,+Pn))}if(this.es!==0){var D,N,U;D=e.phi<0?1:0,N=Math.tan(e.phi),U=this.b/Math.sqrt(N*N+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-U*U)/(this.one_minus_f*U)),D&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function B_(t,e,n,a){var s;return t<Hn?(a.value=Ti.AREA_0,s=0):(s=Math.atan2(e,n),Math.abs(s)<=Ei?a.value=Ti.AREA_0:s>Ei&&s<=Pn+Ei?(a.value=Ti.AREA_1,s-=Pn):s>Pn+Ei||s<=-(Pn+Ei)?(a.value=Ti.AREA_2,s=s>=0?s-Yo:s+Yo):(a.value=Ti.AREA_3,s+=Pn)),s}function hg(t,e){var n=t+e;return n<-Yo?n+=Ly:n>+Yo&&(n-=Ly),n}var aU=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const sU={init:rU,forward:iU,inverse:oU,names:aU};var Cw=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Y0=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],cP=.8487,uP=1.3523,hP=_h/5,lU=1/hP,Km=18,T1=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},cU=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function uU(t,e,n,a){for(var s=e;a;--a){var d=t(s);if(s-=d,Math.abs(d)<n)break}return s}function hU(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function dU(t){var e=Qn(t.x-this.long0),n=Math.abs(t.y),a=Math.floor(n*hP);a<0?a=0:a>=Km&&(a=Km-1),n=_h*(n-lU*a);var s={x:T1(Cw[a],n)*e,y:T1(Y0[a],n)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*cP+this.x0,s.y=s.y*this.a*uP+this.y0,s}function fU(t){var e={x:(t.x-this.x0)/(this.a*cP),y:Math.abs(t.y-this.y0)/(this.a*uP)};if(e.y>=1)e.x/=Cw[Km][0],e.y=t.y<0?-Pn:Pn;else{var n=Math.floor(e.y*Km);for(n<0?n=0:n>=Km&&(n=Km-1);;)if(Y0[n][0]>e.y)--n;else if(Y0[n+1][0]<=e.y)++n;else break;var a=Y0[n],s=5*(e.y-a[0])/(Y0[n+1][0]-a[0]);s=uU(function(d){return(T1(a,d)-e.y)/cU(a,d)},s,Hn,100),e.x/=T1(Cw[n],s),e.y=(5*n+s)*os,t.y<0&&(e.y=-e.y)}return e.x=Qn(e.x+this.long0),e}var pU=["Robinson","robin"];const mU={init:hU,forward:dU,inverse:fU,names:pU};function gU(){this.name="geocent"}function yU(t){var e=YT(t,this.es,this.a);return e}function vU(t){var e=XT(t,this.es,this.a,this.b);return e}var _U=["Geocentric","geocentric","geocent","Geocent"];const bU={init:gU,forward:yU,inverse:vU,names:_U};var As={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},V0={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function xU(){if(Object.keys(V0).forEach((function(n){if(typeof this[n]>"u")this[n]=V0[n].def;else{if(V0[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);V0[n].num&&(this[n]=parseFloat(this[n]))}V0[n].degrees&&(this[n]=this[n]*os)}).bind(this)),Math.abs(Math.abs(this.lat0)-Pn)<Hn?this.mode=this.lat0<0?As.S_POLE:As.N_POLE:Math.abs(this.lat0)<Hn?this.mode=As.EQUIT:(this.mode=As.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function AU(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),a=Math.cos(t.x),s,d;switch(this.mode){case As.OBLIQ:d=this.sinph0*e+this.cosph0*n*a;break;case As.EQUIT:d=n*a;break;case As.S_POLE:d=-e;break;case As.N_POLE:d=e;break}switch(d=this.pn1/(this.p-d),s=d*n*Math.sin(t.x),this.mode){case As.OBLIQ:d*=this.cosph0*e-this.sinph0*n*a;break;case As.EQUIT:d*=e;break;case As.N_POLE:d*=-(n*a);break;case As.S_POLE:d*=n*a;break}var l,o;return l=d*this.cg+s*this.sg,o=1/(l*this.sw*this.h1+this.cw),s=(s*this.cg-d*this.sg)*this.cw*o,d=l*o,t.x=s*this.a,t.y=d*this.a,t}function wU(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,a,s;s=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*s,a=this.pn1*t.y*this.cw*s,t.x=n*this.cg+a*this.sg,t.y=a*this.cg-n*this.sg;var d=qc(t.x,t.y);if(Math.abs(d)<Hn)e.x=0,e.y=t.y;else{var l,o;switch(o=1-d*d*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/d+d/this.pn1),l=Math.sqrt(1-o*o),this.mode){case As.OBLIQ:e.y=Math.asin(l*this.sinph0+t.y*o*this.cosph0/d),t.y=(l-this.sinph0*Math.sin(e.y))*d,t.x*=o*this.cosph0;break;case As.EQUIT:e.y=Math.asin(t.y*o/d),t.y=l*d,t.x*=o;break;case As.N_POLE:e.y=Math.asin(l),t.y=-t.y;break;case As.S_POLE:e.y=-Math.asin(l);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var CU=["Tilted_Perspective","tpers"];const IU={init:xU,forward:AU,inverse:wU,names:CU};function MU(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function SU(t){var e=t.x,n=t.y,a,s,d,l;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var o=this.radius_p/qc(this.radius_p*Math.cos(n),Math.sin(n));if(s=o*Math.cos(e)*Math.cos(n),d=o*Math.sin(e)*Math.cos(n),l=o*Math.sin(n),(this.radius_g-s)*s-d*d-l*l*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(d/qc(l,a)),t.y=this.radius_g_1*Math.atan(l/a)):(t.x=this.radius_g_1*Math.atan(d/a),t.y=this.radius_g_1*Math.atan(l/qc(d,a)))}else this.shape==="sphere"&&(a=Math.cos(n),s=Math.cos(e)*a,d=Math.sin(e)*a,l=Math.sin(n),a=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(d/qc(l,a)),t.y=this.radius_g_1*Math.atan(l/a)):(t.x=this.radius_g_1*Math.atan(d/a),t.y=this.radius_g_1*Math.atan(l/qc(d,a))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function EU(t){var e=-1,n=0,a=0,s,d,l,o;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*qc(1,a)):(n=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*qc(1,n));var g=a/this.radius_p;if(s=n*n+g*g+e*e,d=2*this.radius_g*e,l=d*d-4*s*this.C,l<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-d-Math.sqrt(l))/(2*s),e=this.radius_g+o*e,n*=o,a*=o,t.x=Math.atan2(n,e),t.y=Math.atan(a*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(n=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),s=n*n+a*a+e*e,d=2*this.radius_g*e,l=d*d-4*s*this.C,l<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-d-Math.sqrt(l))/(2*s),e=this.radius_g+o*e,n*=o,a*=o,t.x=Math.atan2(n,e),t.y=Math.atan(a*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var TU=["Geostationary Satellite View","Geostationary_Satellite","geos"];const PU={init:MU,forward:SU,inverse:EU,names:TU};var cy=1.340264,uy=-.081106,hy=893e-6,dy=.003796,P1=Math.sqrt(3)/2;function kU(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function LU(t){var e=Qn(t.x-this.long0),n=t.y,a=Math.asin(P1*Math.sin(n)),s=a*a,d=s*s*s;return t.x=e*Math.cos(a)/(P1*(cy+3*uy*s+d*(7*hy+9*dy*s))),t.y=a*(cy+uy*s+d*(hy+dy*s)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function RU(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,a=t.y,s,d,l,o,g,_;for(_=0;_<n&&(s=a*a,d=s*s*s,l=a*(cy+uy*s+d*(hy+dy*s))-t.y,o=cy+3*uy*s+d*(7*hy+9*dy*s),a-=g=l/o,!(Math.abs(g)<e));++_);return s=a*a,d=s*s*s,t.x=P1*t.x*(cy+3*uy*s+d*(7*hy+9*dy*s))/Math.cos(a),t.y=Math.asin(Math.sin(a)/P1),t.x=Qn(t.x+this.long0),t}var DU=["eqearth","Equal Earth","Equal_Earth"];const OU={init:kU,forward:LU,inverse:RU,names:DU};function zU(t){t.Proj.projections.add(Q_),t.Proj.projections.add(J_),t.Proj.projections.add(Fj),t.Proj.projections.add(Wj),t.Proj.projections.add(Jj),t.Proj.projections.add(i7),t.Proj.projections.add(u7),t.Proj.projections.add(m7),t.Proj.projections.add(b7),t.Proj.projections.add(I7),t.Proj.projections.add(U7),t.Proj.projections.add(q7),t.Proj.projections.add(J7),t.Proj.projections.add(oV),t.Proj.projections.add(uV),t.Proj.projections.add(mV),t.Proj.projections.add(bV),t.Proj.projections.add(IV),t.Proj.projections.add(kV),t.Proj.projections.add(zV),t.Proj.projections.add(VV),t.Proj.projections.add(ZV),t.Proj.projections.add(XV),t.Proj.projections.add(nU),t.Proj.projections.add(sU),t.Proj.projections.add(mU),t.Proj.projections.add(bU),t.Proj.projections.add(IU),t.Proj.projections.add(PU),t.Proj.projections.add(OU)}yc.defaultDatum="WGS84";yc.Proj=bh;yc.WGS84=new yc.Proj("WGS84");yc.Point=Ag;yc.toPoint=QT;yc.defs=Qs;yc.nadgrid=N9;yc.transform=S1;yc.mgrs=ej;yc.version="__VERSION__";zU(yc);function dP(t){function e({longitude:n,latitude:a},s=!1){const d=UT(t)||{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"};return Iw({longitude:n,latitude:a},d,s)}return{format:e}}function Iw({longitude:t,latitude:e},n,a=!1){const s={longitude:"0",latitude:"0"};return!t||!e||(n&&!n.default&&n.proj4js&&([t,e]=yc(n.proj4js,[t,e])),n&&n.unit==="meter"?(s.longitude=t.toFixed(0),s.latitude=e.toFixed(0)):a?(s.longitude=BU(+t),s.latitude=FU(+e)):(s.longitude=t.toFixed(6),s.latitude=e.toFixed(6))),s}const FU=t=>`${O2(t)}° ${z2(t)}' ${parseFloat(fP(t).toFixed(2))}" ${t>0?"N":"S"}`,BU=t=>`${O2(t)}° ${z2(t)}' ${parseFloat(fP(t).toFixed(2))}" ${t>0?"E":"W"}`,O2=t=>t===0?0:Math.floor(Math.abs(t)),z2=t=>t===0?0:Math.floor((Math.abs(t)-Math.floor(Math.abs(t)))*60),fP=t=>t===0?0:(Math.abs(t)-O2(t)-z2(t)/60)*3600;function k1(t,e,n=!1){const{add:a,remove:s,isActive:d}=pP(t,e);return Zp(()=>{s()}),n&&mo(()=>{a()}),{add:a,remove:s,isActive:d}}function pP(t,e){const n=()=>{LN(t,e)},a=()=>{RN(t,e)},s=bn(()=>{const d=DN(t,e.event_map_type);return d&&d.id===e.id});return{add:n,remove:a,isActive:s}}let NU=class{get id(){return this._id}constructor(){this._id=`${ju()}`}},mP=class extends NU{constructor(e,n="map"){super(),this.event_map_type=e,this.type_select=n,this.options={}}setHandler(e){return this.handler=e,this}addToMap(e){return this.handler&&e.on(this.event_map_type,this.handler),this}removeFromMap(e){return this.handler&&e.off(this.event_map_type,this.handler),this}};class jU extends mP{constructor(){super("click","map"),this._originalHandlers={},this.setClassPointer("pointer")}setClassPointer(e){this.options.classPointer=e}setHandler(e){return this.handler=e,this}addToMap(e){if(!this.handler)return this;this.options.classPointer&&e.getCanvas().classList.add(this.options.classPointer);try{this._originalHandlers={scrollZoom:e.scrollZoom.isEnabled(),dragRotate:e.dragRotate.isEnabled(),touchZoomRotate:e.touchZoomRotate.isEnabled(),doubleClickZoom:e.doubleClickZoom.isEnabled(),dragPan:e.dragPan.isEnabled(),boxZoom:e.boxZoom.isEnabled()},e.scrollZoom.isEnabled()&&e.scrollZoom.disable(),e.dragRotate.isEnabled()&&e.dragRotate.disable(),e.touchZoomRotate.isEnabled()&&e.touchZoomRotate.disable(),e.doubleClickZoom.isEnabled()&&e.doubleClickZoom.disable(),e.dragPan.isEnabled()&&e.dragPan.disable(),e.boxZoom.isEnabled()&&e.boxZoom.disable(),this.map_ranger=VU(e.getCanvasContainer(),this.handler)}catch(n){console.error("Error disabling map controls:",n)}return this}removeFromMap(e){this.options.classPointer&&e.getCanvas().classList.remove(this.options.classPointer);try{this._originalHandlers.scrollZoom!==!1&&e.scrollZoom.enable(),this._originalHandlers.dragRotate!==!1&&e.dragRotate.enable(),this._originalHandlers.touchZoomRotate!==!1&&e.touchZoomRotate.enable(),this._originalHandlers.doubleClickZoom!==!1&&e.doubleClickZoom.enable(),this._originalHandlers.dragPan!==!1&&e.dragPan.enable(),this._originalHandlers.boxZoom!==!1&&e.boxZoom.enable()}catch(n){console.error("Error re-enabling map controls:",n)}return this.map_ranger&&(this.map_ranger.destroy(),this.map_ranger=void 0),this}}function VU(t,e){let n,a,s;function d(E){const S=t.getBoundingClientRect();return{x:E.clientX-S.left-t.clientLeft,y:E.clientY-S.top-t.clientTop}}function l(E){E.preventDefault(),E.stopPropagation(),n=d(E),document.addEventListener("mousemove",o),document.addEventListener("mouseup",g),document.addEventListener("keydown",_)}function o(E){E.preventDefault(),E.stopPropagation(),a=d(E),s||(s=document.createElement("div"),s.classList.add("boxdraw"),t.appendChild(s));const S=Math.min(n.x,a.x),k=Math.max(n.x,a.x),D=Math.min(n.y,a.y),N=Math.max(n.y,a.y);s.style.transform=`translate(${S}px, ${D}px)`,s.style.width=k-S+"px",s.style.height=N-D+"px"}function g(E){E.preventDefault(),E.stopPropagation(),I([n,d(E)])}function _(E){E.keyCode===27&&I()}function I(E){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",g),document.removeEventListener("keydown",_),s&&(s.parentNode&&s.parentNode.removeChild(s),s=void 0),E&&e&&e(E)}function C(){t.removeEventListener("mousedown",l,!0),e=void 0,I()}return t.addEventListener("mousedown",l,!0),t.style.cursor="crosshair",{destroy:C}}class kb extends mP{constructor(e="map"){super("click",e),this.setClassPointer("pointer")}setClassPointer(e){this.options.classPointer=e}addToMap(e){return this.options.classPointer&&e.getCanvas().classList.add(this.options.classPointer),this.handler&&(e.on("click",this.handler),e.on("touchstart",this.handler)),this}removeFromMap(e){return this.options.classPointer&&e.getCanvas().classList.remove(this.options.classPointer),this.handler&&(e.off("click",this.handler),e.off("touchstart",this.handler)),this}}const yA={};function UU(t){const e=Mg({}),n=g=>{if(!g)return;const _=g.listImages(),I={};_.forEach(C=>{const E=g.getImage(C);E&&(I[C]=E)}),e.value=I};let a;const s=g=>{g&&(a=()=>n(g),g.on("styledata",a),g.on("idle",a))},d=g=>{g&&a&&(g.off("styledata",a),g.off("idle",a))};mo(()=>{Yc(t,g=>{n(g),s(g)})}),Zp(()=>{Yc(t,g=>{d(g)})});const l=()=>{Yc(t,g=>{n(g),s(g)})};function o(g,_){if(yA[g])return yA[g];const I=_.data,C=HU(I),E=document.createElement("canvas"),S=E.getContext("2d");E.width=I.width,E.height=I.height,S.putImageData(C,0,0);const k=E.toDataURL("image/png");return yA[g]=k,k}return{images:e,reload:l,toDataURL:o}}function HU(t){const{width:e,height:n,data:a}=t,s=new Uint8ClampedArray(a);return new ImageData(s,e,n)}async function GU(t,e,n,a={}){const s=await t.loadImage(n);return t.hasImage(e)||t.addImage(e,s.data,a),!0}const F2="image";function gP(t){Vu(t,F2,ls({images:{}}))}_d(F2,gP);async function $U(t,e,n,a={}){const s=Bo(t,F2);return s.images[e]={path:n,id:e,name:e,is_sprite:!1,category:"custom"},Af.getMap(t,async l=>GU(l,e,n,a))}const ZU=Object.freeze(Object.defineProperty({__proto__:null,addImage:$U,initMapImage:gP},Symbol.toStringTag,{value:"Module"})),WU={class:"crs-container"},qU={class:"grow"},KU={class:"crs-item-header"},YU={class:"crs-item-header__title"},XU={class:"crs-item-header__action"},QU=["onClick"],JU={class:"crs-item"},tH={key:0},eH={key:1},nH={class:"crs-item__add"},rH=rr({__name:"CrsControl",props:{...So},setup(t){const{getCrsItems:e,setCrsItems:n}=T2,a=t,{mapId:s,moduleContainerProps:d}=Ai(a),{trans:l,setLocaleDefault:o}=jo(s.value);o({map:{"crs-control":{title:"Crs setting",field:{name:"name",unit:"unit",epsg:"epsg",proj4js:"proj4js"}}}});const[g,_]=Pf(!1);function I(){_(!g.value)}const C=bn(()=>e(s.value)),E=[{text:"degree",value:"degree"},{text:"meter",value:"meter"}],S={delete:Ff,plus:vd},k=N=>{n(s.value,C.value.filter(U=>U.epsg!==N.epsg))},D=()=>{C.value.push({name:"",unit:"degree",epsg:""})};return(N,U)=>(St(),tn(Qo,No(Mo(ct(d))),{btn:Se(()=>[te(di,{onClick:_i(I,["stop"]),tooltip:ct(l)("map.crs-control.title")},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:ct(_O)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Se(F=>[ct(g)?(St(),tn(ct(bd),Tr({key:0,height:200,width:400},F,{show:ct(g),"onUpdate:show":U[1]||(U[1]=j=>po(g)?g.value=j:null),title:ct(l)("map.crs-control.title")}),{default:Se(()=>[zt("div",WU,[zt("div",qU,[(St(!0),pe(mr,null,ki(C.value,j=>(St(),tn(ct(gw),{key:j.epsg,selected:!1},{header:Se(()=>[zt("div",KU,[zt("div",YU,Rn(j.name),1),zt("div",XU,[j.default?Cn("",!0):(St(),pe("button",{key:0,class:"clickable",onClick:_i($=>k(j),["stop"])},[te(ct(Wn),{size:"16",type:"mdi",path:S.delete},null,8,["path"])],8,QU))])])]),default:Se(()=>[zt("div",JU,[zt("div",null,[te(ct(Pi),{readonly:j.default,modelValue:j.name,"onUpdate:modelValue":$=>j.name=$,label:ct(l)("map.crs-control.field.name")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),zt("div",null,[te(ct(Pi),{readonly:j.default,modelValue:j.epsg,"onUpdate:modelValue":$=>j.epsg=$,label:ct(l)("map.crs-control.field.epsg")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),j.default?Cn("",!0):(St(),pe("div",tH,[te(ct(Pi),{modelValue:j.proj4js,"onUpdate:modelValue":$=>j.proj4js=$,label:ct(l)("map.crs-control.field.proj4js")},null,8,["modelValue","onUpdate:modelValue","label"])])),j.default?Cn("",!0):(St(),pe("div",eH,[te(ct(Tf),{modelValue:j.unit,"onUpdate:modelValue":$=>j.unit=$,label:ct(l)("map.crs-control.field.unit"),items:E},null,8,["modelValue","onUpdate:modelValue","label"])]))])]),_:2},1024))),128))]),zt("div",nH,[zt("button",{class:"layer-item__button clickable",onClick:U[0]||(U[0]=_i(j=>D(),["stop"]))},[te(ct(Wn),{size:"16",type:"mdi",path:S.plus},null,8,["path"])])])])]),_:2},1040,["show","title"])):Cn("",!0)]),default:Se(()=>[qn(N.$slots,"default",{},void 0,!0)]),_:3},16))}}),iH=Vn(rH,[["__scopeId","data-v-58016c9c"]]),oH=rr({__name:"FullScreenControl",props:{...So,type:{type:String,default:"body"}},setup(t){const e={fullscreen:mO,exitFullscreen:gO},n=t,{callMap:a,mapId:s,moduleContainerProps:d}=Ai(n),{trans:l,setLocaleDefault:o}=jo(s.value);o({map:{action:{"fullscreen-control-enter":"Enter fullscreen","fullscreen-control-exit":"Exit fullscreen"}}});const{isFullscreen:g,enter:_,exit:I,toggle:C}=qD(n.type=="body"?document.querySelector("body"):E());function E(S){return a(k=>{if(S||(S=k.getContainer()),S.classList.contains("map-container")||S.tagName==="BODY")return S;S=E(S.parentElement)}),S}return(S,k)=>(St(),tn(Qo,No(Mo(ct(d))),{btn:Se(()=>[te(di,{icon:"",title:ct(g)?ct(l)("map.action.fullscreen-control-exit"):ct(l)("map.action.fullscreen-control-enter"),onClick:k[0]||(k[0]=D=>ct(C)())},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:ct(g)?e.exitFullscreen:e.fullscreen},null,8,["path"])]),_:1},8,["title"])]),default:Se(()=>[qn(S.$slots,"default")]),_:3},16))}}),aH=rr({__name:"GeoLocateControl",props:{...So},setup(t){const{coords:e,error:n,resume:a,pause:s}=KD({immediate:!1}),d=t,{mapId:l,callMap:o,moduleContainerProps:g}=Ai(d),{trans:_,setLocaleDefault:I}=jo(l.value);I({map:{action:{"geolocate-control-find-my-location":"Find my location","geolocate-control-location-not-available":"Location not available"}}});const C=gn(!1),E=gn(),S=gn(0);let k,D,N=gn(void 0),U=gn(void 0);const F=bn(()=>n.value?cO:Lg),j=bn(()=>n.value?n.value.message||_.value("map.action.geolocate-control-location-not-available"):_.value("map.action.geolocate-control-find-my-location"));Xo(e,Ct=>{Ct.longitude==Number.POSITIVE_INFINITY||Ct.latitude==Number.POSITIVE_INFINITY||(E.value=[Ct.longitude,Ct.latitude],tt(),S.value=Ct.accuracy)});async function $(){o(Ct=>{if(!C.value){C.value=!0,a(),El(()=>{E.value&&Ct.flyTo({center:pd(E),zoom:14})});return}if(ut(Ct,pd(e))){Ct.flyTo({center:E.value,zoom:14});return}s(),C.value=!1,E.value=void 0,K()})}VD(()=>{K()});function K(){o(Ct=>{Ct.off("zoom",et)}),N.value&&N.value.remove(),U.value&&U.value.remove()}HD(()=>{k||(k=q("div","mapboxgl-user-location"),k.classList.add("mapboxgl-user-location"),k.appendChild(q("div","mapboxgl-user-location-dot")),k.appendChild(q("div","mapboxgl-user-location-heading"))),D||(D=q("div","mapboxgl-user-location-accuracy-circle"))});function tt(){N.value=new ky.Marker({element:k,rotationAlignment:"map",pitchAlignment:"map"}),U.value=new ky.Marker({element:D,pitchAlignment:"map"}),o(Ct=>{Ct.on("zoom",et),E.value&&(N.value&&N.value.setLngLat(E.value).addTo(Ct),U.value&&U.value.setLngLat(E.value).addTo(Ct)),it(Ct)})}function it(Ct){const ot=Ct.getContainer().getBoundingClientRect().height/2,bt=Ct.unproject([0,ot]),X=Ct.unproject([100,ot]),Wt=bt.distanceTo(X)/100,Vt=Math.ceil(2*S.value/Wt);D.style.width=`${Vt}px`,D.style.height=`${Vt}px`}function et(Ct){it(Ct.target)}const q=function(Ct,ot,bt){const X=window.document.createElement(Ct);return ot!==void 0&&(X.className=ot),X};function ut(Ct,ot){const bt=Ct.getBounds();return bt&&(ot.longitude<bt.getWest()||ot.longitude>bt.getEast()||ot.latitude<bt.getSouth()||ot.latitude>bt.getNorth())}return(Ct,ot)=>(St(),tn(Qo,No(Mo(ct(g))),{btn:Se(()=>[te(di,{disabled:!!ct(n),icon:F.value,tooltip:j.value,active:C.value,onClick:_i($,["stop"])},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:F.value},null,8,["path"])]),_:1},8,["disabled","icon","tooltip","active"])]),default:Se(()=>[qn(Ct.$slots,"default")]),_:3},16))}}),sH={class:"setting-container"},lH={class:"setting-field-container"},cH={class:"setting-center-container"},uH={__name:"GotoControl",props:{...So},setup(t){const e=t,[n,a]=Pf(!1),{callMap:s,mapId:d,moduleContainerProps:l}=Ai(e),{trans:o,setLocaleDefault:g}=jo(d.value);g({map:{"goto-control":{title:"Go to",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Go to"}}}});function _(){a(!n.value),n.value&&s(E=>{I.value.zoom=E.getZoom(),I.value.center=[E.getCenter().lng.toFixed(6),E.getCenter().lat.toFixed(6)],I.value.sprite=E.getStyle().sprite,I.value.glyphs=E.getStyle().glyphs})}const I=gn({zoom:null,center:null,sprite:null,glyphs:null}),C=()=>{s(E=>{I.value.zoom&&E.setZoom(I.value.zoom),I.value.center&&E.setCenter(I.value.center)})};return(E,S)=>(St(),tn(Qo,No(Mo(ct(l))),{btn:Se(()=>[te(di,{onClick:S[0]||(S[0]=_i(k=>_(),["stop"])),tooltip:ct(o)("map.goto-control.title")},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:ct(w2)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Se(k=>[ct(n)?(St(),tn(ct(bd),Tr({key:0,height:300,width:400},k,{show:ct(n),"onUpdate:show":S[5]||(S[5]=D=>po(n)?n.value=D:null),title:ct(o)("map.goto-control.title")}),{default:Se(()=>[zt("div",sH,[zt("div",lH,[zt("div",null,[zt("label",null,Rn(ct(o)("map.goto-control.field.center")),1),zt("div",cH,[te(ct(Pi),{modelValue:I.value.center[0],"onUpdate:modelValue":S[1]||(S[1]=D=>I.value.center[0]=D),type:"number",step:"0.0000001"},null,8,["modelValue"]),te(ct(Pi),{modelValue:I.value.center[1],"onUpdate:modelValue":S[2]||(S[2]=D=>I.value.center[1]=D),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),zt("div",null,[te(ct(Pi),{label:ct(o)("map.goto-control.field.zoom"),modelValue:I.value.zoom,"onUpdate:modelValue":S[3]||(S[3]=D=>I.value.zoom=D),type:"number",min:"0",max:"24"},null,8,["label","modelValue"])])]),te(ct(Cl),{class:"btn-container",onClick:S[4]||(S[4]=D=>C())},{default:Se(()=>[ho(Rn(ct(o)("map.goto-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):Cn("",!0)]),default:Se(()=>[qn(E.$slots,"default")]),_:3},16))}},hH=rr({__name:"HomeControl",props:{...So,zoom:Number,center:Array},setup(t){const e=t,n=gn({lat:0,lng:0}),a=gn(e.zoom||0),{callMap:s,mapId:d,moduleContainerProps:l}=Ai(e,I),{trans:o,setLocaleDefault:g}=jo(d.value);g({map:{home:{title:"Default view"}}});function _(){s(C=>{C.setZoom(a.value),C.setCenter(n.value)})}function I(C){e.zoom!=null?a.value=e.zoom:a.value=C.getZoom(),e.center!=null?(n.value.lat=e.center[1],n.value.lng=e.center[0]):n.value=C.getCenter()}return(C,E)=>(St(),tn(Qo,No(Mo(ct(l))),{btn:Se(()=>[te(di,{onClick:_,tooltip:ct(o)("map.home.title")},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:ct(vO)},null,8,["path"])]),_:1},8,["tooltip"])]),default:Se(()=>[qn(C.$slots,"default")]),_:3},16))}}),dH={class:"button-container mouse-coordinates-container"},fH={key:0,class:"mouse-coordinates-part zoom-part"},pH={class:"mouse-coordinates-zoom"},mH={title:"Current Zoom",class:"icon"},gH={style:{"margin-left":"4px"}},yH={key:1,class:"mouse-coordinates-part coordinates-part"},vH={class:"mouse-coordinates-point"},_H=["innerHTML"],bH=["title"],xH={key:2,class:"mouse-coordinates-part crs-part"},AH={class:"mouse-coordinates-point"},wH=["value"],CH={key:3,class:"mouse-coordinates-part scale-part"},IH=rr({__name:"MouseCoordinatesControl",props:{...So,hideZoom:Boolean,hideCrsSelect:Boolean,hideScale:Boolean,hideCoordinates:Boolean},setup(t){const{getCrsItems:e,setCrs:n,getCrs:a,getCrsItem:s}=T2,d=t,l={icon:w2,zoom:xO,change:oO},o=gn(),g=gn(""),_=gn({latitude:0,longitude:0}),I=gn(0),C=gn(!1),{callMap:E,mapId:S,moduleContainerProps:k}=Ai(d,K,tt),{format:D}=dP(S.value),N=bn(()=>e(S.value)),U=gn(a(S.value)),F=gn(s(S.value)),j=bn({get(){return U.value},set(Vt){return U.value=Vt,F.value=N.value.find(Bt=>Bt.epsg==Vt),n(S.value,Vt)}}),$=bn(()=>{var Vt;return((Vt=F.value)==null?void 0:Vt.unit)==="degree"});function K(Vt){I.value=+Vt.getZoom().toFixed(2),Vt.on("zoomend",Ct),Vt.on("mousemove",et),Vt.on("move",it),I.value=+Vt.getZoom().toFixed(2);let Bt=Vt.getCenter();_.value.latitude=Bt.lat,_.value.longitude=Bt.lng,ut(),El(()=>{ot(Vt,o.value)})}function tt(Vt){Vt.off("zoomend",Ct),Vt.off("mousemove",et),Vt.off("move",it)}function it(){E(Vt=>{ot(Vt,o.value)})}const et=Qy.debounce(function(Vt){let Bt=[Vt.lngLat.lng,Vt.lngLat.lat];_.value.latitude=Bt[1],_.value.longitude=Bt[0],ut()},15);function q(){C.value=!C.value,ut()}function ut(){const Vt=D(_.value,C.value);g.value=Vt.longitude+", &nbsp;"+Vt.latitude}function Ct(){E(Vt=>{I.value=+Vt.getZoom().toFixed(2)})}function ot(Vt,Bt){if(d.hideScale)return;const ae=100,ye=Vt.getContainer().clientHeight/2,en=Vt.unproject([0,ye]),Jt=Vt.unproject([ae,ye]),Gt=en.distanceTo(Jt);Gt>=1e3?bt(Bt,Gt/1e3,"km"):bt(Bt,Gt,"m")}function bt(Vt,Bt,ae){const ye=Wt(Bt);Vt&&(Vt.innerHTML=`${ye}&nbsp;${ae}`)}function X(Vt){const Bt=Math.pow(10,Math.ceil(-Math.log(Vt)/Math.LN10));return Math.round(Vt*Bt)/Bt}function Wt(Vt){const Bt=Math.pow(10,`${Math.floor(Vt)}`.length-1);let ae=Vt/Bt;return ae=ae>=10?10:ae>=5?5:ae>=3?3:ae>=2?2:ae>=1?1:X(ae),Bt*ae}return(Vt,Bt)=>(St(),tn(Qo,No(Mo(ct(k))),{btn:Se(()=>[zt("div",dH,[t.hideZoom?Cn("",!0):(St(),pe("div",fH,[zt("div",pH,[zt("span",mH,[te(ct(Wn),{size:16,type:"mdi",path:l.zoom},null,8,["path"])]),zt("div",gH,Rn(I.value),1)])])),t.hideCoordinates?Cn("",!0):(St(),pe("div",yH,[zt("div",vH,[zt("div",{style:fi([{"margin-left":"4px"},{"min-width":C.value?"220px":"100px"}]),class:"selectable",innerHTML:g.value},null,12,_H),$.value?(St(),pe("i",{key:0,title:C.value?"DMS <=> Latitude, Longitude":"Latitude, Longitude <=> DMS",style:{"margin-left":"4px"},onClick:q,class:"icon icon-clickable"},[te(ct(Wn),{size:16,type:"mdi",path:l.change},null,8,["path"])],8,bH)):Cn("",!0)])])),t.hideCrsSelect?Cn("",!0):(St(),pe("div",xH,[zt("div",AH,[gc(zt("select",{"onUpdate:modelValue":Bt[0]||(Bt[0]=ae=>j.value=ae),class:"crs-select",style:{width:"70px"}},[(St(!0),pe(mr,null,ki(N.value,ae=>(St(),pe("option",{value:ae.epsg,key:ae.epsg},Rn(ae.name||ae.epsg),9,wH))),128))],512),[[ib,j.value]])])])),t.hideScale?Cn("",!0):(St(),pe("div",CH,[zt("div",{ref_key:"scale",ref:o,class:"scale-custom"},null,512)]))])]),_:1},16))}}),MH=Vn(IH,[["__scopeId","data-v-2471b70e"]]),SH={class:"setting-container"},EH={class:"setting-field-container"},TH={class:"setting-center-container"},PH={__name:"SettingControl",props:{...So},setup(t){const e=t,[n,a]=Pf(!1),{callMap:s,mapId:d,moduleContainerProps:l}=Ai(e),{trans:o,setLocaleDefault:g}=jo(d.value);g({map:{"setting-control":{title:"Setting",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Apply"}}}});function _(){a(!n.value),n.value&&s(E=>{I.value.zoom=E.getZoom(),I.value.center=[E.getCenter().lng.toFixed(6),E.getCenter().lat.toFixed(6)],I.value.sprite=E.getStyle().sprite,I.value.glyphs=E.getStyle().glyphs})}const I=gn({zoom:null,center:null,sprite:null,glyphs:null}),C=()=>{s(E=>{I.value.zoom&&E.setZoom(I.value.zoom),I.value.center&&E.setCenter(I.value.center);const S=E.getStyle();I.value.sprite&&(S.sprite=I.value.sprite),I.value.glyphs&&(S.glyphs=I.value.glyphs),E.setStyle(S)})};return(E,S)=>(St(),tn(Qo,No(Mo(ct(l))),{btn:Se(()=>[te(di,{onClick:S[0]||(S[0]=_i(k=>_(),["stop"])),tooltip:ct(o)("map.setting-control.title")},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:ct(aO)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Se(k=>[ct(n)?(St(),tn(ct(bd),Tr({key:0,height:400,width:400},k,{show:ct(n),"onUpdate:show":S[7]||(S[7]=D=>po(n)?n.value=D:null),title:ct(o)("map.setting-control.title")}),{default:Se(()=>[zt("div",SH,[zt("div",EH,[zt("div",null,[zt("label",null,Rn(ct(o)("map.setting-control.field.center")),1),zt("div",TH,[te(ct(Pi),{modelValue:I.value.center[0],"onUpdate:modelValue":S[1]||(S[1]=D=>I.value.center[0]=D),type:"number",step:"0.0000001"},null,8,["modelValue"]),te(ct(Pi),{modelValue:I.value.center[1],"onUpdate:modelValue":S[2]||(S[2]=D=>I.value.center[1]=D),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),zt("div",null,[te(ct(Pi),{label:ct(o)("map.setting-control.field.zoom"),modelValue:I.value.zoom,"onUpdate:modelValue":S[3]||(S[3]=D=>I.value.zoom=D)},null,8,["label","modelValue"])]),zt("div",null,[te(ct(Pi),{label:ct(o)("map.setting-control.field.sprite"),modelValue:I.value.sprite,"onUpdate:modelValue":S[4]||(S[4]=D=>I.value.sprite=D)},null,8,["label","modelValue"])]),zt("div",null,[te(ct(Pi),{label:ct(o)("map.setting-control.field.glyphs"),modelValue:I.value.glyphs,"onUpdate:modelValue":S[5]||(S[5]=D=>I.value.glyphs=D)},null,8,["label","modelValue"])])]),te(ct(Cl),{class:"btn-container",onClick:S[6]||(S[6]=D=>C())},{default:Se(()=>[ho(Rn(ct(o)("map.setting-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):Cn("",!0)]),default:Se(()=>[qn(E.$slots,"default")]),_:3},16))}},kH=zt("g",{fill:"none","fill-rule":"evenodd"},[zt("path",{d:"M0 0h24v24H0z"}),zt("path",{d:"M12 3l4 8H8z",fill:"#f44336"}),zt("path",{d:"M12 21l-4-8h8z",fill:"#9E9E9E"})],-1),LH=[kH],RH={__name:"ZoomControl",props:{...So,showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0}},setup(t){const e={plus:vd,minus:CO},n=t,a=gn("rotate(0deg)"),{callMap:s,mapId:d,moduleContainerProps:l}=Ai(n,I,C),{trans:o,setLocaleDefault:g}=jo(d.value);g({map:{action:{"navigation-control-zoom-in":"Zoom in","navigation-control-zoom-out":"Zoom out","navigation-control-reset-bearing":"Reset bearing to north"}}});let _=null;function I(N){_=D.bind(null,N),N.on("rotate",_)}function C(N){N.off("rotate",_)}function E(N){s(U=>{U.zoomIn({},{originalEvent:N})})}function S(N){s(U=>{U.zoomOut({},{originalEvent:N})})}function k(){s(N=>{N.easeTo({bearing:0,pitch:0})})}function D(N){const U=N.getBearing()*-1;a.value=`rotate(${U}deg)`}return(N,U)=>(St(),tn(Qo,No(Mo(ct(l))),{btn:Se(()=>[te(xg,null,{default:Se(()=>[t.showCompass?(St(),tn(di,{key:0,onClick:k,title:ct(o)("map.action.navigation-control-reset-bearing")},{default:Se(()=>[(St(),pe("svg",{height:"22",style:fi({transform:a.value}),viewBox:"0 0 24 24",width:"22",xmlns:"http://www.w3.org/2000/svg"},LH,4))]),_:1},8,["title"])):Cn("",!0),t.showZoom?(St(),tn(di,{key:1,onClick:E,title:ct(o)("map.action.navigation-control-zoom-in")},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:e.plus},null,8,["path"])]),_:1},8,["title"])):Cn("",!0),t.showZoom?(St(),tn(di,{key:2,onClick:S,title:ct(o)("map.action.navigation-control-zoom-out")},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:e.minus},null,8,["path"])]),_:1},8,["title"])):Cn("",!0)]),_:1})]),default:Se(()=>[qn(N.$slots,"default")]),_:3},16))}};function t1(){const t=Math.floor(Math.random()*gM.length);return gM[t]}const gM=["#0E9F6E","#84A2AE","#BAC9CF","#D7E3E8","#EBF1F3","#da251d","#ffbd99","#ffa07f","#ff8365","#ff664c","#fb4834","#b90004","#9a0000","#7c0000","#600000","#25CCF7","#FD7272","#54a0ff","#00d2d3","#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d","#55efc4","#81ecec","#74b9ff","#a29bfe","#dfe6e9","#00b894","#00cec9","#0984e3","#6c5ce7","#ffeaa7","#fab1a0","#ff7675","#fd79a8","#fdcb6e","#e17055","#d63031","#feca57","#5f27cd","#54a0ff","#01a3a4"];var xs=63710088e-1,B2={centimeters:xs*100,centimetres:xs*100,degrees:xs/111325,feet:xs*3.28084,inches:xs*39.37,kilometers:xs/1e3,kilometres:xs/1e3,meters:xs,metres:xs,miles:xs/1609.344,millimeters:xs*1e3,millimetres:xs*1e3,nauticalmiles:xs/1852,radians:1,yards:xs*1.0936},DH={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/xs,yards:1.0936133},Mw={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Xc(t,e,n){n===void 0&&(n={});var a={type:"Feature"};return(n.id===0||n.id)&&(a.id=n.id),n.bbox&&(a.bbox=n.bbox),a.properties=e||{},a.geometry=t,a}function OH(t,e,n){switch(t){case"Point":return Aa(e).geometry;case"LineString":return as(e).geometry;case"Polygon":return zg(e).geometry;case"MultiPoint":return yP(e).geometry;case"MultiLineString":return N2(e).geometry;case"MultiPolygon":return vP(e).geometry;default:throw new Error(t+" is invalid")}}function Aa(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!L1(t[0])||!L1(t[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:t};return Xc(a,e,n)}function zH(t,e,n){return n===void 0&&(n={}),Rf(t.map(function(a){return Aa(a,e)}),n)}function zg(t,e,n){n===void 0&&(n={});for(var a=0,s=t;a<s.length;a++){var d=s[a];if(d.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<d[d.length-1].length;l++)if(d[d.length-1][l]!==d[0][l])throw new Error("First and last Position are not equivalent.")}var o={type:"Polygon",coordinates:t};return Xc(o,e,n)}function FH(t,e,n){return n===void 0&&(n={}),Rf(t.map(function(a){return zg(a,e)}),n)}function as(t,e,n){if(n===void 0&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var a={type:"LineString",coordinates:t};return Xc(a,e,n)}function BH(t,e,n){return n===void 0&&(n={}),Rf(t.map(function(a){return as(a,e)}),n)}function Rf(t,e){e===void 0&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function N2(t,e,n){n===void 0&&(n={});var a={type:"MultiLineString",coordinates:t};return Xc(a,e,n)}function yP(t,e,n){n===void 0&&(n={});var a={type:"MultiPoint",coordinates:t};return Xc(a,e,n)}function vP(t,e,n){n===void 0&&(n={});var a={type:"MultiPolygon",coordinates:t};return Xc(a,e,n)}function NH(t,e,n){n===void 0&&(n={});var a={type:"GeometryCollection",geometries:t};return Xc(a,e,n)}function jH(t,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function j2(t,e){e===void 0&&(e="kilometers");var n=B2[e];if(!n)throw new Error(e+" units is invalid");return t*n}function V2(t,e){e===void 0&&(e="kilometers");var n=B2[e];if(!n)throw new Error(e+" units is invalid");return t/n}function VH(t,e){return U2(V2(t,e))}function _P(t){var e=t%360;return e<0&&(e+=360),e}function U2(t){var e=t%(2*Math.PI);return e*180/Math.PI}function ld(t){var e=t%360;return e*Math.PI/180}function UH(t,e,n){if(e===void 0&&(e="kilometers"),n===void 0&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return j2(V2(t,e),n)}function HH(t,e,n){if(e===void 0&&(e="meters"),n===void 0&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var a=Mw[e];if(!a)throw new Error("invalid original units");var s=Mw[n];if(!s)throw new Error("invalid final units");return t/a*s}function L1(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function H2(t){return!!t&&t.constructor===Object}function GH(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(t.length!==4&&t.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(e){if(!L1(e))throw new Error("bbox must only contain numbers")})}function $H(t){if(!t)throw new Error("id is required");if(["string","number"].indexOf(typeof t)===-1)throw new Error("id must be a number or a string")}const ZH=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:Mw,bearingToAzimuth:_P,convertArea:HH,convertLength:UH,degreesToRadians:ld,earthRadius:xs,factors:B2,feature:Xc,featureCollection:Rf,geometry:OH,geometryCollection:NH,isNumber:L1,isObject:H2,lengthToDegrees:VH,lengthToRadians:V2,lineString:as,lineStrings:BH,multiLineString:N2,multiPoint:yP,multiPolygon:vP,point:Aa,points:zH,polygon:zg,polygons:FH,radiansToDegrees:U2,radiansToLength:j2,round:jH,unitsFactors:DH,validateBBox:GH,validateId:$H},Symbol.toStringTag,{value:"Module"}));function Kp(t,e,n){if(t!==null)for(var a,s,d,l,o,g,_,I=0,C=0,E,S=t.type,k=S==="FeatureCollection",D=S==="Feature",N=k?t.features.length:1,U=0;U<N;U++){_=k?t.features[U].geometry:D?t.geometry:t,E=_?_.type==="GeometryCollection":!1,o=E?_.geometries.length:1;for(var F=0;F<o;F++){var j=0,$=0;if(l=E?_.geometries[F]:_,l!==null){g=l.coordinates;var K=l.type;switch(I=n&&(K==="Polygon"||K==="MultiPolygon")?1:0,K){case null:break;case"Point":if(e(g,C,U,j,$)===!1)return!1;C++,j++;break;case"LineString":case"MultiPoint":for(a=0;a<g.length;a++){if(e(g[a],C,U,j,$)===!1)return!1;C++,K==="MultiPoint"&&j++}K==="LineString"&&j++;break;case"Polygon":case"MultiLineString":for(a=0;a<g.length;a++){for(s=0;s<g[a].length-I;s++){if(e(g[a][s],C,U,j,$)===!1)return!1;C++}K==="MultiLineString"&&j++,K==="Polygon"&&$++}K==="Polygon"&&j++;break;case"MultiPolygon":for(a=0;a<g.length;a++){for($=0,s=0;s<g[a].length;s++){for(d=0;d<g[a][s].length-I;d++){if(e(g[a][s][d],C,U,j,$)===!1)return!1;C++}$++}j++}break;case"GeometryCollection":for(a=0;a<l.geometries.length;a++)if(Kp(l.geometries[a],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function WH(t,e,n,a){var s=n;return Kp(t,function(d,l,o,g,_){l===0&&n===void 0?s=d:s=e(s,d,l,o,g,_)},a),s}function bP(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&e(t.features[n].properties,n)!==!1;n++);break;case"Feature":e(t.properties,0);break}}function qH(t,e,n){var a=n;return bP(t,function(s,d){d===0&&n===void 0?a=s:a=e(a,s,d)}),a}function R1(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var n=0;n<t.features.length&&e(t.features[n],n)!==!1;n++);}function KH(t,e,n){var a=n;return R1(t,function(s,d){d===0&&n===void 0?a=s:a=e(a,s,d)}),a}function YH(t){var e=[];return Kp(t,function(n){e.push(n)}),e}function G2(t,e){var n,a,s,d,l,o,g,_,I,C,E=0,S=t.type==="FeatureCollection",k=t.type==="Feature",D=S?t.features.length:1;for(n=0;n<D;n++){for(o=S?t.features[n].geometry:k?t.geometry:t,_=S?t.features[n].properties:k?t.properties:{},I=S?t.features[n].bbox:k?t.bbox:void 0,C=S?t.features[n].id:k?t.id:void 0,g=o?o.type==="GeometryCollection":!1,l=g?o.geometries.length:1,s=0;s<l;s++){if(d=g?o.geometries[s]:o,d===null){if(e(null,E,_,I,C)===!1)return!1;continue}switch(d.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(d,E,_,I,C)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<d.geometries.length;a++)if(e(d.geometries[a],E,_,I,C)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}E++}}function xP(t,e,n){var a=n;return G2(t,function(s,d,l,o,g){d===0&&n===void 0?a=s:a=e(a,s,d,l,o,g)}),a}function md(t,e){G2(t,function(n,a,s,d,l){var o=n===null?null:n.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return e(Xc(n,s,{bbox:d,id:l}),a,0)===!1?!1:void 0}var g;switch(o){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon";break}for(var _=0;_<n.coordinates.length;_++){var I=n.coordinates[_],C={type:g,coordinates:I};if(e(Xc(C,s),a,_)===!1)return!1}})}function XH(t,e,n){var a=n;return md(t,function(s,d,l){d===0&&l===0&&n===void 0?a=s:a=e(a,s,d,l)}),a}function AP(t,e){md(t,function(n,a,s){var d=0;if(n.geometry){var l=n.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var o,g=0,_=0,I=0;if(Kp(n,function(C,E,S,k,D){if(o===void 0||a>g||k>_||D>I){o=C,g=a,_=k,I=D,d=0;return}var N=as([o,C],n.properties);if(e(N,a,s,D,d)===!1)return!1;d++,o=C})===!1)return!1}}})}function wP(t,e,n){var a=n,s=!1;return AP(t,function(d,l,o,g,_){s===!1&&n===void 0?a=d:a=e(a,d,l,o,g,_),s=!0}),a}function CP(t,e){if(!t)throw new Error("geojson is required");md(t,function(n,a,s){if(n.geometry!==null){var d=n.geometry.type,l=n.geometry.coordinates;switch(d){case"LineString":if(e(n,a,s,0,0)===!1)return!1;break;case"Polygon":for(var o=0;o<l.length;o++)if(e(as(l[o],n.properties),a,s,o)===!1)return!1;break}}})}function QH(t,e,n){var a=n;return CP(t,function(s,d,l,o){d===0&&n===void 0?a=s:a=e(a,s,d,l,o)}),a}function JH(t,e){if(e=e||{},!H2(e))throw new Error("options is invalid");var n=e.featureIndex||0,a=e.multiFeatureIndex||0,s=e.geometryIndex||0,d=e.segmentIndex||0,l=e.properties,o;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),l=l||t.features[n].properties,o=t.features[n].geometry;break;case"Feature":l=l||t.properties,o=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=t;break;default:throw new Error("geojson is invalid")}if(o===null)return null;var g=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=g.length+d-1),as([g[d],g[d+1]],l,e);case"Polygon":return s<0&&(s=g.length+s),d<0&&(d=g[s].length+d-1),as([g[s][d],g[s][d+1]],l,e);case"MultiLineString":return a<0&&(a=g.length+a),d<0&&(d=g[a].length+d-1),as([g[a][d],g[a][d+1]],l,e);case"MultiPolygon":return a<0&&(a=g.length+a),s<0&&(s=g[a].length+s),d<0&&(d=g[a][s].length-d-1),as([g[a][s][d],g[a][s][d+1]],l,e)}throw new Error("geojson is invalid")}function tG(t,e){if(e=e||{},!H2(e))throw new Error("options is invalid");var n=e.featureIndex||0,a=e.multiFeatureIndex||0,s=e.geometryIndex||0,d=e.coordIndex||0,l=e.properties,o;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),l=l||t.features[n].properties,o=t.features[n].geometry;break;case"Feature":l=l||t.properties,o=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=t;break;default:throw new Error("geojson is invalid")}if(o===null)return null;var g=o.coordinates;switch(o.type){case"Point":return Aa(g,l,e);case"MultiPoint":return a<0&&(a=g.length+a),Aa(g[a],l,e);case"LineString":return d<0&&(d=g.length+d),Aa(g[d],l,e);case"Polygon":return s<0&&(s=g.length+s),d<0&&(d=g[s].length+d),Aa(g[s][d],l,e);case"MultiLineString":return a<0&&(a=g.length+a),d<0&&(d=g[a].length+d),Aa(g[a][d],l,e);case"MultiPolygon":return a<0&&(a=g.length+a),s<0&&(s=g[a].length+s),d<0&&(d=g[a][s].length-d),Aa(g[a][s][d],l,e)}throw new Error("geojson is invalid")}const eG=Object.freeze(Object.defineProperty({__proto__:null,coordAll:YH,coordEach:Kp,coordReduce:WH,featureEach:R1,featureReduce:KH,findPoint:tG,findSegment:JH,flattenEach:md,flattenReduce:XH,geomEach:G2,geomReduce:xP,lineEach:CP,lineReduce:QH,propEach:bP,propReduce:qH,segmentEach:AP,segmentReduce:wP},Symbol.toStringTag,{value:"Module"}));function Df(t){var e=[1/0,1/0,-1/0,-1/0];return Kp(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}Df.default=Df;const nG=Object.freeze(Object.defineProperty({__proto__:null,default:Df},Symbol.toStringTag,{value:"Module"}));function Oy(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function zy(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Lb(t){return t.type==="Feature"?t.geometry:t}function Fy(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var a=Oy(t),s=Lb(e),d=s.type,l=e.bbox,o=s.coordinates;if(l&&rG(a,l)===!1)return!1;d==="Polygon"&&(o=[o]);for(var g=!1,_=0;_<o.length&&!g;_++)if(yM(a,o[_][0],n.ignoreBoundary)){for(var I=!1,C=1;C<o[_].length&&!I;)yM(a,o[_][C],!n.ignoreBoundary)&&(I=!0),C++;I||(g=!0)}return g}function yM(t,e,n){var a=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var s=0,d=e.length-1;s<e.length;d=s++){var l=e[s][0],o=e[s][1],g=e[d][0],_=e[d][1],I=t[1]*(l-g)+o*(g-t[0])+_*(t[0]-l)===0&&(l-t[0])*(g-t[0])<=0&&(o-t[1])*(_-t[1])<=0;if(I)return!n;var C=o>t[1]!=_>t[1]&&t[0]<(g-l)*(t[1]-o)/(_-o)+l;C&&(a=!a)}return a}function rG(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function iG(t,e,n){n===void 0&&(n={});var a=Oy(t),s=Oy(e),d=ld(s[1]-a[1]),l=ld(s[0]-a[0]),o=ld(a[1]),g=ld(s[1]),_=Math.pow(Math.sin(d/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(o)*Math.cos(g);return j2(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),n.units)}function IP(t,e,n){if(n===void 0&&(n={}),n.final===!0)return oG(t,e);var a=Oy(t),s=Oy(e),d=ld(a[0]),l=ld(s[0]),o=ld(a[1]),g=ld(s[1]),_=Math.sin(l-d)*Math.cos(g),I=Math.cos(o)*Math.sin(g)-Math.sin(o)*Math.cos(g)*Math.cos(l-d);return U2(Math.atan2(_,I))}function oG(t,e){var n=IP(e,t);return n=(n+180)%360,n}function aG(t,e){e===void 0&&(e={});var n=Df(t),a=(n[0]+n[2])/2,s=(n[1]+n[3])/2;return Aa([a,s],e.properties,e)}function sG(t,e){e===void 0&&(e={});var n=0,a=0,s=0;return Kp(t,function(d){n+=d[0],a+=d[1],s++},!0),Aa([n/s,a/s],e.properties)}function vM(t){if(!t)throw new Error("geojson is required");var e=[];return md(t,function(n){lG(n,e)}),Rf(e)}function lG(t,e){var n=[],a=t.geometry;if(a!==null){switch(a.type){case"Polygon":n=zy(a);break;case"LineString":n=[zy(a)]}n.forEach(function(s){var d=cG(s,t.properties);d.forEach(function(l){l.id=e.length,e.push(l)})})}}function cG(t,e){var n=[];return t.reduce(function(a,s){var d=as([a,s],e);return d.bbox=uG(a,s),n.push(d),s}),n}function uG(t,e){var n=t[0],a=t[1],s=e[0],d=e[1],l=n<s?n:s,o=a<d?a:d,g=n>s?n:s,_=a>d?a:d;return[l,o,g,_]}var $2={exports:{}},MP={exports:{}};(function(t,e){(function(n,a){t.exports=a()})(Io,function(){function n(F,j,$,K,tt){(function it(et,q,ut,Ct,ot){for(;Ct>ut;){if(Ct-ut>600){var bt=Ct-ut+1,X=q-ut+1,Wt=Math.log(bt),Vt=.5*Math.exp(2*Wt/3),Bt=.5*Math.sqrt(Wt*Vt*(bt-Vt)/bt)*(X-bt/2<0?-1:1),ae=Math.max(ut,Math.floor(q-X*Vt/bt+Bt)),ye=Math.min(Ct,Math.floor(q+(bt-X)*Vt/bt+Bt));it(et,q,ae,ye,ot)}var en=et[q],Jt=ut,Gt=Ct;for(a(et,ut,q),ot(et[Ct],en)>0&&a(et,ut,Ct);Jt<Gt;){for(a(et,Jt,Gt),Jt++,Gt--;ot(et[Jt],en)<0;)Jt++;for(;ot(et[Gt],en)>0;)Gt--}ot(et[ut],en)===0?a(et,ut,Gt):a(et,++Gt,Ct),Gt<=q&&(ut=Gt+1),q<=Gt&&(Ct=Gt-1)}})(F,j,$||0,K||F.length-1,tt||s)}function a(F,j,$){var K=F[j];F[j]=F[$],F[$]=K}function s(F,j){return F<j?-1:F>j?1:0}var d=function(F){F===void 0&&(F=9),this._maxEntries=Math.max(4,F),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(F,j,$){if(!$)return j.indexOf(F);for(var K=0;K<j.length;K++)if($(F,j[K]))return K;return-1}function o(F,j){g(F,0,F.children.length,j,F)}function g(F,j,$,K,tt){tt||(tt=N(null)),tt.minX=1/0,tt.minY=1/0,tt.maxX=-1/0,tt.maxY=-1/0;for(var it=j;it<$;it++){var et=F.children[it];_(tt,F.leaf?K(et):et)}return tt}function _(F,j){return F.minX=Math.min(F.minX,j.minX),F.minY=Math.min(F.minY,j.minY),F.maxX=Math.max(F.maxX,j.maxX),F.maxY=Math.max(F.maxY,j.maxY),F}function I(F,j){return F.minX-j.minX}function C(F,j){return F.minY-j.minY}function E(F){return(F.maxX-F.minX)*(F.maxY-F.minY)}function S(F){return F.maxX-F.minX+(F.maxY-F.minY)}function k(F,j){return F.minX<=j.minX&&F.minY<=j.minY&&j.maxX<=F.maxX&&j.maxY<=F.maxY}function D(F,j){return j.minX<=F.maxX&&j.minY<=F.maxY&&j.maxX>=F.minX&&j.maxY>=F.minY}function N(F){return{children:F,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function U(F,j,$,K,tt){for(var it=[j,$];it.length;)if(!(($=it.pop())-(j=it.pop())<=K)){var et=j+Math.ceil(($-j)/K/2)*K;n(F,et,j,$,tt),it.push(j,et,et,$)}}return d.prototype.all=function(){return this._all(this.data,[])},d.prototype.search=function(F){var j=this.data,$=[];if(!D(F,j))return $;for(var K=this.toBBox,tt=[];j;){for(var it=0;it<j.children.length;it++){var et=j.children[it],q=j.leaf?K(et):et;D(F,q)&&(j.leaf?$.push(et):k(F,q)?this._all(et,$):tt.push(et))}j=tt.pop()}return $},d.prototype.collides=function(F){var j=this.data;if(!D(F,j))return!1;for(var $=[];j;){for(var K=0;K<j.children.length;K++){var tt=j.children[K],it=j.leaf?this.toBBox(tt):tt;if(D(F,it)){if(j.leaf||k(F,it))return!0;$.push(tt)}}j=$.pop()}return!1},d.prototype.load=function(F){if(!F||!F.length)return this;if(F.length<this._minEntries){for(var j=0;j<F.length;j++)this.insert(F[j]);return this}var $=this._build(F.slice(),0,F.length-1,0);if(this.data.children.length)if(this.data.height===$.height)this._splitRoot(this.data,$);else{if(this.data.height<$.height){var K=this.data;this.data=$,$=K}this._insert($,this.data.height-$.height-1,!0)}else this.data=$;return this},d.prototype.insert=function(F){return F&&this._insert(F,this.data.height-1),this},d.prototype.clear=function(){return this.data=N([]),this},d.prototype.remove=function(F,j){if(!F)return this;for(var $,K,tt,it=this.data,et=this.toBBox(F),q=[],ut=[];it||q.length;){if(it||(it=q.pop(),K=q[q.length-1],$=ut.pop(),tt=!0),it.leaf){var Ct=l(F,it.children,j);if(Ct!==-1)return it.children.splice(Ct,1),q.push(it),this._condense(q),this}tt||it.leaf||!k(it,et)?K?($++,it=K.children[$],tt=!1):it=null:(q.push(it),ut.push($),$=0,K=it,it=it.children[0])}return this},d.prototype.toBBox=function(F){return F},d.prototype.compareMinX=function(F,j){return F.minX-j.minX},d.prototype.compareMinY=function(F,j){return F.minY-j.minY},d.prototype.toJSON=function(){return this.data},d.prototype.fromJSON=function(F){return this.data=F,this},d.prototype._all=function(F,j){for(var $=[];F;)F.leaf?j.push.apply(j,F.children):$.push.apply($,F.children),F=$.pop();return j},d.prototype._build=function(F,j,$,K){var tt,it=$-j+1,et=this._maxEntries;if(it<=et)return o(tt=N(F.slice(j,$+1)),this.toBBox),tt;K||(K=Math.ceil(Math.log(it)/Math.log(et)),et=Math.ceil(it/Math.pow(et,K-1))),(tt=N([])).leaf=!1,tt.height=K;var q=Math.ceil(it/et),ut=q*Math.ceil(Math.sqrt(et));U(F,j,$,ut,this.compareMinX);for(var Ct=j;Ct<=$;Ct+=ut){var ot=Math.min(Ct+ut-1,$);U(F,Ct,ot,q,this.compareMinY);for(var bt=Ct;bt<=ot;bt+=q){var X=Math.min(bt+q-1,ot);tt.children.push(this._build(F,bt,X,K-1))}}return o(tt,this.toBBox),tt},d.prototype._chooseSubtree=function(F,j,$,K){for(;K.push(j),!j.leaf&&K.length-1!==$;){for(var tt=1/0,it=1/0,et=void 0,q=0;q<j.children.length;q++){var ut=j.children[q],Ct=E(ut),ot=(bt=F,X=ut,(Math.max(X.maxX,bt.maxX)-Math.min(X.minX,bt.minX))*(Math.max(X.maxY,bt.maxY)-Math.min(X.minY,bt.minY))-Ct);ot<it?(it=ot,tt=Ct<tt?Ct:tt,et=ut):ot===it&&Ct<tt&&(tt=Ct,et=ut)}j=et||j.children[0]}var bt,X;return j},d.prototype._insert=function(F,j,$){var K=$?F:this.toBBox(F),tt=[],it=this._chooseSubtree(K,this.data,j,tt);for(it.children.push(F),_(it,K);j>=0&&tt[j].children.length>this._maxEntries;)this._split(tt,j),j--;this._adjustParentBBoxes(K,tt,j)},d.prototype._split=function(F,j){var $=F[j],K=$.children.length,tt=this._minEntries;this._chooseSplitAxis($,tt,K);var it=this._chooseSplitIndex($,tt,K),et=N($.children.splice(it,$.children.length-it));et.height=$.height,et.leaf=$.leaf,o($,this.toBBox),o(et,this.toBBox),j?F[j-1].children.push(et):this._splitRoot($,et)},d.prototype._splitRoot=function(F,j){this.data=N([F,j]),this.data.height=F.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},d.prototype._chooseSplitIndex=function(F,j,$){for(var K,tt,it,et,q,ut,Ct,ot=1/0,bt=1/0,X=j;X<=$-j;X++){var Wt=g(F,0,X,this.toBBox),Vt=g(F,X,$,this.toBBox),Bt=(tt=Wt,it=Vt,et=void 0,q=void 0,ut=void 0,Ct=void 0,et=Math.max(tt.minX,it.minX),q=Math.max(tt.minY,it.minY),ut=Math.min(tt.maxX,it.maxX),Ct=Math.min(tt.maxY,it.maxY),Math.max(0,ut-et)*Math.max(0,Ct-q)),ae=E(Wt)+E(Vt);Bt<ot?(ot=Bt,K=X,bt=ae<bt?ae:bt):Bt===ot&&ae<bt&&(bt=ae,K=X)}return K||$-j},d.prototype._chooseSplitAxis=function(F,j,$){var K=F.leaf?this.compareMinX:I,tt=F.leaf?this.compareMinY:C;this._allDistMargin(F,j,$,K)<this._allDistMargin(F,j,$,tt)&&F.children.sort(K)},d.prototype._allDistMargin=function(F,j,$,K){F.children.sort(K);for(var tt=this.toBBox,it=g(F,0,j,tt),et=g(F,$-j,$,tt),q=S(it)+S(et),ut=j;ut<$-j;ut++){var Ct=F.children[ut];_(it,F.leaf?tt(Ct):Ct),q+=S(it)}for(var ot=$-j-1;ot>=j;ot--){var bt=F.children[ot];_(et,F.leaf?tt(bt):bt),q+=S(et)}return q},d.prototype._adjustParentBBoxes=function(F,j,$){for(var K=$;K>=0;K--)_(j[K],F)},d.prototype._condense=function(F){for(var j=F.length-1,$=void 0;j>=0;j--)F[j].children.length===0?j>0?($=F[j-1].children).splice($.indexOf(F[j]),1):this.clear():o(F[j],this.toBBox)},d})})(MP);var hG=MP.exports;const dG=Zy(ZH),fG=Zy(eG),pG=Zy(nG);var gh=hG,SP=dG,EP=fG,Bm=pG.default,mG=EP.featureEach;EP.coordEach;SP.polygon;var _M=SP.featureCollection;function TP(t){var e=new gh(t);return e.insert=function(n){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Bm(n),gh.prototype.insert.call(this,n)},e.load=function(n){var a=[];return Array.isArray(n)?n.forEach(function(s){if(s.type!=="Feature")throw new Error("invalid features");s.bbox=s.bbox?s.bbox:Bm(s),a.push(s)}):mG(n,function(s){if(s.type!=="Feature")throw new Error("invalid features");s.bbox=s.bbox?s.bbox:Bm(s),a.push(s)}),gh.prototype.load.call(this,a)},e.remove=function(n,a){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Bm(n),gh.prototype.remove.call(this,n,a)},e.clear=function(){return gh.prototype.clear.call(this)},e.search=function(n){var a=gh.prototype.search.call(this,this.toBBox(n));return _M(a)},e.collides=function(n){return gh.prototype.collides.call(this,this.toBBox(n))},e.all=function(){var n=gh.prototype.all.call(this);return _M(n)},e.toJSON=function(){return gh.prototype.toJSON.call(this)},e.fromJSON=function(n){return gh.prototype.fromJSON.call(this,n)},e.toBBox=function(n){var a;if(n.bbox)a=n.bbox;else if(Array.isArray(n)&&n.length===4)a=n;else if(Array.isArray(n)&&n.length===6)a=[n[0],n[1],n[3],n[4]];else if(n.type==="Feature")a=Bm(n);else if(n.type==="FeatureCollection")a=Bm(n);else throw new Error("invalid geojson");return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}},e}$2.exports=TP;$2.exports.default=TP;var gG=$2.exports;const yG=Wp(gG);function Z2(t,e){var n={},a=[];if(t.type==="LineString"&&(t=Xc(t)),e.type==="LineString"&&(e=Xc(e)),t.type==="Feature"&&e.type==="Feature"&&t.geometry!==null&&e.geometry!==null&&t.geometry.type==="LineString"&&e.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var s=bM(t,e);return s&&a.push(s),Rf(a)}var d=yG();return d.load(vM(e)),R1(vM(t),function(l){R1(d.search(l),function(o){var g=bM(l,o);if(g){var _=zy(g).join(",");n[_]||(n[_]=!0,a.push(g))}})}),Rf(a)}function bM(t,e){var n=zy(t),a=zy(e);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(a.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var s=n[0][0],d=n[0][1],l=n[1][0],o=n[1][1],g=a[0][0],_=a[0][1],I=a[1][0],C=a[1][1],E=(C-_)*(l-s)-(I-g)*(o-d),S=(I-g)*(d-_)-(C-_)*(s-g),k=(l-s)*(d-_)-(o-d)*(s-g);if(E===0)return null;var D=S/E,N=k/E;if(D>=0&&D<=1&&N>=0&&N<=1){var U=s+D*(l-s),F=d+D*(o-d);return Aa([U,F])}return null}var xM=6378137;function vG(t){return xP(t,function(e,n){return e+_G(n)},0)}function _G(t){var e=0,n;switch(t.type){case"Polygon":return AM(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=AM(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function AM(t){var e=0;if(t&&t.length>0){e+=Math.abs(wM(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(wM(t[n]))}return e}function wM(t){var e,n,a,s,d,l,o,g=0,_=t.length;if(_>2){for(o=0;o<_;o++)o===_-2?(s=_-2,d=_-1,l=0):o===_-1?(s=_-1,d=0,l=1):(s=o,d=o+1,l=o+2),e=t[s],n=t[d],a=t[l],g+=(vA(a[0])-vA(e[0]))*Math.sin(vA(n[1]));g=g*xM*xM/2}return g}function vA(t){return t*Math.PI/180}function CM(t,e){return e===void 0&&(e={}),wP(t,function(n,a){var s=a.geometry.coordinates;return n+iG(s[0],s[1],e)},0)}function Sw(t,e){e===void 0&&(e={});var n=Lb(t);switch(!e.properties&&t.type==="Feature"&&(e.properties=t.properties),n.type){case"Polygon":return bG(n,e);case"MultiPolygon":return xG(n,e);default:throw new Error("invalid poly")}}function bG(t,e){e===void 0&&(e={});var n=Lb(t),a=n.coordinates,s=e.properties?e.properties:t.type==="Feature"?t.properties:{};return PP(a,s)}function xG(t,e){e===void 0&&(e={});var n=Lb(t),a=n.coordinates,s=e.properties?e.properties:t.type==="Feature"?t.properties:{},d=[];return a.forEach(function(l){d.push(PP(l,s))}),Rf(d)}function PP(t,e){return t.length>1?N2(t,e):as(t[0],e)}function AG(t,e){var n=!0;return md(t,function(a){md(e,function(s){if(n===!1)return!1;n=wG(a.geometry,s.geometry)})}),n}function wG(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!SG(t.coordinates,e.coordinates);case"LineString":return!IM(e,t);case"Polygon":return!Fy(t,e)}break;case"LineString":switch(e.type){case"Point":return!IM(t,e);case"LineString":return!CG(t,e);case"Polygon":return!MM(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Fy(e,t);case"LineString":return!MM(t,e);case"Polygon":return!IG(e,t)}}return!1}function IM(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(MG(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function CG(t,e){var n=Z2(t,e);return n.features.length>0}function MM(t,e){for(var n=0,a=e.coordinates;n<a.length;n++){var s=a[n];if(Fy(s,t))return!0}var d=Z2(e,Sw(t));return d.features.length>0}function IG(t,e){for(var n=0,a=t.coordinates[0];n<a.length;n++){var s=a[n];if(Fy(s,e))return!0}for(var d=0,l=e.coordinates[0];d<l.length;d++){var o=l[d];if(Fy(o,t))return!0}var g=Z2(Sw(t),Sw(e));return g.features.length>0}function MG(t,e,n){var a=n[0]-t[0],s=n[1]-t[1],d=e[0]-t[0],l=e[1]-t[1],o=a*l-s*d;return o!==0?!1:Math.abs(d)>=Math.abs(l)?d>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:l>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]}function SG(t,e){return t[0]===e[0]&&t[1]===e[1]}function EG(t,e){var n=!1;return md(t,function(a){md(e,function(s){if(n===!0)return!0;n=!AG(a.geometry,s.geometry)})}),n}function kP(t,e,{zoom:n=15}={}){if(!e||!t)return;const a={top:50,bottom:50,left:50,right:50};if(["Point"].includes(e.type)){t.easeTo({center:e.coordinates,zoom:n,duration:0,padding:a});return}a.left=a.left,a.right=a.right;let s;e.length==4?s=e:s=TG(e),s&&t.fitBounds(s,{padding:a,duration:0})}function TG(t){if(!t.type)return;let e;return["Feature","FeatureCollection"].includes(t.type)?e=Df(t):e=Df({type:"Feature",properties:{},geometry:t}),e}function PG(t,e={}){if(t.length!=0)return t.length==1?Aa(t[0],e):t.length==2?as(t,e):zg([[...t,t[0]]],e)}const fy="base_map_control_";class kG{constructor(){this._baseMap=void 0,this.layers=[],this.sources={}}getBeforeId(){return this.layers[0].id}async setBaseMap(e){if(this._baseMap&&this._baseMap.id===e.id)return;this._baseMap=e;const{sources:n,layers:a}=await LG(e.type)(e);this.layers=a,this.sources=n}addToMap(e,n){for(const a in this.sources)if(Object.hasOwnProperty.call(this.sources,a)){const s=this.sources[a];e.getSource(a)||e.addSource(a,s)}this.layers.forEach(a=>{e.getLayer(a.id)||e.addLayer(a,n)})}removeFromMap(e){this.layers.forEach(n=>{e.getLayer(n.id)&&e.removeLayer(n.id)});for(const n in this.sources)e.getSource(n)&&e.removeSource(n)}}function LG(t){switch(t){case"vector":return DG;case"raster":return OG;case"no-basemap":return RG;default:throw new Error(`Not support ${t}`)}}async function RG(){return{layers:[],sources:{}}}async function DG(t){const e=await fetch(t.links[0]).then(l=>l.json()),n=[],a={};for(const l in e.sources){const o=fy+l;a[o]=e.sources[l]}for(const l of e.layers){const o=fy+l.id,g=fy+l.source;n.push(Object.assign(l,{id:o,source:g}))}const s=e.glyphs,d=e.sprite;return{layers:n,sources:a,glyphs:s,sprite:d}}async function OG(t){if(!t)throw new Error("Not found item");const e=`${fy}layer`,n=`${fy}source`,a={};return a[n]={type:"raster",tiles:t.links,scheme:t.scheme||"xyz",maxzoom:t.maxzoom||22,minzoom:t.minzoom||0,tileSize:t.tileSize||256},{layers:[{id:e,type:"raster",source:n}],sources:a}}const W2="basemap";function LP(t){const e=Vu(t,W2,ls({baseMaps:[],defaultBaseMap:"",current:void 0,layer:void 0,loading:!1}));function n(o){e.baseMaps=o}function a(o){e.defaultBaseMap=o,e.current||s(zG(t))}function s(o){e.current=o,BG(t,e.current)}const d=bn(()=>e.baseMaps),l=bn(()=>e.current);return{setBaseMaps:n,baseMaps:d,setDefaultBaseMap:a,setCurrent:s,currentBaseMap:l}}function zG(t){const e=Bo(t,W2),n=e.baseMaps.findIndex(s=>s.default||s.title===e.defaultBaseMap),a=n<0?0:n;return e.baseMaps[a]}function FG(t){const e=t.getStyle().layers;return e.length>0?e[0].id:void 0}const BG=async(t,e)=>{if(!e)return;const n=Bo(t,W2);if(n.loading)return;n.current=e,n.loading=!0;let a=n.layer;a||(n.layer=new kG,a=n.layer),wl.actions.getMap(t,s=>{a.removeFromMap(s)}),await a.setBaseMap(e),wl.actions.getMap(t,s=>{a.addToMap(s,FG(s))}),n.loading=!1},NG={class:"base-map-card"},jG={class:"base-map-card__image"},VG={class:"base-map-card__content"},UG={class:"base-map-card__title"},HG=rr({__name:"BaseMapCard",props:{mapId:{type:String,required:!0},title:{type:String,default:""}},setup(t){const e=t,{mapId:n}=Ai(e),{trans:a}=jo(n.value),{baseMaps:s,setCurrent:d,currentBaseMap:l}=LP(n.value),o=g=>{d(g)};return(g,_)=>(St(),pe("div",NG,[zt("div",jG,[ct(l)?(St(),tn(ct(mw),{key:0,src:ct(l).thumbnail},null,8,["src"])):Cn("",!0)]),zt("div",VG,[zt("div",UG,Rn(t.title||ct(a)("map.basemap.title")),1),zt("div",null,[te(ct(Tf),{modelValue:ct(l),items:ct(s),returnObject:"",itemText:"title",itemValue:"id","onUpdate:modelValue":o},null,8,["modelValue","items"])])])]))}}),GG=Vn(HG,[["__scopeId","data-v-20f20e83"]]),$G=[{link:"",thumbnail:"/static/img/icon-stack.png",type:"no-basemap",title:"None",id:"null"},{id:1,title:"Streets",type:"vector",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9TfE2haV8QDcaOLS60zxBp9rHc2wJDfaGeEOYiOATgLk8fNzk4Iat+y1f3em+K9U014pESRFadHjwYnTcBnJGDk4xtJOe2Kzfhc15q1vrer2MNlNdwoqTWHkJ/pysvOG+8nKbgOjFeQTk1l+BvHN18LvihcXWppPMxaS3v4xIXdsnOQWPzEEAgk8jPPOa+5WGnPDYnK6UlJxUXyt3alo5WvrZ7rVpN77pfkMcfRhjMJm1SLgpSknJKycLtRvbS61T0TaWq2b92+J3jjTfBnh6T7dcxxyXMbiCFgS1xgDIAHPcc8AZGTXyw0nnOzEsxYkks24k+57mtPxl4ouPF3im81GWWVjNMzQ7mJ8lNxKquScAA9BTNS1K78X6kh8lGlWIqkcEeMKoLtgcn+83tzjA4r2chyf+zaV5auSvJt2tbZJW83d36Hi8UcQLN63uqyg7QSV3K+7bv5KyS6/Mb4Y8OXHi3W4bC12edMT8zkhUAGSTjPAFdV4r+BWoaFp32mzmGoLDEZJ0CbJFx1Krk7gPz9qufCq9sfDPhDVNUt2Da0lnM+6bmKFVYBVwOfmYoTnrlRkd+40DTI/Eej2Sz2l7NbWkiyxPfEidmAYZK8lhl+S2AcngACvk+JOLsdg8bzUPdo03ytOKvN2u7XadtUlZ66vZWfr5Hwxg8Tg7VveqzXMmm/dTdlsmr7t3Wmi3PMPDHgDW9e8PvaW9htt725SRrxpQqL5YddrDqy5fOVzgg/eIwvdeDPhlZWGo2PnWzQ3+n2MTSH5XXzWkk37uSDkAgZH3T2YA13fI9fancKDxgtySO56fyA/Kvgsz48x2OjOCSpxfZu+umt3reOlrJfjf7HLeEMJhXGUm5uPe3rppprre7fntZxG8YPIP61Sm8M6ZPNE0mnWLtCCsZNuh2ArtIHHTHGPpU3lZuBJuk3Ku0DzG2Y/3c4J98ZqTLZr4uGJnDWk2vQ+pnThP41f8TjdG+Amhabp0sE32y9M6pueSXbsZQfmQKBjOe+7oPfPK67+zje288f8AZ15Dcw7RvM/7uQNk5wACCMY6kd69H8T+O9M8GRw/2lc+Q0+fLVUZ2YDqcKDx2z0rBufjdZWcTXclneHSnlaG1uUXLXjLt3FVbbtUZYEk84GBncF/QMozrimUvrWH5pqf8y91tae7eyvpqo9m2rJtfGZnlfDqj9XrcsHDs/eSevvWvp5y72WrV/LPHHw91DwFLEt5GrJIDtuInLRSe3IBUjI4PXPFdZYfs6vqPh62uF1eEXU6CUqIxJAARkAOrc/7wyD29+Y8XfFDUvFN/duks1na3aoptRMXjGw5XsO4BPHJ9uK9Oi+Leh6H4XtJ/tN5fCRmU/ulWbd947lAVRyeMYHB5yDX3Od47iTD4PDKjFe2k3zcq5ul7O6aXW9nZ2urbL5HJ8HkFfFYh1X+6ily8z5etrqzTfTdXV7Pu+R0b4Da7p2rrcrLpTGxnSSIPIzLOVIYZAXIHGDnHQ/WivTfDXirT/GmlPNYP9ohy0ciuu109iPoR7Givz7M+K8fUrcmY0488dLOG3/ky9T7zLuHsJQpc2Xzlyy1up6P8GUNC1DStN0zUtTtxHZC7KXFykyiFYW2Koz8vQ4znkElsck15F8SPE0PivUFuPKhgvIWMEghAcSoANrmQN87dR04GOTir3xd8b2niq5tlsYEWBk815iiiSc8gKw6jYQ2MnvnpiuNr9H4O4Zlh3/aWJ5lUlok3dxilaz+S6q60WjTv+fcV5/CsvqGGs4R1bSsm3rdf1Z67poK0/Ct5LZ6luit/PxtZ2ETyGFQwJb5CDjs3PKkjvWZXd/AfwvqOpeImv7YywW0IMBnULjedpA+Yjpwx4bgYx81fXZ5iIUcDUqTSats21fstE3+B87kGFq4jMKdKje7fRXa7vVpeup0fh7w9o+gpa6fdQ6TdvNP+9jZkmAZs4BJm6YTI+Q8KBlmGTr2/ivwzaapFZTtYqJ2WWKK56RMxPIDqFQdRndnoAvNZPib4HhdPkudDvZ4XUN5pvhKkkxZlDH7o9BztIOe2ARZ0fwtqXh/WVstWv8Aw9dWJncM7ZMm9tzqJlYqGBAcqGLHjjjNfkGIwFDER+sVMQ6js/dfutPul7yt5XWnVW0/aMPUxmHq/V44VU03H3lZxt2bvF36Xs7PWzur9hb+JoNVubyK133LWJUv5ajDblDAK5IU/KwOc4+YYPWrMd5mMM0ckDt/yzfaSecfwsR75z3Ga5XS4dEi1e9kimttN1C4hRQovjHDNtLncmzaHXhgWB+8p+UHk6ug6dBpF3e6lJYeYxbcblD9paRcHDJ8ztjGM4A+UrwccfMYrBKDTSlFNLddbK9rbq97eVj6HDTlNNTkm05bdru1/O1r+Zp3Kz/Z90ccsrNwBB5ZZf8Aay7AEcfy46062sysSRruVIkCjnPTjBPfp196rz682voBpt9GjKfmJh3qQfUHHTrXD/G26m8OaZpd2s9zJcvcAThbh0imUDkCLcVXAAG4Lnk85PPPgsto4zEQwdF+9K+/e2n9dPvMsxxVLCUJYme0d/S6/rz2Mb49XWn392n2WFJr6BVN1cx5bylJxGjEcf3uozyvPauCv9dudS06xtJXzBp0bxwIOi7nLsfqSQPoo9KjuZbdLcQ20cqoGDM8rKWcgEZwANo5PGT9TjNQV/Q2RZRHBYOnhpXlyapy3V013dt2kk9Iu3c/nzOczeKxdSvCy591HZ637K+ybb3av2ClZy55JPGOT2pKK908Y6H4X+Lp/CPi2B4lMsV2wt5od2BJu4U9DyGIOcZ6juaKwIJ3tp0kjO2SNg6sOxByDRXwvE/B8MzxMcTCMea1m22r222/rp0PsuHeKJZfQdCbdr3Widu+5v8AhvwdceLjd/YZLYwW2B+/DF8sDjaEUt/CegwPfGaztc8L3nh6d1niJRCAZUBKAnOASQCp4PysAeOmK7n4F6tYLbT2s/2aO4ifzh5zf61euVycArj5uCcY5GK9HvrK18Q2XlTW1te2U65bLhxxgjGOvOMEHjivnMx42xuU5rPCVqd6St/ia095PZt6vt00aPoMJwnhM0y2GKoztUa/7dT/AJWt1bbe/XU+b69O+E3jm30zwp9lN1HDc2zEossssagFi24hSVcZbGCoJ5BOMVynxU0XTfDni+Wy0xZUSBF81WcsquQGwpPOMEZyeua5wjNfd4zCUs9y6Ek5QUrTW1/mtd0+58hl2YV8hzGbjaUo3i+2+tn6rsfSWneMYtW0z7bb3UNx8u0rADdRwNlsHCqJMnGMZAx9Caj8SS3HiDRDHbsyMZEmhdLcCa2kRt+/95Iv8SjGQODg7gTXknwVgN/rl3A1q9zGIBPmJlSWJ1YKpDFl4+c8ZxnBxxXomv262mhapcJPeSSW9tKYZryR2ihkALBgG/dtyAFOCVzx97FfjOcYOvlua/UqdS+sbOye9rX+f4bJn7HledrMMs+tVY6WakvTe3y8zivjV8RNX1C7l0a5e2jiUhpUt3ck85COSFDdFbhe4561l+CfiPJ4X8IajbeZvvIyraZ5yiSO23EiUoD904JI7EscgiuZ1OwurGZGvElSW6QXA80/O6sThjnnnBPPJBB6EVXr9no5Dg5ZfDBySlG6baWjkt3u9Hazu3ppc/HcTxHjXmE8a5SUmnGzeqi1tsrWvdWS11sdn4G+JM+mWd1FqMt7c2rMZBIsu145G/iLY3MOM4z3JwQMVzt9Nc6yZLu9e5lMwcwTXUpbOzllDHgnBA/HgZIqDStZm0Z5/KEbrcwtBLHICUkVh3AIPBwQQeCK0Ev77xe1tp9vbfaJkiCQpDAqyfKMliVC5JwMsRnAGSSMnKOVwweMqYqjTjGM7OUr2tZb2731lsuXu9m8ynjMJTw1SblON1FW3v3fpot3zdkYtFdVrng278O6dcxalo6RSWiRStdwF/lR/lGfm2N820HA7nvzXKjp/hXs4HHwxUXKmtF1umnpe6s30fWz7o8fG4CphZKFXd9LNNdNbpdV0uvMKM0UV3HCFFFFAHRfCaIv8QNPfZI625eVti5KAIQGI64BI6c+nNek/FTxdF4Q0CRLe6u/t+oBTAhZ0aLDcy84YD5SPfp0rifgbcxaX4h1HUZZVjTT9PkmIb+IZXr3xwOnPSuS1TUrnWL17q7eSWaclyzknOSentnNfA5hkcM1z32mI/h0Iw0/mbblb02v5WXVn3WBzuWWZJ7Oh/ErSk7/AMqSjG/r2+8ju7uW/u5Z55HlmmYvI7sWZmPU5NR0UV95CEYRUIKyR8POcpyc5u7Zs/D/AMRr4X8VW9xLJNFbyZgmaN2Uqj8bvlycKdrEY/hrofjB8QbPxXDb21olrNwsktygYnA+6gLorDGWJGO475A4WivExPD2Fr5jTzOr8cFZLp1s35q+n/APaw+f4mhl88up/DN3b69Lpettf+CWta1mfX9QNzcFTIUSPCLtVVRQigDtwoqrRQRivZp04U4KnTVktEuyR405ynJzm7t6sK9X+DHxB8O+C/A0jXxt7fUfPkQlId9xcJhSOQM7ecDJA+U15RRXDmmWU8fR9hVbSunp5dD08mzerluI+s0Ypys1rqtep9I+HPGGk+ONAvZo7qbULUIftMFxCu+BTn5WVF5yAcfezjg5r5zv3tzf3BtN/wBkMreRvB3eXuO3Oec4x15ptvcG3LYAIdGRgehBBH5jOR7in2EkEV2jXMTzwrkmNH2bzjgE+mcZxzjOMda8rKMgWWVa1SlJyjJK0fS/nZvzsj1c94klnEKMK8FGUb3l3vbpul5XZCw2sQeoOCPSin3N1Ley75XeR9qruYknCgKBk88AAfhTK+lhzOK5tz5afKpPl2CiiiqJOPtPiDrGly+bb3hicqUJEafMp6g8cioh4w1Ef8tx/wB+k/woorg295bs9KyfuvYP+Ex1H/n4H/fpP8Kmh8VX72sjGflen7tf8KKKpSl3Dkj2If8AhMNR/wCfgf8AfpP8KP8AhMNR/wCfgf8AfpP8KKKXPLuHJHsH/CYaj/z8D/v0n+FH/CYaj/z8D/v0n+FFFHPLuHJHsH/CYaj/AM/A/wC/Sf4Uf8JhqP8Az8D/AL9J/hRRRzy7hyR7B/wmGo/8/A/79J/hR/wmGo/8/A/79J/hRRRzy7hyR7B/wmGo/wDPwP8Av0n+FH/CYaj/AM/A/wC/Sf4UUUc8u4ckewf8JhqP/PwP+/Sf4UUUUc8u4ckex//Z",links:["https://tiles.eofactory.ai/styles/basic/style.json"]},{id:2,title:"ArcGIS Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABgESAAMAAAABAAEAAAMBAAUAAAABAAAAVgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAAAAAYagAACxj//bAEMAAgEBAgEBAgICAgICAgIDBQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwHCQ4PDQwOCwwMDP/bAEMBAgICAwMDBgMDBgwIBwgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIAEMAeAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APM/GWnaJ+074c1Hw/qNndab4gjCy6BNazG4kku5Yg7W0qyScrKFVWZFOJhGcgErJ7V/wbkfF/X/AIRftrT/AA/ulure28ZWNxZ6pY3MJRorixjmmjchiCsiASJt2klZGzjbkfH+meLxPf6jdraWKfaosXVgIAbe8TKkruOWT5lVgBxlRnPOdj9jD/goJdfsF/t+6T488QWGo69pNsbqHVLa3vGWa8SeCSPfvkJEmx3DYfOdnUHBH22HwtX6vicqhJS5Ixai3eSlpKVr62d9NWruyd7pfHvFQlXo4+StzOV2lZOOqje2l++z022b/cT/AILLftTeB/gp+zDqnhvxJ4gttP1rxRaytpunfZpbmbUvLHzIqxjK/M0fzM0a5YZcDIr+bH4nBHlur64huGkZsqZWBON2Bk45OOpGMntXdftI/tba5+0v+0h4u+IGsaldXaavqM81qkrvhIS58qNVLHYqR7QFBwvaqOvatefGxYY9UtLW1kECmFLK3S3CxofvOqj5iSTnufbFe9kmUvL4cz3krybdlG2yStru7ttbHnZtmTxVTsov3VbV33bd/JWSRzPwj8P6lca1Htt447aRS7SOdqBNpbPHPABJ9B9QD6lc6DDANtrcrcMsRdwQE3DjlBkk9e+DweOlY9vp9p4c8NWtvatfNOxML/KNgj3AhQe5IGTyMYH1OZdtfWN1/q4txAMe3O9Rg7hjGCAducHGM9wK+V4i4vxuCxrdH3aVN8rTivfaV5Wu07apKz11e294XLcPWo3qaykrpp7Lp3V+915HZafDeSaJNp8MSiO6uY5ZJd+CPLEgww6lcybuO4/iIAW9Y6N5dxG8lobea2Cwhi48uVleQv7FmDAZxkADoRkcLpmpalaTRzGO4WGNx82DnnIGPp0+oB7VutrU1ppsdqzOqTAMW2bQoxxz9P5V+b51xtjsxTg7U4t3tFu+1nd3100tZK3Te/0GW5dh8PrbmaVk3bvdWVtNde/meoS+KYZ7eO8kvj9nGAttHGdznjgnsMEnj6cZyMWXxpa6r4sW1utPtZreRzGmVw+37pBPOPQ4OSABk9/KrXxNPb3En79lWFtqbeBz9fw/L6Vq219qBuFvLi0nkDLiOVuAMHg/Xp1/rXx8cRKEuaDa9Ox7TzDnVrfqd0vhnTND0ljI015G0qxMHJUuyjBYbSP72fqQM9zip4T/ALTuY4rCV7hmTPlyLiRjnHy/w+nVh+PStDQfHEI0uZr+OTznby1VUHJP3iQf9liMj+tU9Q+L+j+CrdZbgTx2szfZoWiTM1xJ2xzhFAzkk9h64H6Fk+ecVO+Kw/PNT6yV4ya093msm1baPRNtWi7eHi8HlErUqijG3RaNddba29e+m5H4s8GXXg54kuogVcZ89JPMikzggDgbSARkHOazvEv7OGj+MYYLm+1Sy0+7mIH2mORWXGOhxnfjI5GeDVLw98f3+I5uobS6u7JDjNlLNvGxG3K4/wCBHJx34ORiuq1rxH4X8PaTeaxr2qTtBIVEMawFt2d/mblVkJcN5e1VIBzJyCoB+5z7MeJaGCwsaaXtZN83KuZbJpSunFO99nZ2urLReLl+Gyt4mq9eVJW5nbrurNNrbddbPXV8r4G+F1p8NvENjPBf6fezpKJI5ZFdYWVXBAYEA4bHOOg57jJXU6tdaVJo0l5oGqWfi/wveosMV49olveafIRlYpwy7o5PlcAcrKsZIwMhSvzzMuKMyq1eTMqceeGlnDVfiv68j6bCYPD0I3w8pWlro/8Ahzh7XxTeaxaR3kdg0UkkSl0mUrvzjJxkFsjHK8HPFct49j03W9EvI7rULO2urVRcsxfdLb/MBygyxB3Y9+PY1V/aS+It5ovhzSm0+4kWPXGadr1GwzhVUBAw5G1XHHB6HArwG2vRc6p5cbuGzgnOOvWv0Dg3h+phUsfjLqrLRRb1jG3Kk++m6aurLZpnz+YYiVePsqcvcWu27vv/AFo9dzsNO1S6v7ZlWT93GCykcZP8+a9I/Zv+KLp4jNldaZdX088kam6htHuDbxBgQJNvKoMAEgYxnPXNeTp4pt9FsbiytfLaaVfmZhu3H09up6V9z/8ABEj9hb4j/GL4gXnjjQ4ZNH8JxxSaPda1NawzLLO7RFo4vNON6rIh4VwdwVhhiR9RxHmFLC5bVr1bcqjtJtJvorpN3fSyZz5bgJYrEwoxTvJ6WWvm9Wl+IkNnoenXjWAjhuFWUGUuT5cEj7gu5ckhDtwCc4C8+77y68OaZq1vb6vqVha31+uEgnYbgHZkU/T5ScnnpxzX2T8av+CCNjqfg9F+DvxAuo/iG8so1OXxBPK0dwZJIo2KtBH+7J8t8+ZEykt1jK710PhF/wAEwfGH7OHxn0vRvjF4i+EfiT4eeIL6aCxurSzkXVdTuUinlEBea3KwFSsk5jEpI8kKjMd238HxlXAYug8ZLGSrNKTcZXjO6s20mpKz3tpddVZ2+2o5XiqNdYV0VBNqzWsfK+sXv1/B3R5v8Fv2ENL+POnzT6PqUOqW/hu+W0vn8wCO3meFZFA5+YbJFII4LMMZYEDN+Lv7KEfhDSrnT2uNJFxkC23OJJEOQu9gv8Az1JAGRzX114S8D+Bf2Rvjf4msf7at9C1TxFHp0f2W9uI4bS5t0juHiubcSKpYZadHMbYEsW0qpUVx3i34kaX8DPi63iXU9C0nVfD2vBrmy1Oytft0tsN21pzE0jySRlgdjooKhcKhUkj5XEUeXlnGMuVxi1fS7cU3bur3s+qsfUU6FF03GfLe7Tt0SbSv20te+zPkjU/+CZ11f6FZR6FrVnrV/M6x3kxnj+zx7MYaJh8rKeQDzjAyK4H46/sg658DdLhj1S6aa8tYi14qyAQxxAfJ5ZY5O7oCechielfSH7QH/BUe/ufGNrY+DFgk+wSl5zNay24vICCGV1Khdqgghhg5UY74+VPif8Rv+Em8PXWtazeL/aUky3M7yuSrqSxaMHgKB97GDjBxg5qsoy+vmGMjhKd05OyvprbT0Xm9tfM8fOp4HDYeTiru3R6afm/66o8c8T+JF0q21ItKZV0vyvNKTKFgzyMsWAVccZPoRivD/id8ZLrxrrlv5KPHY2cJiijzyzHBZyCO5AABHQAnByA74r+NLPVvDpsdFsWt7O3vd00rndLOQjCNiMAKOXOOuRnPauDbUI4ooF2tnP71jlTntj/P4V/TeT5ZHBYKnhG3JU3eLlve1rrV2WrSSeidnrc/OeXnqOs1rLRr/Pvt950dp8Urqwnhkt7bT4LiH/VzCN3dDkkHDOVyM91I4FO1Tx1qXim/jm1LULrUJEGFM0hbYD2UfdUeygCsR7RdT2mzhJkP3ju3bvwxxUFv5kcjBty+hHGa9nmd9Q9lDoj2X4M+Mn0zWPsskK3FrfYgaEyGPeW4GGwcEHB5BGQCQcYJXmvh/UbrSNQguI53WS3kWVOejKQR+oor43iThOOZ144iCipWs221e22x0YHHSw0XTu7Xvsn+Z7LaeB5PiRY32n2uswtpkce5P7WkeZvNIyRwQsONp+ZTkcYzXA+Mvg1deDdQW8s4o7vT9iuWhbfszwWAb5ymejEY+YDPSvQ/g9ZzfFPwillpMMb61pLzSXNiHVZL2E7pDcRRcNIUUbXVQxVURujceifD74eXD62WuJo5LNomgdWVTvU7PkYMTlCSflA2nbnPINfM5pxticpzSph60E6UWla1pNWXvJqyber106aNHVhsrnWoxdPeXXp6fLY+Sbewktr7zvs6XEJbJBO0/Q+lfq1/wSx/4LSaX+y1+zNoPw51PRdLvIfDstw++fLSK8t3LN8q4UfL5pCnLHI69APzv/av0HQ/APjuLTfDUNxatDbRtqIYkw+ew3YiznK7SOehJ4wBXBTWcY0GKRkVm5O7HP8Ak19fmmVYbiXKYQk5QjLlnHRXWjtdarVN9eqZng8dXyzFOcbOSvF9V0v+KR/QHZf8F5/hbqHhS8ml0DUNUGofK2y7WFvlUqzo6cuTgKctyoAB4IOH8af+Cjfhv9s/4WaZoPh3T9Stbgyw3Saj5AafRLuGVZIZ1wSMiRFyD8sgYrwDivxz/Y98Gah8W/7csIdLutRt9LtxdM1suWtyzBB0GeRkg9th7Zz754WbWP2b/Cur3Olx3mj6gIJxbXk1w0Zhl8sqXKhgkn3FChlJXdkcFg34JnnDiyrOI4PDzvJOLi3/AHrW5rdn0s7q2mtj77L88r4qjKriaa5LO9r9F09fz69T17/gtJ/wVB+JXjHRYvgReN4Es9HuLK0v9at9Dea+uWIk8yOGaeeGIQyMY45mihjPyyRqZnUstfLPwl/aruPDX7N2vaLeTK2rWjINDkumJEI8xfNjAPXbGWZVOBnjByAfE/EHhC903xLJH4gW7GparbnUzNcMWuAG3sGcMckvtJ+b5uVPfB5vxBfNHPDCrN+7UvISflLnjj8Av41/QGX8L5fTyungOWMoJqTaWjlFq71b3tyu7b5dLn5/is1xFXGyxEW02mtekWnpsl1vstdbH1F8EfiXH4y0+b/hIGurtvOJa88394jOqqMjHzhVRTtJ5DY6DB8v+Nq3/imy1htcvZVjRpH0a2mfAYxZc4HA3Op4xnkkDPNee+C/itffC3xLJPGI5o/9Tc2zMQtwF46j05wea9Y8L6jfftHaqLHw/ot9Z3yIs/ntF9pU/wB7a3y/3QDx0B5GOaWW0sJi6uJw9OMVOzlK9kklq0rWWustVFxXVnDKpWkoRk3JLbTXW2nd+Wjep4VpOlT/ANjTL+4fcq/LM/CHrnp16/5zUUWi3CFRcKo3HcgIyrfj6H619OfFH9mt/h9oMk1/pEs11GiLM0Fmvku0hI3Yyo3A5G3k8jkDmvGdXdb6C2tVt0S6t4mUAhkGB0BUndnAJxzjHU162X42ljIOdLVLS6cWnondOLfRrez7rYmrKpTlyzVn2aaa6dbdjg21F5pifLjjJ+QsBxwO3p9cfj1qa8W5ljjjmZXVcsjY5Offv06Hpz6mrmteD7vS7Vby4YeTMc/ux359cdcHH0ptlbyzXnl2p86PIKZ+Uc4OOenJx712KL6lc8WrxG6dZNDMrfMFXruNFaUljIs+1gY2wCVaitDllLmd2e1f8E9rufRf2yvBusWsLTT6KLu8i2gkQsLSZI3O3nasjoxxgnHUdR7T+0JJb/s+eA4dSbVoUv8AUYVEFnJahZ5WOAG642D5sn249R55/wAE020yx+OV14g1C+stOtfDOlT3zLM5DXnymMxJg7tw3l/lDHEZwO483/aybxR488bWuqXUn262kjJVGuFVkYn5iAxHy8YGCcba/P8AMuG1m+fe2xH8KhGF1a/M25SS16fzb3WnW696jmCw+XQpRdpzlN3vaySir+r2Xzfk+A8aatN8QNRuNQub1pry4l3OpTAxwBz9PQDGKrT6VjS44SzLxkkk7R71TttPvLO7kWaAx+WdjMrB1B+oyD+BrfhRtZslVNzMowUxwwr9ApwSXLFW6WXkeDUk01qep/8ABO74/aZ8Av2kNNm1eSSPw3q1s2j6iyNsJSVgRKf9yQI3uqYyCcjuv+CgH7Vuh/Eu6utN8O3cWoRxyRs12oIVMEKsUeRk4Vck8jIHPUV8tX+gSRFtsa7mOHUDp6Cl0abGrwrextN5IVYYUAHTpn3+tfP4nhvCV81pZtUv7SmuVL7L3s2u6u7a/ketTzatDAzwMLcknd9+l0n2dlf/AIJsfFzxTqHi7xzeapNNCJJlghHkLsjIijWNQo9BsB9jz6Vmi2OrWxkk+aSMDcW7joKm8TPa6lKqKs1u6ttfzjyn+fpXQan4X/4RTS4LmC6i1CyukA8+NflDAcoeeoz3r6Clh4U4qnTVopWSXRdDyKlZytKXxM47X9Ms4GmuFmlkmEhKq0Xy4J5IOTnr3r7I/Yw/a68D/B34IabDrF9puh6pbyTW900DC4uLqIsHVioyxHO3bkAAAdBx8pzLDqke75VYdgMVj6loy5P3Sx4BI59BXi8Q8P4fN8L9TxDag2m+V2bt066a9j1cmzqtl+IWIo25kmtVda/1/SP1cvP2o/hv8WP2a7yLS7iHV5JpGS9a4ijYQhgdqLvJAOF56/eOOhA/OBNQh8YRap9hcSxpfTCDcP3i27FvLYk4/wBk7j3681zPhCe48D3k0kM3l2+oW0lrcDBdSGUgEgHsSMHqPfkHU+ANmT8SreSVJGhhjkZ4Vk8vz8IQEJ54yRk4zj0JBry+FuEaWRVK31eUpQna0dLq1/NJvs9P1OniDiCpmyjUrqMZR6pWv+bXyv8Aocz8Qxc6abbR5451nt5JJpd3UsflX2JChun96sSzvPKKrICVHGBwcV3fxm8VWt7rs0ccNnc3mSklyssjNEy/KUAJA4AHIyO3UGuHW1a5j29G+lfWWl1362PIpSvBXNbT75ZFX/nmORu6iiqemaTLFchW4ORxRVxu1oYVIxuavw18Vah4X1SGexuWgkf90xwGDKeoIIIPqPQgEYIBqW78Q3+tXcIvL26uMjJ8yUt70UUoRSSkt3v8tvzZdT4ix4hnk1PT2FxJJN9gtneDcxPlnBf8RuycHjk+pqjoFxJFGWWR1YBuQ31ooq+pEfg+f6GRqusXU+qqGmkbbgDmqsl7Lb6o0sblZN33h2oorF7nXyrT0HxXk1y7+ZI8m05G45wT1/kK9C1a1S28G3Ece5Y/Jjn27jtDlsEgfTt0ooraicuI+KPr/kcmkjQxJtO3K/4U2Ri0KsSS2ev40UVHQnqvU0tDcyRyK3zKyHIPOcVQ13Vrrw9cCSxuJrWSZWhZomKsUODjPb8KKKqTfKOlrUszGiG4LnknGTXVeG7SO4gi3orfX6GiilS3NMRsFzMz2MchP7yMEKw4xzRRRRJsyif/2Q==",links:["https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],maxzoom:19},{id:3,title:"Dark",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8VdE1S88J+XfebFd6ZdTPFIQCPLCuVD57Drj2/S58X4YbvS7G7WRG5IjZWyHDYPHHPTOc/nmpfGYg0qbTdPuJbiOCRi0d15hH2YqePl+63DY9QDxgcVoa94fh8Y+DII7IxIAqS2zFdqjjoQBxwT26/SgDz3w14euvEOoBbaJ3WNh5jggCLOcEk/Q+/FexRx+VGqgABQAABgD6CqXh/RY9E0SC1VEGyMCTAHztj5ifXJpbW0t/Ddk37wrG0m5nkbqzEAc9PQflQA/WtYh0HTZLqfPlxjoOrHsBWBoPxUtNTvBDcIbUyPsibO5TnoCex/T3qt4+guNa8QWVjMGXTmnjXCcPIWBycnjgBvpzXLanqD6de3XlS26TTB0cWynygu4cDPT7vGPbk5NAHca34w0zS9WW4kui0ttCyC2EZJbftbcP7rYXHzYz7A5PKeI/GNze29ztm32l3cvsAyp2BU249McZ9x3BrmSP1ozuP8vagAB5zznOc1Yj1e7hR1W6uVEhDMBK3zEHIzz6/wA6hEpERT5ME5zsG7/vrGaZmgDpNQ+KOqXt7HMn2e38ottVEzuDY4bOfTtit3TPjJBJE32y2kjk3fL5XzJjHcnnPXoDXHaH4ZvvEbOLOAyiLG9iwULnpySOa1IPhtdXUwtkuLf7csYlnhZuLcHOASM5JGDwO/PbIB3Xhbxja+KlkMLlXTGYHXEij16kMPpWDdfGEWmrTRHT5DBGxQFn2ScHklSOPp1ra0DwNZ6FZQK0cdxcQFiJ/LCudwwR+XH/ANfmuJb4fanqWuXEPkwWxUAjDkxhegwSSfTrzyOMGgDodS+Kul3umtF5d9/pMbJJtUBogQQec4z/APW96K4nXPD934YvFS5TY2AUZTkN9DRQBPqEF9e3NrYylrjyA0UBjO8yDcx9evtxgAZ6V6F4H0SbQbMxb5ZbaRRIhk+UxsScqExwOh69c8CqPw58FtoD3E93tN3nylXGfKUc5Dd85HT0+tdXQAVR8QxLJp7brj7O2CsZMioCxBx14z1x+dXq5b4naxaQadHayhJZmcSiNhkBRkZIx35A6evagDAu9e1TVX+1wy3EcSQ4+UyBXAwMhgic85PPfsKz7jwte3WlvcLat5cG7cYoxhcY9yx4x29eeCa1dH+IA85IdTt4ZIuNgtzHsiChsDr7n+LP1zgxXN5Yazab7O11KG4MaqEG3YBwvyYBIJ4BwADmgDnW0t4IbaWQxxpdI0iMzcYBIyQAe4IA68VCyYON6yIOrqCAv5gH8K3BJqNtZRoiztDBI4Bjtl3xscBlc87TwOMdD1rP1HF/Oq+dvuHONrkqQc9DkADuMetAFSGNHbl1AHOX3YPt8oJpk7DezEglmJPGPyHapXsWsSDcRSBc4wG2k/Q4P8q6H4VWceoardRvGGTydwk2g+U2cDnGeQTwDzjpQBqfCmK7slPnTGO1mYiCF+PNYDLMo68cfk3pXX2ekQWN7dXCJia8dXlb12qFA+nB/Emi0tZxcmaeUMdmxY0XCRjIJ56seBzx04Ayas0AJtz3NCRiMYUADOeB1NLRQBj+ONAi17QJg52PApljkxymOT+YGP8A9VFa00K3ELxuNyOpVh6g8GigDD1XxFF4fFt9sjmS4myWEB+TCnkksQD1HXmtLR9ettcg3wP/AMBYYYf4j3HFcl8VNOuku47iITyRSpsyg/1TDPBwM/NnjnGc8Vx1rcz6NP5sUsttdITtwmDz15PTqe386APaRmuL8d+G57nXftIi328u1XKRLI4+XHTGew53VtfD/U7/AFnw8tzfvG5ldvKZVCsVBx8wHHUHoOlbdAHkOoeH5tNZle3mOxjn91IjkY7nBT34zSaW0Wn7Lh/LdXDI0bTH51IKkMqoSOP1wR2rt/iiIodOtLh/IMkc21VmQsrqQSRwCR90elcpZGS41awH2WKGCWdA6Wq7WlUsARkfMOOo46e3AB0/w20G2WxS8ie9KqzLGJCUjY9C4TcfcZPoeBVjxP4LXWPElpcYdbWUFb1Ym2mXA+TOOvofYVu2F5b3Ubi2ZGjt28k+WPlUgDgduM44+naplJPWgDmPE3hCzlvInt0t4bhlCLGdoVgOgC4xk+uO2Mgmte2hi0sxQW8cCGIr50UEY438AnAyBnJz6DmrGp6Wmpxx5LRyQuJYpF6ow/oehHcGs1dGs/DKz3cjRwJLIXmcudrluBwd3TJwAe57GgDborntK8SRapdxmy1DzFuGdEhnHO5fmOMcgYyRn0+mN9cqOeff1oAdRjmgNn+VGaACigjIooAxfiJN5fg+7UFN0u1FDMFB+YEjJ46A1xng3we/iS7h89bc2cB/feWRk4HCZXucgnnpXT/FK3kv9GtLWNCzXN2iAg4weQP510GnWMGmWiwW6okcQ24Ue3f3oAdaWkdhapDCixxRKFRV6KKkoooAyfHGinXfDc8SKGmjxNEpXO5l5x+IyPxrN8B+FpdOvXvJ0lg+Ty4onCK3JyxITjHTGeevtXUUUAQadp0el2ghj3lQWbLtuYkkk5P41PRQDmgArhfiF4W1XxB4nC26yzWpiVhufbFE3IPU4zxnjn5hXdUUAeO6/pF34X1GNZYEtZgd0UkLsRIRjlSSemR7167ZCU2UH2jH2gRr5uOm/HzY/HNLcWwuQucgo6uCOoIIP64wfakvklltWWCRYpGwA7Lu2DPJA9cZx2zjNAEisHUEcg8ilqO0tI7GARxKFQEnA7knJP1JJP41JQAUUUUAQ3Fsl9H5cqh1znB7Ed6fuNFFAADg1YgiD2krH7y9DnpRRQBX3GjcaKKADcaNxoooANxo3GiigA3GjcaKKADcaNxoooANxooooA//2Q==",links:["https://cartodb-basemaps-1.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-2.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-3.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"]},{id:4,title:"Open Street Map",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4RFkRXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM4OjM3AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAABJEAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A9oEG5Rng96yr20aFy4GUJ6+/NW5riaCGIn7zZz1qZWW6tiCAW29PfFXFuOphNRmuXqYanDA+9blhKr26qDkjP8zWNNG0cjKykc8cVpaYSUHAAHU+vWrqq8bmOHbU7GlSHoaWoJ7mKAYducZwCM1zJXO5tJXZmakT5gGcr1/HmqNTXM/nSkjO3tmoa7YKyPMqO8mwoopQMkD1qiBAMnFKVK9R1rVtLFAiu4yTzz0qeazilUgqF9CoArJ1Vex0LDycbmFU1qFNym445GPc5qSeykhkC9QehoitJX5jzuBzuGcf/rqnJNGahJS2I7osbl89mIH0zViCz8yzaQ9TjH51NHprup85vmPIIPOffIqwImt7NoyR8vQ/jWbmrWRtGk7uUkMtLUQHJ53de2MVeAxSAZAyMH2oBrGTb1OqMVFWQpGab5Sc8cnrzT6Km5ViD7HD5vmbfm+prOurN3uAsSfw56+9a3z5H3cfrS7RnOBnpmrjNoznSjJWMyHT3NuyyHac9MZ7fWq1xYyQkY+YHv0rdprIrfeUH6imqruRLDxasc0ylGwwwaStybTopnLcr/u4H9KjXS48EMT+H/6q2VWNjneHnfQyTGyqGI4PSm1dvLOSHlSzR9u+KrRR+bIELBc92OKtSTVzKUGpWGrG7KWAyBTa6NLaFE2iNcfQVG9jA4+4F+gArL2yOh4V20ZgVPZsiXKNIcKM5/Krx0pTISGOz68/yqU6ZDgAFgfXI/wqnUi1YmNCadypdESlD5mV54DVYsmi8sorMG65YjP/AOqs6ElpVUjPXitKW2CW4lhG2Tbk988e9TJJLlKpttuSKV9IXm2nadvGR+NWdKl+9GcdsfrVCdJFYGTqw3fnRbztbyhwM47VbjeFkZqfLU5mbF9dG2QbMFj6/hWNNM8773PNTXt0LllIGMZqrRThyrzCtU5paPQuWy27RkyFQR2OOaguDGZj5f3aioqlGzuQ53VrBVqzt2klDMCEU5JI4qsQV61uw+Uke0DALe9TUlZaF0YKUtegs0hRFjg2lzxj0HrxSRLN0nZCT/cJ/rUDusV+u05ymAPxqyvmNLkrtA985rnasjsUrtoZDC7j982QOnP+NWlRUGFUKPQDFIgwNpOcd6dUt3LjFJBTWQN97kelOopFBRRRQAUUUYoADRmiigAoqOWeOEDzG259iahN/BtJV9xHbBH9Kai3sS5xW7LVB4FZ0V6/liWXhe3v2qObVC0eI12t65z/AEqvZyuZutBK7Hz34ScxumU9x3z9elVI5I/tJZosqSSAi81Wd2kbc5yaktpFjnV35A7fhXQoJI5HVcpam/Ecxg4Yf73Wn1ELiMxlwcgVVOpxqwHUev8AkVzcreyO1zjFasvDv9aRhkccVFBcxzDKHv6VPUtNFpprQx5dOEc8ah8q+e3TA+takQKRIvUKAM02OSO4Cvj5hnAbqKexwPlxmrlJvRmcIRjdxK19bG4iyOGXke/WsWRGjcowwRWpNeSiXy3CqmcFgCP1qhdhDLuR92ffNbU7rRnNX5XqtyCiiitjmCpraEzyhAce+KhpyOyHKMVPqDik9tBxaTuy5dxs8a3H8Jzx6dqktLWVE3GP5g2RyKktR58AD4ZB/CvPfvVsJtGNzfga55TaXKdsKak+crpayCZppPmyOnTHOasxtjjGB9aUNgAbgR7mgtGuOR+NZttm8YqKJaTvTUcOMqcikMihgrOAx6DNTYd0PoyfSkJwcjJPTFAb1BA96Big57UtNJA5HX0FHzHrx9KAFPrngUituJ9B0NMkLKOOfWiJiV+7j8KBEmQKDnB45pBz1pc460DMW/in80ySD5eg6dOaprjcM9K0tRnViUBzgY/HmsyuuF3E82qkp6GlqcykiFf4ev6Gs2nO7SMWYkk9zTaqMeVWJqT55XClA9TikopkEvnFQAg2jv3zUVFFFgbbJbeUwyhh+Nb0MwlQYPOBmucq7YXLRyFDk7un4ZrOpC6ub0KnK+V7GotvtIwQPUjrVS+vBEPKjJL92/Ordzcrbx7jyT0HrWFNJ5szPjGSTWdOPM7s2rzUFaO4kkryY3MTj3plFFdBxN33CiiimAVNaRrLcojdDn+VQ1PaJI9wojba3POM44qZbMqHxI0HkjsUIRWBb+8PT/8AXVdb2VhuboTtIXP5j3q+9vHK+J2346DGMflUdxYoE/cR4cHI5/xrCMo9dztnCf2dhkVwvIcghRkev0+tK8bXgSSNiijPGcH/ADxVJba5MjDb8wyTyKkR72H5QMD0yKfKt0yFUbVpJ2LlrFNAWDOCnuTmop2aO7jkwCDhcN9etWkLlAGXce5zilMSTAGWP5lOR81Z82t2buHu2QFpCAV2c+uaUO2MPtP0p+0AAAcY6ZpNoJI24A9+tQaDlUjk4pe+MfjQOOCaWgBuc8ZU0uKQIqkkDk9adQBC9zHG+wnBqne3zxMERQMr3H1pmqKUdHXoc5/SoJZorhxK64wNu3J5/GtoQWjOWpVesdiM58lpHGWZu/v3qvU00wkAVV2qoxjOahrdHJJ6hRRRVEhRRRQAUUUUAFTWpC3KFiAOev0qGgHFJq6GnZ3J49zRNHjOcY56VCylDgipZovIcYYMOxBzSq8vlkLHlT3waSfVFNdGQUUpBHUEUlMgKKKKYDkXc6r6nFbFpAsceM/P3PrWRDxPGf8AaH866CFwYxgjHrWFZvY68LFasBEhOQME9af0ORTW5/Ghs5yB09a5zsHZ65NJkYxmj5ivOMGlX5QB29aAIIJHKFCu51+9zjrRLE5IkT5HHB78U10ZLkTDG0/ez9MCmT3wRM7GJ7HHFXZt6GTaStIZPfPbkK8e/vnOKmtbxbkfd2kdRnNY00pmkLkAfSltpBFOrnoM/wAq2dJcvmcyxD5/I6IjNQ+ahkCBsk9sVBqF0YY1VQCW/pisdCBIrHoCDxWcKd1c2qV1GXKdIDt4NMe4ijBLtjHsarRzpJEIxncRxVC9QxsFJB9MUowu7MupU5Y8yHX1ytwRtb5R0GPpVKplQNb7gfm9PxqGumKSVkcE22+ZhRRRVEBRRRQAUUUUAFFLngj1pKQBRRRTAnhZ5GEe0P8AUZNa8aokaKYuSAD8vFZ2m7ftIz17fka2COQPxrmqvWx3YaN43ZBNaRTJjYF91AFZt1YtAu4cr3rbx6UySJZU2uMj0qY1Gi6lKMltqc3RWvLpSHJjbb6DGf61mTRGGQoeorojNS2OKdKUNyPpV21vjCNsmWX25NUqKbimrMmM3F3RpvqinBRT+I/+vVi2uUuGKqZeBn5qxKt2E3lTgYzu+Xr6kVnKmraG9OvJy1ZtdRjn0ppQKDudsH3p69KjuCPlBbaD1OM1zo7RrFcElwfUE8VlXdx5gCKEC9crVi/mEahYv4up/Ksyt6UOpyYirryIKKKK3OQlknaVMPyR0NRDrRRSSsNtvcuCNhb+YrEFe6n26VFHFNdvnk+5zin29wBE0Mg+VgcfXpU9vM9tu2xb04wd2MVm7q5suWVr7EDf6NcMoUlRjqPaqxBHUVZll8wFiPnPvUaum4+YmQRjOelUr2IkleyZDRWg1nFJCHjbBx0weTVN4jHkMcN6U1JMUqco6sjooIxRVEBRRRQAUUUUAFFFFACg4ORWzZ3MckSRj74xkVi1c00Zuvov9RWdSKaubUJuMrLqbSscnK4H1pST2GajYPuB+XApTJtQs+MDuK5D0SO9lMNqzKcNxj8xWC7F3LHqTk1avL77SAoXCj1HNU66qceVannV6nPLTYKKKK1MQqa1XdcxgnHzD+dQ06NtkqN6EGk9hx3R0WCCPn+X0xSMwHGetMhldgpYx7SgIx1qR3VVLk/L3riPVvpczb90mEcanLjP9Kr3Np9miBY5Yt+lMSRPtIY52/8A1qkv7hZ5VKfdC/410xTVkjgnKMk5PcqUUUVqYBRRRQAUUVJBGJZlRjgHP8qT0BK7sPtoJLiQKnAHf0rRj0uNVbed57dv61djjEa4BP404sB1IFc0qrb0O+FCKWurMj7A4SUkbduWXnOfTvVFy33W7V0oIIyDkVmapbf8twf979BVU6l3ZmdWjaN4mZnjFJSg4OaStzkAjFFFFMAooooAKKKKACtDSkPnM+OMYz+VZ9aul5ELYG47jxnHYVnUfum1BXmjRchVLHoBzWVfXm5PKi4Hf9Kfe3zqTEq7cjB5zWYSWOT1rOnT6s1r1vsxEoooroOQKKKKACiiigDSs7yOODEuSwOBjHTFR3d8sq7IgwU9c1RorP2avc1daXLyhRRRWhkFFFFABRRRQAUqsVYEHBpKKQG1LqcKcKGY+2CP51XGqFnAeNdh68c/zrNorNUoo2eIm2dJDIksYaPGPbtVPVJgsPld2/piqNrdSxERo+1WPoDTbyR3nId92O+MdqiNO0jWdfmplelAJ6UlTRqUUylNyg4xnHvW7djmjFydiGinOQzFgMAnOPSm0EvRhRRRTAKKKKACtix2x2bMT2JP5CserdvOogeJ+NwPP4YrOoro1oyUZFeVt8zsOhYkUynZ2MwXBByKbVozYUUUUxBRRRQAUUUUAFFFFABRRRQAUdqKKACiiigAooooAKKKKACiiigAqae4knI3npUNFKw7tKwUUUUxBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH//ZAP/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo3NjE0NWViZS03M2ZjLTQ0ZjUtYWU5Ny1hMGY3ZTlhOTA2ZjciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzYyNDYxMzAtZTBmNy00YTAyLThkMDUtMTAxODVjMjYxMzY4IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjNlMTAxNmEtMjc5My00Njk1LThjMGItMzdiOGY0Y2I3MGM4IiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTEyMDg1MTU4NSIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJmMWZjYzliLTdmMDQtNDIzNC1iYjIxLWI5MDc0OTVlYjQyYiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzg6NDArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAQCAwUBBgf/xAAZAQADAQEBAAAAAAAAAAAAAAAAAwQCAQX/2gAMAwEAAhADEAAAAfvrI6dr1ZrfJen4VmduppjrOpPboz116ymydJ0yLpnk0x7yXNLsSttIGiizRnscW4DocCrS1mKxq/P2ZPQYW6vWMKzzEXTMYduReqxht2e953gSDFr87Kphr1gBxVDK3ZNMIGlPa4qi3LL1uYwyRxF03nrvJq1gACR1xNK7E06X6CH19BFcO8yKvP51cuNSdKqycADocDdi9XTRX5u/xk2o1pr9WX0PL+l4UO5uyy7DZc6k6bhwAB1VG3H6nmvQ8WHctqoeTVl0wVawBux+lpT2eT9Pw49zwANJFibZqdYAAAA6HAAtzuPecCPcgWc1DuQOAAAAAAAAAAAB/8QAIhAAAgICAgIDAQEAAAAAAAAAAgMBBAAREBIFEyAwMSIz/9oACAEBAAEFAmgL88fMwbmisZ/VrlhNpEELQwwVXEZyQGcGksRPx87dXJOR4/YBRYJV9nimyiw1ksYRS0qvVagCCj4McCsm4MY20TCiysFrYLRDoMWThhYkupikAj2CJdtzk71GX+s4TJIeKrZUy5Yg+aQz3OrOgA+0CPeI1n7ltkqEpjXMTqRSTcYolTlIo9UFvDjsNt+8RalaUWp0RS35UZGQMBYNlYqZlAv7bvRb3gH0yWeyCXAj8KkbsPd6AMpMsrH0bddEwxnsLimSwVEi8C1Bc0v9GMlpfQDJDB1uZ3PAnIff/8QAJxEAAgIBAwMEAgMAAAAAAAAAAQIAEQMEEBIgITETIjJBMFEzQoH/2gAIAQMBAT8BdVy+37mlJBKzI6oO+yIXNCPpmUWImJ2WqiYgK/exVT9QaZAKjaU/1MyYmx+YNLa3cXTODcxW1uImQ4shLR3LtcZjkMwcVQv9wDkBfS2RU+U9dR3+o+ZnM9ZFW7iurixFCiyJmYMb2xNxMGJB2hdQeMBB6NVX+wuSAP1vhfg01GXl2XfSq3KxGwEd0MVWv31BXI753KAEQkVQ6Aa7wYy/xjoyedtMw4VPMYWJqch+FTFnKoRMOft74Tzuz1aQjjUZQ4ozMio1LtpD3Ij2ASI1+W2R+ML8xxqFAB7hR6dP/IJlyemsZixs7YH4PNTlFcVjtzN76coqcjLXIIexNdGl7MTHcubP4Vcr4i1feMeRvdWK+Pz/AP/EACQRAAICAQQCAgMBAAAAAAAAAAECABEDEBIhMSBBEzAiMlJh/9oACAECAQE/AVJTn1M/VxFLHjRjtFxcwPcZ1BuM5OlmHMxgzj3FcP1Pno9Q5lIj0KWMu9OIq7RUACzJZbb6hNeKqW6nxHqLjCz42JjKVPMNngzGCo0cWIXY8zaSLleGG4Fo3rkXcJiSuTrmIqoMg6aEivxnNa4l3cQeJcL3AwbrTMDuvQcTEnuPjtrj4v5gG3ryzA3cBK8iY2LCzpnHFxe6gr1oRc27eYGs8Hxy/oYibzAKFDTIu5ZiQ9mKNuuUMWoTlDB14ZuqiqFFD6SAYf8AIBWpF/f/AP/EACkQAAEDAgUDBAMBAAAAAAAAAAEAAhEhMRASIkFRIGGRMDJSgQNicaH/2gAIAQEABj8CLYyvAlOatRwyhSNSyhtzdNpqAw9qIqZWkyO6E+UDnqp00T3gCfjyiX/aLvCt4Tng64QoYvU9Oowpg5djyjs07IHNK0mUXCkqYh2FpUf4omp2R7dH7Jrdm4jgoNZ7b/3EuFoU/jNd8yh4Ye6d8uMWuB3soHnolHJDgOVDhGEbjDuskBOG4sjmP2nS4njqIioKg1CytODhtdEjhS7fA7goNiYtARzMLXDjpajWuyLjc4CsTRZWx9KccxgO5RsWoxboceApJ9EwTVVt0U9f/8QAIRABAAICAQUAAwAAAAAAAAAAAQARITFBECBRYXEwkbH/2gAIAQEAAT8hDtDD3jURRXn1GdBejzFaYD2strgZOYpoFmfiXhU9/czZHCw8DWo4PqYMV8kJg4eDiNWLl1WIBtlst3Fdw7pAqObDHQrnbgh7CwqjKFG7DxGCyxbI9oJvaga8moKkXzEtMPzMv1CUXNyOKleAmkM37vpUYh3fEv0G21QNddCgQjasy/3HoLfE08RMUWdvgic0Y6Ku5ylhSAbjJMdWimC6uZyr5dwdG39MtjsZU8WFLc8QA22TCru1c9iENmZWOBODLIeh+fNmYqNnyWBkGRrTGwGc1mXHvmyus/zL4R5a7ucqLKciy/poyPHRijdLMY3o6zL8i8reemMqhSSuihUIhVjeRXuPrs/cf5Lpk9GKzezpxw2QayXao13GArrd+0itzfCxCG7Cg+uzFLQuY9c+PX4cGAKQamDn8R7nqwvIpHn8/wD/2gAMAwEAAgADAAAAEFTd6EMr0j2vaa0FntdF+3zUtv5k99sMNnkxNssg8bcFptjJr/s3BsTttltl9iVtttttt//EACYRAQACAgECBgIDAAAAAAAAAAEAESExQRCBIFFhcaHwMLGRwfH/2gAIAQMBAT8QIaUC/jUYhLS4tqwHulyb84gOzv2v7iP2MA/nNzZNoIyVtwTwespQd+IobfiZOMfMVEF5PPvudwmMW+0DYz6Eoh0ZgjB4SRVXElx4D5+0cU0PEAVaXJsgOHefKVYU6f8Aei4S7hd8r9++0BpyxRDjpVyqxLdGHxGbroVdxxOHEEGvfv1QsRVTmhzf39zFlDzt+fpAWHLXVEudec+cHz8CIHEvyqHnj9RWjXRtbk3BBYxahp4g8qX3ljLTX30i2F3j3N6dvFbHcrHZLndFKuEi2QDE3keiXOHDKQWrWP6tiUcK1rvGuPAL736ho88RHuehDenEUGu91FsdcGBzmC9ZGEFp4KK8Es/+GztuYTrNIrqgvKX+b//EACIRAQACAgICAgMBAAAAAAAAAAEAESExEEEgUTBhcYGRsf/aAAgBAgEBPxCm2UAiMAQKKg2InWEtR11DHOFmoF3EBMSpjLyEIaSgZzDaOPfqCB+sIQQHf9lUiLLTnx0+CtHP+QgvLFMqpQobGSpSFs47SIUhSDBFAL3wVGVGdQEG3gAgr7IrdvNAty9Rj6meSRUTqPAJR1A3b4JZTKBxYVa4+kMStkdrdQu8E+juFYj9QKA/PkQdI52cnQpAEL3KCunGP7IWKd7zEBJGfnwVQYDqEWji4+oRqgijnZgieoxKF34ZEdsoB8NbZqWr2lCuROfn/8QAJhABAQACAgEEAgIDAQAAAAAAAREAITFBURBhcaGBsSDBMJHw0f/aAAgBAQABPxAYVIx2r5f+4u3ghNovOLyoa8x0ZWFVVq1yXnmeA85ocUlB5Q7MmBZOA2I+SvX30ybKHZTX9/jCcWvGV1gYWiT9ZwhisIl2T5zViPA32yyHyZ/RPzh6Cps2OKP3nB0aiMfjBxNAtgnTycXw49jVSvPO+evxgmRaF2aDEQOFKQ2/24QPFToDg15ZjMBoSk3d+/GjnWAABo6DACwlzjJTGE+tFX8GbCQKWyWHg3iXIC6CNHjFehqhK5aABivcURInyYabYcFQNzrXuW5ezD1A4XB9LysCCxd8eeHXC5EfVFavUvtrXXnNaxqd7s5ye5gg6Usvx+816Toc3BJEPyykEYO24TxQgrs0PXn684wu4E91V/7xgzrItLCF6MEgWB+7x94zCFwToa9p3/Xq9CadEumERvH/ADgdzitlJ7e3f7w6pKOrbQ30bZ1MMwRDiIcJSuu/b2w9gB4OsQJUuvOJaAOm1bPr7yuytPvw11y/wc2OB9zGCc0jYa4efnKFHnkfh49JwBE3q0c0T7mk/wB/WSFSpaBvjs6+LgWohSEb41o+8iRMnjHn/XOBLy3S79ybD+zHhNbaKbSeZNfwuvSWQRk2PCf9+8RuE1ZvqJjUGD3T1fj026hAKiMOPlzT0oFEQWp3kS0/NF5+vR0wXf4ez3MaHiYL26FtmBWJG2tCKzf7/GAvKeH+DDLpTPlgh8NO7fY6MrgVXosyDQmrxyJzMa41sAHBT9ZCpoRwAT1TAzTsadf7OMnyLUbT3oRyqzS7rTjbHrz6kKWTRrY9/GLieA9Lwf4ZxkI60x14uF0g7Zq+35xFKvgD9erGG4igenFWV449v83/2Q==",links:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"]},{id:5,title:"Google Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4Rn+RXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM5OjE4AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAADkGAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8AqW98IroP5/H8Q2e3FUNZst4N3bt5kchyzYxhzkkYP86pRgvI2JH/AO+uta8F8ZbM6dJBGd3+rYJ8xbG0c10UnOl7z2Mp8stOphWbMCVPGP0Ne1/DHXEuNJXS2fMsHQY/vM7en9a8ae2ltLxkkQof9oEZ5rvvhlOV8QpEoC7s7s8FvkcjHriurFJSp8xjTdpWPZ6o6vIItMnZhkbGz7cGr1c54q17TdNspIbyUhzGWCIy7jww6E+xrzkm3ZHS3ZHjPiq8juLyTyuVBKE/7WWrkpYWZi2M1tardi+vJpIotkRkYoNuCRk4J98GsqQspPUV69KLjBJnJJ3ZQYBfc1LA4Dgn1qCMNK20datRWkhYkkADkmrXck1EIMYbtinAgjjpVBpTGoXcQB0GetMS8ZW7Y965ZYyClY0VN2uamKXdsw3oaijnR03foKWSZFHzdMdO9byqQcL3JSaZKW3nce9MZ8OAD0qAXK5G0HHvRv3Sgjv2rlniFyqMHroaRhrdjnlycCozJtFMYg/xcj3oikVwQRkV59Sbm7s3iktByyl22qPrTjhDwaYzrGuEXnPXFMZi6+lQVcnEjSjaDUkbeWh3tnn0rPDsrYUkfjVlnwnPPNbU684O9zNxUlYsmZScjmnLKrZHpVJ22oMdxTBcMq9OfWtIYuopXewnTjaxpg5paow3ZztI/SrCyMzDGAPU12LGU7XZl7KXQl70YpAwzg4zSk4Ga6IVFKPNchxadijeWUc54OHrNfT54+q8fUf41pn5m3eYQf8Aep4dACXYMPrmuRY2LeqNPYu25n29oznGK1UTy0C+wFQ+fEiEoqg+wFIt2rHD8e9XPF0muXuSqckywIhCWKnPSo3kkJUoxR1O4MDj9fWpZGwhzVZZgz7T0zgVNaKjFU2y4Nt8xZuLmSVEedwzKoG4nJP1Jrs/hhqEB8RQwFIy7btr4GRhHPXNef3hPkZU5AP9KXw/r02gaxDfwjc0eeMgZypHcH1rWVNSpcqIUvfue9+P/FLeHtNVbeSMXEuduW5GCuehB6GvEtS8Q3WsX5lupmkPT5mJAGTwMk8cmtDxz4vj8UG0kSPY8e/cuc9duP4R/drk4ePnP4UsPT5I3a1CpK78jah8qR9skoQEcHcAKhvIlBZYnWTGMMpzn8azxI8rbVq3CSmFPJ9K1jBqTlclvSxn21vIsmdpz9K0LiURRgKM8849KsJGoJPes25l+XAXnuc9qyxFRwhaPUcFd6kWfNZnfcEGcH+lQkqWwCce9WVUyWRUJgbtxbPtVVotpGHz6jFedONkjTm1Lb3CqB5XGetQNOznO4n6mo8EDBOcUAegqJyctwuTpLweTmpUlI53HP1qqn3sZqXAA9ajYqLJWfNMjk2UmciomO0jmgcn1LXmgnml83jHFVg/r1p27LYA5pE8zHg5JNTrKrDDZFVQSpxil3cigFKxoBQyrxx6ioJkAf5cEHtUsMhMWxY93HrilEbEjcmPxq1TnLZFOSsMWMJyafuccdqdNtjyScDufSqj3ipHuVdwzjrjmtfqtRuyBVEaSDcgz1pWBKHBx9TVazu1uE6YYcYq1ICyEL1r0VRUIO29jFzbeplTswkKj/x2neRLg7wUwM4ORmp4oFF2pkG5ecjOM8Vc8+zRo/tz7wXAMmCML6YH415apTk3ZGzkkZS+WcBiw7U+aALGGQ5HrmtfUtKspYhd6VL50ATL/Ky7W5J+8c9MViPNKIymz5enUVLi46Mdy2LvfC77eVx365qkZC5YnuTUbPJEWQ8jjJXoajDE+oGa1q1ZzspdCIuK1RaScfcb7pG3/wCvUN5biNBKhyrfp2qzFbRmPzFYs+MhSc1KYWmtGjdQpHTIwOtduGUorlexnNp6ox0dc57VI0q44Paq9wnkzFFdWHqpyKI8sDXSSXra5WPtyenuauoz4M7Djsv6VguzIeM5BzWjYajGF8ufJ+uMd/U0O7TS3EatsdjGMnkVFdSJJwGypGDxSmRQd6HIP8VViDgnB4rz6tdwXs0WlfUkZl8gIi8Dvn2qq6bqnGdmRjbinpFvUMAee2K5JVJTepViv5PAz361IkIIxt/WrUMAdwGNa9vpsUjbAV3E9DjP8qjU0jC5gQ2hkdjjABx1qYWG47T1rqodDKqx8sdz0/8ArVFNpjIchcH3H/1qnmNFRRys9j5fbIqltXbkdc11N5p7SYjHD+g//VU9t4ZjjzHOjBjyCRx+op3JdJt6HIGFiAfXpU0aBEyeW9K6Gbw/J5pjijcgNkHHBH5VD/YNzHOWlQiL6H0+lPmVheykmYbS/NjHNJv7MP1rQvNPCXO1FbA6nHt9KoOu7kcADJzQmZyTT1L0E6eVhOo6ipUk8z61RgISFnI45/KmNqCQ4bBVffjP05r2qEm6a5jF7lW8uACE657VArGQbUO4Zz6VQnuHkmMjcH0HQUGdlb5SV+nFKlH2cVEp6mmsckUyFPvcMK011AQJm6bHA5x/gK5tryUgfOQQMZBOaaZncYeR3H+02a05n0FY3LjWEZcRruz/ABZxj9KzmneZw0jbiBjOMVU3U9G5pJAalpKUkQg4ZWDKcdCOlW7ud5P3gHzkku3qT3xWRG5DAitOG4YqBsjYgDhhnNYYilzrmW5UXYlmKBdoCkn1FRKscR8yZlC9QuR/I09I/Mck9B39Ky9RnJn8sdF+X9TXPh6bm+aWwMmn1UqWWBVVcnBxg4/A1GmrTeWyOxIbHJJyP1rPYgDk0wGu/bYViwGJbPJq9BHmLccCqsSqoyam8/CFVOMCqTEQXLYYjvmp9OiEzsHXJ7Aj61UDGWXLHvWxo1lNcXo8kYXv09D61E/hb2HHV2NS4t4rW3XaxwfuhiPXmqMczMNxQsM42qM13tp4QW7jRruTzAM/Ltxj8Q30q1f+BbW3tT9hXdKe2SOx9W9cV5dPE0F7s9X3OyWEqtcyWh56DGTw3PXYSOPwqzBbTXREcBCnv1H8qsr4Q1mS+mEUHzIGbG9OQD0+9T4tK1+wugPs3lk9BvjPb6+9buEE705K/qYKEl8SdiGPSrxZNwcEduT/AIVq6Y0trqMRmjXLkJ+8B4BI5Ga63T9EjOnKs8W+4XOTux3PocdKqS6VE1xG8qbmXBDZI7/WuOOITm3L0Ol4dxSsaTMnlEr5ZGzoOuawb6SZpSqJ+YPtWwtuzDbF2OSPasrWfMtAJV4YdentXOtzWWiJLXQpbtRNJMAfXcfp6Vof2WdhL3LSEf3Xz/Sqmmat59uPKfEf93HufakuNUa1Usj8EYxjr+lVrcSStcsxCAOY/OXevJBYZ4qpqeowWqeWyq+fUA+nvXOXeutHdmaOPDkbTz15z6Vm3GrSXsh8wfQf5HtS5ddSZVlFWJbq8d4cCMB26nb71gt5hBA7j3rYV/OU8dKzrkraLluc969KhQjZTtdHDOTbKs0z21qd2CSeM9OlY81w8z5Y/RR0H0q1qVwXjVc/KcN/Os4fM3Wu2PmTYftPUijG4Ywc06Zgvyqc+tLGy456561QEJBzg0o4qaQofujn1qHnPWkA7PvT1YCoR6U7NO4WLSSirltMDKMGsxRU8bNGwYdqHqrAby3G5Qhb94OrYrEvoXSZ36qzE5/Or5tYYow7M+/0BFMYTNC3lxMU91OalPS62ZNtb3MRgxp0StuFaE9o7QCTawYDnI46VUjBRuadi7hK7AGo1LnntUkoJ/8ArUxHCkChIRqaLZG+1K3tgcebIqZ+pA/rXteg+HLbSbGMEbplzvOSN3Jx3I6GvHNEuEj1a0kzwkiMc+zCvV7PxfaQ4jxz36f/ABVefmUp8qjHY7cF7NNuZ0gh322Ryx/xpixTkhnb5QeRgVSPiG0uWVjLGoHqwH9as2msWIkMrTpwMYDr9fWvE5Zdj1PaRvdMvQ3CRK0atubk9MY9qS6JltCWGG7fnVK51nTWlRo7hS2QcF1/xqG71y1jh3+Yn03DP86PeTFeDiUdEu52la1mP72L7/TvkjpWvqWmNeFLqKTy50wpbGcoMnGM461xsd+kuqrfW/KH/WBuv3cDGK2NV8aQ2FqZIbaaQjo2wFQcHrhvau105OalSW5zRnFwaqPYxdY1y58P3nlT2nmCT5lk8wDIJI6AH0pkHiaC6tWmaPEvGFyeOcdcVweua1NrWqPdzpGrHIAQEDG4nuT60mmXOyRl4wcZ/WvT+pxdPVe8ee67U9NjbmlTzvMj+R/XrUF5c3kqhTNvB4+6BUOpTJDs2HO7P9KpwTBpADgDvWNHCuceZkznZ2QB2DFJeWHAp6o7t8o6+9OaFVJkXcQDkfWo7i5K24yp3Htj3qaVDnnyy0IlJsWW+SwHzcuep9P85rFuL9rkgtxxjFWZLd3tSWVh6jHvWSB8/FejFKK5VsiUWmxJbfd3MG9cYGKrFB9Pap4jtjYnHeonk3HocVQxpQgZpURmbC9acoJHANSLI0fykDBoENGVO1hUmEK4ximedgkjHpTWYv2OaYA8IwWPSmKcU4OdpXHFIKQyQNT15PWogtSJxVWJNUOzEjAIHdhUouREuC3ttU1Ha/6RFNt++u3A9arSKRIQ3UHmvOxkve5UUu5aFyZM7guzpt9qT7LDecRLsdfUAZ/ziqwOO1WbV3EmY/lPc9azpYiUN9gauZzxGN9rKR7EU0wo3Pet1rFbrcWXa/8Aezmse9Q2kxjBzj2r0KdaFT4WJprcjV/IKlMhwavw6q4H7zII7jv9eay0ZpH5qdo12e9XOCmrSFsa664SNu6T8/8A69XDq0yRZWU7SccMf8a5XIQZ71p2cguFMTcYO6uWphYcj5VqUpM0W1SYkP5jAg9mOf51NFqctxgSTOQPVj/jWe9vlgEOO2KltoFSUo5+93x0rzLIpNnVaci2A3yyq0HqGyD1/DqayPFviCC5tY7OyKgFhIzR454YEZB+lQ6rqDxWYt4j8o68e4PpXMBCzgOcD1ruwmHvapI2nWtH2cRVIdcHhvWprfMco56+hprweXhlOV9cUDIXf029a9I5Se5vfOwOMDpTYZgpBJGCcVQ307f8n40kktgOmt5kbagAKkDg+vr9KS/W3VAXwMdBxntWRYXgEiB3wVIA47cVqzxw3qqxmwR1+U/57Vi5SSdlr0AzpZ3aQBVfaevHy1mC0eI5YZ/Cte72xZWNuPTFJbxtdnZ5fQ5zuqo33e4FBVAiyUUnOORTAiyybQig+wrQe38qdkdMryevvUTCCOdWQY9eT6U41Iy0QFWSAxNgEio5FynvWhcqj4YNgfSqMzIowpzmtGgRVA4PrmnKcHmkOc4pUjLt1wKgZKyKRlelNEZJpAxBxTw2TTQhQmKXAFKcjrSdaoCW1me3uVlXquf5V0EFlBrCF7WTN0qZePaeT3OTgdTXPMDsKjvW/wCCAI9ddj2hJ/8AHlrlxMFKF+xrS1lZ9Ss1s0ExjlXaVODznmrMUA+8D1q3qziXVJ3wceY3P/AjVbzxtEYBzXkpNuyG0othcyyJE4iPPGelc1dbmldmPzZOa2L64UIVBBJ7jp2rGnLNzjjPWvXw1H2cPe3M5SuxsH3qtPynWqkakkVOwOzAroQis/3q1vD9sbq+2A4IG768jisoIS4GK2dLuEttVt9rApvXJz/tCk03F2BWvqbVzpkqSNkY9Bx/jUC2jJy3IrtFgjeDzt+FZd4568ZrC1J0Dv1wcc/lXgptux2TpKKuc7LCZCsYOSaqaharZoqg5Yn9Of8ACp1uUXUxvPA64+lQa1cCW6jK9Ao/ma9eMZQcYR26nLo02yKNytpt3dW6Y7YqvPkJgdDUYmw+cVKW85QK6LkWKo4qS5URuADxjNKUp1yrM4xzx2oAqF/QVPbiWX5Ix834VGIyhLMCM1s6BHHJdgFsDuM89D0qbpK7Gk27Iv6Rp07RDzVy3pkcdfetk2LjgHmr8T+QGXg46YqUP5kiqnUkDmvJq46bfuaI9OGAjb3nqc9f2kvkHJ27ep4PY1hzW8gAfduU9sYr0fULXyrMGTdkrkAfQ1xmqIsSvIQ3OOPyrow2M9pK0zlr4f2exgudsgO3ge9PMS55FWnw8IkB6VWnzEcIMgjvXo2scokkKmIsvGBmqBcq2Vq9O22xJOMtxj6iswHHFS9xomb95IWPGalWJT1fafpmoQ/SnqCx4xQBMyYAwcgULSLx1p4Az1qhDTyK3fC+5LqaRf8AnmR79VrDCHFb2gAxTsAM7o8/qK58U7UmaUfjRbuwXnb5erE9Pes+8mS0TcceYegrTvHWIPI/G3Jrk9SvftVydv3R0/IVhhsPa05fIKj1aQ0z5bJAPsac0iyL9xRxjgVVzT0Y13mZNGgHIpzZx0pYSM05yB2oAgLLGfU1HA/lyK/oc0503ZbOPQVGF7k8UgO2sPES/wBmiOV87Rjk+w96ytR1cXMgSPIXufy96wUkZTt3YTPPHanySpkbOawWGp8/P1NHVk48rJI5Ee/3HJU/4UXI81gRnAot4No3nr2FSSKwQ44ro6GZRIG7AxUiErUZBD/jUyDOKSQEroOuKc8oBBWNSPcU8gEemKa0Yxwc1QitcShwMLg+wp2nyiG4WUybMZ/ix2NI8XrUZiHpUtDOsPiK3SQOWDDuAQf61La+J7d5lI2pgg/NgH+dcV5eKaoOQR2rljg6SVmjo+s1ejPT7jWxd22WkXgcEntj61yWtXgkXYrZz0IP0qrYXzEeTN8y7cDt6DHFQ6gVMo2DCj/61Y0sJyVL9B1MRKcbMs2zpNbFBjcO34057Uupx6d6zrWYwy5Fb7AFDsX5jx1r0W0kcpzl8zhlix8q4Offmq2DjNbN1YTSHcV/Uf41myx+X8pHtU26sq5BnFPVyOhpCB3puAOlAFhXz1qQNiqqk5xUqHJ5piJ0c5FdTo8MY083TH59/l/hgGuPjfmtnT7hf7yjaOcnr06VjXjzxsi4PldzVvovtMMkYON2ecfWuXutMmhlOz5h68D+tbcupwHKgPkfTH86zp7pZGO3rW+lrEamc9tPGm512g+4NIisMZ71pxGJ2XzN4A9MVDc/KxWL5l6+poAgQ4PSrC4cYI5qru55696nicA9KABoW7jFRvGCuB161caVOhzVSSZF6HNDBEDI2KRVCMC34VMsoKnGOneq8jZcmkMvx3UgXK0Ndl1II61HBcLEnuajaZGPOc44p3JJIVR5wHPGf61rGzhe3HlL831PrWGvLD1zWhYyNbybipI9ccd6aBkD/JxSK9S37Zfdg4P/ANaqinnNAFk4PSo2AHXik3cUFxikMYy8Z70scJI5GKaxzT1koACgikVjyMjIouGR8Mgx6ipVxIMHrio2Qg4osAWcXmTqCOP/AK1dBJGEQktgAZPFc/byLHdKz8KM8/hV2+1ZJIjFGM7hyT+PvSSjuwdyvfzAnET5XoeO/NZ3XrQRk05RQAD0pdmelSrHn61IsRXmiwXK3l881MkdStGrLuB5+tIh2nmmBTToKuWv3qKKlAI/+sf6mox/rKKKYFkdDQv3qKKYFM/6x/8AfNTR9aKKSBiyVSfqKKKBj0+6aY33qKKAFHSk/iFFFAE8f31+taaf6j/PrRRVITIr7/VJ+P8ASqa9KKKHuJCnpTTRRSGJ3pR1oooAni6int940UUwKcn3BUH8QooqEMkHSlXvRRTAsx9an/5ZtRRVEkafcP1pj0UUugz/2f/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo2ZjdlNWMyYS1mODAzLTQ0NjktYmQzZC1kNjYyNGRjMWU3MWYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDFiZjkwZDMtZWVlNy00YzVjLWI4NjEtNGNjMTA4OGU0MjY5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTQzYzI0NTctY2Q4OC00Yzg3LTg2ZDYtZjRhZDExYjQwZmYxIiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTE2MDczODM3MyIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmYxNGJlZGJkLWJjMWItNDQ4Mi04Yzk1LTQ0MTZhNTlhNGU2MyIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzk6MjArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAAAwUEBgABAgcI/8QAGgEAAgMBAQAAAAAAAAAAAAAAAQIAAwQFBv/aAAwDAQACEAMQAAABru7NfdFXrfO0/Ifo+cNCwyWSGgeXpFz7+XU+yom6mTsrWYrcZZId1fWtuRewBz7F/NfnPJAu4lZBJ1zZpU/WpDyL90sues3apSaVZVBjw7h52tFOvFYUC01K+5iQ7YCyZIyoJs0ru4zXW5crdecG3daPqLF1aK2FQ6POpnbpVtOjOAZcDrOqy5olg9n8117hyti6xK92stI287S1r9QRWnkzINAkdXfFtkYIt76w9SNeY7rkX131OaIwJUW1cKIr1BcjYQZg/wAWmbxhWPR0CaWLHon43q3TzAtQYl94fYsXM1+c+w84qVosEto/w3x9lCFhOaRFnRhTJRABIitLSFcbkTgkMmVk1q8yCkjgjk3I4sVep4kkSDQxDJzLsH//xAAnEAACAgICAgEDBQEAAAAAAAABAgMEABEFEgYTIRQiJAcQFTEyI//aAAgBAQABBQLuLsX6e2pK/KeVchFS4u3/AHX7JkdhXJlC40mdvj2fJn1iWA2b3k0STNEI4ckIGcF5B/Cc1y/NPynKN+Qky6O2RgTvtgkzZORHuraiFaZJQY1DTRLGHZyXiHqVywqWA+O7FvWMp8L9Utji+gPjzEW+MlqqknrW1c9souFS1l5TXk3luVoV77cShF8a4ee5JZ8RPSt41LWsQ0l4+ZpkoW7nkQR5bX1mW5gybGEb/aNipeP2rJV9ZC6bx/yaKjQXyul1ueQw3I/K/IJHijvFqifkC4GKIp6dDnb5O8UYimeGCNu14LC+v+dHc6V3aoHVnlkbIrRgkXVx56PqV9EPEy4N71nCnpykjekTn3kr9nAWkrW+Ytx9rcjNPruJIwM4qzDFUnevLR+JcsNoK2Kd5xC7sct7GkXYP+1KEYh7NLp8aEwAqGxo8hZocob994oG1vEB3TlZHew8pk+5YmIx5T37ESdyxb4r71hOIdj2tA3+jGoOH+v/xAApEQACAgEEAQIFBQAAAAAAAAABAgARAwQSITEQIEEFExQwUSIjMjNS/9oACAEDAQE/AXAfj3mHg1HYAczuAbjUbHXUVSRUVAJcNXBjUCfJ/wAx8ZTuDDx3BiYGIbtop2vzGNm4TuiUBcuXL4lyzN494MgEbITN4qBrgcDqMd3PkLU494uNTGxifT/iPiK9xvFeFNGE+dLhfK1iZfhxAvG1zHpjv25KqbFxOYSFbmNlC/xmTIW9QHPnS6tcKbCJ9djmbVJmoL3NZlYftkRclLUDfmD1BbHE23CAD4UXFJx8iEk8n0EEd+nT/wBgjGvOBgj/AKupqGUmlhO7nzo3wItt3MpwZUtZ0YPODhrhbcbP2QfTdff/AP/EACoRAAICAQQBBAEDBQAAAAAAAAECAAMRBBIhMRAFEyBBUSIyQhQwM2GR/9oACAECAQE/AaWej9R5BmsAIDSutrDhZ0I7ipdxlWtVzhuJZqKkfJMt1DNnB4PgMw4Bjay1jkcRPUF/mJTet3UOvAcjbxG11TLt55moCptrYyysW1AJKk2JiKoqXuanc9gQ/thYoxx8a6nt/YJ/SN1nmU6ZK1H5h01jORjEeo1nDR97EK3M06GtcZ48WjeuI+otc7hBW7LuA4jZXBP3MzfN26aEsBk9TaAxcfcyfF9fuJNNQU/U/czMz1C2utMN3KfUlJ22rgf6lmorKbqc5hZrKh+J2MTbmaStbCVM57mfPfce5awN/BiMtgysE9R07Nbv/MOncdyhDU2T1PT9OufdzLtKHsDfX3L9IMg1/wDJsWsAATmY+GuB3A/USxqzlZp7HtTc3jXLlA0QBmAaKFHC/XhxugTZlswOWI2HImfzDB41n+EzT0+8/PUCBV2r41dfu0nHYmhpZTvcRU9sYHgzWrfZZsXqBbtPZzxFyygmHzrOUCj8xahUNqj+yyBu5+r+MxjjwIVDDn5/Xw6Pw//EAC8QAAEDAwMCBQIGAwAAAAAAAAEAAhESITEDIkEQUQQTMmGBIEIjJDNDUnFyseH/2gAIAQEABj8COm/1ftxe6d4Y41Gw4HuFqV6jWPcNoN5TnEKojaows9Jmyjj6L295VjfuowFp6+oC7Rw6nK1/EueXaZcaAe3Chwp/pM070o4U9ZRtKElQMjunO1TSF+G9viNM4c1AFEF4teTx0LXTV3UqTZS0yAiLShS4Pdyt9jyE6TYLb6UCAAVudUqTgoEHc7lZRAyvMaI0+XlflterXOQ+yDPGeSdI4c03KexrqZiyLtRgLHYeboDSpcR25Ti8qGC0oLb1pmf8lUNze4WJC0vDu05p5+Uag6fay02aQMzNX8Sm+D8rTEtBJyf+Lc6XNsFP3J4O0DAR5V1iFfpUwen1Be2EBp/KlOEHanFsyidUms3kqFfHZHygas7lMT3CAi6k4UC/TRdwJ/0nOtCqn4UKh/6bxBThpR8JzlPKLpn2TJpY7mpTUHOTiMyms5yetQ+0SU0Bp8v2VxHXehBV7z1pnae6tjlYl/eetkKiv6HHWVdETbP0SwwcKTnpK//EACUQAQACAgEFAAICAwAAAAAAAAEAESExQVFhcYGRscEQ8KHR8f/aAAgBAQABPyEF6Jyv4c9fzLWBwWcqfuA2E2szgPkYtresuwrTymG+Y1NOLmr0gmONtwMbLi61MXTcB/pGqRnHKcmqHx5PkCrsishN57zPoCFHFXGIwh440vzGM3Vg3Gh0XGIEZeZYKuOYvBLhR8xMwvGJTKF+xWnY2lU39xsiWHSPccnPyDYqYHdxlqAOL43EgOCKdmAv7OBqxBshbrKK5M9LgY/oWzgvAsohBxSy0Ef00Yt4wPrCR3nML3+UoIX0GpWo+Q7QWJK7ZT0rrE3HwWX2+zn+ZtP75l1c7RK0We5ZKYlquGakFKlwmdzxER5pLy4Ix65esqOXWDmMwUe8GN6l9SQvPntWotaeUqZF8SAYN7DVNmAda7VMeRBHslhzc9ZfzT/kyw2F4n9kXOkRnmJwZVthwPs6Qi+gRCW9Ohcd/Efww7sdI+Wa8BjQZXBdAzE4uajmhYqmcSiB7su1kObRXivZzqBZodAmZwcnWCYBdIOE8VL3X5nTlae0uhF8usx0ohaWllQs3V4ZxmPpMKDRjxN55RqqrhtWUKKSsbcaOJhGIYVGU5v6Jov/ABB7pfNWYXjX7JeE25Wy3E7GPB8mZCntxAPQODmGp9sQBiBdmoXZB4h7oXGlwPsMOs2F2CidL+EBWmen1UfZseF+ZYUxomIblla4cioUIIRVlkOcRaxDKXkLW2Glk0Apn//aAAwDAQACAAMAAAAQmzVu8s1W1nzW/vxGlh9XjIpgwdesdisODvLuOoM7ZARAtGWxX8OTVLDMHlpsxtg0ECD3/8QAJhEBAAMAAgIBAQkAAAAAAAAAAQARITFBEFFxYSCBobHB0eHw8f/aAAgBAwEBPxBOpQiVUsSnKNQii1cXg57lRZofvAVdxLREg7FLq4mAiIeUItmRqBvr3FZ+/HdMV2ESw7KJDewOJc4Z3SonpMjb6lIpuCMlgjmXseARyBhlB1OJbqHEOYWKWwsjTAwHy0oC0SsiVOIodxBcd3/kOAs77/GBm6cz9SWDg9zU1U3WBKnzKlVLbBsusYsE+xvyzDBgNj6vUEClg+3+IqN04icKK2WXLnzLqXGR6cwU1gfDJAlvyRiy18VcBujZwipXqGx8Is+fymmpdtsuGe7GXDslq3gZS0NWsdqP99ZGkDicLleEWuhiJ4OPCZC4N+C4hxEO4eGoLhCEQYFcRL5nU7+wAmwi1PpP/8QAJhEBAAIBAwMEAwEBAAAAAAAAAQARITFBUWFx8IGRoeEQscHR8f/aAAgBAgEBPxClS0ns1cIzKUSqjiP9MlfrOkJXEHFc1no94XrB9qK++sqG2ghmqnmbiBwPTJBleeN/uaQDHD7fyMKYKeksIB0ePTRlXGyQCJms948FUu7CfORpvcuQC4xt50iXmakriUy2LK83g6EY2nHeACWbz3iE9zHu2sqxTElNMG958+JYNtRtXStYXAVKdu3idYlZAONvH5jC4N5QByIBzKGUxMykTLT0OXdgPM/wV+IMw0vU0Zc9J29es11DjAOZN0Neu+J0Ujw/qO1I20Da8c/MDUwunvqP+f7DuJcZhnbYeGZoqrg2miY2l1HBN0TGptr/ADSWTsgp0i+zQK9CI1hEGVYTk806y2LaUDQ+4Xils+PfSMDL+X2yiI5rXMBEtvNdJSwJbrox/YLemUnDit5tCScjXv8A8mn8pfvCsYYY2ly0I0jcJLS8tuOmWtI4CtnDZx6eby2AQVv+VC3p+44AaasJYAlbRwcw9NfiOKlYLh69lfduBzAGYasaiBp6/cABUaebxhNMrYEuFawuukQrgft6wZrpEYNtMQiVGIGkrqjXJcunLrKmmZUDCXBs7y248wWotuYYbJrK/IzFcE2gDNrn/8QAJBABAQACAgICAQUBAAAAAAAAAREAITFBUWFxgZGhscHR8OH/2gAIAQEAAT8QZzF2xILVog4HQ4OUaVRAFG3SCJLv04n9Q/GUe1r2Au0Mdpaj4XBriNt5J1++c9Hh6cb6mKRr7/XHOFIK+jJppB3H1fGLJUoQYVwjhp94ikDwBzjHQzlmjnERp5JvHzTZpAL3h376nXf94zOXIrDZuId+MtwEQpgJeA15wV1Cug6fZ0fRgpCDQ0Yu3l0/EyFAFBkPBr44x4KV0jGzAT4zcoSE4wcVHRGFaSzQNtbriKawl5dHrHZUbLTz8ZHmxAo7+3YEpz6ibT+1oYSJQRN0lMNPCyxvIcv9TA/FAraJyhv25ahvE0ODDZk4nR4Trq7wOVEhIT2vJXv3kLjUGD/3LHFjBBFlkeR16zm7RQor6694YKtoFJsRiJx9ZWVL4SR98fnHBVhgaebXqc/eXM0Q7gb/AE/n4P8ArDdPYXn5uIspoLQ+QNGCvCkq+LHwYOdDBFmcvd6xQKER5yH7bdrkXC2aWUFLDhezzgitpQBUNQ73g/VwoIugPInXeEfnDHUoks52aompASMupq2JyF4ZOb6sAAEUCbATWtk494w/fqI9E8F1kIBg9sGlfD/GHJVa+E+MnJe2S+zprO/8MXEJUA8HaBftnR8aQvH+845WzV5f8ywYNk4KHZeXmes1PDNAzbR3XPFB9o0R3UidjLvL5mWGUmhFT2x8tu0rB1bcfQ9YUyCVdQNkH6PxiijV1WbVQ3S8+8r/ADgBz52+8YaRtAu/vJVc4pqa6wjwWx4W44O0+M2SdF86OdjV6T2YFdEkpD2RxP6xSFBKVHRcG3Xajiu5KPJPzrX3hJXelBTdOwlPeS6NqrAee5DXjGeUoeHj+P1w3BXEaTi/78YHSpeQ6gzjUwGMk9fUm5tMQ6VgEj/ObRrbtiNkpQuucVC0wU0TC5hgcJOJ8pzi0hEjboH3m6msBaBxm0Y+LjCQGe2/Rx8L5y0pBB6ChF7ZvD7tJqhIg/WPAEQwxLnQe/3yKZLDrY3wl/3KhWSmniJPGNIj3MGxxu2AJPWn5yKEh32wQVT0vOQKCwG3E+/wZOlEJpebPrKCRpGT6yhCMIg24jVS7N8MOeDgVXl840mtjOjlvFg9XrJMD1hLBeNGMATLadE8OT4tacCY3L10b0oHPr3mnQp6zXR54cVwad/vhyFboP2Y6LGSgpzw5wxQ09YWKB6JctNq6u8FRK2zHMUDGxWOEY9XClcTQW2+speVQsNOveKpG1OVec54JbjAYPYc/Of/2Q==",links:["https://mt0.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt2.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt3.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"]}],ZG={class:"base-map-button__content"},WG={class:"base-map-button__title"},qG={class:""},KG={key:1},YG={class:"base-map-control-setting"},XG=["title","onClick"],QG=rr({__name:"BaseMapControl",props:{...So,baseMaps:{type:Array,default:()=>$G},title:{type:String,default:""},defaultBaseMap:{type:String,default:"Open Street Map"},controlIcon:{type:String,default:""}},setup(t){const e=t,{mapId:n,moduleContainerProps:a}=Ai(e),{trans:s,setLocaleDefault:d}=jo(n.value),{setBaseMaps:l,baseMaps:o,setDefaultBaseMap:g,setCurrent:_,currentBaseMap:I}=LP(n.value);Xo(()=>e.baseMaps,N=>{l(N)},{immediate:!0}),Xo(()=>e.defaultBaseMap,N=>{g(N)},{immediate:!0}),d({map:{basemap:{title:"Map basemap",setting:"Setting"}}});const C=bn(()=>70),E={layer:bO},S=gn(!1);function k(N){_(N)}function D(){S.value=!S.value}return(N,U)=>(St(),tn(ct(Qo),Tr(ct(a),{btnWidth:70}),{btn:Se(()=>[ct(I)?(St(),tn(ct(di),{key:0,tooltip:t.title},{content:Se(()=>[te(ct(o8),{class:"clickable base-map-button__container",height:"70px",width:"70px",onClick:D},{default:Se(()=>[zt("div",ZG,[te(ct(mw),{src:ct(I).thumbnail},{default:Se(()=>[zt("div",WG,[t.controlIcon?(St(),tn(ct(C2),{key:0,dark:"",small:""},{default:Se(()=>[ho(Rn(t.controlIcon),1)]),_:1})):(St(),tn(ct(Wn),{key:1,type:"mdi",path:E.layer},null,8,["path"])),zt("div",qG,Rn(t.title||ct(s)("map.basemap.title")),1)])]),_:1},8,["src"])])]),_:1})]),_:1},8,["tooltip"])):(St(),pe("div",KG))]),draggable:Se(F=>[S.value?(St(),tn(ct(bd),Tr({key:0},F,{height:C.value*(Math.floor(ct(o).length/3)+1)+48+10,show:S.value,"onUpdate:show":U[0]||(U[0]=j=>S.value=j),"is-resizable":!1,title:ct(s)("map.basemap.setting"),width:C.value*3+24}),{default:Se(()=>[zt("div",YG,[(St(!0),pe(mr,null,ki(ct(o),j=>(St(),pe("div",{key:j.id,class:"clickable base-map-control-setting-item",style:fi({width:C.value+"px"}),title:j.title,onClick:$=>k(j)},[zt("div",{style:fi({width:C.value-34+"px",height:C.value-34+"px"})},[te(ct(mw),{src:j.thumbnail},null,8,["src"])],4),zt("div",{class:Li(["base-map-control-setting-item__title",{"base-map-control-setting-item__active":ct(I)&&j.id==ct(I).id}]),style:{"font-size":"14px"}},Rn(j.title),3)],12,XG))),128))])]),_:2},1040,["height","show","title","width"])):Cn("",!0)]),default:Se(()=>[qn(N.$slots,"default",{},void 0,!0)]),_:3},16))}}),JG=Vn(QG,[["__scopeId","data-v-da52311a"]]);class t${get id(){return this._id}constructor(){this._id=`${ju()}`}}function e$(){const t=ju();return{get id(){return t}}}function Jc(t,e){try{let n;if(typeof t=="string")n=new Function(`return function ${t}() {}`)();else if(typeof t=="function")n=t;else throw new Error("Invalid prototype source");const a=Object.create(n.prototype);return Object.assign(a,e)}catch{return{...e}}}function n$(t,e){let n;return{...e$(),type:"base",getName(){return t},setName(s){t=s},getData(){return e},setData(s){e=s},setParent(s){n=s},getParent(){return n},isComposite(){return!1},accept(s){return s.visitLeaf(this)}}}function Fg(t,e){return{...n$(t,e),type:"leaf"}}function r$(t,e={}){const n=Fg(t,e);return Jc("DataManagementComponent",{...n,get type(){return"dataManagement"},get fields(){return e.fields},showDetail(a,s){throw new Error("Method showDetail not implemented.")},getList(a){throw new Error("Method getList not implemented.")}})}class ov{visitChildren(e){e.getChildren&&e.getChildren().forEach(n=>n.accept(this))}}class RP extends ov{constructor(){super(...arguments),this.rootDataset=null}visitLeaf(e){return this.findRoot(e)}visitComposite(e){return this.findRoot(e)}visitRoot(e){return this.rootDataset=e,this.rootDataset}findRoot(e){let n=e;for(;n;){const a=n.getParent();if(!a){this.rootDataset=n;break}n=a}return this.rootDataset}getRootDataset(){return this.rootDataset}reset(){this.rootDataset=null}}class i$ extends ov{constructor(e,n){super(),this.sourceLeaf=null,this.foundLeaf=null,this.sourceLeaf=e,this.typePredicate=n}visitLeaf(e){return this.sourceLeaf&&e===this.sourceLeaf?this.foundLeaf:(this.typePredicate(e)&&!this.foundLeaf&&(this.foundLeaf=e),this.foundLeaf)}visitComposite(e){return this.foundLeaf||this.visitChildren(e),this.foundLeaf}visitRoot(e){return this.visitComposite(e)}getFoundLeaf(){return this.foundLeaf}reset(e,n){this.foundLeaf=null,e&&(this.sourceLeaf=e),n&&(this.typePredicate=n)}}function SM(t,e){const n=new RP;t.accept(n);const a=n.getRootDataset();if(!a)throw new Error("Could not find root dataset");const s=new i$(t,d=>d.type===e);return a.accept(s),s.getFoundLeaf()}function vc(t,e){const n=t.getParent();if(n&&n.isComposite()&&n.getChildren){const d=n.getChildren();if(d){for(const l of d)if(l!==t&&!l.isComposite()&&e(l))return l}}const a=new RP;t.accept(a);const s=a.getRootDataset();return s?s$(s,e):null}class DP extends ov{constructor(e,n=[]){super(),this.functions=[],this.foundComponents=[],this.results=new Map,this.typeCheckFunction=e,this.functions=n}addFunction(e){this.functions.push(e)}visitLeaf(e){if(this.typeCheckFunction(e)&&(this.foundComponents.push(e),this.functions.length>0)){const n=this.functions.map(a=>a(e));this.results.set(e.getName(),n)}return this.foundComponents}visitComposite(e){if(this.typeCheckFunction(e)&&(this.foundComponents.push(e),this.functions.length>0)){const n=this.functions.map(a=>a(e));this.results.set(e.getName(),n)}return this.visitChildren(e),this.foundComponents}visitRoot(e){return this.visitComposite(e)}getFoundComponents(){return this.foundComponents}getResults(){return this.results}reset(e,n){this.foundComponents=[],this.results=new Map,e&&(this.typeCheckFunction=e),n&&(this.functions=n)}}function Hp(t,e,n=[]){const a=new DP(e,n);return t.accept(a),a.getResults()}function q2(t,e=[]){const n=new DP(a=>!a.isComposite(),e);return t.accept(n),n.getResults()}class o$ extends ov{constructor(e){super(),this.foundComponents=[],this.typeCheckFunction=e}visitLeaf(e){return this.typeCheckFunction(e)&&this.foundComponents.push(e),this.foundComponents}visitComposite(e){return this.typeCheckFunction(e)&&this.foundComponents.push(e),this.visitChildren(e),this.foundComponents}visitRoot(e){return this.visitComposite(e)}getFoundComponents(){return this.foundComponents}reset(e){this.foundComponents=[],e&&(this.typeCheckFunction=e)}}function OP(t,e){const n=new o$(a=>a.type===e);return t.accept(n),n.getFoundComponents()}class a$ extends ov{constructor(e){super(),this.queue=[],this.result=null,this.checkFunction=e}visitLeaf(e){return this.checkFunction(e)?(this.result=e,this.result):null}visitComposite(e){return this.checkFunction(e)?(this.result=e,this.result):(e.getChildren&&this.queue.push(...e.getChildren()),null)}visitRoot(e){for(this.queue=[e],this.result=null;this.queue.length>0&&!this.result;){const n=this.queue.shift();n.isComposite()?this.visitComposite(n):this.visitLeaf(n)}return this.result}getResult(){return this.result}}function s$(t,e){const n=new a$(e);return t.accept(n),n.getResult()}function D1(t){return"removeFromMap"in t&&"addToMap"in t}function l$(t){return"removeFromMap"in t&&"addToMap"in t}function Ih(t){return"toggleShow"in t&&"setOpacity"in t&&"moveLayer"in t&&"getBeforeId"in t}function c$(t){return t.isComposite()}function u$(t){return"identifyGroupId"in t}function Ew(t){return(t==null?void 0:t.type)==="dataManagement"&&typeof t.showDetail=="function"&&typeof t.getList=="function"}const K2="dataset-component";function h$(t="component"){return`${t}-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}function d$(t){const e=[],n=gn([]);Vu(t,K2,{components:e,componentIds:n})}_d(K2,d$);function Rb(t){return Bo(t,K2)}function f$(t){var e;return(e=Rb(t))==null?void 0:e.componentIds}function Y2(t,e){const n=Rb(t);if(!n)return;if(e.check){const s=n.components.findIndex(d=>d.check==e.check);if(s>=0){const d=n.components[s].id;return Object.assign(n.components[s],e),n.componentIds.value.splice(s,1),n.componentIds.value.push(d),d}}const a=h$();return n.components.push({...e,id:a}),n.componentIds.value.push(a),a}function p$(t,e){const n=Rb(t);n&&(n.components=n.components.filter(a=>a.id!==e),n.componentIds.value=n.componentIds.value.filter(a=>a!==e))}const X2="dataset-highlight";function m$(t){const e={feature:gn(void 0),source:gn(void 0),dataset:void 0};Vu(t,X2,e)}_d(X2,m$);function Q2(t){return Bo(t,X2)}function Db(t,e,n,a){const s=Q2(t);if(s){if(!e&&s.source.value===n&&s.feature.value){if(s.feature.value=void 0,s.source.value=void 0,s.dataset){const d=vc(s.dataset,l=>l.type=="source");if(d&&"hightLight"in d){Yc(t,l=>{var o;(o=d.hightLight)==null||o.call(d,l,void 0)});return}}s.dataset=void 0;return}s.dataset=a,s.feature.value=e,s.source.value=n}}function g$(t){const e=Q2(t);if(e)return e.feature}function y$(t){const e=Q2(t);if(e)return e.dataset}const Ob="dataset";function v$(t){Vu(t,Ob,{datasets:{},datasetIds:gn([])})}_d(Ob,v$);async function Tw(t,e){const n=zP(t);if(!n)return;const a=av(t,"list"),s=OP(e,"list");n.datasets[e.id]=e,s.forEach((d,l)=>{d.index=l+1+a.length}),n.datasetIds.value.push(e.id),Yc(t,async d=>{q2(e,[l=>{D1(l)&&l.addToMap(d)}])})}function _A(t,e){const n=e.getParent()||e;Yc(t,async a=>{D1(e)&&e.removeFromMap(a),q2(n,[s=>{D1(s)&&s.removeFromMap(a)}])}),n&&c$(n)&&n.remove(e)}function zP(t){return Bo(t,Ob)}function av(t,e){const n=zP(t);if(!n)return[];const a=[];return(Object.values(n.datasets||{})||[]).forEach(s=>{const d=OP(s,e);a.push(...d)}),a}function J2(t){return Bo(t,Ob).datasetIds}const _$={class:"row-container"},b$={class:"btn-copy"},x$={__name:"table-td-copy",props:{value:{}},setup(t){const{copy:e}=ZD({}),n={copy:sO};return(a,s)=>(St(),pe("div",_$,[zt("div",b$,[te(ct(Cl),{onClick:s[0]||(s[0]=d=>ct(e)(t.value))},{default:Se(()=>[te(ct(Wn),{path:n.copy,size:"14",type:"mdi"},null,8,["path"])]),_:1})]),qn(a.$slots,"default",{},void 0,!0)]))}},A$=Vn(x$,[["__scopeId","data-v-94841ed8"]]),w$={key:0,class:"grid-row"},C$=["title"],I$={class:"value-cell"},M$={key:1,class:"grid-row grid-row-full"},S$={__name:"table-td-layer",props:{item:{},view:{},field:{},label:{}},setup(t){const e=t,n=bn(()=>e.item?e.item[e.field.value]:"");return(a,s)=>(St(),tn(A$,{value:n.value},{default:Se(()=>[t.field.inline?(St(),pe("div",M$,[te(ct(RT),{readonly:"",rows:"10",modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=d=>n.value=d),label:t.label},null,8,["modelValue","label"])])):(St(),pe("div",w$,[zt("div",{class:"label-cell",title:t.label},Rn(t.label),9,C$),zt("div",I$,Rn(n.value),1)]))]),_:1},8,["value"]))}},E$=Vn(S$,[["__scopeId","data-v-b9f907c8"]]),T$={class:"table-show-info"},P$={class:"table-content"},k$={name:"detail-layer-info"},L$=Object.assign(k$,{props:{item:{},view:{},fields:{type:Array,default:()=>[]}},emits:["close"],setup(t,{emit:e}){const{mapId:n}=Ai(),{trans:a}=jo(n.value),s=e;function d(o){o||s("close")}function l(){Db(n.value,void 0,"detail")}return(o,g)=>(St(),tn(ct(Qo),No(Mo(o.$attrs)),{draggable:Se(_=>[te(ct(bd),Tr(_,{show:"",onClose:l,"onUpdate:show":d,width:400}),{title:Se(()=>[ho(Rn(ct(a)("map.layer-control.info.title")),1)]),default:Se(()=>[zt("div",T$,[zt("div",P$,[(St(!0),pe(mr,null,ki(t.fields,(I,C)=>(St(),tn(E$,{field:I,label:I.trans?ct(a)(I.trans):I.text,item:t.item,view:t.view,key:C},null,8,["field","label","item","view"]))),128))])])]),_:2},1040)]),_:1},16))}}),FP=Vn(L$,[["__scopeId","data-v-b9180281"]]);function Pw(t){return{id:t.id,...t.properties,geometry:t.geometry}}function bA(t){const{geometry:e,...n}=t;return{id:t.id,type:"Feature",geometry:e,properties:n}}function kw(t,e={}){const n=r$(t,e);let a=[];const s=g=>g?Promise.resolve(a.filter(_=>g.includes(_.id))):Promise.resolve(a),o=Jc("DataManagementMapboxComponent",{...n,addToMap:g=>{s().then(_=>{var C;const I=vc(n,E=>E.type==="source");I&&l$(I)&&((C=I.updateData)==null||C.call(I,g,{type:"FeatureCollection",features:_.map(E=>bA(E))}))})},removeFromMap:g=>{console.warn("removeFromMap not supported")},getList:s,setItems(g){a=g},showDetail:(g,_)=>{Y2(g,{component:()=>FP,attr:{item:_,fields:e.fields,view:o},check:"detail"}),Db(g,bA(_),"detail",o)},async addFeatures(g=[]){a.push(...g.map(Pw)),a=Ty(a)},async updateFeatures(g=[]){const _=g.reduce((I,C)=>(I[C.properties.id]=C,I),{});a=a.map(I=>_[I.id]?Pw(_[I.id]):I)},async deleteFeatures(g=[]){const _=g.map(I=>I.properties.id);a=a.filter(I=>!_.includes(I.id))},async getFeatures(g){return a.filter(_=>EG(_.geometry,Aa(g))).map(bA)}});return o}class BP extends t${constructor(e,n){super(),this.name=e,this.data=n}setParent(e){this.parent=e}getParent(){return this.parent}accept(e){return e.visitLeaf(this)}isComposite(){return!1}getName(){return this.name}setName(e){this.name=e}getData(){return this.data}setData(e){this.data=e}}class R$ extends BP{get type(){return"leaf"}constructor(e,n){super(e,n)}accept(e){return e.visitLeaf(this)}}class D$ extends BP{constructor(e){super(e),this.children=[]}get type(){return"composite"}isComposite(){return!0}getData(){return this.children.map(e=>e.getData())}add(e){this.children.push(e),typeof(e==null?void 0:e.setParent)=="function"&&e.setParent(this)}remove(e){const n=this.children.findIndex(a=>a===e||a.id===e.id);n!==-1&&(this.children.splice(n,1),typeof(e==null?void 0:e.setParent)=="function"&&e.setParent(void 0))}getChildren(){return[...this.children]}accept(e){return this.parent?e.visitComposite(this):e.visitRoot(this)}}function Ru(t,e,n=!1){return n?new D$(t):new R$(t,e)}function NP(t,e,{zoom:n=15}={}){if(!e||!t)return;const a={top:50,bottom:50,left:50,right:50};if(["Point"].includes(e.type)){t.easeTo({center:e.coordinates,zoom:n,duration:0,padding:a});return}a.left=a.left,a.right=a.right;let s;e.length==4?s=e:s=O$(e),s&&t.fitBounds(s,{padding:a,duration:100})}function O$(t){if(!t.type)return;let e;return["Feature","FeatureCollection"].includes(t.type)?e=Df(t):e=Df({type:"Feature",properties:{},geometry:t}),e}const z$="Style Control",F$={area:"Area",line:"Line",point:"Point",symbol:"Symbol"},B$={title:"Layer",id:"Id",type:"Type","min-zoom":"Min zoom","max-zoom":"Max zoom"},N$={title:"Style"},j$={title:z$,add:F$,"back-to-default":"Back to default value",layer:B$,style:N$},V$={color:"Color",width:"Width",opacity:"Opacity",blur:"Blur","stroke-color":"Stroke color","circle-pitch-alignment":"Pitch alignment","circle-pitch-scale":"Pitch scale","stroke-width":"Stroke width","stroke-opacity":"Stroke opacity",translate:"Translate"},U$={setting:V$},H$={color:"Color",pattern:"Pattern",opacity:"Opacity",antialias:"Antialias",translate:"Translate","fill-antialias":"Antialias","fill-pattern":"Pattern","fill-outline-color":"Outline color"},G$={setting:H$},$$={color:"Color",pattern:"Pattern",opacity:"Opacity",width:"Width",cap:"Cap",join:"Join","round-limit":"Round limit","miter-limit":"Miter limit","dash-array":"Dash array","grap-width":"Grap width",blur:"Blur",offset:"Offset",translate:"Translate","translate-anchor":"Translate anchor"},Z$={setting:$$},W$={"raster-brightness-max":"Max brightness","raster-brightness-min":"Min brightness","raster-contrast":"Contrast","raster-fade-duration":"Fade duration","raster-opacity":"Opacity","raster-hue-rotate":"Hue rotate","raster-resampling":"Resampling","raster-saturation":"Saturation"},q$={setting:W$},K$={text:"Text",icon:"Icon",position:"Position",placement:"Placement"},Y$={"text-font":"Font","text-color":"Color","text-field":"Content",image:"Image",color:"Color",opacity:"Opacity",font:"Font","letter-spacing":"Letter spacing","line-height":"Line height","max-width":"Max width",transform:"Transform","halo-color":"Halo color","halo-width":"Halo width","halo-blur":"Halo blur","fit-icon":"Fit icon to text",size:"Size","icon-opacity":"Icon opacity","icon-size":"Icon size","icon-text-fit":"Fit icon to text","icon-text-fit-padding":"Icon-text padding","icon-image":"Icon image","text-justify":"Text justification","text-anchor":"Text anchor","text-offset":"Text offset","text-radial-offset":"Text radial offset","text-translate":"Text translation","text-rotate":"Text rotation","text-pitch-alignment":"Text pitch alignment","icon-offset":"Icon offset","icon-translate":"Icon translation","icon-rotate":"Icon rotation","symbol-placement":"Symbol placement","symbol-spacing":"Symbol spacing","text-max-angle":"Max text angle","avoid-edges":"Avoid edges","sort-key":"Sort key","text-orientation":"Text orientation","text-padding":"Text padding","allow-text-overlap":"Allow text overlap","text-ignore-placement":"Text ignore placement","text-optional":"Text optional","icon-padding":"Icon padding","allow-icon-overlap":"Allow icon overlap","icon-ignore-placement":"Icon ignore placement","icon-optional":"Icon optional"},X$={tab:K$,setting:Y$},Q$={class:"layer-control__title"},J$={class:"style-control"},tZ=rr({__name:"style-control",props:{item:{}},emits:["close"],setup(t,{emit:e}){const n=e,a=t,{mapId:s,callMap:d}=Ai(),{trans:l,setLocaleDefault:o}=jo(s.value);o({map:{"style-control":j$},"circle-style":U$,"line-style":Z$,"fill-style":G$,"symbol-style":X$,"raster-style":q$});const[g,_]=Pf(!1),I=gn(),C=gn(void 0);let E=Mg("");mo(()=>{_(!0),C.value=void 0,D()});const S=()=>{C.value=void 0,I.value=void 0,n("close")},k=N=>{d(U=>{C.value&&C.value.updateValue(U,N)}),D()},D=()=>{const N=vc(a.item,U=>Ih(U));N&&Ih(N)&&(C.value=N||void 0,E.value=N.getComponentUpdate(),I.value=Ty(N.getData()))};return(N,U)=>(St(),tn(ct(Qo),No(Mo(N.$attrs)),{draggable:Se(F=>[ct(E)?(St(),tn(ct(BT),Tr({key:0},F,{right:"",show:ct(g),"onUpdate:show":U[1]||(U[1]=j=>po(g)?g.value=j:null),onClose:S}),{title:Se(()=>[zt("span",Q$,Rn(ct(l)("map.style-control.title")),1)]),default:Se(()=>[zt("div",J$,[(St(),tn(sa(ct(E)()),{modelValue:I.value,"onUpdate:modelValue":U[0]||(U[0]=j=>I.value=j),onUpdateStyle:k,trans:ct(l),mapId:ct(s)},null,40,["modelValue","trans","mapId"]))])]),_:2},1040,["show"])):Cn("",!0)]),_:1},16))}}),eZ={key:0,class:"toggle-buttons-container"},nZ=zt("span",null,"#1",-1),rZ=[nZ],iZ=zt("span",null,"#2",-1),oZ=[iZ],aZ=rr({__name:"toggle-show",props:{item:{},data:{},mapId:{}},setup(t){const e={show:ST,hide:ET},n=t,{callMap:a,mapId:s}=Ai(n),d=()=>{const _=!n.data.show;let I=n.data;I.show=!I.show,a(C=>{Hp(n.data.getParent(),E=>Ih(E),[E=>{E.toggleShow(C,_)}])})};function l(_){const C=wl.getters.getMaps(s.value)[_],E=g(_);let S=n.data;S.shows[_]=!E,Hp(n.data.getParent(),k=>Ih(k),[k=>{k.toggleShow(C,S.shows[_])}])}const o=gn(!1);mo(()=>{o.value=wl.getters.getIsMulti(s.value)});function g(_){let I=n.data;if(n.data.shows==null||n.data.shows.length<1){const C=n.data.show==null?!0:n.data.show;I.shows=[C,C]}return n.data.shows[_]}return(_,I)=>o.value?(St(),pe("div",eZ,[zt("button",{class:Li(["layer-item__button",{_active:g(0)}]),onClick:I[0]||(I[0]=_i(C=>l(0),["stop"]))},rZ,2),zt("button",{class:Li(["layer-item__button",{_active:g(1)}]),onClick:I[1]||(I[1]=_i(C=>l(1),["stop"]))},oZ,2)])):(St(),pe("button",{key:1,class:"layer-item__button",onClick:_i(d,["stop"])},[_.data.show?(St(),tn(ct(Wn),{key:0,size:"14",type:"mdi",path:e.show},null,8,["path"])):(St(),tn(ct(Wn),{key:1,size:"14",type:"mdi",path:e.hide},null,8,["path"]))]))}});function tC(){const t=[];return{getMenus(){return t},addMenu(e){e.id&&t.some(n=>n.id===e.id)||t.push(e)},addMenus(e){for(const n of e)n.id&&t.some(a=>a.id===n.id)||t.push(n)},removeMenu(e){const n=t.findIndex(a=>a.id===e);n!==-1&&t.splice(n,1)},getMenu(e){return t.find(n=>n.id===e)},hasMenu(e){return t.some(n=>n.id===e)},updateMenu(e,n){const a=t.findIndex(s=>s.id===e);a!==-1&&(t[a]=n(t[a]))}}}function xA(){return{location:"extra",type:"item",name:"Fly to",icon:Lg,click:(t,e)=>{const n=vc(t,a=>a.type=="metadata");Yc(e,a=>{var s;NP(a,(s=n==null?void 0:n.metadata)==null?void 0:s.bbox)})}}}function e1(){return{type:"item",name:"Fly to",icon:Lg,click:(t,e,n)=>{Yc(e,a=>{NP(a,n.geometry);const{geometry:s,...d}=n;Db(e,{type:"Feature",geometry:s,properties:d},"identify",t)})}}}function n1(){return{type:"item",name:"Detail",id:"show-detail",icon:TT,click:(t,e,n)=>{const a=vc(t,s=>s.type=="dataManagement");a==null||a.showDetail(e,n)}}}function AA(){return{type:"item",name:"Info",icon:TT,click:(t,e)=>{const n=vc(t,a=>a.type=="source");n&&Y2(e,{component:()=>FP,attr:{item:n.getDataInfo(),fields:n.getFieldsInfo(),view:t},check:"detail"})}}}function EM(){return{type:"item",name:"Edit style",icon:pO,click:(t,e)=>{Y2(e,{component:()=>tZ,attr:{item:t}})}}}function wA(t){return{type:"item",location:"bottom",name:"ToggleShow",component:()=>aZ,...t}}function sZ(t){const e=new Set;return t.filter(({identifyId:n,rawId:a})=>{const s=`${n}_${a}`;return e.has(s)?!1:(e.add(s),!0)})}function TM(t,e){return t.map(({identify:n,identifyId:a,feature:s,rawId:d})=>{var l;return{identify:n,identifyId:a,feature:{id:d,name:((l=s.properties)==null?void 0:l[n.config.field_name||"name"])??"",data:e.get(d)||{...s.properties,geometry:s.geometry}}}})}function lZ(t){return new Map(t.map(e=>[String(e.id),e]))}async function cZ(t,e){return new Promise(n=>{const a=e.layerIdMap;Yc(e.mapId,s=>{const d=Object.keys(a),l=s.queryRenderedFeatures(e.pointOrBox,{layers:d}),o=[],g=new Set;l.forEach(S=>{var F;const k=S.layer.id,D=a[k],N=((F=S.properties)==null?void 0:F[D.config.field_id||"id"])??S.id;if(!N)return;const U=String(N);g.add(U),o.push({identify:D,identifyId:D.id,feature:S,rawId:U})});const _=sZ(o),I=t[0],C=vc(I,S=>S.type==="dataManagement");if(!Ew(C)){const S=TM(_,new Map);n(S);return}C.getList([...g]).then(S=>{const k=lZ(S),D=TM(_,k);n(D)})})})}const uZ=(t,e,n)=>{const a=new Map;return n.forEach(({identifyId:s,identify:d,feature:l})=>{var o;a.has(s)||a.set(s,{identify:d,features:[]}),(o=a.get(s))==null||o.features.push(l)}),Array.from(a.values())},hZ=(t,e,n)=>{const a={};return t.forEach(s=>{const d=Hp(s.getParent()||s,o=>Ih(o),[o=>o.getAllLayerIds()]);Array.from(d.values()).flat(2).forEach(o=>{a[o]=s})}),{identifies:t,mapId:e,pointOrBox:n,layerIdMap:a}};function jP(t,e){const n=Fg(t,e),a=tC();return Jc("IdentifyComponent",{get config(){return{}},...n,...a,get type(){return"identify"},getFeatures(s,d){throw new Error("Method not implemented.")}})}function VP(t,e){const n=jP(t,e);return Jc("IdentifyMapboxComponent",{...n,getFeatures:async(s,d)=>new Promise(l=>{const o=Hp(n.getParent()||n,_=>Ih(_),[_=>_.getAllLayerIds()]),g=Array.from(o.values()).flat(2);Yc(s,_=>{const I=_.queryRenderedFeatures(d,{layers:g}),C=new Set,E=vc(n,k=>k.type=="dataManagement");I.forEach(k=>{var N;const D=((N=k.properties)==null?void 0:N[n.config.field_id||"id"])??k.id;C.has(D)||C.add(D)});const S=[...C];if(!S||S.length<1){l([]);return}E.getList([...S]).then(k=>{l(k.map((D,N)=>({id:D.id??N,name:D[n.config.field_name||"name"]??"",data:D})))})})})})}function PM(t,e){const n=jP(t,e);return Jc("IdentifyMapboxMergedComponent",{...n,identifyGroupId:"mapbox-group",mergePayload:hZ,getMergedFeatures:cZ,splitResponse:uZ})}function UP(t,e,n){return t.getFeatures(e,n).then(a=>({identify:t,features:a}))}function dZ(t,e,n){const a=t[0];if(t.length===1)return UP(a,e,n).then(d=>[d]);const s=a.mergePayload(t,e,n);return a.getMergedFeatures(t,s).then(d=>a.splitResponse(t,s,d))}async function fZ(t,e,n){const a=[],s={};t.forEach(d=>{if(!u$(d)){a.push(UP(d,e,n));return}const l=d.identifyGroupId;s[l]||(s[l]=[]),s[l].push(d)});for(const d in s){const l=s[d];a.push(dZ(l,e,n))}return Promise.all(a).then(d=>d.flat())}async function pZ(t,e,n){const a=[],s={};return t.forEach(d=>{const l=Hp(d.getParent()||d,g=>Ih(g),[g=>g.getAllLayerIds()]),o=Array.from(l.values()).flat(2);o.forEach(g=>{s[g]=d}),a.push(...o)}),new Promise(d=>{Yc(e,l=>{var g,_,I,C;const o=l.queryRenderedFeatures(n,{layers:a});if(o.length>0){const E=o[0],S=s[E.layer.id],k=((_=E.properties)==null?void 0:_[((g=S==null?void 0:S.config)==null?void 0:g.field_id)||"id"])??E.id,D=((C=E.properties)==null?void 0:C[((I=S==null?void 0:S.config)==null?void 0:I.field_name)||"id"])??E.id;d({identify:S,features:[{id:k,name:D,data:Pw(E)}]})}})})}function mZ(t,e){const n=Fg(t,e),a=tC();return Jc("DatasetPartMapboxLayerComponent",{...n,...a,get type(){return"layer"},getBeforeId(){throw new Error("Method not implemented.")},getAllLayerIds(){throw new Error("Method not implemented.")},addToMap(s,d){throw new Error("Method not implemented.")},removeFromMap(s){throw new Error("Method not implemented.")},moveLayer(s,d){throw new Error("Method not implemented.")},toggleShow(s,d){throw new Error("Method not implemented.")},setOpacity(s,d){throw new Error("Method not implemented.")},updateValue(s,d){throw new Error("Method not implemented.")},getComponentUpdate(){throw new Error("Method not implemented.")}})}class Ym{constructor(){this.type="point"}setColor(e){return this.color=e,this}setStyleType(e){return this.type=e,this}setOpacity(e){return this.opacity=e,this}build(){return gZ(this.type,this.color,this.opacity)}}const gZ=(t,e,n)=>{switch(t){case"point":return{layout:{visibility:"visible"},type:"circle",paint:{"circle-color":e||t1(),"circle-radius":6,"circle-opacity":n||1}};case"line":return{layout:{visibility:"visible"},type:"line",paint:{"line-color":e||t1(),"line-width":4,"line-opacity":n||1}};case"area":return{layout:{visibility:"visible"},type:"fill",paint:{"fill-color":e||t1(),"fill-opacity":n||1}};case"symbol":return{layout:{visibility:"visible"},type:"symbol",paint:{}};default:throw new Error("Invalid type: "+t)}},yZ=t=>(_c("data-v-89a28113"),t=t(),bc(),t),vZ={class:"tab-item"},_Z={key:0,class:"tab-item-content"},bZ={key:2,class:"full-width"},xZ=yZ(()=>zt("hr",{class:"map-divider"},null,-1)),AZ=["disabled"],wZ=rr({__name:"tab-content",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,trans:{required:!0},mapId:{required:!0}},emits:["input"],setup(t,{emit:e}){const n=t,a=e,s=bn({get(){return n.value!=null?n.value:n.default_value!=null?Ty(n.default_value):void 0},set(o){a("input",o)}}),d=bn(()=>!n.item||!n.item.props||!n.item.props.content?{}:typeof n.item.props.content=="function"?n.item.props.content(n.item):n.item.props.content),l=()=>{s.value=n.default_value!=null?Ty(n.default_value):void 0};return(o,g)=>(St(),pe("div",vZ,[!t.item.component||!t.item.component.content?(St(),pe("div",_Z,[zt("p",null,Rn(t.value||t.default_value),1)])):(St(),tn(sa(t.item.component.content()),Tr({key:1},d.value,{modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=_=>s.value=_),mapId:t.mapId,class:"tab-item-content"}),null,16,["modelValue","mapId"])),t.default_value!=null?(St(),pe("div",bZ,[xZ,zt("button",{onClick:g[1]||(g[1]=_=>l()),disabled:s.value==null||s.value==t.default_value,class:"map-button text-center full-width"},Rn(t.trans("map.style-control.back-to-default")),9,AZ)])):Cn("",!0)]))}}),CZ=Vn(wZ,[["__scopeId","data-v-89a28113"]]),IZ=["disabled"],MZ=["title"],SZ=["title"],EZ={key:0},TZ=rr({__name:"tab-item",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,active:Boolean},setup(t){const e=t,n=bn(()=>!e.item||!e.item.props||!e.item.props.label?{}:typeof e.item.props.label=="function"?e.item.props.label(e.item):e.item.props.label),a=bn(()=>e.value!=null&&e.value!=""?e.value:e.default_value!=null&&e.default_value!=""?e.default_value:"None");return(s,d)=>(St(),pe("button",Tr({class:["tab-item",{"tab-item-active":t.active,"tab-item-disabled":t.disabled}],disabled:t.disabled},s.$attrs),[zt("div",{class:"tab-item-title",title:t.text},Rn(t.text),9,MZ),zt("div",{class:"tab-item-sub-title",title:a.value},[!t.item.component||!t.item.component.label?(St(),pe("p",EZ,Rn(a.value),1)):(St(),tn(sa(t.item.component.label()),Tr({key:1},n.value,{tab:t.item,value:t.value,default_value:t.default_value}),null,16,["tab","value","default_value"]))],8,SZ)],16,IZ))}}),PZ=Vn(TZ,[["__scopeId","data-v-650c1f3b"]]),HP={TAB:{type:"single",items:[{trans:"circle-style.setting.color",key:"circle-color",type:"color"},{trans:"circle-style.setting.width",key:"circle-radius",type:"unit",unit:"px"},{trans:"circle-style.setting.opacity",key:"circle-opacity",type:"opacity"},{trans:"circle-style.setting.blur",key:"circle-blur",type:"number"},{trans:"circle-style.setting.stroke-color",key:"circle-stroke-color",type:"color"},{trans:"circle-style.setting.stroke-width",key:"circle-stroke-width",type:"unit",unit:"px"},{trans:"circle-style.setting.stroke-opacity",key:"circle-stroke-opacity",type:"opacity"},{trans:"circle-style.setting.circle-pitch-alignment",key:"circle-pitch-alignment",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]},{trans:"circle-style.setting.circle-pitch-scale",key:"circle-pitch-scale",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]},{trans:"circle-style.setting.translate",key:"circle-translate",type:"array-x-y"}]},DEFAULT:{type:"circle",paint:{"circle-radius":5,"circle-color":"#000000","circle-blur":0,"circle-opacity":1,"circle-stroke-color":"#000000","circle-stroke-width":0,"circle-stroke-opacity":1,"circle-pitch-alignment":"viewport","circle-pitch-scale":"map","circle-translate":[0,0]}}},kZ=rr({__name:"InputArrayIndex",props:to({mapId:{type:String,required:!0},items:{type:Array,required:!0,default:()=>[]}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:to(["update:modelValue"],["update:modelValue"]),setup(t,{emit:e}){const n=la(t,"modelValue"),a=e;function s(d,l){n.value[l]=d,a("update:modelValue",n.value)}return(d,l)=>(St(),pe("div",Tr(d.$attrs,{class:"input-array-index"}),[(St(!0),pe(mr,null,ki(t.items,(o,g)=>(St(),pe("div",{class:"input-array-item",key:`array_${g}`},[zt("span",null,Rn(o.text)+": ",1),te(ct(Pi),{modelValue:n.value[g],type:o.type,onChange:_=>s(+_.target.value,g)},null,8,["modelValue","type","onChange"])]))),128))],16))}}),LZ=Vn(kZ,[["__scopeId","data-v-d979bf74"]]),GP=t=>(_c("data-v-4c3e7b15"),t=t(),bc(),t),RZ={class:"input-array-item"},DZ=GP(()=>zt("span",null," x: ",-1)),OZ={class:"input-array-item"},zZ=GP(()=>zt("span",null," y: ",-1)),FZ=rr({__name:"InputArrayXY",props:to({mapId:{type:String,required:!0}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:to(["update:modelValue"],["update:modelValue"]),setup(t,{emit:e}){const n=la(t,"modelValue"),a=e;function s(d,l){n.value[l]=d,a("update:modelValue",n.value)}return(d,l)=>(St(),pe("div",Tr(d.$attrs,{class:"input-array-x-y"}),[zt("div",RZ,[DZ,te(ct(Pi),{modelValue:n.value[0],type:"number",onChange:l[0]||(l[0]=o=>s(+o.target.value,0))},null,8,["modelValue"])]),zt("div",OZ,[zZ,te(ct(Pi),{modelValue:n.value[1],type:"number",onChange:l[1]||(l[1]=o=>s(+o.target.value,1))},null,8,["modelValue"])])],16))}}),BZ=Vn(FZ,[["__scopeId","data-v-4c3e7b15"]]),NZ={class:"fill-canvas"},jZ={class:"item-image"},VZ=["src","onClick"],UZ=rr({__name:"InputImage",props:to({mapId:{type:String,required:!0}},{modelValue:{default:void 0},modelModifiers:{}}),emits:to(["update:modelValue"],["update:modelValue"]),setup(t,{emit:e}){const n=la(t,"modelValue"),a=e,s=t,{images:d,toDataURL:l}=UU(s.mapId);function o(g){a("update:modelValue",g==n.value?void 0:g)}return(g,_)=>(St(),pe("div",Tr(g.$attrs,{class:"input-image"}),[zt("div",null,[te(ct(Pi),{modelValue:n.value,onChange:_[0]||(_[0]=I=>o(I.target.value))},null,8,["modelValue"])]),zt("div",NZ,[(St(!0),pe(mr,null,ki(ct(d),(I,C)=>(St(),pe("div",{key:C,class:Li(["item-icon",{"item-icon-active":C==n.value}])},[zt("div",jZ,[zt("img",{src:ct(l)(C,I),alt:"Map image",onClick:E=>o(C)},null,8,VZ)])],2))),128))])],16))}}),HZ=Vn(UZ,[["__scopeId","data-v-ffdf76eb"]]),GZ={class:"input-array-item__action"},$Z=rr({__name:"InputMultiple",props:to({mapId:{type:String,required:!0}},{modelValue:{default:()=>[0,0]},modelModifiers:{}}),emits:to(["update:modelValue"],["update:modelValue"]),setup(t,{emit:e}){const n=la(t,"modelValue"),a=e,s={delete:Ff};function d(g,_){n.value[_]=g,a("update:modelValue",n.value)}function l(g,_){g&&g.splice(_,1),n.value=g,a("update:modelValue",g)}function o(){n.value.push(0),a("update:modelValue",n.value)}return(g,_)=>(St(),pe("div",Tr(g.$attrs,{class:"input-array-index"}),[(St(!0),pe(mr,null,ki(n.value,(I,C)=>(St(),pe("div",{class:"input-array-item",key:`array_${C}`},[te(ct(Pi),{modelValue:n.value[C],type:I.type,onChange:E=>d(+E.target.value,C)},null,8,["modelValue","type","onChange"]),zt("div",GZ,[n.value.length>2?(St(),tn(ct(Cl),{key:0,onClick:E=>l(n.value,C)},{default:Se(()=>[te(ct(Wn),{size:"16",type:"mdi",path:s.delete},null,8,["path"])]),_:2},1032,["onClick"])):Cn("",!0)])]))),128)),te(ct(Cl),{onClick:_[0]||(_[0]=I=>o())},{default:Se(()=>[ho(" Add")]),_:1})],16))}}),ZZ=Vn($Z,[["__scopeId","data-v-295c1e6a"]]),WZ={props:{value:{type:String},default_value:{type:String}},data:()=>({}),computed:{},methods:{}};function qZ(t,e,n,a,s,d){return St(),pe("div",{style:fi(`
      border: 1px solid #ccc;
      width:20px ; height: 20px ; background-color: ${n.value||n.default_value||"transparent"} ;
              border-radius: 5px `),class:Li({"fill-canvas":!n.value&&!n.default_value})},null,6)}const KZ=Vn(WZ,[["render",qZ]]),YZ={props:{value:{},default_value:{},tab:{default:()=>({})}},data:()=>({}),computed:{},methods:{}};function XZ(t,e,n,a,s,d){return St(),pe("div",null,Rn(n.value||n.default_value||"0")+" "+Rn(n.tab.unit||""),1)}const QZ=Vn(YZ,[["render",XZ]]),JZ={props:{value:{},default_value:{},format:{default:()=>()=>""}},data:()=>({}),computed:{c_value(){return this.value!=null?this.value:this.default_value}},methods:{}};function tW(t,e,n,a,s,d){return St(),pe("div",null,Rn(n.format(d.c_value||"0")),1)}const CA=Vn(JZ,[["render",tW]]),kM={"array-index":{component:{content:()=>LZ},props:{content:t=>({items:t.data})}},multiple:{component:{content:()=>ZZ},props:{}},select:{component:{content:()=>Tf},props:{content:t=>({items:t.items})}},image:{component:{content:()=>HZ},props:{content:{}}},color:{component:{content:()=>iF,label:()=>KZ},props:{content:{disableAlpha:!0,class:"tab-content-no-padding"}}},boolean:{component:{content:()=>V8},props:{content:{}}},chose:{component:{content:()=>W8,label:()=>CA},props:{content:t=>({items:t.menu,class:"tab-content-padding"}),label:t=>({format(e){var n;return(n=t.menu.find(a=>a.value==e))==null?void 0:n.text}})}},opacity:{component:{content:()=>x1,label:()=>CA},props:{content:{min:0,max:1,step:.01},label:{format:t=>`${(+t*100).toFixed(0)} %`}},format:t=>+t},minMax:{component:{content:()=>x1,label:()=>CA},props:{content:{min:0,max:1,step:.01},label:{format:t=>`${(+t).toFixed(2)}`}},format:t=>+t},unit:{component:{content:()=>Pi,label:()=>QZ},props:{content:{type:"number",min:0}},format:t=>+t},number:{component:{content:()=>Pi},props:{content:{type:"number",min:0}},format:t=>+t},text:{component:{content:()=>Pi},props:{content:{}}},"array-x-y":{component:{content:()=>BZ},props:{}},default:{component:{content:()=>Pi},props:{content:{}}}},$P={TAB:{type:"single",items:[{trans:"fill-style.setting.color",key:"fill-color",type:"color",disabled:t=>{var e;return!!((e=t.paint)!=null&&e["fill-pattern"])}},{trans:"fill-style.setting.fill-pattern",key:"fill-pattern",type:"image",format:t=>{if(t)return t}},{trans:"fill-style.setting.opacity",key:"fill-opacity",type:"opacity"},{trans:"fill-style.setting.fill-antialias",key:"fill-antialias",type:"boolean"},{trans:"fill-style.setting.fill-outline-color",key:"fill-outline-color",type:"color",disabled:t=>{var e,n;return!!((e=t.paint)!=null&&e["fill-pattern"])||((n=t.paint)==null?void 0:n["fill-antialias"])===!1}},{trans:"fill-style.setting.translate",key:"fill-translate",type:"array-x-y"}]},DEFAULT:{type:"fill",paint:{"fill-antialias":!0,"fill-color":"#000000","fill-opacity":1,"fill-translate":[0,0]}}},ZP={TAB:{type:"single",items:[{trans:"line-style.setting.color",key:"line-color",type:"color",disabled:t=>{var e;return!!((e=t.paint)!=null&&e["line-pattern"])}},{trans:"line-style.setting.pattern",key:"line-pattern",type:"image",format:t=>{if(t)return t}},{trans:"line-style.setting.opacity",key:"line-opacity",type:"opacity"},{trans:"line-style.setting.width",key:"line-width",type:"unit",unit:"px"},{trans:"line-style.setting.cap",key:"line-cap",type:"chose",menu:[{text:"butt",value:"butt"},{text:"round",value:"round"},{text:"square",value:"square"}],part:"layout"},{trans:"line-style.setting.join",key:"line-join",type:"chose",menu:[{text:"bevel",value:"bevel"},{text:"round",value:"round"},{text:"miter",value:"miter"}],part:"layout"},{trans:"line-style.setting.round-limit",key:"line-round-limit",type:"unit",part:"layout",unit:"px",disabled:t=>{var e;return((e=t.layout)==null?void 0:e["line-join"])!="round"}},{trans:"line-style.setting.miter-limit",key:"line-miter-limit",type:"unit",part:"layout",unit:"px"},{type:"divider"},{trans:"line-style.setting.dash-array",key:"line-dasharray",type:"multiple",disabled:t=>{var e;return!!((e=t.paint)!=null&&e["line-pattern"])}},{trans:"line-style.setting.grap-width",key:"line-gap-width",type:"unit",unit:"px"},{trans:"line-style.setting.blur",key:"line-blur",type:"unit",unit:"px"},{trans:"line-style.setting.offset",key:"line-offset",type:"unit",unit:"px"},{trans:"line-style.setting.translate",key:"line-translate",type:"array-x-y"}]},DEFAULT:{type:"line",paint:{"line-color":"#000000","line-opacity":1,"line-width":0,"line-gap-width":0,"line-blur":0,"line-offset":0,"line-translate":[0,0]},layout:{"line-cap":"butt","line-join":"bevel","line-round-limit":0,"line-miter-limit":0}}},WP={TAB:{type:"single",items:[{trans:"raster-style.setting.raster-opacity",key:"raster-opacity",type:"opacity"},{trans:"raster-style.setting.raster-brightness-max",key:"raster-brightness-max",type:"minMax"},{trans:"raster-style.setting.raster-brightness-min",key:"raster-brightness-min",type:"minMax"},{trans:"raster-style.setting.raster-contrast",key:"raster-contrast",type:"minMax",props:{content:{class:"tab-content-padding",min:-1,max:1,step:.01}}},{trans:"raster-style.setting.raster-fade-duration",key:"raster-fade-duration",type:"unit",unit:"milliseconds"},{trans:"raster-style.setting.raster-hue-rotate",key:"raster-hue-rotate",type:"unit",unit:"degrees"},{trans:"raster-style.setting.raster-resampling",key:"raster-resampling",type:"chose",menu:[{text:"linear",value:"linear"},{text:"nearest",value:"nearest"}]},{trans:"raster-style.setting.raster-saturation",key:"raster-saturation",type:"minMax",props:{content:{min:-1,max:1}}}]},DEFAULT:{type:"raster",paint:{"raster-brightness-max":1,"raster-brightness-min":0,"raster-contrast":0,"raster-fade-duration":300,"raster-opacity":1,"raster-hue-rotate":0,"raster-resampling":"linear","raster-saturation":0}}},eW=[{trans:"symbol-style.setting.text-field",key:"text-field",part:"layout",type:"text"},{trans:"symbol-style.setting.text-color",key:"text-color",type:"color"},{trans:"symbol-style.setting.opacity",key:"text-opacity",type:"opacity"},{trans:"symbol-style.setting.size",key:"text-size",part:"layout",type:"unit",unit:"px"},{trans:"symbol-style.setting.letter-spacing",key:"text-letter-spacing",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.line-height",key:"text-line-height",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.max-width",key:"text-max-width",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.transform",key:"text-transform",part:"layout",type:"chose",menu:[{text:"none",value:"none"},{text:"uppercase",value:"uppercase"},{text:"lowercase",value:"lowercase"}]},{type:"divider"},{trans:"symbol-style.setting.halo-color",key:"text-halo-color",type:"color"},{trans:"symbol-style.setting.halo-blur",key:"text-halo-blur",type:"unit"},{trans:"symbol-style.setting.halo-width",key:"text-halo-width",type:"unit"}],nW=[{trans:"symbol-style.setting.icon-image",key:"icon-image",part:"layout",type:"image"},{trans:"symbol-style.setting.icon-opacity",key:"icon-opacity",type:"opacity"},{trans:"symbol-style.setting.icon-size",key:"icon-size",part:"layout",type:"unit"},{trans:"symbol-style.setting.icon-text-fit",key:"icon-text-fit",part:"layout",type:"chose",menu:[{text:"none",value:"none"},{text:"width",value:"width"},{text:"height",value:"height"},{text:"both",value:"both"}]},{trans:"symbol-style.setting.icon-text-fit-padding",key:"icon-text-fit-padding",part:"layout",type:"array-index",data:[{text:"top",type:"number",value:0},{text:"right",type:"number",value:0},{text:"bottom",type:"number",value:0},{text:"left",type:"number",value:0}]}],rW=[{trans:"symbol-style.setting.symbol-placement",key:"symbol-placement",type:"chose",menu:[{text:"point",value:"point"},{text:"line",value:"line"},{text:"line-center",value:"line-center"}],part:"layout"},{trans:"symbol-style.setting.symbol-spacing",key:"symbol-spacing",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.text-max-angle",key:"text-max-angle",type:"unit",unit:"deg",part:"layout"},{trans:"symbol-style.setting.avoid-edges",key:"symbol-avoid-edges",type:"boolean",part:"layout"},{trans:"symbol-style.setting.sort-key",key:"symbol-sort-key",type:"text",part:"layout"},{trans:"symbol-style.setting.text-orientation",key:"icon-pitch-alignment",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"},{text:"auto",value:"auto"}],text:"Text orientation",part:"layout"},{trans:"symbol-style.setting.text-padding",key:"text-padding",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.allow-text-overlap",key:"text-allow-overlap",type:"boolean",part:"layout"},{trans:"symbol-style.setting.text-ignore-placement",key:"text-ignore-placement",type:"boolean",part:"layout"},{trans:"symbol-style.setting.text-optional",key:"text-optional",type:"boolean",part:"layout"},{trans:"symbol-style.setting.icon-padding",key:"icon-padding",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.allow-icon-overlap",key:"icon-allow-overlap",type:"boolean",part:"layout"},{trans:"symbol-style.setting.icon-ignore-placement",key:"icon-ignore-placement",type:"boolean",part:"layout"},{trans:"symbol-style.setting.icon-optional",key:"icon-optional",type:"boolean",part:"layout"}],iW=[{trans:"symbol-style.setting.text-justify",key:"text-justify",type:"chose",menu:[{text:"auto",value:"auto"},{text:"left",subtitle:"symbol-style.translate.left",value:"left"},{text:"center",value:"center"},{text:"right",value:"right"}],text:"Text justify",part:"layout"},{trans:"symbol-style.setting.text-anchor",key:"text-anchor",type:"select",items:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],part:"layout"},{trans:"symbol-style.setting.text-offset",key:"text-offset",type:"array-x-y",unit:"em",part:"layout"},{trans:"symbol-style.setting.text-radial-offset",key:"text-radial-offset",type:"unit",unit:"em",part:"layout"},{trans:"symbol-style.setting.text-translate",key:"text-translate",type:"array-x-y",unit:"em"},{trans:"symbol-style.setting.text-rotate",key:"text-rotate",type:"unit",unit:"deg",part:"layout"},{trans:"symbol-style.setting.text-pitch-alignment",key:"text-pitch-alignment",type:"chose",menu:[{text:"auto",value:"auto"},{text:"map",value:"map"},{text:"viewport",value:"viewport"}],text:"Text justify",part:"layout"},{trans:"symbol-style.setting.icon-offset",key:"icon-offset",type:"array-x-y",unit:"em",part:"layout"},{trans:"symbol-style.setting.icon-translate",key:"icon-translate",type:"array-x-y",unit:"em"},{trans:"symbol-style.setting.icon-rotate",key:"icon-rotate",type:"unit",unit:"deg",part:"layout"}],qP={TAB:{type:"multi",tabs:[{trans:"symbol-style.tab.text",items:eW},{trans:"symbol-style.tab.icon",items:nW},{trans:"symbol-style.tab.position",items:rW},{trans:"symbol-style.tab.placement",items:iW}]},DEFAULT:{type:"symbol",paint:{"icon-color":void 0,"icon-halo-blur":0,"icon-halo-color":"rgba(0, 0, 0, 0)","icon-halo-width":0,"icon-opacity":1,"icon-translate":[0,0],"icon-translate-anchor":"map","text-color":"#000000","text-halo-blur":0,"text-halo-color":"rgba(0, 0, 0, 0)","text-halo-width":0,"text-opacity":1,"text-translate":[0,0],"text-translate-anchor":"map"},layout:{"symbol-placement":"point","symbol-spacing":250,"symbol-avoid-edges":!1,"symbol-sort-key":void 0,"icon-allow-overlap":!1,"icon-anchor":"center","icon-image":void 0,"icon-offset":[0,0],"icon-optional":!1,"icon-padding":2,"icon-pitch-alignment":"auto","icon-rotate":0,"icon-rotation-alignment":"auto","icon-size":1,"icon-text-fit":"none","icon-text-fit-padding":[0,0,0,0],"icon-keep-upright":!1,"text-allow-overlap":!1,"text-anchor":"center","text-field":"","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-justify":"center","text-letter-spacing":0,"text-line-height":1.2,"text-max-angle":45,"text-max-width":10,"text-offset":[0,0],"text-optional":!1,"text-padding":2,"text-pitch-alignment":"auto","text-rotate":0,"text-rotation-alignment":"auto","text-size":16,"text-transform":"none","text-variable-anchor":void 0,"text-writing-mode":void 0,"text-keep-upright":!0,visibility:"visible"}}},oW={circle:HP.TAB,line:ZP.TAB,fill:$P.TAB,raster:WP.TAB,symbol:qP.TAB},aW={circle:HP.DEFAULT,line:ZP.DEFAULT,fill:$P.DEFAULT,raster:WP.DEFAULT,symbol:qP.DEFAULT};function LM(t,e=kM){return t.map(n=>{if(n.type==="divider")return n;const a=Object.assign({},e.default,e[n.type]||{},n);return e[n.type]||console.log("type","missing",n.type),a.props=Qy.merge({},a.props,(kM[n.type]||{}).props,n.props),a})}const sW={class:"style-edit-container"},lW={class:"label-config-container"},cW={class:"label-config-item"},uW={class:"label-config-item__label"},hW={class:"label-config-item__input"},dW={class:"label-config-item"},fW={class:"label-config-item__label"},pW={class:"label-config-item__input"},mW={class:"label-config-item"},gW={class:"label-config-item__label"},yW={class:"label-config-item__input"},vW={class:"label-config-item"},_W={class:"label-config-item__label"},bW={class:"label-config-item__input"},xW={key:0,class:"tab-group-label"},AW=["onClick"],wW={class:"tab-group-container"},CW={class:"label-container"},IW={key:0},MW=["onClick"],SW={key:0,class:"tab-divider"},EW={class:"value-container"},TW={key:0,class:"value-container__label"},PW=rr({__name:"single-style",props:to({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:to(["input","update-style"],["update:modelValue"]),setup(t,{emit:e}){const n=t,a=e,s=la(t,"modelValue"),d=bn(()=>{const k=oW[s.value.type];return k.type==="multi"?k.tabs.map(D=>({...D,items:LM(D.items)})):[{type:"single",text:"style",items:LM(k.items)}]}),l=bn(()=>aW[s.value.type]),o=gn(void 0),g=gn(void 0),_=k=>{g.value=k,g.value&&g.value.menu&&(g.value.menu=g.value.menu.map(D=>({...D,text:D.text||n.trans(D.text_trans||"")||"",subtitle:D.subtitle||n.trans(D.subtitle_trans||"")||""})))},I=k=>{o.value=k,o.value&&o.value.items&&_(o.value.items[0])},C=(k,D,N)=>{D.type!=="divider"&&(D.format&&(k=D.format(k)),"key"in D&&(D.format&&(k=D.format(k)),N[D.part||"paint"][D.key]=k),a("update-style",N))};mo(()=>{d.value&&I(d.value[0])});const E=(k,D)=>{D["min-zoom"]=k,a("update-style",D)},S=(k,D)=>{D["max-zoom"]=k,a("update-style",D)};return(k,D)=>(St(),pe("div",sW,[te(ct(gw),null,{header:Se(()=>[ho(Rn(t.trans("map.style-control.layer.title")),1)]),default:Se(()=>[zt("div",lW,[zt("div",cW,[zt("div",uW,Rn(t.trans("map.style-control.layer.id")),1),zt("div",hW,Rn(s.value.id),1)]),zt("div",dW,[zt("div",fW,Rn(t.trans("map.style-control.layer.type")),1),zt("div",pW,Rn(s.value.type),1)]),zt("div",mW,[zt("div",gW,Rn(t.trans("map.style-control.layer.min-zoom")),1),zt("div",yW,[te(ct(x1),{modelValue:s.value["min-zoom"]!=null?s.value["min-zoom"]:0,"onUpdate:modelValue":D[0]||(D[0]=N=>E(N,s.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])]),zt("div",vW,[zt("div",_W,Rn(t.trans("map.style-control.layer.max-zoom")),1),zt("div",bW,[te(ct(x1),{modelValue:s.value["max-zoom"]!=null?s.value["max-zoom"]:24,"onUpdate:modelValue":D[1]||(D[1]=N=>S(N,s.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])])])]),_:1}),te(ct(gw),null,{header:Se(()=>[ho(Rn(t.trans("map.style-control.style.title")),1)]),default:Se(()=>[d.value&&d.value.length>1?(St(),pe("div",xW,[(St(!0),pe(mr,null,ki(d.value,N=>(St(),pe("div",{key:N.key,class:Li(["tab clickable",{"tab-active":o.value&&o.value.trans==N.trans}]),onClick:_i(U=>I(N),["stop"])},Rn(N.text||t.trans(N.trans)),11,AW))),128))])):Cn("",!0),zt("div",wW,[zt("div",CW,[o.value?(St(),pe("div",IW,[(St(!0),pe(mr,null,ki(o.value.items,N=>(St(),pe("div",{key:N.key,class:"clickable",onClick:_i(U=>_(N),["stop"])},[N.type==="divider"?(St(),pe("div",SW)):(St(),tn(PZ,{key:1,value:s.value[N.part||"paint"][N.key],item:N,text:N.text||t.trans(N.trans),default_value:l.value[N.part||"paint"][N.key],active:g.value&&g.value.key===N.key,disabled:N.disabled&&N.disabled(s.value)},null,8,["value","item","text","default_value","active","disabled"]))],8,MW))),128))])):Cn("",!0)]),zt("div",EW,[zt("div",null,[g.value?(St(),pe("div",TW,Rn(g.value.text||t.trans(g.value.trans)),1)):Cn("",!0),g.value?(St(),tn(CZ,{key:1,item:g.value,value:s.value[g.value.part||"paint"][g.value.key],onInput:D[2]||(D[2]=N=>C(N,g.value,s.value)),default_value:l.value[g.value.part||"paint"][g.value.key],trans:t.trans,mapId:t.mapId},null,8,["item","value","default_value","trans","mapId"])):Cn("",!0)])])])]),_:1})]))}}),RM=Vn(PW,[["__scopeId","data-v-bdb9ac77"]]),kW={class:"multi-style-edit-container"},LW={class:"tab-container"},RW={class:"tab-item"},DW=["disabled"],OW={key:0,class:"style-container"},zW={class:"add-style-container"},FW={key:1,class:"style-container"},BW=rr({__name:"multi-style",props:to({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0,default:()=>[]},modelModifiers:{}}),emits:to(["input","update-style","close"],["update:modelValue"]),setup(t,{expose:e,emit:n}){e({SvgIcon:Wn,SingleStyle:RM,BaseButton:Cl,InputSelect:Tf});const a=n,s=la(t,"modelValue");Xo(s,()=>{!_.value&&s.value.length>0&&(_.value=s.value[s.value.length-1].id)});const d=N=>{_.value=void 0,El(()=>{_.value=N})},l=(N,U)=>{a("update-style",{type:"update-one-layer",layer:N,index:s.value.findIndex(F=>F.id===U)})},o=N=>{_.value=void 0,a("update-style",{type:"add-one-layer",layer:new Ym().setStyleType(N).setColor("#fff").build()}),D(!1)},g=N=>{var F;let U=s.value.findIndex(j=>j.id===N);s.value[U]&&(_.value=void 0,a("update-style",{type:"remove-one-layer",index:U,layer:s.value[U]}),s.value.splice(U,1),s.value.length===0?(_.value=void 0,D(!0)):_.value=(F=s.value[s.value.length-1])==null?void 0:F.id,s.value[0]&&d(s.value[0].id))},_=gn(s.value[0].id),I=bn(()=>s.value.map((N,U)=>({text:`#${U+1}`,value:N.id}))),C=bn(()=>s.value.find(N=>N.id===_.value)),E={delete:Ff,create:vd,close:bg},[S,k]=Pf(!1),D=N=>{k(N)};return(N,U)=>(St(),pe("div",kW,[zt("div",LW,[zt("div",RW,[te(ct(Tf),{modelValue:_.value,"onUpdate:modelValue":d,items:I.value},null,8,["modelValue","items"])]),zt("button",{class:"tab-item tab-add clickable",onClick:U[0]||(U[0]=F=>g(_.value)),disabled:!_.value},[te(ct(Wn),{size:"14",type:"mdi",path:E.delete,disabled:!_.value},null,8,["path","disabled"])],8,DW),zt("button",{class:"tab-item tab-add clickable",onClick:U[1]||(U[1]=F=>D(!ct(S)))},[te(ct(Wn),{size:"14",type:"mdi",path:ct(S)?E.close:E.create},null,8,["path"])])]),ct(S)?(St(),pe("div",OW,[zt("div",zW,[te(ct(Cl),{onClick:U[2]||(U[2]=F=>o("area"))},{default:Se(()=>[ho(Rn(t.trans("map.style-control.add.area")),1)]),_:1}),te(ct(Cl),{onClick:U[3]||(U[3]=F=>o("line"))},{default:Se(()=>[ho(Rn(t.trans("map.style-control.add.line")),1)]),_:1}),te(ct(Cl),{onClick:U[4]||(U[4]=F=>o("point"))},{default:Se(()=>[ho(Rn(t.trans("map.style-control.add.point")),1)]),_:1}),te(ct(Cl),{onClick:U[5]||(U[5]=F=>o("symbol"))},{default:Se(()=>[ho(Rn(t.trans("map.style-control.add.symbol")),1)]),_:1})])])):_.value?(St(),pe("div",FW,[(St(),tn(RM,{modelValue:C.value,trans:t.trans,mapId:t.mapId,key:_.value,onUpdateStyle:U[6]||(U[6]=F=>l(F,_.value))},null,8,["modelValue","trans","mapId"]))])):Cn("",!0)]))}});function Xm(t,e=[]){const n=mZ(t,e),a={};return n.getData().forEach(s=>{var l;const d=s.id||ju();s.id=d,a[d]=((l=s.paint)==null?void 0:l[IA(s)])??1}),Jc("MultiMapboxLayerComponent",{...n,setData(s){n.setData(s.map(d=>{var o;const l=d.id||ju();return d.id=l,a[l]=((o=d.paint)==null?void 0:o[IA(d)])??1,d}))},getBeforeId(){var s;return(s=n.getData()[0])==null?void 0:s.id},getAllLayerIds(){return n.getData().map(s=>s.id)},getComponentUpdate(){return()=>BW},addToMap(s,d){const l=SM(n,"source");n.getData().forEach(o=>{s.getLayer(o.id)||(!o.source&&l&&(o.source=l.getSourceId()),s.addLayer(o,d))})},removeFromMap(s){n.getData().forEach(d=>{s.getLayer(d.id)&&s.removeLayer(d.id)})},moveLayer(s,d){n.getData().forEach(l=>{s.getLayer(l.id)&&s.moveLayer(l.id,d)})},toggleShow(s,d){n.getData().forEach(l=>{s.getLayer(l.id)&&s.setLayoutProperty(l.id,"visibility",d?"visible":"none")})},setOpacity(s,d){n.getData().forEach(l=>{s.getLayer(l.id)&&s.setPaintProperty(l.id,IA(l),d*(a[l.id]??1))})},updateValue(s,d){const{type:l,index:o}=d;let{layer:g}=d;const _=SM(n,"source");switch(l){case"update-one-layer":NW(s,n.getData()[o],g),n.getData()[o]=Ty({...n.getData()[o],...g});break;case"add-one-layer":g={...g,id:`${n.id}-${n.getData().length}`,source:_.getSourceId()},s.addLayer(g),n.getData().push(g);break;case"remove-one-layer":s.getLayer(g.id)&&s.removeLayer(g.id),n.getData().splice(o,1);break}}})}function NW(t,e,n){var a,s;t.setLayerZoomRange(e.id,n["min-zoom"]??e["min-zoom"]??0,n["max-zoom"]??e["max-zoom"]??24);for(const d in n.paint)n.paint[d]!==((a=e.paint)==null?void 0:a[d])&&t.setPaintProperty(e.id,d,n.paint[d]);for(const d in n.layout)n.layout[d]!==((s=e.layout)==null?void 0:s[d])&&t.setLayoutProperty(e.id,d,n.layout[d])}function IA(t){return t.type==="symbol"?"icon-opacity":`${t.type}-opacity`}function Qm(t,e){const n=Fg(t,e),a=tC();return Jc("ListViewUIComponent",{...n,...a,get type(){return"list"},opacity:1,selected:!1,color:void 0,config:{disable_delete:!1,disabled_opacity:!1,component:void 0},index:0,group:void 0,show:!0,shows:[],legend:void 0})}function DM(t,e){const n=Fg(t,e);return Jc("MetadataComponent",{...n,type:"metadata",metadata:e})}function KP(t,e){const n=Fg(t,e);return Jc("DatasetPartMapboxSourceComponent",{...n,get type(){return"source"},getSourceId(){return this.getMapboxSource().id||n.id},addToMap(a){const s=this.getSourceId();s&&!a.getSource(s)&&a.addSource(s,this.getMapboxSource())},removeFromMap(a){const s=this.getSourceId();s&&a.getLayer(s+"-hightLight")&&a.removeLayer(s+"-hightLight"),s&&a.getSource(s)&&a.removeSource(s)},getMapboxSource(){throw new Error("Method not implemented.")},getFieldsInfo(){throw new Error("Method not implemented.")},getDataInfo(){throw new Error("Method not implemented.")}})}function Lw(t,e){const n=KP(t,e);return Jc("GeojsonSourceComponent",{...n,getMapboxSource:()=>({type:"geojson",data:n.getData()||{type:"FeatureCollection",features:[]}}),getFieldsInfo:()=>[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:"bbox"},{trans:"map.layer-control.field.geojson",value:"geojson",inline:!0}],getDataInfo:()=>{var s;const a=vc(n,d=>d.type==="metadata");return{name:n.getName(),bbox:(s=a==null?void 0:a.metadata)==null?void 0:s.bbox,geojson:JSON.stringify(n.getData(),void 0,2)}},updateData(a,s){const d=a.getSource(n.id);d&&d.setData(s),n.setData(s)},hightLight(a,s){var l,o;a.getLayer(n.id+"-hightLight")?a.setFilter(n.id+"-hightLight",["==",["get","id"],((o=s==null?void 0:s.properties)==null?void 0:o.id)||null]):a.addLayer({id:n.id+"-hightLight",source:n.id,type:"line",filter:["==",["get","id"],((l=s==null?void 0:s.properties)==null?void 0:l.id)||null],paint:{"line-color":"#004E98","line-width":4,"line-dasharray":[2,2]}}),a.moveLayer(n.id+"-hightLight")}})}function YP(t,e){const n=KP(t,e);return Jc("RasterSourceComponent",{...n,getMapboxSource:()=>n.getData(),getFieldsInfo:()=>[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:"bbox"},{trans:"map.layer-control.field.tiles",value:"tiles"}],getDataInfo:()=>{var d,l;const a=vc(n,o=>o.type==="metadata"),s=n.getData();return{name:n.getName(),bbox:((d=a==null?void 0:a.metadata)==null?void 0:d.bbox)||(s==null?void 0:s.bounds),tiles:(l=s==null?void 0:s.tiles)==null?void 0:l.join(`,
`)}}})}const jW=rr({__name:"ComponentManagementControl",props:{...So},setup(t){const e=xc(),n=t,{mapId:a}=Ai(n),s=Rb(a.value);function d(g){p$(a.value,g.id)}const l=bn(()=>{var g;return((g=f$(a.value))==null?void 0:g.value)||[]}),o=gn([]);return Xo(l,()=>{var g;o.value=(s==null?void 0:s.components)||[],(g=e==null?void 0:e.proxy)==null||g.$forceUpdate()},{deep:!0}),(g,_)=>(St(!0),pe(mr,null,ki(o.value,I=>(St(),tn(sa(I.component()),Tr({key:I.id,ref_for:!0},I.attr,{onClose:C=>d(I)}),null,16,["onClose"]))),128))}}),VW={},UW={class:"map-row"};function HW(t,e,n,a,s,d){return St(),pe("div",UW,[qn(t.$slots,"default")])}const XP=Vn(VW,[["render",HW]]),GW={class:"map-row"},$W={class:"map-col-12"},ZW={__name:"xyz-json",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=la(t,"modelValue"),{mapId:n}=Ai(),{trans:a}=jo(n.value);return(s,d)=>(St(),pe("div",GW,[qn(s.$slots,"default"),zt("div",$W,[te(ct(Pi),{modelValue:e.value.url,"onUpdate:modelValue":d[0]||(d[0]=l=>e.value.url=l),label:ct(a)("map.layer-control.field.url")},null,8,["modelValue","label"])])]))}},WW={class:"map-row"},qW={class:"map-col-12"},KW={class:"map-col-6"},YW={class:"map-col-6"},XW={class:"map-col-6"},QW={class:"map-col-6"},JW={class:"map-col-6"},tq={class:"map-col-6"},eq={__name:"xyz-url",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=la(t,"modelValue"),{mapId:n}=Ai(),{trans:a}=jo(n.value);return(s,d)=>(St(),pe("div",WW,[qn(s.$slots,"default"),zt("div",qW,[te(ct(Pi),{modelValue:e.value.url,"onUpdate:modelValue":d[0]||(d[0]=l=>e.value.url=l),label:ct(a)("map.layer-control.field.url")},null,8,["modelValue","label"])]),zt("div",KW,[te(ct(Pi),{modelValue:e.value.minzoom,"onUpdate:modelValue":d[1]||(d[1]=l=>e.value.minzoom=l),label:ct(a)("map.layer-control.field.minzoom")},null,8,["modelValue","label"])]),zt("div",YW,[te(ct(Pi),{modelValue:e.value.maxzoom,"onUpdate:modelValue":d[2]||(d[2]=l=>e.value.maxzoom=l),label:ct(a)("map.layer-control.field.maxzoom")},null,8,["modelValue","label"])]),e.value.bounds?(St(),pe(mr,{key:0},[zt("div",XW,[te(ct(Pi),{modelValue:e.value.bounds[0],"onUpdate:modelValue":d[3]||(d[3]=l=>e.value.bounds[0]=l),label:ct(a)("map.layer-control.field.bound.minx")},null,8,["modelValue","label"])]),zt("div",QW,[te(ct(Pi),{modelValue:e.value.bounds[1],"onUpdate:modelValue":d[4]||(d[4]=l=>e.value.bounds[1]=l),label:ct(a)("map.layer-control.field.bound.miny")},null,8,["modelValue","label"])]),zt("div",JW,[te(ct(Pi),{modelValue:e.value.bounds[2],"onUpdate:modelValue":d[5]||(d[5]=l=>e.value.bounds[2]=l),label:ct(a)("map.layer-control.field.bound.maxx")},null,8,["modelValue","label"])]),zt("div",tq,[te(ct(Pi),{modelValue:e.value.bounds[3],"onUpdate:modelValue":d[6]||(d[6]=l=>e.value.bounds[3]=l),label:ct(a)("map.layer-control.field.bound.maxy")},null,8,["modelValue","label"])])],64)):Cn("",!0)]))}},nq={class:"map-row"},rq={class:"map-col-12"},iq={class:"map-col-12"},oq={key:0,class:"map-col-12"},aq={__name:"geojson-upload",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const{read:e}=l6(),n=["point","line","area"],a=la(t,"modelValue"),s=gn(null),{mapId:d}=Ai(),{trans:l}=jo(d.value);function o(g){e(g).then(_=>{a.value.geojson=_,s.value=_?JSON.stringify(_,null,2):""})}return(g,_)=>(St(),pe("div",nq,[qn(g.$slots,"default"),zt("div",rq,[te(ct(Tf),{modelValue:a.value.type,"onUpdate:modelValue":_[0]||(_[0]=I=>a.value.type=I),items:n,label:ct(l)("map.layer-control.field.type")},null,8,["modelValue","label"])]),zt("div",iq,[te(ct(e6),{onChange:o,accept:".json,.geojson"})]),s.value?(St(),pe("div",oq,[te(ct(RT),{modelValue:s.value,rows:"4",readonly:""},null,8,["modelValue"])])):Cn("",!0)]))}};function sq(t){const e=Ru(t.name,null,!0),n=Qm(t.name);n.color=t.color||t1();const a=Ru(t.name,null,!0),s=Xm(t.name,[new Ym().setStyleType(t.type).setColor(n.color).setOpacity(n.opacity).build()]);a.add(s),a.add(n);const d=lq(t.geojson),l=kw(t.name,{fields:d.fields});l.setItems(d.items);const o=VP(t.name);o.addMenus([e1(),n1()]);const g=Lw(t.name,{type:"FeatureCollection",features:[]});return e.add(g),e.add(l),e.add(a),e.add(o),e}function lq(t){const e=[],n=new Set,a=d=>{const{properties:l={},geometry:o}=d;return Object.keys(l).forEach(g=>n.add(g)),{...l,geometry:o}};if(t.type==="FeatureCollection")for(const d of t.features)e.push(a(d));else t.type==="Feature"&&e.push(a(t));const s=Array.from(n).map(d=>({text:d,value:d}));return{items:e,fields:s}}function QP(t){const e=Ru(t.name,null,!0),n=YP(t.name,{type:"raster",tiles:t.tiles,maxzoom:t.maxZoom,minzoom:t.minZoom,bounds:t.bounds}),a=Xm(t.name,[{type:"raster"}]),s=Qm(t.name),d=Ru(t.name,null,!0);return e.add(n),d.add(s),d.add(a),e.add(d),e}class eC{get default_value(){return{}}validate(e){return!!e.name}}class cq extends eC{get component(){return()=>ZW}validate(e){return!(!e.name||!e.url)}get create(){return e=>QP({...e})}}class uq extends eC{get component(){return()=>eq}get default_value(){return{bounds:[-180,-85.051129,180,85.051129],minzoom:0,maxzoom:24}}validate(e){return!(!e.name||!e.url)}get create(){return e=>QP({...e,tiles:[e.url]})}}class hq extends eC{get component(){return()=>aq}get default_value(){return{type:"point",geojson:null}}validate(e){return!(!e.name||!e.geojson||!e.type)}get create(){return e=>sq({...e})}}const OM={"raster-url":"Raster url layer","raster-json":"Raster json layer",geojson:"Geojson layer"};class dq{constructor(e){this.setType(e)}setType(e){this.helper=fq.create(e)}get default_value(){return this.helper.default_value}get create(){return this.helper.create}get component(){return this.helper.component||XP}validate(e){return this.helper.validate(e)}}const fq={create(t){switch(t){case"raster-url":return new uq;case"raster-json":return new cq;case"geojson":return new hq;default:throw new Error("not support type: "+t)}}},pq={class:"create-control-container"},mq={class:"form-container"},gq={class:"map-col-12"},yq={class:"map-col-12"},vq={name:"create-layer-control"},_q=Object.assign(vq,{props:{show:Boolean},emits:["update:show"],setup(t,{emit:e}){const n=t,{mapId:a,moduleContainerProps:s,callMap:d}=Ai(n),{trans:l}=jo(a.value),o=e,g=bn({get(){return n.show},set(j){o("update:show",j)}}),_={type:"geojson"},I=gn(1),C=gn(()=>XP),E=new dq(_.type),S=gn({..._,config:{name:"",...E.default_value}}),k=Object.keys(OM).map(j=>({value:j,text:OM[j]}));function D(j){E.setType(j),C.value=E.component,S.value={config:{name:S.value.config.name,...E.default_value},type:S.value.type}}function N(j){const $=E.create;if(!$||!E.validate(j.config))return;let K=$(j.config);d(tt=>{Tw(tt.id,K)}),U(),g.value=!1}function U(){E.setType(_.type),S.value={..._,config:{name:"",...E.default_value}},I.value++}function F(){U()}return mo(()=>{D(S.value.type)}),(j,$)=>(St(),tn(ct(Qo),No(Mo(ct(s))),{draggable:Se(K=>[te(ct(bd),Tr({show:g.value,"onUpdate:show":$[4]||($[4]=tt=>g.value=tt)},K,{width:400,height:300,onClose:F,title:ct(l)("map.layer-control.create.title")}),{default:Se(()=>[zt("div",pq,[zt("div",mq,[(St(),tn(sa(C.value()),{modelValue:S.value.config,"onUpdate:modelValue":$[2]||($[2]=tt=>S.value.config=tt),class:"create-control-form",key:I.value},{default:Se(()=>[zt("div",gq,[te(ct(Pi),{modelValue:S.value.config.name,"onUpdate:modelValue":$[0]||($[0]=tt=>S.value.config.name=tt),label:ct(l)("map.layer-control.field.name")},null,8,["modelValue","label"])]),zt("div",yq,[te(ct(Tf),{modelValue:S.value.type,"onUpdate:modelValue":[$[1]||($[1]=tt=>S.value.type=tt),D],items:ct(k),label:ct(l)("map.layer-control.field.type")},null,8,["modelValue","items","label"])])]),_:1},8,["modelValue"]))]),te(ct(Cl),{onClick:$[3]||($[3]=tt=>N(S.value)),class:"btn-container"},{default:Se(()=>[ho(Rn(ct(l)("map.layer-control.create-btn")),1)]),_:1})])]),_:2},1040,["show","title"])]),_:1},16))}}),bq=Vn(_q,[["__scopeId","data-v-2f2c18bd"]]),xq={class:"menu-divider"},Aq=rr({__name:"menu-divider",props:{item:{},data:{}},setup(t){return(e,n)=>(St(),pe("div",xq))}}),wq=["title"],Cq=rr({__name:"menu-item",props:{item:{},data:{},mapId:{}},setup(t){return(e,n)=>(St(),pe("button",Tr(e.$attrs,{class:"menu-item",title:e.item.name}),[e.item.icon?(St(),tn(ct(Wn),{key:0,size:"14",type:"mdi",path:e.item.icon},null,8,["path"])):Cn("",!0)],16,wq))}}),Iq=rr({__name:"index",props:{item:{},data:{},mapId:{}},setup(t){const e=t,n=bn(()=>{switch(e.item.type){case"divider":return Aq}return Cq});return(a,s)=>(St(),tn(sa(n.value),Tr({item:a.item,data:a.data},a.$attrs,{mapId:a.mapId}),null,16,["item","data","mapId"]))}}),nC=t=>(_c("data-v-1e7e1a1a"),t=t(),bc(),t),Mq={class:"identify-control-container"},Sq={class:"identify-control-header"},Eq=["innerHTML"],Tq=nC(()=>zt("hr",{class:"identify-control-separator"},null,-1)),Pq={class:"identify-control-body"},kq={key:0,class:"identify-control-state"},Lq={class:"identify-control-state__content"},Rq=nC(()=>zt("div",{class:"identify-control-state__loading"},null,-1)),Dq={key:1,class:"identify-control-state"},Oq={class:"identify-control-state__content"},zq={key:2,class:"identify-control-state"},Fq={class:"identify-control-state__content"},Bq={class:"identify-control-list-item__container"},Nq=["title"],jq={class:"identify-control-list-item__child-container"},Vq=nC(()=>zt("div",{class:"identify-control-child-item__spacer"},null,-1)),Uq={class:"identify-control-child-item__action"},Hq=rr({__name:"IdentifyControl",props:{...So,immediately:Boolean},setup(t){const e={icon:yO,boxSelect:PO,mapClick:uO},n=t,{mapId:a,moduleContainerProps:s}=Ai(n),{trans:d,setLocale:l}=jo(a.value),{format:o}=dP(a.value);l({map:{identify:{title:"Identify",point:"Point",no_selection:"Please select a point on the map",no_data:"No data found",loading:"Loading..."}}});const g=gn([]),_=bn(()=>J2(a.value).value);Xo(_,()=>{C()},{deep:!0}),mo(()=>{C()});const I=bn(()=>g.value);function C(){E()}function E(){g.value=av(a.value,"identify")||[]}const S=bn(()=>g.value.length>0),{add:k,remove:D,isActive:N}=k1(a.value,new kb().setHandler(K)),{add:U,remove:F,isActive:j}=k1(a.value,new jU().setHandler(tt)),$=ls({latitude:0,longitude:0});function K(Ce){$.latitude=Ce.lngLat.lat,$.longitude=Ce.lngLat.lng,Ct(Ce.point)}function tt(Ce){Re(),Ce&&Ct(Ce)}const it=ls({items:[],loading:!1}),et=bn(()=>{if(!$)return"";const Ce=o($);return Ce.longitude+", &nbsp;"+Ce.latitude}),q=bn(()=>$.latitude!==0||$.longitude!==0);function ut(Ce){if(it.items=Ce,n.immediately&&Ce&&Ce[0]&&Ce[0].features&&Ce[0].features[0]){const nn=Ce[0].identify.getMenu("show-detail");nn&&$e(Ce[0].identify,nn,Ce[0].features[0].data)}}async function Ct(Ce){it.loading=!0;try{const nn=Date.now(),be=await fZ(I.value,a.value,Ce),Me=Date.now()-nn;Me<500&&await new Promise(xe=>setTimeout(xe,500-Me)),ut(be.filter(xe=>xe.features.length>0))}finally{it.loading=!1}}const ot=gn(!1);function bt(){ot.value=!ot.value,Bt()}function X(){Wt(),Db(a.value,void 0,"identify"),ut([])}function Wt(){n.immediately||(ye(),Re())}const Vt=gn(!1);function Bt(){Vt.value?ye():ae()}function ae(){Vt.value=!0,k()}function ye(){Vt.value=!1,D()}const en=gn(!1);function Jt(){en.value?Re():Gt()}function Gt(){en.value=!0,U()}function Re(){en.value=!1,F()}function $e(Ce,nn,be){nn.type!="item"||!Ce||"click"in nn&&nn.click(Ce,a.value,be)}return mo(()=>{n.immediately&&Bt()}),(Ce,nn)=>(St(),tn(ct(Qo),No(Mo(ct(s))),{btn:Se(()=>[S.value?(St(),tn(ct(di),{key:0,tooltip:ct(d)("map.identify.title"),onClick:nn[0]||(nn[0]=_i(be=>bt(),["stop"])),active:ot.value},{default:Se(()=>[te(ct(Wn),{size:"16",type:"mdi",path:e.icon},null,8,["path"])]),_:1},8,["tooltip","active"])):Cn("",!0)]),draggable:Se(be=>[ot.value?(St(),tn(ct(bd),Tr({key:0,show:ot.value,"onUpdate:show":nn[3]||(nn[3]=Me=>ot.value=Me)},be,{width:400,height:300,onClose:X,title:ct(d)("map.identify.title")}),{"extra-btn":Se(()=>[te(ct(Cl),{onClick:nn[1]||(nn[1]=_i(Me=>Bt(),["stop"])),active:ct(N),disabled:ct(N)},{default:Se(()=>[te(ct(Wn),{size:"16",type:"mdi",path:e.mapClick},null,8,["path"])]),_:1},8,["active","disabled"]),te(ct(Cl),{onClick:nn[2]||(nn[2]=_i(Me=>Jt(),["stop"])),active:ct(j),disabled:ct(j)},{default:Se(()=>[te(ct(Wn),{size:"16",type:"mdi",path:e.boxSelect},null,8,["path"])]),_:1},8,["active","disabled"])]),default:Se(()=>[zt("div",Mq,[zt("div",Sq,[zt("b",null,Rn(ct(d)("map.identify.point"))+":",1),zt("span",{innerHTML:et.value},null,8,Eq)]),Tq,zt("div",Pq,[it.loading?(St(),pe("div",kq,[zt("div",Lq,[Rq,zt("span",null,Rn(ct(d)("map.identify.loading")),1)])])):q.value?it.items.length===0?(St(),pe("div",zq,[zt("div",Fq,[zt("span",null,Rn(ct(d)("map.identify.no_data")),1)])])):(St(!0),pe(mr,{key:3},ki(it.items,Me=>(St(),pe("div",{key:Me.identify.id,class:"identify-control-list-item"},[zt("div",Bq,[zt("div",{class:"identify-control-list-item__header",title:Me.identify.getName()},Rn(Me.identify.getName()||"---"),9,Nq),zt("div",jq,[(St(!0),pe(mr,null,ki(Me.features,xe=>(St(),pe("div",{class:"identify-control-child-item",key:xe.id},[zt("span",null,Rn(xe.name),1),Vq,zt("div",Uq,[(St(!0),pe(mr,null,ki(Me.identify.getMenus(),(Be,Je)=>(St(),tn(Iq,{key:Je,class:"layer-item__button",item:Be,data:xe,mapId:ct(a),onClick:Ln=>$e(Me.identify,Be,xe.data)},null,8,["item","data","mapId","onClick"]))),128))])]))),128))])])]))),128)):(St(),pe("div",Dq,[zt("div",Oq,[zt("span",null,Rn(ct(d)("map.identify.no_selection")),1)])]))])])]),_:2},1040,["show","title"])):Cn("",!0)]),_:1},16))}}),Gq=Vn(Hq,[["__scopeId","data-v-1e7e1a1a"]]),$q=rr({__name:"IdentifyShowFirstControl",props:{...So},setup(t){const e=t,{mapId:n}=Ai(e),a=gn([]),s=bn(()=>J2(n.value).value);Xo(s,()=>{d()},{deep:!0}),mo(()=>{d()});function d(){l()}function l(){a.value=av(n.value,"identify")||[]}const{add:o,remove:g,isActive:_}=k1(n.value,new kb().setHandler(I));function I(N){k(N.point)}const C=ls({items:[],loading:!1});function E(N){if(N&&N.features&&N.features[0]){const U=N.identify.getMenu("show-detail");U&&D(N.identify,U,N.features[0].data)}}const S=bn(()=>a.value);async function k(N){C.loading=!0;try{const U=await pZ(S.value,n.value,N);E(U)}finally{C.loading=!1}}function D(N,U,F){U.type!="item"||!N||"click"in U&&U.click(N,n.value,F)}return mo(()=>{o()}),(N,U)=>(St(),pe("div"))}}),Zq=t=>(_c("data-v-4881fa35"),t=t(),bc(),t),Wq=Zq(()=>zt("button",{type:"button",class:"btn-close"},"Close",-1)),qq=[Wq],Kq=rr({__name:"context-menu",props:{zIndex:{type:[String,Number],default:"9"}},setup(t,{expose:e}){const a=sT({mobile:0,tablet:640,laptop:1024,desktop:1280}).smallerOrEqual("tablet"),s=t,d=gn(),l=gn(!1),o=gn(null),g=gn(null);GD(d,()=>I());function _(C){l.value=!0;const E=d.value;if(E)if((!o.value||!g.value)&&(E.style.visibility="hidden",E.style.display="block",o.value=E.offsetWidth,g.value=E.offsetHeight,E.removeAttribute("style")),E.style.position="fixed",E.style.zIndex=s.zIndex+"",!a.value)o.value+C.pageX>=window.innerWidth?E.style.left=C.pageX-o.value+10+"px":E.style.left=C.pageX-10+"px",g.value+C.pageY>=window.innerHeight?E.style.top=C.pageY-g.value+10+"px":E.style.top=C.pageY-10+"px";else{E.style.top="0px",E.style.left="0px",E.style.right="0px",E.style.bottom="0px",E.style.background="#00000085";const S=E.childNodes[0];S.style.width="100%",S.style.position="absolute",S.style.top="50%",S.style.left="50%",S.style.transform="translate(-50%, -50%)",S.style.padding="40px",S.style.height="100%",S.style.overflow="auto"}}function I(){o.value=null,g.value=null,l.value=!1;const C=d.value;C&&(C.style.display="none")}return e({open:_,close:I}),(C,E)=>(St(),pe("div",{class:"menu-container",ref_key:"target",ref:d},[zt("div",null,[qn(C.$slots,"default",{},void 0,!0)]),l.value&&ct(a)?(St(),pe("div",{key:0,onClick:E[0]||(E[0]=S=>I())},qq)):Cn("",!0)],512))}}),rC=Vn(Kq,[["__scopeId","data-v-4881fa35"]]);var JP={exports:{}};const Yq=Zy(cR);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function zM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Mh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zM(Object(n),!0).forEach(function(a){Xq(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zM(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function r1(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r1=function(e){return typeof e}:r1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r1(t)}function Xq(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qc(){return Qc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Qc.apply(this,arguments)}function Qq(t,e){if(t==null)return{};var n={},a=Object.keys(t),s,d;for(d=0;d<a.length;d++)s=a[d],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Jq(t,e){if(t==null)return{};var n=Qq(t,e),a,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(s=0;s<d.length;s++)a=d[s],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function tK(t){return eK(t)||nK(t)||rK(t)||iK()}function eK(t){if(Array.isArray(t))return Rw(t)}function nK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rK(t,e){if(t){if(typeof t=="string")return Rw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rw(t,e)}}function Rw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function iK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oK="1.14.0";function dd(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ad=dd(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),sv=dd(/Edge/i),FM=dd(/firefox/i),py=dd(/safari/i)&&!dd(/chrome/i)&&!dd(/android/i),t3=dd(/iP(ad|od|hone)/i),aK=dd(/chrome/i)&&dd(/android/i),e3={capture:!1,passive:!1};function ni(t,e,n){t.addEventListener(e,n,!Ad&&e3)}function Qr(t,e,n){t.removeEventListener(e,n,!Ad&&e3)}function O1(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function sK(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Du(t,e,n,a){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&O1(t,e):O1(t,e))||a&&t===n)return t;if(t===n)break}while(t=sK(t))}return null}var BM=/\s+/g;function wo(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var a=(" "+t.className+" ").replace(BM," ").replace(" "+e+" "," ");t.className=(a+(n?" "+e:"")).replace(BM," ")}}function hr(t,e,n){var a=t&&t.style;if(a){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=n+(typeof n=="string"?"":"px")}}function Fp(t,e){var n="";if(typeof t=="string")n=t;else do{var a=hr(t,"transform");a&&a!=="none"&&(n=a+" "+n)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(n)}function n3(t,e,n){if(t){var a=t.getElementsByTagName(e),s=0,d=a.length;if(n)for(;s<d;s++)n(a[s],s);return a}return[]}function xh(){var t=document.scrollingElement;return t||document.documentElement}function uo(t,e,n,a,s){if(!(!t.getBoundingClientRect&&t!==window)){var d,l,o,g,_,I,C;if(t!==window&&t.parentNode&&t!==xh()?(d=t.getBoundingClientRect(),l=d.top,o=d.left,g=d.bottom,_=d.right,I=d.height,C=d.width):(l=0,o=0,g=window.innerHeight,_=window.innerWidth,I=window.innerHeight,C=window.innerWidth),(e||n)&&t!==window&&(s=s||t.parentNode,!Ad))do if(s&&s.getBoundingClientRect&&(hr(s,"transform")!=="none"||n&&hr(s,"position")!=="static")){var E=s.getBoundingClientRect();l-=E.top+parseInt(hr(s,"border-top-width")),o-=E.left+parseInt(hr(s,"border-left-width")),g=l+d.height,_=o+d.width;break}while(s=s.parentNode);if(a&&t!==window){var S=Fp(s||t),k=S&&S.a,D=S&&S.d;S&&(l/=D,o/=k,C/=k,I/=D,g=l+I,_=o+C)}return{top:l,left:o,bottom:g,right:_,width:C,height:I}}}function NM(t,e,n){for(var a=_f(t,!0),s=uo(t)[e];a;){var d=uo(a)[n],l=void 0;if(l=s>=d,!l)return a;if(a===xh())break;a=_f(a,!1)}return!1}function Cg(t,e,n,a){for(var s=0,d=0,l=t.children;d<l.length;){if(l[d].style.display!=="none"&&l[d]!==Ir.ghost&&(a||l[d]!==Ir.dragged)&&Du(l[d],n.draggable,t,!1)){if(s===e)return l[d];s++}d++}return null}function iC(t,e){for(var n=t.lastElementChild;n&&(n===Ir.ghost||hr(n,"display")==="none"||e&&!O1(n,e));)n=n.previousElementSibling;return n||null}function Fo(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Ir.clone&&(!e||O1(t,e))&&n++;return n}function jM(t){var e=0,n=0,a=xh();if(t)do{var s=Fp(t),d=s.a,l=s.d;e+=t.scrollLeft*d,n+=t.scrollTop*l}while(t!==a&&(t=t.parentNode));return[e,n]}function lK(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t[n][a])return Number(n)}return-1}function _f(t,e){if(!t||!t.getBoundingClientRect)return xh();var n=t,a=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var s=hr(n);if(n.clientWidth<n.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return xh();if(a||e)return n;a=!0}}while(n=n.parentNode);return xh()}function cK(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function MA(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var my;function r3(t,e){return function(){if(!my){var n=arguments,a=this;n.length===1?t.call(a,n[0]):t.apply(a,n),my=setTimeout(function(){my=void 0},e)}}}function uK(){clearTimeout(my),my=void 0}function i3(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function oC(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function VM(t,e){hr(t,"position","absolute"),hr(t,"top",e.top),hr(t,"left",e.left),hr(t,"width",e.width),hr(t,"height",e.height)}function SA(t){hr(t,"position",""),hr(t,"top",""),hr(t,"left",""),hr(t,"width",""),hr(t,"height","")}var Cs="Sortable"+new Date().getTime();function hK(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(s){if(!(hr(s,"display")==="none"||s===Ir.ghost)){t.push({target:s,rect:uo(s)});var d=Mh({},t[t.length-1].rect);if(s.thisAnimationDuration){var l=Fp(s,!0);l&&(d.top-=l.f,d.left-=l.e)}s.fromRect=d}})}},addAnimationState:function(a){t.push(a)},removeAnimationState:function(a){t.splice(lK(t,{target:a}),1)},animateAll:function(a){var s=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var d=!1,l=0;t.forEach(function(o){var g=0,_=o.target,I=_.fromRect,C=uo(_),E=_.prevFromRect,S=_.prevToRect,k=o.rect,D=Fp(_,!0);D&&(C.top-=D.f,C.left-=D.e),_.toRect=C,_.thisAnimationDuration&&MA(E,C)&&!MA(I,C)&&(k.top-C.top)/(k.left-C.left)===(I.top-C.top)/(I.left-C.left)&&(g=fK(k,E,S,s.options)),MA(C,I)||(_.prevFromRect=I,_.prevToRect=C,g||(g=s.options.animation),s.animate(_,k,C,g)),g&&(d=!0,l=Math.max(l,g),clearTimeout(_.animationResetTimer),_.animationResetTimer=setTimeout(function(){_.animationTime=0,_.prevFromRect=null,_.fromRect=null,_.prevToRect=null,_.thisAnimationDuration=null},g),_.thisAnimationDuration=g)}),clearTimeout(e),d?e=setTimeout(function(){typeof a=="function"&&a()},l):typeof a=="function"&&a(),t=[]},animate:function(a,s,d,l){if(l){hr(a,"transition",""),hr(a,"transform","");var o=Fp(this.el),g=o&&o.a,_=o&&o.d,I=(s.left-d.left)/(g||1),C=(s.top-d.top)/(_||1);a.animatingX=!!I,a.animatingY=!!C,hr(a,"transform","translate3d("+I+"px,"+C+"px,0)"),this.forRepaintDummy=dK(a),hr(a,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),hr(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){hr(a,"transition",""),hr(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},l)}}}}function dK(t){return t.offsetWidth}function fK(t,e,n,a){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*a.animation}var Nm=[],EA={initializeByDefault:!0},lv={mount:function(e){for(var n in EA)EA.hasOwnProperty(n)&&!(n in e)&&(e[n]=EA[n]);Nm.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Nm.push(e)},pluginEvent:function(e,n,a){var s=this;this.eventCanceled=!1,a.cancel=function(){s.eventCanceled=!0};var d=e+"Global";Nm.forEach(function(l){n[l.pluginName]&&(n[l.pluginName][d]&&n[l.pluginName][d](Mh({sortable:n},a)),n.options[l.pluginName]&&n[l.pluginName][e]&&n[l.pluginName][e](Mh({sortable:n},a)))})},initializePlugins:function(e,n,a,s){Nm.forEach(function(o){var g=o.pluginName;if(!(!e.options[g]&&!o.initializeByDefault)){var _=new o(e,n,e.options);_.sortable=e,_.options=e.options,e[g]=_,Qc(a,_.defaults)}});for(var d in e.options)if(e.options.hasOwnProperty(d)){var l=this.modifyOption(e,d,e.options[d]);typeof l<"u"&&(e.options[d]=l)}},getEventProperties:function(e,n){var a={};return Nm.forEach(function(s){typeof s.eventProperties=="function"&&Qc(a,s.eventProperties.call(n[s.pluginName],e))}),a},modifyOption:function(e,n,a){var s;return Nm.forEach(function(d){e[d.pluginName]&&d.optionListeners&&typeof d.optionListeners[n]=="function"&&(s=d.optionListeners[n].call(e[d.pluginName],a))}),s}};function X0(t){var e=t.sortable,n=t.rootEl,a=t.name,s=t.targetEl,d=t.cloneEl,l=t.toEl,o=t.fromEl,g=t.oldIndex,_=t.newIndex,I=t.oldDraggableIndex,C=t.newDraggableIndex,E=t.originalEvent,S=t.putSortable,k=t.extraEventProperties;if(e=e||n&&n[Cs],!!e){var D,N=e.options,U="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Ad&&!sv?D=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(D=document.createEvent("Event"),D.initEvent(a,!0,!0)),D.to=l||n,D.from=o||n,D.item=s||n,D.clone=d,D.oldIndex=g,D.newIndex=_,D.oldDraggableIndex=I,D.newDraggableIndex=C,D.originalEvent=E,D.pullMode=S?S.lastPutMode:void 0;var F=Mh(Mh({},k),lv.getEventProperties(a,e));for(var j in F)D[j]=F[j];n&&n.dispatchEvent(D),N[U]&&N[U].call(e,D)}}var pK=["evt"],_l=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.evt,d=Jq(a,pK);lv.pluginEvent.bind(Ir)(e,n,Mh({dragEl:Bn,parentEl:Oo,ghostEl:$r,rootEl:co,nextEl:Ep,lastDownEl:i1,cloneEl:zo,cloneHidden:yf,dragStarted:Q0,putSortable:is,activeSortable:Ir.active,originalEvent:s,oldIndex:Jm,oldDraggableIndex:gy,newIndex:hc,newDraggableIndex:mf,hideGhostForTarget:l3,unhideGhostForTarget:c3,cloneNowHidden:function(){yf=!0},cloneNowShown:function(){yf=!1},dispatchSortableEvent:function(o){Xs({sortable:n,name:o,originalEvent:s})}},d))};function Xs(t){X0(Mh({putSortable:is,cloneEl:zo,targetEl:Bn,rootEl:co,oldIndex:Jm,oldDraggableIndex:gy,newIndex:hc,newDraggableIndex:mf},t))}var Bn,Oo,$r,co,Ep,i1,zo,yf,Jm,hc,gy,mf,N_,is,$m=!1,z1=!1,F1=[],Mp,Pu,TA,PA,UM,HM,Q0,jm,yy,vy=!1,j_=!1,o1,bs,kA=[],Dw=!1,B1=[],zb=typeof document<"u",V_=t3,GM=sv||Ad?"cssFloat":"float",mK=zb&&!aK&&!t3&&"draggable"in document.createElement("div"),o3=function(){if(zb){if(Ad)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),a3=function(e,n){var a=hr(e),s=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),d=Cg(e,0,n),l=Cg(e,1,n),o=d&&hr(d),g=l&&hr(l),_=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+uo(d).width,I=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+uo(l).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(d&&o.float&&o.float!=="none"){var C=o.float==="left"?"left":"right";return l&&(g.clear==="both"||g.clear===C)?"vertical":"horizontal"}return d&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||_>=s&&a[GM]==="none"||l&&a[GM]==="none"&&_+I>s)?"vertical":"horizontal"},gK=function(e,n,a){var s=a?e.left:e.top,d=a?e.right:e.bottom,l=a?e.width:e.height,o=a?n.left:n.top,g=a?n.right:n.bottom,_=a?n.width:n.height;return s===o||d===g||s+l/2===o+_/2},yK=function(e,n){var a;return F1.some(function(s){var d=s[Cs].options.emptyInsertThreshold;if(!(!d||iC(s))){var l=uo(s),o=e>=l.left-d&&e<=l.right+d,g=n>=l.top-d&&n<=l.bottom+d;if(o&&g)return a=s}}),a},s3=function(e){function n(d,l){return function(o,g,_,I){var C=o.options.group.name&&g.options.group.name&&o.options.group.name===g.options.group.name;if(d==null&&(l||C))return!0;if(d==null||d===!1)return!1;if(l&&d==="clone")return d;if(typeof d=="function")return n(d(o,g,_,I),l)(o,g,_,I);var E=(l?o:g).options.group.name;return d===!0||typeof d=="string"&&d===E||d.join&&d.indexOf(E)>-1}}var a={},s=e.group;(!s||r1(s)!="object")&&(s={name:s}),a.name=s.name,a.checkPull=n(s.pull,!0),a.checkPut=n(s.put),a.revertClone=s.revertClone,e.group=a},l3=function(){!o3&&$r&&hr($r,"display","none")},c3=function(){!o3&&$r&&hr($r,"display","")};zb&&document.addEventListener("click",function(t){if(z1)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),z1=!1,!1},!0);var Sp=function(e){if(Bn){e=e.touches?e.touches[0]:e;var n=yK(e.clientX,e.clientY);if(n){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);a.target=a.rootEl=n,a.preventDefault=void 0,a.stopPropagation=void 0,n[Cs]._onDragOver(a)}}},vK=function(e){Bn&&Bn.parentNode[Cs]._isOutsideThisEl(e.target)};function Ir(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Qc({},e),t[Cs]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return a3(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,o){l.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ir.supportPointer!==!1&&"PointerEvent"in window&&!py,emptyInsertThreshold:5};lv.initializePlugins(this,t,n);for(var a in n)!(a in e)&&(e[a]=n[a]);s3(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:mK,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ni(t,"pointerdown",this._onTapStart):(ni(t,"mousedown",this._onTapStart),ni(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ni(t,"dragover",this),ni(t,"dragenter",this)),F1.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Qc(this,hK())}Ir.prototype={constructor:Ir,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(jm=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Bn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,a=this.el,s=this.options,d=s.preventOnFilter,l=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,g=(o||e).target,_=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||g,I=s.filter;if(MK(a),!Bn&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||s.disabled)&&!_.isContentEditable&&!(!this.nativeDraggable&&py&&g&&g.tagName.toUpperCase()==="SELECT")&&(g=Du(g,s.draggable,a,!1),!(g&&g.animated)&&i1!==g)){if(Jm=Fo(g),gy=Fo(g,s.draggable),typeof I=="function"){if(I.call(this,e,g,this)){Xs({sortable:n,rootEl:_,name:"filter",targetEl:g,toEl:a,fromEl:a}),_l("filter",n,{evt:e}),d&&e.cancelable&&e.preventDefault();return}}else if(I&&(I=I.split(",").some(function(C){if(C=Du(_,C.trim(),a,!1),C)return Xs({sortable:n,rootEl:C,name:"filter",targetEl:g,fromEl:a,toEl:a}),_l("filter",n,{evt:e}),!0}),I)){d&&e.cancelable&&e.preventDefault();return}s.handle&&!Du(_,s.handle,a,!1)||this._prepareDragStart(e,o,g)}}},_prepareDragStart:function(e,n,a){var s=this,d=s.el,l=s.options,o=d.ownerDocument,g;if(a&&!Bn&&a.parentNode===d){var _=uo(a);if(co=d,Bn=a,Oo=Bn.parentNode,Ep=Bn.nextSibling,i1=a,N_=l.group,Ir.dragged=Bn,Mp={target:Bn,clientX:(n||e).clientX,clientY:(n||e).clientY},UM=Mp.clientX-_.left,HM=Mp.clientY-_.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Bn.style["will-change"]="all",g=function(){if(_l("delayEnded",s,{evt:e}),Ir.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!FM&&s.nativeDraggable&&(Bn.draggable=!0),s._triggerDragStart(e,n),Xs({sortable:s,name:"choose",originalEvent:e}),wo(Bn,l.chosenClass,!0)},l.ignore.split(",").forEach(function(I){n3(Bn,I.trim(),LA)}),ni(o,"dragover",Sp),ni(o,"mousemove",Sp),ni(o,"touchmove",Sp),ni(o,"mouseup",s._onDrop),ni(o,"touchend",s._onDrop),ni(o,"touchcancel",s._onDrop),FM&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Bn.draggable=!0),_l("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(sv||Ad))){if(Ir.eventCanceled){this._onDrop();return}ni(o,"mouseup",s._disableDelayedDrag),ni(o,"touchend",s._disableDelayedDrag),ni(o,"touchcancel",s._disableDelayedDrag),ni(o,"mousemove",s._delayedDragTouchMoveHandler),ni(o,"touchmove",s._delayedDragTouchMoveHandler),l.supportPointer&&ni(o,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(g,l.delay)}else g()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Bn&&LA(Bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Qr(e,"mouseup",this._disableDelayedDrag),Qr(e,"touchend",this._disableDelayedDrag),Qr(e,"touchcancel",this._disableDelayedDrag),Qr(e,"mousemove",this._delayedDragTouchMoveHandler),Qr(e,"touchmove",this._delayedDragTouchMoveHandler),Qr(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?ni(document,"pointermove",this._onTouchMove):n?ni(document,"touchmove",this._onTouchMove):ni(document,"mousemove",this._onTouchMove):(ni(Bn,"dragend",this),ni(co,"dragstart",this._onDragStart));try{document.selection?a1(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if($m=!1,co&&Bn){_l("dragStarted",this,{evt:n}),this.nativeDraggable&&ni(document,"dragover",vK);var a=this.options;!e&&wo(Bn,a.dragClass,!1),wo(Bn,a.ghostClass,!0),Ir.active=this,e&&this._appendGhost(),Xs({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Pu){this._lastX=Pu.clientX,this._lastY=Pu.clientY,l3();for(var e=document.elementFromPoint(Pu.clientX,Pu.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Pu.clientX,Pu.clientY),e!==n);)n=e;if(Bn.parentNode[Cs]._isOutsideThisEl(e),n)do{if(n[Cs]){var a=void 0;if(a=n[Cs]._onDragOver({clientX:Pu.clientX,clientY:Pu.clientY,target:e,rootEl:n}),a&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);c3()}},_onTouchMove:function(e){if(Mp){var n=this.options,a=n.fallbackTolerance,s=n.fallbackOffset,d=e.touches?e.touches[0]:e,l=$r&&Fp($r,!0),o=$r&&l&&l.a,g=$r&&l&&l.d,_=V_&&bs&&jM(bs),I=(d.clientX-Mp.clientX+s.x)/(o||1)+(_?_[0]-kA[0]:0)/(o||1),C=(d.clientY-Mp.clientY+s.y)/(g||1)+(_?_[1]-kA[1]:0)/(g||1);if(!Ir.active&&!$m){if(a&&Math.max(Math.abs(d.clientX-this._lastX),Math.abs(d.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if($r){l?(l.e+=I-(TA||0),l.f+=C-(PA||0)):l={a:1,b:0,c:0,d:1,e:I,f:C};var E="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");hr($r,"webkitTransform",E),hr($r,"mozTransform",E),hr($r,"msTransform",E),hr($r,"transform",E),TA=I,PA=C,Pu=d}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!$r){var e=this.options.fallbackOnBody?document.body:co,n=uo(Bn,!0,V_,!0,e),a=this.options;if(V_){for(bs=e;hr(bs,"position")==="static"&&hr(bs,"transform")==="none"&&bs!==document;)bs=bs.parentNode;bs!==document.body&&bs!==document.documentElement?(bs===document&&(bs=xh()),n.top+=bs.scrollTop,n.left+=bs.scrollLeft):bs=xh(),kA=jM(bs)}$r=Bn.cloneNode(!0),wo($r,a.ghostClass,!1),wo($r,a.fallbackClass,!0),wo($r,a.dragClass,!0),hr($r,"transition",""),hr($r,"transform",""),hr($r,"box-sizing","border-box"),hr($r,"margin",0),hr($r,"top",n.top),hr($r,"left",n.left),hr($r,"width",n.width),hr($r,"height",n.height),hr($r,"opacity","0.8"),hr($r,"position",V_?"absolute":"fixed"),hr($r,"zIndex","100000"),hr($r,"pointerEvents","none"),Ir.ghost=$r,e.appendChild($r),hr($r,"transform-origin",UM/parseInt($r.style.width)*100+"% "+HM/parseInt($r.style.height)*100+"%")}},_onDragStart:function(e,n){var a=this,s=e.dataTransfer,d=a.options;if(_l("dragStart",this,{evt:e}),Ir.eventCanceled){this._onDrop();return}_l("setupClone",this),Ir.eventCanceled||(zo=oC(Bn),zo.draggable=!1,zo.style["will-change"]="",this._hideClone(),wo(zo,this.options.chosenClass,!1),Ir.clone=zo),a.cloneId=a1(function(){_l("clone",a),!Ir.eventCanceled&&(a.options.removeCloneOnHide||co.insertBefore(zo,Bn),a._hideClone(),Xs({sortable:a,name:"clone"}))}),!n&&wo(Bn,d.dragClass,!0),n?(z1=!0,a._loopId=setInterval(a._emulateDragOver,50)):(Qr(document,"mouseup",a._onDrop),Qr(document,"touchend",a._onDrop),Qr(document,"touchcancel",a._onDrop),s&&(s.effectAllowed="move",d.setData&&d.setData.call(a,s,Bn)),ni(document,"drop",a),hr(Bn,"transform","translateZ(0)")),$m=!0,a._dragStartId=a1(a._dragStarted.bind(a,n,e)),ni(document,"selectstart",a),Q0=!0,py&&hr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,a=e.target,s,d,l,o=this.options,g=o.group,_=Ir.active,I=N_===g,C=o.sort,E=is||_,S,k=this,D=!1;if(Dw)return;function N(ae,ye){_l(ae,k,Mh({evt:e,isOwner:I,axis:S?"vertical":"horizontal",revert:l,dragRect:s,targetRect:d,canSort:C,fromSortable:E,target:a,completed:F,onMove:function(Jt,Gt){return U_(co,n,Bn,s,Jt,uo(Jt),e,Gt)},changed:j},ye))}function U(){N("dragOverAnimationCapture"),k.captureAnimationState(),k!==E&&E.captureAnimationState()}function F(ae){return N("dragOverCompleted",{insertion:ae}),ae&&(I?_._hideClone():_._showClone(k),k!==E&&(wo(Bn,is?is.options.ghostClass:_.options.ghostClass,!1),wo(Bn,o.ghostClass,!0)),is!==k&&k!==Ir.active?is=k:k===Ir.active&&is&&(is=null),E===k&&(k._ignoreWhileAnimating=a),k.animateAll(function(){N("dragOverAnimationComplete"),k._ignoreWhileAnimating=null}),k!==E&&(E.animateAll(),E._ignoreWhileAnimating=null)),(a===Bn&&!Bn.animated||a===n&&!a.animated)&&(jm=null),!o.dragoverBubble&&!e.rootEl&&a!==document&&(Bn.parentNode[Cs]._isOutsideThisEl(e.target),!ae&&Sp(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),D=!0}function j(){hc=Fo(Bn),mf=Fo(Bn,o.draggable),Xs({sortable:k,name:"change",toEl:n,newIndex:hc,newDraggableIndex:mf,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=Du(a,o.draggable,n,!0),N("dragOver"),Ir.eventCanceled)return D;if(Bn.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||k._ignoreWhileAnimating===a)return F(!1);if(z1=!1,_&&!o.disabled&&(I?C||(l=Oo!==co):is===this||(this.lastPutMode=N_.checkPull(this,_,Bn,e))&&g.checkPut(this,_,Bn,e))){if(S=this._getDirection(e,a)==="vertical",s=uo(Bn),N("dragOverValid"),Ir.eventCanceled)return D;if(l)return Oo=co,U(),this._hideClone(),N("revert"),Ir.eventCanceled||(Ep?co.insertBefore(Bn,Ep):co.appendChild(Bn)),F(!0);var $=iC(n,o.draggable);if(!$||AK(e,S,this)&&!$.animated){if($===Bn)return F(!1);if($&&n===e.target&&(a=$),a&&(d=uo(a)),U_(co,n,Bn,s,a,d,e,!!a)!==!1)return U(),n.appendChild(Bn),Oo=n,j(),F(!0)}else if($&&xK(e,S,this)){var K=Cg(n,0,o,!0);if(K===Bn)return F(!1);if(a=K,d=uo(a),U_(co,n,Bn,s,a,d,e,!1)!==!1)return U(),n.insertBefore(Bn,K),Oo=n,j(),F(!0)}else if(a.parentNode===n){d=uo(a);var tt=0,it,et=Bn.parentNode!==n,q=!gK(Bn.animated&&Bn.toRect||s,a.animated&&a.toRect||d,S),ut=S?"top":"left",Ct=NM(a,"top","top")||NM(Bn,"top","top"),ot=Ct?Ct.scrollTop:void 0;jm!==a&&(it=d[ut],vy=!1,j_=!q&&o.invertSwap||et),tt=wK(e,a,d,S,q?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,j_,jm===a);var bt;if(tt!==0){var X=Fo(Bn);do X-=tt,bt=Oo.children[X];while(bt&&(hr(bt,"display")==="none"||bt===$r))}if(tt===0||bt===a)return F(!1);jm=a,yy=tt;var Wt=a.nextElementSibling,Vt=!1;Vt=tt===1;var Bt=U_(co,n,Bn,s,a,d,e,Vt);if(Bt!==!1)return(Bt===1||Bt===-1)&&(Vt=Bt===1),Dw=!0,setTimeout(bK,30),U(),Vt&&!Wt?n.appendChild(Bn):a.parentNode.insertBefore(Bn,Vt?Wt:a),Ct&&i3(Ct,0,ot-Ct.scrollTop),Oo=Bn.parentNode,it!==void 0&&!j_&&(o1=Math.abs(it-uo(a)[ut])),j(),F(!0)}if(n.contains(Bn))return F(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Qr(document,"mousemove",this._onTouchMove),Qr(document,"touchmove",this._onTouchMove),Qr(document,"pointermove",this._onTouchMove),Qr(document,"dragover",Sp),Qr(document,"mousemove",Sp),Qr(document,"touchmove",Sp)},_offUpEvents:function(){var e=this.el.ownerDocument;Qr(e,"mouseup",this._onDrop),Qr(e,"touchend",this._onDrop),Qr(e,"pointerup",this._onDrop),Qr(e,"touchcancel",this._onDrop),Qr(document,"selectstart",this)},_onDrop:function(e){var n=this.el,a=this.options;if(hc=Fo(Bn),mf=Fo(Bn,a.draggable),_l("drop",this,{evt:e}),Oo=Bn&&Bn.parentNode,hc=Fo(Bn),mf=Fo(Bn,a.draggable),Ir.eventCanceled){this._nulling();return}$m=!1,j_=!1,vy=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ow(this.cloneId),Ow(this._dragStartId),this.nativeDraggable&&(Qr(document,"drop",this),Qr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),py&&hr(document.body,"user-select",""),hr(Bn,"transform",""),e&&(Q0&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),$r&&$r.parentNode&&$r.parentNode.removeChild($r),(co===Oo||is&&is.lastPutMode!=="clone")&&zo&&zo.parentNode&&zo.parentNode.removeChild(zo),Bn&&(this.nativeDraggable&&Qr(Bn,"dragend",this),LA(Bn),Bn.style["will-change"]="",Q0&&!$m&&wo(Bn,is?is.options.ghostClass:this.options.ghostClass,!1),wo(Bn,this.options.chosenClass,!1),Xs({sortable:this,name:"unchoose",toEl:Oo,newIndex:null,newDraggableIndex:null,originalEvent:e}),co!==Oo?(hc>=0&&(Xs({rootEl:Oo,name:"add",toEl:Oo,fromEl:co,originalEvent:e}),Xs({sortable:this,name:"remove",toEl:Oo,originalEvent:e}),Xs({rootEl:Oo,name:"sort",toEl:Oo,fromEl:co,originalEvent:e}),Xs({sortable:this,name:"sort",toEl:Oo,originalEvent:e})),is&&is.save()):hc!==Jm&&hc>=0&&(Xs({sortable:this,name:"update",toEl:Oo,originalEvent:e}),Xs({sortable:this,name:"sort",toEl:Oo,originalEvent:e})),Ir.active&&((hc==null||hc===-1)&&(hc=Jm,mf=gy),Xs({sortable:this,name:"end",toEl:Oo,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){_l("nulling",this),co=Bn=Oo=$r=Ep=zo=i1=yf=Mp=Pu=Q0=hc=mf=Jm=gy=jm=yy=is=N_=Ir.dragged=Ir.ghost=Ir.clone=Ir.active=null,B1.forEach(function(e){e.checked=!0}),B1.length=TA=PA=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Bn&&(this._onDragOver(e),_K(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,a=this.el.children,s=0,d=a.length,l=this.options;s<d;s++)n=a[s],Du(n,l.draggable,this.el,!1)&&e.push(n.getAttribute(l.dataIdAttr)||IK(n));return e},sort:function(e,n){var a={},s=this.el;this.toArray().forEach(function(d,l){var o=s.children[l];Du(o,this.options.draggable,s,!1)&&(a[d]=o)},this),n&&this.captureAnimationState(),e.forEach(function(d){a[d]&&(s.removeChild(a[d]),s.appendChild(a[d]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Du(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var a=this.options;if(n===void 0)return a[e];var s=lv.modifyOption(this,e,n);typeof s<"u"?a[e]=s:a[e]=n,e==="group"&&s3(a)},destroy:function(){_l("destroy",this);var e=this.el;e[Cs]=null,Qr(e,"mousedown",this._onTapStart),Qr(e,"touchstart",this._onTapStart),Qr(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Qr(e,"dragover",this),Qr(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),F1.splice(F1.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!yf){if(_l("hideClone",this),Ir.eventCanceled)return;hr(zo,"display","none"),this.options.removeCloneOnHide&&zo.parentNode&&zo.parentNode.removeChild(zo),yf=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(yf){if(_l("showClone",this),Ir.eventCanceled)return;Bn.parentNode==co&&!this.options.group.revertClone?co.insertBefore(zo,Bn):Ep?co.insertBefore(zo,Ep):co.appendChild(zo),this.options.group.revertClone&&this.animate(Bn,zo),hr(zo,"display",""),yf=!1}}};function _K(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function U_(t,e,n,a,s,d,l,o){var g,_=t[Cs],I=_.options.onMove,C;return window.CustomEvent&&!Ad&&!sv?g=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent("move",!0,!0)),g.to=e,g.from=t,g.dragged=n,g.draggedRect=a,g.related=s||e,g.relatedRect=d||uo(e),g.willInsertAfter=o,g.originalEvent=l,t.dispatchEvent(g),I&&(C=I.call(_,g,l)),C}function LA(t){t.draggable=!1}function bK(){Dw=!1}function xK(t,e,n){var a=uo(Cg(n.el,0,n.options,!0)),s=10;return e?t.clientX<a.left-s||t.clientY<a.top&&t.clientX<a.right:t.clientY<a.top-s||t.clientY<a.bottom&&t.clientX<a.left}function AK(t,e,n){var a=uo(iC(n.el,n.options.draggable)),s=10;return e?t.clientX>a.right+s||t.clientX<=a.right&&t.clientY>a.bottom&&t.clientX>=a.left:t.clientX>a.right&&t.clientY>a.top||t.clientX<=a.right&&t.clientY>a.bottom+s}function wK(t,e,n,a,s,d,l,o){var g=a?t.clientY:t.clientX,_=a?n.height:n.width,I=a?n.top:n.left,C=a?n.bottom:n.right,E=!1;if(!l){if(o&&o1<_*s){if(!vy&&(yy===1?g>I+_*d/2:g<C-_*d/2)&&(vy=!0),vy)E=!0;else if(yy===1?g<I+o1:g>C-o1)return-yy}else if(g>I+_*(1-s)/2&&g<C-_*(1-s)/2)return CK(e)}return E=E||l,E&&(g<I+_*d/2||g>C-_*d/2)?g>I+_/2?1:-1:0}function CK(t){return Fo(Bn)<Fo(t)?1:-1}function IK(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,a=0;n--;)a+=e.charCodeAt(n);return a.toString(36)}function MK(t){B1.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var a=e[n];a.checked&&B1.push(a)}}function a1(t){return setTimeout(t,0)}function Ow(t){return clearTimeout(t)}zb&&ni(document,"touchmove",function(t){(Ir.active||$m)&&t.cancelable&&t.preventDefault()});Ir.utils={on:ni,off:Qr,css:hr,find:n3,is:function(e,n){return!!Du(e,n,e,!1)},extend:cK,throttle:r3,closest:Du,toggleClass:wo,clone:oC,index:Fo,nextTick:a1,cancelNextTick:Ow,detectDirection:a3,getChild:Cg};Ir.get=function(t){return t[Cs]};Ir.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(Ir.utils=Mh(Mh({},Ir.utils),a.utils)),lv.mount(a)})};Ir.create=function(t,e){return new Ir(t,e)};Ir.version=oK;var aa=[],J0,zw,Fw=!1,RA,DA,N1,ty;function SK(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var a=n.originalEvent;this.sortable.nativeDraggable?ni(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ni(document,"pointermove",this._handleFallbackAutoScroll):a.touches?ni(document,"touchmove",this._handleFallbackAutoScroll):ni(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var a=n.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?Qr(document,"dragover",this._handleAutoScroll):(Qr(document,"pointermove",this._handleFallbackAutoScroll),Qr(document,"touchmove",this._handleFallbackAutoScroll),Qr(document,"mousemove",this._handleFallbackAutoScroll)),$M(),s1(),uK()},nulling:function(){N1=zw=J0=Fw=ty=RA=DA=null,aa.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,a){var s=this,d=(n.touches?n.touches[0]:n).clientX,l=(n.touches?n.touches[0]:n).clientY,o=document.elementFromPoint(d,l);if(N1=n,a||this.options.forceAutoScrollFallback||sv||Ad||py){OA(n,this.options,o,a);var g=_f(o,!0);Fw&&(!ty||d!==RA||l!==DA)&&(ty&&$M(),ty=setInterval(function(){var _=_f(document.elementFromPoint(d,l),!0);_!==g&&(g=_,s1()),OA(n,s.options,_,a)},10),RA=d,DA=l)}else{if(!this.options.bubbleScroll||_f(o,!0)===xh()){s1();return}OA(n,this.options,_f(o,!1),!1)}}},Qc(t,{pluginName:"scroll",initializeByDefault:!0})}function s1(){aa.forEach(function(t){clearInterval(t.pid)}),aa=[]}function $M(){clearInterval(ty)}var OA=r3(function(t,e,n,a){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,d=(t.touches?t.touches[0]:t).clientY,l=e.scrollSensitivity,o=e.scrollSpeed,g=xh(),_=!1,I;zw!==n&&(zw=n,s1(),J0=e.scroll,I=e.scrollFn,J0===!0&&(J0=_f(n,!0)));var C=0,E=J0;do{var S=E,k=uo(S),D=k.top,N=k.bottom,U=k.left,F=k.right,j=k.width,$=k.height,K=void 0,tt=void 0,it=S.scrollWidth,et=S.scrollHeight,q=hr(S),ut=S.scrollLeft,Ct=S.scrollTop;S===g?(K=j<it&&(q.overflowX==="auto"||q.overflowX==="scroll"||q.overflowX==="visible"),tt=$<et&&(q.overflowY==="auto"||q.overflowY==="scroll"||q.overflowY==="visible")):(K=j<it&&(q.overflowX==="auto"||q.overflowX==="scroll"),tt=$<et&&(q.overflowY==="auto"||q.overflowY==="scroll"));var ot=K&&(Math.abs(F-s)<=l&&ut+j<it)-(Math.abs(U-s)<=l&&!!ut),bt=tt&&(Math.abs(N-d)<=l&&Ct+$<et)-(Math.abs(D-d)<=l&&!!Ct);if(!aa[C])for(var X=0;X<=C;X++)aa[X]||(aa[X]={});(aa[C].vx!=ot||aa[C].vy!=bt||aa[C].el!==S)&&(aa[C].el=S,aa[C].vx=ot,aa[C].vy=bt,clearInterval(aa[C].pid),(ot!=0||bt!=0)&&(_=!0,aa[C].pid=setInterval((function(){a&&this.layer===0&&Ir.active._onTouchMove(N1);var Wt=aa[this.layer].vy?aa[this.layer].vy*o:0,Vt=aa[this.layer].vx?aa[this.layer].vx*o:0;typeof I=="function"&&I.call(Ir.dragged.parentNode[Cs],Vt,Wt,t,N1,aa[this.layer].el)!=="continue"||i3(aa[this.layer].el,Vt,Wt)}).bind({layer:C}),24))),C++}while(e.bubbleScroll&&E!==g&&(E=_f(E,!1)));Fw=_}},30),u3=function(e){var n=e.originalEvent,a=e.putSortable,s=e.dragEl,d=e.activeSortable,l=e.dispatchSortableEvent,o=e.hideGhostForTarget,g=e.unhideGhostForTarget;if(n){var _=a||d;o();var I=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,C=document.elementFromPoint(I.clientX,I.clientY);g(),_&&!_.el.contains(C)&&(l("spill"),this.onSpill({dragEl:s,putSortable:a}))}};function aC(){}aC.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var s=Cg(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(n,s):this.sortable.el.appendChild(n),this.sortable.animateAll(),a&&a.animateAll()},drop:u3};Qc(aC,{pluginName:"revertOnSpill"});function sC(){}sC.prototype={onSpill:function(e){var n=e.dragEl,a=e.putSortable,s=a||this.sortable;s.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),s.animateAll()},drop:u3};Qc(sC,{pluginName:"removeOnSpill"});var $c;function EK(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var a=n.dragEl;$c=a},dragOverValid:function(n){var a=n.completed,s=n.target,d=n.onMove,l=n.activeSortable,o=n.changed,g=n.cancel;if(l.options.swap){var _=this.sortable.el,I=this.options;if(s&&s!==_){var C=$c;d(s)!==!1?(wo(s,I.swapClass,!0),$c=s):$c=null,C&&C!==$c&&wo(C,I.swapClass,!1)}o(),a(!0),g()}},drop:function(n){var a=n.activeSortable,s=n.putSortable,d=n.dragEl,l=s||this.sortable,o=this.options;$c&&wo($c,o.swapClass,!1),$c&&(o.swap||s&&s.options.swap)&&d!==$c&&(l.captureAnimationState(),l!==a&&a.captureAnimationState(),TK(d,$c),l.animateAll(),l!==a&&a.animateAll())},nulling:function(){$c=null}},Qc(t,{pluginName:"swap",eventProperties:function(){return{swapItem:$c}}})}function TK(t,e){var n=t.parentNode,a=e.parentNode,s,d;!n||!a||n.isEqualNode(e)||a.isEqualNode(t)||(s=Fo(t),d=Fo(e),n.isEqualNode(a)&&s<d&&d++,n.insertBefore(e,n.children[s]),a.insertBefore(t,a.children[d]))}var zr=[],uc=[],U0,ku,H0=!1,bl=!1,Vm=!1,Yi,G0,H_;function PK(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?ni(document,"pointerup",this._deselectMultiDrag):(ni(document,"mouseup",this._deselectMultiDrag),ni(document,"touchend",this._deselectMultiDrag)),ni(document,"keydown",this._checkKeyDown),ni(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,d){var l="";zr.length&&ku===e?zr.forEach(function(o,g){l+=(g?", ":"")+o.textContent}):l=d.textContent,s.setData("Text",l)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var a=n.dragEl;Yi=a},delayEnded:function(){this.isMultiDrag=~zr.indexOf(Yi)},setupClone:function(n){var a=n.sortable,s=n.cancel;if(this.isMultiDrag){for(var d=0;d<zr.length;d++)uc.push(oC(zr[d])),uc[d].sortableIndex=zr[d].sortableIndex,uc[d].draggable=!1,uc[d].style["will-change"]="",wo(uc[d],this.options.selectedClass,!1),zr[d]===Yi&&wo(uc[d],this.options.chosenClass,!1);a._hideClone(),s()}},clone:function(n){var a=n.sortable,s=n.rootEl,d=n.dispatchSortableEvent,l=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||zr.length&&ku===a&&(ZM(!0,s),d("clone"),l()))},showClone:function(n){var a=n.cloneNowShown,s=n.rootEl,d=n.cancel;this.isMultiDrag&&(ZM(!1,s),uc.forEach(function(l){hr(l,"display","")}),a(),H_=!1,d())},hideClone:function(n){var a=this;n.sortable;var s=n.cloneNowHidden,d=n.cancel;this.isMultiDrag&&(uc.forEach(function(l){hr(l,"display","none"),a.options.removeCloneOnHide&&l.parentNode&&l.parentNode.removeChild(l)}),s(),H_=!0,d())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&ku&&ku.multiDrag._deselectMultiDrag(),zr.forEach(function(a){a.sortableIndex=Fo(a)}),zr=zr.sort(function(a,s){return a.sortableIndex-s.sortableIndex}),Vm=!0},dragStarted:function(n){var a=this,s=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){zr.forEach(function(l){l!==Yi&&hr(l,"position","absolute")});var d=uo(Yi,!1,!0,!0);zr.forEach(function(l){l!==Yi&&VM(l,d)}),bl=!0,H0=!0}s.animateAll(function(){bl=!1,H0=!1,a.options.animation&&zr.forEach(function(l){SA(l)}),a.options.sort&&G_()})}},dragOver:function(n){var a=n.target,s=n.completed,d=n.cancel;bl&&~zr.indexOf(a)&&(s(!1),d())},revert:function(n){var a=n.fromSortable,s=n.rootEl,d=n.sortable,l=n.dragRect;zr.length>1&&(zr.forEach(function(o){d.addAnimationState({target:o,rect:bl?uo(o):l}),SA(o),o.fromRect=l,a.removeAnimationState(o)}),bl=!1,kK(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(n){var a=n.sortable,s=n.isOwner,d=n.insertion,l=n.activeSortable,o=n.parentEl,g=n.putSortable,_=this.options;if(d){if(s&&l._hideClone(),H0=!1,_.animation&&zr.length>1&&(bl||!s&&!l.options.sort&&!g)){var I=uo(Yi,!1,!0,!0);zr.forEach(function(E){E!==Yi&&(VM(E,I),o.appendChild(E))}),bl=!0}if(!s)if(bl||G_(),zr.length>1){var C=H_;l._showClone(a),l.options.animation&&!H_&&C&&uc.forEach(function(E){l.addAnimationState({target:E,rect:G0}),E.fromRect=G0,E.thisAnimationDuration=null})}else l._showClone(a)}},dragOverAnimationCapture:function(n){var a=n.dragRect,s=n.isOwner,d=n.activeSortable;if(zr.forEach(function(o){o.thisAnimationDuration=null}),d.options.animation&&!s&&d.multiDrag.isMultiDrag){G0=Qc({},a);var l=Fp(Yi,!0);G0.top-=l.f,G0.left-=l.e}},dragOverAnimationComplete:function(){bl&&(bl=!1,G_())},drop:function(n){var a=n.originalEvent,s=n.rootEl,d=n.parentEl,l=n.sortable,o=n.dispatchSortableEvent,g=n.oldIndex,_=n.putSortable,I=_||this.sortable;if(a){var C=this.options,E=d.children;if(!Vm)if(C.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),wo(Yi,C.selectedClass,!~zr.indexOf(Yi)),~zr.indexOf(Yi))zr.splice(zr.indexOf(Yi),1),U0=null,X0({sortable:l,rootEl:s,name:"deselect",targetEl:Yi,originalEvt:a});else{if(zr.push(Yi),X0({sortable:l,rootEl:s,name:"select",targetEl:Yi,originalEvt:a}),a.shiftKey&&U0&&l.el.contains(U0)){var S=Fo(U0),k=Fo(Yi);if(~S&&~k&&S!==k){var D,N;for(k>S?(N=S,D=k):(N=k,D=S+1);N<D;N++)~zr.indexOf(E[N])||(wo(E[N],C.selectedClass,!0),zr.push(E[N]),X0({sortable:l,rootEl:s,name:"select",targetEl:E[N],originalEvt:a}))}}else U0=Yi;ku=I}if(Vm&&this.isMultiDrag){if(bl=!1,(d[Cs].options.sort||d!==s)&&zr.length>1){var U=uo(Yi),F=Fo(Yi,":not(."+this.options.selectedClass+")");if(!H0&&C.animation&&(Yi.thisAnimationDuration=null),I.captureAnimationState(),!H0&&(C.animation&&(Yi.fromRect=U,zr.forEach(function($){if($.thisAnimationDuration=null,$!==Yi){var K=bl?uo($):U;$.fromRect=K,I.addAnimationState({target:$,rect:K})}})),G_(),zr.forEach(function($){E[F]?d.insertBefore($,E[F]):d.appendChild($),F++}),g===Fo(Yi))){var j=!1;zr.forEach(function($){if($.sortableIndex!==Fo($)){j=!0;return}}),j&&o("update")}zr.forEach(function($){SA($)}),I.animateAll()}ku=I}(s===d||_&&_.lastPutMode!=="clone")&&uc.forEach(function($){$.parentNode&&$.parentNode.removeChild($)})}},nullingGlobal:function(){this.isMultiDrag=Vm=!1,uc.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Qr(document,"pointerup",this._deselectMultiDrag),Qr(document,"mouseup",this._deselectMultiDrag),Qr(document,"touchend",this._deselectMultiDrag),Qr(document,"keydown",this._checkKeyDown),Qr(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Vm<"u"&&Vm)&&ku===this.sortable&&!(n&&Du(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;zr.length;){var a=zr[0];wo(a,this.options.selectedClass,!1),zr.shift(),X0({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:a,originalEvt:n})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Qc(t,{pluginName:"multiDrag",utils:{select:function(n){var a=n.parentNode[Cs];!a||!a.options.multiDrag||~zr.indexOf(n)||(ku&&ku!==a&&(ku.multiDrag._deselectMultiDrag(),ku=a),wo(n,a.options.selectedClass,!0),zr.push(n))},deselect:function(n){var a=n.parentNode[Cs],s=zr.indexOf(n);!a||!a.options.multiDrag||!~s||(wo(n,a.options.selectedClass,!1),zr.splice(s,1))}},eventProperties:function(){var n=this,a=[],s=[];return zr.forEach(function(d){a.push({multiDragElement:d,index:d.sortableIndex});var l;bl&&d!==Yi?l=-1:bl?l=Fo(d,":not(."+n.options.selectedClass+")"):l=Fo(d),s.push({multiDragElement:d,index:l})}),{items:tK(zr),clones:[].concat(uc),oldIndicies:a,newIndicies:s}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function kK(t,e){zr.forEach(function(n,a){var s=e.children[n.sortableIndex+(t?Number(a):0)];s?e.insertBefore(n,s):e.appendChild(n)})}function ZM(t,e){uc.forEach(function(n,a){var s=e.children[n.sortableIndex+(t?Number(a):0)];s?e.insertBefore(n,s):e.appendChild(n)})}function G_(){zr.forEach(function(t){t!==Yi&&t.parentNode&&t.parentNode.removeChild(t)})}Ir.mount(new SK);Ir.mount(sC,aC);const LK=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:PK,Sortable:Ir,Swap:EK,default:Ir},Symbol.toStringTag,{value:"Module"})),RK=Zy(LK);(function(t,e){(function(a,s){t.exports=s(Yq,RK)})(typeof self<"u"?self:Io,function(n,a){return function(s){var d={};function l(o){if(d[o])return d[o].exports;var g=d[o]={i:o,l:!1,exports:{}};return s[o].call(g.exports,g,g.exports,l),g.l=!0,g.exports}return l.m=s,l.c=d,l.d=function(o,g,_){l.o(o,g)||Object.defineProperty(o,g,{enumerable:!0,get:_})},l.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},l.t=function(o,g){if(g&1&&(o=l(o)),g&8||g&4&&typeof o=="object"&&o&&o.__esModule)return o;var _=Object.create(null);if(l.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:o}),g&2&&typeof o!="string")for(var I in o)l.d(_,I,(function(C){return o[C]}).bind(null,I));return _},l.n=function(o){var g=o&&o.__esModule?function(){return o.default}:function(){return o};return l.d(g,"a",g),g},l.o=function(o,g){return Object.prototype.hasOwnProperty.call(o,g)},l.p="",l(l.s="fb15")}({"00ee":function(s,d,l){var o=l("b622"),g=o("toStringTag"),_={};_[g]="z",s.exports=String(_)==="[object z]"},"0366":function(s,d,l){var o=l("1c0b");s.exports=function(g,_,I){if(o(g),_===void 0)return g;switch(I){case 0:return function(){return g.call(_)};case 1:return function(C){return g.call(_,C)};case 2:return function(C,E){return g.call(_,C,E)};case 3:return function(C,E,S){return g.call(_,C,E,S)}}return function(){return g.apply(_,arguments)}}},"057f":function(s,d,l){var o=l("fc6a"),g=l("241c").f,_={}.toString,I=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],C=function(E){try{return g(E)}catch{return I.slice()}};s.exports.f=function(S){return I&&_.call(S)=="[object Window]"?C(S):g(o(S))}},"06cf":function(s,d,l){var o=l("83ab"),g=l("d1e7"),_=l("5c6c"),I=l("fc6a"),C=l("c04e"),E=l("5135"),S=l("0cfb"),k=Object.getOwnPropertyDescriptor;d.f=o?k:function(N,U){if(N=I(N),U=C(U,!0),S)try{return k(N,U)}catch{}if(E(N,U))return _(!g.f.call(N,U),N[U])}},"0cfb":function(s,d,l){var o=l("83ab"),g=l("d039"),_=l("cc12");s.exports=!o&&!g(function(){return Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,d,l){var o=l("23e7"),g=l("d58f").left,_=l("a640"),I=l("ae40"),C=_("reduce"),E=I("reduce",{1:0});o({target:"Array",proto:!0,forced:!C||!E},{reduce:function(k){return g(this,k,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,d,l){var o=l("c6b6"),g=l("9263");s.exports=function(_,I){var C=_.exec;if(typeof C=="function"){var E=C.call(_,I);if(typeof E!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return E}if(o(_)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return g.call(_,I)}},"159b":function(s,d,l){var o=l("da84"),g=l("fdbc"),_=l("17c2"),I=l("9112");for(var C in g){var E=o[C],S=E&&E.prototype;if(S&&S.forEach!==_)try{I(S,"forEach",_)}catch{S.forEach=_}}},"17c2":function(s,d,l){var o=l("b727").forEach,g=l("a640"),_=l("ae40"),I=g("forEach"),C=_("forEach");s.exports=!I||!C?function(S){return o(this,S,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,d,l){var o=l("d066");s.exports=o("document","documentElement")},"1c0b":function(s,d){s.exports=function(l){if(typeof l!="function")throw TypeError(String(l)+" is not a function");return l}},"1c7e":function(s,d,l){var o=l("b622"),g=o("iterator"),_=!1;try{var I=0,C={next:function(){return{done:!!I++}},return:function(){_=!0}};C[g]=function(){return this},Array.from(C,function(){throw 2})}catch{}s.exports=function(E,S){if(!S&&!_)return!1;var k=!1;try{var D={};D[g]=function(){return{next:function(){return{done:k=!0}}}},E(D)}catch{}return k}},"1d80":function(s,d){s.exports=function(l){if(l==null)throw TypeError("Can't call method on "+l);return l}},"1dde":function(s,d,l){var o=l("d039"),g=l("b622"),_=l("2d00"),I=g("species");s.exports=function(C){return _>=51||!o(function(){var E=[],S=E.constructor={};return S[I]=function(){return{foo:1}},E[C](Boolean).foo!==1})}},"23cb":function(s,d,l){var o=l("a691"),g=Math.max,_=Math.min;s.exports=function(I,C){var E=o(I);return E<0?g(E+C,0):_(E,C)}},"23e7":function(s,d,l){var o=l("da84"),g=l("06cf").f,_=l("9112"),I=l("6eeb"),C=l("ce4e"),E=l("e893"),S=l("94ca");s.exports=function(k,D){var N=k.target,U=k.global,F=k.stat,j,$,K,tt,it,et;if(U?$=o:F?$=o[N]||C(N,{}):$=(o[N]||{}).prototype,$)for(K in D){if(it=D[K],k.noTargetGet?(et=g($,K),tt=et&&et.value):tt=$[K],j=S(U?K:N+(F?".":"#")+K,k.forced),!j&&tt!==void 0){if(typeof it==typeof tt)continue;E(it,tt)}(k.sham||tt&&tt.sham)&&_(it,"sham",!0),I($,K,it,k)}}},"241c":function(s,d,l){var o=l("ca84"),g=l("7839"),_=g.concat("length","prototype");d.f=Object.getOwnPropertyNames||function(C){return o(C,_)}},"25f0":function(s,d,l){var o=l("6eeb"),g=l("825a"),_=l("d039"),I=l("ad6d"),C="toString",E=RegExp.prototype,S=E[C],k=_(function(){return S.call({source:"a",flags:"b"})!="/a/b"}),D=S.name!=C;(k||D)&&o(RegExp.prototype,C,function(){var U=g(this),F=String(U.source),j=U.flags,$=String(j===void 0&&U instanceof RegExp&&!("flags"in E)?I.call(U):j);return"/"+F+"/"+$},{unsafe:!0})},"2ca0":function(s,d,l){var o=l("23e7"),g=l("06cf").f,_=l("50c4"),I=l("5a34"),C=l("1d80"),E=l("ab13"),S=l("c430"),k="".startsWith,D=Math.min,N=E("startsWith"),U=!S&&!N&&!!function(){var F=g(String.prototype,"startsWith");return F&&!F.writable}();o({target:"String",proto:!0,forced:!U&&!N},{startsWith:function(j){var $=String(C(this));I(j);var K=_(D(arguments.length>1?arguments[1]:void 0,$.length)),tt=String(j);return k?k.call($,tt,K):$.slice(K,K+tt.length)===tt}})},"2d00":function(s,d,l){var o=l("da84"),g=l("342f"),_=o.process,I=_&&_.versions,C=I&&I.v8,E,S;C?(E=C.split("."),S=E[0]+E[1]):g&&(E=g.match(/Edge\/(\d+)/),(!E||E[1]>=74)&&(E=g.match(/Chrome\/(\d+)/),E&&(S=E[1]))),s.exports=S&&+S},"342f":function(s,d,l){var o=l("d066");s.exports=o("navigator","userAgent")||""},"35a1":function(s,d,l){var o=l("f5df"),g=l("3f8c"),_=l("b622"),I=_("iterator");s.exports=function(C){if(C!=null)return C[I]||C["@@iterator"]||g[o(C)]}},"37e8":function(s,d,l){var o=l("83ab"),g=l("9bf2"),_=l("825a"),I=l("df75");s.exports=o?Object.defineProperties:function(E,S){_(E);for(var k=I(S),D=k.length,N=0,U;D>N;)g.f(E,U=k[N++],S[U]);return E}},"3bbe":function(s,d,l){var o=l("861d");s.exports=function(g){if(!o(g)&&g!==null)throw TypeError("Can't set "+String(g)+" as a prototype");return g}},"3ca3":function(s,d,l){var o=l("6547").charAt,g=l("69f3"),_=l("7dd0"),I="String Iterator",C=g.set,E=g.getterFor(I);_(String,"String",function(S){C(this,{type:I,string:String(S),index:0})},function(){var k=E(this),D=k.string,N=k.index,U;return N>=D.length?{value:void 0,done:!0}:(U=o(D,N),k.index+=U.length,{value:U,done:!1})})},"3f8c":function(s,d){s.exports={}},4160:function(s,d,l){var o=l("23e7"),g=l("17c2");o({target:"Array",proto:!0,forced:[].forEach!=g},{forEach:g})},"428f":function(s,d,l){var o=l("da84");s.exports=o},"44ad":function(s,d,l){var o=l("d039"),g=l("c6b6"),_="".split;s.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(I){return g(I)=="String"?_.call(I,""):Object(I)}:Object},"44d2":function(s,d,l){var o=l("b622"),g=l("7c73"),_=l("9bf2"),I=o("unscopables"),C=Array.prototype;C[I]==null&&_.f(C,I,{configurable:!0,value:g(null)}),s.exports=function(E){C[I][E]=!0}},"44e7":function(s,d,l){var o=l("861d"),g=l("c6b6"),_=l("b622"),I=_("match");s.exports=function(C){var E;return o(C)&&((E=C[I])!==void 0?!!E:g(C)=="RegExp")}},4930:function(s,d,l){var o=l("d039");s.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},"4d64":function(s,d,l){var o=l("fc6a"),g=l("50c4"),_=l("23cb"),I=function(C){return function(E,S,k){var D=o(E),N=g(D.length),U=_(k,N),F;if(C&&S!=S){for(;N>U;)if(F=D[U++],F!=F)return!0}else for(;N>U;U++)if((C||U in D)&&D[U]===S)return C||U||0;return!C&&-1}};s.exports={includes:I(!0),indexOf:I(!1)}},"4de4":function(s,d,l){var o=l("23e7"),g=l("b727").filter,_=l("1dde"),I=l("ae40"),C=_("filter"),E=I("filter");o({target:"Array",proto:!0,forced:!C||!E},{filter:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,d,l){var o=l("0366"),g=l("7b0b"),_=l("9bdd"),I=l("e95a"),C=l("50c4"),E=l("8418"),S=l("35a1");s.exports=function(D){var N=g(D),U=typeof this=="function"?this:Array,F=arguments.length,j=F>1?arguments[1]:void 0,$=j!==void 0,K=S(N),tt=0,it,et,q,ut,Ct,ot;if($&&(j=o(j,F>2?arguments[2]:void 0,2)),K!=null&&!(U==Array&&I(K)))for(ut=K.call(N),Ct=ut.next,et=new U;!(q=Ct.call(ut)).done;tt++)ot=$?_(ut,j,[q.value,tt],!0):q.value,E(et,tt,ot);else for(it=C(N.length),et=new U(it);it>tt;tt++)ot=$?j(N[tt],tt):N[tt],E(et,tt,ot);return et.length=tt,et}},"4fad":function(s,d,l){var o=l("23e7"),g=l("6f53").entries;o({target:"Object",stat:!0},{entries:function(I){return g(I)}})},"50c4":function(s,d,l){var o=l("a691"),g=Math.min;s.exports=function(_){return _>0?g(o(_),9007199254740991):0}},5135:function(s,d){var l={}.hasOwnProperty;s.exports=function(o,g){return l.call(o,g)}},5319:function(s,d,l){var o=l("d784"),g=l("825a"),_=l("7b0b"),I=l("50c4"),C=l("a691"),E=l("1d80"),S=l("8aa5"),k=l("14c3"),D=Math.max,N=Math.min,U=Math.floor,F=/\$([$&'`]|\d\d?|<[^>]*>)/g,j=/\$([$&'`]|\d\d?)/g,$=function(K){return K===void 0?K:String(K)};o("replace",2,function(K,tt,it,et){var q=et.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,ut=et.REPLACE_KEEPS_$0,Ct=q?"$":"$0";return[function(X,Wt){var Vt=E(this),Bt=X==null?void 0:X[K];return Bt!==void 0?Bt.call(X,Vt,Wt):tt.call(String(Vt),X,Wt)},function(bt,X){if(!q&&ut||typeof X=="string"&&X.indexOf(Ct)===-1){var Wt=it(tt,bt,this,X);if(Wt.done)return Wt.value}var Vt=g(bt),Bt=String(this),ae=typeof X=="function";ae||(X=String(X));var ye=Vt.global;if(ye){var en=Vt.unicode;Vt.lastIndex=0}for(var Jt=[];;){var Gt=k(Vt,Bt);if(Gt===null||(Jt.push(Gt),!ye))break;var Re=String(Gt[0]);Re===""&&(Vt.lastIndex=S(Bt,I(Vt.lastIndex),en))}for(var $e="",Ce=0,nn=0;nn<Jt.length;nn++){Gt=Jt[nn];for(var be=String(Gt[0]),Me=D(N(C(Gt.index),Bt.length),0),xe=[],Be=1;Be<Gt.length;Be++)xe.push($(Gt[Be]));var Je=Gt.groups;if(ae){var Ln=[be].concat(xe,Me,Bt);Je!==void 0&&Ln.push(Je);var Tt=String(X.apply(void 0,Ln))}else Tt=ot(be,Bt,Me,xe,Je,X);Me>=Ce&&($e+=Bt.slice(Ce,Me)+Tt,Ce=Me+be.length)}return $e+Bt.slice(Ce)}];function ot(bt,X,Wt,Vt,Bt,ae){var ye=Wt+bt.length,en=Vt.length,Jt=j;return Bt!==void 0&&(Bt=_(Bt),Jt=F),tt.call(ae,Jt,function(Gt,Re){var $e;switch(Re.charAt(0)){case"$":return"$";case"&":return bt;case"`":return X.slice(0,Wt);case"'":return X.slice(ye);case"<":$e=Bt[Re.slice(1,-1)];break;default:var Ce=+Re;if(Ce===0)return Gt;if(Ce>en){var nn=U(Ce/10);return nn===0?Gt:nn<=en?Vt[nn-1]===void 0?Re.charAt(1):Vt[nn-1]+Re.charAt(1):Gt}$e=Vt[Ce-1]}return $e===void 0?"":$e})}})},5692:function(s,d,l){var o=l("c430"),g=l("c6cd");(s.exports=function(_,I){return g[_]||(g[_]=I!==void 0?I:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,d,l){var o=l("d066"),g=l("241c"),_=l("7418"),I=l("825a");s.exports=o("Reflect","ownKeys")||function(E){var S=g.f(I(E)),k=_.f;return k?S.concat(k(E)):S}},"5a34":function(s,d,l){var o=l("44e7");s.exports=function(g){if(o(g))throw TypeError("The method doesn't accept regular expressions");return g}},"5c6c":function(s,d){s.exports=function(l,o){return{enumerable:!(l&1),configurable:!(l&2),writable:!(l&4),value:o}}},"5db7":function(s,d,l){var o=l("23e7"),g=l("a2bf"),_=l("7b0b"),I=l("50c4"),C=l("1c0b"),E=l("65f0");o({target:"Array",proto:!0},{flatMap:function(k){var D=_(this),N=I(D.length),U;return C(k),U=E(D,0),U.length=g(U,D,D,N,0,1,k,arguments.length>1?arguments[1]:void 0),U}})},6547:function(s,d,l){var o=l("a691"),g=l("1d80"),_=function(I){return function(C,E){var S=String(g(C)),k=o(E),D=S.length,N,U;return k<0||k>=D?I?"":void 0:(N=S.charCodeAt(k),N<55296||N>56319||k+1===D||(U=S.charCodeAt(k+1))<56320||U>57343?I?S.charAt(k):N:I?S.slice(k,k+2):(N-55296<<10)+(U-56320)+65536)}};s.exports={codeAt:_(!1),charAt:_(!0)}},"65f0":function(s,d,l){var o=l("861d"),g=l("e8b5"),_=l("b622"),I=_("species");s.exports=function(C,E){var S;return g(C)&&(S=C.constructor,typeof S=="function"&&(S===Array||g(S.prototype))?S=void 0:o(S)&&(S=S[I],S===null&&(S=void 0))),new(S===void 0?Array:S)(E===0?0:E)}},"69f3":function(s,d,l){var o=l("7f9a"),g=l("da84"),_=l("861d"),I=l("9112"),C=l("5135"),E=l("f772"),S=l("d012"),k=g.WeakMap,D,N,U,F=function(q){return U(q)?N(q):D(q,{})},j=function(q){return function(ut){var Ct;if(!_(ut)||(Ct=N(ut)).type!==q)throw TypeError("Incompatible receiver, "+q+" required");return Ct}};if(o){var $=new k,K=$.get,tt=$.has,it=$.set;D=function(q,ut){return it.call($,q,ut),ut},N=function(q){return K.call($,q)||{}},U=function(q){return tt.call($,q)}}else{var et=E("state");S[et]=!0,D=function(q,ut){return I(q,et,ut),ut},N=function(q){return C(q,et)?q[et]:{}},U=function(q){return C(q,et)}}s.exports={set:D,get:N,has:U,enforce:F,getterFor:j}},"6eeb":function(s,d,l){var o=l("da84"),g=l("9112"),_=l("5135"),I=l("ce4e"),C=l("8925"),E=l("69f3"),S=E.get,k=E.enforce,D=String(String).split("String");(s.exports=function(N,U,F,j){var $=j?!!j.unsafe:!1,K=j?!!j.enumerable:!1,tt=j?!!j.noTargetGet:!1;if(typeof F=="function"&&(typeof U=="string"&&!_(F,"name")&&g(F,"name",U),k(F).source=D.join(typeof U=="string"?U:"")),N===o){K?N[U]=F:I(U,F);return}else $?!tt&&N[U]&&(K=!0):delete N[U];K?N[U]=F:g(N,U,F)})(Function.prototype,"toString",function(){return typeof this=="function"&&S(this).source||C(this)})},"6f53":function(s,d,l){var o=l("83ab"),g=l("df75"),_=l("fc6a"),I=l("d1e7").f,C=function(E){return function(S){for(var k=_(S),D=g(k),N=D.length,U=0,F=[],j;N>U;)j=D[U++],(!o||I.call(k,j))&&F.push(E?[j,k[j]]:k[j]);return F}};s.exports={entries:C(!0),values:C(!1)}},"73d9":function(s,d,l){var o=l("44d2");o("flatMap")},7418:function(s,d){d.f=Object.getOwnPropertySymbols},"746f":function(s,d,l){var o=l("428f"),g=l("5135"),_=l("e538"),I=l("9bf2").f;s.exports=function(C){var E=o.Symbol||(o.Symbol={});g(E,C)||I(E,C,{value:_.f(C)})}},7839:function(s,d){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,d,l){var o=l("1d80");s.exports=function(g){return Object(o(g))}},"7c73":function(s,d,l){var o=l("825a"),g=l("37e8"),_=l("7839"),I=l("d012"),C=l("1be4"),E=l("cc12"),S=l("f772"),k=">",D="<",N="prototype",U="script",F=S("IE_PROTO"),j=function(){},$=function(q){return D+U+k+q+D+"/"+U+k},K=function(q){q.write($("")),q.close();var ut=q.parentWindow.Object;return q=null,ut},tt=function(){var q=E("iframe"),ut="java"+U+":",Ct;return q.style.display="none",C.appendChild(q),q.src=String(ut),Ct=q.contentWindow.document,Ct.open(),Ct.write($("document.F=Object")),Ct.close(),Ct.F},it,et=function(){try{it=document.domain&&new ActiveXObject("htmlfile")}catch{}et=it?K(it):tt();for(var q=_.length;q--;)delete et[N][_[q]];return et()};I[F]=!0,s.exports=Object.create||function(ut,Ct){var ot;return ut!==null?(j[N]=o(ut),ot=new j,j[N]=null,ot[F]=ut):ot=et(),Ct===void 0?ot:g(ot,Ct)}},"7dd0":function(s,d,l){var o=l("23e7"),g=l("9ed3"),_=l("e163"),I=l("d2bb"),C=l("d44e"),E=l("9112"),S=l("6eeb"),k=l("b622"),D=l("c430"),N=l("3f8c"),U=l("ae93"),F=U.IteratorPrototype,j=U.BUGGY_SAFARI_ITERATORS,$=k("iterator"),K="keys",tt="values",it="entries",et=function(){return this};s.exports=function(q,ut,Ct,ot,bt,X,Wt){g(Ct,ut,ot);var Vt=function(nn){if(nn===bt&&Jt)return Jt;if(!j&&nn in ye)return ye[nn];switch(nn){case K:return function(){return new Ct(this,nn)};case tt:return function(){return new Ct(this,nn)};case it:return function(){return new Ct(this,nn)}}return function(){return new Ct(this)}},Bt=ut+" Iterator",ae=!1,ye=q.prototype,en=ye[$]||ye["@@iterator"]||bt&&ye[bt],Jt=!j&&en||Vt(bt),Gt=ut=="Array"&&ye.entries||en,Re,$e,Ce;if(Gt&&(Re=_(Gt.call(new q)),F!==Object.prototype&&Re.next&&(!D&&_(Re)!==F&&(I?I(Re,F):typeof Re[$]!="function"&&E(Re,$,et)),C(Re,Bt,!0,!0),D&&(N[Bt]=et))),bt==tt&&en&&en.name!==tt&&(ae=!0,Jt=function(){return en.call(this)}),(!D||Wt)&&ye[$]!==Jt&&E(ye,$,Jt),N[ut]=Jt,bt)if($e={values:Vt(tt),keys:X?Jt:Vt(K),entries:Vt(it)},Wt)for(Ce in $e)(j||ae||!(Ce in ye))&&S(ye,Ce,$e[Ce]);else o({target:ut,proto:!0,forced:j||ae},$e);return $e}},"7f9a":function(s,d,l){var o=l("da84"),g=l("8925"),_=o.WeakMap;s.exports=typeof _=="function"&&/native code/.test(g(_))},"825a":function(s,d,l){var o=l("861d");s.exports=function(g){if(!o(g))throw TypeError(String(g)+" is not an object");return g}},"83ab":function(s,d,l){var o=l("d039");s.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,d,l){var o=l("c04e"),g=l("9bf2"),_=l("5c6c");s.exports=function(I,C,E){var S=o(C);S in I?g.f(I,S,_(0,E)):I[S]=E}},"861d":function(s,d){s.exports=function(l){return typeof l=="object"?l!==null:typeof l=="function"}},8875:function(s,d,l){var o,g,_;(function(I,C){g=[],o=C,_=typeof o=="function"?o.apply(d,g):o,_!==void 0&&(s.exports=_)})(typeof self<"u"?self:this,function(){function I(){var C=Object.getOwnPropertyDescriptor(document,"currentScript");if(!C&&"currentScript"in document&&document.currentScript||C&&C.get!==I&&document.currentScript)return document.currentScript;try{throw new Error}catch(it){var E=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,S=/@([^@]*):(\d+):(\d+)\s*$/ig,k=E.exec(it.stack)||S.exec(it.stack),D=k&&k[1]||!1,N=k&&k[2]||!1,U=document.location.href.replace(document.location.hash,""),F,j,$,K=document.getElementsByTagName("script");D===U&&(F=document.documentElement.outerHTML,j=new RegExp("(?:[^\\n]+?\\n){0,"+(N-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),$=F.replace(j,"$1").trim());for(var tt=0;tt<K.length;tt++)if(K[tt].readyState==="interactive"||K[tt].src===D||D===U&&K[tt].innerHTML&&K[tt].innerHTML.trim()===$)return K[tt];return null}}return I})},8925:function(s,d,l){var o=l("c6cd"),g=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(_){return g.call(_)}),s.exports=o.inspectSource},"8aa5":function(s,d,l){var o=l("6547").charAt;s.exports=function(g,_,I){return _+(I?o(g,_).length:1)}},"8bbf":function(s,d){s.exports=n},"90e3":function(s,d){var l=0,o=Math.random();s.exports=function(g){return"Symbol("+String(g===void 0?"":g)+")_"+(++l+o).toString(36)}},9112:function(s,d,l){var o=l("83ab"),g=l("9bf2"),_=l("5c6c");s.exports=o?function(I,C,E){return g.f(I,C,_(1,E))}:function(I,C,E){return I[C]=E,I}},9263:function(s,d,l){var o=l("ad6d"),g=l("9f7f"),_=RegExp.prototype.exec,I=String.prototype.replace,C=_,E=function(){var N=/a/,U=/b*/g;return _.call(N,"a"),_.call(U,"a"),N.lastIndex!==0||U.lastIndex!==0}(),S=g.UNSUPPORTED_Y||g.BROKEN_CARET,k=/()??/.exec("")[1]!==void 0,D=E||k||S;D&&(C=function(U){var F=this,j,$,K,tt,it=S&&F.sticky,et=o.call(F),q=F.source,ut=0,Ct=U;return it&&(et=et.replace("y",""),et.indexOf("g")===-1&&(et+="g"),Ct=String(U).slice(F.lastIndex),F.lastIndex>0&&(!F.multiline||F.multiline&&U[F.lastIndex-1]!==`
`)&&(q="(?: "+q+")",Ct=" "+Ct,ut++),$=new RegExp("^(?:"+q+")",et)),k&&($=new RegExp("^"+q+"$(?!\\s)",et)),E&&(j=F.lastIndex),K=_.call(it?$:F,Ct),it?K?(K.input=K.input.slice(ut),K[0]=K[0].slice(ut),K.index=F.lastIndex,F.lastIndex+=K[0].length):F.lastIndex=0:E&&K&&(F.lastIndex=F.global?K.index+K[0].length:j),k&&K&&K.length>1&&I.call(K[0],$,function(){for(tt=1;tt<arguments.length-2;tt++)arguments[tt]===void 0&&(K[tt]=void 0)}),K}),s.exports=C},"94ca":function(s,d,l){var o=l("d039"),g=/#|\.prototype\./,_=function(k,D){var N=C[I(k)];return N==S?!0:N==E?!1:typeof D=="function"?o(D):!!D},I=_.normalize=function(k){return String(k).replace(g,".").toLowerCase()},C=_.data={},E=_.NATIVE="N",S=_.POLYFILL="P";s.exports=_},"99af":function(s,d,l){var o=l("23e7"),g=l("d039"),_=l("e8b5"),I=l("861d"),C=l("7b0b"),E=l("50c4"),S=l("8418"),k=l("65f0"),D=l("1dde"),N=l("b622"),U=l("2d00"),F=N("isConcatSpreadable"),j=9007199254740991,$="Maximum allowed index exceeded",K=U>=51||!g(function(){var q=[];return q[F]=!1,q.concat()[0]!==q}),tt=D("concat"),it=function(q){if(!I(q))return!1;var ut=q[F];return ut!==void 0?!!ut:_(q)},et=!K||!tt;o({target:"Array",proto:!0,forced:et},{concat:function(ut){var Ct=C(this),ot=k(Ct,0),bt=0,X,Wt,Vt,Bt,ae;for(X=-1,Vt=arguments.length;X<Vt;X++)if(ae=X===-1?Ct:arguments[X],it(ae)){if(Bt=E(ae.length),bt+Bt>j)throw TypeError($);for(Wt=0;Wt<Bt;Wt++,bt++)Wt in ae&&S(ot,bt,ae[Wt])}else{if(bt>=j)throw TypeError($);S(ot,bt++,ae)}return ot.length=bt,ot}})},"9bdd":function(s,d,l){var o=l("825a");s.exports=function(g,_,I,C){try{return C?_(o(I)[0],I[1]):_(I)}catch(S){var E=g.return;throw E!==void 0&&o(E.call(g)),S}}},"9bf2":function(s,d,l){var o=l("83ab"),g=l("0cfb"),_=l("825a"),I=l("c04e"),C=Object.defineProperty;d.f=o?C:function(S,k,D){if(_(S),k=I(k,!0),_(D),g)try{return C(S,k,D)}catch{}if("get"in D||"set"in D)throw TypeError("Accessors not supported");return"value"in D&&(S[k]=D.value),S}},"9ed3":function(s,d,l){var o=l("ae93").IteratorPrototype,g=l("7c73"),_=l("5c6c"),I=l("d44e"),C=l("3f8c"),E=function(){return this};s.exports=function(S,k,D){var N=k+" Iterator";return S.prototype=g(o,{next:_(1,D)}),I(S,N,!1,!0),C[N]=E,S}},"9f7f":function(s,d,l){var o=l("d039");function g(_,I){return RegExp(_,I)}d.UNSUPPORTED_Y=o(function(){var _=g("a","y");return _.lastIndex=2,_.exec("abcd")!=null}),d.BROKEN_CARET=o(function(){var _=g("^r","gy");return _.lastIndex=2,_.exec("str")!=null})},a2bf:function(s,d,l){var o=l("e8b5"),g=l("50c4"),_=l("0366"),I=function(C,E,S,k,D,N,U,F){for(var j=D,$=0,K=U?_(U,F,3):!1,tt;$<k;){if($ in S){if(tt=K?K(S[$],$,E):S[$],N>0&&o(tt))j=I(C,E,tt,g(tt.length),j,N-1)-1;else{if(j>=9007199254740991)throw TypeError("Exceed the acceptable array length");C[j]=tt}j++}$++}return j};s.exports=I},a352:function(s,d){s.exports=a},a434:function(s,d,l){var o=l("23e7"),g=l("23cb"),_=l("a691"),I=l("50c4"),C=l("7b0b"),E=l("65f0"),S=l("8418"),k=l("1dde"),D=l("ae40"),N=k("splice"),U=D("splice",{ACCESSORS:!0,0:0,1:2}),F=Math.max,j=Math.min,$=9007199254740991,K="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!N||!U},{splice:function(it,et){var q=C(this),ut=I(q.length),Ct=g(it,ut),ot=arguments.length,bt,X,Wt,Vt,Bt,ae;if(ot===0?bt=X=0:ot===1?(bt=0,X=ut-Ct):(bt=ot-2,X=j(F(_(et),0),ut-Ct)),ut+bt-X>$)throw TypeError(K);for(Wt=E(q,X),Vt=0;Vt<X;Vt++)Bt=Ct+Vt,Bt in q&&S(Wt,Vt,q[Bt]);if(Wt.length=X,bt<X){for(Vt=Ct;Vt<ut-X;Vt++)Bt=Vt+X,ae=Vt+bt,Bt in q?q[ae]=q[Bt]:delete q[ae];for(Vt=ut;Vt>ut-X+bt;Vt--)delete q[Vt-1]}else if(bt>X)for(Vt=ut-X;Vt>Ct;Vt--)Bt=Vt+X-1,ae=Vt+bt-1,Bt in q?q[ae]=q[Bt]:delete q[ae];for(Vt=0;Vt<bt;Vt++)q[Vt+Ct]=arguments[Vt+2];return q.length=ut-X+bt,Wt}})},a4d3:function(s,d,l){var o=l("23e7"),g=l("da84"),_=l("d066"),I=l("c430"),C=l("83ab"),E=l("4930"),S=l("fdbf"),k=l("d039"),D=l("5135"),N=l("e8b5"),U=l("861d"),F=l("825a"),j=l("7b0b"),$=l("fc6a"),K=l("c04e"),tt=l("5c6c"),it=l("7c73"),et=l("df75"),q=l("241c"),ut=l("057f"),Ct=l("7418"),ot=l("06cf"),bt=l("9bf2"),X=l("d1e7"),Wt=l("9112"),Vt=l("6eeb"),Bt=l("5692"),ae=l("f772"),ye=l("d012"),en=l("90e3"),Jt=l("b622"),Gt=l("e538"),Re=l("746f"),$e=l("d44e"),Ce=l("69f3"),nn=l("b727").forEach,be=ae("hidden"),Me="Symbol",xe="prototype",Be=Jt("toPrimitive"),Je=Ce.set,Ln=Ce.getterFor(Me),Tt=Object[xe],H=g.Symbol,Rt=_("JSON","stringify"),Pt=ot.f,gt=bt.f,yt=ut.f,jt=X.f,ee=Bt("symbols"),ue=Bt("op-symbols"),Ut=Bt("string-to-symbol-registry"),Ie=Bt("symbol-to-string-registry"),je=Bt("wks"),Le=g.QObject,Ke=!Le||!Le[xe]||!Le[xe].findChild,_n=C&&k(function(){return it(gt({},"a",{get:function(){return gt(this,"a",{value:7}).a}})).a!=7})?function(wt,kt,vt){var ie=Pt(Tt,kt);ie&&delete Tt[kt],gt(wt,kt,vt),ie&&wt!==Tt&&gt(Tt,kt,ie)}:gt,wn=function(wt,kt){var vt=ee[wt]=it(H[xe]);return Je(vt,{type:Me,tag:wt,description:kt}),C||(vt.description=kt),vt},de=S?function(wt){return typeof wt=="symbol"}:function(wt){return Object(wt)instanceof H},ve=function(kt,vt,ie){kt===Tt&&ve(ue,vt,ie),F(kt);var he=K(vt,!0);return F(ie),D(ee,he)?(ie.enumerable?(D(kt,be)&&kt[be][he]&&(kt[be][he]=!1),ie=it(ie,{enumerable:tt(0,!1)})):(D(kt,be)||gt(kt,be,tt(1,{})),kt[be][he]=!0),_n(kt,he,ie)):gt(kt,he,ie)},Te=function(kt,vt){F(kt);var ie=$(vt),he=et(ie).concat(ht(ie));return nn(he,function(Kt){(!C||un.call(ie,Kt))&&ve(kt,Kt,ie[Kt])}),kt},Ye=function(kt,vt){return vt===void 0?it(kt):Te(it(kt),vt)},un=function(kt){var vt=K(kt,!0),ie=jt.call(this,vt);return this===Tt&&D(ee,vt)&&!D(ue,vt)?!1:ie||!D(this,vt)||!D(ee,vt)||D(this,be)&&this[be][vt]?ie:!0},Nn=function(kt,vt){var ie=$(kt),he=K(vt,!0);if(!(ie===Tt&&D(ee,he)&&!D(ue,he))){var Kt=Pt(ie,he);return Kt&&D(ee,he)&&!(D(ie,be)&&ie[be][he])&&(Kt.enumerable=!0),Kt}},oe=function(kt){var vt=yt($(kt)),ie=[];return nn(vt,function(he){!D(ee,he)&&!D(ye,he)&&ie.push(he)}),ie},ht=function(kt){var vt=kt===Tt,ie=yt(vt?ue:$(kt)),he=[];return nn(ie,function(Kt){D(ee,Kt)&&(!vt||D(Tt,Kt))&&he.push(ee[Kt])}),he};if(E||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var kt=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),vt=en(kt),ie=function(he){this===Tt&&ie.call(ue,he),D(this,be)&&D(this[be],vt)&&(this[be][vt]=!1),_n(this,vt,tt(1,he))};return C&&Ke&&_n(Tt,vt,{configurable:!0,set:ie}),wn(vt,kt)},Vt(H[xe],"toString",function(){return Ln(this).tag}),Vt(H,"withoutSetter",function(wt){return wn(en(wt),wt)}),X.f=un,bt.f=ve,ot.f=Nn,q.f=ut.f=oe,Ct.f=ht,Gt.f=function(wt){return wn(Jt(wt),wt)},C&&(gt(H[xe],"description",{configurable:!0,get:function(){return Ln(this).description}}),I||Vt(Tt,"propertyIsEnumerable",un,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!E,sham:!E},{Symbol:H}),nn(et(je),function(wt){Re(wt)}),o({target:Me,stat:!0,forced:!E},{for:function(wt){var kt=String(wt);if(D(Ut,kt))return Ut[kt];var vt=H(kt);return Ut[kt]=vt,Ie[vt]=kt,vt},keyFor:function(kt){if(!de(kt))throw TypeError(kt+" is not a symbol");if(D(Ie,kt))return Ie[kt]},useSetter:function(){Ke=!0},useSimple:function(){Ke=!1}}),o({target:"Object",stat:!0,forced:!E,sham:!C},{create:Ye,defineProperty:ve,defineProperties:Te,getOwnPropertyDescriptor:Nn}),o({target:"Object",stat:!0,forced:!E},{getOwnPropertyNames:oe,getOwnPropertySymbols:ht}),o({target:"Object",stat:!0,forced:k(function(){Ct.f(1)})},{getOwnPropertySymbols:function(kt){return Ct.f(j(kt))}}),Rt){var mt=!E||k(function(){var wt=H();return Rt([wt])!="[null]"||Rt({a:wt})!="{}"||Rt(Object(wt))!="{}"});o({target:"JSON",stat:!0,forced:mt},{stringify:function(kt,vt,ie){for(var he=[kt],Kt=1,Fe;arguments.length>Kt;)he.push(arguments[Kt++]);if(Fe=vt,!(!U(vt)&&kt===void 0||de(kt)))return N(vt)||(vt=function(Ve,we){if(typeof Fe=="function"&&(we=Fe.call(this,Ve,we)),!de(we))return we}),he[1]=vt,Rt.apply(null,he)}})}H[xe][Be]||Wt(H[xe],Be,H[xe].valueOf),$e(H,Me),ye[be]=!0},a630:function(s,d,l){var o=l("23e7"),g=l("4df4"),_=l("1c7e"),I=!_(function(C){Array.from(C)});o({target:"Array",stat:!0,forced:I},{from:g})},a640:function(s,d,l){var o=l("d039");s.exports=function(g,_){var I=[][g];return!!I&&o(function(){I.call(null,_||function(){throw 1},1)})}},a691:function(s,d){var l=Math.ceil,o=Math.floor;s.exports=function(g){return isNaN(g=+g)?0:(g>0?o:l)(g)}},ab13:function(s,d,l){var o=l("b622"),g=o("match");s.exports=function(_){var I=/./;try{"/./"[_](I)}catch{try{return I[g]=!1,"/./"[_](I)}catch{}}return!1}},ac1f:function(s,d,l){var o=l("23e7"),g=l("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==g},{exec:g})},ad6d:function(s,d,l){var o=l("825a");s.exports=function(){var g=o(this),_="";return g.global&&(_+="g"),g.ignoreCase&&(_+="i"),g.multiline&&(_+="m"),g.dotAll&&(_+="s"),g.unicode&&(_+="u"),g.sticky&&(_+="y"),_}},ae40:function(s,d,l){var o=l("83ab"),g=l("d039"),_=l("5135"),I=Object.defineProperty,C={},E=function(S){throw S};s.exports=function(S,k){if(_(C,S))return C[S];k||(k={});var D=[][S],N=_(k,"ACCESSORS")?k.ACCESSORS:!1,U=_(k,0)?k[0]:E,F=_(k,1)?k[1]:void 0;return C[S]=!!D&&!g(function(){if(N&&!o)return!0;var j={length:-1};N?I(j,1,{enumerable:!0,get:E}):j[1]=1,D.call(j,U,F)})}},ae93:function(s,d,l){var o=l("e163"),g=l("9112"),_=l("5135"),I=l("b622"),C=l("c430"),E=I("iterator"),S=!1,k=function(){return this},D,N,U;[].keys&&(U=[].keys(),"next"in U?(N=o(o(U)),N!==Object.prototype&&(D=N)):S=!0),D==null&&(D={}),!C&&!_(D,E)&&g(D,E,k),s.exports={IteratorPrototype:D,BUGGY_SAFARI_ITERATORS:S}},b041:function(s,d,l){var o=l("00ee"),g=l("f5df");s.exports=o?{}.toString:function(){return"[object "+g(this)+"]"}},b0c0:function(s,d,l){var o=l("83ab"),g=l("9bf2").f,_=Function.prototype,I=_.toString,C=/^\s*function ([^ (]*)/,E="name";o&&!(E in _)&&g(_,E,{configurable:!0,get:function(){try{return I.call(this).match(C)[1]}catch{return""}}})},b622:function(s,d,l){var o=l("da84"),g=l("5692"),_=l("5135"),I=l("90e3"),C=l("4930"),E=l("fdbf"),S=g("wks"),k=o.Symbol,D=E?k:k&&k.withoutSetter||I;s.exports=function(N){return _(S,N)||(C&&_(k,N)?S[N]=k[N]:S[N]=D("Symbol."+N)),S[N]}},b64b:function(s,d,l){var o=l("23e7"),g=l("7b0b"),_=l("df75"),I=l("d039"),C=I(function(){_(1)});o({target:"Object",stat:!0,forced:C},{keys:function(S){return _(g(S))}})},b727:function(s,d,l){var o=l("0366"),g=l("44ad"),_=l("7b0b"),I=l("50c4"),C=l("65f0"),E=[].push,S=function(k){var D=k==1,N=k==2,U=k==3,F=k==4,j=k==6,$=k==5||j;return function(K,tt,it,et){for(var q=_(K),ut=g(q),Ct=o(tt,it,3),ot=I(ut.length),bt=0,X=et||C,Wt=D?X(K,ot):N?X(K,0):void 0,Vt,Bt;ot>bt;bt++)if(($||bt in ut)&&(Vt=ut[bt],Bt=Ct(Vt,bt,q),k)){if(D)Wt[bt]=Bt;else if(Bt)switch(k){case 3:return!0;case 5:return Vt;case 6:return bt;case 2:E.call(Wt,Vt)}else if(F)return!1}return j?-1:U||F?F:Wt}};s.exports={forEach:S(0),map:S(1),filter:S(2),some:S(3),every:S(4),find:S(5),findIndex:S(6)}},c04e:function(s,d,l){var o=l("861d");s.exports=function(g,_){if(!o(g))return g;var I,C;if(_&&typeof(I=g.toString)=="function"&&!o(C=I.call(g))||typeof(I=g.valueOf)=="function"&&!o(C=I.call(g))||!_&&typeof(I=g.toString)=="function"&&!o(C=I.call(g)))return C;throw TypeError("Can't convert object to primitive value")}},c430:function(s,d){s.exports=!1},c6b6:function(s,d){var l={}.toString;s.exports=function(o){return l.call(o).slice(8,-1)}},c6cd:function(s,d,l){var o=l("da84"),g=l("ce4e"),_="__core-js_shared__",I=o[_]||g(_,{});s.exports=I},c740:function(s,d,l){var o=l("23e7"),g=l("b727").findIndex,_=l("44d2"),I=l("ae40"),C="findIndex",E=!0,S=I(C);C in[]&&Array(1)[C](function(){E=!1}),o({target:"Array",proto:!0,forced:E||!S},{findIndex:function(D){return g(this,D,arguments.length>1?arguments[1]:void 0)}}),_(C)},c8ba:function(s,d){var l;l=function(){return this}();try{l=l||new Function("return this")()}catch{typeof window=="object"&&(l=window)}s.exports=l},c975:function(s,d,l){var o=l("23e7"),g=l("4d64").indexOf,_=l("a640"),I=l("ae40"),C=[].indexOf,E=!!C&&1/[1].indexOf(1,-0)<0,S=_("indexOf"),k=I("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:E||!S||!k},{indexOf:function(N){return E?C.apply(this,arguments)||0:g(this,N,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,d,l){var o=l("5135"),g=l("fc6a"),_=l("4d64").indexOf,I=l("d012");s.exports=function(C,E){var S=g(C),k=0,D=[],N;for(N in S)!o(I,N)&&o(S,N)&&D.push(N);for(;E.length>k;)o(S,N=E[k++])&&(~_(D,N)||D.push(N));return D}},caad:function(s,d,l){var o=l("23e7"),g=l("4d64").includes,_=l("44d2"),I=l("ae40"),C=I("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!C},{includes:function(S){return g(this,S,arguments.length>1?arguments[1]:void 0)}}),_("includes")},cc12:function(s,d,l){var o=l("da84"),g=l("861d"),_=o.document,I=g(_)&&g(_.createElement);s.exports=function(C){return I?_.createElement(C):{}}},ce4e:function(s,d,l){var o=l("da84"),g=l("9112");s.exports=function(_,I){try{g(o,_,I)}catch{o[_]=I}return I}},d012:function(s,d){s.exports={}},d039:function(s,d){s.exports=function(l){try{return!!l()}catch{return!0}}},d066:function(s,d,l){var o=l("428f"),g=l("da84"),_=function(I){return typeof I=="function"?I:void 0};s.exports=function(I,C){return arguments.length<2?_(o[I])||_(g[I]):o[I]&&o[I][C]||g[I]&&g[I][C]}},d1e7:function(s,d,l){var o={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,_=g&&!o.call({1:2},1);d.f=_?function(C){var E=g(this,C);return!!E&&E.enumerable}:o},d28b:function(s,d,l){var o=l("746f");o("iterator")},d2bb:function(s,d,l){var o=l("825a"),g=l("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var _=!1,I={},C;try{C=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,C.call(I,[]),_=I instanceof Array}catch{}return function(S,k){return o(S),g(k),_?C.call(S,k):S.__proto__=k,S}}():void 0)},d3b7:function(s,d,l){var o=l("00ee"),g=l("6eeb"),_=l("b041");o||g(Object.prototype,"toString",_,{unsafe:!0})},d44e:function(s,d,l){var o=l("9bf2").f,g=l("5135"),_=l("b622"),I=_("toStringTag");s.exports=function(C,E,S){C&&!g(C=S?C:C.prototype,I)&&o(C,I,{configurable:!0,value:E})}},d58f:function(s,d,l){var o=l("1c0b"),g=l("7b0b"),_=l("44ad"),I=l("50c4"),C=function(E){return function(S,k,D,N){o(k);var U=g(S),F=_(U),j=I(U.length),$=E?j-1:0,K=E?-1:1;if(D<2)for(;;){if($ in F){N=F[$],$+=K;break}if($+=K,E?$<0:j<=$)throw TypeError("Reduce of empty array with no initial value")}for(;E?$>=0:j>$;$+=K)$ in F&&(N=k(N,F[$],$,U));return N}};s.exports={left:C(!1),right:C(!0)}},d784:function(s,d,l){l("ac1f");var o=l("6eeb"),g=l("d039"),_=l("b622"),I=l("9263"),C=l("9112"),E=_("species"),S=!g(function(){var F=/./;return F.exec=function(){var j=[];return j.groups={a:"7"},j},"".replace(F,"$<a>")!=="7"}),k=function(){return"a".replace(/./,"$0")==="$0"}(),D=_("replace"),N=function(){return/./[D]?/./[D]("a","$0")==="":!1}(),U=!g(function(){var F=/(?:)/,j=F.exec;F.exec=function(){return j.apply(this,arguments)};var $="ab".split(F);return $.length!==2||$[0]!=="a"||$[1]!=="b"});s.exports=function(F,j,$,K){var tt=_(F),it=!g(function(){var bt={};return bt[tt]=function(){return 7},""[F](bt)!=7}),et=it&&!g(function(){var bt=!1,X=/a/;return F==="split"&&(X={},X.constructor={},X.constructor[E]=function(){return X},X.flags="",X[tt]=/./[tt]),X.exec=function(){return bt=!0,null},X[tt](""),!bt});if(!it||!et||F==="replace"&&!(S&&k&&!N)||F==="split"&&!U){var q=/./[tt],ut=$(tt,""[F],function(bt,X,Wt,Vt,Bt){return X.exec===I?it&&!Bt?{done:!0,value:q.call(X,Wt,Vt)}:{done:!0,value:bt.call(Wt,X,Vt)}:{done:!1}},{REPLACE_KEEPS_$0:k,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:N}),Ct=ut[0],ot=ut[1];o(String.prototype,F,Ct),o(RegExp.prototype,tt,j==2?function(bt,X){return ot.call(bt,this,X)}:function(bt){return ot.call(bt,this)})}K&&C(RegExp.prototype[tt],"sham",!0)}},d81d:function(s,d,l){var o=l("23e7"),g=l("b727").map,_=l("1dde"),I=l("ae40"),C=_("map"),E=I("map");o({target:"Array",proto:!0,forced:!C||!E},{map:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,d,l){(function(o){var g=function(_){return _&&_.Math==Math&&_};s.exports=g(typeof globalThis=="object"&&globalThis)||g(typeof window=="object"&&window)||g(typeof self=="object"&&self)||g(typeof o=="object"&&o)||Function("return this")()}).call(this,l("c8ba"))},dbb4:function(s,d,l){var o=l("23e7"),g=l("83ab"),_=l("56ef"),I=l("fc6a"),C=l("06cf"),E=l("8418");o({target:"Object",stat:!0,sham:!g},{getOwnPropertyDescriptors:function(k){for(var D=I(k),N=C.f,U=_(D),F={},j=0,$,K;U.length>j;)K=N(D,$=U[j++]),K!==void 0&&E(F,$,K);return F}})},dbf1:function(s,d,l){(function(o){l.d(d,"a",function(){return _});function g(){return typeof window<"u"?window.console:o.console}var _=g()}).call(this,l("c8ba"))},ddb0:function(s,d,l){var o=l("da84"),g=l("fdbc"),_=l("e260"),I=l("9112"),C=l("b622"),E=C("iterator"),S=C("toStringTag"),k=_.values;for(var D in g){var N=o[D],U=N&&N.prototype;if(U){if(U[E]!==k)try{I(U,E,k)}catch{U[E]=k}if(U[S]||I(U,S,D),g[D]){for(var F in _)if(U[F]!==_[F])try{I(U,F,_[F])}catch{U[F]=_[F]}}}}},df75:function(s,d,l){var o=l("ca84"),g=l("7839");s.exports=Object.keys||function(I){return o(I,g)}},e01a:function(s,d,l){var o=l("23e7"),g=l("83ab"),_=l("da84"),I=l("5135"),C=l("861d"),E=l("9bf2").f,S=l("e893"),k=_.Symbol;if(g&&typeof k=="function"&&(!("description"in k.prototype)||k().description!==void 0)){var D={},N=function(){var tt=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),it=this instanceof N?new k(tt):tt===void 0?k():k(tt);return tt===""&&(D[it]=!0),it};S(N,k);var U=N.prototype=k.prototype;U.constructor=N;var F=U.toString,j=String(k("test"))=="Symbol(test)",$=/^Symbol\((.*)\)[^)]+$/;E(U,"description",{configurable:!0,get:function(){var tt=C(this)?this.valueOf():this,it=F.call(tt);if(I(D,tt))return"";var et=j?it.slice(7,-1):it.replace($,"$1");return et===""?void 0:et}}),o({global:!0,forced:!0},{Symbol:N})}},e163:function(s,d,l){var o=l("5135"),g=l("7b0b"),_=l("f772"),I=l("e177"),C=_("IE_PROTO"),E=Object.prototype;s.exports=I?Object.getPrototypeOf:function(S){return S=g(S),o(S,C)?S[C]:typeof S.constructor=="function"&&S instanceof S.constructor?S.constructor.prototype:S instanceof Object?E:null}},e177:function(s,d,l){var o=l("d039");s.exports=!o(function(){function g(){}return g.prototype.constructor=null,Object.getPrototypeOf(new g)!==g.prototype})},e260:function(s,d,l){var o=l("fc6a"),g=l("44d2"),_=l("3f8c"),I=l("69f3"),C=l("7dd0"),E="Array Iterator",S=I.set,k=I.getterFor(E);s.exports=C(Array,"Array",function(D,N){S(this,{type:E,target:o(D),index:0,kind:N})},function(){var D=k(this),N=D.target,U=D.kind,F=D.index++;return!N||F>=N.length?(D.target=void 0,{value:void 0,done:!0}):U=="keys"?{value:F,done:!1}:U=="values"?{value:N[F],done:!1}:{value:[F,N[F]],done:!1}},"values"),_.Arguments=_.Array,g("keys"),g("values"),g("entries")},e439:function(s,d,l){var o=l("23e7"),g=l("d039"),_=l("fc6a"),I=l("06cf").f,C=l("83ab"),E=g(function(){I(1)}),S=!C||E;o({target:"Object",stat:!0,forced:S,sham:!C},{getOwnPropertyDescriptor:function(D,N){return I(_(D),N)}})},e538:function(s,d,l){var o=l("b622");d.f=o},e893:function(s,d,l){var o=l("5135"),g=l("56ef"),_=l("06cf"),I=l("9bf2");s.exports=function(C,E){for(var S=g(E),k=I.f,D=_.f,N=0;N<S.length;N++){var U=S[N];o(C,U)||k(C,U,D(E,U))}}},e8b5:function(s,d,l){var o=l("c6b6");s.exports=Array.isArray||function(_){return o(_)=="Array"}},e95a:function(s,d,l){var o=l("b622"),g=l("3f8c"),_=o("iterator"),I=Array.prototype;s.exports=function(C){return C!==void 0&&(g.Array===C||I[_]===C)}},f5df:function(s,d,l){var o=l("00ee"),g=l("c6b6"),_=l("b622"),I=_("toStringTag"),C=g(function(){return arguments}())=="Arguments",E=function(S,k){try{return S[k]}catch{}};s.exports=o?g:function(S){var k,D,N;return S===void 0?"Undefined":S===null?"Null":typeof(D=E(k=Object(S),I))=="string"?D:C?g(k):(N=g(k))=="Object"&&typeof k.callee=="function"?"Arguments":N}},f772:function(s,d,l){var o=l("5692"),g=l("90e3"),_=o("keys");s.exports=function(I){return _[I]||(_[I]=g(I))}},fb15:function(s,d,l){if(l.r(d),typeof window<"u"){var o=window.document.currentScript;{var g=l("8875");o=g(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:g})}var _=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);_&&(l.p=_[1])}l("99af"),l("4de4"),l("4160"),l("c975"),l("d81d"),l("a434"),l("159b"),l("a4d3"),l("e439"),l("dbb4"),l("b64b");function I(de,ve,Te){return ve in de?Object.defineProperty(de,ve,{value:Te,enumerable:!0,configurable:!0,writable:!0}):de[ve]=Te,de}function C(de,ve){var Te=Object.keys(de);if(Object.getOwnPropertySymbols){var Ye=Object.getOwnPropertySymbols(de);ve&&(Ye=Ye.filter(function(un){return Object.getOwnPropertyDescriptor(de,un).enumerable})),Te.push.apply(Te,Ye)}return Te}function E(de){for(var ve=1;ve<arguments.length;ve++){var Te=arguments[ve]!=null?arguments[ve]:{};ve%2?C(Object(Te),!0).forEach(function(Ye){I(de,Ye,Te[Ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(Te)):C(Object(Te)).forEach(function(Ye){Object.defineProperty(de,Ye,Object.getOwnPropertyDescriptor(Te,Ye))})}return de}function S(de){if(Array.isArray(de))return de}l("e01a"),l("d28b"),l("e260"),l("d3b7"),l("3ca3"),l("ddb0");function k(de,ve){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(de)))){var Te=[],Ye=!0,un=!1,Nn=void 0;try{for(var oe=de[Symbol.iterator](),ht;!(Ye=(ht=oe.next()).done)&&(Te.push(ht.value),!(ve&&Te.length===ve));Ye=!0);}catch(mt){un=!0,Nn=mt}finally{try{!Ye&&oe.return!=null&&oe.return()}finally{if(un)throw Nn}}return Te}}l("a630"),l("fb6a"),l("b0c0"),l("25f0");function D(de,ve){(ve==null||ve>de.length)&&(ve=de.length);for(var Te=0,Ye=new Array(ve);Te<ve;Te++)Ye[Te]=de[Te];return Ye}function N(de,ve){if(de){if(typeof de=="string")return D(de,ve);var Te=Object.prototype.toString.call(de).slice(8,-1);if(Te==="Object"&&de.constructor&&(Te=de.constructor.name),Te==="Map"||Te==="Set")return Array.from(de);if(Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return D(de,ve)}}function U(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(de,ve){return S(de)||k(de,ve)||N(de,ve)||U()}function j(de){if(Array.isArray(de))return D(de)}function $(de){if(typeof Symbol<"u"&&Symbol.iterator in Object(de))return Array.from(de)}function K(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tt(de){return j(de)||$(de)||N(de)||K()}var it=l("a352"),et=l.n(it);function q(de){de.parentElement!==null&&de.parentElement.removeChild(de)}function ut(de,ve,Te){var Ye=Te===0?de.children[0]:de.children[Te-1].nextSibling;de.insertBefore(ve,Ye)}var Ct=l("dbf1");l("13d5"),l("4fad"),l("ac1f"),l("5319");function ot(de){var ve=Object.create(null);return function(Ye){var un=ve[Ye];return un||(ve[Ye]=de(Ye))}}var bt=/-(\w)/g,X=ot(function(de){return de.replace(bt,function(ve,Te){return Te.toUpperCase()})});l("5db7"),l("73d9");var Wt=["Start","Add","Remove","Update","End"],Vt=["Choose","Unchoose","Sort","Filter","Clone"],Bt=["Move"],ae=[Bt,Wt,Vt].flatMap(function(de){return de}).map(function(de){return"on".concat(de)}),ye={manage:Bt,manageAndEmit:Wt,emit:Vt};function en(de){return ae.indexOf(de)!==-1}l("caad"),l("2ca0");var Jt=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Gt(de){return Jt.includes(de)}function Re(de){return["transition-group","TransitionGroup"].includes(de)}function $e(de){return["id","class","role","style"].includes(de)||de.startsWith("data-")||de.startsWith("aria-")||de.startsWith("on")}function Ce(de){return de.reduce(function(ve,Te){var Ye=F(Te,2),un=Ye[0],Nn=Ye[1];return ve[un]=Nn,ve},{})}function nn(de){var ve=de.$attrs,Te=de.componentData,Ye=Te===void 0?{}:Te,un=Ce(Object.entries(ve).filter(function(Nn){var oe=F(Nn,2),ht=oe[0];return oe[1],$e(ht)}));return E(E({},un),Ye)}function be(de){var ve=de.$attrs,Te=de.callBackBuilder,Ye=Ce(Me(ve));Object.entries(Te).forEach(function(Nn){var oe=F(Nn,2),ht=oe[0],mt=oe[1];ye[ht].forEach(function(wt){Ye["on".concat(wt)]=mt(wt)})});var un="[data-draggable]".concat(Ye.draggable||"");return E(E({},Ye),{},{draggable:un})}function Me(de){return Object.entries(de).filter(function(ve){var Te=F(ve,2),Ye=Te[0];return Te[1],!$e(Ye)}).map(function(ve){var Te=F(ve,2),Ye=Te[0],un=Te[1];return[X(Ye),un]}).filter(function(ve){var Te=F(ve,2),Ye=Te[0];return Te[1],!en(Ye)})}l("c740");function xe(de,ve){if(!(de instanceof ve))throw new TypeError("Cannot call a class as a function")}function Be(de,ve){for(var Te=0;Te<ve.length;Te++){var Ye=ve[Te];Ye.enumerable=Ye.enumerable||!1,Ye.configurable=!0,"value"in Ye&&(Ye.writable=!0),Object.defineProperty(de,Ye.key,Ye)}}function Je(de,ve,Te){return ve&&Be(de.prototype,ve),de}var Ln=function(ve){var Te=ve.el;return Te},Tt=function(ve,Te){return ve.__draggable_context=Te},H=function(ve){return ve.__draggable_context},Rt=function(){function de(ve){var Te=ve.nodes,Ye=Te.header,un=Te.default,Nn=Te.footer,oe=ve.root,ht=ve.realList;xe(this,de),this.defaultNodes=un,this.children=[].concat(tt(Ye),tt(un),tt(Nn)),this.externalComponent=oe.externalComponent,this.rootTransition=oe.transition,this.tag=oe.tag,this.realList=ht}return Je(de,[{key:"render",value:function(Te,Ye){var un=this.tag,Nn=this.children,oe=this._isRootComponent,ht=oe?{default:function(){return Nn}}:Nn;return Te(un,Ye,ht)}},{key:"updated",value:function(){var Te=this.defaultNodes,Ye=this.realList;Te.forEach(function(un,Nn){Tt(Ln(un),{element:Ye[Nn],index:Nn})})}},{key:"getUnderlyingVm",value:function(Te){return H(Te)}},{key:"getVmIndexFromDomIndex",value:function(Te,Ye){var un=this.defaultNodes,Nn=un.length,oe=Ye.children,ht=oe.item(Te);if(ht===null)return Nn;var mt=H(ht);if(mt)return mt.index;if(Nn===0)return 0;var wt=Ln(un[0]),kt=tt(oe).findIndex(function(vt){return vt===wt});return Te<kt?0:Nn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),de}(),Pt=l("8bbf");function gt(de,ve){var Te=de[ve];return Te?Te():[]}function yt(de){var ve=de.$slots,Te=de.realList,Ye=de.getKey,un=Te||[],Nn=["header","footer"].map(function(vt){return gt(ve,vt)}),oe=F(Nn,2),ht=oe[0],mt=oe[1],wt=ve.item;if(!wt)throw new Error("draggable element must have an item slot");var kt=un.flatMap(function(vt,ie){return wt({element:vt,index:ie}).map(function(he){return he.key=Ye(vt),he.props=E(E({},he.props||{}),{},{"data-draggable":!0}),he})});if(kt.length!==un.length)throw new Error("Item slot must have only one child");return{header:ht,footer:mt,default:kt}}function jt(de){var ve=Re(de),Te=!Gt(de)&&!ve;return{transition:ve,externalComponent:Te,tag:Te?Object(Pt.resolveComponent)(de):ve?Pt.TransitionGroup:de}}function ee(de){var ve=de.$slots,Te=de.tag,Ye=de.realList,un=de.getKey,Nn=yt({$slots:ve,realList:Ye,getKey:un}),oe=jt(Te);return new Rt({nodes:Nn,root:oe,realList:Ye})}function ue(de,ve){var Te=this;Object(Pt.nextTick)(function(){return Te.$emit(de.toLowerCase(),ve)})}function Ut(de){var ve=this;return function(Te,Ye){if(ve.realList!==null)return ve["onDrag".concat(de)](Te,Ye)}}function Ie(de){var ve=this,Te=Ut.call(this,de);return function(Ye,un){Te.call(ve,Ye,un),ue.call(ve,de,Ye)}}var je=null,Le={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ve){return ve}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Ke=["update:modelValue","change"].concat(tt([].concat(tt(ye.manageAndEmit),tt(ye.emit)).map(function(de){return de.toLowerCase()}))),_n=Object(Pt.defineComponent)({name:"draggable",inheritAttrs:!1,props:Le,emits:Ke,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ve=this.$slots,Te=this.$attrs,Ye=this.tag,un=this.componentData,Nn=this.realList,oe=this.getKey,ht=ee({$slots:ve,tag:Ye,realList:Nn,getKey:oe});this.componentStructure=ht;var mt=nn({$attrs:Te,componentData:un});return ht.render(Pt.h,mt)}catch(wt){return this.error=!0,Object(Pt.h)("pre",{style:{color:"red"}},wt.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&Ct.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ve=this;if(!this.error){var Te=this.$attrs,Ye=this.$el,un=this.componentStructure;un.updated();var Nn=be({$attrs:Te,callBackBuilder:{manageAndEmit:function(mt){return Ie.call(ve,mt)},emit:function(mt){return ue.bind(ve,mt)},manage:function(mt){return Ut.call(ve,mt)}}}),oe=Ye.nodeType===1?Ye:Ye.parentElement;this._sortable=new et.a(oe,Nn),this.targetDomElement=oe,oe.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ve=this.list;return ve||this.modelValue},getKey:function(){var ve=this.itemKey;return typeof ve=="function"?ve:function(Te){return Te[ve]}}},watch:{$attrs:{handler:function(ve){var Te=this._sortable;Te&&Me(ve).forEach(function(Ye){var un=F(Ye,2),Nn=un[0],oe=un[1];Te.option(Nn,oe)})},deep:!0}},methods:{getUnderlyingVm:function(ve){return this.componentStructure.getUnderlyingVm(ve)||null},getUnderlyingPotencialDraggableComponent:function(ve){return ve.__draggable_component__},emitChanges:function(ve){var Te=this;Object(Pt.nextTick)(function(){return Te.$emit("change",ve)})},alterList:function(ve){if(this.list){ve(this.list);return}var Te=tt(this.modelValue);ve(Te),this.$emit("update:modelValue",Te)},spliceList:function(){var ve=arguments,Te=function(un){return un.splice.apply(un,tt(ve))};this.alterList(Te)},updatePosition:function(ve,Te){var Ye=function(Nn){return Nn.splice(Te,0,Nn.splice(ve,1)[0])};this.alterList(Ye)},getRelatedContextFromMoveEvent:function(ve){var Te=ve.to,Ye=ve.related,un=this.getUnderlyingPotencialDraggableComponent(Te);if(!un)return{component:un};var Nn=un.realList,oe={list:Nn,component:un};if(Te!==Ye&&Nn){var ht=un.getUnderlyingVm(Ye)||{};return E(E({},ht),oe)}return oe},getVmIndexFromDomIndex:function(ve){return this.componentStructure.getVmIndexFromDomIndex(ve,this.targetDomElement)},onDragStart:function(ve){this.context=this.getUnderlyingVm(ve.item),ve.item._underlying_vm_=this.clone(this.context.element),je=ve.item},onDragAdd:function(ve){var Te=ve.item._underlying_vm_;if(Te!==void 0){q(ve.item);var Ye=this.getVmIndexFromDomIndex(ve.newIndex);this.spliceList(Ye,0,Te);var un={element:Te,newIndex:Ye};this.emitChanges({added:un})}},onDragRemove:function(ve){if(ut(this.$el,ve.item,ve.oldIndex),ve.pullMode==="clone"){q(ve.clone);return}var Te=this.context,Ye=Te.index,un=Te.element;this.spliceList(Ye,1);var Nn={element:un,oldIndex:Ye};this.emitChanges({removed:Nn})},onDragUpdate:function(ve){q(ve.item),ut(ve.from,ve.item,ve.oldIndex);var Te=this.context.index,Ye=this.getVmIndexFromDomIndex(ve.newIndex);this.updatePosition(Te,Ye);var un={element:this.context.element,oldIndex:Te,newIndex:Ye};this.emitChanges({moved:un})},computeFutureIndex:function(ve,Te){if(!ve.element)return 0;var Ye=tt(Te.to.children).filter(function(ht){return ht.style.display!=="none"}),un=Ye.indexOf(Te.related),Nn=ve.component.getVmIndexFromDomIndex(un),oe=Ye.indexOf(je)!==-1;return oe||!Te.willInsertAfter?Nn:Nn+1},onDragMove:function(ve,Te){var Ye=this.move,un=this.realList;if(!Ye||!un)return!0;var Nn=this.getRelatedContextFromMoveEvent(ve),oe=this.computeFutureIndex(Nn,ve),ht=E(E({},this.context),{},{futureIndex:oe}),mt=E(E({},ve),{},{relatedContext:Nn,draggedContext:ht});return Ye(mt,Te)},onDragEnd:function(){je=null}}}),wn=_n;d.default=wn},fb6a:function(s,d,l){var o=l("23e7"),g=l("861d"),_=l("e8b5"),I=l("23cb"),C=l("50c4"),E=l("fc6a"),S=l("8418"),k=l("b622"),D=l("1dde"),N=l("ae40"),U=D("slice"),F=N("slice",{ACCESSORS:!0,0:0,1:2}),j=k("species"),$=[].slice,K=Math.max;o({target:"Array",proto:!0,forced:!U||!F},{slice:function(it,et){var q=E(this),ut=C(q.length),Ct=I(it,ut),ot=I(et===void 0?ut:et,ut),bt,X,Wt;if(_(q)&&(bt=q.constructor,typeof bt=="function"&&(bt===Array||_(bt.prototype))?bt=void 0:g(bt)&&(bt=bt[j],bt===null&&(bt=void 0)),bt===Array||bt===void 0))return $.call(q,Ct,ot);for(X=new(bt===void 0?Array:bt)(K(ot-Ct,0)),Wt=0;Ct<ot;Ct++,Wt++)Ct in q&&S(X,Wt,q[Ct]);return X.length=Wt,X}})},fc6a:function(s,d,l){var o=l("44ad"),g=l("1d80");s.exports=function(_){return o(g(_))}},fdbc:function(s,d){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,d,l){var o=l("4930");s.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(JP);var DK=JP.exports;const WM=Wp(DK),OK={components:{SvgIcon:Wn},props:{isSelected:Boolean,disabledDrag:Boolean,item:{type:Object,default:()=>({})}},computed:{path(){return{draggable:AT}}}},zK={class:"draggable-handle__icon"},FK={class:"draggale-item__info"};function BK(t,e,n,a,s,d){const l=Js("SvgIcon");return St(),pe("div",{class:Li(["draggale-item",{"draggale-item-active":n.isSelected}])},[n.disabledDrag?Cn("",!0):(St(),pe("div",{key:0,class:"draggable-handle",style:fi({background:n.item.color})},[zt("div",zK,[te(l,{size:"14",type:"mdi",path:d.path.draggable},null,8,["path"])])],4)),zt("div",FK,[qn(t.$slots,"default",{},void 0,!0)])],2)}const Bw=Vn(OK,[["render",BK],["__scopeId","data-v-4edf7736"]]),NK={class:"draggable-group__info"},jK=["title"],VK={class:"draggable-group__action"},UK={key:0,class:"draggable-group__divider"},HK={key:0,class:"draggable-group__nodata"},GK=rr({__name:"draggable-list-group",props:{layerGroup:{type:Object,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean,checkItemCanPutInChildren:{type:Function},readonly:Boolean},emits:["click:delete","click:un-group","click:select","drag-done","update:layer-group"],setup(t,{emit:e}){const n=e,a={group:{open:CT,close:wT,unGroup:LO,delete:Ff,show:ST,hide:ET}},s=gn(!0);function d(){s.value=!s.value}function l(){n("click:delete")}function o(){n("click:un-group")}return(g,_)=>(St(),tn(Bw,{disabledDrag:t.disabledDrag,class:"draggable-group__item"},{default:Se(()=>[zt("div",NK,[zt("span",{class:"draggable-group__title",title:t.layerGroup.name},Rn(t.layerGroup.name),9,jK),zt("div",VK,[!t.readonly&&t.layerGroup.children&&t.layerGroup.children.length>0?(St(),pe("span",{key:0,onClick:_[0]||(_[0]=I=>o())},[te(ct(Wn),{size:"14",type:"mdi",path:a.group.unGroup},null,8,["path"])])):Cn("",!0),t.readonly?Cn("",!0):(St(),pe("span",{key:1,onClick:_[1]||(_[1]=I=>l())},[te(ct(Wn),{size:"14",type:"mdi",path:a.group.delete},null,8,["path"])])),zt("span",{onClick:_[2]||(_[2]=I=>d())},[s.value?(St(),tn(ct(Wn),{key:0,size:"14",type:"mdi",path:a.group.close},null,8,["path"])):(St(),tn(ct(Wn),{key:1,size:"14",type:"mdi",path:a.group.open},null,8,["path"]))])])]),s.value?(St(),pe("div",UK)):Cn("",!0),zt("div",{class:Li({"draggable-group__children-container":!0,_show:s.value})},[qn(g.$slots,"item",{group:t.layerGroup},()=>[!g.p_children||g.p_children.length<1?(St(),pe("div",HK," Drag layer inside this group ")):Cn("",!0)],!0)],2)]),_:3},8,["disabledDrag"]))}}),$K=Vn(GK,[["__scopeId","data-v-465facc7"]]),ZK={class:"draggable__item item"},WK={class:"draggable__item"},qK=rr({__name:"draggable-list",props:{items:{type:Array,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean},emits:["update:selected","click-group:remove","click-drag:done","update:items"],setup(t,{expose:e,emit:n}){const a=t,s=n,d=gn([]),l=gn({}),o=bn({get(){return a.selected},set($){s("update:selected",$)}}),g=$=>$&&$.isGroup,_=$=>{var q;const K=$.draggedContext.element,tt=(q=$.to.__vue__)==null?void 0:q.element,it=g(K),et=tt&&g(tt);return it&&et?!1:(!it&&!tt||!it&&tt&&!g(tt),!0)};mo(()=>{I(a.items)});function I($=[]){($==null||$.length===0)&&($=a.items),d.value=C($)}function C($){let K=[];if(!$||$.length==0)return K;let tt={};return $.forEach(it=>{if(!it.group){K.push(it);return}tt[it.group.id]||(tt[it.group.id]=j(it.group),K.push(tt[it.group.id])),tt[it.group.id].children.push(it)}),K}function E($){return $.reduce((K,tt)=>(tt.isGroup?tt.children.length>0&&K.push(...tt.children.map(it=>(it.group={id:tt.id,name:tt.name},it))):(tt.group=void 0,K.push(tt)),K),[])}function S($){a.disabledSelect||(o.value.includes($.id)?o.value=o.value.filter(K=>K!=$.id):(o.value.push($.id),l.value[$.id]=$))}function k($){let K=[];o.value&&o.value.length>0&&(d.value=d.value.filter(it=>!o.value.includes(it.id)).map(it=>("isGroup"in it&&it.isGroup&&(it.children=it.children.filter(et=>!o.value.includes(et.id))),it)),K=o.value.map(it=>l.value[it]),o.value=[],l.value={});let tt=j({name:$||"New Group",children:K});d.value.unshift(tt),tt.children.length>0&&U()}function D($,K){d.value.splice(K,1),$.children.length>0&&d.value.splice(K,0,...$.children)}function N($,K){d.value[K]={...d.value[K],...$}}function U(){El(()=>{s("update:items",E(d.value)),s("click-drag:done")})}function F($,K){d.value.splice(K,1),s("click-group:remove",$)}function j($){let K={id:`group-${new Date().getTime()}`,name:"New Group",isGroup:!0,show:!0,children:[]};return K=Object.assign({},K,$),K}return e({update:I,addNewGroup:k}),($,K)=>(St(),tn(ct(WM),{modelValue:d.value,"onUpdate:modelValue":K[0]||(K[0]=tt=>d.value=tt),group:"layers","item-key":"id",animation:200,move:_,handle:".draggable-handle",class:"draggable-group-container",onEnd:U},{item:Se(({element:tt,index:it})=>[zt("div",ZK,[tt.isGroup?(St(),tn($K,{key:tt.id,"layer-group":tt,"onUpdate:layerGroup":et=>N(et,it),disabledDrag:t.disabledDrag,"onClick:delete":et=>F(tt,it),"onClick:unGroup":et=>D(tt,it),onDragDone:U,"onClick:select":S,onEnd:U},{item:Se(()=>[te(ct(WM),{modelValue:tt.children,"onUpdate:modelValue":et=>tt.children=et,group:"layers",handle:".draggable-handle","item-key":"id",animation:200,move:_,class:"draggable-group-container"},{item:Se(({element:et,index:q})=>[zt("div",WK,[(St(),tn(Bw,{disabledDrag:t.disabledDrag,isSelected:o.value.includes(et.id),item:et,key:et.id+"-child"},{default:Se(()=>[qn($.$slots,"item",{isSelected:o.value.includes(et.id),item:et,index:q,toggleSelect:S},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["layer-group","onUpdate:layerGroup","disabledDrag","onClick:delete","onClick:unGroup"])):(St(),tn(Bw,{disabledDrag:t.disabledDrag,isSelected:o.value.includes(tt.id),item:tt,key:tt.id+"-child"},{default:Se(()=>[qn($.$slots,"item",{isSelected:o.value.includes(tt.id),item:tt,index:it,toggleSelect:S},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))])]),_:3},8,["modelValue"]))}}),KK=Vn(qK,[["__scopeId","data-v-f4c80f65"]]),YK={__name:"layer-item-icon",props:{loading:Boolean,item:{require:!0,type:Object}},setup(t){const e={loading:A2,layer:Yy};return(n,a)=>(St(),pe("div",null,[t.loading?(St(),tn(ct(Wn),{key:0,size:"14",type:"mdi",path:e.loading,class:"spin"},null,8,["path"])):(St(),tn(ct(Wn),{key:1,size:"14",type:"mdi",path:e.layer},null,8,["path"]))]))}},XK={name:"VueSlider",props:{modelValue:{},min:{default:0},max:{default:1},step:{default:.01},disabled:Boolean},computed:{backgroundSize(){return(this.modelValue-this.min)*100/(this.max-this.min)+"% 100%"},form:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}},QK=["value","min","max","step","disabled"];function JK(t,e,n,a,s,d){return St(),pe("input",{value:d.form,onChange:e[0]||(e[0]=({target:l})=>d.form=parseFloat(l.value)),type:"range",min:n.min,max:n.max,step:n.step,style:fi({backgroundSize:d.backgroundSize}),disabled:n.disabled},null,44,QK)}const tY=Vn(XK,[["render",JK],["__scopeId","data-v-fb1c3ee7"]]),eY={class:"menu-divider"},nY=rr({__name:"menu-divider",props:{item:{},data:{}},setup(t){return(e,n)=>(St(),pe("div",eY))}}),rY=["title"],iY=rr({__name:"menu-item",props:{item:{}},setup(t){return(e,n)=>(St(),pe("button",Tr(e.$attrs,{class:"menu-item",title:e.item.name}),[e.item.icon?(St(),tn(ct(Wn),{key:0,size:"14",type:"mdi",path:e.item.icon},null,8,["path"])):Cn("",!0)],16,rY))}}),zA=rr({__name:"index",props:{item:{},data:{},mapId:{}},setup(t){const e=t,n=bn(()=>{switch(e.item.type){case"divider":return nY}return e.item.type=="item"&&"component"in e.item?e.item.component():iY});return(a,s)=>(St(),tn(sa(n.value),Tr({item:a.item,data:a.data,mapId:a.mapId},a.$attrs),null,16,["item","data","mapId"]))}}),h3=t=>(_c("data-v-1b24f90a"),t=t(),bc(),t),oY={class:"layer-item-container"},aY={class:"layer-item__info"},sY=["title"],lY=h3(()=>zt("div",{class:"v-spacer"},null,-1)),cY={class:"layer-item__title-action"},uY=["disabled"],hY=["disabled"],dY={key:0,class:"layer-item__action"},fY={key:0,class:"layer-item__opacity"},pY=h3(()=>zt("div",{class:"v-spacer"},null,-1)),mY={key:1},gY=rr({__name:"layer-item",props:{item:{},mapId:{},readonly:{type:Boolean}},emits:["update:item","click","click:remove","click:action","click:content-menu"],setup(t,{emit:e}){const n=t,a=e,s={menu:db,loading:A2,layer:Yy,flyTo:Lg,delete:Ff,edit:IO,legendOpen:AO,legendClose:PT},d=gn(!1),l=bn({get(){return n.item.opacity},set(F){let j=n.item;j.opacity=F,a("update:item",j)}}),o=()=>{a("click:remove",n.item)},g=bn(()=>n.item?n.item.getMenus()||[]:[]),_=bn(()=>g.value.filter(F=>!F.location||F.location=="extra").sort((F,j)=>(F.order||0)-(j.order||0))),I=bn(()=>g.value.filter(F=>F.location=="bottom").sort((F,j)=>(F.order||0)-(j.order||0))),C=bn(()=>g.value.filter(F=>F.location=="menu").sort((F,j)=>(F.order||0)-(j.order||0))),E=bn(()=>!n.readonly&&(!n.item.config.disabled_opacity||I.value.length>0));function S(F){a("click:action",{action:F,item:n.item})}function k(F){a("click:content-menu",{event:F,actions:C.value,item:n.item})}const D=bn(()=>n.item&&n.item.legend),N=gn(!1);function U(){N.value=!N.value}return(F,j)=>(St(),pe("div",oY,[zt("div",aY,[te(YK,{class:"layer-item__icon",loading:d.value,item:{item:F.item}},null,8,["loading","item"]),zt("span",{class:"layer-item__title",title:F.item.getName(),onClick:j[0]||(j[0]=$=>a("click",F.item))},[zt("span",null,Rn(F.item.getName()),1)],8,sY),lY,zt("div",cY,[qn(F.$slots,"pre-btn",{loading:d.value},void 0,!0),(St(!0),pe(mr,null,ki(_.value,($,K)=>(St(),tn(zA,{key:K,class:"layer-item__button",item:$,data:F.item,disabled:d.value,mapId:F.mapId,onClick:tt=>S($)},null,8,["item","data","disabled","mapId","onClick"]))),128)),!F.item.config.disable_delete&&!n.readonly?(St(),pe("button",{key:0,class:"layer-item__button",disabled:d.value,onClick:_i(o,["stop"])},[te(ct(Wn),{size:"14",type:"mdi",path:s.delete},null,8,["path"])],8,uY)):Cn("",!0),qn(F.$slots,"extra-btn",{loading:d.value},void 0,!0),C.value.length>0?(St(),pe("button",{key:1,class:"layer-item__button",disabled:d.value,onClick:_i(k,["prevent","stop"])},[te(ct(Wn),{size:"14",type:"mdi",path:s.menu},null,8,["path"])],8,hY)):Cn("",!0),E.value?Cn("",!0):(St(),pe(mr,{key:2},[(St(!0),pe(mr,null,ki(I.value,($,K)=>(St(),tn(zA,{key:K,class:"layer-item__button",item:$,data:F.item,disabled:d.value,mapId:F.mapId,onClick:tt=>S($)},null,8,["item","data","disabled","mapId","onClick"]))),128)),D.value?(St(),pe("button",{key:0,class:"layer-item__button",onClick:_i(U,["stop"])},[te(ct(Wn),{size:"14",type:"mdi",path:N.value?s.legendClose:s.legendOpen},null,8,["path"])])):Cn("",!0)],64))])]),E.value?(St(),pe("div",dY,[F.item.config.disabled_opacity?Cn("",!0):(St(),pe("div",fY,[te(tY,{modelValue:l.value,"onUpdate:modelValue":j[1]||(j[1]=$=>l.value=$),modelModifiers:{number:!0},disabled:d.value},null,8,["modelValue","disabled"])])),pY,(St(!0),pe(mr,null,ki(I.value,($,K)=>(St(),tn(zA,{key:K,class:"layer-item__button",item:$,data:F.item,disabled:d.value,mapId:F.mapId,onClick:tt=>S($)},null,8,["item","data","disabled","mapId","onClick"]))),128)),D.value?(St(),pe("button",{key:1,class:"layer-item__button",onClick:_i(U,["stop"])},[te(ct(Wn),{size:"14",type:"mdi",path:N.value?s.legendClose:s.legendOpen},null,8,["path"])])):Cn("",!0)])):Cn("",!0),n.item.legend&&N.value?(St(),pe("div",mY,[(St(),tn(sa(n.item.legend())))])):Cn("",!0)]))}}),d3=Vn(gY,[["__scopeId","data-v-1b24f90a"]]),yY=t=>(_c("data-v-286327a2"),t=t(),bc(),t),vY={class:"layer-control-container"},_Y={class:"layer-control__header"},bY=yY(()=>zt("div",{class:"v-spacer"},null,-1)),xY={class:"layer-control__list"},AY={class:"layer-context-menu"},wY=["onClick"],CY={class:"layer-context-menu__item-icon"},IY=["innerHTML"],MY=rr({__name:"LayerList",props:{...So,disabledDrag:Boolean,disabled:Boolean},setup(t){const e=t,n={icon:Yy,menu:db,group:{create:x2},deleteAll:Ff,layer:{create:vd}},{callMap:a,mapId:s}=Ai(e),d=gn([]),l=bn(()=>J2(s.value).value);Xo(l,()=>{S()},{deep:!0}),mo(()=>{S()});const o=gn(void 0),g=gn([]);function _(){a(it=>{let et="";d.value.slice().forEach((q,ut)=>{q.index=ut,q2(q.getParent(),[Ct=>{Ih(Ct)&&(Ct.moveLayer(it,et),et=Ct.getBeforeId())}])})})}function I(it){it&&typeof it!="string"&&(!it||!it.children||it.children.length===0||it.children.forEach(et=>{_A(s.value,et)}))}function C(it){a(et=>{Hp(it.getParent(),q=>Ih(q),[q=>{it.config.disabled_opacity||q.setOpacity(et,it.opacity)}])})}function E(it){it&&(_A(s.value,it),S())}function S(){D(),El(()=>{k()})}function k(){o.value&&o.value.update(d.value)}function D(){d.value=av(s.value,"list").sort((it,et)=>et.index-it.index)||[]}function N(){o.value&&o.value.addNewGroup("")}function U(){!d.value||d.value.length===0||(d.value.forEach(it=>{_A(s.value,it)}),S())}const F=gn(),j=ls({items:[],view:void 0});function $({event:it,item:et,actions:q}){j.items=q?[...q]:[],j.view=et,F.value&&F.value.open(it,et)}function K(){j.items=[],j.view=void 0,F.value&&F.value.close()}function tt({action:it,item:et}){it&&it.type==="item"&&et&&"click"in it&&it.click(et,s.value,et)}return(it,et)=>(St(),pe("div",vY,[zt("div",_Y,[qn(it.$slots,"title",{},void 0,!0),bY,zt("button",{class:"layer-item__button",onClick:et[0]||(et[0]=q=>N())},[te(ct(Wn),{size:"16",type:"mdi",path:n.group.create},null,8,["path"])]),zt("button",{class:"layer-item__button",onClick:U},[te(ct(Wn),{size:"16",type:"mdi",path:n.deleteAll},null,8,["path"])])]),zt("div",xY,[te(KK,{ref_key:"groupRef",ref:o,items:d.value,"onUpdate:items":et[1]||(et[1]=q=>d.value=q),selected:g.value,"onUpdate:selected":et[2]||(et[2]=q=>g.value=q),disabled:t.disabled,disabledDrag:t.disabledDrag,"onClickDrag:done":et[3]||(et[3]=q=>_()),"onClickGroup:remove":I},{item:Se(({isSelected:q,item:ut,toggleSelect:Ct})=>[qn(it.$slots,"item",{item:ut,isSelected:q,toggleSelect:Ct},()=>[(St(),tn(sa(ut.component||d3),{item:ut,isSelected:q,onClick:ot=>Ct(ut),"onUpdate:item":C,"onClick:remove":E,"onClick:contentMenu":$,"onClick:action":tt,mapId:ct(s),readonly:!1},null,40,["item","isSelected","onClick","mapId"]))],!0)]),_:3},8,["items","selected","disabled","disabledDrag"])]),te(ct(rC),{ref_key:"contextMenuRef",ref:F},{default:Se(()=>[zt("ul",AY,[(St(!0),pe(mr,null,ki(j.items,(q,ut)=>(St(),pe("li",{key:ut,onClick:_i(Ct=>{tt({action:q,item:j.view}),K()},["stop"]),class:Li(["layer-context-menu__item",[q.class,q.type==="divider"?"layer-context-menu__divider":""]])},[zt("div",CY,[te(ct(Wn),{size:"16",type:"mdi",path:q.icon||it.mdiCircleSmall},null,8,["path"])]),zt("span",{innerHTML:q.name},null,8,IY)],10,wY))),128))])]),_:1},512)]))}}),SY=Vn(MY,[["__scopeId","data-v-286327a2"]]),EY={class:"layer-control__title"},TY={class:"layer-control"},PY={class:"base-map-card-container"},kY={name:"layer-control"},LY=rr({...kY,props:{...So,...NT({show:!1})},setup(t){const e=t,{mapId:n,moduleContainerProps:a}=Ai(e),{trans:s,setLocale:d}=jo(n.value);d({map:{"layer-control":{title:"Layer Control","create-btn":"Create Layer",create:{title:"New Layer"},field:{name:"Name",type:"Type",url:"Url",minzoom:"Min zoom",maxzoom:"Max zoom",file:"File",geojson:"Geojson",tiles:"Tiles",bound:{title:"Bound",minx:"Min Longitude",miny:"Min Latitude",maxx:"Max Longitude",maxy:"Max Latitude"}},info:{title:"Info"}}}});const l={icon:Yy,menu:db,group:{create:x2},deleteAll:Ff,layer:{create:vd}},[o,g]=Pf(e.show),[_,I]=Pf();function C(){I()}return(E,S)=>(St(),tn(ct(Qo),No(Mo(ct(a))),{btn:Se(()=>[ct(o)?Cn("",!0):(St(),tn(ct(di),{key:0,tooltip:ct(s)("map.layer-control.title"),onClick:S[0]||(S[0]=_i(k=>ct(g)(),["stop"])),active:ct(o)},{default:Se(()=>[te(ct(Wn),{size:"14",type:"mdi",path:l.icon},null,8,["path"])]),_:1},8,["tooltip","active"]))]),draggable:Se(k=>[te(ct(BT),{containerId:k.containerId,show:ct(o),"onUpdate:show":S[2]||(S[2]=D=>po(o)?o.value=D:null)},{title:Se(()=>[zt("span",EY,Rn(ct(s)("map.layer-control.title")),1)]),default:Se(()=>[zt("div",TY,[te(SY,{mapId:ct(n)},{title:Se(()=>[qn(E.$slots,"titleList",{mapId:ct(n)},()=>[zt("button",{class:"layer-item__button",onClick:S[1]||(S[1]=_i(D=>C(),["stop"]))},[te(ct(Wn),{size:"14",type:"mdi",path:l.layer.create},null,8,["path"])])],!0)]),_:3},8,["mapId"]),zt("div",PY,[qn(E.$slots,"endList",{mapId:ct(n)},void 0,!0)])])]),_:2},1032,["containerId","show"])]),default:Se(()=>[te(bq,{show:ct(_),"onUpdate:show":S[3]||(S[3]=k=>po(_)?_.value=k:null)},null,8,["show"]),qn(E.$slots,"default",{},void 0,!0)]),_:3},16))}}),RY=Vn(LY,[["__scopeId","data-v-d955a1d5"]]);function DY(t){const e=[];if(!t||t.length==0)return e;const n={};return t.forEach(a=>{if(!a.group){e.push(a);return}n[a.group.id]||(n[a.group.id]=OY(a.group),e.push(n[a.group.id])),n[a.group.id].children.push(a)}),e}function OY(t){let e={id:`group-${new Date().getTime()}`,name:"New Group",isGroup:!0,show:!0,children:[]};return e=Object.assign({},e,t),e}const zY={components:{SvgIcon:Wn},props:{isSelected:Boolean,disabledDrag:Boolean,item:{type:Object,default:()=>({})}},computed:{path(){return{draggable:AT}}}},FY={class:"draggable-handle__icon"},BY={class:"draggale-item__info"};function NY(t,e,n,a,s,d){const l=Js("SvgIcon");return St(),pe("div",{class:Li(["draggale-item",{"draggale-item-active":n.isSelected}])},[n.disabledDrag?Cn("",!0):(St(),pe("div",{key:0,class:"draggable-handle",style:fi({background:n.item.color})},[zt("div",FY,[te(l,{size:"14",type:"mdi",path:d.path.draggable},null,8,["path"])])],4)),zt("div",BY,[qn(t.$slots,"default",{},void 0,!0)])],2)}const f3=Vn(zY,[["render",NY],["__scopeId","data-v-7e4827cb"]]),jY={class:"draggable-group__info"},VY=["title"],UY={class:"draggable-group__action"},HY={key:0,class:"draggable-group__divider"},GY={key:0,class:"draggable-group__nodata"},$Y=rr({__name:"ListGroupItem",props:{item:{type:Object,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean,readonly:Boolean},setup(t){const e={group:{open:CT,close:wT}},n=gn(!0);function a(){n.value=!n.value}return(s,d)=>(St(),tn(f3,{disabledDrag:t.disabledDrag,class:"draggable-group__item"},{default:Se(()=>[zt("div",jY,[zt("span",{class:"draggable-group__title",title:t.item.name},Rn(t.item.name),9,VY),zt("div",UY,[qn(s.$slots,"extra-data",{item:t.item},void 0,!0),zt("span",{onClick:d[0]||(d[0]=l=>a())},[n.value?(St(),tn(ct(Wn),{key:0,size:"14",type:"mdi",path:e.group.close},null,8,["path"])):(St(),tn(ct(Wn),{key:1,size:"14",type:"mdi",path:e.group.open},null,8,["path"]))])])]),n.value?(St(),pe("div",HY)):Cn("",!0),zt("div",{class:Li({"draggable-group__children-container":!0,_show:n.value})},[qn(s.$slots,"items-list",{},()=>[!t.item.children||t.item.children.length===0?(St(),pe("div",GY," Drag layer inside this group ")):Cn("",!0)],!0)],2)]),_:3},8,["disabledDrag"]))}}),ZY=Vn($Y,[["__scopeId","data-v-2a8c9003"]]),WY={class:"draggable-group__children"},qY={class:"leaf-item"},KY=["title"],YY={name:"RecursiveList"},XY=rr({...YY,props:{item:{type:Object,required:!0},disabledDrag:{type:Boolean,default:!1},isGroup:{type:Function,default:t=>Array.isArray(t.children)},isLeaf:{type:Function,default:t=>!Array.isArray(t.children)}},setup(t){return(e,n)=>{const a=Js("RecursiveList",!0);return t.isGroup(t.item)?(St(),tn(ZY,{key:0,item:t.item,"disabled-drag":t.disabledDrag},{"extra-data":Se(({item:s})=>[qn(e.$slots,"group-extra-data",{item:s},void 0,!0)]),"items-list":Se(()=>[zt("div",WY,[(St(!0),pe(mr,null,ki(t.item.children,(s,d)=>(St(),tn(a,{key:s.id||d,item:s,"disabled-drag":t.disabledDrag,"is-group":t.isGroup,"is-leaf":t.isLeaf},{"group-extra-data":Se(({item:l})=>[qn(e.$slots,"group-extra-data",{item:l},void 0,!0)]),leaf:Se(({item:l})=>[qn(e.$slots,"leaf",{item:l},void 0,!0)]),_:2},1032,["item","disabled-drag","is-group","is-leaf"]))),128))])]),_:3},8,["item","disabled-drag"])):(St(),tn(f3,{key:1,item:t.item,"disabled-drag":t.disabledDrag},{default:Se(()=>[qn(e.$slots,"leaf",{item:t.item},()=>[zt("div",qY,[zt("span",{class:"leaf-item__title",title:t.item.name},Rn(t.item.name),9,KY)])],!0)]),_:3},8,["item","disabled-drag"]))}}}),QY=Vn(XY,[["__scopeId","data-v-58a983c4"]]),JY=t=>(_c("data-v-eedfe689"),t=t(),bc(),t),tX={class:"layer-control-container"},eX=JY(()=>zt("div",{class:"layer-control__header"},[zt("div",{class:"v-spacer"})],-1)),nX={class:"layer-control__list"},rX={class:"layer-context-menu"},iX=["onClick"],oX={class:"layer-context-menu__item-icon"},aX=["innerHTML"],sX=rr({__name:"LayerListReadonly",props:{...So,disabledDrag:Boolean,disabled:Boolean},setup(t){const e=t,{callMap:n,mapId:a}=Ai(e),s=gn([]);mo(()=>{l()});function d(N){n(U=>{Hp(N.getParent(),F=>Ih(F),[F=>{F.toggleShow(U,N.show)},F=>{N.config.disabled_opacity||F.setOpacity(U,N.opacity)}])})}function l(){I(),El(()=>{_()})}const o=xc(),g=gn([]);function _(){var N;g.value=DY(s.value),(N=o==null?void 0:o.proxy)==null||N.$forceUpdate()}function I(){s.value=av(a.value,"list").sort((N,U)=>U.index-N.index)||[]}const C=gn(),E=ls({items:[],view:void 0});function S({event:N,item:U,actions:F}){E.items=F?[...F]:[],E.view=U,C.value&&C.value.open(N,U)}function k(){E.items=[],E.view=void 0,C.value&&C.value.close()}function D({action:N,item:U}){N&&N.type==="item"&&U&&N.click(U,a.value,U)}return(N,U)=>(St(),pe("div",tX,[eX,zt("div",nX,[(St(!0),pe(mr,null,ki(g.value,(F,j)=>(St(),pe("div",{key:F.id||j},[te(QY,{item:F,disabledDrag:""},{leaf:Se(({item:$})=>[(St(),tn(sa($.component||d3),{item:$,"onUpdate:item":d,"onClick:contentMenu":S,"onClick:action":D,mapId:ct(a),readonly:""},null,40,["item","mapId"]))]),_:2},1032,["item"])]))),128))]),te(ct(rC),{ref_key:"contextMenuRef",ref:C},{default:Se(()=>[zt("ul",rX,[(St(!0),pe(mr,null,ki(E.items,(F,j)=>(St(),pe("li",{key:j,onClick:_i($=>{D({action:F,item:E.view}),k()},["stop"]),class:Li(["layer-context-menu__item",[F.class,F.type==="divider"?"layer-context-menu__divider":""]])},[zt("div",oX,[te(ct(Wn),{size:"16",type:"mdi",path:F.icon||N.mdiCircleSmall},null,8,["path"])]),zt("span",{innerHTML:F.name},null,8,aX)],10,iX))),128))])]),_:1},512)]))}}),lX=Vn(sX,[["__scopeId","data-v-eedfe689"]]),cX={class:"layer-control__title"},uX={class:"layer-control"},hX={class:"base-map-card-container"},dX={name:"layer-control"};({...dX,props:{...So,...NT({show:!1})}});const FA="source-highlighted",BA="layer-highlighted",fX=rr({__name:"LayerHighlight",props:{...So,layer:{type:Object,default:()=>({type:"line",paint:{"line-color":"#004E98","line-width":4,"line-dasharray":[2,2]}})}},setup(t){const e=t;let n;const{mapId:a,callMap:s}=Ai(e),d=bn(()=>{var I;return(I=g$(a.value))==null?void 0:I.value}),l=(I,C)=>{const E=I.getSource(FA);E?E.setData(C||{type:"FeatureCollection",features:[]}):I.addSource(FA,{type:"geojson",data:C||{type:"FeatureCollection",features:[]}})},o=I=>{var C,E;if(I.getLayer(BA))I.moveLayer(BA);else{const S={...e.layer};S.source=FA,S.id=BA;const k=(E=(C=I.getStyle().layers)==null?void 0:C[I.getStyle().layers.length-1])==null?void 0:E.id;I.addLayer(S,k)}},g=(I,C)=>{var D,N;if(n==null||n.remove(),n=void 0,!C||typeof C=="string"||!(C.type==="Feature"||C.type==="FeatureCollection"&&((D=C.features)==null?void 0:D.length)>0))return;const S=aG(C),k=(N=S==null?void 0:S.geometry)==null?void 0:N.coordinates;if(Array.isArray(k)){const[U,F]=k;n=new ky.Marker({}).setLngLat([U,F]).addTo(I)}};function _(I){const C=y$(a.value);if(C){const E=vc(C,S=>S.type=="source");if(E&&"hightLight"in E){s(S=>{var k;(k=E.hightLight)==null||k.call(E,S,I)});return}}s(E=>{l(E,I),o(E),g(E,I)})}return Xo(d,()=>{_(d.value)},{deep:!0}),(I,C)=>(St(),pe("div"))}}),pX={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value},items(){return this.value.items||[]},colors(){return this.items.map(t=>t.color)}}},mX={class:"legend-item"},gX={class:"legend-text"},yX={class:"legend-value-container"};function vX(t,e,n,a,s,d){return St(),pe("div",mX,[zt("div",gX,Rn(d.item.text)+":",1),zt("div",yX,[(St(!0),pe(mr,null,ki(d.items,(l,o)=>(St(),pe("div",{class:"legend-value",key:o},Rn(l.value),1))),128))]),zt("div",null,[zt("div",{style:fi({background:`linear-gradient(to right,${d.colors.join(",")})`}),class:"legend-item-color"},null,4)])])}const _X=Vn(pX,[["render",vX],["__scopeId","data-v-38b04422"]]),bX={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value}}},xX={class:"legend-item"},AX={class:"legend-text"},wX={class:"legend-value"};function CX(t,e,n,a,s,d){return St(),pe("div",xX,[zt("div",AX,Rn(d.item.text)+":",1),zt("div",{style:fi({background:`${d.item.color}`}),class:"legend-item-color"},null,4),zt("div",wX,Rn(d.item.value),1)])}const IX=Vn(bX,[["render",CX],["__scopeId","data-v-261080ab"]]),MX={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value}}},SX={class:"legend-item"},EX={class:"legend-text"},TX={class:"legend-value"};function PX(t,e,n,a,s,d){return St(),pe("div",SX,[zt("div",EX,Rn(d.item.text)+":",1),zt("div",TX,Rn(d.item.value),1)])}const kX=Vn(MX,[["render",PX],["__scopeId","data-v-81e4c2e4"]]),p3={linear:_X,color:IX,text:kX};function LX(t,e){const n=p3[t];return()=>Sf(n,{value:e})}function RX(t){return()=>rr({name:"MultiLegend",setup(){return()=>t.map(e=>{const n=p3[e.type];return Sf(n,{value:e.value})})}})}var m3={exports:{}};(function(t,e){(function(n,a){t.exports=a()})(Io,function(){var n=function(O,W){var xt={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},Ht={on:function(Xt,_e,cn){if(xt[Xt]===void 0)throw new Error("Invalid event type: "+Xt);xt[Xt].push({selector:_e,fn:cn})},render:function(Xt){W.store.featureChanged(Xt)}},$t=function(Xt,_e){for(var cn=xt[Xt],dn=cn.length;dn--;){var An=cn[dn];if(An.selector(_e)){An.fn.call(Ht,_e)||W.store.render(),W.ui.updateMapClasses();break}}};return O.start.call(Ht),{render:O.render,stop:function(){O.stop&&O.stop()},trash:function(){O.trash&&(O.trash(),W.store.render())},combineFeatures:function(){O.combineFeatures&&O.combineFeatures()},uncombineFeatures:function(){O.uncombineFeatures&&O.uncombineFeatures()},drag:function(Xt){$t("drag",Xt)},click:function(Xt){$t("click",Xt)},mousemove:function(Xt){$t("mousemove",Xt)},mousedown:function(Xt){$t("mousedown",Xt)},mouseup:function(Xt){$t("mouseup",Xt)},mouseout:function(Xt){$t("mouseout",Xt)},keydown:function(Xt){$t("keydown",Xt)},keyup:function(Xt){$t("keyup",Xt)},touchstart:function(Xt){$t("touchstart",Xt)},touchmove:function(Xt){$t("touchmove",Xt)},touchend:function(Xt){$t("touchend",Xt)},tap:function(Xt){$t("tap",Xt)}}};function a(O){return O&&O.__esModule&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O}function s(O){if(O.__esModule)return O;var W=O.default;if(typeof W=="function"){var xt=function Ht(){if(this instanceof Ht){var $t=[null];$t.push.apply($t,arguments);var Xt=Function.bind.apply(W,$t);return new Xt}return W.apply(this,arguments)};xt.prototype=W.prototype}else xt={};return Object.defineProperty(xt,"__esModule",{value:!0}),Object.keys(O).forEach(function(Ht){var $t=Object.getOwnPropertyDescriptor(O,Ht);Object.defineProperty(xt,Ht,$t.get?$t:{enumerable:!0,get:function(){return O[Ht]}})}),xt}var d={},l={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},o=l;function g(O){var W=0;if(O&&O.length>0){W+=Math.abs(_(O[0]));for(var xt=1;xt<O.length;xt++)W-=Math.abs(_(O[xt]))}return W}function _(O){var W,xt,Ht,$t,Xt,_e,cn=0,dn=O.length;if(dn>2){for(_e=0;_e<dn;_e++)_e===dn-2?(Ht=dn-2,$t=dn-1,Xt=0):_e===dn-1?(Ht=dn-1,$t=0,Xt=1):(Ht=_e,$t=_e+1,Xt=_e+2),W=O[Ht],xt=O[$t],cn+=(I(O[Xt][0])-I(W[0]))*Math.sin(I(xt[1]));cn=cn*o.RADIUS*o.RADIUS/2}return cn}function I(O){return O*Math.PI/180}d.geometry=function O(W){var xt,Ht=0;switch(W.type){case"Polygon":return g(W.coordinates);case"MultiPolygon":for(xt=0;xt<W.coordinates.length;xt++)Ht+=g(W.coordinates[xt]);return Ht;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(xt=0;xt<W.geometries.length;xt++)Ht+=O(W.geometries[xt]);return Ht}},d.ring=_;var C={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},E={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},S={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},k={POLYGON:"polygon",LINE:"line_string",POINT:"point"},D={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},N={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},U={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},F={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},j={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},$={ACTIVE:"true",INACTIVE:"false"},K=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],tt=-85,it=Object.freeze({__proto__:null,classes:C,sources:E,cursors:S,types:k,geojsonTypes:D,modes:N,events:U,updateActions:F,meta:j,activeStates:$,interactions:K,LAT_MIN:-90,LAT_RENDERED_MIN:tt,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),et={Point:0,LineString:1,MultiLineString:1,Polygon:2};function q(O,W){var xt=et[O.geometry.type]-et[W.geometry.type];return xt===0&&O.geometry.type===D.POLYGON?O.area-W.area:xt}function ut(O){return O.map(function(W){return W.geometry.type===D.POLYGON&&(W.area=d.geometry({type:D.FEATURE,property:{},geometry:W.geometry})),W}).sort(q).map(function(W){return delete W.area,W})}function Ct(O,W){return W===void 0&&(W=0),[[O.point.x-W,O.point.y-W],[O.point.x+W,O.point.y+W]]}function ot(O){if(this._items={},this._nums={},this._length=O?O.length:0,O)for(var W=0,xt=O.length;W<xt;W++)this.add(O[W]),O[W]!==void 0&&(typeof O[W]=="string"?this._items[O[W]]=W:this._nums[O[W]]=W)}ot.prototype.add=function(O){return this.has(O)||(this._length++,typeof O=="string"?this._items[O]=this._length:this._nums[O]=this._length),this},ot.prototype.delete=function(O){return this.has(O)===!1||(this._length--,delete this._items[O],delete this._nums[O]),this},ot.prototype.has=function(O){return(typeof O=="string"||typeof O=="number")&&(this._items[O]!==void 0||this._nums[O]!==void 0)},ot.prototype.values=function(){var O=this,W=[];return Object.keys(this._items).forEach(function(xt){W.push({k:xt,v:O._items[xt]})}),Object.keys(this._nums).forEach(function(xt){W.push({k:JSON.parse(xt),v:O._nums[xt]})}),W.sort(function(xt,Ht){return xt.v-Ht.v}).map(function(xt){return xt.k})},ot.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var bt=[j.FEATURE,j.MIDPOINT,j.VERTEX],X={click:function(O,W,xt){return Wt(O,W,xt,xt.options.clickBuffer)},touch:function(O,W,xt){return Wt(O,W,xt,xt.options.touchBuffer)}};function Wt(O,W,xt,Ht){if(xt.map===null)return[];var $t=O?Ct(O,Ht):W,Xt={};xt.options.styles&&(Xt.layers=xt.options.styles.map(function(An){return An.id}).filter(function(An){return xt.map.getLayer(An)!=null}));var _e=xt.map.queryRenderedFeatures($t,Xt).filter(function(An){return bt.indexOf(An.properties.meta)!==-1}),cn=new ot,dn=[];return _e.forEach(function(An){var mn=An.properties.id;cn.has(mn)||(cn.add(mn),dn.push(An))}),ut(dn)}function Vt(O,W){var xt=X.click(O,null,W),Ht={mouse:S.NONE};return xt[0]&&(Ht.mouse=xt[0].properties.active===$.ACTIVE?S.MOVE:S.POINTER,Ht.feature=xt[0].properties.meta),W.events.currentModeName().indexOf("draw")!==-1&&(Ht.mouse=S.ADD),W.ui.queueMapClasses(Ht),W.ui.updateMapClasses(),xt[0]}function Bt(O,W){var xt=O.x-W.x,Ht=O.y-W.y;return Math.sqrt(xt*xt+Ht*Ht)}function ae(O,W,xt){xt===void 0&&(xt={});var Ht=xt.fineTolerance!=null?xt.fineTolerance:4,$t=xt.grossTolerance!=null?xt.grossTolerance:12,Xt=xt.interval!=null?xt.interval:500;O.point=O.point||W.point,O.time=O.time||W.time;var _e=Bt(O.point,W.point);return _e<Ht||_e<$t&&W.time-O.time<Xt}function ye(O,W,xt){xt===void 0&&(xt={});var Ht=xt.tolerance!=null?xt.tolerance:25,$t=xt.interval!=null?xt.interval:250;return O.point=O.point||W.point,O.time=O.time||W.time,Bt(O.point,W.point)<Ht&&W.time-O.time<$t}var en={exports:{}},Jt=en.exports=function(O,W){if(W||(W=16),O===void 0&&(O=128),O<=0)return"0";for(var xt=Math.log(Math.pow(2,O))/Math.log(W),Ht=2;xt===1/0;Ht*=2)xt=Math.log(Math.pow(2,O/Ht))/Math.log(W)*Ht;var $t=xt-Math.floor(xt),Xt="";for(Ht=0;Ht<Math.floor(xt);Ht++)Xt=Math.floor(Math.random()*W).toString(W)+Xt;if($t){var _e=Math.pow(W,$t);Xt=Math.floor(Math.random()*_e).toString(W)+Xt}var cn=parseInt(Xt,W);return cn!==1/0&&cn>=Math.pow(2,O)?Jt(O,W):Xt};Jt.rack=function(O,W,xt){var Ht=function(Xt){var _e=0;do{if(_e++>10){if(!xt)throw new Error("too many ID collisions, use more bits");O+=xt}var cn=Jt(O,W)}while(Object.hasOwnProperty.call($t,cn));return $t[cn]=Xt,cn},$t=Ht.hats={};return Ht.get=function(Xt){return Ht.hats[Xt]},Ht.set=function(Xt,_e){return Ht.hats[Xt]=_e,Ht},Ht.bits=O||128,Ht.base=W||16,Ht};var Gt=a(en.exports),Re=function(O,W){this.ctx=O,this.properties=W.properties||{},this.coordinates=W.geometry.coordinates,this.id=W.id||Gt(),this.type=W.geometry.type};Re.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Re.prototype.incomingCoords=function(O){this.setCoordinates(O)},Re.prototype.setCoordinates=function(O){this.coordinates=O,this.changed()},Re.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Re.prototype.setProperty=function(O,W){this.properties[O]=W},Re.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:D.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Re.prototype.internal=function(O){var W={id:this.id,meta:j.FEATURE,"meta:type":this.type,active:$.INACTIVE,mode:O};if(this.ctx.options.userProperties)for(var xt in this.properties)W["user_"+xt]=this.properties[xt];return{type:D.FEATURE,properties:W,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var $e=function(O,W){Re.call(this,O,W)};($e.prototype=Object.create(Re.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},$e.prototype.updateCoordinate=function(O,W,xt){this.coordinates=arguments.length===3?[W,xt]:[O,W],this.changed()},$e.prototype.getCoordinate=function(){return this.getCoordinates()};var Ce=function(O,W){Re.call(this,O,W)};(Ce.prototype=Object.create(Re.prototype)).isValid=function(){return this.coordinates.length>1},Ce.prototype.addCoordinate=function(O,W,xt){this.changed();var Ht=parseInt(O,10);this.coordinates.splice(Ht,0,[W,xt])},Ce.prototype.getCoordinate=function(O){var W=parseInt(O,10);return JSON.parse(JSON.stringify(this.coordinates[W]))},Ce.prototype.removeCoordinate=function(O){this.changed(),this.coordinates.splice(parseInt(O,10),1)},Ce.prototype.updateCoordinate=function(O,W,xt){var Ht=parseInt(O,10);this.coordinates[Ht]=[W,xt],this.changed()};var nn=function(O,W){Re.call(this,O,W),this.coordinates=this.coordinates.map(function(xt){return xt.slice(0,-1)})};(nn.prototype=Object.create(Re.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(O){return O.length>2})},nn.prototype.incomingCoords=function(O){this.coordinates=O.map(function(W){return W.slice(0,-1)}),this.changed()},nn.prototype.setCoordinates=function(O){this.coordinates=O,this.changed()},nn.prototype.addCoordinate=function(O,W,xt){this.changed();var Ht=O.split(".").map(function($t){return parseInt($t,10)});this.coordinates[Ht[0]].splice(Ht[1],0,[W,xt])},nn.prototype.removeCoordinate=function(O){this.changed();var W=O.split(".").map(function(Ht){return parseInt(Ht,10)}),xt=this.coordinates[W[0]];xt&&(xt.splice(W[1],1),xt.length<3&&this.coordinates.splice(W[0],1))},nn.prototype.getCoordinate=function(O){var W=O.split(".").map(function(Ht){return parseInt(Ht,10)}),xt=this.coordinates[W[0]];return JSON.parse(JSON.stringify(xt[W[1]]))},nn.prototype.getCoordinates=function(){return this.coordinates.map(function(O){return O.concat([O[0]])})},nn.prototype.updateCoordinate=function(O,W,xt){this.changed();var Ht=O.split("."),$t=parseInt(Ht[0],10),Xt=parseInt(Ht[1],10);this.coordinates[$t]===void 0&&(this.coordinates[$t]=[]),this.coordinates[$t][Xt]=[W,xt]};var be={MultiPoint:$e,MultiLineString:Ce,MultiPolygon:nn},Me=function(O,W,xt,Ht,$t){var Xt=xt.split("."),_e=parseInt(Xt[0],10),cn=Xt[1]?Xt.slice(1).join("."):null;return O[_e][W](cn,Ht,$t)},xe=function(O,W){if(Re.call(this,O,W),delete this.coordinates,this.model=be[W.geometry.type],this.model===void 0)throw new TypeError(W.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(W.geometry.coordinates)};function Be(O){this.map=O.map,this.drawConfig=JSON.parse(JSON.stringify(O.options||{})),this._ctx=O}(xe.prototype=Object.create(Re.prototype))._coordinatesToFeatures=function(O){var W=this,xt=this.model.bind(this);return O.map(function(Ht){return new xt(W.ctx,{id:Gt(),type:D.FEATURE,properties:{},geometry:{coordinates:Ht,type:W.type.replace("Multi","")}})})},xe.prototype.isValid=function(){return this.features.every(function(O){return O.isValid()})},xe.prototype.setCoordinates=function(O){this.features=this._coordinatesToFeatures(O),this.changed()},xe.prototype.getCoordinate=function(O){return Me(this.features,"getCoordinate",O)},xe.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(O){return O.type===D.POLYGON?O.getCoordinates():O.coordinates})))},xe.prototype.updateCoordinate=function(O,W,xt){Me(this.features,"updateCoordinate",O,W,xt),this.changed()},xe.prototype.addCoordinate=function(O,W,xt){Me(this.features,"addCoordinate",O,W,xt),this.changed()},xe.prototype.removeCoordinate=function(O){Me(this.features,"removeCoordinate",O),this.changed()},xe.prototype.getFeatures=function(){return this.features},Be.prototype.setSelected=function(O){return this._ctx.store.setSelected(O)},Be.prototype.setSelectedCoordinates=function(O){var W=this;this._ctx.store.setSelectedCoordinates(O),O.reduce(function(xt,Ht){return xt[Ht.feature_id]===void 0&&(xt[Ht.feature_id]=!0,W._ctx.store.get(Ht.feature_id).changed()),xt},{})},Be.prototype.getSelected=function(){return this._ctx.store.getSelected()},Be.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Be.prototype.isSelected=function(O){return this._ctx.store.isSelected(O)},Be.prototype.getFeature=function(O){return this._ctx.store.get(O)},Be.prototype.select=function(O){return this._ctx.store.select(O)},Be.prototype.deselect=function(O){return this._ctx.store.deselect(O)},Be.prototype.deleteFeature=function(O,W){return W===void 0&&(W={}),this._ctx.store.delete(O,W)},Be.prototype.addFeature=function(O){return this._ctx.store.add(O)},Be.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Be.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Be.prototype.setActionableState=function(O){O===void 0&&(O={});var W={trash:O.trash||!1,combineFeatures:O.combineFeatures||!1,uncombineFeatures:O.uncombineFeatures||!1};return this._ctx.events.actionable(W)},Be.prototype.changeMode=function(O,W,xt){return W===void 0&&(W={}),xt===void 0&&(xt={}),this._ctx.events.changeMode(O,W,xt)},Be.prototype.updateUIClasses=function(O){return this._ctx.ui.queueMapClasses(O)},Be.prototype.activateUIButton=function(O){return this._ctx.ui.setActiveButton(O)},Be.prototype.featuresAt=function(O,W,xt){if(xt===void 0&&(xt="click"),xt!=="click"&&xt!=="touch")throw new Error("invalid buffer type");return X[xt](O,W,this._ctx)},Be.prototype.newFeature=function(O){var W=O.geometry.type;return W===D.POINT?new $e(this._ctx,O):W===D.LINE_STRING?new Ce(this._ctx,O):W===D.POLYGON?new nn(this._ctx,O):new xe(this._ctx,O)},Be.prototype.isInstanceOf=function(O,W){if(O===D.POINT)return W instanceof $e;if(O===D.LINE_STRING)return W instanceof Ce;if(O===D.POLYGON)return W instanceof nn;if(O==="MultiFeature")return W instanceof xe;throw new Error("Unknown feature class: "+O)},Be.prototype.doRender=function(O){return this._ctx.store.featureChanged(O)},Be.prototype.onSetup=function(){},Be.prototype.onDrag=function(){},Be.prototype.onClick=function(){},Be.prototype.onMouseMove=function(){},Be.prototype.onMouseDown=function(){},Be.prototype.onMouseUp=function(){},Be.prototype.onMouseOut=function(){},Be.prototype.onKeyUp=function(){},Be.prototype.onKeyDown=function(){},Be.prototype.onTouchStart=function(){},Be.prototype.onTouchMove=function(){},Be.prototype.onTouchEnd=function(){},Be.prototype.onTap=function(){},Be.prototype.onStop=function(){},Be.prototype.onTrash=function(){},Be.prototype.onCombineFeature=function(){},Be.prototype.onUncombineFeature=function(){},Be.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Je={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Ln=Object.keys(Je);function Tt(O){var W=Object.keys(O);return function(xt,Ht){Ht===void 0&&(Ht={});var $t={},Xt=W.reduce(function(_e,cn){return _e[cn]=O[cn],_e},new Be(xt));return{start:function(){var _e=this;$t=Xt.onSetup(Ht),Ln.forEach(function(cn){var dn,An=Je[cn],mn=function(){return!1};O[An]&&(mn=function(){return!0}),_e.on(cn,mn,(dn=An,function(Mn){return Xt[dn]($t,Mn)}))})},stop:function(){Xt.onStop($t)},trash:function(){Xt.onTrash($t)},combineFeatures:function(){Xt.onCombineFeatures($t)},uncombineFeatures:function(){Xt.onUncombineFeatures($t)},render:function(_e,cn){Xt.toDisplayFeatures($t,_e,cn)}}}}function H(O){return[].concat(O).filter(function(W){return W!==void 0})}function Rt(){var O=this;if(!(O.ctx.map&&O.ctx.map.getSource(E.HOT)!==void 0))return dn();var W=O.ctx.events.currentModeName();O.ctx.ui.queueMapClasses({mode:W});var xt=[],Ht=[];O.isDirty?Ht=O.getAllIds():(xt=O.getChangedIds().filter(function(An){return O.get(An)!==void 0}),Ht=O.sources.hot.filter(function(An){return An.properties.id&&xt.indexOf(An.properties.id)===-1&&O.get(An.properties.id)!==void 0}).map(function(An){return An.properties.id})),O.sources.hot=[];var $t=O.sources.cold.length;O.sources.cold=O.isDirty?[]:O.sources.cold.filter(function(An){var mn=An.properties.id||An.properties.parent;return xt.indexOf(mn)===-1});var Xt=$t!==O.sources.cold.length||Ht.length>0;function _e(An,mn){var Mn=O.get(An).internal(W);O.ctx.events.currentModeRender(Mn,function(Kn){O.sources[mn].push(Kn)})}if(xt.forEach(function(An){return _e(An,"hot")}),Ht.forEach(function(An){return _e(An,"cold")}),Xt&&O.ctx.map.getSource(E.COLD).setData({type:D.FEATURE_COLLECTION,features:O.sources.cold}),O.ctx.map.getSource(E.HOT).setData({type:D.FEATURE_COLLECTION,features:O.sources.hot}),O._emitSelectionChange&&(O.ctx.map.fire(U.SELECTION_CHANGE,{features:O.getSelected().map(function(An){return An.toGeoJSON()}),points:O.getSelectedCoordinates().map(function(An){return{type:D.FEATURE,properties:{},geometry:{type:D.POINT,coordinates:An.coordinates}}})}),O._emitSelectionChange=!1),O._deletedFeaturesToEmit.length){var cn=O._deletedFeaturesToEmit.map(function(An){return An.toGeoJSON()});O._deletedFeaturesToEmit=[],O.ctx.map.fire(U.DELETE,{features:cn})}function dn(){O.isDirty=!1,O.clearChangedIds()}dn(),O.ctx.map.fire(U.RENDER,{})}function Pt(O){var W,xt=this;this._features={},this._featureIds=new ot,this._selectedFeatureIds=new ot,this._selectedCoordinates=[],this._changedFeatureIds=new ot,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=O,this.sources={hot:[],cold:[]},this.render=function(){W||(W=requestAnimationFrame(function(){W=null,Rt.call(xt)}))},this.isDirty=!1}function gt(O,W){var xt=O._selectedCoordinates.filter(function(Ht){return O._selectedFeatureIds.has(Ht.feature_id)});O._selectedCoordinates.length===xt.length||W.silent||(O._emitSelectionChange=!0),O._selectedCoordinates=xt}Pt.prototype.createRenderBatch=function(){var O=this,W=this.render,xt=0;return this.render=function(){xt++},function(){O.render=W,xt>0&&O.render()}},Pt.prototype.setDirty=function(){return this.isDirty=!0,this},Pt.prototype.featureChanged=function(O){return this._changedFeatureIds.add(O),this},Pt.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Pt.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Pt.prototype.getAllIds=function(){return this._featureIds.values()},Pt.prototype.add=function(O){return this.featureChanged(O.id),this._features[O.id]=O,this._featureIds.add(O.id),this},Pt.prototype.delete=function(O,W){var xt=this;return W===void 0&&(W={}),H(O).forEach(function(Ht){xt._featureIds.has(Ht)&&(xt._featureIds.delete(Ht),xt._selectedFeatureIds.delete(Ht),W.silent||xt._deletedFeaturesToEmit.indexOf(xt._features[Ht])===-1&&xt._deletedFeaturesToEmit.push(xt._features[Ht]),delete xt._features[Ht],xt.isDirty=!0)}),gt(this,W),this},Pt.prototype.get=function(O){return this._features[O]},Pt.prototype.getAll=function(){var O=this;return Object.keys(this._features).map(function(W){return O._features[W]})},Pt.prototype.select=function(O,W){var xt=this;return W===void 0&&(W={}),H(O).forEach(function(Ht){xt._selectedFeatureIds.has(Ht)||(xt._selectedFeatureIds.add(Ht),xt._changedFeatureIds.add(Ht),W.silent||(xt._emitSelectionChange=!0))}),this},Pt.prototype.deselect=function(O,W){var xt=this;return W===void 0&&(W={}),H(O).forEach(function(Ht){xt._selectedFeatureIds.has(Ht)&&(xt._selectedFeatureIds.delete(Ht),xt._changedFeatureIds.add(Ht),W.silent||(xt._emitSelectionChange=!0))}),gt(this,W),this},Pt.prototype.clearSelected=function(O){return O===void 0&&(O={}),this.deselect(this._selectedFeatureIds.values(),{silent:O.silent}),this},Pt.prototype.setSelected=function(O,W){var xt=this;return W===void 0&&(W={}),O=H(O),this.deselect(this._selectedFeatureIds.values().filter(function(Ht){return O.indexOf(Ht)===-1}),{silent:W.silent}),this.select(O.filter(function(Ht){return!xt._selectedFeatureIds.has(Ht)}),{silent:W.silent}),this},Pt.prototype.setSelectedCoordinates=function(O){return this._selectedCoordinates=O,this._emitSelectionChange=!0,this},Pt.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Pt.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Pt.prototype.getSelected=function(){var O=this;return this._selectedFeatureIds.values().map(function(W){return O.get(W)})},Pt.prototype.getSelectedCoordinates=function(){var O=this;return this._selectedCoordinates.map(function(W){return{coordinates:O.get(W.feature_id).getCoordinate(W.coord_path)}})},Pt.prototype.isSelected=function(O){return this._selectedFeatureIds.has(O)},Pt.prototype.setFeatureProperty=function(O,W,xt){this.get(O).setProperty(W,xt),this.featureChanged(O)},Pt.prototype.storeMapConfig=function(){var O=this;K.forEach(function(W){O.ctx.map[W]&&(O._mapInitialConfig[W]=O.ctx.map[W].isEnabled())})},Pt.prototype.restoreMapConfig=function(){var O=this;Object.keys(this._mapInitialConfig).forEach(function(W){O._mapInitialConfig[W]?O.ctx.map[W].enable():O.ctx.map[W].disable()})},Pt.prototype.getInitialConfigValue=function(O){return this._mapInitialConfig[O]===void 0||this._mapInitialConfig[O]};var yt=function(){for(var O=arguments,W={},xt=0;xt<arguments.length;xt++){var Ht=O[xt];for(var $t in Ht)jt.call(Ht,$t)&&(W[$t]=Ht[$t])}return W},jt=Object.prototype.hasOwnProperty,ee=a(yt),ue=["mode","feature","mouse"];function Ut(O){var W=null,xt=null,Ht={onRemove:function(){return O.map.off("load",Ht.connect),clearInterval(xt),Ht.removeLayers(),O.store.restoreMapConfig(),O.ui.removeButtons(),O.events.removeEventListeners(),O.ui.clearMapClasses(),O.boxZoomInitial&&O.map.boxZoom.enable(),O.map=null,O.container=null,O.store=null,W&&W.parentNode&&W.parentNode.removeChild(W),W=null,this},connect:function(){O.map.off("load",Ht.connect),clearInterval(xt),Ht.addLayers(),O.store.storeMapConfig(),O.events.addEventListeners()},onAdd:function($t){var Xt=$t.fire;return $t.fire=function(_e,cn){var dn=arguments;return Xt.length===1&&arguments.length!==1&&(dn=[ee({},{type:_e},cn)]),Xt.apply($t,dn)},O.map=$t,O.events=function(_e){var cn=Object.keys(_e.options.modes).reduce(function(on,kn){return on[kn]=Tt(_e.options.modes[kn]),on},{}),dn={},An={},mn={},Mn=null,Kn=null;mn.drag=function(on,kn){kn({point:on.point,time:new Date().getTime()})?(_e.ui.queueMapClasses({mouse:S.DRAG}),Kn.drag(on)):on.originalEvent.stopPropagation()},mn.mousedrag=function(on){mn.drag(on,function(kn){return!ae(dn,kn)})},mn.touchdrag=function(on){mn.drag(on,function(kn){return!ye(An,kn)})},mn.mousemove=function(on){if((on.originalEvent.buttons!==void 0?on.originalEvent.buttons:on.originalEvent.which)===1)return mn.mousedrag(on);var kn=Vt(on,_e);on.featureTarget=kn,Kn.mousemove(on)},mn.mousedown=function(on){dn={time:new Date().getTime(),point:on.point};var kn=Vt(on,_e);on.featureTarget=kn,Kn.mousedown(on)},mn.mouseup=function(on){var kn=Vt(on,_e);on.featureTarget=kn,ae(dn,{point:on.point,time:new Date().getTime()})?Kn.click(on):Kn.mouseup(on)},mn.mouseout=function(on){Kn.mouseout(on)},mn.touchstart=function(on){if(_e.options.touchEnabled){An={time:new Date().getTime(),point:on.point};var kn=X.touch(on,null,_e)[0];on.featureTarget=kn,Kn.touchstart(on)}},mn.touchmove=function(on){if(_e.options.touchEnabled)return Kn.touchmove(on),mn.touchdrag(on)},mn.touchend=function(on){if(on.originalEvent.preventDefault(),_e.options.touchEnabled){var kn=X.touch(on,null,_e)[0];on.featureTarget=kn,ye(An,{time:new Date().getTime(),point:on.point})?Kn.tap(on):Kn.touchend(on)}};var Zr=function(on){return!(on===8||on===46||on>=48&&on<=57)};function or(on,kn,Rr){Rr===void 0&&(Rr={}),Kn.stop();var bi=cn[on];if(bi===void 0)throw new Error(on+" is not valid");Mn=on;var gi=bi(_e,kn);Kn=n(gi,_e),Rr.silent||_e.map.fire(U.MODE_CHANGE,{mode:on}),_e.store.setDirty(),_e.store.render()}mn.keydown=function(on){(on.srcElement||on.target).classList.contains("mapboxgl-canvas")&&(on.keyCode!==8&&on.keyCode!==46||!_e.options.controls.trash?Zr(on.keyCode)?Kn.keydown(on):on.keyCode===49&&_e.options.controls.point?or(N.DRAW_POINT):on.keyCode===50&&_e.options.controls.line_string?or(N.DRAW_LINE_STRING):on.keyCode===51&&_e.options.controls.polygon&&or(N.DRAW_POLYGON):(on.preventDefault(),Kn.trash()))},mn.keyup=function(on){Zr(on.keyCode)&&Kn.keyup(on)},mn.zoomend=function(){_e.store.changeZoom()},mn.data=function(on){if(on.dataType==="style"){var kn=_e.setup,Rr=_e.map,bi=_e.options,gi=_e.store;bi.styles.some(function(Jo){return Rr.getLayer(Jo.id)})||(kn.addLayers(),gi.setDirty(),gi.render())}};var ai={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Mn=_e.options.defaultMode,Kn=n(cn[Mn](_e),_e)},changeMode:or,actionable:function(on){var kn=!1;Object.keys(on).forEach(function(Rr){if(ai[Rr]===void 0)throw new Error("Invalid action type");ai[Rr]!==on[Rr]&&(kn=!0),ai[Rr]=on[Rr]}),kn&&_e.map.fire(U.ACTIONABLE,{actions:ai})},currentModeName:function(){return Mn},currentModeRender:function(on,kn){return Kn.render(on,kn)},fire:function(on,kn){mn[on]&&mn[on](kn)},addEventListeners:function(){_e.map.on("mousemove",mn.mousemove),_e.map.on("mousedown",mn.mousedown),_e.map.on("mouseup",mn.mouseup),_e.map.on("data",mn.data),_e.map.on("touchmove",mn.touchmove),_e.map.on("touchstart",mn.touchstart),_e.map.on("touchend",mn.touchend),_e.container.addEventListener("mouseout",mn.mouseout),_e.options.keybindings&&(_e.container.addEventListener("keydown",mn.keydown),_e.container.addEventListener("keyup",mn.keyup))},removeEventListeners:function(){_e.map.off("mousemove",mn.mousemove),_e.map.off("mousedown",mn.mousedown),_e.map.off("mouseup",mn.mouseup),_e.map.off("data",mn.data),_e.map.off("touchmove",mn.touchmove),_e.map.off("touchstart",mn.touchstart),_e.map.off("touchend",mn.touchend),_e.container.removeEventListener("mouseout",mn.mouseout),_e.options.keybindings&&(_e.container.removeEventListener("keydown",mn.keydown),_e.container.removeEventListener("keyup",mn.keyup))},trash:function(on){Kn.trash(on)},combineFeatures:function(){Kn.combineFeatures()},uncombineFeatures:function(){Kn.uncombineFeatures()},getMode:function(){return Mn}}}(O),O.ui=function(_e){var cn={},dn=null,An={mode:null,feature:null,mouse:null},mn={mode:null,feature:null,mouse:null};function Mn(on){mn=ee(mn,on)}function Kn(){var on,kn;if(_e.container){var Rr=[],bi=[];ue.forEach(function(gi){mn[gi]!==An[gi]&&(Rr.push(gi+"-"+An[gi]),mn[gi]!==null&&bi.push(gi+"-"+mn[gi]))}),Rr.length>0&&(on=_e.container.classList).remove.apply(on,Rr),bi.length>0&&(kn=_e.container.classList).add.apply(kn,bi),An=ee(An,mn)}}function Zr(on,kn){kn===void 0&&(kn={});var Rr=document.createElement("button");return Rr.className=C.CONTROL_BUTTON+" "+kn.className,Rr.setAttribute("title",kn.title),kn.container.appendChild(Rr),Rr.addEventListener("click",function(bi){if(bi.preventDefault(),bi.stopPropagation(),bi.target===dn)return or(),void kn.onDeactivate();ai(on),kn.onActivate()},!0),Rr}function or(){dn&&(dn.classList.remove(C.ACTIVE_BUTTON),dn=null)}function ai(on){or();var kn=cn[on];kn&&kn&&on!=="trash"&&(kn.classList.add(C.ACTIVE_BUTTON),dn=kn)}return{setActiveButton:ai,queueMapClasses:Mn,updateMapClasses:Kn,clearMapClasses:function(){Mn({mode:null,feature:null,mouse:null}),Kn()},addButtons:function(){var on=_e.options.controls,kn=document.createElement("div");return kn.className=C.CONTROL_GROUP+" "+C.CONTROL_BASE,on&&(on[k.LINE]&&(cn[k.LINE]=Zr(k.LINE,{container:kn,className:C.CONTROL_BUTTON_LINE,title:"LineString tool "+(_e.options.keybindings?"(l)":""),onActivate:function(){return _e.events.changeMode(N.DRAW_LINE_STRING)},onDeactivate:function(){return _e.events.trash()}})),on[k.POLYGON]&&(cn[k.POLYGON]=Zr(k.POLYGON,{container:kn,className:C.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(_e.options.keybindings?"(p)":""),onActivate:function(){return _e.events.changeMode(N.DRAW_POLYGON)},onDeactivate:function(){return _e.events.trash()}})),on[k.POINT]&&(cn[k.POINT]=Zr(k.POINT,{container:kn,className:C.CONTROL_BUTTON_POINT,title:"Marker tool "+(_e.options.keybindings?"(m)":""),onActivate:function(){return _e.events.changeMode(N.DRAW_POINT)},onDeactivate:function(){return _e.events.trash()}})),on.trash&&(cn.trash=Zr("trash",{container:kn,className:C.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){_e.events.trash()}})),on.combine_features&&(cn.combine_features=Zr("combineFeatures",{container:kn,className:C.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){_e.events.combineFeatures()}})),on.uncombine_features&&(cn.uncombine_features=Zr("uncombineFeatures",{container:kn,className:C.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){_e.events.uncombineFeatures()}}))),kn},removeButtons:function(){Object.keys(cn).forEach(function(on){var kn=cn[on];kn.parentNode&&kn.parentNode.removeChild(kn),delete cn[on]})}}}(O),O.container=$t.getContainer(),O.store=new Pt(O),W=O.ui.addButtons(),O.options.boxSelect&&(O.boxZoomInitial=$t.boxZoom.isEnabled(),$t.boxZoom.disable(),$t.dragPan.disable(),$t.dragPan.enable()),$t.loaded()?Ht.connect():($t.on("load",Ht.connect),xt=setInterval(function(){$t.loaded()&&Ht.connect()},16)),O.events.start(),W},addLayers:function(){O.map.addSource(E.COLD,{data:{type:D.FEATURE_COLLECTION,features:[]},type:"geojson"}),O.map.addSource(E.HOT,{data:{type:D.FEATURE_COLLECTION,features:[]},type:"geojson"}),O.options.styles.forEach(function($t){O.map.addLayer($t)}),O.store.setDirty(!0),O.store.render()},removeLayers:function(){O.options.styles.forEach(function($t){O.map.getLayer($t.id)&&O.map.removeLayer($t.id)}),O.map.getSource(E.COLD)&&O.map.removeSource(E.COLD),O.map.getSource(E.HOT)&&O.map.removeSource(E.HOT)}};return O.setup=Ht,Ht}var Ie=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function je(O){return function(W){var xt=W.featureTarget;return!!xt&&!!xt.properties&&xt.properties.meta===O}}function Le(O){return!!O.originalEvent&&!!O.originalEvent.shiftKey&&O.originalEvent.button===0}function Ke(O){return!!O.featureTarget&&!!O.featureTarget.properties&&O.featureTarget.properties.active===$.ACTIVE&&O.featureTarget.properties.meta===j.FEATURE}function _n(O){return!!O.featureTarget&&!!O.featureTarget.properties&&O.featureTarget.properties.active===$.INACTIVE&&O.featureTarget.properties.meta===j.FEATURE}function wn(O){return O.featureTarget===void 0}function de(O){return!!O.featureTarget&&!!O.featureTarget.properties&&O.featureTarget.properties.meta===j.FEATURE}function ve(O){var W=O.featureTarget;return!!W&&!!W.properties&&W.properties.meta===j.VERTEX}function Te(O){return!!O.originalEvent&&O.originalEvent.shiftKey===!0}function Ye(O){return O.keyCode===27}function un(O){return O.keyCode===13}var Nn=Object.freeze({__proto__:null,isOfMetaType:je,isShiftMousedown:Le,isActiveFeature:Ke,isInactiveFeature:_n,noTarget:wn,isFeature:de,isVertex:ve,isShiftDown:Te,isEscapeKey:Ye,isEnterKey:un,isTrue:function(){return!0}}),oe=ht;function ht(O,W){this.x=O,this.y=W}ht.prototype={clone:function(){return new ht(this.x,this.y)},add:function(O){return this.clone()._add(O)},sub:function(O){return this.clone()._sub(O)},multByPoint:function(O){return this.clone()._multByPoint(O)},divByPoint:function(O){return this.clone()._divByPoint(O)},mult:function(O){return this.clone()._mult(O)},div:function(O){return this.clone()._div(O)},rotate:function(O){return this.clone()._rotate(O)},rotateAround:function(O,W){return this.clone()._rotateAround(O,W)},matMult:function(O){return this.clone()._matMult(O)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(O){return this.x===O.x&&this.y===O.y},dist:function(O){return Math.sqrt(this.distSqr(O))},distSqr:function(O){var W=O.x-this.x,xt=O.y-this.y;return W*W+xt*xt},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(O){return Math.atan2(this.y-O.y,this.x-O.x)},angleWith:function(O){return this.angleWithSep(O.x,O.y)},angleWithSep:function(O,W){return Math.atan2(this.x*W-this.y*O,this.x*O+this.y*W)},_matMult:function(O){var W=O[0]*this.x+O[1]*this.y,xt=O[2]*this.x+O[3]*this.y;return this.x=W,this.y=xt,this},_add:function(O){return this.x+=O.x,this.y+=O.y,this},_sub:function(O){return this.x-=O.x,this.y-=O.y,this},_mult:function(O){return this.x*=O,this.y*=O,this},_div:function(O){return this.x/=O,this.y/=O,this},_multByPoint:function(O){return this.x*=O.x,this.y*=O.y,this},_divByPoint:function(O){return this.x/=O.x,this.y/=O.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var O=this.y;return this.y=this.x,this.x=-O,this},_rotate:function(O){var W=Math.cos(O),xt=Math.sin(O),Ht=W*this.x-xt*this.y,$t=xt*this.x+W*this.y;return this.x=Ht,this.y=$t,this},_rotateAround:function(O,W){var xt=Math.cos(O),Ht=Math.sin(O),$t=W.x+xt*(this.x-W.x)-Ht*(this.y-W.y),Xt=W.y+Ht*(this.x-W.x)+xt*(this.y-W.y);return this.x=$t,this.y=Xt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ht.convert=function(O){return O instanceof ht?O:Array.isArray(O)?new ht(O[0],O[1]):O};var mt=a(oe);function wt(O,W){var xt=W.getBoundingClientRect();return new mt(O.clientX-xt.left-(W.clientLeft||0),O.clientY-xt.top-(W.clientTop||0))}function kt(O,W,xt,Ht){return{type:D.FEATURE,properties:{meta:j.VERTEX,parent:O,coord_path:xt,active:Ht?$.ACTIVE:$.INACTIVE},geometry:{type:D.POINT,coordinates:W}}}function vt(O,W,xt){var Ht=W.geometry.coordinates,$t=xt.geometry.coordinates;if(Ht[1]>85||Ht[1]<tt||$t[1]>85||$t[1]<tt)return null;var Xt={lng:(Ht[0]+$t[0])/2,lat:(Ht[1]+$t[1])/2};return{type:D.FEATURE,properties:{meta:j.MIDPOINT,parent:O,lng:Xt.lng,lat:Xt.lat,coord_path:xt.properties.coord_path},geometry:{type:D.POINT,coordinates:[Xt.lng,Xt.lat]}}}function ie(O,W,xt){W===void 0&&(W={}),xt===void 0&&(xt=null);var Ht,$t=O.geometry,Xt=$t.type,_e=$t.coordinates,cn=O.properties&&O.properties.id,dn=[];function An(Mn,Kn){var Zr="",or=null;Mn.forEach(function(ai,on){var kn=Kn!=null?Kn+"."+on:String(on),Rr=kt(cn,ai,kn,mn(kn));if(W.midpoints&&or){var bi=vt(cn,or,Rr);bi&&dn.push(bi)}or=Rr;var gi=JSON.stringify(ai);Zr!==gi&&dn.push(Rr),on===0&&(Zr=gi)})}function mn(Mn){return!!W.selectedPaths&&W.selectedPaths.indexOf(Mn)!==-1}return Xt===D.POINT?dn.push(kt(cn,_e,xt,mn(xt))):Xt===D.POLYGON?_e.forEach(function(Mn,Kn){An(Mn,xt!==null?xt+"."+Kn:String(Kn))}):Xt===D.LINE_STRING?An(_e,xt):Xt.indexOf(D.MULTI_PREFIX)===0&&(Ht=Xt.replace(D.MULTI_PREFIX,""),_e.forEach(function(Mn,Kn){var Zr={type:D.FEATURE,properties:O.properties,geometry:{type:Ht,coordinates:Mn}};dn=dn.concat(ie(Zr,W,Kn))})),dn}var he={enable:function(O){setTimeout(function(){O.map&&O.map.doubleClickZoom&&O._ctx&&O._ctx.store&&O._ctx.store.getInitialConfigValue&&O._ctx.store.getInitialConfigValue("doubleClickZoom")&&O.map.doubleClickZoom.enable()},0)},disable:function(O){setTimeout(function(){O.map&&O.map.doubleClickZoom&&O.map.doubleClickZoom.disable()},0)}},Kt={exports:{}},Fe=function(O){if(!O||!O.type)return null;var W=Ve[O.type];if(!W)return null;if(W==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:O}]};if(W==="feature")return{type:"FeatureCollection",features:[O]};if(W==="featurecollection")return O},Ve={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},we=a(Fe),rn=Object.freeze({__proto__:null,default:function O(W){switch(W&&W.type||null){case"FeatureCollection":return W.features=W.features.reduce(function(xt,Ht){return xt.concat(O(Ht))},[]),W;case"Feature":return W.geometry?O(W.geometry).map(function(xt){var Ht={type:"Feature",properties:JSON.parse(JSON.stringify(W.properties)),geometry:xt};return W.id!==void 0&&(Ht.id=W.id),Ht}):[W];case"MultiPoint":return W.coordinates.map(function(xt){return{type:"Point",coordinates:xt}});case"MultiPolygon":return W.coordinates.map(function(xt){return{type:"Polygon",coordinates:xt}});case"MultiLineString":return W.coordinates.map(function(xt){return{type:"LineString",coordinates:xt}});case"GeometryCollection":return W.geometries.map(O).reduce(function(xt,Ht){return xt.concat(Ht)},[]);case"Point":case"Polygon":case"LineString":return[W]}}}),Sn=Fe,En=s(rn),ir=function(O){return function W(xt){return Array.isArray(xt)&&xt.length&&typeof xt[0]=="number"?[xt]:xt.reduce(function(Ht,$t){return Array.isArray($t)&&Array.isArray($t[0])?Ht.concat(W($t)):(Ht.push($t),Ht)},[])}(O)};En instanceof Function||(En=En.default);var gr={exports:{}},Ue=gr.exports=function(O){return new Gn(O)};function Gn(O){this.value=O}function Fr(O,W,xt){var Ht=[],$t=[],Xt=!0;return function _e(cn){var dn=xt?Yr(cn):cn,An={},mn=!0,Mn={node:dn,node_:cn,path:[].concat(Ht),parent:$t[$t.length-1],parents:$t,key:Ht.slice(-1)[0],isRoot:Ht.length===0,level:Ht.length,circular:null,update:function(or,ai){Mn.isRoot||(Mn.parent.node[Mn.key]=or),Mn.node=or,ai&&(mn=!1)},delete:function(or){delete Mn.parent.node[Mn.key],or&&(mn=!1)},remove:function(or){zn(Mn.parent.node)?Mn.parent.node.splice(Mn.key,1):delete Mn.parent.node[Mn.key],or&&(mn=!1)},keys:null,before:function(or){An.before=or},after:function(or){An.after=or},pre:function(or){An.pre=or},post:function(or){An.post=or},stop:function(){Xt=!1},block:function(){mn=!1}};if(!Xt)return Mn;function Kn(){if(typeof Mn.node=="object"&&Mn.node!==null){Mn.keys&&Mn.node_===Mn.node||(Mn.keys=Pr(Mn.node)),Mn.isLeaf=Mn.keys.length==0;for(var or=0;or<$t.length;or++)if($t[or].node_===cn){Mn.circular=$t[or];break}}else Mn.isLeaf=!0,Mn.keys=null;Mn.notLeaf=!Mn.isLeaf,Mn.notRoot=!Mn.isRoot}Kn();var Zr=W.call(Mn,Mn.node);return Zr!==void 0&&Mn.update&&Mn.update(Zr),An.before&&An.before.call(Mn,Mn.node),mn&&(typeof Mn.node!="object"||Mn.node===null||Mn.circular||($t.push(Mn),Kn(),Jn(Mn.keys,function(or,ai){Ht.push(or),An.pre&&An.pre.call(Mn,Mn.node[or],or);var on=_e(Mn.node[or]);xt&&eo.call(Mn.node,or)&&(Mn.node[or]=on.node),on.isLast=ai==Mn.keys.length-1,on.isFirst=ai==0,An.post&&An.post.call(Mn,on),Ht.pop()}),$t.pop()),An.after&&An.after.call(Mn,Mn.node)),Mn}(O).node}function Yr(O){if(typeof O=="object"&&O!==null){var W;if(zn(O))W=[];else if(Ze(O)==="[object Date]")W=new Date(O.getTime?O.getTime():O);else if(function($t){return Ze($t)==="[object RegExp]"}(O))W=new RegExp(O);else if(function($t){return Ze($t)==="[object Error]"}(O))W={message:O.message};else if(function($t){return Ze($t)==="[object Boolean]"}(O))W=new Boolean(O);else if(function($t){return Ze($t)==="[object Number]"}(O))W=new Number(O);else if(function($t){return Ze($t)==="[object String]"}(O))W=new String(O);else if(Object.create&&Object.getPrototypeOf)W=Object.create(Object.getPrototypeOf(O));else if(O.constructor===Object)W={};else{var xt=O.constructor&&O.constructor.prototype||O.__proto__||{},Ht=function(){};Ht.prototype=xt,W=new Ht}return Jn(Pr(O),function($t){W[$t]=O[$t]}),W}return O}Gn.prototype.get=function(O){for(var W=this.value,xt=0;xt<O.length;xt++){var Ht=O[xt];if(!W||!eo.call(W,Ht)){W=void 0;break}W=W[Ht]}return W},Gn.prototype.has=function(O){for(var W=this.value,xt=0;xt<O.length;xt++){var Ht=O[xt];if(!W||!eo.call(W,Ht))return!1;W=W[Ht]}return!0},Gn.prototype.set=function(O,W){for(var xt=this.value,Ht=0;Ht<O.length-1;Ht++){var $t=O[Ht];eo.call(xt,$t)||(xt[$t]={}),xt=xt[$t]}return xt[O[Ht]]=W,W},Gn.prototype.map=function(O){return Fr(this.value,O,!0)},Gn.prototype.forEach=function(O){return this.value=Fr(this.value,O,!1),this.value},Gn.prototype.reduce=function(O,W){var xt=arguments.length===1,Ht=xt?this.value:W;return this.forEach(function($t){this.isRoot&&xt||(Ht=O.call(this,Ht,$t))}),Ht},Gn.prototype.paths=function(){var O=[];return this.forEach(function(W){O.push(this.path)}),O},Gn.prototype.nodes=function(){var O=[];return this.forEach(function(W){O.push(this.node)}),O},Gn.prototype.clone=function(){var O=[],W=[];return function xt(Ht){for(var $t=0;$t<O.length;$t++)if(O[$t]===Ht)return W[$t];if(typeof Ht=="object"&&Ht!==null){var Xt=Yr(Ht);return O.push(Ht),W.push(Xt),Jn(Pr(Ht),function(_e){Xt[_e]=xt(Ht[_e])}),O.pop(),W.pop(),Xt}return Ht}(this.value)};var Pr=Object.keys||function(O){var W=[];for(var xt in O)W.push(xt);return W};function Ze(O){return Object.prototype.toString.call(O)}var zn=Array.isArray||function(O){return Object.prototype.toString.call(O)==="[object Array]"},Jn=function(O,W){if(O.forEach)return O.forEach(W);for(var xt=0;xt<O.length;xt++)W(O[xt],xt,O)};Jn(Pr(Gn.prototype),function(O){Ue[O]=function(W){var xt=[].slice.call(arguments,1),Ht=new Gn(W);return Ht[O].apply(Ht,xt)}});var eo=Object.hasOwnProperty||function(O,W){return W in O},Eo=gr.exports,pi=Xn;function Xn(O){if(!(this instanceof Xn))return new Xn(O);this._bbox=O||[1/0,1/0,-1/0,-1/0],this._valid=!!O}Xn.prototype.include=function(O){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],O[0]),this._bbox[1]=Math.min(this._bbox[1],O[1]),this._bbox[2]=Math.max(this._bbox[2],O[0]),this._bbox[3]=Math.max(this._bbox[3],O[1]),this},Xn.prototype.equals=function(O){var W;return W=O instanceof Xn?O.bbox():O,this._bbox[0]==W[0]&&this._bbox[1]==W[1]&&this._bbox[2]==W[2]&&this._bbox[3]==W[3]},Xn.prototype.center=function(O){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Xn.prototype.union=function(O){var W;return this._valid=!0,W=O instanceof Xn?O.bbox():O,this._bbox[0]=Math.min(this._bbox[0],W[0]),this._bbox[1]=Math.min(this._bbox[1],W[1]),this._bbox[2]=Math.max(this._bbox[2],W[2]),this._bbox[3]=Math.max(this._bbox[3],W[3]),this},Xn.prototype.bbox=function(){return this._valid?this._bbox:null},Xn.prototype.contains=function(O){if(!O)return this._fastContains();if(!this._valid)return null;var W=O[0],xt=O[1];return this._bbox[0]<=W&&this._bbox[1]<=xt&&this._bbox[2]>=W&&this._bbox[3]>=xt},Xn.prototype.intersect=function(O){return this._valid?(W=O instanceof Xn?O.bbox():O,!(this._bbox[0]>W[2]||this._bbox[2]<W[0]||this._bbox[3]<W[1]||this._bbox[1]>W[3])):null;var W},Xn.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var O="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",O)},Xn.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var tu=function(O){if(!O)return[];var W=En(Sn(O)),xt=[];return W.features.forEach(function(Ht){Ht.geometry&&(xt=xt.concat(ir(Ht.geometry.coordinates)))}),xt},Pl=Eo,Uu=pi,Ms={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Hu=Object.keys(Ms);function Ri(O){for(var W=Uu(),xt=tu(O),Ht=0;Ht<xt.length;Ht++)W.include(xt[Ht]);return W}Kt.exports=function(O){return Ri(O).bbox()},Kt.exports.polygon=function(O){return Ri(O).polygon()},Kt.exports.bboxify=function(O){return Pl(O).map(function(W){W&&Hu.some(function(xt){return!!W[xt]&&Ms[xt].indexOf(W.type)!==-1})&&(W.bbox=Ri(W).bbox(),this.update(W))})};var mi=a(Kt.exports),wi=-90;function kl(O,W){var xt=wi,Ht=90,$t=wi,Xt=90,_e=270,cn=-270;O.forEach(function(An){var mn=mi(An),Mn=mn[1],Kn=mn[3],Zr=mn[0],or=mn[2];Mn>xt&&(xt=Mn),Kn<Ht&&(Ht=Kn),Kn>$t&&($t=Kn),Mn<Xt&&(Xt=Mn),Zr<_e&&(_e=Zr),or>cn&&(cn=or)});var dn=W;return xt+dn.lat>85&&(dn.lat=85-xt),$t+dn.lat>90&&(dn.lat=90-$t),Ht+dn.lat<-85&&(dn.lat=-85-Ht),Xt+dn.lat<wi&&(dn.lat=wi-Xt),_e+dn.lng<=-270&&(dn.lng+=360*Math.ceil(Math.abs(dn.lng)/360)),cn+dn.lng>=270&&(dn.lng-=360*Math.ceil(Math.abs(dn.lng)/360)),dn}function Ac(O,W){var xt=kl(O.map(function(Ht){return Ht.toGeoJSON()}),W);O.forEach(function(Ht){var $t,Xt=Ht.getCoordinates(),_e=function(dn){var An={lng:dn[0]+xt.lng,lat:dn[1]+xt.lat};return[An.lng,An.lat]},cn=function(dn){return dn.map(function(An){return _e(An)})};Ht.type===D.POINT?$t=_e(Xt):Ht.type===D.LINE_STRING||Ht.type===D.MULTI_POINT?$t=Xt.map(_e):Ht.type===D.POLYGON||Ht.type===D.MULTI_LINE_STRING?$t=Xt.map(cn):Ht.type===D.MULTI_POLYGON&&($t=Xt.map(function(dn){return dn.map(function(An){return cn(An)})})),Ht.incomingCoords($t)})}var ri={onSetup:function(O){var W=this,xt={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:O.featureIds||[]};return this.setSelected(xt.initiallySelectedFeatureIds.filter(function(Ht){return W.getFeature(Ht)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),xt},fireUpdate:function(){this.map.fire(U.UPDATE,{action:F.MOVE,features:this.getSelected().map(function(O){return O.toGeoJSON()})})},fireActionable:function(){var O=this,W=this.getSelected(),xt=W.filter(function(cn){return O.isInstanceOf("MultiFeature",cn)}),Ht=!1;if(W.length>1){Ht=!0;var $t=W[0].type.replace("Multi","");W.forEach(function(cn){cn.type.replace("Multi","")!==$t&&(Ht=!1)})}var Xt=xt.length>0,_e=W.length>0;this.setActionableState({combineFeatures:Ht,uncombineFeatures:Xt,trash:_e})},getUniqueIds:function(O){return O.length?O.map(function(W){return W.properties.id}).filter(function(W){return W!==void 0}).reduce(function(W,xt){return W.add(xt),W},new ot).values():[]},stopExtendedInteractions:function(O){O.boxSelectElement&&(O.boxSelectElement.parentNode&&O.boxSelectElement.parentNode.removeChild(O.boxSelectElement),O.boxSelectElement=null),this.map.dragPan.enable(),O.boxSelecting=!1,O.canBoxSelect=!1,O.dragMoving=!1,O.canDragMove=!1},onStop:function(){he.enable(this)},onMouseMove:function(O,W){return de(W)&&O.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(O),!0},onMouseOut:function(O){return!O.dragMoving||this.fireUpdate()}};ri.onTap=ri.onClick=function(O,W){return wn(W)?this.clickAnywhere(O,W):je(j.VERTEX)(W)?this.clickOnVertex(O,W):de(W)?this.clickOnFeature(O,W):void 0},ri.clickAnywhere=function(O){var W=this,xt=this.getSelectedIds();xt.length&&(this.clearSelectedFeatures(),xt.forEach(function(Ht){return W.doRender(Ht)})),he.enable(this),this.stopExtendedInteractions(O)},ri.clickOnVertex=function(O,W){this.changeMode(N.DIRECT_SELECT,{featureId:W.featureTarget.properties.parent,coordPath:W.featureTarget.properties.coord_path,startPos:W.lngLat}),this.updateUIClasses({mouse:S.MOVE})},ri.startOnActiveFeature=function(O,W){this.stopExtendedInteractions(O),this.map.dragPan.disable(),this.doRender(W.featureTarget.properties.id),O.canDragMove=!0,O.dragMoveLocation=W.lngLat},ri.clickOnFeature=function(O,W){var xt=this;he.disable(this),this.stopExtendedInteractions(O);var Ht=Te(W),$t=this.getSelectedIds(),Xt=W.featureTarget.properties.id,_e=this.isSelected(Xt);if(!Ht&&_e&&this.getFeature(Xt).type!==D.POINT)return this.changeMode(N.DIRECT_SELECT,{featureId:Xt});_e&&Ht?(this.deselect(Xt),this.updateUIClasses({mouse:S.POINTER}),$t.length===1&&he.enable(this)):!_e&&Ht?(this.select(Xt),this.updateUIClasses({mouse:S.MOVE})):_e||Ht||($t.forEach(function(cn){return xt.doRender(cn)}),this.setSelected(Xt),this.updateUIClasses({mouse:S.MOVE})),this.doRender(Xt)},ri.onMouseDown=function(O,W){return Ke(W)?this.startOnActiveFeature(O,W):this.drawConfig.boxSelect&&Le(W)?this.startBoxSelect(O,W):void 0},ri.startBoxSelect=function(O,W){this.stopExtendedInteractions(O),this.map.dragPan.disable(),O.boxSelectStartLocation=wt(W.originalEvent,this.map.getContainer()),O.canBoxSelect=!0},ri.onTouchStart=function(O,W){if(Ke(W))return this.startOnActiveFeature(O,W)},ri.onDrag=function(O,W){return O.canDragMove?this.dragMove(O,W):this.drawConfig.boxSelect&&O.canBoxSelect?this.whileBoxSelect(O,W):void 0},ri.whileBoxSelect=function(O,W){O.boxSelecting=!0,this.updateUIClasses({mouse:S.ADD}),O.boxSelectElement||(O.boxSelectElement=document.createElement("div"),O.boxSelectElement.classList.add(C.BOX_SELECT),this.map.getContainer().appendChild(O.boxSelectElement));var xt=wt(W.originalEvent,this.map.getContainer()),Ht=Math.min(O.boxSelectStartLocation.x,xt.x),$t=Math.max(O.boxSelectStartLocation.x,xt.x),Xt=Math.min(O.boxSelectStartLocation.y,xt.y),_e=Math.max(O.boxSelectStartLocation.y,xt.y),cn="translate("+Ht+"px, "+Xt+"px)";O.boxSelectElement.style.transform=cn,O.boxSelectElement.style.WebkitTransform=cn,O.boxSelectElement.style.width=$t-Ht+"px",O.boxSelectElement.style.height=_e-Xt+"px"},ri.dragMove=function(O,W){O.dragMoving=!0,W.originalEvent.stopPropagation();var xt={lng:W.lngLat.lng-O.dragMoveLocation.lng,lat:W.lngLat.lat-O.dragMoveLocation.lat};Ac(this.getSelected(),xt),O.dragMoveLocation=W.lngLat},ri.onTouchEnd=ri.onMouseUp=function(O,W){var xt=this;if(O.dragMoving)this.fireUpdate();else if(O.boxSelecting){var Ht=[O.boxSelectStartLocation,wt(W.originalEvent,this.map.getContainer())],$t=this.featuresAt(null,Ht,"click"),Xt=this.getUniqueIds($t).filter(function(_e){return!xt.isSelected(_e)});Xt.length&&(this.select(Xt),Xt.forEach(function(_e){return xt.doRender(_e)}),this.updateUIClasses({mouse:S.MOVE}))}this.stopExtendedInteractions(O)},ri.toDisplayFeatures=function(O,W,xt){W.properties.active=this.isSelected(W.properties.id)?$.ACTIVE:$.INACTIVE,xt(W),this.fireActionable(),W.properties.active===$.ACTIVE&&W.geometry.type!==D.POINT&&ie(W).forEach(xt)},ri.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},ri.onCombineFeatures=function(){var O=this.getSelected();if(!(O.length===0||O.length<2)){for(var W=[],xt=[],Ht=O[0].type.replace("Multi",""),$t=0;$t<O.length;$t++){var Xt=O[$t];if(Xt.type.replace("Multi","")!==Ht)return;Xt.type.includes("Multi")?Xt.getCoordinates().forEach(function(cn){W.push(cn)}):W.push(Xt.getCoordinates()),xt.push(Xt.toGeoJSON())}if(xt.length>1){var _e=this.newFeature({type:D.FEATURE,properties:xt[0].properties,geometry:{type:"Multi"+Ht,coordinates:W}});this.addFeature(_e),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([_e.id]),this.map.fire(U.COMBINE_FEATURES,{createdFeatures:[_e.toGeoJSON()],deletedFeatures:xt})}this.fireActionable()}},ri.onUncombineFeatures=function(){var O=this,W=this.getSelected();if(W.length!==0){for(var xt=[],Ht=[],$t=function(_e){var cn=W[_e];O.isInstanceOf("MultiFeature",cn)&&(cn.getFeatures().forEach(function(dn){O.addFeature(dn),dn.properties=cn.properties,xt.push(dn.toGeoJSON()),O.select([dn.id])}),O.deleteFeature(cn.id,{silent:!0}),Ht.push(cn.toGeoJSON()))},Xt=0;Xt<W.length;Xt++)$t(Xt);xt.length>1&&this.map.fire(U.UNCOMBINE_FEATURES,{createdFeatures:xt,deletedFeatures:Ht}),this.fireActionable()}};var Ss=je(j.VERTEX),Gu=je(j.MIDPOINT),us={fireUpdate:function(){this.map.fire(U.UPDATE,{action:F.CHANGE_COORDINATES,features:this.getSelected().map(function(O){return O.toGeoJSON()})})},fireActionable:function(O){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:O.selectedCoordPaths.length>0})},startDragging:function(O,W){this.map.dragPan.disable(),O.canDragMove=!0,O.dragMoveLocation=W.lngLat},stopDragging:function(O){this.map.dragPan.enable(),O.dragMoving=!1,O.canDragMove=!1,O.dragMoveLocation=null},onVertex:function(O,W){this.startDragging(O,W);var xt=W.featureTarget.properties,Ht=O.selectedCoordPaths.indexOf(xt.coord_path);Te(W)||Ht!==-1?Te(W)&&Ht===-1&&O.selectedCoordPaths.push(xt.coord_path):O.selectedCoordPaths=[xt.coord_path];var $t=this.pathsToCoordinates(O.featureId,O.selectedCoordPaths);this.setSelectedCoordinates($t)},onMidpoint:function(O,W){this.startDragging(O,W);var xt=W.featureTarget.properties;O.feature.addCoordinate(xt.coord_path,xt.lng,xt.lat),this.fireUpdate(),O.selectedCoordPaths=[xt.coord_path]},pathsToCoordinates:function(O,W){return W.map(function(xt){return{feature_id:O,coord_path:xt}})},onFeature:function(O,W){O.selectedCoordPaths.length===0?this.startDragging(O,W):this.stopDragging(O)},dragFeature:function(O,W,xt){Ac(this.getSelected(),xt),O.dragMoveLocation=W.lngLat},dragVertex:function(O,W,xt){for(var Ht=O.selectedCoordPaths.map(function(cn){return O.feature.getCoordinate(cn)}),$t=kl(Ht.map(function(cn){return{type:D.FEATURE,properties:{},geometry:{type:D.POINT,coordinates:cn}}}),xt),Xt=0;Xt<Ht.length;Xt++){var _e=Ht[Xt];O.feature.updateCoordinate(O.selectedCoordPaths[Xt],_e[0]+$t.lng,_e[1]+$t.lat)}},clickNoTarget:function(){this.changeMode(N.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(N.SIMPLE_SELECT)},clickActiveFeature:function(O){O.selectedCoordPaths=[],this.clearSelectedCoordinates(),O.feature.changed()},onSetup:function(O){var W=O.featureId,xt=this.getFeature(W);if(!xt)throw new Error("You must provide a featureId to enter direct_select mode");if(xt.type===D.POINT)throw new TypeError("direct_select mode doesn't handle point features");var Ht={featureId:W,feature:xt,dragMoveLocation:O.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:O.coordPath?[O.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(W,Ht.selectedCoordPaths)),this.setSelected(W),he.disable(this),this.setActionableState({trash:!0}),Ht},onStop:function(){he.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(O,W,xt){O.featureId===W.properties.id?(W.properties.active=$.ACTIVE,xt(W),ie(W,{map:this.map,midpoints:!0,selectedPaths:O.selectedCoordPaths}).forEach(xt)):(W.properties.active=$.INACTIVE,xt(W)),this.fireActionable(O)},onTrash:function(O){O.selectedCoordPaths.sort(function(W,xt){return xt.localeCompare(W,"en",{numeric:!0})}).forEach(function(W){return O.feature.removeCoordinate(W)}),this.fireUpdate(),O.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(O),O.feature.isValid()===!1&&(this.deleteFeature([O.featureId]),this.changeMode(N.SIMPLE_SELECT,{}))},onMouseMove:function(O,W){var xt=Ke(W),Ht=Ss(W),$t=Gu(W),Xt=O.selectedCoordPaths.length===0;return xt&&Xt||Ht&&!Xt?this.updateUIClasses({mouse:S.MOVE}):this.updateUIClasses({mouse:S.NONE}),(Ht||xt||$t)&&O.dragMoving&&this.fireUpdate(),this.stopDragging(O),!0},onMouseOut:function(O){return O.dragMoving&&this.fireUpdate(),!0}};us.onTouchStart=us.onMouseDown=function(O,W){return Ss(W)?this.onVertex(O,W):Ke(W)?this.onFeature(O,W):Gu(W)?this.onMidpoint(O,W):void 0},us.onDrag=function(O,W){if(O.canDragMove===!0){O.dragMoving=!0,W.originalEvent.stopPropagation();var xt={lng:W.lngLat.lng-O.dragMoveLocation.lng,lat:W.lngLat.lat-O.dragMoveLocation.lat};O.selectedCoordPaths.length>0?this.dragVertex(O,W,xt):this.dragFeature(O,W,xt),O.dragMoveLocation=W.lngLat}},us.onClick=function(O,W){return wn(W)?this.clickNoTarget(O,W):Ke(W)?this.clickActiveFeature(O,W):_n(W)?this.clickInactive(O,W):void this.stopDragging(O)},us.onTap=function(O,W){return wn(W)?this.clickNoTarget(O,W):Ke(W)?this.clickActiveFeature(O,W):_n(W)?this.clickInactive(O,W):void 0},us.onTouchEnd=us.onMouseUp=function(O){O.dragMoving&&this.fireUpdate(),this.stopDragging(O)};var Ma={};function Es(O,W){return!!O.lngLat&&O.lngLat.lng===W[0]&&O.lngLat.lat===W[1]}Ma.onSetup=function(){var O=this.newFeature({type:D.FEATURE,properties:{},geometry:{type:D.POINT,coordinates:[]}});return this.addFeature(O),this.clearSelectedFeatures(),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(k.POINT),this.setActionableState({trash:!0}),{point:O}},Ma.stopDrawingAndRemove=function(O){this.deleteFeature([O.point.id],{silent:!0}),this.changeMode(N.SIMPLE_SELECT)},Ma.onTap=Ma.onClick=function(O,W){this.updateUIClasses({mouse:S.MOVE}),O.point.updateCoordinate("",W.lngLat.lng,W.lngLat.lat),this.map.fire(U.CREATE,{features:[O.point.toGeoJSON()]}),this.changeMode(N.SIMPLE_SELECT,{featureIds:[O.point.id]})},Ma.onStop=function(O){this.activateUIButton(),O.point.getCoordinate().length||this.deleteFeature([O.point.id],{silent:!0})},Ma.toDisplayFeatures=function(O,W,xt){var Ht=W.properties.id===O.point.id;if(W.properties.active=Ht?$.ACTIVE:$.INACTIVE,!Ht)return xt(W)},Ma.onTrash=Ma.stopDrawingAndRemove,Ma.onKeyUp=function(O,W){if(Ye(W)||un(W))return this.stopDrawingAndRemove(O,W)};var Ts={onSetup:function(){var O=this.newFeature({type:D.FEATURE,properties:{},geometry:{type:D.POLYGON,coordinates:[[]]}});return this.addFeature(O),this.clearSelectedFeatures(),he.disable(this),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(k.POLYGON),this.setActionableState({trash:!0}),{polygon:O,currentVertexPosition:0}},clickAnywhere:function(O,W){if(O.currentVertexPosition>0&&Es(W,O.polygon.coordinates[0][O.currentVertexPosition-1]))return this.changeMode(N.SIMPLE_SELECT,{featureIds:[O.polygon.id]});this.updateUIClasses({mouse:S.ADD}),O.polygon.updateCoordinate("0."+O.currentVertexPosition,W.lngLat.lng,W.lngLat.lat),O.currentVertexPosition++,O.polygon.updateCoordinate("0."+O.currentVertexPosition,W.lngLat.lng,W.lngLat.lat)},clickOnVertex:function(O){return this.changeMode(N.SIMPLE_SELECT,{featureIds:[O.polygon.id]})},onMouseMove:function(O,W){O.polygon.updateCoordinate("0."+O.currentVertexPosition,W.lngLat.lng,W.lngLat.lat),ve(W)&&this.updateUIClasses({mouse:S.POINTER})}};Ts.onTap=Ts.onClick=function(O,W){return ve(W)?this.clickOnVertex(O,W):this.clickAnywhere(O,W)},Ts.onKeyUp=function(O,W){Ye(W)?(this.deleteFeature([O.polygon.id],{silent:!0}),this.changeMode(N.SIMPLE_SELECT)):un(W)&&this.changeMode(N.SIMPLE_SELECT,{featureIds:[O.polygon.id]})},Ts.onStop=function(O){this.updateUIClasses({mouse:S.NONE}),he.enable(this),this.activateUIButton(),this.getFeature(O.polygon.id)!==void 0&&(O.polygon.removeCoordinate("0."+O.currentVertexPosition),O.polygon.isValid()?this.map.fire(U.CREATE,{features:[O.polygon.toGeoJSON()]}):(this.deleteFeature([O.polygon.id],{silent:!0}),this.changeMode(N.SIMPLE_SELECT,{},{silent:!0})))},Ts.toDisplayFeatures=function(O,W,xt){var Ht=W.properties.id===O.polygon.id;if(W.properties.active=Ht?$.ACTIVE:$.INACTIVE,!Ht)return xt(W);if(W.geometry.coordinates.length!==0){var $t=W.geometry.coordinates[0].length;if(!($t<3)){if(W.properties.meta=j.FEATURE,xt(kt(O.polygon.id,W.geometry.coordinates[0][0],"0.0",!1)),$t>3){var Xt=W.geometry.coordinates[0].length-3;xt(kt(O.polygon.id,W.geometry.coordinates[0][Xt],"0."+Xt,!1))}if($t<=4){var _e=[[W.geometry.coordinates[0][0][0],W.geometry.coordinates[0][0][1]],[W.geometry.coordinates[0][1][0],W.geometry.coordinates[0][1][1]]];if(xt({type:D.FEATURE,properties:W.properties,geometry:{coordinates:_e,type:D.LINE_STRING}}),$t===3)return}return xt(W)}}},Ts.onTrash=function(O){this.deleteFeature([O.polygon.id],{silent:!0}),this.changeMode(N.SIMPLE_SELECT)};var Ll={onSetup:function(O){var W,xt,Ht=(O=O||{}).featureId,$t="forward";if(Ht){if(!(W=this.getFeature(Ht)))throw new Error("Could not find a feature with the provided featureId");var Xt=O.from;if(Xt&&Xt.type==="Feature"&&Xt.geometry&&Xt.geometry.type==="Point"&&(Xt=Xt.geometry),Xt&&Xt.type==="Point"&&Xt.coordinates&&Xt.coordinates.length===2&&(Xt=Xt.coordinates),!Xt||!Array.isArray(Xt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var _e=W.coordinates.length-1;if(W.coordinates[_e][0]===Xt[0]&&W.coordinates[_e][1]===Xt[1])xt=_e+1,W.addCoordinate.apply(W,[xt].concat(W.coordinates[_e]));else{if(W.coordinates[0][0]!==Xt[0]||W.coordinates[0][1]!==Xt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");$t="backwards",xt=0,W.addCoordinate.apply(W,[xt].concat(W.coordinates[0]))}}else W=this.newFeature({type:D.FEATURE,properties:{},geometry:{type:D.LINE_STRING,coordinates:[]}}),xt=0,this.addFeature(W);return this.clearSelectedFeatures(),he.disable(this),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(k.LINE),this.setActionableState({trash:!0}),{line:W,currentVertexPosition:xt,direction:$t}},clickAnywhere:function(O,W){if(O.currentVertexPosition>0&&Es(W,O.line.coordinates[O.currentVertexPosition-1])||O.direction==="backwards"&&Es(W,O.line.coordinates[O.currentVertexPosition+1]))return this.changeMode(N.SIMPLE_SELECT,{featureIds:[O.line.id]});this.updateUIClasses({mouse:S.ADD}),O.line.updateCoordinate(O.currentVertexPosition,W.lngLat.lng,W.lngLat.lat),O.direction==="forward"?(O.currentVertexPosition++,O.line.updateCoordinate(O.currentVertexPosition,W.lngLat.lng,W.lngLat.lat)):O.line.addCoordinate(0,W.lngLat.lng,W.lngLat.lat)},clickOnVertex:function(O){return this.changeMode(N.SIMPLE_SELECT,{featureIds:[O.line.id]})},onMouseMove:function(O,W){O.line.updateCoordinate(O.currentVertexPosition,W.lngLat.lng,W.lngLat.lat),ve(W)&&this.updateUIClasses({mouse:S.POINTER})}};Ll.onTap=Ll.onClick=function(O,W){if(ve(W))return this.clickOnVertex(O,W);this.clickAnywhere(O,W)},Ll.onKeyUp=function(O,W){un(W)?this.changeMode(N.SIMPLE_SELECT,{featureIds:[O.line.id]}):Ye(W)&&(this.deleteFeature([O.line.id],{silent:!0}),this.changeMode(N.SIMPLE_SELECT))},Ll.onStop=function(O){he.enable(this),this.activateUIButton(),this.getFeature(O.line.id)!==void 0&&(O.line.removeCoordinate(""+O.currentVertexPosition),O.line.isValid()?this.map.fire(U.CREATE,{features:[O.line.toGeoJSON()]}):(this.deleteFeature([O.line.id],{silent:!0}),this.changeMode(N.SIMPLE_SELECT,{},{silent:!0})))},Ll.onTrash=function(O){this.deleteFeature([O.line.id],{silent:!0}),this.changeMode(N.SIMPLE_SELECT)},Ll.toDisplayFeatures=function(O,W,xt){var Ht=W.properties.id===O.line.id;if(W.properties.active=Ht?$.ACTIVE:$.INACTIVE,!Ht)return xt(W);W.geometry.coordinates.length<2||(W.properties.meta=j.FEATURE,xt(kt(O.line.id,W.geometry.coordinates[O.direction==="forward"?W.geometry.coordinates.length-2:1],""+(O.direction==="forward"?W.geometry.coordinates.length-2:1),!1)),xt(W))};var Sh={simple_select:ri,direct_select:us,draw_point:Ma,draw_polygon:Ts,draw_line_string:Ll},wd={defaultMode:N.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Ie,modes:Sh,controls:{},userProperties:!1},Eh={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},$u={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Zu(O,W){return O.map(function(xt){return xt.source?xt:ee(xt,{id:xt.id+"."+W,source:W==="hot"?E.HOT:E.COLD})})}var wc={exports:{}};(function(O,W){var xt="__lodash_hash_undefined__",Ht=9007199254740991,$t="[object Arguments]",Xt="[object Array]",_e="[object Boolean]",cn="[object Date]",dn="[object Error]",An="[object Function]",mn="[object Map]",Mn="[object Number]",Kn="[object Object]",Zr="[object Promise]",or="[object RegExp]",ai="[object Set]",on="[object String]",kn="[object Symbol]",Rr="[object WeakMap]",bi="[object ArrayBuffer]",gi="[object DataView]",Jo=/^\[object .+?Constructor\]$/,nu=/^(?:0|[1-9]\d*)$/,ur={};ur["[object Float32Array]"]=ur["[object Float64Array]"]=ur["[object Int8Array]"]=ur["[object Int16Array]"]=ur["[object Int32Array]"]=ur["[object Uint8Array]"]=ur["[object Uint8ClampedArray]"]=ur["[object Uint16Array]"]=ur["[object Uint32Array]"]=!0,ur[$t]=ur[Xt]=ur[bi]=ur[_e]=ur[gi]=ur[cn]=ur[dn]=ur[An]=ur[mn]=ur[Mn]=ur[Kn]=ur[or]=ur[ai]=ur[on]=ur[Rr]=!1;var Wu=typeof Io=="object"&&Io&&Io.Object===Object&&Io,Wr=typeof self=="object"&&self&&self.Object===Object&&self,Fn=Wu||Wr||Function("return this")(),Xr=W&&!W.nodeType&&W,Dr=Xr&&O&&!O.nodeType&&O,Cc=Dr&&Dr.exports===Xr,ca=Cc&&Wu.process,Ol=function(){try{return ca&&ca.binding&&ca.binding("util")}catch{}}(),ru=Ol&&Ol.isTypedArray;function qu(Ae,qe){for(var Dn=-1,sr=Ae==null?0:Ae.length;++Dn<sr;)if(qe(Ae[Dn],Dn,Ae))return!0;return!1}function zl(Ae){var qe=-1,Dn=Array(Ae.size);return Ae.forEach(function(sr,yi){Dn[++qe]=[yi,sr]}),Dn}function iu(Ae){var qe=-1,Dn=Array(Ae.size);return Ae.forEach(function(sr){Dn[++qe]=sr}),Dn}var Fi,ou,Ha,Fl=Array.prototype,no=Function.prototype,ro=Object.prototype,go=Fn["__core-js_shared__"],nl=no.toString,Br=ro.hasOwnProperty,Bl=(Fi=/[^.]+$/.exec(go&&go.keys&&go.keys.IE_PROTO||""))?"Symbol(src)_1."+Fi:"",Ic=ro.toString,Ku=RegExp("^"+nl.call(Br).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xi=Cc?Fn.Buffer:void 0,Nl=Fn.Symbol,Vo=Fn.Uint8Array,Cd=ro.propertyIsEnumerable,au=Fl.splice,yo=Nl?Nl.toStringTag:void 0,Uo=Object.getOwnPropertySymbols,jl=Xi?Xi.isBuffer:void 0,ii=(ou=Object.keys,Ha=Object,function(Ae){return ou(Ha(Ae))}),ua=Hl(Fn,"DataView"),Ga=Hl(Fn,"Map"),su=Hl(Fn,"Promise"),ta=Hl(Fn,"Set"),Ph=Hl(Fn,"WeakMap"),Vl=Hl(Object,"create"),rl=fs(ua),Mc=fs(Ga),lu=fs(su),hs=fs(ta),Bf=fs(Ph),ks=Nl?Nl.prototype:void 0,Yu=ks?ks.valueOf:void 0;function ds(Ae){var qe=-1,Dn=Ae==null?0:Ae.length;for(this.clear();++qe<Dn;){var sr=Ae[qe];this.set(sr[0],sr[1])}}function $a(Ae){var qe=-1,Dn=Ae==null?0:Ae.length;for(this.clear();++qe<Dn;){var sr=Ae[qe];this.set(sr[0],sr[1])}}function Ls(Ae){var qe=-1,Dn=Ae==null?0:Ae.length;for(this.clear();++qe<Dn;){var sr=Ae[qe];this.set(sr[0],sr[1])}}function Sc(Ae){var qe=-1,Dn=Ae==null?0:Ae.length;for(this.__data__=new Ls;++qe<Dn;)this.add(Ae[qe])}function Sa(Ae){var qe=this.__data__=new $a(Ae);this.size=qe.size}function cu(Ae,qe){var Dn=ha(Ae),sr=!Dn&&Pc(Ae),yi=!Dn&&!sr&&da(Ae),Hr=!Dn&&!sr&&!yi&&_r(Ae),si=Dn||sr||yi||Hr,me=si?function(Tn,nr){for(var br=-1,xr=Array(Tn);++br<Tn;)xr[br]=nr(br);return xr}(Ae.length,String):[],We=me.length;for(var ze in Ae)!Br.call(Ae,ze)||si&&(ze=="length"||yi&&(ze=="offset"||ze=="parent")||Hr&&(ze=="buffer"||ze=="byteLength"||ze=="byteOffset")||ol(ze,We))||me.push(ze);return me}function Ec(Ae,qe){for(var Dn=Ae.length;Dn--;)if(Lh(Ae[Dn][0],qe))return Dn;return-1}function Ul(Ae){return Ae==null?Ae===void 0?"[object Undefined]":"[object Null]":yo&&yo in Object(Ae)?function(qe){var Dn=Br.call(qe,yo),sr=qe[yo];try{qe[yo]=void 0;var yi=!0}catch{}var Hr=Ic.call(qe);return yi&&(Dn?qe[yo]=sr:delete qe[yo]),Hr}(Ae):function(qe){return Ic.call(qe)}(Ae)}function Zi(Ae){return $l(Ae)&&Ul(Ae)==$t}function uu(Ae,qe,Dn,sr,yi){return Ae===qe||(Ae==null||qe==null||!$l(Ae)&&!$l(qe)?Ae!=Ae&&qe!=qe:function(Hr,si,me,We,ze,Tn){var nr=ha(Hr),br=ha(si),xr=nr?Xt:Rs(Hr),Gr=br?Xt:Rs(si),Ds=(xr=xr==$t?Kn:xr)==Kn,kc=(Gr=Gr==$t?Kn:Gr)==Kn,Di=xr==Gr;if(Di&&da(Hr)){if(!da(si))return!1;nr=!0,Ds=!1}if(Di&&!Ds)return Tn||(Tn=new Sa),nr||_r(Hr)?kh(Hr,si,me,We,ze,Tn):function(Jr,tr,Os,ms,al,vr,Ea){switch(Os){case gi:if(Jr.byteLength!=tr.byteLength||Jr.byteOffset!=tr.byteOffset)return!1;Jr=Jr.buffer,tr=tr.buffer;case bi:return!(Jr.byteLength!=tr.byteLength||!vr(new Vo(Jr),new Vo(tr)));case _e:case cn:case Mn:return Lh(+Jr,+tr);case dn:return Jr.name==tr.name&&Jr.message==tr.message;case or:case on:return Jr==tr+"";case mn:var sl=zl;case ai:var Wa=1&ms;if(sl||(sl=iu),Jr.size!=tr.size&&!Wa)return!1;var Ho=Ea.get(Jr);if(Ho)return Ho==tr;ms|=2,Ea.set(Jr,tr);var zs=kh(sl(Jr),sl(tr),ms,al,vr,Ea);return Ea.delete(Jr),zs;case kn:if(Yu)return Yu.call(Jr)==Yu.call(tr)}return!1}(Hr,si,xr,me,We,ze,Tn);if(!(1&me)){var Za=Ds&&Br.call(Hr,"__wrapped__"),fu=kc&&Br.call(si,"__wrapped__");if(Za||fu){var ps=Za?Hr.value():Hr,Zl=fu?si.value():si;return Tn||(Tn=new Sa),ze(ps,Zl,me,We,Tn)}}return Di?(Tn||(Tn=new Sa),function(Jr,tr,Os,ms,al,vr){var Ea=1&Os,sl=hu(Jr),Wa=sl.length,Ho=hu(tr).length;if(Wa!=Ho&&!Ea)return!1;for(var zs=Wa;zs--;){var ll=sl[zs];if(!(Ea?ll in tr:Br.call(tr,ll)))return!1}var Wl=vr.get(Jr);if(Wl&&vr.get(tr))return Wl==tr;var pu=!0;vr.set(Jr,tr),vr.set(tr,Jr);for(var Lc=Ea;++zs<Wa;){var pa=Jr[ll=sl[zs]],Fs=tr[ll];if(ms)var cl=Ea?ms(Fs,pa,ll,tr,Jr,vr):ms(pa,Fs,ll,Jr,tr,vr);if(!(cl===void 0?pa===Fs||al(pa,Fs,Os,ms,vr):cl)){pu=!1;break}Lc||(Lc=ll=="constructor")}if(pu&&!Lc){var Ta=Jr.constructor,ul=tr.constructor;Ta==ul||!("constructor"in Jr)||!("constructor"in tr)||typeof Ta=="function"&&Ta instanceof Ta&&typeof ul=="function"&&ul instanceof ul||(pu=!1)}return vr.delete(Jr),vr.delete(tr),pu}(Hr,si,me,We,ze,Tn)):!1}(Ae,qe,Dn,sr,uu,yi))}function il(Ae){return!(!Rh(Ae)||function(qe){return!!Bl&&Bl in qe}(Ae))&&(Gl(Ae)?Ku:Jo).test(fs(Ae))}function Tc(Ae){if(Dn=(qe=Ae)&&qe.constructor,sr=typeof Dn=="function"&&Dn.prototype||ro,qe!==sr)return ii(Ae);var qe,Dn,sr,yi=[];for(var Hr in Object(Ae))Br.call(Ae,Hr)&&Hr!="constructor"&&yi.push(Hr);return yi}function kh(Ae,qe,Dn,sr,yi,Hr){var si=1&Dn,me=Ae.length,We=qe.length;if(me!=We&&!(si&&We>me))return!1;var ze=Hr.get(Ae);if(ze&&Hr.get(qe))return ze==qe;var Tn=-1,nr=!0,br=2&Dn?new Sc:void 0;for(Hr.set(Ae,qe),Hr.set(qe,Ae);++Tn<me;){var xr=Ae[Tn],Gr=qe[Tn];if(sr)var Ds=si?sr(Gr,xr,Tn,qe,Ae,Hr):sr(xr,Gr,Tn,Ae,qe,Hr);if(Ds!==void 0){if(Ds)continue;nr=!1;break}if(br){if(!qu(qe,function(kc,Di){if(Za=Di,!br.has(Za)&&(xr===kc||yi(xr,kc,Dn,sr,Hr)))return br.push(Di);var Za})){nr=!1;break}}else if(xr!==Gr&&!yi(xr,Gr,Dn,sr,Hr)){nr=!1;break}}return Hr.delete(Ae),Hr.delete(qe),nr}function hu(Ae){return function(qe,Dn,sr){var yi=Dn(qe);return ha(qe)?yi:function(Hr,si){for(var me=-1,We=si.length,ze=Hr.length;++me<We;)Hr[ze+me]=si[me];return Hr}(yi,sr(qe))}(Ae,fa,Id)}function du(Ae,qe){var Dn,sr,yi=Ae.__data__;return((sr=typeof(Dn=qe))=="string"||sr=="number"||sr=="symbol"||sr=="boolean"?Dn!=="__proto__":Dn===null)?yi[typeof qe=="string"?"string":"hash"]:yi.map}function Hl(Ae,qe){var Dn=function(sr,yi){return sr==null?void 0:sr[yi]}(Ae,qe);return il(Dn)?Dn:void 0}ds.prototype.clear=function(){this.__data__=Vl?Vl(null):{},this.size=0},ds.prototype.delete=function(Ae){var qe=this.has(Ae)&&delete this.__data__[Ae];return this.size-=qe?1:0,qe},ds.prototype.get=function(Ae){var qe=this.__data__;if(Vl){var Dn=qe[Ae];return Dn===xt?void 0:Dn}return Br.call(qe,Ae)?qe[Ae]:void 0},ds.prototype.has=function(Ae){var qe=this.__data__;return Vl?qe[Ae]!==void 0:Br.call(qe,Ae)},ds.prototype.set=function(Ae,qe){var Dn=this.__data__;return this.size+=this.has(Ae)?0:1,Dn[Ae]=Vl&&qe===void 0?xt:qe,this},$a.prototype.clear=function(){this.__data__=[],this.size=0},$a.prototype.delete=function(Ae){var qe=this.__data__,Dn=Ec(qe,Ae);return!(Dn<0)&&(Dn==qe.length-1?qe.pop():au.call(qe,Dn,1),--this.size,!0)},$a.prototype.get=function(Ae){var qe=this.__data__,Dn=Ec(qe,Ae);return Dn<0?void 0:qe[Dn][1]},$a.prototype.has=function(Ae){return Ec(this.__data__,Ae)>-1},$a.prototype.set=function(Ae,qe){var Dn=this.__data__,sr=Ec(Dn,Ae);return sr<0?(++this.size,Dn.push([Ae,qe])):Dn[sr][1]=qe,this},Ls.prototype.clear=function(){this.size=0,this.__data__={hash:new ds,map:new(Ga||$a),string:new ds}},Ls.prototype.delete=function(Ae){var qe=du(this,Ae).delete(Ae);return this.size-=qe?1:0,qe},Ls.prototype.get=function(Ae){return du(this,Ae).get(Ae)},Ls.prototype.has=function(Ae){return du(this,Ae).has(Ae)},Ls.prototype.set=function(Ae,qe){var Dn=du(this,Ae),sr=Dn.size;return Dn.set(Ae,qe),this.size+=Dn.size==sr?0:1,this},Sc.prototype.add=Sc.prototype.push=function(Ae){return this.__data__.set(Ae,xt),this},Sc.prototype.has=function(Ae){return this.__data__.has(Ae)},Sa.prototype.clear=function(){this.__data__=new $a,this.size=0},Sa.prototype.delete=function(Ae){var qe=this.__data__,Dn=qe.delete(Ae);return this.size=qe.size,Dn},Sa.prototype.get=function(Ae){return this.__data__.get(Ae)},Sa.prototype.has=function(Ae){return this.__data__.has(Ae)},Sa.prototype.set=function(Ae,qe){var Dn=this.__data__;if(Dn instanceof $a){var sr=Dn.__data__;if(!Ga||sr.length<199)return sr.push([Ae,qe]),this.size=++Dn.size,this;Dn=this.__data__=new Ls(sr)}return Dn.set(Ae,qe),this.size=Dn.size,this};var Id=Uo?function(Ae){return Ae==null?[]:(Ae=Object(Ae),function(qe,Dn){for(var sr=-1,yi=qe==null?0:qe.length,Hr=0,si=[];++sr<yi;){var me=qe[sr];Dn(me,sr,qe)&&(si[Hr++]=me)}return si}(Uo(Ae),function(qe){return Cd.call(Ae,qe)}))}:function(){return[]},Rs=Ul;function ol(Ae,qe){return!!(qe=qe??Ht)&&(typeof Ae=="number"||nu.test(Ae))&&Ae>-1&&Ae%1==0&&Ae<qe}function fs(Ae){if(Ae!=null){try{return nl.call(Ae)}catch{}try{return Ae+""}catch{}}return""}function Lh(Ae,qe){return Ae===qe||Ae!=Ae&&qe!=qe}(ua&&Rs(new ua(new ArrayBuffer(1)))!=gi||Ga&&Rs(new Ga)!=mn||su&&Rs(su.resolve())!=Zr||ta&&Rs(new ta)!=ai||Ph&&Rs(new Ph)!=Rr)&&(Rs=function(Ae){var qe=Ul(Ae),Dn=qe==Kn?Ae.constructor:void 0,sr=Dn?fs(Dn):"";if(sr)switch(sr){case rl:return gi;case Mc:return mn;case lu:return Zr;case hs:return ai;case Bf:return Rr}return qe});var Pc=Zi(function(){return arguments}())?Zi:function(Ae){return $l(Ae)&&Br.call(Ae,"callee")&&!Cd.call(Ae,"callee")},ha=Array.isArray,da=jl||function(){return!1};function Gl(Ae){if(!Rh(Ae))return!1;var qe=Ul(Ae);return qe==An||qe=="[object GeneratorFunction]"||qe=="[object AsyncFunction]"||qe=="[object Proxy]"}function Xu(Ae){return typeof Ae=="number"&&Ae>-1&&Ae%1==0&&Ae<=Ht}function Rh(Ae){var qe=typeof Ae;return Ae!=null&&(qe=="object"||qe=="function")}function $l(Ae){return Ae!=null&&typeof Ae=="object"}var _r=ru?function(Ae){return function(qe){return Ae(qe)}}(ru):function(Ae){return $l(Ae)&&Xu(Ae.length)&&!!ur[Ul(Ae)]};function fa(Ae){return(qe=Ae)!=null&&Xu(qe.length)&&!Gl(qe)?cu(Ae):Tc(Ae);var qe}O.exports=function(Ae,qe){return uu(Ae,qe)}})(wc,wc.exports);var Rl=a(wc.exports);function Ps(O,W){return O.length===W.length&&JSON.stringify(O.map(function(xt){return xt}).sort())===JSON.stringify(W.map(function(xt){return xt}).sort())}var Th={Polygon:nn,LineString:Ce,Point:$e,MultiPolygon:xe,MultiLineString:xe,MultiPoint:xe},eu=Object.freeze({__proto__:null,CommonSelectors:Nn,constrainFeatureMovement:kl,createMidPoint:vt,createSupplementaryPoints:ie,createVertex:kt,doubleClickZoom:he,euclideanDistance:Bt,featuresAt:X,getFeatureAtAndSetCursors:Vt,isClick:ae,isEventAtCoordinates:Es,isTap:ye,mapEventToBoundingBox:Ct,ModeHandler:n,moveFeatures:Ac,sortFeatures:ut,stringSetsAreEqual:Ps,StringSet:ot,theme:Ie,toDenseArray:H}),Dl=function(O,W){var xt={options:O=function($t){$t===void 0&&($t={});var Xt=ee($t);return $t.controls||(Xt.controls={}),$t.displayControlsDefault===!1?Xt.controls=ee($u,$t.controls):Xt.controls=ee(Eh,$t.controls),(Xt=ee(wd,Xt)).styles=Zu(Xt.styles,"cold").concat(Zu(Xt.styles,"hot")),Xt}(O)};W=function($t,Xt){return Xt.modes=N,Xt.getFeatureIdsAt=function(_e){return X.click({point:_e},null,$t).map(function(cn){return cn.properties.id})},Xt.getSelectedIds=function(){return $t.store.getSelectedIds()},Xt.getSelected=function(){return{type:D.FEATURE_COLLECTION,features:$t.store.getSelectedIds().map(function(_e){return $t.store.get(_e)}).map(function(_e){return _e.toGeoJSON()})}},Xt.getSelectedPoints=function(){return{type:D.FEATURE_COLLECTION,features:$t.store.getSelectedCoordinates().map(function(_e){return{type:D.FEATURE,properties:{},geometry:{type:D.POINT,coordinates:_e.coordinates}}})}},Xt.set=function(_e){if(_e.type===void 0||_e.type!==D.FEATURE_COLLECTION||!Array.isArray(_e.features))throw new Error("Invalid FeatureCollection");var cn=$t.store.createRenderBatch(),dn=$t.store.getAllIds().slice(),An=Xt.add(_e),mn=new ot(An);return(dn=dn.filter(function(Mn){return!mn.has(Mn)})).length&&Xt.delete(dn),cn(),An},Xt.add=function(_e){var cn=JSON.parse(JSON.stringify(we(_e))).features.map(function(dn){if(dn.id=dn.id||Gt(),dn.geometry===null)throw new Error("Invalid geometry: null");if($t.store.get(dn.id)===void 0||$t.store.get(dn.id).type!==dn.geometry.type){var An=Th[dn.geometry.type];if(An===void 0)throw new Error("Invalid geometry type: "+dn.geometry.type+".");var mn=new An($t,dn);$t.store.add(mn)}else{var Mn=$t.store.get(dn.id);Mn.properties=dn.properties,Rl(Mn.properties,dn.properties)||$t.store.featureChanged(Mn.id),Rl(Mn.getCoordinates(),dn.geometry.coordinates)||Mn.incomingCoords(dn.geometry.coordinates)}return dn.id});return $t.store.render(),cn},Xt.get=function(_e){var cn=$t.store.get(_e);if(cn)return cn.toGeoJSON()},Xt.getAll=function(){return{type:D.FEATURE_COLLECTION,features:$t.store.getAll().map(function(_e){return _e.toGeoJSON()})}},Xt.delete=function(_e){return $t.store.delete(_e,{silent:!0}),Xt.getMode()!==N.DIRECT_SELECT||$t.store.getSelectedIds().length?$t.store.render():$t.events.changeMode(N.SIMPLE_SELECT,void 0,{silent:!0}),Xt},Xt.deleteAll=function(){return $t.store.delete($t.store.getAllIds(),{silent:!0}),Xt.getMode()===N.DIRECT_SELECT?$t.events.changeMode(N.SIMPLE_SELECT,void 0,{silent:!0}):$t.store.render(),Xt},Xt.changeMode=function(_e,cn){return cn===void 0&&(cn={}),_e===N.SIMPLE_SELECT&&Xt.getMode()===N.SIMPLE_SELECT?(Ps(cn.featureIds||[],$t.store.getSelectedIds())||($t.store.setSelected(cn.featureIds,{silent:!0}),$t.store.render()),Xt):(_e===N.DIRECT_SELECT&&Xt.getMode()===N.DIRECT_SELECT&&cn.featureId===$t.store.getSelectedIds()[0]||$t.events.changeMode(_e,cn,{silent:!0}),Xt)},Xt.getMode=function(){return $t.events.getMode()},Xt.trash=function(){return $t.events.trash({silent:!0}),Xt},Xt.combineFeatures=function(){return $t.events.combineFeatures({silent:!0}),Xt},Xt.uncombineFeatures=function(){return $t.events.uncombineFeatures({silent:!0}),Xt},Xt.setFeatureProperty=function(_e,cn,dn){return $t.store.setFeatureProperty(_e,cn,dn),Xt},Xt}(xt,W),xt.api=W;var Ht=Ut(xt);return W.onAdd=Ht.onAdd,W.onRemove=Ht.onRemove,W.types=k,W.options=O,W};function Ua(O){Dl(O,this)}return Ua.modes=Sh,Ua.constants=it,Ua.lib=eu,Ua})})(m3);var DX=m3.exports;const OX=Wp(DX),lC="draw";function zX(t){Vu(t,lC,{control:null,state:ls({activated:!1,register_id:void 0,show:!1,draw_support:[],cleanAfterDone:!1}),featuresAdded:{},featuresUpdated:{},featuresDeleted:{},action:{}})}_d(lC,zX);function cs(t){return Bo(t,lC)}const FX=(t,e)=>{cs(t).control=e},qM=(t,e,n)=>{if(!e)throw new Error("Need register id");const a=cs(t),s=a.state,d=a.control;s.register_id=e,s.activated=!0,d.changeMode("simple_select")},BX=t=>{const e=cs(t),n=e.control,a=y3(e);e.action.save&&e.action.save(a.geojson),e.action.close&&e.action.close(),e.state.draw_support=[];const s=e.state;s.show=!1,e.action={},s.register_id=void 0,s.activated=!1,e.callback=void 0,e.featuresAdded={},e.featuresUpdated={},e.featuresDeleted={},n==null||n.deleteAll()};function g3(t,e){const a=cs(t).state;if(!a.activated)throw new Error("Need to call activateDraw first");if(a.register_id&&a.register_id!==e)throw new Error("register id not match")}const KM=(t,e,n,a,s)=>{const d=cs(t);g3(t,e);const l=d.control;d.callback=a,l.changeMode(n,s)};function y3(t){const e=t.control,n=t.featuresDeleted,a=t.featuresAdded,s=t.featuresUpdated,d={added:{},updated:{},deleted:n,geojson:{type:"FeatureCollection",features:[]}},l=e.getAll();return l.features.forEach(o=>{const g=o.id;a[g]?(d.added[g]=o,o.properties||(o.properties={}),o.properties.id=o.id):s[g]&&(d.updated[g]=o)}),d.geojson=l,d}const v3=(t,e,n)=>{const a=cs(t),s=a.state,d=a.action;if(g3(t,e),n&&!(n instanceof Function))throw new Error("Callback is not available");const l=y3(a);d.deleteFeatures&&d.deleteFeatures(Object.values(l.deleted)),d.addFeatures&&d.addFeatures(Object.values(l.added)),d.updateFeatures&&d.updateFeatures(Object.values(l.updated)),d.reset&&d.reset(),n&&n(l),s.activated=!1,_3(t)};function NX(t){const n=cs(t).state;_3(t),n.activated=!1}const _3=t=>{const e=cs(t),n=e.state;e.featuresAdded={},e.featuresAdded={},e.featuresDeleted={},n.cleanAfterDone&&e.control.deleteAll(),e.control.changeMode("simple_select")};function NA(t,e,n){const a=cs(t);switch(e){case"added":a.featuresAdded[n.id]=!0;break;case"updated":if(a.featuresAdded[n.id])return;a.featuresUpdated[n.id]=!0;break;case"deleted":if(a.featuresAdded[n.id])return;a.featuresDeleted[n.id]=n;break}}function jA(t,e){const n=cs(t);n.callback&&(v3(t,e,n.callback),n.callback=void 0)}function b3(t,e){const n=ju(),a=cs(t),s=a.state,d=a.action;return s.register_id=n,s.show=!0,s.cleanAfterDone=!!e.cleanAfterDone,s.draw_support=e.draw_support,d.addFeatures=e.addFeatures,d.updateFeatures=e.updateFeatures,d.deleteFeatures=e.deleteFeatures,d.getFeatures=e.getFeatures,d.reset=e.reset,d.save=e.save,n}const jX=t=>cs(t).state.activated,VX=t=>cs(t).state.draw_support,UX=t=>cs(t).state.register_id,HX=t=>cs(t).state.show,GX=t=>cs(t).action,$X=t=>cs(t).control,ZX={key:0,class:"d-flex button-custom-container"},WX={key:1,class:"d-flex button-custom-container"},qX={class:"context-menu"},KX=["onClick"],YX=["innerHTML"],XX=rr({__name:"DrawControl",props:{...So,drawOptions:Object},setup(t){const e=t,n=e.drawOptions,{mapId:a,moduleContainerProps:s}=Ai(e,bt=>{S("select"),bt.on("draw.create",g),bt.on("draw.update",_),bt.on("draw.delete",I),bt.addControl(o)},bt=>{bt.off("draw.create",g),bt.off("draw.update",_),bt.off("draw.delete",I),bt.removeControl(o)}),{add:d,remove:l}=k1(a.value,new kb().setHandler(it));let o=new OX({displayControlsDefault:!1,boxSelect:!1});function g(bt){for(const X of bt.features)NA(a.value,"added",X);jA(a.value,k.value),S("select")}function _(bt){for(const X of bt.features)NA(a.value,"updated",X);jA(a.value,k.value),S("select")}function I(bt){for(const X of bt.features)NA(a.value,"deleted",X);jA(a.value,k.value),S("select")}FX(a.value,o);const C={add:vd,delete:b2,update:kT,save:lO,discard:bg,close:bg,draw:fO},E=gn("");function S(bt){switch(l(),E.value=bt,bt){case"select":case"delete":d();break}}const k=bn(()=>UX(a.value));function D(bt){qM(a.value,k.value),KM(a.value,k.value,bt)}const N=bn(()=>jX(a.value)),U=bn(()=>HX(a.value)),F=bn(()=>VX(a.value)),j=bn(()=>N.value);function $(){v3(a.value,k.value)}function K(){NX(a.value)}function tt(){BX(a.value),l()}async function it(bt){const X=GX(a.value),Wt=$X(a.value),Vt=await(X.getFeatures&&X.getFeatures([bt.lngLat.lng,bt.lngLat.lat]))||[];switch(E.value){case"select":{const Bt=Wt==null?void 0:Wt.add({type:"FeatureCollection",features:Vt});Bt&&Bt.length>0&&(qM(a.value,k.value),KM(a.value,k.value,"direct_select",void 0,{featureId:Bt[0]}));break}case"delete":{Wt==null||Wt.delete(Wt.getSelectedIds()),X.deleteFeatures&&X.deleteFeatures(Vt),X.reset&&X.reset();break}}}const et=gn(),q=bn(()=>F.value.map(bt=>typeof bt=="string"?{id:bt,name:JX[bt]||bt}:bt));function ut(){et.value&&et.value.close()}function Ct(bt){if(F.value.length>1){et.value&&et.value.open(bt);return}S("create"),D(F.value[0])}function ot(){n&&b3(a.value,n)}return(bt,X)=>(St(),tn(ct(Qo),No(Mo(ct(s))),{btn:Se(()=>[U.value?(St(),pe("div",ZX,[j.value?(St(),tn(ct(xg),{key:0,row:""},{default:Se(()=>[te(ct(di),{onClick:X[0]||(X[0]=Wt=>K())},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:C.discard},null,8,["path"])]),_:1}),te(ct(di),{onClick:X[1]||(X[1]=Wt=>$())},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:C.save},null,8,["path"])]),_:1})]),_:1})):(St(),tn(ct(xg),{key:1,row:""},{default:Se(()=>[te(ct(di),{onClick:X[2]||(X[2]=Wt=>tt())},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:C.close},null,8,["path"])]),_:1}),te(ct(di),{active:E.value==="create",onClick:Ct},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:C.add},null,8,["path"])]),_:1},8,["active"]),te(ct(di),{active:E.value==="select",onClick:X[3]||(X[3]=Wt=>S("select"))},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:C.update},null,8,["path"])]),_:1},8,["active"]),te(ct(di),{active:E.value==="delete",onClick:X[4]||(X[4]=Wt=>S("delete"))},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:C.delete},null,8,["path"])]),_:1},8,["active"])]),_:1}))])):ct(n)?(St(),pe("div",WX,[te(ct(di),null,{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:C.draw,onClick:ot},null,8,["path"])]),_:1})])):Cn("",!0)]),default:Se(()=>[te(ct(rC),{ref_key:"contextMenuRef",ref:et},{default:Se(()=>[zt("ul",qX,[(St(!0),pe(mr,null,ki(q.value,(Wt,Vt)=>(St(),pe("li",{key:Vt,onClick:_i(Bt=>{S("create"),D(Wt.id),ut()},["stop"]),class:"context-menu__item"},[zt("span",{innerHTML:Wt.name},null,8,YX)],8,KX))),128))])]),_:1},512)]),_:1},16))}}),QX=Vn(XX,[["__scopeId","data-v-84b1e396"]]),dg={POINT:"draw_point",LINE_STRING:"draw_line_string",POLYGON:"draw_polygon"},JX={[dg.POINT]:"draw point",[dg.LINE_STRING]:"draw line string",[dg.POLYGON]:"draw polygon"},tQ={class:"field-container"},eQ={class:"label-container"},nQ={class:"label-field"},rQ=["disabled","title"],iQ=["disabled"],oQ={class:"geometry-list-container"},aQ={class:""},sQ=["onUpdate:modelValue","onChange"],lQ={class:""},cQ=["onUpdate:modelValue","onChange"],uQ={class:""},hQ=["onClick"],dQ={__name:"field-geometry",props:to({modelValue:{type:Array,default:()=>[[0,0]]},maxLength:{type:Number,default:0},title:String,titleActionDownload:String,titleActionFillBound:String,titleActionAddPoint:String},{modelValue:{default:[[0,0]]},modelModifiers:{}}),emits:to(["click:remove","click:fillbound"],["update:modelValue"]),setup(t,{emit:e}){const n=t,a=la(t,"modelValue"),s={add:vd,fillBound:Lg,delete:b2,download:dO,upload:RO},d=e,l=k=>{a.value=k},o=()=>{a.value||(a.value=[]),a.value.push([null,null])},g=()=>{l(a)},_=k=>{a.value.splice(k,1),d("click:remove",k),l(a)},I=k=>{if(!(!k||!k.length))return k.length==1?Aa(k[0]):k.length==2?as(k):zg([[...k,k[0]]])},C=()=>{let k={type:"FeatureCollection",features:[I(a.value)]};const D=new window.Blob([JSON.stringify(k)],{type:"text/plain;charset=utf-8"});P6.saveAs(D,"geojson.json")},E=()=>{d("click:fillbound",I(a.value))},S=bn(()=>!n.maxLength||a.value.length<n.maxLength);return(k,D)=>(St(),pe("div",tQ,[zt("div",eQ,[zt("div",nQ,Rn(t.title),1),zt("div",null,[zt("button",{onClick:E,disabled:!t.modelValue||t.modelValue.length<1,class:"setting-button",title:t.titleActionFillBound},[te(ct(Wn),{size:16,type:"mdi",path:s.fillBound,title:t.titleActionDownload},null,8,["path","title"])],8,rQ),zt("button",{onClick:C,class:"setting-button",disabled:!t.modelValue||t.modelValue.length<1},[te(ct(Wn),{size:16,type:"mdi",path:s.download,title:t.titleActionAddPoint},null,8,["path","title"])],8,iQ),S.value?(St(),pe("button",{key:0,onClick:o,class:"setting-button"},[te(ct(Wn),{size:16,type:"mdi",path:s.add},null,8,["path"])])):Cn("",!0)])]),zt("div",oQ,[(St(!0),pe(mr,null,ki(t.modelValue,(N,U)=>(St(),pe("div",{class:"geometry-list-item",key:U},[zt("div",null,"#"+Rn(U+1),1),zt("div",aQ,[gc(zt("input",{class:"setting-input","onUpdate:modelValue":F=>a.value[U][0]=F,type:"number",step:"any",onChange:F=>g()},null,40,sQ),[[wh,a.value[U][0]]])]),zt("div",lQ,[gc(zt("input",{class:"setting-input","onUpdate:modelValue":F=>a.value[U][1]=F,type:"number",step:"any",onChange:F=>g()},null,40,cQ),[[wh,a.value[U][1]]])]),zt("div",uQ,[zt("button",{onClick:F=>_(U),class:"setting-button"},[te(ct(Wn),{size:16,type:"mdi",path:s.delete},null,8,["path"])],8,hQ)])]))),128))])]))}},fQ=Vn(dQ,[["__scopeId","data-v-e28afdf9"]]),pQ={class:"label-container"},mQ={class:"label-field"},gQ={class:"label-field-value"},yQ={__name:"fields-show",props:{fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]}},setup(t){return(e,n)=>(St(),pe("div",null,[(St(!0),pe(mr,null,ki(t.fields,(a,s)=>(St(),pe("div",{class:"field-container label-value",key:s},[zt("div",pQ,[zt("div",mQ,Rn(a.text),1),zt("div",gQ,Rn(a.value),1)])]))),128))]))}},vQ=Vn(yQ,[["__scopeId","data-v-6556841c"]]),_Q={class:"setting-container"},bQ={__name:"MeasurementSettingPopup",props:to({...So,modelValue:Array,maxLength:{type:Number,default:0},fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]},popUpPosition:{type:Object,default:()=>({top:50,right:40,width:350,height:300})}},{modelValue:{default:[[0,0]]},modelModifiers:{},show:{default:!1},showModifiers:{}}),emits:to(["update:modelValue"],["update:modelValue","update:show"]),setup(t,{emit:e}){const n=e,a=t,{callMap:s,moduleContainerProps:d,mapId:l}=Ai(a),{trans:o}=jo(l.value),g=la(t,"modelValue"),_=la(t,"show"),I=E=>{s(S=>{kP(S,E)})};function C(E){n("update:modelValue",E.value)}return(E,S)=>(St(),tn(ct(Qo),No(Mo(ct(d))),{draggable:Se(k=>[_.value?(St(),tn(ct(bd),Tr({key:0},Object.assign(k,t.popUpPosition),{show:_.value,"onUpdate:show":S[0]||(S[0]=D=>_.value=D),title:ct(o)("map.measurement.setting.title")}),{default:Se(()=>[zt("div",_Q,[te(vQ,{fields:t.fields},null,8,["fields"]),te(fQ,{"onUpdate:modelValue":C,modelValue:g.value,maxLength:t.maxLength,"onClick:fillbound":I,title:ct(o)("map.measurement.setting.field.data"),titleActionDownload:ct(o)("map.measurement.action.download"),titleActionFillBound:ct(o)("map.measurement.action.fly-to"),titleActionAddPoint:ct(o)("map.measurement.action.add-point")},null,8,["modelValue","maxLength","title","titleActionDownload","titleActionFillBound","titleActionAddPoint"])])]),_:2},1040,["show","title"])):Cn("",!0)]),default:Se(()=>[qn(E.$slots,"default",{},void 0,!0)]),_:3},16))}},xQ=Vn(bQ,[["__scopeId","data-v-1a628ab0"]]);class Fb{constructor(){this.value=[]}get coordinates(){return this.value.filter(e=>e[0]!=null&&e[1]!=null)}start(){}add(e){const n=AQ(this.value);n>=0?this.value[n]=e:this.value.push(e)}init(e){this.value=e}getResult(){return{}}reset(){this.value=[]}destroy(){this.value=[]}}function AQ(t=[]){return t.findIndex(e=>!e[0]||!e[1])}function j1(t,e="vi"){return new Intl.NumberFormat(e).format(t)}class wQ extends Fb{get name(){return"Measure Area"}get type(){return"area"}getResult(){const s={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return s;if(this.coordinates.length==1)return s.features=[Aa(this.coordinates[0])],s;if(this.coordinates.length==2)return s.features=[as(this.coordinates)],s;const d=zg([[...this.coordinates,this.coordinates[0]]]);return s.features=[d],s.value=vG(d),s.format=VA(s.value),s.features_label=[sG(d,{properties:{is_label:!0,is_center:!0,text:VA(s.value)}})],s.fields=[{trans:"map.measurement.setting.area",value:VA(s.value)}],s}}function VA(t=0){return t<1e6?`${j1(t.toFixed(2))} m²`:`${j1((t/1e6).toFixed(2))} km²`}class CQ extends Fb{get name(){return"Measure Azimuth"}get type(){return"line"}get setting(){return{maxLength:2}}add(e){this.value.length>1&&(this.value=this.value.slice(0,1)),this.value.push(e)}getResult(){const s={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return s;if(this.coordinates.length==1)return s.features=[Aa(this.coordinates[0])],s;const d=this.coordinates[this.coordinates.length-1],l=this.coordinates[this.coordinates.length-2],o=as(this.coordinates);s.features=[o];const g=IP(l,d);return s.value=_P(g).toFixed(3),s.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:d},properties:{is_label:!0,text:`${s.value} °`,rotation:g}}],s.fields=[{trans:"map.measurement.setting.azimuth",value:`${s.value} °`}],s}}class IQ extends Fb{get name(){return"Measure Distance"}get type(){return"line"}getResult(){const s={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return s;if(this.coordinates.length==1)return s.features=[Aa(this.coordinates[0])],s;const d=as(this.coordinates);return s.features=[d],s.value=CM(d),s.format=UA(s.value),s.features_label=this.coordinates.map((l,o,g)=>({type:"Feature",properties:{is_label:!0,text:UA(o<1?0:CM(as(g.slice(0,o+1))))},geometry:{type:"Point",coordinates:l}})),s.fields=[{trans:"map.measurement.setting.distance",value:UA(s.value)}],s}}function UA(t=0){return t<1?`${j1((t*1e3).toFixed(2))} m`:`${j1(t.toFixed(2))} km`}class MQ extends Fb{constructor(e=[]){super(),this.crs_items=e}get name(){return"Measure Point"}get type(){return"point"}get setting(){return{maxLength:1}}add(e){this.value.length>0&&(this.value=[]),this.value.push(e)}getResult(){const s={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return s;s.features=[Aa(this.coordinates[0])];const d=this.coordinates[0][0],l=this.coordinates[0][1],o=Iw({longitude:d,latitude:l},void 0,!1);if(o&&(s.value=`${o.longitude}, ${o.latitude}`),this.crs_items){const g=this.crs_items.find(_=>_.default);s.fields=[{trans:g==null?void 0:g.name,value:s.value}],this.crs_items.filter(_=>!_.default).forEach(_=>{var I;if(!_.default&&_.proj4js){const C=Iw({longitude:d,latitude:l},_,!1);C&&((I=s.fields)==null||I.push({trans:_.name,value:`${C.longitude}, ${C.latitude}`}))}})}else s.fields=[{trans:"map.measurement.setting.point",value:s.value}];return s.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:this.coordinates[0]},properties:{is_label:!0,text:s.value}}],s}}class cC{start(e){}view(e){}reset(){}destroy(){}}class SQ extends cC{constructor(e){super(),this.layers=[],this.map=e}init(e,n){return n.id||(n.id=`measurment-control-${ju()}`),this.map.addSource(n.id,n.data),e.forEach(a=>{a.id||(a.id=`measurment-control-${ju()}`),a.source||(a.source=n.id),this.map.addLayer(a)}),this.source=n,this.layers=e,this}start(){this.onStart&&this.onStart(),this.layers.forEach(e=>{const n=e.id;this.map.getLayer(n)&&this.map.moveLayer(n)})}reset(){const e=this.map.getSource(this.source.id);e&&e.setData({type:"FeatureCollection",features:[]}),this.onReset&&this.onReset()}destroy(){this.map&&(this.layers.forEach(e=>{const n=e.id;this.map.getLayer(n)&&this.map.removeLayer(n),this.map.getSource(n)&&this.map.removeSource(n)}),this.map.getSource(this.source.id)&&this.map.removeSource(this.source.id))}view({features:e=[],features_label:n=[]}={}){const a=this.map.getSource(this.source.id);a&&a.setData({type:"FeatureCollection",features:[...e,...n]})}}class EQ extends cC{constructor(e){super(),this.markers=[],this.bindEvent={},this.color="#fff",this.map=e,this.markers=[]}setColor(e){return this.color=e,this}view({coordinates:e=[]}={}){const n=!!this.onDragMarker;if(e.length<this.markers.length)for(;e.length<this.markers.length;){const a=this.markers.pop();a&&a.remove()}e.forEach((a,s)=>{if(!a[0]||!a[1])return;let d=this.markers[s];d||(this.bindEvent[s]={},d=TQ({color:this.color,draggable:n}),this.markers[s]=d),d.setLngLat({lng:a[0],lat:a[1]}).addTo(this.map),n&&(this.bindEvent[s].dragend&&d.off("dragend",this.bindEvent[s].dragend),this.bindEvent[s].dragend=()=>{const o=d.getLngLat(),g=[o.lng,o.lat],_=e.slice();_[s]=g,this.onDragMarker&&this.onDragMarker(_,g,s,d)},d.on("dragend",this.bindEvent[s].dragend));const l=d.getElement();this.onRightClickMarker&&(this.bindEvent[s].contextmenu&&l.removeEventListener("contextmenu",this.bindEvent[s].contextmenu),this.bindEvent[s].contextmenu=o=>{o.preventDefault();const g=d.getLngLat();this.onRightClickMarker&&this.onRightClickMarker([g.lng,g.lat],s,d)},l.addEventListener("contextmenu",this.bindEvent[s].contextmenu))})}reset(){this.markers.forEach(e=>{e.remove()}),this.markers=[]}destroy(){this.reset()}}function TQ({color:t,draggable:e=!1}={}){const n=document.createElement("div");return n.style.width="12px",n.style.height="12px",n.style.borderRadius="50%",n.style.background="#fff",n.style.boxSizing="border-box",n.style.border=`2px solid ${t}`,n.style.cursor="pointer",new ky.Marker({element:n,draggable:e})}const PQ=function(){let t=null;const e=[],n=C=>{for(let E=0;E<e.length;E++)C(e[E])},a=C=>{t=C},s=C=>{e.push(C)},d=()=>{t&&t.start(),n(C=>{C.start&&C.start(g())})},l=()=>{t&&t.reset(),n(C=>{C.reset&&C.reset()})},o=()=>{t&&t.destroy(),n(C=>{C.destroy()})},g=()=>({coordinates:t.value,setting:t.setting,...t.getResult()});return{get type(){return t?t.type:null},get action(){return t},setAction:a,addView:s,start:d,reset:l,destroy:o,add:C=>{t&&t.add(C),n(E=>{E.view&&E.view(g())})},init:(C=[])=>{t&&t.init(C),n(E=>{E.view(g())})},getResult:g}};class kQ extends cC{start({setting:e}={}){this.onChangeSetting&&this.onChangeSetting(e)}view({coordinates:e=[],setting:n={},fields:a=[]}={}){this.onChangeValue&&this.onChangeValue(e),this.onChangeSetting&&(n.fields=a,this.onChangeSetting(n))}reset(){this.onChangeValue&&this.onChangeValue([]),this.onChangeSetting&&this.onChangeSetting()}}const LQ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAADo6zjiAAAAAXNSR0IArs4c6QAAA4RJREFUWEe9l09o02AYxtdkTRlfL13aie1Cdwgt7cqwiptUA2MHYb04xXhRUFQ6ENHT7rnvpOBhZaIieMlBPYyBIBtEKhtq/TM7W3JYyVpxbdZLvkHTtUrKNrou/5pt5tCWfu/7Pr/naXlJbF2HuKLRqFdpT6fTRatjbFYblT4AwHflHUI4ZHWOZQCapjGWZauKME3TDpZlZSsQlgFcLtfLSqVyQxHFcfyVKIrX/ytAV1fX3zZBS2YsNXm93gfFYvFRK4DX631YLBYfd5qCJQAEQbYbjQbaKoYgSL3RaHQfO0AgELiQy+U4NaFAIEDlcrkPnUB0nIDdbt+s1WouNREMwyqyLPceGwBFUSc5jtNdOhRFeTmO+20WoqMEAABpCOEpveEAgK8QwuiRAyQSCXsymTS1bDpZTKYTwHH8uSiKN804w3H8hSiKt8zUmgZQWTxG803NNlVEEMQ9QRCeGCm2nhMEcd9MjykAtcVjBGN2MRkCkCR5juf5j0aCaueRSOT8yspKSq/XEADDsLIsy7gVAAzDRFmW3ZYBYrFYXyqV+mNFfLcnFoudSKVSG1ozdBMAAHyCEJ45DIDT6fwiSZLmDE2AThaPEWAikcCSyWRNrU4ToLe3d3Zzc/OO0XAz5x6P51mpVLrdEYCFxWPEompW9Uufz5coFAozRhM7Off5fJOFQiHZ3qMKgCBIzcrdjR4QiqLb9XrdbggQDoeHM5nMkhl3PT09WQRBlOeCoJn6cDg8kslklltrDyTgcDg2qtWqx2hgMBi8ls1mWaWOJMmrPM83P+tdDoejVK1W+zQBKIrycBynuTSURgBAdmpqKsIwzHbrIIZhuqenp1eM0qAoqo/juNJu774EAABLEMJhLRd+v/9KPp9/reeSIIgJQRA0awAAyxDCkQMAo6Oj3YuLi6rLQnEdj8cHWZatG8WsnNM0jc7Pz/+UJEn1v8EwjH03wb0E3G73TLlcTrQLEARxWRCEN2aE22sGBgYm1tbWDqThdruT5XJ5Uqlv/Qn2PWo5nc5f4+PjEbOutQB30vghSVKoraap3Xzp7++/s76+PrtbsEP+1oprrR6SJC/xPL+XpN/vv5vP5582AVAUlZUlAQDIxOPxocO61ktjbm7u29bW1iCKorV6vY7ZQqHQ6dXV1c8kSU7wPH+kro3SiEQiZ204jr8fGxu7eFyu9dJYWFh49w9KoVXl/UeUKQAAAABJRU5ErkJggg==",RQ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGmSURBVDiNldPBitpAGAfwv5mMmy85JCistD5Ai/gCPYovYJENCPZQF8VD36HXUkrfQws9R8WLF58gh2h2W2PpoeTWxBgzMr1spd3uUvOHOQ2//3yHb4C/UyGi95Zl3XLOUwASgFRVNTVN8ysRfQTwFA+FMdYhoqjf7+9ns5kMgkCGYSjDMJTb7VbO53M5HA4PRBRzzl//g8vlcrxYLE7osbNcLmWlUok459cAULgb+2YymRi1Wu3B6e7H9300Go1dkiTPGRG97Xa7LzqdjnqWBlAqlRBFEVzXNZRisXhl2/bFufh3bNvmAF4WOOd73/cvDMPIVSCEQLVaFUqWZbkxAKiqCsaYVHLLe1E452kcx7mhEALH47Gg6Lr+3fO83AXr9Rq6rofK4XD4NB6P07wFo9Eok1J+LgC41DTt1nEco16vn4VXqxWazeYuSZJnCoAfWZZdt9vtneu6/8We56HVasVCiDcAvp0uGGM2Ef3s9Xp7x3HkZrM57X8QBHI6ncrBYJASUcQYe/XYA5eapr2zLOuGc77H3XfmnKemaX4hog8AnvwJfgHMKs1jQ++4tQAAAABJRU5ErkJggg==",$0="#004E98",DQ=rr({__name:"MeasurementControl",props:{...So},setup(t){const{getCrsItems:e}=T2,{addImage:n}=ZU;let a=PQ();const s=t,d=gn(""),l=gn([]),o=gn({show:!0,maxLength:0,fields:[]}),g={add:vd,fillBound:Lg,distance:EO,area:TO,azimuth:kO,point:w2,clear:b2,close:bg,setting:IT},{callMap:_,mapId:I,moduleContainerProps:C}=Ai(s,U,F),{trans:E,setLocaleDefault:S}=jo(I.value);S({map:{measurement:{action:{clear:"Clear",close:"Close",setting:"Setting",download:"Download","add-point":"Add point","fly-to":"Fill bound",add:"Add"},title:"Measurement",result:"Measurement Result",field:{"unit-distance":"Unit distance","unit-area":"Unit area"},tools:{point:"Measure Point",distance:"Measure Distance",area:"Measure Area",azimuth:"Measure azimuth"},unit:{meter:"Meter",kilometer:"Kilometer","square-meter":"Square Meter",hecta:"Hecta","square-kilometer":"Square Kilometer"},setting:{title:"Setting",field:{data:"Data"},point:"Point",distance:"Distance",area:"Area",azimuth:"Azimuthị"},"no-data":{text:"Status",value:"Waiting..."}}}});const k=new kb().setHandler(j),{add:D,remove:N}=pP(I.value,k);function U(X){n(X.id,"azimuth-arrow",LQ,{sdf:!0}),n(X.id,"measurment-round",RQ,{content:[4,4,12,12],stretchX:[[6,10]],stretchY:[[6,10]]});let Wt=new SQ(X);Wt.init([{type:"line",paint:{"line-color":$0,"line-width":2}},{type:"fill",filter:["==","$type","Polygon"],paint:{"fill-color":$0,"fill-opacity":.3}},{type:"symbol",filter:["has","rotation"],paint:{"icon-color":$0},layout:{"icon-size":1.2,"icon-rotate":{type:"identity",property:"rotation"},"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":"azimuth-arrow",visibility:"visible"}},{type:"symbol",filter:["all",["has","is_label"],["==","$type","Point"]],layout:{"text-field":"{text}","text-offset":["case",["to-boolean",["get","is_center"]],["literal",[0,0]],["literal",[0,2]]],"text-size":14,"text-allow-overlap":!0,"icon-allow-overlap":!0,"icon-image":"measurment-round","icon-text-fit":"both"},paint:{"text-color":"#fff","text-halo-color":$0,"text-halo-width":2}}],{data:{type:"geojson",data:{type:"FeatureCollection",features:[]}}}),Wt.onStart=()=>{X&&D()},Wt.onReset=()=>{N()};let Vt=new EQ(X);Vt.setColor($0),Vt.onDragMarker=ae=>{a.init(ae)},Vt.onRightClickMarker=(ae,ye)=>{l.value.splice(ye,1),a.init(l.value)};let Bt=new kQ;Bt.onChangeValue=ae=>{l.value=(ae||[]).slice()},Bt.onChangeSetting=(ae={})=>{o.value.maxLength=ae.maxLength||0;let ye=ae.fields;(!ye||ye.length==0)&&(ye=[{text:E.value("map.measurement.no-data.text"),value:E.value("map.measurement.no-data.value")}]),o.value.fields=ye.map(en=>({...en,text:en.trans?E.value(en.trans):en.text}))},a.addView(Wt),a.addView(Vt),a.addView(Bt)}function F(){a&&a.destroy(),ot()}function j(X){const Wt=[X.lngLat.lng,X.lngLat.lat];a.action&&a.add(Wt)}function $(X){return Ct(!1),d.value==X?(d.value=void 0,a.setAction(null),!1):(d.value=X,!0)}function K(){$("distance")&&(a.setAction(new IQ),a.start())}function tt(){$("area")&&(a.setAction(new wQ),a.start())}function it(){$("azimuth")&&(a.setAction(new CQ),a.start())}function et(){$("point")&&(a.setAction(new MQ(e(I.value))),a.start())}function q(){o.value.show=!o.value.show}function ut(){_(X=>{kP(X,PG(l.value))})}function Ct(X=!0){a&&(a.reset(),X&&El(()=>{a.start()}))}function ot(){Ct(!1),d.value=void 0,a&&a.setAction(null)}function bt(X=[]){a&&a.init(X)}return(X,Wt)=>(St(),tn(ct(Qo),No(Mo(ct(C))),{btn:Se(()=>[d.value?(St(),tn(ct(xg),{key:1,row:""},{default:Se(()=>[te(ct(di),{tooltip:ct(E)("map.measurement.action.setting"),onClick:Wt[4]||(Wt[4]=Vt=>q()),active:o.value.show},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:g.setting},null,8,["path"])]),_:1},8,["tooltip","active"]),te(ct(di),{disabled:!l.value||l.value.length<1,tooltip:ct(E)("map.measurement.action.fly-to"),onClick:Wt[5]||(Wt[5]=Vt=>ut())},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:g.fillBound},null,8,["path"])]),_:1},8,["disabled","tooltip"]),te(ct(di),{tooltip:ct(E)("map.measurement.action.clear"),onClick:Wt[6]||(Wt[6]=Vt=>Ct())},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:g.clear},null,8,["path"])]),_:1},8,["tooltip"]),te(ct(di),{tooltip:ct(E)("map.measurement.action.close"),onClick:Wt[7]||(Wt[7]=Vt=>ot())},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:g.close},null,8,["path"])]),_:1},8,["tooltip"])]),_:1})):(St(),tn(ct(xg),{key:0,row:""},{default:Se(()=>[te(ct(di),{tooltip:ct(E)("map.measurement.tools.distance"),onClick:Wt[0]||(Wt[0]=Vt=>K()),active:d.value=="distance"},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:g.distance},null,8,["path"])]),_:1},8,["tooltip","active"]),te(ct(di),{tooltip:ct(E)("map.measurement.tools.area"),onClick:Wt[1]||(Wt[1]=Vt=>tt()),active:d.value=="area"},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:g.area},null,8,["path"])]),_:1},8,["tooltip","active"]),te(ct(di),{tooltip:ct(E)("map.measurement.tools.azimuth"),onClick:Wt[2]||(Wt[2]=Vt=>it()),active:d.value=="azimuth"},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:g.azimuth},null,8,["path"])]),_:1},8,["tooltip","active"]),te(ct(di),{tooltip:ct(E)("map.measurement.tools.point"),onClick:Wt[3]||(Wt[3]=Vt=>et()),active:d.value=="point"},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:g.point},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1}))]),default:Se(()=>[qn(X.$slots,"default"),d.value?(St(),tn(xQ,{key:0,modelValue:l.value,show:o.value.show,"onUpdate:show":Wt[8]||(Wt[8]=Vt=>o.value.show=Vt),position:X.position,"onUpdate:modelValue":bt,maxLength:o.value.maxLength,fields:o.value.fields},null,8,["modelValue","show","position","maxLength","fields"])):Cn("",!0)]),_:3},16))}});class OQ{constructor(e){this.mapCanvas=e,this.color="#535353"}create(){this.updateValues(),this.createCanvas(this.mapCanvas.parentElement)}updateValues(){this.width=this.mapCanvas.clientWidth,this.height=this.mapCanvas.clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const e=this.width/2,n=this.height/2;this.yLine.setAttribute("x1",`${e}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${e}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${n}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${n}px`)}}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["pointer-events"]="none",n.setAttribute("width",`${this.width}px`),n.setAttribute("height",`${this.height}px`);const a=this.width/2,s=this.height/2;this.yLine=n.appendChild(this.createLine(a,0,a,this.height,this.color,"2px")),this.xLine=n.appendChild(this.createLine(0,s,this.width,s,this.color,"2px")),e.appendChild(n),this.svgCanvas=n}}createLine(e,n,a,s,d,l){const o=document.createElementNS("http://www.w3.org/2000/svg","line");return o.setAttribute("x1",e+""),o.setAttribute("y1",n+""),o.setAttribute("x2",a+""),o.setAttribute("y2",s+""),o.setAttribute("stroke-dasharray","5,5"),o.setAttribute("stroke",d),o.setAttribute("stroke-width",l),o}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}function x3(t){const{renderMap:e,hidden:n}=A3(t,a=>{const s=t.getCanvas();a.style.width=s.clientWidth+"px",a.style.height=s.clientHeight+"px"});return new Promise(a=>{e.once("idle",()=>{var d;const s=e.getCanvas();a(s.toDataURL()),e.remove(),(d=n.parentNode)==null||d.removeChild(n)})})}async function zQ(t,e){const{renderMap:n,hidden:a}=A3(t,s=>{s.style.width=YM(+e.width,1),s.style.height=YM(+e.height,1)});return new Promise(s=>{n.once("idle",()=>{var l;const d=n.getCanvas();s(d.toDataURL()),n.remove(),(l=a.parentNode)==null||l.removeChild(a)})})}function YM(t,e=96){return`${e*t}px`}function A3(t,e){var o;const n=document.createElement("div");n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.padding="0",n.style.margin="0",n.style.background="transparent",n.style.zIndex="-1",document.body.appendChild(n);const a=document.createElement("div");e(a),n.appendChild(a);const s=new bw.Map({container:a,center:t.getCenter(),zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:t._requestManager._transformRequestFn}),d=(t.style.imageManager||{}).images||{};d&&((o=Object.keys(d))==null?void 0:o.length)>0&&Object.keys(d).forEach(g=>{g&&s.addImage(g,d[g].data)});const l=t.getStyle();if(l&&l.sources){const g=l.sources;Object.keys(g).forEach(_=>{const I=g[_];Object.keys(I).forEach(C=>{I[C]||delete I[C]})})}return s.setStyle(l),{renderMap:s,hidden:n}}class FQ{constructor(e,n){this.mapCanvas=e,this.setOption(n)}getCutSize(){return{width:this.cutWidth,height:this.cutHeight,startX:this.cutStartX,startY:this.cutStartY}}mapResize(){this.generateCutOut()}create(){this.createCanvas(this.mapCanvas.parentElement),this.generateCutOut()}createCanvas(e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=this.mapCanvas.clientWidth,s=this.mapCanvas.clientHeight;n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["pointer-events"]="none",n.setAttribute("width",`${a}px`),n.setAttribute("height",`${s}px`);const d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("style","fill:#888888;stroke-width:0"),d.setAttribute("fill-opacity","0.5"),n.append(d),e.appendChild(n),this.svgCanvas=n,this.svgPath=d}generateCutOut(){if(this.svgCanvas===void 0||this.svgPath===void 0)return;const e=this.mapCanvas.clientWidth,n=this.mapCanvas.clientHeight,a=this.option.ratio;let s=n;s>e&&(s=e);let d=0,l=0;if(a>=1?(d=Math.floor(s*4/5-30),l=d/a):(l=Math.floor(s*4/5-30),d=Math.floor(l*a)),this.option.orientation!=="landscape"){if(d>l){const S=l;l=d,d=S}}else if(d<l){const S=l;l=d,d=S}this.cutStartX=e/2-d/2,this.cutStartY=n/2-l/2;const o=l,g=d;this.cutWidth=d,this.cutHeight=l;const _=this.cutStartX,I=_+g,C=this.cutStartY,E=C+o;this.svgCanvas.setAttribute("width",`${e}px`),this.svgCanvas.setAttribute("height",`${n}px`),this.svgPath.setAttribute("d",`M 0 0 L ${e} 0 L ${e} ${n} L 0 ${n} M ${_} ${C} L ${_} ${E} L ${I} ${E} L ${I} ${C}`)}setOption(e){this.option=e,this.generateCutOut()}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}const BQ=rr({__name:"PrintControl",props:{...So,fileName:{type:String,default:"map"}},setup(t){const e=t,n={print:SO,close:bg,save:MT},{callMap:a,mapId:s,moduleContainerProps:d}=Ai(e),{trans:l,setLocaleDefault:o}=jo(s.value);o({map:{print:{title:"Print",actions:{save:"save",clear:"clear"}}}});const g=gn({show:!1,loading:!1});function _(C){a(async E=>{g.value.loading=!0;try{let S=await x3(E);C?C(S):await I(S)}finally{g.value.loading=!1}})}async function I(C){hb.saveAs(C,`${e.fileName}.png`)}return(C,E)=>(St(),tn(ct(Qo),No(Mo(ct(d))),{btn:Se(()=>[te(ct(di),{tooltip:ct(l)("map.print.title"),onClick:E[0]||(E[0]=_i(S=>_(I),["stop"])),loading:g.value.loading},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:n.print},null,8,["path"])]),_:1},8,["tooltip","loading"])]),_:1},16))}}),uC="print";function NQ(t){Vu(t,uC,void 0)}_d(uC,NQ);const jQ=(t,{show:e,close:n,save:a,saveAll:s})=>{Vu(t,uC,{show:e,close:n,save:a,saveAll:s})},VQ=t=>(_c("data-v-f39c3a1c"),t=t(),bc(),t),UQ={class:"setting-container"},HQ=VQ(()=>zt("div",{class:"grow"},null,-1)),GQ=rr({__name:"PrintAdvancedControl",props:{...So,disabledCrosshair:Boolean,disabledPrintableArea:Boolean,fileName:{type:String,default:"map"}},setup(t){const e=t,n={print:MO,close:bg,save:MT,setting:IT},{callMap:a,mapId:s,moduleContainerProps:d}=Ai(e,_),{trans:l,setLocaleDefault:o}=jo(s.value);o({map:{print:{title:"Print",actions:{save:"save",clear:"clear",setting:"Setting"},setting:{title:"Setting"},field:{ratio:"Ratio",orientation:"Orientation"},btn:{apply:"Print"}}}});const g=gn({show:!1,loading:!1,setting_show:!1,setting:{ratio:1,orientation:"portrait"}});Zp(()=>{E()});function _(){jQ(s.value,{show:tt=>S(tt),close:()=>E(),save:tt=>C(tt),saveAll:tt=>I(tt)})}function I(tt){a(async it=>{g.value.loading=!0;try{let et=await x3(it);tt?tt(et):await k(et)}finally{g.value.loading=!1}})}async function C(tt){a(async it=>{if(N)try{g.value.loading=!0;let et=await zQ(it,N.getCutSize());tt?tt(et):await k(et)}finally{g.value.loading=!1}})}function E(){g.value.loading=!1,g.value.show=!1,U(g.value.show),F(g.value.show,g.value.setting)}function S(tt){g.value.show=!0,U(g.value.show),F(g.value.show,tt)}async function k(tt){hb.saveAs(tt,`${e.fileName}.png`)}let D,N;function U(tt){e.disabledCrosshair||a(it=>{tt===!1?D!==void 0&&(D.destroy(),D=void 0):(D=new OQ(it.getCanvas()),D.create())})}function F(tt,it){e.disabledPrintableArea||a(et=>{tt===!1?(et.off("resize",j),N!==void 0&&(N.destroy(),N=void 0)):(et.on("resize",j),N=new FQ(et.getCanvas(),it),N.create())})}function j(){N&&N.mapResize(),D&&D.mapResize()}function $(){g.value.setting_show=!g.value.setting_show}function K(){N&&N.setOption(g.value.setting)}return(tt,it)=>(St(),tn(ct(Qo),No(Mo(ct(d))),{btn:Se(()=>[te(ct(xg),{row:""},{default:Se(()=>[g.value.show?(St(),pe(mr,{key:1},[te(ct(di),{disabled:g.value.loading,loading:g.value.loading,tooltip:ct(l)("map.print.actions.save"),onClick:it[1]||(it[1]=et=>C())},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:n.save},null,8,["path"])]),_:1},8,["disabled","loading","tooltip"]),te(ct(di),{disabled:g.value.loading,tooltip:ct(l)("map.print.actions.clear"),onClick:it[2]||(it[2]=et=>E())},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:n.close},null,8,["path"])]),_:1},8,["disabled","tooltip"])],64)):(St(),tn(ct(di),{key:0,active:g.value.show,tooltip:ct(l)("map.print.title"),onClick:it[0]||(it[0]=_i(et=>S(g.value.setting),["stop"])),loading:g.value.loading},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:n.print},null,8,["path"])]),_:1},8,["active","tooltip","loading"])),te(ct(di),{tooltip:ct(l)("map.print.actions.setting"),onClick:it[3]||(it[3]=et=>$()),active:g.value.setting_show},{default:Se(()=>[te(ct(Wn),{size:18,type:"mdi",path:n.setting},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1})]),draggable:Se(et=>[g.value.setting_show?(St(),tn(ct(bd),Tr({key:0},et,{height:220,show:g.value.setting_show,"onUpdate:show":it[9]||(it[9]=q=>g.value.setting_show=q),title:ct(l)("map.print.setting.title")}),{default:Se(()=>[zt("div",UQ,[zt("div",null,[te(ct(Pi),{modelValue:g.value.setting.ratio,"onUpdate:modelValue":it[4]||(it[4]=q=>g.value.setting.ratio=q),label:ct(l)("map.print.field.ratio"),onChange:it[5]||(it[5]=q=>K())},null,8,["modelValue","label"])]),zt("div",null,[te(ct(Tf),{modelValue:g.value.setting.orientation,"onUpdate:modelValue":it[6]||(it[6]=q=>g.value.setting.orientation=q),items:[{value:"landscape",text:"Landscape"},{value:"portrait",text:"Portrait"}],label:ct(l)("map.print.field.orientation"),onChange:it[7]||(it[7]=q=>K())},null,8,["modelValue","label"])]),HQ,g.value.show?(St(),tn(ct(Cl),{key:0,class:"btn-container",onClick:it[8]||(it[8]=q=>C())},{default:Se(()=>[ho(Rn(ct(l)("map.print.btn.apply")),1)]),_:1})):Cn("",!0)])]),_:2},1040,["show","title"])):Cn("",!0)]),_:1},16))}}),$Q=Vn(GQ,[["__scopeId","data-v-f39c3a1c"]]),ZQ=rr({__name:"AllMapView",setup(t){const{downloadFile:e}=s6(),n=gn(),{convertList:a}=a6(),{convert:s}=iO();function d(_){const I=Ru("Group test",null,!0),C=YP("source",{name:"raster 1",type:"raster",tiles:["https://naturalearthtiles.roblabs.com/tiles/natural_earth_cross_blended_hypso_shaded_relief.raster/{z}/{x}/{y}.png"],maxzoom:6,bounds:[104.96327341667353,18.461221184685627,106.65936430823979,19.549518287564368]}),E=Xm("layer raster",[{type:"raster"}]),S=Qm("test raster");S.color="#0000FF";const k=Ru("Group layer 1",null,!0);I.add(C),k.add(S),k.add(E),I.add(k),S.addMenu(AA());const D=Ru("Group test",null,!0),N=Lw("source",{type:"FeatureCollection",features:[]}),U=Ru("Group layer 1",null,!0),F=Qm("test area");F.color="#0000FF",F.legend=RX([{type:"text",value:{text:"text-test",value:"test-value"}},{type:"linear",value:{text:"legend linear",items:[{value:"test 1",color:"#fff"},{value:"test 2",color:"#000"},{value:"test 3",color:"red"}]}}]);const j=Xm("layer area",[new Ym().setStyleType("area").setColor(F.color).setOpacity(.5).build()]);U.add(j),U.add(F);const $=Ru("Group layer 2",null,!0),K=Qm("test point");K.color="#ff0000",K.legend=LX("color",{text:"color-test",color:"#fff"});const tt=Xm("layer point",[new Ym().setStyleType("point").setColor(K.color).setOpacity(K.opacity).build(),new Ym().setStyleType("line").setColor(K.color).setOpacity(.5).build()]);F.addMenus([wA({location:"extra"}),xA(),AA(),EM()]),K.addMenus([wA({location:"extra"}),xA(),g(),o()]);const it=DM("metadata for list2",{bbox:[105.88454157202995,20.878811643339404,106.16710803591963,21.0854254401454]}),et=DM("metadata",{bbox:[104.96327341667353,18.461221184685627,107.53334783357559,20.18022781865689]}),q=VP("test identify"),ut=PM("test identify 1"),Ct=PM("test identify 2");q.addMenus([e1(),n1()]),ut.addMenus([e1(),n1()]),Ct.addMenus([e1(),n1()]);const ot={id:"test",name:"test"};F.group=ot,U.add(ut),K.group=ot,$.add(tt),$.add(K),$.add(Ct),$.add(it);const bt=kw("data management",{fields:[{text:"Name rat dai rat dai rat dai rat dai",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"}]});bt.setItems([{id:"1",name:"feature 1",geometry:{coordinates:[[[104.96327341667353,19.549518287564368],[104.96327341667353,18.461221184685627],[106.65936430823979,18.461221184685627],[106.65936430823979,19.549518287564368],[104.96327341667353,19.549518287564368]]],type:"Polygon"}},{id:"2",name:"feature 2",geometry:{coordinates:[[[105.80782070639765,20.18022781865689],[105.80782070639765,18.841791883714322],[107.53334783357559,18.841791883714322],[107.53334783357559,20.18022781865689],[105.80782070639765,20.18022781865689]]],type:"Polygon"}}]),D.add(N),D.add(bt),D.add(U),D.add($),D.add(q),D.add(et),Tw(_.id,D),Tw(_.id,l())}function l(){const _=Ru("Group test",null,!0),I=Lw("source",{type:"FeatureCollection",features:[]}),C=Ru("Group layer 1",null,!0),E=Qm("test point"),S=Xm("layer area",[new Ym().setStyleType("point").setColor(E.color).build()]);C.add(S),C.add(E),E.addMenus([wA({location:"extra"}),xA(),AA(),EM()]);const k=kw("data management",{fields:[{text:"Name",value:"name"}]});return k.setItems([{id:"2",name:"feature 2",geometry:{coordinates:[106.26447460804093,20.9143362367018],type:"Point"}}]),_.add(I),_.add(k),_.add(C),_}function o(){return{type:"item",name:"Download",icon:hO,click:async(_,I)=>{const C=vc(_,E=>E.type==="dataManagement");if(Ew(C)){const E=await s(a(await C.getList()||[]),{filename:"download.geojson"});E&&e(E,"download.geojson")}}}}function g(){return{type:"item",name:"Edit feature",icon:kT,click:(_,I)=>{const C=vc(_,E=>E.type==="dataManagement");Ew(C)&&b3(I,{cleanAfterDone:!0,draw_support:[dg.POINT,dg.POLYGON,dg.LINE_STRING],getFeatures:C.getFeatures&&C.getFeatures.bind(C),addFeatures:C.addFeatures&&C.addFeatures.bind(C),updateFeatures:C.updateFeatures&&C.updateFeatures.bind(C),deleteFeatures:C.deleteFeatures&&C.deleteFeatures.bind(C),reset:async()=>{Yc(I,E=>{D1(C)&&C.addToMap(E)})}})}}}return(_,I)=>(St(),tn(ct(qN),{ref_key:"mapRef",ref:n,onMapLoaded:d},{default:Se(()=>[te(ct(jW)),te(ct(DQ),{position:"top-right"}),te(ct(QX),{position:"top-right"}),te(ct(RY),{position:"top-left",show:""},{endList:Se(({mapId:C})=>[te(ct(GG),{mapId:C},null,8,["mapId"])]),_:1}),te(ct(Gq),{position:"top-right"}),te(ct($Q)),te(ct(BQ)),te(ct(uH),{position:"top-right"}),te(ct(iH)),te(ct(PH)),te(ct(aH)),te(ct(oH)),te(ct(RH)),te(ct(hH)),te(ct(MH)),te(ct(JG),{position:"bottom-left"}),te(ct($q)),te(ct(fX))]),_:1},512))}}),WQ=d4({history:VR("/demo-map/"),routes:[{path:"/",name:"home",component:ZQ},{path:"/draw/",component:()=>Lm(()=>import("./example-BFqliOb2.js"),__vite__mapDeps([0,1,2,3]))},{path:"/compare/",component:()=>Lm(()=>import("./AllMapCompareView-CLFXNgjn.js"),__vite__mapDeps([4,3]))},{path:"/basemap/",component:()=>Lm(()=>import("./example-D0lx7LyE.js"),__vite__mapDeps([5,1,2,6]))},{path:"/measurement/",component:()=>Lm(()=>import("./example-BVclK-S_.js"),__vite__mapDeps([7,1,2,3]))},{path:"/story-telling/",component:()=>Lm(()=>import("./example-BdzmSlyV.js"),__vite__mapDeps([8,9,10]))},{path:"/story-telling-gps/",component:()=>Lm(()=>import("./example-gps-BTq1uhkn.js"),__vite__mapDeps([11,9,10]))}]}),qQ=rr({__name:"App",setup(t){return(e,n)=>(St(),tn(ct(tT)))}}),KQ=Vn(qQ,[["__scopeId","data-v-b7680054"]]),w3=NE(KQ);w3.use(WQ);w3.mount("#root");export{LP as $,Qo as A,JG as B,Wp as C,QX as D,sT as E,ju as F,mo as G,El as H,V8 as I,yd as J,bn as K,xf as L,qN as M,Af as N,Qy as O,Zp as P,Li as Q,mr as R,Wn as S,ki as T,wF as U,ON as V,wl as W,Xo as X,_c as Y,bc as Z,Vn as _,te as a,ky as a$,mw as a0,Rn as a1,Tf as a2,$G as a3,C2 as a4,ho as a5,o8 as a6,bO as a7,fi as a8,jW as a9,e1 as aA,n1 as aB,kw as aC,Tw as aD,xg as aE,GG as aF,m4 as aG,ls as aH,nE as aI,Hk as aJ,xc as aK,sa as aL,Sf as aM,BT as aN,l4 as aO,NT as aP,YQ as aQ,Js as aR,Yc as aS,Oy as aT,ld as aU,V2 as aV,Aa as aW,U2 as aX,Lb as aY,IP as aZ,iG as a_,DQ as aa,RY as ab,Gq as ac,uH as ad,iH as ae,PH as af,aH as ag,oH as ah,RH as ai,hH as aj,MH as ak,fX as al,Ru as am,YP as an,Xm as ao,Qm as ap,AA as aq,wA as ar,Lw as as,RX as at,Ym as au,LX as av,EM as aw,DM as ax,VP as ay,PM as az,dg as b,as as b0,CM as b1,tn as c,rr as d,Vu as e,jo as f,Bo as g,pe as h,zt as i,So as j,Pf as k,Ai as l,aO as m,_i as n,St as o,di as p,bd as q,gn as r,Tr as s,po as t,ct as u,Cn as v,Se as w,qn as x,No as y,Mo as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/example-BFqliOb2.js","assets/aside-control-CfCfVMZ-.js","assets/aside-control-CNIY_DRj.css","assets/example-BRI0LJKA.css","assets/AllMapCompareView-CLFXNgjn.js","assets/example-D0lx7LyE.js","assets/example-7vOpaiIK.css","assets/example-BVclK-S_.js","assets/example-BdzmSlyV.js","assets/useStorytelling-D3UZTRIl.js","assets/example-Ca6w4nUQ.css","assets/example-gps-BTq1uhkn.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
