(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const o of f.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=i(u);fetch(u.href,f)}})();const YS="modulepreload",XS=function(t){return"/demo-map/"+t},YA={},zg=function(e,i,a){let u=Promise.resolve();return i&&i.length>0&&(document.getElementsByTagName("link"),u=Promise.all(i.map(f=>{if(f=XS(f),f in YA)return;YA[f]=!0;const o=f.endsWith(".css"),y=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const _=document.createElement("link");if(_.rel=o?"stylesheet":YS,o||(_.as="script",_.crossOrigin=""),_.href=f,document.head.appendChild(_),o)return new Promise((C,S)=>{_.addEventListener("load",C),_.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))),u.then(()=>e()).catch(f=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=f,window.dispatchEvent(o),!o.defaultPrevented)throw f})};/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function xb(t,e){const i=new Set(t.split(","));return a=>i.has(a)}const _o={},Sm=[],nc=()=>{},KS=()=>!1,v_=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),bb=t=>t.startsWith("onUpdate:"),ma=Object.assign,Ab=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},QS=Object.prototype.hasOwnProperty,br=(t,e)=>QS.call(t,e),$n=Array.isArray,Tm=t=>zv(t)==="[object Map]",qm=t=>zv(t)==="[object Set]",XA=t=>zv(t)==="[object Date]",Ui=t=>typeof t=="function",Yo=t=>typeof t=="string",sf=t=>typeof t=="symbol",lo=t=>t!==null&&typeof t=="object",PC=t=>(lo(t)||Ui(t))&&Ui(t.then)&&Ui(t.catch),LC=Object.prototype.toString,zv=t=>LC.call(t),JS=t=>zv(t).slice(8,-1),DC=t=>zv(t)==="[object Object]",wb=t=>Yo(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Kg=xb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),y_=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},tT=/-(\w)/g,Fc=y_(t=>t.replace(tT,(e,i)=>i?i.toUpperCase():"")),eT=/\B([A-Z])/g,gd=y_(t=>t.replace(eT,"-$1").toLowerCase()),__=y_(t=>t.charAt(0).toUpperCase()+t.slice(1)),K1=y_(t=>t?`on${__(t)}`:""),vh=(t,e)=>!Object.is(t,e),I0=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},RC=(t,e,i,a=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:a,value:i})},j0=t=>{const e=parseFloat(t);return isNaN(e)?t:e},nT=t=>{const e=Yo(t)?Number(t):NaN;return isNaN(e)?t:e};let KA;const zC=()=>KA||(KA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gr(t){if($n(t)){const e={};for(let i=0;i<t.length;i++){const a=t[i],u=Yo(a)?aT(a):Gr(a);if(u)for(const f in u)e[f]=u[f]}return e}else if(Yo(t)||lo(t))return t}const iT=/;(?![^(]*\))/g,rT=/:([^]+)/,oT=/\/\*[^]*?\*\//g;function aT(t){const e={};return t.replace(oT,"").split(iT).forEach(i=>{if(i){const a=i.split(rT);a.length>1&&(e[a[0].trim()]=a[1].trim())}}),e}function No(t){let e="";if(Yo(t))e=t;else if($n(t))for(let i=0;i<t.length;i++){const a=No(t[i]);a&&(e+=a+" ")}else if(lo(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}function Ga(t){if(!t)return null;let{class:e,style:i}=t;return e&&!Yo(e)&&(t.class=No(e)),i&&(t.style=Gr(i)),t}const sT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lT=xb(sT);function BC(t){return!!t||t===""}function uT(t,e){if(t.length!==e.length)return!1;let i=!0;for(let a=0;i&&a<t.length;a++)i=hd(t[a],e[a]);return i}function hd(t,e){if(t===e)return!0;let i=XA(t),a=XA(e);if(i||a)return i&&a?t.getTime()===e.getTime():!1;if(i=sf(t),a=sf(e),i||a)return t===e;if(i=$n(t),a=$n(e),i||a)return i&&a?uT(t,e):!1;if(i=lo(t),a=lo(e),i||a){if(!i||!a)return!1;const u=Object.keys(t).length,f=Object.keys(e).length;if(u!==f)return!1;for(const o in t){const y=t.hasOwnProperty(o),_=e.hasOwnProperty(o);if(y&&!_||!y&&_||!hd(t[o],e[o]))return!1}}return String(t)===String(e)}function Cb(t,e){return t.findIndex(i=>hd(i,e))}const vn=t=>Yo(t)?t:t==null?"":$n(t)||lo(t)&&(t.toString===LC||!Ui(t.toString))?JSON.stringify(t,OC,2):String(t),OC=(t,e)=>e&&e.__v_isRef?OC(t,e.value):Tm(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[a,u],f)=>(i[Q1(a,f)+" =>"]=u,i),{})}:qm(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>Q1(i))}:sf(e)?Q1(e):lo(e)&&!$n(e)&&!DC(e)?String(e):e,Q1=(t,e="")=>{var i;return sf(t)?`Symbol(${(i=t.description)!=null?i:e})`:t};/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _u;class cT{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=_u,!e&&_u&&(this.index=(_u.scopes||(_u.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const i=_u;try{return _u=this,e()}finally{_u=i}}}on(){_u=this}off(){_u=this.parent}stop(e){if(this._active){let i,a;for(i=0,a=this.effects.length;i<a;i++)this.effects[i].stop();for(i=0,a=this.cleanups.length;i<a;i++)this.cleanups[i]();if(this.scopes)for(i=0,a=this.scopes.length;i<a;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!e){const u=this.parent.scopes.pop();u&&u!==this&&(this.parent.scopes[this.index]=u,u.index=this.index)}this.parent=void 0,this._active=!1}}}function hT(t,e=_u){e&&e.active&&e.effects.push(t)}function FC(){return _u}function fT(t){_u&&_u.cleanups.push(t)}let ld;class Ib{constructor(e,i,a,u){this.fn=e,this.trigger=i,this.scheduler=a,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,hT(this,u)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,yp();for(let e=0;e<this._depsLength;e++){const i=this.deps[e];if(i.computed){if(i.computed.effect._dirtyLevel===2)return!0;if(pT(i.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),_p()}return this._dirtyLevel>=5}set dirty(e){this._dirtyLevel=e?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=lp,i=ld;try{return lp=!0,ld=this,this._runnings++,QA(this),this.fn()}finally{JA(this),this._runnings--,ld=i,lp=e}}stop(){this.active&&(QA(this),JA(this),this.onStop&&this.onStop(),this.active=!1)}}function pT(t){return t.value}function QA(t){t._trackId++,t._depsLength=0}function JA(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)NC(t.deps[e],t);t.deps.length=t._depsLength}}function NC(t,e){const i=t.get(e);i!==void 0&&e._trackId!==i&&(t.delete(e),t.size===0&&t.cleanup())}let lp=!0,Fx=0;const VC=[];function yp(){VC.push(lp),lp=!1}function _p(){const t=VC.pop();lp=t===void 0?!0:t}function Mb(){Fx++}function Eb(){for(Fx--;!Fx&&Nx.length;)Nx.shift()()}function UC(t,e,i){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const a=t.deps[t._depsLength];a!==e?(a&&NC(a,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Nx=[];function jC(t,e,i){Mb();for(const a of t.keys()){if(!t.computed&&a.computed&&t.get(a)===a._trackId&&a._runnings>0){a._dirtyLevel=2;continue}let u;a._dirtyLevel<e&&(u??(u=t.get(a)===a._trackId))&&(a._shouldSchedule||(a._shouldSchedule=a._dirtyLevel===0),a.computed&&a._dirtyLevel===2&&(a._shouldSchedule=!0),a._dirtyLevel=e),a._shouldSchedule&&(u??(u=t.get(a)===a._trackId))&&(a.trigger(),(!a._runnings||a.allowRecurse)&&a._dirtyLevel!==3&&(a._shouldSchedule=!1,a.scheduler&&Nx.push(a.scheduler)))}Eb()}const HC=(t,e)=>{const i=new Map;return i.cleanup=t,i.computed=e,i},H0=new WeakMap,ud=Symbol(""),Vx=Symbol("");function Yl(t,e,i){if(lp&&ld){let a=H0.get(t);a||H0.set(t,a=new Map);let u=a.get(i);u||a.set(i,u=HC(()=>a.delete(i))),UC(ld,u)}}function rf(t,e,i,a,u,f){const o=H0.get(t);if(!o)return;let y=[];if(e==="clear")y=[...o.values()];else if(i==="length"&&$n(t)){const _=Number(a);o.forEach((C,S)=>{(S==="length"||!sf(S)&&S>=_)&&y.push(C)})}else switch(i!==void 0&&y.push(o.get(i)),e){case"add":$n(t)?wb(i)&&y.push(o.get("length")):(y.push(o.get(ud)),Tm(t)&&y.push(o.get(Vx)));break;case"delete":$n(t)||(y.push(o.get(ud)),Tm(t)&&y.push(o.get(Vx)));break;case"set":Tm(t)&&y.push(o.get(ud));break}Mb();for(const _ of y)_&&jC(_,5);Eb()}function dT(t,e){const i=H0.get(t);return i&&i.get(e)}const mT=xb("__proto__,__v_isRef,__isVue"),GC=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(sf)),tw=gT();function gT(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const a=kr(this);for(let f=0,o=this.length;f<o;f++)Yl(a,"get",f+"");const u=a[e](...i);return u===-1||u===!1?a[e](...i.map(kr)):u}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){yp(),Mb();const a=kr(this)[e].apply(this,i);return Eb(),_p(),a}}),t}function vT(t){sf(t)||(t=String(t));const e=kr(this);return Yl(e,"has",t),e.hasOwnProperty(t)}class qC{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,a){const u=this._isReadonly,f=this._isShallow;if(i==="__v_isReactive")return!u;if(i==="__v_isReadonly")return u;if(i==="__v_isShallow")return f;if(i==="__v_raw")return a===(u?f?kT:YC:f?$C:ZC).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(a)?e:void 0;const o=$n(e);if(!u){if(o&&br(tw,i))return Reflect.get(tw,i,a);if(i==="hasOwnProperty")return vT}const y=Reflect.get(e,i,a);return(sf(i)?GC.has(i):mT(i))||(u||Yl(e,"get",i),f)?y:ra(y)?o&&wb(i)?y:y.value:lo(y)?u?b_(y):yl(y):y}}class WC extends qC{constructor(e=!1){super(!1,e)}set(e,i,a,u){let f=e[i];if(!this._isShallow){const _=_v(f);if(!G0(a)&&!_v(a)&&(f=kr(f),a=kr(a)),!$n(e)&&ra(f)&&!ra(a))return _?!1:(f.value=a,!0)}const o=$n(e)&&wb(i)?Number(i)<e.length:br(e,i),y=Reflect.set(e,i,a,u);return e===kr(u)&&(o?vh(a,f)&&rf(e,"set",i,a):rf(e,"add",i,a)),y}deleteProperty(e,i){const a=br(e,i);e[i];const u=Reflect.deleteProperty(e,i);return u&&a&&rf(e,"delete",i,void 0),u}has(e,i){const a=Reflect.has(e,i);return(!sf(i)||!GC.has(i))&&Yl(e,"has",i),a}ownKeys(e){return Yl(e,"iterate",$n(e)?"length":ud),Reflect.ownKeys(e)}}class yT extends qC{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const _T=new WC,xT=new yT,bT=new WC(!0);const Sb=t=>t,x_=t=>Reflect.getPrototypeOf(t);function a0(t,e,i=!1,a=!1){t=t.__v_raw;const u=kr(t),f=kr(e);i||(vh(e,f)&&Yl(u,"get",e),Yl(u,"get",f));const{has:o}=x_(u),y=a?Sb:i?Lb:xv;if(o.call(u,e))return y(t.get(e));if(o.call(u,f))return y(t.get(f));t!==u&&t.get(e)}function s0(t,e=!1){const i=this.__v_raw,a=kr(i),u=kr(t);return e||(vh(t,u)&&Yl(a,"has",t),Yl(a,"has",u)),t===u?i.has(t):i.has(t)||i.has(u)}function l0(t,e=!1){return t=t.__v_raw,!e&&Yl(kr(t),"iterate",ud),Reflect.get(t,"size",t)}function ew(t){t=kr(t);const e=kr(this);return x_(e).has.call(e,t)||(e.add(t),rf(e,"add",t,t)),this}function nw(t,e){e=kr(e);const i=kr(this),{has:a,get:u}=x_(i);let f=a.call(i,t);f||(t=kr(t),f=a.call(i,t));const o=u.call(i,t);return i.set(t,e),f?vh(e,o)&&rf(i,"set",t,e):rf(i,"add",t,e),this}function iw(t){const e=kr(this),{has:i,get:a}=x_(e);let u=i.call(e,t);u||(t=kr(t),u=i.call(e,t)),a&&a.call(e,t);const f=e.delete(t);return u&&rf(e,"delete",t,void 0),f}function rw(){const t=kr(this),e=t.size!==0,i=t.clear();return e&&rf(t,"clear",void 0,void 0),i}function u0(t,e){return function(a,u){const f=this,o=f.__v_raw,y=kr(o),_=e?Sb:t?Lb:xv;return!t&&Yl(y,"iterate",ud),o.forEach((C,S)=>a.call(u,_(C),_(S),f))}}function c0(t,e,i){return function(...a){const u=this.__v_raw,f=kr(u),o=Tm(f),y=t==="entries"||t===Symbol.iterator&&o,_=t==="keys"&&o,C=u[t](...a),S=i?Sb:e?Lb:xv;return!e&&Yl(f,"iterate",_?Vx:ud),{next(){const{value:k,done:P}=C.next();return P?{value:k,done:P}:{value:y?[S(k[0]),S(k[1])]:S(k),done:P}},[Symbol.iterator](){return this}}}}function Zf(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function AT(){const t={get(f){return a0(this,f)},get size(){return l0(this)},has:s0,add:ew,set:nw,delete:iw,clear:rw,forEach:u0(!1,!1)},e={get(f){return a0(this,f,!1,!0)},get size(){return l0(this)},has:s0,add:ew,set:nw,delete:iw,clear:rw,forEach:u0(!1,!0)},i={get(f){return a0(this,f,!0)},get size(){return l0(this,!0)},has(f){return s0.call(this,f,!0)},add:Zf("add"),set:Zf("set"),delete:Zf("delete"),clear:Zf("clear"),forEach:u0(!0,!1)},a={get(f){return a0(this,f,!0,!0)},get size(){return l0(this,!0)},has(f){return s0.call(this,f,!0)},add:Zf("add"),set:Zf("set"),delete:Zf("delete"),clear:Zf("clear"),forEach:u0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(f=>{t[f]=c0(f,!1,!1),i[f]=c0(f,!0,!1),e[f]=c0(f,!1,!0),a[f]=c0(f,!0,!0)}),[t,i,e,a]}const[wT,CT,IT,MT]=AT();function Tb(t,e){const i=e?t?MT:IT:t?CT:wT;return(a,u,f)=>u==="__v_isReactive"?!t:u==="__v_isReadonly"?t:u==="__v_raw"?a:Reflect.get(br(i,u)&&u in a?i:a,u,f)}const ET={get:Tb(!1,!1)},ST={get:Tb(!1,!0)},TT={get:Tb(!0,!1)};const ZC=new WeakMap,$C=new WeakMap,YC=new WeakMap,kT=new WeakMap;function PT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function LT(t){return t.__v_skip||!Object.isExtensible(t)?0:PT(JS(t))}function yl(t){return _v(t)?t:kb(t,!1,_T,ET,ZC)}function XC(t){return kb(t,!1,bT,ST,$C)}function b_(t){return kb(t,!0,xT,TT,YC)}function kb(t,e,i,a,u){if(!lo(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const f=u.get(t);if(f)return f;const o=LT(t);if(o===0)return t;const y=new Proxy(t,o===2?a:i);return u.set(t,y),y}function Qg(t){return _v(t)?Qg(t.__v_raw):!!(t&&t.__v_isReactive)}function _v(t){return!!(t&&t.__v_isReadonly)}function G0(t){return!!(t&&t.__v_isShallow)}function KC(t){return t?!!t.__v_raw:!1}function kr(t){const e=t&&t.__v_raw;return e?kr(e):t}function Pb(t){return Object.isExtensible(t)&&RC(t,"__v_skip",!0),t}const xv=t=>lo(t)?yl(t):t,Lb=t=>lo(t)?b_(t):t;class QC{constructor(e,i,a,u){this.getter=e,this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Ib(()=>e(this._value),()=>Jg(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!u,this.__v_isReadonly=a}get value(){const e=kr(this);return(!e._cacheable||e.effect.dirty)&&vh(e._value,e._value=e.effect.run())&&Jg(e,5),Db(e),e.effect._dirtyLevel>=2&&Jg(e,3),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function DT(t,e,i=!1){let a,u;const f=Ui(t);return f?(a=t,u=nc):(a=t.get,u=t.set),new QC(a,u,f||!u,i)}function Db(t){var e;lp&&ld&&(t=kr(t),UC(ld,(e=t.dep)!=null?e:t.dep=HC(()=>t.dep=void 0,t instanceof QC?t:void 0)))}function Jg(t,e=5,i,a){t=kr(t);const u=t.dep;u&&jC(u,e)}function ra(t){return!!(t&&t.__v_isRef===!0)}function Ke(t){return JC(t,!1)}function Bv(t){return JC(t,!0)}function JC(t,e){return ra(t)?t:new RT(t,e)}class RT{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:kr(e),this._value=i?e:xv(e)}get value(){return Db(this),this._value}set value(e){const i=this.__v_isShallow||G0(e)||_v(e);e=i?e:kr(e),vh(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=i?e:xv(e),Jg(this,5))}}function W(t){return ra(t)?t.value:t}const zT={get:(t,e,i)=>W(Reflect.get(t,e,i)),set:(t,e,i,a)=>{const u=t[e];return ra(u)&&!ra(i)?(u.value=i,!0):Reflect.set(t,e,i,a)}};function tI(t){return Qg(t)?t:new Proxy(t,zT)}class BT{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:a}=e(()=>Db(this),()=>Jg(this));this._get=i,this._set=a}get value(){return this._get()}set value(e){this._set(e)}}function OT(t){return new BT(t)}function FT(t){const e=$n(t)?new Array(t.length):{};for(const i in t)e[i]=VT(t,i);return e}class NT{constructor(e,i,a){this._object=e,this._key=i,this._defaultValue=a,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return dT(kr(this._object),this._key)}}function VT(t,e,i){const a=t[e];return ra(a)?a:new NT(t,e,i)}/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function up(t,e,i,a){try{return a?t(...a):t()}catch(u){A_(u,e,i)}}function ic(t,e,i,a){if(Ui(t)){const u=up(t,e,i,a);return u&&PC(u)&&u.catch(f=>{A_(f,e,i)}),u}if($n(t)){const u=[];for(let f=0;f<t.length;f++)u.push(ic(t[f],e,i,a));return u}}function A_(t,e,i,a=!0){const u=e?e.vnode:null;if(e){let f=e.parent;const o=e.proxy,y=`https://vuejs.org/error-reference/#runtime-${i}`;for(;f;){const C=f.ec;if(C){for(let S=0;S<C.length;S++)if(C[S](t,o,y)===!1)return}f=f.parent}const _=e.appContext.config.errorHandler;if(_){yp(),up(_,null,10,[t,o,y]),_p();return}}UT(t,i,u,a)}function UT(t,e,i,a=!0){console.error(t)}let bv=!1,Ux=!1;const Gs=[];let ph=0;const km=[];let Kf=null,rd=0;const eI=Promise.resolve();let Rb=null;function sc(t){const e=Rb||eI;return t?e.then(this?t.bind(this):t):e}function jT(t){let e=ph+1,i=Gs.length;for(;e<i;){const a=e+i>>>1,u=Gs[a],f=Av(u);f<t||f===t&&u.pre?e=a+1:i=a}return e}function zb(t){(!Gs.length||!Gs.includes(t,bv&&t.allowRecurse?ph+1:ph))&&(t.id==null?Gs.push(t):Gs.splice(jT(t.id),0,t),nI())}function nI(){!bv&&!Ux&&(Ux=!0,Rb=eI.then(rI))}function HT(t){const e=Gs.indexOf(t);e>ph&&Gs.splice(e,1)}function GT(t){$n(t)?km.push(...t):(!Kf||!Kf.includes(t,t.allowRecurse?rd+1:rd))&&km.push(t),nI()}function ow(t,e,i=bv?ph+1:0){for(;i<Gs.length;i++){const a=Gs[i];if(a&&a.pre){if(t&&a.id!==t.uid)continue;Gs.splice(i,1),i--,a()}}}function iI(t){if(km.length){const e=[...new Set(km)].sort((i,a)=>Av(i)-Av(a));if(km.length=0,Kf){Kf.push(...e);return}for(Kf=e,rd=0;rd<Kf.length;rd++){const i=Kf[rd];i.active!==!1&&i()}Kf=null,rd=0}}const Av=t=>t.id==null?1/0:t.id,qT=(t,e)=>{const i=Av(t)-Av(e);if(i===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function rI(t){Ux=!1,bv=!0,Gs.sort(qT);try{for(ph=0;ph<Gs.length;ph++){const e=Gs[ph];e&&e.active!==!1&&up(e,null,14)}}finally{ph=0,Gs.length=0,iI(),bv=!1,Rb=null,(Gs.length||km.length)&&rI()}}function WT(t,e,...i){if(t.isUnmounted)return;const a=t.vnode.props||_o;let u=i;const f=e.startsWith("update:"),o=f&&e.slice(7);if(o&&o in a){const S=`${o==="modelValue"?"model":o}Modifiers`,{number:k,trim:P}=a[S]||_o;P&&(u=i.map(B=>Yo(B)?B.trim():B)),k&&(u=i.map(j0))}let y,_=a[y=K1(e)]||a[y=K1(Fc(e))];!_&&f&&(_=a[y=K1(gd(e))]),_&&ic(_,t,6,u);const C=a[y+"Once"];if(C){if(!t.emitted)t.emitted={};else if(t.emitted[y])return;t.emitted[y]=!0,ic(C,t,6,u)}}function oI(t,e,i=!1){const a=e.emitsCache,u=a.get(t);if(u!==void 0)return u;const f=t.emits;let o={},y=!1;if(!Ui(t)){const _=C=>{const S=oI(C,e,!0);S&&(y=!0,ma(o,S))};!i&&e.mixins.length&&e.mixins.forEach(_),t.extends&&_(t.extends),t.mixins&&t.mixins.forEach(_)}return!f&&!y?(lo(t)&&a.set(t,null),null):($n(f)?f.forEach(_=>o[_]=null):ma(o,f),lo(t)&&a.set(t,o),o)}function w_(t,e){return!t||!v_(e)?!1:(e=e.slice(2).replace(/Once$/,""),br(t,e[0].toLowerCase()+e.slice(1))||br(t,gd(e))||br(t,e))}let as=null,C_=null;function q0(t){const e=as;return as=t,C_=t&&t.type.__scopeId||null,e}function xh(t){C_=t}function bh(){C_=null}function Xt(t,e=as,i){if(!e||t._n)return t;const a=(...u)=>{a._d&&xw(-1);const f=q0(e);let o;try{o=t(...u)}finally{q0(f),a._d&&xw(1)}return o};return a._n=!0,a._c=!0,a._d=!0,a}function J1(t){const{type:e,vnode:i,proxy:a,withProxy:u,propsOptions:[f],slots:o,attrs:y,emit:_,render:C,renderCache:S,props:k,data:P,setupState:B,ctx:G,inheritAttrs:j}=t,X=q0(t);let pt,J;try{if(i.shapeFlag&4){const ft=u||a,Lt=ft;pt=fh(C.call(Lt,ft,S,k,B,P,G)),J=y}else{const ft=e;pt=fh(ft.length>1?ft(k,{attrs:y,slots:o,emit:_}):ft(k,null)),J=e.props?y:ZT(y)}}catch(ft){rv.length=0,A_(ft,t,1),pt=Pt($l)}let nt=pt;if(J&&j!==!1){const ft=Object.keys(J),{shapeFlag:Lt}=nt;ft.length&&Lt&7&&(f&&ft.some(bb)&&(J=$T(J,f)),nt=fp(nt,J,!1,!0))}return i.dirs&&(nt=fp(nt,null,!1,!0),nt.dirs=nt.dirs?nt.dirs.concat(i.dirs):i.dirs),i.transition&&(nt.transition=i.transition),pt=nt,q0(X),pt}const ZT=t=>{let e;for(const i in t)(i==="class"||i==="style"||v_(i))&&((e||(e={}))[i]=t[i]);return e},$T=(t,e)=>{const i={};for(const a in t)(!bb(a)||!(a.slice(9)in e))&&(i[a]=t[a]);return i};function YT(t,e,i){const{props:a,children:u,component:f}=t,{props:o,children:y,patchFlag:_}=e,C=f.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&_>=0){if(_&1024)return!0;if(_&16)return a?aw(a,o,C):!!o;if(_&8){const S=e.dynamicProps;for(let k=0;k<S.length;k++){const P=S[k];if(o[P]!==a[P]&&!w_(C,P))return!0}}}else return(u||y)&&(!y||!y.$stable)?!0:a===o?!1:a?o?aw(a,o,C):!0:!!o;return!1}function aw(t,e,i){const a=Object.keys(e);if(a.length!==Object.keys(t).length)return!0;for(let u=0;u<a.length;u++){const f=a[u];if(e[f]!==t[f]&&!w_(i,f))return!0}return!1}function XT({vnode:t,parent:e},i){for(;e;){const a=e.subTree;if(a.suspense&&a.suspense.activeBranch===t&&(a.el=t.el),a===t)(t=e.vnode).el=i,e=e.parent;else break}}const aI="components";function Ha(t,e){return lI(aI,t,!0,e)||t}const sI=Symbol.for("v-ndc");function ss(t){return Yo(t)?lI(aI,t,!1)||t:t||sI}function lI(t,e,i=!0,a=!1){const u=as||xs;if(u){const f=u.type;{const y=W3(f,!1);if(y&&(y===e||y===Fc(e)||y===__(Fc(e))))return f}const o=sw(u[t]||f[t],e)||sw(u.appContext[t],e);return!o&&a?f:o}}function sw(t,e){return t&&(t[e]||t[Fc(e)]||t[__(Fc(e))])}const KT=t=>t.__isSuspense;function QT(t,e){e&&e.pendingBranch?$n(t)?e.effects.push(...t):e.effects.push(t):GT(t)}function I_(t,e,i=xs,a=!1){if(i){const u=i[t]||(i[t]=[]),f=e.__weh||(e.__weh=(...o)=>{yp();const y=Fv(i),_=ic(e,i,t,o);return y(),_p(),_});return a?u.unshift(f):u.push(f),f}}const hf=t=>(e,i=xs)=>{(!T_||t==="sp")&&I_(t,(...a)=>e(...a),i)},JT=hf("bm"),Xl=hf("m"),t3=hf("bu"),e3=hf("u"),Ov=hf("bum"),vd=hf("um"),n3=hf("sp"),i3=hf("rtg"),r3=hf("rtc");function o3(t,e=xs){I_("ec",t,e)}function oc(t,e){if(as===null)return t;const i=k_(as),a=t.dirs||(t.dirs=[]);for(let u=0;u<e.length;u++){let[f,o,y,_=_o]=e[u];f&&(Ui(f)&&(f={mounted:f,updated:f}),f.deep&&ip(o),a.push({dir:f,instance:i,value:o,oldValue:void 0,arg:y,modifiers:_}))}return t}function Xp(t,e,i,a){const u=t.dirs,f=e&&e.dirs;for(let o=0;o<u.length;o++){const y=u[o];f&&(y.oldValue=f[o].value);let _=y.dir[a];_&&(yp(),ic(_,i,8,[t.el,y,t,e]),_p())}}function Fo(t,e,i,a){let u;const f=i;if($n(t)||Yo(t)){u=new Array(t.length);for(let o=0,y=t.length;o<y;o++)u[o]=e(t[o],o,void 0,f)}else if(typeof t=="number"){u=new Array(t);for(let o=0;o<t;o++)u[o]=e(o+1,o,void 0,f)}else if(lo(t))if(t[Symbol.iterator])u=Array.from(t,(o,y)=>e(o,y,void 0,f));else{const o=Object.keys(t);u=new Array(o.length);for(let y=0,_=o.length;y<_;y++){const C=o[y];u[y]=e(t[C],C,y,f)}}else u=[];return u}/*! #__NO_SIDE_EFFECTS__ */function di(t,e){return Ui(t)?ma({name:t.name},e,{setup:t}):t}const tv=t=>!!t.type.__asyncLoader;function Hn(t,e,i={},a,u){if(as.isCE||as.parent&&tv(as.parent)&&as.parent.isCE)return e!=="default"&&(i.name=e),Pt("slot",i,a&&a());let f=t[e];f&&f._c&&(f._d=!1),ut();const o=f&&uI(f(i)),y=Se(Ai,{key:i.key||o&&o.key||`_${e}`},o||(a?a():[]),o&&t._===1?64:-2);return!u&&y.scopeId&&(y.slotScopeIds=[y.scopeId+"-s"]),f&&f._c&&(f._d=!0),y}function uI(t){return t.some(e=>Y0(e)?!(e.type===$l||e.type===Ai&&!uI(e.children)):!0)?t:null}const jx=t=>t?PI(t)?k_(t):jx(t.parent):null,ev=ma(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>jx(t.parent),$root:t=>jx(t.root),$emit:t=>t.emit,$options:t=>Bb(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,zb(t.update)}),$nextTick:t=>t.n||(t.n=sc.bind(t.proxy)),$watch:t=>S3.bind(t)}),tx=(t,e)=>t!==_o&&!t.__isScriptSetup&&br(t,e),a3={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:a,data:u,props:f,accessCache:o,type:y,appContext:_}=t;let C;if(e[0]!=="$"){const B=o[e];if(B!==void 0)switch(B){case 1:return a[e];case 2:return u[e];case 4:return i[e];case 3:return f[e]}else{if(tx(a,e))return o[e]=1,a[e];if(u!==_o&&br(u,e))return o[e]=2,u[e];if((C=t.propsOptions[0])&&br(C,e))return o[e]=3,f[e];if(i!==_o&&br(i,e))return o[e]=4,i[e];Hx&&(o[e]=0)}}const S=ev[e];let k,P;if(S)return e==="$attrs"&&Yl(t.attrs,"get",""),S(t);if((k=y.__cssModules)&&(k=k[e]))return k;if(i!==_o&&br(i,e))return o[e]=4,i[e];if(P=_.config.globalProperties,br(P,e))return P[e]},set({_:t},e,i){const{data:a,setupState:u,ctx:f}=t;return tx(u,e)?(u[e]=i,!0):a!==_o&&br(a,e)?(a[e]=i,!0):br(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(f[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:a,appContext:u,propsOptions:f}},o){let y;return!!i[o]||t!==_o&&br(t,o)||tx(e,o)||(y=f[0])&&br(y,o)||br(a,o)||br(ev,o)||br(u.config.globalProperties,o)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:br(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function s3(){return l3().slots}function l3(){const t=yd();return t.setupContext||(t.setupContext=DI(t))}function W0(t){return $n(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}function Zs(t,e){return!t||!e?t||e:$n(t)&&$n(e)?t.concat(e):ma({},W0(t),W0(e))}let Hx=!0;function u3(t){const e=Bb(t),i=t.proxy,a=t.ctx;Hx=!1,e.beforeCreate&&lw(e.beforeCreate,t,"bc");const{data:u,computed:f,methods:o,watch:y,provide:_,inject:C,created:S,beforeMount:k,mounted:P,beforeUpdate:B,updated:G,activated:j,deactivated:X,beforeDestroy:pt,beforeUnmount:J,destroyed:nt,unmounted:ft,render:Lt,renderTracked:xt,renderTriggered:Mt,errorCaptured:Ht,serverPrefetch:jt,expose:Qt,inheritAttrs:Bt,components:Ft,directives:Ot,filters:de}=e;if(C&&c3(C,a,null),o)for(const Ge in o){const je=o[Ge];Ui(je)&&(a[Ge]=je.bind(i))}if(u){const Ge=u.call(i,i);lo(Ge)&&(t.data=yl(Ge))}if(Hx=!0,f)for(const Ge in f){const je=f[Ge],Pi=Ui(je)?je.bind(i,i):Ui(je.get)?je.get.bind(i,i):nc,Li=!Ui(je)&&Ui(je.set)?je.set.bind(i):nc,Qn=De({get:Pi,set:Li});Object.defineProperty(a,Ge,{enumerable:!0,configurable:!0,get:()=>Qn.value,set:un=>Qn.value=un})}if(y)for(const Ge in y)cI(y[Ge],a,i,Ge);if(_){const Ge=Ui(_)?_.call(i):_;Reflect.ownKeys(Ge).forEach(je=>{cd(je,Ge[je])})}S&&lw(S,t,"c");function _e(Ge,je){$n(je)?je.forEach(Pi=>Ge(Pi.bind(i))):je&&Ge(je.bind(i))}if(_e(JT,k),_e(Xl,P),_e(t3,B),_e(e3,G),_e(T3,j),_e(k3,X),_e(o3,Ht),_e(r3,xt),_e(i3,Mt),_e(Ov,J),_e(vd,ft),_e(n3,jt),$n(Qt))if(Qt.length){const Ge=t.exposed||(t.exposed={});Qt.forEach(je=>{Object.defineProperty(Ge,je,{get:()=>i[je],set:Pi=>i[je]=Pi})})}else t.exposed||(t.exposed={});Lt&&t.render===nc&&(t.render=Lt),Bt!=null&&(t.inheritAttrs=Bt),Ft&&(t.components=Ft),Ot&&(t.directives=Ot)}function c3(t,e,i=nc){$n(t)&&(t=Gx(t));for(const a in t){const u=t[a];let f;lo(u)?"default"in u?f=ws(u.from||a,u.default,!0):f=ws(u.from||a):f=ws(u),ra(f)?Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>f.value,set:o=>f.value=o}):e[a]=f}}function lw(t,e,i){ic($n(t)?t.map(a=>a.bind(e.proxy)):t.bind(e.proxy),e,i)}function cI(t,e,i,a){const u=a.includes(".")?AI(i,a):()=>i[a];if(Yo(t)){const f=e[t];Ui(f)&&vl(u,f)}else if(Ui(t))vl(u,t.bind(i));else if(lo(t))if($n(t))t.forEach(f=>cI(f,e,i,a));else{const f=Ui(t.handler)?t.handler.bind(i):e[t.handler];Ui(f)&&vl(u,f,t)}}function Bb(t){const e=t.type,{mixins:i,extends:a}=e,{mixins:u,optionsCache:f,config:{optionMergeStrategies:o}}=t.appContext,y=f.get(e);let _;return y?_=y:!u.length&&!i&&!a?_=e:(_={},u.length&&u.forEach(C=>Z0(_,C,o,!0)),Z0(_,e,o)),lo(e)&&f.set(e,_),_}function Z0(t,e,i,a=!1){const{mixins:u,extends:f}=e;f&&Z0(t,f,i,!0),u&&u.forEach(o=>Z0(t,o,i,!0));for(const o in e)if(!(a&&o==="expose")){const y=h3[o]||i&&i[o];t[o]=y?y(t[o],e[o]):e[o]}return t}const h3={data:uw,props:cw,emits:cw,methods:jg,computed:jg,beforeCreate:fl,created:fl,beforeMount:fl,mounted:fl,beforeUpdate:fl,updated:fl,beforeDestroy:fl,beforeUnmount:fl,destroyed:fl,unmounted:fl,activated:fl,deactivated:fl,errorCaptured:fl,serverPrefetch:fl,components:jg,directives:jg,watch:p3,provide:uw,inject:f3};function uw(t,e){return e?t?function(){return ma(Ui(t)?t.call(this,this):t,Ui(e)?e.call(this,this):e)}:e:t}function f3(t,e){return jg(Gx(t),Gx(e))}function Gx(t){if($n(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function fl(t,e){return t?[...new Set([].concat(t,e))]:e}function jg(t,e){return t?ma(Object.create(null),t,e):e}function cw(t,e){return t?$n(t)&&$n(e)?[...new Set([...t,...e])]:ma(Object.create(null),W0(t),W0(e??{})):e}function p3(t,e){if(!t)return e;if(!e)return t;const i=ma(Object.create(null),t);for(const a in e)i[a]=fl(t[a],e[a]);return i}function hI(){return{app:null,config:{isNativeTag:KS,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let d3=0;function m3(t,e){return function(a,u=null){Ui(a)||(a=ma({},a)),u!=null&&!lo(u)&&(u=null);const f=hI(),o=new WeakSet;let y=!1;const _=f.app={_uid:d3++,_component:a,_props:u,_container:null,_context:f,_instance:null,version:$3,get config(){return f.config},set config(C){},use(C,...S){return o.has(C)||(C&&Ui(C.install)?(o.add(C),C.install(_,...S)):Ui(C)&&(o.add(C),C(_,...S))),_},mixin(C){return f.mixins.includes(C)||f.mixins.push(C),_},component(C,S){return S?(f.components[C]=S,_):f.components[C]},directive(C,S){return S?(f.directives[C]=S,_):f.directives[C]},mount(C,S,k){if(!y){const P=Pt(a,u);return P.appContext=f,k===!0?k="svg":k===!1&&(k=void 0),S&&e?e(P,C):t(P,C,k),y=!0,_._container=C,C.__vue_app__=_,k_(P.component)}},unmount(){y&&(t(null,_._container),delete _._container.__vue_app__)},provide(C,S){return f.provides[C]=S,_},runWithContext(C){const S=nv;nv=_;try{return C()}finally{nv=S}}};return _}}let nv=null;function cd(t,e){if(xs){let i=xs.provides;const a=xs.parent&&xs.parent.provides;a===i&&(i=xs.provides=Object.create(a)),i[t]=e}}function ws(t,e,i=!1){const a=xs||as;if(a||nv){const u=a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:nv._context.provides;if(u&&t in u)return u[t];if(arguments.length>1)return i&&Ui(e)?e.call(a&&a.proxy):e}}const fI={},pI=()=>Object.create(fI),dI=t=>Object.getPrototypeOf(t)===fI;function g3(t,e,i,a=!1){const u={},f=pI();t.propsDefaults=Object.create(null),mI(t,e,u,f);for(const o in t.propsOptions[0])o in u||(u[o]=void 0);i?t.props=a?u:XC(u):t.type.props?t.props=u:t.props=f,t.attrs=f}function v3(t,e,i,a){const{props:u,attrs:f,vnode:{patchFlag:o}}=t,y=kr(u),[_]=t.propsOptions;let C=!1;if((a||o>0)&&!(o&16)){if(o&8){const S=t.vnode.dynamicProps;for(let k=0;k<S.length;k++){let P=S[k];if(w_(t.emitsOptions,P))continue;const B=e[P];if(_)if(br(f,P))B!==f[P]&&(f[P]=B,C=!0);else{const G=Fc(P);u[G]=qx(_,y,G,B,t,!1)}else B!==f[P]&&(f[P]=B,C=!0)}}}else{mI(t,e,u,f)&&(C=!0);let S;for(const k in y)(!e||!br(e,k)&&((S=gd(k))===k||!br(e,S)))&&(_?i&&(i[k]!==void 0||i[S]!==void 0)&&(u[k]=qx(_,y,k,void 0,t,!0)):delete u[k]);if(f!==y)for(const k in f)(!e||!br(e,k))&&(delete f[k],C=!0)}C&&rf(t.attrs,"set","")}function mI(t,e,i,a){const[u,f]=t.propsOptions;let o=!1,y;if(e)for(let _ in e){if(Kg(_))continue;const C=e[_];let S;u&&br(u,S=Fc(_))?!f||!f.includes(S)?i[S]=C:(y||(y={}))[S]=C:w_(t.emitsOptions,_)||(!(_ in a)||C!==a[_])&&(a[_]=C,o=!0)}if(f){const _=kr(i),C=y||_o;for(let S=0;S<f.length;S++){const k=f[S];i[k]=qx(u,_,k,C[k],t,!br(C,k))}}return o}function qx(t,e,i,a,u,f){const o=t[i];if(o!=null){const y=br(o,"default");if(y&&a===void 0){const _=o.default;if(o.type!==Function&&!o.skipFactory&&Ui(_)){const{propsDefaults:C}=u;if(i in C)a=C[i];else{const S=Fv(u);a=C[i]=_.call(null,e),S()}}else a=_}o[0]&&(f&&!y?a=!1:o[1]&&(a===""||a===gd(i))&&(a=!0))}return a}function gI(t,e,i=!1){const a=e.propsCache,u=a.get(t);if(u)return u;const f=t.props,o={},y=[];let _=!1;if(!Ui(t)){const S=k=>{_=!0;const[P,B]=gI(k,e,!0);ma(o,P),B&&y.push(...B)};!i&&e.mixins.length&&e.mixins.forEach(S),t.extends&&S(t.extends),t.mixins&&t.mixins.forEach(S)}if(!f&&!_)return lo(t)&&a.set(t,Sm),Sm;if($n(f))for(let S=0;S<f.length;S++){const k=Fc(f[S]);hw(k)&&(o[k]=_o)}else if(f)for(const S in f){const k=Fc(S);if(hw(k)){const P=f[S],B=o[k]=$n(P)||Ui(P)?{type:P}:ma({},P);if(B){const G=dw(Boolean,B.type),j=dw(String,B.type);B[0]=G>-1,B[1]=j<0||G<j,(G>-1||br(B,"default"))&&y.push(k)}}}const C=[o,y];return lo(t)&&a.set(t,C),C}function hw(t){return t[0]!=="$"&&!Kg(t)}function fw(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function pw(t,e){return fw(t)===fw(e)}function dw(t,e){return $n(e)?e.findIndex(i=>pw(i,t)):Ui(e)&&pw(e,t)?0:-1}const vI=t=>t[0]==="_"||t==="$stable",Ob=t=>$n(t)?t.map(fh):[fh(t)],y3=(t,e,i)=>{if(e._n)return e;const a=Xt((...u)=>Ob(e(...u)),i);return a._c=!1,a},yI=(t,e,i)=>{const a=t._ctx;for(const u in t){if(vI(u))continue;const f=t[u];if(Ui(f))e[u]=y3(u,f,a);else if(f!=null){const o=Ob(f);e[u]=()=>o}}},_I=(t,e)=>{const i=Ob(e);t.slots.default=()=>i},_3=(t,e)=>{const i=t.slots=pI();if(t.vnode.shapeFlag&32){const a=e._;a?(ma(i,e),RC(i,"_",a,!0)):yI(e,i)}else e&&_I(t,e)},x3=(t,e,i)=>{const{vnode:a,slots:u}=t;let f=!0,o=_o;if(a.shapeFlag&32){const y=e._;y?i&&y===1?f=!1:(ma(u,e),!i&&y===1&&delete u._):(f=!e.$stable,yI(e,u)),o=e}else e&&(_I(t,e),o={default:1});if(f)for(const y in u)!vI(y)&&o[y]==null&&delete u[y]};function Wx(t,e,i,a,u=!1){if($n(t)){t.forEach((P,B)=>Wx(P,e&&($n(e)?e[B]:e),i,a,u));return}if(tv(a)&&!u)return;const f=a.shapeFlag&4?k_(a.component):a.el,o=u?null:f,{i:y,r:_}=t,C=e&&e.r,S=y.refs===_o?y.refs={}:y.refs,k=y.setupState;if(C!=null&&C!==_&&(Yo(C)?(S[C]=null,br(k,C)&&(k[C]=null)):ra(C)&&(C.value=null)),Ui(_))up(_,y,12,[o,S]);else{const P=Yo(_),B=ra(_);if(P||B){const G=()=>{if(t.f){const j=P?br(k,_)?k[_]:S[_]:_.value;u?$n(j)&&Ab(j,f):$n(j)?j.includes(f)||j.push(f):P?(S[_]=[f],br(k,_)&&(k[_]=S[_])):(_.value=[f],t.k&&(S[t.k]=_.value))}else P?(S[_]=o,br(k,_)&&(k[_]=o)):B&&(_.value=o,t.k&&(S[t.k]=o))};o?(G.id=-1,Zl(G,i)):G()}}}const Zl=QT;function b3(t){return A3(t)}function A3(t,e){const i=zC();i.__VUE__=!0;const{insert:a,remove:u,patchProp:f,createElement:o,createText:y,createComment:_,setText:C,setElementText:S,parentNode:k,nextSibling:P,setScopeId:B=nc,insertStaticContent:G}=t,j=(lt,wt,te,le=null,pe=null,Fe=null,cn=void 0,we=null,ze=!!wt.dynamicChildren)=>{if(lt===wt)return;lt&&!od(lt,wt)&&(le=ue(lt),un(lt,pe,Fe,!0),lt=null),wt.patchFlag===-2&&(ze=!1,wt.dynamicChildren=null);const{type:Te,ref:en,shapeFlag:Cn}=wt;switch(Te){case S_:X(lt,wt,te,le);break;case $l:pt(lt,wt,te,le);break;case M0:lt==null&&J(wt,te,le,cn);break;case Ai:Ft(lt,wt,te,le,pe,Fe,cn,we,ze);break;default:Cn&1?Lt(lt,wt,te,le,pe,Fe,cn,we,ze):Cn&6?Ot(lt,wt,te,le,pe,Fe,cn,we,ze):(Cn&64||Cn&128)&&Te.process(lt,wt,te,le,pe,Fe,cn,we,ze,ke)}en!=null&&pe&&Wx(en,lt&&lt.ref,Fe,wt||lt,!wt)},X=(lt,wt,te,le)=>{if(lt==null)a(wt.el=y(wt.children),te,le);else{const pe=wt.el=lt.el;wt.children!==lt.children&&C(pe,wt.children)}},pt=(lt,wt,te,le)=>{lt==null?a(wt.el=_(wt.children||""),te,le):wt.el=lt.el},J=(lt,wt,te,le)=>{[lt.el,lt.anchor]=G(lt.children,wt,te,le,lt.el,lt.anchor)},nt=({el:lt,anchor:wt},te,le)=>{let pe;for(;lt&&lt!==wt;)pe=P(lt),a(lt,te,le),lt=pe;a(wt,te,le)},ft=({el:lt,anchor:wt})=>{let te;for(;lt&&lt!==wt;)te=P(lt),u(lt),lt=te;u(wt)},Lt=(lt,wt,te,le,pe,Fe,cn,we,ze)=>{wt.type==="svg"?cn="svg":wt.type==="math"&&(cn="mathml"),lt==null?xt(wt,te,le,pe,Fe,cn,we,ze):jt(lt,wt,pe,Fe,cn,we,ze)},xt=(lt,wt,te,le,pe,Fe,cn,we)=>{let ze,Te;const{props:en,shapeFlag:Cn,transition:In,dirs:Pn}=lt;if(ze=lt.el=o(lt.type,Fe,en&&en.is,en),Cn&8?S(ze,lt.children):Cn&16&&Ht(lt.children,ze,null,le,pe,ex(lt,Fe),cn,we),Pn&&Xp(lt,null,le,"created"),Mt(ze,lt,lt.scopeId,cn,le),en){for(const Ri in en)Ri!=="value"&&!Kg(Ri)&&f(ze,Ri,null,en[Ri],Fe,lt.children,le,pe,wi);"value"in en&&f(ze,"value",null,en.value,Fe),(Te=en.onVnodeBeforeMount)&&uh(Te,le,lt)}Pn&&Xp(lt,null,le,"beforeMount");const Jn=w3(pe,In);Jn&&In.beforeEnter(ze),a(ze,wt,te),((Te=en&&en.onVnodeMounted)||Jn||Pn)&&Zl(()=>{Te&&uh(Te,le,lt),Jn&&In.enter(ze),Pn&&Xp(lt,null,le,"mounted")},pe)},Mt=(lt,wt,te,le,pe)=>{if(te&&B(lt,te),le)for(let Fe=0;Fe<le.length;Fe++)B(lt,le[Fe]);if(pe){let Fe=pe.subTree;if(wt===Fe){const cn=pe.vnode;Mt(lt,cn,cn.scopeId,cn.slotScopeIds,pe.parent)}}},Ht=(lt,wt,te,le,pe,Fe,cn,we,ze=0)=>{for(let Te=ze;Te<lt.length;Te++){const en=lt[Te]=we?Jf(lt[Te]):fh(lt[Te]);j(null,en,wt,te,le,pe,Fe,cn,we)}},jt=(lt,wt,te,le,pe,Fe,cn)=>{const we=wt.el=lt.el;let{patchFlag:ze,dynamicChildren:Te,dirs:en}=wt;ze|=lt.patchFlag&16;const Cn=lt.props||_o,In=wt.props||_o;let Pn;if(te&&Kp(te,!1),(Pn=In.onVnodeBeforeUpdate)&&uh(Pn,te,wt,lt),en&&Xp(wt,lt,te,"beforeUpdate"),te&&Kp(te,!0),Te?Qt(lt.dynamicChildren,Te,we,te,le,ex(wt,pe),Fe):cn||je(lt,wt,we,null,te,le,ex(wt,pe),Fe,!1),ze>0){if(ze&16)Bt(we,wt,Cn,In,te,le,pe);else if(ze&2&&Cn.class!==In.class&&f(we,"class",null,In.class,pe),ze&4&&f(we,"style",Cn.style,In.style,pe),ze&8){const Jn=wt.dynamicProps;for(let Ri=0;Ri<Jn.length;Ri++){const Ii=Jn[Ri],ar=Cn[Ii],qr=In[Ii];(qr!==ar||Ii==="value")&&f(we,Ii,ar,qr,pe,lt.children,te,le,wi)}}ze&1&&lt.children!==wt.children&&S(we,wt.children)}else!cn&&Te==null&&Bt(we,wt,Cn,In,te,le,pe);((Pn=In.onVnodeUpdated)||en)&&Zl(()=>{Pn&&uh(Pn,te,wt,lt),en&&Xp(wt,lt,te,"updated")},le)},Qt=(lt,wt,te,le,pe,Fe,cn)=>{for(let we=0;we<wt.length;we++){const ze=lt[we],Te=wt[we],en=ze.el&&(ze.type===Ai||!od(ze,Te)||ze.shapeFlag&70)?k(ze.el):te;j(ze,Te,en,null,le,pe,Fe,cn,!0)}},Bt=(lt,wt,te,le,pe,Fe,cn)=>{if(te!==le){if(te!==_o)for(const we in te)!Kg(we)&&!(we in le)&&f(lt,we,te[we],null,cn,wt.children,pe,Fe,wi);for(const we in le){if(Kg(we))continue;const ze=le[we],Te=te[we];ze!==Te&&we!=="value"&&f(lt,we,Te,ze,cn,wt.children,pe,Fe,wi)}"value"in le&&f(lt,"value",te.value,le.value,cn)}},Ft=(lt,wt,te,le,pe,Fe,cn,we,ze)=>{const Te=wt.el=lt?lt.el:y(""),en=wt.anchor=lt?lt.anchor:y("");let{patchFlag:Cn,dynamicChildren:In,slotScopeIds:Pn}=wt;Pn&&(we=we?we.concat(Pn):Pn),lt==null?(a(Te,te,le),a(en,te,le),Ht(wt.children||[],te,en,pe,Fe,cn,we,ze)):Cn>0&&Cn&64&&In&&lt.dynamicChildren?(Qt(lt.dynamicChildren,In,te,pe,Fe,cn,we),(wt.key!=null||pe&&wt===pe.subTree)&&Fb(lt,wt,!0)):je(lt,wt,te,en,pe,Fe,cn,we,ze)},Ot=(lt,wt,te,le,pe,Fe,cn,we,ze)=>{wt.slotScopeIds=we,lt==null?wt.shapeFlag&512?pe.ctx.activate(wt,te,le,cn,ze):de(wt,te,le,pe,Fe,cn,ze):An(lt,wt,ze)},de=(lt,wt,te,le,pe,Fe,cn)=>{const we=lt.component=j3(lt,le,pe);if(E_(lt)&&(we.ctx.renderer=ke),H3(we),we.asyncDep){if(pe&&pe.registerDep(we,_e,cn),!lt.el){const ze=we.subTree=Pt($l);pt(null,ze,wt,te)}}else _e(we,lt,wt,te,pe,Fe,cn)},An=(lt,wt,te)=>{const le=wt.component=lt.component;if(YT(lt,wt,te))if(le.asyncDep&&!le.asyncResolved){Ge(le,wt,te);return}else le.next=wt,HT(le.update),le.effect.dirty=!0,le.update();else wt.el=lt.el,le.vnode=wt},_e=(lt,wt,te,le,pe,Fe,cn)=>{const we=()=>{if(lt.isMounted){let{next:en,bu:Cn,u:In,parent:Pn,vnode:Jn}=lt;{const Xo=xI(lt);if(Xo){en&&(en.el=Jn.el,Ge(lt,en,cn)),Xo.asyncDep.then(()=>{lt.isUnmounted||we()});return}}let Ri=en,Ii;Kp(lt,!1),en?(en.el=Jn.el,Ge(lt,en,cn)):en=Jn,Cn&&I0(Cn),(Ii=en.props&&en.props.onVnodeBeforeUpdate)&&uh(Ii,Pn,en,Jn),Kp(lt,!0);const ar=J1(lt),qr=lt.subTree;lt.subTree=ar,j(qr,ar,k(qr.el),ue(qr),lt,pe,Fe),en.el=ar.el,Ri===null&&XT(lt,ar.el),In&&Zl(In,pe),(Ii=en.props&&en.props.onVnodeUpdated)&&Zl(()=>uh(Ii,Pn,en,Jn),pe)}else{let en;const{el:Cn,props:In}=wt,{bm:Pn,m:Jn,parent:Ri}=lt,Ii=tv(wt);if(Kp(lt,!1),Pn&&I0(Pn),!Ii&&(en=In&&In.onVnodeBeforeMount)&&uh(en,Ri,wt),Kp(lt,!0),Cn&&Di){const ar=()=>{lt.subTree=J1(lt),Di(Cn,lt.subTree,lt,pe,null)};Ii?wt.type.__asyncLoader().then(()=>!lt.isUnmounted&&ar()):ar()}else{const ar=lt.subTree=J1(lt);j(null,ar,te,le,lt,pe,Fe),wt.el=ar.el}if(Jn&&Zl(Jn,pe),!Ii&&(en=In&&In.onVnodeMounted)){const ar=wt;Zl(()=>uh(en,Ri,ar),pe)}(wt.shapeFlag&256||Ri&&tv(Ri.vnode)&&Ri.vnode.shapeFlag&256)&&lt.a&&Zl(lt.a,pe),lt.isMounted=!0,wt=te=le=null}},ze=lt.effect=new Ib(we,nc,()=>zb(Te),lt.scope),Te=lt.update=()=>{ze.dirty&&ze.run()};Te.id=lt.uid,Kp(lt,!0),Te()},Ge=(lt,wt,te)=>{wt.component=lt;const le=lt.vnode.props;lt.vnode=wt,lt.next=null,v3(lt,wt.props,le,te),x3(lt,wt.children,te),yp(),ow(lt),_p()},je=(lt,wt,te,le,pe,Fe,cn,we,ze=!1)=>{const Te=lt&&lt.children,en=lt?lt.shapeFlag:0,Cn=wt.children,{patchFlag:In,shapeFlag:Pn}=wt;if(In>0){if(In&128){Li(Te,Cn,te,le,pe,Fe,cn,we,ze);return}else if(In&256){Pi(Te,Cn,te,le,pe,Fe,cn,we,ze);return}}Pn&8?(en&16&&wi(Te,pe,Fe),Cn!==Te&&S(te,Cn)):en&16?Pn&16?Li(Te,Cn,te,le,pe,Fe,cn,we,ze):wi(Te,pe,Fe,!0):(en&8&&S(te,""),Pn&16&&Ht(Cn,te,le,pe,Fe,cn,we,ze))},Pi=(lt,wt,te,le,pe,Fe,cn,we,ze)=>{lt=lt||Sm,wt=wt||Sm;const Te=lt.length,en=wt.length,Cn=Math.min(Te,en);let In;for(In=0;In<Cn;In++){const Pn=wt[In]=ze?Jf(wt[In]):fh(wt[In]);j(lt[In],Pn,te,null,pe,Fe,cn,we,ze)}Te>en?wi(lt,pe,Fe,!0,!1,Cn):Ht(wt,te,le,pe,Fe,cn,we,ze,Cn)},Li=(lt,wt,te,le,pe,Fe,cn,we,ze)=>{let Te=0;const en=wt.length;let Cn=lt.length-1,In=en-1;for(;Te<=Cn&&Te<=In;){const Pn=lt[Te],Jn=wt[Te]=ze?Jf(wt[Te]):fh(wt[Te]);if(od(Pn,Jn))j(Pn,Jn,te,null,pe,Fe,cn,we,ze);else break;Te++}for(;Te<=Cn&&Te<=In;){const Pn=lt[Cn],Jn=wt[In]=ze?Jf(wt[In]):fh(wt[In]);if(od(Pn,Jn))j(Pn,Jn,te,null,pe,Fe,cn,we,ze);else break;Cn--,In--}if(Te>Cn){if(Te<=In){const Pn=In+1,Jn=Pn<en?wt[Pn].el:le;for(;Te<=In;)j(null,wt[Te]=ze?Jf(wt[Te]):fh(wt[Te]),te,Jn,pe,Fe,cn,we,ze),Te++}}else if(Te>In)for(;Te<=Cn;)un(lt[Te],pe,Fe,!0),Te++;else{const Pn=Te,Jn=Te,Ri=new Map;for(Te=Jn;Te<=In;Te++){const wr=wt[Te]=ze?Jf(wt[Te]):fh(wt[Te]);wr.key!=null&&Ri.set(wr.key,Te)}let Ii,ar=0;const qr=In-Jn+1;let Xo=!1,va=0;const Da=new Array(qr);for(Te=0;Te<qr;Te++)Da[Te]=0;for(Te=Pn;Te<=Cn;Te++){const wr=lt[Te];if(ar>=qr){un(wr,pe,Fe,!0);continue}let To;if(wr.key!=null)To=Ri.get(wr.key);else for(Ii=Jn;Ii<=In;Ii++)if(Da[Ii-Jn]===0&&od(wr,wt[Ii])){To=Ii;break}To===void 0?un(wr,pe,Fe,!0):(Da[To-Jn]=Te+1,To>=va?va=To:Xo=!0,j(wr,wt[To],te,null,pe,Fe,cn,we,ze),ar++)}const Za=Xo?C3(Da):Sm;for(Ii=Za.length-1,Te=qr-1;Te>=0;Te--){const wr=Jn+Te,To=wt[wr],$s=wr+1<en?wt[wr+1].el:le;Da[Te]===0?j(null,To,te,$s,pe,Fe,cn,we,ze):Xo&&(Ii<0||Te!==Za[Ii]?Qn(To,te,$s,2):Ii--)}}},Qn=(lt,wt,te,le,pe=null)=>{const{el:Fe,type:cn,transition:we,children:ze,shapeFlag:Te}=lt;if(Te&6){Qn(lt.component.subTree,wt,te,le);return}if(Te&128){lt.suspense.move(wt,te,le);return}if(Te&64){cn.move(lt,wt,te,ke);return}if(cn===Ai){a(Fe,wt,te);for(let Cn=0;Cn<ze.length;Cn++)Qn(ze[Cn],wt,te,le);a(lt.anchor,wt,te);return}if(cn===M0){nt(lt,wt,te);return}if(le!==2&&Te&1&&we)if(le===0)we.beforeEnter(Fe),a(Fe,wt,te),Zl(()=>we.enter(Fe),pe);else{const{leave:Cn,delayLeave:In,afterLeave:Pn}=we,Jn=()=>a(Fe,wt,te),Ri=()=>{Cn(Fe,()=>{Jn(),Pn&&Pn()})};In?In(Fe,Jn,Ri):Ri()}else a(Fe,wt,te)},un=(lt,wt,te,le=!1,pe=!1)=>{const{type:Fe,props:cn,ref:we,children:ze,dynamicChildren:Te,shapeFlag:en,patchFlag:Cn,dirs:In,memoIndex:Pn}=lt;if(we!=null&&Wx(we,null,te,lt,!0),Pn!=null&&(wt.renderCache[Pn]=void 0),en&256){wt.ctx.deactivate(lt);return}const Jn=en&1&&In,Ri=!tv(lt);let Ii;if(Ri&&(Ii=cn&&cn.onVnodeBeforeUnmount)&&uh(Ii,wt,lt),en&6)oi(lt.component,te,le);else{if(en&128){lt.suspense.unmount(te,le);return}Jn&&Xp(lt,null,wt,"beforeUnmount"),en&64?lt.type.remove(lt,wt,te,pe,ke,le):Te&&(Fe!==Ai||Cn>0&&Cn&64)?wi(Te,wt,te,!1,!0):(Fe===Ai&&Cn&384||!pe&&en&16)&&wi(ze,wt,te),le&&Un(lt)}(Ri&&(Ii=cn&&cn.onVnodeUnmounted)||Jn)&&Zl(()=>{Ii&&uh(Ii,wt,lt),Jn&&Xp(lt,null,wt,"unmounted")},te)},Un=lt=>{const{type:wt,el:te,anchor:le,transition:pe}=lt;if(wt===Ai){ui(te,le);return}if(wt===M0){ft(lt);return}const Fe=()=>{u(te),pe&&!pe.persisted&&pe.afterLeave&&pe.afterLeave()};if(lt.shapeFlag&1&&pe&&!pe.persisted){const{leave:cn,delayLeave:we}=pe,ze=()=>cn(te,Fe);we?we(lt.el,Fe,ze):ze()}else Fe()},ui=(lt,wt)=>{let te;for(;lt!==wt;)te=P(lt),u(lt),lt=te;u(wt)},oi=(lt,wt,te)=>{const{bum:le,scope:pe,update:Fe,subTree:cn,um:we,m:ze,a:Te}=lt;mw(ze),mw(Te),le&&I0(le),pe.stop(),Fe&&(Fe.active=!1,un(cn,lt,wt,te)),we&&Zl(we,wt),Zl(()=>{lt.isUnmounted=!0},wt),wt&&wt.pendingBranch&&!wt.isUnmounted&&lt.asyncDep&&!lt.asyncResolved&&lt.suspenseId===wt.pendingId&&(wt.deps--,wt.deps===0&&wt.resolve())},wi=(lt,wt,te,le=!1,pe=!1,Fe=0)=>{for(let cn=Fe;cn<lt.length;cn++)un(lt[cn],wt,te,le,pe)},ue=lt=>lt.shapeFlag&6?ue(lt.component.subTree):lt.shapeFlag&128?lt.suspense.next():P(lt.anchor||lt.el);let Qe=!1;const me=(lt,wt,te)=>{lt==null?wt._vnode&&un(wt._vnode,null,null,!0):j(wt._vnode||null,lt,wt,null,null,null,te),Qe||(Qe=!0,ow(),iI(),Qe=!1),wt._vnode=lt},ke={p:j,um:un,m:Qn,r:Un,mt:de,mc:Ht,pc:je,pbc:Qt,n:ue,o:t};let Ci,Di;return{render:me,hydrate:Ci,createApp:m3(me,Ci)}}function ex({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function Kp({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function w3(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Fb(t,e,i=!1){const a=t.children,u=e.children;if($n(a)&&$n(u))for(let f=0;f<a.length;f++){const o=a[f];let y=u[f];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=u[f]=Jf(u[f]),y.el=o.el),!i&&y.patchFlag!==-2&&Fb(o,y)),y.type===S_&&(y.el=o.el)}}function C3(t){const e=t.slice(),i=[0];let a,u,f,o,y;const _=t.length;for(a=0;a<_;a++){const C=t[a];if(C!==0){if(u=i[i.length-1],t[u]<C){e[a]=u,i.push(a);continue}for(f=0,o=i.length-1;f<o;)y=f+o>>1,t[i[y]]<C?f=y+1:o=y;C<t[i[f]]&&(f>0&&(e[a]=i[f-1]),i[f]=a)}}for(f=i.length,o=i[f-1];f-- >0;)i[f]=o,o=e[o];return i}function xI(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:xI(e)}function mw(t){if(t)for(let e=0;e<t.length;e++)t[e].active=!1}const I3=Symbol.for("v-scx"),M3=()=>ws(I3);function bI(t,e){return M_(t,null,e)}function E3(t,e){return M_(t,null,{flush:"sync"})}const h0={};function vl(t,e,i){return M_(t,e,i)}function M_(t,e,{immediate:i,deep:a,flush:u,once:f,onTrack:o,onTrigger:y}=_o){if(e&&f){const xt=e;e=(...Mt)=>{xt(...Mt),Lt()}}const _=xs,C=xt=>a===!0?xt:ip(xt,a===!1?1:void 0);let S,k=!1,P=!1;if(ra(t)?(S=()=>t.value,k=G0(t)):Qg(t)?(S=()=>C(t),k=!0):$n(t)?(P=!0,k=t.some(xt=>Qg(xt)||G0(xt)),S=()=>t.map(xt=>{if(ra(xt))return xt.value;if(Qg(xt))return C(xt);if(Ui(xt))return up(xt,_,2)})):Ui(t)?e?S=()=>up(t,_,2):S=()=>(B&&B(),ic(t,_,3,[G])):S=nc,e&&a){const xt=S;S=()=>ip(xt())}let B,G=xt=>{B=nt.onStop=()=>{up(xt,_,4),B=nt.onStop=void 0}},j;if(T_)if(G=nc,e?i&&ic(e,_,3,[S(),P?[]:void 0,G]):S(),u==="sync"){const xt=M3();j=xt.__watcherHandles||(xt.__watcherHandles=[])}else return nc;let X=P?new Array(t.length).fill(h0):h0;const pt=()=>{if(!(!nt.active||!nt.dirty))if(e){const xt=nt.run();(a||k||(P?xt.some((Mt,Ht)=>vh(Mt,X[Ht])):vh(xt,X)))&&(B&&B(),ic(e,_,3,[xt,X===h0?void 0:P&&X[0]===h0?[]:X,G]),X=xt)}else nt.run()};pt.allowRecurse=!!e;let J;u==="sync"?J=pt:u==="post"?J=()=>Zl(pt,_&&_.suspense):(pt.pre=!0,_&&(pt.id=_.uid),J=()=>zb(pt));const nt=new Ib(S,nc,J),ft=FC(),Lt=()=>{nt.stop(),ft&&Ab(ft.effects,nt)};return e?i?pt():X=nt.run():u==="post"?Zl(nt.run.bind(nt),_&&_.suspense):nt.run(),j&&j.push(Lt),Lt}function S3(t,e,i){const a=this.proxy,u=Yo(t)?t.includes(".")?AI(a,t):()=>a[t]:t.bind(a,a);let f;Ui(e)?f=e:(f=e.handler,i=e);const o=Fv(this),y=M_(u,f.bind(a),i);return o(),y}function AI(t,e){const i=e.split(".");return()=>{let a=t;for(let u=0;u<i.length&&a;u++)a=a[i[u]];return a}}function ip(t,e=1/0,i){if(e<=0||!lo(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),e--,ra(t))ip(t.value,e,i);else if($n(t))for(let a=0;a<t.length;a++)ip(t[a],e,i);else if(qm(t)||Tm(t))t.forEach(a=>{ip(a,e,i)});else if(DC(t)){for(const a in t)ip(t[a],e,i);for(const a of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,a)&&ip(t[a],e,i)}return t}const E_=t=>t.type.__isKeepAlive;function T3(t,e){wI(t,"a",e)}function k3(t,e){wI(t,"da",e)}function wI(t,e,i=xs){const a=t.__wdc||(t.__wdc=()=>{let u=i;for(;u;){if(u.isDeactivated)return;u=u.parent}return t()});if(I_(e,a,i),i){let u=i.parent;for(;u&&u.parent;)E_(u.parent.vnode)&&P3(a,e,i,u),u=u.parent}}function P3(t,e,i,a){const u=I_(e,t,a,!0);vd(()=>{Ab(a[e],u)},i)}const Qf=Symbol("_leaveCb"),f0=Symbol("_enterCb");function L3(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xl(()=>{t.isMounted=!0}),Ov(()=>{t.isUnmounting=!0}),t}const Ku=[Function,Array],CI={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ku,onEnter:Ku,onAfterEnter:Ku,onEnterCancelled:Ku,onBeforeLeave:Ku,onLeave:Ku,onAfterLeave:Ku,onLeaveCancelled:Ku,onBeforeAppear:Ku,onAppear:Ku,onAfterAppear:Ku,onAppearCancelled:Ku},II=t=>{const e=t.subTree;return e.component?II(e.component):e},D3={name:"BaseTransition",props:CI,setup(t,{slots:e}){const i=yd(),a=L3();return()=>{const u=e.default&&EI(e.default(),!0);if(!u||!u.length)return;let f=u[0];if(u.length>1){for(const P of u)if(P.type!==$l){f=P;break}}const o=kr(t),{mode:y}=o;if(a.isLeaving)return nx(f);const _=gw(f);if(!_)return nx(f);let C=Zx(_,o,a,i,P=>C=P);$0(_,C);const S=i.subTree,k=S&&gw(S);if(k&&k.type!==$l&&!od(_,k)&&II(i).type!==$l){const P=Zx(k,o,a,i);if($0(k,P),y==="out-in"&&_.type!==$l)return a.isLeaving=!0,P.afterLeave=()=>{a.isLeaving=!1,i.update.active!==!1&&(i.effect.dirty=!0,i.update())},nx(f);y==="in-out"&&_.type!==$l&&(P.delayLeave=(B,G,j)=>{const X=MI(a,k);X[String(k.key)]=k,B[Qf]=()=>{G(),B[Qf]=void 0,delete C.delayedLeave},C.delayedLeave=j})}return f}}},R3=D3;function MI(t,e){const{leavingVNodes:i}=t;let a=i.get(e.type);return a||(a=Object.create(null),i.set(e.type,a)),a}function Zx(t,e,i,a,u){const{appear:f,mode:o,persisted:y=!1,onBeforeEnter:_,onEnter:C,onAfterEnter:S,onEnterCancelled:k,onBeforeLeave:P,onLeave:B,onAfterLeave:G,onLeaveCancelled:j,onBeforeAppear:X,onAppear:pt,onAfterAppear:J,onAppearCancelled:nt}=e,ft=String(t.key),Lt=MI(i,t),xt=(jt,Qt)=>{jt&&ic(jt,a,9,Qt)},Mt=(jt,Qt)=>{const Bt=Qt[1];xt(jt,Qt),$n(jt)?jt.every(Ft=>Ft.length<=1)&&Bt():jt.length<=1&&Bt()},Ht={mode:o,persisted:y,beforeEnter(jt){let Qt=_;if(!i.isMounted)if(f)Qt=X||_;else return;jt[Qf]&&jt[Qf](!0);const Bt=Lt[ft];Bt&&od(t,Bt)&&Bt.el[Qf]&&Bt.el[Qf](),xt(Qt,[jt])},enter(jt){let Qt=C,Bt=S,Ft=k;if(!i.isMounted)if(f)Qt=pt||C,Bt=J||S,Ft=nt||k;else return;let Ot=!1;const de=jt[f0]=An=>{Ot||(Ot=!0,An?xt(Ft,[jt]):xt(Bt,[jt]),Ht.delayedLeave&&Ht.delayedLeave(),jt[f0]=void 0)};Qt?Mt(Qt,[jt,de]):de()},leave(jt,Qt){const Bt=String(t.key);if(jt[f0]&&jt[f0](!0),i.isUnmounting)return Qt();xt(P,[jt]);let Ft=!1;const Ot=jt[Qf]=de=>{Ft||(Ft=!0,Qt(),de?xt(j,[jt]):xt(G,[jt]),jt[Qf]=void 0,Lt[Bt]===t&&delete Lt[Bt])};Lt[Bt]=t,B?Mt(B,[jt,Ot]):Ot()},clone(jt){const Qt=Zx(jt,e,i,a,u);return u&&u(Qt),Qt}};return Ht}function nx(t){if(E_(t))return t=fp(t),t.children=null,t}function gw(t){if(!E_(t))return t;const{shapeFlag:e,children:i}=t;if(i){if(e&16)return i[0];if(e&32&&Ui(i.default))return i.default()}}function $0(t,e){t.shapeFlag&6&&t.component?$0(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function EI(t,e=!1,i){let a=[],u=0;for(let f=0;f<t.length;f++){let o=t[f];const y=i==null?o.key:String(i)+String(o.key!=null?o.key:f);o.type===Ai?(o.patchFlag&128&&u++,a=a.concat(EI(o.children,e,y))):(e||o.type!==$l)&&a.push(y!=null?fp(o,{key:y}):o)}if(u>1)for(let f=0;f<a.length;f++)a[f].patchFlag=-2;return a}const z3=t=>t.__isTeleport,iv=t=>t&&(t.disabled||t.disabled===""),vw=t=>typeof SVGElement<"u"&&t instanceof SVGElement,yw=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,$x=(t,e)=>{const i=t&&t.to;return Yo(i)?e?e(i):null:i},B3={name:"Teleport",__isTeleport:!0,process(t,e,i,a,u,f,o,y,_,C){const{mc:S,pc:k,pbc:P,o:{insert:B,querySelector:G,createText:j,createComment:X}}=C,pt=iv(e.props);let{shapeFlag:J,children:nt,dynamicChildren:ft}=e;if(t==null){const Lt=e.el=j(""),xt=e.anchor=j("");B(Lt,i,a),B(xt,i,a);const Mt=e.target=$x(e.props,G),Ht=e.targetAnchor=j("");Mt&&(B(Ht,Mt),o==="svg"||vw(Mt)?o="svg":(o==="mathml"||yw(Mt))&&(o="mathml"));const jt=(Qt,Bt)=>{J&16&&S(nt,Qt,Bt,u,f,o,y,_)};pt?jt(i,xt):Mt&&jt(Mt,Ht)}else{e.el=t.el;const Lt=e.anchor=t.anchor,xt=e.target=t.target,Mt=e.targetAnchor=t.targetAnchor,Ht=iv(t.props),jt=Ht?i:xt,Qt=Ht?Lt:Mt;if(o==="svg"||vw(xt)?o="svg":(o==="mathml"||yw(xt))&&(o="mathml"),ft?(P(t.dynamicChildren,ft,jt,u,f,o,y),Fb(t,e,!0)):_||k(t,e,jt,Qt,u,f,o,y,!1),pt)Ht?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):p0(e,i,Lt,C,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const Bt=e.target=$x(e.props,G);Bt&&p0(e,Bt,null,C,0)}else Ht&&p0(e,xt,Mt,C,1)}SI(e)},remove(t,e,i,a,{um:u,o:{remove:f}},o){const{shapeFlag:y,children:_,anchor:C,targetAnchor:S,target:k,props:P}=t;if(k&&f(S),o&&f(C),y&16){const B=o||!iv(P);for(let G=0;G<_.length;G++){const j=_[G];u(j,e,i,B,!!j.dynamicChildren)}}},move:p0,hydrate:O3};function p0(t,e,i,{o:{insert:a},m:u},f=2){f===0&&a(t.targetAnchor,e,i);const{el:o,anchor:y,shapeFlag:_,children:C,props:S}=t,k=f===2;if(k&&a(o,e,i),(!k||iv(S))&&_&16)for(let P=0;P<C.length;P++)u(C[P],e,i,2);k&&a(y,e,i)}function O3(t,e,i,a,u,f,{o:{nextSibling:o,parentNode:y,querySelector:_}},C){const S=e.target=$x(e.props,_);if(S){const k=S._lpa||S.firstChild;if(e.shapeFlag&16)if(iv(e.props))e.anchor=C(o(t),e,y(t),i,a,u,f),e.targetAnchor=k;else{e.anchor=o(t);let P=k;for(;P;)if(P=o(P),P&&P.nodeType===8&&P.data==="teleport anchor"){e.targetAnchor=P,S._lpa=e.targetAnchor&&o(e.targetAnchor);break}C(k,e,S,i,a,u,f)}SI(e)}return e.anchor&&o(e.anchor)}const _w=B3;function SI(t){const e=t.ctx;if(e&&e.ut){let i=t.children[0].el;for(;i&&i!==t.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",e.uid),i=i.nextSibling;e.ut()}}const Ai=Symbol.for("v-fgt"),S_=Symbol.for("v-txt"),$l=Symbol.for("v-cmt"),M0=Symbol.for("v-stc"),rv=[];let Dc=null;function ut(t=!1){rv.push(Dc=t?null:[])}function F3(){rv.pop(),Dc=rv[rv.length-1]||null}let wv=1;function xw(t){wv+=t}function TI(t){return t.dynamicChildren=wv>0?Dc||Sm:null,F3(),wv>0&&Dc&&Dc.push(t),t}function Yt(t,e,i,a,u,f){return TI(At(t,e,i,a,u,f,!0))}function Se(t,e,i,a,u){return TI(Pt(t,e,i,a,u,!0))}function Y0(t){return t?t.__v_isVNode===!0:!1}function od(t,e){return t.type===e.type&&t.key===e.key}const kI=({key:t})=>t??null,E0=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Yo(t)||ra(t)||Ui(t)?{i:as,r:t,k:e,f:!!i}:t:null);function At(t,e=null,i=null,a=0,u=null,f=t===Ai?0:1,o=!1,y=!1){const _={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&kI(e),ref:e&&E0(e),scopeId:C_,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:f,patchFlag:a,dynamicProps:u,dynamicChildren:null,appContext:null,ctx:as};return y?(Vb(_,i),f&128&&t.normalize(_)):i&&(_.shapeFlag|=Yo(i)?8:16),wv>0&&!o&&Dc&&(_.patchFlag>0||f&6)&&_.patchFlag!==32&&Dc.push(_),_}const Pt=N3;function N3(t,e=null,i=null,a=0,u=null,f=!1){if((!t||t===sI)&&(t=$l),Y0(t)){const y=fp(t,e,!0);return i&&Vb(y,i),wv>0&&!f&&Dc&&(y.shapeFlag&6?Dc[Dc.indexOf(t)]=y:Dc.push(y)),y.patchFlag=-2,y}if(Z3(t)&&(t=t.__vccOpts),e){e=Pa(e);let{class:y,style:_}=e;y&&!Yo(y)&&(e.class=No(y)),lo(_)&&(KC(_)&&!$n(_)&&(_=ma({},_)),e.style=Gr(_))}const o=Yo(t)?1:KT(t)?128:z3(t)?64:lo(t)?4:Ui(t)?2:0;return At(t,e,i,a,u,o,f,!0)}function Pa(t){return t?KC(t)||dI(t)?ma({},t):t:null}function fp(t,e,i=!1,a=!1){const{props:u,ref:f,patchFlag:o,children:y,transition:_}=t,C=e?er(u||{},e):u,S={__v_isVNode:!0,__v_skip:!0,type:t.type,props:C,key:C&&kI(C),ref:e&&e.ref?i&&f?$n(f)?f.concat(E0(e)):[f,E0(e)]:E0(e):f,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:y,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ai?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:_,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&fp(t.ssContent),ssFallback:t.ssFallback&&fp(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return _&&a&&$0(S,_.clone(S)),S}function xo(t=" ",e=0){return Pt(S_,null,t,e)}function Nb(t,e){const i=Pt(M0,null,t);return i.staticCount=e,i}function sn(t="",e=!1){return e?(ut(),Se($l,null,t)):Pt($l,null,t)}function fh(t){return t==null||typeof t=="boolean"?Pt($l):$n(t)?Pt(Ai,null,t.slice()):typeof t=="object"?Jf(t):Pt(S_,null,String(t))}function Jf(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:fp(t)}function Vb(t,e){let i=0;const{shapeFlag:a}=t;if(e==null)e=null;else if($n(e))i=16;else if(typeof e=="object")if(a&65){const u=e.default;u&&(u._c&&(u._d=!1),Vb(t,u()),u._c&&(u._d=!0));return}else{i=32;const u=e._;!u&&!dI(e)?e._ctx=as:u===3&&as&&(as.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ui(e)?(e={default:e,_ctx:as},i=32):(e=String(e),a&64?(i=16,e=[xo(e)]):i=8);t.children=e,t.shapeFlag|=i}function er(...t){const e={};for(let i=0;i<t.length;i++){const a=t[i];for(const u in a)if(u==="class")e.class!==a.class&&(e.class=No([e.class,a.class]));else if(u==="style")e.style=Gr([e.style,a.style]);else if(v_(u)){const f=e[u],o=a[u];o&&f!==o&&!($n(f)&&f.includes(o))&&(e[u]=f?[].concat(f,o):o)}else u!==""&&(e[u]=a[u])}return e}function uh(t,e,i,a=null){ic(t,e,7,[i,a])}const V3=hI();let U3=0;function j3(t,e,i){const a=t.type,u=(e?e.appContext:t.appContext)||V3,f={uid:U3++,vnode:t,type:a,parent:e,appContext:u,root:null,next:null,subTree:null,effect:null,update:null,scope:new cT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(u.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gI(a,u),emitsOptions:oI(a,u),emit:null,emitted:null,propsDefaults:_o,inheritAttrs:a.inheritAttrs,ctx:_o,data:_o,props:_o,attrs:_o,slots:_o,refs:_o,setupState:_o,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return f.ctx={_:f},f.root=e?e.root:f,f.emit=WT.bind(null,f),t.ce&&t.ce(f),f}let xs=null;const yd=()=>xs||as;let X0,Yx;{const t=zC(),e=(i,a)=>{let u;return(u=t[i])||(u=t[i]=[]),u.push(a),f=>{u.length>1?u.forEach(o=>o(f)):u[0](f)}};X0=e("__VUE_INSTANCE_SETTERS__",i=>xs=i),Yx=e("__VUE_SSR_SETTERS__",i=>T_=i)}const Fv=t=>{const e=xs;return X0(t),t.scope.on(),()=>{t.scope.off(),X0(e)}},bw=()=>{xs&&xs.scope.off(),X0(null)};function PI(t){return t.vnode.shapeFlag&4}let T_=!1;function H3(t,e=!1){e&&Yx(e);const{props:i,children:a}=t.vnode,u=PI(t);g3(t,i,u,e),_3(t,a);const f=u?G3(t,e):void 0;return e&&Yx(!1),f}function G3(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,a3);const{setup:a}=i;if(a){const u=t.setupContext=a.length>1?DI(t):null,f=Fv(t);yp();const o=up(a,t,0,[t.props,u]);if(_p(),f(),PC(o)){if(o.then(bw,bw),e)return o.then(y=>{Aw(t,y,e)}).catch(y=>{A_(y,t,0)});t.asyncDep=o}else Aw(t,o,e)}else LI(t,e)}function Aw(t,e,i){Ui(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:lo(e)&&(t.setupState=tI(e)),LI(t,i)}let ww;function LI(t,e,i){const a=t.type;if(!t.render){if(!e&&ww&&!a.render){const u=a.template||Bb(t).template;if(u){const{isCustomElement:f,compilerOptions:o}=t.appContext.config,{delimiters:y,compilerOptions:_}=a,C=ma(ma({isCustomElement:f,delimiters:y},o),_);a.render=ww(u,C)}}t.render=a.render||nc}{const u=Fv(t);yp();try{u3(t)}finally{_p(),u()}}}const q3={get(t,e){return Yl(t,"get",""),t[e]}};function DI(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,q3),slots:t.slots,emit:t.emit,expose:e}}function k_(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(tI(Pb(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in ev)return ev[i](t)},has(e,i){return i in e||i in ev}})):t.proxy}function W3(t,e=!0){return Ui(t)?t.displayName||t.name:t.name||e&&t.__name}function Z3(t){return Ui(t)&&"__vccOpts"in t}const De=(t,e)=>DT(t,e,T_);function _l(t,e,i=_o){const a=yd(),u=Fc(e),f=gd(e),o=OT((_,C)=>{let S;return E3(()=>{const k=t[e];vh(S,k)&&(S=k,C())}),{get(){return _(),i.get?i.get(S):S},set(k){const P=a.vnode.props;!(P&&(e in P||u in P||f in P)&&(`onUpdate:${e}`in P||`onUpdate:${u}`in P||`onUpdate:${f}`in P))&&vh(k,S)&&(S=k,C()),a.emit(`update:${e}`,i.set?i.set(k):k)}}}),y=e==="modelValue"?"modelModifiers":`${e}Modifiers`;return o[Symbol.iterator]=()=>{let _=0;return{next(){return _<2?{value:_++?t[y]||{}:o,done:!1}:{done:!0}}}},o}function fd(t,e,i){const a=arguments.length;return a===2?lo(e)&&!$n(e)?Y0(e)?Pt(t,null,[e]):Pt(t,e):Pt(t,null,e):(a>3?i=Array.prototype.slice.call(arguments,2):a===3&&Y0(i)&&(i=[i]),Pt(t,e,i))}const $3="3.4.29";/**
* @vue/runtime-dom v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Y3="http://www.w3.org/2000/svg",X3="http://www.w3.org/1998/Math/MathML",tf=typeof document<"u"?document:null,Cw=tf&&tf.createElement("template"),K3={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,a)=>{const u=e==="svg"?tf.createElementNS(Y3,t):e==="mathml"?tf.createElementNS(X3,t):i?tf.createElement(t,{is:i}):tf.createElement(t);return t==="select"&&a&&a.multiple!=null&&u.setAttribute("multiple",a.multiple),u},createText:t=>tf.createTextNode(t),createComment:t=>tf.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>tf.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,a,u,f){const o=i?i.previousSibling:e.lastChild;if(u&&(u===f||u.nextSibling))for(;e.insertBefore(u.cloneNode(!0),i),!(u===f||!(u=u.nextSibling)););else{Cw.innerHTML=a==="svg"?`<svg>${t}</svg>`:a==="mathml"?`<math>${t}</math>`:t;const y=Cw.content;if(a==="svg"||a==="mathml"){const _=y.firstChild;for(;_.firstChild;)y.appendChild(_.firstChild);y.removeChild(_)}e.insertBefore(y,i)}return[o?o.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},$f="transition",Bg="animation",Cv=Symbol("_vtc"),Ub=(t,{slots:e})=>fd(R3,Q3(t),e);Ub.displayName="Transition";const RI={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Ub.props=ma({},CI,RI);const Qp=(t,e=[])=>{$n(t)?t.forEach(i=>i(...e)):t&&t(...e)},Iw=t=>t?$n(t)?t.some(e=>e.length>1):t.length>1:!1;function Q3(t){const e={};for(const Ft in t)Ft in RI||(e[Ft]=t[Ft]);if(t.css===!1)return e;const{name:i="v",type:a,duration:u,enterFromClass:f=`${i}-enter-from`,enterActiveClass:o=`${i}-enter-active`,enterToClass:y=`${i}-enter-to`,appearFromClass:_=f,appearActiveClass:C=o,appearToClass:S=y,leaveFromClass:k=`${i}-leave-from`,leaveActiveClass:P=`${i}-leave-active`,leaveToClass:B=`${i}-leave-to`}=t,G=J3(u),j=G&&G[0],X=G&&G[1],{onBeforeEnter:pt,onEnter:J,onEnterCancelled:nt,onLeave:ft,onLeaveCancelled:Lt,onBeforeAppear:xt=pt,onAppear:Mt=J,onAppearCancelled:Ht=nt}=e,jt=(Ft,Ot,de)=>{Jp(Ft,Ot?S:y),Jp(Ft,Ot?C:o),de&&de()},Qt=(Ft,Ot)=>{Ft._isLeaving=!1,Jp(Ft,k),Jp(Ft,B),Jp(Ft,P),Ot&&Ot()},Bt=Ft=>(Ot,de)=>{const An=Ft?Mt:J,_e=()=>jt(Ot,Ft,de);Qp(An,[Ot,_e]),Mw(()=>{Jp(Ot,Ft?_:f),Yf(Ot,Ft?S:y),Iw(An)||Ew(Ot,a,j,_e)})};return ma(e,{onBeforeEnter(Ft){Qp(pt,[Ft]),Yf(Ft,f),Yf(Ft,o)},onBeforeAppear(Ft){Qp(xt,[Ft]),Yf(Ft,_),Yf(Ft,C)},onEnter:Bt(!1),onAppear:Bt(!0),onLeave(Ft,Ot){Ft._isLeaving=!0;const de=()=>Qt(Ft,Ot);Yf(Ft,k),Yf(Ft,P),n5(),Mw(()=>{Ft._isLeaving&&(Jp(Ft,k),Yf(Ft,B),Iw(ft)||Ew(Ft,a,X,de))}),Qp(ft,[Ft,de])},onEnterCancelled(Ft){jt(Ft,!1),Qp(nt,[Ft])},onAppearCancelled(Ft){jt(Ft,!0),Qp(Ht,[Ft])},onLeaveCancelled(Ft){Qt(Ft),Qp(Lt,[Ft])}})}function J3(t){if(t==null)return null;if(lo(t))return[ix(t.enter),ix(t.leave)];{const e=ix(t);return[e,e]}}function ix(t){return nT(t)}function Yf(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.add(i)),(t[Cv]||(t[Cv]=new Set)).add(e)}function Jp(t,e){e.split(/\s+/).forEach(a=>a&&t.classList.remove(a));const i=t[Cv];i&&(i.delete(e),i.size||(t[Cv]=void 0))}function Mw(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let t5=0;function Ew(t,e,i,a){const u=t._endId=++t5,f=()=>{u===t._endId&&a()};if(i)return setTimeout(f,i);const{type:o,timeout:y,propCount:_}=e5(t,e);if(!o)return a();const C=o+"end";let S=0;const k=()=>{t.removeEventListener(C,P),f()},P=B=>{B.target===t&&++S>=_&&k()};setTimeout(()=>{S<_&&k()},y+1),t.addEventListener(C,P)}function e5(t,e){const i=window.getComputedStyle(t),a=G=>(i[G]||"").split(", "),u=a(`${$f}Delay`),f=a(`${$f}Duration`),o=Sw(u,f),y=a(`${Bg}Delay`),_=a(`${Bg}Duration`),C=Sw(y,_);let S=null,k=0,P=0;e===$f?o>0&&(S=$f,k=o,P=f.length):e===Bg?C>0&&(S=Bg,k=C,P=_.length):(k=Math.max(o,C),S=k>0?o>C?$f:Bg:null,P=S?S===$f?f.length:_.length:0);const B=S===$f&&/\b(transform|all)(,|$)/.test(a(`${$f}Property`).toString());return{type:S,timeout:k,propCount:P,hasTransform:B}}function Sw(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((i,a)=>Tw(i)+Tw(t[a])))}function Tw(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function n5(){return document.body.offsetHeight}function i5(t,e,i){const a=t[Cv];a&&(e=(e?[e,...a]:[...a]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const K0=Symbol("_vod"),zI=Symbol("_vsh"),BI={beforeMount(t,{value:e},{transition:i}){t[K0]=t.style.display==="none"?"":t.style.display,i&&e?i.beforeEnter(t):Og(t,e)},mounted(t,{value:e},{transition:i}){i&&e&&i.enter(t)},updated(t,{value:e,oldValue:i},{transition:a}){!e!=!i&&(a?e?(a.beforeEnter(t),Og(t,!0),a.enter(t)):a.leave(t,()=>{Og(t,!1)}):Og(t,e))},beforeUnmount(t,{value:e}){Og(t,e)}};function Og(t,e){t.style.display=e?t[K0]:"none",t[zI]=!e}const r5=Symbol(""),o5=/(^|;)\s*display\s*:/;function a5(t,e,i){const a=t.style,u=Yo(i);let f=!1;if(i&&!u){if(e)if(Yo(e))for(const o of e.split(";")){const y=o.slice(0,o.indexOf(":")).trim();i[y]==null&&S0(a,y,"")}else for(const o in e)i[o]==null&&S0(a,o,"");for(const o in i)o==="display"&&(f=!0),S0(a,o,i[o])}else if(u){if(e!==i){const o=a[r5];o&&(i+=";"+o),a.cssText=i,f=o5.test(i)}}else e&&t.removeAttribute("style");K0 in t&&(t[K0]=f?a.display:"",t[zI]&&(a.display="none"))}const kw=/\s*!important$/;function S0(t,e,i){if($n(i))i.forEach(a=>S0(t,e,a));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const a=s5(t,e);kw.test(i)?t.setProperty(gd(a),i.replace(kw,""),"important"):t[a]=i}}const Pw=["Webkit","Moz","ms"],rx={};function s5(t,e){const i=rx[e];if(i)return i;let a=Fc(e);if(a!=="filter"&&a in t)return rx[e]=a;a=__(a);for(let u=0;u<Pw.length;u++){const f=Pw[u]+a;if(f in t)return rx[e]=f}return e}const Lw="http://www.w3.org/1999/xlink";function Dw(t,e,i,a,u,f=lT(e)){a&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(Lw,e.slice(6,e.length)):t.setAttributeNS(Lw,e,i):i==null||f&&!BC(i)?t.removeAttribute(e):t.setAttribute(e,f?"":String(i))}function l5(t,e,i,a,u,f,o){if(e==="innerHTML"||e==="textContent"){a&&o(a,u,f),t[e]=i??"";return}const y=t.tagName;if(e==="value"&&y!=="PROGRESS"&&!y.includes("-")){const C=y==="OPTION"?t.getAttribute("value")||"":t.value,S=i==null?"":String(i);(C!==S||!("_value"in t))&&(t.value=S),i==null&&t.removeAttribute(e),t._value=i;return}let _=!1;if(i===""||i==null){const C=typeof t[e];C==="boolean"?i=BC(i):i==null&&C==="string"?(i="",_=!0):C==="number"&&(i=0,_=!0)}try{t[e]=i}catch{}_&&t.removeAttribute(e)}function ef(t,e,i,a){t.addEventListener(e,i,a)}function u5(t,e,i,a){t.removeEventListener(e,i,a)}const Rw=Symbol("_vei");function c5(t,e,i,a,u=null){const f=t[Rw]||(t[Rw]={}),o=f[e];if(a&&o)o.value=a;else{const[y,_]=h5(e);if(a){const C=f[e]=d5(a,u);ef(t,y,C,_)}else o&&(u5(t,y,o,_),f[e]=void 0)}}const zw=/(?:Once|Passive|Capture)$/;function h5(t){let e;if(zw.test(t)){e={};let a;for(;a=t.match(zw);)t=t.slice(0,t.length-a[0].length),e[a[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):gd(t.slice(2)),e]}let ox=0;const f5=Promise.resolve(),p5=()=>ox||(f5.then(()=>ox=0),ox=Date.now());function d5(t,e){const i=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=i.attached)return;ic(m5(a,i.value),e,5,[a])};return i.value=t,i.attached=p5(),i}function m5(t,e){if($n(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(a=>u=>!u._stopped&&a&&a(u))}else return e}const Bw=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,g5=(t,e,i,a,u,f,o,y,_)=>{const C=u==="svg";e==="class"?i5(t,a,C):e==="style"?a5(t,i,a):v_(e)?bb(e)||c5(t,e,i,a,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):v5(t,e,a,C))?(l5(t,e,a,f,o,y,_),(e==="value"||e==="checked"||e==="selected")&&Dw(t,e,a,C,o,e!=="value")):(e==="true-value"?t._trueValue=a:e==="false-value"&&(t._falseValue=a),Dw(t,e,a,C))};function v5(t,e,i,a){if(a)return!!(e==="innerHTML"||e==="textContent"||e in t&&Bw(e)&&Ui(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const u=t.tagName;if(u==="IMG"||u==="VIDEO"||u==="CANVAS"||u==="SOURCE")return!1}return Bw(e)&&Yo(i)?!1:e in t}const pp=t=>{const e=t.props["onUpdate:modelValue"]||!1;return $n(e)?i=>I0(e,i):e};function y5(t){t.target.composing=!0}function Ow(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const rc=Symbol("_assign"),dp={created(t,{modifiers:{lazy:e,trim:i,number:a}},u){t[rc]=pp(u);const f=a||u.props&&u.props.type==="number";ef(t,e?"change":"input",o=>{if(o.target.composing)return;let y=t.value;i&&(y=y.trim()),f&&(y=j0(y)),t[rc](y)}),i&&ef(t,"change",()=>{t.value=t.value.trim()}),e||(ef(t,"compositionstart",y5),ef(t,"compositionend",Ow),ef(t,"change",Ow))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:i,modifiers:{lazy:a,trim:u,number:f}},o){if(t[rc]=pp(o),t.composing)return;const y=(f||t.type==="number")&&!/^0\d/.test(t.value)?j0(t.value):t.value,_=e??"";y!==_&&(document.activeElement===t&&t.type!=="range"&&(a&&e===i||u&&t.value.trim()===_)||(t.value=_))}},OI={deep:!0,created(t,e,i){t[rc]=pp(i),ef(t,"change",()=>{const a=t._modelValue,u=Bm(t),f=t.checked,o=t[rc];if($n(a)){const y=Cb(a,u),_=y!==-1;if(f&&!_)o(a.concat(u));else if(!f&&_){const C=[...a];C.splice(y,1),o(C)}}else if(qm(a)){const y=new Set(a);f?y.add(u):y.delete(u),o(y)}else o(FI(t,f))})},mounted:Fw,beforeUpdate(t,e,i){t[rc]=pp(i),Fw(t,e,i)}};function Fw(t,{value:e,oldValue:i},a){t._modelValue=e,$n(e)?t.checked=Cb(e,a.props.value)>-1:qm(e)?t.checked=e.has(a.props.value):e!==i&&(t.checked=hd(e,FI(t,!0)))}const _5={created(t,{value:e},i){t.checked=hd(e,i.props.value),t[rc]=pp(i),ef(t,"change",()=>{t[rc](Bm(t))})},beforeUpdate(t,{value:e,oldValue:i},a){t[rc]=pp(a),e!==i&&(t.checked=hd(e,a.props.value))}},jb={deep:!0,created(t,{value:e,modifiers:{number:i}},a){const u=qm(e);ef(t,"change",()=>{const f=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?j0(Bm(o)):Bm(o));t[rc](t.multiple?u?new Set(f):f:f[0]),t._assigning=!0,sc(()=>{t._assigning=!1})}),t[rc]=pp(a)},mounted(t,{value:e,modifiers:{number:i}}){Nw(t,e)},beforeUpdate(t,e,i){t[rc]=pp(i)},updated(t,{value:e,modifiers:{number:i}}){t._assigning||Nw(t,e)}};function Nw(t,e,i){const a=t.multiple,u=$n(e);if(!(a&&!u&&!qm(e))){for(let f=0,o=t.options.length;f<o;f++){const y=t.options[f],_=Bm(y);if(a)if(u){const C=typeof _;C==="string"||C==="number"?y.selected=e.some(S=>String(S)===String(_)):y.selected=Cb(e,_)>-1}else y.selected=e.has(_);else if(hd(Bm(y),e)){t.selectedIndex!==f&&(t.selectedIndex=f);return}}!a&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Bm(t){return"_value"in t?t._value:t.value}function FI(t,e){const i=e?"_trueValue":"_falseValue";return i in t?t[i]:e}const x5={created(t,e,i){d0(t,e,i,null,"created")},mounted(t,e,i){d0(t,e,i,null,"mounted")},beforeUpdate(t,e,i,a){d0(t,e,i,a,"beforeUpdate")},updated(t,e,i,a){d0(t,e,i,a,"updated")}};function b5(t,e){switch(t){case"SELECT":return jb;case"TEXTAREA":return dp;default:switch(e){case"checkbox":return OI;case"radio":return _5;default:return dp}}}function d0(t,e,i,a,u){const o=b5(t.tagName,i.props&&i.props.type)[u];o&&o(t,e,i,a)}const A5=["ctrl","shift","alt","meta"],w5={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>A5.some(i=>t[`${i}Key`]&&!e.includes(i))},so=(t,e)=>{const i=t._withMods||(t._withMods={}),a=e.join(".");return i[a]||(i[a]=(u,...f)=>{for(let o=0;o<e.length;o++){const y=w5[e[o]];if(y&&y(u,e))return}return t(u,...f)})},C5=ma({patchProp:g5},K3);let Vw;function I5(){return Vw||(Vw=b3(C5))}const M5=(...t)=>{const e=I5().createApp(...t),{mount:i}=e;return e.mount=a=>{const u=S5(a);if(!u)return;const f=e._component;!Ui(f)&&!f.render&&!f.template&&(f.template=u.innerHTML),u.innerHTML="";const o=i(u,!1,E5(u));return u instanceof Element&&(u.removeAttribute("v-cloak"),u.setAttribute("data-v-app","")),o},e};function E5(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function S5(t){return Yo(t)?document.querySelector(t):t}/*!
  * vue-router v4.3.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const xm=typeof document<"u";function T5(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Jr=Object.assign;function ax(t,e){const i={};for(const a in e){const u=e[a];i[a]=Nc(u)?u.map(t):t(u)}return i}const ov=()=>{},Nc=Array.isArray,NI=/#/g,k5=/&/g,P5=/\//g,L5=/=/g,D5=/\?/g,VI=/\+/g,R5=/%5B/g,z5=/%5D/g,UI=/%5E/g,B5=/%60/g,jI=/%7B/g,O5=/%7C/g,HI=/%7D/g,F5=/%20/g;function Hb(t){return encodeURI(""+t).replace(O5,"|").replace(R5,"[").replace(z5,"]")}function N5(t){return Hb(t).replace(jI,"{").replace(HI,"}").replace(UI,"^")}function Xx(t){return Hb(t).replace(VI,"%2B").replace(F5,"+").replace(NI,"%23").replace(k5,"%26").replace(B5,"`").replace(jI,"{").replace(HI,"}").replace(UI,"^")}function V5(t){return Xx(t).replace(L5,"%3D")}function U5(t){return Hb(t).replace(NI,"%23").replace(D5,"%3F")}function j5(t){return t==null?"":U5(t).replace(P5,"%2F")}function Iv(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const H5=/\/$/,G5=t=>t.replace(H5,"");function sx(t,e,i="/"){let a,u={},f="",o="";const y=e.indexOf("#");let _=e.indexOf("?");return y<_&&y>=0&&(_=-1),_>-1&&(a=e.slice(0,_),f=e.slice(_+1,y>-1?y:e.length),u=t(f)),y>-1&&(a=a||e.slice(0,y),o=e.slice(y,e.length)),a=$5(a??e,i),{fullPath:a+(f&&"?")+f+o,path:a,query:u,hash:Iv(o)}}function q5(t,e){const i=e.query?t(e.query):"";return e.path+(i&&"?")+i+(e.hash||"")}function Uw(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function W5(t,e,i){const a=e.matched.length-1,u=i.matched.length-1;return a>-1&&a===u&&Om(e.matched[a],i.matched[u])&&GI(e.params,i.params)&&t(e.query)===t(i.query)&&e.hash===i.hash}function Om(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function GI(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!Z5(t[i],e[i]))return!1;return!0}function Z5(t,e){return Nc(t)?jw(t,e):Nc(e)?jw(e,t):t===e}function jw(t,e){return Nc(e)?t.length===e.length&&t.every((i,a)=>i===e[a]):t.length===1&&t[0]===e}function $5(t,e){if(t.startsWith("/"))return t;if(!t)return e;const i=e.split("/"),a=t.split("/"),u=a[a.length-1];(u===".."||u===".")&&a.push("");let f=i.length-1,o,y;for(o=0;o<a.length;o++)if(y=a[o],y!==".")if(y==="..")f>1&&f--;else break;return i.slice(0,f).join("/")+"/"+a.slice(o).join("/")}var Mv;(function(t){t.pop="pop",t.push="push"})(Mv||(Mv={}));var av;(function(t){t.back="back",t.forward="forward",t.unknown=""})(av||(av={}));function Y5(t){if(!t)if(xm){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),G5(t)}const X5=/^[^#]+#/;function K5(t,e){return t.replace(X5,"#")+e}function Q5(t,e){const i=document.documentElement.getBoundingClientRect(),a=t.getBoundingClientRect();return{behavior:e.behavior,left:a.left-i.left-(e.left||0),top:a.top-i.top-(e.top||0)}}const P_=()=>({left:window.scrollX,top:window.scrollY});function J5(t){let e;if("el"in t){const i=t.el,a=typeof i=="string"&&i.startsWith("#"),u=typeof i=="string"?a?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!u)return;e=Q5(u,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Hw(t,e){return(history.state?history.state.position-e:-1)+t}const Kx=new Map;function tk(t,e){Kx.set(t,e)}function ek(t){const e=Kx.get(t);return Kx.delete(t),e}let nk=()=>location.protocol+"//"+location.host;function qI(t,e){const{pathname:i,search:a,hash:u}=e,f=t.indexOf("#");if(f>-1){let y=u.includes(t.slice(f))?t.slice(f).length:1,_=u.slice(y);return _[0]!=="/"&&(_="/"+_),Uw(_,"")}return Uw(i,t)+a+u}function ik(t,e,i,a){let u=[],f=[],o=null;const y=({state:P})=>{const B=qI(t,location),G=i.value,j=e.value;let X=0;if(P){if(i.value=B,e.value=P,o&&o===G){o=null;return}X=j?P.position-j.position:0}else a(B);u.forEach(pt=>{pt(i.value,G,{delta:X,type:Mv.pop,direction:X?X>0?av.forward:av.back:av.unknown})})};function _(){o=i.value}function C(P){u.push(P);const B=()=>{const G=u.indexOf(P);G>-1&&u.splice(G,1)};return f.push(B),B}function S(){const{history:P}=window;P.state&&P.replaceState(Jr({},P.state,{scroll:P_()}),"")}function k(){for(const P of f)P();f=[],window.removeEventListener("popstate",y),window.removeEventListener("beforeunload",S)}return window.addEventListener("popstate",y),window.addEventListener("beforeunload",S,{passive:!0}),{pauseListeners:_,listen:C,destroy:k}}function Gw(t,e,i,a=!1,u=!1){return{back:t,current:e,forward:i,replaced:a,position:window.history.length,scroll:u?P_():null}}function rk(t){const{history:e,location:i}=window,a={value:qI(t,i)},u={value:e.state};u.value||f(a.value,{back:null,current:a.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function f(_,C,S){const k=t.indexOf("#"),P=k>-1?(i.host&&document.querySelector("base")?t:t.slice(k))+_:nk()+t+_;try{e[S?"replaceState":"pushState"](C,"",P),u.value=C}catch(B){console.error(B),i[S?"replace":"assign"](P)}}function o(_,C){const S=Jr({},e.state,Gw(u.value.back,_,u.value.forward,!0),C,{position:u.value.position});f(_,S,!0),a.value=_}function y(_,C){const S=Jr({},u.value,e.state,{forward:_,scroll:P_()});f(S.current,S,!0);const k=Jr({},Gw(a.value,_,null),{position:S.position+1},C);f(_,k,!1),a.value=_}return{location:a,state:u,push:y,replace:o}}function ok(t){t=Y5(t);const e=rk(t),i=ik(t,e.state,e.location,e.replace);function a(f,o=!0){o||i.pauseListeners(),history.go(f)}const u=Jr({location:"",base:t,go:a,createHref:K5.bind(null,t)},e,i);return Object.defineProperty(u,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(u,"state",{enumerable:!0,get:()=>e.state.value}),u}function ak(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),ok(t)}function sk(t){return typeof t=="string"||t&&typeof t=="object"}function WI(t){return typeof t=="string"||typeof t=="symbol"}const Xf={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ZI=Symbol("");var qw;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(qw||(qw={}));function Fm(t,e){return Jr(new Error,{type:t,[ZI]:!0},e)}function Xh(t,e){return t instanceof Error&&ZI in t&&(e==null||!!(t.type&e))}const Ww="[^/]+?",lk={sensitive:!1,strict:!1,start:!0,end:!0},uk=/[.+*?^${}()[\]/\\]/g;function ck(t,e){const i=Jr({},lk,e),a=[];let u=i.start?"^":"";const f=[];for(const C of t){const S=C.length?[]:[90];i.strict&&!C.length&&(u+="/");for(let k=0;k<C.length;k++){const P=C[k];let B=40+(i.sensitive?.25:0);if(P.type===0)k||(u+="/"),u+=P.value.replace(uk,"\\$&"),B+=40;else if(P.type===1){const{value:G,repeatable:j,optional:X,regexp:pt}=P;f.push({name:G,repeatable:j,optional:X});const J=pt||Ww;if(J!==Ww){B+=10;try{new RegExp(`(${J})`)}catch(ft){throw new Error(`Invalid custom RegExp for param "${G}" (${J}): `+ft.message)}}let nt=j?`((?:${J})(?:/(?:${J}))*)`:`(${J})`;k||(nt=X&&C.length<2?`(?:/${nt})`:"/"+nt),X&&(nt+="?"),u+=nt,B+=20,X&&(B+=-8),j&&(B+=-20),J===".*"&&(B+=-50)}S.push(B)}a.push(S)}if(i.strict&&i.end){const C=a.length-1;a[C][a[C].length-1]+=.7000000000000001}i.strict||(u+="/?"),i.end?u+="$":i.strict&&(u+="(?:/|$)");const o=new RegExp(u,i.sensitive?"":"i");function y(C){const S=C.match(o),k={};if(!S)return null;for(let P=1;P<S.length;P++){const B=S[P]||"",G=f[P-1];k[G.name]=B&&G.repeatable?B.split("/"):B}return k}function _(C){let S="",k=!1;for(const P of t){(!k||!S.endsWith("/"))&&(S+="/"),k=!1;for(const B of P)if(B.type===0)S+=B.value;else if(B.type===1){const{value:G,repeatable:j,optional:X}=B,pt=G in C?C[G]:"";if(Nc(pt)&&!j)throw new Error(`Provided param "${G}" is an array but it is not repeatable (* or + modifiers)`);const J=Nc(pt)?pt.join("/"):pt;if(!J)if(X)P.length<2&&(S.endsWith("/")?S=S.slice(0,-1):k=!0);else throw new Error(`Missing required param "${G}"`);S+=J}}return S||"/"}return{re:o,score:a,keys:f,parse:y,stringify:_}}function hk(t,e){let i=0;for(;i<t.length&&i<e.length;){const a=e[i]-t[i];if(a)return a;i++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function $I(t,e){let i=0;const a=t.score,u=e.score;for(;i<a.length&&i<u.length;){const f=hk(a[i],u[i]);if(f)return f;i++}if(Math.abs(u.length-a.length)===1){if(Zw(a))return 1;if(Zw(u))return-1}return u.length-a.length}function Zw(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const fk={type:0,value:""},pk=/[a-zA-Z0-9_]/;function dk(t){if(!t)return[[]];if(t==="/")return[[fk]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(B){throw new Error(`ERR (${i})/"${C}": ${B}`)}let i=0,a=i;const u=[];let f;function o(){f&&u.push(f),f=[]}let y=0,_,C="",S="";function k(){C&&(i===0?f.push({type:0,value:C}):i===1||i===2||i===3?(f.length>1&&(_==="*"||_==="+")&&e(`A repeatable param (${C}) must be alone in its segment. eg: '/:ids+.`),f.push({type:1,value:C,regexp:S,repeatable:_==="*"||_==="+",optional:_==="*"||_==="?"})):e("Invalid state to consume buffer"),C="")}function P(){C+=_}for(;y<t.length;){if(_=t[y++],_==="\\"&&i!==2){a=i,i=4;continue}switch(i){case 0:_==="/"?(C&&k(),o()):_===":"?(k(),i=1):P();break;case 4:P(),i=a;break;case 1:_==="("?i=2:pk.test(_)?P():(k(),i=0,_!=="*"&&_!=="?"&&_!=="+"&&y--);break;case 2:_===")"?S[S.length-1]=="\\"?S=S.slice(0,-1)+_:i=3:S+=_;break;case 3:k(),i=0,_!=="*"&&_!=="?"&&_!=="+"&&y--,S="";break;default:e("Unknown state");break}}return i===2&&e(`Unfinished custom RegExp for param "${C}"`),k(),o(),u}function mk(t,e,i){const a=ck(dk(t.path),i),u=Jr(a,{record:t,parent:e,children:[],alias:[]});return e&&!u.record.aliasOf==!e.record.aliasOf&&e.children.push(u),u}function gk(t,e){const i=[],a=new Map;e=Xw({strict:!1,end:!0,sensitive:!1},e);function u(S){return a.get(S)}function f(S,k,P){const B=!P,G=vk(S);G.aliasOf=P&&P.record;const j=Xw(e,S),X=[G];if("alias"in S){const nt=typeof S.alias=="string"?[S.alias]:S.alias;for(const ft of nt)X.push(Jr({},G,{components:P?P.record.components:G.components,path:ft,aliasOf:P?P.record:G}))}let pt,J;for(const nt of X){const{path:ft}=nt;if(k&&ft[0]!=="/"){const Lt=k.record.path,xt=Lt[Lt.length-1]==="/"?"":"/";nt.path=k.record.path+(ft&&xt+ft)}if(pt=mk(nt,k,j),P?P.alias.push(pt):(J=J||pt,J!==pt&&J.alias.push(pt),B&&S.name&&!Yw(pt)&&o(S.name)),YI(pt)&&_(pt),G.children){const Lt=G.children;for(let xt=0;xt<Lt.length;xt++)f(Lt[xt],pt,P&&P.children[xt])}P=P||pt}return J?()=>{o(J)}:ov}function o(S){if(WI(S)){const k=a.get(S);k&&(a.delete(S),i.splice(i.indexOf(k),1),k.children.forEach(o),k.alias.forEach(o))}else{const k=i.indexOf(S);k>-1&&(i.splice(k,1),S.record.name&&a.delete(S.record.name),S.children.forEach(o),S.alias.forEach(o))}}function y(){return i}function _(S){const k=xk(S,i);i.splice(k,0,S),S.record.name&&!Yw(S)&&a.set(S.record.name,S)}function C(S,k){let P,B={},G,j;if("name"in S&&S.name){if(P=a.get(S.name),!P)throw Fm(1,{location:S});j=P.record.name,B=Jr($w(k.params,P.keys.filter(J=>!J.optional).concat(P.parent?P.parent.keys.filter(J=>J.optional):[]).map(J=>J.name)),S.params&&$w(S.params,P.keys.map(J=>J.name))),G=P.stringify(B)}else if(S.path!=null)G=S.path,P=i.find(J=>J.re.test(G)),P&&(B=P.parse(G),j=P.record.name);else{if(P=k.name?a.get(k.name):i.find(J=>J.re.test(k.path)),!P)throw Fm(1,{location:S,currentLocation:k});j=P.record.name,B=Jr({},k.params,S.params),G=P.stringify(B)}const X=[];let pt=P;for(;pt;)X.unshift(pt.record),pt=pt.parent;return{name:j,path:G,params:B,matched:X,meta:_k(X)}}return t.forEach(S=>f(S)),{addRoute:f,resolve:C,removeRoute:o,getRoutes:y,getRecordMatcher:u}}function $w(t,e){const i={};for(const a of e)a in t&&(i[a]=t[a]);return i}function vk(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:yk(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function yk(t){const e={},i=t.props||!1;if("component"in t)e.default=i;else for(const a in t.components)e[a]=typeof i=="object"?i[a]:i;return e}function Yw(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function _k(t){return t.reduce((e,i)=>Jr(e,i.meta),{})}function Xw(t,e){const i={};for(const a in t)i[a]=a in e?e[a]:t[a];return i}function xk(t,e){let i=0,a=e.length;for(;i!==a;){const f=i+a>>1;$I(t,e[f])<0?a=f:i=f+1}const u=bk(t);return u&&(a=e.lastIndexOf(u,a-1)),a}function bk(t){let e=t;for(;e=e.parent;)if(YI(e)&&$I(t,e)===0)return e}function YI({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Ak(t){const e={};if(t===""||t==="?")return e;const a=(t[0]==="?"?t.slice(1):t).split("&");for(let u=0;u<a.length;++u){const f=a[u].replace(VI," "),o=f.indexOf("="),y=Iv(o<0?f:f.slice(0,o)),_=o<0?null:Iv(f.slice(o+1));if(y in e){let C=e[y];Nc(C)||(C=e[y]=[C]),C.push(_)}else e[y]=_}return e}function Kw(t){let e="";for(let i in t){const a=t[i];if(i=V5(i),a==null){a!==void 0&&(e+=(e.length?"&":"")+i);continue}(Nc(a)?a.map(f=>f&&Xx(f)):[a&&Xx(a)]).forEach(f=>{f!==void 0&&(e+=(e.length?"&":"")+i,f!=null&&(e+="="+f))})}return e}function wk(t){const e={};for(const i in t){const a=t[i];a!==void 0&&(e[i]=Nc(a)?a.map(u=>u==null?null:""+u):a==null?a:""+a)}return e}const Ck=Symbol(""),Qw=Symbol(""),Gb=Symbol(""),XI=Symbol(""),Qx=Symbol("");function Fg(){let t=[];function e(a){return t.push(a),()=>{const u=t.indexOf(a);u>-1&&t.splice(u,1)}}function i(){t=[]}return{add:e,list:()=>t.slice(),reset:i}}function tp(t,e,i,a,u,f=o=>o()){const o=a&&(a.enterCallbacks[u]=a.enterCallbacks[u]||[]);return()=>new Promise((y,_)=>{const C=P=>{P===!1?_(Fm(4,{from:i,to:e})):P instanceof Error?_(P):sk(P)?_(Fm(2,{from:e,to:P})):(o&&a.enterCallbacks[u]===o&&typeof P=="function"&&o.push(P),y())},S=f(()=>t.call(a&&a.instances[u],e,i,C));let k=Promise.resolve(S);t.length<3&&(k=k.then(C)),k.catch(P=>_(P))})}function lx(t,e,i,a,u=f=>f()){const f=[];for(const o of t)for(const y in o.components){let _=o.components[y];if(!(e!=="beforeRouteEnter"&&!o.instances[y]))if(Ik(_)){const S=(_.__vccOpts||_)[e];S&&f.push(tp(S,i,a,o,y,u))}else{let C=_();f.push(()=>C.then(S=>{if(!S)return Promise.reject(new Error(`Couldn't resolve component "${y}" at "${o.path}"`));const k=T5(S)?S.default:S;o.components[y]=k;const B=(k.__vccOpts||k)[e];return B&&tp(B,i,a,o,y,u)()}))}}return f}function Ik(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Jw(t){const e=ws(Gb),i=ws(XI),a=De(()=>{const _=W(t.to);return e.resolve(_)}),u=De(()=>{const{matched:_}=a.value,{length:C}=_,S=_[C-1],k=i.matched;if(!S||!k.length)return-1;const P=k.findIndex(Om.bind(null,S));if(P>-1)return P;const B=t2(_[C-2]);return C>1&&t2(S)===B&&k[k.length-1].path!==B?k.findIndex(Om.bind(null,_[C-2])):P}),f=De(()=>u.value>-1&&Sk(i.params,a.value.params)),o=De(()=>u.value>-1&&u.value===i.matched.length-1&&GI(i.params,a.value.params));function y(_={}){return Ek(_)?e[W(t.replace)?"replace":"push"](W(t.to)).catch(ov):Promise.resolve()}return{route:a,href:De(()=>a.value.href),isActive:f,isExactActive:o,navigate:y}}const Mk=di({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Jw,setup(t,{slots:e}){const i=yl(Jw(t)),{options:a}=ws(Gb),u=De(()=>({[e2(t.activeClass,a.linkActiveClass,"router-link-active")]:i.isActive,[e2(t.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const f=e.default&&e.default(i);return t.custom?f:fd("a",{"aria-current":i.isExactActive?t.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:u.value},f)}}}),KI=Mk;function Ek(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Sk(t,e){for(const i in e){const a=e[i],u=t[i];if(typeof a=="string"){if(a!==u)return!1}else if(!Nc(u)||u.length!==a.length||a.some((f,o)=>f!==u[o]))return!1}return!0}function t2(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const e2=(t,e,i)=>t??e??i,Tk=di({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:i}){const a=ws(Qx),u=De(()=>t.route||a.value),f=ws(Qw,0),o=De(()=>{let C=W(f);const{matched:S}=u.value;let k;for(;(k=S[C])&&!k.components;)C++;return C}),y=De(()=>u.value.matched[o.value]);cd(Qw,De(()=>o.value+1)),cd(Ck,y),cd(Qx,u);const _=Ke();return vl(()=>[_.value,y.value,t.name],([C,S,k],[P,B,G])=>{S&&(S.instances[k]=C,B&&B!==S&&C&&C===P&&(S.leaveGuards.size||(S.leaveGuards=B.leaveGuards),S.updateGuards.size||(S.updateGuards=B.updateGuards))),C&&S&&(!B||!Om(S,B)||!P)&&(S.enterCallbacks[k]||[]).forEach(j=>j(C))},{flush:"post"}),()=>{const C=u.value,S=t.name,k=y.value,P=k&&k.components[S];if(!P)return n2(i.default,{Component:P,route:C});const B=k.props[S],G=B?B===!0?C.params:typeof B=="function"?B(C):B:null,X=fd(P,Jr({},G,e,{onVnodeUnmounted:pt=>{pt.component.isUnmounted&&(k.instances[S]=null)},ref:_}));return n2(i.default,{Component:X,route:C})||X}}});function n2(t,e){if(!t)return null;const i=t(e);return i.length===1?i[0]:i}const QI=Tk;function kk(t){const e=gk(t.routes,t),i=t.parseQuery||Ak,a=t.stringifyQuery||Kw,u=t.history,f=Fg(),o=Fg(),y=Fg(),_=Bv(Xf);let C=Xf;xm&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const S=ax.bind(null,ue=>""+ue),k=ax.bind(null,j5),P=ax.bind(null,Iv);function B(ue,Qe){let me,ke;return WI(ue)?(me=e.getRecordMatcher(ue),ke=Qe):ke=ue,e.addRoute(ke,me)}function G(ue){const Qe=e.getRecordMatcher(ue);Qe&&e.removeRoute(Qe)}function j(){return e.getRoutes().map(ue=>ue.record)}function X(ue){return!!e.getRecordMatcher(ue)}function pt(ue,Qe){if(Qe=Jr({},Qe||_.value),typeof ue=="string"){const wt=sx(i,ue,Qe.path),te=e.resolve({path:wt.path},Qe),le=u.createHref(wt.fullPath);return Jr(wt,te,{params:P(te.params),hash:Iv(wt.hash),redirectedFrom:void 0,href:le})}let me;if(ue.path!=null)me=Jr({},ue,{path:sx(i,ue.path,Qe.path).path});else{const wt=Jr({},ue.params);for(const te in wt)wt[te]==null&&delete wt[te];me=Jr({},ue,{params:k(wt)}),Qe.params=k(Qe.params)}const ke=e.resolve(me,Qe),Ci=ue.hash||"";ke.params=S(P(ke.params));const Di=q5(a,Jr({},ue,{hash:N5(Ci),path:ke.path})),lt=u.createHref(Di);return Jr({fullPath:Di,hash:Ci,query:a===Kw?wk(ue.query):ue.query||{}},ke,{redirectedFrom:void 0,href:lt})}function J(ue){return typeof ue=="string"?sx(i,ue,_.value.path):Jr({},ue)}function nt(ue,Qe){if(C!==ue)return Fm(8,{from:Qe,to:ue})}function ft(ue){return Mt(ue)}function Lt(ue){return ft(Jr(J(ue),{replace:!0}))}function xt(ue){const Qe=ue.matched[ue.matched.length-1];if(Qe&&Qe.redirect){const{redirect:me}=Qe;let ke=typeof me=="function"?me(ue):me;return typeof ke=="string"&&(ke=ke.includes("?")||ke.includes("#")?ke=J(ke):{path:ke},ke.params={}),Jr({query:ue.query,hash:ue.hash,params:ke.path!=null?{}:ue.params},ke)}}function Mt(ue,Qe){const me=C=pt(ue),ke=_.value,Ci=ue.state,Di=ue.force,lt=ue.replace===!0,wt=xt(me);if(wt)return Mt(Jr(J(wt),{state:typeof wt=="object"?Jr({},Ci,wt.state):Ci,force:Di,replace:lt}),Qe||me);const te=me;te.redirectedFrom=Qe;let le;return!Di&&W5(a,ke,me)&&(le=Fm(16,{to:te,from:ke}),Qn(ke,ke,!0,!1)),(le?Promise.resolve(le):Qt(te,ke)).catch(pe=>Xh(pe)?Xh(pe,2)?pe:Li(pe):je(pe,te,ke)).then(pe=>{if(pe){if(Xh(pe,2))return Mt(Jr({replace:lt},J(pe.to),{state:typeof pe.to=="object"?Jr({},Ci,pe.to.state):Ci,force:Di}),Qe||te)}else pe=Ft(te,ke,!0,lt,Ci);return Bt(te,ke,pe),pe})}function Ht(ue,Qe){const me=nt(ue,Qe);return me?Promise.reject(me):Promise.resolve()}function jt(ue){const Qe=ui.values().next().value;return Qe&&typeof Qe.runWithContext=="function"?Qe.runWithContext(ue):ue()}function Qt(ue,Qe){let me;const[ke,Ci,Di]=Pk(ue,Qe);me=lx(ke.reverse(),"beforeRouteLeave",ue,Qe);for(const wt of ke)wt.leaveGuards.forEach(te=>{me.push(tp(te,ue,Qe))});const lt=Ht.bind(null,ue,Qe);return me.push(lt),wi(me).then(()=>{me=[];for(const wt of f.list())me.push(tp(wt,ue,Qe));return me.push(lt),wi(me)}).then(()=>{me=lx(Ci,"beforeRouteUpdate",ue,Qe);for(const wt of Ci)wt.updateGuards.forEach(te=>{me.push(tp(te,ue,Qe))});return me.push(lt),wi(me)}).then(()=>{me=[];for(const wt of Di)if(wt.beforeEnter)if(Nc(wt.beforeEnter))for(const te of wt.beforeEnter)me.push(tp(te,ue,Qe));else me.push(tp(wt.beforeEnter,ue,Qe));return me.push(lt),wi(me)}).then(()=>(ue.matched.forEach(wt=>wt.enterCallbacks={}),me=lx(Di,"beforeRouteEnter",ue,Qe,jt),me.push(lt),wi(me))).then(()=>{me=[];for(const wt of o.list())me.push(tp(wt,ue,Qe));return me.push(lt),wi(me)}).catch(wt=>Xh(wt,8)?wt:Promise.reject(wt))}function Bt(ue,Qe,me){y.list().forEach(ke=>jt(()=>ke(ue,Qe,me)))}function Ft(ue,Qe,me,ke,Ci){const Di=nt(ue,Qe);if(Di)return Di;const lt=Qe===Xf,wt=xm?history.state:{};me&&(ke||lt?u.replace(ue.fullPath,Jr({scroll:lt&&wt&&wt.scroll},Ci)):u.push(ue.fullPath,Ci)),_.value=ue,Qn(ue,Qe,me,lt),Li()}let Ot;function de(){Ot||(Ot=u.listen((ue,Qe,me)=>{if(!oi.listening)return;const ke=pt(ue),Ci=xt(ke);if(Ci){Mt(Jr(Ci,{replace:!0}),ke).catch(ov);return}C=ke;const Di=_.value;xm&&tk(Hw(Di.fullPath,me.delta),P_()),Qt(ke,Di).catch(lt=>Xh(lt,12)?lt:Xh(lt,2)?(Mt(lt.to,ke).then(wt=>{Xh(wt,20)&&!me.delta&&me.type===Mv.pop&&u.go(-1,!1)}).catch(ov),Promise.reject()):(me.delta&&u.go(-me.delta,!1),je(lt,ke,Di))).then(lt=>{lt=lt||Ft(ke,Di,!1),lt&&(me.delta&&!Xh(lt,8)?u.go(-me.delta,!1):me.type===Mv.pop&&Xh(lt,20)&&u.go(-1,!1)),Bt(ke,Di,lt)}).catch(ov)}))}let An=Fg(),_e=Fg(),Ge;function je(ue,Qe,me){Li(ue);const ke=_e.list();return ke.length?ke.forEach(Ci=>Ci(ue,Qe,me)):console.error(ue),Promise.reject(ue)}function Pi(){return Ge&&_.value!==Xf?Promise.resolve():new Promise((ue,Qe)=>{An.add([ue,Qe])})}function Li(ue){return Ge||(Ge=!ue,de(),An.list().forEach(([Qe,me])=>ue?me(ue):Qe()),An.reset()),ue}function Qn(ue,Qe,me,ke){const{scrollBehavior:Ci}=t;if(!xm||!Ci)return Promise.resolve();const Di=!me&&ek(Hw(ue.fullPath,0))||(ke||!me)&&history.state&&history.state.scroll||null;return sc().then(()=>Ci(ue,Qe,Di)).then(lt=>lt&&J5(lt)).catch(lt=>je(lt,ue,Qe))}const un=ue=>u.go(ue);let Un;const ui=new Set,oi={currentRoute:_,listening:!0,addRoute:B,removeRoute:G,hasRoute:X,getRoutes:j,resolve:pt,options:t,push:ft,replace:Lt,go:un,back:()=>un(-1),forward:()=>un(1),beforeEach:f.add,beforeResolve:o.add,afterEach:y.add,onError:_e.add,isReady:Pi,install(ue){const Qe=this;ue.component("RouterLink",KI),ue.component("RouterView",QI),ue.config.globalProperties.$router=Qe,Object.defineProperty(ue.config.globalProperties,"$route",{enumerable:!0,get:()=>W(_)}),xm&&!Un&&_.value===Xf&&(Un=!0,ft(u.location).catch(Ci=>{}));const me={};for(const Ci in Xf)Object.defineProperty(me,Ci,{get:()=>_.value[Ci],enumerable:!0});ue.provide(Gb,Qe),ue.provide(XI,XC(me)),ue.provide(Qx,_);const ke=ue.unmount;ui.add(ue),ue.unmount=function(){ui.delete(ue),ui.size<1&&(C=Xf,Ot&&Ot(),Ot=null,_.value=Xf,Un=!1,Ge=!1),ke()}}};function wi(ue){return ue.reduce((Qe,me)=>Qe.then(()=>jt(me)),Promise.resolve())}return oi}function Pk(t,e){const i=[],a=[],u=[],f=Math.max(e.matched.length,t.matched.length);for(let o=0;o<f;o++){const y=e.matched[o];y&&(t.matched.find(C=>Om(C,y))?a.push(y):i.push(y));const _=t.matched[o];_&&(e.matched.find(C=>Om(C,_))||u.push(_))}return[i,a,u]}var Lk="M17.45,17.55L12,23L6.55,17.55L7.96,16.14L11,19.17V4.83L7.96,7.86L6.55,6.45L12,1L17.45,6.45L16.04,7.86L13,4.83V19.17L16.04,16.14L17.45,17.55Z",Dk="M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12",Rk="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",zk="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",Bk="M12,10A2,2 0 0,0 10,12C10,13.11 10.9,14 12,14C13.11,14 14,13.11 14,12A2,2 0 0,0 12,10Z",Nm="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",Ok="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",JI="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z",Fk="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",Nk="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",tM="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z",Nv="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z",Vk="M20.94 11C20.5 6.83 17.17 3.5 13 3.06V1H11V3.06C9.87 3.18 8.81 3.5 7.84 4.03L9.34 5.53C10.16 5.19 11.06 5 12 5C15.87 5 19 8.13 19 12C19 12.94 18.81 13.84 18.5 14.65L20 16.15C20.5 15.19 20.82 14.13 20.95 13H23V11H20.94M3 4.27L5.04 6.31C3.97 7.62 3.25 9.23 3.06 11H1V13H3.06C3.5 17.17 6.83 20.5 11 20.94V23H13V20.94C14.77 20.74 16.38 20.03 17.69 18.96L19.73 21L21 19.73L4.27 3L3 4.27M16.27 17.54C15.09 18.45 13.61 19 12 19C8.13 19 5 15.87 5 12C5 10.39 5.55 8.91 6.46 7.73L16.27 17.54Z",Uk="M13.75,10.19L14.38,10.32L18.55,12.4C19.25,12.63 19.71,13.32 19.65,14.06V14.19L19.65,14.32L18.75,20.44C18.69,20.87 18.5,21.27 18.15,21.55C17.84,21.85 17.43,22 17,22H10.12C9.63,22 9.18,21.82 8.85,21.47L2.86,15.5L3.76,14.5C4,14.25 4.38,14.11 4.74,14.13H5.03L9,15V4.5A2,2 0 0,1 11,2.5A2,2 0 0,1 13,4.5V10.19H13.75Z",Wm="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",qb="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",Wb="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",jk="M13,5V11H14.17L12,13.17L9.83,11H11V5H13M15,3H9V9H5L12,16L19,9H15V3M19,18H5V20H19V18Z",Hk="M9.75 20.85C11.53 20.15 11.14 18.22 10.24 17C9.35 15.75 8.12 14.89 6.88 14.06C6 13.5 5.19 12.8 4.54 12C4.26 11.67 3.69 11.06 4.27 10.94C4.86 10.82 5.88 11.4 6.4 11.62C7.31 12 8.21 12.44 9.05 12.96L10.06 11.26C8.5 10.23 6.5 9.32 4.64 9.05C3.58 8.89 2.46 9.11 2.1 10.26C1.78 11.25 2.29 12.25 2.87 13.03C4.24 14.86 6.37 15.74 7.96 17.32C8.3 17.65 8.71 18.04 8.91 18.5C9.12 18.94 9.07 18.97 8.6 18.97C7.36 18.97 5.81 18 4.8 17.36L3.79 19.06C5.32 20 7.88 21.47 9.75 20.85M20.84 5.25C21.06 5.03 21.06 4.67 20.84 4.46L19.54 3.16C19.33 2.95 18.97 2.95 18.76 3.16L17.74 4.18L19.82 6.26M11 10.92V13H13.08L19.23 6.85L17.15 4.77L11 10.92Z",Zb="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",$b="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z",Gk="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z",qk="M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z",eM="M1,1V5H2V19H1V23H5V22H19V23H23V19H22V5H23V1H19V2H5V1M5,4H19V5H20V19H19V20H5V19H4V5H5M6,6V14H9V18H18V9H14V6M8,8H12V12H8M14,11H16V16H11V14H14",Wk="M14,3V13L17.2,11.31L17.42,11.28C17.71,11.28 17.97,11.4 18.16,11.6L18.9,12.37L14,16.57C13.74,16.84 13.39,17 13,17H6.5C5.73,17 5,16.3 5,15.5V11.14C5,10.53 5.35,10 5.85,9.8L10.79,7.6L12,7.47V3A1,1 0 0,1 13,2A1,1 0 0,1 14,3M5,19H13V22H5V19Z",Zk="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",$k="M19 3H5A2 2 0 0 0 3 5V19A2 2 0 0 0 5 21H19A2 2 0 0 0 21 19V5A2 2 0 0 0 19 3M5 19V17H8.13A4.13 4.13 0 0 0 9.4 19M19 19H14.6A4.13 4.13 0 0 0 15.87 17H19M19 15H14V16A2 2 0 0 1 10 16V15H5V5H19Z",CW="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",Yk="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",L_="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z",Xk="M12,18.54L19.37,12.8L21,14.07L12,21.07L3,14.07L4.62,12.81L12,18.54M12,16L3,9L12,2L21,9L12,16M12,4.53L6.26,9L12,13.47L17.74,9L12,4.53Z",Yb="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z",Kk="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",Xb="M12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5M12,2A7,7 0 0,1 19,9C19,14.25 12,22 12,22C12,22 5,14.25 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9C7,10 7,12 12,18.71C17,12 17,10 17,9A5,5 0 0,0 12,4Z",Qk="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",nM="M7,10L12,15L17,10H7Z",Jk="M14,7L9,12L14,17V7Z",t4="M7,15L12,10L17,15H7Z",e4="M19,13H5V11H19V13Z",n4="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",i4="M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z",xp="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",r4="M9.8 21C9.6 20.6 9.3 20.2 9.2 19.7L8.8 19H8V14H13C14.2 13.4 15.6 13 17 13C18.9 13 20.6 13.6 22 14.6V11C22 9.3 20.7 8 19 8H5C3.3 8 2 9.3 2 11V17H6V21H9.8M19 10C19.6 10 20 10.4 20 11S19.6 12 19 12 18 11.6 18 11 18.4 10 19 10M18 7H6V3H18V7M17 18C17.6 18 18 18.4 18 19S17.6 20 17 20 16 19.6 16 19 16.4 18 17 18M17 15C14.3 15 11.9 16.7 11 19C11.9 21.3 14.3 23 17 23S22.1 21.3 23 19C22.1 16.7 19.7 15 17 15M17 21.5C15.6 21.5 14.5 20.4 14.5 19S15.6 16.5 17 16.5 19.5 17.6 19.5 19 18.4 21.5 17 21.5Z",o4="M19 8C20.66 8 22 9.34 22 11V17H18V21H6V17H2V11C2 9.34 3.34 8 5 8H6V3H18V8H19M8 5V8H16V5H8M16 19V15H8V19H16M18 15H20V11C20 10.45 19.55 10 19 10H5C4.45 10 4 10.45 4 11V15H6V13H18V15M19 11.5C19 12.05 18.55 12.5 18 12.5C17.45 12.5 17 12.05 17 11.5C17 10.95 17.45 10.5 18 10.5C18.55 10.5 19 10.95 19 11.5Z",a4="M1.39,18.36L3.16,16.6L4.58,18L5.64,16.95L4.22,15.54L5.64,14.12L8.11,16.6L9.17,15.54L6.7,13.06L8.11,11.65L9.53,13.06L10.59,12L9.17,10.59L10.59,9.17L13.06,11.65L14.12,10.59L11.65,8.11L13.06,6.7L14.47,8.11L15.54,7.05L14.12,5.64L15.54,4.22L18,6.7L19.07,5.64L16.6,3.16L18.36,1.39L22.61,5.64L5.64,22.61L1.39,18.36Z",s4="M20 19.88V22L18.2 20.83L13.41 11.83A4.94 4.94 0 0 0 15.19 10.83M15 7A3 3 0 0 1 12 10A3.27 3.27 0 0 1 11.56 10L5.8 20.83L4 22V19.88L9.79 9A3 3 0 0 1 12 4V2A1 1 0 0 1 13 3V4.18A3 3 0 0 1 15 7M13 7A1 1 0 1 0 12 8A1 1 0 0 0 13 7M4.22 10L6 11.8L4.56 14.56L2.1 12.1M12 17.76L10.5 16.25L9 19L12 22L15 19L13.53 16.23M19.78 10L18 11.8L19.5 14.56L21.9 12.1Z",l4="M4,3H5V5H3V4A1,1 0 0,1 4,3M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M21,20A1,1 0 0,1 20,21H19V19H21V20M15,21V19H17V21H15M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M3,7H5V9H3V7M21,7V9H19V7H21Z",u4="M1 6V19A2 2 0 0 0 3 21H9V11H21V6A2 2 0 0 0 19 4H3A2 2 0 0 0 1 6M3 6H7V9H3M7 19H3V16H7M7 14H3V11H7M9 9V6H13V9M19 9H15V6H19M17 16A1 1 0 1 1 16 17A1 1 0 0 1 17 16M17 13A6.45 6.45 0 0 1 23 17A6.5 6.5 0 0 1 11 17A6.45 6.45 0 0 1 17 13M17 14.5A2.5 2.5 0 1 0 19.5 17A2.5 2.5 0 0 0 17 14.5",c4="M2,2H6V3H13V2H17V6H16V9H18V8H22V12H21V18H22V22H18V21H12V22H8V18H9V16H6V17H2V13H3V6H2V2M18,12V11H16V13H17V17H13V16H11V18H12V19H18V18H19V12H18M13,6V5H6V6H5V13H6V14H9V12H8V8H12V9H14V6H13M12,12H11V14H13V13H14V11H12V12Z",h4="M9,10V16H15V10H19L12,3L5,10H9M12,5.8L14.2,8H13V14H11V8H9.8L12,5.8M19,18H5V20H19V18Z";const Fn=(t,e)=>{const i=t.__vccOpts||t;for(const[a,u]of e)i[a]=u;return i},i2={mdi:{size:24,viewbox:"0 0 24 24"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},f4={name:"icon",props:{type:String,path:{type:String,required:!0},size:{type:[String,Number],default:24},viewbox:String,flip:{type:String,validator:t=>["horizontal","vertical","both","none"].includes(t)},rotate:{type:Number,default:0}},computed:{styles(){return{"--sx":["both","horizontal"].includes(this.flip)?"-1":"1","--sy":["both","vertical"].includes(this.flip)?"-1":"1","--r":isNaN(this.rotate)?this.rotate:this.rotate+"deg"}},defaults(){return i2[this.type]||i2.default},sizeValue(){return this.size||this.defaults.size},viewboxValue(){return this.viewbox||this.defaults.viewbox}}},p4=["width","height","viewBox"],d4=["d"];function m4(t,e,i,a,u,f){return ut(),Yt("svg",{width:f.sizeValue,height:f.sizeValue,viewBox:f.viewboxValue,style:Gr(f.styles)},[At("path",{d:i.path},null,8,d4)],12,p4)}const Rn=Fn(f4,[["render",m4],["__scopeId","data-v-0fb36228"]]),g4={components:{SvgIcon:Rn},props:{height:{default:32},width:{default:32},loading:Boolean,active:Boolean,disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},path(){return{loading:Yb}}}},v4=["disabled"],y4={class:"map-control-button__content"};function _4(t,e,i,a,u,f){const o=Ha("SvgIcon");return ut(),Yt("button",er({class:"map-control-button",style:f.bindStyle,disabled:i.disabled},t.$attrs,{class:{"map-control-button-active":i.active,"map-control-button-disabled":i.disabled}}),[At("span",y4,[i.loading?(ut(),Se(o,{key:0,size:i.height*2/3,type:"mdi",path:f.path.loading,class:"spin"},null,8,["size","path"])):Hn(t.$slots,"default",{key:1},void 0,!0)])],16,v4)}const iM=Fn(g4,[["render",_4],["__scopeId","data-v-06662425"]]),x4={props:{},computed:{iconName(){return""}}};function b4(t,e,i,a,u,f){return ut(),Yt("i",{class:No(["map-icon mdi",f.iconName])},null,2)}const Kb=Fn(x4,[["render",b4],["__scopeId","data-v-d0a88ad0"]]),A4={components:{MapButton:iM,MapIcon:Kb},props:{items:{type:Array,default:()=>[]},row:Boolean,size:{type:[Number,String],default:32}},provide(){return{isGroup:!0,size:this.size}}};function w4(t,e,i,a,u,f){const o=Ha("MapIcon"),y=Ha("MapButton");return ut(),Yt("div",{class:No(["button-container button-group-container",{"button-group-row-container":i.row,"button-group-column-container":!i.row}]),style:Gr({width:i.row?null:i.size+"px",height:i.row?i.size+"px":null})},[At("div",{class:No(["button-group-sheet",{"button-group-sheet-column":!i.row}]),style:{"border-radius":"150px"}},[(ut(!0),Yt(Ai,null,Fo(i.items,(_,C)=>(ut(),Se(y,{key:C+""+_.titl,height:i.size,text:"",title:_.title,width:i.size,onClick:_.onClick},{default:Xt(()=>[Pt(o,null,{default:Xt(()=>[xo(vn(_.icon),1)]),_:2},1024)]),_:2},1032,["height","title","width","onClick"]))),128)),Hn(t.$slots,"default",{},void 0,!0)],2)],6)}const Vm=Fn(A4,[["render",w4],["__scopeId","data-v-a47987bf"]]),C4={components:{MapButton:iM,MapIcon:Kb},props:{icon:{type:[String,Boolean]},tooltip:String,title:String,loading:Boolean,size:{type:Number,default:32},active:Boolean,disabled:Boolean},inject:{isGroup:{default:!1},groupSize:{default:0,from:"size"}},computed:{}},I4={key:1,class:"button-container"},M4=["title"];function E4(t,e,i,a,u,f){const o=Ha("MapIcon"),y=Ha("MapButton");return f.isGroup?(ut(),Se(y,er({key:0},t.$attrs,{active:i.active,height:f.groupSize,title:i.tooltip||i.title,width:f.groupSize,disabled:i.disabled}),{default:Xt(()=>[Hn(t.$slots,"default",{},()=>[Pt(o,null,{default:Xt(()=>[xo(vn(i.icon),1)]),_:1})],!0)]),_:3},16,["active","height","title","width","disabled"])):(ut(),Yt("div",I4,[At("div",{title:i.tooltip||i.title},[Hn(t.$slots,"content",{},()=>[Pt(y,er(t.$attrs,{active:i.active,height:i.size,loading:i.loading,width:i.size,disabled:i.disabled}),{default:Xt(()=>[Hn(t.$slots,"default",{},()=>[Pt(o,null,{default:Xt(()=>[xo(vn(i.icon),1)]),_:1})],!0)]),_:3},16,["active","height","loading","width","disabled"])],!0)],8,M4)]))}const Ar=Fn(C4,[["render",E4],["__scopeId","data-v-da6cc99f"]]),S4={props:{src:{}},data:()=>({}),computed:{styleImage(){return{"background-image":`url(${this.src})`}}},methods:{}},T4=t=>(xh("data-v-52ab30fa"),t=t(),bh(),t),k4={class:"map-image"},P4=T4(()=>At("div",{class:"map-image__sizer",style:{"padding-bottom":"100%"}},null,-1)),L4={class:"map-image__content"};function D4(t,e,i,a,u,f){return ut(),Yt("div",k4,[P4,At("div",{class:"map-image__image",style:Gr(f.styleImage)},null,4),At("div",L4,[Hn(t.$slots,"default",{},void 0,!0)])])}const Jx=Fn(S4,[["render",D4],["__scopeId","data-v-52ab30fa"]]),R4={props:{height:{},width:{}},data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},z4=Nb('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1);function B4(t,e,i,a,u,f){return ut(),Yt("div",er({class:"card",style:f.cardStyle},t.$attrs),[At("div",null,[Hn(t.$slots,"default")]),z4],16)}const O4=Fn(R4,[["render",B4]]);function _d(t){return FC()?(fT(t),!0):!1}function F4(){const t=new Set,e=u=>{t.delete(u)};return{on:u=>{t.add(u);const f=()=>e(u);return _d(f),{off:f}},off:e,trigger:(...u)=>Promise.all(Array.from(t).map(f=>f(...u)))}}function Qb(t,e){const i=window;return i.$_hungpv_store||(i.$_hungpv_store={}),i.$_hungpv_store[t]?e=i.$_hungpv_store[t]:i.$_hungpv_store[t]=e,e}function bp(t,e){return i=>Object.keys(t).reduce((a,u)=>{const o=typeof t[u]=="object"&&t[u]!=null&&!Array.isArray(t[u])?t[u]:{type:t[u]};return i&&u in i?a[u]={...o,default:i[u]}:a[u]=o,e&&!a[u].source&&(a[u].source=e),a},{})}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function rM(t){return typeof t>"u"||t===null}function N4(t){return typeof t=="object"&&t!==null}function V4(t){return Array.isArray(t)?t:rM(t)?[]:[t]}function U4(t,e){var i,a,u,f;if(e)for(f=Object.keys(e),i=0,a=f.length;i<a;i+=1)u=f[i],t[u]=e[u];return t}function j4(t,e){var i="",a;for(a=0;a<e;a+=1)i+=t;return i}function H4(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var G4=rM,q4=N4,W4=V4,Z4=j4,$4=H4,Y4=U4,Jb={isNothing:G4,isObject:q4,toArray:W4,repeat:Z4,isNegativeZero:$4,extend:Y4};function oM(t,e){var i="",a=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(i+=`

`+t.mark.snippet),a+" "+i):a}function Ev(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=oM(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ev.prototype=Object.create(Error.prototype);Ev.prototype.constructor=Ev;Ev.prototype.toString=function(e){return this.name+": "+oM(this,e)};var ad=Ev,X4=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],K4=["scalar","sequence","mapping"];function Q4(t){var e={};return t!==null&&Object.keys(t).forEach(function(i){t[i].forEach(function(a){e[String(a)]=i})}),e}function J4(t,e){if(e=e||{},Object.keys(e).forEach(function(i){if(X4.indexOf(i)===-1)throw new ad('Unknown option "'+i+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(i){return i},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Q4(e.styleAliases||null),K4.indexOf(this.kind)===-1)throw new ad('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ws=J4;function r2(t,e){var i=[];return t[e].forEach(function(a){var u=i.length;i.forEach(function(f,o){f.tag===a.tag&&f.kind===a.kind&&f.multi===a.multi&&(u=o)}),i[u]=a}),i}function tP(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,i;function a(u){u.multi?(t.multi[u.kind].push(u),t.multi.fallback.push(u)):t[u.kind][u.tag]=t.fallback[u.tag]=u}for(e=0,i=arguments.length;e<i;e+=1)arguments[e].forEach(a);return t}function tb(t){return this.extend(t)}tb.prototype.extend=function(e){var i=[],a=[];if(e instanceof Ws)a.push(e);else if(Array.isArray(e))a=a.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(i=i.concat(e.implicit)),e.explicit&&(a=a.concat(e.explicit));else throw new ad("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(f){if(!(f instanceof Ws))throw new ad("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(f.loadKind&&f.loadKind!=="scalar")throw new ad("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(f.multi)throw new ad("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(f){if(!(f instanceof Ws))throw new ad("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var u=Object.create(tb.prototype);return u.implicit=(this.implicit||[]).concat(i),u.explicit=(this.explicit||[]).concat(a),u.compiledImplicit=r2(u,"implicit"),u.compiledExplicit=r2(u,"explicit"),u.compiledTypeMap=tP(u.compiledImplicit,u.compiledExplicit),u};var eP=tb,nP=new Ws("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),iP=new Ws("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),rP=new Ws("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),oP=new eP({explicit:[nP,iP,rP]});function aP(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function sP(){return null}function lP(t){return t===null}var uP=new Ws("tag:yaml.org,2002:null",{kind:"scalar",resolve:aP,construct:sP,predicate:lP,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function cP(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function hP(t){return t==="true"||t==="True"||t==="TRUE"}function fP(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var pP=new Ws("tag:yaml.org,2002:bool",{kind:"scalar",resolve:cP,construct:hP,predicate:fP,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function dP(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function mP(t){return 48<=t&&t<=55}function gP(t){return 48<=t&&t<=57}function vP(t){if(t===null)return!1;var e=t.length,i=0,a=!1,u;if(!e)return!1;if(u=t[i],(u==="-"||u==="+")&&(u=t[++i]),u==="0"){if(i+1===e)return!0;if(u=t[++i],u==="b"){for(i++;i<e;i++)if(u=t[i],u!=="_"){if(u!=="0"&&u!=="1")return!1;a=!0}return a&&u!=="_"}if(u==="x"){for(i++;i<e;i++)if(u=t[i],u!=="_"){if(!dP(t.charCodeAt(i)))return!1;a=!0}return a&&u!=="_"}if(u==="o"){for(i++;i<e;i++)if(u=t[i],u!=="_"){if(!mP(t.charCodeAt(i)))return!1;a=!0}return a&&u!=="_"}}if(u==="_")return!1;for(;i<e;i++)if(u=t[i],u!=="_"){if(!gP(t.charCodeAt(i)))return!1;a=!0}return!(!a||u==="_")}function yP(t){var e=t,i=1,a;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),a=e[0],(a==="-"||a==="+")&&(a==="-"&&(i=-1),e=e.slice(1),a=e[0]),e==="0")return 0;if(a==="0"){if(e[1]==="b")return i*parseInt(e.slice(2),2);if(e[1]==="x")return i*parseInt(e.slice(2),16);if(e[1]==="o")return i*parseInt(e.slice(2),8)}return i*parseInt(e,10)}function _P(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Jb.isNegativeZero(t)}var xP=new Ws("tag:yaml.org,2002:int",{kind:"scalar",resolve:vP,construct:yP,predicate:_P,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),bP=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function AP(t){return!(t===null||!bP.test(t)||t[t.length-1]==="_")}function wP(t){var e,i;return e=t.replace(/_/g,"").toLowerCase(),i=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:i*parseFloat(e,10)}var CP=/^[-+]?[0-9]+e/;function IP(t,e){var i;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Jb.isNegativeZero(t))return"-0.0";return i=t.toString(10),CP.test(i)?i.replace("e",".e"):i}function MP(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Jb.isNegativeZero(t))}var EP=new Ws("tag:yaml.org,2002:float",{kind:"scalar",resolve:AP,construct:wP,predicate:MP,represent:IP,defaultStyle:"lowercase"}),SP=oP.extend({implicit:[uP,pP,xP,EP]}),TP=SP,aM=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),sM=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function kP(t){return t===null?!1:aM.exec(t)!==null||sM.exec(t)!==null}function PP(t){var e,i,a,u,f,o,y,_=0,C=null,S,k,P;if(e=aM.exec(t),e===null&&(e=sM.exec(t)),e===null)throw new Error("Date resolve error");if(i=+e[1],a=+e[2]-1,u=+e[3],!e[4])return new Date(Date.UTC(i,a,u));if(f=+e[4],o=+e[5],y=+e[6],e[7]){for(_=e[7].slice(0,3);_.length<3;)_+="0";_=+_}return e[9]&&(S=+e[10],k=+(e[11]||0),C=(S*60+k)*6e4,e[9]==="-"&&(C=-C)),P=new Date(Date.UTC(i,a,u,f,o,y,_)),C&&P.setTime(P.getTime()-C),P}function LP(t){return t.toISOString()}var DP=new Ws("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:kP,construct:PP,instanceOf:Date,represent:LP});function RP(t){return t==="<<"||t===null}var zP=new Ws("tag:yaml.org,2002:merge",{kind:"scalar",resolve:RP}),tA=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function BP(t){if(t===null)return!1;var e,i,a=0,u=t.length,f=tA;for(i=0;i<u;i++)if(e=f.indexOf(t.charAt(i)),!(e>64)){if(e<0)return!1;a+=6}return a%8===0}function OP(t){var e,i,a=t.replace(/[\r\n=]/g,""),u=a.length,f=tA,o=0,y=[];for(e=0;e<u;e++)e%4===0&&e&&(y.push(o>>16&255),y.push(o>>8&255),y.push(o&255)),o=o<<6|f.indexOf(a.charAt(e));return i=u%4*6,i===0?(y.push(o>>16&255),y.push(o>>8&255),y.push(o&255)):i===18?(y.push(o>>10&255),y.push(o>>2&255)):i===12&&y.push(o>>4&255),new Uint8Array(y)}function FP(t){var e="",i=0,a,u,f=t.length,o=tA;for(a=0;a<f;a++)a%3===0&&a&&(e+=o[i>>18&63],e+=o[i>>12&63],e+=o[i>>6&63],e+=o[i&63]),i=(i<<8)+t[a];return u=f%3,u===0?(e+=o[i>>18&63],e+=o[i>>12&63],e+=o[i>>6&63],e+=o[i&63]):u===2?(e+=o[i>>10&63],e+=o[i>>4&63],e+=o[i<<2&63],e+=o[64]):u===1&&(e+=o[i>>2&63],e+=o[i<<4&63],e+=o[64],e+=o[64]),e}function NP(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var VP=new Ws("tag:yaml.org,2002:binary",{kind:"scalar",resolve:BP,construct:OP,predicate:NP,represent:FP}),UP=Object.prototype.hasOwnProperty,jP=Object.prototype.toString;function HP(t){if(t===null)return!0;var e=[],i,a,u,f,o,y=t;for(i=0,a=y.length;i<a;i+=1){if(u=y[i],o=!1,jP.call(u)!=="[object Object]")return!1;for(f in u)if(UP.call(u,f))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(f)===-1)e.push(f);else return!1}return!0}function GP(t){return t!==null?t:[]}var qP=new Ws("tag:yaml.org,2002:omap",{kind:"sequence",resolve:HP,construct:GP}),WP=Object.prototype.toString;function ZP(t){if(t===null)return!0;var e,i,a,u,f,o=t;for(f=new Array(o.length),e=0,i=o.length;e<i;e+=1){if(a=o[e],WP.call(a)!=="[object Object]"||(u=Object.keys(a),u.length!==1))return!1;f[e]=[u[0],a[u[0]]]}return!0}function $P(t){if(t===null)return[];var e,i,a,u,f,o=t;for(f=new Array(o.length),e=0,i=o.length;e<i;e+=1)a=o[e],u=Object.keys(a),f[e]=[u[0],a[u[0]]];return f}var YP=new Ws("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ZP,construct:$P}),XP=Object.prototype.hasOwnProperty;function KP(t){if(t===null)return!0;var e,i=t;for(e in i)if(XP.call(i,e)&&i[e]!==null)return!1;return!0}function QP(t){return t!==null?t:{}}var JP=new Ws("tag:yaml.org,2002:set",{kind:"mapping",resolve:KP,construct:QP});TP.extend({implicit:[DP,zP],explicit:[VP,qP,YP,JP]});function o2(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}var tL=new Array(256),eL=new Array(256);for(var dm=0;dm<256;dm++)tL[dm]=o2(dm)?1:0,eL[dm]=o2(dm);function Vc(t){return typeof t=="function"?t():W(t)}function eb(t){return JSON.parse(JSON.stringify(t))}const Zm=typeof window<"u"&&typeof document<"u",nL=t=>t!=null,iL=Object.prototype.toString,rL=t=>iL.call(t)==="[object Object]",T0=()=>{},oL=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),aL=sL();function sL(){var t,e;return Zm&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const lf=function(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))};function lM(t){return yd()}function lL(t){let e;function i(){return e||(e=t()),e}return i.reset=async()=>{const a=e;e=void 0,a&&await a},i}function uL(t,e){var f;if(typeof t=="number")return t+e;const i=((f=t.match(/^-?\d+\.?\d*/))==null?void 0:f[0])||"",a=t.slice(i.length),u=Number.parseFloat(i)+e;return Number.isNaN(u)?t:u+a}function cL(t,e){lM()&&vd(t,e)}function op(t){const e=Vc(t);return(e==null?void 0:e.$el)??e}function hL(t,e,i={}){const{immediate:a=!0}=i,u=Ke(!1);let f=null;function o(){f&&(clearTimeout(f),f=null)}function y(){u.value=!1,o()}function _(...C){o(),u.value=!0,f=setTimeout(()=>{u.value=!1,f=null,t(...C)},Vc(e))}return a&&(u.value=!0,Zm&&_()),_d(y),{isPending:b_(u),start:_,stop:y}}function uM(t,e=!0,i){lM()?Xl(t,i):e?t():sc(t)}const eA=Qb("map.queue",{pendingFunctions:{},pendingRemoveFunctions:{},mapIds:{}}),k0=eA.pendingFunctions,ux=eA.pendingRemoveFunctions,Pm=eA.mapIds;function xd(t,e,i){k0[t]=e,cM()}function cM(){for(const t in Pm)if(Object.prototype.hasOwnProperty.call(Pm,t)){const e=Pm[t];for(const i in k0)if(Object.prototype.hasOwnProperty.call(k0,i)&&!e[i]){const a=k0[i];a(t),e[i]=!0}}}function fL(t){Pm[t]={},cM()}function pL(t){for(const e in ux){const i=Pm[t];if(Object.prototype.hasOwnProperty.call(ux,e)&&!i[e]){const a=ux[e];a(t),i[e]=!0}}Pm[t]={}}const Rc=Qb("map.core",{state:{},getters:{},actions:{getMapStore(t){const e=Rc.state[t];if(e)return e},initMap(t,e){Rc.state[t]={map:e},fL(t)},removeMap(t){delete Rc.state[t],pL(t)},getMap(t,e){var a;const i=(a=Rc.state[t])==null?void 0:a.map;if(i)return e?e(i):i}}}),{state:dL,getters:IW,actions:cp}=Rc;function ff(t,e,i){const a=cp.getMapStore(t);if(a)return a[e]||(a[e]=i||{}),a[e]}function ia(t,e){const i=cp.getMapStore(t);if(i)return i[e]}Rc.actions.getMap;const of="crs",a2=[{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"},{name:"VN-2000",epsg:"4756",unit:"degree",proj4js:"+proj=longlat +ellps=WGS84 +towgs84=-191.90441429,-39.30318279,-111.45032835,-0.00928836,0.01975479,-0.00427372,0.252906278 +no_defs +type=crs"}];function mL(t){ff(t,of,yl({crs:"4326",items:a2.slice(),item:a2[0]}))}xd(of,mL);async function gL(t,e){const i=ia(t,of);i.items=e}const vL=t=>ia(t,of).items,hM=t=>ia(t,of).item,yL=t=>ia(t,of).crs;function _L(t,e){ia(t,of).crs=e,ia(t,of).item=ia(t,of).items.find(i=>i.epsg==e)}const nA=Object.freeze(Object.defineProperty({__proto__:null,getCrs:yL,getCrsItem:hM,getCrsItems:vL,setCrs:_L,setCrsItems:gL},Symbol.toStringTag,{value:"Module"}));function xL(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var pd=1,dd=2,Lm=3,bL=4,nb=5,s2=6378137,AL=6356752314e-3,l2=.0066943799901413165,sv=484813681109536e-20,Xe=Math.PI/2,wL=.16666666666666666,CL=.04722222222222222,IL=.022156084656084655,bn=1e-10,_s=.017453292519943295,dh=57.29577951308232,jr=Math.PI/4,Sv=Math.PI*2,da=3.14159265359,Kl={};Kl.greenwich=0;Kl.lisbon=-9.131906111111;Kl.paris=2.337229166667;Kl.bogota=-74.080916666667;Kl.madrid=-3.687938888889;Kl.rome=12.452333333333;Kl.bern=7.439583333333;Kl.jakarta=106.807719444444;Kl.ferro=-17.666666666667;Kl.brussels=4.367975;Kl.stockholm=18.058277777778;Kl.athens=23.7163375;Kl.oslo=10.722916666667;const ML={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var u2=/[\s_\-\/\(\)]/g;function mp(t,e){if(t[e])return t[e];for(var i=Object.keys(t),a=e.toLowerCase().replace(u2,""),u=-1,f,o;++u<i.length;)if(f=i[u],o=f.toLowerCase().replace(u2,""),o===a)return t[f]}function ib(t){var e={},i=t.split("+").map(function(y){return y.trim()}).filter(function(y){return y}).reduce(function(y,_){var C=_.split("=");return C.push(!0),y[C[0].toLowerCase()]=C[1],y},{}),a,u,f,o={proj:"projName",datum:"datumCode",rf:function(y){e.rf=parseFloat(y)},lat_0:function(y){e.lat0=y*_s},lat_1:function(y){e.lat1=y*_s},lat_2:function(y){e.lat2=y*_s},lat_ts:function(y){e.lat_ts=y*_s},lon_0:function(y){e.long0=y*_s},lon_1:function(y){e.long1=y*_s},lon_2:function(y){e.long2=y*_s},alpha:function(y){e.alpha=parseFloat(y)*_s},gamma:function(y){e.rectified_grid_angle=parseFloat(y)},lonc:function(y){e.longc=y*_s},x_0:function(y){e.x0=parseFloat(y)},y_0:function(y){e.y0=parseFloat(y)},k_0:function(y){e.k0=parseFloat(y)},k:function(y){e.k0=parseFloat(y)},a:function(y){e.a=parseFloat(y)},b:function(y){e.b=parseFloat(y)},r:function(y){e.a=e.b=parseFloat(y)},r_a:function(){e.R_A=!0},zone:function(y){e.zone=parseInt(y,10)},south:function(){e.utmSouth=!0},towgs84:function(y){e.datum_params=y.split(",").map(function(_){return parseFloat(_)})},to_meter:function(y){e.to_meter=parseFloat(y)},units:function(y){e.units=y;var _=mp(ML,y);_&&(e.to_meter=_.to_meter)},from_greenwich:function(y){e.from_greenwich=y*_s},pm:function(y){var _=mp(Kl,y);e.from_greenwich=(_||parseFloat(y))*_s},nadgrids:function(y){y==="@null"?e.datumCode="none":e.nadgrids=y},axis:function(y){var _="ewnsud";y.length===3&&_.indexOf(y.substr(0,1))!==-1&&_.indexOf(y.substr(1,1))!==-1&&_.indexOf(y.substr(2,1))!==-1&&(e.axis=y)},approx:function(){e.approx=!0}};for(a in i)u=i[a],a in o?(f=o[a],typeof f=="function"?f(u):e[f]=u):e[a]=u;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Tv=1,fM=2,pM=3,Q0=4,dM=5,iA=-1,EL=/\s/,SL=/[A-Za-z]/,TL=/[A-Za-z84_]/,D_=/[,\]]/,mM=/[\d\.E\-\+]/;function pf(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Tv}pf.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==Q0)for(;EL.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Tv:return this.neutral(t);case fM:return this.keyword(t);case Q0:return this.quoted(t);case dM:return this.afterquote(t);case pM:return this.number(t);case iA:return}};pf.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=Q0;return}if(D_.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};pf.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Tv;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Tv,this.currentObject=this.stack.pop(),this.currentObject||(this.state=iA);return}};pf.prototype.number=function(t){if(mM.test(t)){this.word+=t;return}if(D_.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};pf.prototype.quoted=function(t){if(t==='"'){this.state=dM;return}this.word+=t};pf.prototype.keyword=function(t){if(TL.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Tv;return}if(D_.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};pf.prototype.neutral=function(t){if(SL.test(t)){this.word=t,this.state=fM;return}if(t==='"'){this.word="",this.state=Q0;return}if(mM.test(t)){this.word=t,this.state=pM;return}if(D_.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};pf.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===iA)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function kL(t){var e=new pf(t);return e.output()}function c2(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var a=e?{}:t,u=i.reduce(function(f,o){return wm(o,f),f},a);e&&(t[e]=u)}function wm(t,e){if(!Array.isArray(t)){e[t]=!0;return}var i=t.shift();if(i==="PARAMETER"&&(i=t.shift()),t.length===1){if(Array.isArray(t[0])){e[i]={},wm(t[0],e[i]);return}e[i]=t[0];return}if(!t.length){e[i]=!0;return}if(i==="TOWGS84"){e[i]=t;return}if(i==="AXIS"){i in e||(e[i]=[]),e[i].push(t);return}Array.isArray(i)||(e[i]={});var a;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[i]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&wm(t[2],e[i]);return;case"SPHEROID":case"ELLIPSOID":e[i]={name:t[0],a:t[1],rf:t[2]},t.length===4&&wm(t[3],e[i]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],c2(e,i,t);return;default:for(a=-1;++a<t.length;)if(!Array.isArray(t[a]))return wm(t,e[i]);return c2(e,i,t)}}var PL=.017453292519943295;function LL(t,e){var i=e[0],a=e[1];!(i in t)&&a in t&&(t[i]=t[a],e.length===3&&(t[i]=e[2](t[i])))}function ch(t){return t*PL}function DL(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,a=t.AXIS.length;i<a;++i){var u=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];u[0].indexOf("north")!==-1||(u[0]==="y"||u[0]==="lat")&&u[1]==="north"?e+="n":u[0].indexOf("south")!==-1||(u[0]==="y"||u[0]==="lat")&&u[1]==="south"?e+="s":u[0].indexOf("east")!==-1||(u[0]==="x"||u[0]==="lon")&&u[1]==="east"?e+="e":(u[0].indexOf("west")!==-1||(u[0]==="x"||u[0]==="lon")&&u[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var f=t.GEOGCS;t.type==="GEOGCS"&&(f=t),f&&(f.DATUM?t.datumCode=f.DATUM.name.toLowerCase():t.datumCode=f.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),f.DATUM&&f.DATUM.SPHEROID&&(t.ellps=f.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=f.DATUM.SPHEROID.a,t.rf=parseFloat(f.DATUM.SPHEROID.rf,10)),f.DATUM&&f.DATUM.TOWGS84&&(t.datum_params=f.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function o(C){var S=t.to_meter||1;return C*S}var y=function(C){return LL(t,C)},_=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",ch],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",ch],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",ch],["lat0","latitude_of_origin",ch],["lat0","standard_parallel_1",ch],["lat1","standard_parallel_1",ch],["lat2","standard_parallel_2",ch],["azimuth","Azimuth"],["alpha","azimuth",ch],["srsCode","name"]];_.forEach(y),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=ch(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=ch(t.lat0>0?90:-90))}function gM(t){var e=kL(t),i=e.shift(),a=e.shift();e.unshift(["name",a]),e.unshift(["type",i]);var u={};return wm(e,u),DL(u),u}function dl(t){var e=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?dl[t]=ib(arguments[1]):dl[t]=gM(arguments[1]):dl[t]=i}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(a){Array.isArray(a)?dl.apply(e,a):dl(a)});if(typeof t=="string"){if(t in dl)return dl[t]}else"EPSG"in t?dl["EPSG:"+t.EPSG]=t:"ESRI"in t?dl["ESRI:"+t.ESRI]=t:"IAU2000"in t?dl["IAU2000:"+t.IAU2000]=t:console.log(t);return}}xL(dl);function RL(t){return typeof t=="string"}function zL(t){return t in dl}var BL=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function OL(t){return BL.some(function(e){return t.indexOf(e)>-1})}var FL=["3857","900913","3785","102113"];function NL(t){var e=mp(t,"authority");if(e){var i=mp(e,"epsg");return i&&FL.indexOf(i)>-1}}function VL(t){var e=mp(t,"extension");if(e)return mp(e,"proj4")}function UL(t){return t[0]==="+"}function jL(t){if(RL(t)){if(zL(t))return dl[t];if(OL(t)){var e=gM(t);if(NL(e))return dl["EPSG:3857"];var i=VL(e);return i?ib(i):e}if(UL(t))return ib(t)}else return t}function h2(t,e){t=t||{};var i,a;if(!e)return t;for(a in e)i=e[a],i!==void 0&&(t[a]=i);return t}function yh(t,e,i){var a=t*e;return i/Math.sqrt(1-a*a)}function Vv(t){return t<0?-1:1}function kn(t){return Math.abs(t)<=da?t:t-Vv(t)*Sv}function Oc(t,e,i){var a=t*i,u=.5*t;return a=Math.pow((1-a)/(1+a),u),Math.tan(.5*(Xe-e))/a}function kv(t,e){for(var i=.5*t,a,u,f=Xe-2*Math.atan(e),o=0;o<=15;o++)if(a=t*Math.sin(f),u=Xe-2*Math.atan(e*Math.pow((1-a)/(1+a),i))-f,f+=u,Math.abs(u)<=1e-10)return f;return-9999}function HL(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=yh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function GL(t){var e=t.x,i=t.y;if(i*dh>90&&i*dh<-90&&e*dh>180&&e*dh<-180)return null;var a,u;if(Math.abs(Math.abs(i)-Xe)<=bn)return null;if(this.sphere)a=this.x0+this.a*this.k0*kn(e-this.long0),u=this.y0+this.a*this.k0*Math.log(Math.tan(jr+.5*i));else{var f=Math.sin(i),o=Oc(this.e,i,f);a=this.x0+this.a*this.k0*kn(e-this.long0),u=this.y0-this.a*this.k0*Math.log(o)}return t.x=a,t.y=u,t}function qL(t){var e=t.x-this.x0,i=t.y-this.y0,a,u;if(this.sphere)u=Xe-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var f=Math.exp(-i/(this.a*this.k0));if(u=kv(this.e,f),u===-9999)return null}return a=kn(this.long0+e/(this.a*this.k0)),t.x=a,t.y=u,t}var WL=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const ZL={init:HL,forward:GL,inverse:qL,names:WL};function $L(){}function f2(t){return t}var YL=["longlat","identity"];const XL={init:$L,forward:f2,inverse:f2,names:YL};var KL=[ZL,XL],P0={},J0=[];function vM(t,e){var i=J0.length;return t.names?(J0[i]=t,t.names.forEach(function(a){P0[a.toLowerCase()]=i}),this):(console.log(e),!0)}function QL(t){if(!t)return!1;var e=t.toLowerCase();if(typeof P0[e]<"u"&&J0[P0[e]])return J0[P0[e]]}function JL(){KL.forEach(vM)}const t6={start:JL,add:vM,get:QL};var ki={};ki.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};ki.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};ki.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};ki.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};ki.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};ki.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};ki.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};ki.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};ki.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};ki.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};ki.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};ki.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};ki.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};ki.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};ki.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};ki.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};ki.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};ki.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};ki.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};ki.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};ki.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};ki.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};ki.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};ki.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};ki.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};ki.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};ki.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};ki.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};ki.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};ki.hough={a:6378270,rf:297,ellipseName:"Hough"};ki.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};ki.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};ki.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};ki.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};ki.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};ki.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};ki.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};ki.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};ki.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};ki.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};ki.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};ki.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var e6=ki.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ki.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function n6(t,e,i,a){var u=t*t,f=e*e,o=(u-f)/u,y=0;a?(t*=1-o*(wL+o*(CL+o*IL)),u=t*t,o=0):y=Math.sqrt(o);var _=(u-f)/f;return{es:o,e:y,ep2:_}}function i6(t,e,i,a,u){if(!t){var f=mp(ki,a);f||(f=e6),t=f.a,e=f.b,i=f.rf}return i&&!e&&(e=(1-1/i)*t),(i===0||Math.abs(t-e)<bn)&&(u=!0,e=t),{a:t,b:e,rf:i,sphere:u}}var qa={};qa.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};qa.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};qa.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};qa.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};qa.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};qa.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};qa.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};qa.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};qa.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};qa.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};qa.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};qa.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};qa.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};qa.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};qa.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};qa.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};qa.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};qa.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function r6(t,e,i,a,u,f,o){var y={};return t===void 0||t==="none"?y.datum_type=nb:y.datum_type=bL,e&&(y.datum_params=e.map(parseFloat),(y.datum_params[0]!==0||y.datum_params[1]!==0||y.datum_params[2]!==0)&&(y.datum_type=pd),y.datum_params.length>3&&(y.datum_params[3]!==0||y.datum_params[4]!==0||y.datum_params[5]!==0||y.datum_params[6]!==0)&&(y.datum_type=dd,y.datum_params[3]*=sv,y.datum_params[4]*=sv,y.datum_params[5]*=sv,y.datum_params[6]=y.datum_params[6]/1e6+1)),o&&(y.datum_type=Lm,y.grids=o),y.a=i,y.b=a,y.es=u,y.ep2=f,y}var yM={};function o6(t,e){var i=new DataView(e),a=l6(i),u=u6(i,a),f=c6(i,u,a),o={header:u,subgrids:f};return yM[t]=o,o}function a6(t){if(t===void 0)return null;var e=t.split(",");return e.map(s6)}function s6(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:yM[t]||null,isNull:!1}}function Cm(t){return t/3600*Math.PI/180}function l6(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function u6(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:rb(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function rb(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function c6(t,e,i){for(var a=176,u=[],f=0;f<e.nSubgrids;f++){var o=f6(t,a,i),y=p6(t,a,o,i),_=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),C=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);u.push({ll:[Cm(o.lowerLongitude),Cm(o.lowerLatitude)],del:[Cm(o.longitudeInterval),Cm(o.latitudeInterval)],lim:[_,C],count:o.gridNodeCount,cvs:h6(y)}),a+=176+o.gridNodeCount*16}return u}function h6(t){return t.map(function(e){return[Cm(e.longitudeShift),Cm(e.latitudeShift)]})}function f6(t,e,i){return{name:rb(t,e+8,e+16).trim(),parent:rb(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function p6(t,e,i,a){for(var u=e+176,f=16,o=[],y=0;y<i.gridNodeCount;y++){var _={latitudeShift:t.getFloat32(u+y*f,a),longitudeShift:t.getFloat32(u+y*f+4,a),latitudeAccuracy:t.getFloat32(u+y*f+8,a),longitudeAccuracy:t.getFloat32(u+y*f+12,a)};o.push(_)}return o}function mh(t,e){if(!(this instanceof mh))return new mh(t);e=e||function(C){if(C)throw C};var i=jL(t);if(typeof i!="object"){e(t);return}var a=mh.projections.get(i.projName);if(!a){e(t);return}if(i.datumCode&&i.datumCode!=="none"){var u=mp(qa,i.datumCode);u&&(i.datum_params=i.datum_params||(u.towgs84?u.towgs84.split(","):null),i.ellps=u.ellipse,i.datumName=u.datumName?u.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var f=i6(i.a,i.b,i.rf,i.ellps,i.sphere),o=n6(f.a,f.b,f.rf,i.R_A),y=a6(i.nadgrids),_=i.datum||r6(i.datumCode,i.datum_params,f.a,f.b,o.es,o.ep2,y);h2(this,i),h2(this,a),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=_,this.init(),e(null,this)}mh.projections=t6;mh.projections.start();function d6(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===pd?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===dd?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function _M(t,e,i){var a=t.x,u=t.y,f=t.z?t.z:0,o,y,_,C;if(u<-Xe&&u>-1.001*Xe)u=-Xe;else if(u>Xe&&u<1.001*Xe)u=Xe;else{if(u<-Xe)return{x:-1/0,y:-1/0,z:t.z};if(u>Xe)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),y=Math.sin(u),C=Math.cos(u),_=y*y,o=i/Math.sqrt(1-e*_),{x:(o+f)*C*Math.cos(a),y:(o+f)*C*Math.sin(a),z:(o*(1-e)+f)*y}}function xM(t,e,i,a){var u=1e-12,f=u*u,o=30,y,_,C,S,k,P,B,G,j,X,pt,J,nt,ft=t.x,Lt=t.y,xt=t.z?t.z:0,Mt,Ht,jt;if(y=Math.sqrt(ft*ft+Lt*Lt),_=Math.sqrt(ft*ft+Lt*Lt+xt*xt),y/i<u){if(Mt=0,_/i<u)return Ht=Xe,jt=-a,{x:t.x,y:t.y,z:t.z}}else Mt=Math.atan2(Lt,ft);C=xt/_,S=y/_,k=1/Math.sqrt(1-e*(2-e)*S*S),G=S*(1-e)*k,j=C*k,nt=0;do nt++,B=i/Math.sqrt(1-e*j*j),jt=y*G+xt*j-B*(1-e*j*j),P=e*B/(B+jt),k=1/Math.sqrt(1-P*(2-P)*S*S),X=S*(1-P)*k,pt=C*k,J=pt*G-X*j,G=X,j=pt;while(J*J>f&&nt<o);return Ht=Math.atan(pt/Math.abs(X)),{x:Mt,y:Ht,z:jt}}function m6(t,e,i){if(e===pd)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(e===dd){var a=i[0],u=i[1],f=i[2],o=i[3],y=i[4],_=i[5],C=i[6];return{x:C*(t.x-_*t.y+y*t.z)+a,y:C*(_*t.x+t.y-o*t.z)+u,z:C*(-y*t.x+o*t.y+t.z)+f}}}function g6(t,e,i){if(e===pd)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(e===dd){var a=i[0],u=i[1],f=i[2],o=i[3],y=i[4],_=i[5],C=i[6],S=(t.x-a)/C,k=(t.y-u)/C,P=(t.z-f)/C;return{x:S+_*k-y*P,y:-_*S+k+o*P,z:y*S-o*k+P}}}function m0(t){return t===pd||t===dd}function v6(t,e,i){if(d6(t,e)||t.datum_type===nb||e.datum_type===nb)return i;var a=t.a,u=t.es;if(t.datum_type===Lm){var f=p2(t,!1,i);if(f!==0)return;a=s2,u=l2}var o=e.a,y=e.b,_=e.es;if(e.datum_type===Lm&&(o=s2,y=AL,_=l2),u===_&&a===o&&!m0(t.datum_type)&&!m0(e.datum_type))return i;if(i=_M(i,u,a),m0(t.datum_type)&&(i=m6(i,t.datum_type,t.datum_params)),m0(e.datum_type)&&(i=g6(i,e.datum_type,e.datum_params)),i=xM(i,_,o,y),e.datum_type===Lm){var C=p2(e,!0,i);if(C!==0)return}return i}function p2(t,e,i){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-i.x,y:i.y},u={x:Number.NaN,y:Number.NaN},f=[];t:for(var o=0;o<t.grids.length;o++){var y=t.grids[o];if(f.push(y.name),y.isNull){u=a;break}if(y.mandatory,y.grid===null){if(y.mandatory)return console.log("Unable to find mandatory grid '"+y.name+"'"),-1;continue}for(var _=y.grid.subgrids,C=0,S=_.length;C<S;C++){var k=_[C],P=(Math.abs(k.del[1])+Math.abs(k.del[0]))/1e4,B=k.ll[0]-P,G=k.ll[1]-P,j=k.ll[0]+(k.lim[0]-1)*k.del[0]+P,X=k.ll[1]+(k.lim[1]-1)*k.del[1]+P;if(!(G>a.y||B>a.x||X<a.y||j<a.x)&&(u=y6(a,e,k),!isNaN(u.x)))break t}}return isNaN(u.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*dh+" "+a.y*dh+" tried: '"+f+"'"),-1):(i.x=-u.x,i.y=u.y,0)}function y6(t,e,i){var a={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return a;var u={x:t.x,y:t.y};u.x-=i.ll[0],u.y-=i.ll[1],u.x=kn(u.x-Math.PI)+Math.PI;var f=d2(u,i);if(e){if(isNaN(f.x))return a;f.x=u.x-f.x,f.y=u.y-f.y;var o=9,y=1e-12,_,C;do{if(C=d2(f,i),isNaN(C.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}_={x:u.x-(C.x+f.x),y:u.y-(C.y+f.y)},f.x+=_.x,f.y+=_.y}while(o--&&Math.abs(_.x)>y&&Math.abs(_.y)>y);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=kn(f.x+i.ll[0]),a.y=f.y+i.ll[1]}else isNaN(f.x)||(a.x=t.x+f.x,a.y=t.y+f.y);return a}function d2(t,e){var i={x:t.x/e.del[0],y:t.y/e.del[1]},a={x:Math.floor(i.x),y:Math.floor(i.y)},u={x:i.x-1*a.x,y:i.y-1*a.y},f={x:Number.NaN,y:Number.NaN},o;if(a.x<0||a.x>=e.lim[0]||a.y<0||a.y>=e.lim[1])return f;o=a.y*e.lim[0]+a.x;var y={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var _={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var C={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var S={x:e.cvs[o][0],y:e.cvs[o][1]},k=u.x*u.y,P=u.x*(1-u.y),B=(1-u.x)*(1-u.y),G=(1-u.x)*u.y;return f.x=B*y.x+P*_.x+G*S.x+k*C.x,f.y=B*y.y+P*_.y+G*S.y+k*C.y,f}function m2(t,e,i){var a=i.x,u=i.y,f=i.z||0,o,y,_,C={};for(_=0;_<3;_++)if(!(e&&_===2&&i.z===void 0))switch(_===0?(o=a,"ew".indexOf(t.axis[_])!==-1?y="x":y="y"):_===1?(o=u,"ns".indexOf(t.axis[_])!==-1?y="y":y="x"):(o=f,y="z"),t.axis[_]){case"e":C[y]=o;break;case"w":C[y]=-o;break;case"n":C[y]=o;break;case"s":C[y]=-o;break;case"u":i[y]!==void 0&&(C.z=o);break;case"d":i[y]!==void 0&&(C.z=-o);break;default:return null}return C}function bM(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function _6(t){g2(t.x),g2(t.y)}function g2(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function x6(t,e){return(t.datum.datum_type===pd||t.datum.datum_type===dd||t.datum.datum_type===Lm)&&e.datumCode!=="WGS84"||(e.datum.datum_type===pd||e.datum.datum_type===dd||e.datum.datum_type===Lm)&&t.datumCode!=="WGS84"}function t_(t,e,i,a){var u;Array.isArray(i)?i=bM(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var f=i.z!==void 0;if(_6(i),t.datum&&e.datum&&x6(t,e)&&(u=new mh("WGS84"),i=t_(t,u,i,a),t=u),a&&t.axis!=="enu"&&(i=m2(t,!1,i)),t.projName==="longlat")i={x:i.x*_s,y:i.y*_s,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),i=t.inverse(i),!i)return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=v6(t.datum,e.datum,i),!!i)return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),e.projName==="longlat"?i={x:i.x*dh,y:i.y*dh,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),a&&e.axis!=="enu"?m2(e,!0,i):(i&&!f&&delete i.z,i)}var v2=mh("WGS84");function cx(t,e,i,a){var u,f,o;return Array.isArray(i)?(u=t_(t,e,i,a)||{x:NaN,y:NaN},i.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof u.z=="number"?[u.x,u.y,u.z].concat(i.splice(3)):[u.x,u.y,i[2]].concat(i.splice(3)):[u.x,u.y].concat(i.splice(2)):[u.x,u.y]):(f=t_(t,e,i,a),o=Object.keys(i),o.length===2||o.forEach(function(y){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(y==="x"||y==="y"||y==="z")return}else if(y==="x"||y==="y")return;f[y]=i[y]}),f)}function y2(t){return t instanceof mh?t:t.oProj?t.oProj:mh(t)}function bu(t,e,i){t=y2(t);var a=!1,u;return typeof e>"u"?(e=t,t=v2,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(i=e,e=t,t=v2,a=!0),e=y2(e),i?cx(t,e,i):(u={forward:function(f,o){return cx(t,e,f,o)},inverse:function(f,o){return cx(e,t,f,o)}},a&&(u.oProj=e),u)}var _2=6,AM="AJSAJS",wM="AFAFAF",Im=65,Wl=73,Ju=79,Hg=86,Gg=90;const b6={forward:CM,inverse:A6,toPoint:IM};function CM(t,e){return e=e||5,I6(w6({lat:t[1],lon:t[0]}),e)}function A6(t){var e=rA(EM(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function IM(t){var e=rA(EM(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function hx(t){return t*(Math.PI/180)}function x2(t){return 180*(t/Math.PI)}function w6(t){var e=t.lat,i=t.lon,a=6378137,u=.00669438,f=.9996,o,y,_,C,S,k,P,B=hx(e),G=hx(i),j,X;X=Math.floor((i+180)/6)+1,i===180&&(X=60),e>=56&&e<64&&i>=3&&i<12&&(X=32),e>=72&&e<84&&(i>=0&&i<9?X=31:i>=9&&i<21?X=33:i>=21&&i<33?X=35:i>=33&&i<42&&(X=37)),o=(X-1)*6-180+3,j=hx(o),y=u/(1-u),_=a/Math.sqrt(1-u*Math.sin(B)*Math.sin(B)),C=Math.tan(B)*Math.tan(B),S=y*Math.cos(B)*Math.cos(B),k=Math.cos(B)*(G-j),P=a*((1-u/4-3*u*u/64-5*u*u*u/256)*B-(3*u/8+3*u*u/32+45*u*u*u/1024)*Math.sin(2*B)+(15*u*u/256+45*u*u*u/1024)*Math.sin(4*B)-35*u*u*u/3072*Math.sin(6*B));var pt=f*_*(k+(1-C+S)*k*k*k/6+(5-18*C+C*C+72*S-58*y)*k*k*k*k*k/120)+5e5,J=f*(P+_*Math.tan(B)*(k*k/2+(5-C+9*S+4*S*S)*k*k*k*k/24+(61-58*C+C*C+600*S-330*y)*k*k*k*k*k*k/720));return e<0&&(J+=1e7),{northing:Math.round(J),easting:Math.round(pt),zoneNumber:X,zoneLetter:C6(e)}}function rA(t){var e=t.northing,i=t.easting,a=t.zoneLetter,u=t.zoneNumber;if(u<0||u>60)return null;var f=.9996,o=6378137,y=.00669438,_,C=(1-Math.sqrt(1-y))/(1+Math.sqrt(1-y)),S,k,P,B,G,j,X,pt,J,nt=i-5e5,ft=e;a<"N"&&(ft-=1e7),X=(u-1)*6-180+3,_=y/(1-y),j=ft/f,pt=j/(o*(1-y/4-3*y*y/64-5*y*y*y/256)),J=pt+(3*C/2-27*C*C*C/32)*Math.sin(2*pt)+(21*C*C/16-55*C*C*C*C/32)*Math.sin(4*pt)+151*C*C*C/96*Math.sin(6*pt),S=o/Math.sqrt(1-y*Math.sin(J)*Math.sin(J)),k=Math.tan(J)*Math.tan(J),P=_*Math.cos(J)*Math.cos(J),B=o*(1-y)/Math.pow(1-y*Math.sin(J)*Math.sin(J),1.5),G=nt/(S*f);var Lt=J-S*Math.tan(J)/B*(G*G/2-(5+3*k+10*P-4*P*P-9*_)*G*G*G*G/24+(61+90*k+298*P+45*k*k-252*_-3*P*P)*G*G*G*G*G*G/720);Lt=x2(Lt);var xt=(G-(1+2*k+P)*G*G*G/6+(5-2*P+28*k-3*P*P+8*_+24*k*k)*G*G*G*G*G/120)/Math.cos(J);xt=X+x2(xt);var Mt;if(t.accuracy){var Ht=rA({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});Mt={top:Ht.lat,right:Ht.lon,bottom:Lt,left:xt}}else Mt={lat:Lt,lon:xt};return Mt}function C6(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function I6(t,e){var i="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+M6(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,e)+a.substr(a.length-5,e)}function M6(t,e,i){var a=MM(i),u=Math.floor(t/1e5),f=Math.floor(e/1e5)%20;return E6(u,f,a)}function MM(t){var e=t%_2;return e===0&&(e=_2),e}function E6(t,e,i){var a=i-1,u=AM.charCodeAt(a),f=wM.charCodeAt(a),o=u+t-1,y=f+e,_=!1;o>Gg&&(o=o-Gg+Im-1,_=!0),(o===Wl||u<Wl&&o>Wl||(o>Wl||u<Wl)&&_)&&o++,(o===Ju||u<Ju&&o>Ju||(o>Ju||u<Ju)&&_)&&(o++,o===Wl&&o++),o>Gg&&(o=o-Gg+Im-1),y>Hg?(y=y-Hg+Im-1,_=!0):_=!1,(y===Wl||f<Wl&&y>Wl||(y>Wl||f<Wl)&&_)&&y++,(y===Ju||f<Ju&&y>Ju||(y>Ju||f<Ju)&&_)&&(y++,y===Wl&&y++),y>Hg&&(y=y-Hg+Im-1);var C=String.fromCharCode(o)+String.fromCharCode(y);return C}function EM(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,i=null,a="",u,f=0;!/[A-Z]/.test(u=t.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+t;a+=u,f++}var o=parseInt(a,10);if(f===0||f+3>e)throw"MGRSPoint bad conversion from: "+t;var y=t.charAt(f++);if(y<="A"||y==="B"||y==="Y"||y>="Z"||y==="I"||y==="O")throw"MGRSPoint zone letter "+y+" not handled: "+t;i=t.substring(f,f+=2);for(var _=MM(o),C=S6(i.charAt(0),_),S=T6(i.charAt(1),_);S<k6(y);)S+=2e6;var k=e-f;if(k%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var P=k/2,B=0,G=0,j,X,pt,J,nt;return P>0&&(j=1e5/Math.pow(10,P),X=t.substring(f,f+P),B=parseFloat(X)*j,pt=t.substring(f+P),G=parseFloat(pt)*j),J=B+C,nt=G+S,{easting:J,northing:nt,zoneLetter:y,zoneNumber:o,accuracy:j}}function S6(t,e){for(var i=AM.charCodeAt(e-1),a=1e5,u=!1;i!==t.charCodeAt(0);){if(i++,i===Wl&&i++,i===Ju&&i++,i>Gg){if(u)throw"Bad character: "+t;i=Im,u=!0}a+=1e5}return a}function T6(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=wM.charCodeAt(e-1),a=0,u=!1;i!==t.charCodeAt(0);){if(i++,i===Wl&&i++,i===Ju&&i++,i>Hg){if(u)throw"Bad character: "+t;i=Im,u=!0}a+=1e5}return a}function k6(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Um(t,e,i){if(!(this instanceof Um))return new Um(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Um.fromMGRS=function(t){return new Um(IM(t))};Um.prototype.toMGRS=function(t){return CM([this.x,this.y],t)};var P6=1,L6=.25,b2=.046875,A2=.01953125,w2=.01068115234375,D6=.75,R6=.46875,z6=.013020833333333334,B6=.007120768229166667,O6=.3645833333333333,F6=.005696614583333333,N6=.3076171875;function SM(t){var e=[];e[0]=P6-t*(L6+t*(b2+t*(A2+t*w2))),e[1]=t*(D6-t*(b2+t*(A2+t*w2)));var i=t*t;return e[2]=i*(R6-t*(z6+t*B6)),i*=t,e[3]=i*(O6-t*F6),e[4]=i*t*N6,e}function R_(t,e,i,a){return i*=e,e*=e,a[0]*t-i*(a[1]+e*(a[2]+e*(a[3]+e*a[4])))}var V6=20;function TM(t,e,i){for(var a=1/(1-e),u=t,f=V6;f;--f){var o=Math.sin(u),y=1-e*o*o;if(y=(R_(u,o,Math.cos(u),i)-t)*(y*Math.sqrt(y))*a,u-=y,Math.abs(y)<bn)return u}return u}function U6(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=SM(this.es),this.ml0=R_(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function j6(t){var e=t.x,i=t.y,a=kn(e-this.long0),u,f,o,y=Math.sin(i),_=Math.cos(i);if(this.es){var S=_*a,k=Math.pow(S,2),P=this.ep2*Math.pow(_,2),B=Math.pow(P,2),G=Math.abs(_)>bn?Math.tan(i):0,j=Math.pow(G,2),X=Math.pow(j,2);u=1-this.es*Math.pow(y,2),S=S/Math.sqrt(u);var pt=R_(i,y,_,this.en);f=this.a*(this.k0*S*(1+k/6*(1-j+P+k/20*(5-18*j+X+14*P-58*j*P+k/42*(61+179*X-X*j-479*j)))))+this.x0,o=this.a*(this.k0*(pt-this.ml0+y*a*S/2*(1+k/12*(5-j+9*P+4*B+k/30*(61+X-58*j+270*P-330*j*P+k/56*(1385+543*X-X*j-3111*j))))))+this.y0}else{var C=_*Math.sin(a);if(Math.abs(Math.abs(C)-1)<bn)return 93;if(f=.5*this.a*this.k0*Math.log((1+C)/(1-C))+this.x0,o=_*Math.cos(a)/Math.sqrt(1-Math.pow(C,2)),C=Math.abs(o),C>=1){if(C-1>bn)return 93;o=0}else o=Math.acos(o);i<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=f,t.y=o,t}function H6(t){var e,i,a,u,f=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,i=TM(e,this.es,this.en),Math.abs(i)<Xe){var k=Math.sin(i),P=Math.cos(i),B=Math.abs(P)>bn?Math.tan(i):0,G=this.ep2*Math.pow(P,2),j=Math.pow(G,2),X=Math.pow(B,2),pt=Math.pow(X,2);e=1-this.es*Math.pow(k,2);var J=f*Math.sqrt(e)/this.k0,nt=Math.pow(J,2);e=e*B,a=i-e*nt/(1-this.es)*.5*(1-nt/12*(5+3*X-9*G*X+G-4*j-nt/30*(61+90*X-252*G*X+45*pt+46*G-nt/56*(1385+3633*X+4095*pt+1574*pt*X)))),u=kn(this.long0+J*(1-nt/6*(1+2*X+G-nt/20*(5+28*X+24*pt+8*G*X+6*G-nt/42*(61+662*X+1320*pt+720*pt*X))))/P)}else a=Xe*Vv(o),u=0;else{var y=Math.exp(f/this.k0),_=.5*(y-1/y),C=this.lat0+o/this.k0,S=Math.cos(C);e=Math.sqrt((1-Math.pow(S,2))/(1+Math.pow(_,2))),a=Math.asin(e),o<0&&(a=-a),_===0&&S===0?u=0:u=kn(Math.atan2(_,S)+this.long0)}return t.x=u,t.y=a,t}var G6=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const L0={init:U6,forward:j6,inverse:H6,names:G6};function kM(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function ec(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),a=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(a,2))}function q6(t){var e=1+t,i=e-1;return i===0?t:t*Math.log(e)/i}function W6(t){var e=Math.abs(t);return e=q6(e*(1+e/(ec(1,e)+1))),t<0?-e:e}function oA(t,e){for(var i=2*Math.cos(2*e),a=t.length-1,u=t[a],f=0,o;--a>=0;)o=-f+i*u+t[a],f=u,u=o;return e+o*Math.sin(2*e)}function Z6(t,e){for(var i=2*Math.cos(e),a=t.length-1,u=t[a],f=0,o;--a>=0;)o=-f+i*u+t[a],f=u,u=o;return Math.sin(e)*o}function $6(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function PM(t,e,i){for(var a=Math.sin(e),u=Math.cos(e),f=kM(i),o=$6(i),y=2*u*o,_=-2*a*f,C=t.length-1,S=t[C],k=0,P=0,B=0,G,j;--C>=0;)G=P,j=k,P=S,k=B,S=-G+y*P-_*k+t[C],B=-j+_*P+y*k;return y=a*o,_=u*f,[y*S-_*B,y*B+_*S]}function Y6(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(L0.init.apply(this),this.forward=L0.forward,this.inverse=L0.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),i=i*e,this.cgb[1]=i*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i=i*e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),i=i*e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(-12/5+e*(-24832/14175))),i=i*e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i=i*e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),i=i*e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i=i*e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i=i*e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i=i*e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var a=oA(this.cbg,this.lat0);this.Zb=-this.Qn*(a+Z6(this.gtu,2*a))}function X6(t){var e=kn(t.x-this.long0),i=t.y;i=oA(this.cbg,i);var a=Math.sin(i),u=Math.cos(i),f=Math.sin(e),o=Math.cos(e);i=Math.atan2(a,o*u),e=Math.atan2(f*u,ec(a,u*o)),e=W6(Math.tan(e));var y=PM(this.gtu,2*i,2*e);i=i+y[0],e=e+y[1];var _,C;return Math.abs(e)<=2.623395162778?(_=this.a*(this.Qn*e)+this.x0,C=this.a*(this.Qn*i+this.Zb)+this.y0):(_=1/0,C=1/0),t.x=_,t.y=C,t}function K6(t){var e=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,e=e/this.Qn;var a,u;if(Math.abs(e)<=2.623395162778){var f=PM(this.utg,2*i,2*e);i=i+f[0],e=e+f[1],e=Math.atan(kM(e));var o=Math.sin(i),y=Math.cos(i),_=Math.sin(e),C=Math.cos(e);i=Math.atan2(o*C,ec(_,C*y)),e=Math.atan2(_,C*y),a=kn(e+this.long0),u=oA(this.cgb,i)}else a=1/0,u=1/0;return t.x=a,t.y=u,t}var Q6=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const D0={init:Y6,forward:X6,inverse:K6,names:Q6};function J6(t,e){if(t===void 0){if(t=Math.floor((kn(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var tD="etmerc";function eD(){var t=J6(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*_s,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,D0.init.apply(this),this.forward=D0.forward,this.inverse=D0.inverse}var nD=["Universal Transverse Mercator System","utm"];const iD={init:eD,names:nD,dependsOn:tD};function aA(t,e){return Math.pow((1-t)/(1+t),e)}var rD=20;function oD(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+jr)/(Math.pow(Math.tan(.5*this.lat0+jr),this.C)*aA(this.e*t,this.ratexp))}function aD(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+jr),this.C)*aA(this.e*Math.sin(i),this.ratexp))-Xe,t.x=this.C*e,t}function sD(t){for(var e=1e-14,i=t.x/this.C,a=t.y,u=Math.pow(Math.tan(.5*a+jr)/this.K,1/this.C),f=rD;f>0&&(a=2*Math.atan(u*aA(this.e*Math.sin(t.y),-.5*this.e))-Xe,!(Math.abs(a-t.y)<e));--f)t.y=a;return f?(t.x=i,t.y=a,t):null}var lD=["gauss"];const sA={init:oD,forward:aD,inverse:sD,names:lD};function uD(){sA.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function cD(t){var e,i,a,u;return t.x=kn(t.x-this.long0),sA.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),a=Math.cos(t.x),u=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*a),t.x=u*i*Math.sin(t.x),t.y=u*(this.cosc0*e-this.sinc0*i*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function hD(t){var e,i,a,u,f;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,f=ec(t.x,t.y)){var o=2*Math.atan2(f,this.R2);e=Math.sin(o),i=Math.cos(o),u=Math.asin(i*this.sinc0+t.y*e*this.cosc0/f),a=Math.atan2(t.x*e,f*this.cosc0*i-t.y*this.sinc0*e)}else u=this.phic0,a=0;return t.x=a,t.y=u,sA.inverse.apply(this,[t]),t.x=kn(t.x+this.long0),t}var fD=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const pD={init:uD,forward:cD,inverse:hD,names:fD};function dD(t,e,i){return e*=i,Math.tan(.5*(Xe+t))*Math.pow((1-e)/(1+e),.5*i)}function mD(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=bn&&(this.k0=.5*(1+Vv(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=bn&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=bn&&Math.abs(Math.cos(this.lat_ts))>bn&&(this.k0=.5*this.cons*yh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Oc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=yh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Xe,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function gD(t){var e=t.x,i=t.y,a=Math.sin(i),u=Math.cos(i),f,o,y,_,C,S,k=kn(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=bn&&Math.abs(i+this.lat0)<=bn?(t.x=NaN,t.y=NaN,t):this.sphere?(f=2*this.k0/(1+this.sinlat0*a+this.coslat0*u*Math.cos(k)),t.x=this.a*f*u*Math.sin(k)+this.x0,t.y=this.a*f*(this.coslat0*a-this.sinlat0*u*Math.cos(k))+this.y0,t):(o=2*Math.atan(this.ssfn_(i,a,this.e))-Xe,_=Math.cos(o),y=Math.sin(o),Math.abs(this.coslat0)<=bn?(C=Oc(this.e,i*this.con,this.con*a),S=2*this.a*this.k0*C/this.cons,t.x=this.x0+S*Math.sin(e-this.long0),t.y=this.y0-this.con*S*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<bn?(f=2*this.a*this.k0/(1+_*Math.cos(k)),t.y=f*y):(f=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*y+this.cosX0*_*Math.cos(k))),t.y=f*(this.cosX0*y-this.sinX0*_*Math.cos(k))+this.y0),t.x=f*_*Math.sin(k)+this.x0,t))}function vD(t){t.x-=this.x0,t.y-=this.y0;var e,i,a,u,f,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var y=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,i=this.lat0,o<=bn?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(y)*this.sinlat0+t.y*Math.sin(y)*this.coslat0/o),Math.abs(this.coslat0)<bn?this.lat0>0?e=kn(this.long0+Math.atan2(t.x,-1*t.y)):e=kn(this.long0+Math.atan2(t.x,t.y)):e=kn(this.long0+Math.atan2(t.x*Math.sin(y),o*this.coslat0*Math.cos(y)-t.y*this.sinlat0*Math.sin(y))),t.x=e,t.y=i,t)}else if(Math.abs(this.coslat0)<=bn){if(o<=bn)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,a=o*this.cons/(2*this.a*this.k0),i=this.con*kv(this.e,a),e=this.con*kn(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else u=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=bn?f=this.X0:(f=Math.asin(Math.cos(u)*this.sinX0+t.y*Math.sin(u)*this.cosX0/o),e=kn(this.long0+Math.atan2(t.x*Math.sin(u),o*this.cosX0*Math.cos(u)-t.y*this.sinX0*Math.sin(u)))),i=-1*kv(this.e,Math.tan(.5*(Xe+f)));return t.x=e,t.y=i,t}var yD=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const _D={init:mD,forward:gD,inverse:vD,names:yD,ssfn_:dD};function xD(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,a=this.rf,u=1/a,f=2*u-Math.pow(u,2),o=this.e=Math.sqrt(f);this.R=this.k0*i*Math.sqrt(1-f)/(1-f*Math.pow(e,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var y=Math.log(Math.tan(Math.PI/4+this.b0/2)),_=Math.log(Math.tan(Math.PI/4+t/2)),C=Math.log((1+o*e)/(1-o*e));this.K=y-this.alpha*_+this.alpha*o/2*C}function bD(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(e+i)+this.K,u=2*(Math.atan(Math.exp(a))-Math.PI/4),f=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(u)+Math.cos(this.b0)*Math.cos(f))),y=Math.asin(Math.cos(this.b0)*Math.sin(u)-Math.sin(this.b0)*Math.cos(u)*Math.cos(f));return t.y=this.R/2*Math.log((1+Math.sin(y))/(1-Math.sin(y)))+this.y0,t.x=this.R*o+this.x0,t}function AD(t){for(var e=t.x-this.x0,i=t.y-this.y0,a=e/this.R,u=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(u)+Math.sin(this.b0)*Math.cos(u)*Math.cos(a)),o=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(u))),y=this.lambda0+o/this.alpha,_=0,C=f,S=-1e3,k=0;Math.abs(C-S)>1e-7;){if(++k>20)return;_=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(C))/2)),S=C,C=2*Math.atan(Math.exp(_))-Math.PI/2}return t.x=y,t.y=C,t}var wD=["somerc"];const CD={init:xD,forward:bD,inverse:AD,names:wD};var bm=1e-7;function ID(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(i)!==-1}function MD(){var t,e,i,a,u,f,o,y,_,C,S=0,k,P=0,B=0,G=0,j=0,X=0,pt=0;this.no_off=ID(this),this.no_rot="no_rot"in this;var J=!1;"alpha"in this&&(J=!0);var nt=!1;if("rectified_grid_angle"in this&&(nt=!0),J&&(pt=this.alpha),nt&&(S=this.rectified_grid_angle*_s),J||nt)P=this.longc;else if(B=this.long1,j=this.lat1,G=this.long2,X=this.lat2,Math.abs(j-X)<=bm||(t=Math.abs(j))<=bm||Math.abs(t-Xe)<=bm||Math.abs(Math.abs(this.lat0)-Xe)<=bm||Math.abs(Math.abs(X)-Xe)<=bm)throw new Error;var ft=1-this.es;e=Math.sqrt(ft),Math.abs(this.lat0)>bn?(y=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*y*y,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/ft),this.A=this.B*this.k0*e/t,a=this.B*e/(i*Math.sqrt(t)),u=a*a-1,u<=0?u=0:(u=Math.sqrt(u),this.lat0<0&&(u=-u)),this.E=u+=a,this.E*=Math.pow(Oc(this.e,this.lat0,y),this.B)):(this.B=1/e,this.A=this.k0,this.E=a=u=1),J||nt?(J?(k=Math.asin(Math.sin(pt)/a),nt||(S=pt)):(k=S,pt=Math.asin(a*Math.sin(k))),this.lam0=P-Math.asin(.5*(u-1/u)*Math.tan(k))/this.B):(f=Math.pow(Oc(this.e,j,Math.sin(j)),this.B),o=Math.pow(Oc(this.e,X,Math.sin(X)),this.B),u=this.E/f,_=(o-f)/(o+f),C=this.E*this.E,C=(C-o*f)/(C+o*f),t=B-G,t<-Math.pi?G-=Sv:t>Math.pi&&(G+=Sv),this.lam0=kn(.5*(B+G)-Math.atan(C*Math.tan(.5*this.B*(B-G))/_)/this.B),k=Math.atan(2*Math.sin(this.B*kn(B-this.lam0))/(u-1/u)),S=pt=Math.asin(a*Math.sin(k))),this.singam=Math.sin(k),this.cosgam=Math.cos(k),this.sinrot=Math.sin(S),this.cosrot=Math.cos(S),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(pt))),this.lat0<0&&(this.u_0=-this.u_0)),u=.5*k,this.v_pole_n=this.ArB*Math.log(Math.tan(jr-u)),this.v_pole_s=this.ArB*Math.log(Math.tan(jr+u))}function ED(t){var e={},i,a,u,f,o,y,_,C;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Xe)>bn){if(o=this.E/Math.pow(Oc(this.e,t.y,Math.sin(t.y)),this.B),y=1/o,i=.5*(o-y),a=.5*(o+y),f=Math.sin(this.B*t.x),u=(i*this.singam-f*this.cosgam)/a,Math.abs(Math.abs(u)-1)<bn)throw new Error;C=.5*this.ArB*Math.log((1-u)/(1+u)),y=Math.cos(this.B*t.x),Math.abs(y)<bm?_=this.A*t.x:_=this.ArB*Math.atan2(i*this.cosgam+f*this.singam,y)}else C=t.y>0?this.v_pole_n:this.v_pole_s,_=this.ArB*t.y;return this.no_rot?(e.x=_,e.y=C):(_-=this.u_0,e.x=C*this.cosrot+_*this.sinrot,e.y=_*this.cosrot-C*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function SD(t){var e,i,a,u,f,o,y,_={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*i),u=.5*(a-1/a),f=.5*(a+1/a),o=Math.sin(this.BrA*e),y=(o*this.cosgam+u*this.singam)/f,Math.abs(Math.abs(y)-1)<bn)_.x=0,_.y=y<0?-Xe:Xe;else{if(_.y=this.E/Math.sqrt((1+y)/(1-y)),_.y=kv(this.e,Math.pow(_.y,1/this.B)),_.y===1/0)throw new Error;_.x=-this.rB*Math.atan2(u*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return _.x+=this.lam0,_}var TD=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const kD={init:MD,forward:ED,inverse:SD,names:TD};function PD(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<bn)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),a=yh(this.e,e,i),u=Oc(this.e,this.lat1,e),f=Math.sin(this.lat2),o=Math.cos(this.lat2),y=yh(this.e,f,o),_=Oc(this.e,this.lat2,f),C=Oc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>bn?this.ns=Math.log(a/y)/Math.log(u/_):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(u,this.ns)),this.rh=this.a*this.f0*Math.pow(C,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function LD(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=bn&&(i=Vv(i)*(Xe-2*bn));var a=Math.abs(Math.abs(i)-Xe),u,f;if(a>bn)u=Oc(this.e,i,Math.sin(i)),f=this.a*this.f0*Math.pow(u,this.ns);else{if(a=i*this.ns,a<=0)return null;f=0}var o=this.ns*kn(e-this.long0);return t.x=this.k0*(f*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-f*Math.cos(o))+this.y0,t}function DD(t){var e,i,a,u,f,o=(t.x-this.x0)/this.k0,y=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+y*y),i=1):(e=-Math.sqrt(o*o+y*y),i=-1);var _=0;if(e!==0&&(_=Math.atan2(i*o,i*y)),e!==0||this.ns>0){if(i=1/this.ns,a=Math.pow(e/(this.a*this.f0),i),u=kv(this.e,a),u===-9999)return null}else u=-Xe;return f=kn(_/this.ns+this.long0),t.x=f,t.y=u,t}var RD=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const zD={init:PD,forward:LD,inverse:DD,names:RD};function BD(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function OD(t){var e,i,a,u,f,o,y,_=t.x,C=t.y,S=kn(_-this.long0);return e=Math.pow((1+this.e*Math.sin(C))/(1-this.e*Math.sin(C)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(C/2+this.s45),this.alfa)/e)-this.s45),a=-S*this.alfa,u=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),f=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(u)),o=this.n*f,y=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(u/2+this.s45),this.n),t.y=y*Math.cos(o)/1,t.x=y*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function FD(t){var e,i,a,u,f,o,y,_,C=t.x;t.x=t.y,t.y=C,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),f=Math.atan2(t.y,t.x),u=f/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(u)),i=Math.asin(Math.cos(a)*Math.sin(u)/Math.cos(e)),t.x=this.long0-i/this.alfa,y=e,_=0;var S=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(y))/(1-this.e*Math.sin(y)),this.e/2))-this.s45),Math.abs(y-t.y)<1e-10&&(_=1),y=t.y,S+=1;while(_===0&&S<15);return S>=15?null:t}var ND=["Krovak","krovak"];const VD={init:BD,forward:OD,inverse:FD,names:ND};function gl(t,e,i,a,u){return t*u-e*Math.sin(2*u)+i*Math.sin(4*u)-a*Math.sin(6*u)}function Uv(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function jv(t){return .375*t*(1+.25*t*(1+.46875*t))}function Hv(t){return .05859375*t*t*(1+.75*t)}function Gv(t){return t*t*t*(35/3072)}function jm(t,e,i){var a=e*i;return t/Math.sqrt(1-a*a)}function $m(t){return Math.abs(t)<Xe?t:t-Vv(t)*Math.PI}function e_(t,e,i,a,u){var f,o;f=t/e;for(var y=0;y<15;y++)if(o=(t-(e*f-i*Math.sin(2*f)+a*Math.sin(4*f)-u*Math.sin(6*f)))/(e-2*i*Math.cos(2*f)+4*a*Math.cos(4*f)-6*u*Math.cos(6*f)),f+=o,Math.abs(o)<=1e-10)return f;return NaN}function UD(){this.sphere||(this.e0=Uv(this.es),this.e1=jv(this.es),this.e2=Hv(this.es),this.e3=Gv(this.es),this.ml0=this.a*gl(this.e0,this.e1,this.e2,this.e3,this.lat0))}function jD(t){var e,i,a=t.x,u=t.y;if(a=kn(a-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(u)*Math.sin(a)),i=this.a*(Math.atan2(Math.tan(u),Math.cos(a))-this.lat0);else{var f=Math.sin(u),o=Math.cos(u),y=jm(this.a,this.e,f),_=Math.tan(u)*Math.tan(u),C=a*Math.cos(u),S=C*C,k=this.es*o*o/(1-this.es),P=this.a*gl(this.e0,this.e1,this.e2,this.e3,u);e=y*C*(1-S*_*(1/6-(8-_+8*k)*S/120)),i=P-this.ml0+y*f/o*S*(.5+(5-_+6*k)*S/24)}return t.x=e+this.x0,t.y=i+this.y0,t}function HD(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a,a,u;if(this.sphere){var f=i+this.lat0;a=Math.asin(Math.sin(f)*Math.cos(e)),u=Math.atan2(Math.tan(e),Math.cos(f))}else{var o=this.ml0/this.a+i,y=e_(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(y)-Xe)<=bn)return t.x=this.long0,t.y=Xe,i<0&&(t.y*=-1),t;var _=jm(this.a,this.e,Math.sin(y)),C=_*_*_/this.a/this.a*(1-this.es),S=Math.pow(Math.tan(y),2),k=e*this.a/_,P=k*k;a=y-_*Math.tan(y)/C*k*k*(.5-(1+3*S)*k*k/24),u=k*(1-P*(S/3+(1+3*S)*S*P/15))/Math.cos(y)}return t.x=kn(u+this.long0),t.y=$m(a),t}var GD=["Cassini","Cassini_Soldner","cass"];const qD={init:UD,forward:jD,inverse:HD,names:GD};function hp(t,e){var i;return t>1e-7?(i=t*e,(1-t*t)*(e/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*e}var WD=1,ZD=2,$D=3,YD=4;function XD(){var t=Math.abs(this.lat0);if(Math.abs(t-Xe)<bn?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<bn?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=hp(this.e,1),this.mmf=.5/(1-this.es),this.apa=oR(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=hp(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function KD(t){var e,i,a,u,f,o,y,_,C,S,k=t.x,P=t.y;if(k=kn(k-this.long0),this.sphere){if(f=Math.sin(P),S=Math.cos(P),a=Math.cos(k),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+S*a:1+this.sinph0*f+this.cosph0*S*a,i<=bn)return null;i=Math.sqrt(2/i),e=i*S*Math.sin(k),i*=this.mode===this.EQUIT?f:this.cosph0*f-this.sinph0*S*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(P+this.lat0)<bn)return null;i=jr-P*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),e=i*Math.sin(k),i*=a}}else{switch(y=0,_=0,C=0,a=Math.cos(k),u=Math.sin(k),f=Math.sin(P),o=hp(this.e,f),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=o/this.qp,_=Math.sqrt(1-y*y)),this.mode){case this.OBLIQ:C=1+this.sinb1*y+this.cosb1*_*a;break;case this.EQUIT:C=1+_*a;break;case this.N_POLE:C=Xe+P,o=this.qp-o;break;case this.S_POLE:C=P-Xe,o=this.qp+o;break}if(Math.abs(C)<bn)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:C=Math.sqrt(2/C),this.mode===this.OBLIQ?i=this.ymf*C*(this.cosb1*y-this.sinb1*_*a):i=(C=Math.sqrt(2/(1+_*a)))*y*this.ymf,e=this.xmf*C*_*u;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(C=Math.sqrt(o))*u,i=a*(this.mode===this.S_POLE?C:-C)):e=i=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t}function QD(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a,a,u,f,o,y,_,C;if(this.sphere){var S=0,k,P=0;if(k=Math.sqrt(e*e+i*i),u=k*.5,u>1)return null;switch(u=2*Math.asin(u),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(P=Math.sin(u),S=Math.cos(u)),this.mode){case this.EQUIT:u=Math.abs(k)<=bn?0:Math.asin(i*P/k),e*=P,i=S*k;break;case this.OBLIQ:u=Math.abs(k)<=bn?this.lat0:Math.asin(S*this.sinph0+i*P*this.cosph0/k),e*=P*this.cosph0,i=(S-Math.sin(u)*this.sinph0)*k;break;case this.N_POLE:i=-i,u=Xe-u;break;case this.S_POLE:u-=Xe;break}a=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,i)}else{if(C=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,i*=this.dd,_=Math.sqrt(e*e+i*i),_<bn)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*_/this.rq),f=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(C=f*this.sinb1+i*o*this.cosb1/_,y=this.qp*C,i=_*this.cosb1*f-i*this.sinb1*o):(C=i*o/_,y=this.qp*C,i=_*f)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),y=e*e+i*i,!y)return t.x=this.long0,t.y=this.lat0,t;C=1-y/this.qp,this.mode===this.S_POLE&&(C=-C)}a=Math.atan2(e,i),u=aR(Math.asin(C),this.apa)}return t.x=kn(this.long0+a),t.y=u,t}var JD=.3333333333333333,tR=.17222222222222222,eR=.10257936507936508,nR=.06388888888888888,iR=.0664021164021164,rR=.016415012942191543;function oR(t){var e,i=[];return i[0]=t*JD,e=t*t,i[0]+=e*tR,i[1]=e*nR,e*=t,i[0]+=e*eR,i[1]+=e*iR,i[2]=e*rR,i}function aR(t,e){var i=t+t;return t+e[0]*Math.sin(i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)}var sR=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const lR={init:XD,forward:KD,inverse:QD,names:sR,S_POLE:WD,N_POLE:ZD,EQUIT:$D,OBLIQ:YD};function gp(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function uR(){Math.abs(this.lat1+this.lat2)<bn||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=yh(this.e3,this.sin_po,this.cos_po),this.qs1=hp(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=yh(this.e3,this.sin_po,this.cos_po),this.qs2=hp(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=hp(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>bn?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function cR(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var a=hp(this.e3,this.sin_phi),u=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,f=this.ns0*kn(e-this.long0),o=u*Math.sin(f)+this.x0,y=this.rh-u*Math.cos(f)+this.y0;return t.x=o,t.y=y,t}function hR(t){var e,i,a,u,f,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1),u=0,e!==0&&(u=Math.atan2(a*t.x,a*t.y)),a=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-a*a)/(2*this.ns0)):(i=(this.c-a*a)/this.ns0,o=this.phi1z(this.e3,i)),f=kn(u/this.ns0+this.long0),t.x=f,t.y=o,t}function fR(t,e){var i,a,u,f,o,y=gp(.5*e);if(t<bn)return y;for(var _=t*t,C=1;C<=25;C++)if(i=Math.sin(y),a=Math.cos(y),u=t*i,f=1-u*u,o=.5*f*f/a*(e/(1-_)-i/f+.5/t*Math.log((1-u)/(1+u))),y=y+o,Math.abs(o)<=1e-7)return y;return null}var pR=["Albers_Conic_Equal_Area","Albers","aea"];const dR={init:uR,forward:cR,inverse:hR,names:pR,phi1z:fR};function mR(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function gR(t){var e,i,a,u,f,o,y,_,C=t.x,S=t.y;return a=kn(C-this.long0),e=Math.sin(S),i=Math.cos(S),u=Math.cos(a),o=this.sin_p14*e+this.cos_p14*i*u,f=1,o>0||Math.abs(o)<=bn?(y=this.x0+this.a*f*i*Math.sin(a)/o,_=this.y0+this.a*f*(this.cos_p14*e-this.sin_p14*i*u)/o):(y=this.x0+this.infinity_dist*i*Math.sin(a),_=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*u)),t.x=y,t.y=_,t}function vR(t){var e,i,a,u,f,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(u=Math.atan2(e,this.rc),i=Math.sin(u),a=Math.cos(u),o=gp(a*this.sin_p14+t.y*i*this.cos_p14/e),f=Math.atan2(t.x*i,e*this.cos_p14*a-t.y*this.sin_p14*i),f=kn(this.long0+f)):(o=this.phic0,f=0),t.x=f,t.y=o,t}var yR=["gnom"];const _R={init:mR,forward:gR,inverse:vR,names:yR};function xR(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*Xe:Xe;for(var a=Math.asin(.5*e),u,f,o,y,_=0;_<30;_++)if(f=Math.sin(a),o=Math.cos(a),y=t*f,u=Math.pow(1-y*y,2)/(2*o)*(e/(1-t*t)-f/(1-y*y)+.5/t*Math.log((1-y)/(1+y))),a+=u,Math.abs(u)<=1e-10)return a;return NaN}function bR(){this.sphere||(this.k0=yh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function AR(t){var e=t.x,i=t.y,a,u,f=kn(e-this.long0);if(this.sphere)a=this.x0+this.a*f*Math.cos(this.lat_ts),u=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=hp(this.e,Math.sin(i));a=this.x0+this.a*this.k0*f,u=this.y0+this.a*o*.5/this.k0}return t.x=a,t.y=u,t}function wR(t){t.x-=this.x0,t.y-=this.y0;var e,i;return this.sphere?(e=kn(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=xR(this.e,2*t.y*this.k0/this.a),e=kn(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t}var CR=["cea"];const IR={init:bR,forward:AR,inverse:wR,names:CR};function MR(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function ER(t){var e=t.x,i=t.y,a=kn(e-this.long0),u=$m(i-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*u,t}function SR(t){var e=t.x,i=t.y;return t.x=kn(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=$m(this.lat0+(i-this.y0)/this.a),t}var TR=["Equirectangular","Equidistant_Cylindrical","eqc"];const kR={init:MR,forward:ER,inverse:SR,names:TR};var C2=20;function PR(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Uv(this.es),this.e1=jv(this.es),this.e2=Hv(this.es),this.e3=Gv(this.es),this.ml0=this.a*gl(this.e0,this.e1,this.e2,this.e3,this.lat0)}function LR(t){var e=t.x,i=t.y,a,u,f,o=kn(e-this.long0);if(f=o*Math.sin(i),this.sphere)Math.abs(i)<=bn?(a=this.a*o,u=-1*this.a*this.lat0):(a=this.a*Math.sin(f)/Math.tan(i),u=this.a*($m(i-this.lat0)+(1-Math.cos(f))/Math.tan(i)));else if(Math.abs(i)<=bn)a=this.a*o,u=-1*this.ml0;else{var y=jm(this.a,this.e,Math.sin(i))/Math.tan(i);a=y*Math.sin(f),u=this.a*gl(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+y*(1-Math.cos(f))}return t.x=a+this.x0,t.y=u+this.y0,t}function DR(t){var e,i,a,u,f,o,y,_,C;if(a=t.x-this.x0,u=t.y-this.y0,this.sphere)if(Math.abs(u+this.a*this.lat0)<=bn)e=kn(a/this.a+this.long0),i=0;else{o=this.lat0+u/this.a,y=a*a/this.a/this.a+o*o,_=o;var S;for(f=C2;f;--f)if(S=Math.tan(_),C=-1*(o*(_*S+1)-_-.5*(_*_+y)*S)/((_-o)/S-1),_+=C,Math.abs(C)<=bn){i=_;break}e=kn(this.long0+Math.asin(a*Math.tan(_)/this.a)/Math.sin(i))}else if(Math.abs(u+this.ml0)<=bn)i=0,e=kn(this.long0+a/this.a);else{o=(this.ml0+u)/this.a,y=a*a/this.a/this.a+o*o,_=o;var k,P,B,G,j;for(f=C2;f;--f)if(j=this.e*Math.sin(_),k=Math.sqrt(1-j*j)*Math.tan(_),P=this.a*gl(this.e0,this.e1,this.e2,this.e3,_),B=this.e0-2*this.e1*Math.cos(2*_)+4*this.e2*Math.cos(4*_)-6*this.e3*Math.cos(6*_),G=P/this.a,C=(o*(k*G+1)-G-.5*k*(G*G+y))/(this.es*Math.sin(2*_)*(G*G+y-2*o*G)/(4*k)+(o-G)*(k*B-2/Math.sin(2*_))-B),_-=C,Math.abs(C)<=bn){i=_;break}k=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=kn(this.long0+Math.asin(a*k/this.a)/Math.sin(i))}return t.x=e,t.y=i,t}var RR=["Polyconic","poly"];const zR={init:PR,forward:LR,inverse:DR,names:RR};function BR(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function OR(t){var e,i=t.x,a=t.y,u=a-this.lat0,f=i-this.long0,o=u/sv*1e-5,y=f,_=1,C=0;for(e=1;e<=10;e++)_=_*o,C=C+this.A[e]*_;var S=C,k=y,P=1,B=0,G,j,X=0,pt=0;for(e=1;e<=6;e++)G=P*S-B*k,j=B*S+P*k,P=G,B=j,X=X+this.B_re[e]*P-this.B_im[e]*B,pt=pt+this.B_im[e]*P+this.B_re[e]*B;return t.x=pt*this.a+this.x0,t.y=X*this.a+this.y0,t}function FR(t){var e,i=t.x,a=t.y,u=i-this.x0,f=a-this.y0,o=f/this.a,y=u/this.a,_=1,C=0,S,k,P=0,B=0;for(e=1;e<=6;e++)S=_*o-C*y,k=C*o+_*y,_=S,C=k,P=P+this.C_re[e]*_-this.C_im[e]*C,B=B+this.C_im[e]*_+this.C_re[e]*C;for(var G=0;G<this.iterations;G++){var j=P,X=B,pt,J,nt=o,ft=y;for(e=2;e<=6;e++)pt=j*P-X*B,J=X*P+j*B,j=pt,X=J,nt=nt+(e-1)*(this.B_re[e]*j-this.B_im[e]*X),ft=ft+(e-1)*(this.B_im[e]*j+this.B_re[e]*X);j=1,X=0;var Lt=this.B_re[1],xt=this.B_im[1];for(e=2;e<=6;e++)pt=j*P-X*B,J=X*P+j*B,j=pt,X=J,Lt=Lt+e*(this.B_re[e]*j-this.B_im[e]*X),xt=xt+e*(this.B_im[e]*j+this.B_re[e]*X);var Mt=Lt*Lt+xt*xt;P=(nt*Lt+ft*xt)/Mt,B=(ft*Lt-nt*xt)/Mt}var Ht=P,jt=B,Qt=1,Bt=0;for(e=1;e<=9;e++)Qt=Qt*Ht,Bt=Bt+this.D[e]*Qt;var Ft=this.lat0+Bt*sv*1e5,Ot=this.long0+jt;return t.x=Ot,t.y=Ft,t}var NR=["New_Zealand_Map_Grid","nzmg"];const VR={init:BR,forward:OR,inverse:FR,names:NR};function UR(){}function jR(t){var e=t.x,i=t.y,a=kn(e-this.long0),u=this.x0+this.a*a,f=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=u,t.y=f,t}function HR(t){t.x-=this.x0,t.y-=this.y0;var e=kn(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t}var GR=["Miller_Cylindrical","mill"];const qR={init:UR,forward:jR,inverse:HR,names:GR};var WR=20;function ZR(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=SM(this.es)}function $R(t){var e,i,a=t.x,u=t.y;if(a=kn(a-this.long0),this.sphere){if(!this.m)u=this.n!==1?Math.asin(this.n*Math.sin(u)):u;else for(var f=this.n*Math.sin(u),o=WR;o;--o){var y=(this.m*u+Math.sin(u)-f)/(this.m+Math.cos(u));if(u-=y,Math.abs(y)<bn)break}e=this.a*this.C_x*a*(this.m+Math.cos(u)),i=this.a*this.C_y*u}else{var _=Math.sin(u),C=Math.cos(u);i=this.a*R_(u,_,C,this.en),e=this.a*a*C/Math.sqrt(1-this.es*_*_)}return t.x=e,t.y=i,t}function YR(t){var e,i,a,u;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(e))),this.m?e=gp((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=gp(Math.sin(e)/this.n)),a=kn(a+this.long0),e=$m(e)):(e=TM(t.y/this.a,this.es,this.en),u=Math.abs(e),u<Xe?(u=Math.sin(e),i=this.long0+t.x*Math.sqrt(1-this.es*u*u)/(this.a*Math.cos(e)),a=kn(i)):u-bn<Xe&&(a=this.long0)),t.x=a,t.y=e,t}var XR=["Sinusoidal","sinu"];const KR={init:ZR,forward:$R,inverse:YR,names:XR};function QR(){}function JR(t){for(var e=t.x,i=t.y,a=kn(e-this.long0),u=i,f=Math.PI*Math.sin(i);;){var o=-(u+Math.sin(u)-f)/(1+Math.cos(u));if(u+=o,Math.abs(o)<bn)break}u/=2,Math.PI/2-Math.abs(i)<bn&&(a=0);var y=.900316316158*this.a*a*Math.cos(u)+this.x0,_=1.4142135623731*this.a*Math.sin(u)+this.y0;return t.x=y,t.y=_,t}function tz(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var a=kn(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var u=Math.asin(i);return t.x=a,t.y=u,t}var ez=["Mollweide","moll"];const nz={init:QR,forward:JR,inverse:tz,names:ez};function iz(){Math.abs(this.lat1+this.lat2)<bn||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Uv(this.es),this.e1=jv(this.es),this.e2=Hv(this.es),this.e3=Gv(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=yh(this.e,this.sinphi,this.cosphi),this.ml1=gl(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<bn?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=yh(this.e,this.sinphi,this.cosphi),this.ml2=gl(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=gl(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function rz(t){var e=t.x,i=t.y,a;if(this.sphere)a=this.a*(this.g-i);else{var u=gl(this.e0,this.e1,this.e2,this.e3,i);a=this.a*(this.g-u)}var f=this.ns*kn(e-this.long0),o=this.x0+a*Math.sin(f),y=this.y0+this.rh-a*Math.cos(f);return t.x=o,t.y=y,t}function oz(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,i,a,u;this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var f=0;if(i!==0&&(f=Math.atan2(e*t.x,e*t.y)),this.sphere)return u=kn(this.long0+f/this.ns),a=$m(this.g-i/this.a),t.x=u,t.y=a,t;var o=this.g-i/this.a;return a=e_(o,this.e0,this.e1,this.e2,this.e3),u=kn(this.long0+f/this.ns),t.x=u,t.y=a,t}var az=["Equidistant_Conic","eqdc"];const sz={init:iz,forward:rz,inverse:oz,names:az};function lz(){this.R=this.a}function uz(t){var e=t.x,i=t.y,a=kn(e-this.long0),u,f;Math.abs(i)<=bn&&(u=this.x0+this.R*a,f=this.y0);var o=gp(2*Math.abs(i/Math.PI));(Math.abs(a)<=bn||Math.abs(Math.abs(i)-Xe)<=bn)&&(u=this.x0,i>=0?f=this.y0+Math.PI*this.R*Math.tan(.5*o):f=this.y0+Math.PI*this.R*-Math.tan(.5*o));var y=.5*Math.abs(Math.PI/a-a/Math.PI),_=y*y,C=Math.sin(o),S=Math.cos(o),k=S/(C+S-1),P=k*k,B=k*(2/C-1),G=B*B,j=Math.PI*this.R*(y*(k-G)+Math.sqrt(_*(k-G)*(k-G)-(G+_)*(P-G)))/(G+_);a<0&&(j=-j),u=this.x0+j;var X=_+k;return j=Math.PI*this.R*(B*X-y*Math.sqrt((G+_)*(_+1)-X*X))/(G+_),i>=0?f=this.y0+j:f=this.y0-j,t.x=u,t.y=f,t}function cz(t){var e,i,a,u,f,o,y,_,C,S,k,P,B;return t.x-=this.x0,t.y-=this.y0,k=Math.PI*this.R,a=t.x/k,u=t.y/k,f=a*a+u*u,o=-Math.abs(u)*(1+f),y=o-2*u*u+a*a,_=-2*o+1+2*u*u+f*f,B=u*u/_+(2*y*y*y/_/_/_-9*o*y/_/_)/27,C=(o-y*y/3/_)/_,S=2*Math.sqrt(-C/3),k=3*B/C/S,Math.abs(k)>1&&(k>=0?k=1:k=-1),P=Math.acos(k)/3,t.y>=0?i=(-S*Math.cos(P+Math.PI/3)-y/3/_)*Math.PI:i=-(-S*Math.cos(P+Math.PI/3)-y/3/_)*Math.PI,Math.abs(a)<bn?e=this.long0:e=kn(this.long0+Math.PI*(f-1+Math.sqrt(1+2*(a*a-u*u)+f*f))/2/a),t.x=e,t.y=i,t}var hz=["Van_der_Grinten_I","VanDerGrinten","vandg"];const fz={init:lz,forward:uz,inverse:cz,names:hz};function pz(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function dz(t){var e=t.x,i=t.y,a=Math.sin(t.y),u=Math.cos(t.y),f=kn(e-this.long0),o,y,_,C,S,k,P,B,G,j,X,pt,J,nt,ft,Lt,xt,Mt,Ht,jt,Qt,Bt,Ft;return this.sphere?Math.abs(this.sin_p12-1)<=bn?(t.x=this.x0+this.a*(Xe-i)*Math.sin(f),t.y=this.y0-this.a*(Xe-i)*Math.cos(f),t):Math.abs(this.sin_p12+1)<=bn?(t.x=this.x0+this.a*(Xe+i)*Math.sin(f),t.y=this.y0+this.a*(Xe+i)*Math.cos(f),t):(Mt=this.sin_p12*a+this.cos_p12*u*Math.cos(f),Lt=Math.acos(Mt),xt=Lt?Lt/Math.sin(Lt):1,t.x=this.x0+this.a*xt*u*Math.sin(f),t.y=this.y0+this.a*xt*(this.cos_p12*a-this.sin_p12*u*Math.cos(f)),t):(o=Uv(this.es),y=jv(this.es),_=Hv(this.es),C=Gv(this.es),Math.abs(this.sin_p12-1)<=bn?(S=this.a*gl(o,y,_,C,Xe),k=this.a*gl(o,y,_,C,i),t.x=this.x0+(S-k)*Math.sin(f),t.y=this.y0-(S-k)*Math.cos(f),t):Math.abs(this.sin_p12+1)<=bn?(S=this.a*gl(o,y,_,C,Xe),k=this.a*gl(o,y,_,C,i),t.x=this.x0+(S+k)*Math.sin(f),t.y=this.y0+(S+k)*Math.cos(f),t):(P=a/u,B=jm(this.a,this.e,this.sin_p12),G=jm(this.a,this.e,a),j=Math.atan((1-this.es)*P+this.es*B*this.sin_p12/(G*u)),X=Math.atan2(Math.sin(f),this.cos_p12*Math.tan(j)-this.sin_p12*Math.cos(f)),X===0?Ht=Math.asin(this.cos_p12*Math.sin(j)-this.sin_p12*Math.cos(j)):Math.abs(Math.abs(X)-Math.PI)<=bn?Ht=-Math.asin(this.cos_p12*Math.sin(j)-this.sin_p12*Math.cos(j)):Ht=Math.asin(Math.sin(f)*Math.cos(j)/Math.sin(X)),pt=this.e*this.sin_p12/Math.sqrt(1-this.es),J=this.e*this.cos_p12*Math.cos(X)/Math.sqrt(1-this.es),nt=pt*J,ft=J*J,jt=Ht*Ht,Qt=jt*Ht,Bt=Qt*Ht,Ft=Bt*Ht,Lt=B*Ht*(1-jt*ft*(1-ft)/6+Qt/8*nt*(1-2*ft)+Bt/120*(ft*(4-7*ft)-3*pt*pt*(1-7*ft))-Ft/48*nt),t.x=this.x0+Lt*Math.sin(X),t.y=this.y0+Lt*Math.cos(X),t))}function mz(t){t.x-=this.x0,t.y-=this.y0;var e,i,a,u,f,o,y,_,C,S,k,P,B,G,j,X,pt,J,nt,ft,Lt,xt,Mt,Ht;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*Xe*this.a?void 0:(i=e/this.a,a=Math.sin(i),u=Math.cos(i),f=this.long0,Math.abs(e)<=bn?o=this.lat0:(o=gp(u*this.sin_p12+t.y*a*this.cos_p12/e),y=Math.abs(this.lat0)-Xe,Math.abs(y)<=bn?this.lat0>=0?f=kn(this.long0+Math.atan2(t.x,-t.y)):f=kn(this.long0-Math.atan2(-t.x,t.y)):f=kn(this.long0+Math.atan2(t.x*a,e*this.cos_p12*u-t.y*this.sin_p12*a))),t.x=f,t.y=o,t)):(_=Uv(this.es),C=jv(this.es),S=Hv(this.es),k=Gv(this.es),Math.abs(this.sin_p12-1)<=bn?(P=this.a*gl(_,C,S,k,Xe),e=Math.sqrt(t.x*t.x+t.y*t.y),B=P-e,o=e_(B/this.a,_,C,S,k),f=kn(this.long0+Math.atan2(t.x,-1*t.y)),t.x=f,t.y=o,t):Math.abs(this.sin_p12+1)<=bn?(P=this.a*gl(_,C,S,k,Xe),e=Math.sqrt(t.x*t.x+t.y*t.y),B=e-P,o=e_(B/this.a,_,C,S,k),f=kn(this.long0+Math.atan2(t.x,t.y)),t.x=f,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),X=Math.atan2(t.x,t.y),G=jm(this.a,this.e,this.sin_p12),pt=Math.cos(X),J=this.e*this.cos_p12*pt,nt=-J*J/(1-this.es),ft=3*this.es*(1-nt)*this.sin_p12*this.cos_p12*pt/(1-this.es),Lt=e/G,xt=Lt-nt*(1+nt)*Math.pow(Lt,3)/6-ft*(1+3*nt)*Math.pow(Lt,4)/24,Mt=1-nt*xt*xt/2-Lt*xt*xt*xt/6,j=Math.asin(this.sin_p12*Math.cos(xt)+this.cos_p12*Math.sin(xt)*pt),f=kn(this.long0+Math.asin(Math.sin(X)*Math.sin(xt)/Math.cos(j))),Ht=Math.sin(j),o=Math.atan2((Ht-this.es*Mt*this.sin_p12)*Math.tan(j),Ht*(1-this.es)),t.x=f,t.y=o,t))}var gz=["Azimuthal_Equidistant","aeqd"];const vz={init:pz,forward:dz,inverse:mz,names:gz};function yz(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function _z(t){var e,i,a,u,f,o,y,_,C=t.x,S=t.y;return a=kn(C-this.long0),e=Math.sin(S),i=Math.cos(S),u=Math.cos(a),o=this.sin_p14*e+this.cos_p14*i*u,f=1,(o>0||Math.abs(o)<=bn)&&(y=this.a*f*i*Math.sin(a),_=this.y0+this.a*f*(this.cos_p14*e-this.sin_p14*i*u)),t.x=y,t.y=_,t}function xz(t){var e,i,a,u,f,o,y;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),i=gp(e/this.a),a=Math.sin(i),u=Math.cos(i),o=this.long0,Math.abs(e)<=bn?(y=this.lat0,t.x=o,t.y=y,t):(y=gp(u*this.sin_p14+t.y*a*this.cos_p14/e),f=Math.abs(this.lat0)-Xe,Math.abs(f)<=bn?(this.lat0>=0?o=kn(this.long0+Math.atan2(t.x,-t.y)):o=kn(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=y,t):(o=kn(this.long0+Math.atan2(t.x*a,e*this.cos_p14*u-t.y*this.sin_p14*a)),t.x=o,t.y=y,t))}var bz=["ortho"];const Az={init:yz,forward:_z,inverse:xz,names:bz};var $o={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Hr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function wz(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Xe-jr/2?this.face=$o.TOP:this.lat0<=-(Xe-jr/2)?this.face=$o.BOTTOM:Math.abs(this.long0)<=jr?this.face=$o.FRONT:Math.abs(this.long0)<=Xe+jr?this.face=this.long0>0?$o.RIGHT:$o.LEFT:this.face=$o.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Cz(t){var e={x:0,y:0},i,a,u,f,o,y,_={value:0};if(t.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):i=t.y,a=t.x,this.face===$o.TOP)f=Xe-i,a>=jr&&a<=Xe+jr?(_.value=Hr.AREA_0,u=a-Xe):a>Xe+jr||a<=-(Xe+jr)?(_.value=Hr.AREA_1,u=a>0?a-da:a+da):a>-(Xe+jr)&&a<=-jr?(_.value=Hr.AREA_2,u=a+Xe):(_.value=Hr.AREA_3,u=a);else if(this.face===$o.BOTTOM)f=Xe+i,a>=jr&&a<=Xe+jr?(_.value=Hr.AREA_0,u=-a+Xe):a<jr&&a>=-jr?(_.value=Hr.AREA_1,u=-a):a<-jr&&a>=-(Xe+jr)?(_.value=Hr.AREA_2,u=-a-Xe):(_.value=Hr.AREA_3,u=a>0?-a+da:-a-da);else{var C,S,k,P,B,G,j;this.face===$o.RIGHT?a=Dm(a,+Xe):this.face===$o.BACK?a=Dm(a,+da):this.face===$o.LEFT&&(a=Dm(a,-Xe)),P=Math.sin(i),B=Math.cos(i),G=Math.sin(a),j=Math.cos(a),C=B*j,S=B*G,k=P,this.face===$o.FRONT?(f=Math.acos(C),u=g0(f,k,S,_)):this.face===$o.RIGHT?(f=Math.acos(S),u=g0(f,k,-C,_)):this.face===$o.BACK?(f=Math.acos(-C),u=g0(f,k,-S,_)):this.face===$o.LEFT?(f=Math.acos(-S),u=g0(f,k,C,_)):(f=u=0,_.value=Hr.AREA_0)}return y=Math.atan(12/da*(u+Math.acos(Math.sin(u)*Math.cos(jr))-Xe)),o=Math.sqrt((1-Math.cos(f))/(Math.cos(y)*Math.cos(y))/(1-Math.cos(Math.atan(1/Math.cos(u))))),_.value===Hr.AREA_1?y+=Xe:_.value===Hr.AREA_2?y+=da:_.value===Hr.AREA_3&&(y+=1.5*da),e.x=o*Math.cos(y),e.y=o*Math.sin(y),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function Iz(t){var e={lam:0,phi:0},i,a,u,f,o,y,_,C,S,k={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,a=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),i=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?k.value=Hr.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(k.value=Hr.AREA_1,i-=Xe):t.x<0&&-t.x>=Math.abs(t.y)?(k.value=Hr.AREA_2,i=i<0?i+da:i-da):(k.value=Hr.AREA_3,i+=Xe),S=da/12*Math.tan(i),o=Math.sin(S)/(Math.cos(S)-1/Math.sqrt(2)),y=Math.atan(o),u=Math.cos(i),f=Math.tan(a),_=1-u*u*f*f*(1-Math.cos(Math.atan(1/Math.cos(y)))),_<-1?_=-1:_>1&&(_=1),this.face===$o.TOP)C=Math.acos(_),e.phi=Xe-C,k.value===Hr.AREA_0?e.lam=y+Xe:k.value===Hr.AREA_1?e.lam=y<0?y+da:y-da:k.value===Hr.AREA_2?e.lam=y-Xe:e.lam=y;else if(this.face===$o.BOTTOM)C=Math.acos(_),e.phi=C-Xe,k.value===Hr.AREA_0?e.lam=-y+Xe:k.value===Hr.AREA_1?e.lam=-y:k.value===Hr.AREA_2?e.lam=-y-Xe:e.lam=y<0?-y-da:-y+da;else{var P,B,G;P=_,S=P*P,S>=1?G=0:G=Math.sqrt(1-S)*Math.sin(y),S+=G*G,S>=1?B=0:B=Math.sqrt(1-S),k.value===Hr.AREA_1?(S=B,B=-G,G=S):k.value===Hr.AREA_2?(B=-B,G=-G):k.value===Hr.AREA_3&&(S=B,B=G,G=-S),this.face===$o.RIGHT?(S=P,P=-B,B=S):this.face===$o.BACK?(P=-P,B=-B):this.face===$o.LEFT&&(S=P,P=B,B=-S),e.phi=Math.acos(-G)-Xe,e.lam=Math.atan2(B,P),this.face===$o.RIGHT?e.lam=Dm(e.lam,-Xe):this.face===$o.BACK?e.lam=Dm(e.lam,-da):this.face===$o.LEFT&&(e.lam=Dm(e.lam,+Xe))}if(this.es!==0){var j,X,pt;j=e.phi<0?1:0,X=Math.tan(e.phi),pt=this.b/Math.sqrt(X*X+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-pt*pt)/(this.one_minus_f*pt)),j&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function g0(t,e,i,a){var u;return t<bn?(a.value=Hr.AREA_0,u=0):(u=Math.atan2(e,i),Math.abs(u)<=jr?a.value=Hr.AREA_0:u>jr&&u<=Xe+jr?(a.value=Hr.AREA_1,u-=Xe):u>Xe+jr||u<=-(Xe+jr)?(a.value=Hr.AREA_2,u=u>=0?u-da:u+da):(a.value=Hr.AREA_3,u+=Xe)),u}function Dm(t,e){var i=t+e;return i<-da?i+=Sv:i>+da&&(i-=Sv),i}var Mz=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Ez={init:wz,forward:Cz,inverse:Iz,names:Mz};var ob=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],qg=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],LM=.8487,DM=1.3523,RM=dh/5,Sz=1/RM,Mm=18,n_=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Tz=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function kz(t,e,i,a){for(var u=e;a;--a){var f=t(u);if(u-=f,Math.abs(f)<i)break}return u}function Pz(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Lz(t){var e=kn(t.x-this.long0),i=Math.abs(t.y),a=Math.floor(i*RM);a<0?a=0:a>=Mm&&(a=Mm-1),i=dh*(i-Sz*a);var u={x:n_(ob[a],i)*e,y:n_(qg[a],i)};return t.y<0&&(u.y=-u.y),u.x=u.x*this.a*LM+this.x0,u.y=u.y*this.a*DM+this.y0,u}function Dz(t){var e={x:(t.x-this.x0)/(this.a*LM),y:Math.abs(t.y-this.y0)/(this.a*DM)};if(e.y>=1)e.x/=ob[Mm][0],e.y=t.y<0?-Xe:Xe;else{var i=Math.floor(e.y*Mm);for(i<0?i=0:i>=Mm&&(i=Mm-1);;)if(qg[i][0]>e.y)--i;else if(qg[i+1][0]<=e.y)++i;else break;var a=qg[i],u=5*(e.y-a[0])/(qg[i+1][0]-a[0]);u=kz(function(f){return(n_(a,f)-e.y)/Tz(a,f)},u,bn,100),e.x/=n_(ob[i],u),e.y=(5*i+u)*_s,t.y<0&&(e.y=-e.y)}return e.x=kn(e.x+this.long0),e}var Rz=["Robinson","robin"];const zz={init:Pz,forward:Lz,inverse:Dz,names:Rz};function Bz(){this.name="geocent"}function Oz(t){var e=_M(t,this.es,this.a);return e}function Fz(t){var e=xM(t,this.es,this.a,this.b);return e}var Nz=["Geocentric","geocentric","geocent","Geocent"];const Vz={init:Bz,forward:Oz,inverse:Fz,names:Nz};var Hs={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Ng={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Uz(){if(Object.keys(Ng).forEach((function(i){if(typeof this[i]>"u")this[i]=Ng[i].def;else{if(Ng[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);Ng[i].num&&(this[i]=parseFloat(this[i]))}Ng[i].degrees&&(this[i]=this[i]*_s)}).bind(this)),Math.abs(Math.abs(this.lat0)-Xe)<bn?this.mode=this.lat0<0?Hs.S_POLE:Hs.N_POLE:Math.abs(this.lat0)<bn?this.mode=Hs.EQUIT:(this.mode=Hs.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function jz(t){t.x-=this.long0;var e=Math.sin(t.y),i=Math.cos(t.y),a=Math.cos(t.x),u,f;switch(this.mode){case Hs.OBLIQ:f=this.sinph0*e+this.cosph0*i*a;break;case Hs.EQUIT:f=i*a;break;case Hs.S_POLE:f=-e;break;case Hs.N_POLE:f=e;break}switch(f=this.pn1/(this.p-f),u=f*i*Math.sin(t.x),this.mode){case Hs.OBLIQ:f*=this.cosph0*e-this.sinph0*i*a;break;case Hs.EQUIT:f*=e;break;case Hs.N_POLE:f*=-(i*a);break;case Hs.S_POLE:f*=i*a;break}var o,y;return o=f*this.cg+u*this.sg,y=1/(o*this.sw*this.h1+this.cw),u=(u*this.cg-f*this.sg)*this.cw*y,f=o*y,t.x=u*this.a,t.y=f*this.a,t}function Hz(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},i,a,u;u=1/(this.pn1-t.y*this.sw),i=this.pn1*t.x*u,a=this.pn1*t.y*this.cw*u,t.x=i*this.cg+a*this.sg,t.y=a*this.cg-i*this.sg;var f=ec(t.x,t.y);if(Math.abs(f)<bn)e.x=0,e.y=t.y;else{var o,y;switch(y=1-f*f*this.pfact,y=(this.p-Math.sqrt(y))/(this.pn1/f+f/this.pn1),o=Math.sqrt(1-y*y),this.mode){case Hs.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*y*this.cosph0/f),t.y=(o-this.sinph0*Math.sin(e.y))*f,t.x*=y*this.cosph0;break;case Hs.EQUIT:e.y=Math.asin(t.y*y/f),t.y=o*f,t.x*=y;break;case Hs.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case Hs.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var Gz=["Tilted_Perspective","tpers"];const qz={init:Uz,forward:jz,inverse:Hz,names:Gz};function Wz(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Zz(t){var e=t.x,i=t.y,a,u,f,o;if(e=e-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var y=this.radius_p/ec(this.radius_p*Math.cos(i),Math.sin(i));if(u=y*Math.cos(e)*Math.cos(i),f=y*Math.sin(e)*Math.cos(i),o=y*Math.sin(i),(this.radius_g-u)*u-f*f-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=this.radius_g-u,this.flip_axis?(t.x=this.radius_g_1*Math.atan(f/ec(o,a)),t.y=this.radius_g_1*Math.atan(o/a)):(t.x=this.radius_g_1*Math.atan(f/a),t.y=this.radius_g_1*Math.atan(o/ec(f,a)))}else this.shape==="sphere"&&(a=Math.cos(i),u=Math.cos(e)*a,f=Math.sin(e)*a,o=Math.sin(i),a=this.radius_g-u,this.flip_axis?(t.x=this.radius_g_1*Math.atan(f/ec(o,a)),t.y=this.radius_g_1*Math.atan(o/a)):(t.x=this.radius_g_1*Math.atan(f/a),t.y=this.radius_g_1*Math.atan(o/ec(f,a))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function $z(t){var e=-1,i=0,a=0,u,f,o,y;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*ec(1,a)):(i=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*ec(1,i));var _=a/this.radius_p;if(u=i*i+_*_+e*e,f=2*this.radius_g*e,o=f*f-4*u*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;y=(-f-Math.sqrt(o))/(2*u),e=this.radius_g+y*e,i*=y,a*=y,t.x=Math.atan2(i,e),t.y=Math.atan(a*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(i=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+i*i)),u=i*i+a*a+e*e,f=2*this.radius_g*e,o=f*f-4*u*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;y=(-f-Math.sqrt(o))/(2*u),e=this.radius_g+y*e,i*=y,a*=y,t.x=Math.atan2(i,e),t.y=Math.atan(a*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var Yz=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Xz={init:Wz,forward:Zz,inverse:$z,names:Yz};var lv=1.340264,uv=-.081106,cv=893e-6,hv=.003796,i_=Math.sqrt(3)/2;function Kz(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function Qz(t){var e=kn(t.x-this.long0),i=t.y,a=Math.asin(i_*Math.sin(i)),u=a*a,f=u*u*u;return t.x=e*Math.cos(a)/(i_*(lv+3*uv*u+f*(7*cv+9*hv*u))),t.y=a*(lv+uv*u+f*(cv+hv*u)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Jz(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,i=12,a=t.y,u,f,o,y,_,C;for(C=0;C<i&&(u=a*a,f=u*u*u,o=a*(lv+uv*u+f*(cv+hv*u))-t.y,y=lv+3*uv*u+f*(7*cv+9*hv*u),a-=_=o/y,!(Math.abs(_)<e));++C);return u=a*a,f=u*u*u,t.x=i_*t.x*(lv+3*uv*u+f*(7*cv+9*hv*u))/Math.cos(a),t.y=Math.asin(Math.sin(a)/i_),t.x=kn(t.x+this.long0),t}var tB=["eqearth","Equal Earth","Equal_Earth"];const eB={init:Kz,forward:Qz,inverse:Jz,names:tB};function nB(t){t.Proj.projections.add(L0),t.Proj.projections.add(D0),t.Proj.projections.add(iD),t.Proj.projections.add(pD),t.Proj.projections.add(_D),t.Proj.projections.add(CD),t.Proj.projections.add(kD),t.Proj.projections.add(zD),t.Proj.projections.add(VD),t.Proj.projections.add(qD),t.Proj.projections.add(lR),t.Proj.projections.add(dR),t.Proj.projections.add(_R),t.Proj.projections.add(IR),t.Proj.projections.add(kR),t.Proj.projections.add(zR),t.Proj.projections.add(VR),t.Proj.projections.add(qR),t.Proj.projections.add(KR),t.Proj.projections.add(nz),t.Proj.projections.add(sz),t.Proj.projections.add(fz),t.Proj.projections.add(vz),t.Proj.projections.add(Az),t.Proj.projections.add(Ez),t.Proj.projections.add(zz),t.Proj.projections.add(Vz),t.Proj.projections.add(qz),t.Proj.projections.add(Xz),t.Proj.projections.add(eB)}bu.defaultDatum="WGS84";bu.Proj=mh;bu.WGS84=new bu.Proj("WGS84");bu.Point=Um;bu.toPoint=bM;bu.defs=dl;bu.nadgrid=o6;bu.transform=t_;bu.mgrs=b6;bu.version="__VERSION__";nB(bu);function zM(t){function e({longitude:i,latitude:a},u=!1){const f=hM(t)||{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"};return ab({longitude:i,latitude:a},f,u)}return{format:e}}function ab({longitude:t,latitude:e},i,a=!1){const u={longitude:"0",latitude:"0"};return!t||!e||(i&&!i.default&&i.proj4js&&([t,e]=bu(i.proj4js,[t,e])),i&&i.unit==="meter"?(u.longitude=t.toFixed(0),u.latitude=e.toFixed(0)):a?(u.longitude=rB(+t),u.latitude=iB(+e)):(u.longitude=t.toFixed(6),u.latitude=e.toFixed(6))),u}const iB=t=>`${lA(t)}° ${uA(t)}' ${parseFloat(BM(t).toFixed(2))}" ${t>0?"N":"S"}`,rB=t=>`${lA(t)}° ${uA(t)}' ${parseFloat(BM(t).toFixed(2))}" ${t>0?"E":"W"}`,lA=t=>t===0?0:Math.floor(Math.abs(t)),uA=t=>t===0?0:Math.floor((Math.abs(t)-Math.floor(Math.abs(t)))*60),BM=t=>t===0?0:(Math.abs(t)-lA(t)-uA(t)/60)*3600,bd="event";function oB(t){ff(t,bd,yl({items:[],current:{}}))}xd(bd,oB);async function aB(t,e){ia(t,bd).items.unshift(e)}async function sB(t,e){const i=ia(t,bd);if(!i||!i.items||i.items.length<1)return;const u=i.items.findIndex(f=>f.id===e.id);u<0||i.items.splice(u,1)}function lB(t,e){return(ia(t,bd).current||{})[e]}function I2(t,e,i){const a=ia(t,bd);a.current[e]=i}function sb(t,e,i=!1){const{add:a,remove:u,isActive:f}=OM(t,e);return Ov(()=>{u()}),i&&Xl(()=>{a()}),{add:a,remove:u,isActive:f}}function OM(t,e){const i=()=>{aB(t,e)},a=()=>{sB(t,e)},u=De(()=>{const f=lB(t,e.event_map_type);return f&&f.id===e.id});return{add:i,remove:a,isActive:u}}class cA{get id(){return this._id}constructor(){this._id=`${lf()}`}}class df{constructor(e={},i){this.key="",this.option={},this.option=Object.assign({},i,e)}setBuild(e){return this.build=e,this}}class Ap extends cA{constructor(){super(...arguments),this.parent=void 0}setParent(e){this.parent=e,this.data_id=e.id}}let FM=class extends cA{constructor(e,i="map"){super(),this.event_map_type=e,this.type_select=i,this.options={}}setHandler(e){return this.handler=e,this}addToMap(e){return this.handler&&e.on(this.event_map_type,this.handler),this}removeFromMap(e){return this.handler&&e.off(this.event_map_type,this.handler),this}};class uB extends FM{constructor(){super("click","map"),this.setClassPointer("pointer")}setClassPointer(e){this.options.classPointer=e}setHandler(e){return this.handler=e,this}addToMap(e){return this.handler?(this.options.classPointer&&e.getCanvas().classList.add(this.options.classPointer),e.dragPan.disable(),e.boxZoom.disable(),this.map_ranger=cB(e.getCanvasContainer(),this.handler),this):this}removeFromMap(e){return this.options.classPointer&&e.getCanvas().classList.remove(this.options.classPointer),this.map_ranger&&(this.map_ranger.destroy(),this.map_ranger=void 0),e.dragPan.enable(),e.boxZoom.enable(),this}}function cB(t,e){let i=!0,a,u,f;t.addEventListener("mousedown",y,!0);function o(B){const G=t.getBoundingClientRect();return{x:B.clientX-G.left-t.clientLeft,y:B.clientY-G.top-t.clientTop}}function y(B){document.addEventListener("mousemove",_),document.addEventListener("mouseup",C),document.addEventListener("keydown",S),a=o(B)}function _(B){if(!i)return;u=o(B),f||(f=document.createElement("div"),f.classList.add("boxdraw"),t.appendChild(f));const G=Math.min(a.x,u.x),j=Math.max(a.x,u.x),X=Math.min(a.y,u.y),pt=Math.max(a.y,u.y),J=`translate(${G}px, ${X}px)`;f.style.transform=J,f.style.width=j-G+"px",f.style.height=pt-X+"px"}function C(B){k([a,o(B)])}function S(B){B.keyCode===27&&k()}function k(B){document.removeEventListener("mousemove",_),document.removeEventListener("keydown",S),document.removeEventListener("mouseup",C),f&&(f.parentNode&&f.parentNode.removeChild(f),f=void 0),B&&e&&e(B)}function P(){t.removeEventListener("mousedown",y),i=!1,e=void 0,k()}return{destroy:P}}class hA extends FM{constructor(e="map"){super("click",e),this.setClassPointer("pointer")}setClassPointer(e){this.options.classPointer=e}addToMap(e){return this.options.classPointer&&e.getCanvas().classList.add(this.options.classPointer),this.handler&&(e.on("click",this.handler),e.on("touchstart",this.handler)),this}removeFromMap(e){return this.options.classPointer&&e.getCanvas().classList.remove(this.options.classPointer),this.handler&&(e.off("click",this.handler),e.off("touchstart",this.handler)),this}}function hB(t,e,i,a={}){return new Promise((u,f)=>{t.loadImage(i,(o,y)=>{o&&f(o),t.hasImage(e)||t.addImage(e,y,a),u(!0)})})}const fA="image";function NM(t){ff(t,fA,yl({images:{}}))}xd(fA,NM);async function fB(t,e,i,a={}){const u=ia(t,fA);return u.images[e]={path:i,id:e,name:e,is_sprite:!1,category:"custom"},cp.getMap(t,async o=>hB(o,e,i,a))}const pB=Object.freeze(Object.defineProperty({__proto__:null,addImage:fB,initMapImage:NM},Symbol.toStringTag,{value:"Module"}));var bs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function pA(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var u=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(i,a,u.get?u:{enumerable:!0,get:function(){return t[a]}})}),i}var r_={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */r_.exports;(function(t,e){(function(){var i,a="4.17.21",u=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",y="Invalid `variable` option passed into `_.template`",_="__lodash_hash_undefined__",C=500,S="__lodash_placeholder__",k=1,P=2,B=4,G=1,j=2,X=1,pt=2,J=4,nt=8,ft=16,Lt=32,xt=64,Mt=128,Ht=256,jt=512,Qt=30,Bt="...",Ft=800,Ot=16,de=1,An=2,_e=3,Ge=1/0,je=9007199254740991,Pi=17976931348623157e292,Li=NaN,Qn=4294967295,un=Qn-1,Un=Qn>>>1,ui=[["ary",Mt],["bind",X],["bindKey",pt],["curry",nt],["curryRight",ft],["flip",jt],["partial",Lt],["partialRight",xt],["rearg",Ht]],oi="[object Arguments]",wi="[object Array]",ue="[object AsyncFunction]",Qe="[object Boolean]",me="[object Date]",ke="[object DOMException]",Ci="[object Error]",Di="[object Function]",lt="[object GeneratorFunction]",wt="[object Map]",te="[object Number]",le="[object Null]",pe="[object Object]",Fe="[object Promise]",cn="[object Proxy]",we="[object RegExp]",ze="[object Set]",Te="[object String]",en="[object Symbol]",Cn="[object Undefined]",In="[object WeakMap]",Pn="[object WeakSet]",Jn="[object ArrayBuffer]",Ri="[object DataView]",Ii="[object Float32Array]",ar="[object Float64Array]",qr="[object Int8Array]",Xo="[object Int16Array]",va="[object Int32Array]",Da="[object Uint8Array]",Za="[object Uint8ClampedArray]",wr="[object Uint16Array]",To="[object Uint32Array]",$s=/\b__p \+= '';/g,Ys=/\b(__p \+=) '' \+/g,xl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ra=/&(?:amp|lt|gt|quot|#39);/g,uo=/[&<>"']/g,Xs=RegExp(Ra.source),Au=RegExp(uo.source),Wr=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,at=/^\w*$/,gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tt=/[\\^$.*+?()[\]{}|]/g,zt=RegExp(Tt.source),tt=/^\s+/,_t=/\s/,Zt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ge=/\{\n\/\* \[wrapped with (.+)\] \*/,be=/,? & /,oe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ye=/[()=,{}\[\]\/\s]/,ln=/\\(\\)?/g,on=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,se=/\w*$/,Re=/^[-+]0x[0-9a-f]+$/i,Ue=/^0b[01]+$/i,He=/^\[object .+?Constructor\]$/,ii=/^0o[0-7]+$/i,$e=/^(?:0|[1-9]\d*)$/,xi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ji=/($^)/,ci=/['\n\r\u2028\u2029\\]/g,gi="\\ud800-\\udfff",vi="\\u0300-\\u036f",ko="\\ufe20-\\ufe2f",Wn="\\u20d0-\\u20ff",Pr=vi+ko+Wn,$i="\\u2700-\\u27bf",Yn="a-z\\xdf-\\xf6\\xf8-\\xff",ai="\\xac\\xb1\\xd7\\xf7",Po="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ls="\\u2000-\\u206f",Lr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vo="A-Z\\xc0-\\xd6\\xd8-\\xde",Uc="\\ufe0e\\ufe0f",wu=ai+Po+ls+Lr,Dr="['’]",Cu="["+gi+"]",bo="["+wu+"]",Zr="["+Pr+"]",ya="\\d+",vr="["+$i+"]",$a="["+Yn+"]",_a="[^"+gi+wu+ya+$i+Yn+Vo+"]",Ql="\\ud83c[\\udffb-\\udfff]",I="(?:"+Zr+"|"+Ql+")",R="[^"+gi+"]",Y="(?:\\ud83c[\\udde6-\\uddff]){2}",vt="[\\ud800-\\udbff][\\udc00-\\udfff]",kt="["+Vo+"]",Dt="\\u200d",Gt="(?:"+$a+"|"+_a+")",Pe="(?:"+kt+"|"+_a+")",Ve="(?:"+Dr+"(?:d|ll|m|re|s|t|ve))?",nn="(?:"+Dr+"(?:D|LL|M|RE|S|T|VE))?",an=I+"?",qe="["+Uc+"]?",ti="(?:"+Dt+"(?:"+[R,Y,vt].join("|")+")"+qe+an+")*",Nr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",si="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Cr=qe+an+ti,xe="(?:"+[vr,Y,vt].join("|")+")"+Cr,wn="(?:"+[R+Zr+"?",Zr,Y,vt,Cu].join("|")+")",sr=RegExp(Dr,"g"),no=RegExp(Zr,"g"),Ji=RegExp(Ql+"(?="+Ql+")|"+wn+Cr,"g"),Ms=RegExp([kt+"?"+$a+"+"+Ve+"(?="+[bo,kt,"$"].join("|")+")",Pe+"+"+nn+"(?="+[bo,kt+Gt,"$"].join("|")+")",kt+"?"+Gt+"+"+Ve,kt+"+"+nn,si,Nr,ya,xe].join("|"),"g"),bl=RegExp("["+Dt+gi+Pr+Uc+"]"),ir=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ks=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Al=-1,Hi={};Hi[Ii]=Hi[ar]=Hi[qr]=Hi[Xo]=Hi[va]=Hi[Da]=Hi[Za]=Hi[wr]=Hi[To]=!0,Hi[oi]=Hi[wi]=Hi[Jn]=Hi[Qe]=Hi[Ri]=Hi[me]=Hi[Ci]=Hi[Di]=Hi[wt]=Hi[te]=Hi[pe]=Hi[we]=Hi[ze]=Hi[Te]=Hi[In]=!1;var Mi={};Mi[oi]=Mi[wi]=Mi[Jn]=Mi[Ri]=Mi[Qe]=Mi[me]=Mi[Ii]=Mi[ar]=Mi[qr]=Mi[Xo]=Mi[va]=Mi[wt]=Mi[te]=Mi[pe]=Mi[we]=Mi[ze]=Mi[Te]=Mi[en]=Mi[Da]=Mi[Za]=Mi[wr]=Mi[To]=!0,Mi[Ci]=Mi[Di]=Mi[In]=!1;var $r={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Jl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},vf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yf=parseFloat,Ah=parseInt,Hc=typeof bs=="object"&&bs&&bs.Object===Object&&bs,wh=typeof self=="object"&&self&&self.Object===Object&&self,co=Hc||wh||Function("return this")(),lc=e&&!e.nodeType&&e,Qs=lc&&!0&&t&&!t.nodeType&&t,_f=Qs&&Qs.exports===lc,tu=_f&&Hc.process,Ao=function(){try{var Nt=Qs&&Qs.require&&Qs.require("util").types;return Nt||tu&&tu.binding&&tu.binding("util")}catch{}}(),uc=Ao&&Ao.isArrayBuffer,ho=Ao&&Ao.isDate,za=Ao&&Ao.isMap,Es=Ao&&Ao.isRegExp,Ss=Ao&&Ao.isSet,wl=Ao&&Ao.isTypedArray;function fo(Nt,he,Jt){switch(Jt.length){case 0:return Nt.call(he);case 1:return Nt.call(he,Jt[0]);case 2:return Nt.call(he,Jt[0],Jt[1]);case 3:return Nt.call(he,Jt[0],Jt[1],Jt[2])}return Nt.apply(he,Jt)}function us(Nt,he,Jt,Ae){for(var jn=-1,li=Nt==null?0:Nt.length;++jn<li;){var Ei=Nt[jn];he(Ae,Ei,Jt(Ei),Nt)}return Ae}function wo(Nt,he){for(var Jt=-1,Ae=Nt==null?0:Nt.length;++Jt<Ae&&he(Nt[Jt],Jt,Nt)!==!1;);return Nt}function Cl(Nt,he){for(var Jt=Nt==null?0:Nt.length;Jt--&&he(Nt[Jt],Jt,Nt)!==!1;);return Nt}function Js(Nt,he){for(var Jt=-1,Ae=Nt==null?0:Nt.length;++Jt<Ae;)if(!he(Nt[Jt],Jt,Nt))return!1;return!0}function oa(Nt,he){for(var Jt=-1,Ae=Nt==null?0:Nt.length,jn=0,li=[];++Jt<Ae;){var Ei=Nt[Jt];he(Ei,Jt,Nt)&&(li[jn++]=Ei)}return li}function Iu(Nt,he){var Jt=Nt==null?0:Nt.length;return!!Jt&&eu(Nt,he,0)>-1}function tr(Nt,he,Jt){for(var Ae=-1,jn=Nt==null?0:Nt.length;++Ae<jn;)if(Jt(he,Nt[Ae]))return!0;return!1}function Vr(Nt,he){for(var Jt=-1,Ae=Nt==null?0:Nt.length,jn=Array(Ae);++Jt<Ae;)jn[Jt]=he(Nt[Jt],Jt,Nt);return jn}function Ba(Nt,he){for(var Jt=-1,Ae=he.length,jn=Nt.length;++Jt<Ae;)Nt[jn+Jt]=he[Jt];return Nt}function Il(Nt,he,Jt,Ae){var jn=-1,li=Nt==null?0:Nt.length;for(Ae&&li&&(Jt=Nt[++jn]);++jn<li;)Jt=he(Jt,Nt[jn],jn,Nt);return Jt}function Gc(Nt,he,Jt,Ae){var jn=Nt==null?0:Nt.length;for(Ae&&jn&&(Jt=Nt[--jn]);jn--;)Jt=he(Jt,Nt[jn],jn,Nt);return Jt}function Mu(Nt,he){for(var Jt=-1,Ae=Nt==null?0:Nt.length;++Jt<Ae;)if(he(Nt[Jt],Jt,Nt))return!0;return!1}var qc=aa("length");function cs(Nt){return Nt.split("")}function Ml(Nt){return Nt.match(oe)||[]}function El(Nt,he,Jt){var Ae;return Jt(Nt,function(jn,li,Ei){if(he(jn,li,Ei))return Ae=li,!1}),Ae}function cc(Nt,he,Jt,Ae){for(var jn=Nt.length,li=Jt+(Ae?1:-1);Ae?li--:++li<jn;)if(he(Nt[li],li,Nt))return li;return-1}function eu(Nt,he,Jt){return he===he?Yc(Nt,he,Jt):cc(Nt,tl,Jt)}function Ch(Nt,he,Jt,Ae){for(var jn=Jt-1,li=Nt.length;++jn<li;)if(Ae(Nt[jn],he))return jn;return-1}function tl(Nt){return Nt!==Nt}function hc(Nt,he){var Jt=Nt==null?0:Nt.length;return Jt?zi(Nt,he)/Jt:Li}function aa(Nt){return function(he){return he==null?i:he[Nt]}}function Uo(Nt){return function(he){return Nt==null?i:Nt[he]}}function el(Nt,he,Jt,Ae,jn){return jn(Nt,function(li,Ei,mn){Jt=Ae?(Ae=!1,li):he(Jt,li,Ei,mn)}),Jt}function Sl(Nt,he){var Jt=Nt.length;for(Nt.sort(he);Jt--;)Nt[Jt]=Nt[Jt].value;return Nt}function zi(Nt,he){for(var Jt,Ae=-1,jn=Nt.length;++Ae<jn;){var li=he(Nt[Ae]);li!==i&&(Jt=Jt===i?li:Jt+li)}return Jt}function Eu(Nt,he){for(var Jt=-1,Ae=Array(Nt);++Jt<Nt;)Ae[Jt]=he(Jt);return Ae}function Wc(Nt,he){return Vr(he,function(Jt){return[Jt,Nt[Jt]]})}function hs(Nt){return Nt&&Nt.slice(0,Wt(Nt)+1).replace(tt,"")}function sa(Nt){return function(he){return Nt(he)}}function Zc(Nt,he){return Vr(he,function(Jt){return Nt[Jt]})}function Su(Nt,he){return Nt.has(he)}function fc(Nt,he){for(var Jt=-1,Ae=Nt.length;++Jt<Ae&&eu(he,Nt[Jt],0)>-1;);return Jt}function Tl(Nt,he){for(var Jt=Nt.length;Jt--&&eu(he,Nt[Jt],0)>-1;);return Jt}function Tu(Nt,he){for(var Jt=Nt.length,Ae=0;Jt--;)Nt[Jt]===he&&++Ae;return Ae}var nu=Uo($r),Ts=Uo(Jl);function ku(Nt){return"\\"+vf[Nt]}function nl(Nt,he){return Nt==null?i:Nt[he]}function fs(Nt){return bl.test(Nt)}function jo(Nt){return ir.test(Nt)}function Ih(Nt){for(var he,Jt=[];!(he=Nt.next()).done;)Jt.push(he.value);return Jt}function $c(Nt){var he=-1,Jt=Array(Nt.size);return Nt.forEach(function(Ae,jn){Jt[++he]=[jn,Ae]}),Jt}function Pu(Nt,he){return function(Jt){return Nt(he(Jt))}}function Ko(Nt,he){for(var Jt=-1,Ae=Nt.length,jn=0,li=[];++Jt<Ae;){var Ei=Nt[Jt];(Ei===he||Ei===S)&&(Nt[Jt]=S,li[jn++]=Jt)}return li}function il(Nt){var he=-1,Jt=Array(Nt.size);return Nt.forEach(function(Ae){Jt[++he]=Ae}),Jt}function pc(Nt){var he=-1,Jt=Array(Nt.size);return Nt.forEach(function(Ae){Jt[++he]=[Ae,Ae]}),Jt}function Yc(Nt,he,Jt){for(var Ae=Jt-1,jn=Nt.length;++Ae<jn;)if(Nt[Ae]===he)return Ae;return-1}function kl(Nt,he,Jt){for(var Ae=Jt+1;Ae--;)if(Nt[Ae]===he)return Ae;return Ae}function iu(Nt){return fs(Nt)?rn(Nt):qc(Nt)}function xa(Nt){return fs(Nt)?zn(Nt):cs(Nt)}function Wt(Nt){for(var he=Nt.length;he--&&_t.test(Nt.charAt(he)););return he}var ce=Uo(jc);function rn(Nt){for(var he=Ji.lastIndex=0;Ji.test(Nt);)++he;return he}function zn(Nt){return Nt.match(Ji)||[]}function yr(Nt){return Nt.match(Ms)||[]}var Bi=function Nt(he){he=he==null?co:fr.defaults(co.Object(),he,fr.pick(co,Ks));var Jt=he.Array,Ae=he.Date,jn=he.Error,li=he.Function,Ei=he.Math,mn=he.Object,Gi=he.RegExp,Qo=he.String,io=he.TypeError,Oa=Jt.prototype,Lu=li.prototype,Du=mn.prototype,Xc=he["__core-js_shared__"],Yi=Lu.toString,Ln=Du.hasOwnProperty,Ya=0,pr=function(){var p=/[^.]+$/.exec(Xc&&Xc.keys&&Xc.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),ks=Du.toString,Fa=Yi.call(mn),lr=co._,Ye=Gi("^"+Yi.call(Ln).replace(Tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ro=_f?he.Buffer:i,ba=he.Symbol,Aa=he.Uint8Array,Lo=ro?ro.allocUnsafe:i,Do=Pu(mn.getPrototypeOf,mn),ru=mn.create,Be=Du.propertyIsEnumerable,rl=Oa.splice,Pl=ba?ba.isConcatSpreadable:i,Ll=ba?ba.iterator:i,oo=ba?ba.toStringTag:i,po=function(){try{var p=gs(mn,"defineProperty");return p({},"",{}),p}catch{}}(),xf=he.clearTimeout!==co.clearTimeout&&he.clearTimeout,bf=Ae&&Ae.now!==co.Date.now&&Ae.now,Xa=he.setTimeout!==co.setTimeout&&he.setTimeout,Ps=Ei.ceil,Mh=Ei.floor,dc=mn.getOwnPropertySymbols,wp=ro?ro.isBuffer:i,Af=he.isFinite,ol=Oa.join,ps=Pu(mn.keys,mn),Bn=Ei.max,Yr=Ei.min,Ls=Ae.now,Jo=he.parseInt,Ru=Ei.random,zu=Oa.reverse,ds=gs(he,"DataView"),Ro=gs(he,"Map"),mc=gs(he,"Promise"),yn=gs(he,"Set"),hn=gs(he,"WeakMap"),Bu=gs(mn,"create"),Ho=hn&&new hn,wa={},ta=rh(ds),Dl=rh(Ro),Cp=rh(mc),wf=rh(yn),nr=rh(hn),mo=ba?ba.prototype:i,Kc=mo?mo.valueOf:i,Ou=mo?mo.toString:i;function rt(p){if(Qr(p)&&!Zn(p)&&!(p instanceof mi)){if(p instanceof ua)return p;if(Ln.call(p,"__wrapped__"))return yg(p)}return new ua(p)}var Ka=function(){function p(){}return function(g){if(!Kr(g))return{};if(ru)return ru(g);p.prototype=g;var M=new p;return p.prototype=i,M}}();function la(){}function ua(p,g){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=i}rt.templateSettings={escape:Wr,evaluate:U,interpolate:Z,variable:"",imports:{_:rt}},rt.prototype=la.prototype,rt.prototype.constructor=rt,ua.prototype=Ka(la.prototype),ua.prototype.constructor=ua;function mi(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Qn,this.__views__=[]}function Cf(){var p=new mi(this.__wrapped__);return p.__actions__=Fs(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=Fs(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=Fs(this.__views__),p}function Qc(){if(this.__filtered__){var p=new mi(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function Eh(){var p=this.__wrapped__.value(),g=this.__dir__,M=Zn(p),z=g<0,q=M?p.length:0,st=f1(0,q,this.__views__),St=st.start,Vt=st.end,Kt=Vt-St,Ie=z?Vt:St-1,Ee=this.__iteratees__,Oe=Ee.length,xn=0,qn=Yr(Kt,this.__takeCount__);if(!M||!z&&q==Kt&&qn==Kt)return rg(p,this.__actions__);var fi=[];t:for(;Kt--&&xn<qn;){Ie+=g;for(var Qi=-1,pi=p[Ie];++Qi<Oe;){var or=Ee[Qi],mr=or.iteratee,du=or.type,hl=mr(pi);if(du==An)pi=hl;else if(!hl){if(du==de)continue t;break t}}fi[xn++]=pi}return fi}mi.prototype=Ka(la.prototype),mi.prototype.constructor=mi;function ou(p){var g=-1,M=p==null?0:p.length;for(this.clear();++g<M;){var z=p[g];this.set(z[0],z[1])}}function Jc(){this.__data__=Bu?Bu(null):{},this.size=0}function gc(p){var g=this.has(p)&&delete this.__data__[p];return this.size-=g?1:0,g}function Ip(p){var g=this.__data__;if(Bu){var M=g[p];return M===_?i:M}return Ln.call(g,p)?g[p]:i}function Fu(p){var g=this.__data__;return Bu?g[p]!==i:Ln.call(g,p)}function Nu(p,g){var M=this.__data__;return this.size+=this.has(p)?0:1,M[p]=Bu&&g===i?_:g,this}ou.prototype.clear=Jc,ou.prototype.delete=gc,ou.prototype.get=Ip,ou.prototype.has=Fu,ou.prototype.set=Nu;function Ds(p){var g=-1,M=p==null?0:p.length;for(this.clear();++g<M;){var z=p[g];this.set(z[0],z[1])}}function Vu(){this.__data__=[],this.size=0}function Rs(p){var g=this.__data__,M=re(g,p);if(M<0)return!1;var z=g.length-1;return M==z?g.pop():rl.call(g,M,1),--this.size,!0}function Mp(p){var g=this.__data__,M=re(g,p);return M<0?i:g[M][1]}function Sh(p){return re(this.__data__,p)>-1}function Ep(p,g){var M=this.__data__,z=re(M,p);return z<0?(++this.size,M.push([p,g])):M[z][1]=g,this}Ds.prototype.clear=Vu,Ds.prototype.delete=Rs,Ds.prototype.get=Mp,Ds.prototype.has=Sh,Ds.prototype.set=Ep;function zs(p){var g=-1,M=p==null?0:p.length;for(this.clear();++g<M;){var z=p[g];this.set(z[0],z[1])}}function l(){this.size=0,this.__data__={hash:new ou,map:new(Ro||Ds),string:new ou}}function h(p){var g=ur(this,p).delete(p);return this.size-=g?1:0,g}function c(p){return ur(this,p).get(p)}function m(p){return ur(this,p).has(p)}function b(p,g){var M=ur(this,p),z=M.size;return M.set(p,g),this.size+=M.size==z?0:1,this}zs.prototype.clear=l,zs.prototype.delete=h,zs.prototype.get=c,zs.prototype.has=m,zs.prototype.set=b;function w(p){var g=-1,M=p==null?0:p.length;for(this.__data__=new zs;++g<M;)this.add(p[g])}function E(p){return this.__data__.set(p,_),this}function L(p){return this.__data__.has(p)}w.prototype.add=w.prototype.push=E,w.prototype.has=L;function F(p){var g=this.__data__=new Ds(p);this.size=g.size}function H(){this.__data__=new Ds,this.size=0}function et(p){var g=this.__data__,M=g.delete(p);return this.size=g.size,M}function it(p){return this.__data__.get(p)}function ot(p){return this.__data__.has(p)}function yt(p,g){var M=this.__data__;if(M instanceof Ds){var z=M.__data__;if(!Ro||z.length<u-1)return z.push([p,g]),this.size=++M.size,this;M=this.__data__=new zs(z)}return M.set(p,g),this.size=M.size,this}F.prototype.clear=H,F.prototype.delete=et,F.prototype.get=it,F.prototype.has=ot,F.prototype.set=yt;function dt(p,g){var M=Zn(p),z=!M&&ns(p),q=!M&&!z&&cl(p),st=!M&&!z&&!q&&Wu(p),St=M||z||q||st,Vt=St?Eu(p.length,Qo):[],Kt=Vt.length;for(var Ie in p)(g||Ln.call(p,Ie))&&!(St&&(Ie=="length"||q&&(Ie=="offset"||Ie=="parent")||st&&(Ie=="buffer"||Ie=="byteLength"||Ie=="byteOffset")||Ns(Ie,Kt)))&&Vt.push(Ie);return Vt}function Ct(p){var g=p.length;return g?p[eg(0,g-1)]:i}function ht(p,g){return Ac(Fs(p),We(g,0,p.length))}function It(p){return Ac(Fs(p))}function Rt(p,g,M){(M!==i&&!hr(p[g],M)||M===i&&!(g in p))&&Ce(p,g,M)}function qt(p,g,M){var z=p[g];(!(Ln.call(p,g)&&hr(z,M))||M===i&&!(g in p))&&Ce(p,g,M)}function re(p,g){for(var M=p.length;M--;)if(hr(p[M][0],g))return M;return-1}function ne(p,g,M,z){return Dn(p,function(q,st,St){g(z,q,M(q),St)}),z}function ae(p,g){return p&&ju(g,fa(g),p)}function ve(p,g){return p&&ju(g,ea(g),p)}function Ce(p,g,M){g=="__proto__"&&po?po(p,g,{configurable:!0,enumerable:!0,value:M,writable:!0}):p[g]=M}function Le(p,g){for(var M=-1,z=g.length,q=Jt(z),st=p==null;++M<z;)q[M]=st?i:cm(p,g[M]);return q}function We(p,g,M){return p===p&&(M!==i&&(p=p<=M?p:M),g!==i&&(p=p>=g?p:g)),p}function fn(p,g,M,z,q,st){var St,Vt=g&k,Kt=g&P,Ie=g&B;if(M&&(St=q?M(p,z,q,st):M(p)),St!==i)return St;if(!Kr(p))return p;var Ee=Zn(p);if(Ee){if(St=d1(p),!Vt)return Fs(p,St)}else{var Oe=Ja(p),xn=Oe==Di||Oe==lt;if(cl(p))return ny(p,Vt);if(Oe==pe||Oe==oi||xn&&!q){if(St=Kt||xn?{}:gy(p),!Vt)return Kt?Sf(p,ve(St,p)):oy(p,ae(St,p))}else{if(!Mi[Oe])return q?p:{};St=m1(p,Oe,Vt)}}st||(st=new F);var qn=st.get(p);if(qn)return qn;st.set(p,St),Gh(p)?p.forEach(function(pi){St.add(fn(pi,g,M,pi,p,st))}):Mc(p)&&p.forEach(function(pi,or){St.set(or,fn(pi,g,M,or,p,st))});var fi=Ie?Kt?hg:cg:Kt?ea:fa,Qi=Ee?i:fi(p);return wo(Qi||p,function(pi,or){Qi&&(or=pi,pi=p[or]),qt(St,or,fn(pi,g,M,or,p,st))}),St}function Tn(p){var g=fa(p);return function(M){return En(M,p,g)}}function En(p,g,M){var z=M.length;if(p==null)return!z;for(p=mn(p);z--;){var q=M[z],st=g[q],St=p[q];if(St===i&&!(q in p)||!st(St))return!1}return!0}function Oi(p,g,M){if(typeof p!="function")throw new io(o);return Bh(function(){p.apply(i,M)},g)}function tn(p,g,M,z){var q=-1,st=Iu,St=!0,Vt=p.length,Kt=[],Ie=g.length;if(!Vt)return Kt;M&&(g=Vr(g,sa(M))),z?(st=tr,St=!1):g.length>=u&&(st=Su,St=!1,g=new w(g));t:for(;++q<Vt;){var Ee=p[q],Oe=M==null?Ee:M(Ee);if(Ee=z||Ee!==0?Ee:0,St&&Oe===Oe){for(var xn=Ie;xn--;)if(g[xn]===Oe)continue t;Kt.push(Ee)}else st(g,Oe,z)||Kt.push(Ee)}return Kt}var Dn=ag(Ur),ei=ag(Co,!0);function Gn(p,g){var M=!0;return Dn(p,function(z,q,st){return M=!!g(z,q,st),M}),M}function Nn(p,g,M){for(var z=-1,q=p.length;++z<q;){var st=p[z],St=g(st);if(St!=null&&(Vt===i?St===St&&!Sa(St):M(St,Vt)))var Vt=St,Kt=st}return Kt}function ni(p,g,M,z){var q=p.length;for(M=Ti(M),M<0&&(M=-M>q?0:q+M),z=z===i||z>q?q:Ti(z),z<0&&(z+=q),z=M>z?0:Hy(z);M<z;)p[M++]=g;return p}function Vn(p,g){var M=[];return Dn(p,function(z,q,st){g(z,q,st)&&M.push(z)}),M}function gn(p,g,M,z,q){var st=-1,St=p.length;for(M||(M=Vd),q||(q=[]);++st<St;){var Vt=p[st];g>0&&M(Vt)?g>1?gn(Vt,g-1,M,z,q):Ba(q,Vt):z||(q[q.length]=Vt)}return q}var go=sg(),Xr=sg(!0);function Ur(p,g){return p&&go(p,g,fa)}function Co(p,g){return p&&Xr(p,g,fa)}function Ir(p,g){return oa(g,function(M){return jl(p[M])})}function _r(p,g){g=xc(g,p);for(var M=0,z=g.length;p!=null&&M<z;)p=p[fu(g[M++])];return M&&M==z?p:i}function Na(p,g,M){var z=g(p);return Zn(p)?z:Ba(z,M(p))}function gr(p){return p==null?p===i?Cn:le:oo&&oo in mn(p)?Pf(p):Hd(p)}function Rl(p,g){return p>g}function Va(p,g){return p!=null&&Ln.call(p,g)}function al(p,g){return p!=null&&g in mn(p)}function Bs(p,g,M){return p>=Yr(g,M)&&p<Bn(g,M)}function vc(p,g,M){for(var z=M?tr:Iu,q=p[0].length,st=p.length,St=st,Vt=Jt(st),Kt=1/0,Ie=[];St--;){var Ee=p[St];St&&g&&(Ee=Vr(Ee,sa(g))),Kt=Yr(Ee.length,Kt),Vt[St]=!M&&(g||q>=120&&Ee.length>=120)?new w(St&&Ee):i}Ee=p[0];var Oe=-1,xn=Vt[0];t:for(;++Oe<q&&Ie.length<Kt;){var qn=Ee[Oe],fi=g?g(qn):qn;if(qn=M||qn!==0?qn:0,!(xn?Su(xn,fi):z(Ie,fi,M))){for(St=st;--St;){var Qi=Vt[St];if(!(Qi?Su(Qi,fi):z(p[St],fi,M)))continue t}xn&&xn.push(fi),Ie.push(qn)}}return Ie}function th(p,g,M,z){return Ur(p,function(q,st,St){g(z,M(q),st,St)}),z}function Os(p,g,M){g=xc(g,p),p=dg(p,g);var z=p==null?p:p[fu(Vl(g))];return z==null?i:fo(z,p,M)}function yc(p){return Qr(p)&&gr(p)==oi}function Th(p){return Qr(p)&&gr(p)==Jn}function zl(p){return Qr(p)&&gr(p)==me}function au(p,g,M,z,q){return p===g?!0:p==null||g==null||!Qr(p)&&!Qr(g)?p!==p&&g!==g:Bl(p,g,M,z,au,q)}function Bl(p,g,M,z,q,st){var St=Zn(p),Vt=Zn(g),Kt=St?wi:Ja(p),Ie=Vt?wi:Ja(g);Kt=Kt==oi?pe:Kt,Ie=Ie==oi?pe:Ie;var Ee=Kt==pe,Oe=Ie==pe,xn=Kt==Ie;if(xn&&cl(p)){if(!cl(g))return!1;St=!0,Ee=!1}if(xn&&!Ee)return st||(st=new F),St||Wu(p)?py(p,g,M,z,q,st):c1(p,g,Kt,M,z,q,st);if(!(M&G)){var qn=Ee&&Ln.call(p,"__wrapped__"),fi=Oe&&Ln.call(g,"__wrapped__");if(qn||fi){var Qi=qn?p.value():p,pi=fi?g.value():g;return st||(st=new F),q(Qi,pi,M,z,st)}}return xn?(st||(st=new F),h1(p,g,M,z,q,st)):!1}function zo(p){return Qr(p)&&Ja(p)==wt}function sl(p,g,M,z){var q=M.length,st=q,St=!z;if(p==null)return!st;for(p=mn(p);q--;){var Vt=M[q];if(St&&Vt[2]?Vt[1]!==p[Vt[0]]:!(Vt[0]in p))return!1}for(;++q<st;){Vt=M[q];var Kt=Vt[0],Ie=p[Kt],Ee=Vt[1];if(St&&Vt[2]){if(Ie===i&&!(Kt in p))return!1}else{var Oe=new F;if(z)var xn=z(Ie,Ee,Kt,p,g,Oe);if(!(xn===i?au(Ee,Ie,G|j,z,Oe):xn))return!1}}return!0}function su(p){if(!Kr(p)||vy(p))return!1;var g=jl(p)?Ye:He;return g.test(rh(p))}function _c(p){return Qr(p)&&gr(p)==we}function Xi(p){return Qr(p)&&Ja(p)==ze}function ms(p){return Qr(p)&&Hl(p.length)&&!!Hi[gr(p)]}function Ca(p){return typeof p=="function"?p:p==null?Gl:typeof p=="object"?Zn(p)?Sp(p[0],p[1]):nh(p):ZA(p)}function lu(p){if(!bc(p))return ps(p);var g=[];for(var M in mn(p))Ln.call(p,M)&&M!="constructor"&&g.push(M);return g}function Jm(p){if(!Kr(p))return jd(p);var g=bc(p),M=[];for(var z in p)z=="constructor"&&(g||!Ln.call(p,z))||M.push(z);return M}function eh(p,g){return p<g}function Cd(p,g){var M=-1,z=Ki(p)?Jt(p.length):[];return Dn(p,function(q,st,St){z[++M]=g(q,st,St)}),z}function nh(p){var g=Fd(p);return g.length==1&&g[0][2]?vs(g[0][0],g[0][1]):function(M){return M===p||sl(M,p,g)}}function Sp(p,g){return fg(p)&&Lf(g)?vs(fu(p),g):function(M){var z=cm(M,p);return z===i&&z===g?Hf(M,p):au(g,z,G|j)}}function uu(p,g,M,z,q){p!==g&&go(g,function(st,St){if(q||(q=new F),Kr(st))If(p,g,St,M,uu,z,q);else{var Vt=z?z(mg(p,St),st,St+"",p,g,q):i;Vt===i&&(Vt=st),Rt(p,St,Vt)}},ea)}function If(p,g,M,z,q,st,St){var Vt=mg(p,M),Kt=mg(g,M),Ie=St.get(Kt);if(Ie){Rt(p,M,Ie);return}var Ee=st?st(Vt,Kt,M+"",p,g,St):i,Oe=Ee===i;if(Oe){var xn=Zn(Kt),qn=!xn&&cl(Kt),fi=!xn&&!qn&&Wu(Kt);Ee=Kt,xn||qn||fi?Zn(Vt)?Ee=Vt:Sr(Vt)?Ee=Fs(Vt):qn?(Oe=!1,Ee=ny(Kt,!0)):fi?(Oe=!1,Ee=Pd(Kt,!0)):Ee=[]:Ec(Kt)||ns(Kt)?(Ee=Vt,ns(Vt)?Ee=eo(Vt):(!Kr(Vt)||jl(Vt))&&(Ee=gy(Kt))):Oe=!1}Oe&&(St.set(Kt,Ee),q(Ee,Kt,z,st,St),St.delete(Kt)),Rt(p,M,Ee)}function Id(p,g){var M=p.length;if(M)return g+=g<0?M:0,Ns(g,M)?p[g]:i}function ih(p,g,M){g.length?g=Vr(g,function(st){return Zn(st)?function(St){return _r(St,st.length===1?st[0]:st)}:st}):g=[Gl];var z=-1;g=Vr(g,sa(Xn()));var q=Cd(p,function(st,St,Vt){var Kt=Vr(g,function(Ie){return Ie(st)});return{criteria:Kt,index:++z,value:st}});return Sl(q,function(st,St){return cu(st,St,M)})}function Qa(p,g){return Kv(p,g,function(M,z){return Hf(p,z)})}function Kv(p,g,M){for(var z=-1,q=g.length,st={};++z<q;){var St=g[z],Vt=_r(p,St);M(Vt,St)&&Ol(st,xc(St,p),Vt)}return st}function Qv(p){return function(g){return _r(g,p)}}function tg(p,g,M,z){var q=z?Ch:eu,st=-1,St=g.length,Vt=p;for(p===g&&(g=Fs(g)),M&&(Vt=Vr(p,sa(M)));++st<St;)for(var Kt=0,Ie=g[st],Ee=M?M(Ie):Ie;(Kt=q(Vt,Ee,Kt,z))>-1;)Vt!==p&&rl.call(Vt,Kt,1),rl.call(p,Kt,1);return p}function Jv(p,g){for(var M=p?g.length:0,z=M-1;M--;){var q=g[M];if(M==z||q!==st){var st=q;Ns(q)?rl.call(p,q,1):ig(p,q)}}return p}function eg(p,g){return p+Mh(Ru()*(g-p+1))}function n1(p,g,M,z){for(var q=-1,st=Bn(Ps((g-p)/(M||1)),0),St=Jt(st);st--;)St[z?st:++q]=p,p+=M;return St}function Tp(p,g){var M="";if(!p||g<1||g>je)return M;do g%2&&(M+=p),g=Mh(g/2),g&&(p+=p);while(g);return M}function qi(p,g){return zp(es(p,g,Gl),p+"")}function Md(p){return Ct($h(p))}function ty(p,g){var M=$h(p);return Ac(M,We(g,0,M.length))}function Ol(p,g,M,z){if(!Kr(p))return p;g=xc(g,p);for(var q=-1,st=g.length,St=st-1,Vt=p;Vt!=null&&++q<st;){var Kt=fu(g[q]),Ie=M;if(Kt==="__proto__"||Kt==="constructor"||Kt==="prototype")return p;if(q!=St){var Ee=Vt[Kt];Ie=z?z(Ee,Kt,Vt):i,Ie===i&&(Ie=Kr(Ee)?Ee:Ns(g[q+1])?[]:{})}qt(Vt,Kt,Ie),Vt=Vt[Kt]}return p}var Mf=Ho?function(p,g){return Ho.set(p,g),p}:Gl,i1=po?function(p,g){return po(p,"toString",{configurable:!0,enumerable:!1,value:q1(g),writable:!0})}:Gl;function r1(p){return Ac($h(p))}function Fl(p,g,M){var z=-1,q=p.length;g<0&&(g=-g>q?0:q+g),M=M>q?q:M,M<0&&(M+=q),q=g>M?0:M-g>>>0,g>>>=0;for(var st=Jt(q);++z<q;)st[z]=p[z+g];return st}function o1(p,g){var M;return Dn(p,function(z,q,st){return M=g(z,q,st),!M}),!!M}function Ed(p,g,M){var z=0,q=p==null?z:p.length;if(typeof g=="number"&&g===g&&q<=Un){for(;z<q;){var st=z+q>>>1,St=p[st];St!==null&&!Sa(St)&&(M?St<=g:St<g)?z=st+1:q=st}return q}return ng(p,g,Gl,M)}function ng(p,g,M,z){var q=0,st=p==null?0:p.length;if(st===0)return 0;g=M(g);for(var St=g!==g,Vt=g===null,Kt=Sa(g),Ie=g===i;q<st;){var Ee=Mh((q+st)/2),Oe=M(p[Ee]),xn=Oe!==i,qn=Oe===null,fi=Oe===Oe,Qi=Sa(Oe);if(St)var pi=z||fi;else Ie?pi=fi&&(z||xn):Vt?pi=fi&&xn&&(z||!qn):Kt?pi=fi&&xn&&!qn&&(z||!Qi):qn||Qi?pi=!1:pi=z?Oe<=g:Oe<g;pi?q=Ee+1:st=Ee}return Yr(st,un)}function ey(p,g){for(var M=-1,z=p.length,q=0,st=[];++M<z;){var St=p[M],Vt=g?g(St):St;if(!M||!hr(Vt,Kt)){var Kt=Vt;st[q++]=St===0?0:St}}return st}function Sd(p){return typeof p=="number"?p:Sa(p)?Li:+p}function ll(p){if(typeof p=="string")return p;if(Zn(p))return Vr(p,ll)+"";if(Sa(p))return Ou?Ou.call(p):"";var g=p+"";return g=="0"&&1/p==-Ge?"-0":g}function ul(p,g,M){var z=-1,q=Iu,st=p.length,St=!0,Vt=[],Kt=Vt;if(M)St=!1,q=tr;else if(st>=u){var Ie=g?null:Ua(p);if(Ie)return il(Ie);St=!1,q=Su,Kt=new w}else Kt=g?[]:Vt;t:for(;++z<st;){var Ee=p[z],Oe=g?g(Ee):Ee;if(Ee=M||Ee!==0?Ee:0,St&&Oe===Oe){for(var xn=Kt.length;xn--;)if(Kt[xn]===Oe)continue t;g&&Kt.push(Oe),Vt.push(Ee)}else q(Kt,Oe,M)||(Kt!==Vt&&Kt.push(Oe),Vt.push(Ee))}return Vt}function ig(p,g){return g=xc(g,p),p=dg(p,g),p==null||delete p[fu(Vl(g))]}function vo(p,g,M,z){return Ol(p,g,M(_r(p,g)),z)}function kh(p,g,M,z){for(var q=p.length,st=z?q:-1;(z?st--:++st<q)&&g(p[st],st,p););return M?Fl(p,z?0:st,z?st+1:q):Fl(p,z?st+1:0,z?q:st)}function rg(p,g){var M=p;return M instanceof mi&&(M=M.value()),Il(g,function(z,q){return q.func.apply(q.thisArg,Ba([z],q.args))},M)}function Ef(p,g,M){var z=p.length;if(z<2)return z?ul(p[0]):[];for(var q=-1,st=Jt(z);++q<z;)for(var St=p[q],Vt=-1;++Vt<z;)Vt!=q&&(st[q]=tn(st[q]||St,p[Vt],g,M));return ul(gn(st,1),g,M)}function kp(p,g,M){for(var z=-1,q=p.length,st=g.length,St={};++z<q;){var Vt=z<st?g[z]:i;M(St,p[z],Vt)}return St}function Ph(p){return Sr(p)?p:[]}function Td(p){return typeof p=="function"?p:Gl}function xc(p,g){return Zn(p)?p:fg(p,g)?[p]:Gd(Tr(p))}var Pp=qi;function Uu(p,g,M){var z=p.length;return M=M===i?z:M,!g&&M>=z?p:Fl(p,g,M)}var kd=xf||function(p){return co.clearTimeout(p)};function ny(p,g){if(g)return p.slice();var M=p.length,z=Lo?Lo(M):new p.constructor(M);return p.copy(z),z}function Lh(p){var g=new p.constructor(p.byteLength);return new Aa(g).set(new Aa(p)),g}function a1(p,g){var M=g?Lh(p.buffer):p.buffer;return new p.constructor(M,p.byteOffset,p.byteLength)}function og(p){var g=new p.constructor(p.source,se.exec(p));return g.lastIndex=p.lastIndex,g}function s1(p){return Kc?mn(Kc.call(p)):{}}function Pd(p,g){var M=g?Lh(p.buffer):p.buffer;return new p.constructor(M,p.byteOffset,p.length)}function Ld(p,g){if(p!==g){var M=p!==i,z=p===null,q=p===p,st=Sa(p),St=g!==i,Vt=g===null,Kt=g===g,Ie=Sa(g);if(!Vt&&!Ie&&!st&&p>g||st&&St&&Kt&&!Vt&&!Ie||z&&St&&Kt||!M&&Kt||!q)return 1;if(!z&&!st&&!Ie&&p<g||Ie&&M&&q&&!z&&!st||Vt&&M&&q||!St&&q||!Kt)return-1}return 0}function cu(p,g,M){for(var z=-1,q=p.criteria,st=g.criteria,St=q.length,Vt=M.length;++z<St;){var Kt=Ld(q[z],st[z]);if(Kt){if(z>=Vt)return Kt;var Ie=M[z];return Kt*(Ie=="desc"?-1:1)}}return p.index-g.index}function iy(p,g,M,z){for(var q=-1,st=p.length,St=M.length,Vt=-1,Kt=g.length,Ie=Bn(st-St,0),Ee=Jt(Kt+Ie),Oe=!z;++Vt<Kt;)Ee[Vt]=g[Vt];for(;++q<St;)(Oe||q<st)&&(Ee[M[q]]=p[q]);for(;Ie--;)Ee[Vt++]=p[q++];return Ee}function ry(p,g,M,z){for(var q=-1,st=p.length,St=-1,Vt=M.length,Kt=-1,Ie=g.length,Ee=Bn(st-Vt,0),Oe=Jt(Ee+Ie),xn=!z;++q<Ee;)Oe[q]=p[q];for(var qn=q;++Kt<Ie;)Oe[qn+Kt]=g[Kt];for(;++St<Vt;)(xn||q<st)&&(Oe[qn+M[St]]=p[q++]);return Oe}function Fs(p,g){var M=-1,z=p.length;for(g||(g=Jt(z));++M<z;)g[M]=p[M];return g}function ju(p,g,M,z){var q=!M;M||(M={});for(var st=-1,St=g.length;++st<St;){var Vt=g[st],Kt=z?z(M[Vt],p[Vt],Vt,M,p):i;Kt===i&&(Kt=p[Vt]),q?Ce(M,Vt,Kt):qt(M,Vt,Kt)}return M}function oy(p,g){return ju(p,Nd(p),g)}function Sf(p,g){return ju(p,dy(p),g)}function Dd(p,g){return function(M,z){var q=Zn(M)?us:ne,st=g?g():{};return q(M,p,Xn(z,2),st)}}function Tf(p){return qi(function(g,M){var z=-1,q=M.length,st=q>1?M[q-1]:i,St=q>2?M[2]:i;for(st=p.length>3&&typeof st=="function"?(q--,st):i,St&&ts(M[0],M[1],St)&&(st=q<3?i:st,q=1),g=mn(g);++z<q;){var Vt=M[z];Vt&&p(g,Vt,z,st)}return g})}function ag(p,g){return function(M,z){if(M==null)return M;if(!Ki(M))return p(M,z);for(var q=M.length,st=g?q:-1,St=mn(M);(g?st--:++st<q)&&z(St[st],st,St)!==!1;);return M}}function sg(p){return function(g,M,z){for(var q=-1,st=mn(g),St=z(g),Vt=St.length;Vt--;){var Kt=St[p?Vt:++q];if(M(st[Kt],Kt,st)===!1)break}return g}}function l1(p,g,M){var z=g&X,q=Lp(p);function st(){var St=this&&this!==co&&this instanceof st?q:p;return St.apply(z?M:this,arguments)}return st}function ay(p){return function(g){g=Tr(g);var M=fs(g)?xa(g):i,z=M?M[0]:g.charAt(0),q=M?Uu(M,1).join(""):g.slice(1);return z[p]()+q}}function hu(p){return function(g){return Il(qA(Rg(g).replace(sr,"")),p,"")}}function Lp(p){return function(){var g=arguments;switch(g.length){case 0:return new p;case 1:return new p(g[0]);case 2:return new p(g[0],g[1]);case 3:return new p(g[0],g[1],g[2]);case 4:return new p(g[0],g[1],g[2],g[3]);case 5:return new p(g[0],g[1],g[2],g[3],g[4]);case 6:return new p(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new p(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var M=Ka(p.prototype),z=p.apply(M,g);return Kr(z)?z:M}}function lg(p,g,M){var z=Lp(p);function q(){for(var st=arguments.length,St=Jt(st),Vt=st,Kt=zh(q);Vt--;)St[Vt]=arguments[Vt];var Ie=st<3&&St[0]!==Kt&&St[st-1]!==Kt?[]:Ko(St,Kt);if(st-=Ie.length,st<M)return uy(p,g,Rd,q.placeholder,i,St,Ie,i,i,M-st);var Ee=this&&this!==co&&this instanceof q?z:p;return fo(Ee,this,St)}return q}function kf(p){return function(g,M,z){var q=mn(g);if(!Ki(g)){var st=Xn(M,3);g=fa(g),M=function(Vt){return st(q[Vt],Vt,q)}}var St=p(g,M,z);return St>-1?q[st?g[St]:St]:i}}function Nl(p){return Gu(function(g){var M=g.length,z=M,q=ua.prototype.thru;for(p&&g.reverse();z--;){var st=g[z];if(typeof st!="function")throw new io(o);if(q&&!St&&Rp(st)=="wrapper")var St=new ua([],!0)}for(z=St?z:M;++z<M;){st=g[z];var Vt=Rp(st),Kt=Vt=="wrapper"?Rh(st):i;Kt&&pg(Kt[0])&&Kt[1]==(Mt|nt|Lt|Ht)&&!Kt[4].length&&Kt[9]==1?St=St[Rp(Kt[0])].apply(St,Kt[3]):St=st.length==1&&pg(st)?St[Vt]():St.thru(st)}return function(){var Ie=arguments,Ee=Ie[0];if(St&&Ie.length==1&&Zn(Ee))return St.plant(Ee).value();for(var Oe=0,xn=M?g[Oe].apply(this,Ie):Ee;++Oe<M;)xn=g[Oe].call(this,xn);return xn}})}function Rd(p,g,M,z,q,st,St,Vt,Kt,Ie){var Ee=g&Mt,Oe=g&X,xn=g&pt,qn=g&(nt|ft),fi=g&jt,Qi=xn?i:Lp(p);function pi(){for(var or=arguments.length,mr=Jt(or),du=or;du--;)mr[du]=arguments[du];if(qn)var hl=zh(pi),mu=Tu(mr,hl);if(z&&(mr=iy(mr,z,q,qn)),st&&(mr=ry(mr,st,St,qn)),or-=mu,qn&&or<Ie){var pa=Ko(mr,hl);return uy(p,g,Rd,pi.placeholder,M,mr,pa,Vt,Kt,Ie-or)}var Tc=Oe?M:this,Yh=xn?Tc[p]:p;return or=mr.length,Vt?mr=yy(mr,Vt):fi&&or>1&&mr.reverse(),Ee&&Kt<or&&(mr.length=Kt),this&&this!==co&&this instanceof pi&&(Yh=Qi||Lp(Yh)),Yh.apply(Tc,mr)}return pi}function sy(p,g){return function(M,z){return th(M,p,g(z),{})}}function zd(p,g){return function(M,z){var q;if(M===i&&z===i)return g;if(M!==i&&(q=M),z!==i){if(q===i)return z;typeof M=="string"||typeof z=="string"?(M=ll(M),z=ll(z)):(M=Sd(M),z=Sd(z)),q=p(M,z)}return q}}function Dh(p){return Gu(function(g){return g=Vr(g,sa(Xn())),qi(function(M){var z=this;return p(g,function(q){return fo(q,z,M)})})})}function Dp(p,g){g=g===i?" ":ll(g);var M=g.length;if(M<2)return M?Tp(g,p):g;var z=Tp(g,Ps(p/iu(g)));return fs(g)?Uu(xa(z),0,p).join(""):z.slice(0,p)}function u1(p,g,M,z){var q=g&X,st=Lp(p);function St(){for(var Vt=-1,Kt=arguments.length,Ie=-1,Ee=z.length,Oe=Jt(Ee+Kt),xn=this&&this!==co&&this instanceof St?st:p;++Ie<Ee;)Oe[Ie]=z[Ie];for(;Kt--;)Oe[Ie++]=arguments[++Vt];return fo(xn,q?M:this,Oe)}return St}function ly(p){return function(g,M,z){return z&&typeof z!="number"&&ts(g,M,z)&&(M=z=i),g=Zu(g),M===i?(M=g,g=0):M=Zu(M),z=z===i?g<M?1:-1:Zu(z),n1(g,M,z,p)}}function Bd(p){return function(g,M){return typeof g=="string"&&typeof M=="string"||(g=is(g),M=is(M)),p(g,M)}}function uy(p,g,M,z,q,st,St,Vt,Kt,Ie){var Ee=g&nt,Oe=Ee?St:i,xn=Ee?i:St,qn=Ee?st:i,fi=Ee?i:st;g|=Ee?Lt:xt,g&=~(Ee?xt:Lt),g&J||(g&=~(X|pt));var Qi=[p,g,q,qn,Oe,fi,xn,Vt,Kt,Ie],pi=M.apply(i,Qi);return pg(p)&&gg(pi,Qi),pi.placeholder=z,_y(pi,p,g)}function Od(p){var g=Ei[p];return function(M,z){if(M=is(M),z=z==null?0:Yr(Ti(z),292),z&&Af(M)){var q=(Tr(M)+"e").split("e"),st=g(q[0]+"e"+(+q[1]+z));return q=(Tr(st)+"e").split("e"),+(q[0]+"e"+(+q[1]-z))}return g(M)}}var Ua=yn&&1/il(new yn([,-0]))[1]==Ge?function(p){return new yn(p)}:$1;function cy(p){return function(g){var M=Ja(g);return M==wt?$c(g):M==ze?pc(g):Wc(g,p(g))}}function Hu(p,g,M,z,q,st,St,Vt){var Kt=g&pt;if(!Kt&&typeof p!="function")throw new io(o);var Ie=z?z.length:0;if(Ie||(g&=~(Lt|xt),z=q=i),St=St===i?St:Bn(Ti(St),0),Vt=Vt===i?Vt:Ti(Vt),Ie-=q?q.length:0,g&xt){var Ee=z,Oe=q;z=q=i}var xn=Kt?i:Rh(p),qn=[p,g,M,z,q,Ee,Oe,st,St,Vt];if(xn&&Ia(qn,xn),p=qn[0],g=qn[1],M=qn[2],z=qn[3],q=qn[4],Vt=qn[9]=qn[9]===i?Kt?0:p.length:Bn(qn[9]-Ie,0),!Vt&&g&(nt|ft)&&(g&=~(nt|ft)),!g||g==X)var fi=l1(p,g,M);else g==nt||g==ft?fi=lg(p,g,Vt):(g==Lt||g==(X|Lt))&&!q.length?fi=u1(p,g,M,z):fi=Rd.apply(i,qn);var Qi=xn?Mf:gg;return _y(Qi(fi,qn),p,g)}function ug(p,g,M,z){return p===i||hr(p,Du[M])&&!Ln.call(z,M)?g:p}function hy(p,g,M,z,q,st){return Kr(p)&&Kr(g)&&(st.set(g,p),uu(p,g,i,hy,st),st.delete(g)),p}function fy(p){return Ec(p)?i:p}function py(p,g,M,z,q,st){var St=M&G,Vt=p.length,Kt=g.length;if(Vt!=Kt&&!(St&&Kt>Vt))return!1;var Ie=st.get(p),Ee=st.get(g);if(Ie&&Ee)return Ie==g&&Ee==p;var Oe=-1,xn=!0,qn=M&j?new w:i;for(st.set(p,g),st.set(g,p);++Oe<Vt;){var fi=p[Oe],Qi=g[Oe];if(z)var pi=St?z(Qi,fi,Oe,g,p,st):z(fi,Qi,Oe,p,g,st);if(pi!==i){if(pi)continue;xn=!1;break}if(qn){if(!Mu(g,function(or,mr){if(!Su(qn,mr)&&(fi===or||q(fi,or,M,z,st)))return qn.push(mr)})){xn=!1;break}}else if(!(fi===Qi||q(fi,Qi,M,z,st))){xn=!1;break}}return st.delete(p),st.delete(g),xn}function c1(p,g,M,z,q,st,St){switch(M){case Ri:if(p.byteLength!=g.byteLength||p.byteOffset!=g.byteOffset)return!1;p=p.buffer,g=g.buffer;case Jn:return!(p.byteLength!=g.byteLength||!st(new Aa(p),new Aa(g)));case Qe:case me:case te:return hr(+p,+g);case Ci:return p.name==g.name&&p.message==g.message;case we:case Te:return p==g+"";case wt:var Vt=$c;case ze:var Kt=z&G;if(Vt||(Vt=il),p.size!=g.size&&!Kt)return!1;var Ie=St.get(p);if(Ie)return Ie==g;z|=j,St.set(p,g);var Ee=py(Vt(p),Vt(g),z,q,st,St);return St.delete(p),Ee;case en:if(Kc)return Kc.call(p)==Kc.call(g)}return!1}function h1(p,g,M,z,q,st){var St=M&G,Vt=cg(p),Kt=Vt.length,Ie=cg(g),Ee=Ie.length;if(Kt!=Ee&&!St)return!1;for(var Oe=Kt;Oe--;){var xn=Vt[Oe];if(!(St?xn in g:Ln.call(g,xn)))return!1}var qn=st.get(p),fi=st.get(g);if(qn&&fi)return qn==g&&fi==p;var Qi=!0;st.set(p,g),st.set(g,p);for(var pi=St;++Oe<Kt;){xn=Vt[Oe];var or=p[xn],mr=g[xn];if(z)var du=St?z(mr,or,xn,g,p,st):z(or,mr,xn,p,g,st);if(!(du===i?or===mr||q(or,mr,M,z,st):du)){Qi=!1;break}pi||(pi=xn=="constructor")}if(Qi&&!pi){var hl=p.constructor,mu=g.constructor;hl!=mu&&"constructor"in p&&"constructor"in g&&!(typeof hl=="function"&&hl instanceof hl&&typeof mu=="function"&&mu instanceof mu)&&(Qi=!1)}return st.delete(p),st.delete(g),Qi}function Gu(p){return zp(es(p,i,My),p+"")}function cg(p){return Na(p,fa,Nd)}function hg(p){return Na(p,ea,dy)}var Rh=Ho?function(p){return Ho.get(p)}:$1;function Rp(p){for(var g=p.name+"",M=wa[g],z=Ln.call(wa,g)?M.length:0;z--;){var q=M[z],st=q.func;if(st==null||st==p)return q.name}return g}function zh(p){var g=Ln.call(rt,"placeholder")?rt:p;return g.placeholder}function Xn(){var p=rt.iteratee||W1;return p=p===W1?Ca:p,arguments.length?p(arguments[0],arguments[1]):p}function ur(p,g){var M=p.__data__;return v1(g)?M[typeof g=="string"?"string":"hash"]:M.map}function Fd(p){for(var g=fa(p),M=g.length;M--;){var z=g[M],q=p[z];g[M]=[z,q,Lf(q)]}return g}function gs(p,g){var M=nl(p,g);return su(M)?M:i}function Pf(p){var g=Ln.call(p,oo),M=p[oo];try{p[oo]=i;var z=!0}catch{}var q=ks.call(p);return z&&(g?p[oo]=M:delete p[oo]),q}var Nd=dc?function(p){return p==null?[]:(p=mn(p),oa(dc(p),function(g){return Be.call(p,g)}))}:Y1,dy=dc?function(p){for(var g=[];p;)Ba(g,Nd(p)),p=Do(p);return g}:Y1,Ja=gr;(ds&&Ja(new ds(new ArrayBuffer(1)))!=Ri||Ro&&Ja(new Ro)!=wt||mc&&Ja(mc.resolve())!=Fe||yn&&Ja(new yn)!=ze||hn&&Ja(new hn)!=In)&&(Ja=function(p){var g=gr(p),M=g==pe?p.constructor:i,z=M?rh(M):"";if(z)switch(z){case ta:return Ri;case Dl:return wt;case Cp:return Fe;case wf:return ze;case nr:return In}return g});function f1(p,g,M){for(var z=-1,q=M.length;++z<q;){var st=M[z],St=st.size;switch(st.type){case"drop":p+=St;break;case"dropRight":g-=St;break;case"take":g=Yr(g,p+St);break;case"takeRight":p=Bn(p,g-St);break}}return{start:p,end:g}}function p1(p){var g=p.match(ge);return g?g[1].split(be):[]}function my(p,g,M){g=xc(g,p);for(var z=-1,q=g.length,st=!1;++z<q;){var St=fu(g[z]);if(!(st=p!=null&&M(p,St)))break;p=p[St]}return st||++z!=q?st:(q=p==null?0:p.length,!!q&&Hl(q)&&Ns(St,q)&&(Zn(p)||ns(p)))}function d1(p){var g=p.length,M=new p.constructor(g);return g&&typeof p[0]=="string"&&Ln.call(p,"index")&&(M.index=p.index,M.input=p.input),M}function gy(p){return typeof p.constructor=="function"&&!bc(p)?Ka(Do(p)):{}}function m1(p,g,M){var z=p.constructor;switch(g){case Jn:return Lh(p);case Qe:case me:return new z(+p);case Ri:return a1(p,M);case Ii:case ar:case qr:case Xo:case va:case Da:case Za:case wr:case To:return Pd(p,M);case wt:return new z;case te:case Te:return new z(p);case we:return og(p);case ze:return new z;case en:return s1(p)}}function g1(p,g){var M=g.length;if(!M)return p;var z=M-1;return g[z]=(M>1?"& ":"")+g[z],g=g.join(M>2?", ":" "),p.replace(Zt,`{
/* [wrapped with `+g+`] */
`)}function Vd(p){return Zn(p)||ns(p)||!!(Pl&&p&&p[Pl])}function Ns(p,g){var M=typeof p;return g=g??je,!!g&&(M=="number"||M!="symbol"&&$e.test(p))&&p>-1&&p%1==0&&p<g}function ts(p,g,M){if(!Kr(M))return!1;var z=typeof g;return(z=="number"?Ki(M)&&Ns(g,M.length):z=="string"&&g in M)?hr(M[g],p):!1}function fg(p,g){if(Zn(p))return!1;var M=typeof p;return M=="number"||M=="symbol"||M=="boolean"||p==null||Sa(p)?!0:at.test(p)||!K.test(p)||g!=null&&p in mn(g)}function v1(p){var g=typeof p;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?p!=="__proto__":p===null}function pg(p){var g=Rp(p),M=rt[g];if(typeof M!="function"||!(g in mi.prototype))return!1;if(p===M)return!0;var z=Rh(M);return!!z&&p===z[0]}function vy(p){return!!pr&&pr in p}var Ud=Xc?jl:X1;function bc(p){var g=p&&p.constructor,M=typeof g=="function"&&g.prototype||Du;return p===M}function Lf(p){return p===p&&!Kr(p)}function vs(p,g){return function(M){return M==null?!1:M[p]===g&&(g!==i||p in mn(M))}}function Df(p){var g=Br(p,function(z){return M.size===C&&M.clear(),z}),M=g.cache;return g}function Ia(p,g){var M=p[1],z=g[1],q=M|z,st=q<(X|pt|Mt),St=z==Mt&&M==nt||z==Mt&&M==Ht&&p[7].length<=g[8]||z==(Mt|Ht)&&g[7].length<=g[8]&&M==nt;if(!(st||St))return p;z&X&&(p[2]=g[2],q|=M&X?0:J);var Vt=g[3];if(Vt){var Kt=p[3];p[3]=Kt?iy(Kt,Vt,g[4]):Vt,p[4]=Kt?Ko(p[3],S):g[4]}return Vt=g[5],Vt&&(Kt=p[5],p[5]=Kt?ry(Kt,Vt,g[6]):Vt,p[6]=Kt?Ko(p[5],S):g[6]),Vt=g[7],Vt&&(p[7]=Vt),z&Mt&&(p[8]=p[8]==null?g[8]:Yr(p[8],g[8])),p[9]==null&&(p[9]=g[9]),p[0]=g[0],p[1]=q,p}function jd(p){var g=[];if(p!=null)for(var M in mn(p))g.push(M);return g}function Hd(p){return ks.call(p)}function es(p,g,M){return g=Bn(g===i?p.length-1:g,0),function(){for(var z=arguments,q=-1,st=Bn(z.length-g,0),St=Jt(st);++q<st;)St[q]=z[g+q];q=-1;for(var Vt=Jt(g+1);++q<g;)Vt[q]=z[q];return Vt[g]=M(St),fo(p,this,Vt)}}function dg(p,g){return g.length<2?p:_r(p,Fl(g,0,-1))}function yy(p,g){for(var M=p.length,z=Yr(g.length,M),q=Fs(p);z--;){var st=g[z];p[z]=Ns(st,M)?q[st]:i}return p}function mg(p,g){if(!(g==="constructor"&&typeof p[g]=="function")&&g!="__proto__")return p[g]}var gg=vg(Mf),Bh=Xa||function(p,g){return co.setTimeout(p,g)},zp=vg(i1);function _y(p,g,M){var z=g+"";return zp(p,g1(z,y1(p1(z),M)))}function vg(p){var g=0,M=0;return function(){var z=Ls(),q=Ot-(z-M);if(M=z,q>0){if(++g>=Ft)return arguments[0]}else g=0;return p.apply(i,arguments)}}function Ac(p,g){var M=-1,z=p.length,q=z-1;for(g=g===i?z:g;++M<g;){var st=eg(M,q),St=p[st];p[st]=p[M],p[M]=St}return p.length=g,p}var Gd=Df(function(p){var g=[];return p.charCodeAt(0)===46&&g.push(""),p.replace(gt,function(M,z,q,st){g.push(q?st.replace(ln,"$1"):z||M)}),g});function fu(p){if(typeof p=="string"||Sa(p))return p;var g=p+"";return g=="0"&&1/p==-Ge?"-0":g}function rh(p){if(p!=null){try{return Yi.call(p)}catch{}try{return p+""}catch{}}return""}function y1(p,g){return wo(ui,function(M){var z="_."+M[0];g&M[1]&&!Iu(p,z)&&p.push(z)}),p.sort()}function yg(p){if(p instanceof mi)return p.clone();var g=new ua(p.__wrapped__,p.__chain__);return g.__actions__=Fs(p.__actions__),g.__index__=p.__index__,g.__values__=p.__values__,g}function xy(p,g,M){(M?ts(p,g,M):g===i)?g=1:g=Bn(Ti(g),0);var z=p==null?0:p.length;if(!z||g<1)return[];for(var q=0,st=0,St=Jt(Ps(z/g));q<z;)St[st++]=Fl(p,q,q+=g);return St}function by(p){for(var g=-1,M=p==null?0:p.length,z=0,q=[];++g<M;){var st=p[g];st&&(q[z++]=st)}return q}function Ay(){var p=arguments.length;if(!p)return[];for(var g=Jt(p-1),M=arguments[0],z=p;z--;)g[z-1]=arguments[z];return Ba(Zn(M)?Fs(M):[M],gn(g,1))}var _1=qi(function(p,g){return Sr(p)?tn(p,gn(g,1,Sr,!0)):[]}),x1=qi(function(p,g){var M=Vl(g);return Sr(M)&&(M=i),Sr(p)?tn(p,gn(g,1,Sr,!0),Xn(M,2)):[]}),wy=qi(function(p,g){var M=Vl(g);return Sr(M)&&(M=i),Sr(p)?tn(p,gn(g,1,Sr,!0),i,M):[]});function Cy(p,g,M){var z=p==null?0:p.length;return z?(g=M||g===i?1:Ti(g),Fl(p,g<0?0:g,z)):[]}function qd(p,g,M){var z=p==null?0:p.length;return z?(g=M||g===i?1:Ti(g),g=z-g,Fl(p,0,g<0?0:g)):[]}function Iy(p,g){return p&&p.length?kh(p,Xn(g,3),!0,!0):[]}function Wd(p,g){return p&&p.length?kh(p,Xn(g,3),!0):[]}function Zd(p,g,M,z){var q=p==null?0:p.length;return q?(M&&typeof M!="number"&&ts(p,g,M)&&(M=0,z=q),ni(p,g,M,z)):[]}function Bp(p,g,M){var z=p==null?0:p.length;if(!z)return-1;var q=M==null?0:Ti(M);return q<0&&(q=Bn(z+q,0)),cc(p,Xn(g,3),q)}function Oh(p,g,M){var z=p==null?0:p.length;if(!z)return-1;var q=z-1;return M!==i&&(q=Ti(M),q=M<0?Bn(z+q,0):Yr(q,z-1)),cc(p,Xn(g,3),q,!0)}function My(p){var g=p==null?0:p.length;return g?gn(p,1):[]}function b1(p){var g=p==null?0:p.length;return g?gn(p,Ge):[]}function A1(p,g){var M=p==null?0:p.length;return M?(g=g===i?1:Ti(g),gn(p,g)):[]}function Rf(p){for(var g=-1,M=p==null?0:p.length,z={};++g<M;){var q=p[g];z[q[0]]=q[1]}return z}function $d(p){return p&&p.length?p[0]:i}function Ey(p,g,M){var z=p==null?0:p.length;if(!z)return-1;var q=M==null?0:Ti(M);return q<0&&(q=Bn(z+q,0)),eu(p,g,q)}function _g(p){var g=p==null?0:p.length;return g?Fl(p,0,-1):[]}var Sy=qi(function(p){var g=Vr(p,Ph);return g.length&&g[0]===p[0]?vc(g):[]}),Ty=qi(function(p){var g=Vl(p),M=Vr(p,Ph);return g===Vl(M)?g=i:M.pop(),M.length&&M[0]===p[0]?vc(M,Xn(g,2)):[]}),w1=qi(function(p){var g=Vl(p),M=Vr(p,Ph);return g=typeof g=="function"?g:i,g&&M.pop(),M.length&&M[0]===p[0]?vc(M,i,g):[]});function C1(p,g){return p==null?"":ol.call(p,g)}function Vl(p){var g=p==null?0:p.length;return g?p[g-1]:i}function Yd(p,g,M){var z=p==null?0:p.length;if(!z)return-1;var q=z;return M!==i&&(q=Ti(M),q=q<0?Bn(z+q,0):Yr(q,z-1)),g===g?kl(p,g,q):cc(p,tl,q,!0)}function xg(p,g){return p&&p.length?Id(p,Ti(g)):i}var I1=qi(Fh);function Fh(p,g){return p&&p.length&&g&&g.length?tg(p,g):p}function Op(p,g,M){return p&&p.length&&g&&g.length?tg(p,g,Xn(M,2)):p}function cr(p,g,M){return p&&p.length&&g&&g.length?tg(p,g,i,M):p}var M1=Gu(function(p,g){var M=p==null?0:p.length,z=Le(p,g);return Jv(p,Vr(g,function(q){return Ns(q,M)?+q:q}).sort(Ld)),z});function bg(p,g){var M=[];if(!(p&&p.length))return M;var z=-1,q=[],st=p.length;for(g=Xn(g,3);++z<st;){var St=p[z];g(St,z,p)&&(M.push(St),q.push(z))}return Jv(p,q),M}function oh(p){return p==null?p:zu.call(p)}function E1(p,g,M){var z=p==null?0:p.length;return z?(M&&typeof M!="number"&&ts(p,g,M)?(g=0,M=z):(g=g==null?0:Ti(g),M=M===i?z:Ti(M)),Fl(p,g,M)):[]}function S1(p,g){return Ed(p,g)}function T1(p,g,M){return ng(p,g,Xn(M,2))}function k1(p,g){var M=p==null?0:p.length;if(M){var z=Ed(p,g);if(z<M&&hr(p[z],g))return z}return-1}function P1(p,g){return Ed(p,g,!0)}function L1(p,g,M){return ng(p,g,Xn(M,2),!0)}function D1(p,g){var M=p==null?0:p.length;if(M){var z=Ed(p,g,!0)-1;if(hr(p[z],g))return z}return-1}function ky(p){return p&&p.length?ey(p):[]}function Py(p,g){return p&&p.length?ey(p,Xn(g,2)):[]}function Ly(p){var g=p==null?0:p.length;return g?Fl(p,1,g):[]}function Dy(p,g,M){return p&&p.length?(g=M||g===i?1:Ti(g),Fl(p,0,g<0?0:g)):[]}function Xd(p,g,M){var z=p==null?0:p.length;return z?(g=M||g===i?1:Ti(g),g=z-g,Fl(p,g<0?0:g,z)):[]}function Nh(p,g){return p&&p.length?kh(p,Xn(g,3),!1,!0):[]}function Ag(p,g){return p&&p.length?kh(p,Xn(g,3)):[]}var zf=qi(function(p){return ul(gn(p,1,Sr,!0))}),Ry=qi(function(p){var g=Vl(p);return Sr(g)&&(g=i),ul(gn(p,1,Sr,!0),Xn(g,2))}),Io=qi(function(p){var g=Vl(p);return g=typeof g=="function"?g:i,ul(gn(p,1,Sr,!0),i,g)});function Rr(p){return p&&p.length?ul(p):[]}function zy(p,g){return p&&p.length?ul(p,Xn(g,2)):[]}function By(p,g){return g=typeof g=="function"?g:i,p&&p.length?ul(p,i,g):[]}function Kd(p){if(!(p&&p.length))return[];var g=0;return p=oa(p,function(M){if(Sr(M))return g=Bn(M.length,g),!0}),Eu(g,function(M){return Vr(p,aa(M))})}function wg(p,g){if(!(p&&p.length))return[];var M=Kd(p);return g==null?M:Vr(M,function(z){return fo(g,i,z)})}var Oy=qi(function(p,g){return Sr(p)?tn(p,g):[]}),Cg=qi(function(p){return Ef(oa(p,Sr))}),Vh=qi(function(p){var g=Vl(p);return Sr(g)&&(g=i),Ef(oa(p,Sr),Xn(g,2))}),Uh=qi(function(p){var g=Vl(p);return g=typeof g=="function"?g:i,Ef(oa(p,Sr),i,g)}),Fy=qi(Kd);function Mo(p,g){return kp(p||[],g||[],qt)}function Fp(p,g){return kp(p||[],g||[],Ol)}var wc=qi(function(p){var g=p.length,M=g>1?p[g-1]:i;return M=typeof M=="function"?(p.pop(),M):i,wg(p,M)});function Np(p){var g=rt(p);return g.__chain__=!0,g}function Qd(p,g){return g(p),p}function Bf(p,g){return g(p)}var Of=Gu(function(p){var g=p.length,M=g?p[0]:0,z=this.__wrapped__,q=function(st){return Le(st,p)};return g>1||this.__actions__.length||!(z instanceof mi)||!Ns(M)?this.thru(q):(z=z.slice(M,+M+(g?1:0)),z.__actions__.push({func:Bf,args:[q],thisArg:i}),new ua(z,this.__chain__).thru(function(st){return g&&!st.length&&st.push(i),st}))});function Cc(){return Np(this)}function Ny(){return new ua(this.value(),this.__chain__)}function Vy(){this.__values__===i&&(this.__values__=rm(this.value()));var p=this.__index__>=this.__values__.length,g=p?i:this.__values__[this.__index__++];return{done:p,value:g}}function R1(){return this}function Go(p){for(var g,M=this;M instanceof la;){var z=yg(M);z.__index__=0,z.__values__=i,g?q.__wrapped__=z:g=z;var q=z;M=M.__wrapped__}return q.__wrapped__=p,g}function ah(){var p=this.__wrapped__;if(p instanceof mi){var g=p;return this.__actions__.length&&(g=new mi(this)),g=g.reverse(),g.__actions__.push({func:Bf,args:[oh],thisArg:i}),new ua(g,this.__chain__)}return this.thru(oh)}function Uy(){return rg(this.__wrapped__,this.__actions__)}var n=Dd(function(p,g,M){Ln.call(p,M)?++p[M]:Ce(p,M,1)});function r(p,g,M){var z=Zn(p)?Js:Gn;return M&&ts(p,g,M)&&(g=i),z(p,Xn(g,3))}function s(p,g){var M=Zn(p)?oa:Vn;return M(p,Xn(g,3))}var d=kf(Bp),v=kf(Oh);function x(p,g){return gn(ct(p,g),1)}function A(p,g){return gn(ct(p,g),Ge)}function T(p,g,M){return M=M===i?1:Ti(M),gn(ct(p,g),M)}function D(p,g){var M=Zn(p)?wo:Dn;return M(p,Xn(g,3))}function O(p,g){var M=Zn(p)?Cl:ei;return M(p,Xn(g,3))}var N=Dd(function(p,g,M){Ln.call(p,M)?p[M].push(g):Ce(p,M,[g])});function V(p,g,M,z){p=Ki(p)?p:$h(p),M=M&&!z?Ti(M):0;var q=p.length;return M<0&&(M=Bn(q+M,0)),qh(p)?M<=q&&p.indexOf(g,M)>-1:!!q&&eu(p,g,M)>-1}var $=qi(function(p,g,M){var z=-1,q=typeof g=="function",st=Ki(p)?Jt(p.length):[];return Dn(p,function(St){st[++z]=q?fo(g,St,M):Os(St,g,M)}),st}),Q=Dd(function(p,g,M){Ce(p,M,g)});function ct(p,g){var M=Zn(p)?Vr:Cd;return M(p,Xn(g,3))}function mt(p,g,M,z){return p==null?[]:(Zn(g)||(g=g==null?[]:[g]),M=z?i:M,Zn(M)||(M=M==null?[]:[M]),ih(p,g,M))}var Et=Dd(function(p,g,M){p[M?0:1].push(g)},function(){return[[],[]]});function bt(p,g,M){var z=Zn(p)?Il:el,q=arguments.length<3;return z(p,Xn(g,4),M,q,Dn)}function Ut(p,g,M){var z=Zn(p)?Gc:el,q=arguments.length<3;return z(p,Xn(g,4),M,q,ei)}function $t(p,g){var M=Zn(p)?oa:Vn;return M(p,Mr(Xn(g,3)))}function ee(p){var g=Zn(p)?Ct:Md;return g(p)}function ie(p,g,M){(M?ts(p,g,M):g===i)?g=1:g=Ti(g);var z=Zn(p)?ht:ty;return z(p,g)}function fe(p){var g=Zn(p)?It:r1;return g(p)}function Me(p){if(p==null)return 0;if(Ki(p))return qh(p)?iu(p):p.length;var g=Ja(p);return g==wt||g==ze?p.size:lu(p).length}function Ne(p,g,M){var z=Zn(p)?Mu:o1;return M&&ts(p,g,M)&&(g=i),z(p,Xn(g,3))}var _n=qi(function(p,g){if(p==null)return[];var M=g.length;return M>1&&ts(p,g[0],g[1])?g=[]:M>2&&ts(g[0],g[1],g[2])&&(g=[g[0]]),ih(p,gn(g,1),[])}),Ze=bf||function(){return co.Date.now()};function Mn(p,g){if(typeof g!="function")throw new io(o);return p=Ti(p),function(){if(--p<1)return g.apply(this,arguments)}}function Je(p,g,M){return g=M?i:g,g=p&&g==null?p.length:g,Hu(p,Mt,i,i,i,i,g)}function ri(p,g){var M;if(typeof g!="function")throw new io(o);return p=Ti(p),function(){return--p>0&&(M=g.apply(this,arguments)),p<=1&&(g=i),M}}var On=qi(function(p,g,M){var z=X;if(M.length){var q=Ko(M,zh(On));z|=Lt}return Hu(p,z,g,M,q)}),pn=qi(function(p,g,M){var z=X|pt;if(M.length){var q=Ko(M,zh(pn));z|=Lt}return Hu(g,z,p,M,q)});function hi(p,g,M){g=M?i:g;var z=Hu(p,nt,i,i,i,i,i,g);return z.placeholder=hi.placeholder,z}function Kn(p,g,M){g=M?i:g;var z=Hu(p,ft,i,i,i,i,i,g);return z.placeholder=Kn.placeholder,z}function Si(p,g,M){var z,q,st,St,Vt,Kt,Ie=0,Ee=!1,Oe=!1,xn=!0;if(typeof p!="function")throw new io(o);g=is(g)||0,Kr(M)&&(Ee=!!M.leading,Oe="maxWait"in M,st=Oe?Bn(is(M.maxWait)||0,g):st,xn="trailing"in M?!!M.trailing:xn);function qn(pa){var Tc=z,Yh=q;return z=q=i,Ie=pa,St=p.apply(Yh,Tc),St}function fi(pa){return Ie=pa,Vt=Bh(or,g),Ee?qn(pa):St}function Qi(pa){var Tc=pa-Kt,Yh=pa-Ie,$A=g-Tc;return Oe?Yr($A,st-Yh):$A}function pi(pa){var Tc=pa-Kt,Yh=pa-Ie;return Kt===i||Tc>=g||Tc<0||Oe&&Yh>=st}function or(){var pa=Ze();if(pi(pa))return mr(pa);Vt=Bh(or,Qi(pa))}function mr(pa){return Vt=i,xn&&z?qn(pa):(z=q=i,St)}function du(){Vt!==i&&kd(Vt),Ie=0,z=Kt=q=Vt=i}function hl(){return Vt===i?St:mr(Ze())}function mu(){var pa=Ze(),Tc=pi(pa);if(z=arguments,q=this,Kt=pa,Tc){if(Vt===i)return fi(Kt);if(Oe)return kd(Vt),Vt=Bh(or,g),qn(Kt)}return Vt===i&&(Vt=Bh(or,g)),St}return mu.cancel=du,mu.flush=hl,mu}var Sn=qi(function(p,g){return Oi(p,1,g)}),Wi=qi(function(p,g,M){return Oi(p,is(g)||0,M)});function zr(p){return Hu(p,jt)}function Br(p,g){if(typeof p!="function"||g!=null&&typeof g!="function")throw new io(o);var M=function(){var z=arguments,q=g?g.apply(this,z):z[0],st=M.cache;if(st.has(q))return st.get(q);var St=p.apply(this,z);return M.cache=st.set(q,St)||st,St};return M.cache=new(Br.Cache||zs),M}Br.Cache=zs;function Mr(p){if(typeof p!="function")throw new io(o);return function(){var g=arguments;switch(g.length){case 0:return!p.call(this);case 1:return!p.call(this,g[0]);case 2:return!p.call(this,g[0],g[1]);case 3:return!p.call(this,g[0],g[1],g[2])}return!p.apply(this,g)}}function Or(p){return ri(2,p)}var to=Pp(function(p,g){g=g.length==1&&Zn(g[0])?Vr(g[0],sa(Xn())):Vr(gn(g,1),sa(Xn()));var M=g.length;return qi(function(z){for(var q=-1,st=Yr(z.length,M);++q<st;)z[q]=g[q].call(this,z[q]);return fo(p,this,z)})}),yo=qi(function(p,g){var M=Ko(g,zh(yo));return Hu(p,Lt,i,g,M)}),Eo=qi(function(p,g){var M=Ko(g,zh(Eo));return Hu(p,xt,i,g,M)}),Ma=Gu(function(p,g){return Hu(p,Ht,i,i,i,g)});function qo(p,g){if(typeof p!="function")throw new io(o);return g=g===i?g:Ti(g),qi(p,g)}function Ea(p,g){if(typeof p!="function")throw new io(o);return g=g==null?0:Bn(Ti(g),0),qi(function(M){var z=M[g],q=Uu(M,0,g);return z&&Ba(q,z),fo(p,this,q)})}function ao(p,g,M){var z=!0,q=!0;if(typeof p!="function")throw new io(o);return Kr(M)&&(z="leading"in M?!!M.leading:z,q="trailing"in M?!!M.trailing:q),Si(p,g,{leading:z,maxWait:g,trailing:q})}function Wo(p){return Je(p,1)}function bi(p,g){return yo(Td(g),p)}function dr(){if(!arguments.length)return[];var p=arguments[0];return Zn(p)?p:[p]}function rr(p){return fn(p,B)}function Ni(p,g){return g=typeof g=="function"?g:i,fn(p,B,g)}function ja(p){return fn(p,k|B)}function ca(p,g){return g=typeof g=="function"?g:i,fn(p,k|B,g)}function Er(p,g){return g==null||En(p,g,fa(g))}function hr(p,g){return p===g||p!==p&&g!==g}var ha=Bd(Rl),Zi=Bd(function(p,g){return p>=g}),ns=yc(function(){return arguments}())?yc:function(p){return Qr(p)&&Ln.call(p,"callee")&&!Be.call(p,"callee")},Zn=Jt.isArray,qu=uc?sa(uc):Th;function Ki(p){return p!=null&&Hl(p.length)&&!jl(p)}function Sr(p){return Qr(p)&&Ki(p)}function Ul(p){return p===!0||p===!1||Qr(p)&&gr(p)==Qe}var cl=wp||X1,jh=ho?sa(ho):zl;function Ff(p){return Qr(p)&&p.nodeType===1&&!Ec(p)}function Ic(p){if(p==null)return!0;if(Ki(p)&&(Zn(p)||typeof p=="string"||typeof p.splice=="function"||cl(p)||Wu(p)||ns(p)))return!p.length;var g=Ja(p);if(g==wt||g==ze)return!p.size;if(bc(p))return!lu(p).length;for(var M in p)if(Ln.call(p,M))return!1;return!0}function Nf(p,g){return au(p,g)}function Jd(p,g,M){M=typeof M=="function"?M:i;var z=M?M(p,g):i;return z===i?au(p,g,i,M):!!z}function sh(p){if(!Qr(p))return!1;var g=gr(p);return g==Ci||g==ke||typeof p.message=="string"&&typeof p.name=="string"&&!Ec(p)}function Vp(p){return typeof p=="number"&&Af(p)}function jl(p){if(!Kr(p))return!1;var g=gr(p);return g==Di||g==lt||g==ue||g==cn}function Up(p){return typeof p=="number"&&p==Ti(p)}function Hl(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=je}function Kr(p){var g=typeof p;return p!=null&&(g=="object"||g=="function")}function Qr(p){return p!=null&&typeof p=="object"}var Mc=za?sa(za):zo;function Vf(p,g){return p===g||sl(p,g,Fd(g))}function tm(p,g,M){return M=typeof M=="function"?M:i,sl(p,g,Fd(g),M)}function em(p){return Uf(p)&&p!=+p}function jp(p){if(Ud(p))throw new jn(f);return su(p)}function Hp(p){return p===null}function nm(p){return p==null}function Uf(p){return typeof p=="number"||Qr(p)&&gr(p)==te}function Ec(p){if(!Qr(p)||gr(p)!=pe)return!1;var g=Do(p);if(g===null)return!0;var M=Ln.call(g,"constructor")&&g.constructor;return typeof M=="function"&&M instanceof M&&Yi.call(M)==Fa}var Hh=Es?sa(Es):_c;function im(p){return Up(p)&&p>=-je&&p<=je}var Gh=Ss?sa(Ss):Xi;function qh(p){return typeof p=="string"||!Zn(p)&&Qr(p)&&gr(p)==Te}function Sa(p){return typeof p=="symbol"||Qr(p)&&gr(p)==en}var Wu=wl?sa(wl):ms;function Wh(p){return p===i}function Gp(p){return Qr(p)&&Ja(p)==In}function jf(p){return Qr(p)&&gr(p)==Pn}var Ig=Bd(eh),jy=Bd(function(p,g){return p<=g});function rm(p){if(!p)return[];if(Ki(p))return qh(p)?xa(p):Fs(p);if(Ll&&p[Ll])return Ih(p[Ll]());var g=Ja(p),M=g==wt?$c:g==ze?il:$h;return M(p)}function Zu(p){if(!p)return p===0?p:0;if(p=is(p),p===Ge||p===-Ge){var g=p<0?-1:1;return g*Pi}return p===p?p:0}function Ti(p){var g=Zu(p),M=g%1;return g===g?M?g-M:g:0}function Hy(p){return p?We(Ti(p),0,Qn):0}function is(p){if(typeof p=="number")return p;if(Sa(p))return Li;if(Kr(p)){var g=typeof p.valueOf=="function"?p.valueOf():p;p=Kr(g)?g+"":g}if(typeof p!="string")return p===0?p:+p;p=hs(p);var M=Ue.test(p);return M||ii.test(p)?Ah(p.slice(2),M?2:8):Re.test(p)?Li:+p}function eo(p){return ju(p,ea(p))}function pu(p){return p?We(Ti(p),-je,je):p===0?p:0}function Tr(p){return p==null?"":ll(p)}var lh=Tf(function(p,g){if(bc(g)||Ki(g)){ju(g,fa(g),p);return}for(var M in g)Ln.call(g,M)&&qt(p,M,g[M])}),om=Tf(function(p,g){ju(g,ea(g),p)}),qp=Tf(function(p,g,M,z){ju(g,ea(g),p,z)}),am=Tf(function(p,g,M,z){ju(g,fa(g),p,z)}),$u=Gu(Le);function sm(p,g){var M=Ka(p);return g==null?M:ae(M,g)}var Wp=qi(function(p,g){p=mn(p);var M=-1,z=g.length,q=z>2?g[2]:i;for(q&&ts(g[0],g[1],q)&&(z=1);++M<z;)for(var st=g[M],St=ea(st),Vt=-1,Kt=St.length;++Vt<Kt;){var Ie=St[Vt],Ee=p[Ie];(Ee===i||hr(Ee,Du[Ie])&&!Ln.call(p,Ie))&&(p[Ie]=st[Ie])}return p}),lm=qi(function(p){return p.push(i,hy),fo(Zh,i,p)});function um(p,g){return El(p,Xn(g,3),Ur)}function Mg(p,g){return El(p,Xn(g,3),Co)}function Gy(p,g){return p==null?p:go(p,Xn(g,3),ea)}function Zp(p,g){return p==null?p:Xr(p,Xn(g,3),ea)}function qy(p,g){return p&&Ur(p,Xn(g,3))}function Wy(p,g){return p&&Co(p,Xn(g,3))}function Zy(p){return p==null?[]:Ir(p,fa(p))}function $y(p){return p==null?[]:Ir(p,ea(p))}function cm(p,g,M){var z=p==null?i:_r(p,g);return z===i?M:z}function Vs(p,g){return p!=null&&my(p,g,Va)}function Hf(p,g){return p!=null&&my(p,g,al)}var Yy=sy(function(p,g,M){g!=null&&typeof g.toString!="function"&&(g=ks.call(g)),p[g]=M},q1(Gl)),Yu=sy(function(p,g,M){g!=null&&typeof g.toString!="function"&&(g=ks.call(g)),Ln.call(p,g)?p[g].push(M):p[g]=[M]},Xn),z1=qi(Os);function fa(p){return Ki(p)?dt(p):lu(p)}function ea(p){return Ki(p)?dt(p,!0):Jm(p)}function Gf(p,g){var M={};return g=Xn(g,3),Ur(p,function(z,q,st){Ce(M,g(z,q,st),z)}),M}function qf(p,g){var M={};return g=Xn(g,3),Ur(p,function(z,q,st){Ce(M,q,g(z,q,st))}),M}var Wf=Tf(function(p,g,M){uu(p,g,M)}),Zh=Tf(function(p,g,M,z){uu(p,g,M,z)}),Xy=Gu(function(p,g){var M={};if(p==null)return M;var z=!1;g=Vr(g,function(st){return st=xc(st,p),z||(z=st.length>1),st}),ju(p,hg(p),M),z&&(M=fn(M,k|P|B,fy));for(var q=g.length;q--;)ig(M,g[q]);return M});function Ky(p,g){return Eg(p,Mr(Xn(g)))}var Qy=Gu(function(p,g){return p==null?{}:Qa(p,g)});function Eg(p,g){if(p==null)return{};var M=Vr(hg(p),function(z){return[z]});return g=Xn(g),Kv(p,M,function(z,q){return g(z,q[0])})}function Sg(p,g,M){g=xc(g,p);var z=-1,q=g.length;for(q||(q=1,p=i);++z<q;){var st=p==null?i:p[fu(g[z])];st===i&&(z=q,st=M),p=jl(st)?st.call(p):st}return p}function Tg(p,g,M){return p==null?p:Ol(p,g,M)}function Sc(p,g,M,z){return z=typeof z=="function"?z:i,p==null?p:Ol(p,g,M,z)}var kg=cy(fa),hm=cy(ea);function Pg(p,g,M){var z=Zn(p),q=z||cl(p)||Wu(p);if(g=Xn(g,4),M==null){var st=p&&p.constructor;q?M=z?new st:[]:Kr(p)?M=jl(st)?Ka(Do(p)):{}:M={}}return(q?wo:Ur)(p,function(St,Vt,Kt){return g(M,St,Vt,Kt)}),M}function Jy(p,g){return p==null?!0:ig(p,g)}function Lg(p,g,M){return p==null?p:vo(p,g,Td(M))}function t0(p,g,M,z){return z=typeof z=="function"?z:i,p==null?p:vo(p,g,Td(M),z)}function $h(p){return p==null?[]:Zc(p,fa(p))}function Dg(p){return p==null?[]:Zc(p,ea(p))}function e0(p,g,M){return M===i&&(M=g,g=i),M!==i&&(M=is(M),M=M===M?M:0),g!==i&&(g=is(g),g=g===g?g:0),We(is(p),g,M)}function $p(p,g,M){return g=Zu(g),M===i?(M=g,g=0):M=Zu(M),p=is(p),Bs(p,g,M)}function n0(p,g,M){if(M&&typeof M!="boolean"&&ts(p,g,M)&&(g=M=i),M===i&&(typeof g=="boolean"?(M=g,g=i):typeof p=="boolean"&&(M=p,p=i)),p===i&&g===i?(p=0,g=1):(p=Zu(p),g===i?(g=p,p=0):g=Zu(g)),p>g){var z=p;p=g,g=z}if(M||p%1||g%1){var q=Ru();return Yr(p+q*(g-p+yf("1e-"+((q+"").length-1))),g)}return eg(p,g)}var fm=hu(function(p,g,M){return g=g.toLowerCase(),p+(M?i0(g):g)});function i0(p){return G1(Tr(p).toLowerCase())}function Rg(p){return p=Tr(p),p&&p.replace(xi,nu).replace(no,"")}function B1(p,g,M){p=Tr(p),g=ll(g);var z=p.length;M=M===i?z:We(Ti(M),0,z);var q=M;return M-=g.length,M>=0&&p.slice(M,q)==g}function O1(p){return p=Tr(p),p&&Au.test(p)?p.replace(uo,Ts):p}function F1(p){return p=Tr(p),p&&zt.test(p)?p.replace(Tt,"\\$&"):p}var N1=hu(function(p,g,M){return p+(M?"-":"")+g.toLowerCase()}),V1=hu(function(p,g,M){return p+(M?" ":"")+g.toLowerCase()}),U1=ay("toLowerCase");function j1(p,g,M){p=Tr(p),g=Ti(g);var z=g?iu(p):0;if(!g||z>=g)return p;var q=(g-z)/2;return Dp(Mh(q),M)+p+Dp(Ps(q),M)}function H1(p,g,M){p=Tr(p),g=Ti(g);var z=g?iu(p):0;return g&&z<g?p+Dp(g-z,M):p}function Xu(p,g,M){p=Tr(p),g=Ti(g);var z=g?iu(p):0;return g&&z<g?Dp(g-z,M)+p:p}function pm(p,g,M){return M||g==null?g=0:g&&(g=+g),Jo(Tr(p).replace(tt,""),g||0)}function r0(p,g,M){return(M?ts(p,g,M):g===i)?g=1:g=Ti(g),Tp(Tr(p),g)}function Yp(){var p=arguments,g=Tr(p[0]);return p.length<3?g:g.replace(p[1],p[2])}var o0=hu(function(p,g,M){return p+(M?"_":"")+g.toLowerCase()});function QE(p,g,M){return M&&typeof M!="number"&&ts(p,g,M)&&(g=M=i),M=M===i?Qn:M>>>0,M?(p=Tr(p),p&&(typeof g=="string"||g!=null&&!Hh(g))&&(g=ll(g),!g&&fs(p))?Uu(xa(p),0,M):p.split(g,M)):[]}var JE=hu(function(p,g,M){return p+(M?" ":"")+G1(g)});function tS(p,g,M){return p=Tr(p),M=M==null?0:We(Ti(M),0,p.length),g=ll(g),p.slice(M,M+g.length)==g}function eS(p,g,M){var z=rt.templateSettings;M&&ts(p,g,M)&&(g=i),p=Tr(p),g=qp({},g,z,ug);var q=qp({},g.imports,z.imports,ug),st=fa(q),St=Zc(q,st),Vt,Kt,Ie=0,Ee=g.interpolate||ji,Oe="__p += '",xn=Gi((g.escape||ji).source+"|"+Ee.source+"|"+(Ee===Z?on:ji).source+"|"+(g.evaluate||ji).source+"|$","g"),qn="//# sourceURL="+(Ln.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Al+"]")+`
`;p.replace(xn,function(pi,or,mr,du,hl,mu){return mr||(mr=du),Oe+=p.slice(Ie,mu).replace(ci,ku),or&&(Vt=!0,Oe+=`' +
__e(`+or+`) +
'`),hl&&(Kt=!0,Oe+=`';
`+hl+`;
__p += '`),mr&&(Oe+=`' +
((__t = (`+mr+`)) == null ? '' : __t) +
'`),Ie=mu+pi.length,pi}),Oe+=`';
`;var fi=Ln.call(g,"variable")&&g.variable;if(!fi)Oe=`with (obj) {
`+Oe+`
}
`;else if(ye.test(fi))throw new jn(y);Oe=(Kt?Oe.replace($s,""):Oe).replace(Ys,"$1").replace(xl,"$1;"),Oe="function("+(fi||"obj")+`) {
`+(fi?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Vt?", __e = _.escape":"")+(Kt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Oe+`return __p
}`;var Qi=WA(function(){return li(st,qn+"return "+Oe).apply(i,St)});if(Qi.source=Oe,sh(Qi))throw Qi;return Qi}function nS(p){return Tr(p).toLowerCase()}function iS(p){return Tr(p).toUpperCase()}function rS(p,g,M){if(p=Tr(p),p&&(M||g===i))return hs(p);if(!p||!(g=ll(g)))return p;var z=xa(p),q=xa(g),st=fc(z,q),St=Tl(z,q)+1;return Uu(z,st,St).join("")}function oS(p,g,M){if(p=Tr(p),p&&(M||g===i))return p.slice(0,Wt(p)+1);if(!p||!(g=ll(g)))return p;var z=xa(p),q=Tl(z,xa(g))+1;return Uu(z,0,q).join("")}function aS(p,g,M){if(p=Tr(p),p&&(M||g===i))return p.replace(tt,"");if(!p||!(g=ll(g)))return p;var z=xa(p),q=fc(z,xa(g));return Uu(z,q).join("")}function sS(p,g){var M=Qt,z=Bt;if(Kr(g)){var q="separator"in g?g.separator:q;M="length"in g?Ti(g.length):M,z="omission"in g?ll(g.omission):z}p=Tr(p);var st=p.length;if(fs(p)){var St=xa(p);st=St.length}if(M>=st)return p;var Vt=M-iu(z);if(Vt<1)return z;var Kt=St?Uu(St,0,Vt).join(""):p.slice(0,Vt);if(q===i)return Kt+z;if(St&&(Vt+=Kt.length-Vt),Hh(q)){if(p.slice(Vt).search(q)){var Ie,Ee=Kt;for(q.global||(q=Gi(q.source,Tr(se.exec(q))+"g")),q.lastIndex=0;Ie=q.exec(Ee);)var Oe=Ie.index;Kt=Kt.slice(0,Oe===i?Vt:Oe)}}else if(p.indexOf(ll(q),Vt)!=Vt){var xn=Kt.lastIndexOf(q);xn>-1&&(Kt=Kt.slice(0,xn))}return Kt+z}function lS(p){return p=Tr(p),p&&Xs.test(p)?p.replace(Ra,ce):p}var uS=hu(function(p,g,M){return p+(M?" ":"")+g.toUpperCase()}),G1=ay("toUpperCase");function qA(p,g,M){return p=Tr(p),g=M?i:g,g===i?jo(p)?yr(p):Ml(p):p.match(g)||[]}var WA=qi(function(p,g){try{return fo(p,i,g)}catch(M){return sh(M)?M:new jn(M)}}),cS=Gu(function(p,g){return wo(g,function(M){M=fu(M),Ce(p,M,On(p[M],p))}),p});function hS(p){var g=p==null?0:p.length,M=Xn();return p=g?Vr(p,function(z){if(typeof z[1]!="function")throw new io(o);return[M(z[0]),z[1]]}):[],qi(function(z){for(var q=-1;++q<g;){var st=p[q];if(fo(st[0],this,z))return fo(st[1],this,z)}})}function fS(p){return Tn(fn(p,k))}function q1(p){return function(){return p}}function pS(p,g){return p==null||p!==p?g:p}var dS=Nl(),mS=Nl(!0);function Gl(p){return p}function W1(p){return Ca(typeof p=="function"?p:fn(p,k))}function gS(p){return nh(fn(p,k))}function vS(p,g){return Sp(p,fn(g,k))}var yS=qi(function(p,g){return function(M){return Os(M,p,g)}}),_S=qi(function(p,g){return function(M){return Os(p,M,g)}});function Z1(p,g,M){var z=fa(g),q=Ir(g,z);M==null&&!(Kr(g)&&(q.length||!z.length))&&(M=g,g=p,p=this,q=Ir(g,fa(g)));var st=!(Kr(M)&&"chain"in M)||!!M.chain,St=jl(p);return wo(q,function(Vt){var Kt=g[Vt];p[Vt]=Kt,St&&(p.prototype[Vt]=function(){var Ie=this.__chain__;if(st||Ie){var Ee=p(this.__wrapped__),Oe=Ee.__actions__=Fs(this.__actions__);return Oe.push({func:Kt,args:arguments,thisArg:p}),Ee.__chain__=Ie,Ee}return Kt.apply(p,Ba([this.value()],arguments))})}),p}function xS(){return co._===this&&(co._=lr),this}function $1(){}function bS(p){return p=Ti(p),qi(function(g){return Id(g,p)})}var AS=Dh(Vr),wS=Dh(Js),CS=Dh(Mu);function ZA(p){return fg(p)?aa(fu(p)):Qv(p)}function IS(p){return function(g){return p==null?i:_r(p,g)}}var MS=ly(),ES=ly(!0);function Y1(){return[]}function X1(){return!1}function SS(){return{}}function TS(){return""}function kS(){return!0}function PS(p,g){if(p=Ti(p),p<1||p>je)return[];var M=Qn,z=Yr(p,Qn);g=Xn(g),p-=Qn;for(var q=Eu(z,g);++M<p;)g(M);return q}function LS(p){return Zn(p)?Vr(p,fu):Sa(p)?[p]:Fs(Gd(Tr(p)))}function DS(p){var g=++Ya;return Tr(p)+g}var RS=zd(function(p,g){return p+g},0),zS=Od("ceil"),BS=zd(function(p,g){return p/g},1),OS=Od("floor");function FS(p){return p&&p.length?Nn(p,Gl,Rl):i}function NS(p,g){return p&&p.length?Nn(p,Xn(g,2),Rl):i}function VS(p){return hc(p,Gl)}function US(p,g){return hc(p,Xn(g,2))}function jS(p){return p&&p.length?Nn(p,Gl,eh):i}function HS(p,g){return p&&p.length?Nn(p,Xn(g,2),eh):i}var GS=zd(function(p,g){return p*g},1),qS=Od("round"),WS=zd(function(p,g){return p-g},0);function ZS(p){return p&&p.length?zi(p,Gl):0}function $S(p,g){return p&&p.length?zi(p,Xn(g,2)):0}return rt.after=Mn,rt.ary=Je,rt.assign=lh,rt.assignIn=om,rt.assignInWith=qp,rt.assignWith=am,rt.at=$u,rt.before=ri,rt.bind=On,rt.bindAll=cS,rt.bindKey=pn,rt.castArray=dr,rt.chain=Np,rt.chunk=xy,rt.compact=by,rt.concat=Ay,rt.cond=hS,rt.conforms=fS,rt.constant=q1,rt.countBy=n,rt.create=sm,rt.curry=hi,rt.curryRight=Kn,rt.debounce=Si,rt.defaults=Wp,rt.defaultsDeep=lm,rt.defer=Sn,rt.delay=Wi,rt.difference=_1,rt.differenceBy=x1,rt.differenceWith=wy,rt.drop=Cy,rt.dropRight=qd,rt.dropRightWhile=Iy,rt.dropWhile=Wd,rt.fill=Zd,rt.filter=s,rt.flatMap=x,rt.flatMapDeep=A,rt.flatMapDepth=T,rt.flatten=My,rt.flattenDeep=b1,rt.flattenDepth=A1,rt.flip=zr,rt.flow=dS,rt.flowRight=mS,rt.fromPairs=Rf,rt.functions=Zy,rt.functionsIn=$y,rt.groupBy=N,rt.initial=_g,rt.intersection=Sy,rt.intersectionBy=Ty,rt.intersectionWith=w1,rt.invert=Yy,rt.invertBy=Yu,rt.invokeMap=$,rt.iteratee=W1,rt.keyBy=Q,rt.keys=fa,rt.keysIn=ea,rt.map=ct,rt.mapKeys=Gf,rt.mapValues=qf,rt.matches=gS,rt.matchesProperty=vS,rt.memoize=Br,rt.merge=Wf,rt.mergeWith=Zh,rt.method=yS,rt.methodOf=_S,rt.mixin=Z1,rt.negate=Mr,rt.nthArg=bS,rt.omit=Xy,rt.omitBy=Ky,rt.once=Or,rt.orderBy=mt,rt.over=AS,rt.overArgs=to,rt.overEvery=wS,rt.overSome=CS,rt.partial=yo,rt.partialRight=Eo,rt.partition=Et,rt.pick=Qy,rt.pickBy=Eg,rt.property=ZA,rt.propertyOf=IS,rt.pull=I1,rt.pullAll=Fh,rt.pullAllBy=Op,rt.pullAllWith=cr,rt.pullAt=M1,rt.range=MS,rt.rangeRight=ES,rt.rearg=Ma,rt.reject=$t,rt.remove=bg,rt.rest=qo,rt.reverse=oh,rt.sampleSize=ie,rt.set=Tg,rt.setWith=Sc,rt.shuffle=fe,rt.slice=E1,rt.sortBy=_n,rt.sortedUniq=ky,rt.sortedUniqBy=Py,rt.split=QE,rt.spread=Ea,rt.tail=Ly,rt.take=Dy,rt.takeRight=Xd,rt.takeRightWhile=Nh,rt.takeWhile=Ag,rt.tap=Qd,rt.throttle=ao,rt.thru=Bf,rt.toArray=rm,rt.toPairs=kg,rt.toPairsIn=hm,rt.toPath=LS,rt.toPlainObject=eo,rt.transform=Pg,rt.unary=Wo,rt.union=zf,rt.unionBy=Ry,rt.unionWith=Io,rt.uniq=Rr,rt.uniqBy=zy,rt.uniqWith=By,rt.unset=Jy,rt.unzip=Kd,rt.unzipWith=wg,rt.update=Lg,rt.updateWith=t0,rt.values=$h,rt.valuesIn=Dg,rt.without=Oy,rt.words=qA,rt.wrap=bi,rt.xor=Cg,rt.xorBy=Vh,rt.xorWith=Uh,rt.zip=Fy,rt.zipObject=Mo,rt.zipObjectDeep=Fp,rt.zipWith=wc,rt.entries=kg,rt.entriesIn=hm,rt.extend=om,rt.extendWith=qp,Z1(rt,rt),rt.add=RS,rt.attempt=WA,rt.camelCase=fm,rt.capitalize=i0,rt.ceil=zS,rt.clamp=e0,rt.clone=rr,rt.cloneDeep=ja,rt.cloneDeepWith=ca,rt.cloneWith=Ni,rt.conformsTo=Er,rt.deburr=Rg,rt.defaultTo=pS,rt.divide=BS,rt.endsWith=B1,rt.eq=hr,rt.escape=O1,rt.escapeRegExp=F1,rt.every=r,rt.find=d,rt.findIndex=Bp,rt.findKey=um,rt.findLast=v,rt.findLastIndex=Oh,rt.findLastKey=Mg,rt.floor=OS,rt.forEach=D,rt.forEachRight=O,rt.forIn=Gy,rt.forInRight=Zp,rt.forOwn=qy,rt.forOwnRight=Wy,rt.get=cm,rt.gt=ha,rt.gte=Zi,rt.has=Vs,rt.hasIn=Hf,rt.head=$d,rt.identity=Gl,rt.includes=V,rt.indexOf=Ey,rt.inRange=$p,rt.invoke=z1,rt.isArguments=ns,rt.isArray=Zn,rt.isArrayBuffer=qu,rt.isArrayLike=Ki,rt.isArrayLikeObject=Sr,rt.isBoolean=Ul,rt.isBuffer=cl,rt.isDate=jh,rt.isElement=Ff,rt.isEmpty=Ic,rt.isEqual=Nf,rt.isEqualWith=Jd,rt.isError=sh,rt.isFinite=Vp,rt.isFunction=jl,rt.isInteger=Up,rt.isLength=Hl,rt.isMap=Mc,rt.isMatch=Vf,rt.isMatchWith=tm,rt.isNaN=em,rt.isNative=jp,rt.isNil=nm,rt.isNull=Hp,rt.isNumber=Uf,rt.isObject=Kr,rt.isObjectLike=Qr,rt.isPlainObject=Ec,rt.isRegExp=Hh,rt.isSafeInteger=im,rt.isSet=Gh,rt.isString=qh,rt.isSymbol=Sa,rt.isTypedArray=Wu,rt.isUndefined=Wh,rt.isWeakMap=Gp,rt.isWeakSet=jf,rt.join=C1,rt.kebabCase=N1,rt.last=Vl,rt.lastIndexOf=Yd,rt.lowerCase=V1,rt.lowerFirst=U1,rt.lt=Ig,rt.lte=jy,rt.max=FS,rt.maxBy=NS,rt.mean=VS,rt.meanBy=US,rt.min=jS,rt.minBy=HS,rt.stubArray=Y1,rt.stubFalse=X1,rt.stubObject=SS,rt.stubString=TS,rt.stubTrue=kS,rt.multiply=GS,rt.nth=xg,rt.noConflict=xS,rt.noop=$1,rt.now=Ze,rt.pad=j1,rt.padEnd=H1,rt.padStart=Xu,rt.parseInt=pm,rt.random=n0,rt.reduce=bt,rt.reduceRight=Ut,rt.repeat=r0,rt.replace=Yp,rt.result=Sg,rt.round=qS,rt.runInContext=Nt,rt.sample=ee,rt.size=Me,rt.snakeCase=o0,rt.some=Ne,rt.sortedIndex=S1,rt.sortedIndexBy=T1,rt.sortedIndexOf=k1,rt.sortedLastIndex=P1,rt.sortedLastIndexBy=L1,rt.sortedLastIndexOf=D1,rt.startCase=JE,rt.startsWith=tS,rt.subtract=WS,rt.sum=ZS,rt.sumBy=$S,rt.template=eS,rt.times=PS,rt.toFinite=Zu,rt.toInteger=Ti,rt.toLength=Hy,rt.toLower=nS,rt.toNumber=is,rt.toSafeInteger=pu,rt.toString=Tr,rt.toUpper=iS,rt.trim=rS,rt.trimEnd=oS,rt.trimStart=aS,rt.truncate=sS,rt.unescape=lS,rt.uniqueId=DS,rt.upperCase=uS,rt.upperFirst=G1,rt.each=D,rt.eachRight=O,rt.first=$d,Z1(rt,function(){var p={};return Ur(rt,function(g,M){Ln.call(rt.prototype,M)||(p[M]=g)}),p}(),{chain:!1}),rt.VERSION=a,wo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){rt[p].placeholder=rt}),wo(["drop","take"],function(p,g){mi.prototype[p]=function(M){M=M===i?1:Bn(Ti(M),0);var z=this.__filtered__&&!g?new mi(this):this.clone();return z.__filtered__?z.__takeCount__=Yr(M,z.__takeCount__):z.__views__.push({size:Yr(M,Qn),type:p+(z.__dir__<0?"Right":"")}),z},mi.prototype[p+"Right"]=function(M){return this.reverse()[p](M).reverse()}}),wo(["filter","map","takeWhile"],function(p,g){var M=g+1,z=M==de||M==_e;mi.prototype[p]=function(q){var st=this.clone();return st.__iteratees__.push({iteratee:Xn(q,3),type:M}),st.__filtered__=st.__filtered__||z,st}}),wo(["head","last"],function(p,g){var M="take"+(g?"Right":"");mi.prototype[p]=function(){return this[M](1).value()[0]}}),wo(["initial","tail"],function(p,g){var M="drop"+(g?"":"Right");mi.prototype[p]=function(){return this.__filtered__?new mi(this):this[M](1)}}),mi.prototype.compact=function(){return this.filter(Gl)},mi.prototype.find=function(p){return this.filter(p).head()},mi.prototype.findLast=function(p){return this.reverse().find(p)},mi.prototype.invokeMap=qi(function(p,g){return typeof p=="function"?new mi(this):this.map(function(M){return Os(M,p,g)})}),mi.prototype.reject=function(p){return this.filter(Mr(Xn(p)))},mi.prototype.slice=function(p,g){p=Ti(p);var M=this;return M.__filtered__&&(p>0||g<0)?new mi(M):(p<0?M=M.takeRight(-p):p&&(M=M.drop(p)),g!==i&&(g=Ti(g),M=g<0?M.dropRight(-g):M.take(g-p)),M)},mi.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},mi.prototype.toArray=function(){return this.take(Qn)},Ur(mi.prototype,function(p,g){var M=/^(?:filter|find|map|reject)|While$/.test(g),z=/^(?:head|last)$/.test(g),q=rt[z?"take"+(g=="last"?"Right":""):g],st=z||/^find/.test(g);q&&(rt.prototype[g]=function(){var St=this.__wrapped__,Vt=z?[1]:arguments,Kt=St instanceof mi,Ie=Vt[0],Ee=Kt||Zn(St),Oe=function(or){var mr=q.apply(rt,Ba([or],Vt));return z&&xn?mr[0]:mr};Ee&&M&&typeof Ie=="function"&&Ie.length!=1&&(Kt=Ee=!1);var xn=this.__chain__,qn=!!this.__actions__.length,fi=st&&!xn,Qi=Kt&&!qn;if(!st&&Ee){St=Qi?St:new mi(this);var pi=p.apply(St,Vt);return pi.__actions__.push({func:Bf,args:[Oe],thisArg:i}),new ua(pi,xn)}return fi&&Qi?p.apply(this,Vt):(pi=this.thru(Oe),fi?z?pi.value()[0]:pi.value():pi)})}),wo(["pop","push","shift","sort","splice","unshift"],function(p){var g=Oa[p],M=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",z=/^(?:pop|shift)$/.test(p);rt.prototype[p]=function(){var q=arguments;if(z&&!this.__chain__){var st=this.value();return g.apply(Zn(st)?st:[],q)}return this[M](function(St){return g.apply(Zn(St)?St:[],q)})}}),Ur(mi.prototype,function(p,g){var M=rt[g];if(M){var z=M.name+"";Ln.call(wa,z)||(wa[z]=[]),wa[z].push({name:g,func:M})}}),wa[Rd(i,pt).name]=[{name:"wrapper",func:i}],mi.prototype.clone=Cf,mi.prototype.reverse=Qc,mi.prototype.value=Eh,rt.prototype.at=Of,rt.prototype.chain=Cc,rt.prototype.commit=Ny,rt.prototype.next=Vy,rt.prototype.plant=Go,rt.prototype.reverse=ah,rt.prototype.toJSON=rt.prototype.valueOf=rt.prototype.value=Uy,rt.prototype.first=rt.prototype.head,Ll&&(rt.prototype[Ll]=R1),rt},fr=Bi();Qs?((Qs.exports=fr)._=fr,lc._=fr):co._=fr}).call(bs)})(r_,r_.exports);var qv=r_.exports;const dA="lang";function dB(t){ff(t,dA,yl({locale:{}}))}function VM(t){return ia(t,dA).locale}function mB(t,e){const i=VM(t);i&&(i.locale=qv.merge(i.locale||{},e))}xd(dA,dB);function ga(t){const e=De(()=>VM(t));function i(f){var o;return UM((o=e.value)==null?void 0:o.locale,f,f)}const a=De(()=>i);function u(f){mB(t,f)}return{trans:a,setLocale:u}}function UM(t,e,i){const a=Array.isArray(e)?e:e.split(".").filter(u=>u.length);return a.length<1?t===void 0?i:t:t==null?i:UM(t[a.shift()],a,i)}const gB={class:"form-group"},vB={key:0},yB={class:"input-container"},_B=["disabled"],xB=di({__name:"input-text",props:Zs({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=_l(t,"modelValue");return(i,a)=>(ut(),Yt("div",gB,[t.label?(ut(),Yt("label",vB,vn(t.label),1)):sn("",!0),At("div",yB,[oc(At("input",er(i.$attrs,{"onUpdate:modelValue":a[0]||(a[0]=u=>e.value=u),disabled:t.disabled}),null,16,_B),[[x5,e.value]])])]))}}),Oo=Fn(xB,[["__scopeId","data-v-3f8ab997"]]),bB={class:"form-group"},AB={key:0},wB={class:"input-container"},CB={value:"",disabled:"",selected:"",hidden:""},IB=["value"],MB=di({__name:"input-select",props:Zs({label:String,items:{type:Array,default:()=>[]},itemValue:{type:String,default:"value"},itemText:{type:String,default:"text"},returnObject:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=_l(t,"modelValue"),i=t;function a(o){return typeof o=="string"||i.returnObject?o:o[i.itemValue]}function u(o){return typeof o=="string"?o:o[i.itemText]}function f(o){return typeof o=="string"?o:o[i.itemValue]}return(o,y)=>(ut(),Yt("div",bB,[t.label?(ut(),Yt("label",AB,vn(t.label),1)):sn("",!0),At("div",wB,[oc(At("select",er(o.$attrs,{"onUpdate:modelValue":y[0]||(y[0]=_=>e.value=_),required:""}),[At("option",CB,vn(o.$attrs.placeholder),1),(ut(!0),Yt(Ai,null,Fo(t.items,_=>(ut(),Yt("option",{value:a(_),key:f(_)},vn(u(_)),9,IB))),128))],16),[[jb,e.value]])])]))}}),Ym=Fn(MB,[["__scopeId","data-v-2fa00323"]]),EB={__name:"base-button",props:{active:Boolean,disabled:Boolean},setup(t){const e=t;return(i,a)=>(ut(),Yt("button",er({class:"map-control__button clickable"},i.$attrs,{class:{"map-control__button-active":e.active,"map-control__button-disabled":e.disabled}}),[Hn(i.$slots,"default",{},void 0,!0)],16))}},zc=Fn(EB,[["__scopeId","data-v-60fc15c5"]]),SB=["aria-expanded"],TB={class:"collapse-header__title"},kB={class:"collapse-header__icon"},PB={key:0,class:"collapse-content"},LB={class:"collapse-content-box"},DB={name:"Collapse"},RB=Object.assign(DB,{props:{selected:{type:Boolean,default:!0}},emits:["update:selected","open","close"],setup(t,{emit:e}){const i=t,a=e,u=Ke(i.selected),f=()=>{u.value=!u.value,a("update:selected",u.value),u.value?a("open"):a("close")},o={open:nM,close:t4};return(y,_)=>(ut(),Yt("div",{class:No(["collapse collapse-item",{"is-active":u.value}])},[At("div",{class:"collapse-header touchable",role:"tab","aria-expanded":u.value?"true":"false",onClick:so(f,["prevent"])},[At("div",TB,[Hn(y.$slots,"header",{},void 0,!0)]),At("div",kB,[u.value?(ut(),Se(W(Rn),{key:0,size:"14",type:"mdi",path:o.close},null,8,["path"])):(ut(),Se(W(Rn),{key:1,size:"14",type:"mdi",path:o.open},null,8,["path"]))])],8,SB),Pt(Ub,{name:"fade"},{default:Xt(()=>[u.value?(ut(),Yt("div",PB,[At("div",LB,[Hn(y.$slots,"default",{},void 0,!0)])])):sn("",!0)]),_:3})],2))}}),lb=Fn(RB,[["__scopeId","data-v-208c4e72"]]),zB={class:"form-group"},BB={key:0},OB={class:"input-container"},FB=di({__name:"input-textarea",props:Zs({label:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=_l(t,"modelValue");return(i,a)=>(ut(),Yt("div",zB,[t.label?(ut(),Yt("label",BB,vn(t.label),1)):sn("",!0),At("div",OB,[oc(At("textarea",er(i.$attrs,{"onUpdate:modelValue":a[0]||(a[0]=u=>e.value=u)}),null,16),[[dp,e.value]])])]))}}),jM=Fn(FB,[["__scopeId","data-v-6013ce0d"]]),NB={class:"form-group"},VB={key:0},UB={class:"input-container"},jB=["min","max","step","disabled"],HB={class:"input-slider__value"},GB=["min","max","step","disabled"],qB=di({__name:"input-slider",props:Zs({label:String,min:{default:0},max:{default:100},step:{default:1},disabled:Boolean},{modelValue:{default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=_l(t,"modelValue"),i=t,a=De(()=>(e.value-i.min)*100/(i.max-i.min)+"% 100%");return(u,f)=>(ut(),Yt("div",NB,[t.label?(ut(),Yt("label",VB,vn(t.label),1)):sn("",!0),At("div",UB,[oc(At("input",{"onUpdate:modelValue":f[0]||(f[0]=o=>e.value=o),type:"range",min:t.min,max:t.max,step:t.step,style:Gr({backgroundSize:a.value}),disabled:t.disabled},null,12,jB),[[dp,e.value]]),At("div",HB,[oc(At("input",{"onUpdate:modelValue":f[1]||(f[1]=o=>e.value=o),type:"number",min:t.min,max:t.max,step:t.step,disabled:t.disabled},null,8,GB),[[dp,e.value]])])])]))}}),o_=Fn(qB,[["__scopeId","data-v-6248ac13"]]),WB={class:"form-group"},ZB={class:"form-control form-checkbox"},$B=["disabled"],YB=di({__name:"input-checkbox",props:Zs({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=_l(t,"modelValue");return(i,a)=>(ut(),Yt("div",WB,[At("div",ZB,[oc(At("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=u=>e.value=u),disabled:t.disabled},null,8,$B),[[OI,e.value]]),At("label",null,vn(t.label),1)])]))}}),XB=Fn(YB,[["__scopeId","data-v-d59a9d80"]]),KB={class:"form-group"},QB={key:0},JB={class:"input-container"},t8=["onClick"],e8={__name:"input-choose",props:Zs({label:String,items:{type:Array,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=_l(t,"modelValue");function i(a){e.value=a.value}return(a,u)=>(ut(),Yt("div",KB,[t.label?(ut(),Yt("label",QB,vn(t.label),1)):sn("",!0),At("div",JB,[(ut(!0),Yt(Ai,null,Fo(t.items,f=>(ut(),Yt("div",{key:f.value,class:No(["item-choose",{"item-choose-active":f.value===e.value}]),onClick:so(o=>i(f),["stop"])},vn(f.text),11,t8))),128))])]))}},n8=Fn(e8,[["__scopeId","data-v-15a326b0"]]),i8="";function Xm(t,e){e===void 0&&(e={});var i=e.insertAt;if(!(!t||typeof document>"u")){var a=document.head||document.getElementsByTagName("head")[0],u=document.createElement("style");u.type="text/css",i==="top"&&a.firstChild?a.insertBefore(u,a.firstChild):a.appendChild(u),u.styleSheet?u.styleSheet.cssText=t:u.appendChild(document.createTextNode(t))}}const Km=function(t,e){const{componentPrefix:i=i8}=e||{};t.component(`${i}${this.name}`,this)},fx={};var Wv={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":`url(${o8(this.white,this.grey,this.size)})`}}}};function r8(t,e,i){if(typeof document>"u")return null;const a=document.createElement("canvas");a.width=a.height=i*2;const u=a.getContext("2d");return u?(u.fillStyle=t,u.fillRect(0,0,a.width,a.height),u.fillStyle=e,u.fillRect(0,0,i,i),u.translate(i,i),u.fillRect(0,0,i,i),a.toDataURL()):null}function o8(t,e,i){const a=`${t},${e},${i}`;if(fx[a])return fx[a];const u=r8(t,e,i);return fx[a]=u,u}function a8(t,e,i,a,u,f){return ut(),Yt("div",{class:"vc-checkerboard",style:Gr(f.bgStyle)},null,4)}var s8=".vc-checkerboard{background-size:contain;bottom:0;left:0;position:absolute;right:0;top:0}";Xm(s8);Wv.render=a8;Wv.__file="src/components/checkboard/checkboard.vue";Wv.install=Km;var B_={name:"Alpha",components:{Checkboard:Wv},props:{value:Object,onChange:Function},computed:{colors(){return this.value},gradientColor(){const{rgba:t}=this.colors,e=[t.r,t.g,t.b].join(",");return`linear-gradient(to right, rgba(${e}, 0) 0%, rgba(${e}, 1) 100%)`}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:i}=this.$refs;if(!i)return;const a=i.clientWidth,u=i.getBoundingClientRect().left+window.pageXOffset,o=(t.pageX||(t.touches?t.touches[0].pageX:0))-u;let y;o<0?y=0:o>a?y=1:y=Math.round(o*100/a)/100,this.colors.a!==y&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:y,source:"rgba"})},handleMouseDown(t){this.handleChange(t,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const l8={class:"vc-alpha"},u8={class:"vc-alpha-checkboard-wrap"},c8=At("div",{class:"vc-alpha-picker"},null,-1),h8=[c8];function f8(t,e,i,a,u,f){const o=Ha("Checkboard");return ut(),Yt("div",l8,[At("div",u8,[Pt(o)]),At("div",{class:"vc-alpha-gradient",style:Gr({background:f.gradientColor})},null,4),At("div",{ref:"container",class:"vc-alpha-container",onMousedown:e[0]||(e[0]=(...y)=>f.handleMouseDown&&f.handleMouseDown(...y)),onTouchmove:e[1]||(e[1]=(...y)=>f.handleChange&&f.handleChange(...y)),onTouchstart:e[2]||(e[2]=(...y)=>f.handleChange&&f.handleChange(...y))},[At("div",{class:"vc-alpha-pointer",style:Gr({left:`${f.colors.a*100}%`})},h8,4)],544)])}var p8=".vc-alpha,.vc-alpha-checkboard-wrap{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-container{cursor:pointer;height:100%;margin:0 3px;position:relative;z-index:2}.vc-alpha-pointer{position:absolute;z-index:2}.vc-alpha-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";Xm(p8);B_.render=f8;B_.__file="src/components/alpha/alpha.vue";B_.install=Km;function Cs(t,e){d8(t)&&(t="100%");var i=m8(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),i&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function v0(t){return Math.min(1,Math.max(0,t))}function d8(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function m8(t){return typeof t=="string"&&t.indexOf("%")!==-1}function HM(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function y0(t){return t<=1?"".concat(Number(t)*100,"%"):t}function sd(t){return t.length===1?"0"+t:String(t)}function g8(t,e,i){return{r:Cs(t,255)*255,g:Cs(e,255)*255,b:Cs(i,255)*255}}function M2(t,e,i){t=Cs(t,255),e=Cs(e,255),i=Cs(i,255);var a=Math.max(t,e,i),u=Math.min(t,e,i),f=0,o=0,y=(a+u)/2;if(a===u)o=0,f=0;else{var _=a-u;switch(o=y>.5?_/(2-a-u):_/(a+u),a){case t:f=(e-i)/_+(e<i?6:0);break;case e:f=(i-t)/_+2;break;case i:f=(t-e)/_+4;break}f/=6}return{h:f,s:o,l:y}}function px(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*(6*i):i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function v8(t,e,i){var a,u,f;if(t=Cs(t,360),e=Cs(e,100),i=Cs(i,100),e===0)u=i,f=i,a=i;else{var o=i<.5?i*(1+e):i+e-i*e,y=2*i-o;a=px(y,o,t+1/3),u=px(y,o,t),f=px(y,o,t-1/3)}return{r:a*255,g:u*255,b:f*255}}function E2(t,e,i){t=Cs(t,255),e=Cs(e,255),i=Cs(i,255);var a=Math.max(t,e,i),u=Math.min(t,e,i),f=0,o=a,y=a-u,_=a===0?0:y/a;if(a===u)f=0;else{switch(a){case t:f=(e-i)/y+(e<i?6:0);break;case e:f=(i-t)/y+2;break;case i:f=(t-e)/y+4;break}f/=6}return{h:f,s:_,v:o}}function y8(t,e,i){t=Cs(t,360)*6,e=Cs(e,100),i=Cs(i,100);var a=Math.floor(t),u=t-a,f=i*(1-e),o=i*(1-u*e),y=i*(1-(1-u)*e),_=a%6,C=[i,o,f,f,y,i][_],S=[y,i,i,o,f,f][_],k=[f,f,y,i,i,o][_];return{r:C*255,g:S*255,b:k*255}}function S2(t,e,i,a){var u=[sd(Math.round(t).toString(16)),sd(Math.round(e).toString(16)),sd(Math.round(i).toString(16))];return a&&u[0].startsWith(u[0].charAt(1))&&u[1].startsWith(u[1].charAt(1))&&u[2].startsWith(u[2].charAt(1))?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0):u.join("")}function _8(t,e,i,a,u){var f=[sd(Math.round(t).toString(16)),sd(Math.round(e).toString(16)),sd(Math.round(i).toString(16)),sd(x8(a))];return u&&f[0].startsWith(f[0].charAt(1))&&f[1].startsWith(f[1].charAt(1))&&f[2].startsWith(f[2].charAt(1))&&f[3].startsWith(f[3].charAt(1))?f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0)+f[3].charAt(0):f.join("")}function x8(t){return Math.round(parseFloat(t)*255).toString(16)}function T2(t){return gu(t)/255}function gu(t){return parseInt(t,16)}function b8(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var ub={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function A8(t){var e={r:0,g:0,b:0},i=1,a=null,u=null,f=null,o=!1,y=!1;return typeof t=="string"&&(t=I8(t)),typeof t=="object"&&(Kh(t.r)&&Kh(t.g)&&Kh(t.b)?(e=g8(t.r,t.g,t.b),o=!0,y=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Kh(t.h)&&Kh(t.s)&&Kh(t.v)?(a=y0(t.s),u=y0(t.v),e=y8(t.h,a,u),o=!0,y="hsv"):Kh(t.h)&&Kh(t.s)&&Kh(t.l)&&(a=y0(t.s),f=y0(t.l),e=v8(t.h,a,f),o=!0,y="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(i=t.a)),i=HM(i),{ok:o,format:t.format||y,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:i}}var w8="[-\\+]?\\d+%?",C8="[-\\+]?\\d*\\.\\d+%?",ap="(?:".concat(C8,")|(?:").concat(w8,")"),dx="[\\s|\\(]+(".concat(ap,")[,|\\s]+(").concat(ap,")[,|\\s]+(").concat(ap,")\\s*\\)?"),mx="[\\s|\\(]+(".concat(ap,")[,|\\s]+(").concat(ap,")[,|\\s]+(").concat(ap,")[,|\\s]+(").concat(ap,")\\s*\\)?"),Pc={CSS_UNIT:new RegExp(ap),rgb:new RegExp("rgb"+dx),rgba:new RegExp("rgba"+mx),hsl:new RegExp("hsl"+dx),hsla:new RegExp("hsla"+mx),hsv:new RegExp("hsv"+dx),hsva:new RegExp("hsva"+mx),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function I8(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(ub[t])t=ub[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i=Pc.rgb.exec(t);return i?{r:i[1],g:i[2],b:i[3]}:(i=Pc.rgba.exec(t),i?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=Pc.hsl.exec(t),i?{h:i[1],s:i[2],l:i[3]}:(i=Pc.hsla.exec(t),i?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=Pc.hsv.exec(t),i?{h:i[1],s:i[2],v:i[3]}:(i=Pc.hsva.exec(t),i?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=Pc.hex8.exec(t),i?{r:gu(i[1]),g:gu(i[2]),b:gu(i[3]),a:T2(i[4]),format:e?"name":"hex8"}:(i=Pc.hex6.exec(t),i?{r:gu(i[1]),g:gu(i[2]),b:gu(i[3]),format:e?"name":"hex"}:(i=Pc.hex4.exec(t),i?{r:gu(i[1]+i[1]),g:gu(i[2]+i[2]),b:gu(i[3]+i[3]),a:T2(i[4]+i[4]),format:e?"name":"hex8"}:(i=Pc.hex3.exec(t),i?{r:gu(i[1]+i[1]),g:gu(i[2]+i[2]),b:gu(i[3]+i[3]),format:e?"name":"hex"}:!1)))))))))}function Kh(t){return!!Pc.CSS_UNIT.exec(String(t))}var M8=function(){function t(e,i){e===void 0&&(e=""),i===void 0&&(i={});var a;if(e instanceof t)return e;typeof e=="number"&&(e=b8(e)),this.originalInput=e;var u=A8(e);this.originalInput=e,this.r=u.r,this.g=u.g,this.b=u.b,this.a=u.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=i.format)!==null&&a!==void 0?a:u.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=u.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),i,a,u,f=e.r/255,o=e.g/255,y=e.b/255;return f<=.03928?i=f/12.92:i=Math.pow((f+.055)/1.055,2.4),o<=.03928?a=o/12.92:a=Math.pow((o+.055)/1.055,2.4),y<=.03928?u=y/12.92:u=Math.pow((y+.055)/1.055,2.4),.2126*i+.7152*a+.0722*u},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=HM(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=E2(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=E2(this.r,this.g,this.b),i=Math.round(e.h*360),a=Math.round(e.s*100),u=Math.round(e.v*100);return this.a===1?"hsv(".concat(i,", ").concat(a,"%, ").concat(u,"%)"):"hsva(".concat(i,", ").concat(a,"%, ").concat(u,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=M2(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=M2(this.r,this.g,this.b),i=Math.round(e.h*360),a=Math.round(e.s*100),u=Math.round(e.l*100);return this.a===1?"hsl(".concat(i,", ").concat(a,"%, ").concat(u,"%)"):"hsla(".concat(i,", ").concat(a,"%, ").concat(u,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),S2(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),_8(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),i=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(i,", ").concat(a,")"):"rgba(".concat(e,", ").concat(i,", ").concat(a,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(i){return"".concat(Math.round(Cs(i,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(i){return Math.round(Cs(i,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+S2(this.r,this.g,this.b,!1),i=0,a=Object.entries(ub);i<a.length;i++){var u=a[i],f=u[0],o=u[1];if(e===o)return f}return!1},t.prototype.toString=function(e){var i=!!e;e=e??this.format;var a=!1,u=this.a<1&&this.a>=0,f=!i&&u&&(e.startsWith("hex")||e==="name");return f?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(a=this.toRgbString()),e==="prgb"&&(a=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(a=this.toHexString()),e==="hex3"&&(a=this.toHexString(!0)),e==="hex4"&&(a=this.toHex8String(!0)),e==="hex8"&&(a=this.toHex8String()),e==="name"&&(a=this.toName()),e==="hsl"&&(a=this.toHslString()),e==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var i=this.toHsl();return i.l+=e/100,i.l=v0(i.l),new t(i)},t.prototype.brighten=function(e){e===void 0&&(e=10);var i=this.toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(255*-(e/100)))),i.g=Math.max(0,Math.min(255,i.g-Math.round(255*-(e/100)))),i.b=Math.max(0,Math.min(255,i.b-Math.round(255*-(e/100)))),new t(i)},t.prototype.darken=function(e){e===void 0&&(e=10);var i=this.toHsl();return i.l-=e/100,i.l=v0(i.l),new t(i)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var i=this.toHsl();return i.s-=e/100,i.s=v0(i.s),new t(i)},t.prototype.saturate=function(e){e===void 0&&(e=10);var i=this.toHsl();return i.s+=e/100,i.s=v0(i.s),new t(i)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var i=this.toHsl(),a=(i.h+e)%360;return i.h=a<0?360+a:a,new t(i)},t.prototype.mix=function(e,i){i===void 0&&(i=50);var a=this.toRgb(),u=new t(e).toRgb(),f=i/100,o={r:(u.r-a.r)*f+a.r,g:(u.g-a.g)*f+a.g,b:(u.b-a.b)*f+a.b,a:(u.a-a.a)*f+a.a};return new t(o)},t.prototype.analogous=function(e,i){e===void 0&&(e=6),i===void 0&&(i=30);var a=this.toHsl(),u=360/i,f=[this];for(a.h=(a.h-(u*e>>1)+720)%360;--e;)a.h=(a.h+u)%360,f.push(new t(a));return f},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var i=this.toHsv(),a=i.h,u=i.s,f=i.v,o=[],y=1/e;e--;)o.push(new t({h:a,s:u,v:f})),f=(f+y)%1;return o},t.prototype.splitcomplement=function(){var e=this.toHsl(),i=e.h;return[this,new t({h:(i+72)%360,s:e.s,l:e.l}),new t({h:(i+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var i=this.toRgb(),a=new t(e).toRgb(),u=i.a+a.a*(1-i.a);return new t({r:(i.r*i.a+a.r*a.a*(1-i.a))/u,g:(i.g*i.a+a.g*a.a*(1-i.a))/u,b:(i.b*i.a+a.b*a.a*(1-i.a))/u,a:u})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var i=this.toHsl(),a=i.h,u=[this],f=360/e,o=1;o<e;o++)u.push(new t({h:(a+o*f)%360,s:i.s,l:i.l}));return u},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function ep(...t){return new M8(...t)}function gx(t,e){const i=t&&t.a;let a;t&&t.hsl?a=ep(t.hsl):t&&t.hex&&t.hex.length>0?a=ep(t.hex):t&&t.hsv?a=ep(t.hsv):t&&t.rgba?a=ep(t.rgba):t&&t.rgb?a=ep(t.rgb):a=ep(t),a&&(a._a===void 0||a._a===null)&&a.setAlpha(i||a.getAlpha());const u=a.toHsl(),f=a.toHsv();return u.s===0&&(f.h=u.h=t.h||t.hsl&&t.hsl.h||e||0),f.v<.0164&&(f.h=t.h||t.hsv&&t.hsv.h||0,f.s=t.s||t.hsv&&t.hsv.s||0),u.l<.01&&(u.h=t.h||t.hsl&&t.hsl.h||0,u.s=t.s||t.hsl&&t.hsl.s||0),{hsl:u,hex:a.toHexString().toUpperCase(),hex8:a.toHex8String().toUpperCase(),rgba:a.toRgb(),hsv:f,oldHue:t.h||e||u.h,source:t.source,a:a.getAlpha()}}var E8={model:{prop:"modelValue",event:"update:modelValue"},props:["modelValue"],data(){return{val:gx(this.modelValue)}},computed:{colors:{get(){return this.val},set(t){this.val=t,this.$emit("update:modelValue",t)}}},watch:{modelValue(t){this.val=gx(t)}},methods:{colorChange(t,e){this.oldHue=this.colors.hsl.h,this.colors=gx(t,e||this.oldHue)},isValidHex(t){return ep(t).isValid},simpleCheckForValidColor(t){const e=["r","g","b","a","h","s","l","v"];let i=0,a=0;for(let u=0;u<e.length;u++){const f=e[u];t[f]&&(i++,isNaN(t[f])||a++)}if(i===a)return t},paletteUpperCase(t){return t.map(e=>e.toUpperCase())},isTransparent(t){return ep(t).getAlpha()===0}}},O_={name:"EditableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.value},set(t){if(this.max!==void 0&&+t>this.max)this.$refs.input.value=this.max;else return t}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(t){this.handleChange(t.target.value)},handleChange(t){const e={};e[this.label]=t,e.hex===void 0&&e["#"]===void 0?this.$emit("change",e):t.length>5&&this.$emit("change",e)},handleKeyDown(t){let{val:e}=this;const i=Number(e);if(i){const a=this.arrowOffset||1;t.keyCode===38&&(e=i+a,this.handleChange(e),t.preventDefault()),t.keyCode===40&&(e=i-a,this.handleChange(e),t.preventDefault())}}}};const S8={class:"vc-editable-input"},T8=["aria-labelledby"],k8=["id","for"],P8={class:"vc-input__desc"};function L8(t,e,i,a,u,f){return ut(),Yt("div",S8,[oc(At("input",{ref:"input","onUpdate:modelValue":e[0]||(e[0]=o=>f.val=o),"aria-labelledby":f.labelId,class:"vc-input__input",onKeydown:e[1]||(e[1]=(...o)=>f.handleKeyDown&&f.handleKeyDown(...o)),onInput:e[2]||(e[2]=(...o)=>f.update&&f.update(...o))},null,40,T8),[[dp,f.val]]),At("span",{id:f.labelId,for:i.label,class:"vc-input__label"},vn(f.labelSpanText),9,k8),At("span",P8,vn(i.desc),1)])}var D8=".vc-editable-input{position:relative}.vc-input__input{border:0;outline:none;padding:0}.vc-input__label{text-transform:capitalize}";Xm(D8);O_.render=L8;O_.__file="src/components/editable-input/editable-input.vue";O_.install=Km;function vx(t,e,i){return e<i?t<e?e:t>i?i:t:t<i?i:t>e?e:t}var F_={name:"Saturation",props:{value:Object},computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return`${-(this.colors.hsv.v*100)+1+100}%`},pointerLeft(){return`${this.colors.hsv.s*100}%`}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:i}=this.$refs;if(!i)return;const a=i.clientWidth,u=i.clientHeight,f=i.getBoundingClientRect().left+window.pageXOffset,o=i.getBoundingClientRect().top+window.pageYOffset,y=t.pageX||(t.touches?t.touches[0].pageX:0),_=t.pageY||(t.touches?t.touches[0].pageY:0),C=vx(y-f,0,a),S=vx(_-o,0,u),k=C/a,P=vx(-(S/u)+1,0,1);this.onChange({h:this.colors.hsv.h,s:k,v:P,a:this.colors.hsv.a,source:"hsva"})},onChange(t){this.$emit("change",t)},handleMouseDown(t){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(t){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const R8=At("div",{class:"vc-saturation--white"},null,-1),z8=At("div",{class:"vc-saturation--black"},null,-1),B8=At("div",{class:"vc-saturation-circle"},null,-1),O8=[B8];function F8(t,e,i,a,u,f){return ut(),Yt("div",{ref:"container",class:"vc-saturation",style:Gr({background:f.bgColor}),onMousedown:e[0]||(e[0]=(...o)=>f.handleMouseDown&&f.handleMouseDown(...o)),onTouchmove:e[1]||(e[1]=(...o)=>f.handleChange&&f.handleChange(...o)),onTouchstart:e[2]||(e[2]=(...o)=>f.handleChange&&f.handleChange(...o))},[R8,z8,At("div",{class:"vc-saturation-pointer",style:Gr({top:f.pointerTop,left:f.pointerLeft})},O8,4)],36)}var N8=".vc-saturation,.vc-saturation--black,.vc-saturation--white{bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{border-radius:50%;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);cursor:head;height:4px;transform:translate(-2px,-2px);width:4px}";Xm(N8);F_.render=F8;F_.__file="src/components/saturation/saturation.vue";F_.install=Km;var N_={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){return this.value},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:`${-(this.colors.hsl.h*100/360)+100}%`:0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":`${this.colors.hsl.h*100/360}%`}},watch:{value:{handler(t,e){const{h:i}=t.hsl;i!==0&&i-this.oldHue>0&&(this.pullDirection="right"),i!==0&&i-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=i},deep:!0,immediate:!0}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:i}=this.$refs;if(!i)return;const a=i.clientWidth,u=i.clientHeight,f=i.getBoundingClientRect().left+window.pageXOffset,o=i.getBoundingClientRect().top+window.pageYOffset,y=t.pageX||(t.touches?t.touches[0].pageX:0),_=t.pageY||(t.touches?t.touches[0].pageY:0),C=y-f,S=_-o;let k,P;this.direction==="vertical"?(S<0?k=360:S>u?k=0:(P=-(S*100/u)+100,k=360*P/100),this.colors.hsl.h!==k&&this.$emit("change",{h:k,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(C<0?k=0:C>a?k=360:(P=C*100/a,k=360*P/100),this.colors.hsl.h!==k&&this.$emit("change",{h:k,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(t){this.handleChange(t,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(t){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const V8=["aria-valuenow"],U8=At("div",{class:"vc-hue-picker"},null,-1),j8=[U8];function H8(t,e,i,a,u,f){return ut(),Yt("div",{class:No(["vc-hue",[f.directionClass]])},[At("div",{ref:"container",class:"vc-hue-container",role:"slider","aria-valuenow":f.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",onMousedown:e[0]||(e[0]=(...o)=>f.handleMouseDown&&f.handleMouseDown(...o)),onTouchmove:e[1]||(e[1]=(...o)=>f.handleChange&&f.handleChange(...o)),onTouchstart:e[2]||(e[2]=(...o)=>f.handleChange&&f.handleChange(...o))},[At("div",{class:"vc-hue-pointer",style:Gr({top:f.pointerTop,left:f.pointerLeft}),role:"presentation"},j8,4)],40,V8)],2)}var G8=".vc-hue{border-radius:2px;bottom:0;left:0;position:absolute;right:0;top:0}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;height:100%;margin:0 2px;position:relative}.vc-hue-pointer{position:absolute;z-index:2}.vc-hue-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";Xm(G8);N_.render=H8;N_.__file="src/components/hue/hue.vue";N_.install=Km;const q8=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var V_={name:"Sketch",components:{Saturation:F_,Hue:N_,Alpha:B_,EdIn:O_,Checkboard:Wv},mixins:[E8],props:{presetColors:{type:Array,default(){return q8}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let t;return this.colors.a<1?t=this.colors.hex8:t=this.colors.hex,t.replace("#","")},activeColor(){const{rgba:t}=this.colors;return`rgba(${[t.r,t.g,t.b,t.a].join(",")})`}},methods:{handlePreset(t){this.colorChange(t)},childChange(t){this.colorChange(t)},inputChange(t){t&&(t.hex?this.isValidHex(t.hex)&&this.colorChange({hex:t.hex,source:"hex"}):(t.r||t.g||t.b||t.a)&&this.colorChange({r:t.r||this.colors.rgba.r,g:t.g||this.colors.rgba.g,b:t.b||this.colors.rgba.b,a:t.a||this.colors.rgba.a,source:"rgba"}))}}};const W8={class:"vc-sketch-saturation-wrap"},Z8={class:"vc-sketch-controls"},$8={class:"vc-sketch-sliders"},Y8={class:"vc-sketch-hue-wrap"},X8={key:0,class:"vc-sketch-alpha-wrap"},K8={class:"vc-sketch-color-wrap"},Q8=["aria-label"],J8={key:0,class:"vc-sketch-field"},tO={class:"vc-sketch-field--double"},eO={class:"vc-sketch-field--single"},nO={class:"vc-sketch-field--single"},iO={class:"vc-sketch-field--single"},rO={key:0,class:"vc-sketch-field--single"},oO={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},aO=["aria-label","onClick"],sO=["aria-label","onClick"];function lO(t,e,i,a,u,f){const o=Ha("Saturation"),y=Ha("Hue"),_=Ha("Alpha"),C=Ha("Checkboard"),S=Ha("EdIn");return ut(),Yt("div",{role:"application","aria-label":"Sketch color picker",class:No(["vc-sketch",[i.disableAlpha?"vc-sketch__disable-alpha":""]])},[At("div",W8,[Pt(o,{value:t.colors,onChange:f.childChange},null,8,["value","onChange"])]),At("div",Z8,[At("div",$8,[At("div",Y8,[Pt(y,{value:t.colors,onChange:f.childChange},null,8,["value","onChange"])]),i.disableAlpha?sn("v-if",!0):(ut(),Yt("div",X8,[Pt(_,{value:t.colors,onChange:f.childChange},null,8,["value","onChange"])]))]),At("div",K8,[At("div",{"aria-label":`Current color is ${f.activeColor}`,class:"vc-sketch-active-color",style:Gr({background:f.activeColor})},null,12,Q8),Pt(C)])]),i.disableFields?sn("v-if",!0):(ut(),Yt("div",J8,[sn(" rgba "),At("div",tO,[Pt(S,{label:"hex",value:f.hex,onChange:f.inputChange},null,8,["value","onChange"])]),At("div",eO,[Pt(S,{label:"r",value:t.colors.rgba.r,onChange:f.inputChange},null,8,["value","onChange"])]),At("div",nO,[Pt(S,{label:"g",value:t.colors.rgba.g,onChange:f.inputChange},null,8,["value","onChange"])]),At("div",iO,[Pt(S,{label:"b",value:t.colors.rgba.b,onChange:f.inputChange},null,8,["value","onChange"])]),i.disableAlpha?sn("v-if",!0):(ut(),Yt("div",rO,[Pt(S,{label:"a",value:t.colors.a,"arrow-offset":.01,max:1,onChange:f.inputChange},null,8,["value","arrow-offset","onChange"])]))])),At("div",oO,[(ut(!0),Yt(Ai,null,Fo(i.presetColors,k=>(ut(),Yt(Ai,null,[t.isTransparent(k)?(ut(),Yt("div",{key:k,"aria-label":`Color:${k}`,class:"vc-sketch-presets-color",onClick:P=>f.handlePreset(k)},[Pt(C)],8,sO)):(ut(),Yt("div",{key:`!${k}`,class:"vc-sketch-presets-color","aria-label":`Color:${k}`,style:Gr({background:k}),onClick:P=>f.handlePreset(k)},null,12,aO))],64))),256))])],2)}var uO=".vc-sketch{background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;padding:10px 10px 0;position:relative;width:200px}.vc-sketch-saturation-wrap{overflow:hidden;padding-bottom:75%;position:relative;width:100%}.vc-sketch-controls{display:flex}.vc-sketch-sliders{flex:1;padding:4px 0}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{height:10px;position:relative}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{border-radius:3px;height:24px;margin-left:4px;margin-top:4px;position:relative;width:24px}.vc-sketch-active-color{border-radius:2px;bottom:0;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);left:0;position:absolute;right:0;top:0;z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px;padding:4px 0 3px 10%;width:90%}.vc-sketch-field .vc-input__label{color:#222;display:block;font-size:11px;padding-bottom:4px;padding-top:3px;text-align:center;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{border-top:1px solid #eee;margin-left:-10px;margin-right:-10px;padding-left:10px;padding-top:10px}.vc-sketch-presets-color{cursor:pointer;display:inline-block;height:16px;margin:0 10px 10px 0;overflow:hidden;position:relative;vertical-align:top;width:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}";Xm(uO);V_.render=lO;V_.__file="src/components/sketch/sketch.vue";V_.install=Km;const cO={class:"form-group"},hO={key:0},fO={class:"input-container"},pO=di({__name:"input-colorPicker",props:Zs({label:String,disabled:Boolean},{modelValue:{default:"#000000"},modelModifiers:{}}),emits:Zs(["change"],["update:modelValue"]),setup(t,{emit:e}){const i=_l(t,"modelValue"),a=e;function u({hex:f}){i.value=f,a("change",f)}return(f,o)=>(ut(),Yt("div",cO,[t.label?(ut(),Yt("label",hO,vn(t.label),1)):sn("",!0),At("div",fO,[Pt(W(V_),er({modelValue:i.value},f.$attrs,{"onUpdate:modelValue":u,disabled:t.disabled}),null,16,["modelValue","disabled"])])]))}}),So=(t={},e,i)=>{const a=ws("$map.id"),u=De(()=>t.mapId||a);Xl(()=>{cp.getMap(u.value,async y=>{e instanceof Function&&await e(y)})}),vd(async()=>{i instanceof Function&&cp.getMap(u.value,async y=>{e instanceof Function&&await i(y)})});function f(y){return cp.getMap(u.value,y)}const o={mapId:t.mapId,dragId:t.dragId,btnWidth:t.btnWidth,position:t.position,controlVisible:t.controlVisible,order:t.order};return{callMap:f,mapId:u,moduleContainerProps:o}},Wa={mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}};function md(t=!1){const e=Ke(t);function i(a){if(a!=null){e.value=!!a;return}e.value=!e.value}return[e,i]}const dO=bp({show:Boolean},"show"),Vi=Qb("drag",{state:{container:yl({}),componentCard:void 0,componentCardHeader:void 0,componentCardSidebarToggle:void 0},getters:{getComponentCard(t){return Vi.state.componentCard},getComponentCardHeader(t){return Vi.state.componentCardHeader},getComponentCardSidebarToggle(t){return Vi.state.componentCardSidebarToggle},getItems(t){return Vi.actions.getContainer(t).items},getItemsShow(t){return Vi.actions.getContainer(t).show},getWidth(t){return Vi.actions.getContainer(t).width},getHeight(t){return Vi.actions.getContainer(t).height},getIsMobile(t){return Vi.actions.getContainer(t).isMobile}},actions:{initContainer(t){Vi.state.container[t]={items:[],show:[],actions:{},height:0,width:0,isMobile:!1}},removeContainer(t){delete Vi.state.container[t]},getContainer(t){if(!t)throw"Not set container id";const e=Vi.state.container[t];if(!e)throw"Not found container for id "+t;return e},setComponentCard(t){Vi.state.componentCard=t},setComponentCardHeader(t){Vi.state.componentCardHeader=t},setComponentCardSidebarToggle(t){Vi.state.componentCardSidebarToggle=t},setParentProps(t,e){const i=Vi.actions.getContainer(t);i.width=e.width,i.height=e.height,i.isMobile=e.isMobile},registerItem(t,e){Vi.actions.getContainer(t).items.push(e)},registerAction(t,e,i){const a=Vi.actions.getContainer(t);a.actions[e]=i},unRegisterItem(t,e){const i=Vi.state.container[t];i&&(i.items=i.items.filter(a=>a!==e),i.show=i.show.filter(a=>a!==e),delete i.actions[e])},registerItemShow(t,e,i){mO(t,e,i),yx(t)},setToBack(t,e){if(!t||!e)return;const i=k2(t),a=i.show.findIndex(u=>u==e);a>0&&(i.show.splice(a,1),i.show.unshift(e),yx(t))},setToFront(t,e){if(!t||!e)return;const i=k2(t),a=i.show.findIndex(u=>u==e);a<i.show.length-1&&(i.show.splice(a,1),i.show.push(e),yx(t))}}});function mO(t,e,i){const a=Vi.actions.getContainer(t),u=a.show;if(i&&!u.includes(e))u.push(e);else if(!i){const f=u.indexOf(e);f!==-1&&u.splice(f,1)}a.show=u}function yx(t){Vi.actions.getContainer(t).show.forEach((i,a)=>{const u=gO(t,i);u&&u.setZIndex(a<0?1:a+2)})}function gO(t,e){return Vi.actions.getContainer(t).actions[e]}function k2(t){const e=Vi.state.container[t];if(!e)throw"Not found container for id "+t;return e}function vO(t){Vi.actions.initContainer(t)}function yO(t){Vi.actions.removeContainer(t)}const _O=Vi.actions.setParentProps;function xO(t,e){Vi.actions.registerItem(t,e)}function bO(t,e){Vi.actions.unRegisterItem(t,e)}const P2=Vi.actions.registerItemShow,AO=Vi.actions.registerAction,wO=Vi.actions.setToFront,CO=Vi.actions.setToBack;Vi.actions.setComponentCard;Vi.actions.setComponentCardHeader;Vi.actions.setComponentCardSidebarToggle;const IO=["id"],MO=di({__name:"draggable-container",props:{containerId:{}},emits:{init:t=>!0,destroy:t=>!0},setup(t,{emit:e}){const i=e,a=Ke(),{containerId:u}=t,f=Ke(u||`draggable-container-${lf()}`),o=Ke(!1);De(()=>Vi.state),Xl(()=>{vO(f.value),window.addEventListener("resize",y),sc(()=>{y(),o.value=!0,i("init",f.value)})}),vd(()=>{yO(f.value),window.removeEventListener("resize",y),i("destroy",f.value)}),cd("containerId",f);function y(){var C,S;const _=((C=a.value)==null?void 0:C.clientWidth)||0;_O(f.value,{width:_,height:((S=a.value)==null?void 0:S.clientHeight)||0,isMobile:_<600})}return(_,C)=>(ut(),Yt("div",{class:"draggable-container",ref_key:"box",ref:a,id:_.containerId},[f.value&&o.value?Hn(_.$slots,"default",{key:0,containerId:_.containerId},void 0,!0):sn("",!0)],8,IO))}}),EO=Fn(MO,[["__scopeId","data-v-57a91267"]]),SO={props:{height:{},width:{}},name:"MapCard",data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},TO={class:"card-container"},kO=Nb('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1);function PO(t,e,i,a,u,f){return ut(),Yt("div",er({class:"card",style:f.cardStyle},t.$attrs),[At("div",TO,[Hn(t.$slots,"default")]),kO],16)}const LO=Fn(SO,[["render",PO]]),DO={name:"MapHeader"},mA=t=>(xh("data-v-c9bfde53"),t=t(),bh(),t),RO=mA(()=>At("hr",{class:"map-divider"},null,-1)),zO={class:"draggable-header"},BO={class:"draggable-header__content"},OO={class:"draggable-header__title"},FO=mA(()=>At("div",{class:"map-spacer"},null,-1)),NO=mA(()=>At("hr",{class:"map-divider"},null,-1));function VO(t,e,i,a,u,f){return ut(),Yt(Ai,null,[RO,At("div",zO,[At("div",BO,[Hn(t.$slots,"pre-title",{},void 0,!0),At("div",OO,[Hn(t.$slots,"title",{},void 0,!0)]),FO,Hn(t.$slots,"extra-btn",{},void 0,!0)])]),NO],64)}const UO=Fn(DO,[["render",VO],["__scopeId","data-v-c9bfde53"]]);function U_(t){const e=De(()=>Vi.getters.getComponentCard(t.containerId)||t.componentCard||LO),i=De(()=>Vi.getters.getComponentCardHeader(t.containerId)||t.componentCardHeader||UO);return{componentCard:e,componentCardHeader:i}}const jO={componentCard:{type:[String,Object]},componentCardHeader:{type:[String,Object]}},HO={name:"ArrangeBringForwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},GO=["aria-hidden","aria-label"],qO=["fill","width","height"],WO={d:"M2,2H16V16H2V2M22,8V22H8V18H10V20H20V10H18V8H22Z"},ZO={key:0};function $O(t,e,i,a,u,f){return ut(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon arrange-bring-forward-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(ut(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[At("path",WO,[i.title?(ut(),Yt("title",ZO,vn(i.title),1)):sn("",!0)])],8,qO))],16,GO)}const YO=Fn(HO,[["render",$O]]),XO={name:"ArrangeSendBackwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},KO=["aria-hidden","aria-label"],QO=["fill","width","height"],JO={d:"M2,2H16V16H2V2M22,8V22H8V18H18V8H22M4,4V14H14V4H4Z"},tF={key:0};function eF(t,e,i,a,u,f){return ut(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon arrange-send-backward-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(ut(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[At("path",JO,[i.title?(ut(),Yt("title",tF,vn(i.title),1)):sn("",!0)])],8,QO))],16,KO)}const nF=Fn(XO,[["render",eF]]),iF={name:"ArrowDownDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},rF=["aria-hidden","aria-label"],oF=["fill","width","height"],aF={d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M7,10L12,15L17,10H7Z"},sF={key:0};function lF(t,e,i,a,u,f){return ut(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon arrow-down-drop-circle-outline-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(ut(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[At("path",aF,[i.title?(ut(),Yt("title",sF,vn(i.title),1)):sn("",!0)])],8,oF))],16,rF)}const L2=Fn(iF,[["render",lF]]),uF={name:"ArrowUpDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},cF=["aria-hidden","aria-label"],hF=["fill","width","height"],fF={d:"M12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M17,14L12,9L7,14H17Z"},pF={key:0};function dF(t,e,i,a,u,f){return ut(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon arrow-up-drop-circle-outline-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(ut(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[At("path",fF,[i.title?(ut(),Yt("title",pF,vn(i.title),1)):sn("",!0)])],8,hF))],16,cF)}const D2=Fn(uF,[["render",dF]]),mF={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},gF=["aria-hidden","aria-label"],vF=["fill","width","height"],yF={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},_F={key:0};function xF(t,e,i,a,u,f){return ut(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon close-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(ut(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[At("path",yF,[i.title?(ut(),Yt("title",_F,vn(i.title),1)):sn("",!0)])],8,vF))],16,gF)}const bF=Fn(mF,[["render",xF]]),AF={name:"DragVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},wF=["aria-hidden","aria-label"],CF=["fill","width","height"],IF={d:"M22.67,12L18.18,16.5L15.67,14L17.65,12L15.67,10.04L18.18,7.53L22.67,12M12,1.33L16.47,5.82L13.96,8.33L12,6.35L10,8.33L7.5,5.82L12,1.33M12,22.67L7.53,18.18L10.04,15.67L12,17.65L14,15.67L16.5,18.18L12,22.67M1.33,12L5.82,7.5L8.33,10L6.35,12L8.33,13.96L5.82,16.47L1.33,12M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10Z"},MF={key:0};function EF(t,e,i,a,u,f){return ut(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon drag-variant-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(ut(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[At("path",IF,[i.title?(ut(),Yt("title",MF,vn(i.title),1)):sn("",!0)])],8,CF))],16,wF)}const SF=Fn(AF,[["render",EF]]),TF={name:"MenuLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},kF=["aria-hidden","aria-label"],PF=["fill","width","height"],LF={d:"M14,7L9,12L14,17V7Z"},DF={key:0};function RF(t,e,i,a,u,f){return ut(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon menu-left-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(ut(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[At("path",LF,[i.title?(ut(),Yt("title",DF,vn(i.title),1)):sn("",!0)])],8,PF))],16,kF)}const R2=Fn(TF,[["render",RF]]),zF={name:"MenuRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},BF=["aria-hidden","aria-label"],OF=["fill","width","height"],FF={d:"M10,17L15,12L10,7V17Z"},NF={key:0};function VF(t,e,i,a,u,f){return ut(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon menu-right-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(ut(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[At("path",FF,[i.title?(ut(),Yt("title",NF,vn(i.title),1)):sn("",!0)])],8,OF))],16,BF)}const z2=Fn(zF,[["render",VF]]);function Zv(){return{CloseIcon:bF,FullscreenIcon:L2,OffFullscreenIcon:D2,ToBackIcon:nF,ToFrontIcon:YO,ExpandedIcon:D2,CloseExpandedIcon:L2,DragIcon:SF,SidebarLeftExpandedIcon:R2,SidebarLeftCloseExpandedIcon:z2,SidebarRightExpandedIcon:z2,SidebarRightCloseExpandedIcon:R2}}function UF(t,e){return e.length<1?!1:e[e.length-1]==t}function jF(t,e){return e.length<1?!1:e[0]==t}function j_(t,e,i){const a=Ke(`draggable-item-${lf()}`),u=Ke(0);function f(o){u.value=o}return Xl(()=>{xO(t,a.value),AO(t,a.value,{setZIndex:f}),e.value&&P2(t,a.value,e.value)}),vd(()=>{bO(t,a.value)}),vl(e,o=>{P2(t,a.value,o)}),{itemId:a,zIndex:u}}function H_(t,e){const i=De(()=>Vi.getters.getItems(t)),a=De(()=>Vi.getters.getItemsShow(t)),u=De(()=>UF(e,a.value)),f=De(()=>jF(e,a.value)),o=De(()=>a.value.length>1);function y(){CO(t,e)}function _(){wO(t,e)}return{items:i,itemShows:a,isLast:u,isFirst:f,isHasItems:o,onToBack:y,onToFront:_}}function HF(t){const e=De(()=>Vi.getters.getWidth(t)),i=De(()=>Vi.getters.getHeight(t));return{containerWidth:e,containerHeight:i}}const G_={disabledExpand:Boolean,disabledHeader:Boolean,disabledClose:Boolean,disabledOrder:Boolean,containerId:String,title:{type:String,default:""},...jO};function q_(t,e,i){const a=Ke(!!t.show||!!i);return vl(()=>t.show,f=>{a.value=f}),{show:De({get(){return a.value},set(f){a.value=f,e("update:show",f),f||e("close")}})}}const W_={show:Boolean},Z_={"update:show":t=>Boolean,close:()=>Boolean};function $_(t,e,i){const a=Ke(!!i);vl(()=>t.expand,o=>{a.value=o});const u=De({get(){return a.value},set(o){a.value=o,e("update:expand",o)}});function f(){u.value=!u.value}return{expand:u,toggle:f}}const Y_={expand:Boolean},X_={"update:expand":t=>Boolean},GF={props:{height:{default:32},width:{default:32},disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},bindClass(){return{"map-control-button--disabled":this.disabled}}}},qF={class:"map-control-button__content"};function WF(t,e,i,a,u,f){return ut(),Yt("button",er({class:"map-control-button"},t.$attrs,{style:f.bindStyle,class:f.bindClass}),[At("span",qF,[Hn(t.$slots,"default",{},void 0,!0)])],16)}const rs=Fn(GF,[["render",WF],["__scopeId","data-v-56c0c801"]]),ZF={key:0},$F={key:1},YF={name:"MapSidebarToggle"},XF=di({...YF,props:{right:Boolean,expand:Boolean},setup(t){const{SidebarLeftExpandedIcon:e,SidebarLeftCloseExpandedIcon:i,SidebarRightExpandedIcon:a,SidebarRightCloseExpandedIcon:u}=Zv();return(f,o)=>(ut(),Yt("button",null,[t.right?(ut(),Yt("span",$F,[t.expand?(ut(),Se(W(a),{key:0,size:16})):(ut(),Se(W(u),{key:1,size:16}))])):(ut(),Yt("span",ZF,[t.expand?(ut(),Se(W(e),{key:0,size:16})):(ut(),Se(W(i),{key:1,size:16}))]))]))}}),KF=Fn(XF,[["__scopeId","data-v-a682cf51"]]),QF={class:"sidebar-container--content"},JF={class:"draggable-sidebar"},t9={class:"draggable-sidebar-content"},e9={key:0,class:"complex-button-close"},n9={key:0},i9={key:1},r9={name:"DraggableItemSideBar"},o9=di({...r9,props:{...W_,...Y_,...G_,componentMapSidebarToggle:{type:[String,Object]},width:{type:[Number,String],default:"auto"},right:Boolean},emits:{...Z_,...X_},setup(t,{emit:e}){const{CloseIcon:i,SidebarLeftExpandedIcon:a,SidebarLeftCloseExpandedIcon:u,SidebarRightExpandedIcon:f,SidebarRightCloseExpandedIcon:o,ToBackIcon:y,ToFrontIcon:_}=Zv(),C=t,S=e,k=ws("containerId",Ke(C.containerId||""));if(!k.value)throw"Not set container id";const{show:P}=q_(C,S),{zIndex:B,itemId:G}=j_(k.value,P),{isLast:j,isFirst:X,isHasItems:pt,onToBack:J,onToFront:nt}=H_(k.value,G.value),{expand:ft,toggle:Lt}=$_(C,S,!0),xt=De(()=>!C.width||C.width=="auto"),{componentCard:Mt,componentCardHeader:Ht}=U_({...C,containerId:k.value});De(()=>Vi.getters.getComponentCardSidebarToggle(k.value)||C.componentMapSidebarToggle||KF);function jt(){P.value=!1}const Qt=De(()=>{let Bt={};return Bt.zIndex=B.value,C.width&&C.width!="auto"&&(C.width&&!isNaN(+C.width)?Bt.width=C.width+"px":Bt.width=C.width),Bt});return(Bt,Ft)=>W(P)?(ut(),Yt("div",{key:0,class:No(["sidebar-container",{expand:W(ft),"left-sidebar-container":!t.right,"right-sidebar-container":t.right,"auto-sidebar-container":xt.value}]),style:Gr(Qt.value)},[At("div",QF,[(ut(),Se(ss(W(Mt)),{width:"100%",height:"100%"},{default:Xt(()=>[At("div",JF,[Bt.disabledHeader?sn("",!0):(ut(),Se(ss(W(Ht)),{key:0},{title:Xt(()=>[Hn(Bt.$slots,"title",{},()=>[xo(vn(Bt.title),1)],!0)]),"extra-btn":Xt(()=>[Hn(Bt.$slots,"extra-btn",{},void 0,!0),W(pt)&&!Bt.disabledOrder?(ut(),Yt(Ai,{key:0},[Pt(rs,{disabled:W(X),onClick:Ft[0]||(Ft[0]=Ot=>W(J)())},{default:Xt(()=>[Pt(W(y),{size:16})]),_:1},8,["disabled"]),Pt(rs,{disabled:W(j),onClick:Ft[1]||(Ft[1]=Ot=>W(nt)())},{default:Xt(()=>[Pt(W(_),{size:16})]),_:1},8,["disabled"])],64)):sn("",!0),Bt.disabledClose?sn("",!0):(ut(),Se(rs,{key:1,onClick:jt},{default:Xt(()=>[Pt(W(i),{size:16})]),_:1}))]),_:3})),At("div",t9,[Hn(Bt.$slots,"default",{},void 0,!0)])])]),_:3}))]),W(P)&&!Bt.disabledExpand?(ut(),Yt("div",e9,[At("button",{onClick:Ft[2]||(Ft[2]=(...Ot)=>W(Lt)&&W(Lt)(...Ot))},[t.right?(ut(),Yt("span",i9,[W(ft)?(ut(),Se(W(f),{key:0,size:16})):(ut(),Se(W(o),{key:1,size:16}))])):(ut(),Yt("span",n9,[W(ft)?(ut(),Se(W(a),{key:0,size:16})):(ut(),Se(W(u),{key:1,size:16}))]))])])):sn("",!0)],6)):sn("",!0)}}),a9=Fn(o9,[["__scopeId","data-v-f2c97c53"]]);function B2(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function mm(t,e,i,a=1){const[u,f]=typeof a=="number"?[a,a]:a,o=Math.round(e/u/t[0])*t[0],y=Math.round(i/f/t[1])*t[1];return[o,y]}function _x(t,e,i){return t-e-i}function xx(t,e,i){return t-e-i}function Qu(t,e,i){return e!==null&&t<e?e:i!==null&&i<t?i:t}function O2(t,e,i){let a=t;const u=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(f=>B2(a[f]));if(!B2(a[u]))return!1;do{if(a[u](e))return!0;if(a===i)return!1;a=a.parentNode}while(a);return!1}function s9(t){const e=window.getComputedStyle(t);return[parseFloat(e.getPropertyValue("width"),10),parseFloat(e.getPropertyValue("height"),10)]}function td(t,e,i){t&&(t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,!0):t["on"+e]=i)}function Qh(t,e,i){t&&(t.detachEvent?t.detachEvent("on"+e,i):t.removeEventListener?t.removeEventListener(e,i,!0):t["on"+e]=null)}const l9=(t,e)=>{const i=t.__vccOpts||t;for(const[a,u]of e)i[a]=u;return i},R0={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},u9={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},c9={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let Jh=R0.mouse;const h9={replace:!0,name:"vue-draggable-resizable",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},h:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},minWidth:{type:Number,default:0,validator:t=>t>=0},minHeight:{type:Number,default:0,validator:t=>t>=0},maxWidth:{type:Number,default:null,validator:t=>t>=0},maxHeight:{type:Number,default:null,validator:t=>t>=0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:t=>typeof t=="string"?t==="auto":t>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:t=>{const e=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(t.filter(i=>e.has(i))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:t=>["x","y","both"].includes(t)},grid:{type:Array,default:()=>[1,1]},parent:{type:Boolean,default:!1},scale:{type:[Number,Array],default:1,validator:t=>typeof t=="number"?t>0:t.length===2&&t[0]>0&&t[1]>0},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,handle:null,enabled:this.active,resizing:!1,dragging:!1,dragEnable:!1,resizeEnable:!1,zIndex:this.z}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxHeight&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e;const[i,a]=s9(this.$el);this.aspectFactor=(this.w!=="auto"?this.w:i)/(this.h!=="auto"?this.h:a),this.width=this.w!=="auto"?this.w:i,this.height=this.h!=="auto"?this.h:a,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.active&&this.$emit("activated"),td(document.documentElement,"mousedown",this.deselect),td(document.documentElement,"touchend touchcancel",this.deselect),td(window,"resize",this.checkParentSize)},beforeUnmount:function(){Qh(document.documentElement,"mousedown",this.deselect),Qh(document.documentElement,"touchstart",this.handleUp),Qh(document.documentElement,"mousemove",this.move),Qh(document.documentElement,"touchmove",this.move),Qh(document.documentElement,"mouseup",this.handleUp),Qh(document.documentElement,"touchend touchcancel",this.deselect),Qh(window,"resize",this.checkParentSize)},methods:{resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top}},getParentSize(){if(this.parent){const t=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(t.getPropertyValue("width"),10),parseInt(t.getPropertyValue("height"),10)]}return[null,null]},elementTouchDown(t){Jh=R0.touch,this.elementDown(t)},elementMouseDown(t){Jh=R0.mouse,this.elementDown(t)},elementDown(t){if(t instanceof MouseEvent&&t.button!==0)return;const e=t.target||t.srcElement;if(this.$el.contains(e)){if(this.onDragStart(t)===!1)return;if(this.dragHandle&&!O2(e,this.dragHandle,this.$el)||this.dragCancel&&O2(e,this.dragCancel,this.$el)){this.dragging=!1;return}this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragEnable=!0),this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),td(document.documentElement,Jh.move,this.move),td(document.documentElement,Jh.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(t){const e=t.target||t.srcElement,i=new RegExp(this.className+"-([trmbl]{2})","");!this.$el.contains(e)&&!i.test(e.className)&&(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),Qh(document.documentElement,Jh.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown(t,e){Jh=R0.touch,this.handleDown(t,e)},handleDown(t,e){e instanceof MouseEvent&&e.which!==1||this.onResizeStart(t,e)!==!1&&(e.stopPropagation&&e.stopPropagation(),this.lockAspectRatio&&!t.includes("m")?this.handle="m"+t.substring(1):this.handle=t,this.resizeEnable=!0,this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),td(document.documentElement,Jh.move,this.handleResize),td(document.documentElement,Jh.stop,this.handleUp))},calcResizeLimits(){let t=this.minW,e=this.minH,i=this.maxW,a=this.maxH;const u=this.aspectFactor,[f,o]=this.grid,y=this.width,_=this.height,C=this.left,S=this.top,k=this.right,P=this.bottom;this.lockAspectRatio&&(t/e>u?e=t/u:t=u*e,i&&a?(i=Math.min(i,u*a),a=Math.min(a,i/u)):i?a=i/u:a&&(i=u*a)),i=i-i%f,a=a-a%o;const B={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(B.minLeft=C%f,B.maxLeft=C+Math.floor((y-t)/f)*f,B.minTop=S%o,B.maxTop=S+Math.floor((_-e)/o)*o,B.minRight=k%f,B.maxRight=k+Math.floor((y-t)/f)*f,B.minBottom=P%o,B.maxBottom=P+Math.floor((_-e)/o)*o,i&&(B.minLeft=Math.max(B.minLeft,this.parentWidth-k-i),B.minRight=Math.max(B.minRight,this.parentWidth-C-i)),a&&(B.minTop=Math.max(B.minTop,this.parentHeight-P-a),B.minBottom=Math.max(B.minBottom,this.parentHeight-S-a)),this.lockAspectRatio&&(B.minLeft=Math.max(B.minLeft,C-S*u),B.minTop=Math.max(B.minTop,S-C/u),B.minRight=Math.max(B.minRight,k-P*u),B.minBottom=Math.max(B.minBottom,P-k/u))):(B.minLeft=null,B.maxLeft=C+Math.floor((y-t)/f)*f,B.minTop=null,B.maxTop=S+Math.floor((_-e)/o)*o,B.minRight=null,B.maxRight=k+Math.floor((y-t)/f)*f,B.minBottom=null,B.maxBottom=P+Math.floor((_-e)/o)*o,i&&(B.minLeft=-(k+i),B.minRight=-(C+i)),a&&(B.minTop=-(P+a),B.minBottom=-(S+a)),this.lockAspectRatio&&i&&a&&(B.minLeft=Math.min(B.minLeft,-(k+i)),B.minTop=Math.min(B.minTop,-(a+P)),B.minRight=Math.min(B.minRight,-C-i),B.minBottom=Math.min(B.minBottom,-S-a))),B},move(t){this.resizing?this.handleResize(t):this.dragEnable&&this.handleDrag(t)},handleDrag(t){const e=this.axis,i=this.grid,a=this.bounds,u=this.mouseClickPosition,f=e&&e!=="y"?u.mouseX-(t.touches?t.touches[0].pageX:t.pageX):0,o=e&&e!=="x"?u.mouseY-(t.touches?t.touches[0].pageY:t.pageY):0,[y,_]=mm(i,f,o,this.scale),C=Qu(u.left-y,a.minLeft,a.maxLeft),S=Qu(u.top-_,a.minTop,a.maxTop);if(this.onDrag(C,S)===!1)return;const k=Qu(u.right+y,a.minRight,a.maxRight),P=Qu(u.bottom+_,a.minBottom,a.maxBottom);this.left=C,this.top=S,this.right=k,this.bottom=P,this.$emit("dragging",this.left,this.top),this.dragging=!0},moveHorizontally(t){const[e,i]=mm(this.grid,t,this.top,1),a=Qu(e,this.bounds.minLeft,this.bounds.maxLeft);this.left=a,this.right=this.parentWidth-this.width-a},moveVertically(t){const[e,i]=mm(this.grid,this.left,t,1),a=Qu(i,this.bounds.minTop,this.bounds.maxTop);this.top=a,this.bottom=this.parentHeight-this.height-a},handleResize(t){let e=this.left,i=this.top,a=this.right,u=this.bottom;const f=this.mouseClickPosition,o=this.aspectFactor,y=f.mouseX-(t.touches?t.touches[0].pageX:t.pageX),_=f.mouseY-(t.touches?t.touches[0].pageY:t.pageY);!this.widthTouched&&y&&(this.widthTouched=!0),!this.heightTouched&&_&&(this.heightTouched=!0);const[C,S]=mm(this.grid,y,_,this.scale);this.handle.includes("b")?(u=Qu(f.bottom+S,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(a=this.right-(this.bottom-u)*o)):this.handle.includes("t")&&(i=Qu(f.top-S,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(e=this.left-(this.top-i)*o)),this.handle.includes("r")?(a=Qu(f.right+C,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(u=this.bottom-(this.right-a)/o)):this.handle.includes("l")&&(e=Qu(f.left-C,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(i=this.top-(this.left-e)/o));const k=_x(this.parentWidth,e,a),P=xx(this.parentHeight,i,u);this.onResize(this.handle,e,i,k,P)!==!1&&(this.left=e,this.top=i,this.right=a,this.bottom=u,this.width=k,this.height=P,this.$emit("resizing",this.left,this.top,this.width,this.height),this.resizing=!0)},changeWidth(t){const[e,i]=mm(this.grid,t,0,1),a=Qu(this.parentWidth-e-this.left,this.bounds.minRight,this.bounds.maxRight);let u=this.bottom;this.lockAspectRatio&&(u=this.bottom-(this.right-a)/this.aspectFactor);const f=_x(this.parentWidth,this.left,a),o=xx(this.parentHeight,this.top,u);this.right=a,this.bottom=u,this.width=f,this.height=o},changeHeight(t){const[e,i]=mm(this.grid,0,t,1),a=Qu(this.parentHeight-i-this.top,this.bounds.minBottom,this.bounds.maxBottom);let u=this.right;this.lockAspectRatio&&(u=this.right-(this.bottom-a)*this.aspectFactor);const f=_x(this.parentWidth,this.left,u),o=xx(this.parentHeight,this.top,a);this.right=u,this.bottom=a,this.width=f,this.height=o},handleUp(t){this.handle=null,this.resetBoundsAndMouseState(),this.dragEnable=!1,this.resizeEnable=!1,this.resizing&&(this.resizing=!1,this.$emit("resizeStop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragStop",this.left,this.top)),Qh(document.documentElement,Jh.move,this.handleResize)}},computed:{style(){return{transform:`translate(${this.left}px, ${this.top}px)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,...this.dragging&&this.disableUserSelect?u9:c9}},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return this.w==="auto"&&!this.widthTouched?"auto":this.width+"px"},computedHeight(){return this.h==="auto"&&!this.heightTouched?"auto":this.height+"px"},minW(){return this.minWidth},minH(){return this.minHeight},maxW(){return this.maxWidth},maxH(){return this.maxHeight},resizingOnX(){return!!this.handle&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return!!this.handle&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return!!this.handle&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(t){this.enabled=t,t?this.$emit("activated"):this.$emit("deactivated")},z(t){(t>=0||t==="auto")&&(this.zIndex=t)},x(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(t))},y(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(t))},lockAspectRatio(t){t?this.aspectFactor=this.width/this.height:this.aspectFactor=void 0},w(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(t))},h(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(t))}}},f9=["onMousedown","onTouchstart"];function p9(t,e,i,a,u,f){return ut(),Yt("div",{style:Gr(f.style),class:No([{[i.classNameActive]:t.enabled,[i.classNameDragging]:t.dragging,[i.classNameResizing]:t.resizing,[i.classNameDraggable]:i.draggable,[i.classNameResizable]:i.resizable},i.className]),onMousedown:e[0]||(e[0]=(...o)=>f.elementMouseDown&&f.elementMouseDown(...o)),onTouchstart:e[1]||(e[1]=(...o)=>f.elementTouchDown&&f.elementTouchDown(...o))},[(ut(!0),Yt(Ai,null,Fo(f.actualHandles,o=>(ut(),Yt("div",{key:o,class:No([i.classNameHandle,i.classNameHandle+"-"+o]),style:Gr({display:t.enabled?"block":"none"}),onMousedown:so(y=>f.handleDown(o,y),["stop","prevent"]),onTouchstart:so(y=>f.handleTouchDown(o,y),["stop","prevent"])},[Hn(t.$slots,o)],46,f9))),128)),Hn(t.$slots,"default")],38)}const GM=l9(h9,[["render",p9]]);function cb(t){cb.installed||(cb.installed=!0,t.component("VueDraggableResizable",GM))}const d9={install:cb};let a_=null;typeof window<"u"?a_=window.Vue:typeof global<"u"&&(a_=global.Vue);a_&&a_.use(d9);const m9=t=>(xh("data-v-f6c00c46"),t=t(),bh(),t),g9={class:"draggable-popup-desktop"},v9={class:"draggable-popup-drag-container"},y9=m9(()=>At("div",{class:"drag grabbing"},null,-1)),_9={class:"draggable-popup-desktop-content"},x9={name:"DraggableItemPopup"},b9=di({...x9,props:{...W_,...Y_,...G_,sticks:{type:Array,default:()=>["bl","br"]},top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},centerX:Boolean,centerY:Boolean,center:Boolean},emits:{...Z_,...X_},setup(t,{emit:e}){const{CloseIcon:i,CloseExpandedIcon:a,DragIcon:u,ExpandedIcon:f,ToBackIcon:o,ToFrontIcon:y}=Zv(),_=t,C=e,S=ws("containerId",Ke(_.containerId||""));if(!S.value)throw"Not set container id";const{show:k}=q_(_,C),{zIndex:P,itemId:B}=j_(S.value,k),{containerWidth:G,containerHeight:j}=HF(S.value),{isLast:X,isFirst:pt,isHasItems:J,onToBack:nt,onToFront:ft}=H_(S.value,B.value),Lt=Ke(!1),xt=Ke(!1),Mt=Ke(_.height||200),Ht=Ke(Mt.value),jt=Ke(_.width||200),Qt=Ke(0),Bt=Ke(0),{expand:Ft}=$_(_,C,!0);function Ot(){xt.value=!0}function de(){xt.value=!1}const{componentCard:An,componentCardHeader:_e}=U_({..._,containerId:S.value});function Ge(un,Un,ui,oi){jt.value=ui,Mt.value=oi}function je(){k.value=!1}vl(k,()=>{Pi()},{immediate:!0});function Pi(){Lt.value=!1,k&&(_.left!=null&&(Qt.value=_.left),_.top!=null&&(Bt.value=_.top),_.right&&(Qt.value=G.value-_.right-jt.value),_.bottom&&(Bt.value=j.value-_.bottom-Mt.value),(_.center||_.centerX)&&(Qt.value=(G.value-jt.value)/2),(_.center||_.centerY)&&(Bt.value=(j.value-Mt.value)/2),Lt.value=!0)}function Li(){Ft.value&&Mt.value>50&&(Ht.value=Mt.value),Ft.value=!Ft.value,Mt.value=Ft.value?Ht.value:50}function Qn(){var un;(un=window==null?void 0:window.getSelection())==null||un.removeAllRanges()}return(un,Un)=>W(k)&&Lt.value?(ut(),Se(W(GM),er({key:0},un.$attrs,{dragHandle:".drag",parent:!0,handles:t.sticks,w:jt.value,h:Mt.value,x:Qt.value,y:Bt.value,z:W(P),onResizing:Ge,active:xt.value,onActivated:Un[2]||(Un[2]=ui=>Ot()),onDeactivated:Un[3]||(Un[3]=ui=>de()),onDragging:Qn}),{default:Xt(()=>[(ut(),Se(ss(W(An)),{width:jt.value,height:Mt.value},{default:Xt(()=>[At("div",g9,[un.disabledHeader?sn("",!0):(ut(),Se(ss(W(_e)),{key:0},{title:Xt(()=>[Hn(un.$slots,"title",{},()=>[xo(vn(un.title),1)],!0)]),"pre-title":Xt(()=>[At("div",v9,[Pt(W(u),{size:16}),y9])]),"extra-btn":Xt(()=>[Hn(un.$slots,"extra-btn",{},void 0,!0),W(J)&&!un.disabledOrder?(ut(),Yt(Ai,{key:0},[Pt(rs,{disabled:W(pt),onClick:Un[0]||(Un[0]=ui=>W(nt)())},{default:Xt(()=>[Pt(W(o),{size:16})]),_:1},8,["disabled"]),Pt(rs,{disabled:W(X),onClick:Un[1]||(Un[1]=ui=>W(ft)())},{default:Xt(()=>[Pt(W(y),{size:16})]),_:1},8,["disabled"])],64)):sn("",!0),Pt(rs,{onClick:Li},{default:Xt(()=>[W(Ft)?(ut(),Se(W(f),{key:0,size:16})):(ut(),Se(W(a),{key:1,size:16}))]),_:1}),un.disabledClose?sn("",!0):(ut(),Se(rs,{key:1,onClick:je},{default:Xt(()=>[Pt(W(i),{size:16})]),_:1}))]),_:3})),oc(At("div",_9,[Hn(un.$slots,"default",{},void 0,!0)],512),[[BI,W(Ft)]])])]),_:3},8,["width","height"]))]),_:3},16,["handles","w","h","x","y","z","active"])):sn("",!0)}}),A9=Fn(b9,[["__scopeId","data-v-f6c00c46"]]),w9={class:"draggable-float"},C9={name:"DraggableItemFloat"},I9=di({...C9,props:{...W_,...Y_,...G_,top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:[Number,String],default:"auto"},maxHeight:{type:Number,default:500},headerLocation:{type:String,default:"top",validator:function(t){return["top","bottom"].includes(t)}}},emits:{...Z_,...X_},setup(t,{emit:e}){const{CloseIcon:i,ToBackIcon:a,ToFrontIcon:u,ExpandedIcon:f,CloseExpandedIcon:o}=Zv(),y=t,_=e,C=ws("containerId",Ke(y.containerId||""));if(!C.value)throw"Not set container id";const{show:S}=q_(y,_),{zIndex:k,itemId:P}=j_(C.value,S),{isLast:B,isFirst:G,isHasItems:j,onToBack:X,onToFront:pt}=H_(C.value,P.value),{expand:J,toggle:nt}=$_(y,_,!0),{componentCard:ft,componentCardHeader:Lt}=U_({...y,containerId:C.value});function xt(){S.value=!1}const Mt=De(()=>{let Qt={};return Qt.zIndex=k.value,y.top&&(Qt.top=y.top+"px"),y.left&&(Qt.left=y.left+"px"),y.right&&(Qt.right=y.right+"px"),y.bottom&&(Qt.bottom=y.bottom+"px"),y.width&&y.width!="auto"&&(y.width&&!isNaN(+y.width)?Qt.width=y.width+"px":Qt.width=y.width),Qt}),Ht=De(()=>{let Qt={};return Qt.maxHeight=y.maxHeight+"px",Qt}),jt=De(()=>!y.width||y.width=="auto");return(Qt,Bt)=>W(S)?(ut(),Yt("div",{key:0,class:No(["float-container",{"auto-float-container":jt.value}]),style:Gr(Mt.value)},[(ut(),Se(ss(W(ft)),null,{default:Xt(()=>[At("div",w9,[!Qt.disabledHeader&&t.headerLocation==="top"?(ut(),Se(ss(W(Lt)),{key:0},{title:Xt(()=>[Hn(Qt.$slots,"title",{},()=>[xo(vn(Qt.title),1)],!0)]),"extra-btn":Xt(()=>[Hn(Qt.$slots,"extra-btn",{},void 0,!0),Pt(rs,{onClick:W(nt)},{default:Xt(()=>[W(J)?(ut(),Se(W(f),{key:0,size:16})):(ut(),Se(W(o),{key:1,size:16}))]),_:1},8,["onClick"]),W(j)&&!Qt.disabledOrder?(ut(),Yt(Ai,{key:0},[Pt(rs,{disabled:W(G),onClick:Bt[0]||(Bt[0]=Ft=>W(X)())},{default:Xt(()=>[Pt(W(a),{size:16})]),_:1},8,["disabled"]),Pt(rs,{disabled:W(B),onClick:Bt[1]||(Bt[1]=Ft=>W(pt)())},{default:Xt(()=>[Pt(W(u),{size:16})]),_:1},8,["disabled"])],64)):sn("",!0),Qt.disabledClose?sn("",!0):(ut(),Se(rs,{key:1,onClick:xt},{default:Xt(()=>[Pt(W(i),{size:16})]),_:1}))]),_:3})):sn("",!0),oc(At("div",{class:"draggable-float-content",style:Gr(Ht.value)},[Hn(Qt.$slots,"default",{},void 0,!0)],4),[[BI,W(J)]]),!Qt.disabledHeader&&t.headerLocation==="bottom"?(ut(),Se(ss(W(Lt)),{key:1},{title:Xt(()=>[Hn(Qt.$slots,"title",{},()=>[xo(vn(Qt.title),1)],!0)]),"extra-btn":Xt(()=>[Hn(Qt.$slots,"extra-btn",{},void 0,!0),Pt(rs,{onClick:W(nt)},{default:Xt(()=>[W(J)?(ut(),Se(W(f),{key:0,size:16})):(ut(),Se(W(o),{key:1,size:16}))]),_:1},8,["onClick"]),W(j)&&!Qt.disabledOrder?(ut(),Yt(Ai,{key:0},[Pt(rs,{disabled:W(G),onClick:Bt[2]||(Bt[2]=Ft=>W(X)())},{default:Xt(()=>[Pt(W(a),{size:16})]),_:1},8,["disabled"]),Pt(rs,{disabled:W(B),onClick:Bt[3]||(Bt[3]=Ft=>W(pt)())},{default:Xt(()=>[Pt(W(u),{size:16})]),_:1},8,["disabled"])],64)):sn("",!0),Qt.disabledClose?sn("",!0):(ut(),Se(rs,{key:1,onClick:xt},{default:Xt(()=>[Pt(W(i),{size:16})]),_:1}))]),_:3})):sn("",!0)])]),_:3}))],6)):sn("",!0)}}),M9=Fn(I9,[["__scopeId","data-v-e0ac6a74"]]),E9={class:"draggable-bottom"},S9={class:"draggable-bottom-content"},T9={name:"DraggableItemBottom"},k9=di({...T9,props:{...W_,...Y_,...G_},emits:{...Z_,...X_},setup(t,{emit:e}){const{CloseIcon:i,ToBackIcon:a,FullscreenIcon:u,OffFullscreenIcon:f}=Zv(),o=t,y=e,_=ws("containerId",Ke(o.containerId||""));if(!_.value)throw"Not set container id";const{show:C}=q_(o,y),{zIndex:S,itemId:k}=j_(_.value,C),{isFirst:P,isHasItems:B,onToBack:G}=H_(_.value,k.value),{expand:j,toggle:X}=$_(o,y,!1),{componentCard:pt,componentCardHeader:J}=U_({...o,containerId:_.value});function nt(){C.value=!1}const ft=De(()=>{let Lt={};return Lt.zIndex=S.value,Lt.height=j.value?"100%":"45%",Lt});return(Lt,xt)=>W(C)?(ut(),Yt("div",{key:0,class:"popup-mobile-container",style:Gr(ft.value)},[(ut(),Se(ss(W(pt)),null,{default:Xt(()=>[At("div",E9,[Lt.disabledHeader?sn("",!0):(ut(),Se(ss(W(J)),{key:0},{title:Xt(()=>[Hn(Lt.$slots,"title",{},()=>[xo(vn(Lt.title),1)],!0)]),"extra-btn":Xt(()=>[Hn(Lt.$slots,"extra-btn",{},void 0,!0),W(B)&&!Lt.disabledOrder?(ut(),Se(rs,{key:0,disabled:W(P),onClick:xt[0]||(xt[0]=so(Mt=>W(G)(),["prevent","stop"]))},{default:Xt(()=>[Pt(W(a),{size:16})]),_:1},8,["disabled"])):sn("",!0),Pt(rs,{onClick:xt[1]||(xt[1]=Mt=>W(X)())},{default:Xt(()=>[W(j)?(ut(),Se(W(u),{key:0,size:16})):(ut(),Se(W(f),{key:1,size:16}))]),_:1}),Lt.disabledClose?sn("",!0):(ut(),Se(rs,{key:1,onClick:nt},{default:Xt(()=>[Pt(W(i),{size:16})]),_:1}))]),_:3})),At("div",S9,[Hn(Lt.$slots,"default",{},void 0,!0)])])]),_:3}))],4)):sn("",!0)}}),gA=Fn(k9,[["__scopeId","data-v-d3818b1a"]]);function vA(t,e){return di({name:"WithMobileHandle"+t.name,props:{containerId:String},setup(i){const a=ws("containerId",Ke(i.containerId||"")),u=De(()=>Vi.getters.getIsMobile(a.value));return{p_containerId:a,isMobile:u}},render(){return this.isMobile?fd(e,{...this.$attrs,containerId:this.p_containerId},this.$slots):fd(t,{...this.$attrs,containerId:this.p_containerId},this.$slots)}})}const qM=vA(a9,gA),mf=vA(A9,gA);vA(M9,gA);const P9={class:"module__container"},L9={name:"ModuleContainer"},D9=Object.assign(L9,{props:{mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}},setup(t){const e=s3(),i=t,a=De(()=>!!e.btn),u=De(()=>!!e.draggable),f=ws("$map.dragId"),o=ws("$map.id"),y=De(()=>i.dragId||f),_=De(()=>i.mapId||o),C=De(()=>`#map-draggable-${_.value}`),S=De(()=>`#${i.position}-${_.value}`),k=De(()=>{let P={};return i.position.includes("left")&&(P.left=18+i.btnWidth),i.position.includes("right")&&(P.right=18+i.btnWidth),i.position.includes("top")&&(P.top=10),i.position.includes("bottom")&&(P.bottom=10),P.containerId=y.value,P});return(P,B)=>(ut(),Yt("div",P9,[t.controlVisible&&a.value?(ut(),Se(_w,{key:0,to:S.value},[Hn(P.$slots,"btn",{},void 0,!0)],8,["to"])):sn("",!0),Hn(P.$slots,"default",{},void 0,!0),y.value&&u.value?(ut(),Se(_w,{key:1,to:C.value},[Hn(P.$slots,"draggable",Ga(Pa(k.value)),void 0,!0)],8,["to"])):sn("",!0)]))}}),La=Fn(D9,[["__scopeId","data-v-35db38a4"]]),R9={class:"crs-container"},z9={class:"grow"},B9={class:"crs-item-header"},O9={class:"crs-item-header__title"},F9={class:"crs-item-header__action"},N9=["onClick"],V9={class:"crs-item"},U9={key:0},j9={key:1},H9={class:"crs-item__add"},G9=di({__name:"CrsControl",props:{...Wa},setup(t){const{getCrsItems:e,setCrsItems:i}=nA,a=t,{mapId:u,moduleContainerProps:f}=So(a),{trans:o,setLocale:y}=ga(u.value);y({map:{"crs-control":{title:"Crs setting",field:{name:"name",unit:"unit",epsg:"epsg",proj4js:"proj4js"}}}});const[_,C]=md(!1);function S(){C(!_.value)}const k=De(()=>e(u.value)),P=[{text:"degree",value:"degree"},{text:"meter",value:"meter"}],B={delete:Wm,plus:xp},G=X=>{i(u.value,k.value.filter(pt=>pt.epsg!==X.epsg))},j=()=>{k.value.push({name:"",unit:"degree",epsg:""})};return(X,pt)=>(ut(),Se(La,Ga(Pa(W(f))),{btn:Xt(()=>[Pt(Ar,{onClick:so(S,["stop"]),tooltip:W(o)("map.crs-control.title")},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:W($k)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Xt(J=>[W(_)?(ut(),Se(W(mf),er({key:0,height:200,width:400},J,{show:W(_),"onUpdate:show":pt[1]||(pt[1]=nt=>ra(_)?_.value=nt:null),title:W(o)("map.crs-control.title")}),{default:Xt(()=>[At("div",R9,[At("div",z9,[(ut(!0),Yt(Ai,null,Fo(k.value,nt=>(ut(),Se(W(lb),{key:nt.epsg,selected:!1},{header:Xt(()=>[At("div",B9,[At("div",O9,vn(nt.name),1),At("div",F9,[nt.default?sn("",!0):(ut(),Yt("button",{key:0,class:"clickable",onClick:so(ft=>G(nt),["stop"])},[Pt(W(Rn),{size:"14",type:"mdi",path:B.delete},null,8,["path"])],8,N9))])])]),default:Xt(()=>[At("div",V9,[At("div",null,[Pt(W(Oo),{readonly:nt.default,modelValue:nt.name,"onUpdate:modelValue":ft=>nt.name=ft,label:W(o)("map.crs-control.field.name")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),At("div",null,[Pt(W(Oo),{readonly:nt.default,modelValue:nt.epsg,"onUpdate:modelValue":ft=>nt.epsg=ft,label:W(o)("map.crs-control.field.epsg")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),nt.default?sn("",!0):(ut(),Yt("div",U9,[Pt(W(Oo),{modelValue:nt.proj4js,"onUpdate:modelValue":ft=>nt.proj4js=ft,label:W(o)("map.crs-control.field.proj4js")},null,8,["modelValue","onUpdate:modelValue","label"])])),nt.default?sn("",!0):(ut(),Yt("div",j9,[Pt(W(Ym),{modelValue:nt.unit,"onUpdate:modelValue":ft=>nt.unit=ft,label:W(o)("map.crs-control.field.unit"),items:P},null,8,["modelValue","onUpdate:modelValue","label"])]))])]),_:2},1024))),128))]),At("div",H9,[At("button",{class:"layer-item__button clickable",onClick:pt[0]||(pt[0]=so(nt=>j(),["stop"]))},[Pt(W(Rn),{size:"14",type:"mdi",path:B.plus},null,8,["path"])])])])]),_:2},1040,["show","title"])):sn("",!0)]),default:Xt(()=>[Hn(X.$slots,"default",{},void 0,!0)]),_:3},16))}}),q9=Fn(G9,[["__scopeId","data-v-d2ca8f3d"]]),K_=Zm?window:void 0,yA=Zm?window.document:void 0,_A=Zm?window.navigator:void 0;function Bc(...t){let e,i,a,u;if(typeof t[0]=="string"||Array.isArray(t[0])?([i,a,u]=t,e=K_):[e,i,a,u]=t,!e)return T0;Array.isArray(i)||(i=[i]),Array.isArray(a)||(a=[a]);const f=[],o=()=>{f.forEach(S=>S()),f.length=0},y=(S,k,P,B)=>(S.addEventListener(k,P,B),()=>S.removeEventListener(k,P,B)),_=vl(()=>[op(e),Vc(u)],([S,k])=>{if(o(),!S)return;const P=rL(k)?{...k}:k;f.push(...i.flatMap(B=>a.map(G=>y(S,B,G,P))))},{immediate:!0,flush:"post"}),C=()=>{_(),o()};return _d(C),C}let F2=!1;function W9(t,e,i={}){const{window:a=K_,ignore:u=[],capture:f=!0,detectIframe:o=!1}=i;if(!a)return T0;aL&&!F2&&(F2=!0,Array.from(a.document.body.children).forEach(P=>P.addEventListener("click",T0)),a.document.documentElement.addEventListener("click",T0));let y=!0;const _=P=>u.some(B=>{if(typeof B=="string")return Array.from(a.document.querySelectorAll(B)).some(G=>G===P.target||P.composedPath().includes(G));{const G=op(B);return G&&(P.target===G||P.composedPath().includes(G))}}),S=[Bc(a,"click",P=>{const B=op(t);if(!(!B||B===P.target||P.composedPath().includes(B))){if(P.detail===0&&(y=!_(P)),!y){y=!0;return}e(P)}},{passive:!0,capture:f}),Bc(a,"pointerdown",P=>{const B=op(t);y=!_(P)&&!!(B&&!P.composedPath().includes(B))},{passive:!0}),o&&Bc(a,"blur",P=>{setTimeout(()=>{var G;const B=op(t);((G=a.document.activeElement)==null?void 0:G.tagName)==="IFRAME"&&!(B!=null&&B.contains(a.document.activeElement))&&e(P)},0)})].filter(Boolean);return()=>S.forEach(P=>P())}function Z9(){const t=Ke(!1),e=yd();return e&&Xl(()=>{t.value=!0},e),t}function $v(t){const e=Z9();return De(()=>(e.value,!!t()))}function Vg(t,e={}){const{window:i=K_}=e,a=$v(()=>i&&"matchMedia"in i&&typeof i.matchMedia=="function");let u;const f=Ke(!1),o=C=>{f.value=C.matches},y=()=>{u&&("removeEventListener"in u?u.removeEventListener("change",o):u.removeListener(o))},_=bI(()=>{a.value&&(y(),u=i.matchMedia(Vc(t)),"addEventListener"in u?u.addEventListener("change",o):u.addListener(o),f.value=u.matches)});return _d(()=>{_(),y(),u=void 0}),f}function WM(t,e={}){function i(S,k){let P=Vc(t[Vc(S)]);return k!=null&&(P=uL(P,k)),typeof P=="number"&&(P=`${P}px`),P}const{window:a=K_,strategy:u="min-width"}=e;function f(S){return a?a.matchMedia(S).matches:!1}const o=S=>Vg(()=>`(min-width: ${i(S)})`,e),y=S=>Vg(()=>`(max-width: ${i(S)})`,e),_=Object.keys(t).reduce((S,k)=>(Object.defineProperty(S,k,{get:()=>u==="min-width"?o(k):y(k),enumerable:!0,configurable:!0}),S),{});function C(){const S=Object.keys(t).map(k=>[k,o(k)]);return De(()=>S.filter(([,k])=>k.value).map(([k])=>k))}return Object.assign(_,{greaterOrEqual:o,smallerOrEqual:y,greater(S){return Vg(()=>`(min-width: ${i(S,.1)})`,e)},smaller(S){return Vg(()=>`(max-width: ${i(S,-.1)})`,e)},between(S,k){return Vg(()=>`(min-width: ${i(S)}) and (max-width: ${i(k,-.1)})`,e)},isGreater(S){return f(`(min-width: ${i(S,.1)})`)},isGreaterOrEqual(S){return f(`(min-width: ${i(S)})`)},isSmaller(S){return f(`(max-width: ${i(S,-.1)})`)},isSmallerOrEqual(S){return f(`(max-width: ${i(S)})`)},isInBetween(S,k){return f(`(min-width: ${i(S)}) and (max-width: ${i(k,-.1)})`)},current:C,active(){const S=C();return De(()=>S.value.length===0?"":S.value[S.value.length-1])}})}function N2(t,e={}){const{controls:i=!1,navigator:a=_A}=e,u=$v(()=>a&&"permissions"in a);let f;const o=typeof t=="string"?{name:t}:t,y=Ke(),_=()=>{f&&(y.value=f.state)},C=lL(async()=>{if(u.value){if(!f)try{f=await a.permissions.query(o),Bc(f,"change",_),_()}catch{y.value="prompt"}return f}});return C(),i?{state:y,isSupported:u,query:C}:y}function $9(t={}){const{navigator:e=_A,read:i=!1,source:a,copiedDuring:u=1500,legacy:f=!0}=t,o=$v(()=>e&&"clipboard"in e),y=N2("clipboard-read"),_=N2("clipboard-write"),C=De(()=>o.value||f),S=Ke(""),k=Ke(!1),P=hL(()=>k.value=!1,u);function B(){o.value&&pt(y.value)?e.clipboard.readText().then(J=>{S.value=J}):S.value=X()}C.value&&i&&Bc(["copy","cut"],B);async function G(J=Vc(a)){C.value&&J!=null&&(o.value&&pt(_.value)?await e.clipboard.writeText(J):j(J),S.value=J,k.value=!0,P.start())}function j(J){const nt=document.createElement("textarea");nt.value=J??"",nt.style.position="absolute",nt.style.opacity="0",document.body.appendChild(nt),nt.select(),document.execCommand("copy"),nt.remove()}function X(){var J,nt;return((nt=(J=document==null?void 0:document.getSelection)==null?void 0:J.call(document))==null?void 0:nt.toString())??""}function pt(J){return J==="granted"||J==="prompt"}return{isSupported:C,text:S,copied:k,copy:G}}function Y9(t,e={}){const i=Ke(!1),a=Bv(null);let u=0,f=!0;if(Zm){const o=typeof e=="function"?{onDrop:e}:e,y=_=>{var S;const C=Array.from(((S=_.dataTransfer)==null?void 0:S.files)??[]);return a.value=C.length===0?null:C};Bc(t,"dragenter",_=>{var S,k;const C=Array.from(((S=_==null?void 0:_.dataTransfer)==null?void 0:S.items)||[]).map(P=>P.kind==="file"?P.type:null).filter(nL);if(o.dataTypes&&_.dataTransfer){const P=W(o.dataTypes);if(f=typeof P=="function"?P(C):P?P.some(B=>C.includes(B)):!0,!f)return}_.preventDefault(),u+=1,i.value=!0,(k=o.onEnter)==null||k.call(o,y(_),_)}),Bc(t,"dragover",_=>{var C;f&&(_.preventDefault(),(C=o.onOver)==null||C.call(o,y(_),_))}),Bc(t,"dragleave",_=>{var C;f&&(_.preventDefault(),u-=1,u===0&&(i.value=!1),(C=o.onLeave)==null||C.call(o,y(_),_))}),Bc(t,"drop",_=>{var C;_.preventDefault(),u=0,i.value=!1,(C=o.onDrop)==null||C.call(o,y(_),_)})}return{files:a,isOverDropZone:i}}const V2=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function X9(t,e={}){const{document:i=yA,autoExit:a=!1}=e,u=De(()=>op(t)??(i==null?void 0:i.querySelector("html"))),f=Ke(!1),o=De(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(pt=>i&&pt in i||u.value&&pt in u.value)),y=De(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(pt=>i&&pt in i||u.value&&pt in u.value)),_=De(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(pt=>i&&pt in i||u.value&&pt in u.value)),C=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(pt=>i&&pt in i),S=$v(()=>u.value&&i&&o.value!==void 0&&y.value!==void 0&&_.value!==void 0),k=()=>C?(i==null?void 0:i[C])===u.value:!1,P=()=>{if(_.value){if(i&&i[_.value]!=null)return i[_.value];{const pt=u.value;if((pt==null?void 0:pt[_.value])!=null)return!!pt[_.value]}}return!1};async function B(){if(!(!S.value||!f.value)){if(y.value)if((i==null?void 0:i[y.value])!=null)await i[y.value]();else{const pt=u.value;(pt==null?void 0:pt[y.value])!=null&&await pt[y.value]()}f.value=!1}}async function G(){if(!S.value||f.value)return;P()&&await B();const pt=u.value;o.value&&(pt==null?void 0:pt[o.value])!=null&&(await pt[o.value](),f.value=!0)}async function j(){await(f.value?B():G())}const X=()=>{const pt=P();(!pt||pt&&k())&&(f.value=pt)};return Bc(i,V2,X,!1),Bc(()=>op(u),V2,X,!1),a&&_d(B),{isSupported:S,isFullscreen:f,enter:G,exit:B,toggle:j}}function K9(t={}){const{enableHighAccuracy:e=!0,maximumAge:i=3e4,timeout:a=27e3,navigator:u=_A,immediate:f=!0}=t,o=$v(()=>u&&"geolocation"in u),y=Ke(null),_=Bv(null),C=Ke({accuracy:0,latitude:Number.POSITIVE_INFINITY,longitude:Number.POSITIVE_INFINITY,altitude:null,altitudeAccuracy:null,heading:null,speed:null});function S(G){y.value=G.timestamp,C.value=G.coords,_.value=null}let k;function P(){o.value&&(k=u.geolocation.watchPosition(S,G=>_.value=G,{enableHighAccuracy:e,maximumAge:i,timeout:a}))}f&&P();function B(){k&&u&&u.geolocation.clearWatch(k)}return _d(()=>{B()}),{isSupported:o,coords:C,locatedAt:y,error:_,resume:P,pause:B}}const Q9=di({__name:"FullScreenControl",props:{...Wa,type:{type:String,default:"body"}},setup(t){const e={fullscreen:Gk,exitFullscreen:qk},i=t,{callMap:a,mapId:u,moduleContainerProps:f}=So(i),{trans:o,setLocale:y}=ga(u.value);y({map:{action:{"fullscreen-control-enter":"Enter fullscreen","fullscreen-control-exit":"Exit fullscreen"}}});const{isFullscreen:_,enter:C,exit:S,toggle:k}=X9(i.type=="body"?document.querySelector("body"):P());function P(B){return a(G=>{if(B||(B=G.getContainer()),B.classList.contains("map-container")||B.tagName==="BODY")return B;B=P(B.parentElement)}),B}return(B,G)=>(ut(),Se(La,Ga(Pa(W(f))),{btn:Xt(()=>[Pt(Ar,{icon:"",title:W(_)?W(o)("map.action.fullscreen-control-exit"):W(o)("map.action.fullscreen-control-enter"),onClick:G[0]||(G[0]=j=>W(k)())},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:W(_)?e.exitFullscreen:e.fullscreen},null,8,["path"])]),_:1},8,["title"])]),default:Xt(()=>[Hn(B.$slots,"default")]),_:3},16))}});var ZM={exports:{}};(function(t,e){(function(i,a){t.exports=a()})(bs,function(){var i,a,u;function f(o,y){if(!i)i=y;else if(!a)a=y;else{var _="var sharedChunk = {}; ("+i+")(sharedChunk); ("+a+")(sharedChunk);",C={};i(C),u=y(C),typeof window<"u"&&(u.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}return f(["exports"],function(o){function y(n,r){return n(r={exports:{}},r.exports),r.exports}var _=C;function C(n,r,s,d){this.cx=3*n,this.bx=3*(s-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=d,this.p2x=s,this.p2y=d}C.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n},C.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n},C.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},C.prototype.solveCurveX=function(n,r){var s,d,v,x,A;for(r===void 0&&(r=1e-6),v=n,A=0;A<8;A++){if(x=this.sampleCurveX(v)-n,Math.abs(x)<r)return v;var T=this.sampleCurveDerivativeX(v);if(Math.abs(T)<1e-6)break;v-=x/T}if((v=n)<(s=0))return s;if(v>(d=1))return d;for(;s<d;){if(x=this.sampleCurveX(v),Math.abs(x-n)<r)return v;n>x?s=v:d=v,v=.5*(d-s)+s}return v},C.prototype.solve=function(n,r){return this.sampleCurveY(this.solveCurveX(n,r))};var S=k;function k(n,r){this.x=n,this.y=r}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,r){return this.clone()._rotateAround(n,r)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var r=n.x-this.x,s=n.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,r){return Math.atan2(this.x*r-this.y*n,this.x*n+this.y*r)},_matMult:function(n){var r=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=r,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var r=Math.cos(n),s=Math.sin(n),d=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=d,this},_rotateAround:function(n,r){var s=Math.cos(n),d=Math.sin(n),v=r.y+d*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-d*(this.y-r.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},k.convert=function(n){return n instanceof k?n:Array.isArray(n)?new k(n[0],n[1]):n};var P=typeof self<"u"?self:{},B=Math.pow(2,53)-1;function G(n,r,s,d){var v=new _(n,r,s,d);return function(x){return v.solve(x)}}var j=G(.25,.1,.25,1);function X(n,r,s){return Math.min(s,Math.max(r,n))}function pt(n,r,s){var d=s-r,v=((n-r)%d+d)%d+r;return v===r?s:v}function J(n){for(var r=[],s=arguments.length-1;s-- >0;)r[s]=arguments[s+1];for(var d=0,v=r;d<v.length;d+=1){var x=v[d];for(var A in x)n[A]=x[A]}return n}var nt=1;function ft(){return nt++}function Lt(){return function n(r){return r?(r^16*Math.random()>>r/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}()}function xt(n){return!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}function Mt(n,r){n.forEach(function(s){r[s]&&(r[s]=r[s].bind(r))})}function Ht(n,r){return n.indexOf(r,n.length-r.length)!==-1}function jt(n,r,s){var d={};for(var v in n)d[v]=r.call(s||this,n[v],v,n);return d}function Qt(n,r,s){var d={};for(var v in n)r.call(s||this,n[v],v,n)&&(d[v]=n[v]);return d}function Bt(n){return Array.isArray(n)?n.map(Bt):typeof n=="object"&&n?jt(n,Bt):n}var Ft={};function Ot(n){Ft[n]||(typeof console<"u"&&console.warn(n),Ft[n]=!0)}function de(n,r,s){return(s.y-n.y)*(r.x-n.x)>(r.y-n.y)*(s.x-n.x)}function An(n){for(var r=0,s=0,d=n.length,v=d-1,x=void 0,A=void 0;s<d;v=s++)r+=((A=n[v]).x-(x=n[s]).x)*(x.y+A.y);return r}function _e(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ge(n){var r={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(d,v,x,A){var T=x||A;return r[v]=!T||T.toLowerCase(),""}),r["max-age"]){var s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r}var je=null;function Pi(n){if(je==null){var r=n.navigator?n.navigator.userAgent:null;je=!!n.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return je}function Li(n){try{var r=P[n];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}var Qn,un,Un,ui,oi=P.performance&&P.performance.now?P.performance.now.bind(P.performance):Date.now.bind(Date),wi=P.requestAnimationFrame||P.mozRequestAnimationFrame||P.webkitRequestAnimationFrame||P.msRequestAnimationFrame,ue=P.cancelAnimationFrame||P.mozCancelAnimationFrame||P.webkitCancelAnimationFrame||P.msCancelAnimationFrame,Qe={now:oi,frame:function(n){var r=wi(n);return{cancel:function(){return ue(r)}}},getImageData:function(n,r){r===void 0&&(r=0);var s=P.document.createElement("canvas"),d=s.getContext("2d");if(!d)throw new Error("failed to create canvas 2d context");return s.width=n.width,s.height=n.height,d.drawImage(n,0,0,n.width,n.height),d.getImageData(-r,-r,n.width+2*r,n.height+2*r)},resolveURL:function(n){return Qn||(Qn=P.document.createElement("a")),Qn.href=n,Qn.href},hardwareConcurrency:P.navigator&&P.navigator.hardwareConcurrency||4,get devicePixelRatio(){return P.devicePixelRatio},get prefersReducedMotion(){return!!P.matchMedia&&(un==null&&(un=P.matchMedia("(prefers-reduced-motion: reduce)")),un.matches)}},me={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ke={supported:!1,testSupport:function(n){!Ci&&ui&&(Di?lt(n):Un=n)}},Ci=!1,Di=!1;function lt(n){var r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,ui),n.isContextLost())return;ke.supported=!0}catch{}n.deleteTexture(r),Ci=!0}P.document&&((ui=P.document.createElement("img")).onload=function(){Un&&lt(Un),Un=null,Di=!0},ui.onerror=function(){Ci=!0,Un=null},ui.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var wt="01",te=function(n,r){this._transformRequestFn=n,this._customAccessToken=r,this._createSkuToken()};function le(n){return n.indexOf("mapbox:")===0}te.prototype._createSkuToken=function(){var n=function(){for(var r="",s=0;s<10;s++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",wt,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt},te.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},te.prototype.transformRequest=function(n,r){return this._transformRequestFn&&this._transformRequestFn(n,r)||{url:n}},te.prototype.normalizeStyleURL=function(n,r){if(!le(n))return n;var s=we(n);return s.path="/styles/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||r)},te.prototype.normalizeGlyphsURL=function(n,r){if(!le(n))return n;var s=we(n);return s.path="/fonts/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||r)},te.prototype.normalizeSourceURL=function(n,r){if(!le(n))return n;var s=we(n);return s.path="/v4/"+s.authority+".json",s.params.push("secure"),this._makeAPIURL(s,this._customAccessToken||r)},te.prototype.normalizeSpriteURL=function(n,r,s,d){var v=we(n);return le(n)?(v.path="/styles/v1"+v.path+"/sprite"+r+s,this._makeAPIURL(v,this._customAccessToken||d)):(v.path+=""+r+s,ze(v))},te.prototype.normalizeTileURL=function(n,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!le(n))return n;var s=we(n);s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Qe.devicePixelRatio>=2||r===512?"@2x":"")+(ke.supported?".webp":"$1")),s.path=s.path.replace(/^.+\/v4\//,"/"),s.path="/v4"+s.path;var d=this._customAccessToken||function(v){for(var x=0,A=v;x<A.length;x+=1){var T=A[x].match(/^access_token=(.*)$/);if(T)return T[1]}return null}(s.params)||me.ACCESS_TOKEN;return me.REQUIRE_ACCESS_TOKEN&&d&&this._skuToken&&s.params.push("sku="+this._skuToken),this._makeAPIURL(s,d)},te.prototype.canonicalizeTileURL=function(n,r){var s=we(n);if(!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/))return n;var d="mapbox://tiles/";d+=s.path.replace("/v4/","");var v=s.params;return r&&(v=v.filter(function(x){return!x.match(/^access_token=/)})),v.length&&(d+="?"+v.join("&")),d},te.prototype.canonicalizeTileset=function(n,r){for(var s=!!r&&le(r),d=[],v=0,x=n.tiles||[];v<x.length;v+=1){var A=x[v];Fe(A)?d.push(this.canonicalizeTileURL(A,s)):d.push(A)}return d},te.prototype._makeAPIURL=function(n,r){var s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",d=we(me.API_URL);if(n.protocol=d.protocol,n.authority=d.authority,n.protocol==="http"){var v=n.params.indexOf("secure");v>=0&&n.params.splice(v,1)}if(d.path!=="/"&&(n.path=""+d.path+n.path),!me.REQUIRE_ACCESS_TOKEN)return ze(n);if(!(r=r||me.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+s);if(r[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+s);return n.params=n.params.filter(function(x){return x.indexOf("access_token")===-1}),n.params.push("access_token="+r),ze(n)};var pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Fe(n){return pe.test(n)}var cn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function we(n){var r=n.match(cn);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function ze(n){var r=n.params.length?"?"+n.params.join("&"):"";return n.protocol+"://"+n.authority+n.path+r}function Te(n){if(!n)return null;var r=n.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(P.atob(r[1]).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var en=function(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};en.prototype.getStorageKey=function(n){var r,s=Te(me.ACCESS_TOKEN);return r=s&&s.u?P.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,function(d,v){return String.fromCharCode(+("0x"+v))})):me.ACCESS_TOKEN||"",n?"mapbox.eventData."+n+":"+r:"mapbox.eventData:"+r},en.prototype.fetchEventData=function(){var n=Li("localStorage"),r=this.getStorageKey(),s=this.getStorageKey("uuid");if(n)try{var d=P.localStorage.getItem(r);d&&(this.eventData=JSON.parse(d));var v=P.localStorage.getItem(s);v&&(this.anonId=v)}catch{Ot("Unable to read from LocalStorage")}},en.prototype.saveEventData=function(){var n=Li("localStorage"),r=this.getStorageKey(),s=this.getStorageKey("uuid");if(n)try{P.localStorage.setItem(s,this.anonId),Object.keys(this.eventData).length>=1&&P.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{Ot("Unable to write to LocalStorage")}},en.prototype.processRequests=function(n){},en.prototype.postEvent=function(n,r,s,d){var v=this;if(me.EVENTS_URL){var x=we(me.EVENTS_URL);x.params.push("access_token="+(d||me.ACCESS_TOKEN||""));var A={event:this.type,created:new Date(n).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:wt,userId:this.anonId},T=r?J(A,r):A,D={url:ze(x),headers:{"Content-Type":"text/plain"},body:JSON.stringify([T])};this.pendingRequest=Wr(D,function(O){v.pendingRequest=null,s(O),v.saveEventData(),v.processRequests(d)})}},en.prototype.queueRequest=function(n,r){this.queue.push(n),this.processRequests(r)};var Cn,In,Pn=function(n){function r(){n.call(this,"map.load"),this.success={},this.skuToken=""}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.postMapLoadEvent=function(s,d,v,x){this.skuToken=v;var A=!(!x&&!me.ACCESS_TOKEN),T=Array.isArray(s)&&s.some(function(D){return le(D)||Fe(D)});me.EVENTS_URL&&A&&T&&this.queueRequest({id:d,timestamp:Date.now()},x)},r.prototype.processRequests=function(s){var d=this;if(!this.pendingRequest&&this.queue.length!==0){var v=this.queue.shift(),x=v.id,A=v.timestamp;x&&this.success[x]||(this.anonId||this.fetchEventData(),xt(this.anonId)||(this.anonId=Lt()),this.postEvent(A,{skuToken:this.skuToken},function(T){T||x&&(d.success[x]=!0)},s))}},r}(en),Jn=new(function(n){function r(s){n.call(this,"appUserTurnstile"),this._customAccessToken=s}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.postTurnstileEvent=function(s,d){me.EVENTS_URL&&me.ACCESS_TOKEN&&Array.isArray(s)&&s.some(function(v){return le(v)||Fe(v)})&&this.queueRequest(Date.now(),d)},r.prototype.processRequests=function(s){var d=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var v=Te(me.ACCESS_TOKEN),x=v?v.u:me.ACCESS_TOKEN,A=x!==this.eventData.tokenU;xt(this.anonId)||(this.anonId=Lt(),A=!0);var T=this.queue.shift();if(this.eventData.lastSuccess){var D=new Date(this.eventData.lastSuccess),O=new Date(T),N=(T-this.eventData.lastSuccess)/864e5;A=A||N>=1||N<-1||D.getDate()!==O.getDate()}else A=!0;if(!A)return this.processRequests();this.postEvent(T,{"enabled.telemetry":!1},function(V){V||(d.eventData.lastSuccess=T,d.eventData.tokenU=x)},s)}},r}(en)),Ri=Jn.postTurnstileEvent.bind(Jn),Ii=new Pn,ar=Ii.postMapLoadEvent.bind(Ii),qr=500,Xo=50;function va(){P.caches&&!Cn&&(Cn=P.caches.open("mapbox-tiles"))}function Da(n){var r=n.indexOf("?");return r<0?n:n.slice(0,r)}var Za,wr=1/0;function To(){return Za==null&&(Za=P.OffscreenCanvas&&new P.OffscreenCanvas(1,1).getContext("2d")&&typeof P.createImageBitmap=="function"),Za}var $s={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze($s);var Ys=function(n){function r(s,d,v){d===401&&Fe(v)&&(s+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),n.call(this,s),this.status=d,this.url=v,this.name=this.constructor.name,this.message=s}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},r}(Error),xl=_e()?function(){return self.worker&&self.worker.referrer}:function(){return(P.location.protocol==="blob:"?P.parent:P).location.href},Ra,uo,Xs=function(n,r){if(!(/^file:/.test(s=n.url)||/^file:/.test(xl())&&!/^\w+:/.test(s))){if(P.fetch&&P.Request&&P.AbortController&&P.Request.prototype.hasOwnProperty("signal"))return function(d,v){var x,A=new P.AbortController,T=new P.Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,referrer:xl(),signal:A.signal}),D=!1,O=!1,N=(x=T.url).indexOf("sku=")>0&&Fe(x);d.type==="json"&&T.headers.set("Accept","application/json");var V=function(Q,ct,mt){if(!O){if(Q&&Q.message!=="SecurityError"&&Ot(Q),ct&&mt)return $(ct);var Et=Date.now();P.fetch(T).then(function(bt){if(bt.ok){var Ut=N?bt.clone():null;return $(bt,Ut,Et)}return v(new Ys(bt.statusText,bt.status,d.url))}).catch(function(bt){bt.code!==20&&v(new Error(bt.message))})}},$=function(Q,ct,mt){(d.type==="arrayBuffer"?Q.arrayBuffer():d.type==="json"?Q.json():Q.text()).then(function(Et){O||(ct&&mt&&function(bt,Ut,$t){if(va(),Cn){var ee={status:Ut.status,statusText:Ut.statusText,headers:new P.Headers};Ut.headers.forEach(function(fe,Me){return ee.headers.set(Me,fe)});var ie=Ge(Ut.headers.get("Cache-Control")||"");ie["no-store"]||(ie["max-age"]&&ee.headers.set("Expires",new Date($t+1e3*ie["max-age"]).toUTCString()),new Date(ee.headers.get("Expires")).getTime()-$t<42e4||function(fe,Me){if(In===void 0)try{new Response(new ReadableStream),In=!0}catch{In=!1}In?Me(fe.body):fe.blob().then(Me)}(Ut,function(fe){var Me=new P.Response(fe,ee);va(),Cn&&Cn.then(function(Ne){return Ne.put(Da(bt.url),Me)}).catch(function(Ne){return Ot(Ne.message)})}))}}(T,ct,mt),D=!0,v(null,Et,Q.headers.get("Cache-Control"),Q.headers.get("Expires")))}).catch(function(Et){O||v(new Error(Et.message))})};return N?function(Q,ct){if(va(),!Cn)return ct(null);var mt=Da(Q.url);Cn.then(function(Et){Et.match(mt).then(function(bt){var Ut=function($t){if(!$t)return!1;var ee=new Date($t.headers.get("Expires")||0),ie=Ge($t.headers.get("Cache-Control")||"");return ee>Date.now()&&!ie["no-cache"]}(bt);Et.delete(mt),Ut&&Et.put(mt,bt.clone()),ct(null,bt,Ut)}).catch(ct)}).catch(ct)}(T,V):V(null,null),{cancel:function(){O=!0,D||A.abort()}}}(n,r);if(_e()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,r,void 0,!0)}var s;return function(d,v){var x=new P.XMLHttpRequest;for(var A in x.open(d.method||"GET",d.url,!0),d.type==="arrayBuffer"&&(x.responseType="arraybuffer"),d.headers)x.setRequestHeader(A,d.headers[A]);return d.type==="json"&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials=d.credentials==="include",x.onerror=function(){v(new Error(x.statusText))},x.onload=function(){if((x.status>=200&&x.status<300||x.status===0)&&x.response!==null){var T=x.response;if(d.type==="json")try{T=JSON.parse(x.response)}catch(D){return v(D)}v(null,T,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else v(new Ys(x.statusText,x.status,d.url))},x.send(d.body),{cancel:function(){return x.abort()}}}(n,r)},Au=function(n,r){return Xs(J(n,{type:"arrayBuffer"}),r)},Wr=function(n,r){return Xs(J(n,{method:"POST"}),r)},U="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ra=[],uo=0;var Z=function(n,r){if(ke.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),uo>=me.MAX_PARALLEL_IMAGE_REQUESTS){var s={requestParameters:n,callback:r,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ra.push(s),s}uo++;var d=!1,v=function(){if(!d)for(d=!0,uo--;Ra.length&&uo<me.MAX_PARALLEL_IMAGE_REQUESTS;){var A=Ra.shift();A.cancelled||(A.cancel=Z(A.requestParameters,A.callback).cancel)}},x=Au(n,function(A,T,D,O){v(),A?r(A):T&&(To()?function(N,V){var $=new P.Blob([new Uint8Array(N)],{type:"image/png"});P.createImageBitmap($).then(function(Q){V(null,Q)}).catch(function(Q){V(new Error("Could not load image because of "+Q.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(T,r):function(N,V,$,Q){var ct=new P.Image,mt=P.URL;ct.onload=function(){V(null,ct),mt.revokeObjectURL(ct.src),ct.onload=null,P.requestAnimationFrame(function(){ct.src=U})},ct.onerror=function(){return V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Et=new P.Blob([new Uint8Array(N)],{type:"image/png"});ct.cacheControl=$,ct.expires=Q,ct.src=N.byteLength?mt.createObjectURL(Et):U}(T,r,D,O))});return{cancel:function(){x.cancel(),v()}}};function K(n,r,s){s[n]&&s[n].indexOf(r)!==-1||(s[n]=s[n]||[],s[n].push(r))}function at(n,r,s){if(s&&s[n]){var d=s[n].indexOf(r);d!==-1&&s[n].splice(d,1)}}var gt=function(n,r){r===void 0&&(r={}),J(this,r),this.type=n},Tt=function(n){function r(s,d){d===void 0&&(d={}),n.call(this,"error",J({error:s},d))}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r}(gt),zt=function(){};zt.prototype.on=function(n,r){return this._listeners=this._listeners||{},K(n,r,this._listeners),this},zt.prototype.off=function(n,r){return at(n,r,this._listeners),at(n,r,this._oneTimeListeners),this},zt.prototype.once=function(n,r){return this._oneTimeListeners=this._oneTimeListeners||{},K(n,r,this._oneTimeListeners),this},zt.prototype.fire=function(n,r){typeof n=="string"&&(n=new gt(n,r||{}));var s=n.type;if(this.listens(s)){n.target=this;for(var d=0,v=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];d<v.length;d+=1)v[d].call(this,n);for(var x=0,A=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];x<A.length;x+=1){var T=A[x];at(s,T,this._oneTimeListeners),T.call(this,n)}var D=this._eventedParent;D&&(J(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),D.fire(n))}else n instanceof Tt&&console.error(n.error);return this},zt.prototype.listens=function(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)},zt.prototype.setEventedParent=function(n,r){return this._eventedParent=n,this._eventedParentData=r,this};var tt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},_t=function(n,r,s,d){this.message=(n?n+": ":"")+s,d&&(this.identifier=d),r!=null&&r.__line__&&(this.line=r.__line__)};function Zt(n){var r=n.value;return r?[new _t(n.key,r,"constants have been deprecated as of v8")]:[]}function ge(n){for(var r=[],s=arguments.length-1;s-- >0;)r[s]=arguments[s+1];for(var d=0,v=r;d<v.length;d+=1){var x=v[d];for(var A in x)n[A]=x[A]}return n}function be(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function oe(n){if(Array.isArray(n))return n.map(oe);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){var r={};for(var s in n)r[s]=oe(n[s]);return r}return be(n)}var ye=function(n){function r(s,d){n.call(this,d),this.message=d,this.key=s}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r}(Error),ln=function(n,r){r===void 0&&(r=[]),this.parent=n,this.bindings={};for(var s=0,d=r;s<d.length;s+=1){var v=d[s];this.bindings[v[0]]=v[1]}};ln.prototype.concat=function(n){return new ln(this,n)},ln.prototype.get=function(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(n+" not found in scope.")},ln.prototype.has=function(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)};var on={kind:"null"},se={kind:"number"},Re={kind:"string"},Ue={kind:"boolean"},He={kind:"color"},ii={kind:"object"},$e={kind:"value"},xi={kind:"collator"},ji={kind:"formatted"},ci={kind:"resolvedImage"};function gi(n,r){return{kind:"array",itemType:n,N:r}}function vi(n){if(n.kind==="array"){var r=vi(n.itemType);return typeof n.N=="number"?"array<"+r+", "+n.N+">":n.itemType.kind==="value"?"array":"array<"+r+">"}return n.kind}var ko=[on,se,Re,Ue,He,ji,ii,gi($e),ci];function Wn(n,r){if(r.kind==="error")return null;if(n.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Wn(n.itemType,r.itemType))&&(typeof n.N!="number"||n.N===r.N))return null}else{if(n.kind===r.kind)return null;if(n.kind==="value"){for(var s=0,d=ko;s<d.length;s+=1)if(!Wn(d[s],r))return null}}return"Expected "+vi(n)+" but found "+vi(r)+" instead."}function Pr(n,r){return r.some(function(s){return s.kind===n.kind})}function $i(n,r){return r.some(function(s){return s==="null"?n===null:s==="array"?Array.isArray(n):s==="object"?n&&!Array.isArray(n)&&typeof n=="object":s===typeof n})}var Yn=y(function(n,r){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function d(T){return(T=Math.round(T))<0?0:T>255?255:T}function v(T){return d(T[T.length-1]==="%"?parseFloat(T)/100*255:parseInt(T))}function x(T){return(D=T[T.length-1]==="%"?parseFloat(T)/100:parseFloat(T))<0?0:D>1?1:D;var D}function A(T,D,O){return O<0?O+=1:O>1&&(O-=1),6*O<1?T+(D-T)*O*6:2*O<1?D:3*O<2?T+(D-T)*(2/3-O)*6:T}try{r.parseCSSColor=function(T){var D,O=T.replace(/ /g,"").toLowerCase();if(O in s)return s[O].slice();if(O[0]==="#")return O.length===4?(D=parseInt(O.substr(1),16))>=0&&D<=4095?[(3840&D)>>4|(3840&D)>>8,240&D|(240&D)>>4,15&D|(15&D)<<4,1]:null:O.length===7&&(D=parseInt(O.substr(1),16))>=0&&D<=16777215?[(16711680&D)>>16,(65280&D)>>8,255&D,1]:null;var N=O.indexOf("("),V=O.indexOf(")");if(N!==-1&&V+1===O.length){var $=O.substr(0,N),Q=O.substr(N+1,V-(N+1)).split(","),ct=1;switch($){case"rgba":if(Q.length!==4)return null;ct=x(Q.pop());case"rgb":return Q.length!==3?null:[v(Q[0]),v(Q[1]),v(Q[2]),ct];case"hsla":if(Q.length!==4)return null;ct=x(Q.pop());case"hsl":if(Q.length!==3)return null;var mt=(parseFloat(Q[0])%360+360)%360/360,Et=x(Q[1]),bt=x(Q[2]),Ut=bt<=.5?bt*(Et+1):bt+Et-bt*Et,$t=2*bt-Ut;return[d(255*A($t,Ut,mt+1/3)),d(255*A($t,Ut,mt)),d(255*A($t,Ut,mt-1/3)),ct];default:return null}}return null}}catch{}}).parseCSSColor,ai=function(n,r,s,d){d===void 0&&(d=1),this.r=n,this.g=r,this.b=s,this.a=d};ai.parse=function(n){if(n){if(n instanceof ai)return n;if(typeof n=="string"){var r=Yn(n);if(r)return new ai(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}}},ai.prototype.toString=function(){var n=this.toArray(),r=n[1],s=n[2],d=n[3];return"rgba("+Math.round(n[0])+","+Math.round(r)+","+Math.round(s)+","+d+")"},ai.prototype.toArray=function(){var n=this.a;return n===0?[0,0,0,0]:[255*this.r/n,255*this.g/n,255*this.b/n,n]},ai.black=new ai(0,0,0,1),ai.white=new ai(1,1,1,1),ai.transparent=new ai(0,0,0,0),ai.red=new ai(1,0,0,1);var Po=function(n,r,s){this.sensitivity=n?r?"variant":"case":r?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Po.prototype.compare=function(n,r){return this.collator.compare(n,r)},Po.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ls=function(n,r,s,d,v){this.text=n,this.image=r,this.scale=s,this.fontStack=d,this.textColor=v},Lr=function(n){this.sections=n};Lr.fromString=function(n){return new Lr([new ls(n,null,null,null,null)])},Lr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(n){return n.text.length!==0||n.image&&n.image.name.length!==0})},Lr.factory=function(n){return n instanceof Lr?n:Lr.fromString(n)},Lr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(n){return n.text}).join("")},Lr.prototype.serialize=function(){for(var n=["format"],r=0,s=this.sections;r<s.length;r+=1){var d=s[r];if(d.image)n.push(["image",d.image.name]);else{n.push(d.text);var v={};d.fontStack&&(v["text-font"]=["literal",d.fontStack.split(",")]),d.scale&&(v["font-scale"]=d.scale),d.textColor&&(v["text-color"]=["rgba"].concat(d.textColor.toArray())),n.push(v)}}return n};var Vo=function(n){this.name=n.name,this.available=n.available};function Uc(n,r,s,d){return typeof n=="number"&&n>=0&&n<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:"Invalid rgba value ["+[n,r,s,d].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof d=="number"?[n,r,s,d]:[n,r,s]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function wu(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof ai||n instanceof Po||n instanceof Lr||n instanceof Vo)return!0;if(Array.isArray(n)){for(var r=0,s=n;r<s.length;r+=1)if(!wu(s[r]))return!1;return!0}if(typeof n=="object"){for(var d in n)if(!wu(n[d]))return!1;return!0}return!1}function Dr(n){if(n===null)return on;if(typeof n=="string")return Re;if(typeof n=="boolean")return Ue;if(typeof n=="number")return se;if(n instanceof ai)return He;if(n instanceof Po)return xi;if(n instanceof Lr)return ji;if(n instanceof Vo)return ci;if(Array.isArray(n)){for(var r,s=n.length,d=0,v=n;d<v.length;d+=1){var x=Dr(v[d]);if(r){if(r===x)continue;r=$e;break}r=x}return gi(r||$e,s)}return ii}function Cu(n){var r=typeof n;return n===null?"":r==="string"||r==="number"||r==="boolean"?String(n):n instanceof ai||n instanceof Lr||n instanceof Vo?n.toString():JSON.stringify(n)}Vo.prototype.toString=function(){return this.name},Vo.fromString=function(n){return n?new Vo({name:n,available:!1}):null},Vo.prototype.serialize=function(){return["image",this.name]};var bo=function(n,r){this.type=n,this.value=r};bo.parse=function(n,r){if(n.length!==2)return r.error("'literal' expression requires exactly one argument, but found "+(n.length-1)+" instead.");if(!wu(n[1]))return r.error("invalid value");var s=n[1],d=Dr(s),v=r.expectedType;return d.kind!=="array"||d.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(d=v),new bo(d,s)},bo.prototype.evaluate=function(){return this.value},bo.prototype.eachChild=function(){},bo.prototype.outputDefined=function(){return!0},bo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ai?["rgba"].concat(this.value.toArray()):this.value instanceof Lr?this.value.serialize():this.value};var Zr=function(n){this.name="ExpressionEvaluationError",this.message=n};Zr.prototype.toJSON=function(){return this.message};var ya={string:Re,number:se,boolean:Ue,object:ii},vr=function(n,r){this.type=n,this.args=r};vr.parse=function(n,r){if(n.length<2)return r.error("Expected at least one argument.");var s,d=1,v=n[0];if(v==="array"){var x,A;if(n.length>2){var T=n[1];if(typeof T!="string"||!(T in ya)||T==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);x=ya[T],d++}else x=$e;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return r.error('The length argument to "array" must be a positive integer literal',2);A=n[2],d++}s=gi(x,A)}else s=ya[v];for(var D=[];d<n.length;d++){var O=r.parse(n[d],d,$e);if(!O)return null;D.push(O)}return new vr(s,D)},vr.prototype.evaluate=function(n){for(var r=0;r<this.args.length;r++){var s=this.args[r].evaluate(n);if(!Wn(this.type,Dr(s)))return s;if(r===this.args.length-1)throw new Zr("Expected value to be of type "+vi(this.type)+", but found "+vi(Dr(s))+" instead.")}return null},vr.prototype.eachChild=function(n){this.args.forEach(n)},vr.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined()})},vr.prototype.serialize=function(){var n=this.type,r=[n.kind];if(n.kind==="array"){var s=n.itemType;if(s.kind==="string"||s.kind==="number"||s.kind==="boolean"){r.push(s.kind);var d=n.N;(typeof d=="number"||this.args.length>1)&&r.push(d)}}return r.concat(this.args.map(function(v){return v.serialize()}))};var $a=function(n){this.type=ji,this.sections=n};$a.parse=function(n,r){if(n.length<2)return r.error("Expected at least one argument.");var s=n[1];if(!Array.isArray(s)&&typeof s=="object")return r.error("First argument must be an image or text section.");for(var d=[],v=!1,x=1;x<=n.length-1;++x){var A=n[x];if(v&&typeof A=="object"&&!Array.isArray(A)){v=!1;var T=null;if(A["font-scale"]&&!(T=r.parse(A["font-scale"],1,se)))return null;var D=null;if(A["text-font"]&&!(D=r.parse(A["text-font"],1,gi(Re))))return null;var O=null;if(A["text-color"]&&!(O=r.parse(A["text-color"],1,He)))return null;var N=d[d.length-1];N.scale=T,N.font=D,N.textColor=O}else{var V=r.parse(n[x],1,$e);if(!V)return null;var $=V.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,d.push({content:V,scale:null,font:null,textColor:null})}}return new $a(d)},$a.prototype.evaluate=function(n){return new Lr(this.sections.map(function(r){var s=r.content.evaluate(n);return Dr(s)===ci?new ls("",s,null,null,null):new ls(Cu(s),null,r.scale?r.scale.evaluate(n):null,r.font?r.font.evaluate(n).join(","):null,r.textColor?r.textColor.evaluate(n):null)}))},$a.prototype.eachChild=function(n){for(var r=0,s=this.sections;r<s.length;r+=1){var d=s[r];n(d.content),d.scale&&n(d.scale),d.font&&n(d.font),d.textColor&&n(d.textColor)}},$a.prototype.outputDefined=function(){return!1},$a.prototype.serialize=function(){for(var n=["format"],r=0,s=this.sections;r<s.length;r+=1){var d=s[r];n.push(d.content.serialize());var v={};d.scale&&(v["font-scale"]=d.scale.serialize()),d.font&&(v["text-font"]=d.font.serialize()),d.textColor&&(v["text-color"]=d.textColor.serialize()),n.push(v)}return n};var _a=function(n){this.type=ci,this.input=n};_a.parse=function(n,r){if(n.length!==2)return r.error("Expected two arguments.");var s=r.parse(n[1],1,Re);return s?new _a(s):r.error("No image name provided.")},_a.prototype.evaluate=function(n){var r=this.input.evaluate(n),s=Vo.fromString(r);return s&&n.availableImages&&(s.available=n.availableImages.indexOf(r)>-1),s},_a.prototype.eachChild=function(n){n(this.input)},_a.prototype.outputDefined=function(){return!1},_a.prototype.serialize=function(){return["image",this.input.serialize()]};var Ql={"to-boolean":Ue,"to-color":He,"to-number":se,"to-string":Re},I=function(n,r){this.type=n,this.args=r};I.parse=function(n,r){if(n.length<2)return r.error("Expected at least one argument.");var s=n[0];if((s==="to-boolean"||s==="to-string")&&n.length!==2)return r.error("Expected one argument.");for(var d=Ql[s],v=[],x=1;x<n.length;x++){var A=r.parse(n[x],x,$e);if(!A)return null;v.push(A)}return new I(d,v)},I.prototype.evaluate=function(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){for(var r,s,d=0,v=this.args;d<v.length;d+=1){if(s=null,(r=v[d].evaluate(n))instanceof ai)return r;if(typeof r=="string"){var x=n.parseColor(r);if(x)return x}else if(Array.isArray(r)&&!(s=r.length<3||r.length>4?"Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":Uc(r[0],r[1],r[2],r[3])))return new ai(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Zr(s||"Could not parse color from value '"+(typeof r=="string"?r:String(JSON.stringify(r)))+"'")}if(this.type.kind==="number"){for(var A=null,T=0,D=this.args;T<D.length;T+=1){if((A=D[T].evaluate(n))===null)return 0;var O=Number(A);if(!isNaN(O))return O}throw new Zr("Could not convert "+JSON.stringify(A)+" to number.")}return this.type.kind==="formatted"?Lr.fromString(Cu(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?Vo.fromString(Cu(this.args[0].evaluate(n))):Cu(this.args[0].evaluate(n))},I.prototype.eachChild=function(n){this.args.forEach(n)},I.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined()})},I.prototype.serialize=function(){if(this.type.kind==="formatted")return new $a([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new _a(this.args[0]).serialize();var n=["to-"+this.type.kind];return this.eachChild(function(r){n.push(r.serialize())}),n};var R=["Unknown","Point","LineString","Polygon"],Y=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Y.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Y.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?R[this.feature.type]:this.feature.type:null},Y.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Y.prototype.canonicalID=function(){return this.canonical},Y.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Y.prototype.parseColor=function(n){var r=this._parseColorCache[n];return r||(r=this._parseColorCache[n]=ai.parse(n)),r};var vt=function(n,r,s,d){this.name=n,this.type=r,this._evaluate=s,this.args=d};vt.prototype.evaluate=function(n){return this._evaluate(n,this.args)},vt.prototype.eachChild=function(n){this.args.forEach(n)},vt.prototype.outputDefined=function(){return!1},vt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(n){return n.serialize()}))},vt.parse=function(n,r){var s,d=n[0],v=vt.definitions[d];if(!v)return r.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0);for(var x=Array.isArray(v)?v[0]:v.type,A=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,T=A.filter(function(Mn){var Je=Mn[0];return!Array.isArray(Je)||Je.length===n.length-1}),D=null,O=0,N=T;O<N.length;O+=1){var V=N[O],$=V[0],Q=V[1];D=new Al(r.registry,r.path,null,r.scope);for(var ct=[],mt=!1,Et=1;Et<n.length;Et++){var bt=n[Et],Ut=Array.isArray($)?$[Et-1]:$.type,$t=D.parse(bt,1+ct.length,Ut);if(!$t){mt=!0;break}ct.push($t)}if(!mt)if(Array.isArray($)&&$.length!==ct.length)D.error("Expected "+$.length+" arguments, but found "+ct.length+" instead.");else{for(var ee=0;ee<ct.length;ee++){var ie=Array.isArray($)?$[ee]:$.type,fe=ct[ee];D.concat(ee+1).checkSubtype(ie,fe.type)}if(D.errors.length===0)return new vt(d,x,Q,ct)}}if(T.length===1)(s=r.errors).push.apply(s,D.errors);else{for(var Me=(T.length?T:A).map(function(Mn){var Je;return Je=Mn[0],Array.isArray(Je)?"("+Je.map(vi).join(", ")+")":"("+vi(Je.type)+"...)"}).join(" | "),Ne=[],_n=1;_n<n.length;_n++){var Ze=r.parse(n[_n],1+Ne.length);if(!Ze)return null;Ne.push(vi(Ze.type))}r.error("Expected arguments of type "+Me+", but found ("+Ne.join(", ")+") instead.")}return null},vt.register=function(n,r){for(var s in vt.definitions=r,r)n[s]=vt};var kt=function(n,r,s){this.type=xi,this.locale=s,this.caseSensitive=n,this.diacriticSensitive=r};function Dt(n,r){n[0]=Math.min(n[0],r[0]),n[1]=Math.min(n[1],r[1]),n[2]=Math.max(n[2],r[0]),n[3]=Math.max(n[3],r[1])}function Gt(n,r){return!(n[0]<=r[0]||n[2]>=r[2]||n[1]<=r[1]||n[3]>=r[3])}function Pe(n,r){var s=(180+n[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,v=Math.pow(2,r.z);return[Math.round(s*v*8192),Math.round(d*v*8192)]}function Ve(n,r,s){return r[1]>n[1]!=s[1]>n[1]&&n[0]<(s[0]-r[0])*(n[1]-r[1])/(s[1]-r[1])+r[0]}function nn(n,r){for(var s,d,v,x,A,T,D,O=!1,N=0,V=r.length;N<V;N++)for(var $=r[N],Q=0,ct=$.length;Q<ct-1;Q++){if((x=(s=n)[0]-(d=$[Q])[0])*(D=s[1]-(v=$[Q+1])[1])-(T=s[0]-v[0])*(A=s[1]-d[1])==0&&x*T<=0&&A*D<=0)return!1;Ve(n,$[Q],$[Q+1])&&(O=!O)}return O}function an(n,r){for(var s=0;s<r.length;s++)if(nn(n,r[s]))return!0;return!1}function qe(n,r,s,d){var v=d[0]-s[0],x=d[1]-s[1],A=(n[0]-s[0])*x-v*(n[1]-s[1]),T=(r[0]-s[0])*x-v*(r[1]-s[1]);return A>0&&T<0||A<0&&T>0}function ti(n,r,s){for(var d=0,v=s;d<v.length;d+=1)for(var x=v[d],A=0;A<x.length-1;++A)if((V=[(N=x[A+1])[0]-(O=x[A])[0],N[1]-O[1]])[0]*($=[(D=r)[0]-(T=n)[0],D[1]-T[1]])[1]-V[1]*$[0]!=0&&qe(T,D,O,N)&&qe(O,N,T,D))return!0;var T,D,O,N,V,$;return!1}function Nr(n,r){for(var s=0;s<n.length;++s)if(!nn(n[s],r))return!1;for(var d=0;d<n.length-1;++d)if(ti(n[d],n[d+1],r))return!1;return!0}function si(n,r){for(var s=0;s<r.length;s++)if(Nr(n,r[s]))return!0;return!1}function Cr(n,r,s){for(var d=[],v=0;v<n.length;v++){for(var x=[],A=0;A<n[v].length;A++){var T=Pe(n[v][A],s);Dt(r,T),x.push(T)}d.push(x)}return d}function xe(n,r,s){for(var d=[],v=0;v<n.length;v++){var x=Cr(n[v],r,s);d.push(x)}return d}function wn(n,r,s,d){if(n[0]<s[0]||n[0]>s[2]){var v=.5*d,x=n[0]-s[0]>v?-d:s[0]-n[0]>v?d:0;x===0&&(x=n[0]-s[2]>v?-d:s[2]-n[0]>v?d:0),n[0]+=x}Dt(r,n)}function sr(n,r,s,d){for(var v=8192*Math.pow(2,d.z),x=[8192*d.x,8192*d.y],A=[],T=0,D=n;T<D.length;T+=1)for(var O=0,N=D[T];O<N.length;O+=1){var V=N[O],$=[V.x+x[0],V.y+x[1]];wn($,r,s,v),A.push($)}return A}function no(n,r,s,d){for(var v,x=8192*Math.pow(2,d.z),A=[8192*d.x,8192*d.y],T=[],D=0,O=n;D<O.length;D+=1){for(var N=[],V=0,$=O[D];V<$.length;V+=1){var Q=$[V],ct=[Q.x+A[0],Q.y+A[1]];Dt(r,ct),N.push(ct)}T.push(N)}if(r[2]-r[0]<=x/2){(v=r)[0]=v[1]=1/0,v[2]=v[3]=-1/0;for(var mt=0,Et=T;mt<Et.length;mt+=1)for(var bt=0,Ut=Et[mt];bt<Ut.length;bt+=1)wn(Ut[bt],r,s,x)}return T}kt.parse=function(n,r){if(n.length!==2)return r.error("Expected one argument.");var s=n[1];if(typeof s!="object"||Array.isArray(s))return r.error("Collator options argument must be an object.");var d=r.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,Ue);if(!d)return null;var v=r.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,Ue);if(!v)return null;var x=null;return s.locale&&!(x=r.parse(s.locale,1,Re))?null:new kt(d,v,x)},kt.prototype.evaluate=function(n){return new Po(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)},kt.prototype.eachChild=function(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)},kt.prototype.outputDefined=function(){return!1},kt.prototype.serialize=function(){var n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]};var Ji=function(n,r){this.type=Ue,this.geojson=n,this.geometries=r};function Ms(n){if(n instanceof vt&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof Ji)return!1;var r=!0;return n.eachChild(function(s){r&&!Ms(s)&&(r=!1)}),r}function bl(n){if(n instanceof vt&&n.name==="feature-state")return!1;var r=!0;return n.eachChild(function(s){r&&!bl(s)&&(r=!1)}),r}function ir(n,r){if(n instanceof vt&&r.indexOf(n.name)>=0)return!1;var s=!0;return n.eachChild(function(d){s&&!ir(d,r)&&(s=!1)}),s}Ji.parse=function(n,r){if(n.length!==2)return r.error("'within' expression requires exactly one argument, but found "+(n.length-1)+" instead.");if(wu(n[1])){var s=n[1];if(s.type==="FeatureCollection")for(var d=0;d<s.features.length;++d){var v=s.features[d].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Ji(s,s.features[d].geometry)}else if(s.type==="Feature"){var x=s.geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new Ji(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new Ji(s,s)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ji.prototype.evaluate=function(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(r,s){var d=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=r.canonicalID();if(s.type==="Polygon"){var A=Cr(s.coordinates,v,x),T=sr(r.geometry(),d,v,x);if(!Gt(d,v))return!1;for(var D=0,O=T;D<O.length;D+=1)if(!nn(O[D],A))return!1}if(s.type==="MultiPolygon"){var N=xe(s.coordinates,v,x),V=sr(r.geometry(),d,v,x);if(!Gt(d,v))return!1;for(var $=0,Q=V;$<Q.length;$+=1)if(!an(Q[$],N))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(r,s){var d=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=r.canonicalID();if(s.type==="Polygon"){var A=Cr(s.coordinates,v,x),T=no(r.geometry(),d,v,x);if(!Gt(d,v))return!1;for(var D=0,O=T;D<O.length;D+=1)if(!Nr(O[D],A))return!1}if(s.type==="MultiPolygon"){var N=xe(s.coordinates,v,x),V=no(r.geometry(),d,v,x);if(!Gt(d,v))return!1;for(var $=0,Q=V;$<Q.length;$+=1)if(!si(Q[$],N))return!1}return!0}(n,this.geometries)}return!1},Ji.prototype.eachChild=function(){},Ji.prototype.outputDefined=function(){return!0},Ji.prototype.serialize=function(){return["within",this.geojson]};var Ks=function(n,r){this.type=r.type,this.name=n,this.boundExpression=r};Ks.parse=function(n,r){if(n.length!==2||typeof n[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");var s=n[1];return r.scope.has(s)?new Ks(s,r.scope.get(s)):r.error('Unknown variable "'+s+'". Make sure "'+s+'" has been bound in an enclosing "let" expression before using it.',1)},Ks.prototype.evaluate=function(n){return this.boundExpression.evaluate(n)},Ks.prototype.eachChild=function(){},Ks.prototype.outputDefined=function(){return!1},Ks.prototype.serialize=function(){return["var",this.name]};var Al=function(n,r,s,d,v){r===void 0&&(r=[]),d===void 0&&(d=new ln),v===void 0&&(v=[]),this.registry=n,this.path=r,this.key=r.map(function(x){return"["+x+"]"}).join(""),this.scope=d,this.errors=v,this.expectedType=s};function Hi(n,r){for(var s,d=n.length-1,v=0,x=d,A=0;v<=x;)if((s=n[A=Math.floor((v+x)/2)])<=r){if(A===d||r<n[A+1])return A;v=A+1}else{if(!(s>r))throw new Zr("Input is not a number.");x=A-1}return 0}Al.prototype.parse=function(n,r,s,d,v){return v===void 0&&(v={}),r?this.concat(r,s,d)._parse(n,v):this._parse(n,v)},Al.prototype._parse=function(n,r){function s(O,N,V){return V==="assert"?new vr(N,[O]):V==="coerce"?new I(N,[O]):O}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var d=n[0];if(typeof d!="string")return this.error("Expression name must be a string, but found "+typeof d+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var v=this.registry[d];if(v){var x=v.parse(n,this);if(!x)return null;if(this.expectedType){var A=this.expectedType,T=x.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||T.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string"){if(this.checkSubtype(A,T))return null}else x=s(x,A,r.typeAnnotation||"coerce");else x=s(x,A,r.typeAnnotation||"assert")}if(!(x instanceof bo)&&x.type.kind!=="resolvedImage"&&function O(N){if(N instanceof Ks)return O(N.boundExpression);if(N instanceof vt&&N.name==="error"||N instanceof kt||N instanceof Ji)return!1;var V=N instanceof I||N instanceof vr,$=!0;return N.eachChild(function(Q){$=V?$&&O(Q):$&&Q instanceof bo}),!!$&&Ms(N)&&ir(N,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(x)){var D=new Y;try{x=new bo(x.type,x.evaluate(D))}catch(O){return this.error(O.message),null}}return x}return this.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof n+" instead.")},Al.prototype.concat=function(n,r,s){var d=typeof n=="number"?this.path.concat(n):this.path,v=s?this.scope.concat(s):this.scope;return new Al(this.registry,d,r||null,v,this.errors)},Al.prototype.error=function(n){for(var r=[],s=arguments.length-1;s-- >0;)r[s]=arguments[s+1];var d=""+this.key+r.map(function(v){return"["+v+"]"}).join("");this.errors.push(new ye(d,n))},Al.prototype.checkSubtype=function(n,r){var s=Wn(n,r);return s&&this.error(s),s};var Mi=function(n,r,s){this.type=n,this.input=r,this.labels=[],this.outputs=[];for(var d=0,v=s;d<v.length;d+=1){var x=v[d],A=x[1];this.labels.push(x[0]),this.outputs.push(A)}};function $r(n,r,s){return n*(1-s)+r*s}Mi.parse=function(n,r){if(n.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if((n.length-1)%2!=0)return r.error("Expected an even number of arguments.");var s=r.parse(n[1],1,se);if(!s)return null;var d=[],v=null;r.expectedType&&r.expectedType.kind!=="value"&&(v=r.expectedType);for(var x=1;x<n.length;x+=2){var A=x===1?-1/0:n[x],T=n[x+1],D=x,O=x+1;if(typeof A!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(d.length&&d[d.length-1][0]>=A)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);var N=r.parse(T,O,v);if(!N)return null;v=v||N.type,d.push([A,N])}return new Mi(v,s,d)},Mi.prototype.evaluate=function(n){var r=this.labels,s=this.outputs;if(r.length===1)return s[0].evaluate(n);var d=this.input.evaluate(n);if(d<=r[0])return s[0].evaluate(n);var v=r.length;return d>=r[v-1]?s[v-1].evaluate(n):s[Hi(r,d)].evaluate(n)},Mi.prototype.eachChild=function(n){n(this.input);for(var r=0,s=this.outputs;r<s.length;r+=1)n(s[r])},Mi.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined()})},Mi.prototype.serialize=function(){for(var n=["step",this.input.serialize()],r=0;r<this.labels.length;r++)r>0&&n.push(this.labels[r]),n.push(this.outputs[r].serialize());return n};var Jl=Object.freeze({__proto__:null,number:$r,color:function(n,r,s){return new ai($r(n.r,r.r,s),$r(n.g,r.g,s),$r(n.b,r.b,s),$r(n.a,r.a,s))},array:function(n,r,s){return n.map(function(d,v){return $r(d,r[v],s)})}}),jc=6/29*3*(6/29),vf=Math.PI/180,yf=180/Math.PI;function Ah(n){return n>.008856451679035631?Math.pow(n,1/3):n/jc+4/29}function Hc(n){return n>6/29?n*n*n:jc*(n-4/29)}function wh(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function co(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function lc(n){var r=co(n.r),s=co(n.g),d=co(n.b),v=Ah((.4124564*r+.3575761*s+.1804375*d)/.95047),x=Ah((.2126729*r+.7151522*s+.072175*d)/1);return{l:116*x-16,a:500*(v-x),b:200*(x-Ah((.0193339*r+.119192*s+.9503041*d)/1.08883)),alpha:n.a}}function Qs(n){var r=(n.l+16)/116,s=isNaN(n.a)?r:r+n.a/500,d=isNaN(n.b)?r:r-n.b/200;return r=1*Hc(r),s=.95047*Hc(s),d=1.08883*Hc(d),new ai(wh(3.2404542*s-1.5371385*r-.4985314*d),wh(-.969266*s+1.8760108*r+.041556*d),wh(.0556434*s-.2040259*r+1.0572252*d),n.alpha)}function _f(n,r,s){var d=r-n;return n+s*(d>180||d<-180?d-360*Math.round(d/360):d)}var tu={forward:lc,reverse:Qs,interpolate:function(n,r,s){return{l:$r(n.l,r.l,s),a:$r(n.a,r.a,s),b:$r(n.b,r.b,s),alpha:$r(n.alpha,r.alpha,s)}}},Ao={forward:function(n){var r=lc(n),s=r.l,d=r.a,v=r.b,x=Math.atan2(v,d)*yf;return{h:x<0?x+360:x,c:Math.sqrt(d*d+v*v),l:s,alpha:n.a}},reverse:function(n){var r=n.h*vf,s=n.c;return Qs({l:n.l,a:Math.cos(r)*s,b:Math.sin(r)*s,alpha:n.alpha})},interpolate:function(n,r,s){return{h:_f(n.h,r.h,s),c:$r(n.c,r.c,s),l:$r(n.l,r.l,s),alpha:$r(n.alpha,r.alpha,s)}}},uc=Object.freeze({__proto__:null,lab:tu,hcl:Ao}),ho=function(n,r,s,d,v){this.type=n,this.operator=r,this.interpolation=s,this.input=d,this.labels=[],this.outputs=[];for(var x=0,A=v;x<A.length;x+=1){var T=A[x],D=T[1];this.labels.push(T[0]),this.outputs.push(D)}};function za(n,r,s,d){var v=d-s,x=n-s;return v===0?0:r===1?x/v:(Math.pow(r,x)-1)/(Math.pow(r,v)-1)}ho.interpolationFactor=function(n,r,s,d){var v=0;if(n.name==="exponential")v=za(r,n.base,s,d);else if(n.name==="linear")v=za(r,1,s,d);else if(n.name==="cubic-bezier"){var x=n.controlPoints;v=new _(x[0],x[1],x[2],x[3]).solve(za(r,1,s,d))}return v},ho.parse=function(n,r){var s=n[0],d=n[1],v=n[2],x=n.slice(3);if(!Array.isArray(d)||d.length===0)return r.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){var A=d[1];if(typeof A!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:A}}else{if(d[0]!=="cubic-bezier")return r.error("Unknown interpolation type "+String(d[0]),1,0);var T=d.slice(1);if(T.length!==4||T.some(function(Et){return typeof Et!="number"||Et<0||Et>1}))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:T}}if(n.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if((n.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(!(v=r.parse(v,2,se)))return null;var D=[],O=null;s==="interpolate-hcl"||s==="interpolate-lab"?O=He:r.expectedType&&r.expectedType.kind!=="value"&&(O=r.expectedType);for(var N=0;N<x.length;N+=2){var V=x[N],$=x[N+1],Q=N+3,ct=N+4;if(typeof V!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Q);if(D.length&&D[D.length-1][0]>=V)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Q);var mt=r.parse($,ct,O);if(!mt)return null;O=O||mt.type,D.push([V,mt])}return O.kind==="number"||O.kind==="color"||O.kind==="array"&&O.itemType.kind==="number"&&typeof O.N=="number"?new ho(O,s,d,v,D):r.error("Type "+vi(O)+" is not interpolatable.")},ho.prototype.evaluate=function(n){var r=this.labels,s=this.outputs;if(r.length===1)return s[0].evaluate(n);var d=this.input.evaluate(n);if(d<=r[0])return s[0].evaluate(n);var v=r.length;if(d>=r[v-1])return s[v-1].evaluate(n);var x=Hi(r,d),A=ho.interpolationFactor(this.interpolation,d,r[x],r[x+1]),T=s[x].evaluate(n),D=s[x+1].evaluate(n);return this.operator==="interpolate"?Jl[this.type.kind.toLowerCase()](T,D,A):this.operator==="interpolate-hcl"?Ao.reverse(Ao.interpolate(Ao.forward(T),Ao.forward(D),A)):tu.reverse(tu.interpolate(tu.forward(T),tu.forward(D),A))},ho.prototype.eachChild=function(n){n(this.input);for(var r=0,s=this.outputs;r<s.length;r+=1)n(s[r])},ho.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined()})},ho.prototype.serialize=function(){var n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var r=[this.operator,n,this.input.serialize()],s=0;s<this.labels.length;s++)r.push(this.labels[s],this.outputs[s].serialize());return r};var Es=function(n,r){this.type=n,this.args=r};Es.parse=function(n,r){if(n.length<2)return r.error("Expectected at least one argument.");var s=null,d=r.expectedType;d&&d.kind!=="value"&&(s=d);for(var v=[],x=0,A=n.slice(1);x<A.length;x+=1){var T=r.parse(A[x],1+v.length,s,void 0,{typeAnnotation:"omit"});if(!T)return null;s=s||T.type,v.push(T)}var D=d&&v.some(function(O){return Wn(d,O.type)});return new Es(D?$e:s,v)},Es.prototype.evaluate=function(n){for(var r,s=null,d=0,v=0,x=this.args;v<x.length&&(d++,(s=x[v].evaluate(n))&&s instanceof Vo&&!s.available&&(r||(r=s.name),s=null,d===this.args.length&&(s=r)),s===null);v+=1);return s},Es.prototype.eachChild=function(n){this.args.forEach(n)},Es.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined()})},Es.prototype.serialize=function(){var n=["coalesce"];return this.eachChild(function(r){n.push(r.serialize())}),n};var Ss=function(n,r){this.type=r.type,this.bindings=[].concat(n),this.result=r};Ss.prototype.evaluate=function(n){return this.result.evaluate(n)},Ss.prototype.eachChild=function(n){for(var r=0,s=this.bindings;r<s.length;r+=1)n(s[r][1]);n(this.result)},Ss.parse=function(n,r){if(n.length<4)return r.error("Expected at least 3 arguments, but found "+(n.length-1)+" instead.");for(var s=[],d=1;d<n.length-1;d+=2){var v=n[d];if(typeof v!="string")return r.error("Expected string, but found "+typeof v+" instead.",d);if(/[^a-zA-Z0-9_]/.test(v))return r.error("Variable names must contain only alphanumeric characters or '_'.",d);var x=r.parse(n[d+1],d+1);if(!x)return null;s.push([v,x])}var A=r.parse(n[n.length-1],n.length-1,r.expectedType,s);return A?new Ss(s,A):null},Ss.prototype.outputDefined=function(){return this.result.outputDefined()},Ss.prototype.serialize=function(){for(var n=["let"],r=0,s=this.bindings;r<s.length;r+=1){var d=s[r];n.push(d[0],d[1].serialize())}return n.push(this.result.serialize()),n};var wl=function(n,r,s){this.type=n,this.index=r,this.input=s};wl.parse=function(n,r){if(n.length!==3)return r.error("Expected 2 arguments, but found "+(n.length-1)+" instead.");var s=r.parse(n[1],1,se),d=r.parse(n[2],2,gi(r.expectedType||$e));return s&&d?new wl(d.type.itemType,s,d):null},wl.prototype.evaluate=function(n){var r=this.index.evaluate(n),s=this.input.evaluate(n);if(r<0)throw new Zr("Array index out of bounds: "+r+" < 0.");if(r>=s.length)throw new Zr("Array index out of bounds: "+r+" > "+(s.length-1)+".");if(r!==Math.floor(r))throw new Zr("Array index must be an integer, but found "+r+" instead.");return s[r]},wl.prototype.eachChild=function(n){n(this.index),n(this.input)},wl.prototype.outputDefined=function(){return!1},wl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var fo=function(n,r){this.type=Ue,this.needle=n,this.haystack=r};fo.parse=function(n,r){if(n.length!==3)return r.error("Expected 2 arguments, but found "+(n.length-1)+" instead.");var s=r.parse(n[1],1,$e),d=r.parse(n[2],2,$e);return s&&d?Pr(s.type,[Ue,Re,se,on,$e])?new fo(s,d):r.error("Expected first argument to be of type boolean, string, number or null, but found "+vi(s.type)+" instead"):null},fo.prototype.evaluate=function(n){var r=this.needle.evaluate(n),s=this.haystack.evaluate(n);if(!s)return!1;if(!$i(r,["boolean","string","number","null"]))throw new Zr("Expected first argument to be of type boolean, string, number or null, but found "+vi(Dr(r))+" instead.");if(!$i(s,["string","array"]))throw new Zr("Expected second argument to be of type array or string, but found "+vi(Dr(s))+" instead.");return s.indexOf(r)>=0},fo.prototype.eachChild=function(n){n(this.needle),n(this.haystack)},fo.prototype.outputDefined=function(){return!0},fo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var us=function(n,r,s){this.type=se,this.needle=n,this.haystack=r,this.fromIndex=s};us.parse=function(n,r){if(n.length<=2||n.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(n.length-1)+" instead.");var s=r.parse(n[1],1,$e),d=r.parse(n[2],2,$e);if(!s||!d)return null;if(!Pr(s.type,[Ue,Re,se,on,$e]))return r.error("Expected first argument to be of type boolean, string, number or null, but found "+vi(s.type)+" instead");if(n.length===4){var v=r.parse(n[3],3,se);return v?new us(s,d,v):null}return new us(s,d)},us.prototype.evaluate=function(n){var r=this.needle.evaluate(n),s=this.haystack.evaluate(n);if(!$i(r,["boolean","string","number","null"]))throw new Zr("Expected first argument to be of type boolean, string, number or null, but found "+vi(Dr(r))+" instead.");if(!$i(s,["string","array"]))throw new Zr("Expected second argument to be of type array or string, but found "+vi(Dr(s))+" instead.");if(this.fromIndex){var d=this.fromIndex.evaluate(n);return s.indexOf(r,d)}return s.indexOf(r)},us.prototype.eachChild=function(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)},us.prototype.outputDefined=function(){return!1},us.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var wo=function(n,r,s,d,v,x){this.inputType=n,this.type=r,this.input=s,this.cases=d,this.outputs=v,this.otherwise=x};wo.parse=function(n,r){if(n.length<5)return r.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if(n.length%2!=1)return r.error("Expected an even number of arguments.");var s,d;r.expectedType&&r.expectedType.kind!=="value"&&(d=r.expectedType);for(var v={},x=[],A=2;A<n.length-1;A+=2){var T=n[A],D=n[A+1];Array.isArray(T)||(T=[T]);var O=r.concat(A);if(T.length===0)return O.error("Expected at least one branch label.");for(var N=0,V=T;N<V.length;N+=1){var $=V[N];if(typeof $!="number"&&typeof $!="string")return O.error("Branch labels must be numbers or strings.");if(typeof $=="number"&&Math.abs($)>Number.MAX_SAFE_INTEGER)return O.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof $=="number"&&Math.floor($)!==$)return O.error("Numeric branch labels must be integer values.");if(s){if(O.checkSubtype(s,Dr($)))return null}else s=Dr($);if(v[String($)]!==void 0)return O.error("Branch labels must be unique.");v[String($)]=x.length}var Q=r.parse(D,A,d);if(!Q)return null;d=d||Q.type,x.push(Q)}var ct=r.parse(n[1],1,$e);if(!ct)return null;var mt=r.parse(n[n.length-1],n.length-1,d);return mt?ct.type.kind!=="value"&&r.concat(1).checkSubtype(s,ct.type)?null:new wo(s,d,ct,v,x,mt):null},wo.prototype.evaluate=function(n){var r=this.input.evaluate(n);return(Dr(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(n)},wo.prototype.eachChild=function(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)},wo.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined()})&&this.otherwise.outputDefined()},wo.prototype.serialize=function(){for(var n=this,r=["match",this.input.serialize()],s=[],d={},v=0,x=Object.keys(this.cases).sort();v<x.length;v+=1){var A=x[v];(V=d[this.cases[A]])===void 0?(d[this.cases[A]]=s.length,s.push([this.cases[A],[A]])):s[V][1].push(A)}for(var T=function(Q){return n.inputType.kind==="number"?Number(Q):Q},D=0,O=s;D<O.length;D+=1){var N=O[D],V=N[0],$=N[1];r.push($.length===1?T($[0]):$.map(T)),r.push(this.outputs[outputIndex$1].serialize())}return r.push(this.otherwise.serialize()),r};var Cl=function(n,r,s){this.type=n,this.branches=r,this.otherwise=s};Cl.parse=function(n,r){if(n.length<4)return r.error("Expected at least 3 arguments, but found only "+(n.length-1)+".");if(n.length%2!=0)return r.error("Expected an odd number of arguments.");var s;r.expectedType&&r.expectedType.kind!=="value"&&(s=r.expectedType);for(var d=[],v=1;v<n.length-1;v+=2){var x=r.parse(n[v],v,Ue);if(!x)return null;var A=r.parse(n[v+1],v+1,s);if(!A)return null;d.push([x,A]),s=s||A.type}var T=r.parse(n[n.length-1],n.length-1,s);return T?new Cl(s,d,T):null},Cl.prototype.evaluate=function(n){for(var r=0,s=this.branches;r<s.length;r+=1){var d=s[r],v=d[1];if(d[0].evaluate(n))return v.evaluate(n)}return this.otherwise.evaluate(n)},Cl.prototype.eachChild=function(n){for(var r=0,s=this.branches;r<s.length;r+=1){var d=s[r],v=d[1];n(d[0]),n(v)}n(this.otherwise)},Cl.prototype.outputDefined=function(){return this.branches.every(function(n){return n[1].outputDefined()})&&this.otherwise.outputDefined()},Cl.prototype.serialize=function(){var n=["case"];return this.eachChild(function(r){n.push(r.serialize())}),n};var Js=function(n,r,s,d){this.type=n,this.input=r,this.beginIndex=s,this.endIndex=d};function oa(n,r){return n==="=="||n==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Iu(n,r,s,d){return d.compare(r,s)===0}function tr(n,r,s){var d=n!=="=="&&n!=="!=";return function(){function v(x,A,T){this.type=Ue,this.lhs=x,this.rhs=A,this.collator=T,this.hasUntypedArgument=x.type.kind==="value"||A.type.kind==="value"}return v.parse=function(x,A){if(x.length!==3&&x.length!==4)return A.error("Expected two or three arguments.");var T=x[0],D=A.parse(x[1],1,$e);if(!D)return null;if(!oa(T,D.type))return A.concat(1).error('"'+T+`" comparisons are not supported for type '`+vi(D.type)+"'.");var O=A.parse(x[2],2,$e);if(!O)return null;if(!oa(T,O.type))return A.concat(2).error('"'+T+`" comparisons are not supported for type '`+vi(O.type)+"'.");if(D.type.kind!==O.type.kind&&D.type.kind!=="value"&&O.type.kind!=="value")return A.error("Cannot compare types '"+vi(D.type)+"' and '"+vi(O.type)+"'.");d&&(D.type.kind==="value"&&O.type.kind!=="value"?D=new vr(O.type,[D]):D.type.kind!=="value"&&O.type.kind==="value"&&(O=new vr(D.type,[O])));var N=null;if(x.length===4){if(D.type.kind!=="string"&&O.type.kind!=="string"&&D.type.kind!=="value"&&O.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(!(N=A.parse(x[3],3,xi)))return null}return new v(D,O,N)},v.prototype.evaluate=function(x){var A=this.lhs.evaluate(x),T=this.rhs.evaluate(x);if(d&&this.hasUntypedArgument){var D=Dr(A),O=Dr(T);if(D.kind!==O.kind||D.kind!=="string"&&D.kind!=="number")throw new Zr('Expected arguments for "'+n+'" to be (string, string) or (number, number), but found ('+D.kind+", "+O.kind+") instead.")}if(this.collator&&!d&&this.hasUntypedArgument){var N=Dr(A),V=Dr(T);if(N.kind!=="string"||V.kind!=="string")return r(x,A,T)}return this.collator?s(x,A,T,this.collator.evaluate(x)):r(x,A,T)},v.prototype.eachChild=function(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)},v.prototype.outputDefined=function(){return!0},v.prototype.serialize=function(){var x=[n];return this.eachChild(function(A){x.push(A.serialize())}),x},v}()}Js.parse=function(n,r){if(n.length<=2||n.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(n.length-1)+" instead.");var s=r.parse(n[1],1,$e),d=r.parse(n[2],2,se);if(!s||!d)return null;if(!Pr(s.type,[gi($e),Re,$e]))return r.error("Expected first argument to be of type array or string, but found "+vi(s.type)+" instead");if(n.length===4){var v=r.parse(n[3],3,se);return v?new Js(s.type,s,d,v):null}return new Js(s.type,s,d)},Js.prototype.evaluate=function(n){var r=this.input.evaluate(n),s=this.beginIndex.evaluate(n);if(!$i(r,["string","array"]))throw new Zr("Expected first argument to be of type array or string, but found "+vi(Dr(r))+" instead.");if(this.endIndex){var d=this.endIndex.evaluate(n);return r.slice(s,d)}return r.slice(s)},Js.prototype.eachChild=function(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)},Js.prototype.outputDefined=function(){return!1},Js.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Vr=tr("==",function(n,r,s){return r===s},Iu),Ba=tr("!=",function(n,r,s){return r!==s},function(n,r,s,d){return!Iu(0,r,s,d)}),Il=tr("<",function(n,r,s){return r<s},function(n,r,s,d){return d.compare(r,s)<0}),Gc=tr(">",function(n,r,s){return r>s},function(n,r,s,d){return d.compare(r,s)>0}),Mu=tr("<=",function(n,r,s){return r<=s},function(n,r,s,d){return d.compare(r,s)<=0}),qc=tr(">=",function(n,r,s){return r>=s},function(n,r,s,d){return d.compare(r,s)>=0}),cs=function(n,r,s,d,v){this.type=Re,this.number=n,this.locale=r,this.currency=s,this.minFractionDigits=d,this.maxFractionDigits=v};cs.parse=function(n,r){if(n.length!==3)return r.error("Expected two arguments.");var s=r.parse(n[1],1,se);if(!s)return null;var d=n[2];if(typeof d!="object"||Array.isArray(d))return r.error("NumberFormat options argument must be an object.");var v=null;if(d.locale&&!(v=r.parse(d.locale,1,Re)))return null;var x=null;if(d.currency&&!(x=r.parse(d.currency,1,Re)))return null;var A=null;if(d["min-fraction-digits"]&&!(A=r.parse(d["min-fraction-digits"],1,se)))return null;var T=null;return d["max-fraction-digits"]&&!(T=r.parse(d["max-fraction-digits"],1,se))?null:new cs(s,v,x,A,T)},cs.prototype.evaluate=function(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))},cs.prototype.eachChild=function(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)},cs.prototype.outputDefined=function(){return!1},cs.prototype.serialize=function(){var n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]};var Ml=function(n){this.type=se,this.input=n};Ml.parse=function(n,r){if(n.length!==2)return r.error("Expected 1 argument, but found "+(n.length-1)+" instead.");var s=r.parse(n[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?r.error("Expected argument of type string or array, but found "+vi(s.type)+" instead."):new Ml(s):null},Ml.prototype.evaluate=function(n){var r=this.input.evaluate(n);if(typeof r=="string"||Array.isArray(r))return r.length;throw new Zr("Expected value to be of type string or array, but found "+vi(Dr(r))+" instead.")},Ml.prototype.eachChild=function(n){n(this.input)},Ml.prototype.outputDefined=function(){return!1},Ml.prototype.serialize=function(){var n=["length"];return this.eachChild(function(r){n.push(r.serialize())}),n};var El={"==":Vr,"!=":Ba,">":Gc,"<":Il,">=":qc,"<=":Mu,array:vr,at:wl,boolean:vr,case:Cl,coalesce:Es,collator:kt,format:$a,image:_a,in:fo,"index-of":us,interpolate:ho,"interpolate-hcl":ho,"interpolate-lab":ho,length:Ml,let:Ss,literal:bo,match:wo,number:vr,"number-format":cs,object:vr,slice:Js,step:Mi,string:vr,"to-boolean":I,"to-color":I,"to-number":I,"to-string":I,var:Ks,within:Ji};function cc(n,r){var s=r[0],d=r[1],v=r[2],x=r[3];s=s.evaluate(n),d=d.evaluate(n),v=v.evaluate(n);var A=x?x.evaluate(n):1,T=Uc(s,d,v,A);if(T)throw new Zr(T);return new ai(s/255*A,d/255*A,v/255*A,A)}function eu(n,r){return n in r}function Ch(n,r){var s=r[n];return s===void 0?null:s}function tl(n){return{type:n}}function hc(n){return{result:"success",value:n}}function aa(n){return{result:"error",value:n}}function Uo(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function el(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Sl(n){return!!n.expression&&n.expression.interpolated}function zi(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Eu(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Wc(n){return n}function hs(n,r,s){return n!==void 0?n:r!==void 0?r:s!==void 0?s:void 0}function sa(n,r,s,d,v){return hs(typeof s===v?d[s]:void 0,n.default,r.default)}function Zc(n,r,s){if(zi(s)!=="number")return hs(n.default,r.default);var d=n.stops.length;if(d===1||s<=n.stops[0][0])return n.stops[0][1];if(s>=n.stops[d-1][0])return n.stops[d-1][1];var v=Hi(n.stops.map(function(x){return x[0]}),s);return n.stops[v][1]}function Su(n,r,s){var d=n.base!==void 0?n.base:1;if(zi(s)!=="number")return hs(n.default,r.default);var v=n.stops.length;if(v===1||s<=n.stops[0][0])return n.stops[0][1];if(s>=n.stops[v-1][0])return n.stops[v-1][1];var x=Hi(n.stops.map(function(V){return V[0]}),s),A=function(V,$,Q,ct){var mt=ct-Q,Et=V-Q;return mt===0?0:$===1?Et/mt:(Math.pow($,Et)-1)/(Math.pow($,mt)-1)}(s,d,n.stops[x][0],n.stops[x+1][0]),T=n.stops[x][1],D=n.stops[x+1][1],O=Jl[r.type]||Wc;if(n.colorSpace&&n.colorSpace!=="rgb"){var N=uc[n.colorSpace];O=function(V,$){return N.reverse(N.interpolate(N.forward(V),N.forward($),A))}}return typeof T.evaluate=="function"?{evaluate:function(){for(var V=[],$=arguments.length;$--;)V[$]=arguments[$];var Q=T.evaluate.apply(void 0,V),ct=D.evaluate.apply(void 0,V);if(Q!==void 0&&ct!==void 0)return O(Q,ct,A)}}:O(T,D,A)}function fc(n,r,s){return r.type==="color"?s=ai.parse(s):r.type==="formatted"?s=Lr.fromString(s.toString()):r.type==="resolvedImage"?s=Vo.fromString(s.toString()):zi(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0),hs(s,n.default,r.default)}vt.register(El,{error:[{kind:"error"},[Re],function(n,r){throw new Zr(r[0].evaluate(n))}],typeof:[Re,[$e],function(n,r){return vi(Dr(r[0].evaluate(n)))}],"to-rgba":[gi(se,4),[He],function(n,r){return r[0].evaluate(n).toArray()}],rgb:[He,[se,se,se],cc],rgba:[He,[se,se,se,se],cc],has:{type:Ue,overloads:[[[Re],function(n,r){return eu(r[0].evaluate(n),n.properties())}],[[Re,ii],function(n,r){var s=r[1];return eu(r[0].evaluate(n),s.evaluate(n))}]]},get:{type:$e,overloads:[[[Re],function(n,r){return Ch(r[0].evaluate(n),n.properties())}],[[Re,ii],function(n,r){var s=r[1];return Ch(r[0].evaluate(n),s.evaluate(n))}]]},"feature-state":[$e,[Re],function(n,r){return Ch(r[0].evaluate(n),n.featureState||{})}],properties:[ii,[],function(n){return n.properties()}],"geometry-type":[Re,[],function(n){return n.geometryType()}],id:[$e,[],function(n){return n.id()}],zoom:[se,[],function(n){return n.globals.zoom}],"heatmap-density":[se,[],function(n){return n.globals.heatmapDensity||0}],"line-progress":[se,[],function(n){return n.globals.lineProgress||0}],accumulated:[$e,[],function(n){return n.globals.accumulated===void 0?null:n.globals.accumulated}],"+":[se,tl(se),function(n,r){for(var s=0,d=0,v=r;d<v.length;d+=1)s+=v[d].evaluate(n);return s}],"*":[se,tl(se),function(n,r){for(var s=1,d=0,v=r;d<v.length;d+=1)s*=v[d].evaluate(n);return s}],"-":{type:se,overloads:[[[se,se],function(n,r){var s=r[1];return r[0].evaluate(n)-s.evaluate(n)}],[[se],function(n,r){return-r[0].evaluate(n)}]]},"/":[se,[se,se],function(n,r){var s=r[1];return r[0].evaluate(n)/s.evaluate(n)}],"%":[se,[se,se],function(n,r){var s=r[1];return r[0].evaluate(n)%s.evaluate(n)}],ln2:[se,[],function(){return Math.LN2}],pi:[se,[],function(){return Math.PI}],e:[se,[],function(){return Math.E}],"^":[se,[se,se],function(n,r){var s=r[1];return Math.pow(r[0].evaluate(n),s.evaluate(n))}],sqrt:[se,[se],function(n,r){return Math.sqrt(r[0].evaluate(n))}],log10:[se,[se],function(n,r){return Math.log(r[0].evaluate(n))/Math.LN10}],ln:[se,[se],function(n,r){return Math.log(r[0].evaluate(n))}],log2:[se,[se],function(n,r){return Math.log(r[0].evaluate(n))/Math.LN2}],sin:[se,[se],function(n,r){return Math.sin(r[0].evaluate(n))}],cos:[se,[se],function(n,r){return Math.cos(r[0].evaluate(n))}],tan:[se,[se],function(n,r){return Math.tan(r[0].evaluate(n))}],asin:[se,[se],function(n,r){return Math.asin(r[0].evaluate(n))}],acos:[se,[se],function(n,r){return Math.acos(r[0].evaluate(n))}],atan:[se,[se],function(n,r){return Math.atan(r[0].evaluate(n))}],min:[se,tl(se),function(n,r){return Math.min.apply(Math,r.map(function(s){return s.evaluate(n)}))}],max:[se,tl(se),function(n,r){return Math.max.apply(Math,r.map(function(s){return s.evaluate(n)}))}],abs:[se,[se],function(n,r){return Math.abs(r[0].evaluate(n))}],round:[se,[se],function(n,r){var s=r[0].evaluate(n);return s<0?-Math.round(-s):Math.round(s)}],floor:[se,[se],function(n,r){return Math.floor(r[0].evaluate(n))}],ceil:[se,[se],function(n,r){return Math.ceil(r[0].evaluate(n))}],"filter-==":[Ue,[Re,$e],function(n,r){var s=r[0],d=r[1];return n.properties()[s.value]===d.value}],"filter-id-==":[Ue,[$e],function(n,r){var s=r[0];return n.id()===s.value}],"filter-type-==":[Ue,[Re],function(n,r){var s=r[0];return n.geometryType()===s.value}],"filter-<":[Ue,[Re,$e],function(n,r){var s=r[0],d=r[1],v=n.properties()[s.value],x=d.value;return typeof v==typeof x&&v<x}],"filter-id-<":[Ue,[$e],function(n,r){var s=r[0],d=n.id(),v=s.value;return typeof d==typeof v&&d<v}],"filter->":[Ue,[Re,$e],function(n,r){var s=r[0],d=r[1],v=n.properties()[s.value],x=d.value;return typeof v==typeof x&&v>x}],"filter-id->":[Ue,[$e],function(n,r){var s=r[0],d=n.id(),v=s.value;return typeof d==typeof v&&d>v}],"filter-<=":[Ue,[Re,$e],function(n,r){var s=r[0],d=r[1],v=n.properties()[s.value],x=d.value;return typeof v==typeof x&&v<=x}],"filter-id-<=":[Ue,[$e],function(n,r){var s=r[0],d=n.id(),v=s.value;return typeof d==typeof v&&d<=v}],"filter->=":[Ue,[Re,$e],function(n,r){var s=r[0],d=r[1],v=n.properties()[s.value],x=d.value;return typeof v==typeof x&&v>=x}],"filter-id->=":[Ue,[$e],function(n,r){var s=r[0],d=n.id(),v=s.value;return typeof d==typeof v&&d>=v}],"filter-has":[Ue,[$e],function(n,r){return r[0].value in n.properties()}],"filter-has-id":[Ue,[],function(n){return n.id()!==null&&n.id()!==void 0}],"filter-type-in":[Ue,[gi(Re)],function(n,r){return r[0].value.indexOf(n.geometryType())>=0}],"filter-id-in":[Ue,[gi($e)],function(n,r){return r[0].value.indexOf(n.id())>=0}],"filter-in-small":[Ue,[Re,gi($e)],function(n,r){var s=r[0];return r[1].value.indexOf(n.properties()[s.value])>=0}],"filter-in-large":[Ue,[Re,gi($e)],function(n,r){var s=r[0],d=r[1];return function(v,x,A,T){for(;A<=T;){var D=A+T>>1;if(x[D]===v)return!0;x[D]>v?T=D-1:A=D+1}return!1}(n.properties()[s.value],d.value,0,d.value.length-1)}],all:{type:Ue,overloads:[[[Ue,Ue],function(n,r){var s=r[1];return r[0].evaluate(n)&&s.evaluate(n)}],[tl(Ue),function(n,r){for(var s=0,d=r;s<d.length;s+=1)if(!d[s].evaluate(n))return!1;return!0}]]},any:{type:Ue,overloads:[[[Ue,Ue],function(n,r){var s=r[1];return r[0].evaluate(n)||s.evaluate(n)}],[tl(Ue),function(n,r){for(var s=0,d=r;s<d.length;s+=1)if(d[s].evaluate(n))return!0;return!1}]]},"!":[Ue,[Ue],function(n,r){return!r[0].evaluate(n)}],"is-supported-script":[Ue,[Re],function(n,r){var s=n.globals&&n.globals.isSupportedScript;return!s||s(r[0].evaluate(n))}],upcase:[Re,[Re],function(n,r){return r[0].evaluate(n).toUpperCase()}],downcase:[Re,[Re],function(n,r){return r[0].evaluate(n).toLowerCase()}],concat:[Re,tl($e),function(n,r){return r.map(function(s){return Cu(s.evaluate(n))}).join("")}],"resolved-locale":[Re,[xi],function(n,r){return r[0].evaluate(n).resolvedLocale()}]});var Tl=function(n,r){this.expression=n,this._warningHistory={},this._evaluator=new Y,this._defaultValue=r?function(s){return s.type==="color"&&Eu(s.default)?new ai(0,0,0,0):s.type==="color"?ai.parse(s.default)||null:s.default===void 0?null:s.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null};function Tu(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in El}function nu(n,r){var s=new Al(El,[],r?function(v){var x={color:He,string:Re,number:se,enum:Re,boolean:Ue,formatted:ji,resolvedImage:ci};return v.type==="array"?gi(x[v.value]||$e,v.length):x[v.type]}(r):void 0),d=s.parse(n,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?hc(new Tl(d,r)):aa(s.errors)}Tl.prototype.evaluateWithoutErrorHandling=function(n,r,s,d,v,x){return this._evaluator.globals=n,this._evaluator.feature=r,this._evaluator.featureState=s,this._evaluator.canonical=d,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)},Tl.prototype.evaluate=function(n,r,s,d,v,x){this._evaluator.globals=n,this._evaluator.feature=r||null,this._evaluator.featureState=s||null,this._evaluator.canonical=d,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{var A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new Zr("Expected value to be one of "+Object.keys(this._enumValues).map(function(T){return JSON.stringify(T)}).join(", ")+", but found "+JSON.stringify(A)+" instead.");return A}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}};var Ts=function(n,r){this.kind=n,this._styleExpression=r,this.isStateDependent=n!=="constant"&&!bl(r.expression)};Ts.prototype.evaluateWithoutErrorHandling=function(n,r,s,d,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,r,s,d,v,x)},Ts.prototype.evaluate=function(n,r,s,d,v,x){return this._styleExpression.evaluate(n,r,s,d,v,x)};var ku=function(n,r,s,d){this.kind=n,this.zoomStops=s,this._styleExpression=r,this.isStateDependent=n!=="camera"&&!bl(r.expression),this.interpolationType=d};function nl(n,r){if((n=nu(n,r)).result==="error")return n;var s=n.value.expression,d=Ms(s);if(!d&&!Uo(r))return aa([new ye("","data expressions not supported")]);var v=ir(s,["zoom"]);if(!v&&!el(r))return aa([new ye("","zoom expressions not supported")]);var x=function A(T){var D=null;if(T instanceof Ss)D=A(T.result);else if(T instanceof Es)for(var O=0,N=T.args;O<N.length&&!(D=A(N[O]));O+=1);else(T instanceof Mi||T instanceof ho)&&T.input instanceof vt&&T.input.name==="zoom"&&(D=T);return D instanceof ye||T.eachChild(function(V){var $=A(V);$ instanceof ye?D=$:!D&&$?D=new ye("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):D&&$&&D!==$&&(D=new ye("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),D}(s);return x||v?x instanceof ye?aa([x]):x instanceof ho&&!Sl(r)?aa([new ye("",'"interpolate" expressions cannot be used with this property')]):hc(x?new ku(d?"camera":"composite",n.value,x.labels,x instanceof ho?x.interpolation:void 0):new Ts(d?"constant":"source",n.value)):aa([new ye("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ku.prototype.evaluateWithoutErrorHandling=function(n,r,s,d,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,r,s,d,v,x)},ku.prototype.evaluate=function(n,r,s,d,v,x){return this._styleExpression.evaluate(n,r,s,d,v,x)},ku.prototype.interpolationFactor=function(n,r,s){return this.interpolationType?ho.interpolationFactor(this.interpolationType,n,r,s):0};var fs=function(n,r){this._parameters=n,this._specification=r,ge(this,function s(d,v){var x,A,T,D=v.type==="color",O=d.stops&&typeof d.stops[0][0]=="object",N=O||!(O||d.property!==void 0),V=d.type||(Sl(v)?"exponential":"interval");if(D&&((d=ge({},d)).stops&&(d.stops=d.stops.map(function(Ze){return[Ze[0],ai.parse(Ze[1])]})),d.default=ai.parse(d.default?d.default:v.default)),d.colorSpace&&d.colorSpace!=="rgb"&&!uc[d.colorSpace])throw new Error("Unknown color space: "+d.colorSpace);if(V==="exponential")x=Su;else if(V==="interval")x=Zc;else if(V==="categorical"){x=sa,A=Object.create(null);for(var $=0,Q=d.stops;$<Q.length;$+=1){var ct=Q[$];A[ct[0]]=ct[1]}T=typeof d.stops[0][0]}else{if(V!=="identity")throw new Error('Unknown function type "'+V+'"');x=fc}if(O){for(var mt={},Et=[],bt=0;bt<d.stops.length;bt++){var Ut=d.stops[bt],$t=Ut[0].zoom;mt[$t]===void 0&&(mt[$t]={zoom:$t,type:d.type,property:d.property,default:d.default,stops:[]},Et.push($t)),mt[$t].stops.push([Ut[0].value,Ut[1]])}for(var ee=[],ie=0,fe=Et;ie<fe.length;ie+=1){var Me=fe[ie];ee.push([mt[Me].zoom,s(mt[Me],v)])}var Ne={name:"linear"};return{kind:"composite",interpolationType:Ne,interpolationFactor:ho.interpolationFactor.bind(void 0,Ne),zoomStops:ee.map(function(Ze){return Ze[0]}),evaluate:function(Ze,Mn){var Je=Ze.zoom;return Su({stops:ee,base:d.base},v,Je).evaluate(Je,Mn)}}}if(N){var _n=V==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:_n,interpolationFactor:ho.interpolationFactor.bind(void 0,_n),zoomStops:d.stops.map(function(Ze){return Ze[0]}),evaluate:function(Ze){return x(d,v,Ze.zoom,A,T)}}}return{kind:"source",evaluate:function(Ze,Mn){var Je=Mn&&Mn.properties?Mn.properties[d.property]:void 0;return Je===void 0?hs(d.default,v.default):x(d,v,Je,A,T)}}}(this._parameters,this._specification))};function jo(n){var r=n.key,s=n.value,d=n.valueSpec||{},v=n.objectElementValidators||{},x=n.style,A=n.styleSpec,T=[],D=zi(s);if(D!=="object")return[new _t(r,s,"object expected, "+D+" found")];for(var O in s){var N=O.split(".")[0],V=d[N]||d["*"],$=void 0;if(v[N])$=v[N];else if(d[N])$=mn;else if(v["*"])$=v["*"];else{if(!d["*"]){T.push(new _t(r,s[O],'unknown property "'+O+'"'));continue}$=mn}T=T.concat($({key:(r&&r+".")+O,value:s[O],valueSpec:V,style:x,styleSpec:A,object:s,objectKey:O},s))}for(var Q in d)v[Q]||d[Q].required&&d[Q].default===void 0&&s[Q]===void 0&&T.push(new _t(r,s,'missing required property "'+Q+'"'));return T}function Ih(n){var r=n.value,s=n.valueSpec,d=n.style,v=n.styleSpec,x=n.key,A=n.arrayElementValidator||mn;if(zi(r)!=="array")return[new _t(x,r,"array expected, "+zi(r)+" found")];if(s.length&&r.length!==s.length)return[new _t(x,r,"array length "+s.length+" expected, length "+r.length+" found")];if(s["min-length"]&&r.length<s["min-length"])return[new _t(x,r,"array length at least "+s["min-length"]+" expected, length "+r.length+" found")];var T={type:s.value,values:s.values};v.$version<7&&(T.function=s.function),zi(s.value)==="object"&&(T=s.value);for(var D=[],O=0;O<r.length;O++)D=D.concat(A({array:r,arrayIndex:O,value:r[O],valueSpec:T,style:d,styleSpec:v,key:x+"["+O+"]"}));return D}function $c(n){var r=n.key,s=n.value,d=n.valueSpec,v=zi(s);return v==="number"&&s!=s&&(v="NaN"),v!=="number"?[new _t(r,s,"number expected, "+v+" found")]:"minimum"in d&&s<d.minimum?[new _t(r,s,s+" is less than the minimum value "+d.minimum)]:"maximum"in d&&s>d.maximum?[new _t(r,s,s+" is greater than the maximum value "+d.maximum)]:[]}function Pu(n){var r,s,d,v=n.valueSpec,x=be(n.value.type),A={},T=x!=="categorical"&&n.value.property===void 0,D=!T,O=zi(n.value.stops)==="array"&&zi(n.value.stops[0])==="array"&&zi(n.value.stops[0][0])==="object",N=jo({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(Q){if(x==="identity")return[new _t(Q.key,Q.value,'identity function may not have a "stops" property')];var ct=[],mt=Q.value;return ct=ct.concat(Ih({key:Q.key,value:mt,valueSpec:Q.valueSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:V})),zi(mt)==="array"&&mt.length===0&&ct.push(new _t(Q.key,mt,"array must have at least one stop")),ct},default:function(Q){return mn({key:Q.key,value:Q.value,valueSpec:v,style:Q.style,styleSpec:Q.styleSpec})}}});return x==="identity"&&T&&N.push(new _t(n.key,n.value,'missing required property "property"')),x==="identity"||n.value.stops||N.push(new _t(n.key,n.value,'missing required property "stops"')),x==="exponential"&&n.valueSpec.expression&&!Sl(n.valueSpec)&&N.push(new _t(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(D&&!Uo(n.valueSpec)?N.push(new _t(n.key,n.value,"property functions not supported")):T&&!el(n.valueSpec)&&N.push(new _t(n.key,n.value,"zoom functions not supported"))),x!=="categorical"&&!O||n.value.property!==void 0||N.push(new _t(n.key,n.value,'"property" property is required')),N;function V(Q){var ct=[],mt=Q.value,Et=Q.key;if(zi(mt)!=="array")return[new _t(Et,mt,"array expected, "+zi(mt)+" found")];if(mt.length!==2)return[new _t(Et,mt,"array length 2 expected, length "+mt.length+" found")];if(O){if(zi(mt[0])!=="object")return[new _t(Et,mt,"object expected, "+zi(mt[0])+" found")];if(mt[0].zoom===void 0)return[new _t(Et,mt,"object stop key must have zoom")];if(mt[0].value===void 0)return[new _t(Et,mt,"object stop key must have value")];if(d&&d>be(mt[0].zoom))return[new _t(Et,mt[0].zoom,"stop zoom values must appear in ascending order")];be(mt[0].zoom)!==d&&(d=be(mt[0].zoom),s=void 0,A={}),ct=ct.concat(jo({key:Et+"[0]",value:mt[0],valueSpec:{zoom:{}},style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:$c,value:$}}))}else ct=ct.concat($({key:Et+"[0]",value:mt[0],valueSpec:{},style:Q.style,styleSpec:Q.styleSpec},mt));return Tu(oe(mt[1]))?ct.concat([new _t(Et+"[1]",mt[1],"expressions are not allowed in function stops.")]):ct.concat(mn({key:Et+"[1]",value:mt[1],valueSpec:v,style:Q.style,styleSpec:Q.styleSpec}))}function $(Q,ct){var mt=zi(Q.value),Et=be(Q.value),bt=Q.value!==null?Q.value:ct;if(r){if(mt!==r)return[new _t(Q.key,bt,mt+" stop domain type must match previous stop domain type "+r)]}else r=mt;if(mt!=="number"&&mt!=="string"&&mt!=="boolean")return[new _t(Q.key,bt,"stop domain value must be a number, string, or boolean")];if(mt!=="number"&&x!=="categorical"){var Ut="number expected, "+mt+" found";return Uo(v)&&x===void 0&&(Ut+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _t(Q.key,bt,Ut)]}return x!=="categorical"||mt!=="number"||isFinite(Et)&&Math.floor(Et)===Et?x!=="categorical"&&mt==="number"&&s!==void 0&&Et<s?[new _t(Q.key,bt,"stop domain values must appear in ascending order")]:(s=Et,x==="categorical"&&Et in A?[new _t(Q.key,bt,"stop domain values must be unique")]:(A[Et]=!0,[])):[new _t(Q.key,bt,"integer expected, found "+Et)]}}function Ko(n){var r=(n.expressionContext==="property"?nl:nu)(oe(n.value),n.valueSpec);if(r.result==="error")return r.value.map(function(d){return new _t(""+n.key+d.key,n.value,d.message)});var s=r.value.expression||r.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!s.outputDefined())return[new _t(n.key,n.value,'Invalid data expression for "'+n.propertyKey+'". Output values must be contained as literals within the expression.')];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!bl(s))return[new _t(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!bl(s))return[new _t(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!ir(s,["zoom","feature-state"]))return[new _t(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Ms(s))return[new _t(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function il(n){var r=n.key,s=n.value,d=n.valueSpec,v=[];return Array.isArray(d.values)?d.values.indexOf(be(s))===-1&&v.push(new _t(r,s,"expected one of ["+d.values.join(", ")+"], "+JSON.stringify(s)+" found")):Object.keys(d.values).indexOf(be(s))===-1&&v.push(new _t(r,s,"expected one of ["+Object.keys(d.values).join(", ")+"], "+JSON.stringify(s)+" found")),v}function pc(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(var r=0,s=n.slice(1);r<s.length;r+=1){var d=s[r];if(!pc(d)&&typeof d!="boolean")return!1}return!0;default:return!0}}fs.deserialize=function(n){return new fs(n._parameters,n._specification)},fs.serialize=function(n){return{_parameters:n._parameters,_specification:n._specification}};var Yc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function kl(n){if(n==null)return{filter:function(){return!0},needGeometry:!1};pc(n)||(n=xa(n));var r=nu(n,Yc);if(r.result==="error")throw new Error(r.value.map(function(s){return s.key+": "+s.message}).join(", "));return{filter:function(s,d,v){return r.value.evaluate(s,d,{},v)},needGeometry:function s(d){if(!Array.isArray(d))return!1;if(d[0]==="within")return!0;for(var v=1;v<d.length;v++)if(s(d[v]))return!0;return!1}(n)}}function iu(n,r){return n<r?-1:n>r?1:0}function xa(n){if(!n)return!0;var r,s=n[0];return n.length<=1?s!=="any":s==="=="?Wt(n[1],n[2],"=="):s==="!="?zn(Wt(n[1],n[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Wt(n[1],n[2],s):s==="any"?(r=n.slice(1),["any"].concat(r.map(xa))):s==="all"?["all"].concat(n.slice(1).map(xa)):s==="none"?["all"].concat(n.slice(1).map(xa).map(zn)):s==="in"?ce(n[1],n.slice(2)):s==="!in"?zn(ce(n[1],n.slice(2))):s==="has"?rn(n[1]):s==="!has"?zn(rn(n[1])):s!=="within"||n}function Wt(n,r,s){switch(n){case"$type":return["filter-type-"+s,r];case"$id":return["filter-id-"+s,r];default:return["filter-"+s,n,r]}}function ce(n,r){if(r.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(function(s){return typeof s!=typeof r[0]})?["filter-in-large",n,["literal",r.sort(iu)]]:["filter-in-small",n,["literal",r]]}}function rn(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function zn(n){return["!",n]}function yr(n){return pc(oe(n.value))?Ko(ge({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function r(s){var d=s.value,v=s.key;if(zi(d)!=="array")return[new _t(v,d,"array expected, "+zi(d)+" found")];var x,A=s.styleSpec,T=[];if(d.length<1)return[new _t(v,d,"filter array must have at least 1 element")];switch(T=T.concat(il({key:v+"[0]",value:d[0],valueSpec:A.filter_operator,style:s.style,styleSpec:s.styleSpec})),be(d[0])){case"<":case"<=":case">":case">=":d.length>=2&&be(d[1])==="$type"&&T.push(new _t(v,d,'"$type" cannot be use with operator "'+d[0]+'"'));case"==":case"!=":d.length!==3&&T.push(new _t(v,d,'filter array for operator "'+d[0]+'" must have 3 elements'));case"in":case"!in":d.length>=2&&(x=zi(d[1]))!=="string"&&T.push(new _t(v+"[1]",d[1],"string expected, "+x+" found"));for(var D=2;D<d.length;D++)x=zi(d[D]),be(d[1])==="$type"?T=T.concat(il({key:v+"["+D+"]",value:d[D],valueSpec:A.geometry_type,style:s.style,styleSpec:s.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&T.push(new _t(v+"["+D+"]",d[D],"string, number, or boolean expected, "+x+" found"));break;case"any":case"all":case"none":for(var O=1;O<d.length;O++)T=T.concat(r({key:v+"["+O+"]",value:d[O],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":x=zi(d[1]),d.length!==2?T.push(new _t(v,d,'filter array for "'+d[0]+'" operator must have 2 elements')):x!=="string"&&T.push(new _t(v+"[1]",d[1],"string expected, "+x+" found"));break;case"within":x=zi(d[1]),d.length!==2?T.push(new _t(v,d,'filter array for "'+d[0]+'" operator must have 2 elements')):x!=="object"&&T.push(new _t(v+"[1]",d[1],"object expected, "+x+" found"))}return T}(n)}function Bi(n,r){var s=n.key,d=n.style,v=n.styleSpec,x=n.value,A=n.objectKey,T=v[r+"_"+n.layerType];if(!T)return[];var D=A.match(/^(.*)-transition$/);if(r==="paint"&&D&&T[D[1]]&&T[D[1]].transition)return mn({key:s,value:x,valueSpec:v.transition,style:d,styleSpec:v});var O,N=n.valueSpec||T[A];if(!N)return[new _t(s,x,'unknown property "'+A+'"')];if(zi(x)==="string"&&Uo(N)&&!N.tokens&&(O=/^{([^}]+)}$/.exec(x)))return[new _t(s,x,'"'+A+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(O[1])+" }`.")];var V=[];return n.layerType==="symbol"&&(A==="text-field"&&d&&!d.glyphs&&V.push(new _t(s,x,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&Eu(oe(x))&&be(x.type)==="identity"&&V.push(new _t(s,x,'"text-font" does not support identity functions'))),V.concat(mn({key:n.key,value:x,valueSpec:N,style:d,styleSpec:v,expressionContext:"property",propertyType:r,propertyKey:A}))}function fr(n){return Bi(n,"paint")}function Nt(n){return Bi(n,"layout")}function he(n){var r=[],s=n.value,d=n.key,v=n.style,x=n.styleSpec;s.type||s.ref||r.push(new _t(d,s,'either "type" or "ref" is required'));var A,T=be(s.type),D=be(s.ref);if(s.id)for(var O=be(s.id),N=0;N<n.arrayIndex;N++){var V=v.layers[N];be(V.id)===O&&r.push(new _t(d,s.id,'duplicate layer id "'+s.id+'", previously used at line '+V.id.__line__))}if("ref"in s)["type","source","source-layer","filter","layout"].forEach(function(ct){ct in s&&r.push(new _t(d,s[ct],'"'+ct+'" is prohibited for ref layers'))}),v.layers.forEach(function(ct){be(ct.id)===D&&(A=ct)}),A?A.ref?r.push(new _t(d,s.ref,"ref cannot reference another ref layer")):T=be(A.type):r.push(new _t(d,s.ref,'ref layer "'+D+'" not found'));else if(T!=="background")if(s.source){var $=v.sources&&v.sources[s.source],Q=$&&be($.type);$?Q==="vector"&&T==="raster"?r.push(new _t(d,s.source,'layer "'+s.id+'" requires a raster source')):Q==="raster"&&T!=="raster"?r.push(new _t(d,s.source,'layer "'+s.id+'" requires a vector source')):Q!=="vector"||s["source-layer"]?Q==="raster-dem"&&T!=="hillshade"?r.push(new _t(d,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!s.paint||!s.paint["line-gradient"]||Q==="geojson"&&$.lineMetrics||r.push(new _t(d,s,'layer "'+s.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):r.push(new _t(d,s,'layer "'+s.id+'" must specify a "source-layer"')):r.push(new _t(d,s.source,'source "'+s.source+'" not found'))}else r.push(new _t(d,s,'missing required property "source"'));return r=r.concat(jo({key:d,value:s,valueSpec:x.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return mn({key:d+".type",value:s.type,valueSpec:x.layer.type,style:n.style,styleSpec:n.styleSpec,object:s,objectKey:"type"})},filter:yr,layout:function(ct){return jo({layer:s,key:ct.key,value:ct.value,style:ct.style,styleSpec:ct.styleSpec,objectElementValidators:{"*":function(mt){return Nt(ge({layerType:T},mt))}}})},paint:function(ct){return jo({layer:s,key:ct.key,value:ct.value,style:ct.style,styleSpec:ct.styleSpec,objectElementValidators:{"*":function(mt){return fr(ge({layerType:T},mt))}}})}}}))}function Jt(n){var r=n.value,s=n.key,d=zi(r);return d!=="string"?[new _t(s,r,"string expected, "+d+" found")]:[]}var Ae={promoteId:function(n){var r=n.key,s=n.value;if(zi(s)==="string")return Jt({key:r,value:s});var d=[];for(var v in s)d.push.apply(d,Jt({key:r+"."+v,value:s[v]}));return d}};function jn(n){var r=n.value,s=n.key,d=n.styleSpec,v=n.style;if(!r.type)return[new _t(s,r,'"type" is required')];var x,A=be(r.type);switch(A){case"vector":case"raster":case"raster-dem":return jo({key:s,value:r,valueSpec:d["source_"+A.replace("-","_")],style:n.style,styleSpec:d,objectElementValidators:Ae});case"geojson":if(x=jo({key:s,value:r,valueSpec:d.source_geojson,style:v,styleSpec:d,objectElementValidators:Ae}),r.cluster)for(var T in r.clusterProperties){var D=r.clusterProperties[T],O=D[0],N=typeof O=="string"?[O,["accumulated"],["get",T]]:O;x.push.apply(x,Ko({key:s+"."+T+".map",value:D[1],expressionContext:"cluster-map"})),x.push.apply(x,Ko({key:s+"."+T+".reduce",value:N,expressionContext:"cluster-reduce"}))}return x;case"video":return jo({key:s,value:r,valueSpec:d.source_video,style:v,styleSpec:d});case"image":return jo({key:s,value:r,valueSpec:d.source_image,style:v,styleSpec:d});case"canvas":return[new _t(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return il({key:s+".type",value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:v,styleSpec:d})}}function li(n){var r=n.value,s=n.styleSpec,d=s.light,v=n.style,x=[],A=zi(r);if(r===void 0)return x;if(A!=="object")return x.concat([new _t("light",r,"object expected, "+A+" found")]);for(var T in r){var D=T.match(/^(.*)-transition$/);x=x.concat(D&&d[D[1]]&&d[D[1]].transition?mn({key:T,value:r[T],valueSpec:s.transition,style:v,styleSpec:s}):d[T]?mn({key:T,value:r[T],valueSpec:d[T],style:v,styleSpec:s}):[new _t(T,r[T],'unknown property "'+T+'"')])}return x}var Ei={"*":function(){return[]},array:Ih,boolean:function(n){var r=n.value,s=n.key,d=zi(r);return d!=="boolean"?[new _t(s,r,"boolean expected, "+d+" found")]:[]},number:$c,color:function(n){var r=n.key,s=n.value,d=zi(s);return d!=="string"?[new _t(r,s,"color expected, "+d+" found")]:Yn(s)===null?[new _t(r,s,'color expected, "'+s+'" found')]:[]},constants:Zt,enum:il,filter:yr,function:Pu,layer:he,object:jo,source:jn,light:li,string:Jt,formatted:function(n){return Jt(n).length===0?[]:Ko(n)},resolvedImage:function(n){return Jt(n).length===0?[]:Ko(n)}};function mn(n){var r=n.value,s=n.valueSpec,d=n.styleSpec;return s.expression&&Eu(be(r))?Pu(n):s.expression&&Tu(oe(r))?Ko(n):s.type&&Ei[s.type]?Ei[s.type](n):jo(ge({},n,{valueSpec:s.type?d[s.type]:s}))}function Gi(n){var r=n.value,s=n.key,d=Jt(n);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new _t(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new _t(s,r,'"glyphs" url must include a "{range}" token'))),d}function Qo(n,r){r===void 0&&(r=tt);var s=[];return s=s.concat(mn({key:"",value:n,valueSpec:r.$root,styleSpec:r,style:n,objectElementValidators:{glyphs:Gi,"*":function(){return[]}}})),n.constants&&(s=s.concat(Zt({key:"constants",value:n.constants,style:n,styleSpec:r}))),io(s)}function io(n){return[].concat(n).sort(function(r,s){return r.line-s.line})}function Oa(n){return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return io(n.apply(this,r))}}Qo.source=Oa(jn),Qo.light=Oa(li),Qo.layer=Oa(he),Qo.filter=Oa(yr),Qo.paintProperty=Oa(fr),Qo.layoutProperty=Oa(Nt);var Lu=Qo,Du=Lu.light,Xc=Lu.paintProperty,Yi=Lu.layoutProperty;function Ln(n,r){var s=!1;if(r&&r.length)for(var d=0,v=r;d<v.length;d+=1)n.fire(new Tt(new Error(v[d].message))),s=!0;return s}var Ya=pr;function pr(n,r,s){var d=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var v=new Int32Array(this.arrayBuffer);n=v[0],this.d=(r=v[1])+2*(s=v[2]);for(var x=0;x<this.d*this.d;x++){var A=v[3+x],T=v[3+x+1];d.push(A===T?null:v.subarray(A,T))}var D=v[3+d.length+1];this.keys=v.subarray(v[3+d.length],D),this.bboxes=v.subarray(D),this.insert=this._insertReadonly}else{this.d=r+2*s;for(var O=0;O<this.d*this.d;O++)d.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=n,this.padding=s,this.scale=r/n,this.uid=0;var N=s/r*n;this.min=-N,this.max=n+N}pr.prototype.insert=function(n,r,s,d,v){this._forEachCell(r,s,d,v,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(r),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(v)},pr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},pr.prototype._insertCell=function(n,r,s,d,v,x){this.cells[v].push(x)},pr.prototype.query=function(n,r,s,d,v){var x=this.min,A=this.max;if(n<=x&&r<=x&&A<=s&&A<=d&&!v)return Array.prototype.slice.call(this.keys);var T=[];return this._forEachCell(n,r,s,d,this._queryCell,T,{},v),T},pr.prototype._queryCell=function(n,r,s,d,v,x,A,T){var D=this.cells[v];if(D!==null)for(var O=this.keys,N=this.bboxes,V=0;V<D.length;V++){var $=D[V];if(A[$]===void 0){var Q=4*$;(T?T(N[Q+0],N[Q+1],N[Q+2],N[Q+3]):n<=N[Q+2]&&r<=N[Q+3]&&s>=N[Q+0]&&d>=N[Q+1])?(A[$]=!0,x.push(O[$])):A[$]=!1}}},pr.prototype._forEachCell=function(n,r,s,d,v,x,A,T){for(var D=this._convertToCellCoord(n),O=this._convertToCellCoord(r),N=this._convertToCellCoord(s),V=this._convertToCellCoord(d),$=D;$<=N;$++)for(var Q=O;Q<=V;Q++){var ct=this.d*Q+$;if((!T||T(this._convertFromCellCoord($),this._convertFromCellCoord(Q),this._convertFromCellCoord($+1),this._convertFromCellCoord(Q+1)))&&v.call(this,n,r,s,d,ct,x,A,T))return}},pr.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},pr.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},pr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,r=3+this.cells.length+1+1,s=0,d=0;d<this.cells.length;d++)s+=this.cells[d].length;var v=new Int32Array(r+s+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;for(var x=r,A=0;A<n.length;A++){var T=n[A];v[3+A]=x,v.set(T,x),x+=T.length}return v[3+n.length]=x,v.set(this.keys,x),v[3+n.length+1]=x+=this.keys.length,v.set(this.bboxes,x),x+=this.bboxes.length,v.buffer};var ks=P.ImageData,Fa=P.ImageBitmap,lr={};function Ye(n,r,s){s===void 0&&(s={}),Object.defineProperty(r,"_classRegistryKey",{value:n,writeable:!1}),lr[n]={klass:r,omit:s.omit||[],shallow:s.shallow||[]}}for(var ro in Ye("Object",Object),Ya.serialize=function(n,r){var s=n.toArrayBuffer();return r&&r.push(s),{buffer:s}},Ya.deserialize=function(n){return new Ya(n.buffer)},Ye("Grid",Ya),Ye("Color",ai),Ye("Error",Error),Ye("ResolvedImage",Vo),Ye("StylePropertyFunction",fs),Ye("StyleExpression",Tl,{omit:["_evaluator"]}),Ye("ZoomDependentExpression",ku),Ye("ZoomConstantExpression",Ts),Ye("CompoundExpression",vt,{omit:["_evaluate"]}),El)El[ro]._classRegistryKey||Ye("Expression_"+ro,El[ro]);function ba(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function Aa(n){return Fa&&n instanceof Fa}function Lo(n,r){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(ba(n)||Aa(n))return r&&r.push(n),n;if(ArrayBuffer.isView(n)){var s=n;return r&&r.push(s.buffer),s}if(n instanceof ks)return r&&r.push(n.data.buffer),n;if(Array.isArray(n)){for(var d=[],v=0,x=n;v<x.length;v+=1)d.push(Lo(x[v],r));return d}if(typeof n=="object"){var A=n.constructor,T=A._classRegistryKey;if(!T)throw new Error("can't serialize object of unregistered class");var D=A.serialize?A.serialize(n,r):{};if(!A.serialize){for(var O in n)if(n.hasOwnProperty(O)&&!(lr[T].omit.indexOf(O)>=0)){var N=n[O];D[O]=lr[T].shallow.indexOf(O)>=0?N:Lo(N,r)}n instanceof Error&&(D.message=n.message)}if(D.$name)throw new Error("$name property is reserved for worker serialization logic.");return T!=="Object"&&(D.$name=T),D}throw new Error("can't serialize object of type "+typeof n)}function Do(n){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||ba(n)||Aa(n)||ArrayBuffer.isView(n)||n instanceof ks)return n;if(Array.isArray(n))return n.map(Do);if(typeof n=="object"){var r=n.$name||"Object",s=lr[r].klass;if(!s)throw new Error("can't deserialize unregistered class "+r);if(s.deserialize)return s.deserialize(n);for(var d=Object.create(s.prototype),v=0,x=Object.keys(n);v<x.length;v+=1){var A=x[v];if(A!=="$name"){var T=n[A];d[A]=lr[r].shallow.indexOf(A)>=0?T:Do(T)}}return d}throw new Error("can't deserialize object of type "+typeof n)}var ru=function(){this.first=!0};ru.prototype.update=function(n,r){var s=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=r),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=s,!0))};var Be={"Latin-1 Supplement":function(n){return n>=128&&n<=255},Arabic:function(n){return n>=1536&&n<=1791},"Arabic Supplement":function(n){return n>=1872&&n<=1919},"Arabic Extended-A":function(n){return n>=2208&&n<=2303},"Hangul Jamo":function(n){return n>=4352&&n<=4607},"Unified Canadian Aboriginal Syllabics":function(n){return n>=5120&&n<=5759},Khmer:function(n){return n>=6016&&n<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(n){return n>=6320&&n<=6399},"General Punctuation":function(n){return n>=8192&&n<=8303},"Letterlike Symbols":function(n){return n>=8448&&n<=8527},"Number Forms":function(n){return n>=8528&&n<=8591},"Miscellaneous Technical":function(n){return n>=8960&&n<=9215},"Control Pictures":function(n){return n>=9216&&n<=9279},"Optical Character Recognition":function(n){return n>=9280&&n<=9311},"Enclosed Alphanumerics":function(n){return n>=9312&&n<=9471},"Geometric Shapes":function(n){return n>=9632&&n<=9727},"Miscellaneous Symbols":function(n){return n>=9728&&n<=9983},"Miscellaneous Symbols and Arrows":function(n){return n>=11008&&n<=11263},"CJK Radicals Supplement":function(n){return n>=11904&&n<=12031},"Kangxi Radicals":function(n){return n>=12032&&n<=12255},"Ideographic Description Characters":function(n){return n>=12272&&n<=12287},"CJK Symbols and Punctuation":function(n){return n>=12288&&n<=12351},Hiragana:function(n){return n>=12352&&n<=12447},Katakana:function(n){return n>=12448&&n<=12543},Bopomofo:function(n){return n>=12544&&n<=12591},"Hangul Compatibility Jamo":function(n){return n>=12592&&n<=12687},Kanbun:function(n){return n>=12688&&n<=12703},"Bopomofo Extended":function(n){return n>=12704&&n<=12735},"CJK Strokes":function(n){return n>=12736&&n<=12783},"Katakana Phonetic Extensions":function(n){return n>=12784&&n<=12799},"Enclosed CJK Letters and Months":function(n){return n>=12800&&n<=13055},"CJK Compatibility":function(n){return n>=13056&&n<=13311},"CJK Unified Ideographs Extension A":function(n){return n>=13312&&n<=19903},"Yijing Hexagram Symbols":function(n){return n>=19904&&n<=19967},"CJK Unified Ideographs":function(n){return n>=19968&&n<=40959},"Yi Syllables":function(n){return n>=40960&&n<=42127},"Yi Radicals":function(n){return n>=42128&&n<=42191},"Hangul Jamo Extended-A":function(n){return n>=43360&&n<=43391},"Hangul Syllables":function(n){return n>=44032&&n<=55215},"Hangul Jamo Extended-B":function(n){return n>=55216&&n<=55295},"Private Use Area":function(n){return n>=57344&&n<=63743},"CJK Compatibility Ideographs":function(n){return n>=63744&&n<=64255},"Arabic Presentation Forms-A":function(n){return n>=64336&&n<=65023},"Vertical Forms":function(n){return n>=65040&&n<=65055},"CJK Compatibility Forms":function(n){return n>=65072&&n<=65103},"Small Form Variants":function(n){return n>=65104&&n<=65135},"Arabic Presentation Forms-B":function(n){return n>=65136&&n<=65279},"Halfwidth and Fullwidth Forms":function(n){return n>=65280&&n<=65519}};function rl(n){for(var r=0,s=n;r<s.length;r+=1)if(Pl(s[r].charCodeAt(0)))return!0;return!1}function Pl(n){return!(n!==746&&n!==747&&(n<4352||!(Be["Bopomofo Extended"](n)||Be.Bopomofo(n)||Be["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||Be["CJK Compatibility Ideographs"](n)||Be["CJK Compatibility"](n)||Be["CJK Radicals Supplement"](n)||Be["CJK Strokes"](n)||!(!Be["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||Be["CJK Unified Ideographs Extension A"](n)||Be["CJK Unified Ideographs"](n)||Be["Enclosed CJK Letters and Months"](n)||Be["Hangul Compatibility Jamo"](n)||Be["Hangul Jamo Extended-A"](n)||Be["Hangul Jamo Extended-B"](n)||Be["Hangul Jamo"](n)||Be["Hangul Syllables"](n)||Be.Hiragana(n)||Be["Ideographic Description Characters"](n)||Be.Kanbun(n)||Be["Kangxi Radicals"](n)||Be["Katakana Phonetic Extensions"](n)||Be.Katakana(n)&&n!==12540||!(!Be["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!Be["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||Be["Unified Canadian Aboriginal Syllabics"](n)||Be["Unified Canadian Aboriginal Syllabics Extended"](n)||Be["Vertical Forms"](n)||Be["Yijing Hexagram Symbols"](n)||Be["Yi Syllables"](n)||Be["Yi Radicals"](n))))}function Ll(n){return!(Pl(n)||function(r){return!!(Be["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Be["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Be["Letterlike Symbols"](r)||Be["Number Forms"](r)||Be["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Be["Control Pictures"](r)&&r!==9251||Be["Optical Character Recognition"](r)||Be["Enclosed Alphanumerics"](r)||Be["Geometric Shapes"](r)||Be["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Be["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Be["CJK Symbols and Punctuation"](r)||Be.Katakana(r)||Be["Private Use Area"](r)||Be["CJK Compatibility Forms"](r)||Be["Small Form Variants"](r)||Be["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(n))}function oo(n){return n>=1424&&n<=2303||Be["Arabic Presentation Forms-A"](n)||Be["Arabic Presentation Forms-B"](n)}function po(n,r){return!(!r&&oo(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||Be.Khmer(n))}function xf(n){for(var r=0,s=n;r<s.length;r+=1)if(oo(s[r].charCodeAt(0)))return!0;return!1}var bf=null,Xa="unavailable",Ps=null,Mh=function(n){n&&typeof n=="string"&&n.indexOf("NetworkError")>-1&&(Xa="error"),bf&&bf(n)};function dc(){wp.fire(new gt("pluginStateChange",{pluginStatus:Xa,pluginURL:Ps}))}var wp=new zt,Af=function(){return Xa},ol=function(){if(Xa!=="deferred"||!Ps)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xa="loading",dc(),Ps&&Au({url:Ps},function(n){n?Mh(n):(Xa="loaded",dc())})},ps={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Xa==="loaded"||ps.applyArabicShaping!=null},isLoading:function(){return Xa==="loading"},setState:function(n){Xa=n.pluginStatus,Ps=n.pluginURL},isParsed:function(){return ps.applyArabicShaping!=null&&ps.processBidirectionalText!=null&&ps.processStyledBidirectionalText!=null},getPluginURL:function(){return Ps}},Bn=function(n,r){this.zoom=n,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ru,this.transition={})};Bn.prototype.isSupportedScript=function(n){return function(r,s){for(var d=0,v=r;d<v.length;d+=1)if(!po(v[d].charCodeAt(0),s))return!1;return!0}(n,ps.isLoaded())},Bn.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Bn.prototype.getCrossfadeParameters=function(){var n=this.zoom,r=n-Math.floor(n),s=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*r}};var Yr=function(n,r){this.property=n,this.value=r,this.expression=function(s,d){if(Eu(s))return new fs(s,d);if(Tu(s)){var v=nl(s,d);if(v.result==="error")throw new Error(v.value.map(function(A){return A.key+": "+A.message}).join(", "));return v.value}var x=s;return typeof s=="string"&&d.type==="color"&&(x=ai.parse(s)),{kind:"constant",evaluate:function(){return x}}}(r===void 0?n.specification.default:r,n.specification)};Yr.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Yr.prototype.possiblyEvaluate=function(n,r,s){return this.property.possiblyEvaluate(this,n,r,s)};var Ls=function(n){this.property=n,this.value=new Yr(n,void 0)};Ls.prototype.transitioned=function(n,r){return new Ru(this.property,this.value,r,J({},n.transition,this.transition),n.now)},Ls.prototype.untransitioned=function(){return new Ru(this.property,this.value,null,{},0)};var Jo=function(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)};Jo.prototype.getValue=function(n){return Bt(this._values[n].value.value)},Jo.prototype.setValue=function(n,r){this._values.hasOwnProperty(n)||(this._values[n]=new Ls(this._values[n].property)),this._values[n].value=new Yr(this._values[n].property,r===null?void 0:Bt(r))},Jo.prototype.getTransition=function(n){return Bt(this._values[n].transition)},Jo.prototype.setTransition=function(n,r){this._values.hasOwnProperty(n)||(this._values[n]=new Ls(this._values[n].property)),this._values[n].transition=Bt(r)||void 0},Jo.prototype.serialize=function(){for(var n={},r=0,s=Object.keys(this._values);r<s.length;r+=1){var d=s[r],v=this.getValue(d);v!==void 0&&(n[d]=v);var x=this.getTransition(d);x!==void 0&&(n[d+"-transition"]=x)}return n},Jo.prototype.transitioned=function(n,r){for(var s=new zu(this._properties),d=0,v=Object.keys(this._values);d<v.length;d+=1){var x=v[d];s._values[x]=this._values[x].transitioned(n,r._values[x])}return s},Jo.prototype.untransitioned=function(){for(var n=new zu(this._properties),r=0,s=Object.keys(this._values);r<s.length;r+=1){var d=s[r];n._values[d]=this._values[d].untransitioned()}return n};var Ru=function(n,r,s,d,v){this.property=n,this.value=r,this.begin=v+d.delay||0,this.end=this.begin+d.duration||0,n.specification.transition&&(d.delay||d.duration)&&(this.prior=s)};Ru.prototype.possiblyEvaluate=function(n,r,s){var d=n.now||0,v=this.value.possiblyEvaluate(n,r,s),x=this.prior;if(x){if(d>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(d<this.begin)return x.possiblyEvaluate(n,r,s);var A=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,r,s),v,function(T){if(T<=0)return 0;if(T>=1)return 1;var D=T*T,O=D*T;return 4*(T<.5?O:3*(T-D)+O-.75)}(A))}return v};var zu=function(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)};zu.prototype.possiblyEvaluate=function(n,r,s){for(var d=new mc(this._properties),v=0,x=Object.keys(this._values);v<x.length;v+=1){var A=x[v];d._values[A]=this._values[A].possiblyEvaluate(n,r,s)}return d},zu.prototype.hasTransition=function(){for(var n=0,r=Object.keys(this._values);n<r.length;n+=1)if(this._values[r[n]].prior)return!0;return!1};var ds=function(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)};ds.prototype.getValue=function(n){return Bt(this._values[n].value)},ds.prototype.setValue=function(n,r){this._values[n]=new Yr(this._values[n].property,r===null?void 0:Bt(r))},ds.prototype.serialize=function(){for(var n={},r=0,s=Object.keys(this._values);r<s.length;r+=1){var d=s[r],v=this.getValue(d);v!==void 0&&(n[d]=v)}return n},ds.prototype.possiblyEvaluate=function(n,r,s){for(var d=new mc(this._properties),v=0,x=Object.keys(this._values);v<x.length;v+=1){var A=x[v];d._values[A]=this._values[A].possiblyEvaluate(n,r,s)}return d};var Ro=function(n,r,s){this.property=n,this.value=r,this.parameters=s};Ro.prototype.isConstant=function(){return this.value.kind==="constant"},Ro.prototype.constantOr=function(n){return this.value.kind==="constant"?this.value.value:n},Ro.prototype.evaluate=function(n,r,s,d){return this.property.evaluate(this.value,this.parameters,n,r,s,d)};var mc=function(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)};mc.prototype.get=function(n){return this._values[n]};var yn=function(n){this.specification=n};yn.prototype.possiblyEvaluate=function(n,r){return n.expression.evaluate(r)},yn.prototype.interpolate=function(n,r,s){var d=Jl[this.specification.type];return d?d(n,r,s):n};var hn=function(n,r){this.specification=n,this.overrides=r};hn.prototype.possiblyEvaluate=function(n,r,s,d){return new Ro(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(r,null,{},s,d)}:n.expression,r)},hn.prototype.interpolate=function(n,r,s){if(n.value.kind!=="constant"||r.value.kind!=="constant")return n;if(n.value.value===void 0||r.value.value===void 0)return new Ro(this,{kind:"constant",value:void 0},n.parameters);var d=Jl[this.specification.type];return d?new Ro(this,{kind:"constant",value:d(n.value.value,r.value.value,s)},n.parameters):n},hn.prototype.evaluate=function(n,r,s,d,v,x){return n.kind==="constant"?n.value:n.evaluate(r,s,d,v,x)};var Bu=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(s,d,v,x){if(s.value===void 0)return new Ro(this,{kind:"constant",value:void 0},d);if(s.expression.kind==="constant"){var A=s.expression.evaluate(d,null,{},v,x),T=s.property.specification.type==="resolvedImage"&&typeof A!="string"?A.name:A,D=this._calculate(T,T,T,d);return new Ro(this,{kind:"constant",value:D},d)}if(s.expression.kind==="camera"){var O=this._calculate(s.expression.evaluate({zoom:d.zoom-1}),s.expression.evaluate({zoom:d.zoom}),s.expression.evaluate({zoom:d.zoom+1}),d);return new Ro(this,{kind:"constant",value:O},d)}return new Ro(this,s.expression,d)},r.prototype.evaluate=function(s,d,v,x,A,T){if(s.kind==="source"){var D=s.evaluate(d,v,x,A,T);return this._calculate(D,D,D,d)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(d.zoom)-1},v,x),s.evaluate({zoom:Math.floor(d.zoom)},v,x),s.evaluate({zoom:Math.floor(d.zoom)+1},v,x),d):s.value},r.prototype._calculate=function(s,d,v,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:s,to:d}:{from:v,to:d}},r.prototype.interpolate=function(s){return s},r}(hn),Ho=function(n){this.specification=n};Ho.prototype.possiblyEvaluate=function(n,r,s,d){if(n.value!==void 0){if(n.expression.kind==="constant"){var v=n.expression.evaluate(r,null,{},s,d);return this._calculate(v,v,v,r)}return this._calculate(n.expression.evaluate(new Bn(Math.floor(r.zoom-1),r)),n.expression.evaluate(new Bn(Math.floor(r.zoom),r)),n.expression.evaluate(new Bn(Math.floor(r.zoom+1),r)),r)}},Ho.prototype._calculate=function(n,r,s,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:n,to:r}:{from:s,to:r}},Ho.prototype.interpolate=function(n){return n};var wa=function(n){this.specification=n};wa.prototype.possiblyEvaluate=function(n,r,s,d){return!!n.expression.evaluate(r,null,{},s,d)},wa.prototype.interpolate=function(){return!1};var ta=function(n){for(var r in this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],n){var s=n[r];s.specification.overridable&&this.overridableProperties.push(r);var d=this.defaultPropertyValues[r]=new Yr(s,void 0),v=this.defaultTransitionablePropertyValues[r]=new Ls(s);this.defaultTransitioningPropertyValues[r]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=d.possiblyEvaluate({})}};Ye("DataDrivenProperty",hn),Ye("DataConstantProperty",yn),Ye("CrossFadedDataDrivenProperty",Bu),Ye("CrossFadedProperty",Ho),Ye("ColorRampProperty",wa);var Dl=function(n){function r(s,d){if(n.call(this),this.id=s.id,this.type=s.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},s.type!=="custom"&&(this.metadata=(s=s).metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),d.layout&&(this._unevaluatedLayout=new ds(d.layout)),d.paint)){for(var v in this._transitionablePaint=new Jo(d.paint),s.paint)this.setPaintProperty(v,s.paint[v],{validate:!1});for(var x in s.layout)this.setLayoutProperty(x,s.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new mc(d.paint)}}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},r.prototype.getLayoutProperty=function(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)},r.prototype.setLayoutProperty=function(s,d,v){v===void 0&&(v={}),d!=null&&this._validate(Yi,"layers."+this.id+".layout."+s,s,d,v)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,d):this.visibility=d)},r.prototype.getPaintProperty=function(s){return Ht(s,"-transition")?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)},r.prototype.setPaintProperty=function(s,d,v){if(v===void 0&&(v={}),d!=null&&this._validate(Xc,"layers."+this.id+".paint."+s,s,d,v))return!1;if(Ht(s,"-transition"))return this._transitionablePaint.setTransition(s.slice(0,-11),d||void 0),!1;var x=this._transitionablePaint._values[s],A=x.property.specification["property-type"]==="cross-faded-data-driven",T=x.value.isDataDriven(),D=x.value;this._transitionablePaint.setValue(s,d),this._handleSpecialPaintPropertyUpdate(s);var O=this._transitionablePaint._values[s].value;return O.isDataDriven()||T||A||this._handleOverridablePaintPropertyUpdate(s,D,O)},r.prototype._handleSpecialPaintPropertyUpdate=function(s){},r.prototype._handleOverridablePaintPropertyUpdate=function(s,d,v){return!1},r.prototype.isHidden=function(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"},r.prototype.updateTransitions=function(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)},r.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},r.prototype.recalculate=function(s,d){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,d)},r.prototype.serialize=function(){var s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),Qt(s,function(d,v){return!(d===void 0||v==="layout"&&!Object.keys(d).length||v==="paint"&&!Object.keys(d).length)})},r.prototype._validate=function(s,d,v,x,A){return A===void 0&&(A={}),(!A||A.validate!==!1)&&Ln(this,s.call(Lu,{key:d,layerType:this.type,objectKey:v,value:x,styleSpec:tt,style:{glyphs:!0,sprite:!0}}))},r.prototype.is3D=function(){return!1},r.prototype.isTileClipped=function(){return!1},r.prototype.hasOffscreenPass=function(){return!1},r.prototype.resize=function(){},r.prototype.isStateDependent=function(){for(var s in this.paint._values){var d=this.paint.get(s);if(d instanceof Ro&&Uo(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1},r}(zt),Cp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},wf=function(n,r){this._structArray=n,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},nr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function mo(n,r){r===void 0&&(r=1);var s=0,d=0;return{members:n.map(function(v){var x=Cp[v.type].BYTES_PER_ELEMENT,A=s=Kc(s,Math.max(r,x)),T=v.components||1;return d=Math.max(d,x),s+=x*T,{name:v.name,type:v.type,components:T,offset:A}}),size:Kc(s,Math.max(d,r)),alignment:r}}function Kc(n,r){return Math.ceil(n/r)*r}nr.serialize=function(n,r){return n._trim(),r&&(n.isTransferred=!0,r.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}},nr.deserialize=function(n){var r=Object.create(this.prototype);return r.arrayBuffer=n.arrayBuffer,r.length=n.length,r.capacity=n.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r},nr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},nr.prototype.clear=function(){this.length=0},nr.prototype.resize=function(n){this.reserve(n),this.length=n},nr.prototype.reserve=function(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}},nr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ou=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d){var v=this.length;return this.resize(v+1),this.emplace(v,s,d)},r.prototype.emplace=function(s,d,v){var x=2*s;return this.int16[x+0]=d,this.int16[x+1]=v,s},r}(nr);Ou.prototype.bytesPerElement=4,Ye("StructArrayLayout2i4",Ou);var rt=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x){var A=this.length;return this.resize(A+1),this.emplace(A,s,d,v,x)},r.prototype.emplace=function(s,d,v,x,A){var T=4*s;return this.int16[T+0]=d,this.int16[T+1]=v,this.int16[T+2]=x,this.int16[T+3]=A,s},r}(nr);rt.prototype.bytesPerElement=8,Ye("StructArrayLayout4i8",rt);var Ka=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,T){var D=this.length;return this.resize(D+1),this.emplace(D,s,d,v,x,A,T)},r.prototype.emplace=function(s,d,v,x,A,T,D){var O=6*s;return this.int16[O+0]=d,this.int16[O+1]=v,this.int16[O+2]=x,this.int16[O+3]=A,this.int16[O+4]=T,this.int16[O+5]=D,s},r}(nr);Ka.prototype.bytesPerElement=12,Ye("StructArrayLayout2i4i12",Ka);var la=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,T){var D=this.length;return this.resize(D+1),this.emplace(D,s,d,v,x,A,T)},r.prototype.emplace=function(s,d,v,x,A,T,D){var O=4*s,N=8*s;return this.int16[O+0]=d,this.int16[O+1]=v,this.uint8[N+4]=x,this.uint8[N+5]=A,this.uint8[N+6]=T,this.uint8[N+7]=D,s},r}(nr);la.prototype.bytesPerElement=8,Ye("StructArrayLayout2i4ub8",la);var ua=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d){var v=this.length;return this.resize(v+1),this.emplace(v,s,d)},r.prototype.emplace=function(s,d,v){var x=2*s;return this.float32[x+0]=d,this.float32[x+1]=v,s},r}(nr);ua.prototype.bytesPerElement=8,Ye("StructArrayLayout2f8",ua);var mi=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,T,D,O,N,V){var $=this.length;return this.resize($+1),this.emplace($,s,d,v,x,A,T,D,O,N,V)},r.prototype.emplace=function(s,d,v,x,A,T,D,O,N,V,$){var Q=10*s;return this.uint16[Q+0]=d,this.uint16[Q+1]=v,this.uint16[Q+2]=x,this.uint16[Q+3]=A,this.uint16[Q+4]=T,this.uint16[Q+5]=D,this.uint16[Q+6]=O,this.uint16[Q+7]=N,this.uint16[Q+8]=V,this.uint16[Q+9]=$,s},r}(nr);mi.prototype.bytesPerElement=20,Ye("StructArrayLayout10ui20",mi);var Cf=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,T,D,O,N,V,$,Q){var ct=this.length;return this.resize(ct+1),this.emplace(ct,s,d,v,x,A,T,D,O,N,V,$,Q)},r.prototype.emplace=function(s,d,v,x,A,T,D,O,N,V,$,Q,ct){var mt=12*s;return this.int16[mt+0]=d,this.int16[mt+1]=v,this.int16[mt+2]=x,this.int16[mt+3]=A,this.uint16[mt+4]=T,this.uint16[mt+5]=D,this.uint16[mt+6]=O,this.uint16[mt+7]=N,this.int16[mt+8]=V,this.int16[mt+9]=$,this.int16[mt+10]=Q,this.int16[mt+11]=ct,s},r}(nr);Cf.prototype.bytesPerElement=24,Ye("StructArrayLayout4i4ui4i24",Cf);var Qc=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v){var x=this.length;return this.resize(x+1),this.emplace(x,s,d,v)},r.prototype.emplace=function(s,d,v,x){var A=3*s;return this.float32[A+0]=d,this.float32[A+1]=v,this.float32[A+2]=x,s},r}(nr);Qc.prototype.bytesPerElement=12,Ye("StructArrayLayout3f12",Qc);var Eh=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s){var d=this.length;return this.resize(d+1),this.emplace(d,s)},r.prototype.emplace=function(s,d){return this.uint32[1*s+0]=d,s},r}(nr);Eh.prototype.bytesPerElement=4,Ye("StructArrayLayout1ul4",Eh);var ou=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,T,D,O,N){var V=this.length;return this.resize(V+1),this.emplace(V,s,d,v,x,A,T,D,O,N)},r.prototype.emplace=function(s,d,v,x,A,T,D,O,N,V){var $=10*s,Q=5*s;return this.int16[$+0]=d,this.int16[$+1]=v,this.int16[$+2]=x,this.int16[$+3]=A,this.int16[$+4]=T,this.int16[$+5]=D,this.uint32[Q+3]=O,this.uint16[$+8]=N,this.uint16[$+9]=V,s},r}(nr);ou.prototype.bytesPerElement=20,Ye("StructArrayLayout6i1ul2ui20",ou);var Jc=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,T){var D=this.length;return this.resize(D+1),this.emplace(D,s,d,v,x,A,T)},r.prototype.emplace=function(s,d,v,x,A,T,D){var O=6*s;return this.int16[O+0]=d,this.int16[O+1]=v,this.int16[O+2]=x,this.int16[O+3]=A,this.int16[O+4]=T,this.int16[O+5]=D,s},r}(nr);Jc.prototype.bytesPerElement=12,Ye("StructArrayLayout2i2i2i12",Jc);var gc=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A){var T=this.length;return this.resize(T+1),this.emplace(T,s,d,v,x,A)},r.prototype.emplace=function(s,d,v,x,A,T){var D=4*s,O=8*s;return this.float32[D+0]=d,this.float32[D+1]=v,this.float32[D+2]=x,this.int16[O+6]=A,this.int16[O+7]=T,s},r}(nr);gc.prototype.bytesPerElement=16,Ye("StructArrayLayout2f1f2i16",gc);var Ip=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x){var A=this.length;return this.resize(A+1),this.emplace(A,s,d,v,x)},r.prototype.emplace=function(s,d,v,x,A){var T=12*s,D=3*s;return this.uint8[T+0]=d,this.uint8[T+1]=v,this.float32[D+1]=x,this.float32[D+2]=A,s},r}(nr);Ip.prototype.bytesPerElement=12,Ye("StructArrayLayout2ub2f12",Ip);var Fu=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v){var x=this.length;return this.resize(x+1),this.emplace(x,s,d,v)},r.prototype.emplace=function(s,d,v,x){var A=3*s;return this.uint16[A+0]=d,this.uint16[A+1]=v,this.uint16[A+2]=x,s},r}(nr);Fu.prototype.bytesPerElement=6,Ye("StructArrayLayout3ui6",Fu);var Nu=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,T,D,O,N,V,$,Q,ct,mt,Et,bt,Ut){var $t=this.length;return this.resize($t+1),this.emplace($t,s,d,v,x,A,T,D,O,N,V,$,Q,ct,mt,Et,bt,Ut)},r.prototype.emplace=function(s,d,v,x,A,T,D,O,N,V,$,Q,ct,mt,Et,bt,Ut,$t){var ee=24*s,ie=12*s,fe=48*s;return this.int16[ee+0]=d,this.int16[ee+1]=v,this.uint16[ee+2]=x,this.uint16[ee+3]=A,this.uint32[ie+2]=T,this.uint32[ie+3]=D,this.uint32[ie+4]=O,this.uint16[ee+10]=N,this.uint16[ee+11]=V,this.uint16[ee+12]=$,this.float32[ie+7]=Q,this.float32[ie+8]=ct,this.uint8[fe+36]=mt,this.uint8[fe+37]=Et,this.uint8[fe+38]=bt,this.uint32[ie+10]=Ut,this.int16[ee+22]=$t,s},r}(nr);Nu.prototype.bytesPerElement=48,Ye("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Nu);var Ds=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,T,D,O,N,V,$,Q,ct,mt,Et,bt,Ut,$t,ee,ie,fe,Me,Ne,_n,Ze,Mn,Je,ri){var On=this.length;return this.resize(On+1),this.emplace(On,s,d,v,x,A,T,D,O,N,V,$,Q,ct,mt,Et,bt,Ut,$t,ee,ie,fe,Me,Ne,_n,Ze,Mn,Je,ri)},r.prototype.emplace=function(s,d,v,x,A,T,D,O,N,V,$,Q,ct,mt,Et,bt,Ut,$t,ee,ie,fe,Me,Ne,_n,Ze,Mn,Je,ri,On){var pn=34*s,hi=17*s;return this.int16[pn+0]=d,this.int16[pn+1]=v,this.int16[pn+2]=x,this.int16[pn+3]=A,this.int16[pn+4]=T,this.int16[pn+5]=D,this.int16[pn+6]=O,this.int16[pn+7]=N,this.uint16[pn+8]=V,this.uint16[pn+9]=$,this.uint16[pn+10]=Q,this.uint16[pn+11]=ct,this.uint16[pn+12]=mt,this.uint16[pn+13]=Et,this.uint16[pn+14]=bt,this.uint16[pn+15]=Ut,this.uint16[pn+16]=$t,this.uint16[pn+17]=ee,this.uint16[pn+18]=ie,this.uint16[pn+19]=fe,this.uint16[pn+20]=Me,this.uint16[pn+21]=Ne,this.uint16[pn+22]=_n,this.uint32[hi+12]=Ze,this.float32[hi+13]=Mn,this.float32[hi+14]=Je,this.float32[hi+15]=ri,this.float32[hi+16]=On,s},r}(nr);Ds.prototype.bytesPerElement=68,Ye("StructArrayLayout8i15ui1ul4f68",Ds);var Vu=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s){var d=this.length;return this.resize(d+1),this.emplace(d,s)},r.prototype.emplace=function(s,d){return this.float32[1*s+0]=d,s},r}(nr);Vu.prototype.bytesPerElement=4,Ye("StructArrayLayout1f4",Vu);var Rs=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v){var x=this.length;return this.resize(x+1),this.emplace(x,s,d,v)},r.prototype.emplace=function(s,d,v,x){var A=3*s;return this.int16[A+0]=d,this.int16[A+1]=v,this.int16[A+2]=x,s},r}(nr);Rs.prototype.bytesPerElement=6,Ye("StructArrayLayout3i6",Rs);var Mp=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v){var x=this.length;return this.resize(x+1),this.emplace(x,s,d,v)},r.prototype.emplace=function(s,d,v,x){var A=4*s;return this.uint32[2*s+0]=d,this.uint16[A+2]=v,this.uint16[A+3]=x,s},r}(nr);Mp.prototype.bytesPerElement=8,Ye("StructArrayLayout1ul2ui8",Mp);var Sh=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d){var v=this.length;return this.resize(v+1),this.emplace(v,s,d)},r.prototype.emplace=function(s,d,v){var x=2*s;return this.uint16[x+0]=d,this.uint16[x+1]=v,s},r}(nr);Sh.prototype.bytesPerElement=4,Ye("StructArrayLayout2ui4",Sh);var Ep=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s){var d=this.length;return this.resize(d+1),this.emplace(d,s)},r.prototype.emplace=function(s,d){return this.uint16[1*s+0]=d,s},r}(nr);Ep.prototype.bytesPerElement=2,Ye("StructArrayLayout1ui2",Ep);var zs=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x){var A=this.length;return this.resize(A+1),this.emplace(A,s,d,v,x)},r.prototype.emplace=function(s,d,v,x,A){var T=4*s;return this.float32[T+0]=d,this.float32[T+1]=v,this.float32[T+2]=x,this.float32[T+3]=A,s},r}(nr);zs.prototype.bytesPerElement=16,Ye("StructArrayLayout4f16",zs);var l=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var s={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return s.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},s.x1.get=function(){return this._structArray.int16[this._pos2+2]},s.y1.get=function(){return this._structArray.int16[this._pos2+3]},s.x2.get=function(){return this._structArray.int16[this._pos2+4]},s.y2.get=function(){return this._structArray.int16[this._pos2+5]},s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.anchorPoint.get=function(){return new S(this.anchorPointX,this.anchorPointY)},Object.defineProperties(r.prototype,s),r}(wf);l.prototype.size=20;var h=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.get=function(s){return new l(this,s)},r}(ou);Ye("CollisionBoxArray",h);var c=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},s.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},s.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},s.segment.get=function(){return this._structArray.uint16[this._pos2+10]},s.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},s.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},s.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},s.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},s.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},s.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},s.placedOrientation.set=function(d){this._structArray.uint8[this._pos1+37]=d},s.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},s.hidden.set=function(d){this._structArray.uint8[this._pos1+38]=d},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},s.crossTileID.set=function(d){this._structArray.uint32[this._pos4+10]=d},s.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(r.prototype,s),r}(wf);c.prototype.size=48;var m=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.get=function(s){return new c(this,s)},r}(Nu);Ye("PlacedSymbolArray",m);var b=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},s.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},s.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},s.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},s.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},s.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},s.key.get=function(){return this._structArray.uint16[this._pos2+8]},s.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},s.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},s.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},s.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},s.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},s.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},s.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},s.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},s.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},s.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},s.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},s.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},s.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},s.crossTileID.set=function(d){this._structArray.uint32[this._pos4+12]=d},s.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},s.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},s.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},s.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(r.prototype,s),r}(wf);b.prototype.size=68;var w=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.get=function(s){return new b(this,s)},r}(Ds);Ye("SymbolInstanceArray",w);var E=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getoffsetX=function(s){return this.float32[1*s+0]},r}(Vu);Ye("GlyphOffsetArray",E);var L=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getx=function(s){return this.int16[3*s+0]},r.prototype.gety=function(s){return this.int16[3*s+1]},r.prototype.gettileUnitDistanceFromAnchor=function(s){return this.int16[3*s+2]},r}(Rs);Ye("SymbolLineVertexArray",L);var F=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var s={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(r.prototype,s),r}(wf);F.prototype.size=8;var H=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.get=function(s){return new F(this,s)},r}(Mp);Ye("FeatureIndexArray",H);var et=mo([{name:"a_pos",components:2,type:"Int16"}],4).members,it=function(n){n===void 0&&(n=[]),this.segments=n};function ot(n,r){return 256*(n=X(Math.floor(n),0,255))+X(Math.floor(r),0,255)}it.prototype.prepareSegment=function(n,r,s,d){var v=this.segments[this.segments.length-1];return n>it.MAX_VERTEX_ARRAY_LENGTH&&Ot("Max vertices per segment is "+it.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+n),(!v||v.vertexLength+n>it.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==d)&&(v={vertexOffset:r.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},d!==void 0&&(v.sortKey=d),this.segments.push(v)),v},it.prototype.get=function(){return this.segments},it.prototype.destroy=function(){for(var n=0,r=this.segments;n<r.length;n+=1){var s=r[n];for(var d in s.vaos)s.vaos[d].destroy()}},it.simpleSegment=function(n,r,s,d){return new it([{vertexOffset:n,primitiveOffset:r,vertexLength:s,primitiveLength:d,vaos:{},sortKey:0}])},it.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ye("SegmentVector",it);var yt=mo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),dt=y(function(n){n.exports=function(r,s){var d,v,x,A,T,D,O,N;for(v=r.length-(d=3&r.length),x=s,T=3432918353,D=461845907,N=0;N<v;)O=255&r.charCodeAt(N)|(255&r.charCodeAt(++N))<<8|(255&r.charCodeAt(++N))<<16|(255&r.charCodeAt(++N))<<24,++N,x=27492+(65535&(A=5*(65535&(x=(x^=O=(65535&(O=(O=(65535&O)*T+(((O>>>16)*T&65535)<<16)&4294967295)<<15|O>>>17))*D+(((O>>>16)*D&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(A>>>16)&65535)<<16);switch(O=0,d){case 3:O^=(255&r.charCodeAt(N+2))<<16;case 2:O^=(255&r.charCodeAt(N+1))<<8;case 1:x^=O=(65535&(O=(O=(65535&(O^=255&r.charCodeAt(N)))*T+(((O>>>16)*T&65535)<<16)&4294967295)<<15|O>>>17))*D+(((O>>>16)*D&65535)<<16)&4294967295}return x^=r.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}}),Ct=y(function(n){n.exports=function(r,s){for(var d,v=r.length,x=s^v,A=0;v>=4;)d=1540483477*(65535&(d=255&r.charCodeAt(A)|(255&r.charCodeAt(++A))<<8|(255&r.charCodeAt(++A))<<16|(255&r.charCodeAt(++A))<<24))+((1540483477*(d>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),v-=4,++A;switch(v){case 3:x^=(255&r.charCodeAt(A+2))<<16;case 2:x^=(255&r.charCodeAt(A+1))<<8;case 1:x=1540483477*(65535&(x^=255&r.charCodeAt(A)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}}),ht=dt,It=Ct;ht.murmur3=dt,ht.murmur2=It;var Rt=function(){this.ids=[],this.positions=[],this.indexed=!1};Rt.prototype.add=function(n,r,s,d){this.ids.push(re(n)),this.positions.push(r,s,d)},Rt.prototype.getPositions=function(n){for(var r=re(n),s=0,d=this.ids.length-1;s<d;){var v=s+d>>1;this.ids[v]>=r?d=v:s=v+1}for(var x=[];this.ids[s]===r;)x.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return x},Rt.serialize=function(n,r){var s=new Float64Array(n.ids),d=new Uint32Array(n.positions);return function v(x,A,T,D){for(;T<D;){for(var O=x[T+D>>1],N=T-1,V=D+1;;){do N++;while(x[N]<O);do V--;while(x[V]>O);if(N>=V)break;ne(x,N,V),ne(A,3*N,3*V),ne(A,3*N+1,3*V+1),ne(A,3*N+2,3*V+2)}V-T<D-V?(v(x,A,T,V),T=V+1):(v(x,A,V+1,D),D=V)}}(s,d,0,s.length-1),r&&r.push(s.buffer,d.buffer),{ids:s,positions:d}},Rt.deserialize=function(n){var r=new Rt;return r.ids=n.ids,r.positions=n.positions,r.indexed=!0,r};var qt=Math.pow(2,53)-1;function re(n){var r=+n;return!isNaN(r)&&r<=qt?r:ht(String(n))}function ne(n,r,s){var d=n[r];n[r]=n[s],n[s]=d}Ye("FeaturePositionMap",Rt);var ae=function(n,r){this.gl=n.gl,this.location=r},ve=function(n){function r(s,d){n.call(this,s,d),this.current=0}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))},r}(ae),Ce=function(n){function r(s,d){n.call(this,s,d),this.current=0}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))},r}(ae),Le=function(n){function r(s,d){n.call(this,s,d),this.current=[0,0]}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))},r}(ae),We=function(n){function r(s,d){n.call(this,s,d),this.current=[0,0,0]}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))},r}(ae),fn=function(n){function r(s,d){n.call(this,s,d),this.current=[0,0,0,0]}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))},r}(ae),Tn=function(n){function r(s,d){n.call(this,s,d),this.current=ai.transparent}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))},r}(ae),En=new Float32Array(16),Oi=function(n){function r(s,d){n.call(this,s,d),this.current=En}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(var d=1;d<16;d++)if(s[d]!==this.current[d]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}},r}(ae);function tn(n){return[ot(255*n.r,255*n.g),ot(255*n.b,255*n.a)]}var Dn=function(n,r,s){this.value=n,this.uniformNames=r.map(function(d){return"u_"+d}),this.type=s};Dn.prototype.setUniform=function(n,r,s){n.set(s.constantOr(this.value))},Dn.prototype.getBinding=function(n,r,s){return this.type==="color"?new Tn(n,r):new Ce(n,r)};var ei=function(n,r){this.uniformNames=r.map(function(s){return"u_"+s}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ei.prototype.setConstantPatternPositions=function(n,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=n.tlbr},ei.prototype.setUniform=function(n,r,s,d){var v=d==="u_pattern_to"?this.patternTo:d==="u_pattern_from"?this.patternFrom:d==="u_pixel_ratio_to"?this.pixelRatioTo:d==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)},ei.prototype.getBinding=function(n,r,s){return s.substr(0,9)==="u_pattern"?new fn(n,r):new Ce(n,r)};var Gn=function(n,r,s,d){this.expression=n,this.type=s,this.maxValue=0,this.paintVertexAttributes=r.map(function(v){return{name:"a_"+v,type:"Float32",components:s==="color"?2:1,offset:0}}),this.paintVertexArray=new d};Gn.prototype.populatePaintArray=function(n,r,s,d,v){var x=this.paintVertexArray.length,A=this.expression.evaluate(new Bn(0),r,{},d,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,A)},Gn.prototype.updatePaintArray=function(n,r,s,d){var v=this.expression.evaluate({zoom:0},s,d);this._setPaintValue(n,r,v)},Gn.prototype._setPaintValue=function(n,r,s){if(this.type==="color")for(var d=tn(s),v=n;v<r;v++)this.paintVertexArray.emplace(v,d[0],d[1]);else{for(var x=n;x<r;x++)this.paintVertexArray.emplace(x,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}},Gn.prototype.upload=function(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Gn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Nn=function(n,r,s,d,v,x){this.expression=n,this.uniformNames=r.map(function(A){return"u_"+A+"_t"}),this.type=s,this.useIntegerZoom=d,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=r.map(function(A){return{name:"a_"+A,type:"Float32",components:s==="color"?4:2,offset:0}}),this.paintVertexArray=new x};Nn.prototype.populatePaintArray=function(n,r,s,d,v){var x=this.expression.evaluate(new Bn(this.zoom),r,{},d,[],v),A=this.expression.evaluate(new Bn(this.zoom+1),r,{},d,[],v),T=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(T,n,x,A)},Nn.prototype.updatePaintArray=function(n,r,s,d){var v=this.expression.evaluate({zoom:this.zoom},s,d),x=this.expression.evaluate({zoom:this.zoom+1},s,d);this._setPaintValue(n,r,v,x)},Nn.prototype._setPaintValue=function(n,r,s,d){if(this.type==="color")for(var v=tn(s),x=tn(d),A=n;A<r;A++)this.paintVertexArray.emplace(A,v[0],v[1],x[0],x[1]);else{for(var T=n;T<r;T++)this.paintVertexArray.emplace(T,s,d);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(d))}},Nn.prototype.upload=function(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Nn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Nn.prototype.setUniform=function(n,r){var s=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,d=X(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);n.set(d)},Nn.prototype.getBinding=function(n,r,s){return new Ce(n,r)};var ni=function(n,r,s,d,v,x){this.expression=n,this.type=r,this.useIntegerZoom=s,this.zoom=d,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v};ni.prototype.populatePaintArray=function(n,r,s){var d=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(d,n,r.patterns&&r.patterns[this.layerId],s)},ni.prototype.updatePaintArray=function(n,r,s,d,v){this._setPaintValues(n,r,s.patterns&&s.patterns[this.layerId],v)},ni.prototype._setPaintValues=function(n,r,s,d){if(d&&s){var v=d[s.min],x=d[s.mid],A=d[s.max];if(v&&x&&A)for(var T=n;T<r;T++)this.zoomInPaintVertexArray.emplace(T,x.tl[0],x.tl[1],x.br[0],x.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],x.pixelRatio,v.pixelRatio),this.zoomOutPaintVertexArray.emplace(T,x.tl[0],x.tl[1],x.br[0],x.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],x.pixelRatio,A.pixelRatio)}},ni.prototype.upload=function(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,yt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,yt.members,this.expression.isStateDependent))},ni.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Vn=function(n,r,s){this.binders={},this._buffers=[];var d=[];for(var v in n.paint._values)if(s(v)){var x=n.paint.get(v);if(x instanceof Ro&&Uo(x.property.specification)){var A=go(v,n.type),T=x.value,D=x.property.specification.type,O=x.property.useIntegerZoom,N=x.property.specification["property-type"],V=N==="cross-faded"||N==="cross-faded-data-driven";if(T.kind==="constant")this.binders[v]=V?new ei(T.value,A):new Dn(T.value,A,D),d.push("/u_"+v);else if(T.kind==="source"||V){var $=Xr(v,D,"source");this.binders[v]=V?new ni(T,D,O,r,$,n.id):new Gn(T,A,D,$),d.push("/a_"+v)}else{var Q=Xr(v,D,"composite");this.binders[v]=new Nn(T,A,D,O,r,Q),d.push("/z_"+v)}}}this.cacheKey=d.sort().join("")};Vn.prototype.getMaxValue=function(n){var r=this.binders[n];return r instanceof Gn||r instanceof Nn?r.maxValue:0},Vn.prototype.populatePaintArrays=function(n,r,s,d,v){for(var x in this.binders){var A=this.binders[x];(A instanceof Gn||A instanceof Nn||A instanceof ni)&&A.populatePaintArray(n,r,s,d,v)}},Vn.prototype.setConstantPatternPositions=function(n,r){for(var s in this.binders){var d=this.binders[s];d instanceof ei&&d.setConstantPatternPositions(n,r)}},Vn.prototype.updatePaintArrays=function(n,r,s,d,v){var x=!1;for(var A in n)for(var T=0,D=r.getPositions(A);T<D.length;T+=1){var O=D[T],N=s.feature(O.index);for(var V in this.binders){var $=this.binders[V];if(($ instanceof Gn||$ instanceof Nn||$ instanceof ni)&&$.expression.isStateDependent===!0){var Q=d.paint.get(V);$.expression=Q.value,$.updatePaintArray(O.start,O.end,N,n[A],v),x=!0}}}return x},Vn.prototype.defines=function(){var n=[];for(var r in this.binders){var s=this.binders[r];(s instanceof Dn||s instanceof ei)&&n.push.apply(n,s.uniformNames.map(function(d){return"#define HAS_UNIFORM_"+d}))}return n},Vn.prototype.getBinderAttributes=function(){var n=[];for(var r in this.binders){var s=this.binders[r];if(s instanceof Gn||s instanceof Nn)for(var d=0;d<s.paintVertexAttributes.length;d++)n.push(s.paintVertexAttributes[d].name);else if(s instanceof ni)for(var v=0;v<yt.members.length;v++)n.push(yt.members[v].name)}return n},Vn.prototype.getBinderUniforms=function(){var n=[];for(var r in this.binders){var s=this.binders[r];if(s instanceof Dn||s instanceof ei||s instanceof Nn)for(var d=0,v=s.uniformNames;d<v.length;d+=1)n.push(v[d])}return n},Vn.prototype.getPaintVertexBuffers=function(){return this._buffers},Vn.prototype.getUniforms=function(n,r){var s=[];for(var d in this.binders){var v=this.binders[d];if(v instanceof Dn||v instanceof ei||v instanceof Nn)for(var x=0,A=v.uniformNames;x<A.length;x+=1){var T=A[x];if(r[T]){var D=v.getBinding(n,r[T],T);s.push({name:T,property:d,binding:D})}}}return s},Vn.prototype.setUniforms=function(n,r,s,d){for(var v=0,x=r;v<x.length;v+=1){var A=x[v],T=A.name,D=A.property;this.binders[D].setUniform(A.binding,d,s.get(D),T)}},Vn.prototype.updatePaintBuffers=function(n){for(var r in this._buffers=[],this.binders){var s=this.binders[r];if(n&&s instanceof ni){var d=n.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;d&&this._buffers.push(d)}else(s instanceof Gn||s instanceof Nn)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}},Vn.prototype.upload=function(n){for(var r in this.binders){var s=this.binders[r];(s instanceof Gn||s instanceof Nn||s instanceof ni)&&s.upload(n)}this.updatePaintBuffers()},Vn.prototype.destroy=function(){for(var n in this.binders){var r=this.binders[n];(r instanceof Gn||r instanceof Nn||r instanceof ni)&&r.destroy()}};var gn=function(n,r,s){s===void 0&&(s=function(){return!0}),this.programConfigurations={};for(var d=0,v=n;d<v.length;d+=1){var x=v[d];this.programConfigurations[x.id]=new Vn(x,r,s)}this.needsUpload=!1,this._featureMap=new Rt,this._bufferOffset=0};function go(n,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[n]||[n.replace(r+"-","").replace(/-/g,"_")]}function Xr(n,r,s){var d={color:{source:ua,composite:zs},number:{source:Vu,composite:ua}},v=function(x){return{"line-pattern":{source:mi,composite:mi},"fill-pattern":{source:mi,composite:mi},"fill-extrusion-pattern":{source:mi,composite:mi}}[x]}(n);return v&&v[s]||d[r][s]}gn.prototype.populatePaintArrays=function(n,r,s,d,v,x){for(var A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(n,r,d,v,x);r.id!==void 0&&this._featureMap.add(r.id,s,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0},gn.prototype.updatePaintArrays=function(n,r,s,d){for(var v=0,x=s;v<x.length;v+=1){var A=x[v];this.needsUpload=this.programConfigurations[A.id].updatePaintArrays(n,this._featureMap,r,A,d)||this.needsUpload}},gn.prototype.get=function(n){return this.programConfigurations[n]},gn.prototype.upload=function(n){if(this.needsUpload){for(var r in this.programConfigurations)this.programConfigurations[r].upload(n);this.needsUpload=!1}},gn.prototype.destroy=function(){for(var n in this.programConfigurations)this.programConfigurations[n].destroy()},Ye("ConstantBinder",Dn),Ye("CrossFadedConstantBinder",ei),Ye("SourceExpressionBinder",Gn),Ye("CrossFadedCompositeBinder",ni),Ye("CompositeExpressionBinder",Nn),Ye("ProgramConfiguration",Vn,{omit:["_buffers"]}),Ye("ProgramConfigurationSet",gn);var Ur=Math.pow(2,14)-1,Co=-Ur-1;function Ir(n){for(var r=8192/n.extent,s=n.loadGeometry(),d=0;d<s.length;d++)for(var v=s[d],x=0;x<v.length;x++){var A=v[x],T=Math.round(A.x*r),D=Math.round(A.y*r);A.x=X(T,Co,Ur),A.y=X(D,Co,Ur),(T<A.x||T>A.x+1||D<A.y||D>A.y+1)&&Ot("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}function _r(n,r){return{type:n.type,id:n.id,properties:n.properties,geometry:r?Ir(n):[]}}function Na(n,r,s,d,v){n.emplaceBack(2*r+(d+1)/2,2*s+(v+1)/2)}var gr=function(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ou,this.indexArray=new Fu,this.segments=new it,this.programConfigurations=new gn(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function Rl(n,r){for(var s=0;s<n.length;s++)if(zl(r,n[s]))return!0;for(var d=0;d<r.length;d++)if(zl(n,r[d]))return!0;return!!vc(n,r)}function Va(n,r,s){return!!zl(n,r)||!!Os(r,n,s)}function al(n,r){if(n.length===1)return Th(r,n[0]);for(var s=0;s<r.length;s++)for(var d=r[s],v=0;v<d.length;v++)if(zl(n,d[v]))return!0;for(var x=0;x<n.length;x++)if(Th(r,n[x]))return!0;for(var A=0;A<r.length;A++)if(vc(n,r[A]))return!0;return!1}function Bs(n,r,s){if(n.length>1){if(vc(n,r))return!0;for(var d=0;d<r.length;d++)if(Os(r[d],n,s))return!0}for(var v=0;v<n.length;v++)if(Os(n[v],r,s))return!0;return!1}function vc(n,r){if(n.length===0||r.length===0)return!1;for(var s=0;s<n.length-1;s++)for(var d=n[s],v=n[s+1],x=0;x<r.length-1;x++)if(th(d,v,r[x],r[x+1]))return!0;return!1}function th(n,r,s,d){return de(n,s,d)!==de(r,s,d)&&de(n,r,s)!==de(n,r,d)}function Os(n,r,s){var d=s*s;if(r.length===1)return n.distSqr(r[0])<d;for(var v=1;v<r.length;v++)if(yc(n,r[v-1],r[v])<d)return!0;return!1}function yc(n,r,s){var d=r.distSqr(s);if(d===0)return n.distSqr(r);var v=((n.x-r.x)*(s.x-r.x)+(n.y-r.y)*(s.y-r.y))/d;return n.distSqr(v<0?r:v>1?s:s.sub(r)._mult(v)._add(r))}function Th(n,r){for(var s,d,v,x=!1,A=0;A<n.length;A++)for(var T=0,D=(s=n[A]).length-1;T<s.length;D=T++)(d=s[T]).y>r.y!=(v=s[D]).y>r.y&&r.x<(v.x-d.x)*(r.y-d.y)/(v.y-d.y)+d.x&&(x=!x);return x}function zl(n,r){for(var s=!1,d=0,v=n.length-1;d<n.length;v=d++){var x=n[d],A=n[v];x.y>r.y!=A.y>r.y&&r.x<(A.x-x.x)*(r.y-x.y)/(A.y-x.y)+x.x&&(s=!s)}return s}function au(n,r,s){var d=s[0],v=s[2];if(n.x<d.x&&r.x<d.x||n.x>v.x&&r.x>v.x||n.y<d.y&&r.y<d.y||n.y>v.y&&r.y>v.y)return!1;var x=de(n,r,s[0]);return x!==de(n,r,s[1])||x!==de(n,r,s[2])||x!==de(n,r,s[3])}function Bl(n,r,s){var d=r.paint.get(n).value;return d.kind==="constant"?d.value:s.programConfigurations.get(r.id).getMaxValue(n)}function zo(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function sl(n,r,s,d,v){if(!r[0]&&!r[1])return n;var x=S.convert(r)._mult(v);s==="viewport"&&x._rotate(-d);for(var A=[],T=0;T<n.length;T++)A.push(n[T].sub(x));return A}gr.prototype.populate=function(n,r,s){var d=this.layers[0],v=[],x=null;d.type==="circle"&&(x=d.layout.get("circle-sort-key"));for(var A=0,T=n;A<T.length;A+=1){var D=T[A],O=D.feature,N=D.id,V=D.index,$=D.sourceLayerIndex,Q=this.layers[0]._featureFilter.needGeometry,ct=_r(O,Q);if(this.layers[0]._featureFilter.filter(new Bn(this.zoom),ct,s)){var mt=x?x.evaluate(ct,{},s):void 0,Et={id:N,properties:O.properties,type:O.type,sourceLayerIndex:$,index:V,geometry:Q?ct.geometry:Ir(O),patterns:{},sortKey:mt};v.push(Et)}}x&&v.sort(function(Ne,_n){return Ne.sortKey-_n.sortKey});for(var bt=0,Ut=v;bt<Ut.length;bt+=1){var $t=Ut[bt],ee=$t.geometry,ie=$t.index,fe=$t.sourceLayerIndex,Me=n[ie].feature;this.addFeature($t,ee,ie,s),r.featureIndex.insert(Me,ee,ie,fe,this.index)}},gr.prototype.update=function(n,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,r,this.stateDependentLayers,s)},gr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},gr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},gr.prototype.upload=function(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,et),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0},gr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},gr.prototype.addFeature=function(n,r,s,d){for(var v=0,x=r;v<x.length;v+=1)for(var A=0,T=x[v];A<T.length;A+=1){var D=T[A],O=D.x,N=D.y;if(!(O<0||O>=8192||N<0||N>=8192)){var V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),$=V.vertexLength;Na(this.layoutVertexArray,O,N,-1,-1),Na(this.layoutVertexArray,O,N,1,-1),Na(this.layoutVertexArray,O,N,1,1),Na(this.layoutVertexArray,O,N,-1,1),this.indexArray.emplaceBack($,$+1,$+2),this.indexArray.emplaceBack($,$+3,$+2),V.vertexLength+=4,V.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,s,{},d)},Ye("CircleBucket",gr,{omit:["layers"]});var su=new ta({"circle-sort-key":new hn(tt.layout_circle["circle-sort-key"])}),_c={paint:new ta({"circle-radius":new hn(tt.paint_circle["circle-radius"]),"circle-color":new hn(tt.paint_circle["circle-color"]),"circle-blur":new hn(tt.paint_circle["circle-blur"]),"circle-opacity":new hn(tt.paint_circle["circle-opacity"]),"circle-translate":new yn(tt.paint_circle["circle-translate"]),"circle-translate-anchor":new yn(tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yn(tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yn(tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new hn(tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new hn(tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new hn(tt.paint_circle["circle-stroke-opacity"])}),layout:su},Xi=typeof Float32Array<"u"?Float32Array:Array;function ms(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Ca(n,r,s){var d=r[0],v=r[1],x=r[2],A=r[3],T=r[4],D=r[5],O=r[6],N=r[7],V=r[8],$=r[9],Q=r[10],ct=r[11],mt=r[12],Et=r[13],bt=r[14],Ut=r[15],$t=s[0],ee=s[1],ie=s[2],fe=s[3];return n[0]=$t*d+ee*T+ie*V+fe*mt,n[1]=$t*v+ee*D+ie*$+fe*Et,n[2]=$t*x+ee*O+ie*Q+fe*bt,n[3]=$t*A+ee*N+ie*ct+fe*Ut,n[4]=($t=s[4])*d+(ee=s[5])*T+(ie=s[6])*V+(fe=s[7])*mt,n[5]=$t*v+ee*D+ie*$+fe*Et,n[6]=$t*x+ee*O+ie*Q+fe*bt,n[7]=$t*A+ee*N+ie*ct+fe*Ut,n[8]=($t=s[8])*d+(ee=s[9])*T+(ie=s[10])*V+(fe=s[11])*mt,n[9]=$t*v+ee*D+ie*$+fe*Et,n[10]=$t*x+ee*O+ie*Q+fe*bt,n[11]=$t*A+ee*N+ie*ct+fe*Ut,n[12]=($t=s[12])*d+(ee=s[13])*T+(ie=s[14])*V+(fe=s[15])*mt,n[13]=$t*v+ee*D+ie*$+fe*Et,n[14]=$t*x+ee*O+ie*Q+fe*bt,n[15]=$t*A+ee*N+ie*ct+fe*Ut,n}Math.hypot||(Math.hypot=function(){for(var n=arguments,r=0,s=arguments.length;s--;)r+=n[s]*n[s];return Math.sqrt(r)});var lu,Jm=Ca;function eh(n,r,s){var d=r[0],v=r[1],x=r[2],A=r[3];return n[0]=s[0]*d+s[4]*v+s[8]*x+s[12]*A,n[1]=s[1]*d+s[5]*v+s[9]*x+s[13]*A,n[2]=s[2]*d+s[6]*v+s[10]*x+s[14]*A,n[3]=s[3]*d+s[7]*v+s[11]*x+s[15]*A,n}lu=new Xi(3),Xi!=Float32Array&&(lu[0]=0,lu[1]=0,lu[2]=0),function(){var n=new Xi(4);Xi!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var Cd=(function(){var n=new Xi(2);Xi!=Float32Array&&(n[0]=0,n[1]=0)}(),function(n){function r(s){n.call(this,s,_c)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.createBucket=function(s){return new gr(s)},r.prototype.queryRadius=function(s){var d=s;return Bl("circle-radius",this,d)+Bl("circle-stroke-width",this,d)+zo(this.paint.get("circle-translate"))},r.prototype.queryIntersectsFeature=function(s,d,v,x,A,T,D,O){for(var N=sl(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,D),V=this.paint.get("circle-radius").evaluate(d,v)+this.paint.get("circle-stroke-width").evaluate(d,v),$=this.paint.get("circle-pitch-alignment")==="map",Q=$?N:function(Me,Ne){return Me.map(function(_n){return nh(_n,Ne)})}(N,O),ct=$?V*D:V,mt=0,Et=x;mt<Et.length;mt+=1)for(var bt=0,Ut=Et[mt];bt<Ut.length;bt+=1){var $t=Ut[bt],ee=$?$t:nh($t,O),ie=ct,fe=eh([],[$t.x,$t.y,0,1],O);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ie*=fe[3]/T.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ie*=T.cameraToCenterDistance/fe[3]),Va(Q,ee,ie))return!0}return!1},r}(Dl));function nh(n,r){var s=eh([],[n.x,n.y,0,1],r);return new S(s[0]/s[3],s[1]/s[3])}var Sp=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r}(gr);function uu(n,r,s,d){var v=r.width,x=r.height;if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==v*x*s)throw new RangeError("mismatched image size")}else d=new Uint8Array(v*x*s);return n.width=v,n.height=x,n.data=d,n}function If(n,r,s){var d=r.width,v=r.height;if(d!==n.width||v!==n.height){var x=uu({},{width:d,height:v},s);Id(n,x,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,d),height:Math.min(n.height,v)},s),n.width=d,n.height=v,n.data=x.data}}function Id(n,r,s,d,v,x){if(v.width===0||v.height===0)return r;if(v.width>n.width||v.height>n.height||s.x>n.width-v.width||s.y>n.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>r.width||v.height>r.height||d.x>r.width-v.width||d.y>r.height-v.height)throw new RangeError("out of range destination coordinates for image copy");for(var A=n.data,T=r.data,D=0;D<v.height;D++)for(var O=((s.y+D)*n.width+s.x)*x,N=((d.y+D)*r.width+d.x)*x,V=0;V<v.width*x;V++)T[N+V]=A[O+V];return r}Ye("HeatmapBucket",Sp,{omit:["layers"]});var ih=function(n,r){uu(this,n,1,r)};ih.prototype.resize=function(n){If(this,n,1)},ih.prototype.clone=function(){return new ih({width:this.width,height:this.height},new Uint8Array(this.data))},ih.copy=function(n,r,s,d,v){Id(n,r,s,d,v,1)};var Qa=function(n,r){uu(this,n,4,r)};Qa.prototype.resize=function(n){If(this,n,4)},Qa.prototype.replace=function(n,r){r?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n},Qa.prototype.clone=function(){return new Qa({width:this.width,height:this.height},new Uint8Array(this.data))},Qa.copy=function(n,r,s,d,v){Id(n,r,s,d,v,4)},Ye("AlphaImage",ih),Ye("RGBAImage",Qa);var Kv={paint:new ta({"heatmap-radius":new hn(tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new hn(tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yn(tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wa(tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yn(tt.paint_heatmap["heatmap-opacity"])})};function Qv(n){var r={},s=n.resolution||256,d=n.clips?n.clips.length:1,v=n.image||new Qa({width:s,height:d}),x=function(ct,mt,Et){r[n.evaluationKey]=Et;var bt=n.expression.evaluate(r);v.data[ct+mt+0]=Math.floor(255*bt.r/bt.a),v.data[ct+mt+1]=Math.floor(255*bt.g/bt.a),v.data[ct+mt+2]=Math.floor(255*bt.b/bt.a),v.data[ct+mt+3]=Math.floor(255*bt.a)};if(n.clips)for(var A=0,T=0;A<d;++A,T+=4*s)for(var D=0,O=0;D<s;D++,O+=4){var N=D/(s-1),V=n.clips[A];x(T,O,V.start*(1-N)+V.end*N)}else for(var $=0,Q=0;$<s;$++,Q+=4)x(0,Q,$/(s-1));return v}var tg=function(n){function r(s){n.call(this,s,Kv),this._updateColorRamp()}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.createBucket=function(s){return new Sp(s)},r.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="heatmap-color"&&this._updateColorRamp()},r.prototype._updateColorRamp=function(){this.colorRamp=Qv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},r.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},r}(Dl),Jv={paint:new ta({"hillshade-illumination-direction":new yn(tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yn(tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yn(tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yn(tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yn(tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yn(tt.paint_hillshade["hillshade-accent-color"])})},eg=function(n){function r(s){n.call(this,s,Jv)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},r}(Dl),n1=mo([{name:"a_pos",components:2,type:"Int16"}],4).members,Tp=Md,qi=Md;function Md(n,r,s){s=s||2;var d,v,x,A,T,D,O,N=r&&r.length,V=N?r[0]*s:n.length,$=ty(n,0,V,s,!0),Q=[];if(!$||$.next===$.prev)return Q;if(N&&($=function(mt,Et,bt,Ut){var $t,ee,ie,fe=[];for($t=0,ee=Et.length;$t<ee;$t++)(ie=ty(mt,Et[$t]*Ut,$t<ee-1?Et[$t+1]*Ut:mt.length,Ut,!1))===ie.next&&(ie.steiner=!0),fe.push(ll(ie));for(fe.sort(Ed),$t=0;$t<fe.length;$t++)ng(fe[$t],bt),bt=Ol(bt,bt.next);return bt}(n,r,$,s)),n.length>80*s){d=x=n[0],v=A=n[1];for(var ct=s;ct<V;ct+=s)(T=n[ct])<d&&(d=T),(D=n[ct+1])<v&&(v=D),T>x&&(x=T),D>A&&(A=D);O=(O=Math.max(x-d,A-v))!==0?1/O:0}return Mf($,Q,s,d,v,O),Q}function ty(n,r,s,d,v){var x,A;if(v===kd(n,r,s,d)>0)for(x=r;x<s;x+=d)A=xc(x,n[x],n[x+1],A);else for(x=s-d;x>=r;x-=d)A=xc(x,n[x],n[x+1],A);return A&&kh(A,A.next)&&(Pp(A),A=A.next),A}function Ol(n,r){if(!n)return n;r||(r=n);var s,d=n;do if(s=!1,d.steiner||!kh(d,d.next)&&vo(d.prev,d,d.next)!==0)d=d.next;else{if(Pp(d),(d=r=d.prev)===d.next)break;s=!0}while(s||d!==r);return r}function Mf(n,r,s,d,v,x,A){if(n){!A&&x&&function(N,V,$,Q){var ct=N;do ct.z===null&&(ct.z=Sd(ct.x,ct.y,V,$,Q)),ct.prevZ=ct.prev,ct.nextZ=ct.next,ct=ct.next;while(ct!==N);ct.prevZ.nextZ=null,ct.prevZ=null,function(mt){var Et,bt,Ut,$t,ee,ie,fe,Me,Ne=1;do{for(bt=mt,mt=null,ee=null,ie=0;bt;){for(ie++,Ut=bt,fe=0,Et=0;Et<Ne&&(fe++,Ut=Ut.nextZ);Et++);for(Me=Ne;fe>0||Me>0&&Ut;)fe!==0&&(Me===0||!Ut||bt.z<=Ut.z)?($t=bt,bt=bt.nextZ,fe--):($t=Ut,Ut=Ut.nextZ,Me--),ee?ee.nextZ=$t:mt=$t,$t.prevZ=ee,ee=$t;bt=Ut}ee.nextZ=null,Ne*=2}while(ie>1)}(ct)}(n,d,v,x);for(var T,D,O=n;n.prev!==n.next;)if(T=n.prev,D=n.next,x?r1(n,d,v,x):i1(n))r.push(T.i/s),r.push(n.i/s),r.push(D.i/s),Pp(n),n=D.next,O=D.next;else if((n=D)===O){A?A===1?Mf(n=Fl(Ol(n),r,s),r,s,d,v,x,2):A===2&&o1(n,r,s,d,v,x):Mf(Ol(n),r,s,d,v,x,1);break}}}function i1(n){var r=n.prev,s=n,d=n.next;if(vo(r,s,d)>=0)return!1;for(var v=n.next.next;v!==n.prev;){if(ul(r.x,r.y,s.x,s.y,d.x,d.y,v.x,v.y)&&vo(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function r1(n,r,s,d){var v=n.prev,x=n,A=n.next;if(vo(v,x,A)>=0)return!1;for(var T=v.x>x.x?v.x>A.x?v.x:A.x:x.x>A.x?x.x:A.x,D=v.y>x.y?v.y>A.y?v.y:A.y:x.y>A.y?x.y:A.y,O=Sd(v.x<x.x?v.x<A.x?v.x:A.x:x.x<A.x?x.x:A.x,v.y<x.y?v.y<A.y?v.y:A.y:x.y<A.y?x.y:A.y,r,s,d),N=Sd(T,D,r,s,d),V=n.prevZ,$=n.nextZ;V&&V.z>=O&&$&&$.z<=N;){if(V!==n.prev&&V!==n.next&&ul(v.x,v.y,x.x,x.y,A.x,A.y,V.x,V.y)&&vo(V.prev,V,V.next)>=0||(V=V.prevZ,$!==n.prev&&$!==n.next&&ul(v.x,v.y,x.x,x.y,A.x,A.y,$.x,$.y)&&vo($.prev,$,$.next)>=0))return!1;$=$.nextZ}for(;V&&V.z>=O;){if(V!==n.prev&&V!==n.next&&ul(v.x,v.y,x.x,x.y,A.x,A.y,V.x,V.y)&&vo(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;$&&$.z<=N;){if($!==n.prev&&$!==n.next&&ul(v.x,v.y,x.x,x.y,A.x,A.y,$.x,$.y)&&vo($.prev,$,$.next)>=0)return!1;$=$.nextZ}return!0}function Fl(n,r,s){var d=n;do{var v=d.prev,x=d.next.next;!kh(v,x)&&rg(v,d,d.next,x)&&Ph(v,x)&&Ph(x,v)&&(r.push(v.i/s),r.push(d.i/s),r.push(x.i/s),Pp(d),Pp(d.next),d=n=x),d=d.next}while(d!==n);return Ol(d)}function o1(n,r,s,d,v,x){var A=n;do{for(var T=A.next.next;T!==A.prev;){if(A.i!==T.i&&ig(A,T)){var D=Td(A,T);return A=Ol(A,A.next),D=Ol(D,D.next),Mf(A,r,s,d,v,x),void Mf(D,r,s,d,v,x)}T=T.next}A=A.next}while(A!==n)}function Ed(n,r){return n.x-r.x}function ng(n,r){if(r=function(d,v){var x,A=v,T=d.x,D=d.y,O=-1/0;do{if(D<=A.y&&D>=A.next.y&&A.next.y!==A.y){var N=A.x+(D-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(N<=T&&N>O){if(O=N,N===T){if(D===A.y)return A;if(D===A.next.y)return A.next}x=A.x<A.next.x?A:A.next}}A=A.next}while(A!==v);if(!x)return null;if(T===O)return x;var V,$=x,Q=x.x,ct=x.y,mt=1/0;A=x;do T>=A.x&&A.x>=Q&&T!==A.x&&ul(D<ct?T:O,D,Q,ct,D<ct?O:T,D,A.x,A.y)&&(V=Math.abs(D-A.y)/(T-A.x),Ph(A,d)&&(V<mt||V===mt&&(A.x>x.x||A.x===x.x&&ey(x,A)))&&(x=A,mt=V)),A=A.next;while(A!==$);return x}(n,r)){var s=Td(r,n);Ol(r,r.next),Ol(s,s.next)}}function ey(n,r){return vo(n.prev,n,r.prev)<0&&vo(r.next,n,n.next)<0}function Sd(n,r,s,d,v){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-s)*v)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-d)*v)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function ll(n){var r=n,s=n;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==n);return s}function ul(n,r,s,d,v,x,A,T){return(v-A)*(r-T)-(n-A)*(x-T)>=0&&(n-A)*(d-T)-(s-A)*(r-T)>=0&&(s-A)*(x-T)-(v-A)*(d-T)>=0}function ig(n,r){return n.next.i!==r.i&&n.prev.i!==r.i&&!function(s,d){var v=s;do{if(v.i!==s.i&&v.next.i!==s.i&&v.i!==d.i&&v.next.i!==d.i&&rg(v,v.next,s,d))return!0;v=v.next}while(v!==s);return!1}(n,r)&&(Ph(n,r)&&Ph(r,n)&&function(s,d){var v=s,x=!1,A=(s.x+d.x)/2,T=(s.y+d.y)/2;do v.y>T!=v.next.y>T&&v.next.y!==v.y&&A<(v.next.x-v.x)*(T-v.y)/(v.next.y-v.y)+v.x&&(x=!x),v=v.next;while(v!==s);return x}(n,r)&&(vo(n.prev,n,r.prev)||vo(n,r.prev,r))||kh(n,r)&&vo(n.prev,n,n.next)>0&&vo(r.prev,r,r.next)>0)}function vo(n,r,s){return(r.y-n.y)*(s.x-r.x)-(r.x-n.x)*(s.y-r.y)}function kh(n,r){return n.x===r.x&&n.y===r.y}function rg(n,r,s,d){var v=kp(vo(n,r,s)),x=kp(vo(n,r,d)),A=kp(vo(s,d,n)),T=kp(vo(s,d,r));return v!==x&&A!==T||!(v!==0||!Ef(n,s,r))||!(x!==0||!Ef(n,d,r))||!(A!==0||!Ef(s,n,d))||!(T!==0||!Ef(s,r,d))}function Ef(n,r,s){return r.x<=Math.max(n.x,s.x)&&r.x>=Math.min(n.x,s.x)&&r.y<=Math.max(n.y,s.y)&&r.y>=Math.min(n.y,s.y)}function kp(n){return n>0?1:n<0?-1:0}function Ph(n,r){return vo(n.prev,n,n.next)<0?vo(n,r,n.next)>=0&&vo(n,n.prev,r)>=0:vo(n,r,n.prev)<0||vo(n,n.next,r)<0}function Td(n,r){var s=new Uu(n.i,n.x,n.y),d=new Uu(r.i,r.x,r.y),v=n.next,x=r.prev;return n.next=r,r.prev=n,s.next=v,v.prev=s,d.next=s,s.prev=d,x.next=d,d.prev=x,d}function xc(n,r,s,d){var v=new Uu(n,r,s);return d?(v.next=d.next,v.prev=d,d.next.prev=v,d.next=v):(v.prev=v,v.next=v),v}function Pp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Uu(n,r,s){this.i=n,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kd(n,r,s,d){for(var v=0,x=r,A=s-d;x<s;x+=d)v+=(n[A]-n[x])*(n[x+1]+n[A+1]),A=x;return v}function ny(n,r,s,d,v){(function x(A,T,D,O,N){for(;O>D;){if(O-D>600){var V=O-D+1,$=T-D+1,Q=Math.log(V),ct=.5*Math.exp(2*Q/3),mt=.5*Math.sqrt(Q*ct*(V-ct)/V)*($-V/2<0?-1:1);x(A,T,Math.max(D,Math.floor(T-$*ct/V+mt)),Math.min(O,Math.floor(T+(V-$)*ct/V+mt)),N)}var Et=A[T],bt=D,Ut=O;for(Lh(A,D,T),N(A[O],Et)>0&&Lh(A,D,O);bt<Ut;){for(Lh(A,bt,Ut),bt++,Ut--;N(A[bt],Et)<0;)bt++;for(;N(A[Ut],Et)>0;)Ut--}N(A[D],Et)===0?Lh(A,D,Ut):Lh(A,++Ut,O),Ut<=T&&(D=Ut+1),T<=Ut&&(O=Ut-1)}})(n,r,s,d||n.length-1,v||a1)}function Lh(n,r,s){var d=n[r];n[r]=n[s],n[s]=d}function a1(n,r){return n<r?-1:n>r?1:0}function og(n,r){var s=n.length;if(s<=1)return[n];for(var d,v,x=[],A=0;A<s;A++){var T=An(n[A]);T!==0&&(n[A].area=Math.abs(T),v===void 0&&(v=T<0),v===T<0?(d&&x.push(d),d=[n[A]]):d.push(n[A]))}if(d&&x.push(d),r>1)for(var D=0;D<x.length;D++)x[D].length<=r||(ny(x[D],r,1,x[D].length-1,s1),x[D]=x[D].slice(0,r));return x}function s1(n,r){return r.area-n.area}function Pd(n,r,s){for(var d=s.patternDependencies,v=!1,x=0,A=r;x<A.length;x+=1){var T=A[x].paint.get(n+"-pattern");T.isConstant()||(v=!0);var D=T.constantOr(null);D&&(v=!0,d[D.to]=!0,d[D.from]=!0)}return v}function Ld(n,r,s,d,v){for(var x=v.patternDependencies,A=0,T=r;A<T.length;A+=1){var D=T[A],O=D.paint.get(n+"-pattern").value;if(O.kind!=="constant"){var N=O.evaluate({zoom:d-1},s,{},v.availableImages),V=O.evaluate({zoom:d},s,{},v.availableImages),$=O.evaluate({zoom:d+1},s,{},v.availableImages);V=V&&V.name?V.name:V,$=$&&$.name?$.name:$,x[N=N&&N.name?N.name:N]=!0,x[V]=!0,x[$]=!0,s.patterns[D.id]={min:N,mid:V,max:$}}}return s}Md.deviation=function(n,r,s,d){var v=r&&r.length,x=Math.abs(kd(n,0,v?r[0]*s:n.length,s));if(v)for(var A=0,T=r.length;A<T;A++)x-=Math.abs(kd(n,r[A]*s,A<T-1?r[A+1]*s:n.length,s));var D=0;for(A=0;A<d.length;A+=3){var O=d[A]*s,N=d[A+1]*s,V=d[A+2]*s;D+=Math.abs((n[O]-n[V])*(n[N+1]-n[O+1])-(n[O]-n[N])*(n[V+1]-n[O+1]))}return x===0&&D===0?0:Math.abs((D-x)/x)},Md.flatten=function(n){for(var r=n[0][0].length,s={vertices:[],holes:[],dimensions:r},d=0,v=0;v<n.length;v++){for(var x=0;x<n[v].length;x++)for(var A=0;A<r;A++)s.vertices.push(n[v][x][A]);v>0&&s.holes.push(d+=n[v-1].length)}return s},Tp.default=qi;var cu=function(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ou,this.indexArray=new Fu,this.indexArray2=new Sh,this.programConfigurations=new gn(n.layers,n.zoom),this.segments=new it,this.segments2=new it,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};cu.prototype.populate=function(n,r,s){this.hasPattern=Pd("fill",this.layers,r);for(var d=this.layers[0].layout.get("fill-sort-key"),v=[],x=0,A=n;x<A.length;x+=1){var T=A[x],D=T.feature,O=T.id,N=T.index,V=T.sourceLayerIndex,$=this.layers[0]._featureFilter.needGeometry,Q=_r(D,$);if(this.layers[0]._featureFilter.filter(new Bn(this.zoom),Q,s)){var ct=d?d.evaluate(Q,{},s,r.availableImages):void 0,mt={id:O,properties:D.properties,type:D.type,sourceLayerIndex:V,index:N,geometry:$?Q.geometry:Ir(D),patterns:{},sortKey:ct};v.push(mt)}}d&&v.sort(function(Me,Ne){return Me.sortKey-Ne.sortKey});for(var Et=0,bt=v;Et<bt.length;Et+=1){var Ut=bt[Et],$t=Ut.geometry,ee=Ut.index,ie=Ut.sourceLayerIndex;if(this.hasPattern){var fe=Ld("fill",this.layers,Ut,this.zoom,r);this.patternFeatures.push(fe)}else this.addFeature(Ut,$t,ee,s,{});r.featureIndex.insert(n[ee].feature,$t,ee,ie,this.index)}},cu.prototype.update=function(n,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,r,this.stateDependentLayers,s)},cu.prototype.addFeatures=function(n,r,s){for(var d=0,v=this.patternFeatures;d<v.length;d+=1){var x=v[d];this.addFeature(x,x.geometry,x.index,r,s)}},cu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},cu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},cu.prototype.upload=function(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,n1),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0},cu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},cu.prototype.addFeature=function(n,r,s,d,v){for(var x=0,A=og(r,500);x<A.length;x+=1){for(var T=A[x],D=0,O=0,N=T;O<N.length;O+=1)D+=N[O].length;for(var V=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray),$=V.vertexLength,Q=[],ct=[],mt=0,Et=T;mt<Et.length;mt+=1){var bt=Et[mt];if(bt.length!==0){bt!==T[0]&&ct.push(Q.length/2);var Ut=this.segments2.prepareSegment(bt.length,this.layoutVertexArray,this.indexArray2),$t=Ut.vertexLength;this.layoutVertexArray.emplaceBack(bt[0].x,bt[0].y),this.indexArray2.emplaceBack($t+bt.length-1,$t),Q.push(bt[0].x),Q.push(bt[0].y);for(var ee=1;ee<bt.length;ee++)this.layoutVertexArray.emplaceBack(bt[ee].x,bt[ee].y),this.indexArray2.emplaceBack($t+ee-1,$t+ee),Q.push(bt[ee].x),Q.push(bt[ee].y);Ut.vertexLength+=bt.length,Ut.primitiveLength+=bt.length}}for(var ie=Tp(Q,ct),fe=0;fe<ie.length;fe+=3)this.indexArray.emplaceBack($+ie[fe],$+ie[fe+1],$+ie[fe+2]);V.vertexLength+=D,V.primitiveLength+=ie.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,s,v,d)},Ye("FillBucket",cu,{omit:["layers","patternFeatures"]});var iy=new ta({"fill-sort-key":new hn(tt.layout_fill["fill-sort-key"])}),ry={paint:new ta({"fill-antialias":new yn(tt.paint_fill["fill-antialias"]),"fill-opacity":new hn(tt.paint_fill["fill-opacity"]),"fill-color":new hn(tt.paint_fill["fill-color"]),"fill-outline-color":new hn(tt.paint_fill["fill-outline-color"]),"fill-translate":new yn(tt.paint_fill["fill-translate"]),"fill-translate-anchor":new yn(tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bu(tt.paint_fill["fill-pattern"])}),layout:iy},Fs=function(n){function r(s){n.call(this,s,ry)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.recalculate=function(s,d){n.prototype.recalculate.call(this,s,d);var v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},r.prototype.createBucket=function(s){return new cu(s)},r.prototype.queryRadius=function(){return zo(this.paint.get("fill-translate"))},r.prototype.queryIntersectsFeature=function(s,d,v,x,A,T,D){return al(sl(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,D),x)},r.prototype.isTileClipped=function(){return!0},r}(Dl),ju=mo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,oy=Sf;function Sf(n,r,s,d,v){this.properties={},this.extent=s,this.type=0,this._pbf=n,this._geometry=-1,this._keys=d,this._values=v,n.readFields(Dd,this,r)}function Dd(n,r,s){n==1?r.id=s.readVarint():n==2?function(d,v){for(var x=d.readVarint()+d.pos;d.pos<x;){var A=v._keys[d.readVarint()],T=v._values[d.readVarint()];v.properties[A]=T}}(s,r):n==3?r.type=s.readVarint():n==4&&(r._geometry=s.pos)}function Tf(n){for(var r,s,d=0,v=0,x=n.length,A=x-1;v<x;A=v++)d+=((s=n[A]).x-(r=n[v]).x)*(r.y+s.y);return d}Sf.types=["Unknown","Point","LineString","Polygon"],Sf.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var r,s=n.readVarint()+n.pos,d=1,v=0,x=0,A=0,T=[];n.pos<s;){if(v<=0){var D=n.readVarint();d=7&D,v=D>>3}if(v--,d===1||d===2)x+=n.readSVarint(),A+=n.readSVarint(),d===1&&(r&&T.push(r),r=[]),r.push(new S(x,A));else{if(d!==7)throw new Error("unknown command "+d);r&&r.push(r[0].clone())}}return r&&T.push(r),T},Sf.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var r=n.readVarint()+n.pos,s=1,d=0,v=0,x=0,A=1/0,T=-1/0,D=1/0,O=-1/0;n.pos<r;){if(d<=0){var N=n.readVarint();s=7&N,d=N>>3}if(d--,s===1||s===2)(v+=n.readSVarint())<A&&(A=v),v>T&&(T=v),(x+=n.readSVarint())<D&&(D=x),x>O&&(O=x);else if(s!==7)throw new Error("unknown command "+s)}return[A,D,T,O]},Sf.prototype.toGeoJSON=function(n,r,s){var d,v,x=this.extent*Math.pow(2,s),A=this.extent*n,T=this.extent*r,D=this.loadGeometry(),O=Sf.types[this.type];function N(Q){for(var ct=0;ct<Q.length;ct++){var mt=Q[ct];Q[ct]=[360*(mt.x+A)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(mt.y+T)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var V=[];for(d=0;d<D.length;d++)V[d]=D[d][0];N(D=V);break;case 2:for(d=0;d<D.length;d++)N(D[d]);break;case 3:for(D=function(Q){var ct=Q.length;if(ct<=1)return[Q];for(var mt,Et,bt=[],Ut=0;Ut<ct;Ut++){var $t=Tf(Q[Ut]);$t!==0&&(Et===void 0&&(Et=$t<0),Et===$t<0?(mt&&bt.push(mt),mt=[Q[Ut]]):mt.push(Q[Ut]))}return mt&&bt.push(mt),bt}(D),d=0;d<D.length;d++)for(v=0;v<D[d].length;v++)N(D[d][v])}D.length===1?D=D[0]:O="Multi"+O;var $={type:"Feature",geometry:{type:O,coordinates:D},properties:this.properties};return"id"in this&&($.id=this.id),$};var ag=sg;function sg(n,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(l1,this,r),this.length=this._features.length}function l1(n,r,s){n===15?r.version=s.readVarint():n===1?r.name=s.readString():n===5?r.extent=s.readVarint():n===2?r._features.push(s.pos):n===3?r._keys.push(s.readString()):n===4&&r._values.push(function(d){for(var v=null,x=d.readVarint()+d.pos;d.pos<x;){var A=d.readVarint()>>3;v=A===1?d.readString():A===2?d.readFloat():A===3?d.readDouble():A===4?d.readVarint64():A===5?d.readVarint():A===6?d.readSVarint():A===7?d.readBoolean():null}return v}(s))}function ay(n,r,s){if(n===3){var d=new ag(s,s.readVarint()+s.pos);d.length&&(r[d.name]=d)}}sg.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var r=this._pbf.readVarint()+this._pbf.pos;return new oy(this._pbf,r,this.extent,this._keys,this._values)};var hu={VectorTile:function(n,r){this.layers=n.readFields(ay,{},r)},VectorTileFeature:oy,VectorTileLayer:ag},Lp=hu.VectorTileFeature.types,lg=Math.pow(2,13);function kf(n,r,s,d,v,x,A,T){n.emplaceBack(r,s,2*Math.floor(d*lg)+A,v*lg*2,x*lg*2,Math.round(T))}var Nl=function(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ka,this.indexArray=new Fu,this.programConfigurations=new gn(n.layers,n.zoom),this.segments=new it,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function Rd(n,r){return n.x===r.x&&(n.x<0||n.x>8192)||n.y===r.y&&(n.y<0||n.y>8192)}Nl.prototype.populate=function(n,r,s){this.features=[],this.hasPattern=Pd("fill-extrusion",this.layers,r);for(var d=0,v=n;d<v.length;d+=1){var x=v[d],A=x.feature,T=x.id,D=x.index,O=x.sourceLayerIndex,N=this.layers[0]._featureFilter.needGeometry,V=_r(A,N);if(this.layers[0]._featureFilter.filter(new Bn(this.zoom),V,s)){var $={id:T,sourceLayerIndex:O,index:D,geometry:N?V.geometry:Ir(A),properties:A.properties,type:A.type,patterns:{}};this.hasPattern?this.features.push(Ld("fill-extrusion",this.layers,$,this.zoom,r)):this.addFeature($,$.geometry,D,s,{}),r.featureIndex.insert(A,$.geometry,D,O,this.index,!0)}}},Nl.prototype.addFeatures=function(n,r,s){for(var d=0,v=this.features;d<v.length;d+=1){var x=v[d];this.addFeature(x,x.geometry,x.index,r,s)}},Nl.prototype.update=function(n,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,r,this.stateDependentLayers,s)},Nl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Nl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Nl.prototype.upload=function(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ju),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0},Nl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Nl.prototype.addFeature=function(n,r,s,d,v){for(var x=0,A=og(r,500);x<A.length;x+=1){for(var T=A[x],D=0,O=0,N=T;O<N.length;O+=1)D+=N[O].length;for(var V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),$=0,Q=T;$<Q.length;$+=1){var ct=Q[$];if(ct.length!==0&&!((hi=ct).every(function(Kn){return Kn.x<0})||hi.every(function(Kn){return Kn.x>8192})||hi.every(function(Kn){return Kn.y<0})||hi.every(function(Kn){return Kn.y>8192})))for(var mt=0,Et=0;Et<ct.length;Et++){var bt=ct[Et];if(Et>=1){var Ut=ct[Et-1];if(!Rd(bt,Ut)){V.vertexLength+4>it.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var $t=bt.sub(Ut)._perp()._unit(),ee=Ut.dist(bt);mt+ee>32768&&(mt=0),kf(this.layoutVertexArray,bt.x,bt.y,$t.x,$t.y,0,0,mt),kf(this.layoutVertexArray,bt.x,bt.y,$t.x,$t.y,0,1,mt),kf(this.layoutVertexArray,Ut.x,Ut.y,$t.x,$t.y,0,0,mt+=ee),kf(this.layoutVertexArray,Ut.x,Ut.y,$t.x,$t.y,0,1,mt);var ie=V.vertexLength;this.indexArray.emplaceBack(ie,ie+2,ie+1),this.indexArray.emplaceBack(ie+1,ie+2,ie+3),V.vertexLength+=4,V.primitiveLength+=2}}}}if(V.vertexLength+D>it.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray)),Lp[n.type]==="Polygon"){for(var fe=[],Me=[],Ne=V.vertexLength,_n=0,Ze=T;_n<Ze.length;_n+=1){var Mn=Ze[_n];if(Mn.length!==0){Mn!==T[0]&&Me.push(fe.length/2);for(var Je=0;Je<Mn.length;Je++){var ri=Mn[Je];kf(this.layoutVertexArray,ri.x,ri.y,0,0,1,1,0),fe.push(ri.x),fe.push(ri.y)}}}for(var On=Tp(fe,Me),pn=0;pn<On.length;pn+=3)this.indexArray.emplaceBack(Ne+On[pn],Ne+On[pn+2],Ne+On[pn+1]);V.primitiveLength+=On.length/3,V.vertexLength+=D}}var hi;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,s,v,d)},Ye("FillExtrusionBucket",Nl,{omit:["layers","features"]});var sy={paint:new ta({"fill-extrusion-opacity":new yn(tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new hn(tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yn(tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yn(tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bu(tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new hn(tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new hn(tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yn(tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},zd=function(n){function r(s){n.call(this,s,sy)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.createBucket=function(s){return new Nl(s)},r.prototype.queryRadius=function(){return zo(this.paint.get("fill-extrusion-translate"))},r.prototype.is3D=function(){return!0},r.prototype.queryIntersectsFeature=function(s,d,v,x,A,T,D,O){var N=sl(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,D),V=this.paint.get("fill-extrusion-height").evaluate(d,v),$=this.paint.get("fill-extrusion-base").evaluate(d,v),Q=function(mt,Et,bt,Ut){for(var $t=[],ee=0,ie=mt;ee<ie.length;ee+=1){var fe=ie[ee],Me=[fe.x,fe.y,0,1];eh(Me,Me,Et),$t.push(new S(Me[0]/Me[3],Me[1]/Me[3]))}return $t}(N,O),ct=function(mt,Et,bt,Ut){for(var $t=[],ee=[],ie=Ut[8]*Et,fe=Ut[9]*Et,Me=Ut[10]*Et,Ne=Ut[11]*Et,_n=Ut[8]*bt,Ze=Ut[9]*bt,Mn=Ut[10]*bt,Je=Ut[11]*bt,ri=0,On=mt;ri<On.length;ri+=1){for(var pn=[],hi=[],Kn=0,Si=On[ri];Kn<Si.length;Kn+=1){var Sn=Si[Kn],Wi=Sn.x,zr=Sn.y,Br=Ut[0]*Wi+Ut[4]*zr+Ut[12],Mr=Ut[1]*Wi+Ut[5]*zr+Ut[13],Or=Ut[2]*Wi+Ut[6]*zr+Ut[14],to=Ut[3]*Wi+Ut[7]*zr+Ut[15],yo=Or+Me,Eo=to+Ne,Ma=Br+_n,qo=Mr+Ze,Ea=Or+Mn,ao=to+Je,Wo=new S((Br+ie)/Eo,(Mr+fe)/Eo);Wo.z=yo/Eo,pn.push(Wo);var bi=new S(Ma/ao,qo/ao);bi.z=Ea/ao,hi.push(bi)}$t.push(pn),ee.push(hi)}return[$t,ee]}(x,$,V,O);return function(mt,Et,bt){var Ut=1/0;al(bt,Et)&&(Ut=Dp(bt,Et[0]));for(var $t=0;$t<Et.length;$t++)for(var ee=Et[$t],ie=mt[$t],fe=0;fe<ee.length-1;fe++){var Me=ee[fe],Ne=[Me,ee[fe+1],ie[fe+1],ie[fe],Me];Rl(bt,Ne)&&(Ut=Math.min(Ut,Dp(bt,Ne)))}return Ut!==1/0&&Ut}(ct[0],ct[1],Q)},r}(Dl);function Dh(n,r){return n.x*r.x+n.y*r.y}function Dp(n,r){if(n.length===1){for(var s,d=0,v=r[d++];!s||v.equals(s);)if(!(s=r[d++]))return 1/0;for(;d<r.length;d++){var x=r[d],A=n[0],T=s.sub(v),D=x.sub(v),O=A.sub(v),N=Dh(T,T),V=Dh(T,D),$=Dh(D,D),Q=Dh(O,T),ct=Dh(O,D),mt=N*$-V*V,Et=($*Q-V*ct)/mt,bt=(N*ct-V*Q)/mt,Ut=v.z*(1-Et-bt)+s.z*Et+x.z*bt;if(isFinite(Ut))return Ut}return 1/0}for(var $t=1/0,ee=0,ie=r;ee<ie.length;ee+=1)$t=Math.min($t,ie[ee].z);return $t}var u1=mo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ly=mo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Bd=hu.VectorTileFeature.types,uy=Math.cos(Math.PI/180*37.5),Od=Math.pow(2,14)/.5,Ua=function(n){var r=this;this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(s){r.gradients[s.id]={}}),this.layoutVertexArray=new la,this.layoutVertexArray2=new ua,this.indexArray=new Fu,this.programConfigurations=new gn(n.layers,n.zoom),this.segments=new it,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};Ua.prototype.populate=function(n,r,s){this.hasPattern=Pd("line",this.layers,r);for(var d=this.layers[0].layout.get("line-sort-key"),v=[],x=0,A=n;x<A.length;x+=1){var T=A[x],D=T.feature,O=T.id,N=T.index,V=T.sourceLayerIndex,$=this.layers[0]._featureFilter.needGeometry,Q=_r(D,$);if(this.layers[0]._featureFilter.filter(new Bn(this.zoom),Q,s)){var ct=d?d.evaluate(Q,{},s):void 0,mt={id:O,properties:D.properties,type:D.type,sourceLayerIndex:V,index:N,geometry:$?Q.geometry:Ir(D),patterns:{},sortKey:ct};v.push(mt)}}d&&v.sort(function(Me,Ne){return Me.sortKey-Ne.sortKey});for(var Et=0,bt=v;Et<bt.length;Et+=1){var Ut=bt[Et],$t=Ut.geometry,ee=Ut.index,ie=Ut.sourceLayerIndex;if(this.hasPattern){var fe=Ld("line",this.layers,Ut,this.zoom,r);this.patternFeatures.push(fe)}else this.addFeature(Ut,$t,ee,s,{});r.featureIndex.insert(n[ee].feature,$t,ee,ie,this.index)}},Ua.prototype.update=function(n,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,r,this.stateDependentLayers,s)},Ua.prototype.addFeatures=function(n,r,s){for(var d=0,v=this.patternFeatures;d<v.length;d+=1){var x=v[d];this.addFeature(x,x.geometry,x.index,r,s)}},Ua.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ua.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ua.prototype.upload=function(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,ly)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,u1),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0},Ua.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ua.prototype.lineFeatureClips=function(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}},Ua.prototype.addFeature=function(n,r,s,d,v){var x=this.layers[0].layout,A=x.get("line-join").evaluate(n,{}),T=x.get("line-cap"),D=x.get("line-miter-limit"),O=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(var N=0,V=r;N<V.length;N+=1)this.addLine(V[N],n,A,T,D,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,s,v,d)},Ua.prototype.addLine=function(n,r,s,d,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var A=0;A<n.length-1;A++)this.totalDistance+=n[A].dist(n[A+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var T=Bd[r.type]==="Polygon",D=n.length;D>=2&&n[D-1].equals(n[D-2]);)D--;for(var O=0;O<D-1&&n[O].equals(n[O+1]);)O++;if(!(D<(T?3:2))){s==="bevel"&&(v=1.05);var N,V=this.overscaling<=16?122880/(512*this.overscaling):0,$=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray),Q=void 0,ct=void 0,mt=void 0,Et=void 0;this.e1=this.e2=-1,T&&(Et=n[O].sub(N=n[D-2])._unit()._perp());for(var bt=O;bt<D;bt++)if(!(ct=bt===D-1?T?n[O+1]:void 0:n[bt+1])||!n[bt].equals(ct)){Et&&(mt=Et),N&&(Q=N),N=n[bt],Et=ct?ct.sub(N)._unit()._perp():mt;var Ut=(mt=mt||Et).add(Et);Ut.x===0&&Ut.y===0||Ut._unit();var $t=mt.x*Et.x+mt.y*Et.y,ee=Ut.x*Et.x+Ut.y*Et.y,ie=ee!==0?1/ee:1/0,fe=2*Math.sqrt(2-2*ee),Me=ee<uy&&Q&&ct,Ne=mt.x*Et.y-mt.y*Et.x>0;if(Me&&bt>O){var _n=N.dist(Q);if(_n>2*V){var Ze=N.sub(N.sub(Q)._mult(V/_n)._round());this.updateDistance(Q,Ze),this.addCurrentVertex(Ze,mt,0,0,$),Q=Ze}}var Mn=Q&&ct,Je=Mn?s:T?"butt":d;if(Mn&&Je==="round"&&(ie<x?Je="miter":ie<=2&&(Je="fakeround")),Je==="miter"&&ie>v&&(Je="bevel"),Je==="bevel"&&(ie>2&&(Je="flipbevel"),ie<v&&(Je="miter")),Q&&this.updateDistance(Q,N),Je==="miter")Ut._mult(ie),this.addCurrentVertex(N,Ut,0,0,$);else if(Je==="flipbevel"){if(ie>100)Ut=Et.mult(-1);else{var ri=ie*mt.add(Et).mag()/mt.sub(Et).mag();Ut._perp()._mult(ri*(Ne?-1:1))}this.addCurrentVertex(N,Ut,0,0,$),this.addCurrentVertex(N,Ut.mult(-1),0,0,$)}else if(Je==="bevel"||Je==="fakeround"){var On=-Math.sqrt(ie*ie-1),pn=Ne?On:0,hi=Ne?0:On;if(Q&&this.addCurrentVertex(N,mt,pn,hi,$),Je==="fakeround")for(var Kn=Math.round(180*fe/Math.PI/20),Si=1;Si<Kn;Si++){var Sn=Si/Kn;if(Sn!==.5){var Wi=Sn-.5;Sn+=Sn*Wi*(Sn-1)*((1.0904+$t*($t*(3.55645-1.43519*$t)-3.2452))*Wi*Wi+(.848013+$t*(.215638*$t-1.06021)))}var zr=Et.sub(mt)._mult(Sn)._add(mt)._unit()._mult(Ne?-1:1);this.addHalfVertex(N,zr.x,zr.y,!1,Ne,0,$)}ct&&this.addCurrentVertex(N,Et,-pn,-hi,$)}else if(Je==="butt")this.addCurrentVertex(N,Ut,0,0,$);else if(Je==="square"){var Br=Q?1:-1;this.addCurrentVertex(N,Ut,Br,Br,$)}else Je==="round"&&(Q&&(this.addCurrentVertex(N,mt,0,0,$),this.addCurrentVertex(N,mt,1,1,$,!0)),ct&&(this.addCurrentVertex(N,Et,-1,-1,$,!0),this.addCurrentVertex(N,Et,0,0,$)));if(Me&&bt<D-1){var Mr=N.dist(ct);if(Mr>2*V){var Or=N.add(ct.sub(N)._mult(V/Mr)._round());this.updateDistance(N,Or),this.addCurrentVertex(Or,Et,0,0,$),N=Or}}}}},Ua.prototype.addCurrentVertex=function(n,r,s,d,v,x){x===void 0&&(x=!1);var A=r.y*d-r.x,T=-r.y-r.x*d;this.addHalfVertex(n,r.x+r.y*s,r.y-r.x*s,x,!1,s,v),this.addHalfVertex(n,A,T,x,!0,-d,v),this.distance>Od/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,r,s,d,v,x))},Ua.prototype.addHalfVertex=function(n,r,s,d,v,x,A){var T=.5*(this.lineClips?this.scaledDistance*(Od-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n.x<<1)+(d?1:0),(n.y<<1)+(v?1:0),Math.round(63*r)+128,Math.round(63*s)+128,1+(x===0?0:x<0?-1:1)|(63&T)<<2,T>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var D=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),A.primitiveLength++),v?this.e2=D:this.e1=D},Ua.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ua.prototype.updateDistance=function(n,r){this.distance+=n.dist(r),this.updateScaledDistance()},Ye("LineBucket",Ua,{omit:["layers","patternFeatures"]});var cy=new ta({"line-cap":new yn(tt.layout_line["line-cap"]),"line-join":new hn(tt.layout_line["line-join"]),"line-miter-limit":new yn(tt.layout_line["line-miter-limit"]),"line-round-limit":new yn(tt.layout_line["line-round-limit"]),"line-sort-key":new hn(tt.layout_line["line-sort-key"])}),Hu={paint:new ta({"line-opacity":new hn(tt.paint_line["line-opacity"]),"line-color":new hn(tt.paint_line["line-color"]),"line-translate":new yn(tt.paint_line["line-translate"]),"line-translate-anchor":new yn(tt.paint_line["line-translate-anchor"]),"line-width":new hn(tt.paint_line["line-width"]),"line-gap-width":new hn(tt.paint_line["line-gap-width"]),"line-offset":new hn(tt.paint_line["line-offset"]),"line-blur":new hn(tt.paint_line["line-blur"]),"line-dasharray":new Ho(tt.paint_line["line-dasharray"]),"line-pattern":new Bu(tt.paint_line["line-pattern"]),"line-gradient":new wa(tt.paint_line["line-gradient"])}),layout:cy},ug=new(function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(s,d){return d=new Bn(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),n.prototype.possiblyEvaluate.call(this,s,d)},r.prototype.evaluate=function(s,d,v,x){return d=J({},d,{zoom:Math.floor(d.zoom)}),n.prototype.evaluate.call(this,s,d,v,x)},r}(hn))(Hu.paint.properties["line-width"].specification);ug.useIntegerZoom=!0;var hy=function(n){function r(s){n.call(this,s,Hu),this.gradientVersion=0}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Mi,this.gradientVersion=(this.gradientVersion+1)%B)},r.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},r.prototype.recalculate=function(s,d){n.prototype.recalculate.call(this,s,d),this.paint._values["line-floorwidth"]=ug.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)},r.prototype.createBucket=function(s){return new Ua(s)},r.prototype.queryRadius=function(s){var d=s,v=fy(Bl("line-width",this,d),Bl("line-gap-width",this,d)),x=Bl("line-offset",this,d);return v/2+Math.abs(x)+zo(this.paint.get("line-translate"))},r.prototype.queryIntersectsFeature=function(s,d,v,x,A,T,D){var O=sl(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,D),N=D/2*fy(this.paint.get("line-width").evaluate(d,v),this.paint.get("line-gap-width").evaluate(d,v)),V=this.paint.get("line-offset").evaluate(d,v);return V&&(x=function($,Q){for(var ct=[],mt=new S(0,0),Et=0;Et<$.length;Et++){for(var bt=$[Et],Ut=[],$t=0;$t<bt.length;$t++){var ee=bt[$t],ie=bt[$t+1],fe=$t===0?mt:ee.sub(bt[$t-1])._unit()._perp(),Me=$t===bt.length-1?mt:ie.sub(ee)._unit()._perp(),Ne=fe._add(Me)._unit();Ne._mult(1/(Ne.x*Me.x+Ne.y*Me.y)),Ut.push(Ne._mult(Q)._add(ee))}ct.push(Ut)}return ct}(x,V*D)),function($,Q,ct){for(var mt=0;mt<Q.length;mt++){var Et=Q[mt];if($.length>=3){for(var bt=0;bt<Et.length;bt++)if(zl($,Et[bt]))return!0}if(Bs($,Et,ct))return!0}return!1}(O,x,N)},r.prototype.isTileClipped=function(){return!0},r}(Dl);function fy(n,r){return r>0?r+2*n:n}var py=mo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),c1=mo([{name:"a_projected_pos",components:3,type:"Float32"}],4),h1=(mo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),mo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Gu=(mo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),mo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),cg=mo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hg(n,r,s){return n.sections.forEach(function(d){d.text=function(v,x,A){var T=x.layout.get("text-transform").evaluate(A,{});return T==="uppercase"?v=v.toLocaleUpperCase():T==="lowercase"&&(v=v.toLocaleLowerCase()),ps.applyArabicShaping&&(v=ps.applyArabicShaping(v)),v}(d.text,r,s)}),n}mo([{name:"triangle",components:3,type:"Uint16"}]),mo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),mo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),mo([{type:"Float32",name:"offsetX"}]),mo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Rh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Rp=function(n,r,s,d,v){var x,A,T=8*v-d-1,D=(1<<T)-1,O=D>>1,N=-7,V=v-1,$=-1,Q=n[r+V];for(V+=$,x=Q&(1<<-N)-1,Q>>=-N,N+=T;N>0;x=256*x+n[r+V],V+=$,N-=8);for(A=x&(1<<-N)-1,x>>=-N,N+=d;N>0;A=256*A+n[r+V],V+=$,N-=8);if(x===0)x=1-O;else{if(x===D)return A?NaN:1/0*(Q?-1:1);A+=Math.pow(2,d),x-=O}return(Q?-1:1)*A*Math.pow(2,x-d)},zh=function(n,r,s,d,v,x){var A,T,D,O=8*x-v-1,N=(1<<O)-1,V=N>>1,$=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=0,ct=1,mt=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(T=isNaN(r)?1:0,A=N):(A=Math.floor(Math.log(r)/Math.LN2),r*(D=Math.pow(2,-A))<1&&(A--,D*=2),(r+=A+V>=1?$/D:$*Math.pow(2,1-V))*D>=2&&(A++,D/=2),A+V>=N?(T=0,A=N):A+V>=1?(T=(r*D-1)*Math.pow(2,v),A+=V):(T=r*Math.pow(2,V-1)*Math.pow(2,v),A=0));v>=8;n[s+Q]=255&T,Q+=ct,T/=256,v-=8);for(A=A<<v|T,O+=v;O>0;n[s+Q]=255&A,Q+=ct,A/=256,O-=8);n[s+Q-ct]|=128*mt},Xn=ur;function ur(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}ur.Varint=0,ur.Fixed64=1,ur.Bytes=2,ur.Fixed32=5;var Fd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function gs(n){return n.type===ur.Bytes?n.readVarint()+n.pos:n.pos+1}function Pf(n,r,s){return s?4294967296*r+(n>>>0):4294967296*(r>>>0)+(n>>>0)}function Nd(n,r,s){var d=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(d);for(var v=s.pos-1;v>=n;v--)s.buf[v+d]=s.buf[v]}function dy(n,r){for(var s=0;s<n.length;s++)r.writeVarint(n[s])}function Ja(n,r){for(var s=0;s<n.length;s++)r.writeSVarint(n[s])}function f1(n,r){for(var s=0;s<n.length;s++)r.writeFloat(n[s])}function p1(n,r){for(var s=0;s<n.length;s++)r.writeDouble(n[s])}function my(n,r){for(var s=0;s<n.length;s++)r.writeBoolean(n[s])}function d1(n,r){for(var s=0;s<n.length;s++)r.writeFixed32(n[s])}function gy(n,r){for(var s=0;s<n.length;s++)r.writeSFixed32(n[s])}function m1(n,r){for(var s=0;s<n.length;s++)r.writeFixed64(n[s])}function g1(n,r){for(var s=0;s<n.length;s++)r.writeSFixed64(n[s])}function Vd(n,r){return(n[r]|n[r+1]<<8|n[r+2]<<16)+16777216*n[r+3]}function Ns(n,r,s){n[s]=r,n[s+1]=r>>>8,n[s+2]=r>>>16,n[s+3]=r>>>24}function ts(n,r){return(n[r]|n[r+1]<<8|n[r+2]<<16)+(n[r+3]<<24)}function fg(n,r,s){n===1&&s.readMessage(v1,r)}function v1(n,r,s){if(n===3){var d=s.readMessage(pg,{}),v=d.width,x=d.height,A=d.left,T=d.top,D=d.advance;r.push({id:d.id,bitmap:new ih({width:v+6,height:x+6},d.bitmap),metrics:{width:v,height:x,left:A,top:T,advance:D}})}}function pg(n,r,s){n===1?r.id=s.readVarint():n===2?r.bitmap=s.readBytes():n===3?r.width=s.readVarint():n===4?r.height=s.readVarint():n===5?r.left=s.readSVarint():n===6?r.top=s.readSVarint():n===7&&(r.advance=s.readVarint())}function vy(n){for(var r=0,s=0,d=0,v=n;d<v.length;d+=1){var x=v[d];r+=x.w*x.h,s=Math.max(s,x.w)}n.sort(function(mt,Et){return Et.h-mt.h});for(var A=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}],T=0,D=0,O=0,N=n;O<N.length;O+=1)for(var V=N[O],$=A.length-1;$>=0;$--){var Q=A[$];if(!(V.w>Q.w||V.h>Q.h)){if(V.x=Q.x,V.y=Q.y,D=Math.max(D,V.y+V.h),T=Math.max(T,V.x+V.w),V.w===Q.w&&V.h===Q.h){var ct=A.pop();$<A.length&&(A[$]=ct)}else V.h===Q.h?(Q.x+=V.w,Q.w-=V.w):V.w===Q.w?(Q.y+=V.h,Q.h-=V.h):(A.push({x:Q.x+V.w,y:Q.y,w:Q.w-V.w,h:V.h}),Q.y+=V.h,Q.h-=V.h);break}}return{w:T,h:D,fill:r/(T*D)||0}}ur.prototype={destroy:function(){this.buf=null},readFields:function(n,r,s){for(s=s||this.length;this.pos<s;){var d=this.readVarint(),v=d>>3,x=this.pos;this.type=7&d,n(v,r,this),this.pos===x&&this.skip(d)}return r},readMessage:function(n,r){return this.readFields(n,r,this.readVarint()+this.pos)},readFixed32:function(){var n=Vd(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=ts(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=Vd(this.buf,this.pos)+4294967296*Vd(this.buf,this.pos+4);return this.pos+=8,n},readSFixed64:function(){var n=Vd(this.buf,this.pos)+4294967296*ts(this.buf,this.pos+4);return this.pos+=8,n},readFloat:function(){var n=Rp(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=Rp(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var r,s,d=this.buf;return r=127&(s=d[this.pos++]),s<128?r:(r|=(127&(s=d[this.pos++]))<<7,s<128?r:(r|=(127&(s=d[this.pos++]))<<14,s<128?r:(r|=(127&(s=d[this.pos++]))<<21,s<128?r:function(v,x,A){var T,D,O=A.buf;if(T=(112&(D=O[A.pos++]))>>4,D<128||(T|=(127&(D=O[A.pos++]))<<3,D<128)||(T|=(127&(D=O[A.pos++]))<<10,D<128)||(T|=(127&(D=O[A.pos++]))<<17,D<128)||(T|=(127&(D=O[A.pos++]))<<24,D<128)||(T|=(1&(D=O[A.pos++]))<<31,D<128))return Pf(v,T,x);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=d[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,r=this.pos;return this.pos=n,n-r>=12&&Fd?function(s,d,v){return Fd.decode(s.subarray(d,v))}(this.buf,r,n):function(s,d,v){for(var x="",A=d;A<v;){var T,D,O,N=s[A],V=null,$=N>239?4:N>223?3:N>191?2:1;if(A+$>v)break;$===1?N<128&&(V=N):$===2?(192&(T=s[A+1]))==128&&(V=(31&N)<<6|63&T)<=127&&(V=null):$===3?(D=s[A+2],(192&(T=s[A+1]))==128&&(192&D)==128&&((V=(15&N)<<12|(63&T)<<6|63&D)<=2047||V>=55296&&V<=57343)&&(V=null)):$===4&&(D=s[A+2],O=s[A+3],(192&(T=s[A+1]))==128&&(192&D)==128&&(192&O)==128&&((V=(15&N)<<18|(63&T)<<12|(63&D)<<6|63&O)<=65535||V>=1114112)&&(V=null)),V===null?(V=65533,$=1):V>65535&&(V-=65536,x+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),x+=String.fromCharCode(V),A+=$}return x}(this.buf,r,n)},readBytes:function(){var n=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,n);return this.pos=n,r},readPackedVarint:function(n,r){if(this.type!==ur.Bytes)return n.push(this.readVarint(r));var s=gs(this);for(n=n||[];this.pos<s;)n.push(this.readVarint(r));return n},readPackedSVarint:function(n){if(this.type!==ur.Bytes)return n.push(this.readSVarint());var r=gs(this);for(n=n||[];this.pos<r;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==ur.Bytes)return n.push(this.readBoolean());var r=gs(this);for(n=n||[];this.pos<r;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==ur.Bytes)return n.push(this.readFloat());var r=gs(this);for(n=n||[];this.pos<r;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==ur.Bytes)return n.push(this.readDouble());var r=gs(this);for(n=n||[];this.pos<r;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==ur.Bytes)return n.push(this.readFixed32());var r=gs(this);for(n=n||[];this.pos<r;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==ur.Bytes)return n.push(this.readSFixed32());var r=gs(this);for(n=n||[];this.pos<r;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==ur.Bytes)return n.push(this.readFixed64());var r=gs(this);for(n=n||[];this.pos<r;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==ur.Bytes)return n.push(this.readSFixed64());var r=gs(this);for(n=n||[];this.pos<r;)n.push(this.readSFixed64());return n},skip:function(n){var r=7&n;if(r===ur.Varint)for(;this.buf[this.pos++]>127;);else if(r===ur.Bytes)this.pos=this.readVarint()+this.pos;else if(r===ur.Fixed32)this.pos+=4;else{if(r!==ur.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(n,r){this.writeVarint(n<<3|r)},realloc:function(n){for(var r=this.length||16;r<this.pos+n;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),Ns(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),Ns(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),Ns(this.buf,-1&n,this.pos),Ns(this.buf,Math.floor(n*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),Ns(this.buf,-1&n,this.pos),Ns(this.buf,Math.floor(n*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(r,s){var d,v;if(r>=0?(d=r%4294967296|0,v=r/4294967296|0):(v=~(-r/4294967296),4294967295^(d=~(-r%4294967296))?d=d+1|0:(d=0,v=v+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(x,A,T){T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,T.buf[T.pos]=127&(x>>>=7)}(d,0,s),function(x,A){var T=(7&x)<<4;A.buf[A.pos++]|=T|((x>>>=3)?128:0),x&&(A.buf[A.pos++]=127&x|((x>>>=7)?128:0),x&&(A.buf[A.pos++]=127&x|((x>>>=7)?128:0),x&&(A.buf[A.pos++]=127&x|((x>>>=7)?128:0),x&&(A.buf[A.pos++]=127&x|((x>>>=7)?128:0),x&&(A.buf[A.pos++]=127&x)))))}(v,s)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var r=this.pos;this.pos=function(d,v,x){for(var A,T,D=0;D<v.length;D++){if((A=v.charCodeAt(D))>55295&&A<57344){if(!T){A>56319||D+1===v.length?(d[x++]=239,d[x++]=191,d[x++]=189):T=A;continue}if(A<56320){d[x++]=239,d[x++]=191,d[x++]=189,T=A;continue}A=T-55296<<10|A-56320|65536,T=null}else T&&(d[x++]=239,d[x++]=191,d[x++]=189,T=null);A<128?d[x++]=A:(A<2048?d[x++]=A>>6|192:(A<65536?d[x++]=A>>12|224:(d[x++]=A>>18|240,d[x++]=A>>12&63|128),d[x++]=A>>6&63|128),d[x++]=63&A|128)}return x}(this.buf,n,this.pos);var s=this.pos-r;s>=128&&Nd(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(n){this.realloc(4),zh(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),zh(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var r=n.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=n[s]},writeRawMessage:function(n,r){this.pos++;var s=this.pos;n(r,this);var d=this.pos-s;d>=128&&Nd(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeMessage:function(n,r,s){this.writeTag(n,ur.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(n,r){r.length&&this.writeMessage(n,dy,r)},writePackedSVarint:function(n,r){r.length&&this.writeMessage(n,Ja,r)},writePackedBoolean:function(n,r){r.length&&this.writeMessage(n,my,r)},writePackedFloat:function(n,r){r.length&&this.writeMessage(n,f1,r)},writePackedDouble:function(n,r){r.length&&this.writeMessage(n,p1,r)},writePackedFixed32:function(n,r){r.length&&this.writeMessage(n,d1,r)},writePackedSFixed32:function(n,r){r.length&&this.writeMessage(n,gy,r)},writePackedFixed64:function(n,r){r.length&&this.writeMessage(n,m1,r)},writePackedSFixed64:function(n,r){r.length&&this.writeMessage(n,g1,r)},writeBytesField:function(n,r){this.writeTag(n,ur.Bytes),this.writeBytes(r)},writeFixed32Field:function(n,r){this.writeTag(n,ur.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(n,r){this.writeTag(n,ur.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(n,r){this.writeTag(n,ur.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(n,r){this.writeTag(n,ur.Fixed64),this.writeSFixed64(r)},writeVarintField:function(n,r){this.writeTag(n,ur.Varint),this.writeVarint(r)},writeSVarintField:function(n,r){this.writeTag(n,ur.Varint),this.writeSVarint(r)},writeStringField:function(n,r){this.writeTag(n,ur.Bytes),this.writeString(r)},writeFloatField:function(n,r){this.writeTag(n,ur.Fixed32),this.writeFloat(r)},writeDoubleField:function(n,r){this.writeTag(n,ur.Fixed64),this.writeDouble(r)},writeBooleanField:function(n,r){this.writeVarintField(n,!!r)}};var Ud=function(n,r){var s=r.pixelRatio,d=r.version,v=r.stretchX,x=r.stretchY,A=r.content;this.paddedRect=n,this.pixelRatio=s,this.stretchX=v,this.stretchY=x,this.content=A,this.version=d},bc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};bc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},bc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},bc.tlbr.get=function(){return this.tl.concat(this.br)},bc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ud.prototype,bc);var Lf=function(n,r){var s={},d={};this.haveRenderCallbacks=[];var v=[];this.addImages(n,s,v),this.addImages(r,d,v);var x=vy(v),A=new Qa({width:x.w||1,height:x.h||1});for(var T in n){var D=n[T],O=s[T].paddedRect;Qa.copy(D.data,A,{x:0,y:0},{x:O.x+1,y:O.y+1},D.data)}for(var N in r){var V=r[N],$=d[N].paddedRect,Q=$.x+1,ct=$.y+1,mt=V.data.width,Et=V.data.height;Qa.copy(V.data,A,{x:0,y:0},{x:Q,y:ct},V.data),Qa.copy(V.data,A,{x:0,y:Et-1},{x:Q,y:ct-1},{width:mt,height:1}),Qa.copy(V.data,A,{x:0,y:0},{x:Q,y:ct+Et},{width:mt,height:1}),Qa.copy(V.data,A,{x:mt-1,y:0},{x:Q-1,y:ct},{width:1,height:Et}),Qa.copy(V.data,A,{x:0,y:0},{x:Q+mt,y:ct},{width:1,height:Et})}this.image=A,this.iconPositions=s,this.patternPositions=d};Lf.prototype.addImages=function(n,r,s){for(var d in n){var v=n[d],x={x:0,y:0,w:v.data.width+2,h:v.data.height+2};s.push(x),r[d]=new Ud(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(d)}},Lf.prototype.patchUpdatedImages=function(n,r){for(var s in n.dispatchRenderCallbacks(this.haveRenderCallbacks),n.updatedImages)this.patchUpdatedImage(this.iconPositions[s],n.getImage(s),r),this.patchUpdatedImage(this.patternPositions[s],n.getImage(s),r)},Lf.prototype.patchUpdatedImage=function(n,r,s){if(n&&r&&n.version!==r.version){n.version=r.version;var d=n.tl;s.update(r.data,void 0,{x:d[0],y:d[1]})}},Ye("ImagePosition",Ud),Ye("ImageAtlas",Lf);var vs={horizontal:1,vertical:2,horizontalOnly:3},Df=function(){this.scale=1,this.fontStack="",this.imageName=null};Df.forText=function(n,r){var s=new Df;return s.scale=n||1,s.fontStack=r,s},Df.forImage=function(n){var r=new Df;return r.imageName=n,r};var Ia=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function jd(n,r,s,d,v,x,A,T,D,O,N,V,$,Q,ct,mt){var Et,bt=Ia.fromFeature(n,v);V===vs.vertical&&bt.verticalizePunctuation();var Ut=ps.processBidirectionalText,$t=ps.processStyledBidirectionalText;if(Ut&&bt.sections.length===1){Et=[];for(var ee=0,ie=Ut(bt.toString(),Bh(bt,O,x,r,d,Q,ct));ee<ie.length;ee+=1){var fe=ie[ee],Me=new Ia;Me.text=fe,Me.sections=bt.sections;for(var Ne=0;Ne<fe.length;Ne++)Me.sectionIndex.push(0);Et.push(Me)}}else if($t){Et=[];for(var _n=0,Ze=$t(bt.text,bt.sectionIndex,Bh(bt,O,x,r,d,Q,ct));_n<Ze.length;_n+=1){var Mn=Ze[_n],Je=new Ia;Je.text=Mn[0],Je.sectionIndex=Mn[1],Je.sections=bt.sections,Et.push(Je)}}else Et=function(pn,hi){for(var Kn=[],Si=pn.text,Sn=0,Wi=0,zr=hi;Wi<zr.length;Wi+=1){var Br=zr[Wi];Kn.push(pn.substring(Sn,Br)),Sn=Br}return Sn<Si.length&&Kn.push(pn.substring(Sn,Si.length)),Kn}(bt,Bh(bt,O,x,r,d,Q,ct));var ri=[],On={positionedLines:ri,text:bt.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(pn,hi,Kn,Si,Sn,Wi,zr,Br,Mr,Or,to,yo){for(var Eo=0,Ma=-17,qo=0,Ea=0,ao=Br==="right"?1:Br==="left"?0:.5,Wo=0,bi=0,dr=Sn;bi<dr.length;bi+=1){var rr=dr[bi];rr.trim();var Ni=rr.getMaxScale(),ja=24*(Ni-1),ca={positionedGlyphs:[],lineOffset:0};pn.positionedLines[Wo]=ca;var Er=ca.positionedGlyphs,hr=0;if(rr.length()){for(var ha=0;ha<rr.length();ha++){var Zi=rr.getSection(ha),ns=rr.getSectionIndex(ha),Zn=rr.getCharCode(ha),qu=0,Ki=null,Sr=null,Ul=null,cl=24,jh=!(Mr===vs.horizontal||!to&&!Pl(Zn)||to&&(Hd[Zn]||(Hl=Zn,Be.Arabic(Hl)||Be["Arabic Supplement"](Hl)||Be["Arabic Extended-A"](Hl)||Be["Arabic Presentation Forms-A"](Hl)||Be["Arabic Presentation Forms-B"](Hl))));if(Zi.imageName){var Ff=Si[Zi.imageName];if(!Ff)continue;Ul=Zi.imageName,pn.iconsInText=pn.iconsInText||!0,Sr=Ff.paddedRect;var Ic=Ff.displaySize;Zi.scale=24*Zi.scale/yo,qu=ja+(24-Ic[1]*Zi.scale),cl=(Ki={width:Ic[0],height:Ic[1],left:1,top:-3,advance:jh?Ic[1]:Ic[0]}).advance;var Nf=jh?Ic[0]*Zi.scale-24*Ni:Ic[1]*Zi.scale-24*Ni;Nf>0&&Nf>hr&&(hr=Nf)}else{var Jd=Kn[Zi.fontStack],sh=Jd&&Jd[Zn];if(sh&&sh.rect)Sr=sh.rect,Ki=sh.metrics;else{var Vp=hi[Zi.fontStack],jl=Vp&&Vp[Zn];if(!jl)continue;Ki=jl.metrics}qu=24*(Ni-Zi.scale)}jh?(pn.verticalizable=!0,Er.push({glyph:Zn,imageName:Ul,x:Eo,y:Ma+qu,vertical:jh,scale:Zi.scale,fontStack:Zi.fontStack,sectionIndex:ns,metrics:Ki,rect:Sr}),Eo+=cl*Zi.scale+Or):(Er.push({glyph:Zn,imageName:Ul,x:Eo,y:Ma+qu,vertical:jh,scale:Zi.scale,fontStack:Zi.fontStack,sectionIndex:ns,metrics:Ki,rect:Sr}),Eo+=Ki.advance*Zi.scale+Or)}Er.length!==0&&(qo=Math.max(Eo-Or,qo),_y(Er,0,Er.length-1,ao,hr)),Eo=0;var Up=Wi*Ni+hr;ca.lineOffset=Math.max(hr,ja),Ma+=Up,Ea=Math.max(Up,Ea),++Wo}else Ma+=Wi,++Wo}var Hl,Kr=Ma- -17,Qr=zp(zr),Mc=Qr.horizontalAlign,Vf=Qr.verticalAlign;(function(tm,em,jp,Hp,nm,Uf,Ec,Hh,im){var Gh,qh=(em-jp)*nm;Gh=Uf!==Ec?-Hh*Hp- -17:(-Hp*im+.5)*Ec;for(var Sa=0,Wu=tm;Sa<Wu.length;Sa+=1)for(var Wh=0,Gp=Wu[Sa].positionedGlyphs;Wh<Gp.length;Wh+=1){var jf=Gp[Wh];jf.x+=qh,jf.y+=Gh}})(pn.positionedLines,ao,Mc,Vf,qo,Ea,Wi,Kr,Sn.length),pn.top+=-Vf*Kr,pn.bottom=pn.top+Kr,pn.left+=-Mc*qo,pn.right=pn.left+qo}(On,r,s,d,Et,A,T,D,V,O,$,mt),!function(pn){for(var hi=0,Kn=pn;hi<Kn.length;hi+=1)if(Kn[hi].positionedGlyphs.length!==0)return!1;return!0}(ri)&&On}Ia.fromFeature=function(n,r){for(var s=new Ia,d=0;d<n.sections.length;d++){var v=n.sections[d];v.image?s.addImageSection(v):s.addTextSection(v,r)}return s},Ia.prototype.length=function(){return this.text.length},Ia.prototype.getSection=function(n){return this.sections[this.sectionIndex[n]]},Ia.prototype.getSectionIndex=function(n){return this.sectionIndex[n]},Ia.prototype.getCharCode=function(n){return this.text.charCodeAt(n)},Ia.prototype.verticalizePunctuation=function(){this.text=function(n){for(var r="",s=0;s<n.length;s++){var d=n.charCodeAt(s+1)||null,v=n.charCodeAt(s-1)||null;r+=d&&Ll(d)&&!Rh[n[s+1]]||v&&Ll(v)&&!Rh[n[s-1]]||!Rh[n[s]]?n[s]:Rh[n[s]]}return r}(this.text)},Ia.prototype.trim=function(){for(var n=0,r=0;r<this.text.length&&Hd[this.text.charCodeAt(r)];r++)n++;for(var s=this.text.length,d=this.text.length-1;d>=0&&d>=n&&Hd[this.text.charCodeAt(d)];d--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)},Ia.prototype.substring=function(n,r){var s=new Ia;return s.text=this.text.substring(n,r),s.sectionIndex=this.sectionIndex.slice(n,r),s.sections=this.sections,s},Ia.prototype.toString=function(){return this.text},Ia.prototype.getMaxScale=function(){var n=this;return this.sectionIndex.reduce(function(r,s){return Math.max(r,n.sections[s].scale)},0)},Ia.prototype.addTextSection=function(n,r){this.text+=n.text,this.sections.push(Df.forText(n.scale,n.fontStack||r));for(var s=this.sections.length-1,d=0;d<n.text.length;++d)this.sectionIndex.push(s)},Ia.prototype.addImageSection=function(n){var r=n.image?n.image.name:"";if(r.length!==0){var s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(Df.forImage(r)),this.sectionIndex.push(this.sections.length-1)):Ot("Reached maximum number of images 6401")}else Ot("Can't add FormattedSection with an empty image.")},Ia.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Hd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},es={};function dg(n,r,s,d,v,x){if(r.imageName){var A=d[r.imageName];return A?A.displaySize[0]*r.scale*24/x+v:0}var T=s[r.fontStack],D=T&&T[n];return D?D.metrics.advance*r.scale+v:0}function yy(n,r,s,d){var v=Math.pow(n-r,2);return d?n<r?v/2:2*v:v+Math.abs(s)*s}function mg(n,r,s){var d=0;return n===10&&(d-=1e4),s&&(d+=150),n!==40&&n!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function gg(n,r,s,d,v,x){for(var A=null,T=yy(r,s,v,x),D=0,O=d;D<O.length;D+=1){var N=O[D],V=yy(r-N.x,s,v,x)+N.badness;V<=T&&(A=N,T=V)}return{index:n,x:r,priorBreak:A,badness:T}}function Bh(n,r,s,d,v,x,A){if(x!=="point")return[];if(!n)return[];for(var T,D=[],O=function(Et,bt,Ut,$t,ee,ie){for(var fe=0,Me=0;Me<Et.length();Me++){var Ne=Et.getSection(Me);fe+=dg(Et.getCharCode(Me),Ne,$t,ee,bt,ie)}return fe/Math.max(1,Math.ceil(fe/Ut))}(n,r,s,d,v,A),N=n.text.indexOf("​")>=0,V=0,$=0;$<n.length();$++){var Q=n.getSection($),ct=n.getCharCode($);if(Hd[ct]||(V+=dg(ct,Q,d,v,r,A)),$<n.length()-1){var mt=!((T=ct)<11904||!(Be["Bopomofo Extended"](T)||Be.Bopomofo(T)||Be["CJK Compatibility Forms"](T)||Be["CJK Compatibility Ideographs"](T)||Be["CJK Compatibility"](T)||Be["CJK Radicals Supplement"](T)||Be["CJK Strokes"](T)||Be["CJK Symbols and Punctuation"](T)||Be["CJK Unified Ideographs Extension A"](T)||Be["CJK Unified Ideographs"](T)||Be["Enclosed CJK Letters and Months"](T)||Be["Halfwidth and Fullwidth Forms"](T)||Be.Hiragana(T)||Be["Ideographic Description Characters"](T)||Be["Kangxi Radicals"](T)||Be["Katakana Phonetic Extensions"](T)||Be.Katakana(T)||Be["Vertical Forms"](T)||Be["Yi Radicals"](T)||Be["Yi Syllables"](T)));(es[ct]||mt||Q.imageName)&&D.push(gg($+1,V,O,D,mg(ct,n.getCharCode($+1),mt&&N),!1))}}return function Et(bt){return bt?Et(bt.priorBreak).concat(bt.index):[]}(gg(n.length(),V,O,D,0,!0))}function zp(n){var r=.5,s=.5;switch(n){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function _y(n,r,s,d,v){if(d||v)for(var x=n[s],A=(n[s].x+x.metrics.advance*x.scale)*d,T=r;T<=s;T++)n[T].x-=A,n[T].y+=v}function vg(n,r,s,d,v,x){var A,T=n.image;if(T.content){var D=T.content,O=T.pixelRatio||1;A=[D[0]/O,D[1]/O,T.displaySize[0]-D[2]/O,T.displaySize[1]-D[3]/O]}var N,V,$,Q,ct=r.left*x,mt=r.right*x;s==="width"||s==="both"?(Q=v[0]+ct-d[3],V=v[0]+mt+d[1]):V=(Q=v[0]+(ct+mt-T.displaySize[0])/2)+T.displaySize[0];var Et=r.top*x,bt=r.bottom*x;return s==="height"||s==="both"?(N=v[1]+Et-d[0],$=v[1]+bt+d[2]):$=(N=v[1]+(Et+bt-T.displaySize[1])/2)+T.displaySize[1],{image:T,top:N,right:V,bottom:$,left:Q,collisionPadding:A}}es[10]=!0,es[32]=!0,es[38]=!0,es[40]=!0,es[41]=!0,es[43]=!0,es[45]=!0,es[47]=!0,es[173]=!0,es[183]=!0,es[8203]=!0,es[8208]=!0,es[8211]=!0,es[8231]=!0;var Ac=function(n){function r(s,d,v,x){n.call(this,s,d),this.angle=v,x!==void 0&&(this.segment=x)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.clone=function(){return new r(this.x,this.y,this.angle,this.segment)},r}(S);function Gd(n,r){var s=r.expression;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Bn(n+1))};if(s.kind==="source")return{kind:"source"};for(var d=s.zoomStops,v=s.interpolationType,x=0;x<d.length&&d[x]<=n;)x++;for(var A=x=Math.max(0,x-1);A<d.length&&d[A]<n+1;)A++;A=Math.min(d.length-1,A);var T=d[x],D=d[A];return s.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:D,interpolationType:v}:{kind:"camera",minZoom:T,maxZoom:D,minSize:s.evaluate(new Bn(T)),maxSize:s.evaluate(new Bn(D)),interpolationType:v}}function fu(n,r,s){var d=r.uSize,v=s.lowerSize;return n.kind==="source"?v/128:n.kind==="composite"?$r(v/128,s.upperSize/128,r.uSizeT):d}function rh(n,r){var s=0,d=0;if(n.kind==="constant")d=n.layoutSize;else if(n.kind!=="source"){var v=n.interpolationType,x=v?X(ho.interpolationFactor(v,r,n.minZoom,n.maxZoom),0,1):0;n.kind==="camera"?d=$r(n.minSize,n.maxSize,x):s=x}return{uSizeT:s,uSize:d}}Ye("Anchor",Ac);var y1=Object.freeze({__proto__:null,getSizeData:Gd,evaluateSizeForFeature:fu,evaluateSizeForZoom:rh,SIZE_PACK_FACTOR:128});function yg(n,r,s,d,v){if(r.segment===void 0)return!0;for(var x=r,A=r.segment+1,T=0;T>-s/2;){if(--A<0)return!1;T-=n[A].dist(x),x=n[A]}T+=n[A].dist(n[A+1]),A++;for(var D=[],O=0;T<s/2;){var N=n[A],V=n[A+1];if(!V)return!1;var $=n[A-1].angleTo(N)-N.angleTo(V);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:T,angleDelta:$}),O+=$;T-D[0].distance>d;)O-=D.shift().angleDelta;if(O>v)return!1;A++,T+=N.dist(V)}return!0}function xy(n){for(var r=0,s=0;s<n.length-1;s++)r+=n[s].dist(n[s+1]);return r}function by(n,r,s){return n?.6*r*s:0}function Ay(n,r){return Math.max(n?n.right-n.left:0,r?r.right-r.left:0)}function _1(n,r,s,d,v,x){for(var A=by(s,v,x),T=Ay(s,d)*x,D=0,O=xy(n)/2,N=0;N<n.length-1;N++){var V=n[N],$=n[N+1],Q=V.dist($);if(D+Q>O){var ct=(O-D)/Q,mt=$r(V.x,$.x,ct),Et=$r(V.y,$.y,ct),bt=new Ac(mt,Et,$.angleTo(V),N);return bt._round(),!A||yg(n,bt,T,A,r)?bt:void 0}D+=Q}}function x1(n,r,s,d,v,x,A,T,D){var O=by(d,x,A),N=Ay(d,v),V=N*A,$=n[0].x===0||n[0].x===D||n[0].y===0||n[0].y===D;return r-V<r/4&&(r=V+r/4),function Q(ct,mt,Et,bt,Ut,$t,ee,ie,fe){for(var Me=$t/2,Ne=xy(ct),_n=0,Ze=mt-Et,Mn=[],Je=0;Je<ct.length-1;Je++){for(var ri=ct[Je],On=ct[Je+1],pn=ri.dist(On),hi=On.angleTo(ri);Ze+Et<_n+pn;){var Kn=((Ze+=Et)-_n)/pn,Si=$r(ri.x,On.x,Kn),Sn=$r(ri.y,On.y,Kn);if(Si>=0&&Si<fe&&Sn>=0&&Sn<fe&&Ze-Me>=0&&Ze+Me<=Ne){var Wi=new Ac(Si,Sn,hi,Je);Wi._round(),bt&&!yg(ct,Wi,$t,bt,Ut)||Mn.push(Wi)}}_n+=pn}return ie||Mn.length||ee||(Mn=Q(ct,_n/2,Et,bt,Ut,$t,ee,!0,fe)),Mn}(n,$?r/2*T%r:(N/2+2*x)*A*T%r,r,O,s,V,$,!1,D)}function wy(n,r,s,d,v){for(var x=[],A=0;A<n.length;A++)for(var T=n[A],D=void 0,O=0;O<T.length-1;O++){var N=T[O],V=T[O+1];N.x<r&&V.x<r||(N.x<r?N=new S(r,N.y+(r-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x<r&&(V=new S(r,N.y+(r-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y<s&&V.y<s||(N.y<s?N=new S(N.x+(s-N.y)/(V.y-N.y)*(V.x-N.x),s)._round():V.y<s&&(V=new S(N.x+(s-N.y)/(V.y-N.y)*(V.x-N.x),s)._round()),N.x>=d&&V.x>=d||(N.x>=d?N=new S(d,N.y+(d-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x>=d&&(V=new S(d,N.y+(d-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y>=v&&V.y>=v||(N.y>=v?N=new S(N.x+(v-N.y)/(V.y-N.y)*(V.x-N.x),v)._round():V.y>=v&&(V=new S(N.x+(v-N.y)/(V.y-N.y)*(V.x-N.x),v)._round()),D&&N.equals(D[D.length-1])||x.push(D=[N]),D.push(V)))))}return x}function Cy(n,r,s,d){var v=[],x=n.image,A=x.pixelRatio,T=x.paddedRect.w-2,D=x.paddedRect.h-2,O=n.right-n.left,N=n.bottom-n.top,V=x.stretchX||[[0,T]],$=x.stretchY||[[0,D]],Q=function(Si,Sn){return Si+Sn[1]-Sn[0]},ct=V.reduce(Q,0),mt=$.reduce(Q,0),Et=T-ct,bt=D-mt,Ut=0,$t=ct,ee=0,ie=mt,fe=0,Me=Et,Ne=0,_n=bt;if(x.content&&d){var Ze=x.content;Ut=qd(V,0,Ze[0]),ee=qd($,0,Ze[1]),$t=qd(V,Ze[0],Ze[2]),ie=qd($,Ze[1],Ze[3]),fe=Ze[0]-Ut,Ne=Ze[1]-ee,Me=Ze[2]-Ze[0]-$t,_n=Ze[3]-Ze[1]-ie}var Mn=function(Si,Sn,Wi,zr){var Br=Wd(Si.stretch-Ut,$t,O,n.left),Mr=Zd(Si.fixed-fe,Me,Si.stretch,ct),Or=Wd(Sn.stretch-ee,ie,N,n.top),to=Zd(Sn.fixed-Ne,_n,Sn.stretch,mt),yo=Wd(Wi.stretch-Ut,$t,O,n.left),Eo=Zd(Wi.fixed-fe,Me,Wi.stretch,ct),Ma=Wd(zr.stretch-ee,ie,N,n.top),qo=Zd(zr.fixed-Ne,_n,zr.stretch,mt),Ea=new S(Br,Or),ao=new S(yo,Or),Wo=new S(yo,Ma),bi=new S(Br,Ma),dr=new S(Mr/A,to/A),rr=new S(Eo/A,qo/A),Ni=r*Math.PI/180;if(Ni){var ja=Math.sin(Ni),ca=Math.cos(Ni),Er=[ca,-ja,ja,ca];Ea._matMult(Er),ao._matMult(Er),bi._matMult(Er),Wo._matMult(Er)}var hr=Si.stretch+Si.fixed,ha=Sn.stretch+Sn.fixed;return{tl:Ea,tr:ao,bl:bi,br:Wo,tex:{x:x.paddedRect.x+1+hr,y:x.paddedRect.y+1+ha,w:Wi.stretch+Wi.fixed-hr,h:zr.stretch+zr.fixed-ha},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:dr,pixelOffsetBR:rr,minFontScaleX:Me/A/O,minFontScaleY:_n/A/N,isSDF:s}};if(d&&(x.stretchX||x.stretchY))for(var Je=Iy(V,Et,ct),ri=Iy($,bt,mt),On=0;On<Je.length-1;On++)for(var pn=Je[On],hi=Je[On+1],Kn=0;Kn<ri.length-1;Kn++)v.push(Mn(pn,ri[Kn],hi,ri[Kn+1]));else v.push(Mn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:D+1}));return v}function qd(n,r,s){for(var d=0,v=0,x=n;v<x.length;v+=1){var A=x[v];d+=Math.max(r,Math.min(s,A[1]))-Math.max(r,Math.min(s,A[0]))}return d}function Iy(n,r,s){for(var d=[{fixed:-1,stretch:0}],v=0,x=n;v<x.length;v+=1){var A=x[v],T=A[0],D=A[1],O=d[d.length-1];d.push({fixed:T-O.stretch,stretch:O.stretch}),d.push({fixed:T-O.stretch,stretch:O.stretch+(D-T)})}return d.push({fixed:r+1,stretch:s}),d}function Wd(n,r,s,d){return n/r*s+d}function Zd(n,r,s,d){return n-r*s/d}var Bp=function(n,r,s,d,v,x,A,T,D,O){if(this.boxStartIndex=n.length,D){var N=x.top,V=x.bottom,$=x.collisionPadding;$&&(N-=$[1],V+=$[3]);var Q=V-N;Q>0&&(Q=Math.max(10,Q),this.circleDiameter=Q)}else{var ct=x.top*A-T,mt=x.bottom*A+T,Et=x.left*A-T,bt=x.right*A+T,Ut=x.collisionPadding;if(Ut&&(Et-=Ut[0]*A,ct-=Ut[1]*A,bt+=Ut[2]*A,mt+=Ut[3]*A),O){var $t=new S(Et,ct),ee=new S(bt,ct),ie=new S(Et,mt),fe=new S(bt,mt),Me=O*Math.PI/180;$t._rotate(Me),ee._rotate(Me),ie._rotate(Me),fe._rotate(Me),Et=Math.min($t.x,ee.x,ie.x,fe.x),bt=Math.max($t.x,ee.x,ie.x,fe.x),ct=Math.min($t.y,ee.y,ie.y,fe.y),mt=Math.max($t.y,ee.y,ie.y,fe.y)}n.emplaceBack(r.x,r.y,Et,ct,bt,mt,s,d,v)}this.boxEndIndex=n.length},Oh=function(n,r){if(n===void 0&&(n=[]),r===void 0&&(r=My),this.data=n,this.length=this.data.length,this.compare=r,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};function My(n,r){return n<r?-1:n>r?1:0}function b1(n,r,s){s===void 0&&(s=!1);for(var d=1/0,v=1/0,x=-1/0,A=-1/0,T=n[0],D=0;D<T.length;D++){var O=T[D];(!D||O.x<d)&&(d=O.x),(!D||O.y<v)&&(v=O.y),(!D||O.x>x)&&(x=O.x),(!D||O.y>A)&&(A=O.y)}var N=Math.min(x-d,A-v),V=N/2,$=new Oh([],A1);if(N===0)return new S(d,v);for(var Q=d;Q<x;Q+=N)for(var ct=v;ct<A;ct+=N)$.push(new Rf(Q+V,ct+V,V,n));for(var mt=function(Ut){for(var $t=0,ee=0,ie=0,fe=Ut[0],Me=0,Ne=fe.length,_n=Ne-1;Me<Ne;_n=Me++){var Ze=fe[Me],Mn=fe[_n],Je=Ze.x*Mn.y-Mn.x*Ze.y;ee+=(Ze.x+Mn.x)*Je,ie+=(Ze.y+Mn.y)*Je,$t+=3*Je}return new Rf(ee/$t,ie/$t,0,Ut)}(n),Et=$.length;$.length;){var bt=$.pop();(bt.d>mt.d||!mt.d)&&(mt=bt,s&&console.log("found best %d after %d probes",Math.round(1e4*bt.d)/1e4,Et)),bt.max-mt.d<=r||($.push(new Rf(bt.p.x-(V=bt.h/2),bt.p.y-V,V,n)),$.push(new Rf(bt.p.x+V,bt.p.y-V,V,n)),$.push(new Rf(bt.p.x-V,bt.p.y+V,V,n)),$.push(new Rf(bt.p.x+V,bt.p.y+V,V,n)),Et+=4)}return s&&(console.log("num probes: "+Et),console.log("best distance: "+mt.d)),mt.p}function A1(n,r){return r.max-n.max}function Rf(n,r,s,d){this.p=new S(n,r),this.h=s,this.d=function(v,x){for(var A=!1,T=1/0,D=0;D<x.length;D++)for(var O=x[D],N=0,V=O.length,$=V-1;N<V;$=N++){var Q=O[N],ct=O[$];Q.y>v.y!=ct.y>v.y&&v.x<(ct.x-Q.x)*(v.y-Q.y)/(ct.y-Q.y)+Q.x&&(A=!A),T=Math.min(T,yc(v,Q,ct))}return(A?1:-1)*Math.sqrt(T)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}Oh.prototype.push=function(n){this.data.push(n),this.length++,this._up(this.length-1)},Oh.prototype.pop=function(){if(this.length!==0){var n=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),n}},Oh.prototype.peek=function(){return this.data[0]},Oh.prototype._up=function(n){for(var r=this.data,s=this.compare,d=r[n];n>0;){var v=n-1>>1,x=r[v];if(s(d,x)>=0)break;r[n]=x,n=v}r[n]=d},Oh.prototype._down=function(n){for(var r=this.data,s=this.compare,d=this.length>>1,v=r[n];n<d;){var x=1+(n<<1),A=r[x],T=x+1;if(T<this.length&&s(r[T],A)<0&&(x=T,A=r[T]),s(A,v)>=0)break;r[n]=A,n=x}r[n]=v};var $d=Number.POSITIVE_INFINITY;function Ey(n,r){return r[1]!==$d?function(s,d,v){var x=0,A=0;switch(d=Math.abs(d),v=Math.abs(v),s){case"top-right":case"top-left":case"top":A=v-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-v}switch(s){case"top-right":case"bottom-right":case"right":x=-d;break;case"top-left":case"bottom-left":case"left":x=d}return[x,A]}(n,r[0],r[1]):function(s,d){var v=0,x=0;d<0&&(d=0);var A=d/Math.sqrt(2);switch(s){case"top-right":case"top-left":x=A-7;break;case"bottom-right":case"bottom-left":x=7-A;break;case"bottom":x=7-d;break;case"top":x=d-7}switch(s){case"top-right":case"bottom-right":v=-A;break;case"top-left":case"bottom-left":v=A;break;case"left":v=d;break;case"right":v=-d}return[v,x]}(n,r[0])}function _g(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Sy(n,r,s,d,v,x,A,T,D,O,N,V,$,Q,ct){var mt=function(ee,ie,fe,Me,Ne,_n,Ze,Mn){for(var Je=Me.layout.get("text-rotate").evaluate(_n,{})*Math.PI/180,ri=[],On=0,pn=ie.positionedLines;On<pn.length;On+=1)for(var hi=pn[On],Kn=0,Si=hi.positionedGlyphs;Kn<Si.length;Kn+=1){var Sn=Si[Kn];if(Sn.rect){var Wi=Sn.rect||{},zr=4,Br=!0,Mr=1,Or=0,to=(Ne||Mn)&&Sn.vertical,yo=Sn.metrics.advance*Sn.scale/2;if(Mn&&ie.verticalizable&&(Or=hi.lineOffset/2-(Sn.imageName?-(24-Sn.metrics.width*Sn.scale)/2:24*(Sn.scale-1))),Sn.imageName){var Eo=Ze[Sn.imageName];Br=Eo.sdf,zr=1/(Mr=Eo.pixelRatio)}var Ma=Ne?[Sn.x+yo,Sn.y]:[0,0],qo=Ne?[0,0]:[Sn.x+yo+fe[0],Sn.y+fe[1]-Or],Ea=[0,0];to&&(Ea=qo,qo=[0,0]);var ao=(Sn.metrics.left-zr)*Sn.scale-yo+qo[0],Wo=(-Sn.metrics.top-zr)*Sn.scale+qo[1],bi=ao+Wi.w*Sn.scale/Mr,dr=Wo+Wi.h*Sn.scale/Mr,rr=new S(ao,Wo),Ni=new S(bi,Wo),ja=new S(ao,dr),ca=new S(bi,dr);if(to){var Er=new S(-yo,yo- -17),hr=-Math.PI/2,ha=12-yo,Zi=new S(22-ha,-(Sn.imageName?ha:0)),ns=new(Function.prototype.bind.apply(S,[null].concat(Ea)));rr._rotateAround(hr,Er)._add(Zi)._add(ns),Ni._rotateAround(hr,Er)._add(Zi)._add(ns),ja._rotateAround(hr,Er)._add(Zi)._add(ns),ca._rotateAround(hr,Er)._add(Zi)._add(ns)}if(Je){var Zn=Math.sin(Je),qu=Math.cos(Je),Ki=[qu,-Zn,Zn,qu];rr._matMult(Ki),Ni._matMult(Ki),ja._matMult(Ki),ca._matMult(Ki)}var Sr=new S(0,0),Ul=new S(0,0);ri.push({tl:rr,tr:Ni,bl:ja,br:ca,tex:Wi,writingMode:ie.writingMode,glyphOffset:Ma,sectionIndex:Sn.sectionIndex,isSDF:Br,pixelOffsetTL:Sr,pixelOffsetBR:Ul,minFontScaleX:0,minFontScaleY:0})}}return ri}(0,s,T,v,x,A,d,n.allowVerticalPlacement),Et=n.textSizeData,bt=null;Et.kind==="source"?(bt=[128*v.layout.get("text-size").evaluate(A,{})])[0]>32640&&Ot(n.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Et.kind==="composite"&&((bt=[128*Q.compositeTextSizes[0].evaluate(A,{},ct),128*Q.compositeTextSizes[1].evaluate(A,{},ct)])[0]>32640||bt[1]>32640)&&Ot(n.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),n.addSymbols(n.text,mt,bt,T,x,A,O,r,D.lineStartIndex,D.lineLength,$,ct);for(var Ut=0,$t=N;Ut<$t.length;Ut+=1)V[$t[Ut]]=n.text.placedSymbolArray.length-1;return 4*mt.length}function Ty(n){for(var r in n)return n[r];return null}function w1(n,r,s,d){var v=n.compareText;if(r in v){for(var x=v[r],A=x.length-1;A>=0;A--)if(d.dist(x[A])<s)return!0}else v[r]=[];return v[r].push(d),!1}var C1=hu.VectorTileFeature.types,Vl=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Yd(n,r,s,d,v,x,A,T,D,O,N,V,$){var Q=T?Math.min(32640,Math.round(T[0])):0,ct=T?Math.min(32640,Math.round(T[1])):0;n.emplaceBack(r,s,Math.round(32*d),Math.round(32*v),x,A,(Q<<1)+(D?1:0),ct,16*O,16*N,256*V,256*$)}function xg(n,r,s){n.emplaceBack(r.x,r.y,s),n.emplaceBack(r.x,r.y,s),n.emplaceBack(r.x,r.y,s),n.emplaceBack(r.x,r.y,s)}function I1(n){for(var r=0,s=n.sections;r<s.length;r+=1)if(xf(s[r].text))return!0;return!1}var Fh=function(n){this.layoutVertexArray=new Cf,this.indexArray=new Fu,this.programConfigurations=n,this.segments=new it,this.dynamicLayoutVertexArray=new Qc,this.opacityVertexArray=new Eh,this.placedSymbolArray=new m};Fh.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Fh.prototype.upload=function(n,r,s,d){this.isEmpty()||(s&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,py.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,c1.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Vl,!0),this.opacityVertexBuffer.itemSize=1),(s||d)&&this.programConfigurations.upload(n))},Fh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ye("SymbolBuffers",Fh);var Op=function(n,r,s){this.layoutVertexArray=new n,this.layoutAttributes=r,this.indexArray=new s,this.segments=new it,this.collisionVertexArray=new Ip};Op.prototype.upload=function(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,h1.members,!0)},Op.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ye("CollisionBuffers",Op);var cr=function(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(x){return x.id}),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ms([]),this.placementViewportMatrix=ms([]);var r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Gd(this.zoom,r["text-size"]),this.iconSizeData=Gd(this.zoom,r["icon-size"]);var s=this.layers[0].layout,d=s.get("symbol-sort-key"),v=s.get("symbol-z-order");this.canOverlap=s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&d.constantOr(1)!==void 0,this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(function(x){return vs[x]})),this.stateDependentLayerIds=this.layers.filter(function(x){return x.isStateDependent()}).map(function(x){return x.id}),this.sourceID=n.sourceID};cr.prototype.createArrays=function(){this.text=new Fh(new gn(this.layers,this.zoom,function(n){return/^text/.test(n)})),this.icon=new Fh(new gn(this.layers,this.zoom,function(n){return/^icon/.test(n)})),this.glyphOffsetArray=new E,this.lineVertexArray=new L,this.symbolInstances=new w},cr.prototype.calculateGlyphDependencies=function(n,r,s,d,v){for(var x=0;x<n.length;x++)if(r[n.charCodeAt(x)]=!0,(s||d)&&v){var A=Rh[n.charAt(x)];A&&(r[A.charCodeAt(0)]=!0)}},cr.prototype.populate=function(n,r,s){var d=this.layers[0],v=d.layout,x=v.get("text-font"),A=v.get("text-field"),T=v.get("icon-image"),D=(A.value.kind!=="constant"||A.value.value instanceof Lr&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),O=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,N=v.get("symbol-sort-key");if(this.features=[],D||O){for(var V=r.iconDependencies,$=r.glyphDependencies,Q=r.availableImages,ct=new Bn(this.zoom),mt=0,Et=n;mt<Et.length;mt+=1){var bt=Et[mt],Ut=bt.feature,$t=bt.id,ee=bt.index,ie=bt.sourceLayerIndex,fe=d._featureFilter.needGeometry,Me=_r(Ut,fe);if(d._featureFilter.filter(ct,Me,s)){fe||(Me.geometry=Ir(Ut));var Ne=void 0;if(D){var _n=d.getValueAndResolveTokens("text-field",Me,s,Q),Ze=Lr.factory(_n);I1(Ze)&&(this.hasRTLText=!0),(!this.hasRTLText||Af()==="unavailable"||this.hasRTLText&&ps.isParsed())&&(Ne=hg(Ze,d,Me))}var Mn=void 0;if(O){var Je=d.getValueAndResolveTokens("icon-image",Me,s,Q);Mn=Je instanceof Vo?Je:Vo.fromString(Je)}if(Ne||Mn){var ri=this.sortFeaturesByKey?N.evaluate(Me,{},s):void 0;if(this.features.push({id:$t,text:Ne,icon:Mn,index:ee,sourceLayerIndex:ie,geometry:Me.geometry,properties:Ut.properties,type:C1[Ut.type],sortKey:ri}),Mn&&(V[Mn.name]=!0),Ne){var On=x.evaluate(Me,{},s).join(","),pn=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(vs.vertical)>=0;for(var hi=0,Kn=Ne.sections;hi<Kn.length;hi+=1){var Si=Kn[hi];if(Si.image)V[Si.image.name]=!0;else{var Sn=rl(Ne.toString()),Wi=Si.fontStack||On,zr=$[Wi]=$[Wi]||{};this.calculateGlyphDependencies(Si.text,zr,pn,this.allowVerticalPlacement,Sn)}}}}}}v.get("symbol-placement")==="line"&&(this.features=function(Br){var Mr={},Or={},to=[],yo=0;function Eo(Er){to.push(Br[Er]),yo++}function Ma(Er,hr,ha){var Zi=Or[Er];return delete Or[Er],Or[hr]=Zi,to[Zi].geometry[0].pop(),to[Zi].geometry[0]=to[Zi].geometry[0].concat(ha[0]),Zi}function qo(Er,hr,ha){var Zi=Mr[hr];return delete Mr[hr],Mr[Er]=Zi,to[Zi].geometry[0].shift(),to[Zi].geometry[0]=ha[0].concat(to[Zi].geometry[0]),Zi}function Ea(Er,hr,ha){var Zi=ha?hr[0][hr[0].length-1]:hr[0][0];return Er+":"+Zi.x+":"+Zi.y}for(var ao=0;ao<Br.length;ao++){var Wo=Br[ao],bi=Wo.geometry,dr=Wo.text?Wo.text.toString():null;if(dr){var rr=Ea(dr,bi),Ni=Ea(dr,bi,!0);if(rr in Or&&Ni in Mr&&Or[rr]!==Mr[Ni]){var ja=qo(rr,Ni,bi),ca=Ma(rr,Ni,to[ja].geometry);delete Mr[rr],delete Or[Ni],Or[Ea(dr,to[ca].geometry,!0)]=ca,to[ja].geometry=null}else rr in Or?Ma(rr,Ni,bi):Ni in Mr?qo(rr,Ni,bi):(Eo(ao),Mr[rr]=yo-1,Or[Ni]=yo-1)}else Eo(ao)}return to.filter(function(Er){return Er.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Br,Mr){return Br.sortKey-Mr.sortKey})}},cr.prototype.update=function(n,r,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,r,this.layers,s),this.icon.programConfigurations.updatePaintArrays(n,r,this.layers,s))},cr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},cr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},cr.prototype.upload=function(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},cr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},cr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},cr.prototype.addToLineVertexArray=function(n,r){var s=this.lineVertexArray.length;if(n.segment!==void 0){for(var d=n.dist(r[n.segment+1]),v=n.dist(r[n.segment]),x={},A=n.segment+1;A<r.length;A++)x[A]={x:r[A].x,y:r[A].y,tileUnitDistanceFromAnchor:d},A<r.length-1&&(d+=r[A+1].dist(r[A]));for(var T=n.segment||0;T>=0;T--)x[T]={x:r[T].x,y:r[T].y,tileUnitDistanceFromAnchor:v},T>0&&(v+=r[T-1].dist(r[T]));for(var D=0;D<r.length;D++){var O=x[D];this.lineVertexArray.emplaceBack(O.x,O.y,O.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}},cr.prototype.addSymbols=function(n,r,s,d,v,x,A,T,D,O,N,V){for(var $=n.indexArray,Q=n.layoutVertexArray,ct=n.segments.prepareSegment(4*r.length,Q,$,this.canOverlap?x.sortKey:void 0),mt=this.glyphOffsetArray.length,Et=ct.vertexLength,bt=this.allowVerticalPlacement&&A===vs.vertical?Math.PI/2:0,Ut=x.text&&x.text.sections,$t=0;$t<r.length;$t++){var ee=r[$t],ie=ee.tl,fe=ee.tr,Me=ee.bl,Ne=ee.br,_n=ee.tex,Ze=ee.pixelOffsetTL,Mn=ee.pixelOffsetBR,Je=ee.minFontScaleX,ri=ee.minFontScaleY,On=ee.glyphOffset,pn=ee.isSDF,hi=ee.sectionIndex,Kn=ct.vertexLength,Si=On[1];Yd(Q,T.x,T.y,ie.x,Si+ie.y,_n.x,_n.y,s,pn,Ze.x,Ze.y,Je,ri),Yd(Q,T.x,T.y,fe.x,Si+fe.y,_n.x+_n.w,_n.y,s,pn,Mn.x,Ze.y,Je,ri),Yd(Q,T.x,T.y,Me.x,Si+Me.y,_n.x,_n.y+_n.h,s,pn,Ze.x,Mn.y,Je,ri),Yd(Q,T.x,T.y,Ne.x,Si+Ne.y,_n.x+_n.w,_n.y+_n.h,s,pn,Mn.x,Mn.y,Je,ri),xg(n.dynamicLayoutVertexArray,T,bt),$.emplaceBack(Kn,Kn+1,Kn+2),$.emplaceBack(Kn+1,Kn+2,Kn+3),ct.vertexLength+=4,ct.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(On[0]),$t!==r.length-1&&hi===r[$t+1].sectionIndex||n.programConfigurations.populatePaintArrays(Q.length,x,x.index,{},V,Ut&&Ut[hi])}n.placedSymbolArray.emplaceBack(T.x,T.y,mt,this.glyphOffsetArray.length-mt,Et,D,O,T.segment,s?s[0]:0,s?s[1]:0,d[0],d[1],A,0,!1,0,N)},cr.prototype._addCollisionDebugVertex=function(n,r,s,d,v,x){return r.emplaceBack(0,0),n.emplaceBack(s.x,s.y,d,v,Math.round(x.x),Math.round(x.y))},cr.prototype.addCollisionDebugVertices=function(n,r,s,d,v,x,A){var T=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),D=T.vertexLength,O=v.layoutVertexArray,N=v.collisionVertexArray,V=A.anchorX,$=A.anchorY;this._addCollisionDebugVertex(O,N,x,V,$,new S(n,r)),this._addCollisionDebugVertex(O,N,x,V,$,new S(s,r)),this._addCollisionDebugVertex(O,N,x,V,$,new S(s,d)),this._addCollisionDebugVertex(O,N,x,V,$,new S(n,d)),T.vertexLength+=4;var Q=v.indexArray;Q.emplaceBack(D,D+1),Q.emplaceBack(D+1,D+2),Q.emplaceBack(D+2,D+3),Q.emplaceBack(D+3,D),T.primitiveLength+=4},cr.prototype.addDebugCollisionBoxes=function(n,r,s,d){for(var v=n;v<r;v++){var x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,d?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,s)}},cr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Op(Jc,Gu.members,Sh),this.iconCollisionBox=new Op(Jc,Gu.members,Sh);for(var n=0;n<this.symbolInstances.length;n++){var r=this.symbolInstances.get(n);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}},cr.prototype._deserializeCollisionBoxesForSymbol=function(n,r,s,d,v,x,A,T,D){for(var O={},N=r;N<s;N++){var V=n.get(N);O.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},O.textFeatureIndex=V.featureIndex;break}for(var $=d;$<v;$++){var Q=n.get($);O.verticalTextBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},O.verticalTextFeatureIndex=Q.featureIndex;break}for(var ct=x;ct<A;ct++){var mt=n.get(ct);O.iconBox={x1:mt.x1,y1:mt.y1,x2:mt.x2,y2:mt.y2,anchorPointX:mt.anchorPointX,anchorPointY:mt.anchorPointY},O.iconFeatureIndex=mt.featureIndex;break}for(var Et=T;Et<D;Et++){var bt=n.get(Et);O.verticalIconBox={x1:bt.x1,y1:bt.y1,x2:bt.x2,y2:bt.y2,anchorPointX:bt.anchorPointX,anchorPointY:bt.anchorPointY},O.verticalIconFeatureIndex=bt.featureIndex;break}return O},cr.prototype.deserializeCollisionBoxes=function(n){this.collisionArrays=[];for(var r=0;r<this.symbolInstances.length;r++){var s=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}},cr.prototype.hasTextData=function(){return this.text.segments.get().length>0},cr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},cr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},cr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},cr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},cr.prototype.addIndicesForPlacedSymbol=function(n,r){for(var s=n.placedSymbolArray.get(r),d=s.vertexStartIndex+4*s.numGlyphs,v=s.vertexStartIndex;v<d;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)},cr.prototype.getSortedSymbolIndexes=function(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var r=Math.sin(n),s=Math.cos(n),d=[],v=[],x=[],A=0;A<this.symbolInstances.length;++A){x.push(A);var T=this.symbolInstances.get(A);d.push(0|Math.round(r*T.anchorX+s*T.anchorY)),v.push(T.featureIndex)}return x.sort(function(D,O){return d[D]-d[O]||v[O]-v[D]}),x},cr.prototype.addToSortKeyRanges=function(n,r){var s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===r?s.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:n+1})},cr.prototype.sortFeatures=function(n){var r=this;if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var s=0,d=this.symbolInstanceIndexes;s<d.length;s+=1){var v=this.symbolInstances.get(d[s]);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach(function(x,A,T){x>=0&&T.indexOf(x)===A&&r.addIndicesForPlacedSymbol(r.text,x)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ye("SymbolBucket",cr,{omit:["layers","collisionBoxArray","features","compareText"]}),cr.MAX_GLYPHS=65535,cr.addDynamicAttributes=xg;var M1=new ta({"symbol-placement":new yn(tt.layout_symbol["symbol-placement"]),"symbol-spacing":new yn(tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yn(tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new hn(tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yn(tt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yn(tt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new yn(tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new yn(tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yn(tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new hn(tt.layout_symbol["icon-size"]),"icon-text-fit":new yn(tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yn(tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new hn(tt.layout_symbol["icon-image"]),"icon-rotate":new hn(tt.layout_symbol["icon-rotate"]),"icon-padding":new yn(tt.layout_symbol["icon-padding"]),"icon-keep-upright":new yn(tt.layout_symbol["icon-keep-upright"]),"icon-offset":new hn(tt.layout_symbol["icon-offset"]),"icon-anchor":new hn(tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yn(tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yn(tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yn(tt.layout_symbol["text-rotation-alignment"]),"text-field":new hn(tt.layout_symbol["text-field"]),"text-font":new hn(tt.layout_symbol["text-font"]),"text-size":new hn(tt.layout_symbol["text-size"]),"text-max-width":new hn(tt.layout_symbol["text-max-width"]),"text-line-height":new yn(tt.layout_symbol["text-line-height"]),"text-letter-spacing":new hn(tt.layout_symbol["text-letter-spacing"]),"text-justify":new hn(tt.layout_symbol["text-justify"]),"text-radial-offset":new hn(tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yn(tt.layout_symbol["text-variable-anchor"]),"text-anchor":new hn(tt.layout_symbol["text-anchor"]),"text-max-angle":new yn(tt.layout_symbol["text-max-angle"]),"text-writing-mode":new yn(tt.layout_symbol["text-writing-mode"]),"text-rotate":new hn(tt.layout_symbol["text-rotate"]),"text-padding":new yn(tt.layout_symbol["text-padding"]),"text-keep-upright":new yn(tt.layout_symbol["text-keep-upright"]),"text-transform":new hn(tt.layout_symbol["text-transform"]),"text-offset":new hn(tt.layout_symbol["text-offset"]),"text-allow-overlap":new yn(tt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new yn(tt.layout_symbol["text-ignore-placement"]),"text-optional":new yn(tt.layout_symbol["text-optional"])}),bg={paint:new ta({"icon-opacity":new hn(tt.paint_symbol["icon-opacity"]),"icon-color":new hn(tt.paint_symbol["icon-color"]),"icon-halo-color":new hn(tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new hn(tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new hn(tt.paint_symbol["icon-halo-blur"]),"icon-translate":new yn(tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new yn(tt.paint_symbol["icon-translate-anchor"]),"text-opacity":new hn(tt.paint_symbol["text-opacity"]),"text-color":new hn(tt.paint_symbol["text-color"],{runtimeType:He,getOverride:function(n){return n.textColor},hasOverride:function(n){return!!n.textColor}}),"text-halo-color":new hn(tt.paint_symbol["text-halo-color"]),"text-halo-width":new hn(tt.paint_symbol["text-halo-width"]),"text-halo-blur":new hn(tt.paint_symbol["text-halo-blur"]),"text-translate":new yn(tt.paint_symbol["text-translate"]),"text-translate-anchor":new yn(tt.paint_symbol["text-translate-anchor"])}),layout:M1},oh=function(n){this.type=n.property.overrides?n.property.overrides.runtimeType:on,this.defaultValue=n};oh.prototype.evaluate=function(n){if(n.formattedSection){var r=this.defaultValue.property.overrides;if(r&&r.hasOverride(n.formattedSection))return r.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default},oh.prototype.eachChild=function(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)},oh.prototype.outputDefined=function(){return!1},oh.prototype.serialize=function(){return null},Ye("FormatSectionOverride",oh,{omit:["defaultValue"]});var E1=function(n){function r(s){n.call(this,s,bg)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.recalculate=function(s,d){if(n.prototype.recalculate.call(this,s,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var v=this.layout.get("text-writing-mode");if(v){for(var x=[],A=0,T=v;A<T.length;A+=1){var D=T[A];x.indexOf(D)<0&&x.push(D)}this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},r.prototype.getValueAndResolveTokens=function(s,d,v,x){var A=this.layout.get(s).evaluate(d,{},v,x),T=this._unevaluatedLayout._values[s];return T.isDataDriven()||Tu(T.value)||!A?A:function(D,O){return O.replace(/{([^{}]+)}/g,function(N,V){return V in D?String(D[V]):""})}(d.properties,A)},r.prototype.createBucket=function(s){return new cr(s)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype._setPaintOverrides=function(){for(var s=0,d=bg.paint.overridableProperties;s<d.length;s+=1){var v=d[s];if(r.hasPaintOverride(this.layout,v)){var x,A=this.paint.get(v),T=new oh(A),D=new Tl(T,A.property.specification);x=A.value.kind==="constant"||A.value.kind==="source"?new Ts("source",D):new ku("composite",D,A.value.zoomStops,A.value._interpolationType),this.paint._values[v]=new Ro(A.property,x,A.parameters)}}},r.prototype._handleOverridablePaintPropertyUpdate=function(s,d,v){return!(!this.layout||d.isDataDriven()||v.isDataDriven())&&r.hasPaintOverride(this.layout,s)},r.hasPaintOverride=function(s,d){var v=s.get("text-field"),x=bg.paint.properties[d],A=!1,T=function(N){for(var V=0,$=N;V<$.length;V+=1)if(x.overrides&&x.overrides.hasOverride($[V]))return void(A=!0)};if(v.value.kind==="constant"&&v.value.value instanceof Lr)T(v.value.value.sections);else if(v.value.kind==="source"){var D=function(N){A||(N instanceof bo&&Dr(N.value)===ji?T(N.value.sections):N instanceof $a?T(N.sections):N.eachChild(D))},O=v.value;O._styleExpression&&D(O._styleExpression.expression)}return A},r}(Dl),S1={paint:new ta({"background-color":new yn(tt.paint_background["background-color"]),"background-pattern":new Ho(tt.paint_background["background-pattern"]),"background-opacity":new yn(tt.paint_background["background-opacity"])})},T1=function(n){function r(s){n.call(this,s,S1)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r}(Dl),k1={paint:new ta({"raster-opacity":new yn(tt.paint_raster["raster-opacity"]),"raster-hue-rotate":new yn(tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yn(tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yn(tt.paint_raster["raster-brightness-max"]),"raster-saturation":new yn(tt.paint_raster["raster-saturation"]),"raster-contrast":new yn(tt.paint_raster["raster-contrast"]),"raster-resampling":new yn(tt.paint_raster["raster-resampling"]),"raster-fade-duration":new yn(tt.paint_raster["raster-fade-duration"])})},P1=function(n){function r(s){n.call(this,s,k1)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r}(Dl),L1=function(n){function r(s){n.call(this,s,{}),this.implementation=s}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},r.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},r.prototype.recalculate=function(){},r.prototype.updateTransitions=function(){},r.prototype.hasTransition=function(){},r.prototype.serialize=function(){},r.prototype.onAdd=function(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},r.prototype.onRemove=function(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},r}(Dl),D1={circle:Cd,heatmap:tg,hillshade:eg,fill:Fs,"fill-extrusion":zd,line:hy,symbol:E1,background:T1,raster:P1},ky=P.HTMLImageElement,Py=P.HTMLCanvasElement,Ly=P.HTMLVideoElement,Dy=P.ImageData,Xd=P.ImageBitmap,Nh=function(n,r,s,d){this.context=n,this.format=s,this.texture=n.gl.createTexture(),this.update(r,d)};Nh.prototype.update=function(n,r,s){var d=n.width,v=n.height,x=!(this.size&&this.size[0]===d&&this.size[1]===v||s),A=this.context,T=A.gl;if(this.useMipmap=!!(r&&r.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!r||r.premultiply!==!1)),x)this.size=[d,v],n instanceof ky||n instanceof Py||n instanceof Ly||n instanceof Dy||Xd&&n instanceof Xd?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,n):T.texImage2D(T.TEXTURE_2D,0,this.format,d,v,0,this.format,T.UNSIGNED_BYTE,n.data);else{var D=s||{x:0,y:0},O=D.x,N=D.y;n instanceof ky||n instanceof Py||n instanceof Ly||n instanceof Dy||Xd&&n instanceof Xd?T.texSubImage2D(T.TEXTURE_2D,0,O,N,T.RGBA,T.UNSIGNED_BYTE,n):T.texSubImage2D(T.TEXTURE_2D,0,O,N,d,v,T.RGBA,T.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D)},Nh.prototype.bind=function(n,r,s){var d=this.context.gl;d.bindTexture(d.TEXTURE_2D,this.texture),s!==d.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(s=d.LINEAR),n!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,n),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,s||n),this.filter=n),r!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,r),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,r),this.wrap=r)},Nh.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Nh.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ag=function(n){var r=this;this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){r._triggered=!1,r._callback()})};Ag.prototype.trigger=function(){var n=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){n._triggered=!1,n._callback()},0))},Ag.prototype.remove=function(){delete this._channel,this._callback=function(){}};var zf=function(n,r,s){this.target=n,this.parent=r,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Mt(["receive","process"],this),this.invoker=new Ag(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=_e()?n:P};function Ry(n,r,s){var d=2*Math.PI*6378137/256/Math.pow(2,s);return[n*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}zf.prototype.send=function(n,r,s,d,v){var x=this;v===void 0&&(v=!1);var A=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[A]=s);var T=Pi(this.globalScope)?void 0:[];return this.target.postMessage({id:A,type:n,hasCallback:!!s,targetMapId:d,mustQueue:v,sourceMapId:this.mapId,data:Lo(r,T)},T),{cancel:function(){s&&delete x.callbacks[A],x.target.postMessage({id:A,type:"<cancel>",targetMapId:d,sourceMapId:x.mapId})}}},zf.prototype.receive=function(n){var r=n.data,s=r.id;if(s&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){delete this.tasks[s];var d=this.cancelCallbacks[s];delete this.cancelCallbacks[s],d&&d()}else _e()||r.mustQueue?(this.tasks[s]=r,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,r)},zf.prototype.process=function(){if(this.taskQueue.length){var n=this.taskQueue.shift(),r=this.tasks[n];delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(n,r)}},zf.prototype.processTask=function(n,r){var s=this;if(r.type==="<response>"){var d=this.callbacks[n];delete this.callbacks[n],d&&(r.error?d(Do(r.error)):d(null,Do(r.data)))}else{var v=!1,x=Pi(this.globalScope)?void 0:[],A=r.hasCallback?function(N,V){v=!0,delete s.cancelCallbacks[n],s.target.postMessage({id:n,type:"<response>",sourceMapId:s.mapId,error:N?Lo(N):null,data:Lo(V,x)},x)}:function(N){v=!0},T=null,D=Do(r.data);if(this.parent[r.type])T=this.parent[r.type](r.sourceMapId,D,A);else if(this.parent.getWorkerSource){var O=r.type.split(".");T=this.parent.getWorkerSource(r.sourceMapId,O[0],D.source)[O[1]](D,A)}else A(new Error("Could not find function "+r.type));!v&&T&&T.cancel&&(this.cancelCallbacks[n]=T.cancel)}},zf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Io=function(n,r){n&&(r?this.setSouthWest(n).setNorthEast(r):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))};Io.prototype.setNorthEast=function(n){return this._ne=n instanceof Rr?new Rr(n.lng,n.lat):Rr.convert(n),this},Io.prototype.setSouthWest=function(n){return this._sw=n instanceof Rr?new Rr(n.lng,n.lat):Rr.convert(n),this},Io.prototype.extend=function(n){var r,s,d=this._sw,v=this._ne;if(n instanceof Rr)r=n,s=n;else{if(!(n instanceof Io))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Io.convert(n)):this.extend(Rr.convert(n)):this;if(s=n._ne,!(r=n._sw)||!s)return this}return d||v?(d.lng=Math.min(r.lng,d.lng),d.lat=Math.min(r.lat,d.lat),v.lng=Math.max(s.lng,v.lng),v.lat=Math.max(s.lat,v.lat)):(this._sw=new Rr(r.lng,r.lat),this._ne=new Rr(s.lng,s.lat)),this},Io.prototype.getCenter=function(){return new Rr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Io.prototype.getSouthWest=function(){return this._sw},Io.prototype.getNorthEast=function(){return this._ne},Io.prototype.getNorthWest=function(){return new Rr(this.getWest(),this.getNorth())},Io.prototype.getSouthEast=function(){return new Rr(this.getEast(),this.getSouth())},Io.prototype.getWest=function(){return this._sw.lng},Io.prototype.getSouth=function(){return this._sw.lat},Io.prototype.getEast=function(){return this._ne.lng},Io.prototype.getNorth=function(){return this._ne.lat},Io.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Io.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Io.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Io.prototype.contains=function(n){var r=Rr.convert(n),s=r.lng,d=r.lat,v=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&v},Io.convert=function(n){return!n||n instanceof Io?n:new Io(n)};var Rr=function(n,r){if(isNaN(n)||isNaN(r))throw new Error("Invalid LngLat object: ("+n+", "+r+")");if(this.lng=+n,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Rr.prototype.wrap=function(){return new Rr(pt(this.lng,-180,180),this.lat)},Rr.prototype.toArray=function(){return[this.lng,this.lat]},Rr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Rr.prototype.distanceTo=function(n){var r=Math.PI/180,s=this.lat*r,d=n.lat*r,v=Math.sin(s)*Math.sin(d)+Math.cos(s)*Math.cos(d)*Math.cos((n.lng-this.lng)*r);return 63710088e-1*Math.acos(Math.min(v,1))},Rr.prototype.toBounds=function(n){n===void 0&&(n=0);var r=360*n/40075017,s=r/Math.cos(Math.PI/180*this.lat);return new Io(new Rr(this.lng-s,this.lat-r),new Rr(this.lng+s,this.lat+r))},Rr.convert=function(n){if(n instanceof Rr)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Rr(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Rr(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var zy=2*Math.PI*63710088e-1;function By(n){return zy*Math.cos(n*Math.PI/180)}function Kd(n){return(180+n)/360}function wg(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Oy(n,r){return n/By(r)}function Cg(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}var Vh=function(n,r,s){s===void 0&&(s=0),this.x=+n,this.y=+r,this.z=+s};Vh.fromLngLat=function(n,r){r===void 0&&(r=0);var s=Rr.convert(n);return new Vh(Kd(s.lng),wg(s.lat),Oy(r,s.lat))},Vh.prototype.toLngLat=function(){return new Rr(360*this.x-180,Cg(this.y))},Vh.prototype.toAltitude=function(){return this.z*By(Cg(this.y))},Vh.prototype.meterInMercatorCoordinateUnits=function(){return 1/zy*(n=Cg(this.y),1/Math.cos(n*Math.PI/180));var n};var Uh=function(n,r,s){this.z=n,this.x=r,this.y=s,this.key=Fp(0,n,n,r,s)};Uh.prototype.equals=function(n){return this.z===n.z&&this.x===n.x&&this.y===n.y},Uh.prototype.url=function(n,r){var s,d,v,x,A,T=(d=this.y,v=this.z,x=Ry(256*(s=this.x),256*(d=Math.pow(2,v)-d-1),v),A=Ry(256*(s+1),256*(d+1),v),x[0]+","+x[1]+","+A[0]+","+A[1]),D=function(O,N,V){for(var $,Q="",ct=O;ct>0;ct--)Q+=(N&($=1<<ct-1)?1:0)+(V&$?2:0);return Q}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",D).replace("{bbox-epsg-3857}",T)},Uh.prototype.getTilePoint=function(n){var r=Math.pow(2,this.z);return new S(8192*(n.x*r-this.x),8192*(n.y*r-this.y))},Uh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Fy=function(n,r){this.wrap=n,this.canonical=r,this.key=Fp(n,r.z,r.z,r.x,r.y)},Mo=function(n,r,s,d,v){this.overscaledZ=n,this.wrap=r,this.canonical=new Uh(s,+d,+v),this.key=Fp(r,n,s,d,v)};function Fp(n,r,s,d,v){(n*=2)<0&&(n=-1*n-1);var x=1<<s;return(x*x*n+x*v+d).toString(36)+s.toString(36)+r.toString(36)}Mo.prototype.equals=function(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)},Mo.prototype.scaledTo=function(n){var r=this.canonical.z-n;return n>this.canonical.z?new Mo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mo(n,this.wrap,n,this.canonical.x>>r,this.canonical.y>>r)},Mo.prototype.calculateScaledKey=function(n,r){var s=this.canonical.z-n;return n>this.canonical.z?Fp(this.wrap*+r,n,this.canonical.z,this.canonical.x,this.canonical.y):Fp(this.wrap*+r,n,n,this.canonical.x>>s,this.canonical.y>>s)},Mo.prototype.isChildOf=function(n){if(n.wrap!==this.wrap)return!1;var r=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>r&&n.canonical.y===this.canonical.y>>r},Mo.prototype.children=function(n){if(this.overscaledZ>=n)return[new Mo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var r=this.canonical.z+1,s=2*this.canonical.x,d=2*this.canonical.y;return[new Mo(r,this.wrap,r,s,d),new Mo(r,this.wrap,r,s+1,d),new Mo(r,this.wrap,r,s,d+1),new Mo(r,this.wrap,r,s+1,d+1)]},Mo.prototype.isLessThan=function(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))},Mo.prototype.wrapped=function(){return new Mo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Mo.prototype.unwrapTo=function(n){return new Mo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)},Mo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Mo.prototype.toUnwrapped=function(){return new Fy(this.wrap,this.canonical)},Mo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Mo.prototype.getTilePoint=function(n){return this.canonical.getTilePoint(new Vh(n.x-this.wrap,n.y))},Ye("CanonicalTileID",Uh),Ye("OverscaledTileID",Mo,{omit:["posMatrix"]});var wc=function(n,r,s){if(this.uid=n,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(s&&s!=="mapbox"&&s!=="terrarium")return Ot('"'+s+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=r.height;var d=this.dim=r.height-2;this.data=new Uint32Array(r.data.buffer),this.encoding=s||"mapbox";for(var v=0;v<d;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(d,v)]=this.data[this._idx(d-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,d)]=this.data[this._idx(v,d-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(d,-1)]=this.data[this._idx(d-1,0)],this.data[this._idx(-1,d)]=this.data[this._idx(0,d-1)],this.data[this._idx(d,d)]=this.data[this._idx(d-1,d-1)]};wc.prototype.get=function(n,r){var s=new Uint8Array(this.data.buffer),d=4*this._idx(n,r);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(s[d],s[d+1],s[d+2])},wc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},wc.prototype._idx=function(n,r){if(n<-1||n>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(n+1)},wc.prototype._unpackMapbox=function(n,r,s){return(256*n*256+256*r+s)/10-1e4},wc.prototype._unpackTerrarium=function(n,r,s){return 256*n+r+s/256-32768},wc.prototype.getPixels=function(){return new Qa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},wc.prototype.backfillBorder=function(n,r,s){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");var d=r*this.dim,v=r*this.dim+this.dim,x=s*this.dim,A=s*this.dim+this.dim;switch(r){case-1:d=v-1;break;case 1:v=d+1}switch(s){case-1:x=A-1;break;case 1:A=x+1}for(var T=-r*this.dim,D=-s*this.dim,O=x;O<A;O++)for(var N=d;N<v;N++)this.data[this._idx(N,O)]=n.data[this._idx(N+T,O+D)]},Ye("DEMData",wc);var Np=function(n){this._stringToNumber={},this._numberToString=[];for(var r=0;r<n.length;r++){var s=n[r];this._stringToNumber[s]=r,this._numberToString[r]=s}};Np.prototype.encode=function(n){return this._stringToNumber[n]},Np.prototype.decode=function(n){return this._numberToString[n]};var Qd=function(n,r,s,d,v){this.type="Feature",this._vectorTileFeature=n,n._z=r,n._x=s,n._y=d,this.properties=n.properties,this.id=v},Bf={geometry:{configurable:!0}};Bf.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Bf.geometry.set=function(n){this._geometry=n},Qd.prototype.toJSON=function(){var n={geometry:this.geometry};for(var r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(n[r]=this[r]);return n},Object.defineProperties(Qd.prototype,Bf);var Of=function(){this.state={},this.stateChanges={},this.deletedStates={}};Of.prototype.updateState=function(n,r,s){var d=String(r);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][d]=this.stateChanges[n][d]||{},J(this.stateChanges[n][d],s),this.deletedStates[n]===null)for(var v in this.deletedStates[n]={},this.state[n])v!==d&&(this.deletedStates[n][v]=null);else if(this.deletedStates[n]&&this.deletedStates[n][d]===null)for(var x in this.deletedStates[n][d]={},this.state[n][d])s[x]||(this.deletedStates[n][d][x]=null);else for(var A in s)this.deletedStates[n]&&this.deletedStates[n][d]&&this.deletedStates[n][d][A]===null&&delete this.deletedStates[n][d][A]},Of.prototype.removeFeatureState=function(n,r,s){if(this.deletedStates[n]!==null){var d=String(r);if(this.deletedStates[n]=this.deletedStates[n]||{},s&&r!==void 0)this.deletedStates[n][d]!==null&&(this.deletedStates[n][d]=this.deletedStates[n][d]||{},this.deletedStates[n][d][s]=null);else if(r!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][d])for(s in this.deletedStates[n][d]={},this.stateChanges[n][d])this.deletedStates[n][d][s]=null;else this.deletedStates[n][d]=null;else this.deletedStates[n]=null}},Of.prototype.getState=function(n,r){var s=String(r),d=J({},(this.state[n]||{})[s],(this.stateChanges[n]||{})[s]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){var v=this.deletedStates[n][r];if(v===null)return{};for(var x in v)delete d[x]}return d},Of.prototype.initializeTileState=function(n,r){n.setFeatureState(this.state,r)},Of.prototype.coalesceChanges=function(n,r){var s={};for(var d in this.stateChanges){this.state[d]=this.state[d]||{};var v={};for(var x in this.stateChanges[d])this.state[d][x]||(this.state[d][x]={}),J(this.state[d][x],this.stateChanges[d][x]),v[x]=this.state[d][x];s[d]=v}for(var A in this.deletedStates){this.state[A]=this.state[A]||{};var T={};if(this.deletedStates[A]===null)for(var D in this.state[A])T[D]={},this.state[A][D]={};else for(var O in this.deletedStates[A]){if(this.deletedStates[A][O]===null)this.state[A][O]={};else for(var N=0,V=Object.keys(this.deletedStates[A][O]);N<V.length;N+=1)delete this.state[A][O][V[N]];T[O]=this.state[A][O]}s[A]=s[A]||{},J(s[A],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(s).length!==0)for(var $ in n)n[$].setFeatureState(s,r)};var Cc=function(n,r){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ya(8192,16,0),this.grid3D=new Ya(8192,16,0),this.featureIndexArray=new H,this.promoteId=r};function Ny(n,r,s,d,v){return jt(n,function(x,A){var T=r instanceof mc?r.get(A):null;return T&&T.evaluate?T.evaluate(s,d,v):T})}function Vy(n){for(var r=1/0,s=1/0,d=-1/0,v=-1/0,x=0,A=n;x<A.length;x+=1){var T=A[x];r=Math.min(r,T.x),s=Math.min(s,T.y),d=Math.max(d,T.x),v=Math.max(v,T.y)}return{minX:r,minY:s,maxX:d,maxY:v}}function R1(n,r){return r-n}Cc.prototype.insert=function(n,r,s,d,v,x){var A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,d,v);for(var T=x?this.grid3D:this.grid,D=0;D<r.length;D++){for(var O=r[D],N=[1/0,1/0,-1/0,-1/0],V=0;V<O.length;V++){var $=O[V];N[0]=Math.min(N[0],$.x),N[1]=Math.min(N[1],$.y),N[2]=Math.max(N[2],$.x),N[3]=Math.max(N[3],$.y)}N[0]<8192&&N[1]<8192&&N[2]>=0&&N[3]>=0&&T.insert(A,N[0],N[1],N[2],N[3])}},Cc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new hu.VectorTile(new Xn(this.rawTileData)).layers,this.sourceLayerCoder=new Np(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Cc.prototype.query=function(n,r,s,d){var v=this;this.loadVTLayers();for(var x=n.params||{},A=8192/n.tileSize/n.scale,T=kl(x.filter),D=n.queryGeometry,O=n.queryPadding*A,N=Vy(D),V=this.grid.query(N.minX-O,N.minY-O,N.maxX+O,N.maxY+O),$=Vy(n.cameraQueryGeometry),Q=this.grid3D.query($.minX-O,$.minY-O,$.maxX+O,$.maxY+O,function(ee,ie,fe,Me){return function(Ne,_n,Ze,Mn,Je){for(var ri=0,On=Ne;ri<On.length;ri+=1){var pn=On[ri];if(_n<=pn.x&&Ze<=pn.y&&Mn>=pn.x&&Je>=pn.y)return!0}var hi=[new S(_n,Ze),new S(_n,Je),new S(Mn,Je),new S(Mn,Ze)];if(Ne.length>2){for(var Kn=0,Si=hi;Kn<Si.length;Kn+=1)if(zl(Ne,Si[Kn]))return!0}for(var Sn=0;Sn<Ne.length-1;Sn++)if(au(Ne[Sn],Ne[Sn+1],hi))return!0;return!1}(n.cameraQueryGeometry,ee-O,ie-O,fe+O,Me+O)}),ct=0,mt=Q;ct<mt.length;ct+=1)V.push(mt[ct]);V.sort(R1);for(var Et,bt={},Ut=function(ee){var ie=V[ee];if(ie!==Et){Et=ie;var fe=v.featureIndexArray.get(ie),Me=null;v.loadMatchingFeature(bt,fe.bucketIndex,fe.sourceLayerIndex,fe.featureIndex,T,x.layers,x.availableImages,r,s,d,function(Ne,_n,Ze){return Me||(Me=Ir(Ne)),_n.queryIntersectsFeature(D,Ne,Ze,Me,v.z,n.transform,A,n.pixelPosMatrix)})}},$t=0;$t<V.length;$t++)Ut($t);return bt},Cc.prototype.loadMatchingFeature=function(n,r,s,d,v,x,A,T,D,O,N){var V=this.bucketLayerIDs[r];if(!x||function(Ne,_n){for(var Ze=0;Ze<Ne.length;Ze++)if(_n.indexOf(Ne[Ze])>=0)return!0;return!1}(x,V)){var $=this.sourceLayerCoder.decode(s),Q=this.vtLayers[$].feature(d);if(v.needGeometry){var ct=_r(Q,!0);if(!v.filter(new Bn(this.tileID.overscaledZ),ct,this.tileID.canonical))return}else if(!v.filter(new Bn(this.tileID.overscaledZ),Q))return;for(var mt=this.getId(Q,$),Et=0;Et<V.length;Et++){var bt=V[Et];if(!(x&&x.indexOf(bt)<0)){var Ut=T[bt];if(Ut){var $t={};mt!==void 0&&O&&($t=O.getState(Ut.sourceLayer||"_geojsonTileLayer",mt));var ee=J({},D[bt]);ee.paint=Ny(ee.paint,Ut.paint,Q,$t,A),ee.layout=Ny(ee.layout,Ut.layout,Q,$t,A);var ie=!N||N(Q,Ut,$t);if(ie){var fe=new Qd(Q,this.z,this.x,this.y,mt);fe.layer=ee;var Me=n[bt];Me===void 0&&(Me=n[bt]=[]),Me.push({featureIndex:d,feature:fe,intersectionZ:ie})}}}}}},Cc.prototype.lookupSymbolFeatures=function(n,r,s,d,v,x,A,T){var D={};this.loadVTLayers();for(var O=kl(v),N=0,V=n;N<V.length;N+=1)this.loadMatchingFeature(D,s,d,V[N],O,x,A,T,r);return D},Cc.prototype.hasLayer=function(n){for(var r=0,s=this.bucketLayerIDs;r<s.length;r+=1)for(var d=0,v=s[r];d<v.length;d+=1)if(n===v[d])return!0;return!1},Cc.prototype.getId=function(n,r){var s=n.id;return this.promoteId&&typeof(s=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]])=="boolean"&&(s=Number(s)),s},Ye("FeatureIndex",Cc,{omit:["rawTileData","sourceLayerCoder"]});var Go=function(n,r){this.tileID=n,this.uid=ft(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Go.prototype.registerFadeDuration=function(n){var r=n+this.timeAdded;r<Qe.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)},Go.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Go.prototype.loadVectorData=function(n,r,s){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){for(var d in n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(O,N){var V={};if(!N)return V;for(var $=function(){var mt=ct[Q],Et=mt.layerIds.map(function($t){return N.getLayer($t)}).filter(Boolean);if(Et.length!==0){mt.layers=Et,mt.stateDependentLayerIds&&(mt.stateDependentLayers=mt.stateDependentLayerIds.map(function($t){return Et.filter(function(ee){return ee.id===$t})[0]}));for(var bt=0,Ut=Et;bt<Ut.length;bt+=1)V[Ut[bt].id]=mt}},Q=0,ct=O;Q<ct.length;Q+=1)$();return V}(n.buckets,r.style),this.hasSymbolBuckets=!1,this.buckets){var v=this.buckets[d];if(v instanceof cr){if(this.hasSymbolBuckets=!0,!s)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var x in this.buckets){var A=this.buckets[x];if(A instanceof cr&&A.hasRTLText){this.hasRTLText=!0,ps.isLoading()||ps.isLoaded()||Af()!=="deferred"||ol();break}}for(var T in this.queryPadding=0,this.buckets){var D=this.buckets[T];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(T).queryRadius(D))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new h},Go.prototype.unloadVectorData=function(){for(var n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Go.prototype.getBucket=function(n){return this.buckets[n.id]},Go.prototype.upload=function(n){for(var r in this.buckets){var s=this.buckets[r];s.uploadPending()&&s.upload(n)}var d=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Nh(n,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Nh(n,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)},Go.prototype.prepare=function(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)},Go.prototype.queryRenderedFeatures=function(n,r,s,d,v,x,A,T,D,O){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:v,scale:x,tileSize:this.tileSize,pixelPosMatrix:O,transform:T,params:A,queryPadding:this.queryPadding*D},n,r,s):{}},Go.prototype.querySourceFeatures=function(n,r){var s=this.latestFeatureIndex;if(s&&s.rawTileData){var d=s.loadVTLayers(),v=r?r.sourceLayer:"",x=d._geojsonTileLayer||d[v];if(x)for(var A=kl(r&&r.filter),T=this.tileID.canonical,D=T.z,O=T.x,N=T.y,V={z:D,x:O,y:N},$=0;$<x.length;$++){var Q=x.feature($);if(A.needGeometry){var ct=_r(Q,!0);if(!A.filter(new Bn(this.tileID.overscaledZ),ct,this.tileID.canonical))continue}else if(!A.filter(new Bn(this.tileID.overscaledZ),Q))continue;var mt=s.getId(Q,v),Et=new Qd(Q,D,O,N,mt);Et.tile=V,n.push(Et)}}},Go.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Go.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Go.prototype.setExpiryData=function(n){var r=this.expirationTime;if(n.cacheControl){var s=Ge(n.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){var d=Date.now(),v=!1;if(this.expirationTime>d)v=!1;else if(r)if(this.expirationTime<r)v=!0;else{var x=this.expirationTime-r;x?this.expirationTime=d+Math.max(x,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Go.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Go.prototype.setFeatureState=function(n,r){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(n).length!==0){var s=this.latestFeatureIndex.loadVTLayers();for(var d in this.buckets)if(r.style.hasLayer(d)){var v=this.buckets[d],x=v.layers[0].sourceLayer||"_geojsonTileLayer",A=s[x],T=n[x];if(A&&T&&Object.keys(T).length!==0){v.update(T,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});var D=r&&r.style&&r.style.getLayer(d);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(v)))}}}},Go.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Go.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Qe.now()},Go.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Go.prototype.setHoldDuration=function(n){this.symbolFadeHoldUntil=Qe.now()+n},Go.prototype.setDependencies=function(n,r){for(var s={},d=0,v=r;d<v.length;d+=1)s[v[d]]=!0;this.dependencies[n]=s},Go.prototype.hasDependency=function(n,r){for(var s=0,d=n;s<d.length;s+=1){var v=this.dependencies[d[s]];if(v){for(var x=0,A=r;x<A.length;x+=1)if(v[A[x]])return!0}}return!1};var ah=P.performance,Uy=function(n){this._marks={start:[n.url,"start"].join("#"),end:[n.url,"end"].join("#"),measure:n.url.toString()},ah.mark(this._marks.start)};Uy.prototype.finish=function(){ah.mark(this._marks.end);var n=ah.getEntriesByName(this._marks.measure);return n.length===0&&(ah.measure(this._marks.measure,this._marks.start,this._marks.end),n=ah.getEntriesByName(this._marks.measure),ah.clearMarks(this._marks.start),ah.clearMarks(this._marks.end),ah.clearMeasures(this._marks.measure)),n},o.Actor=zf,o.AlphaImage=ih,o.CanonicalTileID=Uh,o.CollisionBoxArray=h,o.Color=ai,o.DEMData=wc,o.DataConstantProperty=yn,o.DictionaryCoder=Np,o.EXTENT=8192,o.ErrorEvent=Tt,o.EvaluationParameters=Bn,o.Event=gt,o.Evented=zt,o.FeatureIndex=Cc,o.FillBucket=cu,o.FillExtrusionBucket=Nl,o.ImageAtlas=Lf,o.ImagePosition=Ud,o.LineBucket=Ua,o.LngLat=Rr,o.LngLatBounds=Io,o.MercatorCoordinate=Vh,o.ONE_EM=24,o.OverscaledTileID=Mo,o.Point=S,o.Point$1=S,o.Properties=ta,o.Protobuf=Xn,o.RGBAImage=Qa,o.RequestManager=te,o.RequestPerformance=Uy,o.ResourceType=$s,o.SegmentVector=it,o.SourceFeatureState=Of,o.StructArrayLayout1ui2=Ep,o.StructArrayLayout2f1f2i16=gc,o.StructArrayLayout2i4=Ou,o.StructArrayLayout3ui6=Fu,o.StructArrayLayout4i8=rt,o.SymbolBucket=cr,o.Texture=Nh,o.Tile=Go,o.Transitionable=Jo,o.Uniform1f=Ce,o.Uniform1i=ve,o.Uniform2f=Le,o.Uniform3f=We,o.Uniform4f=fn,o.UniformColor=Tn,o.UniformMatrix4f=Oi,o.UnwrappedTileID=Fy,o.ValidationError=_t,o.WritingMode=vs,o.ZoomHistory=ru,o.add=function(n,r,s){return n[0]=r[0]+s[0],n[1]=r[1]+s[1],n[2]=r[2]+s[2],n},o.addDynamicAttributes=xg,o.asyncAll=function(n,r,s){if(!n.length)return s(null,[]);var d=n.length,v=new Array(n.length),x=null;n.forEach(function(A,T){r(A,function(D,O){D&&(x=D),v[T]=O,--d==0&&s(x,v)})})},o.bezier=G,o.bindAll=Mt,o.browser=Qe,o.cacheEntryPossiblyAdded=function(n){++wr>Xo&&(n.getActor().send("enforceCacheSizeLimit",qr),wr=0)},o.clamp=X,o.clearTileCache=function(n){var r=P.caches.delete("mapbox-tiles");n&&r.catch(n).then(function(){return n()})},o.clipLine=wy,o.clone=function(n){var r=new Xi(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r},o.clone$1=Bt,o.clone$2=function(n){var r=new Xi(3);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r},o.collisionCircleLayout=cg,o.config=me,o.create=function(){var n=new Xi(16);return Xi!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},o.create$1=function(){var n=new Xi(9);return Xi!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n},o.create$2=function(){var n=new Xi(4);return Xi!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n},o.createCommonjsModule=y,o.createExpression=nu,o.createLayout=mo,o.createStyleLayer=function(n){return n.type==="custom"?new L1(n):new D1[n.type](n)},o.cross=function(n,r,s){var d=r[0],v=r[1],x=r[2],A=s[0],T=s[1],D=s[2];return n[0]=v*D-x*T,n[1]=x*A-d*D,n[2]=d*T-v*A,n},o.deepEqual=function n(r,s){if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(var d=0;d<r.length;d++)if(!n(r[d],s[d]))return!1;return!0}if(typeof r=="object"&&r!==null&&s!==null){if(typeof s!="object"||Object.keys(r).length!==Object.keys(s).length)return!1;for(var v in r)if(!n(r[v],s[v]))return!1;return!0}return r===s},o.dot=function(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]},o.dot$1=function(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]+n[3]*r[3]},o.ease=j,o.emitValidationErrors=Ln,o.endsWith=Ht,o.enforceCacheSizeLimit=function(n){va(),Cn&&Cn.then(function(r){r.keys().then(function(s){for(var d=0;d<s.length-n;d++)r.delete(s[d])})})},o.evaluateSizeForFeature=fu,o.evaluateSizeForZoom=rh,o.evaluateVariableOffset=Ey,o.evented=wp,o.extend=J,o.featureFilter=kl,o.filterObject=Qt,o.fromRotation=function(n,r){var s=Math.sin(r),d=Math.cos(r);return n[0]=d,n[1]=s,n[2]=0,n[3]=-s,n[4]=d,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},o.getAnchorAlignment=zp,o.getAnchorJustification=_g,o.getArrayBuffer=Au,o.getImage=Z,o.getJSON=function(n,r){return Xs(J(n,{type:"json"}),r)},o.getRTLTextPluginStatus=Af,o.getReferrer=xl,o.getVideo=function(n,r){var s,d,v=P.document.createElement("video");v.muted=!0,v.onloadstart=function(){r(null,v)};for(var x=0;x<n.length;x++){var A=P.document.createElement("source");s=n[x],d=void 0,(d=P.document.createElement("a")).href=s,(d.protocol!==P.document.location.protocol||d.host!==P.document.location.host)&&(v.crossOrigin="Anonymous"),A.src=n[x],v.appendChild(A)}return{cancel:function(){}}},o.identity=ms,o.invert=function(n,r){var s=r[0],d=r[1],v=r[2],x=r[3],A=r[4],T=r[5],D=r[6],O=r[7],N=r[8],V=r[9],$=r[10],Q=r[11],ct=r[12],mt=r[13],Et=r[14],bt=r[15],Ut=s*T-d*A,$t=s*D-v*A,ee=s*O-x*A,ie=d*D-v*T,fe=d*O-x*T,Me=v*O-x*D,Ne=N*mt-V*ct,_n=N*Et-$*ct,Ze=N*bt-Q*ct,Mn=V*Et-$*mt,Je=V*bt-Q*mt,ri=$*bt-Q*Et,On=Ut*ri-$t*Je+ee*Mn+ie*Ze-fe*_n+Me*Ne;return On?(n[0]=(T*ri-D*Je+O*Mn)*(On=1/On),n[1]=(v*Je-d*ri-x*Mn)*On,n[2]=(mt*Me-Et*fe+bt*ie)*On,n[3]=($*fe-V*Me-Q*ie)*On,n[4]=(D*Ze-A*ri-O*_n)*On,n[5]=(s*ri-v*Ze+x*_n)*On,n[6]=(Et*ee-ct*Me-bt*$t)*On,n[7]=(N*Me-$*ee+Q*$t)*On,n[8]=(A*Je-T*Ze+O*Ne)*On,n[9]=(d*Ze-s*Je-x*Ne)*On,n[10]=(ct*fe-mt*ee+bt*Ut)*On,n[11]=(V*ee-N*fe-Q*Ut)*On,n[12]=(T*_n-A*Mn-D*Ne)*On,n[13]=(s*Mn-d*_n+v*Ne)*On,n[14]=(mt*$t-ct*ie-Et*Ut)*On,n[15]=(N*ie-V*$t+$*Ut)*On,n):null},o.isChar=Be,o.isMapboxURL=le,o.keysDifference=function(n,r){var s=[];for(var d in n)d in r||s.push(d);return s},o.makeRequest=Xs,o.mapObject=jt,o.mercatorXfromLng=Kd,o.mercatorYfromLat=wg,o.mercatorZfromAltitude=Oy,o.mul=Jm,o.multiply=Ca,o.mvt=hu,o.nextPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},o.normalize=function(n,r){var s=r[0],d=r[1],v=r[2],x=s*s+d*d+v*v;return x>0&&(x=1/Math.sqrt(x)),n[0]=r[0]*x,n[1]=r[1]*x,n[2]=r[2]*x,n},o.number=$r,o.offscreenCanvasSupported=To,o.ortho=function(n,r,s,d,v,x,A){var T=1/(r-s),D=1/(d-v),O=1/(x-A);return n[0]=-2*T,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*D,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*O,n[11]=0,n[12]=(r+s)*T,n[13]=(v+d)*D,n[14]=(A+x)*O,n[15]=1,n},o.parseGlyphPBF=function(n){return new Xn(n).readFields(fg,[])},o.pbf=Xn,o.performSymbolLayout=function(n,r,s,d,v,x,A){n.createArrays(),n.tilePixelRatio=8192/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;var T=n.layers[0].layout,D=n.layers[0]._unevaluatedLayout._values,O={};if(n.textSizeData.kind==="composite"){var N=n.textSizeData,V=N.maxZoom;O.compositeTextSizes=[D["text-size"].possiblyEvaluate(new Bn(N.minZoom),A),D["text-size"].possiblyEvaluate(new Bn(V),A)]}if(n.iconSizeData.kind==="composite"){var $=n.iconSizeData,Q=$.maxZoom;O.compositeIconSizes=[D["icon-size"].possiblyEvaluate(new Bn($.minZoom),A),D["icon-size"].possiblyEvaluate(new Bn(Q),A)]}O.layoutTextSize=D["text-size"].possiblyEvaluate(new Bn(n.zoom+1),A),O.layoutIconSize=D["icon-size"].possiblyEvaluate(new Bn(n.zoom+1),A),O.textMaxSize=D["text-size"].possiblyEvaluate(new Bn(18));for(var ct=24*T.get("text-line-height"),mt=T.get("text-rotation-alignment")==="map"&&T.get("symbol-placement")!=="point",Et=T.get("text-keep-upright"),bt=T.get("text-size"),Ut=function(){var ie=ee[$t],fe=T.get("text-font").evaluate(ie,{},A).join(","),Me=bt.evaluate(ie,{},A),Ne=O.layoutTextSize.evaluate(ie,{},A),_n=O.layoutIconSize.evaluate(ie,{},A),Ze={horizontal:{},vertical:void 0},Mn=ie.text,Je=[0,0];if(Mn){var ri=Mn.toString(),On=24*T.get("text-letter-spacing").evaluate(ie,{},A),pn=function(bi){for(var dr=0,rr=bi;dr<rr.length;dr+=1)if(Ni=rr[dr].charCodeAt(0),Be.Arabic(Ni)||Be["Arabic Supplement"](Ni)||Be["Arabic Extended-A"](Ni)||Be["Arabic Presentation Forms-A"](Ni)||Be["Arabic Presentation Forms-B"](Ni))return!1;var Ni;return!0}(ri)?On:0,hi=T.get("text-anchor").evaluate(ie,{},A),Kn=T.get("text-variable-anchor");if(!Kn){var Si=T.get("text-radial-offset").evaluate(ie,{},A);Je=Si?Ey(hi,[24*Si,$d]):T.get("text-offset").evaluate(ie,{},A).map(function(bi){return 24*bi})}var Sn=mt?"center":T.get("text-justify").evaluate(ie,{},A),Wi=T.get("symbol-placement"),zr=Wi==="point"?24*T.get("text-max-width").evaluate(ie,{},A):0,Br=function(){n.allowVerticalPlacement&&rl(ri)&&(Ze.vertical=jd(Mn,r,s,v,fe,zr,ct,hi,"left",pn,Je,vs.vertical,!0,Wi,Ne,Me))};if(!mt&&Kn){for(var Mr=Sn==="auto"?Kn.map(function(bi){return _g(bi)}):[Sn],Or=!1,to=0;to<Mr.length;to++){var yo=Mr[to];if(!Ze.horizontal[yo])if(Or)Ze.horizontal[yo]=Ze.horizontal[0];else{var Eo=jd(Mn,r,s,v,fe,zr,ct,"center",yo,pn,Je,vs.horizontal,!1,Wi,Ne,Me);Eo&&(Ze.horizontal[yo]=Eo,Or=Eo.positionedLines.length===1)}}Br()}else{Sn==="auto"&&(Sn=_g(hi));var Ma=jd(Mn,r,s,v,fe,zr,ct,hi,Sn,pn,Je,vs.horizontal,!1,Wi,Ne,Me);Ma&&(Ze.horizontal[Sn]=Ma),Br(),rl(ri)&&mt&&Et&&(Ze.vertical=jd(Mn,r,s,v,fe,zr,ct,hi,Sn,pn,Je,vs.vertical,!1,Wi,Ne,Me))}}var qo=void 0,Ea=!1;if(ie.icon&&ie.icon.name){var ao=d[ie.icon.name];ao&&(qo=function(bi,dr,rr){var Ni=zp(rr),ja=dr[0]-bi.displaySize[0]*Ni.horizontalAlign,ca=dr[1]-bi.displaySize[1]*Ni.verticalAlign;return{image:bi,top:ca,bottom:ca+bi.displaySize[1],left:ja,right:ja+bi.displaySize[0]}}(v[ie.icon.name],T.get("icon-offset").evaluate(ie,{},A),T.get("icon-anchor").evaluate(ie,{},A)),Ea=ao.sdf,n.sdfIcons===void 0?n.sdfIcons=ao.sdf:n.sdfIcons!==ao.sdf&&Ot("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ao.pixelRatio!==n.pixelRatio||T.get("icon-rotate").constantOr(1)!==0)&&(n.iconsNeedLinear=!0))}var Wo=Ty(Ze.horizontal)||Ze.vertical;n.iconsInText=!!Wo&&Wo.iconsInText,(Wo||qo)&&function(bi,dr,rr,Ni,ja,ca,Er,hr,ha,Zi,ns){var Zn=ca.textMaxSize.evaluate(dr,{});Zn===void 0&&(Zn=Er);var qu,Ki=bi.layers[0].layout,Sr=Ki.get("icon-offset").evaluate(dr,{},ns),Ul=Ty(rr.horizontal),cl=Er/24,jh=bi.tilePixelRatio*cl,Ff=bi.tilePixelRatio*Zn/24,Ic=bi.tilePixelRatio*hr,Nf=bi.tilePixelRatio*Ki.get("symbol-spacing"),Jd=Ki.get("text-padding")*bi.tilePixelRatio,sh=Ki.get("icon-padding")*bi.tilePixelRatio,Vp=Ki.get("text-max-angle")/180*Math.PI,jl=Ki.get("text-rotation-alignment")==="map"&&Ki.get("symbol-placement")!=="point",Up=Ki.get("icon-rotation-alignment")==="map"&&Ki.get("symbol-placement")!=="point",Hl=Ki.get("symbol-placement"),Kr=Nf/2,Qr=Ki.get("icon-text-fit");Ni&&Qr!=="none"&&(bi.allowVerticalPlacement&&rr.vertical&&(qu=vg(Ni,rr.vertical,Qr,Ki.get("icon-text-fit-padding"),Sr,cl)),Ul&&(Ni=vg(Ni,Ul,Qr,Ki.get("icon-text-fit-padding"),Sr,cl)));var Mc=function(Hy,is){is.x<0||is.x>=8192||is.y<0||is.y>=8192||function(eo,pu,Tr,lh,om,qp,am,$u,sm,Wp,lm,um,Mg,Gy,Zp,qy,Wy,Zy,$y,cm,Vs,Hf,Yy,Yu,z1){var fa,ea,Gf,qf,Wf,Zh=eo.addToLineVertexArray(pu,Tr),Xy=0,Ky=0,Qy=0,Eg=0,Sg=-1,Tg=-1,Sc={},kg=ht(""),hm=0,Pg=0;if($u._unevaluatedLayout.getValue("text-radial-offset")===void 0?(hm=(fa=$u.layout.get("text-offset").evaluate(Vs,{},Yu).map(function(Yp){return 24*Yp}))[0],Pg=fa[1]):(hm=24*$u.layout.get("text-radial-offset").evaluate(Vs,{},Yu),Pg=$d),eo.allowVerticalPlacement&&lh.vertical){var Jy=$u.layout.get("text-rotate").evaluate(Vs,{},Yu)+90;qf=new Bp(sm,pu,Wp,lm,um,lh.vertical,Mg,Gy,Zp,Jy),am&&(Wf=new Bp(sm,pu,Wp,lm,um,am,Wy,Zy,Zp,Jy))}if(om){var Lg=$u.layout.get("icon-rotate").evaluate(Vs,{}),t0=$u.layout.get("icon-text-fit")!=="none",$h=Cy(om,Lg,Yy,t0),Dg=am?Cy(am,Lg,Yy,t0):void 0;Gf=new Bp(sm,pu,Wp,lm,um,om,Wy,Zy,!1,Lg),Xy=4*$h.length;var e0=eo.iconSizeData,$p=null;e0.kind==="source"?($p=[128*$u.layout.get("icon-size").evaluate(Vs,{})])[0]>32640&&Ot(eo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):e0.kind==="composite"&&(($p=[128*Hf.compositeIconSizes[0].evaluate(Vs,{},Yu),128*Hf.compositeIconSizes[1].evaluate(Vs,{},Yu)])[0]>32640||$p[1]>32640)&&Ot(eo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),eo.addSymbols(eo.icon,$h,$p,cm,$y,Vs,!1,pu,Zh.lineStartIndex,Zh.lineLength,-1,Yu),Sg=eo.icon.placedSymbolArray.length-1,Dg&&(Ky=4*Dg.length,eo.addSymbols(eo.icon,Dg,$p,cm,$y,Vs,vs.vertical,pu,Zh.lineStartIndex,Zh.lineLength,-1,Yu),Tg=eo.icon.placedSymbolArray.length-1)}for(var n0 in lh.horizontal){var fm=lh.horizontal[n0];if(!ea){kg=ht(fm.text);var i0=$u.layout.get("text-rotate").evaluate(Vs,{},Yu);ea=new Bp(sm,pu,Wp,lm,um,fm,Mg,Gy,Zp,i0)}var Rg=fm.positionedLines.length===1;if(Qy+=Sy(eo,pu,fm,qp,$u,Zp,Vs,qy,Zh,lh.vertical?vs.horizontal:vs.horizontalOnly,Rg?Object.keys(lh.horizontal):[n0],Sc,Sg,Hf,Yu),Rg)break}lh.vertical&&(Eg+=Sy(eo,pu,lh.vertical,qp,$u,Zp,Vs,qy,Zh,vs.vertical,["vertical"],Sc,Tg,Hf,Yu));var B1=ea?ea.boxStartIndex:eo.collisionBoxArray.length,O1=ea?ea.boxEndIndex:eo.collisionBoxArray.length,F1=qf?qf.boxStartIndex:eo.collisionBoxArray.length,N1=qf?qf.boxEndIndex:eo.collisionBoxArray.length,V1=Gf?Gf.boxStartIndex:eo.collisionBoxArray.length,U1=Gf?Gf.boxEndIndex:eo.collisionBoxArray.length,j1=Wf?Wf.boxStartIndex:eo.collisionBoxArray.length,H1=Wf?Wf.boxEndIndex:eo.collisionBoxArray.length,Xu=-1,pm=function(Yp,o0){return Yp&&Yp.circleDiameter?Math.max(Yp.circleDiameter,o0):o0};Xu=pm(ea,Xu),Xu=pm(qf,Xu),Xu=pm(Gf,Xu);var r0=(Xu=pm(Wf,Xu))>-1?1:0;r0&&(Xu*=z1/24),eo.glyphOffsetArray.length>=cr.MAX_GLYPHS&&Ot("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vs.sortKey!==void 0&&eo.addToSortKeyRanges(eo.symbolInstances.length,Vs.sortKey),eo.symbolInstances.emplaceBack(pu.x,pu.y,Sc.right>=0?Sc.right:-1,Sc.center>=0?Sc.center:-1,Sc.left>=0?Sc.left:-1,Sc.vertical||-1,Sg,Tg,kg,B1,O1,F1,N1,V1,U1,j1,H1,Wp,Qy,Eg,Xy,Ky,r0,0,Mg,hm,Pg,Xu)}(bi,is,Hy,rr,Ni,ja,qu,bi.layers[0],bi.collisionBoxArray,dr.index,dr.sourceLayerIndex,bi.index,jh,Jd,jl,ha,Ic,sh,Up,Sr,dr,ca,Zi,ns,Er)};if(Hl==="line")for(var Vf=0,tm=wy(dr.geometry,0,0,8192,8192);Vf<tm.length;Vf+=1)for(var em=tm[Vf],jp=0,Hp=x1(em,Nf,Vp,rr.vertical||Ul,Ni,24,Ff,bi.overscaling,8192);jp<Hp.length;jp+=1){var nm=Hp[jp];Ul&&w1(bi,Ul.text,Kr,nm)||Mc(em,nm)}else if(Hl==="line-center")for(var Uf=0,Ec=dr.geometry;Uf<Ec.length;Uf+=1){var Hh=Ec[Uf];if(Hh.length>1){var im=_1(Hh,Vp,rr.vertical||Ul,Ni,24,Ff);im&&Mc(Hh,im)}}else if(dr.type==="Polygon")for(var Gh=0,qh=og(dr.geometry,0);Gh<qh.length;Gh+=1){var Sa=qh[Gh],Wu=b1(Sa,16);Mc(Sa[0],new Ac(Wu.x,Wu.y,0))}else if(dr.type==="LineString")for(var Wh=0,Gp=dr.geometry;Wh<Gp.length;Wh+=1){var jf=Gp[Wh];Mc(jf,new Ac(jf[0].x,jf[0].y,0))}else if(dr.type==="Point")for(var Ig=0,jy=dr.geometry;Ig<jy.length;Ig+=1)for(var rm=0,Zu=jy[Ig];rm<Zu.length;rm+=1){var Ti=Zu[rm];Mc([Ti],new Ac(Ti.x,Ti.y,0))}}(n,ie,Ze,qo,d,O,Ne,_n,Je,Ea,A)},$t=0,ee=n.features;$t<ee.length;$t+=1)Ut();x&&n.generateCollisionDebugBuffers()},o.perspective=function(n,r,s,d,v){var x,A=1/Math.tan(r/2);return n[0]=A/s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=A,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,v!=null&&v!==1/0?(n[10]=(v+d)*(x=1/(d-v)),n[14]=2*v*d*x):(n[10]=-1,n[14]=-2*d),n},o.pick=function(n,r){for(var s={},d=0;d<r.length;d++){var v=r[d];v in n&&(s[v]=n[v])}return s},o.plugin=ps,o.polygonIntersectsPolygon=Rl,o.postMapLoadEvent=ar,o.postTurnstileEvent=Ri,o.potpack=vy,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=Ye,o.registerForPluginStateChange=function(n){return n({pluginStatus:Xa,pluginURL:Ps}),wp.on("pluginStateChange",n),n},o.renderColorRamp=Qv,o.rotate=function(n,r,s){var d=r[0],v=r[1],x=r[2],A=r[3],T=Math.sin(s),D=Math.cos(s);return n[0]=d*D+x*T,n[1]=v*D+A*T,n[2]=d*-T+x*D,n[3]=v*-T+A*D,n},o.rotateX=function(n,r,s){var d=Math.sin(s),v=Math.cos(s),x=r[4],A=r[5],T=r[6],D=r[7],O=r[8],N=r[9],V=r[10],$=r[11];return r!==n&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[4]=x*v+O*d,n[5]=A*v+N*d,n[6]=T*v+V*d,n[7]=D*v+$*d,n[8]=O*v-x*d,n[9]=N*v-A*d,n[10]=V*v-T*d,n[11]=$*v-D*d,n},o.rotateZ=function(n,r,s){var d=Math.sin(s),v=Math.cos(s),x=r[0],A=r[1],T=r[2],D=r[3],O=r[4],N=r[5],V=r[6],$=r[7];return r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=x*v+O*d,n[1]=A*v+N*d,n[2]=T*v+V*d,n[3]=D*v+$*d,n[4]=O*v-x*d,n[5]=N*v-A*d,n[6]=V*v-T*d,n[7]=$*v-D*d,n},o.scale=function(n,r,s){var d=s[0],v=s[1],x=s[2];return n[0]=r[0]*d,n[1]=r[1]*d,n[2]=r[2]*d,n[3]=r[3]*d,n[4]=r[4]*v,n[5]=r[5]*v,n[6]=r[6]*v,n[7]=r[7]*v,n[8]=r[8]*x,n[9]=r[9]*x,n[10]=r[10]*x,n[11]=r[11]*x,n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n},o.scale$1=function(n,r,s){return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=r[3]*s,n},o.scale$2=function(n,r,s){return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n},o.setCacheLimits=function(n,r){qr=n,Xo=r},o.setRTLTextPlugin=function(n,r,s){if(s===void 0&&(s=!1),Xa==="deferred"||Xa==="loading"||Xa==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ps=Qe.resolveURL(n),Xa="deferred",bf=r,dc(),s||ol()},o.sphericalToCartesian=function(n){var r=n[0],s=n[1],d=n[2];return s+=90,s*=Math.PI/180,d*=Math.PI/180,{x:r*Math.cos(s)*Math.sin(d),y:r*Math.sin(s)*Math.sin(d),z:r*Math.cos(d)}},o.sqrLen=function(n){var r=n[0],s=n[1];return r*r+s*s},o.styleSpec=tt,o.sub=function(n,r,s){return n[0]=r[0]-s[0],n[1]=r[1]-s[1],n[2]=r[2]-s[2],n},o.symbolSize=y1,o.transformMat3=function(n,r,s){var d=r[0],v=r[1],x=r[2];return n[0]=d*s[0]+v*s[3]+x*s[6],n[1]=d*s[1]+v*s[4]+x*s[7],n[2]=d*s[2]+v*s[5]+x*s[8],n},o.transformMat4=eh,o.translate=function(n,r,s){var d,v,x,A,T,D,O,N,V,$,Q,ct,mt=s[0],Et=s[1],bt=s[2];return r===n?(n[12]=r[0]*mt+r[4]*Et+r[8]*bt+r[12],n[13]=r[1]*mt+r[5]*Et+r[9]*bt+r[13],n[14]=r[2]*mt+r[6]*Et+r[10]*bt+r[14],n[15]=r[3]*mt+r[7]*Et+r[11]*bt+r[15]):(v=r[1],x=r[2],A=r[3],T=r[4],D=r[5],O=r[6],N=r[7],V=r[8],$=r[9],Q=r[10],ct=r[11],n[0]=d=r[0],n[1]=v,n[2]=x,n[3]=A,n[4]=T,n[5]=D,n[6]=O,n[7]=N,n[8]=V,n[9]=$,n[10]=Q,n[11]=ct,n[12]=d*mt+T*Et+V*bt+r[12],n[13]=v*mt+D*Et+$*bt+r[13],n[14]=x*mt+O*Et+Q*bt+r[14],n[15]=A*mt+N*Et+ct*bt+r[15]),n},o.triggerPluginCompletionEvent=Mh,o.uniqueId=ft,o.validateCustomStyleLayer=function(n){var r=[],s=n.id;return s===void 0&&r.push({message:"layers."+s+': missing required property "id"'}),n.render===void 0&&r.push({message:"layers."+s+': missing required method "render"'}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&r.push({message:"layers."+s+': property "renderingMode" must be either "2d" or "3d"'}),r},o.validateLight=Du,o.validateStyle=Lu,o.values=function(n){var r=[];for(var s in n)r.push(n[s]);return r},o.vectorTile=hu,o.version="1.13.3",o.warnOnce=Ot,o.webpSupported=ke,o.window=P,o.wrap=pt}),f(["./shared"],function(o){function y(U){var Z=typeof U;if(Z==="number"||Z==="boolean"||Z==="string"||U==null)return JSON.stringify(U);if(Array.isArray(U)){for(var K="[",at=0,gt=U;at<gt.length;at+=1)K+=y(gt[at])+",";return K+"]"}for(var Tt=Object.keys(U).sort(),zt="{",tt=0;tt<Tt.length;tt++)zt+=JSON.stringify(Tt[tt])+":"+y(U[Tt[tt]])+",";return zt+"}"}function _(U){for(var Z="",K=0,at=o.refProperties;K<at.length;K+=1)Z+="/"+y(U[at[K]]);return Z}var C=function(U){this.keyCache={},U&&this.replace(U)};C.prototype.replace=function(U){this._layerConfigs={},this._layers={},this.update(U,[])},C.prototype.update=function(U,Z){for(var K=this,at=0,gt=U;at<gt.length;at+=1){var Tt=gt[at];this._layerConfigs[Tt.id]=Tt;var zt=this._layers[Tt.id]=o.createStyleLayer(Tt);zt._featureFilter=o.featureFilter(zt.filter),this.keyCache[Tt.id]&&delete this.keyCache[Tt.id]}for(var tt=0,_t=Z;tt<_t.length;tt+=1){var Zt=_t[tt];delete this.keyCache[Zt],delete this._layerConfigs[Zt],delete this._layers[Zt]}this.familiesBySource={};for(var ge=0,be=function(Ue,He){for(var ii={},$e=0;$e<Ue.length;$e++){var xi=He&&He[Ue[$e].id]||_(Ue[$e]);He&&(He[Ue[$e].id]=xi);var ji=ii[xi];ji||(ji=ii[xi]=[]),ji.push(Ue[$e])}var ci=[];for(var gi in ii)ci.push(ii[gi]);return ci}(o.values(this._layerConfigs),this.keyCache);ge<be.length;ge+=1){var oe=be[ge].map(function(Ue){return K._layers[Ue.id]}),ye=oe[0];if(ye.visibility!=="none"){var ln=ye.source||"",on=this.familiesBySource[ln];on||(on=this.familiesBySource[ln]={});var se=ye.sourceLayer||"_geojsonTileLayer",Re=on[se];Re||(Re=on[se]=[]),Re.push(oe)}}};var S=function(U){var Z={},K=[];for(var at in U){var gt=U[at],Tt=Z[at]={};for(var zt in gt){var tt=gt[+zt];if(tt&&tt.bitmap.width!==0&&tt.bitmap.height!==0){var _t={x:0,y:0,w:tt.bitmap.width+2,h:tt.bitmap.height+2};K.push(_t),Tt[zt]={rect:_t,metrics:tt.metrics}}}}var Zt=o.potpack(K),ge=new o.AlphaImage({width:Zt.w||1,height:Zt.h||1});for(var be in U){var oe=U[be];for(var ye in oe){var ln=oe[+ye];if(ln&&ln.bitmap.width!==0&&ln.bitmap.height!==0){var on=Z[be][ye].rect;o.AlphaImage.copy(ln.bitmap,ge,{x:0,y:0},{x:on.x+1,y:on.y+1},ln.bitmap)}}}this.image=ge,this.positions=Z};o.register("GlyphAtlas",S);var k=function(U){this.tileID=new o.OverscaledTileID(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId};function P(U,Z,K){for(var at=new o.EvaluationParameters(Z),gt=0,Tt=U;gt<Tt.length;gt+=1)Tt[gt].recalculate(at,K)}function B(U,Z){var K=o.getArrayBuffer(U.request,function(at,gt,Tt,zt){at?Z(at):gt&&Z(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(gt)),rawData:gt,cacheControl:Tt,expires:zt})});return function(){K.cancel(),Z()}}k.prototype.parse=function(U,Z,K,at,gt){var Tt=this;this.status="parsing",this.data=U,this.collisionBoxArray=new o.CollisionBoxArray;var zt=new o.DictionaryCoder(Object.keys(U.layers).sort()),tt=new o.FeatureIndex(this.tileID,this.promoteId);tt.bucketLayerIDs=[];var _t,Zt,ge,be,oe={},ye={featureIndex:tt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},ln=Z.familiesBySource[this.source];for(var on in ln){var se=U.layers[on];if(se){se.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+on+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Re=zt.encode(on),Ue=[],He=0;He<se.length;He++){var ii=se.feature(He),$e=tt.getId(ii,on);Ue.push({feature:ii,id:$e,index:He,sourceLayerIndex:Re})}for(var xi=0,ji=ln[on];xi<ji.length;xi+=1){var ci=ji[xi],gi=ci[0];gi.minzoom&&this.zoom<Math.floor(gi.minzoom)||gi.maxzoom&&this.zoom>=gi.maxzoom||gi.visibility!=="none"&&(P(ci,this.zoom,K),(oe[gi.id]=gi.createBucket({index:tt.bucketLayerIDs.length,layers:ci,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Re,sourceID:this.source})).populate(Ue,ye,this.tileID.canonical),tt.bucketLayerIDs.push(ci.map(function($i){return $i.id})))}}}var vi=o.mapObject(ye.glyphDependencies,function($i){return Object.keys($i).map(Number)});Object.keys(vi).length?at.send("getGlyphs",{uid:this.uid,stacks:vi},function($i,Yn){_t||(_t=$i,Zt=Yn,Pr.call(Tt))}):Zt={};var ko=Object.keys(ye.iconDependencies);ko.length?at.send("getImages",{icons:ko,source:this.source,tileID:this.tileID,type:"icons"},function($i,Yn){_t||(_t=$i,ge=Yn,Pr.call(Tt))}):ge={};var Wn=Object.keys(ye.patternDependencies);function Pr(){if(_t)return gt(_t);if(Zt&&ge&&be){var $i=new S(Zt),Yn=new o.ImageAtlas(ge,be);for(var ai in oe){var Po=oe[ai];Po instanceof o.SymbolBucket?(P(Po.layers,this.zoom,K),o.performSymbolLayout(Po,Zt,$i.positions,ge,Yn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Po.hasPattern&&(Po instanceof o.LineBucket||Po instanceof o.FillBucket||Po instanceof o.FillExtrusionBucket)&&(P(Po.layers,this.zoom,K),Po.addFeatures(ye,this.tileID.canonical,Yn.patternPositions))}this.status="done",gt(null,{buckets:o.values(oe).filter(function(ls){return!ls.isEmpty()}),featureIndex:tt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$i.image,imageAtlas:Yn,glyphMap:this.returnDependencies?Zt:null,iconMap:this.returnDependencies?ge:null,glyphPositions:this.returnDependencies?$i.positions:null})}}Wn.length?at.send("getImages",{icons:Wn,source:this.source,tileID:this.tileID,type:"patterns"},function($i,Yn){_t||(_t=$i,be=Yn,Pr.call(Tt))}):be={},Pr.call(this)};var G=function(U,Z,K,at){this.actor=U,this.layerIndex=Z,this.availableImages=K,this.loadVectorData=at||B,this.loading={},this.loaded={}};G.prototype.loadTile=function(U,Z){var K=this,at=U.uid;this.loading||(this.loading={});var gt=!!(U&&U.request&&U.request.collectResourceTiming)&&new o.RequestPerformance(U.request),Tt=this.loading[at]=new k(U);Tt.abort=this.loadVectorData(U,function(zt,tt){if(delete K.loading[at],zt||!tt)return Tt.status="done",K.loaded[at]=Tt,Z(zt);var _t=tt.rawData,Zt={};tt.expires&&(Zt.expires=tt.expires),tt.cacheControl&&(Zt.cacheControl=tt.cacheControl);var ge={};if(gt){var be=gt.finish();be&&(ge.resourceTiming=JSON.parse(JSON.stringify(be)))}Tt.vectorTile=tt.vectorTile,Tt.parse(tt.vectorTile,K.layerIndex,K.availableImages,K.actor,function(oe,ye){if(oe||!ye)return Z(oe);Z(null,o.extend({rawTileData:_t.slice(0)},ye,Zt,ge))}),K.loaded=K.loaded||{},K.loaded[at]=Tt})},G.prototype.reloadTile=function(U,Z){var K=this,at=this.loaded,gt=U.uid,Tt=this;if(at&&at[gt]){var zt=at[gt];zt.showCollisionBoxes=U.showCollisionBoxes;var tt=function(_t,Zt){var ge=zt.reloadCallback;ge&&(delete zt.reloadCallback,zt.parse(zt.vectorTile,Tt.layerIndex,K.availableImages,Tt.actor,ge)),Z(_t,Zt)};zt.status==="parsing"?zt.reloadCallback=tt:zt.status==="done"&&(zt.vectorTile?zt.parse(zt.vectorTile,this.layerIndex,this.availableImages,this.actor,tt):tt())}},G.prototype.abortTile=function(U,Z){var K=this.loading,at=U.uid;K&&K[at]&&K[at].abort&&(K[at].abort(),delete K[at]),Z()},G.prototype.removeTile=function(U,Z){var K=this.loaded,at=U.uid;K&&K[at]&&delete K[at],Z()};var j=o.window.ImageBitmap,X=function(){this.loaded={}};function pt(U,Z){if(U.length!==0){J(U[0],Z);for(var K=1;K<U.length;K++)J(U[K],!Z)}}function J(U,Z){for(var K=0,at=0,gt=0,Tt=U.length,zt=Tt-1;gt<Tt;zt=gt++){var tt=(U[gt][0]-U[zt][0])*(U[zt][1]+U[gt][1]),_t=K+tt;at+=Math.abs(K)>=Math.abs(tt)?K-_t+tt:tt-_t+K,K=_t}K+at>=0!=!!Z&&U.reverse()}X.prototype.loadTile=function(U,Z){var K=U.uid,at=U.encoding,gt=U.rawImageData,Tt=j&&gt instanceof j?this.getImageData(gt):gt,zt=new o.DEMData(K,Tt,at);this.loaded=this.loaded||{},this.loaded[K]=zt,Z(null,zt)},X.prototype.getImageData=function(U){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(U.width,U.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=U.width,this.offscreenCanvas.height=U.height,this.offscreenCanvasContext.drawImage(U,0,0,U.width,U.height);var Z=this.offscreenCanvasContext.getImageData(-1,-1,U.width+2,U.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:Z.width,height:Z.height},Z.data)},X.prototype.removeTile=function(U){var Z=this.loaded,K=U.uid;Z&&Z[K]&&delete Z[K]};var nt=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,ft=function(U){this._feature=U,this.extent=o.EXTENT,this.type=U.type,this.properties=U.tags,"id"in U&&!isNaN(U.id)&&(this.id=parseInt(U.id,10))};ft.prototype.loadGeometry=function(){if(this._feature.type===1){for(var U=[],Z=0,K=this._feature.geometry;Z<K.length;Z+=1){var at=K[Z];U.push([new o.Point$1(at[0],at[1])])}return U}for(var gt=[],Tt=0,zt=this._feature.geometry;Tt<zt.length;Tt+=1){for(var tt=[],_t=0,Zt=zt[Tt];_t<Zt.length;_t+=1){var ge=Zt[_t];tt.push(new o.Point$1(ge[0],ge[1]))}gt.push(tt)}return gt},ft.prototype.toGeoJSON=function(U,Z,K){return nt.call(this,U,Z,K)};var Lt=function(U){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=U.length,this._features=U};Lt.prototype.feature=function(U){return new ft(this._features[U])};var xt=o.vectorTile.VectorTileFeature,Mt=Ht;function Ht(U,Z){this.options=Z||{},this.features=U,this.length=U.length}function jt(U,Z){this.id=typeof U.id=="number"?U.id:void 0,this.type=U.type,this.rawGeometry=U.type===1?[U.geometry]:U.geometry,this.properties=U.tags,this.extent=Z||4096}Ht.prototype.feature=function(U){return new jt(this.features[U],this.options.extent)},jt.prototype.loadGeometry=function(){var U=this.rawGeometry;this.geometry=[];for(var Z=0;Z<U.length;Z++){for(var K=U[Z],at=[],gt=0;gt<K.length;gt++)at.push(new o.Point$1(K[gt][0],K[gt][1]));this.geometry.push(at)}return this.geometry},jt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var U=this.geometry,Z=1/0,K=-1/0,at=1/0,gt=-1/0,Tt=0;Tt<U.length;Tt++)for(var zt=U[Tt],tt=0;tt<zt.length;tt++){var _t=zt[tt];Z=Math.min(Z,_t.x),K=Math.max(K,_t.x),at=Math.min(at,_t.y),gt=Math.max(gt,_t.y)}return[Z,at,K,gt]},jt.prototype.toGeoJSON=xt.prototype.toGeoJSON;var Qt=Ft,Bt=Mt;function Ft(U){var Z=new o.pbf;return function(K,at){for(var gt in K.layers)at.writeMessage(3,Ot,K.layers[gt])}(U,Z),Z.finish()}function Ot(U,Z){var K;Z.writeVarintField(15,U.version||1),Z.writeStringField(1,U.name||""),Z.writeVarintField(5,U.extent||4096);var at={keys:[],values:[],keycache:{},valuecache:{}};for(K=0;K<U.length;K++)at.feature=U.feature(K),Z.writeMessage(2,de,at);var gt=at.keys;for(K=0;K<gt.length;K++)Z.writeStringField(3,gt[K]);var Tt=at.values;for(K=0;K<Tt.length;K++)Z.writeMessage(4,Pi,Tt[K])}function de(U,Z){var K=U.feature;K.id!==void 0&&Z.writeVarintField(1,K.id),Z.writeMessage(2,An,U),Z.writeVarintField(3,K.type),Z.writeMessage(4,je,K)}function An(U,Z){var K=U.feature,at=U.keys,gt=U.values,Tt=U.keycache,zt=U.valuecache;for(var tt in K.properties){var _t=Tt[tt];_t===void 0&&(at.push(tt),Tt[tt]=_t=at.length-1),Z.writeVarint(_t);var Zt=K.properties[tt],ge=typeof Zt;ge!=="string"&&ge!=="boolean"&&ge!=="number"&&(Zt=JSON.stringify(Zt));var be=ge+":"+Zt,oe=zt[be];oe===void 0&&(gt.push(Zt),zt[be]=oe=gt.length-1),Z.writeVarint(oe)}}function _e(U,Z){return(Z<<3)+(7&U)}function Ge(U){return U<<1^U>>31}function je(U,Z){for(var K=U.loadGeometry(),at=U.type,gt=0,Tt=0,zt=K.length,tt=0;tt<zt;tt++){var _t=K[tt],Zt=1;at===1&&(Zt=_t.length),Z.writeVarint(_e(1,Zt));for(var ge=at===3?_t.length-1:_t.length,be=0;be<ge;be++){be===1&&at!==1&&Z.writeVarint(_e(2,ge-1));var oe=_t[be].x-gt,ye=_t[be].y-Tt;Z.writeVarint(Ge(oe)),Z.writeVarint(Ge(ye)),gt+=oe,Tt+=ye}at===3&&Z.writeVarint(_e(7,1))}}function Pi(U,Z){var K=typeof U;K==="string"?Z.writeStringField(1,U):K==="boolean"?Z.writeBooleanField(7,U):K==="number"&&(U%1!=0?Z.writeDoubleField(3,U):U<0?Z.writeSVarintField(6,U):Z.writeVarintField(5,U))}function Li(U,Z,K,at){Qn(U,K,at),Qn(Z,2*K,2*at),Qn(Z,2*K+1,2*at+1)}function Qn(U,Z,K){var at=U[Z];U[Z]=U[K],U[K]=at}function un(U,Z,K,at){var gt=U-K,Tt=Z-at;return gt*gt+Tt*Tt}Qt.fromVectorTileJs=Ft,Qt.fromGeojsonVt=function(U,Z){Z=Z||{};var K={};for(var at in U)K[at]=new Mt(U[at].features,Z),K[at].name=at,K[at].version=Z.version,K[at].extent=Z.extent;return Ft({layers:K})},Qt.GeoJSONWrapper=Bt;var Un=function(U){return U[0]},ui=function(U){return U[1]},oi=function(U,Z,K,at,gt){Z===void 0&&(Z=Un),K===void 0&&(K=ui),at===void 0&&(at=64),gt===void 0&&(gt=Float64Array),this.nodeSize=at,this.points=U;for(var Tt=U.length<65536?Uint16Array:Uint32Array,zt=this.ids=new Tt(U.length),tt=this.coords=new gt(2*U.length),_t=0;_t<U.length;_t++)zt[_t]=_t,tt[2*_t]=Z(U[_t]),tt[2*_t+1]=K(U[_t]);(function Zt(ge,be,oe,ye,ln,on){if(!(ln-ye<=oe)){var se=ye+ln>>1;(function Re(Ue,He,ii,$e,xi,ji){for(;xi>$e;){if(xi-$e>600){var ci=xi-$e+1,gi=ii-$e+1,vi=Math.log(ci),ko=.5*Math.exp(2*vi/3),Wn=.5*Math.sqrt(vi*ko*(ci-ko)/ci)*(gi-ci/2<0?-1:1);Re(Ue,He,ii,Math.max($e,Math.floor(ii-gi*ko/ci+Wn)),Math.min(xi,Math.floor(ii+(ci-gi)*ko/ci+Wn)),ji)}var Pr=He[2*ii+ji],$i=$e,Yn=xi;for(Li(Ue,He,$e,ii),He[2*xi+ji]>Pr&&Li(Ue,He,$e,xi);$i<Yn;){for(Li(Ue,He,$i,Yn),$i++,Yn--;He[2*$i+ji]<Pr;)$i++;for(;He[2*Yn+ji]>Pr;)Yn--}He[2*$e+ji]===Pr?Li(Ue,He,$e,Yn):Li(Ue,He,++Yn,xi),Yn<=ii&&($e=Yn+1),ii<=Yn&&(xi=Yn-1)}})(ge,be,se,ye,ln,on%2),Zt(ge,be,oe,ye,se-1,on+1),Zt(ge,be,oe,se+1,ln,on+1)}})(zt,tt,at,0,zt.length-1,0)};oi.prototype.range=function(U,Z,K,at){return function(gt,Tt,zt,tt,_t,Zt,ge){for(var be,oe,ye=[0,gt.length-1,0],ln=[];ye.length;){var on=ye.pop(),se=ye.pop(),Re=ye.pop();if(se-Re<=ge)for(var Ue=Re;Ue<=se;Ue++)oe=Tt[2*Ue+1],(be=Tt[2*Ue])>=zt&&be<=_t&&oe>=tt&&oe<=Zt&&ln.push(gt[Ue]);else{var He=Math.floor((Re+se)/2);oe=Tt[2*He+1],(be=Tt[2*He])>=zt&&be<=_t&&oe>=tt&&oe<=Zt&&ln.push(gt[He]);var ii=(on+1)%2;(on===0?zt<=be:tt<=oe)&&(ye.push(Re),ye.push(He-1),ye.push(ii)),(on===0?_t>=be:Zt>=oe)&&(ye.push(He+1),ye.push(se),ye.push(ii))}}return ln}(this.ids,this.coords,U,Z,K,at,this.nodeSize)},oi.prototype.within=function(U,Z,K){return function(at,gt,Tt,zt,tt,_t){for(var Zt=[0,at.length-1,0],ge=[],be=tt*tt;Zt.length;){var oe=Zt.pop(),ye=Zt.pop(),ln=Zt.pop();if(ye-ln<=_t)for(var on=ln;on<=ye;on++)un(gt[2*on],gt[2*on+1],Tt,zt)<=be&&ge.push(at[on]);else{var se=Math.floor((ln+ye)/2),Re=gt[2*se],Ue=gt[2*se+1];un(Re,Ue,Tt,zt)<=be&&ge.push(at[se]);var He=(oe+1)%2;(oe===0?Tt-tt<=Re:zt-tt<=Ue)&&(Zt.push(ln),Zt.push(se-1),Zt.push(He)),(oe===0?Tt+tt>=Re:zt+tt>=Ue)&&(Zt.push(se+1),Zt.push(ye),Zt.push(He))}}return ge}(this.ids,this.coords,U,Z,K,this.nodeSize)};var wi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(U){return U}},ue=function(U){this.options=wt(Object.create(wi),U),this.trees=new Array(this.options.maxZoom+1)};function Qe(U,Z,K,at,gt){return{x:U,y:Z,zoom:1/0,id:K,parentId:-1,numPoints:at,properties:gt}}function me(U,Z){var K=U.geometry.coordinates,at=K[1];return{x:Di(K[0]),y:lt(at),zoom:1/0,index:Z,parentId:-1}}function ke(U){return{type:"Feature",id:U.id,properties:Ci(U),geometry:{type:"Point",coordinates:[(at=U.x,360*(at-.5)),(Z=U.y,K=(180-360*Z)*Math.PI/180,360*Math.atan(Math.exp(K))/Math.PI-90)]}};var Z,K,at}function Ci(U){var Z=U.numPoints,K=Z>=1e4?Math.round(Z/1e3)+"k":Z>=1e3?Math.round(Z/100)/10+"k":Z;return wt(wt({},U.properties),{cluster:!0,cluster_id:U.id,point_count:Z,point_count_abbreviated:K})}function Di(U){return U/360+.5}function lt(U){var Z=Math.sin(U*Math.PI/180),K=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return K<0?0:K>1?1:K}function wt(U,Z){for(var K in Z)U[K]=Z[K];return U}function te(U){return U.x}function le(U){return U.y}function pe(U,Z,K,at,gt,Tt){var zt=gt-K,tt=Tt-at;if(zt!==0||tt!==0){var _t=((U-K)*zt+(Z-at)*tt)/(zt*zt+tt*tt);_t>1?(K=gt,at=Tt):_t>0&&(K+=zt*_t,at+=tt*_t)}return(zt=U-K)*zt+(tt=Z-at)*tt}function Fe(U,Z,K,at){var gt={id:U===void 0?null:U,type:Z,geometry:K,tags:at,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Tt){var zt=Tt.geometry,tt=Tt.type;if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")cn(Tt,zt);else if(tt==="Polygon"||tt==="MultiLineString")for(var _t=0;_t<zt.length;_t++)cn(Tt,zt[_t]);else if(tt==="MultiPolygon")for(_t=0;_t<zt.length;_t++)for(var Zt=0;Zt<zt[_t].length;Zt++)cn(Tt,zt[_t][Zt])}(gt),gt}function cn(U,Z){for(var K=0;K<Z.length;K+=3)U.minX=Math.min(U.minX,Z[K]),U.minY=Math.min(U.minY,Z[K+1]),U.maxX=Math.max(U.maxX,Z[K]),U.maxY=Math.max(U.maxY,Z[K+1])}function we(U,Z,K,at){if(Z.geometry){var gt=Z.geometry.coordinates,Tt=Z.geometry.type,zt=Math.pow(K.tolerance/((1<<K.maxZoom)*K.extent),2),tt=[],_t=Z.id;if(K.promoteId?_t=Z.properties[K.promoteId]:K.generateId&&(_t=at||0),Tt==="Point")ze(gt,tt);else if(Tt==="MultiPoint")for(var Zt=0;Zt<gt.length;Zt++)ze(gt[Zt],tt);else if(Tt==="LineString")Te(gt,tt,zt,!1);else if(Tt==="MultiLineString"){if(K.lineMetrics){for(Zt=0;Zt<gt.length;Zt++)Te(gt[Zt],tt=[],zt,!1),U.push(Fe(_t,"LineString",tt,Z.properties));return}en(gt,tt,zt,!1)}else if(Tt==="Polygon")en(gt,tt,zt,!0);else{if(Tt!=="MultiPolygon"){if(Tt==="GeometryCollection"){for(Zt=0;Zt<Z.geometry.geometries.length;Zt++)we(U,{id:_t,geometry:Z.geometry.geometries[Zt],properties:Z.properties},K,at);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Zt=0;Zt<gt.length;Zt++){var ge=[];en(gt[Zt],ge,zt,!0),tt.push(ge)}}U.push(Fe(_t,Tt,tt,Z.properties))}}function ze(U,Z){Z.push(Cn(U[0])),Z.push(In(U[1])),Z.push(0)}function Te(U,Z,K,at){for(var gt,Tt,zt=0,tt=0;tt<U.length;tt++){var _t=Cn(U[tt][0]),Zt=In(U[tt][1]);Z.push(_t),Z.push(Zt),Z.push(0),tt>0&&(zt+=at?(gt*Zt-_t*Tt)/2:Math.sqrt(Math.pow(_t-gt,2)+Math.pow(Zt-Tt,2))),gt=_t,Tt=Zt}var ge=Z.length-3;Z[2]=1,function be(oe,ye,ln,on){for(var se,Re=on,Ue=ln-ye>>1,He=ln-ye,ii=oe[ye],$e=oe[ye+1],xi=oe[ln],ji=oe[ln+1],ci=ye+3;ci<ln;ci+=3){var gi=pe(oe[ci],oe[ci+1],ii,$e,xi,ji);if(gi>Re)se=ci,Re=gi;else if(gi===Re){var vi=Math.abs(ci-Ue);vi<He&&(se=ci,He=vi)}}Re>on&&(se-ye>3&&be(oe,ye,se,on),oe[se+2]=Re,ln-se>3&&be(oe,se,ln,on))}(Z,0,ge,K),Z[ge+2]=1,Z.size=Math.abs(zt),Z.start=0,Z.end=Z.size}function en(U,Z,K,at){for(var gt=0;gt<U.length;gt++){var Tt=[];Te(U[gt],Tt,K,at),Z.push(Tt)}}function Cn(U){return U/360+.5}function In(U){var Z=Math.sin(U*Math.PI/180),K=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return K<0?0:K>1?1:K}function Pn(U,Z,K,at,gt,Tt,zt,tt){if(at/=Z,Tt>=(K/=Z)&&zt<at)return U;if(zt<K||Tt>=at)return null;for(var _t=[],Zt=0;Zt<U.length;Zt++){var ge=U[Zt],be=ge.geometry,oe=ge.type,ye=gt===0?ge.minX:ge.minY,ln=gt===0?ge.maxX:ge.maxY;if(ye>=K&&ln<at)_t.push(ge);else if(!(ln<K||ye>=at)){var on=[];if(oe==="Point"||oe==="MultiPoint")Jn(be,on,K,at,gt);else if(oe==="LineString")Ri(be,on,K,at,gt,!1,tt.lineMetrics);else if(oe==="MultiLineString")ar(be,on,K,at,gt,!1);else if(oe==="Polygon")ar(be,on,K,at,gt,!0);else if(oe==="MultiPolygon")for(var se=0;se<be.length;se++){var Re=[];ar(be[se],Re,K,at,gt,!0),Re.length&&on.push(Re)}if(on.length){if(tt.lineMetrics&&oe==="LineString"){for(se=0;se<on.length;se++)_t.push(Fe(ge.id,oe,on[se],ge.tags));continue}oe!=="LineString"&&oe!=="MultiLineString"||(on.length===1?(oe="LineString",on=on[0]):oe="MultiLineString"),oe!=="Point"&&oe!=="MultiPoint"||(oe=on.length===3?"Point":"MultiPoint"),_t.push(Fe(ge.id,oe,on,ge.tags))}}}return _t.length?_t:null}function Jn(U,Z,K,at,gt){for(var Tt=0;Tt<U.length;Tt+=3){var zt=U[Tt+gt];zt>=K&&zt<=at&&(Z.push(U[Tt]),Z.push(U[Tt+1]),Z.push(U[Tt+2]))}}function Ri(U,Z,K,at,gt,Tt,zt){for(var tt,_t,Zt=Ii(U),ge=gt===0?Xo:va,be=U.start,oe=0;oe<U.length-3;oe+=3){var ye=U[oe],ln=U[oe+1],on=U[oe+2],se=U[oe+3],Re=U[oe+4],Ue=gt===0?ye:ln,He=gt===0?se:Re,ii=!1;zt&&(tt=Math.sqrt(Math.pow(ye-se,2)+Math.pow(ln-Re,2))),Ue<K?He>K&&(_t=ge(Zt,ye,ln,se,Re,K),zt&&(Zt.start=be+tt*_t)):Ue>at?He<at&&(_t=ge(Zt,ye,ln,se,Re,at),zt&&(Zt.start=be+tt*_t)):qr(Zt,ye,ln,on),He<K&&Ue>=K&&(_t=ge(Zt,ye,ln,se,Re,K),ii=!0),He>at&&Ue<=at&&(_t=ge(Zt,ye,ln,se,Re,at),ii=!0),!Tt&&ii&&(zt&&(Zt.end=be+tt*_t),Z.push(Zt),Zt=Ii(U)),zt&&(be+=tt)}var $e=U.length-3;ye=U[$e],ln=U[$e+1],on=U[$e+2],(Ue=gt===0?ye:ln)>=K&&Ue<=at&&qr(Zt,ye,ln,on),$e=Zt.length-3,Tt&&$e>=3&&(Zt[$e]!==Zt[0]||Zt[$e+1]!==Zt[1])&&qr(Zt,Zt[0],Zt[1],Zt[2]),Zt.length&&Z.push(Zt)}function Ii(U){var Z=[];return Z.size=U.size,Z.start=U.start,Z.end=U.end,Z}function ar(U,Z,K,at,gt,Tt){for(var zt=0;zt<U.length;zt++)Ri(U[zt],Z,K,at,gt,Tt,!1)}function qr(U,Z,K,at){U.push(Z),U.push(K),U.push(at)}function Xo(U,Z,K,at,gt,Tt){var zt=(Tt-Z)/(at-Z);return U.push(Tt),U.push(K+(gt-K)*zt),U.push(1),zt}function va(U,Z,K,at,gt,Tt){var zt=(Tt-K)/(gt-K);return U.push(Z+(at-Z)*zt),U.push(Tt),U.push(1),zt}function Da(U,Z){for(var K=[],at=0;at<U.length;at++){var gt,Tt=U[at],zt=Tt.type;if(zt==="Point"||zt==="MultiPoint"||zt==="LineString")gt=Za(Tt.geometry,Z);else if(zt==="MultiLineString"||zt==="Polygon"){gt=[];for(var tt=0;tt<Tt.geometry.length;tt++)gt.push(Za(Tt.geometry[tt],Z))}else if(zt==="MultiPolygon")for(gt=[],tt=0;tt<Tt.geometry.length;tt++){for(var _t=[],Zt=0;Zt<Tt.geometry[tt].length;Zt++)_t.push(Za(Tt.geometry[tt][Zt],Z));gt.push(_t)}K.push(Fe(Tt.id,zt,gt,Tt.tags))}return K}function Za(U,Z){var K=[];K.size=U.size,U.start!==void 0&&(K.start=U.start,K.end=U.end);for(var at=0;at<U.length;at+=3)K.push(U[at]+Z,U[at+1],U[at+2]);return K}function wr(U,Z){if(U.transformed)return U;var K,at,gt,Tt=1<<U.z,zt=U.x,tt=U.y;for(K=0;K<U.features.length;K++){var _t=U.features[K],Zt=_t.geometry,ge=_t.type;if(_t.geometry=[],ge===1)for(at=0;at<Zt.length;at+=2)_t.geometry.push(To(Zt[at],Zt[at+1],Z,Tt,zt,tt));else for(at=0;at<Zt.length;at++){var be=[];for(gt=0;gt<Zt[at].length;gt+=2)be.push(To(Zt[at][gt],Zt[at][gt+1],Z,Tt,zt,tt));_t.geometry.push(be)}}return U.transformed=!0,U}function To(U,Z,K,at,gt,Tt){return[Math.round(K*(U*at-gt)),Math.round(K*(Z*at-Tt))]}function $s(U,Z,K,at,gt){for(var Tt=Z===gt.maxZoom?0:gt.tolerance/((1<<Z)*gt.extent),zt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:K,y:at,z:Z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},tt=0;tt<U.length;tt++){zt.numFeatures++,Ys(zt,U[tt],Tt,gt);var _t=U[tt].minX,Zt=U[tt].minY,ge=U[tt].maxX,be=U[tt].maxY;_t<zt.minX&&(zt.minX=_t),Zt<zt.minY&&(zt.minY=Zt),ge>zt.maxX&&(zt.maxX=ge),be>zt.maxY&&(zt.maxY=be)}return zt}function Ys(U,Z,K,at){var gt=Z.geometry,Tt=Z.type,zt=[];if(Tt==="Point"||Tt==="MultiPoint")for(var tt=0;tt<gt.length;tt+=3)zt.push(gt[tt]),zt.push(gt[tt+1]),U.numPoints++,U.numSimplified++;else if(Tt==="LineString")xl(zt,gt,U,K,!1,!1);else if(Tt==="MultiLineString"||Tt==="Polygon")for(tt=0;tt<gt.length;tt++)xl(zt,gt[tt],U,K,Tt==="Polygon",tt===0);else if(Tt==="MultiPolygon")for(var _t=0;_t<gt.length;_t++){var Zt=gt[_t];for(tt=0;tt<Zt.length;tt++)xl(zt,Zt[tt],U,K,!0,tt===0)}if(zt.length){var ge=Z.tags||null;if(Tt==="LineString"&&at.lineMetrics){for(var be in ge={},Z.tags)ge[be]=Z.tags[be];ge.mapbox_clip_start=gt.start/gt.size,ge.mapbox_clip_end=gt.end/gt.size}var oe={geometry:zt,type:Tt==="Polygon"||Tt==="MultiPolygon"?3:Tt==="LineString"||Tt==="MultiLineString"?2:1,tags:ge};Z.id!==null&&(oe.id=Z.id),U.features.push(oe)}}function xl(U,Z,K,at,gt,Tt){var zt=at*at;if(at>0&&Z.size<(gt?zt:at))K.numPoints+=Z.length/3;else{for(var tt=[],_t=0;_t<Z.length;_t+=3)(at===0||Z[_t+2]>zt)&&(K.numSimplified++,tt.push(Z[_t]),tt.push(Z[_t+1])),K.numPoints++;gt&&function(Zt,ge){for(var be=0,oe=0,ye=Zt.length,ln=ye-2;oe<ye;ln=oe,oe+=2)be+=(Zt[oe]-Zt[ln])*(Zt[oe+1]+Zt[ln+1]);if(be>0===ge)for(oe=0,ye=Zt.length;oe<ye/2;oe+=2){var on=Zt[oe],se=Zt[oe+1];Zt[oe]=Zt[ye-2-oe],Zt[oe+1]=Zt[ye-1-oe],Zt[ye-2-oe]=on,Zt[ye-1-oe]=se}}(tt,Tt),U.push(tt)}}function Ra(U,Z){var K=(Z=this.options=function(gt,Tt){for(var zt in Tt)gt[zt]=Tt[zt];return gt}(Object.create(this.options),Z)).debug;if(K&&console.time("preprocess data"),Z.maxZoom<0||Z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Z.promoteId&&Z.generateId)throw new Error("promoteId and generateId cannot be used together.");var at=function(gt,Tt){var zt=[];if(gt.type==="FeatureCollection")for(var tt=0;tt<gt.features.length;tt++)we(zt,gt.features[tt],Tt,tt);else we(zt,gt.type==="Feature"?gt:{geometry:gt},Tt);return zt}(U,Z);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Z.indexMaxZoom,Z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(at=function(gt,Tt){var zt=Tt.buffer/Tt.extent,tt=gt,_t=Pn(gt,1,-1-zt,zt,0,-1,2,Tt),Zt=Pn(gt,1,1-zt,2+zt,0,-1,2,Tt);return(_t||Zt)&&(tt=Pn(gt,1,-zt,1+zt,0,-1,2,Tt)||[],_t&&(tt=Da(_t,1).concat(tt)),Zt&&(tt=tt.concat(Da(Zt,-1)))),tt}(at,Z)).length&&this.splitTile(at,0,0,0),K&&(at.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function uo(U,Z,K){return 32*((1<<U)*K+Z)+U}function Xs(U,Z){var K=U.tileID.canonical;if(!this._geoJSONIndex)return Z(null,null);var at=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!at)return Z(null,null);var gt=new Lt(at.features),Tt=Qt(gt);Tt.byteOffset===0&&Tt.byteLength===Tt.buffer.byteLength||(Tt=new Uint8Array(Tt)),Z(null,{vectorTile:gt,rawData:Tt.buffer})}ue.prototype.load=function(U){var Z=this.options,K=Z.log,at=Z.minZoom,gt=Z.maxZoom,Tt=Z.nodeSize;K&&console.time("total time");var zt="prepare "+U.length+" points";K&&console.time(zt),this.points=U;for(var tt=[],_t=0;_t<U.length;_t++)U[_t].geometry&&tt.push(me(U[_t],_t));this.trees[gt+1]=new oi(tt,te,le,Tt,Float32Array),K&&console.timeEnd(zt);for(var Zt=gt;Zt>=at;Zt--){var ge=+Date.now();tt=this._cluster(tt,Zt),this.trees[Zt]=new oi(tt,te,le,Tt,Float32Array),K&&console.log("z%d: %d clusters in %dms",Zt,tt.length,+Date.now()-ge)}return K&&console.timeEnd("total time"),this},ue.prototype.getClusters=function(U,Z){var K=((U[0]+180)%360+360)%360-180,at=Math.max(-90,Math.min(90,U[1])),gt=U[2]===180?180:((U[2]+180)%360+360)%360-180,Tt=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)K=-180,gt=180;else if(K>gt){var zt=this.getClusters([K,at,180,Tt],Z),tt=this.getClusters([-180,at,gt,Tt],Z);return zt.concat(tt)}for(var _t=this.trees[this._limitZoom(Z)],Zt=[],ge=0,be=_t.range(Di(K),lt(Tt),Di(gt),lt(at));ge<be.length;ge+=1){var oe=_t.points[be[ge]];Zt.push(oe.numPoints?ke(oe):this.points[oe.index])}return Zt},ue.prototype.getChildren=function(U){var Z=this._getOriginId(U),K=this._getOriginZoom(U),at="No cluster with the specified id.",gt=this.trees[K];if(!gt)throw new Error(at);var Tt=gt.points[Z];if(!Tt)throw new Error(at);for(var zt=this.options.radius/(this.options.extent*Math.pow(2,K-1)),tt=[],_t=0,Zt=gt.within(Tt.x,Tt.y,zt);_t<Zt.length;_t+=1){var ge=gt.points[Zt[_t]];ge.parentId===U&&tt.push(ge.numPoints?ke(ge):this.points[ge.index])}if(tt.length===0)throw new Error(at);return tt},ue.prototype.getLeaves=function(U,Z,K){var at=[];return this._appendLeaves(at,U,Z=Z||10,K=K||0,0),at},ue.prototype.getTile=function(U,Z,K){var at=this.trees[this._limitZoom(U)],gt=Math.pow(2,U),Tt=this.options,zt=Tt.radius/Tt.extent,tt=(K-zt)/gt,_t=(K+1+zt)/gt,Zt={features:[]};return this._addTileFeatures(at.range((Z-zt)/gt,tt,(Z+1+zt)/gt,_t),at.points,Z,K,gt,Zt),Z===0&&this._addTileFeatures(at.range(1-zt/gt,tt,1,_t),at.points,gt,K,gt,Zt),Z===gt-1&&this._addTileFeatures(at.range(0,tt,zt/gt,_t),at.points,-1,K,gt,Zt),Zt.features.length?Zt:null},ue.prototype.getClusterExpansionZoom=function(U){for(var Z=this._getOriginZoom(U)-1;Z<=this.options.maxZoom;){var K=this.getChildren(U);if(Z++,K.length!==1)break;U=K[0].properties.cluster_id}return Z},ue.prototype._appendLeaves=function(U,Z,K,at,gt){for(var Tt=0,zt=this.getChildren(Z);Tt<zt.length;Tt+=1){var tt=zt[Tt],_t=tt.properties;if(_t&&_t.cluster?gt+_t.point_count<=at?gt+=_t.point_count:gt=this._appendLeaves(U,_t.cluster_id,K,at,gt):gt<at?gt++:U.push(tt),U.length===K)break}return gt},ue.prototype._addTileFeatures=function(U,Z,K,at,gt,Tt){for(var zt=0,tt=U;zt<tt.length;zt+=1){var _t=Z[tt[zt]],Zt=_t.numPoints,ge={type:1,geometry:[[Math.round(this.options.extent*(_t.x*gt-K)),Math.round(this.options.extent*(_t.y*gt-at))]],tags:Zt?Ci(_t):this.points[_t.index].properties},be=void 0;Zt?be=_t.id:this.options.generateId?be=_t.index:this.points[_t.index].id&&(be=this.points[_t.index].id),be!==void 0&&(ge.id=be),Tt.features.push(ge)}},ue.prototype._limitZoom=function(U){return Math.max(this.options.minZoom,Math.min(+U,this.options.maxZoom+1))},ue.prototype._cluster=function(U,Z){for(var K=[],at=this.options,gt=at.reduce,Tt=at.minPoints,zt=at.radius/(at.extent*Math.pow(2,Z)),tt=0;tt<U.length;tt++){var _t=U[tt];if(!(_t.zoom<=Z)){_t.zoom=Z;for(var Zt=this.trees[Z+1],ge=Zt.within(_t.x,_t.y,zt),be=_t.numPoints||1,oe=be,ye=0,ln=ge;ye<ln.length;ye+=1){var on=Zt.points[ln[ye]];on.zoom>Z&&(oe+=on.numPoints||1)}if(oe>=Tt){for(var se=_t.x*be,Re=_t.y*be,Ue=gt&&be>1?this._map(_t,!0):null,He=(tt<<5)+(Z+1)+this.points.length,ii=0,$e=ge;ii<$e.length;ii+=1){var xi=Zt.points[$e[ii]];if(!(xi.zoom<=Z)){xi.zoom=Z;var ji=xi.numPoints||1;se+=xi.x*ji,Re+=xi.y*ji,xi.parentId=He,gt&&(Ue||(Ue=this._map(_t,!0)),gt(Ue,this._map(xi)))}}_t.parentId=He,K.push(Qe(se/oe,Re/oe,He,oe,Ue))}else if(K.push(_t),oe>1)for(var ci=0,gi=ge;ci<gi.length;ci+=1){var vi=Zt.points[gi[ci]];vi.zoom<=Z||(vi.zoom=Z,K.push(vi))}}}return K},ue.prototype._getOriginId=function(U){return U-this.points.length>>5},ue.prototype._getOriginZoom=function(U){return(U-this.points.length)%32},ue.prototype._map=function(U,Z){if(U.numPoints)return Z?wt({},U.properties):U.properties;var K=this.points[U.index].properties,at=this.options.map(K);return Z&&at===K?wt({},at):at},Ra.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ra.prototype.splitTile=function(U,Z,K,at,gt,Tt,zt){for(var tt=[U,Z,K,at],_t=this.options,Zt=_t.debug;tt.length;){at=tt.pop(),K=tt.pop(),Z=tt.pop(),U=tt.pop();var ge=1<<Z,be=uo(Z,K,at),oe=this.tiles[be];if(!oe&&(Zt>1&&console.time("creation"),oe=this.tiles[be]=$s(U,Z,K,at,_t),this.tileCoords.push({z:Z,x:K,y:at}),Zt)){Zt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Z,K,at,oe.numFeatures,oe.numPoints,oe.numSimplified),console.timeEnd("creation"));var ye="z"+Z;this.stats[ye]=(this.stats[ye]||0)+1,this.total++}if(oe.source=U,gt){if(Z===_t.maxZoom||Z===gt)continue;var ln=1<<gt-Z;if(K!==Math.floor(Tt/ln)||at!==Math.floor(zt/ln))continue}else if(Z===_t.indexMaxZoom||oe.numPoints<=_t.indexMaxPoints)continue;if(oe.source=null,U.length!==0){Zt>1&&console.time("clipping");var on,se,Re,Ue,He,ii,$e=.5*_t.buffer/_t.extent,xi=.5-$e,ji=.5+$e,ci=1+$e;on=se=Re=Ue=null,He=Pn(U,ge,K-$e,K+ji,0,oe.minX,oe.maxX,_t),ii=Pn(U,ge,K+xi,K+ci,0,oe.minX,oe.maxX,_t),U=null,He&&(on=Pn(He,ge,at-$e,at+ji,1,oe.minY,oe.maxY,_t),se=Pn(He,ge,at+xi,at+ci,1,oe.minY,oe.maxY,_t),He=null),ii&&(Re=Pn(ii,ge,at-$e,at+ji,1,oe.minY,oe.maxY,_t),Ue=Pn(ii,ge,at+xi,at+ci,1,oe.minY,oe.maxY,_t),ii=null),Zt>1&&console.timeEnd("clipping"),tt.push(on||[],Z+1,2*K,2*at),tt.push(se||[],Z+1,2*K,2*at+1),tt.push(Re||[],Z+1,2*K+1,2*at),tt.push(Ue||[],Z+1,2*K+1,2*at+1)}}},Ra.prototype.getTile=function(U,Z,K){var at=this.options,gt=at.extent,Tt=at.debug;if(U<0||U>24)return null;var zt=1<<U,tt=uo(U,Z=(Z%zt+zt)%zt,K);if(this.tiles[tt])return wr(this.tiles[tt],gt);Tt>1&&console.log("drilling down to z%d-%d-%d",U,Z,K);for(var _t,Zt=U,ge=Z,be=K;!_t&&Zt>0;)Zt--,ge=Math.floor(ge/2),be=Math.floor(be/2),_t=this.tiles[uo(Zt,ge,be)];return _t&&_t.source?(Tt>1&&console.log("found parent tile z%d-%d-%d",Zt,ge,be),Tt>1&&console.time("drilling down"),this.splitTile(_t.source,Zt,ge,be,U,Z,K),Tt>1&&console.timeEnd("drilling down"),this.tiles[tt]?wr(this.tiles[tt],gt):null):null};var Au=function(U){function Z(K,at,gt,Tt){U.call(this,K,at,gt,Xs),Tt&&(this.loadGeoJSON=Tt)}return U&&(Z.__proto__=U),(Z.prototype=Object.create(U&&U.prototype)).constructor=Z,Z.prototype.loadData=function(K,at){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=at,this._pendingLoadDataParams=K,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Z.prototype._loadData=function(){var K=this;if(this._pendingCallback&&this._pendingLoadDataParams){var at=this._pendingCallback,gt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Tt=!!(gt&&gt.request&&gt.request.collectResourceTiming)&&new o.RequestPerformance(gt.request);this.loadGeoJSON(gt,function(zt,tt){if(zt||!tt)return at(zt);if(typeof tt!="object")return at(new Error("Input data given to '"+gt.source+"' is not a valid GeoJSON object."));(function oe(ye,ln){var on,se=ye&&ye.type;if(se==="FeatureCollection")for(on=0;on<ye.features.length;on++)oe(ye.features[on],ln);else if(se==="GeometryCollection")for(on=0;on<ye.geometries.length;on++)oe(ye.geometries[on],ln);else if(se==="Feature")oe(ye.geometry,ln);else if(se==="Polygon")pt(ye.coordinates,ln);else if(se==="MultiPolygon")for(on=0;on<ye.coordinates.length;on++)pt(ye.coordinates[on],ln);return ye})(tt,!0);try{if(gt.filter){var _t=o.createExpression(gt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_t.result==="error")throw new Error(_t.value.map(function(oe){return oe.key+": "+oe.message}).join(", "));var Zt=tt.features.filter(function(oe){return _t.value.evaluate({zoom:0},oe)});tt={type:"FeatureCollection",features:Zt}}K._geoJSONIndex=gt.cluster?new ue(function(oe){var ye=oe.superclusterOptions,ln=oe.clusterProperties;if(!ln||!ye)return ye;for(var on={},se={},Re={accumulated:null,zoom:0},Ue={properties:null},He=Object.keys(ln),ii=0,$e=He;ii<$e.length;ii+=1){var xi=$e[ii],ji=ln[xi],ci=ji[0],gi=o.createExpression(ji[1]),vi=o.createExpression(typeof ci=="string"?[ci,["accumulated"],["get",xi]]:ci);on[xi]=gi.value,se[xi]=vi.value}return ye.map=function(ko){Ue.properties=ko;for(var Wn={},Pr=0,$i=He;Pr<$i.length;Pr+=1){var Yn=$i[Pr];Wn[Yn]=on[Yn].evaluate(Re,Ue)}return Wn},ye.reduce=function(ko,Wn){Ue.properties=Wn;for(var Pr=0,$i=He;Pr<$i.length;Pr+=1){var Yn=$i[Pr];Re.accumulated=ko[Yn],ko[Yn]=se[Yn].evaluate(Re,Ue)}},ye}(gt)).load(tt.features):function(oe,ye){return new Ra(oe,ye)}(tt,gt.geojsonVtOptions)}catch(oe){return at(oe)}K.loaded={};var ge={};if(Tt){var be=Tt.finish();be&&(ge.resourceTiming={},ge.resourceTiming[gt.source]=JSON.parse(JSON.stringify(be)))}at(null,ge)})}},Z.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Z.prototype.reloadTile=function(K,at){var gt=this.loaded;return gt&&gt[K.uid]?U.prototype.reloadTile.call(this,K,at):this.loadTile(K,at)},Z.prototype.loadGeoJSON=function(K,at){if(K.request)o.getJSON(K.request,at);else{if(typeof K.data!="string")return at(new Error("Input data given to '"+K.source+"' is not a valid GeoJSON object."));try{return at(null,JSON.parse(K.data))}catch{return at(new Error("Input data given to '"+K.source+"' is not a valid GeoJSON object."))}}},Z.prototype.removeSource=function(K,at){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),at()},Z.prototype.getClusterExpansionZoom=function(K,at){try{at(null,this._geoJSONIndex.getClusterExpansionZoom(K.clusterId))}catch(gt){at(gt)}},Z.prototype.getClusterChildren=function(K,at){try{at(null,this._geoJSONIndex.getChildren(K.clusterId))}catch(gt){at(gt)}},Z.prototype.getClusterLeaves=function(K,at){try{at(null,this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset))}catch(gt){at(gt)}},Z}(G),Wr=function(U){var Z=this;this.self=U,this.actor=new o.Actor(U,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:G,geojson:Au},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(K,at){if(Z.workerSourceTypes[K])throw new Error('Worker source with name "'+K+'" already registered.');Z.workerSourceTypes[K]=at},this.self.registerRTLTextPlugin=function(K){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=K.applyArabicShaping,o.plugin.processBidirectionalText=K.processBidirectionalText,o.plugin.processStyledBidirectionalText=K.processStyledBidirectionalText}};return Wr.prototype.setReferrer=function(U,Z){this.referrer=Z},Wr.prototype.setImages=function(U,Z,K){for(var at in this.availableImages[U]=Z,this.workerSources[U]){var gt=this.workerSources[U][at];for(var Tt in gt)gt[Tt].availableImages=Z}K()},Wr.prototype.setLayers=function(U,Z,K){this.getLayerIndex(U).replace(Z),K()},Wr.prototype.updateLayers=function(U,Z,K){this.getLayerIndex(U).update(Z.layers,Z.removedIds),K()},Wr.prototype.loadTile=function(U,Z,K){this.getWorkerSource(U,Z.type,Z.source).loadTile(Z,K)},Wr.prototype.loadDEMTile=function(U,Z,K){this.getDEMWorkerSource(U,Z.source).loadTile(Z,K)},Wr.prototype.reloadTile=function(U,Z,K){this.getWorkerSource(U,Z.type,Z.source).reloadTile(Z,K)},Wr.prototype.abortTile=function(U,Z,K){this.getWorkerSource(U,Z.type,Z.source).abortTile(Z,K)},Wr.prototype.removeTile=function(U,Z,K){this.getWorkerSource(U,Z.type,Z.source).removeTile(Z,K)},Wr.prototype.removeDEMTile=function(U,Z){this.getDEMWorkerSource(U,Z.source).removeTile(Z)},Wr.prototype.removeSource=function(U,Z,K){if(this.workerSources[U]&&this.workerSources[U][Z.type]&&this.workerSources[U][Z.type][Z.source]){var at=this.workerSources[U][Z.type][Z.source];delete this.workerSources[U][Z.type][Z.source],at.removeSource!==void 0?at.removeSource(Z,K):K()}},Wr.prototype.loadWorkerSource=function(U,Z,K){try{this.self.importScripts(Z.url),K()}catch(at){K(at.toString())}},Wr.prototype.syncRTLPluginState=function(U,Z,K){try{o.plugin.setState(Z);var at=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&at!=null){this.self.importScripts(at);var gt=o.plugin.isParsed();K(gt?void 0:new Error("RTL Text Plugin failed to import scripts from "+at),gt)}}catch(Tt){K(Tt.toString())}},Wr.prototype.getAvailableImages=function(U){var Z=this.availableImages[U];return Z||(Z=[]),Z},Wr.prototype.getLayerIndex=function(U){var Z=this.layerIndexes[U];return Z||(Z=this.layerIndexes[U]=new C),Z},Wr.prototype.getWorkerSource=function(U,Z,K){var at=this;return this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][Z]||(this.workerSources[U][Z]={}),this.workerSources[U][Z][K]||(this.workerSources[U][Z][K]=new this.workerSourceTypes[Z]({send:function(gt,Tt,zt){at.actor.send(gt,Tt,zt,U)}},this.getLayerIndex(U),this.getAvailableImages(U))),this.workerSources[U][Z][K]},Wr.prototype.getDEMWorkerSource=function(U,Z){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][Z]||(this.demWorkerSources[U][Z]=new X),this.demWorkerSources[U][Z]},Wr.prototype.enforceCacheSizeLimit=function(U,Z){o.enforceCacheSizeLimit(Z)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Wr(self)),Wr}),f(["./shared"],function(o){var y=o.createCommonjsModule(function(l){function h(b){return!c(b)}function c(b){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var E,L,F=new Blob([""],{type:"text/javascript"}),H=URL.createObjectURL(F);try{L=new Worker(H),E=!0}catch{E=!1}return L&&L.terminate(),URL.revokeObjectURL(H),E}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var E=document.createElement("canvas");E.width=E.height=1;var L=E.getContext("2d");if(!L)return!1;var F=L.getImageData(0,0,1,1);return F&&F.width===E.width}()?(m[w=b&&b.failIfMajorPerformanceCaveat]===void 0&&(m[w]=function(E){var L=function(H){var et=document.createElement("canvas"),it=Object.create(h.webGLContextAttributes);return it.failIfMajorPerformanceCaveat=H,et.probablySupportsContext?et.probablySupportsContext("webgl",it)||et.probablySupportsContext("experimental-webgl",it):et.supportsContext?et.supportsContext("webgl",it)||et.supportsContext("experimental-webgl",it):et.getContext("webgl",it)||et.getContext("experimental-webgl",it)}(E);if(!L)return!1;var F=L.createShader(L.VERTEX_SHADER);return!(!F||L.isContextLost())&&(L.shaderSource(F,"void main() {}"),L.compileShader(F),L.getShaderParameter(F,L.COMPILE_STATUS)===!0)}(w)),m[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}l.exports?l.exports=h:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=h,window.mapboxgl.notSupportedReason=c);var m={};h.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),_={create:function(l,h,c){var m=o.window.document.createElement(l);return h!==void 0&&(m.className=h),c&&c.appendChild(m),m},createNS:function(l,h){return o.window.document.createElementNS(l,h)}},C=o.window.document&&o.window.document.documentElement.style;function S(l){if(!C)return l[0];for(var h=0;h<l.length;h++)if(l[h]in C)return l[h];return l[0]}var k,P=S(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);_.disableDrag=function(){C&&P&&(k=C[P],C[P]="none")},_.enableDrag=function(){C&&P&&(C[P]=k)};var B=S(["transform","WebkitTransform"]);_.setTransform=function(l,h){l.style[B]=h};var G=!1;try{var j=Object.defineProperty({},"passive",{get:function(){G=!0}});o.window.addEventListener("test",j,j),o.window.removeEventListener("test",j,j)}catch{G=!1}_.addEventListener=function(l,h,c,m){m===void 0&&(m={}),l.addEventListener(h,c,"passive"in m&&G?m:m.capture)},_.removeEventListener=function(l,h,c,m){m===void 0&&(m={}),l.removeEventListener(h,c,"passive"in m&&G?m:m.capture)};var X=function(l){l.preventDefault(),l.stopPropagation(),o.window.removeEventListener("click",X,!0)};function pt(l){var h=l.userImage;return!!(h&&h.render&&h.render())&&(l.data.replace(new Uint8Array(h.data.buffer)),!0)}_.suppressClick=function(){o.window.addEventListener("click",X,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",X,!0)},0)},_.mousePos=function(l,h){var c=l.getBoundingClientRect();return new o.Point(h.clientX-c.left-l.clientLeft,h.clientY-c.top-l.clientTop)},_.touchPos=function(l,h){for(var c=l.getBoundingClientRect(),m=[],b=0;b<h.length;b++)m.push(new o.Point(h[b].clientX-c.left-l.clientLeft,h[b].clientY-c.top-l.clientTop));return m},_.mouseButton=function(l){return o.window.InstallTrigger!==void 0&&l.button===2&&l.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:l.button},_.remove=function(l){l.parentNode&&l.parentNode.removeChild(l)};var J=function(l){function h(){l.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.isLoaded=function(){return this.loaded},h.prototype.setLoaded=function(c){if(this.loaded!==c&&(this.loaded=c,c)){for(var m=0,b=this.requestors;m<b.length;m+=1){var w=b[m];this._notify(w.ids,w.callback)}this.requestors=[]}},h.prototype.getImage=function(c){return this.images[c]},h.prototype.addImage=function(c,m){this._validate(c,m)&&(this.images[c]=m)},h.prototype._validate=function(c,m){var b=!0;return this._validateStretch(m.stretchX,m.data&&m.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+c+'" has invalid "stretchX" value'))),b=!1),this._validateStretch(m.stretchY,m.data&&m.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+c+'" has invalid "stretchY" value'))),b=!1),this._validateContent(m.content,m)||(this.fire(new o.ErrorEvent(new Error('Image "'+c+'" has invalid "content" value'))),b=!1),b},h.prototype._validateStretch=function(c,m){if(!c)return!0;for(var b=0,w=0,E=c;w<E.length;w+=1){var L=E[w];if(L[0]<b||L[1]<L[0]||m<L[1])return!1;b=L[1]}return!0},h.prototype._validateContent=function(c,m){return!(c&&(c.length!==4||c[0]<0||m.data.width<c[0]||c[1]<0||m.data.height<c[1]||c[2]<0||m.data.width<c[2]||c[3]<0||m.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))},h.prototype.updateImage=function(c,m){m.version=this.images[c].version+1,this.images[c]=m,this.updatedImages[c]=!0},h.prototype.removeImage=function(c){var m=this.images[c];delete this.images[c],delete this.patterns[c],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()},h.prototype.listImages=function(){return Object.keys(this.images)},h.prototype.getImages=function(c,m){var b=!0;if(!this.isLoaded())for(var w=0,E=c;w<E.length;w+=1)this.images[E[w]]||(b=!1);this.isLoaded()||b?this._notify(c,m):this.requestors.push({ids:c,callback:m})},h.prototype._notify=function(c,m){for(var b={},w=0,E=c;w<E.length;w+=1){var L=E[w];this.images[L]||this.fire(new o.Event("styleimagemissing",{id:L}));var F=this.images[L];F?b[L]={data:F.data.clone(),pixelRatio:F.pixelRatio,sdf:F.sdf,version:F.version,stretchX:F.stretchX,stretchY:F.stretchY,content:F.content,hasRenderCallback:!!(F.userImage&&F.userImage.render)}:o.warnOnce('Image "'+L+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}m(null,b)},h.prototype.getPixelSize=function(){var c=this.atlasImage;return{width:c.width,height:c.height}},h.prototype.getPattern=function(c){var m=this.patterns[c],b=this.getImage(c);if(!b)return null;if(m&&m.position.version===b.version)return m.position;if(m)m.position.version=b.version;else{var w={w:b.data.width+2,h:b.data.height+2,x:0,y:0},E=new o.ImagePosition(w,b);this.patterns[c]={bin:w,position:E}}return this._updatePatternAtlas(),this.patterns[c].position},h.prototype.bind=function(c){var m=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(c,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)},h.prototype._updatePatternAtlas=function(){var c=[];for(var m in this.patterns)c.push(this.patterns[m].bin);var b=o.potpack(c),w=b.w,E=b.h,L=this.atlasImage;for(var F in L.resize({width:w||1,height:E||1}),this.patterns){var H=this.patterns[F].bin,et=H.x+1,it=H.y+1,ot=this.images[F].data,yt=ot.width,dt=ot.height;o.RGBAImage.copy(ot,L,{x:0,y:0},{x:et,y:it},{width:yt,height:dt}),o.RGBAImage.copy(ot,L,{x:0,y:dt-1},{x:et,y:it-1},{width:yt,height:1}),o.RGBAImage.copy(ot,L,{x:0,y:0},{x:et,y:it+dt},{width:yt,height:1}),o.RGBAImage.copy(ot,L,{x:yt-1,y:0},{x:et-1,y:it},{width:1,height:dt}),o.RGBAImage.copy(ot,L,{x:0,y:0},{x:et+yt,y:it},{width:1,height:dt})}this.dirty=!0},h.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},h.prototype.dispatchRenderCallbacks=function(c){for(var m=0,b=c;m<b.length;m+=1){var w=b[m];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var E=this.images[w];pt(E)&&this.updateImage(w,E)}}},h}(o.Evented),nt=xt,ft=xt,Lt=1e20;function xt(l,h,c,m,b,w){this.fontSize=l||24,this.buffer=h===void 0?3:h,this.cutoff=m||.25,this.fontFamily=b||"sans-serif",this.fontWeight=w||"normal",this.radius=c||8;var E=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=E,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.d=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Int16Array(E),this.middle=Math.round(E/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Mt(l,h,c,m,b,w,E){for(var L=0;L<h;L++){for(var F=0;F<c;F++)m[F]=l[F*h+L];for(Ht(m,b,w,E,c),F=0;F<c;F++)l[F*h+L]=b[F]}for(F=0;F<c;F++){for(L=0;L<h;L++)m[L]=l[F*h+L];for(Ht(m,b,w,E,h),L=0;L<h;L++)l[F*h+L]=Math.sqrt(b[L])}}function Ht(l,h,c,m,b){c[0]=0,m[0]=-Lt,m[1]=+Lt;for(var w=1,E=0;w<b;w++){for(var L=(l[w]+w*w-(l[c[E]]+c[E]*c[E]))/(2*w-2*c[E]);L<=m[E];)E--,L=(l[w]+w*w-(l[c[E]]+c[E]*c[E]))/(2*w-2*c[E]);c[++E]=w,m[E]=L,m[E+1]=+Lt}for(w=0,E=0;w<b;w++){for(;m[E+1]<w;)E++;h[w]=(w-c[E])*(w-c[E])+l[c[E]]}}xt.prototype.draw=function(l){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(l,this.buffer,this.middle);for(var h=this.ctx.getImageData(0,0,this.size,this.size),c=new Uint8ClampedArray(this.size*this.size),m=0;m<this.size*this.size;m++){var b=h.data[4*m+3]/255;this.gridOuter[m]=b===1?0:b===0?Lt:Math.pow(Math.max(0,.5-b),2),this.gridInner[m]=b===1?Lt:b===0?0:Math.pow(Math.max(0,b-.5),2)}for(Mt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Mt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),m=0;m<this.size*this.size;m++)c[m]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[m]-this.gridInner[m])/this.radius+this.cutoff))));return c},nt.default=ft;var jt=function(l,h){this.requestManager=l,this.localIdeographFontFamily=h,this.entries={}};jt.prototype.setURL=function(l){this.url=l},jt.prototype.getGlyphs=function(l,h){var c=this,m=[];for(var b in l)for(var w=0,E=l[b];w<E.length;w+=1)m.push({stack:b,id:E[w]});o.asyncAll(m,function(L,F){var H=L.stack,et=L.id,it=c.entries[H];it||(it=c.entries[H]={glyphs:{},requests:{},ranges:{}});var ot=it.glyphs[et];if(ot===void 0){if(ot=c._tinySDF(it,H,et))return it.glyphs[et]=ot,void F(null,{stack:H,id:et,glyph:ot});var yt=Math.floor(et/256);if(256*yt>65535)F(new Error("glyphs > 65535 not supported"));else if(it.ranges[yt])F(null,{stack:H,id:et,glyph:ot});else{var dt=it.requests[yt];dt||(dt=it.requests[yt]=[],jt.loadGlyphRange(H,yt,c.url,c.requestManager,function(Ct,ht){if(ht){for(var It in ht)c._doesCharSupportLocalGlyph(+It)||(it.glyphs[+It]=ht[+It]);it.ranges[yt]=!0}for(var Rt=0,qt=dt;Rt<qt.length;Rt+=1)(0,qt[Rt])(Ct,ht);delete it.requests[yt]})),dt.push(function(Ct,ht){Ct?F(Ct):ht&&F(null,{stack:H,id:et,glyph:ht[et]||null})})}}else F(null,{stack:H,id:et,glyph:ot})},function(L,F){if(L)h(L);else if(F){for(var H={},et=0,it=F;et<it.length;et+=1){var ot=it[et],yt=ot.stack,dt=ot.id,Ct=ot.glyph;(H[yt]||(H[yt]={}))[dt]=Ct&&{id:Ct.id,bitmap:Ct.bitmap.clone(),metrics:Ct.metrics}}h(null,H)}})},jt.prototype._doesCharSupportLocalGlyph=function(l){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](l)||o.isChar["Hangul Syllables"](l)||o.isChar.Hiragana(l)||o.isChar.Katakana(l))},jt.prototype._tinySDF=function(l,h,c){var m=this.localIdeographFontFamily;if(m&&this._doesCharSupportLocalGlyph(c)){var b=l.tinySDF;if(!b){var w="400";/bold/i.test(h)?w="900":/medium/i.test(h)?w="500":/light/i.test(h)&&(w="200"),b=l.tinySDF=new jt.TinySDF(24,3,8,.25,m,w)}return{id:c,bitmap:new o.AlphaImage({width:30,height:30},b.draw(String.fromCharCode(c))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},jt.loadGlyphRange=function(l,h,c,m,b){var w=256*h,E=w+255,L=m.transformRequest(m.normalizeGlyphsURL(c).replace("{fontstack}",l).replace("{range}",w+"-"+E),o.ResourceType.Glyphs);o.getArrayBuffer(L,function(F,H){if(F)b(F);else if(H){for(var et={},it=0,ot=o.parseGlyphPBF(H);it<ot.length;it+=1){var yt=ot[it];et[yt.id]=yt}b(null,et)}})},jt.TinySDF=nt;var Qt=function(){this.specification=o.styleSpec.light.position};Qt.prototype.possiblyEvaluate=function(l,h){return o.sphericalToCartesian(l.expression.evaluate(h))},Qt.prototype.interpolate=function(l,h,c){return{x:o.number(l.x,h.x,c),y:o.number(l.y,h.y,c),z:o.number(l.z,h.z,c)}};var Bt=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new Qt,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),Ft=function(l){function h(c){l.call(this),this._transitionable=new o.Transitionable(Bt),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getLight=function(){return this._transitionable.serialize()},h.prototype.setLight=function(c,m){if(m===void 0&&(m={}),!this._validate(o.validateLight,c,m))for(var b in c){var w=c[b];o.endsWith(b,"-transition")?this._transitionable.setTransition(b.slice(0,-11),w):this._transitionable.setValue(b,w)}},h.prototype.updateTransitions=function(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)},h.prototype.hasTransition=function(){return this._transitioning.hasTransition()},h.prototype.recalculate=function(c){this.properties=this._transitioning.possiblyEvaluate(c)},h.prototype._validate=function(c,m,b){return(!b||b.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},h}(o.Evented),Ot=function(l,h){this.width=l,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ot.prototype.getDash=function(l,h){var c=l.join(",")+String(h);return this.dashEntry[c]||(this.dashEntry[c]=this.addDash(l,h)),this.dashEntry[c]},Ot.prototype.getDashRanges=function(l,h,c){var m=[],b=l.length%2==1?-l[l.length-1]*c:0,w=l[0]*c,E=!0;m.push({left:b,right:w,isDash:E,zeroLength:l[0]===0});for(var L=l[0],F=1;F<l.length;F++){var H=l[F];m.push({left:b=L*c,right:w=(L+=H)*c,isDash:E=!E,zeroLength:H===0})}return m},Ot.prototype.addRoundDash=function(l,h,c){for(var m=h/2,b=-c;b<=c;b++)for(var w=this.width*(this.nextRow+c+b),E=0,L=l[E],F=0;F<this.width;F++){F/L.right>1&&(L=l[++E]);var H=Math.abs(F-L.left),et=Math.abs(F-L.right),it=Math.min(H,et),ot=void 0,yt=b/c*(m+1);if(L.isDash){var dt=m-Math.abs(yt);ot=Math.sqrt(it*it+dt*dt)}else ot=m-Math.sqrt(it*it+yt*yt);this.data[w+F]=Math.max(0,Math.min(255,ot+128))}},Ot.prototype.addRegularDash=function(l){for(var h=l.length-1;h>=0;--h){var c=l[h],m=l[h+1];c.zeroLength?l.splice(h,1):m&&m.isDash===c.isDash&&(m.left=c.left,l.splice(h,1))}var b=l[0],w=l[l.length-1];b.isDash===w.isDash&&(b.left=w.left-this.width,w.right=b.right+this.width);for(var E=this.width*this.nextRow,L=0,F=l[L],H=0;H<this.width;H++){H/F.right>1&&(F=l[++L]);var et=Math.abs(H-F.left),it=Math.abs(H-F.right),ot=Math.min(et,it);this.data[E+H]=Math.max(0,Math.min(255,(F.isDash?ot:-ot)+128))}},Ot.prototype.addDash=function(l,h){var c=h?7:0,m=2*c+1;if(this.nextRow+m>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var b=0,w=0;w<l.length;w++)b+=l[w];if(b!==0){var E=this.width/b,L=this.getDashRanges(l,this.width,E);h?this.addRoundDash(L,E,c):this.addRegularDash(L)}var F={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:b};return this.nextRow+=m,this.dirty=!0,F},Ot.prototype.bind=function(l){var h=l.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))};var de=function l(h,c){this.workerPool=h,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var m=this.workerPool.acquire(this.id),b=0;b<m.length;b++){var w=new l.Actor(m[b],c,this.id);w.name="Worker "+b,this.actors.push(w)}};function An(l,h,c){var m=function(b,w){if(b)return c(b);if(w){var E=o.pick(o.extend(w,l),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(E.vectorLayers=w.vector_layers,E.vectorLayerIds=E.vectorLayers.map(function(L){return L.id})),E.tiles=h.canonicalizeTileset(E,l.url),c(null,E)}};return l.url?o.getJSON(h.transformRequest(h.normalizeSourceURL(l.url),o.ResourceType.Source),m):o.browser.frame(function(){return m(null,l)})}de.prototype.broadcast=function(l,h,c){o.asyncAll(this.actors,function(m,b){m.send(l,h,b)},c=c||function(){})},de.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},de.prototype.remove=function(){this.actors.forEach(function(l){l.remove()}),this.actors=[],this.workerPool.release(this.id)},de.Actor=o.Actor;var _e=function(l,h,c){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=h||0,this.maxzoom=c||24};_e.prototype.validateBounds=function(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]},_e.prototype.contains=function(l){var h=Math.pow(2,l.z),c=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*h),m=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*h),b=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*h),w=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*h);return l.x>=c&&l.x<b&&l.y>=m&&l.y<w};var Ge=function(l){function h(c,m,b,w){if(l.call(this),this.id=c,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(m,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.load=function(){var c=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=An(this._options,this.map._requestManager,function(m,b){c._tileJSONRequest=null,c._loaded=!0,m?c.fire(new o.ErrorEvent(m)):b&&(o.extend(c,b),b.bounds&&(c.tileBounds=new _e(b.bounds,c.minzoom,c.maxzoom)),o.postTurnstileEvent(b.tiles,c.map._requestManager._customAccessToken),o.postMapLoadEvent(b.tiles,c.map._getMapId(),c.map._requestManager._skuToken,c.map._requestManager._customAccessToken),c.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),c.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},h.prototype.loaded=function(){return this._loaded},h.prototype.hasTile=function(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)},h.prototype.onAdd=function(c){this.map=c,this.load()},h.prototype.setSourceProperty=function(c){this._tileJSONRequest&&this._tileJSONRequest.cancel(),c(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},h.prototype.setTiles=function(c){var m=this;return this.setSourceProperty(function(){m._options.tiles=c}),this},h.prototype.setUrl=function(c){var m=this;return this.setSourceProperty(function(){m.url=c,m._options.url=c}),this},h.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},h.prototype.serialize=function(){return o.extend({},this._options)},h.prototype.loadTile=function(c,m){var b=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(b,o.ResourceType.Tile),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(L,F){return delete c.request,c.aborted?m(null):L&&L.status!==404?m(L):(F&&F.resourceTiming&&(c.resourceTiming=F.resourceTiming),this.map._refreshExpiredTiles&&F&&c.setExpiryData(F),c.loadVectorData(F,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),m(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired"?c.state==="loading"?c.reloadCallback=m:c.request=c.actor.send("reloadTile",w,E.bind(this)):(c.actor=this.dispatcher.getActor(),c.request=c.actor.send("loadTile",w,E.bind(this)))},h.prototype.abortTile=function(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id},void 0)},h.prototype.unloadTile=function(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id},void 0)},h.prototype.hasTransition=function(){return!1},h}(o.Evented),je=function(l){function h(c,m,b,w){l.call(this),this.id=c,this.dispatcher=b,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},m),o.extend(this,o.pick(m,["url","scheme","tileSize"]))}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.load=function(){var c=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=An(this._options,this.map._requestManager,function(m,b){c._tileJSONRequest=null,c._loaded=!0,m?c.fire(new o.ErrorEvent(m)):b&&(o.extend(c,b),b.bounds&&(c.tileBounds=new _e(b.bounds,c.minzoom,c.maxzoom)),o.postTurnstileEvent(b.tiles),o.postMapLoadEvent(b.tiles,c.map._getMapId(),c.map._requestManager._skuToken),c.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),c.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},h.prototype.loaded=function(){return this._loaded},h.prototype.onAdd=function(c){this.map=c,this.load()},h.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},h.prototype.serialize=function(){return o.extend({},this._options)},h.prototype.hasTile=function(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)},h.prototype.loadTile=function(c,m){var b=this,w=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);c.request=o.getImage(this.map._requestManager.transformRequest(w,o.ResourceType.Tile),function(E,L){if(delete c.request,c.aborted)c.state="unloaded",m(null);else if(E)c.state="errored",m(E);else if(L){b.map._refreshExpiredTiles&&c.setExpiryData(L),delete L.cacheControl,delete L.expires;var F=b.map.painter.context,H=F.gl;c.texture=b.map.painter.getTileTexture(L.width),c.texture?c.texture.update(L,{useMipmap:!0}):(c.texture=new o.Texture(F,L,H.RGBA,{useMipmap:!0}),c.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),F.extTextureFilterAnisotropic&&H.texParameterf(H.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax)),c.state="loaded",o.cacheEntryPossiblyAdded(b.dispatcher),m(null)}})},h.prototype.abortTile=function(c,m){c.request&&(c.request.cancel(),delete c.request),m()},h.prototype.unloadTile=function(c,m){c.texture&&this.map.painter.saveTileTexture(c.texture),m()},h.prototype.hasTransition=function(){return!1},h}(o.Evented),Pi=function(l){function h(c,m,b,w){l.call(this,c,m,b,w),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox"}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},h.prototype.loadTile=function(c,m){var b=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(E,L){E&&(c.state="errored",m(E)),L&&(c.dem=L,c.needsHillshadePrepare=!0,c.state="loaded",m(null))}c.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),(function(E,L){if(delete c.request,c.aborted)c.state="unloaded",m(null);else if(E)c.state="errored",m(E);else if(L){this.map._refreshExpiredTiles&&c.setExpiryData(L),delete L.cacheControl,delete L.expires;var F=o.window.ImageBitmap&&L instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?L:o.browser.getImageData(L,1),H={uid:c.uid,coord:c.tileID,source:this.id,rawImageData:F,encoding:this.encoding};c.actor&&c.state!=="expired"||(c.actor=this.dispatcher.getActor(),c.actor.send("loadDEMTile",H,w.bind(this)))}}).bind(this)),c.neighboringTiles=this._getNeighboringTiles(c.tileID)},h.prototype._getNeighboringTiles=function(c){var m=c.canonical,b=Math.pow(2,m.z),w=(m.x-1+b)%b,E=m.x===0?c.wrap-1:c.wrap,L=(m.x+1+b)%b,F=m.x+1===b?c.wrap+1:c.wrap,H={};return H[new o.OverscaledTileID(c.overscaledZ,E,m.z,w,m.y).key]={backfilled:!1},H[new o.OverscaledTileID(c.overscaledZ,F,m.z,L,m.y).key]={backfilled:!1},m.y>0&&(H[new o.OverscaledTileID(c.overscaledZ,E,m.z,w,m.y-1).key]={backfilled:!1},H[new o.OverscaledTileID(c.overscaledZ,c.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},H[new o.OverscaledTileID(c.overscaledZ,F,m.z,L,m.y-1).key]={backfilled:!1}),m.y+1<b&&(H[new o.OverscaledTileID(c.overscaledZ,E,m.z,w,m.y+1).key]={backfilled:!1},H[new o.OverscaledTileID(c.overscaledZ,c.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},H[new o.OverscaledTileID(c.overscaledZ,F,m.z,L,m.y+1).key]={backfilled:!1}),H},h.prototype.unloadTile=function(c){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&c.actor.send("removeDEMTile",{uid:c.uid,source:this.id})},h}(je),Li=function(l){function h(c,m,b,w){l.call(this),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=b.getActor(),this.setEventedParent(w),this._data=m.data,this._options=o.extend({},m),this._collectResourceTiming=m.collectResourceTiming,this._resourceTiming=[],m.maxzoom!==void 0&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId;var E=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:(m.buffer!==void 0?m.buffer:128)*E,tolerance:(m.tolerance!==void 0?m.tolerance:.375)*E,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:m.clusterMaxZoom!==void 0?Math.min(m.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,m.clusterMinPoints||2),extent:o.EXTENT,radius:(m.clusterRadius||50)*E,log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.load=function(){var c=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)c.fire(new o.ErrorEvent(m));else{var b={dataType:"source",sourceDataType:"metadata"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(b.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new o.Event("data",b))}})},h.prototype.onAdd=function(c){this.map=c,this.load()},h.prototype.setData=function(c){var m=this;return this._data=c,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(b){if(b)m.fire(new o.ErrorEvent(b));else{var w={dataType:"source",sourceDataType:"content"};m._collectResourceTiming&&m._resourceTiming&&m._resourceTiming.length>0&&(w.resourceTiming=m._resourceTiming,m._resourceTiming=[]),m.fire(new o.Event("data",w))}}),this},h.prototype.getClusterExpansionZoom=function(c,m){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:c,source:this.id},m),this},h.prototype.getClusterChildren=function(c,m){return this.actor.send("geojson.getClusterChildren",{clusterId:c,source:this.id},m),this},h.prototype.getClusterLeaves=function(c,m,b,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:c,limit:m,offset:b},w),this},h.prototype._updateWorkerData=function(c){var m=this;this._loaded=!1;var b=o.extend({},this.workerOptions),w=this._data;typeof w=="string"?(b.request=this.map._requestManager.transformRequest(o.browser.resolveURL(w),o.ResourceType.Source),b.request.collectResourceTiming=this._collectResourceTiming):b.data=JSON.stringify(w),this.actor.send(this.type+".loadData",b,function(E,L){m._removed||L&&L.abandoned||(m._loaded=!0,L&&L.resourceTiming&&L.resourceTiming[m.id]&&(m._resourceTiming=L.resourceTiming[m.id].slice(0)),m.actor.send(m.type+".coalesce",{source:b.source},null),c(E))})},h.prototype.loaded=function(){return this._loaded},h.prototype.loadTile=function(c,m){var b=this,w=c.actor?"reloadTile":"loadTile";c.actor=this.actor,c.request=this.actor.send(w,{type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(E,L){return delete c.request,c.unloadVectorData(),c.aborted?m(null):E?m(E):(c.loadVectorData(L,b.map.painter,w==="reloadTile"),m(null))})},h.prototype.abortTile=function(c){c.request&&(c.request.cancel(),delete c.request),c.aborted=!0},h.prototype.unloadTile=function(c){c.unloadVectorData(),this.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})},h.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},h.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},h.prototype.hasTransition=function(){return!1},h}(o.Evented),Qn=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),un=function(l){function h(c,m,b,w){l.call(this),this.id=c,this.dispatcher=b,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=m}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.load=function(c,m){var b=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(w,E){b._loaded=!0,w?b.fire(new o.ErrorEvent(w)):E&&(b.image=E,c&&(b.coordinates=c),m&&m(),b._finishLoading())})},h.prototype.loaded=function(){return this._loaded},h.prototype.updateImage=function(c){var m=this;return this.image&&c.url?(this.options.url=c.url,this.load(c.coordinates,function(){m.texture=null}),this):this},h.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},h.prototype.onAdd=function(c){this.map=c,this.load()},h.prototype.setCoordinates=function(c){var m=this;this.coordinates=c;var b=c.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(E){for(var L=1/0,F=1/0,H=-1/0,et=-1/0,it=0,ot=E;it<ot.length;it+=1){var yt=ot[it];L=Math.min(L,yt.x),F=Math.min(F,yt.y),H=Math.max(H,yt.x),et=Math.max(et,yt.y)}var dt=Math.max(H-L,et-F),Ct=Math.max(0,Math.floor(-Math.log(dt)/Math.LN2)),ht=Math.pow(2,Ct);return new o.CanonicalTileID(Ct,Math.floor((L+H)/2*ht),Math.floor((F+et)/2*ht))}(b),this.minzoom=this.maxzoom=this.tileID.z;var w=b.map(function(E){return m.tileID.getTilePoint(E)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},h.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var c=this.map.painter.context,m=c.gl;for(var b in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Qn.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(c,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},h.prototype.loadTile=function(c,m){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},m(null)):(c.state="errored",m(null))},h.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},h.prototype.hasTransition=function(){return!1},h}(o.Evented),Un=function(l){function h(c,m,b,w){l.call(this,c,m,b,w),this.roundZoom=!0,this.type="video",this.options=m}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.load=function(){var c=this;this._loaded=!1;var m=this.options;this.urls=[];for(var b=0,w=m.urls;b<w.length;b+=1)this.urls.push(this.map._requestManager.transformRequest(w[b],o.ResourceType.Source).url);o.getVideo(this.urls,function(E,L){c._loaded=!0,E?c.fire(new o.ErrorEvent(E)):L&&(c.video=L,c.video.loop=!0,c.video.setAttribute("playsinline",""),c.video.addEventListener("playing",function(){c.map.triggerRepaint()}),c.map&&c.video.play(),c._finishLoading())})},h.prototype.pause=function(){this.video&&this.video.pause()},h.prototype.play=function(){this.video&&this.video.play()},h.prototype.seek=function(c){if(this.video){var m=this.video.seekable;c<m.start(0)||c>m.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+m.start(0)+" and "+m.end(0)+"-second mark."))):this.video.currentTime=c}},h.prototype.getVideo=function(){return this.video},h.prototype.onAdd=function(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},h.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var c=this.map.painter.context,m=c.gl;for(var b in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Qn.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.texSubImage2D(m.TEXTURE_2D,0,0,0,m.RGBA,m.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(c,this.video,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},h.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},h.prototype.hasTransition=function(){return this.video&&!this.video.paused},h}(un),ui=function(l){function h(c,m,b,w){l.call(this,c,m,b,w),m.coordinates?Array.isArray(m.coordinates)&&m.coordinates.length===4&&!m.coordinates.some(function(E){return!Array.isArray(E)||E.length!==2||E.some(function(L){return typeof L!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+c,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+c,null,'missing required property "coordinates"'))),m.animate&&typeof m.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+c,null,'optional "animate" property must be a boolean value'))),m.canvas?typeof m.canvas=="string"||m.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+c,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+c,null,'missing required property "canvas"'))),this.options=m,this.animate=m.animate===void 0||m.animate}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},h.prototype.getCanvas=function(){return this.canvas},h.prototype.onAdd=function(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()},h.prototype.onRemove=function(){this.pause()},h.prototype.prepare=function(){var c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var m=this.map.painter.context,b=m.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,Qn.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(m,this.canvas,b.RGBA,{premultiply:!0}),this.tiles){var E=this.tiles[w];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},h.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},h.prototype.hasTransition=function(){return this._playing},h.prototype._hasInvalidDimensions=function(){for(var c=0,m=[this.canvas.width,this.canvas.height];c<m.length;c+=1){var b=m[c];if(isNaN(b)||b<=0)return!0}return!1},h}(un),oi={vector:Ge,raster:je,"raster-dem":Pi,geojson:Li,video:Un,image:un,canvas:ui};function wi(l,h){var c=o.identity([]);return o.translate(c,c,[1,1,0]),o.scale(c,c,[.5*l.width,.5*l.height,1]),o.multiply(c,c,l.calculatePosMatrix(h.toUnwrapped()))}function ue(l,h,c,m,b,w){var E=function(Ct,ht,It){if(Ct)for(var Rt=0,qt=Ct;Rt<qt.length;Rt+=1){var re=ht[qt[Rt]];if(re&&re.source===It&&re.type==="fill-extrusion")return!0}else for(var ne in ht){var ae=ht[ne];if(ae.source===It&&ae.type==="fill-extrusion")return!0}return!1}(b&&b.layers,h,l.id),L=w.maxPitchScaleFactor(),F=l.tilesIn(m,L,E);F.sort(Qe);for(var H=[],et=0,it=F;et<it.length;et+=1){var ot=it[et];H.push({wrappedTileID:ot.tileID.wrapped().key,queryResults:ot.tile.queryRenderedFeatures(h,c,l._state,ot.queryGeometry,ot.cameraQueryGeometry,ot.scale,b,w,L,wi(l.transform,ot.tileID))})}var yt=function(Ct){for(var ht={},It={},Rt=0,qt=Ct;Rt<qt.length;Rt+=1){var re=qt[Rt],ne=re.queryResults,ae=re.wrappedTileID,ve=It[ae]=It[ae]||{};for(var Ce in ne)for(var Le=ne[Ce],We=ve[Ce]=ve[Ce]||{},fn=ht[Ce]=ht[Ce]||[],Tn=0,En=Le;Tn<En.length;Tn+=1){var Oi=En[Tn];We[Oi.featureIndex]||(We[Oi.featureIndex]=!0,fn.push(Oi))}}return ht}(H);for(var dt in yt)yt[dt].forEach(function(Ct){var ht=Ct.feature,It=l.getFeatureState(ht.layer["source-layer"],ht.id);ht.source=ht.layer.source,ht.layer["source-layer"]&&(ht.sourceLayer=ht.layer["source-layer"]),ht.state=It});return yt}function Qe(l,h){var c=l.tileID,m=h.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}var me=function(l,h){this.max=l,this.onRemove=h,this.reset()};me.prototype.reset=function(){for(var l in this.data)for(var h=0,c=this.data[l];h<c.length;h+=1){var m=c[h];m.timeout&&clearTimeout(m.timeout),this.onRemove(m.value)}return this.data={},this.order=[],this},me.prototype.add=function(l,h,c){var m=this,b=l.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);var w={value:h,timeout:void 0};if(c!==void 0&&(w.timeout=setTimeout(function(){m.remove(l,w)},c)),this.data[b].push(w),this.order.push(b),this.order.length>this.max){var E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this},me.prototype.has=function(l){return l.wrapped().key in this.data},me.prototype.getAndRemove=function(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null},me.prototype._getAndRemoveByKey=function(l){var h=this.data[l].shift();return h.timeout&&clearTimeout(h.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),h.value},me.prototype.getByKey=function(l){var h=this.data[l];return h?h[0].value:null},me.prototype.get=function(l){return this.has(l)?this.data[l.wrapped().key][0].value:null},me.prototype.remove=function(l,h){if(!this.has(l))return this;var c=l.wrapped().key,m=h===void 0?0:this.data[c].indexOf(h),b=this.data[c][m];return this.data[c].splice(m,1),b.timeout&&clearTimeout(b.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(b.value),this.order.splice(this.order.indexOf(c),1),this},me.prototype.setMaxSize=function(l){for(this.max=l;this.order.length>this.max;){var h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this},me.prototype.filter=function(l){var h=[];for(var c in this.data)for(var m=0,b=this.data[c];m<b.length;m+=1){var w=b[m];l(w.value)||h.push(w)}for(var E=0,L=h;E<L.length;E+=1){var F=L[E];this.remove(F.value.tileID,F)}};var ke=function(l,h,c){this.context=l;var m=l.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!c,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer};ke.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ke.prototype.updateData=function(l){var h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)},ke.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ci={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Di=function(l,h,c,m){this.length=h.length,this.attributes=c,this.itemSize=h.bytesPerElement,this.dynamicDraw=m,this.context=l;var b=l.gl;this.buffer=b.createBuffer(),l.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer};Di.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Di.prototype.updateData=function(l){var h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,l.arrayBuffer)},Di.prototype.enableAttributes=function(l,h){for(var c=0;c<this.attributes.length;c++){var m=h.attributes[this.attributes[c].name];m!==void 0&&l.enableVertexAttribArray(m)}},Di.prototype.setVertexAttribPointers=function(l,h,c){for(var m=0;m<this.attributes.length;m++){var b=this.attributes[m],w=h.attributes[b.name];w!==void 0&&l.vertexAttribPointer(w,b.components,l[Ci[b.type]],!1,this.itemSize,b.offset+this.itemSize*(c||0))}},Di.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var lt=function(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};lt.prototype.get=function(){return this.current},lt.prototype.set=function(l){},lt.prototype.getDefault=function(){return this.default},lt.prototype.setDefault=function(){this.set(this.default)};var wt=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return o.Color.transparent},h.prototype.set=function(c){var m=this.current;(c.r!==m.r||c.g!==m.g||c.b!==m.b||c.a!==m.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)},h}(lt),te=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return 1},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)},h}(lt),le=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return 0},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)},h}(lt),pe=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return[!0,!0,!0,!0]},h.prototype.set=function(c){var m=this.current;(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||c[3]!==m[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)},h}(lt),Fe=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!0},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)},h}(lt),cn=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return 255},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)},h}(lt),we=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},h.prototype.set=function(c){var m=this.current;(c.func!==m.func||c.ref!==m.ref||c.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)},h}(lt),ze=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){var c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]},h.prototype.set=function(c){var m=this.current;(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)},h}(lt),Te=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;c?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=c,this.dirty=!1}},h}(lt),en=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return[0,1]},h.prototype.set=function(c){var m=this.current;(c[0]!==m[0]||c[1]!==m[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)},h}(lt),Cn=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;c?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=c,this.dirty=!1}},h}(lt),In=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.LESS},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)},h}(lt),Pn=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;c?m.enable(m.BLEND):m.disable(m.BLEND),this.current=c,this.dirty=!1}},h}(lt),Jn=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){var c=this.gl;return[c.ONE,c.ZERO]},h.prototype.set=function(c){var m=this.current;(c[0]!==m[0]||c[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)},h}(lt),Ri=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return o.Color.transparent},h.prototype.set=function(c){var m=this.current;(c.r!==m.r||c.g!==m.g||c.b!==m.b||c.a!==m.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)},h}(lt),Ii=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.FUNC_ADD},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)},h}(lt),ar=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;c?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=c,this.dirty=!1}},h}(lt),qr=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.BACK},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)},h}(lt),Xo=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.CCW},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)},h}(lt),va=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)},h}(lt),Da=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.TEXTURE0},h.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)},h}(lt),Za=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){var c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]},h.prototype.set=function(c){var m=this.current;(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||c[3]!==m[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)},h}(lt),wr=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,c),this.current=c,this.dirty=!1}},h}(lt),To=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,c),this.current=c,this.dirty=!1}},h}(lt),$s=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.bindTexture(m.TEXTURE_2D,c),this.current=c,this.dirty=!1}},h}(lt),Ys=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}},h}(lt),xl=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){var m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1},h}(lt),Ra=function(l){function h(c){l.call(this,c),this.vao=c.extVertexArrayObject}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)},h}(lt),uo=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return 4},h.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}},h}(lt),Xs=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}},h}(lt),Au=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}},h}(lt),Wr=function(l){function h(c,m){l.call(this,c),this.context=c,this.parent=m}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h}(lt),U=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.setDirty=function(){this.dirty=!0},h.prototype.set=function(c){if(c!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}},h}(Wr),Z=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.set=function(c){if(c!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,c),this.current=c,this.dirty=!1}},h}(Wr),K=function(l,h,c,m){this.context=l,this.width=h,this.height=c;var b=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new U(l,b),m&&(this.depthAttachment=new Z(l,b))};K.prototype.destroy=function(){var l=this.context.gl,h=this.colorAttachment.get();if(h&&l.deleteTexture(h),this.depthAttachment){var c=this.depthAttachment.get();c&&l.deleteRenderbuffer(c)}l.deleteFramebuffer(this.framebuffer)};var at=function(l,h,c){this.func=l,this.mask=h,this.range=c};at.ReadOnly=!1,at.ReadWrite=!0,at.disabled=new at(519,at.ReadOnly,[0,1]);var gt=function(l,h,c,m,b,w){this.test=l,this.ref=h,this.mask=c,this.fail=m,this.depthFail=b,this.pass=w};gt.disabled=new gt({func:519,mask:0},0,0,7680,7680,7680);var Tt=function(l,h,c){this.blendFunction=l,this.blendColor=h,this.mask=c};Tt.disabled=new Tt(Tt.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),Tt.unblended=new Tt(Tt.Replace,o.Color.transparent,[!0,!0,!0,!0]),Tt.alphaBlended=new Tt([1,771],o.Color.transparent,[!0,!0,!0,!0]);var zt=function(l,h,c){this.enable=l,this.mode=h,this.frontFace=c};zt.disabled=new zt(!1,1029,2305),zt.backCCW=new zt(!0,1029,2305);var tt=function(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new wt(this),this.clearDepth=new te(this),this.clearStencil=new le(this),this.colorMask=new pe(this),this.depthMask=new Fe(this),this.stencilMask=new cn(this),this.stencilFunc=new we(this),this.stencilOp=new ze(this),this.stencilTest=new Te(this),this.depthRange=new en(this),this.depthTest=new Cn(this),this.depthFunc=new In(this),this.blend=new Pn(this),this.blendFunc=new Jn(this),this.blendColor=new Ri(this),this.blendEquation=new Ii(this),this.cullFace=new ar(this),this.cullFaceSide=new qr(this),this.frontFace=new Xo(this),this.program=new va(this),this.activeTexture=new Da(this),this.viewport=new Za(this),this.bindFramebuffer=new wr(this),this.bindRenderbuffer=new To(this),this.bindTexture=new $s(this),this.bindVertexBuffer=new Ys(this),this.bindElementBuffer=new xl(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ra(this),this.pixelStoreUnpack=new uo(this),this.pixelStoreUnpackPremultiplyAlpha=new Xs(this),this.pixelStoreUnpackFlipY=new Au(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)};tt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},tt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},tt.prototype.createIndexBuffer=function(l,h){return new ke(this,l,h)},tt.prototype.createVertexBuffer=function(l,h,c){return new Di(this,l,h,c)},tt.prototype.createRenderbuffer=function(l,h,c){var m=this.gl,b=m.createRenderbuffer();return this.bindRenderbuffer.set(b),m.renderbufferStorage(m.RENDERBUFFER,l,h,c),this.bindRenderbuffer.set(null),b},tt.prototype.createFramebuffer=function(l,h,c){return new K(this,l,h,c)},tt.prototype.clear=function(l){var h=l.color,c=l.depth,m=this.gl,b=0;h&&(b|=m.COLOR_BUFFER_BIT,this.clearColor.set(h),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(b|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m.clear(b)},tt.prototype.setCullFace=function(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))},tt.prototype.setDepthMode=function(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)},tt.prototype.setStencilMode=function(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)},tt.prototype.setColorMode=function(l){o.deepEqual(l.blendFunction,Tt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)},tt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var _t=function(l){function h(c,m,b){var w=this;l.call(this),this.id=c,this.dispatcher=b,this.on("data",function(E){E.dataType==="source"&&E.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(E,L,F,H){var et=new oi[L.type](E,L,F,H);if(et.id!==E)throw new Error("Expected Source id to be "+E+" instead of "+et.id);return o.bindAll(["load","abort","unload","serialize","prepare"],et),et}(c,m,b,this),this._tiles={},this._cache=new me(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.onAdd=function(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(c)},h.prototype.onRemove=function(c){this._source&&this._source.onRemove&&this._source.onRemove(c)},h.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var c in this._tiles){var m=this._tiles[c];if(m.state!=="loaded"&&m.state!=="errored")return!1}return!0},h.prototype.getSource=function(){return this._source},h.prototype.pause=function(){this._paused=!0},h.prototype.resume=function(){if(this._paused){var c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform)}},h.prototype._loadTile=function(c,m){return this._source.loadTile(c,m)},h.prototype._unloadTile=function(c){if(this._source.unloadTile)return this._source.unloadTile(c,function(){})},h.prototype._abortTile=function(c){if(this._source.abortTile)return this._source.abortTile(c,function(){})},h.prototype.serialize=function(){return this._source.serialize()},h.prototype.prepare=function(c){for(var m in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var b=this._tiles[m];b.upload(c),b.prepare(this.map.style.imageManager)}},h.prototype.getIds=function(){return o.values(this._tiles).map(function(c){return c.tileID}).sort(Zt).map(function(c){return c.key})},h.prototype.getRenderableIds=function(c){var m=this,b=[];for(var w in this._tiles)this._isIdRenderable(w,c)&&b.push(this._tiles[w]);return c?b.sort(function(E,L){var F=E.tileID,H=L.tileID,et=new o.Point(F.canonical.x,F.canonical.y)._rotate(m.transform.angle),it=new o.Point(H.canonical.x,H.canonical.y)._rotate(m.transform.angle);return F.overscaledZ-H.overscaledZ||it.y-et.y||it.x-et.x}).map(function(E){return E.tileID.key}):b.map(function(E){return E.tileID}).sort(Zt).map(function(E){return E.key})},h.prototype.hasRenderableParent=function(c){var m=this.findLoadedParent(c,0);return!!m&&this._isIdRenderable(m.tileID.key)},h.prototype._isIdRenderable=function(c,m){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(m||!this._tiles[c].holdingForFade())},h.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var c in this._cache.reset(),this._tiles)this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")},h.prototype._reloadTile=function(c,m){var b=this._tiles[c];b&&(b.state!=="loading"&&(b.state=m),this._loadTile(b,this._tileLoaded.bind(this,b,c,m)))},h.prototype._tileLoaded=function(c,m,b,w){if(w)return c.state="errored",void(w.status!==404?this._source.fire(new o.ErrorEvent(w,{tile:c})):this.update(this.transform));c.timeAdded=o.browser.now(),b==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(m,c),this.getSource().type==="raster-dem"&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:c,coord:c.tileID}))},h.prototype._backfillDEM=function(c){for(var m=this.getRenderableIds(),b=0;b<m.length;b++){var w=m[b];if(c.neighboringTiles&&c.neighboringTiles[w]){var E=this.getTileByID(w);L(c,E),L(E,c)}}function L(F,H){F.needsHillshadePrepare=!0;var et=H.tileID.canonical.x-F.tileID.canonical.x,it=H.tileID.canonical.y-F.tileID.canonical.y,ot=Math.pow(2,F.tileID.canonical.z),yt=H.tileID.key;et===0&&it===0||Math.abs(it)>1||(Math.abs(et)>1&&(Math.abs(et+ot)===1?et+=ot:Math.abs(et-ot)===1&&(et-=ot)),H.dem&&F.dem&&(F.dem.backfillBorder(H.dem,et,it),F.neighboringTiles&&F.neighboringTiles[yt]&&(F.neighboringTiles[yt].backfilled=!0)))}},h.prototype.getTile=function(c){return this.getTileByID(c.key)},h.prototype.getTileByID=function(c){return this._tiles[c]},h.prototype._retainLoadedChildren=function(c,m,b,w){for(var E in this._tiles){var L=this._tiles[E];if(!(w[E]||!L.hasData()||L.tileID.overscaledZ<=m||L.tileID.overscaledZ>b)){for(var F=L.tileID;L&&L.tileID.overscaledZ>m+1;){var H=L.tileID.scaledTo(L.tileID.overscaledZ-1);(L=this._tiles[H.key])&&L.hasData()&&(F=H)}for(var et=F;et.overscaledZ>m;)if(c[(et=et.scaledTo(et.overscaledZ-1)).key]){w[F.key]=F;break}}}},h.prototype.findLoadedParent=function(c,m){if(c.key in this._loadedParentTiles){var b=this._loadedParentTiles[c.key];return b&&b.tileID.overscaledZ>=m?b:null}for(var w=c.overscaledZ-1;w>=m;w--){var E=c.scaledTo(w),L=this._getLoadedTile(E);if(L)return L}},h.prototype._getLoadedTile=function(c){var m=this._tiles[c.key];return m&&m.hasData()?m:this._cache.getByKey(c.wrapped().key)},h.prototype.updateCacheSize=function(c){var m=Math.ceil(c.width/this._source.tileSize)+1,b=Math.ceil(c.height/this._source.tileSize)+1,w=Math.floor(m*b*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)},h.prototype.handleWrapJump=function(c){var m=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);if(this._prevLng=c,m){var b={};for(var w in this._tiles){var E=this._tiles[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+m),b[E.tileID.key]=E}for(var L in this._tiles=b,this._timers)clearTimeout(this._timers[L]),delete this._timers[L];for(var F in this._tiles)this._setTileReloadTimer(F,this._tiles[F])}},h.prototype.update=function(c){var m=this;if(this.transform=c,this._sourceLoaded&&!this._paused){var b;this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?b=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ve){return new o.OverscaledTileID(ve.canonical.z,ve.wrap,ve.canonical.z,ve.canonical.x,ve.canonical.y)}):(b=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(b=b.filter(function(ve){return m._source.hasTile(ve)}))):b=[];var w=c.coveringZoomLevel(this._source),E=Math.max(w-h.maxOverzooming,this._source.minzoom),L=Math.max(w+h.maxUnderzooming,this._source.minzoom),F=this._updateRetainedTiles(b,w);if(ge(this._source.type)){for(var H={},et={},it=0,ot=Object.keys(F);it<ot.length;it+=1){var yt=ot[it],dt=F[yt],Ct=this._tiles[yt];if(Ct&&!(Ct.fadeEndTime&&Ct.fadeEndTime<=o.browser.now())){var ht=this.findLoadedParent(dt,E);ht&&(this._addTile(ht.tileID),H[ht.tileID.key]=ht.tileID),et[yt]=dt}}for(var It in this._retainLoadedChildren(et,w,L,F),H)F[It]||(this._coveredTiles[It]=!0,F[It]=H[It])}for(var Rt in F)this._tiles[Rt].clearFadeHold();for(var qt=0,re=o.keysDifference(this._tiles,F);qt<re.length;qt+=1){var ne=re[qt],ae=this._tiles[ne];ae.hasSymbolBuckets&&!ae.holdingForFade()?ae.setHoldDuration(this.map._fadeDuration):ae.hasSymbolBuckets&&!ae.symbolFadeFinished()||this._removeTile(ne)}this._updateLoadedParentTileCache()}},h.prototype.releaseSymbolFadeTiles=function(){for(var c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(c)},h.prototype._updateRetainedTiles=function(c,m){for(var b={},w={},E=Math.max(m-h.maxOverzooming,this._source.minzoom),L=Math.max(m+h.maxUnderzooming,this._source.minzoom),F={},H=0,et=c;H<et.length;H+=1){var it=et[H],ot=this._addTile(it);b[it.key]=it,ot.hasData()||m<this._source.maxzoom&&(F[it.key]=it)}this._retainLoadedChildren(F,m,L,b);for(var yt=0,dt=c;yt<dt.length;yt+=1){var Ct=dt[yt],ht=this._tiles[Ct.key];if(!ht.hasData()){if(m+1>this._source.maxzoom){var It=Ct.children(this._source.maxzoom)[0],Rt=this.getTile(It);if(Rt&&Rt.hasData()){b[It.key]=It;continue}}else{var qt=Ct.children(this._source.maxzoom);if(b[qt[0].key]&&b[qt[1].key]&&b[qt[2].key]&&b[qt[3].key])continue}for(var re=ht.wasRequested(),ne=Ct.overscaledZ-1;ne>=E;--ne){var ae=Ct.scaledTo(ne);if(w[ae.key]||(w[ae.key]=!0,!(ht=this.getTile(ae))&&re&&(ht=this._addTile(ae)),ht&&(b[ae.key]=ae,re=ht.wasRequested(),ht.hasData())))break}}}return b},h.prototype._updateLoadedParentTileCache=function(){for(var c in this._loadedParentTiles={},this._tiles){for(var m=[],b=void 0,w=this._tiles[c].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){b=this._loadedParentTiles[w.key];break}m.push(w.key);var E=w.scaledTo(w.overscaledZ-1);if(b=this._getLoadedTile(E))break;w=E}for(var L=0,F=m;L<F.length;L+=1)this._loadedParentTiles[F[L]]=b}},h.prototype._addTile=function(c){var m=this._tiles[c.key];if(m)return m;(m=this._cache.getAndRemove(c))&&(this._setTileReloadTimer(c.key,m),m.tileID=c,this._state.initializeTileState(m,this.map?this.map.painter:null),this._cacheTimers[c.key]&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,m)));var b=!!m;return b||(m=new o.Tile(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(m,this._tileLoaded.bind(this,m,c.key,m.state))),m?(m.uses++,this._tiles[c.key]=m,b||this._source.fire(new o.Event("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m):null},h.prototype._setTileReloadTimer=function(c,m){var b=this;c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]);var w=m.getExpiryTimeout();w&&(this._timers[c]=setTimeout(function(){b._reloadTile(c,"expired"),delete b._timers[c]},w))},h.prototype._removeTile=function(c){var m=this._tiles[c];m&&(m.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),m.uses>0||(m.hasData()&&m.state!=="reloading"?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))},h.prototype.clearTiles=function(){for(var c in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(c);this._cache.reset()},h.prototype.tilesIn=function(c,m,b){var w=this,E=[],L=this.transform;if(!L)return E;for(var F=b?L.getCameraQueryGeometry(c):c,H=c.map(function(ne){return L.pointCoordinate(ne)}),et=F.map(function(ne){return L.pointCoordinate(ne)}),it=this.getIds(),ot=1/0,yt=1/0,dt=-1/0,Ct=-1/0,ht=0,It=et;ht<It.length;ht+=1){var Rt=It[ht];ot=Math.min(ot,Rt.x),yt=Math.min(yt,Rt.y),dt=Math.max(dt,Rt.x),Ct=Math.max(Ct,Rt.y)}for(var qt=function(ne){var ae=w._tiles[it[ne]];if(!ae.holdingForFade()){var ve=ae.tileID,Ce=Math.pow(2,L.zoom-ae.tileID.overscaledZ),Le=m*ae.queryPadding*o.EXTENT/ae.tileSize/Ce,We=[ve.getTilePoint(new o.MercatorCoordinate(ot,yt)),ve.getTilePoint(new o.MercatorCoordinate(dt,Ct))];if(We[0].x-Le<o.EXTENT&&We[0].y-Le<o.EXTENT&&We[1].x+Le>=0&&We[1].y+Le>=0){var fn=H.map(function(En){return ve.getTilePoint(En)}),Tn=et.map(function(En){return ve.getTilePoint(En)});E.push({tile:ae,tileID:ve,queryGeometry:fn,cameraQueryGeometry:Tn,scale:Ce})}}},re=0;re<it.length;re++)qt(re);return E},h.prototype.getVisibleCoordinates=function(c){for(var m=this,b=this.getRenderableIds(c).map(function(F){return m._tiles[F].tileID}),w=0,E=b;w<E.length;w+=1){var L=E[w];L.posMatrix=this.transform.calculatePosMatrix(L.toUnwrapped())}return b},h.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ge(this._source.type))for(var c in this._tiles){var m=this._tiles[c];if(m.fadeEndTime!==void 0&&m.fadeEndTime>=o.browser.now())return!0}return!1},h.prototype.setFeatureState=function(c,m,b){this._state.updateState(c=c||"_geojsonTileLayer",m,b)},h.prototype.removeFeatureState=function(c,m,b){this._state.removeFeatureState(c=c||"_geojsonTileLayer",m,b)},h.prototype.getFeatureState=function(c,m){return this._state.getState(c=c||"_geojsonTileLayer",m)},h.prototype.setDependencies=function(c,m,b){var w=this._tiles[c];w&&w.setDependencies(m,b)},h.prototype.reloadTilesForDependencies=function(c,m){for(var b in this._tiles)this._tiles[b].hasDependency(c,m)&&this._reloadTile(b,"reloading");this._cache.filter(function(w){return!w.hasDependency(c,m)})},h}(o.Evented);function Zt(l,h){var c=Math.abs(2*l.wrap)-+(l.wrap<0),m=Math.abs(2*h.wrap)-+(h.wrap<0);return l.overscaledZ-h.overscaledZ||m-c||h.canonical.y-l.canonical.y||h.canonical.x-l.canonical.x}function ge(l){return l==="raster"||l==="image"||l==="video"}function be(){return new o.window.Worker(zs.workerUrl)}_t.maxOverzooming=10,_t.maxUnderzooming=3;var oe="mapboxgl_preloaded_worker_pool",ye=function(){this.active={}};ye.prototype.acquire=function(l){if(!this.workers)for(this.workers=[];this.workers.length<ye.workerCount;)this.workers.push(new be);return this.active[l]=!0,this.workers.slice()},ye.prototype.release=function(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(function(h){h.terminate()}),this.workers=null)},ye.prototype.isPreloaded=function(){return!!this.active[oe]},ye.prototype.numActive=function(){return Object.keys(this.active).length};var ln,on=Math.floor(o.browser.hardwareConcurrency/2);function se(){return ln||(ln=new ye),ln}function Re(l,h){var c={};for(var m in l)m!=="ref"&&(c[m]=l[m]);return o.refProperties.forEach(function(b){b in h&&(c[b]=h[b])}),c}function Ue(l){l=l.slice();for(var h=Object.create(null),c=0;c<l.length;c++)h[l[c].id]=l[c];for(var m=0;m<l.length;m++)"ref"in l[m]&&(l[m]=Re(l[m],h[l[m].ref]));return l}ye.workerCount=Math.max(Math.min(on,6),1);var He={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ii(l,h,c){c.push({command:He.addSource,args:[l,h[l]]})}function $e(l,h,c){h.push({command:He.removeSource,args:[l]}),c[l]=!0}function xi(l,h,c,m){$e(l,c,m),ii(l,h,c)}function ji(l,h,c){var m;for(m in l[c])if(l[c].hasOwnProperty(m)&&m!=="data"&&!o.deepEqual(l[c][m],h[c][m]))return!1;for(m in h[c])if(h[c].hasOwnProperty(m)&&m!=="data"&&!o.deepEqual(l[c][m],h[c][m]))return!1;return!0}function ci(l,h,c,m,b,w){var E;for(E in h=h||{},l=l||{})l.hasOwnProperty(E)&&(o.deepEqual(l[E],h[E])||c.push({command:w,args:[m,E,h[E],b]}));for(E in h)h.hasOwnProperty(E)&&!l.hasOwnProperty(E)&&(o.deepEqual(l[E],h[E])||c.push({command:w,args:[m,E,h[E],b]}))}function gi(l){return l.id}function vi(l,h){return l[h.id]=h,l}var ko=function(l,h){this.reset(l,h)};ko.prototype.reset=function(l,h){this.points=l||[],this._distances=[0];for(var c=1;c<this.points.length;c++)this._distances[c]=this._distances[c-1]+this.points[c].dist(this.points[c-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding},ko.prototype.lerp=function(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);for(var h=1,c=this._distances[h],m=l*this.paddedLength+this.padding;c<m&&h<this._distances.length;)c=this._distances[++h];var b=h-1,w=this._distances[b],E=c-w,L=E>0?(m-w)/E:0;return this.points[b].mult(1-L).add(this.points[h].mult(L))};var Wn=function(l,h,c){var m=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(l/c),this.yCellCount=Math.ceil(h/c);for(var w=0;w<this.xCellCount*this.yCellCount;w++)m.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=h,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0};function Pr(l,h,c,m,b){var w=o.create();return h?(o.scale(w,w,[1/b,1/b,1]),c||o.rotateZ(w,w,m.angle)):o.multiply(w,m.labelPlaneMatrix,l),w}function $i(l,h,c,m,b){if(h){var w=o.clone(l);return o.scale(w,w,[b,b,1]),c||o.rotateZ(w,w,-m.angle),w}return m.glCoordMatrix}function Yn(l,h){var c=[l.x,l.y,0,1];Zr(c,c,h);var m=c[3];return{point:new o.Point(c[0]/m,c[1]/m),signedDistanceFromCamera:m}}function ai(l,h){return .5+l/h*.5}function Po(l,h){var c=l[0]/l[3],m=l[1]/l[3];return c>=-h[0]&&c<=h[0]&&m>=-h[1]&&m<=h[1]}function ls(l,h,c,m,b,w,E,L){var F=m?l.textSizeData:l.iconSizeData,H=o.evaluateSizeForZoom(F,c.transform.zoom),et=[256/c.width*2+1,256/c.height*2+1],it=m?l.text.dynamicLayoutVertexArray:l.icon.dynamicLayoutVertexArray;it.clear();for(var ot=l.lineVertexArray,yt=m?l.text.placedSymbolArray:l.icon.placedSymbolArray,dt=c.transform.width/c.transform.height,Ct=!1,ht=0;ht<yt.length;ht++){var It=yt.get(ht);if(It.hidden||It.writingMode===o.WritingMode.vertical&&!Ct)bo(It.numGlyphs,it);else{Ct=!1;var Rt=[It.anchorX,It.anchorY,0,1];if(o.transformMat4(Rt,Rt,h),Po(Rt,et)){var qt=ai(c.transform.cameraToCenterDistance,Rt[3]),re=o.evaluateSizeForFeature(F,H,It),ne=E?re/qt:re*qt,ae=new o.Point(It.anchorX,It.anchorY),ve=Yn(ae,b).point,Ce={},Le=Uc(It,ne,!1,L,h,b,w,l.glyphOffsetArray,ot,it,ve,ae,Ce,dt);Ct=Le.useVertical,(Le.notEnoughRoom||Ct||Le.needsFlipping&&Uc(It,ne,!0,L,h,b,w,l.glyphOffsetArray,ot,it,ve,ae,Ce,dt).notEnoughRoom)&&bo(It.numGlyphs,it)}else bo(It.numGlyphs,it)}}m?l.text.dynamicLayoutVertexBuffer.updateData(it):l.icon.dynamicLayoutVertexBuffer.updateData(it)}function Lr(l,h,c,m,b,w,E,L,F,H,et){var it=L.glyphStartIndex+L.numGlyphs,ot=L.lineStartIndex,yt=L.lineStartIndex+L.lineLength,dt=h.getoffsetX(L.glyphStartIndex),Ct=h.getoffsetX(it-1),ht=Dr(l*dt,c,m,b,w,E,L.segment,ot,yt,F,H,et);if(!ht)return null;var It=Dr(l*Ct,c,m,b,w,E,L.segment,ot,yt,F,H,et);return It?{first:ht,last:It}:null}function Vo(l,h,c,m){return l===o.WritingMode.horizontal&&Math.abs(c.y-h.y)>Math.abs(c.x-h.x)*m?{useVertical:!0}:(l===o.WritingMode.vertical?h.y<c.y:h.x>c.x)?{needsFlipping:!0}:null}function Uc(l,h,c,m,b,w,E,L,F,H,et,it,ot,yt){var dt,Ct=h/24,ht=l.lineOffsetX*Ct,It=l.lineOffsetY*Ct;if(l.numGlyphs>1){var Rt=l.glyphStartIndex+l.numGlyphs,qt=l.lineStartIndex,re=l.lineStartIndex+l.lineLength,ne=Lr(Ct,L,ht,It,c,et,it,l,F,w,ot);if(!ne)return{notEnoughRoom:!0};var ae=Yn(ne.first.point,E).point,ve=Yn(ne.last.point,E).point;if(m&&!c){var Ce=Vo(l.writingMode,ae,ve,yt);if(Ce)return Ce}dt=[ne.first];for(var Le=l.glyphStartIndex+1;Le<Rt-1;Le++)dt.push(Dr(Ct*L.getoffsetX(Le),ht,It,c,et,it,l.segment,qt,re,F,w,ot));dt.push(ne.last)}else{if(m&&!c){var We=Yn(it,b).point,fn=l.lineStartIndex+l.segment+1,Tn=new o.Point(F.getx(fn),F.gety(fn)),En=Yn(Tn,b),Oi=En.signedDistanceFromCamera>0?En.point:wu(it,Tn,We,1,b),tn=Vo(l.writingMode,We,Oi,yt);if(tn)return tn}var Dn=Dr(Ct*L.getoffsetX(l.glyphStartIndex),ht,It,c,et,it,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,F,w,ot);if(!Dn)return{notEnoughRoom:!0};dt=[Dn]}for(var ei=0,Gn=dt;ei<Gn.length;ei+=1){var Nn=Gn[ei];o.addDynamicAttributes(H,Nn.point,Nn.angle)}return{}}function wu(l,h,c,m,b){var w=Yn(l.add(l.sub(h)._unit()),b).point,E=c.sub(w);return c.add(E._mult(m/E.mag()))}function Dr(l,h,c,m,b,w,E,L,F,H,et,it){var ot=m?l-h:l+h,yt=ot>0?1:-1,dt=0;m&&(yt*=-1,dt=Math.PI),yt<0&&(dt+=Math.PI);for(var Ct=yt>0?L+E:L+E+1,ht=b,It=b,Rt=0,qt=0,re=Math.abs(ot),ne=[];Rt+qt<=re;){if((Ct+=yt)<L||Ct>=F)return null;if(It=ht,ne.push(ht),(ht=it[Ct])===void 0){var ae=new o.Point(H.getx(Ct),H.gety(Ct)),ve=Yn(ae,et);if(ve.signedDistanceFromCamera>0)ht=it[Ct]=ve.point;else{var Ce=Ct-yt;ht=wu(Rt===0?w:new o.Point(H.getx(Ce),H.gety(Ce)),ae,It,re-Rt+1,et)}}Rt+=qt,qt=It.dist(ht)}var Le=(re-Rt)/qt,We=ht.sub(It),fn=We.mult(Le)._add(It);fn._add(We._unit()._perp()._mult(c*yt));var Tn=dt+Math.atan2(ht.y-It.y,ht.x-It.x);return ne.push(fn),{point:fn,angle:Tn,path:ne}}Wn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Wn.prototype.insert=function(l,h,c,m,b){this._forEachCell(h,c,m,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(h),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(b)},Wn.prototype.insertCircle=function(l,h,c,m){this._forEachCell(h-m,c-m,h+m,c+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(h),this.circles.push(c),this.circles.push(m)},Wn.prototype._insertBoxCell=function(l,h,c,m,b,w){this.boxCells[b].push(w)},Wn.prototype._insertCircleCell=function(l,h,c,m,b,w){this.circleCells[b].push(w)},Wn.prototype._query=function(l,h,c,m,b,w){if(c<0||l>this.width||m<0||h>this.height)return!b&&[];var E=[];if(l<=0&&h<=0&&this.width<=c&&this.height<=m){if(b)return!0;for(var L=0;L<this.boxKeys.length;L++)E.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(var F=0;F<this.circleKeys.length;F++){var H=this.circles[3*F],et=this.circles[3*F+1],it=this.circles[3*F+2];E.push({key:this.circleKeys[F],x1:H-it,y1:et-it,x2:H+it,y2:et+it})}return w?E.filter(w):E}return this._forEachCell(l,h,c,m,this._queryCell,E,{hitTest:b,seenUids:{box:{},circle:{}}},w),b?E.length>0:E},Wn.prototype._queryCircle=function(l,h,c,m,b){var w=l-c,E=l+c,L=h-c,F=h+c;if(E<0||w>this.width||F<0||L>this.height)return!m&&[];var H=[];return this._forEachCell(w,L,E,F,this._queryCellCircle,H,{hitTest:m,circle:{x:l,y:h,radius:c},seenUids:{box:{},circle:{}}},b),m?H.length>0:H},Wn.prototype.query=function(l,h,c,m,b){return this._query(l,h,c,m,!1,b)},Wn.prototype.hitTest=function(l,h,c,m,b){return this._query(l,h,c,m,!0,b)},Wn.prototype.hitTestCircle=function(l,h,c,m){return this._queryCircle(l,h,c,!0,m)},Wn.prototype._queryCell=function(l,h,c,m,b,w,E,L){var F=E.seenUids,H=this.boxCells[b];if(H!==null)for(var et=this.bboxes,it=0,ot=H;it<ot.length;it+=1){var yt=ot[it];if(!F.box[yt]){F.box[yt]=!0;var dt=4*yt;if(l<=et[dt+2]&&h<=et[dt+3]&&c>=et[dt+0]&&m>=et[dt+1]&&(!L||L(this.boxKeys[yt]))){if(E.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[yt],x1:et[dt],y1:et[dt+1],x2:et[dt+2],y2:et[dt+3]})}}}var Ct=this.circleCells[b];if(Ct!==null)for(var ht=this.circles,It=0,Rt=Ct;It<Rt.length;It+=1){var qt=Rt[It];if(!F.circle[qt]){F.circle[qt]=!0;var re=3*qt;if(this._circleAndRectCollide(ht[re],ht[re+1],ht[re+2],l,h,c,m)&&(!L||L(this.circleKeys[qt]))){if(E.hitTest)return w.push(!0),!0;var ne=ht[re],ae=ht[re+1],ve=ht[re+2];w.push({key:this.circleKeys[qt],x1:ne-ve,y1:ae-ve,x2:ne+ve,y2:ae+ve})}}}},Wn.prototype._queryCellCircle=function(l,h,c,m,b,w,E,L){var F=E.circle,H=E.seenUids,et=this.boxCells[b];if(et!==null)for(var it=this.bboxes,ot=0,yt=et;ot<yt.length;ot+=1){var dt=yt[ot];if(!H.box[dt]){H.box[dt]=!0;var Ct=4*dt;if(this._circleAndRectCollide(F.x,F.y,F.radius,it[Ct+0],it[Ct+1],it[Ct+2],it[Ct+3])&&(!L||L(this.boxKeys[dt])))return w.push(!0),!0}}var ht=this.circleCells[b];if(ht!==null)for(var It=this.circles,Rt=0,qt=ht;Rt<qt.length;Rt+=1){var re=qt[Rt];if(!H.circle[re]){H.circle[re]=!0;var ne=3*re;if(this._circlesCollide(It[ne],It[ne+1],It[ne+2],F.x,F.y,F.radius)&&(!L||L(this.circleKeys[re])))return w.push(!0),!0}}},Wn.prototype._forEachCell=function(l,h,c,m,b,w,E,L){for(var F=this._convertToXCellCoord(l),H=this._convertToYCellCoord(h),et=this._convertToXCellCoord(c),it=this._convertToYCellCoord(m),ot=F;ot<=et;ot++)for(var yt=H;yt<=it;yt++)if(b.call(this,l,h,c,m,this.xCellCount*yt+ot,w,E,L))return},Wn.prototype._convertToXCellCoord=function(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))},Wn.prototype._convertToYCellCoord=function(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))},Wn.prototype._circlesCollide=function(l,h,c,m,b,w){var E=m-l,L=b-h,F=c+w;return F*F>E*E+L*L},Wn.prototype._circleAndRectCollide=function(l,h,c,m,b,w,E){var L=(w-m)/2,F=Math.abs(l-(m+L));if(F>L+c)return!1;var H=(E-b)/2,et=Math.abs(h-(b+H));if(et>H+c)return!1;if(F<=L||et<=H)return!0;var it=F-L,ot=et-H;return it*it+ot*ot<=c*c};var Cu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function bo(l,h){for(var c=0;c<l;c++){var m=h.length;h.resize(m+4),h.float32.set(Cu,3*m)}}function Zr(l,h,c){var m=h[0],b=h[1];return l[0]=c[0]*m+c[4]*b+c[12],l[1]=c[1]*m+c[5]*b+c[13],l[3]=c[3]*m+c[7]*b+c[15],l}var ya=function(l,h,c){h===void 0&&(h=new Wn(l.width+200,l.height+200,25)),c===void 0&&(c=new Wn(l.width+200,l.height+200,25)),this.transform=l,this.grid=h,this.ignoredGrid=c,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+100,this.screenBottomBoundary=l.height+100,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200};function vr(l,h,c){return h*(o.EXTENT/(l.tileSize*Math.pow(2,c-l.tileID.overscaledZ)))}ya.prototype.placeCollisionBox=function(l,h,c,m,b){var w=this.projectAndGetPerspectiveRatio(m,l.anchorPointX,l.anchorPointY),E=c*w.perspectiveRatio,L=l.x1*E+w.point.x,F=l.y1*E+w.point.y,H=l.x2*E+w.point.x,et=l.y2*E+w.point.y;return!this.isInsideGrid(L,F,H,et)||!h&&this.grid.hitTest(L,F,H,et,b)?{box:[],offscreen:!1}:{box:[L,F,H,et],offscreen:this.isOffscreen(L,F,H,et)}},ya.prototype.placeCollisionCircles=function(l,h,c,m,b,w,E,L,F,H,et,it,ot){var yt=[],dt=new o.Point(h.anchorX,h.anchorY),Ct=Yn(dt,w),ht=ai(this.transform.cameraToCenterDistance,Ct.signedDistanceFromCamera),It=(H?b/ht:b*ht)/o.ONE_EM,Rt=Yn(dt,E).point,qt=Lr(It,m,h.lineOffsetX*It,h.lineOffsetY*It,!1,Rt,dt,h,c,E,{}),re=!1,ne=!1,ae=!0;if(qt){for(var ve=.5*it*ht+ot,Ce=new o.Point(-100,-100),Le=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),We=new ko,fn=qt.first,Tn=qt.last,En=[],Oi=fn.path.length-1;Oi>=1;Oi--)En.push(fn.path[Oi]);for(var tn=1;tn<Tn.path.length;tn++)En.push(Tn.path[tn]);var Dn=2.5*ve;if(L){var ei=En.map(function(Bs){return Yn(Bs,L)});En=ei.some(function(Bs){return Bs.signedDistanceFromCamera<=0})?[]:ei.map(function(Bs){return Bs.point})}var Gn=[];if(En.length>0){for(var Nn=En[0].clone(),ni=En[0].clone(),Vn=1;Vn<En.length;Vn++)Nn.x=Math.min(Nn.x,En[Vn].x),Nn.y=Math.min(Nn.y,En[Vn].y),ni.x=Math.max(ni.x,En[Vn].x),ni.y=Math.max(ni.y,En[Vn].y);Gn=Nn.x>=Ce.x&&ni.x<=Le.x&&Nn.y>=Ce.y&&ni.y<=Le.y?[En]:ni.x<Ce.x||Nn.x>Le.x||ni.y<Ce.y||Nn.y>Le.y?[]:o.clipLine([En],Ce.x,Ce.y,Le.x,Le.y)}for(var gn=0,go=Gn;gn<go.length;gn+=1){var Xr;We.reset(go[gn],.25*ve),Xr=We.length<=.5*ve?1:Math.ceil(We.paddedLength/Dn)+1;for(var Ur=0;Ur<Xr;Ur++){var Co=Ur/Math.max(Xr-1,1),Ir=We.lerp(Co),_r=Ir.x+100,Na=Ir.y+100;yt.push(_r,Na,ve,0);var gr=_r-ve,Rl=Na-ve,Va=_r+ve,al=Na+ve;if(ae=ae&&this.isOffscreen(gr,Rl,Va,al),ne=ne||this.isInsideGrid(gr,Rl,Va,al),!l&&this.grid.hitTestCircle(_r,Na,ve,et)&&(re=!0,!F))return{circles:[],offscreen:!1,collisionDetected:re}}}}return{circles:!F&&re||!ne?[]:yt,offscreen:ae,collisionDetected:re}},ya.prototype.queryRenderedSymbols=function(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var h=[],c=1/0,m=1/0,b=-1/0,w=-1/0,E=0,L=l;E<L.length;E+=1){var F=L[E],H=new o.Point(F.x+100,F.y+100);c=Math.min(c,H.x),m=Math.min(m,H.y),b=Math.max(b,H.x),w=Math.max(w,H.y),h.push(H)}for(var et={},it={},ot=0,yt=this.grid.query(c,m,b,w).concat(this.ignoredGrid.query(c,m,b,w));ot<yt.length;ot+=1){var dt=yt[ot],Ct=dt.key;if(et[Ct.bucketInstanceId]===void 0&&(et[Ct.bucketInstanceId]={}),!et[Ct.bucketInstanceId][Ct.featureIndex]){var ht=[new o.Point(dt.x1,dt.y1),new o.Point(dt.x2,dt.y1),new o.Point(dt.x2,dt.y2),new o.Point(dt.x1,dt.y2)];o.polygonIntersectsPolygon(h,ht)&&(et[Ct.bucketInstanceId][Ct.featureIndex]=!0,it[Ct.bucketInstanceId]===void 0&&(it[Ct.bucketInstanceId]=[]),it[Ct.bucketInstanceId].push(Ct.featureIndex))}}return it},ya.prototype.insertCollisionBox=function(l,h,c,m,b){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:c,featureIndex:m,collisionGroupID:b},l[0],l[1],l[2],l[3])},ya.prototype.insertCollisionCircles=function(l,h,c,m,b){for(var w=h?this.ignoredGrid:this.grid,E={bucketInstanceId:c,featureIndex:m,collisionGroupID:b},L=0;L<l.length;L+=4)w.insertCircle(E,l[L],l[L+1],l[L+2])},ya.prototype.projectAndGetPerspectiveRatio=function(l,h,c){var m=[h,c,0,1];return Zr(m,m,l),{point:new o.Point((m[0]/m[3]+1)/2*this.transform.width+100,(-m[1]/m[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/m[3]*.5}},ya.prototype.isOffscreen=function(l,h,c,m){return c<100||l>=this.screenRightBoundary||m<100||h>this.screenBottomBoundary},ya.prototype.isInsideGrid=function(l,h,c,m){return c>=0&&l<this.gridRightBoundary&&m>=0&&h<this.gridBottomBoundary},ya.prototype.getViewportMatrix=function(){var l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l};var $a=function(l,h,c,m){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?h:-h))):m&&c?1:0,this.placed=c};$a.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var _a=function(l,h,c,m,b){this.text=new $a(l?l.text:null,h,c,b),this.icon=new $a(l?l.icon:null,h,m,b)};_a.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ql=function(l,h,c){this.text=l,this.icon=h,this.skipFade=c},I=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},R=function(l,h,c,m,b){this.bucketInstanceId=l,this.featureIndex=h,this.sourceLayerIndex=c,this.bucketIndex=m,this.tileID=b},Y=function(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}};function vt(l,h,c,m,b){var w=o.getAnchorAlignment(l),E=-(w.horizontalAlign-.5)*h,L=-(w.verticalAlign-.5)*c,F=o.evaluateVariableOffset(l,m);return new o.Point(E+F[0]*b,L+F[1]*b)}function kt(l,h,c,m,b,w){var E=l.x1,L=l.x2,F=l.y1,H=l.y2,et=l.anchorPointX,it=l.anchorPointY,ot=new o.Point(h,c);return m&&ot._rotate(b?w:-w),{x1:E+ot.x,y1:F+ot.y,x2:L+ot.x,y2:H+ot.y,anchorPointX:et,anchorPointY:it}}Y.prototype.get=function(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){var h=++this.maxGroupID;this.collisionGroups[l]={ID:h,predicate:function(c){return c.collisionGroupID===h}}}return this.collisionGroups[l]};var Dt=function(l,h,c,m){this.transform=l.clone(),this.collisionIndex=new ya(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Y(c),this.collisionCircleArrays={},this.prevPlacement=m,m&&(m.prevPlacement=void 0),this.placedOrientations={}};function Gt(l,h,c,m,b){l.emplaceBack(h?1:0,c?1:0,m||0,b||0),l.emplaceBack(h?1:0,c?1:0,m||0,b||0),l.emplaceBack(h?1:0,c?1:0,m||0,b||0),l.emplaceBack(h?1:0,c?1:0,m||0,b||0)}Dt.prototype.getBucketParts=function(l,h,c,m){var b=c.getBucket(h),w=c.latestFeatureIndex;if(b&&w&&h.id===b.layerIds[0]){var E=c.collisionBoxArray,L=b.layers[0].layout,F=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),H=c.tileSize/o.EXTENT,et=this.transform.calculatePosMatrix(c.tileID.toUnwrapped()),it=L.get("text-pitch-alignment")==="map",ot=L.get("text-rotation-alignment")==="map",yt=vr(c,1,this.transform.zoom),dt=Pr(et,it,ot,this.transform,yt),Ct=null;if(it){var ht=$i(et,it,ot,this.transform,yt);Ct=o.multiply([],this.transform.labelPlaneMatrix,ht)}this.retainedQueryData[b.bucketInstanceId]=new R(b.bucketInstanceId,w,b.sourceLayerIndex,b.index,c.tileID);var It={bucket:b,layout:L,posMatrix:et,textLabelPlaneMatrix:dt,labelToScreenMatrix:Ct,scale:F,textPixelRatio:H,holdingForFade:c.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(m)for(var Rt=0,qt=b.sortKeyRanges;Rt<qt.length;Rt+=1){var re=qt[Rt];l.push({sortKey:re.sortKey,symbolInstanceStart:re.symbolInstanceStart,symbolInstanceEnd:re.symbolInstanceEnd,parameters:It})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:It})}},Dt.prototype.attemptAnchorPlacement=function(l,h,c,m,b,w,E,L,F,H,et,it,ot,yt,dt){var Ct,ht=[it.textOffset0,it.textOffset1],It=vt(l,c,m,ht,b),Rt=this.collisionIndex.placeCollisionBox(kt(h,It.x,It.y,w,E,this.transform.angle),et,L,F,H.predicate);if(!dt||this.collisionIndex.placeCollisionBox(kt(dt,It.x,It.y,w,E,this.transform.angle),et,L,F,H.predicate).box.length!==0)return Rt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[it.crossTileID]&&this.prevPlacement.placements[it.crossTileID]&&this.prevPlacement.placements[it.crossTileID].text&&(Ct=this.prevPlacement.variableOffsets[it.crossTileID].anchor),this.variableOffsets[it.crossTileID]={textOffset:ht,width:c,height:m,anchor:l,textBoxScale:b,prevAnchor:Ct},this.markUsedJustification(ot,l,it,yt),ot.allowVerticalPlacement&&(this.markUsedOrientation(ot,yt,it),this.placedOrientations[it.crossTileID]=yt),{shift:It,placedGlyphBoxes:Rt}):void 0},Dt.prototype.placeLayerBucketPart=function(l,h,c){var m=this,b=l.parameters,w=b.bucket,E=b.layout,L=b.posMatrix,F=b.textLabelPlaneMatrix,H=b.labelToScreenMatrix,et=b.textPixelRatio,it=b.holdingForFade,ot=b.collisionBoxArray,yt=b.partiallyEvaluatedTextSize,dt=b.collisionGroup,Ct=E.get("text-optional"),ht=E.get("icon-optional"),It=E.get("text-allow-overlap"),Rt=E.get("icon-allow-overlap"),qt=E.get("text-rotation-alignment")==="map",re=E.get("text-pitch-alignment")==="map",ne=E.get("icon-text-fit")!=="none",ae=E.get("symbol-z-order")==="viewport-y",ve=It&&(Rt||!w.hasIconData()||ht),Ce=Rt&&(It||!w.hasTextData()||Ct);!w.collisionArrays&&ot&&w.deserializeCollisionBoxes(ot);var Le=function(tn,Dn){if(!h[tn.crossTileID])if(it)m.placements[tn.crossTileID]=new Ql(!1,!1,!1);else{var ei,Gn=!1,Nn=!1,ni=!0,Vn=null,gn={box:null,offscreen:null},go={box:null,offscreen:null},Xr=null,Ur=null,Co=0,Ir=0,_r=0;Dn.textFeatureIndex?Co=Dn.textFeatureIndex:tn.useRuntimeCollisionCircles&&(Co=tn.featureIndex),Dn.verticalTextFeatureIndex&&(Ir=Dn.verticalTextFeatureIndex);var Na=Dn.textBox;if(Na){var gr=function(Xi){var ms=o.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Xi&&m.prevPlacement){var Ca=m.prevPlacement.placedOrientations[tn.crossTileID];Ca&&(m.placedOrientations[tn.crossTileID]=Ca,m.markUsedOrientation(w,ms=Ca,tn))}return ms},Rl=function(Xi,ms){if(w.allowVerticalPlacement&&tn.numVerticalGlyphVertices>0&&Dn.verticalTextBox)for(var Ca=0,lu=w.writingModes;Ca<lu.length&&(lu[Ca]===o.WritingMode.vertical?(gn=ms(),go=gn):gn=Xi(),!(gn&&gn.box&&gn.box.length));Ca+=1);else gn=Xi()};if(E.get("text-variable-anchor")){var Va=E.get("text-variable-anchor");if(m.prevPlacement&&m.prevPlacement.variableOffsets[tn.crossTileID]){var al=m.prevPlacement.variableOffsets[tn.crossTileID];Va.indexOf(al.anchor)>0&&(Va=Va.filter(function(Xi){return Xi!==al.anchor})).unshift(al.anchor)}var Bs=function(Xi,ms,Ca){for(var lu=Xi.x2-Xi.x1,Jm=Xi.y2-Xi.y1,eh=tn.textBoxScale,Cd=ne&&!Rt?ms:null,nh={box:[],offscreen:!1},Sp=It?2*Va.length:Va.length,uu=0;uu<Sp;++uu){var If=m.attemptAnchorPlacement(Va[uu%Va.length],Xi,lu,Jm,eh,qt,re,et,L,dt,uu>=Va.length,tn,w,Ca,Cd);if(If&&(nh=If.placedGlyphBoxes)&&nh.box&&nh.box.length){Gn=!0,Vn=If.shift;break}}return nh};Rl(function(){return Bs(Na,Dn.iconBox,o.WritingMode.horizontal)},function(){var Xi=Dn.verticalTextBox;return w.allowVerticalPlacement&&!(gn&&gn.box&&gn.box.length)&&tn.numVerticalGlyphVertices>0&&Xi?Bs(Xi,Dn.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),gn&&(Gn=gn.box,ni=gn.offscreen);var vc=gr(gn&&gn.box);if(!Gn&&m.prevPlacement){var th=m.prevPlacement.variableOffsets[tn.crossTileID];th&&(m.variableOffsets[tn.crossTileID]=th,m.markUsedJustification(w,th.anchor,tn,vc))}}else{var Os=function(Xi,ms){var Ca=m.collisionIndex.placeCollisionBox(Xi,It,et,L,dt.predicate);return Ca&&Ca.box&&Ca.box.length&&(m.markUsedOrientation(w,ms,tn),m.placedOrientations[tn.crossTileID]=ms),Ca};Rl(function(){return Os(Na,o.WritingMode.horizontal)},function(){var Xi=Dn.verticalTextBox;return w.allowVerticalPlacement&&tn.numVerticalGlyphVertices>0&&Xi?Os(Xi,o.WritingMode.vertical):{box:null,offscreen:null}}),gr(gn&&gn.box&&gn.box.length)}}if(Gn=(ei=gn)&&ei.box&&ei.box.length>0,ni=ei&&ei.offscreen,tn.useRuntimeCollisionCircles){var yc=w.text.placedSymbolArray.get(tn.centerJustifiedTextSymbolIndex),Th=o.evaluateSizeForFeature(w.textSizeData,yt,yc),zl=E.get("text-padding");Xr=m.collisionIndex.placeCollisionCircles(It,yc,w.lineVertexArray,w.glyphOffsetArray,Th,L,F,H,c,re,dt.predicate,tn.collisionCircleDiameter,zl),Gn=It||Xr.circles.length>0&&!Xr.collisionDetected,ni=ni&&Xr.offscreen}if(Dn.iconFeatureIndex&&(_r=Dn.iconFeatureIndex),Dn.iconBox){var au=function(Xi){var ms=ne&&Vn?kt(Xi,Vn.x,Vn.y,qt,re,m.transform.angle):Xi;return m.collisionIndex.placeCollisionBox(ms,Rt,et,L,dt.predicate)};Nn=go&&go.box&&go.box.length&&Dn.verticalIconBox?(Ur=au(Dn.verticalIconBox)).box.length>0:(Ur=au(Dn.iconBox)).box.length>0,ni=ni&&Ur.offscreen}var Bl=Ct||tn.numHorizontalGlyphVertices===0&&tn.numVerticalGlyphVertices===0,zo=ht||tn.numIconVertices===0;if(Bl||zo?zo?Bl||(Nn=Nn&&Gn):Gn=Nn&&Gn:Nn=Gn=Nn&&Gn,Gn&&ei&&ei.box&&m.collisionIndex.insertCollisionBox(ei.box,E.get("text-ignore-placement"),w.bucketInstanceId,go&&go.box&&Ir?Ir:Co,dt.ID),Nn&&Ur&&m.collisionIndex.insertCollisionBox(Ur.box,E.get("icon-ignore-placement"),w.bucketInstanceId,_r,dt.ID),Xr&&(Gn&&m.collisionIndex.insertCollisionCircles(Xr.circles,E.get("text-ignore-placement"),w.bucketInstanceId,Co,dt.ID),c)){var sl=w.bucketInstanceId,su=m.collisionCircleArrays[sl];su===void 0&&(su=m.collisionCircleArrays[sl]=new I);for(var _c=0;_c<Xr.circles.length;_c+=4)su.circles.push(Xr.circles[_c+0]),su.circles.push(Xr.circles[_c+1]),su.circles.push(Xr.circles[_c+2]),su.circles.push(Xr.collisionDetected?1:0)}m.placements[tn.crossTileID]=new Ql(Gn||ve,Nn||Ce,ni||w.justReloaded),h[tn.crossTileID]=!0}};if(ae)for(var We=w.getSortedSymbolIndexes(this.transform.angle),fn=We.length-1;fn>=0;--fn){var Tn=We[fn];Le(w.symbolInstances.get(Tn),w.collisionArrays[Tn])}else for(var En=l.symbolInstanceStart;En<l.symbolInstanceEnd;En++)Le(w.symbolInstances.get(En),w.collisionArrays[En]);if(c&&w.bucketInstanceId in this.collisionCircleArrays){var Oi=this.collisionCircleArrays[w.bucketInstanceId];o.invert(Oi.invProjMatrix,L),Oi.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},Dt.prototype.markUsedJustification=function(l,h,c,m){var b;b=m===o.WritingMode.vertical?c.verticalPlacedTextSymbolIndex:{left:c.leftJustifiedTextSymbolIndex,center:c.centerJustifiedTextSymbolIndex,right:c.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(h)];for(var w=0,E=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex,c.verticalPlacedTextSymbolIndex];w<E.length;w+=1){var L=E[w];L>=0&&(l.text.placedSymbolArray.get(L).crossTileID=b>=0&&L!==b?0:c.crossTileID)}},Dt.prototype.markUsedOrientation=function(l,h,c){for(var m=h===o.WritingMode.horizontal||h===o.WritingMode.horizontalOnly?h:0,b=h===o.WritingMode.vertical?h:0,w=0,E=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex];w<E.length;w+=1)l.text.placedSymbolArray.get(E[w]).placedOrientation=m;c.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).placedOrientation=b)},Dt.prototype.commit=function(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;var h=this.prevPlacement,c=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;var m=h?h.symbolFadeChange(l):1,b=h?h.opacities:{},w=h?h.variableOffsets:{},E=h?h.placedOrientations:{};for(var L in this.placements){var F=this.placements[L],H=b[L];H?(this.opacities[L]=new _a(H,m,F.text,F.icon),c=c||F.text!==H.text.placed||F.icon!==H.icon.placed):(this.opacities[L]=new _a(null,m,F.text,F.icon,F.skipFade),c=c||F.text||F.icon)}for(var et in b){var it=b[et];if(!this.opacities[et]){var ot=new _a(it,m,!1,!1);ot.isHidden()||(this.opacities[et]=ot,c=c||it.text.placed||it.icon.placed)}}for(var yt in w)this.variableOffsets[yt]||!this.opacities[yt]||this.opacities[yt].isHidden()||(this.variableOffsets[yt]=w[yt]);for(var dt in E)this.placedOrientations[dt]||!this.opacities[dt]||this.opacities[dt].isHidden()||(this.placedOrientations[dt]=E[dt]);c?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:l)},Dt.prototype.updateLayerOpacities=function(l,h){for(var c={},m=0,b=h;m<b.length;m+=1){var w=b[m],E=w.getBucket(l);E&&w.latestFeatureIndex&&l.id===E.layerIds[0]&&this.updateBucketOpacities(E,c,w.collisionBoxArray)}},Dt.prototype.updateBucketOpacities=function(l,h,c){var m=this;l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();var b=l.layers[0].layout,w=new _a(null,0,!1,!1,!0),E=b.get("text-allow-overlap"),L=b.get("icon-allow-overlap"),F=b.get("text-variable-anchor"),H=b.get("text-rotation-alignment")==="map",et=b.get("text-pitch-alignment")==="map",it=b.get("icon-text-fit")!=="none",ot=new _a(null,0,E&&(L||!l.hasIconData()||b.get("icon-optional")),L&&(E||!l.hasTextData()||b.get("text-optional")),!0);!l.collisionArrays&&c&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(c);for(var yt=function(It,Rt,qt){for(var re=0;re<Rt/4;re++)It.opacityVertexArray.emplaceBack(qt)},dt=function(It){var Rt=l.symbolInstances.get(It),qt=Rt.numHorizontalGlyphVertices,re=Rt.numVerticalGlyphVertices,ne=Rt.crossTileID,ae=m.opacities[ne];h[ne]?ae=w:ae||(m.opacities[ne]=ae=ot),h[ne]=!0;var ve=Rt.numIconVertices>0,Ce=m.placedOrientations[Rt.crossTileID],Le=Ce===o.WritingMode.vertical,We=Ce===o.WritingMode.horizontal||Ce===o.WritingMode.horizontalOnly;if(qt>0||re>0){var fn=si(ae.text);yt(l.text,qt,Le?Cr:fn),yt(l.text,re,We?Cr:fn);var Tn=ae.text.isHidden();[Rt.rightJustifiedTextSymbolIndex,Rt.centerJustifiedTextSymbolIndex,Rt.leftJustifiedTextSymbolIndex].forEach(function(gn){gn>=0&&(l.text.placedSymbolArray.get(gn).hidden=Tn||Le?1:0)}),Rt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(Rt.verticalPlacedTextSymbolIndex).hidden=Tn||We?1:0);var En=m.variableOffsets[Rt.crossTileID];En&&m.markUsedJustification(l,En.anchor,Rt,Ce);var Oi=m.placedOrientations[Rt.crossTileID];Oi&&(m.markUsedJustification(l,"left",Rt,Oi),m.markUsedOrientation(l,Oi,Rt))}if(ve){var tn=si(ae.icon),Dn=!(it&&Rt.verticalPlacedIconSymbolIndex&&Le);Rt.placedIconSymbolIndex>=0&&(yt(l.icon,Rt.numIconVertices,Dn?tn:Cr),l.icon.placedSymbolArray.get(Rt.placedIconSymbolIndex).hidden=ae.icon.isHidden()),Rt.verticalPlacedIconSymbolIndex>=0&&(yt(l.icon,Rt.numVerticalIconVertices,Dn?Cr:tn),l.icon.placedSymbolArray.get(Rt.verticalPlacedIconSymbolIndex).hidden=ae.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){var ei=l.collisionArrays[It];if(ei){var Gn=new o.Point(0,0);if(ei.textBox||ei.verticalTextBox){var Nn=!0;if(F){var ni=m.variableOffsets[ne];ni?(Gn=vt(ni.anchor,ni.width,ni.height,ni.textOffset,ni.textBoxScale),H&&Gn._rotate(et?m.transform.angle:-m.transform.angle)):Nn=!1}ei.textBox&&Gt(l.textCollisionBox.collisionVertexArray,ae.text.placed,!Nn||Le,Gn.x,Gn.y),ei.verticalTextBox&&Gt(l.textCollisionBox.collisionVertexArray,ae.text.placed,!Nn||We,Gn.x,Gn.y)}var Vn=!!(!We&&ei.verticalIconBox);ei.iconBox&&Gt(l.iconCollisionBox.collisionVertexArray,ae.icon.placed,Vn,it?Gn.x:0,it?Gn.y:0),ei.verticalIconBox&&Gt(l.iconCollisionBox.collisionVertexArray,ae.icon.placed,!Vn,it?Gn.x:0,it?Gn.y:0)}}},Ct=0;Ct<l.symbolInstances.length;Ct++)dt(Ct);if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){var ht=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ht.invProjMatrix,l.placementViewportMatrix=ht.viewportMatrix,l.collisionCircleArray=ht.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}},Dt.prototype.symbolFadeChange=function(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Dt.prototype.zoomAdjustment=function(l){return Math.max(0,(this.transform.zoom-l)/1.5)},Dt.prototype.hasTransitions=function(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration},Dt.prototype.stillRecent=function(l,h){var c=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*c>l},Dt.prototype.setStale=function(){this.stale=!0};var Pe=Math.pow(2,25),Ve=Math.pow(2,24),nn=Math.pow(2,17),an=Math.pow(2,16),qe=Math.pow(2,9),ti=Math.pow(2,8),Nr=Math.pow(2,1);function si(l){if(l.opacity===0&&!l.placed)return 0;if(l.opacity===1&&l.placed)return 4294967295;var h=l.placed?1:0,c=Math.floor(127*l.opacity);return c*Pe+h*Ve+c*nn+h*an+c*qe+h*ti+c*Nr+h}var Cr=0,xe=function(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};xe.prototype.continuePlacement=function(l,h,c,m,b){for(var w=this._bucketParts;this._currentTileIndex<l.length;)if(h.getBucketParts(w,m,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(E,L){return E.sortKey-L.sortKey}));this._currentPartIndex<w.length;)if(h.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,c),this._currentPartIndex++,b())return!0;return!1};var wn=function(l,h,c,m,b,w,E){this.placement=new Dt(l,b,w,E),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=c,this._showCollisionBoxes=m,this._done=!1};wn.prototype.isDone=function(){return this._done},wn.prototype.continuePlacement=function(l,h,c){for(var m=this,b=o.browser.now(),w=function(){var F=o.browser.now()-b;return!m._forceFullPlacement&&F>2};this._currentPlacementIndex>=0;){var E=h[l[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=L)&&(!E.maxzoom||E.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new xe(E)),this._inProgressLayer.continuePlacement(c[E.source],this.placement,this._showCollisionBoxes,E,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},wn.prototype.commit=function(l){return this.placement.commit(l),this.placement};var sr=512/o.EXTENT/2,no=function(l,h,c){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=c;for(var m=0;m<h.length;m++){var b=h.get(m),w=b.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:b.crossTileID,coord:this.getScaledCoordinates(b,l)})}};no.prototype.getScaledCoordinates=function(l,h){var c=sr/Math.pow(2,h.canonical.z-this.tileID.canonical.z);return{x:Math.floor((h.canonical.x*o.EXTENT+l.anchorX)*c),y:Math.floor((h.canonical.y*o.EXTENT+l.anchorY)*c)}},no.prototype.findMatches=function(l,h,c){for(var m=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z),b=0;b<l.length;b++){var w=l.get(b);if(!w.crossTileID){var E=this.indexedSymbolInstances[w.key];if(E)for(var L=this.getScaledCoordinates(w,h),F=0,H=E;F<H.length;F+=1){var et=H[F];if(Math.abs(et.coord.x-L.x)<=m&&Math.abs(et.coord.y-L.y)<=m&&!c[et.crossTileID]){c[et.crossTileID]=!0,w.crossTileID=et.crossTileID;break}}}}};var Ji=function(){this.maxCrossTileID=0};Ji.prototype.generate=function(){return++this.maxCrossTileID};var Ms=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ms.prototype.handleWrapJump=function(l){var h=Math.round((l-this.lng)/360);if(h!==0)for(var c in this.indexes){var m=this.indexes[c],b={};for(var w in m){var E=m[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+h),b[E.tileID.key]=E}this.indexes[c]=b}this.lng=l},Ms.prototype.addBucket=function(l,h,c){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(var m=0;m<h.symbolInstances.length;m++)h.symbolInstances.get(m).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});var b=this.usedCrossTileIDs[l.overscaledZ];for(var w in this.indexes){var E=this.indexes[w];if(Number(w)>l.overscaledZ)for(var L in E){var F=E[L];F.tileID.isChildOf(l)&&F.findMatches(h.symbolInstances,l,b)}else{var H=E[l.scaledTo(Number(w)).key];H&&H.findMatches(h.symbolInstances,l,b)}}for(var et=0;et<h.symbolInstances.length;et++){var it=h.symbolInstances.get(et);it.crossTileID||(it.crossTileID=c.generate(),b[it.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new no(l,h.symbolInstances,h.bucketInstanceId),!0},Ms.prototype.removeBucketCrossTileIDs=function(l,h){for(var c in h.indexedSymbolInstances)for(var m=0,b=h.indexedSymbolInstances[c];m<b.length;m+=1)delete this.usedCrossTileIDs[l][b[m].crossTileID]},Ms.prototype.removeStaleBuckets=function(l){var h=!1;for(var c in this.indexes){var m=this.indexes[c];for(var b in m)l[m[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,m[b]),delete m[b],h=!0)}return h};var bl=function(){this.layerIndexes={},this.crossTileIDs=new Ji,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};bl.prototype.addLayer=function(l,h,c){var m=this.layerIndexes[l.id];m===void 0&&(m=this.layerIndexes[l.id]=new Ms);var b=!1,w={};m.handleWrapJump(c);for(var E=0,L=h;E<L.length;E+=1){var F=L[E],H=F.getBucket(l);H&&l.id===H.layerIds[0]&&(H.bucketInstanceId||(H.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(F.tileID,H,this.crossTileIDs)&&(b=!0),w[H.bucketInstanceId]=!0)}return m.removeStaleBuckets(w)&&(b=!0),b},bl.prototype.pruneUnusedLayers=function(l){var h={};for(var c in l.forEach(function(m){h[m]=!0}),this.layerIndexes)h[c]||delete this.layerIndexes[c]};var ir=function(l,h){return o.emitValidationErrors(l,h&&h.filter(function(c){return c.identifier!=="source.canvas"}))},Ks=o.pick(He,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Al=o.pick(He,["setCenter","setZoom","setBearing","setPitch"]),Hi=function(){var l={},h=o.styleSpec.$version;for(var c in o.styleSpec.$root){var m,b=o.styleSpec.$root[c];b.required&&(m=c==="version"?h:b.type==="array"?[]:{})!=null&&(l[c]=m)}return l}(),Mi=function(l){function h(c,m){var b=this;m===void 0&&(m={}),l.call(this),this.map=c,this.dispatcher=new de(se(),this),this.imageManager=new J,this.imageManager.setEventedParent(this),this.glyphManager=new jt(c._requestManager,m.localIdeographFontFamily),this.lineAtlas=new Ot(256,512),this.crossTileSymbolIndex=new bl,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var w=this;this._rtlTextPluginCallback=h.registerForPluginStateChange(function(E){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},function(L,F){if(o.triggerPluginCompletionEvent(L),F&&F.every(function(et){return et}))for(var H in w.sourceCaches)w.sourceCaches[H].reload()})}),this.on("data",function(E){if(E.dataType==="source"&&E.sourceDataType==="metadata"){var L=b.sourceCaches[E.sourceId];if(L){var F=L.getSource();if(F&&F.vectorLayerIds)for(var H in b._layers){var et=b._layers[H];et.source===F.id&&b._validateLayer(et)}}}})}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.loadURL=function(c,m){var b=this;m===void 0&&(m={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var w=typeof m.validate=="boolean"?m.validate:!o.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,m.accessToken);var E=this.map._requestManager.transformRequest(c,o.ResourceType.Style);this._request=o.getJSON(E,function(L,F){b._request=null,L?b.fire(new o.ErrorEvent(L)):F&&b._load(F,w)})},h.prototype.loadJSON=function(c,m){var b=this;m===void 0&&(m={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){b._request=null,b._load(c,m.validate!==!1)})},h.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Hi,!1)},h.prototype._load=function(c,m){if(!m||!ir(this,o.validateStyle(c))){for(var b in this._loaded=!0,this.stylesheet=c,c.sources)this.addSource(b,c.sources[b],{validate:!1});c.sprite?this._loadSprite(c.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(c.glyphs);var w=Ue(this.stylesheet.layers);this._order=w.map(function(H){return H.id}),this._layers={},this._serializedLayers={};for(var E=0,L=w;E<L.length;E+=1){var F=L[E];(F=o.createStyleLayer(F)).setEventedParent(this,{layer:{id:F.id}}),this._layers[F.id]=F,this._serializedLayers[F.id]=F.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ft(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},h.prototype._loadSprite=function(c){var m=this;this._spriteRequest=function(b,w,E){var L,F,H,et=o.browser.devicePixelRatio>1?"@2x":"",it=o.getJSON(w.transformRequest(w.normalizeSpriteURL(b,et,".json"),o.ResourceType.SpriteJSON),function(dt,Ct){it=null,H||(H=dt,L=Ct,yt())}),ot=o.getImage(w.transformRequest(w.normalizeSpriteURL(b,et,".png"),o.ResourceType.SpriteImage),function(dt,Ct){ot=null,H||(H=dt,F=Ct,yt())});function yt(){if(H)E(H);else if(L&&F){var dt=o.browser.getImageData(F),Ct={};for(var ht in L){var It=L[ht],Rt=It.width,qt=It.height,re=It.x,ne=It.y,ae=It.sdf,ve=It.pixelRatio,Ce=It.stretchX,Le=It.stretchY,We=It.content,fn=new o.RGBAImage({width:Rt,height:qt});o.RGBAImage.copy(dt,fn,{x:re,y:ne},{x:0,y:0},{width:Rt,height:qt}),Ct[ht]={data:fn,pixelRatio:ve,sdf:ae,stretchX:Ce,stretchY:Le,content:We}}E(null,Ct)}}return{cancel:function(){it&&(it.cancel(),it=null),ot&&(ot.cancel(),ot=null)}}}(c,this.map._requestManager,function(b,w){if(m._spriteRequest=null,b)m.fire(new o.ErrorEvent(b));else if(w)for(var E in w)m.imageManager.addImage(E,w[E]);m.imageManager.setLoaded(!0),m._availableImages=m.imageManager.listImages(),m.dispatcher.broadcast("setImages",m._availableImages),m.fire(new o.Event("data",{dataType:"style"}))})},h.prototype._validateLayer=function(c){var m=this.sourceCaches[c.source];if(m){var b=c.sourceLayer;if(b){var w=m.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(b)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+b+'" does not exist on source "'+w.id+'" as specified by style layer "'+c.id+'"')))}}},h.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var c in this.sourceCaches)if(!this.sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()},h.prototype._serializeLayers=function(c){for(var m=[],b=0,w=c;b<w.length;b+=1){var E=this._layers[w[b]];E.type!=="custom"&&m.push(E.serialize())}return m},h.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var c in this.sourceCaches)if(this.sourceCaches[c].hasTransition())return!0;for(var m in this._layers)if(this._layers[m].hasTransition())return!0;return!1},h.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},h.prototype.update=function(c){if(this._loaded){var m=this._changed;if(this._changed){var b=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var E in(b.length||w.length)&&this._updateWorkerLayers(b,w),this._updatedSources){var L=this._updatedSources[E];L==="reload"?this._reloadSource(E):L==="clear"&&this._clearSource(E)}for(var F in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[F].updateTransitions(c);this.light.updateTransitions(c),this._resetUpdates()}var H={};for(var et in this.sourceCaches){var it=this.sourceCaches[et];H[et]=it.used,it.used=!1}for(var ot=0,yt=this._order;ot<yt.length;ot+=1){var dt=this._layers[yt[ot]];dt.recalculate(c,this._availableImages),!dt.isHidden(c.zoom)&&dt.source&&(this.sourceCaches[dt.source].used=!0)}for(var Ct in H){var ht=this.sourceCaches[Ct];H[Ct]!==ht.used&&ht.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Ct}))}this.light.recalculate(c),this.z=c.zoom,m&&this.fire(new o.Event("data",{dataType:"style"}))}},h.prototype._updateTilesForChangedImages=function(){var c=Object.keys(this._changedImages);if(c.length){for(var m in this.sourceCaches)this.sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}},h.prototype._updateWorkerLayers=function(c,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:m})},h.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},h.prototype.setState=function(c){var m=this;if(this._checkLoaded(),ir(this,o.validateStyle(c)))return!1;(c=o.clone$1(c)).layers=Ue(c.layers);var b=function(E,L){if(!E)return[{command:He.setStyle,args:[L]}];var F=[];try{if(!o.deepEqual(E.version,L.version))return[{command:He.setStyle,args:[L]}];o.deepEqual(E.center,L.center)||F.push({command:He.setCenter,args:[L.center]}),o.deepEqual(E.zoom,L.zoom)||F.push({command:He.setZoom,args:[L.zoom]}),o.deepEqual(E.bearing,L.bearing)||F.push({command:He.setBearing,args:[L.bearing]}),o.deepEqual(E.pitch,L.pitch)||F.push({command:He.setPitch,args:[L.pitch]}),o.deepEqual(E.sprite,L.sprite)||F.push({command:He.setSprite,args:[L.sprite]}),o.deepEqual(E.glyphs,L.glyphs)||F.push({command:He.setGlyphs,args:[L.glyphs]}),o.deepEqual(E.transition,L.transition)||F.push({command:He.setTransition,args:[L.transition]}),o.deepEqual(E.light,L.light)||F.push({command:He.setLight,args:[L.light]});var H={},et=[];(function(ot,yt,dt,Ct){var ht;for(ht in yt=yt||{},ot=ot||{})ot.hasOwnProperty(ht)&&(yt.hasOwnProperty(ht)||$e(ht,dt,Ct));for(ht in yt)yt.hasOwnProperty(ht)&&(ot.hasOwnProperty(ht)?o.deepEqual(ot[ht],yt[ht])||(ot[ht].type==="geojson"&&yt[ht].type==="geojson"&&ji(ot,yt,ht)?dt.push({command:He.setGeoJSONSourceData,args:[ht,yt[ht].data]}):xi(ht,yt,dt,Ct)):ii(ht,yt,dt))})(E.sources,L.sources,et,H);var it=[];E.layers&&E.layers.forEach(function(ot){H[ot.source]?F.push({command:He.removeLayer,args:[ot.id]}):it.push(ot)}),F=F.concat(et),function(ot,yt,dt){yt=yt||[];var Ct,ht,It,Rt,qt,re,ne,ae=(ot=ot||[]).map(gi),ve=yt.map(gi),Ce=ot.reduce(vi,{}),Le=yt.reduce(vi,{}),We=ae.slice(),fn=Object.create(null);for(Ct=0,ht=0;Ct<ae.length;Ct++)Le.hasOwnProperty(It=ae[Ct])?ht++:(dt.push({command:He.removeLayer,args:[It]}),We.splice(We.indexOf(It,ht),1));for(Ct=0,ht=0;Ct<ve.length;Ct++)We[We.length-1-Ct]!==(It=ve[ve.length-1-Ct])&&(Ce.hasOwnProperty(It)?(dt.push({command:He.removeLayer,args:[It]}),We.splice(We.lastIndexOf(It,We.length-ht),1)):ht++,dt.push({command:He.addLayer,args:[Le[It],re=We[We.length-Ct]]}),We.splice(We.length-Ct,0,It),fn[It]=!0);for(Ct=0;Ct<ve.length;Ct++)if(Rt=Ce[It=ve[Ct]],qt=Le[It],!fn[It]&&!o.deepEqual(Rt,qt))if(o.deepEqual(Rt.source,qt.source)&&o.deepEqual(Rt["source-layer"],qt["source-layer"])&&o.deepEqual(Rt.type,qt.type)){for(ne in ci(Rt.layout,qt.layout,dt,It,null,He.setLayoutProperty),ci(Rt.paint,qt.paint,dt,It,null,He.setPaintProperty),o.deepEqual(Rt.filter,qt.filter)||dt.push({command:He.setFilter,args:[It,qt.filter]}),o.deepEqual(Rt.minzoom,qt.minzoom)&&o.deepEqual(Rt.maxzoom,qt.maxzoom)||dt.push({command:He.setLayerZoomRange,args:[It,qt.minzoom,qt.maxzoom]}),Rt)Rt.hasOwnProperty(ne)&&ne!=="layout"&&ne!=="paint"&&ne!=="filter"&&ne!=="metadata"&&ne!=="minzoom"&&ne!=="maxzoom"&&(ne.indexOf("paint.")===0?ci(Rt[ne],qt[ne],dt,It,ne.slice(6),He.setPaintProperty):o.deepEqual(Rt[ne],qt[ne])||dt.push({command:He.setLayerProperty,args:[It,ne,qt[ne]]}));for(ne in qt)qt.hasOwnProperty(ne)&&!Rt.hasOwnProperty(ne)&&ne!=="layout"&&ne!=="paint"&&ne!=="filter"&&ne!=="metadata"&&ne!=="minzoom"&&ne!=="maxzoom"&&(ne.indexOf("paint.")===0?ci(Rt[ne],qt[ne],dt,It,ne.slice(6),He.setPaintProperty):o.deepEqual(Rt[ne],qt[ne])||dt.push({command:He.setLayerProperty,args:[It,ne,qt[ne]]}))}else dt.push({command:He.removeLayer,args:[It]}),re=We[We.lastIndexOf(It)+1],dt.push({command:He.addLayer,args:[qt,re]})}(it,L.layers,F)}catch(ot){console.warn("Unable to compute style diff:",ot),F=[{command:He.setStyle,args:[L]}]}return F}(this.serialize(),c).filter(function(E){return!(E.command in Al)});if(b.length===0)return!1;var w=b.filter(function(E){return!(E.command in Ks)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(E){return E.command}).join(", ")+".");return b.forEach(function(E){E.command!=="setTransition"&&m[E.command].apply(m,E.args)}),this.stylesheet=c,!0},h.prototype.addImage=function(c,m){if(this.getImage(c))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(c,m),this._afterImageUpdated(c)},h.prototype.updateImage=function(c,m){this.imageManager.updateImage(c,m)},h.prototype.getImage=function(c){return this.imageManager.getImage(c)},h.prototype.removeImage=function(c){if(!this.getImage(c))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(c),this._afterImageUpdated(c)},h.prototype._afterImageUpdated=function(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},h.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},h.prototype.addSource=function(c,m,b){var w=this;if(b===void 0&&(b={}),this._checkLoaded(),this.sourceCaches[c]!==void 0)throw new Error("There is already a source with this ID");if(!m.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(m).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(o.validateStyle.source,"sources."+c,m,null,b))){this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);var E=this.sourceCaches[c]=new _t(c,m,this.dispatcher);E.style=this,E.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:E.serialize(),sourceId:c}}),E.onAdd(this.map),this._changed=!0}},h.prototype.removeSource=function(c){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error("There is no source with this ID");for(var m in this._layers)if(this._layers[m].source===c)return this.fire(new o.ErrorEvent(new Error('Source "'+c+'" cannot be removed while layer "'+m+'" is using it.')));var b=this.sourceCaches[c];delete this.sourceCaches[c],delete this._updatedSources[c],b.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),b.setEventedParent(null),b.clearTiles(),b.onRemove&&b.onRemove(this.map),this._changed=!0},h.prototype.setGeoJSONSourceData=function(c,m){this._checkLoaded(),this.sourceCaches[c].getSource().setData(m),this._changed=!0},h.prototype.getSource=function(c){return this.sourceCaches[c]&&this.sourceCaches[c].getSource()},h.prototype.addLayer=function(c,m,b){b===void 0&&(b={}),this._checkLoaded();var w=c.id;if(this.getLayer(w))this.fire(new o.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var E;if(c.type==="custom"){if(ir(this,o.validateCustomStyleLayer(c)))return;E=o.createStyleLayer(c)}else{if(typeof c.source=="object"&&(this.addSource(w,c.source),c=o.clone$1(c),c=o.extend(c,{source:w})),this._validate(o.validateStyle.layer,"layers."+w,c,{arrayIndex:-1},b))return;E=o.createStyleLayer(c),this._validateLayer(E),E.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[E.id]=E.serialize()}var L=m?this._order.indexOf(m):this._order.length;if(m&&L===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+m+'" does not exist on this map.')));else{if(this._order.splice(L,0,w),this._layerOrderChanged=!0,this._layers[w]=E,this._removedLayers[w]&&E.source&&E.type!=="custom"){var F=this._removedLayers[w];delete this._removedLayers[w],F.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}},h.prototype.moveLayer=function(c,m){if(this._checkLoaded(),this._changed=!0,this._layers[c]){if(c!==m){var b=this._order.indexOf(c);this._order.splice(b,1);var w=m?this._order.indexOf(m):this._order.length;m&&w===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+m+'" does not exist on this map.'))):(this._order.splice(w,0,c),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be moved.")))},h.prototype.removeLayer=function(c){this._checkLoaded();var m=this._layers[c];if(m){m.setEventedParent(null);var b=this._order.indexOf(c);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=m,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],m.onRemove&&m.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be removed.")))},h.prototype.getLayer=function(c){return this._layers[c]},h.prototype.hasLayer=function(c){return c in this._layers},h.prototype.setLayerZoomRange=function(c,m,b){this._checkLoaded();var w=this.getLayer(c);w?w.minzoom===m&&w.maxzoom===b||(m!=null&&(w.minzoom=m),b!=null&&(w.maxzoom=b),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot have zoom extent.")))},h.prototype.setFilter=function(c,m,b){b===void 0&&(b={}),this._checkLoaded();var w=this.getLayer(c);if(w){if(!o.deepEqual(w.filter,m))return m==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(o.validateStyle.filter,"layers."+w.id+".filter",m,null,b)||(w.filter=o.clone$1(m),this._updateLayer(w)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be filtered.")))},h.prototype.getFilter=function(c){return o.clone$1(this.getLayer(c).filter)},h.prototype.setLayoutProperty=function(c,m,b,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(c);E?o.deepEqual(E.getLayoutProperty(m),b)||(E.setLayoutProperty(m,b,w),this._updateLayer(E)):this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be styled.")))},h.prototype.getLayoutProperty=function(c,m){var b=this.getLayer(c);if(b)return b.getLayoutProperty(m);this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style.")))},h.prototype.setPaintProperty=function(c,m,b,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(c);E?o.deepEqual(E.getPaintProperty(m),b)||(E.setPaintProperty(m,b,w)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be styled.")))},h.prototype.getPaintProperty=function(c,m){return this.getLayer(c).getPaintProperty(m)},h.prototype.setFeatureState=function(c,m){this._checkLoaded();var b=c.source,w=c.sourceLayer,E=this.sourceCaches[b];if(E!==void 0){var L=E.getSource().type;L==="geojson"&&w?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):L!=="vector"||w?(c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(w,c.id,m)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+b+"' does not exist in the map's style.")))},h.prototype.removeFeatureState=function(c,m){this._checkLoaded();var b=c.source,w=this.sourceCaches[b];if(w!==void 0){var E=w.getSource().type,L=E==="vector"?c.sourceLayer:void 0;E!=="vector"||L?m&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(L,c.id,m):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+b+"' does not exist in the map's style.")))},h.prototype.getFeatureState=function(c){this._checkLoaded();var m=c.source,b=c.sourceLayer,w=this.sourceCaches[m];if(w!==void 0){if(w.getSource().type!=="vector"||b)return c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(b,c.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},h.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},h.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(c){return c.serialize()}),layers:this._serializeLayers(this._order)},function(c){return c!==void 0})},h.prototype._updateLayer=function(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.sourceCaches[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.sourceCaches[c.source].pause()),this._changed=!0},h.prototype._flattenAndSortRenderedFeatures=function(c){for(var m=this,b=function(Ce){return m._layers[Ce].type==="fill-extrusion"},w={},E=[],L=this._order.length-1;L>=0;L--){var F=this._order[L];if(b(F)){w[F]=L;for(var H=0,et=c;H<et.length;H+=1){var it=et[H][F];if(it)for(var ot=0,yt=it;ot<yt.length;ot+=1)E.push(yt[ot])}}}E.sort(function(Ce,Le){return Le.intersectionZ-Ce.intersectionZ});for(var dt=[],Ct=this._order.length-1;Ct>=0;Ct--){var ht=this._order[Ct];if(b(ht))for(var It=E.length-1;It>=0;It--){var Rt=E[It].feature;if(w[Rt.layer.id]<Ct)break;dt.push(Rt),E.pop()}else for(var qt=0,re=c;qt<re.length;qt+=1){var ne=re[qt][ht];if(ne)for(var ae=0,ve=ne;ae<ve.length;ae+=1)dt.push(ve[ae].feature)}}return dt},h.prototype.queryRenderedFeatures=function(c,m,b){m&&m.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",m.filter,null,m);var w={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var E=0,L=m.layers;E<L.length;E+=1){var F=L[E],H=this._layers[F];if(!H)return this.fire(new o.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be queried for features."))),[];w[H.source]=!0}}var et=[];for(var it in m.availableImages=this._availableImages,this.sourceCaches)m.layers&&!w[it]||et.push(ue(this.sourceCaches[it],this._layers,this._serializedLayers,c,m,b));return this.placement&&et.push(function(ot,yt,dt,Ct,ht,It,Rt){for(var qt={},re=It.queryRenderedSymbols(Ct),ne=[],ae=0,ve=Object.keys(re).map(Number);ae<ve.length;ae+=1)ne.push(Rt[ve[ae]]);ne.sort(Qe);for(var Ce=function(){var En=We[Le],Oi=En.featureIndex.lookupSymbolFeatures(re[En.bucketInstanceId],yt,En.bucketIndex,En.sourceLayerIndex,ht.filter,ht.layers,ht.availableImages,ot);for(var tn in Oi){var Dn=qt[tn]=qt[tn]||[],ei=Oi[tn];ei.sort(function(ni,Vn){var gn=En.featureSortOrder;if(gn){var go=gn.indexOf(ni.featureIndex);return gn.indexOf(Vn.featureIndex)-go}return Vn.featureIndex-ni.featureIndex});for(var Gn=0,Nn=ei;Gn<Nn.length;Gn+=1)Dn.push(Nn[Gn])}},Le=0,We=ne;Le<We.length;Le+=1)Ce();var fn=function(En){qt[En].forEach(function(Oi){var tn=Oi.feature,Dn=dt[ot[En].source].getFeatureState(tn.layer["source-layer"],tn.id);tn.source=tn.layer.source,tn.layer["source-layer"]&&(tn.sourceLayer=tn.layer["source-layer"]),tn.state=Dn})};for(var Tn in qt)fn(Tn);return qt}(this._layers,this._serializedLayers,this.sourceCaches,c,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(et)},h.prototype.querySourceFeatures=function(c,m){m&&m.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",m.filter,null,m);var b=this.sourceCaches[c];return b?function(w,E){for(var L=w.getRenderableIds().map(function(yt){return w.getTileByID(yt)}),F=[],H={},et=0;et<L.length;et++){var it=L[et],ot=it.tileID.canonical.key;H[ot]||(H[ot]=!0,it.querySourceFeatures(F,E))}return F}(b,m):[]},h.prototype.addSourceType=function(c,m,b){return h.getSourceType(c)?b(new Error('A source type called "'+c+'" already exists.')):(h.setSourceType(c,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:m.workerSourceURL},b):b(null,null))},h.prototype.getLight=function(){return this.light.getLight()},h.prototype.setLight=function(c,m){m===void 0&&(m={}),this._checkLoaded();var b=this.light.getLight(),w=!1;for(var E in c)if(!o.deepEqual(c[E],b[E])){w=!0;break}if(w){var L={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,m),this.light.updateTransitions(L)}},h.prototype._validate=function(c,m,b,w,E){return E===void 0&&(E={}),(!E||E.validate!==!1)&&ir(this,c.call(o.validateStyle,o.extend({key:m,style:this.serialize(),value:b,styleSpec:o.styleSpec},w)))},h.prototype._remove=function(){for(var c in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[c].setEventedParent(null);for(var m in this.sourceCaches)this.sourceCaches[m].clearTiles(),this.sourceCaches[m].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},h.prototype._clearSource=function(c){this.sourceCaches[c].clearTiles()},h.prototype._reloadSource=function(c){this.sourceCaches[c].resume(),this.sourceCaches[c].reload()},h.prototype._updateSources=function(c){for(var m in this.sourceCaches)this.sourceCaches[m].update(c)},h.prototype._generateCollisionBoxes=function(){for(var c in this.sourceCaches)this._reloadSource(c)},h.prototype._updatePlacement=function(c,m,b,w,E){E===void 0&&(E=!1);for(var L=!1,F=!1,H={},et=0,it=this._order;et<it.length;et+=1){var ot=this._layers[it[et]];if(ot.type==="symbol"){if(!H[ot.source]){var yt=this.sourceCaches[ot.source];H[ot.source]=yt.getRenderableIds(!0).map(function(Rt){return yt.getTileByID(Rt)}).sort(function(Rt,qt){return qt.tileID.overscaledZ-Rt.tileID.overscaledZ||(Rt.tileID.isLessThan(qt.tileID)?-1:1)})}var dt=this.crossTileSymbolIndex.addLayer(ot,H[ot.source],c.center.lng);L=L||dt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),c.zoom))&&(this.pauseablePlacement=new wn(c,this._order,E,m,b,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,H),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),F=!0),L&&this.pauseablePlacement.placement.setStale()),F||L)for(var Ct=0,ht=this._order;Ct<ht.length;Ct+=1){var It=this._layers[ht[Ct]];It.type==="symbol"&&this.placement.updateLayerOpacities(It,H[It.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},h.prototype._releaseSymbolFadeTiles=function(){for(var c in this.sourceCaches)this.sourceCaches[c].releaseSymbolFadeTiles()},h.prototype.getImages=function(c,m,b){this.imageManager.getImages(m.icons,b),this._updateTilesForChangedImages();var w=this.sourceCaches[m.source];w&&w.setDependencies(m.tileID.key,m.type,m.icons)},h.prototype.getGlyphs=function(c,m,b){this.glyphManager.getGlyphs(m.stacks,b)},h.prototype.getResource=function(c,m,b){return o.makeRequest(m,b)},h}(o.Evented);Mi.getSourceType=function(l){return oi[l]},Mi.setSourceType=function(l,h){oi[l]=h},Mi.registerForPluginStateChange=o.registerForPluginStateChange;var $r=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),Jl=tr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),jc=tr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),vf=tr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),yf=tr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Ah=tr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Hc=tr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),wh=tr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),co=tr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),lc=tr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Qs=tr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),_f=tr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),tu=tr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ao=tr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),uc=tr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),ho=tr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),za=tr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Es=tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ss=tr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),wl=tr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),fo=tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),us=tr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),wo=tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Cl=tr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Js=tr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),oa=tr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Iu=tr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function tr(l,h){var c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=h.match(/attribute ([\w]+) ([\w]+)/g),b=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=h.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=w?w.concat(b):b,L={};return{fragmentSource:l=l.replace(c,function(F,H,et,it,ot){return L[ot]=!0,H==="define"?`
#ifndef HAS_UNIFORM_u_`+ot+`
varying `+et+" "+it+" "+ot+`;
#else
uniform `+et+" "+it+" u_"+ot+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ot+`
    `+et+" "+it+" "+ot+" = u_"+ot+`;
#endif
`}),vertexSource:h=h.replace(c,function(F,H,et,it,ot){var yt=it==="float"?"vec2":"vec4",dt=ot.match(/color/)?"color":yt;return L[ot]?H==="define"?`
#ifndef HAS_UNIFORM_u_`+ot+`
uniform lowp float u_`+ot+`_t;
attribute `+et+" "+yt+" a_"+ot+`;
varying `+et+" "+it+" "+ot+`;
#else
uniform `+et+" "+it+" u_"+ot+`;
#endif
`:dt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ot+`
    `+ot+" = a_"+ot+`;
#else
    `+et+" "+it+" "+ot+" = u_"+ot+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ot+`
    `+ot+" = unpack_mix_"+dt+"(a_"+ot+", u_"+ot+`_t);
#else
    `+et+" "+it+" "+ot+" = u_"+ot+`;
#endif
`:H==="define"?`
#ifndef HAS_UNIFORM_u_`+ot+`
uniform lowp float u_`+ot+`_t;
attribute `+et+" "+yt+" a_"+ot+`;
#else
uniform `+et+" "+it+" u_"+ot+`;
#endif
`:dt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ot+`
    `+et+" "+it+" "+ot+" = a_"+ot+`;
#else
    `+et+" "+it+" "+ot+" = u_"+ot+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ot+`
    `+et+" "+it+" "+ot+" = unpack_mix_"+dt+"(a_"+ot+", u_"+ot+`_t);
#else
    `+et+" "+it+" "+ot+" = u_"+ot+`;
#endif
`}),staticAttributes:m,staticUniforms:E}}var Vr=Object.freeze({__proto__:null,prelude:Jl,background:jc,backgroundPattern:vf,circle:yf,clippingMask:Ah,heatmap:Hc,heatmapTexture:wh,collisionBox:co,collisionCircle:lc,debug:Qs,fill:_f,fillOutline:tu,fillOutlinePattern:Ao,fillPattern:uc,fillExtrusion:ho,fillExtrusionPattern:za,hillshadePrepare:Es,hillshade:Ss,line:wl,lineGradient:fo,linePattern:us,lineSDF:wo,raster:Cl,symbolIcon:Js,symbolSDF:oa,symbolTextAndIcon:Iu}),Ba=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Il(l){for(var h=[],c=0;c<l.length;c++)if(l[c]!==null){var m=l[c].split(" ");h.push(m.pop())}return h}Ba.prototype.bind=function(l,h,c,m,b,w,E,L){this.context=l;for(var F=this.boundPaintVertexBuffers.length!==m.length,H=0;!F&&H<m.length;H++)this.boundPaintVertexBuffers[H]!==m[H]&&(F=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===h&&this.boundLayoutVertexBuffer===c&&!F&&this.boundIndexBuffer===b&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===L?(l.bindVertexArrayOES.set(this.vao),E&&E.bind(),b&&b.dynamicDraw&&b.bind(),L&&L.bind()):this.freshBind(h,c,m,b,w,E,L)},Ba.prototype.freshBind=function(l,h,c,m,b,w,E){var L,F=l.numAttributes,H=this.context,et=H.gl;if(H.extVertexArrayObject)this.vao&&this.destroy(),this.vao=H.extVertexArrayObject.createVertexArrayOES(),H.bindVertexArrayOES.set(this.vao),L=0,this.boundProgram=l,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=m,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E;else{L=H.currentNumAttributes||0;for(var it=F;it<L;it++)et.disableVertexAttribArray(it)}h.enableAttributes(et,l);for(var ot=0,yt=c;ot<yt.length;ot+=1)yt[ot].enableAttributes(et,l);w&&w.enableAttributes(et,l),E&&E.enableAttributes(et,l),h.bind(),h.setVertexAttribPointers(et,l,b);for(var dt=0,Ct=c;dt<Ct.length;dt+=1){var ht=Ct[dt];ht.bind(),ht.setVertexAttribPointers(et,l,b)}w&&(w.bind(),w.setVertexAttribPointers(et,l,b)),m&&m.bind(),E&&(E.bind(),E.setVertexAttribPointers(et,l,b)),H.currentNumAttributes=F},Ba.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Gc=function(l,h,c,m,b,w){var E=l.gl;this.program=E.createProgram();for(var L=Il(c.staticAttributes),F=m?m.getBinderAttributes():[],H=L.concat(F),et=c.staticUniforms?Il(c.staticUniforms):[],it=m?m.getBinderUniforms():[],ot=[],yt=0,dt=et.concat(it);yt<dt.length;yt+=1){var Ct=dt[yt];ot.indexOf(Ct)<0&&ot.push(Ct)}var ht=m?m.defines():[];w&&ht.push("#define OVERDRAW_INSPECTOR;");var It=ht.concat(Jl.fragmentSource,c.fragmentSource).join(`
`),Rt=ht.concat(Jl.vertexSource,c.vertexSource).join(`
`),qt=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(qt,It),E.compileShader(qt),E.attachShader(this.program,qt);var re=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(re,Rt),E.compileShader(re),E.attachShader(this.program,re),this.attributes={};var ne={};this.numAttributes=H.length;for(var ae=0;ae<this.numAttributes;ae++)H[ae]&&(E.bindAttribLocation(this.program,ae,H[ae]),this.attributes[H[ae]]=ae);E.linkProgram(this.program),E.deleteShader(re),E.deleteShader(qt);for(var ve=0;ve<ot.length;ve++){var Ce=ot[ve];if(Ce&&!ne[Ce]){var Le=E.getUniformLocation(this.program,Ce);Le&&(ne[Ce]=Le)}}this.fixedUniforms=b(l,ne),this.binderUniforms=m?m.getUniforms(l,ne):[]}}};function Mu(l,h,c){var m=1/vr(c,1,h.transform.tileZoom),b=Math.pow(2,c.tileID.overscaledZ),w=c.tileSize*Math.pow(2,h.transform.tileZoom)/b,E=w*(c.tileID.canonical.x+c.tileID.wrap*b),L=w*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[m,l.fromScale,l.toScale],u_fade:l.t,u_pixel_coord_upper:[E>>16,L>>16],u_pixel_coord_lower:[65535&E,65535&L]}}Gc.prototype.draw=function(l,h,c,m,b,w,E,L,F,H,et,it,ot,yt,dt,Ct){var ht,It=l.gl;if(!this.failedToCreate){for(var Rt in l.program.set(this.program),l.setDepthMode(c),l.setStencilMode(m),l.setColorMode(b),l.setCullFace(w),this.fixedUniforms)this.fixedUniforms[Rt].set(E[Rt]);yt&&yt.setUniforms(l,this.binderUniforms,it,{zoom:ot});for(var qt=(ht={},ht[It.LINES]=2,ht[It.TRIANGLES]=3,ht[It.LINE_STRIP]=1,ht)[h],re=0,ne=et.get();re<ne.length;re+=1){var ae=ne[re],ve=ae.vaos||(ae.vaos={});(ve[L]||(ve[L]=new Ba)).bind(l,this,F,yt?yt.getPaintVertexBuffers():[],H,ae.vertexOffset,dt,Ct),It.drawElements(h,ae.primitiveLength*qt,It.UNSIGNED_SHORT,ae.primitiveOffset*qt*2)}}};var qc=function(l,h,c,m){var b=h.style.light,w=b.properties.get("position"),E=[w.x,w.y,w.z],L=o.create$1();b.properties.get("anchor")==="viewport"&&o.fromRotation(L,-h.transform.angle),o.transformMat3(E,E,L);var F=b.properties.get("color");return{u_matrix:l,u_lightpos:E,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[F.r,F.g,F.b],u_vertical_gradient:+c,u_opacity:m}},cs=function(l,h,c,m,b,w,E){return o.extend(qc(l,h,c,m),Mu(w,h,E),{u_height_factor:-Math.pow(2,b.overscaledZ)/E.tileSize/8})},Ml=function(l){return{u_matrix:l}},El=function(l,h,c,m){return o.extend(Ml(l),Mu(c,h,m))},cc=function(l,h){return{u_matrix:l,u_world:h}},eu=function(l,h,c,m,b){return o.extend(El(l,h,c,m),{u_world:b})},Ch=function(l,h,c,m){var b,w,E=l.transform;if(m.paint.get("circle-pitch-alignment")==="map"){var L=vr(c,1,E.zoom);b=!0,w=[L,L]}else b=!1,w=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:l.translatePosMatrix(h.posMatrix,c,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:w}},tl=function(l,h,c){var m=vr(c,1,h.zoom),b=Math.pow(2,h.zoom-c.tileID.overscaledZ),w=c.tileID.overscaleFactor();return{u_matrix:l,u_camera_to_center_distance:h.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[h.pixelsToGLUnits[0]/(m*b),h.pixelsToGLUnits[1]/(m*b)],u_overscale_factor:w}},hc=function(l,h,c){return{u_matrix:l,u_inv_matrix:h,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}},aa=function(l,h,c){return c===void 0&&(c=1),{u_matrix:l,u_color:h,u_overlay:0,u_overlay_scale:c}},Uo=function(l){return{u_matrix:l}},el=function(l,h,c,m){return{u_matrix:l,u_extrude_scale:vr(h,1,c),u_intensity:m}},Sl=function(l,h,c){var m=l.transform;return{u_matrix:sa(l,h,c),u_ratio:1/vr(h,1,m.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},zi=function(l,h,c,m){return o.extend(Sl(l,h,c),{u_image:0,u_image_height:m})},Eu=function(l,h,c,m){var b=l.transform,w=hs(h,b);return{u_matrix:sa(l,h,c),u_texsize:h.imageAtlasTexture.size,u_ratio:1/vr(h,1,b.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[w,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Wc=function(l,h,c,m,b){var w=l.lineAtlas,E=hs(h,l.transform),L=c.layout.get("line-cap")==="round",F=w.getDash(m.from,L),H=w.getDash(m.to,L),et=F.width*b.fromScale,it=H.width*b.toScale;return o.extend(Sl(l,h,c),{u_patternscale_a:[E/et,-F.height/2],u_patternscale_b:[E/it,-H.height/2],u_sdfgamma:w.width/(256*Math.min(et,it)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:F.y,u_tex_y_b:H.y,u_mix:b.t})};function hs(l,h){return 1/vr(l,1,h.tileZoom)}function sa(l,h,c){return l.translatePosMatrix(h.tileID.posMatrix,h,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}var Zc=function(l,h,c,m,b){return{u_matrix:l,u_tl_parent:h,u_scale_parent:c,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(E=b.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(w=b.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:Su(b.paint.get("raster-hue-rotate"))};var w,E};function Su(l){l*=Math.PI/180;var h=Math.sin(l),c=Math.cos(l);return[(2*c+1)/3,(-Math.sqrt(3)*h-c+1)/3,(Math.sqrt(3)*h-c+1)/3]}var fc,Tl=function(l,h,c,m,b,w,E,L,F,H){var et=b.transform;return{u_is_size_zoom_constant:+(l==="constant"||l==="source"),u_is_size_feature_constant:+(l==="constant"||l==="camera"),u_size_t:h?h.uSizeT:0,u_size:h?h.uSize:0,u_camera_to_center_distance:et.cameraToCenterDistance,u_pitch:et.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:et.width/et.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:E,u_coord_matrix:L,u_is_text:+F,u_pitch_with_map:+m,u_texsize:H,u_texture:0}},Tu=function(l,h,c,m,b,w,E,L,F,H,et){var it=b.transform;return o.extend(Tl(l,h,c,m,b,w,E,L,F,H),{u_gamma_scale:m?Math.cos(it._pitch)*it.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+et})},nu=function(l,h,c,m,b,w,E,L,F,H){return o.extend(Tu(l,h,c,m,b,w,E,L,!0,F,!0),{u_texsize_icon:H,u_texture_icon:1})},Ts=function(l,h,c){return{u_matrix:l,u_opacity:h,u_color:c}},ku=function(l,h,c,m,b,w){return o.extend(function(E,L,F,H){var et=F.imageManager.getPattern(E.from.toString()),it=F.imageManager.getPattern(E.to.toString()),ot=F.imageManager.getPixelSize(),yt=ot.width,dt=ot.height,Ct=Math.pow(2,H.tileID.overscaledZ),ht=H.tileSize*Math.pow(2,F.transform.tileZoom)/Ct,It=ht*(H.tileID.canonical.x+H.tileID.wrap*Ct),Rt=ht*H.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:et.tl,u_pattern_br_a:et.br,u_pattern_tl_b:it.tl,u_pattern_br_b:it.br,u_texsize:[yt,dt],u_mix:L.t,u_pattern_size_a:et.displaySize,u_pattern_size_b:it.displaySize,u_scale_a:L.fromScale,u_scale_b:L.toScale,u_tile_units_to_pixels:1/vr(H,1,F.transform.tileZoom),u_pixel_coord_upper:[It>>16,Rt>>16],u_pixel_coord_lower:[65535&It,65535&Rt]}}(m,w,c,b),{u_matrix:l,u_opacity:h})},nl={fillExtrusion:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_lightpos:new o.Uniform3f(l,h.u_lightpos),u_lightintensity:new o.Uniform1f(l,h.u_lightintensity),u_lightcolor:new o.Uniform3f(l,h.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,h.u_vertical_gradient),u_opacity:new o.Uniform1f(l,h.u_opacity)}},fillExtrusionPattern:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_lightpos:new o.Uniform3f(l,h.u_lightpos),u_lightintensity:new o.Uniform1f(l,h.u_lightintensity),u_lightcolor:new o.Uniform3f(l,h.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,h.u_vertical_gradient),u_height_factor:new o.Uniform1f(l,h.u_height_factor),u_image:new o.Uniform1i(l,h.u_image),u_texsize:new o.Uniform2f(l,h.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,h.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,h.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,h.u_scale),u_fade:new o.Uniform1f(l,h.u_fade),u_opacity:new o.Uniform1f(l,h.u_opacity)}},fill:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix)}},fillPattern:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_image:new o.Uniform1i(l,h.u_image),u_texsize:new o.Uniform2f(l,h.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,h.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,h.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,h.u_scale),u_fade:new o.Uniform1f(l,h.u_fade)}},fillOutline:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_world:new o.Uniform2f(l,h.u_world)}},fillOutlinePattern:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_world:new o.Uniform2f(l,h.u_world),u_image:new o.Uniform1i(l,h.u_image),u_texsize:new o.Uniform2f(l,h.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,h.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,h.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,h.u_scale),u_fade:new o.Uniform1f(l,h.u_fade)}},circle:function(l,h){return{u_camera_to_center_distance:new o.Uniform1f(l,h.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(l,h.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(l,h.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(l,h.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(l,h.u_matrix)}},collisionBox:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_camera_to_center_distance:new o.Uniform1f(l,h.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(l,h.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(l,h.u_extrude_scale),u_overscale_factor:new o.Uniform1f(l,h.u_overscale_factor)}},collisionCircle:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_inv_matrix:new o.UniformMatrix4f(l,h.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(l,h.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(l,h.u_viewport_size)}},debug:function(l,h){return{u_color:new o.UniformColor(l,h.u_color),u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_overlay:new o.Uniform1i(l,h.u_overlay),u_overlay_scale:new o.Uniform1f(l,h.u_overlay_scale)}},clippingMask:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix)}},heatmap:function(l,h){return{u_extrude_scale:new o.Uniform1f(l,h.u_extrude_scale),u_intensity:new o.Uniform1f(l,h.u_intensity),u_matrix:new o.UniformMatrix4f(l,h.u_matrix)}},heatmapTexture:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_world:new o.Uniform2f(l,h.u_world),u_image:new o.Uniform1i(l,h.u_image),u_color_ramp:new o.Uniform1i(l,h.u_color_ramp),u_opacity:new o.Uniform1f(l,h.u_opacity)}},hillshade:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_image:new o.Uniform1i(l,h.u_image),u_latrange:new o.Uniform2f(l,h.u_latrange),u_light:new o.Uniform2f(l,h.u_light),u_shadow:new o.UniformColor(l,h.u_shadow),u_highlight:new o.UniformColor(l,h.u_highlight),u_accent:new o.UniformColor(l,h.u_accent)}},hillshadePrepare:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_image:new o.Uniform1i(l,h.u_image),u_dimension:new o.Uniform2f(l,h.u_dimension),u_zoom:new o.Uniform1f(l,h.u_zoom),u_unpack:new o.Uniform4f(l,h.u_unpack)}},line:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_ratio:new o.Uniform1f(l,h.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,h.u_units_to_pixels)}},lineGradient:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_ratio:new o.Uniform1f(l,h.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,h.u_units_to_pixels),u_image:new o.Uniform1i(l,h.u_image),u_image_height:new o.Uniform1f(l,h.u_image_height)}},linePattern:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_texsize:new o.Uniform2f(l,h.u_texsize),u_ratio:new o.Uniform1f(l,h.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_image:new o.Uniform1i(l,h.u_image),u_units_to_pixels:new o.Uniform2f(l,h.u_units_to_pixels),u_scale:new o.Uniform3f(l,h.u_scale),u_fade:new o.Uniform1f(l,h.u_fade)}},lineSDF:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_ratio:new o.Uniform1f(l,h.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,h.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(l,h.u_patternscale_a),u_patternscale_b:new o.Uniform2f(l,h.u_patternscale_b),u_sdfgamma:new o.Uniform1f(l,h.u_sdfgamma),u_image:new o.Uniform1i(l,h.u_image),u_tex_y_a:new o.Uniform1f(l,h.u_tex_y_a),u_tex_y_b:new o.Uniform1f(l,h.u_tex_y_b),u_mix:new o.Uniform1f(l,h.u_mix)}},raster:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_tl_parent:new o.Uniform2f(l,h.u_tl_parent),u_scale_parent:new o.Uniform1f(l,h.u_scale_parent),u_buffer_scale:new o.Uniform1f(l,h.u_buffer_scale),u_fade_t:new o.Uniform1f(l,h.u_fade_t),u_opacity:new o.Uniform1f(l,h.u_opacity),u_image0:new o.Uniform1i(l,h.u_image0),u_image1:new o.Uniform1i(l,h.u_image1),u_brightness_low:new o.Uniform1f(l,h.u_brightness_low),u_brightness_high:new o.Uniform1f(l,h.u_brightness_high),u_saturation_factor:new o.Uniform1f(l,h.u_saturation_factor),u_contrast_factor:new o.Uniform1f(l,h.u_contrast_factor),u_spin_weights:new o.Uniform3f(l,h.u_spin_weights)}},symbolIcon:function(l,h){return{u_is_size_zoom_constant:new o.Uniform1i(l,h.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,h.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,h.u_size_t),u_size:new o.Uniform1f(l,h.u_size),u_camera_to_center_distance:new o.Uniform1f(l,h.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,h.u_pitch),u_rotate_symbol:new o.Uniform1i(l,h.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,h.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,h.u_fade_change),u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,h.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,h.u_coord_matrix),u_is_text:new o.Uniform1i(l,h.u_is_text),u_pitch_with_map:new o.Uniform1i(l,h.u_pitch_with_map),u_texsize:new o.Uniform2f(l,h.u_texsize),u_texture:new o.Uniform1i(l,h.u_texture)}},symbolSDF:function(l,h){return{u_is_size_zoom_constant:new o.Uniform1i(l,h.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,h.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,h.u_size_t),u_size:new o.Uniform1f(l,h.u_size),u_camera_to_center_distance:new o.Uniform1f(l,h.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,h.u_pitch),u_rotate_symbol:new o.Uniform1i(l,h.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,h.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,h.u_fade_change),u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,h.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,h.u_coord_matrix),u_is_text:new o.Uniform1i(l,h.u_is_text),u_pitch_with_map:new o.Uniform1i(l,h.u_pitch_with_map),u_texsize:new o.Uniform2f(l,h.u_texsize),u_texture:new o.Uniform1i(l,h.u_texture),u_gamma_scale:new o.Uniform1f(l,h.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,h.u_is_halo)}},symbolTextAndIcon:function(l,h){return{u_is_size_zoom_constant:new o.Uniform1i(l,h.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,h.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,h.u_size_t),u_size:new o.Uniform1f(l,h.u_size),u_camera_to_center_distance:new o.Uniform1f(l,h.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,h.u_pitch),u_rotate_symbol:new o.Uniform1i(l,h.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,h.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,h.u_fade_change),u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,h.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,h.u_coord_matrix),u_is_text:new o.Uniform1i(l,h.u_is_text),u_pitch_with_map:new o.Uniform1i(l,h.u_pitch_with_map),u_texsize:new o.Uniform2f(l,h.u_texsize),u_texsize_icon:new o.Uniform2f(l,h.u_texsize_icon),u_texture:new o.Uniform1i(l,h.u_texture),u_texture_icon:new o.Uniform1i(l,h.u_texture_icon),u_gamma_scale:new o.Uniform1f(l,h.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,h.u_is_halo)}},background:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_opacity:new o.Uniform1f(l,h.u_opacity),u_color:new o.UniformColor(l,h.u_color)}},backgroundPattern:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_opacity:new o.Uniform1f(l,h.u_opacity),u_image:new o.Uniform1i(l,h.u_image),u_pattern_tl_a:new o.Uniform2f(l,h.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(l,h.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(l,h.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(l,h.u_pattern_br_b),u_texsize:new o.Uniform2f(l,h.u_texsize),u_mix:new o.Uniform1f(l,h.u_mix),u_pattern_size_a:new o.Uniform2f(l,h.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(l,h.u_pattern_size_b),u_scale_a:new o.Uniform1f(l,h.u_scale_a),u_scale_b:new o.Uniform1f(l,h.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(l,h.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,h.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(l,h.u_tile_units_to_pixels)}}};function fs(l,h,c,m,b,w,E){for(var L=l.context,F=L.gl,H=l.useProgram("collisionBox"),et=[],it=0,ot=0,yt=0;yt<m.length;yt++){var dt=m[yt],Ct=h.getTile(dt),ht=Ct.getBucket(c);if(ht){var It=dt.posMatrix;b[0]===0&&b[1]===0||(It=l.translatePosMatrix(dt.posMatrix,Ct,b,w));var Rt=E?ht.textCollisionBox:ht.iconCollisionBox,qt=ht.collisionCircleArray;if(qt.length>0){var re=o.create(),ne=It;o.mul(re,ht.placementInvProjMatrix,l.transform.glCoordMatrix),o.mul(re,re,ht.placementViewportMatrix),et.push({circleArray:qt,circleOffset:ot,transform:ne,invTransform:re}),ot=it+=qt.length/4}Rt&&H.draw(L,F.LINES,at.disabled,gt.disabled,l.colorModeForRenderPass(),zt.disabled,tl(It,l.transform,Ct),c.id,Rt.layoutVertexBuffer,Rt.indexBuffer,Rt.segments,null,l.transform.zoom,null,null,Rt.collisionVertexBuffer)}}if(E&&et.length){var ae=l.useProgram("collisionCircle"),ve=new o.StructArrayLayout2f1f2i16;ve.resize(4*it),ve._trim();for(var Ce=0,Le=0,We=et;Le<We.length;Le+=1)for(var fn=We[Le],Tn=0;Tn<fn.circleArray.length/4;Tn++){var En=4*Tn,Oi=fn.circleArray[En+0],tn=fn.circleArray[En+1],Dn=fn.circleArray[En+2],ei=fn.circleArray[En+3];ve.emplace(Ce++,Oi,tn,Dn,ei,0),ve.emplace(Ce++,Oi,tn,Dn,ei,1),ve.emplace(Ce++,Oi,tn,Dn,ei,2),ve.emplace(Ce++,Oi,tn,Dn,ei,3)}(!fc||fc.length<2*it)&&(fc=function(Xr){var Ur=2*Xr,Co=new o.StructArrayLayout3ui6;Co.resize(Ur),Co._trim();for(var Ir=0;Ir<Ur;Ir++){var _r=6*Ir;Co.uint16[_r+0]=4*Ir+0,Co.uint16[_r+1]=4*Ir+1,Co.uint16[_r+2]=4*Ir+2,Co.uint16[_r+3]=4*Ir+2,Co.uint16[_r+4]=4*Ir+3,Co.uint16[_r+5]=4*Ir+0}return Co}(it));for(var Gn=L.createIndexBuffer(fc,!0),Nn=L.createVertexBuffer(ve,o.collisionCircleLayout.members,!0),ni=0,Vn=et;ni<Vn.length;ni+=1){var gn=Vn[ni],go=hc(gn.transform,gn.invTransform,l.transform);ae.draw(L,F.TRIANGLES,at.disabled,gt.disabled,l.colorModeForRenderPass(),zt.disabled,go,c.id,Nn,Gn,o.SegmentVector.simpleSegment(0,2*gn.circleOffset,gn.circleArray.length,gn.circleArray.length/2),null,l.transform.zoom,null,null,null)}Nn.destroy(),Gn.destroy()}}var jo=o.identity(new Float32Array(16));function Ih(l,h,c,m,b,w){var E=o.getAnchorAlignment(l),L=-(E.horizontalAlign-.5)*h,F=-(E.verticalAlign-.5)*c,H=o.evaluateVariableOffset(l,m);return new o.Point((L/b+H[0])*w,(F/b+H[1])*w)}function $c(l,h,c,m,b,w,E,L,F,H,et){var it=l.text.placedSymbolArray,ot=l.text.dynamicLayoutVertexArray,yt=l.icon.dynamicLayoutVertexArray,dt={};ot.clear();for(var Ct=0;Ct<it.length;Ct++){var ht=it.get(Ct),It=ht.hidden||!ht.crossTileID||l.allowVerticalPlacement&&!ht.placedOrientation?null:m[ht.crossTileID];if(It){var Rt=new o.Point(ht.anchorX,ht.anchorY),qt=Yn(Rt,c?L:E),re=ai(w.cameraToCenterDistance,qt.signedDistanceFromCamera),ne=b.evaluateSizeForFeature(l.textSizeData,H,ht)*re/o.ONE_EM;c&&(ne*=l.tilePixelRatio/F);for(var ae=Ih(It.anchor,It.width,It.height,It.textOffset,It.textBoxScale,ne),ve=c?Yn(Rt.add(ae),E).point:qt.point.add(h?ae.rotate(-w.angle):ae),Ce=l.allowVerticalPlacement&&ht.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Le=0;Le<ht.numGlyphs;Le++)o.addDynamicAttributes(ot,ve,Ce);et&&ht.associatedIconIndex>=0&&(dt[ht.associatedIconIndex]={shiftedAnchor:ve,angle:Ce})}else bo(ht.numGlyphs,ot)}if(et){yt.clear();for(var We=l.icon.placedSymbolArray,fn=0;fn<We.length;fn++){var Tn=We.get(fn);if(Tn.hidden)bo(Tn.numGlyphs,yt);else{var En=dt[fn];if(En)for(var Oi=0;Oi<Tn.numGlyphs;Oi++)o.addDynamicAttributes(yt,En.shiftedAnchor,En.angle);else bo(Tn.numGlyphs,yt)}}l.icon.dynamicLayoutVertexBuffer.updateData(yt)}l.text.dynamicLayoutVertexBuffer.updateData(ot)}function Pu(l,h,c){return c.iconsInText&&h?"symbolTextAndIcon":l?"symbolSDF":"symbolIcon"}function Ko(l,h,c,m,b,w,E,L,F,H,et,it){for(var ot=l.context,yt=ot.gl,dt=l.transform,Ct=L==="map",ht=F==="map",It=Ct&&c.layout.get("symbol-placement")!=="point",Rt=Ct&&!ht&&!It,qt=c.layout.get("symbol-sort-key").constantOr(1)!==void 0,re=!1,ne=l.depthModeForSublayer(0,at.ReadOnly),ae=c.layout.get("text-variable-anchor"),ve=[],Ce=0,Le=m;Ce<Le.length;Ce+=1){var We=Le[Ce],fn=h.getTile(We),Tn=fn.getBucket(c);if(Tn){var En=b?Tn.text:Tn.icon;if(En&&En.segments.get().length){var Oi=En.programConfigurations.get(c.id),tn=b||Tn.sdfIcons,Dn=b?Tn.textSizeData:Tn.iconSizeData,ei=ht||dt.pitch!==0,Gn=l.useProgram(Pu(tn,b,Tn),Oi),Nn=o.evaluateSizeForZoom(Dn,dt.zoom),ni=void 0,Vn=[0,0],gn=void 0,go=void 0,Xr=null,Ur=void 0;if(b)gn=fn.glyphAtlasTexture,go=yt.LINEAR,ni=fn.glyphAtlasTexture.size,Tn.iconsInText&&(Vn=fn.imageAtlasTexture.size,Xr=fn.imageAtlasTexture,Ur=ei||l.options.rotating||l.options.zooming||Dn.kind==="composite"||Dn.kind==="camera"?yt.LINEAR:yt.NEAREST);else{var Co=c.layout.get("icon-size").constantOr(0)!==1||Tn.iconsNeedLinear;gn=fn.imageAtlasTexture,go=tn||l.options.rotating||l.options.zooming||Co||ei?yt.LINEAR:yt.NEAREST,ni=fn.imageAtlasTexture.size}var Ir=vr(fn,1,l.transform.zoom),_r=Pr(We.posMatrix,ht,Ct,l.transform,Ir),Na=$i(We.posMatrix,ht,Ct,l.transform,Ir),gr=ae&&Tn.hasTextData(),Rl=c.layout.get("icon-text-fit")!=="none"&&gr&&Tn.hasIconData();It&&ls(Tn,We.posMatrix,l,b,_r,Na,ht,H);var Va=l.translatePosMatrix(We.posMatrix,fn,w,E),al=It||b&&ae||Rl?jo:_r,Bs=l.translatePosMatrix(Na,fn,w,E,!0),vc=tn&&c.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0,th={program:Gn,buffers:En,uniformValues:tn?Tn.iconsInText?nu(Dn.kind,Nn,Rt,ht,l,Va,al,Bs,ni,Vn):Tu(Dn.kind,Nn,Rt,ht,l,Va,al,Bs,b,ni,!0):Tl(Dn.kind,Nn,Rt,ht,l,Va,al,Bs,b,ni),atlasTexture:gn,atlasTextureIcon:Xr,atlasInterpolation:go,atlasInterpolationIcon:Ur,isSDF:tn,hasHalo:vc};if(qt&&Tn.canOverlap){re=!0;for(var Os=0,yc=En.segments.get();Os<yc.length;Os+=1){var Th=yc[Os];ve.push({segments:new o.SegmentVector([Th]),sortKey:Th.sortKey,state:th})}}else ve.push({segments:En.segments,sortKey:0,state:th})}}}re&&ve.sort(function(su,_c){return su.sortKey-_c.sortKey});for(var zl=0,au=ve;zl<au.length;zl+=1){var Bl=au[zl],zo=Bl.state;if(ot.activeTexture.set(yt.TEXTURE0),zo.atlasTexture.bind(zo.atlasInterpolation,yt.CLAMP_TO_EDGE),zo.atlasTextureIcon&&(ot.activeTexture.set(yt.TEXTURE1),zo.atlasTextureIcon&&zo.atlasTextureIcon.bind(zo.atlasInterpolationIcon,yt.CLAMP_TO_EDGE)),zo.isSDF){var sl=zo.uniformValues;zo.hasHalo&&(sl.u_is_halo=1,il(zo.buffers,Bl.segments,c,l,zo.program,ne,et,it,sl)),sl.u_is_halo=0}il(zo.buffers,Bl.segments,c,l,zo.program,ne,et,it,zo.uniformValues)}}function il(l,h,c,m,b,w,E,L,F){var H=m.context;b.draw(H,H.gl.TRIANGLES,w,E,L,zt.disabled,F,c.id,l.layoutVertexBuffer,l.indexBuffer,h,c.paint,m.transform.zoom,l.programConfigurations.get(c.id),l.dynamicLayoutVertexBuffer,l.opacityVertexBuffer)}function pc(l,h,c,m,b,w,E){var L,F,H,et,it,ot=l.context.gl,yt=c.paint.get("fill-pattern"),dt=yt&&yt.constantOr(1),Ct=c.getCrossfadeParameters();E?(F=dt&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",L=ot.LINES):(F=dt?"fillPattern":"fill",L=ot.TRIANGLES);for(var ht=0,It=m;ht<It.length;ht+=1){var Rt=It[ht],qt=h.getTile(Rt);if(!dt||qt.patternsLoaded()){var re=qt.getBucket(c);if(re){var ne=re.programConfigurations.get(c.id),ae=l.useProgram(F,ne);dt&&(l.context.activeTexture.set(ot.TEXTURE0),qt.imageAtlasTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),ne.updatePaintBuffers(Ct));var ve=yt.constantOr(null);if(ve&&qt.imageAtlas){var Ce=qt.imageAtlas,Le=Ce.patternPositions[ve.to.toString()],We=Ce.patternPositions[ve.from.toString()];Le&&We&&ne.setConstantPatternPositions(Le,We)}var fn=l.translatePosMatrix(Rt.posMatrix,qt,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(E){et=re.indexBuffer2,it=re.segments2;var Tn=[ot.drawingBufferWidth,ot.drawingBufferHeight];H=F==="fillOutlinePattern"&&dt?eu(fn,l,Ct,qt,Tn):cc(fn,Tn)}else et=re.indexBuffer,it=re.segments,H=dt?El(fn,l,Ct,qt):Ml(fn);ae.draw(l.context,L,b,l.stencilModeForClipping(Rt),w,zt.disabled,H,c.id,re.layoutVertexBuffer,et,it,c.paint,l.transform.zoom,ne)}}}}function Yc(l,h,c,m,b,w,E){for(var L=l.context,F=L.gl,H=c.paint.get("fill-extrusion-pattern"),et=H.constantOr(1),it=c.getCrossfadeParameters(),ot=c.paint.get("fill-extrusion-opacity"),yt=0,dt=m;yt<dt.length;yt+=1){var Ct=dt[yt],ht=h.getTile(Ct),It=ht.getBucket(c);if(It){var Rt=It.programConfigurations.get(c.id),qt=l.useProgram(et?"fillExtrusionPattern":"fillExtrusion",Rt);et&&(l.context.activeTexture.set(F.TEXTURE0),ht.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),Rt.updatePaintBuffers(it));var re=H.constantOr(null);if(re&&ht.imageAtlas){var ne=ht.imageAtlas,ae=ne.patternPositions[re.to.toString()],ve=ne.patternPositions[re.from.toString()];ae&&ve&&Rt.setConstantPatternPositions(ae,ve)}var Ce=l.translatePosMatrix(Ct.posMatrix,ht,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Le=c.paint.get("fill-extrusion-vertical-gradient"),We=et?cs(Ce,l,Le,ot,Ct,it,ht):qc(Ce,l,Le,ot);qt.draw(L,L.gl.TRIANGLES,b,w,E,zt.backCCW,We,c.id,It.layoutVertexBuffer,It.indexBuffer,It.segments,c.paint,l.transform.zoom,Rt)}}}function kl(l,h,c,m,b,w){var E=l.context,L=E.gl,F=h.fbo;if(F){var H=l.useProgram("hillshade");E.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,F.colorAttachment.get());var et=function(it,ot,yt){var dt=yt.paint.get("hillshade-shadow-color"),Ct=yt.paint.get("hillshade-highlight-color"),ht=yt.paint.get("hillshade-accent-color"),It=yt.paint.get("hillshade-illumination-direction")*(Math.PI/180);yt.paint.get("hillshade-illumination-anchor")==="viewport"&&(It-=it.transform.angle);var Rt,qt,re,ne=!it.options.moving;return{u_matrix:it.transform.calculatePosMatrix(ot.tileID.toUnwrapped(),ne),u_image:0,u_latrange:(Rt=ot.tileID,qt=Math.pow(2,Rt.canonical.z),re=Rt.canonical.y,[new o.MercatorCoordinate(0,re/qt).toLngLat().lat,new o.MercatorCoordinate(0,(re+1)/qt).toLngLat().lat]),u_light:[yt.paint.get("hillshade-exaggeration"),It],u_shadow:dt,u_highlight:Ct,u_accent:ht}}(l,h,c);H.draw(E,L.TRIANGLES,m,b,w,zt.disabled,et,c.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}}function iu(l,h,c,m,b,w){var E=l.context,L=E.gl,F=h.dem;if(F&&F.data){var H=F.dim,et=F.stride,it=F.getPixels();if(E.activeTexture.set(L.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),h.demTexture=h.demTexture||l.getTileTexture(et),h.demTexture){var ot=h.demTexture;ot.update(it,{premultiply:!1}),ot.bind(L.NEAREST,L.CLAMP_TO_EDGE)}else h.demTexture=new o.Texture(E,it,L.RGBA,{premultiply:!1}),h.demTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE);E.activeTexture.set(L.TEXTURE0);var yt=h.fbo;if(!yt){var dt=new o.Texture(E,{width:H,height:H,data:null},L.RGBA);dt.bind(L.LINEAR,L.CLAMP_TO_EDGE),(yt=h.fbo=E.createFramebuffer(H,H,!0)).colorAttachment.set(dt.texture)}E.bindFramebuffer.set(yt.framebuffer),E.viewport.set([0,0,H,H]),l.useProgram("hillshadePrepare").draw(E,L.TRIANGLES,m,b,w,zt.disabled,function(Ct,ht){var It=ht.stride,Rt=o.create();return o.ortho(Rt,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(Rt,Rt,[0,-o.EXTENT,0]),{u_matrix:Rt,u_image:1,u_dimension:[It,It],u_zoom:Ct.overscaledZ,u_unpack:ht.getUnpackVector()}}(h.tileID,F),c.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments),h.needsHillshadePrepare=!1}}function xa(l,h,c,m,b){var w=m.paint.get("raster-fade-duration");if(w>0){var E=o.browser.now(),L=(E-l.timeAdded)/w,F=h?(E-h.timeAdded)/w:-1,H=c.getSource(),et=b.coveringZoomLevel({tileSize:H.tileSize,roundZoom:H.roundZoom}),it=!h||Math.abs(h.tileID.overscaledZ-et)>Math.abs(l.tileID.overscaledZ-et),ot=it&&l.refreshedUponExpiration?1:o.clamp(it?L:1-F,0,1);return l.refreshedUponExpiration&&L>=1&&(l.refreshedUponExpiration=!1),h?{opacity:1,mix:1-ot}:{opacity:ot,mix:0}}return{opacity:1,mix:0}}var Wt=new o.Color(1,0,0,1),ce=new o.Color(0,1,0,1),rn=new o.Color(0,0,1,1),zn=new o.Color(1,0,1,1),yr=new o.Color(0,1,1,1);function Bi(l,h,c,m){Nt(l,0,h+c/2,l.transform.width,c,m)}function fr(l,h,c,m){Nt(l,h-c/2,0,c,l.transform.height,m)}function Nt(l,h,c,m,b,w){var E=l.context,L=E.gl;L.enable(L.SCISSOR_TEST),L.scissor(h*o.browser.devicePixelRatio,c*o.browser.devicePixelRatio,m*o.browser.devicePixelRatio,b*o.browser.devicePixelRatio),E.clear({color:w}),L.disable(L.SCISSOR_TEST)}function he(l,h,c){var m=l.context,b=m.gl,w=c.posMatrix,E=l.useProgram("debug"),L=at.disabled,F=gt.disabled,H=l.colorModeForRenderPass();m.activeTexture.set(b.TEXTURE0),l.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),E.draw(m,b.LINE_STRIP,L,F,H,zt.disabled,aa(w,o.Color.red),"$debug",l.debugBuffer,l.tileBorderIndexBuffer,l.debugSegments);var et=h.getTileByID(c.key).latestRawTileData,it=Math.floor((et&&et.byteLength||0)/1024),ot=h.getTile(c).tileSize,yt=512/Math.min(ot,512)*(c.overscaledZ/l.transform.zoom)*.5,dt=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(dt+=" => "+c.overscaledZ),function(Ct,ht){Ct.initDebugOverlayCanvas();var It=Ct.debugOverlayCanvas,Rt=Ct.context.gl,qt=Ct.debugOverlayCanvas.getContext("2d");qt.clearRect(0,0,It.width,It.height),qt.shadowColor="white",qt.shadowBlur=2,qt.lineWidth=1.5,qt.strokeStyle="white",qt.textBaseline="top",qt.font="bold 36px Open Sans, sans-serif",qt.fillText(ht,5,5),qt.strokeText(ht,5,5),Ct.debugOverlayTexture.update(It),Ct.debugOverlayTexture.bind(Rt.LINEAR,Rt.CLAMP_TO_EDGE)}(l,dt+" "+it+"kb"),E.draw(m,b.TRIANGLES,L,F,Tt.alphaBlended,zt.disabled,aa(w,o.Color.transparent,yt),"$debug",l.debugBuffer,l.quadTriangleIndexBuffer,l.debugSegments)}var Jt={symbol:function(l,h,c,m,b){if(l.renderPass==="translucent"){var w=gt.disabled,E=l.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(L,F,H,et,it,ot,yt){for(var dt=F.transform,Ct=it==="map",ht=ot==="map",It=0,Rt=L;It<Rt.length;It+=1){var qt=Rt[It],re=et.getTile(qt),ne=re.getBucket(H);if(ne&&ne.text&&ne.text.segments.get().length){var ae=o.evaluateSizeForZoom(ne.textSizeData,dt.zoom),ve=vr(re,1,F.transform.zoom),Ce=Pr(qt.posMatrix,ht,Ct,F.transform,ve),Le=H.layout.get("icon-text-fit")!=="none"&&ne.hasIconData();if(ae){var We=Math.pow(2,dt.zoom-re.tileID.overscaledZ);$c(ne,Ct,ht,yt,o.symbolSize,dt,Ce,qt.posMatrix,We,ae,Le)}}}}(m,l,c,h,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),b),c.paint.get("icon-opacity").constantOr(1)!==0&&Ko(l,h,c,m,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),w,E),c.paint.get("text-opacity").constantOr(1)!==0&&Ko(l,h,c,m,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),w,E),h.map.showCollisionBoxes&&(fs(l,h,c,m,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),fs(l,h,c,m,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))}},circle:function(l,h,c,m){if(l.renderPass==="translucent"){var b=c.paint.get("circle-opacity"),w=c.paint.get("circle-stroke-width"),E=c.paint.get("circle-stroke-opacity"),L=c.layout.get("circle-sort-key").constantOr(1)!==void 0;if(b.constantOr(1)!==0||w.constantOr(1)!==0&&E.constantOr(1)!==0){for(var F=l.context,H=F.gl,et=l.depthModeForSublayer(0,at.ReadOnly),it=gt.disabled,ot=l.colorModeForRenderPass(),yt=[],dt=0;dt<m.length;dt++){var Ct=m[dt],ht=h.getTile(Ct),It=ht.getBucket(c);if(It){var Rt=It.programConfigurations.get(c.id),qt={programConfiguration:Rt,program:l.useProgram("circle",Rt),layoutVertexBuffer:It.layoutVertexBuffer,indexBuffer:It.indexBuffer,uniformValues:Ch(l,Ct,ht,c)};if(L)for(var re=0,ne=It.segments.get();re<ne.length;re+=1){var ae=ne[re];yt.push({segments:new o.SegmentVector([ae]),sortKey:ae.sortKey,state:qt})}else yt.push({segments:It.segments,sortKey:0,state:qt})}}L&&yt.sort(function(fn,Tn){return fn.sortKey-Tn.sortKey});for(var ve=0,Ce=yt;ve<Ce.length;ve+=1){var Le=Ce[ve],We=Le.state;We.program.draw(F,H.TRIANGLES,et,it,ot,zt.disabled,We.uniformValues,c.id,We.layoutVertexBuffer,We.indexBuffer,Le.segments,c.paint,l.transform.zoom,We.programConfiguration)}}}},heatmap:function(l,h,c,m){if(c.paint.get("heatmap-opacity")!==0)if(l.renderPass==="offscreen"){var b=l.context,w=b.gl,E=gt.disabled,L=new Tt([w.ONE,w.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(yt,dt,Ct){var ht=yt.gl;yt.activeTexture.set(ht.TEXTURE1),yt.viewport.set([0,0,dt.width/4,dt.height/4]);var It=Ct.heatmapFbo;if(It)ht.bindTexture(ht.TEXTURE_2D,It.colorAttachment.get()),yt.bindFramebuffer.set(It.framebuffer);else{var Rt=ht.createTexture();ht.bindTexture(ht.TEXTURE_2D,Rt),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_S,ht.CLAMP_TO_EDGE),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_T,ht.CLAMP_TO_EDGE),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MIN_FILTER,ht.LINEAR),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MAG_FILTER,ht.LINEAR),It=Ct.heatmapFbo=yt.createFramebuffer(dt.width/4,dt.height/4,!1),function(qt,re,ne,ae){var ve=qt.gl;ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,re.width/4,re.height/4,0,ve.RGBA,qt.extRenderToTextureHalfFloat?qt.extTextureHalfFloat.HALF_FLOAT_OES:ve.UNSIGNED_BYTE,null),ae.colorAttachment.set(ne)}(yt,dt,Rt,It)}})(b,l,c),b.clear({color:o.Color.transparent});for(var F=0;F<m.length;F++){var H=m[F];if(!h.hasRenderableParent(H)){var et=h.getTile(H),it=et.getBucket(c);if(it){var ot=it.programConfigurations.get(c.id);l.useProgram("heatmap",ot).draw(b,w.TRIANGLES,at.disabled,E,L,zt.disabled,el(H.posMatrix,et,l.transform.zoom,c.paint.get("heatmap-intensity")),c.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,c.paint,l.transform.zoom,ot)}}}b.viewport.set([0,0,l.width,l.height])}else l.renderPass==="translucent"&&(l.context.setColorMode(l.colorModeForRenderPass()),function(yt,dt){var Ct=yt.context,ht=Ct.gl,It=dt.heatmapFbo;if(It){Ct.activeTexture.set(ht.TEXTURE0),ht.bindTexture(ht.TEXTURE_2D,It.colorAttachment.get()),Ct.activeTexture.set(ht.TEXTURE1);var Rt=dt.colorRampTexture;Rt||(Rt=dt.colorRampTexture=new o.Texture(Ct,dt.colorRamp,ht.RGBA)),Rt.bind(ht.LINEAR,ht.CLAMP_TO_EDGE),yt.useProgram("heatmapTexture").draw(Ct,ht.TRIANGLES,at.disabled,gt.disabled,yt.colorModeForRenderPass(),zt.disabled,function(qt,re,ne,ae){var ve=o.create();o.ortho(ve,0,qt.width,qt.height,0,0,1);var Ce=qt.context.gl;return{u_matrix:ve,u_world:[Ce.drawingBufferWidth,Ce.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:re.paint.get("heatmap-opacity")}}(yt,dt),dt.id,yt.viewportBuffer,yt.quadTriangleIndexBuffer,yt.viewportSegments,dt.paint,yt.transform.zoom)}}(l,c))},line:function(l,h,c,m){if(l.renderPass==="translucent"){var b=c.paint.get("line-opacity"),w=c.paint.get("line-width");if(b.constantOr(1)!==0&&w.constantOr(1)!==0)for(var E=l.depthModeForSublayer(0,at.ReadOnly),L=l.colorModeForRenderPass(),F=c.paint.get("line-dasharray"),H=c.paint.get("line-pattern"),et=H.constantOr(1),it=c.paint.get("line-gradient"),ot=c.getCrossfadeParameters(),yt=et?"linePattern":F?"lineSDF":it?"lineGradient":"line",dt=l.context,Ct=dt.gl,ht=!0,It=0,Rt=m;It<Rt.length;It+=1){var qt=Rt[It],re=h.getTile(qt);if(!et||re.patternsLoaded()){var ne=re.getBucket(c);if(ne){var ae=ne.programConfigurations.get(c.id),ve=l.context.program.get(),Ce=l.useProgram(yt,ae),Le=ht||Ce.program!==ve,We=H.constantOr(null);if(We&&re.imageAtlas){var fn=re.imageAtlas,Tn=fn.patternPositions[We.to.toString()],En=fn.patternPositions[We.from.toString()];Tn&&En&&ae.setConstantPatternPositions(Tn,En)}var Oi=et?Eu(l,re,c,ot):F?Wc(l,re,c,F,ot):it?zi(l,re,c,ne.lineClipsArray.length):Sl(l,re,c);if(et)dt.activeTexture.set(Ct.TEXTURE0),re.imageAtlasTexture.bind(Ct.LINEAR,Ct.CLAMP_TO_EDGE),ae.updatePaintBuffers(ot);else if(F&&(Le||l.lineAtlas.dirty))dt.activeTexture.set(Ct.TEXTURE0),l.lineAtlas.bind(dt);else if(it){var tn=ne.gradients[c.id],Dn=tn.texture;if(c.gradientVersion!==tn.version){var ei=256;if(c.stepInterpolant){var Gn=h.getSource().maxzoom,Nn=qt.canonical.z===Gn?Math.ceil(1<<l.transform.maxZoom-qt.canonical.z):1;ei=o.clamp(o.nextPowerOfTwo(ne.maxLineLength/o.EXTENT*1024*Nn),256,dt.maxTextureSize)}tn.gradient=o.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:ei,image:tn.gradient||void 0,clips:ne.lineClipsArray}),tn.texture?tn.texture.update(tn.gradient):tn.texture=new o.Texture(dt,tn.gradient,Ct.RGBA),tn.version=c.gradientVersion,Dn=tn.texture}dt.activeTexture.set(Ct.TEXTURE0),Dn.bind(c.stepInterpolant?Ct.NEAREST:Ct.LINEAR,Ct.CLAMP_TO_EDGE)}Ce.draw(dt,Ct.TRIANGLES,E,l.stencilModeForClipping(qt),L,zt.disabled,Oi,c.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,c.paint,l.transform.zoom,ae,ne.layoutVertexBuffer2),ht=!1}}}}},fill:function(l,h,c,m){var b=c.paint.get("fill-color"),w=c.paint.get("fill-opacity");if(w.constantOr(1)!==0){var E=l.colorModeForRenderPass(),L=c.paint.get("fill-pattern"),F=l.opaquePassEnabledForLayer()&&!L.constantOr(1)&&b.constantOr(o.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(l.renderPass===F){var H=l.depthModeForSublayer(1,l.renderPass==="opaque"?at.ReadWrite:at.ReadOnly);pc(l,h,c,m,H,E,!1)}if(l.renderPass==="translucent"&&c.paint.get("fill-antialias")){var et=l.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,at.ReadOnly);pc(l,h,c,m,et,E,!0)}}},"fill-extrusion":function(l,h,c,m){var b=c.paint.get("fill-extrusion-opacity");if(b!==0&&l.renderPass==="translucent"){var w=new at(l.context.gl.LEQUAL,at.ReadWrite,l.depthRangeFor3D);if(b!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))Yc(l,h,c,m,w,gt.disabled,Tt.disabled),Yc(l,h,c,m,w,l.stencilModeFor3D(),l.colorModeForRenderPass());else{var E=l.colorModeForRenderPass();Yc(l,h,c,m,w,gt.disabled,E)}}},hillshade:function(l,h,c,m){if(l.renderPass==="offscreen"||l.renderPass==="translucent"){for(var b=l.context,w=l.depthModeForSublayer(0,at.ReadOnly),E=l.colorModeForRenderPass(),L=l.renderPass==="translucent"?l.stencilConfigForOverlap(m):[{},m],F=L[0],H=0,et=L[1];H<et.length;H+=1){var it=et[H],ot=h.getTile(it);ot.needsHillshadePrepare&&l.renderPass==="offscreen"?iu(l,ot,c,w,gt.disabled,E):l.renderPass==="translucent"&&kl(l,ot,c,w,F[it.overscaledZ],E)}b.viewport.set([0,0,l.width,l.height])}},raster:function(l,h,c,m){if(l.renderPass==="translucent"&&c.paint.get("raster-opacity")!==0&&m.length)for(var b=l.context,w=b.gl,E=h.getSource(),L=l.useProgram("raster"),F=l.colorModeForRenderPass(),H=E instanceof un?[{},m]:l.stencilConfigForOverlap(m),et=H[0],it=H[1],ot=it[it.length-1].overscaledZ,yt=!l.options.moving,dt=0,Ct=it;dt<Ct.length;dt+=1){var ht=Ct[dt],It=l.depthModeForSublayer(ht.overscaledZ-ot,c.paint.get("raster-opacity")===1?at.ReadWrite:at.ReadOnly,w.LESS),Rt=h.getTile(ht),qt=l.transform.calculatePosMatrix(ht.toUnwrapped(),yt);Rt.registerFadeDuration(c.paint.get("raster-fade-duration"));var re=h.findLoadedParent(ht,0),ne=xa(Rt,re,h,c,l.transform),ae=void 0,ve=void 0,Ce=c.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;b.activeTexture.set(w.TEXTURE0),Rt.texture.bind(Ce,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),b.activeTexture.set(w.TEXTURE1),re?(re.texture.bind(Ce,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),ae=Math.pow(2,re.tileID.overscaledZ-Rt.tileID.overscaledZ),ve=[Rt.tileID.canonical.x*ae%1,Rt.tileID.canonical.y*ae%1]):Rt.texture.bind(Ce,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var Le=Zc(qt,ve||[0,0],ae||1,ne,c);E instanceof un?L.draw(b,w.TRIANGLES,It,gt.disabled,F,zt.disabled,Le,c.id,E.boundsBuffer,l.quadTriangleIndexBuffer,E.boundsSegments):L.draw(b,w.TRIANGLES,It,et[ht.overscaledZ],F,zt.disabled,Le,c.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}},background:function(l,h,c){var m=c.paint.get("background-color"),b=c.paint.get("background-opacity");if(b!==0){var w=l.context,E=w.gl,L=l.transform,F=L.tileSize,H=c.paint.get("background-pattern");if(!l.isPatternMissing(H)){var et=!H&&m.a===1&&b===1&&l.opaquePassEnabledForLayer()?"opaque":"translucent";if(l.renderPass===et){var it=gt.disabled,ot=l.depthModeForSublayer(0,et==="opaque"?at.ReadWrite:at.ReadOnly),yt=l.colorModeForRenderPass(),dt=l.useProgram(H?"backgroundPattern":"background"),Ct=L.coveringTiles({tileSize:F});H&&(w.activeTexture.set(E.TEXTURE0),l.imageManager.bind(l.context));for(var ht=c.getCrossfadeParameters(),It=0,Rt=Ct;It<Rt.length;It+=1){var qt=Rt[It],re=l.transform.calculatePosMatrix(qt.toUnwrapped()),ne=H?ku(re,b,l,H,{tileID:qt,tileSize:F},ht):Ts(re,b,m);dt.draw(w,E.TRIANGLES,ot,it,yt,zt.disabled,ne,c.id,l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments)}}}}},debug:function(l,h,c){for(var m=0;m<c.length;m++)he(l,h,c[m])},custom:function(l,h,c){var m=l.context,b=c.implementation;if(l.renderPass==="offscreen"){var w=b.prerender;w&&(l.setCustomLayerDefaults(),m.setColorMode(l.colorModeForRenderPass()),w.call(b,m.gl,l.transform.customLayerMatrix()),m.setDirty(),l.setBaseState())}else if(l.renderPass==="translucent"){l.setCustomLayerDefaults(),m.setColorMode(l.colorModeForRenderPass()),m.setStencilMode(gt.disabled);var E=b.renderingMode==="3d"?new at(l.context.gl.LEQUAL,at.ReadWrite,l.depthRangeFor3D):l.depthModeForSublayer(0,at.ReadOnly);m.setDepthMode(E),b.render(m.gl,l.transform.customLayerMatrix()),m.setDirty(),l.setBaseState(),m.bindFramebuffer.set(null)}}},Ae=function(l,h){this.context=new tt(l),this.transform=h,this._tileTextures={},this.setup(),this.numSublayers=_t.maxUnderzooming+_t.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new bl,this.gpuTimers={}};Ae.prototype.resize=function(l,h){if(this.width=l*o.browser.devicePixelRatio,this.height=h*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var c=0,m=this.style._order;c<m.length;c+=1)this.style._layers[m[c]].resize()},Ae.prototype.setup=function(){var l=this.context,h=new o.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(o.EXTENT,0),h.emplaceBack(0,o.EXTENT),h.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(h,$r.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var c=new o.StructArrayLayout2i4;c.emplaceBack(0,0),c.emplaceBack(o.EXTENT,0),c.emplaceBack(0,o.EXTENT),c.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(c,$r.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var m=new o.StructArrayLayout4i8;m.emplaceBack(0,0,0,0),m.emplaceBack(o.EXTENT,0,o.EXTENT,0),m.emplaceBack(0,o.EXTENT,0,o.EXTENT),m.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(m,Qn.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var b=new o.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(b,$r.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var w=new o.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(w);var E=new o.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(E),this.emptyTexture=new o.Texture(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);var L=this.context.gl;this.stencilClearMode=new gt({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO)},Ae.prototype.clearStencil=function(){var l=this.context,h=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var c=o.create();o.ortho(c,0,this.width,this.height,0,0,1),o.scale(c,c,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,h.TRIANGLES,at.disabled,this.stencilClearMode,Tt.disabled,zt.disabled,Uo(c),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ae.prototype._renderTileClippingMasks=function(l,h){if(this.currentStencilSource!==l.source&&l.isTileClipped()&&h&&h.length){this.currentStencilSource=l.source;var c=this.context,m=c.gl;this.nextStencilID+h.length>256&&this.clearStencil(),c.setColorMode(Tt.disabled),c.setDepthMode(at.disabled);var b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,E=h;w<E.length;w+=1){var L=E[w],F=this._tileClippingMaskIDs[L.key]=this.nextStencilID++;b.draw(c,m.TRIANGLES,at.disabled,new gt({func:m.ALWAYS,mask:0},F,255,m.KEEP,m.KEEP,m.REPLACE),Tt.disabled,zt.disabled,Uo(L.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ae.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var l=this.nextStencilID++,h=this.context.gl;return new gt({func:h.NOTEQUAL,mask:255},l,255,h.KEEP,h.KEEP,h.REPLACE)},Ae.prototype.stencilModeForClipping=function(l){var h=this.context.gl;return new gt({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,h.KEEP,h.KEEP,h.REPLACE)},Ae.prototype.stencilConfigForOverlap=function(l){var h,c=this.context.gl,m=l.sort(function(F,H){return H.overscaledZ-F.overscaledZ}),b=m[m.length-1].overscaledZ,w=m[0].overscaledZ-b+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var E={},L=0;L<w;L++)E[L+b]=new gt({func:c.GEQUAL,mask:255},L+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=w,[E,m]}return[(h={},h[b]=gt.disabled,h),m]},Ae.prototype.colorModeForRenderPass=function(){var l=this.context.gl;return this._showOverdrawInspector?new Tt([l.CONSTANT_COLOR,l.ONE],new o.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Tt.unblended:Tt.alphaBlended},Ae.prototype.depthModeForSublayer=function(l,h,c){if(!this.opaquePassEnabledForLayer())return at.disabled;var m=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new at(c||this.context.gl.LEQUAL,h,[m,m])},Ae.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ae.prototype.render=function(l,h){var c=this;this.style=l,this.options=h,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var m=this.style._order,b=this.style.sourceCaches;for(var w in b){var E=b[w];E.used&&E.prepare(this.context)}var L,F,H={},et={},it={};for(var ot in b){var yt=b[ot];H[ot]=yt.getVisibleCoordinates(),et[ot]=H[ot].slice().reverse(),it[ot]=yt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var dt=0;dt<m.length;dt++)if(this.style._layers[m[dt]].is3D()){this.opaquePassCutoff=dt;break}this.renderPass="offscreen";for(var Ct=0,ht=m;Ct<ht.length;Ct+=1){var It=this.style._layers[ht[Ct]];if(It.hasOffscreenPass()&&!It.isHidden(this.transform.zoom)){var Rt=et[It.source];(It.type==="custom"||Rt.length)&&this.renderLayer(this,b[It.source],It,Rt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){var qt=this.style._layers[m[this.currentLayer]],re=b[qt.source],ne=H[qt.source];this._renderTileClippingMasks(qt,ne),this.renderLayer(this,re,qt,ne)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){var ae=this.style._layers[m[this.currentLayer]],ve=b[ae.source],Ce=(ae.type==="symbol"?it:et)[ae.source];this._renderTileClippingMasks(ae,H[ae.source]),this.renderLayer(this,ve,ae,Ce)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Le){Le.source&&!Le.isHidden(c.transform.zoom)&&(Le.source!==(F&&F.id)&&(F=c.style.sourceCaches[Le.source]),(!L||L.getSource().maxzoom<F.getSource().maxzoom)&&(L=F))}),L&&Jt.debug(this,L,L.getVisibleCoordinates())),this.options.showPadding&&function(Le){var We=Le.transform.padding;Bi(Le,Le.transform.height-(We.top||0),3,Wt),Bi(Le,We.bottom||0,3,ce),fr(Le,We.left||0,3,rn),fr(Le,Le.transform.width-(We.right||0),3,zn);var fn=Le.transform.centerPoint;(function(Tn,En,Oi,tn){Nt(Tn,En-1,Oi-10,2,20,tn),Nt(Tn,En-10,Oi-1,20,2,tn)})(Le,fn.x,Le.transform.height-fn.y,yr)}(this),this.context.setDefault()},Ae.prototype.renderLayer=function(l,h,c,m){c.isHidden(this.transform.zoom)||(c.type==="background"||c.type==="custom"||m.length)&&(this.id=c.id,this.gpuTimingStart(c),Jt[c.type](l,h,c,m,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ae.prototype.gpuTimingStart=function(l){if(this.options.gpuTiming){var h=this.context.extTimerQuery,c=this.gpuTimers[l.id];c||(c=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),c.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,c.query)}},Ae.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}},Ae.prototype.collectGpuTimers=function(){var l=this.gpuTimers;return this.gpuTimers={},l},Ae.prototype.queryGpuTimers=function(l){var h={};for(var c in l){var m=l[c],b=this.context.extTimerQuery,w=b.getQueryObjectEXT(m.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(m.query),h[c]=w}return h},Ae.prototype.translatePosMatrix=function(l,h,c,m,b){if(!c[0]&&!c[1])return l;var w=b?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(w){var E=Math.sin(w),L=Math.cos(w);c=[c[0]*L-c[1]*E,c[0]*E+c[1]*L]}var F=[b?c[0]:vr(h,c[0],this.transform.zoom),b?c[1]:vr(h,c[1],this.transform.zoom),0],H=new Float32Array(16);return o.translate(H,l,F),H},Ae.prototype.saveTileTexture=function(l){var h=this._tileTextures[l.size[0]];h?h.push(l):this._tileTextures[l.size[0]]=[l]},Ae.prototype.getTileTexture=function(l){var h=this._tileTextures[l];return h&&h.length>0?h.pop():null},Ae.prototype.isPatternMissing=function(l){if(!l)return!1;if(!l.from||!l.to)return!0;var h=this.imageManager.getPattern(l.from.toString()),c=this.imageManager.getPattern(l.to.toString());return!h||!c},Ae.prototype.useProgram=function(l,h){this.cache=this.cache||{};var c=""+l+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[c]||(this.cache[c]=new Gc(this.context,l,Vr[l],h,nl[l],this._showOverdrawInspector)),this.cache[c]},Ae.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ae.prototype.setBaseState=function(){var l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)},Ae.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ae.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var jn=function(l,h){this.points=l,this.planes=h};jn.fromInvProjectionMatrix=function(l,h,c){var m=Math.pow(2,c),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(E){return o.transformMat4([],E,l)}).map(function(E){return o.scale$1([],E,1/E[3]/h*m)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(E){var L=o.sub([],b[E[0]],b[E[1]]),F=o.sub([],b[E[2]],b[E[1]]),H=o.normalize([],o.cross([],L,F)),et=-o.dot(H,b[E[1]]);return H.concat(et)});return new jn(b,w)};var li=function(l,h){this.min=l,this.max=h,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};li.prototype.quadrant=function(l){for(var h=[l%2==0,l<2],c=o.clone$2(this.min),m=o.clone$2(this.max),b=0;b<h.length;b++)c[b]=h[b]?this.min[b]:this.center[b],m[b]=h[b]?this.center[b]:this.max[b];return m[2]=this.max[2],new li(c,m)},li.prototype.distanceX=function(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]},li.prototype.distanceY=function(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]},li.prototype.intersects=function(l){for(var h=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],c=!0,m=0;m<l.planes.length;m++){for(var b=l.planes[m],w=0,E=0;E<h.length;E++)w+=o.dot$1(b,h[E])>=0;if(w===0)return 0;w!==h.length&&(c=!1)}if(c)return 2;for(var L=0;L<3;L++){for(var F=Number.MAX_VALUE,H=-Number.MAX_VALUE,et=0;et<l.points.length;et++){var it=l.points[et][L]-this.min[L];F=Math.min(F,it),H=Math.max(H,it)}if(H<0||F>this.max[L]-this.min[L])return 0}return 1};var Ei=function(l,h,c,m){if(l===void 0&&(l=0),h===void 0&&(h=0),c===void 0&&(c=0),m===void 0&&(m=0),isNaN(l)||l<0||isNaN(h)||h<0||isNaN(c)||c<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=h,this.left=c,this.right=m};Ei.prototype.interpolate=function(l,h,c){return h.top!=null&&l.top!=null&&(this.top=o.number(l.top,h.top,c)),h.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,h.bottom,c)),h.left!=null&&l.left!=null&&(this.left=o.number(l.left,h.left,c)),h.right!=null&&l.right!=null&&(this.right=o.number(l.right,h.right,c)),this},Ei.prototype.getCenter=function(l,h){var c=o.clamp((this.left+l-this.right)/2,0,l),m=o.clamp((this.top+h-this.bottom)/2,0,h);return new o.Point(c,m)},Ei.prototype.equals=function(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right},Ei.prototype.clone=function(){return new Ei(this.top,this.bottom,this.left,this.right)},Ei.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var mn=function(l,h,c,m,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||b,this._minZoom=l||0,this._maxZoom=h||22,this._minPitch=c??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ei,this._posMatrixCache={},this._alignedPosMatrixCache={}},Gi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};mn.prototype.clone=function(){var l=new mn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l},Gi.minZoom.get=function(){return this._minZoom},Gi.minZoom.set=function(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))},Gi.maxZoom.get=function(){return this._maxZoom},Gi.maxZoom.set=function(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))},Gi.minPitch.get=function(){return this._minPitch},Gi.minPitch.set=function(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))},Gi.maxPitch.get=function(){return this._maxPitch},Gi.maxPitch.set=function(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))},Gi.renderWorldCopies.get=function(){return this._renderWorldCopies},Gi.renderWorldCopies.set=function(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l},Gi.worldSize.get=function(){return this.tileSize*this.scale},Gi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Gi.size.get=function(){return new o.Point(this.width,this.height)},Gi.bearing.get=function(){return-this.angle/Math.PI*180},Gi.bearing.set=function(l){var h=-o.wrap(l,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Gi.pitch.get=function(){return this._pitch/Math.PI*180},Gi.pitch.set=function(l){var h=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())},Gi.fov.get=function(){return this._fov/Math.PI*180},Gi.fov.set=function(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())},Gi.zoom.get=function(){return this._zoom},Gi.zoom.set=function(l){var h=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.scale=this.zoomScale(h),this.tileZoom=Math.floor(h),this.zoomFraction=h-this.tileZoom,this._constrain(),this._calcMatrices())},Gi.center.get=function(){return this._center},Gi.center.set=function(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())},Gi.padding.get=function(){return this._edgeInsets.toJSON()},Gi.padding.set=function(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())},Gi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},mn.prototype.isPaddingEqual=function(l){return this._edgeInsets.equals(l)},mn.prototype.interpolatePadding=function(l,h,c){this._unmodified=!1,this._edgeInsets.interpolate(l,h,c),this._constrain(),this._calcMatrices()},mn.prototype.coveringZoomLevel=function(l){var h=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,h)},mn.prototype.getVisibleUnwrappedCoordinates=function(l){var h=[new o.UnwrappedTileID(0,l)];if(this._renderWorldCopies)for(var c=this.pointCoordinate(new o.Point(0,0)),m=this.pointCoordinate(new o.Point(this.width,0)),b=this.pointCoordinate(new o.Point(this.width,this.height)),w=this.pointCoordinate(new o.Point(0,this.height)),E=Math.floor(Math.min(c.x,m.x,b.x,w.x)),L=Math.floor(Math.max(c.x,m.x,b.x,w.x)),F=E-1;F<=L+1;F++)F!==0&&h.push(new o.UnwrappedTileID(F,l));return h},mn.prototype.coveringTiles=function(l){var h=this.coveringZoomLevel(l),c=h;if(l.minzoom!==void 0&&h<l.minzoom)return[];l.maxzoom!==void 0&&h>l.maxzoom&&(h=l.maxzoom);var m=o.MercatorCoordinate.fromLngLat(this.center),b=Math.pow(2,h),w=[b*m.x,b*m.y,0],E=jn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h),L=l.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(L=h);var F=function(Le){return{aabb:new li([Le*b,0,0],[(Le+1)*b,b,0]),zoom:0,x:0,y:0,wrap:Le,fullyVisible:!1}},H=[],et=[],it=h,ot=l.reparseOverscaled?c:h;if(this._renderWorldCopies)for(var yt=1;yt<=3;yt++)H.push(F(-yt)),H.push(F(yt));for(H.push(F(0));H.length>0;){var dt=H.pop(),Ct=dt.x,ht=dt.y,It=dt.fullyVisible;if(!It){var Rt=dt.aabb.intersects(E);if(Rt===0)continue;It=Rt===2}var qt=dt.aabb.distanceX(w),re=dt.aabb.distanceY(w),ne=Math.max(Math.abs(qt),Math.abs(re));if(dt.zoom===it||ne>3+(1<<it-dt.zoom)-2&&dt.zoom>=L)et.push({tileID:new o.OverscaledTileID(dt.zoom===it?ot:dt.zoom,dt.wrap,dt.zoom,Ct,ht),distanceSq:o.sqrLen([w[0]-.5-Ct,w[1]-.5-ht])});else for(var ae=0;ae<4;ae++){var ve=(Ct<<1)+ae%2,Ce=(ht<<1)+(ae>>1);H.push({aabb:dt.aabb.quadrant(ae),zoom:dt.zoom+1,x:ve,y:Ce,wrap:dt.wrap,fullyVisible:It})}}return et.sort(function(Le,We){return Le.distanceSq-We.distanceSq}).map(function(Le){return Le.tileID})},mn.prototype.resize=function(l,h){this.width=l,this.height=h,this.pixelsToGLUnits=[2/l,-2/h],this._constrain(),this._calcMatrices()},Gi.unmodified.get=function(){return this._unmodified},mn.prototype.zoomScale=function(l){return Math.pow(2,l)},mn.prototype.scaleZoom=function(l){return Math.log(l)/Math.LN2},mn.prototype.project=function(l){var h=o.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(l.lng)*this.worldSize,o.mercatorYfromLat(h)*this.worldSize)},mn.prototype.unproject=function(l){return new o.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()},Gi.point.get=function(){return this.project(this.center)},mn.prototype.setLocationAtPoint=function(l,h){var c=this.pointCoordinate(h),m=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(l),w=new o.MercatorCoordinate(b.x-(c.x-m.x),b.y-(c.y-m.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},mn.prototype.locationPoint=function(l){return this.coordinatePoint(this.locationCoordinate(l))},mn.prototype.pointLocation=function(l){return this.coordinateLocation(this.pointCoordinate(l))},mn.prototype.locationCoordinate=function(l){return o.MercatorCoordinate.fromLngLat(l)},mn.prototype.coordinateLocation=function(l){return l.toLngLat()},mn.prototype.pointCoordinate=function(l){var h=[l.x,l.y,0,1],c=[l.x,l.y,1,1];o.transformMat4(h,h,this.pixelMatrixInverse),o.transformMat4(c,c,this.pixelMatrixInverse);var m=h[3],b=c[3],w=h[1]/m,E=c[1]/b,L=h[2]/m,F=c[2]/b,H=L===F?0:(0-L)/(F-L);return new o.MercatorCoordinate(o.number(h[0]/m,c[0]/b,H)/this.worldSize,o.number(w,E,H)/this.worldSize)},mn.prototype.coordinatePoint=function(l){var h=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(h,h,this.pixelMatrix),new o.Point(h[0]/h[3],h[1]/h[3])},mn.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},mn.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},mn.prototype.setMaxBounds=function(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},mn.prototype.calculatePosMatrix=function(l,h){h===void 0&&(h=!1);var c=l.key,m=h?this._alignedPosMatrixCache:this._posMatrixCache;if(m[c])return m[c];var b=l.canonical,w=this.worldSize/this.zoomScale(b.z),E=b.x+Math.pow(2,b.z)*l.wrap,L=o.identity(new Float64Array(16));return o.translate(L,L,[E*w,b.y*w,0]),o.scale(L,L,[w/o.EXTENT,w/o.EXTENT,1]),o.multiply(L,h?this.alignedProjMatrix:this.projMatrix,L),m[c]=new Float32Array(L),m[c]},mn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},mn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var l,h,c,m,b=-90,w=90,E=-180,L=180,F=this.size,H=this._unmodified;if(this.latRange){var et=this.latRange;b=o.mercatorYfromLat(et[1])*this.worldSize,l=(w=o.mercatorYfromLat(et[0])*this.worldSize)-b<F.y?F.y/(w-b):0}if(this.lngRange){var it=this.lngRange;E=o.mercatorXfromLng(it[0])*this.worldSize,h=(L=o.mercatorXfromLng(it[1])*this.worldSize)-E<F.x?F.x/(L-E):0}var ot=this.point,yt=Math.max(h||0,l||0);if(yt)return this.center=this.unproject(new o.Point(h?(L+E)/2:ot.x,l?(w+b)/2:ot.y)),this.zoom+=this.scaleZoom(yt),this._unmodified=H,void(this._constraining=!1);if(this.latRange){var dt=ot.y,Ct=F.y/2;dt-Ct<b&&(m=b+Ct),dt+Ct>w&&(m=w-Ct)}if(this.lngRange){var ht=ot.x,It=F.x/2;ht-It<E&&(c=E+It),ht+It>L&&(c=L-It)}c===void 0&&m===void 0||(this.center=this.unproject(new o.Point(c!==void 0?c:ot.x,m!==void 0?m:ot.y))),this._unmodified=H,this._constraining=!1}},mn.prototype._calcMatrices=function(){if(this.height){var l=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var h=Math.PI/2+this._pitch,c=this._fov*(.5+l.y/this.height),m=Math.sin(c)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-h-c,.01,Math.PI-.01)),b=this.point,w=b.x,E=b.y,L=1.01*(Math.cos(Math.PI/2-this._pitch)*m+this.cameraToCenterDistance),F=this.height/50,H=new Float64Array(16);o.perspective(H,this._fov,this.width/this.height,F,L),H[8]=2*-l.x/this.width,H[9]=2*l.y/this.height,o.scale(H,H,[1,-1,1]),o.translate(H,H,[0,0,-this.cameraToCenterDistance]),o.rotateX(H,H,this._pitch),o.rotateZ(H,H,this.angle),o.translate(H,H,[-w,-E,0]),this.mercatorMatrix=o.scale([],H,[this.worldSize,this.worldSize,this.worldSize]),o.scale(H,H,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=H,this.invProjMatrix=o.invert([],this.projMatrix);var et=this.width%2/2,it=this.height%2/2,ot=Math.cos(this.angle),yt=Math.sin(this.angle),dt=w-Math.round(w)+ot*et+yt*it,Ct=E-Math.round(E)+ot*it+yt*et,ht=new Float64Array(H);if(o.translate(ht,ht,[dt>.5?dt-1:dt,Ct>.5?Ct-1:Ct,0]),this.alignedProjMatrix=ht,H=o.create(),o.scale(H,H,[this.width/2,-this.height/2,1]),o.translate(H,H,[1,-1,0]),this.labelPlaneMatrix=H,H=o.create(),o.scale(H,H,[1,-1,1]),o.translate(H,H,[-1,-1,0]),o.scale(H,H,[2/this.width,2/this.height,1]),this.glCoordMatrix=H,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(H=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=H,this._posMatrixCache={},this._alignedPosMatrixCache={}}},mn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var l=this.pointCoordinate(new o.Point(0,0)),h=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance},mn.prototype.getCameraPoint=function(){var l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,l))},mn.prototype.getCameraQueryGeometry=function(l){var h=this.getCameraPoint();if(l.length===1)return[l[0],h];for(var c=h.x,m=h.y,b=h.x,w=h.y,E=0,L=l;E<L.length;E+=1){var F=L[E];c=Math.min(c,F.x),m=Math.min(m,F.y),b=Math.max(b,F.x),w=Math.max(w,F.y)}return[new o.Point(c,m),new o.Point(b,m),new o.Point(b,w),new o.Point(c,w),new o.Point(c,m)]},Object.defineProperties(mn.prototype,Gi);var Qo=function(l){var h,c,m,b;this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(h=this._updateHashUnthrottled.bind(this),c=!1,m=null,b=function(){m=null,c&&(h(),m=setTimeout(b,300),c=!1)},function(){return c=!0,m||b(),m})};Qo.prototype.addTo=function(l){return this._map=l,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Qo.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Qo.prototype.getHashString=function(l){var h=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,m=Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,m),w=Math.round(h.lng*b)/b,E=Math.round(h.lat*b)/b,L=this._map.getBearing(),F=this._map.getPitch(),H="";if(H+=l?"/"+w+"/"+E+"/"+c:c+"/"+E+"/"+w,(L||F)&&(H+="/"+Math.round(10*L)/10),F&&(H+="/"+Math.round(F)),this._hashName){var et=this._hashName,it=!1,ot=o.window.location.hash.slice(1).split("&").map(function(yt){var dt=yt.split("=")[0];return dt===et?(it=!0,dt+"="+H):yt}).filter(function(yt){return yt});return it||ot.push(et+"="+H),"#"+ot.join("&")}return"#"+H},Qo.prototype._getCurrentHash=function(){var l,h=this,c=o.window.location.hash.replace("#","");return this._hashName?(c.split("&").map(function(m){return m.split("=")}).forEach(function(m){m[0]===h._hashName&&(l=m)}),(l&&l[1]||"").split("/")):c.split("/")},Qo.prototype._onHashChange=function(){var l=this._getCurrentHash();if(l.length>=3&&!l.some(function(c){return isNaN(c)})){var h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:h,pitch:+(l[4]||0)}),!0}return!1},Qo.prototype._updateHashUnthrottled=function(){var l=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,l)}catch{}};var io={linearity:.3,easing:o.bezier(0,0,.3,1)},Oa=o.extend({deceleration:2500,maxSpeed:1400},io),Lu=o.extend({deceleration:20,maxSpeed:1400},io),Du=o.extend({deceleration:1e3,maxSpeed:360},io),Xc=o.extend({deceleration:1e3,maxSpeed:90},io),Yi=function(l){this._map=l,this.clear()};function Ln(l,h){(!l.duration||l.duration<h.duration)&&(l.duration=h.duration,l.easing=h.easing)}function Ya(l,h,c){var m=c.maxSpeed,b=c.linearity,w=c.deceleration,E=o.clamp(l*b/(h/1e3),-m,m),L=Math.abs(E)/(w*b);return{easing:c.easing,duration:1e3*L,amount:E*(L/2)}}Yi.prototype.clear=function(){this._inertiaBuffer=[]},Yi.prototype.record=function(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:l})},Yi.prototype._drainInertiaBuffer=function(){for(var l=this._inertiaBuffer,h=o.browser.now();l.length>0&&h-l[0].time>160;)l.shift()},Yi.prototype._onMoveEnd=function(l){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var h={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},c=0,m=this._inertiaBuffer;c<m.length;c+=1){var b=m[c].settings;h.zoom+=b.zoomDelta||0,h.bearing+=b.bearingDelta||0,h.pitch+=b.pitchDelta||0,b.panDelta&&h.pan._add(b.panDelta),b.around&&(h.around=b.around),b.pinchAround&&(h.pinchAround=b.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(h.pan.mag()){var L=Ya(h.pan.mag(),w,o.extend({},Oa,l||{}));E.offset=h.pan.mult(L.amount/h.pan.mag()),E.center=this._map.transform.center,Ln(E,L)}if(h.zoom){var F=Ya(h.zoom,w,Lu);E.zoom=this._map.transform.zoom+F.amount,Ln(E,F)}if(h.bearing){var H=Ya(h.bearing,w,Du);E.bearing=this._map.transform.bearing+o.clamp(H.amount,-179,179),Ln(E,H)}if(h.pitch){var et=Ya(h.pitch,w,Xc);E.pitch=this._map.transform.pitch+et.amount,Ln(E,et)}if(E.zoom||E.bearing){var it=h.pinchAround===void 0?h.around:h.pinchAround;E.around=it?this._map.unproject(it):this._map.getCenter()}return this.clear(),o.extend(E,{noMoveStart:!0})}};var pr=function(l){function h(m,b,w,E){E===void 0&&(E={});var L=_.mousePos(b.getCanvasContainer(),w),F=b.unproject(L);l.call(this,m,o.extend({point:L,lngLat:F,originalEvent:w},E)),this._defaultPrevented=!1,this.target=b}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var c={defaultPrevented:{configurable:!0}};return h.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(h.prototype,c),h}(o.Event),ks=function(l){function h(m,b,w){var E=m==="touchend"?w.changedTouches:w.touches,L=_.touchPos(b.getCanvasContainer(),E),F=L.map(function(it){return b.unproject(it)}),H=L.reduce(function(it,ot,yt,dt){return it.add(ot.div(dt.length))},new o.Point(0,0)),et=b.unproject(H);l.call(this,m,{points:L,point:H,lngLats:F,lngLat:et,originalEvent:w}),this._defaultPrevented=!1}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var c={defaultPrevented:{configurable:!0}};return h.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(h.prototype,c),h}(o.Event),Fa=function(l){function h(m,b,w){l.call(this,m,{originalEvent:w}),this._defaultPrevented=!1}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var c={defaultPrevented:{configurable:!0}};return h.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(h.prototype,c),h}(o.Event),lr=function(l,h){this._map=l,this._clickTolerance=h.clickTolerance};lr.prototype.reset=function(){delete this._mousedownPos},lr.prototype.wheel=function(l){return this._firePreventable(new Fa(l.type,this._map,l))},lr.prototype.mousedown=function(l,h){return this._mousedownPos=h,this._firePreventable(new pr(l.type,this._map,l))},lr.prototype.mouseup=function(l){this._map.fire(new pr(l.type,this._map,l))},lr.prototype.click=function(l,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new pr(l.type,this._map,l))},lr.prototype.dblclick=function(l){return this._firePreventable(new pr(l.type,this._map,l))},lr.prototype.mouseover=function(l){this._map.fire(new pr(l.type,this._map,l))},lr.prototype.mouseout=function(l){this._map.fire(new pr(l.type,this._map,l))},lr.prototype.touchstart=function(l){return this._firePreventable(new ks(l.type,this._map,l))},lr.prototype.touchmove=function(l){this._map.fire(new ks(l.type,this._map,l))},lr.prototype.touchend=function(l){this._map.fire(new ks(l.type,this._map,l))},lr.prototype.touchcancel=function(l){this._map.fire(new ks(l.type,this._map,l))},lr.prototype._firePreventable=function(l){if(this._map.fire(l),l.defaultPrevented)return{}},lr.prototype.isEnabled=function(){return!0},lr.prototype.isActive=function(){return!1},lr.prototype.enable=function(){},lr.prototype.disable=function(){};var Ye=function(l){this._map=l};Ye.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ye.prototype.mousemove=function(l){this._map.fire(new pr(l.type,this._map,l))},Ye.prototype.mousedown=function(){this._delayContextMenu=!0},Ye.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new pr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ye.prototype.contextmenu=function(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new pr(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()},Ye.prototype.isEnabled=function(){return!0},Ye.prototype.isActive=function(){return!1},Ye.prototype.enable=function(){},Ye.prototype.disable=function(){};var ro=function(l,h){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=h.clickTolerance||1};function ba(l,h){for(var c={},m=0;m<l.length;m++)c[l[m].identifier]=h[m];return c}ro.prototype.isEnabled=function(){return!!this._enabled},ro.prototype.isActive=function(){return!!this._active},ro.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ro.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ro.prototype.mousedown=function(l,h){this.isEnabled()&&l.shiftKey&&l.button===0&&(_.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)},ro.prototype.mousemoveWindow=function(l,h){if(this._active){var c=h;if(!(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)){var m=this._startPos;this._lastPos=c,this._box||(this._box=_.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));var b=Math.min(m.x,c.x),w=Math.max(m.x,c.x),E=Math.min(m.y,c.y),L=Math.max(m.y,c.y);_.setTransform(this._box,"translate("+b+"px,"+E+"px)"),this._box.style.width=w-b+"px",this._box.style.height=L-E+"px"}}},ro.prototype.mouseupWindow=function(l,h){var c=this;if(this._active&&l.button===0){var m=this._startPos,b=h;if(this.reset(),_.suppressClick(),m.x!==b.x||m.y!==b.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:function(w){return w.fitScreenCoordinates(m,b,c._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",l)}},ro.prototype.keydown=function(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))},ro.prototype.blur=function(){this.reset()},ro.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos},ro.prototype._fireEvent=function(l,h){return this._map.fire(new o.Event(l,{originalEvent:h}))};var Aa=function(l){this.reset(),this.numTouches=l.numTouches};Aa.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Aa.prototype.touchstart=function(l,h,c){(this.centroid||c.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),c.length===this.numTouches&&(this.centroid=function(m){for(var b=new o.Point(0,0),w=0,E=m;w<E.length;w+=1)b._add(E[w]);return b.div(m.length)}(h),this.touches=ba(c,h)))},Aa.prototype.touchmove=function(l,h,c){if(!this.aborted&&this.centroid){var m=ba(c,h);for(var b in this.touches){var w=m[b];(!w||w.dist(this.touches[b])>30)&&(this.aborted=!0)}}},Aa.prototype.touchend=function(l,h,c){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),c.length===0){var m=!this.aborted&&this.centroid;if(this.reset(),m)return m}};var Lo=function(l){this.singleTap=new Aa(l),this.numTaps=l.numTaps,this.reset()};Lo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Lo.prototype.touchstart=function(l,h,c){this.singleTap.touchstart(l,h,c)},Lo.prototype.touchmove=function(l,h,c){this.singleTap.touchmove(l,h,c)},Lo.prototype.touchend=function(l,h,c){var m=this.singleTap.touchend(l,h,c);if(m){var b=l.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(m)<30;if(b&&w||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}};var Do=function(){this._zoomIn=new Lo({numTouches:1,numTaps:2}),this._zoomOut=new Lo({numTouches:2,numTaps:1}),this.reset()};Do.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Do.prototype.touchstart=function(l,h,c){this._zoomIn.touchstart(l,h,c),this._zoomOut.touchstart(l,h,c)},Do.prototype.touchmove=function(l,h,c){this._zoomIn.touchmove(l,h,c),this._zoomOut.touchmove(l,h,c)},Do.prototype.touchend=function(l,h,c){var m=this,b=this._zoomIn.touchend(l,h,c),w=this._zoomOut.touchend(l,h,c);return b?(this._active=!0,l.preventDefault(),setTimeout(function(){return m.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(b)},{originalEvent:l})}}):w?(this._active=!0,l.preventDefault(),setTimeout(function(){return m.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(w)},{originalEvent:l})}}):void 0},Do.prototype.touchcancel=function(){this.reset()},Do.prototype.enable=function(){this._enabled=!0},Do.prototype.disable=function(){this._enabled=!1,this.reset()},Do.prototype.isEnabled=function(){return this._enabled},Do.prototype.isActive=function(){return this._active};var ru={0:1,2:2},Be=function(l){this.reset(),this._clickTolerance=l.clickTolerance||1};Be.prototype.blur=function(){this.reset()},Be.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Be.prototype._correctButton=function(l,h){return!1},Be.prototype._move=function(l,h){return{}},Be.prototype.mousedown=function(l,h){if(!this._lastPoint){var c=_.mouseButton(l);this._correctButton(l,c)&&(this._lastPoint=h,this._eventButton=c)}},Be.prototype.mousemoveWindow=function(l,h){var c=this._lastPoint;if(c){if(l.preventDefault(),function(m,b){var w=ru[b];return m.buttons===void 0||(m.buttons&w)!==w}(l,this._eventButton))this.reset();else if(this._moved||!(h.dist(c)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(c,h)}},Be.prototype.mouseupWindow=function(l){this._lastPoint&&_.mouseButton(l)===this._eventButton&&(this._moved&&_.suppressClick(),this.reset())},Be.prototype.enable=function(){this._enabled=!0},Be.prototype.disable=function(){this._enabled=!1,this.reset()},Be.prototype.isEnabled=function(){return this._enabled},Be.prototype.isActive=function(){return this._active};var rl=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.mousedown=function(c,m){l.prototype.mousedown.call(this,c,m),this._lastPoint&&(this._active=!0)},h.prototype._correctButton=function(c,m){return m===0&&!c.ctrlKey},h.prototype._move=function(c,m){return{around:m,panDelta:m.sub(c)}},h}(Be),Pl=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype._correctButton=function(c,m){return m===0&&c.ctrlKey||m===2},h.prototype._move=function(c,m){var b=.8*(m.x-c.x);if(b)return this._active=!0,{bearingDelta:b}},h.prototype.contextmenu=function(c){c.preventDefault()},h}(Be),Ll=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype._correctButton=function(c,m){return m===0&&c.ctrlKey||m===2},h.prototype._move=function(c,m){var b=-.5*(m.y-c.y);if(b)return this._active=!0,{pitchDelta:b}},h.prototype.contextmenu=function(c){c.preventDefault()},h}(Be),oo=function(l){this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset()};oo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},oo.prototype.touchstart=function(l,h,c){return this._calculateTransform(l,h,c)},oo.prototype.touchmove=function(l,h,c){if(this._active&&!(c.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,h,c)},oo.prototype.touchend=function(l,h,c){this._calculateTransform(l,h,c),this._active&&c.length<this._minTouches&&this.reset()},oo.prototype.touchcancel=function(){this.reset()},oo.prototype._calculateTransform=function(l,h,c){c.length>0&&(this._active=!0);var m=ba(c,h),b=new o.Point(0,0),w=new o.Point(0,0),E=0;for(var L in m){var F=m[L],H=this._touches[L];H&&(b._add(F),w._add(F.sub(H)),E++,m[L]=F)}if(this._touches=m,!(E<this._minTouches)&&w.mag()){var et=w.div(E);if(this._sum._add(et),!(this._sum.mag()<this._clickTolerance))return{around:b.div(E),panDelta:et}}},oo.prototype.enable=function(){this._enabled=!0},oo.prototype.disable=function(){this._enabled=!1,this.reset()},oo.prototype.isEnabled=function(){return this._enabled},oo.prototype.isActive=function(){return this._active};var po=function(){this.reset()};function xf(l,h,c){for(var m=0;m<l.length;m++)if(l[m].identifier===c)return h[m]}function bf(l,h){return Math.log(l/h)/Math.LN2}po.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},po.prototype._start=function(l){},po.prototype._move=function(l,h,c){return{}},po.prototype.touchstart=function(l,h,c){this._firstTwoTouches||c.length<2||(this._firstTwoTouches=[c[0].identifier,c[1].identifier],this._start([h[0],h[1]]))},po.prototype.touchmove=function(l,h,c){if(this._firstTwoTouches){l.preventDefault();var m=this._firstTwoTouches,b=m[1],w=xf(c,h,m[0]),E=xf(c,h,b);if(w&&E){var L=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],L,l)}}},po.prototype.touchend=function(l,h,c){if(this._firstTwoTouches){var m=this._firstTwoTouches,b=m[1],w=xf(c,h,m[0]),E=xf(c,h,b);w&&E||(this._active&&_.suppressClick(),this.reset())}},po.prototype.touchcancel=function(){this.reset()},po.prototype.enable=function(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"},po.prototype.disable=function(){this._enabled=!1,this.reset()},po.prototype.isEnabled=function(){return this._enabled},po.prototype.isActive=function(){return this._active};var Xa=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.reset=function(){l.prototype.reset.call(this),delete this._distance,delete this._startDistance},h.prototype._start=function(c){this._startDistance=this._distance=c[0].dist(c[1])},h.prototype._move=function(c,m){var b=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(bf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:bf(this._distance,b),pinchAround:m}},h}(po);function Ps(l,h){return 180*l.angleWith(h)/Math.PI}var Mh=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.reset=function(){l.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},h.prototype._start=function(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])},h.prototype._move=function(c,m){var b=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ps(this._vector,b),pinchAround:m}},h.prototype._isBelowThreshold=function(c){this._minDiameter=Math.min(this._minDiameter,c.mag());var m=25/(Math.PI*this._minDiameter)*360,b=Ps(c,this._startVector);return Math.abs(b)<m},h}(po);function dc(l){return Math.abs(l.y)>Math.abs(l.x)}var wp=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.reset=function(){l.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},h.prototype._start=function(c){this._lastPoints=c,dc(c[0].sub(c[1]))&&(this._valid=!1)},h.prototype._move=function(c,m,b){var w=c[0].sub(this._lastPoints[0]),E=c[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,E,b.timeStamp),this._valid)return this._lastPoints=c,this._active=!0,{pitchDelta:(w.y+E.y)/2*-.5}},h.prototype.gestureBeginsVertically=function(c,m,b){if(this._valid!==void 0)return this._valid;var w=c.mag()>=2,E=m.mag()>=2;if(w||E){if(!w||!E)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;var L=c.y>0==m.y>0;return dc(c)&&dc(m)&&L}},h}(po),Af={panStep:100,bearingStep:15,pitchStep:10},ol=function(){var l=Af;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1};function ps(l){return l*(2-l)}ol.prototype.blur=function(){this.reset()},ol.prototype.reset=function(){this._active=!1},ol.prototype.keydown=function(l){var h=this;if(!(l.altKey||l.ctrlKey||l.metaKey)){var c=0,m=0,b=0,w=0,E=0;switch(l.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:l.shiftKey?m=-1:(l.preventDefault(),w=-1);break;case 39:l.shiftKey?m=1:(l.preventDefault(),w=1);break;case 38:l.shiftKey?b=1:(l.preventDefault(),E=-1);break;case 40:l.shiftKey?b=-1:(l.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(m=0,b=0),{cameraAnimation:function(L){var F=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:ps,zoom:c?Math.round(F)+c*(l.shiftKey?2:1):F,bearing:L.getBearing()+m*h._bearingStep,pitch:L.getPitch()+b*h._pitchStep,offset:[-w*h._panStep,-E*h._panStep],center:L.getCenter()},{originalEvent:l})}}}},ol.prototype.enable=function(){this._enabled=!0},ol.prototype.disable=function(){this._enabled=!1,this.reset()},ol.prototype.isEnabled=function(){return this._enabled},ol.prototype.isActive=function(){return this._active},ol.prototype.disableRotation=function(){this._rotationDisabled=!0},ol.prototype.enableRotation=function(){this._rotationDisabled=!1};var Bn=function(l,h){this._map=l,this._el=l.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,o.bindAll(["_onTimeout"],this)};Bn.prototype.setZoomRate=function(l){this._defaultZoomRate=l},Bn.prototype.setWheelZoomRate=function(l){this._wheelZoomRate=l},Bn.prototype.isEnabled=function(){return!!this._enabled},Bn.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Bn.prototype.isZooming=function(){return!!this._zooming},Bn.prototype.enable=function(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")},Bn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Bn.prototype.wheel=function(l){if(this.isEnabled()){var h=l.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY,c=o.browser.now(),m=c-(this._lastWheelEventTime||0);this._lastWheelEventTime=c,h!==0&&h%4.000244140625==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(m*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),l.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=l,this._delta-=h,this._active||this._start(l)),l.preventDefault()}},Bn.prototype._onTimeout=function(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)},Bn.prototype._start=function(l){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var h=_.mousePos(this._el,l);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(h)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Bn.prototype.renderFrame=function(){var l=this;if(this._frameId&&(this._frameId=null,this.isActive())){var h=this._map.transform;if(this._delta!==0){var c=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,m=2/(1+Math.exp(-Math.abs(this._delta*c)));this._delta<0&&m!==0&&(m=1/m);var b=typeof this._targetZoom=="number"?h.zoomScale(this._targetZoom):h.scale;this._targetZoom=Math.min(h.maxZoom,Math.max(h.minZoom,h.scaleZoom(b*m))),this._type==="wheel"&&(this._startZoom=h.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,E=typeof this._targetZoom=="number"?this._targetZoom:h.zoom,L=this._startZoom,F=this._easing,H=!1;if(this._type==="wheel"&&L&&F){var et=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),it=F(et);w=o.number(L,E,it),et<1?this._frameId||(this._frameId=!0):H=!0}else w=E,H=!0;return this._active=!0,H&&(this._active=!1,this._finishTimeout=setTimeout(function(){l._zooming=!1,l._handler._triggerRenderFrame(),delete l._targetZoom,delete l._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!H,zoomDelta:w-h.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Bn.prototype._smoothOutEasing=function(l){var h=o.ease;if(this._prevEase){var c=this._prevEase,m=(o.browser.now()-c.start)/c.duration,b=c.easing(m+.01)-c.easing(m),w=.27/Math.sqrt(b*b+1e-4)*.01,E=Math.sqrt(.0729-w*w);h=o.bezier(w,E,.25,1)}return this._prevEase={start:o.browser.now(),duration:l,easing:h},h},Bn.prototype.blur=function(){this.reset()},Bn.prototype.reset=function(){this._active=!1};var Yr=function(l,h){this._clickZoom=l,this._tapZoom=h};Yr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Yr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Yr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Yr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ls=function(){this.reset()};Ls.prototype.reset=function(){this._active=!1},Ls.prototype.blur=function(){this.reset()},Ls.prototype.dblclick=function(l,h){return l.preventDefault(),{cameraAnimation:function(c){c.easeTo({duration:300,zoom:c.getZoom()+(l.shiftKey?-1:1),around:c.unproject(h)},{originalEvent:l})}}},Ls.prototype.enable=function(){this._enabled=!0},Ls.prototype.disable=function(){this._enabled=!1,this.reset()},Ls.prototype.isEnabled=function(){return this._enabled},Ls.prototype.isActive=function(){return this._active};var Jo=function(){this._tap=new Lo({numTouches:1,numTaps:1}),this.reset()};Jo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Jo.prototype.touchstart=function(l,h,c){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?c.length>0&&(this._swipePoint=h[0],this._swipeTouch=c[0].identifier):this._tap.touchstart(l,h,c))},Jo.prototype.touchmove=function(l,h,c){if(this._tapTime){if(this._swipePoint){if(c[0].identifier!==this._swipeTouch)return;var m=h[0],b=m.y-this._swipePoint.y;return this._swipePoint=m,l.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(l,h,c)},Jo.prototype.touchend=function(l,h,c){this._tapTime?this._swipePoint&&c.length===0&&this.reset():this._tap.touchend(l,h,c)&&(this._tapTime=l.timeStamp)},Jo.prototype.touchcancel=function(){this.reset()},Jo.prototype.enable=function(){this._enabled=!0},Jo.prototype.disable=function(){this._enabled=!1,this.reset()},Jo.prototype.isEnabled=function(){return this._enabled},Jo.prototype.isActive=function(){return this._active};var Ru=function(l,h,c){this._el=l,this._mousePan=h,this._touchPan=c};Ru.prototype.enable=function(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ru.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ru.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ru.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var zu=function(l,h,c){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=h,this._mousePitch=c};zu.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},zu.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},zu.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},zu.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ds=function(l,h,c,m){this._el=l,this._touchZoom=h,this._touchRotate=c,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0};ds.prototype.enable=function(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ds.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ds.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ds.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ds.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ds.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ro=function(l){return l.zoom||l.drag||l.pitch||l.rotate},mc=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h}(o.Event);function yn(l){return l.panDelta&&l.panDelta.mag()||l.zoomDelta||l.bearingDelta||l.pitchDelta}var hn=function(l,h){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yi(l),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h),o.bindAll(["handleEvent","handleWindowEvent"],this);var c=this._el;this._listeners=[[c,"touchstart",{passive:!0}],[c,"touchmove",{passive:!1}],[c,"touchend",void 0],[c,"touchcancel",void 0],[c,"mousedown",void 0],[c,"mousemove",void 0],[c,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[c,"mouseover",void 0],[c,"mouseout",void 0],[c,"dblclick",void 0],[c,"click",void 0],[c,"keydown",{capture:!1}],[c,"keyup",void 0],[c,"wheel",{passive:!1}],[c,"contextmenu",void 0],[o.window,"blur",void 0]];for(var m=0,b=this._listeners;m<b.length;m+=1){var w=b[m],E=w[0];_.addEventListener(E,w[1],E===o.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};hn.prototype.destroy=function(){for(var l=0,h=this._listeners;l<h.length;l+=1){var c=h[l],m=c[0];_.removeEventListener(m,c[1],m===o.window.document?this.handleWindowEvent:this.handleEvent,c[2])}},hn.prototype._addDefaultHandlers=function(l){var h=this._map,c=h.getCanvasContainer();this._add("mapEvent",new lr(h,l));var m=h.boxZoom=new ro(h,l);this._add("boxZoom",m);var b=new Do,w=new Ls;h.doubleClickZoom=new Yr(w,b),this._add("tapZoom",b),this._add("clickZoom",w);var E=new Jo;this._add("tapDragZoom",E);var L=h.touchPitch=new wp;this._add("touchPitch",L);var F=new Pl(l),H=new Ll(l);h.dragRotate=new zu(l,F,H),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",H,["mouseRotate"]);var et=new rl(l),it=new oo(l);h.dragPan=new Ru(c,et,it),this._add("mousePan",et),this._add("touchPan",it,["touchZoom","touchRotate"]);var ot=new Mh,yt=new Xa;h.touchZoomRotate=new ds(c,yt,ot,E),this._add("touchRotate",ot,["touchPan","touchZoom"]),this._add("touchZoom",yt,["touchPan","touchRotate"]);var dt=h.scrollZoom=new Bn(h,this);this._add("scrollZoom",dt,["mousePan"]);var Ct=h.keyboard=new ol;this._add("keyboard",Ct),this._add("blockableMapEvent",new Ye(h));for(var ht=0,It=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ht<It.length;ht+=1){var Rt=It[ht];l.interactive&&l[Rt]&&h[Rt].enable(l[Rt])}},hn.prototype._add=function(l,h,c){this._handlers.push({handlerName:l,handler:h,allowed:c}),this._handlersById[l]=h},hn.prototype.stop=function(l){if(!this._updatingCamera){for(var h=0,c=this._handlers;h<c.length;h+=1)c[h].handler.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}},hn.prototype.isActive=function(){for(var l=0,h=this._handlers;l<h.length;l+=1)if(h[l].handler.isActive())return!0;return!1},hn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},hn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},hn.prototype.isMoving=function(){return!!Ro(this._eventsInProgress)||this.isZooming()},hn.prototype._blockedByActive=function(l,h,c){for(var m in l)if(m!==c&&(!h||h.indexOf(m)<0))return!0;return!1},hn.prototype.handleWindowEvent=function(l){this.handleEvent(l,l.type+"Window")},hn.prototype._getMapTouches=function(l){for(var h=[],c=0,m=l;c<m.length;c+=1){var b=m[c];this._el.contains(b.target)&&h.push(b)}return h},hn.prototype.handleEvent=function(l,h){this._updatingCamera=!0;for(var c=l.type==="renderFrame"?void 0:l,m={needsRenderFrame:!1},b={},w={},E=l.touches?this._getMapTouches(l.touches):void 0,L=E?_.touchPos(this._el,E):_.mousePos(this._el,l),F=0,H=this._handlers;F<H.length;F+=1){var et=H[F],it=et.handlerName,ot=et.handler,yt=et.allowed;if(ot.isEnabled()){var dt=void 0;this._blockedByActive(w,yt,it)?ot.reset():ot[h||l.type]&&(dt=ot[h||l.type](l,L,E),this.mergeHandlerResult(m,b,dt,it,c),dt&&dt.needsRenderFrame&&this._triggerRenderFrame()),(dt||ot.isActive())&&(w[it]=ot)}}var Ct={};for(var ht in this._previousActiveHandlers)w[ht]||(Ct[ht]=c);this._previousActiveHandlers=w,(Object.keys(Ct).length||yn(m))&&(this._changes.push([m,b,Ct]),this._triggerRenderFrame()),(Object.keys(w).length||yn(m))&&this._map._stop(!0),this._updatingCamera=!1;var It=m.cameraAnimation;It&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],It(this._map))},hn.prototype.mergeHandlerResult=function(l,h,c,m,b){if(c){o.extend(l,c);var w={handlerName:m,originalEvent:c.originalEvent||b};c.zoomDelta!==void 0&&(h.zoom=w),c.panDelta!==void 0&&(h.drag=w),c.pitchDelta!==void 0&&(h.pitch=w),c.bearingDelta!==void 0&&(h.rotate=w)}},hn.prototype._applyChanges=function(){for(var l={},h={},c={},m=0,b=this._changes;m<b.length;m+=1){var w=b[m],E=w[0],L=w[1],F=w[2];E.panDelta&&(l.panDelta=(l.panDelta||new o.Point(0,0))._add(E.panDelta)),E.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(l.around=E.around),E.pinchAround!==void 0&&(l.pinchAround=E.pinchAround),E.noInertia&&(l.noInertia=E.noInertia),o.extend(h,L),o.extend(c,F)}this._updateMapTransform(l,h,c),this._changes=[]},hn.prototype._updateMapTransform=function(l,h,c){var m=this._map,b=m.transform;if(!yn(l))return this._fireEvents(h,c,!0);var w=l.panDelta,E=l.zoomDelta,L=l.bearingDelta,F=l.pitchDelta,H=l.around,et=l.pinchAround;et!==void 0&&(H=et),m._stop(!0),H=H||m.transform.centerPoint;var it=b.pointLocation(w?H.sub(w):H);L&&(b.bearing+=L),F&&(b.pitch+=F),E&&(b.zoom+=E),b.setLocationAtPoint(it,H),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(h,c,!0)},hn.prototype._fireEvents=function(l,h,c){var m=this,b=Ro(this._eventsInProgress),w=Ro(l),E={};for(var L in l)this._eventsInProgress[L]||(E[L+"start"]=l[L].originalEvent),this._eventsInProgress[L]=l[L];for(var F in!b&&w&&this._fireEvent("movestart",w.originalEvent),E)this._fireEvent(F,E[F]);for(var H in w&&this._fireEvent("move",w.originalEvent),l)this._fireEvent(H,l[H].originalEvent);var et,it={};for(var ot in this._eventsInProgress){var yt=this._eventsInProgress[ot],dt=yt.handlerName,Ct=yt.originalEvent;this._handlersById[dt].isActive()||(delete this._eventsInProgress[ot],it[ot+"end"]=et=h[dt]||Ct)}for(var ht in it)this._fireEvent(ht,it[ht]);var It=Ro(this._eventsInProgress);if(c&&(b||w)&&!It){this._updatingCamera=!0;var Rt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),qt=function(re){return re!==0&&-m._bearingSnap<re&&re<m._bearingSnap};Rt?(qt(Rt.bearing||this._map.getBearing())&&(Rt.bearing=0),this._map.easeTo(Rt,{originalEvent:et})):(this._map.fire(new o.Event("moveend",{originalEvent:et})),qt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},hn.prototype._fireEvent=function(l,h){this._map.fire(new o.Event(l,h?{originalEvent:h}:{}))},hn.prototype._requestFrame=function(){var l=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(h){delete l._frameId,l.handleEvent(new mc("renderFrame",{timeStamp:h})),l._applyChanges()})},hn.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Bu=function(l){function h(c,m){l.call(this),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=m.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},h.prototype.setCenter=function(c,m){return this.jumpTo({center:c},m)},h.prototype.panBy=function(c,m,b){return c=o.Point.convert(c).mult(-1),this.panTo(this.transform.center,o.extend({offset:c},m),b)},h.prototype.panTo=function(c,m,b){return this.easeTo(o.extend({center:c},m),b)},h.prototype.getZoom=function(){return this.transform.zoom},h.prototype.setZoom=function(c,m){return this.jumpTo({zoom:c},m),this},h.prototype.zoomTo=function(c,m,b){return this.easeTo(o.extend({zoom:c},m),b)},h.prototype.zoomIn=function(c,m){return this.zoomTo(this.getZoom()+1,c,m),this},h.prototype.zoomOut=function(c,m){return this.zoomTo(this.getZoom()-1,c,m),this},h.prototype.getBearing=function(){return this.transform.bearing},h.prototype.setBearing=function(c,m){return this.jumpTo({bearing:c},m),this},h.prototype.getPadding=function(){return this.transform.padding},h.prototype.setPadding=function(c,m){return this.jumpTo({padding:c},m),this},h.prototype.rotateTo=function(c,m,b){return this.easeTo(o.extend({bearing:c},m),b)},h.prototype.resetNorth=function(c,m){return this.rotateTo(0,o.extend({duration:1e3},c),m),this},h.prototype.resetNorthPitch=function(c,m){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},c),m),this},h.prototype.snapToNorth=function(c,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,m):this},h.prototype.getPitch=function(){return this.transform.pitch},h.prototype.setPitch=function(c,m){return this.jumpTo({pitch:c},m),this},h.prototype.cameraForBounds=function(c,m){c=o.LngLatBounds.convert(c);var b=m&&m.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),b,m)},h.prototype._cameraForBoxAndBearing=function(c,m,b,w){var E={top:0,bottom:0,right:0,left:0};if(typeof(w=o.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var L=w.padding;w.padding={top:L,bottom:L,right:L,left:L}}w.padding=o.extend(E,w.padding);var F=this.transform,H=F.padding,et=F.project(o.LngLat.convert(c)),it=F.project(o.LngLat.convert(m)),ot=et.rotate(-b*Math.PI/180),yt=it.rotate(-b*Math.PI/180),dt=new o.Point(Math.max(ot.x,yt.x),Math.max(ot.y,yt.y)),Ct=new o.Point(Math.min(ot.x,yt.x),Math.min(ot.y,yt.y)),ht=dt.sub(Ct),It=(F.width-(H.left+H.right+w.padding.left+w.padding.right))/ht.x,Rt=(F.height-(H.top+H.bottom+w.padding.top+w.padding.bottom))/ht.y;if(!(Rt<0||It<0)){var qt=Math.min(F.scaleZoom(F.scale*Math.min(It,Rt)),w.maxZoom),re=typeof w.offset.x=="number"?new o.Point(w.offset.x,w.offset.y):o.Point.convert(w.offset),ne=new o.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(b*Math.PI/180),ae=re.add(ne).mult(F.scale/F.zoomScale(qt));return{center:F.unproject(et.add(it).div(2).sub(ae)),zoom:qt,bearing:b}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},h.prototype.fitBounds=function(c,m,b){return this._fitInternal(this.cameraForBounds(c,m),m,b)},h.prototype.fitScreenCoordinates=function(c,m,b,w,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(c)),this.transform.pointLocation(o.Point.convert(m)),b,w),w,E)},h.prototype._fitInternal=function(c,m,b){return c?(delete(m=o.extend(c,m)).padding,m.linear?this.easeTo(m,b):this.flyTo(m,b)):this},h.prototype.jumpTo=function(c,m){this.stop();var b=this.transform,w=!1,E=!1,L=!1;return"zoom"in c&&b.zoom!==+c.zoom&&(w=!0,b.zoom=+c.zoom),c.center!==void 0&&(b.center=o.LngLat.convert(c.center)),"bearing"in c&&b.bearing!==+c.bearing&&(E=!0,b.bearing=+c.bearing),"pitch"in c&&b.pitch!==+c.pitch&&(L=!0,b.pitch=+c.pitch),c.padding==null||b.isPaddingEqual(c.padding)||(b.padding=c.padding),this.fire(new o.Event("movestart",m)).fire(new o.Event("move",m)),w&&this.fire(new o.Event("zoomstart",m)).fire(new o.Event("zoom",m)).fire(new o.Event("zoomend",m)),E&&this.fire(new o.Event("rotatestart",m)).fire(new o.Event("rotate",m)).fire(new o.Event("rotateend",m)),L&&this.fire(new o.Event("pitchstart",m)).fire(new o.Event("pitch",m)).fire(new o.Event("pitchend",m)),this.fire(new o.Event("moveend",m))},h.prototype.easeTo=function(c,m){var b=this;this._stop(!1,c.easeId),((c=o.extend({offset:[0,0],duration:500,easing:o.ease},c)).animate===!1||!c.essential&&o.browser.prefersReducedMotion)&&(c.duration=0);var w=this.transform,E=this.getZoom(),L=this.getBearing(),F=this.getPitch(),H=this.getPadding(),et="zoom"in c?+c.zoom:E,it="bearing"in c?this._normalizeBearing(c.bearing,L):L,ot="pitch"in c?+c.pitch:F,yt="padding"in c?c.padding:w.padding,dt=o.Point.convert(c.offset),Ct=w.centerPoint.add(dt),ht=w.pointLocation(Ct),It=o.LngLat.convert(c.center||ht);this._normalizeCenter(It);var Rt,qt,re=w.project(ht),ne=w.project(It).sub(re),ae=w.zoomScale(et-E);c.around&&(Rt=o.LngLat.convert(c.around),qt=w.locationPoint(Rt));var ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||et!==E,this._rotating=this._rotating||L!==it,this._pitching=this._pitching||ot!==F,this._padding=!w.isPaddingEqual(yt),this._easeId=c.easeId,this._prepareEase(m,c.noMoveStart,ve),this._ease(function(Ce){if(b._zooming&&(w.zoom=o.number(E,et,Ce)),b._rotating&&(w.bearing=o.number(L,it,Ce)),b._pitching&&(w.pitch=o.number(F,ot,Ce)),b._padding&&(w.interpolatePadding(H,yt,Ce),Ct=w.centerPoint.add(dt)),Rt)w.setLocationAtPoint(Rt,qt);else{var Le=w.zoomScale(w.zoom-E),We=et>E?Math.min(2,ae):Math.max(.5,ae),fn=Math.pow(We,1-Ce),Tn=w.unproject(re.add(ne.mult(Ce*fn)).mult(Le));w.setLocationAtPoint(w.renderWorldCopies?Tn.wrap():Tn,Ct)}b._fireMoveEvents(m)},function(Ce){b._afterEase(m,Ce)},c),this},h.prototype._prepareEase=function(c,m,b){b===void 0&&(b={}),this._moving=!0,m||b.moving||this.fire(new o.Event("movestart",c)),this._zooming&&!b.zooming&&this.fire(new o.Event("zoomstart",c)),this._rotating&&!b.rotating&&this.fire(new o.Event("rotatestart",c)),this._pitching&&!b.pitching&&this.fire(new o.Event("pitchstart",c))},h.prototype._fireMoveEvents=function(c){this.fire(new o.Event("move",c)),this._zooming&&this.fire(new o.Event("zoom",c)),this._rotating&&this.fire(new o.Event("rotate",c)),this._pitching&&this.fire(new o.Event("pitch",c))},h.prototype._afterEase=function(c,m){if(!this._easeId||!m||this._easeId!==m){delete this._easeId;var b=this._zooming,w=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new o.Event("zoomend",c)),w&&this.fire(new o.Event("rotateend",c)),E&&this.fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c))}},h.prototype.flyTo=function(c,m){var b=this;if(!c.essential&&o.browser.prefersReducedMotion){var w=o.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,m)}this.stop(),c=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},c);var E=this.transform,L=this.getZoom(),F=this.getBearing(),H=this.getPitch(),et=this.getPadding(),it="zoom"in c?o.clamp(+c.zoom,E.minZoom,E.maxZoom):L,ot="bearing"in c?this._normalizeBearing(c.bearing,F):F,yt="pitch"in c?+c.pitch:H,dt="padding"in c?c.padding:E.padding,Ct=E.zoomScale(it-L),ht=o.Point.convert(c.offset),It=E.centerPoint.add(ht),Rt=E.pointLocation(It),qt=o.LngLat.convert(c.center||Rt);this._normalizeCenter(qt);var re=E.project(Rt),ne=E.project(qt).sub(re),ae=c.curve,ve=Math.max(E.width,E.height),Ce=ve/Ct,Le=ne.mag();if("minZoom"in c){var We=o.clamp(Math.min(c.minZoom,L,it),E.minZoom,E.maxZoom),fn=ve/E.zoomScale(We-L);ae=Math.sqrt(fn/Le*2)}var Tn=ae*ae;function En(Vn){var gn=(Ce*Ce-ve*ve+(Vn?-1:1)*Tn*Tn*Le*Le)/(2*(Vn?Ce:ve)*Tn*Le);return Math.log(Math.sqrt(gn*gn+1)-gn)}function Oi(Vn){return(Math.exp(Vn)-Math.exp(-Vn))/2}function tn(Vn){return(Math.exp(Vn)+Math.exp(-Vn))/2}var Dn=En(0),ei=function(Vn){return tn(Dn)/tn(Dn+ae*Vn)},Gn=function(Vn){return ve*((tn(Dn)*(Oi(gn=Dn+ae*Vn)/tn(gn))-Oi(Dn))/Tn)/Le;var gn},Nn=(En(1)-Dn)/ae;if(Math.abs(Le)<1e-6||!isFinite(Nn)){if(Math.abs(ve-Ce)<1e-6)return this.easeTo(c,m);var ni=Ce<ve?-1:1;Nn=Math.abs(Math.log(Ce/ve))/ae,Gn=function(){return 0},ei=function(Vn){return Math.exp(ni*ae*Vn)}}return c.duration="duration"in c?+c.duration:1e3*Nn/("screenSpeed"in c?+c.screenSpeed/ae:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=F!==ot,this._pitching=yt!==H,this._padding=!E.isPaddingEqual(dt),this._prepareEase(m,!1),this._ease(function(Vn){var gn=Vn*Nn,go=1/ei(gn);E.zoom=Vn===1?it:L+E.scaleZoom(go),b._rotating&&(E.bearing=o.number(F,ot,Vn)),b._pitching&&(E.pitch=o.number(H,yt,Vn)),b._padding&&(E.interpolatePadding(et,dt,Vn),It=E.centerPoint.add(ht));var Xr=Vn===1?qt:E.unproject(re.add(ne.mult(Gn(gn))).mult(go));E.setLocationAtPoint(E.renderWorldCopies?Xr.wrap():Xr,It),b._fireMoveEvents(m)},function(){return b._afterEase(m)},c),this},h.prototype.isEasing=function(){return!!this._easeFrameId},h.prototype.stop=function(){return this._stop()},h.prototype._stop=function(c,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,m)}if(!c){var w=this.handlers;w&&w.stop(!1)}return this},h.prototype._ease=function(c,m,b){b.animate===!1||b.duration===0?(c(1),m()):(this._easeStart=o.browser.now(),this._easeOptions=b,this._onEaseFrame=c,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},h.prototype._renderFrameCallback=function(){var c=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},h.prototype._normalizeBearing=function(c,m){c=o.wrap(c,-180,180);var b=Math.abs(c-m);return Math.abs(c-360-m)<b&&(c-=360),Math.abs(c+360-m)<b&&(c+=360),c},h.prototype._normalizeCenter=function(c){var m=this.transform;if(m.renderWorldCopies&&!m.lngRange){var b=c.lng-m.center.lng;c.lng+=b>180?-360:b<-180?360:0}},h}(o.Evented),Ho=function(l){l===void 0&&(l={}),this.options=l,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Ho.prototype.getDefaultPosition=function(){return"bottom-right"},Ho.prototype.onAdd=function(l){var h=this.options&&this.options.compact;return this._map=l,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=_.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ho.prototype.onRemove=function(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ho.prototype._setElementTitle=function(l,h){var c=this._map._getUIString("AttributionControl."+h);l.title=c,l.setAttribute("aria-label",c)},Ho.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Ho.prototype._updateEditLink=function(){var l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));var h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(l){var c=h.reduce(function(m,b,w){return b.value&&(m+=b.key+"="+b.value+(w<h.length-1?"&":"")),m},"?");l.href=o.config.FEEDBACK_URL+"/"+c+(this._map._hash?this._map._hash.getHashString(!0):""),l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}},Ho.prototype._updateData=function(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ho.prototype._updateAttributions=function(){if(this._map.style){var l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(function(L){return typeof L!="string"?"":L})):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){var h=this._map.style.stylesheet;this.styleOwner=h.owner,this.styleId=h.id}var c=this._map.style.sourceCaches;for(var m in c){var b=c[m];if(b.used){var w=b.getSource();w.attribution&&l.indexOf(w.attribution)<0&&l.push(w.attribution)}}l.sort(function(L,F){return L.length-F.length});var E=(l=l.filter(function(L,F){for(var H=F+1;H<l.length;H++)if(l[H].indexOf(L)>=0)return!1;return!0})).join(" | ");E!==this._attribHTML&&(this._attribHTML=E,l.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ho.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var wa=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};wa.prototype.onAdd=function(l){this._map=l,this._container=_.create("div","mapboxgl-ctrl");var h=_.create("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},wa.prototype.onRemove=function(){_.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},wa.prototype.getDefaultPosition=function(){return"bottom-left"},wa.prototype._updateLogo=function(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},wa.prototype._logoRequired=function(){if(this._map.style){var l=this._map.style.sourceCaches;for(var h in l)if(l[h].getSource().mapbox_logo)return!0;return!1}},wa.prototype._updateCompact=function(){var l=this._container.children;if(l.length){var h=l[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}};var ta=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ta.prototype.add=function(l){var h=++this._id;return this._queue.push({callback:l,id:h,cancelled:!1}),h},ta.prototype.remove=function(l){for(var h=this._currentlyRunning,c=0,m=h?this._queue.concat(h):this._queue;c<m.length;c+=1){var b=m[c];if(b.id===l)return void(b.cancelled=!0)}},ta.prototype.run=function(l){l===void 0&&(l=0);var h=this._currentlyRunning=this._queue;this._queue=[];for(var c=0,m=h;c<m.length;c+=1){var b=m[c];if(!b.cancelled&&(b.callback(l),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ta.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Dl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Cp=o.window.HTMLImageElement,wf=o.window.HTMLElement,nr=o.window.ImageBitmap,mo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Kc=function(l){function h(m){var b=this;if((m=o.extend({},mo,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new mn(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies);if(l.call(this,w,m),this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=m.collectResourceTiming,this._renderTaskQueue=new ta,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Dl,m.locale),this._clickTolerance=m.clickTolerance,this._requestManager=new o.RequestManager(m.transformRequest,m.accessToken),typeof m.container=="string"){if(this._container=o.window.document.getElementById(m.container),!this._container)throw new Error("Container '"+m.container+"' not found.")}else{if(!(m.container instanceof wf))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return b._update(!1)}),this.on("moveend",function(){return b._update(!1)}),this.on("zoom",function(){return b._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new hn(this,m),this._hash=m.hash&&new Qo(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,o.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Ho({customAttribution:m.customAttribution})),this.addControl(new wa,m.logoPosition),this.on("style.load",function(){b.transform.unmodified&&b.jumpTo(b.style.stylesheet)}),this.on("data",function(E){b._update(E.dataType==="style"),b.fire(new o.Event(E.dataType+"data",E))}),this.on("dataloading",function(E){b.fire(new o.Event(E.dataType+"dataloading",E))})}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var c={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return h.prototype._getMapId=function(){return this._mapId},h.prototype.addControl=function(m,b){if(b===void 0&&(b=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=m.onAdd(this);this._controls.push(m);var E=this._controlPositions[b];return b.indexOf("bottom")!==-1?E.insertBefore(w,E.firstChild):E.appendChild(w),this},h.prototype.removeControl=function(m){if(!m||!m.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var b=this._controls.indexOf(m);return b>-1&&this._controls.splice(b,1),m.onRemove(this),this},h.prototype.hasControl=function(m){return this._controls.indexOf(m)>-1},h.prototype.resize=function(m){var b=this._containerDimensions(),w=b[0],E=b[1];if(w===this.transform.width&&E===this.transform.height)return this;this._resizeCanvas(w,E),this.transform.resize(w,E),this.painter.resize(w,E);var L=!this._moving;return L&&this.fire(new o.Event("movestart",m)).fire(new o.Event("move",m)),this.fire(new o.Event("resize",m)),L&&this.fire(new o.Event("moveend",m)),this},h.prototype.getBounds=function(){return this.transform.getBounds()},h.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},h.prototype.setMaxBounds=function(m){return this.transform.setMaxBounds(o.LngLatBounds.convert(m)),this._update()},h.prototype.setMinZoom=function(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},h.prototype.getMinZoom=function(){return this.transform.minZoom},h.prototype.setMaxZoom=function(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")},h.prototype.getMaxZoom=function(){return this.transform.maxZoom},h.prototype.setMinPitch=function(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},h.prototype.getMinPitch=function(){return this.transform.minPitch},h.prototype.setMaxPitch=function(m){if((m=m??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")},h.prototype.getMaxPitch=function(){return this.transform.maxPitch},h.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},h.prototype.setRenderWorldCopies=function(m){return this.transform.renderWorldCopies=m,this._update()},h.prototype.project=function(m){return this.transform.locationPoint(o.LngLat.convert(m))},h.prototype.unproject=function(m){return this.transform.pointLocation(o.Point.convert(m))},h.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},h.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},h.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},h.prototype._createDelegatedListener=function(m,b,w){var E,L=this;if(m==="mouseenter"||m==="mouseover"){var F=!1;return{layer:b,listener:w,delegates:{mousemove:function(et){var it=L.getLayer(b)?L.queryRenderedFeatures(et.point,{layers:[b]}):[];it.length?F||(F=!0,w.call(L,new pr(m,L,et.originalEvent,{features:it}))):F=!1},mouseout:function(){F=!1}}}}if(m==="mouseleave"||m==="mouseout"){var H=!1;return{layer:b,listener:w,delegates:{mousemove:function(et){(L.getLayer(b)?L.queryRenderedFeatures(et.point,{layers:[b]}):[]).length?H=!0:H&&(H=!1,w.call(L,new pr(m,L,et.originalEvent)))},mouseout:function(et){H&&(H=!1,w.call(L,new pr(m,L,et.originalEvent)))}}}}return{layer:b,listener:w,delegates:(E={},E[m]=function(et){var it=L.getLayer(b)?L.queryRenderedFeatures(et.point,{layers:[b]}):[];it.length&&(et.features=it,w.call(L,et),delete et.features)},E)}},h.prototype.on=function(m,b,w){if(w===void 0)return l.prototype.on.call(this,m,b);var E=this._createDelegatedListener(m,b,w);for(var L in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(E),E.delegates)this.on(L,E.delegates[L]);return this},h.prototype.once=function(m,b,w){if(w===void 0)return l.prototype.once.call(this,m,b);var E=this._createDelegatedListener(m,b,w);for(var L in E.delegates)this.once(L,E.delegates[L]);return this},h.prototype.off=function(m,b,w){var E=this;return w===void 0?l.prototype.off.call(this,m,b):(this._delegatedListeners&&this._delegatedListeners[m]&&function(L){for(var F=L[m],H=0;H<F.length;H++){var et=F[H];if(et.layer===b&&et.listener===w){for(var it in et.delegates)E.off(it,et.delegates[it]);return F.splice(H,1),E}}}(this._delegatedListeners),this)},h.prototype.queryRenderedFeatures=function(m,b){if(!this.style)return[];var w;if(b!==void 0||m===void 0||m instanceof o.Point||Array.isArray(m)||(b=m,m=void 0),b=b||{},(m=m||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof m[0]=="number")w=[o.Point.convert(m)];else{var E=o.Point.convert(m[0]),L=o.Point.convert(m[1]);w=[E,new o.Point(L.x,E.y),L,new o.Point(E.x,L.y),E]}return this.style.queryRenderedFeatures(w,b,this.transform)},h.prototype.querySourceFeatures=function(m,b){return this.style.querySourceFeatures(m,b)},h.prototype.setStyle=function(m,b){return(b=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},b)).diff!==!1&&b.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,b),this):(this._localIdeographFontFamily=b.localIdeographFontFamily,this._updateStyle(m,b))},h.prototype._getUIString=function(m){var b=this._locale[m];if(b==null)throw new Error("Missing UI string '"+m+"'");return b},h.prototype._updateStyle=function(m,b){return this.style&&(this.style.setEventedParent(null),this.style._remove()),m?(this.style=new Mi(this,b||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m),this):(delete this.style,this)},h.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Mi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},h.prototype._diffStyle=function(m,b){var w=this;if(typeof m=="string"){var E=this._requestManager.normalizeStyleURL(m),L=this._requestManager.transformRequest(E,o.ResourceType.Style);o.getJSON(L,function(F,H){F?w.fire(new o.ErrorEvent(F)):H&&w._updateDiff(H,b)})}else typeof m=="object"&&this._updateDiff(m,b)},h.prototype._updateDiff=function(m,b){try{this.style.setState(m)&&this._update(!0)}catch(w){o.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(m,b)}},h.prototype.getStyle=function(){if(this.style)return this.style.serialize()},h.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},h.prototype.addSource=function(m,b){return this._lazyInitEmptyStyle(),this.style.addSource(m,b),this._update(!0)},h.prototype.isSourceLoaded=function(m){var b=this.style&&this.style.sourceCaches[m];if(b!==void 0)return b.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+m+"'")))},h.prototype.areTilesLoaded=function(){var m=this.style&&this.style.sourceCaches;for(var b in m){var w=m[b]._tiles;for(var E in w){var L=w[E];if(L.state!=="loaded"&&L.state!=="errored")return!1}}return!0},h.prototype.addSourceType=function(m,b,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(m,b,w)},h.prototype.removeSource=function(m){return this.style.removeSource(m),this._update(!0)},h.prototype.getSource=function(m){return this.style.getSource(m)},h.prototype.addImage=function(m,b,w){w===void 0&&(w={});var E=w.pixelRatio;E===void 0&&(E=1);var L=w.sdf;L===void 0&&(L=!1);var F=w.stretchX,H=w.stretchY,et=w.content;if(this._lazyInitEmptyStyle(),b instanceof Cp||nr&&b instanceof nr){var it=o.browser.getImageData(b);this.style.addImage(m,{data:new o.RGBAImage({width:it.width,height:it.height},it.data),pixelRatio:E,stretchX:F,stretchY:H,content:et,sdf:L,version:0})}else{if(b.width===void 0||b.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ot=b;this.style.addImage(m,{data:new o.RGBAImage({width:b.width,height:b.height},new Uint8Array(b.data)),pixelRatio:E,stretchX:F,stretchY:H,content:et,sdf:L,version:0,userImage:ot}),ot.onAdd&&ot.onAdd(this,m)}},h.prototype.updateImage=function(m,b){var w=this.style.getImage(m);if(!w)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var E=b instanceof Cp||nr&&b instanceof nr?o.browser.getImageData(b):b,L=E.width,F=E.height,H=E.data;return L===void 0||F===void 0?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):L!==w.data.width||F!==w.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(H,!(b instanceof Cp||nr&&b instanceof nr)),void this.style.updateImage(m,w))},h.prototype.hasImage=function(m){return m?!!this.style.getImage(m):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},h.prototype.removeImage=function(m){this.style.removeImage(m)},h.prototype.loadImage=function(m,b){o.getImage(this._requestManager.transformRequest(m,o.ResourceType.Image),b)},h.prototype.listImages=function(){return this.style.listImages()},h.prototype.addLayer=function(m,b){return this._lazyInitEmptyStyle(),this.style.addLayer(m,b),this._update(!0)},h.prototype.moveLayer=function(m,b){return this.style.moveLayer(m,b),this._update(!0)},h.prototype.removeLayer=function(m){return this.style.removeLayer(m),this._update(!0)},h.prototype.getLayer=function(m){return this.style.getLayer(m)},h.prototype.setLayerZoomRange=function(m,b,w){return this.style.setLayerZoomRange(m,b,w),this._update(!0)},h.prototype.setFilter=function(m,b,w){return w===void 0&&(w={}),this.style.setFilter(m,b,w),this._update(!0)},h.prototype.getFilter=function(m){return this.style.getFilter(m)},h.prototype.setPaintProperty=function(m,b,w,E){return E===void 0&&(E={}),this.style.setPaintProperty(m,b,w,E),this._update(!0)},h.prototype.getPaintProperty=function(m,b){return this.style.getPaintProperty(m,b)},h.prototype.setLayoutProperty=function(m,b,w,E){return E===void 0&&(E={}),this.style.setLayoutProperty(m,b,w,E),this._update(!0)},h.prototype.getLayoutProperty=function(m,b){return this.style.getLayoutProperty(m,b)},h.prototype.setLight=function(m,b){return b===void 0&&(b={}),this._lazyInitEmptyStyle(),this.style.setLight(m,b),this._update(!0)},h.prototype.getLight=function(){return this.style.getLight()},h.prototype.setFeatureState=function(m,b){return this.style.setFeatureState(m,b),this._update()},h.prototype.removeFeatureState=function(m,b){return this.style.removeFeatureState(m,b),this._update()},h.prototype.getFeatureState=function(m){return this.style.getFeatureState(m)},h.prototype.getContainer=function(){return this._container},h.prototype.getCanvasContainer=function(){return this._canvasContainer},h.prototype.getCanvas=function(){return this._canvas},h.prototype._containerDimensions=function(){var m=0,b=0;return this._container&&(m=this._container.clientWidth||400,b=this._container.clientHeight||300),[m,b]},h.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},h.prototype._setupContainer=function(){var m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=_.create("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();var b=this._canvasContainer=_.create("div","mapboxgl-canvas-container",m);this._interactive&&b.classList.add("mapboxgl-interactive"),this._canvas=_.create("canvas","mapboxgl-canvas",b),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var E=this._controlContainer=_.create("div","mapboxgl-control-container",m),L=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(F){L[F]=_.create("div","mapboxgl-ctrl-"+F,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},h.prototype._resizeCanvas=function(m,b){var w=o.browser.devicePixelRatio||1;this._canvas.width=w*m,this._canvas.height=w*b,this._canvas.style.width=m+"px",this._canvas.style.height=b+"px"},h.prototype._setupPainter=function(){var m=o.extend({},y.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),b=this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);b?(this.painter=new Ae(b,this.transform),o.webpSupported.testSupport(b)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},h.prototype._contextLost=function(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:m}))},h.prototype._contextRestored=function(m){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:m}))},h.prototype._onMapScroll=function(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},h.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},h.prototype._update=function(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this},h.prototype._requestRenderFrame=function(m){return this._update(),this._renderTaskQueue.add(m)},h.prototype._cancelRenderFrame=function(m){this._renderTaskQueue.remove(m)},h.prototype._render=function(m){var b,w=this,E=0,L=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(b=L.createQueryEXT(),L.beginQueryEXT(L.TIME_ELAPSED_EXT,b),E=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),!this._removed){var F=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var H=this.transform.zoom,et=o.browser.now();this.style.zoomHistory.update(H,et);var it=new o.EvaluationParameters(H,{now:et,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ot=it.crossFadingFactor();ot===1&&ot===this._crossFadingFactor||(F=!0,this._crossFadingFactor=ot),this.style.update(it)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||F)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var yt=o.browser.now()-E;L.endQueryEXT(L.TIME_ELAPSED_EXT,b),setTimeout(function(){var ht=L.getQueryObjectEXT(b,L.QUERY_RESULT_EXT)/1e6;L.deleteQueryEXT(b),w.fire(new o.Event("gpu-timing-frame",{cpuTime:yt,gpuTime:ht}))},50)}if(this.listens("gpu-timing-layer")){var dt=this.painter.collectGpuTimers();setTimeout(function(){var ht=w.painter.queryGpuTimers(dt);w.fire(new o.Event("gpu-timing-layer",{layerTimes:ht}))},50)}var Ct=this._sourcesDirty||this._styleDirty||this._placementDirty;return Ct||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||Ct||(this._fullyLoaded=!0),this}},h.prototype.remove=function(){this._hash&&this._hash.remove();for(var m=0,b=this._controls;m<b.length;m+=1)b[m].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),Ou(this._canvasContainer),Ou(this._controlContainer),Ou(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},h.prototype.triggerRepaint=function(){var m=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(b){m._frame=null,m._render(b)}))},h.prototype._onWindowOnline=function(){this._update()},h.prototype._onWindowResize=function(m){this._trackResize&&this.resize({originalEvent:m})._update()},c.showTileBoundaries.get=function(){return!!this._showTileBoundaries},c.showTileBoundaries.set=function(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())},c.showPadding.get=function(){return!!this._showPadding},c.showPadding.set=function(m){this._showPadding!==m&&(this._showPadding=m,this._update())},c.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},c.showCollisionBoxes.set=function(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())},c.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},c.showOverdrawInspector.set=function(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())},c.repaint.get=function(){return!!this._repaint},c.repaint.set=function(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())},c.vertices.get=function(){return!!this._vertices},c.vertices.set=function(m){this._vertices=m,this._update()},h.prototype._setCacheLimits=function(m,b){o.setCacheLimits(m,b)},c.version.get=function(){return o.version},Object.defineProperties(h.prototype,c),h}(Bu);function Ou(l){l.parentNode&&l.parentNode.removeChild(l)}var rt={showCompass:!0,showZoom:!0,visualizePitch:!1},Ka=function(l){var h=this;this.options=o.extend({},rt,l),this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(c){return c.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(c){return h._map.zoomIn({},{originalEvent:c})}),_.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(c){return h._map.zoomOut({},{originalEvent:c})}),_.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(c){h.options.visualizePitch?h._map.resetNorthPitch({},{originalEvent:c}):h._map.resetNorth({},{originalEvent:c})}),this._compassIcon=_.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ka.prototype._updateZoomButtons=function(){var l=this._map.getZoom(),h=l===this._map.getMaxZoom(),c=l===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())},Ka.prototype._rotateCompassArrow=function(){var l=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=l},Ka.prototype.onAdd=function(l){return this._map=l,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new la(this._map,this._compass,this.options.visualizePitch)),this._container},Ka.prototype.onRemove=function(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ka.prototype._createButton=function(l,h){var c=_.create("button",l,this._container);return c.type="button",c.addEventListener("click",h),c},Ka.prototype._setButtonTitle=function(l,h){var c=this._map._getUIString("NavigationControl."+h);l.title=c,l.setAttribute("aria-label",c)};var la=function(l,h,c){c===void 0&&(c=!1),this._clickTolerance=10,this.element=h,this.mouseRotate=new Pl({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,c&&(this.mousePitch=new Ll({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),_.addEventListener(h,"mousedown",this.mousedown),_.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(h,"touchmove",this.touchmove),_.addEventListener(h,"touchend",this.touchend),_.addEventListener(h,"touchcancel",this.reset)};function ua(l,h,c){if(l=new o.LngLat(l.lng,l.lat),h){var m=new o.LngLat(l.lng-360,l.lat),b=new o.LngLat(l.lng+360,l.lat),w=c.locationPoint(l).distSqr(h);c.locationPoint(m).distSqr(h)<w?l=m:c.locationPoint(b).distSqr(h)<w&&(l=b)}for(;Math.abs(l.lng-c.center.lng)>180;){var E=c.locationPoint(l);if(E.x>=0&&E.y>=0&&E.x<=c.width&&E.y<=c.height)break;l.lng>c.center.lng?l.lng-=360:l.lng+=360}return l}la.prototype.down=function(l,h){this.mouseRotate.mousedown(l,h),this.mousePitch&&this.mousePitch.mousedown(l,h),_.disableDrag()},la.prototype.move=function(l,h){var c=this.map,m=this.mouseRotate.mousemoveWindow(l,h);if(m&&m.bearingDelta&&c.setBearing(c.getBearing()+m.bearingDelta),this.mousePitch){var b=this.mousePitch.mousemoveWindow(l,h);b&&b.pitchDelta&&c.setPitch(c.getPitch()+b.pitchDelta)}},la.prototype.off=function(){var l=this.element;_.removeEventListener(l,"mousedown",this.mousedown),_.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(l,"touchmove",this.touchmove),_.removeEventListener(l,"touchend",this.touchend),_.removeEventListener(l,"touchcancel",this.reset),this.offTemp()},la.prototype.offTemp=function(){_.enableDrag(),_.removeEventListener(o.window,"mousemove",this.mousemove),_.removeEventListener(o.window,"mouseup",this.mouseup)},la.prototype.mousedown=function(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:function(){return l.preventDefault()}}),_.mousePos(this.element,l)),_.addEventListener(o.window,"mousemove",this.mousemove),_.addEventListener(o.window,"mouseup",this.mouseup)},la.prototype.mousemove=function(l){this.move(l,_.mousePos(this.element,l))},la.prototype.mouseup=function(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()},la.prototype.touchstart=function(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return l.preventDefault()}},this._startPos))},la.prototype.touchmove=function(l){l.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:function(){return l.preventDefault()}},this._lastPos))},la.prototype.touchend=function(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},la.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var mi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Cf(l,h,c){var m=l.classList;for(var b in mi)m.remove("mapboxgl-"+c+"-anchor-"+b);m.add("mapboxgl-"+c+"-anchor-"+h)}var Qc,Eh=function(l){function h(c,m){if(l.call(this),(c instanceof o.window.HTMLElement||m)&&(c=o.extend({element:c},m)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,c&&c.element)this._element=c.element,this._offset=o.Point.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");var b=_.createNS("http://www.w3.org/2000/svg","svg");b.setAttributeNS(null,"display","block"),b.setAttributeNS(null,"height","41px"),b.setAttributeNS(null,"width","27px"),b.setAttributeNS(null,"viewBox","0 0 27 41");var w=_.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var E=_.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");var L=_.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");for(var F=0,H=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];F<H.length;F+=1){var et=H[F],it=_.createNS("http://www.w3.org/2000/svg","ellipse");it.setAttributeNS(null,"opacity","0.04"),it.setAttributeNS(null,"cx","10.5"),it.setAttributeNS(null,"cy","5.80029008"),it.setAttributeNS(null,"rx",et.rx),it.setAttributeNS(null,"ry",et.ry),L.appendChild(it)}var ot=_.createNS("http://www.w3.org/2000/svg","g");ot.setAttributeNS(null,"fill",this._color);var yt=_.createNS("http://www.w3.org/2000/svg","path");yt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ot.appendChild(yt);var dt=_.createNS("http://www.w3.org/2000/svg","g");dt.setAttributeNS(null,"opacity","0.25"),dt.setAttributeNS(null,"fill","#000000");var Ct=_.createNS("http://www.w3.org/2000/svg","path");Ct.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),dt.appendChild(Ct);var ht=_.createNS("http://www.w3.org/2000/svg","g");ht.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ht.setAttributeNS(null,"fill","#FFFFFF");var It=_.createNS("http://www.w3.org/2000/svg","g");It.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Rt=_.createNS("http://www.w3.org/2000/svg","circle");Rt.setAttributeNS(null,"fill","#000000"),Rt.setAttributeNS(null,"opacity","0.25"),Rt.setAttributeNS(null,"cx","5.5"),Rt.setAttributeNS(null,"cy","5.5"),Rt.setAttributeNS(null,"r","5.4999962");var qt=_.createNS("http://www.w3.org/2000/svg","circle");qt.setAttributeNS(null,"fill","#FFFFFF"),qt.setAttributeNS(null,"cx","5.5"),qt.setAttributeNS(null,"cy","5.5"),qt.setAttributeNS(null,"r","5.4999962"),It.appendChild(Rt),It.appendChild(qt),E.appendChild(L),E.appendChild(ot),E.appendChild(dt),E.appendChild(ht),E.appendChild(It),b.appendChild(E),b.setAttributeNS(null,"height",41*this._scale+"px"),b.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(b),this._offset=o.Point.convert(c&&c.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(re){re.preventDefault()}),this._element.addEventListener("mousedown",function(re){re.preventDefault()}),Cf(this._element,this._anchor,"marker"),this._popup=null}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.addTo=function(c){return this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},h.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this},h.prototype.getLngLat=function(){return this._lngLat},h.prototype.setLngLat=function(c){return this._lngLat=o.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},h.prototype.getElement=function(){return this._element},h.prototype.setPopup=function(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){var m=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(24.6+m)],"bottom-right":[-m,-1*(24.6+m)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=c,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},h.prototype._onKeyPress=function(c){var m=c.code,b=c.charCode||c.keyCode;m!=="Space"&&m!=="Enter"&&b!==32&&b!==13||this.togglePopup()},h.prototype._onMapClick=function(c){var m=c.originalEvent.target,b=this._element;this._popup&&(m===b||b.contains(m))&&this.togglePopup()},h.prototype.getPopup=function(){return this._popup},h.prototype.togglePopup=function(){var c=this._popup;return c?(c.isOpen()?c.remove():c.addTo(this._map),this):this},h.prototype._update=function(c){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ua(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(m="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b="rotateX("+this._map.getPitch()+"deg)"),c&&c.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,mi[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+b+" "+m)}},h.prototype.getOffset=function(){return this._offset},h.prototype.setOffset=function(c){return this._offset=o.Point.convert(c),this._update(),this},h.prototype._onMove=function(c){if(!this._isDragging){var m=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},h.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},h.prototype._addDragHandler=function(c){this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},h.prototype.setDraggable=function(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},h.prototype.isDraggable=function(){return this._draggable},h.prototype.setRotation=function(c){return this._rotation=c||0,this._update(),this},h.prototype.getRotation=function(){return this._rotation},h.prototype.setRotationAlignment=function(c){return this._rotationAlignment=c||"auto",this._update(),this},h.prototype.getRotationAlignment=function(){return this._rotationAlignment},h.prototype.setPitchAlignment=function(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this},h.prototype.getPitchAlignment=function(){return this._pitchAlignment},h}(o.Evented),ou={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Jc=0,gc=!1,Ip=function(l){function h(c){l.call(this),this.options=o.extend({},ou,c),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.onAdd=function(c){var m;return this._map=c,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),m=this._setupUI,Qc!==void 0?m(Qc):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(b){m(Qc=b.state!=="denied")}):m(Qc=!!o.window.navigator.geolocation),this._container},h.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Jc=0,gc=!1},h.prototype._isOutOfMapMaxBounds=function(c){var m=this._map.getMaxBounds(),b=c.coords;return m&&(b.longitude<m.getWest()||b.longitude>m.getEast()||b.latitude<m.getSouth()||b.latitude>m.getNorth())},h.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},h.prototype._onSuccess=function(c){if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(c),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(c),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",c)),this._finish()}},h.prototype._updateCamera=function(c){var m=new o.LngLat(c.coords.longitude,c.coords.latitude),b=c.coords.accuracy,w=this._map.getBearing(),E=o.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(m.toBounds(b),E,{geolocateSource:!0})},h.prototype._updateMarker=function(c){if(c){var m=new o.LngLat(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=c.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},h.prototype._updateCircleRadius=function(){var c=this._map._container.clientHeight/2,m=this._map.unproject([0,c]),b=this._map.unproject([1,c]),w=m.distanceTo(b),E=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=E+"px",this._circleElement.style.height=E+"px"},h.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},h.prototype._onError=function(c){if(this._map){if(this.options.trackUserLocation)if(c.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(c.code===3&&gc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",c)),this._finish()}},h.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},h.prototype._setupUI=function(c){var m=this;if(this._container.addEventListener("contextmenu",function(E){return E.preventDefault()}),this._geolocateButton=_.create("button","mapboxgl-ctrl-geolocate",this._container),_.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",c===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var b=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=b,this._geolocateButton.setAttribute("aria-label",b)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Eh(this._dotElement),this._circleElement=_.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Eh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(E){E.geolocateSource||m._watchState!=="ACTIVE_LOCK"||E.originalEvent&&E.originalEvent.type==="resize"||(m._watchState="BACKGROUND",m._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),m._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),m.fire(new o.Event("trackuserlocationend")))})},h.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Jc--,gc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var c;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Jc>1?(c={maximumAge:6e5,timeout:0},gc=!0):(c=this.options.positionOptions,gc=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,c)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},h.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},h}(o.Evented),Fu={maxWidth:100,unit:"metric"},Nu=function(l){this.options=o.extend({},Fu,l),o.bindAll(["_onMove","setUnit"],this)};function Ds(l,h,c){var m=c&&c.maxWidth||100,b=l._container.clientHeight/2,w=l.unproject([0,b]),E=l.unproject([m,b]),L=w.distanceTo(E);if(c&&c.unit==="imperial"){var F=3.2808*L;F>5280?Vu(h,m,F/5280,l._getUIString("ScaleControl.Miles")):Vu(h,m,F,l._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Vu(h,m,L/1852,l._getUIString("ScaleControl.NauticalMiles")):L>=1e3?Vu(h,m,L/1e3,l._getUIString("ScaleControl.Kilometers")):Vu(h,m,L,l._getUIString("ScaleControl.Meters"))}function Vu(l,h,c,m){var b,w,E,L=(b=c,(w=Math.pow(10,(""+Math.floor(b)).length-1))*(E=(E=b/w)>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(F){var H=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*H)/H}(E)));l.style.width=h*(L/c)+"px",l.innerHTML=L+"&nbsp;"+m}Nu.prototype.getDefaultPosition=function(){return"bottom-left"},Nu.prototype._onMove=function(){Ds(this._map,this._container,this.options)},Nu.prototype.onAdd=function(l){return this._map=l,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",l.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Nu.prototype.onRemove=function(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Nu.prototype.setUnit=function(l){this.options.unit=l,Ds(this._map,this._container,this.options)};var Rs=function(l){this._fullscreen=!1,l&&l.container&&(l.container instanceof o.window.HTMLElement?this._container=l.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};Rs.prototype.onAdd=function(l){return this._map=l,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Rs.prototype.onRemove=function(){_.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Rs.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},Rs.prototype._setupUI=function(){var l=this._fullscreenButton=_.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);_.create("span","mapboxgl-ctrl-icon",l).setAttribute("aria-hidden",!0),l.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Rs.prototype._updateTitle=function(){var l=this._getTitle();this._fullscreenButton.setAttribute("aria-label",l),this._fullscreenButton.title=l},Rs.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Rs.prototype._isFullscreen=function(){return this._fullscreen},Rs.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Rs.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Mp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Sh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ep=function(l){function h(c){l.call(this),this.options=o.extend(Object.create(Mp),c),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.addTo=function(c){return this._map&&this.remove(),this._map=c,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},h.prototype.isOpen=function(){return!!this._map},h.prototype.remove=function(){return this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},h.prototype.getLngLat=function(){return this._lngLat},h.prototype.setLngLat=function(c){return this._lngLat=o.LngLat.convert(c),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},h.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},h.prototype.getElement=function(){return this._container},h.prototype.setText=function(c){return this.setDOMContent(o.window.document.createTextNode(c))},h.prototype.setHTML=function(c){var m,b=o.window.document.createDocumentFragment(),w=o.window.document.createElement("body");for(w.innerHTML=c;m=w.firstChild;)b.appendChild(m);return this.setDOMContent(b)},h.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},h.prototype.setMaxWidth=function(c){return this.options.maxWidth=c,this._update(),this},h.prototype.setDOMContent=function(c){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(c),this._createCloseButton(),this._update(),this._focusFirstElement(),this},h.prototype.addClassName=function(c){this._container&&this._container.classList.add(c)},h.prototype.removeClassName=function(c){this._container&&this._container.classList.remove(c)},h.prototype.setOffset=function(c){return this.options.offset=c,this._update(),this},h.prototype.toggleClassName=function(c){if(this._container)return this._container.classList.toggle(c)},h.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=_.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},h.prototype._onMouseUp=function(c){this._update(c.point)},h.prototype._onMouseMove=function(c){this._update(c.point)},h.prototype._onDrag=function(c){this._update(c.point)},h.prototype._update=function(c){var m=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=_.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=_.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(it){return m._container.classList.add(it)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ua(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||c)){var b=this._pos=this._trackPointer&&c?c:this._map.project(this._lngLat),w=this.options.anchor,E=function it(ot){if(ot){if(typeof ot=="number"){var yt=Math.round(Math.sqrt(.5*Math.pow(ot,2)));return{center:new o.Point(0,0),top:new o.Point(0,ot),"top-left":new o.Point(yt,yt),"top-right":new o.Point(-yt,yt),bottom:new o.Point(0,-ot),"bottom-left":new o.Point(yt,-yt),"bottom-right":new o.Point(-yt,-yt),left:new o.Point(ot,0),right:new o.Point(-ot,0)}}if(ot instanceof o.Point||Array.isArray(ot)){var dt=o.Point.convert(ot);return{center:dt,top:dt,"top-left":dt,"top-right":dt,bottom:dt,"bottom-left":dt,"bottom-right":dt,left:dt,right:dt}}return{center:o.Point.convert(ot.center||[0,0]),top:o.Point.convert(ot.top||[0,0]),"top-left":o.Point.convert(ot["top-left"]||[0,0]),"top-right":o.Point.convert(ot["top-right"]||[0,0]),bottom:o.Point.convert(ot.bottom||[0,0]),"bottom-left":o.Point.convert(ot["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(ot["bottom-right"]||[0,0]),left:o.Point.convert(ot.left||[0,0]),right:o.Point.convert(ot.right||[0,0])}}return it(new o.Point(0,0))}(this.options.offset);if(!w){var L,F=this._container.offsetWidth,H=this._container.offsetHeight;L=b.y+E.bottom.y<H?["top"]:b.y>this._map.transform.height-H?["bottom"]:[],b.x<F/2?L.push("left"):b.x>this._map.transform.width-F/2&&L.push("right"),w=L.length===0?"bottom":L.join("-")}var et=b.add(E[w]).round();_.setTransform(this._container,mi[w]+" translate("+et.x+"px,"+et.y+"px)"),Cf(this._container,w,"popup")}},h.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var c=this._container.querySelector(Sh);c&&c.focus()}},h.prototype._onClose=function(){this.remove()},h}(o.Evented),zs={version:o.version,supported:y,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:Kc,NavigationControl:Ka,GeolocateControl:Ip,AttributionControl:Ho,ScaleControl:Nu,FullscreenControl:Rs,Popup:Ep,Marker:Eh,Style:Mi,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){se().acquire(oe)},clearPrewarmedResources:function(){var l=ln;l&&(l.isPreloaded()&&l.numActive()===1?(l.release(oe),ln=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(l){o.config.ACCESS_TOKEN=l},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(l){o.config.API_URL=l},get workerCount(){return ye.workerCount},set workerCount(l){ye.workerCount=l},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(l){o.config.MAX_PARALLEL_IMAGE_REQUESTS=l},clearStorage:function(l){o.clearTileCache(l)},workerUrl:""};return zs}),u})})(ZM);var s_=ZM.exports;const Wg=z_(s_),J9=di({__name:"GeoLocateControl",props:{...Wa},setup(t){const{coords:e,error:i,resume:a,pause:u}=K9({immediate:!1}),f=t,{mapId:o,callMap:y,moduleContainerProps:_}=So(f),{trans:C,setLocale:S}=ga(o.value);S({map:{action:{"geolocate-control-find-my-location":"Find my location","geolocate-control-location-not-available":"Location not available"}}});const k=Ke(!1),P=Ke(),B=Ke(0);let G,j,X=Ke(void 0),pt=Ke(void 0);const J=De(()=>i.value?Vk:Nv),nt=De(()=>i.value?i.value.message||C.value("map.action.geolocate-control-location-not-available"):C.value("map.action.geolocate-control-find-my-location"));vl(e,Bt=>{Bt.longitude==Number.POSITIVE_INFINITY||Bt.latitude==Number.POSITIVE_INFINITY||(P.value=[Bt.longitude,Bt.latitude],xt(),B.value=Bt.accuracy)});async function ft(){y(Bt=>{if(!k.value){k.value=!0,a(),sc(()=>{P.value&&Bt.flyTo({center:Vc(P),zoom:14})});return}if(Qt(Bt,Vc(e))){Bt.flyTo({center:P.value,zoom:14});return}u(),k.value=!1,P.value=void 0,Lt()})}cL(()=>{Lt()});function Lt(){y(Bt=>{Bt.off("zoom",Ht)}),X.value&&X.value.remove(),pt.value&&pt.value.remove()}uM(()=>{G||(G=jt("div","mapboxgl-user-location"),G.classList.add("mapboxgl-user-location"),G.appendChild(jt("div","mapboxgl-user-location-dot")),G.appendChild(jt("div","mapboxgl-user-location-heading"))),j||(j=jt("div","mapboxgl-user-location-accuracy-circle"))});function xt(){X.value=new s_.Marker({element:G,rotationAlignment:"map",pitchAlignment:"map"}),pt.value=new s_.Marker({element:j,pitchAlignment:"map"}),y(Bt=>{Bt.on("zoom",Ht),P.value&&(X.value&&X.value.setLngLat(P.value).addTo(Bt),pt.value&&pt.value.setLngLat(P.value).addTo(Bt)),Mt(Bt)})}function Mt(Bt){const Ft=Bt.getContainer().getBoundingClientRect().height/2,Ot=Bt.unproject([0,Ft]),de=Bt.unproject([100,Ft]),An=Ot.distanceTo(de)/100,_e=Math.ceil(2*B.value/An);j.style.width=`${_e}px`,j.style.height=`${_e}px`}function Ht(Bt){Mt(Bt.target)}const jt=function(Bt,Ft,Ot){const de=window.document.createElement(Bt);return Ft!==void 0&&(de.className=Ft),de};function Qt(Bt,Ft){const Ot=Bt.getBounds();return Ot&&(Ft.longitude<Ot.getWest()||Ft.longitude>Ot.getEast()||Ft.latitude<Ot.getSouth()||Ft.latitude>Ot.getNorth())}return(Bt,Ft)=>(ut(),Se(La,Ga(Pa(W(_))),{btn:Xt(()=>[Pt(Ar,{disabled:!!W(i),icon:J.value,tooltip:nt.value,active:k.value,onClick:so(ft,["stop"])},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:J.value},null,8,["path"])]),_:1},8,["disabled","icon","tooltip","active"])]),default:Xt(()=>[Hn(Bt.$slots,"default")]),_:3},16))}}),tN={class:"setting-container"},eN={class:"setting-field-container"},nN={class:"setting-center-container"},iN={__name:"GotoControl",props:{...Wa},setup(t){const e=t,[i,a]=md(!1),{callMap:u,mapId:f,moduleContainerProps:o}=So(e),{trans:y,setLocale:_}=ga(f.value);_({map:{"goto-control":{title:"Go to",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Go to"}}}});function C(){a(!i.value),i.value&&u(P=>{S.value.zoom=P.getZoom(),S.value.center=[P.getCenter().lng.toFixed(6),P.getCenter().lat.toFixed(6)],S.value.sprite=P.getStyle().sprite,S.value.glyphs=P.getStyle().glyphs})}const S=Ke({zoom:null,center:null,sprite:null,glyphs:null}),k=()=>{u(P=>{S.value.zoom&&P.setZoom(S.value.zoom),S.value.center&&P.setCenter(S.value.center)})};return(P,B)=>(ut(),Se(La,Ga(Pa(W(o))),{btn:Xt(()=>[Pt(Ar,{onClick:B[0]||(B[0]=so(G=>C(),["stop"])),tooltip:W(y)("map.goto-control.title")},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:W(Xb)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Xt(G=>[W(i)?(ut(),Se(W(mf),er({key:0,height:300,width:400},G,{show:W(i),"onUpdate:show":B[5]||(B[5]=j=>ra(i)?i.value=j:null),title:W(y)("map.goto-control.title")}),{default:Xt(()=>[At("div",tN,[At("div",eN,[At("div",null,[At("label",null,vn(W(y)("map.goto-control.field.center")),1),At("div",nN,[Pt(W(Oo),{modelValue:S.value.center[0],"onUpdate:modelValue":B[1]||(B[1]=j=>S.value.center[0]=j),type:"number",step:"0.0000001"},null,8,["modelValue"]),Pt(W(Oo),{modelValue:S.value.center[1],"onUpdate:modelValue":B[2]||(B[2]=j=>S.value.center[1]=j),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),At("div",null,[Pt(W(Oo),{label:W(y)("map.goto-control.field.zoom"),modelValue:S.value.zoom,"onUpdate:modelValue":B[3]||(B[3]=j=>S.value.zoom=j),type:"number",min:"0",max:"24"},null,8,["label","modelValue"])])]),Pt(W(zc),{class:"btn-container",onClick:B[4]||(B[4]=j=>k())},{default:Xt(()=>[xo(vn(W(y)("map.goto-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):sn("",!0)]),default:Xt(()=>[Hn(P.$slots,"default")]),_:3},16))}},rN=di({__name:"HomeControl",props:{...Wa,zoom:Number,center:Array},setup(t){const e=t,i=Ke({lat:0,lng:0}),a=Ke(e.zoom||0),{callMap:u,mapId:f,moduleContainerProps:o}=So(e,S),{trans:y,setLocale:_}=ga(f.value);_({map:{home:{title:"Default view"}}});function C(){u(k=>{k.setZoom(a.value),k.setCenter(i.value)})}function S(k){e.zoom!=null?a.value=e.zoom:a.value=k.getZoom(),e.center!=null?(i.value.lat=e.center[1],i.value.lng=e.center[0]):i.value=k.getCenter()}return(k,P)=>(ut(),Se(La,Ga(Pa(W(o))),{btn:Xt(()=>[Pt(Ar,{onClick:C,tooltip:W(y)("map.home.title")},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:W(Zk)},null,8,["path"])]),_:1},8,["tooltip"])]),default:Xt(()=>[Hn(k.$slots,"default")]),_:3},16))}}),oN=di({__name:"ActionControl",props:{...Wa},setup(t){const e=t,{callMap:i,mapId:a,moduleContainerProps:u}=So(e),f={},o=ia(a.value,bd),y=De(()=>o.items);vl(y,C=>{_(C)},{deep:!0});function _(C){const S=qv.groupBy(C,P=>P.event_map_type),k=[];i(P=>{for(const B in S)if(k.push(B),Object.prototype.hasOwnProperty.call(S,B)){const G=S[B],j=f[B],X=G[0];if(j&&j.id===X.id)return;j&&j.removeFromMap(P),f[B]=X,X&&X.addToMap(P),I2(a.value,B,X)}for(const B in f)if(Object.prototype.hasOwnProperty.call(f,B)){const G=f[B];!k.includes(B)&&G&&(G.removeFromMap(P),I2(a.value,B,void 0),f[B]=void 0)}})}return(C,S)=>(ut(),Se(La,Ga(Pa(W(u))),null,16))}}),aN=t=>(xh("data-v-47b29e32"),t=t(),bh(),t),sN={key:0,class:""},lN=aN(()=>At("div",{class:"not-support-map"},[At("p",{class:""}," Trình duyệt của bạn không hỗ trợ hiển thị bản đồ, vui lòng đổi trình duyệt hoặc cập nhật bản mới để xem. ")],-1)),uN=[lN],cN=["mapId"],hN={class:"map-viewer"},fN=["id"],pN=["id"],dN=["id"],mN=["id"],gN=["id"],vN=di({__name:"Map",props:{mapboxAccessToken:{type:String,default:""},initOptions:{type:Object,default:()=>({attributionControl:!1,zoomControl:!1})},dragId:{type:String}},emits:["map-loaded","map-destroy"],setup(t,{emit:e}){if(!Wg)throw new Error("mapboxgl is not installed.");const i=WM({mobile:0,tablet:640,laptop:1024,desktop:1280}),a={center:[105.19084739818732,15.827971829957548],zoom:5.297175623863693,maxZoom:22},u=t,f=e;Wg.accessToken=u.mapboxAccessToken;const o=Ke(),y=Ke(Wg.supported()),_=Ke(!1);let C;const S=Ke(lf());De(()=>dL[S.value]),Xl(()=>{const pt=Object.assign({},a,u.initOptions);C=new Wg.Map({accessToken:u.mapboxAccessToken,container:o.value,style:{version:8,metadata:{},sources:{},sprite:"https://tiles.eofactory.ai/styles/basic/sprite",glyphs:"https://tiles.eofactory.ai/fonts/{fontstack}/{range}.pbf",layers:[]},...pt}),C.id=S.value,cp.initMap(S.value,C),C.once("load",()=>{_.value=!0,f("map-loaded",C)})}),vd(()=>{C&&(C.remove(),f("map-destroy",C)),C=void 0,cp.removeMap(S.value)});const k=De(()=>`map-draggable-${S.value}`),P=De(()=>`bottom-right-${S.value}`),B=De(()=>`bottom-left-${S.value}`),G=De(()=>`top-right-${S.value}`),j=De(()=>`top-left-${S.value}`);cd("$map.dragId",u.dragId||k.value),cd("$map.id",S.value);const X=i.smallerOrEqual("tablet");return(pt,J)=>y.value?(ut(),Yt("div",{key:1,class:No(["map-container",{"map-mobile-container":W(X)}]),mapId:S.value},[At("div",hN,[At("div",{ref_key:"mapContainer",ref:o,class:"map-content",id:S.value},null,8,fN),u.dragId?sn("",!0):(ut(),Yt(Ai,{key:0},[At("div",{class:"right-bottom-container",id:P.value},null,8,pN),At("div",{class:"left-bottom-container",id:B.value},null,8,dN),At("div",{class:"right-top-container",id:G.value},null,8,mN),At("div",{class:"left-top-container",id:j.value},null,8,gN),Pt(W(EO),{class:"drag-container","container-id":k.value},null,8,["container-id"])],64)),_.value?Hn(pt.$slots,"default",{key:1},void 0,!0):sn("",!0),_.value?(ut(),Se(oN,{key:2})):sn("",!0)])],10,cN)):(ut(),Yt("div",sN,uN))}}),yN=Fn(vN,[["__scopeId","data-v-47b29e32"]]),_N={class:"button-container mouse-coordinates-container"},xN={class:"mouse-coordinates-part zoom-part"},bN={class:"mouse-coordinates-zoom"},AN={title:"Current Zoom",class:"icon"},wN={style:{"margin-left":"4px"}},CN={class:"mouse-coordinates-part coordinates-part"},IN={class:"mouse-coordinates-point"},MN=["innerHTML"],EN=["title"],SN={class:"mouse-coordinates-part crs-part"},TN={class:"mouse-coordinates-point"},kN=["value"],PN={class:"mouse-coordinates-part scale-part"},LN=di({__name:"MouseCoordinatesControl",props:{...Wa},setup(t){const{getCrsItems:e,setCrs:i,getCrs:a,getCrsItem:u}=nA,f=t,o={icon:Xb,zoom:Kk,change:Dk},y=Ke(),_=Ke(""),C=Ke({latitude:0,longitude:0}),S=Ke(0),k=Ke(!1),{callMap:P,mapId:B,moduleContainerProps:G}=So(f,Lt,xt),{format:j}=zM(B.value),X=De(()=>e(B.value)),pt=Ke(a(B.value)),J=Ke(u(B.value)),nt=De({get(){return pt.value},set(_e){return pt.value=_e,J.value=X.value.find(Ge=>Ge.epsg==_e),i(B.value,_e)}}),ft=De(()=>{var _e;return((_e=J.value)==null?void 0:_e.unit)==="degree"});function Lt(_e){S.value=+_e.getZoom().toFixed(2),_e.on("zoomend",Bt),_e.on("mousemove",Ht),_e.on("move",Mt),S.value=+_e.getZoom().toFixed(2);let Ge=_e.getCenter();C.value.latitude=Ge.lat,C.value.longitude=Ge.lng,Qt(),sc(()=>{Ft(_e,y.value)})}function xt(_e){_e.off("zoomend",Bt),_e.off("mousemove",Ht),_e.off("move",Mt)}function Mt(){P(_e=>{Ft(_e,y.value)})}const Ht=qv.debounce(function(_e){let Ge=[_e.lngLat.lng,_e.lngLat.lat];C.value.latitude=Ge[1],C.value.longitude=Ge[0],Qt()},15);function jt(){k.value=!k.value,Qt()}function Qt(){const _e=j(C.value,k.value);_.value=_e.longitude+", &nbsp;"+_e.latitude}function Bt(){P(_e=>{S.value=+_e.getZoom().toFixed(2)})}function Ft(_e,Ge){const Pi=_e.getContainer().clientHeight/2,Li=_e.unproject([0,Pi]),Qn=_e.unproject([100,Pi]),un=Li.distanceTo(Qn);un>=1e3?Ot(Ge,un/1e3,"km"):Ot(Ge,un,"m")}function Ot(_e,Ge,je){const Pi=An(Ge);_e&&(_e.innerHTML=`${Pi}&nbsp;${je}`)}function de(_e){const Ge=Math.pow(10,Math.ceil(-Math.log(_e)/Math.LN10));return Math.round(_e*Ge)/Ge}function An(_e){const Ge=Math.pow(10,`${Math.floor(_e)}`.length-1);let je=_e/Ge;return je=je>=10?10:je>=5?5:je>=3?3:je>=2?2:je>=1?1:de(je),Ge*je}return(_e,Ge)=>(ut(),Se(La,Ga(Pa(W(G))),{btn:Xt(()=>[At("div",_N,[At("div",xN,[At("div",bN,[At("span",AN,[Pt(W(Rn),{size:14,type:"mdi",path:o.zoom},null,8,["path"])]),At("div",wN,vn(S.value),1)])]),At("div",CN,[At("div",IN,[At("div",{style:Gr([{"margin-left":"4px"},{"min-width":k.value?"220px":"100px"}]),class:"selectable",innerHTML:_.value},null,12,MN),ft.value?(ut(),Yt("i",{key:0,title:k.value?"DMS <=> Latitude, Longitude":"Latitude, Longitude <=> DMS",style:{"margin-left":"4px"},onClick:jt,class:"icon icon-clickable"},[Pt(W(Rn),{size:14,type:"mdi",path:o.change},null,8,["path"])],8,EN)):sn("",!0)])]),At("div",SN,[At("div",TN,[oc(At("select",{"onUpdate:modelValue":Ge[0]||(Ge[0]=je=>nt.value=je),class:"crs-select",style:{width:"70px"}},[(ut(!0),Yt(Ai,null,Fo(X.value,je=>(ut(),Yt("option",{value:je.epsg,key:je.epsg},vn(je.name||je.epsg),9,kN))),128))],512),[[jb,nt.value]])])]),At("div",PN,[At("div",{ref_key:"scale",ref:y,class:"scale-custom"},null,512)])])]),_:1},16))}}),DN=Fn(LN,[["__scopeId","data-v-cf2741d5"]]),RN={class:"setting-container"},zN={class:"setting-field-container"},BN={class:"setting-center-container"},ON={__name:"SettingControl",props:{...Wa},setup(t){const e=t,[i,a]=md(!1),{callMap:u,mapId:f,moduleContainerProps:o}=So(e),{trans:y,setLocale:_}=ga(f.value);_({map:{"setting-control":{title:"Setting",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Apply"}}}});function C(){a(!i.value),i.value&&u(P=>{S.value.zoom=P.getZoom(),S.value.center=[P.getCenter().lng.toFixed(6),P.getCenter().lat.toFixed(6)],S.value.sprite=P.getStyle().sprite,S.value.glyphs=P.getStyle().glyphs})}const S=Ke({zoom:null,center:null,sprite:null,glyphs:null}),k=()=>{u(P=>{S.value.zoom&&P.setZoom(S.value.zoom),S.value.center&&P.setCenter(S.value.center);const B=P.getStyle();S.value.sprite&&(B.sprite=S.value.sprite),S.value.glyphs&&(B.glyphs=S.value.glyphs),P.setStyle(B)})};return(P,B)=>(ut(),Se(La,Ga(Pa(W(o))),{btn:Xt(()=>[Pt(Ar,{onClick:B[0]||(B[0]=so(G=>C(),["stop"])),tooltip:W(y)("map.setting-control.title")},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:W(Ok)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Xt(G=>[W(i)?(ut(),Se(W(mf),er({key:0,height:400,width:400},G,{show:W(i),"onUpdate:show":B[7]||(B[7]=j=>ra(i)?i.value=j:null),title:W(y)("map.setting-control.title")}),{default:Xt(()=>[At("div",RN,[At("div",zN,[At("div",null,[At("label",null,vn(W(y)("map.setting-control.field.center")),1),At("div",BN,[Pt(W(Oo),{modelValue:S.value.center[0],"onUpdate:modelValue":B[1]||(B[1]=j=>S.value.center[0]=j),type:"number",step:"0.0000001"},null,8,["modelValue"]),Pt(W(Oo),{modelValue:S.value.center[1],"onUpdate:modelValue":B[2]||(B[2]=j=>S.value.center[1]=j),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),At("div",null,[Pt(W(Oo),{label:W(y)("map.setting-control.field.zoom"),modelValue:S.value.zoom,"onUpdate:modelValue":B[3]||(B[3]=j=>S.value.zoom=j)},null,8,["label","modelValue"])]),At("div",null,[Pt(W(Oo),{label:W(y)("map.setting-control.field.sprite"),modelValue:S.value.sprite,"onUpdate:modelValue":B[4]||(B[4]=j=>S.value.sprite=j)},null,8,["label","modelValue"])]),At("div",null,[Pt(W(Oo),{label:W(y)("map.setting-control.field.glyphs"),modelValue:S.value.glyphs,"onUpdate:modelValue":B[5]||(B[5]=j=>S.value.glyphs=j)},null,8,["label","modelValue"])])]),Pt(W(zc),{class:"btn-container",onClick:B[6]||(B[6]=j=>k())},{default:Xt(()=>[xo(vn(W(y)("map.setting-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):sn("",!0)]),default:Xt(()=>[Hn(P.$slots,"default")]),_:3},16))}},FN=At("g",{fill:"none","fill-rule":"evenodd"},[At("path",{d:"M0 0h24v24H0z"}),At("path",{d:"M12 3l4 8H8z",fill:"#f44336"}),At("path",{d:"M12 21l-4-8h8z",fill:"#9E9E9E"})],-1),NN=[FN],VN={__name:"ZoomControl",props:{...Wa,showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0}},setup(t){const e={plus:xp,minus:e4},i=t,a=Ke("rotate(0deg)"),{callMap:u,mapId:f,moduleContainerProps:o}=So(i,S,k),{trans:y,setLocale:_}=ga(f.value);_({map:{action:{"navigation-control-zoom-in":"Zoom in","navigation-control-zoom-out":"Zoom out","navigation-control-reset-bearing":"Reset bearing to north"}}});let C=null;function S(X){C=j.bind(null,X),X.on("rotate",C)}function k(X){X.off("rotate",C)}function P(X){u(pt=>{pt.zoomIn({},{originalEvent:X})})}function B(X){u(pt=>{pt.zoomOut({},{originalEvent:X})})}function G(){u(X=>{X.easeTo({bearing:0,pitch:0})})}function j(X){const pt=X.getBearing()*-1;a.value=`rotate(${pt}deg)`}return(X,pt)=>(ut(),Se(La,Ga(Pa(W(o))),{btn:Xt(()=>[Pt(Vm,null,{default:Xt(()=>[t.showCompass?(ut(),Se(Ar,{key:0,onClick:G,title:W(y)("map.action.navigation-control-reset-bearing")},{default:Xt(()=>[(ut(),Yt("svg",{height:"22",style:Gr({transform:a.value}),viewBox:"0 0 24 24",width:"22",xmlns:"http://www.w3.org/2000/svg"},NN,4))]),_:1},8,["title"])):sn("",!0),t.showZoom?(ut(),Se(Ar,{key:1,onClick:P,title:W(y)("map.action.navigation-control-zoom-in")},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:e.plus},null,8,["path"])]),_:1},8,["title"])):sn("",!0),t.showZoom?(ut(),Se(Ar,{key:2,onClick:B,title:W(y)("map.action.navigation-control-zoom-out")},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:e.minus},null,8,["path"])]),_:1},8,["title"])):sn("",!0)]),_:1})]),default:Xt(()=>[Hn(X.$slots,"default")]),_:3},16))}};function z0(){const t=Math.floor(Math.random()*U2.length);return U2[t]}const U2=["#0E9F6E","#84A2AE","#BAC9CF","#D7E3E8","#EBF1F3","#da251d","#ffbd99","#ffa07f","#ff8365","#ff664c","#fb4834","#b90004","#9a0000","#7c0000","#600000","#25CCF7","#FD7272","#54a0ff","#00d2d3","#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d","#55efc4","#81ecec","#74b9ff","#a29bfe","#dfe6e9","#00b894","#00cec9","#0984e3","#6c5ce7","#ffeaa7","#fab1a0","#ff7675","#fd79a8","#fdcb6e","#e17055","#d63031","#feca57","#5f27cd","#54a0ff","#01a3a4"];var js=63710088e-1,xA={centimeters:js*100,centimetres:js*100,degrees:js/111325,feet:js*3.28084,inches:js*39.37,kilometers:js/1e3,kilometres:js/1e3,meters:js,metres:js,miles:js/1609.344,millimeters:js*1e3,millimetres:js*1e3,nauticalmiles:js/1852,radians:1,yards:js*1.0936},UN={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/js,yards:1.0936133},hb={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ac(t,e,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=e||{},a.geometry=t,a}function jN(t,e,i){switch(t){case"Point":return os(e).geometry;case"LineString":return As(e).geometry;case"Polygon":return Qm(e).geometry;case"MultiPoint":return $M(e).geometry;case"MultiLineString":return bA(e).geometry;case"MultiPolygon":return YM(e).geometry;default:throw new Error(t+" is invalid")}}function os(t,e,i){if(i===void 0&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!l_(t[0])||!l_(t[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:t};return ac(a,e,i)}function HN(t,e,i){return i===void 0&&(i={}),vp(t.map(function(a){return os(a,e)}),i)}function Qm(t,e,i){i===void 0&&(i={});for(var a=0,u=t;a<u.length;a++){var f=u[a];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<f[f.length-1].length;o++)if(f[f.length-1][o]!==f[0][o])throw new Error("First and last Position are not equivalent.")}var y={type:"Polygon",coordinates:t};return ac(y,e,i)}function GN(t,e,i){return i===void 0&&(i={}),vp(t.map(function(a){return Qm(a,e)}),i)}function As(t,e,i){if(i===void 0&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var a={type:"LineString",coordinates:t};return ac(a,e,i)}function qN(t,e,i){return i===void 0&&(i={}),vp(t.map(function(a){return As(a,e)}),i)}function vp(t,e){e===void 0&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function bA(t,e,i){i===void 0&&(i={});var a={type:"MultiLineString",coordinates:t};return ac(a,e,i)}function $M(t,e,i){i===void 0&&(i={});var a={type:"MultiPoint",coordinates:t};return ac(a,e,i)}function YM(t,e,i){i===void 0&&(i={});var a={type:"MultiPolygon",coordinates:t};return ac(a,e,i)}function WN(t,e,i){i===void 0&&(i={});var a={type:"GeometryCollection",geometries:t};return ac(a,e,i)}function ZN(t,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i}function AA(t,e){e===void 0&&(e="kilometers");var i=xA[e];if(!i)throw new Error(e+" units is invalid");return t*i}function wA(t,e){e===void 0&&(e="kilometers");var i=xA[e];if(!i)throw new Error(e+" units is invalid");return t/i}function $N(t,e){return CA(wA(t,e))}function XM(t){var e=t%360;return e<0&&(e+=360),e}function CA(t){var e=t%(2*Math.PI);return e*180/Math.PI}function nf(t){var e=t%360;return e*Math.PI/180}function YN(t,e,i){if(e===void 0&&(e="kilometers"),i===void 0&&(i="kilometers"),!(t>=0))throw new Error("length must be a positive number");return AA(wA(t,e),i)}function XN(t,e,i){if(e===void 0&&(e="meters"),i===void 0&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var a=hb[e];if(!a)throw new Error("invalid original units");var u=hb[i];if(!u)throw new Error("invalid final units");return t/a*u}function l_(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function IA(t){return!!t&&t.constructor===Object}function KN(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(t.length!==4&&t.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(e){if(!l_(e))throw new Error("bbox must only contain numbers")})}function QN(t){if(!t)throw new Error("id is required");if(["string","number"].indexOf(typeof t)===-1)throw new Error("id must be a number or a string")}const JN=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:hb,bearingToAzimuth:XM,convertArea:XN,convertLength:YN,degreesToRadians:nf,earthRadius:js,factors:xA,feature:ac,featureCollection:vp,geometry:jN,geometryCollection:WN,isNumber:l_,isObject:IA,lengthToDegrees:$N,lengthToRadians:wA,lineString:As,lineStrings:qN,multiLineString:bA,multiPoint:$M,multiPolygon:YM,point:os,points:HN,polygon:Qm,polygons:GN,radiansToDegrees:CA,radiansToLength:AA,round:ZN,unitsFactors:UN,validateBBox:KN,validateId:QN},Symbol.toStringTag,{value:"Module"}));function Ad(t,e,i){if(t!==null)for(var a,u,f,o,y,_,C,S=0,k=0,P,B=t.type,G=B==="FeatureCollection",j=B==="Feature",X=G?t.features.length:1,pt=0;pt<X;pt++){C=G?t.features[pt].geometry:j?t.geometry:t,P=C?C.type==="GeometryCollection":!1,y=P?C.geometries.length:1;for(var J=0;J<y;J++){var nt=0,ft=0;if(o=P?C.geometries[J]:C,o!==null){_=o.coordinates;var Lt=o.type;switch(S=i&&(Lt==="Polygon"||Lt==="MultiPolygon")?1:0,Lt){case null:break;case"Point":if(e(_,k,pt,nt,ft)===!1)return!1;k++,nt++;break;case"LineString":case"MultiPoint":for(a=0;a<_.length;a++){if(e(_[a],k,pt,nt,ft)===!1)return!1;k++,Lt==="MultiPoint"&&nt++}Lt==="LineString"&&nt++;break;case"Polygon":case"MultiLineString":for(a=0;a<_.length;a++){for(u=0;u<_[a].length-S;u++){if(e(_[a][u],k,pt,nt,ft)===!1)return!1;k++}Lt==="MultiLineString"&&nt++,Lt==="Polygon"&&ft++}Lt==="Polygon"&&nt++;break;case"MultiPolygon":for(a=0;a<_.length;a++){for(ft=0,u=0;u<_[a].length;u++){for(f=0;f<_[a][u].length-S;f++){if(e(_[a][u][f],k,pt,nt,ft)===!1)return!1;k++}ft++}nt++}break;case"GeometryCollection":for(a=0;a<o.geometries.length;a++)if(Ad(o.geometries[a],e,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function tV(t,e,i,a){var u=i;return Ad(t,function(f,o,y,_,C){o===0&&i===void 0?u=f:u=e(u,f,o,y,_,C)},a),u}function KM(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&e(t.features[i].properties,i)!==!1;i++);break;case"Feature":e(t.properties,0);break}}function eV(t,e,i){var a=i;return KM(t,function(u,f){f===0&&i===void 0?a=u:a=e(a,u,f)}),a}function u_(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var i=0;i<t.features.length&&e(t.features[i],i)!==!1;i++);}function nV(t,e,i){var a=i;return u_(t,function(u,f){f===0&&i===void 0?a=u:a=e(a,u,f)}),a}function iV(t){var e=[];return Ad(t,function(i){e.push(i)}),e}function MA(t,e){var i,a,u,f,o,y,_,C,S,k,P=0,B=t.type==="FeatureCollection",G=t.type==="Feature",j=B?t.features.length:1;for(i=0;i<j;i++){for(y=B?t.features[i].geometry:G?t.geometry:t,C=B?t.features[i].properties:G?t.properties:{},S=B?t.features[i].bbox:G?t.bbox:void 0,k=B?t.features[i].id:G?t.id:void 0,_=y?y.type==="GeometryCollection":!1,o=_?y.geometries.length:1,u=0;u<o;u++){if(f=_?y.geometries[u]:y,f===null){if(e(null,P,C,S,k)===!1)return!1;continue}switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(f,P,C,S,k)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<f.geometries.length;a++)if(e(f.geometries[a],P,C,S,k)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}P++}}function QM(t,e,i){var a=i;return MA(t,function(u,f,o,y,_){f===0&&i===void 0?a=u:a=e(a,u,f,o,y,_)}),a}function uf(t,e){MA(t,function(i,a,u,f,o){var y=i===null?null:i.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return e(ac(i,u,{bbox:f,id:o}),a,0)===!1?!1:void 0}var _;switch(y){case"MultiPoint":_="Point";break;case"MultiLineString":_="LineString";break;case"MultiPolygon":_="Polygon";break}for(var C=0;C<i.coordinates.length;C++){var S=i.coordinates[C],k={type:_,coordinates:S};if(e(ac(k,u),a,C)===!1)return!1}})}function rV(t,e,i){var a=i;return uf(t,function(u,f,o){f===0&&o===0&&i===void 0?a=u:a=e(a,u,f,o)}),a}function JM(t,e){uf(t,function(i,a,u){var f=0;if(i.geometry){var o=i.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var y,_=0,C=0,S=0;if(Ad(i,function(k,P,B,G,j){if(y===void 0||a>_||G>C||j>S){y=k,_=a,C=G,S=j,f=0;return}var X=As([y,k],i.properties);if(e(X,a,u,j,f)===!1)return!1;f++,y=k})===!1)return!1}}})}function tE(t,e,i){var a=i,u=!1;return JM(t,function(f,o,y,_,C){u===!1&&i===void 0?a=f:a=e(a,f,o,y,_,C),u=!0}),a}function eE(t,e){if(!t)throw new Error("geojson is required");uf(t,function(i,a,u){if(i.geometry!==null){var f=i.geometry.type,o=i.geometry.coordinates;switch(f){case"LineString":if(e(i,a,u,0,0)===!1)return!1;break;case"Polygon":for(var y=0;y<o.length;y++)if(e(As(o[y],i.properties),a,u,y)===!1)return!1;break}}})}function oV(t,e,i){var a=i;return eE(t,function(u,f,o,y){f===0&&i===void 0?a=u:a=e(a,u,f,o,y)}),a}function aV(t,e){if(e=e||{},!IA(e))throw new Error("options is invalid");var i=e.featureIndex||0,a=e.multiFeatureIndex||0,u=e.geometryIndex||0,f=e.segmentIndex||0,o=e.properties,y;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),o=o||t.features[i].properties,y=t.features[i].geometry;break;case"Feature":o=o||t.properties,y=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=t;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var _=y.coordinates;switch(y.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=_.length+f-1),As([_[f],_[f+1]],o,e);case"Polygon":return u<0&&(u=_.length+u),f<0&&(f=_[u].length+f-1),As([_[u][f],_[u][f+1]],o,e);case"MultiLineString":return a<0&&(a=_.length+a),f<0&&(f=_[a].length+f-1),As([_[a][f],_[a][f+1]],o,e);case"MultiPolygon":return a<0&&(a=_.length+a),u<0&&(u=_[a].length+u),f<0&&(f=_[a][u].length-f-1),As([_[a][u][f],_[a][u][f+1]],o,e)}throw new Error("geojson is invalid")}function sV(t,e){if(e=e||{},!IA(e))throw new Error("options is invalid");var i=e.featureIndex||0,a=e.multiFeatureIndex||0,u=e.geometryIndex||0,f=e.coordIndex||0,o=e.properties,y;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),o=o||t.features[i].properties,y=t.features[i].geometry;break;case"Feature":o=o||t.properties,y=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=t;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var _=y.coordinates;switch(y.type){case"Point":return os(_,o,e);case"MultiPoint":return a<0&&(a=_.length+a),os(_[a],o,e);case"LineString":return f<0&&(f=_.length+f),os(_[f],o,e);case"Polygon":return u<0&&(u=_.length+u),f<0&&(f=_[u].length+f),os(_[u][f],o,e);case"MultiLineString":return a<0&&(a=_.length+a),f<0&&(f=_[a].length+f),os(_[a][f],o,e);case"MultiPolygon":return a<0&&(a=_.length+a),u<0&&(u=_[a].length+u),f<0&&(f=_[a][u].length-f),os(_[a][u][f],o,e)}throw new Error("geojson is invalid")}const lV=Object.freeze(Object.defineProperty({__proto__:null,coordAll:iV,coordEach:Ad,coordReduce:tV,featureEach:u_,featureReduce:nV,findPoint:sV,findSegment:aV,flattenEach:uf,flattenReduce:rV,geomEach:MA,geomReduce:QM,lineEach:eE,lineReduce:oV,propEach:KM,propReduce:eV,segmentEach:JM,segmentReduce:tE},Symbol.toStringTag,{value:"Module"}));function Hm(t){var e=[1/0,1/0,-1/0,-1/0];return Ad(t,function(i){e[0]>i[0]&&(e[0]=i[0]),e[1]>i[1]&&(e[1]=i[1]),e[2]<i[0]&&(e[2]=i[0]),e[3]<i[1]&&(e[3]=i[1])}),e}Hm.default=Hm;const uV=Object.freeze(Object.defineProperty({__proto__:null,default:Hm},Symbol.toStringTag,{value:"Module"}));function Pv(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Lv(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Q_(t){return t.type==="Feature"?t.geometry:t}function Dv(t,e,i){if(i===void 0&&(i={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var a=Pv(t),u=Q_(e),f=u.type,o=e.bbox,y=u.coordinates;if(o&&cV(a,o)===!1)return!1;f==="Polygon"&&(y=[y]);for(var _=!1,C=0;C<y.length&&!_;C++)if(j2(a,y[C][0],i.ignoreBoundary)){for(var S=!1,k=1;k<y[C].length&&!S;)j2(a,y[C][k],!i.ignoreBoundary)&&(S=!0),k++;S||(_=!0)}return _}function j2(t,e,i){var a=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var u=0,f=e.length-1;u<e.length;f=u++){var o=e[u][0],y=e[u][1],_=e[f][0],C=e[f][1],S=t[1]*(o-_)+y*(_-t[0])+C*(t[0]-o)===0&&(o-t[0])*(_-t[0])<=0&&(y-t[1])*(C-t[1])<=0;if(S)return!i;var k=y>t[1]!=C>t[1]&&t[0]<(_-o)*(t[1]-y)/(C-y)+o;k&&(a=!a)}return a}function cV(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function hV(t,e,i){i===void 0&&(i={});var a=Pv(t),u=Pv(e),f=nf(u[1]-a[1]),o=nf(u[0]-a[0]),y=nf(a[1]),_=nf(u[1]),C=Math.pow(Math.sin(f/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(y)*Math.cos(_);return AA(2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C)),i.units)}function nE(t,e,i){if(i===void 0&&(i={}),i.final===!0)return fV(t,e);var a=Pv(t),u=Pv(e),f=nf(a[0]),o=nf(u[0]),y=nf(a[1]),_=nf(u[1]),C=Math.sin(o-f)*Math.cos(_),S=Math.cos(y)*Math.sin(_)-Math.sin(y)*Math.cos(_)*Math.cos(o-f);return CA(Math.atan2(C,S))}function fV(t,e){var i=nE(e,t);return i=(i+180)%360,i}function pV(t,e){e===void 0&&(e={});var i=0,a=0,u=0;return Ad(t,function(f){i+=f[0],a+=f[1],u++},!0),os([i/u,a/u],e.properties)}function H2(t){if(!t)throw new Error("geojson is required");var e=[];return uf(t,function(i){dV(i,e)}),vp(e)}function dV(t,e){var i=[],a=t.geometry;if(a!==null){switch(a.type){case"Polygon":i=Lv(a);break;case"LineString":i=[Lv(a)]}i.forEach(function(u){var f=mV(u,t.properties);f.forEach(function(o){o.id=e.length,e.push(o)})})}}function mV(t,e){var i=[];return t.reduce(function(a,u){var f=As([a,u],e);return f.bbox=gV(a,u),i.push(f),u}),i}function gV(t,e){var i=t[0],a=t[1],u=e[0],f=e[1],o=i<u?i:u,y=a<f?a:f,_=i>u?i:u,C=a>f?a:f;return[o,y,_,C]}var EA={exports:{}},iE={exports:{}};(function(t,e){(function(i,a){t.exports=a()})(bs,function(){function i(J,nt,ft,Lt,xt){(function Mt(Ht,jt,Qt,Bt,Ft){for(;Bt>Qt;){if(Bt-Qt>600){var Ot=Bt-Qt+1,de=jt-Qt+1,An=Math.log(Ot),_e=.5*Math.exp(2*An/3),Ge=.5*Math.sqrt(An*_e*(Ot-_e)/Ot)*(de-Ot/2<0?-1:1),je=Math.max(Qt,Math.floor(jt-de*_e/Ot+Ge)),Pi=Math.min(Bt,Math.floor(jt+(Ot-de)*_e/Ot+Ge));Mt(Ht,jt,je,Pi,Ft)}var Li=Ht[jt],Qn=Qt,un=Bt;for(a(Ht,Qt,jt),Ft(Ht[Bt],Li)>0&&a(Ht,Qt,Bt);Qn<un;){for(a(Ht,Qn,un),Qn++,un--;Ft(Ht[Qn],Li)<0;)Qn++;for(;Ft(Ht[un],Li)>0;)un--}Ft(Ht[Qt],Li)===0?a(Ht,Qt,un):a(Ht,++un,Bt),un<=jt&&(Qt=un+1),jt<=un&&(Bt=un-1)}})(J,nt,ft||0,Lt||J.length-1,xt||u)}function a(J,nt,ft){var Lt=J[nt];J[nt]=J[ft],J[ft]=Lt}function u(J,nt){return J<nt?-1:J>nt?1:0}var f=function(J){J===void 0&&(J=9),this._maxEntries=Math.max(4,J),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(J,nt,ft){if(!ft)return nt.indexOf(J);for(var Lt=0;Lt<nt.length;Lt++)if(ft(J,nt[Lt]))return Lt;return-1}function y(J,nt){_(J,0,J.children.length,nt,J)}function _(J,nt,ft,Lt,xt){xt||(xt=X(null)),xt.minX=1/0,xt.minY=1/0,xt.maxX=-1/0,xt.maxY=-1/0;for(var Mt=nt;Mt<ft;Mt++){var Ht=J.children[Mt];C(xt,J.leaf?Lt(Ht):Ht)}return xt}function C(J,nt){return J.minX=Math.min(J.minX,nt.minX),J.minY=Math.min(J.minY,nt.minY),J.maxX=Math.max(J.maxX,nt.maxX),J.maxY=Math.max(J.maxY,nt.maxY),J}function S(J,nt){return J.minX-nt.minX}function k(J,nt){return J.minY-nt.minY}function P(J){return(J.maxX-J.minX)*(J.maxY-J.minY)}function B(J){return J.maxX-J.minX+(J.maxY-J.minY)}function G(J,nt){return J.minX<=nt.minX&&J.minY<=nt.minY&&nt.maxX<=J.maxX&&nt.maxY<=J.maxY}function j(J,nt){return nt.minX<=J.maxX&&nt.minY<=J.maxY&&nt.maxX>=J.minX&&nt.maxY>=J.minY}function X(J){return{children:J,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function pt(J,nt,ft,Lt,xt){for(var Mt=[nt,ft];Mt.length;)if(!((ft=Mt.pop())-(nt=Mt.pop())<=Lt)){var Ht=nt+Math.ceil((ft-nt)/Lt/2)*Lt;i(J,Ht,nt,ft,xt),Mt.push(nt,Ht,Ht,ft)}}return f.prototype.all=function(){return this._all(this.data,[])},f.prototype.search=function(J){var nt=this.data,ft=[];if(!j(J,nt))return ft;for(var Lt=this.toBBox,xt=[];nt;){for(var Mt=0;Mt<nt.children.length;Mt++){var Ht=nt.children[Mt],jt=nt.leaf?Lt(Ht):Ht;j(J,jt)&&(nt.leaf?ft.push(Ht):G(J,jt)?this._all(Ht,ft):xt.push(Ht))}nt=xt.pop()}return ft},f.prototype.collides=function(J){var nt=this.data;if(!j(J,nt))return!1;for(var ft=[];nt;){for(var Lt=0;Lt<nt.children.length;Lt++){var xt=nt.children[Lt],Mt=nt.leaf?this.toBBox(xt):xt;if(j(J,Mt)){if(nt.leaf||G(J,Mt))return!0;ft.push(xt)}}nt=ft.pop()}return!1},f.prototype.load=function(J){if(!J||!J.length)return this;if(J.length<this._minEntries){for(var nt=0;nt<J.length;nt++)this.insert(J[nt]);return this}var ft=this._build(J.slice(),0,J.length-1,0);if(this.data.children.length)if(this.data.height===ft.height)this._splitRoot(this.data,ft);else{if(this.data.height<ft.height){var Lt=this.data;this.data=ft,ft=Lt}this._insert(ft,this.data.height-ft.height-1,!0)}else this.data=ft;return this},f.prototype.insert=function(J){return J&&this._insert(J,this.data.height-1),this},f.prototype.clear=function(){return this.data=X([]),this},f.prototype.remove=function(J,nt){if(!J)return this;for(var ft,Lt,xt,Mt=this.data,Ht=this.toBBox(J),jt=[],Qt=[];Mt||jt.length;){if(Mt||(Mt=jt.pop(),Lt=jt[jt.length-1],ft=Qt.pop(),xt=!0),Mt.leaf){var Bt=o(J,Mt.children,nt);if(Bt!==-1)return Mt.children.splice(Bt,1),jt.push(Mt),this._condense(jt),this}xt||Mt.leaf||!G(Mt,Ht)?Lt?(ft++,Mt=Lt.children[ft],xt=!1):Mt=null:(jt.push(Mt),Qt.push(ft),ft=0,Lt=Mt,Mt=Mt.children[0])}return this},f.prototype.toBBox=function(J){return J},f.prototype.compareMinX=function(J,nt){return J.minX-nt.minX},f.prototype.compareMinY=function(J,nt){return J.minY-nt.minY},f.prototype.toJSON=function(){return this.data},f.prototype.fromJSON=function(J){return this.data=J,this},f.prototype._all=function(J,nt){for(var ft=[];J;)J.leaf?nt.push.apply(nt,J.children):ft.push.apply(ft,J.children),J=ft.pop();return nt},f.prototype._build=function(J,nt,ft,Lt){var xt,Mt=ft-nt+1,Ht=this._maxEntries;if(Mt<=Ht)return y(xt=X(J.slice(nt,ft+1)),this.toBBox),xt;Lt||(Lt=Math.ceil(Math.log(Mt)/Math.log(Ht)),Ht=Math.ceil(Mt/Math.pow(Ht,Lt-1))),(xt=X([])).leaf=!1,xt.height=Lt;var jt=Math.ceil(Mt/Ht),Qt=jt*Math.ceil(Math.sqrt(Ht));pt(J,nt,ft,Qt,this.compareMinX);for(var Bt=nt;Bt<=ft;Bt+=Qt){var Ft=Math.min(Bt+Qt-1,ft);pt(J,Bt,Ft,jt,this.compareMinY);for(var Ot=Bt;Ot<=Ft;Ot+=jt){var de=Math.min(Ot+jt-1,Ft);xt.children.push(this._build(J,Ot,de,Lt-1))}}return y(xt,this.toBBox),xt},f.prototype._chooseSubtree=function(J,nt,ft,Lt){for(;Lt.push(nt),!nt.leaf&&Lt.length-1!==ft;){for(var xt=1/0,Mt=1/0,Ht=void 0,jt=0;jt<nt.children.length;jt++){var Qt=nt.children[jt],Bt=P(Qt),Ft=(Ot=J,de=Qt,(Math.max(de.maxX,Ot.maxX)-Math.min(de.minX,Ot.minX))*(Math.max(de.maxY,Ot.maxY)-Math.min(de.minY,Ot.minY))-Bt);Ft<Mt?(Mt=Ft,xt=Bt<xt?Bt:xt,Ht=Qt):Ft===Mt&&Bt<xt&&(xt=Bt,Ht=Qt)}nt=Ht||nt.children[0]}var Ot,de;return nt},f.prototype._insert=function(J,nt,ft){var Lt=ft?J:this.toBBox(J),xt=[],Mt=this._chooseSubtree(Lt,this.data,nt,xt);for(Mt.children.push(J),C(Mt,Lt);nt>=0&&xt[nt].children.length>this._maxEntries;)this._split(xt,nt),nt--;this._adjustParentBBoxes(Lt,xt,nt)},f.prototype._split=function(J,nt){var ft=J[nt],Lt=ft.children.length,xt=this._minEntries;this._chooseSplitAxis(ft,xt,Lt);var Mt=this._chooseSplitIndex(ft,xt,Lt),Ht=X(ft.children.splice(Mt,ft.children.length-Mt));Ht.height=ft.height,Ht.leaf=ft.leaf,y(ft,this.toBBox),y(Ht,this.toBBox),nt?J[nt-1].children.push(Ht):this._splitRoot(ft,Ht)},f.prototype._splitRoot=function(J,nt){this.data=X([J,nt]),this.data.height=J.height+1,this.data.leaf=!1,y(this.data,this.toBBox)},f.prototype._chooseSplitIndex=function(J,nt,ft){for(var Lt,xt,Mt,Ht,jt,Qt,Bt,Ft=1/0,Ot=1/0,de=nt;de<=ft-nt;de++){var An=_(J,0,de,this.toBBox),_e=_(J,de,ft,this.toBBox),Ge=(xt=An,Mt=_e,Ht=void 0,jt=void 0,Qt=void 0,Bt=void 0,Ht=Math.max(xt.minX,Mt.minX),jt=Math.max(xt.minY,Mt.minY),Qt=Math.min(xt.maxX,Mt.maxX),Bt=Math.min(xt.maxY,Mt.maxY),Math.max(0,Qt-Ht)*Math.max(0,Bt-jt)),je=P(An)+P(_e);Ge<Ft?(Ft=Ge,Lt=de,Ot=je<Ot?je:Ot):Ge===Ft&&je<Ot&&(Ot=je,Lt=de)}return Lt||ft-nt},f.prototype._chooseSplitAxis=function(J,nt,ft){var Lt=J.leaf?this.compareMinX:S,xt=J.leaf?this.compareMinY:k;this._allDistMargin(J,nt,ft,Lt)<this._allDistMargin(J,nt,ft,xt)&&J.children.sort(Lt)},f.prototype._allDistMargin=function(J,nt,ft,Lt){J.children.sort(Lt);for(var xt=this.toBBox,Mt=_(J,0,nt,xt),Ht=_(J,ft-nt,ft,xt),jt=B(Mt)+B(Ht),Qt=nt;Qt<ft-nt;Qt++){var Bt=J.children[Qt];C(Mt,J.leaf?xt(Bt):Bt),jt+=B(Mt)}for(var Ft=ft-nt-1;Ft>=nt;Ft--){var Ot=J.children[Ft];C(Ht,J.leaf?xt(Ot):Ot),jt+=B(Ht)}return jt},f.prototype._adjustParentBBoxes=function(J,nt,ft){for(var Lt=ft;Lt>=0;Lt--)C(nt[Lt],J)},f.prototype._condense=function(J){for(var nt=J.length-1,ft=void 0;nt>=0;nt--)J[nt].children.length===0?nt>0?(ft=J[nt-1].children).splice(ft.indexOf(J[nt]),1):this.clear():y(J[nt],this.toBBox)},f})})(iE);var vV=iE.exports;const yV=pA(JN),_V=pA(lV),xV=pA(uV);var hh=vV,rE=yV,oE=_V,gm=xV.default,bV=oE.featureEach;oE.coordEach;rE.polygon;var G2=rE.featureCollection;function aE(t){var e=new hh(t);return e.insert=function(i){if(i.type!=="Feature")throw new Error("invalid feature");return i.bbox=i.bbox?i.bbox:gm(i),hh.prototype.insert.call(this,i)},e.load=function(i){var a=[];return Array.isArray(i)?i.forEach(function(u){if(u.type!=="Feature")throw new Error("invalid features");u.bbox=u.bbox?u.bbox:gm(u),a.push(u)}):bV(i,function(u){if(u.type!=="Feature")throw new Error("invalid features");u.bbox=u.bbox?u.bbox:gm(u),a.push(u)}),hh.prototype.load.call(this,a)},e.remove=function(i,a){if(i.type!=="Feature")throw new Error("invalid feature");return i.bbox=i.bbox?i.bbox:gm(i),hh.prototype.remove.call(this,i,a)},e.clear=function(){return hh.prototype.clear.call(this)},e.search=function(i){var a=hh.prototype.search.call(this,this.toBBox(i));return G2(a)},e.collides=function(i){return hh.prototype.collides.call(this,this.toBBox(i))},e.all=function(){var i=hh.prototype.all.call(this);return G2(i)},e.toJSON=function(){return hh.prototype.toJSON.call(this)},e.fromJSON=function(i){return hh.prototype.fromJSON.call(this,i)},e.toBBox=function(i){var a;if(i.bbox)a=i.bbox;else if(Array.isArray(i)&&i.length===4)a=i;else if(Array.isArray(i)&&i.length===6)a=[i[0],i[1],i[3],i[4]];else if(i.type==="Feature")a=gm(i);else if(i.type==="FeatureCollection")a=gm(i);else throw new Error("invalid geojson");return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}},e}EA.exports=aE;EA.exports.default=aE;var AV=EA.exports;const wV=z_(AV);function SA(t,e){var i={},a=[];if(t.type==="LineString"&&(t=ac(t)),e.type==="LineString"&&(e=ac(e)),t.type==="Feature"&&e.type==="Feature"&&t.geometry!==null&&e.geometry!==null&&t.geometry.type==="LineString"&&e.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var u=q2(t,e);return u&&a.push(u),vp(a)}var f=wV();return f.load(H2(e)),u_(H2(t),function(o){u_(f.search(o),function(y){var _=q2(o,y);if(_){var C=Lv(_).join(",");i[C]||(i[C]=!0,a.push(_))}})}),vp(a)}function q2(t,e){var i=Lv(t),a=Lv(e);if(i.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(a.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var u=i[0][0],f=i[0][1],o=i[1][0],y=i[1][1],_=a[0][0],C=a[0][1],S=a[1][0],k=a[1][1],P=(k-C)*(o-u)-(S-_)*(y-f),B=(S-_)*(f-C)-(k-C)*(u-_),G=(o-u)*(f-C)-(y-f)*(u-_);if(P===0)return null;var j=B/P,X=G/P;if(j>=0&&j<=1&&X>=0&&X<=1){var pt=u+j*(o-u),J=f+j*(y-f);return os([pt,J])}return null}var W2=6378137;function CV(t){return QM(t,function(e,i){return e+IV(i)},0)}function IV(t){var e=0,i;switch(t.type){case"Polygon":return Z2(t.coordinates);case"MultiPolygon":for(i=0;i<t.coordinates.length;i++)e+=Z2(t.coordinates[i]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Z2(t){var e=0;if(t&&t.length>0){e+=Math.abs($2(t[0]));for(var i=1;i<t.length;i++)e-=Math.abs($2(t[i]))}return e}function $2(t){var e,i,a,u,f,o,y,_=0,C=t.length;if(C>2){for(y=0;y<C;y++)y===C-2?(u=C-2,f=C-1,o=0):y===C-1?(u=C-1,f=0,o=1):(u=y,f=y+1,o=y+2),e=t[u],i=t[f],a=t[o],_+=(bx(a[0])-bx(e[0]))*Math.sin(bx(i[1]));_=_*W2*W2/2}return _}function bx(t){return t*Math.PI/180}function Y2(t,e){return e===void 0&&(e={}),tE(t,function(i,a){var u=a.geometry.coordinates;return i+hV(u[0],u[1],e)},0)}function fb(t,e){e===void 0&&(e={});var i=Q_(t);switch(!e.properties&&t.type==="Feature"&&(e.properties=t.properties),i.type){case"Polygon":return MV(i,e);case"MultiPolygon":return EV(i,e);default:throw new Error("invalid poly")}}function MV(t,e){e===void 0&&(e={});var i=Q_(t),a=i.coordinates,u=e.properties?e.properties:t.type==="Feature"?t.properties:{};return sE(a,u)}function EV(t,e){e===void 0&&(e={});var i=Q_(t),a=i.coordinates,u=e.properties?e.properties:t.type==="Feature"?t.properties:{},f=[];return a.forEach(function(o){f.push(sE(o,u))}),vp(f)}function sE(t,e){return t.length>1?bA(t,e):As(t[0],e)}function SV(t,e){var i=!0;return uf(t,function(a){uf(e,function(u){if(i===!1)return!1;i=TV(a.geometry,u.geometry)})}),i}function TV(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!DV(t.coordinates,e.coordinates);case"LineString":return!X2(e,t);case"Polygon":return!Dv(t,e)}break;case"LineString":switch(e.type){case"Point":return!X2(t,e);case"LineString":return!kV(t,e);case"Polygon":return!K2(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Dv(e,t);case"LineString":return!K2(t,e);case"Polygon":return!PV(e,t)}}return!1}function X2(t,e){for(var i=0;i<t.coordinates.length-1;i++)if(LV(t.coordinates[i],t.coordinates[i+1],e.coordinates))return!0;return!1}function kV(t,e){var i=SA(t,e);return i.features.length>0}function K2(t,e){for(var i=0,a=e.coordinates;i<a.length;i++){var u=a[i];if(Dv(u,t))return!0}var f=SA(e,fb(t));return f.features.length>0}function PV(t,e){for(var i=0,a=t.coordinates[0];i<a.length;i++){var u=a[i];if(Dv(u,e))return!0}for(var f=0,o=e.coordinates[0];f<o.length;f++){var y=o[f];if(Dv(y,t))return!0}var _=SA(fb(t),fb(e));return _.features.length>0}function LV(t,e,i){var a=i[0]-t[0],u=i[1]-t[1],f=e[0]-t[0],o=e[1]-t[1],y=a*o-u*f;return y!==0?!1:Math.abs(f)>=Math.abs(o)?f>0?t[0]<=i[0]&&i[0]<=e[0]:e[0]<=i[0]&&i[0]<=t[0]:o>0?t[1]<=i[1]&&i[1]<=e[1]:e[1]<=i[1]&&i[1]<=t[1]}function DV(t,e){return t[0]===e[0]&&t[1]===e[1]}function RV(t,e){var i=!1;return uf(t,function(a){uf(e,function(u){if(i===!0)return!0;i=!SV(a.geometry,u.geometry)})}),i}function lE(t,e,{zoom:i=15}={}){if(!e||!t)return;const a={top:50,bottom:50,left:50,right:50};if(["Point"].includes(e.type)){t.easeTo({center:e.coordinates,zoom:i,duration:0,padding:a});return}a.left=a.left,a.right=a.right;let u;e.length==4?u=e:u=zV(e),u&&t.fitBounds(u,{padding:a,duration:0})}function zV(t){if(!t.type)return;let e;return["Feature","FeatureCollection"].includes(t.type)?e=Hm(t):e=Hm({type:"Feature",properties:{},geometry:t}),e}function BV(t,e={}){if(t.length!=0)return t.length==1?os(t[0],e):t.length==2?As(t,e):Qm([[...t,t[0]]],e)}const fv="base_map_control_";class OV{constructor(){this._baseMap=void 0,this.layers=[],this.sources={}}getBeforeId(){return this.layers[0].id}async setBaseMap(e){if(this._baseMap&&this._baseMap.id===e.id)return;this._baseMap=e;const{sources:i,layers:a}=await FV(e.type)(e);this.layers=a,this.sources=i}addToMap(e,i){for(const a in this.sources)if(Object.hasOwnProperty.call(this.sources,a)){const u=this.sources[a];e.getSource(a)||e.addSource(a,u)}this.layers.forEach(a=>{e.getLayer(a.id)||e.addLayer(a,i)})}removeFromMap(e){this.layers.forEach(i=>{e.getLayer(i.id)&&e.removeLayer(i.id)});for(const i in this.sources)e.getSource(i)&&e.removeSource(i)}}function FV(t){switch(t){case"vector":return VV;case"raster":return UV;case"no-basemap":return NV;default:throw new Error(`Not support ${t}`)}}async function NV(){return{layers:[],sources:{}}}async function VV(t){const e=await fetch(t.links[0]).then(o=>o.json()),i=[],a={};for(const o in e.sources){const y=fv+o;a[y]=e.sources[o]}for(const o of e.layers){const y=fv+o.id,_=fv+o.source;i.push(Object.assign(o,{id:y,source:_}))}const u=e.glyphs,f=e.sprite;return{layers:i,sources:a,glyphs:u,sprite:f}}async function UV(t){if(!t)throw new Error("Not found item");const e=`${fv}layer`,i=`${fv}source`,a={};return a[i]={type:"raster",tiles:t.links,scheme:t.scheme||"xyz",maxzoom:t.maxzoom||22,minzoom:t.minzoom||0,tileSize:t.tileSize||256},{layers:[{id:e,type:"raster",source:i}],sources:a}}const TA="basemap";function uE(t){const e=ff(t,TA,yl({baseMaps:[],defaultBaseMap:"",current:void 0,layer:void 0,loading:!1}));function i(y){e.baseMaps=y}function a(y){e.defaultBaseMap=y,e.current||u(jV(t))}function u(y){e.current=y,GV(t,e.current)}const f=De(()=>e.baseMaps),o=De(()=>e.current);return{setBaseMaps:i,baseMaps:f,setDefaultBaseMap:a,setCurrent:u,currentBaseMap:o}}function jV(t){const e=ia(t,TA),i=e.baseMaps.findIndex(u=>u.default||u.title===e.defaultBaseMap),a=i<0?0:i;return e.baseMaps[a]}function HV(t){const e=t.getStyle().layers;return e.length>0?e[0].id:void 0}const GV=async(t,e)=>{if(!e)return;const i=ia(t,TA);if(i.loading)return;i.current=e,i.loading=!0;let a=i.layer;a||(i.layer=new OV,a=i.layer),await Rc.actions.getMap(t,async u=>{await a.removeFromMap(u)}),await a.setBaseMap(e),await Rc.actions.getMap(t,async u=>{a.addToMap(u,HV(u))}),i.loading=!1},qV={class:"base-map-card"},WV={class:"base-map-card__image"},ZV={class:"base-map-card__content"},$V=di({__name:"BaseMapCard",props:{mapId:{type:String,required:!0},title:{type:String,default:""}},setup(t){const e=t,{mapId:i}=So(e),{trans:a}=ga(i.value),{baseMaps:u,setCurrent:f,currentBaseMap:o}=uE(i.value),y=_=>{f(_)};return(_,C)=>(ut(),Yt("div",qV,[At("div",WV,[W(o)?(ut(),Se(W(Jx),{key:0,src:W(o).thumbnail},null,8,["src"])):sn("",!0)]),At("div",ZV,[At("div",null,vn(t.title||W(a)("map.basemap.title")),1),At("div",null,[Pt(W(Ym),{modelValue:W(o),items:W(u),returnObject:"",itemText:"title",itemValue:"id","onUpdate:modelValue":y},null,8,["modelValue","items"])])])]))}}),YV=Fn($V,[["__scopeId","data-v-e19a4fdf"]]),XV=[{link:"",thumbnail:"/static/img/icon-stack.png",type:"no-basemap",title:"None",id:"null"},{id:1,title:"Streets",type:"vector",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9TfE2haV8QDcaOLS60zxBp9rHc2wJDfaGeEOYiOATgLk8fNzk4Iat+y1f3em+K9U014pESRFadHjwYnTcBnJGDk4xtJOe2Kzfhc15q1vrer2MNlNdwoqTWHkJ/pysvOG+8nKbgOjFeQTk1l+BvHN18LvihcXWppPMxaS3v4xIXdsnOQWPzEEAgk8jPPOa+5WGnPDYnK6UlJxUXyt3alo5WvrZ7rVpN77pfkMcfRhjMJm1SLgpSknJKycLtRvbS61T0TaWq2b92+J3jjTfBnh6T7dcxxyXMbiCFgS1xgDIAHPcc8AZGTXyw0nnOzEsxYkks24k+57mtPxl4ouPF3im81GWWVjNMzQ7mJ8lNxKquScAA9BTNS1K78X6kh8lGlWIqkcEeMKoLtgcn+83tzjA4r2chyf+zaV5auSvJt2tbZJW83d36Hi8UcQLN63uqyg7QSV3K+7bv5KyS6/Mb4Y8OXHi3W4bC12edMT8zkhUAGSTjPAFdV4r+BWoaFp32mzmGoLDEZJ0CbJFx1Krk7gPz9qufCq9sfDPhDVNUt2Da0lnM+6bmKFVYBVwOfmYoTnrlRkd+40DTI/Eej2Sz2l7NbWkiyxPfEidmAYZK8lhl+S2AcngACvk+JOLsdg8bzUPdo03ytOKvN2u7XadtUlZ66vZWfr5Hwxg8Tg7VveqzXMmm/dTdlsmr7t3Wmi3PMPDHgDW9e8PvaW9htt725SRrxpQqL5YddrDqy5fOVzgg/eIwvdeDPhlZWGo2PnWzQ3+n2MTSH5XXzWkk37uSDkAgZH3T2YA13fI9fancKDxgtySO56fyA/Kvgsz48x2OjOCSpxfZu+umt3reOlrJfjf7HLeEMJhXGUm5uPe3rppprre7fntZxG8YPIP61Sm8M6ZPNE0mnWLtCCsZNuh2ArtIHHTHGPpU3lZuBJuk3Ku0DzG2Y/3c4J98ZqTLZr4uGJnDWk2vQ+pnThP41f8TjdG+Amhabp0sE32y9M6pueSXbsZQfmQKBjOe+7oPfPK67+zje288f8AZ15Dcw7RvM/7uQNk5wACCMY6kd69H8T+O9M8GRw/2lc+Q0+fLVUZ2YDqcKDx2z0rBufjdZWcTXclneHSnlaG1uUXLXjLt3FVbbtUZYEk84GBncF/QMozrimUvrWH5pqf8y91tae7eyvpqo9m2rJtfGZnlfDqj9XrcsHDs/eSevvWvp5y72WrV/LPHHw91DwFLEt5GrJIDtuInLRSe3IBUjI4PXPFdZYfs6vqPh62uF1eEXU6CUqIxJAARkAOrc/7wyD29+Y8XfFDUvFN/duks1na3aoptRMXjGw5XsO4BPHJ9uK9Oi+Leh6H4XtJ/tN5fCRmU/ulWbd947lAVRyeMYHB5yDX3Od47iTD4PDKjFe2k3zcq5ul7O6aXW9nZ2urbL5HJ8HkFfFYh1X+6ily8z5etrqzTfTdXV7Pu+R0b4Da7p2rrcrLpTGxnSSIPIzLOVIYZAXIHGDnHQ/WivTfDXirT/GmlPNYP9ohy0ciuu109iPoR7Givz7M+K8fUrcmY0488dLOG3/ky9T7zLuHsJQpc2Xzlyy1up6P8GUNC1DStN0zUtTtxHZC7KXFykyiFYW2Koz8vQ4znkElsck15F8SPE0PivUFuPKhgvIWMEghAcSoANrmQN87dR04GOTir3xd8b2niq5tlsYEWBk815iiiSc8gKw6jYQ2MnvnpiuNr9H4O4Zlh3/aWJ5lUlok3dxilaz+S6q60WjTv+fcV5/CsvqGGs4R1bSsm3rdf1Z67poK0/Ct5LZ6luit/PxtZ2ETyGFQwJb5CDjs3PKkjvWZXd/AfwvqOpeImv7YywW0IMBnULjedpA+Yjpwx4bgYx81fXZ5iIUcDUqTSats21fstE3+B87kGFq4jMKdKje7fRXa7vVpeup0fh7w9o+gpa6fdQ6TdvNP+9jZkmAZs4BJm6YTI+Q8KBlmGTr2/ivwzaapFZTtYqJ2WWKK56RMxPIDqFQdRndnoAvNZPib4HhdPkudDvZ4XUN5pvhKkkxZlDH7o9BztIOe2ARZ0fwtqXh/WVstWv8Aw9dWJncM7ZMm9tzqJlYqGBAcqGLHjjjNfkGIwFDER+sVMQ6js/dfutPul7yt5XWnVW0/aMPUxmHq/V44VU03H3lZxt2bvF36Xs7PWzur9hb+JoNVubyK133LWJUv5ajDblDAK5IU/KwOc4+YYPWrMd5mMM0ckDt/yzfaSecfwsR75z3Ga5XS4dEi1e9kimttN1C4hRQovjHDNtLncmzaHXhgWB+8p+UHk6ug6dBpF3e6lJYeYxbcblD9paRcHDJ8ztjGM4A+UrwccfMYrBKDTSlFNLddbK9rbq97eVj6HDTlNNTkm05bdru1/O1r+Zp3Kz/Z90ccsrNwBB5ZZf8Aay7AEcfy46062sysSRruVIkCjnPTjBPfp196rz682voBpt9GjKfmJh3qQfUHHTrXD/G26m8OaZpd2s9zJcvcAThbh0imUDkCLcVXAAG4Lnk85PPPgsto4zEQwdF+9K+/e2n9dPvMsxxVLCUJYme0d/S6/rz2Mb49XWn392n2WFJr6BVN1cx5bylJxGjEcf3uozyvPauCv9dudS06xtJXzBp0bxwIOi7nLsfqSQPoo9KjuZbdLcQ20cqoGDM8rKWcgEZwANo5PGT9TjNQV/Q2RZRHBYOnhpXlyapy3V013dt2kk9Iu3c/nzOczeKxdSvCy591HZ637K+ybb3av2ClZy55JPGOT2pKK908Y6H4X+Lp/CPi2B4lMsV2wt5od2BJu4U9DyGIOcZ6juaKwIJ3tp0kjO2SNg6sOxByDRXwvE/B8MzxMcTCMea1m22r222/rp0PsuHeKJZfQdCbdr3Widu+5v8AhvwdceLjd/YZLYwW2B+/DF8sDjaEUt/CegwPfGaztc8L3nh6d1niJRCAZUBKAnOASQCp4PysAeOmK7n4F6tYLbT2s/2aO4ifzh5zf61euVycArj5uCcY5GK9HvrK18Q2XlTW1te2U65bLhxxgjGOvOMEHjivnMx42xuU5rPCVqd6St/ia095PZt6vt00aPoMJwnhM0y2GKoztUa/7dT/AJWt1bbe/XU+b69O+E3jm30zwp9lN1HDc2zEossssagFi24hSVcZbGCoJ5BOMVynxU0XTfDni+Wy0xZUSBF81WcsquQGwpPOMEZyeua5wjNfd4zCUs9y6Ek5QUrTW1/mtd0+58hl2YV8hzGbjaUo3i+2+tn6rsfSWneMYtW0z7bb3UNx8u0rADdRwNlsHCqJMnGMZAx9Caj8SS3HiDRDHbsyMZEmhdLcCa2kRt+/95Iv8SjGQODg7gTXknwVgN/rl3A1q9zGIBPmJlSWJ1YKpDFl4+c8ZxnBxxXomv262mhapcJPeSSW9tKYZryR2ihkALBgG/dtyAFOCVzx97FfjOcYOvlua/UqdS+sbOye9rX+f4bJn7HledrMMs+tVY6WakvTe3y8zivjV8RNX1C7l0a5e2jiUhpUt3ck85COSFDdFbhe4561l+CfiPJ4X8IajbeZvvIyraZ5yiSO23EiUoD904JI7EscgiuZ1OwurGZGvElSW6QXA80/O6sThjnnnBPPJBB6EVXr9no5Dg5ZfDBySlG6baWjkt3u9Hazu3ppc/HcTxHjXmE8a5SUmnGzeqi1tsrWvdWS11sdn4G+JM+mWd1FqMt7c2rMZBIsu145G/iLY3MOM4z3JwQMVzt9Nc6yZLu9e5lMwcwTXUpbOzllDHgnBA/HgZIqDStZm0Z5/KEbrcwtBLHICUkVh3AIPBwQQeCK0Ev77xe1tp9vbfaJkiCQpDAqyfKMliVC5JwMsRnAGSSMnKOVwweMqYqjTjGM7OUr2tZb2731lsuXu9m8ynjMJTw1SblON1FW3v3fpot3zdkYtFdVrng278O6dcxalo6RSWiRStdwF/lR/lGfm2N820HA7nvzXKjp/hXs4HHwxUXKmtF1umnpe6s30fWz7o8fG4CphZKFXd9LNNdNbpdV0uvMKM0UV3HCFFFFAHRfCaIv8QNPfZI625eVti5KAIQGI64BI6c+nNek/FTxdF4Q0CRLe6u/t+oBTAhZ0aLDcy84YD5SPfp0rifgbcxaX4h1HUZZVjTT9PkmIb+IZXr3xwOnPSuS1TUrnWL17q7eSWaclyzknOSentnNfA5hkcM1z32mI/h0Iw0/mbblb02v5WXVn3WBzuWWZJ7Oh/ErSk7/AMqSjG/r2+8ju7uW/u5Z55HlmmYvI7sWZmPU5NR0UV95CEYRUIKyR8POcpyc5u7Zs/D/AMRr4X8VW9xLJNFbyZgmaN2Uqj8bvlycKdrEY/hrofjB8QbPxXDb21olrNwsktygYnA+6gLorDGWJGO475A4WivExPD2Fr5jTzOr8cFZLp1s35q+n/APaw+f4mhl88up/DN3b69Lpettf+CWta1mfX9QNzcFTIUSPCLtVVRQigDtwoqrRQRivZp04U4KnTVktEuyR405ynJzm7t6sK9X+DHxB8O+C/A0jXxt7fUfPkQlId9xcJhSOQM7ecDJA+U15RRXDmmWU8fR9hVbSunp5dD08mzerluI+s0Ypys1rqtep9I+HPGGk+ONAvZo7qbULUIftMFxCu+BTn5WVF5yAcfezjg5r5zv3tzf3BtN/wBkMreRvB3eXuO3Oec4x15ptvcG3LYAIdGRgehBBH5jOR7in2EkEV2jXMTzwrkmNH2bzjgE+mcZxzjOMda8rKMgWWVa1SlJyjJK0fS/nZvzsj1c94klnEKMK8FGUb3l3vbpul5XZCw2sQeoOCPSin3N1Ley75XeR9qruYknCgKBk88AAfhTK+lhzOK5tz5afKpPl2CiiiqJOPtPiDrGly+bb3hicqUJEafMp6g8cioh4w1Ef8tx/wB+k/woorg295bs9KyfuvYP+Ex1H/n4H/fpP8Kmh8VX72sjGflen7tf8KKKpSl3Dkj2If8AhMNR/wCfgf8AfpP8KP8AhMNR/wCfgf8AfpP8KKKXPLuHJHsH/CYaj/z8D/v0n+FH/CYaj/z8D/v0n+FFFHPLuHJHsH/CYaj/AM/A/wC/Sf4Uf8JhqP8Az8D/AL9J/hRRRzy7hyR7B/wmGo/8/A/79J/hR/wmGo/8/A/79J/hRRRzy7hyR7B/wmGo/wDPwP8Av0n+FH/CYaj/AM/A/wC/Sf4UUUc8u4ckewf8JhqP/PwP+/Sf4UUUUc8u4ckex//Z",links:["https://tiles.eofactory.ai/styles/basic/style.json"]},{id:2,title:"ArcGIS Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABgESAAMAAAABAAEAAAMBAAUAAAABAAAAVgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAAAAAYagAACxj//bAEMAAgEBAgEBAgICAgICAgIDBQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwHCQ4PDQwOCwwMDP/bAEMBAgICAwMDBgMDBgwIBwgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIAEMAeAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APM/GWnaJ+074c1Hw/qNndab4gjCy6BNazG4kku5Yg7W0qyScrKFVWZFOJhGcgErJ7V/wbkfF/X/AIRftrT/AA/ulure28ZWNxZ6pY3MJRorixjmmjchiCsiASJt2klZGzjbkfH+meLxPf6jdraWKfaosXVgIAbe8TKkruOWT5lVgBxlRnPOdj9jD/goJdfsF/t+6T488QWGo69pNsbqHVLa3vGWa8SeCSPfvkJEmx3DYfOdnUHBH22HwtX6vicqhJS5Ixai3eSlpKVr62d9NWruyd7pfHvFQlXo4+StzOV2lZOOqje2l++z022b/cT/AILLftTeB/gp+zDqnhvxJ4gttP1rxRaytpunfZpbmbUvLHzIqxjK/M0fzM0a5YZcDIr+bH4nBHlur64huGkZsqZWBON2Bk45OOpGMntXdftI/tba5+0v+0h4u+IGsaldXaavqM81qkrvhIS58qNVLHYqR7QFBwvaqOvatefGxYY9UtLW1kECmFLK3S3CxofvOqj5iSTnufbFe9kmUvL4cz3krybdlG2yStru7ttbHnZtmTxVTsov3VbV33bd/JWSRzPwj8P6lca1Htt447aRS7SOdqBNpbPHPABJ9B9QD6lc6DDANtrcrcMsRdwQE3DjlBkk9e+DweOlY9vp9p4c8NWtvatfNOxML/KNgj3AhQe5IGTyMYH1OZdtfWN1/q4txAMe3O9Rg7hjGCAducHGM9wK+V4i4vxuCxrdH3aVN8rTivfaV5Wu07apKz11e294XLcPWo3qaykrpp7Lp3V+915HZafDeSaJNp8MSiO6uY5ZJd+CPLEgww6lcybuO4/iIAW9Y6N5dxG8lobea2Cwhi48uVleQv7FmDAZxkADoRkcLpmpalaTRzGO4WGNx82DnnIGPp0+oB7VutrU1ppsdqzOqTAMW2bQoxxz9P5V+b51xtjsxTg7U4t3tFu+1nd3100tZK3Te/0GW5dh8PrbmaVk3bvdWVtNde/meoS+KYZ7eO8kvj9nGAttHGdznjgnsMEnj6cZyMWXxpa6r4sW1utPtZreRzGmVw+37pBPOPQ4OSABk9/KrXxNPb3En79lWFtqbeBz9fw/L6Vq219qBuFvLi0nkDLiOVuAMHg/Xp1/rXx8cRKEuaDa9Ox7TzDnVrfqd0vhnTND0ljI015G0qxMHJUuyjBYbSP72fqQM9zip4T/ALTuY4rCV7hmTPlyLiRjnHy/w+nVh+PStDQfHEI0uZr+OTznby1VUHJP3iQf9liMj+tU9Q+L+j+CrdZbgTx2szfZoWiTM1xJ2xzhFAzkk9h64H6Fk+ecVO+Kw/PNT6yV4ya093msm1baPRNtWi7eHi8HlErUqijG3RaNddba29e+m5H4s8GXXg54kuogVcZ89JPMikzggDgbSARkHOazvEv7OGj+MYYLm+1Sy0+7mIH2mORWXGOhxnfjI5GeDVLw98f3+I5uobS6u7JDjNlLNvGxG3K4/wCBHJx34ORiuq1rxH4X8PaTeaxr2qTtBIVEMawFt2d/mblVkJcN5e1VIBzJyCoB+5z7MeJaGCwsaaXtZN83KuZbJpSunFO99nZ2urLReLl+Gyt4mq9eVJW5nbrurNNrbddbPXV8r4G+F1p8NvENjPBf6fezpKJI5ZFdYWVXBAYEA4bHOOg57jJXU6tdaVJo0l5oGqWfi/wveosMV49olveafIRlYpwy7o5PlcAcrKsZIwMhSvzzMuKMyq1eTMqceeGlnDVfiv68j6bCYPD0I3w8pWlro/8Ahzh7XxTeaxaR3kdg0UkkSl0mUrvzjJxkFsjHK8HPFct49j03W9EvI7rULO2urVRcsxfdLb/MBygyxB3Y9+PY1V/aS+It5ovhzSm0+4kWPXGadr1GwzhVUBAw5G1XHHB6HArwG2vRc6p5cbuGzgnOOvWv0Dg3h+phUsfjLqrLRRb1jG3Kk++m6aurLZpnz+YYiVePsqcvcWu27vv/AFo9dzsNO1S6v7ZlWT93GCykcZP8+a9I/Zv+KLp4jNldaZdX088kam6htHuDbxBgQJNvKoMAEgYxnPXNeTp4pt9FsbiytfLaaVfmZhu3H09up6V9z/8ABEj9hb4j/GL4gXnjjQ4ZNH8JxxSaPda1NawzLLO7RFo4vNON6rIh4VwdwVhhiR9RxHmFLC5bVr1bcqjtJtJvorpN3fSyZz5bgJYrEwoxTvJ6WWvm9Wl+IkNnoenXjWAjhuFWUGUuT5cEj7gu5ckhDtwCc4C8+77y68OaZq1vb6vqVha31+uEgnYbgHZkU/T5ScnnpxzX2T8av+CCNjqfg9F+DvxAuo/iG8so1OXxBPK0dwZJIo2KtBH+7J8t8+ZEykt1jK710PhF/wAEwfGH7OHxn0vRvjF4i+EfiT4eeIL6aCxurSzkXVdTuUinlEBea3KwFSsk5jEpI8kKjMd238HxlXAYug8ZLGSrNKTcZXjO6s20mpKz3tpddVZ2+2o5XiqNdYV0VBNqzWsfK+sXv1/B3R5v8Fv2ENL+POnzT6PqUOqW/hu+W0vn8wCO3meFZFA5+YbJFII4LMMZYEDN+Lv7KEfhDSrnT2uNJFxkC23OJJEOQu9gv8Az1JAGRzX114S8D+Bf2Rvjf4msf7at9C1TxFHp0f2W9uI4bS5t0juHiubcSKpYZadHMbYEsW0qpUVx3i34kaX8DPi63iXU9C0nVfD2vBrmy1Oytft0tsN21pzE0jySRlgdjooKhcKhUkj5XEUeXlnGMuVxi1fS7cU3bur3s+qsfUU6FF03GfLe7Tt0SbSv20te+zPkjU/+CZ11f6FZR6FrVnrV/M6x3kxnj+zx7MYaJh8rKeQDzjAyK4H46/sg658DdLhj1S6aa8tYi14qyAQxxAfJ5ZY5O7oCechielfSH7QH/BUe/ufGNrY+DFgk+wSl5zNay24vICCGV1Khdqgghhg5UY74+VPif8Rv+Em8PXWtazeL/aUky3M7yuSrqSxaMHgKB97GDjBxg5qsoy+vmGMjhKd05OyvprbT0Xm9tfM8fOp4HDYeTiru3R6afm/66o8c8T+JF0q21ItKZV0vyvNKTKFgzyMsWAVccZPoRivD/id8ZLrxrrlv5KPHY2cJiijzyzHBZyCO5AABHQAnByA74r+NLPVvDpsdFsWt7O3vd00rndLOQjCNiMAKOXOOuRnPauDbUI4ooF2tnP71jlTntj/P4V/TeT5ZHBYKnhG3JU3eLlve1rrV2WrSSeidnrc/OeXnqOs1rLRr/Pvt950dp8Urqwnhkt7bT4LiH/VzCN3dDkkHDOVyM91I4FO1Tx1qXim/jm1LULrUJEGFM0hbYD2UfdUeygCsR7RdT2mzhJkP3ju3bvwxxUFv5kcjBty+hHGa9nmd9Q9lDoj2X4M+Mn0zWPsskK3FrfYgaEyGPeW4GGwcEHB5BGQCQcYJXmvh/UbrSNQguI53WS3kWVOejKQR+oor43iThOOZ144iCipWs221e22x0YHHSw0XTu7Xvsn+Z7LaeB5PiRY32n2uswtpkce5P7WkeZvNIyRwQsONp+ZTkcYzXA+Mvg1deDdQW8s4o7vT9iuWhbfszwWAb5ymejEY+YDPSvQ/g9ZzfFPwillpMMb61pLzSXNiHVZL2E7pDcRRcNIUUbXVQxVURujceifD74eXD62WuJo5LNomgdWVTvU7PkYMTlCSflA2nbnPINfM5pxticpzSph60E6UWla1pNWXvJqyber106aNHVhsrnWoxdPeXXp6fLY+Sbewktr7zvs6XEJbJBO0/Q+lfq1/wSx/4LSaX+y1+zNoPw51PRdLvIfDstw++fLSK8t3LN8q4UfL5pCnLHI69APzv/av0HQ/APjuLTfDUNxatDbRtqIYkw+ew3YiznK7SOehJ4wBXBTWcY0GKRkVm5O7HP8Ak19fmmVYbiXKYQk5QjLlnHRXWjtdarVN9eqZng8dXyzFOcbOSvF9V0v+KR/QHZf8F5/hbqHhS8ml0DUNUGofK2y7WFvlUqzo6cuTgKctyoAB4IOH8af+Cjfhv9s/4WaZoPh3T9Stbgyw3Saj5AafRLuGVZIZ1wSMiRFyD8sgYrwDivxz/Y98Gah8W/7csIdLutRt9LtxdM1suWtyzBB0GeRkg9th7Zz754WbWP2b/Cur3Olx3mj6gIJxbXk1w0Zhl8sqXKhgkn3FChlJXdkcFg34JnnDiyrOI4PDzvJOLi3/AHrW5rdn0s7q2mtj77L88r4qjKriaa5LO9r9F09fz69T17/gtJ/wVB+JXjHRYvgReN4Es9HuLK0v9at9Dea+uWIk8yOGaeeGIQyMY45mihjPyyRqZnUstfLPwl/aruPDX7N2vaLeTK2rWjINDkumJEI8xfNjAPXbGWZVOBnjByAfE/EHhC903xLJH4gW7GparbnUzNcMWuAG3sGcMckvtJ+b5uVPfB5vxBfNHPDCrN+7UvISflLnjj8Av41/QGX8L5fTyungOWMoJqTaWjlFq71b3tyu7b5dLn5/is1xFXGyxEW02mtekWnpsl1vstdbH1F8EfiXH4y0+b/hIGurtvOJa88394jOqqMjHzhVRTtJ5DY6DB8v+Nq3/imy1htcvZVjRpH0a2mfAYxZc4HA3Op4xnkkDPNee+C/itffC3xLJPGI5o/9Tc2zMQtwF46j05wea9Y8L6jfftHaqLHw/ot9Z3yIs/ntF9pU/wB7a3y/3QDx0B5GOaWW0sJi6uJw9OMVOzlK9kklq0rWWustVFxXVnDKpWkoRk3JLbTXW2nd+Wjep4VpOlT/ANjTL+4fcq/LM/CHrnp16/5zUUWi3CFRcKo3HcgIyrfj6H619OfFH9mt/h9oMk1/pEs11GiLM0Fmvku0hI3Yyo3A5G3k8jkDmvGdXdb6C2tVt0S6t4mUAhkGB0BUndnAJxzjHU162X42ljIOdLVLS6cWnondOLfRrez7rYmrKpTlyzVn2aaa6dbdjg21F5pifLjjJ+QsBxwO3p9cfj1qa8W5ljjjmZXVcsjY5Offv06Hpz6mrmteD7vS7Vby4YeTMc/ux359cdcHH0ptlbyzXnl2p86PIKZ+Uc4OOenJx712KL6lc8WrxG6dZNDMrfMFXruNFaUljIs+1gY2wCVaitDllLmd2e1f8E9rufRf2yvBusWsLTT6KLu8i2gkQsLSZI3O3nasjoxxgnHUdR7T+0JJb/s+eA4dSbVoUv8AUYVEFnJahZ5WOAG642D5sn249R55/wAE020yx+OV14g1C+stOtfDOlT3zLM5DXnymMxJg7tw3l/lDHEZwO483/aybxR488bWuqXUn262kjJVGuFVkYn5iAxHy8YGCcba/P8AMuG1m+fe2xH8KhGF1a/M25SS16fzb3WnW696jmCw+XQpRdpzlN3vaySir+r2Xzfk+A8aatN8QNRuNQub1pry4l3OpTAxwBz9PQDGKrT6VjS44SzLxkkk7R71TttPvLO7kWaAx+WdjMrB1B+oyD+BrfhRtZslVNzMowUxwwr9ApwSXLFW6WXkeDUk01qep/8ABO74/aZ8Av2kNNm1eSSPw3q1s2j6iyNsJSVgRKf9yQI3uqYyCcjuv+CgH7Vuh/Eu6utN8O3cWoRxyRs12oIVMEKsUeRk4Vck8jIHPUV8tX+gSRFtsa7mOHUDp6Cl0abGrwrextN5IVYYUAHTpn3+tfP4nhvCV81pZtUv7SmuVL7L3s2u6u7a/ketTzatDAzwMLcknd9+l0n2dlf/AIJsfFzxTqHi7xzeapNNCJJlghHkLsjIijWNQo9BsB9jz6Vmi2OrWxkk+aSMDcW7joKm8TPa6lKqKs1u6ttfzjyn+fpXQan4X/4RTS4LmC6i1CyukA8+NflDAcoeeoz3r6Clh4U4qnTVopWSXRdDyKlZytKXxM47X9Ms4GmuFmlkmEhKq0Xy4J5IOTnr3r7I/Yw/a68D/B34IabDrF9puh6pbyTW900DC4uLqIsHVioyxHO3bkAAAdBx8pzLDqke75VYdgMVj6loy5P3Sx4BI59BXi8Q8P4fN8L9TxDag2m+V2bt066a9j1cmzqtl+IWIo25kmtVda/1/SP1cvP2o/hv8WP2a7yLS7iHV5JpGS9a4ijYQhgdqLvJAOF56/eOOhA/OBNQh8YRap9hcSxpfTCDcP3i27FvLYk4/wBk7j3681zPhCe48D3k0kM3l2+oW0lrcDBdSGUgEgHsSMHqPfkHU+ANmT8SreSVJGhhjkZ4Vk8vz8IQEJ54yRk4zj0JBry+FuEaWRVK31eUpQna0dLq1/NJvs9P1OniDiCpmyjUrqMZR6pWv+bXyv8Aocz8Qxc6abbR5451nt5JJpd3UsflX2JChun96sSzvPKKrICVHGBwcV3fxm8VWt7rs0ccNnc3mSklyssjNEy/KUAJA4AHIyO3UGuHW1a5j29G+lfWWl1362PIpSvBXNbT75ZFX/nmORu6iiqemaTLFchW4ORxRVxu1oYVIxuavw18Vah4X1SGexuWgkf90xwGDKeoIIIPqPQgEYIBqW78Q3+tXcIvL26uMjJ8yUt70UUoRSSkt3v8tvzZdT4ix4hnk1PT2FxJJN9gtneDcxPlnBf8RuycHjk+pqjoFxJFGWWR1YBuQ31ooq+pEfg+f6GRqusXU+qqGmkbbgDmqsl7Lb6o0sblZN33h2oorF7nXyrT0HxXk1y7+ZI8m05G45wT1/kK9C1a1S28G3Ece5Y/Jjn27jtDlsEgfTt0ooraicuI+KPr/kcmkjQxJtO3K/4U2Ri0KsSS2ev40UVHQnqvU0tDcyRyK3zKyHIPOcVQ13Vrrw9cCSxuJrWSZWhZomKsUODjPb8KKKqTfKOlrUszGiG4LnknGTXVeG7SO4gi3orfX6GiilS3NMRsFzMz2MchP7yMEKw4xzRRRRJsyif/2Q==",links:["https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],maxzoom:19},{id:3,title:"Dark",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8VdE1S88J+XfebFd6ZdTPFIQCPLCuVD57Drj2/S58X4YbvS7G7WRG5IjZWyHDYPHHPTOc/nmpfGYg0qbTdPuJbiOCRi0d15hH2YqePl+63DY9QDxgcVoa94fh8Y+DII7IxIAqS2zFdqjjoQBxwT26/SgDz3w14euvEOoBbaJ3WNh5jggCLOcEk/Q+/FexRx+VGqgABQAABgD6CqXh/RY9E0SC1VEGyMCTAHztj5ifXJpbW0t/Ddk37wrG0m5nkbqzEAc9PQflQA/WtYh0HTZLqfPlxjoOrHsBWBoPxUtNTvBDcIbUyPsibO5TnoCex/T3qt4+guNa8QWVjMGXTmnjXCcPIWBycnjgBvpzXLanqD6de3XlS26TTB0cWynygu4cDPT7vGPbk5NAHca34w0zS9WW4kui0ttCyC2EZJbftbcP7rYXHzYz7A5PKeI/GNze29ztm32l3cvsAyp2BU249McZ9x3BrmSP1ozuP8vagAB5zznOc1Yj1e7hR1W6uVEhDMBK3zEHIzz6/wA6hEpERT5ME5zsG7/vrGaZmgDpNQ+KOqXt7HMn2e38ottVEzuDY4bOfTtit3TPjJBJE32y2kjk3fL5XzJjHcnnPXoDXHaH4ZvvEbOLOAyiLG9iwULnpySOa1IPhtdXUwtkuLf7csYlnhZuLcHOASM5JGDwO/PbIB3Xhbxja+KlkMLlXTGYHXEij16kMPpWDdfGEWmrTRHT5DBGxQFn2ScHklSOPp1ra0DwNZ6FZQK0cdxcQFiJ/LCudwwR+XH/ANfmuJb4fanqWuXEPkwWxUAjDkxhegwSSfTrzyOMGgDodS+Kul3umtF5d9/pMbJJtUBogQQec4z/APW96K4nXPD934YvFS5TY2AUZTkN9DRQBPqEF9e3NrYylrjyA0UBjO8yDcx9evtxgAZ6V6F4H0SbQbMxb5ZbaRRIhk+UxsScqExwOh69c8CqPw58FtoD3E93tN3nylXGfKUc5Dd85HT0+tdXQAVR8QxLJp7brj7O2CsZMioCxBx14z1x+dXq5b4naxaQadHayhJZmcSiNhkBRkZIx35A6evagDAu9e1TVX+1wy3EcSQ4+UyBXAwMhgic85PPfsKz7jwte3WlvcLat5cG7cYoxhcY9yx4x29eeCa1dH+IA85IdTt4ZIuNgtzHsiChsDr7n+LP1zgxXN5Yazab7O11KG4MaqEG3YBwvyYBIJ4BwADmgDnW0t4IbaWQxxpdI0iMzcYBIyQAe4IA68VCyYON6yIOrqCAv5gH8K3BJqNtZRoiztDBI4Bjtl3xscBlc87TwOMdD1rP1HF/Oq+dvuHONrkqQc9DkADuMetAFSGNHbl1AHOX3YPt8oJpk7DezEglmJPGPyHapXsWsSDcRSBc4wG2k/Q4P8q6H4VWceoardRvGGTydwk2g+U2cDnGeQTwDzjpQBqfCmK7slPnTGO1mYiCF+PNYDLMo68cfk3pXX2ekQWN7dXCJia8dXlb12qFA+nB/Emi0tZxcmaeUMdmxY0XCRjIJ56seBzx04Ayas0AJtz3NCRiMYUADOeB1NLRQBj+ONAi17QJg52PApljkxymOT+YGP8A9VFa00K3ELxuNyOpVh6g8GigDD1XxFF4fFt9sjmS4myWEB+TCnkksQD1HXmtLR9ettcg3wP/AMBYYYf4j3HFcl8VNOuku47iITyRSpsyg/1TDPBwM/NnjnGc8Vx1rcz6NP5sUsttdITtwmDz15PTqe386APaRmuL8d+G57nXftIi328u1XKRLI4+XHTGew53VtfD/U7/AFnw8tzfvG5ldvKZVCsVBx8wHHUHoOlbdAHkOoeH5tNZle3mOxjn91IjkY7nBT34zSaW0Wn7Lh/LdXDI0bTH51IKkMqoSOP1wR2rt/iiIodOtLh/IMkc21VmQsrqQSRwCR90elcpZGS41awH2WKGCWdA6Wq7WlUsARkfMOOo46e3AB0/w20G2WxS8ie9KqzLGJCUjY9C4TcfcZPoeBVjxP4LXWPElpcYdbWUFb1Ym2mXA+TOOvofYVu2F5b3Ubi2ZGjt28k+WPlUgDgduM44+naplJPWgDmPE3hCzlvInt0t4bhlCLGdoVgOgC4xk+uO2Mgmte2hi0sxQW8cCGIr50UEY438AnAyBnJz6DmrGp6Wmpxx5LRyQuJYpF6ow/oehHcGs1dGs/DKz3cjRwJLIXmcudrluBwd3TJwAe57GgDborntK8SRapdxmy1DzFuGdEhnHO5fmOMcgYyRn0+mN9cqOeff1oAdRjmgNn+VGaACigjIooAxfiJN5fg+7UFN0u1FDMFB+YEjJ46A1xng3we/iS7h89bc2cB/feWRk4HCZXucgnnpXT/FK3kv9GtLWNCzXN2iAg4weQP510GnWMGmWiwW6okcQ24Ue3f3oAdaWkdhapDCixxRKFRV6KKkoooAyfHGinXfDc8SKGmjxNEpXO5l5x+IyPxrN8B+FpdOvXvJ0lg+Ty4onCK3JyxITjHTGeevtXUUUAQadp0el2ghj3lQWbLtuYkkk5P41PRQDmgArhfiF4W1XxB4nC26yzWpiVhufbFE3IPU4zxnjn5hXdUUAeO6/pF34X1GNZYEtZgd0UkLsRIRjlSSemR7167ZCU2UH2jH2gRr5uOm/HzY/HNLcWwuQucgo6uCOoIIP64wfakvklltWWCRYpGwA7Lu2DPJA9cZx2zjNAEisHUEcg8ilqO0tI7GARxKFQEnA7knJP1JJP41JQAUUUUAQ3Fsl9H5cqh1znB7Ed6fuNFFAADg1YgiD2krH7y9DnpRRQBX3GjcaKKADcaNxoooANxo3GiigA3GjcaKKADcaNxoooANxooooA//2Q==",links:["https://cartodb-basemaps-1.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-2.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-3.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"]},{id:4,title:"Open Street Map",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4RFkRXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM4OjM3AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAABJEAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A9oEG5Rng96yr20aFy4GUJ6+/NW5riaCGIn7zZz1qZWW6tiCAW29PfFXFuOphNRmuXqYanDA+9blhKr26qDkjP8zWNNG0cjKykc8cVpaYSUHAAHU+vWrqq8bmOHbU7GlSHoaWoJ7mKAYducZwCM1zJXO5tJXZmakT5gGcr1/HmqNTXM/nSkjO3tmoa7YKyPMqO8mwoopQMkD1qiBAMnFKVK9R1rVtLFAiu4yTzz0qeazilUgqF9CoArJ1Vex0LDycbmFU1qFNym445GPc5qSeykhkC9QehoitJX5jzuBzuGcf/rqnJNGahJS2I7osbl89mIH0zViCz8yzaQ9TjH51NHprup85vmPIIPOffIqwImt7NoyR8vQ/jWbmrWRtGk7uUkMtLUQHJ53de2MVeAxSAZAyMH2oBrGTb1OqMVFWQpGab5Sc8cnrzT6Km5ViD7HD5vmbfm+prOurN3uAsSfw56+9a3z5H3cfrS7RnOBnpmrjNoznSjJWMyHT3NuyyHac9MZ7fWq1xYyQkY+YHv0rdprIrfeUH6imqruRLDxasc0ylGwwwaStybTopnLcr/u4H9KjXS48EMT+H/6q2VWNjneHnfQyTGyqGI4PSm1dvLOSHlSzR9u+KrRR+bIELBc92OKtSTVzKUGpWGrG7KWAyBTa6NLaFE2iNcfQVG9jA4+4F+gArL2yOh4V20ZgVPZsiXKNIcKM5/Krx0pTISGOz68/yqU6ZDgAFgfXI/wqnUi1YmNCadypdESlD5mV54DVYsmi8sorMG65YjP/AOqs6ElpVUjPXitKW2CW4lhG2Tbk988e9TJJLlKpttuSKV9IXm2nadvGR+NWdKl+9GcdsfrVCdJFYGTqw3fnRbztbyhwM47VbjeFkZqfLU5mbF9dG2QbMFj6/hWNNM8773PNTXt0LllIGMZqrRThyrzCtU5paPQuWy27RkyFQR2OOaguDGZj5f3aioqlGzuQ53VrBVqzt2klDMCEU5JI4qsQV61uw+Uke0DALe9TUlZaF0YKUtegs0hRFjg2lzxj0HrxSRLN0nZCT/cJ/rUDusV+u05ymAPxqyvmNLkrtA985rnasjsUrtoZDC7j982QOnP+NWlRUGFUKPQDFIgwNpOcd6dUt3LjFJBTWQN97kelOopFBRRRQAUUUYoADRmiigAoqOWeOEDzG259iahN/BtJV9xHbBH9Kai3sS5xW7LVB4FZ0V6/liWXhe3v2qObVC0eI12t65z/AEqvZyuZutBK7Hz34ScxumU9x3z9elVI5I/tJZosqSSAi81Wd2kbc5yaktpFjnV35A7fhXQoJI5HVcpam/Ecxg4Yf73Wn1ELiMxlwcgVVOpxqwHUev8AkVzcreyO1zjFasvDv9aRhkccVFBcxzDKHv6VPUtNFpprQx5dOEc8ah8q+e3TA+takQKRIvUKAM02OSO4Cvj5hnAbqKexwPlxmrlJvRmcIRjdxK19bG4iyOGXke/WsWRGjcowwRWpNeSiXy3CqmcFgCP1qhdhDLuR92ffNbU7rRnNX5XqtyCiiitjmCpraEzyhAce+KhpyOyHKMVPqDik9tBxaTuy5dxs8a3H8Jzx6dqktLWVE3GP5g2RyKktR58AD4ZB/CvPfvVsJtGNzfga55TaXKdsKak+crpayCZppPmyOnTHOasxtjjGB9aUNgAbgR7mgtGuOR+NZttm8YqKJaTvTUcOMqcikMihgrOAx6DNTYd0PoyfSkJwcjJPTFAb1BA96Big57UtNJA5HX0FHzHrx9KAFPrngUituJ9B0NMkLKOOfWiJiV+7j8KBEmQKDnB45pBz1pc460DMW/in80ySD5eg6dOaprjcM9K0tRnViUBzgY/HmsyuuF3E82qkp6GlqcykiFf4ev6Gs2nO7SMWYkk9zTaqMeVWJqT55XClA9TikopkEvnFQAg2jv3zUVFFFgbbJbeUwyhh+Nb0MwlQYPOBmucq7YXLRyFDk7un4ZrOpC6ub0KnK+V7GotvtIwQPUjrVS+vBEPKjJL92/Ordzcrbx7jyT0HrWFNJ5szPjGSTWdOPM7s2rzUFaO4kkryY3MTj3plFFdBxN33CiiimAVNaRrLcojdDn+VQ1PaJI9wojba3POM44qZbMqHxI0HkjsUIRWBb+8PT/8AXVdb2VhuboTtIXP5j3q+9vHK+J2346DGMflUdxYoE/cR4cHI5/xrCMo9dztnCf2dhkVwvIcghRkev0+tK8bXgSSNiijPGcH/ADxVJba5MjDb8wyTyKkR72H5QMD0yKfKt0yFUbVpJ2LlrFNAWDOCnuTmop2aO7jkwCDhcN9etWkLlAGXce5zilMSTAGWP5lOR81Z82t2buHu2QFpCAV2c+uaUO2MPtP0p+0AAAcY6ZpNoJI24A9+tQaDlUjk4pe+MfjQOOCaWgBuc8ZU0uKQIqkkDk9adQBC9zHG+wnBqne3zxMERQMr3H1pmqKUdHXoc5/SoJZorhxK64wNu3J5/GtoQWjOWpVesdiM58lpHGWZu/v3qvU00wkAVV2qoxjOahrdHJJ6hRRRVEhRRRQAUUUUAFTWpC3KFiAOev0qGgHFJq6GnZ3J49zRNHjOcY56VCylDgipZovIcYYMOxBzSq8vlkLHlT3waSfVFNdGQUUpBHUEUlMgKKKKYDkXc6r6nFbFpAsceM/P3PrWRDxPGf8AaH866CFwYxgjHrWFZvY68LFasBEhOQME9af0ORTW5/Ghs5yB09a5zsHZ65NJkYxmj5ivOMGlX5QB29aAIIJHKFCu51+9zjrRLE5IkT5HHB78U10ZLkTDG0/ez9MCmT3wRM7GJ7HHFXZt6GTaStIZPfPbkK8e/vnOKmtbxbkfd2kdRnNY00pmkLkAfSltpBFOrnoM/wAq2dJcvmcyxD5/I6IjNQ+ahkCBsk9sVBqF0YY1VQCW/pisdCBIrHoCDxWcKd1c2qV1GXKdIDt4NMe4ijBLtjHsarRzpJEIxncRxVC9QxsFJB9MUowu7MupU5Y8yHX1ytwRtb5R0GPpVKplQNb7gfm9PxqGumKSVkcE22+ZhRRRVEBRRRQAUUUUAFFLngj1pKQBRRRTAnhZ5GEe0P8AUZNa8aokaKYuSAD8vFZ2m7ftIz17fka2COQPxrmqvWx3YaN43ZBNaRTJjYF91AFZt1YtAu4cr3rbx6UySJZU2uMj0qY1Gi6lKMltqc3RWvLpSHJjbb6DGf61mTRGGQoeorojNS2OKdKUNyPpV21vjCNsmWX25NUqKbimrMmM3F3RpvqinBRT+I/+vVi2uUuGKqZeBn5qxKt2E3lTgYzu+Xr6kVnKmraG9OvJy1ZtdRjn0ppQKDudsH3p69KjuCPlBbaD1OM1zo7RrFcElwfUE8VlXdx5gCKEC9crVi/mEahYv4up/Ksyt6UOpyYirryIKKKK3OQlknaVMPyR0NRDrRRSSsNtvcuCNhb+YrEFe6n26VFHFNdvnk+5zin29wBE0Mg+VgcfXpU9vM9tu2xb04wd2MVm7q5suWVr7EDf6NcMoUlRjqPaqxBHUVZll8wFiPnPvUaum4+YmQRjOelUr2IkleyZDRWg1nFJCHjbBx0weTVN4jHkMcN6U1JMUqco6sjooIxRVEBRRRQAUUUUAFFFFACg4ORWzZ3MckSRj74xkVi1c00Zuvov9RWdSKaubUJuMrLqbSscnK4H1pST2GajYPuB+XApTJtQs+MDuK5D0SO9lMNqzKcNxj8xWC7F3LHqTk1avL77SAoXCj1HNU66qceVannV6nPLTYKKKK1MQqa1XdcxgnHzD+dQ06NtkqN6EGk9hx3R0WCCPn+X0xSMwHGetMhldgpYx7SgIx1qR3VVLk/L3riPVvpczb90mEcanLjP9Kr3Np9miBY5Yt+lMSRPtIY52/8A1qkv7hZ5VKfdC/410xTVkjgnKMk5PcqUUUVqYBRRRQAUUVJBGJZlRjgHP8qT0BK7sPtoJLiQKnAHf0rRj0uNVbed57dv61djjEa4BP404sB1IFc0qrb0O+FCKWurMj7A4SUkbduWXnOfTvVFy33W7V0oIIyDkVmapbf8twf979BVU6l3ZmdWjaN4mZnjFJSg4OaStzkAjFFFFMAooooAKKKKACtDSkPnM+OMYz+VZ9aul5ELYG47jxnHYVnUfum1BXmjRchVLHoBzWVfXm5PKi4Hf9Kfe3zqTEq7cjB5zWYSWOT1rOnT6s1r1vsxEoooroOQKKKKACiiigDSs7yOODEuSwOBjHTFR3d8sq7IgwU9c1RorP2avc1daXLyhRRRWhkFFFFABRRRQAUqsVYEHBpKKQG1LqcKcKGY+2CP51XGqFnAeNdh68c/zrNorNUoo2eIm2dJDIksYaPGPbtVPVJgsPld2/piqNrdSxERo+1WPoDTbyR3nId92O+MdqiNO0jWdfmplelAJ6UlTRqUUylNyg4xnHvW7djmjFydiGinOQzFgMAnOPSm0EvRhRRRTAKKKKACtix2x2bMT2JP5CserdvOogeJ+NwPP4YrOoro1oyUZFeVt8zsOhYkUynZ2MwXBByKbVozYUUUUxBRRRQAUUUUAFFFFABRRRQAUdqKKACiiigAooooAKKKKACiiigAqae4knI3npUNFKw7tKwUUUUxBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH//ZAP/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo3NjE0NWViZS03M2ZjLTQ0ZjUtYWU5Ny1hMGY3ZTlhOTA2ZjciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzYyNDYxMzAtZTBmNy00YTAyLThkMDUtMTAxODVjMjYxMzY4IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjNlMTAxNmEtMjc5My00Njk1LThjMGItMzdiOGY0Y2I3MGM4IiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTEyMDg1MTU4NSIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJmMWZjYzliLTdmMDQtNDIzNC1iYjIxLWI5MDc0OTVlYjQyYiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzg6NDArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAQCAwUBBgf/xAAZAQADAQEBAAAAAAAAAAAAAAAAAwQCAQX/2gAMAwEAAhADEAAAAfvrI6dr1ZrfJen4VmduppjrOpPboz116ymydJ0yLpnk0x7yXNLsSttIGiizRnscW4DocCrS1mKxq/P2ZPQYW6vWMKzzEXTMYduReqxht2e953gSDFr87Kphr1gBxVDK3ZNMIGlPa4qi3LL1uYwyRxF03nrvJq1gACR1xNK7E06X6CH19BFcO8yKvP51cuNSdKqycADocDdi9XTRX5u/xk2o1pr9WX0PL+l4UO5uyy7DZc6k6bhwAB1VG3H6nmvQ8WHctqoeTVl0wVawBux+lpT2eT9Pw49zwANJFibZqdYAAAA6HAAtzuPecCPcgWc1DuQOAAAAAAAAAAAB/8QAIhAAAgICAgIDAQEAAAAAAAAAAgMBBAAREBIFEyAwMSIz/9oACAEBAAEFAmgL88fMwbmisZ/VrlhNpEELQwwVXEZyQGcGksRPx87dXJOR4/YBRYJV9nimyiw1ksYRS0qvVagCCj4McCsm4MY20TCiysFrYLRDoMWThhYkupikAj2CJdtzk71GX+s4TJIeKrZUy5Yg+aQz3OrOgA+0CPeI1n7ltkqEpjXMTqRSTcYolTlIo9UFvDjsNt+8RalaUWp0RS35UZGQMBYNlYqZlAv7bvRb3gH0yWeyCXAj8KkbsPd6AMpMsrH0bddEwxnsLimSwVEi8C1Bc0v9GMlpfQDJDB1uZ3PAnIff/8QAJxEAAgIBAwMEAgMAAAAAAAAAAQIAEQMEEBIgITETIjJBMFEzQoH/2gAIAQMBAT8BdVy+37mlJBKzI6oO+yIXNCPpmUWImJ2WqiYgK/exVT9QaZAKjaU/1MyYmx+YNLa3cXTODcxW1uImQ4shLR3LtcZjkMwcVQv9wDkBfS2RU+U9dR3+o+ZnM9ZFW7iurixFCiyJmYMb2xNxMGJB2hdQeMBB6NVX+wuSAP1vhfg01GXl2XfSq3KxGwEd0MVWv31BXI753KAEQkVQ6Aa7wYy/xjoyedtMw4VPMYWJqch+FTFnKoRMOft74Tzuz1aQjjUZQ4ozMio1LtpD3Ij2ASI1+W2R+ML8xxqFAB7hR6dP/IJlyemsZixs7YH4PNTlFcVjtzN76coqcjLXIIexNdGl7MTHcubP4Vcr4i1feMeRvdWK+Pz/AP/EACQRAAICAQQCAgMBAAAAAAAAAAECABEDEBIhMSBBEzAiMlJh/9oACAECAQE/AVJTn1M/VxFLHjRjtFxcwPcZ1BuM5OlmHMxgzj3FcP1Pno9Q5lIj0KWMu9OIq7RUACzJZbb6hNeKqW6nxHqLjCz42JjKVPMNngzGCo0cWIXY8zaSLleGG4Fo3rkXcJiSuTrmIqoMg6aEivxnNa4l3cQeJcL3AwbrTMDuvQcTEnuPjtrj4v5gG3ryzA3cBK8iY2LCzpnHFxe6gr1oRc27eYGs8Hxy/oYibzAKFDTIu5ZiQ9mKNuuUMWoTlDB14ZuqiqFFD6SAYf8AIBWpF/f/AP/EACkQAAEDAgUDBAMBAAAAAAAAAAEAAhEhMRASIkFRIGGRMDJSgQNicaH/2gAIAQEABj8CLYyvAlOatRwyhSNSyhtzdNpqAw9qIqZWkyO6E+UDnqp00T3gCfjyiX/aLvCt4Tng64QoYvU9Oowpg5djyjs07IHNK0mUXCkqYh2FpUf4omp2R7dH7Jrdm4jgoNZ7b/3EuFoU/jNd8yh4Ye6d8uMWuB3soHnolHJDgOVDhGEbjDuskBOG4sjmP2nS4njqIioKg1CytODhtdEjhS7fA7goNiYtARzMLXDjpajWuyLjc4CsTRZWx9KccxgO5RsWoxboceApJ9EwTVVt0U9f/8QAIRABAAICAQUAAwAAAAAAAAAAAQARITFBECBRYXEwkbH/2gAIAQEAAT8hDtDD3jURRXn1GdBejzFaYD2strgZOYpoFmfiXhU9/czZHCw8DWo4PqYMV8kJg4eDiNWLl1WIBtlst3Fdw7pAqObDHQrnbgh7CwqjKFG7DxGCyxbI9oJvaga8moKkXzEtMPzMv1CUXNyOKleAmkM37vpUYh3fEv0G21QNddCgQjasy/3HoLfE08RMUWdvgic0Y6Ku5ylhSAbjJMdWimC6uZyr5dwdG39MtjsZU8WFLc8QA22TCru1c9iENmZWOBODLIeh+fNmYqNnyWBkGRrTGwGc1mXHvmyus/zL4R5a7ucqLKciy/poyPHRijdLMY3o6zL8i8reemMqhSSuihUIhVjeRXuPrs/cf5Lpk9GKzezpxw2QayXao13GArrd+0itzfCxCG7Cg+uzFLQuY9c+PX4cGAKQamDn8R7nqwvIpHn8/wD/2gAMAwEAAgADAAAAEFTd6EMr0j2vaa0FntdF+3zUtv5k99sMNnkxNssg8bcFptjJr/s3BsTttltl9iVtttttt//EACYRAQACAgECBgIDAAAAAAAAAAEAESExQRCBIFFhcaHwMLGRwfH/2gAIAQMBAT8QIaUC/jUYhLS4tqwHulyb84gOzv2v7iP2MA/nNzZNoIyVtwTwespQd+IobfiZOMfMVEF5PPvudwmMW+0DYz6Eoh0ZgjB4SRVXElx4D5+0cU0PEAVaXJsgOHefKVYU6f8Aei4S7hd8r9++0BpyxRDjpVyqxLdGHxGbroVdxxOHEEGvfv1QsRVTmhzf39zFlDzt+fpAWHLXVEudec+cHz8CIHEvyqHnj9RWjXRtbk3BBYxahp4g8qX3ljLTX30i2F3j3N6dvFbHcrHZLndFKuEi2QDE3keiXOHDKQWrWP6tiUcK1rvGuPAL736ho88RHuehDenEUGu91FsdcGBzmC9ZGEFp4KK8Es/+GztuYTrNIrqgvKX+b//EACIRAQACAgICAgMBAAAAAAAAAAEAESExEEEgUTBhcYGRsf/aAAgBAgEBPxCm2UAiMAQKKg2InWEtR11DHOFmoF3EBMSpjLyEIaSgZzDaOPfqCB+sIQQHf9lUiLLTnx0+CtHP+QgvLFMqpQobGSpSFs47SIUhSDBFAL3wVGVGdQEG3gAgr7IrdvNAty9Rj6meSRUTqPAJR1A3b4JZTKBxYVa4+kMStkdrdQu8E+juFYj9QKA/PkQdI52cnQpAEL3KCunGP7IWKd7zEBJGfnwVQYDqEWji4+oRqgijnZgieoxKF34ZEdsoB8NbZqWr2lCuROfn/8QAJhABAQACAgEEAgIDAQAAAAAAAREAITFBURBhcaGBsSDBMJHw0f/aAAgBAQABPxAYVIx2r5f+4u3ghNovOLyoa8x0ZWFVVq1yXnmeA85ocUlB5Q7MmBZOA2I+SvX30ybKHZTX9/jCcWvGV1gYWiT9ZwhisIl2T5zViPA32yyHyZ/RPzh6Cps2OKP3nB0aiMfjBxNAtgnTycXw49jVSvPO+evxgmRaF2aDEQOFKQ2/24QPFToDg15ZjMBoSk3d+/GjnWAABo6DACwlzjJTGE+tFX8GbCQKWyWHg3iXIC6CNHjFehqhK5aABivcURInyYabYcFQNzrXuW5ezD1A4XB9LysCCxd8eeHXC5EfVFavUvtrXXnNaxqd7s5ye5gg6Usvx+816Toc3BJEPyykEYO24TxQgrs0PXn684wu4E91V/7xgzrItLCF6MEgWB+7x94zCFwToa9p3/Xq9CadEumERvH/ADgdzitlJ7e3f7w6pKOrbQ30bZ1MMwRDiIcJSuu/b2w9gB4OsQJUuvOJaAOm1bPr7yuytPvw11y/wc2OB9zGCc0jYa4efnKFHnkfh49JwBE3q0c0T7mk/wB/WSFSpaBvjs6+LgWohSEb41o+8iRMnjHn/XOBLy3S79ybD+zHhNbaKbSeZNfwuvSWQRk2PCf9+8RuE1ZvqJjUGD3T1fj026hAKiMOPlzT0oFEQWp3kS0/NF5+vR0wXf4ez3MaHiYL26FtmBWJG2tCKzf7/GAvKeH+DDLpTPlgh8NO7fY6MrgVXosyDQmrxyJzMa41sAHBT9ZCpoRwAT1TAzTsadf7OMnyLUbT3oRyqzS7rTjbHrz6kKWTRrY9/GLieA9Lwf4ZxkI60x14uF0g7Zq+35xFKvgD9erGG4igenFWV449v83/2Q==",links:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"]},{id:5,title:"Google Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4Rn+RXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM5OjE4AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAADkGAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8AqW98IroP5/H8Q2e3FUNZst4N3bt5kchyzYxhzkkYP86pRgvI2JH/AO+uta8F8ZbM6dJBGd3+rYJ8xbG0c10UnOl7z2Mp8stOphWbMCVPGP0Ne1/DHXEuNJXS2fMsHQY/vM7en9a8ae2ltLxkkQof9oEZ5rvvhlOV8QpEoC7s7s8FvkcjHriurFJSp8xjTdpWPZ6o6vIItMnZhkbGz7cGr1c54q17TdNspIbyUhzGWCIy7jww6E+xrzkm3ZHS3ZHjPiq8juLyTyuVBKE/7WWrkpYWZi2M1tardi+vJpIotkRkYoNuCRk4J98GsqQspPUV69KLjBJnJJ3ZQYBfc1LA4Dgn1qCMNK20datRWkhYkkADkmrXck1EIMYbtinAgjjpVBpTGoXcQB0GetMS8ZW7Y965ZYyClY0VN2uamKXdsw3oaijnR03foKWSZFHzdMdO9byqQcL3JSaZKW3nce9MZ8OAD0qAXK5G0HHvRv3Sgjv2rlniFyqMHroaRhrdjnlycCozJtFMYg/xcj3oikVwQRkV59Sbm7s3iktByyl22qPrTjhDwaYzrGuEXnPXFMZi6+lQVcnEjSjaDUkbeWh3tnn0rPDsrYUkfjVlnwnPPNbU684O9zNxUlYsmZScjmnLKrZHpVJ22oMdxTBcMq9OfWtIYuopXewnTjaxpg5paow3ZztI/SrCyMzDGAPU12LGU7XZl7KXQl70YpAwzg4zSk4Ga6IVFKPNchxadijeWUc54OHrNfT54+q8fUf41pn5m3eYQf8Aep4dACXYMPrmuRY2LeqNPYu25n29oznGK1UTy0C+wFQ+fEiEoqg+wFIt2rHD8e9XPF0muXuSqckywIhCWKnPSo3kkJUoxR1O4MDj9fWpZGwhzVZZgz7T0zgVNaKjFU2y4Nt8xZuLmSVEedwzKoG4nJP1Jrs/hhqEB8RQwFIy7btr4GRhHPXNef3hPkZU5AP9KXw/r02gaxDfwjc0eeMgZypHcH1rWVNSpcqIUvfue9+P/FLeHtNVbeSMXEuduW5GCuehB6GvEtS8Q3WsX5lupmkPT5mJAGTwMk8cmtDxz4vj8UG0kSPY8e/cuc9duP4R/drk4ePnP4UsPT5I3a1CpK78jah8qR9skoQEcHcAKhvIlBZYnWTGMMpzn8azxI8rbVq3CSmFPJ9K1jBqTlclvSxn21vIsmdpz9K0LiURRgKM8849KsJGoJPes25l+XAXnuc9qyxFRwhaPUcFd6kWfNZnfcEGcH+lQkqWwCce9WVUyWRUJgbtxbPtVVotpGHz6jFedONkjTm1Lb3CqB5XGetQNOznO4n6mo8EDBOcUAegqJyctwuTpLweTmpUlI53HP1qqn3sZqXAA9ajYqLJWfNMjk2UmciomO0jmgcn1LXmgnml83jHFVg/r1p27LYA5pE8zHg5JNTrKrDDZFVQSpxil3cigFKxoBQyrxx6ioJkAf5cEHtUsMhMWxY93HrilEbEjcmPxq1TnLZFOSsMWMJyafuccdqdNtjyScDufSqj3ipHuVdwzjrjmtfqtRuyBVEaSDcgz1pWBKHBx9TVazu1uE6YYcYq1ICyEL1r0VRUIO29jFzbeplTswkKj/x2neRLg7wUwM4ORmp4oFF2pkG5ecjOM8Vc8+zRo/tz7wXAMmCML6YH415apTk3ZGzkkZS+WcBiw7U+aALGGQ5HrmtfUtKspYhd6VL50ATL/Ky7W5J+8c9MViPNKIymz5enUVLi46Mdy2LvfC77eVx365qkZC5YnuTUbPJEWQ8jjJXoajDE+oGa1q1ZzspdCIuK1RaScfcb7pG3/wCvUN5biNBKhyrfp2qzFbRmPzFYs+MhSc1KYWmtGjdQpHTIwOtduGUorlexnNp6ox0dc57VI0q44Paq9wnkzFFdWHqpyKI8sDXSSXra5WPtyenuauoz4M7Djsv6VguzIeM5BzWjYajGF8ufJ+uMd/U0O7TS3EatsdjGMnkVFdSJJwGypGDxSmRQd6HIP8VViDgnB4rz6tdwXs0WlfUkZl8gIi8Dvn2qq6bqnGdmRjbinpFvUMAee2K5JVJTepViv5PAz361IkIIxt/WrUMAdwGNa9vpsUjbAV3E9DjP8qjU0jC5gQ2hkdjjABx1qYWG47T1rqodDKqx8sdz0/8ArVFNpjIchcH3H/1qnmNFRRys9j5fbIqltXbkdc11N5p7SYjHD+g//VU9t4ZjjzHOjBjyCRx+op3JdJt6HIGFiAfXpU0aBEyeW9K6Gbw/J5pjijcgNkHHBH5VD/YNzHOWlQiL6H0+lPmVheykmYbS/NjHNJv7MP1rQvNPCXO1FbA6nHt9KoOu7kcADJzQmZyTT1L0E6eVhOo6ipUk8z61RgISFnI45/KmNqCQ4bBVffjP05r2qEm6a5jF7lW8uACE657VArGQbUO4Zz6VQnuHkmMjcH0HQUGdlb5SV+nFKlH2cVEp6mmsckUyFPvcMK011AQJm6bHA5x/gK5tryUgfOQQMZBOaaZncYeR3H+02a05n0FY3LjWEZcRruz/ABZxj9KzmneZw0jbiBjOMVU3U9G5pJAalpKUkQg4ZWDKcdCOlW7ud5P3gHzkku3qT3xWRG5DAitOG4YqBsjYgDhhnNYYilzrmW5UXYlmKBdoCkn1FRKscR8yZlC9QuR/I09I/Mck9B39Ky9RnJn8sdF+X9TXPh6bm+aWwMmn1UqWWBVVcnBxg4/A1GmrTeWyOxIbHJJyP1rPYgDk0wGu/bYViwGJbPJq9BHmLccCqsSqoyam8/CFVOMCqTEQXLYYjvmp9OiEzsHXJ7Aj61UDGWXLHvWxo1lNcXo8kYXv09D61E/hb2HHV2NS4t4rW3XaxwfuhiPXmqMczMNxQsM42qM13tp4QW7jRruTzAM/Ltxj8Q30q1f+BbW3tT9hXdKe2SOx9W9cV5dPE0F7s9X3OyWEqtcyWh56DGTw3PXYSOPwqzBbTXREcBCnv1H8qsr4Q1mS+mEUHzIGbG9OQD0+9T4tK1+wugPs3lk9BvjPb6+9buEE705K/qYKEl8SdiGPSrxZNwcEduT/AIVq6Y0trqMRmjXLkJ+8B4BI5Ga63T9EjOnKs8W+4XOTux3PocdKqS6VE1xG8qbmXBDZI7/WuOOITm3L0Ol4dxSsaTMnlEr5ZGzoOuawb6SZpSqJ+YPtWwtuzDbF2OSPasrWfMtAJV4YdentXOtzWWiJLXQpbtRNJMAfXcfp6Vof2WdhL3LSEf3Xz/Sqmmat59uPKfEf93HufakuNUa1Usj8EYxjr+lVrcSStcsxCAOY/OXevJBYZ4qpqeowWqeWyq+fUA+nvXOXeutHdmaOPDkbTz15z6Vm3GrSXsh8wfQf5HtS5ddSZVlFWJbq8d4cCMB26nb71gt5hBA7j3rYV/OU8dKzrkraLluc969KhQjZTtdHDOTbKs0z21qd2CSeM9OlY81w8z5Y/RR0H0q1qVwXjVc/KcN/Os4fM3Wu2PmTYftPUijG4Ywc06Zgvyqc+tLGy456561QEJBzg0o4qaQofujn1qHnPWkA7PvT1YCoR6U7NO4WLSSirltMDKMGsxRU8bNGwYdqHqrAby3G5Qhb94OrYrEvoXSZ36qzE5/Or5tYYow7M+/0BFMYTNC3lxMU91OalPS62ZNtb3MRgxp0StuFaE9o7QCTawYDnI46VUjBRuadi7hK7AGo1LnntUkoJ/8ArUxHCkChIRqaLZG+1K3tgcebIqZ+pA/rXteg+HLbSbGMEbplzvOSN3Jx3I6GvHNEuEj1a0kzwkiMc+zCvV7PxfaQ4jxz36f/ABVefmUp8qjHY7cF7NNuZ0gh322Ryx/xpixTkhnb5QeRgVSPiG0uWVjLGoHqwH9as2msWIkMrTpwMYDr9fWvE5Zdj1PaRvdMvQ3CRK0atubk9MY9qS6JltCWGG7fnVK51nTWlRo7hS2QcF1/xqG71y1jh3+Yn03DP86PeTFeDiUdEu52la1mP72L7/TvkjpWvqWmNeFLqKTy50wpbGcoMnGM461xsd+kuqrfW/KH/WBuv3cDGK2NV8aQ2FqZIbaaQjo2wFQcHrhvau105OalSW5zRnFwaqPYxdY1y58P3nlT2nmCT5lk8wDIJI6AH0pkHiaC6tWmaPEvGFyeOcdcVweua1NrWqPdzpGrHIAQEDG4nuT60mmXOyRl4wcZ/WvT+pxdPVe8ee67U9NjbmlTzvMj+R/XrUF5c3kqhTNvB4+6BUOpTJDs2HO7P9KpwTBpADgDvWNHCuceZkznZ2QB2DFJeWHAp6o7t8o6+9OaFVJkXcQDkfWo7i5K24yp3Htj3qaVDnnyy0IlJsWW+SwHzcuep9P85rFuL9rkgtxxjFWZLd3tSWVh6jHvWSB8/FejFKK5VsiUWmxJbfd3MG9cYGKrFB9Pap4jtjYnHeonk3HocVQxpQgZpURmbC9acoJHANSLI0fykDBoENGVO1hUmEK4ximedgkjHpTWYv2OaYA8IwWPSmKcU4OdpXHFIKQyQNT15PWogtSJxVWJNUOzEjAIHdhUouREuC3ttU1Ha/6RFNt++u3A9arSKRIQ3UHmvOxkve5UUu5aFyZM7guzpt9qT7LDecRLsdfUAZ/ziqwOO1WbV3EmY/lPc9azpYiUN9gauZzxGN9rKR7EU0wo3Pet1rFbrcWXa/8Aezmse9Q2kxjBzj2r0KdaFT4WJprcjV/IKlMhwavw6q4H7zII7jv9eay0ZpH5qdo12e9XOCmrSFsa664SNu6T8/8A69XDq0yRZWU7SccMf8a5XIQZ71p2cguFMTcYO6uWphYcj5VqUpM0W1SYkP5jAg9mOf51NFqctxgSTOQPVj/jWe9vlgEOO2KltoFSUo5+93x0rzLIpNnVaci2A3yyq0HqGyD1/DqayPFviCC5tY7OyKgFhIzR454YEZB+lQ6rqDxWYt4j8o68e4PpXMBCzgOcD1ruwmHvapI2nWtH2cRVIdcHhvWprfMco56+hprweXhlOV9cUDIXf029a9I5Se5vfOwOMDpTYZgpBJGCcVQ307f8n40kktgOmt5kbagAKkDg+vr9KS/W3VAXwMdBxntWRYXgEiB3wVIA47cVqzxw3qqxmwR1+U/57Vi5SSdlr0AzpZ3aQBVfaevHy1mC0eI5YZ/Cte72xZWNuPTFJbxtdnZ5fQ5zuqo33e4FBVAiyUUnOORTAiyybQig+wrQe38qdkdMryevvUTCCOdWQY9eT6U41Iy0QFWSAxNgEio5FynvWhcqj4YNgfSqMzIowpzmtGgRVA4PrmnKcHmkOc4pUjLt1wKgZKyKRlelNEZJpAxBxTw2TTQhQmKXAFKcjrSdaoCW1me3uVlXquf5V0EFlBrCF7WTN0qZePaeT3OTgdTXPMDsKjvW/wCCAI9ddj2hJ/8AHlrlxMFKF+xrS1lZ9Ss1s0ExjlXaVODznmrMUA+8D1q3qziXVJ3wceY3P/AjVbzxtEYBzXkpNuyG0othcyyJE4iPPGelc1dbmldmPzZOa2L64UIVBBJ7jp2rGnLNzjjPWvXw1H2cPe3M5SuxsH3qtPynWqkakkVOwOzAroQis/3q1vD9sbq+2A4IG768jisoIS4GK2dLuEttVt9rApvXJz/tCk03F2BWvqbVzpkqSNkY9Bx/jUC2jJy3IrtFgjeDzt+FZd4568ZrC1J0Dv1wcc/lXgptux2TpKKuc7LCZCsYOSaqaharZoqg5Yn9Of8ACp1uUXUxvPA64+lQa1cCW6jK9Ao/ma9eMZQcYR26nLo02yKNytpt3dW6Y7YqvPkJgdDUYmw+cVKW85QK6LkWKo4qS5URuADxjNKUp1yrM4xzx2oAqF/QVPbiWX5Ix834VGIyhLMCM1s6BHHJdgFsDuM89D0qbpK7Gk27Iv6Rp07RDzVy3pkcdfetk2LjgHmr8T+QGXg46YqUP5kiqnUkDmvJq46bfuaI9OGAjb3nqc9f2kvkHJ27ep4PY1hzW8gAfduU9sYr0fULXyrMGTdkrkAfQ1xmqIsSvIQ3OOPyrow2M9pK0zlr4f2exgudsgO3ge9PMS55FWnw8IkB6VWnzEcIMgjvXo2scokkKmIsvGBmqBcq2Vq9O22xJOMtxj6iswHHFS9xomb95IWPGalWJT1fafpmoQ/SnqCx4xQBMyYAwcgULSLx1p4Az1qhDTyK3fC+5LqaRf8AnmR79VrDCHFb2gAxTsAM7o8/qK58U7UmaUfjRbuwXnb5erE9Pes+8mS0TcceYegrTvHWIPI/G3Jrk9SvftVydv3R0/IVhhsPa05fIKj1aQ0z5bJAPsac0iyL9xRxjgVVzT0Y13mZNGgHIpzZx0pYSM05yB2oAgLLGfU1HA/lyK/oc0503ZbOPQVGF7k8UgO2sPES/wBmiOV87Rjk+w96ytR1cXMgSPIXufy96wUkZTt3YTPPHanySpkbOawWGp8/P1NHVk48rJI5Ee/3HJU/4UXI81gRnAot4No3nr2FSSKwQ44ro6GZRIG7AxUiErUZBD/jUyDOKSQEroOuKc8oBBWNSPcU8gEemKa0Yxwc1QitcShwMLg+wp2nyiG4WUybMZ/ix2NI8XrUZiHpUtDOsPiK3SQOWDDuAQf61La+J7d5lI2pgg/NgH+dcV5eKaoOQR2rljg6SVmjo+s1ejPT7jWxd22WkXgcEntj61yWtXgkXYrZz0IP0qrYXzEeTN8y7cDt6DHFQ6gVMo2DCj/61Y0sJyVL9B1MRKcbMs2zpNbFBjcO34057Uupx6d6zrWYwy5Fb7AFDsX5jx1r0W0kcpzl8zhlix8q4Offmq2DjNbN1YTSHcV/Uf41myx+X8pHtU26sq5BnFPVyOhpCB3puAOlAFhXz1qQNiqqk5xUqHJ5piJ0c5FdTo8MY083TH59/l/hgGuPjfmtnT7hf7yjaOcnr06VjXjzxsi4PldzVvovtMMkYON2ecfWuXutMmhlOz5h68D+tbcupwHKgPkfTH86zp7pZGO3rW+lrEamc9tPGm512g+4NIisMZ71pxGJ2XzN4A9MVDc/KxWL5l6+poAgQ4PSrC4cYI5qru55696nicA9KABoW7jFRvGCuB161caVOhzVSSZF6HNDBEDI2KRVCMC34VMsoKnGOneq8jZcmkMvx3UgXK0Ndl1II61HBcLEnuajaZGPOc44p3JJIVR5wHPGf61rGzhe3HlL831PrWGvLD1zWhYyNbybipI9ccd6aBkD/JxSK9S37Zfdg4P/ANaqinnNAFk4PSo2AHXik3cUFxikMYy8Z70scJI5GKaxzT1koACgikVjyMjIouGR8Mgx6ipVxIMHrio2Qg4osAWcXmTqCOP/AK1dBJGEQktgAZPFc/byLHdKz8KM8/hV2+1ZJIjFGM7hyT+PvSSjuwdyvfzAnET5XoeO/NZ3XrQRk05RQAD0pdmelSrHn61IsRXmiwXK3l881MkdStGrLuB5+tIh2nmmBTToKuWv3qKKlAI/+sf6mox/rKKKYFkdDQv3qKKYFM/6x/8AfNTR9aKKSBiyVSfqKKKBj0+6aY33qKKAFHSk/iFFFAE8f31+taaf6j/PrRRVITIr7/VJ+P8ASqa9KKKHuJCnpTTRRSGJ3pR1oooAni6int940UUwKcn3BUH8QooqEMkHSlXvRRTAsx9an/5ZtRRVEkafcP1pj0UUugz/2f/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo2ZjdlNWMyYS1mODAzLTQ0NjktYmQzZC1kNjYyNGRjMWU3MWYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDFiZjkwZDMtZWVlNy00YzVjLWI4NjEtNGNjMTA4OGU0MjY5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTQzYzI0NTctY2Q4OC00Yzg3LTg2ZDYtZjRhZDExYjQwZmYxIiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTE2MDczODM3MyIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmYxNGJlZGJkLWJjMWItNDQ4Mi04Yzk1LTQ0MTZhNTlhNGU2MyIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzk6MjArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAAAwUEBgABAgcI/8QAGgEAAgMBAQAAAAAAAAAAAAAAAQIAAwQFBv/aAAwDAQACEAMQAAABru7NfdFXrfO0/Ifo+cNCwyWSGgeXpFz7+XU+yom6mTsrWYrcZZId1fWtuRewBz7F/NfnPJAu4lZBJ1zZpU/WpDyL90sues3apSaVZVBjw7h52tFOvFYUC01K+5iQ7YCyZIyoJs0ru4zXW5crdecG3daPqLF1aK2FQ6POpnbpVtOjOAZcDrOqy5olg9n8117hyti6xK92stI287S1r9QRWnkzINAkdXfFtkYIt76w9SNeY7rkX131OaIwJUW1cKIr1BcjYQZg/wAWmbxhWPR0CaWLHon43q3TzAtQYl94fYsXM1+c+w84qVosEto/w3x9lCFhOaRFnRhTJRABIitLSFcbkTgkMmVk1q8yCkjgjk3I4sVep4kkSDQxDJzLsH//xAAnEAACAgICAgEDBQEAAAAAAAABAgMEABEFEgYTIRQiJAcQFTEyI//aAAgBAQABBQLuLsX6e2pK/KeVchFS4u3/AHX7JkdhXJlC40mdvj2fJn1iWA2b3k0STNEI4ckIGcF5B/Cc1y/NPynKN+Qky6O2RgTvtgkzZORHuraiFaZJQY1DTRLGHZyXiHqVywqWA+O7FvWMp8L9Utji+gPjzEW+MlqqknrW1c9souFS1l5TXk3luVoV77cShF8a4ee5JZ8RPSt41LWsQ0l4+ZpkoW7nkQR5bX1mW5gybGEb/aNipeP2rJV9ZC6bx/yaKjQXyul1ueQw3I/K/IJHijvFqifkC4GKIp6dDnb5O8UYimeGCNu14LC+v+dHc6V3aoHVnlkbIrRgkXVx56PqV9EPEy4N71nCnpykjekTn3kr9nAWkrW+Ytx9rcjNPruJIwM4qzDFUnevLR+JcsNoK2Kd5xC7sct7GkXYP+1KEYh7NLp8aEwAqGxo8hZocob994oG1vEB3TlZHew8pk+5YmIx5T37ESdyxb4r71hOIdj2tA3+jGoOH+v/xAApEQACAgEEAQIFBQAAAAAAAAABAgARAwQSITEQIEEFExQwUSIjMjNS/9oACAEDAQE/AXAfj3mHg1HYAczuAbjUbHXUVSRUVAJcNXBjUCfJ/wAx8ZTuDDx3BiYGIbtop2vzGNm4TuiUBcuXL4lyzN494MgEbITN4qBrgcDqMd3PkLU494uNTGxifT/iPiK9xvFeFNGE+dLhfK1iZfhxAvG1zHpjv25KqbFxOYSFbmNlC/xmTIW9QHPnS6tcKbCJ9djmbVJmoL3NZlYftkRclLUDfmD1BbHE23CAD4UXFJx8iEk8n0EEd+nT/wBgjGvOBgj/AKupqGUmlhO7nzo3wItt3MpwZUtZ0YPODhrhbcbP2QfTdff/AP/EACoRAAICAQQBBAEDBQAAAAAAAAECAAMRBBIhMRAFEyBBUSIyQhQwM2GR/9oACAECAQE/AaWej9R5BmsAIDSutrDhZ0I7ipdxlWtVzhuJZqKkfJMt1DNnB4PgMw4Bjay1jkcRPUF/mJTet3UOvAcjbxG11TLt55moCptrYyysW1AJKk2JiKoqXuanc9gQ/thYoxx8a6nt/YJ/SN1nmU6ZK1H5h01jORjEeo1nDR97EK3M06GtcZ48WjeuI+otc7hBW7LuA4jZXBP3MzfN26aEsBk9TaAxcfcyfF9fuJNNQU/U/czMz1C2utMN3KfUlJ22rgf6lmorKbqc5hZrKh+J2MTbmaStbCVM57mfPfce5awN/BiMtgysE9R07Nbv/MOncdyhDU2T1PT9OufdzLtKHsDfX3L9IMg1/wDJsWsAATmY+GuB3A/USxqzlZp7HtTc3jXLlA0QBmAaKFHC/XhxugTZlswOWI2HImfzDB41n+EzT0+8/PUCBV2r41dfu0nHYmhpZTvcRU9sYHgzWrfZZsXqBbtPZzxFyygmHzrOUCj8xahUNqj+yyBu5+r+MxjjwIVDDn5/Xw6Pw//EAC8QAAEDAwMCBQIGAwAAAAAAAAEAAhESITEDIkEQUQQTMmGBIEIjJDNDUnFyseH/2gAIAQEABj8COm/1ftxe6d4Y41Gw4HuFqV6jWPcNoN5TnEKojaows9Jmyjj6L295VjfuowFp6+oC7Rw6nK1/EueXaZcaAe3Chwp/pM070o4U9ZRtKElQMjunO1TSF+G9viNM4c1AFEF4teTx0LXTV3UqTZS0yAiLShS4Pdyt9jyE6TYLb6UCAAVudUqTgoEHc7lZRAyvMaI0+XlflterXOQ+yDPGeSdI4c03KexrqZiyLtRgLHYeboDSpcR25Ti8qGC0oLb1pmf8lUNze4WJC0vDu05p5+Uag6fay02aQMzNX8Sm+D8rTEtBJyf+Lc6XNsFP3J4O0DAR5V1iFfpUwen1Be2EBp/KlOEHanFsyidUms3kqFfHZHygas7lMT3CAi6k4UC/TRdwJ/0nOtCqn4UKh/6bxBThpR8JzlPKLpn2TJpY7mpTUHOTiMyms5yetQ+0SU0Bp8v2VxHXehBV7z1pnae6tjlYl/eetkKiv6HHWVdETbP0SwwcKTnpK//EACUQAQACAgEFAAICAwAAAAAAAAEAESExQVFhcYGRscEQ8KHR8f/aAAgBAQABPyEF6Jyv4c9fzLWBwWcqfuA2E2szgPkYtresuwrTymG+Y1NOLmr0gmONtwMbLi61MXTcB/pGqRnHKcmqHx5PkCrsishN57zPoCFHFXGIwh440vzGM3Vg3Gh0XGIEZeZYKuOYvBLhR8xMwvGJTKF+xWnY2lU39xsiWHSPccnPyDYqYHdxlqAOL43EgOCKdmAv7OBqxBshbrKK5M9LgY/oWzgvAsohBxSy0Ef00Yt4wPrCR3nML3+UoIX0GpWo+Q7QWJK7ZT0rrE3HwWX2+zn+ZtP75l1c7RK0We5ZKYlquGakFKlwmdzxER5pLy4Ix65esqOXWDmMwUe8GN6l9SQvPntWotaeUqZF8SAYN7DVNmAda7VMeRBHslhzc9ZfzT/kyw2F4n9kXOkRnmJwZVthwPs6Qi+gRCW9Ohcd/Efww7sdI+Wa8BjQZXBdAzE4uajmhYqmcSiB7su1kObRXivZzqBZodAmZwcnWCYBdIOE8VL3X5nTlae0uhF8usx0ohaWllQs3V4ZxmPpMKDRjxN55RqqrhtWUKKSsbcaOJhGIYVGU5v6Jov/ABB7pfNWYXjX7JeE25Wy3E7GPB8mZCntxAPQODmGp9sQBiBdmoXZB4h7oXGlwPsMOs2F2CidL+EBWmen1UfZseF+ZYUxomIblla4cioUIIRVlkOcRaxDKXkLW2Glk0Apn//aAAwDAQACAAMAAAAQmzVu8s1W1nzW/vxGlh9XjIpgwdesdisODvLuOoM7ZARAtGWxX8OTVLDMHlpsxtg0ECD3/8QAJhEBAAMAAgIBAQkAAAAAAAAAAQARITFBEFFxYSCBobHB0eHw8f/aAAgBAwEBPxBOpQiVUsSnKNQii1cXg57lRZofvAVdxLREg7FLq4mAiIeUItmRqBvr3FZ+/HdMV2ESw7KJDewOJc4Z3SonpMjb6lIpuCMlgjmXseARyBhlB1OJbqHEOYWKWwsjTAwHy0oC0SsiVOIodxBcd3/kOAs77/GBm6cz9SWDg9zU1U3WBKnzKlVLbBsusYsE+xvyzDBgNj6vUEClg+3+IqN04icKK2WXLnzLqXGR6cwU1gfDJAlvyRiy18VcBujZwipXqGx8Is+fymmpdtsuGe7GXDslq3gZS0NWsdqP99ZGkDicLleEWuhiJ4OPCZC4N+C4hxEO4eGoLhCEQYFcRL5nU7+wAmwi1PpP/8QAJhEBAAIBAwMEAwEBAAAAAAAAAQARITFBUWFx8IGRoeEQscHR8f/aAAgBAgEBPxClS0ns1cIzKUSqjiP9MlfrOkJXEHFc1no94XrB9qK++sqG2ghmqnmbiBwPTJBleeN/uaQDHD7fyMKYKeksIB0ePTRlXGyQCJms948FUu7CfORpvcuQC4xt50iXmakriUy2LK83g6EY2nHeACWbz3iE9zHu2sqxTElNMG958+JYNtRtXStYXAVKdu3idYlZAONvH5jC4N5QByIBzKGUxMykTLT0OXdgPM/wV+IMw0vU0Zc9J29es11DjAOZN0Neu+J0Ujw/qO1I20Da8c/MDUwunvqP+f7DuJcZhnbYeGZoqrg2miY2l1HBN0TGptr/ADSWTsgp0i+zQK9CI1hEGVYTk806y2LaUDQ+4Xils+PfSMDL+X2yiI5rXMBEtvNdJSwJbrox/YLemUnDit5tCScjXv8A8mn8pfvCsYYY2ly0I0jcJLS8tuOmWtI4CtnDZx6eby2AQVv+VC3p+44AaasJYAlbRwcw9NfiOKlYLh69lfduBzAGYasaiBp6/cABUaebxhNMrYEuFawuukQrgft6wZrpEYNtMQiVGIGkrqjXJcunLrKmmZUDCXBs7y248wWotuYYbJrK/IzFcE2gDNrn/8QAJBABAQACAgICAQUBAAAAAAAAAREAITFBUWFxgZGhscHR8OH/2gAIAQEAAT8QZzF2xILVog4HQ4OUaVRAFG3SCJLv04n9Q/GUe1r2Au0Mdpaj4XBriNt5J1++c9Hh6cb6mKRr7/XHOFIK+jJppB3H1fGLJUoQYVwjhp94ikDwBzjHQzlmjnERp5JvHzTZpAL3h376nXf94zOXIrDZuId+MtwEQpgJeA15wV1Cug6fZ0fRgpCDQ0Yu3l0/EyFAFBkPBr44x4KV0jGzAT4zcoSE4wcVHRGFaSzQNtbriKawl5dHrHZUbLTz8ZHmxAo7+3YEpz6ibT+1oYSJQRN0lMNPCyxvIcv9TA/FAraJyhv25ahvE0ODDZk4nR4Trq7wOVEhIT2vJXv3kLjUGD/3LHFjBBFlkeR16zm7RQor6694YKtoFJsRiJx9ZWVL4SR98fnHBVhgaebXqc/eXM0Q7gb/AE/n4P8ArDdPYXn5uIspoLQ+QNGCvCkq+LHwYOdDBFmcvd6xQKER5yH7bdrkXC2aWUFLDhezzgitpQBUNQ73g/VwoIugPInXeEfnDHUoks52aompASMupq2JyF4ZOb6sAAEUCbATWtk494w/fqI9E8F1kIBg9sGlfD/GHJVa+E+MnJe2S+zprO/8MXEJUA8HaBftnR8aQvH+845WzV5f8ywYNk4KHZeXmes1PDNAzbR3XPFB9o0R3UidjLvL5mWGUmhFT2x8tu0rB1bcfQ9YUyCVdQNkH6PxiijV1WbVQ3S8+8r/ADgBz52+8YaRtAu/vJVc4pqa6wjwWx4W44O0+M2SdF86OdjV6T2YFdEkpD2RxP6xSFBKVHRcG3Xajiu5KPJPzrX3hJXelBTdOwlPeS6NqrAee5DXjGeUoeHj+P1w3BXEaTi/78YHSpeQ6gzjUwGMk9fUm5tMQ6VgEj/ObRrbtiNkpQuucVC0wU0TC5hgcJOJ8pzi0hEjboH3m6msBaBxm0Y+LjCQGe2/Rx8L5y0pBB6ChF7ZvD7tJqhIg/WPAEQwxLnQe/3yKZLDrY3wl/3KhWSmniJPGNIj3MGxxu2AJPWn5yKEh32wQVT0vOQKCwG3E+/wZOlEJpebPrKCRpGT6yhCMIg24jVS7N8MOeDgVXl840mtjOjlvFg9XrJMD1hLBeNGMATLadE8OT4tacCY3L10b0oHPr3mnQp6zXR54cVwad/vhyFboP2Y6LGSgpzw5wxQ09YWKB6JctNq6u8FRK2zHMUDGxWOEY9XClcTQW2+speVQsNOveKpG1OVec54JbjAYPYc/Of/2Q==",links:["https://mt0.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt2.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt3.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"]}],KV={class:"base-map-button__content"},QV={class:"base-map-button__title"},JV={class:""},tU={key:1},eU={class:"base-map-control-setting"},nU=["title","onClick"],iU=di({__name:"BaseMapControl",props:{...Wa,baseMaps:{type:Array,default:()=>XV},title:{type:String,default:""},defaultBaseMap:{type:String,default:"Open Street Map"},controlIcon:{type:String,default:""}},setup(t){const e=t,{mapId:i,moduleContainerProps:a}=So(e),{trans:u,setLocale:f}=ga(i.value),{setBaseMaps:o,baseMaps:y,setDefaultBaseMap:_,setCurrent:C,currentBaseMap:S}=uE(i.value);vl(()=>e.baseMaps,X=>{o(X)},{immediate:!0}),vl(()=>e.defaultBaseMap,X=>{_(X)},{immediate:!0}),f({map:{basemap:{title:"Map basemap",setting:"Setting"}}});const k=De(()=>70),P={layer:Xk},B=Ke(!1);function G(X){C(X)}function j(){B.value=!B.value}return(X,pt)=>(ut(),Se(W(La),er(W(a),{btnWidth:70}),{btn:Xt(()=>[W(S)?(ut(),Se(W(Ar),{key:0,tooltip:t.title},{content:Xt(()=>[Pt(W(O4),{class:"clickable base-map-button__container",height:"70px",width:"70px",onClick:j},{default:Xt(()=>[At("div",KV,[Pt(W(Jx),{src:W(S).thumbnail},{default:Xt(()=>[At("div",QV,[t.controlIcon?(ut(),Se(W(Kb),{key:0,dark:"",small:""},{default:Xt(()=>[xo(vn(t.controlIcon),1)]),_:1})):(ut(),Se(W(Rn),{key:1,type:"mdi",path:P.layer},null,8,["path"])),At("div",JV,vn(t.title||W(u)("map.basemap.title")),1)])]),_:1},8,["src"])])]),_:1})]),_:1},8,["tooltip"])):(ut(),Yt("div",tU))]),draggable:Xt(J=>[B.value?(ut(),Se(W(mf),er({key:0},J,{height:k.value*(Math.floor(W(y).length/3)+1)+48+10,show:B.value,"onUpdate:show":pt[0]||(pt[0]=nt=>B.value=nt),"is-resizable":!1,title:W(u)("map.basemap.setting"),width:k.value*3+24}),{default:Xt(()=>[At("div",eU,[(ut(!0),Yt(Ai,null,Fo(W(y),nt=>(ut(),Yt("div",{key:nt.id,class:"clickable base-map-control-setting-item",style:Gr({width:k.value+"px"}),title:nt.title,onClick:ft=>G(nt)},[At("div",{style:Gr({width:k.value-34+"px",height:k.value-34+"px"})},[Pt(W(Jx),{src:nt.thumbnail},null,8,["src"])],4),At("div",{class:No(["base-map-control-setting-item__title",{"base-map-control-setting-item__active":W(S)&&nt.id==W(S).id}]),style:{"font-size":"14px"}},vn(nt.title),3)],12,nU))),128))])]),_:2},1040,["height","show","title","width"])):sn("",!0)]),default:Xt(()=>[Hn(X.$slots,"default",{},void 0,!0)]),_:3},16))}}),rU=Fn(iU,[["__scopeId","data-v-32e623f7"]]),kA="draw";function oU(t){ff(t,kA,{control:null,state:yl({activated:!1,register_id:void 0,show:!1,draw_support:[],cleanAfterDone:!1}),featuresAdded:{},featuresUpdated:{},featuresDeleted:{},action:{}})}xd(kA,oU);function Is(t){return ia(t,kA)}const aU=(t,e)=>{Is(t).control=e},Q2=(t,e,i)=>{if(!e)throw new Error("Need register id");const a=Is(t),u=a.state,f=a.control;u.register_id=e,u.activated=!0,f.changeMode("simple_select")},sU=t=>{const e=Is(t),i=e.control,a=hE(e);e.action.save&&e.action.save(a.geojson),e.action.close&&e.action.close(),e.state.draw_support=[];const u=e.state;u.show=!1,e.action={},u.register_id=void 0,u.activated=!1,e.callback=void 0,e.featuresAdded={},e.featuresUpdated={},e.featuresDeleted={},i==null||i.deleteAll()};function cE(t,e){const a=Is(t).state;if(!a.activated)throw new Error("Need to call activateDraw first");if(a.register_id&&a.register_id!==e)throw new Error("register id not match")}const J2=(t,e,i,a,u)=>{const f=Is(t);cE(t,e);const o=f.control;f.callback=a,o.changeMode(i,u)};function hE(t){const e=t.control,i=t.featuresDeleted,a=t.featuresAdded,u=t.featuresUpdated,f={added:{},updated:{},deleted:i,geojson:{type:"FeatureCollection",features:[]}},o=e.getAll();return o.features.forEach(y=>{const _=y.id;a[_]?(f.added[_]=y,y.properties||(y.properties={}),y.properties.id=y.id):u[_]&&(f.updated[_]=y)}),f.geojson=o,f}const fE=(t,e,i)=>{const a=Is(t),u=a.state,f=a.action;if(cE(t,e),i&&!(i instanceof Function))throw new Error("Callback is not available");const o=hE(a);f.deleteFeatures&&f.deleteFeatures(Object.values(o.deleted)),f.addFeatures&&f.addFeatures(Object.values(o.added)),f.updateFeatures&&f.updateFeatures(Object.values(o.updated)),f.reset&&f.reset(),i&&i(o),u.activated=!1,pE(t)};function lU(t){const i=Is(t).state;pE(t),i.activated=!1}const pE=t=>{const e=Is(t),i=e.state;e.featuresAdded={},e.featuresAdded={},e.featuresDeleted={},i.cleanAfterDone&&e.control.deleteAll(),e.control.changeMode("simple_select")};function Ax(t,e,i){const a=Is(t);switch(e){case"added":a.featuresAdded[i.id]=!0;break;case"updated":if(a.featuresAdded[i.id])return;a.featuresUpdated[i.id]=!0;break;case"deleted":if(a.featuresAdded[i.id])return;a.featuresDeleted[i.id]=i;break}}function wx(t,e){const i=Is(t);i.callback&&(fE(t,e,i.callback),i.callback=void 0)}function dE(t,e){const i=lf(),a=Is(t),u=a.state,f=a.action;return u.register_id=i,u.show=!0,u.cleanAfterDone=!!e.cleanAfterDone,u.draw_support=e.draw_support,f.addFeatures=e.addFeatures,f.updateFeatures=e.updateFeatures,f.deleteFeatures=e.deleteFeatures,f.getFeatures=e.getFeatures,f.reset=e.reset,f.save=e.save,i}function uU(t,e){const i=e.getView("draw").handler;return i.setLayer(e),dE(t,{cleanAfterDone:!0,draw_support:e.getView("draw").draw_support,getFeatures:i.getFeatures&&i.getFeatures.bind(i),addFeatures:i.addFeatures&&i.addFeatures.bind(i),updateFeatures:i.updateFeatures&&i.updateFeatures.bind(i),deleteFeatures:i.deleteFeatures&&i.deleteFeatures.bind(i),reset:async()=>{Rc.actions.getMap(t,a=>{i.updateLayer(e),e.getView("source").updateForMap(a)})}})}const cU=t=>Is(t).state.activated,hU=t=>Is(t).state.draw_support,fU=t=>Is(t).state.register_id,pU=t=>Is(t).state.show,dU=t=>Is(t).action,mU=t=>Is(t).control;class gU{constructor(){this.geojson={type:"FeatureCollection",features:[]},this.field_id="id"}setLayer(e){const i=e.getView("source").geojson;this.setData(i)}updateLayer(e){e.getView("source").setData(this.geojson)}getAll(){return this.geojson}setData(e){e&&(this.geojson=e)}async addFeatures(e=[]){this.geojson.features.push(...e.map(i=>(delete i.id,i))),this.geojson=eb(this.geojson)}async updateFeatures(e=[]){const i=e.reduce((a,u)=>(a[u.properties.id]=u,a),{});this.geojson.features.forEach((a,u)=>{i[a.properties.id]&&(this.geojson.features[u]=i[a.properties.id])})}async deleteFeatures(e=[]){const i=e.reduce((a,u)=>(a[u.properties.id]=u,a),{});this.geojson.features=this.geojson.features.filter(a=>!i[a.properties.id])}async getFeatures(e){return this.geojson.features.filter(i=>RV(i,os(e)))}}const tC="draw",vU=new gU;class yU extends df{constructor(e={draw_support:[],handler:vU}){super(e),this.key=tC,this.setBuild((i,a)=>new _U(a))}setDrawSupport(e){return this.option.draw_support=e,this}setHandler(e){this.option.handler=e}setForLayer(e){return e.getView("action").addAction({id:tC,menu:{location:"menu",name:"draw",type:"item",click(i,a){uU(a,i)}}}),this}}class _U extends Ap{constructor(e){super(),this.option=e}get draw_support(){return this.option.draw_support}get handler(){return this.option.handler}}const xU=t=>(xh("data-v-4881fa35"),t=t(),bh(),t),bU=xU(()=>At("button",{type:"button",class:"btn-close"},"Close",-1)),AU=[bU],wU=di({__name:"context-menu",props:{zIndex:{type:[String,Number],default:"9"}},setup(t,{expose:e}){const a=WM({mobile:0,tablet:640,laptop:1024,desktop:1280}).smallerOrEqual("tablet"),u=t,f=Ke(),o=Ke(!1),y=Ke(null),_=Ke(null);W9(f,()=>S());function C(k){o.value=!0;const P=f.value;if(P)if((!y.value||!_.value)&&(P.style.visibility="hidden",P.style.display="block",y.value=P.offsetWidth,_.value=P.offsetHeight,P.removeAttribute("style")),P.style.position="fixed",P.style.zIndex=u.zIndex+"",!a.value)y.value+k.pageX>=window.innerWidth?P.style.left=k.pageX-y.value+10+"px":P.style.left=k.pageX-10+"px",_.value+k.pageY>=window.innerHeight?P.style.top=k.pageY-_.value+10+"px":P.style.top=k.pageY-10+"px";else{P.style.top="0px",P.style.left="0px",P.style.right="0px",P.style.bottom="0px",P.style.background="#00000085";const B=P.childNodes[0];B.style.width="100%",B.style.position="absolute",B.style.top="50%",B.style.left="50%",B.style.transform="translate(-50%, -50%)",B.style.padding="40px",B.style.height="100%",B.style.overflow="auto"}}function S(){y.value=null,_.value=null,o.value=!1;const k=f.value;k&&(k.style.display="none")}return e({open:C,close:S}),(k,P)=>(ut(),Yt("div",{class:"menu-container",ref_key:"target",ref:f},[At("div",null,[Hn(k.$slots,"default",{},void 0,!0)]),o.value&&W(a)?(ut(),Yt("div",{key:0,onClick:P[0]||(P[0]=B=>S())},AU)):sn("",!0)],512))}}),mE=Fn(wU,[["__scopeId","data-v-4881fa35"]]);var gE={exports:{}};(function(t,e){(function(i,a){t.exports=a()})(bs,function(){var i=function(I,R){var Y={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},vt={on:function(Dt,Gt,Pe){if(Y[Dt]===void 0)throw new Error("Invalid event type: "+Dt);Y[Dt].push({selector:Gt,fn:Pe})},render:function(Dt){R.store.featureChanged(Dt)}},kt=function(Dt,Gt){for(var Pe=Y[Dt],Ve=Pe.length;Ve--;){var nn=Pe[Ve];if(nn.selector(Gt)){nn.fn.call(vt,Gt)||R.store.render(),R.ui.updateMapClasses();break}}};return I.start.call(vt),{render:I.render,stop:function(){I.stop&&I.stop()},trash:function(){I.trash&&(I.trash(),R.store.render())},combineFeatures:function(){I.combineFeatures&&I.combineFeatures()},uncombineFeatures:function(){I.uncombineFeatures&&I.uncombineFeatures()},drag:function(Dt){kt("drag",Dt)},click:function(Dt){kt("click",Dt)},mousemove:function(Dt){kt("mousemove",Dt)},mousedown:function(Dt){kt("mousedown",Dt)},mouseup:function(Dt){kt("mouseup",Dt)},mouseout:function(Dt){kt("mouseout",Dt)},keydown:function(Dt){kt("keydown",Dt)},keyup:function(Dt){kt("keyup",Dt)},touchstart:function(Dt){kt("touchstart",Dt)},touchmove:function(Dt){kt("touchmove",Dt)},touchend:function(Dt){kt("touchend",Dt)},tap:function(Dt){kt("tap",Dt)}}};function a(I){return I&&I.__esModule&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I}function u(I){if(I.__esModule)return I;var R=I.default;if(typeof R=="function"){var Y=function vt(){if(this instanceof vt){var kt=[null];kt.push.apply(kt,arguments);var Dt=Function.bind.apply(R,kt);return new Dt}return R.apply(this,arguments)};Y.prototype=R.prototype}else Y={};return Object.defineProperty(Y,"__esModule",{value:!0}),Object.keys(I).forEach(function(vt){var kt=Object.getOwnPropertyDescriptor(I,vt);Object.defineProperty(Y,vt,kt.get?kt:{enumerable:!0,get:function(){return I[vt]}})}),Y}var f={},o={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},y=o;function _(I){var R=0;if(I&&I.length>0){R+=Math.abs(C(I[0]));for(var Y=1;Y<I.length;Y++)R-=Math.abs(C(I[Y]))}return R}function C(I){var R,Y,vt,kt,Dt,Gt,Pe=0,Ve=I.length;if(Ve>2){for(Gt=0;Gt<Ve;Gt++)Gt===Ve-2?(vt=Ve-2,kt=Ve-1,Dt=0):Gt===Ve-1?(vt=Ve-1,kt=0,Dt=1):(vt=Gt,kt=Gt+1,Dt=Gt+2),R=I[vt],Y=I[kt],Pe+=(S(I[Dt][0])-S(R[0]))*Math.sin(S(Y[1]));Pe=Pe*y.RADIUS*y.RADIUS/2}return Pe}function S(I){return I*Math.PI/180}f.geometry=function I(R){var Y,vt=0;switch(R.type){case"Polygon":return _(R.coordinates);case"MultiPolygon":for(Y=0;Y<R.coordinates.length;Y++)vt+=_(R.coordinates[Y]);return vt;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(Y=0;Y<R.geometries.length;Y++)vt+=I(R.geometries[Y]);return vt}},f.ring=C;var k={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},P={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},B={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},G={POLYGON:"polygon",LINE:"line_string",POINT:"point"},j={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},X={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},pt={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},J={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},nt={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},ft={ACTIVE:"true",INACTIVE:"false"},Lt=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],xt=-85,Mt=Object.freeze({__proto__:null,classes:k,sources:P,cursors:B,types:G,geojsonTypes:j,modes:X,events:pt,updateActions:J,meta:nt,activeStates:ft,interactions:Lt,LAT_MIN:-90,LAT_RENDERED_MIN:xt,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),Ht={Point:0,LineString:1,MultiLineString:1,Polygon:2};function jt(I,R){var Y=Ht[I.geometry.type]-Ht[R.geometry.type];return Y===0&&I.geometry.type===j.POLYGON?I.area-R.area:Y}function Qt(I){return I.map(function(R){return R.geometry.type===j.POLYGON&&(R.area=f.geometry({type:j.FEATURE,property:{},geometry:R.geometry})),R}).sort(jt).map(function(R){return delete R.area,R})}function Bt(I,R){return R===void 0&&(R=0),[[I.point.x-R,I.point.y-R],[I.point.x+R,I.point.y+R]]}function Ft(I){if(this._items={},this._nums={},this._length=I?I.length:0,I)for(var R=0,Y=I.length;R<Y;R++)this.add(I[R]),I[R]!==void 0&&(typeof I[R]=="string"?this._items[I[R]]=R:this._nums[I[R]]=R)}Ft.prototype.add=function(I){return this.has(I)||(this._length++,typeof I=="string"?this._items[I]=this._length:this._nums[I]=this._length),this},Ft.prototype.delete=function(I){return this.has(I)===!1||(this._length--,delete this._items[I],delete this._nums[I]),this},Ft.prototype.has=function(I){return(typeof I=="string"||typeof I=="number")&&(this._items[I]!==void 0||this._nums[I]!==void 0)},Ft.prototype.values=function(){var I=this,R=[];return Object.keys(this._items).forEach(function(Y){R.push({k:Y,v:I._items[Y]})}),Object.keys(this._nums).forEach(function(Y){R.push({k:JSON.parse(Y),v:I._nums[Y]})}),R.sort(function(Y,vt){return Y.v-vt.v}).map(function(Y){return Y.k})},Ft.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Ot=[nt.FEATURE,nt.MIDPOINT,nt.VERTEX],de={click:function(I,R,Y){return An(I,R,Y,Y.options.clickBuffer)},touch:function(I,R,Y){return An(I,R,Y,Y.options.touchBuffer)}};function An(I,R,Y,vt){if(Y.map===null)return[];var kt=I?Bt(I,vt):R,Dt={};Y.options.styles&&(Dt.layers=Y.options.styles.map(function(nn){return nn.id}).filter(function(nn){return Y.map.getLayer(nn)!=null}));var Gt=Y.map.queryRenderedFeatures(kt,Dt).filter(function(nn){return Ot.indexOf(nn.properties.meta)!==-1}),Pe=new Ft,Ve=[];return Gt.forEach(function(nn){var an=nn.properties.id;Pe.has(an)||(Pe.add(an),Ve.push(nn))}),Qt(Ve)}function _e(I,R){var Y=de.click(I,null,R),vt={mouse:B.NONE};return Y[0]&&(vt.mouse=Y[0].properties.active===ft.ACTIVE?B.MOVE:B.POINTER,vt.feature=Y[0].properties.meta),R.events.currentModeName().indexOf("draw")!==-1&&(vt.mouse=B.ADD),R.ui.queueMapClasses(vt),R.ui.updateMapClasses(),Y[0]}function Ge(I,R){var Y=I.x-R.x,vt=I.y-R.y;return Math.sqrt(Y*Y+vt*vt)}function je(I,R,Y){Y===void 0&&(Y={});var vt=Y.fineTolerance!=null?Y.fineTolerance:4,kt=Y.grossTolerance!=null?Y.grossTolerance:12,Dt=Y.interval!=null?Y.interval:500;I.point=I.point||R.point,I.time=I.time||R.time;var Gt=Ge(I.point,R.point);return Gt<vt||Gt<kt&&R.time-I.time<Dt}function Pi(I,R,Y){Y===void 0&&(Y={});var vt=Y.tolerance!=null?Y.tolerance:25,kt=Y.interval!=null?Y.interval:250;return I.point=I.point||R.point,I.time=I.time||R.time,Ge(I.point,R.point)<vt&&R.time-I.time<kt}var Li={exports:{}},Qn=Li.exports=function(I,R){if(R||(R=16),I===void 0&&(I=128),I<=0)return"0";for(var Y=Math.log(Math.pow(2,I))/Math.log(R),vt=2;Y===1/0;vt*=2)Y=Math.log(Math.pow(2,I/vt))/Math.log(R)*vt;var kt=Y-Math.floor(Y),Dt="";for(vt=0;vt<Math.floor(Y);vt++)Dt=Math.floor(Math.random()*R).toString(R)+Dt;if(kt){var Gt=Math.pow(R,kt);Dt=Math.floor(Math.random()*Gt).toString(R)+Dt}var Pe=parseInt(Dt,R);return Pe!==1/0&&Pe>=Math.pow(2,I)?Qn(I,R):Dt};Qn.rack=function(I,R,Y){var vt=function(Dt){var Gt=0;do{if(Gt++>10){if(!Y)throw new Error("too many ID collisions, use more bits");I+=Y}var Pe=Qn(I,R)}while(Object.hasOwnProperty.call(kt,Pe));return kt[Pe]=Dt,Pe},kt=vt.hats={};return vt.get=function(Dt){return vt.hats[Dt]},vt.set=function(Dt,Gt){return vt.hats[Dt]=Gt,vt},vt.bits=I||128,vt.base=R||16,vt};var un=a(Li.exports),Un=function(I,R){this.ctx=I,this.properties=R.properties||{},this.coordinates=R.geometry.coordinates,this.id=R.id||un(),this.type=R.geometry.type};Un.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Un.prototype.incomingCoords=function(I){this.setCoordinates(I)},Un.prototype.setCoordinates=function(I){this.coordinates=I,this.changed()},Un.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Un.prototype.setProperty=function(I,R){this.properties[I]=R},Un.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:j.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Un.prototype.internal=function(I){var R={id:this.id,meta:nt.FEATURE,"meta:type":this.type,active:ft.INACTIVE,mode:I};if(this.ctx.options.userProperties)for(var Y in this.properties)R["user_"+Y]=this.properties[Y];return{type:j.FEATURE,properties:R,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var ui=function(I,R){Un.call(this,I,R)};(ui.prototype=Object.create(Un.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},ui.prototype.updateCoordinate=function(I,R,Y){this.coordinates=arguments.length===3?[R,Y]:[I,R],this.changed()},ui.prototype.getCoordinate=function(){return this.getCoordinates()};var oi=function(I,R){Un.call(this,I,R)};(oi.prototype=Object.create(Un.prototype)).isValid=function(){return this.coordinates.length>1},oi.prototype.addCoordinate=function(I,R,Y){this.changed();var vt=parseInt(I,10);this.coordinates.splice(vt,0,[R,Y])},oi.prototype.getCoordinate=function(I){var R=parseInt(I,10);return JSON.parse(JSON.stringify(this.coordinates[R]))},oi.prototype.removeCoordinate=function(I){this.changed(),this.coordinates.splice(parseInt(I,10),1)},oi.prototype.updateCoordinate=function(I,R,Y){var vt=parseInt(I,10);this.coordinates[vt]=[R,Y],this.changed()};var wi=function(I,R){Un.call(this,I,R),this.coordinates=this.coordinates.map(function(Y){return Y.slice(0,-1)})};(wi.prototype=Object.create(Un.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(I){return I.length>2})},wi.prototype.incomingCoords=function(I){this.coordinates=I.map(function(R){return R.slice(0,-1)}),this.changed()},wi.prototype.setCoordinates=function(I){this.coordinates=I,this.changed()},wi.prototype.addCoordinate=function(I,R,Y){this.changed();var vt=I.split(".").map(function(kt){return parseInt(kt,10)});this.coordinates[vt[0]].splice(vt[1],0,[R,Y])},wi.prototype.removeCoordinate=function(I){this.changed();var R=I.split(".").map(function(vt){return parseInt(vt,10)}),Y=this.coordinates[R[0]];Y&&(Y.splice(R[1],1),Y.length<3&&this.coordinates.splice(R[0],1))},wi.prototype.getCoordinate=function(I){var R=I.split(".").map(function(vt){return parseInt(vt,10)}),Y=this.coordinates[R[0]];return JSON.parse(JSON.stringify(Y[R[1]]))},wi.prototype.getCoordinates=function(){return this.coordinates.map(function(I){return I.concat([I[0]])})},wi.prototype.updateCoordinate=function(I,R,Y){this.changed();var vt=I.split("."),kt=parseInt(vt[0],10),Dt=parseInt(vt[1],10);this.coordinates[kt]===void 0&&(this.coordinates[kt]=[]),this.coordinates[kt][Dt]=[R,Y]};var ue={MultiPoint:ui,MultiLineString:oi,MultiPolygon:wi},Qe=function(I,R,Y,vt,kt){var Dt=Y.split("."),Gt=parseInt(Dt[0],10),Pe=Dt[1]?Dt.slice(1).join("."):null;return I[Gt][R](Pe,vt,kt)},me=function(I,R){if(Un.call(this,I,R),delete this.coordinates,this.model=ue[R.geometry.type],this.model===void 0)throw new TypeError(R.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(R.geometry.coordinates)};function ke(I){this.map=I.map,this.drawConfig=JSON.parse(JSON.stringify(I.options||{})),this._ctx=I}(me.prototype=Object.create(Un.prototype))._coordinatesToFeatures=function(I){var R=this,Y=this.model.bind(this);return I.map(function(vt){return new Y(R.ctx,{id:un(),type:j.FEATURE,properties:{},geometry:{coordinates:vt,type:R.type.replace("Multi","")}})})},me.prototype.isValid=function(){return this.features.every(function(I){return I.isValid()})},me.prototype.setCoordinates=function(I){this.features=this._coordinatesToFeatures(I),this.changed()},me.prototype.getCoordinate=function(I){return Qe(this.features,"getCoordinate",I)},me.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(I){return I.type===j.POLYGON?I.getCoordinates():I.coordinates})))},me.prototype.updateCoordinate=function(I,R,Y){Qe(this.features,"updateCoordinate",I,R,Y),this.changed()},me.prototype.addCoordinate=function(I,R,Y){Qe(this.features,"addCoordinate",I,R,Y),this.changed()},me.prototype.removeCoordinate=function(I){Qe(this.features,"removeCoordinate",I),this.changed()},me.prototype.getFeatures=function(){return this.features},ke.prototype.setSelected=function(I){return this._ctx.store.setSelected(I)},ke.prototype.setSelectedCoordinates=function(I){var R=this;this._ctx.store.setSelectedCoordinates(I),I.reduce(function(Y,vt){return Y[vt.feature_id]===void 0&&(Y[vt.feature_id]=!0,R._ctx.store.get(vt.feature_id).changed()),Y},{})},ke.prototype.getSelected=function(){return this._ctx.store.getSelected()},ke.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},ke.prototype.isSelected=function(I){return this._ctx.store.isSelected(I)},ke.prototype.getFeature=function(I){return this._ctx.store.get(I)},ke.prototype.select=function(I){return this._ctx.store.select(I)},ke.prototype.deselect=function(I){return this._ctx.store.deselect(I)},ke.prototype.deleteFeature=function(I,R){return R===void 0&&(R={}),this._ctx.store.delete(I,R)},ke.prototype.addFeature=function(I){return this._ctx.store.add(I)},ke.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},ke.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},ke.prototype.setActionableState=function(I){I===void 0&&(I={});var R={trash:I.trash||!1,combineFeatures:I.combineFeatures||!1,uncombineFeatures:I.uncombineFeatures||!1};return this._ctx.events.actionable(R)},ke.prototype.changeMode=function(I,R,Y){return R===void 0&&(R={}),Y===void 0&&(Y={}),this._ctx.events.changeMode(I,R,Y)},ke.prototype.updateUIClasses=function(I){return this._ctx.ui.queueMapClasses(I)},ke.prototype.activateUIButton=function(I){return this._ctx.ui.setActiveButton(I)},ke.prototype.featuresAt=function(I,R,Y){if(Y===void 0&&(Y="click"),Y!=="click"&&Y!=="touch")throw new Error("invalid buffer type");return de[Y](I,R,this._ctx)},ke.prototype.newFeature=function(I){var R=I.geometry.type;return R===j.POINT?new ui(this._ctx,I):R===j.LINE_STRING?new oi(this._ctx,I):R===j.POLYGON?new wi(this._ctx,I):new me(this._ctx,I)},ke.prototype.isInstanceOf=function(I,R){if(I===j.POINT)return R instanceof ui;if(I===j.LINE_STRING)return R instanceof oi;if(I===j.POLYGON)return R instanceof wi;if(I==="MultiFeature")return R instanceof me;throw new Error("Unknown feature class: "+I)},ke.prototype.doRender=function(I){return this._ctx.store.featureChanged(I)},ke.prototype.onSetup=function(){},ke.prototype.onDrag=function(){},ke.prototype.onClick=function(){},ke.prototype.onMouseMove=function(){},ke.prototype.onMouseDown=function(){},ke.prototype.onMouseUp=function(){},ke.prototype.onMouseOut=function(){},ke.prototype.onKeyUp=function(){},ke.prototype.onKeyDown=function(){},ke.prototype.onTouchStart=function(){},ke.prototype.onTouchMove=function(){},ke.prototype.onTouchEnd=function(){},ke.prototype.onTap=function(){},ke.prototype.onStop=function(){},ke.prototype.onTrash=function(){},ke.prototype.onCombineFeature=function(){},ke.prototype.onUncombineFeature=function(){},ke.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Ci={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Di=Object.keys(Ci);function lt(I){var R=Object.keys(I);return function(Y,vt){vt===void 0&&(vt={});var kt={},Dt=R.reduce(function(Gt,Pe){return Gt[Pe]=I[Pe],Gt},new ke(Y));return{start:function(){var Gt=this;kt=Dt.onSetup(vt),Di.forEach(function(Pe){var Ve,nn=Ci[Pe],an=function(){return!1};I[nn]&&(an=function(){return!0}),Gt.on(Pe,an,(Ve=nn,function(qe){return Dt[Ve](kt,qe)}))})},stop:function(){Dt.onStop(kt)},trash:function(){Dt.onTrash(kt)},combineFeatures:function(){Dt.onCombineFeatures(kt)},uncombineFeatures:function(){Dt.onUncombineFeatures(kt)},render:function(Gt,Pe){Dt.toDisplayFeatures(kt,Gt,Pe)}}}}function wt(I){return[].concat(I).filter(function(R){return R!==void 0})}function te(){var I=this;if(!(I.ctx.map&&I.ctx.map.getSource(P.HOT)!==void 0))return Ve();var R=I.ctx.events.currentModeName();I.ctx.ui.queueMapClasses({mode:R});var Y=[],vt=[];I.isDirty?vt=I.getAllIds():(Y=I.getChangedIds().filter(function(nn){return I.get(nn)!==void 0}),vt=I.sources.hot.filter(function(nn){return nn.properties.id&&Y.indexOf(nn.properties.id)===-1&&I.get(nn.properties.id)!==void 0}).map(function(nn){return nn.properties.id})),I.sources.hot=[];var kt=I.sources.cold.length;I.sources.cold=I.isDirty?[]:I.sources.cold.filter(function(nn){var an=nn.properties.id||nn.properties.parent;return Y.indexOf(an)===-1});var Dt=kt!==I.sources.cold.length||vt.length>0;function Gt(nn,an){var qe=I.get(nn).internal(R);I.ctx.events.currentModeRender(qe,function(ti){I.sources[an].push(ti)})}if(Y.forEach(function(nn){return Gt(nn,"hot")}),vt.forEach(function(nn){return Gt(nn,"cold")}),Dt&&I.ctx.map.getSource(P.COLD).setData({type:j.FEATURE_COLLECTION,features:I.sources.cold}),I.ctx.map.getSource(P.HOT).setData({type:j.FEATURE_COLLECTION,features:I.sources.hot}),I._emitSelectionChange&&(I.ctx.map.fire(pt.SELECTION_CHANGE,{features:I.getSelected().map(function(nn){return nn.toGeoJSON()}),points:I.getSelectedCoordinates().map(function(nn){return{type:j.FEATURE,properties:{},geometry:{type:j.POINT,coordinates:nn.coordinates}}})}),I._emitSelectionChange=!1),I._deletedFeaturesToEmit.length){var Pe=I._deletedFeaturesToEmit.map(function(nn){return nn.toGeoJSON()});I._deletedFeaturesToEmit=[],I.ctx.map.fire(pt.DELETE,{features:Pe})}function Ve(){I.isDirty=!1,I.clearChangedIds()}Ve(),I.ctx.map.fire(pt.RENDER,{})}function le(I){var R,Y=this;this._features={},this._featureIds=new Ft,this._selectedFeatureIds=new Ft,this._selectedCoordinates=[],this._changedFeatureIds=new Ft,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=I,this.sources={hot:[],cold:[]},this.render=function(){R||(R=requestAnimationFrame(function(){R=null,te.call(Y)}))},this.isDirty=!1}function pe(I,R){var Y=I._selectedCoordinates.filter(function(vt){return I._selectedFeatureIds.has(vt.feature_id)});I._selectedCoordinates.length===Y.length||R.silent||(I._emitSelectionChange=!0),I._selectedCoordinates=Y}le.prototype.createRenderBatch=function(){var I=this,R=this.render,Y=0;return this.render=function(){Y++},function(){I.render=R,Y>0&&I.render()}},le.prototype.setDirty=function(){return this.isDirty=!0,this},le.prototype.featureChanged=function(I){return this._changedFeatureIds.add(I),this},le.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},le.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},le.prototype.getAllIds=function(){return this._featureIds.values()},le.prototype.add=function(I){return this.featureChanged(I.id),this._features[I.id]=I,this._featureIds.add(I.id),this},le.prototype.delete=function(I,R){var Y=this;return R===void 0&&(R={}),wt(I).forEach(function(vt){Y._featureIds.has(vt)&&(Y._featureIds.delete(vt),Y._selectedFeatureIds.delete(vt),R.silent||Y._deletedFeaturesToEmit.indexOf(Y._features[vt])===-1&&Y._deletedFeaturesToEmit.push(Y._features[vt]),delete Y._features[vt],Y.isDirty=!0)}),pe(this,R),this},le.prototype.get=function(I){return this._features[I]},le.prototype.getAll=function(){var I=this;return Object.keys(this._features).map(function(R){return I._features[R]})},le.prototype.select=function(I,R){var Y=this;return R===void 0&&(R={}),wt(I).forEach(function(vt){Y._selectedFeatureIds.has(vt)||(Y._selectedFeatureIds.add(vt),Y._changedFeatureIds.add(vt),R.silent||(Y._emitSelectionChange=!0))}),this},le.prototype.deselect=function(I,R){var Y=this;return R===void 0&&(R={}),wt(I).forEach(function(vt){Y._selectedFeatureIds.has(vt)&&(Y._selectedFeatureIds.delete(vt),Y._changedFeatureIds.add(vt),R.silent||(Y._emitSelectionChange=!0))}),pe(this,R),this},le.prototype.clearSelected=function(I){return I===void 0&&(I={}),this.deselect(this._selectedFeatureIds.values(),{silent:I.silent}),this},le.prototype.setSelected=function(I,R){var Y=this;return R===void 0&&(R={}),I=wt(I),this.deselect(this._selectedFeatureIds.values().filter(function(vt){return I.indexOf(vt)===-1}),{silent:R.silent}),this.select(I.filter(function(vt){return!Y._selectedFeatureIds.has(vt)}),{silent:R.silent}),this},le.prototype.setSelectedCoordinates=function(I){return this._selectedCoordinates=I,this._emitSelectionChange=!0,this},le.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},le.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},le.prototype.getSelected=function(){var I=this;return this._selectedFeatureIds.values().map(function(R){return I.get(R)})},le.prototype.getSelectedCoordinates=function(){var I=this;return this._selectedCoordinates.map(function(R){return{coordinates:I.get(R.feature_id).getCoordinate(R.coord_path)}})},le.prototype.isSelected=function(I){return this._selectedFeatureIds.has(I)},le.prototype.setFeatureProperty=function(I,R,Y){this.get(I).setProperty(R,Y),this.featureChanged(I)},le.prototype.storeMapConfig=function(){var I=this;Lt.forEach(function(R){I.ctx.map[R]&&(I._mapInitialConfig[R]=I.ctx.map[R].isEnabled())})},le.prototype.restoreMapConfig=function(){var I=this;Object.keys(this._mapInitialConfig).forEach(function(R){I._mapInitialConfig[R]?I.ctx.map[R].enable():I.ctx.map[R].disable()})},le.prototype.getInitialConfigValue=function(I){return this._mapInitialConfig[I]===void 0||this._mapInitialConfig[I]};var Fe=function(){for(var I=arguments,R={},Y=0;Y<arguments.length;Y++){var vt=I[Y];for(var kt in vt)cn.call(vt,kt)&&(R[kt]=vt[kt])}return R},cn=Object.prototype.hasOwnProperty,we=a(Fe),ze=["mode","feature","mouse"];function Te(I){var R=null,Y=null,vt={onRemove:function(){return I.map.off("load",vt.connect),clearInterval(Y),vt.removeLayers(),I.store.restoreMapConfig(),I.ui.removeButtons(),I.events.removeEventListeners(),I.ui.clearMapClasses(),I.boxZoomInitial&&I.map.boxZoom.enable(),I.map=null,I.container=null,I.store=null,R&&R.parentNode&&R.parentNode.removeChild(R),R=null,this},connect:function(){I.map.off("load",vt.connect),clearInterval(Y),vt.addLayers(),I.store.storeMapConfig(),I.events.addEventListeners()},onAdd:function(kt){var Dt=kt.fire;return kt.fire=function(Gt,Pe){var Ve=arguments;return Dt.length===1&&arguments.length!==1&&(Ve=[we({},{type:Gt},Pe)]),Dt.apply(kt,Ve)},I.map=kt,I.events=function(Gt){var Pe=Object.keys(Gt.options.modes).reduce(function(xe,wn){return xe[wn]=lt(Gt.options.modes[wn]),xe},{}),Ve={},nn={},an={},qe=null,ti=null;an.drag=function(xe,wn){wn({point:xe.point,time:new Date().getTime()})?(Gt.ui.queueMapClasses({mouse:B.DRAG}),ti.drag(xe)):xe.originalEvent.stopPropagation()},an.mousedrag=function(xe){an.drag(xe,function(wn){return!je(Ve,wn)})},an.touchdrag=function(xe){an.drag(xe,function(wn){return!Pi(nn,wn)})},an.mousemove=function(xe){if((xe.originalEvent.buttons!==void 0?xe.originalEvent.buttons:xe.originalEvent.which)===1)return an.mousedrag(xe);var wn=_e(xe,Gt);xe.featureTarget=wn,ti.mousemove(xe)},an.mousedown=function(xe){Ve={time:new Date().getTime(),point:xe.point};var wn=_e(xe,Gt);xe.featureTarget=wn,ti.mousedown(xe)},an.mouseup=function(xe){var wn=_e(xe,Gt);xe.featureTarget=wn,je(Ve,{point:xe.point,time:new Date().getTime()})?ti.click(xe):ti.mouseup(xe)},an.mouseout=function(xe){ti.mouseout(xe)},an.touchstart=function(xe){if(Gt.options.touchEnabled){nn={time:new Date().getTime(),point:xe.point};var wn=de.touch(xe,null,Gt)[0];xe.featureTarget=wn,ti.touchstart(xe)}},an.touchmove=function(xe){if(Gt.options.touchEnabled)return ti.touchmove(xe),an.touchdrag(xe)},an.touchend=function(xe){if(xe.originalEvent.preventDefault(),Gt.options.touchEnabled){var wn=de.touch(xe,null,Gt)[0];xe.featureTarget=wn,Pi(nn,{time:new Date().getTime(),point:xe.point})?ti.tap(xe):ti.touchend(xe)}};var Nr=function(xe){return!(xe===8||xe===46||xe>=48&&xe<=57)};function si(xe,wn,sr){sr===void 0&&(sr={}),ti.stop();var no=Pe[xe];if(no===void 0)throw new Error(xe+" is not valid");qe=xe;var Ji=no(Gt,wn);ti=i(Ji,Gt),sr.silent||Gt.map.fire(pt.MODE_CHANGE,{mode:xe}),Gt.store.setDirty(),Gt.store.render()}an.keydown=function(xe){(xe.srcElement||xe.target).classList.contains("mapboxgl-canvas")&&(xe.keyCode!==8&&xe.keyCode!==46||!Gt.options.controls.trash?Nr(xe.keyCode)?ti.keydown(xe):xe.keyCode===49&&Gt.options.controls.point?si(X.DRAW_POINT):xe.keyCode===50&&Gt.options.controls.line_string?si(X.DRAW_LINE_STRING):xe.keyCode===51&&Gt.options.controls.polygon&&si(X.DRAW_POLYGON):(xe.preventDefault(),ti.trash()))},an.keyup=function(xe){Nr(xe.keyCode)&&ti.keyup(xe)},an.zoomend=function(){Gt.store.changeZoom()},an.data=function(xe){if(xe.dataType==="style"){var wn=Gt.setup,sr=Gt.map,no=Gt.options,Ji=Gt.store;no.styles.some(function(Ms){return sr.getLayer(Ms.id)})||(wn.addLayers(),Ji.setDirty(),Ji.render())}};var Cr={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){qe=Gt.options.defaultMode,ti=i(Pe[qe](Gt),Gt)},changeMode:si,actionable:function(xe){var wn=!1;Object.keys(xe).forEach(function(sr){if(Cr[sr]===void 0)throw new Error("Invalid action type");Cr[sr]!==xe[sr]&&(wn=!0),Cr[sr]=xe[sr]}),wn&&Gt.map.fire(pt.ACTIONABLE,{actions:Cr})},currentModeName:function(){return qe},currentModeRender:function(xe,wn){return ti.render(xe,wn)},fire:function(xe,wn){an[xe]&&an[xe](wn)},addEventListeners:function(){Gt.map.on("mousemove",an.mousemove),Gt.map.on("mousedown",an.mousedown),Gt.map.on("mouseup",an.mouseup),Gt.map.on("data",an.data),Gt.map.on("touchmove",an.touchmove),Gt.map.on("touchstart",an.touchstart),Gt.map.on("touchend",an.touchend),Gt.container.addEventListener("mouseout",an.mouseout),Gt.options.keybindings&&(Gt.container.addEventListener("keydown",an.keydown),Gt.container.addEventListener("keyup",an.keyup))},removeEventListeners:function(){Gt.map.off("mousemove",an.mousemove),Gt.map.off("mousedown",an.mousedown),Gt.map.off("mouseup",an.mouseup),Gt.map.off("data",an.data),Gt.map.off("touchmove",an.touchmove),Gt.map.off("touchstart",an.touchstart),Gt.map.off("touchend",an.touchend),Gt.container.removeEventListener("mouseout",an.mouseout),Gt.options.keybindings&&(Gt.container.removeEventListener("keydown",an.keydown),Gt.container.removeEventListener("keyup",an.keyup))},trash:function(xe){ti.trash(xe)},combineFeatures:function(){ti.combineFeatures()},uncombineFeatures:function(){ti.uncombineFeatures()},getMode:function(){return qe}}}(I),I.ui=function(Gt){var Pe={},Ve=null,nn={mode:null,feature:null,mouse:null},an={mode:null,feature:null,mouse:null};function qe(xe){an=we(an,xe)}function ti(){var xe,wn;if(Gt.container){var sr=[],no=[];ze.forEach(function(Ji){an[Ji]!==nn[Ji]&&(sr.push(Ji+"-"+nn[Ji]),an[Ji]!==null&&no.push(Ji+"-"+an[Ji]))}),sr.length>0&&(xe=Gt.container.classList).remove.apply(xe,sr),no.length>0&&(wn=Gt.container.classList).add.apply(wn,no),nn=we(nn,an)}}function Nr(xe,wn){wn===void 0&&(wn={});var sr=document.createElement("button");return sr.className=k.CONTROL_BUTTON+" "+wn.className,sr.setAttribute("title",wn.title),wn.container.appendChild(sr),sr.addEventListener("click",function(no){if(no.preventDefault(),no.stopPropagation(),no.target===Ve)return si(),void wn.onDeactivate();Cr(xe),wn.onActivate()},!0),sr}function si(){Ve&&(Ve.classList.remove(k.ACTIVE_BUTTON),Ve=null)}function Cr(xe){si();var wn=Pe[xe];wn&&wn&&xe!=="trash"&&(wn.classList.add(k.ACTIVE_BUTTON),Ve=wn)}return{setActiveButton:Cr,queueMapClasses:qe,updateMapClasses:ti,clearMapClasses:function(){qe({mode:null,feature:null,mouse:null}),ti()},addButtons:function(){var xe=Gt.options.controls,wn=document.createElement("div");return wn.className=k.CONTROL_GROUP+" "+k.CONTROL_BASE,xe&&(xe[G.LINE]&&(Pe[G.LINE]=Nr(G.LINE,{container:wn,className:k.CONTROL_BUTTON_LINE,title:"LineString tool "+(Gt.options.keybindings?"(l)":""),onActivate:function(){return Gt.events.changeMode(X.DRAW_LINE_STRING)},onDeactivate:function(){return Gt.events.trash()}})),xe[G.POLYGON]&&(Pe[G.POLYGON]=Nr(G.POLYGON,{container:wn,className:k.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(Gt.options.keybindings?"(p)":""),onActivate:function(){return Gt.events.changeMode(X.DRAW_POLYGON)},onDeactivate:function(){return Gt.events.trash()}})),xe[G.POINT]&&(Pe[G.POINT]=Nr(G.POINT,{container:wn,className:k.CONTROL_BUTTON_POINT,title:"Marker tool "+(Gt.options.keybindings?"(m)":""),onActivate:function(){return Gt.events.changeMode(X.DRAW_POINT)},onDeactivate:function(){return Gt.events.trash()}})),xe.trash&&(Pe.trash=Nr("trash",{container:wn,className:k.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){Gt.events.trash()}})),xe.combine_features&&(Pe.combine_features=Nr("combineFeatures",{container:wn,className:k.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){Gt.events.combineFeatures()}})),xe.uncombine_features&&(Pe.uncombine_features=Nr("uncombineFeatures",{container:wn,className:k.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){Gt.events.uncombineFeatures()}}))),wn},removeButtons:function(){Object.keys(Pe).forEach(function(xe){var wn=Pe[xe];wn.parentNode&&wn.parentNode.removeChild(wn),delete Pe[xe]})}}}(I),I.container=kt.getContainer(),I.store=new le(I),R=I.ui.addButtons(),I.options.boxSelect&&(I.boxZoomInitial=kt.boxZoom.isEnabled(),kt.boxZoom.disable(),kt.dragPan.disable(),kt.dragPan.enable()),kt.loaded()?vt.connect():(kt.on("load",vt.connect),Y=setInterval(function(){kt.loaded()&&vt.connect()},16)),I.events.start(),R},addLayers:function(){I.map.addSource(P.COLD,{data:{type:j.FEATURE_COLLECTION,features:[]},type:"geojson"}),I.map.addSource(P.HOT,{data:{type:j.FEATURE_COLLECTION,features:[]},type:"geojson"}),I.options.styles.forEach(function(kt){I.map.addLayer(kt)}),I.store.setDirty(!0),I.store.render()},removeLayers:function(){I.options.styles.forEach(function(kt){I.map.getLayer(kt.id)&&I.map.removeLayer(kt.id)}),I.map.getSource(P.COLD)&&I.map.removeSource(P.COLD),I.map.getSource(P.HOT)&&I.map.removeSource(P.HOT)}};return I.setup=vt,vt}var en=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Cn(I){return function(R){var Y=R.featureTarget;return!!Y&&!!Y.properties&&Y.properties.meta===I}}function In(I){return!!I.originalEvent&&!!I.originalEvent.shiftKey&&I.originalEvent.button===0}function Pn(I){return!!I.featureTarget&&!!I.featureTarget.properties&&I.featureTarget.properties.active===ft.ACTIVE&&I.featureTarget.properties.meta===nt.FEATURE}function Jn(I){return!!I.featureTarget&&!!I.featureTarget.properties&&I.featureTarget.properties.active===ft.INACTIVE&&I.featureTarget.properties.meta===nt.FEATURE}function Ri(I){return I.featureTarget===void 0}function Ii(I){return!!I.featureTarget&&!!I.featureTarget.properties&&I.featureTarget.properties.meta===nt.FEATURE}function ar(I){var R=I.featureTarget;return!!R&&!!R.properties&&R.properties.meta===nt.VERTEX}function qr(I){return!!I.originalEvent&&I.originalEvent.shiftKey===!0}function Xo(I){return I.keyCode===27}function va(I){return I.keyCode===13}var Da=Object.freeze({__proto__:null,isOfMetaType:Cn,isShiftMousedown:In,isActiveFeature:Pn,isInactiveFeature:Jn,noTarget:Ri,isFeature:Ii,isVertex:ar,isShiftDown:qr,isEscapeKey:Xo,isEnterKey:va,isTrue:function(){return!0}}),Za=wr;function wr(I,R){this.x=I,this.y=R}wr.prototype={clone:function(){return new wr(this.x,this.y)},add:function(I){return this.clone()._add(I)},sub:function(I){return this.clone()._sub(I)},multByPoint:function(I){return this.clone()._multByPoint(I)},divByPoint:function(I){return this.clone()._divByPoint(I)},mult:function(I){return this.clone()._mult(I)},div:function(I){return this.clone()._div(I)},rotate:function(I){return this.clone()._rotate(I)},rotateAround:function(I,R){return this.clone()._rotateAround(I,R)},matMult:function(I){return this.clone()._matMult(I)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(I){return this.x===I.x&&this.y===I.y},dist:function(I){return Math.sqrt(this.distSqr(I))},distSqr:function(I){var R=I.x-this.x,Y=I.y-this.y;return R*R+Y*Y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(I){return Math.atan2(this.y-I.y,this.x-I.x)},angleWith:function(I){return this.angleWithSep(I.x,I.y)},angleWithSep:function(I,R){return Math.atan2(this.x*R-this.y*I,this.x*I+this.y*R)},_matMult:function(I){var R=I[0]*this.x+I[1]*this.y,Y=I[2]*this.x+I[3]*this.y;return this.x=R,this.y=Y,this},_add:function(I){return this.x+=I.x,this.y+=I.y,this},_sub:function(I){return this.x-=I.x,this.y-=I.y,this},_mult:function(I){return this.x*=I,this.y*=I,this},_div:function(I){return this.x/=I,this.y/=I,this},_multByPoint:function(I){return this.x*=I.x,this.y*=I.y,this},_divByPoint:function(I){return this.x/=I.x,this.y/=I.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var I=this.y;return this.y=this.x,this.x=-I,this},_rotate:function(I){var R=Math.cos(I),Y=Math.sin(I),vt=R*this.x-Y*this.y,kt=Y*this.x+R*this.y;return this.x=vt,this.y=kt,this},_rotateAround:function(I,R){var Y=Math.cos(I),vt=Math.sin(I),kt=R.x+Y*(this.x-R.x)-vt*(this.y-R.y),Dt=R.y+vt*(this.x-R.x)+Y*(this.y-R.y);return this.x=kt,this.y=Dt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},wr.convert=function(I){return I instanceof wr?I:Array.isArray(I)?new wr(I[0],I[1]):I};var To=a(Za);function $s(I,R){var Y=R.getBoundingClientRect();return new To(I.clientX-Y.left-(R.clientLeft||0),I.clientY-Y.top-(R.clientTop||0))}function Ys(I,R,Y,vt){return{type:j.FEATURE,properties:{meta:nt.VERTEX,parent:I,coord_path:Y,active:vt?ft.ACTIVE:ft.INACTIVE},geometry:{type:j.POINT,coordinates:R}}}function xl(I,R,Y){var vt=R.geometry.coordinates,kt=Y.geometry.coordinates;if(vt[1]>85||vt[1]<xt||kt[1]>85||kt[1]<xt)return null;var Dt={lng:(vt[0]+kt[0])/2,lat:(vt[1]+kt[1])/2};return{type:j.FEATURE,properties:{meta:nt.MIDPOINT,parent:I,lng:Dt.lng,lat:Dt.lat,coord_path:Y.properties.coord_path},geometry:{type:j.POINT,coordinates:[Dt.lng,Dt.lat]}}}function Ra(I,R,Y){R===void 0&&(R={}),Y===void 0&&(Y=null);var vt,kt=I.geometry,Dt=kt.type,Gt=kt.coordinates,Pe=I.properties&&I.properties.id,Ve=[];function nn(qe,ti){var Nr="",si=null;qe.forEach(function(Cr,xe){var wn=ti!=null?ti+"."+xe:String(xe),sr=Ys(Pe,Cr,wn,an(wn));if(R.midpoints&&si){var no=xl(Pe,si,sr);no&&Ve.push(no)}si=sr;var Ji=JSON.stringify(Cr);Nr!==Ji&&Ve.push(sr),xe===0&&(Nr=Ji)})}function an(qe){return!!R.selectedPaths&&R.selectedPaths.indexOf(qe)!==-1}return Dt===j.POINT?Ve.push(Ys(Pe,Gt,Y,an(Y))):Dt===j.POLYGON?Gt.forEach(function(qe,ti){nn(qe,Y!==null?Y+"."+ti:String(ti))}):Dt===j.LINE_STRING?nn(Gt,Y):Dt.indexOf(j.MULTI_PREFIX)===0&&(vt=Dt.replace(j.MULTI_PREFIX,""),Gt.forEach(function(qe,ti){var Nr={type:j.FEATURE,properties:I.properties,geometry:{type:vt,coordinates:qe}};Ve=Ve.concat(Ra(Nr,R,ti))})),Ve}var uo={enable:function(I){setTimeout(function(){I.map&&I.map.doubleClickZoom&&I._ctx&&I._ctx.store&&I._ctx.store.getInitialConfigValue&&I._ctx.store.getInitialConfigValue("doubleClickZoom")&&I.map.doubleClickZoom.enable()},0)},disable:function(I){setTimeout(function(){I.map&&I.map.doubleClickZoom&&I.map.doubleClickZoom.disable()},0)}},Xs={exports:{}},Au=function(I){if(!I||!I.type)return null;var R=Wr[I.type];if(!R)return null;if(R==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:I}]};if(R==="feature")return{type:"FeatureCollection",features:[I]};if(R==="featurecollection")return I},Wr={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},U=a(Au),Z=Object.freeze({__proto__:null,default:function I(R){switch(R&&R.type||null){case"FeatureCollection":return R.features=R.features.reduce(function(Y,vt){return Y.concat(I(vt))},[]),R;case"Feature":return R.geometry?I(R.geometry).map(function(Y){var vt={type:"Feature",properties:JSON.parse(JSON.stringify(R.properties)),geometry:Y};return R.id!==void 0&&(vt.id=R.id),vt}):[R];case"MultiPoint":return R.coordinates.map(function(Y){return{type:"Point",coordinates:Y}});case"MultiPolygon":return R.coordinates.map(function(Y){return{type:"Polygon",coordinates:Y}});case"MultiLineString":return R.coordinates.map(function(Y){return{type:"LineString",coordinates:Y}});case"GeometryCollection":return R.geometries.map(I).reduce(function(Y,vt){return Y.concat(vt)},[]);case"Point":case"Polygon":case"LineString":return[R]}}}),K=Au,at=u(Z),gt=function(I){return function R(Y){return Array.isArray(Y)&&Y.length&&typeof Y[0]=="number"?[Y]:Y.reduce(function(vt,kt){return Array.isArray(kt)&&Array.isArray(kt[0])?vt.concat(R(kt)):(vt.push(kt),vt)},[])}(I)};at instanceof Function||(at=at.default);var Tt={exports:{}},zt=Tt.exports=function(I){return new tt(I)};function tt(I){this.value=I}function _t(I,R,Y){var vt=[],kt=[],Dt=!0;return function Gt(Pe){var Ve=Y?Zt(Pe):Pe,nn={},an=!0,qe={node:Ve,node_:Pe,path:[].concat(vt),parent:kt[kt.length-1],parents:kt,key:vt.slice(-1)[0],isRoot:vt.length===0,level:vt.length,circular:null,update:function(si,Cr){qe.isRoot||(qe.parent.node[qe.key]=si),qe.node=si,Cr&&(an=!1)},delete:function(si){delete qe.parent.node[qe.key],si&&(an=!1)},remove:function(si){oe(qe.parent.node)?qe.parent.node.splice(qe.key,1):delete qe.parent.node[qe.key],si&&(an=!1)},keys:null,before:function(si){nn.before=si},after:function(si){nn.after=si},pre:function(si){nn.pre=si},post:function(si){nn.post=si},stop:function(){Dt=!1},block:function(){an=!1}};if(!Dt)return qe;function ti(){if(typeof qe.node=="object"&&qe.node!==null){qe.keys&&qe.node_===qe.node||(qe.keys=ge(qe.node)),qe.isLeaf=qe.keys.length==0;for(var si=0;si<kt.length;si++)if(kt[si].node_===Pe){qe.circular=kt[si];break}}else qe.isLeaf=!0,qe.keys=null;qe.notLeaf=!qe.isLeaf,qe.notRoot=!qe.isRoot}ti();var Nr=R.call(qe,qe.node);return Nr!==void 0&&qe.update&&qe.update(Nr),nn.before&&nn.before.call(qe,qe.node),an&&(typeof qe.node!="object"||qe.node===null||qe.circular||(kt.push(qe),ti(),ye(qe.keys,function(si,Cr){vt.push(si),nn.pre&&nn.pre.call(qe,qe.node[si],si);var xe=Gt(qe.node[si]);Y&&ln.call(qe.node,si)&&(qe.node[si]=xe.node),xe.isLast=Cr==qe.keys.length-1,xe.isFirst=Cr==0,nn.post&&nn.post.call(qe,xe),vt.pop()}),kt.pop()),nn.after&&nn.after.call(qe,qe.node)),qe}(I).node}function Zt(I){if(typeof I=="object"&&I!==null){var R;if(oe(I))R=[];else if(be(I)==="[object Date]")R=new Date(I.getTime?I.getTime():I);else if(function(kt){return be(kt)==="[object RegExp]"}(I))R=new RegExp(I);else if(function(kt){return be(kt)==="[object Error]"}(I))R={message:I.message};else if(function(kt){return be(kt)==="[object Boolean]"}(I))R=new Boolean(I);else if(function(kt){return be(kt)==="[object Number]"}(I))R=new Number(I);else if(function(kt){return be(kt)==="[object String]"}(I))R=new String(I);else if(Object.create&&Object.getPrototypeOf)R=Object.create(Object.getPrototypeOf(I));else if(I.constructor===Object)R={};else{var Y=I.constructor&&I.constructor.prototype||I.__proto__||{},vt=function(){};vt.prototype=Y,R=new vt}return ye(ge(I),function(kt){R[kt]=I[kt]}),R}return I}tt.prototype.get=function(I){for(var R=this.value,Y=0;Y<I.length;Y++){var vt=I[Y];if(!R||!ln.call(R,vt)){R=void 0;break}R=R[vt]}return R},tt.prototype.has=function(I){for(var R=this.value,Y=0;Y<I.length;Y++){var vt=I[Y];if(!R||!ln.call(R,vt))return!1;R=R[vt]}return!0},tt.prototype.set=function(I,R){for(var Y=this.value,vt=0;vt<I.length-1;vt++){var kt=I[vt];ln.call(Y,kt)||(Y[kt]={}),Y=Y[kt]}return Y[I[vt]]=R,R},tt.prototype.map=function(I){return _t(this.value,I,!0)},tt.prototype.forEach=function(I){return this.value=_t(this.value,I,!1),this.value},tt.prototype.reduce=function(I,R){var Y=arguments.length===1,vt=Y?this.value:R;return this.forEach(function(kt){this.isRoot&&Y||(vt=I.call(this,vt,kt))}),vt},tt.prototype.paths=function(){var I=[];return this.forEach(function(R){I.push(this.path)}),I},tt.prototype.nodes=function(){var I=[];return this.forEach(function(R){I.push(this.node)}),I},tt.prototype.clone=function(){var I=[],R=[];return function Y(vt){for(var kt=0;kt<I.length;kt++)if(I[kt]===vt)return R[kt];if(typeof vt=="object"&&vt!==null){var Dt=Zt(vt);return I.push(vt),R.push(Dt),ye(ge(vt),function(Gt){Dt[Gt]=Y(vt[Gt])}),I.pop(),R.pop(),Dt}return vt}(this.value)};var ge=Object.keys||function(I){var R=[];for(var Y in I)R.push(Y);return R};function be(I){return Object.prototype.toString.call(I)}var oe=Array.isArray||function(I){return Object.prototype.toString.call(I)==="[object Array]"},ye=function(I,R){if(I.forEach)return I.forEach(R);for(var Y=0;Y<I.length;Y++)R(I[Y],Y,I)};ye(ge(tt.prototype),function(I){zt[I]=function(R){var Y=[].slice.call(arguments,1),vt=new tt(R);return vt[I].apply(vt,Y)}});var ln=Object.hasOwnProperty||function(I,R){return R in I},on=Tt.exports,se=Re;function Re(I){if(!(this instanceof Re))return new Re(I);this._bbox=I||[1/0,1/0,-1/0,-1/0],this._valid=!!I}Re.prototype.include=function(I){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],I[0]),this._bbox[1]=Math.min(this._bbox[1],I[1]),this._bbox[2]=Math.max(this._bbox[2],I[0]),this._bbox[3]=Math.max(this._bbox[3],I[1]),this},Re.prototype.equals=function(I){var R;return R=I instanceof Re?I.bbox():I,this._bbox[0]==R[0]&&this._bbox[1]==R[1]&&this._bbox[2]==R[2]&&this._bbox[3]==R[3]},Re.prototype.center=function(I){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Re.prototype.union=function(I){var R;return this._valid=!0,R=I instanceof Re?I.bbox():I,this._bbox[0]=Math.min(this._bbox[0],R[0]),this._bbox[1]=Math.min(this._bbox[1],R[1]),this._bbox[2]=Math.max(this._bbox[2],R[2]),this._bbox[3]=Math.max(this._bbox[3],R[3]),this},Re.prototype.bbox=function(){return this._valid?this._bbox:null},Re.prototype.contains=function(I){if(!I)return this._fastContains();if(!this._valid)return null;var R=I[0],Y=I[1];return this._bbox[0]<=R&&this._bbox[1]<=Y&&this._bbox[2]>=R&&this._bbox[3]>=Y},Re.prototype.intersect=function(I){return this._valid?(R=I instanceof Re?I.bbox():I,!(this._bbox[0]>R[2]||this._bbox[2]<R[0]||this._bbox[3]<R[1]||this._bbox[1]>R[3])):null;var R},Re.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var I="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",I)},Re.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Ue=function(I){if(!I)return[];var R=at(K(I)),Y=[];return R.features.forEach(function(vt){vt.geometry&&(Y=Y.concat(gt(vt.geometry.coordinates)))}),Y},He=on,ii=se,$e={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},xi=Object.keys($e);function ji(I){for(var R=ii(),Y=Ue(I),vt=0;vt<Y.length;vt++)R.include(Y[vt]);return R}Xs.exports=function(I){return ji(I).bbox()},Xs.exports.polygon=function(I){return ji(I).polygon()},Xs.exports.bboxify=function(I){return He(I).map(function(R){R&&xi.some(function(Y){return!!R[Y]&&$e[Y].indexOf(R.type)!==-1})&&(R.bbox=ji(R).bbox(),this.update(R))})};var ci=a(Xs.exports),gi=-90;function vi(I,R){var Y=gi,vt=90,kt=gi,Dt=90,Gt=270,Pe=-270;I.forEach(function(nn){var an=ci(nn),qe=an[1],ti=an[3],Nr=an[0],si=an[2];qe>Y&&(Y=qe),ti<vt&&(vt=ti),ti>kt&&(kt=ti),qe<Dt&&(Dt=qe),Nr<Gt&&(Gt=Nr),si>Pe&&(Pe=si)});var Ve=R;return Y+Ve.lat>85&&(Ve.lat=85-Y),kt+Ve.lat>90&&(Ve.lat=90-kt),vt+Ve.lat<-85&&(Ve.lat=-85-vt),Dt+Ve.lat<gi&&(Ve.lat=gi-Dt),Gt+Ve.lng<=-270&&(Ve.lng+=360*Math.ceil(Math.abs(Ve.lng)/360)),Pe+Ve.lng>=270&&(Ve.lng-=360*Math.ceil(Math.abs(Ve.lng)/360)),Ve}function ko(I,R){var Y=vi(I.map(function(vt){return vt.toGeoJSON()}),R);I.forEach(function(vt){var kt,Dt=vt.getCoordinates(),Gt=function(Ve){var nn={lng:Ve[0]+Y.lng,lat:Ve[1]+Y.lat};return[nn.lng,nn.lat]},Pe=function(Ve){return Ve.map(function(nn){return Gt(nn)})};vt.type===j.POINT?kt=Gt(Dt):vt.type===j.LINE_STRING||vt.type===j.MULTI_POINT?kt=Dt.map(Gt):vt.type===j.POLYGON||vt.type===j.MULTI_LINE_STRING?kt=Dt.map(Pe):vt.type===j.MULTI_POLYGON&&(kt=Dt.map(function(Ve){return Ve.map(function(nn){return Pe(nn)})})),vt.incomingCoords(kt)})}var Wn={onSetup:function(I){var R=this,Y={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:I.featureIds||[]};return this.setSelected(Y.initiallySelectedFeatureIds.filter(function(vt){return R.getFeature(vt)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),Y},fireUpdate:function(){this.map.fire(pt.UPDATE,{action:J.MOVE,features:this.getSelected().map(function(I){return I.toGeoJSON()})})},fireActionable:function(){var I=this,R=this.getSelected(),Y=R.filter(function(Pe){return I.isInstanceOf("MultiFeature",Pe)}),vt=!1;if(R.length>1){vt=!0;var kt=R[0].type.replace("Multi","");R.forEach(function(Pe){Pe.type.replace("Multi","")!==kt&&(vt=!1)})}var Dt=Y.length>0,Gt=R.length>0;this.setActionableState({combineFeatures:vt,uncombineFeatures:Dt,trash:Gt})},getUniqueIds:function(I){return I.length?I.map(function(R){return R.properties.id}).filter(function(R){return R!==void 0}).reduce(function(R,Y){return R.add(Y),R},new Ft).values():[]},stopExtendedInteractions:function(I){I.boxSelectElement&&(I.boxSelectElement.parentNode&&I.boxSelectElement.parentNode.removeChild(I.boxSelectElement),I.boxSelectElement=null),this.map.dragPan.enable(),I.boxSelecting=!1,I.canBoxSelect=!1,I.dragMoving=!1,I.canDragMove=!1},onStop:function(){uo.enable(this)},onMouseMove:function(I,R){return Ii(R)&&I.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(I),!0},onMouseOut:function(I){return!I.dragMoving||this.fireUpdate()}};Wn.onTap=Wn.onClick=function(I,R){return Ri(R)?this.clickAnywhere(I,R):Cn(nt.VERTEX)(R)?this.clickOnVertex(I,R):Ii(R)?this.clickOnFeature(I,R):void 0},Wn.clickAnywhere=function(I){var R=this,Y=this.getSelectedIds();Y.length&&(this.clearSelectedFeatures(),Y.forEach(function(vt){return R.doRender(vt)})),uo.enable(this),this.stopExtendedInteractions(I)},Wn.clickOnVertex=function(I,R){this.changeMode(X.DIRECT_SELECT,{featureId:R.featureTarget.properties.parent,coordPath:R.featureTarget.properties.coord_path,startPos:R.lngLat}),this.updateUIClasses({mouse:B.MOVE})},Wn.startOnActiveFeature=function(I,R){this.stopExtendedInteractions(I),this.map.dragPan.disable(),this.doRender(R.featureTarget.properties.id),I.canDragMove=!0,I.dragMoveLocation=R.lngLat},Wn.clickOnFeature=function(I,R){var Y=this;uo.disable(this),this.stopExtendedInteractions(I);var vt=qr(R),kt=this.getSelectedIds(),Dt=R.featureTarget.properties.id,Gt=this.isSelected(Dt);if(!vt&&Gt&&this.getFeature(Dt).type!==j.POINT)return this.changeMode(X.DIRECT_SELECT,{featureId:Dt});Gt&&vt?(this.deselect(Dt),this.updateUIClasses({mouse:B.POINTER}),kt.length===1&&uo.enable(this)):!Gt&&vt?(this.select(Dt),this.updateUIClasses({mouse:B.MOVE})):Gt||vt||(kt.forEach(function(Pe){return Y.doRender(Pe)}),this.setSelected(Dt),this.updateUIClasses({mouse:B.MOVE})),this.doRender(Dt)},Wn.onMouseDown=function(I,R){return Pn(R)?this.startOnActiveFeature(I,R):this.drawConfig.boxSelect&&In(R)?this.startBoxSelect(I,R):void 0},Wn.startBoxSelect=function(I,R){this.stopExtendedInteractions(I),this.map.dragPan.disable(),I.boxSelectStartLocation=$s(R.originalEvent,this.map.getContainer()),I.canBoxSelect=!0},Wn.onTouchStart=function(I,R){if(Pn(R))return this.startOnActiveFeature(I,R)},Wn.onDrag=function(I,R){return I.canDragMove?this.dragMove(I,R):this.drawConfig.boxSelect&&I.canBoxSelect?this.whileBoxSelect(I,R):void 0},Wn.whileBoxSelect=function(I,R){I.boxSelecting=!0,this.updateUIClasses({mouse:B.ADD}),I.boxSelectElement||(I.boxSelectElement=document.createElement("div"),I.boxSelectElement.classList.add(k.BOX_SELECT),this.map.getContainer().appendChild(I.boxSelectElement));var Y=$s(R.originalEvent,this.map.getContainer()),vt=Math.min(I.boxSelectStartLocation.x,Y.x),kt=Math.max(I.boxSelectStartLocation.x,Y.x),Dt=Math.min(I.boxSelectStartLocation.y,Y.y),Gt=Math.max(I.boxSelectStartLocation.y,Y.y),Pe="translate("+vt+"px, "+Dt+"px)";I.boxSelectElement.style.transform=Pe,I.boxSelectElement.style.WebkitTransform=Pe,I.boxSelectElement.style.width=kt-vt+"px",I.boxSelectElement.style.height=Gt-Dt+"px"},Wn.dragMove=function(I,R){I.dragMoving=!0,R.originalEvent.stopPropagation();var Y={lng:R.lngLat.lng-I.dragMoveLocation.lng,lat:R.lngLat.lat-I.dragMoveLocation.lat};ko(this.getSelected(),Y),I.dragMoveLocation=R.lngLat},Wn.onTouchEnd=Wn.onMouseUp=function(I,R){var Y=this;if(I.dragMoving)this.fireUpdate();else if(I.boxSelecting){var vt=[I.boxSelectStartLocation,$s(R.originalEvent,this.map.getContainer())],kt=this.featuresAt(null,vt,"click"),Dt=this.getUniqueIds(kt).filter(function(Gt){return!Y.isSelected(Gt)});Dt.length&&(this.select(Dt),Dt.forEach(function(Gt){return Y.doRender(Gt)}),this.updateUIClasses({mouse:B.MOVE}))}this.stopExtendedInteractions(I)},Wn.toDisplayFeatures=function(I,R,Y){R.properties.active=this.isSelected(R.properties.id)?ft.ACTIVE:ft.INACTIVE,Y(R),this.fireActionable(),R.properties.active===ft.ACTIVE&&R.geometry.type!==j.POINT&&Ra(R).forEach(Y)},Wn.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Wn.onCombineFeatures=function(){var I=this.getSelected();if(!(I.length===0||I.length<2)){for(var R=[],Y=[],vt=I[0].type.replace("Multi",""),kt=0;kt<I.length;kt++){var Dt=I[kt];if(Dt.type.replace("Multi","")!==vt)return;Dt.type.includes("Multi")?Dt.getCoordinates().forEach(function(Pe){R.push(Pe)}):R.push(Dt.getCoordinates()),Y.push(Dt.toGeoJSON())}if(Y.length>1){var Gt=this.newFeature({type:j.FEATURE,properties:Y[0].properties,geometry:{type:"Multi"+vt,coordinates:R}});this.addFeature(Gt),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([Gt.id]),this.map.fire(pt.COMBINE_FEATURES,{createdFeatures:[Gt.toGeoJSON()],deletedFeatures:Y})}this.fireActionable()}},Wn.onUncombineFeatures=function(){var I=this,R=this.getSelected();if(R.length!==0){for(var Y=[],vt=[],kt=function(Gt){var Pe=R[Gt];I.isInstanceOf("MultiFeature",Pe)&&(Pe.getFeatures().forEach(function(Ve){I.addFeature(Ve),Ve.properties=Pe.properties,Y.push(Ve.toGeoJSON()),I.select([Ve.id])}),I.deleteFeature(Pe.id,{silent:!0}),vt.push(Pe.toGeoJSON()))},Dt=0;Dt<R.length;Dt++)kt(Dt);Y.length>1&&this.map.fire(pt.UNCOMBINE_FEATURES,{createdFeatures:Y,deletedFeatures:vt}),this.fireActionable()}};var Pr=Cn(nt.VERTEX),$i=Cn(nt.MIDPOINT),Yn={fireUpdate:function(){this.map.fire(pt.UPDATE,{action:J.CHANGE_COORDINATES,features:this.getSelected().map(function(I){return I.toGeoJSON()})})},fireActionable:function(I){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:I.selectedCoordPaths.length>0})},startDragging:function(I,R){this.map.dragPan.disable(),I.canDragMove=!0,I.dragMoveLocation=R.lngLat},stopDragging:function(I){this.map.dragPan.enable(),I.dragMoving=!1,I.canDragMove=!1,I.dragMoveLocation=null},onVertex:function(I,R){this.startDragging(I,R);var Y=R.featureTarget.properties,vt=I.selectedCoordPaths.indexOf(Y.coord_path);qr(R)||vt!==-1?qr(R)&&vt===-1&&I.selectedCoordPaths.push(Y.coord_path):I.selectedCoordPaths=[Y.coord_path];var kt=this.pathsToCoordinates(I.featureId,I.selectedCoordPaths);this.setSelectedCoordinates(kt)},onMidpoint:function(I,R){this.startDragging(I,R);var Y=R.featureTarget.properties;I.feature.addCoordinate(Y.coord_path,Y.lng,Y.lat),this.fireUpdate(),I.selectedCoordPaths=[Y.coord_path]},pathsToCoordinates:function(I,R){return R.map(function(Y){return{feature_id:I,coord_path:Y}})},onFeature:function(I,R){I.selectedCoordPaths.length===0?this.startDragging(I,R):this.stopDragging(I)},dragFeature:function(I,R,Y){ko(this.getSelected(),Y),I.dragMoveLocation=R.lngLat},dragVertex:function(I,R,Y){for(var vt=I.selectedCoordPaths.map(function(Pe){return I.feature.getCoordinate(Pe)}),kt=vi(vt.map(function(Pe){return{type:j.FEATURE,properties:{},geometry:{type:j.POINT,coordinates:Pe}}}),Y),Dt=0;Dt<vt.length;Dt++){var Gt=vt[Dt];I.feature.updateCoordinate(I.selectedCoordPaths[Dt],Gt[0]+kt.lng,Gt[1]+kt.lat)}},clickNoTarget:function(){this.changeMode(X.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(X.SIMPLE_SELECT)},clickActiveFeature:function(I){I.selectedCoordPaths=[],this.clearSelectedCoordinates(),I.feature.changed()},onSetup:function(I){var R=I.featureId,Y=this.getFeature(R);if(!Y)throw new Error("You must provide a featureId to enter direct_select mode");if(Y.type===j.POINT)throw new TypeError("direct_select mode doesn't handle point features");var vt={featureId:R,feature:Y,dragMoveLocation:I.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:I.coordPath?[I.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(R,vt.selectedCoordPaths)),this.setSelected(R),uo.disable(this),this.setActionableState({trash:!0}),vt},onStop:function(){uo.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(I,R,Y){I.featureId===R.properties.id?(R.properties.active=ft.ACTIVE,Y(R),Ra(R,{map:this.map,midpoints:!0,selectedPaths:I.selectedCoordPaths}).forEach(Y)):(R.properties.active=ft.INACTIVE,Y(R)),this.fireActionable(I)},onTrash:function(I){I.selectedCoordPaths.sort(function(R,Y){return Y.localeCompare(R,"en",{numeric:!0})}).forEach(function(R){return I.feature.removeCoordinate(R)}),this.fireUpdate(),I.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(I),I.feature.isValid()===!1&&(this.deleteFeature([I.featureId]),this.changeMode(X.SIMPLE_SELECT,{}))},onMouseMove:function(I,R){var Y=Pn(R),vt=Pr(R),kt=$i(R),Dt=I.selectedCoordPaths.length===0;return Y&&Dt||vt&&!Dt?this.updateUIClasses({mouse:B.MOVE}):this.updateUIClasses({mouse:B.NONE}),(vt||Y||kt)&&I.dragMoving&&this.fireUpdate(),this.stopDragging(I),!0},onMouseOut:function(I){return I.dragMoving&&this.fireUpdate(),!0}};Yn.onTouchStart=Yn.onMouseDown=function(I,R){return Pr(R)?this.onVertex(I,R):Pn(R)?this.onFeature(I,R):$i(R)?this.onMidpoint(I,R):void 0},Yn.onDrag=function(I,R){if(I.canDragMove===!0){I.dragMoving=!0,R.originalEvent.stopPropagation();var Y={lng:R.lngLat.lng-I.dragMoveLocation.lng,lat:R.lngLat.lat-I.dragMoveLocation.lat};I.selectedCoordPaths.length>0?this.dragVertex(I,R,Y):this.dragFeature(I,R,Y),I.dragMoveLocation=R.lngLat}},Yn.onClick=function(I,R){return Ri(R)?this.clickNoTarget(I,R):Pn(R)?this.clickActiveFeature(I,R):Jn(R)?this.clickInactive(I,R):void this.stopDragging(I)},Yn.onTap=function(I,R){return Ri(R)?this.clickNoTarget(I,R):Pn(R)?this.clickActiveFeature(I,R):Jn(R)?this.clickInactive(I,R):void 0},Yn.onTouchEnd=Yn.onMouseUp=function(I){I.dragMoving&&this.fireUpdate(),this.stopDragging(I)};var ai={};function Po(I,R){return!!I.lngLat&&I.lngLat.lng===R[0]&&I.lngLat.lat===R[1]}ai.onSetup=function(){var I=this.newFeature({type:j.FEATURE,properties:{},geometry:{type:j.POINT,coordinates:[]}});return this.addFeature(I),this.clearSelectedFeatures(),this.updateUIClasses({mouse:B.ADD}),this.activateUIButton(G.POINT),this.setActionableState({trash:!0}),{point:I}},ai.stopDrawingAndRemove=function(I){this.deleteFeature([I.point.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT)},ai.onTap=ai.onClick=function(I,R){this.updateUIClasses({mouse:B.MOVE}),I.point.updateCoordinate("",R.lngLat.lng,R.lngLat.lat),this.map.fire(pt.CREATE,{features:[I.point.toGeoJSON()]}),this.changeMode(X.SIMPLE_SELECT,{featureIds:[I.point.id]})},ai.onStop=function(I){this.activateUIButton(),I.point.getCoordinate().length||this.deleteFeature([I.point.id],{silent:!0})},ai.toDisplayFeatures=function(I,R,Y){var vt=R.properties.id===I.point.id;if(R.properties.active=vt?ft.ACTIVE:ft.INACTIVE,!vt)return Y(R)},ai.onTrash=ai.stopDrawingAndRemove,ai.onKeyUp=function(I,R){if(Xo(R)||va(R))return this.stopDrawingAndRemove(I,R)};var ls={onSetup:function(){var I=this.newFeature({type:j.FEATURE,properties:{},geometry:{type:j.POLYGON,coordinates:[[]]}});return this.addFeature(I),this.clearSelectedFeatures(),uo.disable(this),this.updateUIClasses({mouse:B.ADD}),this.activateUIButton(G.POLYGON),this.setActionableState({trash:!0}),{polygon:I,currentVertexPosition:0}},clickAnywhere:function(I,R){if(I.currentVertexPosition>0&&Po(R,I.polygon.coordinates[0][I.currentVertexPosition-1]))return this.changeMode(X.SIMPLE_SELECT,{featureIds:[I.polygon.id]});this.updateUIClasses({mouse:B.ADD}),I.polygon.updateCoordinate("0."+I.currentVertexPosition,R.lngLat.lng,R.lngLat.lat),I.currentVertexPosition++,I.polygon.updateCoordinate("0."+I.currentVertexPosition,R.lngLat.lng,R.lngLat.lat)},clickOnVertex:function(I){return this.changeMode(X.SIMPLE_SELECT,{featureIds:[I.polygon.id]})},onMouseMove:function(I,R){I.polygon.updateCoordinate("0."+I.currentVertexPosition,R.lngLat.lng,R.lngLat.lat),ar(R)&&this.updateUIClasses({mouse:B.POINTER})}};ls.onTap=ls.onClick=function(I,R){return ar(R)?this.clickOnVertex(I,R):this.clickAnywhere(I,R)},ls.onKeyUp=function(I,R){Xo(R)?(this.deleteFeature([I.polygon.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT)):va(R)&&this.changeMode(X.SIMPLE_SELECT,{featureIds:[I.polygon.id]})},ls.onStop=function(I){this.updateUIClasses({mouse:B.NONE}),uo.enable(this),this.activateUIButton(),this.getFeature(I.polygon.id)!==void 0&&(I.polygon.removeCoordinate("0."+I.currentVertexPosition),I.polygon.isValid()?this.map.fire(pt.CREATE,{features:[I.polygon.toGeoJSON()]}):(this.deleteFeature([I.polygon.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT,{},{silent:!0})))},ls.toDisplayFeatures=function(I,R,Y){var vt=R.properties.id===I.polygon.id;if(R.properties.active=vt?ft.ACTIVE:ft.INACTIVE,!vt)return Y(R);if(R.geometry.coordinates.length!==0){var kt=R.geometry.coordinates[0].length;if(!(kt<3)){if(R.properties.meta=nt.FEATURE,Y(Ys(I.polygon.id,R.geometry.coordinates[0][0],"0.0",!1)),kt>3){var Dt=R.geometry.coordinates[0].length-3;Y(Ys(I.polygon.id,R.geometry.coordinates[0][Dt],"0."+Dt,!1))}if(kt<=4){var Gt=[[R.geometry.coordinates[0][0][0],R.geometry.coordinates[0][0][1]],[R.geometry.coordinates[0][1][0],R.geometry.coordinates[0][1][1]]];if(Y({type:j.FEATURE,properties:R.properties,geometry:{coordinates:Gt,type:j.LINE_STRING}}),kt===3)return}return Y(R)}}},ls.onTrash=function(I){this.deleteFeature([I.polygon.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT)};var Lr={onSetup:function(I){var R,Y,vt=(I=I||{}).featureId,kt="forward";if(vt){if(!(R=this.getFeature(vt)))throw new Error("Could not find a feature with the provided featureId");var Dt=I.from;if(Dt&&Dt.type==="Feature"&&Dt.geometry&&Dt.geometry.type==="Point"&&(Dt=Dt.geometry),Dt&&Dt.type==="Point"&&Dt.coordinates&&Dt.coordinates.length===2&&(Dt=Dt.coordinates),!Dt||!Array.isArray(Dt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var Gt=R.coordinates.length-1;if(R.coordinates[Gt][0]===Dt[0]&&R.coordinates[Gt][1]===Dt[1])Y=Gt+1,R.addCoordinate.apply(R,[Y].concat(R.coordinates[Gt]));else{if(R.coordinates[0][0]!==Dt[0]||R.coordinates[0][1]!==Dt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");kt="backwards",Y=0,R.addCoordinate.apply(R,[Y].concat(R.coordinates[0]))}}else R=this.newFeature({type:j.FEATURE,properties:{},geometry:{type:j.LINE_STRING,coordinates:[]}}),Y=0,this.addFeature(R);return this.clearSelectedFeatures(),uo.disable(this),this.updateUIClasses({mouse:B.ADD}),this.activateUIButton(G.LINE),this.setActionableState({trash:!0}),{line:R,currentVertexPosition:Y,direction:kt}},clickAnywhere:function(I,R){if(I.currentVertexPosition>0&&Po(R,I.line.coordinates[I.currentVertexPosition-1])||I.direction==="backwards"&&Po(R,I.line.coordinates[I.currentVertexPosition+1]))return this.changeMode(X.SIMPLE_SELECT,{featureIds:[I.line.id]});this.updateUIClasses({mouse:B.ADD}),I.line.updateCoordinate(I.currentVertexPosition,R.lngLat.lng,R.lngLat.lat),I.direction==="forward"?(I.currentVertexPosition++,I.line.updateCoordinate(I.currentVertexPosition,R.lngLat.lng,R.lngLat.lat)):I.line.addCoordinate(0,R.lngLat.lng,R.lngLat.lat)},clickOnVertex:function(I){return this.changeMode(X.SIMPLE_SELECT,{featureIds:[I.line.id]})},onMouseMove:function(I,R){I.line.updateCoordinate(I.currentVertexPosition,R.lngLat.lng,R.lngLat.lat),ar(R)&&this.updateUIClasses({mouse:B.POINTER})}};Lr.onTap=Lr.onClick=function(I,R){if(ar(R))return this.clickOnVertex(I,R);this.clickAnywhere(I,R)},Lr.onKeyUp=function(I,R){va(R)?this.changeMode(X.SIMPLE_SELECT,{featureIds:[I.line.id]}):Xo(R)&&(this.deleteFeature([I.line.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT))},Lr.onStop=function(I){uo.enable(this),this.activateUIButton(),this.getFeature(I.line.id)!==void 0&&(I.line.removeCoordinate(""+I.currentVertexPosition),I.line.isValid()?this.map.fire(pt.CREATE,{features:[I.line.toGeoJSON()]}):(this.deleteFeature([I.line.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT,{},{silent:!0})))},Lr.onTrash=function(I){this.deleteFeature([I.line.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT)},Lr.toDisplayFeatures=function(I,R,Y){var vt=R.properties.id===I.line.id;if(R.properties.active=vt?ft.ACTIVE:ft.INACTIVE,!vt)return Y(R);R.geometry.coordinates.length<2||(R.properties.meta=nt.FEATURE,Y(Ys(I.line.id,R.geometry.coordinates[I.direction==="forward"?R.geometry.coordinates.length-2:1],""+(I.direction==="forward"?R.geometry.coordinates.length-2:1),!1)),Y(R))};var Vo={simple_select:Wn,direct_select:Yn,draw_point:ai,draw_polygon:ls,draw_line_string:Lr},Uc={defaultMode:X.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:en,modes:Vo,controls:{},userProperties:!1},wu={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Dr={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Cu(I,R){return I.map(function(Y){return Y.source?Y:we(Y,{id:Y.id+"."+R,source:R==="hot"?P.HOT:P.COLD})})}var bo={exports:{}};(function(I,R){var Y="__lodash_hash_undefined__",vt=9007199254740991,kt="[object Arguments]",Dt="[object Array]",Gt="[object Boolean]",Pe="[object Date]",Ve="[object Error]",nn="[object Function]",an="[object Map]",qe="[object Number]",ti="[object Object]",Nr="[object Promise]",si="[object RegExp]",Cr="[object Set]",xe="[object String]",wn="[object Symbol]",sr="[object WeakMap]",no="[object ArrayBuffer]",Ji="[object DataView]",Ms=/^\[object .+?Constructor\]$/,bl=/^(?:0|[1-9]\d*)$/,ir={};ir["[object Float32Array]"]=ir["[object Float64Array]"]=ir["[object Int8Array]"]=ir["[object Int16Array]"]=ir["[object Int32Array]"]=ir["[object Uint8Array]"]=ir["[object Uint8ClampedArray]"]=ir["[object Uint16Array]"]=ir["[object Uint32Array]"]=!0,ir[kt]=ir[Dt]=ir[no]=ir[Gt]=ir[Ji]=ir[Pe]=ir[Ve]=ir[nn]=ir[an]=ir[qe]=ir[ti]=ir[si]=ir[Cr]=ir[xe]=ir[sr]=!1;var Ks=typeof bs=="object"&&bs&&bs.Object===Object&&bs,Al=typeof self=="object"&&self&&self.Object===Object&&self,Hi=Ks||Al||Function("return this")(),Mi=R&&!R.nodeType&&R,$r=Mi&&I&&!I.nodeType&&I,Jl=$r&&$r.exports===Mi,jc=Jl&&Ks.process,vf=function(){try{return jc&&jc.binding&&jc.binding("util")}catch{}}(),yf=vf&&vf.isTypedArray;function Ah(Wt,ce){for(var rn=-1,zn=Wt==null?0:Wt.length;++rn<zn;)if(ce(Wt[rn],rn,Wt))return!0;return!1}function Hc(Wt){var ce=-1,rn=Array(Wt.size);return Wt.forEach(function(zn,yr){rn[++ce]=[yr,zn]}),rn}function wh(Wt){var ce=-1,rn=Array(Wt.size);return Wt.forEach(function(zn){rn[++ce]=zn}),rn}var co,lc,Qs,_f=Array.prototype,tu=Function.prototype,Ao=Object.prototype,uc=Hi["__core-js_shared__"],ho=tu.toString,za=Ao.hasOwnProperty,Es=(co=/[^.]+$/.exec(uc&&uc.keys&&uc.keys.IE_PROTO||""))?"Symbol(src)_1."+co:"",Ss=Ao.toString,wl=RegExp("^"+ho.call(za).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fo=Jl?Hi.Buffer:void 0,us=Hi.Symbol,wo=Hi.Uint8Array,Cl=Ao.propertyIsEnumerable,Js=_f.splice,oa=us?us.toStringTag:void 0,Iu=Object.getOwnPropertySymbols,tr=fo?fo.isBuffer:void 0,Vr=(lc=Object.keys,Qs=Object,function(Wt){return lc(Qs(Wt))}),Ba=Ts(Hi,"DataView"),Il=Ts(Hi,"Map"),Gc=Ts(Hi,"Promise"),Mu=Ts(Hi,"Set"),qc=Ts(Hi,"WeakMap"),cs=Ts(Object,"create"),Ml=jo(Ba),El=jo(Il),cc=jo(Gc),eu=jo(Mu),Ch=jo(qc),tl=us?us.prototype:void 0,hc=tl?tl.valueOf:void 0;function aa(Wt){var ce=-1,rn=Wt==null?0:Wt.length;for(this.clear();++ce<rn;){var zn=Wt[ce];this.set(zn[0],zn[1])}}function Uo(Wt){var ce=-1,rn=Wt==null?0:Wt.length;for(this.clear();++ce<rn;){var zn=Wt[ce];this.set(zn[0],zn[1])}}function el(Wt){var ce=-1,rn=Wt==null?0:Wt.length;for(this.clear();++ce<rn;){var zn=Wt[ce];this.set(zn[0],zn[1])}}function Sl(Wt){var ce=-1,rn=Wt==null?0:Wt.length;for(this.__data__=new el;++ce<rn;)this.add(Wt[ce])}function zi(Wt){var ce=this.__data__=new Uo(Wt);this.size=ce.size}function Eu(Wt,ce){var rn=Pu(Wt),zn=!rn&&$c(Wt),yr=!rn&&!zn&&Ko(Wt),Bi=!rn&&!zn&&!yr&&iu(Wt),fr=rn||zn||yr||Bi,Nt=fr?function(Ae,jn){for(var li=-1,Ei=Array(Ae);++li<Ae;)Ei[li]=jn(li);return Ei}(Wt.length,String):[],he=Nt.length;for(var Jt in Wt)!za.call(Wt,Jt)||fr&&(Jt=="length"||yr&&(Jt=="offset"||Jt=="parent")||Bi&&(Jt=="buffer"||Jt=="byteLength"||Jt=="byteOffset")||fs(Jt,he))||Nt.push(Jt);return Nt}function Wc(Wt,ce){for(var rn=Wt.length;rn--;)if(Ih(Wt[rn][0],ce))return rn;return-1}function hs(Wt){return Wt==null?Wt===void 0?"[object Undefined]":"[object Null]":oa&&oa in Object(Wt)?function(ce){var rn=za.call(ce,oa),zn=ce[oa];try{ce[oa]=void 0;var yr=!0}catch{}var Bi=Ss.call(ce);return yr&&(rn?ce[oa]=zn:delete ce[oa]),Bi}(Wt):function(ce){return Ss.call(ce)}(Wt)}function sa(Wt){return kl(Wt)&&hs(Wt)==kt}function Zc(Wt,ce,rn,zn,yr){return Wt===ce||(Wt==null||ce==null||!kl(Wt)&&!kl(ce)?Wt!=Wt&&ce!=ce:function(Bi,fr,Nt,he,Jt,Ae){var jn=Pu(Bi),li=Pu(fr),Ei=jn?Dt:nl(Bi),mn=li?Dt:nl(fr),Gi=(Ei=Ei==kt?ti:Ei)==ti,Qo=(mn=mn==kt?ti:mn)==ti,io=Ei==mn;if(io&&Ko(Bi)){if(!Ko(fr))return!1;jn=!0,Gi=!1}if(io&&!Gi)return Ae||(Ae=new zi),jn||iu(Bi)?Tl(Bi,fr,Nt,he,Jt,Ae):function(Yi,Ln,Ya,pr,ks,Fa,lr){switch(Ya){case Ji:if(Yi.byteLength!=Ln.byteLength||Yi.byteOffset!=Ln.byteOffset)return!1;Yi=Yi.buffer,Ln=Ln.buffer;case no:return!(Yi.byteLength!=Ln.byteLength||!Fa(new wo(Yi),new wo(Ln)));case Gt:case Pe:case qe:return Ih(+Yi,+Ln);case Ve:return Yi.name==Ln.name&&Yi.message==Ln.message;case si:case xe:return Yi==Ln+"";case an:var Ye=Hc;case Cr:var ro=1&pr;if(Ye||(Ye=wh),Yi.size!=Ln.size&&!ro)return!1;var ba=lr.get(Yi);if(ba)return ba==Ln;pr|=2,lr.set(Yi,Ln);var Aa=Tl(Ye(Yi),Ye(Ln),pr,ks,Fa,lr);return lr.delete(Yi),Aa;case wn:if(hc)return hc.call(Yi)==hc.call(Ln)}return!1}(Bi,fr,Ei,Nt,he,Jt,Ae);if(!(1&Nt)){var Oa=Gi&&za.call(Bi,"__wrapped__"),Lu=Qo&&za.call(fr,"__wrapped__");if(Oa||Lu){var Du=Oa?Bi.value():Bi,Xc=Lu?fr.value():fr;return Ae||(Ae=new zi),Jt(Du,Xc,Nt,he,Ae)}}return io?(Ae||(Ae=new zi),function(Yi,Ln,Ya,pr,ks,Fa){var lr=1&Ya,Ye=Tu(Yi),ro=Ye.length,ba=Tu(Ln).length;if(ro!=ba&&!lr)return!1;for(var Aa=ro;Aa--;){var Lo=Ye[Aa];if(!(lr?Lo in Ln:za.call(Ln,Lo)))return!1}var Do=Fa.get(Yi);if(Do&&Fa.get(Ln))return Do==Ln;var ru=!0;Fa.set(Yi,Ln),Fa.set(Ln,Yi);for(var Be=lr;++Aa<ro;){var rl=Yi[Lo=Ye[Aa]],Pl=Ln[Lo];if(pr)var Ll=lr?pr(Pl,rl,Lo,Ln,Yi,Fa):pr(rl,Pl,Lo,Yi,Ln,Fa);if(!(Ll===void 0?rl===Pl||ks(rl,Pl,Ya,pr,Fa):Ll)){ru=!1;break}Be||(Be=Lo=="constructor")}if(ru&&!Be){var oo=Yi.constructor,po=Ln.constructor;oo==po||!("constructor"in Yi)||!("constructor"in Ln)||typeof oo=="function"&&oo instanceof oo&&typeof po=="function"&&po instanceof po||(ru=!1)}return Fa.delete(Yi),Fa.delete(Ln),ru}(Bi,fr,Nt,he,Jt,Ae)):!1}(Wt,ce,rn,zn,Zc,yr))}function Su(Wt){return!(!Yc(Wt)||function(ce){return!!Es&&Es in ce}(Wt))&&(il(Wt)?wl:Ms).test(jo(Wt))}function fc(Wt){if(rn=(ce=Wt)&&ce.constructor,zn=typeof rn=="function"&&rn.prototype||Ao,ce!==zn)return Vr(Wt);var ce,rn,zn,yr=[];for(var Bi in Object(Wt))za.call(Wt,Bi)&&Bi!="constructor"&&yr.push(Bi);return yr}function Tl(Wt,ce,rn,zn,yr,Bi){var fr=1&rn,Nt=Wt.length,he=ce.length;if(Nt!=he&&!(fr&&he>Nt))return!1;var Jt=Bi.get(Wt);if(Jt&&Bi.get(ce))return Jt==ce;var Ae=-1,jn=!0,li=2&rn?new Sl:void 0;for(Bi.set(Wt,ce),Bi.set(ce,Wt);++Ae<Nt;){var Ei=Wt[Ae],mn=ce[Ae];if(zn)var Gi=fr?zn(mn,Ei,Ae,ce,Wt,Bi):zn(Ei,mn,Ae,Wt,ce,Bi);if(Gi!==void 0){if(Gi)continue;jn=!1;break}if(li){if(!Ah(ce,function(Qo,io){if(Oa=io,!li.has(Oa)&&(Ei===Qo||yr(Ei,Qo,rn,zn,Bi)))return li.push(io);var Oa})){jn=!1;break}}else if(Ei!==mn&&!yr(Ei,mn,rn,zn,Bi)){jn=!1;break}}return Bi.delete(Wt),Bi.delete(ce),jn}function Tu(Wt){return function(ce,rn,zn){var yr=rn(ce);return Pu(ce)?yr:function(Bi,fr){for(var Nt=-1,he=fr.length,Jt=Bi.length;++Nt<he;)Bi[Jt+Nt]=fr[Nt];return Bi}(yr,zn(ce))}(Wt,xa,ku)}function nu(Wt,ce){var rn,zn,yr=Wt.__data__;return((zn=typeof(rn=ce))=="string"||zn=="number"||zn=="symbol"||zn=="boolean"?rn!=="__proto__":rn===null)?yr[typeof ce=="string"?"string":"hash"]:yr.map}function Ts(Wt,ce){var rn=function(zn,yr){return zn==null?void 0:zn[yr]}(Wt,ce);return Su(rn)?rn:void 0}aa.prototype.clear=function(){this.__data__=cs?cs(null):{},this.size=0},aa.prototype.delete=function(Wt){var ce=this.has(Wt)&&delete this.__data__[Wt];return this.size-=ce?1:0,ce},aa.prototype.get=function(Wt){var ce=this.__data__;if(cs){var rn=ce[Wt];return rn===Y?void 0:rn}return za.call(ce,Wt)?ce[Wt]:void 0},aa.prototype.has=function(Wt){var ce=this.__data__;return cs?ce[Wt]!==void 0:za.call(ce,Wt)},aa.prototype.set=function(Wt,ce){var rn=this.__data__;return this.size+=this.has(Wt)?0:1,rn[Wt]=cs&&ce===void 0?Y:ce,this},Uo.prototype.clear=function(){this.__data__=[],this.size=0},Uo.prototype.delete=function(Wt){var ce=this.__data__,rn=Wc(ce,Wt);return!(rn<0)&&(rn==ce.length-1?ce.pop():Js.call(ce,rn,1),--this.size,!0)},Uo.prototype.get=function(Wt){var ce=this.__data__,rn=Wc(ce,Wt);return rn<0?void 0:ce[rn][1]},Uo.prototype.has=function(Wt){return Wc(this.__data__,Wt)>-1},Uo.prototype.set=function(Wt,ce){var rn=this.__data__,zn=Wc(rn,Wt);return zn<0?(++this.size,rn.push([Wt,ce])):rn[zn][1]=ce,this},el.prototype.clear=function(){this.size=0,this.__data__={hash:new aa,map:new(Il||Uo),string:new aa}},el.prototype.delete=function(Wt){var ce=nu(this,Wt).delete(Wt);return this.size-=ce?1:0,ce},el.prototype.get=function(Wt){return nu(this,Wt).get(Wt)},el.prototype.has=function(Wt){return nu(this,Wt).has(Wt)},el.prototype.set=function(Wt,ce){var rn=nu(this,Wt),zn=rn.size;return rn.set(Wt,ce),this.size+=rn.size==zn?0:1,this},Sl.prototype.add=Sl.prototype.push=function(Wt){return this.__data__.set(Wt,Y),this},Sl.prototype.has=function(Wt){return this.__data__.has(Wt)},zi.prototype.clear=function(){this.__data__=new Uo,this.size=0},zi.prototype.delete=function(Wt){var ce=this.__data__,rn=ce.delete(Wt);return this.size=ce.size,rn},zi.prototype.get=function(Wt){return this.__data__.get(Wt)},zi.prototype.has=function(Wt){return this.__data__.has(Wt)},zi.prototype.set=function(Wt,ce){var rn=this.__data__;if(rn instanceof Uo){var zn=rn.__data__;if(!Il||zn.length<199)return zn.push([Wt,ce]),this.size=++rn.size,this;rn=this.__data__=new el(zn)}return rn.set(Wt,ce),this.size=rn.size,this};var ku=Iu?function(Wt){return Wt==null?[]:(Wt=Object(Wt),function(ce,rn){for(var zn=-1,yr=ce==null?0:ce.length,Bi=0,fr=[];++zn<yr;){var Nt=ce[zn];rn(Nt,zn,ce)&&(fr[Bi++]=Nt)}return fr}(Iu(Wt),function(ce){return Cl.call(Wt,ce)}))}:function(){return[]},nl=hs;function fs(Wt,ce){return!!(ce=ce??vt)&&(typeof Wt=="number"||bl.test(Wt))&&Wt>-1&&Wt%1==0&&Wt<ce}function jo(Wt){if(Wt!=null){try{return ho.call(Wt)}catch{}try{return Wt+""}catch{}}return""}function Ih(Wt,ce){return Wt===ce||Wt!=Wt&&ce!=ce}(Ba&&nl(new Ba(new ArrayBuffer(1)))!=Ji||Il&&nl(new Il)!=an||Gc&&nl(Gc.resolve())!=Nr||Mu&&nl(new Mu)!=Cr||qc&&nl(new qc)!=sr)&&(nl=function(Wt){var ce=hs(Wt),rn=ce==ti?Wt.constructor:void 0,zn=rn?jo(rn):"";if(zn)switch(zn){case Ml:return Ji;case El:return an;case cc:return Nr;case eu:return Cr;case Ch:return sr}return ce});var $c=sa(function(){return arguments}())?sa:function(Wt){return kl(Wt)&&za.call(Wt,"callee")&&!Cl.call(Wt,"callee")},Pu=Array.isArray,Ko=tr||function(){return!1};function il(Wt){if(!Yc(Wt))return!1;var ce=hs(Wt);return ce==nn||ce=="[object GeneratorFunction]"||ce=="[object AsyncFunction]"||ce=="[object Proxy]"}function pc(Wt){return typeof Wt=="number"&&Wt>-1&&Wt%1==0&&Wt<=vt}function Yc(Wt){var ce=typeof Wt;return Wt!=null&&(ce=="object"||ce=="function")}function kl(Wt){return Wt!=null&&typeof Wt=="object"}var iu=yf?function(Wt){return function(ce){return Wt(ce)}}(yf):function(Wt){return kl(Wt)&&pc(Wt.length)&&!!ir[hs(Wt)]};function xa(Wt){return(ce=Wt)!=null&&pc(ce.length)&&!il(ce)?Eu(Wt):fc(Wt);var ce}I.exports=function(Wt,ce){return Zc(Wt,ce)}})(bo,bo.exports);var Zr=a(bo.exports);function ya(I,R){return I.length===R.length&&JSON.stringify(I.map(function(Y){return Y}).sort())===JSON.stringify(R.map(function(Y){return Y}).sort())}var vr={Polygon:wi,LineString:oi,Point:ui,MultiPolygon:me,MultiLineString:me,MultiPoint:me},$a=Object.freeze({__proto__:null,CommonSelectors:Da,constrainFeatureMovement:vi,createMidPoint:xl,createSupplementaryPoints:Ra,createVertex:Ys,doubleClickZoom:uo,euclideanDistance:Ge,featuresAt:de,getFeatureAtAndSetCursors:_e,isClick:je,isEventAtCoordinates:Po,isTap:Pi,mapEventToBoundingBox:Bt,ModeHandler:i,moveFeatures:ko,sortFeatures:Qt,stringSetsAreEqual:ya,StringSet:Ft,theme:en,toDenseArray:wt}),_a=function(I,R){var Y={options:I=function(kt){kt===void 0&&(kt={});var Dt=we(kt);return kt.controls||(Dt.controls={}),kt.displayControlsDefault===!1?Dt.controls=we(Dr,kt.controls):Dt.controls=we(wu,kt.controls),(Dt=we(Uc,Dt)).styles=Cu(Dt.styles,"cold").concat(Cu(Dt.styles,"hot")),Dt}(I)};R=function(kt,Dt){return Dt.modes=X,Dt.getFeatureIdsAt=function(Gt){return de.click({point:Gt},null,kt).map(function(Pe){return Pe.properties.id})},Dt.getSelectedIds=function(){return kt.store.getSelectedIds()},Dt.getSelected=function(){return{type:j.FEATURE_COLLECTION,features:kt.store.getSelectedIds().map(function(Gt){return kt.store.get(Gt)}).map(function(Gt){return Gt.toGeoJSON()})}},Dt.getSelectedPoints=function(){return{type:j.FEATURE_COLLECTION,features:kt.store.getSelectedCoordinates().map(function(Gt){return{type:j.FEATURE,properties:{},geometry:{type:j.POINT,coordinates:Gt.coordinates}}})}},Dt.set=function(Gt){if(Gt.type===void 0||Gt.type!==j.FEATURE_COLLECTION||!Array.isArray(Gt.features))throw new Error("Invalid FeatureCollection");var Pe=kt.store.createRenderBatch(),Ve=kt.store.getAllIds().slice(),nn=Dt.add(Gt),an=new Ft(nn);return(Ve=Ve.filter(function(qe){return!an.has(qe)})).length&&Dt.delete(Ve),Pe(),nn},Dt.add=function(Gt){var Pe=JSON.parse(JSON.stringify(U(Gt))).features.map(function(Ve){if(Ve.id=Ve.id||un(),Ve.geometry===null)throw new Error("Invalid geometry: null");if(kt.store.get(Ve.id)===void 0||kt.store.get(Ve.id).type!==Ve.geometry.type){var nn=vr[Ve.geometry.type];if(nn===void 0)throw new Error("Invalid geometry type: "+Ve.geometry.type+".");var an=new nn(kt,Ve);kt.store.add(an)}else{var qe=kt.store.get(Ve.id);qe.properties=Ve.properties,Zr(qe.properties,Ve.properties)||kt.store.featureChanged(qe.id),Zr(qe.getCoordinates(),Ve.geometry.coordinates)||qe.incomingCoords(Ve.geometry.coordinates)}return Ve.id});return kt.store.render(),Pe},Dt.get=function(Gt){var Pe=kt.store.get(Gt);if(Pe)return Pe.toGeoJSON()},Dt.getAll=function(){return{type:j.FEATURE_COLLECTION,features:kt.store.getAll().map(function(Gt){return Gt.toGeoJSON()})}},Dt.delete=function(Gt){return kt.store.delete(Gt,{silent:!0}),Dt.getMode()!==X.DIRECT_SELECT||kt.store.getSelectedIds().length?kt.store.render():kt.events.changeMode(X.SIMPLE_SELECT,void 0,{silent:!0}),Dt},Dt.deleteAll=function(){return kt.store.delete(kt.store.getAllIds(),{silent:!0}),Dt.getMode()===X.DIRECT_SELECT?kt.events.changeMode(X.SIMPLE_SELECT,void 0,{silent:!0}):kt.store.render(),Dt},Dt.changeMode=function(Gt,Pe){return Pe===void 0&&(Pe={}),Gt===X.SIMPLE_SELECT&&Dt.getMode()===X.SIMPLE_SELECT?(ya(Pe.featureIds||[],kt.store.getSelectedIds())||(kt.store.setSelected(Pe.featureIds,{silent:!0}),kt.store.render()),Dt):(Gt===X.DIRECT_SELECT&&Dt.getMode()===X.DIRECT_SELECT&&Pe.featureId===kt.store.getSelectedIds()[0]||kt.events.changeMode(Gt,Pe,{silent:!0}),Dt)},Dt.getMode=function(){return kt.events.getMode()},Dt.trash=function(){return kt.events.trash({silent:!0}),Dt},Dt.combineFeatures=function(){return kt.events.combineFeatures({silent:!0}),Dt},Dt.uncombineFeatures=function(){return kt.events.uncombineFeatures({silent:!0}),Dt},Dt.setFeatureProperty=function(Gt,Pe,Ve){return kt.store.setFeatureProperty(Gt,Pe,Ve),Dt},Dt}(Y,R),Y.api=R;var vt=Te(Y);return R.onAdd=vt.onAdd,R.onRemove=vt.onRemove,R.types=G,R.options=I,R};function Ql(I){_a(I,this)}return Ql.modes=Vo,Ql.constants=Mt,Ql.lib=$a,Ql})})(gE);var CU=gE.exports;const IU=z_(CU),MU={key:0,class:"d-flex button-custom-container"},EU={key:1,class:"d-flex button-custom-container"},SU={class:"context-menu"},TU=["onClick"],kU=["innerHTML"],PU=di({__name:"DrawControl",props:{...Wa,drawOptions:Object},setup(t){const e=t,i=e.drawOptions,{mapId:a,moduleContainerProps:u}=So(e,Ot=>{B("select"),Ot.on("draw.create",_),Ot.on("draw.update",C),Ot.on("draw.delete",S),Ot.addControl(y)},Ot=>{Ot.off("draw.create",_),Ot.off("draw.update",C),Ot.off("draw.delete",S),Ot.removeControl(y)}),{add:f,remove:o}=sb(a.value,new hA().setHandler(Mt));let y=new IU({displayControlsDefault:!1,boxSelect:!1});function _(Ot){for(const de of Ot.features)Ax(a.value,"added",de);wx(a.value,G.value),B("select")}function C(Ot){for(const de of Ot.features)Ax(a.value,"updated",de);wx(a.value,G.value),B("select")}function S(Ot){for(const de of Ot.features)Ax(a.value,"deleted",de);wx(a.value,G.value),B("select")}aU(a.value,y);const k={add:xp,delete:qb,update:n4,save:Nk,discard:Nm,close:Nm,draw:Hk},P=Ke("");function B(Ot){switch(o(),P.value=Ot,Ot){case"select":case"delete":f();break}}const G=De(()=>fU(a.value));function j(Ot){Q2(a.value,G.value),J2(a.value,G.value,Ot)}const X=De(()=>cU(a.value)),pt=De(()=>pU(a.value)),J=De(()=>hU(a.value)),nt=De(()=>X.value);function ft(){fE(a.value,G.value)}function Lt(){lU(a.value)}function xt(){sU(a.value),o()}async function Mt(Ot){const de=dU(a.value),An=mU(a.value),_e=await(de.getFeatures&&de.getFeatures([Ot.lngLat.lng,Ot.lngLat.lat]))||[];switch(P.value){case"select":{const Ge=An==null?void 0:An.add({type:"FeatureCollection",features:_e});Ge&&Ge.length>0&&(Q2(a.value,G.value),J2(a.value,G.value,"direct_select",void 0,{featureId:Ge[0]}));break}case"delete":{An==null||An.delete(An.getSelectedIds()),de.deleteFeatures&&de.deleteFeatures(_e),de.reset&&de.reset();break}}}const Ht=Ke(),jt=De(()=>J.value.map(Ot=>typeof Ot=="string"?{id:Ot,name:DU[Ot]||Ot}:Ot));function Qt(){Ht.value&&Ht.value.close()}function Bt(Ot){if(J.value.length>1){Ht.value&&Ht.value.open(Ot);return}B("create"),j(J.value[0])}function Ft(){i&&dE(a.value,i)}return(Ot,de)=>(ut(),Se(W(La),Ga(Pa(W(u))),{btn:Xt(()=>[pt.value?(ut(),Yt("div",MU,[nt.value?(ut(),Se(W(Vm),{key:0,row:""},{default:Xt(()=>[Pt(W(Ar),{onClick:de[0]||(de[0]=An=>Lt())},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:k.discard},null,8,["path"])]),_:1}),Pt(W(Ar),{onClick:de[1]||(de[1]=An=>ft())},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:k.save},null,8,["path"])]),_:1})]),_:1})):(ut(),Se(W(Vm),{key:1,row:""},{default:Xt(()=>[Pt(W(Ar),{onClick:de[2]||(de[2]=An=>xt())},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:k.close},null,8,["path"])]),_:1}),Pt(W(Ar),{active:P.value==="create",onClick:Bt},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:k.add},null,8,["path"])]),_:1},8,["active"]),Pt(W(Ar),{active:P.value==="select",onClick:de[3]||(de[3]=An=>B("select"))},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:k.update},null,8,["path"])]),_:1},8,["active"]),Pt(W(Ar),{active:P.value==="delete",onClick:de[4]||(de[4]=An=>B("delete"))},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:k.delete},null,8,["path"])]),_:1},8,["active"])]),_:1}))])):W(i)?(ut(),Yt("div",EU,[Pt(W(Ar),null,{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:k.draw,onClick:Ft},null,8,["path"])]),_:1})])):sn("",!0)]),default:Xt(()=>[Pt(W(mE),{ref_key:"contextMenuRef",ref:Ht},{default:Xt(()=>[At("ul",SU,[(ut(!0),Yt(Ai,null,Fo(jt.value,(An,_e)=>(ut(),Yt("li",{key:_e,onClick:so(Ge=>{B("create"),j(An.id),Qt()},["stop"]),class:"context-menu__item"},[At("span",{innerHTML:An.name},null,8,kU)],8,TU))),128))])]),_:1},512)]),_:1},16))}}),LU=Fn(PU,[["__scopeId","data-v-7299412e"]]),Rm={POINT:"draw_point",LINE_STRING:"draw_line_string",POLYGON:"draw_polygon"},DU={[Rm.POINT]:"draw point",[Rm.LINE_STRING]:"draw line string",[Rm.POLYGON]:"draw polygon"};function ml(t){return t.parent}function RU(t,e,i){t.setLayerZoomRange(e.id,i["min-zoom"]||e["min-zoom"]||0,i["max-zoom"]||e["max-zoom"]||24);for(const a in i.paint)i.paint[a]!==e.paint[a]&&t.setPaintProperty(e.id,a,i.paint[a]);for(const a in i.layout)i.layout[a]!==e.layout[a]&&t.setLayoutProperty(e.id,a,i.layout[a])}const zU=di({__name:"toggle-show",props:{item:{}},setup(t){const e=t,i={show:Zb,hide:$b},a=De(()=>e.item.show);return(u,f)=>a.value?(ut(),Se(W(Rn),{key:0,size:"14",type:"mdi",path:i.show},null,8,["path"])):(ut(),Se(W(Rn),{key:1,size:"14",type:"mdi",path:i.hide},null,8,["path"]))}});class BU extends df{constructor(e={actions:[]}){super(e),this.key="action",this.setBuild((i,a)=>new OU(i,a))}addActions(e){return this.option.actions||(this.option.actions=[]),this.option.actions.push(...e),this}addAction(e){this.option.actions||(this.option.actions=[]);const i=this.option.actions.findIndex(a=>a.id===e.id);return i>=0&&this.option.actions.splice(i,1),e&&this.option.actions.push(e),this}}class OU extends Ap{constructor(e,i={actions:[]}){super(),this.menu_cache={},this.layer=e,this.option=i,this.resetCacheMenu()}get menus(){return this.option.actions.reduce((e,i)=>(i.menu&&(i.menu.type=="item"&&(i.menu.id=i.id),e.push(i.menu)),e),[])}call(e,i){const a=this.menu_cache[e];this.parent&&a.menu.type=="item"&&(a.component?this.layer.getView("component").setFromAction(a):a.menu.click&&a.menu.click(this.parent,i))}get(e){return this.menu_cache[e]}addActions(e){return this.option.actions.push(...e),this.resetCacheMenu(),this}addAction(e){if(e){const i=this.option.actions.findIndex(a=>a.id===e.id);i>=0&&this.option.actions.splice(i,1),this.option.actions.push(e)}return this.resetCacheMenu(),this}updateAction(e){const i=this.option.actions.findIndex(a=>a.id===e.id);return i>=0&&(this.option.actions[i]=e,this.resetCacheMenu()),this.parent?this:this}resetCacheMenu(){this.menu_cache=this.option.actions.reduce((e,i)=>(e[i.id]=i,e),{})}}function PA(t={}){return{id:"to-bound",type:"to-bound",menu:{location:"extra",type:"item",name:"Fly to",icon:Nv,...t}}}function LA(t={}){return{id:"toggle-show",type:"toggle-show",menu:{location:"extra",type:"item",name:"Fly to",icon:()=>zU,...t}}}const FU={style:{"min-width":"55px"}},NU={class:"btn-copy"},VU={__name:"table-td-copy",props:{value:{}},setup(t){const{copy:e}=$9({}),i={copy:Fk};return(a,u)=>(ut(),Yt("tr",null,[Hn(a.$slots,"default",{},void 0,!0),At("td",FU,[At("div",NU,[Pt(W(zc),{onClick:u[0]||(u[0]=f=>W(e)(t.value))},{default:Xt(()=>[Pt(W(Rn),{path:i.copy,size:"14",type:"mdi"},null,8,["path"])]),_:1})])])]))}},UU=Fn(VU,[["__scopeId","data-v-0595a025"]]),jU={style:{"min-width":"60px"}},HU={key:1,colspan:"2"},GU={__name:"table-td-layer",props:{label:String,layer:{},field:{}},setup(t){const e=t,i=ml(e.layer),a=De(()=>e.field.value instanceof Function?e.field.value(i):i[e.field.value]);return(u,f)=>(ut(),Se(UU,{value:a.value},{default:Xt(()=>[t.field.inline?(ut(),Yt("td",HU,[Pt(W(jM),{readonly:"",rows:"10",modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=o=>a.value=o),label:t.label},null,8,["modelValue","label"])])):(ut(),Yt(Ai,{key:0},[At("td",jU,vn(t.label),1),At("td",null,vn(a.value),1)],64))]),_:1},8,["value"]))}},qU=Fn(GU,[["__scopeId","data-v-0dc216ce"]]),WU={class:"table-show-info"},ZU={name:"detail-layer-info"},$U=Object.assign(ZU,{props:{item:{},option:{default:()=>({fields:[]})}},emits:["close"],setup(t,{emit:e}){const{mapId:i}=So(),{trans:a}=ga(i.value),u=e;function f(o){o||u("close")}return(o,y)=>(ut(),Se(W(La),Ga(Pa(o.$attrs)),{draggable:Xt(_=>[Pt(W(mf),er(_,{show:"","onUpdate:show":f,width:400}),{title:Xt(()=>[xo(vn(W(a)("map.layer-control.info.title")),1)]),default:Xt(()=>[At("div",WU,[At("table",null,[At("tbody",null,[(ut(!0),Yt(Ai,null,Fo(t.option.fields,(C,S)=>(ut(),Se(qU,{field:C,label:C.trans?W(a)(C.trans):C.text,layer:t.item,key:S},null,8,["field","label","layer"]))),128))])])])]),_:2},1040)]),_:1},16))}}),YU=Fn($U,[["__scopeId","data-v-f42be114"]]);class XU extends df{constructor(e={}){super(e)}setFields(e){return this.option.fields=e,this}setForLayer(e){return e.getView("action").addAction({id:"show_info",component:()=>YU,menu:{location:"menu",name:"info",type:"item",icon:Yk},option:this.option}),this}}const KU={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value}}},QU={class:"legend-item"},JU={class:"legend-text"},t7={class:"legend-value"};function e7(t,e,i,a,u,f){return ut(),Yt("div",QU,[At("div",JU,vn(f.item.text)+":",1),At("div",t7,vn(f.item.value),1)])}const eC=Fn(KU,[["render",e7],["__scopeId","data-v-232f09ff"]]);class n7 extends df{constructor({fields:e}={fields:[]}){super({fields:e}),this.setBuild((i,a)=>new i7(a))}addField(e){return this.option.fields||(this.option.fields=[]),this.option.fields.push(this.formatField(e)),this}formatField(e){return{component:Pb(e.component||eC),...e}}setFields(e=[]){return this.option.fields=e.map(i=>this.formatField({component:eC,...i})),this}}let i7=class extends Ap{constructor(e){super(),this.option=e}get config(){return this.option}};class r7 extends df{constructor(e={}){super(e,{show:!0,opacity:1}),this.setBuild(o7)}disableDelete(){return this.option.disable_delete=!0,this}disableOpacity(){return this.option.disabled_opacity=!0,this}setColor(e){return this.option.color=e,this}setGroup(e){return this.option.group=e,this}}function o7(t,e={}){const i=e.show!=null?e.show:!0,a=e.opacity!=null?e.opacity:1;let u;const f={setParent(o){u=o},get parent(){return u},index:0,id:t.id||lf(),name:t.name,show:i,opacity:a,selected:!1,get metadata(){return t.metadata},color:e.color||"#38d4ff",config:{disable_delete:!1,disabled_opacity:!1,component:"layer-item"},multi:!1};return e.group&&(f.group=e.group),e.disable_delete&&(f.config.disable_delete=e.disable_delete),e.disabled_opacity&&(f.config.disabled_opacity=e.disabled_opacity),f}class vE extends Ap{constructor(){super(),this.bounds=[-180,-85.051129,180,85.051129]}getAll(){}setData(e){}setBounds(e){this.bounds=e,this.parent&&(this.parent.metadata.bounds=e)}addToMap(e){this.id&&!e.getSource(this.id)&&e.addSource(this.id,this.getMapboxSource())}removeFromMap(e){this.id&&e.getSource(this.id)&&e.removeSource(this.id)}getMapboxSource(){return{type:"geojson"}}}class a7 extends df{constructor(e={}){super(e),this.setBuild(()=>new s7(this.geojson,this.option))}setData(e){return this.geojson=e,this}}class s7 extends vE{constructor(e,i={}){super(),this.field_id="id",this.setData(e),this.option=i}getMapboxSource(){return{type:"geojson",data:this.getAll()}}updateForMap(e){const i=e.getSource(this.id);i&&i.setData(this.geojson||{type:"FeatureCollection",features:[]})}setData(e){if(!e)return;typeof e=="string"&&(e=JSON.parse(e));let i;e.type==="FeatureCollection"?i=e:e.type==="Feature"?i={type:"FeatureCollection",features:[e]}:i={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]},this.geojson=i,this.setBounds(Hm(e))}getAll(){return this.geojson}}class l7 extends vE{constructor(e={}){super(),this.option=e,this.option.bounds&&this.setBounds(this.option.bounds)}updateForMap(){}getMapboxSource(){return{type:"raster",...this.option,bounds:this.bounds||[-180,-85.051129,180,85.051129]}}}class yE extends df{constructor(e={}){super(e),this.setBuild(()=>new l7(this.option))}setTiles(e){return this.option.tiles=e,this}setMaxzoom(e){return this.option.maxzoom=e,this}setMinzoom(e){return this.option.minzoom=e,this}setScheme(e){return this.option.scheme=e,this}setTileSize(e){return this.option.tileSize=e,this}setBounds(e){return this.option.bounds=e,this}setUrl(e){return this.option.url=e,this}}class _E{build(){return{type:"raster"}}}class c_{constructor(){this.type="point"}setColor(e){return this.color=e,this}setStyleType(e){return this.type=e,this}build(){return u7(this.type,this.color)}}const u7=(t,e)=>{switch(t){case"point":return{layout:{visibility:"visible"},type:"circle",paint:{"circle-color":e||z0(),"circle-radius":6}};case"line":return{layout:{visibility:"visible"},type:"line",paint:{"line-color":e||z0(),"line-width":4}};case"area":return{layout:{visibility:"visible"},type:"fill",paint:{"fill-color":e||z0()}};case"symbol":return{layout:{visibility:"visible"},type:"symbol",paint:{}};default:throw new Error("Invalid type: "+t)}},c7="component";class h7{constructor(){this.key=c7}build(e){return new f7(e)}}class f7 extends Ap{constructor(e){super(),this.components=[],this.layer=e}add(e){return this.components.push(e),this}remove(e){return this.components=this.components.filter(i=>i.id!==e.id),this}removeFromMap(){this.components=[]}setFromAction(e){const i=e.id;if(!this.components.find(a=>a.id==i))return this.layer.emit("add-component",{layer:this.layer,component:{component:e.component,option:e.option,id:i}}),this.add({id:i}),this}}class p7 extends df{constructor(e={}){super(e),this.setBuild((i,a)=>new d7(a))}setFieldName(e="name"){return this.option.field_name=e,this}setFieldId(e="id"){return this.option.field_id=e,this}}class d7 extends Ap{constructor(e={}){super(),this.option=e}get name(){var e;return((e=this.parent)==null?void 0:e.info.name)||""}get config(){const e={field_name:"name",field_id:"id"};return this.option.field_name&&(e.field_name=this.option.field_name),this.option.field_id&&(e.field_id=this.option.field_id),e}}const m7={key:0,class:"tab-item-no-content"},g7=di({__name:"tab-item",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,active:Boolean},setup(t){const e=t,i=De(()=>!e.item||!e.item.props||!e.item.props.label?{}:typeof e.item.props.label=="function"?e.item.props.label(e.item):e.item.props.label);return(a,u)=>(ut(),Yt("div",er({class:["tab-item",{"tab-item-active":t.active}]},a.$attrs),[At("div",null,[At("div",null,vn(t.text),1),!t.item.component||!t.item.component.label?(ut(),Yt("div",m7,[At("p",null,vn(t.value||t.default_value),1)])):(ut(),Se(ss(t.item.component.label()),er({key:1},i.value,{tab:t.item,value:t.value,default_value:t.default_value}),null,16,["tab","value","default_value"]))])],16))}}),v7=Fn(g7,[["__scopeId","data-v-a67b2687"]]),y7=t=>(xh("data-v-944015a6"),t=t(),bh(),t),_7={class:"tab-item"},x7={key:0,class:"tab-item-no-content"},b7={key:2,class:"full-width"},A7=y7(()=>At("hr",{class:"map-divider"},null,-1)),w7=["disabled"],C7=di({__name:"tab-content",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,trans:{required:!0},mapId:{required:!0}},emits:["input"],setup(t,{emit:e}){const i=t,a=e,u=De({get(){return i.value!=null?i.value:i.default_value},set(y){a("input",y)}}),f=De(()=>!i.item||!i.item.props||!i.item.props.content?{}:typeof i.item.props.content=="function"?i.item.props.content(i.item):i.item.props.content),o=()=>{u.value=i.default_value};return(y,_)=>(ut(),Yt("div",_7,[!t.item.component||!t.item.component.content?(ut(),Yt("div",x7,[At("p",null,vn(t.value||t.default_value),1)])):(ut(),Se(ss(t.item.component.content()),er({key:1},f.value,{modelValue:u.value,"onUpdate:modelValue":_[0]||(_[0]=C=>u.value=C),mapId:t.mapId}),null,16,["modelValue","mapId"])),t.default_value!=null?(ut(),Yt("div",b7,[A7,At("button",{onClick:_[1]||(_[1]=C=>o()),disabled:u.value==null||u.value==t.default_value,class:"map-button text-center full-width"},vn(t.trans("map.style-control.back-to-default")),9,w7)])):sn("",!0)]))}}),I7=Fn(C7,[["__scopeId","data-v-944015a6"]]),xE={TAB:{type:"single",items:[{trans:"circle-style.setting.color",key:"circle-color",type:"color"},{trans:"circle-style.setting.width",key:"circle-radius",type:"unit",unit:"px"},{trans:"circle-style.setting.opacity",key:"circle-opacity",type:"opacity"},{trans:"circle-style.setting.blur",key:"circle-blur",type:"number"},{trans:"circle-style.setting.stroke-color",key:"circle-stroke-color",type:"color"},{trans:"circle-style.setting.stroke-width",key:"circle-stroke-width",type:"unit",unit:"px"},{trans:"circle-style.setting.stroke-opacity",key:"circle-stroke-opacity",type:"opacity"},{trans:"circle-style.setting.circle-pitch-alignment",key:"circle-pitch-alignment",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]},{trans:"circle-style.setting.circle-pitch-scale",key:"circle-pitch-scale",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]}]},DEFAULT:{type:"circle",paint:{"circle-radius":5,"circle-color":"#000000","circle-blur":0,"circle-opacity":1,"circle-stroke-color":"#000000","circle-stroke-width":0,"circle-stroke-opacity":1,"circle-pitch-alignment":"viewport","circle-pitch-scale":"map"}}},M7={props:{value:{type:String},default_value:{type:String}},data:()=>({}),computed:{},methods:{}};function E7(t,e,i,a,u,f){return ut(),Yt("div",{style:Gr(`
      border: 1px solid #ccc;
      width:20px ; height: 20px ; background-color: ${i.value||i.default_value||"transparent"} ;
              border-radius: 5px `),class:No({"fill-canvas":!i.value&&!i.default_value})},null,6)}const S7=Fn(M7,[["render",E7]]),T7={props:{value:{},default_value:{},tab:{default:()=>({})}},data:()=>({}),computed:{},methods:{}};function k7(t,e,i,a,u,f){return ut(),Yt("div",null,vn(i.value||i.default_value||"0")+" "+vn(i.tab.unit||""),1)}const P7=Fn(T7,[["render",k7]]),L7={props:{value:{},default_value:{},format:{default:()=>()=>""}},data:()=>({}),computed:{c_value(){return this.value!=null?this.value:this.default_value}},methods:{}};function D7(t,e,i,a,u,f){return ut(),Yt("div",null,vn(i.format(f.c_value||"0")),1)}const Cx=Fn(L7,[["render",D7]]),nC={image:{component:{content:()=>Oo},props:{content:{class:"tab-content-padding"}}},color:{component:{content:()=>pO,label:()=>S7},props:{content:{disableAlpha:!0}}},boolean:{component:{content:()=>XB},props:{content:{class:"tab-content-padding"}}},chose:{component:{content:()=>n8,label:()=>Cx},props:{content:t=>({items:t.menu,class:"tab-content-padding"}),label:t=>({format(e){var i;return(i=t.menu.find(a=>a.value==e))==null?void 0:i.text}})}},opacity:{component:{content:()=>o_,label:()=>Cx},props:{content:{class:"tab-content-padding",min:0,max:1,step:.01},label:{format:t=>`${(+t*100).toFixed(0)} %`}},format:t=>+t},minMax:{component:{content:()=>o_,label:()=>Cx},props:{content:{class:"tab-content-padding",min:0,max:1,step:.01},label:{format:t=>`${(+t).toFixed(2)}`}},format:t=>+t},unit:{component:{content:()=>Oo,label:()=>P7},props:{content:{class:"tab-content-padding",type:"number",min:0}},format:t=>+t},default:{component:{content:()=>Oo},props:{content:{class:"tab-content-padding"}}}},bE={TAB:{type:"single",items:[{trans:"fill-style.setting.color",key:"fill-color",type:"color"},{trans:"fill-style.setting.opacity",key:"fill-opacity",type:"opacity"},{trans:"fill-style.setting.fill-antialias",key:"fill-antialias",type:"boolean"},{trans:"fill-style.setting.fill-outline-color",key:"fill-outline-color",type:"color"},{trans:"fill-style.setting.fill-pattern",key:"fill-pattern",type:"image"}]},DEFAULT:{type:"fill",paint:{"fill-antialias":!0,"fill-color":"#000000","fill-opacity":1,"fill-translate":[0,0]}}},AE={TAB:{type:"single",items:[{trans:"line-style.setting.color",key:"line-color",type:"color"},{trans:"line-style.setting.opacity",key:"line-opacity",type:"opacity"},{trans:"line-style.setting.width",key:"line-width",type:"unit",unit:"px"},{trans:"line-style.setting.pattern",key:"line-pattern",type:"image"},{trans:"line-style.setting.blur",key:"line-blur",type:"number"},{trans:"line-style.setting.cap",key:"line-cap",type:"chose",menu:[{text:"butt",value:"butt"},{text:"round",value:"round"},{text:"square",value:"square"}]},{trans:"line-style.setting.join",key:"line-join",type:"chose",menu:[{text:"bevel",value:"bevel"},{text:"round",value:"round"},{text:"miter",value:"miter"}]}]},DEFAULT:{type:"line",paint:{"line-color":"#000000","line-opacity":1,"line-width":0,"line-gap-width":0,"line-blur":0,"line-offset":0,"line-translate":[0,0]},layout:{"line-cap":"butt","line-join":"bevel","line-round-limit":0,"line-miter-limit":0}}},wE={TAB:{type:"single",items:[{trans:"raster-style.setting.raster-opacity",key:"raster-opacity",type:"opacity"},{trans:"raster-style.setting.raster-brightness-max",key:"raster-brightness-max",type:"minMax"},{trans:"raster-style.setting.raster-brightness-min",key:"raster-brightness-min",type:"minMax"},{trans:"raster-style.setting.raster-contrast",key:"raster-contrast",type:"minMax",props:{content:{class:"tab-content-padding",min:-1,max:1,step:.01}}},{trans:"raster-style.setting.raster-fade-duration",key:"raster-fade-duration",type:"unit",unit:"milliseconds"},{trans:"raster-style.setting.raster-hue-rotate",key:"raster-hue-rotate",type:"unit",unit:"degrees"},{trans:"raster-style.setting.raster-resampling",key:"raster-resampling",type:"chose",menu:[{text:"linear",value:"linear"},{text:"nearest",value:"nearest"}]},{trans:"raster-style.setting.raster-saturation",key:"raster-saturation",type:"minMax",props:{content:{min:-1,max:1}}}]},DEFAULT:{type:"raster",paint:{"raster-brightness-max":1,"raster-brightness-min":0,"raster-contrast":0,"raster-fade-duration":300,"raster-opacity":1,"raster-hue-rotate":0,"raster-resampling":"linear","raster-saturation":0}}},R7=[{trans:"symbol-style.setting.text-field",key:"text-field",part:"layout",type:"string"},{trans:"symbol-style.setting.text-color",key:"text-color",type:"color"},{trans:"symbol-style.setting.text-opacity",key:"text-opacity",type:"opacity"},{trans:"symbol-style.setting.text-size",key:"text-size",part:"layout",type:"unit",unit:"px"},{trans:"symbol-style.setting.text-letter-spacing",key:"text-letter-spacing",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.text-line-height",key:"text-line-height",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.text-max-width",key:"text-max-width",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.text-transform",key:"text-transform",part:"layout",type:"chose",menu:[{text:"none",value:"none"},{text:"uppercase",value:"uppercase"},{text:"lowercase",value:"lowercase"}]},{key:"divider",type:"divider"},{trans:"symbol-style.setting.text-halo-color",key:"text-halo-color",type:"color"},{trans:"symbol-style.setting.text-halo-width",key:"text-halo-width",type:"unit",unit:"px"},{trans:"symbol-style.setting.text-halo-blur",key:"text-halo-blur",type:"unit",unit:"px"}],z7=[{trans:"symbol-style.setting.icon-image",key:"icon-image",type:"image",part:"layout"},{trans:"symbol-style.setting.icon-opacity",key:"icon-opacity",type:"opacity"},{trans:"symbol-style.setting.icon-size",key:"icon-size",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.icon-text-fit",key:"icon-text-fit",type:"chose",part:"layout",menu:[{text:"none",value:"none"},{text:"width",value:"width"},{text:"height",value:"height"},{text:"both",value:"both"}]}],CE={TAB:{type:"multi",tabs:[{trans:"symbol-style.tab.text",items:R7},{trans:"symbol-style.tab.icon",items:z7},{trans:"symbol-style.tab.position",items:[]},{trans:"symbol-style.tab.placement",items:[]}]},DEFAULT:{type:"symbol",paint:{"text-color":"#000","text-opacity":1,"text-halo-blur":0,"text-halo-color":"#000","text-halo-width":0,"icon-opacity":1},layout:{"icon-size":1,"icon-text-fit-padding":[0,0,0,0],"icon-text-fit":"both","text-field":"","text-size":16,"text-transform":"none","text-letter-spacing":0,"text-line-height":0,"text-max-width":0}}},B7={circle:xE.TAB,line:AE.TAB,fill:bE.TAB,raster:wE.TAB,symbol:CE.TAB},O7={circle:xE.DEFAULT,line:AE.DEFAULT,fill:bE.DEFAULT,raster:wE.DEFAULT,symbol:CE.DEFAULT};function iC(t,e=nC){return t.map(i=>{if(i.type==="divider")return i;const a=Object.assign({},e.default,e[i.type]||{},i);return a.props=qv.merge({},a.props,(nC[i.type]||{}).props,i.props),a})}const F7={class:"style-edit-container"},N7={class:"label-config-container"},V7={class:"label-config-item"},U7={class:"label-config-item__label"},j7={class:"label-config-item__input"},H7={class:"label-config-item"},G7={class:"label-config-item__label"},q7={class:"label-config-item__input"},W7={class:"label-config-item"},Z7={class:"label-config-item__label"},$7={class:"label-config-item__input"},Y7={class:"label-config-item"},X7={class:"label-config-item__label"},K7={class:"label-config-item__input"},Q7={key:0,class:"tab-group-label"},J7=["onClick"],tj={class:"tab-group-container"},ej={class:"label-container"},nj={key:0},ij=["onClick"],rj={key:0,class:"tab-divider"},oj={class:"value-container"},aj={key:0,class:"value-container__label"},sj=di({__name:"single-style",props:Zs({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:Zs(["input","update-style"],["update:modelValue"]),setup(t,{emit:e}){const i=t,a=e,u=_l(t,"modelValue"),f=De(()=>{const G=B7[u.value.type];return G.type==="multi"?G.tabs.map(j=>({...j,items:iC(j.items)})):[{type:"single",text:"style",items:iC(G.items)}]}),o=De(()=>O7[u.value.type]),y=Ke(void 0),_=Ke(void 0),C=G=>{_.value=G,_.value&&_.value.menu&&(_.value.menu=_.value.menu.map(j=>({...j,text:j.text||i.trans(j.text_trans||"")||"",subtitle:j.subtitle||i.trans(j.subtitle_trans||"")||""})))},S=G=>{y.value=G,y.value&&y.value.items&&C(y.value.items[0])},k=(G,j,X)=>{j.type!=="divider"&&(j.format&&(G=j.format(G)),X[j.part||"paint"][j.key]=G,a("update-style",X))};Xl(()=>{f.value&&S(f.value[0])});const P=(G,j)=>{j["min-zoom"]=G,a("update-style",j)},B=(G,j)=>{j["max-zoom"]=G,a("update-style",j)};return(G,j)=>(ut(),Yt("div",F7,[Pt(W(lb),null,{header:Xt(()=>[xo(vn(t.trans("map.style-control.layer.title")),1)]),default:Xt(()=>[At("div",N7,[At("div",V7,[At("div",U7,vn(t.trans("map.style-control.layer.id")),1),At("div",j7,vn(u.value.id),1)]),At("div",H7,[At("div",G7,vn(t.trans("map.style-control.layer.type")),1),At("div",q7,vn(u.value.type),1)]),At("div",W7,[At("div",Z7,vn(t.trans("map.style-control.layer.min-zoom")),1),At("div",$7,[Pt(W(o_),{modelValue:u.value["min-zoom"]!=null?u.value["min-zoom"]:0,"onUpdate:modelValue":j[0]||(j[0]=X=>P(X,u.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])]),At("div",Y7,[At("div",X7,vn(t.trans("map.style-control.layer.max-zoom")),1),At("div",K7,[Pt(W(o_),{modelValue:u.value["max-zoom"]!=null?u.value["max-zoom"]:24,"onUpdate:modelValue":j[1]||(j[1]=X=>B(X,u.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])])])]),_:1}),Pt(W(lb),null,{header:Xt(()=>[xo(vn(t.trans("map.style-control.style.title")),1)]),default:Xt(()=>[f.value&&f.value.length>1?(ut(),Yt("div",Q7,[(ut(!0),Yt(Ai,null,Fo(f.value,X=>(ut(),Yt("div",{key:X.key,class:No(["tab clickable",{"tab-active":y.value&&y.value.trans==X.trans}]),onClick:so(pt=>S(X),["stop"])},vn(X.text||t.trans(X.trans)),11,J7))),128))])):sn("",!0),At("div",tj,[At("div",ej,[y.value?(ut(),Yt("div",nj,[(ut(!0),Yt(Ai,null,Fo(y.value.items,X=>(ut(),Yt("div",{key:X.key,class:"clickable",onClick:so(pt=>C(X),["stop"])},[X.type==="divider"?(ut(),Yt("div",rj)):(ut(),Se(v7,{key:1,value:u.value[X.part||"paint"][X.key],item:X,text:X.text||t.trans(X.trans),default_value:o.value[X.part||"paint"][X.key],active:_.value&&_.value.key===X.key},null,8,["value","item","text","default_value","active"]))],8,ij))),128))])):sn("",!0)]),At("div",oj,[At("div",null,[_.value?(ut(),Yt("div",aj,vn(_.value.text||t.trans(_.value.trans)),1)):sn("",!0),_.value?(ut(),Se(I7,{key:1,item:_.value,value:u.value[_.value.part||"paint"][_.value.key],onInput:j[2]||(j[2]=X=>k(X,_.value,u.value)),default_value:o.value[_.value.part||"paint"][_.value.key],trans:t.trans,mapId:t.mapId},null,8,["item","value","default_value","trans","mapId"])):sn("",!0)])])])]),_:1})]))}}),lj={class:"multi-style-edit-container"},uj={class:"tab-container"},cj={class:"tab-item"},hj=["disabled"],fj={key:0,class:"style-container"},pj={class:"add-style-container"},dj={key:1,class:"style-container"},mj=di({__name:"multi-style",props:Zs({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0,default:()=>[]},modelModifiers:{}}),emits:Zs(["input","update-style","close"],["update:modelValue"]),setup(t,{emit:e}){const i=e,a=_l(t,"modelValue");vl(a,()=>{!_.value&&a.value.length>0&&(_.value=a.value[a.value.length-1].id)});const u=j=>{_.value=void 0,sc(()=>{_.value=j})},f=(j,X)=>{i("update-style",{type:"update-one-layer",layer:j,index:a.value.findIndex(pt=>pt.id===X)})},o=j=>{_.value=void 0,i("update-style",{type:"add-one-layer",layer:new c_().setStyleType(j).setColor("#fff").build()}),G(!1)},y=j=>{let X=a.value.findIndex(pt=>pt.id===j);a.value[X]&&(_.value=void 0,i("update-style",{type:"remove-one-layer",index:X,layer:a.value[X]}),a.value.splice(X,1),a.value[0]&&u(a.value[0].id))},_=Ke(a.value[0].id),C=De(()=>a.value.map((j,X)=>({text:`#${X+1}`,value:j.id}))),S=De(()=>a.value.find(j=>j.id===_.value)),k={delete:Wm,create:xp,close:Nm},[P,B]=md(!1),G=j=>{B(j)};return(j,X)=>(ut(),Yt("div",lj,[At("div",uj,[At("div",cj,[Pt(W(Ym),{modelValue:_.value,"onUpdate:modelValue":u,items:C.value},null,8,["modelValue","items"])]),At("div",{class:"tab-item tab-add clickable",onClick:X[0]||(X[0]=pt=>y(_.value)),disabled:!_.value},[At("div",null,[Pt(W(Rn),{size:"14",type:"mdi",path:k.delete,disabled:!_.value},null,8,["path","disabled"])])],8,hj),W(P)?(ut(),Yt("div",{key:1,class:"tab-item tab-add clickable",onClick:X[2]||(X[2]=pt=>G(!1))},[Pt(W(Rn),{size:"14",type:"mdi",path:k.close},null,8,["path"])])):(ut(),Yt("div",{key:0,class:"tab-item tab-add clickable",onClick:X[1]||(X[1]=pt=>G(!0))},[At("div",null,[Pt(W(Rn),{size:"14",type:"mdi",path:k.create},null,8,["path"])])]))]),W(P)?(ut(),Yt("div",fj,[At("div",pj,[Pt(W(zc),{onClick:X[3]||(X[3]=pt=>o("area"))},{default:Xt(()=>[xo(vn(t.trans("map.style-control.add.area")),1)]),_:1}),Pt(W(zc),{onClick:X[4]||(X[4]=pt=>o("line"))},{default:Xt(()=>[xo(vn(t.trans("map.style-control.add.line")),1)]),_:1}),Pt(W(zc),{onClick:X[5]||(X[5]=pt=>o("point"))},{default:Xt(()=>[xo(vn(t.trans("map.style-control.add.point")),1)]),_:1}),Pt(W(zc),{onClick:X[6]||(X[6]=pt=>o("symbol"))},{default:Xt(()=>[xo(vn(t.trans("map.style-control.add.symbol")),1)]),_:1})])])):_.value?(ut(),Yt("div",dj,[Pt(sj,{modelValue:S.value,trans:t.trans,mapId:t.mapId,onUpdateStyle:X[7]||(X[7]=pt=>f(pt,_.value))},null,8,["modelValue","trans","mapId"])])):sn("",!0)]))}});class gj extends Ap{constructor(e){super(),this.info=Object.assign({metadata:{}},e)}get metadata(){return this.info?this.info.metadata:{}}}class vj extends gj{constructor(e){super(e),this.layers=e.layers,this.source=e.source,this.layers.forEach((i,a)=>{i.id||(i.id=`${this._id}-${a}`)}),this.source&&!this.source.id&&(this.source.id=this._id)}getBeforeId(){return this.layers[0].id}getAllLayerIds(){return this.layers.map(e=>e.id)}addToMap(e,i){this.layers.forEach(a=>{e.getLayer(a.id)||(!a.source&&this.source&&(a.source=this.source.id),!a.source&&this.source.id&&(a.source=this.source.id),e.addLayer(a,i))})}removeFromMap(e){this.layers.forEach(i=>{e.getLayer(i.id)&&e.removeLayer(i.id)})}moveLayer(e,i){this.layers.forEach(a=>{e.getLayer(a.id)&&e.moveLayer(a.id,i)})}toggleShow(e,i){this.layers.forEach(a=>{e.getLayer(a.id)&&e.setLayoutProperty(a.id,"visibility",i?"visible":"none")})}setOpacity(e,i){this.layers.forEach(a=>{if(e.getLayer(a.id)){const u=a.type=="symbol"?"icon-opacity":`${a.type}-opacity`;e.setPaintProperty(a.id,u,i)}})}getValue(){return eb(this.layers)}getComponentUpdate(){return()=>mj}updateValue(e,i){const{type:a,index:u}=i;let{layer:f}=i;switch(a){case"update-one-layer":RU(e,this.layers[u],f),this.layers[u]=eb(Object.assign({},this.layers[u],f));break;case"add-one-layer":f=Object.assign({},{id:`${this._id}-${this.layers.length}`,source:this.source.id},f),e.addLayer(f),this.layers.push(f);break;case"remove-one-layer":e.getLayer(f.id)&&e.removeLayer(f.id),this.layers.splice(u,1);break}}}class yj extends df{constructor(){super({layer:{layers:[]}}),this.option.layerBuild={key:"layer",build(e,i){return new vj(i)}},this.setBuild((e,i)=>{let a=e.getView("source");i.sourceBuild&&i.sourceBuild.build&&(a=i.sourceBuild.build(e,i.source),a.setParent(e));let u;if(i.layerBuild&&i.layerBuild.build&&(u=i.layerBuild.build(e,{source:{id:a?a.id:void 0},...i.layer}),u.setParent(e)),!u)throw new Error("need set layer build");return new _j({layerView:u,sourceView:a})})}setLayers(e){return this.option.layer||(this.option.layer={layers:[]}),this.option.layer.layers=e,this}setLayer(e){return this.option.layer||(this.option.layer={layers:[]}),this.option.layer.layers=[Object.assign({layout:{},paint:{}},e)],this}setLayerBuild(e){return this.option.layerBuild=e,this}setSourceBuild(e){return this.option.sourceBuild=e,this}}let _j=class extends Ap{constructor(e){super(),this.layerView=e.layerView,this.sourceView=e.sourceView}async addToMap(e,i){var a,u;await((a=this.sourceView)==null?void 0:a.addToMap(e)),await((u=this.layerView)==null?void 0:u.addToMap(e,i))}async removeFromMap(e){var i,a;await((i=this.layerView)==null?void 0:i.removeFromMap(e)),await((a=this.sourceView)==null?void 0:a.removeFromMap(e))}getBeforeId(){return this.layerView.getBeforeId()}getAllLayerIds(){return this.layerView.getAllLayerIds()}moveLayer(e,i){this.layerView.moveLayer(e,i)}toggleShow(e,i){this.layerView.toggleShow(e,i)}setOpacity(e,i){this.layerView.setOpacity(e,i)}getComponentUpdate(){this.layerView.getComponentUpdate()}getValue(){return this.layerView.getValue()}updateValue(e,i){this.layerView.updateValue(e,i)}};const qs={source(t){return t.key="source",t},list(t){return t||(t=new r7),t.key="list",t},map(t){return t||(t=new yj),t.key="map",t},identify(t){return t||(t=new p7),t.key="identify",t},info(t){return t||(t=new XU),t.key="show_info",t},legend(t){return t||(t=new n7),t.key="legend",t},action(t){return t||(t=new BU),t.key="action",t},component(t){return t||(t=new h7),t.key="component",t}};function xj(t){return{all:t=t||new Map,on:function(e,i){var a=t.get(e);a?a.push(i):t.set(e,[i])},off:function(e,i){var a=t.get(e);a&&(i?a.splice(a.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var a=t.get(e);a&&a.slice().map(function(u){u(i)}),(a=t.get("*"))&&a.slice().map(function(u){u(e,i)})}}}class bj{constructor(){this.views={}}addView(e,i){return this.views[e]=i,this}getView(e){return this.views[e]}runWithNameFunction(e,...i){const a=[];let{source:u,...f}=this.views;return e==="addToMap"?u&&u[e]&&a.push(u[e](...i)):e!=="removeFromMap"&&(f=this.views,u=void 0),Aj(f,o=>{o[e]&&a.push(o[e](...i))},this),e==="removeFromMap"&&u&&u[e]&&a.push(u[e](...i)),Promise.all(a)}}function Aj(t,e=a=>{},i){return Promise.all(Object.keys(t).map(a=>{if(Object.hasOwnProperty.call(t,a))return e.bind(i)(t[a])}))}class DA extends cA{constructor(){super(),this.eventBus=xj(),this.info={metadata:{}},this._view=new bj}get metadata(){return this.info.metadata}get name(){return this.info.name}async run(e,i,...a){return this._view.runWithNameFunction(e,i,...a)}async addToMap(e,...i){return this._view.runWithNameFunction("addToMap",e,...i)}async removeFromMap(e,...i){return this._view.runWithNameFunction("removeFromMap",e,...i)}async updateForMap(e,...i){return this._view.runWithNameFunction("updateForMap",e,...i)}setInfo(e){return e.metadata==null?e.metadata={loading:!1}:e.metadata.loading==null&&(e.metadata.loading=!1),this.info=e,this}setView(e,i){return this._view.addView(e,i),this}getView(e){return this._view.getView(e)}emit(e,i){return this.eventBus.emit(e,i),this}off(e,i){return this.eventBus.off(e,i),this}on(e,i){return this.eventBus.on(e,i),this}}function RA(t,e,i={}){const{builds:a,actions:u}=e;let{builds:f=[]}=i;return a&&(f=[...a,...f]),f.unshift(qs.action().addActions(u)),f.unshift(qs.component()),f.forEach(o=>{if(o.setForLayer&&o.setForLayer(t),o.build){const y=o.build(t,o.option);y.setParent(t),t.setView(o.key,y)}}),t}function IE(t){const e=new DA,{name:i,tiles:a,bounds:u,maxZoom:f,minZoom:o}=t;e.setInfo({name:i,metadata:{bounds:u}});const y=[qs.source(new yE).setTiles(a).setBounds(u).setMaxzoom(f||24).setMinzoom(o||0),qs.list(),qs.map().setLayer(new _E().build()),qs.info().setFields([{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:C=>{const S=C.metadata.bounds;return S&&`${S[0]}, ${S[1]}, ${S[2]},${S[3]}`}},{trans:"map.layer-control.field.tiles",value:C=>{var S;return(S=C.getView("source").option.tiles)==null?void 0:S.join(`,
`)}}])],_=[PA(),LA()];return RA(e,{builds:y,actions:_},t)}function wj(t){const{name:e,url:i}=t,a=new DA;a.setInfo({name:e,metadata:{}});const u=[qs.source(new yE).setUrl(i),qs.list(),qs.map().setLayer(new _E().build()),qs.info().setFields([{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:o=>{const y=o.metadata.bounds;return y&&`${y[0]}, ${y[1]}, ${y[2]},${y[3]}`}},{trans:"map.layer-control.field.url",value:o=>o.getView("source").option.url,inline:!0}])],f=[PA(),LA()];return RA(a,{builds:u,actions:f},t)}function ME(t){const{name:e,geojson:i,type:a}=t;let{color:u}=t;const f=new DA;f.setInfo({name:e,metadata:{}}),u=u||z0();const o=[qs.source(new a7).setData(i),qs.list().setColor(u),qs.identify(),qs.info().setFields([{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:C=>{const S=C.metadata.bounds;return S&&`${S[0]}, ${S[1]}, ${S[2]},${S[3]}`}},{trans:"map.layer-control.field.geojson",value:C=>{const S=C.getView("source").geojson;return JSON.stringify(S,void 0,2)},inline:!0}])],y=qs.map();a&&y.setLayer(new c_().setStyleType(a).setColor(u).build()),o.push(y);const _=[PA(),LA()];return RA(f,{builds:o,actions:_},t)}const wd="layer";function Cj(t){ff(t,wd,{layers:{},layerIds:Ke([]),data:{}})}xd(wd,Cj);async function pb(t,e){const i=ia(t,wd);i.layers[e.id]=e,i.layerIds.value.push(e.id),i.data[e.id]=Ke({});const a=e.getView("list");a&&(a.index=i.layerIds.value.length),Rc.actions.getMap(t,async u=>{e.addToMap(u)})}function Ix(t,e){const i=ia(t,wd);Rc.actions.getMap(t,async a=>{e.removeFromMap(a)}),delete i.layers[e.id],delete i.data[e.id],i.layerIds.value=i.layerIds.value.filter(a=>a!=e.id)}function zA(t,e){const i=ia(t,wd),a=[];return i.layerIds.value.forEach(u=>{const f=i.layers[u];if(f){const o=f.getView(e);o&&a.push(o)}}),a}function Ij(t){return ia(t,wd).layerIds}function TW(t,e){return ia(t,wd).data[e]}const Mj=t=>(xh("data-v-a7a8945c"),t=t(),bh(),t),Ej={class:"identify-control-container"},Sj={class:"identify-control-header"},Tj=["innerHTML"],kj=Mj(()=>At("hr",{class:"identify-control-separator"},null,-1)),Pj={class:"identify-control-body"},Lj={class:"identify-control-list-item__header"},Dj={class:"identify-control-list-item__container"},Rj=di({__name:"IdentifyControl",props:{...Wa},setup(t){const e={icon:Wk,boxSelect:l4,mapClick:Uk},i=t,{mapId:a,moduleContainerProps:u,callMap:f}=So(i),{trans:o,setLocale:y}=ga(a.value),{format:_}=zM(a.value);y({map:{identify:{title:"Identify",point:"Point"}}});const C=De(()=>zA(a.value,"identify")),S=De(()=>C.value.length>0),k=De(()=>C.value.reduce((un,Un)=>{let ui=ml(Un);if(!ui)return un;let oi=ui.getView("map");return oi&&oi.getAllLayerIds().forEach(ue=>{un[ue]=Un}),un},{})),P=De(()=>Object.keys(k.value)),{add:B,remove:G,isActive:j}=sb(a.value,new hA().setHandler(ft)),{add:X,remove:pt,isActive:J}=sb(a.value,new uB().setHandler(Lt)),nt=yl({latitude:0,longitude:0});function ft(un){nt.latitude=un.lngLat.lat,nt.longitude=un.lngLat.lng,f(Un=>{const ui=Un.queryRenderedFeatures(un.point,{layers:P.value});Qn(ui)})}function Lt(un){je(),un&&xt(un)}function xt(un){un&&f(Un=>{const ui=Un.queryRenderedFeatures(un,{layers:P.value});Qn(ui)})}const Mt=Ke(!1);function Ht(){Mt.value=!Mt.value,Ft()}function jt(){Qt()}function Qt(){de(),je()}const Bt=Ke(!1);function Ft(){Bt.value?de():Ot()}function Ot(){Bt.value=!0,B()}function de(){Bt.value=!1,G()}const An=Ke(!1);function _e(){An.value?je():Ge()}function Ge(){An.value=!0,X()}function je(){An.value=!1,pt()}const Pi=yl({items:[],loading:!1}),Li=De(()=>{if(!nt)return"";const un=_(nt);return un.longitude+", &nbsp;"+un.latitude});function Qn(un){Pi.items=[];let Un=un.reduce((ui,oi)=>{let wi=oi.layer,ue=k.value[wi.id];if(!ue)return ui;let Qe=ue.config.field_id||"id",me=ue.config.field_name||"name";return ui[ue.id]||(ui[ue.id]={name:ue.name,view:ue,children:{},field_name:me}),ui[ue.id].children[oi.properties[Qe]]={id:oi.properties[Qe],name:oi.properties[me],data:Object.assign({geometry:oi.geometry},oi.properties)},ui},{});Pi.items=Object.keys(Un).map(ui=>Un[ui])}return(un,Un)=>(ut(),Se(W(La),Ga(Pa(W(u))),{btn:Xt(()=>[S.value?(ut(),Se(W(Ar),{key:0,tooltip:W(o)("map.identify.title"),onClick:Un[0]||(Un[0]=so(ui=>Ht(),["stop"])),active:Mt.value},{default:Xt(()=>[Pt(W(Rn),{size:"14",type:"mdi",path:e.icon},null,8,["path"])]),_:1},8,["tooltip","active"])):sn("",!0)]),draggable:Xt(ui=>[Mt.value?(ut(),Se(W(mf),er({key:0,show:Mt.value,"onUpdate:show":Un[3]||(Un[3]=oi=>Mt.value=oi)},ui,{width:400,height:300,onClose:jt,title:W(o)("map.identify.title")}),{"extra-btn":Xt(()=>[Pt(W(zc),{onClick:Un[1]||(Un[1]=so(oi=>Ft(),["stop"])),active:W(j),disabled:W(j)},{default:Xt(()=>[Pt(W(Rn),{size:"14",type:"mdi",path:e.mapClick},null,8,["path"])]),_:1},8,["active","disabled"]),Pt(W(zc),{onClick:Un[2]||(Un[2]=so(oi=>_e(),["stop"])),active:W(J),disabled:W(J)},{default:Xt(()=>[Pt(W(Rn),{size:"14",type:"mdi",path:e.boxSelect},null,8,["path"])]),_:1},8,["active","disabled"])]),default:Xt(()=>[At("div",Ej,[At("div",Sj,[At("b",null,vn(W(o)("map.identify.point"))+":",1),At("span",{innerHTML:Li.value},null,8,Tj)]),kj,At("div",Pj,[(ut(!0),Yt(Ai,null,Fo(Pi.items,oi=>(ut(),Yt("div",{key:oi.view.id,class:"identify-control-list-item"},[At("div",Lj,vn(oi.name),1),At("div",Dj,[(ut(!0),Yt(Ai,null,Fo(oi.children,wi=>(ut(),Yt("div",{class:"identify-control-child-item",key:wi.id},[At("span",null,vn(wi.name),1)]))),128))])]))),128))])])]),_:2},1040,["show","title"])):sn("",!0)]),_:1},16))}}),zj=Fn(Rj,[["__scopeId","data-v-a7a8945c"]]),Bj={},Oj={class:"map-row"};function Fj(t,e,i,a,u,f){return ut(),Yt("div",Oj,[Hn(t.$slots,"default")])}const EE=Fn(Bj,[["render",Fj]]),Nj={class:"map-row"},Vj={class:"map-col-12"},Uj={__name:"xyz-json",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=_l(t,"modelValue"),{mapId:i}=So(),{trans:a}=ga(i.value);return(u,f)=>(ut(),Yt("div",Nj,[Hn(u.$slots,"default"),At("div",Vj,[Pt(W(Oo),{modelValue:e.value.url,"onUpdate:modelValue":f[0]||(f[0]=o=>e.value.url=o),label:W(a)("map.layer-control.field.url")},null,8,["modelValue","label"])])]))}},jj={class:"map-row"},Hj={class:"map-col-12"},Gj={class:"map-col-6"},qj={class:"map-col-6"},Wj={class:"map-col-6"},Zj={class:"map-col-6"},$j={class:"map-col-6"},Yj={class:"map-col-6"},Xj={__name:"xyz-url",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=_l(t,"modelValue"),{mapId:i}=So(),{trans:a}=ga(i.value);return(u,f)=>(ut(),Yt("div",jj,[Hn(u.$slots,"default"),At("div",Hj,[Pt(W(Oo),{modelValue:e.value.url,"onUpdate:modelValue":f[0]||(f[0]=o=>e.value.url=o),label:W(a)("map.layer-control.field.url")},null,8,["modelValue","label"])]),At("div",Gj,[Pt(W(Oo),{modelValue:e.value.minzoom,"onUpdate:modelValue":f[1]||(f[1]=o=>e.value.minzoom=o),label:W(a)("map.layer-control.field.minzoom")},null,8,["modelValue","label"])]),At("div",qj,[Pt(W(Oo),{modelValue:e.value.maxzoom,"onUpdate:modelValue":f[2]||(f[2]=o=>e.value.maxzoom=o),label:W(a)("map.layer-control.field.maxzoom")},null,8,["modelValue","label"])]),e.value.bounds?(ut(),Yt(Ai,{key:0},[At("div",Wj,[Pt(W(Oo),{modelValue:e.value.bounds[0],"onUpdate:modelValue":f[3]||(f[3]=o=>e.value.bounds[0]=o),label:W(a)("map.layer-control.field.bound.minx")},null,8,["modelValue","label"])]),At("div",Zj,[Pt(W(Oo),{modelValue:e.value.bounds[1],"onUpdate:modelValue":f[4]||(f[4]=o=>e.value.bounds[1]=o),label:W(a)("map.layer-control.field.bound.miny")},null,8,["modelValue","label"])]),At("div",$j,[Pt(W(Oo),{modelValue:e.value.bounds[2],"onUpdate:modelValue":f[5]||(f[5]=o=>e.value.bounds[2]=o),label:W(a)("map.layer-control.field.bound.maxx")},null,8,["modelValue","label"])]),At("div",Yj,[Pt(W(Oo),{modelValue:e.value.bounds[3],"onUpdate:modelValue":f[6]||(f[6]=o=>e.value.bounds[3]=o),label:W(a)("map.layer-control.field.bound.maxy")},null,8,["modelValue","label"])])],64)):sn("",!0)]))}},Kj={multiple:!0,accept:"*",reset:!1,directory:!1};function Qj(t={}){const{document:e=yA}=t,i=Ke(null),{on:a,trigger:u}=F4();let f;e&&(f=e.createElement("input"),f.type="file",f.onchange=_=>{const C=_.target;i.value=C.files,u(i.value)});const o=()=>{i.value=null,f&&f.value&&(f.value="",u(null))},y=_=>{if(!f)return;const C={...Kj,...t,..._};f.multiple=C.multiple,f.accept=C.accept,f.webkitdirectory=C.directory,oL(C,"capture")&&(f.capture=C.capture),C.reset&&o(),f.click()};return{files:b_(i),open:y,reset:o,onChange:a}}const Jj=Nb('<label class="ddf__label" for="upload-file" data-v-70127256><i class="ddf__label-inner" data-v-70127256><svg class="ddf__icon" viewBox="0 0 64 64" aria-hidden="true" data-v-70127256><path fill="currentColor" d="M51,27c-.374,0-.742.025-1.109.056a18,18,0,0,0-35.782,0C13.742,27.025,13.374,27,13,27a13,13,0,0,0,0,26H51a13,13,0,0,0,0-26Z" data-v-70127256></path><path d="M43.764,41.354l-11-13a1.033,1.033,0,0,0-1.526,0l-11,13A1,1,0,0,0,21,43h7V59h8V43h7a1,1,0,0,0,.764-1.646Z" data-v-70127256></path></svg><span class="ddf__text" data-v-70127256> Drag and drop your files here </span><span class="ddf__subtext" data-v-70127256> or click to browse your files </span></i></label>',1),tH=[Jj],eH=di({__name:"index",props:{multiple:Boolean,accept:String},emits:["change"],setup(t,{emit:e}){const i=t,a=e,{onChange:u,open:f}=Qj({multiple:i.multiple,accept:i.accept});u(C=>{C&&o(Array.from(C))});function o(C){C&&a("change",i.multiple?C:C[0])}const y=Ke(),{isOverDropZone:_}=Y9(y,o);return(C,S)=>(ut(),Yt("div",{class:No(["ddf__area",{ddf__active:W(_)}]),ref_key:"dropZoneRef",ref:y,onClick:S[0]||(S[0]=k=>W(f)())},tH,2))}}),nH=Fn(eH,[["__scopeId","data-v-70127256"]]);function iH(t={}){const e=new rH;async function i(a,u={}){return e.read(a,Object.assign({},t,u))}return{read:i}}class rH{async read(e,i={}){const a=i.parser||this.getParser(e),u=i.type||"text",f=i.onSuccess,o=i.onError;try{let y=await rC.read(e,u);return a&&(y=await a.parse(y,e)),f&&f(y),y}catch(y){throw o&&o(y),y}}getParser(e){switch(rC.getExtension(e)){case"geojson":case"json":return new oH}}}class rC{static getExtension(e){return e.name.split(".").pop()}static async read(e,i){return new Promise((a,u)=>{const f=new window.FileReader;f.onload=o=>o.target&&a(o.target.result),f.onerror=o=>u(o),i==="text"?f.readAsText(e):i==="arraybuffer"?f.readAsArrayBuffer(e):i==="binary"?f.readAsDataURL(e):u(new Error(`Read file as ${i} is not available`))})}}class oH{parse(e,i){const a=JSON.parse(e);return Promise.resolve(this.toGeojson(a))}toGeojson(e){return e.crs,e}}const aH={class:"map-row"},sH={class:"map-col-12"},lH={class:"map-col-12"},uH={key:0,class:"map-col-12"},cH={__name:"geojson-upload",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const{read:e}=iH(),i=["point","line","area"],a=_l(t,"modelValue"),u=Ke(null),{mapId:f}=So(),{trans:o}=ga(f.value);function y(_){e(_).then(C=>{a.value.geojson=C,u.value=C?JSON.stringify(C,null,2):""})}return(_,C)=>(ut(),Yt("div",aH,[Hn(_.$slots,"default"),At("div",sH,[Pt(W(Ym),{modelValue:a.value.type,"onUpdate:modelValue":C[0]||(C[0]=S=>a.value.type=S),items:i,label:W(o)("map.layer-control.field.type")},null,8,["modelValue","label"])]),At("div",lH,[Pt(W(nH),{onChange:y,accept:".json,.geojson"})]),u.value?(ut(),Yt("div",uH,[Pt(W(jM),{modelValue:u.value,rows:"4",readonly:""},null,8,["modelValue"])])):sn("",!0)]))}};class BA{get default_value(){return{}}validate(e){return!!e.name}}class hH extends BA{get component(){return()=>cH}get default_value(){return{type:"point",geojson:null}}validate(e){return!(!e.name||!e.geojson||!e.type)}get create(){return e=>ME({...e})}}class fH extends BA{get component(){return()=>Uj}validate(e){return!(!e.name||!e.url)}get create(){return e=>wj({...e})}}class pH extends BA{get component(){return()=>Xj}get default_value(){return{bounds:[-180,-85.051129,180,85.051129],minzoom:0,maxzoom:24}}validate(e){return!(!e.name||!e.url)}get create(){return e=>IE({name:e.name,...e,tiles:[e.url]})}}const oC={"raster-url":"Raster url layer","raster-json":"Raster json layer",geojson:"Geojson layer"};class dH{constructor(e){this.setType(e)}setType(e){this.helper=mH.create(e)}get default_value(){return this.helper.default_value}get create(){return this.helper.create}get component(){return this.helper.component||EE}validate(e){return this.helper.validate(e)}}const mH={create(t){switch(t){case"raster-url":return new pH;case"raster-json":return new fH;case"geojson":return new hH;default:throw new Error("not support type: "+t)}}},gH={class:"create-control-container"},vH={class:"form-container"},yH={class:"map-col-12"},_H={class:"map-col-12"},xH={name:"create-layer-control"},bH=Object.assign(xH,{props:{show:Boolean},emits:["update:show"],setup(t,{emit:e}){const i=t,{mapId:a,moduleContainerProps:u,callMap:f}=So(i),{trans:o}=ga(a.value),y=e,_=De({get(){return i.show},set(nt){y("update:show",nt)}}),C={type:"geojson"},S=Ke(1),k=Ke(()=>EE),P=new dH(C.type),B=Ke({...C,config:{name:"",...P.default_value}}),G=Object.keys(oC).map(nt=>({value:nt,text:oC[nt]}));function j(nt){P.setType(nt),k.value=P.component,B.value={config:{name:B.value.config.name,...P.default_value},type:B.value.type}}function X(nt){const ft=P.create;if(!ft||!P.validate(nt.config))return;let Lt=ft(nt.config);f(xt=>{pb(xt.id,Lt)}),pt()}function pt(){P.setType(C.type),B.value={...C,config:{name:"",...P.default_value}},S.value++}function J(){pt()}return Xl(()=>{j(B.value.type)}),(nt,ft)=>(ut(),Se(W(La),Ga(Pa(W(u))),{draggable:Xt(Lt=>[Pt(W(mf),er({show:_.value,"onUpdate:show":ft[4]||(ft[4]=xt=>_.value=xt)},Lt,{width:400,height:300,onClose:J,title:W(o)("map.layer-control.create.title")}),{default:Xt(()=>[At("div",gH,[At("div",vH,[(ut(),Se(ss(k.value()),{modelValue:B.value.config,"onUpdate:modelValue":ft[2]||(ft[2]=xt=>B.value.config=xt),class:"create-control-form",key:S.value},{default:Xt(()=>[At("div",yH,[Pt(W(Oo),{modelValue:B.value.config.name,"onUpdate:modelValue":ft[0]||(ft[0]=xt=>B.value.config.name=xt),label:W(o)("map.layer-control.field.name")},null,8,["modelValue","label"])]),At("div",_H,[Pt(W(Ym),{modelValue:B.value.type,"onUpdate:modelValue":[ft[1]||(ft[1]=xt=>B.value.type=xt),j],items:W(G),label:W(o)("map.layer-control.field.type")},null,8,["modelValue","items","label"])])]),_:1},8,["modelValue"]))]),Pt(W(zc),{onClick:ft[3]||(ft[3]=xt=>X(B.value)),class:"btn-container"},{default:Xt(()=>[xo(vn(W(o)("map.layer-control.create-btn")),1)]),_:1})])]),_:2},1040,["show","title"])]),_:1},16))}}),AH=Fn(bH,[["__scopeId","data-v-69927987"]]),wH={components:{SvgIcon:Rn},props:{isSelected:Boolean,disabledDrag:Boolean,item:{type:Object,default:()=>({})}},computed:{path(){return{draggable:Lk}}}},CH={class:"draggable-handle__icon"},IH={class:"draggale-item__info"};function MH(t,e,i,a,u,f){const o=Ha("SvgIcon");return ut(),Yt("div",{class:No(["draggale-item",{"draggale-item-active":i.isSelected}])},[i.disabledDrag?sn("",!0):(ut(),Yt("div",{key:0,class:"draggable-handle",style:Gr({background:i.item.color})},[At("div",CH,[Pt(o,{size:"14",type:"mdi",path:f.path.draggable},null,8,["path"])])],4)),At("div",IH,[Hn(t.$slots,"default",{},void 0,!0)])],2)}const db=Fn(wH,[["render",MH],["__scopeId","data-v-d69fc52c"]]);/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function aC(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),i.push.apply(i,a)}return i}function _h(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?aC(Object(i),!0).forEach(function(a){EH(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):aC(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function B0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B0=function(e){return typeof e}:B0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B0(t)}function EH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function cf(){return cf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},cf.apply(this,arguments)}function SH(t,e){if(t==null)return{};var i={},a=Object.keys(t),u,f;for(f=0;f<a.length;f++)u=a[f],!(e.indexOf(u)>=0)&&(i[u]=t[u]);return i}function TH(t,e){if(t==null)return{};var i=SH(t,e),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)a=f[u],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}var kH="1.15.2";function af(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var gf=af(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Yv=af(/Edge/i),sC=af(/firefox/i),pv=af(/safari/i)&&!af(/chrome/i)&&!af(/android/i),SE=af(/iP(ad|od|hone)/i),TE=af(/chrome/i)&&af(/android/i),kE={capture:!1,passive:!1};function Fr(t,e,i){t.addEventListener(e,i,!gf&&kE)}function xr(t,e,i){t.removeEventListener(e,i,!gf&&kE)}function h_(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function PH(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Lc(t,e,i,a){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&h_(t,e):h_(t,e))||a&&t===i)return t;if(t===i)break}while(t=PH(t))}return null}var lC=/\s+/g;function vu(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var a=(" "+t.className+" ").replace(lC," ").replace(" "+e+" "," ");t.className=(a+(i?" "+e:"")).replace(lC," ")}}function yi(t,e,i){var a=t&&t.style;if(a){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=i+(typeof i=="string"?"":"px")}}function zm(t,e){var i="";if(typeof t=="string")i=t;else do{var a=yi(t,"transform");a&&a!=="none"&&(i=a+" "+i)}while(!e&&(t=t.parentNode));var u=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return u&&new u(i)}function PE(t,e,i){if(t){var a=t.getElementsByTagName(e),u=0,f=a.length;if(i)for(;u<f;u++)i(a[u],u);return a}return[]}function gh(){var t=document.scrollingElement;return t||document.documentElement}function ka(t,e,i,a,u){if(!(!t.getBoundingClientRect&&t!==window)){var f,o,y,_,C,S,k;if(t!==window&&t.parentNode&&t!==gh()?(f=t.getBoundingClientRect(),o=f.top,y=f.left,_=f.bottom,C=f.right,S=f.height,k=f.width):(o=0,y=0,_=window.innerHeight,C=window.innerWidth,S=window.innerHeight,k=window.innerWidth),(e||i)&&t!==window&&(u=u||t.parentNode,!gf))do if(u&&u.getBoundingClientRect&&(yi(u,"transform")!=="none"||i&&yi(u,"position")!=="static")){var P=u.getBoundingClientRect();o-=P.top+parseInt(yi(u,"border-top-width")),y-=P.left+parseInt(yi(u,"border-left-width")),_=o+f.height,C=y+f.width;break}while(u=u.parentNode);if(a&&t!==window){var B=zm(u||t),G=B&&B.a,j=B&&B.d;B&&(o/=j,y/=G,k/=G,S/=j,_=o+S,C=y+k)}return{top:o,left:y,bottom:_,right:C,width:k,height:S}}}function uC(t,e,i){for(var a=sp(t,!0),u=ka(t)[e];a;){var f=ka(a)[i],o=void 0;if(o=u>=f,!o)return a;if(a===gh())break;a=sp(a,!1)}return!1}function Gm(t,e,i,a){for(var u=0,f=0,o=t.children;f<o.length;){if(o[f].style.display!=="none"&&o[f]!==_i.ghost&&(a||o[f]!==_i.dragged)&&Lc(o[f],i.draggable,t,!1)){if(u===e)return o[f];u++}f++}return null}function OA(t,e){for(var i=t.lastElementChild;i&&(i===_i.ghost||yi(i,"display")==="none"||e&&!h_(i,e));)i=i.previousElementSibling;return i||null}function tc(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==_i.clone&&(!e||h_(t,e))&&i++;return i}function cC(t){var e=0,i=0,a=gh();if(t)do{var u=zm(t),f=u.a,o=u.d;e+=t.scrollLeft*f,i+=t.scrollTop*o}while(t!==a&&(t=t.parentNode));return[e,i]}function LH(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t[i][a])return Number(i)}return-1}function sp(t,e){if(!t||!t.getBoundingClientRect)return gh();var i=t,a=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var u=yi(i);if(i.clientWidth<i.scrollWidth&&(u.overflowX=="auto"||u.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(u.overflowY=="auto"||u.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return gh();if(a||e)return i;a=!0}}while(i=i.parentNode);return gh()}function DH(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function Mx(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var dv;function LE(t,e){return function(){if(!dv){var i=arguments,a=this;i.length===1?t.call(a,i[0]):t.apply(a,i),dv=setTimeout(function(){dv=void 0},e)}}}function RH(){clearTimeout(dv),dv=void 0}function DE(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function RE(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function zE(t,e,i){var a={};return Array.from(t.children).forEach(function(u){var f,o,y,_;if(!(!Lc(u,e.draggable,t,!1)||u.animated||u===i)){var C=ka(u);a.left=Math.min((f=a.left)!==null&&f!==void 0?f:1/0,C.left),a.top=Math.min((o=a.top)!==null&&o!==void 0?o:1/0,C.top),a.right=Math.max((y=a.right)!==null&&y!==void 0?y:-1/0,C.right),a.bottom=Math.max((_=a.bottom)!==null&&_!==void 0?_:-1/0,C.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var xu="Sortable"+new Date().getTime();function zH(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(u){if(!(yi(u,"display")==="none"||u===_i.ghost)){t.push({target:u,rect:ka(u)});var f=_h({},t[t.length-1].rect);if(u.thisAnimationDuration){var o=zm(u,!0);o&&(f.top-=o.f,f.left-=o.e)}u.fromRect=f}})}},addAnimationState:function(a){t.push(a)},removeAnimationState:function(a){t.splice(LH(t,{target:a}),1)},animateAll:function(a){var u=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var f=!1,o=0;t.forEach(function(y){var _=0,C=y.target,S=C.fromRect,k=ka(C),P=C.prevFromRect,B=C.prevToRect,G=y.rect,j=zm(C,!0);j&&(k.top-=j.f,k.left-=j.e),C.toRect=k,C.thisAnimationDuration&&Mx(P,k)&&!Mx(S,k)&&(G.top-k.top)/(G.left-k.left)===(S.top-k.top)/(S.left-k.left)&&(_=OH(G,P,B,u.options)),Mx(k,S)||(C.prevFromRect=S,C.prevToRect=k,_||(_=u.options.animation),u.animate(C,G,k,_)),_&&(f=!0,o=Math.max(o,_),clearTimeout(C.animationResetTimer),C.animationResetTimer=setTimeout(function(){C.animationTime=0,C.prevFromRect=null,C.fromRect=null,C.prevToRect=null,C.thisAnimationDuration=null},_),C.thisAnimationDuration=_)}),clearTimeout(e),f?e=setTimeout(function(){typeof a=="function"&&a()},o):typeof a=="function"&&a(),t=[]},animate:function(a,u,f,o){if(o){yi(a,"transition",""),yi(a,"transform","");var y=zm(this.el),_=y&&y.a,C=y&&y.d,S=(u.left-f.left)/(_||1),k=(u.top-f.top)/(C||1);a.animatingX=!!S,a.animatingY=!!k,yi(a,"transform","translate3d("+S+"px,"+k+"px,0)"),this.forRepaintDummy=BH(a),yi(a,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),yi(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){yi(a,"transition",""),yi(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},o)}}}}function BH(t){return t.offsetWidth}function OH(t,e,i,a){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*a.animation}var vm=[],Ex={initializeByDefault:!0},Xv={mount:function(e){for(var i in Ex)Ex.hasOwnProperty(i)&&!(i in e)&&(e[i]=Ex[i]);vm.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),vm.push(e)},pluginEvent:function(e,i,a){var u=this;this.eventCanceled=!1,a.cancel=function(){u.eventCanceled=!0};var f=e+"Global";vm.forEach(function(o){i[o.pluginName]&&(i[o.pluginName][f]&&i[o.pluginName][f](_h({sortable:i},a)),i.options[o.pluginName]&&i[o.pluginName][e]&&i[o.pluginName][e](_h({sortable:i},a)))})},initializePlugins:function(e,i,a,u){vm.forEach(function(y){var _=y.pluginName;if(!(!e.options[_]&&!y.initializeByDefault)){var C=new y(e,i,e.options);C.sortable=e,C.options=e.options,e[_]=C,cf(a,C.defaults)}});for(var f in e.options)if(e.options.hasOwnProperty(f)){var o=this.modifyOption(e,f,e.options[f]);typeof o<"u"&&(e.options[f]=o)}},getEventProperties:function(e,i){var a={};return vm.forEach(function(u){typeof u.eventProperties=="function"&&cf(a,u.eventProperties.call(i[u.pluginName],e))}),a},modifyOption:function(e,i,a){var u;return vm.forEach(function(f){e[f.pluginName]&&f.optionListeners&&typeof f.optionListeners[i]=="function"&&(u=f.optionListeners[i].call(e[f.pluginName],a))}),u}};function FH(t){var e=t.sortable,i=t.rootEl,a=t.name,u=t.targetEl,f=t.cloneEl,o=t.toEl,y=t.fromEl,_=t.oldIndex,C=t.newIndex,S=t.oldDraggableIndex,k=t.newDraggableIndex,P=t.originalEvent,B=t.putSortable,G=t.extraEventProperties;if(e=e||i&&i[xu],!!e){var j,X=e.options,pt="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!gf&&!Yv?j=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(j=document.createEvent("Event"),j.initEvent(a,!0,!0)),j.to=o||i,j.from=y||i,j.item=u||i,j.clone=f,j.oldIndex=_,j.newIndex=C,j.oldDraggableIndex=S,j.newDraggableIndex=k,j.originalEvent=P,j.pullMode=B?B.lastPutMode:void 0;var J=_h(_h({},G),Xv.getEventProperties(a,e));for(var nt in J)j[nt]=J[nt];i&&i.dispatchEvent(j),X[pt]&&X[pt].call(e,j)}}var NH=["evt"],ql=function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=a.evt,f=TH(a,NH);Xv.pluginEvent.bind(_i)(e,i,_h({dragEl:dn,parentEl:na,ghostEl:Fi,rootEl:Bo,nextEl:id,lastDownEl:O0,cloneEl:Zo,cloneHidden:rp,dragStarted:Zg,putSortable:ys,activeSortable:_i.active,originalEvent:u,oldIndex:Em,oldDraggableIndex:mv,newIndex:yu,newDraggableIndex:np,hideGhostForTarget:NE,unhideGhostForTarget:VE,cloneNowHidden:function(){rp=!0},cloneNowShown:function(){rp=!1},dispatchSortableEvent:function(y){pl({sortable:i,name:y,originalEvent:u})}},f))};function pl(t){FH(_h({putSortable:ys,cloneEl:Zo,targetEl:dn,rootEl:Bo,oldIndex:Em,oldDraggableIndex:mv,newIndex:yu,newDraggableIndex:np},t))}var dn,na,Fi,Bo,id,O0,Zo,rp,Em,yu,mv,np,_0,ys,Am=!1,f_=!1,p_=[],ed,kc,Sx,Tx,hC,fC,Zg,ym,gv,vv=!1,x0=!1,F0,Us,kx=[],mb=!1,d_=[],J_=typeof document<"u",b0=SE,pC=Yv||gf?"cssFloat":"float",VH=J_&&!TE&&!SE&&"draggable"in document.createElement("div"),BE=function(){if(J_){if(gf)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),OE=function(e,i){var a=yi(e),u=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),f=Gm(e,0,i),o=Gm(e,1,i),y=f&&yi(f),_=o&&yi(o),C=y&&parseInt(y.marginLeft)+parseInt(y.marginRight)+ka(f).width,S=_&&parseInt(_.marginLeft)+parseInt(_.marginRight)+ka(o).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(f&&y.float&&y.float!=="none"){var k=y.float==="left"?"left":"right";return o&&(_.clear==="both"||_.clear===k)?"vertical":"horizontal"}return f&&(y.display==="block"||y.display==="flex"||y.display==="table"||y.display==="grid"||C>=u&&a[pC]==="none"||o&&a[pC]==="none"&&C+S>u)?"vertical":"horizontal"},UH=function(e,i,a){var u=a?e.left:e.top,f=a?e.right:e.bottom,o=a?e.width:e.height,y=a?i.left:i.top,_=a?i.right:i.bottom,C=a?i.width:i.height;return u===y||f===_||u+o/2===y+C/2},jH=function(e,i){var a;return p_.some(function(u){var f=u[xu].options.emptyInsertThreshold;if(!(!f||OA(u))){var o=ka(u),y=e>=o.left-f&&e<=o.right+f,_=i>=o.top-f&&i<=o.bottom+f;if(y&&_)return a=u}}),a},FE=function(e){function i(f,o){return function(y,_,C,S){var k=y.options.group.name&&_.options.group.name&&y.options.group.name===_.options.group.name;if(f==null&&(o||k))return!0;if(f==null||f===!1)return!1;if(o&&f==="clone")return f;if(typeof f=="function")return i(f(y,_,C,S),o)(y,_,C,S);var P=(o?y:_).options.group.name;return f===!0||typeof f=="string"&&f===P||f.join&&f.indexOf(P)>-1}}var a={},u=e.group;(!u||B0(u)!="object")&&(u={name:u}),a.name=u.name,a.checkPull=i(u.pull,!0),a.checkPut=i(u.put),a.revertClone=u.revertClone,e.group=a},NE=function(){!BE&&Fi&&yi(Fi,"display","none")},VE=function(){!BE&&Fi&&yi(Fi,"display","")};J_&&!TE&&document.addEventListener("click",function(t){if(f_)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),f_=!1,!1},!0);var nd=function(e){if(dn){e=e.touches?e.touches[0]:e;var i=jH(e.clientX,e.clientY);if(i){var a={};for(var u in e)e.hasOwnProperty(u)&&(a[u]=e[u]);a.target=a.rootEl=i,a.preventDefault=void 0,a.stopPropagation=void 0,i[xu]._onDragOver(a)}}},HH=function(e){dn&&dn.parentNode[xu]._isOutsideThisEl(e.target)};function _i(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=cf({},e),t[xu]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return OE(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,y){o.setData("Text",y.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_i.supportPointer!==!1&&"PointerEvent"in window&&!pv,emptyInsertThreshold:5};Xv.initializePlugins(this,t,i);for(var a in i)!(a in e)&&(e[a]=i[a]);FE(e);for(var u in this)u.charAt(0)==="_"&&typeof this[u]=="function"&&(this[u]=this[u].bind(this));this.nativeDraggable=e.forceFallback?!1:VH,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Fr(t,"pointerdown",this._onTapStart):(Fr(t,"mousedown",this._onTapStart),Fr(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Fr(t,"dragover",this),Fr(t,"dragenter",this)),p_.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),cf(this,zH())}_i.prototype={constructor:_i,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ym=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,dn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,a=this.el,u=this.options,f=u.preventOnFilter,o=e.type,y=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,_=(y||e).target,C=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||_,S=u.filter;if(KH(a),!dn&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||u.disabled)&&!C.isContentEditable&&!(!this.nativeDraggable&&pv&&_&&_.tagName.toUpperCase()==="SELECT")&&(_=Lc(_,u.draggable,a,!1),!(_&&_.animated)&&O0!==_)){if(Em=tc(_),mv=tc(_,u.draggable),typeof S=="function"){if(S.call(this,e,_,this)){pl({sortable:i,rootEl:C,name:"filter",targetEl:_,toEl:a,fromEl:a}),ql("filter",i,{evt:e}),f&&e.cancelable&&e.preventDefault();return}}else if(S&&(S=S.split(",").some(function(k){if(k=Lc(C,k.trim(),a,!1),k)return pl({sortable:i,rootEl:k,name:"filter",targetEl:_,fromEl:a,toEl:a}),ql("filter",i,{evt:e}),!0}),S)){f&&e.cancelable&&e.preventDefault();return}u.handle&&!Lc(C,u.handle,a,!1)||this._prepareDragStart(e,y,_)}}},_prepareDragStart:function(e,i,a){var u=this,f=u.el,o=u.options,y=f.ownerDocument,_;if(a&&!dn&&a.parentNode===f){var C=ka(a);if(Bo=f,dn=a,na=dn.parentNode,id=dn.nextSibling,O0=a,_0=o.group,_i.dragged=dn,ed={target:dn,clientX:(i||e).clientX,clientY:(i||e).clientY},hC=ed.clientX-C.left,fC=ed.clientY-C.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,dn.style["will-change"]="all",_=function(){if(ql("delayEnded",u,{evt:e}),_i.eventCanceled){u._onDrop();return}u._disableDelayedDragEvents(),!sC&&u.nativeDraggable&&(dn.draggable=!0),u._triggerDragStart(e,i),pl({sortable:u,name:"choose",originalEvent:e}),vu(dn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(S){PE(dn,S.trim(),Px)}),Fr(y,"dragover",nd),Fr(y,"mousemove",nd),Fr(y,"touchmove",nd),Fr(y,"mouseup",u._onDrop),Fr(y,"touchend",u._onDrop),Fr(y,"touchcancel",u._onDrop),sC&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dn.draggable=!0),ql("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Yv||gf))){if(_i.eventCanceled){this._onDrop();return}Fr(y,"mouseup",u._disableDelayedDrag),Fr(y,"touchend",u._disableDelayedDrag),Fr(y,"touchcancel",u._disableDelayedDrag),Fr(y,"mousemove",u._delayedDragTouchMoveHandler),Fr(y,"touchmove",u._delayedDragTouchMoveHandler),o.supportPointer&&Fr(y,"pointermove",u._delayedDragTouchMoveHandler),u._dragStartTimer=setTimeout(_,o.delay)}else _()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dn&&Px(dn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;xr(e,"mouseup",this._disableDelayedDrag),xr(e,"touchend",this._disableDelayedDrag),xr(e,"touchcancel",this._disableDelayedDrag),xr(e,"mousemove",this._delayedDragTouchMoveHandler),xr(e,"touchmove",this._delayedDragTouchMoveHandler),xr(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?Fr(document,"pointermove",this._onTouchMove):i?Fr(document,"touchmove",this._onTouchMove):Fr(document,"mousemove",this._onTouchMove):(Fr(dn,"dragend",this),Fr(Bo,"dragstart",this._onDragStart));try{document.selection?N0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(Am=!1,Bo&&dn){ql("dragStarted",this,{evt:i}),this.nativeDraggable&&Fr(document,"dragover",HH);var a=this.options;!e&&vu(dn,a.dragClass,!1),vu(dn,a.ghostClass,!0),_i.active=this,e&&this._appendGhost(),pl({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(kc){this._lastX=kc.clientX,this._lastY=kc.clientY,NE();for(var e=document.elementFromPoint(kc.clientX,kc.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(kc.clientX,kc.clientY),e!==i);)i=e;if(dn.parentNode[xu]._isOutsideThisEl(e),i)do{if(i[xu]){var a=void 0;if(a=i[xu]._onDragOver({clientX:kc.clientX,clientY:kc.clientY,target:e,rootEl:i}),a&&!this.options.dragoverBubble)break}e=i}while(i=i.parentNode);VE()}},_onTouchMove:function(e){if(ed){var i=this.options,a=i.fallbackTolerance,u=i.fallbackOffset,f=e.touches?e.touches[0]:e,o=Fi&&zm(Fi,!0),y=Fi&&o&&o.a,_=Fi&&o&&o.d,C=b0&&Us&&cC(Us),S=(f.clientX-ed.clientX+u.x)/(y||1)+(C?C[0]-kx[0]:0)/(y||1),k=(f.clientY-ed.clientY+u.y)/(_||1)+(C?C[1]-kx[1]:0)/(_||1);if(!_i.active&&!Am){if(a&&Math.max(Math.abs(f.clientX-this._lastX),Math.abs(f.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(Fi){o?(o.e+=S-(Sx||0),o.f+=k-(Tx||0)):o={a:1,b:0,c:0,d:1,e:S,f:k};var P="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");yi(Fi,"webkitTransform",P),yi(Fi,"mozTransform",P),yi(Fi,"msTransform",P),yi(Fi,"transform",P),Sx=S,Tx=k,kc=f}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Fi){var e=this.options.fallbackOnBody?document.body:Bo,i=ka(dn,!0,b0,!0,e),a=this.options;if(b0){for(Us=e;yi(Us,"position")==="static"&&yi(Us,"transform")==="none"&&Us!==document;)Us=Us.parentNode;Us!==document.body&&Us!==document.documentElement?(Us===document&&(Us=gh()),i.top+=Us.scrollTop,i.left+=Us.scrollLeft):Us=gh(),kx=cC(Us)}Fi=dn.cloneNode(!0),vu(Fi,a.ghostClass,!1),vu(Fi,a.fallbackClass,!0),vu(Fi,a.dragClass,!0),yi(Fi,"transition",""),yi(Fi,"transform",""),yi(Fi,"box-sizing","border-box"),yi(Fi,"margin",0),yi(Fi,"top",i.top),yi(Fi,"left",i.left),yi(Fi,"width",i.width),yi(Fi,"height",i.height),yi(Fi,"opacity","0.8"),yi(Fi,"position",b0?"absolute":"fixed"),yi(Fi,"zIndex","100000"),yi(Fi,"pointerEvents","none"),_i.ghost=Fi,e.appendChild(Fi),yi(Fi,"transform-origin",hC/parseInt(Fi.style.width)*100+"% "+fC/parseInt(Fi.style.height)*100+"%")}},_onDragStart:function(e,i){var a=this,u=e.dataTransfer,f=a.options;if(ql("dragStart",this,{evt:e}),_i.eventCanceled){this._onDrop();return}ql("setupClone",this),_i.eventCanceled||(Zo=RE(dn),Zo.removeAttribute("id"),Zo.draggable=!1,Zo.style["will-change"]="",this._hideClone(),vu(Zo,this.options.chosenClass,!1),_i.clone=Zo),a.cloneId=N0(function(){ql("clone",a),!_i.eventCanceled&&(a.options.removeCloneOnHide||Bo.insertBefore(Zo,dn),a._hideClone(),pl({sortable:a,name:"clone"}))}),!i&&vu(dn,f.dragClass,!0),i?(f_=!0,a._loopId=setInterval(a._emulateDragOver,50)):(xr(document,"mouseup",a._onDrop),xr(document,"touchend",a._onDrop),xr(document,"touchcancel",a._onDrop),u&&(u.effectAllowed="move",f.setData&&f.setData.call(a,u,dn)),Fr(document,"drop",a),yi(dn,"transform","translateZ(0)")),Am=!0,a._dragStartId=N0(a._dragStarted.bind(a,i,e)),Fr(document,"selectstart",a),Zg=!0,pv&&yi(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,a=e.target,u,f,o,y=this.options,_=y.group,C=_i.active,S=_0===_,k=y.sort,P=ys||C,B,G=this,j=!1;if(mb)return;function X(je,Pi){ql(je,G,_h({evt:e,isOwner:S,axis:B?"vertical":"horizontal",revert:o,dragRect:u,targetRect:f,canSort:k,fromSortable:P,target:a,completed:J,onMove:function(Qn,un){return A0(Bo,i,dn,u,Qn,ka(Qn),e,un)},changed:nt},Pi))}function pt(){X("dragOverAnimationCapture"),G.captureAnimationState(),G!==P&&P.captureAnimationState()}function J(je){return X("dragOverCompleted",{insertion:je}),je&&(S?C._hideClone():C._showClone(G),G!==P&&(vu(dn,ys?ys.options.ghostClass:C.options.ghostClass,!1),vu(dn,y.ghostClass,!0)),ys!==G&&G!==_i.active?ys=G:G===_i.active&&ys&&(ys=null),P===G&&(G._ignoreWhileAnimating=a),G.animateAll(function(){X("dragOverAnimationComplete"),G._ignoreWhileAnimating=null}),G!==P&&(P.animateAll(),P._ignoreWhileAnimating=null)),(a===dn&&!dn.animated||a===i&&!a.animated)&&(ym=null),!y.dragoverBubble&&!e.rootEl&&a!==document&&(dn.parentNode[xu]._isOutsideThisEl(e.target),!je&&nd(e)),!y.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),j=!0}function nt(){yu=tc(dn),np=tc(dn,y.draggable),pl({sortable:G,name:"change",toEl:i,newIndex:yu,newDraggableIndex:np,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=Lc(a,y.draggable,i,!0),X("dragOver"),_i.eventCanceled)return j;if(dn.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||G._ignoreWhileAnimating===a)return J(!1);if(f_=!1,C&&!y.disabled&&(S?k||(o=na!==Bo):ys===this||(this.lastPutMode=_0.checkPull(this,C,dn,e))&&_.checkPut(this,C,dn,e))){if(B=this._getDirection(e,a)==="vertical",u=ka(dn),X("dragOverValid"),_i.eventCanceled)return j;if(o)return na=Bo,pt(),this._hideClone(),X("revert"),_i.eventCanceled||(id?Bo.insertBefore(dn,id):Bo.appendChild(dn)),J(!0);var ft=OA(i,y.draggable);if(!ft||ZH(e,B,this)&&!ft.animated){if(ft===dn)return J(!1);if(ft&&i===e.target&&(a=ft),a&&(f=ka(a)),A0(Bo,i,dn,u,a,f,e,!!a)!==!1)return pt(),ft&&ft.nextSibling?i.insertBefore(dn,ft.nextSibling):i.appendChild(dn),na=i,nt(),J(!0)}else if(ft&&WH(e,B,this)){var Lt=Gm(i,0,y,!0);if(Lt===dn)return J(!1);if(a=Lt,f=ka(a),A0(Bo,i,dn,u,a,f,e,!1)!==!1)return pt(),i.insertBefore(dn,Lt),na=i,nt(),J(!0)}else if(a.parentNode===i){f=ka(a);var xt=0,Mt,Ht=dn.parentNode!==i,jt=!UH(dn.animated&&dn.toRect||u,a.animated&&a.toRect||f,B),Qt=B?"top":"left",Bt=uC(a,"top","top")||uC(dn,"top","top"),Ft=Bt?Bt.scrollTop:void 0;ym!==a&&(Mt=f[Qt],vv=!1,x0=!jt&&y.invertSwap||Ht),xt=$H(e,a,f,B,jt?1:y.swapThreshold,y.invertedSwapThreshold==null?y.swapThreshold:y.invertedSwapThreshold,x0,ym===a);var Ot;if(xt!==0){var de=tc(dn);do de-=xt,Ot=na.children[de];while(Ot&&(yi(Ot,"display")==="none"||Ot===Fi))}if(xt===0||Ot===a)return J(!1);ym=a,gv=xt;var An=a.nextElementSibling,_e=!1;_e=xt===1;var Ge=A0(Bo,i,dn,u,a,f,e,_e);if(Ge!==!1)return(Ge===1||Ge===-1)&&(_e=Ge===1),mb=!0,setTimeout(qH,30),pt(),_e&&!An?i.appendChild(dn):a.parentNode.insertBefore(dn,_e?An:a),Bt&&DE(Bt,0,Ft-Bt.scrollTop),na=dn.parentNode,Mt!==void 0&&!x0&&(F0=Math.abs(Mt-ka(a)[Qt])),nt(),J(!0)}if(i.contains(dn))return J(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){xr(document,"mousemove",this._onTouchMove),xr(document,"touchmove",this._onTouchMove),xr(document,"pointermove",this._onTouchMove),xr(document,"dragover",nd),xr(document,"mousemove",nd),xr(document,"touchmove",nd)},_offUpEvents:function(){var e=this.el.ownerDocument;xr(e,"mouseup",this._onDrop),xr(e,"touchend",this._onDrop),xr(e,"pointerup",this._onDrop),xr(e,"touchcancel",this._onDrop),xr(document,"selectstart",this)},_onDrop:function(e){var i=this.el,a=this.options;if(yu=tc(dn),np=tc(dn,a.draggable),ql("drop",this,{evt:e}),na=dn&&dn.parentNode,yu=tc(dn),np=tc(dn,a.draggable),_i.eventCanceled){this._nulling();return}Am=!1,x0=!1,vv=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),gb(this.cloneId),gb(this._dragStartId),this.nativeDraggable&&(xr(document,"drop",this),xr(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),pv&&yi(document.body,"user-select",""),yi(dn,"transform",""),e&&(Zg&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),Fi&&Fi.parentNode&&Fi.parentNode.removeChild(Fi),(Bo===na||ys&&ys.lastPutMode!=="clone")&&Zo&&Zo.parentNode&&Zo.parentNode.removeChild(Zo),dn&&(this.nativeDraggable&&xr(dn,"dragend",this),Px(dn),dn.style["will-change"]="",Zg&&!Am&&vu(dn,ys?ys.options.ghostClass:this.options.ghostClass,!1),vu(dn,this.options.chosenClass,!1),pl({sortable:this,name:"unchoose",toEl:na,newIndex:null,newDraggableIndex:null,originalEvent:e}),Bo!==na?(yu>=0&&(pl({rootEl:na,name:"add",toEl:na,fromEl:Bo,originalEvent:e}),pl({sortable:this,name:"remove",toEl:na,originalEvent:e}),pl({rootEl:na,name:"sort",toEl:na,fromEl:Bo,originalEvent:e}),pl({sortable:this,name:"sort",toEl:na,originalEvent:e})),ys&&ys.save()):yu!==Em&&yu>=0&&(pl({sortable:this,name:"update",toEl:na,originalEvent:e}),pl({sortable:this,name:"sort",toEl:na,originalEvent:e})),_i.active&&((yu==null||yu===-1)&&(yu=Em,np=mv),pl({sortable:this,name:"end",toEl:na,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ql("nulling",this),Bo=dn=na=Fi=id=Zo=O0=rp=ed=kc=Zg=yu=np=Em=mv=ym=gv=ys=_0=_i.dragged=_i.ghost=_i.clone=_i.active=null,d_.forEach(function(e){e.checked=!0}),d_.length=Sx=Tx=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dn&&(this._onDragOver(e),GH(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,a=this.el.children,u=0,f=a.length,o=this.options;u<f;u++)i=a[u],Lc(i,o.draggable,this.el,!1)&&e.push(i.getAttribute(o.dataIdAttr)||XH(i));return e},sort:function(e,i){var a={},u=this.el;this.toArray().forEach(function(f,o){var y=u.children[o];Lc(y,this.options.draggable,u,!1)&&(a[f]=y)},this),i&&this.captureAnimationState(),e.forEach(function(f){a[f]&&(u.removeChild(a[f]),u.appendChild(a[f]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return Lc(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var a=this.options;if(i===void 0)return a[e];var u=Xv.modifyOption(this,e,i);typeof u<"u"?a[e]=u:a[e]=i,e==="group"&&FE(a)},destroy:function(){ql("destroy",this);var e=this.el;e[xu]=null,xr(e,"mousedown",this._onTapStart),xr(e,"touchstart",this._onTapStart),xr(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(xr(e,"dragover",this),xr(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),p_.splice(p_.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!rp){if(ql("hideClone",this),_i.eventCanceled)return;yi(Zo,"display","none"),this.options.removeCloneOnHide&&Zo.parentNode&&Zo.parentNode.removeChild(Zo),rp=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(rp){if(ql("showClone",this),_i.eventCanceled)return;dn.parentNode==Bo&&!this.options.group.revertClone?Bo.insertBefore(Zo,dn):id?Bo.insertBefore(Zo,id):Bo.appendChild(Zo),this.options.group.revertClone&&this.animate(dn,Zo),yi(Zo,"display",""),rp=!1}}};function GH(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function A0(t,e,i,a,u,f,o,y){var _,C=t[xu],S=C.options.onMove,k;return window.CustomEvent&&!gf&&!Yv?_=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent("move",!0,!0)),_.to=e,_.from=t,_.dragged=i,_.draggedRect=a,_.related=u||e,_.relatedRect=f||ka(e),_.willInsertAfter=y,_.originalEvent=o,t.dispatchEvent(_),S&&(k=S.call(C,_,o)),k}function Px(t){t.draggable=!1}function qH(){mb=!1}function WH(t,e,i){var a=ka(Gm(i.el,0,i.options,!0)),u=zE(i.el,i.options,Fi),f=10;return e?t.clientX<u.left-f||t.clientY<a.top&&t.clientX<a.right:t.clientY<u.top-f||t.clientY<a.bottom&&t.clientX<a.left}function ZH(t,e,i){var a=ka(OA(i.el,i.options.draggable)),u=zE(i.el,i.options,Fi),f=10;return e?t.clientX>u.right+f||t.clientY>a.bottom&&t.clientX>a.left:t.clientY>u.bottom+f||t.clientX>a.right&&t.clientY>a.top}function $H(t,e,i,a,u,f,o,y){var _=a?t.clientY:t.clientX,C=a?i.height:i.width,S=a?i.top:i.left,k=a?i.bottom:i.right,P=!1;if(!o){if(y&&F0<C*u){if(!vv&&(gv===1?_>S+C*f/2:_<k-C*f/2)&&(vv=!0),vv)P=!0;else if(gv===1?_<S+F0:_>k-F0)return-gv}else if(_>S+C*(1-u)/2&&_<k-C*(1-u)/2)return YH(e)}return P=P||o,P&&(_<S+C*f/2||_>k-C*f/2)?_>S+C/2?1:-1:0}function YH(t){return tc(dn)<tc(t)?1:-1}function XH(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,a=0;i--;)a+=e.charCodeAt(i);return a.toString(36)}function KH(t){d_.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var a=e[i];a.checked&&d_.push(a)}}function N0(t){return setTimeout(t,0)}function gb(t){return clearTimeout(t)}J_&&Fr(document,"touchmove",function(t){(_i.active||Am)&&t.cancelable&&t.preventDefault()});_i.utils={on:Fr,off:xr,css:yi,find:PE,is:function(e,i){return!!Lc(e,i,e,!1)},extend:DH,throttle:LE,closest:Lc,toggleClass:vu,clone:RE,index:tc,nextTick:N0,cancelNextTick:gb,detectDirection:OE,getChild:Gm};_i.get=function(t){return t[xu]};_i.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(_i.utils=_h(_h({},_i.utils),a.utils)),Xv.mount(a)})};_i.create=function(t,e){return new _i(t,e)};_i.version=kH;var Ta=[],$g,vb,yb=!1,Lx,Dx,m_,Yg;function QH(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var a=i.originalEvent;this.sortable.nativeDraggable?Fr(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Fr(document,"pointermove",this._handleFallbackAutoScroll):a.touches?Fr(document,"touchmove",this._handleFallbackAutoScroll):Fr(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var a=i.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?xr(document,"dragover",this._handleAutoScroll):(xr(document,"pointermove",this._handleFallbackAutoScroll),xr(document,"touchmove",this._handleFallbackAutoScroll),xr(document,"mousemove",this._handleFallbackAutoScroll)),dC(),V0(),RH()},nulling:function(){m_=vb=$g=yb=Yg=Lx=Dx=null,Ta.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,a){var u=this,f=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,y=document.elementFromPoint(f,o);if(m_=i,a||this.options.forceAutoScrollFallback||Yv||gf||pv){Rx(i,this.options,y,a);var _=sp(y,!0);yb&&(!Yg||f!==Lx||o!==Dx)&&(Yg&&dC(),Yg=setInterval(function(){var C=sp(document.elementFromPoint(f,o),!0);C!==_&&(_=C,V0()),Rx(i,u.options,C,a)},10),Lx=f,Dx=o)}else{if(!this.options.bubbleScroll||sp(y,!0)===gh()){V0();return}Rx(i,this.options,sp(y,!1),!1)}}},cf(t,{pluginName:"scroll",initializeByDefault:!0})}function V0(){Ta.forEach(function(t){clearInterval(t.pid)}),Ta=[]}function dC(){clearInterval(Yg)}var Rx=LE(function(t,e,i,a){if(e.scroll){var u=(t.touches?t.touches[0]:t).clientX,f=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,y=e.scrollSpeed,_=gh(),C=!1,S;vb!==i&&(vb=i,V0(),$g=e.scroll,S=e.scrollFn,$g===!0&&($g=sp(i,!0)));var k=0,P=$g;do{var B=P,G=ka(B),j=G.top,X=G.bottom,pt=G.left,J=G.right,nt=G.width,ft=G.height,Lt=void 0,xt=void 0,Mt=B.scrollWidth,Ht=B.scrollHeight,jt=yi(B),Qt=B.scrollLeft,Bt=B.scrollTop;B===_?(Lt=nt<Mt&&(jt.overflowX==="auto"||jt.overflowX==="scroll"||jt.overflowX==="visible"),xt=ft<Ht&&(jt.overflowY==="auto"||jt.overflowY==="scroll"||jt.overflowY==="visible")):(Lt=nt<Mt&&(jt.overflowX==="auto"||jt.overflowX==="scroll"),xt=ft<Ht&&(jt.overflowY==="auto"||jt.overflowY==="scroll"));var Ft=Lt&&(Math.abs(J-u)<=o&&Qt+nt<Mt)-(Math.abs(pt-u)<=o&&!!Qt),Ot=xt&&(Math.abs(X-f)<=o&&Bt+ft<Ht)-(Math.abs(j-f)<=o&&!!Bt);if(!Ta[k])for(var de=0;de<=k;de++)Ta[de]||(Ta[de]={});(Ta[k].vx!=Ft||Ta[k].vy!=Ot||Ta[k].el!==B)&&(Ta[k].el=B,Ta[k].vx=Ft,Ta[k].vy=Ot,clearInterval(Ta[k].pid),(Ft!=0||Ot!=0)&&(C=!0,Ta[k].pid=setInterval((function(){a&&this.layer===0&&_i.active._onTouchMove(m_);var An=Ta[this.layer].vy?Ta[this.layer].vy*y:0,_e=Ta[this.layer].vx?Ta[this.layer].vx*y:0;typeof S=="function"&&S.call(_i.dragged.parentNode[xu],_e,An,t,m_,Ta[this.layer].el)!=="continue"||DE(Ta[this.layer].el,_e,An)}).bind({layer:k}),24))),k++}while(e.bubbleScroll&&P!==_&&(P=sp(P,!1)));yb=C}},30),UE=function(e){var i=e.originalEvent,a=e.putSortable,u=e.dragEl,f=e.activeSortable,o=e.dispatchSortableEvent,y=e.hideGhostForTarget,_=e.unhideGhostForTarget;if(i){var C=a||f;y();var S=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,k=document.elementFromPoint(S.clientX,S.clientY);_(),C&&!C.el.contains(k)&&(o("spill"),this.onSpill({dragEl:u,putSortable:a}))}};function FA(){}FA.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var u=Gm(this.sortable.el,this.startIndex,this.options);u?this.sortable.el.insertBefore(i,u):this.sortable.el.appendChild(i),this.sortable.animateAll(),a&&a.animateAll()},drop:UE};cf(FA,{pluginName:"revertOnSpill"});function NA(){}NA.prototype={onSpill:function(e){var i=e.dragEl,a=e.putSortable,u=a||this.sortable;u.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),u.animateAll()},drop:UE};cf(NA,{pluginName:"removeOnSpill"});_i.mount(new QH);_i.mount(NA,FA);function jE(t,e,i={}){let a=lf();const u=Ke(e.get()||[]);i&&i.group&&(a=typeof i.group=="string"?i.group:i.group.name);let f;const{document:o=yA,onAdd:y,onRemove:_,...C}=i,S={store:{get(){return Vc(e.get()).map(X=>X.id)},set(j){const pt=j.toArray().map(J=>U0.value[a][J]);e.set(pt),u.value=pt}},onAdd(j){f==null||f.save(),y&&y(j)},onRemove(j){f==null||f.save(),_&&_(j)}},k=()=>{const j=Vc(e.get());u.value=j,mC(j,a);const X=typeof t=="string"?o==null?void 0:o.getElementById(t):op(t);!X||f!==void 0||(f=new _i(X,{...S,...C}))},P=()=>{f==null||f.destroy(),f=void 0},B=(j,X)=>{if(X!==void 0)f==null||f.option(j,X);else return f==null?void 0:f.option(j)},G=(j=[])=>{mC(j,a),u.value=j};return uM(k),_d(P),{stop:P,start:k,option:B,items:u,setCache:G}}const U0=Ke({});function mC(t,e){U0.value[e]||(U0.value[e]={}),t.forEach(i=>U0.value[e][i.id]=i)}const JH={class:"draggable-group__info"},tG=["title"],eG={class:"draggable-group__action"},nG={key:0,class:"draggable-group__divider"},iG={key:0,class:"draggable-group__nodata"},rG=["data-id"],oG=di({__name:"draggable-list-group",props:{layerGroup:{type:Object,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean,checkItemCanPutInChildren:{type:Function},currentItemDrag:{type:Object}},emits:["click:delete","click:un-group","click:select","drag-done","update:layer-group","update:currentItemDrag"],setup(t,{emit:e}){const i=t,a=e;function u(){a("click:select")}const f={group:{open:zk,close:Rk,unGroup:c4,delete:Wm,show:Zb,hide:$b}},o=Ke(!0);function y(){o.value=!o.value}function _(){a("click:delete")}function C(){a("click:un-group")}const S=Ke(null),k=Ke(i.layerGroup.children.slice());jE(S,{get(){return k.value},set(B){k.value=B,P()}},{handle:".draggable-handle",group:{name:"layers",pull:!0,put:i.checkItemCanPutInChildren},onChoose(B){a("update:currentItemDrag",B.oldIndex!=null?k.value[B.oldIndex]:void 0)}});function P(){sc(()=>{a("update:layer-group",{...i.layerGroup,children:k.value}),a("drag-done")})}return(B,G)=>(ut(),Se(db,{disabledDrag:t.disabledDrag,class:"draggable-group__item"},{default:Xt(()=>[At("div",JH,[At("span",{class:"draggable-group__title",title:t.layerGroup.name},vn(t.layerGroup.name),9,tG),At("div",eG,[t.layerGroup.children&&t.layerGroup.children.length>0?(ut(),Yt("span",{key:0,onClick:G[0]||(G[0]=j=>C())},[Pt(W(Rn),{size:"14",type:"mdi",path:f.group.unGroup},null,8,["path"])])):sn("",!0),At("span",{onClick:G[1]||(G[1]=j=>_())},[Pt(W(Rn),{size:"14",type:"mdi",path:f.group.delete},null,8,["path"])]),At("span",{onClick:G[2]||(G[2]=j=>y())},[o.value?(ut(),Se(W(Rn),{key:0,size:"14",type:"mdi",path:f.group.close},null,8,["path"])):(ut(),Se(W(Rn),{key:1,size:"14",type:"mdi",path:f.group.open},null,8,["path"]))])])]),o.value?(ut(),Yt("div",nG)):sn("",!0),At("div",{class:No({"draggable-group__children-container":o.value})},[!k.value||k.value.length<1?(ut(),Yt("div",iG," Drag layer inside this group ")):sn("",!0),At("div",{class:"draggable-group__children",ref_key:"child",ref:S},[(ut(!0),Yt(Ai,null,Fo(k.value,j=>(ut(),Yt("div",{class:"draggable__item",key:j.id,"data-id":j.id},[Pt(db,{disabledDrag:t.disabledDrag,isSelected:t.selected.includes(j.id),item:j},{default:Xt(()=>[Hn(B.$slots,"item",{group:t.layerGroup,isSelected:t.selected.includes(j.id),item:j,toggleSelect:u},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"])],8,rG))),128))],512)],2)]),_:3},8,["disabledDrag"]))}}),aG=Fn(oG,[["__scopeId","data-v-69b2be67"]]),sG=["data-id"],lG=di({__name:"draggable-list",props:{items:{type:Array,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean},emits:["update:selected","click-group:remove","click-drag:done","update:items"],setup(t,{expose:e,emit:i}){const a=t,u=i,f=Ke([]),o=Ke({}),y=Ke(void 0),_=De({get(){return a.selected},set(Mt){u("update:selected",Mt)}}),C=Ke(null),{setCache:S,items:k}=jE(C,{get(){return f.value},set(Mt){f.value=Mt}},{handle:".draggable-handle",group:{name:"layers",pull:!0,put:!0},onChoose(Mt){y.value=Mt.oldIndex!=null?f.value[Mt.oldIndex]:void 0},onEnd(){nt()}});Xl(()=>{P(a.items)});function P(Mt=[]){(Mt==null||Mt.length===0)&&(Mt=a.items),f.value=B(Mt),S(Mt)}function B(Mt){let Ht=[];if(!Mt||Mt.length==0)return Ht;let jt={};return Mt.forEach(Qt=>{if(!Qt.group){Ht.push(Qt);return}jt[Qt.group.id]||(jt[Qt.group.id]=xt(Qt.group),Ht.push(jt[Qt.group.id])),jt[Qt.group.id].children.push(Qt)}),Ht}function G(Mt){return Mt.reduce((Ht,jt)=>(jt.isGroup?jt.children.length>0&&Ht.push(...jt.children.map(Qt=>(Qt.group={id:jt.id,name:jt.name},Qt))):(jt.group=void 0,Ht.push(jt)),Ht),[])}function j(Mt){a.disabledSelect||(_.value.includes(Mt.id)?_.value=_.value.filter(Ht=>Ht!=Mt.id):(_.value.push(Mt.id),o.value[Mt.id]=Mt))}function X(Mt){let Ht=[];_.value&&_.value.length>0&&(f.value=f.value.filter(Qt=>!_.value.includes(Qt.id)).map(Qt=>("isGroup"in Qt&&Qt.isGroup&&(Qt.children=Qt.children.filter(Bt=>!_.value.includes(Bt.id))),Qt)),Ht=_.value.map(Qt=>o.value[Qt]),_.value=[],o.value={});let jt=xt({name:Mt||"New Group",children:Ht});f.value.unshift(jt),jt.children.length>0&&nt(),S(f.value)}function pt(Mt,Ht){f.value.splice(Ht,1),Mt.children.length>0&&f.value.splice(Ht,0,...Mt.children)}function J(Mt,Ht){f.value[Ht]={...f.value[Ht],...Mt}}function nt(){sc(()=>{y.value=void 0,u("update:items",G(f.value)),u("click-drag:done")})}function ft(){return!(y.value&&y.value.isGroup)}function Lt(Mt,Ht){f.value.splice(Ht,1),u("click-group:remove",Mt)}function xt(Mt){let Ht={id:`group-${new Date().getTime()}`,name:"New Group",isGroup:!0,show:!0,children:[]};return Ht=Object.assign({},Ht,Mt),Ht}return e({update:P,addNewGroup:X}),(Mt,Ht)=>(ut(),Yt("div",{ref_key:"el",ref:C,class:"draggable-group-container"},[(ut(!0),Yt(Ai,null,Fo(W(k),(jt,Qt)=>(ut(),Yt("div",{key:jt.id,"data-id":jt.id,class:"draggable__item item"},[jt.isGroup?(ut(),Se(aG,{key:jt.id,"layer-group":jt,"onUpdate:layerGroup":Bt=>J(Bt,Qt),disabledDrag:t.disabledDrag,"onClick:delete":Bt=>Lt(jt,Qt),"onClick:unGroup":Bt=>pt(jt,Qt),checkItemCanPutInChildren:ft,onDragDone:nt,"onClick:select":j,currentItemDrag:y.value,"onUpdate:currentItemDrag":Ht[0]||(Ht[0]=Bt=>y.value=Bt)},{item:Xt(Bt=>[Hn(Mt.$slots,"item",er({ref_for:!0},Bt),void 0,!0)]),_:2},1032,["layer-group","onUpdate:layerGroup","disabledDrag","onClick:delete","onClick:unGroup","currentItemDrag"])):(ut(),Se(db,{disabledDrag:t.disabledDrag,isSelected:_.value.includes(jt.id),item:jt,key:jt.id},{default:Xt(()=>[Hn(Mt.$slots,"item",{isSelected:_.value.includes(jt.id),item:jt,index:Qt,toggleSelect:j},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))],8,sG))),128))],512))}}),uG=Fn(lG,[["__scopeId","data-v-18ba6f9d"]]),cG={name:"VueSlider",props:{modelValue:{},min:{default:0},max:{default:100},step:{default:1},disabled:Boolean},computed:{backgroundSize(){return(this.modelValue-this.min)*100/(this.max-this.min)+"% 100%"},form:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}},hG=["value","min","max","step","disabled"];function fG(t,e,i,a,u,f){return ut(),Yt("input",{value:f.form,onInput:e[0]||(e[0]=({target:o})=>f.form=parseFloat(o.value)),type:"range",min:i.min,max:i.max,step:i.step,style:Gr({backgroundSize:f.backgroundSize}),disabled:i.disabled},null,44,hG)}const pG=Fn(cG,[["render",fG],["__scopeId","data-v-1f3fc5c0"]]),dG={__name:"layer-item-icon",props:{loading:Boolean,item:{require:!0,type:Object}},setup(t){const e={loading:Yb,layer:L_};return(i,a)=>(ut(),Yt("div",null,[t.loading?(ut(),Se(W(Rn),{key:0,size:"14",type:"mdi",path:e.loading,class:"spin"},null,8,["path"])):(ut(),Se(W(Rn),{key:1,size:"14",type:"mdi",path:e.layer},null,8,["path"]))]))}},mG=["title"],gG=di({__name:"menu-item",props:{item:{},data:{},mapId:{}},setup(t){const e=t,i=De(()=>typeof e.item.icon=="string");return(a,u)=>(ut(),Yt("button",er(a.$attrs,{class:"menu-item",title:a.item.name}),[a.item.icon?(ut(),Yt(Ai,{key:0},[i.value?(ut(),Se(W(Rn),{key:1,size:"14",type:"mdi",path:a.item.icon},null,8,["path"])):(ut(),Se(ss(a.item.icon()),{key:0,item:a.data,mapId:a.mapId},null,8,["item","mapId"]))],64)):sn("",!0)],16,mG))}}),vG={class:"menu-divider"},yG=di({__name:"menu-divider",props:{item:{},data:{}},setup(t){return(e,i)=>(ut(),Yt("div",vG))}}),gC=di({__name:"index",props:{item:{},data:{},mapId:{}},setup(t){const e=t,i=De(()=>{switch(e.item.type){case"divider":return yG}return gG});return(a,u)=>(ut(),Se(ss(i.value),er({item:a.item,data:a.data},a.$attrs,{mapId:a.mapId}),null,16,["item","data","mapId"]))}}),HE=t=>(xh("data-v-61ef3e76"),t=t(),bh(),t),_G={class:"layer-item-container"},xG={class:"layer-item__info"},bG=["title"],AG=HE(()=>At("div",{class:"v-spacer"},null,-1)),wG={class:"layer-item__title-action"},CG=["disabled"],IG=["disabled"],MG={key:0,class:"layer-item__action"},EG={key:0,class:"layer-item__opacity"},SG=HE(()=>At("div",{class:"v-spacer"},null,-1)),TG=["id"],kG={key:1},PG=di({__name:"layer-item",props:{item:{},mapId:{}},emits:["update:item","click","click:remove","click:action","click:edit","click:content-menu"],setup(t,{emit:e}){const i=t,a=e,u=De(()=>{var ft;return i.item&&((ft=ml(i.item))==null?void 0:ft.getView("legend"))}),f=Ke(!1),o=Bv(),y={menu:Wb,loading:Yb,layer:L_,flyTo:Nv,show:Zb,hide:$b,delete:Wm,edit:i4,legendOpen:Jk,legendClose:nM},_=De(()=>i.item.metadata&&i.item.metadata.loading),C=De({get(){return i.item.opacity},set(ft){let Lt=i.item;Lt.opacity=ft,a("update:item",Lt)}}),S=()=>{a("click:remove",i.item)};function k(){var ft;if(f.value=!f.value,f.value){const Lt=(ft=ml(i.item))==null?void 0:ft.getView("legend").config;if(!Lt)return;Lt.fields=Lt.fields.map(xt=>({component:Pb(xt.component),option:xt.option})),o.value=Lt}}const P=De(()=>{var ft;return i.item?((ft=ml(i.item).getView("action"))==null?void 0:ft.menus)||[]:[]}),B=De(()=>P.value.filter(ft=>ft.location=="extra").sort((ft,Lt)=>(ft.order||0)-(Lt.order||0))),G=De(()=>P.value.filter(ft=>ft.location=="menu").sort((ft,Lt)=>(ft.order||0)-(Lt.order||0))),j=De(()=>!i.item.config.disabled_opacity||J.value.length>0);function X(ft){a("click:content-menu",{event:ft,actions:G.value,item:i.item})}function pt(ft){a("click:action",{action:ft,item:i.item})}const J=De(()=>P.value.filter(ft=>ft.location=="bottom").sort((ft,Lt)=>(ft.order||0)-(Lt.order||0))),nt=De(()=>`layer-item-${i.item.id}-bottom`);return(ft,Lt)=>(ut(),Yt("div",_G,[At("div",xG,[Pt(dG,{class:"layer-item__icon",loading:_.value,item:{item:ft.item}},null,8,["loading","item"]),At("span",{class:"layer-item__title",title:ft.item.name,onClick:Lt[0]||(Lt[0]=xt=>a("click",ft.item))},[At("span",null,vn(ft.item.name),1)],8,bG),AG,At("div",wG,[Hn(ft.$slots,"pre-btn",{loading:_.value},void 0,!0),(ut(!0),Yt(Ai,null,Fo(B.value,(xt,Mt)=>(ut(),Se(gC,{key:Mt,class:"layer-item__button",item:xt,data:ft.item,disabled:_.value,mapId:ft.mapId,onClick:Ht=>pt(xt)},null,8,["item","data","disabled","mapId","onClick"]))),128)),ft.item.config.disable_delete?sn("",!0):(ut(),Yt("button",{key:0,class:"layer-item__button",disabled:_.value,onClick:so(S,["stop"])},[Pt(W(Rn),{size:"14",type:"mdi",path:y.delete},null,8,["path"])],8,CG)),Hn(ft.$slots,"extra-btn",{loading:_.value},void 0,!0),G.value.length>0?(ut(),Yt("button",{key:1,class:"layer-item__button",disabled:_.value,onClick:so(X,["prevent","stop"])},[Pt(W(Rn),{size:"14",type:"mdi",path:y.menu},null,8,["path"])],8,IG)):sn("",!0),!j.value&&u.value?(ut(),Yt("button",{key:2,class:"layer-item__button",onClick:so(k,["stop"])},[Pt(W(Rn),{size:"14",type:"mdi",path:f.value?y.legendClose:y.legendOpen},null,8,["path"])])):sn("",!0)])]),j.value?(ut(),Yt("div",MG,[ft.item.config.disabled_opacity?sn("",!0):(ut(),Yt("div",EG,[Pt(pG,{modelValue:C.value,"onUpdate:modelValue":Lt[1]||(Lt[1]=xt=>C.value=xt),modelModifiers:{number:!0},max:"1",step:"0.01",disabled:_.value},null,8,["modelValue","disabled"])])),SG,(ut(!0),Yt(Ai,null,Fo(J.value,(xt,Mt)=>(ut(),Se(gC,{key:Mt,class:"layer-item__button",item:xt,data:ft.item,disabled:_.value,mapId:ft.mapId,onClick:Ht=>pt(xt)},null,8,["item","data","disabled","mapId","onClick"]))),128)),u.value?(ut(),Yt("button",{key:1,class:"layer-item__button",onClick:so(k,["stop"])},[Pt(W(Rn),{size:"14",type:"mdi",path:f.value?y.legendClose:y.legendOpen},null,8,["path"])])):sn("",!0)])):sn("",!0),At("div",{id:nt.value},null,8,TG),f.value&&o.value?(ut(),Yt("div",kG,[(ut(!0),Yt(Ai,null,Fo(o.value.fields,(xt,Mt)=>(ut(),Se(ss(xt.component),{value:xt.option,key:Mt},null,8,["value"]))),128))])):sn("",!0)]))}}),LG=Fn(PG,[["__scopeId","data-v-61ef3e76"]]),DG=t=>(xh("data-v-f13499fd"),t=t(),bh(),t),RG={class:"layer-control-container"},zG={class:"layer-control__header"},BG=DG(()=>At("div",{class:"v-spacer"},null,-1)),OG={class:"layer-control__list"},FG={class:"layer-context-menu"},NG=["onClick"],VG={class:"layer-context-menu__item-icon"},UG=["innerHTML"],jG=di({__name:"LayerList",props:{...Wa,disabledDrag:Boolean,disabled:Boolean},emits:["click:create"],setup(t,{emit:e}){const i=t,a=e,u={icon:L_,menu:Wb,group:{create:eM},deleteAll:Wm,layer:{create:xp}},{callMap:f,mapId:o}=So(i),y=De(()=>Ij(o.value).value);vl(y,()=>{pt(),sc(()=>{X()})},{deep:!0});const _=Ke([]);Xl(()=>{pt(),X()});const C=Ke(void 0),S=Ke([]);function k(){f(Bt=>{let Ft="";_.value.slice().reverse().forEach(async(Ot,de)=>{Ot.index=de;let An=ml(Ot);An&&(An.run("moveLayer",Bt,Ft),Ft=await An.run("getBeforeId",Bt,Ft))})})}function P(Bt){Bt&&typeof Bt!="string"&&(!Bt||!Bt.children||Bt.children.length===0||Bt.children.forEach(Ft=>{let Ot=ml(Ft);Ot&&Ix(o.value,Ot)}))}function B(Bt){f(Ft=>{let Ot=ml(Bt);Ot&&(Ot.run("toggleShow",Ft,Bt.show),Bt.config.disabled_opacity||Ot.run("setOpacity",Ft,Bt.opacity))})}function G(Bt){Bt&&f(Ft=>{Ft.fitBounds(Bt,{padding:50,duration:10})})}function j(Bt){if(!Bt)return;let Ft=ml(Bt);Ft&&Ix(o.value,Ft)}function X(){C.value&&C.value.update(_.value)}function pt(){_.value&&(_.value=zA(o.value,"list").sort((Bt,Ft)=>Ft.index-Bt.index))}function J(){a("click:create")}function nt(){C.value&&C.value.addNewGroup("")}function ft(){!_.value||_.value.length===0||_.value.forEach(Bt=>{let Ft=ml(Bt);Ft&&Ix(o.value,Ft)})}const Lt=Ke(),xt=yl({items:[],view:void 0});function Mt({event:Bt,item:Ft,actions:Ot}){xt.items=Ot?[...Ot]:[],xt.view=Ft,Lt.value&&Lt.value.open(Bt,Ft)}function Ht(){xt.items=[],xt.view=void 0,Lt.value&&Lt.value.close()}const jt={"to-bound":Bt=>{G(ml(Bt).getView("source").bounds)},"toggle-show":Bt=>{Bt.show=!Bt.show,B(Bt)}};function Qt({action:Bt,item:Ft}){const Ot=Bt;if(!Ot||Ot.type!=="item"||!Ft)return;let de=ml(Ft);if(!de)return;const An=de.getView("action"),_e=An.get(Ot.id);_e.type&&jt[_e.type]?jt[_e.type](Ft,de):An.call(Ot.id,o.value)}return(Bt,Ft)=>(ut(),Yt("div",RG,[At("div",zG,[At("button",{class:"layer-item__button",onClick:Ft[0]||(Ft[0]=so(Ot=>J(),["stop"]))},[Pt(W(Rn),{size:"14",type:"mdi",path:u.layer.create},null,8,["path"])]),BG,At("button",{class:"layer-item__button",onClick:Ft[1]||(Ft[1]=Ot=>nt())},[Pt(W(Rn),{size:"14",type:"mdi",path:u.group.create},null,8,["path"])]),At("button",{class:"layer-item__button",onClick:ft},[Pt(W(Rn),{size:"14",type:"mdi",path:u.deleteAll},null,8,["path"])])]),At("div",OG,[Pt(uG,{ref_key:"groupRef",ref:C,items:_.value,"onUpdate:items":Ft[2]||(Ft[2]=Ot=>_.value=Ot),selected:S.value,"onUpdate:selected":Ft[3]||(Ft[3]=Ot=>S.value=Ot),disabled:t.disabled,disabledDrag:t.disabledDrag,"onClickDrag:done":Ft[4]||(Ft[4]=Ot=>k()),"onClickGroup:remove":P},{item:Xt(({isSelected:Ot,item:de,toggleSelect:An})=>[Hn(Bt.$slots,"item",{item:de,isSelected:Ot,toggleSelect:An},()=>[(ut(),Se(ss(de.component||LG),{item:de,isSelected:Ot,onClick:_e=>An(de),"onUpdate:item":B,"onClick:remove":j,"onClick:contentMenu":Mt,"onClick:action":Qt,mapId:W(o)},null,40,["item","isSelected","onClick","mapId"]))],!0)]),_:3},8,["items","selected","disabled","disabledDrag"])]),Pt(W(mE),{ref_key:"contextMenuRef",ref:Lt},{default:Xt(()=>[At("ul",FG,[(ut(!0),Yt(Ai,null,Fo(xt.items,(Ot,de)=>(ut(),Yt("li",{key:de,onClick:so(An=>{Qt({action:Ot,item:xt.view}),Ht()},["stop"]),class:No(["layer-context-menu__item",[Ot.class,Ot.type==="divider"?"layer-context-menu__divider":""]])},[At("div",VG,[Pt(W(Rn),{size:"14",type:"mdi",path:Ot.icon||W(Bk)},null,8,["path"])]),At("span",{innerHTML:Ot.name},null,8,UG)],10,NG))),128))])]),_:1},512)]))}}),HG=Fn(jG,[["__scopeId","data-v-f13499fd"]]),GG=di({__name:"layer-component",props:{item:{}},setup(t){const e=yd(),i=t,a=Bv([]);function u(o){var C,S;let y=a.value.findIndex(k=>k.id==o.id);if(y<0)return;const _=a.value[y];(C=ml(i.item))==null||C.getView("component").remove({id:_.id}),a.value.splice(y,1),(S=e==null?void 0:e.proxy)==null||S.$forceUpdate()}function f({component:o}){var y;a.value.push({id:o.id,attr:{item:i.item,option:o.option},component:o.component}),(y=e==null?void 0:e.proxy)==null||y.$forceUpdate()}return Xl(()=>{ml(i.item).on("add-component",f)}),Ov(()=>{ml(i.item).off("add-component",f)}),(o,y)=>(ut(!0),Yt(Ai,null,Fo(a.value,_=>(ut(),Se(ss(_.component()),er({key:_.id,ref_for:!0},_.attr,{onClose:C=>u(_)}),null,16,["onClose"]))),128))}}),qG={class:"layer-control__title"},WG={class:"layer-control"},ZG={class:"base-map-card-container"},$G={name:"layer-control"},YG=di({...$G,props:{...Wa,disabledDrag:Boolean,disabled:Boolean},setup(t){const e=t,{mapId:i,moduleContainerProps:a}=So(e),{trans:u,setLocale:f}=ga(i.value);f({map:{"layer-control":{title:"Layer Control","create-btn":"Create Layer",create:{title:"New Layer"},field:{name:"Name",type:"Type",url:"Url",minzoom:"Min zoom",maxzoom:"Max zoom",file:"File",geojson:"Geojson",tiles:"Tiles",bound:{title:"Bound",minx:"Min Longitude",miny:"Min Latitude",maxx:"Max Longitude",maxy:"Max Latitude"}},info:{title:"Info"}}}});const o={icon:L_,menu:Wb,group:{create:eM},deleteAll:Wm,layer:{create:xp}},[y,_]=md(!1),C=De(()=>zA(i.value,"list")),[S,k]=md();function P(){k()}return(B,G)=>(ut(),Se(W(La),Ga(Pa(W(a))),{btn:Xt(()=>[W(y)?sn("",!0):(ut(),Se(W(Ar),{key:0,tooltip:W(u)("map.layer-control.title"),onClick:G[0]||(G[0]=so(j=>W(_)(),["stop"])),active:W(y)},{default:Xt(()=>[Pt(W(Rn),{size:"14",type:"mdi",path:o.icon},null,8,["path"])]),_:1},8,["tooltip","active"]))]),draggable:Xt(j=>[Pt(W(qM),{containerId:j.containerId,show:W(y),"onUpdate:show":G[2]||(G[2]=X=>ra(y)?y.value=X:null)},{title:Xt(()=>[At("span",qG,vn(W(u)("map.layer-control.title")),1)]),default:Xt(()=>[At("div",WG,[Pt(HG,{mapId:W(i),"onClick:create":G[1]||(G[1]=X=>P())},null,8,["mapId"]),At("div",ZG,[Hn(B.$slots,"endList",{mapId:W(i)},void 0,!0)])])]),_:2},1032,["containerId","show"])]),default:Xt(()=>[Pt(AH,{show:W(S),"onUpdate:show":G[3]||(G[3]=j=>ra(S)?S.value=j:null)},null,8,["show"]),(ut(!0),Yt(Ai,null,Fo(C.value,j=>(ut(),Se(GG,{key:j.id,item:j},null,8,["item"]))),128)),Hn(B.$slots,"default",{},void 0,!0)]),_:3},16))}}),XG=Fn(YG,[["__scopeId","data-v-d5e7348d"]]);var GE={exports:{}};(function(t,e){(function(i,a){a()})(bs,function(){function i(C,S){return typeof S>"u"?S={autoBom:!1}:typeof S!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),S={autoBom:!S}),S.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(C.type)?new Blob(["\uFEFF",C],{type:C.type}):C}function a(C,S,k){var P=new XMLHttpRequest;P.open("GET",C),P.responseType="blob",P.onload=function(){_(P.response,S,k)},P.onerror=function(){console.error("could not download file")},P.send()}function u(C){var S=new XMLHttpRequest;S.open("HEAD",C,!1);try{S.send()}catch{}return 200<=S.status&&299>=S.status}function f(C){try{C.dispatchEvent(new MouseEvent("click"))}catch{var S=document.createEvent("MouseEvents");S.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),C.dispatchEvent(S)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof bs=="object"&&bs.global===bs?bs:void 0,y=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!y?function(C,S,k){var P=o.URL||o.webkitURL,B=document.createElement("a");S=S||C.name||"download",B.download=S,B.rel="noopener",typeof C=="string"?(B.href=C,B.origin===location.origin?f(B):u(B.href)?a(C,S,k):f(B,B.target="_blank")):(B.href=P.createObjectURL(C),setTimeout(function(){P.revokeObjectURL(B.href)},4e4),setTimeout(function(){f(B)},0))}:"msSaveOrOpenBlob"in navigator?function(C,S,k){if(S=S||C.name||"download",typeof C!="string")navigator.msSaveOrOpenBlob(i(C,k),S);else if(u(C))a(C,S,k);else{var P=document.createElement("a");P.href=C,P.target="_blank",setTimeout(function(){f(P)})}}:function(C,S,k,P){if(P=P||open("","_blank"),P&&(P.document.title=P.document.body.innerText="downloading..."),typeof C=="string")return a(C,S,k);var B=C.type==="application/octet-stream",G=/constructor/i.test(o.HTMLElement)||o.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||B&&G||y)&&typeof FileReader<"u"){var X=new FileReader;X.onloadend=function(){var nt=X.result;nt=j?nt:nt.replace(/^data:[^;]*;/,"data:attachment/file;"),P?P.location.href=nt:location=nt,P=null},X.readAsDataURL(C)}else{var pt=o.URL||o.webkitURL,J=pt.createObjectURL(C);P?P.location=J:location.href=J,P=null,setTimeout(function(){pt.revokeObjectURL(J)},4e4)}});o.saveAs=_.saveAs=_,t.exports=_})})(GE);var VA=GE.exports;const KG=z_(VA),QG={class:"field-container"},JG={class:"label-container"},tq={class:"label-field"},eq=["disabled","title"],nq=["disabled"],iq={class:"geometry-list-container"},rq={class:""},oq=["onUpdate:modelValue","onChange"],aq={class:""},sq=["onUpdate:modelValue","onChange"],lq={class:""},uq=["onClick"],cq={__name:"field-geometry",props:Zs({modelValue:{type:Array,default:()=>[[0,0]]},maxLength:{type:Number,default:0},title:String,titleActionDownload:String,titleActionFillBound:String,titleActionAddPoint:String},{modelValue:{default:[[0,0]]},modelModifiers:{}}),emits:Zs(["click:remove","click:fillbound"],["update:modelValue"]),setup(t,{emit:e}){const i=t,a=_l(t,"modelValue"),u={add:xp,fillBound:Nv,delete:qb,download:jk,upload:h4},f=e,o=G=>{a.value=G},y=()=>{a.value||(a.value=[]),a.value.push([null,null])},_=()=>{o(a)},C=G=>{a.value.splice(G,1),f("click:remove",G),o(a)},S=G=>{if(!(!G||!G.length))return G.length==1?os(G[0]):G.length==2?As(G):Qm([[...G,G[0]]])},k=()=>{let G={type:"FeatureCollection",features:[S(a.value)]};const j=new window.Blob([JSON.stringify(G)],{type:"text/plain;charset=utf-8"});KG.saveAs(j,"geojson.json")},P=()=>{f("click:fillbound",S(a.value))},B=De(()=>!i.maxLength||a.value.length<i.maxLength);return(G,j)=>(ut(),Yt("div",QG,[At("div",JG,[At("div",tq,vn(t.title),1),At("div",null,[At("button",{onClick:P,disabled:!t.modelValue||t.modelValue.length<1,class:"setting-button",title:t.titleActionFillBound},[Pt(W(Rn),{size:16,type:"mdi",path:u.fillBound,title:t.titleActionDownload},null,8,["path","title"])],8,eq),At("button",{onClick:k,class:"setting-button",disabled:!t.modelValue||t.modelValue.length<1},[Pt(W(Rn),{size:16,type:"mdi",path:u.download,title:t.titleActionAddPoint},null,8,["path","title"])],8,nq),B.value?(ut(),Yt("button",{key:0,onClick:y,class:"setting-button"},[Pt(W(Rn),{size:16,type:"mdi",path:u.add},null,8,["path"])])):sn("",!0)])]),At("div",iq,[(ut(!0),Yt(Ai,null,Fo(t.modelValue,(X,pt)=>(ut(),Yt("div",{class:"geometry-list-item",key:pt},[At("div",null,"#"+vn(pt+1),1),At("div",rq,[oc(At("input",{class:"setting-input","onUpdate:modelValue":J=>a.value[pt][0]=J,type:"number",step:"any",onChange:J=>_()},null,40,oq),[[dp,a.value[pt][0]]])]),At("div",aq,[oc(At("input",{class:"setting-input","onUpdate:modelValue":J=>a.value[pt][1]=J,type:"number",step:"any",onChange:J=>_()},null,40,sq),[[dp,a.value[pt][1]]])]),At("div",lq,[At("button",{onClick:J=>C(pt),class:"setting-button"},[Pt(W(Rn),{size:16,type:"mdi",path:u.delete},null,8,["path"])],8,uq)])]))),128))])]))}},hq=Fn(cq,[["__scopeId","data-v-e28afdf9"]]),fq={class:"label-container"},pq={class:"label-field"},dq={class:"label-field-value"},mq={__name:"fields-show",props:{fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]}},setup(t){return(e,i)=>(ut(),Yt("div",null,[(ut(!0),Yt(Ai,null,Fo(t.fields,(a,u)=>(ut(),Yt("div",{class:"field-container label-value",key:u},[At("div",fq,[At("div",pq,vn(a.text),1),At("div",dq,vn(a.value),1)])]))),128))]))}},gq=Fn(mq,[["__scopeId","data-v-6556841c"]]),vq={class:"setting-container"},yq={__name:"MeasurementSettingPopup",props:Zs({...Wa,modelValue:Array,maxLength:{type:Number,default:0},fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]},popUpPosition:{type:Object,default:()=>({top:50,right:40,width:350,height:300})}},{modelValue:{default:[[0,0]]},modelModifiers:{},show:{default:!1},showModifiers:{}}),emits:Zs(["update:modelValue"],["update:modelValue","update:show"]),setup(t,{emit:e}){const i=e,a=t,{callMap:u,moduleContainerProps:f,mapId:o}=So(a),{trans:y}=ga(o.value),_=_l(t,"modelValue"),C=_l(t,"show"),S=P=>{u(B=>{lE(B,P)})};function k(P){i("update:modelValue",P.value)}return(P,B)=>(ut(),Se(W(La),Ga(Pa(W(f))),{draggable:Xt(G=>[C.value?(ut(),Se(W(mf),er({key:0},Object.assign(G,t.popUpPosition),{show:C.value,"onUpdate:show":B[0]||(B[0]=j=>C.value=j),title:W(y)("map.measurement.setting.title")}),{default:Xt(()=>[At("div",vq,[Pt(gq,{fields:t.fields},null,8,["fields"]),Pt(hq,{"onUpdate:modelValue":k,modelValue:_.value,maxLength:t.maxLength,"onClick:fillbound":S,title:W(y)("map.measurement.setting.field.data"),titleActionDownload:W(y)("map.measurement.action.download"),titleActionFillBound:W(y)("map.measurement.action.fly-to"),titleActionAddPoint:W(y)("map.measurement.action.add-point")},null,8,["modelValue","maxLength","title","titleActionDownload","titleActionFillBound","titleActionAddPoint"])])]),_:2},1040,["show","title"])):sn("",!0)]),default:Xt(()=>[Hn(P.$slots,"default",{},void 0,!0)]),_:3},16))}},_q=Fn(yq,[["__scopeId","data-v-1a628ab0"]]);class t1{constructor(){this.value=[]}get coordinates(){return this.value.filter(e=>e[0]!=null&&e[1]!=null)}start(){}add(e){const i=xq(this.value);i>=0?this.value[i]=e:this.value.push(e)}init(e){this.value=e}getResult(){return{}}reset(){this.value=[]}destroy(){this.value=[]}}function xq(t=[]){return t.findIndex(e=>!e[0]||!e[1])}function g_(t,e="vi"){return new Intl.NumberFormat(e).format(t)}class bq extends t1{get name(){return"Measure Area"}get type(){return"area"}getResult(){const u={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return u;if(this.coordinates.length==1)return u.features=[os(this.coordinates[0])],u;if(this.coordinates.length==2)return u.features=[As(this.coordinates)],u;const f=Qm([[...this.coordinates,this.coordinates[0]]]);return u.features=[f],u.value=CV(f),u.format=zx(u.value),u.features_label=[pV(f,{properties:{is_label:!0,is_center:!0,text:zx(u.value)}})],u.fields=[{trans:"map.measurement.setting.area",value:zx(u.value)}],u}}function zx(t=0){return t<1e6?`${g_(t.toFixed(2))} m²`:`${g_((t/1e6).toFixed(2))} km²`}class Aq extends t1{get name(){return"Measure Azimuth"}get type(){return"line"}get setting(){return{maxLength:2}}add(e){this.value.length>1&&(this.value=this.value.slice(0,1)),this.value.push(e)}getResult(){const u={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return u;if(this.coordinates.length==1)return u.features=[os(this.coordinates[0])],u;const f=this.coordinates[this.coordinates.length-1],o=this.coordinates[this.coordinates.length-2],y=As(this.coordinates);u.features=[y];const _=nE(o,f);return u.value=XM(_).toFixed(3),u.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:f},properties:{is_label:!0,text:`${u.value} °`,rotation:_}}],u.fields=[{trans:"map.measurement.setting.azimuth",value:`${u.value} °`}],u}}class wq extends t1{get name(){return"Measure Distance"}get type(){return"line"}getResult(){const u={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return u;if(this.coordinates.length==1)return u.features=[os(this.coordinates[0])],u;const f=As(this.coordinates);return u.features=[f],u.value=Y2(f),u.format=Bx(u.value),u.features_label=this.coordinates.map((o,y,_)=>({type:"Feature",properties:{is_label:!0,text:Bx(y<1?0:Y2(As(_.slice(0,y+1))))},geometry:{type:"Point",coordinates:o}})),u.fields=[{trans:"map.measurement.setting.distance",value:Bx(u.value)}],u}}function Bx(t=0){return t<1?`${g_((t*1e3).toFixed(2))} m`:`${g_(t.toFixed(2))} km`}class Cq extends t1{constructor(e=[]){super(),this.crs_items=e}get name(){return"Measure Point"}get type(){return"point"}get setting(){return{maxLength:1}}add(e){this.value.length>0&&(this.value=[]),this.value.push(e)}getResult(){const u={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return u;u.features=[os(this.coordinates[0])];const f=this.coordinates[0][0],o=this.coordinates[0][1],y=ab({longitude:f,latitude:o},void 0,!1);if(y&&(u.value=`${y.longitude}, ${y.latitude}`),this.crs_items){const _=this.crs_items.find(C=>C.default);u.fields=[{trans:_==null?void 0:_.name,value:u.value}],this.crs_items.filter(C=>!C.default).forEach(C=>{var S;if(!C.default&&C.proj4js){const k=ab({longitude:f,latitude:o},C,!1);k&&((S=u.fields)==null||S.push({trans:C.name,value:`${k.longitude}, ${k.latitude}`}))}})}else u.fields=[{trans:"map.measurement.setting.point",value:u.value}];return u.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:this.coordinates[0]},properties:{is_label:!0,text:u.value}}],u}}class UA{start(e){}view(e){}reset(){}destroy(){}}class Iq extends UA{constructor(e){super(),this.layers=[],this.map=e}init(e,i){return i.id||(i.id=`measurment-control-${lf()}`),this.map.addSource(i.id,i.data),e.forEach(a=>{a.id||(a.id=`measurment-control-${lf()}`),a.source||(a.source=i.id),this.map.addLayer(a)}),this.source=i,this.layers=e,this}start(){this.onStart&&this.onStart()}reset(){const e=this.map.getSource(this.source.id);e&&e.setData({type:"FeatureCollection",features:[]}),this.onReset&&this.onReset()}destroy(){this.map&&(this.layers.forEach(e=>{const i=e.id;this.map.getLayer(i)&&this.map.removeLayer(i),this.map.getSource(i)&&this.map.removeSource(i)}),this.map.getSource(this.source.id)&&this.map.removeSource(this.source.id))}view({features:e=[],features_label:i=[]}={}){const a=this.map.getSource(this.source.id);a&&a.setData({type:"FeatureCollection",features:[...e,...i]})}}class Mq extends UA{constructor(e){super(),this.markers=[],this.bindEvent={},this.color="#fff",this.map=e,this.markers=[]}setColor(e){return this.color=e,this}view({coordinates:e=[]}={}){const i=!!this.onDragMarker;if(e.length<this.markers.length)for(;e.length<this.markers.length;){const a=this.markers.pop();a&&a.remove()}e.forEach((a,u)=>{if(!a[0]||!a[1])return;let f=this.markers[u];f||(this.bindEvent[u]={},f=Eq({color:this.color,draggable:i}),this.markers[u]=f),f.setLngLat({lng:a[0],lat:a[1]}).addTo(this.map),i&&(this.bindEvent[u].dragend&&f.off("dragend",this.bindEvent[u].dragend),this.bindEvent[u].dragend=()=>{const y=f.getLngLat(),_=[y.lng,y.lat],C=e.slice();C[u]=_,this.onDragMarker&&this.onDragMarker(C,_,u,f)},f.on("dragend",this.bindEvent[u].dragend));const o=f.getElement();this.onRightClickMarker&&(this.bindEvent[u].contextmenu&&o.removeEventListener("contextmenu",this.bindEvent[u].contextmenu),this.bindEvent[u].contextmenu=y=>{y.preventDefault();const _=f.getLngLat();this.onRightClickMarker&&this.onRightClickMarker([_.lng,_.lat],u,f)},o.addEventListener("contextmenu",this.bindEvent[u].contextmenu))})}reset(){this.markers.forEach(e=>{e.remove()}),this.markers=[]}destroy(){this.reset()}}function Eq({color:t,draggable:e=!1}={}){const i=document.createElement("div");return i.style.width="12px",i.style.height="12px",i.style.borderRadius="50%",i.style.background="#fff",i.style.boxSizing="border-box",i.style.border=`2px solid ${t}`,i.style.cursor="pointer",new s_.Marker({element:i,draggable:e})}const vC=function(){let t=null;const e=[],i=k=>{for(let P=0;P<e.length;P++)k(e[P])},a=k=>{t=k},u=k=>{e.push(k)},f=()=>{t&&t.start(),i(k=>{k.start&&k.start(_())})},o=()=>{t&&t.reset(),i(k=>{k.reset&&k.reset()})},y=()=>{t&&t.destroy(),i(k=>{k.destroy()})},_=()=>({coordinates:t.value,setting:t.setting,...t.getResult()});return{get type(){return t?t.type:null},get action(){return t},setAction:a,addView:u,start:f,reset:o,destroy:y,add:k=>{t&&t.add(k),i(P=>{P.view&&P.view(_())})},init:(k=[])=>{t&&t.init(k),i(P=>{P.view(_())})},getResult:_}};class Sq extends UA{start({setting:e}={}){this.onChangeSetting&&this.onChangeSetting(e)}view({coordinates:e=[],setting:i={},fields:a=[]}={}){this.onChangeValue&&this.onChangeValue(e),this.onChangeSetting&&(i.fields=a,this.onChangeSetting(i))}reset(){this.onChangeValue&&this.onChangeValue([]),this.onChangeSetting&&this.onChangeSetting()}}const Tq="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAADo6zjiAAAAAXNSR0IArs4c6QAAA4RJREFUWEe9l09o02AYxtdkTRlfL13aie1Cdwgt7cqwiptUA2MHYb04xXhRUFQ6ENHT7rnvpOBhZaIieMlBPYyBIBtEKhtq/TM7W3JYyVpxbdZLvkHTtUrKNrou/5pt5tCWfu/7Pr/naXlJbF2HuKLRqFdpT6fTRatjbFYblT4AwHflHUI4ZHWOZQCapjGWZauKME3TDpZlZSsQlgFcLtfLSqVyQxHFcfyVKIrX/ytAV1fX3zZBS2YsNXm93gfFYvFRK4DX631YLBYfd5qCJQAEQbYbjQbaKoYgSL3RaHQfO0AgELiQy+U4NaFAIEDlcrkPnUB0nIDdbt+s1WouNREMwyqyLPceGwBFUSc5jtNdOhRFeTmO+20WoqMEAABpCOEpveEAgK8QwuiRAyQSCXsymTS1bDpZTKYTwHH8uSiKN804w3H8hSiKt8zUmgZQWTxG803NNlVEEMQ9QRCeGCm2nhMEcd9MjykAtcVjBGN2MRkCkCR5juf5j0aCaueRSOT8yspKSq/XEADDsLIsy7gVAAzDRFmW3ZYBYrFYXyqV+mNFfLcnFoudSKVSG1ozdBMAAHyCEJ45DIDT6fwiSZLmDE2AThaPEWAikcCSyWRNrU4ToLe3d3Zzc/OO0XAz5x6P51mpVLrdEYCFxWPEompW9Uufz5coFAozRhM7Off5fJOFQiHZ3qMKgCBIzcrdjR4QiqLb9XrdbggQDoeHM5nMkhl3PT09WQRBlOeCoJn6cDg8kslklltrDyTgcDg2qtWqx2hgMBi8ls1mWaWOJMmrPM83P+tdDoejVK1W+zQBKIrycBynuTSURgBAdmpqKsIwzHbrIIZhuqenp1eM0qAoqo/juNJu774EAABLEMJhLRd+v/9KPp9/reeSIIgJQRA0awAAyxDCkQMAo6Oj3YuLi6rLQnEdj8cHWZatG8WsnNM0jc7Pz/+UJEn1v8EwjH03wb0E3G73TLlcTrQLEARxWRCEN2aE22sGBgYm1tbWDqThdruT5XJ5Uqlv/Qn2PWo5nc5f4+PjEbOutQB30vghSVKoraap3Xzp7++/s76+PrtbsEP+1oprrR6SJC/xPL+XpN/vv5vP5582AVAUlZUlAQDIxOPxocO61ktjbm7u29bW1iCKorV6vY7ZQqHQ6dXV1c8kSU7wPH+kro3SiEQiZ204jr8fGxu7eFyu9dJYWFh49w9KoVXl/UeUKQAAAABJRU5ErkJggg==",kq="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGmSURBVDiNldPBitpAGAfwv5mMmy85JCistD5Ai/gCPYovYJENCPZQF8VD36HXUkrfQws9R8WLF58gh2h2W2PpoeTWxBgzMr1spd3uUvOHOQ2//3yHb4C/UyGi95Zl3XLOUwASgFRVNTVN8ysRfQTwFA+FMdYhoqjf7+9ns5kMgkCGYSjDMJTb7VbO53M5HA4PRBRzzl//g8vlcrxYLE7osbNcLmWlUok459cAULgb+2YymRi1Wu3B6e7H9300Go1dkiTPGRG97Xa7LzqdjnqWBlAqlRBFEVzXNZRisXhl2/bFufh3bNvmAF4WOOd73/cvDMPIVSCEQLVaFUqWZbkxAKiqCsaYVHLLe1E452kcx7mhEALH47Gg6Lr+3fO83AXr9Rq6rofK4XD4NB6P07wFo9Eok1J+LgC41DTt1nEco16vn4VXqxWazeYuSZJnCoAfWZZdt9vtneu6/8We56HVasVCiDcAvp0uGGM2Ef3s9Xp7x3HkZrM57X8QBHI6ncrBYJASUcQYe/XYA5eapr2zLOuGc77H3XfmnKemaX4hog8AnvwJfgHMKs1jQ++4tQAAAABJRU5ErkJggg==",Ug="#004E98",Pq=di({__name:"MeasurementControl",props:{...Wa},setup(t){const{getCrsItems:e}=nA,{addImage:i}=pB;let a=vC();const u=t,f=Ke(""),o=Ke([]),y=Ke({show:!0,maxLength:0,fields:[]}),_={add:xp,fillBound:Nv,distance:a4,area:s4,azimuth:u4,point:Xb,clear:qb,close:Nm,setting:JI},{callMap:C,mapId:S,moduleContainerProps:k}=So(u,j,X),{trans:P,setLocale:B}=ga(S.value);B({map:{measurement:{action:{clear:"Clear",close:"Close",setting:"Setting",download:"Download","add-point":"Add point","fly-to":"Fill bound",add:"Add"},title:"Measurement",result:"Measurement Result",field:{"unit-distance":"Unit distance","unit-area":"Unit area"},tools:{point:"Measure Point",distance:"Measure Distance",area:"Measure Area",azimuth:"Measure azimuth"},unit:{meter:"Meter",kilometer:"Kilometer","square-meter":"Square Meter",hecta:"Hecta","square-kilometer":"Square Kilometer"},setting:{title:"Setting",field:{data:"Data"},point:"Point",distance:"Distance",area:"Area",azimuth:"Azimuthị"},"no-data":{text:"Status",value:"Waiting..."}}}});const G=new hA().setHandler(pt);function j(Ft){i(Ft.id,"azimuth-arrow",Tq,{sdf:!0}),i(Ft.id,"measurment-round",kq,{content:[4,4,12,12],stretchX:[[6,10]],stretchY:[[6,10]]}),a=vC();let Ot=new Iq(Ft);Ot.init([{type:"line",paint:{"line-color":Ug,"line-width":2}},{type:"fill",filter:["==","$type","Polygon"],paint:{"fill-color":Ug,"fill-opacity":.3}},{type:"symbol",filter:["has","rotation"],paint:{"icon-color":Ug},layout:{"icon-size":1.2,"icon-rotate":{type:"identity",property:"rotation"},"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":"azimuth-arrow",visibility:"visible"}},{type:"symbol",filter:["all",["has","is_label"],["==","$type","Point"]],layout:{"text-field":"{text}","text-offset":["case",["to-boolean",["get","is_center"]],["literal",[0,0]],["literal",[0,2]]],"text-size":14,"text-allow-overlap":!0,"icon-allow-overlap":!0,"icon-image":"measurment-round","icon-text-fit":"both"},paint:{"text-color":"#fff","text-halo-color":Ug,"text-halo-width":2}}],{data:{type:"geojson",data:{type:"FeatureCollection",features:[]}}});const{add:de,remove:An}=OM(Ft.id,G);Ot.onStart=()=>{Ft&&de()},Ot.onReset=()=>{An()};let _e=new Mq(Ft);_e.setColor(Ug),_e.onDragMarker=je=>{a.init(je)},_e.onRightClickMarker=(je,Pi)=>{o.value.splice(Pi,1),a.init(o.value)};let Ge=new Sq;Ge.onChangeValue=je=>{o.value=(je||[]).slice()},Ge.onChangeSetting=(je={})=>{y.value.maxLength=je.maxLength||0;let Pi=je.fields;(!Pi||Pi.length==0)&&(Pi=[{text:P.value("map.measurement.no-data.text"),value:P.value("map.measurement.no-data.value")}]),y.value.fields=Pi.map(Li=>({...Li,text:Li.trans?P.value(Li.trans):Li.text}))},a.addView(Ot),a.addView(_e),a.addView(Ge)}function X(){a&&a.destroy(),Qt()}function pt(Ft){const Ot=[Ft.lngLat.lng,Ft.lngLat.lat];a.action&&a.add(Ot)}function J(Ft){return jt(!1),f.value==Ft?(f.value=void 0,a.setAction(null),!1):(f.value=Ft,!0)}function nt(){J("distance")&&(a.setAction(new wq),a.start())}function ft(){J("area")&&(a.setAction(new bq),a.start())}function Lt(){J("azimuth")&&(a.setAction(new Aq),a.start())}function xt(){J("point")&&(a.setAction(new Cq(e(S.value))),a.start())}function Mt(){y.value.show=!y.value.show}function Ht(){C(Ft=>{lE(Ft,BV(o.value))})}function jt(Ft=!0){a&&(a.reset(),Ft&&sc(()=>{a.start()}))}function Qt(){jt(!1),f.value=void 0,a&&a.setAction(null)}function Bt(Ft=[]){a&&a.init(Ft)}return(Ft,Ot)=>(ut(),Se(W(La),Ga(Pa(W(k))),{btn:Xt(()=>[f.value?(ut(),Se(W(Vm),{key:1,row:""},{default:Xt(()=>[Pt(W(Ar),{tooltip:W(P)("map.measurement.action.setting"),onClick:Ot[4]||(Ot[4]=de=>Mt()),active:y.value.show},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:_.setting},null,8,["path"])]),_:1},8,["tooltip","active"]),Pt(W(Ar),{disabled:!o.value||o.value.length<1,tooltip:W(P)("map.measurement.action.fly-to"),onClick:Ot[5]||(Ot[5]=de=>Ht())},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:_.fillBound},null,8,["path"])]),_:1},8,["disabled","tooltip"]),Pt(W(Ar),{tooltip:W(P)("map.measurement.action.clear"),onClick:Ot[6]||(Ot[6]=de=>jt())},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:_.clear},null,8,["path"])]),_:1},8,["tooltip"]),Pt(W(Ar),{tooltip:W(P)("map.measurement.action.close"),onClick:Ot[7]||(Ot[7]=de=>Qt())},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:_.close},null,8,["path"])]),_:1},8,["tooltip"])]),_:1})):(ut(),Se(W(Vm),{key:0,row:""},{default:Xt(()=>[Pt(W(Ar),{tooltip:W(P)("map.measurement.tools.distance"),onClick:Ot[0]||(Ot[0]=de=>nt()),active:f.value=="distance"},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:_.distance},null,8,["path"])]),_:1},8,["tooltip","active"]),Pt(W(Ar),{tooltip:W(P)("map.measurement.tools.area"),onClick:Ot[1]||(Ot[1]=de=>ft()),active:f.value=="area"},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:_.area},null,8,["path"])]),_:1},8,["tooltip","active"]),Pt(W(Ar),{tooltip:W(P)("map.measurement.tools.azimuth"),onClick:Ot[2]||(Ot[2]=de=>Lt()),active:f.value=="azimuth"},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:_.azimuth},null,8,["path"])]),_:1},8,["tooltip","active"]),Pt(W(Ar),{tooltip:W(P)("map.measurement.tools.point"),onClick:Ot[3]||(Ot[3]=de=>xt()),active:f.value=="point"},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:_.point},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1}))]),default:Xt(()=>[Hn(Ft.$slots,"default"),f.value?(ut(),Se(_q,{key:0,modelValue:o.value,show:y.value.show,"onUpdate:show":Ot[8]||(Ot[8]=de=>y.value.show=de),position:Ft.position,"onUpdate:modelValue":Bt,maxLength:y.value.maxLength,fields:y.value.fields},null,8,["modelValue","show","position","maxLength","fields"])):sn("",!0)]),_:3},16))}});class Lq{constructor(e){this.mapCanvas=e,this.color="#535353"}create(){this.updateValues(),this.createCanvas(this.mapCanvas.parentElement)}updateValues(){this.width=this.mapCanvas.clientWidth,this.height=this.mapCanvas.clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const e=this.width/2,i=this.height/2;this.yLine.setAttribute("x1",`${e}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${e}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${i}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${i}px`)}}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style["pointer-events"]="none",i.setAttribute("width",`${this.width}px`),i.setAttribute("height",`${this.height}px`);const a=this.width/2,u=this.height/2;this.yLine=i.appendChild(this.createLine(a,0,a,this.height,this.color,"2px")),this.xLine=i.appendChild(this.createLine(0,u,this.width,u,this.color,"2px")),e.appendChild(i),this.svgCanvas=i}}createLine(e,i,a,u,f,o){const y=document.createElementNS("http://www.w3.org/2000/svg","line");return y.setAttribute("x1",e+""),y.setAttribute("y1",i+""),y.setAttribute("x2",a+""),y.setAttribute("y2",u+""),y.setAttribute("stroke-dasharray","5,5"),y.setAttribute("stroke",f),y.setAttribute("stroke-width",o),y}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}function qE(t){const{renderMap:e,hidden:i}=WE(t,a=>{const u=t.getCanvas();a.style.width=u.clientWidth+"px",a.style.height=u.clientHeight+"px"});return new Promise(a=>{e.once("idle",()=>{var f;const u=e.getCanvas();a(u.toDataURL()),e.remove(),(f=i.parentNode)==null||f.removeChild(i)})})}async function Dq(t,e){const{renderMap:i,hidden:a}=WE(t,u=>{u.style.width=yC(+e.width,1),u.style.height=yC(+e.height,1)});return new Promise(u=>{i.once("idle",()=>{var o;const f=i.getCanvas();u(f.toDataURL()),i.remove(),(o=a.parentNode)==null||o.removeChild(a)})})}function yC(t,e=96){return`${e*t}px`}function WE(t,e){var y;const i=document.createElement("div");i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.padding="0",i.style.margin="0",i.style.background="transparent",i.style.zIndex="-1",document.body.appendChild(i);const a=document.createElement("div");e(a),i.appendChild(a);const u=new Wg.Map({container:a,center:t.getCenter(),zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:t._requestManager._transformRequestFn}),f=(t.style.imageManager||{}).images||{};f&&((y=Object.keys(f))==null?void 0:y.length)>0&&Object.keys(f).forEach(_=>{_&&u.addImage(_,f[_].data)});const o=t.getStyle();if(o&&o.sources){const _=o.sources;Object.keys(_).forEach(C=>{const S=_[C];Object.keys(S).forEach(k=>{S[k]||delete S[k]})})}return u.setStyle(o),{renderMap:u,hidden:i}}class Rq{constructor(e,i){this.mapCanvas=e,this.setOption(i)}getCutSize(){return{width:this.cutWidth,height:this.cutHeight,startX:this.cutStartX,startY:this.cutStartY}}mapResize(){this.generateCutOut()}create(){this.createCanvas(this.mapCanvas.parentElement),this.generateCutOut()}createCanvas(e){const i=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=this.mapCanvas.clientWidth,u=this.mapCanvas.clientHeight;i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style["pointer-events"]="none",i.setAttribute("width",`${a}px`),i.setAttribute("height",`${u}px`);const f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttribute("style","fill:#888888;stroke-width:0"),f.setAttribute("fill-opacity","0.5"),i.append(f),e.appendChild(i),this.svgCanvas=i,this.svgPath=f}generateCutOut(){if(this.svgCanvas===void 0||this.svgPath===void 0)return;const e=this.mapCanvas.clientWidth,i=this.mapCanvas.clientHeight,a=this.option.ratio;let u=i;u>e&&(u=e);let f=0,o=0;if(a>=1?(f=Math.floor(u*4/5-30),o=f/a):(o=Math.floor(u*4/5-30),f=Math.floor(o*a)),this.option.orientation!=="landscape"){if(f>o){const B=o;o=f,f=B}}else if(f<o){const B=o;o=f,f=B}this.cutStartX=e/2-f/2,this.cutStartY=i/2-o/2;const y=o,_=f;this.cutWidth=f,this.cutHeight=o;const C=this.cutStartX,S=C+_,k=this.cutStartY,P=k+y;this.svgCanvas.setAttribute("width",`${e}px`),this.svgCanvas.setAttribute("height",`${i}px`),this.svgPath.setAttribute("d",`M 0 0 L ${e} 0 L ${e} ${i} L 0 ${i} M ${C} ${k} L ${C} ${P} L ${S} ${P} L ${S} ${k}`)}setOption(e){this.option=e,this.generateCutOut()}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}const zq=di({__name:"PrintControl",props:{...Wa,fileName:{type:String,default:"map"}},setup(t){const e=t,i={print:o4,close:Nm,save:tM},{callMap:a,mapId:u,moduleContainerProps:f}=So(e),{trans:o,setLocale:y}=ga(u.value);y({map:{print:{title:"Print",actions:{save:"save",clear:"clear"}}}});const _=Ke({show:!1,loading:!1});function C(k){a(async P=>{_.value.loading=!0;try{let B=await qE(P);k?k(B):await S(B)}finally{_.value.loading=!1}})}async function S(k){VA.saveAs(k,`${e.fileName}.png`)}return(k,P)=>(ut(),Se(W(La),Ga(Pa(W(f))),{btn:Xt(()=>[Pt(W(Ar),{tooltip:W(o)("map.print.title"),onClick:P[0]||(P[0]=so(B=>C(S),["stop"])),loading:_.value.loading},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:i.print},null,8,["path"])]),_:1},8,["tooltip","loading"])]),_:1},16))}}),jA="print";function Bq(t){ff(t,jA,void 0)}xd(jA,Bq);const Oq=(t,{show:e,close:i,save:a,saveAll:u})=>{ff(t,jA,{show:e,close:i,save:a,saveAll:u})},Fq=t=>(xh("data-v-2dfc148d"),t=t(),bh(),t),Nq={class:"setting-container"},Vq=Fq(()=>At("div",{class:"grow"},null,-1)),Uq=di({__name:"PrintAdvancedControl",props:{...Wa,disabledCrosshair:Boolean,disabledPrintableArea:Boolean,fileName:{type:String,default:"map"}},setup(t){const e=t,i={print:r4,close:Nm,save:tM,setting:JI},{callMap:a,mapId:u,moduleContainerProps:f}=So(e,C),{trans:o,setLocale:y}=ga(u.value);y({map:{print:{title:"Print",actions:{save:"save",clear:"clear",setting:"Setting"},setting:{title:"Setting"},field:{ratio:"Ratio",orientation:"Orientation"},btn:{apply:"Print"}}}});const _=Ke({show:!1,loading:!1,setting_show:!1,setting:{ratio:1,orientation:"portrait"}});Ov(()=>{P()});function C(){Oq(u.value,{show:xt=>B(xt),close:()=>P(),save:xt=>k(xt),saveAll:xt=>S(xt)})}function S(xt){a(async Mt=>{_.value.loading=!0;try{let Ht=await qE(Mt);xt?xt(Ht):await G(Ht)}finally{_.value.loading=!1}})}async function k(xt){a(async Mt=>{if(X)try{_.value.loading=!0;let Ht=await Dq(Mt,X.getCutSize());xt?xt(Ht):await G(Ht)}finally{_.value.loading=!1}})}function P(){_.value.loading=!1,_.value.show=!1,pt(_.value.show),J(_.value.show,_.value.setting)}function B(xt){_.value.show=!0,pt(_.value.show),J(_.value.show,xt)}async function G(xt){VA.saveAs(xt,`${e.fileName}.png`)}let j,X;function pt(xt){e.disabledCrosshair||a(Mt=>{xt===!1?j!==void 0&&(j.destroy(),j=void 0):(j=new Lq(Mt.getCanvas()),j.create())})}function J(xt,Mt){e.disabledPrintableArea||a(Ht=>{xt===!1?(Ht.off("resize",nt),X!==void 0&&(X.destroy(),X=void 0)):(Ht.on("resize",nt),X=new Rq(Ht.getCanvas(),Mt),X.create())})}function nt(){X&&X.mapResize(),j&&j.mapResize()}function ft(){_.value.setting_show=!_.value.setting_show}function Lt(){X&&X.setOption(_.value.setting)}return(xt,Mt)=>(ut(),Se(W(La),Ga(Pa(W(f))),{btn:Xt(()=>[Pt(W(Vm),{row:""},{default:Xt(()=>[_.value.show?(ut(),Yt(Ai,{key:1},[Pt(W(Ar),{disabled:_.value.loading,loading:_.value.loading,tooltip:W(o)("map.print.actions.save"),onClick:Mt[1]||(Mt[1]=Ht=>k())},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:i.save},null,8,["path"])]),_:1},8,["disabled","loading","tooltip"]),Pt(W(Ar),{disabled:_.value.loading,tooltip:W(o)("map.print.actions.clear"),onClick:Mt[2]||(Mt[2]=Ht=>P())},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:i.close},null,8,["path"])]),_:1},8,["disabled","tooltip"])],64)):(ut(),Se(W(Ar),{key:0,active:_.value.show,tooltip:W(o)("map.print.title"),onClick:Mt[0]||(Mt[0]=so(Ht=>B(_.value.setting),["stop"])),loading:_.value.loading},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:i.print},null,8,["path"])]),_:1},8,["active","tooltip","loading"])),Pt(W(Ar),{tooltip:W(o)("map.print.actions.setting"),onClick:Mt[3]||(Mt[3]=Ht=>ft()),active:_.value.setting_show},{default:Xt(()=>[Pt(W(Rn),{size:18,type:"mdi",path:i.setting},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1})]),draggable:Xt(Ht=>[_.value.setting_show?(ut(),Se(W(mf),er({key:0},Ht,{height:220,show:_.value.setting_show,"onUpdate:show":Mt[9]||(Mt[9]=jt=>_.value.setting_show=jt),title:W(o)("map.print.setting.title")}),{default:Xt(()=>[At("div",Nq,[At("div",null,[Pt(W(Oo),{modelValue:_.value.setting.ratio,"onUpdate:modelValue":Mt[4]||(Mt[4]=jt=>_.value.setting.ratio=jt),label:W(o)("map.print.field.ratio"),onChange:Mt[5]||(Mt[5]=jt=>Lt())},null,8,["modelValue","label"])]),At("div",null,[Pt(W(Ym),{modelValue:_.value.setting.orientation,"onUpdate:modelValue":Mt[6]||(Mt[6]=jt=>_.value.setting.orientation=jt),items:[{value:"landscape",text:"Landscape"},{value:"portrait",text:"Portrait"}],label:W(o)("map.print.field.orientation"),onChange:Mt[7]||(Mt[7]=jt=>Lt())},null,8,["modelValue","label"])]),Vq,_.value.show?(ut(),Se(W(zc),{key:0,class:"btn-container",onClick:Mt[8]||(Mt[8]=jt=>k())},{default:Xt(()=>[xo(vn(W(o)("map.print.btn.apply")),1)]),_:1})):sn("",!0)])]),_:2},1040,["show","title"])):sn("",!0)]),_:1},16))}}),jq=Fn(Uq,[["__scopeId","data-v-2dfc148d"]]),HA=bp({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function yv(t=""){if(yv.cache.has(t))return yv.cache.get(t);const e=t.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return yv.cache.set(t,e),e}yv.cache=new Map;function _C(t,e,i="0"){return t+i.repeat(Math.max(0,e-t.length))}function Hq(t,e=1){const i=[];let a=0;for(;a<t.length;)i.push(t.substr(a,e)),a+=e;return i}function Ox(t,e){return e.every(i=>Object.prototype.hasOwnProperty.call(t,i))}function ZE(t){const e=yl({}),i=De(t);return bI(()=>{for(const a in i.value)e[a]=i.value[a]},{flush:"sync"}),FT(e)}function xC(t,e="px"){if(!(t==null||t===""))return isNaN(+t)?String(t):isFinite(+t)?`${Number(t)}${e}`:void 0}function Gq(t,e){const i=yd();if(!i)throw new Error(`[Vuetify] ${t} must be called from inside a setup function`);return i}function e1(t="composables"){const e=Gq(t).type;return yv(e==null?void 0:e.name)}const qq=bp({loading:[Boolean,String]},"loader");function Wq(t,e=e1()){return{loaderClasses:De(()=>({[`${e}--loading`]:t.loading}))}}const Zq=bp({rounded:{type:[Boolean,Number,String],default:"m"},tile:Boolean},"rounded");function $q(t,e=e1()){return{roundedClasses:De(()=>{const a=ra(t)?t.value:t.rounded,u=ra(t)?t.value:t.tile,f=[];if(a===!0||a==="")f.push(`${e}--rounded`);else if(typeof a=="string"||a===0)for(const o of String(a).split(" "))f.push(`rounded-${o}`);else(u||a===!1)&&f.push("rounded-0");return f})}}const Yq=["xs","s","m","l","xl"],$E=bp({size:{type:[String,Number],default:"m"}},"size");function YE(t,e=e1()){return ZE(()=>{let i,a;return qv.includes(Yq,t.size)?i=`${e}--size-${t.size}`:t.size&&(a={width:xC(t.size),height:xC(t.size)}),{sizeClasses:i,sizeStyles:a}})}const GA=bp({tag:{type:String,default:"div"}},"tag"),_m=2.4,bC=.2126729,AC=.7151522,wC=.072175,Xq=.55,Kq=.58,Qq=.57,Jq=.62,w0=.03,CC=1.45,tW=5e-4,eW=1.25,nW=1.25,IC=.078,MC=12.82051282051282,C0=.06,EC=.001;function SC(t,e){const i=(t.r/255)**_m,a=(t.g/255)**_m,u=(t.b/255)**_m,f=(e.r/255)**_m,o=(e.g/255)**_m,y=(e.b/255)**_m;let _=i*bC+a*AC+u*wC,C=f*bC+o*AC+y*wC;if(_<=w0&&(_+=(w0-_)**CC),C<=w0&&(C+=(w0-C)**CC),Math.abs(C-_)<tW)return 0;let S;if(C>_){const k=(C**Xq-_**Kq)*eW;S=k<EC?0:k<IC?k-k*MC*C0:k-C0}else{const k=(C**Jq-_**Qq)*nW;S=k>-EC?0:k>-IC?k-k*MC*C0:k+C0}return S*100}function _b(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}function iW(t){return _b(t)&&!/^((rgb|hsl)a?\()?var\(--/.test(t)}const TC=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,rW={rgb:(t,e,i,a)=>({r:t,g:e,b:i,a}),rgba:(t,e,i,a)=>({r:t,g:e,b:i,a}),hsl:(t,e,i,a)=>kC({h:t,s:e,l:i,a}),hsla:(t,e,i,a)=>kC({h:t,s:e,l:i,a}),hsv:(t,e,i,a)=>Rv({h:t,s:e,v:i,a}),hsva:(t,e,i,a)=>Rv({h:t,s:e,v:i,a})};function Xg(t){if(typeof t=="number")return{r:(t&16711680)>>16,g:(t&65280)>>8,b:t&255};if(typeof t=="string"&&TC.test(t)){const{groups:e}=t.match(TC),{fn:i,values:a}=e,u=a.split(/,\s*/).map(f=>f.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(i)?parseFloat(f)/100:parseFloat(f));return rW[i](...u)}else if(typeof t=="string"){let e=t.startsWith("#")?t.slice(1):t;return[3,4].includes(e.length)?e=e.split("").map(i=>i+i).join(""):[6,8].includes(e.length),oW(e)}else if(typeof t=="object"){if(Ox(t,["r","g","b"]))return t;if(Ox(t,["h","s","l"]))return Rv(XE(t));if(Ox(t,["h","s","v"]))return Rv(t)}throw new TypeError(`Invalid color: ${t==null?t:String(t)||t.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Rv(t){const{h:e,s:i,v:a,a:u}=t,f=y=>{const _=(y+e/60)%6;return a-a*i*Math.max(Math.min(_,4-_,1),0)},o=[f(5),f(3),f(1)].map(y=>Math.round(y*255));return{r:o[0],g:o[1],b:o[2],a:u}}function kC(t){return Rv(XE(t))}function XE(t){const{h:e,s:i,l:a,a:u}=t,f=a+i*Math.min(a,1-a),o=f===0?0:2-2*a/f;return{h:e,s:o,v:f,a:u}}function oW(t){t=aW(t);let[e,i,a,u]=Hq(t,2).map(f=>parseInt(f,16));return u=u===void 0?u:u/255,{r:e,g:i,b:a,a:u}}function aW(t){return t.startsWith("#")&&(t=t.slice(1)),t=t.replace(/([^0-9a-f])/gi,"F"),(t.length===3||t.length===4)&&(t=t.split("").map(e=>e+e).join("")),t.length!==6&&(t=_C(_C(t,6),8,"F")),t}function sW(t){const e=Math.abs(SC(Xg(0),Xg(t)));return Math.abs(SC(Xg(16777215),Xg(t)))>Math.min(e,50)?"#fff":"#000"}function lW(t){return ZE(()=>{const e=[],i={};if(t.value.background)if(_b(t.value.background)){if(i.backgroundColor=t.value.background,!t.value.text&&iW(t.value.background)){const a=Xg(t.value.background);if(a.a==null||a.a===1){const u=sW(a);i.color=u,i.caretColor=u}}}else e.push(`bg-${t.value.background}`);return t.value.text&&(_b(t.value.text)?(i.color=t.value.text,i.caretColor=t.value.text):e.push(`text-${t.value.text}`)),{colorClasses:e,colorStyles:i}})}const uW=["outlined","plain","filled"],cW=bp({color:String,variant:{type:String,default:"filled",validator:t=>uW.includes(t)}},"variant");function hW(t,e=e1()){const i=De(()=>{const{variant:f}=W(t);return`${e}--variant-${f}`}),{colorClasses:a,colorStyles:u}=lW(De(()=>{const{variant:f,color:o}=W(t);return{[["elevated","flat"].includes(f)?"background":"text"]:o}}));return{colorClasses:a,colorStyles:u,variantClasses:i}}const fW={class:"v-btn__content","data-no-activator":""},pW={name:"VBtn"};({...pW,props:bp({disabled:Boolean,readonly:Boolean,...HA(),...qq(),...cW(),...$E(),...Zq(),...GA({tag:"button"})},"VBtn")()});const dW=di({props:{...HA(),...GA({tag:"ul"}),...$E({size:"l"})},name:"v-list",setup(t,e){const{sizeClasses:i,sizeStyles:a}=YE(t);return()=>fd(t.tag,{class:["v-list",i.value,t.class],style:[a.value,t.style]},e.slots.default&&e.slots.default())}}),mW=di({props:{...HA(),...GA({tag:"li"})},name:"v-list-item",setup(t,e){return()=>fd(t.tag,{class:["v-list-item",t.class],style:t.style},e.slots.default&&e.slots.default())}}),gW={components:{VList:dW,DraggableItemSideBar:qM,MapControlButton:Ar,ModuleContainer:La,SvgIcon:Rn,VListItem:mW,RouterLink:KI},props:{...Wa,...dO({show:!1})},setup(t){const e={icon:Qk},[i,a]=md(t.show),{mapId:u,moduleContainerProps:f}=So(t),{trans:o,setLocale:y}=ga(u.value);return y({map:{"aside-control":{title:"Aside Control"}}}),{show:i,toggleShow:a,moduleContainerProps:f,trans:o,path:e}}},vW={class:"aside-control__title"};function yW(t,e,i,a,u,f){const o=Ha("SvgIcon"),y=Ha("MapControlButton"),_=Ha("RouterLink"),C=Ha("v-list-item"),S=Ha("v-list"),k=Ha("DraggableItemSideBar"),P=Ha("ModuleContainer");return ut(),Se(P,er(a.moduleContainerProps,{active:a.show}),{btn:Xt(()=>[Pt(y,{onClick:e[0]||(e[0]=so(B=>a.toggleShow(),["stop"])),tooltip:a.trans("map.aside-control.title")},{default:Xt(()=>[Pt(o,{size:"14",type:"mdi",path:a.path.icon},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Xt(B=>[Pt(k,{containerId:B.containerId,show:a.show,"onUpdate:show":e[1]||(e[1]=G=>a.show=G)},{title:Xt(()=>[At("span",vW,vn(a.trans("map.aside-control.title")),1)]),default:Xt(()=>[Pt(S,null,{default:Xt(()=>[Pt(C,null,{default:Xt(()=>[Pt(_,{to:"/"},{default:Xt(()=>[xo("Home ")]),_:1})]),_:1}),Pt(C,null,{default:Xt(()=>[Pt(_,{to:"/basemap"},{default:Xt(()=>[xo("BaseMap ")]),_:1})]),_:1}),Pt(C,null,{default:Xt(()=>[Pt(_,{to:"/draw"},{default:Xt(()=>[xo("draw ")]),_:1})]),_:1}),Pt(C,null,{default:Xt(()=>[Pt(_,{to:"/Layer"},{default:Xt(()=>[xo("layer ")]),_:1})]),_:1}),Pt(C,null,{default:Xt(()=>[Pt(_,{to:"/measurement"},{default:Xt(()=>[xo("measurement ")]),_:1})]),_:1})]),_:1})]),_:2},1032,["containerId","show"])]),_:1},16,["active"])}const _W=Fn(gW,[["render",yW]]),xW=di({__name:"AllMapView",setup(t){function e(i){pb(i.id,IE({name:"raster 1",tiles:["https://naturalearthtiles.roblabs.com/tiles/natural_earth_cross_blended_hypso_shaded_relief.raster/{z}/{x}/{y}.png"],maxZoom:6,bounds:[104.96327341667353,18.461221184685627,106.65936430823979,19.549518287564368]})),pb(i.id,ME({name:"geojson 1",type:"line",color:"#ff0000",geojson:{type:"FeatureCollection",features:[{type:"Feature",properties:{id:"1",name:"feature 2"},geometry:{coordinates:[[[104.96327341667353,19.549518287564368],[104.96327341667353,18.461221184685627],[106.65936430823979,18.461221184685627],[106.65936430823979,19.549518287564368],[104.96327341667353,19.549518287564368]]],type:"Polygon"}}]},builds:[qs.map().setLayers([new c_().setStyleType("area").setColor("#0000FF").build(),new c_().setStyleType("point").setColor("#ff0000").build()]),new yU().setDrawSupport([Rm.POINT,Rm.POLYGON,Rm.LINE_STRING])]}))}return(i,a)=>(ut(),Se(W(yN),{onMapLoaded:e},{default:Xt(()=>[Pt(_W,{position:"top-left",show:""}),Pt(W(Pq),{position:"top-right"}),Pt(W(LU),{position:"top-right"}),Pt(W(zj),{position:"top-right"}),Pt(W(iN),{position:"top-right"}),Pt(W(XG),{position:"top-left"},{endList:Xt(({mapId:u})=>[Pt(W(YV),{mapId:u},null,8,["mapId"])]),_:1}),Pt(W(jq)),Pt(W(zq)),Pt(W(q9)),Pt(W(ON)),Pt(W(J9)),Pt(W(Q9)),Pt(W(VN)),Pt(W(rN)),Pt(W(DN)),Pt(W(rU),{position:"bottom-left"})]),_:1}))}}),bW=kk({history:ak("/demo-map/"),routes:[{path:"/",name:"home",component:xW},{path:"/draw/",component:()=>zg(()=>import("./example-4jq0d020.js"),__vite__mapDeps([0,1]))},{path:"/basemap/",component:()=>zg(()=>import("./example-BFCUexnv.js"),__vite__mapDeps([2,3]))},{path:"/layer/",component:()=>zg(()=>import("./example-BZXL5pTs.js"),__vite__mapDeps([4,1]))},{path:"/measurement/",component:()=>zg(()=>import("./example-cK_hMsib.js"),__vite__mapDeps([5,1]))},{path:"/geojson/",component:()=>zg(()=>import("./index-cWkYu2lu.js"),__vite__mapDeps([6,7]))}]}),AW=di({__name:"App",setup(t){return(e,i)=>(ut(),Se(W(QI)))}}),wW=Fn(AW,[["__scopeId","data-v-b7680054"]]),KE=M5(wW);KE.use(bW);KE.mount("#root");export{Bv as $,_W as A,rU as B,ml as C,Rm as D,TW as E,Ai as F,De as G,xo as H,Jk as I,nM as J,Zb as K,$b as L,yN as M,mf as N,DA as O,qs as P,RA as Q,PA as R,Rn as S,_w as T,LA as U,CW as V,pb as W,XG as X,Pq as Y,z_ as Z,Fn as _,Pt as a,ws as a0,Xl as a1,Ov as a2,fd as a3,kr as a4,a7 as a5,c_ as a6,z0 as a7,Ix as a8,Ga as a9,Pa as aa,qM as ab,xh as ac,bh as ad,LU as b,Se as c,di as d,Wa as e,XV as f,So as g,uE as h,vl as i,Vm as j,Yt as k,Hn as l,er as m,No as n,ut as o,La as p,Ke as q,Fo as r,sn as s,vn as t,W as u,O4 as v,Xt as w,YV as x,At as y,Gr as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/example-4jq0d020.js","assets/example-BRI0LJKA.css","assets/example-BFCUexnv.js","assets/example-7vOpaiIK.css","assets/example-BZXL5pTs.js","assets/example-cK_hMsib.js","assets/index-cWkYu2lu.js","assets/index-BfJ3xaKm.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
