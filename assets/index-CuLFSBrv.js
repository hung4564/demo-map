(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const o of f.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(c){if(c.ep)return;c.ep=!0;const f=i(c);fetch(c.href,f)}})();const xS="modulepreload",bS=function(t){return"/demo-map/"+t},VA={},H1=function(e,i,a){let c=Promise.resolve();return i&&i.length>0&&(document.getElementsByTagName("link"),c=Promise.all(i.map(f=>{if(f=bS(f),f in VA)return;VA[f]=!0;const o=f.endsWith(".css"),y=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const _=document.createElement("link");if(_.rel=o?"stylesheet":xS,o||(_.as="script",_.crossOrigin=""),_.href=f,document.head.appendChild(_),o)return new Promise((M,T)=>{_.addEventListener("load",M),_.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${f}`)))})}))),c.then(()=>e()).catch(f=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=f,window.dispatchEvent(o),!o.defaultPrevented)throw f})};/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function pb(t,e){const i=new Set(t.split(","));return a=>i.has(a)}const yo={},Am=[],nc=()=>{},AS=()=>!1,a_=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),db=t=>t.startsWith("onUpdate:"),da=Object.assign,mb=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},wS=Object.prototype.hasOwnProperty,xr=(t,e)=>wS.call(t,e),Kn=Array.isArray,wm=t=>kv(t)==="[object Map]",Nm=t=>kv(t)==="[object Set]",UA=t=>kv(t)==="[object Date]",Vi=t=>typeof t=="function",Wo=t=>typeof t=="string",af=t=>typeof t=="symbol",so=t=>t!==null&&typeof t=="object",sC=t=>(so(t)||Vi(t))&&Vi(t.then)&&Vi(t.catch),lC=Object.prototype.toString,kv=t=>lC.call(t),CS=t=>kv(t).slice(8,-1),uC=t=>kv(t)==="[object Object]",gb=t=>Wo(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Wg=pb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),s_=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},IS=/-(\w)/g,Nc=s_(t=>t.replace(IS,(e,i)=>i?i.toUpperCase():"")),MS=/\B([A-Z])/g,pd=s_(t=>t.replace(MS,"-$1").toLowerCase()),l_=s_(t=>t.charAt(0).toUpperCase()+t.slice(1)),G1=s_(t=>t?`on${l_(t)}`:""),yh=(t,e)=>!Object.is(t,e),g0=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},cC=(t,e,i,a=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:a,value:i})},L0=t=>{const e=parseFloat(t);return isNaN(e)?t:e},ES=t=>{const e=Wo(t)?Number(t):NaN;return isNaN(e)?t:e};let jA;const hC=()=>jA||(jA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Jr(t){if(Kn(t)){const e={};for(let i=0;i<t.length;i++){const a=t[i],c=Wo(a)?PS(a):Jr(a);if(c)for(const f in c)e[f]=c[f]}return e}else if(Wo(t)||so(t))return t}const SS=/;(?![^(]*\))/g,TS=/:([^]+)/,kS=/\/\*[^]*?\*\//g;function PS(t){const e={};return t.replace(kS,"").split(SS).forEach(i=>{if(i){const a=i.split(TS);a.length>1&&(e[a[0].trim()]=a[1].trim())}}),e}function Zo(t){let e="";if(Wo(t))e=t;else if(Kn(t))for(let i=0;i<t.length;i++){const a=Zo(t[i]);a&&(e+=a+" ")}else if(so(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}function La(t){if(!t)return null;let{class:e,style:i}=t;return e&&!Wo(e)&&(t.class=Zo(e)),i&&(t.style=Jr(i)),t}const LS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",DS=pb(LS);function fC(t){return!!t||t===""}function RS(t,e){if(t.length!==e.length)return!1;let i=!0;for(let a=0;i&&a<t.length;a++)i=ud(t[a],e[a]);return i}function ud(t,e){if(t===e)return!0;let i=UA(t),a=UA(e);if(i||a)return i&&a?t.getTime()===e.getTime():!1;if(i=af(t),a=af(e),i||a)return t===e;if(i=Kn(t),a=Kn(e),i||a)return i&&a?RS(t,e):!1;if(i=so(t),a=so(e),i||a){if(!i||!a)return!1;const c=Object.keys(t).length,f=Object.keys(e).length;if(c!==f)return!1;for(const o in t){const y=t.hasOwnProperty(o),_=e.hasOwnProperty(o);if(y&&!_||!y&&_||!ud(t[o],e[o]))return!1}}return String(t)===String(e)}function vb(t,e){return t.findIndex(i=>ud(i,e))}const yn=t=>Wo(t)?t:t==null?"":Kn(t)||so(t)&&(t.toString===lC||!Vi(t.toString))?JSON.stringify(t,pC,2):String(t),pC=(t,e)=>e&&e.__v_isRef?pC(t,e.value):wm(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[a,c],f)=>(i[q1(a,f)+" =>"]=c,i),{})}:Nm(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>q1(i))}:af(e)?q1(e):so(e)&&!Kn(e)&&!uC(e)?String(e):e,q1=(t,e="")=>{var i;return af(t)?`Symbol(${(i=t.description)!=null?i:e})`:t};/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mu;class zS{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=mu,!e&&mu&&(this.index=(mu.scopes||(mu.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const i=mu;try{return mu=this,e()}finally{mu=i}}}on(){mu=this}off(){mu=this.parent}stop(e){if(this._active){let i,a;for(i=0,a=this.effects.length;i<a;i++)this.effects[i].stop();for(i=0,a=this.cleanups.length;i<a;i++)this.cleanups[i]();if(this.scopes)for(i=0,a=this.scopes.length;i<a;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!e){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0,this._active=!1}}}function OS(t,e=mu){e&&e.active&&e.effects.push(t)}function dC(){return mu}function BS(t){mu&&mu.cleanups.push(t)}let ad;class yb{constructor(e,i,a,c){this.fn=e,this.trigger=i,this.scheduler=a,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,OS(this,c)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,vp();for(let e=0;e<this._depsLength;e++){const i=this.deps[e];if(i.computed){if(i.computed.effect._dirtyLevel===2)return!0;if(FS(i.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),yp()}return this._dirtyLevel>=5}set dirty(e){this._dirtyLevel=e?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=ap,i=ad;try{return ap=!0,ad=this,this._runnings++,HA(this),this.fn()}finally{GA(this),this._runnings--,ad=i,ap=e}}stop(){this.active&&(HA(this),GA(this),this.onStop&&this.onStop(),this.active=!1)}}function FS(t){return t.value}function HA(t){t._trackId++,t._depsLength=0}function GA(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)mC(t.deps[e],t);t.deps.length=t._depsLength}}function mC(t,e){const i=t.get(e);i!==void 0&&e._trackId!==i&&(t.delete(e),t.size===0&&t.cleanup())}let ap=!0,Px=0;const gC=[];function vp(){gC.push(ap),ap=!1}function yp(){const t=gC.pop();ap=t===void 0?!0:t}function _b(){Px++}function xb(){for(Px--;!Px&&Lx.length;)Lx.shift()()}function vC(t,e,i){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const a=t.deps[t._depsLength];a!==e?(a&&mC(a,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Lx=[];function yC(t,e,i){_b();for(const a of t.keys()){if(!t.computed&&a.computed&&t.get(a)===a._trackId&&a._runnings>0){a._dirtyLevel=2;continue}let c;a._dirtyLevel<e&&(c??(c=t.get(a)===a._trackId))&&(a._shouldSchedule||(a._shouldSchedule=a._dirtyLevel===0),a.computed&&a._dirtyLevel===2&&(a._shouldSchedule=!0),a._dirtyLevel=e),a._shouldSchedule&&(c??(c=t.get(a)===a._trackId))&&(a.trigger(),(!a._runnings||a.allowRecurse)&&a._dirtyLevel!==3&&(a._shouldSchedule=!1,a.scheduler&&Lx.push(a.scheduler)))}xb()}const _C=(t,e)=>{const i=new Map;return i.cleanup=t,i.computed=e,i},Dx=new WeakMap,sd=Symbol(""),Rx=Symbol("");function ql(t,e,i){if(ap&&ad){let a=Dx.get(t);a||Dx.set(t,a=new Map);let c=a.get(i);c||a.set(i,c=_C(()=>a.delete(i))),vC(ad,c)}}function nf(t,e,i,a,c,f){const o=Dx.get(t);if(!o)return;let y=[];if(e==="clear")y=[...o.values()];else if(i==="length"&&Kn(t)){const _=Number(a);o.forEach((M,T)=>{(T==="length"||!af(T)&&T>=_)&&y.push(M)})}else switch(i!==void 0&&y.push(o.get(i)),e){case"add":Kn(t)?gb(i)&&y.push(o.get("length")):(y.push(o.get(sd)),wm(t)&&y.push(o.get(Rx)));break;case"delete":Kn(t)||(y.push(o.get(sd)),wm(t)&&y.push(o.get(Rx)));break;case"set":wm(t)&&y.push(o.get(sd));break}_b();for(const _ of y)_&&yC(_,5);xb()}const NS=pb("__proto__,__v_isRef,__isVue"),xC=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(af)),qA=VS();function VS(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const a=Fr(this);for(let f=0,o=this.length;f<o;f++)ql(a,"get",f+"");const c=a[e](...i);return c===-1||c===!1?a[e](...i.map(Fr)):c}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){vp(),_b();const a=Fr(this)[e].apply(this,i);return xb(),yp(),a}}),t}function US(t){af(t)||(t=String(t));const e=Fr(this);return ql(e,"has",t),e.hasOwnProperty(t)}class bC{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,a){const c=this._isReadonly,f=this._isShallow;if(i==="__v_isReactive")return!c;if(i==="__v_isReadonly")return c;if(i==="__v_isShallow")return f;if(i==="__v_raw")return a===(c?f?tT:IC:f?CC:wC).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(a)?e:void 0;const o=Kn(e);if(!c){if(o&&xr(qA,i))return Reflect.get(qA,i,a);if(i==="hasOwnProperty")return US}const y=Reflect.get(e,i,a);return(af(i)?xC.has(i):NS(i))||(c||ql(e,"get",i),f)?y:Pa(y)?o&&gb(i)?y:y.value:so(y)?c?c_(y):Wl(y):y}}class AC extends bC{constructor(e=!1){super(!1,e)}set(e,i,a,c){let f=e[i];if(!this._isShallow){const _=dv(f);if(!D0(a)&&!dv(a)&&(f=Fr(f),a=Fr(a)),!Kn(e)&&Pa(f)&&!Pa(a))return _?!1:(f.value=a,!0)}const o=Kn(e)&&gb(i)?Number(i)<e.length:xr(e,i),y=Reflect.set(e,i,a,c);return e===Fr(c)&&(o?yh(a,f)&&nf(e,"set",i,a):nf(e,"add",i,a)),y}deleteProperty(e,i){const a=xr(e,i);e[i];const c=Reflect.deleteProperty(e,i);return c&&a&&nf(e,"delete",i,void 0),c}has(e,i){const a=Reflect.has(e,i);return(!af(i)||!xC.has(i))&&ql(e,"has",i),a}ownKeys(e){return ql(e,"iterate",Kn(e)?"length":sd),Reflect.ownKeys(e)}}class jS extends bC{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const HS=new AC,GS=new jS,qS=new AC(!0);const bb=t=>t,u_=t=>Reflect.getPrototypeOf(t);function Jy(t,e,i=!1,a=!1){t=t.__v_raw;const c=Fr(t),f=Fr(e);i||(yh(e,f)&&ql(c,"get",e),ql(c,"get",f));const{has:o}=u_(c),y=a?bb:i?Cb:mv;if(o.call(c,e))return y(t.get(e));if(o.call(c,f))return y(t.get(f));t!==c&&t.get(e)}function t0(t,e=!1){const i=this.__v_raw,a=Fr(i),c=Fr(t);return e||(yh(t,c)&&ql(a,"has",t),ql(a,"has",c)),t===c?i.has(t):i.has(t)||i.has(c)}function e0(t,e=!1){return t=t.__v_raw,!e&&ql(Fr(t),"iterate",sd),Reflect.get(t,"size",t)}function WA(t){t=Fr(t);const e=Fr(this);return u_(e).has.call(e,t)||(e.add(t),nf(e,"add",t,t)),this}function ZA(t,e){e=Fr(e);const i=Fr(this),{has:a,get:c}=u_(i);let f=a.call(i,t);f||(t=Fr(t),f=a.call(i,t));const o=c.call(i,t);return i.set(t,e),f?yh(e,o)&&nf(i,"set",t,e):nf(i,"add",t,e),this}function $A(t){const e=Fr(this),{has:i,get:a}=u_(e);let c=i.call(e,t);c||(t=Fr(t),c=i.call(e,t)),a&&a.call(e,t);const f=e.delete(t);return c&&nf(e,"delete",t,void 0),f}function YA(){const t=Fr(this),e=t.size!==0,i=t.clear();return e&&nf(t,"clear",void 0,void 0),i}function n0(t,e){return function(a,c){const f=this,o=f.__v_raw,y=Fr(o),_=e?bb:t?Cb:mv;return!t&&ql(y,"iterate",sd),o.forEach((M,T)=>a.call(c,_(M),_(T),f))}}function i0(t,e,i){return function(...a){const c=this.__v_raw,f=Fr(c),o=wm(f),y=t==="entries"||t===Symbol.iterator&&o,_=t==="keys"&&o,M=c[t](...a),T=i?bb:e?Cb:mv;return!e&&ql(f,"iterate",_?Rx:sd),{next(){const{value:k,done:P}=M.next();return P?{value:k,done:P}:{value:y?[T(k[0]),T(k[1])]:T(k),done:P}},[Symbol.iterator](){return this}}}}function qf(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function WS(){const t={get(f){return Jy(this,f)},get size(){return e0(this)},has:t0,add:WA,set:ZA,delete:$A,clear:YA,forEach:n0(!1,!1)},e={get(f){return Jy(this,f,!1,!0)},get size(){return e0(this)},has:t0,add:WA,set:ZA,delete:$A,clear:YA,forEach:n0(!1,!0)},i={get(f){return Jy(this,f,!0)},get size(){return e0(this,!0)},has(f){return t0.call(this,f,!0)},add:qf("add"),set:qf("set"),delete:qf("delete"),clear:qf("clear"),forEach:n0(!0,!1)},a={get(f){return Jy(this,f,!0,!0)},get size(){return e0(this,!0)},has(f){return t0.call(this,f,!0)},add:qf("add"),set:qf("set"),delete:qf("delete"),clear:qf("clear"),forEach:n0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(f=>{t[f]=i0(f,!1,!1),i[f]=i0(f,!0,!1),e[f]=i0(f,!1,!0),a[f]=i0(f,!0,!0)}),[t,i,e,a]}const[ZS,$S,YS,XS]=WS();function Ab(t,e){const i=e?t?XS:YS:t?$S:ZS;return(a,c,f)=>c==="__v_isReactive"?!t:c==="__v_isReadonly"?t:c==="__v_raw"?a:Reflect.get(xr(i,c)&&c in a?i:a,c,f)}const KS={get:Ab(!1,!1)},QS={get:Ab(!1,!0)},JS={get:Ab(!0,!1)};const wC=new WeakMap,CC=new WeakMap,IC=new WeakMap,tT=new WeakMap;function eT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nT(t){return t.__v_skip||!Object.isExtensible(t)?0:eT(CS(t))}function Wl(t){return dv(t)?t:wb(t,!1,HS,KS,wC)}function MC(t){return wb(t,!1,qS,QS,CC)}function c_(t){return wb(t,!0,GS,JS,IC)}function wb(t,e,i,a,c){if(!so(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const f=c.get(t);if(f)return f;const o=nT(t);if(o===0)return t;const y=new Proxy(t,o===2?a:i);return c.set(t,y),y}function Zg(t){return dv(t)?Zg(t.__v_raw):!!(t&&t.__v_isReactive)}function dv(t){return!!(t&&t.__v_isReadonly)}function D0(t){return!!(t&&t.__v_isShallow)}function EC(t){return t?!!t.__v_raw:!1}function Fr(t){const e=t&&t.__v_raw;return e?Fr(e):t}function iT(t){return Object.isExtensible(t)&&cC(t,"__v_skip",!0),t}const mv=t=>so(t)?Wl(t):t,Cb=t=>so(t)?c_(t):t;class SC{constructor(e,i,a,c){this.getter=e,this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new yb(()=>e(this._value),()=>$g(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!c,this.__v_isReadonly=a}get value(){const e=Fr(this);return(!e._cacheable||e.effect.dirty)&&yh(e._value,e._value=e.effect.run())&&$g(e,5),Ib(e),e.effect._dirtyLevel>=2&&$g(e,3),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function rT(t,e,i=!1){let a,c;const f=Vi(t);return f?(a=t,c=nc):(a=t.get,c=t.set),new SC(a,c,f||!c,i)}function Ib(t){var e;ap&&ad&&(t=Fr(t),vC(ad,(e=t.dep)!=null?e:t.dep=_C(()=>t.dep=void 0,t instanceof SC?t:void 0)))}function $g(t,e=5,i,a){t=Fr(t);const c=t.dep;c&&yC(c,e)}function Pa(t){return!!(t&&t.__v_isRef===!0)}function $e(t){return TC(t,!1)}function Pv(t){return TC(t,!0)}function TC(t,e){return Pa(t)?t:new oT(t,e)}class oT{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:Fr(e),this._value=i?e:mv(e)}get value(){return Ib(this),this._value}set value(e){const i=this.__v_isShallow||D0(e)||dv(e);e=i?e:Fr(e),yh(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=i?e:mv(e),$g(this,5))}}function $(t){return Pa(t)?t.value:t}const aT={get:(t,e,i)=>$(Reflect.get(t,e,i)),set:(t,e,i,a)=>{const c=t[e];return Pa(c)&&!Pa(i)?(c.value=i,!0):Reflect.set(t,e,i,a)}};function kC(t){return Zg(t)?t:new Proxy(t,aT)}class sT{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:a}=e(()=>Ib(this),()=>$g(this));this._get=i,this._set=a}get value(){return this._get()}set value(e){this._set(e)}}function lT(t){return new sT(t)}/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function sp(t,e,i,a){try{return a?t(...a):t()}catch(c){h_(c,e,i)}}function ic(t,e,i,a){if(Vi(t)){const c=sp(t,e,i,a);return c&&sC(c)&&c.catch(f=>{h_(f,e,i)}),c}if(Kn(t)){const c=[];for(let f=0;f<t.length;f++)c.push(ic(t[f],e,i,a));return c}}function h_(t,e,i,a=!0){const c=e?e.vnode:null;if(e){let f=e.parent;const o=e.proxy,y=`https://vuejs.org/error-reference/#runtime-${i}`;for(;f;){const M=f.ec;if(M){for(let T=0;T<M.length;T++)if(M[T](t,o,y)===!1)return}f=f.parent}const _=e.appContext.config.errorHandler;if(_){vp(),sp(_,null,10,[t,o,y]),yp();return}}uT(t,i,c,a)}function uT(t,e,i,a=!0){console.error(t)}let gv=!1,zx=!1;const js=[];let dh=0;const Cm=[];let Yf=null,nd=0;const PC=Promise.resolve();let Mb=null;function xu(t){const e=Mb||PC;return t?e.then(this?t.bind(this):t):e}function cT(t){let e=dh+1,i=js.length;for(;e<i;){const a=e+i>>>1,c=js[a],f=vv(c);f<t||f===t&&c.pre?e=a+1:i=a}return e}function Eb(t){(!js.length||!js.includes(t,gv&&t.allowRecurse?dh+1:dh))&&(t.id==null?js.push(t):js.splice(cT(t.id),0,t),LC())}function LC(){!gv&&!zx&&(zx=!0,Mb=PC.then(RC))}function hT(t){const e=js.indexOf(t);e>dh&&js.splice(e,1)}function fT(t){Kn(t)?Cm.push(...t):(!Yf||!Yf.includes(t,t.allowRecurse?nd+1:nd))&&Cm.push(t),LC()}function XA(t,e,i=gv?dh+1:0){for(;i<js.length;i++){const a=js[i];if(a&&a.pre){if(t&&a.id!==t.uid)continue;js.splice(i,1),i--,a()}}}function DC(t){if(Cm.length){const e=[...new Set(Cm)].sort((i,a)=>vv(i)-vv(a));if(Cm.length=0,Yf){Yf.push(...e);return}for(Yf=e,nd=0;nd<Yf.length;nd++){const i=Yf[nd];i.active!==!1&&i()}Yf=null,nd=0}}const vv=t=>t.id==null?1/0:t.id,pT=(t,e)=>{const i=vv(t)-vv(e);if(i===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function RC(t){zx=!1,gv=!0,js.sort(pT);try{for(dh=0;dh<js.length;dh++){const e=js[dh];e&&e.active!==!1&&sp(e,null,14)}}finally{dh=0,js.length=0,DC(),gv=!1,Mb=null,(js.length||Cm.length)&&RC()}}function dT(t,e,...i){if(t.isUnmounted)return;const a=t.vnode.props||yo;let c=i;const f=e.startsWith("update:"),o=f&&e.slice(7);if(o&&o in a){const T=`${o==="modelValue"?"model":o}Modifiers`,{number:k,trim:P}=a[T]||yo;P&&(c=i.map(O=>Wo(O)?O.trim():O)),k&&(c=i.map(L0))}let y,_=a[y=G1(e)]||a[y=G1(Nc(e))];!_&&f&&(_=a[y=G1(pd(e))]),_&&ic(_,t,6,c);const M=a[y+"Once"];if(M){if(!t.emitted)t.emitted={};else if(t.emitted[y])return;t.emitted[y]=!0,ic(M,t,6,c)}}function zC(t,e,i=!1){const a=e.emitsCache,c=a.get(t);if(c!==void 0)return c;const f=t.emits;let o={},y=!1;if(!Vi(t)){const _=M=>{const T=zC(M,e,!0);T&&(y=!0,da(o,T))};!i&&e.mixins.length&&e.mixins.forEach(_),t.extends&&_(t.extends),t.mixins&&t.mixins.forEach(_)}return!f&&!y?(so(t)&&a.set(t,null),null):(Kn(f)?f.forEach(_=>o[_]=null):da(o,f),so(t)&&a.set(t,o),o)}function f_(t,e){return!t||!a_(e)?!1:(e=e.slice(2).replace(/Once$/,""),xr(t,e[0].toLowerCase()+e.slice(1))||xr(t,pd(e))||xr(t,e))}let rs=null,p_=null;function R0(t){const e=rs;return rs=t,p_=t&&t.type.__scopeId||null,e}function lc(t){p_=t}function uc(){p_=null}function se(t,e=rs,i){if(!e||t._n)return t;const a=(...c)=>{a._d&&hw(-1);const f=R0(e);let o;try{o=t(...c)}finally{R0(f),a._d&&hw(1)}return o};return a._n=!0,a._c=!0,a._d=!0,a}function W1(t){const{type:e,vnode:i,proxy:a,withProxy:c,propsOptions:[f],slots:o,attrs:y,emit:_,render:M,renderCache:T,props:k,data:P,setupState:O,ctx:G,inheritAttrs:H}=t,X=R0(t);let st,K;try{if(i.shapeFlag&4){const xt=c||a,Nt=xt;st=ph(M.call(Nt,xt,T,k,O,P,G)),K=y}else{const xt=e;st=ph(xt.length>1?xt(k,{attrs:y,slots:o,emit:_}):xt(k,null)),K=e.props?y:mT(y)}}catch(xt){Jg.length=0,h_(xt,t,1),st=zt(Gl)}let et=st;if(K&&H!==!1){const xt=Object.keys(K),{shapeFlag:Nt}=et;xt.length&&Nt&7&&(f&&xt.some(db)&&(K=gT(K,f)),et=hp(et,K,!1,!0))}return i.dirs&&(et=hp(et,null,!1,!0),et.dirs=et.dirs?et.dirs.concat(i.dirs):i.dirs),i.transition&&(et.transition=i.transition),st=et,R0(X),st}const mT=t=>{let e;for(const i in t)(i==="class"||i==="style"||a_(i))&&((e||(e={}))[i]=t[i]);return e},gT=(t,e)=>{const i={};for(const a in t)(!db(a)||!(a.slice(9)in e))&&(i[a]=t[a]);return i};function vT(t,e,i){const{props:a,children:c,component:f}=t,{props:o,children:y,patchFlag:_}=e,M=f.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&_>=0){if(_&1024)return!0;if(_&16)return a?KA(a,o,M):!!o;if(_&8){const T=e.dynamicProps;for(let k=0;k<T.length;k++){const P=T[k];if(o[P]!==a[P]&&!f_(M,P))return!0}}}else return(c||y)&&(!y||!y.$stable)?!0:a===o?!1:a?o?KA(a,o,M):!0:!!o;return!1}function KA(t,e,i){const a=Object.keys(e);if(a.length!==Object.keys(t).length)return!0;for(let c=0;c<a.length;c++){const f=a[c];if(e[f]!==t[f]&&!f_(i,f))return!0}return!1}function yT({vnode:t,parent:e},i){for(;e;){const a=e.subTree;if(a.suspense&&a.suspense.activeBranch===t&&(a.el=t.el),a===t)(t=e.vnode).el=i,e=e.parent;else break}}const OC="components";function tc(t,e){return FC(OC,t,!0,e)||t}const BC=Symbol.for("v-ndc");function oc(t){return Wo(t)?FC(OC,t,!1)||t:t||BC}function FC(t,e,i=!0,a=!1){const c=rs||ys;if(c){const f=c.type;{const y=m3(f,!1);if(y&&(y===e||y===Nc(e)||y===l_(Nc(e))))return f}const o=QA(c[t]||f[t],e)||QA(c.appContext[t],e);return!o&&a?f:o}}function QA(t,e){return t&&(t[e]||t[Nc(e)]||t[l_(Nc(e))])}const _T=t=>t.__isSuspense;function xT(t,e){e&&e.pendingBranch?Kn(t)?e.effects.push(...t):e.effects.push(t):fT(t)}function d_(t,e,i=ys,a=!1){if(i){const c=i[t]||(i[t]=[]),f=e.__weh||(e.__weh=(...o)=>{vp();const y=Dv(i),_=ic(e,i,t,o);return y(),yp(),_});return a?c.unshift(f):c.push(f),f}}const cf=t=>(e,i=ys)=>{(!y_||t==="sp")&&d_(t,(...a)=>e(...a),i)},bT=cf("bm"),ml=cf("m"),AT=cf("bu"),wT=cf("u"),Lv=cf("bum"),dd=cf("um"),CT=cf("sp"),IT=cf("rtg"),MT=cf("rtc");function ET(t,e=ys){d_("ec",t,e)}function ac(t,e){if(rs===null)return t;const i=__(rs),a=t.dirs||(t.dirs=[]);for(let c=0;c<e.length;c++){let[f,o,y,_=yo]=e[c];f&&(Vi(f)&&(f={mounted:f,updated:f}),f.deep&&ep(o),a.push({dir:f,instance:i,value:o,oldValue:void 0,arg:y,modifiers:_}))}return t}function $p(t,e,i,a){const c=t.dirs,f=e&&e.dirs;for(let o=0;o<c.length;o++){const y=c[o];f&&(y.oldValue=f[o].value);let _=y.dir[a];_&&(vp(),ic(_,i,8,[t.el,y,t,e]),yp())}}function $o(t,e,i,a){let c;const f=i;if(Kn(t)||Wo(t)){c=new Array(t.length);for(let o=0,y=t.length;o<y;o++)c[o]=e(t[o],o,void 0,f)}else if(typeof t=="number"){c=new Array(t);for(let o=0;o<t;o++)c[o]=e(o+1,o,void 0,f)}else if(so(t))if(t[Symbol.iterator])c=Array.from(t,(o,y)=>e(o,y,void 0,f));else{const o=Object.keys(t);c=new Array(o.length);for(let y=0,_=o.length;y<_;y++){const M=o[y];c[y]=e(t[M],M,y,f)}}else c=[];return c}/*! #__NO_SIDE_EFFECTS__ */function Fi(t,e){return Vi(t)?da({name:t.name},e,{setup:t}):t}const Yg=t=>!!t.type.__asyncLoader;function Zn(t,e,i={},a,c){if(rs.isCE||rs.parent&&Yg(rs.parent)&&rs.parent.isCE)return e!=="default"&&(i.name=e),zt("slot",i,a&&a());let f=t[e];f&&f._c&&(f._d=!1),mt();const o=f&&NC(f(i)),y=Oe(ui,{key:i.key||o&&o.key||`_${e}`},o||(a?a():[]),o&&t._===1?64:-2);return!c&&y.scopeId&&(y.slotScopeIds=[y.scopeId+"-s"]),f&&f._c&&(f._d=!0),y}function NC(t){return t.some(e=>F0(e)?!(e.type===Gl||e.type===ui&&!NC(e.children)):!0)?t:null}const Ox=t=>t?aI(t)?__(t):Ox(t.parent):null,Xg=da(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ox(t.parent),$root:t=>Ox(t.root),$emit:t=>t.emit,$options:t=>Sb(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Eb(t.update)}),$nextTick:t=>t.n||(t.n=xu.bind(t.proxy)),$watch:t=>KT.bind(t)}),Z1=(t,e)=>t!==yo&&!t.__isScriptSetup&&xr(t,e),ST={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:a,data:c,props:f,accessCache:o,type:y,appContext:_}=t;let M;if(e[0]!=="$"){const O=o[e];if(O!==void 0)switch(O){case 1:return a[e];case 2:return c[e];case 4:return i[e];case 3:return f[e]}else{if(Z1(a,e))return o[e]=1,a[e];if(c!==yo&&xr(c,e))return o[e]=2,c[e];if((M=t.propsOptions[0])&&xr(M,e))return o[e]=3,f[e];if(i!==yo&&xr(i,e))return o[e]=4,i[e];Bx&&(o[e]=0)}}const T=Xg[e];let k,P;if(T)return e==="$attrs"&&ql(t.attrs,"get",""),T(t);if((k=y.__cssModules)&&(k=k[e]))return k;if(i!==yo&&xr(i,e))return o[e]=4,i[e];if(P=_.config.globalProperties,xr(P,e))return P[e]},set({_:t},e,i){const{data:a,setupState:c,ctx:f}=t;return Z1(c,e)?(c[e]=i,!0):a!==yo&&xr(a,e)?(a[e]=i,!0):xr(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(f[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:a,appContext:c,propsOptions:f}},o){let y;return!!i[o]||t!==yo&&xr(t,o)||Z1(e,o)||(y=f[0])&&xr(y,o)||xr(a,o)||xr(Xg,o)||xr(c.config.globalProperties,o)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:xr(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function TT(){return kT().slots}function kT(){const t=Vm();return t.setupContext||(t.setupContext=lI(t))}function z0(t){return Kn(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}function Gs(t,e){return!t||!e?t||e:Kn(t)&&Kn(e)?t.concat(e):da({},z0(t),z0(e))}let Bx=!0;function PT(t){const e=Sb(t),i=t.proxy,a=t.ctx;Bx=!1,e.beforeCreate&&JA(e.beforeCreate,t,"bc");const{data:c,computed:f,methods:o,watch:y,provide:_,inject:M,created:T,beforeMount:k,mounted:P,beforeUpdate:O,updated:G,activated:H,deactivated:X,beforeDestroy:st,beforeUnmount:K,destroyed:et,unmounted:xt,render:Nt,renderTracked:It,renderTriggered:St,errorCaptured:Gt,serverPrefetch:Dt,expose:Qt,inheritAttrs:jt,components:Vt,directives:Bt,filters:de}=e;if(M&&LT(M,a,null),o)for(const He in o){const Ue=o[He];Vi(Ue)&&(a[He]=Ue.bind(i))}if(c){const He=c.call(i,i);so(He)&&(t.data=Wl(He))}if(Bx=!0,f)for(const He in f){const Ue=f[He],ki=Vi(Ue)?Ue.bind(i,i):Vi(Ue.get)?Ue.get.bind(i,i):nc,oi=!Vi(Ue)&&Vi(Ue.set)?Ue.set.bind(i):nc,Vn=Ge({get:ki,set:oi});Object.defineProperty(a,He,{enumerable:!0,configurable:!0,get:()=>Vn.value,set:gn=>Vn.value=gn})}if(y)for(const He in y)VC(y[He],a,i,He);if(_){const He=Vi(_)?_.call(i):_;Reflect.ownKeys(He).forEach(Ue=>{ld(Ue,He[Ue])})}T&&JA(T,t,"c");function _e(He,Ue){Kn(Ue)?Ue.forEach(ki=>He(ki.bind(i))):Ue&&He(Ue.bind(i))}if(_e(bT,k),_e(ml,P),_e(AT,O),_e(wT,G),_e(QT,H),_e(JT,X),_e(ET,Gt),_e(MT,It),_e(IT,St),_e(Lv,K),_e(dd,xt),_e(CT,Dt),Kn(Qt))if(Qt.length){const He=t.exposed||(t.exposed={});Qt.forEach(Ue=>{Object.defineProperty(He,Ue,{get:()=>i[Ue],set:ki=>i[Ue]=ki})})}else t.exposed||(t.exposed={});Nt&&t.render===nc&&(t.render=Nt),jt!=null&&(t.inheritAttrs=jt),Vt&&(t.components=Vt),Bt&&(t.directives=Bt)}function LT(t,e,i=nc){Kn(t)&&(t=Fx(t));for(const a in t){const c=t[a];let f;so(c)?"default"in c?f=bs(c.from||a,c.default,!0):f=bs(c.from||a):f=bs(c),Pa(f)?Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>f.value,set:o=>f.value=o}):e[a]=f}}function JA(t,e,i){ic(Kn(t)?t.map(a=>a.bind(e.proxy)):t.bind(e.proxy),e,i)}function VC(t,e,i,a){const c=a.includes(".")?KC(i,a):()=>i[a];if(Wo(t)){const f=e[t];Vi(f)&&pl(c,f)}else if(Vi(t))pl(c,t.bind(i));else if(so(t))if(Kn(t))t.forEach(f=>VC(f,e,i,a));else{const f=Vi(t.handler)?t.handler.bind(i):e[t.handler];Vi(f)&&pl(c,f,t)}}function Sb(t){const e=t.type,{mixins:i,extends:a}=e,{mixins:c,optionsCache:f,config:{optionMergeStrategies:o}}=t.appContext,y=f.get(e);let _;return y?_=y:!c.length&&!i&&!a?_=e:(_={},c.length&&c.forEach(M=>O0(_,M,o,!0)),O0(_,e,o)),so(e)&&f.set(e,_),_}function O0(t,e,i,a=!1){const{mixins:c,extends:f}=e;f&&O0(t,f,i,!0),c&&c.forEach(o=>O0(t,o,i,!0));for(const o in e)if(!(a&&o==="expose")){const y=DT[o]||i&&i[o];t[o]=y?y(t[o],e[o]):e[o]}return t}const DT={data:tw,props:ew,emits:ew,methods:Fg,computed:Fg,beforeCreate:ul,created:ul,beforeMount:ul,mounted:ul,beforeUpdate:ul,updated:ul,beforeDestroy:ul,beforeUnmount:ul,destroyed:ul,unmounted:ul,activated:ul,deactivated:ul,errorCaptured:ul,serverPrefetch:ul,components:Fg,directives:Fg,watch:zT,provide:tw,inject:RT};function tw(t,e){return e?t?function(){return da(Vi(t)?t.call(this,this):t,Vi(e)?e.call(this,this):e)}:e:t}function RT(t,e){return Fg(Fx(t),Fx(e))}function Fx(t){if(Kn(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function ul(t,e){return t?[...new Set([].concat(t,e))]:e}function Fg(t,e){return t?da(Object.create(null),t,e):e}function ew(t,e){return t?Kn(t)&&Kn(e)?[...new Set([...t,...e])]:da(Object.create(null),z0(t),z0(e??{})):e}function zT(t,e){if(!t)return e;if(!e)return t;const i=da(Object.create(null),t);for(const a in e)i[a]=ul(t[a],e[a]);return i}function UC(){return{app:null,config:{isNativeTag:AS,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let OT=0;function BT(t,e){return function(a,c=null){Vi(a)||(a=da({},a)),c!=null&&!so(c)&&(c=null);const f=UC(),o=new WeakSet;let y=!1;const _=f.app={_uid:OT++,_component:a,_props:c,_container:null,_context:f,_instance:null,version:v3,get config(){return f.config},set config(M){},use(M,...T){return o.has(M)||(M&&Vi(M.install)?(o.add(M),M.install(_,...T)):Vi(M)&&(o.add(M),M(_,...T))),_},mixin(M){return f.mixins.includes(M)||f.mixins.push(M),_},component(M,T){return T?(f.components[M]=T,_):f.components[M]},directive(M,T){return T?(f.directives[M]=T,_):f.directives[M]},mount(M,T,k){if(!y){const P=zt(a,c);return P.appContext=f,k===!0?k="svg":k===!1&&(k=void 0),T&&e?e(P,M):t(P,M,k),y=!0,_._container=M,M.__vue_app__=_,__(P.component)}},unmount(){y&&(t(null,_._container),delete _._container.__vue_app__)},provide(M,T){return f.provides[M]=T,_},runWithContext(M){const T=Kg;Kg=_;try{return M()}finally{Kg=T}}};return _}}let Kg=null;function ld(t,e){if(ys){let i=ys.provides;const a=ys.parent&&ys.parent.provides;a===i&&(i=ys.provides=Object.create(a)),i[t]=e}}function bs(t,e,i=!1){const a=ys||rs;if(a||Kg){const c=a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:Kg._context.provides;if(c&&t in c)return c[t];if(arguments.length>1)return i&&Vi(e)?e.call(a&&a.proxy):e}}const jC={},HC=()=>Object.create(jC),GC=t=>Object.getPrototypeOf(t)===jC;function FT(t,e,i,a=!1){const c={},f=HC();t.propsDefaults=Object.create(null),qC(t,e,c,f);for(const o in t.propsOptions[0])o in c||(c[o]=void 0);i?t.props=a?c:MC(c):t.type.props?t.props=c:t.props=f,t.attrs=f}function NT(t,e,i,a){const{props:c,attrs:f,vnode:{patchFlag:o}}=t,y=Fr(c),[_]=t.propsOptions;let M=!1;if((a||o>0)&&!(o&16)){if(o&8){const T=t.vnode.dynamicProps;for(let k=0;k<T.length;k++){let P=T[k];if(f_(t.emitsOptions,P))continue;const O=e[P];if(_)if(xr(f,P))O!==f[P]&&(f[P]=O,M=!0);else{const G=Nc(P);c[G]=Nx(_,y,G,O,t,!1)}else O!==f[P]&&(f[P]=O,M=!0)}}}else{qC(t,e,c,f)&&(M=!0);let T;for(const k in y)(!e||!xr(e,k)&&((T=pd(k))===k||!xr(e,T)))&&(_?i&&(i[k]!==void 0||i[T]!==void 0)&&(c[k]=Nx(_,y,k,void 0,t,!0)):delete c[k]);if(f!==y)for(const k in f)(!e||!xr(e,k))&&(delete f[k],M=!0)}M&&nf(t.attrs,"set","")}function qC(t,e,i,a){const[c,f]=t.propsOptions;let o=!1,y;if(e)for(let _ in e){if(Wg(_))continue;const M=e[_];let T;c&&xr(c,T=Nc(_))?!f||!f.includes(T)?i[T]=M:(y||(y={}))[T]=M:f_(t.emitsOptions,_)||(!(_ in a)||M!==a[_])&&(a[_]=M,o=!0)}if(f){const _=Fr(i),M=y||yo;for(let T=0;T<f.length;T++){const k=f[T];i[k]=Nx(c,_,k,M[k],t,!xr(M,k))}}return o}function Nx(t,e,i,a,c,f){const o=t[i];if(o!=null){const y=xr(o,"default");if(y&&a===void 0){const _=o.default;if(o.type!==Function&&!o.skipFactory&&Vi(_)){const{propsDefaults:M}=c;if(i in M)a=M[i];else{const T=Dv(c);a=M[i]=_.call(null,e),T()}}else a=_}o[0]&&(f&&!y?a=!1:o[1]&&(a===""||a===pd(i))&&(a=!0))}return a}function WC(t,e,i=!1){const a=e.propsCache,c=a.get(t);if(c)return c;const f=t.props,o={},y=[];let _=!1;if(!Vi(t)){const T=k=>{_=!0;const[P,O]=WC(k,e,!0);da(o,P),O&&y.push(...O)};!i&&e.mixins.length&&e.mixins.forEach(T),t.extends&&T(t.extends),t.mixins&&t.mixins.forEach(T)}if(!f&&!_)return so(t)&&a.set(t,Am),Am;if(Kn(f))for(let T=0;T<f.length;T++){const k=Nc(f[T]);nw(k)&&(o[k]=yo)}else if(f)for(const T in f){const k=Nc(T);if(nw(k)){const P=f[T],O=o[k]=Kn(P)||Vi(P)?{type:P}:da({},P);if(O){const G=ow(Boolean,O.type),H=ow(String,O.type);O[0]=G>-1,O[1]=H<0||G<H,(G>-1||xr(O,"default"))&&y.push(k)}}}const M=[o,y];return so(t)&&a.set(t,M),M}function nw(t){return t[0]!=="$"&&!Wg(t)}function iw(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function rw(t,e){return iw(t)===iw(e)}function ow(t,e){return Kn(e)?e.findIndex(i=>rw(i,t)):Vi(e)&&rw(e,t)?0:-1}const ZC=t=>t[0]==="_"||t==="$stable",Tb=t=>Kn(t)?t.map(ph):[ph(t)],VT=(t,e,i)=>{if(e._n)return e;const a=se((...c)=>Tb(e(...c)),i);return a._c=!1,a},$C=(t,e,i)=>{const a=t._ctx;for(const c in t){if(ZC(c))continue;const f=t[c];if(Vi(f))e[c]=VT(c,f,a);else if(f!=null){const o=Tb(f);e[c]=()=>o}}},YC=(t,e)=>{const i=Tb(e);t.slots.default=()=>i},UT=(t,e)=>{const i=t.slots=HC();if(t.vnode.shapeFlag&32){const a=e._;a?(da(i,e),cC(i,"_",a,!0)):$C(e,i)}else e&&YC(t,e)},jT=(t,e,i)=>{const{vnode:a,slots:c}=t;let f=!0,o=yo;if(a.shapeFlag&32){const y=e._;y?i&&y===1?f=!1:(da(c,e),!i&&y===1&&delete c._):(f=!e.$stable,$C(e,c)),o=e}else e&&(YC(t,e),o={default:1});if(f)for(const y in c)!ZC(y)&&o[y]==null&&delete c[y]};function Vx(t,e,i,a,c=!1){if(Kn(t)){t.forEach((P,O)=>Vx(P,e&&(Kn(e)?e[O]:e),i,a,c));return}if(Yg(a)&&!c)return;const f=a.shapeFlag&4?__(a.component):a.el,o=c?null:f,{i:y,r:_}=t,M=e&&e.r,T=y.refs===yo?y.refs={}:y.refs,k=y.setupState;if(M!=null&&M!==_&&(Wo(M)?(T[M]=null,xr(k,M)&&(k[M]=null)):Pa(M)&&(M.value=null)),Vi(_))sp(_,y,12,[o,T]);else{const P=Wo(_),O=Pa(_);if(P||O){const G=()=>{if(t.f){const H=P?xr(k,_)?k[_]:T[_]:_.value;c?Kn(H)&&mb(H,f):Kn(H)?H.includes(f)||H.push(f):P?(T[_]=[f],xr(k,_)&&(k[_]=T[_])):(_.value=[f],t.k&&(T[t.k]=_.value))}else P?(T[_]=o,xr(k,_)&&(k[_]=o)):O&&(_.value=o,t.k&&(T[t.k]=o))};o?(G.id=-1,Hl(G,i)):G()}}}const Hl=xT;function HT(t){return GT(t)}function GT(t,e){const i=hC();i.__VUE__=!0;const{insert:a,remove:c,patchProp:f,createElement:o,createText:y,createComment:_,setText:M,setElementText:T,parentNode:k,nextSibling:P,setScopeId:O=nc,insertStaticContent:G}=t,H=(ut,At,Jt,le=null,pe=null,Be=null,un=void 0,we=null,De=!!At.dynamicChildren)=>{if(ut===At)return;ut&&!id(ut,At)&&(le=ue(ut),gn(ut,pe,Be,!0),ut=null),At.patchFlag===-2&&(De=!1,At.dynamicChildren=null);const{type:Se,ref:en,shapeFlag:Cn}=At;switch(Se){case v_:X(ut,At,Jt,le);break;case Gl:st(ut,At,Jt,le);break;case v0:ut==null&&K(At,Jt,le,un);break;case ui:Vt(ut,At,Jt,le,pe,Be,un,we,De);break;default:Cn&1?Nt(ut,At,Jt,le,pe,Be,un,we,De):Cn&6?Bt(ut,At,Jt,le,pe,Be,un,we,De):(Cn&64||Cn&128)&&Se.process(ut,At,Jt,le,pe,Be,un,we,De,Te)}en!=null&&pe&&Vx(en,ut&&ut.ref,Be,At||ut,!At)},X=(ut,At,Jt,le)=>{if(ut==null)a(At.el=y(At.children),Jt,le);else{const pe=At.el=ut.el;At.children!==ut.children&&M(pe,At.children)}},st=(ut,At,Jt,le)=>{ut==null?a(At.el=_(At.children||""),Jt,le):At.el=ut.el},K=(ut,At,Jt,le)=>{[ut.el,ut.anchor]=G(ut.children,At,Jt,le,ut.el,ut.anchor)},et=({el:ut,anchor:At},Jt,le)=>{let pe;for(;ut&&ut!==At;)pe=P(ut),a(ut,Jt,le),ut=pe;a(At,Jt,le)},xt=({el:ut,anchor:At})=>{let Jt;for(;ut&&ut!==At;)Jt=P(ut),c(ut),ut=Jt;c(At)},Nt=(ut,At,Jt,le,pe,Be,un,we,De)=>{At.type==="svg"?un="svg":At.type==="math"&&(un="mathml"),ut==null?It(At,Jt,le,pe,Be,un,we,De):Dt(ut,At,pe,Be,un,we,De)},It=(ut,At,Jt,le,pe,Be,un,we)=>{let De,Se;const{props:en,shapeFlag:Cn,transition:In,dirs:Pn}=ut;if(De=ut.el=o(ut.type,Be,en&&en.is,en),Cn&8?T(De,ut.children):Cn&16&&Gt(ut.children,De,null,le,pe,$1(ut,Be),un,we),Pn&&$p(ut,null,le,"created"),St(De,ut,ut.scopeId,un,le),en){for(const Di in en)Di!=="value"&&!Wg(Di)&&f(De,Di,null,en[Di],Be,ut.children,le,pe,Ai);"value"in en&&f(De,"value",null,en.value,Be),(Se=en.onVnodeBeforeMount)&&ch(Se,le,ut)}Pn&&$p(ut,null,le,"beforeMount");const Jn=qT(pe,In);Jn&&In.beforeEnter(De),a(De,At,Jt),((Se=en&&en.onVnodeMounted)||Jn||Pn)&&Hl(()=>{Se&&ch(Se,le,ut),Jn&&In.enter(De),Pn&&$p(ut,null,le,"mounted")},pe)},St=(ut,At,Jt,le,pe)=>{if(Jt&&O(ut,Jt),le)for(let Be=0;Be<le.length;Be++)O(ut,le[Be]);if(pe){let Be=pe.subTree;if(At===Be){const un=pe.vnode;St(ut,un,un.scopeId,un.slotScopeIds,pe.parent)}}},Gt=(ut,At,Jt,le,pe,Be,un,we,De=0)=>{for(let Se=De;Se<ut.length;Se++){const en=ut[Se]=we?Kf(ut[Se]):ph(ut[Se]);H(null,en,At,Jt,le,pe,Be,un,we)}},Dt=(ut,At,Jt,le,pe,Be,un)=>{const we=At.el=ut.el;let{patchFlag:De,dynamicChildren:Se,dirs:en}=At;De|=ut.patchFlag&16;const Cn=ut.props||yo,In=At.props||yo;let Pn;if(Jt&&Yp(Jt,!1),(Pn=In.onVnodeBeforeUpdate)&&ch(Pn,Jt,At,ut),en&&$p(At,ut,Jt,"beforeUpdate"),Jt&&Yp(Jt,!0),Se?Qt(ut.dynamicChildren,Se,we,Jt,le,$1(At,pe),Be):un||Ue(ut,At,we,null,Jt,le,$1(At,pe),Be,!1),De>0){if(De&16)jt(we,At,Cn,In,Jt,le,pe);else if(De&2&&Cn.class!==In.class&&f(we,"class",null,In.class,pe),De&4&&f(we,"style",Cn.style,In.style,pe),De&8){const Jn=At.dynamicProps;for(let Di=0;Di<Jn.length;Di++){const Ci=Jn[Di],or=Cn[Ci],Gr=In[Ci];(Gr!==or||Ci==="value")&&f(we,Ci,or,Gr,pe,ut.children,Jt,le,Ai)}}De&1&&ut.children!==At.children&&T(we,At.children)}else!un&&Se==null&&jt(we,At,Cn,In,Jt,le,pe);((Pn=In.onVnodeUpdated)||en)&&Hl(()=>{Pn&&ch(Pn,Jt,At,ut),en&&$p(At,ut,Jt,"updated")},le)},Qt=(ut,At,Jt,le,pe,Be,un)=>{for(let we=0;we<At.length;we++){const De=ut[we],Se=At[we],en=De.el&&(De.type===ui||!id(De,Se)||De.shapeFlag&70)?k(De.el):Jt;H(De,Se,en,null,le,pe,Be,un,!0)}},jt=(ut,At,Jt,le,pe,Be,un)=>{if(Jt!==le){if(Jt!==yo)for(const we in Jt)!Wg(we)&&!(we in le)&&f(ut,we,Jt[we],null,un,At.children,pe,Be,Ai);for(const we in le){if(Wg(we))continue;const De=le[we],Se=Jt[we];De!==Se&&we!=="value"&&f(ut,we,Se,De,un,At.children,pe,Be,Ai)}"value"in le&&f(ut,"value",Jt.value,le.value,un)}},Vt=(ut,At,Jt,le,pe,Be,un,we,De)=>{const Se=At.el=ut?ut.el:y(""),en=At.anchor=ut?ut.anchor:y("");let{patchFlag:Cn,dynamicChildren:In,slotScopeIds:Pn}=At;Pn&&(we=we?we.concat(Pn):Pn),ut==null?(a(Se,Jt,le),a(en,Jt,le),Gt(At.children||[],Jt,en,pe,Be,un,we,De)):Cn>0&&Cn&64&&In&&ut.dynamicChildren?(Qt(ut.dynamicChildren,In,Jt,pe,Be,un,we),(At.key!=null||pe&&At===pe.subTree)&&kb(ut,At,!0)):Ue(ut,At,Jt,en,pe,Be,un,we,De)},Bt=(ut,At,Jt,le,pe,Be,un,we,De)=>{At.slotScopeIds=we,ut==null?At.shapeFlag&512?pe.ctx.activate(At,Jt,le,un,De):de(At,Jt,le,pe,Be,un,De):An(ut,At,De)},de=(ut,At,Jt,le,pe,Be,un)=>{const we=ut.component=h3(ut,le,pe);if(g_(ut)&&(we.ctx.renderer=Te),f3(we),we.asyncDep){if(pe&&pe.registerDep(we,_e,un),!ut.el){const De=we.subTree=zt(Gl);st(null,De,At,Jt)}}else _e(we,ut,At,Jt,pe,Be,un)},An=(ut,At,Jt)=>{const le=At.component=ut.component;if(vT(ut,At,Jt))if(le.asyncDep&&!le.asyncResolved){He(le,At,Jt);return}else le.next=At,hT(le.update),le.effect.dirty=!0,le.update();else At.el=ut.el,le.vnode=At},_e=(ut,At,Jt,le,pe,Be,un)=>{const we=()=>{if(ut.isMounted){let{next:en,bu:Cn,u:In,parent:Pn,vnode:Jn}=ut;{const Yo=XC(ut);if(Yo){en&&(en.el=Jn.el,He(ut,en,un)),Yo.asyncDep.then(()=>{ut.isUnmounted||we()});return}}let Di=en,Ci;Yp(ut,!1),en?(en.el=Jn.el,He(ut,en,un)):en=Jn,Cn&&g0(Cn),(Ci=en.props&&en.props.onVnodeBeforeUpdate)&&ch(Ci,Pn,en,Jn),Yp(ut,!0);const or=W1(ut),Gr=ut.subTree;ut.subTree=or,H(Gr,or,k(Gr.el),ue(Gr),ut,pe,Be),en.el=or.el,Di===null&&yT(ut,or.el),In&&Hl(In,pe),(Ci=en.props&&en.props.onVnodeUpdated)&&Hl(()=>ch(Ci,Pn,en,Jn),pe)}else{let en;const{el:Cn,props:In}=At,{bm:Pn,m:Jn,parent:Di}=ut,Ci=Yg(At);if(Yp(ut,!1),Pn&&g0(Pn),!Ci&&(en=In&&In.onVnodeBeforeMount)&&ch(en,Di,At),Yp(ut,!0),Cn&&Li){const or=()=>{ut.subTree=W1(ut),Li(Cn,ut.subTree,ut,pe,null)};Ci?At.type.__asyncLoader().then(()=>!ut.isUnmounted&&or()):or()}else{const or=ut.subTree=W1(ut);H(null,or,Jt,le,ut,pe,Be),At.el=or.el}if(Jn&&Hl(Jn,pe),!Ci&&(en=In&&In.onVnodeMounted)){const or=At;Hl(()=>ch(en,Di,or),pe)}(At.shapeFlag&256||Di&&Yg(Di.vnode)&&Di.vnode.shapeFlag&256)&&ut.a&&Hl(ut.a,pe),ut.isMounted=!0,At=Jt=le=null}},De=ut.effect=new yb(we,nc,()=>Eb(Se),ut.scope),Se=ut.update=()=>{De.dirty&&De.run()};Se.id=ut.uid,Yp(ut,!0),Se()},He=(ut,At,Jt)=>{At.component=ut;const le=ut.vnode.props;ut.vnode=At,ut.next=null,NT(ut,At.props,le,Jt),jT(ut,At.children,Jt),vp(),XA(ut),yp()},Ue=(ut,At,Jt,le,pe,Be,un,we,De=!1)=>{const Se=ut&&ut.children,en=ut?ut.shapeFlag:0,Cn=At.children,{patchFlag:In,shapeFlag:Pn}=At;if(In>0){if(In&128){oi(Se,Cn,Jt,le,pe,Be,un,we,De);return}else if(In&256){ki(Se,Cn,Jt,le,pe,Be,un,we,De);return}}Pn&8?(en&16&&Ai(Se,pe,Be),Cn!==Se&&T(Jt,Cn)):en&16?Pn&16?oi(Se,Cn,Jt,le,pe,Be,un,we,De):Ai(Se,pe,Be,!0):(en&8&&T(Jt,""),Pn&16&&Gt(Cn,Jt,le,pe,Be,un,we,De))},ki=(ut,At,Jt,le,pe,Be,un,we,De)=>{ut=ut||Am,At=At||Am;const Se=ut.length,en=At.length,Cn=Math.min(Se,en);let In;for(In=0;In<Cn;In++){const Pn=At[In]=De?Kf(At[In]):ph(At[In]);H(ut[In],Pn,Jt,null,pe,Be,un,we,De)}Se>en?Ai(ut,pe,Be,!0,!1,Cn):Gt(At,Jt,le,pe,Be,un,we,De,Cn)},oi=(ut,At,Jt,le,pe,Be,un,we,De)=>{let Se=0;const en=At.length;let Cn=ut.length-1,In=en-1;for(;Se<=Cn&&Se<=In;){const Pn=ut[Se],Jn=At[Se]=De?Kf(At[Se]):ph(At[Se]);if(id(Pn,Jn))H(Pn,Jn,Jt,null,pe,Be,un,we,De);else break;Se++}for(;Se<=Cn&&Se<=In;){const Pn=ut[Cn],Jn=At[In]=De?Kf(At[In]):ph(At[In]);if(id(Pn,Jn))H(Pn,Jn,Jt,null,pe,Be,un,we,De);else break;Cn--,In--}if(Se>Cn){if(Se<=In){const Pn=In+1,Jn=Pn<en?At[Pn].el:le;for(;Se<=In;)H(null,At[Se]=De?Kf(At[Se]):ph(At[Se]),Jt,Jn,pe,Be,un,we,De),Se++}}else if(Se>In)for(;Se<=Cn;)gn(ut[Se],pe,Be,!0),Se++;else{const Pn=Se,Jn=Se,Di=new Map;for(Se=Jn;Se<=In;Se++){const Ar=At[Se]=De?Kf(At[Se]):ph(At[Se]);Ar.key!=null&&Di.set(Ar.key,Se)}let Ci,or=0;const Gr=In-Jn+1;let Yo=!1,va=0;const Ra=new Array(Gr);for(Se=0;Se<Gr;Se++)Ra[Se]=0;for(Se=Pn;Se<=Cn;Se++){const Ar=ut[Se];if(or>=Gr){gn(Ar,pe,Be,!0);continue}let So;if(Ar.key!=null)So=Di.get(Ar.key);else for(Ci=Jn;Ci<=In;Ci++)if(Ra[Ci-Jn]===0&&id(Ar,At[Ci])){So=Ci;break}So===void 0?gn(Ar,pe,Be,!0):(Ra[So-Jn]=Se+1,So>=va?va=So:Yo=!0,H(Ar,At[So],Jt,null,pe,Be,un,we,De),or++)}const qa=Yo?WT(Ra):Am;for(Ci=qa.length-1,Se=Gr-1;Se>=0;Se--){const Ar=Jn+Se,So=At[Ar],qs=Ar+1<en?At[Ar+1].el:le;Ra[Se]===0?H(null,So,Jt,qs,pe,Be,un,we,De):Yo&&(Ci<0||Se!==qa[Ci]?Vn(So,Jt,qs,2):Ci--)}}},Vn=(ut,At,Jt,le,pe=null)=>{const{el:Be,type:un,transition:we,children:De,shapeFlag:Se}=ut;if(Se&6){Vn(ut.component.subTree,At,Jt,le);return}if(Se&128){ut.suspense.move(At,Jt,le);return}if(Se&64){un.move(ut,At,Jt,Te);return}if(un===ui){a(Be,At,Jt);for(let Cn=0;Cn<De.length;Cn++)Vn(De[Cn],At,Jt,le);a(ut.anchor,At,Jt);return}if(un===v0){et(ut,At,Jt);return}if(le!==2&&Se&1&&we)if(le===0)we.beforeEnter(Be),a(Be,At,Jt),Hl(()=>we.enter(Be),pe);else{const{leave:Cn,delayLeave:In,afterLeave:Pn}=we,Jn=()=>a(Be,At,Jt),Di=()=>{Cn(Be,()=>{Jn(),Pn&&Pn()})};In?In(Be,Jn,Di):Di()}else a(Be,At,Jt)},gn=(ut,At,Jt,le=!1,pe=!1)=>{const{type:Be,props:un,ref:we,children:De,dynamicChildren:Se,shapeFlag:en,patchFlag:Cn,dirs:In,memoIndex:Pn}=ut;if(we!=null&&Vx(we,null,Jt,ut,!0),Pn!=null&&(At.renderCache[Pn]=void 0),en&256){At.ctx.deactivate(ut);return}const Jn=en&1&&In,Di=!Yg(ut);let Ci;if(Di&&(Ci=un&&un.onVnodeBeforeUnmount)&&ch(Ci,At,ut),en&6)ci(ut.component,Jt,le);else{if(en&128){ut.suspense.unmount(Jt,le);return}Jn&&$p(ut,null,At,"beforeUnmount"),en&64?ut.type.remove(ut,At,Jt,pe,Te,le):Se&&(Be!==ui||Cn>0&&Cn&64)?Ai(Se,At,Jt,!1,!0):(Be===ui&&Cn&384||!pe&&en&16)&&Ai(De,At,Jt),le&&Qn(ut)}(Di&&(Ci=un&&un.onVnodeUnmounted)||Jn)&&Hl(()=>{Ci&&ch(Ci,At,ut),Jn&&$p(ut,null,At,"unmounted")},Jt)},Qn=ut=>{const{type:At,el:Jt,anchor:le,transition:pe}=ut;if(At===ui){Pi(Jt,le);return}if(At===v0){xt(ut);return}const Be=()=>{c(Jt),pe&&!pe.persisted&&pe.afterLeave&&pe.afterLeave()};if(ut.shapeFlag&1&&pe&&!pe.persisted){const{leave:un,delayLeave:we}=pe,De=()=>un(Jt,Be);we?we(ut.el,Be,De):De()}else Be()},Pi=(ut,At)=>{let Jt;for(;ut!==At;)Jt=P(ut),c(ut),ut=Jt;c(At)},ci=(ut,At,Jt)=>{const{bum:le,scope:pe,update:Be,subTree:un,um:we,m:De,a:Se}=ut;aw(De),aw(Se),le&&g0(le),pe.stop(),Be&&(Be.active=!1,gn(un,ut,At,Jt)),we&&Hl(we,At),Hl(()=>{ut.isUnmounted=!0},At),At&&At.pendingBranch&&!At.isUnmounted&&ut.asyncDep&&!ut.asyncResolved&&ut.suspenseId===At.pendingId&&(At.deps--,At.deps===0&&At.resolve())},Ai=(ut,At,Jt,le=!1,pe=!1,Be=0)=>{for(let un=Be;un<ut.length;un++)gn(ut[un],At,Jt,le,pe)},ue=ut=>ut.shapeFlag&6?ue(ut.component.subTree):ut.shapeFlag&128?ut.suspense.next():P(ut.anchor||ut.el);let Qe=!1;const me=(ut,At,Jt)=>{ut==null?At._vnode&&gn(At._vnode,null,null,!0):H(At._vnode||null,ut,At,null,null,null,Jt),Qe||(Qe=!0,XA(),DC(),Qe=!1),At._vnode=ut},Te={p:H,um:gn,m:Vn,r:Qn,mt:de,mc:Gt,pc:Ue,pbc:Qt,n:ue,o:t};let wi,Li;return{render:me,hydrate:wi,createApp:BT(me,wi)}}function $1({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function Yp({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function qT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function kb(t,e,i=!1){const a=t.children,c=e.children;if(Kn(a)&&Kn(c))for(let f=0;f<a.length;f++){const o=a[f];let y=c[f];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=c[f]=Kf(c[f]),y.el=o.el),!i&&y.patchFlag!==-2&&kb(o,y)),y.type===v_&&(y.el=o.el)}}function WT(t){const e=t.slice(),i=[0];let a,c,f,o,y;const _=t.length;for(a=0;a<_;a++){const M=t[a];if(M!==0){if(c=i[i.length-1],t[c]<M){e[a]=c,i.push(a);continue}for(f=0,o=i.length-1;f<o;)y=f+o>>1,t[i[y]]<M?f=y+1:o=y;M<t[i[f]]&&(f>0&&(e[a]=i[f-1]),i[f]=a)}}for(f=i.length,o=i[f-1];f-- >0;)i[f]=o,o=e[o];return i}function XC(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:XC(e)}function aw(t){if(t)for(let e=0;e<t.length;e++)t[e].active=!1}const ZT=Symbol.for("v-scx"),$T=()=>bs(ZT);function YT(t,e){return m_(t,null,e)}function XT(t,e){return m_(t,null,{flush:"sync"})}const r0={};function pl(t,e,i){return m_(t,e,i)}function m_(t,e,{immediate:i,deep:a,flush:c,once:f,onTrack:o,onTrigger:y}=yo){if(e&&f){const It=e;e=(...St)=>{It(...St),Nt()}}const _=ys,M=It=>a===!0?It:ep(It,a===!1?1:void 0);let T,k=!1,P=!1;if(Pa(t)?(T=()=>t.value,k=D0(t)):Zg(t)?(T=()=>M(t),k=!0):Kn(t)?(P=!0,k=t.some(It=>Zg(It)||D0(It)),T=()=>t.map(It=>{if(Pa(It))return It.value;if(Zg(It))return M(It);if(Vi(It))return sp(It,_,2)})):Vi(t)?e?T=()=>sp(t,_,2):T=()=>(O&&O(),ic(t,_,3,[G])):T=nc,e&&a){const It=T;T=()=>ep(It())}let O,G=It=>{O=et.onStop=()=>{sp(It,_,4),O=et.onStop=void 0}},H;if(y_)if(G=nc,e?i&&ic(e,_,3,[T(),P?[]:void 0,G]):T(),c==="sync"){const It=$T();H=It.__watcherHandles||(It.__watcherHandles=[])}else return nc;let X=P?new Array(t.length).fill(r0):r0;const st=()=>{if(!(!et.active||!et.dirty))if(e){const It=et.run();(a||k||(P?It.some((St,Gt)=>yh(St,X[Gt])):yh(It,X)))&&(O&&O(),ic(e,_,3,[It,X===r0?void 0:P&&X[0]===r0?[]:X,G]),X=It)}else et.run()};st.allowRecurse=!!e;let K;c==="sync"?K=st:c==="post"?K=()=>Hl(st,_&&_.suspense):(st.pre=!0,_&&(st.id=_.uid),K=()=>Eb(st));const et=new yb(T,nc,K),xt=dC(),Nt=()=>{et.stop(),xt&&mb(xt.effects,et)};return e?i?st():X=et.run():c==="post"?Hl(et.run.bind(et),_&&_.suspense):et.run(),H&&H.push(Nt),Nt}function KT(t,e,i){const a=this.proxy,c=Wo(t)?t.includes(".")?KC(a,t):()=>a[t]:t.bind(a,a);let f;Vi(e)?f=e:(f=e.handler,i=e);const o=Dv(this),y=m_(c,f.bind(a),i);return o(),y}function KC(t,e){const i=e.split(".");return()=>{let a=t;for(let c=0;c<i.length&&a;c++)a=a[i[c]];return a}}function ep(t,e=1/0,i){if(e<=0||!so(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),e--,Pa(t))ep(t.value,e,i);else if(Kn(t))for(let a=0;a<t.length;a++)ep(t[a],e,i);else if(Nm(t)||wm(t))t.forEach(a=>{ep(a,e,i)});else if(uC(t)){for(const a in t)ep(t[a],e,i);for(const a of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,a)&&ep(t[a],e,i)}return t}const g_=t=>t.type.__isKeepAlive;function QT(t,e){QC(t,"a",e)}function JT(t,e){QC(t,"da",e)}function QC(t,e,i=ys){const a=t.__wdc||(t.__wdc=()=>{let c=i;for(;c;){if(c.isDeactivated)return;c=c.parent}return t()});if(d_(e,a,i),i){let c=i.parent;for(;c&&c.parent;)g_(c.parent.vnode)&&t3(a,e,i,c),c=c.parent}}function t3(t,e,i,a){const c=d_(e,t,a,!0);dd(()=>{mb(a[e],c)},i)}const Xf=Symbol("_leaveCb"),o0=Symbol("_enterCb");function e3(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ml(()=>{t.isMounted=!0}),Lv(()=>{t.isUnmounting=!0}),t}const Xu=[Function,Array],JC={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Xu,onEnter:Xu,onAfterEnter:Xu,onEnterCancelled:Xu,onBeforeLeave:Xu,onLeave:Xu,onAfterLeave:Xu,onLeaveCancelled:Xu,onBeforeAppear:Xu,onAppear:Xu,onAfterAppear:Xu,onAppearCancelled:Xu},tI=t=>{const e=t.subTree;return e.component?tI(e.component):e},n3={name:"BaseTransition",props:JC,setup(t,{slots:e}){const i=Vm(),a=e3();return()=>{const c=e.default&&nI(e.default(),!0);if(!c||!c.length)return;let f=c[0];if(c.length>1){for(const P of c)if(P.type!==Gl){f=P;break}}const o=Fr(t),{mode:y}=o;if(a.isLeaving)return Y1(f);const _=sw(f);if(!_)return Y1(f);let M=Ux(_,o,a,i,P=>M=P);B0(_,M);const T=i.subTree,k=T&&sw(T);if(k&&k.type!==Gl&&!id(_,k)&&tI(i).type!==Gl){const P=Ux(k,o,a,i);if(B0(k,P),y==="out-in"&&_.type!==Gl)return a.isLeaving=!0,P.afterLeave=()=>{a.isLeaving=!1,i.update.active!==!1&&(i.effect.dirty=!0,i.update())},Y1(f);y==="in-out"&&_.type!==Gl&&(P.delayLeave=(O,G,H)=>{const X=eI(a,k);X[String(k.key)]=k,O[Xf]=()=>{G(),O[Xf]=void 0,delete M.delayedLeave},M.delayedLeave=H})}return f}}},i3=n3;function eI(t,e){const{leavingVNodes:i}=t;let a=i.get(e.type);return a||(a=Object.create(null),i.set(e.type,a)),a}function Ux(t,e,i,a,c){const{appear:f,mode:o,persisted:y=!1,onBeforeEnter:_,onEnter:M,onAfterEnter:T,onEnterCancelled:k,onBeforeLeave:P,onLeave:O,onAfterLeave:G,onLeaveCancelled:H,onBeforeAppear:X,onAppear:st,onAfterAppear:K,onAppearCancelled:et}=e,xt=String(t.key),Nt=eI(i,t),It=(Dt,Qt)=>{Dt&&ic(Dt,a,9,Qt)},St=(Dt,Qt)=>{const jt=Qt[1];It(Dt,Qt),Kn(Dt)?Dt.every(Vt=>Vt.length<=1)&&jt():Dt.length<=1&&jt()},Gt={mode:o,persisted:y,beforeEnter(Dt){let Qt=_;if(!i.isMounted)if(f)Qt=X||_;else return;Dt[Xf]&&Dt[Xf](!0);const jt=Nt[xt];jt&&id(t,jt)&&jt.el[Xf]&&jt.el[Xf](),It(Qt,[Dt])},enter(Dt){let Qt=M,jt=T,Vt=k;if(!i.isMounted)if(f)Qt=st||M,jt=K||T,Vt=et||k;else return;let Bt=!1;const de=Dt[o0]=An=>{Bt||(Bt=!0,An?It(Vt,[Dt]):It(jt,[Dt]),Gt.delayedLeave&&Gt.delayedLeave(),Dt[o0]=void 0)};Qt?St(Qt,[Dt,de]):de()},leave(Dt,Qt){const jt=String(t.key);if(Dt[o0]&&Dt[o0](!0),i.isUnmounting)return Qt();It(P,[Dt]);let Vt=!1;const Bt=Dt[Xf]=de=>{Vt||(Vt=!0,Qt(),de?It(H,[Dt]):It(G,[Dt]),Dt[Xf]=void 0,Nt[jt]===t&&delete Nt[jt])};Nt[jt]=t,O?St(O,[Dt,Bt]):Bt()},clone(Dt){const Qt=Ux(Dt,e,i,a,c);return c&&c(Qt),Qt}};return Gt}function Y1(t){if(g_(t))return t=hp(t),t.children=null,t}function sw(t){if(!g_(t))return t;const{shapeFlag:e,children:i}=t;if(i){if(e&16)return i[0];if(e&32&&Vi(i.default))return i.default()}}function B0(t,e){t.shapeFlag&6&&t.component?B0(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function nI(t,e=!1,i){let a=[],c=0;for(let f=0;f<t.length;f++){let o=t[f];const y=i==null?o.key:String(i)+String(o.key!=null?o.key:f);o.type===ui?(o.patchFlag&128&&c++,a=a.concat(nI(o.children,e,y))):(e||o.type!==Gl)&&a.push(y!=null?hp(o,{key:y}):o)}if(c>1)for(let f=0;f<a.length;f++)a[f].patchFlag=-2;return a}const r3=t=>t.__isTeleport,Qg=t=>t&&(t.disabled||t.disabled===""),lw=t=>typeof SVGElement<"u"&&t instanceof SVGElement,uw=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,jx=(t,e)=>{const i=t&&t.to;return Wo(i)?e?e(i):null:i},o3={name:"Teleport",__isTeleport:!0,process(t,e,i,a,c,f,o,y,_,M){const{mc:T,pc:k,pbc:P,o:{insert:O,querySelector:G,createText:H,createComment:X}}=M,st=Qg(e.props);let{shapeFlag:K,children:et,dynamicChildren:xt}=e;if(t==null){const Nt=e.el=H(""),It=e.anchor=H("");O(Nt,i,a),O(It,i,a);const St=e.target=jx(e.props,G),Gt=e.targetAnchor=H("");St&&(O(Gt,St),o==="svg"||lw(St)?o="svg":(o==="mathml"||uw(St))&&(o="mathml"));const Dt=(Qt,jt)=>{K&16&&T(et,Qt,jt,c,f,o,y,_)};st?Dt(i,It):St&&Dt(St,Gt)}else{e.el=t.el;const Nt=e.anchor=t.anchor,It=e.target=t.target,St=e.targetAnchor=t.targetAnchor,Gt=Qg(t.props),Dt=Gt?i:It,Qt=Gt?Nt:St;if(o==="svg"||lw(It)?o="svg":(o==="mathml"||uw(It))&&(o="mathml"),xt?(P(t.dynamicChildren,xt,Dt,c,f,o,y),kb(t,e,!0)):_||k(t,e,Dt,Qt,c,f,o,y,!1),st)Gt?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):a0(e,i,Nt,M,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const jt=e.target=jx(e.props,G);jt&&a0(e,jt,null,M,0)}else Gt&&a0(e,It,St,M,1)}iI(e)},remove(t,e,i,a,{um:c,o:{remove:f}},o){const{shapeFlag:y,children:_,anchor:M,targetAnchor:T,target:k,props:P}=t;if(k&&f(T),o&&f(M),y&16){const O=o||!Qg(P);for(let G=0;G<_.length;G++){const H=_[G];c(H,e,i,O,!!H.dynamicChildren)}}},move:a0,hydrate:a3};function a0(t,e,i,{o:{insert:a},m:c},f=2){f===0&&a(t.targetAnchor,e,i);const{el:o,anchor:y,shapeFlag:_,children:M,props:T}=t,k=f===2;if(k&&a(o,e,i),(!k||Qg(T))&&_&16)for(let P=0;P<M.length;P++)c(M[P],e,i,2);k&&a(y,e,i)}function a3(t,e,i,a,c,f,{o:{nextSibling:o,parentNode:y,querySelector:_}},M){const T=e.target=jx(e.props,_);if(T){const k=T._lpa||T.firstChild;if(e.shapeFlag&16)if(Qg(e.props))e.anchor=M(o(t),e,y(t),i,a,c,f),e.targetAnchor=k;else{e.anchor=o(t);let P=k;for(;P;)if(P=o(P),P&&P.nodeType===8&&P.data==="teleport anchor"){e.targetAnchor=P,T._lpa=e.targetAnchor&&o(e.targetAnchor);break}M(k,e,T,i,a,c,f)}iI(e)}return e.anchor&&o(e.anchor)}const cw=o3;function iI(t){const e=t.ctx;if(e&&e.ut){let i=t.children[0].el;for(;i&&i!==t.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",e.uid),i=i.nextSibling;e.ut()}}const ui=Symbol.for("v-fgt"),v_=Symbol.for("v-txt"),Gl=Symbol.for("v-cmt"),v0=Symbol.for("v-stc"),Jg=[];let zc=null;function mt(t=!1){Jg.push(zc=t?null:[])}function s3(){Jg.pop(),zc=Jg[Jg.length-1]||null}let yv=1;function hw(t){yv+=t}function rI(t){return t.dynamicChildren=yv>0?zc||Am:null,s3(),yv>0&&zc&&zc.push(t),t}function Yt(t,e,i,a,c,f){return rI(_t(t,e,i,a,c,f,!0))}function Oe(t,e,i,a,c){return rI(zt(t,e,i,a,c,!0))}function F0(t){return t?t.__v_isVNode===!0:!1}function id(t,e){return t.type===e.type&&t.key===e.key}const oI=({key:t})=>t??null,y0=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Wo(t)||Pa(t)||Vi(t)?{i:rs,r:t,k:e,f:!!i}:t:null);function _t(t,e=null,i=null,a=0,c=null,f=t===ui?0:1,o=!1,y=!1){const _={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&oI(e),ref:e&&y0(e),scopeId:p_,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:f,patchFlag:a,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:rs};return y?(Lb(_,i),f&128&&t.normalize(_)):i&&(_.shapeFlag|=Wo(i)?8:16),yv>0&&!o&&zc&&(_.patchFlag>0||f&6)&&_.patchFlag!==32&&zc.push(_),_}const zt=l3;function l3(t,e=null,i=null,a=0,c=null,f=!1){if((!t||t===BC)&&(t=Gl),F0(t)){const y=hp(t,e,!0);return i&&Lb(y,i),yv>0&&!f&&zc&&(y.shapeFlag&6?zc[zc.indexOf(t)]=y:zc.push(y)),y.patchFlag=-2,y}if(g3(t)&&(t=t.__vccOpts),e){e=ma(e);let{class:y,style:_}=e;y&&!Wo(y)&&(e.class=Zo(y)),so(_)&&(EC(_)&&!Kn(_)&&(_=da({},_)),e.style=Jr(_))}const o=Wo(t)?1:_T(t)?128:r3(t)?64:so(t)?4:Vi(t)?2:0;return _t(t,e,i,a,c,o,f,!0)}function ma(t){return t?EC(t)||GC(t)?da({},t):t:null}function hp(t,e,i=!1,a=!1){const{props:c,ref:f,patchFlag:o,children:y,transition:_}=t,M=e?er(c||{},e):c,T={__v_isVNode:!0,__v_skip:!0,type:t.type,props:M,key:M&&oI(M),ref:e&&e.ref?i&&f?Kn(f)?f.concat(y0(e)):[f,y0(e)]:y0(e):f,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:y,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ui?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:_,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&hp(t.ssContent),ssFallback:t.ssFallback&&hp(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return _&&a&&B0(T,_.clone(T)),T}function fa(t=" ",e=0){return zt(v_,null,t,e)}function Pb(t,e){const i=zt(v0,null,t);return i.staticCount=e,i}function on(t="",e=!1){return e?(mt(),Oe(Gl,null,t)):zt(Gl,null,t)}function ph(t){return t==null||typeof t=="boolean"?zt(Gl):Kn(t)?zt(ui,null,t.slice()):typeof t=="object"?Kf(t):zt(v_,null,String(t))}function Kf(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:hp(t)}function Lb(t,e){let i=0;const{shapeFlag:a}=t;if(e==null)e=null;else if(Kn(e))i=16;else if(typeof e=="object")if(a&65){const c=e.default;c&&(c._c&&(c._d=!1),Lb(t,c()),c._c&&(c._d=!0));return}else{i=32;const c=e._;!c&&!GC(e)?e._ctx=rs:c===3&&rs&&(rs.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Vi(e)?(e={default:e,_ctx:rs},i=32):(e=String(e),a&64?(i=16,e=[fa(e)]):i=8);t.children=e,t.shapeFlag|=i}function er(...t){const e={};for(let i=0;i<t.length;i++){const a=t[i];for(const c in a)if(c==="class")e.class!==a.class&&(e.class=Zo([e.class,a.class]));else if(c==="style")e.style=Jr([e.style,a.style]);else if(a_(c)){const f=e[c],o=a[c];o&&f!==o&&!(Kn(f)&&f.includes(o))&&(e[c]=f?[].concat(f,o):o)}else c!==""&&(e[c]=a[c])}return e}function ch(t,e,i,a=null){ic(t,e,7,[i,a])}const u3=UC();let c3=0;function h3(t,e,i){const a=t.type,c=(e?e.appContext:t.appContext)||u3,f={uid:c3++,vnode:t,type:a,parent:e,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,scope:new zS(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(c.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:WC(a,c),emitsOptions:zC(a,c),emit:null,emitted:null,propsDefaults:yo,inheritAttrs:a.inheritAttrs,ctx:yo,data:yo,props:yo,attrs:yo,slots:yo,refs:yo,setupState:yo,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return f.ctx={_:f},f.root=e?e.root:f,f.emit=dT.bind(null,f),t.ce&&t.ce(f),f}let ys=null;const Vm=()=>ys||rs;let N0,Hx;{const t=hC(),e=(i,a)=>{let c;return(c=t[i])||(c=t[i]=[]),c.push(a),f=>{c.length>1?c.forEach(o=>o(f)):c[0](f)}};N0=e("__VUE_INSTANCE_SETTERS__",i=>ys=i),Hx=e("__VUE_SSR_SETTERS__",i=>y_=i)}const Dv=t=>{const e=ys;return N0(t),t.scope.on(),()=>{t.scope.off(),N0(e)}},fw=()=>{ys&&ys.scope.off(),N0(null)};function aI(t){return t.vnode.shapeFlag&4}let y_=!1;function f3(t,e=!1){e&&Hx(e);const{props:i,children:a}=t.vnode,c=aI(t);FT(t,i,c,e),UT(t,a);const f=c?p3(t,e):void 0;return e&&Hx(!1),f}function p3(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ST);const{setup:a}=i;if(a){const c=t.setupContext=a.length>1?lI(t):null,f=Dv(t);vp();const o=sp(a,t,0,[t.props,c]);if(yp(),f(),sC(o)){if(o.then(fw,fw),e)return o.then(y=>{pw(t,y,e)}).catch(y=>{h_(y,t,0)});t.asyncDep=o}else pw(t,o,e)}else sI(t,e)}function pw(t,e,i){Vi(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:so(e)&&(t.setupState=kC(e)),sI(t,i)}let dw;function sI(t,e,i){const a=t.type;if(!t.render){if(!e&&dw&&!a.render){const c=a.template||Sb(t).template;if(c){const{isCustomElement:f,compilerOptions:o}=t.appContext.config,{delimiters:y,compilerOptions:_}=a,M=da(da({isCustomElement:f,delimiters:y},o),_);a.render=dw(c,M)}}t.render=a.render||nc}{const c=Dv(t);vp();try{PT(t)}finally{yp(),c()}}}const d3={get(t,e){return ql(t,"get",""),t[e]}};function lI(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,d3),slots:t.slots,emit:t.emit,expose:e}}function __(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(kC(iT(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Xg)return Xg[i](t)},has(e,i){return i in e||i in Xg}})):t.proxy}function m3(t,e=!0){return Vi(t)?t.displayName||t.name:t.name||e&&t.__name}function g3(t){return Vi(t)&&"__vccOpts"in t}const Ge=(t,e)=>rT(t,e,y_);function dl(t,e,i=yo){const a=Vm(),c=Nc(e),f=pd(e),o=lT((_,M)=>{let T;return XT(()=>{const k=t[e];yh(T,k)&&(T=k,M())}),{get(){return _(),i.get?i.get(T):T},set(k){const P=a.vnode.props;!(P&&(e in P||c in P||f in P)&&(`onUpdate:${e}`in P||`onUpdate:${c}`in P||`onUpdate:${f}`in P))&&yh(k,T)&&(T=k,M()),a.emit(`update:${e}`,i.set?i.set(k):k)}}}),y=e==="modelValue"?"modelModifiers":`${e}Modifiers`;return o[Symbol.iterator]=()=>{let _=0;return{next(){return _<2?{value:_++?t[y]||{}:o,done:!1}:{done:!0}}}},o}function _v(t,e,i){const a=arguments.length;return a===2?so(e)&&!Kn(e)?F0(e)?zt(t,null,[e]):zt(t,e):zt(t,null,e):(a>3?i=Array.prototype.slice.call(arguments,2):a===3&&F0(i)&&(i=[i]),zt(t,e,i))}const v3="3.4.29";/**
* @vue/runtime-dom v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const y3="http://www.w3.org/2000/svg",_3="http://www.w3.org/1998/Math/MathML",Jh=typeof document<"u"?document:null,mw=Jh&&Jh.createElement("template"),x3={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,a)=>{const c=e==="svg"?Jh.createElementNS(y3,t):e==="mathml"?Jh.createElementNS(_3,t):i?Jh.createElement(t,{is:i}):Jh.createElement(t);return t==="select"&&a&&a.multiple!=null&&c.setAttribute("multiple",a.multiple),c},createText:t=>Jh.createTextNode(t),createComment:t=>Jh.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Jh.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,a,c,f){const o=i?i.previousSibling:e.lastChild;if(c&&(c===f||c.nextSibling))for(;e.insertBefore(c.cloneNode(!0),i),!(c===f||!(c=c.nextSibling)););else{mw.innerHTML=a==="svg"?`<svg>${t}</svg>`:a==="mathml"?`<math>${t}</math>`:t;const y=mw.content;if(a==="svg"||a==="mathml"){const _=y.firstChild;for(;_.firstChild;)y.appendChild(_.firstChild);y.removeChild(_)}e.insertBefore(y,i)}return[o?o.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},Wf="transition",Lg="animation",xv=Symbol("_vtc"),Db=(t,{slots:e})=>_v(i3,b3(t),e);Db.displayName="Transition";const uI={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Db.props=da({},JC,uI);const Xp=(t,e=[])=>{Kn(t)?t.forEach(i=>i(...e)):t&&t(...e)},gw=t=>t?Kn(t)?t.some(e=>e.length>1):t.length>1:!1;function b3(t){const e={};for(const Vt in t)Vt in uI||(e[Vt]=t[Vt]);if(t.css===!1)return e;const{name:i="v",type:a,duration:c,enterFromClass:f=`${i}-enter-from`,enterActiveClass:o=`${i}-enter-active`,enterToClass:y=`${i}-enter-to`,appearFromClass:_=f,appearActiveClass:M=o,appearToClass:T=y,leaveFromClass:k=`${i}-leave-from`,leaveActiveClass:P=`${i}-leave-active`,leaveToClass:O=`${i}-leave-to`}=t,G=A3(c),H=G&&G[0],X=G&&G[1],{onBeforeEnter:st,onEnter:K,onEnterCancelled:et,onLeave:xt,onLeaveCancelled:Nt,onBeforeAppear:It=st,onAppear:St=K,onAppearCancelled:Gt=et}=e,Dt=(Vt,Bt,de)=>{Kp(Vt,Bt?T:y),Kp(Vt,Bt?M:o),de&&de()},Qt=(Vt,Bt)=>{Vt._isLeaving=!1,Kp(Vt,k),Kp(Vt,O),Kp(Vt,P),Bt&&Bt()},jt=Vt=>(Bt,de)=>{const An=Vt?St:K,_e=()=>Dt(Bt,Vt,de);Xp(An,[Bt,_e]),vw(()=>{Kp(Bt,Vt?_:f),Zf(Bt,Vt?T:y),gw(An)||yw(Bt,a,H,_e)})};return da(e,{onBeforeEnter(Vt){Xp(st,[Vt]),Zf(Vt,f),Zf(Vt,o)},onBeforeAppear(Vt){Xp(It,[Vt]),Zf(Vt,_),Zf(Vt,M)},onEnter:jt(!1),onAppear:jt(!0),onLeave(Vt,Bt){Vt._isLeaving=!0;const de=()=>Qt(Vt,Bt);Zf(Vt,k),Zf(Vt,P),I3(),vw(()=>{Vt._isLeaving&&(Kp(Vt,k),Zf(Vt,O),gw(xt)||yw(Vt,a,X,de))}),Xp(xt,[Vt,de])},onEnterCancelled(Vt){Dt(Vt,!1),Xp(et,[Vt])},onAppearCancelled(Vt){Dt(Vt,!0),Xp(Gt,[Vt])},onLeaveCancelled(Vt){Qt(Vt),Xp(Nt,[Vt])}})}function A3(t){if(t==null)return null;if(so(t))return[X1(t.enter),X1(t.leave)];{const e=X1(t);return[e,e]}}function X1(t){return ES(t)}function Zf(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.add(i)),(t[xv]||(t[xv]=new Set)).add(e)}function Kp(t,e){e.split(/\s+/).forEach(a=>a&&t.classList.remove(a));const i=t[xv];i&&(i.delete(e),i.size||(t[xv]=void 0))}function vw(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let w3=0;function yw(t,e,i,a){const c=t._endId=++w3,f=()=>{c===t._endId&&a()};if(i)return setTimeout(f,i);const{type:o,timeout:y,propCount:_}=C3(t,e);if(!o)return a();const M=o+"end";let T=0;const k=()=>{t.removeEventListener(M,P),f()},P=O=>{O.target===t&&++T>=_&&k()};setTimeout(()=>{T<_&&k()},y+1),t.addEventListener(M,P)}function C3(t,e){const i=window.getComputedStyle(t),a=G=>(i[G]||"").split(", "),c=a(`${Wf}Delay`),f=a(`${Wf}Duration`),o=_w(c,f),y=a(`${Lg}Delay`),_=a(`${Lg}Duration`),M=_w(y,_);let T=null,k=0,P=0;e===Wf?o>0&&(T=Wf,k=o,P=f.length):e===Lg?M>0&&(T=Lg,k=M,P=_.length):(k=Math.max(o,M),T=k>0?o>M?Wf:Lg:null,P=T?T===Wf?f.length:_.length:0);const O=T===Wf&&/\b(transform|all)(,|$)/.test(a(`${Wf}Property`).toString());return{type:T,timeout:k,propCount:P,hasTransform:O}}function _w(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((i,a)=>xw(i)+xw(t[a])))}function xw(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function I3(){return document.body.offsetHeight}function M3(t,e,i){const a=t[xv];a&&(e=(e?[e,...a]:[...a]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const V0=Symbol("_vod"),cI=Symbol("_vsh"),hI={beforeMount(t,{value:e},{transition:i}){t[V0]=t.style.display==="none"?"":t.style.display,i&&e?i.beforeEnter(t):Dg(t,e)},mounted(t,{value:e},{transition:i}){i&&e&&i.enter(t)},updated(t,{value:e,oldValue:i},{transition:a}){!e!=!i&&(a?e?(a.beforeEnter(t),Dg(t,!0),a.enter(t)):a.leave(t,()=>{Dg(t,!1)}):Dg(t,e))},beforeUnmount(t,{value:e}){Dg(t,e)}};function Dg(t,e){t.style.display=e?t[V0]:"none",t[cI]=!e}const E3=Symbol(""),S3=/(^|;)\s*display\s*:/;function T3(t,e,i){const a=t.style,c=Wo(i);let f=!1;if(i&&!c){if(e)if(Wo(e))for(const o of e.split(";")){const y=o.slice(0,o.indexOf(":")).trim();i[y]==null&&_0(a,y,"")}else for(const o in e)i[o]==null&&_0(a,o,"");for(const o in i)o==="display"&&(f=!0),_0(a,o,i[o])}else if(c){if(e!==i){const o=a[E3];o&&(i+=";"+o),a.cssText=i,f=S3.test(i)}}else e&&t.removeAttribute("style");V0 in t&&(t[V0]=f?a.display:"",t[cI]&&(a.display="none"))}const bw=/\s*!important$/;function _0(t,e,i){if(Kn(i))i.forEach(a=>_0(t,e,a));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const a=k3(t,e);bw.test(i)?t.setProperty(pd(a),i.replace(bw,""),"important"):t[a]=i}}const Aw=["Webkit","Moz","ms"],K1={};function k3(t,e){const i=K1[e];if(i)return i;let a=Nc(e);if(a!=="filter"&&a in t)return K1[e]=a;a=l_(a);for(let c=0;c<Aw.length;c++){const f=Aw[c]+a;if(f in t)return K1[e]=f}return e}const ww="http://www.w3.org/1999/xlink";function Cw(t,e,i,a,c,f=DS(e)){a&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(ww,e.slice(6,e.length)):t.setAttributeNS(ww,e,i):i==null||f&&!fC(i)?t.removeAttribute(e):t.setAttribute(e,f?"":String(i))}function P3(t,e,i,a,c,f,o){if(e==="innerHTML"||e==="textContent"){a&&o(a,c,f),t[e]=i??"";return}const y=t.tagName;if(e==="value"&&y!=="PROGRESS"&&!y.includes("-")){const M=y==="OPTION"?t.getAttribute("value")||"":t.value,T=i==null?"":String(i);(M!==T||!("_value"in t))&&(t.value=T),i==null&&t.removeAttribute(e),t._value=i;return}let _=!1;if(i===""||i==null){const M=typeof t[e];M==="boolean"?i=fC(i):i==null&&M==="string"?(i="",_=!0):M==="number"&&(i=0,_=!0)}try{t[e]=i}catch{}_&&t.removeAttribute(e)}function tf(t,e,i,a){t.addEventListener(e,i,a)}function L3(t,e,i,a){t.removeEventListener(e,i,a)}const Iw=Symbol("_vei");function D3(t,e,i,a,c=null){const f=t[Iw]||(t[Iw]={}),o=f[e];if(a&&o)o.value=a;else{const[y,_]=R3(e);if(a){const M=f[e]=B3(a,c);tf(t,y,M,_)}else o&&(L3(t,y,o,_),f[e]=void 0)}}const Mw=/(?:Once|Passive|Capture)$/;function R3(t){let e;if(Mw.test(t)){e={};let a;for(;a=t.match(Mw);)t=t.slice(0,t.length-a[0].length),e[a[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):pd(t.slice(2)),e]}let Q1=0;const z3=Promise.resolve(),O3=()=>Q1||(z3.then(()=>Q1=0),Q1=Date.now());function B3(t,e){const i=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=i.attached)return;ic(F3(a,i.value),e,5,[a])};return i.value=t,i.attached=O3(),i}function F3(t,e){if(Kn(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(a=>c=>!c._stopped&&a&&a(c))}else return e}const Ew=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,N3=(t,e,i,a,c,f,o,y,_)=>{const M=c==="svg";e==="class"?M3(t,a,M):e==="style"?T3(t,i,a):a_(e)?db(e)||D3(t,e,i,a,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):V3(t,e,a,M))?(P3(t,e,a,f,o,y,_),(e==="value"||e==="checked"||e==="selected")&&Cw(t,e,a,M,o,e!=="value")):(e==="true-value"?t._trueValue=a:e==="false-value"&&(t._falseValue=a),Cw(t,e,a,M))};function V3(t,e,i,a){if(a)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ew(e)&&Vi(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const c=t.tagName;if(c==="IMG"||c==="VIDEO"||c==="CANVAS"||c==="SOURCE")return!1}return Ew(e)&&Wo(i)?!1:e in t}const fp=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Kn(e)?i=>g0(e,i):e};function U3(t){t.target.composing=!0}function Sw(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const rc=Symbol("_assign"),pp={created(t,{modifiers:{lazy:e,trim:i,number:a}},c){t[rc]=fp(c);const f=a||c.props&&c.props.type==="number";tf(t,e?"change":"input",o=>{if(o.target.composing)return;let y=t.value;i&&(y=y.trim()),f&&(y=L0(y)),t[rc](y)}),i&&tf(t,"change",()=>{t.value=t.value.trim()}),e||(tf(t,"compositionstart",U3),tf(t,"compositionend",Sw),tf(t,"change",Sw))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:i,modifiers:{lazy:a,trim:c,number:f}},o){if(t[rc]=fp(o),t.composing)return;const y=(f||t.type==="number")&&!/^0\d/.test(t.value)?L0(t.value):t.value,_=e??"";y!==_&&(document.activeElement===t&&t.type!=="range"&&(a&&e===i||c&&t.value.trim()===_)||(t.value=_))}},fI={deep:!0,created(t,e,i){t[rc]=fp(i),tf(t,"change",()=>{const a=t._modelValue,c=km(t),f=t.checked,o=t[rc];if(Kn(a)){const y=vb(a,c),_=y!==-1;if(f&&!_)o(a.concat(c));else if(!f&&_){const M=[...a];M.splice(y,1),o(M)}}else if(Nm(a)){const y=new Set(a);f?y.add(c):y.delete(c),o(y)}else o(pI(t,f))})},mounted:Tw,beforeUpdate(t,e,i){t[rc]=fp(i),Tw(t,e,i)}};function Tw(t,{value:e,oldValue:i},a){t._modelValue=e,Kn(e)?t.checked=vb(e,a.props.value)>-1:Nm(e)?t.checked=e.has(a.props.value):e!==i&&(t.checked=ud(e,pI(t,!0)))}const j3={created(t,{value:e},i){t.checked=ud(e,i.props.value),t[rc]=fp(i),tf(t,"change",()=>{t[rc](km(t))})},beforeUpdate(t,{value:e,oldValue:i},a){t[rc]=fp(a),e!==i&&(t.checked=ud(e,a.props.value))}},Rb={deep:!0,created(t,{value:e,modifiers:{number:i}},a){const c=Nm(e);tf(t,"change",()=>{const f=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?L0(km(o)):km(o));t[rc](t.multiple?c?new Set(f):f:f[0]),t._assigning=!0,xu(()=>{t._assigning=!1})}),t[rc]=fp(a)},mounted(t,{value:e,modifiers:{number:i}}){kw(t,e)},beforeUpdate(t,e,i){t[rc]=fp(i)},updated(t,{value:e,modifiers:{number:i}}){t._assigning||kw(t,e)}};function kw(t,e,i){const a=t.multiple,c=Kn(e);if(!(a&&!c&&!Nm(e))){for(let f=0,o=t.options.length;f<o;f++){const y=t.options[f],_=km(y);if(a)if(c){const M=typeof _;M==="string"||M==="number"?y.selected=e.some(T=>String(T)===String(_)):y.selected=vb(e,_)>-1}else y.selected=e.has(_);else if(ud(km(y),e)){t.selectedIndex!==f&&(t.selectedIndex=f);return}}!a&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function km(t){return"_value"in t?t._value:t.value}function pI(t,e){const i=e?"_trueValue":"_falseValue";return i in t?t[i]:e}const H3={created(t,e,i){s0(t,e,i,null,"created")},mounted(t,e,i){s0(t,e,i,null,"mounted")},beforeUpdate(t,e,i,a){s0(t,e,i,a,"beforeUpdate")},updated(t,e,i,a){s0(t,e,i,a,"updated")}};function G3(t,e){switch(t){case"SELECT":return Rb;case"TEXTAREA":return pp;default:switch(e){case"checkbox":return fI;case"radio":return j3;default:return pp}}}function s0(t,e,i,a,c){const o=G3(t.tagName,i.props&&i.props.type)[c];o&&o(t,e,i,a)}const q3=["ctrl","shift","alt","meta"],W3={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>q3.some(i=>t[`${i}Key`]&&!e.includes(i))},_o=(t,e)=>{const i=t._withMods||(t._withMods={}),a=e.join(".");return i[a]||(i[a]=(c,...f)=>{for(let o=0;o<e.length;o++){const y=W3[e[o]];if(y&&y(c,e))return}return t(c,...f)})},Z3=da({patchProp:N3},x3);let Pw;function $3(){return Pw||(Pw=HT(Z3))}const Y3=(...t)=>{const e=$3().createApp(...t),{mount:i}=e;return e.mount=a=>{const c=K3(a);if(!c)return;const f=e._component;!Vi(f)&&!f.render&&!f.template&&(f.template=c.innerHTML),c.innerHTML="";const o=i(c,!1,X3(c));return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),o},e};function X3(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function K3(t){return Wo(t)?document.querySelector(t):t}/*!
  * vue-router v4.3.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const dm=typeof document<"u";function Q3(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Qr=Object.assign;function J1(t,e){const i={};for(const a in e){const c=e[a];i[a]=Vc(c)?c.map(t):t(c)}return i}const tv=()=>{},Vc=Array.isArray,dI=/#/g,J3=/&/g,t5=/\//g,e5=/=/g,n5=/\?/g,mI=/\+/g,i5=/%5B/g,r5=/%5D/g,gI=/%5E/g,o5=/%60/g,vI=/%7B/g,a5=/%7C/g,yI=/%7D/g,s5=/%20/g;function zb(t){return encodeURI(""+t).replace(a5,"|").replace(i5,"[").replace(r5,"]")}function l5(t){return zb(t).replace(vI,"{").replace(yI,"}").replace(gI,"^")}function Gx(t){return zb(t).replace(mI,"%2B").replace(s5,"+").replace(dI,"%23").replace(J3,"%26").replace(o5,"`").replace(vI,"{").replace(yI,"}").replace(gI,"^")}function u5(t){return Gx(t).replace(e5,"%3D")}function c5(t){return zb(t).replace(dI,"%23").replace(n5,"%3F")}function h5(t){return t==null?"":c5(t).replace(t5,"%2F")}function bv(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const f5=/\/$/,p5=t=>t.replace(f5,"");function tx(t,e,i="/"){let a,c={},f="",o="";const y=e.indexOf("#");let _=e.indexOf("?");return y<_&&y>=0&&(_=-1),_>-1&&(a=e.slice(0,_),f=e.slice(_+1,y>-1?y:e.length),c=t(f)),y>-1&&(a=a||e.slice(0,y),o=e.slice(y,e.length)),a=v5(a??e,i),{fullPath:a+(f&&"?")+f+o,path:a,query:c,hash:bv(o)}}function d5(t,e){const i=e.query?t(e.query):"";return e.path+(i&&"?")+i+(e.hash||"")}function Lw(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function m5(t,e,i){const a=e.matched.length-1,c=i.matched.length-1;return a>-1&&a===c&&Pm(e.matched[a],i.matched[c])&&_I(e.params,i.params)&&t(e.query)===t(i.query)&&e.hash===i.hash}function Pm(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function _I(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!g5(t[i],e[i]))return!1;return!0}function g5(t,e){return Vc(t)?Dw(t,e):Vc(e)?Dw(e,t):t===e}function Dw(t,e){return Vc(e)?t.length===e.length&&t.every((i,a)=>i===e[a]):t.length===1&&t[0]===e}function v5(t,e){if(t.startsWith("/"))return t;if(!t)return e;const i=e.split("/"),a=t.split("/"),c=a[a.length-1];(c===".."||c===".")&&a.push("");let f=i.length-1,o,y;for(o=0;o<a.length;o++)if(y=a[o],y!==".")if(y==="..")f>1&&f--;else break;return i.slice(0,f).join("/")+"/"+a.slice(o).join("/")}var Av;(function(t){t.pop="pop",t.push="push"})(Av||(Av={}));var ev;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ev||(ev={}));function y5(t){if(!t)if(dm){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),p5(t)}const _5=/^[^#]+#/;function x5(t,e){return t.replace(_5,"#")+e}function b5(t,e){const i=document.documentElement.getBoundingClientRect(),a=t.getBoundingClientRect();return{behavior:e.behavior,left:a.left-i.left-(e.left||0),top:a.top-i.top-(e.top||0)}}const x_=()=>({left:window.scrollX,top:window.scrollY});function A5(t){let e;if("el"in t){const i=t.el,a=typeof i=="string"&&i.startsWith("#"),c=typeof i=="string"?a?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!c)return;e=b5(c,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Rw(t,e){return(history.state?history.state.position-e:-1)+t}const qx=new Map;function w5(t,e){qx.set(t,e)}function C5(t){const e=qx.get(t);return qx.delete(t),e}let I5=()=>location.protocol+"//"+location.host;function xI(t,e){const{pathname:i,search:a,hash:c}=e,f=t.indexOf("#");if(f>-1){let y=c.includes(t.slice(f))?t.slice(f).length:1,_=c.slice(y);return _[0]!=="/"&&(_="/"+_),Lw(_,"")}return Lw(i,t)+a+c}function M5(t,e,i,a){let c=[],f=[],o=null;const y=({state:P})=>{const O=xI(t,location),G=i.value,H=e.value;let X=0;if(P){if(i.value=O,e.value=P,o&&o===G){o=null;return}X=H?P.position-H.position:0}else a(O);c.forEach(st=>{st(i.value,G,{delta:X,type:Av.pop,direction:X?X>0?ev.forward:ev.back:ev.unknown})})};function _(){o=i.value}function M(P){c.push(P);const O=()=>{const G=c.indexOf(P);G>-1&&c.splice(G,1)};return f.push(O),O}function T(){const{history:P}=window;P.state&&P.replaceState(Qr({},P.state,{scroll:x_()}),"")}function k(){for(const P of f)P();f=[],window.removeEventListener("popstate",y),window.removeEventListener("beforeunload",T)}return window.addEventListener("popstate",y),window.addEventListener("beforeunload",T,{passive:!0}),{pauseListeners:_,listen:M,destroy:k}}function zw(t,e,i,a=!1,c=!1){return{back:t,current:e,forward:i,replaced:a,position:window.history.length,scroll:c?x_():null}}function E5(t){const{history:e,location:i}=window,a={value:xI(t,i)},c={value:e.state};c.value||f(a.value,{back:null,current:a.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function f(_,M,T){const k=t.indexOf("#"),P=k>-1?(i.host&&document.querySelector("base")?t:t.slice(k))+_:I5()+t+_;try{e[T?"replaceState":"pushState"](M,"",P),c.value=M}catch(O){console.error(O),i[T?"replace":"assign"](P)}}function o(_,M){const T=Qr({},e.state,zw(c.value.back,_,c.value.forward,!0),M,{position:c.value.position});f(_,T,!0),a.value=_}function y(_,M){const T=Qr({},c.value,e.state,{forward:_,scroll:x_()});f(T.current,T,!0);const k=Qr({},zw(a.value,_,null),{position:T.position+1},M);f(_,k,!1),a.value=_}return{location:a,state:c,push:y,replace:o}}function S5(t){t=y5(t);const e=E5(t),i=M5(t,e.state,e.location,e.replace);function a(f,o=!0){o||i.pauseListeners(),history.go(f)}const c=Qr({location:"",base:t,go:a,createHref:x5.bind(null,t)},e,i);return Object.defineProperty(c,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(c,"state",{enumerable:!0,get:()=>e.state.value}),c}function T5(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),S5(t)}function k5(t){return typeof t=="string"||t&&typeof t=="object"}function bI(t){return typeof t=="string"||typeof t=="symbol"}const $f={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},AI=Symbol("");var Ow;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Ow||(Ow={}));function Lm(t,e){return Qr(new Error,{type:t,[AI]:!0},e)}function Yh(t,e){return t instanceof Error&&AI in t&&(e==null||!!(t.type&e))}const Bw="[^/]+?",P5={sensitive:!1,strict:!1,start:!0,end:!0},L5=/[.+*?^${}()[\]/\\]/g;function D5(t,e){const i=Qr({},P5,e),a=[];let c=i.start?"^":"";const f=[];for(const M of t){const T=M.length?[]:[90];i.strict&&!M.length&&(c+="/");for(let k=0;k<M.length;k++){const P=M[k];let O=40+(i.sensitive?.25:0);if(P.type===0)k||(c+="/"),c+=P.value.replace(L5,"\\$&"),O+=40;else if(P.type===1){const{value:G,repeatable:H,optional:X,regexp:st}=P;f.push({name:G,repeatable:H,optional:X});const K=st||Bw;if(K!==Bw){O+=10;try{new RegExp(`(${K})`)}catch(xt){throw new Error(`Invalid custom RegExp for param "${G}" (${K}): `+xt.message)}}let et=H?`((?:${K})(?:/(?:${K}))*)`:`(${K})`;k||(et=X&&M.length<2?`(?:/${et})`:"/"+et),X&&(et+="?"),c+=et,O+=20,X&&(O+=-8),H&&(O+=-20),K===".*"&&(O+=-50)}T.push(O)}a.push(T)}if(i.strict&&i.end){const M=a.length-1;a[M][a[M].length-1]+=.7000000000000001}i.strict||(c+="/?"),i.end?c+="$":i.strict&&(c+="(?:/|$)");const o=new RegExp(c,i.sensitive?"":"i");function y(M){const T=M.match(o),k={};if(!T)return null;for(let P=1;P<T.length;P++){const O=T[P]||"",G=f[P-1];k[G.name]=O&&G.repeatable?O.split("/"):O}return k}function _(M){let T="",k=!1;for(const P of t){(!k||!T.endsWith("/"))&&(T+="/"),k=!1;for(const O of P)if(O.type===0)T+=O.value;else if(O.type===1){const{value:G,repeatable:H,optional:X}=O,st=G in M?M[G]:"";if(Vc(st)&&!H)throw new Error(`Provided param "${G}" is an array but it is not repeatable (* or + modifiers)`);const K=Vc(st)?st.join("/"):st;if(!K)if(X)P.length<2&&(T.endsWith("/")?T=T.slice(0,-1):k=!0);else throw new Error(`Missing required param "${G}"`);T+=K}}return T||"/"}return{re:o,score:a,keys:f,parse:y,stringify:_}}function R5(t,e){let i=0;for(;i<t.length&&i<e.length;){const a=e[i]-t[i];if(a)return a;i++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function wI(t,e){let i=0;const a=t.score,c=e.score;for(;i<a.length&&i<c.length;){const f=R5(a[i],c[i]);if(f)return f;i++}if(Math.abs(c.length-a.length)===1){if(Fw(a))return 1;if(Fw(c))return-1}return c.length-a.length}function Fw(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const z5={type:0,value:""},O5=/[a-zA-Z0-9_]/;function B5(t){if(!t)return[[]];if(t==="/")return[[z5]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(O){throw new Error(`ERR (${i})/"${M}": ${O}`)}let i=0,a=i;const c=[];let f;function o(){f&&c.push(f),f=[]}let y=0,_,M="",T="";function k(){M&&(i===0?f.push({type:0,value:M}):i===1||i===2||i===3?(f.length>1&&(_==="*"||_==="+")&&e(`A repeatable param (${M}) must be alone in its segment. eg: '/:ids+.`),f.push({type:1,value:M,regexp:T,repeatable:_==="*"||_==="+",optional:_==="*"||_==="?"})):e("Invalid state to consume buffer"),M="")}function P(){M+=_}for(;y<t.length;){if(_=t[y++],_==="\\"&&i!==2){a=i,i=4;continue}switch(i){case 0:_==="/"?(M&&k(),o()):_===":"?(k(),i=1):P();break;case 4:P(),i=a;break;case 1:_==="("?i=2:O5.test(_)?P():(k(),i=0,_!=="*"&&_!=="?"&&_!=="+"&&y--);break;case 2:_===")"?T[T.length-1]=="\\"?T=T.slice(0,-1)+_:i=3:T+=_;break;case 3:k(),i=0,_!=="*"&&_!=="?"&&_!=="+"&&y--,T="";break;default:e("Unknown state");break}}return i===2&&e(`Unfinished custom RegExp for param "${M}"`),k(),o(),c}function F5(t,e,i){const a=D5(B5(t.path),i),c=Qr(a,{record:t,parent:e,children:[],alias:[]});return e&&!c.record.aliasOf==!e.record.aliasOf&&e.children.push(c),c}function N5(t,e){const i=[],a=new Map;e=Uw({strict:!1,end:!0,sensitive:!1},e);function c(T){return a.get(T)}function f(T,k,P){const O=!P,G=V5(T);G.aliasOf=P&&P.record;const H=Uw(e,T),X=[G];if("alias"in T){const et=typeof T.alias=="string"?[T.alias]:T.alias;for(const xt of et)X.push(Qr({},G,{components:P?P.record.components:G.components,path:xt,aliasOf:P?P.record:G}))}let st,K;for(const et of X){const{path:xt}=et;if(k&&xt[0]!=="/"){const Nt=k.record.path,It=Nt[Nt.length-1]==="/"?"":"/";et.path=k.record.path+(xt&&It+xt)}if(st=F5(et,k,H),P?P.alias.push(st):(K=K||st,K!==st&&K.alias.push(st),O&&T.name&&!Vw(st)&&o(T.name)),CI(st)&&_(st),G.children){const Nt=G.children;for(let It=0;It<Nt.length;It++)f(Nt[It],st,P&&P.children[It])}P=P||st}return K?()=>{o(K)}:tv}function o(T){if(bI(T)){const k=a.get(T);k&&(a.delete(T),i.splice(i.indexOf(k),1),k.children.forEach(o),k.alias.forEach(o))}else{const k=i.indexOf(T);k>-1&&(i.splice(k,1),T.record.name&&a.delete(T.record.name),T.children.forEach(o),T.alias.forEach(o))}}function y(){return i}function _(T){const k=H5(T,i);i.splice(k,0,T),T.record.name&&!Vw(T)&&a.set(T.record.name,T)}function M(T,k){let P,O={},G,H;if("name"in T&&T.name){if(P=a.get(T.name),!P)throw Lm(1,{location:T});H=P.record.name,O=Qr(Nw(k.params,P.keys.filter(K=>!K.optional).concat(P.parent?P.parent.keys.filter(K=>K.optional):[]).map(K=>K.name)),T.params&&Nw(T.params,P.keys.map(K=>K.name))),G=P.stringify(O)}else if(T.path!=null)G=T.path,P=i.find(K=>K.re.test(G)),P&&(O=P.parse(G),H=P.record.name);else{if(P=k.name?a.get(k.name):i.find(K=>K.re.test(k.path)),!P)throw Lm(1,{location:T,currentLocation:k});H=P.record.name,O=Qr({},k.params,T.params),G=P.stringify(O)}const X=[];let st=P;for(;st;)X.unshift(st.record),st=st.parent;return{name:H,path:G,params:O,matched:X,meta:j5(X)}}return t.forEach(T=>f(T)),{addRoute:f,resolve:M,removeRoute:o,getRoutes:y,getRecordMatcher:c}}function Nw(t,e){const i={};for(const a of e)a in t&&(i[a]=t[a]);return i}function V5(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:U5(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function U5(t){const e={},i=t.props||!1;if("component"in t)e.default=i;else for(const a in t.components)e[a]=typeof i=="object"?i[a]:i;return e}function Vw(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function j5(t){return t.reduce((e,i)=>Qr(e,i.meta),{})}function Uw(t,e){const i={};for(const a in t)i[a]=a in e?e[a]:t[a];return i}function H5(t,e){let i=0,a=e.length;for(;i!==a;){const f=i+a>>1;wI(t,e[f])<0?a=f:i=f+1}const c=G5(t);return c&&(a=e.lastIndexOf(c,a-1)),a}function G5(t){let e=t;for(;e=e.parent;)if(CI(e)&&wI(t,e)===0)return e}function CI({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function q5(t){const e={};if(t===""||t==="?")return e;const a=(t[0]==="?"?t.slice(1):t).split("&");for(let c=0;c<a.length;++c){const f=a[c].replace(mI," "),o=f.indexOf("="),y=bv(o<0?f:f.slice(0,o)),_=o<0?null:bv(f.slice(o+1));if(y in e){let M=e[y];Vc(M)||(M=e[y]=[M]),M.push(_)}else e[y]=_}return e}function jw(t){let e="";for(let i in t){const a=t[i];if(i=u5(i),a==null){a!==void 0&&(e+=(e.length?"&":"")+i);continue}(Vc(a)?a.map(f=>f&&Gx(f)):[a&&Gx(a)]).forEach(f=>{f!==void 0&&(e+=(e.length?"&":"")+i,f!=null&&(e+="="+f))})}return e}function W5(t){const e={};for(const i in t){const a=t[i];a!==void 0&&(e[i]=Vc(a)?a.map(c=>c==null?null:""+c):a==null?a:""+a)}return e}const Z5=Symbol(""),Hw=Symbol(""),Ob=Symbol(""),II=Symbol(""),Wx=Symbol("");function Rg(){let t=[];function e(a){return t.push(a),()=>{const c=t.indexOf(a);c>-1&&t.splice(c,1)}}function i(){t=[]}return{add:e,list:()=>t.slice(),reset:i}}function Qf(t,e,i,a,c,f=o=>o()){const o=a&&(a.enterCallbacks[c]=a.enterCallbacks[c]||[]);return()=>new Promise((y,_)=>{const M=P=>{P===!1?_(Lm(4,{from:i,to:e})):P instanceof Error?_(P):k5(P)?_(Lm(2,{from:e,to:P})):(o&&a.enterCallbacks[c]===o&&typeof P=="function"&&o.push(P),y())},T=f(()=>t.call(a&&a.instances[c],e,i,M));let k=Promise.resolve(T);t.length<3&&(k=k.then(M)),k.catch(P=>_(P))})}function ex(t,e,i,a,c=f=>f()){const f=[];for(const o of t)for(const y in o.components){let _=o.components[y];if(!(e!=="beforeRouteEnter"&&!o.instances[y]))if($5(_)){const T=(_.__vccOpts||_)[e];T&&f.push(Qf(T,i,a,o,y,c))}else{let M=_();f.push(()=>M.then(T=>{if(!T)return Promise.reject(new Error(`Couldn't resolve component "${y}" at "${o.path}"`));const k=Q3(T)?T.default:T;o.components[y]=k;const O=(k.__vccOpts||k)[e];return O&&Qf(O,i,a,o,y,c)()}))}}return f}function $5(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Gw(t){const e=bs(Ob),i=bs(II),a=Ge(()=>{const _=$(t.to);return e.resolve(_)}),c=Ge(()=>{const{matched:_}=a.value,{length:M}=_,T=_[M-1],k=i.matched;if(!T||!k.length)return-1;const P=k.findIndex(Pm.bind(null,T));if(P>-1)return P;const O=qw(_[M-2]);return M>1&&qw(T)===O&&k[k.length-1].path!==O?k.findIndex(Pm.bind(null,_[M-2])):P}),f=Ge(()=>c.value>-1&&Q5(i.params,a.value.params)),o=Ge(()=>c.value>-1&&c.value===i.matched.length-1&&_I(i.params,a.value.params));function y(_={}){return K5(_)?e[$(t.replace)?"replace":"push"]($(t.to)).catch(tv):Promise.resolve()}return{route:a,href:Ge(()=>a.value.href),isActive:f,isExactActive:o,navigate:y}}const Y5=Fi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Gw,setup(t,{slots:e}){const i=Wl(Gw(t)),{options:a}=bs(Ob),c=Ge(()=>({[Ww(t.activeClass,a.linkActiveClass,"router-link-active")]:i.isActive,[Ww(t.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const f=e.default&&e.default(i);return t.custom?f:_v("a",{"aria-current":i.isExactActive?t.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:c.value},f)}}}),X5=Y5;function K5(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Q5(t,e){for(const i in e){const a=e[i],c=t[i];if(typeof a=="string"){if(a!==c)return!1}else if(!Vc(c)||c.length!==a.length||a.some((f,o)=>f!==c[o]))return!1}return!0}function qw(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Ww=(t,e,i)=>t??e??i,J5=Fi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:i}){const a=bs(Wx),c=Ge(()=>t.route||a.value),f=bs(Hw,0),o=Ge(()=>{let M=$(f);const{matched:T}=c.value;let k;for(;(k=T[M])&&!k.components;)M++;return M}),y=Ge(()=>c.value.matched[o.value]);ld(Hw,Ge(()=>o.value+1)),ld(Z5,y),ld(Wx,c);const _=$e();return pl(()=>[_.value,y.value,t.name],([M,T,k],[P,O,G])=>{T&&(T.instances[k]=M,O&&O!==T&&M&&M===P&&(T.leaveGuards.size||(T.leaveGuards=O.leaveGuards),T.updateGuards.size||(T.updateGuards=O.updateGuards))),M&&T&&(!O||!Pm(T,O)||!P)&&(T.enterCallbacks[k]||[]).forEach(H=>H(M))},{flush:"post"}),()=>{const M=c.value,T=t.name,k=y.value,P=k&&k.components[T];if(!P)return Zw(i.default,{Component:P,route:M});const O=k.props[T],G=O?O===!0?M.params:typeof O=="function"?O(M):O:null,X=_v(P,Qr({},G,e,{onVnodeUnmounted:st=>{st.component.isUnmounted&&(k.instances[T]=null)},ref:_}));return Zw(i.default,{Component:X,route:M})||X}}});function Zw(t,e){if(!t)return null;const i=t(e);return i.length===1?i[0]:i}const MI=J5;function t4(t){const e=N5(t.routes,t),i=t.parseQuery||q5,a=t.stringifyQuery||jw,c=t.history,f=Rg(),o=Rg(),y=Rg(),_=Pv($f);let M=$f;dm&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const T=J1.bind(null,ue=>""+ue),k=J1.bind(null,h5),P=J1.bind(null,bv);function O(ue,Qe){let me,Te;return bI(ue)?(me=e.getRecordMatcher(ue),Te=Qe):Te=ue,e.addRoute(Te,me)}function G(ue){const Qe=e.getRecordMatcher(ue);Qe&&e.removeRoute(Qe)}function H(){return e.getRoutes().map(ue=>ue.record)}function X(ue){return!!e.getRecordMatcher(ue)}function st(ue,Qe){if(Qe=Qr({},Qe||_.value),typeof ue=="string"){const At=tx(i,ue,Qe.path),Jt=e.resolve({path:At.path},Qe),le=c.createHref(At.fullPath);return Qr(At,Jt,{params:P(Jt.params),hash:bv(At.hash),redirectedFrom:void 0,href:le})}let me;if(ue.path!=null)me=Qr({},ue,{path:tx(i,ue.path,Qe.path).path});else{const At=Qr({},ue.params);for(const Jt in At)At[Jt]==null&&delete At[Jt];me=Qr({},ue,{params:k(At)}),Qe.params=k(Qe.params)}const Te=e.resolve(me,Qe),wi=ue.hash||"";Te.params=T(P(Te.params));const Li=d5(a,Qr({},ue,{hash:l5(wi),path:Te.path})),ut=c.createHref(Li);return Qr({fullPath:Li,hash:wi,query:a===jw?W5(ue.query):ue.query||{}},Te,{redirectedFrom:void 0,href:ut})}function K(ue){return typeof ue=="string"?tx(i,ue,_.value.path):Qr({},ue)}function et(ue,Qe){if(M!==ue)return Lm(8,{from:Qe,to:ue})}function xt(ue){return St(ue)}function Nt(ue){return xt(Qr(K(ue),{replace:!0}))}function It(ue){const Qe=ue.matched[ue.matched.length-1];if(Qe&&Qe.redirect){const{redirect:me}=Qe;let Te=typeof me=="function"?me(ue):me;return typeof Te=="string"&&(Te=Te.includes("?")||Te.includes("#")?Te=K(Te):{path:Te},Te.params={}),Qr({query:ue.query,hash:ue.hash,params:Te.path!=null?{}:ue.params},Te)}}function St(ue,Qe){const me=M=st(ue),Te=_.value,wi=ue.state,Li=ue.force,ut=ue.replace===!0,At=It(me);if(At)return St(Qr(K(At),{state:typeof At=="object"?Qr({},wi,At.state):wi,force:Li,replace:ut}),Qe||me);const Jt=me;Jt.redirectedFrom=Qe;let le;return!Li&&m5(a,Te,me)&&(le=Lm(16,{to:Jt,from:Te}),Vn(Te,Te,!0,!1)),(le?Promise.resolve(le):Qt(Jt,Te)).catch(pe=>Yh(pe)?Yh(pe,2)?pe:oi(pe):Ue(pe,Jt,Te)).then(pe=>{if(pe){if(Yh(pe,2))return St(Qr({replace:ut},K(pe.to),{state:typeof pe.to=="object"?Qr({},wi,pe.to.state):wi,force:Li}),Qe||Jt)}else pe=Vt(Jt,Te,!0,ut,wi);return jt(Jt,Te,pe),pe})}function Gt(ue,Qe){const me=et(ue,Qe);return me?Promise.reject(me):Promise.resolve()}function Dt(ue){const Qe=Pi.values().next().value;return Qe&&typeof Qe.runWithContext=="function"?Qe.runWithContext(ue):ue()}function Qt(ue,Qe){let me;const[Te,wi,Li]=e4(ue,Qe);me=ex(Te.reverse(),"beforeRouteLeave",ue,Qe);for(const At of Te)At.leaveGuards.forEach(Jt=>{me.push(Qf(Jt,ue,Qe))});const ut=Gt.bind(null,ue,Qe);return me.push(ut),Ai(me).then(()=>{me=[];for(const At of f.list())me.push(Qf(At,ue,Qe));return me.push(ut),Ai(me)}).then(()=>{me=ex(wi,"beforeRouteUpdate",ue,Qe);for(const At of wi)At.updateGuards.forEach(Jt=>{me.push(Qf(Jt,ue,Qe))});return me.push(ut),Ai(me)}).then(()=>{me=[];for(const At of Li)if(At.beforeEnter)if(Vc(At.beforeEnter))for(const Jt of At.beforeEnter)me.push(Qf(Jt,ue,Qe));else me.push(Qf(At.beforeEnter,ue,Qe));return me.push(ut),Ai(me)}).then(()=>(ue.matched.forEach(At=>At.enterCallbacks={}),me=ex(Li,"beforeRouteEnter",ue,Qe,Dt),me.push(ut),Ai(me))).then(()=>{me=[];for(const At of o.list())me.push(Qf(At,ue,Qe));return me.push(ut),Ai(me)}).catch(At=>Yh(At,8)?At:Promise.reject(At))}function jt(ue,Qe,me){y.list().forEach(Te=>Dt(()=>Te(ue,Qe,me)))}function Vt(ue,Qe,me,Te,wi){const Li=et(ue,Qe);if(Li)return Li;const ut=Qe===$f,At=dm?history.state:{};me&&(Te||ut?c.replace(ue.fullPath,Qr({scroll:ut&&At&&At.scroll},wi)):c.push(ue.fullPath,wi)),_.value=ue,Vn(ue,Qe,me,ut),oi()}let Bt;function de(){Bt||(Bt=c.listen((ue,Qe,me)=>{if(!ci.listening)return;const Te=st(ue),wi=It(Te);if(wi){St(Qr(wi,{replace:!0}),Te).catch(tv);return}M=Te;const Li=_.value;dm&&w5(Rw(Li.fullPath,me.delta),x_()),Qt(Te,Li).catch(ut=>Yh(ut,12)?ut:Yh(ut,2)?(St(ut.to,Te).then(At=>{Yh(At,20)&&!me.delta&&me.type===Av.pop&&c.go(-1,!1)}).catch(tv),Promise.reject()):(me.delta&&c.go(-me.delta,!1),Ue(ut,Te,Li))).then(ut=>{ut=ut||Vt(Te,Li,!1),ut&&(me.delta&&!Yh(ut,8)?c.go(-me.delta,!1):me.type===Av.pop&&Yh(ut,20)&&c.go(-1,!1)),jt(Te,Li,ut)}).catch(tv)}))}let An=Rg(),_e=Rg(),He;function Ue(ue,Qe,me){oi(ue);const Te=_e.list();return Te.length?Te.forEach(wi=>wi(ue,Qe,me)):console.error(ue),Promise.reject(ue)}function ki(){return He&&_.value!==$f?Promise.resolve():new Promise((ue,Qe)=>{An.add([ue,Qe])})}function oi(ue){return He||(He=!ue,de(),An.list().forEach(([Qe,me])=>ue?me(ue):Qe()),An.reset()),ue}function Vn(ue,Qe,me,Te){const{scrollBehavior:wi}=t;if(!dm||!wi)return Promise.resolve();const Li=!me&&C5(Rw(ue.fullPath,0))||(Te||!me)&&history.state&&history.state.scroll||null;return xu().then(()=>wi(ue,Qe,Li)).then(ut=>ut&&A5(ut)).catch(ut=>Ue(ut,ue,Qe))}const gn=ue=>c.go(ue);let Qn;const Pi=new Set,ci={currentRoute:_,listening:!0,addRoute:O,removeRoute:G,hasRoute:X,getRoutes:H,resolve:st,options:t,push:xt,replace:Nt,go:gn,back:()=>gn(-1),forward:()=>gn(1),beforeEach:f.add,beforeResolve:o.add,afterEach:y.add,onError:_e.add,isReady:ki,install(ue){const Qe=this;ue.component("RouterLink",X5),ue.component("RouterView",MI),ue.config.globalProperties.$router=Qe,Object.defineProperty(ue.config.globalProperties,"$route",{enumerable:!0,get:()=>$(_)}),dm&&!Qn&&_.value===$f&&(Qn=!0,xt(c.location).catch(wi=>{}));const me={};for(const wi in $f)Object.defineProperty(me,wi,{get:()=>_.value[wi],enumerable:!0});ue.provide(Ob,Qe),ue.provide(II,MC(me)),ue.provide(Wx,_);const Te=ue.unmount;Pi.add(ue),ue.unmount=function(){Pi.delete(ue),Pi.size<1&&(M=$f,Bt&&Bt(),Bt=null,_.value=$f,Qn=!1,He=!1),Te()}}};function Ai(ue){return ue.reduce((Qe,me)=>Qe.then(()=>Dt(me)),Promise.resolve())}return ci}function e4(t,e){const i=[],a=[],c=[],f=Math.max(e.matched.length,t.matched.length);for(let o=0;o<f;o++){const y=e.matched[o];y&&(t.matched.find(M=>Pm(M,y))?a.push(y):i.push(y));const _=t.matched[o];_&&(e.matched.find(M=>Pm(M,_))||c.push(_))}return[i,a,c]}var n4="M17.45,17.55L12,23L6.55,17.55L7.96,16.14L11,19.17V4.83L7.96,7.86L6.55,6.45L12,1L17.45,6.45L16.04,7.86L13,4.83V19.17L16.04,16.14L17.45,17.55Z",i4="M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12",r4="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",o4="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",a4="M12,10A2,2 0 0,0 10,12C10,13.11 10.9,14 12,14C13.11,14 14,13.11 14,12A2,2 0 0,0 12,10Z",Dm="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",s4="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",EI="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z",l4="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",u4="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",SI="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z",Rv="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z",c4="M20.94 11C20.5 6.83 17.17 3.5 13 3.06V1H11V3.06C9.87 3.18 8.81 3.5 7.84 4.03L9.34 5.53C10.16 5.19 11.06 5 12 5C15.87 5 19 8.13 19 12C19 12.94 18.81 13.84 18.5 14.65L20 16.15C20.5 15.19 20.82 14.13 20.95 13H23V11H20.94M3 4.27L5.04 6.31C3.97 7.62 3.25 9.23 3.06 11H1V13H3.06C3.5 17.17 6.83 20.5 11 20.94V23H13V20.94C14.77 20.74 16.38 20.03 17.69 18.96L19.73 21L21 19.73L4.27 3L3 4.27M16.27 17.54C15.09 18.45 13.61 19 12 19C8.13 19 5 15.87 5 12C5 10.39 5.55 8.91 6.46 7.73L16.27 17.54Z",h4="M13.75,10.19L14.38,10.32L18.55,12.4C19.25,12.63 19.71,13.32 19.65,14.06V14.19L19.65,14.32L18.75,20.44C18.69,20.87 18.5,21.27 18.15,21.55C17.84,21.85 17.43,22 17,22H10.12C9.63,22 9.18,21.82 8.85,21.47L2.86,15.5L3.76,14.5C4,14.25 4.38,14.11 4.74,14.13H5.03L9,15V4.5A2,2 0 0,1 11,2.5A2,2 0 0,1 13,4.5V10.19H13.75Z",Um="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",Bb="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",Fb="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",f4="M13,5V11H14.17L12,13.17L9.83,11H11V5H13M15,3H9V9H5L12,16L19,9H15V3M19,18H5V20H19V18Z",p4="M9.75 20.85C11.53 20.15 11.14 18.22 10.24 17C9.35 15.75 8.12 14.89 6.88 14.06C6 13.5 5.19 12.8 4.54 12C4.26 11.67 3.69 11.06 4.27 10.94C4.86 10.82 5.88 11.4 6.4 11.62C7.31 12 8.21 12.44 9.05 12.96L10.06 11.26C8.5 10.23 6.5 9.32 4.64 9.05C3.58 8.89 2.46 9.11 2.1 10.26C1.78 11.25 2.29 12.25 2.87 13.03C4.24 14.86 6.37 15.74 7.96 17.32C8.3 17.65 8.71 18.04 8.91 18.5C9.12 18.94 9.07 18.97 8.6 18.97C7.36 18.97 5.81 18 4.8 17.36L3.79 19.06C5.32 20 7.88 21.47 9.75 20.85M20.84 5.25C21.06 5.03 21.06 4.67 20.84 4.46L19.54 3.16C19.33 2.95 18.97 2.95 18.76 3.16L17.74 4.18L19.82 6.26M11 10.92V13H13.08L19.23 6.85L17.15 4.77L11 10.92Z",Nb="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",Vb="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z",d4="M3,16H8V14H3V16M9.5,16H14.5V14H9.5V16M16,16H21V14H16V16M3,20H5V18H3V20M7,20H9V18H7V20M11,20H13V18H11V20M15,20H17V18H15V20M19,20H21V18H19V20M3,12H11V10H3V12M13,12H21V10H13V12M3,4V8H21V4H3Z",m4="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z",g4="M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z",TI="M1,1V5H2V19H1V23H5V22H19V23H23V19H22V5H23V1H19V2H5V1M5,4H19V5H20V19H19V20H5V19H4V5H5M6,6V14H9V18H18V9H14V6M8,8H12V12H8M14,11H16V16H11V14H14",v4="M14,3V13L17.2,11.31L17.42,11.28C17.71,11.28 17.97,11.4 18.16,11.6L18.9,12.37L14,16.57C13.74,16.84 13.39,17 13,17H6.5C5.73,17 5,16.3 5,15.5V11.14C5,10.53 5.35,10 5.85,9.8L10.79,7.6L12,7.47V3A1,1 0 0,1 13,2A1,1 0 0,1 14,3M5,19H13V22H5V19Z",y4="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",_4="M19 3H5A2 2 0 0 0 3 5V19A2 2 0 0 0 5 21H19A2 2 0 0 0 21 19V5A2 2 0 0 0 19 3M5 19V17H8.13A4.13 4.13 0 0 0 9.4 19M19 19H14.6A4.13 4.13 0 0 0 15.87 17H19M19 15H14V16A2 2 0 0 1 10 16V15H5V5H19Z",x4="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",b_="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z",b4="M12,18.54L19.37,12.8L21,14.07L12,21.07L3,14.07L4.62,12.81L12,18.54M12,16L3,9L12,2L21,9L12,16M12,4.53L6.26,9L12,13.47L17.74,9L12,4.53Z",Ub="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z",A4="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",jb="M12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5M12,2A7,7 0 0,1 19,9C19,14.25 12,22 12,22C12,22 5,14.25 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9C7,10 7,12 12,18.71C17,12 17,10 17,9A5,5 0 0,0 12,4Z",kI="M7,10L12,15L17,10H7Z",w4="M14,7L9,12L14,17V7Z",C4="M7,15L12,10L17,15H7Z",I4="M19,13H5V11H19V13Z",M4="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",E4="M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z",_p="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",S4="M9.8 21C9.6 20.6 9.3 20.2 9.2 19.7L8.8 19H8V14H13C14.2 13.4 15.6 13 17 13C18.9 13 20.6 13.6 22 14.6V11C22 9.3 20.7 8 19 8H5C3.3 8 2 9.3 2 11V17H6V21H9.8M19 10C19.6 10 20 10.4 20 11S19.6 12 19 12 18 11.6 18 11 18.4 10 19 10M18 7H6V3H18V7M17 18C17.6 18 18 18.4 18 19S17.6 20 17 20 16 19.6 16 19 16.4 18 17 18M17 15C14.3 15 11.9 16.7 11 19C11.9 21.3 14.3 23 17 23S22.1 21.3 23 19C22.1 16.7 19.7 15 17 15M17 21.5C15.6 21.5 14.5 20.4 14.5 19S15.6 16.5 17 16.5 19.5 17.6 19.5 19 18.4 21.5 17 21.5Z",T4="M19 8C20.66 8 22 9.34 22 11V17H18V21H6V17H2V11C2 9.34 3.34 8 5 8H6V3H18V8H19M8 5V8H16V5H8M16 19V15H8V19H16M18 15H20V11C20 10.45 19.55 10 19 10H5C4.45 10 4 10.45 4 11V15H6V13H18V15M19 11.5C19 12.05 18.55 12.5 18 12.5C17.45 12.5 17 12.05 17 11.5C17 10.95 17.45 10.5 18 10.5C18.55 10.5 19 10.95 19 11.5Z",k4="M1.39,18.36L3.16,16.6L4.58,18L5.64,16.95L4.22,15.54L5.64,14.12L8.11,16.6L9.17,15.54L6.7,13.06L8.11,11.65L9.53,13.06L10.59,12L9.17,10.59L10.59,9.17L13.06,11.65L14.12,10.59L11.65,8.11L13.06,6.7L14.47,8.11L15.54,7.05L14.12,5.64L15.54,4.22L18,6.7L19.07,5.64L16.6,3.16L18.36,1.39L22.61,5.64L5.64,22.61L1.39,18.36Z",P4="M20 19.88V22L18.2 20.83L13.41 11.83A4.94 4.94 0 0 0 15.19 10.83M15 7A3 3 0 0 1 12 10A3.27 3.27 0 0 1 11.56 10L5.8 20.83L4 22V19.88L9.79 9A3 3 0 0 1 12 4V2A1 1 0 0 1 13 3V4.18A3 3 0 0 1 15 7M13 7A1 1 0 1 0 12 8A1 1 0 0 0 13 7M4.22 10L6 11.8L4.56 14.56L2.1 12.1M12 17.76L10.5 16.25L9 19L12 22L15 19L13.53 16.23M19.78 10L18 11.8L19.5 14.56L21.9 12.1Z",L4="M4,3H5V5H3V4A1,1 0 0,1 4,3M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M21,20A1,1 0 0,1 20,21H19V19H21V20M15,21V19H17V21H15M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M3,7H5V9H3V7M21,7V9H19V7H21Z",D4="M1 6V19A2 2 0 0 0 3 21H9V11H21V6A2 2 0 0 0 19 4H3A2 2 0 0 0 1 6M3 6H7V9H3M7 19H3V16H7M7 14H3V11H7M9 9V6H13V9M19 9H15V6H19M17 16A1 1 0 1 1 16 17A1 1 0 0 1 17 16M17 13A6.45 6.45 0 0 1 23 17A6.5 6.5 0 0 1 11 17A6.45 6.45 0 0 1 17 13M17 14.5A2.5 2.5 0 1 0 19.5 17A2.5 2.5 0 0 0 17 14.5",R4="M2,2H6V3H13V2H17V6H16V9H18V8H22V12H21V18H22V22H18V21H12V22H8V18H9V16H6V17H2V13H3V6H2V2M18,12V11H16V13H17V17H13V16H11V18H12V19H18V18H19V12H18M13,6V5H6V6H5V13H6V14H9V12H8V8H12V9H14V6H13M12,12H11V14H13V13H14V11H12V12Z",z4="M9,10V16H15V10H19L12,3L5,10H9M12,5.8L14.2,8H13V14H11V8H9.8L12,5.8M19,18H5V20H19V18Z";const jn=(t,e)=>{const i=t.__vccOpts||t;for(const[a,c]of e)i[a]=c;return i},$w={mdi:{size:24,viewbox:"0 0 24 24"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},O4={name:"icon",props:{type:String,path:{type:String,required:!0},size:{type:[String,Number],default:24},viewbox:String,flip:{type:String,validator:t=>["horizontal","vertical","both","none"].includes(t)},rotate:{type:Number,default:0}},computed:{styles(){return{"--sx":["both","horizontal"].includes(this.flip)?"-1":"1","--sy":["both","vertical"].includes(this.flip)?"-1":"1","--r":isNaN(this.rotate)?this.rotate:this.rotate+"deg"}},defaults(){return $w[this.type]||$w.default},sizeValue(){return this.size||this.defaults.size},viewboxValue(){return this.viewbox||this.defaults.viewbox}}},B4=["width","height","viewBox"],F4=["d"];function N4(t,e,i,a,c,f){return mt(),Yt("svg",{width:f.sizeValue,height:f.sizeValue,viewBox:f.viewboxValue,style:Jr(f.styles)},[_t("path",{d:i.path},null,8,F4)],12,B4)}const Bn=jn(O4,[["render",N4],["__scopeId","data-v-0fb36228"]]),V4={components:{SvgIcon:Bn},props:{height:{default:32},width:{default:32},loading:Boolean,active:Boolean,disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},path(){return{loading:Ub}}}},U4=["disabled"],j4={class:"map-control-button__content"};function H4(t,e,i,a,c,f){const o=tc("SvgIcon");return mt(),Yt("button",er({class:"map-control-button",style:f.bindStyle,disabled:i.disabled},t.$attrs,{class:{"map-control-button-active":i.active,"map-control-button-disabled":i.disabled}}),[_t("span",j4,[i.loading?(mt(),Oe(o,{key:0,size:i.height*2/3,type:"mdi",path:f.path.loading,class:"spin"},null,8,["size","path"])):Zn(t.$slots,"default",{key:1},void 0,!0)])],16,U4)}const PI=jn(V4,[["render",H4],["__scopeId","data-v-a6e43ff5"]]),G4={props:{},computed:{iconName(){return""}}};function q4(t,e,i,a,c,f){return mt(),Yt("i",{class:Zo(["map-icon mdi",f.iconName])},null,2)}const Hb=jn(G4,[["render",q4],["__scopeId","data-v-3a69a1e0"]]),W4={components:{MapButton:PI,MapIcon:Hb},props:{items:{type:Array,default:()=>[]},row:Boolean,size:{type:Number,default:32}},provide(){return{isGroup:!0,size:this.size}}};function Z4(t,e,i,a,c,f){const o=tc("MapIcon"),y=tc("MapButton");return mt(),Yt("div",{class:Zo(["button-container button-group-container",{"button-group-row-container":i.row,"button-group-column-container":!i.row}]),style:Jr({width:i.row?null:i.size+"px",height:i.row?i.size+"px":null})},[_t("div",{class:Zo(["button-group-sheet",{"button-group-sheet-column":!i.row}]),style:{"border-radius":"150px"}},[(mt(!0),Yt(ui,null,$o(i.items,(_,M)=>(mt(),Oe(y,{key:M+""+_.titl,height:i.size,text:"",title:_.title,width:i.size,onClick:_.onClick},{default:se(()=>[zt(o,null,{default:se(()=>[fa(yn(_.icon),1)]),_:2},1024)]),_:2},1032,["height","title","width","onClick"]))),128)),Zn(t.$slots,"default",{},void 0,!0)],2)],6)}const Rm=jn(W4,[["render",Z4],["__scopeId","data-v-15e4b707"]]),$4={components:{MapButton:PI,MapIcon:Hb},props:{icon:{type:[String,Boolean]},tooltip:String,title:String,loading:Boolean,size:{type:Number,default:32},active:Boolean,disabled:Boolean},inject:{isGroup:{default:!1},groupSize:{default:0,from:"size"}},computed:{}},Y4={key:1,class:"button-container"},X4=["title"];function K4(t,e,i,a,c,f){const o=tc("MapIcon"),y=tc("MapButton");return f.isGroup?(mt(),Oe(y,er({key:0},t.$attrs,{active:i.active,height:f.groupSize,title:i.tooltip||i.title,width:f.groupSize,disabled:i.disabled}),{default:se(()=>[Zn(t.$slots,"default",{},()=>[zt(o,null,{default:se(()=>[fa(yn(i.icon),1)]),_:1})],!0)]),_:3},16,["active","height","title","width","disabled"])):(mt(),Yt("div",Y4,[_t("div",{title:i.tooltip||i.title},[Zn(t.$slots,"content",{},()=>[zt(y,er(t.$attrs,{active:i.active,height:i.size,loading:i.loading,width:i.size,disabled:i.disabled}),{default:se(()=>[Zn(t.$slots,"default",{},()=>[zt(o,null,{default:se(()=>[fa(yn(i.icon),1)]),_:1})],!0)]),_:3},16,["active","height","loading","width","disabled"])],!0)],8,X4)]))}const Tr=jn($4,[["render",K4],["__scopeId","data-v-cdc0becf"]]),Q4={props:{src:{}},data:()=>({}),computed:{styleImage(){return{"background-image":`url(${this.src})`}}},methods:{}},J4=t=>(lc("data-v-6415c1ca"),t=t(),uc(),t),tk={class:"map-image"},ek=J4(()=>_t("div",{class:"map-image__sizer",style:{"padding-bottom":"100%"}},null,-1)),nk={class:"map-image__content"};function ik(t,e,i,a,c,f){return mt(),Yt("div",tk,[ek,_t("div",{class:"map-image__image",style:Jr(f.styleImage)},null,4),_t("div",nk,[Zn(t.$slots,"default",{},void 0,!0)])])}const Zx=jn(Q4,[["render",ik],["__scopeId","data-v-6415c1ca"]]),rk={props:{height:{},width:{}},data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},ok=Pb('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1);function ak(t,e,i,a,c,f){return mt(),Yt("div",er({class:"card",style:f.cardStyle},t.$attrs),[_t("div",null,[Zn(t.$slots,"default")]),ok],16)}const sk=jn(rk,[["render",ak]]);let Im={},nv={},lp={};window.$_hungpv_map_queue?(Im=window.$_hungpv_map_queue.pendingFunctions,nv=window.$_hungpv_map_queue.pendingRemoveFunctions,lp=window.$_hungpv_map_queue.mapIds):window.$_hungpv_map_queue={pendingFunctions:Im,pendingRemoveFunctions:nv,mapIds:lp};function md(t,e,i){Im[t]=e,LI()}function LI(){for(const t in lp)if(Object.prototype.hasOwnProperty.call(lp,t)){const e=lp[t];for(const i in Im)if(Object.prototype.hasOwnProperty.call(Im,i)&&!e[i]){const a=Im[i];a(t),e[i]=!0}}}function lk(t){lp[t]={},LI()}function uk(t){for(const e in nv){const i=lp[t];if(Object.prototype.hasOwnProperty.call(nv,e)&&!i[e]){const a=nv[e];a(t),i[e]=!0}}lp[t]={}}let yu={state:{},getters:{},actions:{getMapStore(t){const e=yu.state[t];if(!e)throw"Not found map for id "+t;return e},initMap(t,e){yu.state[t]={map:e},lk(t)},removeMap(t){delete yu.state[t],uk(t)},getMap(t,e){var a;const i=(a=yu.state[t])==null?void 0:a.map;if(!i)throw"Not found map for id "+t;return e?e(i):i}}};window.$_hungpv_drag?yu=window.$_hungpv_drag:window.$_hungpv_drag=yu;const{state:ck,getters:Tq,actions:up}=yu;function hf(t,e,i){const a=up.getMapStore(t);return a[e]||(a[e]=i||{}),a[e]}function pa(t,e){return up.getMapStore(t)[e]}yu.actions.getMap;const rf="crs",Yw=[{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"},{name:"VN-2000",epsg:"4756",unit:"degree",proj4js:"+proj=longlat +ellps=WGS84 +towgs84=-191.90441429,-39.30318279,-111.45032835,-0.00928836,0.01975479,-0.00427372,0.252906278 +no_defs +type=crs"}];function hk(t){hf(t,rf,Wl({crs:"4326",items:Yw.slice(),item:Yw[0]}))}md(rf,hk);async function fk(t,e){const i=pa(t,rf);i.items=e}const pk=t=>pa(t,rf).items,DI=t=>pa(t,rf).item,dk=t=>pa(t,rf).crs;function mk(t,e){pa(t,rf).crs=e,pa(t,rf).item=pa(t,rf).items.find(i=>i.epsg==e)}const Gb=Object.freeze(Object.defineProperty({__proto__:null,getCrs:dk,getCrsItem:DI,getCrsItems:pk,setCrs:mk,setCrsItems:fk},Symbol.toStringTag,{value:"Module"}));function gk(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var cd=1,hd=2,Mm=3,vk=4,$x=5,Xw=6378137,yk=6356752314e-3,Kw=.0066943799901413165,iv=484813681109536e-20,Ke=Math.PI/2,_k=.16666666666666666,xk=.04722222222222222,bk=.022156084656084655,bn=1e-10,vs=.017453292519943295,mh=57.29577951308232,jr=Math.PI/4,wv=Math.PI*2,ha=3.14159265359,Zl={};Zl.greenwich=0;Zl.lisbon=-9.131906111111;Zl.paris=2.337229166667;Zl.bogota=-74.080916666667;Zl.madrid=-3.687938888889;Zl.rome=12.452333333333;Zl.bern=7.439583333333;Zl.jakarta=106.807719444444;Zl.ferro=-17.666666666667;Zl.brussels=4.367975;Zl.stockholm=18.058277777778;Zl.athens=23.7163375;Zl.oslo=10.722916666667;const Ak={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var Qw=/[\s_\-\/\(\)]/g;function dp(t,e){if(t[e])return t[e];for(var i=Object.keys(t),a=e.toLowerCase().replace(Qw,""),c=-1,f,o;++c<i.length;)if(f=i[c],o=f.toLowerCase().replace(Qw,""),o===a)return t[f]}function Yx(t){var e={},i=t.split("+").map(function(y){return y.trim()}).filter(function(y){return y}).reduce(function(y,_){var M=_.split("=");return M.push(!0),y[M[0].toLowerCase()]=M[1],y},{}),a,c,f,o={proj:"projName",datum:"datumCode",rf:function(y){e.rf=parseFloat(y)},lat_0:function(y){e.lat0=y*vs},lat_1:function(y){e.lat1=y*vs},lat_2:function(y){e.lat2=y*vs},lat_ts:function(y){e.lat_ts=y*vs},lon_0:function(y){e.long0=y*vs},lon_1:function(y){e.long1=y*vs},lon_2:function(y){e.long2=y*vs},alpha:function(y){e.alpha=parseFloat(y)*vs},gamma:function(y){e.rectified_grid_angle=parseFloat(y)},lonc:function(y){e.longc=y*vs},x_0:function(y){e.x0=parseFloat(y)},y_0:function(y){e.y0=parseFloat(y)},k_0:function(y){e.k0=parseFloat(y)},k:function(y){e.k0=parseFloat(y)},a:function(y){e.a=parseFloat(y)},b:function(y){e.b=parseFloat(y)},r:function(y){e.a=e.b=parseFloat(y)},r_a:function(){e.R_A=!0},zone:function(y){e.zone=parseInt(y,10)},south:function(){e.utmSouth=!0},towgs84:function(y){e.datum_params=y.split(",").map(function(_){return parseFloat(_)})},to_meter:function(y){e.to_meter=parseFloat(y)},units:function(y){e.units=y;var _=dp(Ak,y);_&&(e.to_meter=_.to_meter)},from_greenwich:function(y){e.from_greenwich=y*vs},pm:function(y){var _=dp(Zl,y);e.from_greenwich=(_||parseFloat(y))*vs},nadgrids:function(y){y==="@null"?e.datumCode="none":e.nadgrids=y},axis:function(y){var _="ewnsud";y.length===3&&_.indexOf(y.substr(0,1))!==-1&&_.indexOf(y.substr(1,1))!==-1&&_.indexOf(y.substr(2,1))!==-1&&(e.axis=y)},approx:function(){e.approx=!0}};for(a in i)c=i[a],a in o?(f=o[a],typeof f=="function"?f(c):e[f]=c):e[a]=c;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Cv=1,RI=2,zI=3,U0=4,OI=5,qb=-1,wk=/\s/,Ck=/[A-Za-z]/,Ik=/[A-Za-z84_]/,A_=/[,\]]/,BI=/[\d\.E\-\+]/;function ff(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Cv}ff.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==U0)for(;wk.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Cv:return this.neutral(t);case RI:return this.keyword(t);case U0:return this.quoted(t);case OI:return this.afterquote(t);case zI:return this.number(t);case qb:return}};ff.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=U0;return}if(A_.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};ff.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Cv;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Cv,this.currentObject=this.stack.pop(),this.currentObject||(this.state=qb);return}};ff.prototype.number=function(t){if(BI.test(t)){this.word+=t;return}if(A_.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};ff.prototype.quoted=function(t){if(t==='"'){this.state=OI;return}this.word+=t};ff.prototype.keyword=function(t){if(Ik.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Cv;return}if(A_.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};ff.prototype.neutral=function(t){if(Ck.test(t)){this.word=t,this.state=RI;return}if(t==='"'){this.word="",this.state=U0;return}if(BI.test(t)){this.word=t,this.state=zI;return}if(A_.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};ff.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===qb)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Mk(t){var e=new ff(t);return e.output()}function Jw(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var a=e?{}:t,c=i.reduce(function(f,o){return vm(o,f),f},a);e&&(t[e]=c)}function vm(t,e){if(!Array.isArray(t)){e[t]=!0;return}var i=t.shift();if(i==="PARAMETER"&&(i=t.shift()),t.length===1){if(Array.isArray(t[0])){e[i]={},vm(t[0],e[i]);return}e[i]=t[0];return}if(!t.length){e[i]=!0;return}if(i==="TOWGS84"){e[i]=t;return}if(i==="AXIS"){i in e||(e[i]=[]),e[i].push(t);return}Array.isArray(i)||(e[i]={});var a;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[i]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&vm(t[2],e[i]);return;case"SPHEROID":case"ELLIPSOID":e[i]={name:t[0],a:t[1],rf:t[2]},t.length===4&&vm(t[3],e[i]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],Jw(e,i,t);return;default:for(a=-1;++a<t.length;)if(!Array.isArray(t[a]))return vm(t,e[i]);return Jw(e,i,t)}}var Ek=.017453292519943295;function Sk(t,e){var i=e[0],a=e[1];!(i in t)&&a in t&&(t[i]=t[a],e.length===3&&(t[i]=e[2](t[i])))}function hh(t){return t*Ek}function Tk(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,a=t.AXIS.length;i<a;++i){var c=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];c[0].indexOf("north")!==-1||(c[0]==="y"||c[0]==="lat")&&c[1]==="north"?e+="n":c[0].indexOf("south")!==-1||(c[0]==="y"||c[0]==="lat")&&c[1]==="south"?e+="s":c[0].indexOf("east")!==-1||(c[0]==="x"||c[0]==="lon")&&c[1]==="east"?e+="e":(c[0].indexOf("west")!==-1||(c[0]==="x"||c[0]==="lon")&&c[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var f=t.GEOGCS;t.type==="GEOGCS"&&(f=t),f&&(f.DATUM?t.datumCode=f.DATUM.name.toLowerCase():t.datumCode=f.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),f.DATUM&&f.DATUM.SPHEROID&&(t.ellps=f.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=f.DATUM.SPHEROID.a,t.rf=parseFloat(f.DATUM.SPHEROID.rf,10)),f.DATUM&&f.DATUM.TOWGS84&&(t.datum_params=f.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function o(M){var T=t.to_meter||1;return M*T}var y=function(M){return Sk(t,M)},_=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",hh],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",hh],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",hh],["lat0","latitude_of_origin",hh],["lat0","standard_parallel_1",hh],["lat1","standard_parallel_1",hh],["lat2","standard_parallel_2",hh],["azimuth","Azimuth"],["alpha","azimuth",hh],["srsCode","name"]];_.forEach(y),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=hh(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=hh(t.lat0>0?90:-90))}function FI(t){var e=Mk(t),i=e.shift(),a=e.shift();e.unshift(["name",a]),e.unshift(["type",i]);var c={};return vm(e,c),Tk(c),c}function hl(t){var e=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?hl[t]=Yx(arguments[1]):hl[t]=FI(arguments[1]):hl[t]=i}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(a){Array.isArray(a)?hl.apply(e,a):hl(a)});if(typeof t=="string"){if(t in hl)return hl[t]}else"EPSG"in t?hl["EPSG:"+t.EPSG]=t:"ESRI"in t?hl["ESRI:"+t.ESRI]=t:"IAU2000"in t?hl["IAU2000:"+t.IAU2000]=t:console.log(t);return}}gk(hl);function kk(t){return typeof t=="string"}function Pk(t){return t in hl}var Lk=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Dk(t){return Lk.some(function(e){return t.indexOf(e)>-1})}var Rk=["3857","900913","3785","102113"];function zk(t){var e=dp(t,"authority");if(e){var i=dp(e,"epsg");return i&&Rk.indexOf(i)>-1}}function Ok(t){var e=dp(t,"extension");if(e)return dp(e,"proj4")}function Bk(t){return t[0]==="+"}function Fk(t){if(kk(t)){if(Pk(t))return hl[t];if(Dk(t)){var e=FI(t);if(zk(e))return hl["EPSG:3857"];var i=Ok(e);return i?Yx(i):e}if(Bk(t))return Yx(t)}else return t}function t2(t,e){t=t||{};var i,a;if(!e)return t;for(a in e)i=e[a],i!==void 0&&(t[a]=i);return t}function _h(t,e,i){var a=t*e;return i/Math.sqrt(1-a*a)}function zv(t){return t<0?-1:1}function kn(t){return Math.abs(t)<=ha?t:t-zv(t)*wv}function Fc(t,e,i){var a=t*i,c=.5*t;return a=Math.pow((1-a)/(1+a),c),Math.tan(.5*(Ke-e))/a}function Iv(t,e){for(var i=.5*t,a,c,f=Ke-2*Math.atan(e),o=0;o<=15;o++)if(a=t*Math.sin(f),c=Ke-2*Math.atan(e*Math.pow((1-a)/(1+a),i))-f,f+=c,Math.abs(c)<=1e-10)return f;return-9999}function Nk(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=_h(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Vk(t){var e=t.x,i=t.y;if(i*mh>90&&i*mh<-90&&e*mh>180&&e*mh<-180)return null;var a,c;if(Math.abs(Math.abs(i)-Ke)<=bn)return null;if(this.sphere)a=this.x0+this.a*this.k0*kn(e-this.long0),c=this.y0+this.a*this.k0*Math.log(Math.tan(jr+.5*i));else{var f=Math.sin(i),o=Fc(this.e,i,f);a=this.x0+this.a*this.k0*kn(e-this.long0),c=this.y0-this.a*this.k0*Math.log(o)}return t.x=a,t.y=c,t}function Uk(t){var e=t.x-this.x0,i=t.y-this.y0,a,c;if(this.sphere)c=Ke-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var f=Math.exp(-i/(this.a*this.k0));if(c=Iv(this.e,f),c===-9999)return null}return a=kn(this.long0+e/(this.a*this.k0)),t.x=a,t.y=c,t}var jk=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Hk={init:Nk,forward:Vk,inverse:Uk,names:jk};function Gk(){}function e2(t){return t}var qk=["longlat","identity"];const Wk={init:Gk,forward:e2,inverse:e2,names:qk};var Zk=[Hk,Wk],x0={},j0=[];function NI(t,e){var i=j0.length;return t.names?(j0[i]=t,t.names.forEach(function(a){x0[a.toLowerCase()]=i}),this):(console.log(e),!0)}function $k(t){if(!t)return!1;var e=t.toLowerCase();if(typeof x0[e]<"u"&&j0[x0[e]])return j0[x0[e]]}function Yk(){Zk.forEach(NI)}const Xk={start:Yk,add:NI,get:$k};var Ti={};Ti.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Ti.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Ti.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Ti.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Ti.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Ti.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Ti.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Ti.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Ti.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Ti.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Ti.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Ti.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Ti.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Ti.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Ti.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Ti.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Ti.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Ti.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Ti.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Ti.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Ti.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Ti.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Ti.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Ti.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Ti.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Ti.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Ti.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Ti.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Ti.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Ti.hough={a:6378270,rf:297,ellipseName:"Hough"};Ti.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Ti.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Ti.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Ti.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Ti.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Ti.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Ti.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Ti.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Ti.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Ti.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Ti.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Ti.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Kk=Ti.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ti.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Qk(t,e,i,a){var c=t*t,f=e*e,o=(c-f)/c,y=0;a?(t*=1-o*(_k+o*(xk+o*bk)),c=t*t,o=0):y=Math.sqrt(o);var _=(c-f)/f;return{es:o,e:y,ep2:_}}function Jk(t,e,i,a,c){if(!t){var f=dp(Ti,a);f||(f=Kk),t=f.a,e=f.b,i=f.rf}return i&&!e&&(e=(1-1/i)*t),(i===0||Math.abs(t-e)<bn)&&(c=!0,e=t),{a:t,b:e,rf:i,sphere:c}}var Ga={};Ga.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Ga.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Ga.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Ga.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Ga.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Ga.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Ga.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Ga.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Ga.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};Ga.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Ga.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Ga.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Ga.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Ga.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Ga.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Ga.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Ga.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Ga.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function tP(t,e,i,a,c,f,o){var y={};return t===void 0||t==="none"?y.datum_type=$x:y.datum_type=vk,e&&(y.datum_params=e.map(parseFloat),(y.datum_params[0]!==0||y.datum_params[1]!==0||y.datum_params[2]!==0)&&(y.datum_type=cd),y.datum_params.length>3&&(y.datum_params[3]!==0||y.datum_params[4]!==0||y.datum_params[5]!==0||y.datum_params[6]!==0)&&(y.datum_type=hd,y.datum_params[3]*=iv,y.datum_params[4]*=iv,y.datum_params[5]*=iv,y.datum_params[6]=y.datum_params[6]/1e6+1)),o&&(y.datum_type=Mm,y.grids=o),y.a=i,y.b=a,y.es=c,y.ep2=f,y}var VI={};function eP(t,e){var i=new DataView(e),a=rP(i),c=oP(i,a),f=aP(i,c,a),o={header:c,subgrids:f};return VI[t]=o,o}function nP(t){if(t===void 0)return null;var e=t.split(",");return e.map(iP)}function iP(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:VI[t]||null,isNull:!1}}function ym(t){return t/3600*Math.PI/180}function rP(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function oP(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Xx(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Xx(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function aP(t,e,i){for(var a=176,c=[],f=0;f<e.nSubgrids;f++){var o=lP(t,a,i),y=uP(t,a,o,i),_=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),M=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);c.push({ll:[ym(o.lowerLongitude),ym(o.lowerLatitude)],del:[ym(o.longitudeInterval),ym(o.latitudeInterval)],lim:[_,M],count:o.gridNodeCount,cvs:sP(y)}),a+=176+o.gridNodeCount*16}return c}function sP(t){return t.map(function(e){return[ym(e.longitudeShift),ym(e.latitudeShift)]})}function lP(t,e,i){return{name:Xx(t,e+8,e+16).trim(),parent:Xx(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function uP(t,e,i,a){for(var c=e+176,f=16,o=[],y=0;y<i.gridNodeCount;y++){var _={latitudeShift:t.getFloat32(c+y*f,a),longitudeShift:t.getFloat32(c+y*f+4,a),latitudeAccuracy:t.getFloat32(c+y*f+8,a),longitudeAccuracy:t.getFloat32(c+y*f+12,a)};o.push(_)}return o}function gh(t,e){if(!(this instanceof gh))return new gh(t);e=e||function(M){if(M)throw M};var i=Fk(t);if(typeof i!="object"){e(t);return}var a=gh.projections.get(i.projName);if(!a){e(t);return}if(i.datumCode&&i.datumCode!=="none"){var c=dp(Ga,i.datumCode);c&&(i.datum_params=i.datum_params||(c.towgs84?c.towgs84.split(","):null),i.ellps=c.ellipse,i.datumName=c.datumName?c.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var f=Jk(i.a,i.b,i.rf,i.ellps,i.sphere),o=Qk(f.a,f.b,f.rf,i.R_A),y=nP(i.nadgrids),_=i.datum||tP(i.datumCode,i.datum_params,f.a,f.b,o.es,o.ep2,y);t2(this,i),t2(this,a),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=_,this.init(),e(null,this)}gh.projections=Xk;gh.projections.start();function cP(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===cd?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===hd?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function UI(t,e,i){var a=t.x,c=t.y,f=t.z?t.z:0,o,y,_,M;if(c<-Ke&&c>-1.001*Ke)c=-Ke;else if(c>Ke&&c<1.001*Ke)c=Ke;else{if(c<-Ke)return{x:-1/0,y:-1/0,z:t.z};if(c>Ke)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),y=Math.sin(c),M=Math.cos(c),_=y*y,o=i/Math.sqrt(1-e*_),{x:(o+f)*M*Math.cos(a),y:(o+f)*M*Math.sin(a),z:(o*(1-e)+f)*y}}function jI(t,e,i,a){var c=1e-12,f=c*c,o=30,y,_,M,T,k,P,O,G,H,X,st,K,et,xt=t.x,Nt=t.y,It=t.z?t.z:0,St,Gt,Dt;if(y=Math.sqrt(xt*xt+Nt*Nt),_=Math.sqrt(xt*xt+Nt*Nt+It*It),y/i<c){if(St=0,_/i<c)return Gt=Ke,Dt=-a,{x:t.x,y:t.y,z:t.z}}else St=Math.atan2(Nt,xt);M=It/_,T=y/_,k=1/Math.sqrt(1-e*(2-e)*T*T),G=T*(1-e)*k,H=M*k,et=0;do et++,O=i/Math.sqrt(1-e*H*H),Dt=y*G+It*H-O*(1-e*H*H),P=e*O/(O+Dt),k=1/Math.sqrt(1-P*(2-P)*T*T),X=T*(1-P)*k,st=M*k,K=st*G-X*H,G=X,H=st;while(K*K>f&&et<o);return Gt=Math.atan(st/Math.abs(X)),{x:St,y:Gt,z:Dt}}function hP(t,e,i){if(e===cd)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(e===hd){var a=i[0],c=i[1],f=i[2],o=i[3],y=i[4],_=i[5],M=i[6];return{x:M*(t.x-_*t.y+y*t.z)+a,y:M*(_*t.x+t.y-o*t.z)+c,z:M*(-y*t.x+o*t.y+t.z)+f}}}function fP(t,e,i){if(e===cd)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(e===hd){var a=i[0],c=i[1],f=i[2],o=i[3],y=i[4],_=i[5],M=i[6],T=(t.x-a)/M,k=(t.y-c)/M,P=(t.z-f)/M;return{x:T+_*k-y*P,y:-_*T+k+o*P,z:y*T-o*k+P}}}function l0(t){return t===cd||t===hd}function pP(t,e,i){if(cP(t,e)||t.datum_type===$x||e.datum_type===$x)return i;var a=t.a,c=t.es;if(t.datum_type===Mm){var f=n2(t,!1,i);if(f!==0)return;a=Xw,c=Kw}var o=e.a,y=e.b,_=e.es;if(e.datum_type===Mm&&(o=Xw,y=yk,_=Kw),c===_&&a===o&&!l0(t.datum_type)&&!l0(e.datum_type))return i;if(i=UI(i,c,a),l0(t.datum_type)&&(i=hP(i,t.datum_type,t.datum_params)),l0(e.datum_type)&&(i=fP(i,e.datum_type,e.datum_params)),i=jI(i,_,o,y),e.datum_type===Mm){var M=n2(e,!0,i);if(M!==0)return}return i}function n2(t,e,i){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-i.x,y:i.y},c={x:Number.NaN,y:Number.NaN},f=[];t:for(var o=0;o<t.grids.length;o++){var y=t.grids[o];if(f.push(y.name),y.isNull){c=a;break}if(y.mandatory,y.grid===null){if(y.mandatory)return console.log("Unable to find mandatory grid '"+y.name+"'"),-1;continue}for(var _=y.grid.subgrids,M=0,T=_.length;M<T;M++){var k=_[M],P=(Math.abs(k.del[1])+Math.abs(k.del[0]))/1e4,O=k.ll[0]-P,G=k.ll[1]-P,H=k.ll[0]+(k.lim[0]-1)*k.del[0]+P,X=k.ll[1]+(k.lim[1]-1)*k.del[1]+P;if(!(G>a.y||O>a.x||X<a.y||H<a.x)&&(c=dP(a,e,k),!isNaN(c.x)))break t}}return isNaN(c.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*mh+" "+a.y*mh+" tried: '"+f+"'"),-1):(i.x=-c.x,i.y=c.y,0)}function dP(t,e,i){var a={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return a;var c={x:t.x,y:t.y};c.x-=i.ll[0],c.y-=i.ll[1],c.x=kn(c.x-Math.PI)+Math.PI;var f=i2(c,i);if(e){if(isNaN(f.x))return a;f.x=c.x-f.x,f.y=c.y-f.y;var o=9,y=1e-12,_,M;do{if(M=i2(f,i),isNaN(M.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}_={x:c.x-(M.x+f.x),y:c.y-(M.y+f.y)},f.x+=_.x,f.y+=_.y}while(o--&&Math.abs(_.x)>y&&Math.abs(_.y)>y);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=kn(f.x+i.ll[0]),a.y=f.y+i.ll[1]}else isNaN(f.x)||(a.x=t.x+f.x,a.y=t.y+f.y);return a}function i2(t,e){var i={x:t.x/e.del[0],y:t.y/e.del[1]},a={x:Math.floor(i.x),y:Math.floor(i.y)},c={x:i.x-1*a.x,y:i.y-1*a.y},f={x:Number.NaN,y:Number.NaN},o;if(a.x<0||a.x>=e.lim[0]||a.y<0||a.y>=e.lim[1])return f;o=a.y*e.lim[0]+a.x;var y={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var _={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var M={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var T={x:e.cvs[o][0],y:e.cvs[o][1]},k=c.x*c.y,P=c.x*(1-c.y),O=(1-c.x)*(1-c.y),G=(1-c.x)*c.y;return f.x=O*y.x+P*_.x+G*T.x+k*M.x,f.y=O*y.y+P*_.y+G*T.y+k*M.y,f}function r2(t,e,i){var a=i.x,c=i.y,f=i.z||0,o,y,_,M={};for(_=0;_<3;_++)if(!(e&&_===2&&i.z===void 0))switch(_===0?(o=a,"ew".indexOf(t.axis[_])!==-1?y="x":y="y"):_===1?(o=c,"ns".indexOf(t.axis[_])!==-1?y="y":y="x"):(o=f,y="z"),t.axis[_]){case"e":M[y]=o;break;case"w":M[y]=-o;break;case"n":M[y]=o;break;case"s":M[y]=-o;break;case"u":i[y]!==void 0&&(M.z=o);break;case"d":i[y]!==void 0&&(M.z=-o);break;default:return null}return M}function HI(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function mP(t){o2(t.x),o2(t.y)}function o2(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function gP(t,e){return(t.datum.datum_type===cd||t.datum.datum_type===hd||t.datum.datum_type===Mm)&&e.datumCode!=="WGS84"||(e.datum.datum_type===cd||e.datum.datum_type===hd||e.datum.datum_type===Mm)&&t.datumCode!=="WGS84"}function H0(t,e,i,a){var c;Array.isArray(i)?i=HI(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var f=i.z!==void 0;if(mP(i),t.datum&&e.datum&&gP(t,e)&&(c=new gh("WGS84"),i=H0(t,c,i,a),t=c),a&&t.axis!=="enu"&&(i=r2(t,!1,i)),t.projName==="longlat")i={x:i.x*vs,y:i.y*vs,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),i=t.inverse(i),!i)return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=pP(t.datum,e.datum,i),!!i)return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),e.projName==="longlat"?i={x:i.x*mh,y:i.y*mh,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),a&&e.axis!=="enu"?r2(e,!0,i):(i&&!f&&delete i.z,i)}var a2=gh("WGS84");function nx(t,e,i,a){var c,f,o;return Array.isArray(i)?(c=H0(t,e,i,a)||{x:NaN,y:NaN},i.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof c.z=="number"?[c.x,c.y,c.z].concat(i.splice(3)):[c.x,c.y,i[2]].concat(i.splice(3)):[c.x,c.y].concat(i.splice(2)):[c.x,c.y]):(f=H0(t,e,i,a),o=Object.keys(i),o.length===2||o.forEach(function(y){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(y==="x"||y==="y"||y==="z")return}else if(y==="x"||y==="y")return;f[y]=i[y]}),f)}function s2(t){return t instanceof gh?t:t.oProj?t.oProj:gh(t)}function _u(t,e,i){t=s2(t);var a=!1,c;return typeof e>"u"?(e=t,t=a2,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(i=e,e=t,t=a2,a=!0),e=s2(e),i?nx(t,e,i):(c={forward:function(f,o){return nx(t,e,f,o)},inverse:function(f,o){return nx(e,t,f,o)}},a&&(c.oProj=e),c)}var l2=6,GI="AJSAJS",qI="AFAFAF",_m=65,jl=73,Qu=79,Ng=86,Vg=90;const vP={forward:WI,inverse:yP,toPoint:ZI};function WI(t,e){return e=e||5,bP(_P({lat:t[1],lon:t[0]}),e)}function yP(t){var e=Wb(YI(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function ZI(t){var e=Wb(YI(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function ix(t){return t*(Math.PI/180)}function u2(t){return 180*(t/Math.PI)}function _P(t){var e=t.lat,i=t.lon,a=6378137,c=.00669438,f=.9996,o,y,_,M,T,k,P,O=ix(e),G=ix(i),H,X;X=Math.floor((i+180)/6)+1,i===180&&(X=60),e>=56&&e<64&&i>=3&&i<12&&(X=32),e>=72&&e<84&&(i>=0&&i<9?X=31:i>=9&&i<21?X=33:i>=21&&i<33?X=35:i>=33&&i<42&&(X=37)),o=(X-1)*6-180+3,H=ix(o),y=c/(1-c),_=a/Math.sqrt(1-c*Math.sin(O)*Math.sin(O)),M=Math.tan(O)*Math.tan(O),T=y*Math.cos(O)*Math.cos(O),k=Math.cos(O)*(G-H),P=a*((1-c/4-3*c*c/64-5*c*c*c/256)*O-(3*c/8+3*c*c/32+45*c*c*c/1024)*Math.sin(2*O)+(15*c*c/256+45*c*c*c/1024)*Math.sin(4*O)-35*c*c*c/3072*Math.sin(6*O));var st=f*_*(k+(1-M+T)*k*k*k/6+(5-18*M+M*M+72*T-58*y)*k*k*k*k*k/120)+5e5,K=f*(P+_*Math.tan(O)*(k*k/2+(5-M+9*T+4*T*T)*k*k*k*k/24+(61-58*M+M*M+600*T-330*y)*k*k*k*k*k*k/720));return e<0&&(K+=1e7),{northing:Math.round(K),easting:Math.round(st),zoneNumber:X,zoneLetter:xP(e)}}function Wb(t){var e=t.northing,i=t.easting,a=t.zoneLetter,c=t.zoneNumber;if(c<0||c>60)return null;var f=.9996,o=6378137,y=.00669438,_,M=(1-Math.sqrt(1-y))/(1+Math.sqrt(1-y)),T,k,P,O,G,H,X,st,K,et=i-5e5,xt=e;a<"N"&&(xt-=1e7),X=(c-1)*6-180+3,_=y/(1-y),H=xt/f,st=H/(o*(1-y/4-3*y*y/64-5*y*y*y/256)),K=st+(3*M/2-27*M*M*M/32)*Math.sin(2*st)+(21*M*M/16-55*M*M*M*M/32)*Math.sin(4*st)+151*M*M*M/96*Math.sin(6*st),T=o/Math.sqrt(1-y*Math.sin(K)*Math.sin(K)),k=Math.tan(K)*Math.tan(K),P=_*Math.cos(K)*Math.cos(K),O=o*(1-y)/Math.pow(1-y*Math.sin(K)*Math.sin(K),1.5),G=et/(T*f);var Nt=K-T*Math.tan(K)/O*(G*G/2-(5+3*k+10*P-4*P*P-9*_)*G*G*G*G/24+(61+90*k+298*P+45*k*k-252*_-3*P*P)*G*G*G*G*G*G/720);Nt=u2(Nt);var It=(G-(1+2*k+P)*G*G*G/6+(5-2*P+28*k-3*P*P+8*_+24*k*k)*G*G*G*G*G/120)/Math.cos(K);It=X+u2(It);var St;if(t.accuracy){var Gt=Wb({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});St={top:Gt.lat,right:Gt.lon,bottom:Nt,left:It}}else St={lat:Nt,lon:It};return St}function xP(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function bP(t,e){var i="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+AP(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,e)+a.substr(a.length-5,e)}function AP(t,e,i){var a=$I(i),c=Math.floor(t/1e5),f=Math.floor(e/1e5)%20;return wP(c,f,a)}function $I(t){var e=t%l2;return e===0&&(e=l2),e}function wP(t,e,i){var a=i-1,c=GI.charCodeAt(a),f=qI.charCodeAt(a),o=c+t-1,y=f+e,_=!1;o>Vg&&(o=o-Vg+_m-1,_=!0),(o===jl||c<jl&&o>jl||(o>jl||c<jl)&&_)&&o++,(o===Qu||c<Qu&&o>Qu||(o>Qu||c<Qu)&&_)&&(o++,o===jl&&o++),o>Vg&&(o=o-Vg+_m-1),y>Ng?(y=y-Ng+_m-1,_=!0):_=!1,(y===jl||f<jl&&y>jl||(y>jl||f<jl)&&_)&&y++,(y===Qu||f<Qu&&y>Qu||(y>Qu||f<Qu)&&_)&&(y++,y===jl&&y++),y>Ng&&(y=y-Ng+_m-1);var M=String.fromCharCode(o)+String.fromCharCode(y);return M}function YI(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,i=null,a="",c,f=0;!/[A-Z]/.test(c=t.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+t;a+=c,f++}var o=parseInt(a,10);if(f===0||f+3>e)throw"MGRSPoint bad conversion from: "+t;var y=t.charAt(f++);if(y<="A"||y==="B"||y==="Y"||y>="Z"||y==="I"||y==="O")throw"MGRSPoint zone letter "+y+" not handled: "+t;i=t.substring(f,f+=2);for(var _=$I(o),M=CP(i.charAt(0),_),T=IP(i.charAt(1),_);T<MP(y);)T+=2e6;var k=e-f;if(k%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var P=k/2,O=0,G=0,H,X,st,K,et;return P>0&&(H=1e5/Math.pow(10,P),X=t.substring(f,f+P),O=parseFloat(X)*H,st=t.substring(f+P),G=parseFloat(st)*H),K=O+M,et=G+T,{easting:K,northing:et,zoneLetter:y,zoneNumber:o,accuracy:H}}function CP(t,e){for(var i=GI.charCodeAt(e-1),a=1e5,c=!1;i!==t.charCodeAt(0);){if(i++,i===jl&&i++,i===Qu&&i++,i>Vg){if(c)throw"Bad character: "+t;i=_m,c=!0}a+=1e5}return a}function IP(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=qI.charCodeAt(e-1),a=0,c=!1;i!==t.charCodeAt(0);){if(i++,i===jl&&i++,i===Qu&&i++,i>Ng){if(c)throw"Bad character: "+t;i=_m,c=!0}a+=1e5}return a}function MP(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function zm(t,e,i){if(!(this instanceof zm))return new zm(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}zm.fromMGRS=function(t){return new zm(ZI(t))};zm.prototype.toMGRS=function(t){return WI([this.x,this.y],t)};var EP=1,SP=.25,c2=.046875,h2=.01953125,f2=.01068115234375,TP=.75,kP=.46875,PP=.013020833333333334,LP=.007120768229166667,DP=.3645833333333333,RP=.005696614583333333,zP=.3076171875;function XI(t){var e=[];e[0]=EP-t*(SP+t*(c2+t*(h2+t*f2))),e[1]=t*(TP-t*(c2+t*(h2+t*f2)));var i=t*t;return e[2]=i*(kP-t*(PP+t*LP)),i*=t,e[3]=i*(DP-t*RP),e[4]=i*t*zP,e}function w_(t,e,i,a){return i*=e,e*=e,a[0]*t-i*(a[1]+e*(a[2]+e*(a[3]+e*a[4])))}var OP=20;function KI(t,e,i){for(var a=1/(1-e),c=t,f=OP;f;--f){var o=Math.sin(c),y=1-e*o*o;if(y=(w_(c,o,Math.cos(c),i)-t)*(y*Math.sqrt(y))*a,c-=y,Math.abs(y)<bn)return c}return c}function BP(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=XI(this.es),this.ml0=w_(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function FP(t){var e=t.x,i=t.y,a=kn(e-this.long0),c,f,o,y=Math.sin(i),_=Math.cos(i);if(this.es){var T=_*a,k=Math.pow(T,2),P=this.ep2*Math.pow(_,2),O=Math.pow(P,2),G=Math.abs(_)>bn?Math.tan(i):0,H=Math.pow(G,2),X=Math.pow(H,2);c=1-this.es*Math.pow(y,2),T=T/Math.sqrt(c);var st=w_(i,y,_,this.en);f=this.a*(this.k0*T*(1+k/6*(1-H+P+k/20*(5-18*H+X+14*P-58*H*P+k/42*(61+179*X-X*H-479*H)))))+this.x0,o=this.a*(this.k0*(st-this.ml0+y*a*T/2*(1+k/12*(5-H+9*P+4*O+k/30*(61+X-58*H+270*P-330*H*P+k/56*(1385+543*X-X*H-3111*H))))))+this.y0}else{var M=_*Math.sin(a);if(Math.abs(Math.abs(M)-1)<bn)return 93;if(f=.5*this.a*this.k0*Math.log((1+M)/(1-M))+this.x0,o=_*Math.cos(a)/Math.sqrt(1-Math.pow(M,2)),M=Math.abs(o),M>=1){if(M-1>bn)return 93;o=0}else o=Math.acos(o);i<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=f,t.y=o,t}function NP(t){var e,i,a,c,f=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,i=KI(e,this.es,this.en),Math.abs(i)<Ke){var k=Math.sin(i),P=Math.cos(i),O=Math.abs(P)>bn?Math.tan(i):0,G=this.ep2*Math.pow(P,2),H=Math.pow(G,2),X=Math.pow(O,2),st=Math.pow(X,2);e=1-this.es*Math.pow(k,2);var K=f*Math.sqrt(e)/this.k0,et=Math.pow(K,2);e=e*O,a=i-e*et/(1-this.es)*.5*(1-et/12*(5+3*X-9*G*X+G-4*H-et/30*(61+90*X-252*G*X+45*st+46*G-et/56*(1385+3633*X+4095*st+1574*st*X)))),c=kn(this.long0+K*(1-et/6*(1+2*X+G-et/20*(5+28*X+24*st+8*G*X+6*G-et/42*(61+662*X+1320*st+720*st*X))))/P)}else a=Ke*zv(o),c=0;else{var y=Math.exp(f/this.k0),_=.5*(y-1/y),M=this.lat0+o/this.k0,T=Math.cos(M);e=Math.sqrt((1-Math.pow(T,2))/(1+Math.pow(_,2))),a=Math.asin(e),o<0&&(a=-a),_===0&&T===0?c=0:c=kn(Math.atan2(_,T)+this.long0)}return t.x=c,t.y=a,t}var VP=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const b0={init:BP,forward:FP,inverse:NP,names:VP};function QI(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function ec(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),a=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(a,2))}function UP(t){var e=1+t,i=e-1;return i===0?t:t*Math.log(e)/i}function jP(t){var e=Math.abs(t);return e=UP(e*(1+e/(ec(1,e)+1))),t<0?-e:e}function Zb(t,e){for(var i=2*Math.cos(2*e),a=t.length-1,c=t[a],f=0,o;--a>=0;)o=-f+i*c+t[a],f=c,c=o;return e+o*Math.sin(2*e)}function HP(t,e){for(var i=2*Math.cos(e),a=t.length-1,c=t[a],f=0,o;--a>=0;)o=-f+i*c+t[a],f=c,c=o;return Math.sin(e)*o}function GP(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function JI(t,e,i){for(var a=Math.sin(e),c=Math.cos(e),f=QI(i),o=GP(i),y=2*c*o,_=-2*a*f,M=t.length-1,T=t[M],k=0,P=0,O=0,G,H;--M>=0;)G=P,H=k,P=T,k=O,T=-G+y*P-_*k+t[M],O=-H+_*P+y*k;return y=a*o,_=c*f,[y*T-_*O,y*O+_*T]}function qP(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(b0.init.apply(this),this.forward=b0.forward,this.inverse=b0.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),i=i*e,this.cgb[1]=i*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i=i*e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),i=i*e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(-12/5+e*(-24832/14175))),i=i*e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i=i*e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),i=i*e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i=i*e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i=i*e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i=i*e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var a=Zb(this.cbg,this.lat0);this.Zb=-this.Qn*(a+HP(this.gtu,2*a))}function WP(t){var e=kn(t.x-this.long0),i=t.y;i=Zb(this.cbg,i);var a=Math.sin(i),c=Math.cos(i),f=Math.sin(e),o=Math.cos(e);i=Math.atan2(a,o*c),e=Math.atan2(f*c,ec(a,c*o)),e=jP(Math.tan(e));var y=JI(this.gtu,2*i,2*e);i=i+y[0],e=e+y[1];var _,M;return Math.abs(e)<=2.623395162778?(_=this.a*(this.Qn*e)+this.x0,M=this.a*(this.Qn*i+this.Zb)+this.y0):(_=1/0,M=1/0),t.x=_,t.y=M,t}function ZP(t){var e=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,e=e/this.Qn;var a,c;if(Math.abs(e)<=2.623395162778){var f=JI(this.utg,2*i,2*e);i=i+f[0],e=e+f[1],e=Math.atan(QI(e));var o=Math.sin(i),y=Math.cos(i),_=Math.sin(e),M=Math.cos(e);i=Math.atan2(o*M,ec(_,M*y)),e=Math.atan2(_,M*y),a=kn(e+this.long0),c=Zb(this.cgb,i)}else a=1/0,c=1/0;return t.x=a,t.y=c,t}var $P=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const A0={init:qP,forward:WP,inverse:ZP,names:$P};function YP(t,e){if(t===void 0){if(t=Math.floor((kn(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var XP="etmerc";function KP(){var t=YP(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*vs,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,A0.init.apply(this),this.forward=A0.forward,this.inverse=A0.inverse}var QP=["Universal Transverse Mercator System","utm"];const JP={init:KP,names:QP,dependsOn:XP};function $b(t,e){return Math.pow((1-t)/(1+t),e)}var tL=20;function eL(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+jr)/(Math.pow(Math.tan(.5*this.lat0+jr),this.C)*$b(this.e*t,this.ratexp))}function nL(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+jr),this.C)*$b(this.e*Math.sin(i),this.ratexp))-Ke,t.x=this.C*e,t}function iL(t){for(var e=1e-14,i=t.x/this.C,a=t.y,c=Math.pow(Math.tan(.5*a+jr)/this.K,1/this.C),f=tL;f>0&&(a=2*Math.atan(c*$b(this.e*Math.sin(t.y),-.5*this.e))-Ke,!(Math.abs(a-t.y)<e));--f)t.y=a;return f?(t.x=i,t.y=a,t):null}var rL=["gauss"];const Yb={init:eL,forward:nL,inverse:iL,names:rL};function oL(){Yb.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function aL(t){var e,i,a,c;return t.x=kn(t.x-this.long0),Yb.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),a=Math.cos(t.x),c=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*a),t.x=c*i*Math.sin(t.x),t.y=c*(this.cosc0*e-this.sinc0*i*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function sL(t){var e,i,a,c,f;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,f=ec(t.x,t.y)){var o=2*Math.atan2(f,this.R2);e=Math.sin(o),i=Math.cos(o),c=Math.asin(i*this.sinc0+t.y*e*this.cosc0/f),a=Math.atan2(t.x*e,f*this.cosc0*i-t.y*this.sinc0*e)}else c=this.phic0,a=0;return t.x=a,t.y=c,Yb.inverse.apply(this,[t]),t.x=kn(t.x+this.long0),t}var lL=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const uL={init:oL,forward:aL,inverse:sL,names:lL};function cL(t,e,i){return e*=i,Math.tan(.5*(Ke+t))*Math.pow((1-e)/(1+e),.5*i)}function hL(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=bn&&(this.k0=.5*(1+zv(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=bn&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=bn&&Math.abs(Math.cos(this.lat_ts))>bn&&(this.k0=.5*this.cons*_h(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Fc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=_h(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ke,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function fL(t){var e=t.x,i=t.y,a=Math.sin(i),c=Math.cos(i),f,o,y,_,M,T,k=kn(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=bn&&Math.abs(i+this.lat0)<=bn?(t.x=NaN,t.y=NaN,t):this.sphere?(f=2*this.k0/(1+this.sinlat0*a+this.coslat0*c*Math.cos(k)),t.x=this.a*f*c*Math.sin(k)+this.x0,t.y=this.a*f*(this.coslat0*a-this.sinlat0*c*Math.cos(k))+this.y0,t):(o=2*Math.atan(this.ssfn_(i,a,this.e))-Ke,_=Math.cos(o),y=Math.sin(o),Math.abs(this.coslat0)<=bn?(M=Fc(this.e,i*this.con,this.con*a),T=2*this.a*this.k0*M/this.cons,t.x=this.x0+T*Math.sin(e-this.long0),t.y=this.y0-this.con*T*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<bn?(f=2*this.a*this.k0/(1+_*Math.cos(k)),t.y=f*y):(f=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*y+this.cosX0*_*Math.cos(k))),t.y=f*(this.cosX0*y-this.sinX0*_*Math.cos(k))+this.y0),t.x=f*_*Math.sin(k)+this.x0,t))}function pL(t){t.x-=this.x0,t.y-=this.y0;var e,i,a,c,f,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var y=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,i=this.lat0,o<=bn?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(y)*this.sinlat0+t.y*Math.sin(y)*this.coslat0/o),Math.abs(this.coslat0)<bn?this.lat0>0?e=kn(this.long0+Math.atan2(t.x,-1*t.y)):e=kn(this.long0+Math.atan2(t.x,t.y)):e=kn(this.long0+Math.atan2(t.x*Math.sin(y),o*this.coslat0*Math.cos(y)-t.y*this.sinlat0*Math.sin(y))),t.x=e,t.y=i,t)}else if(Math.abs(this.coslat0)<=bn){if(o<=bn)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,a=o*this.cons/(2*this.a*this.k0),i=this.con*Iv(this.e,a),e=this.con*kn(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else c=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=bn?f=this.X0:(f=Math.asin(Math.cos(c)*this.sinX0+t.y*Math.sin(c)*this.cosX0/o),e=kn(this.long0+Math.atan2(t.x*Math.sin(c),o*this.cosX0*Math.cos(c)-t.y*this.sinX0*Math.sin(c)))),i=-1*Iv(this.e,Math.tan(.5*(Ke+f)));return t.x=e,t.y=i,t}var dL=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const mL={init:hL,forward:fL,inverse:pL,names:dL,ssfn_:cL};function gL(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,a=this.rf,c=1/a,f=2*c-Math.pow(c,2),o=this.e=Math.sqrt(f);this.R=this.k0*i*Math.sqrt(1-f)/(1-f*Math.pow(e,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var y=Math.log(Math.tan(Math.PI/4+this.b0/2)),_=Math.log(Math.tan(Math.PI/4+t/2)),M=Math.log((1+o*e)/(1-o*e));this.K=y-this.alpha*_+this.alpha*o/2*M}function vL(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(e+i)+this.K,c=2*(Math.atan(Math.exp(a))-Math.PI/4),f=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(c)+Math.cos(this.b0)*Math.cos(f))),y=Math.asin(Math.cos(this.b0)*Math.sin(c)-Math.sin(this.b0)*Math.cos(c)*Math.cos(f));return t.y=this.R/2*Math.log((1+Math.sin(y))/(1-Math.sin(y)))+this.y0,t.x=this.R*o+this.x0,t}function yL(t){for(var e=t.x-this.x0,i=t.y-this.y0,a=e/this.R,c=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(c)+Math.sin(this.b0)*Math.cos(c)*Math.cos(a)),o=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(c))),y=this.lambda0+o/this.alpha,_=0,M=f,T=-1e3,k=0;Math.abs(M-T)>1e-7;){if(++k>20)return;_=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(M))/2)),T=M,M=2*Math.atan(Math.exp(_))-Math.PI/2}return t.x=y,t.y=M,t}var _L=["somerc"];const xL={init:gL,forward:vL,inverse:yL,names:_L};var mm=1e-7;function bL(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(i)!==-1}function AL(){var t,e,i,a,c,f,o,y,_,M,T=0,k,P=0,O=0,G=0,H=0,X=0,st=0;this.no_off=bL(this),this.no_rot="no_rot"in this;var K=!1;"alpha"in this&&(K=!0);var et=!1;if("rectified_grid_angle"in this&&(et=!0),K&&(st=this.alpha),et&&(T=this.rectified_grid_angle*vs),K||et)P=this.longc;else if(O=this.long1,H=this.lat1,G=this.long2,X=this.lat2,Math.abs(H-X)<=mm||(t=Math.abs(H))<=mm||Math.abs(t-Ke)<=mm||Math.abs(Math.abs(this.lat0)-Ke)<=mm||Math.abs(Math.abs(X)-Ke)<=mm)throw new Error;var xt=1-this.es;e=Math.sqrt(xt),Math.abs(this.lat0)>bn?(y=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*y*y,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/xt),this.A=this.B*this.k0*e/t,a=this.B*e/(i*Math.sqrt(t)),c=a*a-1,c<=0?c=0:(c=Math.sqrt(c),this.lat0<0&&(c=-c)),this.E=c+=a,this.E*=Math.pow(Fc(this.e,this.lat0,y),this.B)):(this.B=1/e,this.A=this.k0,this.E=a=c=1),K||et?(K?(k=Math.asin(Math.sin(st)/a),et||(T=st)):(k=T,st=Math.asin(a*Math.sin(k))),this.lam0=P-Math.asin(.5*(c-1/c)*Math.tan(k))/this.B):(f=Math.pow(Fc(this.e,H,Math.sin(H)),this.B),o=Math.pow(Fc(this.e,X,Math.sin(X)),this.B),c=this.E/f,_=(o-f)/(o+f),M=this.E*this.E,M=(M-o*f)/(M+o*f),t=O-G,t<-Math.pi?G-=wv:t>Math.pi&&(G+=wv),this.lam0=kn(.5*(O+G)-Math.atan(M*Math.tan(.5*this.B*(O-G))/_)/this.B),k=Math.atan(2*Math.sin(this.B*kn(O-this.lam0))/(c-1/c)),T=st=Math.asin(a*Math.sin(k))),this.singam=Math.sin(k),this.cosgam=Math.cos(k),this.sinrot=Math.sin(T),this.cosrot=Math.cos(T),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(st))),this.lat0<0&&(this.u_0=-this.u_0)),c=.5*k,this.v_pole_n=this.ArB*Math.log(Math.tan(jr-c)),this.v_pole_s=this.ArB*Math.log(Math.tan(jr+c))}function wL(t){var e={},i,a,c,f,o,y,_,M;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Ke)>bn){if(o=this.E/Math.pow(Fc(this.e,t.y,Math.sin(t.y)),this.B),y=1/o,i=.5*(o-y),a=.5*(o+y),f=Math.sin(this.B*t.x),c=(i*this.singam-f*this.cosgam)/a,Math.abs(Math.abs(c)-1)<bn)throw new Error;M=.5*this.ArB*Math.log((1-c)/(1+c)),y=Math.cos(this.B*t.x),Math.abs(y)<mm?_=this.A*t.x:_=this.ArB*Math.atan2(i*this.cosgam+f*this.singam,y)}else M=t.y>0?this.v_pole_n:this.v_pole_s,_=this.ArB*t.y;return this.no_rot?(e.x=_,e.y=M):(_-=this.u_0,e.x=M*this.cosrot+_*this.sinrot,e.y=_*this.cosrot-M*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function CL(t){var e,i,a,c,f,o,y,_={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*i),c=.5*(a-1/a),f=.5*(a+1/a),o=Math.sin(this.BrA*e),y=(o*this.cosgam+c*this.singam)/f,Math.abs(Math.abs(y)-1)<bn)_.x=0,_.y=y<0?-Ke:Ke;else{if(_.y=this.E/Math.sqrt((1+y)/(1-y)),_.y=Iv(this.e,Math.pow(_.y,1/this.B)),_.y===1/0)throw new Error;_.x=-this.rB*Math.atan2(c*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return _.x+=this.lam0,_}var IL=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const ML={init:AL,forward:wL,inverse:CL,names:IL};function EL(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<bn)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),a=_h(this.e,e,i),c=Fc(this.e,this.lat1,e),f=Math.sin(this.lat2),o=Math.cos(this.lat2),y=_h(this.e,f,o),_=Fc(this.e,this.lat2,f),M=Fc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>bn?this.ns=Math.log(a/y)/Math.log(c/_):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(c,this.ns)),this.rh=this.a*this.f0*Math.pow(M,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function SL(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=bn&&(i=zv(i)*(Ke-2*bn));var a=Math.abs(Math.abs(i)-Ke),c,f;if(a>bn)c=Fc(this.e,i,Math.sin(i)),f=this.a*this.f0*Math.pow(c,this.ns);else{if(a=i*this.ns,a<=0)return null;f=0}var o=this.ns*kn(e-this.long0);return t.x=this.k0*(f*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-f*Math.cos(o))+this.y0,t}function TL(t){var e,i,a,c,f,o=(t.x-this.x0)/this.k0,y=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+y*y),i=1):(e=-Math.sqrt(o*o+y*y),i=-1);var _=0;if(e!==0&&(_=Math.atan2(i*o,i*y)),e!==0||this.ns>0){if(i=1/this.ns,a=Math.pow(e/(this.a*this.f0),i),c=Iv(this.e,a),c===-9999)return null}else c=-Ke;return f=kn(_/this.ns+this.long0),t.x=f,t.y=c,t}var kL=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const PL={init:EL,forward:SL,inverse:TL,names:kL};function LL(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function DL(t){var e,i,a,c,f,o,y,_=t.x,M=t.y,T=kn(_-this.long0);return e=Math.pow((1+this.e*Math.sin(M))/(1-this.e*Math.sin(M)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(M/2+this.s45),this.alfa)/e)-this.s45),a=-T*this.alfa,c=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),f=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(c)),o=this.n*f,y=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(c/2+this.s45),this.n),t.y=y*Math.cos(o)/1,t.x=y*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function RL(t){var e,i,a,c,f,o,y,_,M=t.x;t.x=t.y,t.y=M,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),f=Math.atan2(t.y,t.x),c=f/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(c)),i=Math.asin(Math.cos(a)*Math.sin(c)/Math.cos(e)),t.x=this.long0-i/this.alfa,y=e,_=0;var T=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(y))/(1-this.e*Math.sin(y)),this.e/2))-this.s45),Math.abs(y-t.y)<1e-10&&(_=1),y=t.y,T+=1;while(_===0&&T<15);return T>=15?null:t}var zL=["Krovak","krovak"];const OL={init:LL,forward:DL,inverse:RL,names:zL};function fl(t,e,i,a,c){return t*c-e*Math.sin(2*c)+i*Math.sin(4*c)-a*Math.sin(6*c)}function Ov(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Bv(t){return .375*t*(1+.25*t*(1+.46875*t))}function Fv(t){return .05859375*t*t*(1+.75*t)}function Nv(t){return t*t*t*(35/3072)}function Om(t,e,i){var a=e*i;return t/Math.sqrt(1-a*a)}function jm(t){return Math.abs(t)<Ke?t:t-zv(t)*Math.PI}function G0(t,e,i,a,c){var f,o;f=t/e;for(var y=0;y<15;y++)if(o=(t-(e*f-i*Math.sin(2*f)+a*Math.sin(4*f)-c*Math.sin(6*f)))/(e-2*i*Math.cos(2*f)+4*a*Math.cos(4*f)-6*c*Math.cos(6*f)),f+=o,Math.abs(o)<=1e-10)return f;return NaN}function BL(){this.sphere||(this.e0=Ov(this.es),this.e1=Bv(this.es),this.e2=Fv(this.es),this.e3=Nv(this.es),this.ml0=this.a*fl(this.e0,this.e1,this.e2,this.e3,this.lat0))}function FL(t){var e,i,a=t.x,c=t.y;if(a=kn(a-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(c)*Math.sin(a)),i=this.a*(Math.atan2(Math.tan(c),Math.cos(a))-this.lat0);else{var f=Math.sin(c),o=Math.cos(c),y=Om(this.a,this.e,f),_=Math.tan(c)*Math.tan(c),M=a*Math.cos(c),T=M*M,k=this.es*o*o/(1-this.es),P=this.a*fl(this.e0,this.e1,this.e2,this.e3,c);e=y*M*(1-T*_*(1/6-(8-_+8*k)*T/120)),i=P-this.ml0+y*f/o*T*(.5+(5-_+6*k)*T/24)}return t.x=e+this.x0,t.y=i+this.y0,t}function NL(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a,a,c;if(this.sphere){var f=i+this.lat0;a=Math.asin(Math.sin(f)*Math.cos(e)),c=Math.atan2(Math.tan(e),Math.cos(f))}else{var o=this.ml0/this.a+i,y=G0(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(y)-Ke)<=bn)return t.x=this.long0,t.y=Ke,i<0&&(t.y*=-1),t;var _=Om(this.a,this.e,Math.sin(y)),M=_*_*_/this.a/this.a*(1-this.es),T=Math.pow(Math.tan(y),2),k=e*this.a/_,P=k*k;a=y-_*Math.tan(y)/M*k*k*(.5-(1+3*T)*k*k/24),c=k*(1-P*(T/3+(1+3*T)*T*P/15))/Math.cos(y)}return t.x=kn(c+this.long0),t.y=jm(a),t}var VL=["Cassini","Cassini_Soldner","cass"];const UL={init:BL,forward:FL,inverse:NL,names:VL};function cp(t,e){var i;return t>1e-7?(i=t*e,(1-t*t)*(e/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*e}var jL=1,HL=2,GL=3,qL=4;function WL(){var t=Math.abs(this.lat0);if(Math.abs(t-Ke)<bn?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<bn?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=cp(this.e,1),this.mmf=.5/(1-this.es),this.apa=e6(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=cp(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function ZL(t){var e,i,a,c,f,o,y,_,M,T,k=t.x,P=t.y;if(k=kn(k-this.long0),this.sphere){if(f=Math.sin(P),T=Math.cos(P),a=Math.cos(k),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+T*a:1+this.sinph0*f+this.cosph0*T*a,i<=bn)return null;i=Math.sqrt(2/i),e=i*T*Math.sin(k),i*=this.mode===this.EQUIT?f:this.cosph0*f-this.sinph0*T*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(P+this.lat0)<bn)return null;i=jr-P*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),e=i*Math.sin(k),i*=a}}else{switch(y=0,_=0,M=0,a=Math.cos(k),c=Math.sin(k),f=Math.sin(P),o=cp(this.e,f),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=o/this.qp,_=Math.sqrt(1-y*y)),this.mode){case this.OBLIQ:M=1+this.sinb1*y+this.cosb1*_*a;break;case this.EQUIT:M=1+_*a;break;case this.N_POLE:M=Ke+P,o=this.qp-o;break;case this.S_POLE:M=P-Ke,o=this.qp+o;break}if(Math.abs(M)<bn)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:M=Math.sqrt(2/M),this.mode===this.OBLIQ?i=this.ymf*M*(this.cosb1*y-this.sinb1*_*a):i=(M=Math.sqrt(2/(1+_*a)))*y*this.ymf,e=this.xmf*M*_*c;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(M=Math.sqrt(o))*c,i=a*(this.mode===this.S_POLE?M:-M)):e=i=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t}function $L(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a,a,c,f,o,y,_,M;if(this.sphere){var T=0,k,P=0;if(k=Math.sqrt(e*e+i*i),c=k*.5,c>1)return null;switch(c=2*Math.asin(c),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(P=Math.sin(c),T=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(k)<=bn?0:Math.asin(i*P/k),e*=P,i=T*k;break;case this.OBLIQ:c=Math.abs(k)<=bn?this.lat0:Math.asin(T*this.sinph0+i*P*this.cosph0/k),e*=P*this.cosph0,i=(T-Math.sin(c)*this.sinph0)*k;break;case this.N_POLE:i=-i,c=Ke-c;break;case this.S_POLE:c-=Ke;break}a=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,i)}else{if(M=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,i*=this.dd,_=Math.sqrt(e*e+i*i),_<bn)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*_/this.rq),f=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(M=f*this.sinb1+i*o*this.cosb1/_,y=this.qp*M,i=_*this.cosb1*f-i*this.sinb1*o):(M=i*o/_,y=this.qp*M,i=_*f)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),y=e*e+i*i,!y)return t.x=this.long0,t.y=this.lat0,t;M=1-y/this.qp,this.mode===this.S_POLE&&(M=-M)}a=Math.atan2(e,i),c=n6(Math.asin(M),this.apa)}return t.x=kn(this.long0+a),t.y=c,t}var YL=.3333333333333333,XL=.17222222222222222,KL=.10257936507936508,QL=.06388888888888888,JL=.0664021164021164,t6=.016415012942191543;function e6(t){var e,i=[];return i[0]=t*YL,e=t*t,i[0]+=e*XL,i[1]=e*QL,e*=t,i[0]+=e*KL,i[1]+=e*JL,i[2]=e*t6,i}function n6(t,e){var i=t+t;return t+e[0]*Math.sin(i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)}var i6=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const r6={init:WL,forward:ZL,inverse:$L,names:i6,S_POLE:jL,N_POLE:HL,EQUIT:GL,OBLIQ:qL};function mp(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function o6(){Math.abs(this.lat1+this.lat2)<bn||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=_h(this.e3,this.sin_po,this.cos_po),this.qs1=cp(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=_h(this.e3,this.sin_po,this.cos_po),this.qs2=cp(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=cp(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>bn?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function a6(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var a=cp(this.e3,this.sin_phi),c=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,f=this.ns0*kn(e-this.long0),o=c*Math.sin(f)+this.x0,y=this.rh-c*Math.cos(f)+this.y0;return t.x=o,t.y=y,t}function s6(t){var e,i,a,c,f,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1),c=0,e!==0&&(c=Math.atan2(a*t.x,a*t.y)),a=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-a*a)/(2*this.ns0)):(i=(this.c-a*a)/this.ns0,o=this.phi1z(this.e3,i)),f=kn(c/this.ns0+this.long0),t.x=f,t.y=o,t}function l6(t,e){var i,a,c,f,o,y=mp(.5*e);if(t<bn)return y;for(var _=t*t,M=1;M<=25;M++)if(i=Math.sin(y),a=Math.cos(y),c=t*i,f=1-c*c,o=.5*f*f/a*(e/(1-_)-i/f+.5/t*Math.log((1-c)/(1+c))),y=y+o,Math.abs(o)<=1e-7)return y;return null}var u6=["Albers_Conic_Equal_Area","Albers","aea"];const c6={init:o6,forward:a6,inverse:s6,names:u6,phi1z:l6};function h6(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function f6(t){var e,i,a,c,f,o,y,_,M=t.x,T=t.y;return a=kn(M-this.long0),e=Math.sin(T),i=Math.cos(T),c=Math.cos(a),o=this.sin_p14*e+this.cos_p14*i*c,f=1,o>0||Math.abs(o)<=bn?(y=this.x0+this.a*f*i*Math.sin(a)/o,_=this.y0+this.a*f*(this.cos_p14*e-this.sin_p14*i*c)/o):(y=this.x0+this.infinity_dist*i*Math.sin(a),_=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*c)),t.x=y,t.y=_,t}function p6(t){var e,i,a,c,f,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(c=Math.atan2(e,this.rc),i=Math.sin(c),a=Math.cos(c),o=mp(a*this.sin_p14+t.y*i*this.cos_p14/e),f=Math.atan2(t.x*i,e*this.cos_p14*a-t.y*this.sin_p14*i),f=kn(this.long0+f)):(o=this.phic0,f=0),t.x=f,t.y=o,t}var d6=["gnom"];const m6={init:h6,forward:f6,inverse:p6,names:d6};function g6(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*Ke:Ke;for(var a=Math.asin(.5*e),c,f,o,y,_=0;_<30;_++)if(f=Math.sin(a),o=Math.cos(a),y=t*f,c=Math.pow(1-y*y,2)/(2*o)*(e/(1-t*t)-f/(1-y*y)+.5/t*Math.log((1-y)/(1+y))),a+=c,Math.abs(c)<=1e-10)return a;return NaN}function v6(){this.sphere||(this.k0=_h(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function y6(t){var e=t.x,i=t.y,a,c,f=kn(e-this.long0);if(this.sphere)a=this.x0+this.a*f*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=cp(this.e,Math.sin(i));a=this.x0+this.a*this.k0*f,c=this.y0+this.a*o*.5/this.k0}return t.x=a,t.y=c,t}function _6(t){t.x-=this.x0,t.y-=this.y0;var e,i;return this.sphere?(e=kn(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=g6(this.e,2*t.y*this.k0/this.a),e=kn(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t}var x6=["cea"];const b6={init:v6,forward:y6,inverse:_6,names:x6};function A6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function w6(t){var e=t.x,i=t.y,a=kn(e-this.long0),c=jm(i-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*c,t}function C6(t){var e=t.x,i=t.y;return t.x=kn(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=jm(this.lat0+(i-this.y0)/this.a),t}var I6=["Equirectangular","Equidistant_Cylindrical","eqc"];const M6={init:A6,forward:w6,inverse:C6,names:I6};var p2=20;function E6(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ov(this.es),this.e1=Bv(this.es),this.e2=Fv(this.es),this.e3=Nv(this.es),this.ml0=this.a*fl(this.e0,this.e1,this.e2,this.e3,this.lat0)}function S6(t){var e=t.x,i=t.y,a,c,f,o=kn(e-this.long0);if(f=o*Math.sin(i),this.sphere)Math.abs(i)<=bn?(a=this.a*o,c=-1*this.a*this.lat0):(a=this.a*Math.sin(f)/Math.tan(i),c=this.a*(jm(i-this.lat0)+(1-Math.cos(f))/Math.tan(i)));else if(Math.abs(i)<=bn)a=this.a*o,c=-1*this.ml0;else{var y=Om(this.a,this.e,Math.sin(i))/Math.tan(i);a=y*Math.sin(f),c=this.a*fl(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+y*(1-Math.cos(f))}return t.x=a+this.x0,t.y=c+this.y0,t}function T6(t){var e,i,a,c,f,o,y,_,M;if(a=t.x-this.x0,c=t.y-this.y0,this.sphere)if(Math.abs(c+this.a*this.lat0)<=bn)e=kn(a/this.a+this.long0),i=0;else{o=this.lat0+c/this.a,y=a*a/this.a/this.a+o*o,_=o;var T;for(f=p2;f;--f)if(T=Math.tan(_),M=-1*(o*(_*T+1)-_-.5*(_*_+y)*T)/((_-o)/T-1),_+=M,Math.abs(M)<=bn){i=_;break}e=kn(this.long0+Math.asin(a*Math.tan(_)/this.a)/Math.sin(i))}else if(Math.abs(c+this.ml0)<=bn)i=0,e=kn(this.long0+a/this.a);else{o=(this.ml0+c)/this.a,y=a*a/this.a/this.a+o*o,_=o;var k,P,O,G,H;for(f=p2;f;--f)if(H=this.e*Math.sin(_),k=Math.sqrt(1-H*H)*Math.tan(_),P=this.a*fl(this.e0,this.e1,this.e2,this.e3,_),O=this.e0-2*this.e1*Math.cos(2*_)+4*this.e2*Math.cos(4*_)-6*this.e3*Math.cos(6*_),G=P/this.a,M=(o*(k*G+1)-G-.5*k*(G*G+y))/(this.es*Math.sin(2*_)*(G*G+y-2*o*G)/(4*k)+(o-G)*(k*O-2/Math.sin(2*_))-O),_-=M,Math.abs(M)<=bn){i=_;break}k=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=kn(this.long0+Math.asin(a*k/this.a)/Math.sin(i))}return t.x=e,t.y=i,t}var k6=["Polyconic","poly"];const P6={init:E6,forward:S6,inverse:T6,names:k6};function L6(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function D6(t){var e,i=t.x,a=t.y,c=a-this.lat0,f=i-this.long0,o=c/iv*1e-5,y=f,_=1,M=0;for(e=1;e<=10;e++)_=_*o,M=M+this.A[e]*_;var T=M,k=y,P=1,O=0,G,H,X=0,st=0;for(e=1;e<=6;e++)G=P*T-O*k,H=O*T+P*k,P=G,O=H,X=X+this.B_re[e]*P-this.B_im[e]*O,st=st+this.B_im[e]*P+this.B_re[e]*O;return t.x=st*this.a+this.x0,t.y=X*this.a+this.y0,t}function R6(t){var e,i=t.x,a=t.y,c=i-this.x0,f=a-this.y0,o=f/this.a,y=c/this.a,_=1,M=0,T,k,P=0,O=0;for(e=1;e<=6;e++)T=_*o-M*y,k=M*o+_*y,_=T,M=k,P=P+this.C_re[e]*_-this.C_im[e]*M,O=O+this.C_im[e]*_+this.C_re[e]*M;for(var G=0;G<this.iterations;G++){var H=P,X=O,st,K,et=o,xt=y;for(e=2;e<=6;e++)st=H*P-X*O,K=X*P+H*O,H=st,X=K,et=et+(e-1)*(this.B_re[e]*H-this.B_im[e]*X),xt=xt+(e-1)*(this.B_im[e]*H+this.B_re[e]*X);H=1,X=0;var Nt=this.B_re[1],It=this.B_im[1];for(e=2;e<=6;e++)st=H*P-X*O,K=X*P+H*O,H=st,X=K,Nt=Nt+e*(this.B_re[e]*H-this.B_im[e]*X),It=It+e*(this.B_im[e]*H+this.B_re[e]*X);var St=Nt*Nt+It*It;P=(et*Nt+xt*It)/St,O=(xt*Nt-et*It)/St}var Gt=P,Dt=O,Qt=1,jt=0;for(e=1;e<=9;e++)Qt=Qt*Gt,jt=jt+this.D[e]*Qt;var Vt=this.lat0+jt*iv*1e5,Bt=this.long0+Dt;return t.x=Bt,t.y=Vt,t}var z6=["New_Zealand_Map_Grid","nzmg"];const O6={init:L6,forward:D6,inverse:R6,names:z6};function B6(){}function F6(t){var e=t.x,i=t.y,a=kn(e-this.long0),c=this.x0+this.a*a,f=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=c,t.y=f,t}function N6(t){t.x-=this.x0,t.y-=this.y0;var e=kn(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t}var V6=["Miller_Cylindrical","mill"];const U6={init:B6,forward:F6,inverse:N6,names:V6};var j6=20;function H6(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=XI(this.es)}function G6(t){var e,i,a=t.x,c=t.y;if(a=kn(a-this.long0),this.sphere){if(!this.m)c=this.n!==1?Math.asin(this.n*Math.sin(c)):c;else for(var f=this.n*Math.sin(c),o=j6;o;--o){var y=(this.m*c+Math.sin(c)-f)/(this.m+Math.cos(c));if(c-=y,Math.abs(y)<bn)break}e=this.a*this.C_x*a*(this.m+Math.cos(c)),i=this.a*this.C_y*c}else{var _=Math.sin(c),M=Math.cos(c);i=this.a*w_(c,_,M,this.en),e=this.a*a*M/Math.sqrt(1-this.es*_*_)}return t.x=e,t.y=i,t}function q6(t){var e,i,a,c;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(e))),this.m?e=mp((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=mp(Math.sin(e)/this.n)),a=kn(a+this.long0),e=jm(e)):(e=KI(t.y/this.a,this.es,this.en),c=Math.abs(e),c<Ke?(c=Math.sin(e),i=this.long0+t.x*Math.sqrt(1-this.es*c*c)/(this.a*Math.cos(e)),a=kn(i)):c-bn<Ke&&(a=this.long0)),t.x=a,t.y=e,t}var W6=["Sinusoidal","sinu"];const Z6={init:H6,forward:G6,inverse:q6,names:W6};function $6(){}function Y6(t){for(var e=t.x,i=t.y,a=kn(e-this.long0),c=i,f=Math.PI*Math.sin(i);;){var o=-(c+Math.sin(c)-f)/(1+Math.cos(c));if(c+=o,Math.abs(o)<bn)break}c/=2,Math.PI/2-Math.abs(i)<bn&&(a=0);var y=.900316316158*this.a*a*Math.cos(c)+this.x0,_=1.4142135623731*this.a*Math.sin(c)+this.y0;return t.x=y,t.y=_,t}function X6(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var a=kn(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var c=Math.asin(i);return t.x=a,t.y=c,t}var K6=["Mollweide","moll"];const Q6={init:$6,forward:Y6,inverse:X6,names:K6};function J6(){Math.abs(this.lat1+this.lat2)<bn||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ov(this.es),this.e1=Bv(this.es),this.e2=Fv(this.es),this.e3=Nv(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=_h(this.e,this.sinphi,this.cosphi),this.ml1=fl(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<bn?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=_h(this.e,this.sinphi,this.cosphi),this.ml2=fl(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=fl(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function tD(t){var e=t.x,i=t.y,a;if(this.sphere)a=this.a*(this.g-i);else{var c=fl(this.e0,this.e1,this.e2,this.e3,i);a=this.a*(this.g-c)}var f=this.ns*kn(e-this.long0),o=this.x0+a*Math.sin(f),y=this.y0+this.rh-a*Math.cos(f);return t.x=o,t.y=y,t}function eD(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,i,a,c;this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var f=0;if(i!==0&&(f=Math.atan2(e*t.x,e*t.y)),this.sphere)return c=kn(this.long0+f/this.ns),a=jm(this.g-i/this.a),t.x=c,t.y=a,t;var o=this.g-i/this.a;return a=G0(o,this.e0,this.e1,this.e2,this.e3),c=kn(this.long0+f/this.ns),t.x=c,t.y=a,t}var nD=["Equidistant_Conic","eqdc"];const iD={init:J6,forward:tD,inverse:eD,names:nD};function rD(){this.R=this.a}function oD(t){var e=t.x,i=t.y,a=kn(e-this.long0),c,f;Math.abs(i)<=bn&&(c=this.x0+this.R*a,f=this.y0);var o=mp(2*Math.abs(i/Math.PI));(Math.abs(a)<=bn||Math.abs(Math.abs(i)-Ke)<=bn)&&(c=this.x0,i>=0?f=this.y0+Math.PI*this.R*Math.tan(.5*o):f=this.y0+Math.PI*this.R*-Math.tan(.5*o));var y=.5*Math.abs(Math.PI/a-a/Math.PI),_=y*y,M=Math.sin(o),T=Math.cos(o),k=T/(M+T-1),P=k*k,O=k*(2/M-1),G=O*O,H=Math.PI*this.R*(y*(k-G)+Math.sqrt(_*(k-G)*(k-G)-(G+_)*(P-G)))/(G+_);a<0&&(H=-H),c=this.x0+H;var X=_+k;return H=Math.PI*this.R*(O*X-y*Math.sqrt((G+_)*(_+1)-X*X))/(G+_),i>=0?f=this.y0+H:f=this.y0-H,t.x=c,t.y=f,t}function aD(t){var e,i,a,c,f,o,y,_,M,T,k,P,O;return t.x-=this.x0,t.y-=this.y0,k=Math.PI*this.R,a=t.x/k,c=t.y/k,f=a*a+c*c,o=-Math.abs(c)*(1+f),y=o-2*c*c+a*a,_=-2*o+1+2*c*c+f*f,O=c*c/_+(2*y*y*y/_/_/_-9*o*y/_/_)/27,M=(o-y*y/3/_)/_,T=2*Math.sqrt(-M/3),k=3*O/M/T,Math.abs(k)>1&&(k>=0?k=1:k=-1),P=Math.acos(k)/3,t.y>=0?i=(-T*Math.cos(P+Math.PI/3)-y/3/_)*Math.PI:i=-(-T*Math.cos(P+Math.PI/3)-y/3/_)*Math.PI,Math.abs(a)<bn?e=this.long0:e=kn(this.long0+Math.PI*(f-1+Math.sqrt(1+2*(a*a-c*c)+f*f))/2/a),t.x=e,t.y=i,t}var sD=["Van_der_Grinten_I","VanDerGrinten","vandg"];const lD={init:rD,forward:oD,inverse:aD,names:sD};function uD(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function cD(t){var e=t.x,i=t.y,a=Math.sin(t.y),c=Math.cos(t.y),f=kn(e-this.long0),o,y,_,M,T,k,P,O,G,H,X,st,K,et,xt,Nt,It,St,Gt,Dt,Qt,jt,Vt;return this.sphere?Math.abs(this.sin_p12-1)<=bn?(t.x=this.x0+this.a*(Ke-i)*Math.sin(f),t.y=this.y0-this.a*(Ke-i)*Math.cos(f),t):Math.abs(this.sin_p12+1)<=bn?(t.x=this.x0+this.a*(Ke+i)*Math.sin(f),t.y=this.y0+this.a*(Ke+i)*Math.cos(f),t):(St=this.sin_p12*a+this.cos_p12*c*Math.cos(f),Nt=Math.acos(St),It=Nt?Nt/Math.sin(Nt):1,t.x=this.x0+this.a*It*c*Math.sin(f),t.y=this.y0+this.a*It*(this.cos_p12*a-this.sin_p12*c*Math.cos(f)),t):(o=Ov(this.es),y=Bv(this.es),_=Fv(this.es),M=Nv(this.es),Math.abs(this.sin_p12-1)<=bn?(T=this.a*fl(o,y,_,M,Ke),k=this.a*fl(o,y,_,M,i),t.x=this.x0+(T-k)*Math.sin(f),t.y=this.y0-(T-k)*Math.cos(f),t):Math.abs(this.sin_p12+1)<=bn?(T=this.a*fl(o,y,_,M,Ke),k=this.a*fl(o,y,_,M,i),t.x=this.x0+(T+k)*Math.sin(f),t.y=this.y0+(T+k)*Math.cos(f),t):(P=a/c,O=Om(this.a,this.e,this.sin_p12),G=Om(this.a,this.e,a),H=Math.atan((1-this.es)*P+this.es*O*this.sin_p12/(G*c)),X=Math.atan2(Math.sin(f),this.cos_p12*Math.tan(H)-this.sin_p12*Math.cos(f)),X===0?Gt=Math.asin(this.cos_p12*Math.sin(H)-this.sin_p12*Math.cos(H)):Math.abs(Math.abs(X)-Math.PI)<=bn?Gt=-Math.asin(this.cos_p12*Math.sin(H)-this.sin_p12*Math.cos(H)):Gt=Math.asin(Math.sin(f)*Math.cos(H)/Math.sin(X)),st=this.e*this.sin_p12/Math.sqrt(1-this.es),K=this.e*this.cos_p12*Math.cos(X)/Math.sqrt(1-this.es),et=st*K,xt=K*K,Dt=Gt*Gt,Qt=Dt*Gt,jt=Qt*Gt,Vt=jt*Gt,Nt=O*Gt*(1-Dt*xt*(1-xt)/6+Qt/8*et*(1-2*xt)+jt/120*(xt*(4-7*xt)-3*st*st*(1-7*xt))-Vt/48*et),t.x=this.x0+Nt*Math.sin(X),t.y=this.y0+Nt*Math.cos(X),t))}function hD(t){t.x-=this.x0,t.y-=this.y0;var e,i,a,c,f,o,y,_,M,T,k,P,O,G,H,X,st,K,et,xt,Nt,It,St,Gt;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*Ke*this.a?void 0:(i=e/this.a,a=Math.sin(i),c=Math.cos(i),f=this.long0,Math.abs(e)<=bn?o=this.lat0:(o=mp(c*this.sin_p12+t.y*a*this.cos_p12/e),y=Math.abs(this.lat0)-Ke,Math.abs(y)<=bn?this.lat0>=0?f=kn(this.long0+Math.atan2(t.x,-t.y)):f=kn(this.long0-Math.atan2(-t.x,t.y)):f=kn(this.long0+Math.atan2(t.x*a,e*this.cos_p12*c-t.y*this.sin_p12*a))),t.x=f,t.y=o,t)):(_=Ov(this.es),M=Bv(this.es),T=Fv(this.es),k=Nv(this.es),Math.abs(this.sin_p12-1)<=bn?(P=this.a*fl(_,M,T,k,Ke),e=Math.sqrt(t.x*t.x+t.y*t.y),O=P-e,o=G0(O/this.a,_,M,T,k),f=kn(this.long0+Math.atan2(t.x,-1*t.y)),t.x=f,t.y=o,t):Math.abs(this.sin_p12+1)<=bn?(P=this.a*fl(_,M,T,k,Ke),e=Math.sqrt(t.x*t.x+t.y*t.y),O=e-P,o=G0(O/this.a,_,M,T,k),f=kn(this.long0+Math.atan2(t.x,t.y)),t.x=f,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),X=Math.atan2(t.x,t.y),G=Om(this.a,this.e,this.sin_p12),st=Math.cos(X),K=this.e*this.cos_p12*st,et=-K*K/(1-this.es),xt=3*this.es*(1-et)*this.sin_p12*this.cos_p12*st/(1-this.es),Nt=e/G,It=Nt-et*(1+et)*Math.pow(Nt,3)/6-xt*(1+3*et)*Math.pow(Nt,4)/24,St=1-et*It*It/2-Nt*It*It*It/6,H=Math.asin(this.sin_p12*Math.cos(It)+this.cos_p12*Math.sin(It)*st),f=kn(this.long0+Math.asin(Math.sin(X)*Math.sin(It)/Math.cos(H))),Gt=Math.sin(H),o=Math.atan2((Gt-this.es*St*this.sin_p12)*Math.tan(H),Gt*(1-this.es)),t.x=f,t.y=o,t))}var fD=["Azimuthal_Equidistant","aeqd"];const pD={init:uD,forward:cD,inverse:hD,names:fD};function dD(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function mD(t){var e,i,a,c,f,o,y,_,M=t.x,T=t.y;return a=kn(M-this.long0),e=Math.sin(T),i=Math.cos(T),c=Math.cos(a),o=this.sin_p14*e+this.cos_p14*i*c,f=1,(o>0||Math.abs(o)<=bn)&&(y=this.a*f*i*Math.sin(a),_=this.y0+this.a*f*(this.cos_p14*e-this.sin_p14*i*c)),t.x=y,t.y=_,t}function gD(t){var e,i,a,c,f,o,y;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),i=mp(e/this.a),a=Math.sin(i),c=Math.cos(i),o=this.long0,Math.abs(e)<=bn?(y=this.lat0,t.x=o,t.y=y,t):(y=mp(c*this.sin_p14+t.y*a*this.cos_p14/e),f=Math.abs(this.lat0)-Ke,Math.abs(f)<=bn?(this.lat0>=0?o=kn(this.long0+Math.atan2(t.x,-t.y)):o=kn(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=y,t):(o=kn(this.long0+Math.atan2(t.x*a,e*this.cos_p14*c-t.y*this.sin_p14*a)),t.x=o,t.y=y,t))}var vD=["ortho"];const yD={init:dD,forward:mD,inverse:gD,names:vD};var qo={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Hr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function _D(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ke-jr/2?this.face=qo.TOP:this.lat0<=-(Ke-jr/2)?this.face=qo.BOTTOM:Math.abs(this.long0)<=jr?this.face=qo.FRONT:Math.abs(this.long0)<=Ke+jr?this.face=this.long0>0?qo.RIGHT:qo.LEFT:this.face=qo.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function xD(t){var e={x:0,y:0},i,a,c,f,o,y,_={value:0};if(t.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):i=t.y,a=t.x,this.face===qo.TOP)f=Ke-i,a>=jr&&a<=Ke+jr?(_.value=Hr.AREA_0,c=a-Ke):a>Ke+jr||a<=-(Ke+jr)?(_.value=Hr.AREA_1,c=a>0?a-ha:a+ha):a>-(Ke+jr)&&a<=-jr?(_.value=Hr.AREA_2,c=a+Ke):(_.value=Hr.AREA_3,c=a);else if(this.face===qo.BOTTOM)f=Ke+i,a>=jr&&a<=Ke+jr?(_.value=Hr.AREA_0,c=-a+Ke):a<jr&&a>=-jr?(_.value=Hr.AREA_1,c=-a):a<-jr&&a>=-(Ke+jr)?(_.value=Hr.AREA_2,c=-a-Ke):(_.value=Hr.AREA_3,c=a>0?-a+ha:-a-ha);else{var M,T,k,P,O,G,H;this.face===qo.RIGHT?a=Em(a,+Ke):this.face===qo.BACK?a=Em(a,+ha):this.face===qo.LEFT&&(a=Em(a,-Ke)),P=Math.sin(i),O=Math.cos(i),G=Math.sin(a),H=Math.cos(a),M=O*H,T=O*G,k=P,this.face===qo.FRONT?(f=Math.acos(M),c=u0(f,k,T,_)):this.face===qo.RIGHT?(f=Math.acos(T),c=u0(f,k,-M,_)):this.face===qo.BACK?(f=Math.acos(-M),c=u0(f,k,-T,_)):this.face===qo.LEFT?(f=Math.acos(-T),c=u0(f,k,M,_)):(f=c=0,_.value=Hr.AREA_0)}return y=Math.atan(12/ha*(c+Math.acos(Math.sin(c)*Math.cos(jr))-Ke)),o=Math.sqrt((1-Math.cos(f))/(Math.cos(y)*Math.cos(y))/(1-Math.cos(Math.atan(1/Math.cos(c))))),_.value===Hr.AREA_1?y+=Ke:_.value===Hr.AREA_2?y+=ha:_.value===Hr.AREA_3&&(y+=1.5*ha),e.x=o*Math.cos(y),e.y=o*Math.sin(y),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function bD(t){var e={lam:0,phi:0},i,a,c,f,o,y,_,M,T,k={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,a=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),i=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?k.value=Hr.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(k.value=Hr.AREA_1,i-=Ke):t.x<0&&-t.x>=Math.abs(t.y)?(k.value=Hr.AREA_2,i=i<0?i+ha:i-ha):(k.value=Hr.AREA_3,i+=Ke),T=ha/12*Math.tan(i),o=Math.sin(T)/(Math.cos(T)-1/Math.sqrt(2)),y=Math.atan(o),c=Math.cos(i),f=Math.tan(a),_=1-c*c*f*f*(1-Math.cos(Math.atan(1/Math.cos(y)))),_<-1?_=-1:_>1&&(_=1),this.face===qo.TOP)M=Math.acos(_),e.phi=Ke-M,k.value===Hr.AREA_0?e.lam=y+Ke:k.value===Hr.AREA_1?e.lam=y<0?y+ha:y-ha:k.value===Hr.AREA_2?e.lam=y-Ke:e.lam=y;else if(this.face===qo.BOTTOM)M=Math.acos(_),e.phi=M-Ke,k.value===Hr.AREA_0?e.lam=-y+Ke:k.value===Hr.AREA_1?e.lam=-y:k.value===Hr.AREA_2?e.lam=-y-Ke:e.lam=y<0?-y-ha:-y+ha;else{var P,O,G;P=_,T=P*P,T>=1?G=0:G=Math.sqrt(1-T)*Math.sin(y),T+=G*G,T>=1?O=0:O=Math.sqrt(1-T),k.value===Hr.AREA_1?(T=O,O=-G,G=T):k.value===Hr.AREA_2?(O=-O,G=-G):k.value===Hr.AREA_3&&(T=O,O=G,G=-T),this.face===qo.RIGHT?(T=P,P=-O,O=T):this.face===qo.BACK?(P=-P,O=-O):this.face===qo.LEFT&&(T=P,P=O,O=-T),e.phi=Math.acos(-G)-Ke,e.lam=Math.atan2(O,P),this.face===qo.RIGHT?e.lam=Em(e.lam,-Ke):this.face===qo.BACK?e.lam=Em(e.lam,-ha):this.face===qo.LEFT&&(e.lam=Em(e.lam,+Ke))}if(this.es!==0){var H,X,st;H=e.phi<0?1:0,X=Math.tan(e.phi),st=this.b/Math.sqrt(X*X+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-st*st)/(this.one_minus_f*st)),H&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function u0(t,e,i,a){var c;return t<bn?(a.value=Hr.AREA_0,c=0):(c=Math.atan2(e,i),Math.abs(c)<=jr?a.value=Hr.AREA_0:c>jr&&c<=Ke+jr?(a.value=Hr.AREA_1,c-=Ke):c>Ke+jr||c<=-(Ke+jr)?(a.value=Hr.AREA_2,c=c>=0?c-ha:c+ha):(a.value=Hr.AREA_3,c+=Ke)),c}function Em(t,e){var i=t+e;return i<-ha?i+=wv:i>+ha&&(i-=wv),i}var AD=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const wD={init:_D,forward:xD,inverse:bD,names:AD};var Kx=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Ug=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],tM=.8487,eM=1.3523,nM=mh/5,CD=1/nM,xm=18,q0=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},ID=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function MD(t,e,i,a){for(var c=e;a;--a){var f=t(c);if(c-=f,Math.abs(f)<i)break}return c}function ED(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function SD(t){var e=kn(t.x-this.long0),i=Math.abs(t.y),a=Math.floor(i*nM);a<0?a=0:a>=xm&&(a=xm-1),i=mh*(i-CD*a);var c={x:q0(Kx[a],i)*e,y:q0(Ug[a],i)};return t.y<0&&(c.y=-c.y),c.x=c.x*this.a*tM+this.x0,c.y=c.y*this.a*eM+this.y0,c}function TD(t){var e={x:(t.x-this.x0)/(this.a*tM),y:Math.abs(t.y-this.y0)/(this.a*eM)};if(e.y>=1)e.x/=Kx[xm][0],e.y=t.y<0?-Ke:Ke;else{var i=Math.floor(e.y*xm);for(i<0?i=0:i>=xm&&(i=xm-1);;)if(Ug[i][0]>e.y)--i;else if(Ug[i+1][0]<=e.y)++i;else break;var a=Ug[i],c=5*(e.y-a[0])/(Ug[i+1][0]-a[0]);c=MD(function(f){return(q0(a,f)-e.y)/ID(a,f)},c,bn,100),e.x/=q0(Kx[i],c),e.y=(5*i+c)*vs,t.y<0&&(e.y=-e.y)}return e.x=kn(e.x+this.long0),e}var kD=["Robinson","robin"];const PD={init:ED,forward:SD,inverse:TD,names:kD};function LD(){this.name="geocent"}function DD(t){var e=UI(t,this.es,this.a);return e}function RD(t){var e=jI(t,this.es,this.a,this.b);return e}var zD=["Geocentric","geocentric","geocent","Geocent"];const OD={init:LD,forward:DD,inverse:RD,names:zD};var Us={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},zg={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function BD(){if(Object.keys(zg).forEach((function(i){if(typeof this[i]>"u")this[i]=zg[i].def;else{if(zg[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);zg[i].num&&(this[i]=parseFloat(this[i]))}zg[i].degrees&&(this[i]=this[i]*vs)}).bind(this)),Math.abs(Math.abs(this.lat0)-Ke)<bn?this.mode=this.lat0<0?Us.S_POLE:Us.N_POLE:Math.abs(this.lat0)<bn?this.mode=Us.EQUIT:(this.mode=Us.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function FD(t){t.x-=this.long0;var e=Math.sin(t.y),i=Math.cos(t.y),a=Math.cos(t.x),c,f;switch(this.mode){case Us.OBLIQ:f=this.sinph0*e+this.cosph0*i*a;break;case Us.EQUIT:f=i*a;break;case Us.S_POLE:f=-e;break;case Us.N_POLE:f=e;break}switch(f=this.pn1/(this.p-f),c=f*i*Math.sin(t.x),this.mode){case Us.OBLIQ:f*=this.cosph0*e-this.sinph0*i*a;break;case Us.EQUIT:f*=e;break;case Us.N_POLE:f*=-(i*a);break;case Us.S_POLE:f*=i*a;break}var o,y;return o=f*this.cg+c*this.sg,y=1/(o*this.sw*this.h1+this.cw),c=(c*this.cg-f*this.sg)*this.cw*y,f=o*y,t.x=c*this.a,t.y=f*this.a,t}function ND(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},i,a,c;c=1/(this.pn1-t.y*this.sw),i=this.pn1*t.x*c,a=this.pn1*t.y*this.cw*c,t.x=i*this.cg+a*this.sg,t.y=a*this.cg-i*this.sg;var f=ec(t.x,t.y);if(Math.abs(f)<bn)e.x=0,e.y=t.y;else{var o,y;switch(y=1-f*f*this.pfact,y=(this.p-Math.sqrt(y))/(this.pn1/f+f/this.pn1),o=Math.sqrt(1-y*y),this.mode){case Us.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*y*this.cosph0/f),t.y=(o-this.sinph0*Math.sin(e.y))*f,t.x*=y*this.cosph0;break;case Us.EQUIT:e.y=Math.asin(t.y*y/f),t.y=o*f,t.x*=y;break;case Us.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case Us.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var VD=["Tilted_Perspective","tpers"];const UD={init:BD,forward:FD,inverse:ND,names:VD};function jD(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function HD(t){var e=t.x,i=t.y,a,c,f,o;if(e=e-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var y=this.radius_p/ec(this.radius_p*Math.cos(i),Math.sin(i));if(c=y*Math.cos(e)*Math.cos(i),f=y*Math.sin(e)*Math.cos(i),o=y*Math.sin(i),(this.radius_g-c)*c-f*f-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=this.radius_g-c,this.flip_axis?(t.x=this.radius_g_1*Math.atan(f/ec(o,a)),t.y=this.radius_g_1*Math.atan(o/a)):(t.x=this.radius_g_1*Math.atan(f/a),t.y=this.radius_g_1*Math.atan(o/ec(f,a)))}else this.shape==="sphere"&&(a=Math.cos(i),c=Math.cos(e)*a,f=Math.sin(e)*a,o=Math.sin(i),a=this.radius_g-c,this.flip_axis?(t.x=this.radius_g_1*Math.atan(f/ec(o,a)),t.y=this.radius_g_1*Math.atan(o/a)):(t.x=this.radius_g_1*Math.atan(f/a),t.y=this.radius_g_1*Math.atan(o/ec(f,a))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function GD(t){var e=-1,i=0,a=0,c,f,o,y;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*ec(1,a)):(i=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*ec(1,i));var _=a/this.radius_p;if(c=i*i+_*_+e*e,f=2*this.radius_g*e,o=f*f-4*c*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;y=(-f-Math.sqrt(o))/(2*c),e=this.radius_g+y*e,i*=y,a*=y,t.x=Math.atan2(i,e),t.y=Math.atan(a*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(i=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+i*i)),c=i*i+a*a+e*e,f=2*this.radius_g*e,o=f*f-4*c*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;y=(-f-Math.sqrt(o))/(2*c),e=this.radius_g+y*e,i*=y,a*=y,t.x=Math.atan2(i,e),t.y=Math.atan(a*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var qD=["Geostationary Satellite View","Geostationary_Satellite","geos"];const WD={init:jD,forward:HD,inverse:GD,names:qD};var rv=1.340264,ov=-.081106,av=893e-6,sv=.003796,W0=Math.sqrt(3)/2;function ZD(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function $D(t){var e=kn(t.x-this.long0),i=t.y,a=Math.asin(W0*Math.sin(i)),c=a*a,f=c*c*c;return t.x=e*Math.cos(a)/(W0*(rv+3*ov*c+f*(7*av+9*sv*c))),t.y=a*(rv+ov*c+f*(av+sv*c)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function YD(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,i=12,a=t.y,c,f,o,y,_,M;for(M=0;M<i&&(c=a*a,f=c*c*c,o=a*(rv+ov*c+f*(av+sv*c))-t.y,y=rv+3*ov*c+f*(7*av+9*sv*c),a-=_=o/y,!(Math.abs(_)<e));++M);return c=a*a,f=c*c*c,t.x=W0*t.x*(rv+3*ov*c+f*(7*av+9*sv*c))/Math.cos(a),t.y=Math.asin(Math.sin(a)/W0),t.x=kn(t.x+this.long0),t}var XD=["eqearth","Equal Earth","Equal_Earth"];const KD={init:ZD,forward:$D,inverse:YD,names:XD};function QD(t){t.Proj.projections.add(b0),t.Proj.projections.add(A0),t.Proj.projections.add(JP),t.Proj.projections.add(uL),t.Proj.projections.add(mL),t.Proj.projections.add(xL),t.Proj.projections.add(ML),t.Proj.projections.add(PL),t.Proj.projections.add(OL),t.Proj.projections.add(UL),t.Proj.projections.add(r6),t.Proj.projections.add(c6),t.Proj.projections.add(m6),t.Proj.projections.add(b6),t.Proj.projections.add(M6),t.Proj.projections.add(P6),t.Proj.projections.add(O6),t.Proj.projections.add(U6),t.Proj.projections.add(Z6),t.Proj.projections.add(Q6),t.Proj.projections.add(iD),t.Proj.projections.add(lD),t.Proj.projections.add(pD),t.Proj.projections.add(yD),t.Proj.projections.add(wD),t.Proj.projections.add(PD),t.Proj.projections.add(OD),t.Proj.projections.add(UD),t.Proj.projections.add(WD),t.Proj.projections.add(KD)}_u.defaultDatum="WGS84";_u.Proj=gh;_u.WGS84=new _u.Proj("WGS84");_u.Point=zm;_u.toPoint=HI;_u.defs=hl;_u.nadgrid=eP;_u.transform=H0;_u.mgrs=vP;_u.version="__VERSION__";QD(_u);function iM(t){function e({longitude:i,latitude:a},c=!1){const f=DI(t)||{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"};return Qx({longitude:i,latitude:a},f,c)}return{format:e}}function Qx({longitude:t,latitude:e},i,a=!1){const c={longitude:"0",latitude:"0"};return!t||!e||(i&&!i.default&&i.proj4js&&([t,e]=_u(i.proj4js,[t,e])),i&&i.unit==="meter"?(c.longitude=t.toFixed(0),c.latitude=e.toFixed(0)):a?(c.longitude=tR(+t),c.latitude=JD(+e)):(c.longitude=t.toFixed(6),c.latitude=e.toFixed(6))),c}const JD=t=>`${Xb(t)} ${Kb(t)}' ${parseFloat(rM(t).toFixed(2))}" ${t>0?"N":"S"}`,tR=t=>`${Xb(t)} ${Kb(t)}' ${parseFloat(rM(t).toFixed(2))}" ${t>0?"E":"W"}`,Xb=t=>t===0?0:Math.floor(Math.abs(t)),Kb=t=>t===0?0:Math.floor((Math.abs(t)-Math.floor(Math.abs(t)))*60),rM=t=>t===0?0:(Math.abs(t)-Xb(t)-Kb(t)/60)*3600,gd="event";function eR(t){hf(t,gd,Wl({items:[],current:{}}))}md(gd,eR);async function nR(t,e){pa(t,gd).items.unshift(e)}async function iR(t,e){const i=pa(t,gd);if(!i||!i.items||i.items.length<1)return;const c=i.items.findIndex(f=>f.id===e.id);c<0||i.items.splice(c,1)}function rR(t,e){return(pa(t,gd).current||{})[e]}function d2(t,e,i){const a=pa(t,gd);a.current[e]=i}function Jx(t,e,i=!1){const{add:a,remove:c,isActive:f}=oM(t,e);return Lv(()=>{c()}),i&&ml(()=>{a()}),{add:a,remove:c,isActive:f}}function oM(t,e){const i=()=>{nR(t,e)},a=()=>{iR(t,e)},c=Ge(()=>{const f=rR(t,e.event_map_type);return f&&f.id===e.id});return{add:i,remove:a,isActive:c}}function vd(t){return dC()?(BS(t),!0):!1}function oR(){const t=new Set,e=c=>{t.delete(c)};return{on:c=>{t.add(c);const f=()=>e(c);return vd(f),{off:f}},off:e,trigger:(...c)=>Promise.all(Array.from(t).map(f=>f(...c)))}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function aM(t){return typeof t>"u"||t===null}function aR(t){return typeof t=="object"&&t!==null}function sR(t){return Array.isArray(t)?t:aM(t)?[]:[t]}function lR(t,e){var i,a,c,f;if(e)for(f=Object.keys(e),i=0,a=f.length;i<a;i+=1)c=f[i],t[c]=e[c];return t}function uR(t,e){var i="",a;for(a=0;a<e;a+=1)i+=t;return i}function cR(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var hR=aM,fR=aR,pR=sR,dR=uR,mR=cR,gR=lR,Qb={isNothing:hR,isObject:fR,toArray:pR,repeat:dR,isNegativeZero:mR,extend:gR};function sM(t,e){var i="",a=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(i+=`

`+t.mark.snippet),a+" "+i):a}function Mv(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=sM(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Mv.prototype=Object.create(Error.prototype);Mv.prototype.constructor=Mv;Mv.prototype.toString=function(e){return this.name+": "+sM(this,e)};var rd=Mv,vR=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],yR=["scalar","sequence","mapping"];function _R(t){var e={};return t!==null&&Object.keys(t).forEach(function(i){t[i].forEach(function(a){e[String(a)]=i})}),e}function xR(t,e){if(e=e||{},Object.keys(e).forEach(function(i){if(vR.indexOf(i)===-1)throw new rd('Unknown option "'+i+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(i){return i},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=_R(e.styleAliases||null),yR.indexOf(this.kind)===-1)throw new rd('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Hs=xR;function m2(t,e){var i=[];return t[e].forEach(function(a){var c=i.length;i.forEach(function(f,o){f.tag===a.tag&&f.kind===a.kind&&f.multi===a.multi&&(c=o)}),i[c]=a}),i}function bR(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,i;function a(c){c.multi?(t.multi[c.kind].push(c),t.multi.fallback.push(c)):t[c.kind][c.tag]=t.fallback[c.tag]=c}for(e=0,i=arguments.length;e<i;e+=1)arguments[e].forEach(a);return t}function tb(t){return this.extend(t)}tb.prototype.extend=function(e){var i=[],a=[];if(e instanceof Hs)a.push(e);else if(Array.isArray(e))a=a.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(i=i.concat(e.implicit)),e.explicit&&(a=a.concat(e.explicit));else throw new rd("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(f){if(!(f instanceof Hs))throw new rd("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(f.loadKind&&f.loadKind!=="scalar")throw new rd("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(f.multi)throw new rd("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(f){if(!(f instanceof Hs))throw new rd("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var c=Object.create(tb.prototype);return c.implicit=(this.implicit||[]).concat(i),c.explicit=(this.explicit||[]).concat(a),c.compiledImplicit=m2(c,"implicit"),c.compiledExplicit=m2(c,"explicit"),c.compiledTypeMap=bR(c.compiledImplicit,c.compiledExplicit),c};var AR=tb,wR=new Hs("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),CR=new Hs("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),IR=new Hs("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),MR=new AR({explicit:[wR,CR,IR]});function ER(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function SR(){return null}function TR(t){return t===null}var kR=new Hs("tag:yaml.org,2002:null",{kind:"scalar",resolve:ER,construct:SR,predicate:TR,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function PR(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function LR(t){return t==="true"||t==="True"||t==="TRUE"}function DR(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var RR=new Hs("tag:yaml.org,2002:bool",{kind:"scalar",resolve:PR,construct:LR,predicate:DR,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function zR(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function OR(t){return 48<=t&&t<=55}function BR(t){return 48<=t&&t<=57}function FR(t){if(t===null)return!1;var e=t.length,i=0,a=!1,c;if(!e)return!1;if(c=t[i],(c==="-"||c==="+")&&(c=t[++i]),c==="0"){if(i+1===e)return!0;if(c=t[++i],c==="b"){for(i++;i<e;i++)if(c=t[i],c!=="_"){if(c!=="0"&&c!=="1")return!1;a=!0}return a&&c!=="_"}if(c==="x"){for(i++;i<e;i++)if(c=t[i],c!=="_"){if(!zR(t.charCodeAt(i)))return!1;a=!0}return a&&c!=="_"}if(c==="o"){for(i++;i<e;i++)if(c=t[i],c!=="_"){if(!OR(t.charCodeAt(i)))return!1;a=!0}return a&&c!=="_"}}if(c==="_")return!1;for(;i<e;i++)if(c=t[i],c!=="_"){if(!BR(t.charCodeAt(i)))return!1;a=!0}return!(!a||c==="_")}function NR(t){var e=t,i=1,a;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),a=e[0],(a==="-"||a==="+")&&(a==="-"&&(i=-1),e=e.slice(1),a=e[0]),e==="0")return 0;if(a==="0"){if(e[1]==="b")return i*parseInt(e.slice(2),2);if(e[1]==="x")return i*parseInt(e.slice(2),16);if(e[1]==="o")return i*parseInt(e.slice(2),8)}return i*parseInt(e,10)}function VR(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Qb.isNegativeZero(t)}var UR=new Hs("tag:yaml.org,2002:int",{kind:"scalar",resolve:FR,construct:NR,predicate:VR,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),jR=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function HR(t){return!(t===null||!jR.test(t)||t[t.length-1]==="_")}function GR(t){var e,i;return e=t.replace(/_/g,"").toLowerCase(),i=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:i*parseFloat(e,10)}var qR=/^[-+]?[0-9]+e/;function WR(t,e){var i;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Qb.isNegativeZero(t))return"-0.0";return i=t.toString(10),qR.test(i)?i.replace("e",".e"):i}function ZR(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Qb.isNegativeZero(t))}var $R=new Hs("tag:yaml.org,2002:float",{kind:"scalar",resolve:HR,construct:GR,predicate:ZR,represent:WR,defaultStyle:"lowercase"}),YR=MR.extend({implicit:[kR,RR,UR,$R]}),XR=YR,lM=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),uM=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function KR(t){return t===null?!1:lM.exec(t)!==null||uM.exec(t)!==null}function QR(t){var e,i,a,c,f,o,y,_=0,M=null,T,k,P;if(e=lM.exec(t),e===null&&(e=uM.exec(t)),e===null)throw new Error("Date resolve error");if(i=+e[1],a=+e[2]-1,c=+e[3],!e[4])return new Date(Date.UTC(i,a,c));if(f=+e[4],o=+e[5],y=+e[6],e[7]){for(_=e[7].slice(0,3);_.length<3;)_+="0";_=+_}return e[9]&&(T=+e[10],k=+(e[11]||0),M=(T*60+k)*6e4,e[9]==="-"&&(M=-M)),P=new Date(Date.UTC(i,a,c,f,o,y,_)),M&&P.setTime(P.getTime()-M),P}function JR(t){return t.toISOString()}var tz=new Hs("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:KR,construct:QR,instanceOf:Date,represent:JR});function ez(t){return t==="<<"||t===null}var nz=new Hs("tag:yaml.org,2002:merge",{kind:"scalar",resolve:ez}),Jb=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function iz(t){if(t===null)return!1;var e,i,a=0,c=t.length,f=Jb;for(i=0;i<c;i++)if(e=f.indexOf(t.charAt(i)),!(e>64)){if(e<0)return!1;a+=6}return a%8===0}function rz(t){var e,i,a=t.replace(/[\r\n=]/g,""),c=a.length,f=Jb,o=0,y=[];for(e=0;e<c;e++)e%4===0&&e&&(y.push(o>>16&255),y.push(o>>8&255),y.push(o&255)),o=o<<6|f.indexOf(a.charAt(e));return i=c%4*6,i===0?(y.push(o>>16&255),y.push(o>>8&255),y.push(o&255)):i===18?(y.push(o>>10&255),y.push(o>>2&255)):i===12&&y.push(o>>4&255),new Uint8Array(y)}function oz(t){var e="",i=0,a,c,f=t.length,o=Jb;for(a=0;a<f;a++)a%3===0&&a&&(e+=o[i>>18&63],e+=o[i>>12&63],e+=o[i>>6&63],e+=o[i&63]),i=(i<<8)+t[a];return c=f%3,c===0?(e+=o[i>>18&63],e+=o[i>>12&63],e+=o[i>>6&63],e+=o[i&63]):c===2?(e+=o[i>>10&63],e+=o[i>>4&63],e+=o[i<<2&63],e+=o[64]):c===1&&(e+=o[i>>2&63],e+=o[i<<4&63],e+=o[64],e+=o[64]),e}function az(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var sz=new Hs("tag:yaml.org,2002:binary",{kind:"scalar",resolve:iz,construct:rz,predicate:az,represent:oz}),lz=Object.prototype.hasOwnProperty,uz=Object.prototype.toString;function cz(t){if(t===null)return!0;var e=[],i,a,c,f,o,y=t;for(i=0,a=y.length;i<a;i+=1){if(c=y[i],o=!1,uz.call(c)!=="[object Object]")return!1;for(f in c)if(lz.call(c,f))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(f)===-1)e.push(f);else return!1}return!0}function hz(t){return t!==null?t:[]}var fz=new Hs("tag:yaml.org,2002:omap",{kind:"sequence",resolve:cz,construct:hz}),pz=Object.prototype.toString;function dz(t){if(t===null)return!0;var e,i,a,c,f,o=t;for(f=new Array(o.length),e=0,i=o.length;e<i;e+=1){if(a=o[e],pz.call(a)!=="[object Object]"||(c=Object.keys(a),c.length!==1))return!1;f[e]=[c[0],a[c[0]]]}return!0}function mz(t){if(t===null)return[];var e,i,a,c,f,o=t;for(f=new Array(o.length),e=0,i=o.length;e<i;e+=1)a=o[e],c=Object.keys(a),f[e]=[c[0],a[c[0]]];return f}var gz=new Hs("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:dz,construct:mz}),vz=Object.prototype.hasOwnProperty;function yz(t){if(t===null)return!0;var e,i=t;for(e in i)if(vz.call(i,e)&&i[e]!==null)return!1;return!0}function _z(t){return t!==null?t:{}}var xz=new Hs("tag:yaml.org,2002:set",{kind:"mapping",resolve:yz,construct:_z});XR.extend({implicit:[tz,nz],explicit:[sz,fz,gz,xz]});function g2(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}var bz=new Array(256),Az=new Array(256);for(var um=0;um<256;um++)bz[um]=g2(um)?1:0,Az[um]=g2(um);function Uc(t){return typeof t=="function"?t():$(t)}function eb(t){return JSON.parse(JSON.stringify(t))}const Hm=typeof window<"u"&&typeof document<"u",wz=t=>t!=null,Cz=Object.prototype.toString,Iz=t=>Cz.call(t)==="[object Object]",w0=()=>{},Mz=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Ez=Sz();function Sz(){var t,e;return Hm&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const sf=function(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))};function cM(t){return Vm()}function Tz(t){let e;function i(){return e||(e=t()),e}return i.reset=async()=>{const a=e;e=void 0,a&&await a},i}function kz(t,e){var f;if(typeof t=="number")return t+e;const i=((f=t.match(/^-?\d+\.?\d*/))==null?void 0:f[0])||"",a=t.slice(i.length),c=Number.parseFloat(i)+e;return Number.isNaN(c)?t:c+a}function Pz(t,e){cM()&&dd(t,e)}function ip(t){const e=Uc(t);return(e==null?void 0:e.$el)??e}function Lz(t,e,i={}){const{immediate:a=!0}=i,c=$e(!1);let f=null;function o(){f&&(clearTimeout(f),f=null)}function y(){c.value=!1,o()}function _(...M){o(),c.value=!0,f=setTimeout(()=>{c.value=!1,f=null,t(...M)},Uc(e))}return a&&(c.value=!0,Hm&&_()),vd(y),{isPending:c_(c),start:_,stop:y}}function hM(t,e=!0,i){cM()?ml(t,i):e?t():xu(t)}class tA{get id(){return this._id}constructor(){this._id=`${sf()}`}}class xp{constructor(e,i,a){this.key=e,this.option=Object.assign({},a,i)}setBuild(e){return this.build=e,this}}class Gm extends tA{constructor(){super(...arguments),this.parent=void 0}setParent(e){this.parent=e,this.data_id=e.id,this.runAfterSetParent&&this.runAfterSetParent()}}let fM=class extends tA{constructor(e,i="map"){super(),this.event_map_type=e,this.type_select=i,this.options={}}setHandler(e){return this.handler=e,this}addToMap(e){return this.handler&&e.on(this.event_map_type,this.handler),this}removeFromMap(e){return this.handler&&e.off(this.event_map_type,this.handler),this}};class Dz extends fM{constructor(){super("click","map"),this.setClassPointer("pointer")}setClassPointer(e){this.options.classPointer=e}setHandler(e){return this.handler=e,this}addToMap(e){return this.handler?(this.options.classPointer&&e.getCanvas().classList.add(this.options.classPointer),e.dragPan.disable(),e.boxZoom.disable(),this.map_ranger=Rz(e.getCanvasContainer(),this.handler),this):this}removeFromMap(e){return this.options.classPointer&&e.getCanvas().classList.remove(this.options.classPointer),this.map_ranger&&(this.map_ranger.destroy(),this.map_ranger=void 0),e.dragPan.enable(),e.boxZoom.enable(),this}}function Rz(t,e){let i=!0,a,c,f;t.addEventListener("mousedown",y,!0);function o(O){const G=t.getBoundingClientRect();return{x:O.clientX-G.left-t.clientLeft,y:O.clientY-G.top-t.clientTop}}function y(O){document.addEventListener("mousemove",_),document.addEventListener("mouseup",M),document.addEventListener("keydown",T),a=o(O)}function _(O){if(!i)return;c=o(O),f||(f=document.createElement("div"),f.classList.add("boxdraw"),t.appendChild(f));const G=Math.min(a.x,c.x),H=Math.max(a.x,c.x),X=Math.min(a.y,c.y),st=Math.max(a.y,c.y),K=`translate(${G}px, ${X}px)`;f.style.transform=K,f.style.width=H-G+"px",f.style.height=st-X+"px"}function M(O){k([a,o(O)])}function T(O){O.keyCode===27&&k()}function k(O){document.removeEventListener("mousemove",_),document.removeEventListener("keydown",T),document.removeEventListener("mouseup",M),f&&(f.parentNode&&f.parentNode.removeChild(f),f=void 0),O&&e&&e(O)}function P(){t.removeEventListener("mousedown",y),i=!1,e=void 0,k()}return{destroy:P}}class eA extends fM{constructor(e="map"){super("click",e),this.setClassPointer("pointer")}setClassPointer(e){this.options.classPointer=e}addToMap(e){return this.options.classPointer&&e.getCanvas().classList.add(this.options.classPointer),this.handler&&(e.on("click",this.handler),e.on("touchstart",this.handler)),this}removeFromMap(e){return this.options.classPointer&&e.getCanvas().classList.remove(this.options.classPointer),this.handler&&(e.off("click",this.handler),e.off("touchstart",this.handler)),this}}function zz(t,e,i,a={}){return new Promise((c,f)=>{t.loadImage(i,(o,y)=>{o&&f(o),t.hasImage(e)||t.addImage(e,y,a),c(!0)})})}const nA="image";function pM(t){hf(t,nA,Wl({images:{}}))}md(nA,pM);async function Oz(t,e,i,a={}){const c=pa(t,nA);return c.images[e]={path:i,id:e,name:e,is_sprite:!1,category:"custom"},up.getMap(t,async o=>zz(o,e,i,a))}const Bz=Object.freeze(Object.defineProperty({__proto__:null,addImage:Oz,initMapImage:pM},Symbol.toStringTag,{value:"Module"}));var _s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function iA(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var c=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return t[a]}})}),i}var Z0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Z0.exports;(function(t,e){(function(){var i,a="4.17.21",c=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",y="Invalid `variable` option passed into `_.template`",_="__lodash_hash_undefined__",M=500,T="__lodash_placeholder__",k=1,P=2,O=4,G=1,H=2,X=1,st=2,K=4,et=8,xt=16,Nt=32,It=64,St=128,Gt=256,Dt=512,Qt=30,jt="...",Vt=800,Bt=16,de=1,An=2,_e=3,He=1/0,Ue=9007199254740991,ki=17976931348623157e292,oi=NaN,Vn=4294967295,gn=Vn-1,Qn=Vn>>>1,Pi=[["ary",St],["bind",X],["bindKey",st],["curry",et],["curryRight",xt],["flip",Dt],["partial",Nt],["partialRight",It],["rearg",Gt]],ci="[object Arguments]",Ai="[object Array]",ue="[object AsyncFunction]",Qe="[object Boolean]",me="[object Date]",Te="[object DOMException]",wi="[object Error]",Li="[object Function]",ut="[object GeneratorFunction]",At="[object Map]",Jt="[object Number]",le="[object Null]",pe="[object Object]",Be="[object Promise]",un="[object Proxy]",we="[object RegExp]",De="[object Set]",Se="[object String]",en="[object Symbol]",Cn="[object Undefined]",In="[object WeakMap]",Pn="[object WeakSet]",Jn="[object ArrayBuffer]",Di="[object DataView]",Ci="[object Float32Array]",or="[object Float64Array]",Gr="[object Int8Array]",Yo="[object Int16Array]",va="[object Int32Array]",Ra="[object Uint8Array]",qa="[object Uint8ClampedArray]",Ar="[object Uint16Array]",So="[object Uint32Array]",qs=/\b__p \+= '';/g,Ws=/\b(__p \+=) '' \+/g,gl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,za=/&(?:amp|lt|gt|quot|#39);/g,lo=/[&<>"']/g,Zs=RegExp(za.source),bu=RegExp(lo.source),qr=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,W=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,at=/^\w*$/,dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tt=/[\\^$.*+?()[\]{}|]/g,Rt=RegExp(Tt.source),tt=/^\s+/,yt=/\s/,Zt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ge=/\{\n\/\* \[wrapped with (.+)\] \*/,be=/,? & /,re=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ye=/[()=,{}\[\]\/\s]/,ln=/\\(\\)?/g,an=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ae=/\w*$/,Le=/^[-+]0x[0-9a-f]+$/i,Ve=/^0b[01]+$/i,je=/^\[object .+?Constructor\]$/,ii=/^0o[0-7]+$/i,Ye=/^(?:0|[1-9]\d*)$/,xi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ui=/($^)/,hi=/['\n\r\u2028\u2029\\]/g,gi="\\ud800-\\udfff",vi="\\u0300-\\u036f",To="\\ufe20-\\ufe2f",qn="\\u20d0-\\u20ff",kr=vi+To+qn,Zi="\\u2700-\\u27bf",$n="a-z\\xdf-\\xf6\\xf8-\\xff",ai="\\xac\\xb1\\xd7\\xf7",ko="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",as="\\u2000-\\u206f",Pr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Bo="A-Z\\xc0-\\xd6\\xd8-\\xde",jc="\\ufe0e\\ufe0f",Au=ai+ko+as+Pr,Lr="[']",wu="["+gi+"]",xo="["+Au+"]",Wr="["+kr+"]",ya="\\d+",gr="["+Zi+"]",Wa="["+$n+"]",_a="[^"+gi+Au+ya+Zi+$n+Bo+"]",$l="\\ud83c[\\udffb-\\udfff]",C="(?:"+Wr+"|"+$l+")",R="[^"+gi+"]",Y="(?:\\ud83c[\\udde6-\\uddff]){2}",gt="[\\ud800-\\udbff][\\udc00-\\udfff]",kt="["+Bo+"]",Pt="\\u200d",Ht="(?:"+Wa+"|"+_a+")",ke="(?:"+kt+"|"+_a+")",Ne="(?:"+Lr+"(?:d|ll|m|re|s|t|ve))?",nn="(?:"+Lr+"(?:D|LL|M|RE|S|T|VE))?",sn=C+"?",qe="["+jc+"]?",ti="(?:"+Pt+"(?:"+[R,Y,gt].join("|")+")"+qe+sn+")*",Nr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",si="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",wr=qe+sn+ti,xe="(?:"+[gr,Y,gt].join("|")+")"+wr,wn="(?:"+[R+Wr+"?",Wr,Y,gt,wu].join("|")+")",ar=RegExp(Lr,"g"),no=RegExp(Wr,"g"),Qi=RegExp($l+"(?="+$l+")|"+wn+wr,"g"),Cs=RegExp([kt+"?"+Wa+"+"+Ne+"(?="+[xo,kt,"$"].join("|")+")",ke+"+"+nn+"(?="+[xo,kt+Ht,"$"].join("|")+")",kt+"?"+Ht+"+"+Ne,kt+"+"+nn,si,Nr,ya,xe].join("|"),"g"),vl=RegExp("["+Pt+gi+kr+jc+"]"),nr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$s=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yl=-1,ji={};ji[Ci]=ji[or]=ji[Gr]=ji[Yo]=ji[va]=ji[Ra]=ji[qa]=ji[Ar]=ji[So]=!0,ji[ci]=ji[Ai]=ji[Jn]=ji[Qe]=ji[Di]=ji[me]=ji[wi]=ji[Li]=ji[At]=ji[Jt]=ji[pe]=ji[we]=ji[De]=ji[Se]=ji[In]=!1;var Ii={};Ii[ci]=Ii[Ai]=Ii[Jn]=Ii[Di]=Ii[Qe]=Ii[me]=Ii[Ci]=Ii[or]=Ii[Gr]=Ii[Yo]=Ii[va]=Ii[At]=Ii[Jt]=Ii[pe]=Ii[we]=Ii[De]=Ii[Se]=Ii[en]=Ii[Ra]=Ii[qa]=Ii[Ar]=Ii[So]=!0,Ii[wi]=Ii[Li]=Ii[In]=!1;var Zr={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Yl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},mf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},gf=parseFloat,bh=parseInt,Gc=typeof _s=="object"&&_s&&_s.Object===Object&&_s,Ah=typeof self=="object"&&self&&self.Object===Object&&self,uo=Gc||Ah||Function("return this")(),cc=e&&!e.nodeType&&e,Ys=cc&&!0&&t&&!t.nodeType&&t,vf=Ys&&Ys.exports===cc,Xl=vf&&Gc.process,bo=function(){try{var Ot=Ys&&Ys.require&&Ys.require("util").types;return Ot||Xl&&Xl.binding&&Xl.binding("util")}catch{}}(),hc=bo&&bo.isArrayBuffer,co=bo&&bo.isDate,Oa=bo&&bo.isMap,Is=bo&&bo.isRegExp,Ms=bo&&bo.isSet,_l=bo&&bo.isTypedArray;function ho(Ot,he,Kt){switch(Kt.length){case 0:return Ot.call(he);case 1:return Ot.call(he,Kt[0]);case 2:return Ot.call(he,Kt[0],Kt[1]);case 3:return Ot.call(he,Kt[0],Kt[1],Kt[2])}return Ot.apply(he,Kt)}function ss(Ot,he,Kt,Ae){for(var Un=-1,li=Ot==null?0:Ot.length;++Un<li;){var Mi=Ot[Un];he(Ae,Mi,Kt(Mi),Ot)}return Ae}function Ao(Ot,he){for(var Kt=-1,Ae=Ot==null?0:Ot.length;++Kt<Ae&&he(Ot[Kt],Kt,Ot)!==!1;);return Ot}function xl(Ot,he){for(var Kt=Ot==null?0:Ot.length;Kt--&&he(Ot[Kt],Kt,Ot)!==!1;);return Ot}function Xs(Ot,he){for(var Kt=-1,Ae=Ot==null?0:Ot.length;++Kt<Ae;)if(!he(Ot[Kt],Kt,Ot))return!1;return!0}function na(Ot,he){for(var Kt=-1,Ae=Ot==null?0:Ot.length,Un=0,li=[];++Kt<Ae;){var Mi=Ot[Kt];he(Mi,Kt,Ot)&&(li[Un++]=Mi)}return li}function Cu(Ot,he){var Kt=Ot==null?0:Ot.length;return!!Kt&&Kl(Ot,he,0)>-1}function Ji(Ot,he,Kt){for(var Ae=-1,Un=Ot==null?0:Ot.length;++Ae<Un;)if(Kt(he,Ot[Ae]))return!0;return!1}function Vr(Ot,he){for(var Kt=-1,Ae=Ot==null?0:Ot.length,Un=Array(Ae);++Kt<Ae;)Un[Kt]=he(Ot[Kt],Kt,Ot);return Un}function Ba(Ot,he){for(var Kt=-1,Ae=he.length,Un=Ot.length;++Kt<Ae;)Ot[Un+Kt]=he[Kt];return Ot}function bl(Ot,he,Kt,Ae){var Un=-1,li=Ot==null?0:Ot.length;for(Ae&&li&&(Kt=Ot[++Un]);++Un<li;)Kt=he(Kt,Ot[Un],Un,Ot);return Kt}function qc(Ot,he,Kt,Ae){var Un=Ot==null?0:Ot.length;for(Ae&&Un&&(Kt=Ot[--Un]);Un--;)Kt=he(Kt,Ot[Un],Un,Ot);return Kt}function Iu(Ot,he){for(var Kt=-1,Ae=Ot==null?0:Ot.length;++Kt<Ae;)if(he(Ot[Kt],Kt,Ot))return!0;return!1}var Wc=ia("length");function ls(Ot){return Ot.split("")}function Al(Ot){return Ot.match(re)||[]}function wl(Ot,he,Kt){var Ae;return Kt(Ot,function(Un,li,Mi){if(he(Un,li,Mi))return Ae=li,!1}),Ae}function fc(Ot,he,Kt,Ae){for(var Un=Ot.length,li=Kt+(Ae?1:-1);Ae?li--:++li<Un;)if(he(Ot[li],li,Ot))return li;return-1}function Kl(Ot,he,Kt){return he===he?Xc(Ot,he,Kt):fc(Ot,Ks,Kt)}function wh(Ot,he,Kt,Ae){for(var Un=Kt-1,li=Ot.length;++Un<li;)if(Ae(Ot[Un],he))return Un;return-1}function Ks(Ot){return Ot!==Ot}function pc(Ot,he){var Kt=Ot==null?0:Ot.length;return Kt?Ri(Ot,he)/Kt:oi}function ia(Ot){return function(he){return he==null?i:he[Ot]}}function Fo(Ot){return function(he){return Ot==null?i:Ot[he]}}function Qs(Ot,he,Kt,Ae,Un){return Un(Ot,function(li,Mi,dn){Kt=Ae?(Ae=!1,li):he(Kt,li,Mi,dn)}),Kt}function Cl(Ot,he){var Kt=Ot.length;for(Ot.sort(he);Kt--;)Ot[Kt]=Ot[Kt].value;return Ot}function Ri(Ot,he){for(var Kt,Ae=-1,Un=Ot.length;++Ae<Un;){var li=he(Ot[Ae]);li!==i&&(Kt=Kt===i?li:Kt+li)}return Kt}function Mu(Ot,he){for(var Kt=-1,Ae=Array(Ot);++Kt<Ot;)Ae[Kt]=he(Kt);return Ae}function Zc(Ot,he){return Vr(he,function(Kt){return[Kt,Ot[Kt]]})}function us(Ot){return Ot&&Ot.slice(0,Wt(Ot)+1).replace(tt,"")}function ra(Ot){return function(he){return Ot(he)}}function $c(Ot,he){return Vr(he,function(Kt){return Ot[Kt]})}function Eu(Ot,he){return Ot.has(he)}function dc(Ot,he){for(var Kt=-1,Ae=Ot.length;++Kt<Ae&&Kl(he,Ot[Kt],0)>-1;);return Kt}function Il(Ot,he){for(var Kt=Ot.length;Kt--&&Kl(he,Ot[Kt],0)>-1;);return Kt}function Su(Ot,he){for(var Kt=Ot.length,Ae=0;Kt--;)Ot[Kt]===he&&++Ae;return Ae}var Ql=Fo(Zr),Es=Fo(Yl);function Tu(Ot){return"\\"+mf[Ot]}function Js(Ot,he){return Ot==null?i:Ot[he]}function cs(Ot){return vl.test(Ot)}function No(Ot){return nr.test(Ot)}function Ch(Ot){for(var he,Kt=[];!(he=Ot.next()).done;)Kt.push(he.value);return Kt}function Yc(Ot){var he=-1,Kt=Array(Ot.size);return Ot.forEach(function(Ae,Un){Kt[++he]=[Un,Ae]}),Kt}function ku(Ot,he){return function(Kt){return Ot(he(Kt))}}function Xo(Ot,he){for(var Kt=-1,Ae=Ot.length,Un=0,li=[];++Kt<Ae;){var Mi=Ot[Kt];(Mi===he||Mi===T)&&(Ot[Kt]=T,li[Un++]=Kt)}return li}function tl(Ot){var he=-1,Kt=Array(Ot.size);return Ot.forEach(function(Ae){Kt[++he]=Ae}),Kt}function mc(Ot){var he=-1,Kt=Array(Ot.size);return Ot.forEach(function(Ae){Kt[++he]=[Ae,Ae]}),Kt}function Xc(Ot,he,Kt){for(var Ae=Kt-1,Un=Ot.length;++Ae<Un;)if(Ot[Ae]===he)return Ae;return-1}function Ml(Ot,he,Kt){for(var Ae=Kt+1;Ae--;)if(Ot[Ae]===he)return Ae;return Ae}function Jl(Ot){return cs(Ot)?rn(Ot):Wc(Ot)}function xa(Ot){return cs(Ot)?Rn(Ot):ls(Ot)}function Wt(Ot){for(var he=Ot.length;he--&&yt.test(Ot.charAt(he)););return he}var ce=Fo(Hc);function rn(Ot){for(var he=Qi.lastIndex=0;Qi.test(Ot);)++he;return he}function Rn(Ot){return Ot.match(Qi)||[]}function vr(Ot){return Ot.match(Cs)||[]}var zi=function Ot(he){he=he==null?uo:hr.defaults(uo.Object(),he,hr.pick(uo,$s));var Kt=he.Array,Ae=he.Date,Un=he.Error,li=he.Function,Mi=he.Math,dn=he.Object,Hi=he.RegExp,Ko=he.String,io=he.TypeError,Fa=Kt.prototype,Pu=li.prototype,Lu=dn.prototype,Kc=he["__core-js_shared__"],$i=Pu.toString,Ln=Lu.hasOwnProperty,Za=0,fr=function(){var p=/[^.]+$/.exec(Kc&&Kc.keys&&Kc.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),Ss=Lu.toString,Na=$i.call(dn),sr=uo._,Xe=Hi("^"+$i.call(Ln).replace(Tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ro=vf?he.Buffer:i,ba=he.Symbol,Aa=he.Uint8Array,Po=ro?ro.allocUnsafe:i,Lo=ku(dn.getPrototypeOf,dn),tu=dn.create,Re=Lu.propertyIsEnumerable,el=Fa.splice,El=ba?ba.isConcatSpreadable:i,Sl=ba?ba.iterator:i,oo=ba?ba.toStringTag:i,fo=function(){try{var p=ds(dn,"defineProperty");return p({},"",{}),p}catch{}}(),yf=he.clearTimeout!==uo.clearTimeout&&he.clearTimeout,_f=Ae&&Ae.now!==uo.Date.now&&Ae.now,$a=he.setTimeout!==uo.setTimeout&&he.setTimeout,Ts=Mi.ceil,Ih=Mi.floor,gc=dn.getOwnPropertySymbols,bp=ro?ro.isBuffer:i,xf=he.isFinite,nl=Fa.join,hs=ku(dn.keys,dn),zn=Mi.max,$r=Mi.min,ks=Ae.now,Qo=he.parseInt,Du=Mi.random,Ru=Fa.reverse,fs=ds(he,"DataView"),Do=ds(he,"Map"),vc=ds(he,"Promise"),vn=ds(he,"Set"),cn=ds(he,"WeakMap"),zu=ds(dn,"create"),Vo=cn&&new cn,wa={},Jo=oh(fs),Tl=oh(Do),Ap=oh(vc),bf=oh(vn),tr=oh(cn),po=ba?ba.prototype:i,Qc=po?po.valueOf:i,Ou=po?po.toString:i;function rt(p){if(Kr(p)&&!Wn(p)&&!(p instanceof mi)){if(p instanceof aa)return p;if(Ln.call(p,"__wrapped__"))return mg(p)}return new aa(p)}var Ya=function(){function p(){}return function(g){if(!Xr(g))return{};if(tu)return tu(g);p.prototype=g;var I=new p;return p.prototype=i,I}}();function oa(){}function aa(p,g){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=i}rt.templateSettings={escape:qr,evaluate:U,interpolate:W,variable:"",imports:{_:rt}},rt.prototype=oa.prototype,rt.prototype.constructor=rt,aa.prototype=Ya(oa.prototype),aa.prototype.constructor=aa;function mi(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Vn,this.__views__=[]}function Af(){var p=new mi(this.__wrapped__);return p.__actions__=Os(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=Os(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=Os(this.__views__),p}function Jc(){if(this.__filtered__){var p=new mi(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function Mh(){var p=this.__wrapped__.value(),g=this.__dir__,I=Wn(p),z=g<0,q=I?p.length:0,lt=r1(0,q,this.__views__),Et=lt.start,Ft=lt.end,Xt=Ft-Et,Ie=z?Ft:Et-1,Ee=this.__iteratees__,ze=Ee.length,xn=0,Gn=$r(Xt,this.__takeCount__);if(!I||!z&&q==Xt&&Gn==Xt)return eg(p,this.__actions__);var pi=[];t:for(;Xt--&&xn<Gn;){Ie+=g;for(var Ki=-1,di=p[Ie];++Ki<ze;){var rr=Ee[Ki],dr=rr.iteratee,cu=rr.type,ll=dr(di);if(cu==An)di=ll;else if(!ll){if(cu==de)continue t;break t}}pi[xn++]=di}return pi}mi.prototype=Ya(oa.prototype),mi.prototype.constructor=mi;function eu(p){var g=-1,I=p==null?0:p.length;for(this.clear();++g<I;){var z=p[g];this.set(z[0],z[1])}}function th(){this.__data__=zu?zu(null):{},this.size=0}function yc(p){var g=this.has(p)&&delete this.__data__[p];return this.size-=g?1:0,g}function wp(p){var g=this.__data__;if(zu){var I=g[p];return I===_?i:I}return Ln.call(g,p)?g[p]:i}function Bu(p){var g=this.__data__;return zu?g[p]!==i:Ln.call(g,p)}function Fu(p,g){var I=this.__data__;return this.size+=this.has(p)?0:1,I[p]=zu&&g===i?_:g,this}eu.prototype.clear=th,eu.prototype.delete=yc,eu.prototype.get=wp,eu.prototype.has=Bu,eu.prototype.set=Fu;function Ps(p){var g=-1,I=p==null?0:p.length;for(this.clear();++g<I;){var z=p[g];this.set(z[0],z[1])}}function Nu(){this.__data__=[],this.size=0}function Ls(p){var g=this.__data__,I=ie(g,p);if(I<0)return!1;var z=g.length-1;return I==z?g.pop():el.call(g,I,1),--this.size,!0}function Cp(p){var g=this.__data__,I=ie(g,p);return I<0?i:g[I][1]}function Eh(p){return ie(this.__data__,p)>-1}function Ip(p,g){var I=this.__data__,z=ie(I,p);return z<0?(++this.size,I.push([p,g])):I[z][1]=g,this}Ps.prototype.clear=Nu,Ps.prototype.delete=Ls,Ps.prototype.get=Cp,Ps.prototype.has=Eh,Ps.prototype.set=Ip;function Ds(p){var g=-1,I=p==null?0:p.length;for(this.clear();++g<I;){var z=p[g];this.set(z[0],z[1])}}function l(){this.size=0,this.__data__={hash:new eu,map:new(Do||Ps),string:new eu}}function h(p){var g=lr(this,p).delete(p);return this.size-=g?1:0,g}function u(p){return lr(this,p).get(p)}function m(p){return lr(this,p).has(p)}function b(p,g){var I=lr(this,p),z=I.size;return I.set(p,g),this.size+=I.size==z?0:1,this}Ds.prototype.clear=l,Ds.prototype.delete=h,Ds.prototype.get=u,Ds.prototype.has=m,Ds.prototype.set=b;function w(p){var g=-1,I=p==null?0:p.length;for(this.__data__=new Ds;++g<I;)this.add(p[g])}function E(p){return this.__data__.set(p,_),this}function L(p){return this.__data__.has(p)}w.prototype.add=w.prototype.push=E,w.prototype.has=L;function F(p){var g=this.__data__=new Ps(p);this.size=g.size}function j(){this.__data__=new Ps,this.size=0}function nt(p){var g=this.__data__,I=g.delete(p);return this.size=g.size,I}function it(p){return this.__data__.get(p)}function ot(p){return this.__data__.has(p)}function vt(p,g){var I=this.__data__;if(I instanceof Ps){var z=I.__data__;if(!Do||z.length<c-1)return z.push([p,g]),this.size=++I.size,this;I=this.__data__=new Ds(z)}return I.set(p,g),this.size=I.size,this}F.prototype.clear=j,F.prototype.delete=nt,F.prototype.get=it,F.prototype.has=ot,F.prototype.set=vt;function ft(p,g){var I=Wn(p),z=!I&&ts(p),q=!I&&!z&&sl(p),lt=!I&&!z&&!q&&qu(p),Et=I||z||q||lt,Ft=Et?Mu(p.length,Ko):[],Xt=Ft.length;for(var Ie in p)(g||Ln.call(p,Ie))&&!(Et&&(Ie=="length"||q&&(Ie=="offset"||Ie=="parent")||lt&&(Ie=="buffer"||Ie=="byteLength"||Ie=="byteOffset")||Bs(Ie,Xt)))&&Ft.push(Ie);return Ft}function wt(p){var g=p.length;return g?p[Qm(0,g-1)]:i}function ht(p,g){return Cc(Os(p),We(g,0,p.length))}function Ct(p){return Cc(Os(p))}function Lt(p,g,I){(I!==i&&!cr(p[g],I)||I===i&&!(g in p))&&Ce(p,g,I)}function qt(p,g,I){var z=p[g];(!(Ln.call(p,g)&&cr(z,I))||I===i&&!(g in p))&&Ce(p,g,I)}function ie(p,g){for(var I=p.length;I--;)if(cr(p[I][0],g))return I;return-1}function ee(p,g,I,z){return Dn(p,function(q,lt,Et){g(z,q,I(q),Et)}),z}function oe(p,g){return p&&Uu(g,ua(g),p)}function ve(p,g){return p&&Uu(g,ta(g),p)}function Ce(p,g,I){g=="__proto__"&&fo?fo(p,g,{configurable:!0,enumerable:!0,value:I,writable:!0}):p[g]=I}function Pe(p,g){for(var I=-1,z=g.length,q=Kt(z),lt=p==null;++I<z;)q[I]=lt?i:om(p,g[I]);return q}function We(p,g,I){return p===p&&(I!==i&&(p=p<=I?p:I),g!==i&&(p=p>=g?p:g)),p}function hn(p,g,I,z,q,lt){var Et,Ft=g&k,Xt=g&P,Ie=g&O;if(I&&(Et=q?I(p,z,q,lt):I(p)),Et!==i)return Et;if(!Xr(p))return p;var Ee=Wn(p);if(Ee){if(Et=a1(p),!Ft)return Os(p,Et)}else{var ze=Ka(p),xn=ze==Li||ze==ut;if(sl(p))return Yv(p,Ft);if(ze==pe||ze==ci||xn&&!q){if(Et=Xt||xn?{}:uy(p),!Ft)return Xt?Mf(p,ve(Et,p)):Qv(p,oe(Et,p))}else{if(!Ii[ze])return q?p:{};Et=s1(p,ze,Ft)}}lt||(lt=new F);var Gn=lt.get(p);if(Gn)return Gn;lt.set(p,Et),Hh(p)?p.forEach(function(di){Et.add(hn(di,g,I,di,p,lt))}):Sc(p)&&p.forEach(function(di,rr){Et.set(rr,hn(di,g,I,rr,p,lt))});var pi=Ie?Xt?lg:sg:Xt?ta:ua,Ki=Ee?i:pi(p);return Ao(Ki||p,function(di,rr){Ki&&(rr=di,di=p[rr]),qt(Et,rr,hn(di,g,I,rr,p,lt))}),Et}function Tn(p){var g=ua(p);return function(I){return En(I,p,g)}}function En(p,g,I){var z=I.length;if(p==null)return!z;for(p=dn(p);z--;){var q=I[z],lt=g[q],Et=p[q];if(Et===i&&!(q in p)||!lt(Et))return!1}return!0}function Oi(p,g,I){if(typeof p!="function")throw new io(o);return zh(function(){p.apply(i,I)},g)}function tn(p,g,I,z){var q=-1,lt=Cu,Et=!0,Ft=p.length,Xt=[],Ie=g.length;if(!Ft)return Xt;I&&(g=Vr(g,ra(I))),z?(lt=Ji,Et=!1):g.length>=c&&(lt=Eu,Et=!1,g=new w(g));t:for(;++q<Ft;){var Ee=p[q],ze=I==null?Ee:I(Ee);if(Ee=z||Ee!==0?Ee:0,Et&&ze===ze){for(var xn=Ie;xn--;)if(g[xn]===ze)continue t;Xt.push(Ee)}else lt(g,ze,z)||Xt.push(Ee)}return Xt}var Dn=ig(Ur),ei=ig(wo,!0);function Hn(p,g){var I=!0;return Dn(p,function(z,q,lt){return I=!!g(z,q,lt),I}),I}function Fn(p,g,I){for(var z=-1,q=p.length;++z<q;){var lt=p[z],Et=g(lt);if(Et!=null&&(Ft===i?Et===Et&&!Sa(Et):I(Et,Ft)))var Ft=Et,Xt=lt}return Xt}function ni(p,g,I,z){var q=p.length;for(I=Si(I),I<0&&(I=-I>q?0:q+I),z=z===i||z>q?q:Si(z),z<0&&(z+=q),z=I>z?0:Oy(z);I<z;)p[I++]=g;return p}function Nn(p,g){var I=[];return Dn(p,function(z,q,lt){g(z,q,lt)&&I.push(z)}),I}function mn(p,g,I,z,q){var lt=-1,Et=p.length;for(I||(I=zd),q||(q=[]);++lt<Et;){var Ft=p[lt];g>0&&I(Ft)?g>1?mn(Ft,g-1,I,z,q):Ba(q,Ft):z||(q[q.length]=Ft)}return q}var mo=rg(),Yr=rg(!0);function Ur(p,g){return p&&mo(p,g,ua)}function wo(p,g){return p&&Yr(p,g,ua)}function Cr(p,g){return na(g,function(I){return Fl(p[I])})}function yr(p,g){g=Ac(g,p);for(var I=0,z=g.length;p!=null&&I<z;)p=p[lu(g[I++])];return I&&I==z?p:i}function Va(p,g,I){var z=g(p);return Wn(p)?z:Ba(z,I(p))}function mr(p){return p==null?p===i?Cn:le:oo&&oo in dn(p)?Tf(p):Fd(p)}function kl(p,g){return p>g}function Ua(p,g){return p!=null&&Ln.call(p,g)}function il(p,g){return p!=null&&g in dn(p)}function Rs(p,g,I){return p>=$r(g,I)&&p<zn(g,I)}function _c(p,g,I){for(var z=I?Ji:Cu,q=p[0].length,lt=p.length,Et=lt,Ft=Kt(lt),Xt=1/0,Ie=[];Et--;){var Ee=p[Et];Et&&g&&(Ee=Vr(Ee,ra(g))),Xt=$r(Ee.length,Xt),Ft[Et]=!I&&(g||q>=120&&Ee.length>=120)?new w(Et&&Ee):i}Ee=p[0];var ze=-1,xn=Ft[0];t:for(;++ze<q&&Ie.length<Xt;){var Gn=Ee[ze],pi=g?g(Gn):Gn;if(Gn=I||Gn!==0?Gn:0,!(xn?Eu(xn,pi):z(Ie,pi,I))){for(Et=lt;--Et;){var Ki=Ft[Et];if(!(Ki?Eu(Ki,pi):z(p[Et],pi,I)))continue t}xn&&xn.push(pi),Ie.push(Gn)}}return Ie}function eh(p,g,I,z){return Ur(p,function(q,lt,Et){g(z,I(q),lt,Et)}),z}function zs(p,g,I){g=Ac(g,p),p=hg(p,g);var z=p==null?p:p[lu(Ol(g))];return z==null?i:ho(z,p,I)}function xc(p){return Kr(p)&&mr(p)==ci}function Sh(p){return Kr(p)&&mr(p)==Jn}function Pl(p){return Kr(p)&&mr(p)==me}function nu(p,g,I,z,q){return p===g?!0:p==null||g==null||!Kr(p)&&!Kr(g)?p!==p&&g!==g:Ll(p,g,I,z,nu,q)}function Ll(p,g,I,z,q,lt){var Et=Wn(p),Ft=Wn(g),Xt=Et?Ai:Ka(p),Ie=Ft?Ai:Ka(g);Xt=Xt==ci?pe:Xt,Ie=Ie==ci?pe:Ie;var Ee=Xt==pe,ze=Ie==pe,xn=Xt==Ie;if(xn&&sl(p)){if(!sl(g))return!1;Et=!0,Ee=!1}if(xn&&!Ee)return lt||(lt=new F),Et||qu(p)?ay(p,g,I,z,q,lt):n1(p,g,Xt,I,z,q,lt);if(!(I&G)){var Gn=Ee&&Ln.call(p,"__wrapped__"),pi=ze&&Ln.call(g,"__wrapped__");if(Gn||pi){var Ki=Gn?p.value():p,di=pi?g.value():g;return lt||(lt=new F),q(Ki,di,I,z,lt)}}return xn?(lt||(lt=new F),i1(p,g,I,z,q,lt)):!1}function Ro(p){return Kr(p)&&Ka(p)==At}function rl(p,g,I,z){var q=I.length,lt=q,Et=!z;if(p==null)return!lt;for(p=dn(p);q--;){var Ft=I[q];if(Et&&Ft[2]?Ft[1]!==p[Ft[0]]:!(Ft[0]in p))return!1}for(;++q<lt;){Ft=I[q];var Xt=Ft[0],Ie=p[Xt],Ee=Ft[1];if(Et&&Ft[2]){if(Ie===i&&!(Xt in p))return!1}else{var ze=new F;if(z)var xn=z(Ie,Ee,Xt,p,g,ze);if(!(xn===i?nu(Ee,Ie,G|H,z,ze):xn))return!1}}return!0}function iu(p){if(!Xr(p)||cy(p))return!1;var g=Fl(p)?Xe:je;return g.test(oh(p))}function bc(p){return Kr(p)&&mr(p)==we}function Yi(p){return Kr(p)&&Ka(p)==De}function ps(p){return Kr(p)&&Nl(p.length)&&!!ji[mr(p)]}function Ca(p){return typeof p=="function"?p:p==null?Vl:typeof p=="object"?Wn(p)?Mp(p[0],p[1]):ih(p):FA(p)}function ru(p){if(!wc(p))return hs(p);var g=[];for(var I in dn(p))Ln.call(p,I)&&I!="constructor"&&g.push(I);return g}function Xm(p){if(!Xr(p))return Bd(p);var g=wc(p),I=[];for(var z in p)z=="constructor"&&(g||!Ln.call(p,z))||I.push(z);return I}function nh(p,g){return p<g}function _d(p,g){var I=-1,z=Xi(p)?Kt(p.length):[];return Dn(p,function(q,lt,Et){z[++I]=g(q,lt,Et)}),z}function ih(p){var g=Dd(p);return g.length==1&&g[0][2]?ms(g[0][0],g[0][1]):function(I){return I===p||rl(I,p,g)}}function Mp(p,g){return ug(p)&&kf(g)?ms(lu(p),g):function(I){var z=om(I,p);return z===i&&z===g?Uf(I,p):nu(g,z,G|H)}}function ou(p,g,I,z,q){p!==g&&mo(g,function(lt,Et){if(q||(q=new F),Xr(lt))wf(p,g,Et,I,ou,z,q);else{var Ft=z?z(fg(p,Et),lt,Et+"",p,g,q):i;Ft===i&&(Ft=lt),Lt(p,Et,Ft)}},ta)}function wf(p,g,I,z,q,lt,Et){var Ft=fg(p,I),Xt=fg(g,I),Ie=Et.get(Xt);if(Ie){Lt(p,I,Ie);return}var Ee=lt?lt(Ft,Xt,I+"",p,g,Et):i,ze=Ee===i;if(ze){var xn=Wn(Xt),Gn=!xn&&sl(Xt),pi=!xn&&!Gn&&qu(Xt);Ee=Xt,xn||Gn||pi?Wn(Ft)?Ee=Ft:Er(Ft)?Ee=Os(Ft):Gn?(ze=!1,Ee=Yv(Xt,!0)):pi?(ze=!1,Ee=Md(Xt,!0)):Ee=[]:Tc(Xt)||ts(Xt)?(Ee=Ft,ts(Ft)?Ee=eo(Ft):(!Xr(Ft)||Fl(Ft))&&(Ee=uy(Xt))):ze=!1}ze&&(Et.set(Xt,Ee),q(Ee,Xt,z,lt,Et),Et.delete(Xt)),Lt(p,I,Ee)}function xd(p,g){var I=p.length;if(I)return g+=g<0?I:0,Bs(g,I)?p[g]:i}function rh(p,g,I){g.length?g=Vr(g,function(lt){return Wn(lt)?function(Et){return yr(Et,lt.length===1?lt[0]:lt)}:lt}):g=[Vl];var z=-1;g=Vr(g,ra(Yn()));var q=_d(p,function(lt,Et,Ft){var Xt=Vr(g,function(Ie){return Ie(lt)});return{criteria:Xt,index:++z,value:lt}});return Cl(q,function(lt,Et){return au(lt,Et,I)})}function Xa(p,g){return Gv(p,g,function(I,z){return Uf(p,z)})}function Gv(p,g,I){for(var z=-1,q=g.length,lt={};++z<q;){var Et=g[z],Ft=yr(p,Et);I(Ft,Et)&&Dl(lt,Ac(Et,p),Ft)}return lt}function qv(p){return function(g){return yr(g,p)}}function Km(p,g,I,z){var q=z?wh:Kl,lt=-1,Et=g.length,Ft=p;for(p===g&&(g=Os(g)),I&&(Ft=Vr(p,ra(I)));++lt<Et;)for(var Xt=0,Ie=g[lt],Ee=I?I(Ie):Ie;(Xt=q(Ft,Ee,Xt,z))>-1;)Ft!==p&&el.call(Ft,Xt,1),el.call(p,Xt,1);return p}function Wv(p,g){for(var I=p?g.length:0,z=I-1;I--;){var q=g[I];if(I==z||q!==lt){var lt=q;Bs(q)?el.call(p,q,1):tg(p,q)}}return p}function Qm(p,g){return p+Ih(Du()*(g-p+1))}function $_(p,g,I,z){for(var q=-1,lt=zn(Ts((g-p)/(I||1)),0),Et=Kt(lt);lt--;)Et[z?lt:++q]=p,p+=I;return Et}function Ep(p,g){var I="";if(!p||g<1||g>Ue)return I;do g%2&&(I+=p),g=Ih(g/2),g&&(p+=p);while(g);return I}function Gi(p,g){return Dp(Ja(p,g,Vl),p+"")}function bd(p){return wt(Zh(p))}function Zv(p,g){var I=Zh(p);return Cc(I,We(g,0,I.length))}function Dl(p,g,I,z){if(!Xr(p))return p;g=Ac(g,p);for(var q=-1,lt=g.length,Et=lt-1,Ft=p;Ft!=null&&++q<lt;){var Xt=lu(g[q]),Ie=I;if(Xt==="__proto__"||Xt==="constructor"||Xt==="prototype")return p;if(q!=Et){var Ee=Ft[Xt];Ie=z?z(Ee,Xt,Ft):i,Ie===i&&(Ie=Xr(Ee)?Ee:Bs(g[q+1])?[]:{})}qt(Ft,Xt,Ie),Ft=Ft[Xt]}return p}var Cf=Vo?function(p,g){return Vo.set(p,g),p}:Vl,Y_=fo?function(p,g){return fo(p,"toString",{configurable:!0,enumerable:!1,value:B1(g),writable:!0})}:Vl;function X_(p){return Cc(Zh(p))}function Rl(p,g,I){var z=-1,q=p.length;g<0&&(g=-g>q?0:q+g),I=I>q?q:I,I<0&&(I+=q),q=g>I?0:I-g>>>0,g>>>=0;for(var lt=Kt(q);++z<q;)lt[z]=p[z+g];return lt}function K_(p,g){var I;return Dn(p,function(z,q,lt){return I=g(z,q,lt),!I}),!!I}function Ad(p,g,I){var z=0,q=p==null?z:p.length;if(typeof g=="number"&&g===g&&q<=Qn){for(;z<q;){var lt=z+q>>>1,Et=p[lt];Et!==null&&!Sa(Et)&&(I?Et<=g:Et<g)?z=lt+1:q=lt}return q}return Jm(p,g,Vl,I)}function Jm(p,g,I,z){var q=0,lt=p==null?0:p.length;if(lt===0)return 0;g=I(g);for(var Et=g!==g,Ft=g===null,Xt=Sa(g),Ie=g===i;q<lt;){var Ee=Ih((q+lt)/2),ze=I(p[Ee]),xn=ze!==i,Gn=ze===null,pi=ze===ze,Ki=Sa(ze);if(Et)var di=z||pi;else Ie?di=pi&&(z||xn):Ft?di=pi&&xn&&(z||!Gn):Xt?di=pi&&xn&&!Gn&&(z||!Ki):Gn||Ki?di=!1:di=z?ze<=g:ze<g;di?q=Ee+1:lt=Ee}return $r(lt,gn)}function $v(p,g){for(var I=-1,z=p.length,q=0,lt=[];++I<z;){var Et=p[I],Ft=g?g(Et):Et;if(!I||!cr(Ft,Xt)){var Xt=Ft;lt[q++]=Et===0?0:Et}}return lt}function wd(p){return typeof p=="number"?p:Sa(p)?oi:+p}function ol(p){if(typeof p=="string")return p;if(Wn(p))return Vr(p,ol)+"";if(Sa(p))return Ou?Ou.call(p):"";var g=p+"";return g=="0"&&1/p==-He?"-0":g}function al(p,g,I){var z=-1,q=Cu,lt=p.length,Et=!0,Ft=[],Xt=Ft;if(I)Et=!1,q=Ji;else if(lt>=c){var Ie=g?null:ja(p);if(Ie)return tl(Ie);Et=!1,q=Eu,Xt=new w}else Xt=g?[]:Ft;t:for(;++z<lt;){var Ee=p[z],ze=g?g(Ee):Ee;if(Ee=I||Ee!==0?Ee:0,Et&&ze===ze){for(var xn=Xt.length;xn--;)if(Xt[xn]===ze)continue t;g&&Xt.push(ze),Ft.push(Ee)}else q(Xt,ze,I)||(Xt!==Ft&&Xt.push(ze),Ft.push(Ee))}return Ft}function tg(p,g){return g=Ac(g,p),p=hg(p,g),p==null||delete p[lu(Ol(g))]}function go(p,g,I,z){return Dl(p,g,I(yr(p,g)),z)}function Th(p,g,I,z){for(var q=p.length,lt=z?q:-1;(z?lt--:++lt<q)&&g(p[lt],lt,p););return I?Rl(p,z?0:lt,z?lt+1:q):Rl(p,z?lt+1:0,z?q:lt)}function eg(p,g){var I=p;return I instanceof mi&&(I=I.value()),bl(g,function(z,q){return q.func.apply(q.thisArg,Ba([z],q.args))},I)}function If(p,g,I){var z=p.length;if(z<2)return z?al(p[0]):[];for(var q=-1,lt=Kt(z);++q<z;)for(var Et=p[q],Ft=-1;++Ft<z;)Ft!=q&&(lt[q]=tn(lt[q]||Et,p[Ft],g,I));return al(mn(lt,1),g,I)}function Sp(p,g,I){for(var z=-1,q=p.length,lt=g.length,Et={};++z<q;){var Ft=z<lt?g[z]:i;I(Et,p[z],Ft)}return Et}function kh(p){return Er(p)?p:[]}function Cd(p){return typeof p=="function"?p:Vl}function Ac(p,g){return Wn(p)?p:ug(p,g)?[p]:Nd(Sr(p))}var Tp=Gi;function Vu(p,g,I){var z=p.length;return I=I===i?z:I,!g&&I>=z?p:Rl(p,g,I)}var Id=yf||function(p){return uo.clearTimeout(p)};function Yv(p,g){if(g)return p.slice();var I=p.length,z=Po?Po(I):new p.constructor(I);return p.copy(z),z}function Ph(p){var g=new p.constructor(p.byteLength);return new Aa(g).set(new Aa(p)),g}function Q_(p,g){var I=g?Ph(p.buffer):p.buffer;return new p.constructor(I,p.byteOffset,p.byteLength)}function ng(p){var g=new p.constructor(p.source,ae.exec(p));return g.lastIndex=p.lastIndex,g}function J_(p){return Qc?dn(Qc.call(p)):{}}function Md(p,g){var I=g?Ph(p.buffer):p.buffer;return new p.constructor(I,p.byteOffset,p.length)}function Ed(p,g){if(p!==g){var I=p!==i,z=p===null,q=p===p,lt=Sa(p),Et=g!==i,Ft=g===null,Xt=g===g,Ie=Sa(g);if(!Ft&&!Ie&&!lt&&p>g||lt&&Et&&Xt&&!Ft&&!Ie||z&&Et&&Xt||!I&&Xt||!q)return 1;if(!z&&!lt&&!Ie&&p<g||Ie&&I&&q&&!z&&!lt||Ft&&I&&q||!Et&&q||!Xt)return-1}return 0}function au(p,g,I){for(var z=-1,q=p.criteria,lt=g.criteria,Et=q.length,Ft=I.length;++z<Et;){var Xt=Ed(q[z],lt[z]);if(Xt){if(z>=Ft)return Xt;var Ie=I[z];return Xt*(Ie=="desc"?-1:1)}}return p.index-g.index}function Xv(p,g,I,z){for(var q=-1,lt=p.length,Et=I.length,Ft=-1,Xt=g.length,Ie=zn(lt-Et,0),Ee=Kt(Xt+Ie),ze=!z;++Ft<Xt;)Ee[Ft]=g[Ft];for(;++q<Et;)(ze||q<lt)&&(Ee[I[q]]=p[q]);for(;Ie--;)Ee[Ft++]=p[q++];return Ee}function Kv(p,g,I,z){for(var q=-1,lt=p.length,Et=-1,Ft=I.length,Xt=-1,Ie=g.length,Ee=zn(lt-Ft,0),ze=Kt(Ee+Ie),xn=!z;++q<Ee;)ze[q]=p[q];for(var Gn=q;++Xt<Ie;)ze[Gn+Xt]=g[Xt];for(;++Et<Ft;)(xn||q<lt)&&(ze[Gn+I[Et]]=p[q++]);return ze}function Os(p,g){var I=-1,z=p.length;for(g||(g=Kt(z));++I<z;)g[I]=p[I];return g}function Uu(p,g,I,z){var q=!I;I||(I={});for(var lt=-1,Et=g.length;++lt<Et;){var Ft=g[lt],Xt=z?z(I[Ft],p[Ft],Ft,I,p):i;Xt===i&&(Xt=p[Ft]),q?Ce(I,Ft,Xt):qt(I,Ft,Xt)}return I}function Qv(p,g){return Uu(p,Rd(p),g)}function Mf(p,g){return Uu(p,sy(p),g)}function Sd(p,g){return function(I,z){var q=Wn(I)?ss:ee,lt=g?g():{};return q(I,p,Yn(z,2),lt)}}function Ef(p){return Gi(function(g,I){var z=-1,q=I.length,lt=q>1?I[q-1]:i,Et=q>2?I[2]:i;for(lt=p.length>3&&typeof lt=="function"?(q--,lt):i,Et&&Qa(I[0],I[1],Et)&&(lt=q<3?i:lt,q=1),g=dn(g);++z<q;){var Ft=I[z];Ft&&p(g,Ft,z,lt)}return g})}function ig(p,g){return function(I,z){if(I==null)return I;if(!Xi(I))return p(I,z);for(var q=I.length,lt=g?q:-1,Et=dn(I);(g?lt--:++lt<q)&&z(Et[lt],lt,Et)!==!1;);return I}}function rg(p){return function(g,I,z){for(var q=-1,lt=dn(g),Et=z(g),Ft=Et.length;Ft--;){var Xt=Et[p?Ft:++q];if(I(lt[Xt],Xt,lt)===!1)break}return g}}function t1(p,g,I){var z=g&X,q=kp(p);function lt(){var Et=this&&this!==uo&&this instanceof lt?q:p;return Et.apply(z?I:this,arguments)}return lt}function Jv(p){return function(g){g=Sr(g);var I=cs(g)?xa(g):i,z=I?I[0]:g.charAt(0),q=I?Vu(I,1).join(""):g.slice(1);return z[p]()+q}}function su(p){return function(g){return bl(OA(Pg(g).replace(ar,"")),p,"")}}function kp(p){return function(){var g=arguments;switch(g.length){case 0:return new p;case 1:return new p(g[0]);case 2:return new p(g[0],g[1]);case 3:return new p(g[0],g[1],g[2]);case 4:return new p(g[0],g[1],g[2],g[3]);case 5:return new p(g[0],g[1],g[2],g[3],g[4]);case 6:return new p(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new p(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var I=Ya(p.prototype),z=p.apply(I,g);return Xr(z)?z:I}}function og(p,g,I){var z=kp(p);function q(){for(var lt=arguments.length,Et=Kt(lt),Ft=lt,Xt=Rh(q);Ft--;)Et[Ft]=arguments[Ft];var Ie=lt<3&&Et[0]!==Xt&&Et[lt-1]!==Xt?[]:Xo(Et,Xt);if(lt-=Ie.length,lt<I)return ny(p,g,Td,q.placeholder,i,Et,Ie,i,i,I-lt);var Ee=this&&this!==uo&&this instanceof q?z:p;return ho(Ee,this,Et)}return q}function Sf(p){return function(g,I,z){var q=dn(g);if(!Xi(g)){var lt=Yn(I,3);g=ua(g),I=function(Ft){return lt(q[Ft],Ft,q)}}var Et=p(g,I,z);return Et>-1?q[lt?g[Et]:Et]:i}}function zl(p){return Hu(function(g){var I=g.length,z=I,q=aa.prototype.thru;for(p&&g.reverse();z--;){var lt=g[z];if(typeof lt!="function")throw new io(o);if(q&&!Et&&Lp(lt)=="wrapper")var Et=new aa([],!0)}for(z=Et?z:I;++z<I;){lt=g[z];var Ft=Lp(lt),Xt=Ft=="wrapper"?Dh(lt):i;Xt&&cg(Xt[0])&&Xt[1]==(St|et|Nt|Gt)&&!Xt[4].length&&Xt[9]==1?Et=Et[Lp(Xt[0])].apply(Et,Xt[3]):Et=lt.length==1&&cg(lt)?Et[Ft]():Et.thru(lt)}return function(){var Ie=arguments,Ee=Ie[0];if(Et&&Ie.length==1&&Wn(Ee))return Et.plant(Ee).value();for(var ze=0,xn=I?g[ze].apply(this,Ie):Ee;++ze<I;)xn=g[ze].call(this,xn);return xn}})}function Td(p,g,I,z,q,lt,Et,Ft,Xt,Ie){var Ee=g&St,ze=g&X,xn=g&st,Gn=g&(et|xt),pi=g&Dt,Ki=xn?i:kp(p);function di(){for(var rr=arguments.length,dr=Kt(rr),cu=rr;cu--;)dr[cu]=arguments[cu];if(Gn)var ll=Rh(di),hu=Su(dr,ll);if(z&&(dr=Xv(dr,z,q,Gn)),lt&&(dr=Kv(dr,lt,Et,Gn)),rr-=hu,Gn&&rr<Ie){var ca=Xo(dr,ll);return ny(p,g,Td,di.placeholder,I,dr,ca,Ft,Xt,Ie-rr)}var Pc=ze?I:this,$h=xn?Pc[p]:p;return rr=dr.length,Ft?dr=hy(dr,Ft):pi&&rr>1&&dr.reverse(),Ee&&Xt<rr&&(dr.length=Xt),this&&this!==uo&&this instanceof di&&($h=Ki||kp($h)),$h.apply(Pc,dr)}return di}function ty(p,g){return function(I,z){return eh(I,p,g(z),{})}}function kd(p,g){return function(I,z){var q;if(I===i&&z===i)return g;if(I!==i&&(q=I),z!==i){if(q===i)return z;typeof I=="string"||typeof z=="string"?(I=ol(I),z=ol(z)):(I=wd(I),z=wd(z)),q=p(I,z)}return q}}function Lh(p){return Hu(function(g){return g=Vr(g,ra(Yn())),Gi(function(I){var z=this;return p(g,function(q){return ho(q,z,I)})})})}function Pp(p,g){g=g===i?" ":ol(g);var I=g.length;if(I<2)return I?Ep(g,p):g;var z=Ep(g,Ts(p/Jl(g)));return cs(g)?Vu(xa(z),0,p).join(""):z.slice(0,p)}function e1(p,g,I,z){var q=g&X,lt=kp(p);function Et(){for(var Ft=-1,Xt=arguments.length,Ie=-1,Ee=z.length,ze=Kt(Ee+Xt),xn=this&&this!==uo&&this instanceof Et?lt:p;++Ie<Ee;)ze[Ie]=z[Ie];for(;Xt--;)ze[Ie++]=arguments[++Ft];return ho(xn,q?I:this,ze)}return Et}function ey(p){return function(g,I,z){return z&&typeof z!="number"&&Qa(g,I,z)&&(I=z=i),g=Wu(g),I===i?(I=g,g=0):I=Wu(I),z=z===i?g<I?1:-1:Wu(z),$_(g,I,z,p)}}function Pd(p){return function(g,I){return typeof g=="string"&&typeof I=="string"||(g=es(g),I=es(I)),p(g,I)}}function ny(p,g,I,z,q,lt,Et,Ft,Xt,Ie){var Ee=g&et,ze=Ee?Et:i,xn=Ee?i:Et,Gn=Ee?lt:i,pi=Ee?i:lt;g|=Ee?Nt:It,g&=~(Ee?It:Nt),g&K||(g&=~(X|st));var Ki=[p,g,q,Gn,ze,pi,xn,Ft,Xt,Ie],di=I.apply(i,Ki);return cg(p)&&pg(di,Ki),di.placeholder=z,fy(di,p,g)}function Ld(p){var g=Mi[p];return function(I,z){if(I=es(I),z=z==null?0:$r(Si(z),292),z&&xf(I)){var q=(Sr(I)+"e").split("e"),lt=g(q[0]+"e"+(+q[1]+z));return q=(Sr(lt)+"e").split("e"),+(q[0]+"e"+(+q[1]-z))}return g(I)}}var ja=vn&&1/tl(new vn([,-0]))[1]==He?function(p){return new vn(p)}:V1;function iy(p){return function(g){var I=Ka(g);return I==At?Yc(g):I==De?mc(g):Zc(g,p(g))}}function ju(p,g,I,z,q,lt,Et,Ft){var Xt=g&st;if(!Xt&&typeof p!="function")throw new io(o);var Ie=z?z.length:0;if(Ie||(g&=~(Nt|It),z=q=i),Et=Et===i?Et:zn(Si(Et),0),Ft=Ft===i?Ft:Si(Ft),Ie-=q?q.length:0,g&It){var Ee=z,ze=q;z=q=i}var xn=Xt?i:Dh(p),Gn=[p,g,I,z,q,Ee,ze,lt,Et,Ft];if(xn&&Ia(Gn,xn),p=Gn[0],g=Gn[1],I=Gn[2],z=Gn[3],q=Gn[4],Ft=Gn[9]=Gn[9]===i?Xt?0:p.length:zn(Gn[9]-Ie,0),!Ft&&g&(et|xt)&&(g&=~(et|xt)),!g||g==X)var pi=t1(p,g,I);else g==et||g==xt?pi=og(p,g,Ft):(g==Nt||g==(X|Nt))&&!q.length?pi=e1(p,g,I,z):pi=Td.apply(i,Gn);var Ki=xn?Cf:pg;return fy(Ki(pi,Gn),p,g)}function ag(p,g,I,z){return p===i||cr(p,Lu[I])&&!Ln.call(z,I)?g:p}function ry(p,g,I,z,q,lt){return Xr(p)&&Xr(g)&&(lt.set(g,p),ou(p,g,i,ry,lt),lt.delete(g)),p}function oy(p){return Tc(p)?i:p}function ay(p,g,I,z,q,lt){var Et=I&G,Ft=p.length,Xt=g.length;if(Ft!=Xt&&!(Et&&Xt>Ft))return!1;var Ie=lt.get(p),Ee=lt.get(g);if(Ie&&Ee)return Ie==g&&Ee==p;var ze=-1,xn=!0,Gn=I&H?new w:i;for(lt.set(p,g),lt.set(g,p);++ze<Ft;){var pi=p[ze],Ki=g[ze];if(z)var di=Et?z(Ki,pi,ze,g,p,lt):z(pi,Ki,ze,p,g,lt);if(di!==i){if(di)continue;xn=!1;break}if(Gn){if(!Iu(g,function(rr,dr){if(!Eu(Gn,dr)&&(pi===rr||q(pi,rr,I,z,lt)))return Gn.push(dr)})){xn=!1;break}}else if(!(pi===Ki||q(pi,Ki,I,z,lt))){xn=!1;break}}return lt.delete(p),lt.delete(g),xn}function n1(p,g,I,z,q,lt,Et){switch(I){case Di:if(p.byteLength!=g.byteLength||p.byteOffset!=g.byteOffset)return!1;p=p.buffer,g=g.buffer;case Jn:return!(p.byteLength!=g.byteLength||!lt(new Aa(p),new Aa(g)));case Qe:case me:case Jt:return cr(+p,+g);case wi:return p.name==g.name&&p.message==g.message;case we:case Se:return p==g+"";case At:var Ft=Yc;case De:var Xt=z&G;if(Ft||(Ft=tl),p.size!=g.size&&!Xt)return!1;var Ie=Et.get(p);if(Ie)return Ie==g;z|=H,Et.set(p,g);var Ee=ay(Ft(p),Ft(g),z,q,lt,Et);return Et.delete(p),Ee;case en:if(Qc)return Qc.call(p)==Qc.call(g)}return!1}function i1(p,g,I,z,q,lt){var Et=I&G,Ft=sg(p),Xt=Ft.length,Ie=sg(g),Ee=Ie.length;if(Xt!=Ee&&!Et)return!1;for(var ze=Xt;ze--;){var xn=Ft[ze];if(!(Et?xn in g:Ln.call(g,xn)))return!1}var Gn=lt.get(p),pi=lt.get(g);if(Gn&&pi)return Gn==g&&pi==p;var Ki=!0;lt.set(p,g),lt.set(g,p);for(var di=Et;++ze<Xt;){xn=Ft[ze];var rr=p[xn],dr=g[xn];if(z)var cu=Et?z(dr,rr,xn,g,p,lt):z(rr,dr,xn,p,g,lt);if(!(cu===i?rr===dr||q(rr,dr,I,z,lt):cu)){Ki=!1;break}di||(di=xn=="constructor")}if(Ki&&!di){var ll=p.constructor,hu=g.constructor;ll!=hu&&"constructor"in p&&"constructor"in g&&!(typeof ll=="function"&&ll instanceof ll&&typeof hu=="function"&&hu instanceof hu)&&(Ki=!1)}return lt.delete(p),lt.delete(g),Ki}function Hu(p){return Dp(Ja(p,i,_y),p+"")}function sg(p){return Va(p,ua,Rd)}function lg(p){return Va(p,ta,sy)}var Dh=Vo?function(p){return Vo.get(p)}:V1;function Lp(p){for(var g=p.name+"",I=wa[g],z=Ln.call(wa,g)?I.length:0;z--;){var q=I[z],lt=q.func;if(lt==null||lt==p)return q.name}return g}function Rh(p){var g=Ln.call(rt,"placeholder")?rt:p;return g.placeholder}function Yn(){var p=rt.iteratee||F1;return p=p===F1?Ca:p,arguments.length?p(arguments[0],arguments[1]):p}function lr(p,g){var I=p.__data__;return u1(g)?I[typeof g=="string"?"string":"hash"]:I.map}function Dd(p){for(var g=ua(p),I=g.length;I--;){var z=g[I],q=p[z];g[I]=[z,q,kf(q)]}return g}function ds(p,g){var I=Js(p,g);return iu(I)?I:i}function Tf(p){var g=Ln.call(p,oo),I=p[oo];try{p[oo]=i;var z=!0}catch{}var q=Ss.call(p);return z&&(g?p[oo]=I:delete p[oo]),q}var Rd=gc?function(p){return p==null?[]:(p=dn(p),na(gc(p),function(g){return Re.call(p,g)}))}:U1,sy=gc?function(p){for(var g=[];p;)Ba(g,Rd(p)),p=Lo(p);return g}:U1,Ka=mr;(fs&&Ka(new fs(new ArrayBuffer(1)))!=Di||Do&&Ka(new Do)!=At||vc&&Ka(vc.resolve())!=Be||vn&&Ka(new vn)!=De||cn&&Ka(new cn)!=In)&&(Ka=function(p){var g=mr(p),I=g==pe?p.constructor:i,z=I?oh(I):"";if(z)switch(z){case Jo:return Di;case Tl:return At;case Ap:return Be;case bf:return De;case tr:return In}return g});function r1(p,g,I){for(var z=-1,q=I.length;++z<q;){var lt=I[z],Et=lt.size;switch(lt.type){case"drop":p+=Et;break;case"dropRight":g-=Et;break;case"take":g=$r(g,p+Et);break;case"takeRight":p=zn(p,g-Et);break}}return{start:p,end:g}}function o1(p){var g=p.match(ge);return g?g[1].split(be):[]}function ly(p,g,I){g=Ac(g,p);for(var z=-1,q=g.length,lt=!1;++z<q;){var Et=lu(g[z]);if(!(lt=p!=null&&I(p,Et)))break;p=p[Et]}return lt||++z!=q?lt:(q=p==null?0:p.length,!!q&&Nl(q)&&Bs(Et,q)&&(Wn(p)||ts(p)))}function a1(p){var g=p.length,I=new p.constructor(g);return g&&typeof p[0]=="string"&&Ln.call(p,"index")&&(I.index=p.index,I.input=p.input),I}function uy(p){return typeof p.constructor=="function"&&!wc(p)?Ya(Lo(p)):{}}function s1(p,g,I){var z=p.constructor;switch(g){case Jn:return Ph(p);case Qe:case me:return new z(+p);case Di:return Q_(p,I);case Ci:case or:case Gr:case Yo:case va:case Ra:case qa:case Ar:case So:return Md(p,I);case At:return new z;case Jt:case Se:return new z(p);case we:return ng(p);case De:return new z;case en:return J_(p)}}function l1(p,g){var I=g.length;if(!I)return p;var z=I-1;return g[z]=(I>1?"& ":"")+g[z],g=g.join(I>2?", ":" "),p.replace(Zt,`{
/* [wrapped with `+g+`] */
`)}function zd(p){return Wn(p)||ts(p)||!!(El&&p&&p[El])}function Bs(p,g){var I=typeof p;return g=g??Ue,!!g&&(I=="number"||I!="symbol"&&Ye.test(p))&&p>-1&&p%1==0&&p<g}function Qa(p,g,I){if(!Xr(I))return!1;var z=typeof g;return(z=="number"?Xi(I)&&Bs(g,I.length):z=="string"&&g in I)?cr(I[g],p):!1}function ug(p,g){if(Wn(p))return!1;var I=typeof p;return I=="number"||I=="symbol"||I=="boolean"||p==null||Sa(p)?!0:at.test(p)||!Q.test(p)||g!=null&&p in dn(g)}function u1(p){var g=typeof p;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?p!=="__proto__":p===null}function cg(p){var g=Lp(p),I=rt[g];if(typeof I!="function"||!(g in mi.prototype))return!1;if(p===I)return!0;var z=Dh(I);return!!z&&p===z[0]}function cy(p){return!!fr&&fr in p}var Od=Kc?Fl:j1;function wc(p){var g=p&&p.constructor,I=typeof g=="function"&&g.prototype||Lu;return p===I}function kf(p){return p===p&&!Xr(p)}function ms(p,g){return function(I){return I==null?!1:I[p]===g&&(g!==i||p in dn(I))}}function Pf(p){var g=zr(p,function(z){return I.size===M&&I.clear(),z}),I=g.cache;return g}function Ia(p,g){var I=p[1],z=g[1],q=I|z,lt=q<(X|st|St),Et=z==St&&I==et||z==St&&I==Gt&&p[7].length<=g[8]||z==(St|Gt)&&g[7].length<=g[8]&&I==et;if(!(lt||Et))return p;z&X&&(p[2]=g[2],q|=I&X?0:K);var Ft=g[3];if(Ft){var Xt=p[3];p[3]=Xt?Xv(Xt,Ft,g[4]):Ft,p[4]=Xt?Xo(p[3],T):g[4]}return Ft=g[5],Ft&&(Xt=p[5],p[5]=Xt?Kv(Xt,Ft,g[6]):Ft,p[6]=Xt?Xo(p[5],T):g[6]),Ft=g[7],Ft&&(p[7]=Ft),z&St&&(p[8]=p[8]==null?g[8]:$r(p[8],g[8])),p[9]==null&&(p[9]=g[9]),p[0]=g[0],p[1]=q,p}function Bd(p){var g=[];if(p!=null)for(var I in dn(p))g.push(I);return g}function Fd(p){return Ss.call(p)}function Ja(p,g,I){return g=zn(g===i?p.length-1:g,0),function(){for(var z=arguments,q=-1,lt=zn(z.length-g,0),Et=Kt(lt);++q<lt;)Et[q]=z[g+q];q=-1;for(var Ft=Kt(g+1);++q<g;)Ft[q]=z[q];return Ft[g]=I(Et),ho(p,this,Ft)}}function hg(p,g){return g.length<2?p:yr(p,Rl(g,0,-1))}function hy(p,g){for(var I=p.length,z=$r(g.length,I),q=Os(p);z--;){var lt=g[z];p[z]=Bs(lt,I)?q[lt]:i}return p}function fg(p,g){if(!(g==="constructor"&&typeof p[g]=="function")&&g!="__proto__")return p[g]}var pg=dg(Cf),zh=$a||function(p,g){return uo.setTimeout(p,g)},Dp=dg(Y_);function fy(p,g,I){var z=g+"";return Dp(p,l1(z,c1(o1(z),I)))}function dg(p){var g=0,I=0;return function(){var z=ks(),q=Bt-(z-I);if(I=z,q>0){if(++g>=Vt)return arguments[0]}else g=0;return p.apply(i,arguments)}}function Cc(p,g){var I=-1,z=p.length,q=z-1;for(g=g===i?z:g;++I<g;){var lt=Qm(I,q),Et=p[lt];p[lt]=p[I],p[I]=Et}return p.length=g,p}var Nd=Pf(function(p){var g=[];return p.charCodeAt(0)===46&&g.push(""),p.replace(dt,function(I,z,q,lt){g.push(q?lt.replace(ln,"$1"):z||I)}),g});function lu(p){if(typeof p=="string"||Sa(p))return p;var g=p+"";return g=="0"&&1/p==-He?"-0":g}function oh(p){if(p!=null){try{return $i.call(p)}catch{}try{return p+""}catch{}}return""}function c1(p,g){return Ao(Pi,function(I){var z="_."+I[0];g&I[1]&&!Cu(p,z)&&p.push(z)}),p.sort()}function mg(p){if(p instanceof mi)return p.clone();var g=new aa(p.__wrapped__,p.__chain__);return g.__actions__=Os(p.__actions__),g.__index__=p.__index__,g.__values__=p.__values__,g}function py(p,g,I){(I?Qa(p,g,I):g===i)?g=1:g=zn(Si(g),0);var z=p==null?0:p.length;if(!z||g<1)return[];for(var q=0,lt=0,Et=Kt(Ts(z/g));q<z;)Et[lt++]=Rl(p,q,q+=g);return Et}function dy(p){for(var g=-1,I=p==null?0:p.length,z=0,q=[];++g<I;){var lt=p[g];lt&&(q[z++]=lt)}return q}function my(){var p=arguments.length;if(!p)return[];for(var g=Kt(p-1),I=arguments[0],z=p;z--;)g[z-1]=arguments[z];return Ba(Wn(I)?Os(I):[I],mn(g,1))}var h1=Gi(function(p,g){return Er(p)?tn(p,mn(g,1,Er,!0)):[]}),f1=Gi(function(p,g){var I=Ol(g);return Er(I)&&(I=i),Er(p)?tn(p,mn(g,1,Er,!0),Yn(I,2)):[]}),gy=Gi(function(p,g){var I=Ol(g);return Er(I)&&(I=i),Er(p)?tn(p,mn(g,1,Er,!0),i,I):[]});function vy(p,g,I){var z=p==null?0:p.length;return z?(g=I||g===i?1:Si(g),Rl(p,g<0?0:g,z)):[]}function Vd(p,g,I){var z=p==null?0:p.length;return z?(g=I||g===i?1:Si(g),g=z-g,Rl(p,0,g<0?0:g)):[]}function yy(p,g){return p&&p.length?Th(p,Yn(g,3),!0,!0):[]}function Ud(p,g){return p&&p.length?Th(p,Yn(g,3),!0):[]}function jd(p,g,I,z){var q=p==null?0:p.length;return q?(I&&typeof I!="number"&&Qa(p,g,I)&&(I=0,z=q),ni(p,g,I,z)):[]}function Rp(p,g,I){var z=p==null?0:p.length;if(!z)return-1;var q=I==null?0:Si(I);return q<0&&(q=zn(z+q,0)),fc(p,Yn(g,3),q)}function Oh(p,g,I){var z=p==null?0:p.length;if(!z)return-1;var q=z-1;return I!==i&&(q=Si(I),q=I<0?zn(z+q,0):$r(q,z-1)),fc(p,Yn(g,3),q,!0)}function _y(p){var g=p==null?0:p.length;return g?mn(p,1):[]}function p1(p){var g=p==null?0:p.length;return g?mn(p,He):[]}function d1(p,g){var I=p==null?0:p.length;return I?(g=g===i?1:Si(g),mn(p,g)):[]}function Lf(p){for(var g=-1,I=p==null?0:p.length,z={};++g<I;){var q=p[g];z[q[0]]=q[1]}return z}function Hd(p){return p&&p.length?p[0]:i}function xy(p,g,I){var z=p==null?0:p.length;if(!z)return-1;var q=I==null?0:Si(I);return q<0&&(q=zn(z+q,0)),Kl(p,g,q)}function gg(p){var g=p==null?0:p.length;return g?Rl(p,0,-1):[]}var by=Gi(function(p){var g=Vr(p,kh);return g.length&&g[0]===p[0]?_c(g):[]}),Ay=Gi(function(p){var g=Ol(p),I=Vr(p,kh);return g===Ol(I)?g=i:I.pop(),I.length&&I[0]===p[0]?_c(I,Yn(g,2)):[]}),m1=Gi(function(p){var g=Ol(p),I=Vr(p,kh);return g=typeof g=="function"?g:i,g&&I.pop(),I.length&&I[0]===p[0]?_c(I,i,g):[]});function g1(p,g){return p==null?"":nl.call(p,g)}function Ol(p){var g=p==null?0:p.length;return g?p[g-1]:i}function Gd(p,g,I){var z=p==null?0:p.length;if(!z)return-1;var q=z;return I!==i&&(q=Si(I),q=q<0?zn(z+q,0):$r(q,z-1)),g===g?Ml(p,g,q):fc(p,Ks,q,!0)}function vg(p,g){return p&&p.length?xd(p,Si(g)):i}var v1=Gi(Bh);function Bh(p,g){return p&&p.length&&g&&g.length?Km(p,g):p}function zp(p,g,I){return p&&p.length&&g&&g.length?Km(p,g,Yn(I,2)):p}function ur(p,g,I){return p&&p.length&&g&&g.length?Km(p,g,i,I):p}var y1=Hu(function(p,g){var I=p==null?0:p.length,z=Pe(p,g);return Wv(p,Vr(g,function(q){return Bs(q,I)?+q:q}).sort(Ed)),z});function yg(p,g){var I=[];if(!(p&&p.length))return I;var z=-1,q=[],lt=p.length;for(g=Yn(g,3);++z<lt;){var Et=p[z];g(Et,z,p)&&(I.push(Et),q.push(z))}return Wv(p,q),I}function ah(p){return p==null?p:Ru.call(p)}function _1(p,g,I){var z=p==null?0:p.length;return z?(I&&typeof I!="number"&&Qa(p,g,I)?(g=0,I=z):(g=g==null?0:Si(g),I=I===i?z:Si(I)),Rl(p,g,I)):[]}function x1(p,g){return Ad(p,g)}function b1(p,g,I){return Jm(p,g,Yn(I,2))}function A1(p,g){var I=p==null?0:p.length;if(I){var z=Ad(p,g);if(z<I&&cr(p[z],g))return z}return-1}function w1(p,g){return Ad(p,g,!0)}function C1(p,g,I){return Jm(p,g,Yn(I,2),!0)}function I1(p,g){var I=p==null?0:p.length;if(I){var z=Ad(p,g,!0)-1;if(cr(p[z],g))return z}return-1}function wy(p){return p&&p.length?$v(p):[]}function Cy(p,g){return p&&p.length?$v(p,Yn(g,2)):[]}function Iy(p){var g=p==null?0:p.length;return g?Rl(p,1,g):[]}function My(p,g,I){return p&&p.length?(g=I||g===i?1:Si(g),Rl(p,0,g<0?0:g)):[]}function qd(p,g,I){var z=p==null?0:p.length;return z?(g=I||g===i?1:Si(g),g=z-g,Rl(p,g<0?0:g,z)):[]}function Fh(p,g){return p&&p.length?Th(p,Yn(g,3),!1,!0):[]}function _g(p,g){return p&&p.length?Th(p,Yn(g,3)):[]}var Df=Gi(function(p){return al(mn(p,1,Er,!0))}),Ey=Gi(function(p){var g=Ol(p);return Er(g)&&(g=i),al(mn(p,1,Er,!0),Yn(g,2))}),Co=Gi(function(p){var g=Ol(p);return g=typeof g=="function"?g:i,al(mn(p,1,Er,!0),i,g)});function Dr(p){return p&&p.length?al(p):[]}function Sy(p,g){return p&&p.length?al(p,Yn(g,2)):[]}function Ty(p,g){return g=typeof g=="function"?g:i,p&&p.length?al(p,i,g):[]}function Wd(p){if(!(p&&p.length))return[];var g=0;return p=na(p,function(I){if(Er(I))return g=zn(I.length,g),!0}),Mu(g,function(I){return Vr(p,ia(I))})}function xg(p,g){if(!(p&&p.length))return[];var I=Wd(p);return g==null?I:Vr(I,function(z){return ho(g,i,z)})}var ky=Gi(function(p,g){return Er(p)?tn(p,g):[]}),bg=Gi(function(p){return If(na(p,Er))}),Nh=Gi(function(p){var g=Ol(p);return Er(g)&&(g=i),If(na(p,Er),Yn(g,2))}),Vh=Gi(function(p){var g=Ol(p);return g=typeof g=="function"?g:i,If(na(p,Er),i,g)}),Py=Gi(Wd);function Io(p,g){return Sp(p||[],g||[],qt)}function Op(p,g){return Sp(p||[],g||[],Dl)}var Ic=Gi(function(p){var g=p.length,I=g>1?p[g-1]:i;return I=typeof I=="function"?(p.pop(),I):i,xg(p,I)});function Bp(p){var g=rt(p);return g.__chain__=!0,g}function Zd(p,g){return g(p),p}function Rf(p,g){return g(p)}var zf=Hu(function(p){var g=p.length,I=g?p[0]:0,z=this.__wrapped__,q=function(lt){return Pe(lt,p)};return g>1||this.__actions__.length||!(z instanceof mi)||!Bs(I)?this.thru(q):(z=z.slice(I,+I+(g?1:0)),z.__actions__.push({func:Rf,args:[q],thisArg:i}),new aa(z,this.__chain__).thru(function(lt){return g&&!lt.length&&lt.push(i),lt}))});function Mc(){return Bp(this)}function Ly(){return new aa(this.value(),this.__chain__)}function Dy(){this.__values__===i&&(this.__values__=Jd(this.value()));var p=this.__index__>=this.__values__.length,g=p?i:this.__values__[this.__index__++];return{done:p,value:g}}function M1(){return this}function Uo(p){for(var g,I=this;I instanceof oa;){var z=mg(I);z.__index__=0,z.__values__=i,g?q.__wrapped__=z:g=z;var q=z;I=I.__wrapped__}return q.__wrapped__=p,g}function sh(){var p=this.__wrapped__;if(p instanceof mi){var g=p;return this.__actions__.length&&(g=new mi(this)),g=g.reverse(),g.__actions__.push({func:Rf,args:[ah],thisArg:i}),new aa(g,this.__chain__)}return this.thru(ah)}function Ry(){return eg(this.__wrapped__,this.__actions__)}var n=Sd(function(p,g,I){Ln.call(p,I)?++p[I]:Ce(p,I,1)});function r(p,g,I){var z=Wn(p)?Xs:Hn;return I&&Qa(p,g,I)&&(g=i),z(p,Yn(g,3))}function s(p,g){var I=Wn(p)?na:Nn;return I(p,Yn(g,3))}var d=Sf(Rp),v=Sf(Oh);function x(p,g){return mn(ct(p,g),1)}function A(p,g){return mn(ct(p,g),He)}function S(p,g,I){return I=I===i?1:Si(I),mn(ct(p,g),I)}function D(p,g){var I=Wn(p)?Ao:Dn;return I(p,Yn(g,3))}function B(p,g){var I=Wn(p)?xl:ei;return I(p,Yn(g,3))}var N=Sd(function(p,g,I){Ln.call(p,I)?p[I].push(g):Ce(p,I,[g])});function V(p,g,I,z){p=Xi(p)?p:Zh(p),I=I&&!z?Si(I):0;var q=p.length;return I<0&&(I=zn(q+I,0)),Gh(p)?I<=q&&p.indexOf(g,I)>-1:!!q&&Kl(p,g,I)>-1}var Z=Gi(function(p,g,I){var z=-1,q=typeof g=="function",lt=Xi(p)?Kt(p.length):[];return Dn(p,function(Et){lt[++z]=q?ho(g,Et,I):zs(Et,g,I)}),lt}),J=Sd(function(p,g,I){Ce(p,I,g)});function ct(p,g){var I=Wn(p)?Vr:_d;return I(p,Yn(g,3))}function pt(p,g,I,z){return p==null?[]:(Wn(g)||(g=g==null?[]:[g]),I=z?i:I,Wn(I)||(I=I==null?[]:[I]),rh(p,g,I))}var Mt=Sd(function(p,g,I){p[I?0:1].push(g)},function(){return[[],[]]});function bt(p,g,I){var z=Wn(p)?bl:Qs,q=arguments.length<3;return z(p,Yn(g,4),I,q,Dn)}function Ut(p,g,I){var z=Wn(p)?qc:Qs,q=arguments.length<3;return z(p,Yn(g,4),I,q,ei)}function $t(p,g){var I=Wn(p)?na:Nn;return I(p,Ir(Yn(g,3)))}function te(p){var g=Wn(p)?wt:bd;return g(p)}function ne(p,g,I){(I?Qa(p,g,I):g===i)?g=1:g=Si(g);var z=Wn(p)?ht:Zv;return z(p,g)}function fe(p){var g=Wn(p)?Ct:X_;return g(p)}function Me(p){if(p==null)return 0;if(Xi(p))return Gh(p)?Jl(p):p.length;var g=Ka(p);return g==At||g==De?p.size:ru(p).length}function Fe(p,g,I){var z=Wn(p)?Iu:K_;return I&&Qa(p,g,I)&&(g=i),z(p,Yn(g,3))}var _n=Gi(function(p,g){if(p==null)return[];var I=g.length;return I>1&&Qa(p,g[0],g[1])?g=[]:I>2&&Qa(g[0],g[1],g[2])&&(g=[g[0]]),rh(p,mn(g,1),[])}),Ze=_f||function(){return uo.Date.now()};function Mn(p,g){if(typeof g!="function")throw new io(o);return p=Si(p),function(){if(--p<1)return g.apply(this,arguments)}}function Je(p,g,I){return g=I?i:g,g=p&&g==null?p.length:g,ju(p,St,i,i,i,i,g)}function ri(p,g){var I;if(typeof g!="function")throw new io(o);return p=Si(p),function(){return--p>0&&(I=g.apply(this,arguments)),p<=1&&(g=i),I}}var On=Gi(function(p,g,I){var z=X;if(I.length){var q=Xo(I,Rh(On));z|=Nt}return ju(p,z,g,I,q)}),fn=Gi(function(p,g,I){var z=X|st;if(I.length){var q=Xo(I,Rh(fn));z|=Nt}return ju(g,z,p,I,q)});function fi(p,g,I){g=I?i:g;var z=ju(p,et,i,i,i,i,i,g);return z.placeholder=fi.placeholder,z}function Xn(p,g,I){g=I?i:g;var z=ju(p,xt,i,i,i,i,i,g);return z.placeholder=Xn.placeholder,z}function Ei(p,g,I){var z,q,lt,Et,Ft,Xt,Ie=0,Ee=!1,ze=!1,xn=!0;if(typeof p!="function")throw new io(o);g=es(g)||0,Xr(I)&&(Ee=!!I.leading,ze="maxWait"in I,lt=ze?zn(es(I.maxWait)||0,g):lt,xn="trailing"in I?!!I.trailing:xn);function Gn(ca){var Pc=z,$h=q;return z=q=i,Ie=ca,Et=p.apply($h,Pc),Et}function pi(ca){return Ie=ca,Ft=zh(rr,g),Ee?Gn(ca):Et}function Ki(ca){var Pc=ca-Xt,$h=ca-Ie,NA=g-Pc;return ze?$r(NA,lt-$h):NA}function di(ca){var Pc=ca-Xt,$h=ca-Ie;return Xt===i||Pc>=g||Pc<0||ze&&$h>=lt}function rr(){var ca=Ze();if(di(ca))return dr(ca);Ft=zh(rr,Ki(ca))}function dr(ca){return Ft=i,xn&&z?Gn(ca):(z=q=i,Et)}function cu(){Ft!==i&&Id(Ft),Ie=0,z=Xt=q=Ft=i}function ll(){return Ft===i?Et:dr(Ze())}function hu(){var ca=Ze(),Pc=di(ca);if(z=arguments,q=this,Xt=ca,Pc){if(Ft===i)return pi(Xt);if(ze)return Id(Ft),Ft=zh(rr,g),Gn(Xt)}return Ft===i&&(Ft=zh(rr,g)),Et}return hu.cancel=cu,hu.flush=ll,hu}var Sn=Gi(function(p,g){return Oi(p,1,g)}),qi=Gi(function(p,g,I){return Oi(p,es(g)||0,I)});function Rr(p){return ju(p,Dt)}function zr(p,g){if(typeof p!="function"||g!=null&&typeof g!="function")throw new io(o);var I=function(){var z=arguments,q=g?g.apply(this,z):z[0],lt=I.cache;if(lt.has(q))return lt.get(q);var Et=p.apply(this,z);return I.cache=lt.set(q,Et)||lt,Et};return I.cache=new(zr.Cache||Ds),I}zr.Cache=Ds;function Ir(p){if(typeof p!="function")throw new io(o);return function(){var g=arguments;switch(g.length){case 0:return!p.call(this);case 1:return!p.call(this,g[0]);case 2:return!p.call(this,g[0],g[1]);case 3:return!p.call(this,g[0],g[1],g[2])}return!p.apply(this,g)}}function Or(p){return ri(2,p)}var to=Tp(function(p,g){g=g.length==1&&Wn(g[0])?Vr(g[0],ra(Yn())):Vr(mn(g,1),ra(Yn()));var I=g.length;return Gi(function(z){for(var q=-1,lt=$r(z.length,I);++q<lt;)z[q]=g[q].call(this,z[q]);return ho(p,this,z)})}),vo=Gi(function(p,g){var I=Xo(g,Rh(vo));return ju(p,Nt,i,g,I)}),Mo=Gi(function(p,g){var I=Xo(g,Rh(Mo));return ju(p,It,i,g,I)}),Ma=Hu(function(p,g){return ju(p,Gt,i,i,i,g)});function jo(p,g){if(typeof p!="function")throw new io(o);return g=g===i?g:Si(g),Gi(p,g)}function Ea(p,g){if(typeof p!="function")throw new io(o);return g=g==null?0:zn(Si(g),0),Gi(function(I){var z=I[g],q=Vu(I,0,g);return z&&Ba(q,z),ho(p,this,q)})}function ao(p,g,I){var z=!0,q=!0;if(typeof p!="function")throw new io(o);return Xr(I)&&(z="leading"in I?!!I.leading:z,q="trailing"in I?!!I.trailing:q),Ei(p,g,{leading:z,maxWait:g,trailing:q})}function Ho(p){return Je(p,1)}function bi(p,g){return vo(Cd(g),p)}function pr(){if(!arguments.length)return[];var p=arguments[0];return Wn(p)?p:[p]}function ir(p){return hn(p,O)}function Ni(p,g){return g=typeof g=="function"?g:i,hn(p,O,g)}function Ha(p){return hn(p,k|O)}function sa(p,g){return g=typeof g=="function"?g:i,hn(p,k|O,g)}function Mr(p,g){return g==null||En(p,g,ua(g))}function cr(p,g){return p===g||p!==p&&g!==g}var la=Pd(kl),Wi=Pd(function(p,g){return p>=g}),ts=xc(function(){return arguments}())?xc:function(p){return Kr(p)&&Ln.call(p,"callee")&&!Re.call(p,"callee")},Wn=Kt.isArray,Gu=hc?ra(hc):Sh;function Xi(p){return p!=null&&Nl(p.length)&&!Fl(p)}function Er(p){return Kr(p)&&Xi(p)}function Bl(p){return p===!0||p===!1||Kr(p)&&mr(p)==Qe}var sl=bp||j1,Uh=co?ra(co):Pl;function Of(p){return Kr(p)&&p.nodeType===1&&!Tc(p)}function Ec(p){if(p==null)return!0;if(Xi(p)&&(Wn(p)||typeof p=="string"||typeof p.splice=="function"||sl(p)||qu(p)||ts(p)))return!p.length;var g=Ka(p);if(g==At||g==De)return!p.size;if(wc(p))return!ru(p).length;for(var I in p)if(Ln.call(p,I))return!1;return!0}function Bf(p,g){return nu(p,g)}function $d(p,g,I){I=typeof I=="function"?I:i;var z=I?I(p,g):i;return z===i?nu(p,g,i,I):!!z}function lh(p){if(!Kr(p))return!1;var g=mr(p);return g==wi||g==Te||typeof p.message=="string"&&typeof p.name=="string"&&!Tc(p)}function Fp(p){return typeof p=="number"&&xf(p)}function Fl(p){if(!Xr(p))return!1;var g=mr(p);return g==Li||g==ut||g==ue||g==un}function Np(p){return typeof p=="number"&&p==Si(p)}function Nl(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=Ue}function Xr(p){var g=typeof p;return p!=null&&(g=="object"||g=="function")}function Kr(p){return p!=null&&typeof p=="object"}var Sc=Oa?ra(Oa):Ro;function Ff(p,g){return p===g||rl(p,g,Dd(g))}function Yd(p,g,I){return I=typeof I=="function"?I:i,rl(p,g,Dd(g),I)}function Xd(p){return Nf(p)&&p!=+p}function Vp(p){if(Od(p))throw new Un(f);return iu(p)}function Up(p){return p===null}function Kd(p){return p==null}function Nf(p){return typeof p=="number"||Kr(p)&&mr(p)==Jt}function Tc(p){if(!Kr(p)||mr(p)!=pe)return!1;var g=Lo(p);if(g===null)return!0;var I=Ln.call(g,"constructor")&&g.constructor;return typeof I=="function"&&I instanceof I&&$i.call(I)==Na}var jh=Is?ra(Is):bc;function Qd(p){return Np(p)&&p>=-Ue&&p<=Ue}var Hh=Ms?ra(Ms):Yi;function Gh(p){return typeof p=="string"||!Wn(p)&&Kr(p)&&mr(p)==Se}function Sa(p){return typeof p=="symbol"||Kr(p)&&mr(p)==en}var qu=_l?ra(_l):ps;function qh(p){return p===i}function jp(p){return Kr(p)&&Ka(p)==In}function Vf(p){return Kr(p)&&mr(p)==Pn}var Ag=Pd(nh),zy=Pd(function(p,g){return p<=g});function Jd(p){if(!p)return[];if(Xi(p))return Gh(p)?xa(p):Os(p);if(Sl&&p[Sl])return Ch(p[Sl]());var g=Ka(p),I=g==At?Yc:g==De?tl:Zh;return I(p)}function Wu(p){if(!p)return p===0?p:0;if(p=es(p),p===He||p===-He){var g=p<0?-1:1;return g*ki}return p===p?p:0}function Si(p){var g=Wu(p),I=g%1;return g===g?I?g-I:g:0}function Oy(p){return p?We(Si(p),0,Vn):0}function es(p){if(typeof p=="number")return p;if(Sa(p))return oi;if(Xr(p)){var g=typeof p.valueOf=="function"?p.valueOf():p;p=Xr(g)?g+"":g}if(typeof p!="string")return p===0?p:+p;p=us(p);var I=Ve.test(p);return I||ii.test(p)?bh(p.slice(2),I?2:8):Le.test(p)?oi:+p}function eo(p){return Uu(p,ta(p))}function uu(p){return p?We(Si(p),-Ue,Ue):p===0?p:0}function Sr(p){return p==null?"":ol(p)}var uh=Ef(function(p,g){if(wc(g)||Xi(g)){Uu(g,ua(g),p);return}for(var I in g)Ln.call(g,I)&&qt(p,I,g[I])}),tm=Ef(function(p,g){Uu(g,ta(g),p)}),Hp=Ef(function(p,g,I,z){Uu(g,ta(g),p,z)}),em=Ef(function(p,g,I,z){Uu(g,ua(g),p,z)}),Zu=Hu(Pe);function nm(p,g){var I=Ya(p);return g==null?I:oe(I,g)}var Gp=Gi(function(p,g){p=dn(p);var I=-1,z=g.length,q=z>2?g[2]:i;for(q&&Qa(g[0],g[1],q)&&(z=1);++I<z;)for(var lt=g[I],Et=ta(lt),Ft=-1,Xt=Et.length;++Ft<Xt;){var Ie=Et[Ft],Ee=p[Ie];(Ee===i||cr(Ee,Lu[Ie])&&!Ln.call(p,Ie))&&(p[Ie]=lt[Ie])}return p}),im=Gi(function(p){return p.push(i,ry),ho(Wh,i,p)});function rm(p,g){return wl(p,Yn(g,3),Ur)}function wg(p,g){return wl(p,Yn(g,3),wo)}function By(p,g){return p==null?p:mo(p,Yn(g,3),ta)}function qp(p,g){return p==null?p:Yr(p,Yn(g,3),ta)}function Fy(p,g){return p&&Ur(p,Yn(g,3))}function Ny(p,g){return p&&wo(p,Yn(g,3))}function Vy(p){return p==null?[]:Cr(p,ua(p))}function Uy(p){return p==null?[]:Cr(p,ta(p))}function om(p,g,I){var z=p==null?i:yr(p,g);return z===i?I:z}function Fs(p,g){return p!=null&&ly(p,g,Ua)}function Uf(p,g){return p!=null&&ly(p,g,il)}var jy=ty(function(p,g,I){g!=null&&typeof g.toString!="function"&&(g=Ss.call(g)),p[g]=I},B1(Vl)),$u=ty(function(p,g,I){g!=null&&typeof g.toString!="function"&&(g=Ss.call(g)),Ln.call(p,g)?p[g].push(I):p[g]=[I]},Yn),E1=Gi(zs);function ua(p){return Xi(p)?ft(p):ru(p)}function ta(p){return Xi(p)?ft(p,!0):Xm(p)}function jf(p,g){var I={};return g=Yn(g,3),Ur(p,function(z,q,lt){Ce(I,g(z,q,lt),z)}),I}function Hf(p,g){var I={};return g=Yn(g,3),Ur(p,function(z,q,lt){Ce(I,q,g(z,q,lt))}),I}var Gf=Ef(function(p,g,I){ou(p,g,I)}),Wh=Ef(function(p,g,I,z){ou(p,g,I,z)}),Hy=Hu(function(p,g){var I={};if(p==null)return I;var z=!1;g=Vr(g,function(lt){return lt=Ac(lt,p),z||(z=lt.length>1),lt}),Uu(p,lg(p),I),z&&(I=hn(I,k|P|O,oy));for(var q=g.length;q--;)tg(I,g[q]);return I});function Gy(p,g){return Cg(p,Ir(Yn(g)))}var qy=Hu(function(p,g){return p==null?{}:Xa(p,g)});function Cg(p,g){if(p==null)return{};var I=Vr(lg(p),function(z){return[z]});return g=Yn(g),Gv(p,I,function(z,q){return g(z,q[0])})}function Ig(p,g,I){g=Ac(g,p);var z=-1,q=g.length;for(q||(q=1,p=i);++z<q;){var lt=p==null?i:p[lu(g[z])];lt===i&&(z=q,lt=I),p=Fl(lt)?lt.call(p):lt}return p}function Mg(p,g,I){return p==null?p:Dl(p,g,I)}function kc(p,g,I,z){return z=typeof z=="function"?z:i,p==null?p:Dl(p,g,I,z)}var Eg=iy(ua),am=iy(ta);function Sg(p,g,I){var z=Wn(p),q=z||sl(p)||qu(p);if(g=Yn(g,4),I==null){var lt=p&&p.constructor;q?I=z?new lt:[]:Xr(p)?I=Fl(lt)?Ya(Lo(p)):{}:I={}}return(q?Ao:Ur)(p,function(Et,Ft,Xt){return g(I,Et,Ft,Xt)}),I}function Wy(p,g){return p==null?!0:tg(p,g)}function Tg(p,g,I){return p==null?p:go(p,g,Cd(I))}function Zy(p,g,I,z){return z=typeof z=="function"?z:i,p==null?p:go(p,g,Cd(I),z)}function Zh(p){return p==null?[]:$c(p,ua(p))}function kg(p){return p==null?[]:$c(p,ta(p))}function $y(p,g,I){return I===i&&(I=g,g=i),I!==i&&(I=es(I),I=I===I?I:0),g!==i&&(g=es(g),g=g===g?g:0),We(es(p),g,I)}function Wp(p,g,I){return g=Wu(g),I===i?(I=g,g=0):I=Wu(I),p=es(p),Rs(p,g,I)}function Yy(p,g,I){if(I&&typeof I!="boolean"&&Qa(p,g,I)&&(g=I=i),I===i&&(typeof g=="boolean"?(I=g,g=i):typeof p=="boolean"&&(I=p,p=i)),p===i&&g===i?(p=0,g=1):(p=Wu(p),g===i?(g=p,p=0):g=Wu(g)),p>g){var z=p;p=g,g=z}if(I||p%1||g%1){var q=Du();return $r(p+q*(g-p+gf("1e-"+((q+"").length-1))),g)}return Qm(p,g)}var sm=su(function(p,g,I){return g=g.toLowerCase(),p+(I?Xy(g):g)});function Xy(p){return O1(Sr(p).toLowerCase())}function Pg(p){return p=Sr(p),p&&p.replace(xi,Ql).replace(no,"")}function S1(p,g,I){p=Sr(p),g=ol(g);var z=p.length;I=I===i?z:We(Si(I),0,z);var q=I;return I-=g.length,I>=0&&p.slice(I,q)==g}function T1(p){return p=Sr(p),p&&bu.test(p)?p.replace(lo,Es):p}function k1(p){return p=Sr(p),p&&Rt.test(p)?p.replace(Tt,"\\$&"):p}var P1=su(function(p,g,I){return p+(I?"-":"")+g.toLowerCase()}),L1=su(function(p,g,I){return p+(I?" ":"")+g.toLowerCase()}),D1=Jv("toLowerCase");function R1(p,g,I){p=Sr(p),g=Si(g);var z=g?Jl(p):0;if(!g||z>=g)return p;var q=(g-z)/2;return Pp(Ih(q),I)+p+Pp(Ts(q),I)}function z1(p,g,I){p=Sr(p),g=Si(g);var z=g?Jl(p):0;return g&&z<g?p+Pp(g-z,I):p}function Yu(p,g,I){p=Sr(p),g=Si(g);var z=g?Jl(p):0;return g&&z<g?Pp(g-z,I)+p:p}function lm(p,g,I){return I||g==null?g=0:g&&(g=+g),Qo(Sr(p).replace(tt,""),g||0)}function Ky(p,g,I){return(I?Qa(p,g,I):g===i)?g=1:g=Si(g),Ep(Sr(p),g)}function Zp(){var p=arguments,g=Sr(p[0]);return p.length<3?g:g.replace(p[1],p[2])}var Qy=su(function(p,g,I){return p+(I?"_":"")+g.toLowerCase()});function wE(p,g,I){return I&&typeof I!="number"&&Qa(p,g,I)&&(g=I=i),I=I===i?Vn:I>>>0,I?(p=Sr(p),p&&(typeof g=="string"||g!=null&&!jh(g))&&(g=ol(g),!g&&cs(p))?Vu(xa(p),0,I):p.split(g,I)):[]}var CE=su(function(p,g,I){return p+(I?" ":"")+O1(g)});function IE(p,g,I){return p=Sr(p),I=I==null?0:We(Si(I),0,p.length),g=ol(g),p.slice(I,I+g.length)==g}function ME(p,g,I){var z=rt.templateSettings;I&&Qa(p,g,I)&&(g=i),p=Sr(p),g=Hp({},g,z,ag);var q=Hp({},g.imports,z.imports,ag),lt=ua(q),Et=$c(q,lt),Ft,Xt,Ie=0,Ee=g.interpolate||Ui,ze="__p += '",xn=Hi((g.escape||Ui).source+"|"+Ee.source+"|"+(Ee===W?an:Ui).source+"|"+(g.evaluate||Ui).source+"|$","g"),Gn="//# sourceURL="+(Ln.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yl+"]")+`
`;p.replace(xn,function(di,rr,dr,cu,ll,hu){return dr||(dr=cu),ze+=p.slice(Ie,hu).replace(hi,Tu),rr&&(Ft=!0,ze+=`' +
__e(`+rr+`) +
'`),ll&&(Xt=!0,ze+=`';
`+ll+`;
__p += '`),dr&&(ze+=`' +
((__t = (`+dr+`)) == null ? '' : __t) +
'`),Ie=hu+di.length,di}),ze+=`';
`;var pi=Ln.call(g,"variable")&&g.variable;if(!pi)ze=`with (obj) {
`+ze+`
}
`;else if(ye.test(pi))throw new Un(y);ze=(Xt?ze.replace(qs,""):ze).replace(Ws,"$1").replace(gl,"$1;"),ze="function("+(pi||"obj")+`) {
`+(pi?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ft?", __e = _.escape":"")+(Xt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ze+`return __p
}`;var Ki=BA(function(){return li(lt,Gn+"return "+ze).apply(i,Et)});if(Ki.source=ze,lh(Ki))throw Ki;return Ki}function EE(p){return Sr(p).toLowerCase()}function SE(p){return Sr(p).toUpperCase()}function TE(p,g,I){if(p=Sr(p),p&&(I||g===i))return us(p);if(!p||!(g=ol(g)))return p;var z=xa(p),q=xa(g),lt=dc(z,q),Et=Il(z,q)+1;return Vu(z,lt,Et).join("")}function kE(p,g,I){if(p=Sr(p),p&&(I||g===i))return p.slice(0,Wt(p)+1);if(!p||!(g=ol(g)))return p;var z=xa(p),q=Il(z,xa(g))+1;return Vu(z,0,q).join("")}function PE(p,g,I){if(p=Sr(p),p&&(I||g===i))return p.replace(tt,"");if(!p||!(g=ol(g)))return p;var z=xa(p),q=dc(z,xa(g));return Vu(z,q).join("")}function LE(p,g){var I=Qt,z=jt;if(Xr(g)){var q="separator"in g?g.separator:q;I="length"in g?Si(g.length):I,z="omission"in g?ol(g.omission):z}p=Sr(p);var lt=p.length;if(cs(p)){var Et=xa(p);lt=Et.length}if(I>=lt)return p;var Ft=I-Jl(z);if(Ft<1)return z;var Xt=Et?Vu(Et,0,Ft).join(""):p.slice(0,Ft);if(q===i)return Xt+z;if(Et&&(Ft+=Xt.length-Ft),jh(q)){if(p.slice(Ft).search(q)){var Ie,Ee=Xt;for(q.global||(q=Hi(q.source,Sr(ae.exec(q))+"g")),q.lastIndex=0;Ie=q.exec(Ee);)var ze=Ie.index;Xt=Xt.slice(0,ze===i?Ft:ze)}}else if(p.indexOf(ol(q),Ft)!=Ft){var xn=Xt.lastIndexOf(q);xn>-1&&(Xt=Xt.slice(0,xn))}return Xt+z}function DE(p){return p=Sr(p),p&&Zs.test(p)?p.replace(za,ce):p}var RE=su(function(p,g,I){return p+(I?" ":"")+g.toUpperCase()}),O1=Jv("toUpperCase");function OA(p,g,I){return p=Sr(p),g=I?i:g,g===i?No(p)?vr(p):Al(p):p.match(g)||[]}var BA=Gi(function(p,g){try{return ho(p,i,g)}catch(I){return lh(I)?I:new Un(I)}}),zE=Hu(function(p,g){return Ao(g,function(I){I=lu(I),Ce(p,I,On(p[I],p))}),p});function OE(p){var g=p==null?0:p.length,I=Yn();return p=g?Vr(p,function(z){if(typeof z[1]!="function")throw new io(o);return[I(z[0]),z[1]]}):[],Gi(function(z){for(var q=-1;++q<g;){var lt=p[q];if(ho(lt[0],this,z))return ho(lt[1],this,z)}})}function BE(p){return Tn(hn(p,k))}function B1(p){return function(){return p}}function FE(p,g){return p==null||p!==p?g:p}var NE=zl(),VE=zl(!0);function Vl(p){return p}function F1(p){return Ca(typeof p=="function"?p:hn(p,k))}function UE(p){return ih(hn(p,k))}function jE(p,g){return Mp(p,hn(g,k))}var HE=Gi(function(p,g){return function(I){return zs(I,p,g)}}),GE=Gi(function(p,g){return function(I){return zs(p,I,g)}});function N1(p,g,I){var z=ua(g),q=Cr(g,z);I==null&&!(Xr(g)&&(q.length||!z.length))&&(I=g,g=p,p=this,q=Cr(g,ua(g)));var lt=!(Xr(I)&&"chain"in I)||!!I.chain,Et=Fl(p);return Ao(q,function(Ft){var Xt=g[Ft];p[Ft]=Xt,Et&&(p.prototype[Ft]=function(){var Ie=this.__chain__;if(lt||Ie){var Ee=p(this.__wrapped__),ze=Ee.__actions__=Os(this.__actions__);return ze.push({func:Xt,args:arguments,thisArg:p}),Ee.__chain__=Ie,Ee}return Xt.apply(p,Ba([this.value()],arguments))})}),p}function qE(){return uo._===this&&(uo._=sr),this}function V1(){}function WE(p){return p=Si(p),Gi(function(g){return xd(g,p)})}var ZE=Lh(Vr),$E=Lh(Xs),YE=Lh(Iu);function FA(p){return ug(p)?ia(lu(p)):qv(p)}function XE(p){return function(g){return p==null?i:yr(p,g)}}var KE=ey(),QE=ey(!0);function U1(){return[]}function j1(){return!1}function JE(){return{}}function tS(){return""}function eS(){return!0}function nS(p,g){if(p=Si(p),p<1||p>Ue)return[];var I=Vn,z=$r(p,Vn);g=Yn(g),p-=Vn;for(var q=Mu(z,g);++I<p;)g(I);return q}function iS(p){return Wn(p)?Vr(p,lu):Sa(p)?[p]:Os(Nd(Sr(p)))}function rS(p){var g=++Za;return Sr(p)+g}var oS=kd(function(p,g){return p+g},0),aS=Ld("ceil"),sS=kd(function(p,g){return p/g},1),lS=Ld("floor");function uS(p){return p&&p.length?Fn(p,Vl,kl):i}function cS(p,g){return p&&p.length?Fn(p,Yn(g,2),kl):i}function hS(p){return pc(p,Vl)}function fS(p,g){return pc(p,Yn(g,2))}function pS(p){return p&&p.length?Fn(p,Vl,nh):i}function dS(p,g){return p&&p.length?Fn(p,Yn(g,2),nh):i}var mS=kd(function(p,g){return p*g},1),gS=Ld("round"),vS=kd(function(p,g){return p-g},0);function yS(p){return p&&p.length?Ri(p,Vl):0}function _S(p,g){return p&&p.length?Ri(p,Yn(g,2)):0}return rt.after=Mn,rt.ary=Je,rt.assign=uh,rt.assignIn=tm,rt.assignInWith=Hp,rt.assignWith=em,rt.at=Zu,rt.before=ri,rt.bind=On,rt.bindAll=zE,rt.bindKey=fn,rt.castArray=pr,rt.chain=Bp,rt.chunk=py,rt.compact=dy,rt.concat=my,rt.cond=OE,rt.conforms=BE,rt.constant=B1,rt.countBy=n,rt.create=nm,rt.curry=fi,rt.curryRight=Xn,rt.debounce=Ei,rt.defaults=Gp,rt.defaultsDeep=im,rt.defer=Sn,rt.delay=qi,rt.difference=h1,rt.differenceBy=f1,rt.differenceWith=gy,rt.drop=vy,rt.dropRight=Vd,rt.dropRightWhile=yy,rt.dropWhile=Ud,rt.fill=jd,rt.filter=s,rt.flatMap=x,rt.flatMapDeep=A,rt.flatMapDepth=S,rt.flatten=_y,rt.flattenDeep=p1,rt.flattenDepth=d1,rt.flip=Rr,rt.flow=NE,rt.flowRight=VE,rt.fromPairs=Lf,rt.functions=Vy,rt.functionsIn=Uy,rt.groupBy=N,rt.initial=gg,rt.intersection=by,rt.intersectionBy=Ay,rt.intersectionWith=m1,rt.invert=jy,rt.invertBy=$u,rt.invokeMap=Z,rt.iteratee=F1,rt.keyBy=J,rt.keys=ua,rt.keysIn=ta,rt.map=ct,rt.mapKeys=jf,rt.mapValues=Hf,rt.matches=UE,rt.matchesProperty=jE,rt.memoize=zr,rt.merge=Gf,rt.mergeWith=Wh,rt.method=HE,rt.methodOf=GE,rt.mixin=N1,rt.negate=Ir,rt.nthArg=WE,rt.omit=Hy,rt.omitBy=Gy,rt.once=Or,rt.orderBy=pt,rt.over=ZE,rt.overArgs=to,rt.overEvery=$E,rt.overSome=YE,rt.partial=vo,rt.partialRight=Mo,rt.partition=Mt,rt.pick=qy,rt.pickBy=Cg,rt.property=FA,rt.propertyOf=XE,rt.pull=v1,rt.pullAll=Bh,rt.pullAllBy=zp,rt.pullAllWith=ur,rt.pullAt=y1,rt.range=KE,rt.rangeRight=QE,rt.rearg=Ma,rt.reject=$t,rt.remove=yg,rt.rest=jo,rt.reverse=ah,rt.sampleSize=ne,rt.set=Mg,rt.setWith=kc,rt.shuffle=fe,rt.slice=_1,rt.sortBy=_n,rt.sortedUniq=wy,rt.sortedUniqBy=Cy,rt.split=wE,rt.spread=Ea,rt.tail=Iy,rt.take=My,rt.takeRight=qd,rt.takeRightWhile=Fh,rt.takeWhile=_g,rt.tap=Zd,rt.throttle=ao,rt.thru=Rf,rt.toArray=Jd,rt.toPairs=Eg,rt.toPairsIn=am,rt.toPath=iS,rt.toPlainObject=eo,rt.transform=Sg,rt.unary=Ho,rt.union=Df,rt.unionBy=Ey,rt.unionWith=Co,rt.uniq=Dr,rt.uniqBy=Sy,rt.uniqWith=Ty,rt.unset=Wy,rt.unzip=Wd,rt.unzipWith=xg,rt.update=Tg,rt.updateWith=Zy,rt.values=Zh,rt.valuesIn=kg,rt.without=ky,rt.words=OA,rt.wrap=bi,rt.xor=bg,rt.xorBy=Nh,rt.xorWith=Vh,rt.zip=Py,rt.zipObject=Io,rt.zipObjectDeep=Op,rt.zipWith=Ic,rt.entries=Eg,rt.entriesIn=am,rt.extend=tm,rt.extendWith=Hp,N1(rt,rt),rt.add=oS,rt.attempt=BA,rt.camelCase=sm,rt.capitalize=Xy,rt.ceil=aS,rt.clamp=$y,rt.clone=ir,rt.cloneDeep=Ha,rt.cloneDeepWith=sa,rt.cloneWith=Ni,rt.conformsTo=Mr,rt.deburr=Pg,rt.defaultTo=FE,rt.divide=sS,rt.endsWith=S1,rt.eq=cr,rt.escape=T1,rt.escapeRegExp=k1,rt.every=r,rt.find=d,rt.findIndex=Rp,rt.findKey=rm,rt.findLast=v,rt.findLastIndex=Oh,rt.findLastKey=wg,rt.floor=lS,rt.forEach=D,rt.forEachRight=B,rt.forIn=By,rt.forInRight=qp,rt.forOwn=Fy,rt.forOwnRight=Ny,rt.get=om,rt.gt=la,rt.gte=Wi,rt.has=Fs,rt.hasIn=Uf,rt.head=Hd,rt.identity=Vl,rt.includes=V,rt.indexOf=xy,rt.inRange=Wp,rt.invoke=E1,rt.isArguments=ts,rt.isArray=Wn,rt.isArrayBuffer=Gu,rt.isArrayLike=Xi,rt.isArrayLikeObject=Er,rt.isBoolean=Bl,rt.isBuffer=sl,rt.isDate=Uh,rt.isElement=Of,rt.isEmpty=Ec,rt.isEqual=Bf,rt.isEqualWith=$d,rt.isError=lh,rt.isFinite=Fp,rt.isFunction=Fl,rt.isInteger=Np,rt.isLength=Nl,rt.isMap=Sc,rt.isMatch=Ff,rt.isMatchWith=Yd,rt.isNaN=Xd,rt.isNative=Vp,rt.isNil=Kd,rt.isNull=Up,rt.isNumber=Nf,rt.isObject=Xr,rt.isObjectLike=Kr,rt.isPlainObject=Tc,rt.isRegExp=jh,rt.isSafeInteger=Qd,rt.isSet=Hh,rt.isString=Gh,rt.isSymbol=Sa,rt.isTypedArray=qu,rt.isUndefined=qh,rt.isWeakMap=jp,rt.isWeakSet=Vf,rt.join=g1,rt.kebabCase=P1,rt.last=Ol,rt.lastIndexOf=Gd,rt.lowerCase=L1,rt.lowerFirst=D1,rt.lt=Ag,rt.lte=zy,rt.max=uS,rt.maxBy=cS,rt.mean=hS,rt.meanBy=fS,rt.min=pS,rt.minBy=dS,rt.stubArray=U1,rt.stubFalse=j1,rt.stubObject=JE,rt.stubString=tS,rt.stubTrue=eS,rt.multiply=mS,rt.nth=vg,rt.noConflict=qE,rt.noop=V1,rt.now=Ze,rt.pad=R1,rt.padEnd=z1,rt.padStart=Yu,rt.parseInt=lm,rt.random=Yy,rt.reduce=bt,rt.reduceRight=Ut,rt.repeat=Ky,rt.replace=Zp,rt.result=Ig,rt.round=gS,rt.runInContext=Ot,rt.sample=te,rt.size=Me,rt.snakeCase=Qy,rt.some=Fe,rt.sortedIndex=x1,rt.sortedIndexBy=b1,rt.sortedIndexOf=A1,rt.sortedLastIndex=w1,rt.sortedLastIndexBy=C1,rt.sortedLastIndexOf=I1,rt.startCase=CE,rt.startsWith=IE,rt.subtract=vS,rt.sum=yS,rt.sumBy=_S,rt.template=ME,rt.times=nS,rt.toFinite=Wu,rt.toInteger=Si,rt.toLength=Oy,rt.toLower=EE,rt.toNumber=es,rt.toSafeInteger=uu,rt.toString=Sr,rt.toUpper=SE,rt.trim=TE,rt.trimEnd=kE,rt.trimStart=PE,rt.truncate=LE,rt.unescape=DE,rt.uniqueId=rS,rt.upperCase=RE,rt.upperFirst=O1,rt.each=D,rt.eachRight=B,rt.first=Hd,N1(rt,function(){var p={};return Ur(rt,function(g,I){Ln.call(rt.prototype,I)||(p[I]=g)}),p}(),{chain:!1}),rt.VERSION=a,Ao(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){rt[p].placeholder=rt}),Ao(["drop","take"],function(p,g){mi.prototype[p]=function(I){I=I===i?1:zn(Si(I),0);var z=this.__filtered__&&!g?new mi(this):this.clone();return z.__filtered__?z.__takeCount__=$r(I,z.__takeCount__):z.__views__.push({size:$r(I,Vn),type:p+(z.__dir__<0?"Right":"")}),z},mi.prototype[p+"Right"]=function(I){return this.reverse()[p](I).reverse()}}),Ao(["filter","map","takeWhile"],function(p,g){var I=g+1,z=I==de||I==_e;mi.prototype[p]=function(q){var lt=this.clone();return lt.__iteratees__.push({iteratee:Yn(q,3),type:I}),lt.__filtered__=lt.__filtered__||z,lt}}),Ao(["head","last"],function(p,g){var I="take"+(g?"Right":"");mi.prototype[p]=function(){return this[I](1).value()[0]}}),Ao(["initial","tail"],function(p,g){var I="drop"+(g?"":"Right");mi.prototype[p]=function(){return this.__filtered__?new mi(this):this[I](1)}}),mi.prototype.compact=function(){return this.filter(Vl)},mi.prototype.find=function(p){return this.filter(p).head()},mi.prototype.findLast=function(p){return this.reverse().find(p)},mi.prototype.invokeMap=Gi(function(p,g){return typeof p=="function"?new mi(this):this.map(function(I){return zs(I,p,g)})}),mi.prototype.reject=function(p){return this.filter(Ir(Yn(p)))},mi.prototype.slice=function(p,g){p=Si(p);var I=this;return I.__filtered__&&(p>0||g<0)?new mi(I):(p<0?I=I.takeRight(-p):p&&(I=I.drop(p)),g!==i&&(g=Si(g),I=g<0?I.dropRight(-g):I.take(g-p)),I)},mi.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},mi.prototype.toArray=function(){return this.take(Vn)},Ur(mi.prototype,function(p,g){var I=/^(?:filter|find|map|reject)|While$/.test(g),z=/^(?:head|last)$/.test(g),q=rt[z?"take"+(g=="last"?"Right":""):g],lt=z||/^find/.test(g);q&&(rt.prototype[g]=function(){var Et=this.__wrapped__,Ft=z?[1]:arguments,Xt=Et instanceof mi,Ie=Ft[0],Ee=Xt||Wn(Et),ze=function(rr){var dr=q.apply(rt,Ba([rr],Ft));return z&&xn?dr[0]:dr};Ee&&I&&typeof Ie=="function"&&Ie.length!=1&&(Xt=Ee=!1);var xn=this.__chain__,Gn=!!this.__actions__.length,pi=lt&&!xn,Ki=Xt&&!Gn;if(!lt&&Ee){Et=Ki?Et:new mi(this);var di=p.apply(Et,Ft);return di.__actions__.push({func:Rf,args:[ze],thisArg:i}),new aa(di,xn)}return pi&&Ki?p.apply(this,Ft):(di=this.thru(ze),pi?z?di.value()[0]:di.value():di)})}),Ao(["pop","push","shift","sort","splice","unshift"],function(p){var g=Fa[p],I=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",z=/^(?:pop|shift)$/.test(p);rt.prototype[p]=function(){var q=arguments;if(z&&!this.__chain__){var lt=this.value();return g.apply(Wn(lt)?lt:[],q)}return this[I](function(Et){return g.apply(Wn(Et)?Et:[],q)})}}),Ur(mi.prototype,function(p,g){var I=rt[g];if(I){var z=I.name+"";Ln.call(wa,z)||(wa[z]=[]),wa[z].push({name:g,func:I})}}),wa[Td(i,st).name]=[{name:"wrapper",func:i}],mi.prototype.clone=Af,mi.prototype.reverse=Jc,mi.prototype.value=Mh,rt.prototype.at=zf,rt.prototype.chain=Mc,rt.prototype.commit=Ly,rt.prototype.next=Dy,rt.prototype.plant=Uo,rt.prototype.reverse=sh,rt.prototype.toJSON=rt.prototype.valueOf=rt.prototype.value=Ry,rt.prototype.first=rt.prototype.head,Sl&&(rt.prototype[Sl]=M1),rt},hr=zi();Ys?((Ys.exports=hr)._=hr,cc._=hr):uo._=hr}).call(_s)})(Z0,Z0.exports);var I_=Z0.exports;const rA="lang";function Fz(t){hf(t,rA,Wl({locale:{}}))}function dM(t){return pa(t,rA).locale}function Nz(t,e){const i=dM(t);i&&(i.locale=I_.merge(i.locale||{},e))}md(rA,Fz);function ga(t){const e=Ge(()=>dM(t));function i(f){var o;return mM((o=e.value)==null?void 0:o.locale,f,f)}const a=Ge(()=>i);function c(f){Nz(t,f)}return{trans:a,setLocale:c}}function mM(t,e,i){const a=Array.isArray(e)?e:e.split(".").filter(c=>c.length);return a.length<1?t===void 0?i:t:t==null?i:mM(t[a.shift()],a,i)}const Vz={class:"form-group"},Uz={key:0},jz={class:"input-container"},Hz=["disabled"],Gz=Fi({__name:"input-text",props:Gs({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=dl(t,"modelValue");return(i,a)=>(mt(),Yt("div",Vz,[t.label?(mt(),Yt("label",Uz,yn(t.label),1)):on("",!0),_t("div",jz,[ac(_t("input",er(i.$attrs,{"onUpdate:modelValue":a[0]||(a[0]=c=>e.value=c),disabled:t.disabled}),null,16,Hz),[[H3,e.value]])])]))}}),Oo=jn(Gz,[["__scopeId","data-v-3cada81f"]]),qz={class:"form-group"},Wz={key:0},Zz={class:"input-container"},$z={value:"",disabled:"",selected:"",hidden:""},Yz=["value"],Xz=Fi({__name:"input-select",props:Gs({label:String,items:{type:Array,default:()=>[]},itemValue:{type:String,default:"value"},itemText:{type:String,default:"text"},returnObject:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=dl(t,"modelValue"),i=t;function a(o){return typeof o=="string"||i.returnObject?o:o[i.itemValue]}function c(o){return typeof o=="string"?o:o[i.itemText]}function f(o){return typeof o=="string"?o:o[i.itemValue]}return(o,y)=>(mt(),Yt("div",qz,[t.label?(mt(),Yt("label",Wz,yn(t.label),1)):on("",!0),_t("div",Zz,[ac(_t("select",er(o.$attrs,{"onUpdate:modelValue":y[0]||(y[0]=_=>e.value=_),required:""}),[_t("option",$z,yn(o.$attrs.placeholder),1),(mt(!0),Yt(ui,null,$o(t.items,_=>(mt(),Yt("option",{value:a(_),key:f(_)},yn(c(_)),9,Yz))),128))],16),[[Rb,e.value]])])]))}}),qm=jn(Xz,[["__scopeId","data-v-3d43b324"]]),Kz={__name:"base-button",props:{active:Boolean,disabled:Boolean},setup(t){const e=t;return(i,a)=>(mt(),Yt("button",er({class:"map-control__button clickable"},i.$attrs,{class:{"map-control__button-active":e.active,"map-control__button-disabled":e.disabled}}),[Zn(i.$slots,"default",{},void 0,!0)],16))}},Oc=jn(Kz,[["__scopeId","data-v-8ee1300f"]]),Qz=["aria-expanded"],Jz={class:"collapse-header__title"},t8={class:"collapse-header__icon"},e8={key:0,class:"collapse-content"},n8={class:"collapse-content-box"},i8={name:"Collapse"},r8=Object.assign(i8,{props:{selected:{type:Boolean,default:!0}},emits:["update:selected","open","close"],setup(t,{emit:e}){const i=t,a=e,c=$e(i.selected),f=()=>{c.value=!c.value,a("update:selected",c.value),c.value?a("open"):a("close")},o={open:kI,close:C4};return(y,_)=>(mt(),Yt("div",{class:Zo(["collapse collapse-item",{"is-active":c.value}])},[_t("div",{class:"collapse-header touchable",role:"tab","aria-expanded":c.value?"true":"false",onClick:_o(f,["prevent"])},[_t("div",Jz,[Zn(y.$slots,"header",{},void 0,!0)]),_t("div",t8,[c.value?(mt(),Oe($(Bn),{key:0,size:"14",type:"mdi",path:o.close},null,8,["path"])):(mt(),Oe($(Bn),{key:1,size:"14",type:"mdi",path:o.open},null,8,["path"]))])],8,Qz),zt(Db,{name:"fade"},{default:se(()=>[c.value?(mt(),Yt("div",e8,[_t("div",n8,[Zn(y.$slots,"default",{},void 0,!0)])])):on("",!0)]),_:3})],2))}}),nb=jn(r8,[["__scopeId","data-v-c18a2170"]]),o8={class:"form-group"},a8={key:0},s8={class:"input-container"},l8=Fi({__name:"input-textarea",props:Gs({label:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=dl(t,"modelValue");return(i,a)=>(mt(),Yt("div",o8,[t.label?(mt(),Yt("label",a8,yn(t.label),1)):on("",!0),_t("div",s8,[ac(_t("textarea",er(i.$attrs,{"onUpdate:modelValue":a[0]||(a[0]=c=>e.value=c)}),null,16),[[pp,e.value]])])]))}}),gM=jn(l8,[["__scopeId","data-v-16e23689"]]),u8={class:"form-group"},c8={key:0},h8={class:"input-container"},f8=["min","max","step","disabled"],p8={class:"input-slider__value"},d8=["min","max","step","disabled"],m8=Fi({__name:"input-slider",props:Gs({label:String,min:{default:0},max:{default:100},step:{default:1},disabled:Boolean},{modelValue:{default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=dl(t,"modelValue"),i=t,a=Ge(()=>(e.value-i.min)*100/(i.max-i.min)+"% 100%");return(c,f)=>(mt(),Yt("div",u8,[t.label?(mt(),Yt("label",c8,yn(t.label),1)):on("",!0),_t("div",h8,[ac(_t("input",{"onUpdate:modelValue":f[0]||(f[0]=o=>e.value=o),type:"range",min:t.min,max:t.max,step:t.step,style:Jr({backgroundSize:a.value}),disabled:t.disabled},null,12,f8),[[pp,e.value]]),_t("div",p8,[ac(_t("input",{"onUpdate:modelValue":f[1]||(f[1]=o=>e.value=o),type:"number",min:t.min,max:t.max,step:t.step,disabled:t.disabled},null,8,d8),[[pp,e.value]])])])]))}}),$0=jn(m8,[["__scopeId","data-v-1580d3d1"]]),g8={class:"form-group"},v8={class:"form-control form-checkbox"},y8=["disabled"],_8=Fi({__name:"input-checkbox",props:Gs({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=dl(t,"modelValue");return(i,a)=>(mt(),Yt("div",g8,[_t("div",v8,[ac(_t("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=c=>e.value=c),disabled:t.disabled},null,8,y8),[[fI,e.value]]),_t("label",null,yn(t.label),1)])]))}}),x8=jn(_8,[["__scopeId","data-v-635d1a5d"]]),b8={class:"form-group"},A8={key:0},w8={class:"input-container"},C8=["onClick"],I8={__name:"input-choose",props:Gs({label:String,items:{type:Array,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=dl(t,"modelValue");function i(a){e.value=a.value}return(a,c)=>(mt(),Yt("div",b8,[t.label?(mt(),Yt("label",A8,yn(t.label),1)):on("",!0),_t("div",w8,[(mt(!0),Yt(ui,null,$o(t.items,f=>(mt(),Yt("div",{key:f.value,class:Zo(["item-choose",{"item-choose-active":f.value===e.value}]),onClick:_o(o=>i(f),["stop"])},yn(f.text),11,C8))),128))])]))}},M8=jn(I8,[["__scopeId","data-v-87ff0501"]]),E8="";function Wm(t,e){e===void 0&&(e={});var i=e.insertAt;if(!(!t||typeof document>"u")){var a=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",i==="top"&&a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c),c.styleSheet?c.styleSheet.cssText=t:c.appendChild(document.createTextNode(t))}}const Zm=function(t,e){const{componentPrefix:i=E8}=e||{};t.component(`${i}${this.name}`,this)},rx={};var Vv={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":`url(${T8(this.white,this.grey,this.size)})`}}}};function S8(t,e,i){if(typeof document>"u")return null;const a=document.createElement("canvas");a.width=a.height=i*2;const c=a.getContext("2d");return c?(c.fillStyle=t,c.fillRect(0,0,a.width,a.height),c.fillStyle=e,c.fillRect(0,0,i,i),c.translate(i,i),c.fillRect(0,0,i,i),a.toDataURL()):null}function T8(t,e,i){const a=`${t},${e},${i}`;if(rx[a])return rx[a];const c=S8(t,e,i);return rx[a]=c,c}function k8(t,e,i,a,c,f){return mt(),Yt("div",{class:"vc-checkerboard",style:Jr(f.bgStyle)},null,4)}var P8=".vc-checkerboard{background-size:contain;bottom:0;left:0;position:absolute;right:0;top:0}";Wm(P8);Vv.render=k8;Vv.__file="src/components/checkboard/checkboard.vue";Vv.install=Zm;var M_={name:"Alpha",components:{Checkboard:Vv},props:{value:Object,onChange:Function},computed:{colors(){return this.value},gradientColor(){const{rgba:t}=this.colors,e=[t.r,t.g,t.b].join(",");return`linear-gradient(to right, rgba(${e}, 0) 0%, rgba(${e}, 1) 100%)`}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:i}=this.$refs;if(!i)return;const a=i.clientWidth,c=i.getBoundingClientRect().left+window.pageXOffset,o=(t.pageX||(t.touches?t.touches[0].pageX:0))-c;let y;o<0?y=0:o>a?y=1:y=Math.round(o*100/a)/100,this.colors.a!==y&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:y,source:"rgba"})},handleMouseDown(t){this.handleChange(t,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const L8={class:"vc-alpha"},D8={class:"vc-alpha-checkboard-wrap"},R8=_t("div",{class:"vc-alpha-picker"},null,-1),z8=[R8];function O8(t,e,i,a,c,f){const o=tc("Checkboard");return mt(),Yt("div",L8,[_t("div",D8,[zt(o)]),_t("div",{class:"vc-alpha-gradient",style:Jr({background:f.gradientColor})},null,4),_t("div",{ref:"container",class:"vc-alpha-container",onMousedown:e[0]||(e[0]=(...y)=>f.handleMouseDown&&f.handleMouseDown(...y)),onTouchmove:e[1]||(e[1]=(...y)=>f.handleChange&&f.handleChange(...y)),onTouchstart:e[2]||(e[2]=(...y)=>f.handleChange&&f.handleChange(...y))},[_t("div",{class:"vc-alpha-pointer",style:Jr({left:`${f.colors.a*100}%`})},z8,4)],544)])}var B8=".vc-alpha,.vc-alpha-checkboard-wrap{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-container{cursor:pointer;height:100%;margin:0 3px;position:relative;z-index:2}.vc-alpha-pointer{position:absolute;z-index:2}.vc-alpha-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";Wm(B8);M_.render=O8;M_.__file="src/components/alpha/alpha.vue";M_.install=Zm;function As(t,e){F8(t)&&(t="100%");var i=N8(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),i&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function c0(t){return Math.min(1,Math.max(0,t))}function F8(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function N8(t){return typeof t=="string"&&t.indexOf("%")!==-1}function vM(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function h0(t){return t<=1?"".concat(Number(t)*100,"%"):t}function od(t){return t.length===1?"0"+t:String(t)}function V8(t,e,i){return{r:As(t,255)*255,g:As(e,255)*255,b:As(i,255)*255}}function v2(t,e,i){t=As(t,255),e=As(e,255),i=As(i,255);var a=Math.max(t,e,i),c=Math.min(t,e,i),f=0,o=0,y=(a+c)/2;if(a===c)o=0,f=0;else{var _=a-c;switch(o=y>.5?_/(2-a-c):_/(a+c),a){case t:f=(e-i)/_+(e<i?6:0);break;case e:f=(i-t)/_+2;break;case i:f=(t-e)/_+4;break}f/=6}return{h:f,s:o,l:y}}function ox(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*(6*i):i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function U8(t,e,i){var a,c,f;if(t=As(t,360),e=As(e,100),i=As(i,100),e===0)c=i,f=i,a=i;else{var o=i<.5?i*(1+e):i+e-i*e,y=2*i-o;a=ox(y,o,t+1/3),c=ox(y,o,t),f=ox(y,o,t-1/3)}return{r:a*255,g:c*255,b:f*255}}function y2(t,e,i){t=As(t,255),e=As(e,255),i=As(i,255);var a=Math.max(t,e,i),c=Math.min(t,e,i),f=0,o=a,y=a-c,_=a===0?0:y/a;if(a===c)f=0;else{switch(a){case t:f=(e-i)/y+(e<i?6:0);break;case e:f=(i-t)/y+2;break;case i:f=(t-e)/y+4;break}f/=6}return{h:f,s:_,v:o}}function j8(t,e,i){t=As(t,360)*6,e=As(e,100),i=As(i,100);var a=Math.floor(t),c=t-a,f=i*(1-e),o=i*(1-c*e),y=i*(1-(1-c)*e),_=a%6,M=[i,o,f,f,y,i][_],T=[y,i,i,o,f,f][_],k=[f,f,y,i,i,o][_];return{r:M*255,g:T*255,b:k*255}}function _2(t,e,i,a){var c=[od(Math.round(t).toString(16)),od(Math.round(e).toString(16)),od(Math.round(i).toString(16))];return a&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function H8(t,e,i,a,c){var f=[od(Math.round(t).toString(16)),od(Math.round(e).toString(16)),od(Math.round(i).toString(16)),od(G8(a))];return c&&f[0].startsWith(f[0].charAt(1))&&f[1].startsWith(f[1].charAt(1))&&f[2].startsWith(f[2].charAt(1))&&f[3].startsWith(f[3].charAt(1))?f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0)+f[3].charAt(0):f.join("")}function G8(t){return Math.round(parseFloat(t)*255).toString(16)}function x2(t){return fu(t)/255}function fu(t){return parseInt(t,16)}function q8(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var ib={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function W8(t){var e={r:0,g:0,b:0},i=1,a=null,c=null,f=null,o=!1,y=!1;return typeof t=="string"&&(t=Y8(t)),typeof t=="object"&&(Xh(t.r)&&Xh(t.g)&&Xh(t.b)?(e=V8(t.r,t.g,t.b),o=!0,y=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Xh(t.h)&&Xh(t.s)&&Xh(t.v)?(a=h0(t.s),c=h0(t.v),e=j8(t.h,a,c),o=!0,y="hsv"):Xh(t.h)&&Xh(t.s)&&Xh(t.l)&&(a=h0(t.s),f=h0(t.l),e=U8(t.h,a,f),o=!0,y="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(i=t.a)),i=vM(i),{ok:o,format:t.format||y,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:i}}var Z8="[-\\+]?\\d+%?",$8="[-\\+]?\\d*\\.\\d+%?",rp="(?:".concat($8,")|(?:").concat(Z8,")"),ax="[\\s|\\(]+(".concat(rp,")[,|\\s]+(").concat(rp,")[,|\\s]+(").concat(rp,")\\s*\\)?"),sx="[\\s|\\(]+(".concat(rp,")[,|\\s]+(").concat(rp,")[,|\\s]+(").concat(rp,")[,|\\s]+(").concat(rp,")\\s*\\)?"),Dc={CSS_UNIT:new RegExp(rp),rgb:new RegExp("rgb"+ax),rgba:new RegExp("rgba"+sx),hsl:new RegExp("hsl"+ax),hsla:new RegExp("hsla"+sx),hsv:new RegExp("hsv"+ax),hsva:new RegExp("hsva"+sx),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Y8(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(ib[t])t=ib[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i=Dc.rgb.exec(t);return i?{r:i[1],g:i[2],b:i[3]}:(i=Dc.rgba.exec(t),i?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=Dc.hsl.exec(t),i?{h:i[1],s:i[2],l:i[3]}:(i=Dc.hsla.exec(t),i?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=Dc.hsv.exec(t),i?{h:i[1],s:i[2],v:i[3]}:(i=Dc.hsva.exec(t),i?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=Dc.hex8.exec(t),i?{r:fu(i[1]),g:fu(i[2]),b:fu(i[3]),a:x2(i[4]),format:e?"name":"hex8"}:(i=Dc.hex6.exec(t),i?{r:fu(i[1]),g:fu(i[2]),b:fu(i[3]),format:e?"name":"hex"}:(i=Dc.hex4.exec(t),i?{r:fu(i[1]+i[1]),g:fu(i[2]+i[2]),b:fu(i[3]+i[3]),a:x2(i[4]+i[4]),format:e?"name":"hex8"}:(i=Dc.hex3.exec(t),i?{r:fu(i[1]+i[1]),g:fu(i[2]+i[2]),b:fu(i[3]+i[3]),format:e?"name":"hex"}:!1)))))))))}function Xh(t){return!!Dc.CSS_UNIT.exec(String(t))}var X8=function(){function t(e,i){e===void 0&&(e=""),i===void 0&&(i={});var a;if(e instanceof t)return e;typeof e=="number"&&(e=q8(e)),this.originalInput=e;var c=W8(e);this.originalInput=e,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=i.format)!==null&&a!==void 0?a:c.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),i,a,c,f=e.r/255,o=e.g/255,y=e.b/255;return f<=.03928?i=f/12.92:i=Math.pow((f+.055)/1.055,2.4),o<=.03928?a=o/12.92:a=Math.pow((o+.055)/1.055,2.4),y<=.03928?c=y/12.92:c=Math.pow((y+.055)/1.055,2.4),.2126*i+.7152*a+.0722*c},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=vM(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=y2(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=y2(this.r,this.g,this.b),i=Math.round(e.h*360),a=Math.round(e.s*100),c=Math.round(e.v*100);return this.a===1?"hsv(".concat(i,", ").concat(a,"%, ").concat(c,"%)"):"hsva(".concat(i,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=v2(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=v2(this.r,this.g,this.b),i=Math.round(e.h*360),a=Math.round(e.s*100),c=Math.round(e.l*100);return this.a===1?"hsl(".concat(i,", ").concat(a,"%, ").concat(c,"%)"):"hsla(".concat(i,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),_2(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),H8(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),i=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(i,", ").concat(a,")"):"rgba(".concat(e,", ").concat(i,", ").concat(a,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(i){return"".concat(Math.round(As(i,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(i){return Math.round(As(i,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+_2(this.r,this.g,this.b,!1),i=0,a=Object.entries(ib);i<a.length;i++){var c=a[i],f=c[0],o=c[1];if(e===o)return f}return!1},t.prototype.toString=function(e){var i=!!e;e=e??this.format;var a=!1,c=this.a<1&&this.a>=0,f=!i&&c&&(e.startsWith("hex")||e==="name");return f?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(a=this.toRgbString()),e==="prgb"&&(a=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(a=this.toHexString()),e==="hex3"&&(a=this.toHexString(!0)),e==="hex4"&&(a=this.toHex8String(!0)),e==="hex8"&&(a=this.toHex8String()),e==="name"&&(a=this.toName()),e==="hsl"&&(a=this.toHslString()),e==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var i=this.toHsl();return i.l+=e/100,i.l=c0(i.l),new t(i)},t.prototype.brighten=function(e){e===void 0&&(e=10);var i=this.toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(255*-(e/100)))),i.g=Math.max(0,Math.min(255,i.g-Math.round(255*-(e/100)))),i.b=Math.max(0,Math.min(255,i.b-Math.round(255*-(e/100)))),new t(i)},t.prototype.darken=function(e){e===void 0&&(e=10);var i=this.toHsl();return i.l-=e/100,i.l=c0(i.l),new t(i)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var i=this.toHsl();return i.s-=e/100,i.s=c0(i.s),new t(i)},t.prototype.saturate=function(e){e===void 0&&(e=10);var i=this.toHsl();return i.s+=e/100,i.s=c0(i.s),new t(i)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var i=this.toHsl(),a=(i.h+e)%360;return i.h=a<0?360+a:a,new t(i)},t.prototype.mix=function(e,i){i===void 0&&(i=50);var a=this.toRgb(),c=new t(e).toRgb(),f=i/100,o={r:(c.r-a.r)*f+a.r,g:(c.g-a.g)*f+a.g,b:(c.b-a.b)*f+a.b,a:(c.a-a.a)*f+a.a};return new t(o)},t.prototype.analogous=function(e,i){e===void 0&&(e=6),i===void 0&&(i=30);var a=this.toHsl(),c=360/i,f=[this];for(a.h=(a.h-(c*e>>1)+720)%360;--e;)a.h=(a.h+c)%360,f.push(new t(a));return f},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var i=this.toHsv(),a=i.h,c=i.s,f=i.v,o=[],y=1/e;e--;)o.push(new t({h:a,s:c,v:f})),f=(f+y)%1;return o},t.prototype.splitcomplement=function(){var e=this.toHsl(),i=e.h;return[this,new t({h:(i+72)%360,s:e.s,l:e.l}),new t({h:(i+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var i=this.toRgb(),a=new t(e).toRgb(),c=i.a+a.a*(1-i.a);return new t({r:(i.r*i.a+a.r*a.a*(1-i.a))/c,g:(i.g*i.a+a.g*a.a*(1-i.a))/c,b:(i.b*i.a+a.b*a.a*(1-i.a))/c,a:c})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var i=this.toHsl(),a=i.h,c=[this],f=360/e,o=1;o<e;o++)c.push(new t({h:(a+o*f)%360,s:i.s,l:i.l}));return c},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function Jf(...t){return new X8(...t)}function lx(t,e){const i=t&&t.a;let a;t&&t.hsl?a=Jf(t.hsl):t&&t.hex&&t.hex.length>0?a=Jf(t.hex):t&&t.hsv?a=Jf(t.hsv):t&&t.rgba?a=Jf(t.rgba):t&&t.rgb?a=Jf(t.rgb):a=Jf(t),a&&(a._a===void 0||a._a===null)&&a.setAlpha(i||a.getAlpha());const c=a.toHsl(),f=a.toHsv();return c.s===0&&(f.h=c.h=t.h||t.hsl&&t.hsl.h||e||0),f.v<.0164&&(f.h=t.h||t.hsv&&t.hsv.h||0,f.s=t.s||t.hsv&&t.hsv.s||0),c.l<.01&&(c.h=t.h||t.hsl&&t.hsl.h||0,c.s=t.s||t.hsl&&t.hsl.s||0),{hsl:c,hex:a.toHexString().toUpperCase(),hex8:a.toHex8String().toUpperCase(),rgba:a.toRgb(),hsv:f,oldHue:t.h||e||c.h,source:t.source,a:a.getAlpha()}}var K8={model:{prop:"modelValue",event:"update:modelValue"},props:["modelValue"],data(){return{val:lx(this.modelValue)}},computed:{colors:{get(){return this.val},set(t){this.val=t,this.$emit("update:modelValue",t)}}},watch:{modelValue(t){this.val=lx(t)}},methods:{colorChange(t,e){this.oldHue=this.colors.hsl.h,this.colors=lx(t,e||this.oldHue)},isValidHex(t){return Jf(t).isValid},simpleCheckForValidColor(t){const e=["r","g","b","a","h","s","l","v"];let i=0,a=0;for(let c=0;c<e.length;c++){const f=e[c];t[f]&&(i++,isNaN(t[f])||a++)}if(i===a)return t},paletteUpperCase(t){return t.map(e=>e.toUpperCase())},isTransparent(t){return Jf(t).getAlpha()===0}}},E_={name:"EditableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.value},set(t){if(this.max!==void 0&&+t>this.max)this.$refs.input.value=this.max;else return t}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(t){this.handleChange(t.target.value)},handleChange(t){const e={};e[this.label]=t,e.hex===void 0&&e["#"]===void 0?this.$emit("change",e):t.length>5&&this.$emit("change",e)},handleKeyDown(t){let{val:e}=this;const i=Number(e);if(i){const a=this.arrowOffset||1;t.keyCode===38&&(e=i+a,this.handleChange(e),t.preventDefault()),t.keyCode===40&&(e=i-a,this.handleChange(e),t.preventDefault())}}}};const Q8={class:"vc-editable-input"},J8=["aria-labelledby"],tO=["id","for"],eO={class:"vc-input__desc"};function nO(t,e,i,a,c,f){return mt(),Yt("div",Q8,[ac(_t("input",{ref:"input","onUpdate:modelValue":e[0]||(e[0]=o=>f.val=o),"aria-labelledby":f.labelId,class:"vc-input__input",onKeydown:e[1]||(e[1]=(...o)=>f.handleKeyDown&&f.handleKeyDown(...o)),onInput:e[2]||(e[2]=(...o)=>f.update&&f.update(...o))},null,40,J8),[[pp,f.val]]),_t("span",{id:f.labelId,for:i.label,class:"vc-input__label"},yn(f.labelSpanText),9,tO),_t("span",eO,yn(i.desc),1)])}var iO=".vc-editable-input{position:relative}.vc-input__input{border:0;outline:none;padding:0}.vc-input__label{text-transform:capitalize}";Wm(iO);E_.render=nO;E_.__file="src/components/editable-input/editable-input.vue";E_.install=Zm;function ux(t,e,i){return e<i?t<e?e:t>i?i:t:t<i?i:t>e?e:t}var S_={name:"Saturation",props:{value:Object},computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return`${-(this.colors.hsv.v*100)+1+100}%`},pointerLeft(){return`${this.colors.hsv.s*100}%`}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:i}=this.$refs;if(!i)return;const a=i.clientWidth,c=i.clientHeight,f=i.getBoundingClientRect().left+window.pageXOffset,o=i.getBoundingClientRect().top+window.pageYOffset,y=t.pageX||(t.touches?t.touches[0].pageX:0),_=t.pageY||(t.touches?t.touches[0].pageY:0),M=ux(y-f,0,a),T=ux(_-o,0,c),k=M/a,P=ux(-(T/c)+1,0,1);this.onChange({h:this.colors.hsv.h,s:k,v:P,a:this.colors.hsv.a,source:"hsva"})},onChange(t){this.$emit("change",t)},handleMouseDown(t){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(t){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const rO=_t("div",{class:"vc-saturation--white"},null,-1),oO=_t("div",{class:"vc-saturation--black"},null,-1),aO=_t("div",{class:"vc-saturation-circle"},null,-1),sO=[aO];function lO(t,e,i,a,c,f){return mt(),Yt("div",{ref:"container",class:"vc-saturation",style:Jr({background:f.bgColor}),onMousedown:e[0]||(e[0]=(...o)=>f.handleMouseDown&&f.handleMouseDown(...o)),onTouchmove:e[1]||(e[1]=(...o)=>f.handleChange&&f.handleChange(...o)),onTouchstart:e[2]||(e[2]=(...o)=>f.handleChange&&f.handleChange(...o))},[rO,oO,_t("div",{class:"vc-saturation-pointer",style:Jr({top:f.pointerTop,left:f.pointerLeft})},sO,4)],36)}var uO=".vc-saturation,.vc-saturation--black,.vc-saturation--white{bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{border-radius:50%;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);cursor:head;height:4px;transform:translate(-2px,-2px);width:4px}";Wm(uO);S_.render=lO;S_.__file="src/components/saturation/saturation.vue";S_.install=Zm;var T_={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){return this.value},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:`${-(this.colors.hsl.h*100/360)+100}%`:0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":`${this.colors.hsl.h*100/360}%`}},watch:{value:{handler(t,e){const{h:i}=t.hsl;i!==0&&i-this.oldHue>0&&(this.pullDirection="right"),i!==0&&i-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=i},deep:!0,immediate:!0}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:i}=this.$refs;if(!i)return;const a=i.clientWidth,c=i.clientHeight,f=i.getBoundingClientRect().left+window.pageXOffset,o=i.getBoundingClientRect().top+window.pageYOffset,y=t.pageX||(t.touches?t.touches[0].pageX:0),_=t.pageY||(t.touches?t.touches[0].pageY:0),M=y-f,T=_-o;let k,P;this.direction==="vertical"?(T<0?k=360:T>c?k=0:(P=-(T*100/c)+100,k=360*P/100),this.colors.hsl.h!==k&&this.$emit("change",{h:k,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(M<0?k=0:M>a?k=360:(P=M*100/a,k=360*P/100),this.colors.hsl.h!==k&&this.$emit("change",{h:k,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(t){this.handleChange(t,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(t){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const cO=["aria-valuenow"],hO=_t("div",{class:"vc-hue-picker"},null,-1),fO=[hO];function pO(t,e,i,a,c,f){return mt(),Yt("div",{class:Zo(["vc-hue",[f.directionClass]])},[_t("div",{ref:"container",class:"vc-hue-container",role:"slider","aria-valuenow":f.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",onMousedown:e[0]||(e[0]=(...o)=>f.handleMouseDown&&f.handleMouseDown(...o)),onTouchmove:e[1]||(e[1]=(...o)=>f.handleChange&&f.handleChange(...o)),onTouchstart:e[2]||(e[2]=(...o)=>f.handleChange&&f.handleChange(...o))},[_t("div",{class:"vc-hue-pointer",style:Jr({top:f.pointerTop,left:f.pointerLeft}),role:"presentation"},fO,4)],40,cO)],2)}var dO=".vc-hue{border-radius:2px;bottom:0;left:0;position:absolute;right:0;top:0}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;height:100%;margin:0 2px;position:relative}.vc-hue-pointer{position:absolute;z-index:2}.vc-hue-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";Wm(dO);T_.render=pO;T_.__file="src/components/hue/hue.vue";T_.install=Zm;const mO=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var k_={name:"Sketch",components:{Saturation:S_,Hue:T_,Alpha:M_,EdIn:E_,Checkboard:Vv},mixins:[K8],props:{presetColors:{type:Array,default(){return mO}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let t;return this.colors.a<1?t=this.colors.hex8:t=this.colors.hex,t.replace("#","")},activeColor(){const{rgba:t}=this.colors;return`rgba(${[t.r,t.g,t.b,t.a].join(",")})`}},methods:{handlePreset(t){this.colorChange(t)},childChange(t){this.colorChange(t)},inputChange(t){t&&(t.hex?this.isValidHex(t.hex)&&this.colorChange({hex:t.hex,source:"hex"}):(t.r||t.g||t.b||t.a)&&this.colorChange({r:t.r||this.colors.rgba.r,g:t.g||this.colors.rgba.g,b:t.b||this.colors.rgba.b,a:t.a||this.colors.rgba.a,source:"rgba"}))}}};const gO={class:"vc-sketch-saturation-wrap"},vO={class:"vc-sketch-controls"},yO={class:"vc-sketch-sliders"},_O={class:"vc-sketch-hue-wrap"},xO={key:0,class:"vc-sketch-alpha-wrap"},bO={class:"vc-sketch-color-wrap"},AO=["aria-label"],wO={key:0,class:"vc-sketch-field"},CO={class:"vc-sketch-field--double"},IO={class:"vc-sketch-field--single"},MO={class:"vc-sketch-field--single"},EO={class:"vc-sketch-field--single"},SO={key:0,class:"vc-sketch-field--single"},TO={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},kO=["aria-label","onClick"],PO=["aria-label","onClick"];function LO(t,e,i,a,c,f){const o=tc("Saturation"),y=tc("Hue"),_=tc("Alpha"),M=tc("Checkboard"),T=tc("EdIn");return mt(),Yt("div",{role:"application","aria-label":"Sketch color picker",class:Zo(["vc-sketch",[i.disableAlpha?"vc-sketch__disable-alpha":""]])},[_t("div",gO,[zt(o,{value:t.colors,onChange:f.childChange},null,8,["value","onChange"])]),_t("div",vO,[_t("div",yO,[_t("div",_O,[zt(y,{value:t.colors,onChange:f.childChange},null,8,["value","onChange"])]),i.disableAlpha?on("v-if",!0):(mt(),Yt("div",xO,[zt(_,{value:t.colors,onChange:f.childChange},null,8,["value","onChange"])]))]),_t("div",bO,[_t("div",{"aria-label":`Current color is ${f.activeColor}`,class:"vc-sketch-active-color",style:Jr({background:f.activeColor})},null,12,AO),zt(M)])]),i.disableFields?on("v-if",!0):(mt(),Yt("div",wO,[on(" rgba "),_t("div",CO,[zt(T,{label:"hex",value:f.hex,onChange:f.inputChange},null,8,["value","onChange"])]),_t("div",IO,[zt(T,{label:"r",value:t.colors.rgba.r,onChange:f.inputChange},null,8,["value","onChange"])]),_t("div",MO,[zt(T,{label:"g",value:t.colors.rgba.g,onChange:f.inputChange},null,8,["value","onChange"])]),_t("div",EO,[zt(T,{label:"b",value:t.colors.rgba.b,onChange:f.inputChange},null,8,["value","onChange"])]),i.disableAlpha?on("v-if",!0):(mt(),Yt("div",SO,[zt(T,{label:"a",value:t.colors.a,"arrow-offset":.01,max:1,onChange:f.inputChange},null,8,["value","arrow-offset","onChange"])]))])),_t("div",TO,[(mt(!0),Yt(ui,null,$o(i.presetColors,k=>(mt(),Yt(ui,null,[t.isTransparent(k)?(mt(),Yt("div",{key:k,"aria-label":`Color:${k}`,class:"vc-sketch-presets-color",onClick:P=>f.handlePreset(k)},[zt(M)],8,PO)):(mt(),Yt("div",{key:`!${k}`,class:"vc-sketch-presets-color","aria-label":`Color:${k}`,style:Jr({background:k}),onClick:P=>f.handlePreset(k)},null,12,kO))],64))),256))])],2)}var DO=".vc-sketch{background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;padding:10px 10px 0;position:relative;width:200px}.vc-sketch-saturation-wrap{overflow:hidden;padding-bottom:75%;position:relative;width:100%}.vc-sketch-controls{display:flex}.vc-sketch-sliders{flex:1;padding:4px 0}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{height:10px;position:relative}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{border-radius:3px;height:24px;margin-left:4px;margin-top:4px;position:relative;width:24px}.vc-sketch-active-color{border-radius:2px;bottom:0;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);left:0;position:absolute;right:0;top:0;z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px;padding:4px 0 3px 10%;width:90%}.vc-sketch-field .vc-input__label{color:#222;display:block;font-size:11px;padding-bottom:4px;padding-top:3px;text-align:center;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{border-top:1px solid #eee;margin-left:-10px;margin-right:-10px;padding-left:10px;padding-top:10px}.vc-sketch-presets-color{cursor:pointer;display:inline-block;height:16px;margin:0 10px 10px 0;overflow:hidden;position:relative;vertical-align:top;width:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}";Wm(DO);k_.render=LO;k_.__file="src/components/sketch/sketch.vue";k_.install=Zm;const RO={class:"form-group"},zO={key:0},OO={class:"input-container"},BO=Fi({__name:"input-colorPicker",props:Gs({label:String,disabled:Boolean},{modelValue:{default:"#000000"},modelModifiers:{}}),emits:Gs(["change"],["update:modelValue"]),setup(t,{emit:e}){const i=dl(t,"modelValue"),a=e;function c({hex:f}){i.value=f,a("change",f)}return(f,o)=>(mt(),Yt("div",RO,[t.label?(mt(),Yt("label",zO,yn(t.label),1)):on("",!0),_t("div",OO,[zt($(k_),er({modelValue:i.value},f.$attrs,{"onUpdate:modelValue":c,disabled:t.disabled}),null,16,["modelValue","disabled"])])]))}}),Eo=(t={},e,i)=>{const a=bs("$map.id"),c=Ge(()=>t.mapId||a);ml(()=>{up.getMap(c.value,async y=>{e instanceof Function&&await e(y)})}),dd(async()=>{i instanceof Function&&up.getMap(c.value,async y=>{e instanceof Function&&await i(y)})});function f(y){return up.getMap(c.value,y)}const o={mapId:t.mapId,dragId:t.dragId,btnWidth:t.btnWidth,position:t.position,controlVisible:t.controlVisible,order:t.order};return{callMap:f,mapId:c,moduleContainerProps:o}},os={mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}};function fd(t=!1){const e=$e(t);function i(a){if(a!=null){e.value=a;return}e.value=!e.value}return[e,i]}let br={state:Wl({container:{}}),getters:{getItems(t){return br.actions.getContainer(t).items},getItemsShow(t){return br.actions.getContainer(t).show},getWidth(t){return br.actions.getContainer(t).width},getHeight(t){return br.actions.getContainer(t).height},getIsMobile(t){return br.actions.getContainer(t).isMobile}},actions:{initContainer(t){br.state.container[t]={items:[],show:[],actions:{},height:0,width:0,isMobile:!1}},removeContainer(t){delete br.state.container[t]},getContainer(t){if(!t)throw"Not set container id";const e=br.state.container[t];if(!e)throw"Not found container for id "+t;return e},setParentProps(t,e){const i=br.actions.getContainer(t);i.width=e.width,i.height=e.height,i.isMobile=e.isMobile},registerItem(t,e){br.actions.getContainer(t).items.push(e)},registerAction(t,e,i){const a=br.actions.getContainer(t);a.actions[e]=i},unRegisterItem(t,e){const i=br.state.container[t];i&&(i.items=i.items.filter(a=>a!==e),i.show=i.show.filter(a=>a!==e),delete i.actions[e])},registerItemShow(t,e,i){FO(t,e,i),cx(t)},setToBack(t,e){if(!t||!e)return;const i=b2(t),a=i.show.findIndex(c=>c==e);a>0&&(i.show.splice(a,1),i.show.unshift(e),cx(t))},setToFront(t,e){if(!t||!e)return;const i=b2(t),a=i.show.findIndex(c=>c==e);a<i.show.length-1&&(i.show.splice(a,1),i.show.push(e),cx(t))}}};function FO(t,e,i){const a=br.actions.getContainer(t),c=a.show;if(i&&!c.includes(e))c.push(e);else if(!i){const f=c.indexOf(e);f!==-1&&c.splice(f,1)}a.show=c}function cx(t){br.actions.getContainer(t).show.forEach((i,a)=>{const c=NO(t,i);c&&c.setZIndex(a<0?1:a+2)})}function NO(t,e){return br.actions.getContainer(t).actions[e]}function b2(t){const e=br.state.container[t];if(!e)throw"Not found container for id "+t;return e}window.$_hungpv_store?br=window.$_hungpv_store:window.$_hungpv_store=br;function VO(t){br.actions.initContainer(t)}function UO(t){br.actions.removeContainer(t)}const jO=br.actions.setParentProps;function HO(t,e){br.actions.registerItem(t,e)}function GO(t,e){br.actions.unRegisterItem(t,e)}const A2=br.actions.registerItemShow,qO=br.actions.registerAction,WO=br.actions.setToFront,ZO=br.actions.setToBack,$O=["id"],YO=Fi({__name:"draggable-container",props:{containerId:{}},emits:{init:t=>!0,destroy:t=>!0},setup(t,{emit:e}){const i=e,a=$e(),{containerId:c}=t,f=$e(c||`draggable-container-${sf()}`),o=$e(!1);Ge(()=>br.state),ml(()=>{VO(f.value),window.addEventListener("resize",y),xu(()=>{y(),o.value=!0,i("init",f.value)})}),dd(()=>{UO(f.value),window.removeEventListener("resize",y),i("destroy",f.value)}),ld("containerId",f);function y(){var M,T;const _=((M=a.value)==null?void 0:M.clientWidth)||0;jO(f.value,{width:_,height:((T=a.value)==null?void 0:T.clientHeight)||0,isMobile:_<600})}return(_,M)=>(mt(),Yt("div",{class:"draggable-container",ref_key:"box",ref:a,id:_.containerId},[f.value&&o.value?Zn(_.$slots,"default",{key:0,containerId:_.containerId},void 0,!0):on("",!0)],8,$O))}}),XO=jn(YO,[["__scopeId","data-v-7fb60013"]]),KO={props:{height:{},width:{}},data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},QO={class:"card-container"},JO=Pb('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1);function tB(t,e,i,a,c,f){return mt(),Yt("div",er({class:"card",style:f.cardStyle},t.$attrs),[_t("div",QO,[Zn(t.$slots,"default")]),JO],16)}const P_=jn(KO,[["render",tB]]),eB={props:{height:{default:32},width:{default:32},disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},bindClass(){return{"map-control-button--disabled":this.disabled}}}},nB={class:"map-control-button__content"};function iB(t,e,i,a,c,f){return mt(),Yt("button",er({class:"map-control-button"},t.$attrs,{style:f.bindStyle,class:f.bindClass}),[_t("span",nB,[Zn(t.$slots,"default",{},void 0,!0)])],16)}const ns=jn(eB,[["render",iB],["__scopeId","data-v-bc4d069e"]]);function rB(t,e){return e.length<1?!1:e[e.length-1]==t}function oB(t,e){return e.length<1?!1:e[0]==t}function L_(t,e,i){const a=$e(`draggable-item-${sf()}`),c=$e(0);function f(o){c.value=o}return ml(()=>{HO(t,a.value),qO(t,a.value,{setZIndex:f}),e.value&&A2(t,a.value,e.value)}),dd(()=>{GO(t,a.value)}),pl(e,o=>{A2(t,a.value,o)}),{itemId:a,zIndex:c}}function D_(t,e){const i=Ge(()=>br.getters.getItems(t)),a=Ge(()=>br.getters.getItemsShow(t)),c=Ge(()=>rB(e,a.value)),f=Ge(()=>oB(e,a.value)),o=Ge(()=>a.value.length>1);function y(){ZO(t,e)}function _(){WO(t,e)}return{items:i,itemShows:a,isLast:c,isFirst:f,isHasItems:o,onToBack:y,onToFront:_}}function aB(t){const e=Ge(()=>br.getters.getWidth(t)),i=Ge(()=>br.getters.getHeight(t));return{containerWidth:e,containerHeight:i}}const R_={disabledExpand:Boolean,disabledHeader:Boolean,disabledClose:Boolean,disabledOrder:Boolean,containerId:String,title:{type:String,default:""}};function z_(t,e,i){const a=$e(!!t.show||!!i);return pl(()=>t.show,f=>{a.value=f}),{show:Ge({get(){return a.value},set(f){a.value=f,e("update:show",f),f||e("close")}})}}const O_={show:Boolean},B_={"update:show":t=>Boolean,close:()=>Boolean};function F_(t,e,i){const a=$e(!!i);pl(()=>t.expand,o=>{a.value=o});const c=Ge({get(){return a.value},set(o){a.value=o,e("update:expand",o)}});function f(){c.value=!c.value}return{expand:c,toggle:f}}const N_={expand:Boolean},V_={"update:expand":t=>Boolean},sB={name:"ArrangeBringForwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},lB=["aria-hidden","aria-label"],uB=["fill","width","height"],cB={d:"M2,2H16V16H2V2M22,8V22H8V18H10V20H20V10H18V8H22Z"},hB={key:0};function fB(t,e,i,a,c,f){return mt(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon arrange-bring-forward-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(mt(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[_t("path",cB,[i.title?(mt(),Yt("title",hB,yn(i.title),1)):on("",!0)])],8,uB))],16,lB)}const pB=jn(sB,[["render",fB]]),dB={name:"ArrangeSendBackwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},mB=["aria-hidden","aria-label"],gB=["fill","width","height"],vB={d:"M2,2H16V16H2V2M22,8V22H8V18H18V8H22M4,4V14H14V4H4Z"},yB={key:0};function _B(t,e,i,a,c,f){return mt(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon arrange-send-backward-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(mt(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[_t("path",vB,[i.title?(mt(),Yt("title",yB,yn(i.title),1)):on("",!0)])],8,gB))],16,mB)}const xB=jn(dB,[["render",_B]]),bB={name:"ArrowDownDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},AB=["aria-hidden","aria-label"],wB=["fill","width","height"],CB={d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M7,10L12,15L17,10H7Z"},IB={key:0};function MB(t,e,i,a,c,f){return mt(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon arrow-down-drop-circle-outline-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(mt(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[_t("path",CB,[i.title?(mt(),Yt("title",IB,yn(i.title),1)):on("",!0)])],8,wB))],16,AB)}const w2=jn(bB,[["render",MB]]),EB={name:"ArrowUpDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},SB=["aria-hidden","aria-label"],TB=["fill","width","height"],kB={d:"M12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M17,14L12,9L7,14H17Z"},PB={key:0};function LB(t,e,i,a,c,f){return mt(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon arrow-up-drop-circle-outline-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(mt(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[_t("path",kB,[i.title?(mt(),Yt("title",PB,yn(i.title),1)):on("",!0)])],8,TB))],16,SB)}const C2=jn(EB,[["render",LB]]),DB={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},RB=["aria-hidden","aria-label"],zB=["fill","width","height"],OB={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},BB={key:0};function FB(t,e,i,a,c,f){return mt(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon close-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(mt(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[_t("path",OB,[i.title?(mt(),Yt("title",BB,yn(i.title),1)):on("",!0)])],8,zB))],16,RB)}const NB=jn(DB,[["render",FB]]),VB={name:"DragVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},UB=["aria-hidden","aria-label"],jB=["fill","width","height"],HB={d:"M22.67,12L18.18,16.5L15.67,14L17.65,12L15.67,10.04L18.18,7.53L22.67,12M12,1.33L16.47,5.82L13.96,8.33L12,6.35L10,8.33L7.5,5.82L12,1.33M12,22.67L7.53,18.18L10.04,15.67L12,17.65L14,15.67L16.5,18.18L12,22.67M1.33,12L5.82,7.5L8.33,10L6.35,12L8.33,13.96L5.82,16.47L1.33,12M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10Z"},GB={key:0};function qB(t,e,i,a,c,f){return mt(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon drag-variant-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(mt(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[_t("path",HB,[i.title?(mt(),Yt("title",GB,yn(i.title),1)):on("",!0)])],8,jB))],16,UB)}const WB=jn(VB,[["render",qB]]),ZB={name:"MenuLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},$B=["aria-hidden","aria-label"],YB=["fill","width","height"],XB={d:"M14,7L9,12L14,17V7Z"},KB={key:0};function QB(t,e,i,a,c,f){return mt(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon menu-left-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(mt(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[_t("path",XB,[i.title?(mt(),Yt("title",KB,yn(i.title),1)):on("",!0)])],8,YB))],16,$B)}const I2=jn(ZB,[["render",QB]]),JB={name:"MenuRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},tF=["aria-hidden","aria-label"],eF=["fill","width","height"],nF={d:"M10,17L15,12L10,7V17Z"},iF={key:0};function rF(t,e,i,a,c,f){return mt(),Yt("span",er(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon menu-right-icon",role:"img",onClick:e[0]||(e[0]=o=>t.$emit("click",o))}),[(mt(),Yt("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[_t("path",nF,[i.title?(mt(),Yt("title",iF,yn(i.title),1)):on("",!0)])],8,eF))],16,tF)}const M2=jn(JB,[["render",rF]]);function U_(){return{CloseIcon:NB,FullscreenIcon:w2,OffFullscreenIcon:C2,ToBackIcon:xB,ToFrontIcon:pB,ExpandedIcon:C2,CloseExpandedIcon:w2,DragIcon:WB,SidebarLeftExpandedIcon:I2,SidebarLeftCloseExpandedIcon:M2,SidebarRightExpandedIcon:M2,SidebarRightCloseExpandedIcon:I2}}const yM=t=>(lc("data-v-9a1e9a2c"),t=t(),uc(),t),oF={class:"sidebar-container--content"},aF={class:"draggable-sidebar"},sF={class:"draggable-sidebar-heading"},lF={class:"draggable-sidebar-heading__content"},uF={class:"draggable-sidebar-heading__title"},cF=yM(()=>_t("div",{class:"map-spacer"},null,-1)),hF=yM(()=>_t("hr",{class:"map-divider"},null,-1)),fF={class:"draggable-sidebar-content"},pF={key:0,class:"complex-button-close"},dF={key:0},mF={key:1},gF={name:"DraggableItemSideBar"},vF=Fi({...gF,props:{...O_,...N_,...R_,width:{type:[Number,String],default:"auto"},right:Boolean},emits:{...B_,...V_},setup(t,{emit:e}){const{CloseIcon:i,SidebarLeftExpandedIcon:a,SidebarLeftCloseExpandedIcon:c,SidebarRightExpandedIcon:f,SidebarRightCloseExpandedIcon:o,ToBackIcon:y,ToFrontIcon:_}=U_(),M=t,T=e,k=bs("containerId",$e(M.containerId||""));if(!k.value)throw"Not set container id";const{show:P}=z_(M,T),{zIndex:O,itemId:G}=L_(k.value,P),{isLast:H,isFirst:X,isHasItems:st,onToBack:K,onToFront:et}=D_(k.value,G.value),{expand:xt,toggle:Nt}=F_(M,T,!0),It=Ge(()=>!M.width||M.width=="auto"),St=P_;function Gt(){P.value=!1}const Dt=Ge(()=>{let Qt={};return Qt.zIndex=O.value,M.width&&M.width!="auto"&&(M.width&&!isNaN(+M.width)?Qt.width=M.width+"px":Qt.width=M.width),Qt});return(Qt,jt)=>$(P)?(mt(),Yt("div",{key:0,class:Zo(["sidebar-container",{expand:$(xt),"left-sidebar-container":!t.right,"right-sidebar-container":t.right,"auto-sidebar-container":It.value}]),style:Jr(Dt.value)},[_t("div",oF,[(mt(),Oe(oc($(St)),{width:"100%",height:"100%"},{default:se(()=>[_t("div",aF,[Qt.disabledHeader?on("",!0):(mt(),Yt(ui,{key:0},[_t("div",sF,[_t("div",lF,[_t("div",uF,[Zn(Qt.$slots,"title",{},()=>[fa(yn(Qt.title),1)],!0)]),cF,Zn(Qt.$slots,"extra-btn",{},void 0,!0),$(st)&&!Qt.disabledOrder?(mt(),Yt(ui,{key:0},[zt(ns,{disabled:$(X),onClick:jt[0]||(jt[0]=Vt=>$(K)())},{default:se(()=>[zt($(y),{size:16})]),_:1},8,["disabled"]),zt(ns,{disabled:$(H),onClick:jt[1]||(jt[1]=Vt=>$(et)())},{default:se(()=>[zt($(_),{size:16})]),_:1},8,["disabled"])],64)):on("",!0),Qt.disabledClose?on("",!0):(mt(),Oe(ns,{key:1,onClick:Gt},{default:se(()=>[zt($(i),{size:16})]),_:1}))])]),hF],64)),_t("div",fF,[Zn(Qt.$slots,"default",{},void 0,!0)])])]),_:3}))]),$(P)&&!Qt.disabledExpand?(mt(),Yt("div",pF,[_t("button",{onClick:jt[2]||(jt[2]=(...Vt)=>$(Nt)&&$(Nt)(...Vt))},[t.right?(mt(),Yt("span",mF,[$(xt)?(mt(),Oe($(f),{key:0,size:16})):(mt(),Oe($(o),{key:1,size:16}))])):(mt(),Yt("span",dF,[$(xt)?(mt(),Oe($(a),{key:0,size:16})):(mt(),Oe($(c),{key:1,size:16}))]))])])):on("",!0)],6)):on("",!0)}}),yF=jn(vF,[["__scopeId","data-v-9a1e9a2c"]]);function E2(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function cm(t,e,i,a=1){const[c,f]=typeof a=="number"?[a,a]:a,o=Math.round(e/c/t[0])*t[0],y=Math.round(i/f/t[1])*t[1];return[o,y]}function hx(t,e,i){return t-e-i}function fx(t,e,i){return t-e-i}function Ku(t,e,i){return e!==null&&t<e?e:i!==null&&i<t?i:t}function S2(t,e,i){let a=t;const c=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(f=>E2(a[f]));if(!E2(a[c]))return!1;do{if(a[c](e))return!0;if(a===i)return!1;a=a.parentNode}while(a);return!1}function _F(t){const e=window.getComputedStyle(t);return[parseFloat(e.getPropertyValue("width"),10),parseFloat(e.getPropertyValue("height"),10)]}function Qp(t,e,i){t&&(t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,!0):t["on"+e]=i)}function Kh(t,e,i){t&&(t.detachEvent?t.detachEvent("on"+e,i):t.removeEventListener?t.removeEventListener(e,i,!0):t["on"+e]=null)}const xF=(t,e)=>{const i=t.__vccOpts||t;for(const[a,c]of e)i[a]=c;return i},C0={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},bF={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},AF={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let Qh=C0.mouse;const wF={replace:!0,name:"vue-draggable-resizable",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},h:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},minWidth:{type:Number,default:0,validator:t=>t>=0},minHeight:{type:Number,default:0,validator:t=>t>=0},maxWidth:{type:Number,default:null,validator:t=>t>=0},maxHeight:{type:Number,default:null,validator:t=>t>=0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:t=>typeof t=="string"?t==="auto":t>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:t=>{const e=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(t.filter(i=>e.has(i))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:t=>["x","y","both"].includes(t)},grid:{type:Array,default:()=>[1,1]},parent:{type:Boolean,default:!1},scale:{type:[Number,Array],default:1,validator:t=>typeof t=="number"?t>0:t.length===2&&t[0]>0&&t[1]>0},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,handle:null,enabled:this.active,resizing:!1,dragging:!1,dragEnable:!1,resizeEnable:!1,zIndex:this.z}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxHeight&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e;const[i,a]=_F(this.$el);this.aspectFactor=(this.w!=="auto"?this.w:i)/(this.h!=="auto"?this.h:a),this.width=this.w!=="auto"?this.w:i,this.height=this.h!=="auto"?this.h:a,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.active&&this.$emit("activated"),Qp(document.documentElement,"mousedown",this.deselect),Qp(document.documentElement,"touchend touchcancel",this.deselect),Qp(window,"resize",this.checkParentSize)},beforeUnmount:function(){Kh(document.documentElement,"mousedown",this.deselect),Kh(document.documentElement,"touchstart",this.handleUp),Kh(document.documentElement,"mousemove",this.move),Kh(document.documentElement,"touchmove",this.move),Kh(document.documentElement,"mouseup",this.handleUp),Kh(document.documentElement,"touchend touchcancel",this.deselect),Kh(window,"resize",this.checkParentSize)},methods:{resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top}},getParentSize(){if(this.parent){const t=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(t.getPropertyValue("width"),10),parseInt(t.getPropertyValue("height"),10)]}return[null,null]},elementTouchDown(t){Qh=C0.touch,this.elementDown(t)},elementMouseDown(t){Qh=C0.mouse,this.elementDown(t)},elementDown(t){if(t instanceof MouseEvent&&t.button!==0)return;const e=t.target||t.srcElement;if(this.$el.contains(e)){if(this.onDragStart(t)===!1)return;if(this.dragHandle&&!S2(e,this.dragHandle,this.$el)||this.dragCancel&&S2(e,this.dragCancel,this.$el)){this.dragging=!1;return}this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragEnable=!0),this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),Qp(document.documentElement,Qh.move,this.move),Qp(document.documentElement,Qh.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(t){const e=t.target||t.srcElement,i=new RegExp(this.className+"-([trmbl]{2})","");!this.$el.contains(e)&&!i.test(e.className)&&(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),Kh(document.documentElement,Qh.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown(t,e){Qh=C0.touch,this.handleDown(t,e)},handleDown(t,e){e instanceof MouseEvent&&e.which!==1||this.onResizeStart(t,e)!==!1&&(e.stopPropagation&&e.stopPropagation(),this.lockAspectRatio&&!t.includes("m")?this.handle="m"+t.substring(1):this.handle=t,this.resizeEnable=!0,this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),Qp(document.documentElement,Qh.move,this.handleResize),Qp(document.documentElement,Qh.stop,this.handleUp))},calcResizeLimits(){let t=this.minW,e=this.minH,i=this.maxW,a=this.maxH;const c=this.aspectFactor,[f,o]=this.grid,y=this.width,_=this.height,M=this.left,T=this.top,k=this.right,P=this.bottom;this.lockAspectRatio&&(t/e>c?e=t/c:t=c*e,i&&a?(i=Math.min(i,c*a),a=Math.min(a,i/c)):i?a=i/c:a&&(i=c*a)),i=i-i%f,a=a-a%o;const O={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(O.minLeft=M%f,O.maxLeft=M+Math.floor((y-t)/f)*f,O.minTop=T%o,O.maxTop=T+Math.floor((_-e)/o)*o,O.minRight=k%f,O.maxRight=k+Math.floor((y-t)/f)*f,O.minBottom=P%o,O.maxBottom=P+Math.floor((_-e)/o)*o,i&&(O.minLeft=Math.max(O.minLeft,this.parentWidth-k-i),O.minRight=Math.max(O.minRight,this.parentWidth-M-i)),a&&(O.minTop=Math.max(O.minTop,this.parentHeight-P-a),O.minBottom=Math.max(O.minBottom,this.parentHeight-T-a)),this.lockAspectRatio&&(O.minLeft=Math.max(O.minLeft,M-T*c),O.minTop=Math.max(O.minTop,T-M/c),O.minRight=Math.max(O.minRight,k-P*c),O.minBottom=Math.max(O.minBottom,P-k/c))):(O.minLeft=null,O.maxLeft=M+Math.floor((y-t)/f)*f,O.minTop=null,O.maxTop=T+Math.floor((_-e)/o)*o,O.minRight=null,O.maxRight=k+Math.floor((y-t)/f)*f,O.minBottom=null,O.maxBottom=P+Math.floor((_-e)/o)*o,i&&(O.minLeft=-(k+i),O.minRight=-(M+i)),a&&(O.minTop=-(P+a),O.minBottom=-(T+a)),this.lockAspectRatio&&i&&a&&(O.minLeft=Math.min(O.minLeft,-(k+i)),O.minTop=Math.min(O.minTop,-(a+P)),O.minRight=Math.min(O.minRight,-M-i),O.minBottom=Math.min(O.minBottom,-T-a))),O},move(t){this.resizing?this.handleResize(t):this.dragEnable&&this.handleDrag(t)},handleDrag(t){const e=this.axis,i=this.grid,a=this.bounds,c=this.mouseClickPosition,f=e&&e!=="y"?c.mouseX-(t.touches?t.touches[0].pageX:t.pageX):0,o=e&&e!=="x"?c.mouseY-(t.touches?t.touches[0].pageY:t.pageY):0,[y,_]=cm(i,f,o,this.scale),M=Ku(c.left-y,a.minLeft,a.maxLeft),T=Ku(c.top-_,a.minTop,a.maxTop);if(this.onDrag(M,T)===!1)return;const k=Ku(c.right+y,a.minRight,a.maxRight),P=Ku(c.bottom+_,a.minBottom,a.maxBottom);this.left=M,this.top=T,this.right=k,this.bottom=P,this.$emit("dragging",this.left,this.top),this.dragging=!0},moveHorizontally(t){const[e,i]=cm(this.grid,t,this.top,1),a=Ku(e,this.bounds.minLeft,this.bounds.maxLeft);this.left=a,this.right=this.parentWidth-this.width-a},moveVertically(t){const[e,i]=cm(this.grid,this.left,t,1),a=Ku(i,this.bounds.minTop,this.bounds.maxTop);this.top=a,this.bottom=this.parentHeight-this.height-a},handleResize(t){let e=this.left,i=this.top,a=this.right,c=this.bottom;const f=this.mouseClickPosition,o=this.aspectFactor,y=f.mouseX-(t.touches?t.touches[0].pageX:t.pageX),_=f.mouseY-(t.touches?t.touches[0].pageY:t.pageY);!this.widthTouched&&y&&(this.widthTouched=!0),!this.heightTouched&&_&&(this.heightTouched=!0);const[M,T]=cm(this.grid,y,_,this.scale);this.handle.includes("b")?(c=Ku(f.bottom+T,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(a=this.right-(this.bottom-c)*o)):this.handle.includes("t")&&(i=Ku(f.top-T,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(e=this.left-(this.top-i)*o)),this.handle.includes("r")?(a=Ku(f.right+M,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(c=this.bottom-(this.right-a)/o)):this.handle.includes("l")&&(e=Ku(f.left-M,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(i=this.top-(this.left-e)/o));const k=hx(this.parentWidth,e,a),P=fx(this.parentHeight,i,c);this.onResize(this.handle,e,i,k,P)!==!1&&(this.left=e,this.top=i,this.right=a,this.bottom=c,this.width=k,this.height=P,this.$emit("resizing",this.left,this.top,this.width,this.height),this.resizing=!0)},changeWidth(t){const[e,i]=cm(this.grid,t,0,1),a=Ku(this.parentWidth-e-this.left,this.bounds.minRight,this.bounds.maxRight);let c=this.bottom;this.lockAspectRatio&&(c=this.bottom-(this.right-a)/this.aspectFactor);const f=hx(this.parentWidth,this.left,a),o=fx(this.parentHeight,this.top,c);this.right=a,this.bottom=c,this.width=f,this.height=o},changeHeight(t){const[e,i]=cm(this.grid,0,t,1),a=Ku(this.parentHeight-i-this.top,this.bounds.minBottom,this.bounds.maxBottom);let c=this.right;this.lockAspectRatio&&(c=this.right-(this.bottom-a)*this.aspectFactor);const f=hx(this.parentWidth,this.left,c),o=fx(this.parentHeight,this.top,a);this.right=c,this.bottom=a,this.width=f,this.height=o},handleUp(t){this.handle=null,this.resetBoundsAndMouseState(),this.dragEnable=!1,this.resizeEnable=!1,this.resizing&&(this.resizing=!1,this.$emit("resizeStop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragStop",this.left,this.top)),Kh(document.documentElement,Qh.move,this.handleResize)}},computed:{style(){return{transform:`translate(${this.left}px, ${this.top}px)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,...this.dragging&&this.disableUserSelect?bF:AF}},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return this.w==="auto"&&!this.widthTouched?"auto":this.width+"px"},computedHeight(){return this.h==="auto"&&!this.heightTouched?"auto":this.height+"px"},minW(){return this.minWidth},minH(){return this.minHeight},maxW(){return this.maxWidth},maxH(){return this.maxHeight},resizingOnX(){return!!this.handle&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return!!this.handle&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return!!this.handle&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(t){this.enabled=t,t?this.$emit("activated"):this.$emit("deactivated")},z(t){(t>=0||t==="auto")&&(this.zIndex=t)},x(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(t))},y(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(t))},lockAspectRatio(t){t?this.aspectFactor=this.width/this.height:this.aspectFactor=void 0},w(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(t))},h(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(t))}}},CF=["onMousedown","onTouchstart"];function IF(t,e,i,a,c,f){return mt(),Yt("div",{style:Jr(f.style),class:Zo([{[i.classNameActive]:t.enabled,[i.classNameDragging]:t.dragging,[i.classNameResizing]:t.resizing,[i.classNameDraggable]:i.draggable,[i.classNameResizable]:i.resizable},i.className]),onMousedown:e[0]||(e[0]=(...o)=>f.elementMouseDown&&f.elementMouseDown(...o)),onTouchstart:e[1]||(e[1]=(...o)=>f.elementTouchDown&&f.elementTouchDown(...o))},[(mt(!0),Yt(ui,null,$o(f.actualHandles,o=>(mt(),Yt("div",{key:o,class:Zo([i.classNameHandle,i.classNameHandle+"-"+o]),style:Jr({display:t.enabled?"block":"none"}),onMousedown:_o(y=>f.handleDown(o,y),["stop","prevent"]),onTouchstart:_o(y=>f.handleTouchDown(o,y),["stop","prevent"])},[Zn(t.$slots,o)],46,CF))),128)),Zn(t.$slots,"default")],38)}const _M=xF(wF,[["render",IF]]);function rb(t){rb.installed||(rb.installed=!0,t.component("VueDraggableResizable",_M))}const MF={install:rb};let Y0=null;typeof window<"u"?Y0=window.Vue:typeof global<"u"&&(Y0=global.Vue);Y0&&Y0.use(MF);const oA=t=>(lc("data-v-e9a0005a"),t=t(),uc(),t),EF={class:"draggable-popup-desktop"},SF={class:"draggable-popup-desktop-heading"},TF={class:"draggable-popup-desktop-heading__content"},kF={class:"draggable-popup-desktop-heading__icon"},PF=oA(()=>_t("div",{class:"drag grabbing"},null,-1)),LF={class:"draggable-popup-desktop-heading__title"},DF=oA(()=>_t("div",{class:"map-spacer"},null,-1)),RF=oA(()=>_t("hr",{class:"map-divider"},null,-1)),zF={class:"draggable-popup-desktop-content"},OF={name:"DraggableItemPopup"},BF=Fi({...OF,props:{...O_,...N_,...R_,sticks:{type:Array,default:()=>["bl","br"]},top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},centerX:Boolean,centerY:Boolean,center:Boolean},emits:{...B_,...V_},setup(t,{emit:e}){const{CloseIcon:i,CloseExpandedIcon:a,DragIcon:c,ExpandedIcon:f,ToBackIcon:o,ToFrontIcon:y}=U_(),_=t,M=e,T=bs("containerId",$e(_.containerId||""));if(!T.value)throw"Not set container id";const{show:k}=z_(_,M),{zIndex:P,itemId:O}=L_(T.value,k),{containerWidth:G,containerHeight:H}=aB(T.value),{isLast:X,isFirst:st,isHasItems:K,onToBack:et,onToFront:xt}=D_(T.value,O.value),Nt=$e(!1),It=$e(!1),St=$e(_.height||200),Gt=$e(St.value),Dt=$e(_.width||200),Qt=$e(0),jt=$e(0),{expand:Vt}=F_(_,M,!0);function Bt(){It.value=!0}function de(){It.value=!1}const An=P_;function _e(oi,Vn,gn,Qn){Dt.value=gn,St.value=Qn}function He(){k.value=!1}pl(k,()=>{Ue()},{immediate:!0});function Ue(){Nt.value=!1,k&&(_.left!=null&&(Qt.value=_.left),_.top!=null&&(jt.value=_.top),_.right&&(Qt.value=G.value-_.right-Dt.value),_.bottom&&(jt.value=H.value-_.bottom-St.value),(_.center||_.centerX)&&(Qt.value=(G.value-Dt.value)/2),(_.center||_.centerY)&&(jt.value=(H.value-St.value)/2),Nt.value=!0)}function ki(){Vt.value&&St.value>50&&(Gt.value=St.value),Vt.value=!Vt.value,St.value=Vt.value?Gt.value:50}return(oi,Vn)=>$(k)&&Nt.value?(mt(),Oe($(_M),er({key:0},oi.$attrs,{dragHandle:".drag",parent:!0,handles:t.sticks,w:Dt.value,h:St.value,x:Qt.value,y:jt.value,z:$(P),onResizing:_e,active:It.value,onActivated:Vn[2]||(Vn[2]=gn=>Bt()),onDeactivated:Vn[3]||(Vn[3]=gn=>de())}),{default:se(()=>[(mt(),Oe(oc($(An)),{width:Dt.value,height:St.value},{default:se(()=>[_t("div",EF,[oi.disabledHeader?on("",!0):(mt(),Yt(ui,{key:0},[_t("div",SF,[_t("div",TF,[_t("div",kF,[zt($(c),{size:16}),PF]),_t("div",LF,[Zn(oi.$slots,"title",{},()=>[fa(yn(oi.title),1)],!0)]),DF,Zn(oi.$slots,"extra-btn",{},void 0,!0),$(K)&&!oi.disabledOrder?(mt(),Yt(ui,{key:0},[zt(ns,{disabled:$(st),onClick:Vn[0]||(Vn[0]=gn=>$(et)())},{default:se(()=>[zt($(o),{size:16})]),_:1},8,["disabled"]),zt(ns,{disabled:$(X),onClick:Vn[1]||(Vn[1]=gn=>$(xt)())},{default:se(()=>[zt($(y),{size:16})]),_:1},8,["disabled"])],64)):on("",!0),zt(ns,{onClick:ki},{default:se(()=>[$(Vt)?(mt(),Oe($(f),{key:0,size:16})):(mt(),Oe($(a),{key:1,size:16}))]),_:1}),oi.disabledClose?on("",!0):(mt(),Oe(ns,{key:1,onClick:He},{default:se(()=>[zt($(i),{size:16})]),_:1}))])]),RF],64)),ac(_t("div",zF,[Zn(oi.$slots,"default",{},void 0,!0)],512),[[hI,$(Vt)]])])]),_:3},8,["width","height"]))]),_:3},16,["handles","w","h","x","y","z","active"])):on("",!0)}}),FF=jn(BF,[["__scopeId","data-v-e9a0005a"]]),j_=t=>(lc("data-v-2e08de54"),t=t(),uc(),t),NF={class:"draggable-float"},VF={class:"draggable-float-heading"},UF={class:"draggable-float-heading__content"},jF={class:"draggable-float-heading__title"},HF=j_(()=>_t("div",{class:"map-spacer"},null,-1)),GF=j_(()=>_t("hr",{class:"map-divider"},null,-1)),qF={class:"draggable-float-heading"},WF={class:"draggable-float-heading__content"},ZF={class:"draggable-float-heading__title"},$F=j_(()=>_t("div",{class:"map-spacer"},null,-1)),YF=j_(()=>_t("hr",{class:"map-divider"},null,-1)),XF={name:"DraggableItemFloat"},KF=Fi({...XF,props:{...O_,...N_,...R_,top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:[Number,String],default:"auto"},maxHeight:{type:Number,default:500},headerLocation:{type:String,default:"top",validator:function(t){return["top","bottom"].includes(t)}}},emits:{...B_,...V_},setup(t,{emit:e}){const{CloseIcon:i,ToBackIcon:a,ToFrontIcon:c,ExpandedIcon:f,CloseExpandedIcon:o}=U_(),y=t,_=e,M=bs("containerId",$e(y.containerId||""));if(!M.value)throw"Not set container id";const{show:T}=z_(y,_),{zIndex:k,itemId:P}=L_(M.value,T),{isLast:O,isFirst:G,isHasItems:H,onToBack:X,onToFront:st}=D_(M.value,P.value),{expand:K,toggle:et}=F_(y,_,!0),xt=P_;function Nt(){T.value=!1}const It=Ge(()=>{let Dt={};return Dt.zIndex=k.value,y.top&&(Dt.top=y.top+"px"),y.left&&(Dt.left=y.left+"px"),y.right&&(Dt.right=y.right+"px"),y.bottom&&(Dt.bottom=y.bottom+"px"),y.width&&y.width!="auto"&&(y.width&&!isNaN(+y.width)?Dt.width=y.width+"px":Dt.width=y.width),Dt}),St=Ge(()=>{let Dt={};return Dt.maxHeight=y.maxHeight+"px",Dt}),Gt=Ge(()=>!y.width||y.width=="auto");return(Dt,Qt)=>$(T)?(mt(),Yt("div",{key:0,class:Zo(["float-container",{"auto-float-container":Gt.value}]),style:Jr(It.value)},[(mt(),Oe(oc($(xt)),null,{default:se(()=>[_t("div",NF,[!Dt.disabledHeader&&t.headerLocation==="top"?(mt(),Yt(ui,{key:0},[_t("div",VF,[_t("div",UF,[_t("div",jF,[Zn(Dt.$slots,"title",{},()=>[fa(yn(Dt.title),1)],!0)]),HF,Zn(Dt.$slots,"extra-btn",{},void 0,!0),zt(ns,{onClick:$(et)},{default:se(()=>[$(K)?(mt(),Oe($(f),{key:0,size:16})):(mt(),Oe($(o),{key:1,size:16}))]),_:1},8,["onClick"]),$(H)&&!Dt.disabledOrder?(mt(),Yt(ui,{key:0},[zt(ns,{disabled:$(G),onClick:Qt[0]||(Qt[0]=jt=>$(X)())},{default:se(()=>[zt($(a),{size:16})]),_:1},8,["disabled"]),zt(ns,{disabled:$(O),onClick:Qt[1]||(Qt[1]=jt=>$(st)())},{default:se(()=>[zt($(c),{size:16})]),_:1},8,["disabled"])],64)):on("",!0),Dt.disabledClose?on("",!0):(mt(),Oe(ns,{key:1,onClick:Nt},{default:se(()=>[zt($(i),{size:16})]),_:1}))])]),GF],64)):on("",!0),ac(_t("div",{class:"draggable-float-content",style:Jr(St.value)},[Zn(Dt.$slots,"default",{},void 0,!0)],4),[[hI,$(K)]]),!Dt.disabledHeader&&t.headerLocation==="bottom"?(mt(),Yt(ui,{key:1},[_t("div",qF,[_t("div",WF,[_t("div",ZF,[Zn(Dt.$slots,"title",{},()=>[fa(yn(Dt.title),1)],!0)]),$F,Zn(Dt.$slots,"extra-btn",{},void 0,!0),zt(ns,{onClick:$(et)},{default:se(()=>[$(K)?(mt(),Oe($(f),{key:0,size:16})):(mt(),Oe($(o),{key:1,size:16}))]),_:1},8,["onClick"]),$(H)&&!Dt.disabledOrder?(mt(),Yt(ui,{key:0},[zt(ns,{disabled:$(G),onClick:Qt[2]||(Qt[2]=jt=>$(X)())},{default:se(()=>[zt($(a),{size:16})]),_:1},8,["disabled"]),zt(ns,{disabled:$(O),onClick:Qt[3]||(Qt[3]=jt=>$(st)())},{default:se(()=>[zt($(c),{size:16})]),_:1},8,["disabled"])],64)):on("",!0),Dt.disabledClose?on("",!0):(mt(),Oe(ns,{key:1,onClick:Nt},{default:se(()=>[zt($(i),{size:16})]),_:1}))])]),YF],64)):on("",!0)])]),_:3}))],6)):on("",!0)}}),QF=jn(KF,[["__scopeId","data-v-2e08de54"]]),aA=t=>(lc("data-v-da4fd529"),t=t(),uc(),t),JF={class:"draggable-bottom"},t9={class:"draggable-bottom-heading"},e9={class:"draggable-bottom-heading__title"},n9=aA(()=>_t("div",{class:"draggable-bottom-heading__content"},null,-1)),i9=aA(()=>_t("div",{class:"map-spacer"},null,-1)),r9=aA(()=>_t("hr",{class:"map-divider"},null,-1)),o9={class:"draggable-bottom-content"},a9={name:"DraggableItemBottom"},s9=Fi({...a9,props:{...O_,...N_,...R_},emits:{...B_,...V_},setup(t,{emit:e}){const{CloseIcon:i,ToBackIcon:a,FullscreenIcon:c,OffFullscreenIcon:f}=U_(),o=t,y=e,_=bs("containerId",$e(o.containerId||""));if(!_.value)throw"Not set container id";const{show:M}=z_(o,y),{zIndex:T,itemId:k}=L_(_.value,M),{isFirst:P,isHasItems:O,onToBack:G}=D_(_.value,k.value),{expand:H,toggle:X}=F_(o,y,!1),st=P_;function K(){M.value=!1}const et=Ge(()=>{let xt={};return xt.zIndex=T.value,xt.height=H.value?"100%":"45%",xt});return(xt,Nt)=>$(M)?(mt(),Yt("div",{key:0,class:"popup-mobile-container",style:Jr(et.value)},[(mt(),Oe(oc($(st)),null,{default:se(()=>[_t("div",JF,[xt.disabledHeader?on("",!0):(mt(),Yt(ui,{key:0},[_t("div",t9,[_t("div",e9,[Zn(xt.$slots,"title",{},()=>[fa(yn(xt.title),1)],!0)]),n9,i9,Zn(xt.$slots,"extra-btn",{},void 0,!0),$(O)&&!xt.disabledOrder?(mt(),Oe(ns,{key:0,disabled:$(P),onClick:Nt[0]||(Nt[0]=_o(It=>$(G)(),["prevent","stop"]))},{default:se(()=>[zt($(a),{size:16})]),_:1},8,["disabled"])):on("",!0),zt(ns,{onClick:Nt[1]||(Nt[1]=It=>$(X)())},{default:se(()=>[$(H)?(mt(),Oe($(c),{key:0,size:16})):(mt(),Oe($(f),{key:1,size:16}))]),_:1}),xt.disabledClose?on("",!0):(mt(),Oe(ns,{key:1,onClick:K},{default:se(()=>[zt($(i),{size:16})]),_:1}))]),r9],64)),_t("div",o9,[Zn(xt.$slots,"default",{},void 0,!0)])])]),_:3}))],4)):on("",!0)}}),sA=jn(s9,[["__scopeId","data-v-da4fd529"]]);function lA(t,e){return Fi({name:"WithMobileHandle"+t.name,props:{containerId:String},setup(i){const a=bs("containerId",$e(i.containerId||"")),c=Ge(()=>br.getters.getIsMobile(a.value));return{p_containerId:a,isMobile:c}},render(){return this.isMobile?_v(e,{...this.$attrs,containerId:this.p_containerId},this.$slots):_v(t,{...this.$attrs,containerId:this.p_containerId},this.$slots)}})}const xM=lA(yF,sA),pf=lA(FF,sA);lA(QF,sA);const l9={class:"module__container"},u9={name:"ModuleContainer"},c9=Object.assign(u9,{props:{mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}},setup(t){const e=TT(),i=t,a=Ge(()=>!!e.btn),c=Ge(()=>!!e.draggable),f=bs("$map.dragId"),o=bs("$map.id"),y=Ge(()=>i.dragId||f),_=Ge(()=>i.mapId||o),M=Ge(()=>`#map-draggable-${_.value}`),T=Ge(()=>`#${i.position}-${_.value}`),k=Ge(()=>{let P={};return i.position.includes("left")&&(P.left=18+i.btnWidth),i.position.includes("right")&&(P.right=18+i.btnWidth),i.position.includes("top")&&(P.top=10),i.position.includes("bottom")&&(P.bottom=10),P.containerId=y.value,P});return(P,O)=>(mt(),Yt("div",l9,[t.controlVisible&&a.value?(mt(),Oe(cw,{key:0,to:T.value},[Zn(P.$slots,"btn",{},void 0,!0)],8,["to"])):on("",!0),Zn(P.$slots,"default",{},void 0,!0),y.value&&c.value?(mt(),Oe(cw,{key:1,to:M.value},[Zn(P.$slots,"draggable",La(ma(k.value)),void 0,!0)],8,["to"])):on("",!0)]))}}),Da=jn(c9,[["__scopeId","data-v-8a8e6131"]]),h9={class:"crs-container"},f9={class:"grow"},p9={class:"crs-item-header"},d9={class:"crs-item-header__title"},m9={class:"crs-item-header__action"},g9=["onClick"],v9={class:"crs-item"},y9={key:0},_9={key:1},x9={class:"crs-item__add"},b9=Fi({__name:"CrsControl",props:{...os},setup(t){const{getCrsItems:e,setCrsItems:i}=Gb,a=t,{mapId:c,moduleContainerProps:f}=Eo(a),{trans:o,setLocale:y}=ga(c.value);y({map:{"crs-control":{title:"Crs setting",field:{name:"name",unit:"unit",epsg:"epsg",proj4js:"proj4js"}}}});const[_,M]=fd(!1);function T(){M(!_.value)}const k=Ge(()=>e(c.value)),P=[{text:"degree",value:"degree"},{text:"meter",value:"meter"}],O={delete:Um,plus:_p},G=X=>{i(c.value,k.value.filter(st=>st.epsg!==X.epsg))},H=()=>{k.value.push({name:"",unit:"degree",epsg:""})};return(X,st)=>(mt(),Oe(Da,La(ma($(f))),{btn:se(()=>[zt(Tr,{onClick:_o(T,["stop"]),tooltip:$(o)("map.crs-control.title")},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:$(_4)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:se(K=>[$(_)?(mt(),Oe($(pf),er({key:0,height:200,width:400},K,{show:$(_),"onUpdate:show":st[1]||(st[1]=et=>Pa(_)?_.value=et:null),title:$(o)("map.crs-control.title")}),{default:se(()=>[_t("div",h9,[_t("div",f9,[(mt(!0),Yt(ui,null,$o(k.value,et=>(mt(),Oe($(nb),{key:et.epsg,selected:!1},{header:se(()=>[_t("div",p9,[_t("div",d9,yn(et.name),1),_t("div",m9,[et.default?on("",!0):(mt(),Yt("button",{key:0,class:"clickable",onClick:_o(xt=>G(et),["stop"])},[zt($(Bn),{size:"14",type:"mdi",path:O.delete},null,8,["path"])],8,g9))])])]),default:se(()=>[_t("div",v9,[_t("div",null,[zt($(Oo),{readonly:et.default,modelValue:et.name,"onUpdate:modelValue":xt=>et.name=xt,label:$(o)("map.crs-control.field.name")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),_t("div",null,[zt($(Oo),{readonly:et.default,modelValue:et.epsg,"onUpdate:modelValue":xt=>et.epsg=xt,label:$(o)("map.crs-control.field.epsg")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),et.default?on("",!0):(mt(),Yt("div",y9,[zt($(Oo),{modelValue:et.proj4js,"onUpdate:modelValue":xt=>et.proj4js=xt,label:$(o)("map.crs-control.field.proj4js")},null,8,["modelValue","onUpdate:modelValue","label"])])),et.default?on("",!0):(mt(),Yt("div",_9,[zt($(qm),{modelValue:et.unit,"onUpdate:modelValue":xt=>et.unit=xt,label:$(o)("map.crs-control.field.unit"),items:P},null,8,["modelValue","onUpdate:modelValue","label"])]))])]),_:2},1024))),128))]),_t("div",x9,[_t("button",{class:"layer-item__button clickable",onClick:st[0]||(st[0]=_o(et=>H(),["stop"]))},[zt($(Bn),{size:"14",type:"mdi",path:O.plus},null,8,["path"])])])])]),_:2},1040,["show","title"])):on("",!0)]),default:se(()=>[Zn(X.$slots,"default",{},void 0,!0)]),_:3},16))}}),A9=jn(b9,[["__scopeId","data-v-35f4b793"]]),H_=Hm?window:void 0,uA=Hm?window.document:void 0,cA=Hm?window.navigator:void 0;function Bc(...t){let e,i,a,c;if(typeof t[0]=="string"||Array.isArray(t[0])?([i,a,c]=t,e=H_):[e,i,a,c]=t,!e)return w0;Array.isArray(i)||(i=[i]),Array.isArray(a)||(a=[a]);const f=[],o=()=>{f.forEach(T=>T()),f.length=0},y=(T,k,P,O)=>(T.addEventListener(k,P,O),()=>T.removeEventListener(k,P,O)),_=pl(()=>[ip(e),Uc(c)],([T,k])=>{if(o(),!T)return;const P=Iz(k)?{...k}:k;f.push(...i.flatMap(O=>a.map(G=>y(T,O,G,P))))},{immediate:!0,flush:"post"}),M=()=>{_(),o()};return vd(M),M}let T2=!1;function w9(t,e,i={}){const{window:a=H_,ignore:c=[],capture:f=!0,detectIframe:o=!1}=i;if(!a)return w0;Ez&&!T2&&(T2=!0,Array.from(a.document.body.children).forEach(P=>P.addEventListener("click",w0)),a.document.documentElement.addEventListener("click",w0));let y=!0;const _=P=>c.some(O=>{if(typeof O=="string")return Array.from(a.document.querySelectorAll(O)).some(G=>G===P.target||P.composedPath().includes(G));{const G=ip(O);return G&&(P.target===G||P.composedPath().includes(G))}}),T=[Bc(a,"click",P=>{const O=ip(t);if(!(!O||O===P.target||P.composedPath().includes(O))){if(P.detail===0&&(y=!_(P)),!y){y=!0;return}e(P)}},{passive:!0,capture:f}),Bc(a,"pointerdown",P=>{const O=ip(t);y=!_(P)&&!!(O&&!P.composedPath().includes(O))},{passive:!0}),o&&Bc(a,"blur",P=>{setTimeout(()=>{var G;const O=ip(t);((G=a.document.activeElement)==null?void 0:G.tagName)==="IFRAME"&&!(O!=null&&O.contains(a.document.activeElement))&&e(P)},0)})].filter(Boolean);return()=>T.forEach(P=>P())}function C9(){const t=$e(!1),e=Vm();return e&&ml(()=>{t.value=!0},e),t}function Uv(t){const e=C9();return Ge(()=>(e.value,!!t()))}function Og(t,e={}){const{window:i=H_}=e,a=Uv(()=>i&&"matchMedia"in i&&typeof i.matchMedia=="function");let c;const f=$e(!1),o=M=>{f.value=M.matches},y=()=>{c&&("removeEventListener"in c?c.removeEventListener("change",o):c.removeListener(o))},_=YT(()=>{a.value&&(y(),c=i.matchMedia(Uc(t)),"addEventListener"in c?c.addEventListener("change",o):c.addListener(o),f.value=c.matches)});return vd(()=>{_(),y(),c=void 0}),f}function bM(t,e={}){function i(T,k){let P=Uc(t[Uc(T)]);return k!=null&&(P=kz(P,k)),typeof P=="number"&&(P=`${P}px`),P}const{window:a=H_,strategy:c="min-width"}=e;function f(T){return a?a.matchMedia(T).matches:!1}const o=T=>Og(()=>`(min-width: ${i(T)})`,e),y=T=>Og(()=>`(max-width: ${i(T)})`,e),_=Object.keys(t).reduce((T,k)=>(Object.defineProperty(T,k,{get:()=>c==="min-width"?o(k):y(k),enumerable:!0,configurable:!0}),T),{});function M(){const T=Object.keys(t).map(k=>[k,o(k)]);return Ge(()=>T.filter(([,k])=>k.value).map(([k])=>k))}return Object.assign(_,{greaterOrEqual:o,smallerOrEqual:y,greater(T){return Og(()=>`(min-width: ${i(T,.1)})`,e)},smaller(T){return Og(()=>`(max-width: ${i(T,-.1)})`,e)},between(T,k){return Og(()=>`(min-width: ${i(T)}) and (max-width: ${i(k,-.1)})`,e)},isGreater(T){return f(`(min-width: ${i(T,.1)})`)},isGreaterOrEqual(T){return f(`(min-width: ${i(T)})`)},isSmaller(T){return f(`(max-width: ${i(T,-.1)})`)},isSmallerOrEqual(T){return f(`(max-width: ${i(T)})`)},isInBetween(T,k){return f(`(min-width: ${i(T)}) and (max-width: ${i(k,-.1)})`)},current:M,active(){const T=M();return Ge(()=>T.value.length===0?"":T.value[T.value.length-1])}})}function k2(t,e={}){const{controls:i=!1,navigator:a=cA}=e,c=Uv(()=>a&&"permissions"in a);let f;const o=typeof t=="string"?{name:t}:t,y=$e(),_=()=>{f&&(y.value=f.state)},M=Tz(async()=>{if(c.value){if(!f)try{f=await a.permissions.query(o),Bc(f,"change",_),_()}catch{y.value="prompt"}return f}});return M(),i?{state:y,isSupported:c,query:M}:y}function I9(t={}){const{navigator:e=cA,read:i=!1,source:a,copiedDuring:c=1500,legacy:f=!0}=t,o=Uv(()=>e&&"clipboard"in e),y=k2("clipboard-read"),_=k2("clipboard-write"),M=Ge(()=>o.value||f),T=$e(""),k=$e(!1),P=Lz(()=>k.value=!1,c);function O(){o.value&&st(y.value)?e.clipboard.readText().then(K=>{T.value=K}):T.value=X()}M.value&&i&&Bc(["copy","cut"],O);async function G(K=Uc(a)){M.value&&K!=null&&(o.value&&st(_.value)?await e.clipboard.writeText(K):H(K),T.value=K,k.value=!0,P.start())}function H(K){const et=document.createElement("textarea");et.value=K??"",et.style.position="absolute",et.style.opacity="0",document.body.appendChild(et),et.select(),document.execCommand("copy"),et.remove()}function X(){var K,et;return((et=(K=document==null?void 0:document.getSelection)==null?void 0:K.call(document))==null?void 0:et.toString())??""}function st(K){return K==="granted"||K==="prompt"}return{isSupported:M,text:T,copied:k,copy:G}}function M9(t,e={}){const i=$e(!1),a=Pv(null);let c=0,f=!0;if(Hm){const o=typeof e=="function"?{onDrop:e}:e,y=_=>{var T;const M=Array.from(((T=_.dataTransfer)==null?void 0:T.files)??[]);return a.value=M.length===0?null:M};Bc(t,"dragenter",_=>{var T,k;const M=Array.from(((T=_==null?void 0:_.dataTransfer)==null?void 0:T.items)||[]).map(P=>P.kind==="file"?P.type:null).filter(wz);if(o.dataTypes&&_.dataTransfer){const P=$(o.dataTypes);if(f=typeof P=="function"?P(M):P?P.some(O=>M.includes(O)):!0,!f)return}_.preventDefault(),c+=1,i.value=!0,(k=o.onEnter)==null||k.call(o,y(_),_)}),Bc(t,"dragover",_=>{var M;f&&(_.preventDefault(),(M=o.onOver)==null||M.call(o,y(_),_))}),Bc(t,"dragleave",_=>{var M;f&&(_.preventDefault(),c-=1,c===0&&(i.value=!1),(M=o.onLeave)==null||M.call(o,y(_),_))}),Bc(t,"drop",_=>{var M;_.preventDefault(),c=0,i.value=!1,(M=o.onDrop)==null||M.call(o,y(_),_)})}return{files:a,isOverDropZone:i}}const P2=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function E9(t,e={}){const{document:i=uA,autoExit:a=!1}=e,c=Ge(()=>ip(t)??(i==null?void 0:i.querySelector("html"))),f=$e(!1),o=Ge(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(st=>i&&st in i||c.value&&st in c.value)),y=Ge(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(st=>i&&st in i||c.value&&st in c.value)),_=Ge(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(st=>i&&st in i||c.value&&st in c.value)),M=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(st=>i&&st in i),T=Uv(()=>c.value&&i&&o.value!==void 0&&y.value!==void 0&&_.value!==void 0),k=()=>M?(i==null?void 0:i[M])===c.value:!1,P=()=>{if(_.value){if(i&&i[_.value]!=null)return i[_.value];{const st=c.value;if((st==null?void 0:st[_.value])!=null)return!!st[_.value]}}return!1};async function O(){if(!(!T.value||!f.value)){if(y.value)if((i==null?void 0:i[y.value])!=null)await i[y.value]();else{const st=c.value;(st==null?void 0:st[y.value])!=null&&await st[y.value]()}f.value=!1}}async function G(){if(!T.value||f.value)return;P()&&await O();const st=c.value;o.value&&(st==null?void 0:st[o.value])!=null&&(await st[o.value](),f.value=!0)}async function H(){await(f.value?O():G())}const X=()=>{const st=P();(!st||st&&k())&&(f.value=st)};return Bc(i,P2,X,!1),Bc(()=>ip(c),P2,X,!1),a&&vd(O),{isSupported:T,isFullscreen:f,enter:G,exit:O,toggle:H}}function S9(t={}){const{enableHighAccuracy:e=!0,maximumAge:i=3e4,timeout:a=27e3,navigator:c=cA,immediate:f=!0}=t,o=Uv(()=>c&&"geolocation"in c),y=$e(null),_=Pv(null),M=$e({accuracy:0,latitude:Number.POSITIVE_INFINITY,longitude:Number.POSITIVE_INFINITY,altitude:null,altitudeAccuracy:null,heading:null,speed:null});function T(G){y.value=G.timestamp,M.value=G.coords,_.value=null}let k;function P(){o.value&&(k=c.geolocation.watchPosition(T,G=>_.value=G,{enableHighAccuracy:e,maximumAge:i,timeout:a}))}f&&P();function O(){k&&c&&c.geolocation.clearWatch(k)}return vd(()=>{O()}),{isSupported:o,coords:M,locatedAt:y,error:_,resume:P,pause:O}}const T9=Fi({__name:"FullScreenControl",props:{...os,type:{type:String,default:"body"}},setup(t){const e={fullscreen:m4,exitFullscreen:g4},i=t,{callMap:a,mapId:c,moduleContainerProps:f}=Eo(i),{trans:o,setLocale:y}=ga(c.value);y({map:{action:{"fullscreen-control-enter":"Enter fullscreen","fullscreen-control-exit":"Exit fullscreen"}}});const{isFullscreen:_,enter:M,exit:T,toggle:k}=E9(i.type=="body"?document.querySelector("body"):P());function P(O){return a(G=>{if(O||(O=G.getContainer()),O.classList.contains("map-container")||O.tagName==="BODY")return O;O=P(O.parentElement)}),O}return(O,G)=>(mt(),Oe(Da,La(ma($(f))),{btn:se(()=>[zt(Tr,{icon:"",title:$(_)?$(o)("map.action.fullscreen-control-exit"):$(o)("map.action.fullscreen-control-enter"),onClick:G[0]||(G[0]=H=>$(k)())},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:$(_)?e.exitFullscreen:e.fullscreen},null,8,["path"])]),_:1},8,["title"])]),default:se(()=>[Zn(O.$slots,"default")]),_:3},16))}});var AM={exports:{}};(function(t,e){(function(i,a){t.exports=a()})(_s,function(){var i,a,c;function f(o,y){if(!i)i=y;else if(!a)a=y;else{var _="var sharedChunk = {}; ("+i+")(sharedChunk); ("+a+")(sharedChunk);",M={};i(M),c=y(M),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}return f(["exports"],function(o){function y(n,r){return n(r={exports:{}},r.exports),r.exports}var _=M;function M(n,r,s,d){this.cx=3*n,this.bx=3*(s-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=d,this.p2x=s,this.p2y=d}M.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n},M.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n},M.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},M.prototype.solveCurveX=function(n,r){var s,d,v,x,A;for(r===void 0&&(r=1e-6),v=n,A=0;A<8;A++){if(x=this.sampleCurveX(v)-n,Math.abs(x)<r)return v;var S=this.sampleCurveDerivativeX(v);if(Math.abs(S)<1e-6)break;v-=x/S}if((v=n)<(s=0))return s;if(v>(d=1))return d;for(;s<d;){if(x=this.sampleCurveX(v),Math.abs(x-n)<r)return v;n>x?s=v:d=v,v=.5*(d-s)+s}return v},M.prototype.solve=function(n,r){return this.sampleCurveY(this.solveCurveX(n,r))};var T=k;function k(n,r){this.x=n,this.y=r}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,r){return this.clone()._rotateAround(n,r)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var r=n.x-this.x,s=n.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,r){return Math.atan2(this.x*r-this.y*n,this.x*n+this.y*r)},_matMult:function(n){var r=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=r,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var r=Math.cos(n),s=Math.sin(n),d=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=d,this},_rotateAround:function(n,r){var s=Math.cos(n),d=Math.sin(n),v=r.y+d*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-d*(this.y-r.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},k.convert=function(n){return n instanceof k?n:Array.isArray(n)?new k(n[0],n[1]):n};var P=typeof self<"u"?self:{},O=Math.pow(2,53)-1;function G(n,r,s,d){var v=new _(n,r,s,d);return function(x){return v.solve(x)}}var H=G(.25,.1,.25,1);function X(n,r,s){return Math.min(s,Math.max(r,n))}function st(n,r,s){var d=s-r,v=((n-r)%d+d)%d+r;return v===r?s:v}function K(n){for(var r=[],s=arguments.length-1;s-- >0;)r[s]=arguments[s+1];for(var d=0,v=r;d<v.length;d+=1){var x=v[d];for(var A in x)n[A]=x[A]}return n}var et=1;function xt(){return et++}function Nt(){return function n(r){return r?(r^16*Math.random()>>r/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}()}function It(n){return!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}function St(n,r){n.forEach(function(s){r[s]&&(r[s]=r[s].bind(r))})}function Gt(n,r){return n.indexOf(r,n.length-r.length)!==-1}function Dt(n,r,s){var d={};for(var v in n)d[v]=r.call(s||this,n[v],v,n);return d}function Qt(n,r,s){var d={};for(var v in n)r.call(s||this,n[v],v,n)&&(d[v]=n[v]);return d}function jt(n){return Array.isArray(n)?n.map(jt):typeof n=="object"&&n?Dt(n,jt):n}var Vt={};function Bt(n){Vt[n]||(typeof console<"u"&&console.warn(n),Vt[n]=!0)}function de(n,r,s){return(s.y-n.y)*(r.x-n.x)>(r.y-n.y)*(s.x-n.x)}function An(n){for(var r=0,s=0,d=n.length,v=d-1,x=void 0,A=void 0;s<d;v=s++)r+=((A=n[v]).x-(x=n[s]).x)*(x.y+A.y);return r}function _e(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function He(n){var r={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(d,v,x,A){var S=x||A;return r[v]=!S||S.toLowerCase(),""}),r["max-age"]){var s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r}var Ue=null;function ki(n){if(Ue==null){var r=n.navigator?n.navigator.userAgent:null;Ue=!!n.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Ue}function oi(n){try{var r=P[n];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}var Vn,gn,Qn,Pi,ci=P.performance&&P.performance.now?P.performance.now.bind(P.performance):Date.now.bind(Date),Ai=P.requestAnimationFrame||P.mozRequestAnimationFrame||P.webkitRequestAnimationFrame||P.msRequestAnimationFrame,ue=P.cancelAnimationFrame||P.mozCancelAnimationFrame||P.webkitCancelAnimationFrame||P.msCancelAnimationFrame,Qe={now:ci,frame:function(n){var r=Ai(n);return{cancel:function(){return ue(r)}}},getImageData:function(n,r){r===void 0&&(r=0);var s=P.document.createElement("canvas"),d=s.getContext("2d");if(!d)throw new Error("failed to create canvas 2d context");return s.width=n.width,s.height=n.height,d.drawImage(n,0,0,n.width,n.height),d.getImageData(-r,-r,n.width+2*r,n.height+2*r)},resolveURL:function(n){return Vn||(Vn=P.document.createElement("a")),Vn.href=n,Vn.href},hardwareConcurrency:P.navigator&&P.navigator.hardwareConcurrency||4,get devicePixelRatio(){return P.devicePixelRatio},get prefersReducedMotion(){return!!P.matchMedia&&(gn==null&&(gn=P.matchMedia("(prefers-reduced-motion: reduce)")),gn.matches)}},me={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Te={supported:!1,testSupport:function(n){!wi&&Pi&&(Li?ut(n):Qn=n)}},wi=!1,Li=!1;function ut(n){var r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,Pi),n.isContextLost())return;Te.supported=!0}catch{}n.deleteTexture(r),wi=!0}P.document&&((Pi=P.document.createElement("img")).onload=function(){Qn&&ut(Qn),Qn=null,Li=!0},Pi.onerror=function(){wi=!0,Qn=null},Pi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var At="01",Jt=function(n,r){this._transformRequestFn=n,this._customAccessToken=r,this._createSkuToken()};function le(n){return n.indexOf("mapbox:")===0}Jt.prototype._createSkuToken=function(){var n=function(){for(var r="",s=0;s<10;s++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",At,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt},Jt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Jt.prototype.transformRequest=function(n,r){return this._transformRequestFn&&this._transformRequestFn(n,r)||{url:n}},Jt.prototype.normalizeStyleURL=function(n,r){if(!le(n))return n;var s=we(n);return s.path="/styles/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||r)},Jt.prototype.normalizeGlyphsURL=function(n,r){if(!le(n))return n;var s=we(n);return s.path="/fonts/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||r)},Jt.prototype.normalizeSourceURL=function(n,r){if(!le(n))return n;var s=we(n);return s.path="/v4/"+s.authority+".json",s.params.push("secure"),this._makeAPIURL(s,this._customAccessToken||r)},Jt.prototype.normalizeSpriteURL=function(n,r,s,d){var v=we(n);return le(n)?(v.path="/styles/v1"+v.path+"/sprite"+r+s,this._makeAPIURL(v,this._customAccessToken||d)):(v.path+=""+r+s,De(v))},Jt.prototype.normalizeTileURL=function(n,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!le(n))return n;var s=we(n);s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Qe.devicePixelRatio>=2||r===512?"@2x":"")+(Te.supported?".webp":"$1")),s.path=s.path.replace(/^.+\/v4\//,"/"),s.path="/v4"+s.path;var d=this._customAccessToken||function(v){for(var x=0,A=v;x<A.length;x+=1){var S=A[x].match(/^access_token=(.*)$/);if(S)return S[1]}return null}(s.params)||me.ACCESS_TOKEN;return me.REQUIRE_ACCESS_TOKEN&&d&&this._skuToken&&s.params.push("sku="+this._skuToken),this._makeAPIURL(s,d)},Jt.prototype.canonicalizeTileURL=function(n,r){var s=we(n);if(!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/))return n;var d="mapbox://tiles/";d+=s.path.replace("/v4/","");var v=s.params;return r&&(v=v.filter(function(x){return!x.match(/^access_token=/)})),v.length&&(d+="?"+v.join("&")),d},Jt.prototype.canonicalizeTileset=function(n,r){for(var s=!!r&&le(r),d=[],v=0,x=n.tiles||[];v<x.length;v+=1){var A=x[v];Be(A)?d.push(this.canonicalizeTileURL(A,s)):d.push(A)}return d},Jt.prototype._makeAPIURL=function(n,r){var s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",d=we(me.API_URL);if(n.protocol=d.protocol,n.authority=d.authority,n.protocol==="http"){var v=n.params.indexOf("secure");v>=0&&n.params.splice(v,1)}if(d.path!=="/"&&(n.path=""+d.path+n.path),!me.REQUIRE_ACCESS_TOKEN)return De(n);if(!(r=r||me.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+s);if(r[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+s);return n.params=n.params.filter(function(x){return x.indexOf("access_token")===-1}),n.params.push("access_token="+r),De(n)};var pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Be(n){return pe.test(n)}var un=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function we(n){var r=n.match(un);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function De(n){var r=n.params.length?"?"+n.params.join("&"):"";return n.protocol+"://"+n.authority+n.path+r}function Se(n){if(!n)return null;var r=n.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(P.atob(r[1]).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var en=function(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};en.prototype.getStorageKey=function(n){var r,s=Se(me.ACCESS_TOKEN);return r=s&&s.u?P.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,function(d,v){return String.fromCharCode(+("0x"+v))})):me.ACCESS_TOKEN||"",n?"mapbox.eventData."+n+":"+r:"mapbox.eventData:"+r},en.prototype.fetchEventData=function(){var n=oi("localStorage"),r=this.getStorageKey(),s=this.getStorageKey("uuid");if(n)try{var d=P.localStorage.getItem(r);d&&(this.eventData=JSON.parse(d));var v=P.localStorage.getItem(s);v&&(this.anonId=v)}catch{Bt("Unable to read from LocalStorage")}},en.prototype.saveEventData=function(){var n=oi("localStorage"),r=this.getStorageKey(),s=this.getStorageKey("uuid");if(n)try{P.localStorage.setItem(s,this.anonId),Object.keys(this.eventData).length>=1&&P.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{Bt("Unable to write to LocalStorage")}},en.prototype.processRequests=function(n){},en.prototype.postEvent=function(n,r,s,d){var v=this;if(me.EVENTS_URL){var x=we(me.EVENTS_URL);x.params.push("access_token="+(d||me.ACCESS_TOKEN||""));var A={event:this.type,created:new Date(n).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:At,userId:this.anonId},S=r?K(A,r):A,D={url:De(x),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=qr(D,function(B){v.pendingRequest=null,s(B),v.saveEventData(),v.processRequests(d)})}},en.prototype.queueRequest=function(n,r){this.queue.push(n),this.processRequests(r)};var Cn,In,Pn=function(n){function r(){n.call(this,"map.load"),this.success={},this.skuToken=""}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.postMapLoadEvent=function(s,d,v,x){this.skuToken=v;var A=!(!x&&!me.ACCESS_TOKEN),S=Array.isArray(s)&&s.some(function(D){return le(D)||Be(D)});me.EVENTS_URL&&A&&S&&this.queueRequest({id:d,timestamp:Date.now()},x)},r.prototype.processRequests=function(s){var d=this;if(!this.pendingRequest&&this.queue.length!==0){var v=this.queue.shift(),x=v.id,A=v.timestamp;x&&this.success[x]||(this.anonId||this.fetchEventData(),It(this.anonId)||(this.anonId=Nt()),this.postEvent(A,{skuToken:this.skuToken},function(S){S||x&&(d.success[x]=!0)},s))}},r}(en),Jn=new(function(n){function r(s){n.call(this,"appUserTurnstile"),this._customAccessToken=s}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.postTurnstileEvent=function(s,d){me.EVENTS_URL&&me.ACCESS_TOKEN&&Array.isArray(s)&&s.some(function(v){return le(v)||Be(v)})&&this.queueRequest(Date.now(),d)},r.prototype.processRequests=function(s){var d=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var v=Se(me.ACCESS_TOKEN),x=v?v.u:me.ACCESS_TOKEN,A=x!==this.eventData.tokenU;It(this.anonId)||(this.anonId=Nt(),A=!0);var S=this.queue.shift();if(this.eventData.lastSuccess){var D=new Date(this.eventData.lastSuccess),B=new Date(S),N=(S-this.eventData.lastSuccess)/864e5;A=A||N>=1||N<-1||D.getDate()!==B.getDate()}else A=!0;if(!A)return this.processRequests();this.postEvent(S,{"enabled.telemetry":!1},function(V){V||(d.eventData.lastSuccess=S,d.eventData.tokenU=x)},s)}},r}(en)),Di=Jn.postTurnstileEvent.bind(Jn),Ci=new Pn,or=Ci.postMapLoadEvent.bind(Ci),Gr=500,Yo=50;function va(){P.caches&&!Cn&&(Cn=P.caches.open("mapbox-tiles"))}function Ra(n){var r=n.indexOf("?");return r<0?n:n.slice(0,r)}var qa,Ar=1/0;function So(){return qa==null&&(qa=P.OffscreenCanvas&&new P.OffscreenCanvas(1,1).getContext("2d")&&typeof P.createImageBitmap=="function"),qa}var qs={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(qs);var Ws=function(n){function r(s,d,v){d===401&&Be(v)&&(s+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),n.call(this,s),this.status=d,this.url=v,this.name=this.constructor.name,this.message=s}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},r}(Error),gl=_e()?function(){return self.worker&&self.worker.referrer}:function(){return(P.location.protocol==="blob:"?P.parent:P).location.href},za,lo,Zs=function(n,r){if(!(/^file:/.test(s=n.url)||/^file:/.test(gl())&&!/^\w+:/.test(s))){if(P.fetch&&P.Request&&P.AbortController&&P.Request.prototype.hasOwnProperty("signal"))return function(d,v){var x,A=new P.AbortController,S=new P.Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,referrer:gl(),signal:A.signal}),D=!1,B=!1,N=(x=S.url).indexOf("sku=")>0&&Be(x);d.type==="json"&&S.headers.set("Accept","application/json");var V=function(J,ct,pt){if(!B){if(J&&J.message!=="SecurityError"&&Bt(J),ct&&pt)return Z(ct);var Mt=Date.now();P.fetch(S).then(function(bt){if(bt.ok){var Ut=N?bt.clone():null;return Z(bt,Ut,Mt)}return v(new Ws(bt.statusText,bt.status,d.url))}).catch(function(bt){bt.code!==20&&v(new Error(bt.message))})}},Z=function(J,ct,pt){(d.type==="arrayBuffer"?J.arrayBuffer():d.type==="json"?J.json():J.text()).then(function(Mt){B||(ct&&pt&&function(bt,Ut,$t){if(va(),Cn){var te={status:Ut.status,statusText:Ut.statusText,headers:new P.Headers};Ut.headers.forEach(function(fe,Me){return te.headers.set(Me,fe)});var ne=He(Ut.headers.get("Cache-Control")||"");ne["no-store"]||(ne["max-age"]&&te.headers.set("Expires",new Date($t+1e3*ne["max-age"]).toUTCString()),new Date(te.headers.get("Expires")).getTime()-$t<42e4||function(fe,Me){if(In===void 0)try{new Response(new ReadableStream),In=!0}catch{In=!1}In?Me(fe.body):fe.blob().then(Me)}(Ut,function(fe){var Me=new P.Response(fe,te);va(),Cn&&Cn.then(function(Fe){return Fe.put(Ra(bt.url),Me)}).catch(function(Fe){return Bt(Fe.message)})}))}}(S,ct,pt),D=!0,v(null,Mt,J.headers.get("Cache-Control"),J.headers.get("Expires")))}).catch(function(Mt){B||v(new Error(Mt.message))})};return N?function(J,ct){if(va(),!Cn)return ct(null);var pt=Ra(J.url);Cn.then(function(Mt){Mt.match(pt).then(function(bt){var Ut=function($t){if(!$t)return!1;var te=new Date($t.headers.get("Expires")||0),ne=He($t.headers.get("Cache-Control")||"");return te>Date.now()&&!ne["no-cache"]}(bt);Mt.delete(pt),Ut&&Mt.put(pt,bt.clone()),ct(null,bt,Ut)}).catch(ct)}).catch(ct)}(S,V):V(null,null),{cancel:function(){B=!0,D||A.abort()}}}(n,r);if(_e()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,r,void 0,!0)}var s;return function(d,v){var x=new P.XMLHttpRequest;for(var A in x.open(d.method||"GET",d.url,!0),d.type==="arrayBuffer"&&(x.responseType="arraybuffer"),d.headers)x.setRequestHeader(A,d.headers[A]);return d.type==="json"&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials=d.credentials==="include",x.onerror=function(){v(new Error(x.statusText))},x.onload=function(){if((x.status>=200&&x.status<300||x.status===0)&&x.response!==null){var S=x.response;if(d.type==="json")try{S=JSON.parse(x.response)}catch(D){return v(D)}v(null,S,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else v(new Ws(x.statusText,x.status,d.url))},x.send(d.body),{cancel:function(){return x.abort()}}}(n,r)},bu=function(n,r){return Zs(K(n,{type:"arrayBuffer"}),r)},qr=function(n,r){return Zs(K(n,{method:"POST"}),r)},U="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";za=[],lo=0;var W=function(n,r){if(Te.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),lo>=me.MAX_PARALLEL_IMAGE_REQUESTS){var s={requestParameters:n,callback:r,cancelled:!1,cancel:function(){this.cancelled=!0}};return za.push(s),s}lo++;var d=!1,v=function(){if(!d)for(d=!0,lo--;za.length&&lo<me.MAX_PARALLEL_IMAGE_REQUESTS;){var A=za.shift();A.cancelled||(A.cancel=W(A.requestParameters,A.callback).cancel)}},x=bu(n,function(A,S,D,B){v(),A?r(A):S&&(So()?function(N,V){var Z=new P.Blob([new Uint8Array(N)],{type:"image/png"});P.createImageBitmap(Z).then(function(J){V(null,J)}).catch(function(J){V(new Error("Could not load image because of "+J.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(S,r):function(N,V,Z,J){var ct=new P.Image,pt=P.URL;ct.onload=function(){V(null,ct),pt.revokeObjectURL(ct.src),ct.onload=null,P.requestAnimationFrame(function(){ct.src=U})},ct.onerror=function(){return V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Mt=new P.Blob([new Uint8Array(N)],{type:"image/png"});ct.cacheControl=Z,ct.expires=J,ct.src=N.byteLength?pt.createObjectURL(Mt):U}(S,r,D,B))});return{cancel:function(){x.cancel(),v()}}};function Q(n,r,s){s[n]&&s[n].indexOf(r)!==-1||(s[n]=s[n]||[],s[n].push(r))}function at(n,r,s){if(s&&s[n]){var d=s[n].indexOf(r);d!==-1&&s[n].splice(d,1)}}var dt=function(n,r){r===void 0&&(r={}),K(this,r),this.type=n},Tt=function(n){function r(s,d){d===void 0&&(d={}),n.call(this,"error",K({error:s},d))}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r}(dt),Rt=function(){};Rt.prototype.on=function(n,r){return this._listeners=this._listeners||{},Q(n,r,this._listeners),this},Rt.prototype.off=function(n,r){return at(n,r,this._listeners),at(n,r,this._oneTimeListeners),this},Rt.prototype.once=function(n,r){return this._oneTimeListeners=this._oneTimeListeners||{},Q(n,r,this._oneTimeListeners),this},Rt.prototype.fire=function(n,r){typeof n=="string"&&(n=new dt(n,r||{}));var s=n.type;if(this.listens(s)){n.target=this;for(var d=0,v=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];d<v.length;d+=1)v[d].call(this,n);for(var x=0,A=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];x<A.length;x+=1){var S=A[x];at(s,S,this._oneTimeListeners),S.call(this,n)}var D=this._eventedParent;D&&(K(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),D.fire(n))}else n instanceof Tt&&console.error(n.error);return this},Rt.prototype.listens=function(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)},Rt.prototype.setEventedParent=function(n,r){return this._eventedParent=n,this._eventedParentData=r,this};var tt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},yt=function(n,r,s,d){this.message=(n?n+": ":"")+s,d&&(this.identifier=d),r!=null&&r.__line__&&(this.line=r.__line__)};function Zt(n){var r=n.value;return r?[new yt(n.key,r,"constants have been deprecated as of v8")]:[]}function ge(n){for(var r=[],s=arguments.length-1;s-- >0;)r[s]=arguments[s+1];for(var d=0,v=r;d<v.length;d+=1){var x=v[d];for(var A in x)n[A]=x[A]}return n}function be(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function re(n){if(Array.isArray(n))return n.map(re);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){var r={};for(var s in n)r[s]=re(n[s]);return r}return be(n)}var ye=function(n){function r(s,d){n.call(this,d),this.message=d,this.key=s}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r}(Error),ln=function(n,r){r===void 0&&(r=[]),this.parent=n,this.bindings={};for(var s=0,d=r;s<d.length;s+=1){var v=d[s];this.bindings[v[0]]=v[1]}};ln.prototype.concat=function(n){return new ln(this,n)},ln.prototype.get=function(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(n+" not found in scope.")},ln.prototype.has=function(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)};var an={kind:"null"},ae={kind:"number"},Le={kind:"string"},Ve={kind:"boolean"},je={kind:"color"},ii={kind:"object"},Ye={kind:"value"},xi={kind:"collator"},Ui={kind:"formatted"},hi={kind:"resolvedImage"};function gi(n,r){return{kind:"array",itemType:n,N:r}}function vi(n){if(n.kind==="array"){var r=vi(n.itemType);return typeof n.N=="number"?"array<"+r+", "+n.N+">":n.itemType.kind==="value"?"array":"array<"+r+">"}return n.kind}var To=[an,ae,Le,Ve,je,Ui,ii,gi(Ye),hi];function qn(n,r){if(r.kind==="error")return null;if(n.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!qn(n.itemType,r.itemType))&&(typeof n.N!="number"||n.N===r.N))return null}else{if(n.kind===r.kind)return null;if(n.kind==="value"){for(var s=0,d=To;s<d.length;s+=1)if(!qn(d[s],r))return null}}return"Expected "+vi(n)+" but found "+vi(r)+" instead."}function kr(n,r){return r.some(function(s){return s.kind===n.kind})}function Zi(n,r){return r.some(function(s){return s==="null"?n===null:s==="array"?Array.isArray(n):s==="object"?n&&!Array.isArray(n)&&typeof n=="object":s===typeof n})}var $n=y(function(n,r){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function d(S){return(S=Math.round(S))<0?0:S>255?255:S}function v(S){return d(S[S.length-1]==="%"?parseFloat(S)/100*255:parseInt(S))}function x(S){return(D=S[S.length-1]==="%"?parseFloat(S)/100:parseFloat(S))<0?0:D>1?1:D;var D}function A(S,D,B){return B<0?B+=1:B>1&&(B-=1),6*B<1?S+(D-S)*B*6:2*B<1?D:3*B<2?S+(D-S)*(2/3-B)*6:S}try{r.parseCSSColor=function(S){var D,B=S.replace(/ /g,"").toLowerCase();if(B in s)return s[B].slice();if(B[0]==="#")return B.length===4?(D=parseInt(B.substr(1),16))>=0&&D<=4095?[(3840&D)>>4|(3840&D)>>8,240&D|(240&D)>>4,15&D|(15&D)<<4,1]:null:B.length===7&&(D=parseInt(B.substr(1),16))>=0&&D<=16777215?[(16711680&D)>>16,(65280&D)>>8,255&D,1]:null;var N=B.indexOf("("),V=B.indexOf(")");if(N!==-1&&V+1===B.length){var Z=B.substr(0,N),J=B.substr(N+1,V-(N+1)).split(","),ct=1;switch(Z){case"rgba":if(J.length!==4)return null;ct=x(J.pop());case"rgb":return J.length!==3?null:[v(J[0]),v(J[1]),v(J[2]),ct];case"hsla":if(J.length!==4)return null;ct=x(J.pop());case"hsl":if(J.length!==3)return null;var pt=(parseFloat(J[0])%360+360)%360/360,Mt=x(J[1]),bt=x(J[2]),Ut=bt<=.5?bt*(Mt+1):bt+Mt-bt*Mt,$t=2*bt-Ut;return[d(255*A($t,Ut,pt+1/3)),d(255*A($t,Ut,pt)),d(255*A($t,Ut,pt-1/3)),ct];default:return null}}return null}}catch{}}).parseCSSColor,ai=function(n,r,s,d){d===void 0&&(d=1),this.r=n,this.g=r,this.b=s,this.a=d};ai.parse=function(n){if(n){if(n instanceof ai)return n;if(typeof n=="string"){var r=$n(n);if(r)return new ai(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}}},ai.prototype.toString=function(){var n=this.toArray(),r=n[1],s=n[2],d=n[3];return"rgba("+Math.round(n[0])+","+Math.round(r)+","+Math.round(s)+","+d+")"},ai.prototype.toArray=function(){var n=this.a;return n===0?[0,0,0,0]:[255*this.r/n,255*this.g/n,255*this.b/n,n]},ai.black=new ai(0,0,0,1),ai.white=new ai(1,1,1,1),ai.transparent=new ai(0,0,0,0),ai.red=new ai(1,0,0,1);var ko=function(n,r,s){this.sensitivity=n?r?"variant":"case":r?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ko.prototype.compare=function(n,r){return this.collator.compare(n,r)},ko.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var as=function(n,r,s,d,v){this.text=n,this.image=r,this.scale=s,this.fontStack=d,this.textColor=v},Pr=function(n){this.sections=n};Pr.fromString=function(n){return new Pr([new as(n,null,null,null,null)])},Pr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(n){return n.text.length!==0||n.image&&n.image.name.length!==0})},Pr.factory=function(n){return n instanceof Pr?n:Pr.fromString(n)},Pr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(n){return n.text}).join("")},Pr.prototype.serialize=function(){for(var n=["format"],r=0,s=this.sections;r<s.length;r+=1){var d=s[r];if(d.image)n.push(["image",d.image.name]);else{n.push(d.text);var v={};d.fontStack&&(v["text-font"]=["literal",d.fontStack.split(",")]),d.scale&&(v["font-scale"]=d.scale),d.textColor&&(v["text-color"]=["rgba"].concat(d.textColor.toArray())),n.push(v)}}return n};var Bo=function(n){this.name=n.name,this.available=n.available};function jc(n,r,s,d){return typeof n=="number"&&n>=0&&n<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:"Invalid rgba value ["+[n,r,s,d].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof d=="number"?[n,r,s,d]:[n,r,s]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Au(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof ai||n instanceof ko||n instanceof Pr||n instanceof Bo)return!0;if(Array.isArray(n)){for(var r=0,s=n;r<s.length;r+=1)if(!Au(s[r]))return!1;return!0}if(typeof n=="object"){for(var d in n)if(!Au(n[d]))return!1;return!0}return!1}function Lr(n){if(n===null)return an;if(typeof n=="string")return Le;if(typeof n=="boolean")return Ve;if(typeof n=="number")return ae;if(n instanceof ai)return je;if(n instanceof ko)return xi;if(n instanceof Pr)return Ui;if(n instanceof Bo)return hi;if(Array.isArray(n)){for(var r,s=n.length,d=0,v=n;d<v.length;d+=1){var x=Lr(v[d]);if(r){if(r===x)continue;r=Ye;break}r=x}return gi(r||Ye,s)}return ii}function wu(n){var r=typeof n;return n===null?"":r==="string"||r==="number"||r==="boolean"?String(n):n instanceof ai||n instanceof Pr||n instanceof Bo?n.toString():JSON.stringify(n)}Bo.prototype.toString=function(){return this.name},Bo.fromString=function(n){return n?new Bo({name:n,available:!1}):null},Bo.prototype.serialize=function(){return["image",this.name]};var xo=function(n,r){this.type=n,this.value=r};xo.parse=function(n,r){if(n.length!==2)return r.error("'literal' expression requires exactly one argument, but found "+(n.length-1)+" instead.");if(!Au(n[1]))return r.error("invalid value");var s=n[1],d=Lr(s),v=r.expectedType;return d.kind!=="array"||d.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(d=v),new xo(d,s)},xo.prototype.evaluate=function(){return this.value},xo.prototype.eachChild=function(){},xo.prototype.outputDefined=function(){return!0},xo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ai?["rgba"].concat(this.value.toArray()):this.value instanceof Pr?this.value.serialize():this.value};var Wr=function(n){this.name="ExpressionEvaluationError",this.message=n};Wr.prototype.toJSON=function(){return this.message};var ya={string:Le,number:ae,boolean:Ve,object:ii},gr=function(n,r){this.type=n,this.args=r};gr.parse=function(n,r){if(n.length<2)return r.error("Expected at least one argument.");var s,d=1,v=n[0];if(v==="array"){var x,A;if(n.length>2){var S=n[1];if(typeof S!="string"||!(S in ya)||S==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);x=ya[S],d++}else x=Ye;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return r.error('The length argument to "array" must be a positive integer literal',2);A=n[2],d++}s=gi(x,A)}else s=ya[v];for(var D=[];d<n.length;d++){var B=r.parse(n[d],d,Ye);if(!B)return null;D.push(B)}return new gr(s,D)},gr.prototype.evaluate=function(n){for(var r=0;r<this.args.length;r++){var s=this.args[r].evaluate(n);if(!qn(this.type,Lr(s)))return s;if(r===this.args.length-1)throw new Wr("Expected value to be of type "+vi(this.type)+", but found "+vi(Lr(s))+" instead.")}return null},gr.prototype.eachChild=function(n){this.args.forEach(n)},gr.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined()})},gr.prototype.serialize=function(){var n=this.type,r=[n.kind];if(n.kind==="array"){var s=n.itemType;if(s.kind==="string"||s.kind==="number"||s.kind==="boolean"){r.push(s.kind);var d=n.N;(typeof d=="number"||this.args.length>1)&&r.push(d)}}return r.concat(this.args.map(function(v){return v.serialize()}))};var Wa=function(n){this.type=Ui,this.sections=n};Wa.parse=function(n,r){if(n.length<2)return r.error("Expected at least one argument.");var s=n[1];if(!Array.isArray(s)&&typeof s=="object")return r.error("First argument must be an image or text section.");for(var d=[],v=!1,x=1;x<=n.length-1;++x){var A=n[x];if(v&&typeof A=="object"&&!Array.isArray(A)){v=!1;var S=null;if(A["font-scale"]&&!(S=r.parse(A["font-scale"],1,ae)))return null;var D=null;if(A["text-font"]&&!(D=r.parse(A["text-font"],1,gi(Le))))return null;var B=null;if(A["text-color"]&&!(B=r.parse(A["text-color"],1,je)))return null;var N=d[d.length-1];N.scale=S,N.font=D,N.textColor=B}else{var V=r.parse(n[x],1,Ye);if(!V)return null;var Z=V.type.kind;if(Z!=="string"&&Z!=="value"&&Z!=="null"&&Z!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,d.push({content:V,scale:null,font:null,textColor:null})}}return new Wa(d)},Wa.prototype.evaluate=function(n){return new Pr(this.sections.map(function(r){var s=r.content.evaluate(n);return Lr(s)===hi?new as("",s,null,null,null):new as(wu(s),null,r.scale?r.scale.evaluate(n):null,r.font?r.font.evaluate(n).join(","):null,r.textColor?r.textColor.evaluate(n):null)}))},Wa.prototype.eachChild=function(n){for(var r=0,s=this.sections;r<s.length;r+=1){var d=s[r];n(d.content),d.scale&&n(d.scale),d.font&&n(d.font),d.textColor&&n(d.textColor)}},Wa.prototype.outputDefined=function(){return!1},Wa.prototype.serialize=function(){for(var n=["format"],r=0,s=this.sections;r<s.length;r+=1){var d=s[r];n.push(d.content.serialize());var v={};d.scale&&(v["font-scale"]=d.scale.serialize()),d.font&&(v["text-font"]=d.font.serialize()),d.textColor&&(v["text-color"]=d.textColor.serialize()),n.push(v)}return n};var _a=function(n){this.type=hi,this.input=n};_a.parse=function(n,r){if(n.length!==2)return r.error("Expected two arguments.");var s=r.parse(n[1],1,Le);return s?new _a(s):r.error("No image name provided.")},_a.prototype.evaluate=function(n){var r=this.input.evaluate(n),s=Bo.fromString(r);return s&&n.availableImages&&(s.available=n.availableImages.indexOf(r)>-1),s},_a.prototype.eachChild=function(n){n(this.input)},_a.prototype.outputDefined=function(){return!1},_a.prototype.serialize=function(){return["image",this.input.serialize()]};var $l={"to-boolean":Ve,"to-color":je,"to-number":ae,"to-string":Le},C=function(n,r){this.type=n,this.args=r};C.parse=function(n,r){if(n.length<2)return r.error("Expected at least one argument.");var s=n[0];if((s==="to-boolean"||s==="to-string")&&n.length!==2)return r.error("Expected one argument.");for(var d=$l[s],v=[],x=1;x<n.length;x++){var A=r.parse(n[x],x,Ye);if(!A)return null;v.push(A)}return new C(d,v)},C.prototype.evaluate=function(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){for(var r,s,d=0,v=this.args;d<v.length;d+=1){if(s=null,(r=v[d].evaluate(n))instanceof ai)return r;if(typeof r=="string"){var x=n.parseColor(r);if(x)return x}else if(Array.isArray(r)&&!(s=r.length<3||r.length>4?"Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":jc(r[0],r[1],r[2],r[3])))return new ai(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Wr(s||"Could not parse color from value '"+(typeof r=="string"?r:String(JSON.stringify(r)))+"'")}if(this.type.kind==="number"){for(var A=null,S=0,D=this.args;S<D.length;S+=1){if((A=D[S].evaluate(n))===null)return 0;var B=Number(A);if(!isNaN(B))return B}throw new Wr("Could not convert "+JSON.stringify(A)+" to number.")}return this.type.kind==="formatted"?Pr.fromString(wu(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?Bo.fromString(wu(this.args[0].evaluate(n))):wu(this.args[0].evaluate(n))},C.prototype.eachChild=function(n){this.args.forEach(n)},C.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined()})},C.prototype.serialize=function(){if(this.type.kind==="formatted")return new Wa([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new _a(this.args[0]).serialize();var n=["to-"+this.type.kind];return this.eachChild(function(r){n.push(r.serialize())}),n};var R=["Unknown","Point","LineString","Polygon"],Y=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Y.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Y.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?R[this.feature.type]:this.feature.type:null},Y.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Y.prototype.canonicalID=function(){return this.canonical},Y.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Y.prototype.parseColor=function(n){var r=this._parseColorCache[n];return r||(r=this._parseColorCache[n]=ai.parse(n)),r};var gt=function(n,r,s,d){this.name=n,this.type=r,this._evaluate=s,this.args=d};gt.prototype.evaluate=function(n){return this._evaluate(n,this.args)},gt.prototype.eachChild=function(n){this.args.forEach(n)},gt.prototype.outputDefined=function(){return!1},gt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(n){return n.serialize()}))},gt.parse=function(n,r){var s,d=n[0],v=gt.definitions[d];if(!v)return r.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0);for(var x=Array.isArray(v)?v[0]:v.type,A=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,S=A.filter(function(Mn){var Je=Mn[0];return!Array.isArray(Je)||Je.length===n.length-1}),D=null,B=0,N=S;B<N.length;B+=1){var V=N[B],Z=V[0],J=V[1];D=new yl(r.registry,r.path,null,r.scope);for(var ct=[],pt=!1,Mt=1;Mt<n.length;Mt++){var bt=n[Mt],Ut=Array.isArray(Z)?Z[Mt-1]:Z.type,$t=D.parse(bt,1+ct.length,Ut);if(!$t){pt=!0;break}ct.push($t)}if(!pt)if(Array.isArray(Z)&&Z.length!==ct.length)D.error("Expected "+Z.length+" arguments, but found "+ct.length+" instead.");else{for(var te=0;te<ct.length;te++){var ne=Array.isArray(Z)?Z[te]:Z.type,fe=ct[te];D.concat(te+1).checkSubtype(ne,fe.type)}if(D.errors.length===0)return new gt(d,x,J,ct)}}if(S.length===1)(s=r.errors).push.apply(s,D.errors);else{for(var Me=(S.length?S:A).map(function(Mn){var Je;return Je=Mn[0],Array.isArray(Je)?"("+Je.map(vi).join(", ")+")":"("+vi(Je.type)+"...)"}).join(" | "),Fe=[],_n=1;_n<n.length;_n++){var Ze=r.parse(n[_n],1+Fe.length);if(!Ze)return null;Fe.push(vi(Ze.type))}r.error("Expected arguments of type "+Me+", but found ("+Fe.join(", ")+") instead.")}return null},gt.register=function(n,r){for(var s in gt.definitions=r,r)n[s]=gt};var kt=function(n,r,s){this.type=xi,this.locale=s,this.caseSensitive=n,this.diacriticSensitive=r};function Pt(n,r){n[0]=Math.min(n[0],r[0]),n[1]=Math.min(n[1],r[1]),n[2]=Math.max(n[2],r[0]),n[3]=Math.max(n[3],r[1])}function Ht(n,r){return!(n[0]<=r[0]||n[2]>=r[2]||n[1]<=r[1]||n[3]>=r[3])}function ke(n,r){var s=(180+n[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,v=Math.pow(2,r.z);return[Math.round(s*v*8192),Math.round(d*v*8192)]}function Ne(n,r,s){return r[1]>n[1]!=s[1]>n[1]&&n[0]<(s[0]-r[0])*(n[1]-r[1])/(s[1]-r[1])+r[0]}function nn(n,r){for(var s,d,v,x,A,S,D,B=!1,N=0,V=r.length;N<V;N++)for(var Z=r[N],J=0,ct=Z.length;J<ct-1;J++){if((x=(s=n)[0]-(d=Z[J])[0])*(D=s[1]-(v=Z[J+1])[1])-(S=s[0]-v[0])*(A=s[1]-d[1])==0&&x*S<=0&&A*D<=0)return!1;Ne(n,Z[J],Z[J+1])&&(B=!B)}return B}function sn(n,r){for(var s=0;s<r.length;s++)if(nn(n,r[s]))return!0;return!1}function qe(n,r,s,d){var v=d[0]-s[0],x=d[1]-s[1],A=(n[0]-s[0])*x-v*(n[1]-s[1]),S=(r[0]-s[0])*x-v*(r[1]-s[1]);return A>0&&S<0||A<0&&S>0}function ti(n,r,s){for(var d=0,v=s;d<v.length;d+=1)for(var x=v[d],A=0;A<x.length-1;++A)if((V=[(N=x[A+1])[0]-(B=x[A])[0],N[1]-B[1]])[0]*(Z=[(D=r)[0]-(S=n)[0],D[1]-S[1]])[1]-V[1]*Z[0]!=0&&qe(S,D,B,N)&&qe(B,N,S,D))return!0;var S,D,B,N,V,Z;return!1}function Nr(n,r){for(var s=0;s<n.length;++s)if(!nn(n[s],r))return!1;for(var d=0;d<n.length-1;++d)if(ti(n[d],n[d+1],r))return!1;return!0}function si(n,r){for(var s=0;s<r.length;s++)if(Nr(n,r[s]))return!0;return!1}function wr(n,r,s){for(var d=[],v=0;v<n.length;v++){for(var x=[],A=0;A<n[v].length;A++){var S=ke(n[v][A],s);Pt(r,S),x.push(S)}d.push(x)}return d}function xe(n,r,s){for(var d=[],v=0;v<n.length;v++){var x=wr(n[v],r,s);d.push(x)}return d}function wn(n,r,s,d){if(n[0]<s[0]||n[0]>s[2]){var v=.5*d,x=n[0]-s[0]>v?-d:s[0]-n[0]>v?d:0;x===0&&(x=n[0]-s[2]>v?-d:s[2]-n[0]>v?d:0),n[0]+=x}Pt(r,n)}function ar(n,r,s,d){for(var v=8192*Math.pow(2,d.z),x=[8192*d.x,8192*d.y],A=[],S=0,D=n;S<D.length;S+=1)for(var B=0,N=D[S];B<N.length;B+=1){var V=N[B],Z=[V.x+x[0],V.y+x[1]];wn(Z,r,s,v),A.push(Z)}return A}function no(n,r,s,d){for(var v,x=8192*Math.pow(2,d.z),A=[8192*d.x,8192*d.y],S=[],D=0,B=n;D<B.length;D+=1){for(var N=[],V=0,Z=B[D];V<Z.length;V+=1){var J=Z[V],ct=[J.x+A[0],J.y+A[1]];Pt(r,ct),N.push(ct)}S.push(N)}if(r[2]-r[0]<=x/2){(v=r)[0]=v[1]=1/0,v[2]=v[3]=-1/0;for(var pt=0,Mt=S;pt<Mt.length;pt+=1)for(var bt=0,Ut=Mt[pt];bt<Ut.length;bt+=1)wn(Ut[bt],r,s,x)}return S}kt.parse=function(n,r){if(n.length!==2)return r.error("Expected one argument.");var s=n[1];if(typeof s!="object"||Array.isArray(s))return r.error("Collator options argument must be an object.");var d=r.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,Ve);if(!d)return null;var v=r.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,Ve);if(!v)return null;var x=null;return s.locale&&!(x=r.parse(s.locale,1,Le))?null:new kt(d,v,x)},kt.prototype.evaluate=function(n){return new ko(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)},kt.prototype.eachChild=function(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)},kt.prototype.outputDefined=function(){return!1},kt.prototype.serialize=function(){var n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]};var Qi=function(n,r){this.type=Ve,this.geojson=n,this.geometries=r};function Cs(n){if(n instanceof gt&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof Qi)return!1;var r=!0;return n.eachChild(function(s){r&&!Cs(s)&&(r=!1)}),r}function vl(n){if(n instanceof gt&&n.name==="feature-state")return!1;var r=!0;return n.eachChild(function(s){r&&!vl(s)&&(r=!1)}),r}function nr(n,r){if(n instanceof gt&&r.indexOf(n.name)>=0)return!1;var s=!0;return n.eachChild(function(d){s&&!nr(d,r)&&(s=!1)}),s}Qi.parse=function(n,r){if(n.length!==2)return r.error("'within' expression requires exactly one argument, but found "+(n.length-1)+" instead.");if(Au(n[1])){var s=n[1];if(s.type==="FeatureCollection")for(var d=0;d<s.features.length;++d){var v=s.features[d].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Qi(s,s.features[d].geometry)}else if(s.type==="Feature"){var x=s.geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new Qi(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new Qi(s,s)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Qi.prototype.evaluate=function(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(r,s){var d=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=r.canonicalID();if(s.type==="Polygon"){var A=wr(s.coordinates,v,x),S=ar(r.geometry(),d,v,x);if(!Ht(d,v))return!1;for(var D=0,B=S;D<B.length;D+=1)if(!nn(B[D],A))return!1}if(s.type==="MultiPolygon"){var N=xe(s.coordinates,v,x),V=ar(r.geometry(),d,v,x);if(!Ht(d,v))return!1;for(var Z=0,J=V;Z<J.length;Z+=1)if(!sn(J[Z],N))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(r,s){var d=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=r.canonicalID();if(s.type==="Polygon"){var A=wr(s.coordinates,v,x),S=no(r.geometry(),d,v,x);if(!Ht(d,v))return!1;for(var D=0,B=S;D<B.length;D+=1)if(!Nr(B[D],A))return!1}if(s.type==="MultiPolygon"){var N=xe(s.coordinates,v,x),V=no(r.geometry(),d,v,x);if(!Ht(d,v))return!1;for(var Z=0,J=V;Z<J.length;Z+=1)if(!si(J[Z],N))return!1}return!0}(n,this.geometries)}return!1},Qi.prototype.eachChild=function(){},Qi.prototype.outputDefined=function(){return!0},Qi.prototype.serialize=function(){return["within",this.geojson]};var $s=function(n,r){this.type=r.type,this.name=n,this.boundExpression=r};$s.parse=function(n,r){if(n.length!==2||typeof n[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");var s=n[1];return r.scope.has(s)?new $s(s,r.scope.get(s)):r.error('Unknown variable "'+s+'". Make sure "'+s+'" has been bound in an enclosing "let" expression before using it.',1)},$s.prototype.evaluate=function(n){return this.boundExpression.evaluate(n)},$s.prototype.eachChild=function(){},$s.prototype.outputDefined=function(){return!1},$s.prototype.serialize=function(){return["var",this.name]};var yl=function(n,r,s,d,v){r===void 0&&(r=[]),d===void 0&&(d=new ln),v===void 0&&(v=[]),this.registry=n,this.path=r,this.key=r.map(function(x){return"["+x+"]"}).join(""),this.scope=d,this.errors=v,this.expectedType=s};function ji(n,r){for(var s,d=n.length-1,v=0,x=d,A=0;v<=x;)if((s=n[A=Math.floor((v+x)/2)])<=r){if(A===d||r<n[A+1])return A;v=A+1}else{if(!(s>r))throw new Wr("Input is not a number.");x=A-1}return 0}yl.prototype.parse=function(n,r,s,d,v){return v===void 0&&(v={}),r?this.concat(r,s,d)._parse(n,v):this._parse(n,v)},yl.prototype._parse=function(n,r){function s(B,N,V){return V==="assert"?new gr(N,[B]):V==="coerce"?new C(N,[B]):B}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var d=n[0];if(typeof d!="string")return this.error("Expression name must be a string, but found "+typeof d+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var v=this.registry[d];if(v){var x=v.parse(n,this);if(!x)return null;if(this.expectedType){var A=this.expectedType,S=x.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||S.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(A,S))return null}else x=s(x,A,r.typeAnnotation||"coerce");else x=s(x,A,r.typeAnnotation||"assert")}if(!(x instanceof xo)&&x.type.kind!=="resolvedImage"&&function B(N){if(N instanceof $s)return B(N.boundExpression);if(N instanceof gt&&N.name==="error"||N instanceof kt||N instanceof Qi)return!1;var V=N instanceof C||N instanceof gr,Z=!0;return N.eachChild(function(J){Z=V?Z&&B(J):Z&&J instanceof xo}),!!Z&&Cs(N)&&nr(N,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(x)){var D=new Y;try{x=new xo(x.type,x.evaluate(D))}catch(B){return this.error(B.message),null}}return x}return this.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof n+" instead.")},yl.prototype.concat=function(n,r,s){var d=typeof n=="number"?this.path.concat(n):this.path,v=s?this.scope.concat(s):this.scope;return new yl(this.registry,d,r||null,v,this.errors)},yl.prototype.error=function(n){for(var r=[],s=arguments.length-1;s-- >0;)r[s]=arguments[s+1];var d=""+this.key+r.map(function(v){return"["+v+"]"}).join("");this.errors.push(new ye(d,n))},yl.prototype.checkSubtype=function(n,r){var s=qn(n,r);return s&&this.error(s),s};var Ii=function(n,r,s){this.type=n,this.input=r,this.labels=[],this.outputs=[];for(var d=0,v=s;d<v.length;d+=1){var x=v[d],A=x[1];this.labels.push(x[0]),this.outputs.push(A)}};function Zr(n,r,s){return n*(1-s)+r*s}Ii.parse=function(n,r){if(n.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if((n.length-1)%2!=0)return r.error("Expected an even number of arguments.");var s=r.parse(n[1],1,ae);if(!s)return null;var d=[],v=null;r.expectedType&&r.expectedType.kind!=="value"&&(v=r.expectedType);for(var x=1;x<n.length;x+=2){var A=x===1?-1/0:n[x],S=n[x+1],D=x,B=x+1;if(typeof A!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(d.length&&d[d.length-1][0]>=A)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);var N=r.parse(S,B,v);if(!N)return null;v=v||N.type,d.push([A,N])}return new Ii(v,s,d)},Ii.prototype.evaluate=function(n){var r=this.labels,s=this.outputs;if(r.length===1)return s[0].evaluate(n);var d=this.input.evaluate(n);if(d<=r[0])return s[0].evaluate(n);var v=r.length;return d>=r[v-1]?s[v-1].evaluate(n):s[ji(r,d)].evaluate(n)},Ii.prototype.eachChild=function(n){n(this.input);for(var r=0,s=this.outputs;r<s.length;r+=1)n(s[r])},Ii.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined()})},Ii.prototype.serialize=function(){for(var n=["step",this.input.serialize()],r=0;r<this.labels.length;r++)r>0&&n.push(this.labels[r]),n.push(this.outputs[r].serialize());return n};var Yl=Object.freeze({__proto__:null,number:Zr,color:function(n,r,s){return new ai(Zr(n.r,r.r,s),Zr(n.g,r.g,s),Zr(n.b,r.b,s),Zr(n.a,r.a,s))},array:function(n,r,s){return n.map(function(d,v){return Zr(d,r[v],s)})}}),Hc=6/29*3*(6/29),mf=Math.PI/180,gf=180/Math.PI;function bh(n){return n>.008856451679035631?Math.pow(n,1/3):n/Hc+4/29}function Gc(n){return n>6/29?n*n*n:Hc*(n-4/29)}function Ah(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function uo(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function cc(n){var r=uo(n.r),s=uo(n.g),d=uo(n.b),v=bh((.4124564*r+.3575761*s+.1804375*d)/.95047),x=bh((.2126729*r+.7151522*s+.072175*d)/1);return{l:116*x-16,a:500*(v-x),b:200*(x-bh((.0193339*r+.119192*s+.9503041*d)/1.08883)),alpha:n.a}}function Ys(n){var r=(n.l+16)/116,s=isNaN(n.a)?r:r+n.a/500,d=isNaN(n.b)?r:r-n.b/200;return r=1*Gc(r),s=.95047*Gc(s),d=1.08883*Gc(d),new ai(Ah(3.2404542*s-1.5371385*r-.4985314*d),Ah(-.969266*s+1.8760108*r+.041556*d),Ah(.0556434*s-.2040259*r+1.0572252*d),n.alpha)}function vf(n,r,s){var d=r-n;return n+s*(d>180||d<-180?d-360*Math.round(d/360):d)}var Xl={forward:cc,reverse:Ys,interpolate:function(n,r,s){return{l:Zr(n.l,r.l,s),a:Zr(n.a,r.a,s),b:Zr(n.b,r.b,s),alpha:Zr(n.alpha,r.alpha,s)}}},bo={forward:function(n){var r=cc(n),s=r.l,d=r.a,v=r.b,x=Math.atan2(v,d)*gf;return{h:x<0?x+360:x,c:Math.sqrt(d*d+v*v),l:s,alpha:n.a}},reverse:function(n){var r=n.h*mf,s=n.c;return Ys({l:n.l,a:Math.cos(r)*s,b:Math.sin(r)*s,alpha:n.alpha})},interpolate:function(n,r,s){return{h:vf(n.h,r.h,s),c:Zr(n.c,r.c,s),l:Zr(n.l,r.l,s),alpha:Zr(n.alpha,r.alpha,s)}}},hc=Object.freeze({__proto__:null,lab:Xl,hcl:bo}),co=function(n,r,s,d,v){this.type=n,this.operator=r,this.interpolation=s,this.input=d,this.labels=[],this.outputs=[];for(var x=0,A=v;x<A.length;x+=1){var S=A[x],D=S[1];this.labels.push(S[0]),this.outputs.push(D)}};function Oa(n,r,s,d){var v=d-s,x=n-s;return v===0?0:r===1?x/v:(Math.pow(r,x)-1)/(Math.pow(r,v)-1)}co.interpolationFactor=function(n,r,s,d){var v=0;if(n.name==="exponential")v=Oa(r,n.base,s,d);else if(n.name==="linear")v=Oa(r,1,s,d);else if(n.name==="cubic-bezier"){var x=n.controlPoints;v=new _(x[0],x[1],x[2],x[3]).solve(Oa(r,1,s,d))}return v},co.parse=function(n,r){var s=n[0],d=n[1],v=n[2],x=n.slice(3);if(!Array.isArray(d)||d.length===0)return r.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){var A=d[1];if(typeof A!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:A}}else{if(d[0]!=="cubic-bezier")return r.error("Unknown interpolation type "+String(d[0]),1,0);var S=d.slice(1);if(S.length!==4||S.some(function(Mt){return typeof Mt!="number"||Mt<0||Mt>1}))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:S}}if(n.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if((n.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(!(v=r.parse(v,2,ae)))return null;var D=[],B=null;s==="interpolate-hcl"||s==="interpolate-lab"?B=je:r.expectedType&&r.expectedType.kind!=="value"&&(B=r.expectedType);for(var N=0;N<x.length;N+=2){var V=x[N],Z=x[N+1],J=N+3,ct=N+4;if(typeof V!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',J);if(D.length&&D[D.length-1][0]>=V)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',J);var pt=r.parse(Z,ct,B);if(!pt)return null;B=B||pt.type,D.push([V,pt])}return B.kind==="number"||B.kind==="color"||B.kind==="array"&&B.itemType.kind==="number"&&typeof B.N=="number"?new co(B,s,d,v,D):r.error("Type "+vi(B)+" is not interpolatable.")},co.prototype.evaluate=function(n){var r=this.labels,s=this.outputs;if(r.length===1)return s[0].evaluate(n);var d=this.input.evaluate(n);if(d<=r[0])return s[0].evaluate(n);var v=r.length;if(d>=r[v-1])return s[v-1].evaluate(n);var x=ji(r,d),A=co.interpolationFactor(this.interpolation,d,r[x],r[x+1]),S=s[x].evaluate(n),D=s[x+1].evaluate(n);return this.operator==="interpolate"?Yl[this.type.kind.toLowerCase()](S,D,A):this.operator==="interpolate-hcl"?bo.reverse(bo.interpolate(bo.forward(S),bo.forward(D),A)):Xl.reverse(Xl.interpolate(Xl.forward(S),Xl.forward(D),A))},co.prototype.eachChild=function(n){n(this.input);for(var r=0,s=this.outputs;r<s.length;r+=1)n(s[r])},co.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined()})},co.prototype.serialize=function(){var n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var r=[this.operator,n,this.input.serialize()],s=0;s<this.labels.length;s++)r.push(this.labels[s],this.outputs[s].serialize());return r};var Is=function(n,r){this.type=n,this.args=r};Is.parse=function(n,r){if(n.length<2)return r.error("Expectected at least one argument.");var s=null,d=r.expectedType;d&&d.kind!=="value"&&(s=d);for(var v=[],x=0,A=n.slice(1);x<A.length;x+=1){var S=r.parse(A[x],1+v.length,s,void 0,{typeAnnotation:"omit"});if(!S)return null;s=s||S.type,v.push(S)}var D=d&&v.some(function(B){return qn(d,B.type)});return new Is(D?Ye:s,v)},Is.prototype.evaluate=function(n){for(var r,s=null,d=0,v=0,x=this.args;v<x.length&&(d++,(s=x[v].evaluate(n))&&s instanceof Bo&&!s.available&&(r||(r=s.name),s=null,d===this.args.length&&(s=r)),s===null);v+=1);return s},Is.prototype.eachChild=function(n){this.args.forEach(n)},Is.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined()})},Is.prototype.serialize=function(){var n=["coalesce"];return this.eachChild(function(r){n.push(r.serialize())}),n};var Ms=function(n,r){this.type=r.type,this.bindings=[].concat(n),this.result=r};Ms.prototype.evaluate=function(n){return this.result.evaluate(n)},Ms.prototype.eachChild=function(n){for(var r=0,s=this.bindings;r<s.length;r+=1)n(s[r][1]);n(this.result)},Ms.parse=function(n,r){if(n.length<4)return r.error("Expected at least 3 arguments, but found "+(n.length-1)+" instead.");for(var s=[],d=1;d<n.length-1;d+=2){var v=n[d];if(typeof v!="string")return r.error("Expected string, but found "+typeof v+" instead.",d);if(/[^a-zA-Z0-9_]/.test(v))return r.error("Variable names must contain only alphanumeric characters or '_'.",d);var x=r.parse(n[d+1],d+1);if(!x)return null;s.push([v,x])}var A=r.parse(n[n.length-1],n.length-1,r.expectedType,s);return A?new Ms(s,A):null},Ms.prototype.outputDefined=function(){return this.result.outputDefined()},Ms.prototype.serialize=function(){for(var n=["let"],r=0,s=this.bindings;r<s.length;r+=1){var d=s[r];n.push(d[0],d[1].serialize())}return n.push(this.result.serialize()),n};var _l=function(n,r,s){this.type=n,this.index=r,this.input=s};_l.parse=function(n,r){if(n.length!==3)return r.error("Expected 2 arguments, but found "+(n.length-1)+" instead.");var s=r.parse(n[1],1,ae),d=r.parse(n[2],2,gi(r.expectedType||Ye));return s&&d?new _l(d.type.itemType,s,d):null},_l.prototype.evaluate=function(n){var r=this.index.evaluate(n),s=this.input.evaluate(n);if(r<0)throw new Wr("Array index out of bounds: "+r+" < 0.");if(r>=s.length)throw new Wr("Array index out of bounds: "+r+" > "+(s.length-1)+".");if(r!==Math.floor(r))throw new Wr("Array index must be an integer, but found "+r+" instead.");return s[r]},_l.prototype.eachChild=function(n){n(this.index),n(this.input)},_l.prototype.outputDefined=function(){return!1},_l.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ho=function(n,r){this.type=Ve,this.needle=n,this.haystack=r};ho.parse=function(n,r){if(n.length!==3)return r.error("Expected 2 arguments, but found "+(n.length-1)+" instead.");var s=r.parse(n[1],1,Ye),d=r.parse(n[2],2,Ye);return s&&d?kr(s.type,[Ve,Le,ae,an,Ye])?new ho(s,d):r.error("Expected first argument to be of type boolean, string, number or null, but found "+vi(s.type)+" instead"):null},ho.prototype.evaluate=function(n){var r=this.needle.evaluate(n),s=this.haystack.evaluate(n);if(!s)return!1;if(!Zi(r,["boolean","string","number","null"]))throw new Wr("Expected first argument to be of type boolean, string, number or null, but found "+vi(Lr(r))+" instead.");if(!Zi(s,["string","array"]))throw new Wr("Expected second argument to be of type array or string, but found "+vi(Lr(s))+" instead.");return s.indexOf(r)>=0},ho.prototype.eachChild=function(n){n(this.needle),n(this.haystack)},ho.prototype.outputDefined=function(){return!0},ho.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ss=function(n,r,s){this.type=ae,this.needle=n,this.haystack=r,this.fromIndex=s};ss.parse=function(n,r){if(n.length<=2||n.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(n.length-1)+" instead.");var s=r.parse(n[1],1,Ye),d=r.parse(n[2],2,Ye);if(!s||!d)return null;if(!kr(s.type,[Ve,Le,ae,an,Ye]))return r.error("Expected first argument to be of type boolean, string, number or null, but found "+vi(s.type)+" instead");if(n.length===4){var v=r.parse(n[3],3,ae);return v?new ss(s,d,v):null}return new ss(s,d)},ss.prototype.evaluate=function(n){var r=this.needle.evaluate(n),s=this.haystack.evaluate(n);if(!Zi(r,["boolean","string","number","null"]))throw new Wr("Expected first argument to be of type boolean, string, number or null, but found "+vi(Lr(r))+" instead.");if(!Zi(s,["string","array"]))throw new Wr("Expected second argument to be of type array or string, but found "+vi(Lr(s))+" instead.");if(this.fromIndex){var d=this.fromIndex.evaluate(n);return s.indexOf(r,d)}return s.indexOf(r)},ss.prototype.eachChild=function(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)},ss.prototype.outputDefined=function(){return!1},ss.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ao=function(n,r,s,d,v,x){this.inputType=n,this.type=r,this.input=s,this.cases=d,this.outputs=v,this.otherwise=x};Ao.parse=function(n,r){if(n.length<5)return r.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if(n.length%2!=1)return r.error("Expected an even number of arguments.");var s,d;r.expectedType&&r.expectedType.kind!=="value"&&(d=r.expectedType);for(var v={},x=[],A=2;A<n.length-1;A+=2){var S=n[A],D=n[A+1];Array.isArray(S)||(S=[S]);var B=r.concat(A);if(S.length===0)return B.error("Expected at least one branch label.");for(var N=0,V=S;N<V.length;N+=1){var Z=V[N];if(typeof Z!="number"&&typeof Z!="string")return B.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return B.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Z=="number"&&Math.floor(Z)!==Z)return B.error("Numeric branch labels must be integer values.");if(s){if(B.checkSubtype(s,Lr(Z)))return null}else s=Lr(Z);if(v[String(Z)]!==void 0)return B.error("Branch labels must be unique.");v[String(Z)]=x.length}var J=r.parse(D,A,d);if(!J)return null;d=d||J.type,x.push(J)}var ct=r.parse(n[1],1,Ye);if(!ct)return null;var pt=r.parse(n[n.length-1],n.length-1,d);return pt?ct.type.kind!=="value"&&r.concat(1).checkSubtype(s,ct.type)?null:new Ao(s,d,ct,v,x,pt):null},Ao.prototype.evaluate=function(n){var r=this.input.evaluate(n);return(Lr(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(n)},Ao.prototype.eachChild=function(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)},Ao.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined()})&&this.otherwise.outputDefined()},Ao.prototype.serialize=function(){for(var n=this,r=["match",this.input.serialize()],s=[],d={},v=0,x=Object.keys(this.cases).sort();v<x.length;v+=1){var A=x[v];(V=d[this.cases[A]])===void 0?(d[this.cases[A]]=s.length,s.push([this.cases[A],[A]])):s[V][1].push(A)}for(var S=function(J){return n.inputType.kind==="number"?Number(J):J},D=0,B=s;D<B.length;D+=1){var N=B[D],V=N[0],Z=N[1];r.push(Z.length===1?S(Z[0]):Z.map(S)),r.push(this.outputs[outputIndex$1].serialize())}return r.push(this.otherwise.serialize()),r};var xl=function(n,r,s){this.type=n,this.branches=r,this.otherwise=s};xl.parse=function(n,r){if(n.length<4)return r.error("Expected at least 3 arguments, but found only "+(n.length-1)+".");if(n.length%2!=0)return r.error("Expected an odd number of arguments.");var s;r.expectedType&&r.expectedType.kind!=="value"&&(s=r.expectedType);for(var d=[],v=1;v<n.length-1;v+=2){var x=r.parse(n[v],v,Ve);if(!x)return null;var A=r.parse(n[v+1],v+1,s);if(!A)return null;d.push([x,A]),s=s||A.type}var S=r.parse(n[n.length-1],n.length-1,s);return S?new xl(s,d,S):null},xl.prototype.evaluate=function(n){for(var r=0,s=this.branches;r<s.length;r+=1){var d=s[r],v=d[1];if(d[0].evaluate(n))return v.evaluate(n)}return this.otherwise.evaluate(n)},xl.prototype.eachChild=function(n){for(var r=0,s=this.branches;r<s.length;r+=1){var d=s[r],v=d[1];n(d[0]),n(v)}n(this.otherwise)},xl.prototype.outputDefined=function(){return this.branches.every(function(n){return n[1].outputDefined()})&&this.otherwise.outputDefined()},xl.prototype.serialize=function(){var n=["case"];return this.eachChild(function(r){n.push(r.serialize())}),n};var Xs=function(n,r,s,d){this.type=n,this.input=r,this.beginIndex=s,this.endIndex=d};function na(n,r){return n==="=="||n==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Cu(n,r,s,d){return d.compare(r,s)===0}function Ji(n,r,s){var d=n!=="=="&&n!=="!=";return function(){function v(x,A,S){this.type=Ve,this.lhs=x,this.rhs=A,this.collator=S,this.hasUntypedArgument=x.type.kind==="value"||A.type.kind==="value"}return v.parse=function(x,A){if(x.length!==3&&x.length!==4)return A.error("Expected two or three arguments.");var S=x[0],D=A.parse(x[1],1,Ye);if(!D)return null;if(!na(S,D.type))return A.concat(1).error('"'+S+`" comparisons are not supported for type '`+vi(D.type)+"'.");var B=A.parse(x[2],2,Ye);if(!B)return null;if(!na(S,B.type))return A.concat(2).error('"'+S+`" comparisons are not supported for type '`+vi(B.type)+"'.");if(D.type.kind!==B.type.kind&&D.type.kind!=="value"&&B.type.kind!=="value")return A.error("Cannot compare types '"+vi(D.type)+"' and '"+vi(B.type)+"'.");d&&(D.type.kind==="value"&&B.type.kind!=="value"?D=new gr(B.type,[D]):D.type.kind!=="value"&&B.type.kind==="value"&&(B=new gr(D.type,[B])));var N=null;if(x.length===4){if(D.type.kind!=="string"&&B.type.kind!=="string"&&D.type.kind!=="value"&&B.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(!(N=A.parse(x[3],3,xi)))return null}return new v(D,B,N)},v.prototype.evaluate=function(x){var A=this.lhs.evaluate(x),S=this.rhs.evaluate(x);if(d&&this.hasUntypedArgument){var D=Lr(A),B=Lr(S);if(D.kind!==B.kind||D.kind!=="string"&&D.kind!=="number")throw new Wr('Expected arguments for "'+n+'" to be (string, string) or (number, number), but found ('+D.kind+", "+B.kind+") instead.")}if(this.collator&&!d&&this.hasUntypedArgument){var N=Lr(A),V=Lr(S);if(N.kind!=="string"||V.kind!=="string")return r(x,A,S)}return this.collator?s(x,A,S,this.collator.evaluate(x)):r(x,A,S)},v.prototype.eachChild=function(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)},v.prototype.outputDefined=function(){return!0},v.prototype.serialize=function(){var x=[n];return this.eachChild(function(A){x.push(A.serialize())}),x},v}()}Xs.parse=function(n,r){if(n.length<=2||n.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(n.length-1)+" instead.");var s=r.parse(n[1],1,Ye),d=r.parse(n[2],2,ae);if(!s||!d)return null;if(!kr(s.type,[gi(Ye),Le,Ye]))return r.error("Expected first argument to be of type array or string, but found "+vi(s.type)+" instead");if(n.length===4){var v=r.parse(n[3],3,ae);return v?new Xs(s.type,s,d,v):null}return new Xs(s.type,s,d)},Xs.prototype.evaluate=function(n){var r=this.input.evaluate(n),s=this.beginIndex.evaluate(n);if(!Zi(r,["string","array"]))throw new Wr("Expected first argument to be of type array or string, but found "+vi(Lr(r))+" instead.");if(this.endIndex){var d=this.endIndex.evaluate(n);return r.slice(s,d)}return r.slice(s)},Xs.prototype.eachChild=function(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)},Xs.prototype.outputDefined=function(){return!1},Xs.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Vr=Ji("==",function(n,r,s){return r===s},Cu),Ba=Ji("!=",function(n,r,s){return r!==s},function(n,r,s,d){return!Cu(0,r,s,d)}),bl=Ji("<",function(n,r,s){return r<s},function(n,r,s,d){return d.compare(r,s)<0}),qc=Ji(">",function(n,r,s){return r>s},function(n,r,s,d){return d.compare(r,s)>0}),Iu=Ji("<=",function(n,r,s){return r<=s},function(n,r,s,d){return d.compare(r,s)<=0}),Wc=Ji(">=",function(n,r,s){return r>=s},function(n,r,s,d){return d.compare(r,s)>=0}),ls=function(n,r,s,d,v){this.type=Le,this.number=n,this.locale=r,this.currency=s,this.minFractionDigits=d,this.maxFractionDigits=v};ls.parse=function(n,r){if(n.length!==3)return r.error("Expected two arguments.");var s=r.parse(n[1],1,ae);if(!s)return null;var d=n[2];if(typeof d!="object"||Array.isArray(d))return r.error("NumberFormat options argument must be an object.");var v=null;if(d.locale&&!(v=r.parse(d.locale,1,Le)))return null;var x=null;if(d.currency&&!(x=r.parse(d.currency,1,Le)))return null;var A=null;if(d["min-fraction-digits"]&&!(A=r.parse(d["min-fraction-digits"],1,ae)))return null;var S=null;return d["max-fraction-digits"]&&!(S=r.parse(d["max-fraction-digits"],1,ae))?null:new ls(s,v,x,A,S)},ls.prototype.evaluate=function(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))},ls.prototype.eachChild=function(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)},ls.prototype.outputDefined=function(){return!1},ls.prototype.serialize=function(){var n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]};var Al=function(n){this.type=ae,this.input=n};Al.parse=function(n,r){if(n.length!==2)return r.error("Expected 1 argument, but found "+(n.length-1)+" instead.");var s=r.parse(n[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?r.error("Expected argument of type string or array, but found "+vi(s.type)+" instead."):new Al(s):null},Al.prototype.evaluate=function(n){var r=this.input.evaluate(n);if(typeof r=="string"||Array.isArray(r))return r.length;throw new Wr("Expected value to be of type string or array, but found "+vi(Lr(r))+" instead.")},Al.prototype.eachChild=function(n){n(this.input)},Al.prototype.outputDefined=function(){return!1},Al.prototype.serialize=function(){var n=["length"];return this.eachChild(function(r){n.push(r.serialize())}),n};var wl={"==":Vr,"!=":Ba,">":qc,"<":bl,">=":Wc,"<=":Iu,array:gr,at:_l,boolean:gr,case:xl,coalesce:Is,collator:kt,format:Wa,image:_a,in:ho,"index-of":ss,interpolate:co,"interpolate-hcl":co,"interpolate-lab":co,length:Al,let:Ms,literal:xo,match:Ao,number:gr,"number-format":ls,object:gr,slice:Xs,step:Ii,string:gr,"to-boolean":C,"to-color":C,"to-number":C,"to-string":C,var:$s,within:Qi};function fc(n,r){var s=r[0],d=r[1],v=r[2],x=r[3];s=s.evaluate(n),d=d.evaluate(n),v=v.evaluate(n);var A=x?x.evaluate(n):1,S=jc(s,d,v,A);if(S)throw new Wr(S);return new ai(s/255*A,d/255*A,v/255*A,A)}function Kl(n,r){return n in r}function wh(n,r){var s=r[n];return s===void 0?null:s}function Ks(n){return{type:n}}function pc(n){return{result:"success",value:n}}function ia(n){return{result:"error",value:n}}function Fo(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function Qs(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Cl(n){return!!n.expression&&n.expression.interpolated}function Ri(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Mu(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Zc(n){return n}function us(n,r,s){return n!==void 0?n:r!==void 0?r:s!==void 0?s:void 0}function ra(n,r,s,d,v){return us(typeof s===v?d[s]:void 0,n.default,r.default)}function $c(n,r,s){if(Ri(s)!=="number")return us(n.default,r.default);var d=n.stops.length;if(d===1||s<=n.stops[0][0])return n.stops[0][1];if(s>=n.stops[d-1][0])return n.stops[d-1][1];var v=ji(n.stops.map(function(x){return x[0]}),s);return n.stops[v][1]}function Eu(n,r,s){var d=n.base!==void 0?n.base:1;if(Ri(s)!=="number")return us(n.default,r.default);var v=n.stops.length;if(v===1||s<=n.stops[0][0])return n.stops[0][1];if(s>=n.stops[v-1][0])return n.stops[v-1][1];var x=ji(n.stops.map(function(V){return V[0]}),s),A=function(V,Z,J,ct){var pt=ct-J,Mt=V-J;return pt===0?0:Z===1?Mt/pt:(Math.pow(Z,Mt)-1)/(Math.pow(Z,pt)-1)}(s,d,n.stops[x][0],n.stops[x+1][0]),S=n.stops[x][1],D=n.stops[x+1][1],B=Yl[r.type]||Zc;if(n.colorSpace&&n.colorSpace!=="rgb"){var N=hc[n.colorSpace];B=function(V,Z){return N.reverse(N.interpolate(N.forward(V),N.forward(Z),A))}}return typeof S.evaluate=="function"?{evaluate:function(){for(var V=[],Z=arguments.length;Z--;)V[Z]=arguments[Z];var J=S.evaluate.apply(void 0,V),ct=D.evaluate.apply(void 0,V);if(J!==void 0&&ct!==void 0)return B(J,ct,A)}}:B(S,D,A)}function dc(n,r,s){return r.type==="color"?s=ai.parse(s):r.type==="formatted"?s=Pr.fromString(s.toString()):r.type==="resolvedImage"?s=Bo.fromString(s.toString()):Ri(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0),us(s,n.default,r.default)}gt.register(wl,{error:[{kind:"error"},[Le],function(n,r){throw new Wr(r[0].evaluate(n))}],typeof:[Le,[Ye],function(n,r){return vi(Lr(r[0].evaluate(n)))}],"to-rgba":[gi(ae,4),[je],function(n,r){return r[0].evaluate(n).toArray()}],rgb:[je,[ae,ae,ae],fc],rgba:[je,[ae,ae,ae,ae],fc],has:{type:Ve,overloads:[[[Le],function(n,r){return Kl(r[0].evaluate(n),n.properties())}],[[Le,ii],function(n,r){var s=r[1];return Kl(r[0].evaluate(n),s.evaluate(n))}]]},get:{type:Ye,overloads:[[[Le],function(n,r){return wh(r[0].evaluate(n),n.properties())}],[[Le,ii],function(n,r){var s=r[1];return wh(r[0].evaluate(n),s.evaluate(n))}]]},"feature-state":[Ye,[Le],function(n,r){return wh(r[0].evaluate(n),n.featureState||{})}],properties:[ii,[],function(n){return n.properties()}],"geometry-type":[Le,[],function(n){return n.geometryType()}],id:[Ye,[],function(n){return n.id()}],zoom:[ae,[],function(n){return n.globals.zoom}],"heatmap-density":[ae,[],function(n){return n.globals.heatmapDensity||0}],"line-progress":[ae,[],function(n){return n.globals.lineProgress||0}],accumulated:[Ye,[],function(n){return n.globals.accumulated===void 0?null:n.globals.accumulated}],"+":[ae,Ks(ae),function(n,r){for(var s=0,d=0,v=r;d<v.length;d+=1)s+=v[d].evaluate(n);return s}],"*":[ae,Ks(ae),function(n,r){for(var s=1,d=0,v=r;d<v.length;d+=1)s*=v[d].evaluate(n);return s}],"-":{type:ae,overloads:[[[ae,ae],function(n,r){var s=r[1];return r[0].evaluate(n)-s.evaluate(n)}],[[ae],function(n,r){return-r[0].evaluate(n)}]]},"/":[ae,[ae,ae],function(n,r){var s=r[1];return r[0].evaluate(n)/s.evaluate(n)}],"%":[ae,[ae,ae],function(n,r){var s=r[1];return r[0].evaluate(n)%s.evaluate(n)}],ln2:[ae,[],function(){return Math.LN2}],pi:[ae,[],function(){return Math.PI}],e:[ae,[],function(){return Math.E}],"^":[ae,[ae,ae],function(n,r){var s=r[1];return Math.pow(r[0].evaluate(n),s.evaluate(n))}],sqrt:[ae,[ae],function(n,r){return Math.sqrt(r[0].evaluate(n))}],log10:[ae,[ae],function(n,r){return Math.log(r[0].evaluate(n))/Math.LN10}],ln:[ae,[ae],function(n,r){return Math.log(r[0].evaluate(n))}],log2:[ae,[ae],function(n,r){return Math.log(r[0].evaluate(n))/Math.LN2}],sin:[ae,[ae],function(n,r){return Math.sin(r[0].evaluate(n))}],cos:[ae,[ae],function(n,r){return Math.cos(r[0].evaluate(n))}],tan:[ae,[ae],function(n,r){return Math.tan(r[0].evaluate(n))}],asin:[ae,[ae],function(n,r){return Math.asin(r[0].evaluate(n))}],acos:[ae,[ae],function(n,r){return Math.acos(r[0].evaluate(n))}],atan:[ae,[ae],function(n,r){return Math.atan(r[0].evaluate(n))}],min:[ae,Ks(ae),function(n,r){return Math.min.apply(Math,r.map(function(s){return s.evaluate(n)}))}],max:[ae,Ks(ae),function(n,r){return Math.max.apply(Math,r.map(function(s){return s.evaluate(n)}))}],abs:[ae,[ae],function(n,r){return Math.abs(r[0].evaluate(n))}],round:[ae,[ae],function(n,r){var s=r[0].evaluate(n);return s<0?-Math.round(-s):Math.round(s)}],floor:[ae,[ae],function(n,r){return Math.floor(r[0].evaluate(n))}],ceil:[ae,[ae],function(n,r){return Math.ceil(r[0].evaluate(n))}],"filter-==":[Ve,[Le,Ye],function(n,r){var s=r[0],d=r[1];return n.properties()[s.value]===d.value}],"filter-id-==":[Ve,[Ye],function(n,r){var s=r[0];return n.id()===s.value}],"filter-type-==":[Ve,[Le],function(n,r){var s=r[0];return n.geometryType()===s.value}],"filter-<":[Ve,[Le,Ye],function(n,r){var s=r[0],d=r[1],v=n.properties()[s.value],x=d.value;return typeof v==typeof x&&v<x}],"filter-id-<":[Ve,[Ye],function(n,r){var s=r[0],d=n.id(),v=s.value;return typeof d==typeof v&&d<v}],"filter->":[Ve,[Le,Ye],function(n,r){var s=r[0],d=r[1],v=n.properties()[s.value],x=d.value;return typeof v==typeof x&&v>x}],"filter-id->":[Ve,[Ye],function(n,r){var s=r[0],d=n.id(),v=s.value;return typeof d==typeof v&&d>v}],"filter-<=":[Ve,[Le,Ye],function(n,r){var s=r[0],d=r[1],v=n.properties()[s.value],x=d.value;return typeof v==typeof x&&v<=x}],"filter-id-<=":[Ve,[Ye],function(n,r){var s=r[0],d=n.id(),v=s.value;return typeof d==typeof v&&d<=v}],"filter->=":[Ve,[Le,Ye],function(n,r){var s=r[0],d=r[1],v=n.properties()[s.value],x=d.value;return typeof v==typeof x&&v>=x}],"filter-id->=":[Ve,[Ye],function(n,r){var s=r[0],d=n.id(),v=s.value;return typeof d==typeof v&&d>=v}],"filter-has":[Ve,[Ye],function(n,r){return r[0].value in n.properties()}],"filter-has-id":[Ve,[],function(n){return n.id()!==null&&n.id()!==void 0}],"filter-type-in":[Ve,[gi(Le)],function(n,r){return r[0].value.indexOf(n.geometryType())>=0}],"filter-id-in":[Ve,[gi(Ye)],function(n,r){return r[0].value.indexOf(n.id())>=0}],"filter-in-small":[Ve,[Le,gi(Ye)],function(n,r){var s=r[0];return r[1].value.indexOf(n.properties()[s.value])>=0}],"filter-in-large":[Ve,[Le,gi(Ye)],function(n,r){var s=r[0],d=r[1];return function(v,x,A,S){for(;A<=S;){var D=A+S>>1;if(x[D]===v)return!0;x[D]>v?S=D-1:A=D+1}return!1}(n.properties()[s.value],d.value,0,d.value.length-1)}],all:{type:Ve,overloads:[[[Ve,Ve],function(n,r){var s=r[1];return r[0].evaluate(n)&&s.evaluate(n)}],[Ks(Ve),function(n,r){for(var s=0,d=r;s<d.length;s+=1)if(!d[s].evaluate(n))return!1;return!0}]]},any:{type:Ve,overloads:[[[Ve,Ve],function(n,r){var s=r[1];return r[0].evaluate(n)||s.evaluate(n)}],[Ks(Ve),function(n,r){for(var s=0,d=r;s<d.length;s+=1)if(d[s].evaluate(n))return!0;return!1}]]},"!":[Ve,[Ve],function(n,r){return!r[0].evaluate(n)}],"is-supported-script":[Ve,[Le],function(n,r){var s=n.globals&&n.globals.isSupportedScript;return!s||s(r[0].evaluate(n))}],upcase:[Le,[Le],function(n,r){return r[0].evaluate(n).toUpperCase()}],downcase:[Le,[Le],function(n,r){return r[0].evaluate(n).toLowerCase()}],concat:[Le,Ks(Ye),function(n,r){return r.map(function(s){return wu(s.evaluate(n))}).join("")}],"resolved-locale":[Le,[xi],function(n,r){return r[0].evaluate(n).resolvedLocale()}]});var Il=function(n,r){this.expression=n,this._warningHistory={},this._evaluator=new Y,this._defaultValue=r?function(s){return s.type==="color"&&Mu(s.default)?new ai(0,0,0,0):s.type==="color"?ai.parse(s.default)||null:s.default===void 0?null:s.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null};function Su(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in wl}function Ql(n,r){var s=new yl(wl,[],r?function(v){var x={color:je,string:Le,number:ae,enum:Le,boolean:Ve,formatted:Ui,resolvedImage:hi};return v.type==="array"?gi(x[v.value]||Ye,v.length):x[v.type]}(r):void 0),d=s.parse(n,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?pc(new Il(d,r)):ia(s.errors)}Il.prototype.evaluateWithoutErrorHandling=function(n,r,s,d,v,x){return this._evaluator.globals=n,this._evaluator.feature=r,this._evaluator.featureState=s,this._evaluator.canonical=d,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)},Il.prototype.evaluate=function(n,r,s,d,v,x){this._evaluator.globals=n,this._evaluator.feature=r||null,this._evaluator.featureState=s||null,this._evaluator.canonical=d,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{var A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new Wr("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(A)+" instead.");return A}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}};var Es=function(n,r){this.kind=n,this._styleExpression=r,this.isStateDependent=n!=="constant"&&!vl(r.expression)};Es.prototype.evaluateWithoutErrorHandling=function(n,r,s,d,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,r,s,d,v,x)},Es.prototype.evaluate=function(n,r,s,d,v,x){return this._styleExpression.evaluate(n,r,s,d,v,x)};var Tu=function(n,r,s,d){this.kind=n,this.zoomStops=s,this._styleExpression=r,this.isStateDependent=n!=="camera"&&!vl(r.expression),this.interpolationType=d};function Js(n,r){if((n=Ql(n,r)).result==="error")return n;var s=n.value.expression,d=Cs(s);if(!d&&!Fo(r))return ia([new ye("","data expressions not supported")]);var v=nr(s,["zoom"]);if(!v&&!Qs(r))return ia([new ye("","zoom expressions not supported")]);var x=function A(S){var D=null;if(S instanceof Ms)D=A(S.result);else if(S instanceof Is)for(var B=0,N=S.args;B<N.length&&!(D=A(N[B]));B+=1);else(S instanceof Ii||S instanceof co)&&S.input instanceof gt&&S.input.name==="zoom"&&(D=S);return D instanceof ye||S.eachChild(function(V){var Z=A(V);Z instanceof ye?D=Z:!D&&Z?D=new ye("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):D&&Z&&D!==Z&&(D=new ye("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),D}(s);return x||v?x instanceof ye?ia([x]):x instanceof co&&!Cl(r)?ia([new ye("",'"interpolate" expressions cannot be used with this property')]):pc(x?new Tu(d?"camera":"composite",n.value,x.labels,x instanceof co?x.interpolation:void 0):new Es(d?"constant":"source",n.value)):ia([new ye("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Tu.prototype.evaluateWithoutErrorHandling=function(n,r,s,d,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,r,s,d,v,x)},Tu.prototype.evaluate=function(n,r,s,d,v,x){return this._styleExpression.evaluate(n,r,s,d,v,x)},Tu.prototype.interpolationFactor=function(n,r,s){return this.interpolationType?co.interpolationFactor(this.interpolationType,n,r,s):0};var cs=function(n,r){this._parameters=n,this._specification=r,ge(this,function s(d,v){var x,A,S,D=v.type==="color",B=d.stops&&typeof d.stops[0][0]=="object",N=B||!(B||d.property!==void 0),V=d.type||(Cl(v)?"exponential":"interval");if(D&&((d=ge({},d)).stops&&(d.stops=d.stops.map(function(Ze){return[Ze[0],ai.parse(Ze[1])]})),d.default=ai.parse(d.default?d.default:v.default)),d.colorSpace&&d.colorSpace!=="rgb"&&!hc[d.colorSpace])throw new Error("Unknown color space: "+d.colorSpace);if(V==="exponential")x=Eu;else if(V==="interval")x=$c;else if(V==="categorical"){x=ra,A=Object.create(null);for(var Z=0,J=d.stops;Z<J.length;Z+=1){var ct=J[Z];A[ct[0]]=ct[1]}S=typeof d.stops[0][0]}else{if(V!=="identity")throw new Error('Unknown function type "'+V+'"');x=dc}if(B){for(var pt={},Mt=[],bt=0;bt<d.stops.length;bt++){var Ut=d.stops[bt],$t=Ut[0].zoom;pt[$t]===void 0&&(pt[$t]={zoom:$t,type:d.type,property:d.property,default:d.default,stops:[]},Mt.push($t)),pt[$t].stops.push([Ut[0].value,Ut[1]])}for(var te=[],ne=0,fe=Mt;ne<fe.length;ne+=1){var Me=fe[ne];te.push([pt[Me].zoom,s(pt[Me],v)])}var Fe={name:"linear"};return{kind:"composite",interpolationType:Fe,interpolationFactor:co.interpolationFactor.bind(void 0,Fe),zoomStops:te.map(function(Ze){return Ze[0]}),evaluate:function(Ze,Mn){var Je=Ze.zoom;return Eu({stops:te,base:d.base},v,Je).evaluate(Je,Mn)}}}if(N){var _n=V==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:_n,interpolationFactor:co.interpolationFactor.bind(void 0,_n),zoomStops:d.stops.map(function(Ze){return Ze[0]}),evaluate:function(Ze){return x(d,v,Ze.zoom,A,S)}}}return{kind:"source",evaluate:function(Ze,Mn){var Je=Mn&&Mn.properties?Mn.properties[d.property]:void 0;return Je===void 0?us(d.default,v.default):x(d,v,Je,A,S)}}}(this._parameters,this._specification))};function No(n){var r=n.key,s=n.value,d=n.valueSpec||{},v=n.objectElementValidators||{},x=n.style,A=n.styleSpec,S=[],D=Ri(s);if(D!=="object")return[new yt(r,s,"object expected, "+D+" found")];for(var B in s){var N=B.split(".")[0],V=d[N]||d["*"],Z=void 0;if(v[N])Z=v[N];else if(d[N])Z=dn;else if(v["*"])Z=v["*"];else{if(!d["*"]){S.push(new yt(r,s[B],'unknown property "'+B+'"'));continue}Z=dn}S=S.concat(Z({key:(r&&r+".")+B,value:s[B],valueSpec:V,style:x,styleSpec:A,object:s,objectKey:B},s))}for(var J in d)v[J]||d[J].required&&d[J].default===void 0&&s[J]===void 0&&S.push(new yt(r,s,'missing required property "'+J+'"'));return S}function Ch(n){var r=n.value,s=n.valueSpec,d=n.style,v=n.styleSpec,x=n.key,A=n.arrayElementValidator||dn;if(Ri(r)!=="array")return[new yt(x,r,"array expected, "+Ri(r)+" found")];if(s.length&&r.length!==s.length)return[new yt(x,r,"array length "+s.length+" expected, length "+r.length+" found")];if(s["min-length"]&&r.length<s["min-length"])return[new yt(x,r,"array length at least "+s["min-length"]+" expected, length "+r.length+" found")];var S={type:s.value,values:s.values};v.$version<7&&(S.function=s.function),Ri(s.value)==="object"&&(S=s.value);for(var D=[],B=0;B<r.length;B++)D=D.concat(A({array:r,arrayIndex:B,value:r[B],valueSpec:S,style:d,styleSpec:v,key:x+"["+B+"]"}));return D}function Yc(n){var r=n.key,s=n.value,d=n.valueSpec,v=Ri(s);return v==="number"&&s!=s&&(v="NaN"),v!=="number"?[new yt(r,s,"number expected, "+v+" found")]:"minimum"in d&&s<d.minimum?[new yt(r,s,s+" is less than the minimum value "+d.minimum)]:"maximum"in d&&s>d.maximum?[new yt(r,s,s+" is greater than the maximum value "+d.maximum)]:[]}function ku(n){var r,s,d,v=n.valueSpec,x=be(n.value.type),A={},S=x!=="categorical"&&n.value.property===void 0,D=!S,B=Ri(n.value.stops)==="array"&&Ri(n.value.stops[0])==="array"&&Ri(n.value.stops[0][0])==="object",N=No({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(J){if(x==="identity")return[new yt(J.key,J.value,'identity function may not have a "stops" property')];var ct=[],pt=J.value;return ct=ct.concat(Ch({key:J.key,value:pt,valueSpec:J.valueSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:V})),Ri(pt)==="array"&&pt.length===0&&ct.push(new yt(J.key,pt,"array must have at least one stop")),ct},default:function(J){return dn({key:J.key,value:J.value,valueSpec:v,style:J.style,styleSpec:J.styleSpec})}}});return x==="identity"&&S&&N.push(new yt(n.key,n.value,'missing required property "property"')),x==="identity"||n.value.stops||N.push(new yt(n.key,n.value,'missing required property "stops"')),x==="exponential"&&n.valueSpec.expression&&!Cl(n.valueSpec)&&N.push(new yt(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(D&&!Fo(n.valueSpec)?N.push(new yt(n.key,n.value,"property functions not supported")):S&&!Qs(n.valueSpec)&&N.push(new yt(n.key,n.value,"zoom functions not supported"))),x!=="categorical"&&!B||n.value.property!==void 0||N.push(new yt(n.key,n.value,'"property" property is required')),N;function V(J){var ct=[],pt=J.value,Mt=J.key;if(Ri(pt)!=="array")return[new yt(Mt,pt,"array expected, "+Ri(pt)+" found")];if(pt.length!==2)return[new yt(Mt,pt,"array length 2 expected, length "+pt.length+" found")];if(B){if(Ri(pt[0])!=="object")return[new yt(Mt,pt,"object expected, "+Ri(pt[0])+" found")];if(pt[0].zoom===void 0)return[new yt(Mt,pt,"object stop key must have zoom")];if(pt[0].value===void 0)return[new yt(Mt,pt,"object stop key must have value")];if(d&&d>be(pt[0].zoom))return[new yt(Mt,pt[0].zoom,"stop zoom values must appear in ascending order")];be(pt[0].zoom)!==d&&(d=be(pt[0].zoom),s=void 0,A={}),ct=ct.concat(No({key:Mt+"[0]",value:pt[0],valueSpec:{zoom:{}},style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Yc,value:Z}}))}else ct=ct.concat(Z({key:Mt+"[0]",value:pt[0],valueSpec:{},style:J.style,styleSpec:J.styleSpec},pt));return Su(re(pt[1]))?ct.concat([new yt(Mt+"[1]",pt[1],"expressions are not allowed in function stops.")]):ct.concat(dn({key:Mt+"[1]",value:pt[1],valueSpec:v,style:J.style,styleSpec:J.styleSpec}))}function Z(J,ct){var pt=Ri(J.value),Mt=be(J.value),bt=J.value!==null?J.value:ct;if(r){if(pt!==r)return[new yt(J.key,bt,pt+" stop domain type must match previous stop domain type "+r)]}else r=pt;if(pt!=="number"&&pt!=="string"&&pt!=="boolean")return[new yt(J.key,bt,"stop domain value must be a number, string, or boolean")];if(pt!=="number"&&x!=="categorical"){var Ut="number expected, "+pt+" found";return Fo(v)&&x===void 0&&(Ut+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yt(J.key,bt,Ut)]}return x!=="categorical"||pt!=="number"||isFinite(Mt)&&Math.floor(Mt)===Mt?x!=="categorical"&&pt==="number"&&s!==void 0&&Mt<s?[new yt(J.key,bt,"stop domain values must appear in ascending order")]:(s=Mt,x==="categorical"&&Mt in A?[new yt(J.key,bt,"stop domain values must be unique")]:(A[Mt]=!0,[])):[new yt(J.key,bt,"integer expected, found "+Mt)]}}function Xo(n){var r=(n.expressionContext==="property"?Js:Ql)(re(n.value),n.valueSpec);if(r.result==="error")return r.value.map(function(d){return new yt(""+n.key+d.key,n.value,d.message)});var s=r.value.expression||r.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!s.outputDefined())return[new yt(n.key,n.value,'Invalid data expression for "'+n.propertyKey+'". Output values must be contained as literals within the expression.')];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!vl(s))return[new yt(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!vl(s))return[new yt(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!nr(s,["zoom","feature-state"]))return[new yt(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Cs(s))return[new yt(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tl(n){var r=n.key,s=n.value,d=n.valueSpec,v=[];return Array.isArray(d.values)?d.values.indexOf(be(s))===-1&&v.push(new yt(r,s,"expected one of ["+d.values.join(", ")+"], "+JSON.stringify(s)+" found")):Object.keys(d.values).indexOf(be(s))===-1&&v.push(new yt(r,s,"expected one of ["+Object.keys(d.values).join(", ")+"], "+JSON.stringify(s)+" found")),v}function mc(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(var r=0,s=n.slice(1);r<s.length;r+=1){var d=s[r];if(!mc(d)&&typeof d!="boolean")return!1}return!0;default:return!0}}cs.deserialize=function(n){return new cs(n._parameters,n._specification)},cs.serialize=function(n){return{_parameters:n._parameters,_specification:n._specification}};var Xc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ml(n){if(n==null)return{filter:function(){return!0},needGeometry:!1};mc(n)||(n=xa(n));var r=Ql(n,Xc);if(r.result==="error")throw new Error(r.value.map(function(s){return s.key+": "+s.message}).join(", "));return{filter:function(s,d,v){return r.value.evaluate(s,d,{},v)},needGeometry:function s(d){if(!Array.isArray(d))return!1;if(d[0]==="within")return!0;for(var v=1;v<d.length;v++)if(s(d[v]))return!0;return!1}(n)}}function Jl(n,r){return n<r?-1:n>r?1:0}function xa(n){if(!n)return!0;var r,s=n[0];return n.length<=1?s!=="any":s==="=="?Wt(n[1],n[2],"=="):s==="!="?Rn(Wt(n[1],n[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Wt(n[1],n[2],s):s==="any"?(r=n.slice(1),["any"].concat(r.map(xa))):s==="all"?["all"].concat(n.slice(1).map(xa)):s==="none"?["all"].concat(n.slice(1).map(xa).map(Rn)):s==="in"?ce(n[1],n.slice(2)):s==="!in"?Rn(ce(n[1],n.slice(2))):s==="has"?rn(n[1]):s==="!has"?Rn(rn(n[1])):s!=="within"||n}function Wt(n,r,s){switch(n){case"$type":return["filter-type-"+s,r];case"$id":return["filter-id-"+s,r];default:return["filter-"+s,n,r]}}function ce(n,r){if(r.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(function(s){return typeof s!=typeof r[0]})?["filter-in-large",n,["literal",r.sort(Jl)]]:["filter-in-small",n,["literal",r]]}}function rn(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Rn(n){return["!",n]}function vr(n){return mc(re(n.value))?Xo(ge({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function r(s){var d=s.value,v=s.key;if(Ri(d)!=="array")return[new yt(v,d,"array expected, "+Ri(d)+" found")];var x,A=s.styleSpec,S=[];if(d.length<1)return[new yt(v,d,"filter array must have at least 1 element")];switch(S=S.concat(tl({key:v+"[0]",value:d[0],valueSpec:A.filter_operator,style:s.style,styleSpec:s.styleSpec})),be(d[0])){case"<":case"<=":case">":case">=":d.length>=2&&be(d[1])==="$type"&&S.push(new yt(v,d,'"$type" cannot be use with operator "'+d[0]+'"'));case"==":case"!=":d.length!==3&&S.push(new yt(v,d,'filter array for operator "'+d[0]+'" must have 3 elements'));case"in":case"!in":d.length>=2&&(x=Ri(d[1]))!=="string"&&S.push(new yt(v+"[1]",d[1],"string expected, "+x+" found"));for(var D=2;D<d.length;D++)x=Ri(d[D]),be(d[1])==="$type"?S=S.concat(tl({key:v+"["+D+"]",value:d[D],valueSpec:A.geometry_type,style:s.style,styleSpec:s.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&S.push(new yt(v+"["+D+"]",d[D],"string, number, or boolean expected, "+x+" found"));break;case"any":case"all":case"none":for(var B=1;B<d.length;B++)S=S.concat(r({key:v+"["+B+"]",value:d[B],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":x=Ri(d[1]),d.length!==2?S.push(new yt(v,d,'filter array for "'+d[0]+'" operator must have 2 elements')):x!=="string"&&S.push(new yt(v+"[1]",d[1],"string expected, "+x+" found"));break;case"within":x=Ri(d[1]),d.length!==2?S.push(new yt(v,d,'filter array for "'+d[0]+'" operator must have 2 elements')):x!=="object"&&S.push(new yt(v+"[1]",d[1],"object expected, "+x+" found"))}return S}(n)}function zi(n,r){var s=n.key,d=n.style,v=n.styleSpec,x=n.value,A=n.objectKey,S=v[r+"_"+n.layerType];if(!S)return[];var D=A.match(/^(.*)-transition$/);if(r==="paint"&&D&&S[D[1]]&&S[D[1]].transition)return dn({key:s,value:x,valueSpec:v.transition,style:d,styleSpec:v});var B,N=n.valueSpec||S[A];if(!N)return[new yt(s,x,'unknown property "'+A+'"')];if(Ri(x)==="string"&&Fo(N)&&!N.tokens&&(B=/^{([^}]+)}$/.exec(x)))return[new yt(s,x,'"'+A+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(B[1])+" }`.")];var V=[];return n.layerType==="symbol"&&(A==="text-field"&&d&&!d.glyphs&&V.push(new yt(s,x,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&Mu(re(x))&&be(x.type)==="identity"&&V.push(new yt(s,x,'"text-font" does not support identity functions'))),V.concat(dn({key:n.key,value:x,valueSpec:N,style:d,styleSpec:v,expressionContext:"property",propertyType:r,propertyKey:A}))}function hr(n){return zi(n,"paint")}function Ot(n){return zi(n,"layout")}function he(n){var r=[],s=n.value,d=n.key,v=n.style,x=n.styleSpec;s.type||s.ref||r.push(new yt(d,s,'either "type" or "ref" is required'));var A,S=be(s.type),D=be(s.ref);if(s.id)for(var B=be(s.id),N=0;N<n.arrayIndex;N++){var V=v.layers[N];be(V.id)===B&&r.push(new yt(d,s.id,'duplicate layer id "'+s.id+'", previously used at line '+V.id.__line__))}if("ref"in s)["type","source","source-layer","filter","layout"].forEach(function(ct){ct in s&&r.push(new yt(d,s[ct],'"'+ct+'" is prohibited for ref layers'))}),v.layers.forEach(function(ct){be(ct.id)===D&&(A=ct)}),A?A.ref?r.push(new yt(d,s.ref,"ref cannot reference another ref layer")):S=be(A.type):r.push(new yt(d,s.ref,'ref layer "'+D+'" not found'));else if(S!=="background")if(s.source){var Z=v.sources&&v.sources[s.source],J=Z&&be(Z.type);Z?J==="vector"&&S==="raster"?r.push(new yt(d,s.source,'layer "'+s.id+'" requires a raster source')):J==="raster"&&S!=="raster"?r.push(new yt(d,s.source,'layer "'+s.id+'" requires a vector source')):J!=="vector"||s["source-layer"]?J==="raster-dem"&&S!=="hillshade"?r.push(new yt(d,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!s.paint||!s.paint["line-gradient"]||J==="geojson"&&Z.lineMetrics||r.push(new yt(d,s,'layer "'+s.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):r.push(new yt(d,s,'layer "'+s.id+'" must specify a "source-layer"')):r.push(new yt(d,s.source,'source "'+s.source+'" not found'))}else r.push(new yt(d,s,'missing required property "source"'));return r=r.concat(No({key:d,value:s,valueSpec:x.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return dn({key:d+".type",value:s.type,valueSpec:x.layer.type,style:n.style,styleSpec:n.styleSpec,object:s,objectKey:"type"})},filter:vr,layout:function(ct){return No({layer:s,key:ct.key,value:ct.value,style:ct.style,styleSpec:ct.styleSpec,objectElementValidators:{"*":function(pt){return Ot(ge({layerType:S},pt))}}})},paint:function(ct){return No({layer:s,key:ct.key,value:ct.value,style:ct.style,styleSpec:ct.styleSpec,objectElementValidators:{"*":function(pt){return hr(ge({layerType:S},pt))}}})}}}))}function Kt(n){var r=n.value,s=n.key,d=Ri(r);return d!=="string"?[new yt(s,r,"string expected, "+d+" found")]:[]}var Ae={promoteId:function(n){var r=n.key,s=n.value;if(Ri(s)==="string")return Kt({key:r,value:s});var d=[];for(var v in s)d.push.apply(d,Kt({key:r+"."+v,value:s[v]}));return d}};function Un(n){var r=n.value,s=n.key,d=n.styleSpec,v=n.style;if(!r.type)return[new yt(s,r,'"type" is required')];var x,A=be(r.type);switch(A){case"vector":case"raster":case"raster-dem":return No({key:s,value:r,valueSpec:d["source_"+A.replace("-","_")],style:n.style,styleSpec:d,objectElementValidators:Ae});case"geojson":if(x=No({key:s,value:r,valueSpec:d.source_geojson,style:v,styleSpec:d,objectElementValidators:Ae}),r.cluster)for(var S in r.clusterProperties){var D=r.clusterProperties[S],B=D[0],N=typeof B=="string"?[B,["accumulated"],["get",S]]:B;x.push.apply(x,Xo({key:s+"."+S+".map",value:D[1],expressionContext:"cluster-map"})),x.push.apply(x,Xo({key:s+"."+S+".reduce",value:N,expressionContext:"cluster-reduce"}))}return x;case"video":return No({key:s,value:r,valueSpec:d.source_video,style:v,styleSpec:d});case"image":return No({key:s,value:r,valueSpec:d.source_image,style:v,styleSpec:d});case"canvas":return[new yt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tl({key:s+".type",value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:v,styleSpec:d})}}function li(n){var r=n.value,s=n.styleSpec,d=s.light,v=n.style,x=[],A=Ri(r);if(r===void 0)return x;if(A!=="object")return x.concat([new yt("light",r,"object expected, "+A+" found")]);for(var S in r){var D=S.match(/^(.*)-transition$/);x=x.concat(D&&d[D[1]]&&d[D[1]].transition?dn({key:S,value:r[S],valueSpec:s.transition,style:v,styleSpec:s}):d[S]?dn({key:S,value:r[S],valueSpec:d[S],style:v,styleSpec:s}):[new yt(S,r[S],'unknown property "'+S+'"')])}return x}var Mi={"*":function(){return[]},array:Ch,boolean:function(n){var r=n.value,s=n.key,d=Ri(r);return d!=="boolean"?[new yt(s,r,"boolean expected, "+d+" found")]:[]},number:Yc,color:function(n){var r=n.key,s=n.value,d=Ri(s);return d!=="string"?[new yt(r,s,"color expected, "+d+" found")]:$n(s)===null?[new yt(r,s,'color expected, "'+s+'" found')]:[]},constants:Zt,enum:tl,filter:vr,function:ku,layer:he,object:No,source:Un,light:li,string:Kt,formatted:function(n){return Kt(n).length===0?[]:Xo(n)},resolvedImage:function(n){return Kt(n).length===0?[]:Xo(n)}};function dn(n){var r=n.value,s=n.valueSpec,d=n.styleSpec;return s.expression&&Mu(be(r))?ku(n):s.expression&&Su(re(r))?Xo(n):s.type&&Mi[s.type]?Mi[s.type](n):No(ge({},n,{valueSpec:s.type?d[s.type]:s}))}function Hi(n){var r=n.value,s=n.key,d=Kt(n);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new yt(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new yt(s,r,'"glyphs" url must include a "{range}" token'))),d}function Ko(n,r){r===void 0&&(r=tt);var s=[];return s=s.concat(dn({key:"",value:n,valueSpec:r.$root,styleSpec:r,style:n,objectElementValidators:{glyphs:Hi,"*":function(){return[]}}})),n.constants&&(s=s.concat(Zt({key:"constants",value:n.constants,style:n,styleSpec:r}))),io(s)}function io(n){return[].concat(n).sort(function(r,s){return r.line-s.line})}function Fa(n){return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return io(n.apply(this,r))}}Ko.source=Fa(Un),Ko.light=Fa(li),Ko.layer=Fa(he),Ko.filter=Fa(vr),Ko.paintProperty=Fa(hr),Ko.layoutProperty=Fa(Ot);var Pu=Ko,Lu=Pu.light,Kc=Pu.paintProperty,$i=Pu.layoutProperty;function Ln(n,r){var s=!1;if(r&&r.length)for(var d=0,v=r;d<v.length;d+=1)n.fire(new Tt(new Error(v[d].message))),s=!0;return s}var Za=fr;function fr(n,r,s){var d=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var v=new Int32Array(this.arrayBuffer);n=v[0],this.d=(r=v[1])+2*(s=v[2]);for(var x=0;x<this.d*this.d;x++){var A=v[3+x],S=v[3+x+1];d.push(A===S?null:v.subarray(A,S))}var D=v[3+d.length+1];this.keys=v.subarray(v[3+d.length],D),this.bboxes=v.subarray(D),this.insert=this._insertReadonly}else{this.d=r+2*s;for(var B=0;B<this.d*this.d;B++)d.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=n,this.padding=s,this.scale=r/n,this.uid=0;var N=s/r*n;this.min=-N,this.max=n+N}fr.prototype.insert=function(n,r,s,d,v){this._forEachCell(r,s,d,v,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(r),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(v)},fr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},fr.prototype._insertCell=function(n,r,s,d,v,x){this.cells[v].push(x)},fr.prototype.query=function(n,r,s,d,v){var x=this.min,A=this.max;if(n<=x&&r<=x&&A<=s&&A<=d&&!v)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(n,r,s,d,this._queryCell,S,{},v),S},fr.prototype._queryCell=function(n,r,s,d,v,x,A,S){var D=this.cells[v];if(D!==null)for(var B=this.keys,N=this.bboxes,V=0;V<D.length;V++){var Z=D[V];if(A[Z]===void 0){var J=4*Z;(S?S(N[J+0],N[J+1],N[J+2],N[J+3]):n<=N[J+2]&&r<=N[J+3]&&s>=N[J+0]&&d>=N[J+1])?(A[Z]=!0,x.push(B[Z])):A[Z]=!1}}},fr.prototype._forEachCell=function(n,r,s,d,v,x,A,S){for(var D=this._convertToCellCoord(n),B=this._convertToCellCoord(r),N=this._convertToCellCoord(s),V=this._convertToCellCoord(d),Z=D;Z<=N;Z++)for(var J=B;J<=V;J++){var ct=this.d*J+Z;if((!S||S(this._convertFromCellCoord(Z),this._convertFromCellCoord(J),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(J+1)))&&v.call(this,n,r,s,d,ct,x,A,S))return}},fr.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},fr.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},fr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,r=3+this.cells.length+1+1,s=0,d=0;d<this.cells.length;d++)s+=this.cells[d].length;var v=new Int32Array(r+s+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;for(var x=r,A=0;A<n.length;A++){var S=n[A];v[3+A]=x,v.set(S,x),x+=S.length}return v[3+n.length]=x,v.set(this.keys,x),v[3+n.length+1]=x+=this.keys.length,v.set(this.bboxes,x),x+=this.bboxes.length,v.buffer};var Ss=P.ImageData,Na=P.ImageBitmap,sr={};function Xe(n,r,s){s===void 0&&(s={}),Object.defineProperty(r,"_classRegistryKey",{value:n,writeable:!1}),sr[n]={klass:r,omit:s.omit||[],shallow:s.shallow||[]}}for(var ro in Xe("Object",Object),Za.serialize=function(n,r){var s=n.toArrayBuffer();return r&&r.push(s),{buffer:s}},Za.deserialize=function(n){return new Za(n.buffer)},Xe("Grid",Za),Xe("Color",ai),Xe("Error",Error),Xe("ResolvedImage",Bo),Xe("StylePropertyFunction",cs),Xe("StyleExpression",Il,{omit:["_evaluator"]}),Xe("ZoomDependentExpression",Tu),Xe("ZoomConstantExpression",Es),Xe("CompoundExpression",gt,{omit:["_evaluate"]}),wl)wl[ro]._classRegistryKey||Xe("Expression_"+ro,wl[ro]);function ba(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function Aa(n){return Na&&n instanceof Na}function Po(n,r){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(ba(n)||Aa(n))return r&&r.push(n),n;if(ArrayBuffer.isView(n)){var s=n;return r&&r.push(s.buffer),s}if(n instanceof Ss)return r&&r.push(n.data.buffer),n;if(Array.isArray(n)){for(var d=[],v=0,x=n;v<x.length;v+=1)d.push(Po(x[v],r));return d}if(typeof n=="object"){var A=n.constructor,S=A._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var D=A.serialize?A.serialize(n,r):{};if(!A.serialize){for(var B in n)if(n.hasOwnProperty(B)&&!(sr[S].omit.indexOf(B)>=0)){var N=n[B];D[B]=sr[S].shallow.indexOf(B)>=0?N:Po(N,r)}n instanceof Error&&(D.message=n.message)}if(D.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(D.$name=S),D}throw new Error("can't serialize object of type "+typeof n)}function Lo(n){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||ba(n)||Aa(n)||ArrayBuffer.isView(n)||n instanceof Ss)return n;if(Array.isArray(n))return n.map(Lo);if(typeof n=="object"){var r=n.$name||"Object",s=sr[r].klass;if(!s)throw new Error("can't deserialize unregistered class "+r);if(s.deserialize)return s.deserialize(n);for(var d=Object.create(s.prototype),v=0,x=Object.keys(n);v<x.length;v+=1){var A=x[v];if(A!=="$name"){var S=n[A];d[A]=sr[r].shallow.indexOf(A)>=0?S:Lo(S)}}return d}throw new Error("can't deserialize object of type "+typeof n)}var tu=function(){this.first=!0};tu.prototype.update=function(n,r){var s=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=r),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=s,!0))};var Re={"Latin-1 Supplement":function(n){return n>=128&&n<=255},Arabic:function(n){return n>=1536&&n<=1791},"Arabic Supplement":function(n){return n>=1872&&n<=1919},"Arabic Extended-A":function(n){return n>=2208&&n<=2303},"Hangul Jamo":function(n){return n>=4352&&n<=4607},"Unified Canadian Aboriginal Syllabics":function(n){return n>=5120&&n<=5759},Khmer:function(n){return n>=6016&&n<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(n){return n>=6320&&n<=6399},"General Punctuation":function(n){return n>=8192&&n<=8303},"Letterlike Symbols":function(n){return n>=8448&&n<=8527},"Number Forms":function(n){return n>=8528&&n<=8591},"Miscellaneous Technical":function(n){return n>=8960&&n<=9215},"Control Pictures":function(n){return n>=9216&&n<=9279},"Optical Character Recognition":function(n){return n>=9280&&n<=9311},"Enclosed Alphanumerics":function(n){return n>=9312&&n<=9471},"Geometric Shapes":function(n){return n>=9632&&n<=9727},"Miscellaneous Symbols":function(n){return n>=9728&&n<=9983},"Miscellaneous Symbols and Arrows":function(n){return n>=11008&&n<=11263},"CJK Radicals Supplement":function(n){return n>=11904&&n<=12031},"Kangxi Radicals":function(n){return n>=12032&&n<=12255},"Ideographic Description Characters":function(n){return n>=12272&&n<=12287},"CJK Symbols and Punctuation":function(n){return n>=12288&&n<=12351},Hiragana:function(n){return n>=12352&&n<=12447},Katakana:function(n){return n>=12448&&n<=12543},Bopomofo:function(n){return n>=12544&&n<=12591},"Hangul Compatibility Jamo":function(n){return n>=12592&&n<=12687},Kanbun:function(n){return n>=12688&&n<=12703},"Bopomofo Extended":function(n){return n>=12704&&n<=12735},"CJK Strokes":function(n){return n>=12736&&n<=12783},"Katakana Phonetic Extensions":function(n){return n>=12784&&n<=12799},"Enclosed CJK Letters and Months":function(n){return n>=12800&&n<=13055},"CJK Compatibility":function(n){return n>=13056&&n<=13311},"CJK Unified Ideographs Extension A":function(n){return n>=13312&&n<=19903},"Yijing Hexagram Symbols":function(n){return n>=19904&&n<=19967},"CJK Unified Ideographs":function(n){return n>=19968&&n<=40959},"Yi Syllables":function(n){return n>=40960&&n<=42127},"Yi Radicals":function(n){return n>=42128&&n<=42191},"Hangul Jamo Extended-A":function(n){return n>=43360&&n<=43391},"Hangul Syllables":function(n){return n>=44032&&n<=55215},"Hangul Jamo Extended-B":function(n){return n>=55216&&n<=55295},"Private Use Area":function(n){return n>=57344&&n<=63743},"CJK Compatibility Ideographs":function(n){return n>=63744&&n<=64255},"Arabic Presentation Forms-A":function(n){return n>=64336&&n<=65023},"Vertical Forms":function(n){return n>=65040&&n<=65055},"CJK Compatibility Forms":function(n){return n>=65072&&n<=65103},"Small Form Variants":function(n){return n>=65104&&n<=65135},"Arabic Presentation Forms-B":function(n){return n>=65136&&n<=65279},"Halfwidth and Fullwidth Forms":function(n){return n>=65280&&n<=65519}};function el(n){for(var r=0,s=n;r<s.length;r+=1)if(El(s[r].charCodeAt(0)))return!0;return!1}function El(n){return!(n!==746&&n!==747&&(n<4352||!(Re["Bopomofo Extended"](n)||Re.Bopomofo(n)||Re["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||Re["CJK Compatibility Ideographs"](n)||Re["CJK Compatibility"](n)||Re["CJK Radicals Supplement"](n)||Re["CJK Strokes"](n)||!(!Re["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||Re["CJK Unified Ideographs Extension A"](n)||Re["CJK Unified Ideographs"](n)||Re["Enclosed CJK Letters and Months"](n)||Re["Hangul Compatibility Jamo"](n)||Re["Hangul Jamo Extended-A"](n)||Re["Hangul Jamo Extended-B"](n)||Re["Hangul Jamo"](n)||Re["Hangul Syllables"](n)||Re.Hiragana(n)||Re["Ideographic Description Characters"](n)||Re.Kanbun(n)||Re["Kangxi Radicals"](n)||Re["Katakana Phonetic Extensions"](n)||Re.Katakana(n)&&n!==12540||!(!Re["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!Re["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||Re["Unified Canadian Aboriginal Syllabics"](n)||Re["Unified Canadian Aboriginal Syllabics Extended"](n)||Re["Vertical Forms"](n)||Re["Yijing Hexagram Symbols"](n)||Re["Yi Syllables"](n)||Re["Yi Radicals"](n))))}function Sl(n){return!(El(n)||function(r){return!!(Re["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Re["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Re["Letterlike Symbols"](r)||Re["Number Forms"](r)||Re["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Re["Control Pictures"](r)&&r!==9251||Re["Optical Character Recognition"](r)||Re["Enclosed Alphanumerics"](r)||Re["Geometric Shapes"](r)||Re["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Re["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Re["CJK Symbols and Punctuation"](r)||Re.Katakana(r)||Re["Private Use Area"](r)||Re["CJK Compatibility Forms"](r)||Re["Small Form Variants"](r)||Re["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(n))}function oo(n){return n>=1424&&n<=2303||Re["Arabic Presentation Forms-A"](n)||Re["Arabic Presentation Forms-B"](n)}function fo(n,r){return!(!r&&oo(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||Re.Khmer(n))}function yf(n){for(var r=0,s=n;r<s.length;r+=1)if(oo(s[r].charCodeAt(0)))return!0;return!1}var _f=null,$a="unavailable",Ts=null,Ih=function(n){n&&typeof n=="string"&&n.indexOf("NetworkError")>-1&&($a="error"),_f&&_f(n)};function gc(){bp.fire(new dt("pluginStateChange",{pluginStatus:$a,pluginURL:Ts}))}var bp=new Rt,xf=function(){return $a},nl=function(){if($a!=="deferred"||!Ts)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");$a="loading",gc(),Ts&&bu({url:Ts},function(n){n?Ih(n):($a="loaded",gc())})},hs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return $a==="loaded"||hs.applyArabicShaping!=null},isLoading:function(){return $a==="loading"},setState:function(n){$a=n.pluginStatus,Ts=n.pluginURL},isParsed:function(){return hs.applyArabicShaping!=null&&hs.processBidirectionalText!=null&&hs.processStyledBidirectionalText!=null},getPluginURL:function(){return Ts}},zn=function(n,r){this.zoom=n,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new tu,this.transition={})};zn.prototype.isSupportedScript=function(n){return function(r,s){for(var d=0,v=r;d<v.length;d+=1)if(!fo(v[d].charCodeAt(0),s))return!1;return!0}(n,hs.isLoaded())},zn.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},zn.prototype.getCrossfadeParameters=function(){var n=this.zoom,r=n-Math.floor(n),s=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*r}};var $r=function(n,r){this.property=n,this.value=r,this.expression=function(s,d){if(Mu(s))return new cs(s,d);if(Su(s)){var v=Js(s,d);if(v.result==="error")throw new Error(v.value.map(function(A){return A.key+": "+A.message}).join(", "));return v.value}var x=s;return typeof s=="string"&&d.type==="color"&&(x=ai.parse(s)),{kind:"constant",evaluate:function(){return x}}}(r===void 0?n.specification.default:r,n.specification)};$r.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},$r.prototype.possiblyEvaluate=function(n,r,s){return this.property.possiblyEvaluate(this,n,r,s)};var ks=function(n){this.property=n,this.value=new $r(n,void 0)};ks.prototype.transitioned=function(n,r){return new Du(this.property,this.value,r,K({},n.transition,this.transition),n.now)},ks.prototype.untransitioned=function(){return new Du(this.property,this.value,null,{},0)};var Qo=function(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)};Qo.prototype.getValue=function(n){return jt(this._values[n].value.value)},Qo.prototype.setValue=function(n,r){this._values.hasOwnProperty(n)||(this._values[n]=new ks(this._values[n].property)),this._values[n].value=new $r(this._values[n].property,r===null?void 0:jt(r))},Qo.prototype.getTransition=function(n){return jt(this._values[n].transition)},Qo.prototype.setTransition=function(n,r){this._values.hasOwnProperty(n)||(this._values[n]=new ks(this._values[n].property)),this._values[n].transition=jt(r)||void 0},Qo.prototype.serialize=function(){for(var n={},r=0,s=Object.keys(this._values);r<s.length;r+=1){var d=s[r],v=this.getValue(d);v!==void 0&&(n[d]=v);var x=this.getTransition(d);x!==void 0&&(n[d+"-transition"]=x)}return n},Qo.prototype.transitioned=function(n,r){for(var s=new Ru(this._properties),d=0,v=Object.keys(this._values);d<v.length;d+=1){var x=v[d];s._values[x]=this._values[x].transitioned(n,r._values[x])}return s},Qo.prototype.untransitioned=function(){for(var n=new Ru(this._properties),r=0,s=Object.keys(this._values);r<s.length;r+=1){var d=s[r];n._values[d]=this._values[d].untransitioned()}return n};var Du=function(n,r,s,d,v){this.property=n,this.value=r,this.begin=v+d.delay||0,this.end=this.begin+d.duration||0,n.specification.transition&&(d.delay||d.duration)&&(this.prior=s)};Du.prototype.possiblyEvaluate=function(n,r,s){var d=n.now||0,v=this.value.possiblyEvaluate(n,r,s),x=this.prior;if(x){if(d>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(d<this.begin)return x.possiblyEvaluate(n,r,s);var A=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,r,s),v,function(S){if(S<=0)return 0;if(S>=1)return 1;var D=S*S,B=D*S;return 4*(S<.5?B:3*(S-D)+B-.75)}(A))}return v};var Ru=function(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)};Ru.prototype.possiblyEvaluate=function(n,r,s){for(var d=new vc(this._properties),v=0,x=Object.keys(this._values);v<x.length;v+=1){var A=x[v];d._values[A]=this._values[A].possiblyEvaluate(n,r,s)}return d},Ru.prototype.hasTransition=function(){for(var n=0,r=Object.keys(this._values);n<r.length;n+=1)if(this._values[r[n]].prior)return!0;return!1};var fs=function(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)};fs.prototype.getValue=function(n){return jt(this._values[n].value)},fs.prototype.setValue=function(n,r){this._values[n]=new $r(this._values[n].property,r===null?void 0:jt(r))},fs.prototype.serialize=function(){for(var n={},r=0,s=Object.keys(this._values);r<s.length;r+=1){var d=s[r],v=this.getValue(d);v!==void 0&&(n[d]=v)}return n},fs.prototype.possiblyEvaluate=function(n,r,s){for(var d=new vc(this._properties),v=0,x=Object.keys(this._values);v<x.length;v+=1){var A=x[v];d._values[A]=this._values[A].possiblyEvaluate(n,r,s)}return d};var Do=function(n,r,s){this.property=n,this.value=r,this.parameters=s};Do.prototype.isConstant=function(){return this.value.kind==="constant"},Do.prototype.constantOr=function(n){return this.value.kind==="constant"?this.value.value:n},Do.prototype.evaluate=function(n,r,s,d){return this.property.evaluate(this.value,this.parameters,n,r,s,d)};var vc=function(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)};vc.prototype.get=function(n){return this._values[n]};var vn=function(n){this.specification=n};vn.prototype.possiblyEvaluate=function(n,r){return n.expression.evaluate(r)},vn.prototype.interpolate=function(n,r,s){var d=Yl[this.specification.type];return d?d(n,r,s):n};var cn=function(n,r){this.specification=n,this.overrides=r};cn.prototype.possiblyEvaluate=function(n,r,s,d){return new Do(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(r,null,{},s,d)}:n.expression,r)},cn.prototype.interpolate=function(n,r,s){if(n.value.kind!=="constant"||r.value.kind!=="constant")return n;if(n.value.value===void 0||r.value.value===void 0)return new Do(this,{kind:"constant",value:void 0},n.parameters);var d=Yl[this.specification.type];return d?new Do(this,{kind:"constant",value:d(n.value.value,r.value.value,s)},n.parameters):n},cn.prototype.evaluate=function(n,r,s,d,v,x){return n.kind==="constant"?n.value:n.evaluate(r,s,d,v,x)};var zu=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(s,d,v,x){if(s.value===void 0)return new Do(this,{kind:"constant",value:void 0},d);if(s.expression.kind==="constant"){var A=s.expression.evaluate(d,null,{},v,x),S=s.property.specification.type==="resolvedImage"&&typeof A!="string"?A.name:A,D=this._calculate(S,S,S,d);return new Do(this,{kind:"constant",value:D},d)}if(s.expression.kind==="camera"){var B=this._calculate(s.expression.evaluate({zoom:d.zoom-1}),s.expression.evaluate({zoom:d.zoom}),s.expression.evaluate({zoom:d.zoom+1}),d);return new Do(this,{kind:"constant",value:B},d)}return new Do(this,s.expression,d)},r.prototype.evaluate=function(s,d,v,x,A,S){if(s.kind==="source"){var D=s.evaluate(d,v,x,A,S);return this._calculate(D,D,D,d)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(d.zoom)-1},v,x),s.evaluate({zoom:Math.floor(d.zoom)},v,x),s.evaluate({zoom:Math.floor(d.zoom)+1},v,x),d):s.value},r.prototype._calculate=function(s,d,v,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:s,to:d}:{from:v,to:d}},r.prototype.interpolate=function(s){return s},r}(cn),Vo=function(n){this.specification=n};Vo.prototype.possiblyEvaluate=function(n,r,s,d){if(n.value!==void 0){if(n.expression.kind==="constant"){var v=n.expression.evaluate(r,null,{},s,d);return this._calculate(v,v,v,r)}return this._calculate(n.expression.evaluate(new zn(Math.floor(r.zoom-1),r)),n.expression.evaluate(new zn(Math.floor(r.zoom),r)),n.expression.evaluate(new zn(Math.floor(r.zoom+1),r)),r)}},Vo.prototype._calculate=function(n,r,s,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:n,to:r}:{from:s,to:r}},Vo.prototype.interpolate=function(n){return n};var wa=function(n){this.specification=n};wa.prototype.possiblyEvaluate=function(n,r,s,d){return!!n.expression.evaluate(r,null,{},s,d)},wa.prototype.interpolate=function(){return!1};var Jo=function(n){for(var r in this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],n){var s=n[r];s.specification.overridable&&this.overridableProperties.push(r);var d=this.defaultPropertyValues[r]=new $r(s,void 0),v=this.defaultTransitionablePropertyValues[r]=new ks(s);this.defaultTransitioningPropertyValues[r]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=d.possiblyEvaluate({})}};Xe("DataDrivenProperty",cn),Xe("DataConstantProperty",vn),Xe("CrossFadedDataDrivenProperty",zu),Xe("CrossFadedProperty",Vo),Xe("ColorRampProperty",wa);var Tl=function(n){function r(s,d){if(n.call(this),this.id=s.id,this.type=s.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},s.type!=="custom"&&(this.metadata=(s=s).metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),d.layout&&(this._unevaluatedLayout=new fs(d.layout)),d.paint)){for(var v in this._transitionablePaint=new Qo(d.paint),s.paint)this.setPaintProperty(v,s.paint[v],{validate:!1});for(var x in s.layout)this.setLayoutProperty(x,s.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vc(d.paint)}}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},r.prototype.getLayoutProperty=function(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)},r.prototype.setLayoutProperty=function(s,d,v){v===void 0&&(v={}),d!=null&&this._validate($i,"layers."+this.id+".layout."+s,s,d,v)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,d):this.visibility=d)},r.prototype.getPaintProperty=function(s){return Gt(s,"-transition")?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)},r.prototype.setPaintProperty=function(s,d,v){if(v===void 0&&(v={}),d!=null&&this._validate(Kc,"layers."+this.id+".paint."+s,s,d,v))return!1;if(Gt(s,"-transition"))return this._transitionablePaint.setTransition(s.slice(0,-11),d||void 0),!1;var x=this._transitionablePaint._values[s],A=x.property.specification["property-type"]==="cross-faded-data-driven",S=x.value.isDataDriven(),D=x.value;this._transitionablePaint.setValue(s,d),this._handleSpecialPaintPropertyUpdate(s);var B=this._transitionablePaint._values[s].value;return B.isDataDriven()||S||A||this._handleOverridablePaintPropertyUpdate(s,D,B)},r.prototype._handleSpecialPaintPropertyUpdate=function(s){},r.prototype._handleOverridablePaintPropertyUpdate=function(s,d,v){return!1},r.prototype.isHidden=function(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"},r.prototype.updateTransitions=function(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)},r.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},r.prototype.recalculate=function(s,d){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,d)},r.prototype.serialize=function(){var s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),Qt(s,function(d,v){return!(d===void 0||v==="layout"&&!Object.keys(d).length||v==="paint"&&!Object.keys(d).length)})},r.prototype._validate=function(s,d,v,x,A){return A===void 0&&(A={}),(!A||A.validate!==!1)&&Ln(this,s.call(Pu,{key:d,layerType:this.type,objectKey:v,value:x,styleSpec:tt,style:{glyphs:!0,sprite:!0}}))},r.prototype.is3D=function(){return!1},r.prototype.isTileClipped=function(){return!1},r.prototype.hasOffscreenPass=function(){return!1},r.prototype.resize=function(){},r.prototype.isStateDependent=function(){for(var s in this.paint._values){var d=this.paint.get(s);if(d instanceof Do&&Fo(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1},r}(Rt),Ap={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},bf=function(n,r){this._structArray=n,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},tr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function po(n,r){r===void 0&&(r=1);var s=0,d=0;return{members:n.map(function(v){var x=Ap[v.type].BYTES_PER_ELEMENT,A=s=Qc(s,Math.max(r,x)),S=v.components||1;return d=Math.max(d,x),s+=x*S,{name:v.name,type:v.type,components:S,offset:A}}),size:Qc(s,Math.max(d,r)),alignment:r}}function Qc(n,r){return Math.ceil(n/r)*r}tr.serialize=function(n,r){return n._trim(),r&&(n.isTransferred=!0,r.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}},tr.deserialize=function(n){var r=Object.create(this.prototype);return r.arrayBuffer=n.arrayBuffer,r.length=n.length,r.capacity=n.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r},tr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},tr.prototype.clear=function(){this.length=0},tr.prototype.resize=function(n){this.reserve(n),this.length=n},tr.prototype.reserve=function(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}},tr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ou=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d){var v=this.length;return this.resize(v+1),this.emplace(v,s,d)},r.prototype.emplace=function(s,d,v){var x=2*s;return this.int16[x+0]=d,this.int16[x+1]=v,s},r}(tr);Ou.prototype.bytesPerElement=4,Xe("StructArrayLayout2i4",Ou);var rt=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x){var A=this.length;return this.resize(A+1),this.emplace(A,s,d,v,x)},r.prototype.emplace=function(s,d,v,x,A){var S=4*s;return this.int16[S+0]=d,this.int16[S+1]=v,this.int16[S+2]=x,this.int16[S+3]=A,s},r}(tr);rt.prototype.bytesPerElement=8,Xe("StructArrayLayout4i8",rt);var Ya=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,S){var D=this.length;return this.resize(D+1),this.emplace(D,s,d,v,x,A,S)},r.prototype.emplace=function(s,d,v,x,A,S,D){var B=6*s;return this.int16[B+0]=d,this.int16[B+1]=v,this.int16[B+2]=x,this.int16[B+3]=A,this.int16[B+4]=S,this.int16[B+5]=D,s},r}(tr);Ya.prototype.bytesPerElement=12,Xe("StructArrayLayout2i4i12",Ya);var oa=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,S){var D=this.length;return this.resize(D+1),this.emplace(D,s,d,v,x,A,S)},r.prototype.emplace=function(s,d,v,x,A,S,D){var B=4*s,N=8*s;return this.int16[B+0]=d,this.int16[B+1]=v,this.uint8[N+4]=x,this.uint8[N+5]=A,this.uint8[N+6]=S,this.uint8[N+7]=D,s},r}(tr);oa.prototype.bytesPerElement=8,Xe("StructArrayLayout2i4ub8",oa);var aa=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d){var v=this.length;return this.resize(v+1),this.emplace(v,s,d)},r.prototype.emplace=function(s,d,v){var x=2*s;return this.float32[x+0]=d,this.float32[x+1]=v,s},r}(tr);aa.prototype.bytesPerElement=8,Xe("StructArrayLayout2f8",aa);var mi=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,S,D,B,N,V){var Z=this.length;return this.resize(Z+1),this.emplace(Z,s,d,v,x,A,S,D,B,N,V)},r.prototype.emplace=function(s,d,v,x,A,S,D,B,N,V,Z){var J=10*s;return this.uint16[J+0]=d,this.uint16[J+1]=v,this.uint16[J+2]=x,this.uint16[J+3]=A,this.uint16[J+4]=S,this.uint16[J+5]=D,this.uint16[J+6]=B,this.uint16[J+7]=N,this.uint16[J+8]=V,this.uint16[J+9]=Z,s},r}(tr);mi.prototype.bytesPerElement=20,Xe("StructArrayLayout10ui20",mi);var Af=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,S,D,B,N,V,Z,J){var ct=this.length;return this.resize(ct+1),this.emplace(ct,s,d,v,x,A,S,D,B,N,V,Z,J)},r.prototype.emplace=function(s,d,v,x,A,S,D,B,N,V,Z,J,ct){var pt=12*s;return this.int16[pt+0]=d,this.int16[pt+1]=v,this.int16[pt+2]=x,this.int16[pt+3]=A,this.uint16[pt+4]=S,this.uint16[pt+5]=D,this.uint16[pt+6]=B,this.uint16[pt+7]=N,this.int16[pt+8]=V,this.int16[pt+9]=Z,this.int16[pt+10]=J,this.int16[pt+11]=ct,s},r}(tr);Af.prototype.bytesPerElement=24,Xe("StructArrayLayout4i4ui4i24",Af);var Jc=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v){var x=this.length;return this.resize(x+1),this.emplace(x,s,d,v)},r.prototype.emplace=function(s,d,v,x){var A=3*s;return this.float32[A+0]=d,this.float32[A+1]=v,this.float32[A+2]=x,s},r}(tr);Jc.prototype.bytesPerElement=12,Xe("StructArrayLayout3f12",Jc);var Mh=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s){var d=this.length;return this.resize(d+1),this.emplace(d,s)},r.prototype.emplace=function(s,d){return this.uint32[1*s+0]=d,s},r}(tr);Mh.prototype.bytesPerElement=4,Xe("StructArrayLayout1ul4",Mh);var eu=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,S,D,B,N){var V=this.length;return this.resize(V+1),this.emplace(V,s,d,v,x,A,S,D,B,N)},r.prototype.emplace=function(s,d,v,x,A,S,D,B,N,V){var Z=10*s,J=5*s;return this.int16[Z+0]=d,this.int16[Z+1]=v,this.int16[Z+2]=x,this.int16[Z+3]=A,this.int16[Z+4]=S,this.int16[Z+5]=D,this.uint32[J+3]=B,this.uint16[Z+8]=N,this.uint16[Z+9]=V,s},r}(tr);eu.prototype.bytesPerElement=20,Xe("StructArrayLayout6i1ul2ui20",eu);var th=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,S){var D=this.length;return this.resize(D+1),this.emplace(D,s,d,v,x,A,S)},r.prototype.emplace=function(s,d,v,x,A,S,D){var B=6*s;return this.int16[B+0]=d,this.int16[B+1]=v,this.int16[B+2]=x,this.int16[B+3]=A,this.int16[B+4]=S,this.int16[B+5]=D,s},r}(tr);th.prototype.bytesPerElement=12,Xe("StructArrayLayout2i2i2i12",th);var yc=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A){var S=this.length;return this.resize(S+1),this.emplace(S,s,d,v,x,A)},r.prototype.emplace=function(s,d,v,x,A,S){var D=4*s,B=8*s;return this.float32[D+0]=d,this.float32[D+1]=v,this.float32[D+2]=x,this.int16[B+6]=A,this.int16[B+7]=S,s},r}(tr);yc.prototype.bytesPerElement=16,Xe("StructArrayLayout2f1f2i16",yc);var wp=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x){var A=this.length;return this.resize(A+1),this.emplace(A,s,d,v,x)},r.prototype.emplace=function(s,d,v,x,A){var S=12*s,D=3*s;return this.uint8[S+0]=d,this.uint8[S+1]=v,this.float32[D+1]=x,this.float32[D+2]=A,s},r}(tr);wp.prototype.bytesPerElement=12,Xe("StructArrayLayout2ub2f12",wp);var Bu=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v){var x=this.length;return this.resize(x+1),this.emplace(x,s,d,v)},r.prototype.emplace=function(s,d,v,x){var A=3*s;return this.uint16[A+0]=d,this.uint16[A+1]=v,this.uint16[A+2]=x,s},r}(tr);Bu.prototype.bytesPerElement=6,Xe("StructArrayLayout3ui6",Bu);var Fu=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,S,D,B,N,V,Z,J,ct,pt,Mt,bt,Ut){var $t=this.length;return this.resize($t+1),this.emplace($t,s,d,v,x,A,S,D,B,N,V,Z,J,ct,pt,Mt,bt,Ut)},r.prototype.emplace=function(s,d,v,x,A,S,D,B,N,V,Z,J,ct,pt,Mt,bt,Ut,$t){var te=24*s,ne=12*s,fe=48*s;return this.int16[te+0]=d,this.int16[te+1]=v,this.uint16[te+2]=x,this.uint16[te+3]=A,this.uint32[ne+2]=S,this.uint32[ne+3]=D,this.uint32[ne+4]=B,this.uint16[te+10]=N,this.uint16[te+11]=V,this.uint16[te+12]=Z,this.float32[ne+7]=J,this.float32[ne+8]=ct,this.uint8[fe+36]=pt,this.uint8[fe+37]=Mt,this.uint8[fe+38]=bt,this.uint32[ne+10]=Ut,this.int16[te+22]=$t,s},r}(tr);Fu.prototype.bytesPerElement=48,Xe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Fu);var Ps=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x,A,S,D,B,N,V,Z,J,ct,pt,Mt,bt,Ut,$t,te,ne,fe,Me,Fe,_n,Ze,Mn,Je,ri){var On=this.length;return this.resize(On+1),this.emplace(On,s,d,v,x,A,S,D,B,N,V,Z,J,ct,pt,Mt,bt,Ut,$t,te,ne,fe,Me,Fe,_n,Ze,Mn,Je,ri)},r.prototype.emplace=function(s,d,v,x,A,S,D,B,N,V,Z,J,ct,pt,Mt,bt,Ut,$t,te,ne,fe,Me,Fe,_n,Ze,Mn,Je,ri,On){var fn=34*s,fi=17*s;return this.int16[fn+0]=d,this.int16[fn+1]=v,this.int16[fn+2]=x,this.int16[fn+3]=A,this.int16[fn+4]=S,this.int16[fn+5]=D,this.int16[fn+6]=B,this.int16[fn+7]=N,this.uint16[fn+8]=V,this.uint16[fn+9]=Z,this.uint16[fn+10]=J,this.uint16[fn+11]=ct,this.uint16[fn+12]=pt,this.uint16[fn+13]=Mt,this.uint16[fn+14]=bt,this.uint16[fn+15]=Ut,this.uint16[fn+16]=$t,this.uint16[fn+17]=te,this.uint16[fn+18]=ne,this.uint16[fn+19]=fe,this.uint16[fn+20]=Me,this.uint16[fn+21]=Fe,this.uint16[fn+22]=_n,this.uint32[fi+12]=Ze,this.float32[fi+13]=Mn,this.float32[fi+14]=Je,this.float32[fi+15]=ri,this.float32[fi+16]=On,s},r}(tr);Ps.prototype.bytesPerElement=68,Xe("StructArrayLayout8i15ui1ul4f68",Ps);var Nu=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s){var d=this.length;return this.resize(d+1),this.emplace(d,s)},r.prototype.emplace=function(s,d){return this.float32[1*s+0]=d,s},r}(tr);Nu.prototype.bytesPerElement=4,Xe("StructArrayLayout1f4",Nu);var Ls=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v){var x=this.length;return this.resize(x+1),this.emplace(x,s,d,v)},r.prototype.emplace=function(s,d,v,x){var A=3*s;return this.int16[A+0]=d,this.int16[A+1]=v,this.int16[A+2]=x,s},r}(tr);Ls.prototype.bytesPerElement=6,Xe("StructArrayLayout3i6",Ls);var Cp=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v){var x=this.length;return this.resize(x+1),this.emplace(x,s,d,v)},r.prototype.emplace=function(s,d,v,x){var A=4*s;return this.uint32[2*s+0]=d,this.uint16[A+2]=v,this.uint16[A+3]=x,s},r}(tr);Cp.prototype.bytesPerElement=8,Xe("StructArrayLayout1ul2ui8",Cp);var Eh=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d){var v=this.length;return this.resize(v+1),this.emplace(v,s,d)},r.prototype.emplace=function(s,d,v){var x=2*s;return this.uint16[x+0]=d,this.uint16[x+1]=v,s},r}(tr);Eh.prototype.bytesPerElement=4,Xe("StructArrayLayout2ui4",Eh);var Ip=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s){var d=this.length;return this.resize(d+1),this.emplace(d,s)},r.prototype.emplace=function(s,d){return this.uint16[1*s+0]=d,s},r}(tr);Ip.prototype.bytesPerElement=2,Xe("StructArrayLayout1ui2",Ip);var Ds=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,d,v,x){var A=this.length;return this.resize(A+1),this.emplace(A,s,d,v,x)},r.prototype.emplace=function(s,d,v,x,A){var S=4*s;return this.float32[S+0]=d,this.float32[S+1]=v,this.float32[S+2]=x,this.float32[S+3]=A,s},r}(tr);Ds.prototype.bytesPerElement=16,Xe("StructArrayLayout4f16",Ds);var l=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var s={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return s.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},s.x1.get=function(){return this._structArray.int16[this._pos2+2]},s.y1.get=function(){return this._structArray.int16[this._pos2+3]},s.x2.get=function(){return this._structArray.int16[this._pos2+4]},s.y2.get=function(){return this._structArray.int16[this._pos2+5]},s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.anchorPoint.get=function(){return new T(this.anchorPointX,this.anchorPointY)},Object.defineProperties(r.prototype,s),r}(bf);l.prototype.size=20;var h=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.get=function(s){return new l(this,s)},r}(eu);Xe("CollisionBoxArray",h);var u=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},s.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},s.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},s.segment.get=function(){return this._structArray.uint16[this._pos2+10]},s.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},s.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},s.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},s.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},s.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},s.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},s.placedOrientation.set=function(d){this._structArray.uint8[this._pos1+37]=d},s.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},s.hidden.set=function(d){this._structArray.uint8[this._pos1+38]=d},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},s.crossTileID.set=function(d){this._structArray.uint32[this._pos4+10]=d},s.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(r.prototype,s),r}(bf);u.prototype.size=48;var m=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.get=function(s){return new u(this,s)},r}(Fu);Xe("PlacedSymbolArray",m);var b=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},s.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},s.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},s.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},s.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},s.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},s.key.get=function(){return this._structArray.uint16[this._pos2+8]},s.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},s.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},s.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},s.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},s.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},s.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},s.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},s.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},s.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},s.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},s.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},s.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},s.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},s.crossTileID.set=function(d){this._structArray.uint32[this._pos4+12]=d},s.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},s.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},s.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},s.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(r.prototype,s),r}(bf);b.prototype.size=68;var w=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.get=function(s){return new b(this,s)},r}(Ps);Xe("SymbolInstanceArray",w);var E=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getoffsetX=function(s){return this.float32[1*s+0]},r}(Nu);Xe("GlyphOffsetArray",E);var L=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.getx=function(s){return this.int16[3*s+0]},r.prototype.gety=function(s){return this.int16[3*s+1]},r.prototype.gettileUnitDistanceFromAnchor=function(s){return this.int16[3*s+2]},r}(Ls);Xe("SymbolLineVertexArray",L);var F=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var s={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(r.prototype,s),r}(bf);F.prototype.size=8;var j=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.get=function(s){return new F(this,s)},r}(Cp);Xe("FeatureIndexArray",j);var nt=po([{name:"a_pos",components:2,type:"Int16"}],4).members,it=function(n){n===void 0&&(n=[]),this.segments=n};function ot(n,r){return 256*(n=X(Math.floor(n),0,255))+X(Math.floor(r),0,255)}it.prototype.prepareSegment=function(n,r,s,d){var v=this.segments[this.segments.length-1];return n>it.MAX_VERTEX_ARRAY_LENGTH&&Bt("Max vertices per segment is "+it.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+n),(!v||v.vertexLength+n>it.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==d)&&(v={vertexOffset:r.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},d!==void 0&&(v.sortKey=d),this.segments.push(v)),v},it.prototype.get=function(){return this.segments},it.prototype.destroy=function(){for(var n=0,r=this.segments;n<r.length;n+=1){var s=r[n];for(var d in s.vaos)s.vaos[d].destroy()}},it.simpleSegment=function(n,r,s,d){return new it([{vertexOffset:n,primitiveOffset:r,vertexLength:s,primitiveLength:d,vaos:{},sortKey:0}])},it.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xe("SegmentVector",it);var vt=po([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ft=y(function(n){n.exports=function(r,s){var d,v,x,A,S,D,B,N;for(v=r.length-(d=3&r.length),x=s,S=3432918353,D=461845907,N=0;N<v;)B=255&r.charCodeAt(N)|(255&r.charCodeAt(++N))<<8|(255&r.charCodeAt(++N))<<16|(255&r.charCodeAt(++N))<<24,++N,x=27492+(65535&(A=5*(65535&(x=(x^=B=(65535&(B=(B=(65535&B)*S+(((B>>>16)*S&65535)<<16)&4294967295)<<15|B>>>17))*D+(((B>>>16)*D&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(A>>>16)&65535)<<16);switch(B=0,d){case 3:B^=(255&r.charCodeAt(N+2))<<16;case 2:B^=(255&r.charCodeAt(N+1))<<8;case 1:x^=B=(65535&(B=(B=(65535&(B^=255&r.charCodeAt(N)))*S+(((B>>>16)*S&65535)<<16)&4294967295)<<15|B>>>17))*D+(((B>>>16)*D&65535)<<16)&4294967295}return x^=r.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}}),wt=y(function(n){n.exports=function(r,s){for(var d,v=r.length,x=s^v,A=0;v>=4;)d=1540483477*(65535&(d=255&r.charCodeAt(A)|(255&r.charCodeAt(++A))<<8|(255&r.charCodeAt(++A))<<16|(255&r.charCodeAt(++A))<<24))+((1540483477*(d>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),v-=4,++A;switch(v){case 3:x^=(255&r.charCodeAt(A+2))<<16;case 2:x^=(255&r.charCodeAt(A+1))<<8;case 1:x=1540483477*(65535&(x^=255&r.charCodeAt(A)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}}),ht=ft,Ct=wt;ht.murmur3=ft,ht.murmur2=Ct;var Lt=function(){this.ids=[],this.positions=[],this.indexed=!1};Lt.prototype.add=function(n,r,s,d){this.ids.push(ie(n)),this.positions.push(r,s,d)},Lt.prototype.getPositions=function(n){for(var r=ie(n),s=0,d=this.ids.length-1;s<d;){var v=s+d>>1;this.ids[v]>=r?d=v:s=v+1}for(var x=[];this.ids[s]===r;)x.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return x},Lt.serialize=function(n,r){var s=new Float64Array(n.ids),d=new Uint32Array(n.positions);return function v(x,A,S,D){for(;S<D;){for(var B=x[S+D>>1],N=S-1,V=D+1;;){do N++;while(x[N]<B);do V--;while(x[V]>B);if(N>=V)break;ee(x,N,V),ee(A,3*N,3*V),ee(A,3*N+1,3*V+1),ee(A,3*N+2,3*V+2)}V-S<D-V?(v(x,A,S,V),S=V+1):(v(x,A,V+1,D),D=V)}}(s,d,0,s.length-1),r&&r.push(s.buffer,d.buffer),{ids:s,positions:d}},Lt.deserialize=function(n){var r=new Lt;return r.ids=n.ids,r.positions=n.positions,r.indexed=!0,r};var qt=Math.pow(2,53)-1;function ie(n){var r=+n;return!isNaN(r)&&r<=qt?r:ht(String(n))}function ee(n,r,s){var d=n[r];n[r]=n[s],n[s]=d}Xe("FeaturePositionMap",Lt);var oe=function(n,r){this.gl=n.gl,this.location=r},ve=function(n){function r(s,d){n.call(this,s,d),this.current=0}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))},r}(oe),Ce=function(n){function r(s,d){n.call(this,s,d),this.current=0}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))},r}(oe),Pe=function(n){function r(s,d){n.call(this,s,d),this.current=[0,0]}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))},r}(oe),We=function(n){function r(s,d){n.call(this,s,d),this.current=[0,0,0]}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))},r}(oe),hn=function(n){function r(s,d){n.call(this,s,d),this.current=[0,0,0,0]}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))},r}(oe),Tn=function(n){function r(s,d){n.call(this,s,d),this.current=ai.transparent}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))},r}(oe),En=new Float32Array(16),Oi=function(n){function r(s,d){n.call(this,s,d),this.current=En}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.set=function(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(var d=1;d<16;d++)if(s[d]!==this.current[d]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}},r}(oe);function tn(n){return[ot(255*n.r,255*n.g),ot(255*n.b,255*n.a)]}var Dn=function(n,r,s){this.value=n,this.uniformNames=r.map(function(d){return"u_"+d}),this.type=s};Dn.prototype.setUniform=function(n,r,s){n.set(s.constantOr(this.value))},Dn.prototype.getBinding=function(n,r,s){return this.type==="color"?new Tn(n,r):new Ce(n,r)};var ei=function(n,r){this.uniformNames=r.map(function(s){return"u_"+s}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ei.prototype.setConstantPatternPositions=function(n,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=n.tlbr},ei.prototype.setUniform=function(n,r,s,d){var v=d==="u_pattern_to"?this.patternTo:d==="u_pattern_from"?this.patternFrom:d==="u_pixel_ratio_to"?this.pixelRatioTo:d==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)},ei.prototype.getBinding=function(n,r,s){return s.substr(0,9)==="u_pattern"?new hn(n,r):new Ce(n,r)};var Hn=function(n,r,s,d){this.expression=n,this.type=s,this.maxValue=0,this.paintVertexAttributes=r.map(function(v){return{name:"a_"+v,type:"Float32",components:s==="color"?2:1,offset:0}}),this.paintVertexArray=new d};Hn.prototype.populatePaintArray=function(n,r,s,d,v){var x=this.paintVertexArray.length,A=this.expression.evaluate(new zn(0),r,{},d,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,A)},Hn.prototype.updatePaintArray=function(n,r,s,d){var v=this.expression.evaluate({zoom:0},s,d);this._setPaintValue(n,r,v)},Hn.prototype._setPaintValue=function(n,r,s){if(this.type==="color")for(var d=tn(s),v=n;v<r;v++)this.paintVertexArray.emplace(v,d[0],d[1]);else{for(var x=n;x<r;x++)this.paintVertexArray.emplace(x,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}},Hn.prototype.upload=function(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Hn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Fn=function(n,r,s,d,v,x){this.expression=n,this.uniformNames=r.map(function(A){return"u_"+A+"_t"}),this.type=s,this.useIntegerZoom=d,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=r.map(function(A){return{name:"a_"+A,type:"Float32",components:s==="color"?4:2,offset:0}}),this.paintVertexArray=new x};Fn.prototype.populatePaintArray=function(n,r,s,d,v){var x=this.expression.evaluate(new zn(this.zoom),r,{},d,[],v),A=this.expression.evaluate(new zn(this.zoom+1),r,{},d,[],v),S=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(S,n,x,A)},Fn.prototype.updatePaintArray=function(n,r,s,d){var v=this.expression.evaluate({zoom:this.zoom},s,d),x=this.expression.evaluate({zoom:this.zoom+1},s,d);this._setPaintValue(n,r,v,x)},Fn.prototype._setPaintValue=function(n,r,s,d){if(this.type==="color")for(var v=tn(s),x=tn(d),A=n;A<r;A++)this.paintVertexArray.emplace(A,v[0],v[1],x[0],x[1]);else{for(var S=n;S<r;S++)this.paintVertexArray.emplace(S,s,d);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(d))}},Fn.prototype.upload=function(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Fn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Fn.prototype.setUniform=function(n,r){var s=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,d=X(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);n.set(d)},Fn.prototype.getBinding=function(n,r,s){return new Ce(n,r)};var ni=function(n,r,s,d,v,x){this.expression=n,this.type=r,this.useIntegerZoom=s,this.zoom=d,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v};ni.prototype.populatePaintArray=function(n,r,s){var d=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(d,n,r.patterns&&r.patterns[this.layerId],s)},ni.prototype.updatePaintArray=function(n,r,s,d,v){this._setPaintValues(n,r,s.patterns&&s.patterns[this.layerId],v)},ni.prototype._setPaintValues=function(n,r,s,d){if(d&&s){var v=d[s.min],x=d[s.mid],A=d[s.max];if(v&&x&&A)for(var S=n;S<r;S++)this.zoomInPaintVertexArray.emplace(S,x.tl[0],x.tl[1],x.br[0],x.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],x.pixelRatio,v.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,x.tl[0],x.tl[1],x.br[0],x.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],x.pixelRatio,A.pixelRatio)}},ni.prototype.upload=function(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,vt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,vt.members,this.expression.isStateDependent))},ni.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Nn=function(n,r,s){this.binders={},this._buffers=[];var d=[];for(var v in n.paint._values)if(s(v)){var x=n.paint.get(v);if(x instanceof Do&&Fo(x.property.specification)){var A=mo(v,n.type),S=x.value,D=x.property.specification.type,B=x.property.useIntegerZoom,N=x.property.specification["property-type"],V=N==="cross-faded"||N==="cross-faded-data-driven";if(S.kind==="constant")this.binders[v]=V?new ei(S.value,A):new Dn(S.value,A,D),d.push("/u_"+v);else if(S.kind==="source"||V){var Z=Yr(v,D,"source");this.binders[v]=V?new ni(S,D,B,r,Z,n.id):new Hn(S,A,D,Z),d.push("/a_"+v)}else{var J=Yr(v,D,"composite");this.binders[v]=new Fn(S,A,D,B,r,J),d.push("/z_"+v)}}}this.cacheKey=d.sort().join("")};Nn.prototype.getMaxValue=function(n){var r=this.binders[n];return r instanceof Hn||r instanceof Fn?r.maxValue:0},Nn.prototype.populatePaintArrays=function(n,r,s,d,v){for(var x in this.binders){var A=this.binders[x];(A instanceof Hn||A instanceof Fn||A instanceof ni)&&A.populatePaintArray(n,r,s,d,v)}},Nn.prototype.setConstantPatternPositions=function(n,r){for(var s in this.binders){var d=this.binders[s];d instanceof ei&&d.setConstantPatternPositions(n,r)}},Nn.prototype.updatePaintArrays=function(n,r,s,d,v){var x=!1;for(var A in n)for(var S=0,D=r.getPositions(A);S<D.length;S+=1){var B=D[S],N=s.feature(B.index);for(var V in this.binders){var Z=this.binders[V];if((Z instanceof Hn||Z instanceof Fn||Z instanceof ni)&&Z.expression.isStateDependent===!0){var J=d.paint.get(V);Z.expression=J.value,Z.updatePaintArray(B.start,B.end,N,n[A],v),x=!0}}}return x},Nn.prototype.defines=function(){var n=[];for(var r in this.binders){var s=this.binders[r];(s instanceof Dn||s instanceof ei)&&n.push.apply(n,s.uniformNames.map(function(d){return"#define HAS_UNIFORM_"+d}))}return n},Nn.prototype.getBinderAttributes=function(){var n=[];for(var r in this.binders){var s=this.binders[r];if(s instanceof Hn||s instanceof Fn)for(var d=0;d<s.paintVertexAttributes.length;d++)n.push(s.paintVertexAttributes[d].name);else if(s instanceof ni)for(var v=0;v<vt.members.length;v++)n.push(vt.members[v].name)}return n},Nn.prototype.getBinderUniforms=function(){var n=[];for(var r in this.binders){var s=this.binders[r];if(s instanceof Dn||s instanceof ei||s instanceof Fn)for(var d=0,v=s.uniformNames;d<v.length;d+=1)n.push(v[d])}return n},Nn.prototype.getPaintVertexBuffers=function(){return this._buffers},Nn.prototype.getUniforms=function(n,r){var s=[];for(var d in this.binders){var v=this.binders[d];if(v instanceof Dn||v instanceof ei||v instanceof Fn)for(var x=0,A=v.uniformNames;x<A.length;x+=1){var S=A[x];if(r[S]){var D=v.getBinding(n,r[S],S);s.push({name:S,property:d,binding:D})}}}return s},Nn.prototype.setUniforms=function(n,r,s,d){for(var v=0,x=r;v<x.length;v+=1){var A=x[v],S=A.name,D=A.property;this.binders[D].setUniform(A.binding,d,s.get(D),S)}},Nn.prototype.updatePaintBuffers=function(n){for(var r in this._buffers=[],this.binders){var s=this.binders[r];if(n&&s instanceof ni){var d=n.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;d&&this._buffers.push(d)}else(s instanceof Hn||s instanceof Fn)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}},Nn.prototype.upload=function(n){for(var r in this.binders){var s=this.binders[r];(s instanceof Hn||s instanceof Fn||s instanceof ni)&&s.upload(n)}this.updatePaintBuffers()},Nn.prototype.destroy=function(){for(var n in this.binders){var r=this.binders[n];(r instanceof Hn||r instanceof Fn||r instanceof ni)&&r.destroy()}};var mn=function(n,r,s){s===void 0&&(s=function(){return!0}),this.programConfigurations={};for(var d=0,v=n;d<v.length;d+=1){var x=v[d];this.programConfigurations[x.id]=new Nn(x,r,s)}this.needsUpload=!1,this._featureMap=new Lt,this._bufferOffset=0};function mo(n,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[n]||[n.replace(r+"-","").replace(/-/g,"_")]}function Yr(n,r,s){var d={color:{source:aa,composite:Ds},number:{source:Nu,composite:aa}},v=function(x){return{"line-pattern":{source:mi,composite:mi},"fill-pattern":{source:mi,composite:mi},"fill-extrusion-pattern":{source:mi,composite:mi}}[x]}(n);return v&&v[s]||d[r][s]}mn.prototype.populatePaintArrays=function(n,r,s,d,v,x){for(var A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(n,r,d,v,x);r.id!==void 0&&this._featureMap.add(r.id,s,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0},mn.prototype.updatePaintArrays=function(n,r,s,d){for(var v=0,x=s;v<x.length;v+=1){var A=x[v];this.needsUpload=this.programConfigurations[A.id].updatePaintArrays(n,this._featureMap,r,A,d)||this.needsUpload}},mn.prototype.get=function(n){return this.programConfigurations[n]},mn.prototype.upload=function(n){if(this.needsUpload){for(var r in this.programConfigurations)this.programConfigurations[r].upload(n);this.needsUpload=!1}},mn.prototype.destroy=function(){for(var n in this.programConfigurations)this.programConfigurations[n].destroy()},Xe("ConstantBinder",Dn),Xe("CrossFadedConstantBinder",ei),Xe("SourceExpressionBinder",Hn),Xe("CrossFadedCompositeBinder",ni),Xe("CompositeExpressionBinder",Fn),Xe("ProgramConfiguration",Nn,{omit:["_buffers"]}),Xe("ProgramConfigurationSet",mn);var Ur=Math.pow(2,14)-1,wo=-Ur-1;function Cr(n){for(var r=8192/n.extent,s=n.loadGeometry(),d=0;d<s.length;d++)for(var v=s[d],x=0;x<v.length;x++){var A=v[x],S=Math.round(A.x*r),D=Math.round(A.y*r);A.x=X(S,wo,Ur),A.y=X(D,wo,Ur),(S<A.x||S>A.x+1||D<A.y||D>A.y+1)&&Bt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}function yr(n,r){return{type:n.type,id:n.id,properties:n.properties,geometry:r?Cr(n):[]}}function Va(n,r,s,d,v){n.emplaceBack(2*r+(d+1)/2,2*s+(v+1)/2)}var mr=function(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ou,this.indexArray=new Bu,this.segments=new it,this.programConfigurations=new mn(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function kl(n,r){for(var s=0;s<n.length;s++)if(Pl(r,n[s]))return!0;for(var d=0;d<r.length;d++)if(Pl(n,r[d]))return!0;return!!_c(n,r)}function Ua(n,r,s){return!!Pl(n,r)||!!zs(r,n,s)}function il(n,r){if(n.length===1)return Sh(r,n[0]);for(var s=0;s<r.length;s++)for(var d=r[s],v=0;v<d.length;v++)if(Pl(n,d[v]))return!0;for(var x=0;x<n.length;x++)if(Sh(r,n[x]))return!0;for(var A=0;A<r.length;A++)if(_c(n,r[A]))return!0;return!1}function Rs(n,r,s){if(n.length>1){if(_c(n,r))return!0;for(var d=0;d<r.length;d++)if(zs(r[d],n,s))return!0}for(var v=0;v<n.length;v++)if(zs(n[v],r,s))return!0;return!1}function _c(n,r){if(n.length===0||r.length===0)return!1;for(var s=0;s<n.length-1;s++)for(var d=n[s],v=n[s+1],x=0;x<r.length-1;x++)if(eh(d,v,r[x],r[x+1]))return!0;return!1}function eh(n,r,s,d){return de(n,s,d)!==de(r,s,d)&&de(n,r,s)!==de(n,r,d)}function zs(n,r,s){var d=s*s;if(r.length===1)return n.distSqr(r[0])<d;for(var v=1;v<r.length;v++)if(xc(n,r[v-1],r[v])<d)return!0;return!1}function xc(n,r,s){var d=r.distSqr(s);if(d===0)return n.distSqr(r);var v=((n.x-r.x)*(s.x-r.x)+(n.y-r.y)*(s.y-r.y))/d;return n.distSqr(v<0?r:v>1?s:s.sub(r)._mult(v)._add(r))}function Sh(n,r){for(var s,d,v,x=!1,A=0;A<n.length;A++)for(var S=0,D=(s=n[A]).length-1;S<s.length;D=S++)(d=s[S]).y>r.y!=(v=s[D]).y>r.y&&r.x<(v.x-d.x)*(r.y-d.y)/(v.y-d.y)+d.x&&(x=!x);return x}function Pl(n,r){for(var s=!1,d=0,v=n.length-1;d<n.length;v=d++){var x=n[d],A=n[v];x.y>r.y!=A.y>r.y&&r.x<(A.x-x.x)*(r.y-x.y)/(A.y-x.y)+x.x&&(s=!s)}return s}function nu(n,r,s){var d=s[0],v=s[2];if(n.x<d.x&&r.x<d.x||n.x>v.x&&r.x>v.x||n.y<d.y&&r.y<d.y||n.y>v.y&&r.y>v.y)return!1;var x=de(n,r,s[0]);return x!==de(n,r,s[1])||x!==de(n,r,s[2])||x!==de(n,r,s[3])}function Ll(n,r,s){var d=r.paint.get(n).value;return d.kind==="constant"?d.value:s.programConfigurations.get(r.id).getMaxValue(n)}function Ro(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function rl(n,r,s,d,v){if(!r[0]&&!r[1])return n;var x=T.convert(r)._mult(v);s==="viewport"&&x._rotate(-d);for(var A=[],S=0;S<n.length;S++)A.push(n[S].sub(x));return A}mr.prototype.populate=function(n,r,s){var d=this.layers[0],v=[],x=null;d.type==="circle"&&(x=d.layout.get("circle-sort-key"));for(var A=0,S=n;A<S.length;A+=1){var D=S[A],B=D.feature,N=D.id,V=D.index,Z=D.sourceLayerIndex,J=this.layers[0]._featureFilter.needGeometry,ct=yr(B,J);if(this.layers[0]._featureFilter.filter(new zn(this.zoom),ct,s)){var pt=x?x.evaluate(ct,{},s):void 0,Mt={id:N,properties:B.properties,type:B.type,sourceLayerIndex:Z,index:V,geometry:J?ct.geometry:Cr(B),patterns:{},sortKey:pt};v.push(Mt)}}x&&v.sort(function(Fe,_n){return Fe.sortKey-_n.sortKey});for(var bt=0,Ut=v;bt<Ut.length;bt+=1){var $t=Ut[bt],te=$t.geometry,ne=$t.index,fe=$t.sourceLayerIndex,Me=n[ne].feature;this.addFeature($t,te,ne,s),r.featureIndex.insert(Me,te,ne,fe,this.index)}},mr.prototype.update=function(n,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,r,this.stateDependentLayers,s)},mr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},mr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},mr.prototype.upload=function(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,nt),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0},mr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},mr.prototype.addFeature=function(n,r,s,d){for(var v=0,x=r;v<x.length;v+=1)for(var A=0,S=x[v];A<S.length;A+=1){var D=S[A],B=D.x,N=D.y;if(!(B<0||B>=8192||N<0||N>=8192)){var V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),Z=V.vertexLength;Va(this.layoutVertexArray,B,N,-1,-1),Va(this.layoutVertexArray,B,N,1,-1),Va(this.layoutVertexArray,B,N,1,1),Va(this.layoutVertexArray,B,N,-1,1),this.indexArray.emplaceBack(Z,Z+1,Z+2),this.indexArray.emplaceBack(Z,Z+3,Z+2),V.vertexLength+=4,V.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,s,{},d)},Xe("CircleBucket",mr,{omit:["layers"]});var iu=new Jo({"circle-sort-key":new cn(tt.layout_circle["circle-sort-key"])}),bc={paint:new Jo({"circle-radius":new cn(tt.paint_circle["circle-radius"]),"circle-color":new cn(tt.paint_circle["circle-color"]),"circle-blur":new cn(tt.paint_circle["circle-blur"]),"circle-opacity":new cn(tt.paint_circle["circle-opacity"]),"circle-translate":new vn(tt.paint_circle["circle-translate"]),"circle-translate-anchor":new vn(tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new vn(tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new vn(tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new cn(tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new cn(tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new cn(tt.paint_circle["circle-stroke-opacity"])}),layout:iu},Yi=typeof Float32Array<"u"?Float32Array:Array;function ps(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Ca(n,r,s){var d=r[0],v=r[1],x=r[2],A=r[3],S=r[4],D=r[5],B=r[6],N=r[7],V=r[8],Z=r[9],J=r[10],ct=r[11],pt=r[12],Mt=r[13],bt=r[14],Ut=r[15],$t=s[0],te=s[1],ne=s[2],fe=s[3];return n[0]=$t*d+te*S+ne*V+fe*pt,n[1]=$t*v+te*D+ne*Z+fe*Mt,n[2]=$t*x+te*B+ne*J+fe*bt,n[3]=$t*A+te*N+ne*ct+fe*Ut,n[4]=($t=s[4])*d+(te=s[5])*S+(ne=s[6])*V+(fe=s[7])*pt,n[5]=$t*v+te*D+ne*Z+fe*Mt,n[6]=$t*x+te*B+ne*J+fe*bt,n[7]=$t*A+te*N+ne*ct+fe*Ut,n[8]=($t=s[8])*d+(te=s[9])*S+(ne=s[10])*V+(fe=s[11])*pt,n[9]=$t*v+te*D+ne*Z+fe*Mt,n[10]=$t*x+te*B+ne*J+fe*bt,n[11]=$t*A+te*N+ne*ct+fe*Ut,n[12]=($t=s[12])*d+(te=s[13])*S+(ne=s[14])*V+(fe=s[15])*pt,n[13]=$t*v+te*D+ne*Z+fe*Mt,n[14]=$t*x+te*B+ne*J+fe*bt,n[15]=$t*A+te*N+ne*ct+fe*Ut,n}Math.hypot||(Math.hypot=function(){for(var n=arguments,r=0,s=arguments.length;s--;)r+=n[s]*n[s];return Math.sqrt(r)});var ru,Xm=Ca;function nh(n,r,s){var d=r[0],v=r[1],x=r[2],A=r[3];return n[0]=s[0]*d+s[4]*v+s[8]*x+s[12]*A,n[1]=s[1]*d+s[5]*v+s[9]*x+s[13]*A,n[2]=s[2]*d+s[6]*v+s[10]*x+s[14]*A,n[3]=s[3]*d+s[7]*v+s[11]*x+s[15]*A,n}ru=new Yi(3),Yi!=Float32Array&&(ru[0]=0,ru[1]=0,ru[2]=0),function(){var n=new Yi(4);Yi!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var _d=(function(){var n=new Yi(2);Yi!=Float32Array&&(n[0]=0,n[1]=0)}(),function(n){function r(s){n.call(this,s,bc)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.createBucket=function(s){return new mr(s)},r.prototype.queryRadius=function(s){var d=s;return Ll("circle-radius",this,d)+Ll("circle-stroke-width",this,d)+Ro(this.paint.get("circle-translate"))},r.prototype.queryIntersectsFeature=function(s,d,v,x,A,S,D,B){for(var N=rl(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,D),V=this.paint.get("circle-radius").evaluate(d,v)+this.paint.get("circle-stroke-width").evaluate(d,v),Z=this.paint.get("circle-pitch-alignment")==="map",J=Z?N:function(Me,Fe){return Me.map(function(_n){return ih(_n,Fe)})}(N,B),ct=Z?V*D:V,pt=0,Mt=x;pt<Mt.length;pt+=1)for(var bt=0,Ut=Mt[pt];bt<Ut.length;bt+=1){var $t=Ut[bt],te=Z?$t:ih($t,B),ne=ct,fe=nh([],[$t.x,$t.y,0,1],B);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ne*=fe[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ne*=S.cameraToCenterDistance/fe[3]),Ua(J,te,ne))return!0}return!1},r}(Tl));function ih(n,r){var s=nh([],[n.x,n.y,0,1],r);return new T(s[0]/s[3],s[1]/s[3])}var Mp=function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r}(mr);function ou(n,r,s,d){var v=r.width,x=r.height;if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==v*x*s)throw new RangeError("mismatched image size")}else d=new Uint8Array(v*x*s);return n.width=v,n.height=x,n.data=d,n}function wf(n,r,s){var d=r.width,v=r.height;if(d!==n.width||v!==n.height){var x=ou({},{width:d,height:v},s);xd(n,x,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,d),height:Math.min(n.height,v)},s),n.width=d,n.height=v,n.data=x.data}}function xd(n,r,s,d,v,x){if(v.width===0||v.height===0)return r;if(v.width>n.width||v.height>n.height||s.x>n.width-v.width||s.y>n.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>r.width||v.height>r.height||d.x>r.width-v.width||d.y>r.height-v.height)throw new RangeError("out of range destination coordinates for image copy");for(var A=n.data,S=r.data,D=0;D<v.height;D++)for(var B=((s.y+D)*n.width+s.x)*x,N=((d.y+D)*r.width+d.x)*x,V=0;V<v.width*x;V++)S[N+V]=A[B+V];return r}Xe("HeatmapBucket",Mp,{omit:["layers"]});var rh=function(n,r){ou(this,n,1,r)};rh.prototype.resize=function(n){wf(this,n,1)},rh.prototype.clone=function(){return new rh({width:this.width,height:this.height},new Uint8Array(this.data))},rh.copy=function(n,r,s,d,v){xd(n,r,s,d,v,1)};var Xa=function(n,r){ou(this,n,4,r)};Xa.prototype.resize=function(n){wf(this,n,4)},Xa.prototype.replace=function(n,r){r?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n},Xa.prototype.clone=function(){return new Xa({width:this.width,height:this.height},new Uint8Array(this.data))},Xa.copy=function(n,r,s,d,v){xd(n,r,s,d,v,4)},Xe("AlphaImage",rh),Xe("RGBAImage",Xa);var Gv={paint:new Jo({"heatmap-radius":new cn(tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new cn(tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new vn(tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wa(tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new vn(tt.paint_heatmap["heatmap-opacity"])})};function qv(n){var r={},s=n.resolution||256,d=n.clips?n.clips.length:1,v=n.image||new Xa({width:s,height:d}),x=function(ct,pt,Mt){r[n.evaluationKey]=Mt;var bt=n.expression.evaluate(r);v.data[ct+pt+0]=Math.floor(255*bt.r/bt.a),v.data[ct+pt+1]=Math.floor(255*bt.g/bt.a),v.data[ct+pt+2]=Math.floor(255*bt.b/bt.a),v.data[ct+pt+3]=Math.floor(255*bt.a)};if(n.clips)for(var A=0,S=0;A<d;++A,S+=4*s)for(var D=0,B=0;D<s;D++,B+=4){var N=D/(s-1),V=n.clips[A];x(S,B,V.start*(1-N)+V.end*N)}else for(var Z=0,J=0;Z<s;Z++,J+=4)x(0,J,Z/(s-1));return v}var Km=function(n){function r(s){n.call(this,s,Gv),this._updateColorRamp()}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.createBucket=function(s){return new Mp(s)},r.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="heatmap-color"&&this._updateColorRamp()},r.prototype._updateColorRamp=function(){this.colorRamp=qv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},r.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},r}(Tl),Wv={paint:new Jo({"hillshade-illumination-direction":new vn(tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new vn(tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new vn(tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new vn(tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new vn(tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new vn(tt.paint_hillshade["hillshade-accent-color"])})},Qm=function(n){function r(s){n.call(this,s,Wv)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},r}(Tl),$_=po([{name:"a_pos",components:2,type:"Int16"}],4).members,Ep=bd,Gi=bd;function bd(n,r,s){s=s||2;var d,v,x,A,S,D,B,N=r&&r.length,V=N?r[0]*s:n.length,Z=Zv(n,0,V,s,!0),J=[];if(!Z||Z.next===Z.prev)return J;if(N&&(Z=function(pt,Mt,bt,Ut){var $t,te,ne,fe=[];for($t=0,te=Mt.length;$t<te;$t++)(ne=Zv(pt,Mt[$t]*Ut,$t<te-1?Mt[$t+1]*Ut:pt.length,Ut,!1))===ne.next&&(ne.steiner=!0),fe.push(ol(ne));for(fe.sort(Ad),$t=0;$t<fe.length;$t++)Jm(fe[$t],bt),bt=Dl(bt,bt.next);return bt}(n,r,Z,s)),n.length>80*s){d=x=n[0],v=A=n[1];for(var ct=s;ct<V;ct+=s)(S=n[ct])<d&&(d=S),(D=n[ct+1])<v&&(v=D),S>x&&(x=S),D>A&&(A=D);B=(B=Math.max(x-d,A-v))!==0?1/B:0}return Cf(Z,J,s,d,v,B),J}function Zv(n,r,s,d,v){var x,A;if(v===Id(n,r,s,d)>0)for(x=r;x<s;x+=d)A=Ac(x,n[x],n[x+1],A);else for(x=s-d;x>=r;x-=d)A=Ac(x,n[x],n[x+1],A);return A&&Th(A,A.next)&&(Tp(A),A=A.next),A}function Dl(n,r){if(!n)return n;r||(r=n);var s,d=n;do if(s=!1,d.steiner||!Th(d,d.next)&&go(d.prev,d,d.next)!==0)d=d.next;else{if(Tp(d),(d=r=d.prev)===d.next)break;s=!0}while(s||d!==r);return r}function Cf(n,r,s,d,v,x,A){if(n){!A&&x&&function(N,V,Z,J){var ct=N;do ct.z===null&&(ct.z=wd(ct.x,ct.y,V,Z,J)),ct.prevZ=ct.prev,ct.nextZ=ct.next,ct=ct.next;while(ct!==N);ct.prevZ.nextZ=null,ct.prevZ=null,function(pt){var Mt,bt,Ut,$t,te,ne,fe,Me,Fe=1;do{for(bt=pt,pt=null,te=null,ne=0;bt;){for(ne++,Ut=bt,fe=0,Mt=0;Mt<Fe&&(fe++,Ut=Ut.nextZ);Mt++);for(Me=Fe;fe>0||Me>0&&Ut;)fe!==0&&(Me===0||!Ut||bt.z<=Ut.z)?($t=bt,bt=bt.nextZ,fe--):($t=Ut,Ut=Ut.nextZ,Me--),te?te.nextZ=$t:pt=$t,$t.prevZ=te,te=$t;bt=Ut}te.nextZ=null,Fe*=2}while(ne>1)}(ct)}(n,d,v,x);for(var S,D,B=n;n.prev!==n.next;)if(S=n.prev,D=n.next,x?X_(n,d,v,x):Y_(n))r.push(S.i/s),r.push(n.i/s),r.push(D.i/s),Tp(n),n=D.next,B=D.next;else if((n=D)===B){A?A===1?Cf(n=Rl(Dl(n),r,s),r,s,d,v,x,2):A===2&&K_(n,r,s,d,v,x):Cf(Dl(n),r,s,d,v,x,1);break}}}function Y_(n){var r=n.prev,s=n,d=n.next;if(go(r,s,d)>=0)return!1;for(var v=n.next.next;v!==n.prev;){if(al(r.x,r.y,s.x,s.y,d.x,d.y,v.x,v.y)&&go(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function X_(n,r,s,d){var v=n.prev,x=n,A=n.next;if(go(v,x,A)>=0)return!1;for(var S=v.x>x.x?v.x>A.x?v.x:A.x:x.x>A.x?x.x:A.x,D=v.y>x.y?v.y>A.y?v.y:A.y:x.y>A.y?x.y:A.y,B=wd(v.x<x.x?v.x<A.x?v.x:A.x:x.x<A.x?x.x:A.x,v.y<x.y?v.y<A.y?v.y:A.y:x.y<A.y?x.y:A.y,r,s,d),N=wd(S,D,r,s,d),V=n.prevZ,Z=n.nextZ;V&&V.z>=B&&Z&&Z.z<=N;){if(V!==n.prev&&V!==n.next&&al(v.x,v.y,x.x,x.y,A.x,A.y,V.x,V.y)&&go(V.prev,V,V.next)>=0||(V=V.prevZ,Z!==n.prev&&Z!==n.next&&al(v.x,v.y,x.x,x.y,A.x,A.y,Z.x,Z.y)&&go(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;V&&V.z>=B;){if(V!==n.prev&&V!==n.next&&al(v.x,v.y,x.x,x.y,A.x,A.y,V.x,V.y)&&go(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;Z&&Z.z<=N;){if(Z!==n.prev&&Z!==n.next&&al(v.x,v.y,x.x,x.y,A.x,A.y,Z.x,Z.y)&&go(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function Rl(n,r,s){var d=n;do{var v=d.prev,x=d.next.next;!Th(v,x)&&eg(v,d,d.next,x)&&kh(v,x)&&kh(x,v)&&(r.push(v.i/s),r.push(d.i/s),r.push(x.i/s),Tp(d),Tp(d.next),d=n=x),d=d.next}while(d!==n);return Dl(d)}function K_(n,r,s,d,v,x){var A=n;do{for(var S=A.next.next;S!==A.prev;){if(A.i!==S.i&&tg(A,S)){var D=Cd(A,S);return A=Dl(A,A.next),D=Dl(D,D.next),Cf(A,r,s,d,v,x),void Cf(D,r,s,d,v,x)}S=S.next}A=A.next}while(A!==n)}function Ad(n,r){return n.x-r.x}function Jm(n,r){if(r=function(d,v){var x,A=v,S=d.x,D=d.y,B=-1/0;do{if(D<=A.y&&D>=A.next.y&&A.next.y!==A.y){var N=A.x+(D-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(N<=S&&N>B){if(B=N,N===S){if(D===A.y)return A;if(D===A.next.y)return A.next}x=A.x<A.next.x?A:A.next}}A=A.next}while(A!==v);if(!x)return null;if(S===B)return x;var V,Z=x,J=x.x,ct=x.y,pt=1/0;A=x;do S>=A.x&&A.x>=J&&S!==A.x&&al(D<ct?S:B,D,J,ct,D<ct?B:S,D,A.x,A.y)&&(V=Math.abs(D-A.y)/(S-A.x),kh(A,d)&&(V<pt||V===pt&&(A.x>x.x||A.x===x.x&&$v(x,A)))&&(x=A,pt=V)),A=A.next;while(A!==Z);return x}(n,r)){var s=Cd(r,n);Dl(r,r.next),Dl(s,s.next)}}function $v(n,r){return go(n.prev,n,r.prev)<0&&go(r.next,n,n.next)<0}function wd(n,r,s,d,v){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-s)*v)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-d)*v)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function ol(n){var r=n,s=n;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==n);return s}function al(n,r,s,d,v,x,A,S){return(v-A)*(r-S)-(n-A)*(x-S)>=0&&(n-A)*(d-S)-(s-A)*(r-S)>=0&&(s-A)*(x-S)-(v-A)*(d-S)>=0}function tg(n,r){return n.next.i!==r.i&&n.prev.i!==r.i&&!function(s,d){var v=s;do{if(v.i!==s.i&&v.next.i!==s.i&&v.i!==d.i&&v.next.i!==d.i&&eg(v,v.next,s,d))return!0;v=v.next}while(v!==s);return!1}(n,r)&&(kh(n,r)&&kh(r,n)&&function(s,d){var v=s,x=!1,A=(s.x+d.x)/2,S=(s.y+d.y)/2;do v.y>S!=v.next.y>S&&v.next.y!==v.y&&A<(v.next.x-v.x)*(S-v.y)/(v.next.y-v.y)+v.x&&(x=!x),v=v.next;while(v!==s);return x}(n,r)&&(go(n.prev,n,r.prev)||go(n,r.prev,r))||Th(n,r)&&go(n.prev,n,n.next)>0&&go(r.prev,r,r.next)>0)}function go(n,r,s){return(r.y-n.y)*(s.x-r.x)-(r.x-n.x)*(s.y-r.y)}function Th(n,r){return n.x===r.x&&n.y===r.y}function eg(n,r,s,d){var v=Sp(go(n,r,s)),x=Sp(go(n,r,d)),A=Sp(go(s,d,n)),S=Sp(go(s,d,r));return v!==x&&A!==S||!(v!==0||!If(n,s,r))||!(x!==0||!If(n,d,r))||!(A!==0||!If(s,n,d))||!(S!==0||!If(s,r,d))}function If(n,r,s){return r.x<=Math.max(n.x,s.x)&&r.x>=Math.min(n.x,s.x)&&r.y<=Math.max(n.y,s.y)&&r.y>=Math.min(n.y,s.y)}function Sp(n){return n>0?1:n<0?-1:0}function kh(n,r){return go(n.prev,n,n.next)<0?go(n,r,n.next)>=0&&go(n,n.prev,r)>=0:go(n,r,n.prev)<0||go(n,n.next,r)<0}function Cd(n,r){var s=new Vu(n.i,n.x,n.y),d=new Vu(r.i,r.x,r.y),v=n.next,x=r.prev;return n.next=r,r.prev=n,s.next=v,v.prev=s,d.next=s,s.prev=d,x.next=d,d.prev=x,d}function Ac(n,r,s,d){var v=new Vu(n,r,s);return d?(v.next=d.next,v.prev=d,d.next.prev=v,d.next=v):(v.prev=v,v.next=v),v}function Tp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Vu(n,r,s){this.i=n,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Id(n,r,s,d){for(var v=0,x=r,A=s-d;x<s;x+=d)v+=(n[A]-n[x])*(n[x+1]+n[A+1]),A=x;return v}function Yv(n,r,s,d,v){(function x(A,S,D,B,N){for(;B>D;){if(B-D>600){var V=B-D+1,Z=S-D+1,J=Math.log(V),ct=.5*Math.exp(2*J/3),pt=.5*Math.sqrt(J*ct*(V-ct)/V)*(Z-V/2<0?-1:1);x(A,S,Math.max(D,Math.floor(S-Z*ct/V+pt)),Math.min(B,Math.floor(S+(V-Z)*ct/V+pt)),N)}var Mt=A[S],bt=D,Ut=B;for(Ph(A,D,S),N(A[B],Mt)>0&&Ph(A,D,B);bt<Ut;){for(Ph(A,bt,Ut),bt++,Ut--;N(A[bt],Mt)<0;)bt++;for(;N(A[Ut],Mt)>0;)Ut--}N(A[D],Mt)===0?Ph(A,D,Ut):Ph(A,++Ut,B),Ut<=S&&(D=Ut+1),S<=Ut&&(B=Ut-1)}})(n,r,s,d||n.length-1,v||Q_)}function Ph(n,r,s){var d=n[r];n[r]=n[s],n[s]=d}function Q_(n,r){return n<r?-1:n>r?1:0}function ng(n,r){var s=n.length;if(s<=1)return[n];for(var d,v,x=[],A=0;A<s;A++){var S=An(n[A]);S!==0&&(n[A].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(d&&x.push(d),d=[n[A]]):d.push(n[A]))}if(d&&x.push(d),r>1)for(var D=0;D<x.length;D++)x[D].length<=r||(Yv(x[D],r,1,x[D].length-1,J_),x[D]=x[D].slice(0,r));return x}function J_(n,r){return r.area-n.area}function Md(n,r,s){for(var d=s.patternDependencies,v=!1,x=0,A=r;x<A.length;x+=1){var S=A[x].paint.get(n+"-pattern");S.isConstant()||(v=!0);var D=S.constantOr(null);D&&(v=!0,d[D.to]=!0,d[D.from]=!0)}return v}function Ed(n,r,s,d,v){for(var x=v.patternDependencies,A=0,S=r;A<S.length;A+=1){var D=S[A],B=D.paint.get(n+"-pattern").value;if(B.kind!=="constant"){var N=B.evaluate({zoom:d-1},s,{},v.availableImages),V=B.evaluate({zoom:d},s,{},v.availableImages),Z=B.evaluate({zoom:d+1},s,{},v.availableImages);V=V&&V.name?V.name:V,Z=Z&&Z.name?Z.name:Z,x[N=N&&N.name?N.name:N]=!0,x[V]=!0,x[Z]=!0,s.patterns[D.id]={min:N,mid:V,max:Z}}}return s}bd.deviation=function(n,r,s,d){var v=r&&r.length,x=Math.abs(Id(n,0,v?r[0]*s:n.length,s));if(v)for(var A=0,S=r.length;A<S;A++)x-=Math.abs(Id(n,r[A]*s,A<S-1?r[A+1]*s:n.length,s));var D=0;for(A=0;A<d.length;A+=3){var B=d[A]*s,N=d[A+1]*s,V=d[A+2]*s;D+=Math.abs((n[B]-n[V])*(n[N+1]-n[B+1])-(n[B]-n[N])*(n[V+1]-n[B+1]))}return x===0&&D===0?0:Math.abs((D-x)/x)},bd.flatten=function(n){for(var r=n[0][0].length,s={vertices:[],holes:[],dimensions:r},d=0,v=0;v<n.length;v++){for(var x=0;x<n[v].length;x++)for(var A=0;A<r;A++)s.vertices.push(n[v][x][A]);v>0&&s.holes.push(d+=n[v-1].length)}return s},Ep.default=Gi;var au=function(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ou,this.indexArray=new Bu,this.indexArray2=new Eh,this.programConfigurations=new mn(n.layers,n.zoom),this.segments=new it,this.segments2=new it,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};au.prototype.populate=function(n,r,s){this.hasPattern=Md("fill",this.layers,r);for(var d=this.layers[0].layout.get("fill-sort-key"),v=[],x=0,A=n;x<A.length;x+=1){var S=A[x],D=S.feature,B=S.id,N=S.index,V=S.sourceLayerIndex,Z=this.layers[0]._featureFilter.needGeometry,J=yr(D,Z);if(this.layers[0]._featureFilter.filter(new zn(this.zoom),J,s)){var ct=d?d.evaluate(J,{},s,r.availableImages):void 0,pt={id:B,properties:D.properties,type:D.type,sourceLayerIndex:V,index:N,geometry:Z?J.geometry:Cr(D),patterns:{},sortKey:ct};v.push(pt)}}d&&v.sort(function(Me,Fe){return Me.sortKey-Fe.sortKey});for(var Mt=0,bt=v;Mt<bt.length;Mt+=1){var Ut=bt[Mt],$t=Ut.geometry,te=Ut.index,ne=Ut.sourceLayerIndex;if(this.hasPattern){var fe=Ed("fill",this.layers,Ut,this.zoom,r);this.patternFeatures.push(fe)}else this.addFeature(Ut,$t,te,s,{});r.featureIndex.insert(n[te].feature,$t,te,ne,this.index)}},au.prototype.update=function(n,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,r,this.stateDependentLayers,s)},au.prototype.addFeatures=function(n,r,s){for(var d=0,v=this.patternFeatures;d<v.length;d+=1){var x=v[d];this.addFeature(x,x.geometry,x.index,r,s)}},au.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},au.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},au.prototype.upload=function(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,$_),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0},au.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},au.prototype.addFeature=function(n,r,s,d,v){for(var x=0,A=ng(r,500);x<A.length;x+=1){for(var S=A[x],D=0,B=0,N=S;B<N.length;B+=1)D+=N[B].length;for(var V=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray),Z=V.vertexLength,J=[],ct=[],pt=0,Mt=S;pt<Mt.length;pt+=1){var bt=Mt[pt];if(bt.length!==0){bt!==S[0]&&ct.push(J.length/2);var Ut=this.segments2.prepareSegment(bt.length,this.layoutVertexArray,this.indexArray2),$t=Ut.vertexLength;this.layoutVertexArray.emplaceBack(bt[0].x,bt[0].y),this.indexArray2.emplaceBack($t+bt.length-1,$t),J.push(bt[0].x),J.push(bt[0].y);for(var te=1;te<bt.length;te++)this.layoutVertexArray.emplaceBack(bt[te].x,bt[te].y),this.indexArray2.emplaceBack($t+te-1,$t+te),J.push(bt[te].x),J.push(bt[te].y);Ut.vertexLength+=bt.length,Ut.primitiveLength+=bt.length}}for(var ne=Ep(J,ct),fe=0;fe<ne.length;fe+=3)this.indexArray.emplaceBack(Z+ne[fe],Z+ne[fe+1],Z+ne[fe+2]);V.vertexLength+=D,V.primitiveLength+=ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,s,v,d)},Xe("FillBucket",au,{omit:["layers","patternFeatures"]});var Xv=new Jo({"fill-sort-key":new cn(tt.layout_fill["fill-sort-key"])}),Kv={paint:new Jo({"fill-antialias":new vn(tt.paint_fill["fill-antialias"]),"fill-opacity":new cn(tt.paint_fill["fill-opacity"]),"fill-color":new cn(tt.paint_fill["fill-color"]),"fill-outline-color":new cn(tt.paint_fill["fill-outline-color"]),"fill-translate":new vn(tt.paint_fill["fill-translate"]),"fill-translate-anchor":new vn(tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new zu(tt.paint_fill["fill-pattern"])}),layout:Xv},Os=function(n){function r(s){n.call(this,s,Kv)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.recalculate=function(s,d){n.prototype.recalculate.call(this,s,d);var v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},r.prototype.createBucket=function(s){return new au(s)},r.prototype.queryRadius=function(){return Ro(this.paint.get("fill-translate"))},r.prototype.queryIntersectsFeature=function(s,d,v,x,A,S,D){return il(rl(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,D),x)},r.prototype.isTileClipped=function(){return!0},r}(Tl),Uu=po([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Qv=Mf;function Mf(n,r,s,d,v){this.properties={},this.extent=s,this.type=0,this._pbf=n,this._geometry=-1,this._keys=d,this._values=v,n.readFields(Sd,this,r)}function Sd(n,r,s){n==1?r.id=s.readVarint():n==2?function(d,v){for(var x=d.readVarint()+d.pos;d.pos<x;){var A=v._keys[d.readVarint()],S=v._values[d.readVarint()];v.properties[A]=S}}(s,r):n==3?r.type=s.readVarint():n==4&&(r._geometry=s.pos)}function Ef(n){for(var r,s,d=0,v=0,x=n.length,A=x-1;v<x;A=v++)d+=((s=n[A]).x-(r=n[v]).x)*(r.y+s.y);return d}Mf.types=["Unknown","Point","LineString","Polygon"],Mf.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var r,s=n.readVarint()+n.pos,d=1,v=0,x=0,A=0,S=[];n.pos<s;){if(v<=0){var D=n.readVarint();d=7&D,v=D>>3}if(v--,d===1||d===2)x+=n.readSVarint(),A+=n.readSVarint(),d===1&&(r&&S.push(r),r=[]),r.push(new T(x,A));else{if(d!==7)throw new Error("unknown command "+d);r&&r.push(r[0].clone())}}return r&&S.push(r),S},Mf.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var r=n.readVarint()+n.pos,s=1,d=0,v=0,x=0,A=1/0,S=-1/0,D=1/0,B=-1/0;n.pos<r;){if(d<=0){var N=n.readVarint();s=7&N,d=N>>3}if(d--,s===1||s===2)(v+=n.readSVarint())<A&&(A=v),v>S&&(S=v),(x+=n.readSVarint())<D&&(D=x),x>B&&(B=x);else if(s!==7)throw new Error("unknown command "+s)}return[A,D,S,B]},Mf.prototype.toGeoJSON=function(n,r,s){var d,v,x=this.extent*Math.pow(2,s),A=this.extent*n,S=this.extent*r,D=this.loadGeometry(),B=Mf.types[this.type];function N(J){for(var ct=0;ct<J.length;ct++){var pt=J[ct];J[ct]=[360*(pt.x+A)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(pt.y+S)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var V=[];for(d=0;d<D.length;d++)V[d]=D[d][0];N(D=V);break;case 2:for(d=0;d<D.length;d++)N(D[d]);break;case 3:for(D=function(J){var ct=J.length;if(ct<=1)return[J];for(var pt,Mt,bt=[],Ut=0;Ut<ct;Ut++){var $t=Ef(J[Ut]);$t!==0&&(Mt===void 0&&(Mt=$t<0),Mt===$t<0?(pt&&bt.push(pt),pt=[J[Ut]]):pt.push(J[Ut]))}return pt&&bt.push(pt),bt}(D),d=0;d<D.length;d++)for(v=0;v<D[d].length;v++)N(D[d][v])}D.length===1?D=D[0]:B="Multi"+B;var Z={type:"Feature",geometry:{type:B,coordinates:D},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var ig=rg;function rg(n,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(t1,this,r),this.length=this._features.length}function t1(n,r,s){n===15?r.version=s.readVarint():n===1?r.name=s.readString():n===5?r.extent=s.readVarint():n===2?r._features.push(s.pos):n===3?r._keys.push(s.readString()):n===4&&r._values.push(function(d){for(var v=null,x=d.readVarint()+d.pos;d.pos<x;){var A=d.readVarint()>>3;v=A===1?d.readString():A===2?d.readFloat():A===3?d.readDouble():A===4?d.readVarint64():A===5?d.readVarint():A===6?d.readSVarint():A===7?d.readBoolean():null}return v}(s))}function Jv(n,r,s){if(n===3){var d=new ig(s,s.readVarint()+s.pos);d.length&&(r[d.name]=d)}}rg.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var r=this._pbf.readVarint()+this._pbf.pos;return new Qv(this._pbf,r,this.extent,this._keys,this._values)};var su={VectorTile:function(n,r){this.layers=n.readFields(Jv,{},r)},VectorTileFeature:Qv,VectorTileLayer:ig},kp=su.VectorTileFeature.types,og=Math.pow(2,13);function Sf(n,r,s,d,v,x,A,S){n.emplaceBack(r,s,2*Math.floor(d*og)+A,v*og*2,x*og*2,Math.round(S))}var zl=function(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ya,this.indexArray=new Bu,this.programConfigurations=new mn(n.layers,n.zoom),this.segments=new it,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function Td(n,r){return n.x===r.x&&(n.x<0||n.x>8192)||n.y===r.y&&(n.y<0||n.y>8192)}zl.prototype.populate=function(n,r,s){this.features=[],this.hasPattern=Md("fill-extrusion",this.layers,r);for(var d=0,v=n;d<v.length;d+=1){var x=v[d],A=x.feature,S=x.id,D=x.index,B=x.sourceLayerIndex,N=this.layers[0]._featureFilter.needGeometry,V=yr(A,N);if(this.layers[0]._featureFilter.filter(new zn(this.zoom),V,s)){var Z={id:S,sourceLayerIndex:B,index:D,geometry:N?V.geometry:Cr(A),properties:A.properties,type:A.type,patterns:{}};this.hasPattern?this.features.push(Ed("fill-extrusion",this.layers,Z,this.zoom,r)):this.addFeature(Z,Z.geometry,D,s,{}),r.featureIndex.insert(A,Z.geometry,D,B,this.index,!0)}}},zl.prototype.addFeatures=function(n,r,s){for(var d=0,v=this.features;d<v.length;d+=1){var x=v[d];this.addFeature(x,x.geometry,x.index,r,s)}},zl.prototype.update=function(n,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,r,this.stateDependentLayers,s)},zl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},zl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},zl.prototype.upload=function(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Uu),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0},zl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},zl.prototype.addFeature=function(n,r,s,d,v){for(var x=0,A=ng(r,500);x<A.length;x+=1){for(var S=A[x],D=0,B=0,N=S;B<N.length;B+=1)D+=N[B].length;for(var V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Z=0,J=S;Z<J.length;Z+=1){var ct=J[Z];if(ct.length!==0&&!((fi=ct).every(function(Xn){return Xn.x<0})||fi.every(function(Xn){return Xn.x>8192})||fi.every(function(Xn){return Xn.y<0})||fi.every(function(Xn){return Xn.y>8192})))for(var pt=0,Mt=0;Mt<ct.length;Mt++){var bt=ct[Mt];if(Mt>=1){var Ut=ct[Mt-1];if(!Td(bt,Ut)){V.vertexLength+4>it.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var $t=bt.sub(Ut)._perp()._unit(),te=Ut.dist(bt);pt+te>32768&&(pt=0),Sf(this.layoutVertexArray,bt.x,bt.y,$t.x,$t.y,0,0,pt),Sf(this.layoutVertexArray,bt.x,bt.y,$t.x,$t.y,0,1,pt),Sf(this.layoutVertexArray,Ut.x,Ut.y,$t.x,$t.y,0,0,pt+=te),Sf(this.layoutVertexArray,Ut.x,Ut.y,$t.x,$t.y,0,1,pt);var ne=V.vertexLength;this.indexArray.emplaceBack(ne,ne+2,ne+1),this.indexArray.emplaceBack(ne+1,ne+2,ne+3),V.vertexLength+=4,V.primitiveLength+=2}}}}if(V.vertexLength+D>it.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray)),kp[n.type]==="Polygon"){for(var fe=[],Me=[],Fe=V.vertexLength,_n=0,Ze=S;_n<Ze.length;_n+=1){var Mn=Ze[_n];if(Mn.length!==0){Mn!==S[0]&&Me.push(fe.length/2);for(var Je=0;Je<Mn.length;Je++){var ri=Mn[Je];Sf(this.layoutVertexArray,ri.x,ri.y,0,0,1,1,0),fe.push(ri.x),fe.push(ri.y)}}}for(var On=Ep(fe,Me),fn=0;fn<On.length;fn+=3)this.indexArray.emplaceBack(Fe+On[fn],Fe+On[fn+2],Fe+On[fn+1]);V.primitiveLength+=On.length/3,V.vertexLength+=D}}var fi;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,s,v,d)},Xe("FillExtrusionBucket",zl,{omit:["layers","features"]});var ty={paint:new Jo({"fill-extrusion-opacity":new vn(tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new cn(tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new vn(tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new vn(tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new zu(tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new cn(tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new cn(tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new vn(tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},kd=function(n){function r(s){n.call(this,s,ty)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.createBucket=function(s){return new zl(s)},r.prototype.queryRadius=function(){return Ro(this.paint.get("fill-extrusion-translate"))},r.prototype.is3D=function(){return!0},r.prototype.queryIntersectsFeature=function(s,d,v,x,A,S,D,B){var N=rl(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,D),V=this.paint.get("fill-extrusion-height").evaluate(d,v),Z=this.paint.get("fill-extrusion-base").evaluate(d,v),J=function(pt,Mt,bt,Ut){for(var $t=[],te=0,ne=pt;te<ne.length;te+=1){var fe=ne[te],Me=[fe.x,fe.y,0,1];nh(Me,Me,Mt),$t.push(new T(Me[0]/Me[3],Me[1]/Me[3]))}return $t}(N,B),ct=function(pt,Mt,bt,Ut){for(var $t=[],te=[],ne=Ut[8]*Mt,fe=Ut[9]*Mt,Me=Ut[10]*Mt,Fe=Ut[11]*Mt,_n=Ut[8]*bt,Ze=Ut[9]*bt,Mn=Ut[10]*bt,Je=Ut[11]*bt,ri=0,On=pt;ri<On.length;ri+=1){for(var fn=[],fi=[],Xn=0,Ei=On[ri];Xn<Ei.length;Xn+=1){var Sn=Ei[Xn],qi=Sn.x,Rr=Sn.y,zr=Ut[0]*qi+Ut[4]*Rr+Ut[12],Ir=Ut[1]*qi+Ut[5]*Rr+Ut[13],Or=Ut[2]*qi+Ut[6]*Rr+Ut[14],to=Ut[3]*qi+Ut[7]*Rr+Ut[15],vo=Or+Me,Mo=to+Fe,Ma=zr+_n,jo=Ir+Ze,Ea=Or+Mn,ao=to+Je,Ho=new T((zr+ne)/Mo,(Ir+fe)/Mo);Ho.z=vo/Mo,fn.push(Ho);var bi=new T(Ma/ao,jo/ao);bi.z=Ea/ao,fi.push(bi)}$t.push(fn),te.push(fi)}return[$t,te]}(x,Z,V,B);return function(pt,Mt,bt){var Ut=1/0;il(bt,Mt)&&(Ut=Pp(bt,Mt[0]));for(var $t=0;$t<Mt.length;$t++)for(var te=Mt[$t],ne=pt[$t],fe=0;fe<te.length-1;fe++){var Me=te[fe],Fe=[Me,te[fe+1],ne[fe+1],ne[fe],Me];kl(bt,Fe)&&(Ut=Math.min(Ut,Pp(bt,Fe)))}return Ut!==1/0&&Ut}(ct[0],ct[1],J)},r}(Tl);function Lh(n,r){return n.x*r.x+n.y*r.y}function Pp(n,r){if(n.length===1){for(var s,d=0,v=r[d++];!s||v.equals(s);)if(!(s=r[d++]))return 1/0;for(;d<r.length;d++){var x=r[d],A=n[0],S=s.sub(v),D=x.sub(v),B=A.sub(v),N=Lh(S,S),V=Lh(S,D),Z=Lh(D,D),J=Lh(B,S),ct=Lh(B,D),pt=N*Z-V*V,Mt=(Z*J-V*ct)/pt,bt=(N*ct-V*J)/pt,Ut=v.z*(1-Mt-bt)+s.z*Mt+x.z*bt;if(isFinite(Ut))return Ut}return 1/0}for(var $t=1/0,te=0,ne=r;te<ne.length;te+=1)$t=Math.min($t,ne[te].z);return $t}var e1=po([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ey=po([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Pd=su.VectorTileFeature.types,ny=Math.cos(Math.PI/180*37.5),Ld=Math.pow(2,14)/.5,ja=function(n){var r=this;this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(s){r.gradients[s.id]={}}),this.layoutVertexArray=new oa,this.layoutVertexArray2=new aa,this.indexArray=new Bu,this.programConfigurations=new mn(n.layers,n.zoom),this.segments=new it,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};ja.prototype.populate=function(n,r,s){this.hasPattern=Md("line",this.layers,r);for(var d=this.layers[0].layout.get("line-sort-key"),v=[],x=0,A=n;x<A.length;x+=1){var S=A[x],D=S.feature,B=S.id,N=S.index,V=S.sourceLayerIndex,Z=this.layers[0]._featureFilter.needGeometry,J=yr(D,Z);if(this.layers[0]._featureFilter.filter(new zn(this.zoom),J,s)){var ct=d?d.evaluate(J,{},s):void 0,pt={id:B,properties:D.properties,type:D.type,sourceLayerIndex:V,index:N,geometry:Z?J.geometry:Cr(D),patterns:{},sortKey:ct};v.push(pt)}}d&&v.sort(function(Me,Fe){return Me.sortKey-Fe.sortKey});for(var Mt=0,bt=v;Mt<bt.length;Mt+=1){var Ut=bt[Mt],$t=Ut.geometry,te=Ut.index,ne=Ut.sourceLayerIndex;if(this.hasPattern){var fe=Ed("line",this.layers,Ut,this.zoom,r);this.patternFeatures.push(fe)}else this.addFeature(Ut,$t,te,s,{});r.featureIndex.insert(n[te].feature,$t,te,ne,this.index)}},ja.prototype.update=function(n,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,r,this.stateDependentLayers,s)},ja.prototype.addFeatures=function(n,r,s){for(var d=0,v=this.patternFeatures;d<v.length;d+=1){var x=v[d];this.addFeature(x,x.geometry,x.index,r,s)}},ja.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ja.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ja.prototype.upload=function(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,ey)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,e1),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0},ja.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ja.prototype.lineFeatureClips=function(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}},ja.prototype.addFeature=function(n,r,s,d,v){var x=this.layers[0].layout,A=x.get("line-join").evaluate(n,{}),S=x.get("line-cap"),D=x.get("line-miter-limit"),B=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(var N=0,V=r;N<V.length;N+=1)this.addLine(V[N],n,A,S,D,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,s,v,d)},ja.prototype.addLine=function(n,r,s,d,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var A=0;A<n.length-1;A++)this.totalDistance+=n[A].dist(n[A+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var S=Pd[r.type]==="Polygon",D=n.length;D>=2&&n[D-1].equals(n[D-2]);)D--;for(var B=0;B<D-1&&n[B].equals(n[B+1]);)B++;if(!(D<(S?3:2))){s==="bevel"&&(v=1.05);var N,V=this.overscaling<=16?122880/(512*this.overscaling):0,Z=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray),J=void 0,ct=void 0,pt=void 0,Mt=void 0;this.e1=this.e2=-1,S&&(Mt=n[B].sub(N=n[D-2])._unit()._perp());for(var bt=B;bt<D;bt++)if(!(ct=bt===D-1?S?n[B+1]:void 0:n[bt+1])||!n[bt].equals(ct)){Mt&&(pt=Mt),N&&(J=N),N=n[bt],Mt=ct?ct.sub(N)._unit()._perp():pt;var Ut=(pt=pt||Mt).add(Mt);Ut.x===0&&Ut.y===0||Ut._unit();var $t=pt.x*Mt.x+pt.y*Mt.y,te=Ut.x*Mt.x+Ut.y*Mt.y,ne=te!==0?1/te:1/0,fe=2*Math.sqrt(2-2*te),Me=te<ny&&J&&ct,Fe=pt.x*Mt.y-pt.y*Mt.x>0;if(Me&&bt>B){var _n=N.dist(J);if(_n>2*V){var Ze=N.sub(N.sub(J)._mult(V/_n)._round());this.updateDistance(J,Ze),this.addCurrentVertex(Ze,pt,0,0,Z),J=Ze}}var Mn=J&&ct,Je=Mn?s:S?"butt":d;if(Mn&&Je==="round"&&(ne<x?Je="miter":ne<=2&&(Je="fakeround")),Je==="miter"&&ne>v&&(Je="bevel"),Je==="bevel"&&(ne>2&&(Je="flipbevel"),ne<v&&(Je="miter")),J&&this.updateDistance(J,N),Je==="miter")Ut._mult(ne),this.addCurrentVertex(N,Ut,0,0,Z);else if(Je==="flipbevel"){if(ne>100)Ut=Mt.mult(-1);else{var ri=ne*pt.add(Mt).mag()/pt.sub(Mt).mag();Ut._perp()._mult(ri*(Fe?-1:1))}this.addCurrentVertex(N,Ut,0,0,Z),this.addCurrentVertex(N,Ut.mult(-1),0,0,Z)}else if(Je==="bevel"||Je==="fakeround"){var On=-Math.sqrt(ne*ne-1),fn=Fe?On:0,fi=Fe?0:On;if(J&&this.addCurrentVertex(N,pt,fn,fi,Z),Je==="fakeround")for(var Xn=Math.round(180*fe/Math.PI/20),Ei=1;Ei<Xn;Ei++){var Sn=Ei/Xn;if(Sn!==.5){var qi=Sn-.5;Sn+=Sn*qi*(Sn-1)*((1.0904+$t*($t*(3.55645-1.43519*$t)-3.2452))*qi*qi+(.848013+$t*(.215638*$t-1.06021)))}var Rr=Mt.sub(pt)._mult(Sn)._add(pt)._unit()._mult(Fe?-1:1);this.addHalfVertex(N,Rr.x,Rr.y,!1,Fe,0,Z)}ct&&this.addCurrentVertex(N,Mt,-fn,-fi,Z)}else if(Je==="butt")this.addCurrentVertex(N,Ut,0,0,Z);else if(Je==="square"){var zr=J?1:-1;this.addCurrentVertex(N,Ut,zr,zr,Z)}else Je==="round"&&(J&&(this.addCurrentVertex(N,pt,0,0,Z),this.addCurrentVertex(N,pt,1,1,Z,!0)),ct&&(this.addCurrentVertex(N,Mt,-1,-1,Z,!0),this.addCurrentVertex(N,Mt,0,0,Z)));if(Me&&bt<D-1){var Ir=N.dist(ct);if(Ir>2*V){var Or=N.add(ct.sub(N)._mult(V/Ir)._round());this.updateDistance(N,Or),this.addCurrentVertex(Or,Mt,0,0,Z),N=Or}}}}},ja.prototype.addCurrentVertex=function(n,r,s,d,v,x){x===void 0&&(x=!1);var A=r.y*d-r.x,S=-r.y-r.x*d;this.addHalfVertex(n,r.x+r.y*s,r.y-r.x*s,x,!1,s,v),this.addHalfVertex(n,A,S,x,!0,-d,v),this.distance>Ld/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,r,s,d,v,x))},ja.prototype.addHalfVertex=function(n,r,s,d,v,x,A){var S=.5*(this.lineClips?this.scaledDistance*(Ld-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n.x<<1)+(d?1:0),(n.y<<1)+(v?1:0),Math.round(63*r)+128,Math.round(63*s)+128,1+(x===0?0:x<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var D=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),A.primitiveLength++),v?this.e2=D:this.e1=D},ja.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},ja.prototype.updateDistance=function(n,r){this.distance+=n.dist(r),this.updateScaledDistance()},Xe("LineBucket",ja,{omit:["layers","patternFeatures"]});var iy=new Jo({"line-cap":new vn(tt.layout_line["line-cap"]),"line-join":new cn(tt.layout_line["line-join"]),"line-miter-limit":new vn(tt.layout_line["line-miter-limit"]),"line-round-limit":new vn(tt.layout_line["line-round-limit"]),"line-sort-key":new cn(tt.layout_line["line-sort-key"])}),ju={paint:new Jo({"line-opacity":new cn(tt.paint_line["line-opacity"]),"line-color":new cn(tt.paint_line["line-color"]),"line-translate":new vn(tt.paint_line["line-translate"]),"line-translate-anchor":new vn(tt.paint_line["line-translate-anchor"]),"line-width":new cn(tt.paint_line["line-width"]),"line-gap-width":new cn(tt.paint_line["line-gap-width"]),"line-offset":new cn(tt.paint_line["line-offset"]),"line-blur":new cn(tt.paint_line["line-blur"]),"line-dasharray":new Vo(tt.paint_line["line-dasharray"]),"line-pattern":new zu(tt.paint_line["line-pattern"]),"line-gradient":new wa(tt.paint_line["line-gradient"])}),layout:iy},ag=new(function(n){function r(){n.apply(this,arguments)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(s,d){return d=new zn(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),n.prototype.possiblyEvaluate.call(this,s,d)},r.prototype.evaluate=function(s,d,v,x){return d=K({},d,{zoom:Math.floor(d.zoom)}),n.prototype.evaluate.call(this,s,d,v,x)},r}(cn))(ju.paint.properties["line-width"].specification);ag.useIntegerZoom=!0;var ry=function(n){function r(s){n.call(this,s,ju),this.gradientVersion=0}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ii,this.gradientVersion=(this.gradientVersion+1)%O)},r.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},r.prototype.recalculate=function(s,d){n.prototype.recalculate.call(this,s,d),this.paint._values["line-floorwidth"]=ag.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)},r.prototype.createBucket=function(s){return new ja(s)},r.prototype.queryRadius=function(s){var d=s,v=oy(Ll("line-width",this,d),Ll("line-gap-width",this,d)),x=Ll("line-offset",this,d);return v/2+Math.abs(x)+Ro(this.paint.get("line-translate"))},r.prototype.queryIntersectsFeature=function(s,d,v,x,A,S,D){var B=rl(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,D),N=D/2*oy(this.paint.get("line-width").evaluate(d,v),this.paint.get("line-gap-width").evaluate(d,v)),V=this.paint.get("line-offset").evaluate(d,v);return V&&(x=function(Z,J){for(var ct=[],pt=new T(0,0),Mt=0;Mt<Z.length;Mt++){for(var bt=Z[Mt],Ut=[],$t=0;$t<bt.length;$t++){var te=bt[$t],ne=bt[$t+1],fe=$t===0?pt:te.sub(bt[$t-1])._unit()._perp(),Me=$t===bt.length-1?pt:ne.sub(te)._unit()._perp(),Fe=fe._add(Me)._unit();Fe._mult(1/(Fe.x*Me.x+Fe.y*Me.y)),Ut.push(Fe._mult(J)._add(te))}ct.push(Ut)}return ct}(x,V*D)),function(Z,J,ct){for(var pt=0;pt<J.length;pt++){var Mt=J[pt];if(Z.length>=3){for(var bt=0;bt<Mt.length;bt++)if(Pl(Z,Mt[bt]))return!0}if(Rs(Z,Mt,ct))return!0}return!1}(B,x,N)},r.prototype.isTileClipped=function(){return!0},r}(Tl);function oy(n,r){return r>0?r+2*n:n}var ay=po([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),n1=po([{name:"a_projected_pos",components:3,type:"Float32"}],4),i1=(po([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),po([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Hu=(po([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),po([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),sg=po([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function lg(n,r,s){return n.sections.forEach(function(d){d.text=function(v,x,A){var S=x.layout.get("text-transform").evaluate(A,{});return S==="uppercase"?v=v.toLocaleUpperCase():S==="lowercase"&&(v=v.toLocaleLowerCase()),hs.applyArabicShaping&&(v=hs.applyArabicShaping(v)),v}(d.text,r,s)}),n}po([{name:"triangle",components:3,type:"Uint16"}]),po([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),po([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),po([{type:"Float32",name:"offsetX"}]),po([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Dh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Lp=function(n,r,s,d,v){var x,A,S=8*v-d-1,D=(1<<S)-1,B=D>>1,N=-7,V=v-1,Z=-1,J=n[r+V];for(V+=Z,x=J&(1<<-N)-1,J>>=-N,N+=S;N>0;x=256*x+n[r+V],V+=Z,N-=8);for(A=x&(1<<-N)-1,x>>=-N,N+=d;N>0;A=256*A+n[r+V],V+=Z,N-=8);if(x===0)x=1-B;else{if(x===D)return A?NaN:1/0*(J?-1:1);A+=Math.pow(2,d),x-=B}return(J?-1:1)*A*Math.pow(2,x-d)},Rh=function(n,r,s,d,v,x){var A,S,D,B=8*x-v-1,N=(1<<B)-1,V=N>>1,Z=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,J=0,ct=1,pt=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(S=isNaN(r)?1:0,A=N):(A=Math.floor(Math.log(r)/Math.LN2),r*(D=Math.pow(2,-A))<1&&(A--,D*=2),(r+=A+V>=1?Z/D:Z*Math.pow(2,1-V))*D>=2&&(A++,D/=2),A+V>=N?(S=0,A=N):A+V>=1?(S=(r*D-1)*Math.pow(2,v),A+=V):(S=r*Math.pow(2,V-1)*Math.pow(2,v),A=0));v>=8;n[s+J]=255&S,J+=ct,S/=256,v-=8);for(A=A<<v|S,B+=v;B>0;n[s+J]=255&A,J+=ct,A/=256,B-=8);n[s+J-ct]|=128*pt},Yn=lr;function lr(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}lr.Varint=0,lr.Fixed64=1,lr.Bytes=2,lr.Fixed32=5;var Dd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ds(n){return n.type===lr.Bytes?n.readVarint()+n.pos:n.pos+1}function Tf(n,r,s){return s?4294967296*r+(n>>>0):4294967296*(r>>>0)+(n>>>0)}function Rd(n,r,s){var d=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(d);for(var v=s.pos-1;v>=n;v--)s.buf[v+d]=s.buf[v]}function sy(n,r){for(var s=0;s<n.length;s++)r.writeVarint(n[s])}function Ka(n,r){for(var s=0;s<n.length;s++)r.writeSVarint(n[s])}function r1(n,r){for(var s=0;s<n.length;s++)r.writeFloat(n[s])}function o1(n,r){for(var s=0;s<n.length;s++)r.writeDouble(n[s])}function ly(n,r){for(var s=0;s<n.length;s++)r.writeBoolean(n[s])}function a1(n,r){for(var s=0;s<n.length;s++)r.writeFixed32(n[s])}function uy(n,r){for(var s=0;s<n.length;s++)r.writeSFixed32(n[s])}function s1(n,r){for(var s=0;s<n.length;s++)r.writeFixed64(n[s])}function l1(n,r){for(var s=0;s<n.length;s++)r.writeSFixed64(n[s])}function zd(n,r){return(n[r]|n[r+1]<<8|n[r+2]<<16)+16777216*n[r+3]}function Bs(n,r,s){n[s]=r,n[s+1]=r>>>8,n[s+2]=r>>>16,n[s+3]=r>>>24}function Qa(n,r){return(n[r]|n[r+1]<<8|n[r+2]<<16)+(n[r+3]<<24)}function ug(n,r,s){n===1&&s.readMessage(u1,r)}function u1(n,r,s){if(n===3){var d=s.readMessage(cg,{}),v=d.width,x=d.height,A=d.left,S=d.top,D=d.advance;r.push({id:d.id,bitmap:new rh({width:v+6,height:x+6},d.bitmap),metrics:{width:v,height:x,left:A,top:S,advance:D}})}}function cg(n,r,s){n===1?r.id=s.readVarint():n===2?r.bitmap=s.readBytes():n===3?r.width=s.readVarint():n===4?r.height=s.readVarint():n===5?r.left=s.readSVarint():n===6?r.top=s.readSVarint():n===7&&(r.advance=s.readVarint())}function cy(n){for(var r=0,s=0,d=0,v=n;d<v.length;d+=1){var x=v[d];r+=x.w*x.h,s=Math.max(s,x.w)}n.sort(function(pt,Mt){return Mt.h-pt.h});for(var A=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}],S=0,D=0,B=0,N=n;B<N.length;B+=1)for(var V=N[B],Z=A.length-1;Z>=0;Z--){var J=A[Z];if(!(V.w>J.w||V.h>J.h)){if(V.x=J.x,V.y=J.y,D=Math.max(D,V.y+V.h),S=Math.max(S,V.x+V.w),V.w===J.w&&V.h===J.h){var ct=A.pop();Z<A.length&&(A[Z]=ct)}else V.h===J.h?(J.x+=V.w,J.w-=V.w):V.w===J.w?(J.y+=V.h,J.h-=V.h):(A.push({x:J.x+V.w,y:J.y,w:J.w-V.w,h:V.h}),J.y+=V.h,J.h-=V.h);break}}return{w:S,h:D,fill:r/(S*D)||0}}lr.prototype={destroy:function(){this.buf=null},readFields:function(n,r,s){for(s=s||this.length;this.pos<s;){var d=this.readVarint(),v=d>>3,x=this.pos;this.type=7&d,n(v,r,this),this.pos===x&&this.skip(d)}return r},readMessage:function(n,r){return this.readFields(n,r,this.readVarint()+this.pos)},readFixed32:function(){var n=zd(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=Qa(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=zd(this.buf,this.pos)+4294967296*zd(this.buf,this.pos+4);return this.pos+=8,n},readSFixed64:function(){var n=zd(this.buf,this.pos)+4294967296*Qa(this.buf,this.pos+4);return this.pos+=8,n},readFloat:function(){var n=Lp(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=Lp(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var r,s,d=this.buf;return r=127&(s=d[this.pos++]),s<128?r:(r|=(127&(s=d[this.pos++]))<<7,s<128?r:(r|=(127&(s=d[this.pos++]))<<14,s<128?r:(r|=(127&(s=d[this.pos++]))<<21,s<128?r:function(v,x,A){var S,D,B=A.buf;if(S=(112&(D=B[A.pos++]))>>4,D<128||(S|=(127&(D=B[A.pos++]))<<3,D<128)||(S|=(127&(D=B[A.pos++]))<<10,D<128)||(S|=(127&(D=B[A.pos++]))<<17,D<128)||(S|=(127&(D=B[A.pos++]))<<24,D<128)||(S|=(1&(D=B[A.pos++]))<<31,D<128))return Tf(v,S,x);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=d[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,r=this.pos;return this.pos=n,n-r>=12&&Dd?function(s,d,v){return Dd.decode(s.subarray(d,v))}(this.buf,r,n):function(s,d,v){for(var x="",A=d;A<v;){var S,D,B,N=s[A],V=null,Z=N>239?4:N>223?3:N>191?2:1;if(A+Z>v)break;Z===1?N<128&&(V=N):Z===2?(192&(S=s[A+1]))==128&&(V=(31&N)<<6|63&S)<=127&&(V=null):Z===3?(D=s[A+2],(192&(S=s[A+1]))==128&&(192&D)==128&&((V=(15&N)<<12|(63&S)<<6|63&D)<=2047||V>=55296&&V<=57343)&&(V=null)):Z===4&&(D=s[A+2],B=s[A+3],(192&(S=s[A+1]))==128&&(192&D)==128&&(192&B)==128&&((V=(15&N)<<18|(63&S)<<12|(63&D)<<6|63&B)<=65535||V>=1114112)&&(V=null)),V===null?(V=65533,Z=1):V>65535&&(V-=65536,x+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),x+=String.fromCharCode(V),A+=Z}return x}(this.buf,r,n)},readBytes:function(){var n=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,n);return this.pos=n,r},readPackedVarint:function(n,r){if(this.type!==lr.Bytes)return n.push(this.readVarint(r));var s=ds(this);for(n=n||[];this.pos<s;)n.push(this.readVarint(r));return n},readPackedSVarint:function(n){if(this.type!==lr.Bytes)return n.push(this.readSVarint());var r=ds(this);for(n=n||[];this.pos<r;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==lr.Bytes)return n.push(this.readBoolean());var r=ds(this);for(n=n||[];this.pos<r;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==lr.Bytes)return n.push(this.readFloat());var r=ds(this);for(n=n||[];this.pos<r;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==lr.Bytes)return n.push(this.readDouble());var r=ds(this);for(n=n||[];this.pos<r;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==lr.Bytes)return n.push(this.readFixed32());var r=ds(this);for(n=n||[];this.pos<r;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==lr.Bytes)return n.push(this.readSFixed32());var r=ds(this);for(n=n||[];this.pos<r;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==lr.Bytes)return n.push(this.readFixed64());var r=ds(this);for(n=n||[];this.pos<r;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==lr.Bytes)return n.push(this.readSFixed64());var r=ds(this);for(n=n||[];this.pos<r;)n.push(this.readSFixed64());return n},skip:function(n){var r=7&n;if(r===lr.Varint)for(;this.buf[this.pos++]>127;);else if(r===lr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===lr.Fixed32)this.pos+=4;else{if(r!==lr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(n,r){this.writeVarint(n<<3|r)},realloc:function(n){for(var r=this.length||16;r<this.pos+n;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),Bs(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),Bs(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),Bs(this.buf,-1&n,this.pos),Bs(this.buf,Math.floor(n*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),Bs(this.buf,-1&n,this.pos),Bs(this.buf,Math.floor(n*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(r,s){var d,v;if(r>=0?(d=r%4294967296|0,v=r/4294967296|0):(v=~(-r/4294967296),4294967295^(d=~(-r%4294967296))?d=d+1|0:(d=0,v=v+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(x,A,S){S.buf[S.pos++]=127&x|128,x>>>=7,S.buf[S.pos++]=127&x|128,x>>>=7,S.buf[S.pos++]=127&x|128,x>>>=7,S.buf[S.pos++]=127&x|128,S.buf[S.pos]=127&(x>>>=7)}(d,0,s),function(x,A){var S=(7&x)<<4;A.buf[A.pos++]|=S|((x>>>=3)?128:0),x&&(A.buf[A.pos++]=127&x|((x>>>=7)?128:0),x&&(A.buf[A.pos++]=127&x|((x>>>=7)?128:0),x&&(A.buf[A.pos++]=127&x|((x>>>=7)?128:0),x&&(A.buf[A.pos++]=127&x|((x>>>=7)?128:0),x&&(A.buf[A.pos++]=127&x)))))}(v,s)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var r=this.pos;this.pos=function(d,v,x){for(var A,S,D=0;D<v.length;D++){if((A=v.charCodeAt(D))>55295&&A<57344){if(!S){A>56319||D+1===v.length?(d[x++]=239,d[x++]=191,d[x++]=189):S=A;continue}if(A<56320){d[x++]=239,d[x++]=191,d[x++]=189,S=A;continue}A=S-55296<<10|A-56320|65536,S=null}else S&&(d[x++]=239,d[x++]=191,d[x++]=189,S=null);A<128?d[x++]=A:(A<2048?d[x++]=A>>6|192:(A<65536?d[x++]=A>>12|224:(d[x++]=A>>18|240,d[x++]=A>>12&63|128),d[x++]=A>>6&63|128),d[x++]=63&A|128)}return x}(this.buf,n,this.pos);var s=this.pos-r;s>=128&&Rd(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(n){this.realloc(4),Rh(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),Rh(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var r=n.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=n[s]},writeRawMessage:function(n,r){this.pos++;var s=this.pos;n(r,this);var d=this.pos-s;d>=128&&Rd(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeMessage:function(n,r,s){this.writeTag(n,lr.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(n,r){r.length&&this.writeMessage(n,sy,r)},writePackedSVarint:function(n,r){r.length&&this.writeMessage(n,Ka,r)},writePackedBoolean:function(n,r){r.length&&this.writeMessage(n,ly,r)},writePackedFloat:function(n,r){r.length&&this.writeMessage(n,r1,r)},writePackedDouble:function(n,r){r.length&&this.writeMessage(n,o1,r)},writePackedFixed32:function(n,r){r.length&&this.writeMessage(n,a1,r)},writePackedSFixed32:function(n,r){r.length&&this.writeMessage(n,uy,r)},writePackedFixed64:function(n,r){r.length&&this.writeMessage(n,s1,r)},writePackedSFixed64:function(n,r){r.length&&this.writeMessage(n,l1,r)},writeBytesField:function(n,r){this.writeTag(n,lr.Bytes),this.writeBytes(r)},writeFixed32Field:function(n,r){this.writeTag(n,lr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(n,r){this.writeTag(n,lr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(n,r){this.writeTag(n,lr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(n,r){this.writeTag(n,lr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(n,r){this.writeTag(n,lr.Varint),this.writeVarint(r)},writeSVarintField:function(n,r){this.writeTag(n,lr.Varint),this.writeSVarint(r)},writeStringField:function(n,r){this.writeTag(n,lr.Bytes),this.writeString(r)},writeFloatField:function(n,r){this.writeTag(n,lr.Fixed32),this.writeFloat(r)},writeDoubleField:function(n,r){this.writeTag(n,lr.Fixed64),this.writeDouble(r)},writeBooleanField:function(n,r){this.writeVarintField(n,!!r)}};var Od=function(n,r){var s=r.pixelRatio,d=r.version,v=r.stretchX,x=r.stretchY,A=r.content;this.paddedRect=n,this.pixelRatio=s,this.stretchX=v,this.stretchY=x,this.content=A,this.version=d},wc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};wc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},wc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},wc.tlbr.get=function(){return this.tl.concat(this.br)},wc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Od.prototype,wc);var kf=function(n,r){var s={},d={};this.haveRenderCallbacks=[];var v=[];this.addImages(n,s,v),this.addImages(r,d,v);var x=cy(v),A=new Xa({width:x.w||1,height:x.h||1});for(var S in n){var D=n[S],B=s[S].paddedRect;Xa.copy(D.data,A,{x:0,y:0},{x:B.x+1,y:B.y+1},D.data)}for(var N in r){var V=r[N],Z=d[N].paddedRect,J=Z.x+1,ct=Z.y+1,pt=V.data.width,Mt=V.data.height;Xa.copy(V.data,A,{x:0,y:0},{x:J,y:ct},V.data),Xa.copy(V.data,A,{x:0,y:Mt-1},{x:J,y:ct-1},{width:pt,height:1}),Xa.copy(V.data,A,{x:0,y:0},{x:J,y:ct+Mt},{width:pt,height:1}),Xa.copy(V.data,A,{x:pt-1,y:0},{x:J-1,y:ct},{width:1,height:Mt}),Xa.copy(V.data,A,{x:0,y:0},{x:J+pt,y:ct},{width:1,height:Mt})}this.image=A,this.iconPositions=s,this.patternPositions=d};kf.prototype.addImages=function(n,r,s){for(var d in n){var v=n[d],x={x:0,y:0,w:v.data.width+2,h:v.data.height+2};s.push(x),r[d]=new Od(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(d)}},kf.prototype.patchUpdatedImages=function(n,r){for(var s in n.dispatchRenderCallbacks(this.haveRenderCallbacks),n.updatedImages)this.patchUpdatedImage(this.iconPositions[s],n.getImage(s),r),this.patchUpdatedImage(this.patternPositions[s],n.getImage(s),r)},kf.prototype.patchUpdatedImage=function(n,r,s){if(n&&r&&n.version!==r.version){n.version=r.version;var d=n.tl;s.update(r.data,void 0,{x:d[0],y:d[1]})}},Xe("ImagePosition",Od),Xe("ImageAtlas",kf);var ms={horizontal:1,vertical:2,horizontalOnly:3},Pf=function(){this.scale=1,this.fontStack="",this.imageName=null};Pf.forText=function(n,r){var s=new Pf;return s.scale=n||1,s.fontStack=r,s},Pf.forImage=function(n){var r=new Pf;return r.imageName=n,r};var Ia=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Bd(n,r,s,d,v,x,A,S,D,B,N,V,Z,J,ct,pt){var Mt,bt=Ia.fromFeature(n,v);V===ms.vertical&&bt.verticalizePunctuation();var Ut=hs.processBidirectionalText,$t=hs.processStyledBidirectionalText;if(Ut&&bt.sections.length===1){Mt=[];for(var te=0,ne=Ut(bt.toString(),zh(bt,B,x,r,d,J,ct));te<ne.length;te+=1){var fe=ne[te],Me=new Ia;Me.text=fe,Me.sections=bt.sections;for(var Fe=0;Fe<fe.length;Fe++)Me.sectionIndex.push(0);Mt.push(Me)}}else if($t){Mt=[];for(var _n=0,Ze=$t(bt.text,bt.sectionIndex,zh(bt,B,x,r,d,J,ct));_n<Ze.length;_n+=1){var Mn=Ze[_n],Je=new Ia;Je.text=Mn[0],Je.sectionIndex=Mn[1],Je.sections=bt.sections,Mt.push(Je)}}else Mt=function(fn,fi){for(var Xn=[],Ei=fn.text,Sn=0,qi=0,Rr=fi;qi<Rr.length;qi+=1){var zr=Rr[qi];Xn.push(fn.substring(Sn,zr)),Sn=zr}return Sn<Ei.length&&Xn.push(fn.substring(Sn,Ei.length)),Xn}(bt,zh(bt,B,x,r,d,J,ct));var ri=[],On={positionedLines:ri,text:bt.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(fn,fi,Xn,Ei,Sn,qi,Rr,zr,Ir,Or,to,vo){for(var Mo=0,Ma=-17,jo=0,Ea=0,ao=zr==="right"?1:zr==="left"?0:.5,Ho=0,bi=0,pr=Sn;bi<pr.length;bi+=1){var ir=pr[bi];ir.trim();var Ni=ir.getMaxScale(),Ha=24*(Ni-1),sa={positionedGlyphs:[],lineOffset:0};fn.positionedLines[Ho]=sa;var Mr=sa.positionedGlyphs,cr=0;if(ir.length()){for(var la=0;la<ir.length();la++){var Wi=ir.getSection(la),ts=ir.getSectionIndex(la),Wn=ir.getCharCode(la),Gu=0,Xi=null,Er=null,Bl=null,sl=24,Uh=!(Ir===ms.horizontal||!to&&!El(Wn)||to&&(Fd[Wn]||(Nl=Wn,Re.Arabic(Nl)||Re["Arabic Supplement"](Nl)||Re["Arabic Extended-A"](Nl)||Re["Arabic Presentation Forms-A"](Nl)||Re["Arabic Presentation Forms-B"](Nl))));if(Wi.imageName){var Of=Ei[Wi.imageName];if(!Of)continue;Bl=Wi.imageName,fn.iconsInText=fn.iconsInText||!0,Er=Of.paddedRect;var Ec=Of.displaySize;Wi.scale=24*Wi.scale/vo,Gu=Ha+(24-Ec[1]*Wi.scale),sl=(Xi={width:Ec[0],height:Ec[1],left:1,top:-3,advance:Uh?Ec[1]:Ec[0]}).advance;var Bf=Uh?Ec[0]*Wi.scale-24*Ni:Ec[1]*Wi.scale-24*Ni;Bf>0&&Bf>cr&&(cr=Bf)}else{var $d=Xn[Wi.fontStack],lh=$d&&$d[Wn];if(lh&&lh.rect)Er=lh.rect,Xi=lh.metrics;else{var Fp=fi[Wi.fontStack],Fl=Fp&&Fp[Wn];if(!Fl)continue;Xi=Fl.metrics}Gu=24*(Ni-Wi.scale)}Uh?(fn.verticalizable=!0,Mr.push({glyph:Wn,imageName:Bl,x:Mo,y:Ma+Gu,vertical:Uh,scale:Wi.scale,fontStack:Wi.fontStack,sectionIndex:ts,metrics:Xi,rect:Er}),Mo+=sl*Wi.scale+Or):(Mr.push({glyph:Wn,imageName:Bl,x:Mo,y:Ma+Gu,vertical:Uh,scale:Wi.scale,fontStack:Wi.fontStack,sectionIndex:ts,metrics:Xi,rect:Er}),Mo+=Xi.advance*Wi.scale+Or)}Mr.length!==0&&(jo=Math.max(Mo-Or,jo),fy(Mr,0,Mr.length-1,ao,cr)),Mo=0;var Np=qi*Ni+cr;sa.lineOffset=Math.max(cr,Ha),Ma+=Np,Ea=Math.max(Np,Ea),++Ho}else Ma+=qi,++Ho}var Nl,Xr=Ma- -17,Kr=Dp(Rr),Sc=Kr.horizontalAlign,Ff=Kr.verticalAlign;(function(Yd,Xd,Vp,Up,Kd,Nf,Tc,jh,Qd){var Hh,Gh=(Xd-Vp)*Kd;Hh=Nf!==Tc?-jh*Up- -17:(-Up*Qd+.5)*Tc;for(var Sa=0,qu=Yd;Sa<qu.length;Sa+=1)for(var qh=0,jp=qu[Sa].positionedGlyphs;qh<jp.length;qh+=1){var Vf=jp[qh];Vf.x+=Gh,Vf.y+=Hh}})(fn.positionedLines,ao,Sc,Ff,jo,Ea,qi,Xr,Sn.length),fn.top+=-Ff*Xr,fn.bottom=fn.top+Xr,fn.left+=-Sc*jo,fn.right=fn.left+jo}(On,r,s,d,Mt,A,S,D,V,B,Z,pt),!function(fn){for(var fi=0,Xn=fn;fi<Xn.length;fi+=1)if(Xn[fi].positionedGlyphs.length!==0)return!1;return!0}(ri)&&On}Ia.fromFeature=function(n,r){for(var s=new Ia,d=0;d<n.sections.length;d++){var v=n.sections[d];v.image?s.addImageSection(v):s.addTextSection(v,r)}return s},Ia.prototype.length=function(){return this.text.length},Ia.prototype.getSection=function(n){return this.sections[this.sectionIndex[n]]},Ia.prototype.getSectionIndex=function(n){return this.sectionIndex[n]},Ia.prototype.getCharCode=function(n){return this.text.charCodeAt(n)},Ia.prototype.verticalizePunctuation=function(){this.text=function(n){for(var r="",s=0;s<n.length;s++){var d=n.charCodeAt(s+1)||null,v=n.charCodeAt(s-1)||null;r+=d&&Sl(d)&&!Dh[n[s+1]]||v&&Sl(v)&&!Dh[n[s-1]]||!Dh[n[s]]?n[s]:Dh[n[s]]}return r}(this.text)},Ia.prototype.trim=function(){for(var n=0,r=0;r<this.text.length&&Fd[this.text.charCodeAt(r)];r++)n++;for(var s=this.text.length,d=this.text.length-1;d>=0&&d>=n&&Fd[this.text.charCodeAt(d)];d--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)},Ia.prototype.substring=function(n,r){var s=new Ia;return s.text=this.text.substring(n,r),s.sectionIndex=this.sectionIndex.slice(n,r),s.sections=this.sections,s},Ia.prototype.toString=function(){return this.text},Ia.prototype.getMaxScale=function(){var n=this;return this.sectionIndex.reduce(function(r,s){return Math.max(r,n.sections[s].scale)},0)},Ia.prototype.addTextSection=function(n,r){this.text+=n.text,this.sections.push(Pf.forText(n.scale,n.fontStack||r));for(var s=this.sections.length-1,d=0;d<n.text.length;++d)this.sectionIndex.push(s)},Ia.prototype.addImageSection=function(n){var r=n.image?n.image.name:"";if(r.length!==0){var s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(Pf.forImage(r)),this.sectionIndex.push(this.sections.length-1)):Bt("Reached maximum number of images 6401")}else Bt("Can't add FormattedSection with an empty image.")},Ia.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Fd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ja={};function hg(n,r,s,d,v,x){if(r.imageName){var A=d[r.imageName];return A?A.displaySize[0]*r.scale*24/x+v:0}var S=s[r.fontStack],D=S&&S[n];return D?D.metrics.advance*r.scale+v:0}function hy(n,r,s,d){var v=Math.pow(n-r,2);return d?n<r?v/2:2*v:v+Math.abs(s)*s}function fg(n,r,s){var d=0;return n===10&&(d-=1e4),s&&(d+=150),n!==40&&n!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function pg(n,r,s,d,v,x){for(var A=null,S=hy(r,s,v,x),D=0,B=d;D<B.length;D+=1){var N=B[D],V=hy(r-N.x,s,v,x)+N.badness;V<=S&&(A=N,S=V)}return{index:n,x:r,priorBreak:A,badness:S}}function zh(n,r,s,d,v,x,A){if(x!=="point")return[];if(!n)return[];for(var S,D=[],B=function(Mt,bt,Ut,$t,te,ne){for(var fe=0,Me=0;Me<Mt.length();Me++){var Fe=Mt.getSection(Me);fe+=hg(Mt.getCharCode(Me),Fe,$t,te,bt,ne)}return fe/Math.max(1,Math.ceil(fe/Ut))}(n,r,s,d,v,A),N=n.text.indexOf("")>=0,V=0,Z=0;Z<n.length();Z++){var J=n.getSection(Z),ct=n.getCharCode(Z);if(Fd[ct]||(V+=hg(ct,J,d,v,r,A)),Z<n.length()-1){var pt=!((S=ct)<11904||!(Re["Bopomofo Extended"](S)||Re.Bopomofo(S)||Re["CJK Compatibility Forms"](S)||Re["CJK Compatibility Ideographs"](S)||Re["CJK Compatibility"](S)||Re["CJK Radicals Supplement"](S)||Re["CJK Strokes"](S)||Re["CJK Symbols and Punctuation"](S)||Re["CJK Unified Ideographs Extension A"](S)||Re["CJK Unified Ideographs"](S)||Re["Enclosed CJK Letters and Months"](S)||Re["Halfwidth and Fullwidth Forms"](S)||Re.Hiragana(S)||Re["Ideographic Description Characters"](S)||Re["Kangxi Radicals"](S)||Re["Katakana Phonetic Extensions"](S)||Re.Katakana(S)||Re["Vertical Forms"](S)||Re["Yi Radicals"](S)||Re["Yi Syllables"](S)));(Ja[ct]||pt||J.imageName)&&D.push(pg(Z+1,V,B,D,fg(ct,n.getCharCode(Z+1),pt&&N),!1))}}return function Mt(bt){return bt?Mt(bt.priorBreak).concat(bt.index):[]}(pg(n.length(),V,B,D,0,!0))}function Dp(n){var r=.5,s=.5;switch(n){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function fy(n,r,s,d,v){if(d||v)for(var x=n[s],A=(n[s].x+x.metrics.advance*x.scale)*d,S=r;S<=s;S++)n[S].x-=A,n[S].y+=v}function dg(n,r,s,d,v,x){var A,S=n.image;if(S.content){var D=S.content,B=S.pixelRatio||1;A=[D[0]/B,D[1]/B,S.displaySize[0]-D[2]/B,S.displaySize[1]-D[3]/B]}var N,V,Z,J,ct=r.left*x,pt=r.right*x;s==="width"||s==="both"?(J=v[0]+ct-d[3],V=v[0]+pt+d[1]):V=(J=v[0]+(ct+pt-S.displaySize[0])/2)+S.displaySize[0];var Mt=r.top*x,bt=r.bottom*x;return s==="height"||s==="both"?(N=v[1]+Mt-d[0],Z=v[1]+bt+d[2]):Z=(N=v[1]+(Mt+bt-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:N,right:V,bottom:Z,left:J,collisionPadding:A}}Ja[10]=!0,Ja[32]=!0,Ja[38]=!0,Ja[40]=!0,Ja[41]=!0,Ja[43]=!0,Ja[45]=!0,Ja[47]=!0,Ja[173]=!0,Ja[183]=!0,Ja[8203]=!0,Ja[8208]=!0,Ja[8211]=!0,Ja[8231]=!0;var Cc=function(n){function r(s,d,v,x){n.call(this,s,d),this.angle=v,x!==void 0&&(this.segment=x)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.clone=function(){return new r(this.x,this.y,this.angle,this.segment)},r}(T);function Nd(n,r){var s=r.expression;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new zn(n+1))};if(s.kind==="source")return{kind:"source"};for(var d=s.zoomStops,v=s.interpolationType,x=0;x<d.length&&d[x]<=n;)x++;for(var A=x=Math.max(0,x-1);A<d.length&&d[A]<n+1;)A++;A=Math.min(d.length-1,A);var S=d[x],D=d[A];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:D,interpolationType:v}:{kind:"camera",minZoom:S,maxZoom:D,minSize:s.evaluate(new zn(S)),maxSize:s.evaluate(new zn(D)),interpolationType:v}}function lu(n,r,s){var d=r.uSize,v=s.lowerSize;return n.kind==="source"?v/128:n.kind==="composite"?Zr(v/128,s.upperSize/128,r.uSizeT):d}function oh(n,r){var s=0,d=0;if(n.kind==="constant")d=n.layoutSize;else if(n.kind!=="source"){var v=n.interpolationType,x=v?X(co.interpolationFactor(v,r,n.minZoom,n.maxZoom),0,1):0;n.kind==="camera"?d=Zr(n.minSize,n.maxSize,x):s=x}return{uSizeT:s,uSize:d}}Xe("Anchor",Cc);var c1=Object.freeze({__proto__:null,getSizeData:Nd,evaluateSizeForFeature:lu,evaluateSizeForZoom:oh,SIZE_PACK_FACTOR:128});function mg(n,r,s,d,v){if(r.segment===void 0)return!0;for(var x=r,A=r.segment+1,S=0;S>-s/2;){if(--A<0)return!1;S-=n[A].dist(x),x=n[A]}S+=n[A].dist(n[A+1]),A++;for(var D=[],B=0;S<s/2;){var N=n[A],V=n[A+1];if(!V)return!1;var Z=n[A-1].angleTo(N)-N.angleTo(V);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:S,angleDelta:Z}),B+=Z;S-D[0].distance>d;)B-=D.shift().angleDelta;if(B>v)return!1;A++,S+=N.dist(V)}return!0}function py(n){for(var r=0,s=0;s<n.length-1;s++)r+=n[s].dist(n[s+1]);return r}function dy(n,r,s){return n?.6*r*s:0}function my(n,r){return Math.max(n?n.right-n.left:0,r?r.right-r.left:0)}function h1(n,r,s,d,v,x){for(var A=dy(s,v,x),S=my(s,d)*x,D=0,B=py(n)/2,N=0;N<n.length-1;N++){var V=n[N],Z=n[N+1],J=V.dist(Z);if(D+J>B){var ct=(B-D)/J,pt=Zr(V.x,Z.x,ct),Mt=Zr(V.y,Z.y,ct),bt=new Cc(pt,Mt,Z.angleTo(V),N);return bt._round(),!A||mg(n,bt,S,A,r)?bt:void 0}D+=J}}function f1(n,r,s,d,v,x,A,S,D){var B=dy(d,x,A),N=my(d,v),V=N*A,Z=n[0].x===0||n[0].x===D||n[0].y===0||n[0].y===D;return r-V<r/4&&(r=V+r/4),function J(ct,pt,Mt,bt,Ut,$t,te,ne,fe){for(var Me=$t/2,Fe=py(ct),_n=0,Ze=pt-Mt,Mn=[],Je=0;Je<ct.length-1;Je++){for(var ri=ct[Je],On=ct[Je+1],fn=ri.dist(On),fi=On.angleTo(ri);Ze+Mt<_n+fn;){var Xn=((Ze+=Mt)-_n)/fn,Ei=Zr(ri.x,On.x,Xn),Sn=Zr(ri.y,On.y,Xn);if(Ei>=0&&Ei<fe&&Sn>=0&&Sn<fe&&Ze-Me>=0&&Ze+Me<=Fe){var qi=new Cc(Ei,Sn,fi,Je);qi._round(),bt&&!mg(ct,qi,$t,bt,Ut)||Mn.push(qi)}}_n+=fn}return ne||Mn.length||te||(Mn=J(ct,_n/2,Mt,bt,Ut,$t,te,!0,fe)),Mn}(n,Z?r/2*S%r:(N/2+2*x)*A*S%r,r,B,s,V,Z,!1,D)}function gy(n,r,s,d,v){for(var x=[],A=0;A<n.length;A++)for(var S=n[A],D=void 0,B=0;B<S.length-1;B++){var N=S[B],V=S[B+1];N.x<r&&V.x<r||(N.x<r?N=new T(r,N.y+(r-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x<r&&(V=new T(r,N.y+(r-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y<s&&V.y<s||(N.y<s?N=new T(N.x+(s-N.y)/(V.y-N.y)*(V.x-N.x),s)._round():V.y<s&&(V=new T(N.x+(s-N.y)/(V.y-N.y)*(V.x-N.x),s)._round()),N.x>=d&&V.x>=d||(N.x>=d?N=new T(d,N.y+(d-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x>=d&&(V=new T(d,N.y+(d-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y>=v&&V.y>=v||(N.y>=v?N=new T(N.x+(v-N.y)/(V.y-N.y)*(V.x-N.x),v)._round():V.y>=v&&(V=new T(N.x+(v-N.y)/(V.y-N.y)*(V.x-N.x),v)._round()),D&&N.equals(D[D.length-1])||x.push(D=[N]),D.push(V)))))}return x}function vy(n,r,s,d){var v=[],x=n.image,A=x.pixelRatio,S=x.paddedRect.w-2,D=x.paddedRect.h-2,B=n.right-n.left,N=n.bottom-n.top,V=x.stretchX||[[0,S]],Z=x.stretchY||[[0,D]],J=function(Ei,Sn){return Ei+Sn[1]-Sn[0]},ct=V.reduce(J,0),pt=Z.reduce(J,0),Mt=S-ct,bt=D-pt,Ut=0,$t=ct,te=0,ne=pt,fe=0,Me=Mt,Fe=0,_n=bt;if(x.content&&d){var Ze=x.content;Ut=Vd(V,0,Ze[0]),te=Vd(Z,0,Ze[1]),$t=Vd(V,Ze[0],Ze[2]),ne=Vd(Z,Ze[1],Ze[3]),fe=Ze[0]-Ut,Fe=Ze[1]-te,Me=Ze[2]-Ze[0]-$t,_n=Ze[3]-Ze[1]-ne}var Mn=function(Ei,Sn,qi,Rr){var zr=Ud(Ei.stretch-Ut,$t,B,n.left),Ir=jd(Ei.fixed-fe,Me,Ei.stretch,ct),Or=Ud(Sn.stretch-te,ne,N,n.top),to=jd(Sn.fixed-Fe,_n,Sn.stretch,pt),vo=Ud(qi.stretch-Ut,$t,B,n.left),Mo=jd(qi.fixed-fe,Me,qi.stretch,ct),Ma=Ud(Rr.stretch-te,ne,N,n.top),jo=jd(Rr.fixed-Fe,_n,Rr.stretch,pt),Ea=new T(zr,Or),ao=new T(vo,Or),Ho=new T(vo,Ma),bi=new T(zr,Ma),pr=new T(Ir/A,to/A),ir=new T(Mo/A,jo/A),Ni=r*Math.PI/180;if(Ni){var Ha=Math.sin(Ni),sa=Math.cos(Ni),Mr=[sa,-Ha,Ha,sa];Ea._matMult(Mr),ao._matMult(Mr),bi._matMult(Mr),Ho._matMult(Mr)}var cr=Ei.stretch+Ei.fixed,la=Sn.stretch+Sn.fixed;return{tl:Ea,tr:ao,bl:bi,br:Ho,tex:{x:x.paddedRect.x+1+cr,y:x.paddedRect.y+1+la,w:qi.stretch+qi.fixed-cr,h:Rr.stretch+Rr.fixed-la},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:pr,pixelOffsetBR:ir,minFontScaleX:Me/A/B,minFontScaleY:_n/A/N,isSDF:s}};if(d&&(x.stretchX||x.stretchY))for(var Je=yy(V,Mt,ct),ri=yy(Z,bt,pt),On=0;On<Je.length-1;On++)for(var fn=Je[On],fi=Je[On+1],Xn=0;Xn<ri.length-1;Xn++)v.push(Mn(fn,ri[Xn],fi,ri[Xn+1]));else v.push(Mn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:D+1}));return v}function Vd(n,r,s){for(var d=0,v=0,x=n;v<x.length;v+=1){var A=x[v];d+=Math.max(r,Math.min(s,A[1]))-Math.max(r,Math.min(s,A[0]))}return d}function yy(n,r,s){for(var d=[{fixed:-1,stretch:0}],v=0,x=n;v<x.length;v+=1){var A=x[v],S=A[0],D=A[1],B=d[d.length-1];d.push({fixed:S-B.stretch,stretch:B.stretch}),d.push({fixed:S-B.stretch,stretch:B.stretch+(D-S)})}return d.push({fixed:r+1,stretch:s}),d}function Ud(n,r,s,d){return n/r*s+d}function jd(n,r,s,d){return n-r*s/d}var Rp=function(n,r,s,d,v,x,A,S,D,B){if(this.boxStartIndex=n.length,D){var N=x.top,V=x.bottom,Z=x.collisionPadding;Z&&(N-=Z[1],V+=Z[3]);var J=V-N;J>0&&(J=Math.max(10,J),this.circleDiameter=J)}else{var ct=x.top*A-S,pt=x.bottom*A+S,Mt=x.left*A-S,bt=x.right*A+S,Ut=x.collisionPadding;if(Ut&&(Mt-=Ut[0]*A,ct-=Ut[1]*A,bt+=Ut[2]*A,pt+=Ut[3]*A),B){var $t=new T(Mt,ct),te=new T(bt,ct),ne=new T(Mt,pt),fe=new T(bt,pt),Me=B*Math.PI/180;$t._rotate(Me),te._rotate(Me),ne._rotate(Me),fe._rotate(Me),Mt=Math.min($t.x,te.x,ne.x,fe.x),bt=Math.max($t.x,te.x,ne.x,fe.x),ct=Math.min($t.y,te.y,ne.y,fe.y),pt=Math.max($t.y,te.y,ne.y,fe.y)}n.emplaceBack(r.x,r.y,Mt,ct,bt,pt,s,d,v)}this.boxEndIndex=n.length},Oh=function(n,r){if(n===void 0&&(n=[]),r===void 0&&(r=_y),this.data=n,this.length=this.data.length,this.compare=r,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};function _y(n,r){return n<r?-1:n>r?1:0}function p1(n,r,s){s===void 0&&(s=!1);for(var d=1/0,v=1/0,x=-1/0,A=-1/0,S=n[0],D=0;D<S.length;D++){var B=S[D];(!D||B.x<d)&&(d=B.x),(!D||B.y<v)&&(v=B.y),(!D||B.x>x)&&(x=B.x),(!D||B.y>A)&&(A=B.y)}var N=Math.min(x-d,A-v),V=N/2,Z=new Oh([],d1);if(N===0)return new T(d,v);for(var J=d;J<x;J+=N)for(var ct=v;ct<A;ct+=N)Z.push(new Lf(J+V,ct+V,V,n));for(var pt=function(Ut){for(var $t=0,te=0,ne=0,fe=Ut[0],Me=0,Fe=fe.length,_n=Fe-1;Me<Fe;_n=Me++){var Ze=fe[Me],Mn=fe[_n],Je=Ze.x*Mn.y-Mn.x*Ze.y;te+=(Ze.x+Mn.x)*Je,ne+=(Ze.y+Mn.y)*Je,$t+=3*Je}return new Lf(te/$t,ne/$t,0,Ut)}(n),Mt=Z.length;Z.length;){var bt=Z.pop();(bt.d>pt.d||!pt.d)&&(pt=bt,s&&console.log("found best %d after %d probes",Math.round(1e4*bt.d)/1e4,Mt)),bt.max-pt.d<=r||(Z.push(new Lf(bt.p.x-(V=bt.h/2),bt.p.y-V,V,n)),Z.push(new Lf(bt.p.x+V,bt.p.y-V,V,n)),Z.push(new Lf(bt.p.x-V,bt.p.y+V,V,n)),Z.push(new Lf(bt.p.x+V,bt.p.y+V,V,n)),Mt+=4)}return s&&(console.log("num probes: "+Mt),console.log("best distance: "+pt.d)),pt.p}function d1(n,r){return r.max-n.max}function Lf(n,r,s,d){this.p=new T(n,r),this.h=s,this.d=function(v,x){for(var A=!1,S=1/0,D=0;D<x.length;D++)for(var B=x[D],N=0,V=B.length,Z=V-1;N<V;Z=N++){var J=B[N],ct=B[Z];J.y>v.y!=ct.y>v.y&&v.x<(ct.x-J.x)*(v.y-J.y)/(ct.y-J.y)+J.x&&(A=!A),S=Math.min(S,xc(v,J,ct))}return(A?1:-1)*Math.sqrt(S)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}Oh.prototype.push=function(n){this.data.push(n),this.length++,this._up(this.length-1)},Oh.prototype.pop=function(){if(this.length!==0){var n=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),n}},Oh.prototype.peek=function(){return this.data[0]},Oh.prototype._up=function(n){for(var r=this.data,s=this.compare,d=r[n];n>0;){var v=n-1>>1,x=r[v];if(s(d,x)>=0)break;r[n]=x,n=v}r[n]=d},Oh.prototype._down=function(n){for(var r=this.data,s=this.compare,d=this.length>>1,v=r[n];n<d;){var x=1+(n<<1),A=r[x],S=x+1;if(S<this.length&&s(r[S],A)<0&&(x=S,A=r[S]),s(A,v)>=0)break;r[n]=A,n=x}r[n]=v};var Hd=Number.POSITIVE_INFINITY;function xy(n,r){return r[1]!==Hd?function(s,d,v){var x=0,A=0;switch(d=Math.abs(d),v=Math.abs(v),s){case"top-right":case"top-left":case"top":A=v-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-v}switch(s){case"top-right":case"bottom-right":case"right":x=-d;break;case"top-left":case"bottom-left":case"left":x=d}return[x,A]}(n,r[0],r[1]):function(s,d){var v=0,x=0;d<0&&(d=0);var A=d/Math.sqrt(2);switch(s){case"top-right":case"top-left":x=A-7;break;case"bottom-right":case"bottom-left":x=7-A;break;case"bottom":x=7-d;break;case"top":x=d-7}switch(s){case"top-right":case"bottom-right":v=-A;break;case"top-left":case"bottom-left":v=A;break;case"left":v=d;break;case"right":v=-d}return[v,x]}(n,r[0])}function gg(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function by(n,r,s,d,v,x,A,S,D,B,N,V,Z,J,ct){var pt=function(te,ne,fe,Me,Fe,_n,Ze,Mn){for(var Je=Me.layout.get("text-rotate").evaluate(_n,{})*Math.PI/180,ri=[],On=0,fn=ne.positionedLines;On<fn.length;On+=1)for(var fi=fn[On],Xn=0,Ei=fi.positionedGlyphs;Xn<Ei.length;Xn+=1){var Sn=Ei[Xn];if(Sn.rect){var qi=Sn.rect||{},Rr=4,zr=!0,Ir=1,Or=0,to=(Fe||Mn)&&Sn.vertical,vo=Sn.metrics.advance*Sn.scale/2;if(Mn&&ne.verticalizable&&(Or=fi.lineOffset/2-(Sn.imageName?-(24-Sn.metrics.width*Sn.scale)/2:24*(Sn.scale-1))),Sn.imageName){var Mo=Ze[Sn.imageName];zr=Mo.sdf,Rr=1/(Ir=Mo.pixelRatio)}var Ma=Fe?[Sn.x+vo,Sn.y]:[0,0],jo=Fe?[0,0]:[Sn.x+vo+fe[0],Sn.y+fe[1]-Or],Ea=[0,0];to&&(Ea=jo,jo=[0,0]);var ao=(Sn.metrics.left-Rr)*Sn.scale-vo+jo[0],Ho=(-Sn.metrics.top-Rr)*Sn.scale+jo[1],bi=ao+qi.w*Sn.scale/Ir,pr=Ho+qi.h*Sn.scale/Ir,ir=new T(ao,Ho),Ni=new T(bi,Ho),Ha=new T(ao,pr),sa=new T(bi,pr);if(to){var Mr=new T(-vo,vo- -17),cr=-Math.PI/2,la=12-vo,Wi=new T(22-la,-(Sn.imageName?la:0)),ts=new(Function.prototype.bind.apply(T,[null].concat(Ea)));ir._rotateAround(cr,Mr)._add(Wi)._add(ts),Ni._rotateAround(cr,Mr)._add(Wi)._add(ts),Ha._rotateAround(cr,Mr)._add(Wi)._add(ts),sa._rotateAround(cr,Mr)._add(Wi)._add(ts)}if(Je){var Wn=Math.sin(Je),Gu=Math.cos(Je),Xi=[Gu,-Wn,Wn,Gu];ir._matMult(Xi),Ni._matMult(Xi),Ha._matMult(Xi),sa._matMult(Xi)}var Er=new T(0,0),Bl=new T(0,0);ri.push({tl:ir,tr:Ni,bl:Ha,br:sa,tex:qi,writingMode:ne.writingMode,glyphOffset:Ma,sectionIndex:Sn.sectionIndex,isSDF:zr,pixelOffsetTL:Er,pixelOffsetBR:Bl,minFontScaleX:0,minFontScaleY:0})}}return ri}(0,s,S,v,x,A,d,n.allowVerticalPlacement),Mt=n.textSizeData,bt=null;Mt.kind==="source"?(bt=[128*v.layout.get("text-size").evaluate(A,{})])[0]>32640&&Bt(n.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Mt.kind==="composite"&&((bt=[128*J.compositeTextSizes[0].evaluate(A,{},ct),128*J.compositeTextSizes[1].evaluate(A,{},ct)])[0]>32640||bt[1]>32640)&&Bt(n.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),n.addSymbols(n.text,pt,bt,S,x,A,B,r,D.lineStartIndex,D.lineLength,Z,ct);for(var Ut=0,$t=N;Ut<$t.length;Ut+=1)V[$t[Ut]]=n.text.placedSymbolArray.length-1;return 4*pt.length}function Ay(n){for(var r in n)return n[r];return null}function m1(n,r,s,d){var v=n.compareText;if(r in v){for(var x=v[r],A=x.length-1;A>=0;A--)if(d.dist(x[A])<s)return!0}else v[r]=[];return v[r].push(d),!1}var g1=su.VectorTileFeature.types,Ol=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Gd(n,r,s,d,v,x,A,S,D,B,N,V,Z){var J=S?Math.min(32640,Math.round(S[0])):0,ct=S?Math.min(32640,Math.round(S[1])):0;n.emplaceBack(r,s,Math.round(32*d),Math.round(32*v),x,A,(J<<1)+(D?1:0),ct,16*B,16*N,256*V,256*Z)}function vg(n,r,s){n.emplaceBack(r.x,r.y,s),n.emplaceBack(r.x,r.y,s),n.emplaceBack(r.x,r.y,s),n.emplaceBack(r.x,r.y,s)}function v1(n){for(var r=0,s=n.sections;r<s.length;r+=1)if(yf(s[r].text))return!0;return!1}var Bh=function(n){this.layoutVertexArray=new Af,this.indexArray=new Bu,this.programConfigurations=n,this.segments=new it,this.dynamicLayoutVertexArray=new Jc,this.opacityVertexArray=new Mh,this.placedSymbolArray=new m};Bh.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Bh.prototype.upload=function(n,r,s,d){this.isEmpty()||(s&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ay.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,n1.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Ol,!0),this.opacityVertexBuffer.itemSize=1),(s||d)&&this.programConfigurations.upload(n))},Bh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Xe("SymbolBuffers",Bh);var zp=function(n,r,s){this.layoutVertexArray=new n,this.layoutAttributes=r,this.indexArray=new s,this.segments=new it,this.collisionVertexArray=new wp};zp.prototype.upload=function(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,i1.members,!0)},zp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Xe("CollisionBuffers",zp);var ur=function(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(x){return x.id}),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ps([]),this.placementViewportMatrix=ps([]);var r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Nd(this.zoom,r["text-size"]),this.iconSizeData=Nd(this.zoom,r["icon-size"]);var s=this.layers[0].layout,d=s.get("symbol-sort-key"),v=s.get("symbol-z-order");this.canOverlap=s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&d.constantOr(1)!==void 0,this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(function(x){return ms[x]})),this.stateDependentLayerIds=this.layers.filter(function(x){return x.isStateDependent()}).map(function(x){return x.id}),this.sourceID=n.sourceID};ur.prototype.createArrays=function(){this.text=new Bh(new mn(this.layers,this.zoom,function(n){return/^text/.test(n)})),this.icon=new Bh(new mn(this.layers,this.zoom,function(n){return/^icon/.test(n)})),this.glyphOffsetArray=new E,this.lineVertexArray=new L,this.symbolInstances=new w},ur.prototype.calculateGlyphDependencies=function(n,r,s,d,v){for(var x=0;x<n.length;x++)if(r[n.charCodeAt(x)]=!0,(s||d)&&v){var A=Dh[n.charAt(x)];A&&(r[A.charCodeAt(0)]=!0)}},ur.prototype.populate=function(n,r,s){var d=this.layers[0],v=d.layout,x=v.get("text-font"),A=v.get("text-field"),S=v.get("icon-image"),D=(A.value.kind!=="constant"||A.value.value instanceof Pr&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),B=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,N=v.get("symbol-sort-key");if(this.features=[],D||B){for(var V=r.iconDependencies,Z=r.glyphDependencies,J=r.availableImages,ct=new zn(this.zoom),pt=0,Mt=n;pt<Mt.length;pt+=1){var bt=Mt[pt],Ut=bt.feature,$t=bt.id,te=bt.index,ne=bt.sourceLayerIndex,fe=d._featureFilter.needGeometry,Me=yr(Ut,fe);if(d._featureFilter.filter(ct,Me,s)){fe||(Me.geometry=Cr(Ut));var Fe=void 0;if(D){var _n=d.getValueAndResolveTokens("text-field",Me,s,J),Ze=Pr.factory(_n);v1(Ze)&&(this.hasRTLText=!0),(!this.hasRTLText||xf()==="unavailable"||this.hasRTLText&&hs.isParsed())&&(Fe=lg(Ze,d,Me))}var Mn=void 0;if(B){var Je=d.getValueAndResolveTokens("icon-image",Me,s,J);Mn=Je instanceof Bo?Je:Bo.fromString(Je)}if(Fe||Mn){var ri=this.sortFeaturesByKey?N.evaluate(Me,{},s):void 0;if(this.features.push({id:$t,text:Fe,icon:Mn,index:te,sourceLayerIndex:ne,geometry:Me.geometry,properties:Ut.properties,type:g1[Ut.type],sortKey:ri}),Mn&&(V[Mn.name]=!0),Fe){var On=x.evaluate(Me,{},s).join(","),fn=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ms.vertical)>=0;for(var fi=0,Xn=Fe.sections;fi<Xn.length;fi+=1){var Ei=Xn[fi];if(Ei.image)V[Ei.image.name]=!0;else{var Sn=el(Fe.toString()),qi=Ei.fontStack||On,Rr=Z[qi]=Z[qi]||{};this.calculateGlyphDependencies(Ei.text,Rr,fn,this.allowVerticalPlacement,Sn)}}}}}}v.get("symbol-placement")==="line"&&(this.features=function(zr){var Ir={},Or={},to=[],vo=0;function Mo(Mr){to.push(zr[Mr]),vo++}function Ma(Mr,cr,la){var Wi=Or[Mr];return delete Or[Mr],Or[cr]=Wi,to[Wi].geometry[0].pop(),to[Wi].geometry[0]=to[Wi].geometry[0].concat(la[0]),Wi}function jo(Mr,cr,la){var Wi=Ir[cr];return delete Ir[cr],Ir[Mr]=Wi,to[Wi].geometry[0].shift(),to[Wi].geometry[0]=la[0].concat(to[Wi].geometry[0]),Wi}function Ea(Mr,cr,la){var Wi=la?cr[0][cr[0].length-1]:cr[0][0];return Mr+":"+Wi.x+":"+Wi.y}for(var ao=0;ao<zr.length;ao++){var Ho=zr[ao],bi=Ho.geometry,pr=Ho.text?Ho.text.toString():null;if(pr){var ir=Ea(pr,bi),Ni=Ea(pr,bi,!0);if(ir in Or&&Ni in Ir&&Or[ir]!==Ir[Ni]){var Ha=jo(ir,Ni,bi),sa=Ma(ir,Ni,to[Ha].geometry);delete Ir[ir],delete Or[Ni],Or[Ea(pr,to[sa].geometry,!0)]=sa,to[Ha].geometry=null}else ir in Or?Ma(ir,Ni,bi):Ni in Ir?jo(ir,Ni,bi):(Mo(ao),Ir[ir]=vo-1,Or[Ni]=vo-1)}else Mo(ao)}return to.filter(function(Mr){return Mr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(zr,Ir){return zr.sortKey-Ir.sortKey})}},ur.prototype.update=function(n,r,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,r,this.layers,s),this.icon.programConfigurations.updatePaintArrays(n,r,this.layers,s))},ur.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},ur.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ur.prototype.upload=function(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ur.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ur.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ur.prototype.addToLineVertexArray=function(n,r){var s=this.lineVertexArray.length;if(n.segment!==void 0){for(var d=n.dist(r[n.segment+1]),v=n.dist(r[n.segment]),x={},A=n.segment+1;A<r.length;A++)x[A]={x:r[A].x,y:r[A].y,tileUnitDistanceFromAnchor:d},A<r.length-1&&(d+=r[A+1].dist(r[A]));for(var S=n.segment||0;S>=0;S--)x[S]={x:r[S].x,y:r[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=r[S-1].dist(r[S]));for(var D=0;D<r.length;D++){var B=x[D];this.lineVertexArray.emplaceBack(B.x,B.y,B.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}},ur.prototype.addSymbols=function(n,r,s,d,v,x,A,S,D,B,N,V){for(var Z=n.indexArray,J=n.layoutVertexArray,ct=n.segments.prepareSegment(4*r.length,J,Z,this.canOverlap?x.sortKey:void 0),pt=this.glyphOffsetArray.length,Mt=ct.vertexLength,bt=this.allowVerticalPlacement&&A===ms.vertical?Math.PI/2:0,Ut=x.text&&x.text.sections,$t=0;$t<r.length;$t++){var te=r[$t],ne=te.tl,fe=te.tr,Me=te.bl,Fe=te.br,_n=te.tex,Ze=te.pixelOffsetTL,Mn=te.pixelOffsetBR,Je=te.minFontScaleX,ri=te.minFontScaleY,On=te.glyphOffset,fn=te.isSDF,fi=te.sectionIndex,Xn=ct.vertexLength,Ei=On[1];Gd(J,S.x,S.y,ne.x,Ei+ne.y,_n.x,_n.y,s,fn,Ze.x,Ze.y,Je,ri),Gd(J,S.x,S.y,fe.x,Ei+fe.y,_n.x+_n.w,_n.y,s,fn,Mn.x,Ze.y,Je,ri),Gd(J,S.x,S.y,Me.x,Ei+Me.y,_n.x,_n.y+_n.h,s,fn,Ze.x,Mn.y,Je,ri),Gd(J,S.x,S.y,Fe.x,Ei+Fe.y,_n.x+_n.w,_n.y+_n.h,s,fn,Mn.x,Mn.y,Je,ri),vg(n.dynamicLayoutVertexArray,S,bt),Z.emplaceBack(Xn,Xn+1,Xn+2),Z.emplaceBack(Xn+1,Xn+2,Xn+3),ct.vertexLength+=4,ct.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(On[0]),$t!==r.length-1&&fi===r[$t+1].sectionIndex||n.programConfigurations.populatePaintArrays(J.length,x,x.index,{},V,Ut&&Ut[fi])}n.placedSymbolArray.emplaceBack(S.x,S.y,pt,this.glyphOffsetArray.length-pt,Mt,D,B,S.segment,s?s[0]:0,s?s[1]:0,d[0],d[1],A,0,!1,0,N)},ur.prototype._addCollisionDebugVertex=function(n,r,s,d,v,x){return r.emplaceBack(0,0),n.emplaceBack(s.x,s.y,d,v,Math.round(x.x),Math.round(x.y))},ur.prototype.addCollisionDebugVertices=function(n,r,s,d,v,x,A){var S=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),D=S.vertexLength,B=v.layoutVertexArray,N=v.collisionVertexArray,V=A.anchorX,Z=A.anchorY;this._addCollisionDebugVertex(B,N,x,V,Z,new T(n,r)),this._addCollisionDebugVertex(B,N,x,V,Z,new T(s,r)),this._addCollisionDebugVertex(B,N,x,V,Z,new T(s,d)),this._addCollisionDebugVertex(B,N,x,V,Z,new T(n,d)),S.vertexLength+=4;var J=v.indexArray;J.emplaceBack(D,D+1),J.emplaceBack(D+1,D+2),J.emplaceBack(D+2,D+3),J.emplaceBack(D+3,D),S.primitiveLength+=4},ur.prototype.addDebugCollisionBoxes=function(n,r,s,d){for(var v=n;v<r;v++){var x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,d?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,s)}},ur.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new zp(th,Hu.members,Eh),this.iconCollisionBox=new zp(th,Hu.members,Eh);for(var n=0;n<this.symbolInstances.length;n++){var r=this.symbolInstances.get(n);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}},ur.prototype._deserializeCollisionBoxesForSymbol=function(n,r,s,d,v,x,A,S,D){for(var B={},N=r;N<s;N++){var V=n.get(N);B.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},B.textFeatureIndex=V.featureIndex;break}for(var Z=d;Z<v;Z++){var J=n.get(Z);B.verticalTextBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},B.verticalTextFeatureIndex=J.featureIndex;break}for(var ct=x;ct<A;ct++){var pt=n.get(ct);B.iconBox={x1:pt.x1,y1:pt.y1,x2:pt.x2,y2:pt.y2,anchorPointX:pt.anchorPointX,anchorPointY:pt.anchorPointY},B.iconFeatureIndex=pt.featureIndex;break}for(var Mt=S;Mt<D;Mt++){var bt=n.get(Mt);B.verticalIconBox={x1:bt.x1,y1:bt.y1,x2:bt.x2,y2:bt.y2,anchorPointX:bt.anchorPointX,anchorPointY:bt.anchorPointY},B.verticalIconFeatureIndex=bt.featureIndex;break}return B},ur.prototype.deserializeCollisionBoxes=function(n){this.collisionArrays=[];for(var r=0;r<this.symbolInstances.length;r++){var s=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}},ur.prototype.hasTextData=function(){return this.text.segments.get().length>0},ur.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ur.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ur.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ur.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ur.prototype.addIndicesForPlacedSymbol=function(n,r){for(var s=n.placedSymbolArray.get(r),d=s.vertexStartIndex+4*s.numGlyphs,v=s.vertexStartIndex;v<d;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)},ur.prototype.getSortedSymbolIndexes=function(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var r=Math.sin(n),s=Math.cos(n),d=[],v=[],x=[],A=0;A<this.symbolInstances.length;++A){x.push(A);var S=this.symbolInstances.get(A);d.push(0|Math.round(r*S.anchorX+s*S.anchorY)),v.push(S.featureIndex)}return x.sort(function(D,B){return d[D]-d[B]||v[B]-v[D]}),x},ur.prototype.addToSortKeyRanges=function(n,r){var s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===r?s.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:n+1})},ur.prototype.sortFeatures=function(n){var r=this;if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var s=0,d=this.symbolInstanceIndexes;s<d.length;s+=1){var v=this.symbolInstances.get(d[s]);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach(function(x,A,S){x>=0&&S.indexOf(x)===A&&r.addIndicesForPlacedSymbol(r.text,x)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Xe("SymbolBucket",ur,{omit:["layers","collisionBoxArray","features","compareText"]}),ur.MAX_GLYPHS=65535,ur.addDynamicAttributes=vg;var y1=new Jo({"symbol-placement":new vn(tt.layout_symbol["symbol-placement"]),"symbol-spacing":new vn(tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new vn(tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new cn(tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new vn(tt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new vn(tt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new vn(tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new vn(tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new vn(tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new cn(tt.layout_symbol["icon-size"]),"icon-text-fit":new vn(tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vn(tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new cn(tt.layout_symbol["icon-image"]),"icon-rotate":new cn(tt.layout_symbol["icon-rotate"]),"icon-padding":new vn(tt.layout_symbol["icon-padding"]),"icon-keep-upright":new vn(tt.layout_symbol["icon-keep-upright"]),"icon-offset":new cn(tt.layout_symbol["icon-offset"]),"icon-anchor":new cn(tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new vn(tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new vn(tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new vn(tt.layout_symbol["text-rotation-alignment"]),"text-field":new cn(tt.layout_symbol["text-field"]),"text-font":new cn(tt.layout_symbol["text-font"]),"text-size":new cn(tt.layout_symbol["text-size"]),"text-max-width":new cn(tt.layout_symbol["text-max-width"]),"text-line-height":new vn(tt.layout_symbol["text-line-height"]),"text-letter-spacing":new cn(tt.layout_symbol["text-letter-spacing"]),"text-justify":new cn(tt.layout_symbol["text-justify"]),"text-radial-offset":new cn(tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new vn(tt.layout_symbol["text-variable-anchor"]),"text-anchor":new cn(tt.layout_symbol["text-anchor"]),"text-max-angle":new vn(tt.layout_symbol["text-max-angle"]),"text-writing-mode":new vn(tt.layout_symbol["text-writing-mode"]),"text-rotate":new cn(tt.layout_symbol["text-rotate"]),"text-padding":new vn(tt.layout_symbol["text-padding"]),"text-keep-upright":new vn(tt.layout_symbol["text-keep-upright"]),"text-transform":new cn(tt.layout_symbol["text-transform"]),"text-offset":new cn(tt.layout_symbol["text-offset"]),"text-allow-overlap":new vn(tt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new vn(tt.layout_symbol["text-ignore-placement"]),"text-optional":new vn(tt.layout_symbol["text-optional"])}),yg={paint:new Jo({"icon-opacity":new cn(tt.paint_symbol["icon-opacity"]),"icon-color":new cn(tt.paint_symbol["icon-color"]),"icon-halo-color":new cn(tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new cn(tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new cn(tt.paint_symbol["icon-halo-blur"]),"icon-translate":new vn(tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new vn(tt.paint_symbol["icon-translate-anchor"]),"text-opacity":new cn(tt.paint_symbol["text-opacity"]),"text-color":new cn(tt.paint_symbol["text-color"],{runtimeType:je,getOverride:function(n){return n.textColor},hasOverride:function(n){return!!n.textColor}}),"text-halo-color":new cn(tt.paint_symbol["text-halo-color"]),"text-halo-width":new cn(tt.paint_symbol["text-halo-width"]),"text-halo-blur":new cn(tt.paint_symbol["text-halo-blur"]),"text-translate":new vn(tt.paint_symbol["text-translate"]),"text-translate-anchor":new vn(tt.paint_symbol["text-translate-anchor"])}),layout:y1},ah=function(n){this.type=n.property.overrides?n.property.overrides.runtimeType:an,this.defaultValue=n};ah.prototype.evaluate=function(n){if(n.formattedSection){var r=this.defaultValue.property.overrides;if(r&&r.hasOverride(n.formattedSection))return r.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default},ah.prototype.eachChild=function(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)},ah.prototype.outputDefined=function(){return!1},ah.prototype.serialize=function(){return null},Xe("FormatSectionOverride",ah,{omit:["defaultValue"]});var _1=function(n){function r(s){n.call(this,s,yg)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.recalculate=function(s,d){if(n.prototype.recalculate.call(this,s,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var v=this.layout.get("text-writing-mode");if(v){for(var x=[],A=0,S=v;A<S.length;A+=1){var D=S[A];x.indexOf(D)<0&&x.push(D)}this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},r.prototype.getValueAndResolveTokens=function(s,d,v,x){var A=this.layout.get(s).evaluate(d,{},v,x),S=this._unevaluatedLayout._values[s];return S.isDataDriven()||Su(S.value)||!A?A:function(D,B){return B.replace(/{([^{}]+)}/g,function(N,V){return V in D?String(D[V]):""})}(d.properties,A)},r.prototype.createBucket=function(s){return new ur(s)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype._setPaintOverrides=function(){for(var s=0,d=yg.paint.overridableProperties;s<d.length;s+=1){var v=d[s];if(r.hasPaintOverride(this.layout,v)){var x,A=this.paint.get(v),S=new ah(A),D=new Il(S,A.property.specification);x=A.value.kind==="constant"||A.value.kind==="source"?new Es("source",D):new Tu("composite",D,A.value.zoomStops,A.value._interpolationType),this.paint._values[v]=new Do(A.property,x,A.parameters)}}},r.prototype._handleOverridablePaintPropertyUpdate=function(s,d,v){return!(!this.layout||d.isDataDriven()||v.isDataDriven())&&r.hasPaintOverride(this.layout,s)},r.hasPaintOverride=function(s,d){var v=s.get("text-field"),x=yg.paint.properties[d],A=!1,S=function(N){for(var V=0,Z=N;V<Z.length;V+=1)if(x.overrides&&x.overrides.hasOverride(Z[V]))return void(A=!0)};if(v.value.kind==="constant"&&v.value.value instanceof Pr)S(v.value.value.sections);else if(v.value.kind==="source"){var D=function(N){A||(N instanceof xo&&Lr(N.value)===Ui?S(N.value.sections):N instanceof Wa?S(N.sections):N.eachChild(D))},B=v.value;B._styleExpression&&D(B._styleExpression.expression)}return A},r}(Tl),x1={paint:new Jo({"background-color":new vn(tt.paint_background["background-color"]),"background-pattern":new Vo(tt.paint_background["background-pattern"]),"background-opacity":new vn(tt.paint_background["background-opacity"])})},b1=function(n){function r(s){n.call(this,s,x1)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r}(Tl),A1={paint:new Jo({"raster-opacity":new vn(tt.paint_raster["raster-opacity"]),"raster-hue-rotate":new vn(tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new vn(tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new vn(tt.paint_raster["raster-brightness-max"]),"raster-saturation":new vn(tt.paint_raster["raster-saturation"]),"raster-contrast":new vn(tt.paint_raster["raster-contrast"]),"raster-resampling":new vn(tt.paint_raster["raster-resampling"]),"raster-fade-duration":new vn(tt.paint_raster["raster-fade-duration"])})},w1=function(n){function r(s){n.call(this,s,A1)}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r}(Tl),C1=function(n){function r(s){n.call(this,s,{}),this.implementation=s}return n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r,r.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},r.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},r.prototype.recalculate=function(){},r.prototype.updateTransitions=function(){},r.prototype.hasTransition=function(){},r.prototype.serialize=function(){},r.prototype.onAdd=function(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},r.prototype.onRemove=function(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},r}(Tl),I1={circle:_d,heatmap:Km,hillshade:Qm,fill:Os,"fill-extrusion":kd,line:ry,symbol:_1,background:b1,raster:w1},wy=P.HTMLImageElement,Cy=P.HTMLCanvasElement,Iy=P.HTMLVideoElement,My=P.ImageData,qd=P.ImageBitmap,Fh=function(n,r,s,d){this.context=n,this.format=s,this.texture=n.gl.createTexture(),this.update(r,d)};Fh.prototype.update=function(n,r,s){var d=n.width,v=n.height,x=!(this.size&&this.size[0]===d&&this.size[1]===v||s),A=this.context,S=A.gl;if(this.useMipmap=!!(r&&r.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!r||r.premultiply!==!1)),x)this.size=[d,v],n instanceof wy||n instanceof Cy||n instanceof Iy||n instanceof My||qd&&n instanceof qd?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,n):S.texImage2D(S.TEXTURE_2D,0,this.format,d,v,0,this.format,S.UNSIGNED_BYTE,n.data);else{var D=s||{x:0,y:0},B=D.x,N=D.y;n instanceof wy||n instanceof Cy||n instanceof Iy||n instanceof My||qd&&n instanceof qd?S.texSubImage2D(S.TEXTURE_2D,0,B,N,S.RGBA,S.UNSIGNED_BYTE,n):S.texSubImage2D(S.TEXTURE_2D,0,B,N,d,v,S.RGBA,S.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},Fh.prototype.bind=function(n,r,s){var d=this.context.gl;d.bindTexture(d.TEXTURE_2D,this.texture),s!==d.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(s=d.LINEAR),n!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,n),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,s||n),this.filter=n),r!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,r),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,r),this.wrap=r)},Fh.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Fh.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var _g=function(n){var r=this;this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){r._triggered=!1,r._callback()})};_g.prototype.trigger=function(){var n=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){n._triggered=!1,n._callback()},0))},_g.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Df=function(n,r,s){this.target=n,this.parent=r,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},St(["receive","process"],this),this.invoker=new _g(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=_e()?n:P};function Ey(n,r,s){var d=2*Math.PI*6378137/256/Math.pow(2,s);return[n*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}Df.prototype.send=function(n,r,s,d,v){var x=this;v===void 0&&(v=!1);var A=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[A]=s);var S=ki(this.globalScope)?void 0:[];return this.target.postMessage({id:A,type:n,hasCallback:!!s,targetMapId:d,mustQueue:v,sourceMapId:this.mapId,data:Po(r,S)},S),{cancel:function(){s&&delete x.callbacks[A],x.target.postMessage({id:A,type:"<cancel>",targetMapId:d,sourceMapId:x.mapId})}}},Df.prototype.receive=function(n){var r=n.data,s=r.id;if(s&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){delete this.tasks[s];var d=this.cancelCallbacks[s];delete this.cancelCallbacks[s],d&&d()}else _e()||r.mustQueue?(this.tasks[s]=r,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,r)},Df.prototype.process=function(){if(this.taskQueue.length){var n=this.taskQueue.shift(),r=this.tasks[n];delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(n,r)}},Df.prototype.processTask=function(n,r){var s=this;if(r.type==="<response>"){var d=this.callbacks[n];delete this.callbacks[n],d&&(r.error?d(Lo(r.error)):d(null,Lo(r.data)))}else{var v=!1,x=ki(this.globalScope)?void 0:[],A=r.hasCallback?function(N,V){v=!0,delete s.cancelCallbacks[n],s.target.postMessage({id:n,type:"<response>",sourceMapId:s.mapId,error:N?Po(N):null,data:Po(V,x)},x)}:function(N){v=!0},S=null,D=Lo(r.data);if(this.parent[r.type])S=this.parent[r.type](r.sourceMapId,D,A);else if(this.parent.getWorkerSource){var B=r.type.split(".");S=this.parent.getWorkerSource(r.sourceMapId,B[0],D.source)[B[1]](D,A)}else A(new Error("Could not find function "+r.type));!v&&S&&S.cancel&&(this.cancelCallbacks[n]=S.cancel)}},Df.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Co=function(n,r){n&&(r?this.setSouthWest(n).setNorthEast(r):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))};Co.prototype.setNorthEast=function(n){return this._ne=n instanceof Dr?new Dr(n.lng,n.lat):Dr.convert(n),this},Co.prototype.setSouthWest=function(n){return this._sw=n instanceof Dr?new Dr(n.lng,n.lat):Dr.convert(n),this},Co.prototype.extend=function(n){var r,s,d=this._sw,v=this._ne;if(n instanceof Dr)r=n,s=n;else{if(!(n instanceof Co))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Co.convert(n)):this.extend(Dr.convert(n)):this;if(s=n._ne,!(r=n._sw)||!s)return this}return d||v?(d.lng=Math.min(r.lng,d.lng),d.lat=Math.min(r.lat,d.lat),v.lng=Math.max(s.lng,v.lng),v.lat=Math.max(s.lat,v.lat)):(this._sw=new Dr(r.lng,r.lat),this._ne=new Dr(s.lng,s.lat)),this},Co.prototype.getCenter=function(){return new Dr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Co.prototype.getSouthWest=function(){return this._sw},Co.prototype.getNorthEast=function(){return this._ne},Co.prototype.getNorthWest=function(){return new Dr(this.getWest(),this.getNorth())},Co.prototype.getSouthEast=function(){return new Dr(this.getEast(),this.getSouth())},Co.prototype.getWest=function(){return this._sw.lng},Co.prototype.getSouth=function(){return this._sw.lat},Co.prototype.getEast=function(){return this._ne.lng},Co.prototype.getNorth=function(){return this._ne.lat},Co.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Co.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Co.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Co.prototype.contains=function(n){var r=Dr.convert(n),s=r.lng,d=r.lat,v=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&v},Co.convert=function(n){return!n||n instanceof Co?n:new Co(n)};var Dr=function(n,r){if(isNaN(n)||isNaN(r))throw new Error("Invalid LngLat object: ("+n+", "+r+")");if(this.lng=+n,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Dr.prototype.wrap=function(){return new Dr(st(this.lng,-180,180),this.lat)},Dr.prototype.toArray=function(){return[this.lng,this.lat]},Dr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Dr.prototype.distanceTo=function(n){var r=Math.PI/180,s=this.lat*r,d=n.lat*r,v=Math.sin(s)*Math.sin(d)+Math.cos(s)*Math.cos(d)*Math.cos((n.lng-this.lng)*r);return 63710088e-1*Math.acos(Math.min(v,1))},Dr.prototype.toBounds=function(n){n===void 0&&(n=0);var r=360*n/40075017,s=r/Math.cos(Math.PI/180*this.lat);return new Co(new Dr(this.lng-s,this.lat-r),new Dr(this.lng+s,this.lat+r))},Dr.convert=function(n){if(n instanceof Dr)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Dr(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Dr(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Sy=2*Math.PI*63710088e-1;function Ty(n){return Sy*Math.cos(n*Math.PI/180)}function Wd(n){return(180+n)/360}function xg(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function ky(n,r){return n/Ty(r)}function bg(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}var Nh=function(n,r,s){s===void 0&&(s=0),this.x=+n,this.y=+r,this.z=+s};Nh.fromLngLat=function(n,r){r===void 0&&(r=0);var s=Dr.convert(n);return new Nh(Wd(s.lng),xg(s.lat),ky(r,s.lat))},Nh.prototype.toLngLat=function(){return new Dr(360*this.x-180,bg(this.y))},Nh.prototype.toAltitude=function(){return this.z*Ty(bg(this.y))},Nh.prototype.meterInMercatorCoordinateUnits=function(){return 1/Sy*(n=bg(this.y),1/Math.cos(n*Math.PI/180));var n};var Vh=function(n,r,s){this.z=n,this.x=r,this.y=s,this.key=Op(0,n,n,r,s)};Vh.prototype.equals=function(n){return this.z===n.z&&this.x===n.x&&this.y===n.y},Vh.prototype.url=function(n,r){var s,d,v,x,A,S=(d=this.y,v=this.z,x=Ey(256*(s=this.x),256*(d=Math.pow(2,v)-d-1),v),A=Ey(256*(s+1),256*(d+1),v),x[0]+","+x[1]+","+A[0]+","+A[1]),D=function(B,N,V){for(var Z,J="",ct=B;ct>0;ct--)J+=(N&(Z=1<<ct-1)?1:0)+(V&Z?2:0);return J}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",D).replace("{bbox-epsg-3857}",S)},Vh.prototype.getTilePoint=function(n){var r=Math.pow(2,this.z);return new T(8192*(n.x*r-this.x),8192*(n.y*r-this.y))},Vh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Py=function(n,r){this.wrap=n,this.canonical=r,this.key=Op(n,r.z,r.z,r.x,r.y)},Io=function(n,r,s,d,v){this.overscaledZ=n,this.wrap=r,this.canonical=new Vh(s,+d,+v),this.key=Op(r,n,s,d,v)};function Op(n,r,s,d,v){(n*=2)<0&&(n=-1*n-1);var x=1<<s;return(x*x*n+x*v+d).toString(36)+s.toString(36)+r.toString(36)}Io.prototype.equals=function(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)},Io.prototype.scaledTo=function(n){var r=this.canonical.z-n;return n>this.canonical.z?new Io(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Io(n,this.wrap,n,this.canonical.x>>r,this.canonical.y>>r)},Io.prototype.calculateScaledKey=function(n,r){var s=this.canonical.z-n;return n>this.canonical.z?Op(this.wrap*+r,n,this.canonical.z,this.canonical.x,this.canonical.y):Op(this.wrap*+r,n,n,this.canonical.x>>s,this.canonical.y>>s)},Io.prototype.isChildOf=function(n){if(n.wrap!==this.wrap)return!1;var r=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>r&&n.canonical.y===this.canonical.y>>r},Io.prototype.children=function(n){if(this.overscaledZ>=n)return[new Io(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var r=this.canonical.z+1,s=2*this.canonical.x,d=2*this.canonical.y;return[new Io(r,this.wrap,r,s,d),new Io(r,this.wrap,r,s+1,d),new Io(r,this.wrap,r,s,d+1),new Io(r,this.wrap,r,s+1,d+1)]},Io.prototype.isLessThan=function(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))},Io.prototype.wrapped=function(){return new Io(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Io.prototype.unwrapTo=function(n){return new Io(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)},Io.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Io.prototype.toUnwrapped=function(){return new Py(this.wrap,this.canonical)},Io.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Io.prototype.getTilePoint=function(n){return this.canonical.getTilePoint(new Nh(n.x-this.wrap,n.y))},Xe("CanonicalTileID",Vh),Xe("OverscaledTileID",Io,{omit:["posMatrix"]});var Ic=function(n,r,s){if(this.uid=n,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(s&&s!=="mapbox"&&s!=="terrarium")return Bt('"'+s+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=r.height;var d=this.dim=r.height-2;this.data=new Uint32Array(r.data.buffer),this.encoding=s||"mapbox";for(var v=0;v<d;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(d,v)]=this.data[this._idx(d-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,d)]=this.data[this._idx(v,d-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(d,-1)]=this.data[this._idx(d-1,0)],this.data[this._idx(-1,d)]=this.data[this._idx(0,d-1)],this.data[this._idx(d,d)]=this.data[this._idx(d-1,d-1)]};Ic.prototype.get=function(n,r){var s=new Uint8Array(this.data.buffer),d=4*this._idx(n,r);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(s[d],s[d+1],s[d+2])},Ic.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ic.prototype._idx=function(n,r){if(n<-1||n>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(n+1)},Ic.prototype._unpackMapbox=function(n,r,s){return(256*n*256+256*r+s)/10-1e4},Ic.prototype._unpackTerrarium=function(n,r,s){return 256*n+r+s/256-32768},Ic.prototype.getPixels=function(){return new Xa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ic.prototype.backfillBorder=function(n,r,s){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");var d=r*this.dim,v=r*this.dim+this.dim,x=s*this.dim,A=s*this.dim+this.dim;switch(r){case-1:d=v-1;break;case 1:v=d+1}switch(s){case-1:x=A-1;break;case 1:A=x+1}for(var S=-r*this.dim,D=-s*this.dim,B=x;B<A;B++)for(var N=d;N<v;N++)this.data[this._idx(N,B)]=n.data[this._idx(N+S,B+D)]},Xe("DEMData",Ic);var Bp=function(n){this._stringToNumber={},this._numberToString=[];for(var r=0;r<n.length;r++){var s=n[r];this._stringToNumber[s]=r,this._numberToString[r]=s}};Bp.prototype.encode=function(n){return this._stringToNumber[n]},Bp.prototype.decode=function(n){return this._numberToString[n]};var Zd=function(n,r,s,d,v){this.type="Feature",this._vectorTileFeature=n,n._z=r,n._x=s,n._y=d,this.properties=n.properties,this.id=v},Rf={geometry:{configurable:!0}};Rf.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Rf.geometry.set=function(n){this._geometry=n},Zd.prototype.toJSON=function(){var n={geometry:this.geometry};for(var r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(n[r]=this[r]);return n},Object.defineProperties(Zd.prototype,Rf);var zf=function(){this.state={},this.stateChanges={},this.deletedStates={}};zf.prototype.updateState=function(n,r,s){var d=String(r);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][d]=this.stateChanges[n][d]||{},K(this.stateChanges[n][d],s),this.deletedStates[n]===null)for(var v in this.deletedStates[n]={},this.state[n])v!==d&&(this.deletedStates[n][v]=null);else if(this.deletedStates[n]&&this.deletedStates[n][d]===null)for(var x in this.deletedStates[n][d]={},this.state[n][d])s[x]||(this.deletedStates[n][d][x]=null);else for(var A in s)this.deletedStates[n]&&this.deletedStates[n][d]&&this.deletedStates[n][d][A]===null&&delete this.deletedStates[n][d][A]},zf.prototype.removeFeatureState=function(n,r,s){if(this.deletedStates[n]!==null){var d=String(r);if(this.deletedStates[n]=this.deletedStates[n]||{},s&&r!==void 0)this.deletedStates[n][d]!==null&&(this.deletedStates[n][d]=this.deletedStates[n][d]||{},this.deletedStates[n][d][s]=null);else if(r!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][d])for(s in this.deletedStates[n][d]={},this.stateChanges[n][d])this.deletedStates[n][d][s]=null;else this.deletedStates[n][d]=null;else this.deletedStates[n]=null}},zf.prototype.getState=function(n,r){var s=String(r),d=K({},(this.state[n]||{})[s],(this.stateChanges[n]||{})[s]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){var v=this.deletedStates[n][r];if(v===null)return{};for(var x in v)delete d[x]}return d},zf.prototype.initializeTileState=function(n,r){n.setFeatureState(this.state,r)},zf.prototype.coalesceChanges=function(n,r){var s={};for(var d in this.stateChanges){this.state[d]=this.state[d]||{};var v={};for(var x in this.stateChanges[d])this.state[d][x]||(this.state[d][x]={}),K(this.state[d][x],this.stateChanges[d][x]),v[x]=this.state[d][x];s[d]=v}for(var A in this.deletedStates){this.state[A]=this.state[A]||{};var S={};if(this.deletedStates[A]===null)for(var D in this.state[A])S[D]={},this.state[A][D]={};else for(var B in this.deletedStates[A]){if(this.deletedStates[A][B]===null)this.state[A][B]={};else for(var N=0,V=Object.keys(this.deletedStates[A][B]);N<V.length;N+=1)delete this.state[A][B][V[N]];S[B]=this.state[A][B]}s[A]=s[A]||{},K(s[A],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(s).length!==0)for(var Z in n)n[Z].setFeatureState(s,r)};var Mc=function(n,r){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Za(8192,16,0),this.grid3D=new Za(8192,16,0),this.featureIndexArray=new j,this.promoteId=r};function Ly(n,r,s,d,v){return Dt(n,function(x,A){var S=r instanceof vc?r.get(A):null;return S&&S.evaluate?S.evaluate(s,d,v):S})}function Dy(n){for(var r=1/0,s=1/0,d=-1/0,v=-1/0,x=0,A=n;x<A.length;x+=1){var S=A[x];r=Math.min(r,S.x),s=Math.min(s,S.y),d=Math.max(d,S.x),v=Math.max(v,S.y)}return{minX:r,minY:s,maxX:d,maxY:v}}function M1(n,r){return r-n}Mc.prototype.insert=function(n,r,s,d,v,x){var A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,d,v);for(var S=x?this.grid3D:this.grid,D=0;D<r.length;D++){for(var B=r[D],N=[1/0,1/0,-1/0,-1/0],V=0;V<B.length;V++){var Z=B[V];N[0]=Math.min(N[0],Z.x),N[1]=Math.min(N[1],Z.y),N[2]=Math.max(N[2],Z.x),N[3]=Math.max(N[3],Z.y)}N[0]<8192&&N[1]<8192&&N[2]>=0&&N[3]>=0&&S.insert(A,N[0],N[1],N[2],N[3])}},Mc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new su.VectorTile(new Yn(this.rawTileData)).layers,this.sourceLayerCoder=new Bp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Mc.prototype.query=function(n,r,s,d){var v=this;this.loadVTLayers();for(var x=n.params||{},A=8192/n.tileSize/n.scale,S=Ml(x.filter),D=n.queryGeometry,B=n.queryPadding*A,N=Dy(D),V=this.grid.query(N.minX-B,N.minY-B,N.maxX+B,N.maxY+B),Z=Dy(n.cameraQueryGeometry),J=this.grid3D.query(Z.minX-B,Z.minY-B,Z.maxX+B,Z.maxY+B,function(te,ne,fe,Me){return function(Fe,_n,Ze,Mn,Je){for(var ri=0,On=Fe;ri<On.length;ri+=1){var fn=On[ri];if(_n<=fn.x&&Ze<=fn.y&&Mn>=fn.x&&Je>=fn.y)return!0}var fi=[new T(_n,Ze),new T(_n,Je),new T(Mn,Je),new T(Mn,Ze)];if(Fe.length>2){for(var Xn=0,Ei=fi;Xn<Ei.length;Xn+=1)if(Pl(Fe,Ei[Xn]))return!0}for(var Sn=0;Sn<Fe.length-1;Sn++)if(nu(Fe[Sn],Fe[Sn+1],fi))return!0;return!1}(n.cameraQueryGeometry,te-B,ne-B,fe+B,Me+B)}),ct=0,pt=J;ct<pt.length;ct+=1)V.push(pt[ct]);V.sort(M1);for(var Mt,bt={},Ut=function(te){var ne=V[te];if(ne!==Mt){Mt=ne;var fe=v.featureIndexArray.get(ne),Me=null;v.loadMatchingFeature(bt,fe.bucketIndex,fe.sourceLayerIndex,fe.featureIndex,S,x.layers,x.availableImages,r,s,d,function(Fe,_n,Ze){return Me||(Me=Cr(Fe)),_n.queryIntersectsFeature(D,Fe,Ze,Me,v.z,n.transform,A,n.pixelPosMatrix)})}},$t=0;$t<V.length;$t++)Ut($t);return bt},Mc.prototype.loadMatchingFeature=function(n,r,s,d,v,x,A,S,D,B,N){var V=this.bucketLayerIDs[r];if(!x||function(Fe,_n){for(var Ze=0;Ze<Fe.length;Ze++)if(_n.indexOf(Fe[Ze])>=0)return!0;return!1}(x,V)){var Z=this.sourceLayerCoder.decode(s),J=this.vtLayers[Z].feature(d);if(v.needGeometry){var ct=yr(J,!0);if(!v.filter(new zn(this.tileID.overscaledZ),ct,this.tileID.canonical))return}else if(!v.filter(new zn(this.tileID.overscaledZ),J))return;for(var pt=this.getId(J,Z),Mt=0;Mt<V.length;Mt++){var bt=V[Mt];if(!(x&&x.indexOf(bt)<0)){var Ut=S[bt];if(Ut){var $t={};pt!==void 0&&B&&($t=B.getState(Ut.sourceLayer||"_geojsonTileLayer",pt));var te=K({},D[bt]);te.paint=Ly(te.paint,Ut.paint,J,$t,A),te.layout=Ly(te.layout,Ut.layout,J,$t,A);var ne=!N||N(J,Ut,$t);if(ne){var fe=new Zd(J,this.z,this.x,this.y,pt);fe.layer=te;var Me=n[bt];Me===void 0&&(Me=n[bt]=[]),Me.push({featureIndex:d,feature:fe,intersectionZ:ne})}}}}}},Mc.prototype.lookupSymbolFeatures=function(n,r,s,d,v,x,A,S){var D={};this.loadVTLayers();for(var B=Ml(v),N=0,V=n;N<V.length;N+=1)this.loadMatchingFeature(D,s,d,V[N],B,x,A,S,r);return D},Mc.prototype.hasLayer=function(n){for(var r=0,s=this.bucketLayerIDs;r<s.length;r+=1)for(var d=0,v=s[r];d<v.length;d+=1)if(n===v[d])return!0;return!1},Mc.prototype.getId=function(n,r){var s=n.id;return this.promoteId&&typeof(s=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]])=="boolean"&&(s=Number(s)),s},Xe("FeatureIndex",Mc,{omit:["rawTileData","sourceLayerCoder"]});var Uo=function(n,r){this.tileID=n,this.uid=xt(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Uo.prototype.registerFadeDuration=function(n){var r=n+this.timeAdded;r<Qe.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)},Uo.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Uo.prototype.loadVectorData=function(n,r,s){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){for(var d in n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(B,N){var V={};if(!N)return V;for(var Z=function(){var pt=ct[J],Mt=pt.layerIds.map(function($t){return N.getLayer($t)}).filter(Boolean);if(Mt.length!==0){pt.layers=Mt,pt.stateDependentLayerIds&&(pt.stateDependentLayers=pt.stateDependentLayerIds.map(function($t){return Mt.filter(function(te){return te.id===$t})[0]}));for(var bt=0,Ut=Mt;bt<Ut.length;bt+=1)V[Ut[bt].id]=pt}},J=0,ct=B;J<ct.length;J+=1)Z();return V}(n.buckets,r.style),this.hasSymbolBuckets=!1,this.buckets){var v=this.buckets[d];if(v instanceof ur){if(this.hasSymbolBuckets=!0,!s)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var x in this.buckets){var A=this.buckets[x];if(A instanceof ur&&A.hasRTLText){this.hasRTLText=!0,hs.isLoading()||hs.isLoaded()||xf()!=="deferred"||nl();break}}for(var S in this.queryPadding=0,this.buckets){var D=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(S).queryRadius(D))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new h},Uo.prototype.unloadVectorData=function(){for(var n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Uo.prototype.getBucket=function(n){return this.buckets[n.id]},Uo.prototype.upload=function(n){for(var r in this.buckets){var s=this.buckets[r];s.uploadPending()&&s.upload(n)}var d=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Fh(n,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Fh(n,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)},Uo.prototype.prepare=function(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)},Uo.prototype.queryRenderedFeatures=function(n,r,s,d,v,x,A,S,D,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:v,scale:x,tileSize:this.tileSize,pixelPosMatrix:B,transform:S,params:A,queryPadding:this.queryPadding*D},n,r,s):{}},Uo.prototype.querySourceFeatures=function(n,r){var s=this.latestFeatureIndex;if(s&&s.rawTileData){var d=s.loadVTLayers(),v=r?r.sourceLayer:"",x=d._geojsonTileLayer||d[v];if(x)for(var A=Ml(r&&r.filter),S=this.tileID.canonical,D=S.z,B=S.x,N=S.y,V={z:D,x:B,y:N},Z=0;Z<x.length;Z++){var J=x.feature(Z);if(A.needGeometry){var ct=yr(J,!0);if(!A.filter(new zn(this.tileID.overscaledZ),ct,this.tileID.canonical))continue}else if(!A.filter(new zn(this.tileID.overscaledZ),J))continue;var pt=s.getId(J,v),Mt=new Zd(J,D,B,N,pt);Mt.tile=V,n.push(Mt)}}},Uo.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Uo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Uo.prototype.setExpiryData=function(n){var r=this.expirationTime;if(n.cacheControl){var s=He(n.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){var d=Date.now(),v=!1;if(this.expirationTime>d)v=!1;else if(r)if(this.expirationTime<r)v=!0;else{var x=this.expirationTime-r;x?this.expirationTime=d+Math.max(x,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Uo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Uo.prototype.setFeatureState=function(n,r){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(n).length!==0){var s=this.latestFeatureIndex.loadVTLayers();for(var d in this.buckets)if(r.style.hasLayer(d)){var v=this.buckets[d],x=v.layers[0].sourceLayer||"_geojsonTileLayer",A=s[x],S=n[x];if(A&&S&&Object.keys(S).length!==0){v.update(S,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});var D=r&&r.style&&r.style.getLayer(d);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(v)))}}}},Uo.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Uo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Qe.now()},Uo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Uo.prototype.setHoldDuration=function(n){this.symbolFadeHoldUntil=Qe.now()+n},Uo.prototype.setDependencies=function(n,r){for(var s={},d=0,v=r;d<v.length;d+=1)s[v[d]]=!0;this.dependencies[n]=s},Uo.prototype.hasDependency=function(n,r){for(var s=0,d=n;s<d.length;s+=1){var v=this.dependencies[d[s]];if(v){for(var x=0,A=r;x<A.length;x+=1)if(v[A[x]])return!0}}return!1};var sh=P.performance,Ry=function(n){this._marks={start:[n.url,"start"].join("#"),end:[n.url,"end"].join("#"),measure:n.url.toString()},sh.mark(this._marks.start)};Ry.prototype.finish=function(){sh.mark(this._marks.end);var n=sh.getEntriesByName(this._marks.measure);return n.length===0&&(sh.measure(this._marks.measure,this._marks.start,this._marks.end),n=sh.getEntriesByName(this._marks.measure),sh.clearMarks(this._marks.start),sh.clearMarks(this._marks.end),sh.clearMeasures(this._marks.measure)),n},o.Actor=Df,o.AlphaImage=rh,o.CanonicalTileID=Vh,o.CollisionBoxArray=h,o.Color=ai,o.DEMData=Ic,o.DataConstantProperty=vn,o.DictionaryCoder=Bp,o.EXTENT=8192,o.ErrorEvent=Tt,o.EvaluationParameters=zn,o.Event=dt,o.Evented=Rt,o.FeatureIndex=Mc,o.FillBucket=au,o.FillExtrusionBucket=zl,o.ImageAtlas=kf,o.ImagePosition=Od,o.LineBucket=ja,o.LngLat=Dr,o.LngLatBounds=Co,o.MercatorCoordinate=Nh,o.ONE_EM=24,o.OverscaledTileID=Io,o.Point=T,o.Point$1=T,o.Properties=Jo,o.Protobuf=Yn,o.RGBAImage=Xa,o.RequestManager=Jt,o.RequestPerformance=Ry,o.ResourceType=qs,o.SegmentVector=it,o.SourceFeatureState=zf,o.StructArrayLayout1ui2=Ip,o.StructArrayLayout2f1f2i16=yc,o.StructArrayLayout2i4=Ou,o.StructArrayLayout3ui6=Bu,o.StructArrayLayout4i8=rt,o.SymbolBucket=ur,o.Texture=Fh,o.Tile=Uo,o.Transitionable=Qo,o.Uniform1f=Ce,o.Uniform1i=ve,o.Uniform2f=Pe,o.Uniform3f=We,o.Uniform4f=hn,o.UniformColor=Tn,o.UniformMatrix4f=Oi,o.UnwrappedTileID=Py,o.ValidationError=yt,o.WritingMode=ms,o.ZoomHistory=tu,o.add=function(n,r,s){return n[0]=r[0]+s[0],n[1]=r[1]+s[1],n[2]=r[2]+s[2],n},o.addDynamicAttributes=vg,o.asyncAll=function(n,r,s){if(!n.length)return s(null,[]);var d=n.length,v=new Array(n.length),x=null;n.forEach(function(A,S){r(A,function(D,B){D&&(x=D),v[S]=B,--d==0&&s(x,v)})})},o.bezier=G,o.bindAll=St,o.browser=Qe,o.cacheEntryPossiblyAdded=function(n){++Ar>Yo&&(n.getActor().send("enforceCacheSizeLimit",Gr),Ar=0)},o.clamp=X,o.clearTileCache=function(n){var r=P.caches.delete("mapbox-tiles");n&&r.catch(n).then(function(){return n()})},o.clipLine=gy,o.clone=function(n){var r=new Yi(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r},o.clone$1=jt,o.clone$2=function(n){var r=new Yi(3);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r},o.collisionCircleLayout=sg,o.config=me,o.create=function(){var n=new Yi(16);return Yi!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},o.create$1=function(){var n=new Yi(9);return Yi!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n},o.create$2=function(){var n=new Yi(4);return Yi!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n},o.createCommonjsModule=y,o.createExpression=Ql,o.createLayout=po,o.createStyleLayer=function(n){return n.type==="custom"?new C1(n):new I1[n.type](n)},o.cross=function(n,r,s){var d=r[0],v=r[1],x=r[2],A=s[0],S=s[1],D=s[2];return n[0]=v*D-x*S,n[1]=x*A-d*D,n[2]=d*S-v*A,n},o.deepEqual=function n(r,s){if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(var d=0;d<r.length;d++)if(!n(r[d],s[d]))return!1;return!0}if(typeof r=="object"&&r!==null&&s!==null){if(typeof s!="object"||Object.keys(r).length!==Object.keys(s).length)return!1;for(var v in r)if(!n(r[v],s[v]))return!1;return!0}return r===s},o.dot=function(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]},o.dot$1=function(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]+n[3]*r[3]},o.ease=H,o.emitValidationErrors=Ln,o.endsWith=Gt,o.enforceCacheSizeLimit=function(n){va(),Cn&&Cn.then(function(r){r.keys().then(function(s){for(var d=0;d<s.length-n;d++)r.delete(s[d])})})},o.evaluateSizeForFeature=lu,o.evaluateSizeForZoom=oh,o.evaluateVariableOffset=xy,o.evented=bp,o.extend=K,o.featureFilter=Ml,o.filterObject=Qt,o.fromRotation=function(n,r){var s=Math.sin(r),d=Math.cos(r);return n[0]=d,n[1]=s,n[2]=0,n[3]=-s,n[4]=d,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},o.getAnchorAlignment=Dp,o.getAnchorJustification=gg,o.getArrayBuffer=bu,o.getImage=W,o.getJSON=function(n,r){return Zs(K(n,{type:"json"}),r)},o.getRTLTextPluginStatus=xf,o.getReferrer=gl,o.getVideo=function(n,r){var s,d,v=P.document.createElement("video");v.muted=!0,v.onloadstart=function(){r(null,v)};for(var x=0;x<n.length;x++){var A=P.document.createElement("source");s=n[x],d=void 0,(d=P.document.createElement("a")).href=s,(d.protocol!==P.document.location.protocol||d.host!==P.document.location.host)&&(v.crossOrigin="Anonymous"),A.src=n[x],v.appendChild(A)}return{cancel:function(){}}},o.identity=ps,o.invert=function(n,r){var s=r[0],d=r[1],v=r[2],x=r[3],A=r[4],S=r[5],D=r[6],B=r[7],N=r[8],V=r[9],Z=r[10],J=r[11],ct=r[12],pt=r[13],Mt=r[14],bt=r[15],Ut=s*S-d*A,$t=s*D-v*A,te=s*B-x*A,ne=d*D-v*S,fe=d*B-x*S,Me=v*B-x*D,Fe=N*pt-V*ct,_n=N*Mt-Z*ct,Ze=N*bt-J*ct,Mn=V*Mt-Z*pt,Je=V*bt-J*pt,ri=Z*bt-J*Mt,On=Ut*ri-$t*Je+te*Mn+ne*Ze-fe*_n+Me*Fe;return On?(n[0]=(S*ri-D*Je+B*Mn)*(On=1/On),n[1]=(v*Je-d*ri-x*Mn)*On,n[2]=(pt*Me-Mt*fe+bt*ne)*On,n[3]=(Z*fe-V*Me-J*ne)*On,n[4]=(D*Ze-A*ri-B*_n)*On,n[5]=(s*ri-v*Ze+x*_n)*On,n[6]=(Mt*te-ct*Me-bt*$t)*On,n[7]=(N*Me-Z*te+J*$t)*On,n[8]=(A*Je-S*Ze+B*Fe)*On,n[9]=(d*Ze-s*Je-x*Fe)*On,n[10]=(ct*fe-pt*te+bt*Ut)*On,n[11]=(V*te-N*fe-J*Ut)*On,n[12]=(S*_n-A*Mn-D*Fe)*On,n[13]=(s*Mn-d*_n+v*Fe)*On,n[14]=(pt*$t-ct*ne-Mt*Ut)*On,n[15]=(N*ne-V*$t+Z*Ut)*On,n):null},o.isChar=Re,o.isMapboxURL=le,o.keysDifference=function(n,r){var s=[];for(var d in n)d in r||s.push(d);return s},o.makeRequest=Zs,o.mapObject=Dt,o.mercatorXfromLng=Wd,o.mercatorYfromLat=xg,o.mercatorZfromAltitude=ky,o.mul=Xm,o.multiply=Ca,o.mvt=su,o.nextPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},o.normalize=function(n,r){var s=r[0],d=r[1],v=r[2],x=s*s+d*d+v*v;return x>0&&(x=1/Math.sqrt(x)),n[0]=r[0]*x,n[1]=r[1]*x,n[2]=r[2]*x,n},o.number=Zr,o.offscreenCanvasSupported=So,o.ortho=function(n,r,s,d,v,x,A){var S=1/(r-s),D=1/(d-v),B=1/(x-A);return n[0]=-2*S,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*D,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*B,n[11]=0,n[12]=(r+s)*S,n[13]=(v+d)*D,n[14]=(A+x)*B,n[15]=1,n},o.parseGlyphPBF=function(n){return new Yn(n).readFields(ug,[])},o.pbf=Yn,o.performSymbolLayout=function(n,r,s,d,v,x,A){n.createArrays(),n.tilePixelRatio=8192/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;var S=n.layers[0].layout,D=n.layers[0]._unevaluatedLayout._values,B={};if(n.textSizeData.kind==="composite"){var N=n.textSizeData,V=N.maxZoom;B.compositeTextSizes=[D["text-size"].possiblyEvaluate(new zn(N.minZoom),A),D["text-size"].possiblyEvaluate(new zn(V),A)]}if(n.iconSizeData.kind==="composite"){var Z=n.iconSizeData,J=Z.maxZoom;B.compositeIconSizes=[D["icon-size"].possiblyEvaluate(new zn(Z.minZoom),A),D["icon-size"].possiblyEvaluate(new zn(J),A)]}B.layoutTextSize=D["text-size"].possiblyEvaluate(new zn(n.zoom+1),A),B.layoutIconSize=D["icon-size"].possiblyEvaluate(new zn(n.zoom+1),A),B.textMaxSize=D["text-size"].possiblyEvaluate(new zn(18));for(var ct=24*S.get("text-line-height"),pt=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point",Mt=S.get("text-keep-upright"),bt=S.get("text-size"),Ut=function(){var ne=te[$t],fe=S.get("text-font").evaluate(ne,{},A).join(","),Me=bt.evaluate(ne,{},A),Fe=B.layoutTextSize.evaluate(ne,{},A),_n=B.layoutIconSize.evaluate(ne,{},A),Ze={horizontal:{},vertical:void 0},Mn=ne.text,Je=[0,0];if(Mn){var ri=Mn.toString(),On=24*S.get("text-letter-spacing").evaluate(ne,{},A),fn=function(bi){for(var pr=0,ir=bi;pr<ir.length;pr+=1)if(Ni=ir[pr].charCodeAt(0),Re.Arabic(Ni)||Re["Arabic Supplement"](Ni)||Re["Arabic Extended-A"](Ni)||Re["Arabic Presentation Forms-A"](Ni)||Re["Arabic Presentation Forms-B"](Ni))return!1;var Ni;return!0}(ri)?On:0,fi=S.get("text-anchor").evaluate(ne,{},A),Xn=S.get("text-variable-anchor");if(!Xn){var Ei=S.get("text-radial-offset").evaluate(ne,{},A);Je=Ei?xy(fi,[24*Ei,Hd]):S.get("text-offset").evaluate(ne,{},A).map(function(bi){return 24*bi})}var Sn=pt?"center":S.get("text-justify").evaluate(ne,{},A),qi=S.get("symbol-placement"),Rr=qi==="point"?24*S.get("text-max-width").evaluate(ne,{},A):0,zr=function(){n.allowVerticalPlacement&&el(ri)&&(Ze.vertical=Bd(Mn,r,s,v,fe,Rr,ct,fi,"left",fn,Je,ms.vertical,!0,qi,Fe,Me))};if(!pt&&Xn){for(var Ir=Sn==="auto"?Xn.map(function(bi){return gg(bi)}):[Sn],Or=!1,to=0;to<Ir.length;to++){var vo=Ir[to];if(!Ze.horizontal[vo])if(Or)Ze.horizontal[vo]=Ze.horizontal[0];else{var Mo=Bd(Mn,r,s,v,fe,Rr,ct,"center",vo,fn,Je,ms.horizontal,!1,qi,Fe,Me);Mo&&(Ze.horizontal[vo]=Mo,Or=Mo.positionedLines.length===1)}}zr()}else{Sn==="auto"&&(Sn=gg(fi));var Ma=Bd(Mn,r,s,v,fe,Rr,ct,fi,Sn,fn,Je,ms.horizontal,!1,qi,Fe,Me);Ma&&(Ze.horizontal[Sn]=Ma),zr(),el(ri)&&pt&&Mt&&(Ze.vertical=Bd(Mn,r,s,v,fe,Rr,ct,fi,Sn,fn,Je,ms.vertical,!1,qi,Fe,Me))}}var jo=void 0,Ea=!1;if(ne.icon&&ne.icon.name){var ao=d[ne.icon.name];ao&&(jo=function(bi,pr,ir){var Ni=Dp(ir),Ha=pr[0]-bi.displaySize[0]*Ni.horizontalAlign,sa=pr[1]-bi.displaySize[1]*Ni.verticalAlign;return{image:bi,top:sa,bottom:sa+bi.displaySize[1],left:Ha,right:Ha+bi.displaySize[0]}}(v[ne.icon.name],S.get("icon-offset").evaluate(ne,{},A),S.get("icon-anchor").evaluate(ne,{},A)),Ea=ao.sdf,n.sdfIcons===void 0?n.sdfIcons=ao.sdf:n.sdfIcons!==ao.sdf&&Bt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ao.pixelRatio!==n.pixelRatio||S.get("icon-rotate").constantOr(1)!==0)&&(n.iconsNeedLinear=!0))}var Ho=Ay(Ze.horizontal)||Ze.vertical;n.iconsInText=!!Ho&&Ho.iconsInText,(Ho||jo)&&function(bi,pr,ir,Ni,Ha,sa,Mr,cr,la,Wi,ts){var Wn=sa.textMaxSize.evaluate(pr,{});Wn===void 0&&(Wn=Mr);var Gu,Xi=bi.layers[0].layout,Er=Xi.get("icon-offset").evaluate(pr,{},ts),Bl=Ay(ir.horizontal),sl=Mr/24,Uh=bi.tilePixelRatio*sl,Of=bi.tilePixelRatio*Wn/24,Ec=bi.tilePixelRatio*cr,Bf=bi.tilePixelRatio*Xi.get("symbol-spacing"),$d=Xi.get("text-padding")*bi.tilePixelRatio,lh=Xi.get("icon-padding")*bi.tilePixelRatio,Fp=Xi.get("text-max-angle")/180*Math.PI,Fl=Xi.get("text-rotation-alignment")==="map"&&Xi.get("symbol-placement")!=="point",Np=Xi.get("icon-rotation-alignment")==="map"&&Xi.get("symbol-placement")!=="point",Nl=Xi.get("symbol-placement"),Xr=Bf/2,Kr=Xi.get("icon-text-fit");Ni&&Kr!=="none"&&(bi.allowVerticalPlacement&&ir.vertical&&(Gu=dg(Ni,ir.vertical,Kr,Xi.get("icon-text-fit-padding"),Er,sl)),Bl&&(Ni=dg(Ni,Bl,Kr,Xi.get("icon-text-fit-padding"),Er,sl)));var Sc=function(Oy,es){es.x<0||es.x>=8192||es.y<0||es.y>=8192||function(eo,uu,Sr,uh,tm,Hp,em,Zu,nm,Gp,im,rm,wg,By,qp,Fy,Ny,Vy,Uy,om,Fs,Uf,jy,$u,E1){var ua,ta,jf,Hf,Gf,Wh=eo.addToLineVertexArray(uu,Sr),Hy=0,Gy=0,qy=0,Cg=0,Ig=-1,Mg=-1,kc={},Eg=ht(""),am=0,Sg=0;if(Zu._unevaluatedLayout.getValue("text-radial-offset")===void 0?(am=(ua=Zu.layout.get("text-offset").evaluate(Fs,{},$u).map(function(Zp){return 24*Zp}))[0],Sg=ua[1]):(am=24*Zu.layout.get("text-radial-offset").evaluate(Fs,{},$u),Sg=Hd),eo.allowVerticalPlacement&&uh.vertical){var Wy=Zu.layout.get("text-rotate").evaluate(Fs,{},$u)+90;Hf=new Rp(nm,uu,Gp,im,rm,uh.vertical,wg,By,qp,Wy),em&&(Gf=new Rp(nm,uu,Gp,im,rm,em,Ny,Vy,qp,Wy))}if(tm){var Tg=Zu.layout.get("icon-rotate").evaluate(Fs,{}),Zy=Zu.layout.get("icon-text-fit")!=="none",Zh=vy(tm,Tg,jy,Zy),kg=em?vy(em,Tg,jy,Zy):void 0;jf=new Rp(nm,uu,Gp,im,rm,tm,Ny,Vy,!1,Tg),Hy=4*Zh.length;var $y=eo.iconSizeData,Wp=null;$y.kind==="source"?(Wp=[128*Zu.layout.get("icon-size").evaluate(Fs,{})])[0]>32640&&Bt(eo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):$y.kind==="composite"&&((Wp=[128*Uf.compositeIconSizes[0].evaluate(Fs,{},$u),128*Uf.compositeIconSizes[1].evaluate(Fs,{},$u)])[0]>32640||Wp[1]>32640)&&Bt(eo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),eo.addSymbols(eo.icon,Zh,Wp,om,Uy,Fs,!1,uu,Wh.lineStartIndex,Wh.lineLength,-1,$u),Ig=eo.icon.placedSymbolArray.length-1,kg&&(Gy=4*kg.length,eo.addSymbols(eo.icon,kg,Wp,om,Uy,Fs,ms.vertical,uu,Wh.lineStartIndex,Wh.lineLength,-1,$u),Mg=eo.icon.placedSymbolArray.length-1)}for(var Yy in uh.horizontal){var sm=uh.horizontal[Yy];if(!ta){Eg=ht(sm.text);var Xy=Zu.layout.get("text-rotate").evaluate(Fs,{},$u);ta=new Rp(nm,uu,Gp,im,rm,sm,wg,By,qp,Xy)}var Pg=sm.positionedLines.length===1;if(qy+=by(eo,uu,sm,Hp,Zu,qp,Fs,Fy,Wh,uh.vertical?ms.horizontal:ms.horizontalOnly,Pg?Object.keys(uh.horizontal):[Yy],kc,Ig,Uf,$u),Pg)break}uh.vertical&&(Cg+=by(eo,uu,uh.vertical,Hp,Zu,qp,Fs,Fy,Wh,ms.vertical,["vertical"],kc,Mg,Uf,$u));var S1=ta?ta.boxStartIndex:eo.collisionBoxArray.length,T1=ta?ta.boxEndIndex:eo.collisionBoxArray.length,k1=Hf?Hf.boxStartIndex:eo.collisionBoxArray.length,P1=Hf?Hf.boxEndIndex:eo.collisionBoxArray.length,L1=jf?jf.boxStartIndex:eo.collisionBoxArray.length,D1=jf?jf.boxEndIndex:eo.collisionBoxArray.length,R1=Gf?Gf.boxStartIndex:eo.collisionBoxArray.length,z1=Gf?Gf.boxEndIndex:eo.collisionBoxArray.length,Yu=-1,lm=function(Zp,Qy){return Zp&&Zp.circleDiameter?Math.max(Zp.circleDiameter,Qy):Qy};Yu=lm(ta,Yu),Yu=lm(Hf,Yu),Yu=lm(jf,Yu);var Ky=(Yu=lm(Gf,Yu))>-1?1:0;Ky&&(Yu*=E1/24),eo.glyphOffsetArray.length>=ur.MAX_GLYPHS&&Bt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Fs.sortKey!==void 0&&eo.addToSortKeyRanges(eo.symbolInstances.length,Fs.sortKey),eo.symbolInstances.emplaceBack(uu.x,uu.y,kc.right>=0?kc.right:-1,kc.center>=0?kc.center:-1,kc.left>=0?kc.left:-1,kc.vertical||-1,Ig,Mg,Eg,S1,T1,k1,P1,L1,D1,R1,z1,Gp,qy,Cg,Hy,Gy,Ky,0,wg,am,Sg,Yu)}(bi,es,Oy,ir,Ni,Ha,Gu,bi.layers[0],bi.collisionBoxArray,pr.index,pr.sourceLayerIndex,bi.index,Uh,$d,Fl,la,Ec,lh,Np,Er,pr,sa,Wi,ts,Mr)};if(Nl==="line")for(var Ff=0,Yd=gy(pr.geometry,0,0,8192,8192);Ff<Yd.length;Ff+=1)for(var Xd=Yd[Ff],Vp=0,Up=f1(Xd,Bf,Fp,ir.vertical||Bl,Ni,24,Of,bi.overscaling,8192);Vp<Up.length;Vp+=1){var Kd=Up[Vp];Bl&&m1(bi,Bl.text,Xr,Kd)||Sc(Xd,Kd)}else if(Nl==="line-center")for(var Nf=0,Tc=pr.geometry;Nf<Tc.length;Nf+=1){var jh=Tc[Nf];if(jh.length>1){var Qd=h1(jh,Fp,ir.vertical||Bl,Ni,24,Of);Qd&&Sc(jh,Qd)}}else if(pr.type==="Polygon")for(var Hh=0,Gh=ng(pr.geometry,0);Hh<Gh.length;Hh+=1){var Sa=Gh[Hh],qu=p1(Sa,16);Sc(Sa[0],new Cc(qu.x,qu.y,0))}else if(pr.type==="LineString")for(var qh=0,jp=pr.geometry;qh<jp.length;qh+=1){var Vf=jp[qh];Sc(Vf,new Cc(Vf[0].x,Vf[0].y,0))}else if(pr.type==="Point")for(var Ag=0,zy=pr.geometry;Ag<zy.length;Ag+=1)for(var Jd=0,Wu=zy[Ag];Jd<Wu.length;Jd+=1){var Si=Wu[Jd];Sc([Si],new Cc(Si.x,Si.y,0))}}(n,ne,Ze,jo,d,B,Fe,_n,Je,Ea,A)},$t=0,te=n.features;$t<te.length;$t+=1)Ut();x&&n.generateCollisionDebugBuffers()},o.perspective=function(n,r,s,d,v){var x,A=1/Math.tan(r/2);return n[0]=A/s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=A,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,v!=null&&v!==1/0?(n[10]=(v+d)*(x=1/(d-v)),n[14]=2*v*d*x):(n[10]=-1,n[14]=-2*d),n},o.pick=function(n,r){for(var s={},d=0;d<r.length;d++){var v=r[d];v in n&&(s[v]=n[v])}return s},o.plugin=hs,o.polygonIntersectsPolygon=kl,o.postMapLoadEvent=or,o.postTurnstileEvent=Di,o.potpack=cy,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=Xe,o.registerForPluginStateChange=function(n){return n({pluginStatus:$a,pluginURL:Ts}),bp.on("pluginStateChange",n),n},o.renderColorRamp=qv,o.rotate=function(n,r,s){var d=r[0],v=r[1],x=r[2],A=r[3],S=Math.sin(s),D=Math.cos(s);return n[0]=d*D+x*S,n[1]=v*D+A*S,n[2]=d*-S+x*D,n[3]=v*-S+A*D,n},o.rotateX=function(n,r,s){var d=Math.sin(s),v=Math.cos(s),x=r[4],A=r[5],S=r[6],D=r[7],B=r[8],N=r[9],V=r[10],Z=r[11];return r!==n&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[4]=x*v+B*d,n[5]=A*v+N*d,n[6]=S*v+V*d,n[7]=D*v+Z*d,n[8]=B*v-x*d,n[9]=N*v-A*d,n[10]=V*v-S*d,n[11]=Z*v-D*d,n},o.rotateZ=function(n,r,s){var d=Math.sin(s),v=Math.cos(s),x=r[0],A=r[1],S=r[2],D=r[3],B=r[4],N=r[5],V=r[6],Z=r[7];return r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=x*v+B*d,n[1]=A*v+N*d,n[2]=S*v+V*d,n[3]=D*v+Z*d,n[4]=B*v-x*d,n[5]=N*v-A*d,n[6]=V*v-S*d,n[7]=Z*v-D*d,n},o.scale=function(n,r,s){var d=s[0],v=s[1],x=s[2];return n[0]=r[0]*d,n[1]=r[1]*d,n[2]=r[2]*d,n[3]=r[3]*d,n[4]=r[4]*v,n[5]=r[5]*v,n[6]=r[6]*v,n[7]=r[7]*v,n[8]=r[8]*x,n[9]=r[9]*x,n[10]=r[10]*x,n[11]=r[11]*x,n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n},o.scale$1=function(n,r,s){return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=r[3]*s,n},o.scale$2=function(n,r,s){return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n},o.setCacheLimits=function(n,r){Gr=n,Yo=r},o.setRTLTextPlugin=function(n,r,s){if(s===void 0&&(s=!1),$a==="deferred"||$a==="loading"||$a==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ts=Qe.resolveURL(n),$a="deferred",_f=r,gc(),s||nl()},o.sphericalToCartesian=function(n){var r=n[0],s=n[1],d=n[2];return s+=90,s*=Math.PI/180,d*=Math.PI/180,{x:r*Math.cos(s)*Math.sin(d),y:r*Math.sin(s)*Math.sin(d),z:r*Math.cos(d)}},o.sqrLen=function(n){var r=n[0],s=n[1];return r*r+s*s},o.styleSpec=tt,o.sub=function(n,r,s){return n[0]=r[0]-s[0],n[1]=r[1]-s[1],n[2]=r[2]-s[2],n},o.symbolSize=c1,o.transformMat3=function(n,r,s){var d=r[0],v=r[1],x=r[2];return n[0]=d*s[0]+v*s[3]+x*s[6],n[1]=d*s[1]+v*s[4]+x*s[7],n[2]=d*s[2]+v*s[5]+x*s[8],n},o.transformMat4=nh,o.translate=function(n,r,s){var d,v,x,A,S,D,B,N,V,Z,J,ct,pt=s[0],Mt=s[1],bt=s[2];return r===n?(n[12]=r[0]*pt+r[4]*Mt+r[8]*bt+r[12],n[13]=r[1]*pt+r[5]*Mt+r[9]*bt+r[13],n[14]=r[2]*pt+r[6]*Mt+r[10]*bt+r[14],n[15]=r[3]*pt+r[7]*Mt+r[11]*bt+r[15]):(v=r[1],x=r[2],A=r[3],S=r[4],D=r[5],B=r[6],N=r[7],V=r[8],Z=r[9],J=r[10],ct=r[11],n[0]=d=r[0],n[1]=v,n[2]=x,n[3]=A,n[4]=S,n[5]=D,n[6]=B,n[7]=N,n[8]=V,n[9]=Z,n[10]=J,n[11]=ct,n[12]=d*pt+S*Mt+V*bt+r[12],n[13]=v*pt+D*Mt+Z*bt+r[13],n[14]=x*pt+B*Mt+J*bt+r[14],n[15]=A*pt+N*Mt+ct*bt+r[15]),n},o.triggerPluginCompletionEvent=Ih,o.uniqueId=xt,o.validateCustomStyleLayer=function(n){var r=[],s=n.id;return s===void 0&&r.push({message:"layers."+s+': missing required property "id"'}),n.render===void 0&&r.push({message:"layers."+s+': missing required method "render"'}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&r.push({message:"layers."+s+': property "renderingMode" must be either "2d" or "3d"'}),r},o.validateLight=Lu,o.validateStyle=Pu,o.values=function(n){var r=[];for(var s in n)r.push(n[s]);return r},o.vectorTile=su,o.version="1.13.3",o.warnOnce=Bt,o.webpSupported=Te,o.window=P,o.wrap=st}),f(["./shared"],function(o){function y(U){var W=typeof U;if(W==="number"||W==="boolean"||W==="string"||U==null)return JSON.stringify(U);if(Array.isArray(U)){for(var Q="[",at=0,dt=U;at<dt.length;at+=1)Q+=y(dt[at])+",";return Q+"]"}for(var Tt=Object.keys(U).sort(),Rt="{",tt=0;tt<Tt.length;tt++)Rt+=JSON.stringify(Tt[tt])+":"+y(U[Tt[tt]])+",";return Rt+"}"}function _(U){for(var W="",Q=0,at=o.refProperties;Q<at.length;Q+=1)W+="/"+y(U[at[Q]]);return W}var M=function(U){this.keyCache={},U&&this.replace(U)};M.prototype.replace=function(U){this._layerConfigs={},this._layers={},this.update(U,[])},M.prototype.update=function(U,W){for(var Q=this,at=0,dt=U;at<dt.length;at+=1){var Tt=dt[at];this._layerConfigs[Tt.id]=Tt;var Rt=this._layers[Tt.id]=o.createStyleLayer(Tt);Rt._featureFilter=o.featureFilter(Rt.filter),this.keyCache[Tt.id]&&delete this.keyCache[Tt.id]}for(var tt=0,yt=W;tt<yt.length;tt+=1){var Zt=yt[tt];delete this.keyCache[Zt],delete this._layerConfigs[Zt],delete this._layers[Zt]}this.familiesBySource={};for(var ge=0,be=function(Ve,je){for(var ii={},Ye=0;Ye<Ve.length;Ye++){var xi=je&&je[Ve[Ye].id]||_(Ve[Ye]);je&&(je[Ve[Ye].id]=xi);var Ui=ii[xi];Ui||(Ui=ii[xi]=[]),Ui.push(Ve[Ye])}var hi=[];for(var gi in ii)hi.push(ii[gi]);return hi}(o.values(this._layerConfigs),this.keyCache);ge<be.length;ge+=1){var re=be[ge].map(function(Ve){return Q._layers[Ve.id]}),ye=re[0];if(ye.visibility!=="none"){var ln=ye.source||"",an=this.familiesBySource[ln];an||(an=this.familiesBySource[ln]={});var ae=ye.sourceLayer||"_geojsonTileLayer",Le=an[ae];Le||(Le=an[ae]=[]),Le.push(re)}}};var T=function(U){var W={},Q=[];for(var at in U){var dt=U[at],Tt=W[at]={};for(var Rt in dt){var tt=dt[+Rt];if(tt&&tt.bitmap.width!==0&&tt.bitmap.height!==0){var yt={x:0,y:0,w:tt.bitmap.width+2,h:tt.bitmap.height+2};Q.push(yt),Tt[Rt]={rect:yt,metrics:tt.metrics}}}}var Zt=o.potpack(Q),ge=new o.AlphaImage({width:Zt.w||1,height:Zt.h||1});for(var be in U){var re=U[be];for(var ye in re){var ln=re[+ye];if(ln&&ln.bitmap.width!==0&&ln.bitmap.height!==0){var an=W[be][ye].rect;o.AlphaImage.copy(ln.bitmap,ge,{x:0,y:0},{x:an.x+1,y:an.y+1},ln.bitmap)}}}this.image=ge,this.positions=W};o.register("GlyphAtlas",T);var k=function(U){this.tileID=new o.OverscaledTileID(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId};function P(U,W,Q){for(var at=new o.EvaluationParameters(W),dt=0,Tt=U;dt<Tt.length;dt+=1)Tt[dt].recalculate(at,Q)}function O(U,W){var Q=o.getArrayBuffer(U.request,function(at,dt,Tt,Rt){at?W(at):dt&&W(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(dt)),rawData:dt,cacheControl:Tt,expires:Rt})});return function(){Q.cancel(),W()}}k.prototype.parse=function(U,W,Q,at,dt){var Tt=this;this.status="parsing",this.data=U,this.collisionBoxArray=new o.CollisionBoxArray;var Rt=new o.DictionaryCoder(Object.keys(U.layers).sort()),tt=new o.FeatureIndex(this.tileID,this.promoteId);tt.bucketLayerIDs=[];var yt,Zt,ge,be,re={},ye={featureIndex:tt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Q},ln=W.familiesBySource[this.source];for(var an in ln){var ae=U.layers[an];if(ae){ae.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+an+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Le=Rt.encode(an),Ve=[],je=0;je<ae.length;je++){var ii=ae.feature(je),Ye=tt.getId(ii,an);Ve.push({feature:ii,id:Ye,index:je,sourceLayerIndex:Le})}for(var xi=0,Ui=ln[an];xi<Ui.length;xi+=1){var hi=Ui[xi],gi=hi[0];gi.minzoom&&this.zoom<Math.floor(gi.minzoom)||gi.maxzoom&&this.zoom>=gi.maxzoom||gi.visibility!=="none"&&(P(hi,this.zoom,Q),(re[gi.id]=gi.createBucket({index:tt.bucketLayerIDs.length,layers:hi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Le,sourceID:this.source})).populate(Ve,ye,this.tileID.canonical),tt.bucketLayerIDs.push(hi.map(function(Zi){return Zi.id})))}}}var vi=o.mapObject(ye.glyphDependencies,function(Zi){return Object.keys(Zi).map(Number)});Object.keys(vi).length?at.send("getGlyphs",{uid:this.uid,stacks:vi},function(Zi,$n){yt||(yt=Zi,Zt=$n,kr.call(Tt))}):Zt={};var To=Object.keys(ye.iconDependencies);To.length?at.send("getImages",{icons:To,source:this.source,tileID:this.tileID,type:"icons"},function(Zi,$n){yt||(yt=Zi,ge=$n,kr.call(Tt))}):ge={};var qn=Object.keys(ye.patternDependencies);function kr(){if(yt)return dt(yt);if(Zt&&ge&&be){var Zi=new T(Zt),$n=new o.ImageAtlas(ge,be);for(var ai in re){var ko=re[ai];ko instanceof o.SymbolBucket?(P(ko.layers,this.zoom,Q),o.performSymbolLayout(ko,Zt,Zi.positions,ge,$n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ko.hasPattern&&(ko instanceof o.LineBucket||ko instanceof o.FillBucket||ko instanceof o.FillExtrusionBucket)&&(P(ko.layers,this.zoom,Q),ko.addFeatures(ye,this.tileID.canonical,$n.patternPositions))}this.status="done",dt(null,{buckets:o.values(re).filter(function(as){return!as.isEmpty()}),featureIndex:tt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Zi.image,imageAtlas:$n,glyphMap:this.returnDependencies?Zt:null,iconMap:this.returnDependencies?ge:null,glyphPositions:this.returnDependencies?Zi.positions:null})}}qn.length?at.send("getImages",{icons:qn,source:this.source,tileID:this.tileID,type:"patterns"},function(Zi,$n){yt||(yt=Zi,be=$n,kr.call(Tt))}):be={},kr.call(this)};var G=function(U,W,Q,at){this.actor=U,this.layerIndex=W,this.availableImages=Q,this.loadVectorData=at||O,this.loading={},this.loaded={}};G.prototype.loadTile=function(U,W){var Q=this,at=U.uid;this.loading||(this.loading={});var dt=!!(U&&U.request&&U.request.collectResourceTiming)&&new o.RequestPerformance(U.request),Tt=this.loading[at]=new k(U);Tt.abort=this.loadVectorData(U,function(Rt,tt){if(delete Q.loading[at],Rt||!tt)return Tt.status="done",Q.loaded[at]=Tt,W(Rt);var yt=tt.rawData,Zt={};tt.expires&&(Zt.expires=tt.expires),tt.cacheControl&&(Zt.cacheControl=tt.cacheControl);var ge={};if(dt){var be=dt.finish();be&&(ge.resourceTiming=JSON.parse(JSON.stringify(be)))}Tt.vectorTile=tt.vectorTile,Tt.parse(tt.vectorTile,Q.layerIndex,Q.availableImages,Q.actor,function(re,ye){if(re||!ye)return W(re);W(null,o.extend({rawTileData:yt.slice(0)},ye,Zt,ge))}),Q.loaded=Q.loaded||{},Q.loaded[at]=Tt})},G.prototype.reloadTile=function(U,W){var Q=this,at=this.loaded,dt=U.uid,Tt=this;if(at&&at[dt]){var Rt=at[dt];Rt.showCollisionBoxes=U.showCollisionBoxes;var tt=function(yt,Zt){var ge=Rt.reloadCallback;ge&&(delete Rt.reloadCallback,Rt.parse(Rt.vectorTile,Tt.layerIndex,Q.availableImages,Tt.actor,ge)),W(yt,Zt)};Rt.status==="parsing"?Rt.reloadCallback=tt:Rt.status==="done"&&(Rt.vectorTile?Rt.parse(Rt.vectorTile,this.layerIndex,this.availableImages,this.actor,tt):tt())}},G.prototype.abortTile=function(U,W){var Q=this.loading,at=U.uid;Q&&Q[at]&&Q[at].abort&&(Q[at].abort(),delete Q[at]),W()},G.prototype.removeTile=function(U,W){var Q=this.loaded,at=U.uid;Q&&Q[at]&&delete Q[at],W()};var H=o.window.ImageBitmap,X=function(){this.loaded={}};function st(U,W){if(U.length!==0){K(U[0],W);for(var Q=1;Q<U.length;Q++)K(U[Q],!W)}}function K(U,W){for(var Q=0,at=0,dt=0,Tt=U.length,Rt=Tt-1;dt<Tt;Rt=dt++){var tt=(U[dt][0]-U[Rt][0])*(U[Rt][1]+U[dt][1]),yt=Q+tt;at+=Math.abs(Q)>=Math.abs(tt)?Q-yt+tt:tt-yt+Q,Q=yt}Q+at>=0!=!!W&&U.reverse()}X.prototype.loadTile=function(U,W){var Q=U.uid,at=U.encoding,dt=U.rawImageData,Tt=H&&dt instanceof H?this.getImageData(dt):dt,Rt=new o.DEMData(Q,Tt,at);this.loaded=this.loaded||{},this.loaded[Q]=Rt,W(null,Rt)},X.prototype.getImageData=function(U){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(U.width,U.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=U.width,this.offscreenCanvas.height=U.height,this.offscreenCanvasContext.drawImage(U,0,0,U.width,U.height);var W=this.offscreenCanvasContext.getImageData(-1,-1,U.width+2,U.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:W.width,height:W.height},W.data)},X.prototype.removeTile=function(U){var W=this.loaded,Q=U.uid;W&&W[Q]&&delete W[Q]};var et=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,xt=function(U){this._feature=U,this.extent=o.EXTENT,this.type=U.type,this.properties=U.tags,"id"in U&&!isNaN(U.id)&&(this.id=parseInt(U.id,10))};xt.prototype.loadGeometry=function(){if(this._feature.type===1){for(var U=[],W=0,Q=this._feature.geometry;W<Q.length;W+=1){var at=Q[W];U.push([new o.Point$1(at[0],at[1])])}return U}for(var dt=[],Tt=0,Rt=this._feature.geometry;Tt<Rt.length;Tt+=1){for(var tt=[],yt=0,Zt=Rt[Tt];yt<Zt.length;yt+=1){var ge=Zt[yt];tt.push(new o.Point$1(ge[0],ge[1]))}dt.push(tt)}return dt},xt.prototype.toGeoJSON=function(U,W,Q){return et.call(this,U,W,Q)};var Nt=function(U){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=U.length,this._features=U};Nt.prototype.feature=function(U){return new xt(this._features[U])};var It=o.vectorTile.VectorTileFeature,St=Gt;function Gt(U,W){this.options=W||{},this.features=U,this.length=U.length}function Dt(U,W){this.id=typeof U.id=="number"?U.id:void 0,this.type=U.type,this.rawGeometry=U.type===1?[U.geometry]:U.geometry,this.properties=U.tags,this.extent=W||4096}Gt.prototype.feature=function(U){return new Dt(this.features[U],this.options.extent)},Dt.prototype.loadGeometry=function(){var U=this.rawGeometry;this.geometry=[];for(var W=0;W<U.length;W++){for(var Q=U[W],at=[],dt=0;dt<Q.length;dt++)at.push(new o.Point$1(Q[dt][0],Q[dt][1]));this.geometry.push(at)}return this.geometry},Dt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var U=this.geometry,W=1/0,Q=-1/0,at=1/0,dt=-1/0,Tt=0;Tt<U.length;Tt++)for(var Rt=U[Tt],tt=0;tt<Rt.length;tt++){var yt=Rt[tt];W=Math.min(W,yt.x),Q=Math.max(Q,yt.x),at=Math.min(at,yt.y),dt=Math.max(dt,yt.y)}return[W,at,Q,dt]},Dt.prototype.toGeoJSON=It.prototype.toGeoJSON;var Qt=Vt,jt=St;function Vt(U){var W=new o.pbf;return function(Q,at){for(var dt in Q.layers)at.writeMessage(3,Bt,Q.layers[dt])}(U,W),W.finish()}function Bt(U,W){var Q;W.writeVarintField(15,U.version||1),W.writeStringField(1,U.name||""),W.writeVarintField(5,U.extent||4096);var at={keys:[],values:[],keycache:{},valuecache:{}};for(Q=0;Q<U.length;Q++)at.feature=U.feature(Q),W.writeMessage(2,de,at);var dt=at.keys;for(Q=0;Q<dt.length;Q++)W.writeStringField(3,dt[Q]);var Tt=at.values;for(Q=0;Q<Tt.length;Q++)W.writeMessage(4,ki,Tt[Q])}function de(U,W){var Q=U.feature;Q.id!==void 0&&W.writeVarintField(1,Q.id),W.writeMessage(2,An,U),W.writeVarintField(3,Q.type),W.writeMessage(4,Ue,Q)}function An(U,W){var Q=U.feature,at=U.keys,dt=U.values,Tt=U.keycache,Rt=U.valuecache;for(var tt in Q.properties){var yt=Tt[tt];yt===void 0&&(at.push(tt),Tt[tt]=yt=at.length-1),W.writeVarint(yt);var Zt=Q.properties[tt],ge=typeof Zt;ge!=="string"&&ge!=="boolean"&&ge!=="number"&&(Zt=JSON.stringify(Zt));var be=ge+":"+Zt,re=Rt[be];re===void 0&&(dt.push(Zt),Rt[be]=re=dt.length-1),W.writeVarint(re)}}function _e(U,W){return(W<<3)+(7&U)}function He(U){return U<<1^U>>31}function Ue(U,W){for(var Q=U.loadGeometry(),at=U.type,dt=0,Tt=0,Rt=Q.length,tt=0;tt<Rt;tt++){var yt=Q[tt],Zt=1;at===1&&(Zt=yt.length),W.writeVarint(_e(1,Zt));for(var ge=at===3?yt.length-1:yt.length,be=0;be<ge;be++){be===1&&at!==1&&W.writeVarint(_e(2,ge-1));var re=yt[be].x-dt,ye=yt[be].y-Tt;W.writeVarint(He(re)),W.writeVarint(He(ye)),dt+=re,Tt+=ye}at===3&&W.writeVarint(_e(7,1))}}function ki(U,W){var Q=typeof U;Q==="string"?W.writeStringField(1,U):Q==="boolean"?W.writeBooleanField(7,U):Q==="number"&&(U%1!=0?W.writeDoubleField(3,U):U<0?W.writeSVarintField(6,U):W.writeVarintField(5,U))}function oi(U,W,Q,at){Vn(U,Q,at),Vn(W,2*Q,2*at),Vn(W,2*Q+1,2*at+1)}function Vn(U,W,Q){var at=U[W];U[W]=U[Q],U[Q]=at}function gn(U,W,Q,at){var dt=U-Q,Tt=W-at;return dt*dt+Tt*Tt}Qt.fromVectorTileJs=Vt,Qt.fromGeojsonVt=function(U,W){W=W||{};var Q={};for(var at in U)Q[at]=new St(U[at].features,W),Q[at].name=at,Q[at].version=W.version,Q[at].extent=W.extent;return Vt({layers:Q})},Qt.GeoJSONWrapper=jt;var Qn=function(U){return U[0]},Pi=function(U){return U[1]},ci=function(U,W,Q,at,dt){W===void 0&&(W=Qn),Q===void 0&&(Q=Pi),at===void 0&&(at=64),dt===void 0&&(dt=Float64Array),this.nodeSize=at,this.points=U;for(var Tt=U.length<65536?Uint16Array:Uint32Array,Rt=this.ids=new Tt(U.length),tt=this.coords=new dt(2*U.length),yt=0;yt<U.length;yt++)Rt[yt]=yt,tt[2*yt]=W(U[yt]),tt[2*yt+1]=Q(U[yt]);(function Zt(ge,be,re,ye,ln,an){if(!(ln-ye<=re)){var ae=ye+ln>>1;(function Le(Ve,je,ii,Ye,xi,Ui){for(;xi>Ye;){if(xi-Ye>600){var hi=xi-Ye+1,gi=ii-Ye+1,vi=Math.log(hi),To=.5*Math.exp(2*vi/3),qn=.5*Math.sqrt(vi*To*(hi-To)/hi)*(gi-hi/2<0?-1:1);Le(Ve,je,ii,Math.max(Ye,Math.floor(ii-gi*To/hi+qn)),Math.min(xi,Math.floor(ii+(hi-gi)*To/hi+qn)),Ui)}var kr=je[2*ii+Ui],Zi=Ye,$n=xi;for(oi(Ve,je,Ye,ii),je[2*xi+Ui]>kr&&oi(Ve,je,Ye,xi);Zi<$n;){for(oi(Ve,je,Zi,$n),Zi++,$n--;je[2*Zi+Ui]<kr;)Zi++;for(;je[2*$n+Ui]>kr;)$n--}je[2*Ye+Ui]===kr?oi(Ve,je,Ye,$n):oi(Ve,je,++$n,xi),$n<=ii&&(Ye=$n+1),ii<=$n&&(xi=$n-1)}})(ge,be,ae,ye,ln,an%2),Zt(ge,be,re,ye,ae-1,an+1),Zt(ge,be,re,ae+1,ln,an+1)}})(Rt,tt,at,0,Rt.length-1,0)};ci.prototype.range=function(U,W,Q,at){return function(dt,Tt,Rt,tt,yt,Zt,ge){for(var be,re,ye=[0,dt.length-1,0],ln=[];ye.length;){var an=ye.pop(),ae=ye.pop(),Le=ye.pop();if(ae-Le<=ge)for(var Ve=Le;Ve<=ae;Ve++)re=Tt[2*Ve+1],(be=Tt[2*Ve])>=Rt&&be<=yt&&re>=tt&&re<=Zt&&ln.push(dt[Ve]);else{var je=Math.floor((Le+ae)/2);re=Tt[2*je+1],(be=Tt[2*je])>=Rt&&be<=yt&&re>=tt&&re<=Zt&&ln.push(dt[je]);var ii=(an+1)%2;(an===0?Rt<=be:tt<=re)&&(ye.push(Le),ye.push(je-1),ye.push(ii)),(an===0?yt>=be:Zt>=re)&&(ye.push(je+1),ye.push(ae),ye.push(ii))}}return ln}(this.ids,this.coords,U,W,Q,at,this.nodeSize)},ci.prototype.within=function(U,W,Q){return function(at,dt,Tt,Rt,tt,yt){for(var Zt=[0,at.length-1,0],ge=[],be=tt*tt;Zt.length;){var re=Zt.pop(),ye=Zt.pop(),ln=Zt.pop();if(ye-ln<=yt)for(var an=ln;an<=ye;an++)gn(dt[2*an],dt[2*an+1],Tt,Rt)<=be&&ge.push(at[an]);else{var ae=Math.floor((ln+ye)/2),Le=dt[2*ae],Ve=dt[2*ae+1];gn(Le,Ve,Tt,Rt)<=be&&ge.push(at[ae]);var je=(re+1)%2;(re===0?Tt-tt<=Le:Rt-tt<=Ve)&&(Zt.push(ln),Zt.push(ae-1),Zt.push(je)),(re===0?Tt+tt>=Le:Rt+tt>=Ve)&&(Zt.push(ae+1),Zt.push(ye),Zt.push(je))}}return ge}(this.ids,this.coords,U,W,Q,this.nodeSize)};var Ai={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(U){return U}},ue=function(U){this.options=At(Object.create(Ai),U),this.trees=new Array(this.options.maxZoom+1)};function Qe(U,W,Q,at,dt){return{x:U,y:W,zoom:1/0,id:Q,parentId:-1,numPoints:at,properties:dt}}function me(U,W){var Q=U.geometry.coordinates,at=Q[1];return{x:Li(Q[0]),y:ut(at),zoom:1/0,index:W,parentId:-1}}function Te(U){return{type:"Feature",id:U.id,properties:wi(U),geometry:{type:"Point",coordinates:[(at=U.x,360*(at-.5)),(W=U.y,Q=(180-360*W)*Math.PI/180,360*Math.atan(Math.exp(Q))/Math.PI-90)]}};var W,Q,at}function wi(U){var W=U.numPoints,Q=W>=1e4?Math.round(W/1e3)+"k":W>=1e3?Math.round(W/100)/10+"k":W;return At(At({},U.properties),{cluster:!0,cluster_id:U.id,point_count:W,point_count_abbreviated:Q})}function Li(U){return U/360+.5}function ut(U){var W=Math.sin(U*Math.PI/180),Q=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return Q<0?0:Q>1?1:Q}function At(U,W){for(var Q in W)U[Q]=W[Q];return U}function Jt(U){return U.x}function le(U){return U.y}function pe(U,W,Q,at,dt,Tt){var Rt=dt-Q,tt=Tt-at;if(Rt!==0||tt!==0){var yt=((U-Q)*Rt+(W-at)*tt)/(Rt*Rt+tt*tt);yt>1?(Q=dt,at=Tt):yt>0&&(Q+=Rt*yt,at+=tt*yt)}return(Rt=U-Q)*Rt+(tt=W-at)*tt}function Be(U,W,Q,at){var dt={id:U===void 0?null:U,type:W,geometry:Q,tags:at,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Tt){var Rt=Tt.geometry,tt=Tt.type;if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")un(Tt,Rt);else if(tt==="Polygon"||tt==="MultiLineString")for(var yt=0;yt<Rt.length;yt++)un(Tt,Rt[yt]);else if(tt==="MultiPolygon")for(yt=0;yt<Rt.length;yt++)for(var Zt=0;Zt<Rt[yt].length;Zt++)un(Tt,Rt[yt][Zt])}(dt),dt}function un(U,W){for(var Q=0;Q<W.length;Q+=3)U.minX=Math.min(U.minX,W[Q]),U.minY=Math.min(U.minY,W[Q+1]),U.maxX=Math.max(U.maxX,W[Q]),U.maxY=Math.max(U.maxY,W[Q+1])}function we(U,W,Q,at){if(W.geometry){var dt=W.geometry.coordinates,Tt=W.geometry.type,Rt=Math.pow(Q.tolerance/((1<<Q.maxZoom)*Q.extent),2),tt=[],yt=W.id;if(Q.promoteId?yt=W.properties[Q.promoteId]:Q.generateId&&(yt=at||0),Tt==="Point")De(dt,tt);else if(Tt==="MultiPoint")for(var Zt=0;Zt<dt.length;Zt++)De(dt[Zt],tt);else if(Tt==="LineString")Se(dt,tt,Rt,!1);else if(Tt==="MultiLineString"){if(Q.lineMetrics){for(Zt=0;Zt<dt.length;Zt++)Se(dt[Zt],tt=[],Rt,!1),U.push(Be(yt,"LineString",tt,W.properties));return}en(dt,tt,Rt,!1)}else if(Tt==="Polygon")en(dt,tt,Rt,!0);else{if(Tt!=="MultiPolygon"){if(Tt==="GeometryCollection"){for(Zt=0;Zt<W.geometry.geometries.length;Zt++)we(U,{id:yt,geometry:W.geometry.geometries[Zt],properties:W.properties},Q,at);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Zt=0;Zt<dt.length;Zt++){var ge=[];en(dt[Zt],ge,Rt,!0),tt.push(ge)}}U.push(Be(yt,Tt,tt,W.properties))}}function De(U,W){W.push(Cn(U[0])),W.push(In(U[1])),W.push(0)}function Se(U,W,Q,at){for(var dt,Tt,Rt=0,tt=0;tt<U.length;tt++){var yt=Cn(U[tt][0]),Zt=In(U[tt][1]);W.push(yt),W.push(Zt),W.push(0),tt>0&&(Rt+=at?(dt*Zt-yt*Tt)/2:Math.sqrt(Math.pow(yt-dt,2)+Math.pow(Zt-Tt,2))),dt=yt,Tt=Zt}var ge=W.length-3;W[2]=1,function be(re,ye,ln,an){for(var ae,Le=an,Ve=ln-ye>>1,je=ln-ye,ii=re[ye],Ye=re[ye+1],xi=re[ln],Ui=re[ln+1],hi=ye+3;hi<ln;hi+=3){var gi=pe(re[hi],re[hi+1],ii,Ye,xi,Ui);if(gi>Le)ae=hi,Le=gi;else if(gi===Le){var vi=Math.abs(hi-Ve);vi<je&&(ae=hi,je=vi)}}Le>an&&(ae-ye>3&&be(re,ye,ae,an),re[ae+2]=Le,ln-ae>3&&be(re,ae,ln,an))}(W,0,ge,Q),W[ge+2]=1,W.size=Math.abs(Rt),W.start=0,W.end=W.size}function en(U,W,Q,at){for(var dt=0;dt<U.length;dt++){var Tt=[];Se(U[dt],Tt,Q,at),W.push(Tt)}}function Cn(U){return U/360+.5}function In(U){var W=Math.sin(U*Math.PI/180),Q=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return Q<0?0:Q>1?1:Q}function Pn(U,W,Q,at,dt,Tt,Rt,tt){if(at/=W,Tt>=(Q/=W)&&Rt<at)return U;if(Rt<Q||Tt>=at)return null;for(var yt=[],Zt=0;Zt<U.length;Zt++){var ge=U[Zt],be=ge.geometry,re=ge.type,ye=dt===0?ge.minX:ge.minY,ln=dt===0?ge.maxX:ge.maxY;if(ye>=Q&&ln<at)yt.push(ge);else if(!(ln<Q||ye>=at)){var an=[];if(re==="Point"||re==="MultiPoint")Jn(be,an,Q,at,dt);else if(re==="LineString")Di(be,an,Q,at,dt,!1,tt.lineMetrics);else if(re==="MultiLineString")or(be,an,Q,at,dt,!1);else if(re==="Polygon")or(be,an,Q,at,dt,!0);else if(re==="MultiPolygon")for(var ae=0;ae<be.length;ae++){var Le=[];or(be[ae],Le,Q,at,dt,!0),Le.length&&an.push(Le)}if(an.length){if(tt.lineMetrics&&re==="LineString"){for(ae=0;ae<an.length;ae++)yt.push(Be(ge.id,re,an[ae],ge.tags));continue}re!=="LineString"&&re!=="MultiLineString"||(an.length===1?(re="LineString",an=an[0]):re="MultiLineString"),re!=="Point"&&re!=="MultiPoint"||(re=an.length===3?"Point":"MultiPoint"),yt.push(Be(ge.id,re,an,ge.tags))}}}return yt.length?yt:null}function Jn(U,W,Q,at,dt){for(var Tt=0;Tt<U.length;Tt+=3){var Rt=U[Tt+dt];Rt>=Q&&Rt<=at&&(W.push(U[Tt]),W.push(U[Tt+1]),W.push(U[Tt+2]))}}function Di(U,W,Q,at,dt,Tt,Rt){for(var tt,yt,Zt=Ci(U),ge=dt===0?Yo:va,be=U.start,re=0;re<U.length-3;re+=3){var ye=U[re],ln=U[re+1],an=U[re+2],ae=U[re+3],Le=U[re+4],Ve=dt===0?ye:ln,je=dt===0?ae:Le,ii=!1;Rt&&(tt=Math.sqrt(Math.pow(ye-ae,2)+Math.pow(ln-Le,2))),Ve<Q?je>Q&&(yt=ge(Zt,ye,ln,ae,Le,Q),Rt&&(Zt.start=be+tt*yt)):Ve>at?je<at&&(yt=ge(Zt,ye,ln,ae,Le,at),Rt&&(Zt.start=be+tt*yt)):Gr(Zt,ye,ln,an),je<Q&&Ve>=Q&&(yt=ge(Zt,ye,ln,ae,Le,Q),ii=!0),je>at&&Ve<=at&&(yt=ge(Zt,ye,ln,ae,Le,at),ii=!0),!Tt&&ii&&(Rt&&(Zt.end=be+tt*yt),W.push(Zt),Zt=Ci(U)),Rt&&(be+=tt)}var Ye=U.length-3;ye=U[Ye],ln=U[Ye+1],an=U[Ye+2],(Ve=dt===0?ye:ln)>=Q&&Ve<=at&&Gr(Zt,ye,ln,an),Ye=Zt.length-3,Tt&&Ye>=3&&(Zt[Ye]!==Zt[0]||Zt[Ye+1]!==Zt[1])&&Gr(Zt,Zt[0],Zt[1],Zt[2]),Zt.length&&W.push(Zt)}function Ci(U){var W=[];return W.size=U.size,W.start=U.start,W.end=U.end,W}function or(U,W,Q,at,dt,Tt){for(var Rt=0;Rt<U.length;Rt++)Di(U[Rt],W,Q,at,dt,Tt,!1)}function Gr(U,W,Q,at){U.push(W),U.push(Q),U.push(at)}function Yo(U,W,Q,at,dt,Tt){var Rt=(Tt-W)/(at-W);return U.push(Tt),U.push(Q+(dt-Q)*Rt),U.push(1),Rt}function va(U,W,Q,at,dt,Tt){var Rt=(Tt-Q)/(dt-Q);return U.push(W+(at-W)*Rt),U.push(Tt),U.push(1),Rt}function Ra(U,W){for(var Q=[],at=0;at<U.length;at++){var dt,Tt=U[at],Rt=Tt.type;if(Rt==="Point"||Rt==="MultiPoint"||Rt==="LineString")dt=qa(Tt.geometry,W);else if(Rt==="MultiLineString"||Rt==="Polygon"){dt=[];for(var tt=0;tt<Tt.geometry.length;tt++)dt.push(qa(Tt.geometry[tt],W))}else if(Rt==="MultiPolygon")for(dt=[],tt=0;tt<Tt.geometry.length;tt++){for(var yt=[],Zt=0;Zt<Tt.geometry[tt].length;Zt++)yt.push(qa(Tt.geometry[tt][Zt],W));dt.push(yt)}Q.push(Be(Tt.id,Rt,dt,Tt.tags))}return Q}function qa(U,W){var Q=[];Q.size=U.size,U.start!==void 0&&(Q.start=U.start,Q.end=U.end);for(var at=0;at<U.length;at+=3)Q.push(U[at]+W,U[at+1],U[at+2]);return Q}function Ar(U,W){if(U.transformed)return U;var Q,at,dt,Tt=1<<U.z,Rt=U.x,tt=U.y;for(Q=0;Q<U.features.length;Q++){var yt=U.features[Q],Zt=yt.geometry,ge=yt.type;if(yt.geometry=[],ge===1)for(at=0;at<Zt.length;at+=2)yt.geometry.push(So(Zt[at],Zt[at+1],W,Tt,Rt,tt));else for(at=0;at<Zt.length;at++){var be=[];for(dt=0;dt<Zt[at].length;dt+=2)be.push(So(Zt[at][dt],Zt[at][dt+1],W,Tt,Rt,tt));yt.geometry.push(be)}}return U.transformed=!0,U}function So(U,W,Q,at,dt,Tt){return[Math.round(Q*(U*at-dt)),Math.round(Q*(W*at-Tt))]}function qs(U,W,Q,at,dt){for(var Tt=W===dt.maxZoom?0:dt.tolerance/((1<<W)*dt.extent),Rt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Q,y:at,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},tt=0;tt<U.length;tt++){Rt.numFeatures++,Ws(Rt,U[tt],Tt,dt);var yt=U[tt].minX,Zt=U[tt].minY,ge=U[tt].maxX,be=U[tt].maxY;yt<Rt.minX&&(Rt.minX=yt),Zt<Rt.minY&&(Rt.minY=Zt),ge>Rt.maxX&&(Rt.maxX=ge),be>Rt.maxY&&(Rt.maxY=be)}return Rt}function Ws(U,W,Q,at){var dt=W.geometry,Tt=W.type,Rt=[];if(Tt==="Point"||Tt==="MultiPoint")for(var tt=0;tt<dt.length;tt+=3)Rt.push(dt[tt]),Rt.push(dt[tt+1]),U.numPoints++,U.numSimplified++;else if(Tt==="LineString")gl(Rt,dt,U,Q,!1,!1);else if(Tt==="MultiLineString"||Tt==="Polygon")for(tt=0;tt<dt.length;tt++)gl(Rt,dt[tt],U,Q,Tt==="Polygon",tt===0);else if(Tt==="MultiPolygon")for(var yt=0;yt<dt.length;yt++){var Zt=dt[yt];for(tt=0;tt<Zt.length;tt++)gl(Rt,Zt[tt],U,Q,!0,tt===0)}if(Rt.length){var ge=W.tags||null;if(Tt==="LineString"&&at.lineMetrics){for(var be in ge={},W.tags)ge[be]=W.tags[be];ge.mapbox_clip_start=dt.start/dt.size,ge.mapbox_clip_end=dt.end/dt.size}var re={geometry:Rt,type:Tt==="Polygon"||Tt==="MultiPolygon"?3:Tt==="LineString"||Tt==="MultiLineString"?2:1,tags:ge};W.id!==null&&(re.id=W.id),U.features.push(re)}}function gl(U,W,Q,at,dt,Tt){var Rt=at*at;if(at>0&&W.size<(dt?Rt:at))Q.numPoints+=W.length/3;else{for(var tt=[],yt=0;yt<W.length;yt+=3)(at===0||W[yt+2]>Rt)&&(Q.numSimplified++,tt.push(W[yt]),tt.push(W[yt+1])),Q.numPoints++;dt&&function(Zt,ge){for(var be=0,re=0,ye=Zt.length,ln=ye-2;re<ye;ln=re,re+=2)be+=(Zt[re]-Zt[ln])*(Zt[re+1]+Zt[ln+1]);if(be>0===ge)for(re=0,ye=Zt.length;re<ye/2;re+=2){var an=Zt[re],ae=Zt[re+1];Zt[re]=Zt[ye-2-re],Zt[re+1]=Zt[ye-1-re],Zt[ye-2-re]=an,Zt[ye-1-re]=ae}}(tt,Tt),U.push(tt)}}function za(U,W){var Q=(W=this.options=function(dt,Tt){for(var Rt in Tt)dt[Rt]=Tt[Rt];return dt}(Object.create(this.options),W)).debug;if(Q&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var at=function(dt,Tt){var Rt=[];if(dt.type==="FeatureCollection")for(var tt=0;tt<dt.features.length;tt++)we(Rt,dt.features[tt],Tt,tt);else we(Rt,dt.type==="Feature"?dt:{geometry:dt},Tt);return Rt}(U,W);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(at=function(dt,Tt){var Rt=Tt.buffer/Tt.extent,tt=dt,yt=Pn(dt,1,-1-Rt,Rt,0,-1,2,Tt),Zt=Pn(dt,1,1-Rt,2+Rt,0,-1,2,Tt);return(yt||Zt)&&(tt=Pn(dt,1,-Rt,1+Rt,0,-1,2,Tt)||[],yt&&(tt=Ra(yt,1).concat(tt)),Zt&&(tt=tt.concat(Ra(Zt,-1)))),tt}(at,W)).length&&this.splitTile(at,0,0,0),Q&&(at.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function lo(U,W,Q){return 32*((1<<U)*Q+W)+U}function Zs(U,W){var Q=U.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);var at=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!at)return W(null,null);var dt=new Nt(at.features),Tt=Qt(dt);Tt.byteOffset===0&&Tt.byteLength===Tt.buffer.byteLength||(Tt=new Uint8Array(Tt)),W(null,{vectorTile:dt,rawData:Tt.buffer})}ue.prototype.load=function(U){var W=this.options,Q=W.log,at=W.minZoom,dt=W.maxZoom,Tt=W.nodeSize;Q&&console.time("total time");var Rt="prepare "+U.length+" points";Q&&console.time(Rt),this.points=U;for(var tt=[],yt=0;yt<U.length;yt++)U[yt].geometry&&tt.push(me(U[yt],yt));this.trees[dt+1]=new ci(tt,Jt,le,Tt,Float32Array),Q&&console.timeEnd(Rt);for(var Zt=dt;Zt>=at;Zt--){var ge=+Date.now();tt=this._cluster(tt,Zt),this.trees[Zt]=new ci(tt,Jt,le,Tt,Float32Array),Q&&console.log("z%d: %d clusters in %dms",Zt,tt.length,+Date.now()-ge)}return Q&&console.timeEnd("total time"),this},ue.prototype.getClusters=function(U,W){var Q=((U[0]+180)%360+360)%360-180,at=Math.max(-90,Math.min(90,U[1])),dt=U[2]===180?180:((U[2]+180)%360+360)%360-180,Tt=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)Q=-180,dt=180;else if(Q>dt){var Rt=this.getClusters([Q,at,180,Tt],W),tt=this.getClusters([-180,at,dt,Tt],W);return Rt.concat(tt)}for(var yt=this.trees[this._limitZoom(W)],Zt=[],ge=0,be=yt.range(Li(Q),ut(Tt),Li(dt),ut(at));ge<be.length;ge+=1){var re=yt.points[be[ge]];Zt.push(re.numPoints?Te(re):this.points[re.index])}return Zt},ue.prototype.getChildren=function(U){var W=this._getOriginId(U),Q=this._getOriginZoom(U),at="No cluster with the specified id.",dt=this.trees[Q];if(!dt)throw new Error(at);var Tt=dt.points[W];if(!Tt)throw new Error(at);for(var Rt=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),tt=[],yt=0,Zt=dt.within(Tt.x,Tt.y,Rt);yt<Zt.length;yt+=1){var ge=dt.points[Zt[yt]];ge.parentId===U&&tt.push(ge.numPoints?Te(ge):this.points[ge.index])}if(tt.length===0)throw new Error(at);return tt},ue.prototype.getLeaves=function(U,W,Q){var at=[];return this._appendLeaves(at,U,W=W||10,Q=Q||0,0),at},ue.prototype.getTile=function(U,W,Q){var at=this.trees[this._limitZoom(U)],dt=Math.pow(2,U),Tt=this.options,Rt=Tt.radius/Tt.extent,tt=(Q-Rt)/dt,yt=(Q+1+Rt)/dt,Zt={features:[]};return this._addTileFeatures(at.range((W-Rt)/dt,tt,(W+1+Rt)/dt,yt),at.points,W,Q,dt,Zt),W===0&&this._addTileFeatures(at.range(1-Rt/dt,tt,1,yt),at.points,dt,Q,dt,Zt),W===dt-1&&this._addTileFeatures(at.range(0,tt,Rt/dt,yt),at.points,-1,Q,dt,Zt),Zt.features.length?Zt:null},ue.prototype.getClusterExpansionZoom=function(U){for(var W=this._getOriginZoom(U)-1;W<=this.options.maxZoom;){var Q=this.getChildren(U);if(W++,Q.length!==1)break;U=Q[0].properties.cluster_id}return W},ue.prototype._appendLeaves=function(U,W,Q,at,dt){for(var Tt=0,Rt=this.getChildren(W);Tt<Rt.length;Tt+=1){var tt=Rt[Tt],yt=tt.properties;if(yt&&yt.cluster?dt+yt.point_count<=at?dt+=yt.point_count:dt=this._appendLeaves(U,yt.cluster_id,Q,at,dt):dt<at?dt++:U.push(tt),U.length===Q)break}return dt},ue.prototype._addTileFeatures=function(U,W,Q,at,dt,Tt){for(var Rt=0,tt=U;Rt<tt.length;Rt+=1){var yt=W[tt[Rt]],Zt=yt.numPoints,ge={type:1,geometry:[[Math.round(this.options.extent*(yt.x*dt-Q)),Math.round(this.options.extent*(yt.y*dt-at))]],tags:Zt?wi(yt):this.points[yt.index].properties},be=void 0;Zt?be=yt.id:this.options.generateId?be=yt.index:this.points[yt.index].id&&(be=this.points[yt.index].id),be!==void 0&&(ge.id=be),Tt.features.push(ge)}},ue.prototype._limitZoom=function(U){return Math.max(this.options.minZoom,Math.min(+U,this.options.maxZoom+1))},ue.prototype._cluster=function(U,W){for(var Q=[],at=this.options,dt=at.reduce,Tt=at.minPoints,Rt=at.radius/(at.extent*Math.pow(2,W)),tt=0;tt<U.length;tt++){var yt=U[tt];if(!(yt.zoom<=W)){yt.zoom=W;for(var Zt=this.trees[W+1],ge=Zt.within(yt.x,yt.y,Rt),be=yt.numPoints||1,re=be,ye=0,ln=ge;ye<ln.length;ye+=1){var an=Zt.points[ln[ye]];an.zoom>W&&(re+=an.numPoints||1)}if(re>=Tt){for(var ae=yt.x*be,Le=yt.y*be,Ve=dt&&be>1?this._map(yt,!0):null,je=(tt<<5)+(W+1)+this.points.length,ii=0,Ye=ge;ii<Ye.length;ii+=1){var xi=Zt.points[Ye[ii]];if(!(xi.zoom<=W)){xi.zoom=W;var Ui=xi.numPoints||1;ae+=xi.x*Ui,Le+=xi.y*Ui,xi.parentId=je,dt&&(Ve||(Ve=this._map(yt,!0)),dt(Ve,this._map(xi)))}}yt.parentId=je,Q.push(Qe(ae/re,Le/re,je,re,Ve))}else if(Q.push(yt),re>1)for(var hi=0,gi=ge;hi<gi.length;hi+=1){var vi=Zt.points[gi[hi]];vi.zoom<=W||(vi.zoom=W,Q.push(vi))}}}return Q},ue.prototype._getOriginId=function(U){return U-this.points.length>>5},ue.prototype._getOriginZoom=function(U){return(U-this.points.length)%32},ue.prototype._map=function(U,W){if(U.numPoints)return W?At({},U.properties):U.properties;var Q=this.points[U.index].properties,at=this.options.map(Q);return W&&at===Q?At({},at):at},za.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},za.prototype.splitTile=function(U,W,Q,at,dt,Tt,Rt){for(var tt=[U,W,Q,at],yt=this.options,Zt=yt.debug;tt.length;){at=tt.pop(),Q=tt.pop(),W=tt.pop(),U=tt.pop();var ge=1<<W,be=lo(W,Q,at),re=this.tiles[be];if(!re&&(Zt>1&&console.time("creation"),re=this.tiles[be]=qs(U,W,Q,at,yt),this.tileCoords.push({z:W,x:Q,y:at}),Zt)){Zt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,Q,at,re.numFeatures,re.numPoints,re.numSimplified),console.timeEnd("creation"));var ye="z"+W;this.stats[ye]=(this.stats[ye]||0)+1,this.total++}if(re.source=U,dt){if(W===yt.maxZoom||W===dt)continue;var ln=1<<dt-W;if(Q!==Math.floor(Tt/ln)||at!==Math.floor(Rt/ln))continue}else if(W===yt.indexMaxZoom||re.numPoints<=yt.indexMaxPoints)continue;if(re.source=null,U.length!==0){Zt>1&&console.time("clipping");var an,ae,Le,Ve,je,ii,Ye=.5*yt.buffer/yt.extent,xi=.5-Ye,Ui=.5+Ye,hi=1+Ye;an=ae=Le=Ve=null,je=Pn(U,ge,Q-Ye,Q+Ui,0,re.minX,re.maxX,yt),ii=Pn(U,ge,Q+xi,Q+hi,0,re.minX,re.maxX,yt),U=null,je&&(an=Pn(je,ge,at-Ye,at+Ui,1,re.minY,re.maxY,yt),ae=Pn(je,ge,at+xi,at+hi,1,re.minY,re.maxY,yt),je=null),ii&&(Le=Pn(ii,ge,at-Ye,at+Ui,1,re.minY,re.maxY,yt),Ve=Pn(ii,ge,at+xi,at+hi,1,re.minY,re.maxY,yt),ii=null),Zt>1&&console.timeEnd("clipping"),tt.push(an||[],W+1,2*Q,2*at),tt.push(ae||[],W+1,2*Q,2*at+1),tt.push(Le||[],W+1,2*Q+1,2*at),tt.push(Ve||[],W+1,2*Q+1,2*at+1)}}},za.prototype.getTile=function(U,W,Q){var at=this.options,dt=at.extent,Tt=at.debug;if(U<0||U>24)return null;var Rt=1<<U,tt=lo(U,W=(W%Rt+Rt)%Rt,Q);if(this.tiles[tt])return Ar(this.tiles[tt],dt);Tt>1&&console.log("drilling down to z%d-%d-%d",U,W,Q);for(var yt,Zt=U,ge=W,be=Q;!yt&&Zt>0;)Zt--,ge=Math.floor(ge/2),be=Math.floor(be/2),yt=this.tiles[lo(Zt,ge,be)];return yt&&yt.source?(Tt>1&&console.log("found parent tile z%d-%d-%d",Zt,ge,be),Tt>1&&console.time("drilling down"),this.splitTile(yt.source,Zt,ge,be,U,W,Q),Tt>1&&console.timeEnd("drilling down"),this.tiles[tt]?Ar(this.tiles[tt],dt):null):null};var bu=function(U){function W(Q,at,dt,Tt){U.call(this,Q,at,dt,Zs),Tt&&(this.loadGeoJSON=Tt)}return U&&(W.__proto__=U),(W.prototype=Object.create(U&&U.prototype)).constructor=W,W.prototype.loadData=function(Q,at){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=at,this._pendingLoadDataParams=Q,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},W.prototype._loadData=function(){var Q=this;if(this._pendingCallback&&this._pendingLoadDataParams){var at=this._pendingCallback,dt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Tt=!!(dt&&dt.request&&dt.request.collectResourceTiming)&&new o.RequestPerformance(dt.request);this.loadGeoJSON(dt,function(Rt,tt){if(Rt||!tt)return at(Rt);if(typeof tt!="object")return at(new Error("Input data given to '"+dt.source+"' is not a valid GeoJSON object."));(function re(ye,ln){var an,ae=ye&&ye.type;if(ae==="FeatureCollection")for(an=0;an<ye.features.length;an++)re(ye.features[an],ln);else if(ae==="GeometryCollection")for(an=0;an<ye.geometries.length;an++)re(ye.geometries[an],ln);else if(ae==="Feature")re(ye.geometry,ln);else if(ae==="Polygon")st(ye.coordinates,ln);else if(ae==="MultiPolygon")for(an=0;an<ye.coordinates.length;an++)st(ye.coordinates[an],ln);return ye})(tt,!0);try{if(dt.filter){var yt=o.createExpression(dt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(yt.result==="error")throw new Error(yt.value.map(function(re){return re.key+": "+re.message}).join(", "));var Zt=tt.features.filter(function(re){return yt.value.evaluate({zoom:0},re)});tt={type:"FeatureCollection",features:Zt}}Q._geoJSONIndex=dt.cluster?new ue(function(re){var ye=re.superclusterOptions,ln=re.clusterProperties;if(!ln||!ye)return ye;for(var an={},ae={},Le={accumulated:null,zoom:0},Ve={properties:null},je=Object.keys(ln),ii=0,Ye=je;ii<Ye.length;ii+=1){var xi=Ye[ii],Ui=ln[xi],hi=Ui[0],gi=o.createExpression(Ui[1]),vi=o.createExpression(typeof hi=="string"?[hi,["accumulated"],["get",xi]]:hi);an[xi]=gi.value,ae[xi]=vi.value}return ye.map=function(To){Ve.properties=To;for(var qn={},kr=0,Zi=je;kr<Zi.length;kr+=1){var $n=Zi[kr];qn[$n]=an[$n].evaluate(Le,Ve)}return qn},ye.reduce=function(To,qn){Ve.properties=qn;for(var kr=0,Zi=je;kr<Zi.length;kr+=1){var $n=Zi[kr];Le.accumulated=To[$n],To[$n]=ae[$n].evaluate(Le,Ve)}},ye}(dt)).load(tt.features):function(re,ye){return new za(re,ye)}(tt,dt.geojsonVtOptions)}catch(re){return at(re)}Q.loaded={};var ge={};if(Tt){var be=Tt.finish();be&&(ge.resourceTiming={},ge.resourceTiming[dt.source]=JSON.parse(JSON.stringify(be)))}at(null,ge)})}},W.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},W.prototype.reloadTile=function(Q,at){var dt=this.loaded;return dt&&dt[Q.uid]?U.prototype.reloadTile.call(this,Q,at):this.loadTile(Q,at)},W.prototype.loadGeoJSON=function(Q,at){if(Q.request)o.getJSON(Q.request,at);else{if(typeof Q.data!="string")return at(new Error("Input data given to '"+Q.source+"' is not a valid GeoJSON object."));try{return at(null,JSON.parse(Q.data))}catch{return at(new Error("Input data given to '"+Q.source+"' is not a valid GeoJSON object."))}}},W.prototype.removeSource=function(Q,at){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),at()},W.prototype.getClusterExpansionZoom=function(Q,at){try{at(null,this._geoJSONIndex.getClusterExpansionZoom(Q.clusterId))}catch(dt){at(dt)}},W.prototype.getClusterChildren=function(Q,at){try{at(null,this._geoJSONIndex.getChildren(Q.clusterId))}catch(dt){at(dt)}},W.prototype.getClusterLeaves=function(Q,at){try{at(null,this._geoJSONIndex.getLeaves(Q.clusterId,Q.limit,Q.offset))}catch(dt){at(dt)}},W}(G),qr=function(U){var W=this;this.self=U,this.actor=new o.Actor(U,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:G,geojson:bu},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Q,at){if(W.workerSourceTypes[Q])throw new Error('Worker source with name "'+Q+'" already registered.');W.workerSourceTypes[Q]=at},this.self.registerRTLTextPlugin=function(Q){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Q.applyArabicShaping,o.plugin.processBidirectionalText=Q.processBidirectionalText,o.plugin.processStyledBidirectionalText=Q.processStyledBidirectionalText}};return qr.prototype.setReferrer=function(U,W){this.referrer=W},qr.prototype.setImages=function(U,W,Q){for(var at in this.availableImages[U]=W,this.workerSources[U]){var dt=this.workerSources[U][at];for(var Tt in dt)dt[Tt].availableImages=W}Q()},qr.prototype.setLayers=function(U,W,Q){this.getLayerIndex(U).replace(W),Q()},qr.prototype.updateLayers=function(U,W,Q){this.getLayerIndex(U).update(W.layers,W.removedIds),Q()},qr.prototype.loadTile=function(U,W,Q){this.getWorkerSource(U,W.type,W.source).loadTile(W,Q)},qr.prototype.loadDEMTile=function(U,W,Q){this.getDEMWorkerSource(U,W.source).loadTile(W,Q)},qr.prototype.reloadTile=function(U,W,Q){this.getWorkerSource(U,W.type,W.source).reloadTile(W,Q)},qr.prototype.abortTile=function(U,W,Q){this.getWorkerSource(U,W.type,W.source).abortTile(W,Q)},qr.prototype.removeTile=function(U,W,Q){this.getWorkerSource(U,W.type,W.source).removeTile(W,Q)},qr.prototype.removeDEMTile=function(U,W){this.getDEMWorkerSource(U,W.source).removeTile(W)},qr.prototype.removeSource=function(U,W,Q){if(this.workerSources[U]&&this.workerSources[U][W.type]&&this.workerSources[U][W.type][W.source]){var at=this.workerSources[U][W.type][W.source];delete this.workerSources[U][W.type][W.source],at.removeSource!==void 0?at.removeSource(W,Q):Q()}},qr.prototype.loadWorkerSource=function(U,W,Q){try{this.self.importScripts(W.url),Q()}catch(at){Q(at.toString())}},qr.prototype.syncRTLPluginState=function(U,W,Q){try{o.plugin.setState(W);var at=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&at!=null){this.self.importScripts(at);var dt=o.plugin.isParsed();Q(dt?void 0:new Error("RTL Text Plugin failed to import scripts from "+at),dt)}}catch(Tt){Q(Tt.toString())}},qr.prototype.getAvailableImages=function(U){var W=this.availableImages[U];return W||(W=[]),W},qr.prototype.getLayerIndex=function(U){var W=this.layerIndexes[U];return W||(W=this.layerIndexes[U]=new M),W},qr.prototype.getWorkerSource=function(U,W,Q){var at=this;return this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][W]||(this.workerSources[U][W]={}),this.workerSources[U][W][Q]||(this.workerSources[U][W][Q]=new this.workerSourceTypes[W]({send:function(dt,Tt,Rt){at.actor.send(dt,Tt,Rt,U)}},this.getLayerIndex(U),this.getAvailableImages(U))),this.workerSources[U][W][Q]},qr.prototype.getDEMWorkerSource=function(U,W){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][W]||(this.demWorkerSources[U][W]=new X),this.demWorkerSources[U][W]},qr.prototype.enforceCacheSizeLimit=function(U,W){o.enforceCacheSizeLimit(W)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new qr(self)),qr}),f(["./shared"],function(o){var y=o.createCommonjsModule(function(l){function h(b){return!u(b)}function u(b){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var E,L,F=new Blob([""],{type:"text/javascript"}),j=URL.createObjectURL(F);try{L=new Worker(j),E=!0}catch{E=!1}return L&&L.terminate(),URL.revokeObjectURL(j),E}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var E=document.createElement("canvas");E.width=E.height=1;var L=E.getContext("2d");if(!L)return!1;var F=L.getImageData(0,0,1,1);return F&&F.width===E.width}()?(m[w=b&&b.failIfMajorPerformanceCaveat]===void 0&&(m[w]=function(E){var L=function(j){var nt=document.createElement("canvas"),it=Object.create(h.webGLContextAttributes);return it.failIfMajorPerformanceCaveat=j,nt.probablySupportsContext?nt.probablySupportsContext("webgl",it)||nt.probablySupportsContext("experimental-webgl",it):nt.supportsContext?nt.supportsContext("webgl",it)||nt.supportsContext("experimental-webgl",it):nt.getContext("webgl",it)||nt.getContext("experimental-webgl",it)}(E);if(!L)return!1;var F=L.createShader(L.VERTEX_SHADER);return!(!F||L.isContextLost())&&(L.shaderSource(F,"void main() {}"),L.compileShader(F),L.getShaderParameter(F,L.COMPILE_STATUS)===!0)}(w)),m[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}l.exports?l.exports=h:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=h,window.mapboxgl.notSupportedReason=u);var m={};h.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),_={create:function(l,h,u){var m=o.window.document.createElement(l);return h!==void 0&&(m.className=h),u&&u.appendChild(m),m},createNS:function(l,h){return o.window.document.createElementNS(l,h)}},M=o.window.document&&o.window.document.documentElement.style;function T(l){if(!M)return l[0];for(var h=0;h<l.length;h++)if(l[h]in M)return l[h];return l[0]}var k,P=T(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);_.disableDrag=function(){M&&P&&(k=M[P],M[P]="none")},_.enableDrag=function(){M&&P&&(M[P]=k)};var O=T(["transform","WebkitTransform"]);_.setTransform=function(l,h){l.style[O]=h};var G=!1;try{var H=Object.defineProperty({},"passive",{get:function(){G=!0}});o.window.addEventListener("test",H,H),o.window.removeEventListener("test",H,H)}catch{G=!1}_.addEventListener=function(l,h,u,m){m===void 0&&(m={}),l.addEventListener(h,u,"passive"in m&&G?m:m.capture)},_.removeEventListener=function(l,h,u,m){m===void 0&&(m={}),l.removeEventListener(h,u,"passive"in m&&G?m:m.capture)};var X=function(l){l.preventDefault(),l.stopPropagation(),o.window.removeEventListener("click",X,!0)};function st(l){var h=l.userImage;return!!(h&&h.render&&h.render())&&(l.data.replace(new Uint8Array(h.data.buffer)),!0)}_.suppressClick=function(){o.window.addEventListener("click",X,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",X,!0)},0)},_.mousePos=function(l,h){var u=l.getBoundingClientRect();return new o.Point(h.clientX-u.left-l.clientLeft,h.clientY-u.top-l.clientTop)},_.touchPos=function(l,h){for(var u=l.getBoundingClientRect(),m=[],b=0;b<h.length;b++)m.push(new o.Point(h[b].clientX-u.left-l.clientLeft,h[b].clientY-u.top-l.clientTop));return m},_.mouseButton=function(l){return o.window.InstallTrigger!==void 0&&l.button===2&&l.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:l.button},_.remove=function(l){l.parentNode&&l.parentNode.removeChild(l)};var K=function(l){function h(){l.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.isLoaded=function(){return this.loaded},h.prototype.setLoaded=function(u){if(this.loaded!==u&&(this.loaded=u,u)){for(var m=0,b=this.requestors;m<b.length;m+=1){var w=b[m];this._notify(w.ids,w.callback)}this.requestors=[]}},h.prototype.getImage=function(u){return this.images[u]},h.prototype.addImage=function(u,m){this._validate(u,m)&&(this.images[u]=m)},h.prototype._validate=function(u,m){var b=!0;return this._validateStretch(m.stretchX,m.data&&m.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "stretchX" value'))),b=!1),this._validateStretch(m.stretchY,m.data&&m.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "stretchY" value'))),b=!1),this._validateContent(m.content,m)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "content" value'))),b=!1),b},h.prototype._validateStretch=function(u,m){if(!u)return!0;for(var b=0,w=0,E=u;w<E.length;w+=1){var L=E[w];if(L[0]<b||L[1]<L[0]||m<L[1])return!1;b=L[1]}return!0},h.prototype._validateContent=function(u,m){return!(u&&(u.length!==4||u[0]<0||m.data.width<u[0]||u[1]<0||m.data.height<u[1]||u[2]<0||m.data.width<u[2]||u[3]<0||m.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))},h.prototype.updateImage=function(u,m){m.version=this.images[u].version+1,this.images[u]=m,this.updatedImages[u]=!0},h.prototype.removeImage=function(u){var m=this.images[u];delete this.images[u],delete this.patterns[u],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()},h.prototype.listImages=function(){return Object.keys(this.images)},h.prototype.getImages=function(u,m){var b=!0;if(!this.isLoaded())for(var w=0,E=u;w<E.length;w+=1)this.images[E[w]]||(b=!1);this.isLoaded()||b?this._notify(u,m):this.requestors.push({ids:u,callback:m})},h.prototype._notify=function(u,m){for(var b={},w=0,E=u;w<E.length;w+=1){var L=E[w];this.images[L]||this.fire(new o.Event("styleimagemissing",{id:L}));var F=this.images[L];F?b[L]={data:F.data.clone(),pixelRatio:F.pixelRatio,sdf:F.sdf,version:F.version,stretchX:F.stretchX,stretchY:F.stretchY,content:F.content,hasRenderCallback:!!(F.userImage&&F.userImage.render)}:o.warnOnce('Image "'+L+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}m(null,b)},h.prototype.getPixelSize=function(){var u=this.atlasImage;return{width:u.width,height:u.height}},h.prototype.getPattern=function(u){var m=this.patterns[u],b=this.getImage(u);if(!b)return null;if(m&&m.position.version===b.version)return m.position;if(m)m.position.version=b.version;else{var w={w:b.data.width+2,h:b.data.height+2,x:0,y:0},E=new o.ImagePosition(w,b);this.patterns[u]={bin:w,position:E}}return this._updatePatternAtlas(),this.patterns[u].position},h.prototype.bind=function(u){var m=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(u,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)},h.prototype._updatePatternAtlas=function(){var u=[];for(var m in this.patterns)u.push(this.patterns[m].bin);var b=o.potpack(u),w=b.w,E=b.h,L=this.atlasImage;for(var F in L.resize({width:w||1,height:E||1}),this.patterns){var j=this.patterns[F].bin,nt=j.x+1,it=j.y+1,ot=this.images[F].data,vt=ot.width,ft=ot.height;o.RGBAImage.copy(ot,L,{x:0,y:0},{x:nt,y:it},{width:vt,height:ft}),o.RGBAImage.copy(ot,L,{x:0,y:ft-1},{x:nt,y:it-1},{width:vt,height:1}),o.RGBAImage.copy(ot,L,{x:0,y:0},{x:nt,y:it+ft},{width:vt,height:1}),o.RGBAImage.copy(ot,L,{x:vt-1,y:0},{x:nt-1,y:it},{width:1,height:ft}),o.RGBAImage.copy(ot,L,{x:0,y:0},{x:nt+vt,y:it},{width:1,height:ft})}this.dirty=!0},h.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},h.prototype.dispatchRenderCallbacks=function(u){for(var m=0,b=u;m<b.length;m+=1){var w=b[m];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var E=this.images[w];st(E)&&this.updateImage(w,E)}}},h}(o.Evented),et=It,xt=It,Nt=1e20;function It(l,h,u,m,b,w){this.fontSize=l||24,this.buffer=h===void 0?3:h,this.cutoff=m||.25,this.fontFamily=b||"sans-serif",this.fontWeight=w||"normal",this.radius=u||8;var E=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=E,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.d=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Int16Array(E),this.middle=Math.round(E/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function St(l,h,u,m,b,w,E){for(var L=0;L<h;L++){for(var F=0;F<u;F++)m[F]=l[F*h+L];for(Gt(m,b,w,E,u),F=0;F<u;F++)l[F*h+L]=b[F]}for(F=0;F<u;F++){for(L=0;L<h;L++)m[L]=l[F*h+L];for(Gt(m,b,w,E,h),L=0;L<h;L++)l[F*h+L]=Math.sqrt(b[L])}}function Gt(l,h,u,m,b){u[0]=0,m[0]=-Nt,m[1]=+Nt;for(var w=1,E=0;w<b;w++){for(var L=(l[w]+w*w-(l[u[E]]+u[E]*u[E]))/(2*w-2*u[E]);L<=m[E];)E--,L=(l[w]+w*w-(l[u[E]]+u[E]*u[E]))/(2*w-2*u[E]);u[++E]=w,m[E]=L,m[E+1]=+Nt}for(w=0,E=0;w<b;w++){for(;m[E+1]<w;)E++;h[w]=(w-u[E])*(w-u[E])+l[u[E]]}}It.prototype.draw=function(l){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(l,this.buffer,this.middle);for(var h=this.ctx.getImageData(0,0,this.size,this.size),u=new Uint8ClampedArray(this.size*this.size),m=0;m<this.size*this.size;m++){var b=h.data[4*m+3]/255;this.gridOuter[m]=b===1?0:b===0?Nt:Math.pow(Math.max(0,.5-b),2),this.gridInner[m]=b===1?Nt:b===0?0:Math.pow(Math.max(0,b-.5),2)}for(St(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),St(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),m=0;m<this.size*this.size;m++)u[m]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[m]-this.gridInner[m])/this.radius+this.cutoff))));return u},et.default=xt;var Dt=function(l,h){this.requestManager=l,this.localIdeographFontFamily=h,this.entries={}};Dt.prototype.setURL=function(l){this.url=l},Dt.prototype.getGlyphs=function(l,h){var u=this,m=[];for(var b in l)for(var w=0,E=l[b];w<E.length;w+=1)m.push({stack:b,id:E[w]});o.asyncAll(m,function(L,F){var j=L.stack,nt=L.id,it=u.entries[j];it||(it=u.entries[j]={glyphs:{},requests:{},ranges:{}});var ot=it.glyphs[nt];if(ot===void 0){if(ot=u._tinySDF(it,j,nt))return it.glyphs[nt]=ot,void F(null,{stack:j,id:nt,glyph:ot});var vt=Math.floor(nt/256);if(256*vt>65535)F(new Error("glyphs > 65535 not supported"));else if(it.ranges[vt])F(null,{stack:j,id:nt,glyph:ot});else{var ft=it.requests[vt];ft||(ft=it.requests[vt]=[],Dt.loadGlyphRange(j,vt,u.url,u.requestManager,function(wt,ht){if(ht){for(var Ct in ht)u._doesCharSupportLocalGlyph(+Ct)||(it.glyphs[+Ct]=ht[+Ct]);it.ranges[vt]=!0}for(var Lt=0,qt=ft;Lt<qt.length;Lt+=1)(0,qt[Lt])(wt,ht);delete it.requests[vt]})),ft.push(function(wt,ht){wt?F(wt):ht&&F(null,{stack:j,id:nt,glyph:ht[nt]||null})})}}else F(null,{stack:j,id:nt,glyph:ot})},function(L,F){if(L)h(L);else if(F){for(var j={},nt=0,it=F;nt<it.length;nt+=1){var ot=it[nt],vt=ot.stack,ft=ot.id,wt=ot.glyph;(j[vt]||(j[vt]={}))[ft]=wt&&{id:wt.id,bitmap:wt.bitmap.clone(),metrics:wt.metrics}}h(null,j)}})},Dt.prototype._doesCharSupportLocalGlyph=function(l){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](l)||o.isChar["Hangul Syllables"](l)||o.isChar.Hiragana(l)||o.isChar.Katakana(l))},Dt.prototype._tinySDF=function(l,h,u){var m=this.localIdeographFontFamily;if(m&&this._doesCharSupportLocalGlyph(u)){var b=l.tinySDF;if(!b){var w="400";/bold/i.test(h)?w="900":/medium/i.test(h)?w="500":/light/i.test(h)&&(w="200"),b=l.tinySDF=new Dt.TinySDF(24,3,8,.25,m,w)}return{id:u,bitmap:new o.AlphaImage({width:30,height:30},b.draw(String.fromCharCode(u))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Dt.loadGlyphRange=function(l,h,u,m,b){var w=256*h,E=w+255,L=m.transformRequest(m.normalizeGlyphsURL(u).replace("{fontstack}",l).replace("{range}",w+"-"+E),o.ResourceType.Glyphs);o.getArrayBuffer(L,function(F,j){if(F)b(F);else if(j){for(var nt={},it=0,ot=o.parseGlyphPBF(j);it<ot.length;it+=1){var vt=ot[it];nt[vt.id]=vt}b(null,nt)}})},Dt.TinySDF=et;var Qt=function(){this.specification=o.styleSpec.light.position};Qt.prototype.possiblyEvaluate=function(l,h){return o.sphericalToCartesian(l.expression.evaluate(h))},Qt.prototype.interpolate=function(l,h,u){return{x:o.number(l.x,h.x,u),y:o.number(l.y,h.y,u),z:o.number(l.z,h.z,u)}};var jt=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new Qt,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),Vt=function(l){function h(u){l.call(this),this._transitionable=new o.Transitionable(jt),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getLight=function(){return this._transitionable.serialize()},h.prototype.setLight=function(u,m){if(m===void 0&&(m={}),!this._validate(o.validateLight,u,m))for(var b in u){var w=u[b];o.endsWith(b,"-transition")?this._transitionable.setTransition(b.slice(0,-11),w):this._transitionable.setValue(b,w)}},h.prototype.updateTransitions=function(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)},h.prototype.hasTransition=function(){return this._transitioning.hasTransition()},h.prototype.recalculate=function(u){this.properties=this._transitioning.possiblyEvaluate(u)},h.prototype._validate=function(u,m,b){return(!b||b.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},h}(o.Evented),Bt=function(l,h){this.width=l,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Bt.prototype.getDash=function(l,h){var u=l.join(",")+String(h);return this.dashEntry[u]||(this.dashEntry[u]=this.addDash(l,h)),this.dashEntry[u]},Bt.prototype.getDashRanges=function(l,h,u){var m=[],b=l.length%2==1?-l[l.length-1]*u:0,w=l[0]*u,E=!0;m.push({left:b,right:w,isDash:E,zeroLength:l[0]===0});for(var L=l[0],F=1;F<l.length;F++){var j=l[F];m.push({left:b=L*u,right:w=(L+=j)*u,isDash:E=!E,zeroLength:j===0})}return m},Bt.prototype.addRoundDash=function(l,h,u){for(var m=h/2,b=-u;b<=u;b++)for(var w=this.width*(this.nextRow+u+b),E=0,L=l[E],F=0;F<this.width;F++){F/L.right>1&&(L=l[++E]);var j=Math.abs(F-L.left),nt=Math.abs(F-L.right),it=Math.min(j,nt),ot=void 0,vt=b/u*(m+1);if(L.isDash){var ft=m-Math.abs(vt);ot=Math.sqrt(it*it+ft*ft)}else ot=m-Math.sqrt(it*it+vt*vt);this.data[w+F]=Math.max(0,Math.min(255,ot+128))}},Bt.prototype.addRegularDash=function(l){for(var h=l.length-1;h>=0;--h){var u=l[h],m=l[h+1];u.zeroLength?l.splice(h,1):m&&m.isDash===u.isDash&&(m.left=u.left,l.splice(h,1))}var b=l[0],w=l[l.length-1];b.isDash===w.isDash&&(b.left=w.left-this.width,w.right=b.right+this.width);for(var E=this.width*this.nextRow,L=0,F=l[L],j=0;j<this.width;j++){j/F.right>1&&(F=l[++L]);var nt=Math.abs(j-F.left),it=Math.abs(j-F.right),ot=Math.min(nt,it);this.data[E+j]=Math.max(0,Math.min(255,(F.isDash?ot:-ot)+128))}},Bt.prototype.addDash=function(l,h){var u=h?7:0,m=2*u+1;if(this.nextRow+m>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var b=0,w=0;w<l.length;w++)b+=l[w];if(b!==0){var E=this.width/b,L=this.getDashRanges(l,this.width,E);h?this.addRoundDash(L,E,u):this.addRegularDash(L)}var F={y:(this.nextRow+u+.5)/this.height,height:2*u/this.height,width:b};return this.nextRow+=m,this.dirty=!0,F},Bt.prototype.bind=function(l){var h=l.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))};var de=function l(h,u){this.workerPool=h,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var m=this.workerPool.acquire(this.id),b=0;b<m.length;b++){var w=new l.Actor(m[b],u,this.id);w.name="Worker "+b,this.actors.push(w)}};function An(l,h,u){var m=function(b,w){if(b)return u(b);if(w){var E=o.pick(o.extend(w,l),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(E.vectorLayers=w.vector_layers,E.vectorLayerIds=E.vectorLayers.map(function(L){return L.id})),E.tiles=h.canonicalizeTileset(E,l.url),u(null,E)}};return l.url?o.getJSON(h.transformRequest(h.normalizeSourceURL(l.url),o.ResourceType.Source),m):o.browser.frame(function(){return m(null,l)})}de.prototype.broadcast=function(l,h,u){o.asyncAll(this.actors,function(m,b){m.send(l,h,b)},u=u||function(){})},de.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},de.prototype.remove=function(){this.actors.forEach(function(l){l.remove()}),this.actors=[],this.workerPool.release(this.id)},de.Actor=o.Actor;var _e=function(l,h,u){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=h||0,this.maxzoom=u||24};_e.prototype.validateBounds=function(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]},_e.prototype.contains=function(l){var h=Math.pow(2,l.z),u=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*h),m=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*h),b=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*h),w=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*h);return l.x>=u&&l.x<b&&l.y>=m&&l.y<w};var He=function(l){function h(u,m,b,w){if(l.call(this),this.id=u,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(m,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.load=function(){var u=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=An(this._options,this.map._requestManager,function(m,b){u._tileJSONRequest=null,u._loaded=!0,m?u.fire(new o.ErrorEvent(m)):b&&(o.extend(u,b),b.bounds&&(u.tileBounds=new _e(b.bounds,u.minzoom,u.maxzoom)),o.postTurnstileEvent(b.tiles,u.map._requestManager._customAccessToken),o.postMapLoadEvent(b.tiles,u.map._getMapId(),u.map._requestManager._skuToken,u.map._requestManager._customAccessToken),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},h.prototype.loaded=function(){return this._loaded},h.prototype.hasTile=function(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)},h.prototype.onAdd=function(u){this.map=u,this.load()},h.prototype.setSourceProperty=function(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},h.prototype.setTiles=function(u){var m=this;return this.setSourceProperty(function(){m._options.tiles=u}),this},h.prototype.setUrl=function(u){var m=this;return this.setSourceProperty(function(){m.url=u,m._options.url=u}),this},h.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},h.prototype.serialize=function(){return o.extend({},this._options)},h.prototype.loadTile=function(u,m){var b=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(b,o.ResourceType.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(L,F){return delete u.request,u.aborted?m(null):L&&L.status!==404?m(L):(F&&F.resourceTiming&&(u.resourceTiming=F.resourceTiming),this.map._refreshExpiredTiles&&F&&u.setExpiryData(F),u.loadVectorData(F,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),m(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired"?u.state==="loading"?u.reloadCallback=m:u.request=u.actor.send("reloadTile",w,E.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",w,E.bind(this)))},h.prototype.abortTile=function(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)},h.prototype.unloadTile=function(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)},h.prototype.hasTransition=function(){return!1},h}(o.Evented),Ue=function(l){function h(u,m,b,w){l.call(this),this.id=u,this.dispatcher=b,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},m),o.extend(this,o.pick(m,["url","scheme","tileSize"]))}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.load=function(){var u=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=An(this._options,this.map._requestManager,function(m,b){u._tileJSONRequest=null,u._loaded=!0,m?u.fire(new o.ErrorEvent(m)):b&&(o.extend(u,b),b.bounds&&(u.tileBounds=new _e(b.bounds,u.minzoom,u.maxzoom)),o.postTurnstileEvent(b.tiles),o.postMapLoadEvent(b.tiles,u.map._getMapId(),u.map._requestManager._skuToken),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},h.prototype.loaded=function(){return this._loaded},h.prototype.onAdd=function(u){this.map=u,this.load()},h.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},h.prototype.serialize=function(){return o.extend({},this._options)},h.prototype.hasTile=function(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)},h.prototype.loadTile=function(u,m){var b=this,w=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);u.request=o.getImage(this.map._requestManager.transformRequest(w,o.ResourceType.Tile),function(E,L){if(delete u.request,u.aborted)u.state="unloaded",m(null);else if(E)u.state="errored",m(E);else if(L){b.map._refreshExpiredTiles&&u.setExpiryData(L),delete L.cacheControl,delete L.expires;var F=b.map.painter.context,j=F.gl;u.texture=b.map.painter.getTileTexture(L.width),u.texture?u.texture.update(L,{useMipmap:!0}):(u.texture=new o.Texture(F,L,j.RGBA,{useMipmap:!0}),u.texture.bind(j.LINEAR,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),F.extTextureFilterAnisotropic&&j.texParameterf(j.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax)),u.state="loaded",o.cacheEntryPossiblyAdded(b.dispatcher),m(null)}})},h.prototype.abortTile=function(u,m){u.request&&(u.request.cancel(),delete u.request),m()},h.prototype.unloadTile=function(u,m){u.texture&&this.map.painter.saveTileTexture(u.texture),m()},h.prototype.hasTransition=function(){return!1},h}(o.Evented),ki=function(l){function h(u,m,b,w){l.call(this,u,m,b,w),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox"}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},h.prototype.loadTile=function(u,m){var b=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(E,L){E&&(u.state="errored",m(E)),L&&(u.dem=L,u.needsHillshadePrepare=!0,u.state="loaded",m(null))}u.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),(function(E,L){if(delete u.request,u.aborted)u.state="unloaded",m(null);else if(E)u.state="errored",m(E);else if(L){this.map._refreshExpiredTiles&&u.setExpiryData(L),delete L.cacheControl,delete L.expires;var F=o.window.ImageBitmap&&L instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?L:o.browser.getImageData(L,1),j={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:F,encoding:this.encoding};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",j,w.bind(this)))}}).bind(this)),u.neighboringTiles=this._getNeighboringTiles(u.tileID)},h.prototype._getNeighboringTiles=function(u){var m=u.canonical,b=Math.pow(2,m.z),w=(m.x-1+b)%b,E=m.x===0?u.wrap-1:u.wrap,L=(m.x+1+b)%b,F=m.x+1===b?u.wrap+1:u.wrap,j={};return j[new o.OverscaledTileID(u.overscaledZ,E,m.z,w,m.y).key]={backfilled:!1},j[new o.OverscaledTileID(u.overscaledZ,F,m.z,L,m.y).key]={backfilled:!1},m.y>0&&(j[new o.OverscaledTileID(u.overscaledZ,E,m.z,w,m.y-1).key]={backfilled:!1},j[new o.OverscaledTileID(u.overscaledZ,u.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},j[new o.OverscaledTileID(u.overscaledZ,F,m.z,L,m.y-1).key]={backfilled:!1}),m.y+1<b&&(j[new o.OverscaledTileID(u.overscaledZ,E,m.z,w,m.y+1).key]={backfilled:!1},j[new o.OverscaledTileID(u.overscaledZ,u.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},j[new o.OverscaledTileID(u.overscaledZ,F,m.z,L,m.y+1).key]={backfilled:!1}),j},h.prototype.unloadTile=function(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})},h}(Ue),oi=function(l){function h(u,m,b,w){l.call(this),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=b.getActor(),this.setEventedParent(w),this._data=m.data,this._options=o.extend({},m),this._collectResourceTiming=m.collectResourceTiming,this._resourceTiming=[],m.maxzoom!==void 0&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId;var E=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:(m.buffer!==void 0?m.buffer:128)*E,tolerance:(m.tolerance!==void 0?m.tolerance:.375)*E,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:m.clusterMaxZoom!==void 0?Math.min(m.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,m.clusterMinPoints||2),extent:o.EXTENT,radius:(m.clusterRadius||50)*E,log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.load=function(){var u=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)u.fire(new o.ErrorEvent(m));else{var b={dataType:"source",sourceDataType:"metadata"};u._collectResourceTiming&&u._resourceTiming&&u._resourceTiming.length>0&&(b.resourceTiming=u._resourceTiming,u._resourceTiming=[]),u.fire(new o.Event("data",b))}})},h.prototype.onAdd=function(u){this.map=u,this.load()},h.prototype.setData=function(u){var m=this;return this._data=u,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(b){if(b)m.fire(new o.ErrorEvent(b));else{var w={dataType:"source",sourceDataType:"content"};m._collectResourceTiming&&m._resourceTiming&&m._resourceTiming.length>0&&(w.resourceTiming=m._resourceTiming,m._resourceTiming=[]),m.fire(new o.Event("data",w))}}),this},h.prototype.getClusterExpansionZoom=function(u,m){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},m),this},h.prototype.getClusterChildren=function(u,m){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},m),this},h.prototype.getClusterLeaves=function(u,m,b,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:m,offset:b},w),this},h.prototype._updateWorkerData=function(u){var m=this;this._loaded=!1;var b=o.extend({},this.workerOptions),w=this._data;typeof w=="string"?(b.request=this.map._requestManager.transformRequest(o.browser.resolveURL(w),o.ResourceType.Source),b.request.collectResourceTiming=this._collectResourceTiming):b.data=JSON.stringify(w),this.actor.send(this.type+".loadData",b,function(E,L){m._removed||L&&L.abandoned||(m._loaded=!0,L&&L.resourceTiming&&L.resourceTiming[m.id]&&(m._resourceTiming=L.resourceTiming[m.id].slice(0)),m.actor.send(m.type+".coalesce",{source:b.source},null),u(E))})},h.prototype.loaded=function(){return this._loaded},h.prototype.loadTile=function(u,m){var b=this,w=u.actor?"reloadTile":"loadTile";u.actor=this.actor,u.request=this.actor.send(w,{type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(E,L){return delete u.request,u.unloadVectorData(),u.aborted?m(null):E?m(E):(u.loadVectorData(L,b.map.painter,w==="reloadTile"),m(null))})},h.prototype.abortTile=function(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0},h.prototype.unloadTile=function(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})},h.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},h.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},h.prototype.hasTransition=function(){return!1},h}(o.Evented),Vn=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),gn=function(l){function h(u,m,b,w){l.call(this),this.id=u,this.dispatcher=b,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=m}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.load=function(u,m){var b=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(w,E){b._loaded=!0,w?b.fire(new o.ErrorEvent(w)):E&&(b.image=E,u&&(b.coordinates=u),m&&m(),b._finishLoading())})},h.prototype.loaded=function(){return this._loaded},h.prototype.updateImage=function(u){var m=this;return this.image&&u.url?(this.options.url=u.url,this.load(u.coordinates,function(){m.texture=null}),this):this},h.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},h.prototype.onAdd=function(u){this.map=u,this.load()},h.prototype.setCoordinates=function(u){var m=this;this.coordinates=u;var b=u.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(E){for(var L=1/0,F=1/0,j=-1/0,nt=-1/0,it=0,ot=E;it<ot.length;it+=1){var vt=ot[it];L=Math.min(L,vt.x),F=Math.min(F,vt.y),j=Math.max(j,vt.x),nt=Math.max(nt,vt.y)}var ft=Math.max(j-L,nt-F),wt=Math.max(0,Math.floor(-Math.log(ft)/Math.LN2)),ht=Math.pow(2,wt);return new o.CanonicalTileID(wt,Math.floor((L+j)/2*ht),Math.floor((F+nt)/2*ht))}(b),this.minzoom=this.maxzoom=this.tileID.z;var w=b.map(function(E){return m.tileID.getTilePoint(E)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},h.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var u=this.map.painter.context,m=u.gl;for(var b in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Vn.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(u,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},h.prototype.loadTile=function(u,m){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},m(null)):(u.state="errored",m(null))},h.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},h.prototype.hasTransition=function(){return!1},h}(o.Evented),Qn=function(l){function h(u,m,b,w){l.call(this,u,m,b,w),this.roundZoom=!0,this.type="video",this.options=m}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.load=function(){var u=this;this._loaded=!1;var m=this.options;this.urls=[];for(var b=0,w=m.urls;b<w.length;b+=1)this.urls.push(this.map._requestManager.transformRequest(w[b],o.ResourceType.Source).url);o.getVideo(this.urls,function(E,L){u._loaded=!0,E?u.fire(new o.ErrorEvent(E)):L&&(u.video=L,u.video.loop=!0,u.video.setAttribute("playsinline",""),u.video.addEventListener("playing",function(){u.map.triggerRepaint()}),u.map&&u.video.play(),u._finishLoading())})},h.prototype.pause=function(){this.video&&this.video.pause()},h.prototype.play=function(){this.video&&this.video.play()},h.prototype.seek=function(u){if(this.video){var m=this.video.seekable;u<m.start(0)||u>m.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+m.start(0)+" and "+m.end(0)+"-second mark."))):this.video.currentTime=u}},h.prototype.getVideo=function(){return this.video},h.prototype.onAdd=function(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},h.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var u=this.map.painter.context,m=u.gl;for(var b in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Vn.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.texSubImage2D(m.TEXTURE_2D,0,0,0,m.RGBA,m.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(u,this.video,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},h.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},h.prototype.hasTransition=function(){return this.video&&!this.video.paused},h}(gn),Pi=function(l){function h(u,m,b,w){l.call(this,u,m,b,w),m.coordinates?Array.isArray(m.coordinates)&&m.coordinates.length===4&&!m.coordinates.some(function(E){return!Array.isArray(E)||E.length!==2||E.some(function(L){return typeof L!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'missing required property "coordinates"'))),m.animate&&typeof m.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'optional "animate" property must be a boolean value'))),m.canvas?typeof m.canvas=="string"||m.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'missing required property "canvas"'))),this.options=m,this.animate=m.animate===void 0||m.animate}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},h.prototype.getCanvas=function(){return this.canvas},h.prototype.onAdd=function(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()},h.prototype.onRemove=function(){this.pause()},h.prototype.prepare=function(){var u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var m=this.map.painter.context,b=m.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,Vn.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(m,this.canvas,b.RGBA,{premultiply:!0}),this.tiles){var E=this.tiles[w];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},h.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},h.prototype.hasTransition=function(){return this._playing},h.prototype._hasInvalidDimensions=function(){for(var u=0,m=[this.canvas.width,this.canvas.height];u<m.length;u+=1){var b=m[u];if(isNaN(b)||b<=0)return!0}return!1},h}(gn),ci={vector:He,raster:Ue,"raster-dem":ki,geojson:oi,video:Qn,image:gn,canvas:Pi};function Ai(l,h){var u=o.identity([]);return o.translate(u,u,[1,1,0]),o.scale(u,u,[.5*l.width,.5*l.height,1]),o.multiply(u,u,l.calculatePosMatrix(h.toUnwrapped()))}function ue(l,h,u,m,b,w){var E=function(wt,ht,Ct){if(wt)for(var Lt=0,qt=wt;Lt<qt.length;Lt+=1){var ie=ht[qt[Lt]];if(ie&&ie.source===Ct&&ie.type==="fill-extrusion")return!0}else for(var ee in ht){var oe=ht[ee];if(oe.source===Ct&&oe.type==="fill-extrusion")return!0}return!1}(b&&b.layers,h,l.id),L=w.maxPitchScaleFactor(),F=l.tilesIn(m,L,E);F.sort(Qe);for(var j=[],nt=0,it=F;nt<it.length;nt+=1){var ot=it[nt];j.push({wrappedTileID:ot.tileID.wrapped().key,queryResults:ot.tile.queryRenderedFeatures(h,u,l._state,ot.queryGeometry,ot.cameraQueryGeometry,ot.scale,b,w,L,Ai(l.transform,ot.tileID))})}var vt=function(wt){for(var ht={},Ct={},Lt=0,qt=wt;Lt<qt.length;Lt+=1){var ie=qt[Lt],ee=ie.queryResults,oe=ie.wrappedTileID,ve=Ct[oe]=Ct[oe]||{};for(var Ce in ee)for(var Pe=ee[Ce],We=ve[Ce]=ve[Ce]||{},hn=ht[Ce]=ht[Ce]||[],Tn=0,En=Pe;Tn<En.length;Tn+=1){var Oi=En[Tn];We[Oi.featureIndex]||(We[Oi.featureIndex]=!0,hn.push(Oi))}}return ht}(j);for(var ft in vt)vt[ft].forEach(function(wt){var ht=wt.feature,Ct=l.getFeatureState(ht.layer["source-layer"],ht.id);ht.source=ht.layer.source,ht.layer["source-layer"]&&(ht.sourceLayer=ht.layer["source-layer"]),ht.state=Ct});return vt}function Qe(l,h){var u=l.tileID,m=h.tileID;return u.overscaledZ-m.overscaledZ||u.canonical.y-m.canonical.y||u.wrap-m.wrap||u.canonical.x-m.canonical.x}var me=function(l,h){this.max=l,this.onRemove=h,this.reset()};me.prototype.reset=function(){for(var l in this.data)for(var h=0,u=this.data[l];h<u.length;h+=1){var m=u[h];m.timeout&&clearTimeout(m.timeout),this.onRemove(m.value)}return this.data={},this.order=[],this},me.prototype.add=function(l,h,u){var m=this,b=l.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);var w={value:h,timeout:void 0};if(u!==void 0&&(w.timeout=setTimeout(function(){m.remove(l,w)},u)),this.data[b].push(w),this.order.push(b),this.order.length>this.max){var E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this},me.prototype.has=function(l){return l.wrapped().key in this.data},me.prototype.getAndRemove=function(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null},me.prototype._getAndRemoveByKey=function(l){var h=this.data[l].shift();return h.timeout&&clearTimeout(h.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),h.value},me.prototype.getByKey=function(l){var h=this.data[l];return h?h[0].value:null},me.prototype.get=function(l){return this.has(l)?this.data[l.wrapped().key][0].value:null},me.prototype.remove=function(l,h){if(!this.has(l))return this;var u=l.wrapped().key,m=h===void 0?0:this.data[u].indexOf(h),b=this.data[u][m];return this.data[u].splice(m,1),b.timeout&&clearTimeout(b.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(b.value),this.order.splice(this.order.indexOf(u),1),this},me.prototype.setMaxSize=function(l){for(this.max=l;this.order.length>this.max;){var h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this},me.prototype.filter=function(l){var h=[];for(var u in this.data)for(var m=0,b=this.data[u];m<b.length;m+=1){var w=b[m];l(w.value)||h.push(w)}for(var E=0,L=h;E<L.length;E+=1){var F=L[E];this.remove(F.value.tileID,F)}};var Te=function(l,h,u){this.context=l;var m=l.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!u,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer};Te.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Te.prototype.updateData=function(l){var h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)},Te.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var wi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Li=function(l,h,u,m){this.length=h.length,this.attributes=u,this.itemSize=h.bytesPerElement,this.dynamicDraw=m,this.context=l;var b=l.gl;this.buffer=b.createBuffer(),l.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer};Li.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Li.prototype.updateData=function(l){var h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,l.arrayBuffer)},Li.prototype.enableAttributes=function(l,h){for(var u=0;u<this.attributes.length;u++){var m=h.attributes[this.attributes[u].name];m!==void 0&&l.enableVertexAttribArray(m)}},Li.prototype.setVertexAttribPointers=function(l,h,u){for(var m=0;m<this.attributes.length;m++){var b=this.attributes[m],w=h.attributes[b.name];w!==void 0&&l.vertexAttribPointer(w,b.components,l[wi[b.type]],!1,this.itemSize,b.offset+this.itemSize*(u||0))}},Li.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ut=function(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ut.prototype.get=function(){return this.current},ut.prototype.set=function(l){},ut.prototype.getDefault=function(){return this.default},ut.prototype.setDefault=function(){this.set(this.default)};var At=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return o.Color.transparent},h.prototype.set=function(u){var m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)},h}(ut),Jt=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return 1},h.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)},h}(ut),le=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return 0},h.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)},h}(ut),pe=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return[!0,!0,!0,!0]},h.prototype.set=function(u){var m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)},h}(ut),Be=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!0},h.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)},h}(ut),un=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return 255},h.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)},h}(ut),we=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},h.prototype.set=function(u){var m=this.current;(u.func!==m.func||u.ref!==m.ref||u.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)},h}(ut),De=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){var u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]},h.prototype.set=function(u){var m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)},h}(ut),Se=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(u){if(u!==this.current||this.dirty){var m=this.gl;u?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=u,this.dirty=!1}},h}(ut),en=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return[0,1]},h.prototype.set=function(u){var m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)},h}(ut),Cn=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(u){if(u!==this.current||this.dirty){var m=this.gl;u?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=u,this.dirty=!1}},h}(ut),In=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.LESS},h.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)},h}(ut),Pn=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(u){if(u!==this.current||this.dirty){var m=this.gl;u?m.enable(m.BLEND):m.disable(m.BLEND),this.current=u,this.dirty=!1}},h}(ut),Jn=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){var u=this.gl;return[u.ONE,u.ZERO]},h.prototype.set=function(u){var m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)},h}(ut),Di=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return o.Color.transparent},h.prototype.set=function(u){var m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)},h}(ut),Ci=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.FUNC_ADD},h.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)},h}(ut),or=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(u){if(u!==this.current||this.dirty){var m=this.gl;u?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=u,this.dirty=!1}},h}(ut),Gr=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.BACK},h.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)},h}(ut),Yo=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.CCW},h.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)},h}(ut),va=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)},h}(ut),Ra=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return this.gl.TEXTURE0},h.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)},h}(ut),qa=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){var u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]},h.prototype.set=function(u){var m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)},h}(ut),Ar=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(u){if(u!==this.current||this.dirty){var m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,u),this.current=u,this.dirty=!1}},h}(ut),So=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(u){if(u!==this.current||this.dirty){var m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,u),this.current=u,this.dirty=!1}},h}(ut),qs=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(u){if(u!==this.current||this.dirty){var m=this.gl;m.bindTexture(m.TEXTURE_2D,u),this.current=u,this.dirty=!1}},h}(ut),Ws=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(u){if(u!==this.current||this.dirty){var m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}},h}(ut),gl=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(u){var m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1},h}(ut),za=function(l){function h(u){l.call(this,u),this.vao=u.extVertexArrayObject}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h.prototype.set=function(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)},h}(ut),lo=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return 4},h.prototype.set=function(u){if(u!==this.current||this.dirty){var m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}},h}(ut),Zs=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(u){if(u!==this.current||this.dirty){var m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}},h}(ut),bu=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return!1},h.prototype.set=function(u){if(u!==this.current||this.dirty){var m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}},h}(ut),qr=function(l){function h(u,m){l.call(this,u),this.context=u,this.parent=m}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getDefault=function(){return null},h}(ut),U=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.setDirty=function(){this.dirty=!0},h.prototype.set=function(u){if(u!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}},h}(qr),W=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.set=function(u){if(u!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}},h}(qr),Q=function(l,h,u,m){this.context=l,this.width=h,this.height=u;var b=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new U(l,b),m&&(this.depthAttachment=new W(l,b))};Q.prototype.destroy=function(){var l=this.context.gl,h=this.colorAttachment.get();if(h&&l.deleteTexture(h),this.depthAttachment){var u=this.depthAttachment.get();u&&l.deleteRenderbuffer(u)}l.deleteFramebuffer(this.framebuffer)};var at=function(l,h,u){this.func=l,this.mask=h,this.range=u};at.ReadOnly=!1,at.ReadWrite=!0,at.disabled=new at(519,at.ReadOnly,[0,1]);var dt=function(l,h,u,m,b,w){this.test=l,this.ref=h,this.mask=u,this.fail=m,this.depthFail=b,this.pass=w};dt.disabled=new dt({func:519,mask:0},0,0,7680,7680,7680);var Tt=function(l,h,u){this.blendFunction=l,this.blendColor=h,this.mask=u};Tt.disabled=new Tt(Tt.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),Tt.unblended=new Tt(Tt.Replace,o.Color.transparent,[!0,!0,!0,!0]),Tt.alphaBlended=new Tt([1,771],o.Color.transparent,[!0,!0,!0,!0]);var Rt=function(l,h,u){this.enable=l,this.mode=h,this.frontFace=u};Rt.disabled=new Rt(!1,1029,2305),Rt.backCCW=new Rt(!0,1029,2305);var tt=function(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new At(this),this.clearDepth=new Jt(this),this.clearStencil=new le(this),this.colorMask=new pe(this),this.depthMask=new Be(this),this.stencilMask=new un(this),this.stencilFunc=new we(this),this.stencilOp=new De(this),this.stencilTest=new Se(this),this.depthRange=new en(this),this.depthTest=new Cn(this),this.depthFunc=new In(this),this.blend=new Pn(this),this.blendFunc=new Jn(this),this.blendColor=new Di(this),this.blendEquation=new Ci(this),this.cullFace=new or(this),this.cullFaceSide=new Gr(this),this.frontFace=new Yo(this),this.program=new va(this),this.activeTexture=new Ra(this),this.viewport=new qa(this),this.bindFramebuffer=new Ar(this),this.bindRenderbuffer=new So(this),this.bindTexture=new qs(this),this.bindVertexBuffer=new Ws(this),this.bindElementBuffer=new gl(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new za(this),this.pixelStoreUnpack=new lo(this),this.pixelStoreUnpackPremultiplyAlpha=new Zs(this),this.pixelStoreUnpackFlipY=new bu(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)};tt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},tt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},tt.prototype.createIndexBuffer=function(l,h){return new Te(this,l,h)},tt.prototype.createVertexBuffer=function(l,h,u){return new Li(this,l,h,u)},tt.prototype.createRenderbuffer=function(l,h,u){var m=this.gl,b=m.createRenderbuffer();return this.bindRenderbuffer.set(b),m.renderbufferStorage(m.RENDERBUFFER,l,h,u),this.bindRenderbuffer.set(null),b},tt.prototype.createFramebuffer=function(l,h,u){return new Q(this,l,h,u)},tt.prototype.clear=function(l){var h=l.color,u=l.depth,m=this.gl,b=0;h&&(b|=m.COLOR_BUFFER_BIT,this.clearColor.set(h),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(b|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),m.clear(b)},tt.prototype.setCullFace=function(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))},tt.prototype.setDepthMode=function(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)},tt.prototype.setStencilMode=function(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)},tt.prototype.setColorMode=function(l){o.deepEqual(l.blendFunction,Tt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)},tt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var yt=function(l){function h(u,m,b){var w=this;l.call(this),this.id=u,this.dispatcher=b,this.on("data",function(E){E.dataType==="source"&&E.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(E,L,F,j){var nt=new ci[L.type](E,L,F,j);if(nt.id!==E)throw new Error("Expected Source id to be "+E+" instead of "+nt.id);return o.bindAll(["load","abort","unload","serialize","prepare"],nt),nt}(u,m,b,this),this._tiles={},this._cache=new me(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.onAdd=function(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(u)},h.prototype.onRemove=function(u){this._source&&this._source.onRemove&&this._source.onRemove(u)},h.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var u in this._tiles){var m=this._tiles[u];if(m.state!=="loaded"&&m.state!=="errored")return!1}return!0},h.prototype.getSource=function(){return this._source},h.prototype.pause=function(){this._paused=!0},h.prototype.resume=function(){if(this._paused){var u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform)}},h.prototype._loadTile=function(u,m){return this._source.loadTile(u,m)},h.prototype._unloadTile=function(u){if(this._source.unloadTile)return this._source.unloadTile(u,function(){})},h.prototype._abortTile=function(u){if(this._source.abortTile)return this._source.abortTile(u,function(){})},h.prototype.serialize=function(){return this._source.serialize()},h.prototype.prepare=function(u){for(var m in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var b=this._tiles[m];b.upload(u),b.prepare(this.map.style.imageManager)}},h.prototype.getIds=function(){return o.values(this._tiles).map(function(u){return u.tileID}).sort(Zt).map(function(u){return u.key})},h.prototype.getRenderableIds=function(u){var m=this,b=[];for(var w in this._tiles)this._isIdRenderable(w,u)&&b.push(this._tiles[w]);return u?b.sort(function(E,L){var F=E.tileID,j=L.tileID,nt=new o.Point(F.canonical.x,F.canonical.y)._rotate(m.transform.angle),it=new o.Point(j.canonical.x,j.canonical.y)._rotate(m.transform.angle);return F.overscaledZ-j.overscaledZ||it.y-nt.y||it.x-nt.x}).map(function(E){return E.tileID.key}):b.map(function(E){return E.tileID}).sort(Zt).map(function(E){return E.key})},h.prototype.hasRenderableParent=function(u){var m=this.findLoadedParent(u,0);return!!m&&this._isIdRenderable(m.tileID.key)},h.prototype._isIdRenderable=function(u,m){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(m||!this._tiles[u].holdingForFade())},h.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var u in this._cache.reset(),this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")},h.prototype._reloadTile=function(u,m){var b=this._tiles[u];b&&(b.state!=="loading"&&(b.state=m),this._loadTile(b,this._tileLoaded.bind(this,b,u,m)))},h.prototype._tileLoaded=function(u,m,b,w){if(w)return u.state="errored",void(w.status!==404?this._source.fire(new o.ErrorEvent(w,{tile:u})):this.update(this.transform));u.timeAdded=o.browser.now(),b==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(m,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:u,coord:u.tileID}))},h.prototype._backfillDEM=function(u){for(var m=this.getRenderableIds(),b=0;b<m.length;b++){var w=m[b];if(u.neighboringTiles&&u.neighboringTiles[w]){var E=this.getTileByID(w);L(u,E),L(E,u)}}function L(F,j){F.needsHillshadePrepare=!0;var nt=j.tileID.canonical.x-F.tileID.canonical.x,it=j.tileID.canonical.y-F.tileID.canonical.y,ot=Math.pow(2,F.tileID.canonical.z),vt=j.tileID.key;nt===0&&it===0||Math.abs(it)>1||(Math.abs(nt)>1&&(Math.abs(nt+ot)===1?nt+=ot:Math.abs(nt-ot)===1&&(nt-=ot)),j.dem&&F.dem&&(F.dem.backfillBorder(j.dem,nt,it),F.neighboringTiles&&F.neighboringTiles[vt]&&(F.neighboringTiles[vt].backfilled=!0)))}},h.prototype.getTile=function(u){return this.getTileByID(u.key)},h.prototype.getTileByID=function(u){return this._tiles[u]},h.prototype._retainLoadedChildren=function(u,m,b,w){for(var E in this._tiles){var L=this._tiles[E];if(!(w[E]||!L.hasData()||L.tileID.overscaledZ<=m||L.tileID.overscaledZ>b)){for(var F=L.tileID;L&&L.tileID.overscaledZ>m+1;){var j=L.tileID.scaledTo(L.tileID.overscaledZ-1);(L=this._tiles[j.key])&&L.hasData()&&(F=j)}for(var nt=F;nt.overscaledZ>m;)if(u[(nt=nt.scaledTo(nt.overscaledZ-1)).key]){w[F.key]=F;break}}}},h.prototype.findLoadedParent=function(u,m){if(u.key in this._loadedParentTiles){var b=this._loadedParentTiles[u.key];return b&&b.tileID.overscaledZ>=m?b:null}for(var w=u.overscaledZ-1;w>=m;w--){var E=u.scaledTo(w),L=this._getLoadedTile(E);if(L)return L}},h.prototype._getLoadedTile=function(u){var m=this._tiles[u.key];return m&&m.hasData()?m:this._cache.getByKey(u.wrapped().key)},h.prototype.updateCacheSize=function(u){var m=Math.ceil(u.width/this._source.tileSize)+1,b=Math.ceil(u.height/this._source.tileSize)+1,w=Math.floor(m*b*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)},h.prototype.handleWrapJump=function(u){var m=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,m){var b={};for(var w in this._tiles){var E=this._tiles[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+m),b[E.tileID.key]=E}for(var L in this._tiles=b,this._timers)clearTimeout(this._timers[L]),delete this._timers[L];for(var F in this._tiles)this._setTileReloadTimer(F,this._tiles[F])}},h.prototype.update=function(u){var m=this;if(this.transform=u,this._sourceLoaded&&!this._paused){var b;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?b=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ve){return new o.OverscaledTileID(ve.canonical.z,ve.wrap,ve.canonical.z,ve.canonical.x,ve.canonical.y)}):(b=u.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(b=b.filter(function(ve){return m._source.hasTile(ve)}))):b=[];var w=u.coveringZoomLevel(this._source),E=Math.max(w-h.maxOverzooming,this._source.minzoom),L=Math.max(w+h.maxUnderzooming,this._source.minzoom),F=this._updateRetainedTiles(b,w);if(ge(this._source.type)){for(var j={},nt={},it=0,ot=Object.keys(F);it<ot.length;it+=1){var vt=ot[it],ft=F[vt],wt=this._tiles[vt];if(wt&&!(wt.fadeEndTime&&wt.fadeEndTime<=o.browser.now())){var ht=this.findLoadedParent(ft,E);ht&&(this._addTile(ht.tileID),j[ht.tileID.key]=ht.tileID),nt[vt]=ft}}for(var Ct in this._retainLoadedChildren(nt,w,L,F),j)F[Ct]||(this._coveredTiles[Ct]=!0,F[Ct]=j[Ct])}for(var Lt in F)this._tiles[Lt].clearFadeHold();for(var qt=0,ie=o.keysDifference(this._tiles,F);qt<ie.length;qt+=1){var ee=ie[qt],oe=this._tiles[ee];oe.hasSymbolBuckets&&!oe.holdingForFade()?oe.setHoldDuration(this.map._fadeDuration):oe.hasSymbolBuckets&&!oe.symbolFadeFinished()||this._removeTile(ee)}this._updateLoadedParentTileCache()}},h.prototype.releaseSymbolFadeTiles=function(){for(var u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)},h.prototype._updateRetainedTiles=function(u,m){for(var b={},w={},E=Math.max(m-h.maxOverzooming,this._source.minzoom),L=Math.max(m+h.maxUnderzooming,this._source.minzoom),F={},j=0,nt=u;j<nt.length;j+=1){var it=nt[j],ot=this._addTile(it);b[it.key]=it,ot.hasData()||m<this._source.maxzoom&&(F[it.key]=it)}this._retainLoadedChildren(F,m,L,b);for(var vt=0,ft=u;vt<ft.length;vt+=1){var wt=ft[vt],ht=this._tiles[wt.key];if(!ht.hasData()){if(m+1>this._source.maxzoom){var Ct=wt.children(this._source.maxzoom)[0],Lt=this.getTile(Ct);if(Lt&&Lt.hasData()){b[Ct.key]=Ct;continue}}else{var qt=wt.children(this._source.maxzoom);if(b[qt[0].key]&&b[qt[1].key]&&b[qt[2].key]&&b[qt[3].key])continue}for(var ie=ht.wasRequested(),ee=wt.overscaledZ-1;ee>=E;--ee){var oe=wt.scaledTo(ee);if(w[oe.key]||(w[oe.key]=!0,!(ht=this.getTile(oe))&&ie&&(ht=this._addTile(oe)),ht&&(b[oe.key]=oe,ie=ht.wasRequested(),ht.hasData())))break}}}return b},h.prototype._updateLoadedParentTileCache=function(){for(var u in this._loadedParentTiles={},this._tiles){for(var m=[],b=void 0,w=this._tiles[u].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){b=this._loadedParentTiles[w.key];break}m.push(w.key);var E=w.scaledTo(w.overscaledZ-1);if(b=this._getLoadedTile(E))break;w=E}for(var L=0,F=m;L<F.length;L+=1)this._loadedParentTiles[F[L]]=b}},h.prototype._addTile=function(u){var m=this._tiles[u.key];if(m)return m;(m=this._cache.getAndRemove(u))&&(this._setTileReloadTimer(u.key,m),m.tileID=u,this._state.initializeTileState(m,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,m)));var b=!!m;return b||(m=new o.Tile(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(m,this._tileLoaded.bind(this,m,u.key,m.state))),m?(m.uses++,this._tiles[u.key]=m,b||this._source.fire(new o.Event("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m):null},h.prototype._setTileReloadTimer=function(u,m){var b=this;u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);var w=m.getExpiryTimeout();w&&(this._timers[u]=setTimeout(function(){b._reloadTile(u,"expired"),delete b._timers[u]},w))},h.prototype._removeTile=function(u){var m=this._tiles[u];m&&(m.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),m.uses>0||(m.hasData()&&m.state!=="reloading"?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))},h.prototype.clearTiles=function(){for(var u in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(u);this._cache.reset()},h.prototype.tilesIn=function(u,m,b){var w=this,E=[],L=this.transform;if(!L)return E;for(var F=b?L.getCameraQueryGeometry(u):u,j=u.map(function(ee){return L.pointCoordinate(ee)}),nt=F.map(function(ee){return L.pointCoordinate(ee)}),it=this.getIds(),ot=1/0,vt=1/0,ft=-1/0,wt=-1/0,ht=0,Ct=nt;ht<Ct.length;ht+=1){var Lt=Ct[ht];ot=Math.min(ot,Lt.x),vt=Math.min(vt,Lt.y),ft=Math.max(ft,Lt.x),wt=Math.max(wt,Lt.y)}for(var qt=function(ee){var oe=w._tiles[it[ee]];if(!oe.holdingForFade()){var ve=oe.tileID,Ce=Math.pow(2,L.zoom-oe.tileID.overscaledZ),Pe=m*oe.queryPadding*o.EXTENT/oe.tileSize/Ce,We=[ve.getTilePoint(new o.MercatorCoordinate(ot,vt)),ve.getTilePoint(new o.MercatorCoordinate(ft,wt))];if(We[0].x-Pe<o.EXTENT&&We[0].y-Pe<o.EXTENT&&We[1].x+Pe>=0&&We[1].y+Pe>=0){var hn=j.map(function(En){return ve.getTilePoint(En)}),Tn=nt.map(function(En){return ve.getTilePoint(En)});E.push({tile:oe,tileID:ve,queryGeometry:hn,cameraQueryGeometry:Tn,scale:Ce})}}},ie=0;ie<it.length;ie++)qt(ie);return E},h.prototype.getVisibleCoordinates=function(u){for(var m=this,b=this.getRenderableIds(u).map(function(F){return m._tiles[F].tileID}),w=0,E=b;w<E.length;w+=1){var L=E[w];L.posMatrix=this.transform.calculatePosMatrix(L.toUnwrapped())}return b},h.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ge(this._source.type))for(var u in this._tiles){var m=this._tiles[u];if(m.fadeEndTime!==void 0&&m.fadeEndTime>=o.browser.now())return!0}return!1},h.prototype.setFeatureState=function(u,m,b){this._state.updateState(u=u||"_geojsonTileLayer",m,b)},h.prototype.removeFeatureState=function(u,m,b){this._state.removeFeatureState(u=u||"_geojsonTileLayer",m,b)},h.prototype.getFeatureState=function(u,m){return this._state.getState(u=u||"_geojsonTileLayer",m)},h.prototype.setDependencies=function(u,m,b){var w=this._tiles[u];w&&w.setDependencies(m,b)},h.prototype.reloadTilesForDependencies=function(u,m){for(var b in this._tiles)this._tiles[b].hasDependency(u,m)&&this._reloadTile(b,"reloading");this._cache.filter(function(w){return!w.hasDependency(u,m)})},h}(o.Evented);function Zt(l,h){var u=Math.abs(2*l.wrap)-+(l.wrap<0),m=Math.abs(2*h.wrap)-+(h.wrap<0);return l.overscaledZ-h.overscaledZ||m-u||h.canonical.y-l.canonical.y||h.canonical.x-l.canonical.x}function ge(l){return l==="raster"||l==="image"||l==="video"}function be(){return new o.window.Worker(Ds.workerUrl)}yt.maxOverzooming=10,yt.maxUnderzooming=3;var re="mapboxgl_preloaded_worker_pool",ye=function(){this.active={}};ye.prototype.acquire=function(l){if(!this.workers)for(this.workers=[];this.workers.length<ye.workerCount;)this.workers.push(new be);return this.active[l]=!0,this.workers.slice()},ye.prototype.release=function(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(function(h){h.terminate()}),this.workers=null)},ye.prototype.isPreloaded=function(){return!!this.active[re]},ye.prototype.numActive=function(){return Object.keys(this.active).length};var ln,an=Math.floor(o.browser.hardwareConcurrency/2);function ae(){return ln||(ln=new ye),ln}function Le(l,h){var u={};for(var m in l)m!=="ref"&&(u[m]=l[m]);return o.refProperties.forEach(function(b){b in h&&(u[b]=h[b])}),u}function Ve(l){l=l.slice();for(var h=Object.create(null),u=0;u<l.length;u++)h[l[u].id]=l[u];for(var m=0;m<l.length;m++)"ref"in l[m]&&(l[m]=Le(l[m],h[l[m].ref]));return l}ye.workerCount=Math.max(Math.min(an,6),1);var je={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ii(l,h,u){u.push({command:je.addSource,args:[l,h[l]]})}function Ye(l,h,u){h.push({command:je.removeSource,args:[l]}),u[l]=!0}function xi(l,h,u,m){Ye(l,u,m),ii(l,h,u)}function Ui(l,h,u){var m;for(m in l[u])if(l[u].hasOwnProperty(m)&&m!=="data"&&!o.deepEqual(l[u][m],h[u][m]))return!1;for(m in h[u])if(h[u].hasOwnProperty(m)&&m!=="data"&&!o.deepEqual(l[u][m],h[u][m]))return!1;return!0}function hi(l,h,u,m,b,w){var E;for(E in h=h||{},l=l||{})l.hasOwnProperty(E)&&(o.deepEqual(l[E],h[E])||u.push({command:w,args:[m,E,h[E],b]}));for(E in h)h.hasOwnProperty(E)&&!l.hasOwnProperty(E)&&(o.deepEqual(l[E],h[E])||u.push({command:w,args:[m,E,h[E],b]}))}function gi(l){return l.id}function vi(l,h){return l[h.id]=h,l}var To=function(l,h){this.reset(l,h)};To.prototype.reset=function(l,h){this.points=l||[],this._distances=[0];for(var u=1;u<this.points.length;u++)this._distances[u]=this._distances[u-1]+this.points[u].dist(this.points[u-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding},To.prototype.lerp=function(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);for(var h=1,u=this._distances[h],m=l*this.paddedLength+this.padding;u<m&&h<this._distances.length;)u=this._distances[++h];var b=h-1,w=this._distances[b],E=u-w,L=E>0?(m-w)/E:0;return this.points[b].mult(1-L).add(this.points[h].mult(L))};var qn=function(l,h,u){var m=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(l/u),this.yCellCount=Math.ceil(h/u);for(var w=0;w<this.xCellCount*this.yCellCount;w++)m.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=h,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0};function kr(l,h,u,m,b){var w=o.create();return h?(o.scale(w,w,[1/b,1/b,1]),u||o.rotateZ(w,w,m.angle)):o.multiply(w,m.labelPlaneMatrix,l),w}function Zi(l,h,u,m,b){if(h){var w=o.clone(l);return o.scale(w,w,[b,b,1]),u||o.rotateZ(w,w,-m.angle),w}return m.glCoordMatrix}function $n(l,h){var u=[l.x,l.y,0,1];Wr(u,u,h);var m=u[3];return{point:new o.Point(u[0]/m,u[1]/m),signedDistanceFromCamera:m}}function ai(l,h){return .5+l/h*.5}function ko(l,h){var u=l[0]/l[3],m=l[1]/l[3];return u>=-h[0]&&u<=h[0]&&m>=-h[1]&&m<=h[1]}function as(l,h,u,m,b,w,E,L){var F=m?l.textSizeData:l.iconSizeData,j=o.evaluateSizeForZoom(F,u.transform.zoom),nt=[256/u.width*2+1,256/u.height*2+1],it=m?l.text.dynamicLayoutVertexArray:l.icon.dynamicLayoutVertexArray;it.clear();for(var ot=l.lineVertexArray,vt=m?l.text.placedSymbolArray:l.icon.placedSymbolArray,ft=u.transform.width/u.transform.height,wt=!1,ht=0;ht<vt.length;ht++){var Ct=vt.get(ht);if(Ct.hidden||Ct.writingMode===o.WritingMode.vertical&&!wt)xo(Ct.numGlyphs,it);else{wt=!1;var Lt=[Ct.anchorX,Ct.anchorY,0,1];if(o.transformMat4(Lt,Lt,h),ko(Lt,nt)){var qt=ai(u.transform.cameraToCenterDistance,Lt[3]),ie=o.evaluateSizeForFeature(F,j,Ct),ee=E?ie/qt:ie*qt,oe=new o.Point(Ct.anchorX,Ct.anchorY),ve=$n(oe,b).point,Ce={},Pe=jc(Ct,ee,!1,L,h,b,w,l.glyphOffsetArray,ot,it,ve,oe,Ce,ft);wt=Pe.useVertical,(Pe.notEnoughRoom||wt||Pe.needsFlipping&&jc(Ct,ee,!0,L,h,b,w,l.glyphOffsetArray,ot,it,ve,oe,Ce,ft).notEnoughRoom)&&xo(Ct.numGlyphs,it)}else xo(Ct.numGlyphs,it)}}m?l.text.dynamicLayoutVertexBuffer.updateData(it):l.icon.dynamicLayoutVertexBuffer.updateData(it)}function Pr(l,h,u,m,b,w,E,L,F,j,nt){var it=L.glyphStartIndex+L.numGlyphs,ot=L.lineStartIndex,vt=L.lineStartIndex+L.lineLength,ft=h.getoffsetX(L.glyphStartIndex),wt=h.getoffsetX(it-1),ht=Lr(l*ft,u,m,b,w,E,L.segment,ot,vt,F,j,nt);if(!ht)return null;var Ct=Lr(l*wt,u,m,b,w,E,L.segment,ot,vt,F,j,nt);return Ct?{first:ht,last:Ct}:null}function Bo(l,h,u,m){return l===o.WritingMode.horizontal&&Math.abs(u.y-h.y)>Math.abs(u.x-h.x)*m?{useVertical:!0}:(l===o.WritingMode.vertical?h.y<u.y:h.x>u.x)?{needsFlipping:!0}:null}function jc(l,h,u,m,b,w,E,L,F,j,nt,it,ot,vt){var ft,wt=h/24,ht=l.lineOffsetX*wt,Ct=l.lineOffsetY*wt;if(l.numGlyphs>1){var Lt=l.glyphStartIndex+l.numGlyphs,qt=l.lineStartIndex,ie=l.lineStartIndex+l.lineLength,ee=Pr(wt,L,ht,Ct,u,nt,it,l,F,w,ot);if(!ee)return{notEnoughRoom:!0};var oe=$n(ee.first.point,E).point,ve=$n(ee.last.point,E).point;if(m&&!u){var Ce=Bo(l.writingMode,oe,ve,vt);if(Ce)return Ce}ft=[ee.first];for(var Pe=l.glyphStartIndex+1;Pe<Lt-1;Pe++)ft.push(Lr(wt*L.getoffsetX(Pe),ht,Ct,u,nt,it,l.segment,qt,ie,F,w,ot));ft.push(ee.last)}else{if(m&&!u){var We=$n(it,b).point,hn=l.lineStartIndex+l.segment+1,Tn=new o.Point(F.getx(hn),F.gety(hn)),En=$n(Tn,b),Oi=En.signedDistanceFromCamera>0?En.point:Au(it,Tn,We,1,b),tn=Bo(l.writingMode,We,Oi,vt);if(tn)return tn}var Dn=Lr(wt*L.getoffsetX(l.glyphStartIndex),ht,Ct,u,nt,it,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,F,w,ot);if(!Dn)return{notEnoughRoom:!0};ft=[Dn]}for(var ei=0,Hn=ft;ei<Hn.length;ei+=1){var Fn=Hn[ei];o.addDynamicAttributes(j,Fn.point,Fn.angle)}return{}}function Au(l,h,u,m,b){var w=$n(l.add(l.sub(h)._unit()),b).point,E=u.sub(w);return u.add(E._mult(m/E.mag()))}function Lr(l,h,u,m,b,w,E,L,F,j,nt,it){var ot=m?l-h:l+h,vt=ot>0?1:-1,ft=0;m&&(vt*=-1,ft=Math.PI),vt<0&&(ft+=Math.PI);for(var wt=vt>0?L+E:L+E+1,ht=b,Ct=b,Lt=0,qt=0,ie=Math.abs(ot),ee=[];Lt+qt<=ie;){if((wt+=vt)<L||wt>=F)return null;if(Ct=ht,ee.push(ht),(ht=it[wt])===void 0){var oe=new o.Point(j.getx(wt),j.gety(wt)),ve=$n(oe,nt);if(ve.signedDistanceFromCamera>0)ht=it[wt]=ve.point;else{var Ce=wt-vt;ht=Au(Lt===0?w:new o.Point(j.getx(Ce),j.gety(Ce)),oe,Ct,ie-Lt+1,nt)}}Lt+=qt,qt=Ct.dist(ht)}var Pe=(ie-Lt)/qt,We=ht.sub(Ct),hn=We.mult(Pe)._add(Ct);hn._add(We._unit()._perp()._mult(u*vt));var Tn=ft+Math.atan2(ht.y-Ct.y,ht.x-Ct.x);return ee.push(hn),{point:hn,angle:Tn,path:ee}}qn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},qn.prototype.insert=function(l,h,u,m,b){this._forEachCell(h,u,m,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(h),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(b)},qn.prototype.insertCircle=function(l,h,u,m){this._forEachCell(h-m,u-m,h+m,u+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(h),this.circles.push(u),this.circles.push(m)},qn.prototype._insertBoxCell=function(l,h,u,m,b,w){this.boxCells[b].push(w)},qn.prototype._insertCircleCell=function(l,h,u,m,b,w){this.circleCells[b].push(w)},qn.prototype._query=function(l,h,u,m,b,w){if(u<0||l>this.width||m<0||h>this.height)return!b&&[];var E=[];if(l<=0&&h<=0&&this.width<=u&&this.height<=m){if(b)return!0;for(var L=0;L<this.boxKeys.length;L++)E.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(var F=0;F<this.circleKeys.length;F++){var j=this.circles[3*F],nt=this.circles[3*F+1],it=this.circles[3*F+2];E.push({key:this.circleKeys[F],x1:j-it,y1:nt-it,x2:j+it,y2:nt+it})}return w?E.filter(w):E}return this._forEachCell(l,h,u,m,this._queryCell,E,{hitTest:b,seenUids:{box:{},circle:{}}},w),b?E.length>0:E},qn.prototype._queryCircle=function(l,h,u,m,b){var w=l-u,E=l+u,L=h-u,F=h+u;if(E<0||w>this.width||F<0||L>this.height)return!m&&[];var j=[];return this._forEachCell(w,L,E,F,this._queryCellCircle,j,{hitTest:m,circle:{x:l,y:h,radius:u},seenUids:{box:{},circle:{}}},b),m?j.length>0:j},qn.prototype.query=function(l,h,u,m,b){return this._query(l,h,u,m,!1,b)},qn.prototype.hitTest=function(l,h,u,m,b){return this._query(l,h,u,m,!0,b)},qn.prototype.hitTestCircle=function(l,h,u,m){return this._queryCircle(l,h,u,!0,m)},qn.prototype._queryCell=function(l,h,u,m,b,w,E,L){var F=E.seenUids,j=this.boxCells[b];if(j!==null)for(var nt=this.bboxes,it=0,ot=j;it<ot.length;it+=1){var vt=ot[it];if(!F.box[vt]){F.box[vt]=!0;var ft=4*vt;if(l<=nt[ft+2]&&h<=nt[ft+3]&&u>=nt[ft+0]&&m>=nt[ft+1]&&(!L||L(this.boxKeys[vt]))){if(E.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[vt],x1:nt[ft],y1:nt[ft+1],x2:nt[ft+2],y2:nt[ft+3]})}}}var wt=this.circleCells[b];if(wt!==null)for(var ht=this.circles,Ct=0,Lt=wt;Ct<Lt.length;Ct+=1){var qt=Lt[Ct];if(!F.circle[qt]){F.circle[qt]=!0;var ie=3*qt;if(this._circleAndRectCollide(ht[ie],ht[ie+1],ht[ie+2],l,h,u,m)&&(!L||L(this.circleKeys[qt]))){if(E.hitTest)return w.push(!0),!0;var ee=ht[ie],oe=ht[ie+1],ve=ht[ie+2];w.push({key:this.circleKeys[qt],x1:ee-ve,y1:oe-ve,x2:ee+ve,y2:oe+ve})}}}},qn.prototype._queryCellCircle=function(l,h,u,m,b,w,E,L){var F=E.circle,j=E.seenUids,nt=this.boxCells[b];if(nt!==null)for(var it=this.bboxes,ot=0,vt=nt;ot<vt.length;ot+=1){var ft=vt[ot];if(!j.box[ft]){j.box[ft]=!0;var wt=4*ft;if(this._circleAndRectCollide(F.x,F.y,F.radius,it[wt+0],it[wt+1],it[wt+2],it[wt+3])&&(!L||L(this.boxKeys[ft])))return w.push(!0),!0}}var ht=this.circleCells[b];if(ht!==null)for(var Ct=this.circles,Lt=0,qt=ht;Lt<qt.length;Lt+=1){var ie=qt[Lt];if(!j.circle[ie]){j.circle[ie]=!0;var ee=3*ie;if(this._circlesCollide(Ct[ee],Ct[ee+1],Ct[ee+2],F.x,F.y,F.radius)&&(!L||L(this.circleKeys[ie])))return w.push(!0),!0}}},qn.prototype._forEachCell=function(l,h,u,m,b,w,E,L){for(var F=this._convertToXCellCoord(l),j=this._convertToYCellCoord(h),nt=this._convertToXCellCoord(u),it=this._convertToYCellCoord(m),ot=F;ot<=nt;ot++)for(var vt=j;vt<=it;vt++)if(b.call(this,l,h,u,m,this.xCellCount*vt+ot,w,E,L))return},qn.prototype._convertToXCellCoord=function(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))},qn.prototype._convertToYCellCoord=function(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))},qn.prototype._circlesCollide=function(l,h,u,m,b,w){var E=m-l,L=b-h,F=u+w;return F*F>E*E+L*L},qn.prototype._circleAndRectCollide=function(l,h,u,m,b,w,E){var L=(w-m)/2,F=Math.abs(l-(m+L));if(F>L+u)return!1;var j=(E-b)/2,nt=Math.abs(h-(b+j));if(nt>j+u)return!1;if(F<=L||nt<=j)return!0;var it=F-L,ot=nt-j;return it*it+ot*ot<=u*u};var wu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function xo(l,h){for(var u=0;u<l;u++){var m=h.length;h.resize(m+4),h.float32.set(wu,3*m)}}function Wr(l,h,u){var m=h[0],b=h[1];return l[0]=u[0]*m+u[4]*b+u[12],l[1]=u[1]*m+u[5]*b+u[13],l[3]=u[3]*m+u[7]*b+u[15],l}var ya=function(l,h,u){h===void 0&&(h=new qn(l.width+200,l.height+200,25)),u===void 0&&(u=new qn(l.width+200,l.height+200,25)),this.transform=l,this.grid=h,this.ignoredGrid=u,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+100,this.screenBottomBoundary=l.height+100,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200};function gr(l,h,u){return h*(o.EXTENT/(l.tileSize*Math.pow(2,u-l.tileID.overscaledZ)))}ya.prototype.placeCollisionBox=function(l,h,u,m,b){var w=this.projectAndGetPerspectiveRatio(m,l.anchorPointX,l.anchorPointY),E=u*w.perspectiveRatio,L=l.x1*E+w.point.x,F=l.y1*E+w.point.y,j=l.x2*E+w.point.x,nt=l.y2*E+w.point.y;return!this.isInsideGrid(L,F,j,nt)||!h&&this.grid.hitTest(L,F,j,nt,b)?{box:[],offscreen:!1}:{box:[L,F,j,nt],offscreen:this.isOffscreen(L,F,j,nt)}},ya.prototype.placeCollisionCircles=function(l,h,u,m,b,w,E,L,F,j,nt,it,ot){var vt=[],ft=new o.Point(h.anchorX,h.anchorY),wt=$n(ft,w),ht=ai(this.transform.cameraToCenterDistance,wt.signedDistanceFromCamera),Ct=(j?b/ht:b*ht)/o.ONE_EM,Lt=$n(ft,E).point,qt=Pr(Ct,m,h.lineOffsetX*Ct,h.lineOffsetY*Ct,!1,Lt,ft,h,u,E,{}),ie=!1,ee=!1,oe=!0;if(qt){for(var ve=.5*it*ht+ot,Ce=new o.Point(-100,-100),Pe=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),We=new To,hn=qt.first,Tn=qt.last,En=[],Oi=hn.path.length-1;Oi>=1;Oi--)En.push(hn.path[Oi]);for(var tn=1;tn<Tn.path.length;tn++)En.push(Tn.path[tn]);var Dn=2.5*ve;if(L){var ei=En.map(function(Rs){return $n(Rs,L)});En=ei.some(function(Rs){return Rs.signedDistanceFromCamera<=0})?[]:ei.map(function(Rs){return Rs.point})}var Hn=[];if(En.length>0){for(var Fn=En[0].clone(),ni=En[0].clone(),Nn=1;Nn<En.length;Nn++)Fn.x=Math.min(Fn.x,En[Nn].x),Fn.y=Math.min(Fn.y,En[Nn].y),ni.x=Math.max(ni.x,En[Nn].x),ni.y=Math.max(ni.y,En[Nn].y);Hn=Fn.x>=Ce.x&&ni.x<=Pe.x&&Fn.y>=Ce.y&&ni.y<=Pe.y?[En]:ni.x<Ce.x||Fn.x>Pe.x||ni.y<Ce.y||Fn.y>Pe.y?[]:o.clipLine([En],Ce.x,Ce.y,Pe.x,Pe.y)}for(var mn=0,mo=Hn;mn<mo.length;mn+=1){var Yr;We.reset(mo[mn],.25*ve),Yr=We.length<=.5*ve?1:Math.ceil(We.paddedLength/Dn)+1;for(var Ur=0;Ur<Yr;Ur++){var wo=Ur/Math.max(Yr-1,1),Cr=We.lerp(wo),yr=Cr.x+100,Va=Cr.y+100;vt.push(yr,Va,ve,0);var mr=yr-ve,kl=Va-ve,Ua=yr+ve,il=Va+ve;if(oe=oe&&this.isOffscreen(mr,kl,Ua,il),ee=ee||this.isInsideGrid(mr,kl,Ua,il),!l&&this.grid.hitTestCircle(yr,Va,ve,nt)&&(ie=!0,!F))return{circles:[],offscreen:!1,collisionDetected:ie}}}}return{circles:!F&&ie||!ee?[]:vt,offscreen:oe,collisionDetected:ie}},ya.prototype.queryRenderedSymbols=function(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var h=[],u=1/0,m=1/0,b=-1/0,w=-1/0,E=0,L=l;E<L.length;E+=1){var F=L[E],j=new o.Point(F.x+100,F.y+100);u=Math.min(u,j.x),m=Math.min(m,j.y),b=Math.max(b,j.x),w=Math.max(w,j.y),h.push(j)}for(var nt={},it={},ot=0,vt=this.grid.query(u,m,b,w).concat(this.ignoredGrid.query(u,m,b,w));ot<vt.length;ot+=1){var ft=vt[ot],wt=ft.key;if(nt[wt.bucketInstanceId]===void 0&&(nt[wt.bucketInstanceId]={}),!nt[wt.bucketInstanceId][wt.featureIndex]){var ht=[new o.Point(ft.x1,ft.y1),new o.Point(ft.x2,ft.y1),new o.Point(ft.x2,ft.y2),new o.Point(ft.x1,ft.y2)];o.polygonIntersectsPolygon(h,ht)&&(nt[wt.bucketInstanceId][wt.featureIndex]=!0,it[wt.bucketInstanceId]===void 0&&(it[wt.bucketInstanceId]=[]),it[wt.bucketInstanceId].push(wt.featureIndex))}}return it},ya.prototype.insertCollisionBox=function(l,h,u,m,b){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:u,featureIndex:m,collisionGroupID:b},l[0],l[1],l[2],l[3])},ya.prototype.insertCollisionCircles=function(l,h,u,m,b){for(var w=h?this.ignoredGrid:this.grid,E={bucketInstanceId:u,featureIndex:m,collisionGroupID:b},L=0;L<l.length;L+=4)w.insertCircle(E,l[L],l[L+1],l[L+2])},ya.prototype.projectAndGetPerspectiveRatio=function(l,h,u){var m=[h,u,0,1];return Wr(m,m,l),{point:new o.Point((m[0]/m[3]+1)/2*this.transform.width+100,(-m[1]/m[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/m[3]*.5}},ya.prototype.isOffscreen=function(l,h,u,m){return u<100||l>=this.screenRightBoundary||m<100||h>this.screenBottomBoundary},ya.prototype.isInsideGrid=function(l,h,u,m){return u>=0&&l<this.gridRightBoundary&&m>=0&&h<this.gridBottomBoundary},ya.prototype.getViewportMatrix=function(){var l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l};var Wa=function(l,h,u,m){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?h:-h))):m&&u?1:0,this.placed=u};Wa.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var _a=function(l,h,u,m,b){this.text=new Wa(l?l.text:null,h,u,b),this.icon=new Wa(l?l.icon:null,h,m,b)};_a.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var $l=function(l,h,u){this.text=l,this.icon=h,this.skipFade=u},C=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},R=function(l,h,u,m,b){this.bucketInstanceId=l,this.featureIndex=h,this.sourceLayerIndex=u,this.bucketIndex=m,this.tileID=b},Y=function(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}};function gt(l,h,u,m,b){var w=o.getAnchorAlignment(l),E=-(w.horizontalAlign-.5)*h,L=-(w.verticalAlign-.5)*u,F=o.evaluateVariableOffset(l,m);return new o.Point(E+F[0]*b,L+F[1]*b)}function kt(l,h,u,m,b,w){var E=l.x1,L=l.x2,F=l.y1,j=l.y2,nt=l.anchorPointX,it=l.anchorPointY,ot=new o.Point(h,u);return m&&ot._rotate(b?w:-w),{x1:E+ot.x,y1:F+ot.y,x2:L+ot.x,y2:j+ot.y,anchorPointX:nt,anchorPointY:it}}Y.prototype.get=function(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){var h=++this.maxGroupID;this.collisionGroups[l]={ID:h,predicate:function(u){return u.collisionGroupID===h}}}return this.collisionGroups[l]};var Pt=function(l,h,u,m){this.transform=l.clone(),this.collisionIndex=new ya(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Y(u),this.collisionCircleArrays={},this.prevPlacement=m,m&&(m.prevPlacement=void 0),this.placedOrientations={}};function Ht(l,h,u,m,b){l.emplaceBack(h?1:0,u?1:0,m||0,b||0),l.emplaceBack(h?1:0,u?1:0,m||0,b||0),l.emplaceBack(h?1:0,u?1:0,m||0,b||0),l.emplaceBack(h?1:0,u?1:0,m||0,b||0)}Pt.prototype.getBucketParts=function(l,h,u,m){var b=u.getBucket(h),w=u.latestFeatureIndex;if(b&&w&&h.id===b.layerIds[0]){var E=u.collisionBoxArray,L=b.layers[0].layout,F=Math.pow(2,this.transform.zoom-u.tileID.overscaledZ),j=u.tileSize/o.EXTENT,nt=this.transform.calculatePosMatrix(u.tileID.toUnwrapped()),it=L.get("text-pitch-alignment")==="map",ot=L.get("text-rotation-alignment")==="map",vt=gr(u,1,this.transform.zoom),ft=kr(nt,it,ot,this.transform,vt),wt=null;if(it){var ht=Zi(nt,it,ot,this.transform,vt);wt=o.multiply([],this.transform.labelPlaneMatrix,ht)}this.retainedQueryData[b.bucketInstanceId]=new R(b.bucketInstanceId,w,b.sourceLayerIndex,b.index,u.tileID);var Ct={bucket:b,layout:L,posMatrix:nt,textLabelPlaneMatrix:ft,labelToScreenMatrix:wt,scale:F,textPixelRatio:j,holdingForFade:u.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(m)for(var Lt=0,qt=b.sortKeyRanges;Lt<qt.length;Lt+=1){var ie=qt[Lt];l.push({sortKey:ie.sortKey,symbolInstanceStart:ie.symbolInstanceStart,symbolInstanceEnd:ie.symbolInstanceEnd,parameters:Ct})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Ct})}},Pt.prototype.attemptAnchorPlacement=function(l,h,u,m,b,w,E,L,F,j,nt,it,ot,vt,ft){var wt,ht=[it.textOffset0,it.textOffset1],Ct=gt(l,u,m,ht,b),Lt=this.collisionIndex.placeCollisionBox(kt(h,Ct.x,Ct.y,w,E,this.transform.angle),nt,L,F,j.predicate);if(!ft||this.collisionIndex.placeCollisionBox(kt(ft,Ct.x,Ct.y,w,E,this.transform.angle),nt,L,F,j.predicate).box.length!==0)return Lt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[it.crossTileID]&&this.prevPlacement.placements[it.crossTileID]&&this.prevPlacement.placements[it.crossTileID].text&&(wt=this.prevPlacement.variableOffsets[it.crossTileID].anchor),this.variableOffsets[it.crossTileID]={textOffset:ht,width:u,height:m,anchor:l,textBoxScale:b,prevAnchor:wt},this.markUsedJustification(ot,l,it,vt),ot.allowVerticalPlacement&&(this.markUsedOrientation(ot,vt,it),this.placedOrientations[it.crossTileID]=vt),{shift:Ct,placedGlyphBoxes:Lt}):void 0},Pt.prototype.placeLayerBucketPart=function(l,h,u){var m=this,b=l.parameters,w=b.bucket,E=b.layout,L=b.posMatrix,F=b.textLabelPlaneMatrix,j=b.labelToScreenMatrix,nt=b.textPixelRatio,it=b.holdingForFade,ot=b.collisionBoxArray,vt=b.partiallyEvaluatedTextSize,ft=b.collisionGroup,wt=E.get("text-optional"),ht=E.get("icon-optional"),Ct=E.get("text-allow-overlap"),Lt=E.get("icon-allow-overlap"),qt=E.get("text-rotation-alignment")==="map",ie=E.get("text-pitch-alignment")==="map",ee=E.get("icon-text-fit")!=="none",oe=E.get("symbol-z-order")==="viewport-y",ve=Ct&&(Lt||!w.hasIconData()||ht),Ce=Lt&&(Ct||!w.hasTextData()||wt);!w.collisionArrays&&ot&&w.deserializeCollisionBoxes(ot);var Pe=function(tn,Dn){if(!h[tn.crossTileID])if(it)m.placements[tn.crossTileID]=new $l(!1,!1,!1);else{var ei,Hn=!1,Fn=!1,ni=!0,Nn=null,mn={box:null,offscreen:null},mo={box:null,offscreen:null},Yr=null,Ur=null,wo=0,Cr=0,yr=0;Dn.textFeatureIndex?wo=Dn.textFeatureIndex:tn.useRuntimeCollisionCircles&&(wo=tn.featureIndex),Dn.verticalTextFeatureIndex&&(Cr=Dn.verticalTextFeatureIndex);var Va=Dn.textBox;if(Va){var mr=function(Yi){var ps=o.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Yi&&m.prevPlacement){var Ca=m.prevPlacement.placedOrientations[tn.crossTileID];Ca&&(m.placedOrientations[tn.crossTileID]=Ca,m.markUsedOrientation(w,ps=Ca,tn))}return ps},kl=function(Yi,ps){if(w.allowVerticalPlacement&&tn.numVerticalGlyphVertices>0&&Dn.verticalTextBox)for(var Ca=0,ru=w.writingModes;Ca<ru.length&&(ru[Ca]===o.WritingMode.vertical?(mn=ps(),mo=mn):mn=Yi(),!(mn&&mn.box&&mn.box.length));Ca+=1);else mn=Yi()};if(E.get("text-variable-anchor")){var Ua=E.get("text-variable-anchor");if(m.prevPlacement&&m.prevPlacement.variableOffsets[tn.crossTileID]){var il=m.prevPlacement.variableOffsets[tn.crossTileID];Ua.indexOf(il.anchor)>0&&(Ua=Ua.filter(function(Yi){return Yi!==il.anchor})).unshift(il.anchor)}var Rs=function(Yi,ps,Ca){for(var ru=Yi.x2-Yi.x1,Xm=Yi.y2-Yi.y1,nh=tn.textBoxScale,_d=ee&&!Lt?ps:null,ih={box:[],offscreen:!1},Mp=Ct?2*Ua.length:Ua.length,ou=0;ou<Mp;++ou){var wf=m.attemptAnchorPlacement(Ua[ou%Ua.length],Yi,ru,Xm,nh,qt,ie,nt,L,ft,ou>=Ua.length,tn,w,Ca,_d);if(wf&&(ih=wf.placedGlyphBoxes)&&ih.box&&ih.box.length){Hn=!0,Nn=wf.shift;break}}return ih};kl(function(){return Rs(Va,Dn.iconBox,o.WritingMode.horizontal)},function(){var Yi=Dn.verticalTextBox;return w.allowVerticalPlacement&&!(mn&&mn.box&&mn.box.length)&&tn.numVerticalGlyphVertices>0&&Yi?Rs(Yi,Dn.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),mn&&(Hn=mn.box,ni=mn.offscreen);var _c=mr(mn&&mn.box);if(!Hn&&m.prevPlacement){var eh=m.prevPlacement.variableOffsets[tn.crossTileID];eh&&(m.variableOffsets[tn.crossTileID]=eh,m.markUsedJustification(w,eh.anchor,tn,_c))}}else{var zs=function(Yi,ps){var Ca=m.collisionIndex.placeCollisionBox(Yi,Ct,nt,L,ft.predicate);return Ca&&Ca.box&&Ca.box.length&&(m.markUsedOrientation(w,ps,tn),m.placedOrientations[tn.crossTileID]=ps),Ca};kl(function(){return zs(Va,o.WritingMode.horizontal)},function(){var Yi=Dn.verticalTextBox;return w.allowVerticalPlacement&&tn.numVerticalGlyphVertices>0&&Yi?zs(Yi,o.WritingMode.vertical):{box:null,offscreen:null}}),mr(mn&&mn.box&&mn.box.length)}}if(Hn=(ei=mn)&&ei.box&&ei.box.length>0,ni=ei&&ei.offscreen,tn.useRuntimeCollisionCircles){var xc=w.text.placedSymbolArray.get(tn.centerJustifiedTextSymbolIndex),Sh=o.evaluateSizeForFeature(w.textSizeData,vt,xc),Pl=E.get("text-padding");Yr=m.collisionIndex.placeCollisionCircles(Ct,xc,w.lineVertexArray,w.glyphOffsetArray,Sh,L,F,j,u,ie,ft.predicate,tn.collisionCircleDiameter,Pl),Hn=Ct||Yr.circles.length>0&&!Yr.collisionDetected,ni=ni&&Yr.offscreen}if(Dn.iconFeatureIndex&&(yr=Dn.iconFeatureIndex),Dn.iconBox){var nu=function(Yi){var ps=ee&&Nn?kt(Yi,Nn.x,Nn.y,qt,ie,m.transform.angle):Yi;return m.collisionIndex.placeCollisionBox(ps,Lt,nt,L,ft.predicate)};Fn=mo&&mo.box&&mo.box.length&&Dn.verticalIconBox?(Ur=nu(Dn.verticalIconBox)).box.length>0:(Ur=nu(Dn.iconBox)).box.length>0,ni=ni&&Ur.offscreen}var Ll=wt||tn.numHorizontalGlyphVertices===0&&tn.numVerticalGlyphVertices===0,Ro=ht||tn.numIconVertices===0;if(Ll||Ro?Ro?Ll||(Fn=Fn&&Hn):Hn=Fn&&Hn:Fn=Hn=Fn&&Hn,Hn&&ei&&ei.box&&m.collisionIndex.insertCollisionBox(ei.box,E.get("text-ignore-placement"),w.bucketInstanceId,mo&&mo.box&&Cr?Cr:wo,ft.ID),Fn&&Ur&&m.collisionIndex.insertCollisionBox(Ur.box,E.get("icon-ignore-placement"),w.bucketInstanceId,yr,ft.ID),Yr&&(Hn&&m.collisionIndex.insertCollisionCircles(Yr.circles,E.get("text-ignore-placement"),w.bucketInstanceId,wo,ft.ID),u)){var rl=w.bucketInstanceId,iu=m.collisionCircleArrays[rl];iu===void 0&&(iu=m.collisionCircleArrays[rl]=new C);for(var bc=0;bc<Yr.circles.length;bc+=4)iu.circles.push(Yr.circles[bc+0]),iu.circles.push(Yr.circles[bc+1]),iu.circles.push(Yr.circles[bc+2]),iu.circles.push(Yr.collisionDetected?1:0)}m.placements[tn.crossTileID]=new $l(Hn||ve,Fn||Ce,ni||w.justReloaded),h[tn.crossTileID]=!0}};if(oe)for(var We=w.getSortedSymbolIndexes(this.transform.angle),hn=We.length-1;hn>=0;--hn){var Tn=We[hn];Pe(w.symbolInstances.get(Tn),w.collisionArrays[Tn])}else for(var En=l.symbolInstanceStart;En<l.symbolInstanceEnd;En++)Pe(w.symbolInstances.get(En),w.collisionArrays[En]);if(u&&w.bucketInstanceId in this.collisionCircleArrays){var Oi=this.collisionCircleArrays[w.bucketInstanceId];o.invert(Oi.invProjMatrix,L),Oi.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},Pt.prototype.markUsedJustification=function(l,h,u,m){var b;b=m===o.WritingMode.vertical?u.verticalPlacedTextSymbolIndex:{left:u.leftJustifiedTextSymbolIndex,center:u.centerJustifiedTextSymbolIndex,right:u.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(h)];for(var w=0,E=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex,u.verticalPlacedTextSymbolIndex];w<E.length;w+=1){var L=E[w];L>=0&&(l.text.placedSymbolArray.get(L).crossTileID=b>=0&&L!==b?0:u.crossTileID)}},Pt.prototype.markUsedOrientation=function(l,h,u){for(var m=h===o.WritingMode.horizontal||h===o.WritingMode.horizontalOnly?h:0,b=h===o.WritingMode.vertical?h:0,w=0,E=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex];w<E.length;w+=1)l.text.placedSymbolArray.get(E[w]).placedOrientation=m;u.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).placedOrientation=b)},Pt.prototype.commit=function(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;var h=this.prevPlacement,u=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;var m=h?h.symbolFadeChange(l):1,b=h?h.opacities:{},w=h?h.variableOffsets:{},E=h?h.placedOrientations:{};for(var L in this.placements){var F=this.placements[L],j=b[L];j?(this.opacities[L]=new _a(j,m,F.text,F.icon),u=u||F.text!==j.text.placed||F.icon!==j.icon.placed):(this.opacities[L]=new _a(null,m,F.text,F.icon,F.skipFade),u=u||F.text||F.icon)}for(var nt in b){var it=b[nt];if(!this.opacities[nt]){var ot=new _a(it,m,!1,!1);ot.isHidden()||(this.opacities[nt]=ot,u=u||it.text.placed||it.icon.placed)}}for(var vt in w)this.variableOffsets[vt]||!this.opacities[vt]||this.opacities[vt].isHidden()||(this.variableOffsets[vt]=w[vt]);for(var ft in E)this.placedOrientations[ft]||!this.opacities[ft]||this.opacities[ft].isHidden()||(this.placedOrientations[ft]=E[ft]);u?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:l)},Pt.prototype.updateLayerOpacities=function(l,h){for(var u={},m=0,b=h;m<b.length;m+=1){var w=b[m],E=w.getBucket(l);E&&w.latestFeatureIndex&&l.id===E.layerIds[0]&&this.updateBucketOpacities(E,u,w.collisionBoxArray)}},Pt.prototype.updateBucketOpacities=function(l,h,u){var m=this;l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();var b=l.layers[0].layout,w=new _a(null,0,!1,!1,!0),E=b.get("text-allow-overlap"),L=b.get("icon-allow-overlap"),F=b.get("text-variable-anchor"),j=b.get("text-rotation-alignment")==="map",nt=b.get("text-pitch-alignment")==="map",it=b.get("icon-text-fit")!=="none",ot=new _a(null,0,E&&(L||!l.hasIconData()||b.get("icon-optional")),L&&(E||!l.hasTextData()||b.get("text-optional")),!0);!l.collisionArrays&&u&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(u);for(var vt=function(Ct,Lt,qt){for(var ie=0;ie<Lt/4;ie++)Ct.opacityVertexArray.emplaceBack(qt)},ft=function(Ct){var Lt=l.symbolInstances.get(Ct),qt=Lt.numHorizontalGlyphVertices,ie=Lt.numVerticalGlyphVertices,ee=Lt.crossTileID,oe=m.opacities[ee];h[ee]?oe=w:oe||(m.opacities[ee]=oe=ot),h[ee]=!0;var ve=Lt.numIconVertices>0,Ce=m.placedOrientations[Lt.crossTileID],Pe=Ce===o.WritingMode.vertical,We=Ce===o.WritingMode.horizontal||Ce===o.WritingMode.horizontalOnly;if(qt>0||ie>0){var hn=si(oe.text);vt(l.text,qt,Pe?wr:hn),vt(l.text,ie,We?wr:hn);var Tn=oe.text.isHidden();[Lt.rightJustifiedTextSymbolIndex,Lt.centerJustifiedTextSymbolIndex,Lt.leftJustifiedTextSymbolIndex].forEach(function(mn){mn>=0&&(l.text.placedSymbolArray.get(mn).hidden=Tn||Pe?1:0)}),Lt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(Lt.verticalPlacedTextSymbolIndex).hidden=Tn||We?1:0);var En=m.variableOffsets[Lt.crossTileID];En&&m.markUsedJustification(l,En.anchor,Lt,Ce);var Oi=m.placedOrientations[Lt.crossTileID];Oi&&(m.markUsedJustification(l,"left",Lt,Oi),m.markUsedOrientation(l,Oi,Lt))}if(ve){var tn=si(oe.icon),Dn=!(it&&Lt.verticalPlacedIconSymbolIndex&&Pe);Lt.placedIconSymbolIndex>=0&&(vt(l.icon,Lt.numIconVertices,Dn?tn:wr),l.icon.placedSymbolArray.get(Lt.placedIconSymbolIndex).hidden=oe.icon.isHidden()),Lt.verticalPlacedIconSymbolIndex>=0&&(vt(l.icon,Lt.numVerticalIconVertices,Dn?wr:tn),l.icon.placedSymbolArray.get(Lt.verticalPlacedIconSymbolIndex).hidden=oe.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){var ei=l.collisionArrays[Ct];if(ei){var Hn=new o.Point(0,0);if(ei.textBox||ei.verticalTextBox){var Fn=!0;if(F){var ni=m.variableOffsets[ee];ni?(Hn=gt(ni.anchor,ni.width,ni.height,ni.textOffset,ni.textBoxScale),j&&Hn._rotate(nt?m.transform.angle:-m.transform.angle)):Fn=!1}ei.textBox&&Ht(l.textCollisionBox.collisionVertexArray,oe.text.placed,!Fn||Pe,Hn.x,Hn.y),ei.verticalTextBox&&Ht(l.textCollisionBox.collisionVertexArray,oe.text.placed,!Fn||We,Hn.x,Hn.y)}var Nn=!!(!We&&ei.verticalIconBox);ei.iconBox&&Ht(l.iconCollisionBox.collisionVertexArray,oe.icon.placed,Nn,it?Hn.x:0,it?Hn.y:0),ei.verticalIconBox&&Ht(l.iconCollisionBox.collisionVertexArray,oe.icon.placed,!Nn,it?Hn.x:0,it?Hn.y:0)}}},wt=0;wt<l.symbolInstances.length;wt++)ft(wt);if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){var ht=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ht.invProjMatrix,l.placementViewportMatrix=ht.viewportMatrix,l.collisionCircleArray=ht.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}},Pt.prototype.symbolFadeChange=function(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Pt.prototype.zoomAdjustment=function(l){return Math.max(0,(this.transform.zoom-l)/1.5)},Pt.prototype.hasTransitions=function(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration},Pt.prototype.stillRecent=function(l,h){var u=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*u>l},Pt.prototype.setStale=function(){this.stale=!0};var ke=Math.pow(2,25),Ne=Math.pow(2,24),nn=Math.pow(2,17),sn=Math.pow(2,16),qe=Math.pow(2,9),ti=Math.pow(2,8),Nr=Math.pow(2,1);function si(l){if(l.opacity===0&&!l.placed)return 0;if(l.opacity===1&&l.placed)return 4294967295;var h=l.placed?1:0,u=Math.floor(127*l.opacity);return u*ke+h*Ne+u*nn+h*sn+u*qe+h*ti+u*Nr+h}var wr=0,xe=function(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};xe.prototype.continuePlacement=function(l,h,u,m,b){for(var w=this._bucketParts;this._currentTileIndex<l.length;)if(h.getBucketParts(w,m,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(E,L){return E.sortKey-L.sortKey}));this._currentPartIndex<w.length;)if(h.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,u),this._currentPartIndex++,b())return!0;return!1};var wn=function(l,h,u,m,b,w,E){this.placement=new Pt(l,b,w,E),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=u,this._showCollisionBoxes=m,this._done=!1};wn.prototype.isDone=function(){return this._done},wn.prototype.continuePlacement=function(l,h,u){for(var m=this,b=o.browser.now(),w=function(){var F=o.browser.now()-b;return!m._forceFullPlacement&&F>2};this._currentPlacementIndex>=0;){var E=h[l[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=L)&&(!E.maxzoom||E.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new xe(E)),this._inProgressLayer.continuePlacement(u[E.source],this.placement,this._showCollisionBoxes,E,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},wn.prototype.commit=function(l){return this.placement.commit(l),this.placement};var ar=512/o.EXTENT/2,no=function(l,h,u){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=u;for(var m=0;m<h.length;m++){var b=h.get(m),w=b.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:b.crossTileID,coord:this.getScaledCoordinates(b,l)})}};no.prototype.getScaledCoordinates=function(l,h){var u=ar/Math.pow(2,h.canonical.z-this.tileID.canonical.z);return{x:Math.floor((h.canonical.x*o.EXTENT+l.anchorX)*u),y:Math.floor((h.canonical.y*o.EXTENT+l.anchorY)*u)}},no.prototype.findMatches=function(l,h,u){for(var m=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z),b=0;b<l.length;b++){var w=l.get(b);if(!w.crossTileID){var E=this.indexedSymbolInstances[w.key];if(E)for(var L=this.getScaledCoordinates(w,h),F=0,j=E;F<j.length;F+=1){var nt=j[F];if(Math.abs(nt.coord.x-L.x)<=m&&Math.abs(nt.coord.y-L.y)<=m&&!u[nt.crossTileID]){u[nt.crossTileID]=!0,w.crossTileID=nt.crossTileID;break}}}}};var Qi=function(){this.maxCrossTileID=0};Qi.prototype.generate=function(){return++this.maxCrossTileID};var Cs=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Cs.prototype.handleWrapJump=function(l){var h=Math.round((l-this.lng)/360);if(h!==0)for(var u in this.indexes){var m=this.indexes[u],b={};for(var w in m){var E=m[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+h),b[E.tileID.key]=E}this.indexes[u]=b}this.lng=l},Cs.prototype.addBucket=function(l,h,u){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(var m=0;m<h.symbolInstances.length;m++)h.symbolInstances.get(m).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});var b=this.usedCrossTileIDs[l.overscaledZ];for(var w in this.indexes){var E=this.indexes[w];if(Number(w)>l.overscaledZ)for(var L in E){var F=E[L];F.tileID.isChildOf(l)&&F.findMatches(h.symbolInstances,l,b)}else{var j=E[l.scaledTo(Number(w)).key];j&&j.findMatches(h.symbolInstances,l,b)}}for(var nt=0;nt<h.symbolInstances.length;nt++){var it=h.symbolInstances.get(nt);it.crossTileID||(it.crossTileID=u.generate(),b[it.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new no(l,h.symbolInstances,h.bucketInstanceId),!0},Cs.prototype.removeBucketCrossTileIDs=function(l,h){for(var u in h.indexedSymbolInstances)for(var m=0,b=h.indexedSymbolInstances[u];m<b.length;m+=1)delete this.usedCrossTileIDs[l][b[m].crossTileID]},Cs.prototype.removeStaleBuckets=function(l){var h=!1;for(var u in this.indexes){var m=this.indexes[u];for(var b in m)l[m[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(u,m[b]),delete m[b],h=!0)}return h};var vl=function(){this.layerIndexes={},this.crossTileIDs=new Qi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};vl.prototype.addLayer=function(l,h,u){var m=this.layerIndexes[l.id];m===void 0&&(m=this.layerIndexes[l.id]=new Cs);var b=!1,w={};m.handleWrapJump(u);for(var E=0,L=h;E<L.length;E+=1){var F=L[E],j=F.getBucket(l);j&&l.id===j.layerIds[0]&&(j.bucketInstanceId||(j.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(F.tileID,j,this.crossTileIDs)&&(b=!0),w[j.bucketInstanceId]=!0)}return m.removeStaleBuckets(w)&&(b=!0),b},vl.prototype.pruneUnusedLayers=function(l){var h={};for(var u in l.forEach(function(m){h[m]=!0}),this.layerIndexes)h[u]||delete this.layerIndexes[u]};var nr=function(l,h){return o.emitValidationErrors(l,h&&h.filter(function(u){return u.identifier!=="source.canvas"}))},$s=o.pick(je,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),yl=o.pick(je,["setCenter","setZoom","setBearing","setPitch"]),ji=function(){var l={},h=o.styleSpec.$version;for(var u in o.styleSpec.$root){var m,b=o.styleSpec.$root[u];b.required&&(m=u==="version"?h:b.type==="array"?[]:{})!=null&&(l[u]=m)}return l}(),Ii=function(l){function h(u,m){var b=this;m===void 0&&(m={}),l.call(this),this.map=u,this.dispatcher=new de(ae(),this),this.imageManager=new K,this.imageManager.setEventedParent(this),this.glyphManager=new Dt(u._requestManager,m.localIdeographFontFamily),this.lineAtlas=new Bt(256,512),this.crossTileSymbolIndex=new vl,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var w=this;this._rtlTextPluginCallback=h.registerForPluginStateChange(function(E){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},function(L,F){if(o.triggerPluginCompletionEvent(L),F&&F.every(function(nt){return nt}))for(var j in w.sourceCaches)w.sourceCaches[j].reload()})}),this.on("data",function(E){if(E.dataType==="source"&&E.sourceDataType==="metadata"){var L=b.sourceCaches[E.sourceId];if(L){var F=L.getSource();if(F&&F.vectorLayerIds)for(var j in b._layers){var nt=b._layers[j];nt.source===F.id&&b._validateLayer(nt)}}}})}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.loadURL=function(u,m){var b=this;m===void 0&&(m={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var w=typeof m.validate=="boolean"?m.validate:!o.isMapboxURL(u);u=this.map._requestManager.normalizeStyleURL(u,m.accessToken);var E=this.map._requestManager.transformRequest(u,o.ResourceType.Style);this._request=o.getJSON(E,function(L,F){b._request=null,L?b.fire(new o.ErrorEvent(L)):F&&b._load(F,w)})},h.prototype.loadJSON=function(u,m){var b=this;m===void 0&&(m={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){b._request=null,b._load(u,m.validate!==!1)})},h.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(ji,!1)},h.prototype._load=function(u,m){if(!m||!nr(this,o.validateStyle(u))){for(var b in this._loaded=!0,this.stylesheet=u,u.sources)this.addSource(b,u.sources[b],{validate:!1});u.sprite?this._loadSprite(u.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(u.glyphs);var w=Ve(this.stylesheet.layers);this._order=w.map(function(j){return j.id}),this._layers={},this._serializedLayers={};for(var E=0,L=w;E<L.length;E+=1){var F=L[E];(F=o.createStyleLayer(F)).setEventedParent(this,{layer:{id:F.id}}),this._layers[F.id]=F,this._serializedLayers[F.id]=F.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Vt(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},h.prototype._loadSprite=function(u){var m=this;this._spriteRequest=function(b,w,E){var L,F,j,nt=o.browser.devicePixelRatio>1?"@2x":"",it=o.getJSON(w.transformRequest(w.normalizeSpriteURL(b,nt,".json"),o.ResourceType.SpriteJSON),function(ft,wt){it=null,j||(j=ft,L=wt,vt())}),ot=o.getImage(w.transformRequest(w.normalizeSpriteURL(b,nt,".png"),o.ResourceType.SpriteImage),function(ft,wt){ot=null,j||(j=ft,F=wt,vt())});function vt(){if(j)E(j);else if(L&&F){var ft=o.browser.getImageData(F),wt={};for(var ht in L){var Ct=L[ht],Lt=Ct.width,qt=Ct.height,ie=Ct.x,ee=Ct.y,oe=Ct.sdf,ve=Ct.pixelRatio,Ce=Ct.stretchX,Pe=Ct.stretchY,We=Ct.content,hn=new o.RGBAImage({width:Lt,height:qt});o.RGBAImage.copy(ft,hn,{x:ie,y:ee},{x:0,y:0},{width:Lt,height:qt}),wt[ht]={data:hn,pixelRatio:ve,sdf:oe,stretchX:Ce,stretchY:Pe,content:We}}E(null,wt)}}return{cancel:function(){it&&(it.cancel(),it=null),ot&&(ot.cancel(),ot=null)}}}(u,this.map._requestManager,function(b,w){if(m._spriteRequest=null,b)m.fire(new o.ErrorEvent(b));else if(w)for(var E in w)m.imageManager.addImage(E,w[E]);m.imageManager.setLoaded(!0),m._availableImages=m.imageManager.listImages(),m.dispatcher.broadcast("setImages",m._availableImages),m.fire(new o.Event("data",{dataType:"style"}))})},h.prototype._validateLayer=function(u){var m=this.sourceCaches[u.source];if(m){var b=u.sourceLayer;if(b){var w=m.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(b)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+b+'" does not exist on source "'+w.id+'" as specified by style layer "'+u.id+'"')))}}},h.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()},h.prototype._serializeLayers=function(u){for(var m=[],b=0,w=u;b<w.length;b+=1){var E=this._layers[w[b]];E.type!=="custom"&&m.push(E.serialize())}return m},h.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(var m in this._layers)if(this._layers[m].hasTransition())return!0;return!1},h.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},h.prototype.update=function(u){if(this._loaded){var m=this._changed;if(this._changed){var b=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var E in(b.length||w.length)&&this._updateWorkerLayers(b,w),this._updatedSources){var L=this._updatedSources[E];L==="reload"?this._reloadSource(E):L==="clear"&&this._clearSource(E)}for(var F in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[F].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}var j={};for(var nt in this.sourceCaches){var it=this.sourceCaches[nt];j[nt]=it.used,it.used=!1}for(var ot=0,vt=this._order;ot<vt.length;ot+=1){var ft=this._layers[vt[ot]];ft.recalculate(u,this._availableImages),!ft.isHidden(u.zoom)&&ft.source&&(this.sourceCaches[ft.source].used=!0)}for(var wt in j){var ht=this.sourceCaches[wt];j[wt]!==ht.used&&ht.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:wt}))}this.light.recalculate(u),this.z=u.zoom,m&&this.fire(new o.Event("data",{dataType:"style"}))}},h.prototype._updateTilesForChangedImages=function(){var u=Object.keys(this._changedImages);if(u.length){for(var m in this.sourceCaches)this.sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}},h.prototype._updateWorkerLayers=function(u,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:m})},h.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},h.prototype.setState=function(u){var m=this;if(this._checkLoaded(),nr(this,o.validateStyle(u)))return!1;(u=o.clone$1(u)).layers=Ve(u.layers);var b=function(E,L){if(!E)return[{command:je.setStyle,args:[L]}];var F=[];try{if(!o.deepEqual(E.version,L.version))return[{command:je.setStyle,args:[L]}];o.deepEqual(E.center,L.center)||F.push({command:je.setCenter,args:[L.center]}),o.deepEqual(E.zoom,L.zoom)||F.push({command:je.setZoom,args:[L.zoom]}),o.deepEqual(E.bearing,L.bearing)||F.push({command:je.setBearing,args:[L.bearing]}),o.deepEqual(E.pitch,L.pitch)||F.push({command:je.setPitch,args:[L.pitch]}),o.deepEqual(E.sprite,L.sprite)||F.push({command:je.setSprite,args:[L.sprite]}),o.deepEqual(E.glyphs,L.glyphs)||F.push({command:je.setGlyphs,args:[L.glyphs]}),o.deepEqual(E.transition,L.transition)||F.push({command:je.setTransition,args:[L.transition]}),o.deepEqual(E.light,L.light)||F.push({command:je.setLight,args:[L.light]});var j={},nt=[];(function(ot,vt,ft,wt){var ht;for(ht in vt=vt||{},ot=ot||{})ot.hasOwnProperty(ht)&&(vt.hasOwnProperty(ht)||Ye(ht,ft,wt));for(ht in vt)vt.hasOwnProperty(ht)&&(ot.hasOwnProperty(ht)?o.deepEqual(ot[ht],vt[ht])||(ot[ht].type==="geojson"&&vt[ht].type==="geojson"&&Ui(ot,vt,ht)?ft.push({command:je.setGeoJSONSourceData,args:[ht,vt[ht].data]}):xi(ht,vt,ft,wt)):ii(ht,vt,ft))})(E.sources,L.sources,nt,j);var it=[];E.layers&&E.layers.forEach(function(ot){j[ot.source]?F.push({command:je.removeLayer,args:[ot.id]}):it.push(ot)}),F=F.concat(nt),function(ot,vt,ft){vt=vt||[];var wt,ht,Ct,Lt,qt,ie,ee,oe=(ot=ot||[]).map(gi),ve=vt.map(gi),Ce=ot.reduce(vi,{}),Pe=vt.reduce(vi,{}),We=oe.slice(),hn=Object.create(null);for(wt=0,ht=0;wt<oe.length;wt++)Pe.hasOwnProperty(Ct=oe[wt])?ht++:(ft.push({command:je.removeLayer,args:[Ct]}),We.splice(We.indexOf(Ct,ht),1));for(wt=0,ht=0;wt<ve.length;wt++)We[We.length-1-wt]!==(Ct=ve[ve.length-1-wt])&&(Ce.hasOwnProperty(Ct)?(ft.push({command:je.removeLayer,args:[Ct]}),We.splice(We.lastIndexOf(Ct,We.length-ht),1)):ht++,ft.push({command:je.addLayer,args:[Pe[Ct],ie=We[We.length-wt]]}),We.splice(We.length-wt,0,Ct),hn[Ct]=!0);for(wt=0;wt<ve.length;wt++)if(Lt=Ce[Ct=ve[wt]],qt=Pe[Ct],!hn[Ct]&&!o.deepEqual(Lt,qt))if(o.deepEqual(Lt.source,qt.source)&&o.deepEqual(Lt["source-layer"],qt["source-layer"])&&o.deepEqual(Lt.type,qt.type)){for(ee in hi(Lt.layout,qt.layout,ft,Ct,null,je.setLayoutProperty),hi(Lt.paint,qt.paint,ft,Ct,null,je.setPaintProperty),o.deepEqual(Lt.filter,qt.filter)||ft.push({command:je.setFilter,args:[Ct,qt.filter]}),o.deepEqual(Lt.minzoom,qt.minzoom)&&o.deepEqual(Lt.maxzoom,qt.maxzoom)||ft.push({command:je.setLayerZoomRange,args:[Ct,qt.minzoom,qt.maxzoom]}),Lt)Lt.hasOwnProperty(ee)&&ee!=="layout"&&ee!=="paint"&&ee!=="filter"&&ee!=="metadata"&&ee!=="minzoom"&&ee!=="maxzoom"&&(ee.indexOf("paint.")===0?hi(Lt[ee],qt[ee],ft,Ct,ee.slice(6),je.setPaintProperty):o.deepEqual(Lt[ee],qt[ee])||ft.push({command:je.setLayerProperty,args:[Ct,ee,qt[ee]]}));for(ee in qt)qt.hasOwnProperty(ee)&&!Lt.hasOwnProperty(ee)&&ee!=="layout"&&ee!=="paint"&&ee!=="filter"&&ee!=="metadata"&&ee!=="minzoom"&&ee!=="maxzoom"&&(ee.indexOf("paint.")===0?hi(Lt[ee],qt[ee],ft,Ct,ee.slice(6),je.setPaintProperty):o.deepEqual(Lt[ee],qt[ee])||ft.push({command:je.setLayerProperty,args:[Ct,ee,qt[ee]]}))}else ft.push({command:je.removeLayer,args:[Ct]}),ie=We[We.lastIndexOf(Ct)+1],ft.push({command:je.addLayer,args:[qt,ie]})}(it,L.layers,F)}catch(ot){console.warn("Unable to compute style diff:",ot),F=[{command:je.setStyle,args:[L]}]}return F}(this.serialize(),u).filter(function(E){return!(E.command in yl)});if(b.length===0)return!1;var w=b.filter(function(E){return!(E.command in $s)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(E){return E.command}).join(", ")+".");return b.forEach(function(E){E.command!=="setTransition"&&m[E.command].apply(m,E.args)}),this.stylesheet=u,!0},h.prototype.addImage=function(u,m){if(this.getImage(u))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(u,m),this._afterImageUpdated(u)},h.prototype.updateImage=function(u,m){this.imageManager.updateImage(u,m)},h.prototype.getImage=function(u){return this.imageManager.getImage(u)},h.prototype.removeImage=function(u){if(!this.getImage(u))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(u),this._afterImageUpdated(u)},h.prototype._afterImageUpdated=function(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},h.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},h.prototype.addSource=function(u,m,b){var w=this;if(b===void 0&&(b={}),this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error("There is already a source with this ID");if(!m.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(m).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(o.validateStyle.source,"sources."+u,m,null,b))){this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);var E=this.sourceCaches[u]=new yt(u,m,this.dispatcher);E.style=this,E.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:E.serialize(),sourceId:u}}),E.onAdd(this.map),this._changed=!0}},h.prototype.removeSource=function(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(var m in this._layers)if(this._layers[m].source===u)return this.fire(new o.ErrorEvent(new Error('Source "'+u+'" cannot be removed while layer "'+m+'" is using it.')));var b=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],b.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),b.setEventedParent(null),b.clearTiles(),b.onRemove&&b.onRemove(this.map),this._changed=!0},h.prototype.setGeoJSONSourceData=function(u,m){this._checkLoaded(),this.sourceCaches[u].getSource().setData(m),this._changed=!0},h.prototype.getSource=function(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()},h.prototype.addLayer=function(u,m,b){b===void 0&&(b={}),this._checkLoaded();var w=u.id;if(this.getLayer(w))this.fire(new o.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var E;if(u.type==="custom"){if(nr(this,o.validateCustomStyleLayer(u)))return;E=o.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(w,u.source),u=o.clone$1(u),u=o.extend(u,{source:w})),this._validate(o.validateStyle.layer,"layers."+w,u,{arrayIndex:-1},b))return;E=o.createStyleLayer(u),this._validateLayer(E),E.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[E.id]=E.serialize()}var L=m?this._order.indexOf(m):this._order.length;if(m&&L===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+m+'" does not exist on this map.')));else{if(this._order.splice(L,0,w),this._layerOrderChanged=!0,this._layers[w]=E,this._removedLayers[w]&&E.source&&E.type!=="custom"){var F=this._removedLayers[w];delete this._removedLayers[w],F.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}},h.prototype.moveLayer=function(u,m){if(this._checkLoaded(),this._changed=!0,this._layers[u]){if(u!==m){var b=this._order.indexOf(u);this._order.splice(b,1);var w=m?this._order.indexOf(m):this._order.length;m&&w===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+m+'" does not exist on this map.'))):(this._order.splice(w,0,u),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be moved.")))},h.prototype.removeLayer=function(u){this._checkLoaded();var m=this._layers[u];if(m){m.setEventedParent(null);var b=this._order.indexOf(u);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=m,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],m.onRemove&&m.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be removed.")))},h.prototype.getLayer=function(u){return this._layers[u]},h.prototype.hasLayer=function(u){return u in this._layers},h.prototype.setLayerZoomRange=function(u,m,b){this._checkLoaded();var w=this.getLayer(u);w?w.minzoom===m&&w.maxzoom===b||(m!=null&&(w.minzoom=m),b!=null&&(w.maxzoom=b),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot have zoom extent.")))},h.prototype.setFilter=function(u,m,b){b===void 0&&(b={}),this._checkLoaded();var w=this.getLayer(u);if(w){if(!o.deepEqual(w.filter,m))return m==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(o.validateStyle.filter,"layers."+w.id+".filter",m,null,b)||(w.filter=o.clone$1(m),this._updateLayer(w)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be filtered.")))},h.prototype.getFilter=function(u){return o.clone$1(this.getLayer(u).filter)},h.prototype.setLayoutProperty=function(u,m,b,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(u);E?o.deepEqual(E.getLayoutProperty(m),b)||(E.setLayoutProperty(m,b,w),this._updateLayer(E)):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be styled.")))},h.prototype.getLayoutProperty=function(u,m){var b=this.getLayer(u);if(b)return b.getLayoutProperty(m);this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style.")))},h.prototype.setPaintProperty=function(u,m,b,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(u);E?o.deepEqual(E.getPaintProperty(m),b)||(E.setPaintProperty(m,b,w)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be styled.")))},h.prototype.getPaintProperty=function(u,m){return this.getLayer(u).getPaintProperty(m)},h.prototype.setFeatureState=function(u,m){this._checkLoaded();var b=u.source,w=u.sourceLayer,E=this.sourceCaches[b];if(E!==void 0){var L=E.getSource().type;L==="geojson"&&w?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):L!=="vector"||w?(u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(w,u.id,m)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+b+"' does not exist in the map's style.")))},h.prototype.removeFeatureState=function(u,m){this._checkLoaded();var b=u.source,w=this.sourceCaches[b];if(w!==void 0){var E=w.getSource().type,L=E==="vector"?u.sourceLayer:void 0;E!=="vector"||L?m&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(L,u.id,m):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+b+"' does not exist in the map's style.")))},h.prototype.getFeatureState=function(u){this._checkLoaded();var m=u.source,b=u.sourceLayer,w=this.sourceCaches[m];if(w!==void 0){if(w.getSource().type!=="vector"||b)return u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(b,u.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},h.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},h.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(u){return u.serialize()}),layers:this._serializeLayers(this._order)},function(u){return u!==void 0})},h.prototype._updateLayer=function(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._changed=!0},h.prototype._flattenAndSortRenderedFeatures=function(u){for(var m=this,b=function(Ce){return m._layers[Ce].type==="fill-extrusion"},w={},E=[],L=this._order.length-1;L>=0;L--){var F=this._order[L];if(b(F)){w[F]=L;for(var j=0,nt=u;j<nt.length;j+=1){var it=nt[j][F];if(it)for(var ot=0,vt=it;ot<vt.length;ot+=1)E.push(vt[ot])}}}E.sort(function(Ce,Pe){return Pe.intersectionZ-Ce.intersectionZ});for(var ft=[],wt=this._order.length-1;wt>=0;wt--){var ht=this._order[wt];if(b(ht))for(var Ct=E.length-1;Ct>=0;Ct--){var Lt=E[Ct].feature;if(w[Lt.layer.id]<wt)break;ft.push(Lt),E.pop()}else for(var qt=0,ie=u;qt<ie.length;qt+=1){var ee=ie[qt][ht];if(ee)for(var oe=0,ve=ee;oe<ve.length;oe+=1)ft.push(ve[oe].feature)}}return ft},h.prototype.queryRenderedFeatures=function(u,m,b){m&&m.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",m.filter,null,m);var w={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var E=0,L=m.layers;E<L.length;E+=1){var F=L[E],j=this._layers[F];if(!j)return this.fire(new o.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be queried for features."))),[];w[j.source]=!0}}var nt=[];for(var it in m.availableImages=this._availableImages,this.sourceCaches)m.layers&&!w[it]||nt.push(ue(this.sourceCaches[it],this._layers,this._serializedLayers,u,m,b));return this.placement&&nt.push(function(ot,vt,ft,wt,ht,Ct,Lt){for(var qt={},ie=Ct.queryRenderedSymbols(wt),ee=[],oe=0,ve=Object.keys(ie).map(Number);oe<ve.length;oe+=1)ee.push(Lt[ve[oe]]);ee.sort(Qe);for(var Ce=function(){var En=We[Pe],Oi=En.featureIndex.lookupSymbolFeatures(ie[En.bucketInstanceId],vt,En.bucketIndex,En.sourceLayerIndex,ht.filter,ht.layers,ht.availableImages,ot);for(var tn in Oi){var Dn=qt[tn]=qt[tn]||[],ei=Oi[tn];ei.sort(function(ni,Nn){var mn=En.featureSortOrder;if(mn){var mo=mn.indexOf(ni.featureIndex);return mn.indexOf(Nn.featureIndex)-mo}return Nn.featureIndex-ni.featureIndex});for(var Hn=0,Fn=ei;Hn<Fn.length;Hn+=1)Dn.push(Fn[Hn])}},Pe=0,We=ee;Pe<We.length;Pe+=1)Ce();var hn=function(En){qt[En].forEach(function(Oi){var tn=Oi.feature,Dn=ft[ot[En].source].getFeatureState(tn.layer["source-layer"],tn.id);tn.source=tn.layer.source,tn.layer["source-layer"]&&(tn.sourceLayer=tn.layer["source-layer"]),tn.state=Dn})};for(var Tn in qt)hn(Tn);return qt}(this._layers,this._serializedLayers,this.sourceCaches,u,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(nt)},h.prototype.querySourceFeatures=function(u,m){m&&m.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",m.filter,null,m);var b=this.sourceCaches[u];return b?function(w,E){for(var L=w.getRenderableIds().map(function(vt){return w.getTileByID(vt)}),F=[],j={},nt=0;nt<L.length;nt++){var it=L[nt],ot=it.tileID.canonical.key;j[ot]||(j[ot]=!0,it.querySourceFeatures(F,E))}return F}(b,m):[]},h.prototype.addSourceType=function(u,m,b){return h.getSourceType(u)?b(new Error('A source type called "'+u+'" already exists.')):(h.setSourceType(u,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:m.workerSourceURL},b):b(null,null))},h.prototype.getLight=function(){return this.light.getLight()},h.prototype.setLight=function(u,m){m===void 0&&(m={}),this._checkLoaded();var b=this.light.getLight(),w=!1;for(var E in u)if(!o.deepEqual(u[E],b[E])){w=!0;break}if(w){var L={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,m),this.light.updateTransitions(L)}},h.prototype._validate=function(u,m,b,w,E){return E===void 0&&(E={}),(!E||E.validate!==!1)&&nr(this,u.call(o.validateStyle,o.extend({key:m,style:this.serialize(),value:b,styleSpec:o.styleSpec},w)))},h.prototype._remove=function(){for(var u in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[u].setEventedParent(null);for(var m in this.sourceCaches)this.sourceCaches[m].clearTiles(),this.sourceCaches[m].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},h.prototype._clearSource=function(u){this.sourceCaches[u].clearTiles()},h.prototype._reloadSource=function(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()},h.prototype._updateSources=function(u){for(var m in this.sourceCaches)this.sourceCaches[m].update(u)},h.prototype._generateCollisionBoxes=function(){for(var u in this.sourceCaches)this._reloadSource(u)},h.prototype._updatePlacement=function(u,m,b,w,E){E===void 0&&(E=!1);for(var L=!1,F=!1,j={},nt=0,it=this._order;nt<it.length;nt+=1){var ot=this._layers[it[nt]];if(ot.type==="symbol"){if(!j[ot.source]){var vt=this.sourceCaches[ot.source];j[ot.source]=vt.getRenderableIds(!0).map(function(Lt){return vt.getTileByID(Lt)}).sort(function(Lt,qt){return qt.tileID.overscaledZ-Lt.tileID.overscaledZ||(Lt.tileID.isLessThan(qt.tileID)?-1:1)})}var ft=this.crossTileSymbolIndex.addLayer(ot,j[ot.source],u.center.lng);L=L||ft}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),u.zoom))&&(this.pauseablePlacement=new wn(u,this._order,E,m,b,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,j),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),F=!0),L&&this.pauseablePlacement.placement.setStale()),F||L)for(var wt=0,ht=this._order;wt<ht.length;wt+=1){var Ct=this._layers[ht[wt]];Ct.type==="symbol"&&this.placement.updateLayerOpacities(Ct,j[Ct.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},h.prototype._releaseSymbolFadeTiles=function(){for(var u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()},h.prototype.getImages=function(u,m,b){this.imageManager.getImages(m.icons,b),this._updateTilesForChangedImages();var w=this.sourceCaches[m.source];w&&w.setDependencies(m.tileID.key,m.type,m.icons)},h.prototype.getGlyphs=function(u,m,b){this.glyphManager.getGlyphs(m.stacks,b)},h.prototype.getResource=function(u,m,b){return o.makeRequest(m,b)},h}(o.Evented);Ii.getSourceType=function(l){return ci[l]},Ii.setSourceType=function(l,h){ci[l]=h},Ii.registerForPluginStateChange=o.registerForPluginStateChange;var Zr=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),Yl=Ji(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Hc=Ji(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),mf=Ji(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),gf=Ji(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),bh=Ji("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Gc=Ji(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Ah=Ji(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),uo=Ji("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),cc=Ji("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ys=Ji("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),vf=Ji(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Xl=Ji(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),bo=Ji(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),hc=Ji(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),co=Ji(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Oa=Ji(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Is=Ji(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ms=Ji(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),_l=Ji(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ho=Ji(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ss=Ji(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ao=Ji(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),xl=Ji(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Xs=Ji(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),na=Ji(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Cu=Ji(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Ji(l,h){var u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=h.match(/attribute ([\w]+) ([\w]+)/g),b=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=h.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=w?w.concat(b):b,L={};return{fragmentSource:l=l.replace(u,function(F,j,nt,it,ot){return L[ot]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_`+ot+`
varying `+nt+" "+it+" "+ot+`;
#else
uniform `+nt+" "+it+" u_"+ot+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ot+`
    `+nt+" "+it+" "+ot+" = u_"+ot+`;
#endif
`}),vertexSource:h=h.replace(u,function(F,j,nt,it,ot){var vt=it==="float"?"vec2":"vec4",ft=ot.match(/color/)?"color":vt;return L[ot]?j==="define"?`
#ifndef HAS_UNIFORM_u_`+ot+`
uniform lowp float u_`+ot+`_t;
attribute `+nt+" "+vt+" a_"+ot+`;
varying `+nt+" "+it+" "+ot+`;
#else
uniform `+nt+" "+it+" u_"+ot+`;
#endif
`:ft==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ot+`
    `+ot+" = a_"+ot+`;
#else
    `+nt+" "+it+" "+ot+" = u_"+ot+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ot+`
    `+ot+" = unpack_mix_"+ft+"(a_"+ot+", u_"+ot+`_t);
#else
    `+nt+" "+it+" "+ot+" = u_"+ot+`;
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_`+ot+`
uniform lowp float u_`+ot+`_t;
attribute `+nt+" "+vt+" a_"+ot+`;
#else
uniform `+nt+" "+it+" u_"+ot+`;
#endif
`:ft==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ot+`
    `+nt+" "+it+" "+ot+" = a_"+ot+`;
#else
    `+nt+" "+it+" "+ot+" = u_"+ot+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ot+`
    `+nt+" "+it+" "+ot+" = unpack_mix_"+ft+"(a_"+ot+", u_"+ot+`_t);
#else
    `+nt+" "+it+" "+ot+" = u_"+ot+`;
#endif
`}),staticAttributes:m,staticUniforms:E}}var Vr=Object.freeze({__proto__:null,prelude:Yl,background:Hc,backgroundPattern:mf,circle:gf,clippingMask:bh,heatmap:Gc,heatmapTexture:Ah,collisionBox:uo,collisionCircle:cc,debug:Ys,fill:vf,fillOutline:Xl,fillOutlinePattern:bo,fillPattern:hc,fillExtrusion:co,fillExtrusionPattern:Oa,hillshadePrepare:Is,hillshade:Ms,line:_l,lineGradient:ho,linePattern:ss,lineSDF:Ao,raster:xl,symbolIcon:Xs,symbolSDF:na,symbolTextAndIcon:Cu}),Ba=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function bl(l){for(var h=[],u=0;u<l.length;u++)if(l[u]!==null){var m=l[u].split(" ");h.push(m.pop())}return h}Ba.prototype.bind=function(l,h,u,m,b,w,E,L){this.context=l;for(var F=this.boundPaintVertexBuffers.length!==m.length,j=0;!F&&j<m.length;j++)this.boundPaintVertexBuffers[j]!==m[j]&&(F=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===h&&this.boundLayoutVertexBuffer===u&&!F&&this.boundIndexBuffer===b&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===L?(l.bindVertexArrayOES.set(this.vao),E&&E.bind(),b&&b.dynamicDraw&&b.bind(),L&&L.bind()):this.freshBind(h,u,m,b,w,E,L)},Ba.prototype.freshBind=function(l,h,u,m,b,w,E){var L,F=l.numAttributes,j=this.context,nt=j.gl;if(j.extVertexArrayObject)this.vao&&this.destroy(),this.vao=j.extVertexArrayObject.createVertexArrayOES(),j.bindVertexArrayOES.set(this.vao),L=0,this.boundProgram=l,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=u,this.boundIndexBuffer=m,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E;else{L=j.currentNumAttributes||0;for(var it=F;it<L;it++)nt.disableVertexAttribArray(it)}h.enableAttributes(nt,l);for(var ot=0,vt=u;ot<vt.length;ot+=1)vt[ot].enableAttributes(nt,l);w&&w.enableAttributes(nt,l),E&&E.enableAttributes(nt,l),h.bind(),h.setVertexAttribPointers(nt,l,b);for(var ft=0,wt=u;ft<wt.length;ft+=1){var ht=wt[ft];ht.bind(),ht.setVertexAttribPointers(nt,l,b)}w&&(w.bind(),w.setVertexAttribPointers(nt,l,b)),m&&m.bind(),E&&(E.bind(),E.setVertexAttribPointers(nt,l,b)),j.currentNumAttributes=F},Ba.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var qc=function(l,h,u,m,b,w){var E=l.gl;this.program=E.createProgram();for(var L=bl(u.staticAttributes),F=m?m.getBinderAttributes():[],j=L.concat(F),nt=u.staticUniforms?bl(u.staticUniforms):[],it=m?m.getBinderUniforms():[],ot=[],vt=0,ft=nt.concat(it);vt<ft.length;vt+=1){var wt=ft[vt];ot.indexOf(wt)<0&&ot.push(wt)}var ht=m?m.defines():[];w&&ht.push("#define OVERDRAW_INSPECTOR;");var Ct=ht.concat(Yl.fragmentSource,u.fragmentSource).join(`
`),Lt=ht.concat(Yl.vertexSource,u.vertexSource).join(`
`),qt=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(qt,Ct),E.compileShader(qt),E.attachShader(this.program,qt);var ie=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(ie,Lt),E.compileShader(ie),E.attachShader(this.program,ie),this.attributes={};var ee={};this.numAttributes=j.length;for(var oe=0;oe<this.numAttributes;oe++)j[oe]&&(E.bindAttribLocation(this.program,oe,j[oe]),this.attributes[j[oe]]=oe);E.linkProgram(this.program),E.deleteShader(ie),E.deleteShader(qt);for(var ve=0;ve<ot.length;ve++){var Ce=ot[ve];if(Ce&&!ee[Ce]){var Pe=E.getUniformLocation(this.program,Ce);Pe&&(ee[Ce]=Pe)}}this.fixedUniforms=b(l,ee),this.binderUniforms=m?m.getUniforms(l,ee):[]}}};function Iu(l,h,u){var m=1/gr(u,1,h.transform.tileZoom),b=Math.pow(2,u.tileID.overscaledZ),w=u.tileSize*Math.pow(2,h.transform.tileZoom)/b,E=w*(u.tileID.canonical.x+u.tileID.wrap*b),L=w*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[m,l.fromScale,l.toScale],u_fade:l.t,u_pixel_coord_upper:[E>>16,L>>16],u_pixel_coord_lower:[65535&E,65535&L]}}qc.prototype.draw=function(l,h,u,m,b,w,E,L,F,j,nt,it,ot,vt,ft,wt){var ht,Ct=l.gl;if(!this.failedToCreate){for(var Lt in l.program.set(this.program),l.setDepthMode(u),l.setStencilMode(m),l.setColorMode(b),l.setCullFace(w),this.fixedUniforms)this.fixedUniforms[Lt].set(E[Lt]);vt&&vt.setUniforms(l,this.binderUniforms,it,{zoom:ot});for(var qt=(ht={},ht[Ct.LINES]=2,ht[Ct.TRIANGLES]=3,ht[Ct.LINE_STRIP]=1,ht)[h],ie=0,ee=nt.get();ie<ee.length;ie+=1){var oe=ee[ie],ve=oe.vaos||(oe.vaos={});(ve[L]||(ve[L]=new Ba)).bind(l,this,F,vt?vt.getPaintVertexBuffers():[],j,oe.vertexOffset,ft,wt),Ct.drawElements(h,oe.primitiveLength*qt,Ct.UNSIGNED_SHORT,oe.primitiveOffset*qt*2)}}};var Wc=function(l,h,u,m){var b=h.style.light,w=b.properties.get("position"),E=[w.x,w.y,w.z],L=o.create$1();b.properties.get("anchor")==="viewport"&&o.fromRotation(L,-h.transform.angle),o.transformMat3(E,E,L);var F=b.properties.get("color");return{u_matrix:l,u_lightpos:E,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[F.r,F.g,F.b],u_vertical_gradient:+u,u_opacity:m}},ls=function(l,h,u,m,b,w,E){return o.extend(Wc(l,h,u,m),Iu(w,h,E),{u_height_factor:-Math.pow(2,b.overscaledZ)/E.tileSize/8})},Al=function(l){return{u_matrix:l}},wl=function(l,h,u,m){return o.extend(Al(l),Iu(u,h,m))},fc=function(l,h){return{u_matrix:l,u_world:h}},Kl=function(l,h,u,m,b){return o.extend(wl(l,h,u,m),{u_world:b})},wh=function(l,h,u,m){var b,w,E=l.transform;if(m.paint.get("circle-pitch-alignment")==="map"){var L=gr(u,1,E.zoom);b=!0,w=[L,L]}else b=!1,w=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:l.translatePosMatrix(h.posMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:w}},Ks=function(l,h,u){var m=gr(u,1,h.zoom),b=Math.pow(2,h.zoom-u.tileID.overscaledZ),w=u.tileID.overscaleFactor();return{u_matrix:l,u_camera_to_center_distance:h.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[h.pixelsToGLUnits[0]/(m*b),h.pixelsToGLUnits[1]/(m*b)],u_overscale_factor:w}},pc=function(l,h,u){return{u_matrix:l,u_inv_matrix:h,u_camera_to_center_distance:u.cameraToCenterDistance,u_viewport_size:[u.width,u.height]}},ia=function(l,h,u){return u===void 0&&(u=1),{u_matrix:l,u_color:h,u_overlay:0,u_overlay_scale:u}},Fo=function(l){return{u_matrix:l}},Qs=function(l,h,u,m){return{u_matrix:l,u_extrude_scale:gr(h,1,u),u_intensity:m}},Cl=function(l,h,u){var m=l.transform;return{u_matrix:ra(l,h,u),u_ratio:1/gr(h,1,m.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Ri=function(l,h,u,m){return o.extend(Cl(l,h,u),{u_image:0,u_image_height:m})},Mu=function(l,h,u,m){var b=l.transform,w=us(h,b);return{u_matrix:ra(l,h,u),u_texsize:h.imageAtlasTexture.size,u_ratio:1/gr(h,1,b.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[w,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Zc=function(l,h,u,m,b){var w=l.lineAtlas,E=us(h,l.transform),L=u.layout.get("line-cap")==="round",F=w.getDash(m.from,L),j=w.getDash(m.to,L),nt=F.width*b.fromScale,it=j.width*b.toScale;return o.extend(Cl(l,h,u),{u_patternscale_a:[E/nt,-F.height/2],u_patternscale_b:[E/it,-j.height/2],u_sdfgamma:w.width/(256*Math.min(nt,it)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:F.y,u_tex_y_b:j.y,u_mix:b.t})};function us(l,h){return 1/gr(l,1,h.tileZoom)}function ra(l,h,u){return l.translatePosMatrix(h.tileID.posMatrix,h,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}var $c=function(l,h,u,m,b){return{u_matrix:l,u_tl_parent:h,u_scale_parent:u,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(E=b.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(w=b.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:Eu(b.paint.get("raster-hue-rotate"))};var w,E};function Eu(l){l*=Math.PI/180;var h=Math.sin(l),u=Math.cos(l);return[(2*u+1)/3,(-Math.sqrt(3)*h-u+1)/3,(Math.sqrt(3)*h-u+1)/3]}var dc,Il=function(l,h,u,m,b,w,E,L,F,j){var nt=b.transform;return{u_is_size_zoom_constant:+(l==="constant"||l==="source"),u_is_size_feature_constant:+(l==="constant"||l==="camera"),u_size_t:h?h.uSizeT:0,u_size:h?h.uSize:0,u_camera_to_center_distance:nt.cameraToCenterDistance,u_pitch:nt.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:nt.width/nt.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:E,u_coord_matrix:L,u_is_text:+F,u_pitch_with_map:+m,u_texsize:j,u_texture:0}},Su=function(l,h,u,m,b,w,E,L,F,j,nt){var it=b.transform;return o.extend(Il(l,h,u,m,b,w,E,L,F,j),{u_gamma_scale:m?Math.cos(it._pitch)*it.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+nt})},Ql=function(l,h,u,m,b,w,E,L,F,j){return o.extend(Su(l,h,u,m,b,w,E,L,!0,F,!0),{u_texsize_icon:j,u_texture_icon:1})},Es=function(l,h,u){return{u_matrix:l,u_opacity:h,u_color:u}},Tu=function(l,h,u,m,b,w){return o.extend(function(E,L,F,j){var nt=F.imageManager.getPattern(E.from.toString()),it=F.imageManager.getPattern(E.to.toString()),ot=F.imageManager.getPixelSize(),vt=ot.width,ft=ot.height,wt=Math.pow(2,j.tileID.overscaledZ),ht=j.tileSize*Math.pow(2,F.transform.tileZoom)/wt,Ct=ht*(j.tileID.canonical.x+j.tileID.wrap*wt),Lt=ht*j.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:nt.tl,u_pattern_br_a:nt.br,u_pattern_tl_b:it.tl,u_pattern_br_b:it.br,u_texsize:[vt,ft],u_mix:L.t,u_pattern_size_a:nt.displaySize,u_pattern_size_b:it.displaySize,u_scale_a:L.fromScale,u_scale_b:L.toScale,u_tile_units_to_pixels:1/gr(j,1,F.transform.tileZoom),u_pixel_coord_upper:[Ct>>16,Lt>>16],u_pixel_coord_lower:[65535&Ct,65535&Lt]}}(m,w,u,b),{u_matrix:l,u_opacity:h})},Js={fillExtrusion:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_lightpos:new o.Uniform3f(l,h.u_lightpos),u_lightintensity:new o.Uniform1f(l,h.u_lightintensity),u_lightcolor:new o.Uniform3f(l,h.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,h.u_vertical_gradient),u_opacity:new o.Uniform1f(l,h.u_opacity)}},fillExtrusionPattern:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_lightpos:new o.Uniform3f(l,h.u_lightpos),u_lightintensity:new o.Uniform1f(l,h.u_lightintensity),u_lightcolor:new o.Uniform3f(l,h.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,h.u_vertical_gradient),u_height_factor:new o.Uniform1f(l,h.u_height_factor),u_image:new o.Uniform1i(l,h.u_image),u_texsize:new o.Uniform2f(l,h.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,h.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,h.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,h.u_scale),u_fade:new o.Uniform1f(l,h.u_fade),u_opacity:new o.Uniform1f(l,h.u_opacity)}},fill:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix)}},fillPattern:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_image:new o.Uniform1i(l,h.u_image),u_texsize:new o.Uniform2f(l,h.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,h.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,h.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,h.u_scale),u_fade:new o.Uniform1f(l,h.u_fade)}},fillOutline:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_world:new o.Uniform2f(l,h.u_world)}},fillOutlinePattern:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_world:new o.Uniform2f(l,h.u_world),u_image:new o.Uniform1i(l,h.u_image),u_texsize:new o.Uniform2f(l,h.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,h.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,h.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,h.u_scale),u_fade:new o.Uniform1f(l,h.u_fade)}},circle:function(l,h){return{u_camera_to_center_distance:new o.Uniform1f(l,h.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(l,h.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(l,h.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(l,h.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(l,h.u_matrix)}},collisionBox:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_camera_to_center_distance:new o.Uniform1f(l,h.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(l,h.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(l,h.u_extrude_scale),u_overscale_factor:new o.Uniform1f(l,h.u_overscale_factor)}},collisionCircle:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_inv_matrix:new o.UniformMatrix4f(l,h.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(l,h.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(l,h.u_viewport_size)}},debug:function(l,h){return{u_color:new o.UniformColor(l,h.u_color),u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_overlay:new o.Uniform1i(l,h.u_overlay),u_overlay_scale:new o.Uniform1f(l,h.u_overlay_scale)}},clippingMask:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix)}},heatmap:function(l,h){return{u_extrude_scale:new o.Uniform1f(l,h.u_extrude_scale),u_intensity:new o.Uniform1f(l,h.u_intensity),u_matrix:new o.UniformMatrix4f(l,h.u_matrix)}},heatmapTexture:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_world:new o.Uniform2f(l,h.u_world),u_image:new o.Uniform1i(l,h.u_image),u_color_ramp:new o.Uniform1i(l,h.u_color_ramp),u_opacity:new o.Uniform1f(l,h.u_opacity)}},hillshade:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_image:new o.Uniform1i(l,h.u_image),u_latrange:new o.Uniform2f(l,h.u_latrange),u_light:new o.Uniform2f(l,h.u_light),u_shadow:new o.UniformColor(l,h.u_shadow),u_highlight:new o.UniformColor(l,h.u_highlight),u_accent:new o.UniformColor(l,h.u_accent)}},hillshadePrepare:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_image:new o.Uniform1i(l,h.u_image),u_dimension:new o.Uniform2f(l,h.u_dimension),u_zoom:new o.Uniform1f(l,h.u_zoom),u_unpack:new o.Uniform4f(l,h.u_unpack)}},line:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_ratio:new o.Uniform1f(l,h.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,h.u_units_to_pixels)}},lineGradient:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_ratio:new o.Uniform1f(l,h.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,h.u_units_to_pixels),u_image:new o.Uniform1i(l,h.u_image),u_image_height:new o.Uniform1f(l,h.u_image_height)}},linePattern:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_texsize:new o.Uniform2f(l,h.u_texsize),u_ratio:new o.Uniform1f(l,h.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_image:new o.Uniform1i(l,h.u_image),u_units_to_pixels:new o.Uniform2f(l,h.u_units_to_pixels),u_scale:new o.Uniform3f(l,h.u_scale),u_fade:new o.Uniform1f(l,h.u_fade)}},lineSDF:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_ratio:new o.Uniform1f(l,h.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,h.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(l,h.u_patternscale_a),u_patternscale_b:new o.Uniform2f(l,h.u_patternscale_b),u_sdfgamma:new o.Uniform1f(l,h.u_sdfgamma),u_image:new o.Uniform1i(l,h.u_image),u_tex_y_a:new o.Uniform1f(l,h.u_tex_y_a),u_tex_y_b:new o.Uniform1f(l,h.u_tex_y_b),u_mix:new o.Uniform1f(l,h.u_mix)}},raster:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_tl_parent:new o.Uniform2f(l,h.u_tl_parent),u_scale_parent:new o.Uniform1f(l,h.u_scale_parent),u_buffer_scale:new o.Uniform1f(l,h.u_buffer_scale),u_fade_t:new o.Uniform1f(l,h.u_fade_t),u_opacity:new o.Uniform1f(l,h.u_opacity),u_image0:new o.Uniform1i(l,h.u_image0),u_image1:new o.Uniform1i(l,h.u_image1),u_brightness_low:new o.Uniform1f(l,h.u_brightness_low),u_brightness_high:new o.Uniform1f(l,h.u_brightness_high),u_saturation_factor:new o.Uniform1f(l,h.u_saturation_factor),u_contrast_factor:new o.Uniform1f(l,h.u_contrast_factor),u_spin_weights:new o.Uniform3f(l,h.u_spin_weights)}},symbolIcon:function(l,h){return{u_is_size_zoom_constant:new o.Uniform1i(l,h.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,h.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,h.u_size_t),u_size:new o.Uniform1f(l,h.u_size),u_camera_to_center_distance:new o.Uniform1f(l,h.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,h.u_pitch),u_rotate_symbol:new o.Uniform1i(l,h.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,h.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,h.u_fade_change),u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,h.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,h.u_coord_matrix),u_is_text:new o.Uniform1i(l,h.u_is_text),u_pitch_with_map:new o.Uniform1i(l,h.u_pitch_with_map),u_texsize:new o.Uniform2f(l,h.u_texsize),u_texture:new o.Uniform1i(l,h.u_texture)}},symbolSDF:function(l,h){return{u_is_size_zoom_constant:new o.Uniform1i(l,h.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,h.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,h.u_size_t),u_size:new o.Uniform1f(l,h.u_size),u_camera_to_center_distance:new o.Uniform1f(l,h.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,h.u_pitch),u_rotate_symbol:new o.Uniform1i(l,h.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,h.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,h.u_fade_change),u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,h.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,h.u_coord_matrix),u_is_text:new o.Uniform1i(l,h.u_is_text),u_pitch_with_map:new o.Uniform1i(l,h.u_pitch_with_map),u_texsize:new o.Uniform2f(l,h.u_texsize),u_texture:new o.Uniform1i(l,h.u_texture),u_gamma_scale:new o.Uniform1f(l,h.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,h.u_is_halo)}},symbolTextAndIcon:function(l,h){return{u_is_size_zoom_constant:new o.Uniform1i(l,h.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,h.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,h.u_size_t),u_size:new o.Uniform1f(l,h.u_size),u_camera_to_center_distance:new o.Uniform1f(l,h.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,h.u_pitch),u_rotate_symbol:new o.Uniform1i(l,h.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,h.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,h.u_fade_change),u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,h.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,h.u_coord_matrix),u_is_text:new o.Uniform1i(l,h.u_is_text),u_pitch_with_map:new o.Uniform1i(l,h.u_pitch_with_map),u_texsize:new o.Uniform2f(l,h.u_texsize),u_texsize_icon:new o.Uniform2f(l,h.u_texsize_icon),u_texture:new o.Uniform1i(l,h.u_texture),u_texture_icon:new o.Uniform1i(l,h.u_texture_icon),u_gamma_scale:new o.Uniform1f(l,h.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,h.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,h.u_is_halo)}},background:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_opacity:new o.Uniform1f(l,h.u_opacity),u_color:new o.UniformColor(l,h.u_color)}},backgroundPattern:function(l,h){return{u_matrix:new o.UniformMatrix4f(l,h.u_matrix),u_opacity:new o.Uniform1f(l,h.u_opacity),u_image:new o.Uniform1i(l,h.u_image),u_pattern_tl_a:new o.Uniform2f(l,h.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(l,h.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(l,h.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(l,h.u_pattern_br_b),u_texsize:new o.Uniform2f(l,h.u_texsize),u_mix:new o.Uniform1f(l,h.u_mix),u_pattern_size_a:new o.Uniform2f(l,h.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(l,h.u_pattern_size_b),u_scale_a:new o.Uniform1f(l,h.u_scale_a),u_scale_b:new o.Uniform1f(l,h.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(l,h.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,h.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(l,h.u_tile_units_to_pixels)}}};function cs(l,h,u,m,b,w,E){for(var L=l.context,F=L.gl,j=l.useProgram("collisionBox"),nt=[],it=0,ot=0,vt=0;vt<m.length;vt++){var ft=m[vt],wt=h.getTile(ft),ht=wt.getBucket(u);if(ht){var Ct=ft.posMatrix;b[0]===0&&b[1]===0||(Ct=l.translatePosMatrix(ft.posMatrix,wt,b,w));var Lt=E?ht.textCollisionBox:ht.iconCollisionBox,qt=ht.collisionCircleArray;if(qt.length>0){var ie=o.create(),ee=Ct;o.mul(ie,ht.placementInvProjMatrix,l.transform.glCoordMatrix),o.mul(ie,ie,ht.placementViewportMatrix),nt.push({circleArray:qt,circleOffset:ot,transform:ee,invTransform:ie}),ot=it+=qt.length/4}Lt&&j.draw(L,F.LINES,at.disabled,dt.disabled,l.colorModeForRenderPass(),Rt.disabled,Ks(Ct,l.transform,wt),u.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,null,l.transform.zoom,null,null,Lt.collisionVertexBuffer)}}if(E&&nt.length){var oe=l.useProgram("collisionCircle"),ve=new o.StructArrayLayout2f1f2i16;ve.resize(4*it),ve._trim();for(var Ce=0,Pe=0,We=nt;Pe<We.length;Pe+=1)for(var hn=We[Pe],Tn=0;Tn<hn.circleArray.length/4;Tn++){var En=4*Tn,Oi=hn.circleArray[En+0],tn=hn.circleArray[En+1],Dn=hn.circleArray[En+2],ei=hn.circleArray[En+3];ve.emplace(Ce++,Oi,tn,Dn,ei,0),ve.emplace(Ce++,Oi,tn,Dn,ei,1),ve.emplace(Ce++,Oi,tn,Dn,ei,2),ve.emplace(Ce++,Oi,tn,Dn,ei,3)}(!dc||dc.length<2*it)&&(dc=function(Yr){var Ur=2*Yr,wo=new o.StructArrayLayout3ui6;wo.resize(Ur),wo._trim();for(var Cr=0;Cr<Ur;Cr++){var yr=6*Cr;wo.uint16[yr+0]=4*Cr+0,wo.uint16[yr+1]=4*Cr+1,wo.uint16[yr+2]=4*Cr+2,wo.uint16[yr+3]=4*Cr+2,wo.uint16[yr+4]=4*Cr+3,wo.uint16[yr+5]=4*Cr+0}return wo}(it));for(var Hn=L.createIndexBuffer(dc,!0),Fn=L.createVertexBuffer(ve,o.collisionCircleLayout.members,!0),ni=0,Nn=nt;ni<Nn.length;ni+=1){var mn=Nn[ni],mo=pc(mn.transform,mn.invTransform,l.transform);oe.draw(L,F.TRIANGLES,at.disabled,dt.disabled,l.colorModeForRenderPass(),Rt.disabled,mo,u.id,Fn,Hn,o.SegmentVector.simpleSegment(0,2*mn.circleOffset,mn.circleArray.length,mn.circleArray.length/2),null,l.transform.zoom,null,null,null)}Fn.destroy(),Hn.destroy()}}var No=o.identity(new Float32Array(16));function Ch(l,h,u,m,b,w){var E=o.getAnchorAlignment(l),L=-(E.horizontalAlign-.5)*h,F=-(E.verticalAlign-.5)*u,j=o.evaluateVariableOffset(l,m);return new o.Point((L/b+j[0])*w,(F/b+j[1])*w)}function Yc(l,h,u,m,b,w,E,L,F,j,nt){var it=l.text.placedSymbolArray,ot=l.text.dynamicLayoutVertexArray,vt=l.icon.dynamicLayoutVertexArray,ft={};ot.clear();for(var wt=0;wt<it.length;wt++){var ht=it.get(wt),Ct=ht.hidden||!ht.crossTileID||l.allowVerticalPlacement&&!ht.placedOrientation?null:m[ht.crossTileID];if(Ct){var Lt=new o.Point(ht.anchorX,ht.anchorY),qt=$n(Lt,u?L:E),ie=ai(w.cameraToCenterDistance,qt.signedDistanceFromCamera),ee=b.evaluateSizeForFeature(l.textSizeData,j,ht)*ie/o.ONE_EM;u&&(ee*=l.tilePixelRatio/F);for(var oe=Ch(Ct.anchor,Ct.width,Ct.height,Ct.textOffset,Ct.textBoxScale,ee),ve=u?$n(Lt.add(oe),E).point:qt.point.add(h?oe.rotate(-w.angle):oe),Ce=l.allowVerticalPlacement&&ht.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Pe=0;Pe<ht.numGlyphs;Pe++)o.addDynamicAttributes(ot,ve,Ce);nt&&ht.associatedIconIndex>=0&&(ft[ht.associatedIconIndex]={shiftedAnchor:ve,angle:Ce})}else xo(ht.numGlyphs,ot)}if(nt){vt.clear();for(var We=l.icon.placedSymbolArray,hn=0;hn<We.length;hn++){var Tn=We.get(hn);if(Tn.hidden)xo(Tn.numGlyphs,vt);else{var En=ft[hn];if(En)for(var Oi=0;Oi<Tn.numGlyphs;Oi++)o.addDynamicAttributes(vt,En.shiftedAnchor,En.angle);else xo(Tn.numGlyphs,vt)}}l.icon.dynamicLayoutVertexBuffer.updateData(vt)}l.text.dynamicLayoutVertexBuffer.updateData(ot)}function ku(l,h,u){return u.iconsInText&&h?"symbolTextAndIcon":l?"symbolSDF":"symbolIcon"}function Xo(l,h,u,m,b,w,E,L,F,j,nt,it){for(var ot=l.context,vt=ot.gl,ft=l.transform,wt=L==="map",ht=F==="map",Ct=wt&&u.layout.get("symbol-placement")!=="point",Lt=wt&&!ht&&!Ct,qt=u.layout.get("symbol-sort-key").constantOr(1)!==void 0,ie=!1,ee=l.depthModeForSublayer(0,at.ReadOnly),oe=u.layout.get("text-variable-anchor"),ve=[],Ce=0,Pe=m;Ce<Pe.length;Ce+=1){var We=Pe[Ce],hn=h.getTile(We),Tn=hn.getBucket(u);if(Tn){var En=b?Tn.text:Tn.icon;if(En&&En.segments.get().length){var Oi=En.programConfigurations.get(u.id),tn=b||Tn.sdfIcons,Dn=b?Tn.textSizeData:Tn.iconSizeData,ei=ht||ft.pitch!==0,Hn=l.useProgram(ku(tn,b,Tn),Oi),Fn=o.evaluateSizeForZoom(Dn,ft.zoom),ni=void 0,Nn=[0,0],mn=void 0,mo=void 0,Yr=null,Ur=void 0;if(b)mn=hn.glyphAtlasTexture,mo=vt.LINEAR,ni=hn.glyphAtlasTexture.size,Tn.iconsInText&&(Nn=hn.imageAtlasTexture.size,Yr=hn.imageAtlasTexture,Ur=ei||l.options.rotating||l.options.zooming||Dn.kind==="composite"||Dn.kind==="camera"?vt.LINEAR:vt.NEAREST);else{var wo=u.layout.get("icon-size").constantOr(0)!==1||Tn.iconsNeedLinear;mn=hn.imageAtlasTexture,mo=tn||l.options.rotating||l.options.zooming||wo||ei?vt.LINEAR:vt.NEAREST,ni=hn.imageAtlasTexture.size}var Cr=gr(hn,1,l.transform.zoom),yr=kr(We.posMatrix,ht,wt,l.transform,Cr),Va=Zi(We.posMatrix,ht,wt,l.transform,Cr),mr=oe&&Tn.hasTextData(),kl=u.layout.get("icon-text-fit")!=="none"&&mr&&Tn.hasIconData();Ct&&as(Tn,We.posMatrix,l,b,yr,Va,ht,j);var Ua=l.translatePosMatrix(We.posMatrix,hn,w,E),il=Ct||b&&oe||kl?No:yr,Rs=l.translatePosMatrix(Va,hn,w,E,!0),_c=tn&&u.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0,eh={program:Hn,buffers:En,uniformValues:tn?Tn.iconsInText?Ql(Dn.kind,Fn,Lt,ht,l,Ua,il,Rs,ni,Nn):Su(Dn.kind,Fn,Lt,ht,l,Ua,il,Rs,b,ni,!0):Il(Dn.kind,Fn,Lt,ht,l,Ua,il,Rs,b,ni),atlasTexture:mn,atlasTextureIcon:Yr,atlasInterpolation:mo,atlasInterpolationIcon:Ur,isSDF:tn,hasHalo:_c};if(qt&&Tn.canOverlap){ie=!0;for(var zs=0,xc=En.segments.get();zs<xc.length;zs+=1){var Sh=xc[zs];ve.push({segments:new o.SegmentVector([Sh]),sortKey:Sh.sortKey,state:eh})}}else ve.push({segments:En.segments,sortKey:0,state:eh})}}}ie&&ve.sort(function(iu,bc){return iu.sortKey-bc.sortKey});for(var Pl=0,nu=ve;Pl<nu.length;Pl+=1){var Ll=nu[Pl],Ro=Ll.state;if(ot.activeTexture.set(vt.TEXTURE0),Ro.atlasTexture.bind(Ro.atlasInterpolation,vt.CLAMP_TO_EDGE),Ro.atlasTextureIcon&&(ot.activeTexture.set(vt.TEXTURE1),Ro.atlasTextureIcon&&Ro.atlasTextureIcon.bind(Ro.atlasInterpolationIcon,vt.CLAMP_TO_EDGE)),Ro.isSDF){var rl=Ro.uniformValues;Ro.hasHalo&&(rl.u_is_halo=1,tl(Ro.buffers,Ll.segments,u,l,Ro.program,ee,nt,it,rl)),rl.u_is_halo=0}tl(Ro.buffers,Ll.segments,u,l,Ro.program,ee,nt,it,Ro.uniformValues)}}function tl(l,h,u,m,b,w,E,L,F){var j=m.context;b.draw(j,j.gl.TRIANGLES,w,E,L,Rt.disabled,F,u.id,l.layoutVertexBuffer,l.indexBuffer,h,u.paint,m.transform.zoom,l.programConfigurations.get(u.id),l.dynamicLayoutVertexBuffer,l.opacityVertexBuffer)}function mc(l,h,u,m,b,w,E){var L,F,j,nt,it,ot=l.context.gl,vt=u.paint.get("fill-pattern"),ft=vt&&vt.constantOr(1),wt=u.getCrossfadeParameters();E?(F=ft&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",L=ot.LINES):(F=ft?"fillPattern":"fill",L=ot.TRIANGLES);for(var ht=0,Ct=m;ht<Ct.length;ht+=1){var Lt=Ct[ht],qt=h.getTile(Lt);if(!ft||qt.patternsLoaded()){var ie=qt.getBucket(u);if(ie){var ee=ie.programConfigurations.get(u.id),oe=l.useProgram(F,ee);ft&&(l.context.activeTexture.set(ot.TEXTURE0),qt.imageAtlasTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),ee.updatePaintBuffers(wt));var ve=vt.constantOr(null);if(ve&&qt.imageAtlas){var Ce=qt.imageAtlas,Pe=Ce.patternPositions[ve.to.toString()],We=Ce.patternPositions[ve.from.toString()];Pe&&We&&ee.setConstantPatternPositions(Pe,We)}var hn=l.translatePosMatrix(Lt.posMatrix,qt,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(E){nt=ie.indexBuffer2,it=ie.segments2;var Tn=[ot.drawingBufferWidth,ot.drawingBufferHeight];j=F==="fillOutlinePattern"&&ft?Kl(hn,l,wt,qt,Tn):fc(hn,Tn)}else nt=ie.indexBuffer,it=ie.segments,j=ft?wl(hn,l,wt,qt):Al(hn);oe.draw(l.context,L,b,l.stencilModeForClipping(Lt),w,Rt.disabled,j,u.id,ie.layoutVertexBuffer,nt,it,u.paint,l.transform.zoom,ee)}}}}function Xc(l,h,u,m,b,w,E){for(var L=l.context,F=L.gl,j=u.paint.get("fill-extrusion-pattern"),nt=j.constantOr(1),it=u.getCrossfadeParameters(),ot=u.paint.get("fill-extrusion-opacity"),vt=0,ft=m;vt<ft.length;vt+=1){var wt=ft[vt],ht=h.getTile(wt),Ct=ht.getBucket(u);if(Ct){var Lt=Ct.programConfigurations.get(u.id),qt=l.useProgram(nt?"fillExtrusionPattern":"fillExtrusion",Lt);nt&&(l.context.activeTexture.set(F.TEXTURE0),ht.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),Lt.updatePaintBuffers(it));var ie=j.constantOr(null);if(ie&&ht.imageAtlas){var ee=ht.imageAtlas,oe=ee.patternPositions[ie.to.toString()],ve=ee.patternPositions[ie.from.toString()];oe&&ve&&Lt.setConstantPatternPositions(oe,ve)}var Ce=l.translatePosMatrix(wt.posMatrix,ht,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Pe=u.paint.get("fill-extrusion-vertical-gradient"),We=nt?ls(Ce,l,Pe,ot,wt,it,ht):Wc(Ce,l,Pe,ot);qt.draw(L,L.gl.TRIANGLES,b,w,E,Rt.backCCW,We,u.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,u.paint,l.transform.zoom,Lt)}}}function Ml(l,h,u,m,b,w){var E=l.context,L=E.gl,F=h.fbo;if(F){var j=l.useProgram("hillshade");E.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,F.colorAttachment.get());var nt=function(it,ot,vt){var ft=vt.paint.get("hillshade-shadow-color"),wt=vt.paint.get("hillshade-highlight-color"),ht=vt.paint.get("hillshade-accent-color"),Ct=vt.paint.get("hillshade-illumination-direction")*(Math.PI/180);vt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ct-=it.transform.angle);var Lt,qt,ie,ee=!it.options.moving;return{u_matrix:it.transform.calculatePosMatrix(ot.tileID.toUnwrapped(),ee),u_image:0,u_latrange:(Lt=ot.tileID,qt=Math.pow(2,Lt.canonical.z),ie=Lt.canonical.y,[new o.MercatorCoordinate(0,ie/qt).toLngLat().lat,new o.MercatorCoordinate(0,(ie+1)/qt).toLngLat().lat]),u_light:[vt.paint.get("hillshade-exaggeration"),Ct],u_shadow:ft,u_highlight:wt,u_accent:ht}}(l,h,u);j.draw(E,L.TRIANGLES,m,b,w,Rt.disabled,nt,u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}}function Jl(l,h,u,m,b,w){var E=l.context,L=E.gl,F=h.dem;if(F&&F.data){var j=F.dim,nt=F.stride,it=F.getPixels();if(E.activeTexture.set(L.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),h.demTexture=h.demTexture||l.getTileTexture(nt),h.demTexture){var ot=h.demTexture;ot.update(it,{premultiply:!1}),ot.bind(L.NEAREST,L.CLAMP_TO_EDGE)}else h.demTexture=new o.Texture(E,it,L.RGBA,{premultiply:!1}),h.demTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE);E.activeTexture.set(L.TEXTURE0);var vt=h.fbo;if(!vt){var ft=new o.Texture(E,{width:j,height:j,data:null},L.RGBA);ft.bind(L.LINEAR,L.CLAMP_TO_EDGE),(vt=h.fbo=E.createFramebuffer(j,j,!0)).colorAttachment.set(ft.texture)}E.bindFramebuffer.set(vt.framebuffer),E.viewport.set([0,0,j,j]),l.useProgram("hillshadePrepare").draw(E,L.TRIANGLES,m,b,w,Rt.disabled,function(wt,ht){var Ct=ht.stride,Lt=o.create();return o.ortho(Lt,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(Lt,Lt,[0,-o.EXTENT,0]),{u_matrix:Lt,u_image:1,u_dimension:[Ct,Ct],u_zoom:wt.overscaledZ,u_unpack:ht.getUnpackVector()}}(h.tileID,F),u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments),h.needsHillshadePrepare=!1}}function xa(l,h,u,m,b){var w=m.paint.get("raster-fade-duration");if(w>0){var E=o.browser.now(),L=(E-l.timeAdded)/w,F=h?(E-h.timeAdded)/w:-1,j=u.getSource(),nt=b.coveringZoomLevel({tileSize:j.tileSize,roundZoom:j.roundZoom}),it=!h||Math.abs(h.tileID.overscaledZ-nt)>Math.abs(l.tileID.overscaledZ-nt),ot=it&&l.refreshedUponExpiration?1:o.clamp(it?L:1-F,0,1);return l.refreshedUponExpiration&&L>=1&&(l.refreshedUponExpiration=!1),h?{opacity:1,mix:1-ot}:{opacity:ot,mix:0}}return{opacity:1,mix:0}}var Wt=new o.Color(1,0,0,1),ce=new o.Color(0,1,0,1),rn=new o.Color(0,0,1,1),Rn=new o.Color(1,0,1,1),vr=new o.Color(0,1,1,1);function zi(l,h,u,m){Ot(l,0,h+u/2,l.transform.width,u,m)}function hr(l,h,u,m){Ot(l,h-u/2,0,u,l.transform.height,m)}function Ot(l,h,u,m,b,w){var E=l.context,L=E.gl;L.enable(L.SCISSOR_TEST),L.scissor(h*o.browser.devicePixelRatio,u*o.browser.devicePixelRatio,m*o.browser.devicePixelRatio,b*o.browser.devicePixelRatio),E.clear({color:w}),L.disable(L.SCISSOR_TEST)}function he(l,h,u){var m=l.context,b=m.gl,w=u.posMatrix,E=l.useProgram("debug"),L=at.disabled,F=dt.disabled,j=l.colorModeForRenderPass();m.activeTexture.set(b.TEXTURE0),l.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),E.draw(m,b.LINE_STRIP,L,F,j,Rt.disabled,ia(w,o.Color.red),"$debug",l.debugBuffer,l.tileBorderIndexBuffer,l.debugSegments);var nt=h.getTileByID(u.key).latestRawTileData,it=Math.floor((nt&&nt.byteLength||0)/1024),ot=h.getTile(u).tileSize,vt=512/Math.min(ot,512)*(u.overscaledZ/l.transform.zoom)*.5,ft=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ft+=" => "+u.overscaledZ),function(wt,ht){wt.initDebugOverlayCanvas();var Ct=wt.debugOverlayCanvas,Lt=wt.context.gl,qt=wt.debugOverlayCanvas.getContext("2d");qt.clearRect(0,0,Ct.width,Ct.height),qt.shadowColor="white",qt.shadowBlur=2,qt.lineWidth=1.5,qt.strokeStyle="white",qt.textBaseline="top",qt.font="bold 36px Open Sans, sans-serif",qt.fillText(ht,5,5),qt.strokeText(ht,5,5),wt.debugOverlayTexture.update(Ct),wt.debugOverlayTexture.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE)}(l,ft+" "+it+"kb"),E.draw(m,b.TRIANGLES,L,F,Tt.alphaBlended,Rt.disabled,ia(w,o.Color.transparent,vt),"$debug",l.debugBuffer,l.quadTriangleIndexBuffer,l.debugSegments)}var Kt={symbol:function(l,h,u,m,b){if(l.renderPass==="translucent"){var w=dt.disabled,E=l.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(L,F,j,nt,it,ot,vt){for(var ft=F.transform,wt=it==="map",ht=ot==="map",Ct=0,Lt=L;Ct<Lt.length;Ct+=1){var qt=Lt[Ct],ie=nt.getTile(qt),ee=ie.getBucket(j);if(ee&&ee.text&&ee.text.segments.get().length){var oe=o.evaluateSizeForZoom(ee.textSizeData,ft.zoom),ve=gr(ie,1,F.transform.zoom),Ce=kr(qt.posMatrix,ht,wt,F.transform,ve),Pe=j.layout.get("icon-text-fit")!=="none"&&ee.hasIconData();if(oe){var We=Math.pow(2,ft.zoom-ie.tileID.overscaledZ);Yc(ee,wt,ht,vt,o.symbolSize,ft,Ce,qt.posMatrix,We,oe,Pe)}}}}(m,l,u,h,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),b),u.paint.get("icon-opacity").constantOr(1)!==0&&Xo(l,h,u,m,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),w,E),u.paint.get("text-opacity").constantOr(1)!==0&&Xo(l,h,u,m,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),w,E),h.map.showCollisionBoxes&&(cs(l,h,u,m,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),cs(l,h,u,m,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))}},circle:function(l,h,u,m){if(l.renderPass==="translucent"){var b=u.paint.get("circle-opacity"),w=u.paint.get("circle-stroke-width"),E=u.paint.get("circle-stroke-opacity"),L=u.layout.get("circle-sort-key").constantOr(1)!==void 0;if(b.constantOr(1)!==0||w.constantOr(1)!==0&&E.constantOr(1)!==0){for(var F=l.context,j=F.gl,nt=l.depthModeForSublayer(0,at.ReadOnly),it=dt.disabled,ot=l.colorModeForRenderPass(),vt=[],ft=0;ft<m.length;ft++){var wt=m[ft],ht=h.getTile(wt),Ct=ht.getBucket(u);if(Ct){var Lt=Ct.programConfigurations.get(u.id),qt={programConfiguration:Lt,program:l.useProgram("circle",Lt),layoutVertexBuffer:Ct.layoutVertexBuffer,indexBuffer:Ct.indexBuffer,uniformValues:wh(l,wt,ht,u)};if(L)for(var ie=0,ee=Ct.segments.get();ie<ee.length;ie+=1){var oe=ee[ie];vt.push({segments:new o.SegmentVector([oe]),sortKey:oe.sortKey,state:qt})}else vt.push({segments:Ct.segments,sortKey:0,state:qt})}}L&&vt.sort(function(hn,Tn){return hn.sortKey-Tn.sortKey});for(var ve=0,Ce=vt;ve<Ce.length;ve+=1){var Pe=Ce[ve],We=Pe.state;We.program.draw(F,j.TRIANGLES,nt,it,ot,Rt.disabled,We.uniformValues,u.id,We.layoutVertexBuffer,We.indexBuffer,Pe.segments,u.paint,l.transform.zoom,We.programConfiguration)}}}},heatmap:function(l,h,u,m){if(u.paint.get("heatmap-opacity")!==0)if(l.renderPass==="offscreen"){var b=l.context,w=b.gl,E=dt.disabled,L=new Tt([w.ONE,w.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(vt,ft,wt){var ht=vt.gl;vt.activeTexture.set(ht.TEXTURE1),vt.viewport.set([0,0,ft.width/4,ft.height/4]);var Ct=wt.heatmapFbo;if(Ct)ht.bindTexture(ht.TEXTURE_2D,Ct.colorAttachment.get()),vt.bindFramebuffer.set(Ct.framebuffer);else{var Lt=ht.createTexture();ht.bindTexture(ht.TEXTURE_2D,Lt),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_S,ht.CLAMP_TO_EDGE),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_T,ht.CLAMP_TO_EDGE),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MIN_FILTER,ht.LINEAR),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MAG_FILTER,ht.LINEAR),Ct=wt.heatmapFbo=vt.createFramebuffer(ft.width/4,ft.height/4,!1),function(qt,ie,ee,oe){var ve=qt.gl;ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,ie.width/4,ie.height/4,0,ve.RGBA,qt.extRenderToTextureHalfFloat?qt.extTextureHalfFloat.HALF_FLOAT_OES:ve.UNSIGNED_BYTE,null),oe.colorAttachment.set(ee)}(vt,ft,Lt,Ct)}})(b,l,u),b.clear({color:o.Color.transparent});for(var F=0;F<m.length;F++){var j=m[F];if(!h.hasRenderableParent(j)){var nt=h.getTile(j),it=nt.getBucket(u);if(it){var ot=it.programConfigurations.get(u.id);l.useProgram("heatmap",ot).draw(b,w.TRIANGLES,at.disabled,E,L,Rt.disabled,Qs(j.posMatrix,nt,l.transform.zoom,u.paint.get("heatmap-intensity")),u.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,u.paint,l.transform.zoom,ot)}}}b.viewport.set([0,0,l.width,l.height])}else l.renderPass==="translucent"&&(l.context.setColorMode(l.colorModeForRenderPass()),function(vt,ft){var wt=vt.context,ht=wt.gl,Ct=ft.heatmapFbo;if(Ct){wt.activeTexture.set(ht.TEXTURE0),ht.bindTexture(ht.TEXTURE_2D,Ct.colorAttachment.get()),wt.activeTexture.set(ht.TEXTURE1);var Lt=ft.colorRampTexture;Lt||(Lt=ft.colorRampTexture=new o.Texture(wt,ft.colorRamp,ht.RGBA)),Lt.bind(ht.LINEAR,ht.CLAMP_TO_EDGE),vt.useProgram("heatmapTexture").draw(wt,ht.TRIANGLES,at.disabled,dt.disabled,vt.colorModeForRenderPass(),Rt.disabled,function(qt,ie,ee,oe){var ve=o.create();o.ortho(ve,0,qt.width,qt.height,0,0,1);var Ce=qt.context.gl;return{u_matrix:ve,u_world:[Ce.drawingBufferWidth,Ce.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ie.paint.get("heatmap-opacity")}}(vt,ft),ft.id,vt.viewportBuffer,vt.quadTriangleIndexBuffer,vt.viewportSegments,ft.paint,vt.transform.zoom)}}(l,u))},line:function(l,h,u,m){if(l.renderPass==="translucent"){var b=u.paint.get("line-opacity"),w=u.paint.get("line-width");if(b.constantOr(1)!==0&&w.constantOr(1)!==0)for(var E=l.depthModeForSublayer(0,at.ReadOnly),L=l.colorModeForRenderPass(),F=u.paint.get("line-dasharray"),j=u.paint.get("line-pattern"),nt=j.constantOr(1),it=u.paint.get("line-gradient"),ot=u.getCrossfadeParameters(),vt=nt?"linePattern":F?"lineSDF":it?"lineGradient":"line",ft=l.context,wt=ft.gl,ht=!0,Ct=0,Lt=m;Ct<Lt.length;Ct+=1){var qt=Lt[Ct],ie=h.getTile(qt);if(!nt||ie.patternsLoaded()){var ee=ie.getBucket(u);if(ee){var oe=ee.programConfigurations.get(u.id),ve=l.context.program.get(),Ce=l.useProgram(vt,oe),Pe=ht||Ce.program!==ve,We=j.constantOr(null);if(We&&ie.imageAtlas){var hn=ie.imageAtlas,Tn=hn.patternPositions[We.to.toString()],En=hn.patternPositions[We.from.toString()];Tn&&En&&oe.setConstantPatternPositions(Tn,En)}var Oi=nt?Mu(l,ie,u,ot):F?Zc(l,ie,u,F,ot):it?Ri(l,ie,u,ee.lineClipsArray.length):Cl(l,ie,u);if(nt)ft.activeTexture.set(wt.TEXTURE0),ie.imageAtlasTexture.bind(wt.LINEAR,wt.CLAMP_TO_EDGE),oe.updatePaintBuffers(ot);else if(F&&(Pe||l.lineAtlas.dirty))ft.activeTexture.set(wt.TEXTURE0),l.lineAtlas.bind(ft);else if(it){var tn=ee.gradients[u.id],Dn=tn.texture;if(u.gradientVersion!==tn.version){var ei=256;if(u.stepInterpolant){var Hn=h.getSource().maxzoom,Fn=qt.canonical.z===Hn?Math.ceil(1<<l.transform.maxZoom-qt.canonical.z):1;ei=o.clamp(o.nextPowerOfTwo(ee.maxLineLength/o.EXTENT*1024*Fn),256,ft.maxTextureSize)}tn.gradient=o.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:ei,image:tn.gradient||void 0,clips:ee.lineClipsArray}),tn.texture?tn.texture.update(tn.gradient):tn.texture=new o.Texture(ft,tn.gradient,wt.RGBA),tn.version=u.gradientVersion,Dn=tn.texture}ft.activeTexture.set(wt.TEXTURE0),Dn.bind(u.stepInterpolant?wt.NEAREST:wt.LINEAR,wt.CLAMP_TO_EDGE)}Ce.draw(ft,wt.TRIANGLES,E,l.stencilModeForClipping(qt),L,Rt.disabled,Oi,u.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,u.paint,l.transform.zoom,oe,ee.layoutVertexBuffer2),ht=!1}}}}},fill:function(l,h,u,m){var b=u.paint.get("fill-color"),w=u.paint.get("fill-opacity");if(w.constantOr(1)!==0){var E=l.colorModeForRenderPass(),L=u.paint.get("fill-pattern"),F=l.opaquePassEnabledForLayer()&&!L.constantOr(1)&&b.constantOr(o.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(l.renderPass===F){var j=l.depthModeForSublayer(1,l.renderPass==="opaque"?at.ReadWrite:at.ReadOnly);mc(l,h,u,m,j,E,!1)}if(l.renderPass==="translucent"&&u.paint.get("fill-antialias")){var nt=l.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,at.ReadOnly);mc(l,h,u,m,nt,E,!0)}}},"fill-extrusion":function(l,h,u,m){var b=u.paint.get("fill-extrusion-opacity");if(b!==0&&l.renderPass==="translucent"){var w=new at(l.context.gl.LEQUAL,at.ReadWrite,l.depthRangeFor3D);if(b!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))Xc(l,h,u,m,w,dt.disabled,Tt.disabled),Xc(l,h,u,m,w,l.stencilModeFor3D(),l.colorModeForRenderPass());else{var E=l.colorModeForRenderPass();Xc(l,h,u,m,w,dt.disabled,E)}}},hillshade:function(l,h,u,m){if(l.renderPass==="offscreen"||l.renderPass==="translucent"){for(var b=l.context,w=l.depthModeForSublayer(0,at.ReadOnly),E=l.colorModeForRenderPass(),L=l.renderPass==="translucent"?l.stencilConfigForOverlap(m):[{},m],F=L[0],j=0,nt=L[1];j<nt.length;j+=1){var it=nt[j],ot=h.getTile(it);ot.needsHillshadePrepare&&l.renderPass==="offscreen"?Jl(l,ot,u,w,dt.disabled,E):l.renderPass==="translucent"&&Ml(l,ot,u,w,F[it.overscaledZ],E)}b.viewport.set([0,0,l.width,l.height])}},raster:function(l,h,u,m){if(l.renderPass==="translucent"&&u.paint.get("raster-opacity")!==0&&m.length)for(var b=l.context,w=b.gl,E=h.getSource(),L=l.useProgram("raster"),F=l.colorModeForRenderPass(),j=E instanceof gn?[{},m]:l.stencilConfigForOverlap(m),nt=j[0],it=j[1],ot=it[it.length-1].overscaledZ,vt=!l.options.moving,ft=0,wt=it;ft<wt.length;ft+=1){var ht=wt[ft],Ct=l.depthModeForSublayer(ht.overscaledZ-ot,u.paint.get("raster-opacity")===1?at.ReadWrite:at.ReadOnly,w.LESS),Lt=h.getTile(ht),qt=l.transform.calculatePosMatrix(ht.toUnwrapped(),vt);Lt.registerFadeDuration(u.paint.get("raster-fade-duration"));var ie=h.findLoadedParent(ht,0),ee=xa(Lt,ie,h,u,l.transform),oe=void 0,ve=void 0,Ce=u.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;b.activeTexture.set(w.TEXTURE0),Lt.texture.bind(Ce,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),b.activeTexture.set(w.TEXTURE1),ie?(ie.texture.bind(Ce,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),oe=Math.pow(2,ie.tileID.overscaledZ-Lt.tileID.overscaledZ),ve=[Lt.tileID.canonical.x*oe%1,Lt.tileID.canonical.y*oe%1]):Lt.texture.bind(Ce,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var Pe=$c(qt,ve||[0,0],oe||1,ee,u);E instanceof gn?L.draw(b,w.TRIANGLES,Ct,dt.disabled,F,Rt.disabled,Pe,u.id,E.boundsBuffer,l.quadTriangleIndexBuffer,E.boundsSegments):L.draw(b,w.TRIANGLES,Ct,nt[ht.overscaledZ],F,Rt.disabled,Pe,u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}},background:function(l,h,u){var m=u.paint.get("background-color"),b=u.paint.get("background-opacity");if(b!==0){var w=l.context,E=w.gl,L=l.transform,F=L.tileSize,j=u.paint.get("background-pattern");if(!l.isPatternMissing(j)){var nt=!j&&m.a===1&&b===1&&l.opaquePassEnabledForLayer()?"opaque":"translucent";if(l.renderPass===nt){var it=dt.disabled,ot=l.depthModeForSublayer(0,nt==="opaque"?at.ReadWrite:at.ReadOnly),vt=l.colorModeForRenderPass(),ft=l.useProgram(j?"backgroundPattern":"background"),wt=L.coveringTiles({tileSize:F});j&&(w.activeTexture.set(E.TEXTURE0),l.imageManager.bind(l.context));for(var ht=u.getCrossfadeParameters(),Ct=0,Lt=wt;Ct<Lt.length;Ct+=1){var qt=Lt[Ct],ie=l.transform.calculatePosMatrix(qt.toUnwrapped()),ee=j?Tu(ie,b,l,j,{tileID:qt,tileSize:F},ht):Es(ie,b,m);ft.draw(w,E.TRIANGLES,ot,it,vt,Rt.disabled,ee,u.id,l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments)}}}}},debug:function(l,h,u){for(var m=0;m<u.length;m++)he(l,h,u[m])},custom:function(l,h,u){var m=l.context,b=u.implementation;if(l.renderPass==="offscreen"){var w=b.prerender;w&&(l.setCustomLayerDefaults(),m.setColorMode(l.colorModeForRenderPass()),w.call(b,m.gl,l.transform.customLayerMatrix()),m.setDirty(),l.setBaseState())}else if(l.renderPass==="translucent"){l.setCustomLayerDefaults(),m.setColorMode(l.colorModeForRenderPass()),m.setStencilMode(dt.disabled);var E=b.renderingMode==="3d"?new at(l.context.gl.LEQUAL,at.ReadWrite,l.depthRangeFor3D):l.depthModeForSublayer(0,at.ReadOnly);m.setDepthMode(E),b.render(m.gl,l.transform.customLayerMatrix()),m.setDirty(),l.setBaseState(),m.bindFramebuffer.set(null)}}},Ae=function(l,h){this.context=new tt(l),this.transform=h,this._tileTextures={},this.setup(),this.numSublayers=yt.maxUnderzooming+yt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vl,this.gpuTimers={}};Ae.prototype.resize=function(l,h){if(this.width=l*o.browser.devicePixelRatio,this.height=h*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var u=0,m=this.style._order;u<m.length;u+=1)this.style._layers[m[u]].resize()},Ae.prototype.setup=function(){var l=this.context,h=new o.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(o.EXTENT,0),h.emplaceBack(0,o.EXTENT),h.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(h,Zr.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var u=new o.StructArrayLayout2i4;u.emplaceBack(0,0),u.emplaceBack(o.EXTENT,0),u.emplaceBack(0,o.EXTENT),u.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(u,Zr.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var m=new o.StructArrayLayout4i8;m.emplaceBack(0,0,0,0),m.emplaceBack(o.EXTENT,0,o.EXTENT,0),m.emplaceBack(0,o.EXTENT,0,o.EXTENT),m.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(m,Vn.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var b=new o.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(b,Zr.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var w=new o.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(w);var E=new o.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(E),this.emptyTexture=new o.Texture(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);var L=this.context.gl;this.stencilClearMode=new dt({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO)},Ae.prototype.clearStencil=function(){var l=this.context,h=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var u=o.create();o.ortho(u,0,this.width,this.height,0,0,1),o.scale(u,u,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,h.TRIANGLES,at.disabled,this.stencilClearMode,Tt.disabled,Rt.disabled,Fo(u),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ae.prototype._renderTileClippingMasks=function(l,h){if(this.currentStencilSource!==l.source&&l.isTileClipped()&&h&&h.length){this.currentStencilSource=l.source;var u=this.context,m=u.gl;this.nextStencilID+h.length>256&&this.clearStencil(),u.setColorMode(Tt.disabled),u.setDepthMode(at.disabled);var b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,E=h;w<E.length;w+=1){var L=E[w],F=this._tileClippingMaskIDs[L.key]=this.nextStencilID++;b.draw(u,m.TRIANGLES,at.disabled,new dt({func:m.ALWAYS,mask:0},F,255,m.KEEP,m.KEEP,m.REPLACE),Tt.disabled,Rt.disabled,Fo(L.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ae.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var l=this.nextStencilID++,h=this.context.gl;return new dt({func:h.NOTEQUAL,mask:255},l,255,h.KEEP,h.KEEP,h.REPLACE)},Ae.prototype.stencilModeForClipping=function(l){var h=this.context.gl;return new dt({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,h.KEEP,h.KEEP,h.REPLACE)},Ae.prototype.stencilConfigForOverlap=function(l){var h,u=this.context.gl,m=l.sort(function(F,j){return j.overscaledZ-F.overscaledZ}),b=m[m.length-1].overscaledZ,w=m[0].overscaledZ-b+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var E={},L=0;L<w;L++)E[L+b]=new dt({func:u.GEQUAL,mask:255},L+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=w,[E,m]}return[(h={},h[b]=dt.disabled,h),m]},Ae.prototype.colorModeForRenderPass=function(){var l=this.context.gl;return this._showOverdrawInspector?new Tt([l.CONSTANT_COLOR,l.ONE],new o.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Tt.unblended:Tt.alphaBlended},Ae.prototype.depthModeForSublayer=function(l,h,u){if(!this.opaquePassEnabledForLayer())return at.disabled;var m=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new at(u||this.context.gl.LEQUAL,h,[m,m])},Ae.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ae.prototype.render=function(l,h){var u=this;this.style=l,this.options=h,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var m=this.style._order,b=this.style.sourceCaches;for(var w in b){var E=b[w];E.used&&E.prepare(this.context)}var L,F,j={},nt={},it={};for(var ot in b){var vt=b[ot];j[ot]=vt.getVisibleCoordinates(),nt[ot]=j[ot].slice().reverse(),it[ot]=vt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ft=0;ft<m.length;ft++)if(this.style._layers[m[ft]].is3D()){this.opaquePassCutoff=ft;break}this.renderPass="offscreen";for(var wt=0,ht=m;wt<ht.length;wt+=1){var Ct=this.style._layers[ht[wt]];if(Ct.hasOffscreenPass()&&!Ct.isHidden(this.transform.zoom)){var Lt=nt[Ct.source];(Ct.type==="custom"||Lt.length)&&this.renderLayer(this,b[Ct.source],Ct,Lt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){var qt=this.style._layers[m[this.currentLayer]],ie=b[qt.source],ee=j[qt.source];this._renderTileClippingMasks(qt,ee),this.renderLayer(this,ie,qt,ee)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){var oe=this.style._layers[m[this.currentLayer]],ve=b[oe.source],Ce=(oe.type==="symbol"?it:nt)[oe.source];this._renderTileClippingMasks(oe,j[oe.source]),this.renderLayer(this,ve,oe,Ce)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Pe){Pe.source&&!Pe.isHidden(u.transform.zoom)&&(Pe.source!==(F&&F.id)&&(F=u.style.sourceCaches[Pe.source]),(!L||L.getSource().maxzoom<F.getSource().maxzoom)&&(L=F))}),L&&Kt.debug(this,L,L.getVisibleCoordinates())),this.options.showPadding&&function(Pe){var We=Pe.transform.padding;zi(Pe,Pe.transform.height-(We.top||0),3,Wt),zi(Pe,We.bottom||0,3,ce),hr(Pe,We.left||0,3,rn),hr(Pe,Pe.transform.width-(We.right||0),3,Rn);var hn=Pe.transform.centerPoint;(function(Tn,En,Oi,tn){Ot(Tn,En-1,Oi-10,2,20,tn),Ot(Tn,En-10,Oi-1,20,2,tn)})(Pe,hn.x,Pe.transform.height-hn.y,vr)}(this),this.context.setDefault()},Ae.prototype.renderLayer=function(l,h,u,m){u.isHidden(this.transform.zoom)||(u.type==="background"||u.type==="custom"||m.length)&&(this.id=u.id,this.gpuTimingStart(u),Kt[u.type](l,h,u,m,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ae.prototype.gpuTimingStart=function(l){if(this.options.gpuTiming){var h=this.context.extTimerQuery,u=this.gpuTimers[l.id];u||(u=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),u.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,u.query)}},Ae.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}},Ae.prototype.collectGpuTimers=function(){var l=this.gpuTimers;return this.gpuTimers={},l},Ae.prototype.queryGpuTimers=function(l){var h={};for(var u in l){var m=l[u],b=this.context.extTimerQuery,w=b.getQueryObjectEXT(m.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(m.query),h[u]=w}return h},Ae.prototype.translatePosMatrix=function(l,h,u,m,b){if(!u[0]&&!u[1])return l;var w=b?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(w){var E=Math.sin(w),L=Math.cos(w);u=[u[0]*L-u[1]*E,u[0]*E+u[1]*L]}var F=[b?u[0]:gr(h,u[0],this.transform.zoom),b?u[1]:gr(h,u[1],this.transform.zoom),0],j=new Float32Array(16);return o.translate(j,l,F),j},Ae.prototype.saveTileTexture=function(l){var h=this._tileTextures[l.size[0]];h?h.push(l):this._tileTextures[l.size[0]]=[l]},Ae.prototype.getTileTexture=function(l){var h=this._tileTextures[l];return h&&h.length>0?h.pop():null},Ae.prototype.isPatternMissing=function(l){if(!l)return!1;if(!l.from||!l.to)return!0;var h=this.imageManager.getPattern(l.from.toString()),u=this.imageManager.getPattern(l.to.toString());return!h||!u},Ae.prototype.useProgram=function(l,h){this.cache=this.cache||{};var u=""+l+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[u]||(this.cache[u]=new qc(this.context,l,Vr[l],h,Js[l],this._showOverdrawInspector)),this.cache[u]},Ae.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ae.prototype.setBaseState=function(){var l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)},Ae.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ae.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Un=function(l,h){this.points=l,this.planes=h};Un.fromInvProjectionMatrix=function(l,h,u){var m=Math.pow(2,u),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(E){return o.transformMat4([],E,l)}).map(function(E){return o.scale$1([],E,1/E[3]/h*m)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(E){var L=o.sub([],b[E[0]],b[E[1]]),F=o.sub([],b[E[2]],b[E[1]]),j=o.normalize([],o.cross([],L,F)),nt=-o.dot(j,b[E[1]]);return j.concat(nt)});return new Un(b,w)};var li=function(l,h){this.min=l,this.max=h,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};li.prototype.quadrant=function(l){for(var h=[l%2==0,l<2],u=o.clone$2(this.min),m=o.clone$2(this.max),b=0;b<h.length;b++)u[b]=h[b]?this.min[b]:this.center[b],m[b]=h[b]?this.center[b]:this.max[b];return m[2]=this.max[2],new li(u,m)},li.prototype.distanceX=function(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]},li.prototype.distanceY=function(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]},li.prototype.intersects=function(l){for(var h=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],u=!0,m=0;m<l.planes.length;m++){for(var b=l.planes[m],w=0,E=0;E<h.length;E++)w+=o.dot$1(b,h[E])>=0;if(w===0)return 0;w!==h.length&&(u=!1)}if(u)return 2;for(var L=0;L<3;L++){for(var F=Number.MAX_VALUE,j=-Number.MAX_VALUE,nt=0;nt<l.points.length;nt++){var it=l.points[nt][L]-this.min[L];F=Math.min(F,it),j=Math.max(j,it)}if(j<0||F>this.max[L]-this.min[L])return 0}return 1};var Mi=function(l,h,u,m){if(l===void 0&&(l=0),h===void 0&&(h=0),u===void 0&&(u=0),m===void 0&&(m=0),isNaN(l)||l<0||isNaN(h)||h<0||isNaN(u)||u<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=h,this.left=u,this.right=m};Mi.prototype.interpolate=function(l,h,u){return h.top!=null&&l.top!=null&&(this.top=o.number(l.top,h.top,u)),h.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,h.bottom,u)),h.left!=null&&l.left!=null&&(this.left=o.number(l.left,h.left,u)),h.right!=null&&l.right!=null&&(this.right=o.number(l.right,h.right,u)),this},Mi.prototype.getCenter=function(l,h){var u=o.clamp((this.left+l-this.right)/2,0,l),m=o.clamp((this.top+h-this.bottom)/2,0,h);return new o.Point(u,m)},Mi.prototype.equals=function(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right},Mi.prototype.clone=function(){return new Mi(this.top,this.bottom,this.left,this.right)},Mi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var dn=function(l,h,u,m,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||b,this._minZoom=l||0,this._maxZoom=h||22,this._minPitch=u??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Mi,this._posMatrixCache={},this._alignedPosMatrixCache={}},Hi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};dn.prototype.clone=function(){var l=new dn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l},Hi.minZoom.get=function(){return this._minZoom},Hi.minZoom.set=function(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))},Hi.maxZoom.get=function(){return this._maxZoom},Hi.maxZoom.set=function(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))},Hi.minPitch.get=function(){return this._minPitch},Hi.minPitch.set=function(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))},Hi.maxPitch.get=function(){return this._maxPitch},Hi.maxPitch.set=function(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))},Hi.renderWorldCopies.get=function(){return this._renderWorldCopies},Hi.renderWorldCopies.set=function(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l},Hi.worldSize.get=function(){return this.tileSize*this.scale},Hi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Hi.size.get=function(){return new o.Point(this.width,this.height)},Hi.bearing.get=function(){return-this.angle/Math.PI*180},Hi.bearing.set=function(l){var h=-o.wrap(l,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Hi.pitch.get=function(){return this._pitch/Math.PI*180},Hi.pitch.set=function(l){var h=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())},Hi.fov.get=function(){return this._fov/Math.PI*180},Hi.fov.set=function(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())},Hi.zoom.get=function(){return this._zoom},Hi.zoom.set=function(l){var h=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.scale=this.zoomScale(h),this.tileZoom=Math.floor(h),this.zoomFraction=h-this.tileZoom,this._constrain(),this._calcMatrices())},Hi.center.get=function(){return this._center},Hi.center.set=function(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())},Hi.padding.get=function(){return this._edgeInsets.toJSON()},Hi.padding.set=function(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())},Hi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},dn.prototype.isPaddingEqual=function(l){return this._edgeInsets.equals(l)},dn.prototype.interpolatePadding=function(l,h,u){this._unmodified=!1,this._edgeInsets.interpolate(l,h,u),this._constrain(),this._calcMatrices()},dn.prototype.coveringZoomLevel=function(l){var h=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,h)},dn.prototype.getVisibleUnwrappedCoordinates=function(l){var h=[new o.UnwrappedTileID(0,l)];if(this._renderWorldCopies)for(var u=this.pointCoordinate(new o.Point(0,0)),m=this.pointCoordinate(new o.Point(this.width,0)),b=this.pointCoordinate(new o.Point(this.width,this.height)),w=this.pointCoordinate(new o.Point(0,this.height)),E=Math.floor(Math.min(u.x,m.x,b.x,w.x)),L=Math.floor(Math.max(u.x,m.x,b.x,w.x)),F=E-1;F<=L+1;F++)F!==0&&h.push(new o.UnwrappedTileID(F,l));return h},dn.prototype.coveringTiles=function(l){var h=this.coveringZoomLevel(l),u=h;if(l.minzoom!==void 0&&h<l.minzoom)return[];l.maxzoom!==void 0&&h>l.maxzoom&&(h=l.maxzoom);var m=o.MercatorCoordinate.fromLngLat(this.center),b=Math.pow(2,h),w=[b*m.x,b*m.y,0],E=Un.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h),L=l.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(L=h);var F=function(Pe){return{aabb:new li([Pe*b,0,0],[(Pe+1)*b,b,0]),zoom:0,x:0,y:0,wrap:Pe,fullyVisible:!1}},j=[],nt=[],it=h,ot=l.reparseOverscaled?u:h;if(this._renderWorldCopies)for(var vt=1;vt<=3;vt++)j.push(F(-vt)),j.push(F(vt));for(j.push(F(0));j.length>0;){var ft=j.pop(),wt=ft.x,ht=ft.y,Ct=ft.fullyVisible;if(!Ct){var Lt=ft.aabb.intersects(E);if(Lt===0)continue;Ct=Lt===2}var qt=ft.aabb.distanceX(w),ie=ft.aabb.distanceY(w),ee=Math.max(Math.abs(qt),Math.abs(ie));if(ft.zoom===it||ee>3+(1<<it-ft.zoom)-2&&ft.zoom>=L)nt.push({tileID:new o.OverscaledTileID(ft.zoom===it?ot:ft.zoom,ft.wrap,ft.zoom,wt,ht),distanceSq:o.sqrLen([w[0]-.5-wt,w[1]-.5-ht])});else for(var oe=0;oe<4;oe++){var ve=(wt<<1)+oe%2,Ce=(ht<<1)+(oe>>1);j.push({aabb:ft.aabb.quadrant(oe),zoom:ft.zoom+1,x:ve,y:Ce,wrap:ft.wrap,fullyVisible:Ct})}}return nt.sort(function(Pe,We){return Pe.distanceSq-We.distanceSq}).map(function(Pe){return Pe.tileID})},dn.prototype.resize=function(l,h){this.width=l,this.height=h,this.pixelsToGLUnits=[2/l,-2/h],this._constrain(),this._calcMatrices()},Hi.unmodified.get=function(){return this._unmodified},dn.prototype.zoomScale=function(l){return Math.pow(2,l)},dn.prototype.scaleZoom=function(l){return Math.log(l)/Math.LN2},dn.prototype.project=function(l){var h=o.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(l.lng)*this.worldSize,o.mercatorYfromLat(h)*this.worldSize)},dn.prototype.unproject=function(l){return new o.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()},Hi.point.get=function(){return this.project(this.center)},dn.prototype.setLocationAtPoint=function(l,h){var u=this.pointCoordinate(h),m=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(l),w=new o.MercatorCoordinate(b.x-(u.x-m.x),b.y-(u.y-m.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},dn.prototype.locationPoint=function(l){return this.coordinatePoint(this.locationCoordinate(l))},dn.prototype.pointLocation=function(l){return this.coordinateLocation(this.pointCoordinate(l))},dn.prototype.locationCoordinate=function(l){return o.MercatorCoordinate.fromLngLat(l)},dn.prototype.coordinateLocation=function(l){return l.toLngLat()},dn.prototype.pointCoordinate=function(l){var h=[l.x,l.y,0,1],u=[l.x,l.y,1,1];o.transformMat4(h,h,this.pixelMatrixInverse),o.transformMat4(u,u,this.pixelMatrixInverse);var m=h[3],b=u[3],w=h[1]/m,E=u[1]/b,L=h[2]/m,F=u[2]/b,j=L===F?0:(0-L)/(F-L);return new o.MercatorCoordinate(o.number(h[0]/m,u[0]/b,j)/this.worldSize,o.number(w,E,j)/this.worldSize)},dn.prototype.coordinatePoint=function(l){var h=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(h,h,this.pixelMatrix),new o.Point(h[0]/h[3],h[1]/h[3])},dn.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},dn.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},dn.prototype.setMaxBounds=function(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},dn.prototype.calculatePosMatrix=function(l,h){h===void 0&&(h=!1);var u=l.key,m=h?this._alignedPosMatrixCache:this._posMatrixCache;if(m[u])return m[u];var b=l.canonical,w=this.worldSize/this.zoomScale(b.z),E=b.x+Math.pow(2,b.z)*l.wrap,L=o.identity(new Float64Array(16));return o.translate(L,L,[E*w,b.y*w,0]),o.scale(L,L,[w/o.EXTENT,w/o.EXTENT,1]),o.multiply(L,h?this.alignedProjMatrix:this.projMatrix,L),m[u]=new Float32Array(L),m[u]},dn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},dn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var l,h,u,m,b=-90,w=90,E=-180,L=180,F=this.size,j=this._unmodified;if(this.latRange){var nt=this.latRange;b=o.mercatorYfromLat(nt[1])*this.worldSize,l=(w=o.mercatorYfromLat(nt[0])*this.worldSize)-b<F.y?F.y/(w-b):0}if(this.lngRange){var it=this.lngRange;E=o.mercatorXfromLng(it[0])*this.worldSize,h=(L=o.mercatorXfromLng(it[1])*this.worldSize)-E<F.x?F.x/(L-E):0}var ot=this.point,vt=Math.max(h||0,l||0);if(vt)return this.center=this.unproject(new o.Point(h?(L+E)/2:ot.x,l?(w+b)/2:ot.y)),this.zoom+=this.scaleZoom(vt),this._unmodified=j,void(this._constraining=!1);if(this.latRange){var ft=ot.y,wt=F.y/2;ft-wt<b&&(m=b+wt),ft+wt>w&&(m=w-wt)}if(this.lngRange){var ht=ot.x,Ct=F.x/2;ht-Ct<E&&(u=E+Ct),ht+Ct>L&&(u=L-Ct)}u===void 0&&m===void 0||(this.center=this.unproject(new o.Point(u!==void 0?u:ot.x,m!==void 0?m:ot.y))),this._unmodified=j,this._constraining=!1}},dn.prototype._calcMatrices=function(){if(this.height){var l=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var h=Math.PI/2+this._pitch,u=this._fov*(.5+l.y/this.height),m=Math.sin(u)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-h-u,.01,Math.PI-.01)),b=this.point,w=b.x,E=b.y,L=1.01*(Math.cos(Math.PI/2-this._pitch)*m+this.cameraToCenterDistance),F=this.height/50,j=new Float64Array(16);o.perspective(j,this._fov,this.width/this.height,F,L),j[8]=2*-l.x/this.width,j[9]=2*l.y/this.height,o.scale(j,j,[1,-1,1]),o.translate(j,j,[0,0,-this.cameraToCenterDistance]),o.rotateX(j,j,this._pitch),o.rotateZ(j,j,this.angle),o.translate(j,j,[-w,-E,0]),this.mercatorMatrix=o.scale([],j,[this.worldSize,this.worldSize,this.worldSize]),o.scale(j,j,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=j,this.invProjMatrix=o.invert([],this.projMatrix);var nt=this.width%2/2,it=this.height%2/2,ot=Math.cos(this.angle),vt=Math.sin(this.angle),ft=w-Math.round(w)+ot*nt+vt*it,wt=E-Math.round(E)+ot*it+vt*nt,ht=new Float64Array(j);if(o.translate(ht,ht,[ft>.5?ft-1:ft,wt>.5?wt-1:wt,0]),this.alignedProjMatrix=ht,j=o.create(),o.scale(j,j,[this.width/2,-this.height/2,1]),o.translate(j,j,[1,-1,0]),this.labelPlaneMatrix=j,j=o.create(),o.scale(j,j,[1,-1,1]),o.translate(j,j,[-1,-1,0]),o.scale(j,j,[2/this.width,2/this.height,1]),this.glCoordMatrix=j,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(j=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=j,this._posMatrixCache={},this._alignedPosMatrixCache={}}},dn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var l=this.pointCoordinate(new o.Point(0,0)),h=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance},dn.prototype.getCameraPoint=function(){var l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,l))},dn.prototype.getCameraQueryGeometry=function(l){var h=this.getCameraPoint();if(l.length===1)return[l[0],h];for(var u=h.x,m=h.y,b=h.x,w=h.y,E=0,L=l;E<L.length;E+=1){var F=L[E];u=Math.min(u,F.x),m=Math.min(m,F.y),b=Math.max(b,F.x),w=Math.max(w,F.y)}return[new o.Point(u,m),new o.Point(b,m),new o.Point(b,w),new o.Point(u,w),new o.Point(u,m)]},Object.defineProperties(dn.prototype,Hi);var Ko=function(l){var h,u,m,b;this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(h=this._updateHashUnthrottled.bind(this),u=!1,m=null,b=function(){m=null,u&&(h(),m=setTimeout(b,300),u=!1)},function(){return u=!0,m||b(),m})};Ko.prototype.addTo=function(l){return this._map=l,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ko.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ko.prototype.getHashString=function(l){var h=this._map.getCenter(),u=Math.round(100*this._map.getZoom())/100,m=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,m),w=Math.round(h.lng*b)/b,E=Math.round(h.lat*b)/b,L=this._map.getBearing(),F=this._map.getPitch(),j="";if(j+=l?"/"+w+"/"+E+"/"+u:u+"/"+E+"/"+w,(L||F)&&(j+="/"+Math.round(10*L)/10),F&&(j+="/"+Math.round(F)),this._hashName){var nt=this._hashName,it=!1,ot=o.window.location.hash.slice(1).split("&").map(function(vt){var ft=vt.split("=")[0];return ft===nt?(it=!0,ft+"="+j):vt}).filter(function(vt){return vt});return it||ot.push(nt+"="+j),"#"+ot.join("&")}return"#"+j},Ko.prototype._getCurrentHash=function(){var l,h=this,u=o.window.location.hash.replace("#","");return this._hashName?(u.split("&").map(function(m){return m.split("=")}).forEach(function(m){m[0]===h._hashName&&(l=m)}),(l&&l[1]||"").split("/")):u.split("/")},Ko.prototype._onHashChange=function(){var l=this._getCurrentHash();if(l.length>=3&&!l.some(function(u){return isNaN(u)})){var h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:h,pitch:+(l[4]||0)}),!0}return!1},Ko.prototype._updateHashUnthrottled=function(){var l=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,l)}catch{}};var io={linearity:.3,easing:o.bezier(0,0,.3,1)},Fa=o.extend({deceleration:2500,maxSpeed:1400},io),Pu=o.extend({deceleration:20,maxSpeed:1400},io),Lu=o.extend({deceleration:1e3,maxSpeed:360},io),Kc=o.extend({deceleration:1e3,maxSpeed:90},io),$i=function(l){this._map=l,this.clear()};function Ln(l,h){(!l.duration||l.duration<h.duration)&&(l.duration=h.duration,l.easing=h.easing)}function Za(l,h,u){var m=u.maxSpeed,b=u.linearity,w=u.deceleration,E=o.clamp(l*b/(h/1e3),-m,m),L=Math.abs(E)/(w*b);return{easing:u.easing,duration:1e3*L,amount:E*(L/2)}}$i.prototype.clear=function(){this._inertiaBuffer=[]},$i.prototype.record=function(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:l})},$i.prototype._drainInertiaBuffer=function(){for(var l=this._inertiaBuffer,h=o.browser.now();l.length>0&&h-l[0].time>160;)l.shift()},$i.prototype._onMoveEnd=function(l){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var h={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},u=0,m=this._inertiaBuffer;u<m.length;u+=1){var b=m[u].settings;h.zoom+=b.zoomDelta||0,h.bearing+=b.bearingDelta||0,h.pitch+=b.pitchDelta||0,b.panDelta&&h.pan._add(b.panDelta),b.around&&(h.around=b.around),b.pinchAround&&(h.pinchAround=b.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(h.pan.mag()){var L=Za(h.pan.mag(),w,o.extend({},Fa,l||{}));E.offset=h.pan.mult(L.amount/h.pan.mag()),E.center=this._map.transform.center,Ln(E,L)}if(h.zoom){var F=Za(h.zoom,w,Pu);E.zoom=this._map.transform.zoom+F.amount,Ln(E,F)}if(h.bearing){var j=Za(h.bearing,w,Lu);E.bearing=this._map.transform.bearing+o.clamp(j.amount,-179,179),Ln(E,j)}if(h.pitch){var nt=Za(h.pitch,w,Kc);E.pitch=this._map.transform.pitch+nt.amount,Ln(E,nt)}if(E.zoom||E.bearing){var it=h.pinchAround===void 0?h.around:h.pinchAround;E.around=it?this._map.unproject(it):this._map.getCenter()}return this.clear(),o.extend(E,{noMoveStart:!0})}};var fr=function(l){function h(m,b,w,E){E===void 0&&(E={});var L=_.mousePos(b.getCanvasContainer(),w),F=b.unproject(L);l.call(this,m,o.extend({point:L,lngLat:F,originalEvent:w},E)),this._defaultPrevented=!1,this.target=b}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var u={defaultPrevented:{configurable:!0}};return h.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(h.prototype,u),h}(o.Event),Ss=function(l){function h(m,b,w){var E=m==="touchend"?w.changedTouches:w.touches,L=_.touchPos(b.getCanvasContainer(),E),F=L.map(function(it){return b.unproject(it)}),j=L.reduce(function(it,ot,vt,ft){return it.add(ot.div(ft.length))},new o.Point(0,0)),nt=b.unproject(j);l.call(this,m,{points:L,point:j,lngLats:F,lngLat:nt,originalEvent:w}),this._defaultPrevented=!1}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var u={defaultPrevented:{configurable:!0}};return h.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(h.prototype,u),h}(o.Event),Na=function(l){function h(m,b,w){l.call(this,m,{originalEvent:w}),this._defaultPrevented=!1}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var u={defaultPrevented:{configurable:!0}};return h.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(h.prototype,u),h}(o.Event),sr=function(l,h){this._map=l,this._clickTolerance=h.clickTolerance};sr.prototype.reset=function(){delete this._mousedownPos},sr.prototype.wheel=function(l){return this._firePreventable(new Na(l.type,this._map,l))},sr.prototype.mousedown=function(l,h){return this._mousedownPos=h,this._firePreventable(new fr(l.type,this._map,l))},sr.prototype.mouseup=function(l){this._map.fire(new fr(l.type,this._map,l))},sr.prototype.click=function(l,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new fr(l.type,this._map,l))},sr.prototype.dblclick=function(l){return this._firePreventable(new fr(l.type,this._map,l))},sr.prototype.mouseover=function(l){this._map.fire(new fr(l.type,this._map,l))},sr.prototype.mouseout=function(l){this._map.fire(new fr(l.type,this._map,l))},sr.prototype.touchstart=function(l){return this._firePreventable(new Ss(l.type,this._map,l))},sr.prototype.touchmove=function(l){this._map.fire(new Ss(l.type,this._map,l))},sr.prototype.touchend=function(l){this._map.fire(new Ss(l.type,this._map,l))},sr.prototype.touchcancel=function(l){this._map.fire(new Ss(l.type,this._map,l))},sr.prototype._firePreventable=function(l){if(this._map.fire(l),l.defaultPrevented)return{}},sr.prototype.isEnabled=function(){return!0},sr.prototype.isActive=function(){return!1},sr.prototype.enable=function(){},sr.prototype.disable=function(){};var Xe=function(l){this._map=l};Xe.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Xe.prototype.mousemove=function(l){this._map.fire(new fr(l.type,this._map,l))},Xe.prototype.mousedown=function(){this._delayContextMenu=!0},Xe.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Xe.prototype.contextmenu=function(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new fr(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()},Xe.prototype.isEnabled=function(){return!0},Xe.prototype.isActive=function(){return!1},Xe.prototype.enable=function(){},Xe.prototype.disable=function(){};var ro=function(l,h){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=h.clickTolerance||1};function ba(l,h){for(var u={},m=0;m<l.length;m++)u[l[m].identifier]=h[m];return u}ro.prototype.isEnabled=function(){return!!this._enabled},ro.prototype.isActive=function(){return!!this._active},ro.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ro.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ro.prototype.mousedown=function(l,h){this.isEnabled()&&l.shiftKey&&l.button===0&&(_.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)},ro.prototype.mousemoveWindow=function(l,h){if(this._active){var u=h;if(!(this._lastPos.equals(u)||!this._box&&u.dist(this._startPos)<this._clickTolerance)){var m=this._startPos;this._lastPos=u,this._box||(this._box=_.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));var b=Math.min(m.x,u.x),w=Math.max(m.x,u.x),E=Math.min(m.y,u.y),L=Math.max(m.y,u.y);_.setTransform(this._box,"translate("+b+"px,"+E+"px)"),this._box.style.width=w-b+"px",this._box.style.height=L-E+"px"}}},ro.prototype.mouseupWindow=function(l,h){var u=this;if(this._active&&l.button===0){var m=this._startPos,b=h;if(this.reset(),_.suppressClick(),m.x!==b.x||m.y!==b.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:function(w){return w.fitScreenCoordinates(m,b,u._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",l)}},ro.prototype.keydown=function(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))},ro.prototype.blur=function(){this.reset()},ro.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos},ro.prototype._fireEvent=function(l,h){return this._map.fire(new o.Event(l,{originalEvent:h}))};var Aa=function(l){this.reset(),this.numTouches=l.numTouches};Aa.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Aa.prototype.touchstart=function(l,h,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),u.length===this.numTouches&&(this.centroid=function(m){for(var b=new o.Point(0,0),w=0,E=m;w<E.length;w+=1)b._add(E[w]);return b.div(m.length)}(h),this.touches=ba(u,h)))},Aa.prototype.touchmove=function(l,h,u){if(!this.aborted&&this.centroid){var m=ba(u,h);for(var b in this.touches){var w=m[b];(!w||w.dist(this.touches[b])>30)&&(this.aborted=!0)}}},Aa.prototype.touchend=function(l,h,u){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),u.length===0){var m=!this.aborted&&this.centroid;if(this.reset(),m)return m}};var Po=function(l){this.singleTap=new Aa(l),this.numTaps=l.numTaps,this.reset()};Po.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Po.prototype.touchstart=function(l,h,u){this.singleTap.touchstart(l,h,u)},Po.prototype.touchmove=function(l,h,u){this.singleTap.touchmove(l,h,u)},Po.prototype.touchend=function(l,h,u){var m=this.singleTap.touchend(l,h,u);if(m){var b=l.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(m)<30;if(b&&w||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}};var Lo=function(){this._zoomIn=new Po({numTouches:1,numTaps:2}),this._zoomOut=new Po({numTouches:2,numTaps:1}),this.reset()};Lo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Lo.prototype.touchstart=function(l,h,u){this._zoomIn.touchstart(l,h,u),this._zoomOut.touchstart(l,h,u)},Lo.prototype.touchmove=function(l,h,u){this._zoomIn.touchmove(l,h,u),this._zoomOut.touchmove(l,h,u)},Lo.prototype.touchend=function(l,h,u){var m=this,b=this._zoomIn.touchend(l,h,u),w=this._zoomOut.touchend(l,h,u);return b?(this._active=!0,l.preventDefault(),setTimeout(function(){return m.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(b)},{originalEvent:l})}}):w?(this._active=!0,l.preventDefault(),setTimeout(function(){return m.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(w)},{originalEvent:l})}}):void 0},Lo.prototype.touchcancel=function(){this.reset()},Lo.prototype.enable=function(){this._enabled=!0},Lo.prototype.disable=function(){this._enabled=!1,this.reset()},Lo.prototype.isEnabled=function(){return this._enabled},Lo.prototype.isActive=function(){return this._active};var tu={0:1,2:2},Re=function(l){this.reset(),this._clickTolerance=l.clickTolerance||1};Re.prototype.blur=function(){this.reset()},Re.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Re.prototype._correctButton=function(l,h){return!1},Re.prototype._move=function(l,h){return{}},Re.prototype.mousedown=function(l,h){if(!this._lastPoint){var u=_.mouseButton(l);this._correctButton(l,u)&&(this._lastPoint=h,this._eventButton=u)}},Re.prototype.mousemoveWindow=function(l,h){var u=this._lastPoint;if(u){if(l.preventDefault(),function(m,b){var w=tu[b];return m.buttons===void 0||(m.buttons&w)!==w}(l,this._eventButton))this.reset();else if(this._moved||!(h.dist(u)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(u,h)}},Re.prototype.mouseupWindow=function(l){this._lastPoint&&_.mouseButton(l)===this._eventButton&&(this._moved&&_.suppressClick(),this.reset())},Re.prototype.enable=function(){this._enabled=!0},Re.prototype.disable=function(){this._enabled=!1,this.reset()},Re.prototype.isEnabled=function(){return this._enabled},Re.prototype.isActive=function(){return this._active};var el=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.mousedown=function(u,m){l.prototype.mousedown.call(this,u,m),this._lastPoint&&(this._active=!0)},h.prototype._correctButton=function(u,m){return m===0&&!u.ctrlKey},h.prototype._move=function(u,m){return{around:m,panDelta:m.sub(u)}},h}(Re),El=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype._correctButton=function(u,m){return m===0&&u.ctrlKey||m===2},h.prototype._move=function(u,m){var b=.8*(m.x-u.x);if(b)return this._active=!0,{bearingDelta:b}},h.prototype.contextmenu=function(u){u.preventDefault()},h}(Re),Sl=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype._correctButton=function(u,m){return m===0&&u.ctrlKey||m===2},h.prototype._move=function(u,m){var b=-.5*(m.y-u.y);if(b)return this._active=!0,{pitchDelta:b}},h.prototype.contextmenu=function(u){u.preventDefault()},h}(Re),oo=function(l){this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset()};oo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},oo.prototype.touchstart=function(l,h,u){return this._calculateTransform(l,h,u)},oo.prototype.touchmove=function(l,h,u){if(this._active&&!(u.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,h,u)},oo.prototype.touchend=function(l,h,u){this._calculateTransform(l,h,u),this._active&&u.length<this._minTouches&&this.reset()},oo.prototype.touchcancel=function(){this.reset()},oo.prototype._calculateTransform=function(l,h,u){u.length>0&&(this._active=!0);var m=ba(u,h),b=new o.Point(0,0),w=new o.Point(0,0),E=0;for(var L in m){var F=m[L],j=this._touches[L];j&&(b._add(F),w._add(F.sub(j)),E++,m[L]=F)}if(this._touches=m,!(E<this._minTouches)&&w.mag()){var nt=w.div(E);if(this._sum._add(nt),!(this._sum.mag()<this._clickTolerance))return{around:b.div(E),panDelta:nt}}},oo.prototype.enable=function(){this._enabled=!0},oo.prototype.disable=function(){this._enabled=!1,this.reset()},oo.prototype.isEnabled=function(){return this._enabled},oo.prototype.isActive=function(){return this._active};var fo=function(){this.reset()};function yf(l,h,u){for(var m=0;m<l.length;m++)if(l[m].identifier===u)return h[m]}function _f(l,h){return Math.log(l/h)/Math.LN2}fo.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},fo.prototype._start=function(l){},fo.prototype._move=function(l,h,u){return{}},fo.prototype.touchstart=function(l,h,u){this._firstTwoTouches||u.length<2||(this._firstTwoTouches=[u[0].identifier,u[1].identifier],this._start([h[0],h[1]]))},fo.prototype.touchmove=function(l,h,u){if(this._firstTwoTouches){l.preventDefault();var m=this._firstTwoTouches,b=m[1],w=yf(u,h,m[0]),E=yf(u,h,b);if(w&&E){var L=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],L,l)}}},fo.prototype.touchend=function(l,h,u){if(this._firstTwoTouches){var m=this._firstTwoTouches,b=m[1],w=yf(u,h,m[0]),E=yf(u,h,b);w&&E||(this._active&&_.suppressClick(),this.reset())}},fo.prototype.touchcancel=function(){this.reset()},fo.prototype.enable=function(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"},fo.prototype.disable=function(){this._enabled=!1,this.reset()},fo.prototype.isEnabled=function(){return this._enabled},fo.prototype.isActive=function(){return this._active};var $a=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.reset=function(){l.prototype.reset.call(this),delete this._distance,delete this._startDistance},h.prototype._start=function(u){this._startDistance=this._distance=u[0].dist(u[1])},h.prototype._move=function(u,m){var b=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(_f(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_f(this._distance,b),pinchAround:m}},h}(fo);function Ts(l,h){return 180*l.angleWith(h)/Math.PI}var Ih=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.reset=function(){l.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},h.prototype._start=function(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])},h.prototype._move=function(u,m){var b=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ts(this._vector,b),pinchAround:m}},h.prototype._isBelowThreshold=function(u){this._minDiameter=Math.min(this._minDiameter,u.mag());var m=25/(Math.PI*this._minDiameter)*360,b=Ts(u,this._startVector);return Math.abs(b)<m},h}(fo);function gc(l){return Math.abs(l.y)>Math.abs(l.x)}var bp=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.reset=function(){l.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},h.prototype._start=function(u){this._lastPoints=u,gc(u[0].sub(u[1]))&&(this._valid=!1)},h.prototype._move=function(u,m,b){var w=u[0].sub(this._lastPoints[0]),E=u[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,E,b.timeStamp),this._valid)return this._lastPoints=u,this._active=!0,{pitchDelta:(w.y+E.y)/2*-.5}},h.prototype.gestureBeginsVertically=function(u,m,b){if(this._valid!==void 0)return this._valid;var w=u.mag()>=2,E=m.mag()>=2;if(w||E){if(!w||!E)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;var L=u.y>0==m.y>0;return gc(u)&&gc(m)&&L}},h}(fo),xf={panStep:100,bearingStep:15,pitchStep:10},nl=function(){var l=xf;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1};function hs(l){return l*(2-l)}nl.prototype.blur=function(){this.reset()},nl.prototype.reset=function(){this._active=!1},nl.prototype.keydown=function(l){var h=this;if(!(l.altKey||l.ctrlKey||l.metaKey)){var u=0,m=0,b=0,w=0,E=0;switch(l.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:l.shiftKey?m=-1:(l.preventDefault(),w=-1);break;case 39:l.shiftKey?m=1:(l.preventDefault(),w=1);break;case 38:l.shiftKey?b=1:(l.preventDefault(),E=-1);break;case 40:l.shiftKey?b=-1:(l.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(m=0,b=0),{cameraAnimation:function(L){var F=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:hs,zoom:u?Math.round(F)+u*(l.shiftKey?2:1):F,bearing:L.getBearing()+m*h._bearingStep,pitch:L.getPitch()+b*h._pitchStep,offset:[-w*h._panStep,-E*h._panStep],center:L.getCenter()},{originalEvent:l})}}}},nl.prototype.enable=function(){this._enabled=!0},nl.prototype.disable=function(){this._enabled=!1,this.reset()},nl.prototype.isEnabled=function(){return this._enabled},nl.prototype.isActive=function(){return this._active},nl.prototype.disableRotation=function(){this._rotationDisabled=!0},nl.prototype.enableRotation=function(){this._rotationDisabled=!1};var zn=function(l,h){this._map=l,this._el=l.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,o.bindAll(["_onTimeout"],this)};zn.prototype.setZoomRate=function(l){this._defaultZoomRate=l},zn.prototype.setWheelZoomRate=function(l){this._wheelZoomRate=l},zn.prototype.isEnabled=function(){return!!this._enabled},zn.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},zn.prototype.isZooming=function(){return!!this._zooming},zn.prototype.enable=function(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")},zn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},zn.prototype.wheel=function(l){if(this.isEnabled()){var h=l.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY,u=o.browser.now(),m=u-(this._lastWheelEventTime||0);this._lastWheelEventTime=u,h!==0&&h%4.000244140625==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(m*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),l.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=l,this._delta-=h,this._active||this._start(l)),l.preventDefault()}},zn.prototype._onTimeout=function(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)},zn.prototype._start=function(l){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var h=_.mousePos(this._el,l);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(h)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},zn.prototype.renderFrame=function(){var l=this;if(this._frameId&&(this._frameId=null,this.isActive())){var h=this._map.transform;if(this._delta!==0){var u=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,m=2/(1+Math.exp(-Math.abs(this._delta*u)));this._delta<0&&m!==0&&(m=1/m);var b=typeof this._targetZoom=="number"?h.zoomScale(this._targetZoom):h.scale;this._targetZoom=Math.min(h.maxZoom,Math.max(h.minZoom,h.scaleZoom(b*m))),this._type==="wheel"&&(this._startZoom=h.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,E=typeof this._targetZoom=="number"?this._targetZoom:h.zoom,L=this._startZoom,F=this._easing,j=!1;if(this._type==="wheel"&&L&&F){var nt=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),it=F(nt);w=o.number(L,E,it),nt<1?this._frameId||(this._frameId=!0):j=!0}else w=E,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(function(){l._zooming=!1,l._handler._triggerRenderFrame(),delete l._targetZoom,delete l._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!j,zoomDelta:w-h.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},zn.prototype._smoothOutEasing=function(l){var h=o.ease;if(this._prevEase){var u=this._prevEase,m=(o.browser.now()-u.start)/u.duration,b=u.easing(m+.01)-u.easing(m),w=.27/Math.sqrt(b*b+1e-4)*.01,E=Math.sqrt(.0729-w*w);h=o.bezier(w,E,.25,1)}return this._prevEase={start:o.browser.now(),duration:l,easing:h},h},zn.prototype.blur=function(){this.reset()},zn.prototype.reset=function(){this._active=!1};var $r=function(l,h){this._clickZoom=l,this._tapZoom=h};$r.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},$r.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},$r.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},$r.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ks=function(){this.reset()};ks.prototype.reset=function(){this._active=!1},ks.prototype.blur=function(){this.reset()},ks.prototype.dblclick=function(l,h){return l.preventDefault(),{cameraAnimation:function(u){u.easeTo({duration:300,zoom:u.getZoom()+(l.shiftKey?-1:1),around:u.unproject(h)},{originalEvent:l})}}},ks.prototype.enable=function(){this._enabled=!0},ks.prototype.disable=function(){this._enabled=!1,this.reset()},ks.prototype.isEnabled=function(){return this._enabled},ks.prototype.isActive=function(){return this._active};var Qo=function(){this._tap=new Po({numTouches:1,numTaps:1}),this.reset()};Qo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Qo.prototype.touchstart=function(l,h,u){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?u.length>0&&(this._swipePoint=h[0],this._swipeTouch=u[0].identifier):this._tap.touchstart(l,h,u))},Qo.prototype.touchmove=function(l,h,u){if(this._tapTime){if(this._swipePoint){if(u[0].identifier!==this._swipeTouch)return;var m=h[0],b=m.y-this._swipePoint.y;return this._swipePoint=m,l.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(l,h,u)},Qo.prototype.touchend=function(l,h,u){this._tapTime?this._swipePoint&&u.length===0&&this.reset():this._tap.touchend(l,h,u)&&(this._tapTime=l.timeStamp)},Qo.prototype.touchcancel=function(){this.reset()},Qo.prototype.enable=function(){this._enabled=!0},Qo.prototype.disable=function(){this._enabled=!1,this.reset()},Qo.prototype.isEnabled=function(){return this._enabled},Qo.prototype.isActive=function(){return this._active};var Du=function(l,h,u){this._el=l,this._mousePan=h,this._touchPan=u};Du.prototype.enable=function(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Du.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Du.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Du.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ru=function(l,h,u){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=h,this._mousePitch=u};Ru.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ru.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ru.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ru.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var fs=function(l,h,u,m){this._el=l,this._touchZoom=h,this._touchRotate=u,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0};fs.prototype.enable=function(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},fs.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},fs.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},fs.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},fs.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},fs.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Do=function(l){return l.zoom||l.drag||l.pitch||l.rotate},vc=function(l){function h(){l.apply(this,arguments)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h}(o.Event);function vn(l){return l.panDelta&&l.panDelta.mag()||l.zoomDelta||l.bearingDelta||l.pitchDelta}var cn=function(l,h){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $i(l),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h),o.bindAll(["handleEvent","handleWindowEvent"],this);var u=this._el;this._listeners=[[u,"touchstart",{passive:!0}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[o.window,"blur",void 0]];for(var m=0,b=this._listeners;m<b.length;m+=1){var w=b[m],E=w[0];_.addEventListener(E,w[1],E===o.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};cn.prototype.destroy=function(){for(var l=0,h=this._listeners;l<h.length;l+=1){var u=h[l],m=u[0];_.removeEventListener(m,u[1],m===o.window.document?this.handleWindowEvent:this.handleEvent,u[2])}},cn.prototype._addDefaultHandlers=function(l){var h=this._map,u=h.getCanvasContainer();this._add("mapEvent",new sr(h,l));var m=h.boxZoom=new ro(h,l);this._add("boxZoom",m);var b=new Lo,w=new ks;h.doubleClickZoom=new $r(w,b),this._add("tapZoom",b),this._add("clickZoom",w);var E=new Qo;this._add("tapDragZoom",E);var L=h.touchPitch=new bp;this._add("touchPitch",L);var F=new El(l),j=new Sl(l);h.dragRotate=new Ru(l,F,j),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",j,["mouseRotate"]);var nt=new el(l),it=new oo(l);h.dragPan=new Du(u,nt,it),this._add("mousePan",nt),this._add("touchPan",it,["touchZoom","touchRotate"]);var ot=new Ih,vt=new $a;h.touchZoomRotate=new fs(u,vt,ot,E),this._add("touchRotate",ot,["touchPan","touchZoom"]),this._add("touchZoom",vt,["touchPan","touchRotate"]);var ft=h.scrollZoom=new zn(h,this);this._add("scrollZoom",ft,["mousePan"]);var wt=h.keyboard=new nl;this._add("keyboard",wt),this._add("blockableMapEvent",new Xe(h));for(var ht=0,Ct=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ht<Ct.length;ht+=1){var Lt=Ct[ht];l.interactive&&l[Lt]&&h[Lt].enable(l[Lt])}},cn.prototype._add=function(l,h,u){this._handlers.push({handlerName:l,handler:h,allowed:u}),this._handlersById[l]=h},cn.prototype.stop=function(l){if(!this._updatingCamera){for(var h=0,u=this._handlers;h<u.length;h+=1)u[h].handler.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}},cn.prototype.isActive=function(){for(var l=0,h=this._handlers;l<h.length;l+=1)if(h[l].handler.isActive())return!0;return!1},cn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},cn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},cn.prototype.isMoving=function(){return!!Do(this._eventsInProgress)||this.isZooming()},cn.prototype._blockedByActive=function(l,h,u){for(var m in l)if(m!==u&&(!h||h.indexOf(m)<0))return!0;return!1},cn.prototype.handleWindowEvent=function(l){this.handleEvent(l,l.type+"Window")},cn.prototype._getMapTouches=function(l){for(var h=[],u=0,m=l;u<m.length;u+=1){var b=m[u];this._el.contains(b.target)&&h.push(b)}return h},cn.prototype.handleEvent=function(l,h){this._updatingCamera=!0;for(var u=l.type==="renderFrame"?void 0:l,m={needsRenderFrame:!1},b={},w={},E=l.touches?this._getMapTouches(l.touches):void 0,L=E?_.touchPos(this._el,E):_.mousePos(this._el,l),F=0,j=this._handlers;F<j.length;F+=1){var nt=j[F],it=nt.handlerName,ot=nt.handler,vt=nt.allowed;if(ot.isEnabled()){var ft=void 0;this._blockedByActive(w,vt,it)?ot.reset():ot[h||l.type]&&(ft=ot[h||l.type](l,L,E),this.mergeHandlerResult(m,b,ft,it,u),ft&&ft.needsRenderFrame&&this._triggerRenderFrame()),(ft||ot.isActive())&&(w[it]=ot)}}var wt={};for(var ht in this._previousActiveHandlers)w[ht]||(wt[ht]=u);this._previousActiveHandlers=w,(Object.keys(wt).length||vn(m))&&(this._changes.push([m,b,wt]),this._triggerRenderFrame()),(Object.keys(w).length||vn(m))&&this._map._stop(!0),this._updatingCamera=!1;var Ct=m.cameraAnimation;Ct&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ct(this._map))},cn.prototype.mergeHandlerResult=function(l,h,u,m,b){if(u){o.extend(l,u);var w={handlerName:m,originalEvent:u.originalEvent||b};u.zoomDelta!==void 0&&(h.zoom=w),u.panDelta!==void 0&&(h.drag=w),u.pitchDelta!==void 0&&(h.pitch=w),u.bearingDelta!==void 0&&(h.rotate=w)}},cn.prototype._applyChanges=function(){for(var l={},h={},u={},m=0,b=this._changes;m<b.length;m+=1){var w=b[m],E=w[0],L=w[1],F=w[2];E.panDelta&&(l.panDelta=(l.panDelta||new o.Point(0,0))._add(E.panDelta)),E.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(l.around=E.around),E.pinchAround!==void 0&&(l.pinchAround=E.pinchAround),E.noInertia&&(l.noInertia=E.noInertia),o.extend(h,L),o.extend(u,F)}this._updateMapTransform(l,h,u),this._changes=[]},cn.prototype._updateMapTransform=function(l,h,u){var m=this._map,b=m.transform;if(!vn(l))return this._fireEvents(h,u,!0);var w=l.panDelta,E=l.zoomDelta,L=l.bearingDelta,F=l.pitchDelta,j=l.around,nt=l.pinchAround;nt!==void 0&&(j=nt),m._stop(!0),j=j||m.transform.centerPoint;var it=b.pointLocation(w?j.sub(w):j);L&&(b.bearing+=L),F&&(b.pitch+=F),E&&(b.zoom+=E),b.setLocationAtPoint(it,j),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(h,u,!0)},cn.prototype._fireEvents=function(l,h,u){var m=this,b=Do(this._eventsInProgress),w=Do(l),E={};for(var L in l)this._eventsInProgress[L]||(E[L+"start"]=l[L].originalEvent),this._eventsInProgress[L]=l[L];for(var F in!b&&w&&this._fireEvent("movestart",w.originalEvent),E)this._fireEvent(F,E[F]);for(var j in w&&this._fireEvent("move",w.originalEvent),l)this._fireEvent(j,l[j].originalEvent);var nt,it={};for(var ot in this._eventsInProgress){var vt=this._eventsInProgress[ot],ft=vt.handlerName,wt=vt.originalEvent;this._handlersById[ft].isActive()||(delete this._eventsInProgress[ot],it[ot+"end"]=nt=h[ft]||wt)}for(var ht in it)this._fireEvent(ht,it[ht]);var Ct=Do(this._eventsInProgress);if(u&&(b||w)&&!Ct){this._updatingCamera=!0;var Lt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),qt=function(ie){return ie!==0&&-m._bearingSnap<ie&&ie<m._bearingSnap};Lt?(qt(Lt.bearing||this._map.getBearing())&&(Lt.bearing=0),this._map.easeTo(Lt,{originalEvent:nt})):(this._map.fire(new o.Event("moveend",{originalEvent:nt})),qt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},cn.prototype._fireEvent=function(l,h){this._map.fire(new o.Event(l,h?{originalEvent:h}:{}))},cn.prototype._requestFrame=function(){var l=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(h){delete l._frameId,l.handleEvent(new vc("renderFrame",{timeStamp:h})),l._applyChanges()})},cn.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var zu=function(l){function h(u,m){l.call(this),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=m.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},h.prototype.setCenter=function(u,m){return this.jumpTo({center:u},m)},h.prototype.panBy=function(u,m,b){return u=o.Point.convert(u).mult(-1),this.panTo(this.transform.center,o.extend({offset:u},m),b)},h.prototype.panTo=function(u,m,b){return this.easeTo(o.extend({center:u},m),b)},h.prototype.getZoom=function(){return this.transform.zoom},h.prototype.setZoom=function(u,m){return this.jumpTo({zoom:u},m),this},h.prototype.zoomTo=function(u,m,b){return this.easeTo(o.extend({zoom:u},m),b)},h.prototype.zoomIn=function(u,m){return this.zoomTo(this.getZoom()+1,u,m),this},h.prototype.zoomOut=function(u,m){return this.zoomTo(this.getZoom()-1,u,m),this},h.prototype.getBearing=function(){return this.transform.bearing},h.prototype.setBearing=function(u,m){return this.jumpTo({bearing:u},m),this},h.prototype.getPadding=function(){return this.transform.padding},h.prototype.setPadding=function(u,m){return this.jumpTo({padding:u},m),this},h.prototype.rotateTo=function(u,m,b){return this.easeTo(o.extend({bearing:u},m),b)},h.prototype.resetNorth=function(u,m){return this.rotateTo(0,o.extend({duration:1e3},u),m),this},h.prototype.resetNorthPitch=function(u,m){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},u),m),this},h.prototype.snapToNorth=function(u,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,m):this},h.prototype.getPitch=function(){return this.transform.pitch},h.prototype.setPitch=function(u,m){return this.jumpTo({pitch:u},m),this},h.prototype.cameraForBounds=function(u,m){u=o.LngLatBounds.convert(u);var b=m&&m.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),b,m)},h.prototype._cameraForBoxAndBearing=function(u,m,b,w){var E={top:0,bottom:0,right:0,left:0};if(typeof(w=o.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var L=w.padding;w.padding={top:L,bottom:L,right:L,left:L}}w.padding=o.extend(E,w.padding);var F=this.transform,j=F.padding,nt=F.project(o.LngLat.convert(u)),it=F.project(o.LngLat.convert(m)),ot=nt.rotate(-b*Math.PI/180),vt=it.rotate(-b*Math.PI/180),ft=new o.Point(Math.max(ot.x,vt.x),Math.max(ot.y,vt.y)),wt=new o.Point(Math.min(ot.x,vt.x),Math.min(ot.y,vt.y)),ht=ft.sub(wt),Ct=(F.width-(j.left+j.right+w.padding.left+w.padding.right))/ht.x,Lt=(F.height-(j.top+j.bottom+w.padding.top+w.padding.bottom))/ht.y;if(!(Lt<0||Ct<0)){var qt=Math.min(F.scaleZoom(F.scale*Math.min(Ct,Lt)),w.maxZoom),ie=typeof w.offset.x=="number"?new o.Point(w.offset.x,w.offset.y):o.Point.convert(w.offset),ee=new o.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(b*Math.PI/180),oe=ie.add(ee).mult(F.scale/F.zoomScale(qt));return{center:F.unproject(nt.add(it).div(2).sub(oe)),zoom:qt,bearing:b}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},h.prototype.fitBounds=function(u,m,b){return this._fitInternal(this.cameraForBounds(u,m),m,b)},h.prototype.fitScreenCoordinates=function(u,m,b,w,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(u)),this.transform.pointLocation(o.Point.convert(m)),b,w),w,E)},h.prototype._fitInternal=function(u,m,b){return u?(delete(m=o.extend(u,m)).padding,m.linear?this.easeTo(m,b):this.flyTo(m,b)):this},h.prototype.jumpTo=function(u,m){this.stop();var b=this.transform,w=!1,E=!1,L=!1;return"zoom"in u&&b.zoom!==+u.zoom&&(w=!0,b.zoom=+u.zoom),u.center!==void 0&&(b.center=o.LngLat.convert(u.center)),"bearing"in u&&b.bearing!==+u.bearing&&(E=!0,b.bearing=+u.bearing),"pitch"in u&&b.pitch!==+u.pitch&&(L=!0,b.pitch=+u.pitch),u.padding==null||b.isPaddingEqual(u.padding)||(b.padding=u.padding),this.fire(new o.Event("movestart",m)).fire(new o.Event("move",m)),w&&this.fire(new o.Event("zoomstart",m)).fire(new o.Event("zoom",m)).fire(new o.Event("zoomend",m)),E&&this.fire(new o.Event("rotatestart",m)).fire(new o.Event("rotate",m)).fire(new o.Event("rotateend",m)),L&&this.fire(new o.Event("pitchstart",m)).fire(new o.Event("pitch",m)).fire(new o.Event("pitchend",m)),this.fire(new o.Event("moveend",m))},h.prototype.easeTo=function(u,m){var b=this;this._stop(!1,u.easeId),((u=o.extend({offset:[0,0],duration:500,easing:o.ease},u)).animate===!1||!u.essential&&o.browser.prefersReducedMotion)&&(u.duration=0);var w=this.transform,E=this.getZoom(),L=this.getBearing(),F=this.getPitch(),j=this.getPadding(),nt="zoom"in u?+u.zoom:E,it="bearing"in u?this._normalizeBearing(u.bearing,L):L,ot="pitch"in u?+u.pitch:F,vt="padding"in u?u.padding:w.padding,ft=o.Point.convert(u.offset),wt=w.centerPoint.add(ft),ht=w.pointLocation(wt),Ct=o.LngLat.convert(u.center||ht);this._normalizeCenter(Ct);var Lt,qt,ie=w.project(ht),ee=w.project(Ct).sub(ie),oe=w.zoomScale(nt-E);u.around&&(Lt=o.LngLat.convert(u.around),qt=w.locationPoint(Lt));var ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||nt!==E,this._rotating=this._rotating||L!==it,this._pitching=this._pitching||ot!==F,this._padding=!w.isPaddingEqual(vt),this._easeId=u.easeId,this._prepareEase(m,u.noMoveStart,ve),this._ease(function(Ce){if(b._zooming&&(w.zoom=o.number(E,nt,Ce)),b._rotating&&(w.bearing=o.number(L,it,Ce)),b._pitching&&(w.pitch=o.number(F,ot,Ce)),b._padding&&(w.interpolatePadding(j,vt,Ce),wt=w.centerPoint.add(ft)),Lt)w.setLocationAtPoint(Lt,qt);else{var Pe=w.zoomScale(w.zoom-E),We=nt>E?Math.min(2,oe):Math.max(.5,oe),hn=Math.pow(We,1-Ce),Tn=w.unproject(ie.add(ee.mult(Ce*hn)).mult(Pe));w.setLocationAtPoint(w.renderWorldCopies?Tn.wrap():Tn,wt)}b._fireMoveEvents(m)},function(Ce){b._afterEase(m,Ce)},u),this},h.prototype._prepareEase=function(u,m,b){b===void 0&&(b={}),this._moving=!0,m||b.moving||this.fire(new o.Event("movestart",u)),this._zooming&&!b.zooming&&this.fire(new o.Event("zoomstart",u)),this._rotating&&!b.rotating&&this.fire(new o.Event("rotatestart",u)),this._pitching&&!b.pitching&&this.fire(new o.Event("pitchstart",u))},h.prototype._fireMoveEvents=function(u){this.fire(new o.Event("move",u)),this._zooming&&this.fire(new o.Event("zoom",u)),this._rotating&&this.fire(new o.Event("rotate",u)),this._pitching&&this.fire(new o.Event("pitch",u))},h.prototype._afterEase=function(u,m){if(!this._easeId||!m||this._easeId!==m){delete this._easeId;var b=this._zooming,w=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new o.Event("zoomend",u)),w&&this.fire(new o.Event("rotateend",u)),E&&this.fire(new o.Event("pitchend",u)),this.fire(new o.Event("moveend",u))}},h.prototype.flyTo=function(u,m){var b=this;if(!u.essential&&o.browser.prefersReducedMotion){var w=o.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,m)}this.stop(),u=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},u);var E=this.transform,L=this.getZoom(),F=this.getBearing(),j=this.getPitch(),nt=this.getPadding(),it="zoom"in u?o.clamp(+u.zoom,E.minZoom,E.maxZoom):L,ot="bearing"in u?this._normalizeBearing(u.bearing,F):F,vt="pitch"in u?+u.pitch:j,ft="padding"in u?u.padding:E.padding,wt=E.zoomScale(it-L),ht=o.Point.convert(u.offset),Ct=E.centerPoint.add(ht),Lt=E.pointLocation(Ct),qt=o.LngLat.convert(u.center||Lt);this._normalizeCenter(qt);var ie=E.project(Lt),ee=E.project(qt).sub(ie),oe=u.curve,ve=Math.max(E.width,E.height),Ce=ve/wt,Pe=ee.mag();if("minZoom"in u){var We=o.clamp(Math.min(u.minZoom,L,it),E.minZoom,E.maxZoom),hn=ve/E.zoomScale(We-L);oe=Math.sqrt(hn/Pe*2)}var Tn=oe*oe;function En(Nn){var mn=(Ce*Ce-ve*ve+(Nn?-1:1)*Tn*Tn*Pe*Pe)/(2*(Nn?Ce:ve)*Tn*Pe);return Math.log(Math.sqrt(mn*mn+1)-mn)}function Oi(Nn){return(Math.exp(Nn)-Math.exp(-Nn))/2}function tn(Nn){return(Math.exp(Nn)+Math.exp(-Nn))/2}var Dn=En(0),ei=function(Nn){return tn(Dn)/tn(Dn+oe*Nn)},Hn=function(Nn){return ve*((tn(Dn)*(Oi(mn=Dn+oe*Nn)/tn(mn))-Oi(Dn))/Tn)/Pe;var mn},Fn=(En(1)-Dn)/oe;if(Math.abs(Pe)<1e-6||!isFinite(Fn)){if(Math.abs(ve-Ce)<1e-6)return this.easeTo(u,m);var ni=Ce<ve?-1:1;Fn=Math.abs(Math.log(Ce/ve))/oe,Hn=function(){return 0},ei=function(Nn){return Math.exp(ni*oe*Nn)}}return u.duration="duration"in u?+u.duration:1e3*Fn/("screenSpeed"in u?+u.screenSpeed/oe:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=F!==ot,this._pitching=vt!==j,this._padding=!E.isPaddingEqual(ft),this._prepareEase(m,!1),this._ease(function(Nn){var mn=Nn*Fn,mo=1/ei(mn);E.zoom=Nn===1?it:L+E.scaleZoom(mo),b._rotating&&(E.bearing=o.number(F,ot,Nn)),b._pitching&&(E.pitch=o.number(j,vt,Nn)),b._padding&&(E.interpolatePadding(nt,ft,Nn),Ct=E.centerPoint.add(ht));var Yr=Nn===1?qt:E.unproject(ie.add(ee.mult(Hn(mn))).mult(mo));E.setLocationAtPoint(E.renderWorldCopies?Yr.wrap():Yr,Ct),b._fireMoveEvents(m)},function(){return b._afterEase(m)},u),this},h.prototype.isEasing=function(){return!!this._easeFrameId},h.prototype.stop=function(){return this._stop()},h.prototype._stop=function(u,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,m)}if(!u){var w=this.handlers;w&&w.stop(!1)}return this},h.prototype._ease=function(u,m,b){b.animate===!1||b.duration===0?(u(1),m()):(this._easeStart=o.browser.now(),this._easeOptions=b,this._onEaseFrame=u,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},h.prototype._renderFrameCallback=function(){var u=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},h.prototype._normalizeBearing=function(u,m){u=o.wrap(u,-180,180);var b=Math.abs(u-m);return Math.abs(u-360-m)<b&&(u-=360),Math.abs(u+360-m)<b&&(u+=360),u},h.prototype._normalizeCenter=function(u){var m=this.transform;if(m.renderWorldCopies&&!m.lngRange){var b=u.lng-m.center.lng;u.lng+=b>180?-360:b<-180?360:0}},h}(o.Evented),Vo=function(l){l===void 0&&(l={}),this.options=l,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Vo.prototype.getDefaultPosition=function(){return"bottom-right"},Vo.prototype.onAdd=function(l){var h=this.options&&this.options.compact;return this._map=l,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=_.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Vo.prototype.onRemove=function(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Vo.prototype._setElementTitle=function(l,h){var u=this._map._getUIString("AttributionControl."+h);l.title=u,l.setAttribute("aria-label",u)},Vo.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Vo.prototype._updateEditLink=function(){var l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));var h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(l){var u=h.reduce(function(m,b,w){return b.value&&(m+=b.key+"="+b.value+(w<h.length-1?"&":"")),m},"?");l.href=o.config.FEEDBACK_URL+"/"+u+(this._map._hash?this._map._hash.getHashString(!0):""),l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}},Vo.prototype._updateData=function(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Vo.prototype._updateAttributions=function(){if(this._map.style){var l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(function(L){return typeof L!="string"?"":L})):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){var h=this._map.style.stylesheet;this.styleOwner=h.owner,this.styleId=h.id}var u=this._map.style.sourceCaches;for(var m in u){var b=u[m];if(b.used){var w=b.getSource();w.attribution&&l.indexOf(w.attribution)<0&&l.push(w.attribution)}}l.sort(function(L,F){return L.length-F.length});var E=(l=l.filter(function(L,F){for(var j=F+1;j<l.length;j++)if(l[j].indexOf(L)>=0)return!1;return!0})).join(" | ");E!==this._attribHTML&&(this._attribHTML=E,l.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Vo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var wa=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};wa.prototype.onAdd=function(l){this._map=l,this._container=_.create("div","mapboxgl-ctrl");var h=_.create("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},wa.prototype.onRemove=function(){_.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},wa.prototype.getDefaultPosition=function(){return"bottom-left"},wa.prototype._updateLogo=function(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},wa.prototype._logoRequired=function(){if(this._map.style){var l=this._map.style.sourceCaches;for(var h in l)if(l[h].getSource().mapbox_logo)return!0;return!1}},wa.prototype._updateCompact=function(){var l=this._container.children;if(l.length){var h=l[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}};var Jo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Jo.prototype.add=function(l){var h=++this._id;return this._queue.push({callback:l,id:h,cancelled:!1}),h},Jo.prototype.remove=function(l){for(var h=this._currentlyRunning,u=0,m=h?this._queue.concat(h):this._queue;u<m.length;u+=1){var b=m[u];if(b.id===l)return void(b.cancelled=!0)}},Jo.prototype.run=function(l){l===void 0&&(l=0);var h=this._currentlyRunning=this._queue;this._queue=[];for(var u=0,m=h;u<m.length;u+=1){var b=m[u];if(!b.cancelled&&(b.callback(l),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Jo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Tl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ap=o.window.HTMLImageElement,bf=o.window.HTMLElement,tr=o.window.ImageBitmap,po={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Qc=function(l){function h(m){var b=this;if((m=o.extend({},po,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new dn(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies);if(l.call(this,w,m),this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=m.collectResourceTiming,this._renderTaskQueue=new Jo,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Tl,m.locale),this._clickTolerance=m.clickTolerance,this._requestManager=new o.RequestManager(m.transformRequest,m.accessToken),typeof m.container=="string"){if(this._container=o.window.document.getElementById(m.container),!this._container)throw new Error("Container '"+m.container+"' not found.")}else{if(!(m.container instanceof bf))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return b._update(!1)}),this.on("moveend",function(){return b._update(!1)}),this.on("zoom",function(){return b._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new cn(this,m),this._hash=m.hash&&new Ko(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,o.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Vo({customAttribution:m.customAttribution})),this.addControl(new wa,m.logoPosition),this.on("style.load",function(){b.transform.unmodified&&b.jumpTo(b.style.stylesheet)}),this.on("data",function(E){b._update(E.dataType==="style"),b.fire(new o.Event(E.dataType+"data",E))}),this.on("dataloading",function(E){b.fire(new o.Event(E.dataType+"dataloading",E))})}l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h;var u={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return h.prototype._getMapId=function(){return this._mapId},h.prototype.addControl=function(m,b){if(b===void 0&&(b=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=m.onAdd(this);this._controls.push(m);var E=this._controlPositions[b];return b.indexOf("bottom")!==-1?E.insertBefore(w,E.firstChild):E.appendChild(w),this},h.prototype.removeControl=function(m){if(!m||!m.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var b=this._controls.indexOf(m);return b>-1&&this._controls.splice(b,1),m.onRemove(this),this},h.prototype.hasControl=function(m){return this._controls.indexOf(m)>-1},h.prototype.resize=function(m){var b=this._containerDimensions(),w=b[0],E=b[1];if(w===this.transform.width&&E===this.transform.height)return this;this._resizeCanvas(w,E),this.transform.resize(w,E),this.painter.resize(w,E);var L=!this._moving;return L&&this.fire(new o.Event("movestart",m)).fire(new o.Event("move",m)),this.fire(new o.Event("resize",m)),L&&this.fire(new o.Event("moveend",m)),this},h.prototype.getBounds=function(){return this.transform.getBounds()},h.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},h.prototype.setMaxBounds=function(m){return this.transform.setMaxBounds(o.LngLatBounds.convert(m)),this._update()},h.prototype.setMinZoom=function(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},h.prototype.getMinZoom=function(){return this.transform.minZoom},h.prototype.setMaxZoom=function(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")},h.prototype.getMaxZoom=function(){return this.transform.maxZoom},h.prototype.setMinPitch=function(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},h.prototype.getMinPitch=function(){return this.transform.minPitch},h.prototype.setMaxPitch=function(m){if((m=m??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")},h.prototype.getMaxPitch=function(){return this.transform.maxPitch},h.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},h.prototype.setRenderWorldCopies=function(m){return this.transform.renderWorldCopies=m,this._update()},h.prototype.project=function(m){return this.transform.locationPoint(o.LngLat.convert(m))},h.prototype.unproject=function(m){return this.transform.pointLocation(o.Point.convert(m))},h.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},h.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},h.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},h.prototype._createDelegatedListener=function(m,b,w){var E,L=this;if(m==="mouseenter"||m==="mouseover"){var F=!1;return{layer:b,listener:w,delegates:{mousemove:function(nt){var it=L.getLayer(b)?L.queryRenderedFeatures(nt.point,{layers:[b]}):[];it.length?F||(F=!0,w.call(L,new fr(m,L,nt.originalEvent,{features:it}))):F=!1},mouseout:function(){F=!1}}}}if(m==="mouseleave"||m==="mouseout"){var j=!1;return{layer:b,listener:w,delegates:{mousemove:function(nt){(L.getLayer(b)?L.queryRenderedFeatures(nt.point,{layers:[b]}):[]).length?j=!0:j&&(j=!1,w.call(L,new fr(m,L,nt.originalEvent)))},mouseout:function(nt){j&&(j=!1,w.call(L,new fr(m,L,nt.originalEvent)))}}}}return{layer:b,listener:w,delegates:(E={},E[m]=function(nt){var it=L.getLayer(b)?L.queryRenderedFeatures(nt.point,{layers:[b]}):[];it.length&&(nt.features=it,w.call(L,nt),delete nt.features)},E)}},h.prototype.on=function(m,b,w){if(w===void 0)return l.prototype.on.call(this,m,b);var E=this._createDelegatedListener(m,b,w);for(var L in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(E),E.delegates)this.on(L,E.delegates[L]);return this},h.prototype.once=function(m,b,w){if(w===void 0)return l.prototype.once.call(this,m,b);var E=this._createDelegatedListener(m,b,w);for(var L in E.delegates)this.once(L,E.delegates[L]);return this},h.prototype.off=function(m,b,w){var E=this;return w===void 0?l.prototype.off.call(this,m,b):(this._delegatedListeners&&this._delegatedListeners[m]&&function(L){for(var F=L[m],j=0;j<F.length;j++){var nt=F[j];if(nt.layer===b&&nt.listener===w){for(var it in nt.delegates)E.off(it,nt.delegates[it]);return F.splice(j,1),E}}}(this._delegatedListeners),this)},h.prototype.queryRenderedFeatures=function(m,b){if(!this.style)return[];var w;if(b!==void 0||m===void 0||m instanceof o.Point||Array.isArray(m)||(b=m,m=void 0),b=b||{},(m=m||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof m[0]=="number")w=[o.Point.convert(m)];else{var E=o.Point.convert(m[0]),L=o.Point.convert(m[1]);w=[E,new o.Point(L.x,E.y),L,new o.Point(E.x,L.y),E]}return this.style.queryRenderedFeatures(w,b,this.transform)},h.prototype.querySourceFeatures=function(m,b){return this.style.querySourceFeatures(m,b)},h.prototype.setStyle=function(m,b){return(b=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},b)).diff!==!1&&b.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,b),this):(this._localIdeographFontFamily=b.localIdeographFontFamily,this._updateStyle(m,b))},h.prototype._getUIString=function(m){var b=this._locale[m];if(b==null)throw new Error("Missing UI string '"+m+"'");return b},h.prototype._updateStyle=function(m,b){return this.style&&(this.style.setEventedParent(null),this.style._remove()),m?(this.style=new Ii(this,b||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m),this):(delete this.style,this)},h.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ii(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},h.prototype._diffStyle=function(m,b){var w=this;if(typeof m=="string"){var E=this._requestManager.normalizeStyleURL(m),L=this._requestManager.transformRequest(E,o.ResourceType.Style);o.getJSON(L,function(F,j){F?w.fire(new o.ErrorEvent(F)):j&&w._updateDiff(j,b)})}else typeof m=="object"&&this._updateDiff(m,b)},h.prototype._updateDiff=function(m,b){try{this.style.setState(m)&&this._update(!0)}catch(w){o.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(m,b)}},h.prototype.getStyle=function(){if(this.style)return this.style.serialize()},h.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},h.prototype.addSource=function(m,b){return this._lazyInitEmptyStyle(),this.style.addSource(m,b),this._update(!0)},h.prototype.isSourceLoaded=function(m){var b=this.style&&this.style.sourceCaches[m];if(b!==void 0)return b.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+m+"'")))},h.prototype.areTilesLoaded=function(){var m=this.style&&this.style.sourceCaches;for(var b in m){var w=m[b]._tiles;for(var E in w){var L=w[E];if(L.state!=="loaded"&&L.state!=="errored")return!1}}return!0},h.prototype.addSourceType=function(m,b,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(m,b,w)},h.prototype.removeSource=function(m){return this.style.removeSource(m),this._update(!0)},h.prototype.getSource=function(m){return this.style.getSource(m)},h.prototype.addImage=function(m,b,w){w===void 0&&(w={});var E=w.pixelRatio;E===void 0&&(E=1);var L=w.sdf;L===void 0&&(L=!1);var F=w.stretchX,j=w.stretchY,nt=w.content;if(this._lazyInitEmptyStyle(),b instanceof Ap||tr&&b instanceof tr){var it=o.browser.getImageData(b);this.style.addImage(m,{data:new o.RGBAImage({width:it.width,height:it.height},it.data),pixelRatio:E,stretchX:F,stretchY:j,content:nt,sdf:L,version:0})}else{if(b.width===void 0||b.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ot=b;this.style.addImage(m,{data:new o.RGBAImage({width:b.width,height:b.height},new Uint8Array(b.data)),pixelRatio:E,stretchX:F,stretchY:j,content:nt,sdf:L,version:0,userImage:ot}),ot.onAdd&&ot.onAdd(this,m)}},h.prototype.updateImage=function(m,b){var w=this.style.getImage(m);if(!w)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var E=b instanceof Ap||tr&&b instanceof tr?o.browser.getImageData(b):b,L=E.width,F=E.height,j=E.data;return L===void 0||F===void 0?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):L!==w.data.width||F!==w.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(j,!(b instanceof Ap||tr&&b instanceof tr)),void this.style.updateImage(m,w))},h.prototype.hasImage=function(m){return m?!!this.style.getImage(m):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},h.prototype.removeImage=function(m){this.style.removeImage(m)},h.prototype.loadImage=function(m,b){o.getImage(this._requestManager.transformRequest(m,o.ResourceType.Image),b)},h.prototype.listImages=function(){return this.style.listImages()},h.prototype.addLayer=function(m,b){return this._lazyInitEmptyStyle(),this.style.addLayer(m,b),this._update(!0)},h.prototype.moveLayer=function(m,b){return this.style.moveLayer(m,b),this._update(!0)},h.prototype.removeLayer=function(m){return this.style.removeLayer(m),this._update(!0)},h.prototype.getLayer=function(m){return this.style.getLayer(m)},h.prototype.setLayerZoomRange=function(m,b,w){return this.style.setLayerZoomRange(m,b,w),this._update(!0)},h.prototype.setFilter=function(m,b,w){return w===void 0&&(w={}),this.style.setFilter(m,b,w),this._update(!0)},h.prototype.getFilter=function(m){return this.style.getFilter(m)},h.prototype.setPaintProperty=function(m,b,w,E){return E===void 0&&(E={}),this.style.setPaintProperty(m,b,w,E),this._update(!0)},h.prototype.getPaintProperty=function(m,b){return this.style.getPaintProperty(m,b)},h.prototype.setLayoutProperty=function(m,b,w,E){return E===void 0&&(E={}),this.style.setLayoutProperty(m,b,w,E),this._update(!0)},h.prototype.getLayoutProperty=function(m,b){return this.style.getLayoutProperty(m,b)},h.prototype.setLight=function(m,b){return b===void 0&&(b={}),this._lazyInitEmptyStyle(),this.style.setLight(m,b),this._update(!0)},h.prototype.getLight=function(){return this.style.getLight()},h.prototype.setFeatureState=function(m,b){return this.style.setFeatureState(m,b),this._update()},h.prototype.removeFeatureState=function(m,b){return this.style.removeFeatureState(m,b),this._update()},h.prototype.getFeatureState=function(m){return this.style.getFeatureState(m)},h.prototype.getContainer=function(){return this._container},h.prototype.getCanvasContainer=function(){return this._canvasContainer},h.prototype.getCanvas=function(){return this._canvas},h.prototype._containerDimensions=function(){var m=0,b=0;return this._container&&(m=this._container.clientWidth||400,b=this._container.clientHeight||300),[m,b]},h.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},h.prototype._setupContainer=function(){var m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=_.create("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();var b=this._canvasContainer=_.create("div","mapboxgl-canvas-container",m);this._interactive&&b.classList.add("mapboxgl-interactive"),this._canvas=_.create("canvas","mapboxgl-canvas",b),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var E=this._controlContainer=_.create("div","mapboxgl-control-container",m),L=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(F){L[F]=_.create("div","mapboxgl-ctrl-"+F,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},h.prototype._resizeCanvas=function(m,b){var w=o.browser.devicePixelRatio||1;this._canvas.width=w*m,this._canvas.height=w*b,this._canvas.style.width=m+"px",this._canvas.style.height=b+"px"},h.prototype._setupPainter=function(){var m=o.extend({},y.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),b=this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);b?(this.painter=new Ae(b,this.transform),o.webpSupported.testSupport(b)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},h.prototype._contextLost=function(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:m}))},h.prototype._contextRestored=function(m){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:m}))},h.prototype._onMapScroll=function(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},h.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},h.prototype._update=function(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this},h.prototype._requestRenderFrame=function(m){return this._update(),this._renderTaskQueue.add(m)},h.prototype._cancelRenderFrame=function(m){this._renderTaskQueue.remove(m)},h.prototype._render=function(m){var b,w=this,E=0,L=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(b=L.createQueryEXT(),L.beginQueryEXT(L.TIME_ELAPSED_EXT,b),E=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),!this._removed){var F=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var j=this.transform.zoom,nt=o.browser.now();this.style.zoomHistory.update(j,nt);var it=new o.EvaluationParameters(j,{now:nt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ot=it.crossFadingFactor();ot===1&&ot===this._crossFadingFactor||(F=!0,this._crossFadingFactor=ot),this.style.update(it)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||F)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var vt=o.browser.now()-E;L.endQueryEXT(L.TIME_ELAPSED_EXT,b),setTimeout(function(){var ht=L.getQueryObjectEXT(b,L.QUERY_RESULT_EXT)/1e6;L.deleteQueryEXT(b),w.fire(new o.Event("gpu-timing-frame",{cpuTime:vt,gpuTime:ht}))},50)}if(this.listens("gpu-timing-layer")){var ft=this.painter.collectGpuTimers();setTimeout(function(){var ht=w.painter.queryGpuTimers(ft);w.fire(new o.Event("gpu-timing-layer",{layerTimes:ht}))},50)}var wt=this._sourcesDirty||this._styleDirty||this._placementDirty;return wt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||wt||(this._fullyLoaded=!0),this}},h.prototype.remove=function(){this._hash&&this._hash.remove();for(var m=0,b=this._controls;m<b.length;m+=1)b[m].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),Ou(this._canvasContainer),Ou(this._controlContainer),Ou(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},h.prototype.triggerRepaint=function(){var m=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(b){m._frame=null,m._render(b)}))},h.prototype._onWindowOnline=function(){this._update()},h.prototype._onWindowResize=function(m){this._trackResize&&this.resize({originalEvent:m})._update()},u.showTileBoundaries.get=function(){return!!this._showTileBoundaries},u.showTileBoundaries.set=function(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())},u.showPadding.get=function(){return!!this._showPadding},u.showPadding.set=function(m){this._showPadding!==m&&(this._showPadding=m,this._update())},u.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},u.showCollisionBoxes.set=function(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())},u.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},u.showOverdrawInspector.set=function(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())},u.repaint.get=function(){return!!this._repaint},u.repaint.set=function(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())},u.vertices.get=function(){return!!this._vertices},u.vertices.set=function(m){this._vertices=m,this._update()},h.prototype._setCacheLimits=function(m,b){o.setCacheLimits(m,b)},u.version.get=function(){return o.version},Object.defineProperties(h.prototype,u),h}(zu);function Ou(l){l.parentNode&&l.parentNode.removeChild(l)}var rt={showCompass:!0,showZoom:!0,visualizePitch:!1},Ya=function(l){var h=this;this.options=o.extend({},rt,l),this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(u){return u.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(u){return h._map.zoomIn({},{originalEvent:u})}),_.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(u){return h._map.zoomOut({},{originalEvent:u})}),_.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(u){h.options.visualizePitch?h._map.resetNorthPitch({},{originalEvent:u}):h._map.resetNorth({},{originalEvent:u})}),this._compassIcon=_.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ya.prototype._updateZoomButtons=function(){var l=this._map.getZoom(),h=l===this._map.getMaxZoom(),u=l===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())},Ya.prototype._rotateCompassArrow=function(){var l=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=l},Ya.prototype.onAdd=function(l){return this._map=l,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new oa(this._map,this._compass,this.options.visualizePitch)),this._container},Ya.prototype.onRemove=function(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ya.prototype._createButton=function(l,h){var u=_.create("button",l,this._container);return u.type="button",u.addEventListener("click",h),u},Ya.prototype._setButtonTitle=function(l,h){var u=this._map._getUIString("NavigationControl."+h);l.title=u,l.setAttribute("aria-label",u)};var oa=function(l,h,u){u===void 0&&(u=!1),this._clickTolerance=10,this.element=h,this.mouseRotate=new El({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,u&&(this.mousePitch=new Sl({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),_.addEventListener(h,"mousedown",this.mousedown),_.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(h,"touchmove",this.touchmove),_.addEventListener(h,"touchend",this.touchend),_.addEventListener(h,"touchcancel",this.reset)};function aa(l,h,u){if(l=new o.LngLat(l.lng,l.lat),h){var m=new o.LngLat(l.lng-360,l.lat),b=new o.LngLat(l.lng+360,l.lat),w=u.locationPoint(l).distSqr(h);u.locationPoint(m).distSqr(h)<w?l=m:u.locationPoint(b).distSqr(h)<w&&(l=b)}for(;Math.abs(l.lng-u.center.lng)>180;){var E=u.locationPoint(l);if(E.x>=0&&E.y>=0&&E.x<=u.width&&E.y<=u.height)break;l.lng>u.center.lng?l.lng-=360:l.lng+=360}return l}oa.prototype.down=function(l,h){this.mouseRotate.mousedown(l,h),this.mousePitch&&this.mousePitch.mousedown(l,h),_.disableDrag()},oa.prototype.move=function(l,h){var u=this.map,m=this.mouseRotate.mousemoveWindow(l,h);if(m&&m.bearingDelta&&u.setBearing(u.getBearing()+m.bearingDelta),this.mousePitch){var b=this.mousePitch.mousemoveWindow(l,h);b&&b.pitchDelta&&u.setPitch(u.getPitch()+b.pitchDelta)}},oa.prototype.off=function(){var l=this.element;_.removeEventListener(l,"mousedown",this.mousedown),_.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(l,"touchmove",this.touchmove),_.removeEventListener(l,"touchend",this.touchend),_.removeEventListener(l,"touchcancel",this.reset),this.offTemp()},oa.prototype.offTemp=function(){_.enableDrag(),_.removeEventListener(o.window,"mousemove",this.mousemove),_.removeEventListener(o.window,"mouseup",this.mouseup)},oa.prototype.mousedown=function(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:function(){return l.preventDefault()}}),_.mousePos(this.element,l)),_.addEventListener(o.window,"mousemove",this.mousemove),_.addEventListener(o.window,"mouseup",this.mouseup)},oa.prototype.mousemove=function(l){this.move(l,_.mousePos(this.element,l))},oa.prototype.mouseup=function(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()},oa.prototype.touchstart=function(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return l.preventDefault()}},this._startPos))},oa.prototype.touchmove=function(l){l.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:function(){return l.preventDefault()}},this._lastPos))},oa.prototype.touchend=function(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},oa.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var mi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Af(l,h,u){var m=l.classList;for(var b in mi)m.remove("mapboxgl-"+u+"-anchor-"+b);m.add("mapboxgl-"+u+"-anchor-"+h)}var Jc,Mh=function(l){function h(u,m){if(l.call(this),(u instanceof o.window.HTMLElement||m)&&(u=o.extend({element:u},m)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=o.Point.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");var b=_.createNS("http://www.w3.org/2000/svg","svg");b.setAttributeNS(null,"display","block"),b.setAttributeNS(null,"height","41px"),b.setAttributeNS(null,"width","27px"),b.setAttributeNS(null,"viewBox","0 0 27 41");var w=_.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var E=_.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");var L=_.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");for(var F=0,j=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];F<j.length;F+=1){var nt=j[F],it=_.createNS("http://www.w3.org/2000/svg","ellipse");it.setAttributeNS(null,"opacity","0.04"),it.setAttributeNS(null,"cx","10.5"),it.setAttributeNS(null,"cy","5.80029008"),it.setAttributeNS(null,"rx",nt.rx),it.setAttributeNS(null,"ry",nt.ry),L.appendChild(it)}var ot=_.createNS("http://www.w3.org/2000/svg","g");ot.setAttributeNS(null,"fill",this._color);var vt=_.createNS("http://www.w3.org/2000/svg","path");vt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ot.appendChild(vt);var ft=_.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"opacity","0.25"),ft.setAttributeNS(null,"fill","#000000");var wt=_.createNS("http://www.w3.org/2000/svg","path");wt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ft.appendChild(wt);var ht=_.createNS("http://www.w3.org/2000/svg","g");ht.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ht.setAttributeNS(null,"fill","#FFFFFF");var Ct=_.createNS("http://www.w3.org/2000/svg","g");Ct.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Lt=_.createNS("http://www.w3.org/2000/svg","circle");Lt.setAttributeNS(null,"fill","#000000"),Lt.setAttributeNS(null,"opacity","0.25"),Lt.setAttributeNS(null,"cx","5.5"),Lt.setAttributeNS(null,"cy","5.5"),Lt.setAttributeNS(null,"r","5.4999962");var qt=_.createNS("http://www.w3.org/2000/svg","circle");qt.setAttributeNS(null,"fill","#FFFFFF"),qt.setAttributeNS(null,"cx","5.5"),qt.setAttributeNS(null,"cy","5.5"),qt.setAttributeNS(null,"r","5.4999962"),Ct.appendChild(Lt),Ct.appendChild(qt),E.appendChild(L),E.appendChild(ot),E.appendChild(ft),E.appendChild(ht),E.appendChild(Ct),b.appendChild(E),b.setAttributeNS(null,"height",41*this._scale+"px"),b.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(b),this._offset=o.Point.convert(u&&u.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ie){ie.preventDefault()}),this._element.addEventListener("mousedown",function(ie){ie.preventDefault()}),Af(this._element,this._anchor,"marker"),this._popup=null}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.addTo=function(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},h.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this},h.prototype.getLngLat=function(){return this._lngLat},h.prototype.setLngLat=function(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},h.prototype.getElement=function(){return this._element},h.prototype.setPopup=function(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){var m=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(24.6+m)],"bottom-right":[-m,-1*(24.6+m)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},h.prototype._onKeyPress=function(u){var m=u.code,b=u.charCode||u.keyCode;m!=="Space"&&m!=="Enter"&&b!==32&&b!==13||this.togglePopup()},h.prototype._onMapClick=function(u){var m=u.originalEvent.target,b=this._element;this._popup&&(m===b||b.contains(m))&&this.togglePopup()},h.prototype.getPopup=function(){return this._popup},h.prototype.togglePopup=function(){var u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this},h.prototype._update=function(u){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=aa(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(m="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b="rotateX("+this._map.getPitch()+"deg)"),u&&u.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,mi[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+b+" "+m)}},h.prototype.getOffset=function(){return this._offset},h.prototype.setOffset=function(u){return this._offset=o.Point.convert(u),this._update(),this},h.prototype._onMove=function(u){if(!this._isDragging){var m=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},h.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},h.prototype._addDragHandler=function(u){this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},h.prototype.setDraggable=function(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},h.prototype.isDraggable=function(){return this._draggable},h.prototype.setRotation=function(u){return this._rotation=u||0,this._update(),this},h.prototype.getRotation=function(){return this._rotation},h.prototype.setRotationAlignment=function(u){return this._rotationAlignment=u||"auto",this._update(),this},h.prototype.getRotationAlignment=function(){return this._rotationAlignment},h.prototype.setPitchAlignment=function(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this},h.prototype.getPitchAlignment=function(){return this._pitchAlignment},h}(o.Evented),eu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},th=0,yc=!1,wp=function(l){function h(u){l.call(this),this.options=o.extend({},eu,u),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.onAdd=function(u){var m;return this._map=u,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),m=this._setupUI,Jc!==void 0?m(Jc):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(b){m(Jc=b.state!=="denied")}):m(Jc=!!o.window.navigator.geolocation),this._container},h.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,th=0,yc=!1},h.prototype._isOutOfMapMaxBounds=function(u){var m=this._map.getMaxBounds(),b=u.coords;return m&&(b.longitude<m.getWest()||b.longitude>m.getEast()||b.latitude<m.getSouth()||b.latitude>m.getNorth())},h.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},h.prototype._onSuccess=function(u){if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",u)),this._finish()}},h.prototype._updateCamera=function(u){var m=new o.LngLat(u.coords.longitude,u.coords.latitude),b=u.coords.accuracy,w=this._map.getBearing(),E=o.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(m.toBounds(b),E,{geolocateSource:!0})},h.prototype._updateMarker=function(u){if(u){var m=new o.LngLat(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},h.prototype._updateCircleRadius=function(){var u=this._map._container.clientHeight/2,m=this._map.unproject([0,u]),b=this._map.unproject([1,u]),w=m.distanceTo(b),E=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=E+"px",this._circleElement.style.height=E+"px"},h.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},h.prototype._onError=function(u){if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&yc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",u)),this._finish()}},h.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},h.prototype._setupUI=function(u){var m=this;if(this._container.addEventListener("contextmenu",function(E){return E.preventDefault()}),this._geolocateButton=_.create("button","mapboxgl-ctrl-geolocate",this._container),_.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",u===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var b=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=b,this._geolocateButton.setAttribute("aria-label",b)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Mh(this._dotElement),this._circleElement=_.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Mh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(E){E.geolocateSource||m._watchState!=="ACTIVE_LOCK"||E.originalEvent&&E.originalEvent.type==="resize"||(m._watchState="BACKGROUND",m._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),m._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),m.fire(new o.Event("trackuserlocationend")))})},h.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":th--,yc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var u;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++th>1?(u={maximumAge:6e5,timeout:0},yc=!0):(u=this.options.positionOptions,yc=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,u)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},h.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},h}(o.Evented),Bu={maxWidth:100,unit:"metric"},Fu=function(l){this.options=o.extend({},Bu,l),o.bindAll(["_onMove","setUnit"],this)};function Ps(l,h,u){var m=u&&u.maxWidth||100,b=l._container.clientHeight/2,w=l.unproject([0,b]),E=l.unproject([m,b]),L=w.distanceTo(E);if(u&&u.unit==="imperial"){var F=3.2808*L;F>5280?Nu(h,m,F/5280,l._getUIString("ScaleControl.Miles")):Nu(h,m,F,l._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Nu(h,m,L/1852,l._getUIString("ScaleControl.NauticalMiles")):L>=1e3?Nu(h,m,L/1e3,l._getUIString("ScaleControl.Kilometers")):Nu(h,m,L,l._getUIString("ScaleControl.Meters"))}function Nu(l,h,u,m){var b,w,E,L=(b=u,(w=Math.pow(10,(""+Math.floor(b)).length-1))*(E=(E=b/w)>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(F){var j=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*j)/j}(E)));l.style.width=h*(L/u)+"px",l.innerHTML=L+"&nbsp;"+m}Fu.prototype.getDefaultPosition=function(){return"bottom-left"},Fu.prototype._onMove=function(){Ps(this._map,this._container,this.options)},Fu.prototype.onAdd=function(l){return this._map=l,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",l.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Fu.prototype.onRemove=function(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Fu.prototype.setUnit=function(l){this.options.unit=l,Ps(this._map,this._container,this.options)};var Ls=function(l){this._fullscreen=!1,l&&l.container&&(l.container instanceof o.window.HTMLElement?this._container=l.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ls.prototype.onAdd=function(l){return this._map=l,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ls.prototype.onRemove=function(){_.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ls.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},Ls.prototype._setupUI=function(){var l=this._fullscreenButton=_.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);_.create("span","mapboxgl-ctrl-icon",l).setAttribute("aria-hidden",!0),l.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ls.prototype._updateTitle=function(){var l=this._getTitle();this._fullscreenButton.setAttribute("aria-label",l),this._fullscreenButton.title=l},Ls.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ls.prototype._isFullscreen=function(){return this._fullscreen},Ls.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ls.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Cp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Eh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ip=function(l){function h(u){l.call(this),this.options=o.extend(Object.create(Cp),u),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return l&&(h.__proto__=l),(h.prototype=Object.create(l&&l.prototype)).constructor=h,h.prototype.addTo=function(u){return this._map&&this.remove(),this._map=u,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},h.prototype.isOpen=function(){return!!this._map},h.prototype.remove=function(){return this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},h.prototype.getLngLat=function(){return this._lngLat},h.prototype.setLngLat=function(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},h.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},h.prototype.getElement=function(){return this._container},h.prototype.setText=function(u){return this.setDOMContent(o.window.document.createTextNode(u))},h.prototype.setHTML=function(u){var m,b=o.window.document.createDocumentFragment(),w=o.window.document.createElement("body");for(w.innerHTML=u;m=w.firstChild;)b.appendChild(m);return this.setDOMContent(b)},h.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},h.prototype.setMaxWidth=function(u){return this.options.maxWidth=u,this._update(),this},h.prototype.setDOMContent=function(u){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(u),this._createCloseButton(),this._update(),this._focusFirstElement(),this},h.prototype.addClassName=function(u){this._container&&this._container.classList.add(u)},h.prototype.removeClassName=function(u){this._container&&this._container.classList.remove(u)},h.prototype.setOffset=function(u){return this.options.offset=u,this._update(),this},h.prototype.toggleClassName=function(u){if(this._container)return this._container.classList.toggle(u)},h.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=_.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},h.prototype._onMouseUp=function(u){this._update(u.point)},h.prototype._onMouseMove=function(u){this._update(u.point)},h.prototype._onDrag=function(u){this._update(u.point)},h.prototype._update=function(u){var m=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=_.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=_.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(it){return m._container.classList.add(it)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=aa(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||u)){var b=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat),w=this.options.anchor,E=function it(ot){if(ot){if(typeof ot=="number"){var vt=Math.round(Math.sqrt(.5*Math.pow(ot,2)));return{center:new o.Point(0,0),top:new o.Point(0,ot),"top-left":new o.Point(vt,vt),"top-right":new o.Point(-vt,vt),bottom:new o.Point(0,-ot),"bottom-left":new o.Point(vt,-vt),"bottom-right":new o.Point(-vt,-vt),left:new o.Point(ot,0),right:new o.Point(-ot,0)}}if(ot instanceof o.Point||Array.isArray(ot)){var ft=o.Point.convert(ot);return{center:ft,top:ft,"top-left":ft,"top-right":ft,bottom:ft,"bottom-left":ft,"bottom-right":ft,left:ft,right:ft}}return{center:o.Point.convert(ot.center||[0,0]),top:o.Point.convert(ot.top||[0,0]),"top-left":o.Point.convert(ot["top-left"]||[0,0]),"top-right":o.Point.convert(ot["top-right"]||[0,0]),bottom:o.Point.convert(ot.bottom||[0,0]),"bottom-left":o.Point.convert(ot["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(ot["bottom-right"]||[0,0]),left:o.Point.convert(ot.left||[0,0]),right:o.Point.convert(ot.right||[0,0])}}return it(new o.Point(0,0))}(this.options.offset);if(!w){var L,F=this._container.offsetWidth,j=this._container.offsetHeight;L=b.y+E.bottom.y<j?["top"]:b.y>this._map.transform.height-j?["bottom"]:[],b.x<F/2?L.push("left"):b.x>this._map.transform.width-F/2&&L.push("right"),w=L.length===0?"bottom":L.join("-")}var nt=b.add(E[w]).round();_.setTransform(this._container,mi[w]+" translate("+nt.x+"px,"+nt.y+"px)"),Af(this._container,w,"popup")}},h.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var u=this._container.querySelector(Eh);u&&u.focus()}},h.prototype._onClose=function(){this.remove()},h}(o.Evented),Ds={version:o.version,supported:y,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:Qc,NavigationControl:Ya,GeolocateControl:wp,AttributionControl:Vo,ScaleControl:Fu,FullscreenControl:Ls,Popup:Ip,Marker:Mh,Style:Ii,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){ae().acquire(re)},clearPrewarmedResources:function(){var l=ln;l&&(l.isPreloaded()&&l.numActive()===1?(l.release(re),ln=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(l){o.config.ACCESS_TOKEN=l},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(l){o.config.API_URL=l},get workerCount(){return ye.workerCount},set workerCount(l){ye.workerCount=l},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(l){o.config.MAX_PARALLEL_IMAGE_REQUESTS=l},clearStorage:function(l){o.clearTileCache(l)},workerUrl:""};return Ds}),c})})(AM);var X0=AM.exports;const jg=C_(X0),k9=Fi({__name:"GeoLocateControl",props:{...os},setup(t){const{coords:e,error:i,resume:a,pause:c}=S9({immediate:!1}),f=t,{mapId:o,callMap:y,moduleContainerProps:_}=Eo(f),{trans:M,setLocale:T}=ga(o.value);T({map:{action:{"geolocate-control-find-my-location":"Find my location","geolocate-control-location-not-available":"Location not available"}}});const k=$e(!1),P=$e(),O=$e(0);let G,H,X=$e(void 0),st=$e(void 0);const K=Ge(()=>i.value?c4:Rv),et=Ge(()=>i.value?i.value.message||M.value("map.action.geolocate-control-location-not-available"):M.value("map.action.geolocate-control-find-my-location"));pl(e,jt=>{jt.longitude==Number.POSITIVE_INFINITY||jt.latitude==Number.POSITIVE_INFINITY||(P.value=[jt.longitude,jt.latitude],It(),O.value=jt.accuracy)});async function xt(){y(jt=>{if(!k.value){k.value=!0,a(),xu(()=>{P.value&&jt.flyTo({center:Uc(P),zoom:14})});return}if(Qt(jt,Uc(e))){jt.flyTo({center:P.value,zoom:14});return}c(),k.value=!1,P.value=void 0,Nt()})}Pz(()=>{Nt()});function Nt(){y(jt=>{jt.off("zoom",Gt)}),X.value&&X.value.remove(),st.value&&st.value.remove()}hM(()=>{G||(G=Dt("div","mapboxgl-user-location"),G.classList.add("mapboxgl-user-location"),G.appendChild(Dt("div","mapboxgl-user-location-dot")),G.appendChild(Dt("div","mapboxgl-user-location-heading"))),H||(H=Dt("div","mapboxgl-user-location-accuracy-circle"))});function It(){X.value=new X0.Marker({element:G,rotationAlignment:"map",pitchAlignment:"map"}),st.value=new X0.Marker({element:H,pitchAlignment:"map"}),y(jt=>{jt.on("zoom",Gt),P.value&&(X.value&&X.value.setLngLat(P.value).addTo(jt),st.value&&st.value.setLngLat(P.value).addTo(jt)),St(jt)})}function St(jt){const Vt=jt.getContainer().getBoundingClientRect().height/2,Bt=jt.unproject([0,Vt]),de=jt.unproject([100,Vt]),An=Bt.distanceTo(de)/100,_e=Math.ceil(2*O.value/An);H.style.width=`${_e}px`,H.style.height=`${_e}px`}function Gt(jt){St(jt.target)}const Dt=function(jt,Vt,Bt){const de=window.document.createElement(jt);return Vt!==void 0&&(de.className=Vt),de};function Qt(jt,Vt){const Bt=jt.getBounds();return Bt&&(Vt.longitude<Bt.getWest()||Vt.longitude>Bt.getEast()||Vt.latitude<Bt.getSouth()||Vt.latitude>Bt.getNorth())}return(jt,Vt)=>(mt(),Oe(Da,La(ma($(_))),{btn:se(()=>[zt(Tr,{disabled:!!$(i),icon:K.value,tooltip:et.value,active:k.value,onClick:_o(xt,["stop"])},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:K.value},null,8,["path"])]),_:1},8,["disabled","icon","tooltip","active"])]),default:se(()=>[Zn(jt.$slots,"default")]),_:3},16))}}),P9={class:"setting-container"},L9={class:"setting-field-container"},D9={class:"setting-center-container"},R9={__name:"GotoControl",props:{...os},setup(t){const e=t,[i,a]=fd(!1),{callMap:c,mapId:f,moduleContainerProps:o}=Eo(e),{trans:y,setLocale:_}=ga(f.value);_({map:{"goto-control":{title:"Go to",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Go to"}}}});function M(){a(!i.value),i.value&&c(P=>{T.value.zoom=P.getZoom(),T.value.center=[P.getCenter().lng.toFixed(6),P.getCenter().lat.toFixed(6)],T.value.sprite=P.getStyle().sprite,T.value.glyphs=P.getStyle().glyphs})}const T=$e({zoom:null,center:null,sprite:null,glyphs:null}),k=()=>{c(P=>{T.value.zoom&&P.setZoom(T.value.zoom),T.value.center&&P.setCenter(T.value.center)})};return(P,O)=>(mt(),Oe(Da,La(ma($(o))),{btn:se(()=>[zt(Tr,{onClick:O[0]||(O[0]=_o(G=>M(),["stop"])),tooltip:$(y)("map.goto-control.title")},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:$(jb)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:se(G=>[$(i)?(mt(),Oe($(pf),er({key:0,height:300,width:400},G,{show:$(i),"onUpdate:show":O[5]||(O[5]=H=>Pa(i)?i.value=H:null),title:$(y)("map.goto-control.title")}),{default:se(()=>[_t("div",P9,[_t("div",L9,[_t("div",null,[_t("label",null,yn($(y)("map.goto-control.field.center")),1),_t("div",D9,[zt($(Oo),{modelValue:T.value.center[0],"onUpdate:modelValue":O[1]||(O[1]=H=>T.value.center[0]=H),type:"number",step:"0.0000001"},null,8,["modelValue"]),zt($(Oo),{modelValue:T.value.center[1],"onUpdate:modelValue":O[2]||(O[2]=H=>T.value.center[1]=H),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),_t("div",null,[zt($(Oo),{label:$(y)("map.goto-control.field.zoom"),modelValue:T.value.zoom,"onUpdate:modelValue":O[3]||(O[3]=H=>T.value.zoom=H),type:"number",min:"0",max:"24"},null,8,["label","modelValue"])])]),zt($(Oc),{class:"btn-container",onClick:O[4]||(O[4]=H=>k())},{default:se(()=>[fa(yn($(y)("map.goto-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):on("",!0)]),default:se(()=>[Zn(P.$slots,"default")]),_:3},16))}},z9=Fi({__name:"HomeControl",props:{...os,zoom:Number,center:Array},setup(t){const e=t,i=$e({lat:0,lng:0}),a=$e(e.zoom||0),{callMap:c,mapId:f,moduleContainerProps:o}=Eo(e,T),{trans:y,setLocale:_}=ga(f.value);_({map:{home:{title:"Default view"}}});function M(){c(k=>{k.setZoom(a.value),k.setCenter(i.value)})}function T(k){e.zoom!=null?a.value=e.zoom:a.value=k.getZoom(),e.center!=null?(i.value.lat=e.center[1],i.value.lng=e.center[0]):i.value=k.getCenter()}return(k,P)=>(mt(),Oe(Da,La(ma($(o))),{btn:se(()=>[zt(Tr,{onClick:M,tooltip:$(y)("map.home.title")},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:$(y4)},null,8,["path"])]),_:1},8,["tooltip"])]),default:se(()=>[Zn(k.$slots,"default")]),_:3},16))}}),O9=Fi({__name:"ActionControl",props:{...os},setup(t){const e=t,{callMap:i,mapId:a,moduleContainerProps:c}=Eo(e),f={},o=pa(a.value,gd),y=Ge(()=>o.items);pl(y,M=>{_(M)},{deep:!0});function _(M){const T=I_.groupBy(M,P=>P.event_map_type),k=[];i(P=>{for(const O in T)if(k.push(O),Object.prototype.hasOwnProperty.call(T,O)){const G=T[O],H=f[O],X=G[0];if(H&&H.id===X.id)return;H&&H.removeFromMap(P),f[O]=X,X&&X.addToMap(P),d2(a.value,O,X)}for(const O in f)if(Object.prototype.hasOwnProperty.call(f,O)){const G=f[O];!k.includes(O)&&G&&(G.removeFromMap(P),d2(a.value,O,void 0),f[O]=void 0)}})}return(M,T)=>(mt(),Oe(Da,La(ma($(c))),null,16))}}),B9=t=>(lc("data-v-49c37a19"),t=t(),uc(),t),F9={key:0,class:""},N9=B9(()=>_t("div",{class:"not-support-map"},[_t("p",{class:""}," Trnh duyt ca bn khng h tr hin th bn , vui lng i trnh duyt hoc cp nht bn mi  xem. ")],-1)),V9=[N9],U9=["mapId"],j9={class:"map-viewer"},H9=["id"],G9=["id"],q9=["id"],W9=["id"],Z9=["id"],$9=Fi({__name:"Map",props:{mapboxAccessToken:{type:String,default:""},initOptions:{type:Object,default:()=>({attributionControl:!1,zoomControl:!1})},dragId:{type:String}},emits:["map-loaded","map-destroy"],setup(t,{emit:e}){if(!jg)throw new Error("mapboxgl is not installed.");const i=bM({mobile:0,tablet:640,laptop:1024,desktop:1280}),a={center:[105.19084739818732,15.827971829957548],zoom:5.297175623863693,maxZoom:22},c=t,f=e;jg.accessToken=c.mapboxAccessToken;const o=$e(),y=$e(jg.supported()),_=$e(!1);let M;const T=$e(sf());Ge(()=>ck[T.value]),ml(()=>{const st=Object.assign({},a,c.initOptions);M=new jg.Map({accessToken:c.mapboxAccessToken,container:o.value,style:{version:8,metadata:{},sources:{},sprite:"https://tiles.eofactory.ai/styles/basic/sprite",glyphs:"https://tiles.eofactory.ai/fonts/{fontstack}/{range}.pbf",layers:[]},...st}),M.id=T.value,up.initMap(T.value,M),M.once("load",()=>{_.value=!0,f("map-loaded",M)})}),dd(()=>{M&&(M.remove(),f("map-destroy",M)),M=void 0,up.removeMap(T.value)});const k=Ge(()=>`map-draggable-${T.value}`),P=Ge(()=>`bottom-right-${T.value}`),O=Ge(()=>`bottom-left-${T.value}`),G=Ge(()=>`top-right-${T.value}`),H=Ge(()=>`top-left-${T.value}`);ld("$map.dragId",c.dragId||k.value),ld("$map.id",T.value);const X=i.smallerOrEqual("tablet");return(st,K)=>y.value?(mt(),Yt("div",{key:1,class:Zo(["map-container",{"map-mobile-container":$(X)}]),mapId:T.value},[_t("div",j9,[_t("div",{ref_key:"mapContainer",ref:o,class:"map-content",id:T.value},null,8,H9),c.dragId?on("",!0):(mt(),Yt(ui,{key:0},[_t("div",{class:"right-bottom-container",id:P.value},null,8,G9),_t("div",{class:"left-bottom-container",id:O.value},null,8,q9),_t("div",{class:"right-top-container",id:G.value},null,8,W9),_t("div",{class:"left-top-container",id:H.value},null,8,Z9),zt($(XO),{class:"drag-container","container-id":k.value},null,8,["container-id"])],64)),_.value?Zn(st.$slots,"default",{key:1},void 0,!0):on("",!0),_.value?(mt(),Oe(O9,{key:2})):on("",!0)])],10,U9)):(mt(),Yt("div",F9,V9))}}),Y9=jn($9,[["__scopeId","data-v-49c37a19"]]),X9={class:"button-container mouse-coordinates-container"},K9={class:"mouse-coordinates-part zoom-part"},Q9={class:"mouse-coordinates-zoom"},J9={title:"Current Zoom",class:"icon"},tN={style:{"margin-left":"4px"}},eN={class:"mouse-coordinates-part coordinates-part"},nN={class:"mouse-coordinates-point"},iN=["innerHTML"],rN=["title"],oN={class:"mouse-coordinates-part crs-part"},aN={class:"mouse-coordinates-point"},sN=["value"],lN={class:"mouse-coordinates-part scale-part"},uN=Fi({__name:"MouseCoordinatesControl",props:{...os},setup(t){const{getCrsItems:e,setCrs:i,getCrs:a,getCrsItem:c}=Gb,f=t,o={icon:jb,zoom:A4,change:i4},y=$e(),_=$e(""),M=$e({latitude:0,longitude:0}),T=$e(0),k=$e(!1),{callMap:P,mapId:O,moduleContainerProps:G}=Eo(f,Nt,It),{format:H}=iM(O.value),X=Ge(()=>e(O.value)),st=$e(a(O.value)),K=$e(c(O.value)),et=Ge({get(){return st.value},set(_e){return st.value=_e,K.value=X.value.find(He=>He.epsg==_e),i(O.value,_e)}}),xt=Ge(()=>{var _e;return((_e=K.value)==null?void 0:_e.unit)==="degree"});function Nt(_e){T.value=+_e.getZoom().toFixed(2),_e.on("zoomend",jt),_e.on("mousemove",Gt),_e.on("move",St),T.value=+_e.getZoom().toFixed(2);let He=_e.getCenter();M.value.latitude=He.lat,M.value.longitude=He.lng,Qt(),xu(()=>{Vt(_e,y.value)})}function It(_e){_e.off("zoomend",jt),_e.off("mousemove",Gt),_e.off("move",St)}function St(){P(_e=>{Vt(_e,y.value)})}const Gt=I_.debounce(function(_e){let He=[_e.lngLat.lng,_e.lngLat.lat];M.value.latitude=He[1],M.value.longitude=He[0],Qt()},15);function Dt(){k.value=!k.value,Qt()}function Qt(){const _e=H(M.value,k.value);_.value=_e.longitude+", &nbsp;"+_e.latitude}function jt(){P(_e=>{T.value=+_e.getZoom().toFixed(2)})}function Vt(_e,He){const ki=_e.getContainer().clientHeight/2,oi=_e.unproject([0,ki]),Vn=_e.unproject([100,ki]),gn=oi.distanceTo(Vn);gn>=1e3?Bt(He,gn/1e3,"km"):Bt(He,gn,"m")}function Bt(_e,He,Ue){const ki=An(He);_e&&(_e.innerHTML=`${ki}&nbsp;${Ue}`)}function de(_e){const He=Math.pow(10,Math.ceil(-Math.log(_e)/Math.LN10));return Math.round(_e*He)/He}function An(_e){const He=Math.pow(10,`${Math.floor(_e)}`.length-1);let Ue=_e/He;return Ue=Ue>=10?10:Ue>=5?5:Ue>=3?3:Ue>=2?2:Ue>=1?1:de(Ue),He*Ue}return(_e,He)=>(mt(),Oe(Da,La(ma($(G))),{btn:se(()=>[_t("div",X9,[_t("div",K9,[_t("div",Q9,[_t("span",J9,[zt($(Bn),{size:14,type:"mdi",path:o.zoom},null,8,["path"])]),_t("div",tN,yn(T.value),1)])]),_t("div",eN,[_t("div",nN,[_t("div",{style:Jr([{"margin-left":"4px"},{"min-width":k.value?"220px":"100px"}]),class:"selectable",innerHTML:_.value},null,12,iN),xt.value?(mt(),Yt("i",{key:0,title:k.value?"DMS <=> Latitude, Longitude":"Latitude, Longitude <=> DMS",style:{"margin-left":"4px"},onClick:Dt,class:"icon icon-clickable"},[zt($(Bn),{size:14,type:"mdi",path:o.change},null,8,["path"])],8,rN)):on("",!0)])]),_t("div",oN,[_t("div",aN,[ac(_t("select",{"onUpdate:modelValue":He[0]||(He[0]=Ue=>et.value=Ue),class:"crs-select",style:{width:"70px"}},[(mt(!0),Yt(ui,null,$o(X.value,Ue=>(mt(),Yt("option",{value:Ue.epsg,key:Ue.epsg},yn(Ue.name||Ue.epsg),9,sN))),128))],512),[[Rb,et.value]])])]),_t("div",lN,[_t("div",{ref_key:"scale",ref:y,class:"scale-custom"},null,512)])])]),_:1},16))}}),cN=jn(uN,[["__scopeId","data-v-e65a597c"]]),hN={class:"setting-container"},fN={class:"setting-field-container"},pN={class:"setting-center-container"},dN={__name:"SettingControl",props:{...os},setup(t){const e=t,[i,a]=fd(!1),{callMap:c,mapId:f,moduleContainerProps:o}=Eo(e),{trans:y,setLocale:_}=ga(f.value);_({map:{"setting-control":{title:"Setting",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Apply"}}}});function M(){a(!i.value),i.value&&c(P=>{T.value.zoom=P.getZoom(),T.value.center=[P.getCenter().lng.toFixed(6),P.getCenter().lat.toFixed(6)],T.value.sprite=P.getStyle().sprite,T.value.glyphs=P.getStyle().glyphs})}const T=$e({zoom:null,center:null,sprite:null,glyphs:null}),k=()=>{c(P=>{T.value.zoom&&P.setZoom(T.value.zoom),T.value.center&&P.setCenter(T.value.center);const O=P.getStyle();T.value.sprite&&(O.sprite=T.value.sprite),T.value.glyphs&&(O.glyphs=T.value.glyphs),P.setStyle(O)})};return(P,O)=>(mt(),Oe(Da,La(ma($(o))),{btn:se(()=>[zt(Tr,{onClick:O[0]||(O[0]=_o(G=>M(),["stop"])),tooltip:$(y)("map.setting-control.title")},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:$(s4)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:se(G=>[$(i)?(mt(),Oe($(pf),er({key:0,height:400,width:400},G,{show:$(i),"onUpdate:show":O[7]||(O[7]=H=>Pa(i)?i.value=H:null),title:$(y)("map.setting-control.title")}),{default:se(()=>[_t("div",hN,[_t("div",fN,[_t("div",null,[_t("label",null,yn($(y)("map.setting-control.field.center")),1),_t("div",pN,[zt($(Oo),{modelValue:T.value.center[0],"onUpdate:modelValue":O[1]||(O[1]=H=>T.value.center[0]=H),type:"number",step:"0.0000001"},null,8,["modelValue"]),zt($(Oo),{modelValue:T.value.center[1],"onUpdate:modelValue":O[2]||(O[2]=H=>T.value.center[1]=H),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),_t("div",null,[zt($(Oo),{label:$(y)("map.setting-control.field.zoom"),modelValue:T.value.zoom,"onUpdate:modelValue":O[3]||(O[3]=H=>T.value.zoom=H)},null,8,["label","modelValue"])]),_t("div",null,[zt($(Oo),{label:$(y)("map.setting-control.field.sprite"),modelValue:T.value.sprite,"onUpdate:modelValue":O[4]||(O[4]=H=>T.value.sprite=H)},null,8,["label","modelValue"])]),_t("div",null,[zt($(Oo),{label:$(y)("map.setting-control.field.glyphs"),modelValue:T.value.glyphs,"onUpdate:modelValue":O[5]||(O[5]=H=>T.value.glyphs=H)},null,8,["label","modelValue"])])]),zt($(Oc),{class:"btn-container",onClick:O[6]||(O[6]=H=>k())},{default:se(()=>[fa(yn($(y)("map.setting-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):on("",!0)]),default:se(()=>[Zn(P.$slots,"default")]),_:3},16))}},mN=_t("g",{fill:"none","fill-rule":"evenodd"},[_t("path",{d:"M0 0h24v24H0z"}),_t("path",{d:"M12 3l4 8H8z",fill:"#f44336"}),_t("path",{d:"M12 21l-4-8h8z",fill:"#9E9E9E"})],-1),gN=[mN],vN={__name:"ZoomControl",props:{...os,showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0}},setup(t){const e={plus:_p,minus:I4},i=t,a=$e("rotate(0deg)"),{callMap:c,mapId:f,moduleContainerProps:o}=Eo(i,T,k),{trans:y,setLocale:_}=ga(f.value);_({map:{action:{"navigation-control-zoom-in":"Zoom in","navigation-control-zoom-out":"Zoom out","navigation-control-reset-bearing":"Reset bearing to north"}}});let M=null;function T(X){M=H.bind(null,X),X.on("rotate",M)}function k(X){X.off("rotate",M)}function P(X){c(st=>{st.zoomIn({},{originalEvent:X})})}function O(X){c(st=>{st.zoomOut({},{originalEvent:X})})}function G(){c(X=>{X.easeTo({bearing:0,pitch:0})})}function H(X){const st=X.getBearing()*-1;a.value=`rotate(${st}deg)`}return(X,st)=>(mt(),Oe(Da,La(ma($(o))),{btn:se(()=>[zt(Rm,null,{default:se(()=>[t.showCompass?(mt(),Oe(Tr,{key:0,onClick:G,title:$(y)("map.action.navigation-control-reset-bearing")},{default:se(()=>[(mt(),Yt("svg",{height:"22",style:Jr({transform:a.value}),viewBox:"0 0 24 24",width:"22",xmlns:"http://www.w3.org/2000/svg"},gN,4))]),_:1},8,["title"])):on("",!0),t.showZoom?(mt(),Oe(Tr,{key:1,onClick:P,title:$(y)("map.action.navigation-control-zoom-in")},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:e.plus},null,8,["path"])]),_:1},8,["title"])):on("",!0),t.showZoom?(mt(),Oe(Tr,{key:2,onClick:O,title:$(y)("map.action.navigation-control-zoom-out")},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:e.minus},null,8,["path"])]),_:1},8,["title"])):on("",!0)]),_:1})]),default:se(()=>[Zn(X.$slots,"default")]),_:3},16))}};function I0(){const t=Math.floor(Math.random()*L2.length);return L2[t]}const L2=["#0E9F6E","#84A2AE","#BAC9CF","#D7E3E8","#EBF1F3","#da251d","#ffbd99","#ffa07f","#ff8365","#ff664c","#fb4834","#b90004","#9a0000","#7c0000","#600000","#25CCF7","#FD7272","#54a0ff","#00d2d3","#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d","#55efc4","#81ecec","#74b9ff","#a29bfe","#dfe6e9","#00b894","#00cec9","#0984e3","#6c5ce7","#ffeaa7","#fab1a0","#ff7675","#fd79a8","#fdcb6e","#e17055","#d63031","#feca57","#5f27cd","#54a0ff","#01a3a4"];var Vs=63710088e-1,hA={centimeters:Vs*100,centimetres:Vs*100,degrees:Vs/111325,feet:Vs*3.28084,inches:Vs*39.37,kilometers:Vs/1e3,kilometres:Vs/1e3,meters:Vs,metres:Vs,miles:Vs/1609.344,millimeters:Vs*1e3,millimetres:Vs*1e3,nauticalmiles:Vs/1852,radians:1,yards:Vs*1.0936},yN={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Vs,yards:1.0936133},ob={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function sc(t,e,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=e||{},a.geometry=t,a}function _N(t,e,i){switch(t){case"Point":return is(e).geometry;case"LineString":return xs(e).geometry;case"Polygon":return $m(e).geometry;case"MultiPoint":return wM(e).geometry;case"MultiLineString":return fA(e).geometry;case"MultiPolygon":return CM(e).geometry;default:throw new Error(t+" is invalid")}}function is(t,e,i){if(i===void 0&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!K0(t[0])||!K0(t[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:t};return sc(a,e,i)}function xN(t,e,i){return i===void 0&&(i={}),gp(t.map(function(a){return is(a,e)}),i)}function $m(t,e,i){i===void 0&&(i={});for(var a=0,c=t;a<c.length;a++){var f=c[a];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<f[f.length-1].length;o++)if(f[f.length-1][o]!==f[0][o])throw new Error("First and last Position are not equivalent.")}var y={type:"Polygon",coordinates:t};return sc(y,e,i)}function bN(t,e,i){return i===void 0&&(i={}),gp(t.map(function(a){return $m(a,e)}),i)}function xs(t,e,i){if(i===void 0&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var a={type:"LineString",coordinates:t};return sc(a,e,i)}function AN(t,e,i){return i===void 0&&(i={}),gp(t.map(function(a){return xs(a,e)}),i)}function gp(t,e){e===void 0&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function fA(t,e,i){i===void 0&&(i={});var a={type:"MultiLineString",coordinates:t};return sc(a,e,i)}function wM(t,e,i){i===void 0&&(i={});var a={type:"MultiPoint",coordinates:t};return sc(a,e,i)}function CM(t,e,i){i===void 0&&(i={});var a={type:"MultiPolygon",coordinates:t};return sc(a,e,i)}function wN(t,e,i){i===void 0&&(i={});var a={type:"GeometryCollection",geometries:t};return sc(a,e,i)}function CN(t,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i}function pA(t,e){e===void 0&&(e="kilometers");var i=hA[e];if(!i)throw new Error(e+" units is invalid");return t*i}function dA(t,e){e===void 0&&(e="kilometers");var i=hA[e];if(!i)throw new Error(e+" units is invalid");return t/i}function IN(t,e){return mA(dA(t,e))}function IM(t){var e=t%360;return e<0&&(e+=360),e}function mA(t){var e=t%(2*Math.PI);return e*180/Math.PI}function ef(t){var e=t%360;return e*Math.PI/180}function MN(t,e,i){if(e===void 0&&(e="kilometers"),i===void 0&&(i="kilometers"),!(t>=0))throw new Error("length must be a positive number");return pA(dA(t,e),i)}function EN(t,e,i){if(e===void 0&&(e="meters"),i===void 0&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var a=ob[e];if(!a)throw new Error("invalid original units");var c=ob[i];if(!c)throw new Error("invalid final units");return t/a*c}function K0(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function gA(t){return!!t&&t.constructor===Object}function SN(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(t.length!==4&&t.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(e){if(!K0(e))throw new Error("bbox must only contain numbers")})}function TN(t){if(!t)throw new Error("id is required");if(["string","number"].indexOf(typeof t)===-1)throw new Error("id must be a number or a string")}const kN=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:ob,bearingToAzimuth:IM,convertArea:EN,convertLength:MN,degreesToRadians:ef,earthRadius:Vs,factors:hA,feature:sc,featureCollection:gp,geometry:_N,geometryCollection:wN,isNumber:K0,isObject:gA,lengthToDegrees:IN,lengthToRadians:dA,lineString:xs,lineStrings:AN,multiLineString:fA,multiPoint:wM,multiPolygon:CM,point:is,points:xN,polygon:$m,polygons:bN,radiansToDegrees:mA,radiansToLength:pA,round:CN,unitsFactors:yN,validateBBox:SN,validateId:TN},Symbol.toStringTag,{value:"Module"}));function yd(t,e,i){if(t!==null)for(var a,c,f,o,y,_,M,T=0,k=0,P,O=t.type,G=O==="FeatureCollection",H=O==="Feature",X=G?t.features.length:1,st=0;st<X;st++){M=G?t.features[st].geometry:H?t.geometry:t,P=M?M.type==="GeometryCollection":!1,y=P?M.geometries.length:1;for(var K=0;K<y;K++){var et=0,xt=0;if(o=P?M.geometries[K]:M,o!==null){_=o.coordinates;var Nt=o.type;switch(T=i&&(Nt==="Polygon"||Nt==="MultiPolygon")?1:0,Nt){case null:break;case"Point":if(e(_,k,st,et,xt)===!1)return!1;k++,et++;break;case"LineString":case"MultiPoint":for(a=0;a<_.length;a++){if(e(_[a],k,st,et,xt)===!1)return!1;k++,Nt==="MultiPoint"&&et++}Nt==="LineString"&&et++;break;case"Polygon":case"MultiLineString":for(a=0;a<_.length;a++){for(c=0;c<_[a].length-T;c++){if(e(_[a][c],k,st,et,xt)===!1)return!1;k++}Nt==="MultiLineString"&&et++,Nt==="Polygon"&&xt++}Nt==="Polygon"&&et++;break;case"MultiPolygon":for(a=0;a<_.length;a++){for(xt=0,c=0;c<_[a].length;c++){for(f=0;f<_[a][c].length-T;f++){if(e(_[a][c][f],k,st,et,xt)===!1)return!1;k++}xt++}et++}break;case"GeometryCollection":for(a=0;a<o.geometries.length;a++)if(yd(o.geometries[a],e,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function PN(t,e,i,a){var c=i;return yd(t,function(f,o,y,_,M){o===0&&i===void 0?c=f:c=e(c,f,o,y,_,M)},a),c}function MM(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&e(t.features[i].properties,i)!==!1;i++);break;case"Feature":e(t.properties,0);break}}function LN(t,e,i){var a=i;return MM(t,function(c,f){f===0&&i===void 0?a=c:a=e(a,c,f)}),a}function Q0(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var i=0;i<t.features.length&&e(t.features[i],i)!==!1;i++);}function DN(t,e,i){var a=i;return Q0(t,function(c,f){f===0&&i===void 0?a=c:a=e(a,c,f)}),a}function RN(t){var e=[];return yd(t,function(i){e.push(i)}),e}function vA(t,e){var i,a,c,f,o,y,_,M,T,k,P=0,O=t.type==="FeatureCollection",G=t.type==="Feature",H=O?t.features.length:1;for(i=0;i<H;i++){for(y=O?t.features[i].geometry:G?t.geometry:t,M=O?t.features[i].properties:G?t.properties:{},T=O?t.features[i].bbox:G?t.bbox:void 0,k=O?t.features[i].id:G?t.id:void 0,_=y?y.type==="GeometryCollection":!1,o=_?y.geometries.length:1,c=0;c<o;c++){if(f=_?y.geometries[c]:y,f===null){if(e(null,P,M,T,k)===!1)return!1;continue}switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(f,P,M,T,k)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<f.geometries.length;a++)if(e(f.geometries[a],P,M,T,k)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}P++}}function EM(t,e,i){var a=i;return vA(t,function(c,f,o,y,_){f===0&&i===void 0?a=c:a=e(a,c,f,o,y,_)}),a}function lf(t,e){vA(t,function(i,a,c,f,o){var y=i===null?null:i.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return e(sc(i,c,{bbox:f,id:o}),a,0)===!1?!1:void 0}var _;switch(y){case"MultiPoint":_="Point";break;case"MultiLineString":_="LineString";break;case"MultiPolygon":_="Polygon";break}for(var M=0;M<i.coordinates.length;M++){var T=i.coordinates[M],k={type:_,coordinates:T};if(e(sc(k,c),a,M)===!1)return!1}})}function zN(t,e,i){var a=i;return lf(t,function(c,f,o){f===0&&o===0&&i===void 0?a=c:a=e(a,c,f,o)}),a}function SM(t,e){lf(t,function(i,a,c){var f=0;if(i.geometry){var o=i.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var y,_=0,M=0,T=0;if(yd(i,function(k,P,O,G,H){if(y===void 0||a>_||G>M||H>T){y=k,_=a,M=G,T=H,f=0;return}var X=xs([y,k],i.properties);if(e(X,a,c,H,f)===!1)return!1;f++,y=k})===!1)return!1}}})}function TM(t,e,i){var a=i,c=!1;return SM(t,function(f,o,y,_,M){c===!1&&i===void 0?a=f:a=e(a,f,o,y,_,M),c=!0}),a}function kM(t,e){if(!t)throw new Error("geojson is required");lf(t,function(i,a,c){if(i.geometry!==null){var f=i.geometry.type,o=i.geometry.coordinates;switch(f){case"LineString":if(e(i,a,c,0,0)===!1)return!1;break;case"Polygon":for(var y=0;y<o.length;y++)if(e(xs(o[y],i.properties),a,c,y)===!1)return!1;break}}})}function ON(t,e,i){var a=i;return kM(t,function(c,f,o,y){f===0&&i===void 0?a=c:a=e(a,c,f,o,y)}),a}function BN(t,e){if(e=e||{},!gA(e))throw new Error("options is invalid");var i=e.featureIndex||0,a=e.multiFeatureIndex||0,c=e.geometryIndex||0,f=e.segmentIndex||0,o=e.properties,y;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),o=o||t.features[i].properties,y=t.features[i].geometry;break;case"Feature":o=o||t.properties,y=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=t;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var _=y.coordinates;switch(y.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=_.length+f-1),xs([_[f],_[f+1]],o,e);case"Polygon":return c<0&&(c=_.length+c),f<0&&(f=_[c].length+f-1),xs([_[c][f],_[c][f+1]],o,e);case"MultiLineString":return a<0&&(a=_.length+a),f<0&&(f=_[a].length+f-1),xs([_[a][f],_[a][f+1]],o,e);case"MultiPolygon":return a<0&&(a=_.length+a),c<0&&(c=_[a].length+c),f<0&&(f=_[a][c].length-f-1),xs([_[a][c][f],_[a][c][f+1]],o,e)}throw new Error("geojson is invalid")}function FN(t,e){if(e=e||{},!gA(e))throw new Error("options is invalid");var i=e.featureIndex||0,a=e.multiFeatureIndex||0,c=e.geometryIndex||0,f=e.coordIndex||0,o=e.properties,y;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),o=o||t.features[i].properties,y=t.features[i].geometry;break;case"Feature":o=o||t.properties,y=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=t;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var _=y.coordinates;switch(y.type){case"Point":return is(_,o,e);case"MultiPoint":return a<0&&(a=_.length+a),is(_[a],o,e);case"LineString":return f<0&&(f=_.length+f),is(_[f],o,e);case"Polygon":return c<0&&(c=_.length+c),f<0&&(f=_[c].length+f),is(_[c][f],o,e);case"MultiLineString":return a<0&&(a=_.length+a),f<0&&(f=_[a].length+f),is(_[a][f],o,e);case"MultiPolygon":return a<0&&(a=_.length+a),c<0&&(c=_[a].length+c),f<0&&(f=_[a][c].length-f),is(_[a][c][f],o,e)}throw new Error("geojson is invalid")}const NN=Object.freeze(Object.defineProperty({__proto__:null,coordAll:RN,coordEach:yd,coordReduce:PN,featureEach:Q0,featureReduce:DN,findPoint:FN,findSegment:BN,flattenEach:lf,flattenReduce:zN,geomEach:vA,geomReduce:EM,lineEach:kM,lineReduce:ON,propEach:MM,propReduce:LN,segmentEach:SM,segmentReduce:TM},Symbol.toStringTag,{value:"Module"}));function Bm(t){var e=[1/0,1/0,-1/0,-1/0];return yd(t,function(i){e[0]>i[0]&&(e[0]=i[0]),e[1]>i[1]&&(e[1]=i[1]),e[2]<i[0]&&(e[2]=i[0]),e[3]<i[1]&&(e[3]=i[1])}),e}Bm.default=Bm;const VN=Object.freeze(Object.defineProperty({__proto__:null,default:Bm},Symbol.toStringTag,{value:"Module"}));function Ev(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Sv(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function G_(t){return t.type==="Feature"?t.geometry:t}function Tv(t,e,i){if(i===void 0&&(i={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var a=Ev(t),c=G_(e),f=c.type,o=e.bbox,y=c.coordinates;if(o&&UN(a,o)===!1)return!1;f==="Polygon"&&(y=[y]);for(var _=!1,M=0;M<y.length&&!_;M++)if(D2(a,y[M][0],i.ignoreBoundary)){for(var T=!1,k=1;k<y[M].length&&!T;)D2(a,y[M][k],!i.ignoreBoundary)&&(T=!0),k++;T||(_=!0)}return _}function D2(t,e,i){var a=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var c=0,f=e.length-1;c<e.length;f=c++){var o=e[c][0],y=e[c][1],_=e[f][0],M=e[f][1],T=t[1]*(o-_)+y*(_-t[0])+M*(t[0]-o)===0&&(o-t[0])*(_-t[0])<=0&&(y-t[1])*(M-t[1])<=0;if(T)return!i;var k=y>t[1]!=M>t[1]&&t[0]<(_-o)*(t[1]-y)/(M-y)+o;k&&(a=!a)}return a}function UN(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function jN(t,e,i){i===void 0&&(i={});var a=Ev(t),c=Ev(e),f=ef(c[1]-a[1]),o=ef(c[0]-a[0]),y=ef(a[1]),_=ef(c[1]),M=Math.pow(Math.sin(f/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(y)*Math.cos(_);return pA(2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M)),i.units)}function PM(t,e,i){if(i===void 0&&(i={}),i.final===!0)return HN(t,e);var a=Ev(t),c=Ev(e),f=ef(a[0]),o=ef(c[0]),y=ef(a[1]),_=ef(c[1]),M=Math.sin(o-f)*Math.cos(_),T=Math.cos(y)*Math.sin(_)-Math.sin(y)*Math.cos(_)*Math.cos(o-f);return mA(Math.atan2(M,T))}function HN(t,e){var i=PM(e,t);return i=(i+180)%360,i}function GN(t,e){e===void 0&&(e={});var i=0,a=0,c=0;return yd(t,function(f){i+=f[0],a+=f[1],c++},!0),is([i/c,a/c],e.properties)}function R2(t){if(!t)throw new Error("geojson is required");var e=[];return lf(t,function(i){qN(i,e)}),gp(e)}function qN(t,e){var i=[],a=t.geometry;if(a!==null){switch(a.type){case"Polygon":i=Sv(a);break;case"LineString":i=[Sv(a)]}i.forEach(function(c){var f=WN(c,t.properties);f.forEach(function(o){o.id=e.length,e.push(o)})})}}function WN(t,e){var i=[];return t.reduce(function(a,c){var f=xs([a,c],e);return f.bbox=ZN(a,c),i.push(f),c}),i}function ZN(t,e){var i=t[0],a=t[1],c=e[0],f=e[1],o=i<c?i:c,y=a<f?a:f,_=i>c?i:c,M=a>f?a:f;return[o,y,_,M]}var yA={exports:{}},LM={exports:{}};(function(t,e){(function(i,a){t.exports=a()})(_s,function(){function i(K,et,xt,Nt,It){(function St(Gt,Dt,Qt,jt,Vt){for(;jt>Qt;){if(jt-Qt>600){var Bt=jt-Qt+1,de=Dt-Qt+1,An=Math.log(Bt),_e=.5*Math.exp(2*An/3),He=.5*Math.sqrt(An*_e*(Bt-_e)/Bt)*(de-Bt/2<0?-1:1),Ue=Math.max(Qt,Math.floor(Dt-de*_e/Bt+He)),ki=Math.min(jt,Math.floor(Dt+(Bt-de)*_e/Bt+He));St(Gt,Dt,Ue,ki,Vt)}var oi=Gt[Dt],Vn=Qt,gn=jt;for(a(Gt,Qt,Dt),Vt(Gt[jt],oi)>0&&a(Gt,Qt,jt);Vn<gn;){for(a(Gt,Vn,gn),Vn++,gn--;Vt(Gt[Vn],oi)<0;)Vn++;for(;Vt(Gt[gn],oi)>0;)gn--}Vt(Gt[Qt],oi)===0?a(Gt,Qt,gn):a(Gt,++gn,jt),gn<=Dt&&(Qt=gn+1),Dt<=gn&&(jt=gn-1)}})(K,et,xt||0,Nt||K.length-1,It||c)}function a(K,et,xt){var Nt=K[et];K[et]=K[xt],K[xt]=Nt}function c(K,et){return K<et?-1:K>et?1:0}var f=function(K){K===void 0&&(K=9),this._maxEntries=Math.max(4,K),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(K,et,xt){if(!xt)return et.indexOf(K);for(var Nt=0;Nt<et.length;Nt++)if(xt(K,et[Nt]))return Nt;return-1}function y(K,et){_(K,0,K.children.length,et,K)}function _(K,et,xt,Nt,It){It||(It=X(null)),It.minX=1/0,It.minY=1/0,It.maxX=-1/0,It.maxY=-1/0;for(var St=et;St<xt;St++){var Gt=K.children[St];M(It,K.leaf?Nt(Gt):Gt)}return It}function M(K,et){return K.minX=Math.min(K.minX,et.minX),K.minY=Math.min(K.minY,et.minY),K.maxX=Math.max(K.maxX,et.maxX),K.maxY=Math.max(K.maxY,et.maxY),K}function T(K,et){return K.minX-et.minX}function k(K,et){return K.minY-et.minY}function P(K){return(K.maxX-K.minX)*(K.maxY-K.minY)}function O(K){return K.maxX-K.minX+(K.maxY-K.minY)}function G(K,et){return K.minX<=et.minX&&K.minY<=et.minY&&et.maxX<=K.maxX&&et.maxY<=K.maxY}function H(K,et){return et.minX<=K.maxX&&et.minY<=K.maxY&&et.maxX>=K.minX&&et.maxY>=K.minY}function X(K){return{children:K,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function st(K,et,xt,Nt,It){for(var St=[et,xt];St.length;)if(!((xt=St.pop())-(et=St.pop())<=Nt)){var Gt=et+Math.ceil((xt-et)/Nt/2)*Nt;i(K,Gt,et,xt,It),St.push(et,Gt,Gt,xt)}}return f.prototype.all=function(){return this._all(this.data,[])},f.prototype.search=function(K){var et=this.data,xt=[];if(!H(K,et))return xt;for(var Nt=this.toBBox,It=[];et;){for(var St=0;St<et.children.length;St++){var Gt=et.children[St],Dt=et.leaf?Nt(Gt):Gt;H(K,Dt)&&(et.leaf?xt.push(Gt):G(K,Dt)?this._all(Gt,xt):It.push(Gt))}et=It.pop()}return xt},f.prototype.collides=function(K){var et=this.data;if(!H(K,et))return!1;for(var xt=[];et;){for(var Nt=0;Nt<et.children.length;Nt++){var It=et.children[Nt],St=et.leaf?this.toBBox(It):It;if(H(K,St)){if(et.leaf||G(K,St))return!0;xt.push(It)}}et=xt.pop()}return!1},f.prototype.load=function(K){if(!K||!K.length)return this;if(K.length<this._minEntries){for(var et=0;et<K.length;et++)this.insert(K[et]);return this}var xt=this._build(K.slice(),0,K.length-1,0);if(this.data.children.length)if(this.data.height===xt.height)this._splitRoot(this.data,xt);else{if(this.data.height<xt.height){var Nt=this.data;this.data=xt,xt=Nt}this._insert(xt,this.data.height-xt.height-1,!0)}else this.data=xt;return this},f.prototype.insert=function(K){return K&&this._insert(K,this.data.height-1),this},f.prototype.clear=function(){return this.data=X([]),this},f.prototype.remove=function(K,et){if(!K)return this;for(var xt,Nt,It,St=this.data,Gt=this.toBBox(K),Dt=[],Qt=[];St||Dt.length;){if(St||(St=Dt.pop(),Nt=Dt[Dt.length-1],xt=Qt.pop(),It=!0),St.leaf){var jt=o(K,St.children,et);if(jt!==-1)return St.children.splice(jt,1),Dt.push(St),this._condense(Dt),this}It||St.leaf||!G(St,Gt)?Nt?(xt++,St=Nt.children[xt],It=!1):St=null:(Dt.push(St),Qt.push(xt),xt=0,Nt=St,St=St.children[0])}return this},f.prototype.toBBox=function(K){return K},f.prototype.compareMinX=function(K,et){return K.minX-et.minX},f.prototype.compareMinY=function(K,et){return K.minY-et.minY},f.prototype.toJSON=function(){return this.data},f.prototype.fromJSON=function(K){return this.data=K,this},f.prototype._all=function(K,et){for(var xt=[];K;)K.leaf?et.push.apply(et,K.children):xt.push.apply(xt,K.children),K=xt.pop();return et},f.prototype._build=function(K,et,xt,Nt){var It,St=xt-et+1,Gt=this._maxEntries;if(St<=Gt)return y(It=X(K.slice(et,xt+1)),this.toBBox),It;Nt||(Nt=Math.ceil(Math.log(St)/Math.log(Gt)),Gt=Math.ceil(St/Math.pow(Gt,Nt-1))),(It=X([])).leaf=!1,It.height=Nt;var Dt=Math.ceil(St/Gt),Qt=Dt*Math.ceil(Math.sqrt(Gt));st(K,et,xt,Qt,this.compareMinX);for(var jt=et;jt<=xt;jt+=Qt){var Vt=Math.min(jt+Qt-1,xt);st(K,jt,Vt,Dt,this.compareMinY);for(var Bt=jt;Bt<=Vt;Bt+=Dt){var de=Math.min(Bt+Dt-1,Vt);It.children.push(this._build(K,Bt,de,Nt-1))}}return y(It,this.toBBox),It},f.prototype._chooseSubtree=function(K,et,xt,Nt){for(;Nt.push(et),!et.leaf&&Nt.length-1!==xt;){for(var It=1/0,St=1/0,Gt=void 0,Dt=0;Dt<et.children.length;Dt++){var Qt=et.children[Dt],jt=P(Qt),Vt=(Bt=K,de=Qt,(Math.max(de.maxX,Bt.maxX)-Math.min(de.minX,Bt.minX))*(Math.max(de.maxY,Bt.maxY)-Math.min(de.minY,Bt.minY))-jt);Vt<St?(St=Vt,It=jt<It?jt:It,Gt=Qt):Vt===St&&jt<It&&(It=jt,Gt=Qt)}et=Gt||et.children[0]}var Bt,de;return et},f.prototype._insert=function(K,et,xt){var Nt=xt?K:this.toBBox(K),It=[],St=this._chooseSubtree(Nt,this.data,et,It);for(St.children.push(K),M(St,Nt);et>=0&&It[et].children.length>this._maxEntries;)this._split(It,et),et--;this._adjustParentBBoxes(Nt,It,et)},f.prototype._split=function(K,et){var xt=K[et],Nt=xt.children.length,It=this._minEntries;this._chooseSplitAxis(xt,It,Nt);var St=this._chooseSplitIndex(xt,It,Nt),Gt=X(xt.children.splice(St,xt.children.length-St));Gt.height=xt.height,Gt.leaf=xt.leaf,y(xt,this.toBBox),y(Gt,this.toBBox),et?K[et-1].children.push(Gt):this._splitRoot(xt,Gt)},f.prototype._splitRoot=function(K,et){this.data=X([K,et]),this.data.height=K.height+1,this.data.leaf=!1,y(this.data,this.toBBox)},f.prototype._chooseSplitIndex=function(K,et,xt){for(var Nt,It,St,Gt,Dt,Qt,jt,Vt=1/0,Bt=1/0,de=et;de<=xt-et;de++){var An=_(K,0,de,this.toBBox),_e=_(K,de,xt,this.toBBox),He=(It=An,St=_e,Gt=void 0,Dt=void 0,Qt=void 0,jt=void 0,Gt=Math.max(It.minX,St.minX),Dt=Math.max(It.minY,St.minY),Qt=Math.min(It.maxX,St.maxX),jt=Math.min(It.maxY,St.maxY),Math.max(0,Qt-Gt)*Math.max(0,jt-Dt)),Ue=P(An)+P(_e);He<Vt?(Vt=He,Nt=de,Bt=Ue<Bt?Ue:Bt):He===Vt&&Ue<Bt&&(Bt=Ue,Nt=de)}return Nt||xt-et},f.prototype._chooseSplitAxis=function(K,et,xt){var Nt=K.leaf?this.compareMinX:T,It=K.leaf?this.compareMinY:k;this._allDistMargin(K,et,xt,Nt)<this._allDistMargin(K,et,xt,It)&&K.children.sort(Nt)},f.prototype._allDistMargin=function(K,et,xt,Nt){K.children.sort(Nt);for(var It=this.toBBox,St=_(K,0,et,It),Gt=_(K,xt-et,xt,It),Dt=O(St)+O(Gt),Qt=et;Qt<xt-et;Qt++){var jt=K.children[Qt];M(St,K.leaf?It(jt):jt),Dt+=O(St)}for(var Vt=xt-et-1;Vt>=et;Vt--){var Bt=K.children[Vt];M(Gt,K.leaf?It(Bt):Bt),Dt+=O(Gt)}return Dt},f.prototype._adjustParentBBoxes=function(K,et,xt){for(var Nt=xt;Nt>=0;Nt--)M(et[Nt],K)},f.prototype._condense=function(K){for(var et=K.length-1,xt=void 0;et>=0;et--)K[et].children.length===0?et>0?(xt=K[et-1].children).splice(xt.indexOf(K[et]),1):this.clear():y(K[et],this.toBBox)},f})})(LM);var $N=LM.exports;const YN=iA(kN),XN=iA(NN),KN=iA(VN);var fh=$N,DM=YN,RM=XN,hm=KN.default,QN=RM.featureEach;RM.coordEach;DM.polygon;var z2=DM.featureCollection;function zM(t){var e=new fh(t);return e.insert=function(i){if(i.type!=="Feature")throw new Error("invalid feature");return i.bbox=i.bbox?i.bbox:hm(i),fh.prototype.insert.call(this,i)},e.load=function(i){var a=[];return Array.isArray(i)?i.forEach(function(c){if(c.type!=="Feature")throw new Error("invalid features");c.bbox=c.bbox?c.bbox:hm(c),a.push(c)}):QN(i,function(c){if(c.type!=="Feature")throw new Error("invalid features");c.bbox=c.bbox?c.bbox:hm(c),a.push(c)}),fh.prototype.load.call(this,a)},e.remove=function(i,a){if(i.type!=="Feature")throw new Error("invalid feature");return i.bbox=i.bbox?i.bbox:hm(i),fh.prototype.remove.call(this,i,a)},e.clear=function(){return fh.prototype.clear.call(this)},e.search=function(i){var a=fh.prototype.search.call(this,this.toBBox(i));return z2(a)},e.collides=function(i){return fh.prototype.collides.call(this,this.toBBox(i))},e.all=function(){var i=fh.prototype.all.call(this);return z2(i)},e.toJSON=function(){return fh.prototype.toJSON.call(this)},e.fromJSON=function(i){return fh.prototype.fromJSON.call(this,i)},e.toBBox=function(i){var a;if(i.bbox)a=i.bbox;else if(Array.isArray(i)&&i.length===4)a=i;else if(Array.isArray(i)&&i.length===6)a=[i[0],i[1],i[3],i[4]];else if(i.type==="Feature")a=hm(i);else if(i.type==="FeatureCollection")a=hm(i);else throw new Error("invalid geojson");return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}},e}yA.exports=zM;yA.exports.default=zM;var JN=yA.exports;const tV=C_(JN);function _A(t,e){var i={},a=[];if(t.type==="LineString"&&(t=sc(t)),e.type==="LineString"&&(e=sc(e)),t.type==="Feature"&&e.type==="Feature"&&t.geometry!==null&&e.geometry!==null&&t.geometry.type==="LineString"&&e.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var c=O2(t,e);return c&&a.push(c),gp(a)}var f=tV();return f.load(R2(e)),Q0(R2(t),function(o){Q0(f.search(o),function(y){var _=O2(o,y);if(_){var M=Sv(_).join(",");i[M]||(i[M]=!0,a.push(_))}})}),gp(a)}function O2(t,e){var i=Sv(t),a=Sv(e);if(i.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(a.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var c=i[0][0],f=i[0][1],o=i[1][0],y=i[1][1],_=a[0][0],M=a[0][1],T=a[1][0],k=a[1][1],P=(k-M)*(o-c)-(T-_)*(y-f),O=(T-_)*(f-M)-(k-M)*(c-_),G=(o-c)*(f-M)-(y-f)*(c-_);if(P===0)return null;var H=O/P,X=G/P;if(H>=0&&H<=1&&X>=0&&X<=1){var st=c+H*(o-c),K=f+H*(y-f);return is([st,K])}return null}var B2=6378137;function eV(t){return EM(t,function(e,i){return e+nV(i)},0)}function nV(t){var e=0,i;switch(t.type){case"Polygon":return F2(t.coordinates);case"MultiPolygon":for(i=0;i<t.coordinates.length;i++)e+=F2(t.coordinates[i]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function F2(t){var e=0;if(t&&t.length>0){e+=Math.abs(N2(t[0]));for(var i=1;i<t.length;i++)e-=Math.abs(N2(t[i]))}return e}function N2(t){var e,i,a,c,f,o,y,_=0,M=t.length;if(M>2){for(y=0;y<M;y++)y===M-2?(c=M-2,f=M-1,o=0):y===M-1?(c=M-1,f=0,o=1):(c=y,f=y+1,o=y+2),e=t[c],i=t[f],a=t[o],_+=(px(a[0])-px(e[0]))*Math.sin(px(i[1]));_=_*B2*B2/2}return _}function px(t){return t*Math.PI/180}function V2(t,e){return e===void 0&&(e={}),TM(t,function(i,a){var c=a.geometry.coordinates;return i+jN(c[0],c[1],e)},0)}function ab(t,e){e===void 0&&(e={});var i=G_(t);switch(!e.properties&&t.type==="Feature"&&(e.properties=t.properties),i.type){case"Polygon":return iV(i,e);case"MultiPolygon":return rV(i,e);default:throw new Error("invalid poly")}}function iV(t,e){e===void 0&&(e={});var i=G_(t),a=i.coordinates,c=e.properties?e.properties:t.type==="Feature"?t.properties:{};return OM(a,c)}function rV(t,e){e===void 0&&(e={});var i=G_(t),a=i.coordinates,c=e.properties?e.properties:t.type==="Feature"?t.properties:{},f=[];return a.forEach(function(o){f.push(OM(o,c))}),gp(f)}function OM(t,e){return t.length>1?fA(t,e):xs(t[0],e)}function oV(t,e){var i=!0;return lf(t,function(a){lf(e,function(c){if(i===!1)return!1;i=aV(a.geometry,c.geometry)})}),i}function aV(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!cV(t.coordinates,e.coordinates);case"LineString":return!U2(e,t);case"Polygon":return!Tv(t,e)}break;case"LineString":switch(e.type){case"Point":return!U2(t,e);case"LineString":return!sV(t,e);case"Polygon":return!j2(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Tv(e,t);case"LineString":return!j2(t,e);case"Polygon":return!lV(e,t)}}return!1}function U2(t,e){for(var i=0;i<t.coordinates.length-1;i++)if(uV(t.coordinates[i],t.coordinates[i+1],e.coordinates))return!0;return!1}function sV(t,e){var i=_A(t,e);return i.features.length>0}function j2(t,e){for(var i=0,a=e.coordinates;i<a.length;i++){var c=a[i];if(Tv(c,t))return!0}var f=_A(e,ab(t));return f.features.length>0}function lV(t,e){for(var i=0,a=t.coordinates[0];i<a.length;i++){var c=a[i];if(Tv(c,e))return!0}for(var f=0,o=e.coordinates[0];f<o.length;f++){var y=o[f];if(Tv(y,t))return!0}var _=_A(ab(t),ab(e));return _.features.length>0}function uV(t,e,i){var a=i[0]-t[0],c=i[1]-t[1],f=e[0]-t[0],o=e[1]-t[1],y=a*o-c*f;return y!==0?!1:Math.abs(f)>=Math.abs(o)?f>0?t[0]<=i[0]&&i[0]<=e[0]:e[0]<=i[0]&&i[0]<=t[0]:o>0?t[1]<=i[1]&&i[1]<=e[1]:e[1]<=i[1]&&i[1]<=t[1]}function cV(t,e){return t[0]===e[0]&&t[1]===e[1]}function hV(t,e){var i=!1;return lf(t,function(a){lf(e,function(c){if(i===!0)return!0;i=!oV(a.geometry,c.geometry)})}),i}function BM(t,e,{zoom:i=15}={}){if(!e||!t)return;const a={top:50,bottom:50,left:50,right:50};if(["Point"].includes(e.type)){t.easeTo({center:e.coordinates,zoom:i,duration:0,padding:a});return}a.left=a.left,a.right=a.right;let c;e.length==4?c=e:c=fV(e),c&&t.fitBounds(c,{padding:a,duration:0})}function fV(t){if(!t.type)return;let e;return["Feature","FeatureCollection"].includes(t.type)?e=Bm(t):e=Bm({type:"Feature",properties:{},geometry:t}),e}function pV(t,e={}){if(t.length!=0)return t.length==1?is(t[0],e):t.length==2?xs(t,e):$m([[...t,t[0]]],e)}const lv="base_map_control_";class dV{constructor(){this._baseMap=void 0,this.layers=[],this.sources={}}getBeforeId(){return this.layers[0].id}async setBaseMap(e){if(this._baseMap&&this._baseMap.id===e.id)return;this._baseMap=e;const{sources:i,layers:a}=await mV(e.type)(e);this.layers=a,this.sources=i}addToMap(e,i){for(const a in this.sources)if(Object.hasOwnProperty.call(this.sources,a)){const c=this.sources[a];e.getSource(a)||e.addSource(a,c)}this.layers.forEach(a=>{e.getLayer(a.id)||e.addLayer(a,i)})}removeFromMap(e){this.layers.forEach(i=>{e.getLayer(i.id)&&e.removeLayer(i.id)});for(const i in this.sources)e.getSource(i)&&e.removeSource(i)}}function mV(t){switch(t){case"vector":return vV;case"raster":return yV;case"no-basemap":return gV;default:throw new Error(`Not support ${t}`)}}async function gV(){return{layers:[],sources:{}}}async function vV(t){const e=await fetch(t.links[0]).then(o=>o.json()),i=[],a={};for(const o in e.sources){const y=lv+o;a[y]=e.sources[o]}for(const o of e.layers){const y=lv+o.id,_=lv+o.source;i.push(Object.assign(o,{id:y,source:_}))}const c=e.glyphs,f=e.sprite;return{layers:i,sources:a,glyphs:c,sprite:f}}async function yV(t){if(!t)throw new Error("Not found item");const e=`${lv}layer`,i=`${lv}source`,a={};return a[i]={type:"raster",tiles:t.links,scheme:t.scheme||"xyz",maxzoom:t.maxzoom||22,minzoom:t.minzoom||0,tileSize:t.tileSize||256},{layers:[{id:e,type:"raster",source:i}],sources:a}}const xA="basemap";function FM(t){const e=hf(t,xA,Wl({baseMaps:[],defaultBaseMap:"",current:void 0,layer:void 0,loading:!1}));function i(y){e.baseMaps=y}function a(y){e.defaultBaseMap=y,e.current||c(_V(t))}function c(y){e.current=y,bV(t,e.current)}const f=Ge(()=>e.baseMaps),o=Ge(()=>e.current);return{setBaseMaps:i,baseMaps:f,setDefaultBaseMap:a,setCurrent:c,currentBaseMap:o}}function _V(t){const e=pa(t,xA),i=e.baseMaps.findIndex(c=>c.default||c.title===e.defaultBaseMap),a=i<0?0:i;return e.baseMaps[a]}function xV(t){const e=t.getStyle().layers;return e.length>0?e[0].id:void 0}const bV=async(t,e)=>{if(!e)return;const i=pa(t,xA);if(i.loading)return;i.current=e,i.loading=!0;let a=i.layer;a||(i.layer=new dV,a=i.layer),await yu.actions.getMap(t,async c=>{await a.removeFromMap(c)}),await a.setBaseMap(e),await yu.actions.getMap(t,async c=>{a.addToMap(c,xV(c))}),i.loading=!1},AV={class:"base-map-card"},wV={class:"base-map-card__image"},CV={class:"base-map-card__content"},IV=Fi({__name:"BaseMapCard",props:{mapId:{type:String,required:!0},title:{type:String,default:""}},setup(t){const e=t,{mapId:i}=Eo(e),{trans:a}=ga(i.value),{baseMaps:c,setCurrent:f,currentBaseMap:o}=FM(i.value),y=_=>{f(_)};return(_,M)=>(mt(),Yt("div",AV,[_t("div",wV,[$(o)?(mt(),Oe($(Zx),{key:0,src:$(o).thumbnail},null,8,["src"])):on("",!0)]),_t("div",CV,[_t("div",null,yn(t.title||$(a)("map.basemap.title")),1),_t("div",null,[zt($(qm),{modelValue:$(o),items:$(c),returnObject:"",itemText:"title",itemValue:"id","onUpdate:modelValue":y},null,8,["modelValue","items"])])])]))}}),MV=jn(IV,[["__scopeId","data-v-bbeea87b"]]),EV=[{link:"",thumbnail:"/static/img/icon-stack.png",type:"no-basemap",title:"None",id:"null"},{id:1,title:"Streets",type:"vector",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9TfE2haV8QDcaOLS60zxBp9rHc2wJDfaGeEOYiOATgLk8fNzk4Iat+y1f3em+K9U014pESRFadHjwYnTcBnJGDk4xtJOe2Kzfhc15q1vrer2MNlNdwoqTWHkJ/pysvOG+8nKbgOjFeQTk1l+BvHN18LvihcXWppPMxaS3v4xIXdsnOQWPzEEAgk8jPPOa+5WGnPDYnK6UlJxUXyt3alo5WvrZ7rVpN77pfkMcfRhjMJm1SLgpSknJKycLtRvbS61T0TaWq2b92+J3jjTfBnh6T7dcxxyXMbiCFgS1xgDIAHPcc8AZGTXyw0nnOzEsxYkks24k+57mtPxl4ouPF3im81GWWVjNMzQ7mJ8lNxKquScAA9BTNS1K78X6kh8lGlWIqkcEeMKoLtgcn+83tzjA4r2chyf+zaV5auSvJt2tbZJW83d36Hi8UcQLN63uqyg7QSV3K+7bv5KyS6/Mb4Y8OXHi3W4bC12edMT8zkhUAGSTjPAFdV4r+BWoaFp32mzmGoLDEZJ0CbJFx1Krk7gPz9qufCq9sfDPhDVNUt2Da0lnM+6bmKFVYBVwOfmYoTnrlRkd+40DTI/Eej2Sz2l7NbWkiyxPfEidmAYZK8lhl+S2AcngACvk+JOLsdg8bzUPdo03ytOKvN2u7XadtUlZ66vZWfr5Hwxg8Tg7VveqzXMmm/dTdlsmr7t3Wmi3PMPDHgDW9e8PvaW9htt725SRrxpQqL5YddrDqy5fOVzgg/eIwvdeDPhlZWGo2PnWzQ3+n2MTSH5XXzWkk37uSDkAgZH3T2YA13fI9fancKDxgtySO56fyA/Kvgsz48x2OjOCSpxfZu+umt3reOlrJfjf7HLeEMJhXGUm5uPe3rppprre7fntZxG8YPIP61Sm8M6ZPNE0mnWLtCCsZNuh2ArtIHHTHGPpU3lZuBJuk3Ku0DzG2Y/3c4J98ZqTLZr4uGJnDWk2vQ+pnThP41f8TjdG+Amhabp0sE32y9M6pueSXbsZQfmQKBjOe+7oPfPK67+zje288f8AZ15Dcw7RvM/7uQNk5wACCMY6kd69H8T+O9M8GRw/2lc+Q0+fLVUZ2YDqcKDx2z0rBufjdZWcTXclneHSnlaG1uUXLXjLt3FVbbtUZYEk84GBncF/QMozrimUvrWH5pqf8y91tae7eyvpqo9m2rJtfGZnlfDqj9XrcsHDs/eSevvWvp5y72WrV/LPHHw91DwFLEt5GrJIDtuInLRSe3IBUjI4PXPFdZYfs6vqPh62uF1eEXU6CUqIxJAARkAOrc/7wyD29+Y8XfFDUvFN/duks1na3aoptRMXjGw5XsO4BPHJ9uK9Oi+Leh6H4XtJ/tN5fCRmU/ulWbd947lAVRyeMYHB5yDX3Od47iTD4PDKjFe2k3zcq5ul7O6aXW9nZ2urbL5HJ8HkFfFYh1X+6ily8z5etrqzTfTdXV7Pu+R0b4Da7p2rrcrLpTGxnSSIPIzLOVIYZAXIHGDnHQ/WivTfDXirT/GmlPNYP9ohy0ciuu109iPoR7Givz7M+K8fUrcmY0488dLOG3/ky9T7zLuHsJQpc2Xzlyy1up6P8GUNC1DStN0zUtTtxHZC7KXFykyiFYW2Koz8vQ4znkElsck15F8SPE0PivUFuPKhgvIWMEghAcSoANrmQN87dR04GOTir3xd8b2niq5tlsYEWBk815iiiSc8gKw6jYQ2MnvnpiuNr9H4O4Zlh3/aWJ5lUlok3dxilaz+S6q60WjTv+fcV5/CsvqGGs4R1bSsm3rdf1Z67poK0/Ct5LZ6luit/PxtZ2ETyGFQwJb5CDjs3PKkjvWZXd/AfwvqOpeImv7YywW0IMBnULjedpA+Yjpwx4bgYx81fXZ5iIUcDUqTSats21fstE3+B87kGFq4jMKdKje7fRXa7vVpeup0fh7w9o+gpa6fdQ6TdvNP+9jZkmAZs4BJm6YTI+Q8KBlmGTr2/ivwzaapFZTtYqJ2WWKK56RMxPIDqFQdRndnoAvNZPib4HhdPkudDvZ4XUN5pvhKkkxZlDH7o9BztIOe2ARZ0fwtqXh/WVstWv8Aw9dWJncM7ZMm9tzqJlYqGBAcqGLHjjjNfkGIwFDER+sVMQ6js/dfutPul7yt5XWnVW0/aMPUxmHq/V44VU03H3lZxt2bvF36Xs7PWzur9hb+JoNVubyK133LWJUv5ajDblDAK5IU/KwOc4+YYPWrMd5mMM0ckDt/yzfaSecfwsR75z3Ga5XS4dEi1e9kimttN1C4hRQovjHDNtLncmzaHXhgWB+8p+UHk6ug6dBpF3e6lJYeYxbcblD9paRcHDJ8ztjGM4A+UrwccfMYrBKDTSlFNLddbK9rbq97eVj6HDTlNNTkm05bdru1/O1r+Zp3Kz/Z90ccsrNwBB5ZZf8Aay7AEcfy46062sysSRruVIkCjnPTjBPfp196rz682voBpt9GjKfmJh3qQfUHHTrXD/G26m8OaZpd2s9zJcvcAThbh0imUDkCLcVXAAG4Lnk85PPPgsto4zEQwdF+9K+/e2n9dPvMsxxVLCUJYme0d/S6/rz2Mb49XWn392n2WFJr6BVN1cx5bylJxGjEcf3uozyvPauCv9dudS06xtJXzBp0bxwIOi7nLsfqSQPoo9KjuZbdLcQ20cqoGDM8rKWcgEZwANo5PGT9TjNQV/Q2RZRHBYOnhpXlyapy3V013dt2kk9Iu3c/nzOczeKxdSvCy591HZ637K+ybb3av2ClZy55JPGOT2pKK908Y6H4X+Lp/CPi2B4lMsV2wt5od2BJu4U9DyGIOcZ6juaKwIJ3tp0kjO2SNg6sOxByDRXwvE/B8MzxMcTCMea1m22r222/rp0PsuHeKJZfQdCbdr3Widu+5v8AhvwdceLjd/YZLYwW2B+/DF8sDjaEUt/CegwPfGaztc8L3nh6d1niJRCAZUBKAnOASQCp4PysAeOmK7n4F6tYLbT2s/2aO4ifzh5zf61euVycArj5uCcY5GK9HvrK18Q2XlTW1te2U65bLhxxgjGOvOMEHjivnMx42xuU5rPCVqd6St/ia095PZt6vt00aPoMJwnhM0y2GKoztUa/7dT/AJWt1bbe/XU+b69O+E3jm30zwp9lN1HDc2zEossssagFi24hSVcZbGCoJ5BOMVynxU0XTfDni+Wy0xZUSBF81WcsquQGwpPOMEZyeua5wjNfd4zCUs9y6Ek5QUrTW1/mtd0+58hl2YV8hzGbjaUo3i+2+tn6rsfSWneMYtW0z7bb3UNx8u0rADdRwNlsHCqJMnGMZAx9Caj8SS3HiDRDHbsyMZEmhdLcCa2kRt+/95Iv8SjGQODg7gTXknwVgN/rl3A1q9zGIBPmJlSWJ1YKpDFl4+c8ZxnBxxXomv262mhapcJPeSSW9tKYZryR2ihkALBgG/dtyAFOCVzx97FfjOcYOvlua/UqdS+sbOye9rX+f4bJn7HledrMMs+tVY6WakvTe3y8zivjV8RNX1C7l0a5e2jiUhpUt3ck85COSFDdFbhe4561l+CfiPJ4X8IajbeZvvIyraZ5yiSO23EiUoD904JI7EscgiuZ1OwurGZGvElSW6QXA80/O6sThjnnnBPPJBB6EVXr9no5Dg5ZfDBySlG6baWjkt3u9Hazu3ppc/HcTxHjXmE8a5SUmnGzeqi1tsrWvdWS11sdn4G+JM+mWd1FqMt7c2rMZBIsu145G/iLY3MOM4z3JwQMVzt9Nc6yZLu9e5lMwcwTXUpbOzllDHgnBA/HgZIqDStZm0Z5/KEbrcwtBLHICUkVh3AIPBwQQeCK0Ev77xe1tp9vbfaJkiCQpDAqyfKMliVC5JwMsRnAGSSMnKOVwweMqYqjTjGM7OUr2tZb2731lsuXu9m8ynjMJTw1SblON1FW3v3fpot3zdkYtFdVrng278O6dcxalo6RSWiRStdwF/lR/lGfm2N820HA7nvzXKjp/hXs4HHwxUXKmtF1umnpe6s30fWz7o8fG4CphZKFXd9LNNdNbpdV0uvMKM0UV3HCFFFFAHRfCaIv8QNPfZI625eVti5KAIQGI64BI6c+nNek/FTxdF4Q0CRLe6u/t+oBTAhZ0aLDcy84YD5SPfp0rifgbcxaX4h1HUZZVjTT9PkmIb+IZXr3xwOnPSuS1TUrnWL17q7eSWaclyzknOSentnNfA5hkcM1z32mI/h0Iw0/mbblb02v5WXVn3WBzuWWZJ7Oh/ErSk7/AMqSjG/r2+8ju7uW/u5Z55HlmmYvI7sWZmPU5NR0UV95CEYRUIKyR8POcpyc5u7Zs/D/AMRr4X8VW9xLJNFbyZgmaN2Uqj8bvlycKdrEY/hrofjB8QbPxXDb21olrNwsktygYnA+6gLorDGWJGO475A4WivExPD2Fr5jTzOr8cFZLp1s35q+n/APaw+f4mhl88up/DN3b69Lpettf+CWta1mfX9QNzcFTIUSPCLtVVRQigDtwoqrRQRivZp04U4KnTVktEuyR405ynJzm7t6sK9X+DHxB8O+C/A0jXxt7fUfPkQlId9xcJhSOQM7ecDJA+U15RRXDmmWU8fR9hVbSunp5dD08mzerluI+s0Ypys1rqtep9I+HPGGk+ONAvZo7qbULUIftMFxCu+BTn5WVF5yAcfezjg5r5zv3tzf3BtN/wBkMreRvB3eXuO3Oec4x15ptvcG3LYAIdGRgehBBH5jOR7in2EkEV2jXMTzwrkmNH2bzjgE+mcZxzjOMda8rKMgWWVa1SlJyjJK0fS/nZvzsj1c94klnEKMK8FGUb3l3vbpul5XZCw2sQeoOCPSin3N1Ley75XeR9qruYknCgKBk88AAfhTK+lhzOK5tz5afKpPl2CiiiqJOPtPiDrGly+bb3hicqUJEafMp6g8cioh4w1Ef8tx/wB+k/woorg295bs9KyfuvYP+Ex1H/n4H/fpP8Kmh8VX72sjGflen7tf8KKKpSl3Dkj2If8AhMNR/wCfgf8AfpP8KP8AhMNR/wCfgf8AfpP8KKKXPLuHJHsH/CYaj/z8D/v0n+FH/CYaj/z8D/v0n+FFFHPLuHJHsH/CYaj/AM/A/wC/Sf4Uf8JhqP8Az8D/AL9J/hRRRzy7hyR7B/wmGo/8/A/79J/hR/wmGo/8/A/79J/hRRRzy7hyR7B/wmGo/wDPwP8Av0n+FH/CYaj/AM/A/wC/Sf4UUUc8u4ckewf8JhqP/PwP+/Sf4UUUUc8u4ckex//Z",links:["https://tiles.eofactory.ai/styles/basic/style.json"]},{id:2,title:"ArcGIS Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABgESAAMAAAABAAEAAAMBAAUAAAABAAAAVgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAAAAAYagAACxj//bAEMAAgEBAgEBAgICAgICAgIDBQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwHCQ4PDQwOCwwMDP/bAEMBAgICAwMDBgMDBgwIBwgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIAEMAeAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APM/GWnaJ+074c1Hw/qNndab4gjCy6BNazG4kku5Yg7W0qyScrKFVWZFOJhGcgErJ7V/wbkfF/X/AIRftrT/AA/ulure28ZWNxZ6pY3MJRorixjmmjchiCsiASJt2klZGzjbkfH+meLxPf6jdraWKfaosXVgIAbe8TKkruOWT5lVgBxlRnPOdj9jD/goJdfsF/t+6T488QWGo69pNsbqHVLa3vGWa8SeCSPfvkJEmx3DYfOdnUHBH22HwtX6vicqhJS5Ixai3eSlpKVr62d9NWruyd7pfHvFQlXo4+StzOV2lZOOqje2l++z022b/cT/AILLftTeB/gp+zDqnhvxJ4gttP1rxRaytpunfZpbmbUvLHzIqxjK/M0fzM0a5YZcDIr+bH4nBHlur64huGkZsqZWBON2Bk45OOpGMntXdftI/tba5+0v+0h4u+IGsaldXaavqM81qkrvhIS58qNVLHYqR7QFBwvaqOvatefGxYY9UtLW1kECmFLK3S3CxofvOqj5iSTnufbFe9kmUvL4cz3krybdlG2yStru7ttbHnZtmTxVTsov3VbV33bd/JWSRzPwj8P6lca1Htt447aRS7SOdqBNpbPHPABJ9B9QD6lc6DDANtrcrcMsRdwQE3DjlBkk9e+DweOlY9vp9p4c8NWtvatfNOxML/KNgj3AhQe5IGTyMYH1OZdtfWN1/q4txAMe3O9Rg7hjGCAducHGM9wK+V4i4vxuCxrdH3aVN8rTivfaV5Wu07apKz11e294XLcPWo3qaykrpp7Lp3V+915HZafDeSaJNp8MSiO6uY5ZJd+CPLEgww6lcybuO4/iIAW9Y6N5dxG8lobea2Cwhi48uVleQv7FmDAZxkADoRkcLpmpalaTRzGO4WGNx82DnnIGPp0+oB7VutrU1ppsdqzOqTAMW2bQoxxz9P5V+b51xtjsxTg7U4t3tFu+1nd3100tZK3Te/0GW5dh8PrbmaVk3bvdWVtNde/meoS+KYZ7eO8kvj9nGAttHGdznjgnsMEnj6cZyMWXxpa6r4sW1utPtZreRzGmVw+37pBPOPQ4OSABk9/KrXxNPb3En79lWFtqbeBz9fw/L6Vq219qBuFvLi0nkDLiOVuAMHg/Xp1/rXx8cRKEuaDa9Ox7TzDnVrfqd0vhnTND0ljI015G0qxMHJUuyjBYbSP72fqQM9zip4T/ALTuY4rCV7hmTPlyLiRjnHy/w+nVh+PStDQfHEI0uZr+OTznby1VUHJP3iQf9liMj+tU9Q+L+j+CrdZbgTx2szfZoWiTM1xJ2xzhFAzkk9h64H6Fk+ecVO+Kw/PNT6yV4ya093msm1baPRNtWi7eHi8HlErUqijG3RaNddba29e+m5H4s8GXXg54kuogVcZ89JPMikzggDgbSARkHOazvEv7OGj+MYYLm+1Sy0+7mIH2mORWXGOhxnfjI5GeDVLw98f3+I5uobS6u7JDjNlLNvGxG3K4/wCBHJx34ORiuq1rxH4X8PaTeaxr2qTtBIVEMawFt2d/mblVkJcN5e1VIBzJyCoB+5z7MeJaGCwsaaXtZN83KuZbJpSunFO99nZ2urLReLl+Gyt4mq9eVJW5nbrurNNrbddbPXV8r4G+F1p8NvENjPBf6fezpKJI5ZFdYWVXBAYEA4bHOOg57jJXU6tdaVJo0l5oGqWfi/wveosMV49olveafIRlYpwy7o5PlcAcrKsZIwMhSvzzMuKMyq1eTMqceeGlnDVfiv68j6bCYPD0I3w8pWlro/8Ahzh7XxTeaxaR3kdg0UkkSl0mUrvzjJxkFsjHK8HPFct49j03W9EvI7rULO2urVRcsxfdLb/MBygyxB3Y9+PY1V/aS+It5ovhzSm0+4kWPXGadr1GwzhVUBAw5G1XHHB6HArwG2vRc6p5cbuGzgnOOvWv0Dg3h+phUsfjLqrLRRb1jG3Kk++m6aurLZpnz+YYiVePsqcvcWu27vv/AFo9dzsNO1S6v7ZlWT93GCykcZP8+a9I/Zv+KLp4jNldaZdX088kam6htHuDbxBgQJNvKoMAEgYxnPXNeTp4pt9FsbiytfLaaVfmZhu3H09up6V9z/8ABEj9hb4j/GL4gXnjjQ4ZNH8JxxSaPda1NawzLLO7RFo4vNON6rIh4VwdwVhhiR9RxHmFLC5bVr1bcqjtJtJvorpN3fSyZz5bgJYrEwoxTvJ6WWvm9Wl+IkNnoenXjWAjhuFWUGUuT5cEj7gu5ckhDtwCc4C8+77y68OaZq1vb6vqVha31+uEgnYbgHZkU/T5ScnnpxzX2T8av+CCNjqfg9F+DvxAuo/iG8so1OXxBPK0dwZJIo2KtBH+7J8t8+ZEykt1jK710PhF/wAEwfGH7OHxn0vRvjF4i+EfiT4eeIL6aCxurSzkXVdTuUinlEBea3KwFSsk5jEpI8kKjMd238HxlXAYug8ZLGSrNKTcZXjO6s20mpKz3tpddVZ2+2o5XiqNdYV0VBNqzWsfK+sXv1/B3R5v8Fv2ENL+POnzT6PqUOqW/hu+W0vn8wCO3meFZFA5+YbJFII4LMMZYEDN+Lv7KEfhDSrnT2uNJFxkC23OJJEOQu9gv8Az1JAGRzX114S8D+Bf2Rvjf4msf7at9C1TxFHp0f2W9uI4bS5t0juHiubcSKpYZadHMbYEsW0qpUVx3i34kaX8DPi63iXU9C0nVfD2vBrmy1Oytft0tsN21pzE0jySRlgdjooKhcKhUkj5XEUeXlnGMuVxi1fS7cU3bur3s+qsfUU6FF03GfLe7Tt0SbSv20te+zPkjU/+CZ11f6FZR6FrVnrV/M6x3kxnj+zx7MYaJh8rKeQDzjAyK4H46/sg658DdLhj1S6aa8tYi14qyAQxxAfJ5ZY5O7oCechielfSH7QH/BUe/ufGNrY+DFgk+wSl5zNay24vICCGV1Khdqgghhg5UY74+VPif8Rv+Em8PXWtazeL/aUky3M7yuSrqSxaMHgKB97GDjBxg5qsoy+vmGMjhKd05OyvprbT0Xm9tfM8fOp4HDYeTiru3R6afm/66o8c8T+JF0q21ItKZV0vyvNKTKFgzyMsWAVccZPoRivD/id8ZLrxrrlv5KPHY2cJiijzyzHBZyCO5AABHQAnByA74r+NLPVvDpsdFsWt7O3vd00rndLOQjCNiMAKOXOOuRnPauDbUI4ooF2tnP71jlTntj/P4V/TeT5ZHBYKnhG3JU3eLlve1rrV2WrSSeidnrc/OeXnqOs1rLRr/Pvt950dp8Urqwnhkt7bT4LiH/VzCN3dDkkHDOVyM91I4FO1Tx1qXim/jm1LULrUJEGFM0hbYD2UfdUeygCsR7RdT2mzhJkP3ju3bvwxxUFv5kcjBty+hHGa9nmd9Q9lDoj2X4M+Mn0zWPsskK3FrfYgaEyGPeW4GGwcEHB5BGQCQcYJXmvh/UbrSNQguI53WS3kWVOejKQR+oor43iThOOZ144iCipWs221e22x0YHHSw0XTu7Xvsn+Z7LaeB5PiRY32n2uswtpkce5P7WkeZvNIyRwQsONp+ZTkcYzXA+Mvg1deDdQW8s4o7vT9iuWhbfszwWAb5ymejEY+YDPSvQ/g9ZzfFPwillpMMb61pLzSXNiHVZL2E7pDcRRcNIUUbXVQxVURujceifD74eXD62WuJo5LNomgdWVTvU7PkYMTlCSflA2nbnPINfM5pxticpzSph60E6UWla1pNWXvJqyber106aNHVhsrnWoxdPeXXp6fLY+Sbewktr7zvs6XEJbJBO0/Q+lfq1/wSx/4LSaX+y1+zNoPw51PRdLvIfDstw++fLSK8t3LN8q4UfL5pCnLHI69APzv/av0HQ/APjuLTfDUNxatDbRtqIYkw+ew3YiznK7SOehJ4wBXBTWcY0GKRkVm5O7HP8Ak19fmmVYbiXKYQk5QjLlnHRXWjtdarVN9eqZng8dXyzFOcbOSvF9V0v+KR/QHZf8F5/hbqHhS8ml0DUNUGofK2y7WFvlUqzo6cuTgKctyoAB4IOH8af+Cjfhv9s/4WaZoPh3T9Stbgyw3Saj5AafRLuGVZIZ1wSMiRFyD8sgYrwDivxz/Y98Gah8W/7csIdLutRt9LtxdM1suWtyzBB0GeRkg9th7Zz754WbWP2b/Cur3Olx3mj6gIJxbXk1w0Zhl8sqXKhgkn3FChlJXdkcFg34JnnDiyrOI4PDzvJOLi3/AHrW5rdn0s7q2mtj77L88r4qjKriaa5LO9r9F09fz69T17/gtJ/wVB+JXjHRYvgReN4Es9HuLK0v9at9Dea+uWIk8yOGaeeGIQyMY45mihjPyyRqZnUstfLPwl/aruPDX7N2vaLeTK2rWjINDkumJEI8xfNjAPXbGWZVOBnjByAfE/EHhC903xLJH4gW7GparbnUzNcMWuAG3sGcMckvtJ+b5uVPfB5vxBfNHPDCrN+7UvISflLnjj8Av41/QGX8L5fTyungOWMoJqTaWjlFq71b3tyu7b5dLn5/is1xFXGyxEW02mtekWnpsl1vstdbH1F8EfiXH4y0+b/hIGurtvOJa88394jOqqMjHzhVRTtJ5DY6DB8v+Nq3/imy1htcvZVjRpH0a2mfAYxZc4HA3Op4xnkkDPNee+C/itffC3xLJPGI5o/9Tc2zMQtwF46j05wea9Y8L6jfftHaqLHw/ot9Z3yIs/ntF9pU/wB7a3y/3QDx0B5GOaWW0sJi6uJw9OMVOzlK9kklq0rWWustVFxXVnDKpWkoRk3JLbTXW2nd+Wjep4VpOlT/ANjTL+4fcq/LM/CHrnp16/5zUUWi3CFRcKo3HcgIyrfj6H619OfFH9mt/h9oMk1/pEs11GiLM0Fmvku0hI3Yyo3A5G3k8jkDmvGdXdb6C2tVt0S6t4mUAhkGB0BUndnAJxzjHU162X42ljIOdLVLS6cWnondOLfRrez7rYmrKpTlyzVn2aaa6dbdjg21F5pifLjjJ+QsBxwO3p9cfj1qa8W5ljjjmZXVcsjY5Offv06Hpz6mrmteD7vS7Vby4YeTMc/ux359cdcHH0ptlbyzXnl2p86PIKZ+Uc4OOenJx712KL6lc8WrxG6dZNDMrfMFXruNFaUljIs+1gY2wCVaitDllLmd2e1f8E9rufRf2yvBusWsLTT6KLu8i2gkQsLSZI3O3nasjoxxgnHUdR7T+0JJb/s+eA4dSbVoUv8AUYVEFnJahZ5WOAG642D5sn249R55/wAE020yx+OV14g1C+stOtfDOlT3zLM5DXnymMxJg7tw3l/lDHEZwO483/aybxR488bWuqXUn262kjJVGuFVkYn5iAxHy8YGCcba/P8AMuG1m+fe2xH8KhGF1a/M25SS16fzb3WnW696jmCw+XQpRdpzlN3vaySir+r2Xzfk+A8aatN8QNRuNQub1pry4l3OpTAxwBz9PQDGKrT6VjS44SzLxkkk7R71TttPvLO7kWaAx+WdjMrB1B+oyD+BrfhRtZslVNzMowUxwwr9ApwSXLFW6WXkeDUk01qep/8ABO74/aZ8Av2kNNm1eSSPw3q1s2j6iyNsJSVgRKf9yQI3uqYyCcjuv+CgH7Vuh/Eu6utN8O3cWoRxyRs12oIVMEKsUeRk4Vck8jIHPUV8tX+gSRFtsa7mOHUDp6Cl0abGrwrextN5IVYYUAHTpn3+tfP4nhvCV81pZtUv7SmuVL7L3s2u6u7a/ketTzatDAzwMLcknd9+l0n2dlf/AIJsfFzxTqHi7xzeapNNCJJlghHkLsjIijWNQo9BsB9jz6Vmi2OrWxkk+aSMDcW7joKm8TPa6lKqKs1u6ttfzjyn+fpXQan4X/4RTS4LmC6i1CyukA8+NflDAcoeeoz3r6Clh4U4qnTVopWSXRdDyKlZytKXxM47X9Ms4GmuFmlkmEhKq0Xy4J5IOTnr3r7I/Yw/a68D/B34IabDrF9puh6pbyTW900DC4uLqIsHVioyxHO3bkAAAdBx8pzLDqke75VYdgMVj6loy5P3Sx4BI59BXi8Q8P4fN8L9TxDag2m+V2bt066a9j1cmzqtl+IWIo25kmtVda/1/SP1cvP2o/hv8WP2a7yLS7iHV5JpGS9a4ijYQhgdqLvJAOF56/eOOhA/OBNQh8YRap9hcSxpfTCDcP3i27FvLYk4/wBk7j3681zPhCe48D3k0kM3l2+oW0lrcDBdSGUgEgHsSMHqPfkHU+ANmT8SreSVJGhhjkZ4Vk8vz8IQEJ54yRk4zj0JBry+FuEaWRVK31eUpQna0dLq1/NJvs9P1OniDiCpmyjUrqMZR6pWv+bXyv8Aocz8Qxc6abbR5451nt5JJpd3UsflX2JChun96sSzvPKKrICVHGBwcV3fxm8VWt7rs0ccNnc3mSklyssjNEy/KUAJA4AHIyO3UGuHW1a5j29G+lfWWl1362PIpSvBXNbT75ZFX/nmORu6iiqemaTLFchW4ORxRVxu1oYVIxuavw18Vah4X1SGexuWgkf90xwGDKeoIIIPqPQgEYIBqW78Q3+tXcIvL26uMjJ8yUt70UUoRSSkt3v8tvzZdT4ix4hnk1PT2FxJJN9gtneDcxPlnBf8RuycHjk+pqjoFxJFGWWR1YBuQ31ooq+pEfg+f6GRqusXU+qqGmkbbgDmqsl7Lb6o0sblZN33h2oorF7nXyrT0HxXk1y7+ZI8m05G45wT1/kK9C1a1S28G3Ece5Y/Jjn27jtDlsEgfTt0ooraicuI+KPr/kcmkjQxJtO3K/4U2Ri0KsSS2ev40UVHQnqvU0tDcyRyK3zKyHIPOcVQ13Vrrw9cCSxuJrWSZWhZomKsUODjPb8KKKqTfKOlrUszGiG4LnknGTXVeG7SO4gi3orfX6GiilS3NMRsFzMz2MchP7yMEKw4xzRRRRJsyif/2Q==",links:["https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],maxzoom:19},{id:3,title:"Dark",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8VdE1S88J+XfebFd6ZdTPFIQCPLCuVD57Drj2/S58X4YbvS7G7WRG5IjZWyHDYPHHPTOc/nmpfGYg0qbTdPuJbiOCRi0d15hH2YqePl+63DY9QDxgcVoa94fh8Y+DII7IxIAqS2zFdqjjoQBxwT26/SgDz3w14euvEOoBbaJ3WNh5jggCLOcEk/Q+/FexRx+VGqgABQAABgD6CqXh/RY9E0SC1VEGyMCTAHztj5ifXJpbW0t/Ddk37wrG0m5nkbqzEAc9PQflQA/WtYh0HTZLqfPlxjoOrHsBWBoPxUtNTvBDcIbUyPsibO5TnoCex/T3qt4+guNa8QWVjMGXTmnjXCcPIWBycnjgBvpzXLanqD6de3XlS26TTB0cWynygu4cDPT7vGPbk5NAHca34w0zS9WW4kui0ttCyC2EZJbftbcP7rYXHzYz7A5PKeI/GNze29ztm32l3cvsAyp2BU249McZ9x3BrmSP1ozuP8vagAB5zznOc1Yj1e7hR1W6uVEhDMBK3zEHIzz6/wA6hEpERT5ME5zsG7/vrGaZmgDpNQ+KOqXt7HMn2e38ottVEzuDY4bOfTtit3TPjJBJE32y2kjk3fL5XzJjHcnnPXoDXHaH4ZvvEbOLOAyiLG9iwULnpySOa1IPhtdXUwtkuLf7csYlnhZuLcHOASM5JGDwO/PbIB3Xhbxja+KlkMLlXTGYHXEij16kMPpWDdfGEWmrTRHT5DBGxQFn2ScHklSOPp1ra0DwNZ6FZQK0cdxcQFiJ/LCudwwR+XH/ANfmuJb4fanqWuXEPkwWxUAjDkxhegwSSfTrzyOMGgDodS+Kul3umtF5d9/pMbJJtUBogQQec4z/APW96K4nXPD934YvFS5TY2AUZTkN9DRQBPqEF9e3NrYylrjyA0UBjO8yDcx9evtxgAZ6V6F4H0SbQbMxb5ZbaRRIhk+UxsScqExwOh69c8CqPw58FtoD3E93tN3nylXGfKUc5Dd85HT0+tdXQAVR8QxLJp7brj7O2CsZMioCxBx14z1x+dXq5b4naxaQadHayhJZmcSiNhkBRkZIx35A6evagDAu9e1TVX+1wy3EcSQ4+UyBXAwMhgic85PPfsKz7jwte3WlvcLat5cG7cYoxhcY9yx4x29eeCa1dH+IA85IdTt4ZIuNgtzHsiChsDr7n+LP1zgxXN5Yazab7O11KG4MaqEG3YBwvyYBIJ4BwADmgDnW0t4IbaWQxxpdI0iMzcYBIyQAe4IA68VCyYON6yIOrqCAv5gH8K3BJqNtZRoiztDBI4Bjtl3xscBlc87TwOMdD1rP1HF/Oq+dvuHONrkqQc9DkADuMetAFSGNHbl1AHOX3YPt8oJpk7DezEglmJPGPyHapXsWsSDcRSBc4wG2k/Q4P8q6H4VWceoardRvGGTydwk2g+U2cDnGeQTwDzjpQBqfCmK7slPnTGO1mYiCF+PNYDLMo68cfk3pXX2ekQWN7dXCJia8dXlb12qFA+nB/Emi0tZxcmaeUMdmxY0XCRjIJ56seBzx04Ayas0AJtz3NCRiMYUADOeB1NLRQBj+ONAi17QJg52PApljkxymOT+YGP8A9VFa00K3ELxuNyOpVh6g8GigDD1XxFF4fFt9sjmS4myWEB+TCnkksQD1HXmtLR9ettcg3wP/AMBYYYf4j3HFcl8VNOuku47iITyRSpsyg/1TDPBwM/NnjnGc8Vx1rcz6NP5sUsttdITtwmDz15PTqe386APaRmuL8d+G57nXftIi328u1XKRLI4+XHTGew53VtfD/U7/AFnw8tzfvG5ldvKZVCsVBx8wHHUHoOlbdAHkOoeH5tNZle3mOxjn91IjkY7nBT34zSaW0Wn7Lh/LdXDI0bTH51IKkMqoSOP1wR2rt/iiIodOtLh/IMkc21VmQsrqQSRwCR90elcpZGS41awH2WKGCWdA6Wq7WlUsARkfMOOo46e3AB0/w20G2WxS8ie9KqzLGJCUjY9C4TcfcZPoeBVjxP4LXWPElpcYdbWUFb1Ym2mXA+TOOvofYVu2F5b3Ubi2ZGjt28k+WPlUgDgduM44+naplJPWgDmPE3hCzlvInt0t4bhlCLGdoVgOgC4xk+uO2Mgmte2hi0sxQW8cCGIr50UEY438AnAyBnJz6DmrGp6Wmpxx5LRyQuJYpF6ow/oehHcGs1dGs/DKz3cjRwJLIXmcudrluBwd3TJwAe57GgDborntK8SRapdxmy1DzFuGdEhnHO5fmOMcgYyRn0+mN9cqOeff1oAdRjmgNn+VGaACigjIooAxfiJN5fg+7UFN0u1FDMFB+YEjJ46A1xng3we/iS7h89bc2cB/feWRk4HCZXucgnnpXT/FK3kv9GtLWNCzXN2iAg4weQP510GnWMGmWiwW6okcQ24Ue3f3oAdaWkdhapDCixxRKFRV6KKkoooAyfHGinXfDc8SKGmjxNEpXO5l5x+IyPxrN8B+FpdOvXvJ0lg+Ty4onCK3JyxITjHTGeevtXUUUAQadp0el2ghj3lQWbLtuYkkk5P41PRQDmgArhfiF4W1XxB4nC26yzWpiVhufbFE3IPU4zxnjn5hXdUUAeO6/pF34X1GNZYEtZgd0UkLsRIRjlSSemR7167ZCU2UH2jH2gRr5uOm/HzY/HNLcWwuQucgo6uCOoIIP64wfakvklltWWCRYpGwA7Lu2DPJA9cZx2zjNAEisHUEcg8ilqO0tI7GARxKFQEnA7knJP1JJP41JQAUUUUAQ3Fsl9H5cqh1znB7Ed6fuNFFAADg1YgiD2krH7y9DnpRRQBX3GjcaKKADcaNxoooANxo3GiigA3GjcaKKADcaNxoooANxooooA//2Q==",links:["https://cartodb-basemaps-1.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-2.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-3.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"]},{id:4,title:"Open Street Map",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4RFkRXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM4OjM3AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAABJEAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A9oEG5Rng96yr20aFy4GUJ6+/NW5riaCGIn7zZz1qZWW6tiCAW29PfFXFuOphNRmuXqYanDA+9blhKr26qDkjP8zWNNG0cjKykc8cVpaYSUHAAHU+vWrqq8bmOHbU7GlSHoaWoJ7mKAYducZwCM1zJXO5tJXZmakT5gGcr1/HmqNTXM/nSkjO3tmoa7YKyPMqO8mwoopQMkD1qiBAMnFKVK9R1rVtLFAiu4yTzz0qeazilUgqF9CoArJ1Vex0LDycbmFU1qFNym445GPc5qSeykhkC9QehoitJX5jzuBzuGcf/rqnJNGahJS2I7osbl89mIH0zViCz8yzaQ9TjH51NHprup85vmPIIPOffIqwImt7NoyR8vQ/jWbmrWRtGk7uUkMtLUQHJ53de2MVeAxSAZAyMH2oBrGTb1OqMVFWQpGab5Sc8cnrzT6Km5ViD7HD5vmbfm+prOurN3uAsSfw56+9a3z5H3cfrS7RnOBnpmrjNoznSjJWMyHT3NuyyHac9MZ7fWq1xYyQkY+YHv0rdprIrfeUH6imqruRLDxasc0ylGwwwaStybTopnLcr/u4H9KjXS48EMT+H/6q2VWNjneHnfQyTGyqGI4PSm1dvLOSHlSzR9u+KrRR+bIELBc92OKtSTVzKUGpWGrG7KWAyBTa6NLaFE2iNcfQVG9jA4+4F+gArL2yOh4V20ZgVPZsiXKNIcKM5/Krx0pTISGOz68/yqU6ZDgAFgfXI/wqnUi1YmNCadypdESlD5mV54DVYsmi8sorMG65YjP/AOqs6ElpVUjPXitKW2CW4lhG2Tbk988e9TJJLlKpttuSKV9IXm2nadvGR+NWdKl+9GcdsfrVCdJFYGTqw3fnRbztbyhwM47VbjeFkZqfLU5mbF9dG2QbMFj6/hWNNM8773PNTXt0LllIGMZqrRThyrzCtU5paPQuWy27RkyFQR2OOaguDGZj5f3aioqlGzuQ53VrBVqzt2klDMCEU5JI4qsQV61uw+Uke0DALe9TUlZaF0YKUtegs0hRFjg2lzxj0HrxSRLN0nZCT/cJ/rUDusV+u05ymAPxqyvmNLkrtA985rnasjsUrtoZDC7j982QOnP+NWlRUGFUKPQDFIgwNpOcd6dUt3LjFJBTWQN97kelOopFBRRRQAUUUYoADRmiigAoqOWeOEDzG259iahN/BtJV9xHbBH9Kai3sS5xW7LVB4FZ0V6/liWXhe3v2qObVC0eI12t65z/AEqvZyuZutBK7Hz34ScxumU9x3z9elVI5I/tJZosqSSAi81Wd2kbc5yaktpFjnV35A7fhXQoJI5HVcpam/Ecxg4Yf73Wn1ELiMxlwcgVVOpxqwHUev8AkVzcreyO1zjFasvDv9aRhkccVFBcxzDKHv6VPUtNFpprQx5dOEc8ah8q+e3TA+takQKRIvUKAM02OSO4Cvj5hnAbqKexwPlxmrlJvRmcIRjdxK19bG4iyOGXke/WsWRGjcowwRWpNeSiXy3CqmcFgCP1qhdhDLuR92ffNbU7rRnNX5XqtyCiiitjmCpraEzyhAce+KhpyOyHKMVPqDik9tBxaTuy5dxs8a3H8Jzx6dqktLWVE3GP5g2RyKktR58AD4ZB/CvPfvVsJtGNzfga55TaXKdsKak+crpayCZppPmyOnTHOasxtjjGB9aUNgAbgR7mgtGuOR+NZttm8YqKJaTvTUcOMqcikMihgrOAx6DNTYd0PoyfSkJwcjJPTFAb1BA96Big57UtNJA5HX0FHzHrx9KAFPrngUituJ9B0NMkLKOOfWiJiV+7j8KBEmQKDnB45pBz1pc460DMW/in80ySD5eg6dOaprjcM9K0tRnViUBzgY/HmsyuuF3E82qkp6GlqcykiFf4ev6Gs2nO7SMWYkk9zTaqMeVWJqT55XClA9TikopkEvnFQAg2jv3zUVFFFgbbJbeUwyhh+Nb0MwlQYPOBmucq7YXLRyFDk7un4ZrOpC6ub0KnK+V7GotvtIwQPUjrVS+vBEPKjJL92/Ordzcrbx7jyT0HrWFNJ5szPjGSTWdOPM7s2rzUFaO4kkryY3MTj3plFFdBxN33CiiimAVNaRrLcojdDn+VQ1PaJI9wojba3POM44qZbMqHxI0HkjsUIRWBb+8PT/8AXVdb2VhuboTtIXP5j3q+9vHK+J2346DGMflUdxYoE/cR4cHI5/xrCMo9dztnCf2dhkVwvIcghRkev0+tK8bXgSSNiijPGcH/ADxVJba5MjDb8wyTyKkR72H5QMD0yKfKt0yFUbVpJ2LlrFNAWDOCnuTmop2aO7jkwCDhcN9etWkLlAGXce5zilMSTAGWP5lOR81Z82t2buHu2QFpCAV2c+uaUO2MPtP0p+0AAAcY6ZpNoJI24A9+tQaDlUjk4pe+MfjQOOCaWgBuc8ZU0uKQIqkkDk9adQBC9zHG+wnBqne3zxMERQMr3H1pmqKUdHXoc5/SoJZorhxK64wNu3J5/GtoQWjOWpVesdiM58lpHGWZu/v3qvU00wkAVV2qoxjOahrdHJJ6hRRRVEhRRRQAUUUUAFTWpC3KFiAOev0qGgHFJq6GnZ3J49zRNHjOcY56VCylDgipZovIcYYMOxBzSq8vlkLHlT3waSfVFNdGQUUpBHUEUlMgKKKKYDkXc6r6nFbFpAsceM/P3PrWRDxPGf8AaH866CFwYxgjHrWFZvY68LFasBEhOQME9af0ORTW5/Ghs5yB09a5zsHZ65NJkYxmj5ivOMGlX5QB29aAIIJHKFCu51+9zjrRLE5IkT5HHB78U10ZLkTDG0/ez9MCmT3wRM7GJ7HHFXZt6GTaStIZPfPbkK8e/vnOKmtbxbkfd2kdRnNY00pmkLkAfSltpBFOrnoM/wAq2dJcvmcyxD5/I6IjNQ+ahkCBsk9sVBqF0YY1VQCW/pisdCBIrHoCDxWcKd1c2qV1GXKdIDt4NMe4ijBLtjHsarRzpJEIxncRxVC9QxsFJB9MUowu7MupU5Y8yHX1ytwRtb5R0GPpVKplQNb7gfm9PxqGumKSVkcE22+ZhRRRVEBRRRQAUUUUAFFLngj1pKQBRRRTAnhZ5GEe0P8AUZNa8aokaKYuSAD8vFZ2m7ftIz17fka2COQPxrmqvWx3YaN43ZBNaRTJjYF91AFZt1YtAu4cr3rbx6UySJZU2uMj0qY1Gi6lKMltqc3RWvLpSHJjbb6DGf61mTRGGQoeorojNS2OKdKUNyPpV21vjCNsmWX25NUqKbimrMmM3F3RpvqinBRT+I/+vVi2uUuGKqZeBn5qxKt2E3lTgYzu+Xr6kVnKmraG9OvJy1ZtdRjn0ppQKDudsH3p69KjuCPlBbaD1OM1zo7RrFcElwfUE8VlXdx5gCKEC9crVi/mEahYv4up/Ksyt6UOpyYirryIKKKK3OQlknaVMPyR0NRDrRRSSsNtvcuCNhb+YrEFe6n26VFHFNdvnk+5zin29wBE0Mg+VgcfXpU9vM9tu2xb04wd2MVm7q5suWVr7EDf6NcMoUlRjqPaqxBHUVZll8wFiPnPvUaum4+YmQRjOelUr2IkleyZDRWg1nFJCHjbBx0weTVN4jHkMcN6U1JMUqco6sjooIxRVEBRRRQAUUUUAFFFFACg4ORWzZ3MckSRj74xkVi1c00Zuvov9RWdSKaubUJuMrLqbSscnK4H1pST2GajYPuB+XApTJtQs+MDuK5D0SO9lMNqzKcNxj8xWC7F3LHqTk1avL77SAoXCj1HNU66qceVannV6nPLTYKKKK1MQqa1XdcxgnHzD+dQ06NtkqN6EGk9hx3R0WCCPn+X0xSMwHGetMhldgpYx7SgIx1qR3VVLk/L3riPVvpczb90mEcanLjP9Kr3Np9miBY5Yt+lMSRPtIY52/8A1qkv7hZ5VKfdC/410xTVkjgnKMk5PcqUUUVqYBRRRQAUUVJBGJZlRjgHP8qT0BK7sPtoJLiQKnAHf0rRj0uNVbed57dv61djjEa4BP404sB1IFc0qrb0O+FCKWurMj7A4SUkbduWXnOfTvVFy33W7V0oIIyDkVmapbf8twf979BVU6l3ZmdWjaN4mZnjFJSg4OaStzkAjFFFFMAooooAKKKKACtDSkPnM+OMYz+VZ9aul5ELYG47jxnHYVnUfum1BXmjRchVLHoBzWVfXm5PKi4Hf9Kfe3zqTEq7cjB5zWYSWOT1rOnT6s1r1vsxEoooroOQKKKKACiiigDSs7yOODEuSwOBjHTFR3d8sq7IgwU9c1RorP2avc1daXLyhRRRWhkFFFFABRRRQAUqsVYEHBpKKQG1LqcKcKGY+2CP51XGqFnAeNdh68c/zrNorNUoo2eIm2dJDIksYaPGPbtVPVJgsPld2/piqNrdSxERo+1WPoDTbyR3nId92O+MdqiNO0jWdfmplelAJ6UlTRqUUylNyg4xnHvW7djmjFydiGinOQzFgMAnOPSm0EvRhRRRTAKKKKACtix2x2bMT2JP5CserdvOogeJ+NwPP4YrOoro1oyUZFeVt8zsOhYkUynZ2MwXBByKbVozYUUUUxBRRRQAUUUUAFFFFABRRRQAUdqKKACiiigAooooAKKKKACiiigAqae4knI3npUNFKw7tKwUUUUxBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH//ZAP/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo3NjE0NWViZS03M2ZjLTQ0ZjUtYWU5Ny1hMGY3ZTlhOTA2ZjciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzYyNDYxMzAtZTBmNy00YTAyLThkMDUtMTAxODVjMjYxMzY4IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjNlMTAxNmEtMjc5My00Njk1LThjMGItMzdiOGY0Y2I3MGM4IiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTEyMDg1MTU4NSIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJmMWZjYzliLTdmMDQtNDIzNC1iYjIxLWI5MDc0OTVlYjQyYiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzg6NDArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAQCAwUBBgf/xAAZAQADAQEBAAAAAAAAAAAAAAAAAwQCAQX/2gAMAwEAAhADEAAAAfvrI6dr1ZrfJen4VmduppjrOpPboz116ymydJ0yLpnk0x7yXNLsSttIGiizRnscW4DocCrS1mKxq/P2ZPQYW6vWMKzzEXTMYduReqxht2e953gSDFr87Kphr1gBxVDK3ZNMIGlPa4qi3LL1uYwyRxF03nrvJq1gACR1xNK7E06X6CH19BFcO8yKvP51cuNSdKqycADocDdi9XTRX5u/xk2o1pr9WX0PL+l4UO5uyy7DZc6k6bhwAB1VG3H6nmvQ8WHctqoeTVl0wVawBux+lpT2eT9Pw49zwANJFibZqdYAAAA6HAAtzuPecCPcgWc1DuQOAAAAAAAAAAAB/8QAIhAAAgICAgIDAQEAAAAAAAAAAgMBBAAREBIFEyAwMSIz/9oACAEBAAEFAmgL88fMwbmisZ/VrlhNpEELQwwVXEZyQGcGksRPx87dXJOR4/YBRYJV9nimyiw1ksYRS0qvVagCCj4McCsm4MY20TCiysFrYLRDoMWThhYkupikAj2CJdtzk71GX+s4TJIeKrZUy5Yg+aQz3OrOgA+0CPeI1n7ltkqEpjXMTqRSTcYolTlIo9UFvDjsNt+8RalaUWp0RS35UZGQMBYNlYqZlAv7bvRb3gH0yWeyCXAj8KkbsPd6AMpMsrH0bddEwxnsLimSwVEi8C1Bc0v9GMlpfQDJDB1uZ3PAnIff/8QAJxEAAgIBAwMEAgMAAAAAAAAAAQIAEQMEEBIgITETIjJBMFEzQoH/2gAIAQMBAT8BdVy+37mlJBKzI6oO+yIXNCPpmUWImJ2WqiYgK/exVT9QaZAKjaU/1MyYmx+YNLa3cXTODcxW1uImQ4shLR3LtcZjkMwcVQv9wDkBfS2RU+U9dR3+o+ZnM9ZFW7iurixFCiyJmYMb2xNxMGJB2hdQeMBB6NVX+wuSAP1vhfg01GXl2XfSq3KxGwEd0MVWv31BXI753KAEQkVQ6Aa7wYy/xjoyedtMw4VPMYWJqch+FTFnKoRMOft74Tzuz1aQjjUZQ4ozMio1LtpD3Ij2ASI1+W2R+ML8xxqFAB7hR6dP/IJlyemsZixs7YH4PNTlFcVjtzN76coqcjLXIIexNdGl7MTHcubP4Vcr4i1feMeRvdWK+Pz/AP/EACQRAAICAQQCAgMBAAAAAAAAAAECABEDEBIhMSBBEzAiMlJh/9oACAECAQE/AVJTn1M/VxFLHjRjtFxcwPcZ1BuM5OlmHMxgzj3FcP1Pno9Q5lIj0KWMu9OIq7RUACzJZbb6hNeKqW6nxHqLjCz42JjKVPMNngzGCo0cWIXY8zaSLleGG4Fo3rkXcJiSuTrmIqoMg6aEivxnNa4l3cQeJcL3AwbrTMDuvQcTEnuPjtrj4v5gG3ryzA3cBK8iY2LCzpnHFxe6gr1oRc27eYGs8Hxy/oYibzAKFDTIu5ZiQ9mKNuuUMWoTlDB14ZuqiqFFD6SAYf8AIBWpF/f/AP/EACkQAAEDAgUDBAMBAAAAAAAAAAEAAhEhMRASIkFRIGGRMDJSgQNicaH/2gAIAQEABj8CLYyvAlOatRwyhSNSyhtzdNpqAw9qIqZWkyO6E+UDnqp00T3gCfjyiX/aLvCt4Tng64QoYvU9Oowpg5djyjs07IHNK0mUXCkqYh2FpUf4omp2R7dH7Jrdm4jgoNZ7b/3EuFoU/jNd8yh4Ye6d8uMWuB3soHnolHJDgOVDhGEbjDuskBOG4sjmP2nS4njqIioKg1CytODhtdEjhS7fA7goNiYtARzMLXDjpajWuyLjc4CsTRZWx9KccxgO5RsWoxboceApJ9EwTVVt0U9f/8QAIRABAAICAQUAAwAAAAAAAAAAAQARITFBECBRYXEwkbH/2gAIAQEAAT8hDtDD3jURRXn1GdBejzFaYD2strgZOYpoFmfiXhU9/czZHCw8DWo4PqYMV8kJg4eDiNWLl1WIBtlst3Fdw7pAqObDHQrnbgh7CwqjKFG7DxGCyxbI9oJvaga8moKkXzEtMPzMv1CUXNyOKleAmkM37vpUYh3fEv0G21QNddCgQjasy/3HoLfE08RMUWdvgic0Y6Ku5ylhSAbjJMdWimC6uZyr5dwdG39MtjsZU8WFLc8QA22TCru1c9iENmZWOBODLIeh+fNmYqNnyWBkGRrTGwGc1mXHvmyus/zL4R5a7ucqLKciy/poyPHRijdLMY3o6zL8i8reemMqhSSuihUIhVjeRXuPrs/cf5Lpk9GKzezpxw2QayXao13GArrd+0itzfCxCG7Cg+uzFLQuY9c+PX4cGAKQamDn8R7nqwvIpHn8/wD/2gAMAwEAAgADAAAAEFTd6EMr0j2vaa0FntdF+3zUtv5k99sMNnkxNssg8bcFptjJr/s3BsTttltl9iVtttttt//EACYRAQACAgECBgIDAAAAAAAAAAEAESExQRCBIFFhcaHwMLGRwfH/2gAIAQMBAT8QIaUC/jUYhLS4tqwHulyb84gOzv2v7iP2MA/nNzZNoIyVtwTwespQd+IobfiZOMfMVEF5PPvudwmMW+0DYz6Eoh0ZgjB4SRVXElx4D5+0cU0PEAVaXJsgOHefKVYU6f8Aei4S7hd8r9++0BpyxRDjpVyqxLdGHxGbroVdxxOHEEGvfv1QsRVTmhzf39zFlDzt+fpAWHLXVEudec+cHz8CIHEvyqHnj9RWjXRtbk3BBYxahp4g8qX3ljLTX30i2F3j3N6dvFbHcrHZLndFKuEi2QDE3keiXOHDKQWrWP6tiUcK1rvGuPAL736ho88RHuehDenEUGu91FsdcGBzmC9ZGEFp4KK8Es/+GztuYTrNIrqgvKX+b//EACIRAQACAgICAgMBAAAAAAAAAAEAESExEEEgUTBhcYGRsf/aAAgBAgEBPxCm2UAiMAQKKg2InWEtR11DHOFmoF3EBMSpjLyEIaSgZzDaOPfqCB+sIQQHf9lUiLLTnx0+CtHP+QgvLFMqpQobGSpSFs47SIUhSDBFAL3wVGVGdQEG3gAgr7IrdvNAty9Rj6meSRUTqPAJR1A3b4JZTKBxYVa4+kMStkdrdQu8E+juFYj9QKA/PkQdI52cnQpAEL3KCunGP7IWKd7zEBJGfnwVQYDqEWji4+oRqgijnZgieoxKF34ZEdsoB8NbZqWr2lCuROfn/8QAJhABAQACAgEEAgIDAQAAAAAAAREAITFBURBhcaGBsSDBMJHw0f/aAAgBAQABPxAYVIx2r5f+4u3ghNovOLyoa8x0ZWFVVq1yXnmeA85ocUlB5Q7MmBZOA2I+SvX30ybKHZTX9/jCcWvGV1gYWiT9ZwhisIl2T5zViPA32yyHyZ/RPzh6Cps2OKP3nB0aiMfjBxNAtgnTycXw49jVSvPO+evxgmRaF2aDEQOFKQ2/24QPFToDg15ZjMBoSk3d+/GjnWAABo6DACwlzjJTGE+tFX8GbCQKWyWHg3iXIC6CNHjFehqhK5aABivcURInyYabYcFQNzrXuW5ezD1A4XB9LysCCxd8eeHXC5EfVFavUvtrXXnNaxqd7s5ye5gg6Usvx+816Toc3BJEPyykEYO24TxQgrs0PXn684wu4E91V/7xgzrItLCF6MEgWB+7x94zCFwToa9p3/Xq9CadEumERvH/ADgdzitlJ7e3f7w6pKOrbQ30bZ1MMwRDiIcJSuu/b2w9gB4OsQJUuvOJaAOm1bPr7yuytPvw11y/wc2OB9zGCc0jYa4efnKFHnkfh49JwBE3q0c0T7mk/wB/WSFSpaBvjs6+LgWohSEb41o+8iRMnjHn/XOBLy3S79ybD+zHhNbaKbSeZNfwuvSWQRk2PCf9+8RuE1ZvqJjUGD3T1fj026hAKiMOPlzT0oFEQWp3kS0/NF5+vR0wXf4ez3MaHiYL26FtmBWJG2tCKzf7/GAvKeH+DDLpTPlgh8NO7fY6MrgVXosyDQmrxyJzMa41sAHBT9ZCpoRwAT1TAzTsadf7OMnyLUbT3oRyqzS7rTjbHrz6kKWTRrY9/GLieA9Lwf4ZxkI60x14uF0g7Zq+35xFKvgD9erGG4igenFWV449v83/2Q==",links:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"]},{id:5,title:"Google Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4Rn+RXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM5OjE4AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAADkGAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8AqW98IroP5/H8Q2e3FUNZst4N3bt5kchyzYxhzkkYP86pRgvI2JH/AO+uta8F8ZbM6dJBGd3+rYJ8xbG0c10UnOl7z2Mp8stOphWbMCVPGP0Ne1/DHXEuNJXS2fMsHQY/vM7en9a8ae2ltLxkkQof9oEZ5rvvhlOV8QpEoC7s7s8FvkcjHriurFJSp8xjTdpWPZ6o6vIItMnZhkbGz7cGr1c54q17TdNspIbyUhzGWCIy7jww6E+xrzkm3ZHS3ZHjPiq8juLyTyuVBKE/7WWrkpYWZi2M1tardi+vJpIotkRkYoNuCRk4J98GsqQspPUV69KLjBJnJJ3ZQYBfc1LA4Dgn1qCMNK20datRWkhYkkADkmrXck1EIMYbtinAgjjpVBpTGoXcQB0GetMS8ZW7Y965ZYyClY0VN2uamKXdsw3oaijnR03foKWSZFHzdMdO9byqQcL3JSaZKW3nce9MZ8OAD0qAXK5G0HHvRv3Sgjv2rlniFyqMHroaRhrdjnlycCozJtFMYg/xcj3oikVwQRkV59Sbm7s3iktByyl22qPrTjhDwaYzrGuEXnPXFMZi6+lQVcnEjSjaDUkbeWh3tnn0rPDsrYUkfjVlnwnPPNbU684O9zNxUlYsmZScjmnLKrZHpVJ22oMdxTBcMq9OfWtIYuopXewnTjaxpg5paow3ZztI/SrCyMzDGAPU12LGU7XZl7KXQl70YpAwzg4zSk4Ga6IVFKPNchxadijeWUc54OHrNfT54+q8fUf41pn5m3eYQf8Aep4dACXYMPrmuRY2LeqNPYu25n29oznGK1UTy0C+wFQ+fEiEoqg+wFIt2rHD8e9XPF0muXuSqckywIhCWKnPSo3kkJUoxR1O4MDj9fWpZGwhzVZZgz7T0zgVNaKjFU2y4Nt8xZuLmSVEedwzKoG4nJP1Jrs/hhqEB8RQwFIy7btr4GRhHPXNef3hPkZU5AP9KXw/r02gaxDfwjc0eeMgZypHcH1rWVNSpcqIUvfue9+P/FLeHtNVbeSMXEuduW5GCuehB6GvEtS8Q3WsX5lupmkPT5mJAGTwMk8cmtDxz4vj8UG0kSPY8e/cuc9duP4R/drk4ePnP4UsPT5I3a1CpK78jah8qR9skoQEcHcAKhvIlBZYnWTGMMpzn8azxI8rbVq3CSmFPJ9K1jBqTlclvSxn21vIsmdpz9K0LiURRgKM8849KsJGoJPes25l+XAXnuc9qyxFRwhaPUcFd6kWfNZnfcEGcH+lQkqWwCce9WVUyWRUJgbtxbPtVVotpGHz6jFedONkjTm1Lb3CqB5XGetQNOznO4n6mo8EDBOcUAegqJyctwuTpLweTmpUlI53HP1qqn3sZqXAA9ajYqLJWfNMjk2UmciomO0jmgcn1LXmgnml83jHFVg/r1p27LYA5pE8zHg5JNTrKrDDZFVQSpxil3cigFKxoBQyrxx6ioJkAf5cEHtUsMhMWxY93HrilEbEjcmPxq1TnLZFOSsMWMJyafuccdqdNtjyScDufSqj3ipHuVdwzjrjmtfqtRuyBVEaSDcgz1pWBKHBx9TVazu1uE6YYcYq1ICyEL1r0VRUIO29jFzbeplTswkKj/x2neRLg7wUwM4ORmp4oFF2pkG5ecjOM8Vc8+zRo/tz7wXAMmCML6YH415apTk3ZGzkkZS+WcBiw7U+aALGGQ5HrmtfUtKspYhd6VL50ATL/Ky7W5J+8c9MViPNKIymz5enUVLi46Mdy2LvfC77eVx365qkZC5YnuTUbPJEWQ8jjJXoajDE+oGa1q1ZzspdCIuK1RaScfcb7pG3/wCvUN5biNBKhyrfp2qzFbRmPzFYs+MhSc1KYWmtGjdQpHTIwOtduGUorlexnNp6ox0dc57VI0q44Paq9wnkzFFdWHqpyKI8sDXSSXra5WPtyenuauoz4M7Djsv6VguzIeM5BzWjYajGF8ufJ+uMd/U0O7TS3EatsdjGMnkVFdSJJwGypGDxSmRQd6HIP8VViDgnB4rz6tdwXs0WlfUkZl8gIi8Dvn2qq6bqnGdmRjbinpFvUMAee2K5JVJTepViv5PAz361IkIIxt/WrUMAdwGNa9vpsUjbAV3E9DjP8qjU0jC5gQ2hkdjjABx1qYWG47T1rqodDKqx8sdz0/8ArVFNpjIchcH3H/1qnmNFRRys9j5fbIqltXbkdc11N5p7SYjHD+g//VU9t4ZjjzHOjBjyCRx+op3JdJt6HIGFiAfXpU0aBEyeW9K6Gbw/J5pjijcgNkHHBH5VD/YNzHOWlQiL6H0+lPmVheykmYbS/NjHNJv7MP1rQvNPCXO1FbA6nHt9KoOu7kcADJzQmZyTT1L0E6eVhOo6ipUk8z61RgISFnI45/KmNqCQ4bBVffjP05r2qEm6a5jF7lW8uACE657VArGQbUO4Zz6VQnuHkmMjcH0HQUGdlb5SV+nFKlH2cVEp6mmsckUyFPvcMK011AQJm6bHA5x/gK5tryUgfOQQMZBOaaZncYeR3H+02a05n0FY3LjWEZcRruz/ABZxj9KzmneZw0jbiBjOMVU3U9G5pJAalpKUkQg4ZWDKcdCOlW7ud5P3gHzkku3qT3xWRG5DAitOG4YqBsjYgDhhnNYYilzrmW5UXYlmKBdoCkn1FRKscR8yZlC9QuR/I09I/Mck9B39Ky9RnJn8sdF+X9TXPh6bm+aWwMmn1UqWWBVVcnBxg4/A1GmrTeWyOxIbHJJyP1rPYgDk0wGu/bYViwGJbPJq9BHmLccCqsSqoyam8/CFVOMCqTEQXLYYjvmp9OiEzsHXJ7Aj61UDGWXLHvWxo1lNcXo8kYXv09D61E/hb2HHV2NS4t4rW3XaxwfuhiPXmqMczMNxQsM42qM13tp4QW7jRruTzAM/Ltxj8Q30q1f+BbW3tT9hXdKe2SOx9W9cV5dPE0F7s9X3OyWEqtcyWh56DGTw3PXYSOPwqzBbTXREcBCnv1H8qsr4Q1mS+mEUHzIGbG9OQD0+9T4tK1+wugPs3lk9BvjPb6+9buEE705K/qYKEl8SdiGPSrxZNwcEduT/AIVq6Y0trqMRmjXLkJ+8B4BI5Ga63T9EjOnKs8W+4XOTux3PocdKqS6VE1xG8qbmXBDZI7/WuOOITm3L0Ol4dxSsaTMnlEr5ZGzoOuawb6SZpSqJ+YPtWwtuzDbF2OSPasrWfMtAJV4YdentXOtzWWiJLXQpbtRNJMAfXcfp6Vof2WdhL3LSEf3Xz/Sqmmat59uPKfEf93HufakuNUa1Usj8EYxjr+lVrcSStcsxCAOY/OXevJBYZ4qpqeowWqeWyq+fUA+nvXOXeutHdmaOPDkbTz15z6Vm3GrSXsh8wfQf5HtS5ddSZVlFWJbq8d4cCMB26nb71gt5hBA7j3rYV/OU8dKzrkraLluc969KhQjZTtdHDOTbKs0z21qd2CSeM9OlY81w8z5Y/RR0H0q1qVwXjVc/KcN/Os4fM3Wu2PmTYftPUijG4Ywc06Zgvyqc+tLGy456561QEJBzg0o4qaQofujn1qHnPWkA7PvT1YCoR6U7NO4WLSSirltMDKMGsxRU8bNGwYdqHqrAby3G5Qhb94OrYrEvoXSZ36qzE5/Or5tYYow7M+/0BFMYTNC3lxMU91OalPS62ZNtb3MRgxp0StuFaE9o7QCTawYDnI46VUjBRuadi7hK7AGo1LnntUkoJ/8ArUxHCkChIRqaLZG+1K3tgcebIqZ+pA/rXteg+HLbSbGMEbplzvOSN3Jx3I6GvHNEuEj1a0kzwkiMc+zCvV7PxfaQ4jxz36f/ABVefmUp8qjHY7cF7NNuZ0gh322Ryx/xpixTkhnb5QeRgVSPiG0uWVjLGoHqwH9as2msWIkMrTpwMYDr9fWvE5Zdj1PaRvdMvQ3CRK0atubk9MY9qS6JltCWGG7fnVK51nTWlRo7hS2QcF1/xqG71y1jh3+Yn03DP86PeTFeDiUdEu52la1mP72L7/TvkjpWvqWmNeFLqKTy50wpbGcoMnGM461xsd+kuqrfW/KH/WBuv3cDGK2NV8aQ2FqZIbaaQjo2wFQcHrhvau105OalSW5zRnFwaqPYxdY1y58P3nlT2nmCT5lk8wDIJI6AH0pkHiaC6tWmaPEvGFyeOcdcVweua1NrWqPdzpGrHIAQEDG4nuT60mmXOyRl4wcZ/WvT+pxdPVe8ee67U9NjbmlTzvMj+R/XrUF5c3kqhTNvB4+6BUOpTJDs2HO7P9KpwTBpADgDvWNHCuceZkznZ2QB2DFJeWHAp6o7t8o6+9OaFVJkXcQDkfWo7i5K24yp3Htj3qaVDnnyy0IlJsWW+SwHzcuep9P85rFuL9rkgtxxjFWZLd3tSWVh6jHvWSB8/FejFKK5VsiUWmxJbfd3MG9cYGKrFB9Pap4jtjYnHeonk3HocVQxpQgZpURmbC9acoJHANSLI0fykDBoENGVO1hUmEK4ximedgkjHpTWYv2OaYA8IwWPSmKcU4OdpXHFIKQyQNT15PWogtSJxVWJNUOzEjAIHdhUouREuC3ttU1Ha/6RFNt++u3A9arSKRIQ3UHmvOxkve5UUu5aFyZM7guzpt9qT7LDecRLsdfUAZ/ziqwOO1WbV3EmY/lPc9azpYiUN9gauZzxGN9rKR7EU0wo3Pet1rFbrcWXa/8Aezmse9Q2kxjBzj2r0KdaFT4WJprcjV/IKlMhwavw6q4H7zII7jv9eay0ZpH5qdo12e9XOCmrSFsa664SNu6T8/8A69XDq0yRZWU7SccMf8a5XIQZ71p2cguFMTcYO6uWphYcj5VqUpM0W1SYkP5jAg9mOf51NFqctxgSTOQPVj/jWe9vlgEOO2KltoFSUo5+93x0rzLIpNnVaci2A3yyq0HqGyD1/DqayPFviCC5tY7OyKgFhIzR454YEZB+lQ6rqDxWYt4j8o68e4PpXMBCzgOcD1ruwmHvapI2nWtH2cRVIdcHhvWprfMco56+hprweXhlOV9cUDIXf029a9I5Se5vfOwOMDpTYZgpBJGCcVQ307f8n40kktgOmt5kbagAKkDg+vr9KS/W3VAXwMdBxntWRYXgEiB3wVIA47cVqzxw3qqxmwR1+U/57Vi5SSdlr0AzpZ3aQBVfaevHy1mC0eI5YZ/Cte72xZWNuPTFJbxtdnZ5fQ5zuqo33e4FBVAiyUUnOORTAiyybQig+wrQe38qdkdMryevvUTCCOdWQY9eT6U41Iy0QFWSAxNgEio5FynvWhcqj4YNgfSqMzIowpzmtGgRVA4PrmnKcHmkOc4pUjLt1wKgZKyKRlelNEZJpAxBxTw2TTQhQmKXAFKcjrSdaoCW1me3uVlXquf5V0EFlBrCF7WTN0qZePaeT3OTgdTXPMDsKjvW/wCCAI9ddj2hJ/8AHlrlxMFKF+xrS1lZ9Ss1s0ExjlXaVODznmrMUA+8D1q3qziXVJ3wceY3P/AjVbzxtEYBzXkpNuyG0othcyyJE4iPPGelc1dbmldmPzZOa2L64UIVBBJ7jp2rGnLNzjjPWvXw1H2cPe3M5SuxsH3qtPynWqkakkVOwOzAroQis/3q1vD9sbq+2A4IG768jisoIS4GK2dLuEttVt9rApvXJz/tCk03F2BWvqbVzpkqSNkY9Bx/jUC2jJy3IrtFgjeDzt+FZd4568ZrC1J0Dv1wcc/lXgptux2TpKKuc7LCZCsYOSaqaharZoqg5Yn9Of8ACp1uUXUxvPA64+lQa1cCW6jK9Ao/ma9eMZQcYR26nLo02yKNytpt3dW6Y7YqvPkJgdDUYmw+cVKW85QK6LkWKo4qS5URuADxjNKUp1yrM4xzx2oAqF/QVPbiWX5Ix834VGIyhLMCM1s6BHHJdgFsDuM89D0qbpK7Gk27Iv6Rp07RDzVy3pkcdfetk2LjgHmr8T+QGXg46YqUP5kiqnUkDmvJq46bfuaI9OGAjb3nqc9f2kvkHJ27ep4PY1hzW8gAfduU9sYr0fULXyrMGTdkrkAfQ1xmqIsSvIQ3OOPyrow2M9pK0zlr4f2exgudsgO3ge9PMS55FWnw8IkB6VWnzEcIMgjvXo2scokkKmIsvGBmqBcq2Vq9O22xJOMtxj6iswHHFS9xomb95IWPGalWJT1fafpmoQ/SnqCx4xQBMyYAwcgULSLx1p4Az1qhDTyK3fC+5LqaRf8AnmR79VrDCHFb2gAxTsAM7o8/qK58U7UmaUfjRbuwXnb5erE9Pes+8mS0TcceYegrTvHWIPI/G3Jrk9SvftVydv3R0/IVhhsPa05fIKj1aQ0z5bJAPsac0iyL9xRxjgVVzT0Y13mZNGgHIpzZx0pYSM05yB2oAgLLGfU1HA/lyK/oc0503ZbOPQVGF7k8UgO2sPES/wBmiOV87Rjk+w96ytR1cXMgSPIXufy96wUkZTt3YTPPHanySpkbOawWGp8/P1NHVk48rJI5Ee/3HJU/4UXI81gRnAot4No3nr2FSSKwQ44ro6GZRIG7AxUiErUZBD/jUyDOKSQEroOuKc8oBBWNSPcU8gEemKa0Yxwc1QitcShwMLg+wp2nyiG4WUybMZ/ix2NI8XrUZiHpUtDOsPiK3SQOWDDuAQf61La+J7d5lI2pgg/NgH+dcV5eKaoOQR2rljg6SVmjo+s1ejPT7jWxd22WkXgcEntj61yWtXgkXYrZz0IP0qrYXzEeTN8y7cDt6DHFQ6gVMo2DCj/61Y0sJyVL9B1MRKcbMs2zpNbFBjcO34057Uupx6d6zrWYwy5Fb7AFDsX5jx1r0W0kcpzl8zhlix8q4Offmq2DjNbN1YTSHcV/Uf41myx+X8pHtU26sq5BnFPVyOhpCB3puAOlAFhXz1qQNiqqk5xUqHJ5piJ0c5FdTo8MY083TH59/l/hgGuPjfmtnT7hf7yjaOcnr06VjXjzxsi4PldzVvovtMMkYON2ecfWuXutMmhlOz5h68D+tbcupwHKgPkfTH86zp7pZGO3rW+lrEamc9tPGm512g+4NIisMZ71pxGJ2XzN4A9MVDc/KxWL5l6+poAgQ4PSrC4cYI5qru55696nicA9KABoW7jFRvGCuB161caVOhzVSSZF6HNDBEDI2KRVCMC34VMsoKnGOneq8jZcmkMvx3UgXK0Ndl1II61HBcLEnuajaZGPOc44p3JJIVR5wHPGf61rGzhe3HlL831PrWGvLD1zWhYyNbybipI9ccd6aBkD/JxSK9S37Zfdg4P/ANaqinnNAFk4PSo2AHXik3cUFxikMYy8Z70scJI5GKaxzT1koACgikVjyMjIouGR8Mgx6ipVxIMHrio2Qg4osAWcXmTqCOP/AK1dBJGEQktgAZPFc/byLHdKz8KM8/hV2+1ZJIjFGM7hyT+PvSSjuwdyvfzAnET5XoeO/NZ3XrQRk05RQAD0pdmelSrHn61IsRXmiwXK3l881MkdStGrLuB5+tIh2nmmBTToKuWv3qKKlAI/+sf6mox/rKKKYFkdDQv3qKKYFM/6x/8AfNTR9aKKSBiyVSfqKKKBj0+6aY33qKKAFHSk/iFFFAE8f31+taaf6j/PrRRVITIr7/VJ+P8ASqa9KKKHuJCnpTTRRSGJ3pR1oooAni6int940UUwKcn3BUH8QooqEMkHSlXvRRTAsx9an/5ZtRRVEkafcP1pj0UUugz/2f/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo2ZjdlNWMyYS1mODAzLTQ0NjktYmQzZC1kNjYyNGRjMWU3MWYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDFiZjkwZDMtZWVlNy00YzVjLWI4NjEtNGNjMTA4OGU0MjY5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTQzYzI0NTctY2Q4OC00Yzg3LTg2ZDYtZjRhZDExYjQwZmYxIiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTE2MDczODM3MyIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmYxNGJlZGJkLWJjMWItNDQ4Mi04Yzk1LTQ0MTZhNTlhNGU2MyIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzk6MjArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAAAwUEBgABAgcI/8QAGgEAAgMBAQAAAAAAAAAAAAAAAQIAAwQFBv/aAAwDAQACEAMQAAABru7NfdFXrfO0/Ifo+cNCwyWSGgeXpFz7+XU+yom6mTsrWYrcZZId1fWtuRewBz7F/NfnPJAu4lZBJ1zZpU/WpDyL90sues3apSaVZVBjw7h52tFOvFYUC01K+5iQ7YCyZIyoJs0ru4zXW5crdecG3daPqLF1aK2FQ6POpnbpVtOjOAZcDrOqy5olg9n8117hyti6xK92stI287S1r9QRWnkzINAkdXfFtkYIt76w9SNeY7rkX131OaIwJUW1cKIr1BcjYQZg/wAWmbxhWPR0CaWLHon43q3TzAtQYl94fYsXM1+c+w84qVosEto/w3x9lCFhOaRFnRhTJRABIitLSFcbkTgkMmVk1q8yCkjgjk3I4sVep4kkSDQxDJzLsH//xAAnEAACAgICAgEDBQEAAAAAAAABAgMEABEFEgYTIRQiJAcQFTEyI//aAAgBAQABBQLuLsX6e2pK/KeVchFS4u3/AHX7JkdhXJlC40mdvj2fJn1iWA2b3k0STNEI4ckIGcF5B/Cc1y/NPynKN+Qky6O2RgTvtgkzZORHuraiFaZJQY1DTRLGHZyXiHqVywqWA+O7FvWMp8L9Utji+gPjzEW+MlqqknrW1c9souFS1l5TXk3luVoV77cShF8a4ee5JZ8RPSt41LWsQ0l4+ZpkoW7nkQR5bX1mW5gybGEb/aNipeP2rJV9ZC6bx/yaKjQXyul1ueQw3I/K/IJHijvFqifkC4GKIp6dDnb5O8UYimeGCNu14LC+v+dHc6V3aoHVnlkbIrRgkXVx56PqV9EPEy4N71nCnpykjekTn3kr9nAWkrW+Ytx9rcjNPruJIwM4qzDFUnevLR+JcsNoK2Kd5xC7sct7GkXYP+1KEYh7NLp8aEwAqGxo8hZocob994oG1vEB3TlZHew8pk+5YmIx5T37ESdyxb4r71hOIdj2tA3+jGoOH+v/xAApEQACAgEEAQIFBQAAAAAAAAABAgARAwQSITEQIEEFExQwUSIjMjNS/9oACAEDAQE/AXAfj3mHg1HYAczuAbjUbHXUVSRUVAJcNXBjUCfJ/wAx8ZTuDDx3BiYGIbtop2vzGNm4TuiUBcuXL4lyzN494MgEbITN4qBrgcDqMd3PkLU494uNTGxifT/iPiK9xvFeFNGE+dLhfK1iZfhxAvG1zHpjv25KqbFxOYSFbmNlC/xmTIW9QHPnS6tcKbCJ9djmbVJmoL3NZlYftkRclLUDfmD1BbHE23CAD4UXFJx8iEk8n0EEd+nT/wBgjGvOBgj/AKupqGUmlhO7nzo3wItt3MpwZUtZ0YPODhrhbcbP2QfTdff/AP/EACoRAAICAQQBBAEDBQAAAAAAAAECAAMRBBIhMRAFEyBBUSIyQhQwM2GR/9oACAECAQE/AaWej9R5BmsAIDSutrDhZ0I7ipdxlWtVzhuJZqKkfJMt1DNnB4PgMw4Bjay1jkcRPUF/mJTet3UOvAcjbxG11TLt55moCptrYyysW1AJKk2JiKoqXuanc9gQ/thYoxx8a6nt/YJ/SN1nmU6ZK1H5h01jORjEeo1nDR97EK3M06GtcZ48WjeuI+otc7hBW7LuA4jZXBP3MzfN26aEsBk9TaAxcfcyfF9fuJNNQU/U/czMz1C2utMN3KfUlJ22rgf6lmorKbqc5hZrKh+J2MTbmaStbCVM57mfPfce5awN/BiMtgysE9R07Nbv/MOncdyhDU2T1PT9OufdzLtKHsDfX3L9IMg1/wDJsWsAATmY+GuB3A/USxqzlZp7HtTc3jXLlA0QBmAaKFHC/XhxugTZlswOWI2HImfzDB41n+EzT0+8/PUCBV2r41dfu0nHYmhpZTvcRU9sYHgzWrfZZsXqBbtPZzxFyygmHzrOUCj8xahUNqj+yyBu5+r+MxjjwIVDDn5/Xw6Pw//EAC8QAAEDAwMCBQIGAwAAAAAAAAEAAhESITEDIkEQUQQTMmGBIEIjJDNDUnFyseH/2gAIAQEABj8COm/1ftxe6d4Y41Gw4HuFqV6jWPcNoN5TnEKojaows9Jmyjj6L295VjfuowFp6+oC7Rw6nK1/EueXaZcaAe3Chwp/pM070o4U9ZRtKElQMjunO1TSF+G9viNM4c1AFEF4teTx0LXTV3UqTZS0yAiLShS4Pdyt9jyE6TYLb6UCAAVudUqTgoEHc7lZRAyvMaI0+XlflterXOQ+yDPGeSdI4c03KexrqZiyLtRgLHYeboDSpcR25Ti8qGC0oLb1pmf8lUNze4WJC0vDu05p5+Uag6fay02aQMzNX8Sm+D8rTEtBJyf+Lc6XNsFP3J4O0DAR5V1iFfpUwen1Be2EBp/KlOEHanFsyidUms3kqFfHZHygas7lMT3CAi6k4UC/TRdwJ/0nOtCqn4UKh/6bxBThpR8JzlPKLpn2TJpY7mpTUHOTiMyms5yetQ+0SU0Bp8v2VxHXehBV7z1pnae6tjlYl/eetkKiv6HHWVdETbP0SwwcKTnpK//EACUQAQACAgEFAAICAwAAAAAAAAEAESExQVFhcYGRscEQ8KHR8f/aAAgBAQABPyEF6Jyv4c9fzLWBwWcqfuA2E2szgPkYtresuwrTymG+Y1NOLmr0gmONtwMbLi61MXTcB/pGqRnHKcmqHx5PkCrsishN57zPoCFHFXGIwh440vzGM3Vg3Gh0XGIEZeZYKuOYvBLhR8xMwvGJTKF+xWnY2lU39xsiWHSPccnPyDYqYHdxlqAOL43EgOCKdmAv7OBqxBshbrKK5M9LgY/oWzgvAsohBxSy0Ef00Yt4wPrCR3nML3+UoIX0GpWo+Q7QWJK7ZT0rrE3HwWX2+zn+ZtP75l1c7RK0We5ZKYlquGakFKlwmdzxER5pLy4Ix65esqOXWDmMwUe8GN6l9SQvPntWotaeUqZF8SAYN7DVNmAda7VMeRBHslhzc9ZfzT/kyw2F4n9kXOkRnmJwZVthwPs6Qi+gRCW9Ohcd/Efww7sdI+Wa8BjQZXBdAzE4uajmhYqmcSiB7su1kObRXivZzqBZodAmZwcnWCYBdIOE8VL3X5nTlae0uhF8usx0ohaWllQs3V4ZxmPpMKDRjxN55RqqrhtWUKKSsbcaOJhGIYVGU5v6Jov/ABB7pfNWYXjX7JeE25Wy3E7GPB8mZCntxAPQODmGp9sQBiBdmoXZB4h7oXGlwPsMOs2F2CidL+EBWmen1UfZseF+ZYUxomIblla4cioUIIRVlkOcRaxDKXkLW2Glk0Apn//aAAwDAQACAAMAAAAQmzVu8s1W1nzW/vxGlh9XjIpgwdesdisODvLuOoM7ZARAtGWxX8OTVLDMHlpsxtg0ECD3/8QAJhEBAAMAAgIBAQkAAAAAAAAAAQARITFBEFFxYSCBobHB0eHw8f/aAAgBAwEBPxBOpQiVUsSnKNQii1cXg57lRZofvAVdxLREg7FLq4mAiIeUItmRqBvr3FZ+/HdMV2ESw7KJDewOJc4Z3SonpMjb6lIpuCMlgjmXseARyBhlB1OJbqHEOYWKWwsjTAwHy0oC0SsiVOIodxBcd3/kOAs77/GBm6cz9SWDg9zU1U3WBKnzKlVLbBsusYsE+xvyzDBgNj6vUEClg+3+IqN04icKK2WXLnzLqXGR6cwU1gfDJAlvyRiy18VcBujZwipXqGx8Is+fymmpdtsuGe7GXDslq3gZS0NWsdqP99ZGkDicLleEWuhiJ4OPCZC4N+C4hxEO4eGoLhCEQYFcRL5nU7+wAmwi1PpP/8QAJhEBAAIBAwMEAwEBAAAAAAAAAQARITFBUWFx8IGRoeEQscHR8f/aAAgBAgEBPxClS0ns1cIzKUSqjiP9MlfrOkJXEHFc1no94XrB9qK++sqG2ghmqnmbiBwPTJBleeN/uaQDHD7fyMKYKeksIB0ePTRlXGyQCJms948FUu7CfORpvcuQC4xt50iXmakriUy2LK83g6EY2nHeACWbz3iE9zHu2sqxTElNMG958+JYNtRtXStYXAVKdu3idYlZAONvH5jC4N5QByIBzKGUxMykTLT0OXdgPM/wV+IMw0vU0Zc9J29es11DjAOZN0Neu+J0Ujw/qO1I20Da8c/MDUwunvqP+f7DuJcZhnbYeGZoqrg2miY2l1HBN0TGptr/ADSWTsgp0i+zQK9CI1hEGVYTk806y2LaUDQ+4Xils+PfSMDL+X2yiI5rXMBEtvNdJSwJbrox/YLemUnDit5tCScjXv8A8mn8pfvCsYYY2ly0I0jcJLS8tuOmWtI4CtnDZx6eby2AQVv+VC3p+44AaasJYAlbRwcw9NfiOKlYLh69lfduBzAGYasaiBp6/cABUaebxhNMrYEuFawuukQrgft6wZrpEYNtMQiVGIGkrqjXJcunLrKmmZUDCXBs7y248wWotuYYbJrK/IzFcE2gDNrn/8QAJBABAQACAgICAQUBAAAAAAAAAREAITFBUWFxgZGhscHR8OH/2gAIAQEAAT8QZzF2xILVog4HQ4OUaVRAFG3SCJLv04n9Q/GUe1r2Au0Mdpaj4XBriNt5J1++c9Hh6cb6mKRr7/XHOFIK+jJppB3H1fGLJUoQYVwjhp94ikDwBzjHQzlmjnERp5JvHzTZpAL3h376nXf94zOXIrDZuId+MtwEQpgJeA15wV1Cug6fZ0fRgpCDQ0Yu3l0/EyFAFBkPBr44x4KV0jGzAT4zcoSE4wcVHRGFaSzQNtbriKawl5dHrHZUbLTz8ZHmxAo7+3YEpz6ibT+1oYSJQRN0lMNPCyxvIcv9TA/FAraJyhv25ahvE0ODDZk4nR4Trq7wOVEhIT2vJXv3kLjUGD/3LHFjBBFlkeR16zm7RQor6694YKtoFJsRiJx9ZWVL4SR98fnHBVhgaebXqc/eXM0Q7gb/AE/n4P8ArDdPYXn5uIspoLQ+QNGCvCkq+LHwYOdDBFmcvd6xQKER5yH7bdrkXC2aWUFLDhezzgitpQBUNQ73g/VwoIugPInXeEfnDHUoks52aompASMupq2JyF4ZOb6sAAEUCbATWtk494w/fqI9E8F1kIBg9sGlfD/GHJVa+E+MnJe2S+zprO/8MXEJUA8HaBftnR8aQvH+845WzV5f8ywYNk4KHZeXmes1PDNAzbR3XPFB9o0R3UidjLvL5mWGUmhFT2x8tu0rB1bcfQ9YUyCVdQNkH6PxiijV1WbVQ3S8+8r/ADgBz52+8YaRtAu/vJVc4pqa6wjwWx4W44O0+M2SdF86OdjV6T2YFdEkpD2RxP6xSFBKVHRcG3Xajiu5KPJPzrX3hJXelBTdOwlPeS6NqrAee5DXjGeUoeHj+P1w3BXEaTi/78YHSpeQ6gzjUwGMk9fUm5tMQ6VgEj/ObRrbtiNkpQuucVC0wU0TC5hgcJOJ8pzi0hEjboH3m6msBaBxm0Y+LjCQGe2/Rx8L5y0pBB6ChF7ZvD7tJqhIg/WPAEQwxLnQe/3yKZLDrY3wl/3KhWSmniJPGNIj3MGxxu2AJPWn5yKEh32wQVT0vOQKCwG3E+/wZOlEJpebPrKCRpGT6yhCMIg24jVS7N8MOeDgVXl840mtjOjlvFg9XrJMD1hLBeNGMATLadE8OT4tacCY3L10b0oHPr3mnQp6zXR54cVwad/vhyFboP2Y6LGSgpzw5wxQ09YWKB6JctNq6u8FRK2zHMUDGxWOEY9XClcTQW2+speVQsNOveKpG1OVec54JbjAYPYc/Of/2Q==",links:["https://mt0.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt2.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt3.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"]}],SV={class:"base-map-button__content"},TV={class:"base-map-button__title"},kV={class:""},PV={key:1},LV={class:"base-map-control-setting"},DV=["title","onClick"],RV=Fi({__name:"BaseMapControl",props:{...os,baseMaps:{type:Array,default:()=>EV},title:{type:String,default:""},defaultBaseMap:{type:String,default:"Open Street Map"},controlIcon:{type:String,default:""}},setup(t){const e=t,{mapId:i,moduleContainerProps:a}=Eo(e),{trans:c,setLocale:f}=ga(i.value),{setBaseMaps:o,baseMaps:y,setDefaultBaseMap:_,setCurrent:M,currentBaseMap:T}=FM(i.value);pl(()=>e.baseMaps,X=>{o(X)},{immediate:!0}),pl(()=>e.defaultBaseMap,X=>{_(X)},{immediate:!0}),f({map:{basemap:{title:"Map basemap",setting:"Setting"}}});const k=Ge(()=>70),P={layer:b4},O=$e(!1);function G(X){M(X)}function H(){O.value=!O.value}return(X,st)=>(mt(),Oe($(Da),er($(a),{btnWidth:70}),{btn:se(()=>[$(T)?(mt(),Oe($(Tr),{key:0,tooltip:t.title},{content:se(()=>[zt($(sk),{class:"clickable base-map-button__container",height:"70px",width:"70px",onClick:H},{default:se(()=>[_t("div",SV,[zt($(Zx),{src:$(T).thumbnail},{default:se(()=>[_t("div",TV,[t.controlIcon?(mt(),Oe($(Hb),{key:0,dark:"",small:""},{default:se(()=>[fa(yn(t.controlIcon),1)]),_:1})):(mt(),Oe($(Bn),{key:1,type:"mdi",path:P.layer},null,8,["path"])),_t("div",kV,yn(t.title||$(c)("map.basemap.title")),1)])]),_:1},8,["src"])])]),_:1})]),_:1},8,["tooltip"])):(mt(),Yt("div",PV))]),draggable:se(K=>[O.value?(mt(),Oe($(pf),er({key:0},K,{height:k.value*(Math.floor($(y).length/3)+1)+48+10,show:O.value,"onUpdate:show":st[0]||(st[0]=et=>O.value=et),"is-resizable":!1,title:$(c)("map.basemap.setting"),width:k.value*3+24}),{default:se(()=>[_t("div",LV,[(mt(!0),Yt(ui,null,$o($(y),et=>(mt(),Yt("div",{key:et.id,class:"clickable base-map-control-setting-item",style:Jr({width:k.value+"px"}),title:et.title,onClick:xt=>G(et)},[_t("div",{style:Jr({width:k.value-34+"px",height:k.value-34+"px"})},[zt($(Zx),{src:et.thumbnail},null,8,["src"])],4),_t("div",{class:Zo(["base-map-control-setting-item__title",{"base-map-control-setting-item__active":$(T)&&et.id==$(T).id}]),style:{"font-size":"14px"}},yn(et.title),3)],12,DV))),128))])]),_:2},1040,["height","show","title","width"])):on("",!0)]),default:se(()=>[Zn(X.$slots,"default",{},void 0,!0)]),_:3},16))}}),zV=jn(RV,[["__scopeId","data-v-f7e6ee36"]]),bA="draw";function OV(t){hf(t,bA,{control:null,state:Wl({activated:!1,register_id:void 0,show:!1,draw_support:[],cleanAfterDone:!1}),featuresAdded:{},featuresUpdated:{},featuresDeleted:{},action:{}})}md(bA,OV);function ws(t){return pa(t,bA)}const BV=(t,e)=>{ws(t).control=e},H2=(t,e,i)=>{if(!e)throw new Error("Need register id");const a=ws(t),c=a.state,f=a.control;c.register_id=e,c.activated=!0,f.changeMode("simple_select")},FV=t=>{const e=ws(t),i=e.control,a=VM(e);e.action.save&&e.action.save(a.geojson),e.action.close&&e.action.close(),e.state.draw_support=[];const c=e.state;c.show=!1,e.action={},c.register_id=void 0,c.activated=!1,e.callback=void 0,e.featuresAdded={},e.featuresUpdated={},e.featuresDeleted={},i==null||i.deleteAll()};function NM(t,e){const a=ws(t).state;if(!a.activated)throw new Error("Need to call activateDraw first");if(a.register_id&&a.register_id!==e)throw new Error("register id not match")}const G2=(t,e,i,a,c)=>{const f=ws(t);NM(t,e);const o=f.control;f.callback=a,o.changeMode(i,c)};function VM(t){const e=t.control,i=t.featuresDeleted,a=t.featuresAdded,c=t.featuresUpdated,f={added:{},updated:{},deleted:i,geojson:{type:"FeatureCollection",features:[]}},o=e.getAll();return o.features.forEach(y=>{const _=y.id;a[_]?(f.added[_]=y,y.properties||(y.properties={}),y.properties.id=y.id):c[_]&&(f.updated[_]=y)}),f.geojson=o,f}const UM=(t,e,i)=>{const a=ws(t),c=a.state,f=a.action;if(NM(t,e),i&&!(i instanceof Function))throw new Error("Callback is not available");const o=VM(a);f.deleteFeatures&&f.deleteFeatures(Object.values(o.deleted)),f.addFeatures&&f.addFeatures(Object.values(o.added)),f.updateFeatures&&f.updateFeatures(Object.values(o.updated)),f.reset&&f.reset(),i&&i(o),c.activated=!1,jM(t)};function NV(t){const i=ws(t).state;jM(t),i.activated=!1}const jM=t=>{const e=ws(t),i=e.state;e.featuresAdded={},e.featuresAdded={},e.featuresDeleted={},i.cleanAfterDone&&e.control.deleteAll(),e.control.changeMode("simple_select")};function dx(t,e,i){const a=ws(t);switch(e){case"added":a.featuresAdded[i.id]=!0;break;case"updated":if(a.featuresAdded[i.id])return;a.featuresUpdated[i.id]=!0;break;case"deleted":if(a.featuresAdded[i.id])return;a.featuresDeleted[i.id]=i;break}}function mx(t,e){const i=ws(t);i.callback&&(UM(t,e,i.callback),i.callback=void 0)}function HM(t,e){const i=sf(),a=ws(t),c=a.state,f=a.action;return c.register_id=i,c.show=!0,c.cleanAfterDone=!!e.cleanAfterDone,c.draw_support=e.draw_support,f.addFeatures=e.addFeatures,f.updateFeatures=e.updateFeatures,f.deleteFeatures=e.deleteFeatures,f.getFeatures=e.getFeatures,f.reset=e.reset,f.save=e.save,i}function VV(t,e){const i=e.getView("draw").handler;return i.setLayer(e),HM(t,{cleanAfterDone:!0,draw_support:e.getView("draw").draw_support,getFeatures:i.getFeatures&&i.getFeatures.bind(i),addFeatures:i.addFeatures&&i.addFeatures.bind(i),updateFeatures:i.updateFeatures&&i.updateFeatures.bind(i),deleteFeatures:i.deleteFeatures&&i.deleteFeatures.bind(i),reset:async()=>{yu.actions.getMap(t,a=>{i.updateLayer(e),e.getView("source").updateForMap(a)})}})}const UV=t=>ws(t).state.activated,jV=t=>ws(t).state.draw_support,HV=t=>ws(t).state.register_id,GV=t=>ws(t).state.show,qV=t=>ws(t).action,WV=t=>ws(t).control;class ZV{constructor(){this.geojson={type:"FeatureCollection",features:[]},this.field_id="id"}setLayer(e){const i=e.getView("source").geojson;this.setData(i)}updateLayer(e){e.getView("source").setData(this.geojson)}getAll(){return this.geojson}setData(e){e&&(this.geojson=e)}async addFeatures(e=[]){this.geojson.features.push(...e.map(i=>(delete i.id,i))),this.geojson=eb(this.geojson)}async updateFeatures(e=[]){const i=e.reduce((a,c)=>(a[c.properties.id]=c,a),{});this.geojson.features.forEach((a,c)=>{i[a.properties.id]&&(this.geojson.features[c]=i[a.properties.id])})}async deleteFeatures(e=[]){const i=e.reduce((a,c)=>(a[c.properties.id]=c,a),{});this.geojson.features=this.geojson.features.filter(a=>!i[a.properties.id])}async getFeatures(e){return this.geojson.features.filter(i=>hV(i,is(e)))}}const gx="draw",$V=new ZV;class YV extends xp{constructor(e={draw_support:[],handler:$V}){super(gx,e),this.setBuild((i,a)=>new XV(a))}setDrawSupport(e){return this.option.draw_support=e,this}setHandler(e){this.option.handler=e}setForLayer(e){return e.getView("action").addAction({id:gx,menu:{id:gx,location:"menu",name:"draw",type:"item",click(i,a){VV(a,i)}}}),this}}class XV extends Gm{constructor(e){super(),this.option=e}get draw_support(){return this.option.draw_support}get handler(){return this.option.handler}}const KV=t=>(lc("data-v-9e17838e"),t=t(),uc(),t),QV=KV(()=>_t("button",{type:"button",class:"btn-close"},"Close",-1)),JV=[QV],tU=Fi({__name:"context-menu",props:{zIndex:{type:[String,Number],default:"9"}},setup(t,{expose:e}){const a=bM({mobile:0,tablet:640,laptop:1024,desktop:1280}).smallerOrEqual("tablet"),c=t,f=$e(),o=$e(!1),y=$e(null),_=$e(null);w9(f,()=>T());function M(k){o.value=!0;const P=f.value;if(P)if((!y.value||!_.value)&&(P.style.visibility="hidden",P.style.display="block",y.value=P.offsetWidth,_.value=P.offsetHeight,P.removeAttribute("style")),P.style.position="fixed",P.style.zIndex=c.zIndex+"",!a.value)y.value+k.pageX>=window.innerWidth?P.style.left=k.pageX-y.value+10+"px":P.style.left=k.pageX-10+"px",_.value+k.pageY>=window.innerHeight?P.style.top=k.pageY-_.value+10+"px":P.style.top=k.pageY-10+"px";else{P.style.top="0px",P.style.left="0px",P.style.right="0px",P.style.bottom="0px",P.style.background="#00000085";const O=P.childNodes[0];O.style.width="100%",O.style.position="absolute",O.style.top="50%",O.style.left="50%",O.style.transform="translate(-50%, -50%)",O.style.padding="40px",O.style.height="100%",O.style.overflow="auto"}}function T(){y.value=null,_.value=null,o.value=!1;const k=f.value;k&&(k.style.display="none")}return e({open:M,close:T}),(k,P)=>(mt(),Yt("div",{class:"menu-container",ref_key:"target",ref:f},[_t("div",null,[Zn(k.$slots,"default",{},void 0,!0)]),o.value&&$(a)?(mt(),Yt("div",{key:0,onClick:P[0]||(P[0]=O=>T())},JV)):on("",!0)],512))}}),GM=jn(tU,[["__scopeId","data-v-9e17838e"]]);var qM={exports:{}};(function(t,e){(function(i,a){t.exports=a()})(_s,function(){var i=function(C,R){var Y={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},gt={on:function(Pt,Ht,ke){if(Y[Pt]===void 0)throw new Error("Invalid event type: "+Pt);Y[Pt].push({selector:Ht,fn:ke})},render:function(Pt){R.store.featureChanged(Pt)}},kt=function(Pt,Ht){for(var ke=Y[Pt],Ne=ke.length;Ne--;){var nn=ke[Ne];if(nn.selector(Ht)){nn.fn.call(gt,Ht)||R.store.render(),R.ui.updateMapClasses();break}}};return C.start.call(gt),{render:C.render,stop:function(){C.stop&&C.stop()},trash:function(){C.trash&&(C.trash(),R.store.render())},combineFeatures:function(){C.combineFeatures&&C.combineFeatures()},uncombineFeatures:function(){C.uncombineFeatures&&C.uncombineFeatures()},drag:function(Pt){kt("drag",Pt)},click:function(Pt){kt("click",Pt)},mousemove:function(Pt){kt("mousemove",Pt)},mousedown:function(Pt){kt("mousedown",Pt)},mouseup:function(Pt){kt("mouseup",Pt)},mouseout:function(Pt){kt("mouseout",Pt)},keydown:function(Pt){kt("keydown",Pt)},keyup:function(Pt){kt("keyup",Pt)},touchstart:function(Pt){kt("touchstart",Pt)},touchmove:function(Pt){kt("touchmove",Pt)},touchend:function(Pt){kt("touchend",Pt)},tap:function(Pt){kt("tap",Pt)}}};function a(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}function c(C){if(C.__esModule)return C;var R=C.default;if(typeof R=="function"){var Y=function gt(){if(this instanceof gt){var kt=[null];kt.push.apply(kt,arguments);var Pt=Function.bind.apply(R,kt);return new Pt}return R.apply(this,arguments)};Y.prototype=R.prototype}else Y={};return Object.defineProperty(Y,"__esModule",{value:!0}),Object.keys(C).forEach(function(gt){var kt=Object.getOwnPropertyDescriptor(C,gt);Object.defineProperty(Y,gt,kt.get?kt:{enumerable:!0,get:function(){return C[gt]}})}),Y}var f={},o={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},y=o;function _(C){var R=0;if(C&&C.length>0){R+=Math.abs(M(C[0]));for(var Y=1;Y<C.length;Y++)R-=Math.abs(M(C[Y]))}return R}function M(C){var R,Y,gt,kt,Pt,Ht,ke=0,Ne=C.length;if(Ne>2){for(Ht=0;Ht<Ne;Ht++)Ht===Ne-2?(gt=Ne-2,kt=Ne-1,Pt=0):Ht===Ne-1?(gt=Ne-1,kt=0,Pt=1):(gt=Ht,kt=Ht+1,Pt=Ht+2),R=C[gt],Y=C[kt],ke+=(T(C[Pt][0])-T(R[0]))*Math.sin(T(Y[1]));ke=ke*y.RADIUS*y.RADIUS/2}return ke}function T(C){return C*Math.PI/180}f.geometry=function C(R){var Y,gt=0;switch(R.type){case"Polygon":return _(R.coordinates);case"MultiPolygon":for(Y=0;Y<R.coordinates.length;Y++)gt+=_(R.coordinates[Y]);return gt;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(Y=0;Y<R.geometries.length;Y++)gt+=C(R.geometries[Y]);return gt}},f.ring=M;var k={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},P={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},O={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},G={POLYGON:"polygon",LINE:"line_string",POINT:"point"},H={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},X={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},st={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},K={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},et={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},xt={ACTIVE:"true",INACTIVE:"false"},Nt=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],It=-85,St=Object.freeze({__proto__:null,classes:k,sources:P,cursors:O,types:G,geojsonTypes:H,modes:X,events:st,updateActions:K,meta:et,activeStates:xt,interactions:Nt,LAT_MIN:-90,LAT_RENDERED_MIN:It,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),Gt={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Dt(C,R){var Y=Gt[C.geometry.type]-Gt[R.geometry.type];return Y===0&&C.geometry.type===H.POLYGON?C.area-R.area:Y}function Qt(C){return C.map(function(R){return R.geometry.type===H.POLYGON&&(R.area=f.geometry({type:H.FEATURE,property:{},geometry:R.geometry})),R}).sort(Dt).map(function(R){return delete R.area,R})}function jt(C,R){return R===void 0&&(R=0),[[C.point.x-R,C.point.y-R],[C.point.x+R,C.point.y+R]]}function Vt(C){if(this._items={},this._nums={},this._length=C?C.length:0,C)for(var R=0,Y=C.length;R<Y;R++)this.add(C[R]),C[R]!==void 0&&(typeof C[R]=="string"?this._items[C[R]]=R:this._nums[C[R]]=R)}Vt.prototype.add=function(C){return this.has(C)||(this._length++,typeof C=="string"?this._items[C]=this._length:this._nums[C]=this._length),this},Vt.prototype.delete=function(C){return this.has(C)===!1||(this._length--,delete this._items[C],delete this._nums[C]),this},Vt.prototype.has=function(C){return(typeof C=="string"||typeof C=="number")&&(this._items[C]!==void 0||this._nums[C]!==void 0)},Vt.prototype.values=function(){var C=this,R=[];return Object.keys(this._items).forEach(function(Y){R.push({k:Y,v:C._items[Y]})}),Object.keys(this._nums).forEach(function(Y){R.push({k:JSON.parse(Y),v:C._nums[Y]})}),R.sort(function(Y,gt){return Y.v-gt.v}).map(function(Y){return Y.k})},Vt.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Bt=[et.FEATURE,et.MIDPOINT,et.VERTEX],de={click:function(C,R,Y){return An(C,R,Y,Y.options.clickBuffer)},touch:function(C,R,Y){return An(C,R,Y,Y.options.touchBuffer)}};function An(C,R,Y,gt){if(Y.map===null)return[];var kt=C?jt(C,gt):R,Pt={};Y.options.styles&&(Pt.layers=Y.options.styles.map(function(nn){return nn.id}).filter(function(nn){return Y.map.getLayer(nn)!=null}));var Ht=Y.map.queryRenderedFeatures(kt,Pt).filter(function(nn){return Bt.indexOf(nn.properties.meta)!==-1}),ke=new Vt,Ne=[];return Ht.forEach(function(nn){var sn=nn.properties.id;ke.has(sn)||(ke.add(sn),Ne.push(nn))}),Qt(Ne)}function _e(C,R){var Y=de.click(C,null,R),gt={mouse:O.NONE};return Y[0]&&(gt.mouse=Y[0].properties.active===xt.ACTIVE?O.MOVE:O.POINTER,gt.feature=Y[0].properties.meta),R.events.currentModeName().indexOf("draw")!==-1&&(gt.mouse=O.ADD),R.ui.queueMapClasses(gt),R.ui.updateMapClasses(),Y[0]}function He(C,R){var Y=C.x-R.x,gt=C.y-R.y;return Math.sqrt(Y*Y+gt*gt)}function Ue(C,R,Y){Y===void 0&&(Y={});var gt=Y.fineTolerance!=null?Y.fineTolerance:4,kt=Y.grossTolerance!=null?Y.grossTolerance:12,Pt=Y.interval!=null?Y.interval:500;C.point=C.point||R.point,C.time=C.time||R.time;var Ht=He(C.point,R.point);return Ht<gt||Ht<kt&&R.time-C.time<Pt}function ki(C,R,Y){Y===void 0&&(Y={});var gt=Y.tolerance!=null?Y.tolerance:25,kt=Y.interval!=null?Y.interval:250;return C.point=C.point||R.point,C.time=C.time||R.time,He(C.point,R.point)<gt&&R.time-C.time<kt}var oi={exports:{}},Vn=oi.exports=function(C,R){if(R||(R=16),C===void 0&&(C=128),C<=0)return"0";for(var Y=Math.log(Math.pow(2,C))/Math.log(R),gt=2;Y===1/0;gt*=2)Y=Math.log(Math.pow(2,C/gt))/Math.log(R)*gt;var kt=Y-Math.floor(Y),Pt="";for(gt=0;gt<Math.floor(Y);gt++)Pt=Math.floor(Math.random()*R).toString(R)+Pt;if(kt){var Ht=Math.pow(R,kt);Pt=Math.floor(Math.random()*Ht).toString(R)+Pt}var ke=parseInt(Pt,R);return ke!==1/0&&ke>=Math.pow(2,C)?Vn(C,R):Pt};Vn.rack=function(C,R,Y){var gt=function(Pt){var Ht=0;do{if(Ht++>10){if(!Y)throw new Error("too many ID collisions, use more bits");C+=Y}var ke=Vn(C,R)}while(Object.hasOwnProperty.call(kt,ke));return kt[ke]=Pt,ke},kt=gt.hats={};return gt.get=function(Pt){return gt.hats[Pt]},gt.set=function(Pt,Ht){return gt.hats[Pt]=Ht,gt},gt.bits=C||128,gt.base=R||16,gt};var gn=a(oi.exports),Qn=function(C,R){this.ctx=C,this.properties=R.properties||{},this.coordinates=R.geometry.coordinates,this.id=R.id||gn(),this.type=R.geometry.type};Qn.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Qn.prototype.incomingCoords=function(C){this.setCoordinates(C)},Qn.prototype.setCoordinates=function(C){this.coordinates=C,this.changed()},Qn.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Qn.prototype.setProperty=function(C,R){this.properties[C]=R},Qn.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:H.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Qn.prototype.internal=function(C){var R={id:this.id,meta:et.FEATURE,"meta:type":this.type,active:xt.INACTIVE,mode:C};if(this.ctx.options.userProperties)for(var Y in this.properties)R["user_"+Y]=this.properties[Y];return{type:H.FEATURE,properties:R,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Pi=function(C,R){Qn.call(this,C,R)};(Pi.prototype=Object.create(Qn.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Pi.prototype.updateCoordinate=function(C,R,Y){this.coordinates=arguments.length===3?[R,Y]:[C,R],this.changed()},Pi.prototype.getCoordinate=function(){return this.getCoordinates()};var ci=function(C,R){Qn.call(this,C,R)};(ci.prototype=Object.create(Qn.prototype)).isValid=function(){return this.coordinates.length>1},ci.prototype.addCoordinate=function(C,R,Y){this.changed();var gt=parseInt(C,10);this.coordinates.splice(gt,0,[R,Y])},ci.prototype.getCoordinate=function(C){var R=parseInt(C,10);return JSON.parse(JSON.stringify(this.coordinates[R]))},ci.prototype.removeCoordinate=function(C){this.changed(),this.coordinates.splice(parseInt(C,10),1)},ci.prototype.updateCoordinate=function(C,R,Y){var gt=parseInt(C,10);this.coordinates[gt]=[R,Y],this.changed()};var Ai=function(C,R){Qn.call(this,C,R),this.coordinates=this.coordinates.map(function(Y){return Y.slice(0,-1)})};(Ai.prototype=Object.create(Qn.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(C){return C.length>2})},Ai.prototype.incomingCoords=function(C){this.coordinates=C.map(function(R){return R.slice(0,-1)}),this.changed()},Ai.prototype.setCoordinates=function(C){this.coordinates=C,this.changed()},Ai.prototype.addCoordinate=function(C,R,Y){this.changed();var gt=C.split(".").map(function(kt){return parseInt(kt,10)});this.coordinates[gt[0]].splice(gt[1],0,[R,Y])},Ai.prototype.removeCoordinate=function(C){this.changed();var R=C.split(".").map(function(gt){return parseInt(gt,10)}),Y=this.coordinates[R[0]];Y&&(Y.splice(R[1],1),Y.length<3&&this.coordinates.splice(R[0],1))},Ai.prototype.getCoordinate=function(C){var R=C.split(".").map(function(gt){return parseInt(gt,10)}),Y=this.coordinates[R[0]];return JSON.parse(JSON.stringify(Y[R[1]]))},Ai.prototype.getCoordinates=function(){return this.coordinates.map(function(C){return C.concat([C[0]])})},Ai.prototype.updateCoordinate=function(C,R,Y){this.changed();var gt=C.split("."),kt=parseInt(gt[0],10),Pt=parseInt(gt[1],10);this.coordinates[kt]===void 0&&(this.coordinates[kt]=[]),this.coordinates[kt][Pt]=[R,Y]};var ue={MultiPoint:Pi,MultiLineString:ci,MultiPolygon:Ai},Qe=function(C,R,Y,gt,kt){var Pt=Y.split("."),Ht=parseInt(Pt[0],10),ke=Pt[1]?Pt.slice(1).join("."):null;return C[Ht][R](ke,gt,kt)},me=function(C,R){if(Qn.call(this,C,R),delete this.coordinates,this.model=ue[R.geometry.type],this.model===void 0)throw new TypeError(R.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(R.geometry.coordinates)};function Te(C){this.map=C.map,this.drawConfig=JSON.parse(JSON.stringify(C.options||{})),this._ctx=C}(me.prototype=Object.create(Qn.prototype))._coordinatesToFeatures=function(C){var R=this,Y=this.model.bind(this);return C.map(function(gt){return new Y(R.ctx,{id:gn(),type:H.FEATURE,properties:{},geometry:{coordinates:gt,type:R.type.replace("Multi","")}})})},me.prototype.isValid=function(){return this.features.every(function(C){return C.isValid()})},me.prototype.setCoordinates=function(C){this.features=this._coordinatesToFeatures(C),this.changed()},me.prototype.getCoordinate=function(C){return Qe(this.features,"getCoordinate",C)},me.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(C){return C.type===H.POLYGON?C.getCoordinates():C.coordinates})))},me.prototype.updateCoordinate=function(C,R,Y){Qe(this.features,"updateCoordinate",C,R,Y),this.changed()},me.prototype.addCoordinate=function(C,R,Y){Qe(this.features,"addCoordinate",C,R,Y),this.changed()},me.prototype.removeCoordinate=function(C){Qe(this.features,"removeCoordinate",C),this.changed()},me.prototype.getFeatures=function(){return this.features},Te.prototype.setSelected=function(C){return this._ctx.store.setSelected(C)},Te.prototype.setSelectedCoordinates=function(C){var R=this;this._ctx.store.setSelectedCoordinates(C),C.reduce(function(Y,gt){return Y[gt.feature_id]===void 0&&(Y[gt.feature_id]=!0,R._ctx.store.get(gt.feature_id).changed()),Y},{})},Te.prototype.getSelected=function(){return this._ctx.store.getSelected()},Te.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Te.prototype.isSelected=function(C){return this._ctx.store.isSelected(C)},Te.prototype.getFeature=function(C){return this._ctx.store.get(C)},Te.prototype.select=function(C){return this._ctx.store.select(C)},Te.prototype.deselect=function(C){return this._ctx.store.deselect(C)},Te.prototype.deleteFeature=function(C,R){return R===void 0&&(R={}),this._ctx.store.delete(C,R)},Te.prototype.addFeature=function(C){return this._ctx.store.add(C)},Te.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Te.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Te.prototype.setActionableState=function(C){C===void 0&&(C={});var R={trash:C.trash||!1,combineFeatures:C.combineFeatures||!1,uncombineFeatures:C.uncombineFeatures||!1};return this._ctx.events.actionable(R)},Te.prototype.changeMode=function(C,R,Y){return R===void 0&&(R={}),Y===void 0&&(Y={}),this._ctx.events.changeMode(C,R,Y)},Te.prototype.updateUIClasses=function(C){return this._ctx.ui.queueMapClasses(C)},Te.prototype.activateUIButton=function(C){return this._ctx.ui.setActiveButton(C)},Te.prototype.featuresAt=function(C,R,Y){if(Y===void 0&&(Y="click"),Y!=="click"&&Y!=="touch")throw new Error("invalid buffer type");return de[Y](C,R,this._ctx)},Te.prototype.newFeature=function(C){var R=C.geometry.type;return R===H.POINT?new Pi(this._ctx,C):R===H.LINE_STRING?new ci(this._ctx,C):R===H.POLYGON?new Ai(this._ctx,C):new me(this._ctx,C)},Te.prototype.isInstanceOf=function(C,R){if(C===H.POINT)return R instanceof Pi;if(C===H.LINE_STRING)return R instanceof ci;if(C===H.POLYGON)return R instanceof Ai;if(C==="MultiFeature")return R instanceof me;throw new Error("Unknown feature class: "+C)},Te.prototype.doRender=function(C){return this._ctx.store.featureChanged(C)},Te.prototype.onSetup=function(){},Te.prototype.onDrag=function(){},Te.prototype.onClick=function(){},Te.prototype.onMouseMove=function(){},Te.prototype.onMouseDown=function(){},Te.prototype.onMouseUp=function(){},Te.prototype.onMouseOut=function(){},Te.prototype.onKeyUp=function(){},Te.prototype.onKeyDown=function(){},Te.prototype.onTouchStart=function(){},Te.prototype.onTouchMove=function(){},Te.prototype.onTouchEnd=function(){},Te.prototype.onTap=function(){},Te.prototype.onStop=function(){},Te.prototype.onTrash=function(){},Te.prototype.onCombineFeature=function(){},Te.prototype.onUncombineFeature=function(){},Te.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var wi={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Li=Object.keys(wi);function ut(C){var R=Object.keys(C);return function(Y,gt){gt===void 0&&(gt={});var kt={},Pt=R.reduce(function(Ht,ke){return Ht[ke]=C[ke],Ht},new Te(Y));return{start:function(){var Ht=this;kt=Pt.onSetup(gt),Li.forEach(function(ke){var Ne,nn=wi[ke],sn=function(){return!1};C[nn]&&(sn=function(){return!0}),Ht.on(ke,sn,(Ne=nn,function(qe){return Pt[Ne](kt,qe)}))})},stop:function(){Pt.onStop(kt)},trash:function(){Pt.onTrash(kt)},combineFeatures:function(){Pt.onCombineFeatures(kt)},uncombineFeatures:function(){Pt.onUncombineFeatures(kt)},render:function(Ht,ke){Pt.toDisplayFeatures(kt,Ht,ke)}}}}function At(C){return[].concat(C).filter(function(R){return R!==void 0})}function Jt(){var C=this;if(!(C.ctx.map&&C.ctx.map.getSource(P.HOT)!==void 0))return Ne();var R=C.ctx.events.currentModeName();C.ctx.ui.queueMapClasses({mode:R});var Y=[],gt=[];C.isDirty?gt=C.getAllIds():(Y=C.getChangedIds().filter(function(nn){return C.get(nn)!==void 0}),gt=C.sources.hot.filter(function(nn){return nn.properties.id&&Y.indexOf(nn.properties.id)===-1&&C.get(nn.properties.id)!==void 0}).map(function(nn){return nn.properties.id})),C.sources.hot=[];var kt=C.sources.cold.length;C.sources.cold=C.isDirty?[]:C.sources.cold.filter(function(nn){var sn=nn.properties.id||nn.properties.parent;return Y.indexOf(sn)===-1});var Pt=kt!==C.sources.cold.length||gt.length>0;function Ht(nn,sn){var qe=C.get(nn).internal(R);C.ctx.events.currentModeRender(qe,function(ti){C.sources[sn].push(ti)})}if(Y.forEach(function(nn){return Ht(nn,"hot")}),gt.forEach(function(nn){return Ht(nn,"cold")}),Pt&&C.ctx.map.getSource(P.COLD).setData({type:H.FEATURE_COLLECTION,features:C.sources.cold}),C.ctx.map.getSource(P.HOT).setData({type:H.FEATURE_COLLECTION,features:C.sources.hot}),C._emitSelectionChange&&(C.ctx.map.fire(st.SELECTION_CHANGE,{features:C.getSelected().map(function(nn){return nn.toGeoJSON()}),points:C.getSelectedCoordinates().map(function(nn){return{type:H.FEATURE,properties:{},geometry:{type:H.POINT,coordinates:nn.coordinates}}})}),C._emitSelectionChange=!1),C._deletedFeaturesToEmit.length){var ke=C._deletedFeaturesToEmit.map(function(nn){return nn.toGeoJSON()});C._deletedFeaturesToEmit=[],C.ctx.map.fire(st.DELETE,{features:ke})}function Ne(){C.isDirty=!1,C.clearChangedIds()}Ne(),C.ctx.map.fire(st.RENDER,{})}function le(C){var R,Y=this;this._features={},this._featureIds=new Vt,this._selectedFeatureIds=new Vt,this._selectedCoordinates=[],this._changedFeatureIds=new Vt,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=C,this.sources={hot:[],cold:[]},this.render=function(){R||(R=requestAnimationFrame(function(){R=null,Jt.call(Y)}))},this.isDirty=!1}function pe(C,R){var Y=C._selectedCoordinates.filter(function(gt){return C._selectedFeatureIds.has(gt.feature_id)});C._selectedCoordinates.length===Y.length||R.silent||(C._emitSelectionChange=!0),C._selectedCoordinates=Y}le.prototype.createRenderBatch=function(){var C=this,R=this.render,Y=0;return this.render=function(){Y++},function(){C.render=R,Y>0&&C.render()}},le.prototype.setDirty=function(){return this.isDirty=!0,this},le.prototype.featureChanged=function(C){return this._changedFeatureIds.add(C),this},le.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},le.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},le.prototype.getAllIds=function(){return this._featureIds.values()},le.prototype.add=function(C){return this.featureChanged(C.id),this._features[C.id]=C,this._featureIds.add(C.id),this},le.prototype.delete=function(C,R){var Y=this;return R===void 0&&(R={}),At(C).forEach(function(gt){Y._featureIds.has(gt)&&(Y._featureIds.delete(gt),Y._selectedFeatureIds.delete(gt),R.silent||Y._deletedFeaturesToEmit.indexOf(Y._features[gt])===-1&&Y._deletedFeaturesToEmit.push(Y._features[gt]),delete Y._features[gt],Y.isDirty=!0)}),pe(this,R),this},le.prototype.get=function(C){return this._features[C]},le.prototype.getAll=function(){var C=this;return Object.keys(this._features).map(function(R){return C._features[R]})},le.prototype.select=function(C,R){var Y=this;return R===void 0&&(R={}),At(C).forEach(function(gt){Y._selectedFeatureIds.has(gt)||(Y._selectedFeatureIds.add(gt),Y._changedFeatureIds.add(gt),R.silent||(Y._emitSelectionChange=!0))}),this},le.prototype.deselect=function(C,R){var Y=this;return R===void 0&&(R={}),At(C).forEach(function(gt){Y._selectedFeatureIds.has(gt)&&(Y._selectedFeatureIds.delete(gt),Y._changedFeatureIds.add(gt),R.silent||(Y._emitSelectionChange=!0))}),pe(this,R),this},le.prototype.clearSelected=function(C){return C===void 0&&(C={}),this.deselect(this._selectedFeatureIds.values(),{silent:C.silent}),this},le.prototype.setSelected=function(C,R){var Y=this;return R===void 0&&(R={}),C=At(C),this.deselect(this._selectedFeatureIds.values().filter(function(gt){return C.indexOf(gt)===-1}),{silent:R.silent}),this.select(C.filter(function(gt){return!Y._selectedFeatureIds.has(gt)}),{silent:R.silent}),this},le.prototype.setSelectedCoordinates=function(C){return this._selectedCoordinates=C,this._emitSelectionChange=!0,this},le.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},le.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},le.prototype.getSelected=function(){var C=this;return this._selectedFeatureIds.values().map(function(R){return C.get(R)})},le.prototype.getSelectedCoordinates=function(){var C=this;return this._selectedCoordinates.map(function(R){return{coordinates:C.get(R.feature_id).getCoordinate(R.coord_path)}})},le.prototype.isSelected=function(C){return this._selectedFeatureIds.has(C)},le.prototype.setFeatureProperty=function(C,R,Y){this.get(C).setProperty(R,Y),this.featureChanged(C)},le.prototype.storeMapConfig=function(){var C=this;Nt.forEach(function(R){C.ctx.map[R]&&(C._mapInitialConfig[R]=C.ctx.map[R].isEnabled())})},le.prototype.restoreMapConfig=function(){var C=this;Object.keys(this._mapInitialConfig).forEach(function(R){C._mapInitialConfig[R]?C.ctx.map[R].enable():C.ctx.map[R].disable()})},le.prototype.getInitialConfigValue=function(C){return this._mapInitialConfig[C]===void 0||this._mapInitialConfig[C]};var Be=function(){for(var C=arguments,R={},Y=0;Y<arguments.length;Y++){var gt=C[Y];for(var kt in gt)un.call(gt,kt)&&(R[kt]=gt[kt])}return R},un=Object.prototype.hasOwnProperty,we=a(Be),De=["mode","feature","mouse"];function Se(C){var R=null,Y=null,gt={onRemove:function(){return C.map.off("load",gt.connect),clearInterval(Y),gt.removeLayers(),C.store.restoreMapConfig(),C.ui.removeButtons(),C.events.removeEventListeners(),C.ui.clearMapClasses(),C.boxZoomInitial&&C.map.boxZoom.enable(),C.map=null,C.container=null,C.store=null,R&&R.parentNode&&R.parentNode.removeChild(R),R=null,this},connect:function(){C.map.off("load",gt.connect),clearInterval(Y),gt.addLayers(),C.store.storeMapConfig(),C.events.addEventListeners()},onAdd:function(kt){var Pt=kt.fire;return kt.fire=function(Ht,ke){var Ne=arguments;return Pt.length===1&&arguments.length!==1&&(Ne=[we({},{type:Ht},ke)]),Pt.apply(kt,Ne)},C.map=kt,C.events=function(Ht){var ke=Object.keys(Ht.options.modes).reduce(function(xe,wn){return xe[wn]=ut(Ht.options.modes[wn]),xe},{}),Ne={},nn={},sn={},qe=null,ti=null;sn.drag=function(xe,wn){wn({point:xe.point,time:new Date().getTime()})?(Ht.ui.queueMapClasses({mouse:O.DRAG}),ti.drag(xe)):xe.originalEvent.stopPropagation()},sn.mousedrag=function(xe){sn.drag(xe,function(wn){return!Ue(Ne,wn)})},sn.touchdrag=function(xe){sn.drag(xe,function(wn){return!ki(nn,wn)})},sn.mousemove=function(xe){if((xe.originalEvent.buttons!==void 0?xe.originalEvent.buttons:xe.originalEvent.which)===1)return sn.mousedrag(xe);var wn=_e(xe,Ht);xe.featureTarget=wn,ti.mousemove(xe)},sn.mousedown=function(xe){Ne={time:new Date().getTime(),point:xe.point};var wn=_e(xe,Ht);xe.featureTarget=wn,ti.mousedown(xe)},sn.mouseup=function(xe){var wn=_e(xe,Ht);xe.featureTarget=wn,Ue(Ne,{point:xe.point,time:new Date().getTime()})?ti.click(xe):ti.mouseup(xe)},sn.mouseout=function(xe){ti.mouseout(xe)},sn.touchstart=function(xe){if(Ht.options.touchEnabled){nn={time:new Date().getTime(),point:xe.point};var wn=de.touch(xe,null,Ht)[0];xe.featureTarget=wn,ti.touchstart(xe)}},sn.touchmove=function(xe){if(Ht.options.touchEnabled)return ti.touchmove(xe),sn.touchdrag(xe)},sn.touchend=function(xe){if(xe.originalEvent.preventDefault(),Ht.options.touchEnabled){var wn=de.touch(xe,null,Ht)[0];xe.featureTarget=wn,ki(nn,{time:new Date().getTime(),point:xe.point})?ti.tap(xe):ti.touchend(xe)}};var Nr=function(xe){return!(xe===8||xe===46||xe>=48&&xe<=57)};function si(xe,wn,ar){ar===void 0&&(ar={}),ti.stop();var no=ke[xe];if(no===void 0)throw new Error(xe+" is not valid");qe=xe;var Qi=no(Ht,wn);ti=i(Qi,Ht),ar.silent||Ht.map.fire(st.MODE_CHANGE,{mode:xe}),Ht.store.setDirty(),Ht.store.render()}sn.keydown=function(xe){(xe.srcElement||xe.target).classList.contains("mapboxgl-canvas")&&(xe.keyCode!==8&&xe.keyCode!==46||!Ht.options.controls.trash?Nr(xe.keyCode)?ti.keydown(xe):xe.keyCode===49&&Ht.options.controls.point?si(X.DRAW_POINT):xe.keyCode===50&&Ht.options.controls.line_string?si(X.DRAW_LINE_STRING):xe.keyCode===51&&Ht.options.controls.polygon&&si(X.DRAW_POLYGON):(xe.preventDefault(),ti.trash()))},sn.keyup=function(xe){Nr(xe.keyCode)&&ti.keyup(xe)},sn.zoomend=function(){Ht.store.changeZoom()},sn.data=function(xe){if(xe.dataType==="style"){var wn=Ht.setup,ar=Ht.map,no=Ht.options,Qi=Ht.store;no.styles.some(function(Cs){return ar.getLayer(Cs.id)})||(wn.addLayers(),Qi.setDirty(),Qi.render())}};var wr={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){qe=Ht.options.defaultMode,ti=i(ke[qe](Ht),Ht)},changeMode:si,actionable:function(xe){var wn=!1;Object.keys(xe).forEach(function(ar){if(wr[ar]===void 0)throw new Error("Invalid action type");wr[ar]!==xe[ar]&&(wn=!0),wr[ar]=xe[ar]}),wn&&Ht.map.fire(st.ACTIONABLE,{actions:wr})},currentModeName:function(){return qe},currentModeRender:function(xe,wn){return ti.render(xe,wn)},fire:function(xe,wn){sn[xe]&&sn[xe](wn)},addEventListeners:function(){Ht.map.on("mousemove",sn.mousemove),Ht.map.on("mousedown",sn.mousedown),Ht.map.on("mouseup",sn.mouseup),Ht.map.on("data",sn.data),Ht.map.on("touchmove",sn.touchmove),Ht.map.on("touchstart",sn.touchstart),Ht.map.on("touchend",sn.touchend),Ht.container.addEventListener("mouseout",sn.mouseout),Ht.options.keybindings&&(Ht.container.addEventListener("keydown",sn.keydown),Ht.container.addEventListener("keyup",sn.keyup))},removeEventListeners:function(){Ht.map.off("mousemove",sn.mousemove),Ht.map.off("mousedown",sn.mousedown),Ht.map.off("mouseup",sn.mouseup),Ht.map.off("data",sn.data),Ht.map.off("touchmove",sn.touchmove),Ht.map.off("touchstart",sn.touchstart),Ht.map.off("touchend",sn.touchend),Ht.container.removeEventListener("mouseout",sn.mouseout),Ht.options.keybindings&&(Ht.container.removeEventListener("keydown",sn.keydown),Ht.container.removeEventListener("keyup",sn.keyup))},trash:function(xe){ti.trash(xe)},combineFeatures:function(){ti.combineFeatures()},uncombineFeatures:function(){ti.uncombineFeatures()},getMode:function(){return qe}}}(C),C.ui=function(Ht){var ke={},Ne=null,nn={mode:null,feature:null,mouse:null},sn={mode:null,feature:null,mouse:null};function qe(xe){sn=we(sn,xe)}function ti(){var xe,wn;if(Ht.container){var ar=[],no=[];De.forEach(function(Qi){sn[Qi]!==nn[Qi]&&(ar.push(Qi+"-"+nn[Qi]),sn[Qi]!==null&&no.push(Qi+"-"+sn[Qi]))}),ar.length>0&&(xe=Ht.container.classList).remove.apply(xe,ar),no.length>0&&(wn=Ht.container.classList).add.apply(wn,no),nn=we(nn,sn)}}function Nr(xe,wn){wn===void 0&&(wn={});var ar=document.createElement("button");return ar.className=k.CONTROL_BUTTON+" "+wn.className,ar.setAttribute("title",wn.title),wn.container.appendChild(ar),ar.addEventListener("click",function(no){if(no.preventDefault(),no.stopPropagation(),no.target===Ne)return si(),void wn.onDeactivate();wr(xe),wn.onActivate()},!0),ar}function si(){Ne&&(Ne.classList.remove(k.ACTIVE_BUTTON),Ne=null)}function wr(xe){si();var wn=ke[xe];wn&&wn&&xe!=="trash"&&(wn.classList.add(k.ACTIVE_BUTTON),Ne=wn)}return{setActiveButton:wr,queueMapClasses:qe,updateMapClasses:ti,clearMapClasses:function(){qe({mode:null,feature:null,mouse:null}),ti()},addButtons:function(){var xe=Ht.options.controls,wn=document.createElement("div");return wn.className=k.CONTROL_GROUP+" "+k.CONTROL_BASE,xe&&(xe[G.LINE]&&(ke[G.LINE]=Nr(G.LINE,{container:wn,className:k.CONTROL_BUTTON_LINE,title:"LineString tool "+(Ht.options.keybindings?"(l)":""),onActivate:function(){return Ht.events.changeMode(X.DRAW_LINE_STRING)},onDeactivate:function(){return Ht.events.trash()}})),xe[G.POLYGON]&&(ke[G.POLYGON]=Nr(G.POLYGON,{container:wn,className:k.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(Ht.options.keybindings?"(p)":""),onActivate:function(){return Ht.events.changeMode(X.DRAW_POLYGON)},onDeactivate:function(){return Ht.events.trash()}})),xe[G.POINT]&&(ke[G.POINT]=Nr(G.POINT,{container:wn,className:k.CONTROL_BUTTON_POINT,title:"Marker tool "+(Ht.options.keybindings?"(m)":""),onActivate:function(){return Ht.events.changeMode(X.DRAW_POINT)},onDeactivate:function(){return Ht.events.trash()}})),xe.trash&&(ke.trash=Nr("trash",{container:wn,className:k.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){Ht.events.trash()}})),xe.combine_features&&(ke.combine_features=Nr("combineFeatures",{container:wn,className:k.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){Ht.events.combineFeatures()}})),xe.uncombine_features&&(ke.uncombine_features=Nr("uncombineFeatures",{container:wn,className:k.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){Ht.events.uncombineFeatures()}}))),wn},removeButtons:function(){Object.keys(ke).forEach(function(xe){var wn=ke[xe];wn.parentNode&&wn.parentNode.removeChild(wn),delete ke[xe]})}}}(C),C.container=kt.getContainer(),C.store=new le(C),R=C.ui.addButtons(),C.options.boxSelect&&(C.boxZoomInitial=kt.boxZoom.isEnabled(),kt.boxZoom.disable(),kt.dragPan.disable(),kt.dragPan.enable()),kt.loaded()?gt.connect():(kt.on("load",gt.connect),Y=setInterval(function(){kt.loaded()&&gt.connect()},16)),C.events.start(),R},addLayers:function(){C.map.addSource(P.COLD,{data:{type:H.FEATURE_COLLECTION,features:[]},type:"geojson"}),C.map.addSource(P.HOT,{data:{type:H.FEATURE_COLLECTION,features:[]},type:"geojson"}),C.options.styles.forEach(function(kt){C.map.addLayer(kt)}),C.store.setDirty(!0),C.store.render()},removeLayers:function(){C.options.styles.forEach(function(kt){C.map.getLayer(kt.id)&&C.map.removeLayer(kt.id)}),C.map.getSource(P.COLD)&&C.map.removeSource(P.COLD),C.map.getSource(P.HOT)&&C.map.removeSource(P.HOT)}};return C.setup=gt,gt}var en=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Cn(C){return function(R){var Y=R.featureTarget;return!!Y&&!!Y.properties&&Y.properties.meta===C}}function In(C){return!!C.originalEvent&&!!C.originalEvent.shiftKey&&C.originalEvent.button===0}function Pn(C){return!!C.featureTarget&&!!C.featureTarget.properties&&C.featureTarget.properties.active===xt.ACTIVE&&C.featureTarget.properties.meta===et.FEATURE}function Jn(C){return!!C.featureTarget&&!!C.featureTarget.properties&&C.featureTarget.properties.active===xt.INACTIVE&&C.featureTarget.properties.meta===et.FEATURE}function Di(C){return C.featureTarget===void 0}function Ci(C){return!!C.featureTarget&&!!C.featureTarget.properties&&C.featureTarget.properties.meta===et.FEATURE}function or(C){var R=C.featureTarget;return!!R&&!!R.properties&&R.properties.meta===et.VERTEX}function Gr(C){return!!C.originalEvent&&C.originalEvent.shiftKey===!0}function Yo(C){return C.keyCode===27}function va(C){return C.keyCode===13}var Ra=Object.freeze({__proto__:null,isOfMetaType:Cn,isShiftMousedown:In,isActiveFeature:Pn,isInactiveFeature:Jn,noTarget:Di,isFeature:Ci,isVertex:or,isShiftDown:Gr,isEscapeKey:Yo,isEnterKey:va,isTrue:function(){return!0}}),qa=Ar;function Ar(C,R){this.x=C,this.y=R}Ar.prototype={clone:function(){return new Ar(this.x,this.y)},add:function(C){return this.clone()._add(C)},sub:function(C){return this.clone()._sub(C)},multByPoint:function(C){return this.clone()._multByPoint(C)},divByPoint:function(C){return this.clone()._divByPoint(C)},mult:function(C){return this.clone()._mult(C)},div:function(C){return this.clone()._div(C)},rotate:function(C){return this.clone()._rotate(C)},rotateAround:function(C,R){return this.clone()._rotateAround(C,R)},matMult:function(C){return this.clone()._matMult(C)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(C){return this.x===C.x&&this.y===C.y},dist:function(C){return Math.sqrt(this.distSqr(C))},distSqr:function(C){var R=C.x-this.x,Y=C.y-this.y;return R*R+Y*Y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(C){return Math.atan2(this.y-C.y,this.x-C.x)},angleWith:function(C){return this.angleWithSep(C.x,C.y)},angleWithSep:function(C,R){return Math.atan2(this.x*R-this.y*C,this.x*C+this.y*R)},_matMult:function(C){var R=C[0]*this.x+C[1]*this.y,Y=C[2]*this.x+C[3]*this.y;return this.x=R,this.y=Y,this},_add:function(C){return this.x+=C.x,this.y+=C.y,this},_sub:function(C){return this.x-=C.x,this.y-=C.y,this},_mult:function(C){return this.x*=C,this.y*=C,this},_div:function(C){return this.x/=C,this.y/=C,this},_multByPoint:function(C){return this.x*=C.x,this.y*=C.y,this},_divByPoint:function(C){return this.x/=C.x,this.y/=C.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var C=this.y;return this.y=this.x,this.x=-C,this},_rotate:function(C){var R=Math.cos(C),Y=Math.sin(C),gt=R*this.x-Y*this.y,kt=Y*this.x+R*this.y;return this.x=gt,this.y=kt,this},_rotateAround:function(C,R){var Y=Math.cos(C),gt=Math.sin(C),kt=R.x+Y*(this.x-R.x)-gt*(this.y-R.y),Pt=R.y+gt*(this.x-R.x)+Y*(this.y-R.y);return this.x=kt,this.y=Pt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ar.convert=function(C){return C instanceof Ar?C:Array.isArray(C)?new Ar(C[0],C[1]):C};var So=a(qa);function qs(C,R){var Y=R.getBoundingClientRect();return new So(C.clientX-Y.left-(R.clientLeft||0),C.clientY-Y.top-(R.clientTop||0))}function Ws(C,R,Y,gt){return{type:H.FEATURE,properties:{meta:et.VERTEX,parent:C,coord_path:Y,active:gt?xt.ACTIVE:xt.INACTIVE},geometry:{type:H.POINT,coordinates:R}}}function gl(C,R,Y){var gt=R.geometry.coordinates,kt=Y.geometry.coordinates;if(gt[1]>85||gt[1]<It||kt[1]>85||kt[1]<It)return null;var Pt={lng:(gt[0]+kt[0])/2,lat:(gt[1]+kt[1])/2};return{type:H.FEATURE,properties:{meta:et.MIDPOINT,parent:C,lng:Pt.lng,lat:Pt.lat,coord_path:Y.properties.coord_path},geometry:{type:H.POINT,coordinates:[Pt.lng,Pt.lat]}}}function za(C,R,Y){R===void 0&&(R={}),Y===void 0&&(Y=null);var gt,kt=C.geometry,Pt=kt.type,Ht=kt.coordinates,ke=C.properties&&C.properties.id,Ne=[];function nn(qe,ti){var Nr="",si=null;qe.forEach(function(wr,xe){var wn=ti!=null?ti+"."+xe:String(xe),ar=Ws(ke,wr,wn,sn(wn));if(R.midpoints&&si){var no=gl(ke,si,ar);no&&Ne.push(no)}si=ar;var Qi=JSON.stringify(wr);Nr!==Qi&&Ne.push(ar),xe===0&&(Nr=Qi)})}function sn(qe){return!!R.selectedPaths&&R.selectedPaths.indexOf(qe)!==-1}return Pt===H.POINT?Ne.push(Ws(ke,Ht,Y,sn(Y))):Pt===H.POLYGON?Ht.forEach(function(qe,ti){nn(qe,Y!==null?Y+"."+ti:String(ti))}):Pt===H.LINE_STRING?nn(Ht,Y):Pt.indexOf(H.MULTI_PREFIX)===0&&(gt=Pt.replace(H.MULTI_PREFIX,""),Ht.forEach(function(qe,ti){var Nr={type:H.FEATURE,properties:C.properties,geometry:{type:gt,coordinates:qe}};Ne=Ne.concat(za(Nr,R,ti))})),Ne}var lo={enable:function(C){setTimeout(function(){C.map&&C.map.doubleClickZoom&&C._ctx&&C._ctx.store&&C._ctx.store.getInitialConfigValue&&C._ctx.store.getInitialConfigValue("doubleClickZoom")&&C.map.doubleClickZoom.enable()},0)},disable:function(C){setTimeout(function(){C.map&&C.map.doubleClickZoom&&C.map.doubleClickZoom.disable()},0)}},Zs={exports:{}},bu=function(C){if(!C||!C.type)return null;var R=qr[C.type];if(!R)return null;if(R==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:C}]};if(R==="feature")return{type:"FeatureCollection",features:[C]};if(R==="featurecollection")return C},qr={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},U=a(bu),W=Object.freeze({__proto__:null,default:function C(R){switch(R&&R.type||null){case"FeatureCollection":return R.features=R.features.reduce(function(Y,gt){return Y.concat(C(gt))},[]),R;case"Feature":return R.geometry?C(R.geometry).map(function(Y){var gt={type:"Feature",properties:JSON.parse(JSON.stringify(R.properties)),geometry:Y};return R.id!==void 0&&(gt.id=R.id),gt}):[R];case"MultiPoint":return R.coordinates.map(function(Y){return{type:"Point",coordinates:Y}});case"MultiPolygon":return R.coordinates.map(function(Y){return{type:"Polygon",coordinates:Y}});case"MultiLineString":return R.coordinates.map(function(Y){return{type:"LineString",coordinates:Y}});case"GeometryCollection":return R.geometries.map(C).reduce(function(Y,gt){return Y.concat(gt)},[]);case"Point":case"Polygon":case"LineString":return[R]}}}),Q=bu,at=c(W),dt=function(C){return function R(Y){return Array.isArray(Y)&&Y.length&&typeof Y[0]=="number"?[Y]:Y.reduce(function(gt,kt){return Array.isArray(kt)&&Array.isArray(kt[0])?gt.concat(R(kt)):(gt.push(kt),gt)},[])}(C)};at instanceof Function||(at=at.default);var Tt={exports:{}},Rt=Tt.exports=function(C){return new tt(C)};function tt(C){this.value=C}function yt(C,R,Y){var gt=[],kt=[],Pt=!0;return function Ht(ke){var Ne=Y?Zt(ke):ke,nn={},sn=!0,qe={node:Ne,node_:ke,path:[].concat(gt),parent:kt[kt.length-1],parents:kt,key:gt.slice(-1)[0],isRoot:gt.length===0,level:gt.length,circular:null,update:function(si,wr){qe.isRoot||(qe.parent.node[qe.key]=si),qe.node=si,wr&&(sn=!1)},delete:function(si){delete qe.parent.node[qe.key],si&&(sn=!1)},remove:function(si){re(qe.parent.node)?qe.parent.node.splice(qe.key,1):delete qe.parent.node[qe.key],si&&(sn=!1)},keys:null,before:function(si){nn.before=si},after:function(si){nn.after=si},pre:function(si){nn.pre=si},post:function(si){nn.post=si},stop:function(){Pt=!1},block:function(){sn=!1}};if(!Pt)return qe;function ti(){if(typeof qe.node=="object"&&qe.node!==null){qe.keys&&qe.node_===qe.node||(qe.keys=ge(qe.node)),qe.isLeaf=qe.keys.length==0;for(var si=0;si<kt.length;si++)if(kt[si].node_===ke){qe.circular=kt[si];break}}else qe.isLeaf=!0,qe.keys=null;qe.notLeaf=!qe.isLeaf,qe.notRoot=!qe.isRoot}ti();var Nr=R.call(qe,qe.node);return Nr!==void 0&&qe.update&&qe.update(Nr),nn.before&&nn.before.call(qe,qe.node),sn&&(typeof qe.node!="object"||qe.node===null||qe.circular||(kt.push(qe),ti(),ye(qe.keys,function(si,wr){gt.push(si),nn.pre&&nn.pre.call(qe,qe.node[si],si);var xe=Ht(qe.node[si]);Y&&ln.call(qe.node,si)&&(qe.node[si]=xe.node),xe.isLast=wr==qe.keys.length-1,xe.isFirst=wr==0,nn.post&&nn.post.call(qe,xe),gt.pop()}),kt.pop()),nn.after&&nn.after.call(qe,qe.node)),qe}(C).node}function Zt(C){if(typeof C=="object"&&C!==null){var R;if(re(C))R=[];else if(be(C)==="[object Date]")R=new Date(C.getTime?C.getTime():C);else if(function(kt){return be(kt)==="[object RegExp]"}(C))R=new RegExp(C);else if(function(kt){return be(kt)==="[object Error]"}(C))R={message:C.message};else if(function(kt){return be(kt)==="[object Boolean]"}(C))R=new Boolean(C);else if(function(kt){return be(kt)==="[object Number]"}(C))R=new Number(C);else if(function(kt){return be(kt)==="[object String]"}(C))R=new String(C);else if(Object.create&&Object.getPrototypeOf)R=Object.create(Object.getPrototypeOf(C));else if(C.constructor===Object)R={};else{var Y=C.constructor&&C.constructor.prototype||C.__proto__||{},gt=function(){};gt.prototype=Y,R=new gt}return ye(ge(C),function(kt){R[kt]=C[kt]}),R}return C}tt.prototype.get=function(C){for(var R=this.value,Y=0;Y<C.length;Y++){var gt=C[Y];if(!R||!ln.call(R,gt)){R=void 0;break}R=R[gt]}return R},tt.prototype.has=function(C){for(var R=this.value,Y=0;Y<C.length;Y++){var gt=C[Y];if(!R||!ln.call(R,gt))return!1;R=R[gt]}return!0},tt.prototype.set=function(C,R){for(var Y=this.value,gt=0;gt<C.length-1;gt++){var kt=C[gt];ln.call(Y,kt)||(Y[kt]={}),Y=Y[kt]}return Y[C[gt]]=R,R},tt.prototype.map=function(C){return yt(this.value,C,!0)},tt.prototype.forEach=function(C){return this.value=yt(this.value,C,!1),this.value},tt.prototype.reduce=function(C,R){var Y=arguments.length===1,gt=Y?this.value:R;return this.forEach(function(kt){this.isRoot&&Y||(gt=C.call(this,gt,kt))}),gt},tt.prototype.paths=function(){var C=[];return this.forEach(function(R){C.push(this.path)}),C},tt.prototype.nodes=function(){var C=[];return this.forEach(function(R){C.push(this.node)}),C},tt.prototype.clone=function(){var C=[],R=[];return function Y(gt){for(var kt=0;kt<C.length;kt++)if(C[kt]===gt)return R[kt];if(typeof gt=="object"&&gt!==null){var Pt=Zt(gt);return C.push(gt),R.push(Pt),ye(ge(gt),function(Ht){Pt[Ht]=Y(gt[Ht])}),C.pop(),R.pop(),Pt}return gt}(this.value)};var ge=Object.keys||function(C){var R=[];for(var Y in C)R.push(Y);return R};function be(C){return Object.prototype.toString.call(C)}var re=Array.isArray||function(C){return Object.prototype.toString.call(C)==="[object Array]"},ye=function(C,R){if(C.forEach)return C.forEach(R);for(var Y=0;Y<C.length;Y++)R(C[Y],Y,C)};ye(ge(tt.prototype),function(C){Rt[C]=function(R){var Y=[].slice.call(arguments,1),gt=new tt(R);return gt[C].apply(gt,Y)}});var ln=Object.hasOwnProperty||function(C,R){return R in C},an=Tt.exports,ae=Le;function Le(C){if(!(this instanceof Le))return new Le(C);this._bbox=C||[1/0,1/0,-1/0,-1/0],this._valid=!!C}Le.prototype.include=function(C){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],C[0]),this._bbox[1]=Math.min(this._bbox[1],C[1]),this._bbox[2]=Math.max(this._bbox[2],C[0]),this._bbox[3]=Math.max(this._bbox[3],C[1]),this},Le.prototype.equals=function(C){var R;return R=C instanceof Le?C.bbox():C,this._bbox[0]==R[0]&&this._bbox[1]==R[1]&&this._bbox[2]==R[2]&&this._bbox[3]==R[3]},Le.prototype.center=function(C){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Le.prototype.union=function(C){var R;return this._valid=!0,R=C instanceof Le?C.bbox():C,this._bbox[0]=Math.min(this._bbox[0],R[0]),this._bbox[1]=Math.min(this._bbox[1],R[1]),this._bbox[2]=Math.max(this._bbox[2],R[2]),this._bbox[3]=Math.max(this._bbox[3],R[3]),this},Le.prototype.bbox=function(){return this._valid?this._bbox:null},Le.prototype.contains=function(C){if(!C)return this._fastContains();if(!this._valid)return null;var R=C[0],Y=C[1];return this._bbox[0]<=R&&this._bbox[1]<=Y&&this._bbox[2]>=R&&this._bbox[3]>=Y},Le.prototype.intersect=function(C){return this._valid?(R=C instanceof Le?C.bbox():C,!(this._bbox[0]>R[2]||this._bbox[2]<R[0]||this._bbox[3]<R[1]||this._bbox[1]>R[3])):null;var R},Le.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var C="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",C)},Le.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Ve=function(C){if(!C)return[];var R=at(Q(C)),Y=[];return R.features.forEach(function(gt){gt.geometry&&(Y=Y.concat(dt(gt.geometry.coordinates)))}),Y},je=an,ii=ae,Ye={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},xi=Object.keys(Ye);function Ui(C){for(var R=ii(),Y=Ve(C),gt=0;gt<Y.length;gt++)R.include(Y[gt]);return R}Zs.exports=function(C){return Ui(C).bbox()},Zs.exports.polygon=function(C){return Ui(C).polygon()},Zs.exports.bboxify=function(C){return je(C).map(function(R){R&&xi.some(function(Y){return!!R[Y]&&Ye[Y].indexOf(R.type)!==-1})&&(R.bbox=Ui(R).bbox(),this.update(R))})};var hi=a(Zs.exports),gi=-90;function vi(C,R){var Y=gi,gt=90,kt=gi,Pt=90,Ht=270,ke=-270;C.forEach(function(nn){var sn=hi(nn),qe=sn[1],ti=sn[3],Nr=sn[0],si=sn[2];qe>Y&&(Y=qe),ti<gt&&(gt=ti),ti>kt&&(kt=ti),qe<Pt&&(Pt=qe),Nr<Ht&&(Ht=Nr),si>ke&&(ke=si)});var Ne=R;return Y+Ne.lat>85&&(Ne.lat=85-Y),kt+Ne.lat>90&&(Ne.lat=90-kt),gt+Ne.lat<-85&&(Ne.lat=-85-gt),Pt+Ne.lat<gi&&(Ne.lat=gi-Pt),Ht+Ne.lng<=-270&&(Ne.lng+=360*Math.ceil(Math.abs(Ne.lng)/360)),ke+Ne.lng>=270&&(Ne.lng-=360*Math.ceil(Math.abs(Ne.lng)/360)),Ne}function To(C,R){var Y=vi(C.map(function(gt){return gt.toGeoJSON()}),R);C.forEach(function(gt){var kt,Pt=gt.getCoordinates(),Ht=function(Ne){var nn={lng:Ne[0]+Y.lng,lat:Ne[1]+Y.lat};return[nn.lng,nn.lat]},ke=function(Ne){return Ne.map(function(nn){return Ht(nn)})};gt.type===H.POINT?kt=Ht(Pt):gt.type===H.LINE_STRING||gt.type===H.MULTI_POINT?kt=Pt.map(Ht):gt.type===H.POLYGON||gt.type===H.MULTI_LINE_STRING?kt=Pt.map(ke):gt.type===H.MULTI_POLYGON&&(kt=Pt.map(function(Ne){return Ne.map(function(nn){return ke(nn)})})),gt.incomingCoords(kt)})}var qn={onSetup:function(C){var R=this,Y={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:C.featureIds||[]};return this.setSelected(Y.initiallySelectedFeatureIds.filter(function(gt){return R.getFeature(gt)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),Y},fireUpdate:function(){this.map.fire(st.UPDATE,{action:K.MOVE,features:this.getSelected().map(function(C){return C.toGeoJSON()})})},fireActionable:function(){var C=this,R=this.getSelected(),Y=R.filter(function(ke){return C.isInstanceOf("MultiFeature",ke)}),gt=!1;if(R.length>1){gt=!0;var kt=R[0].type.replace("Multi","");R.forEach(function(ke){ke.type.replace("Multi","")!==kt&&(gt=!1)})}var Pt=Y.length>0,Ht=R.length>0;this.setActionableState({combineFeatures:gt,uncombineFeatures:Pt,trash:Ht})},getUniqueIds:function(C){return C.length?C.map(function(R){return R.properties.id}).filter(function(R){return R!==void 0}).reduce(function(R,Y){return R.add(Y),R},new Vt).values():[]},stopExtendedInteractions:function(C){C.boxSelectElement&&(C.boxSelectElement.parentNode&&C.boxSelectElement.parentNode.removeChild(C.boxSelectElement),C.boxSelectElement=null),this.map.dragPan.enable(),C.boxSelecting=!1,C.canBoxSelect=!1,C.dragMoving=!1,C.canDragMove=!1},onStop:function(){lo.enable(this)},onMouseMove:function(C,R){return Ci(R)&&C.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(C),!0},onMouseOut:function(C){return!C.dragMoving||this.fireUpdate()}};qn.onTap=qn.onClick=function(C,R){return Di(R)?this.clickAnywhere(C,R):Cn(et.VERTEX)(R)?this.clickOnVertex(C,R):Ci(R)?this.clickOnFeature(C,R):void 0},qn.clickAnywhere=function(C){var R=this,Y=this.getSelectedIds();Y.length&&(this.clearSelectedFeatures(),Y.forEach(function(gt){return R.doRender(gt)})),lo.enable(this),this.stopExtendedInteractions(C)},qn.clickOnVertex=function(C,R){this.changeMode(X.DIRECT_SELECT,{featureId:R.featureTarget.properties.parent,coordPath:R.featureTarget.properties.coord_path,startPos:R.lngLat}),this.updateUIClasses({mouse:O.MOVE})},qn.startOnActiveFeature=function(C,R){this.stopExtendedInteractions(C),this.map.dragPan.disable(),this.doRender(R.featureTarget.properties.id),C.canDragMove=!0,C.dragMoveLocation=R.lngLat},qn.clickOnFeature=function(C,R){var Y=this;lo.disable(this),this.stopExtendedInteractions(C);var gt=Gr(R),kt=this.getSelectedIds(),Pt=R.featureTarget.properties.id,Ht=this.isSelected(Pt);if(!gt&&Ht&&this.getFeature(Pt).type!==H.POINT)return this.changeMode(X.DIRECT_SELECT,{featureId:Pt});Ht&&gt?(this.deselect(Pt),this.updateUIClasses({mouse:O.POINTER}),kt.length===1&&lo.enable(this)):!Ht&&gt?(this.select(Pt),this.updateUIClasses({mouse:O.MOVE})):Ht||gt||(kt.forEach(function(ke){return Y.doRender(ke)}),this.setSelected(Pt),this.updateUIClasses({mouse:O.MOVE})),this.doRender(Pt)},qn.onMouseDown=function(C,R){return Pn(R)?this.startOnActiveFeature(C,R):this.drawConfig.boxSelect&&In(R)?this.startBoxSelect(C,R):void 0},qn.startBoxSelect=function(C,R){this.stopExtendedInteractions(C),this.map.dragPan.disable(),C.boxSelectStartLocation=qs(R.originalEvent,this.map.getContainer()),C.canBoxSelect=!0},qn.onTouchStart=function(C,R){if(Pn(R))return this.startOnActiveFeature(C,R)},qn.onDrag=function(C,R){return C.canDragMove?this.dragMove(C,R):this.drawConfig.boxSelect&&C.canBoxSelect?this.whileBoxSelect(C,R):void 0},qn.whileBoxSelect=function(C,R){C.boxSelecting=!0,this.updateUIClasses({mouse:O.ADD}),C.boxSelectElement||(C.boxSelectElement=document.createElement("div"),C.boxSelectElement.classList.add(k.BOX_SELECT),this.map.getContainer().appendChild(C.boxSelectElement));var Y=qs(R.originalEvent,this.map.getContainer()),gt=Math.min(C.boxSelectStartLocation.x,Y.x),kt=Math.max(C.boxSelectStartLocation.x,Y.x),Pt=Math.min(C.boxSelectStartLocation.y,Y.y),Ht=Math.max(C.boxSelectStartLocation.y,Y.y),ke="translate("+gt+"px, "+Pt+"px)";C.boxSelectElement.style.transform=ke,C.boxSelectElement.style.WebkitTransform=ke,C.boxSelectElement.style.width=kt-gt+"px",C.boxSelectElement.style.height=Ht-Pt+"px"},qn.dragMove=function(C,R){C.dragMoving=!0,R.originalEvent.stopPropagation();var Y={lng:R.lngLat.lng-C.dragMoveLocation.lng,lat:R.lngLat.lat-C.dragMoveLocation.lat};To(this.getSelected(),Y),C.dragMoveLocation=R.lngLat},qn.onTouchEnd=qn.onMouseUp=function(C,R){var Y=this;if(C.dragMoving)this.fireUpdate();else if(C.boxSelecting){var gt=[C.boxSelectStartLocation,qs(R.originalEvent,this.map.getContainer())],kt=this.featuresAt(null,gt,"click"),Pt=this.getUniqueIds(kt).filter(function(Ht){return!Y.isSelected(Ht)});Pt.length&&(this.select(Pt),Pt.forEach(function(Ht){return Y.doRender(Ht)}),this.updateUIClasses({mouse:O.MOVE}))}this.stopExtendedInteractions(C)},qn.toDisplayFeatures=function(C,R,Y){R.properties.active=this.isSelected(R.properties.id)?xt.ACTIVE:xt.INACTIVE,Y(R),this.fireActionable(),R.properties.active===xt.ACTIVE&&R.geometry.type!==H.POINT&&za(R).forEach(Y)},qn.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},qn.onCombineFeatures=function(){var C=this.getSelected();if(!(C.length===0||C.length<2)){for(var R=[],Y=[],gt=C[0].type.replace("Multi",""),kt=0;kt<C.length;kt++){var Pt=C[kt];if(Pt.type.replace("Multi","")!==gt)return;Pt.type.includes("Multi")?Pt.getCoordinates().forEach(function(ke){R.push(ke)}):R.push(Pt.getCoordinates()),Y.push(Pt.toGeoJSON())}if(Y.length>1){var Ht=this.newFeature({type:H.FEATURE,properties:Y[0].properties,geometry:{type:"Multi"+gt,coordinates:R}});this.addFeature(Ht),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([Ht.id]),this.map.fire(st.COMBINE_FEATURES,{createdFeatures:[Ht.toGeoJSON()],deletedFeatures:Y})}this.fireActionable()}},qn.onUncombineFeatures=function(){var C=this,R=this.getSelected();if(R.length!==0){for(var Y=[],gt=[],kt=function(Ht){var ke=R[Ht];C.isInstanceOf("MultiFeature",ke)&&(ke.getFeatures().forEach(function(Ne){C.addFeature(Ne),Ne.properties=ke.properties,Y.push(Ne.toGeoJSON()),C.select([Ne.id])}),C.deleteFeature(ke.id,{silent:!0}),gt.push(ke.toGeoJSON()))},Pt=0;Pt<R.length;Pt++)kt(Pt);Y.length>1&&this.map.fire(st.UNCOMBINE_FEATURES,{createdFeatures:Y,deletedFeatures:gt}),this.fireActionable()}};var kr=Cn(et.VERTEX),Zi=Cn(et.MIDPOINT),$n={fireUpdate:function(){this.map.fire(st.UPDATE,{action:K.CHANGE_COORDINATES,features:this.getSelected().map(function(C){return C.toGeoJSON()})})},fireActionable:function(C){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:C.selectedCoordPaths.length>0})},startDragging:function(C,R){this.map.dragPan.disable(),C.canDragMove=!0,C.dragMoveLocation=R.lngLat},stopDragging:function(C){this.map.dragPan.enable(),C.dragMoving=!1,C.canDragMove=!1,C.dragMoveLocation=null},onVertex:function(C,R){this.startDragging(C,R);var Y=R.featureTarget.properties,gt=C.selectedCoordPaths.indexOf(Y.coord_path);Gr(R)||gt!==-1?Gr(R)&&gt===-1&&C.selectedCoordPaths.push(Y.coord_path):C.selectedCoordPaths=[Y.coord_path];var kt=this.pathsToCoordinates(C.featureId,C.selectedCoordPaths);this.setSelectedCoordinates(kt)},onMidpoint:function(C,R){this.startDragging(C,R);var Y=R.featureTarget.properties;C.feature.addCoordinate(Y.coord_path,Y.lng,Y.lat),this.fireUpdate(),C.selectedCoordPaths=[Y.coord_path]},pathsToCoordinates:function(C,R){return R.map(function(Y){return{feature_id:C,coord_path:Y}})},onFeature:function(C,R){C.selectedCoordPaths.length===0?this.startDragging(C,R):this.stopDragging(C)},dragFeature:function(C,R,Y){To(this.getSelected(),Y),C.dragMoveLocation=R.lngLat},dragVertex:function(C,R,Y){for(var gt=C.selectedCoordPaths.map(function(ke){return C.feature.getCoordinate(ke)}),kt=vi(gt.map(function(ke){return{type:H.FEATURE,properties:{},geometry:{type:H.POINT,coordinates:ke}}}),Y),Pt=0;Pt<gt.length;Pt++){var Ht=gt[Pt];C.feature.updateCoordinate(C.selectedCoordPaths[Pt],Ht[0]+kt.lng,Ht[1]+kt.lat)}},clickNoTarget:function(){this.changeMode(X.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(X.SIMPLE_SELECT)},clickActiveFeature:function(C){C.selectedCoordPaths=[],this.clearSelectedCoordinates(),C.feature.changed()},onSetup:function(C){var R=C.featureId,Y=this.getFeature(R);if(!Y)throw new Error("You must provide a featureId to enter direct_select mode");if(Y.type===H.POINT)throw new TypeError("direct_select mode doesn't handle point features");var gt={featureId:R,feature:Y,dragMoveLocation:C.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:C.coordPath?[C.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(R,gt.selectedCoordPaths)),this.setSelected(R),lo.disable(this),this.setActionableState({trash:!0}),gt},onStop:function(){lo.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(C,R,Y){C.featureId===R.properties.id?(R.properties.active=xt.ACTIVE,Y(R),za(R,{map:this.map,midpoints:!0,selectedPaths:C.selectedCoordPaths}).forEach(Y)):(R.properties.active=xt.INACTIVE,Y(R)),this.fireActionable(C)},onTrash:function(C){C.selectedCoordPaths.sort(function(R,Y){return Y.localeCompare(R,"en",{numeric:!0})}).forEach(function(R){return C.feature.removeCoordinate(R)}),this.fireUpdate(),C.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(C),C.feature.isValid()===!1&&(this.deleteFeature([C.featureId]),this.changeMode(X.SIMPLE_SELECT,{}))},onMouseMove:function(C,R){var Y=Pn(R),gt=kr(R),kt=Zi(R),Pt=C.selectedCoordPaths.length===0;return Y&&Pt||gt&&!Pt?this.updateUIClasses({mouse:O.MOVE}):this.updateUIClasses({mouse:O.NONE}),(gt||Y||kt)&&C.dragMoving&&this.fireUpdate(),this.stopDragging(C),!0},onMouseOut:function(C){return C.dragMoving&&this.fireUpdate(),!0}};$n.onTouchStart=$n.onMouseDown=function(C,R){return kr(R)?this.onVertex(C,R):Pn(R)?this.onFeature(C,R):Zi(R)?this.onMidpoint(C,R):void 0},$n.onDrag=function(C,R){if(C.canDragMove===!0){C.dragMoving=!0,R.originalEvent.stopPropagation();var Y={lng:R.lngLat.lng-C.dragMoveLocation.lng,lat:R.lngLat.lat-C.dragMoveLocation.lat};C.selectedCoordPaths.length>0?this.dragVertex(C,R,Y):this.dragFeature(C,R,Y),C.dragMoveLocation=R.lngLat}},$n.onClick=function(C,R){return Di(R)?this.clickNoTarget(C,R):Pn(R)?this.clickActiveFeature(C,R):Jn(R)?this.clickInactive(C,R):void this.stopDragging(C)},$n.onTap=function(C,R){return Di(R)?this.clickNoTarget(C,R):Pn(R)?this.clickActiveFeature(C,R):Jn(R)?this.clickInactive(C,R):void 0},$n.onTouchEnd=$n.onMouseUp=function(C){C.dragMoving&&this.fireUpdate(),this.stopDragging(C)};var ai={};function ko(C,R){return!!C.lngLat&&C.lngLat.lng===R[0]&&C.lngLat.lat===R[1]}ai.onSetup=function(){var C=this.newFeature({type:H.FEATURE,properties:{},geometry:{type:H.POINT,coordinates:[]}});return this.addFeature(C),this.clearSelectedFeatures(),this.updateUIClasses({mouse:O.ADD}),this.activateUIButton(G.POINT),this.setActionableState({trash:!0}),{point:C}},ai.stopDrawingAndRemove=function(C){this.deleteFeature([C.point.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT)},ai.onTap=ai.onClick=function(C,R){this.updateUIClasses({mouse:O.MOVE}),C.point.updateCoordinate("",R.lngLat.lng,R.lngLat.lat),this.map.fire(st.CREATE,{features:[C.point.toGeoJSON()]}),this.changeMode(X.SIMPLE_SELECT,{featureIds:[C.point.id]})},ai.onStop=function(C){this.activateUIButton(),C.point.getCoordinate().length||this.deleteFeature([C.point.id],{silent:!0})},ai.toDisplayFeatures=function(C,R,Y){var gt=R.properties.id===C.point.id;if(R.properties.active=gt?xt.ACTIVE:xt.INACTIVE,!gt)return Y(R)},ai.onTrash=ai.stopDrawingAndRemove,ai.onKeyUp=function(C,R){if(Yo(R)||va(R))return this.stopDrawingAndRemove(C,R)};var as={onSetup:function(){var C=this.newFeature({type:H.FEATURE,properties:{},geometry:{type:H.POLYGON,coordinates:[[]]}});return this.addFeature(C),this.clearSelectedFeatures(),lo.disable(this),this.updateUIClasses({mouse:O.ADD}),this.activateUIButton(G.POLYGON),this.setActionableState({trash:!0}),{polygon:C,currentVertexPosition:0}},clickAnywhere:function(C,R){if(C.currentVertexPosition>0&&ko(R,C.polygon.coordinates[0][C.currentVertexPosition-1]))return this.changeMode(X.SIMPLE_SELECT,{featureIds:[C.polygon.id]});this.updateUIClasses({mouse:O.ADD}),C.polygon.updateCoordinate("0."+C.currentVertexPosition,R.lngLat.lng,R.lngLat.lat),C.currentVertexPosition++,C.polygon.updateCoordinate("0."+C.currentVertexPosition,R.lngLat.lng,R.lngLat.lat)},clickOnVertex:function(C){return this.changeMode(X.SIMPLE_SELECT,{featureIds:[C.polygon.id]})},onMouseMove:function(C,R){C.polygon.updateCoordinate("0."+C.currentVertexPosition,R.lngLat.lng,R.lngLat.lat),or(R)&&this.updateUIClasses({mouse:O.POINTER})}};as.onTap=as.onClick=function(C,R){return or(R)?this.clickOnVertex(C,R):this.clickAnywhere(C,R)},as.onKeyUp=function(C,R){Yo(R)?(this.deleteFeature([C.polygon.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT)):va(R)&&this.changeMode(X.SIMPLE_SELECT,{featureIds:[C.polygon.id]})},as.onStop=function(C){this.updateUIClasses({mouse:O.NONE}),lo.enable(this),this.activateUIButton(),this.getFeature(C.polygon.id)!==void 0&&(C.polygon.removeCoordinate("0."+C.currentVertexPosition),C.polygon.isValid()?this.map.fire(st.CREATE,{features:[C.polygon.toGeoJSON()]}):(this.deleteFeature([C.polygon.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT,{},{silent:!0})))},as.toDisplayFeatures=function(C,R,Y){var gt=R.properties.id===C.polygon.id;if(R.properties.active=gt?xt.ACTIVE:xt.INACTIVE,!gt)return Y(R);if(R.geometry.coordinates.length!==0){var kt=R.geometry.coordinates[0].length;if(!(kt<3)){if(R.properties.meta=et.FEATURE,Y(Ws(C.polygon.id,R.geometry.coordinates[0][0],"0.0",!1)),kt>3){var Pt=R.geometry.coordinates[0].length-3;Y(Ws(C.polygon.id,R.geometry.coordinates[0][Pt],"0."+Pt,!1))}if(kt<=4){var Ht=[[R.geometry.coordinates[0][0][0],R.geometry.coordinates[0][0][1]],[R.geometry.coordinates[0][1][0],R.geometry.coordinates[0][1][1]]];if(Y({type:H.FEATURE,properties:R.properties,geometry:{coordinates:Ht,type:H.LINE_STRING}}),kt===3)return}return Y(R)}}},as.onTrash=function(C){this.deleteFeature([C.polygon.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT)};var Pr={onSetup:function(C){var R,Y,gt=(C=C||{}).featureId,kt="forward";if(gt){if(!(R=this.getFeature(gt)))throw new Error("Could not find a feature with the provided featureId");var Pt=C.from;if(Pt&&Pt.type==="Feature"&&Pt.geometry&&Pt.geometry.type==="Point"&&(Pt=Pt.geometry),Pt&&Pt.type==="Point"&&Pt.coordinates&&Pt.coordinates.length===2&&(Pt=Pt.coordinates),!Pt||!Array.isArray(Pt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var Ht=R.coordinates.length-1;if(R.coordinates[Ht][0]===Pt[0]&&R.coordinates[Ht][1]===Pt[1])Y=Ht+1,R.addCoordinate.apply(R,[Y].concat(R.coordinates[Ht]));else{if(R.coordinates[0][0]!==Pt[0]||R.coordinates[0][1]!==Pt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");kt="backwards",Y=0,R.addCoordinate.apply(R,[Y].concat(R.coordinates[0]))}}else R=this.newFeature({type:H.FEATURE,properties:{},geometry:{type:H.LINE_STRING,coordinates:[]}}),Y=0,this.addFeature(R);return this.clearSelectedFeatures(),lo.disable(this),this.updateUIClasses({mouse:O.ADD}),this.activateUIButton(G.LINE),this.setActionableState({trash:!0}),{line:R,currentVertexPosition:Y,direction:kt}},clickAnywhere:function(C,R){if(C.currentVertexPosition>0&&ko(R,C.line.coordinates[C.currentVertexPosition-1])||C.direction==="backwards"&&ko(R,C.line.coordinates[C.currentVertexPosition+1]))return this.changeMode(X.SIMPLE_SELECT,{featureIds:[C.line.id]});this.updateUIClasses({mouse:O.ADD}),C.line.updateCoordinate(C.currentVertexPosition,R.lngLat.lng,R.lngLat.lat),C.direction==="forward"?(C.currentVertexPosition++,C.line.updateCoordinate(C.currentVertexPosition,R.lngLat.lng,R.lngLat.lat)):C.line.addCoordinate(0,R.lngLat.lng,R.lngLat.lat)},clickOnVertex:function(C){return this.changeMode(X.SIMPLE_SELECT,{featureIds:[C.line.id]})},onMouseMove:function(C,R){C.line.updateCoordinate(C.currentVertexPosition,R.lngLat.lng,R.lngLat.lat),or(R)&&this.updateUIClasses({mouse:O.POINTER})}};Pr.onTap=Pr.onClick=function(C,R){if(or(R))return this.clickOnVertex(C,R);this.clickAnywhere(C,R)},Pr.onKeyUp=function(C,R){va(R)?this.changeMode(X.SIMPLE_SELECT,{featureIds:[C.line.id]}):Yo(R)&&(this.deleteFeature([C.line.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT))},Pr.onStop=function(C){lo.enable(this),this.activateUIButton(),this.getFeature(C.line.id)!==void 0&&(C.line.removeCoordinate(""+C.currentVertexPosition),C.line.isValid()?this.map.fire(st.CREATE,{features:[C.line.toGeoJSON()]}):(this.deleteFeature([C.line.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT,{},{silent:!0})))},Pr.onTrash=function(C){this.deleteFeature([C.line.id],{silent:!0}),this.changeMode(X.SIMPLE_SELECT)},Pr.toDisplayFeatures=function(C,R,Y){var gt=R.properties.id===C.line.id;if(R.properties.active=gt?xt.ACTIVE:xt.INACTIVE,!gt)return Y(R);R.geometry.coordinates.length<2||(R.properties.meta=et.FEATURE,Y(Ws(C.line.id,R.geometry.coordinates[C.direction==="forward"?R.geometry.coordinates.length-2:1],""+(C.direction==="forward"?R.geometry.coordinates.length-2:1),!1)),Y(R))};var Bo={simple_select:qn,direct_select:$n,draw_point:ai,draw_polygon:as,draw_line_string:Pr},jc={defaultMode:X.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:en,modes:Bo,controls:{},userProperties:!1},Au={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Lr={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function wu(C,R){return C.map(function(Y){return Y.source?Y:we(Y,{id:Y.id+"."+R,source:R==="hot"?P.HOT:P.COLD})})}var xo={exports:{}};(function(C,R){var Y="__lodash_hash_undefined__",gt=9007199254740991,kt="[object Arguments]",Pt="[object Array]",Ht="[object Boolean]",ke="[object Date]",Ne="[object Error]",nn="[object Function]",sn="[object Map]",qe="[object Number]",ti="[object Object]",Nr="[object Promise]",si="[object RegExp]",wr="[object Set]",xe="[object String]",wn="[object Symbol]",ar="[object WeakMap]",no="[object ArrayBuffer]",Qi="[object DataView]",Cs=/^\[object .+?Constructor\]$/,vl=/^(?:0|[1-9]\d*)$/,nr={};nr["[object Float32Array]"]=nr["[object Float64Array]"]=nr["[object Int8Array]"]=nr["[object Int16Array]"]=nr["[object Int32Array]"]=nr["[object Uint8Array]"]=nr["[object Uint8ClampedArray]"]=nr["[object Uint16Array]"]=nr["[object Uint32Array]"]=!0,nr[kt]=nr[Pt]=nr[no]=nr[Ht]=nr[Qi]=nr[ke]=nr[Ne]=nr[nn]=nr[sn]=nr[qe]=nr[ti]=nr[si]=nr[wr]=nr[xe]=nr[ar]=!1;var $s=typeof _s=="object"&&_s&&_s.Object===Object&&_s,yl=typeof self=="object"&&self&&self.Object===Object&&self,ji=$s||yl||Function("return this")(),Ii=R&&!R.nodeType&&R,Zr=Ii&&C&&!C.nodeType&&C,Yl=Zr&&Zr.exports===Ii,Hc=Yl&&$s.process,mf=function(){try{return Hc&&Hc.binding&&Hc.binding("util")}catch{}}(),gf=mf&&mf.isTypedArray;function bh(Wt,ce){for(var rn=-1,Rn=Wt==null?0:Wt.length;++rn<Rn;)if(ce(Wt[rn],rn,Wt))return!0;return!1}function Gc(Wt){var ce=-1,rn=Array(Wt.size);return Wt.forEach(function(Rn,vr){rn[++ce]=[vr,Rn]}),rn}function Ah(Wt){var ce=-1,rn=Array(Wt.size);return Wt.forEach(function(Rn){rn[++ce]=Rn}),rn}var uo,cc,Ys,vf=Array.prototype,Xl=Function.prototype,bo=Object.prototype,hc=ji["__core-js_shared__"],co=Xl.toString,Oa=bo.hasOwnProperty,Is=(uo=/[^.]+$/.exec(hc&&hc.keys&&hc.keys.IE_PROTO||""))?"Symbol(src)_1."+uo:"",Ms=bo.toString,_l=RegExp("^"+co.call(Oa).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ho=Yl?ji.Buffer:void 0,ss=ji.Symbol,Ao=ji.Uint8Array,xl=bo.propertyIsEnumerable,Xs=vf.splice,na=ss?ss.toStringTag:void 0,Cu=Object.getOwnPropertySymbols,Ji=ho?ho.isBuffer:void 0,Vr=(cc=Object.keys,Ys=Object,function(Wt){return cc(Ys(Wt))}),Ba=Es(ji,"DataView"),bl=Es(ji,"Map"),qc=Es(ji,"Promise"),Iu=Es(ji,"Set"),Wc=Es(ji,"WeakMap"),ls=Es(Object,"create"),Al=No(Ba),wl=No(bl),fc=No(qc),Kl=No(Iu),wh=No(Wc),Ks=ss?ss.prototype:void 0,pc=Ks?Ks.valueOf:void 0;function ia(Wt){var ce=-1,rn=Wt==null?0:Wt.length;for(this.clear();++ce<rn;){var Rn=Wt[ce];this.set(Rn[0],Rn[1])}}function Fo(Wt){var ce=-1,rn=Wt==null?0:Wt.length;for(this.clear();++ce<rn;){var Rn=Wt[ce];this.set(Rn[0],Rn[1])}}function Qs(Wt){var ce=-1,rn=Wt==null?0:Wt.length;for(this.clear();++ce<rn;){var Rn=Wt[ce];this.set(Rn[0],Rn[1])}}function Cl(Wt){var ce=-1,rn=Wt==null?0:Wt.length;for(this.__data__=new Qs;++ce<rn;)this.add(Wt[ce])}function Ri(Wt){var ce=this.__data__=new Fo(Wt);this.size=ce.size}function Mu(Wt,ce){var rn=ku(Wt),Rn=!rn&&Yc(Wt),vr=!rn&&!Rn&&Xo(Wt),zi=!rn&&!Rn&&!vr&&Jl(Wt),hr=rn||Rn||vr||zi,Ot=hr?function(Ae,Un){for(var li=-1,Mi=Array(Ae);++li<Ae;)Mi[li]=Un(li);return Mi}(Wt.length,String):[],he=Ot.length;for(var Kt in Wt)!Oa.call(Wt,Kt)||hr&&(Kt=="length"||vr&&(Kt=="offset"||Kt=="parent")||zi&&(Kt=="buffer"||Kt=="byteLength"||Kt=="byteOffset")||cs(Kt,he))||Ot.push(Kt);return Ot}function Zc(Wt,ce){for(var rn=Wt.length;rn--;)if(Ch(Wt[rn][0],ce))return rn;return-1}function us(Wt){return Wt==null?Wt===void 0?"[object Undefined]":"[object Null]":na&&na in Object(Wt)?function(ce){var rn=Oa.call(ce,na),Rn=ce[na];try{ce[na]=void 0;var vr=!0}catch{}var zi=Ms.call(ce);return vr&&(rn?ce[na]=Rn:delete ce[na]),zi}(Wt):function(ce){return Ms.call(ce)}(Wt)}function ra(Wt){return Ml(Wt)&&us(Wt)==kt}function $c(Wt,ce,rn,Rn,vr){return Wt===ce||(Wt==null||ce==null||!Ml(Wt)&&!Ml(ce)?Wt!=Wt&&ce!=ce:function(zi,hr,Ot,he,Kt,Ae){var Un=ku(zi),li=ku(hr),Mi=Un?Pt:Js(zi),dn=li?Pt:Js(hr),Hi=(Mi=Mi==kt?ti:Mi)==ti,Ko=(dn=dn==kt?ti:dn)==ti,io=Mi==dn;if(io&&Xo(zi)){if(!Xo(hr))return!1;Un=!0,Hi=!1}if(io&&!Hi)return Ae||(Ae=new Ri),Un||Jl(zi)?Il(zi,hr,Ot,he,Kt,Ae):function($i,Ln,Za,fr,Ss,Na,sr){switch(Za){case Qi:if($i.byteLength!=Ln.byteLength||$i.byteOffset!=Ln.byteOffset)return!1;$i=$i.buffer,Ln=Ln.buffer;case no:return!($i.byteLength!=Ln.byteLength||!Na(new Ao($i),new Ao(Ln)));case Ht:case ke:case qe:return Ch(+$i,+Ln);case Ne:return $i.name==Ln.name&&$i.message==Ln.message;case si:case xe:return $i==Ln+"";case sn:var Xe=Gc;case wr:var ro=1&fr;if(Xe||(Xe=Ah),$i.size!=Ln.size&&!ro)return!1;var ba=sr.get($i);if(ba)return ba==Ln;fr|=2,sr.set($i,Ln);var Aa=Il(Xe($i),Xe(Ln),fr,Ss,Na,sr);return sr.delete($i),Aa;case wn:if(pc)return pc.call($i)==pc.call(Ln)}return!1}(zi,hr,Mi,Ot,he,Kt,Ae);if(!(1&Ot)){var Fa=Hi&&Oa.call(zi,"__wrapped__"),Pu=Ko&&Oa.call(hr,"__wrapped__");if(Fa||Pu){var Lu=Fa?zi.value():zi,Kc=Pu?hr.value():hr;return Ae||(Ae=new Ri),Kt(Lu,Kc,Ot,he,Ae)}}return io?(Ae||(Ae=new Ri),function($i,Ln,Za,fr,Ss,Na){var sr=1&Za,Xe=Su($i),ro=Xe.length,ba=Su(Ln).length;if(ro!=ba&&!sr)return!1;for(var Aa=ro;Aa--;){var Po=Xe[Aa];if(!(sr?Po in Ln:Oa.call(Ln,Po)))return!1}var Lo=Na.get($i);if(Lo&&Na.get(Ln))return Lo==Ln;var tu=!0;Na.set($i,Ln),Na.set(Ln,$i);for(var Re=sr;++Aa<ro;){var el=$i[Po=Xe[Aa]],El=Ln[Po];if(fr)var Sl=sr?fr(El,el,Po,Ln,$i,Na):fr(el,El,Po,$i,Ln,Na);if(!(Sl===void 0?el===El||Ss(el,El,Za,fr,Na):Sl)){tu=!1;break}Re||(Re=Po=="constructor")}if(tu&&!Re){var oo=$i.constructor,fo=Ln.constructor;oo==fo||!("constructor"in $i)||!("constructor"in Ln)||typeof oo=="function"&&oo instanceof oo&&typeof fo=="function"&&fo instanceof fo||(tu=!1)}return Na.delete($i),Na.delete(Ln),tu}(zi,hr,Ot,he,Kt,Ae)):!1}(Wt,ce,rn,Rn,$c,vr))}function Eu(Wt){return!(!Xc(Wt)||function(ce){return!!Is&&Is in ce}(Wt))&&(tl(Wt)?_l:Cs).test(No(Wt))}function dc(Wt){if(rn=(ce=Wt)&&ce.constructor,Rn=typeof rn=="function"&&rn.prototype||bo,ce!==Rn)return Vr(Wt);var ce,rn,Rn,vr=[];for(var zi in Object(Wt))Oa.call(Wt,zi)&&zi!="constructor"&&vr.push(zi);return vr}function Il(Wt,ce,rn,Rn,vr,zi){var hr=1&rn,Ot=Wt.length,he=ce.length;if(Ot!=he&&!(hr&&he>Ot))return!1;var Kt=zi.get(Wt);if(Kt&&zi.get(ce))return Kt==ce;var Ae=-1,Un=!0,li=2&rn?new Cl:void 0;for(zi.set(Wt,ce),zi.set(ce,Wt);++Ae<Ot;){var Mi=Wt[Ae],dn=ce[Ae];if(Rn)var Hi=hr?Rn(dn,Mi,Ae,ce,Wt,zi):Rn(Mi,dn,Ae,Wt,ce,zi);if(Hi!==void 0){if(Hi)continue;Un=!1;break}if(li){if(!bh(ce,function(Ko,io){if(Fa=io,!li.has(Fa)&&(Mi===Ko||vr(Mi,Ko,rn,Rn,zi)))return li.push(io);var Fa})){Un=!1;break}}else if(Mi!==dn&&!vr(Mi,dn,rn,Rn,zi)){Un=!1;break}}return zi.delete(Wt),zi.delete(ce),Un}function Su(Wt){return function(ce,rn,Rn){var vr=rn(ce);return ku(ce)?vr:function(zi,hr){for(var Ot=-1,he=hr.length,Kt=zi.length;++Ot<he;)zi[Kt+Ot]=hr[Ot];return zi}(vr,Rn(ce))}(Wt,xa,Tu)}function Ql(Wt,ce){var rn,Rn,vr=Wt.__data__;return((Rn=typeof(rn=ce))=="string"||Rn=="number"||Rn=="symbol"||Rn=="boolean"?rn!=="__proto__":rn===null)?vr[typeof ce=="string"?"string":"hash"]:vr.map}function Es(Wt,ce){var rn=function(Rn,vr){return Rn==null?void 0:Rn[vr]}(Wt,ce);return Eu(rn)?rn:void 0}ia.prototype.clear=function(){this.__data__=ls?ls(null):{},this.size=0},ia.prototype.delete=function(Wt){var ce=this.has(Wt)&&delete this.__data__[Wt];return this.size-=ce?1:0,ce},ia.prototype.get=function(Wt){var ce=this.__data__;if(ls){var rn=ce[Wt];return rn===Y?void 0:rn}return Oa.call(ce,Wt)?ce[Wt]:void 0},ia.prototype.has=function(Wt){var ce=this.__data__;return ls?ce[Wt]!==void 0:Oa.call(ce,Wt)},ia.prototype.set=function(Wt,ce){var rn=this.__data__;return this.size+=this.has(Wt)?0:1,rn[Wt]=ls&&ce===void 0?Y:ce,this},Fo.prototype.clear=function(){this.__data__=[],this.size=0},Fo.prototype.delete=function(Wt){var ce=this.__data__,rn=Zc(ce,Wt);return!(rn<0)&&(rn==ce.length-1?ce.pop():Xs.call(ce,rn,1),--this.size,!0)},Fo.prototype.get=function(Wt){var ce=this.__data__,rn=Zc(ce,Wt);return rn<0?void 0:ce[rn][1]},Fo.prototype.has=function(Wt){return Zc(this.__data__,Wt)>-1},Fo.prototype.set=function(Wt,ce){var rn=this.__data__,Rn=Zc(rn,Wt);return Rn<0?(++this.size,rn.push([Wt,ce])):rn[Rn][1]=ce,this},Qs.prototype.clear=function(){this.size=0,this.__data__={hash:new ia,map:new(bl||Fo),string:new ia}},Qs.prototype.delete=function(Wt){var ce=Ql(this,Wt).delete(Wt);return this.size-=ce?1:0,ce},Qs.prototype.get=function(Wt){return Ql(this,Wt).get(Wt)},Qs.prototype.has=function(Wt){return Ql(this,Wt).has(Wt)},Qs.prototype.set=function(Wt,ce){var rn=Ql(this,Wt),Rn=rn.size;return rn.set(Wt,ce),this.size+=rn.size==Rn?0:1,this},Cl.prototype.add=Cl.prototype.push=function(Wt){return this.__data__.set(Wt,Y),this},Cl.prototype.has=function(Wt){return this.__data__.has(Wt)},Ri.prototype.clear=function(){this.__data__=new Fo,this.size=0},Ri.prototype.delete=function(Wt){var ce=this.__data__,rn=ce.delete(Wt);return this.size=ce.size,rn},Ri.prototype.get=function(Wt){return this.__data__.get(Wt)},Ri.prototype.has=function(Wt){return this.__data__.has(Wt)},Ri.prototype.set=function(Wt,ce){var rn=this.__data__;if(rn instanceof Fo){var Rn=rn.__data__;if(!bl||Rn.length<199)return Rn.push([Wt,ce]),this.size=++rn.size,this;rn=this.__data__=new Qs(Rn)}return rn.set(Wt,ce),this.size=rn.size,this};var Tu=Cu?function(Wt){return Wt==null?[]:(Wt=Object(Wt),function(ce,rn){for(var Rn=-1,vr=ce==null?0:ce.length,zi=0,hr=[];++Rn<vr;){var Ot=ce[Rn];rn(Ot,Rn,ce)&&(hr[zi++]=Ot)}return hr}(Cu(Wt),function(ce){return xl.call(Wt,ce)}))}:function(){return[]},Js=us;function cs(Wt,ce){return!!(ce=ce??gt)&&(typeof Wt=="number"||vl.test(Wt))&&Wt>-1&&Wt%1==0&&Wt<ce}function No(Wt){if(Wt!=null){try{return co.call(Wt)}catch{}try{return Wt+""}catch{}}return""}function Ch(Wt,ce){return Wt===ce||Wt!=Wt&&ce!=ce}(Ba&&Js(new Ba(new ArrayBuffer(1)))!=Qi||bl&&Js(new bl)!=sn||qc&&Js(qc.resolve())!=Nr||Iu&&Js(new Iu)!=wr||Wc&&Js(new Wc)!=ar)&&(Js=function(Wt){var ce=us(Wt),rn=ce==ti?Wt.constructor:void 0,Rn=rn?No(rn):"";if(Rn)switch(Rn){case Al:return Qi;case wl:return sn;case fc:return Nr;case Kl:return wr;case wh:return ar}return ce});var Yc=ra(function(){return arguments}())?ra:function(Wt){return Ml(Wt)&&Oa.call(Wt,"callee")&&!xl.call(Wt,"callee")},ku=Array.isArray,Xo=Ji||function(){return!1};function tl(Wt){if(!Xc(Wt))return!1;var ce=us(Wt);return ce==nn||ce=="[object GeneratorFunction]"||ce=="[object AsyncFunction]"||ce=="[object Proxy]"}function mc(Wt){return typeof Wt=="number"&&Wt>-1&&Wt%1==0&&Wt<=gt}function Xc(Wt){var ce=typeof Wt;return Wt!=null&&(ce=="object"||ce=="function")}function Ml(Wt){return Wt!=null&&typeof Wt=="object"}var Jl=gf?function(Wt){return function(ce){return Wt(ce)}}(gf):function(Wt){return Ml(Wt)&&mc(Wt.length)&&!!nr[us(Wt)]};function xa(Wt){return(ce=Wt)!=null&&mc(ce.length)&&!tl(ce)?Mu(Wt):dc(Wt);var ce}C.exports=function(Wt,ce){return $c(Wt,ce)}})(xo,xo.exports);var Wr=a(xo.exports);function ya(C,R){return C.length===R.length&&JSON.stringify(C.map(function(Y){return Y}).sort())===JSON.stringify(R.map(function(Y){return Y}).sort())}var gr={Polygon:Ai,LineString:ci,Point:Pi,MultiPolygon:me,MultiLineString:me,MultiPoint:me},Wa=Object.freeze({__proto__:null,CommonSelectors:Ra,constrainFeatureMovement:vi,createMidPoint:gl,createSupplementaryPoints:za,createVertex:Ws,doubleClickZoom:lo,euclideanDistance:He,featuresAt:de,getFeatureAtAndSetCursors:_e,isClick:Ue,isEventAtCoordinates:ko,isTap:ki,mapEventToBoundingBox:jt,ModeHandler:i,moveFeatures:To,sortFeatures:Qt,stringSetsAreEqual:ya,StringSet:Vt,theme:en,toDenseArray:At}),_a=function(C,R){var Y={options:C=function(kt){kt===void 0&&(kt={});var Pt=we(kt);return kt.controls||(Pt.controls={}),kt.displayControlsDefault===!1?Pt.controls=we(Lr,kt.controls):Pt.controls=we(Au,kt.controls),(Pt=we(jc,Pt)).styles=wu(Pt.styles,"cold").concat(wu(Pt.styles,"hot")),Pt}(C)};R=function(kt,Pt){return Pt.modes=X,Pt.getFeatureIdsAt=function(Ht){return de.click({point:Ht},null,kt).map(function(ke){return ke.properties.id})},Pt.getSelectedIds=function(){return kt.store.getSelectedIds()},Pt.getSelected=function(){return{type:H.FEATURE_COLLECTION,features:kt.store.getSelectedIds().map(function(Ht){return kt.store.get(Ht)}).map(function(Ht){return Ht.toGeoJSON()})}},Pt.getSelectedPoints=function(){return{type:H.FEATURE_COLLECTION,features:kt.store.getSelectedCoordinates().map(function(Ht){return{type:H.FEATURE,properties:{},geometry:{type:H.POINT,coordinates:Ht.coordinates}}})}},Pt.set=function(Ht){if(Ht.type===void 0||Ht.type!==H.FEATURE_COLLECTION||!Array.isArray(Ht.features))throw new Error("Invalid FeatureCollection");var ke=kt.store.createRenderBatch(),Ne=kt.store.getAllIds().slice(),nn=Pt.add(Ht),sn=new Vt(nn);return(Ne=Ne.filter(function(qe){return!sn.has(qe)})).length&&Pt.delete(Ne),ke(),nn},Pt.add=function(Ht){var ke=JSON.parse(JSON.stringify(U(Ht))).features.map(function(Ne){if(Ne.id=Ne.id||gn(),Ne.geometry===null)throw new Error("Invalid geometry: null");if(kt.store.get(Ne.id)===void 0||kt.store.get(Ne.id).type!==Ne.geometry.type){var nn=gr[Ne.geometry.type];if(nn===void 0)throw new Error("Invalid geometry type: "+Ne.geometry.type+".");var sn=new nn(kt,Ne);kt.store.add(sn)}else{var qe=kt.store.get(Ne.id);qe.properties=Ne.properties,Wr(qe.properties,Ne.properties)||kt.store.featureChanged(qe.id),Wr(qe.getCoordinates(),Ne.geometry.coordinates)||qe.incomingCoords(Ne.geometry.coordinates)}return Ne.id});return kt.store.render(),ke},Pt.get=function(Ht){var ke=kt.store.get(Ht);if(ke)return ke.toGeoJSON()},Pt.getAll=function(){return{type:H.FEATURE_COLLECTION,features:kt.store.getAll().map(function(Ht){return Ht.toGeoJSON()})}},Pt.delete=function(Ht){return kt.store.delete(Ht,{silent:!0}),Pt.getMode()!==X.DIRECT_SELECT||kt.store.getSelectedIds().length?kt.store.render():kt.events.changeMode(X.SIMPLE_SELECT,void 0,{silent:!0}),Pt},Pt.deleteAll=function(){return kt.store.delete(kt.store.getAllIds(),{silent:!0}),Pt.getMode()===X.DIRECT_SELECT?kt.events.changeMode(X.SIMPLE_SELECT,void 0,{silent:!0}):kt.store.render(),Pt},Pt.changeMode=function(Ht,ke){return ke===void 0&&(ke={}),Ht===X.SIMPLE_SELECT&&Pt.getMode()===X.SIMPLE_SELECT?(ya(ke.featureIds||[],kt.store.getSelectedIds())||(kt.store.setSelected(ke.featureIds,{silent:!0}),kt.store.render()),Pt):(Ht===X.DIRECT_SELECT&&Pt.getMode()===X.DIRECT_SELECT&&ke.featureId===kt.store.getSelectedIds()[0]||kt.events.changeMode(Ht,ke,{silent:!0}),Pt)},Pt.getMode=function(){return kt.events.getMode()},Pt.trash=function(){return kt.events.trash({silent:!0}),Pt},Pt.combineFeatures=function(){return kt.events.combineFeatures({silent:!0}),Pt},Pt.uncombineFeatures=function(){return kt.events.uncombineFeatures({silent:!0}),Pt},Pt.setFeatureProperty=function(Ht,ke,Ne){return kt.store.setFeatureProperty(Ht,ke,Ne),Pt},Pt}(Y,R),Y.api=R;var gt=Se(Y);return R.onAdd=gt.onAdd,R.onRemove=gt.onRemove,R.types=G,R.options=C,R};function $l(C){_a(C,this)}return $l.modes=Bo,$l.constants=St,$l.lib=Wa,$l})})(qM);var eU=qM.exports;const nU=C_(eU),iU={key:0,class:"d-flex button-custom-container"},rU={key:1,class:"d-flex button-custom-container"},oU={class:"context-menu"},aU=["onClick"],sU=["innerHTML"],lU=Fi({__name:"DrawControl",props:{...os,drawOptions:Object},setup(t){const e=t,i=e.drawOptions,{mapId:a,moduleContainerProps:c}=Eo(e,Bt=>{O("select"),Bt.on("draw.create",_),Bt.on("draw.update",M),Bt.on("draw.delete",T),Bt.addControl(y)},Bt=>{Bt.off("draw.create",_),Bt.off("draw.update",M),Bt.off("draw.delete",T),Bt.removeControl(y)}),{add:f,remove:o}=Jx(a.value,new eA().setHandler(St));let y=new nU({displayControlsDefault:!1,boxSelect:!1});function _(Bt){for(const de of Bt.features)dx(a.value,"added",de);mx(a.value,G.value),O("select")}function M(Bt){for(const de of Bt.features)dx(a.value,"updated",de);mx(a.value,G.value),O("select")}function T(Bt){for(const de of Bt.features)dx(a.value,"deleted",de);mx(a.value,G.value),O("select")}BV(a.value,y);const k={add:_p,delete:Bb,update:M4,save:u4,discard:Dm,close:Dm,draw:p4},P=$e("");function O(Bt){switch(o(),P.value=Bt,Bt){case"select":case"delete":f();break}}const G=Ge(()=>HV(a.value));function H(Bt){H2(a.value,G.value),G2(a.value,G.value,Bt)}const X=Ge(()=>UV(a.value)),st=Ge(()=>GV(a.value)),K=Ge(()=>jV(a.value)),et=Ge(()=>X.value);function xt(){UM(a.value,G.value)}function Nt(){NV(a.value)}function It(){FV(a.value),o()}async function St(Bt){const de=qV(a.value),An=WV(a.value),_e=await(de.getFeatures&&de.getFeatures([Bt.lngLat.lng,Bt.lngLat.lat]))||[];switch(P.value){case"select":{const He=An==null?void 0:An.add({type:"FeatureCollection",features:_e});He&&He.length>0&&(H2(a.value,G.value),G2(a.value,G.value,"direct_select",void 0,{featureId:He[0]}));break}case"delete":{An==null||An.delete(An.getSelectedIds()),de.deleteFeatures&&de.deleteFeatures(_e),de.reset&&de.reset();break}}}const Gt=$e(),Dt=Ge(()=>K.value.map(Bt=>typeof Bt=="string"?{id:Bt,name:cU[Bt]||Bt}:Bt));function Qt(){Gt.value&&Gt.value.close()}function jt(Bt){if(K.value.length>1){Gt.value&&Gt.value.open(Bt);return}O("create"),H(K.value[0])}function Vt(){i&&HM(a.value,i)}return(Bt,de)=>(mt(),Oe($(Da),La(ma($(c))),{btn:se(()=>[st.value?(mt(),Yt("div",iU,[et.value?(mt(),Oe($(Rm),{key:0,row:""},{default:se(()=>[zt($(Tr),{onClick:de[0]||(de[0]=An=>Nt())},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:k.discard},null,8,["path"])]),_:1}),zt($(Tr),{onClick:de[1]||(de[1]=An=>xt())},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:k.save},null,8,["path"])]),_:1})]),_:1})):(mt(),Oe($(Rm),{key:1,row:""},{default:se(()=>[zt($(Tr),{onClick:de[2]||(de[2]=An=>It())},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:k.close},null,8,["path"])]),_:1}),zt($(Tr),{active:P.value==="create",onClick:jt},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:k.add},null,8,["path"])]),_:1},8,["active"]),zt($(Tr),{active:P.value==="select",onClick:de[3]||(de[3]=An=>O("select"))},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:k.update},null,8,["path"])]),_:1},8,["active"]),zt($(Tr),{active:P.value==="delete",onClick:de[4]||(de[4]=An=>O("delete"))},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:k.delete},null,8,["path"])]),_:1},8,["active"])]),_:1}))])):$(i)?(mt(),Yt("div",rU,[zt($(Tr),null,{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:k.draw,onClick:Vt},null,8,["path"])]),_:1})])):on("",!0)]),default:se(()=>[zt($(GM),{ref_key:"contextMenuRef",ref:Gt},{default:se(()=>[_t("ul",oU,[(mt(!0),Yt(ui,null,$o(Dt.value,(An,_e)=>(mt(),Yt("li",{key:_e,onClick:_o(He=>{O("create"),H(An.id),Qt()},["stop"]),class:"context-menu__item"},[_t("span",{innerHTML:An.name},null,8,sU)],8,aU))),128))])]),_:1},512)]),_:1},16))}}),uU=jn(lU,[["__scopeId","data-v-5feb4539"]]),Sm={POINT:"draw_point",LINE_STRING:"draw_line_string",POLYGON:"draw_polygon"},cU={[Sm.POINT]:"draw point",[Sm.LINE_STRING]:"draw line string",[Sm.POLYGON]:"draw polygon"};class AA extends xp{constructor(e={}){super("list",e,{show:!0,opacity:1}),this.setBuild(hU)}disableDelete(){return this.option.disable_delete=!0,this}disableOpacity(){return this.option.disabled_opacity=!0,this}setColor(e){return this.option.color=e,this}setGroup(e){return this.option.group=e,this}}function hU(t,e={}){const i=e.show!=null?e.show:!0,a=e.opacity!=null?e.opacity:1;let c;const f={setParent(o){c=o},get parent(){return c},index:0,id:t.id||sf(),name:t.name,show:i,opacity:a,selected:!1,get metadata(){return t.metadata},color:e.color||"#38d4ff",config:{disable_delete:!1,disabled_opacity:!1,component:"layer-item"},multi:!1};return e.group&&(f.group=e.group),e.disable_delete&&(f.config.disable_delete=e.disable_delete),e.disabled_opacity&&(f.config.disabled_opacity=e.disabled_opacity),f}function gu(t){return t.parent}function fU(t,e,i){t.setLayerZoomRange(e.id,i["min-zoom"]||e["min-zoom"]||0,i["max-zoom"]||e["max-zoom"]||24);for(const a in i.paint)i.paint[a]!==e.paint[a]&&t.setPaintProperty(e.id,a,i.paint[a]);for(const a in i.layout)i.layout[a]!==e.layout[a]&&t.setLayoutProperty(e.id,a,i.layout[a])}const pU="Style Control",dU={area:"Area",line:"Line",point:"Point",symbol:"Symbol"},mU={title:"Layer",id:"Id",type:"Type","min-zoom":"Min zoom","max-zoom":"Max zoom"},gU={title:"Style"},vU={title:pU,add:dU,"back-to-default":"Back to default value",layer:mU,style:gU},yU={color:"Color",width:"Width",opacity:"Opacity",blur:"Blur","stroke-color":"Stroke color","circle-pitch-alignment":"Pitch alignment","circle-pitch-scale":"Pitch scale","stroke-width":"Stroke width","stroke-opacity":"Stroke opacity"},_U={setting:yU},xU={color:"Color",pattern:"Pattern",opacity:"Opacity",antialias:"Antialias",translate:"Translate","fill-antialias":"Antialias","fill-pattern":"Pattern","fill-outline-color":"Outline color"},bU={setting:xU},AU={color:"Color",pattern:"Pattern",opacity:"Opacity",width:"Width",cap:"Cap",join:"Join","round-limit":"Round limit","miter-limit":"Miter limit","dash-array":"Dash array","grap-width":"Grap width",blur:"Blur",offset:"Offset",translate:"Translate","translate-anchor":"Translate anchor"},wU={setting:AU},CU={"raster-brightness-max":"Max brightness","raster-brightness-min":"Min brightness","raster-contrast":"Contrast","raster-fade-duration":"Fade duration","raster-opacity":"Opacity","raster-hue-rotate":"Hue rotate","raster-resampling":"Resampling","raster-saturation":"Saturation"},IU={setting:CU},MU={text:"Text",icon:"Icon",position:"Position",placement:"Placement"},EU={"text-field":"Text field","text-color":"Color","text-size":"Size","text-opacity":"Opacity","text-transform":"Transform","text-letter-spacing":"Letter spacing","text-line-height":"Line height","text-max-width":"Max width","text-halo-blur":"Halo blur","text-halo-width":"Halo width","text-halo-color":"Halo color","icon-image":"Image","icon-size":"Size","icon-opacity":"Opacity","icon-text-fit":"Fill icon to text"},SU={tab:MU,setting:EU},TU={class:"layer-control__title"},kU={class:"style-control"},PU=Fi({__name:"style-control",props:{item:{},option:{}},emits:["close"],setup(t,{emit:e}){const i=e,a=t,{mapId:c,callMap:f}=Eo(),{trans:o,setLocale:y}=ga(c.value);y({map:{"style-control":vU},"circle-style":_U,"line-style":wU,"fill-style":bU,"symbol-style":SU,"raster-style":IU});const[_,M]=fd(!1),T=$e(),k=$e(void 0);let P=Pv("");ml(()=>{M(!0),k.value=void 0,xu(()=>{const H=gu(a.item);k.value=H.getView("map"),T.value=k.value.getValue(),P.value=k.value.getComponentUpdate()})});const O=()=>{k.value=void 0,T.value=void 0,i("close")},G=H=>{k.value&&f(X=>{k.value&&(k.value.updateValue(X,H),T.value=k.value.getValue())})};return(H,X)=>(mt(),Oe($(Da),La(ma(H.$attrs)),{draggable:se(st=>[$(P)?(mt(),Oe($(xM),er({key:0},st,{right:"",show:$(_),"onUpdate:show":X[1]||(X[1]=K=>Pa(_)?_.value=K:null),onClose:O}),{title:se(()=>[_t("span",TU,yn($(o)("map.style-control.title")),1)]),default:se(()=>[_t("div",kU,[(mt(),Oe(oc($(P)()),{modelValue:T.value,"onUpdate:modelValue":X[0]||(X[0]=K=>T.value=K),onUpdateStyle:G,trans:$(o),mapId:$(c)},null,40,["modelValue","trans","mapId"]))])]),_:2},1040,["show"])):on("",!0)]),_:1},16))}}),LU={key:0,class:"tab-item-no-content"},DU=Fi({__name:"tab-item",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,active:Boolean},setup(t){const e=t,i=Ge(()=>!e.item||!e.item.props||!e.item.props.label?{}:typeof e.item.props.label=="function"?e.item.props.label(e.item):e.item.props.label);return(a,c)=>(mt(),Yt("div",er({class:["tab-item",{"tab-item-active":t.active}]},a.$attrs),[_t("div",null,[_t("div",null,yn(t.text),1),!t.item.component||!t.item.component.label?(mt(),Yt("div",LU,[_t("p",null,yn(t.value||t.default_value),1)])):(mt(),Oe(oc(t.item.component.label()),er({key:1},i.value,{tab:t.item,value:t.value,default_value:t.default_value}),null,16,["tab","value","default_value"]))])],16))}}),RU=jn(DU,[["__scopeId","data-v-5562d286"]]),zU=t=>(lc("data-v-71526786"),t=t(),uc(),t),OU={class:"tab-item"},BU={key:0,class:"tab-item-no-content"},FU={key:2,class:"full-width"},NU=zU(()=>_t("hr",{class:"map-divider"},null,-1)),VU=["disabled"],UU=Fi({__name:"tab-content",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,trans:{required:!0},mapId:{required:!0}},emits:["input"],setup(t,{emit:e}){const i=t,a=e,c=Ge({get(){return i.value!=null?i.value:i.default_value},set(y){a("input",y)}}),f=Ge(()=>!i.item||!i.item.props||!i.item.props.content?{}:typeof i.item.props.content=="function"?i.item.props.content(i.item):i.item.props.content),o=()=>{c.value=i.default_value};return(y,_)=>(mt(),Yt("div",OU,[!t.item.component||!t.item.component.content?(mt(),Yt("div",BU,[_t("p",null,yn(t.value||t.default_value),1)])):(mt(),Oe(oc(t.item.component.content()),er({key:1},f.value,{modelValue:c.value,"onUpdate:modelValue":_[0]||(_[0]=M=>c.value=M),mapId:t.mapId}),null,16,["modelValue","mapId"])),t.default_value!=null?(mt(),Yt("div",FU,[NU,_t("button",{onClick:_[1]||(_[1]=M=>o()),disabled:c.value==null||c.value==t.default_value,class:"map-button text-center full-width"},yn(t.trans("map.style-control.back-to-default")),9,VU)])):on("",!0)]))}}),jU=jn(UU,[["__scopeId","data-v-71526786"]]),WM={TAB:{type:"single",items:[{trans:"circle-style.setting.color",key:"circle-color",type:"color"},{trans:"circle-style.setting.width",key:"circle-radius",type:"unit",unit:"px"},{trans:"circle-style.setting.opacity",key:"circle-opacity",type:"opacity"},{trans:"circle-style.setting.blur",key:"circle-blur",type:"number"},{trans:"circle-style.setting.stroke-color",key:"circle-stroke-color",type:"color"},{trans:"circle-style.setting.stroke-width",key:"circle-stroke-width",type:"unit",unit:"px"},{trans:"circle-style.setting.stroke-opacity",key:"circle-stroke-opacity",type:"opacity"},{trans:"circle-style.setting.circle-pitch-alignment",key:"circle-pitch-alignment",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]},{trans:"circle-style.setting.circle-pitch-scale",key:"circle-pitch-scale",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]}]},DEFAULT:{type:"circle",paint:{"circle-radius":5,"circle-color":"#000000","circle-blur":0,"circle-opacity":1,"circle-stroke-color":"#000000","circle-stroke-width":0,"circle-stroke-opacity":1,"circle-pitch-alignment":"viewport","circle-pitch-scale":"map"}}},HU={props:{value:{type:String},default_value:{type:String}},data:()=>({}),computed:{},methods:{}};function GU(t,e,i,a,c,f){return mt(),Yt("div",{style:Jr(`
      border: 1px solid #ccc;
      width:20px ; height: 20px ; background-color: ${i.value||i.default_value||"transparent"} ;
              border-radius: 5px `),class:Zo({"fill-canvas":!i.value&&!i.default_value})},null,6)}const qU=jn(HU,[["render",GU]]),WU={props:{value:{},default_value:{},tab:{default:()=>({})}},data:()=>({}),computed:{},methods:{}};function ZU(t,e,i,a,c,f){return mt(),Yt("div",null,yn(i.value||i.default_value||"0")+" "+yn(i.tab.unit||""),1)}const $U=jn(WU,[["render",ZU]]),YU={props:{value:{},default_value:{},format:{default:()=>()=>""}},data:()=>({}),computed:{c_value(){return this.value!=null?this.value:this.default_value}},methods:{}};function XU(t,e,i,a,c,f){return mt(),Yt("div",null,yn(i.format(f.c_value||"0")),1)}const vx=jn(YU,[["render",XU]]),q2={image:{component:{content:()=>Oo},props:{content:{class:"tab-content-padding"}}},color:{component:{content:()=>BO,label:()=>qU},props:{content:{disableAlpha:!0}}},boolean:{component:{content:()=>x8},props:{content:{class:"tab-content-padding"}}},chose:{component:{content:()=>M8,label:()=>vx},props:{content:t=>({items:t.menu,class:"tab-content-padding"}),label:t=>({format(e){var i;return(i=t.menu.find(a=>a.value==e))==null?void 0:i.text}})}},opacity:{component:{content:()=>$0,label:()=>vx},props:{content:{class:"tab-content-padding",min:0,max:1,step:.01},label:{format:t=>`${(+t*100).toFixed(0)} %`}},format:t=>+t},minMax:{component:{content:()=>$0,label:()=>vx},props:{content:{class:"tab-content-padding",min:0,max:1,step:.01},label:{format:t=>`${(+t).toFixed(2)}`}},format:t=>+t},unit:{component:{content:()=>Oo,label:()=>$U},props:{content:{class:"tab-content-padding",type:"number",min:0}},format:t=>+t},default:{component:{content:()=>Oo},props:{content:{class:"tab-content-padding"}}}},ZM={TAB:{type:"single",items:[{trans:"fill-style.setting.color",key:"fill-color",type:"color"},{trans:"fill-style.setting.opacity",key:"fill-opacity",type:"opacity"},{trans:"fill-style.setting.fill-antialias",key:"fill-antialias",type:"boolean"},{trans:"fill-style.setting.fill-outline-color",key:"fill-outline-color",type:"color"},{trans:"fill-style.setting.fill-pattern",key:"fill-pattern",type:"image"}]},DEFAULT:{type:"fill",paint:{"fill-antialias":!0,"fill-color":"#000000","fill-opacity":1,"fill-translate":[0,0]}}},$M={TAB:{type:"single",items:[{trans:"line-style.setting.color",key:"line-color",type:"color"},{trans:"line-style.setting.opacity",key:"line-opacity",type:"opacity"},{trans:"line-style.setting.width",key:"line-width",type:"unit",unit:"px"},{trans:"line-style.setting.pattern",key:"line-pattern",type:"image"},{trans:"line-style.setting.blur",key:"line-blur",type:"number"},{trans:"line-style.setting.cap",key:"line-cap",type:"chose",menu:[{text:"butt",value:"butt"},{text:"round",value:"round"},{text:"square",value:"square"}]},{trans:"line-style.setting.join",key:"line-join",type:"chose",menu:[{text:"bevel",value:"bevel"},{text:"round",value:"round"},{text:"miter",value:"miter"}]}]},DEFAULT:{type:"line",paint:{"line-color":"#000000","line-opacity":1,"line-width":0,"line-gap-width":0,"line-blur":0,"line-offset":0,"line-translate":[0,0]},layout:{"line-cap":"butt","line-join":"bevel","line-round-limit":0,"line-miter-limit":0}}},YM={TAB:{type:"single",items:[{trans:"raster-style.setting.raster-opacity",key:"raster-opacity",type:"opacity"},{trans:"raster-style.setting.raster-brightness-max",key:"raster-brightness-max",type:"minMax"},{trans:"raster-style.setting.raster-brightness-min",key:"raster-brightness-min",type:"minMax"},{trans:"raster-style.setting.raster-contrast",key:"raster-contrast",type:"minMax",props:{content:{class:"tab-content-padding",min:-1,max:1,step:.01}}},{trans:"raster-style.setting.raster-fade-duration",key:"raster-fade-duration",type:"unit",unit:"milliseconds"},{trans:"raster-style.setting.raster-hue-rotate",key:"raster-hue-rotate",type:"unit",unit:"degrees"},{trans:"raster-style.setting.raster-resampling",key:"raster-resampling",type:"chose",menu:[{text:"linear",value:"linear"},{text:"nearest",value:"nearest"}]},{trans:"raster-style.setting.raster-saturation",key:"raster-saturation",type:"minMax",props:{content:{min:-1,max:1}}}]},DEFAULT:{type:"raster",paint:{"raster-brightness-max":1,"raster-brightness-min":0,"raster-contrast":0,"raster-fade-duration":300,"raster-opacity":1,"raster-hue-rotate":0,"raster-resampling":"linear","raster-saturation":0}}},KU=[{trans:"symbol-style.setting.text-field",key:"text-field",part:"layout",type:"string"},{trans:"symbol-style.setting.text-color",key:"text-color",type:"color"},{trans:"symbol-style.setting.text-opacity",key:"text-opacity",type:"opacity"},{trans:"symbol-style.setting.text-size",key:"text-size",part:"layout",type:"unit",unit:"px"},{trans:"symbol-style.setting.text-letter-spacing",key:"text-letter-spacing",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.text-line-height",key:"text-line-height",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.text-max-width",key:"text-max-width",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.text-transform",key:"text-transform",part:"layout",type:"chose",menu:[{text:"none",value:"none"},{text:"uppercase",value:"uppercase"},{text:"lowercase",value:"lowercase"}]},{key:"divider",type:"divider"},{trans:"symbol-style.setting.text-halo-color",key:"text-halo-color",type:"color"},{trans:"symbol-style.setting.text-halo-width",key:"text-halo-width",type:"unit",unit:"px"},{trans:"symbol-style.setting.text-halo-blur",key:"text-halo-blur",type:"unit",unit:"px"}],QU=[{trans:"symbol-style.setting.icon-image",key:"icon-image",type:"image",part:"layout"},{trans:"symbol-style.setting.icon-opacity",key:"icon-opacity",type:"opacity"},{trans:"symbol-style.setting.icon-size",key:"icon-size",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.icon-text-fit",key:"icon-text-fit",type:"chose",part:"layout",menu:[{text:"none",value:"none"},{text:"width",value:"width"},{text:"height",value:"height"},{text:"both",value:"both"}]}],XM={TAB:{type:"multi",tabs:[{trans:"symbol-style.tab.text",items:KU},{trans:"symbol-style.tab.icon",items:QU},{trans:"symbol-style.tab.position",items:[]},{trans:"symbol-style.tab.placement",items:[]}]},DEFAULT:{type:"symbol",paint:{"text-color":"#000","text-opacity":1,"text-halo-blur":0,"text-halo-color":"#000","text-halo-width":0,"icon-opacity":1},layout:{"icon-size":1,"icon-text-fit-padding":[0,0,0,0],"icon-text-fit":"both","text-field":"","text-size":16,"text-transform":"none","text-letter-spacing":0,"text-line-height":0,"text-max-width":0}}},JU={circle:WM.TAB,line:$M.TAB,fill:ZM.TAB,raster:YM.TAB,symbol:XM.TAB},t7={circle:WM.DEFAULT,line:$M.DEFAULT,fill:ZM.DEFAULT,raster:YM.DEFAULT,symbol:XM.DEFAULT};function W2(t,e=q2){return t.map(i=>{if(i.type==="divider")return i;const a=Object.assign({},e.default,e[i.type]||{},i);return a.props=I_.merge({},a.props,(q2[i.type]||{}).props,i.props),a})}const e7={class:"style-edit-container"},n7={class:"label-config-container"},i7={class:"label-config-item"},r7={class:"label-config-item__label"},o7={class:"label-config-item__input"},a7={class:"label-config-item"},s7={class:"label-config-item__label"},l7={class:"label-config-item__input"},u7={class:"label-config-item"},c7={class:"label-config-item__label"},h7={class:"label-config-item__input"},f7={class:"label-config-item"},p7={class:"label-config-item__label"},d7={class:"label-config-item__input"},m7={key:0,class:"tab-group-label"},g7=["onClick"],v7={class:"tab-group-container"},y7={class:"label-container"},_7={key:0},x7=["onClick"],b7={key:0,class:"tab-divider"},A7={class:"value-container"},w7={key:0,class:"value-container__label"},C7=Fi({__name:"single-style",props:Gs({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:Gs(["input","update-style"],["update:modelValue"]),setup(t,{emit:e}){const i=t,a=e,c=dl(t,"modelValue"),f=Ge(()=>{const G=JU[c.value.type];return G.type==="multi"?G.tabs.map(H=>({...H,items:W2(H.items)})):[{type:"single",text:"style",items:W2(G.items)}]}),o=Ge(()=>t7[c.value.type]),y=$e(void 0),_=$e(void 0),M=G=>{_.value=G,_.value&&_.value.menu&&(_.value.menu=_.value.menu.map(H=>({...H,text:H.text||i.trans(H.text_trans||"")||"",subtitle:H.subtitle||i.trans(H.subtitle_trans||"")||""})))},T=G=>{y.value=G,y.value&&y.value.items&&M(y.value.items[0])},k=(G,H,X)=>{H.type!=="divider"&&(H.format&&(G=H.format(G)),X[H.part||"paint"][H.key]=G,a("update-style",X))};ml(()=>{f.value&&T(f.value[0])});const P=(G,H)=>{H["min-zoom"]=G,a("update-style",H)},O=(G,H)=>{H["max-zoom"]=G,a("update-style",H)};return(G,H)=>(mt(),Yt("div",e7,[zt($(nb),null,{header:se(()=>[fa(yn(t.trans("map.style-control.layer.title")),1)]),default:se(()=>[_t("div",n7,[_t("div",i7,[_t("div",r7,yn(t.trans("map.style-control.layer.id")),1),_t("div",o7,yn(c.value.id),1)]),_t("div",a7,[_t("div",s7,yn(t.trans("map.style-control.layer.type")),1),_t("div",l7,yn(c.value.type),1)]),_t("div",u7,[_t("div",c7,yn(t.trans("map.style-control.layer.min-zoom")),1),_t("div",h7,[zt($($0),{modelValue:c.value["min-zoom"]!=null?c.value["min-zoom"]:0,"onUpdate:modelValue":H[0]||(H[0]=X=>P(X,c.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])]),_t("div",f7,[_t("div",p7,yn(t.trans("map.style-control.layer.max-zoom")),1),_t("div",d7,[zt($($0),{modelValue:c.value["max-zoom"]!=null?c.value["max-zoom"]:24,"onUpdate:modelValue":H[1]||(H[1]=X=>O(X,c.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])])])]),_:1}),zt($(nb),null,{header:se(()=>[fa(yn(t.trans("map.style-control.style.title")),1)]),default:se(()=>[f.value&&f.value.length>1?(mt(),Yt("div",m7,[(mt(!0),Yt(ui,null,$o(f.value,X=>(mt(),Yt("div",{key:X.key,class:Zo(["tab clickable",{"tab-active":y.value&&y.value.trans==X.trans}]),onClick:_o(st=>T(X),["stop"])},yn(X.text||t.trans(X.trans)),11,g7))),128))])):on("",!0),_t("div",v7,[_t("div",y7,[y.value?(mt(),Yt("div",_7,[(mt(!0),Yt(ui,null,$o(y.value.items,X=>(mt(),Yt("div",{key:X.key,class:"clickable",onClick:_o(st=>M(X),["stop"])},[X.type==="divider"?(mt(),Yt("div",b7)):(mt(),Oe(RU,{key:1,value:c.value[X.part||"paint"][X.key],item:X,text:X.text||t.trans(X.trans),default_value:o.value[X.part||"paint"][X.key],active:_.value&&_.value.key===X.key},null,8,["value","item","text","default_value","active"]))],8,x7))),128))])):on("",!0)]),_t("div",A7,[_t("div",null,[_.value?(mt(),Yt("div",w7,yn(_.value.text||t.trans(_.value.trans)),1)):on("",!0),_.value?(mt(),Oe(jU,{key:1,item:_.value,value:c.value[_.value.part||"paint"][_.value.key],onInput:H[2]||(H[2]=X=>k(X,_.value,c.value)),default_value:o.value[_.value.part||"paint"][_.value.key],trans:t.trans,mapId:t.mapId},null,8,["item","value","default_value","trans","mapId"])):on("",!0)])])])]),_:1})]))}}),I7={class:"multi-style-edit-container"},M7={class:"tab-container"},E7={class:"tab-item"},S7=["disabled"],T7={key:0,class:"style-container"},k7={class:"add-style-container"},P7={key:1,class:"style-container"},L7=Fi({__name:"multi-style",props:Gs({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0,default:()=>[]},modelModifiers:{}}),emits:Gs(["input","update-style","close"],["update:modelValue"]),setup(t,{emit:e}){const i=e,a=dl(t,"modelValue");pl(a,()=>{!_.value&&a.value.length>0&&(_.value=a.value[a.value.length-1].id)});const c=H=>{_.value=void 0,xu(()=>{_.value=H})},f=(H,X)=>{i("update-style",{type:"update-one-layer",layer:H,index:a.value.findIndex(st=>st.id===X)})},o=H=>{_.value=void 0,i("update-style",{type:"add-one-layer",layer:new J0().setStyleType(H).setColor("#fff").build()}),G(!1)},y=H=>{let X=a.value.findIndex(st=>st.id===H);a.value[X]&&(_.value=void 0,i("update-style",{type:"remove-one-layer",index:X,layer:a.value[X]}),a.value.splice(X,1),a.value[0]&&c(a.value[0].id))},_=$e(a.value[0].id),M=Ge(()=>a.value.map((H,X)=>({text:`#${X+1}`,value:H.id}))),T=Ge(()=>a.value.find(H=>H.id===_.value)),k={delete:Um,create:_p,close:Dm},[P,O]=fd(!1),G=H=>{O(H)};return(H,X)=>(mt(),Yt("div",I7,[_t("div",M7,[_t("div",E7,[zt($(qm),{modelValue:_.value,"onUpdate:modelValue":c,items:M.value},null,8,["modelValue","items"])]),_t("div",{class:"tab-item tab-add clickable",onClick:X[0]||(X[0]=st=>y(_.value)),disabled:!_.value},[_t("div",null,[zt($(Bn),{size:"14",type:"mdi",path:k.delete,disabled:!_.value},null,8,["path","disabled"])])],8,S7),$(P)?(mt(),Yt("div",{key:1,class:"tab-item tab-add clickable",onClick:X[2]||(X[2]=st=>G(!1))},[zt($(Bn),{size:"14",type:"mdi",path:k.close},null,8,["path"])])):(mt(),Yt("div",{key:0,class:"tab-item tab-add clickable",onClick:X[1]||(X[1]=st=>G(!0))},[_t("div",null,[zt($(Bn),{size:"14",type:"mdi",path:k.create},null,8,["path"])])]))]),$(P)?(mt(),Yt("div",T7,[_t("div",k7,[zt($(Oc),{onClick:X[3]||(X[3]=st=>o("area"))},{default:se(()=>[fa(yn(t.trans("map.style-control.add.area")),1)]),_:1}),zt($(Oc),{onClick:X[4]||(X[4]=st=>o("line"))},{default:se(()=>[fa(yn(t.trans("map.style-control.add.line")),1)]),_:1}),zt($(Oc),{onClick:X[5]||(X[5]=st=>o("point"))},{default:se(()=>[fa(yn(t.trans("map.style-control.add.point")),1)]),_:1}),zt($(Oc),{onClick:X[6]||(X[6]=st=>o("symbol"))},{default:se(()=>[fa(yn(t.trans("map.style-control.add.symbol")),1)]),_:1})])])):_.value?(mt(),Yt("div",P7,[zt(C7,{modelValue:T.value,trans:t.trans,mapId:t.mapId,onUpdateStyle:X[7]||(X[7]=st=>f(st,_.value))},null,8,["modelValue","trans","mapId"])])):on("",!0)]))}});class D7 extends Gm{constructor(e){super(),this.info=Object.assign({metadata:{}},e)}get metadata(){return this.info?this.info.metadata:{}}}class R7 extends D7{constructor(e){super(e),this.layers=e.layers,this.source=e.source,this.layers.forEach((i,a)=>{i.id||(i.id=`${this._id}-${a}`)}),this.source&&!this.source.id&&(this.source.id=this._id),this.runAfterSetParent=()=>{if(this.parent){const i=this.parent.getView("source"),a=i?i.id:null;(!this.source||!this.source.data)&&(this.source={id:a,data:i.getMapboxSource()})}}}getBeforeId(){return this.layers[0].id}getAllLayerIds(){return this.layers.map(e=>e.id)}addToMap(e,i){this.layers.forEach(a=>{e.getLayer(a.id)||(!a.source&&this.source&&(a.source=this.source.id),!a.source&&this.source.id&&(a.source=this.source.id),e.addLayer(a,i))})}removeFromMap(e){this.layers.forEach(i=>{e.getLayer(i.id)&&e.removeLayer(i.id)})}moveLayer(e,i){this.layers.forEach(a=>{e.getLayer(a.id)&&e.moveLayer(a.id,i)})}toggleShow(e,i){this.layers.forEach(a=>{e.getLayer(a.id)&&e.setLayoutProperty(a.id,"visibility",i?"visible":"none")})}setOpacity(e,i){this.layers.forEach(a=>{if(e.getLayer(a.id)){const c=a.type=="symbol"?"icon-opacity":`${a.type}-opacity`;e.setPaintProperty(a.id,c,i)}})}getValue(){return eb(this.layers)}getComponentUpdate(){return()=>L7}updateValue(e,i){const{type:a,index:c}=i;let{layer:f}=i;switch(a){case"update-one-layer":fU(e,this.layers[c],f),this.layers[c]=eb(Object.assign({},this.layers[c],f));break;case"add-one-layer":f=Object.assign({},{id:`${this._id}-${this.layers.length}`,source:this.source.id},f),e.addLayer(f),this.layers.push(f);break;case"remove-one-layer":e.getLayer(f.id)&&e.removeLayer(f.id),this.layers.splice(c,1);break}}}class KM extends Gm{constructor(){super(),this.bounds=[-180,-85.051129,180,85.051129],this.runAfterSetParent=()=>{this.bounds&&this.parent&&(this.parent.metadata.bounds=this.bounds)}}getAll(){}setData(e){}setBounds(e){this.bounds=e,this.parent&&(this.parent.metadata.bounds=e)}addToMap(e){this.id&&!e.getSource(this.id)&&e.addSource(this.id,this.getMapboxSource())}removeFromMap(e){this.id&&e.getSource(this.id)&&e.removeSource(this.id)}getMapboxSource(){return{type:"geojson"}}}class z7 extends KM{constructor(e={}){super(),this.option=e,this.option.bounds&&this.setBounds(this.option.bounds)}updateForMap(){}getMapboxSource(){return{type:"raster",...this.option,bounds:this.bounds||[-180,-85.051129,180,85.051129]}}}class QM extends xp{constructor(e={}){super("source",e),this.setBuild(()=>new z7(this.option))}setTiles(e){return this.option.tiles=e,this}setMaxzoom(e){return this.option.maxzoom=e,this}setMinzoom(e){return this.option.minzoom=e,this}setScheme(e){return this.option.scheme=e,this}setTileSize(e){return this.option.tileSize=e,this}setBounds(e){return this.option.bounds=e,this}setUrl(e){return this.option.url=e,this}}class O7 extends xp{constructor(e={}){super("source",e),this.setBuild(()=>new B7(this.geojson,this.option))}setData(e){return this.geojson=e,this}}class B7 extends KM{constructor(e,i={}){super(),this.field_id="id",this.setData(e),this.option=i}getMapboxSource(){return{type:"geojson",data:this.getAll()}}updateForMap(e){const i=e.getSource(this.id);i&&i.setData(this.geojson||{type:"FeatureCollection",features:[]})}setData(e){if(!e)return;typeof e=="string"&&(e=JSON.parse(e));let i;e.type==="FeatureCollection"?i=e:e.type==="Feature"?i={type:"FeatureCollection",features:[e]}:i={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]},this.geojson=i,this.setBounds(Bm(e))}getAll(){return this.geojson}}class q_ extends xp{constructor(e={}){super("map",e),this.setBuild((i,a)=>new R7(a))}setLayers(e){return this.option.layers=e,this}setLayer(e){return this.option.layers=[Object.assign({layout:{},paint:{}},e)],this}setSource(e){return this.option.source=e,this}setForLayer(e){return e.getView("action").addAction({id:"editable",component:()=>PU,menu:{id:"editable",location:"menu",name:"edit style",type:"item",icon:d4,order:2}}),this}}class JM{build(){return{type:"raster"}}}class J0{constructor(){this.type="point"}setColor(e){return this.color=e,this}setStyleType(e){return this.type=e,this}build(){return F7(this.type,this.color)}}const F7=(t,e)=>{switch(t){case"point":return{layout:{visibility:"visible"},type:"circle",paint:{"circle-color":e||I0(),"circle-radius":6}};case"line":return{layout:{visibility:"visible"},type:"line",paint:{"line-color":e||I0(),"line-width":4}};case"area":return{layout:{visibility:"visible"},type:"fill",paint:{"fill-color":e||I0()}};case"symbol":return{layout:{visibility:"visible"},type:"symbol",paint:{}};default:throw new Error("Invalid type: "+t)}},N7=Fi({__name:"toggle-show",props:{item:{}},setup(t){const e=t,i={show:Nb,hide:Vb},a=Ge(()=>e.item.show);return(c,f)=>a.value?(mt(),Oe($(Bn),{key:0,size:"14",type:"mdi",path:i.show},null,8,["path"])):(mt(),Oe($(Bn),{key:1,size:"14",type:"mdi",path:i.hide},null,8,["path"]))}});class V7 extends xp{constructor(e={actions:[]}){super("action",e),this.setBuild((i,a)=>new U7(i,a))}addActions(e){return this.option.actions.push(...e),this}addAction(e){const i=this.option.actions.findIndex(a=>a.id===e.id);return i>=0&&this.option.actions.splice(i,1),e&&this.option.actions.push(e),this}}class U7 extends Gm{constructor(e,i={actions:[]}){super(),this.menu_cache={},this.layer=e,this.option=i,this.resetCacheMenu()}get menus(){return this.option.actions.reduce((e,i)=>(i.menu&&(i.menu.type=="item"&&(i.menu.id=i.id),e.push(i.menu)),e),[])}call(e,i){const a=this.menu_cache[e];this.parent&&a.menu.type=="item"&&(a.component?this.layer.getView("component").setFromAction(a):a.menu.click&&a.menu.click(this.parent,i))}get(e){return this.menu_cache[e]}addActions(e){return this.option.actions.push(...e),this.resetCacheMenu(),this}addAction(e){if(e){const i=this.option.actions.findIndex(a=>a.id===e.id);i>=0&&this.option.actions.splice(i,1),this.option.actions.push(e)}return this.resetCacheMenu(),this}updateAction(e){const i=this.option.actions.findIndex(a=>a.id===e.id);return i>=0&&(this.option.actions[i]=e,this.resetCacheMenu()),this.parent?this:this}resetCacheMenu(){this.menu_cache=this.option.actions.reduce((e,i)=>(e[i.id]=i,e),{})}}function wA(){return{id:"to-bound",type:"to-bound",menu:{id:"to-bound",location:"extra",type:"item",name:"Fly to",icon:Rv}}}function CA(){return{id:"toggle-show",type:"toggle-show",menu:{id:"toggle-show",location:"extra",type:"item",name:"Fly to",icon:()=>N7}}}function j7(t){return{all:t=t||new Map,on:function(e,i){var a=t.get(e);a?a.push(i):t.set(e,[i])},off:function(e,i){var a=t.get(e);a&&(i?a.splice(a.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var a=t.get(e);a&&a.slice().map(function(c){c(i)}),(a=t.get("*"))&&a.slice().map(function(c){c(e,i)})}}}class H7{constructor(){this.views={}}addView(e,i){return this.views[e]=i,this}getView(e){return this.views[e]}runWithNameFunction(e,...i){const a=[];let{source:c,...f}=this.views;return e==="addToMap"?a.push(c[e](...i)):e!=="removeFromMap"&&(f=this.views,c=void 0),G7(f,o=>{o[e]&&a.push(o[e](...i))},this),e==="removeFromMap"&&a.push(c[e](...i)),Promise.all(a)}}function G7(t,e=a=>{},i){return Promise.all(Object.keys(t).map(a=>{if(Object.hasOwnProperty.call(t,a))return e.bind(i)(t[a])}))}class IA extends tA{constructor(){super(),this.eventBus=j7(),this.info={metadata:{}},this._view=new H7}get metadata(){return this.info.metadata}get name(){return this.info.name}async run(e,i,...a){return this._view.runWithNameFunction(e,i,...a)}async addToMap(e,...i){return this._view.runWithNameFunction("addToMap",e,...i)}async removeFromMap(e,...i){return this._view.runWithNameFunction("removeFromMap",e,...i)}async updateForMap(e,...i){return this._view.runWithNameFunction("updateForMap",e,...i)}setInfo(e){return e.metadata==null?e.metadata={loading:!1}:e.metadata.loading==null&&(e.metadata.loading=!1),this.info=e,this}setView(e,i){return this._view.addView(e,i),this}getView(e){return this._view.getView(e)}emit(e,i){return this.eventBus.emit(e,i),this}off(e,i){return this.eventBus.off(e,i),this}on(e,i){return this.eventBus.on(e,i),this}}const q7={style:{"min-width":"55px"}},W7={class:"btn-copy"},Z7={__name:"table-td-copy",props:{value:{}},setup(t){const{copy:e}=I9({}),i={copy:l4};return(a,c)=>(mt(),Yt("tr",null,[Zn(a.$slots,"default",{},void 0,!0),_t("td",q7,[_t("div",W7,[zt($(Oc),{onClick:c[0]||(c[0]=f=>$(e)(t.value))},{default:se(()=>[zt($(Bn),{path:i.copy,size:"14",type:"mdi"},null,8,["path"])]),_:1})])])]))}},$7=jn(Z7,[["__scopeId","data-v-ae15dec0"]]),Y7={style:{"min-width":"60px"}},X7={key:1,colspan:"2"},K7={__name:"table-td-layer",props:{label:String,layer:{},field:{}},setup(t){const e=t,i=gu(e.layer),a=Ge(()=>e.field.value instanceof Function?e.field.value(i):i[e.field.value]);return(c,f)=>(mt(),Oe($7,{value:a.value},{default:se(()=>[t.field.inline?(mt(),Yt("td",X7,[zt($(gM),{readonly:"",rows:"10",modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=o=>a.value=o),label:t.label},null,8,["modelValue","label"])])):(mt(),Yt(ui,{key:0},[_t("td",Y7,yn(t.label),1),_t("td",null,yn(a.value),1)],64))]),_:1},8,["value"]))}},Q7=jn(K7,[["__scopeId","data-v-d81c80cd"]]),J7={class:"table-show-info"},tj={name:"detail-layer-info"},ej=Object.assign(tj,{props:{item:{},option:{default:()=>({fields:[]})}},emits:["close"],setup(t,{emit:e}){const{mapId:i}=Eo(),{trans:a}=ga(i.value),c=e;function f(o){o||c("close")}return(o,y)=>(mt(),Oe($(Da),La(ma(o.$attrs)),{draggable:se(_=>[zt($(pf),er(_,{show:"","onUpdate:show":f,width:400}),{title:se(()=>[fa(yn($(a)("map.layer-control.info.title")),1)]),default:se(()=>[_t("div",J7,[_t("table",null,[_t("tbody",null,[(mt(!0),Yt(ui,null,$o(t.option.fields,(M,T)=>(mt(),Oe(Q7,{field:M,label:M.trans?$(a)(M.trans):M.text,layer:t.item,key:T},null,8,["field","label","layer"]))),128))])])])]),_:2},1040)]),_:1},16))}}),nj=jn(ej,[["__scopeId","data-v-15a1a21e"]]),yx="show_info";class MA extends xp{constructor({fields:e}){super(yx,{fields:e})}setForLayer(e){return e.getView("action").addAction({id:yx,component:()=>nj,menu:{id:yx,location:"menu",name:"info",type:"item",icon:x4},option:this.option}),this}}const ij="component";class rj{constructor(){this.key=ij}build(e){return new oj(e)}}class oj extends Gm{constructor(e){super(),this.components=[],this.layer=e}add(e){return this.components.push(e),this}remove(e){return this.components=this.components.filter(i=>i.id!==e.id),this}removeFromMap(){this.components=[]}setFromAction(e){const i=e.id;if(!this.components.find(a=>a.id==i))return this.layer.emit("add-component",{layer:this.layer,component:{component:e.component,option:e.option,id:i}}),this.add({id:i}),this}}function EA(t,e,i={}){const{builds:a,actions:c}=e;let{builds:f=[]}=i;return a&&(f=[...a,...f]),f.unshift(new V7({actions:c})),f.unshift(new rj),f.forEach(o=>{if(o.setForLayer&&o.setForLayer(t),o.build){const y=o.build(t,o.option);y.setParent(t),t.setView(o.key,y)}}),t}function tE(t){const e=new IA,{name:i,tiles:a,bounds:c}=t;e.setInfo({name:i,metadata:{}});const f=[new QM().setTiles(a).setBounds(c),new AA,new q_().setLayer(new JM().build()),new MA({fields:[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:y=>{const _=y.metadata.bounds;return _&&`${_[0]}, ${_[1]}, ${_[2]},${_[3]}`}},{trans:"map.layer-control.field.tiles",value:y=>{var _;return(_=y.getView("source").option.tiles)==null?void 0:_.join(`,
`)}}]})],o=[wA(),CA()];return EA(e,{builds:f,actions:o},t)}function aj(t){const{name:e,url:i}=t,a=new IA;a.setInfo({name:e,metadata:{}});const c=[new QM().setUrl(i),new AA,new q_().setLayer(new JM().build()),new MA({fields:[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:o=>{const y=o.metadata.bounds;return y&&`${y[0]}, ${y[1]}, ${y[2]},${y[3]}`}},{trans:"map.layer-control.field.url",value:o=>o.getView("source").option.url,inline:!0}]})],f=[wA(),CA()];return EA(a,{builds:c,actions:f},t)}const sj="identify";class lj extends xp{constructor(e={}){super(sj,e),this.setBuild((i,a)=>new uj(a))}setFieldName(e="name"){return this.option.field_name=e,this}setFieldId(e="id"){return this.option.field_id=e,this}}class uj extends Gm{constructor(e={}){super(),this.option=e}get name(){var e;return((e=this.parent)==null?void 0:e.info.name)||""}get config(){const e={field_name:"name",field_id:"id"};return this.option.field_name&&(e.field_name=this.option.field_name),this.option.field_id&&(e.field_id=this.option.field_id),e}}function eE(t){const{name:e,geojson:i,type:a}=t;let{color:c}=t;const f=new IA;f.setInfo({name:e,metadata:{}}),c=c||I0();const o=[new O7().setData(i),new AA().setColor(c),new lj,new MA({fields:[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:_=>{const M=_.metadata.bounds;return M&&`${M[0]}, ${M[1]}, ${M[2]},${M[3]}`}},{trans:"map.layer-control.field.geojson",value:_=>{const M=_.getView("source").geojson;return JSON.stringify(M,void 0,2)},inline:!0}]})];a&&o.push(new q_().setLayer(new J0().setStyleType(a).setColor(c).build()));const y=[wA(),CA()];return EA(f,{builds:o,actions:y},t)}const Ym="layer";function cj(t){hf(t,Ym,{layers:{},layerIds:$e([])})}md(Ym,cj);async function sb(t,e){const i=pa(t,Ym);i.layers[e.id]=e,i.layerIds.value.push(e.id);const a=e.getView("list");a&&(a.index=i.layerIds.value.length),yu.actions.getMap(t,async c=>{e.addToMap(c)})}function _x(t,e){const i=pa(t,Ym);yu.actions.getMap(t,async a=>{e.removeFromMap(a)}),delete i.layers[e.id],i.layerIds.value=i.layerIds.value.filter(a=>a!=e.id)}function SA(t,e){const i=pa(t,Ym),a=[];return i.layerIds.value.forEach(c=>{const f=i.layers[c];if(f){const o=f.getView(e);o&&a.push(o)}}),a}function hj(t){return pa(t,Ym).layerIds}const fj={},pj={class:"map-row"};function dj(t,e,i,a,c,f){return mt(),Yt("div",pj,[Zn(t.$slots,"default")])}const nE=jn(fj,[["render",dj]]),mj={class:"map-row"},gj={class:"map-col-12"},vj={__name:"xyz-json",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=dl(t,"modelValue"),{mapId:i}=Eo(),{trans:a}=ga(i.value);return(c,f)=>(mt(),Yt("div",mj,[Zn(c.$slots,"default"),_t("div",gj,[zt($(Oo),{modelValue:e.value.url,"onUpdate:modelValue":f[0]||(f[0]=o=>e.value.url=o),label:$(a)("map.layer-control.field.url")},null,8,["modelValue","label"])])]))}},yj={class:"map-row"},_j={class:"map-col-12"},xj={class:"map-col-6"},bj={class:"map-col-6"},Aj={class:"map-col-6"},wj={class:"map-col-6"},Cj={class:"map-col-6"},Ij={class:"map-col-6"},Mj={__name:"xyz-url",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=dl(t,"modelValue"),{mapId:i}=Eo(),{trans:a}=ga(i.value);return(c,f)=>(mt(),Yt("div",yj,[Zn(c.$slots,"default"),_t("div",_j,[zt($(Oo),{modelValue:e.value.url,"onUpdate:modelValue":f[0]||(f[0]=o=>e.value.url=o),label:$(a)("map.layer-control.field.url")},null,8,["modelValue","label"])]),_t("div",xj,[zt($(Oo),{modelValue:e.value.minzoom,"onUpdate:modelValue":f[1]||(f[1]=o=>e.value.minzoom=o),label:$(a)("map.layer-control.field.minzoom")},null,8,["modelValue","label"])]),_t("div",bj,[zt($(Oo),{modelValue:e.value.maxzoom,"onUpdate:modelValue":f[2]||(f[2]=o=>e.value.maxzoom=o),label:$(a)("map.layer-control.field.maxzoom")},null,8,["modelValue","label"])]),e.value.bounds?(mt(),Yt(ui,{key:0},[_t("div",Aj,[zt($(Oo),{modelValue:e.value.bounds[0],"onUpdate:modelValue":f[3]||(f[3]=o=>e.value.bounds[0]=o),label:$(a)("map.layer-control.field.bound.minx")},null,8,["modelValue","label"])]),_t("div",wj,[zt($(Oo),{modelValue:e.value.bounds[1],"onUpdate:modelValue":f[4]||(f[4]=o=>e.value.bounds[1]=o),label:$(a)("map.layer-control.field.bound.miny")},null,8,["modelValue","label"])]),_t("div",Cj,[zt($(Oo),{modelValue:e.value.bounds[2],"onUpdate:modelValue":f[5]||(f[5]=o=>e.value.bounds[2]=o),label:$(a)("map.layer-control.field.bound.maxx")},null,8,["modelValue","label"])]),_t("div",Ij,[zt($(Oo),{modelValue:e.value.bounds[3],"onUpdate:modelValue":f[6]||(f[6]=o=>e.value.bounds[3]=o),label:$(a)("map.layer-control.field.bound.maxy")},null,8,["modelValue","label"])])],64)):on("",!0)]))}},Ej={multiple:!0,accept:"*",reset:!1,directory:!1};function Sj(t={}){const{document:e=uA}=t,i=$e(null),{on:a,trigger:c}=oR();let f;e&&(f=e.createElement("input"),f.type="file",f.onchange=_=>{const M=_.target;i.value=M.files,c(i.value)});const o=()=>{i.value=null,f&&f.value&&(f.value="",c(null))},y=_=>{if(!f)return;const M={...Ej,...t,..._};f.multiple=M.multiple,f.accept=M.accept,f.webkitdirectory=M.directory,Mz(M,"capture")&&(f.capture=M.capture),M.reset&&o(),f.click()};return{files:c_(i),open:y,reset:o,onChange:a}}const Tj=Pb('<label class="ddf__label" for="upload-file" data-v-ff35047a><i class="ddf__label-inner" data-v-ff35047a><svg class="ddf__icon" viewBox="0 0 64 64" aria-hidden="true" data-v-ff35047a><path fill="currentColor" d="M51,27c-.374,0-.742.025-1.109.056a18,18,0,0,0-35.782,0C13.742,27.025,13.374,27,13,27a13,13,0,0,0,0,26H51a13,13,0,0,0,0-26Z" data-v-ff35047a></path><path d="M43.764,41.354l-11-13a1.033,1.033,0,0,0-1.526,0l-11,13A1,1,0,0,0,21,43h7V59h8V43h7a1,1,0,0,0,.764-1.646Z" data-v-ff35047a></path></svg><span class="ddf__text" data-v-ff35047a> Drag and drop your files here </span><span class="ddf__subtext" data-v-ff35047a> or click to browse your files </span></i></label>',1),kj=[Tj],Pj=Fi({__name:"index",props:{multiple:Boolean,accept:String},emits:["change"],setup(t,{emit:e}){const i=t,a=e,{onChange:c,open:f}=Sj({multiple:i.multiple,accept:i.accept});c(M=>{M&&o(Array.from(M))});function o(M){M&&a("change",i.multiple?M:M[0])}const y=$e(),{isOverDropZone:_}=M9(y,o);return(M,T)=>(mt(),Yt("div",{class:Zo(["ddf__area",{ddf__active:$(_)}]),ref_key:"dropZoneRef",ref:y,onClick:T[0]||(T[0]=k=>$(f)())},kj,2))}}),Lj=jn(Pj,[["__scopeId","data-v-ff35047a"]]);function Dj(t={}){const e=new Rj;async function i(a,c={}){return e.read(a,Object.assign({},t,c))}return{read:i}}class Rj{async read(e,i={}){const a=i.parser||this.getParser(e),c=i.type||"text",f=i.onSuccess,o=i.onError;try{let y=await Z2.read(e,c);return a&&(y=await a.parse(y,e)),f&&f(y),y}catch(y){throw o&&o(y),y}}getParser(e){switch(Z2.getExtension(e)){case"geojson":case"json":return new zj}}}class Z2{static getExtension(e){return e.name.split(".").pop()}static async read(e,i){return new Promise((a,c)=>{const f=new window.FileReader;f.onload=o=>o.target&&a(o.target.result),f.onerror=o=>c(o),i==="text"?f.readAsText(e):i==="arraybuffer"?f.readAsArrayBuffer(e):i==="binary"?f.readAsDataURL(e):c(new Error(`Read file as ${i} is not available`))})}}class zj{parse(e,i){const a=JSON.parse(e);return Promise.resolve(this.toGeojson(a))}toGeojson(e){return e.crs,e}}const Oj={class:"map-row"},Bj={class:"map-col-12"},Fj={class:"map-col-12"},Nj={key:0,class:"map-col-12"},Vj={__name:"geojson-upload",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const{read:e}=Dj(),i=["point","line","area"],a=dl(t,"modelValue"),c=$e(null),{mapId:f}=Eo(),{trans:o}=ga(f.value);function y(_){e(_).then(M=>{a.value.geojson=M,c.value=M?JSON.stringify(M,null,2):""})}return(_,M)=>(mt(),Yt("div",Oj,[Zn(_.$slots,"default"),_t("div",Bj,[zt($(qm),{modelValue:a.value.type,"onUpdate:modelValue":M[0]||(M[0]=T=>a.value.type=T),items:i,label:$(o)("map.layer-control.field.type")},null,8,["modelValue","label"])]),_t("div",Fj,[zt($(Lj),{onChange:y,accept:".json,.geojson"})]),c.value?(mt(),Yt("div",Nj,[zt($(gM),{modelValue:c.value,rows:"4",readonly:""},null,8,["modelValue"])])):on("",!0)]))}};class TA{get default_value(){return{}}validate(e){return!!e.name}}class Uj extends TA{get component(){return()=>Vj}get default_value(){return{type:"point",geojson:null}}validate(e){return!(!e.name||!e.geojson||!e.type)}get create(){return e=>eE({...e})}}class jj extends TA{get component(){return()=>vj}validate(e){return!(!e.name||!e.url)}get create(){return e=>aj({...e})}}class Hj extends TA{get component(){return()=>Mj}get default_value(){return{bounds:[-180,-85.051129,180,85.051129],minzoom:0,maxzoom:24}}validate(e){return!(!e.name||!e.url)}get create(){return e=>tE({name:e.name,...e,tiles:[e.url]})}}const $2={"raster-url":"Raster url layer","raster-json":"Raster json layer",geojson:"Geojson layer"};class Gj{constructor(e){this.setType(e)}setType(e){this.helper=qj.create(e)}get default_value(){return this.helper.default_value}get create(){return this.helper.create}get component(){return this.helper.component||nE}validate(e){return this.helper.validate(e)}}const qj={create(t){switch(t){case"raster-url":return new Hj;case"raster-json":return new jj;case"geojson":return new Uj;default:throw new Error("not support type: "+t)}}},Wj={class:"create-control-container"},Zj={class:"form-container"},$j={class:"map-col-12"},Yj={class:"map-col-12"},Xj={name:"create-layer-control"},Kj=Object.assign(Xj,{props:{show:Boolean},emits:["update:show"],setup(t,{emit:e}){const i=t,{mapId:a,moduleContainerProps:c,callMap:f}=Eo(i),{trans:o}=ga(a.value),y=e,_=Ge({get(){return i.show},set(et){y("update:show",et)}}),M={type:"geojson"},T=$e(1),k=$e(()=>nE),P=new Gj(M.type),O=$e({...M,config:{name:"",...P.default_value}}),G=Object.keys($2).map(et=>({value:et,text:$2[et]}));function H(et){P.setType(et),k.value=P.component,O.value={config:{name:O.value.config.name,...P.default_value},type:O.value.type}}function X(et){const xt=P.create;if(!xt||!P.validate(et.config))return;let Nt=xt(et.config);f(It=>{sb(It.id,Nt)}),st()}function st(){P.setType(M.type),O.value={...M,config:{name:"",...P.default_value}},T.value++}function K(){st()}return ml(()=>{H(O.value.type)}),(et,xt)=>(mt(),Oe($(Da),La(ma($(c))),{draggable:se(Nt=>[zt($(pf),er({show:_.value,"onUpdate:show":xt[4]||(xt[4]=It=>_.value=It)},Nt,{width:400,height:300,onClose:K,title:$(o)("map.layer-control.create.title")}),{default:se(()=>[_t("div",Wj,[_t("div",Zj,[(mt(),Oe(oc(k.value()),{modelValue:O.value.config,"onUpdate:modelValue":xt[2]||(xt[2]=It=>O.value.config=It),class:"create-control-form",key:T.value},{default:se(()=>[_t("div",$j,[zt($(Oo),{modelValue:O.value.config.name,"onUpdate:modelValue":xt[0]||(xt[0]=It=>O.value.config.name=It),label:$(o)("map.layer-control.field.name")},null,8,["modelValue","label"])]),_t("div",Yj,[zt($(qm),{modelValue:O.value.type,"onUpdate:modelValue":[xt[1]||(xt[1]=It=>O.value.type=It),H],items:$(G),label:$(o)("map.layer-control.field.type")},null,8,["modelValue","items","label"])])]),_:1},8,["modelValue"]))]),zt($(Oc),{onClick:xt[3]||(xt[3]=It=>X(O.value)),class:"btn-container"},{default:se(()=>[fa(yn($(o)("map.layer-control.create-btn")),1)]),_:1})])]),_:2},1040,["show","title"])]),_:1},16))}}),Qj=jn(Kj,[["__scopeId","data-v-3faf0b45"]]),Jj={components:{SvgIcon:Bn},props:{isSelected:Boolean,disabledDrag:Boolean,item:{type:Object,default:()=>({})}},computed:{path(){return{draggable:n4}}}},tH={class:"draggable-handle__icon"},eH={class:"draggale-item__info"};function nH(t,e,i,a,c,f){const o=tc("SvgIcon");return mt(),Yt("div",{class:Zo(["draggale-item",{"draggale-item-active":i.isSelected}])},[i.disabledDrag?on("",!0):(mt(),Yt("div",{key:0,class:"draggable-handle",style:Jr({background:i.item.color})},[_t("div",tH,[zt(o,{size:"14",type:"mdi",path:f.path.draggable},null,8,["path"])])],4)),_t("div",eH,[Zn(t.$slots,"default",{},void 0,!0)])],2)}const lb=jn(Jj,[["render",nH],["__scopeId","data-v-4e90311d"]]);/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Y2(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),i.push.apply(i,a)}return i}function xh(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Y2(Object(i),!0).forEach(function(a){iH(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Y2(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function M0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M0=function(e){return typeof e}:M0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M0(t)}function iH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function uf(){return uf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},uf.apply(this,arguments)}function rH(t,e){if(t==null)return{};var i={},a=Object.keys(t),c,f;for(f=0;f<a.length;f++)c=a[f],!(e.indexOf(c)>=0)&&(i[c]=t[c]);return i}function oH(t,e){if(t==null)return{};var i=rH(t,e),a,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(c=0;c<f.length;c++)a=f[c],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}var aH="1.15.2";function of(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var df=of(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),jv=of(/Edge/i),X2=of(/firefox/i),uv=of(/safari/i)&&!of(/chrome/i)&&!of(/android/i),iE=of(/iP(ad|od|hone)/i),rE=of(/chrome/i)&&of(/android/i),oE={capture:!1,passive:!1};function Br(t,e,i){t.addEventListener(e,i,!df&&oE)}function _r(t,e,i){t.removeEventListener(e,i,!df&&oE)}function t_(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function sH(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Rc(t,e,i,a){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&t_(t,e):t_(t,e))||a&&t===i)return t;if(t===i)break}while(t=sH(t))}return null}var K2=/\s+/g;function pu(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var a=(" "+t.className+" ").replace(K2," ").replace(" "+e+" "," ");t.className=(a+(i?" "+e:"")).replace(K2," ")}}function yi(t,e,i){var a=t&&t.style;if(a){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=i+(typeof i=="string"?"":"px")}}function Tm(t,e){var i="";if(typeof t=="string")i=t;else do{var a=yi(t,"transform");a&&a!=="none"&&(i=a+" "+i)}while(!e&&(t=t.parentNode));var c=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return c&&new c(i)}function aE(t,e,i){if(t){var a=t.getElementsByTagName(e),c=0,f=a.length;if(i)for(;c<f;c++)i(a[c],c);return a}return[]}function vh(){var t=document.scrollingElement;return t||document.documentElement}function ka(t,e,i,a,c){if(!(!t.getBoundingClientRect&&t!==window)){var f,o,y,_,M,T,k;if(t!==window&&t.parentNode&&t!==vh()?(f=t.getBoundingClientRect(),o=f.top,y=f.left,_=f.bottom,M=f.right,T=f.height,k=f.width):(o=0,y=0,_=window.innerHeight,M=window.innerWidth,T=window.innerHeight,k=window.innerWidth),(e||i)&&t!==window&&(c=c||t.parentNode,!df))do if(c&&c.getBoundingClientRect&&(yi(c,"transform")!=="none"||i&&yi(c,"position")!=="static")){var P=c.getBoundingClientRect();o-=P.top+parseInt(yi(c,"border-top-width")),y-=P.left+parseInt(yi(c,"border-left-width")),_=o+f.height,M=y+f.width;break}while(c=c.parentNode);if(a&&t!==window){var O=Tm(c||t),G=O&&O.a,H=O&&O.d;O&&(o/=H,y/=G,k/=G,T/=H,_=o+T,M=y+k)}return{top:o,left:y,bottom:_,right:M,width:k,height:T}}}function Q2(t,e,i){for(var a=op(t,!0),c=ka(t)[e];a;){var f=ka(a)[i],o=void 0;if(o=c>=f,!o)return a;if(a===vh())break;a=op(a,!1)}return!1}function Fm(t,e,i,a){for(var c=0,f=0,o=t.children;f<o.length;){if(o[f].style.display!=="none"&&o[f]!==_i.ghost&&(a||o[f]!==_i.dragged)&&Rc(o[f],i.draggable,t,!1)){if(c===e)return o[f];c++}f++}return null}function kA(t,e){for(var i=t.lastElementChild;i&&(i===_i.ghost||yi(i,"display")==="none"||e&&!t_(i,e));)i=i.previousElementSibling;return i||null}function Ju(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==_i.clone&&(!e||t_(t,e))&&i++;return i}function J2(t){var e=0,i=0,a=vh();if(t)do{var c=Tm(t),f=c.a,o=c.d;e+=t.scrollLeft*f,i+=t.scrollTop*o}while(t!==a&&(t=t.parentNode));return[e,i]}function lH(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t[i][a])return Number(i)}return-1}function op(t,e){if(!t||!t.getBoundingClientRect)return vh();var i=t,a=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var c=yi(i);if(i.clientWidth<i.scrollWidth&&(c.overflowX=="auto"||c.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(c.overflowY=="auto"||c.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return vh();if(a||e)return i;a=!0}}while(i=i.parentNode);return vh()}function uH(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function xx(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var cv;function sE(t,e){return function(){if(!cv){var i=arguments,a=this;i.length===1?t.call(a,i[0]):t.apply(a,i),cv=setTimeout(function(){cv=void 0},e)}}}function cH(){clearTimeout(cv),cv=void 0}function lE(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function uE(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function cE(t,e,i){var a={};return Array.from(t.children).forEach(function(c){var f,o,y,_;if(!(!Rc(c,e.draggable,t,!1)||c.animated||c===i)){var M=ka(c);a.left=Math.min((f=a.left)!==null&&f!==void 0?f:1/0,M.left),a.top=Math.min((o=a.top)!==null&&o!==void 0?o:1/0,M.top),a.right=Math.max((y=a.right)!==null&&y!==void 0?y:-1/0,M.right),a.bottom=Math.max((_=a.bottom)!==null&&_!==void 0?_:-1/0,M.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var vu="Sortable"+new Date().getTime();function hH(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(c){if(!(yi(c,"display")==="none"||c===_i.ghost)){t.push({target:c,rect:ka(c)});var f=xh({},t[t.length-1].rect);if(c.thisAnimationDuration){var o=Tm(c,!0);o&&(f.top-=o.f,f.left-=o.e)}c.fromRect=f}})}},addAnimationState:function(a){t.push(a)},removeAnimationState:function(a){t.splice(lH(t,{target:a}),1)},animateAll:function(a){var c=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var f=!1,o=0;t.forEach(function(y){var _=0,M=y.target,T=M.fromRect,k=ka(M),P=M.prevFromRect,O=M.prevToRect,G=y.rect,H=Tm(M,!0);H&&(k.top-=H.f,k.left-=H.e),M.toRect=k,M.thisAnimationDuration&&xx(P,k)&&!xx(T,k)&&(G.top-k.top)/(G.left-k.left)===(T.top-k.top)/(T.left-k.left)&&(_=pH(G,P,O,c.options)),xx(k,T)||(M.prevFromRect=T,M.prevToRect=k,_||(_=c.options.animation),c.animate(M,G,k,_)),_&&(f=!0,o=Math.max(o,_),clearTimeout(M.animationResetTimer),M.animationResetTimer=setTimeout(function(){M.animationTime=0,M.prevFromRect=null,M.fromRect=null,M.prevToRect=null,M.thisAnimationDuration=null},_),M.thisAnimationDuration=_)}),clearTimeout(e),f?e=setTimeout(function(){typeof a=="function"&&a()},o):typeof a=="function"&&a(),t=[]},animate:function(a,c,f,o){if(o){yi(a,"transition",""),yi(a,"transform","");var y=Tm(this.el),_=y&&y.a,M=y&&y.d,T=(c.left-f.left)/(_||1),k=(c.top-f.top)/(M||1);a.animatingX=!!T,a.animatingY=!!k,yi(a,"transform","translate3d("+T+"px,"+k+"px,0)"),this.forRepaintDummy=fH(a),yi(a,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),yi(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){yi(a,"transition",""),yi(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},o)}}}}function fH(t){return t.offsetWidth}function pH(t,e,i,a){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*a.animation}var fm=[],bx={initializeByDefault:!0},Hv={mount:function(e){for(var i in bx)bx.hasOwnProperty(i)&&!(i in e)&&(e[i]=bx[i]);fm.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),fm.push(e)},pluginEvent:function(e,i,a){var c=this;this.eventCanceled=!1,a.cancel=function(){c.eventCanceled=!0};var f=e+"Global";fm.forEach(function(o){i[o.pluginName]&&(i[o.pluginName][f]&&i[o.pluginName][f](xh({sortable:i},a)),i.options[o.pluginName]&&i[o.pluginName][e]&&i[o.pluginName][e](xh({sortable:i},a)))})},initializePlugins:function(e,i,a,c){fm.forEach(function(y){var _=y.pluginName;if(!(!e.options[_]&&!y.initializeByDefault)){var M=new y(e,i,e.options);M.sortable=e,M.options=e.options,e[_]=M,uf(a,M.defaults)}});for(var f in e.options)if(e.options.hasOwnProperty(f)){var o=this.modifyOption(e,f,e.options[f]);typeof o<"u"&&(e.options[f]=o)}},getEventProperties:function(e,i){var a={};return fm.forEach(function(c){typeof c.eventProperties=="function"&&uf(a,c.eventProperties.call(i[c.pluginName],e))}),a},modifyOption:function(e,i,a){var c;return fm.forEach(function(f){e[f.pluginName]&&f.optionListeners&&typeof f.optionListeners[i]=="function"&&(c=f.optionListeners[i].call(e[f.pluginName],a))}),c}};function dH(t){var e=t.sortable,i=t.rootEl,a=t.name,c=t.targetEl,f=t.cloneEl,o=t.toEl,y=t.fromEl,_=t.oldIndex,M=t.newIndex,T=t.oldDraggableIndex,k=t.newDraggableIndex,P=t.originalEvent,O=t.putSortable,G=t.extraEventProperties;if(e=e||i&&i[vu],!!e){var H,X=e.options,st="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!df&&!jv?H=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(H=document.createEvent("Event"),H.initEvent(a,!0,!0)),H.to=o||i,H.from=y||i,H.item=c||i,H.clone=f,H.oldIndex=_,H.newIndex=M,H.oldDraggableIndex=T,H.newDraggableIndex=k,H.originalEvent=P,H.pullMode=O?O.lastPutMode:void 0;var K=xh(xh({},G),Hv.getEventProperties(a,e));for(var et in K)H[et]=K[et];i&&i.dispatchEvent(H),X[st]&&X[st].call(e,H)}}var mH=["evt"],Ul=function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=a.evt,f=oH(a,mH);Hv.pluginEvent.bind(_i)(e,i,xh({dragEl:pn,parentEl:ea,ghostEl:Bi,rootEl:zo,nextEl:ed,lastDownEl:E0,cloneEl:Go,cloneHidden:np,dragStarted:Hg,putSortable:gs,activeSortable:_i.active,originalEvent:c,oldIndex:bm,oldDraggableIndex:hv,newIndex:du,newDraggableIndex:tp,hideGhostForTarget:dE,unhideGhostForTarget:mE,cloneNowHidden:function(){np=!0},cloneNowShown:function(){np=!1},dispatchSortableEvent:function(y){cl({sortable:i,name:y,originalEvent:c})}},f))};function cl(t){dH(xh({putSortable:gs,cloneEl:Go,targetEl:pn,rootEl:zo,oldIndex:bm,oldDraggableIndex:hv,newIndex:du,newDraggableIndex:tp},t))}var pn,ea,Bi,zo,ed,E0,Go,np,bm,du,hv,tp,f0,gs,gm=!1,e_=!1,n_=[],Jp,Lc,Ax,wx,tC,eC,Hg,pm,fv,pv=!1,p0=!1,S0,Ns,Cx=[],ub=!1,i_=[],W_=typeof document<"u",d0=iE,nC=jv||df?"cssFloat":"float",gH=W_&&!rE&&!iE&&"draggable"in document.createElement("div"),hE=function(){if(W_){if(df)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),fE=function(e,i){var a=yi(e),c=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),f=Fm(e,0,i),o=Fm(e,1,i),y=f&&yi(f),_=o&&yi(o),M=y&&parseInt(y.marginLeft)+parseInt(y.marginRight)+ka(f).width,T=_&&parseInt(_.marginLeft)+parseInt(_.marginRight)+ka(o).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(f&&y.float&&y.float!=="none"){var k=y.float==="left"?"left":"right";return o&&(_.clear==="both"||_.clear===k)?"vertical":"horizontal"}return f&&(y.display==="block"||y.display==="flex"||y.display==="table"||y.display==="grid"||M>=c&&a[nC]==="none"||o&&a[nC]==="none"&&M+T>c)?"vertical":"horizontal"},vH=function(e,i,a){var c=a?e.left:e.top,f=a?e.right:e.bottom,o=a?e.width:e.height,y=a?i.left:i.top,_=a?i.right:i.bottom,M=a?i.width:i.height;return c===y||f===_||c+o/2===y+M/2},yH=function(e,i){var a;return n_.some(function(c){var f=c[vu].options.emptyInsertThreshold;if(!(!f||kA(c))){var o=ka(c),y=e>=o.left-f&&e<=o.right+f,_=i>=o.top-f&&i<=o.bottom+f;if(y&&_)return a=c}}),a},pE=function(e){function i(f,o){return function(y,_,M,T){var k=y.options.group.name&&_.options.group.name&&y.options.group.name===_.options.group.name;if(f==null&&(o||k))return!0;if(f==null||f===!1)return!1;if(o&&f==="clone")return f;if(typeof f=="function")return i(f(y,_,M,T),o)(y,_,M,T);var P=(o?y:_).options.group.name;return f===!0||typeof f=="string"&&f===P||f.join&&f.indexOf(P)>-1}}var a={},c=e.group;(!c||M0(c)!="object")&&(c={name:c}),a.name=c.name,a.checkPull=i(c.pull,!0),a.checkPut=i(c.put),a.revertClone=c.revertClone,e.group=a},dE=function(){!hE&&Bi&&yi(Bi,"display","none")},mE=function(){!hE&&Bi&&yi(Bi,"display","")};W_&&!rE&&document.addEventListener("click",function(t){if(e_)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),e_=!1,!1},!0);var td=function(e){if(pn){e=e.touches?e.touches[0]:e;var i=yH(e.clientX,e.clientY);if(i){var a={};for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.target=a.rootEl=i,a.preventDefault=void 0,a.stopPropagation=void 0,i[vu]._onDragOver(a)}}},_H=function(e){pn&&pn.parentNode[vu]._isOutsideThisEl(e.target)};function _i(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=uf({},e),t[vu]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fE(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,y){o.setData("Text",y.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_i.supportPointer!==!1&&"PointerEvent"in window&&!uv,emptyInsertThreshold:5};Hv.initializePlugins(this,t,i);for(var a in i)!(a in e)&&(e[a]=i[a]);pE(e);for(var c in this)c.charAt(0)==="_"&&typeof this[c]=="function"&&(this[c]=this[c].bind(this));this.nativeDraggable=e.forceFallback?!1:gH,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Br(t,"pointerdown",this._onTapStart):(Br(t,"mousedown",this._onTapStart),Br(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Br(t,"dragover",this),Br(t,"dragenter",this)),n_.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),uf(this,hH())}_i.prototype={constructor:_i,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(pm=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,pn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,a=this.el,c=this.options,f=c.preventOnFilter,o=e.type,y=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,_=(y||e).target,M=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||_,T=c.filter;if(EH(a),!pn&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||c.disabled)&&!M.isContentEditable&&!(!this.nativeDraggable&&uv&&_&&_.tagName.toUpperCase()==="SELECT")&&(_=Rc(_,c.draggable,a,!1),!(_&&_.animated)&&E0!==_)){if(bm=Ju(_),hv=Ju(_,c.draggable),typeof T=="function"){if(T.call(this,e,_,this)){cl({sortable:i,rootEl:M,name:"filter",targetEl:_,toEl:a,fromEl:a}),Ul("filter",i,{evt:e}),f&&e.cancelable&&e.preventDefault();return}}else if(T&&(T=T.split(",").some(function(k){if(k=Rc(M,k.trim(),a,!1),k)return cl({sortable:i,rootEl:k,name:"filter",targetEl:_,fromEl:a,toEl:a}),Ul("filter",i,{evt:e}),!0}),T)){f&&e.cancelable&&e.preventDefault();return}c.handle&&!Rc(M,c.handle,a,!1)||this._prepareDragStart(e,y,_)}}},_prepareDragStart:function(e,i,a){var c=this,f=c.el,o=c.options,y=f.ownerDocument,_;if(a&&!pn&&a.parentNode===f){var M=ka(a);if(zo=f,pn=a,ea=pn.parentNode,ed=pn.nextSibling,E0=a,f0=o.group,_i.dragged=pn,Jp={target:pn,clientX:(i||e).clientX,clientY:(i||e).clientY},tC=Jp.clientX-M.left,eC=Jp.clientY-M.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,pn.style["will-change"]="all",_=function(){if(Ul("delayEnded",c,{evt:e}),_i.eventCanceled){c._onDrop();return}c._disableDelayedDragEvents(),!X2&&c.nativeDraggable&&(pn.draggable=!0),c._triggerDragStart(e,i),cl({sortable:c,name:"choose",originalEvent:e}),pu(pn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(T){aE(pn,T.trim(),Ix)}),Br(y,"dragover",td),Br(y,"mousemove",td),Br(y,"touchmove",td),Br(y,"mouseup",c._onDrop),Br(y,"touchend",c._onDrop),Br(y,"touchcancel",c._onDrop),X2&&this.nativeDraggable&&(this.options.touchStartThreshold=4,pn.draggable=!0),Ul("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(jv||df))){if(_i.eventCanceled){this._onDrop();return}Br(y,"mouseup",c._disableDelayedDrag),Br(y,"touchend",c._disableDelayedDrag),Br(y,"touchcancel",c._disableDelayedDrag),Br(y,"mousemove",c._delayedDragTouchMoveHandler),Br(y,"touchmove",c._delayedDragTouchMoveHandler),o.supportPointer&&Br(y,"pointermove",c._delayedDragTouchMoveHandler),c._dragStartTimer=setTimeout(_,o.delay)}else _()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){pn&&Ix(pn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;_r(e,"mouseup",this._disableDelayedDrag),_r(e,"touchend",this._disableDelayedDrag),_r(e,"touchcancel",this._disableDelayedDrag),_r(e,"mousemove",this._delayedDragTouchMoveHandler),_r(e,"touchmove",this._delayedDragTouchMoveHandler),_r(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?Br(document,"pointermove",this._onTouchMove):i?Br(document,"touchmove",this._onTouchMove):Br(document,"mousemove",this._onTouchMove):(Br(pn,"dragend",this),Br(zo,"dragstart",this._onDragStart));try{document.selection?T0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(gm=!1,zo&&pn){Ul("dragStarted",this,{evt:i}),this.nativeDraggable&&Br(document,"dragover",_H);var a=this.options;!e&&pu(pn,a.dragClass,!1),pu(pn,a.ghostClass,!0),_i.active=this,e&&this._appendGhost(),cl({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(Lc){this._lastX=Lc.clientX,this._lastY=Lc.clientY,dE();for(var e=document.elementFromPoint(Lc.clientX,Lc.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Lc.clientX,Lc.clientY),e!==i);)i=e;if(pn.parentNode[vu]._isOutsideThisEl(e),i)do{if(i[vu]){var a=void 0;if(a=i[vu]._onDragOver({clientX:Lc.clientX,clientY:Lc.clientY,target:e,rootEl:i}),a&&!this.options.dragoverBubble)break}e=i}while(i=i.parentNode);mE()}},_onTouchMove:function(e){if(Jp){var i=this.options,a=i.fallbackTolerance,c=i.fallbackOffset,f=e.touches?e.touches[0]:e,o=Bi&&Tm(Bi,!0),y=Bi&&o&&o.a,_=Bi&&o&&o.d,M=d0&&Ns&&J2(Ns),T=(f.clientX-Jp.clientX+c.x)/(y||1)+(M?M[0]-Cx[0]:0)/(y||1),k=(f.clientY-Jp.clientY+c.y)/(_||1)+(M?M[1]-Cx[1]:0)/(_||1);if(!_i.active&&!gm){if(a&&Math.max(Math.abs(f.clientX-this._lastX),Math.abs(f.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(Bi){o?(o.e+=T-(Ax||0),o.f+=k-(wx||0)):o={a:1,b:0,c:0,d:1,e:T,f:k};var P="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");yi(Bi,"webkitTransform",P),yi(Bi,"mozTransform",P),yi(Bi,"msTransform",P),yi(Bi,"transform",P),Ax=T,wx=k,Lc=f}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Bi){var e=this.options.fallbackOnBody?document.body:zo,i=ka(pn,!0,d0,!0,e),a=this.options;if(d0){for(Ns=e;yi(Ns,"position")==="static"&&yi(Ns,"transform")==="none"&&Ns!==document;)Ns=Ns.parentNode;Ns!==document.body&&Ns!==document.documentElement?(Ns===document&&(Ns=vh()),i.top+=Ns.scrollTop,i.left+=Ns.scrollLeft):Ns=vh(),Cx=J2(Ns)}Bi=pn.cloneNode(!0),pu(Bi,a.ghostClass,!1),pu(Bi,a.fallbackClass,!0),pu(Bi,a.dragClass,!0),yi(Bi,"transition",""),yi(Bi,"transform",""),yi(Bi,"box-sizing","border-box"),yi(Bi,"margin",0),yi(Bi,"top",i.top),yi(Bi,"left",i.left),yi(Bi,"width",i.width),yi(Bi,"height",i.height),yi(Bi,"opacity","0.8"),yi(Bi,"position",d0?"absolute":"fixed"),yi(Bi,"zIndex","100000"),yi(Bi,"pointerEvents","none"),_i.ghost=Bi,e.appendChild(Bi),yi(Bi,"transform-origin",tC/parseInt(Bi.style.width)*100+"% "+eC/parseInt(Bi.style.height)*100+"%")}},_onDragStart:function(e,i){var a=this,c=e.dataTransfer,f=a.options;if(Ul("dragStart",this,{evt:e}),_i.eventCanceled){this._onDrop();return}Ul("setupClone",this),_i.eventCanceled||(Go=uE(pn),Go.removeAttribute("id"),Go.draggable=!1,Go.style["will-change"]="",this._hideClone(),pu(Go,this.options.chosenClass,!1),_i.clone=Go),a.cloneId=T0(function(){Ul("clone",a),!_i.eventCanceled&&(a.options.removeCloneOnHide||zo.insertBefore(Go,pn),a._hideClone(),cl({sortable:a,name:"clone"}))}),!i&&pu(pn,f.dragClass,!0),i?(e_=!0,a._loopId=setInterval(a._emulateDragOver,50)):(_r(document,"mouseup",a._onDrop),_r(document,"touchend",a._onDrop),_r(document,"touchcancel",a._onDrop),c&&(c.effectAllowed="move",f.setData&&f.setData.call(a,c,pn)),Br(document,"drop",a),yi(pn,"transform","translateZ(0)")),gm=!0,a._dragStartId=T0(a._dragStarted.bind(a,i,e)),Br(document,"selectstart",a),Hg=!0,uv&&yi(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,a=e.target,c,f,o,y=this.options,_=y.group,M=_i.active,T=f0===_,k=y.sort,P=gs||M,O,G=this,H=!1;if(ub)return;function X(Ue,ki){Ul(Ue,G,xh({evt:e,isOwner:T,axis:O?"vertical":"horizontal",revert:o,dragRect:c,targetRect:f,canSort:k,fromSortable:P,target:a,completed:K,onMove:function(Vn,gn){return m0(zo,i,pn,c,Vn,ka(Vn),e,gn)},changed:et},ki))}function st(){X("dragOverAnimationCapture"),G.captureAnimationState(),G!==P&&P.captureAnimationState()}function K(Ue){return X("dragOverCompleted",{insertion:Ue}),Ue&&(T?M._hideClone():M._showClone(G),G!==P&&(pu(pn,gs?gs.options.ghostClass:M.options.ghostClass,!1),pu(pn,y.ghostClass,!0)),gs!==G&&G!==_i.active?gs=G:G===_i.active&&gs&&(gs=null),P===G&&(G._ignoreWhileAnimating=a),G.animateAll(function(){X("dragOverAnimationComplete"),G._ignoreWhileAnimating=null}),G!==P&&(P.animateAll(),P._ignoreWhileAnimating=null)),(a===pn&&!pn.animated||a===i&&!a.animated)&&(pm=null),!y.dragoverBubble&&!e.rootEl&&a!==document&&(pn.parentNode[vu]._isOutsideThisEl(e.target),!Ue&&td(e)),!y.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),H=!0}function et(){du=Ju(pn),tp=Ju(pn,y.draggable),cl({sortable:G,name:"change",toEl:i,newIndex:du,newDraggableIndex:tp,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=Rc(a,y.draggable,i,!0),X("dragOver"),_i.eventCanceled)return H;if(pn.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||G._ignoreWhileAnimating===a)return K(!1);if(e_=!1,M&&!y.disabled&&(T?k||(o=ea!==zo):gs===this||(this.lastPutMode=f0.checkPull(this,M,pn,e))&&_.checkPut(this,M,pn,e))){if(O=this._getDirection(e,a)==="vertical",c=ka(pn),X("dragOverValid"),_i.eventCanceled)return H;if(o)return ea=zo,st(),this._hideClone(),X("revert"),_i.eventCanceled||(ed?zo.insertBefore(pn,ed):zo.appendChild(pn)),K(!0);var xt=kA(i,y.draggable);if(!xt||wH(e,O,this)&&!xt.animated){if(xt===pn)return K(!1);if(xt&&i===e.target&&(a=xt),a&&(f=ka(a)),m0(zo,i,pn,c,a,f,e,!!a)!==!1)return st(),xt&&xt.nextSibling?i.insertBefore(pn,xt.nextSibling):i.appendChild(pn),ea=i,et(),K(!0)}else if(xt&&AH(e,O,this)){var Nt=Fm(i,0,y,!0);if(Nt===pn)return K(!1);if(a=Nt,f=ka(a),m0(zo,i,pn,c,a,f,e,!1)!==!1)return st(),i.insertBefore(pn,Nt),ea=i,et(),K(!0)}else if(a.parentNode===i){f=ka(a);var It=0,St,Gt=pn.parentNode!==i,Dt=!vH(pn.animated&&pn.toRect||c,a.animated&&a.toRect||f,O),Qt=O?"top":"left",jt=Q2(a,"top","top")||Q2(pn,"top","top"),Vt=jt?jt.scrollTop:void 0;pm!==a&&(St=f[Qt],pv=!1,p0=!Dt&&y.invertSwap||Gt),It=CH(e,a,f,O,Dt?1:y.swapThreshold,y.invertedSwapThreshold==null?y.swapThreshold:y.invertedSwapThreshold,p0,pm===a);var Bt;if(It!==0){var de=Ju(pn);do de-=It,Bt=ea.children[de];while(Bt&&(yi(Bt,"display")==="none"||Bt===Bi))}if(It===0||Bt===a)return K(!1);pm=a,fv=It;var An=a.nextElementSibling,_e=!1;_e=It===1;var He=m0(zo,i,pn,c,a,f,e,_e);if(He!==!1)return(He===1||He===-1)&&(_e=He===1),ub=!0,setTimeout(bH,30),st(),_e&&!An?i.appendChild(pn):a.parentNode.insertBefore(pn,_e?An:a),jt&&lE(jt,0,Vt-jt.scrollTop),ea=pn.parentNode,St!==void 0&&!p0&&(S0=Math.abs(St-ka(a)[Qt])),et(),K(!0)}if(i.contains(pn))return K(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){_r(document,"mousemove",this._onTouchMove),_r(document,"touchmove",this._onTouchMove),_r(document,"pointermove",this._onTouchMove),_r(document,"dragover",td),_r(document,"mousemove",td),_r(document,"touchmove",td)},_offUpEvents:function(){var e=this.el.ownerDocument;_r(e,"mouseup",this._onDrop),_r(e,"touchend",this._onDrop),_r(e,"pointerup",this._onDrop),_r(e,"touchcancel",this._onDrop),_r(document,"selectstart",this)},_onDrop:function(e){var i=this.el,a=this.options;if(du=Ju(pn),tp=Ju(pn,a.draggable),Ul("drop",this,{evt:e}),ea=pn&&pn.parentNode,du=Ju(pn),tp=Ju(pn,a.draggable),_i.eventCanceled){this._nulling();return}gm=!1,p0=!1,pv=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),cb(this.cloneId),cb(this._dragStartId),this.nativeDraggable&&(_r(document,"drop",this),_r(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),uv&&yi(document.body,"user-select",""),yi(pn,"transform",""),e&&(Hg&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),Bi&&Bi.parentNode&&Bi.parentNode.removeChild(Bi),(zo===ea||gs&&gs.lastPutMode!=="clone")&&Go&&Go.parentNode&&Go.parentNode.removeChild(Go),pn&&(this.nativeDraggable&&_r(pn,"dragend",this),Ix(pn),pn.style["will-change"]="",Hg&&!gm&&pu(pn,gs?gs.options.ghostClass:this.options.ghostClass,!1),pu(pn,this.options.chosenClass,!1),cl({sortable:this,name:"unchoose",toEl:ea,newIndex:null,newDraggableIndex:null,originalEvent:e}),zo!==ea?(du>=0&&(cl({rootEl:ea,name:"add",toEl:ea,fromEl:zo,originalEvent:e}),cl({sortable:this,name:"remove",toEl:ea,originalEvent:e}),cl({rootEl:ea,name:"sort",toEl:ea,fromEl:zo,originalEvent:e}),cl({sortable:this,name:"sort",toEl:ea,originalEvent:e})),gs&&gs.save()):du!==bm&&du>=0&&(cl({sortable:this,name:"update",toEl:ea,originalEvent:e}),cl({sortable:this,name:"sort",toEl:ea,originalEvent:e})),_i.active&&((du==null||du===-1)&&(du=bm,tp=hv),cl({sortable:this,name:"end",toEl:ea,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Ul("nulling",this),zo=pn=ea=Bi=ed=Go=E0=np=Jp=Lc=Hg=du=tp=bm=hv=pm=fv=gs=f0=_i.dragged=_i.ghost=_i.clone=_i.active=null,i_.forEach(function(e){e.checked=!0}),i_.length=Ax=wx=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":pn&&(this._onDragOver(e),xH(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,a=this.el.children,c=0,f=a.length,o=this.options;c<f;c++)i=a[c],Rc(i,o.draggable,this.el,!1)&&e.push(i.getAttribute(o.dataIdAttr)||MH(i));return e},sort:function(e,i){var a={},c=this.el;this.toArray().forEach(function(f,o){var y=c.children[o];Rc(y,this.options.draggable,c,!1)&&(a[f]=y)},this),i&&this.captureAnimationState(),e.forEach(function(f){a[f]&&(c.removeChild(a[f]),c.appendChild(a[f]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return Rc(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var a=this.options;if(i===void 0)return a[e];var c=Hv.modifyOption(this,e,i);typeof c<"u"?a[e]=c:a[e]=i,e==="group"&&pE(a)},destroy:function(){Ul("destroy",this);var e=this.el;e[vu]=null,_r(e,"mousedown",this._onTapStart),_r(e,"touchstart",this._onTapStart),_r(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(_r(e,"dragover",this),_r(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),n_.splice(n_.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!np){if(Ul("hideClone",this),_i.eventCanceled)return;yi(Go,"display","none"),this.options.removeCloneOnHide&&Go.parentNode&&Go.parentNode.removeChild(Go),np=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(np){if(Ul("showClone",this),_i.eventCanceled)return;pn.parentNode==zo&&!this.options.group.revertClone?zo.insertBefore(Go,pn):ed?zo.insertBefore(Go,ed):zo.appendChild(Go),this.options.group.revertClone&&this.animate(pn,Go),yi(Go,"display",""),np=!1}}};function xH(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function m0(t,e,i,a,c,f,o,y){var _,M=t[vu],T=M.options.onMove,k;return window.CustomEvent&&!df&&!jv?_=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent("move",!0,!0)),_.to=e,_.from=t,_.dragged=i,_.draggedRect=a,_.related=c||e,_.relatedRect=f||ka(e),_.willInsertAfter=y,_.originalEvent=o,t.dispatchEvent(_),T&&(k=T.call(M,_,o)),k}function Ix(t){t.draggable=!1}function bH(){ub=!1}function AH(t,e,i){var a=ka(Fm(i.el,0,i.options,!0)),c=cE(i.el,i.options,Bi),f=10;return e?t.clientX<c.left-f||t.clientY<a.top&&t.clientX<a.right:t.clientY<c.top-f||t.clientY<a.bottom&&t.clientX<a.left}function wH(t,e,i){var a=ka(kA(i.el,i.options.draggable)),c=cE(i.el,i.options,Bi),f=10;return e?t.clientX>c.right+f||t.clientY>a.bottom&&t.clientX>a.left:t.clientY>c.bottom+f||t.clientX>a.right&&t.clientY>a.top}function CH(t,e,i,a,c,f,o,y){var _=a?t.clientY:t.clientX,M=a?i.height:i.width,T=a?i.top:i.left,k=a?i.bottom:i.right,P=!1;if(!o){if(y&&S0<M*c){if(!pv&&(fv===1?_>T+M*f/2:_<k-M*f/2)&&(pv=!0),pv)P=!0;else if(fv===1?_<T+S0:_>k-S0)return-fv}else if(_>T+M*(1-c)/2&&_<k-M*(1-c)/2)return IH(e)}return P=P||o,P&&(_<T+M*f/2||_>k-M*f/2)?_>T+M/2?1:-1:0}function IH(t){return Ju(pn)<Ju(t)?1:-1}function MH(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,a=0;i--;)a+=e.charCodeAt(i);return a.toString(36)}function EH(t){i_.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var a=e[i];a.checked&&i_.push(a)}}function T0(t){return setTimeout(t,0)}function cb(t){return clearTimeout(t)}W_&&Br(document,"touchmove",function(t){(_i.active||gm)&&t.cancelable&&t.preventDefault()});_i.utils={on:Br,off:_r,css:yi,find:aE,is:function(e,i){return!!Rc(e,i,e,!1)},extend:uH,throttle:sE,closest:Rc,toggleClass:pu,clone:uE,index:Ju,nextTick:T0,cancelNextTick:cb,detectDirection:fE,getChild:Fm};_i.get=function(t){return t[vu]};_i.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(_i.utils=xh(xh({},_i.utils),a.utils)),Hv.mount(a)})};_i.create=function(t,e){return new _i(t,e)};_i.version=aH;var Ta=[],Gg,hb,fb=!1,Mx,Ex,r_,qg;function SH(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var a=i.originalEvent;this.sortable.nativeDraggable?Br(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Br(document,"pointermove",this._handleFallbackAutoScroll):a.touches?Br(document,"touchmove",this._handleFallbackAutoScroll):Br(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var a=i.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?_r(document,"dragover",this._handleAutoScroll):(_r(document,"pointermove",this._handleFallbackAutoScroll),_r(document,"touchmove",this._handleFallbackAutoScroll),_r(document,"mousemove",this._handleFallbackAutoScroll)),iC(),k0(),cH()},nulling:function(){r_=hb=Gg=fb=qg=Mx=Ex=null,Ta.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,a){var c=this,f=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,y=document.elementFromPoint(f,o);if(r_=i,a||this.options.forceAutoScrollFallback||jv||df||uv){Sx(i,this.options,y,a);var _=op(y,!0);fb&&(!qg||f!==Mx||o!==Ex)&&(qg&&iC(),qg=setInterval(function(){var M=op(document.elementFromPoint(f,o),!0);M!==_&&(_=M,k0()),Sx(i,c.options,M,a)},10),Mx=f,Ex=o)}else{if(!this.options.bubbleScroll||op(y,!0)===vh()){k0();return}Sx(i,this.options,op(y,!1),!1)}}},uf(t,{pluginName:"scroll",initializeByDefault:!0})}function k0(){Ta.forEach(function(t){clearInterval(t.pid)}),Ta=[]}function iC(){clearInterval(qg)}var Sx=sE(function(t,e,i,a){if(e.scroll){var c=(t.touches?t.touches[0]:t).clientX,f=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,y=e.scrollSpeed,_=vh(),M=!1,T;hb!==i&&(hb=i,k0(),Gg=e.scroll,T=e.scrollFn,Gg===!0&&(Gg=op(i,!0)));var k=0,P=Gg;do{var O=P,G=ka(O),H=G.top,X=G.bottom,st=G.left,K=G.right,et=G.width,xt=G.height,Nt=void 0,It=void 0,St=O.scrollWidth,Gt=O.scrollHeight,Dt=yi(O),Qt=O.scrollLeft,jt=O.scrollTop;O===_?(Nt=et<St&&(Dt.overflowX==="auto"||Dt.overflowX==="scroll"||Dt.overflowX==="visible"),It=xt<Gt&&(Dt.overflowY==="auto"||Dt.overflowY==="scroll"||Dt.overflowY==="visible")):(Nt=et<St&&(Dt.overflowX==="auto"||Dt.overflowX==="scroll"),It=xt<Gt&&(Dt.overflowY==="auto"||Dt.overflowY==="scroll"));var Vt=Nt&&(Math.abs(K-c)<=o&&Qt+et<St)-(Math.abs(st-c)<=o&&!!Qt),Bt=It&&(Math.abs(X-f)<=o&&jt+xt<Gt)-(Math.abs(H-f)<=o&&!!jt);if(!Ta[k])for(var de=0;de<=k;de++)Ta[de]||(Ta[de]={});(Ta[k].vx!=Vt||Ta[k].vy!=Bt||Ta[k].el!==O)&&(Ta[k].el=O,Ta[k].vx=Vt,Ta[k].vy=Bt,clearInterval(Ta[k].pid),(Vt!=0||Bt!=0)&&(M=!0,Ta[k].pid=setInterval((function(){a&&this.layer===0&&_i.active._onTouchMove(r_);var An=Ta[this.layer].vy?Ta[this.layer].vy*y:0,_e=Ta[this.layer].vx?Ta[this.layer].vx*y:0;typeof T=="function"&&T.call(_i.dragged.parentNode[vu],_e,An,t,r_,Ta[this.layer].el)!=="continue"||lE(Ta[this.layer].el,_e,An)}).bind({layer:k}),24))),k++}while(e.bubbleScroll&&P!==_&&(P=op(P,!1)));fb=M}},30),gE=function(e){var i=e.originalEvent,a=e.putSortable,c=e.dragEl,f=e.activeSortable,o=e.dispatchSortableEvent,y=e.hideGhostForTarget,_=e.unhideGhostForTarget;if(i){var M=a||f;y();var T=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,k=document.elementFromPoint(T.clientX,T.clientY);_(),M&&!M.el.contains(k)&&(o("spill"),this.onSpill({dragEl:c,putSortable:a}))}};function PA(){}PA.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var c=Fm(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(i,c):this.sortable.el.appendChild(i),this.sortable.animateAll(),a&&a.animateAll()},drop:gE};uf(PA,{pluginName:"revertOnSpill"});function LA(){}LA.prototype={onSpill:function(e){var i=e.dragEl,a=e.putSortable,c=a||this.sortable;c.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),c.animateAll()},drop:gE};uf(LA,{pluginName:"removeOnSpill"});_i.mount(new SH);_i.mount(LA,PA);function vE(t,e,i={}){let a=sf();const c=$e(e.get()||[]);i&&i.group&&(a=typeof i.group=="string"?i.group:i.group.name);let f;const{document:o=uA,onAdd:y,onRemove:_,...M}=i,T={store:{get(){return Uc(e.get()).map(X=>X.id)},set(H){const st=H.toArray().map(K=>P0.value[a][K]);e.set(st),c.value=st}},onAdd(H){f==null||f.save(),y&&y(H)},onRemove(H){f==null||f.save(),_&&_(H)}},k=()=>{const H=Uc(e.get());c.value=H,rC(H,a);const X=typeof t=="string"?o==null?void 0:o.getElementById(t):ip(t);!X||f!==void 0||(f=new _i(X,{...T,...M}))},P=()=>{f==null||f.destroy(),f=void 0},O=(H,X)=>{if(X!==void 0)f==null||f.option(H,X);else return f==null?void 0:f.option(H)},G=(H=[])=>{rC(H,a),c.value=H};return hM(k),vd(P),{stop:P,start:k,option:O,items:c,setCache:G}}const P0=$e({});function rC(t,e){P0.value[e]||(P0.value[e]={}),t.forEach(i=>P0.value[e][i.id]=i)}const TH={class:"draggable-group__info"},kH=["title"],PH={class:"draggable-group__action"},LH={key:0,class:"draggable-group__divider"},DH={key:0,class:"draggable-group__nodata"},RH=["data-id"],zH=Fi({__name:"draggable-list-group",props:{layerGroup:{type:Object,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean,checkItemCanPutInChildren:{type:Function},currentItemDrag:{type:Object}},emits:["click:delete","click:un-group","click:select","drag-done","update:layer-group","update:currentItemDrag"],setup(t,{emit:e}){const i=t,a=e;function c(){a("click:select")}const f={group:{open:o4,close:r4,unGroup:R4,delete:Um,show:Nb,hide:Vb}},o=$e(!0);function y(){o.value=!o.value}function _(){a("click:delete")}function M(){a("click:un-group")}const T=$e(null),k=$e(i.layerGroup.children.slice());vE(T,{get(){return k.value},set(O){k.value=O,P()}},{handle:".draggable-handle",group:{name:"layers",pull:!0,put:i.checkItemCanPutInChildren},onChoose(O){a("update:currentItemDrag",O.oldIndex!=null?k.value[O.oldIndex]:void 0)}});function P(){xu(()=>{a("update:layer-group",{...i.layerGroup,children:k.value}),a("drag-done")})}return(O,G)=>(mt(),Oe(lb,{disabledDrag:t.disabledDrag,class:"draggable-group__item"},{default:se(()=>[_t("div",TH,[_t("span",{class:"draggable-group__title",title:t.layerGroup.name},yn(t.layerGroup.name),9,kH),_t("div",PH,[t.layerGroup.children&&t.layerGroup.children.length>0?(mt(),Yt("span",{key:0,onClick:G[0]||(G[0]=H=>M())},[zt($(Bn),{size:"14",type:"mdi",path:f.group.unGroup},null,8,["path"])])):on("",!0),_t("span",{onClick:G[1]||(G[1]=H=>_())},[zt($(Bn),{size:"14",type:"mdi",path:f.group.delete},null,8,["path"])]),_t("span",{onClick:G[2]||(G[2]=H=>y())},[o.value?(mt(),Oe($(Bn),{key:0,size:"14",type:"mdi",path:f.group.close},null,8,["path"])):(mt(),Oe($(Bn),{key:1,size:"14",type:"mdi",path:f.group.open},null,8,["path"]))])])]),o.value?(mt(),Yt("div",LH)):on("",!0),_t("div",{class:Zo({"draggable-group__children-container":o.value})},[!k.value||k.value.length<1?(mt(),Yt("div",DH," Drag layer inside this group ")):on("",!0),_t("div",{class:"draggable-group__children",ref_key:"child",ref:T},[(mt(!0),Yt(ui,null,$o(k.value,H=>(mt(),Yt("div",{class:"draggable__item",key:H.id,"data-id":H.id},[zt(lb,{disabledDrag:t.disabledDrag,isSelected:t.selected.includes(H.id),item:H},{default:se(()=>[Zn(O.$slots,"item",{group:t.layerGroup,isSelected:t.selected.includes(H.id),item:H,toggleSelect:c},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"])],8,RH))),128))],512)],2)]),_:3},8,["disabledDrag"]))}}),OH=jn(zH,[["__scopeId","data-v-7215dcfa"]]),BH=["data-id"],FH=Fi({__name:"draggable-list",props:{items:{type:Array,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean},emits:["update:selected","click-group:remove","click-drag:done","update:items"],setup(t,{expose:e,emit:i}){const a=t,c=i,f=$e([]),o=$e({}),y=$e(void 0),_=Ge({get(){return a.selected},set(St){c("update:selected",St)}}),M=$e(null),{setCache:T,items:k}=vE(M,{get(){return f.value},set(St){f.value=St}},{handle:".draggable-handle",group:{name:"layers",pull:!0,put:!0},onChoose(St){y.value=St.oldIndex!=null?f.value[St.oldIndex]:void 0},onEnd(){et()}});ml(()=>{P(a.items)});function P(St=[]){(St==null||St.length===0)&&(St=a.items),f.value=O(St),T(St)}function O(St){let Gt=[];if(!St||St.length==0)return Gt;let Dt={};return St.forEach(Qt=>{if(!Qt.group){Gt.push(Qt);return}Dt[Qt.group.id]||(Dt[Qt.group.id]=It(Qt.group),Gt.push(Dt[Qt.group.id])),Dt[Qt.group.id].children.push(Qt)}),Gt}function G(St){return St.reduce((Gt,Dt)=>(Dt.isGroup?Dt.children.length>0&&Gt.push(...Dt.children.map(Qt=>(Qt.group={id:Dt.id,name:Dt.name},Qt))):(Dt.group=void 0,Gt.push(Dt)),Gt),[])}function H(St){a.disabledSelect||(_.value.includes(St.id)?_.value=_.value.filter(Gt=>Gt!=St.id):(_.value.push(St.id),o.value[St.id]=St))}function X(St){let Gt=[];_.value&&_.value.length>0&&(f.value=f.value.filter(Qt=>!_.value.includes(Qt.id)).map(Qt=>("isGroup"in Qt&&Qt.isGroup&&(Qt.children=Qt.children.filter(jt=>!_.value.includes(jt.id))),Qt)),Gt=_.value.map(Qt=>o.value[Qt]),_.value=[],o.value={});let Dt=It({name:St||"New Group",children:Gt});f.value.unshift(Dt),Dt.children.length>0&&et(),T(f.value)}function st(St,Gt){f.value.splice(Gt,1),St.children.length>0&&f.value.splice(Gt,0,...St.children)}function K(St,Gt){f.value[Gt]={...f.value[Gt],...St}}function et(){xu(()=>{y.value=void 0,c("update:items",G(f.value)),c("click-drag:done")})}function xt(){return!(y.value&&y.value.isGroup)}function Nt(St,Gt){f.value.splice(Gt,1),c("click-group:remove",St)}function It(St){let Gt={id:`group-${new Date().getTime()}`,name:"New Group",isGroup:!0,show:!0,children:[]};return Gt=Object.assign({},Gt,St),Gt}return e({update:P,addNewGroup:X}),(St,Gt)=>(mt(),Yt("div",{ref_key:"el",ref:M,class:"draggable-group-container"},[(mt(!0),Yt(ui,null,$o($(k),(Dt,Qt)=>(mt(),Yt("div",{key:Dt.id,"data-id":Dt.id,class:"draggable__item item"},[Dt.isGroup?(mt(),Oe(OH,{key:Dt.id,"layer-group":Dt,"onUpdate:layerGroup":jt=>K(jt,Qt),disabledDrag:t.disabledDrag,"onClick:delete":jt=>Nt(Dt,Qt),"onClick:unGroup":jt=>st(Dt,Qt),checkItemCanPutInChildren:xt,onDragDone:et,"onClick:select":H,currentItemDrag:y.value,"onUpdate:currentItemDrag":Gt[0]||(Gt[0]=jt=>y.value=jt)},{item:se(jt=>[Zn(St.$slots,"item",er({ref_for:!0},jt),void 0,!0)]),_:2},1032,["layer-group","onUpdate:layerGroup","disabledDrag","onClick:delete","onClick:unGroup","currentItemDrag"])):(mt(),Oe(lb,{disabledDrag:t.disabledDrag,isSelected:_.value.includes(Dt.id),item:Dt,key:Dt.id},{default:se(()=>[Zn(St.$slots,"item",{isSelected:_.value.includes(Dt.id),item:Dt,index:Qt,toggleSelect:H},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))],8,BH))),128))],512))}}),NH=jn(FH,[["__scopeId","data-v-3320563d"]]),VH={name:"VueSlider",props:{modelValue:{},min:{default:0},max:{default:100},step:{default:1},disabled:Boolean},computed:{backgroundSize(){return(this.modelValue-this.min)*100/(this.max-this.min)+"% 100%"},form:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}},UH=["value","min","max","step","disabled"];function jH(t,e,i,a,c,f){return mt(),Yt("input",{value:f.form,onInput:e[0]||(e[0]=({target:o})=>f.form=parseFloat(o.value)),type:"range",min:i.min,max:i.max,step:i.step,style:Jr({backgroundSize:f.backgroundSize}),disabled:i.disabled},null,44,UH)}const HH=jn(VH,[["render",jH],["__scopeId","data-v-5315a848"]]),GH={__name:"layer-item-icon",props:{loading:Boolean,item:{require:!0,type:Object}},setup(t){const e={loading:Ub,layer:b_};return(i,a)=>(mt(),Yt("div",null,[t.loading?(mt(),Oe($(Bn),{key:0,size:"14",type:"mdi",path:e.loading,class:"spin"},null,8,["path"])):(mt(),Oe($(Bn),{key:1,size:"14",type:"mdi",path:e.layer},null,8,["path"]))]))}},yE=t=>(lc("data-v-c5ffb78b"),t=t(),uc(),t),qH={class:"layer-item-container"},WH={class:"layer-item__info"},ZH=["title"],$H=yE(()=>_t("div",{class:"v-spacer"},null,-1)),YH={class:"layer-item__title-action"},XH=["disabled","title","onClick"],KH=["disabled"],QH=["disabled"],JH={key:0,class:"layer-item__action"},tG={key:0,class:"layer-item__opacity"},eG=yE(()=>_t("div",{class:"v-spacer"},null,-1)),nG={key:1},iG=Fi({__name:"layer-item",props:{item:{}},emits:["update:item","click","click:remove","click:action","click:edit","click:content-menu"],setup(t,{emit:e}){const i=t,a=e,c=Ge(()=>i.item&&i.item.parent&&i.item.parent.getView("legend")),f=$e(!1),o=$e(),y={menu:Fb,loading:Ub,layer:b_,flyTo:Rv,show:Nb,hide:Vb,delete:Um,edit:E4,legendOpen:w4,legendClose:kI},_=Ge(()=>i.item.metadata&&i.item.metadata.loading);Ge(()=>i.item.show);const M=Ge({get(){return i.item.opacity},set(st){let K=i.item;K.opacity=st,a("update:item",K)}}),T=()=>{a("click:remove",i.item)};function k(){f.value=!f.value,f.value}const P=Ge(()=>{var st;return i.item?((st=gu(i.item).getView("action"))==null?void 0:st.menus)||[]:[]}),O=Ge(()=>P.value.filter(st=>st.location=="extra").sort((st,K)=>(st.order||0)-(K.order||0))),G=Ge(()=>P.value.filter(st=>st.location=="menu").sort((st,K)=>(st.order||0)-(K.order||0)));function H(st){a("click:content-menu",{event:st,actions:G.value,item:i.item})}function X(st){a("click:action",{action:st,item:i.item})}return(st,K)=>(mt(),Yt("div",qH,[_t("div",WH,[zt(GH,{class:"layer-item__icon",loading:_.value,item:{item:st.item}},null,8,["loading","item"]),_t("span",{class:"layer-item__title",title:st.item.name,onClick:K[0]||(K[0]=et=>a("click",st.item))},[_t("span",null,yn(st.item.name),1)],8,ZH),$H,_t("div",YH,[Zn(st.$slots,"pre-btn",{loading:_.value},void 0,!0),(mt(!0),Yt(ui,null,$o(O.value,(et,xt)=>(mt(),Yt(ui,{key:xt},[et.type==="item"?(mt(),Yt("button",er({key:0,class:"layer-item__button",disabled:_.value,title:et.name,ref_for:!0},et.attr,{onClick:Nt=>X(et)}),[et.icon?(mt(),Yt(ui,{key:0},[typeof et.icon!="string"?(mt(),Oe(oc(et.icon()),{key:0,item:st.item},null,8,["item"])):(mt(),Oe($(Bn),{key:1,size:"14",type:"mdi",path:et.icon},null,8,["path"]))],64)):on("",!0)],16,XH)):on("",!0)],64))),128)),st.item.config.disable_delete?on("",!0):(mt(),Yt("button",{key:0,class:"layer-item__button",disabled:_.value,onClick:_o(T,["stop"])},[zt($(Bn),{size:"14",type:"mdi",path:y.delete},null,8,["path"])],8,KH)),Zn(st.$slots,"extra-btn",{loading:_.value},void 0,!0),G.value.length>0?(mt(),Yt("button",{key:1,class:"layer-item__button",disabled:_.value,onClick:_o(H,["prevent","stop"])},[zt($(Bn),{size:"14",type:"mdi",path:y.menu},null,8,["path"])],8,QH)):on("",!0),st.item.config.disabled_opacity&&c.value?(mt(),Yt("button",{key:2,class:"layer-item__button",onClick:_o(k,["stop"])},[zt($(Bn),{size:"14",type:"mdi",path:f.value?y.legendClose:y.legendOpen},null,8,["path"])])):on("",!0)])]),st.item.config.disabled_opacity?on("",!0):(mt(),Yt("div",JH,[st.item.config.disabled_opacity?on("",!0):(mt(),Yt("div",tG,[zt(HH,{modelValue:M.value,"onUpdate:modelValue":K[1]||(K[1]=et=>M.value=et),modelModifiers:{number:!0},max:"1",step:"0.01",disabled:_.value},null,8,["modelValue","disabled"])])),eG,c.value?(mt(),Yt("button",{key:1,class:"layer-item__button",onClick:_o(k,["stop"])},[zt($(Bn),{size:"14",type:"mdi",path:f.value?y.legendClose:y.legendOpen},null,8,["path"])])):on("",!0)])),f.value&&o.value?(mt(),Yt("div",nG,[(mt(!0),Yt(ui,null,$o(o.value.items,(et,xt)=>(mt(),Oe(oc(o.value.component),{value:et,key:xt},null,8,["value"]))),128))])):on("",!0)]))}}),rG=jn(iG,[["__scopeId","data-v-c5ffb78b"]]),oG=t=>(lc("data-v-f24a9067"),t=t(),uc(),t),aG={class:"layer-control-container"},sG={class:"layer-control__header"},lG=oG(()=>_t("div",{class:"v-spacer"},null,-1)),uG={class:"layer-control__list"},cG={class:"layer-context-menu"},hG=["onClick"],fG={class:"layer-context-menu__item-icon"},pG=["innerHTML"],dG=Fi({__name:"LayerList",props:{...os,disabledDrag:Boolean,disabled:Boolean},emits:["click:create"],setup(t,{emit:e}){const i=t,a=e,c={icon:b_,menu:Fb,group:{create:TI},deleteAll:Um,layer:{create:_p}},{callMap:f,mapId:o}=Eo(i),y=Ge(()=>hj(o.value).value);pl(y,()=>{st(),xu(()=>{X()})},{deep:!0});const _=$e([]);ml(()=>{st(),X()});const M=$e(void 0),T=$e([]);function k(){f(jt=>{let Vt="";_.value.slice().reverse().forEach(async(Bt,de)=>{Bt.index=de;let An=gu(Bt);An&&(An.run("moveLayer",jt,Vt),Vt=await An.run("getBeforeId",jt,Vt))})})}function P(jt){jt&&typeof jt!="string"&&(!jt||!jt.children||jt.children.length===0||jt.children.forEach(Vt=>{let Bt=gu(Vt);Bt&&_x(o.value,Bt)}))}function O(jt){f(Vt=>{let Bt=gu(jt);Bt&&(Bt.run("toggleShow",Vt,jt.show),jt.config.disabled_opacity||Bt.run("setOpacity",Vt,jt.opacity))})}function G(jt){jt&&f(Vt=>{Vt.fitBounds(jt,{padding:50,duration:10})})}function H(jt){if(!jt)return;let Vt=gu(jt);Vt&&_x(o.value,Vt)}function X(){M.value&&M.value.update(_.value)}function st(){_.value&&(_.value=SA(o.value,"list").sort((jt,Vt)=>Vt.index-jt.index))}function K(){a("click:create")}function et(){M.value&&M.value.addNewGroup("")}function xt(){!_.value||_.value.length===0||_.value.forEach(jt=>{let Vt=gu(jt);Vt&&_x(o.value,Vt)})}const Nt=$e(),It=Wl({items:[],view:void 0});function St({event:jt,item:Vt,actions:Bt}){It.items=Bt?[...Bt]:[],It.view=Vt,Nt.value&&Nt.value.open(jt,Vt)}function Gt(){It.items=[],It.view=void 0,Nt.value&&Nt.value.close()}const Dt={"to-bound":jt=>{G(jt.metadata.bounds)},"toggle-show":jt=>{jt.show=!jt.show,O(jt)}};function Qt({action:jt,item:Vt}){const Bt=jt;if(!Bt||Bt.type!=="item"||!Vt)return;let de=gu(Vt);if(!de)return;const An=de.getView("action"),_e=An.get(Bt.id);_e.type&&Dt[_e.type]?Dt[_e.type](Vt,de):An.call(Bt.id,o.value)}return(jt,Vt)=>(mt(),Yt("div",aG,[_t("div",sG,[_t("button",{class:"layer-item__button",onClick:Vt[0]||(Vt[0]=_o(Bt=>K(),["stop"]))},[zt($(Bn),{size:"14",type:"mdi",path:c.layer.create},null,8,["path"])]),lG,_t("button",{class:"layer-item__button",onClick:Vt[1]||(Vt[1]=Bt=>et())},[zt($(Bn),{size:"14",type:"mdi",path:c.group.create},null,8,["path"])]),_t("button",{class:"layer-item__button",onClick:xt},[zt($(Bn),{size:"14",type:"mdi",path:c.deleteAll},null,8,["path"])])]),_t("div",uG,[zt(NH,{ref_key:"groupRef",ref:M,items:_.value,"onUpdate:items":Vt[2]||(Vt[2]=Bt=>_.value=Bt),selected:T.value,"onUpdate:selected":Vt[3]||(Vt[3]=Bt=>T.value=Bt),disabled:t.disabled,disabledDrag:t.disabledDrag,"onClickDrag:done":Vt[4]||(Vt[4]=Bt=>k()),"onClickGroup:remove":P},{item:se(({isSelected:Bt,item:de,toggleSelect:An})=>[Zn(jt.$slots,"item",{item:de,isSelected:Bt,toggleSelect:An},()=>[(mt(),Oe(oc(de.component||rG),{item:de,isSelected:Bt,onClick:_e=>An(de),"onUpdate:item":O,"onClick:remove":H,"onClick:contentMenu":St,"onClick:action":Qt},null,40,["item","isSelected","onClick"]))],!0)]),_:3},8,["items","selected","disabled","disabledDrag"])]),zt($(GM),{ref_key:"contextMenuRef",ref:Nt},{default:se(()=>[_t("ul",cG,[(mt(!0),Yt(ui,null,$o(It.items,(Bt,de)=>(mt(),Yt("li",{key:de,onClick:_o(An=>{Qt({action:Bt,item:It.view}),Gt()},["stop"]),class:Zo(["layer-context-menu__item",[Bt.class,Bt.type==="divider"?"layer-context-menu__divider":""]])},[_t("div",fG,[zt($(Bn),{size:"14",type:"mdi",path:Bt.icon||$(a4)},null,8,["path"])]),_t("span",{innerHTML:Bt.name},null,8,pG)],10,hG))),128))])]),_:1},512)]))}}),mG=jn(dG,[["__scopeId","data-v-f24a9067"]]),gG=Fi({__name:"layer-component",props:{item:{}},setup(t){const e=Vm(),i=t,a=Pv([]);function c(o){var M,T;let y=a.value.findIndex(k=>k.id==o.id);if(y<0)return;const _=a.value[y];(M=gu(i.item))==null||M.getView("component").remove({id:_.id}),a.value.splice(y,1),(T=e==null?void 0:e.proxy)==null||T.$forceUpdate()}function f({component:o}){var y;a.value.push({id:o.id,attr:{item:i.item,option:o.option},component:o.component}),(y=e==null?void 0:e.proxy)==null||y.$forceUpdate()}return ml(()=>{gu(i.item).on("add-component",f)}),Lv(()=>{gu(i.item).off("add-component",f)}),(o,y)=>(mt(!0),Yt(ui,null,$o(a.value,_=>(mt(),Oe(oc(_.component()),er({key:_.id,ref_for:!0},_.attr,{onClose:M=>c(_)}),null,16,["onClose"]))),128))}}),vG={class:"layer-control__title"},yG={class:"layer-control"},_G={class:"base-map-card-container"},xG={name:"layer-control"},bG=Fi({...xG,props:{...os,disabledDrag:Boolean,disabled:Boolean},setup(t){const e=t,{mapId:i,moduleContainerProps:a}=Eo(e),{trans:c,setLocale:f}=ga(i.value);f({map:{"layer-control":{title:"Layer Control","create-btn":"Create Layer",create:{title:"New Layer"},field:{name:"Name",type:"Type",url:"Url",minzoom:"Min zoom",maxzoom:"Max zoom",file:"File",geojson:"Geojson",tiles:"Tiles",bound:{title:"Bound",minx:"Min Longitude",miny:"Min Latitude",maxx:"Max Longitude",maxy:"Max Latitude"}},info:{title:"Info"}}}});const o={icon:b_,menu:Fb,group:{create:TI},deleteAll:Um,layer:{create:_p}},[y,_]=fd(!0),M=Ge(()=>SA(i.value,"list")),[T,k]=fd();function P(){k()}return(O,G)=>(mt(),Oe($(Da),La(ma($(a))),{btn:se(()=>[$(y)?on("",!0):(mt(),Oe($(Tr),{key:0,tooltip:$(c)("map.layer-control.title"),onClick:G[0]||(G[0]=_o(H=>$(_)(),["stop"])),active:$(y)},{default:se(()=>[zt($(Bn),{size:"14",type:"mdi",path:o.icon},null,8,["path"])]),_:1},8,["tooltip","active"]))]),draggable:se(H=>[zt($(xM),{containerId:H.containerId,show:$(y),"onUpdate:show":G[2]||(G[2]=X=>Pa(y)?y.value=X:null)},{title:se(()=>[_t("span",vG,yn($(c)("map.layer-control.title")),1)]),default:se(()=>[_t("div",yG,[zt(mG,{mapId:$(i),"onClick:create":G[1]||(G[1]=X=>P())},null,8,["mapId"]),_t("div",_G,[Zn(O.$slots,"endList",{mapId:$(i)},void 0,!0)])])]),_:2},1032,["containerId","show"])]),default:se(()=>[zt(Qj,{show:$(T),"onUpdate:show":G[3]||(G[3]=H=>Pa(T)?T.value=H:null)},null,8,["show"]),(mt(!0),Yt(ui,null,$o(M.value,H=>(mt(),Oe(gG,{key:H.id,item:H},null,8,["item"]))),128)),Zn(O.$slots,"default",{},void 0,!0)]),_:3},16))}}),AG=jn(bG,[["__scopeId","data-v-30e2f19f"]]),wG=t=>(lc("data-v-c8140c0b"),t=t(),uc(),t),CG={class:"identify-control-container"},IG={class:"identify-control-header"},MG=["innerHTML"],EG=wG(()=>_t("hr",{class:"identify-control-separator"},null,-1)),SG={class:"identify-control-body"},TG={class:"identify-control-list-item__header"},kG={class:"identify-control-list-item__container"},PG=Fi({__name:"IdentifyControl",props:{...os},setup(t){const e={icon:v4,boxSelect:L4,mapClick:h4},i=t,{mapId:a,moduleContainerProps:c,callMap:f}=Eo(i),{trans:o,setLocale:y}=ga(a.value),{format:_}=iM(a.value);y({map:{identify:{title:"Identify",point:"Point"}}});const M=Ge(()=>SA(a.value,"identify")),T=Ge(()=>M.value.length>0),k=Ge(()=>M.value.reduce((gn,Qn)=>{let Pi=gu(Qn);if(!Pi)return gn;let ci=Pi.getView("map");return ci&&ci.getAllLayerIds().forEach(ue=>{gn[ue]=Qn}),gn},{})),P=Ge(()=>Object.keys(k.value)),{add:O,remove:G,isActive:H}=Jx(a.value,new eA().setHandler(xt)),{add:X,remove:st,isActive:K}=Jx(a.value,new Dz().setHandler(Nt)),et=Wl({latitude:0,longitude:0});function xt(gn){et.latitude=gn.lngLat.lat,et.longitude=gn.lngLat.lng,f(Qn=>{const Pi=Qn.queryRenderedFeatures(gn.point,{layers:P.value});Vn(Pi)})}function Nt(gn){Ue(),gn&&It(gn)}function It(gn){gn&&f(Qn=>{const Pi=Qn.queryRenderedFeatures(gn,{layers:P.value});Vn(Pi)})}const St=$e(!1);function Gt(){St.value=!St.value,Vt()}function Dt(){Qt()}function Qt(){de(),Ue()}const jt=$e(!1);function Vt(){jt.value?de():Bt()}function Bt(){jt.value=!0,O()}function de(){jt.value=!1,G()}const An=$e(!1);function _e(){An.value?Ue():He()}function He(){An.value=!0,X()}function Ue(){An.value=!1,st()}const ki=Wl({items:[],loading:!1}),oi=Ge(()=>{if(!et)return"";const gn=_(et);return gn.longitude+", &nbsp;"+gn.latitude});function Vn(gn){ki.items=[];let Qn=gn.reduce((Pi,ci)=>{let Ai=ci.layer,ue=k.value[Ai.id];if(!ue)return Pi;let Qe=ue.config.field_id||"id",me=ue.config.field_name||"name";return Pi[ue.id]||(Pi[ue.id]={name:ue.name,view:ue,children:{},field_name:me}),Pi[ue.id].children[ci.properties[Qe]]={id:ci.properties[Qe],name:ci.properties[me],data:Object.assign({geometry:ci.geometry},ci.properties)},Pi},{});ki.items=Object.keys(Qn).map(Pi=>Qn[Pi])}return(gn,Qn)=>(mt(),Oe($(Da),La(ma($(c))),{btn:se(()=>[T.value?(mt(),Oe($(Tr),{key:0,tooltip:$(o)("map.identify.title"),onClick:Qn[0]||(Qn[0]=_o(Pi=>Gt(),["stop"])),active:St.value},{default:se(()=>[zt($(Bn),{size:"14",type:"mdi",path:e.icon},null,8,["path"])]),_:1},8,["tooltip","active"])):on("",!0)]),draggable:se(Pi=>[St.value?(mt(),Oe($(pf),er({key:0,show:St.value,"onUpdate:show":Qn[3]||(Qn[3]=ci=>St.value=ci)},Pi,{width:400,height:300,onClose:Dt,title:$(o)("map.identify.title")}),{"extra-btn":se(()=>[zt($(Oc),{onClick:Qn[1]||(Qn[1]=_o(ci=>Vt(),["stop"])),active:$(H),disabled:$(H)},{default:se(()=>[zt($(Bn),{size:"14",type:"mdi",path:e.mapClick},null,8,["path"])]),_:1},8,["active","disabled"]),zt($(Oc),{onClick:Qn[2]||(Qn[2]=_o(ci=>_e(),["stop"])),active:$(K),disabled:$(K)},{default:se(()=>[zt($(Bn),{size:"14",type:"mdi",path:e.boxSelect},null,8,["path"])]),_:1},8,["active","disabled"])]),default:se(()=>[_t("div",CG,[_t("div",IG,[_t("b",null,yn($(o)("map.identify.point"))+":",1),_t("span",{innerHTML:oi.value},null,8,MG)]),EG,_t("div",SG,[(mt(!0),Yt(ui,null,$o(ki.items,ci=>(mt(),Yt("div",{key:ci.view.id,class:"identify-control-list-item"},[_t("div",TG,yn(ci.name),1),_t("div",kG,[(mt(!0),Yt(ui,null,$o(ci.children,Ai=>(mt(),Yt("div",{class:"identify-control-child-item",key:Ai.id},[_t("span",null,yn(Ai.name),1)]))),128))])]))),128))])])]),_:2},1040,["show","title"])):on("",!0)]),_:1},16))}}),LG=jn(PG,[["__scopeId","data-v-c8140c0b"]]);var _E={exports:{}};(function(t,e){(function(i,a){a()})(_s,function(){function i(M,T){return typeof T>"u"?T={autoBom:!1}:typeof T!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),T={autoBom:!T}),T.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(M.type)?new Blob(["\uFEFF",M],{type:M.type}):M}function a(M,T,k){var P=new XMLHttpRequest;P.open("GET",M),P.responseType="blob",P.onload=function(){_(P.response,T,k)},P.onerror=function(){console.error("could not download file")},P.send()}function c(M){var T=new XMLHttpRequest;T.open("HEAD",M,!1);try{T.send()}catch{}return 200<=T.status&&299>=T.status}function f(M){try{M.dispatchEvent(new MouseEvent("click"))}catch{var T=document.createEvent("MouseEvents");T.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),M.dispatchEvent(T)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof _s=="object"&&_s.global===_s?_s:void 0,y=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!y?function(M,T,k){var P=o.URL||o.webkitURL,O=document.createElement("a");T=T||M.name||"download",O.download=T,O.rel="noopener",typeof M=="string"?(O.href=M,O.origin===location.origin?f(O):c(O.href)?a(M,T,k):f(O,O.target="_blank")):(O.href=P.createObjectURL(M),setTimeout(function(){P.revokeObjectURL(O.href)},4e4),setTimeout(function(){f(O)},0))}:"msSaveOrOpenBlob"in navigator?function(M,T,k){if(T=T||M.name||"download",typeof M!="string")navigator.msSaveOrOpenBlob(i(M,k),T);else if(c(M))a(M,T,k);else{var P=document.createElement("a");P.href=M,P.target="_blank",setTimeout(function(){f(P)})}}:function(M,T,k,P){if(P=P||open("","_blank"),P&&(P.document.title=P.document.body.innerText="downloading..."),typeof M=="string")return a(M,T,k);var O=M.type==="application/octet-stream",G=/constructor/i.test(o.HTMLElement)||o.safari,H=/CriOS\/[\d]+/.test(navigator.userAgent);if((H||O&&G||y)&&typeof FileReader<"u"){var X=new FileReader;X.onloadend=function(){var et=X.result;et=H?et:et.replace(/^data:[^;]*;/,"data:attachment/file;"),P?P.location.href=et:location=et,P=null},X.readAsDataURL(M)}else{var st=o.URL||o.webkitURL,K=st.createObjectURL(M);P?P.location=K:location.href=K,P=null,setTimeout(function(){st.revokeObjectURL(K)},4e4)}});o.saveAs=_.saveAs=_,t.exports=_})})(_E);var DA=_E.exports;const DG=C_(DA),RG={class:"field-container"},zG={class:"label-container"},OG={class:"label-field"},BG=["disabled","title"],FG=["disabled"],NG={class:"geometry-list-container"},VG={class:""},UG=["onUpdate:modelValue","onChange"],jG={class:""},HG=["onUpdate:modelValue","onChange"],GG={class:""},qG=["onClick"],WG={__name:"field-geometry",props:Gs({modelValue:{type:Array,default:()=>[[0,0]]},maxLength:{type:Number,default:0},title:String,titleActionDownload:String,titleActionFillBound:String,titleActionAddPoint:String},{modelValue:{default:[[0,0]]},modelModifiers:{}}),emits:Gs(["click:remove","click:fillbound"],["update:modelValue"]),setup(t,{emit:e}){const i=t,a=dl(t,"modelValue"),c={add:_p,fillBound:Rv,delete:Bb,download:f4,upload:z4},f=e,o=G=>{a.value=G},y=()=>{a.value||(a.value=[]),a.value.push([null,null])},_=()=>{o(a)},M=G=>{a.value.splice(G,1),f("click:remove",G),o(a)},T=G=>{if(!(!G||!G.length))return G.length==1?is(G[0]):G.length==2?xs(G):$m([[...G,G[0]]])},k=()=>{let G={type:"FeatureCollection",features:[T(a.value)]};const H=new window.Blob([JSON.stringify(G)],{type:"text/plain;charset=utf-8"});DG.saveAs(H,"geojson.json")},P=()=>{f("click:fillbound",T(a.value))},O=Ge(()=>!i.maxLength||a.value.length<i.maxLength);return(G,H)=>(mt(),Yt("div",RG,[_t("div",zG,[_t("div",OG,yn(t.title),1),_t("div",null,[_t("button",{onClick:P,disabled:!t.modelValue||t.modelValue.length<1,class:"setting-button",title:t.titleActionFillBound},[zt($(Bn),{size:16,type:"mdi",path:c.fillBound,title:t.titleActionDownload},null,8,["path","title"])],8,BG),_t("button",{onClick:k,class:"setting-button",disabled:!t.modelValue||t.modelValue.length<1},[zt($(Bn),{size:16,type:"mdi",path:c.download,title:t.titleActionAddPoint},null,8,["path","title"])],8,FG),O.value?(mt(),Yt("button",{key:0,onClick:y,class:"setting-button"},[zt($(Bn),{size:16,type:"mdi",path:c.add},null,8,["path"])])):on("",!0)])]),_t("div",NG,[(mt(!0),Yt(ui,null,$o(t.modelValue,(X,st)=>(mt(),Yt("div",{class:"geometry-list-item",key:st},[_t("div",null,"#"+yn(st+1),1),_t("div",VG,[ac(_t("input",{class:"setting-input","onUpdate:modelValue":K=>a.value[st][0]=K,type:"number",step:"any",onChange:K=>_()},null,40,UG),[[pp,a.value[st][0]]])]),_t("div",jG,[ac(_t("input",{class:"setting-input","onUpdate:modelValue":K=>a.value[st][1]=K,type:"number",step:"any",onChange:K=>_()},null,40,HG),[[pp,a.value[st][1]]])]),_t("div",GG,[_t("button",{onClick:K=>M(st),class:"setting-button"},[zt($(Bn),{size:16,type:"mdi",path:c.delete},null,8,["path"])],8,qG)])]))),128))])]))}},ZG=jn(WG,[["__scopeId","data-v-e7354c87"]]),$G={class:"label-container"},YG={class:"label-field"},XG={class:"label-field-value"},KG={__name:"fields-show",props:{fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]}},setup(t){return(e,i)=>(mt(),Yt("div",null,[(mt(!0),Yt(ui,null,$o(t.fields,(a,c)=>(mt(),Yt("div",{class:"field-container label-value",key:c},[_t("div",$G,[_t("div",YG,yn(a.text),1),_t("div",XG,yn(a.value),1)])]))),128))]))}},QG=jn(KG,[["__scopeId","data-v-741017b9"]]),JG={class:"setting-container"},tq={__name:"MeasurementSettingPopup",props:Gs({...os,modelValue:Array,maxLength:{type:Number,default:0},fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]},popUpPosition:{type:Object,default:()=>({top:50,right:40,width:350,height:300})}},{modelValue:{default:[[0,0]]},modelModifiers:{},show:{default:!1},showModifiers:{}}),emits:Gs(["update:modelValue"],["update:modelValue","update:show"]),setup(t,{emit:e}){const i=e,a=t,{callMap:c,moduleContainerProps:f,mapId:o}=Eo(a),{trans:y}=ga(o.value),_=dl(t,"modelValue"),M=dl(t,"show"),T=P=>{c(O=>{BM(O,P)})};function k(P){i("update:modelValue",P.value)}return(P,O)=>(mt(),Oe($(Da),La(ma($(f))),{draggable:se(G=>[M.value?(mt(),Oe($(pf),er({key:0},Object.assign(G,t.popUpPosition),{show:M.value,"onUpdate:show":O[0]||(O[0]=H=>M.value=H),title:$(y)("map.measurement.setting.title")}),{default:se(()=>[_t("div",JG,[zt(QG,{fields:t.fields},null,8,["fields"]),zt(ZG,{"onUpdate:modelValue":k,modelValue:_.value,maxLength:t.maxLength,"onClick:fillbound":T,title:$(y)("map.measurement.setting.field.data"),titleActionDownload:$(y)("map.measurement.action.download"),titleActionFillBound:$(y)("map.measurement.action.fly-to"),titleActionAddPoint:$(y)("map.measurement.action.add-point")},null,8,["modelValue","maxLength","title","titleActionDownload","titleActionFillBound","titleActionAddPoint"])])]),_:2},1040,["show","title"])):on("",!0)]),default:se(()=>[Zn(P.$slots,"default",{},void 0,!0)]),_:3},16))}},eq=jn(tq,[["__scopeId","data-v-6bf30db5"]]);class Z_{constructor(){this.value=[]}get coordinates(){return this.value.filter(e=>e[0]!=null&&e[1]!=null)}start(){}add(e){const i=nq(this.value);i>=0?this.value[i]=e:this.value.push(e)}init(e){this.value=e}getResult(){return{}}reset(){this.value=[]}destroy(){this.value=[]}}function nq(t=[]){return t.findIndex(e=>!e[0]||!e[1])}function o_(t,e="vi"){return new Intl.NumberFormat(e).format(t)}class iq extends Z_{get name(){return"Measure Area"}get type(){return"area"}getResult(){const c={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return c;if(this.coordinates.length==1)return c.features=[is(this.coordinates[0])],c;if(this.coordinates.length==2)return c.features=[xs(this.coordinates)],c;const f=$m([[...this.coordinates,this.coordinates[0]]]);return c.features=[f],c.value=eV(f),c.format=Tx(c.value),c.features_label=[GN(f,{properties:{is_label:!0,is_center:!0,text:Tx(c.value)}})],c.fields=[{trans:"map.measurement.setting.area",value:Tx(c.value)}],c}}function Tx(t=0){return t<1e6?`${o_(t.toFixed(2))} m`:`${o_((t/1e6).toFixed(2))} km`}class rq extends Z_{get name(){return"Measure Azimuth"}get type(){return"line"}get setting(){return{maxLength:2}}add(e){this.value.length>1&&(this.value=this.value.slice(0,1)),this.value.push(e)}getResult(){const c={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return c;if(this.coordinates.length==1)return c.features=[is(this.coordinates[0])],c;const f=this.coordinates[this.coordinates.length-1],o=this.coordinates[this.coordinates.length-2],y=xs(this.coordinates);c.features=[y];const _=PM(o,f);return c.value=IM(_).toFixed(3),c.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:f},properties:{is_label:!0,text:`${c.value} `,rotation:_}}],c.fields=[{trans:"map.measurement.setting.azimuth",value:`${c.value} `}],c}}class oq extends Z_{get name(){return"Measure Distance"}get type(){return"line"}getResult(){const c={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return c;if(this.coordinates.length==1)return c.features=[is(this.coordinates[0])],c;const f=xs(this.coordinates);return c.features=[f],c.value=V2(f),c.format=kx(c.value),c.features_label=this.coordinates.map((o,y,_)=>({type:"Feature",properties:{is_label:!0,text:kx(y<1?0:V2(xs(_.slice(0,y+1))))},geometry:{type:"Point",coordinates:o}})),c.fields=[{trans:"map.measurement.setting.distance",value:kx(c.value)}],c}}function kx(t=0){return t<1?`${o_((t*1e3).toFixed(2))} m`:`${o_(t.toFixed(2))} km`}class aq extends Z_{constructor(e=[]){super(),this.crs_items=e}get name(){return"Measure Point"}get type(){return"point"}get setting(){return{maxLength:1}}add(e){this.value.length>0&&(this.value=[]),this.value.push(e)}getResult(){const c={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return c;c.features=[is(this.coordinates[0])];const f=this.coordinates[0][0],o=this.coordinates[0][1],y=Qx({longitude:f,latitude:o},void 0,!1);if(y&&(c.value=`${y.longitude}, ${y.latitude}`),this.crs_items){const _=this.crs_items.find(M=>M.default);c.fields=[{trans:_==null?void 0:_.name,value:c.value}],this.crs_items.filter(M=>!M.default).forEach(M=>{var T;if(!M.default&&M.proj4js){const k=Qx({longitude:f,latitude:o},M,!1);k&&((T=c.fields)==null||T.push({trans:M.name,value:`${k.longitude}, ${k.latitude}`}))}})}else c.fields=[{trans:"map.measurement.setting.point",value:c.value}];return c.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:this.coordinates[0]},properties:{is_label:!0,text:c.value}}],c}}class RA{start(e){}view(e){}reset(){}destroy(){}}class sq extends RA{constructor(e){super(),this.layers=[],this.map=e}init(e,i){return i.id||(i.id=`measurment-control-${sf()}`),this.map.addSource(i.id,i.data),e.forEach(a=>{a.id||(a.id=`measurment-control-${sf()}`),a.source||(a.source=i.id),this.map.addLayer(a)}),this.source=i,this.layers=e,this}start(){this.onStart&&this.onStart()}reset(){const e=this.map.getSource(this.source.id);e&&e.setData({type:"FeatureCollection",features:[]}),this.onReset&&this.onReset()}destroy(){this.map&&(this.layers.forEach(e=>{const i=e.id;this.map.getLayer(i)&&this.map.removeLayer(i),this.map.getSource(i)&&this.map.removeSource(i)}),this.map.getSource(this.source.id)&&this.map.removeSource(this.source.id))}view({features:e=[],features_label:i=[]}={}){const a=this.map.getSource(this.source.id);a&&a.setData({type:"FeatureCollection",features:[...e,...i]})}}class lq extends RA{constructor(e){super(),this.markers=[],this.bindEvent={},this.color="#fff",this.map=e,this.markers=[]}setColor(e){return this.color=e,this}view({coordinates:e=[]}={}){const i=!!this.onDragMarker;if(e.length<this.markers.length)for(;e.length<this.markers.length;){const a=this.markers.pop();a&&a.remove()}e.forEach((a,c)=>{if(!a[0]||!a[1])return;let f=this.markers[c];f||(this.bindEvent[c]={},f=uq({color:this.color,draggable:i}),this.markers[c]=f),f.setLngLat({lng:a[0],lat:a[1]}).addTo(this.map),i&&(this.bindEvent[c].dragend&&f.off("dragend",this.bindEvent[c].dragend),this.bindEvent[c].dragend=()=>{const y=f.getLngLat(),_=[y.lng,y.lat],M=e.slice();M[c]=_,this.onDragMarker&&this.onDragMarker(M,_,c,f)},f.on("dragend",this.bindEvent[c].dragend));const o=f.getElement();this.onRightClickMarker&&(this.bindEvent[c].contextmenu&&o.removeEventListener("contextmenu",this.bindEvent[c].contextmenu),this.bindEvent[c].contextmenu=y=>{y.preventDefault();const _=f.getLngLat();this.onRightClickMarker&&this.onRightClickMarker([_.lng,_.lat],c,f)},o.addEventListener("contextmenu",this.bindEvent[c].contextmenu))})}reset(){this.markers.forEach(e=>{e.remove()}),this.markers=[]}destroy(){this.reset()}}function uq({color:t,draggable:e=!1}={}){const i=document.createElement("div");return i.style.width="12px",i.style.height="12px",i.style.borderRadius="50%",i.style.background="#fff",i.style.boxSizing="border-box",i.style.border=`2px solid ${t}`,i.style.cursor="pointer",new X0.Marker({element:i,draggable:e})}const oC=function(){let t=null;const e=[],i=k=>{for(let P=0;P<e.length;P++)k(e[P])},a=k=>{t=k},c=k=>{e.push(k)},f=()=>{t&&t.start(),i(k=>{k.start&&k.start(_())})},o=()=>{t&&t.reset(),i(k=>{k.reset&&k.reset()})},y=()=>{t&&t.destroy(),i(k=>{k.destroy()})},_=()=>({coordinates:t.value,setting:t.setting,...t.getResult()});return{get type(){return t?t.type:null},get action(){return t},setAction:a,addView:c,start:f,reset:o,destroy:y,add:k=>{t&&t.add(k),i(P=>{P.view&&P.view(_())})},init:(k=[])=>{t&&t.init(k),i(P=>{P.view(_())})},getResult:_}};class cq extends RA{start({setting:e}={}){this.onChangeSetting&&this.onChangeSetting(e)}view({coordinates:e=[],setting:i={},fields:a=[]}={}){this.onChangeValue&&this.onChangeValue(e),this.onChangeSetting&&(i.fields=a,this.onChangeSetting(i))}reset(){this.onChangeValue&&this.onChangeValue([]),this.onChangeSetting&&this.onChangeSetting()}}const hq="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAADo6zjiAAAAAXNSR0IArs4c6QAAA4RJREFUWEe9l09o02AYxtdkTRlfL13aie1Cdwgt7cqwiptUA2MHYb04xXhRUFQ6ENHT7rnvpOBhZaIieMlBPYyBIBtEKhtq/TM7W3JYyVpxbdZLvkHTtUrKNrou/5pt5tCWfu/7Pr/naXlJbF2HuKLRqFdpT6fTRatjbFYblT4AwHflHUI4ZHWOZQCapjGWZauKME3TDpZlZSsQlgFcLtfLSqVyQxHFcfyVKIrX/ytAV1fX3zZBS2YsNXm93gfFYvFRK4DX631YLBYfd5qCJQAEQbYbjQbaKoYgSL3RaHQfO0AgELiQy+U4NaFAIEDlcrkPnUB0nIDdbt+s1WouNREMwyqyLPceGwBFUSc5jtNdOhRFeTmO+20WoqMEAABpCOEpveEAgK8QwuiRAyQSCXsymTS1bDpZTKYTwHH8uSiKN804w3H8hSiKt8zUmgZQWTxG803NNlVEEMQ9QRCeGCm2nhMEcd9MjykAtcVjBGN2MRkCkCR5juf5j0aCaueRSOT8yspKSq/XEADDsLIsy7gVAAzDRFmW3ZYBYrFYXyqV+mNFfLcnFoudSKVSG1ozdBMAAHyCEJ45DIDT6fwiSZLmDE2AThaPEWAikcCSyWRNrU4ToLe3d3Zzc/OO0XAz5x6P51mpVLrdEYCFxWPEompW9Uufz5coFAozRhM7Off5fJOFQiHZ3qMKgCBIzcrdjR4QiqLb9XrdbggQDoeHM5nMkhl3PT09WQRBlOeCoJn6cDg8kslklltrDyTgcDg2qtWqx2hgMBi8ls1mWaWOJMmrPM83P+tdDoejVK1W+zQBKIrycBynuTSURgBAdmpqKsIwzHbrIIZhuqenp1eM0qAoqo/juNJu774EAABLEMJhLRd+v/9KPp9/reeSIIgJQRA0awAAyxDCkQMAo6Oj3YuLi6rLQnEdj8cHWZatG8WsnNM0jc7Pz/+UJEn1v8EwjH03wb0E3G73TLlcTrQLEARxWRCEN2aE22sGBgYm1tbWDqThdruT5XJ5Uqlv/Qn2PWo5nc5f4+PjEbOutQB30vghSVKoraap3Xzp7++/s76+PrtbsEP+1oprrR6SJC/xPL+XpN/vv5vP5582AVAUlZUlAQDIxOPxocO61ktjbm7u29bW1iCKorV6vY7ZQqHQ6dXV1c8kSU7wPH+kro3SiEQiZ204jr8fGxu7eFyu9dJYWFh49w9KoVXl/UeUKQAAAABJRU5ErkJggg==",fq="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGmSURBVDiNldPBitpAGAfwv5mMmy85JCistD5Ai/gCPYovYJENCPZQF8VD36HXUkrfQws9R8WLF58gh2h2W2PpoeTWxBgzMr1spd3uUvOHOQ2//3yHb4C/UyGi95Zl3XLOUwASgFRVNTVN8ysRfQTwFA+FMdYhoqjf7+9ns5kMgkCGYSjDMJTb7VbO53M5HA4PRBRzzl//g8vlcrxYLE7osbNcLmWlUok459cAULgb+2YymRi1Wu3B6e7H9300Go1dkiTPGRG97Xa7LzqdjnqWBlAqlRBFEVzXNZRisXhl2/bFufh3bNvmAF4WOOd73/cvDMPIVSCEQLVaFUqWZbkxAKiqCsaYVHLLe1E452kcx7mhEALH47Gg6Lr+3fO83AXr9Rq6rofK4XD4NB6P07wFo9Eok1J+LgC41DTt1nEco16vn4VXqxWazeYuSZJnCoAfWZZdt9vtneu6/8We56HVasVCiDcAvp0uGGM2Ef3s9Xp7x3HkZrM57X8QBHI6ncrBYJASUcQYe/XYA5eapr2zLOuGc77H3XfmnKemaX4hog8AnvwJfgHMKs1jQ++4tQAAAABJRU5ErkJggg==",Bg="#004E98",pq=Fi({__name:"MeasurementControl",props:{...os},setup(t){const{getCrsItems:e}=Gb,{addImage:i}=Bz;let a=oC();const c=t,f=$e(""),o=$e([]),y=$e({show:!0,maxLength:0,fields:[]}),_={add:_p,fillBound:Rv,distance:k4,area:P4,azimuth:D4,point:jb,clear:Bb,close:Dm,setting:EI},{callMap:M,mapId:T,moduleContainerProps:k}=Eo(c,H,X),{trans:P,setLocale:O}=ga(T.value);O({map:{measurement:{action:{clear:"Clear",close:"Close",setting:"Setting",download:"Download","add-point":"Add point","fly-to":"Fill bound",add:"Add"},title:"Measurement",result:"Measurement Result",field:{"unit-distance":"Unit distance","unit-area":"Unit area"},tools:{point:"Measure Point",distance:"Measure Distance",area:"Measure Area",azimuth:"Measure azimuth"},unit:{meter:"Meter",kilometer:"Kilometer","square-meter":"Square Meter",hecta:"Hecta","square-kilometer":"Square Kilometer"},setting:{title:"Setting",field:{data:"Data"},point:"Point",distance:"Distance",area:"Area",azimuth:"Azimuthi"},"no-data":{text:"Status",value:"Waiting..."}}}});const G=new eA().setHandler(st);function H(Vt){i(Vt.id,"azimuth-arrow",hq,{sdf:!0}),i(Vt.id,"measurment-round",fq,{content:[4,4,12,12],stretchX:[[6,10]],stretchY:[[6,10]]}),a=oC();let Bt=new sq(Vt);Bt.init([{type:"line",paint:{"line-color":Bg,"line-width":2}},{type:"fill",filter:["==","$type","Polygon"],paint:{"fill-color":Bg,"fill-opacity":.3}},{type:"symbol",filter:["has","rotation"],paint:{"icon-color":Bg},layout:{"icon-size":1.2,"icon-rotate":{type:"identity",property:"rotation"},"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":"azimuth-arrow",visibility:"visible"}},{type:"symbol",filter:["all",["has","is_label"],["==","$type","Point"]],layout:{"text-field":"{text}","text-offset":["case",["to-boolean",["get","is_center"]],["literal",[0,0]],["literal",[0,2]]],"text-size":14,"text-allow-overlap":!0,"icon-allow-overlap":!0,"icon-image":"measurment-round","icon-text-fit":"both"},paint:{"text-color":"#fff","text-halo-color":Bg,"text-halo-width":2}}],{data:{type:"geojson",data:{type:"FeatureCollection",features:[]}}});const{add:de,remove:An}=oM(Vt.id,G);Bt.onStart=()=>{Vt&&de()},Bt.onReset=()=>{An()};let _e=new lq(Vt);_e.setColor(Bg),_e.onDragMarker=Ue=>{a.init(Ue)},_e.onRightClickMarker=(Ue,ki)=>{o.value.splice(ki,1),a.init(o.value)};let He=new cq;He.onChangeValue=Ue=>{o.value=(Ue||[]).slice()},He.onChangeSetting=(Ue={})=>{y.value.maxLength=Ue.maxLength||0;let ki=Ue.fields;(!ki||ki.length==0)&&(ki=[{text:P.value("map.measurement.no-data.text"),value:P.value("map.measurement.no-data.value")}]),y.value.fields=ki.map(oi=>({...oi,text:oi.trans?P.value(oi.trans):oi.text}))},a.addView(Bt),a.addView(_e),a.addView(He)}function X(){a&&a.destroy(),Qt()}function st(Vt){const Bt=[Vt.lngLat.lng,Vt.lngLat.lat];a.action&&a.add(Bt)}function K(Vt){return Dt(!1),f.value==Vt?(f.value=void 0,a.setAction(null),!1):(f.value=Vt,!0)}function et(){K("distance")&&(a.setAction(new oq),a.start())}function xt(){K("area")&&(a.setAction(new iq),a.start())}function Nt(){K("azimuth")&&(a.setAction(new rq),a.start())}function It(){K("point")&&(a.setAction(new aq(e(T.value))),a.start())}function St(){y.value.show=!y.value.show}function Gt(){M(Vt=>{BM(Vt,pV(o.value))})}function Dt(Vt=!0){a&&(a.reset(),Vt&&xu(()=>{a.start()}))}function Qt(){Dt(!1),f.value=void 0,a&&a.setAction(null)}function jt(Vt=[]){a&&a.init(Vt)}return(Vt,Bt)=>(mt(),Oe($(Da),La(ma($(k))),{btn:se(()=>[f.value?(mt(),Oe($(Rm),{key:1,row:""},{default:se(()=>[zt($(Tr),{tooltip:$(P)("map.measurement.action.setting"),onClick:Bt[4]||(Bt[4]=de=>St()),active:y.value.show},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:_.setting},null,8,["path"])]),_:1},8,["tooltip","active"]),zt($(Tr),{disabled:!o.value||o.value.length<1,tooltip:$(P)("map.measurement.action.fly-to"),onClick:Bt[5]||(Bt[5]=de=>Gt())},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:_.fillBound},null,8,["path"])]),_:1},8,["disabled","tooltip"]),zt($(Tr),{tooltip:$(P)("map.measurement.action.clear"),onClick:Bt[6]||(Bt[6]=de=>Dt())},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:_.clear},null,8,["path"])]),_:1},8,["tooltip"]),zt($(Tr),{tooltip:$(P)("map.measurement.action.close"),onClick:Bt[7]||(Bt[7]=de=>Qt())},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:_.close},null,8,["path"])]),_:1},8,["tooltip"])]),_:1})):(mt(),Oe($(Rm),{key:0,row:""},{default:se(()=>[zt($(Tr),{tooltip:$(P)("map.measurement.tools.distance"),onClick:Bt[0]||(Bt[0]=de=>et()),active:f.value=="distance"},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:_.distance},null,8,["path"])]),_:1},8,["tooltip","active"]),zt($(Tr),{tooltip:$(P)("map.measurement.tools.area"),onClick:Bt[1]||(Bt[1]=de=>xt()),active:f.value=="area"},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:_.area},null,8,["path"])]),_:1},8,["tooltip","active"]),zt($(Tr),{tooltip:$(P)("map.measurement.tools.azimuth"),onClick:Bt[2]||(Bt[2]=de=>Nt()),active:f.value=="azimuth"},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:_.azimuth},null,8,["path"])]),_:1},8,["tooltip","active"]),zt($(Tr),{tooltip:$(P)("map.measurement.tools.point"),onClick:Bt[3]||(Bt[3]=de=>It()),active:f.value=="point"},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:_.point},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1}))]),default:se(()=>[Zn(Vt.$slots,"default"),f.value?(mt(),Oe(eq,{key:0,modelValue:o.value,show:y.value.show,"onUpdate:show":Bt[8]||(Bt[8]=de=>y.value.show=de),position:Vt.position,"onUpdate:modelValue":jt,maxLength:y.value.maxLength,fields:y.value.fields},null,8,["modelValue","show","position","maxLength","fields"])):on("",!0)]),_:3},16))}});class dq{constructor(e){this.mapCanvas=e,this.color="#535353"}create(){this.updateValues(),this.createCanvas(this.mapCanvas.parentElement)}updateValues(){this.width=this.mapCanvas.clientWidth,this.height=this.mapCanvas.clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const e=this.width/2,i=this.height/2;this.yLine.setAttribute("x1",`${e}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${e}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${i}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${i}px`)}}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style["pointer-events"]="none",i.setAttribute("width",`${this.width}px`),i.setAttribute("height",`${this.height}px`);const a=this.width/2,c=this.height/2;this.yLine=i.appendChild(this.createLine(a,0,a,this.height,this.color,"2px")),this.xLine=i.appendChild(this.createLine(0,c,this.width,c,this.color,"2px")),e.appendChild(i),this.svgCanvas=i}}createLine(e,i,a,c,f,o){const y=document.createElementNS("http://www.w3.org/2000/svg","line");return y.setAttribute("x1",e+""),y.setAttribute("y1",i+""),y.setAttribute("x2",a+""),y.setAttribute("y2",c+""),y.setAttribute("stroke-dasharray","5,5"),y.setAttribute("stroke",f),y.setAttribute("stroke-width",o),y}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}function xE(t){const{renderMap:e,hidden:i}=bE(t,a=>{const c=t.getCanvas();a.style.width=c.clientWidth+"px",a.style.height=c.clientHeight+"px"});return new Promise(a=>{e.once("idle",()=>{var f;const c=e.getCanvas();a(c.toDataURL()),e.remove(),(f=i.parentNode)==null||f.removeChild(i)})})}async function mq(t,e){const{renderMap:i,hidden:a}=bE(t,c=>{c.style.width=aC(+e.width,1),c.style.height=aC(+e.height,1)});return new Promise(c=>{i.once("idle",()=>{var o;const f=i.getCanvas();c(f.toDataURL()),i.remove(),(o=a.parentNode)==null||o.removeChild(a)})})}function aC(t,e=96){return`${e*t}px`}function bE(t,e){var y;const i=document.createElement("div");i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.padding="0",i.style.margin="0",i.style.background="transparent",i.style.zIndex="-1",document.body.appendChild(i);const a=document.createElement("div");e(a),i.appendChild(a);const c=new jg.Map({container:a,center:t.getCenter(),zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:t._requestManager._transformRequestFn}),f=(t.style.imageManager||{}).images||{};f&&((y=Object.keys(f))==null?void 0:y.length)>0&&Object.keys(f).forEach(_=>{_&&c.addImage(_,f[_].data)});const o=t.getStyle();if(o&&o.sources){const _=o.sources;Object.keys(_).forEach(M=>{const T=_[M];Object.keys(T).forEach(k=>{T[k]||delete T[k]})})}return c.setStyle(o),{renderMap:c,hidden:i}}class gq{constructor(e,i){this.mapCanvas=e,this.setOption(i)}getCutSize(){return{width:this.cutWidth,height:this.cutHeight,startX:this.cutStartX,startY:this.cutStartY}}mapResize(){this.generateCutOut()}create(){this.createCanvas(this.mapCanvas.parentElement),this.generateCutOut()}createCanvas(e){const i=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=this.mapCanvas.clientWidth,c=this.mapCanvas.clientHeight;i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style["pointer-events"]="none",i.setAttribute("width",`${a}px`),i.setAttribute("height",`${c}px`);const f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttribute("style","fill:#888888;stroke-width:0"),f.setAttribute("fill-opacity","0.5"),i.append(f),e.appendChild(i),this.svgCanvas=i,this.svgPath=f}generateCutOut(){if(this.svgCanvas===void 0||this.svgPath===void 0)return;const e=this.mapCanvas.clientWidth,i=this.mapCanvas.clientHeight,a=this.option.ratio;let c=i;c>e&&(c=e);let f=0,o=0;if(a>=1?(f=Math.floor(c*4/5-30),o=f/a):(o=Math.floor(c*4/5-30),f=Math.floor(o*a)),this.option.orientation!=="landscape"){if(f>o){const O=o;o=f,f=O}}else if(f<o){const O=o;o=f,f=O}this.cutStartX=e/2-f/2,this.cutStartY=i/2-o/2;const y=o,_=f;this.cutWidth=f,this.cutHeight=o;const M=this.cutStartX,T=M+_,k=this.cutStartY,P=k+y;this.svgCanvas.setAttribute("width",`${e}px`),this.svgCanvas.setAttribute("height",`${i}px`),this.svgPath.setAttribute("d",`M 0 0 L ${e} 0 L ${e} ${i} L 0 ${i} M ${M} ${k} L ${M} ${P} L ${T} ${P} L ${T} ${k}`)}setOption(e){this.option=e,this.generateCutOut()}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}const vq=Fi({__name:"PrintControl",props:{...os,fileName:{type:String,default:"map"}},setup(t){const e=t,i={print:T4,close:Dm,save:SI},{callMap:a,mapId:c,moduleContainerProps:f}=Eo(e),{trans:o,setLocale:y}=ga(c.value);y({map:{print:{title:"Print",actions:{save:"save",clear:"clear"}}}});const _=$e({show:!1,loading:!1});function M(k){a(async P=>{_.value.loading=!0;try{let O=await xE(P);k?k(O):await T(O)}finally{_.value.loading=!1}})}async function T(k){DA.saveAs(k,`${e.fileName}.png`)}return(k,P)=>(mt(),Oe($(Da),La(ma($(f))),{btn:se(()=>[zt($(Tr),{tooltip:$(o)("map.print.title"),onClick:P[0]||(P[0]=_o(O=>M(T),["stop"])),loading:_.value.loading},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:i.print},null,8,["path"])]),_:1},8,["tooltip","loading"])]),_:1},16))}}),zA="print";function yq(t){hf(t,zA,void 0)}md(zA,yq);const _q=(t,{show:e,close:i,save:a,saveAll:c})=>{hf(t,zA,{show:e,close:i,save:a,saveAll:c})},xq=t=>(lc("data-v-c6407056"),t=t(),uc(),t),bq={class:"setting-container"},Aq=xq(()=>_t("div",{class:"grow"},null,-1)),wq=Fi({__name:"PrintAdvancedControl",props:{...os,disabledCrosshair:Boolean,disabledPrintableArea:Boolean,fileName:{type:String,default:"map"}},setup(t){const e=t,i={print:S4,close:Dm,save:SI,setting:EI},{callMap:a,mapId:c,moduleContainerProps:f}=Eo(e,M),{trans:o,setLocale:y}=ga(c.value);y({map:{print:{title:"Print",actions:{save:"save",clear:"clear",setting:"Setting"},setting:{title:"Setting"},field:{ratio:"Ratio",orientation:"Orientation"},btn:{apply:"Print"}}}});const _=$e({show:!1,loading:!1,setting_show:!1,setting:{ratio:1,orientation:"portrait"}});Lv(()=>{P()});function M(){_q(c.value,{show:It=>O(It),close:()=>P(),save:It=>k(It),saveAll:It=>T(It)})}function T(It){a(async St=>{_.value.loading=!0;try{let Gt=await xE(St);It?It(Gt):await G(Gt)}finally{_.value.loading=!1}})}async function k(It){a(async St=>{if(X)try{_.value.loading=!0;let Gt=await mq(St,X.getCutSize());It?It(Gt):await G(Gt)}finally{_.value.loading=!1}})}function P(){_.value.loading=!1,_.value.show=!1,st(_.value.show),K(_.value.show,_.value.setting)}function O(It){_.value.show=!0,st(_.value.show),K(_.value.show,It)}async function G(It){DA.saveAs(It,`${e.fileName}.png`)}let H,X;function st(It){e.disabledCrosshair||a(St=>{It===!1?H!==void 0&&(H.destroy(),H=void 0):(H=new dq(St.getCanvas()),H.create())})}function K(It,St){e.disabledPrintableArea||a(Gt=>{It===!1?(Gt.off("resize",et),X!==void 0&&(X.destroy(),X=void 0)):(Gt.on("resize",et),X=new gq(Gt.getCanvas(),St),X.create())})}function et(){X&&X.mapResize(),H&&H.mapResize()}function xt(){_.value.setting_show=!_.value.setting_show}function Nt(){X&&X.setOption(_.value.setting)}return(It,St)=>(mt(),Oe($(Da),La(ma($(f))),{btn:se(()=>[zt($(Rm),{row:""},{default:se(()=>[_.value.show?(mt(),Yt(ui,{key:1},[zt($(Tr),{disabled:_.value.loading,loading:_.value.loading,tooltip:$(o)("map.print.actions.save"),onClick:St[1]||(St[1]=Gt=>k())},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:i.save},null,8,["path"])]),_:1},8,["disabled","loading","tooltip"]),zt($(Tr),{disabled:_.value.loading,tooltip:$(o)("map.print.actions.clear"),onClick:St[2]||(St[2]=Gt=>P())},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:i.close},null,8,["path"])]),_:1},8,["disabled","tooltip"])],64)):(mt(),Oe($(Tr),{key:0,active:_.value.show,tooltip:$(o)("map.print.title"),onClick:St[0]||(St[0]=_o(Gt=>O(_.value.setting),["stop"])),loading:_.value.loading},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:i.print},null,8,["path"])]),_:1},8,["active","tooltip","loading"])),zt($(Tr),{tooltip:$(o)("map.print.actions.setting"),onClick:St[3]||(St[3]=Gt=>xt()),active:_.value.setting_show},{default:se(()=>[zt($(Bn),{size:18,type:"mdi",path:i.setting},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1})]),draggable:se(Gt=>[_.value.setting_show?(mt(),Oe($(pf),er({key:0},Gt,{height:220,show:_.value.setting_show,"onUpdate:show":St[9]||(St[9]=Dt=>_.value.setting_show=Dt),title:$(o)("map.print.setting.title")}),{default:se(()=>[_t("div",bq,[_t("div",null,[zt($(Oo),{modelValue:_.value.setting.ratio,"onUpdate:modelValue":St[4]||(St[4]=Dt=>_.value.setting.ratio=Dt),label:$(o)("map.print.field.ratio"),onChange:St[5]||(St[5]=Dt=>Nt())},null,8,["modelValue","label"])]),_t("div",null,[zt($(qm),{modelValue:_.value.setting.orientation,"onUpdate:modelValue":St[6]||(St[6]=Dt=>_.value.setting.orientation=Dt),items:[{value:"landscape",text:"Landscape"},{value:"portrait",text:"Portrait"}],label:$(o)("map.print.field.orientation"),onChange:St[7]||(St[7]=Dt=>Nt())},null,8,["modelValue","label"])]),Aq,_.value.show?(mt(),Oe($(Oc),{key:0,class:"btn-container",onClick:St[8]||(St[8]=Dt=>k())},{default:se(()=>[fa(yn($(o)("map.print.btn.apply")),1)]),_:1})):on("",!0)])]),_:2},1040,["show","title"])):on("",!0)]),_:1},16))}}),Cq=jn(wq,[["__scopeId","data-v-c6407056"]]),Iq=Fi({__name:"AllMapView",setup(t){function e(i){sb(i.id,tE({name:"raster 1",tiles:["https://naturalearthtiles.roblabs.com/tiles/natural_earth_cross_blended_hypso_shaded_relief.raster/{z}/{x}/{y}.png"],bounds:[104.96327341667353,18.461221184685627,106.65936430823979,19.549518287564368]})),sb(i.id,eE({name:"geojson 1",type:"line",color:"#ff0000",geojson:{type:"FeatureCollection",features:[{type:"Feature",properties:{id:"1",name:"feature 2"},geometry:{coordinates:[[[104.96327341667353,19.549518287564368],[104.96327341667353,18.461221184685627],[106.65936430823979,18.461221184685627],[106.65936430823979,19.549518287564368],[104.96327341667353,19.549518287564368]]],type:"Polygon"}}]},builds:[new q_().setLayers([new J0().setStyleType("area").setColor("#0000FF").build(),new J0().setStyleType("point").setColor("#ff0000").build()]),new YV().setDrawSupport([Sm.POINT,Sm.POLYGON,Sm.LINE_STRING])]}))}return(i,a)=>(mt(),Oe($(Y9),{onMapLoaded:e},{default:se(()=>[zt($(pq),{position:"top-right"}),zt($(uU),{position:"top-right"}),zt($(LG),{position:"top-right"}),zt($(R9),{position:"top-right"}),zt($(AG),{position:"top-left"},{endList:se(({mapId:c})=>[zt($(MV),{mapId:c},null,8,["mapId"])]),_:1}),zt($(Cq)),zt($(vq)),zt($(A9)),zt($(dN)),zt($(k9)),zt($(T9)),zt($(vN)),zt($(z9)),zt($(cN)),zt($(zV),{position:"bottom-left"})]),_:1}))}}),Mq=t4({history:T5("/demo-map/"),routes:[{path:"/",name:"home",component:Iq},{path:"/draw/",component:()=>H1(()=>import("./example-20nyYs2_.js"),__vite__mapDeps([0,1]))},{path:"/basemap/",component:()=>H1(()=>import("./example-B7hFA7Js.js"),__vite__mapDeps([2,3]))},{path:"/measurement/",component:()=>H1(()=>import("./example-Dfx3E96Z.js"),__vite__mapDeps([4,1]))}]}),Eq=Fi({__name:"App",setup(t){return(e,i)=>(mt(),Oe($(MI)))}}),Sq=jn(Eq,[["__scopeId","data-v-2160ae0a"]]),AE=Y3(Sq);AE.use(Mq);AE.mount("#root");export{zV as B,uU as D,ui as F,Y9 as M,jn as _,zt as a,Sm as b,Oe as c,Fi as d,os as e,EV as f,Eo as g,FM as h,pl as i,Rm as j,Yt as k,Zn as l,er as m,Da as n,mt as o,Zo as p,$e as q,$o as r,MV as s,yn as t,$ as u,sk as v,se as w,on as x,pq as y};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/example-20nyYs2_.js","assets/example-BRI0LJKA.css","assets/example-B7hFA7Js.js","assets/example-B3CW6woM.css","assets/example-Dfx3E96Z.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
