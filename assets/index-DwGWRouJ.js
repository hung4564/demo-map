(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(s){if(s.ep)return;s.ep=!0;const d=n(s);fetch(s.href,d)}})();const n5="modulepreload",r5=function(t){return"/demo-map/"+t},yC={},Cp=function(e,n,a){let s=Promise.resolve();return n&&n.length>0&&(document.getElementsByTagName("link"),s=Promise.all(n.map(d=>{if(d=r5(d),d in yC)return;yC[d]=!0;const l=d.endsWith(".css"),o=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${o}`))return;const g=document.createElement("link");if(g.rel=l?"stylesheet":n5,l||(g.as="script",g.crossOrigin=""),g.href=d,document.head.appendChild(g),l)return new Promise((_,C)=>{g.addEventListener("load",_),g.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})}))),s.then(()=>e()).catch(d=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=d,window.dispatchEvent(l),!l.defaultPrevented)throw d})};/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function H1(t,e){const n=new Set(t.split(","));return a=>n.has(a)}const zi={},eg=[],Il=()=>{},i5=()=>!1,Ny=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Uw=t=>t.startsWith("onUpdate:"),Ji=Object.assign,Hw=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},o5=Object.prototype.hasOwnProperty,di=(t,e)=>o5.call(t,e),ar=Array.isArray,ng=t=>Sg(t)==="[object Map]",Zp=t=>Sg(t)==="[object Set]",vC=t=>Sg(t)==="[object Date]",a5=t=>Sg(t)==="[object RegExp]",Mr=t=>typeof t=="function",po=t=>typeof t=="string",fd=t=>typeof t=="symbol",ji=t=>t!==null&&typeof t=="object",$w=t=>(ji(t)||Mr(t))&&Mr(t.then)&&Mr(t.catch),iS=Object.prototype.toString,Sg=t=>iS.call(t),s5=t=>Sg(t).slice(8,-1),oS=t=>Sg(t)==="[object Object]",Gw=t=>po(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,rg=H1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$1=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},l5=/-(\w)/g,el=$1(t=>t.replace(l5,(e,n)=>n?n.toUpperCase():"")),c5=/\B([A-Z])/g,pc=$1(t=>t.replace(c5,"-$1").toLowerCase()),jy=$1(t=>t.charAt(0).toUpperCase()+t.slice(1)),ry=$1(t=>t?`on${jy(t)}`:""),Bu=(t,e)=>!Object.is(t,e),ig=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},aS=(t,e,n,a=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:a,value:n})},c1=t=>{const e=parseFloat(t);return isNaN(e)?t:e},u1=t=>{const e=po(t)?Number(t):NaN;return isNaN(e)?t:e};let _C;const sS=()=>_C||(_C=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),u5="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",h5=H1(u5);function fi(t){if(ar(t)){const e={};for(let n=0;n<t.length;n++){const a=t[n],s=po(a)?m5(a):fi(a);if(s)for(const d in s)e[d]=s[d]}return e}else if(po(t)||ji(t))return t}const d5=/;(?![^(]*\))/g,f5=/:([^]+)/,p5=/\/\*[^]*?\*\//g;function m5(t){const e={};return t.replace(p5,"").split(d5).forEach(n=>{if(n){const a=n.split(f5);a.length>1&&(e[a[0].trim()]=a[1].trim())}}),e}function Li(t){let e="";if(po(t))e=t;else if(ar(t))for(let n=0;n<t.length;n++){const a=Li(t[n]);a&&(e+=a+" ")}else if(ji(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Eo(t){if(!t)return null;let{class:e,style:n}=t;return e&&!po(e)&&(t.class=Li(e)),n&&(t.style=fi(n)),t}const g5="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",y5=H1(g5);function lS(t){return!!t||t===""}function v5(t,e){if(t.length!==e.length)return!1;let n=!0;for(let a=0;n&&a<t.length;a++)n=Cf(t[a],e[a]);return n}function Cf(t,e){if(t===e)return!0;let n=vC(t),a=vC(e);if(n||a)return n&&a?t.getTime()===e.getTime():!1;if(n=fd(t),a=fd(e),n||a)return t===e;if(n=ar(t),a=ar(e),n||a)return n&&a?v5(t,e):!1;if(n=ji(t),a=ji(e),n||a){if(!n||!a)return!1;const s=Object.keys(t).length,d=Object.keys(e).length;if(s!==d)return!1;for(const l in t){const o=t.hasOwnProperty(l),g=e.hasOwnProperty(l);if(o&&!g||!o&&g||!Cf(t[l],e[l]))return!1}}return String(t)===String(e)}function G1(t,e){return t.findIndex(n=>Cf(n,e))}const Rn=t=>po(t)?t:t==null?"":ar(t)||ji(t)&&(t.toString===iS||!Mr(t.toString))?JSON.stringify(t,cS,2):String(t),cS=(t,e)=>e&&e.__v_isRef?cS(t,e.value):ng(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[a,s],d)=>(n[Zx(a,d)+" =>"]=s,n),{})}:Zp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Zx(n))}:fd(e)?Zx(e):ji(e)&&!ar(e)&&!oS(e)?String(e):e,Zx=(t,e="")=>{var n;return fd(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dc;class Zw{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=dc,!e&&dc&&(this.index=(dc.scopes||(dc.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=dc;try{return dc=this,e()}finally{dc=n}}}on(){dc=this}off(){dc=this.parent}stop(e){if(this._active){let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.scopes)for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function _5(t){return new Zw(t)}function uS(t,e=dc){e&&e.active&&e.effects.push(t)}function Ww(){return dc}function hS(t){dc&&dc.cleanups.push(t)}let Op;class pg{constructor(e,n,a,s){this.fn=e,this.trigger=n,this.scheduler=a,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,uS(this,s)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,Of();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed){if(n.computed.effect._dirtyLevel===2)return!0;if(b5(n.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),zf()}return this._dirtyLevel>=5}set dirty(e){this._dirtyLevel=e?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=bf,n=Op;try{return bf=!0,Op=this,this._runnings++,bC(this),this.fn()}finally{xC(this),this._runnings--,Op=n,bf=e}}stop(){this.active&&(bC(this),xC(this),this.onStop&&this.onStop(),this.active=!1)}}function b5(t){return t.value}function bC(t){t._trackId++,t._depsLength=0}function xC(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)dS(t.deps[e],t);t.deps.length=t._depsLength}}function dS(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}function x5(t,e){t.effect instanceof pg&&(t=t.effect.fn);const n=new pg(t,Il,()=>{n.dirty&&n.run()});e&&(Ji(n,e),e.scope&&uS(n,e.scope)),(!e||!e.lazy)&&n.run();const a=n.run.bind(n);return a.effect=n,a}function A5(t){t.effect.stop()}let bf=!0,GA=0;const fS=[];function Of(){fS.push(bf),bf=!1}function zf(){const t=fS.pop();bf=t===void 0?!0:t}function qw(){GA++}function Kw(){for(GA--;!GA&&ZA.length;)ZA.shift()()}function pS(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const a=t.deps[t._depsLength];a!==e?(a&&dS(a,t),t.deps[t._depsLength++]=e):t._depsLength++}}const ZA=[];function mS(t,e,n){qw();for(const a of t.keys()){if(!t.computed&&a.computed&&t.get(a)===a._trackId&&a._runnings>0){a._dirtyLevel=2;continue}let s;a._dirtyLevel<e&&(s??(s=t.get(a)===a._trackId))&&(a._shouldSchedule||(a._shouldSchedule=a._dirtyLevel===0),a.computed&&a._dirtyLevel===2&&(a._shouldSchedule=!0),a._dirtyLevel=e),a._shouldSchedule&&(s??(s=t.get(a)===a._trackId))&&(a.trigger(),(!a._runnings||a.allowRecurse)&&a._dirtyLevel!==3&&(a._shouldSchedule=!1,a.scheduler&&ZA.push(a.scheduler)))}Kw()}const gS=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},h1=new WeakMap,zp=Symbol(""),WA=Symbol("");function Sl(t,e,n){if(bf&&Op){let a=h1.get(t);a||h1.set(t,a=new Map);let s=a.get(n);s||a.set(n,s=gS(()=>a.delete(n))),pS(Op,s)}}function cd(t,e,n,a,s,d){const l=h1.get(t);if(!l)return;let o=[];if(e==="clear")o=[...l.values()];else if(n==="length"&&ar(t)){const g=Number(a);l.forEach((_,C)=>{(C==="length"||!fd(C)&&C>=g)&&o.push(_)})}else switch(n!==void 0&&o.push(l.get(n)),e){case"add":ar(t)?Gw(n)&&o.push(l.get("length")):(o.push(l.get(zp)),ng(t)&&o.push(l.get(WA)));break;case"delete":ar(t)||(o.push(l.get(zp)),ng(t)&&o.push(l.get(WA)));break;case"set":ng(t)&&o.push(l.get(zp));break}qw();for(const g of o)g&&mS(g,5);Kw()}function w5(t,e){const n=h1.get(t);return n&&n.get(e)}const C5=H1("__proto__,__v_isRef,__isVue"),yS=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(fd)),AC=I5();function I5(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const a=hi(this);for(let d=0,l=this.length;d<l;d++)Sl(a,"get",d+"");const s=a[e](...n);return s===-1||s===!1?a[e](...n.map(hi)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Of(),qw();const a=hi(this)[e].apply(this,n);return Kw(),zf(),a}}),t}function M5(t){fd(t)||(t=String(t));const e=hi(this);return Sl(e,"has",t),e.hasOwnProperty(t)}class vS{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,a){const s=this._isReadonly,d=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return d;if(n==="__v_raw")return a===(s?d?CS:wS:d?AS:xS).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(a)?e:void 0;const l=ar(e);if(!s){if(l&&di(AC,n))return Reflect.get(AC,n,a);if(n==="hasOwnProperty")return M5}const o=Reflect.get(e,n,a);return(fd(n)?yS.has(n):C5(n))||(s||Sl(e,"get",n),d)?o:mo(o)?l&&Gw(n)?o:o.value:ji(o)?s?Vy(o):ls(o):o}}class _S extends vS{constructor(e=!1){super(!1,e)}set(e,n,a,s){let d=e[n];if(!this._isShallow){const g=mg(d);if(!xy(a)&&!mg(a)&&(d=hi(d),a=hi(a)),!ar(e)&&mo(d)&&!mo(a))return g?!1:(d.value=a,!0)}const l=ar(e)&&Gw(n)?Number(n)<e.length:di(e,n),o=Reflect.set(e,n,a,s);return e===hi(s)&&(l?Bu(a,d)&&cd(e,"set",n,a):cd(e,"add",n,a)),o}deleteProperty(e,n){const a=di(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&a&&cd(e,"delete",n,void 0),s}has(e,n){const a=Reflect.has(e,n);return(!fd(n)||!yS.has(n))&&Sl(e,"has",n),a}ownKeys(e){return Sl(e,"iterate",ar(e)?"length":zp),Reflect.ownKeys(e)}}class bS extends vS{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const S5=new _S,E5=new bS,T5=new _S(!0),P5=new bS(!0),Yw=t=>t,Z1=t=>Reflect.getPrototypeOf(t);function A_(t,e,n=!1,a=!1){t=t.__v_raw;const s=hi(t),d=hi(e);n||(Bu(e,d)&&Sl(s,"get",e),Sl(s,"get",d));const{has:l}=Z1(s),o=a?Yw:n?Jw:Ay;if(l.call(s,e))return o(t.get(e));if(l.call(s,d))return o(t.get(d));t!==s&&t.get(e)}function w_(t,e=!1){const n=this.__v_raw,a=hi(n),s=hi(t);return e||(Bu(t,s)&&Sl(a,"has",t),Sl(a,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function C_(t,e=!1){return t=t.__v_raw,!e&&Sl(hi(t),"iterate",zp),Reflect.get(t,"size",t)}function wC(t){t=hi(t);const e=hi(this);return Z1(e).has.call(e,t)||(e.add(t),cd(e,"add",t,t)),this}function CC(t,e){e=hi(e);const n=hi(this),{has:a,get:s}=Z1(n);let d=a.call(n,t);d||(t=hi(t),d=a.call(n,t));const l=s.call(n,t);return n.set(t,e),d?Bu(e,l)&&cd(n,"set",t,e):cd(n,"add",t,e),this}function IC(t){const e=hi(this),{has:n,get:a}=Z1(e);let s=n.call(e,t);s||(t=hi(t),s=n.call(e,t)),a&&a.call(e,t);const d=e.delete(t);return s&&cd(e,"delete",t,void 0),d}function MC(){const t=hi(this),e=t.size!==0,n=t.clear();return e&&cd(t,"clear",void 0,void 0),n}function I_(t,e){return function(a,s){const d=this,l=d.__v_raw,o=hi(l),g=e?Yw:t?Jw:Ay;return!t&&Sl(o,"iterate",zp),l.forEach((_,C)=>a.call(s,g(_),g(C),d))}}function M_(t,e,n){return function(...a){const s=this.__v_raw,d=hi(s),l=ng(d),o=t==="entries"||t===Symbol.iterator&&l,g=t==="keys"&&l,_=s[t](...a),C=n?Yw:e?Jw:Ay;return!e&&Sl(d,"iterate",g?WA:zp),{next(){const{value:I,done:E}=_.next();return E?{value:I,done:E}:{value:o?[C(I[0]),C(I[1])]:C(I),done:E}},[Symbol.iterator](){return this}}}}function af(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function k5(){const t={get(d){return A_(this,d)},get size(){return C_(this)},has:w_,add:wC,set:CC,delete:IC,clear:MC,forEach:I_(!1,!1)},e={get(d){return A_(this,d,!1,!0)},get size(){return C_(this)},has:w_,add:wC,set:CC,delete:IC,clear:MC,forEach:I_(!1,!0)},n={get(d){return A_(this,d,!0)},get size(){return C_(this,!0)},has(d){return w_.call(this,d,!0)},add:af("add"),set:af("set"),delete:af("delete"),clear:af("clear"),forEach:I_(!0,!1)},a={get(d){return A_(this,d,!0,!0)},get size(){return C_(this,!0)},has(d){return w_.call(this,d,!0)},add:af("add"),set:af("set"),delete:af("delete"),clear:af("clear"),forEach:I_(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{t[d]=M_(d,!1,!1),n[d]=M_(d,!0,!1),e[d]=M_(d,!1,!0),a[d]=M_(d,!0,!0)}),[t,n,e,a]}const[L5,R5,D5,O5]=k5();function W1(t,e){const n=e?t?O5:D5:t?R5:L5;return(a,s,d)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?a:Reflect.get(di(n,s)&&s in a?n:a,s,d)}const z5={get:W1(!1,!1)},F5={get:W1(!1,!0)},B5={get:W1(!0,!1)},N5={get:W1(!0,!0)},xS=new WeakMap,AS=new WeakMap,wS=new WeakMap,CS=new WeakMap;function j5(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function V5(t){return t.__v_skip||!Object.isExtensible(t)?0:j5(s5(t))}function ls(t){return mg(t)?t:q1(t,!1,S5,z5,xS)}function Xw(t){return q1(t,!1,T5,F5,AS)}function Vy(t){return q1(t,!0,E5,B5,wS)}function U5(t){return q1(t,!0,P5,N5,CS)}function q1(t,e,n,a,s){if(!ji(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const d=s.get(t);if(d)return d;const l=V5(t);if(l===0)return t;const o=new Proxy(t,l===2?a:n);return s.set(t,o),o}function og(t){return mg(t)?og(t.__v_raw):!!(t&&t.__v_isReactive)}function mg(t){return!!(t&&t.__v_isReadonly)}function xy(t){return!!(t&&t.__v_isShallow)}function Qw(t){return t?!!t.__v_raw:!1}function hi(t){const e=t&&t.__v_raw;return e?hi(e):t}function IS(t){return Object.isExtensible(t)&&aS(t,"__v_skip",!0),t}const Ay=t=>ji(t)?ls(t):t,Jw=t=>ji(t)?Vy(t):t;class MS{constructor(e,n,a,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new pg(()=>e(this._value),()=>ag(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=a}get value(){const e=hi(this);return(!e._cacheable||e.effect.dirty)&&Bu(e._value,e._value=e.effect.run())&&ag(e,5),t2(e),e.effect._dirtyLevel>=2&&ag(e,3),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function H5(t,e,n=!1){let a,s;const d=Mr(t);return d?(a=t,s=Il):(a=t.get,s=t.set),new MS(a,s,d||!s,n)}function t2(t){var e;bf&&Op&&(t=hi(t),pS(Op,(e=t.dep)!=null?e:t.dep=gS(()=>t.dep=void 0,t instanceof MS?t:void 0)))}function ag(t,e=5,n,a){t=hi(t);const s=t.dep;s&&mS(s,e)}function mo(t){return!!(t&&t.__v_isRef===!0)}function mn(t){return SS(t,!1)}function Wp(t){return SS(t,!0)}function SS(t,e){return mo(t)?t:new $5(t,e)}class $5{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:hi(e),this._value=n?e:Ay(e)}get value(){return t2(this),this._value}set value(e){const n=this.__v_isShallow||xy(e)||mg(e);e=n?e:hi(e),Bu(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=n?e:Ay(e),ag(this,5))}}function G5(t){ag(t,5)}function ut(t){return mo(t)?t.value:t}function Z5(t){return Mr(t)?t():ut(t)}const W5={get:(t,e,n)=>ut(Reflect.get(t,e,n)),set:(t,e,n,a)=>{const s=t[e];return mo(s)&&!mo(n)?(s.value=n,!0):Reflect.set(t,e,n,a)}};function e2(t){return og(t)?t:new Proxy(t,W5)}class q5{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:a}=e(()=>t2(this),()=>ag(this));this._get=n,this._set=a}get value(){return this._get()}set value(e){this._set(e)}}function ES(t){return new q5(t)}function K5(t){const e=ar(t)?new Array(t.length):{};for(const n in t)e[n]=TS(t,n);return e}class Y5{constructor(e,n,a){this._object=e,this._key=n,this._defaultValue=a,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return w5(hi(this._object),this._key)}}class X5{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Q5(t,e,n){return mo(t)?t:Mr(t)?new X5(t):ji(t)&&arguments.length>1?TS(t,e,n):mn(t)}function TS(t,e,n){const a=t[e];return mo(a)?a:new Y5(t,e,n)}const J5={GET:"get",HAS:"has",ITERATE:"iterate"},tk={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"};/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ek(t,e){}const nk={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER"},rk={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function ud(t,e,n,a){try{return a?t(...a):t()}catch(s){qp(s,e,n)}}function mc(t,e,n,a){if(Mr(t)){const s=ud(t,e,n,a);return s&&$w(s)&&s.catch(d=>{qp(d,e,n)}),s}if(ar(t)){const s=[];for(let d=0;d<t.length;d++)s.push(mc(t[d],e,n,a));return s}}function qp(t,e,n,a=!0){const s=e?e.vnode:null;if(e){let d=e.parent;const l=e.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;for(;d;){const _=d.ec;if(_){for(let C=0;C<_.length;C++)if(_[C](t,l,o)===!1)return}d=d.parent}const g=e.appContext.config.errorHandler;if(g){Of(),ud(g,null,10,[t,l,o]),zf();return}}ik(t,n,s,a)}function ik(t,e,n,a=!0){console.error(t)}let wy=!1,qA=!1;const ws=[];let vh=0;const sg=[];let uf=null,kp=0;const PS=Promise.resolve();let n2=null;function El(t){const e=n2||PS;return t?e.then(this?t.bind(this):t):e}function ok(t){let e=vh+1,n=ws.length;for(;e<n;){const a=e+n>>>1,s=ws[a],d=Cy(s);d<t||d===t&&s.pre?e=a+1:n=a}return e}function K1(t){(!ws.length||!ws.includes(t,wy&&t.allowRecurse?vh+1:vh))&&(t.id==null?ws.push(t):ws.splice(ok(t.id),0,t),kS())}function kS(){!wy&&!qA&&(qA=!0,n2=PS.then(LS))}function ak(t){const e=ws.indexOf(t);e>vh&&ws.splice(e,1)}function d1(t){ar(t)?sg.push(...t):(!uf||!uf.includes(t,t.allowRecurse?kp+1:kp))&&sg.push(t),kS()}function SC(t,e,n=wy?vh+1:0){for(;n<ws.length;n++){const a=ws[n];if(a&&a.pre){if(t&&a.id!==t.uid)continue;ws.splice(n,1),n--,a()}}}function f1(t){if(sg.length){const e=[...new Set(sg)].sort((n,a)=>Cy(n)-Cy(a));if(sg.length=0,uf){uf.push(...e);return}for(uf=e,kp=0;kp<uf.length;kp++){const n=uf[kp];n.active!==!1&&n()}uf=null,kp=0}}const Cy=t=>t.id==null?1/0:t.id,sk=(t,e)=>{const n=Cy(t)-Cy(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function LS(t){qA=!1,wy=!0,ws.sort(sk);try{for(vh=0;vh<ws.length;vh++){const e=ws[vh];e&&e.active!==!1&&ud(e,null,14)}}finally{vh=0,ws.length=0,f1(),wy=!1,n2=null,(ws.length||sg.length)&&LS()}}let Hm,S_=[];function RS(t,e){var n,a;Hm=t,Hm?(Hm.enabled=!0,S_.forEach(({event:s,args:d})=>Hm.emit(s,...d)),S_=[]):typeof window<"u"&&window.HTMLElement&&!((a=(n=window.navigator)==null?void 0:n.userAgent)!=null&&a.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(d=>{RS(d,e)}),setTimeout(()=>{Hm||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,S_=[])},3e3)):S_=[]}function lk(t,e,...n){if(t.isUnmounted)return;const a=t.vnode.props||zi;let s=n;const d=e.startsWith("update:"),l=d&&e.slice(7);if(l&&l in a){const C=`${l==="modelValue"?"model":l}Modifiers`,{number:I,trim:E}=a[C]||zi;E&&(s=n.map(S=>po(S)?S.trim():S)),I&&(s=n.map(c1))}let o,g=a[o=ry(e)]||a[o=ry(el(e))];!g&&d&&(g=a[o=ry(pc(e))]),g&&mc(g,t,6,s);const _=a[o+"Once"];if(_){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,mc(_,t,6,s)}}function DS(t,e,n=!1){const a=e.emitsCache,s=a.get(t);if(s!==void 0)return s;const d=t.emits;let l={},o=!1;if(!Mr(t)){const g=_=>{const C=DS(_,e,!0);C&&(o=!0,Ji(l,C))};!n&&e.mixins.length&&e.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}return!d&&!o?(ji(t)&&a.set(t,null),null):(ar(d)?d.forEach(g=>l[g]=null):Ji(l,d),ji(t)&&a.set(t,l),l)}function Y1(t,e){return!t||!Ny(e)?!1:(e=e.slice(2).replace(/Once$/,""),di(t,e[0].toLowerCase()+e.slice(1))||di(t,pc(e))||di(t,e))}let Ca=null,X1=null;function Iy(t){const e=Ca;return Ca=t,X1=t&&t.type.__scopeId||null,e}function _c(t){X1=t}function bc(){X1=null}const ck=t=>Ie;function Ie(t,e=Ca,n){if(!e||t._n)return t;const a=(...s)=>{a._d&&iw(-1);const d=Iy(e);let l;try{l=t(...s)}finally{Iy(d),a._d&&iw(1)}return l};return a._n=!0,a._c=!0,a._d=!0,a}function Z_(t){const{type:e,vnode:n,proxy:a,withProxy:s,propsOptions:[d],slots:l,attrs:o,emit:g,render:_,renderCache:C,props:I,data:E,setupState:S,ctx:k,inheritAttrs:R}=t,B=Iy(t);let V,F;try{if(n.shapeFlag&4){const G=s||a,Q=G;V=fc(_.call(Q,G,C,I,S,E,k)),F=o}else{const G=e;V=fc(G.length>1?G(I,{attrs:o,slots:l,emit:g}):G(I,null)),F=e.props?o:hk(o)}}catch(G){ay.length=0,qp(G,t,1),V=ee(ja)}let j=V;if(F&&R!==!1){const G=Object.keys(F),{shapeFlag:Q}=j;G.length&&Q&7&&(d&&G.some(Uw)&&(F=dk(F,d)),j=Ah(j,F,!1,!0))}return n.dirs&&(j=Ah(j,null,!1,!0),j.dirs=j.dirs?j.dirs.concat(n.dirs):n.dirs),n.transition&&(j.transition=n.transition),V=j,Iy(B),V}function uk(t,e=!0){let n;for(let a=0;a<t.length;a++){const s=t[a];if(Mf(s)){if(s.type!==ja||s.children==="v-if"){if(n)return;n=s}}else return}return n}const hk=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ny(n))&&((e||(e={}))[n]=t[n]);return e},dk=(t,e)=>{const n={};for(const a in t)(!Uw(a)||!(a.slice(9)in e))&&(n[a]=t[a]);return n};function fk(t,e,n){const{props:a,children:s,component:d}=t,{props:l,children:o,patchFlag:g}=e,_=d.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&g>=0){if(g&1024)return!0;if(g&16)return a?EC(a,l,_):!!l;if(g&8){const C=e.dynamicProps;for(let I=0;I<C.length;I++){const E=C[I];if(l[E]!==a[E]&&!Y1(_,E))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:a===l?!1:a?l?EC(a,l,_):!0:!!l;return!1}function EC(t,e,n){const a=Object.keys(e);if(a.length!==Object.keys(t).length)return!0;for(let s=0;s<a.length;s++){const d=a[s];if(e[d]!==t[d]&&!Y1(n,d))return!0}return!1}function r2({vnode:t,parent:e},n){for(;e;){const a=e.subTree;if(a.suspense&&a.suspense.activeBranch===t&&(a.el=t.el),a===t)(t=e.vnode).el=n,e=e.parent;else break}}const i2="components",pk="directives";function Js(t,e){return o2(i2,t,!0,e)||t}const OS=Symbol.for("v-ndc");function sa(t){return po(t)?o2(i2,t,!1)||t:t||OS}function mk(t){return o2(pk,t)}function o2(t,e,n=!0,a=!1){const s=Ca||wa;if(s){const d=s.type;if(t===i2){const o=cw(d,!1);if(o&&(o===e||o===el(e)||o===jy(el(e))))return d}const l=TC(s[t]||d[t],e)||TC(s.appContext[t],e);return!l&&a?d:l}}function TC(t,e){return t&&(t[e]||t[el(e)]||t[jy(el(e))])}const KA=t=>t.__isSuspense;let YA=0;const gk={name:"Suspense",__isSuspense:!0,process(t,e,n,a,s,d,l,o,g,_){if(t==null)vk(e,n,a,s,d,l,o,g,_);else{if(d&&d.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}_k(t,e,n,a,s,l,o,g,_)}},hydrate:bk,create:a2,normalize:xk},yk=gk;function My(t,e){const n=t.props&&t.props[e];Mr(n)&&n()}function vk(t,e,n,a,s,d,l,o,g){const{p:_,o:{createElement:C}}=g,I=C("div"),E=t.suspense=a2(t,s,a,e,I,n,d,l,o,g);_(null,E.pendingBranch=t.ssContent,I,null,a,E,d,l),E.deps>0?(My(t,"onPending"),My(t,"onFallback"),_(null,t.ssFallback,e,n,a,null,d,l),lg(E,t.ssFallback)):E.resolve(!1,!0)}function _k(t,e,n,a,s,d,l,o,{p:g,um:_,o:{createElement:C}}){const I=e.suspense=t.suspense;I.vnode=e,e.el=t.el;const E=e.ssContent,S=e.ssFallback,{activeBranch:k,pendingBranch:R,isInFallback:B,isHydrating:V}=I;if(R)I.pendingBranch=E,Ou(E,R)?(g(R,E,I.hiddenContainer,null,s,I,d,l,o),I.deps<=0?I.resolve():B&&(V||(g(k,S,n,a,s,null,d,l,o),lg(I,S)))):(I.pendingId=YA++,V?(I.isHydrating=!1,I.activeBranch=R):_(R,s,I),I.deps=0,I.effects.length=0,I.hiddenContainer=C("div"),B?(g(null,E,I.hiddenContainer,null,s,I,d,l,o),I.deps<=0?I.resolve():(g(k,S,n,a,s,null,d,l,o),lg(I,S))):k&&Ou(E,k)?(g(k,E,n,a,s,I,d,l,o),I.resolve(!0)):(g(null,E,I.hiddenContainer,null,s,I,d,l,o),I.deps<=0&&I.resolve()));else if(k&&Ou(E,k))g(k,E,n,a,s,I,d,l,o),lg(I,E);else if(My(e,"onPending"),I.pendingBranch=E,E.shapeFlag&512?I.pendingId=E.component.suspenseId:I.pendingId=YA++,g(null,E,I.hiddenContainer,null,s,I,d,l,o),I.deps<=0)I.resolve();else{const{timeout:F,pendingId:j}=I;F>0?setTimeout(()=>{I.pendingId===j&&I.fallback(S)},F):F===0&&I.fallback(S)}}function a2(t,e,n,a,s,d,l,o,g,_,C=!1){const{p:I,m:E,um:S,n:k,o:{parentNode:R,remove:B}}=_;let V;const F=Ak(t);F&&e&&e.pendingBranch&&(V=e.pendingId,e.deps++);const j=t.props?u1(t.props.timeout):void 0,G=d,Q={vnode:t,parent:e,parentComponent:n,namespace:l,container:a,hiddenContainer:s,deps:0,pendingId:YA++,timeout:typeof j=="number"?j:-1,activeBranch:null,pendingBranch:null,isInFallback:!C,isHydrating:C,isUnmounted:!1,effects:[],resolve(nt=!1,X=!1){const{vnode:K,activeBranch:Z,pendingBranch:at,pendingId:pt,effects:rt,parentComponent:xt,container:q}=Q;let zt=!1;Q.isHydrating?Q.isHydrating=!1:nt||(zt=Z&&at.transition&&at.transition.mode==="out-in",zt&&(Z.transition.afterLeave=()=>{pt===Q.pendingId&&(E(at,q,d===G?k(Z):d,0),d1(rt))}),Z&&(R(Z.el)!==Q.hiddenContainer&&(d=k(Z)),S(Z,xt,Q,!0)),zt||E(at,q,d,0)),lg(Q,at),Q.pendingBranch=null,Q.isInFallback=!1;let Rt=Q.parent,Bt=!1;for(;Rt;){if(Rt.pendingBranch){Rt.effects.push(...rt),Bt=!0;break}Rt=Rt.parent}!Bt&&!zt&&d1(rt),Q.effects=[],F&&e&&e.pendingBranch&&V===e.pendingId&&(e.deps--,e.deps===0&&!X&&e.resolve()),My(K,"onResolve")},fallback(nt){if(!Q.pendingBranch)return;const{vnode:X,activeBranch:K,parentComponent:Z,container:at,namespace:pt}=Q;My(X,"onFallback");const rt=k(K),xt=()=>{Q.isInFallback&&(I(null,nt,at,rt,Z,null,pt,o,g),lg(Q,nt))},q=nt.transition&&nt.transition.mode==="out-in";q&&(K.transition.afterLeave=xt),Q.isInFallback=!0,S(K,Z,null,!0),q||xt()},move(nt,X,K){Q.activeBranch&&E(Q.activeBranch,nt,X,K),Q.container=nt},next(){return Q.activeBranch&&k(Q.activeBranch)},registerDep(nt,X,K){const Z=!!Q.pendingBranch;Z&&Q.deps++;const at=nt.vnode.el;nt.asyncDep.catch(pt=>{qp(pt,nt,0)}).then(pt=>{if(nt.isUnmounted||Q.isUnmounted||Q.pendingId!==nt.suspenseId)return;nt.asyncResolved=!0;const{vnode:rt}=nt;sw(nt,pt,!1),at&&(rt.el=at);const xt=!at&&nt.subTree.el;X(nt,rt,R(at||nt.subTree.el),at?null:k(nt.subTree),Q,l,K),xt&&B(xt),r2(nt,rt.el),Z&&--Q.deps===0&&Q.resolve()})},unmount(nt,X){Q.isUnmounted=!0,Q.activeBranch&&S(Q.activeBranch,n,nt,X),Q.pendingBranch&&S(Q.pendingBranch,n,nt,X)}};return Q}function bk(t,e,n,a,s,d,l,o,g){const _=e.suspense=a2(e,a,n,t.parentNode,document.createElement("div"),null,s,d,l,o,!0),C=g(t,_.pendingBranch=e.ssContent,n,_,d,l);return _.deps===0&&_.resolve(!1,!0),C}function xk(t){const{shapeFlag:e,children:n}=t,a=e&32;t.ssContent=PC(a?n.default:n),t.ssFallback=a?PC(n.fallback):ee(ja)}function PC(t){let e;if(Mr(t)){const n=Vp&&t._c;n&&(t._d=!1,Mt()),t=t(),n&&(t._d=!0,e=Ml,bE())}return ar(t)&&(t=uk(t)),t=fc(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function zS(t,e){e&&e.pendingBranch?ar(t)?e.effects.push(...t):e.effects.push(t):d1(t)}function lg(t,e){t.activeBranch=e;const{vnode:n,parentComponent:a}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,a&&a.subTree===n&&(a.vnode.el=s,r2(a,s))}function Ak(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}function Q1(t,e,n=wa,a=!1){if(n){const s=n[t]||(n[t]=[]),d=e.__weh||(e.__weh=(...l)=>{Of();const o=Up(n),g=mc(e,n,t,l);return o(),zf(),g});return a?s.unshift(d):s.push(d),d}}const gd=t=>(e,n=wa)=>{(!$y||t==="sp")&&Q1(t,(...a)=>e(...a),n)},FS=gd("bm"),go=gd("m"),BS=gd("bu"),J1=gd("u"),Kp=gd("bum"),yd=gd("um"),NS=gd("sp"),jS=gd("rtg"),VS=gd("rtc");function US(t,e=wa){Q1("ec",t,e)}function gc(t,e){if(Ca===null)return t;const n=Gy(Ca),a=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[d,l,o,g=zi]=e[s];d&&(Mr(d)&&(d={mounted:d,updated:d}),d.deep&&gf(l),a.push({dir:d,instance:n,value:l,oldValue:void 0,arg:o,modifiers:g}))}return t}function yh(t,e,n,a){const s=t.dirs,d=e&&e.dirs;for(let l=0;l<s.length;l++){const o=s[l];d&&(o.oldValue=d[l].value);let g=o.dir[a];g&&(Of(),mc(g,n,8,[t.el,o,t,e]),zf())}}function ki(t,e,n,a){let s;const d=n&&n[a];if(ar(t)||po(t)){s=new Array(t.length);for(let l=0,o=t.length;l<o;l++)s[l]=e(t[l],l,void 0,d&&d[l])}else if(typeof t=="number"){s=new Array(t);for(let l=0;l<t;l++)s[l]=e(l+1,l,void 0,d&&d[l])}else if(ji(t))if(t[Symbol.iterator])s=Array.from(t,(l,o)=>e(l,o,void 0,d&&d[o]));else{const l=Object.keys(t);s=new Array(l.length);for(let o=0,g=l.length;o<g;o++){const _=l[o];s[o]=e(t[_],_,o,d&&d[o])}}else s=[];return n&&(n[a]=s),s}function wk(t,e){for(let n=0;n<e.length;n++){const a=e[n];if(ar(a))for(let s=0;s<a.length;s++)t[a[s].name]=a[s].fn;else a&&(t[a.name]=a.key?(...s)=>{const d=a.fn(...s);return d&&(d.key=a.key),d}:a.fn)}return t}/*! #__NO_SIDE_EFFECTS__ */function nr(t,e){return Mr(t)?Ji({name:t.name},e,{setup:t}):t}const Fp=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Ck(t){Mr(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:a,delay:s=200,timeout:d,suspensible:l=!0,onError:o}=t;let g=null,_,C=0;const I=()=>(C++,g=null,E()),E=()=>{let S;return g||(S=g=e().catch(k=>{if(k=k instanceof Error?k:new Error(String(k)),o)return new Promise((R,B)=>{o(k,()=>R(I()),()=>B(k),C+1)});throw k}).then(k=>S!==g&&g?g:(k&&(k.__esModule||k[Symbol.toStringTag]==="Module")&&(k=k.default),_=k,k)))};return nr({name:"AsyncComponentWrapper",__asyncLoader:E,get __asyncResolved(){return _},setup(){const S=wa;if(_)return()=>Wx(_,S);const k=F=>{g=null,qp(F,S,13,!a)};if(l&&S.suspense||$y)return E().then(F=>()=>Wx(F,S)).catch(F=>(k(F),()=>a?ee(a,{error:F}):null));const R=mn(!1),B=mn(),V=mn(!!s);return s&&setTimeout(()=>{V.value=!1},s),d!=null&&setTimeout(()=>{if(!R.value&&!B.value){const F=new Error(`Async component timed out after ${d}ms.`);k(F),B.value=F}},d),E().then(()=>{R.value=!0,S.parent&&Hy(S.parent.vnode)&&(S.parent.effect.dirty=!0,K1(S.parent.update))}).catch(F=>{k(F),B.value=F}),()=>{if(R.value&&_)return Wx(_,S);if(B.value&&a)return ee(a,{error:B.value});if(n&&!V.value)return ee(n)}}})}function Wx(t,e){const{ref:n,props:a,children:s,ce:d}=e.vnode,l=ee(t,a,s);return l.ref=n,l.ce=d,delete e.vnode.ce,l}function Wn(t,e,n={},a,s){if(Ca.isCE||Ca.parent&&Fp(Ca.parent)&&Ca.parent.isCE)return e!=="default"&&(n.name=e),ee("slot",n,a&&a());let d=t[e];d&&d._c&&(d._d=!1),Mt();const l=d&&HS(d(n)),o=Je(mr,{key:n.key||l&&l.key||`_${e}`},l||(a?a():[]),l&&t._===1?64:-2);return!s&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),d&&d._c&&(d._d=!0),o}function HS(t){return t.some(e=>Mf(e)?!(e.type===ja||e.type===mr&&!HS(e.children)):!0)?t:null}function Ik(t,e){const n={};for(const a in t)n[e&&/[A-Z]/.test(a)?`on:${a}`:ry(a)]=t[a];return n}const XA=t=>t?CE(t)?Gy(t):XA(t.parent):null,iy=Ji(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>XA(t.parent),$root:t=>XA(t.root),$emit:t=>t.emit,$options:t=>s2(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,K1(t.update)}),$nextTick:t=>t.n||(t.n=El.bind(t.proxy)),$watch:t=>eL.bind(t)}),qx=(t,e)=>t!==zi&&!t.__isScriptSetup&&di(t,e),QA={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:a,data:s,props:d,accessCache:l,type:o,appContext:g}=t;let _;if(e[0]!=="$"){const S=l[e];if(S!==void 0)switch(S){case 1:return a[e];case 2:return s[e];case 4:return n[e];case 3:return d[e]}else{if(qx(a,e))return l[e]=1,a[e];if(s!==zi&&di(s,e))return l[e]=2,s[e];if((_=t.propsOptions[0])&&di(_,e))return l[e]=3,d[e];if(n!==zi&&di(n,e))return l[e]=4,n[e];JA&&(l[e]=0)}}const C=iy[e];let I,E;if(C)return e==="$attrs"&&Sl(t.attrs,"get",""),C(t);if((I=o.__cssModules)&&(I=I[e]))return I;if(n!==zi&&di(n,e))return l[e]=4,n[e];if(E=g.config.globalProperties,di(E,e))return E[e]},set({_:t},e,n){const{data:a,setupState:s,ctx:d}=t;return qx(s,e)?(s[e]=n,!0):a!==zi&&di(a,e)?(a[e]=n,!0):di(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(d[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:a,appContext:s,propsOptions:d}},l){let o;return!!n[l]||t!==zi&&di(t,l)||qx(e,l)||(o=d[0])&&di(o,l)||di(a,l)||di(iy,l)||di(s.config.globalProperties,l)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:di(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},Mk=Ji({},QA,{get(t,e){if(e!==Symbol.unscopables)return QA.get(t,e,t)},has(t,e){return e[0]!=="_"&&!h5(e)}});function Sk(){return null}function Ek(){return null}function Tk(t){}function Pk(t){}function kk(){return null}function Lk(){}function Rk(t,e){return null}function $S(){return GS().slots}function Dk(){return GS().attrs}function GS(){const t=xc();return t.setupContext||(t.setupContext=SE(t))}function Sy(t){return ar(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function Ok(t,e){const n=Sy(t);for(const a in e){if(a.startsWith("__skip"))continue;let s=n[a];s?ar(s)||Mr(s)?s=n[a]={type:s,default:e[a]}:s.default=e[a]:s===null&&(s=n[a]={default:e[a]}),s&&e[`__skip_${a}`]&&(s.skipFactory=!0)}return n}function to(t,e){return!t||!e?t||e:ar(t)&&ar(e)?t.concat(e):Ji({},Sy(t),Sy(e))}function zk(t,e){const n={};for(const a in t)e.includes(a)||Object.defineProperty(n,a,{enumerable:!0,get:()=>t[a]});return n}function Fk(t){const e=xc();let n=t();return aw(),$w(n)&&(n=n.catch(a=>{throw Up(e),a})),[n,()=>Up(e)]}let JA=!0;function Bk(t){const e=s2(t),n=t.proxy,a=t.ctx;JA=!1,e.beforeCreate&&kC(e.beforeCreate,t,"bc");const{data:s,computed:d,methods:l,watch:o,provide:g,inject:_,created:C,beforeMount:I,mounted:E,beforeUpdate:S,updated:k,activated:R,deactivated:B,beforeDestroy:V,beforeUnmount:F,destroyed:j,unmounted:G,render:Q,renderTracked:nt,renderTriggered:X,errorCaptured:K,serverPrefetch:Z,expose:at,inheritAttrs:pt,components:rt,directives:xt,filters:q}=e;if(_&&Nk(_,a,null),l)for(const Bt in l){const Xt=l[Bt];Mr(Xt)&&(a[Bt]=Xt.bind(n))}if(s){const Bt=s.call(n,n);ji(Bt)&&(t.data=ls(Bt))}if(JA=!0,d)for(const Bt in d){const Xt=d[Bt],ge=Mr(Xt)?Xt.bind(n,n):Mr(Xt.get)?Xt.get.bind(n,n):Il,en=!Mr(Xt)&&Mr(Xt.set)?Xt.set.bind(n):Il,te=_n({get:ge,set:en});Object.defineProperty(a,Bt,{enumerable:!0,configurable:!0,get:()=>te.value,set:Gt=>te.value=Gt})}if(o)for(const Bt in o)ZS(o[Bt],a,n,Bt);if(g){const Bt=Mr(g)?g.call(n):g;Reflect.ownKeys(Bt).forEach(Xt=>{xf(Xt,Bt[Xt])})}C&&kC(C,t,"c");function Rt(Bt,Xt){ar(Xt)?Xt.forEach(ge=>Bt(ge.bind(n))):Xt&&Bt(Xt.bind(n))}if(Rt(FS,I),Rt(go,E),Rt(BS,S),Rt(J1,k),Rt(fE,R),Rt(pE,B),Rt(US,K),Rt(VS,nt),Rt(jS,X),Rt(Kp,F),Rt(yd,G),Rt(NS,Z),ar(at))if(at.length){const Bt=t.exposed||(t.exposed={});at.forEach(Xt=>{Object.defineProperty(Bt,Xt,{get:()=>n[Xt],set:ge=>n[Xt]=ge})})}else t.exposed||(t.exposed={});Q&&t.render===Il&&(t.render=Q),pt!=null&&(t.inheritAttrs=pt),rt&&(t.components=rt),xt&&(t.directives=xt)}function Nk(t,e,n=Il){ar(t)&&(t=tw(t));for(const a in t){const s=t[a];let d;ji(s)?"default"in s?d=Va(s.from||a,s.default,!0):d=Va(s.from||a):d=Va(s),mo(d)?Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>d.value,set:l=>d.value=l}):e[a]=d}}function kC(t,e,n){mc(ar(t)?t.map(a=>a.bind(e.proxy)):t.bind(e.proxy),e,n)}function ZS(t,e,n,a){const s=a.includes(".")?dE(n,a):()=>n[a];if(po(t)){const d=e[t];Mr(d)&&jo(s,d)}else if(Mr(t))jo(s,t.bind(n));else if(ji(t))if(ar(t))t.forEach(d=>ZS(d,e,n,a));else{const d=Mr(t.handler)?t.handler.bind(n):e[t.handler];Mr(d)&&jo(s,d,t)}}function s2(t){const e=t.type,{mixins:n,extends:a}=e,{mixins:s,optionsCache:d,config:{optionMergeStrategies:l}}=t.appContext,o=d.get(e);let g;return o?g=o:!s.length&&!n&&!a?g=e:(g={},s.length&&s.forEach(_=>p1(g,_,l,!0)),p1(g,e,l)),ji(e)&&d.set(e,g),g}function p1(t,e,n,a=!1){const{mixins:s,extends:d}=e;d&&p1(t,d,n,!0),s&&s.forEach(l=>p1(t,l,n,!0));for(const l in e)if(!(a&&l==="expose")){const o=jk[l]||n&&n[l];t[l]=o?o(t[l],e[l]):e[l]}return t}const jk={data:LC,props:RC,emits:RC,methods:q0,computed:q0,beforeCreate:Ys,created:Ys,beforeMount:Ys,mounted:Ys,beforeUpdate:Ys,updated:Ys,beforeDestroy:Ys,beforeUnmount:Ys,destroyed:Ys,unmounted:Ys,activated:Ys,deactivated:Ys,errorCaptured:Ys,serverPrefetch:Ys,components:q0,directives:q0,watch:Uk,provide:LC,inject:Vk};function LC(t,e){return e?t?function(){return Ji(Mr(t)?t.call(this,this):t,Mr(e)?e.call(this,this):e)}:e:t}function Vk(t,e){return q0(tw(t),tw(e))}function tw(t){if(ar(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ys(t,e){return t?[...new Set([].concat(t,e))]:e}function q0(t,e){return t?Ji(Object.create(null),t,e):e}function RC(t,e){return t?ar(t)&&ar(e)?[...new Set([...t,...e])]:Ji(Object.create(null),Sy(t),Sy(e??{})):e}function Uk(t,e){if(!t)return e;if(!e)return t;const n=Ji(Object.create(null),t);for(const a in e)n[a]=Ys(t[a],e[a]);return n}function WS(){return{app:null,config:{isNativeTag:i5,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Hk=0;function $k(t,e){return function(a,s=null){Mr(a)||(a=Ji({},a)),s!=null&&!ji(s)&&(s=null);const d=WS(),l=new WeakSet;let o=!1;const g=d.app={_uid:Hk++,_component:a,_props:s,_container:null,_context:d,_instance:null,version:TE,get config(){return d.config},set config(_){},use(_,...C){return l.has(_)||(_&&Mr(_.install)?(l.add(_),_.install(g,...C)):Mr(_)&&(l.add(_),_(g,...C))),g},mixin(_){return d.mixins.includes(_)||d.mixins.push(_),g},component(_,C){return C?(d.components[_]=C,g):d.components[_]},directive(_,C){return C?(d.directives[_]=C,g):d.directives[_]},mount(_,C,I){if(!o){const E=ee(a,s);return E.appContext=d,I===!0?I="svg":I===!1&&(I=void 0),C&&e?e(E,_):t(E,_,I),o=!0,g._container=_,_.__vue_app__=g,Gy(E.component)}},unmount(){o&&(t(null,g._container),delete g._container.__vue_app__)},provide(_,C){return d.provides[_]=C,g},runWithContext(_){const C=cg;cg=g;try{return _()}finally{cg=C}}};return g}}let cg=null;function xf(t,e){if(wa){let n=wa.provides;const a=wa.parent&&wa.parent.provides;a===n&&(n=wa.provides=Object.create(a)),n[t]=e}}function Va(t,e,n=!1){const a=wa||Ca;if(a||cg){const s=a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:cg._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Mr(e)?e.call(a&&a.proxy):e}}function Gk(){return!!(wa||Ca||cg)}const qS={},KS=()=>Object.create(qS),YS=t=>Object.getPrototypeOf(t)===qS;function Zk(t,e,n,a=!1){const s={},d=KS();t.propsDefaults=Object.create(null),XS(t,e,s,d);for(const l in t.propsOptions[0])l in s||(s[l]=void 0);n?t.props=a?s:Xw(s):t.type.props?t.props=s:t.props=d,t.attrs=d}function Wk(t,e,n,a){const{props:s,attrs:d,vnode:{patchFlag:l}}=t,o=hi(s),[g]=t.propsOptions;let _=!1;if((a||l>0)&&!(l&16)){if(l&8){const C=t.vnode.dynamicProps;for(let I=0;I<C.length;I++){let E=C[I];if(Y1(t.emitsOptions,E))continue;const S=e[E];if(g)if(di(d,E))S!==d[E]&&(d[E]=S,_=!0);else{const k=el(E);s[k]=ew(g,o,k,S,t,!1)}else S!==d[E]&&(d[E]=S,_=!0)}}}else{XS(t,e,s,d)&&(_=!0);let C;for(const I in o)(!e||!di(e,I)&&((C=pc(I))===I||!di(e,C)))&&(g?n&&(n[I]!==void 0||n[C]!==void 0)&&(s[I]=ew(g,o,I,void 0,t,!0)):delete s[I]);if(d!==o)for(const I in d)(!e||!di(e,I))&&(delete d[I],_=!0)}_&&cd(t.attrs,"set","")}function XS(t,e,n,a){const[s,d]=t.propsOptions;let l=!1,o;if(e)for(let g in e){if(rg(g))continue;const _=e[g];let C;s&&di(s,C=el(g))?!d||!d.includes(C)?n[C]=_:(o||(o={}))[C]=_:Y1(t.emitsOptions,g)||(!(g in a)||_!==a[g])&&(a[g]=_,l=!0)}if(d){const g=hi(n),_=o||zi;for(let C=0;C<d.length;C++){const I=d[C];n[I]=ew(s,g,I,_[I],t,!di(_,I))}}return l}function ew(t,e,n,a,s,d){const l=t[n];if(l!=null){const o=di(l,"default");if(o&&a===void 0){const g=l.default;if(l.type!==Function&&!l.skipFactory&&Mr(g)){const{propsDefaults:_}=s;if(n in _)a=_[n];else{const C=Up(s);a=_[n]=g.call(null,e),C()}}else a=g}l[0]&&(d&&!o?a=!1:l[1]&&(a===""||a===pc(n))&&(a=!0))}return a}function QS(t,e,n=!1){const a=e.propsCache,s=a.get(t);if(s)return s;const d=t.props,l={},o=[];let g=!1;if(!Mr(t)){const C=I=>{g=!0;const[E,S]=QS(I,e,!0);Ji(l,E),S&&o.push(...S)};!n&&e.mixins.length&&e.mixins.forEach(C),t.extends&&C(t.extends),t.mixins&&t.mixins.forEach(C)}if(!d&&!g)return ji(t)&&a.set(t,eg),eg;if(ar(d))for(let C=0;C<d.length;C++){const I=el(d[C]);DC(I)&&(l[I]=zi)}else if(d)for(const C in d){const I=el(C);if(DC(I)){const E=d[C],S=l[I]=ar(E)||Mr(E)?{type:E}:Ji({},E);if(S){const k=FC(Boolean,S.type),R=FC(String,S.type);S[0]=k>-1,S[1]=R<0||k<R,(k>-1||di(S,"default"))&&o.push(I)}}}const _=[l,o];return ji(t)&&a.set(t,_),_}function DC(t){return t[0]!=="$"&&!rg(t)}function OC(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function zC(t,e){return OC(t)===OC(e)}function FC(t,e){return ar(e)?e.findIndex(n=>zC(n,t)):Mr(e)&&zC(e,t)?0:-1}const JS=t=>t[0]==="_"||t==="$stable",l2=t=>ar(t)?t.map(fc):[fc(t)],qk=(t,e,n)=>{if(e._n)return e;const a=Ie((...s)=>l2(e(...s)),n);return a._c=!1,a},tE=(t,e,n)=>{const a=t._ctx;for(const s in t){if(JS(s))continue;const d=t[s];if(Mr(d))e[s]=qk(s,d,a);else if(d!=null){const l=l2(d);e[s]=()=>l}}},eE=(t,e)=>{const n=l2(e);t.slots.default=()=>n},Kk=(t,e)=>{const n=t.slots=KS();if(t.vnode.shapeFlag&32){const a=e._;a?(Ji(n,e),aS(n,"_",a,!0)):tE(e,n)}else e&&eE(t,e)},Yk=(t,e,n)=>{const{vnode:a,slots:s}=t;let d=!0,l=zi;if(a.shapeFlag&32){const o=e._;o?n&&o===1?d=!1:(Ji(s,e),!n&&o===1&&delete s._):(d=!e.$stable,tE(e,s)),l=e}else e&&(eE(t,e),l={default:1});if(d)for(const o in s)!JS(o)&&l[o]==null&&delete s[o]};function m1(t,e,n,a,s=!1){if(ar(t)){t.forEach((E,S)=>m1(E,e&&(ar(e)?e[S]:e),n,a,s));return}if(Fp(a)&&!s)return;const d=a.shapeFlag&4?Gy(a.component):a.el,l=s?null:d,{i:o,r:g}=t,_=e&&e.r,C=o.refs===zi?o.refs={}:o.refs,I=o.setupState;if(_!=null&&_!==g&&(po(_)?(C[_]=null,di(I,_)&&(I[_]=null)):mo(_)&&(_.value=null)),Mr(g))ud(g,o,12,[l,C]);else{const E=po(g),S=mo(g);if(E||S){const k=()=>{if(t.f){const R=E?di(I,g)?I[g]:C[g]:g.value;s?ar(R)&&Hw(R,d):ar(R)?R.includes(d)||R.push(d):E?(C[g]=[d],di(I,g)&&(I[g]=C[g])):(g.value=[d],t.k&&(C[t.k]=g.value))}else E?(C[g]=l,di(I,g)&&(I[g]=l)):S&&(g.value=l,t.k&&(C[t.k]=l))};l?(k.id=-1,Ba(k,n)):k()}}}let BC=!1;const Dm=()=>{BC||(console.error("Hydration completed but contains mismatches."),BC=!0)},Xk=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",Qk=t=>t.namespaceURI.includes("MathML"),E_=t=>{if(Xk(t))return"svg";if(Qk(t))return"mathml"},T_=t=>t.nodeType===8;function Jk(t){const{mt:e,p:n,o:{patchProp:a,createText:s,nextSibling:d,parentNode:l,remove:o,insert:g,createComment:_}}=t,C=(j,G)=>{if(!G.hasChildNodes()){n(null,j,G),f1(),G._vnode=j;return}I(G.firstChild,j,null,null,null),f1(),G._vnode=j},I=(j,G,Q,nt,X,K=!1)=>{K=K||!!G.dynamicChildren;const Z=T_(j)&&j.data==="[",at=()=>R(j,G,Q,nt,X,Z),{type:pt,ref:rt,shapeFlag:xt,patchFlag:q}=G;let zt=j.nodeType;G.el=j,q===-2&&(K=!1,G.dynamicChildren=null);let Rt=null;switch(pt){case jp:zt!==3?G.children===""?(g(G.el=s(""),l(j),j),Rt=j):Rt=at():(j.data!==G.children&&(Dm(),j.data=G.children),Rt=d(j));break;case ja:F(j)?(Rt=d(j),V(G.el=j.content.firstChild,j,Q)):zt!==8||Z?Rt=at():Rt=d(j);break;case Bp:if(Z&&(j=d(j),zt=j.nodeType),zt===1||zt===3){Rt=j;const Bt=!G.children.length;for(let Xt=0;Xt<G.staticCount;Xt++)Bt&&(G.children+=Rt.nodeType===1?Rt.outerHTML:Rt.data),Xt===G.staticCount-1&&(G.anchor=Rt),Rt=d(Rt);return Z?d(Rt):Rt}else at();break;case mr:Z?Rt=k(j,G,Q,nt,X,K):Rt=at();break;default:if(xt&1)(zt!==1||G.type.toLowerCase()!==j.tagName.toLowerCase())&&!F(j)?Rt=at():Rt=E(j,G,Q,nt,X,K);else if(xt&6){G.slotScopeIds=X;const Bt=l(j);if(Z?Rt=B(j):T_(j)&&j.data==="teleport start"?Rt=B(j,j.data,"teleport end"):Rt=d(j),e(G,Bt,null,Q,nt,E_(Bt),K),Fp(G)){let Xt;Z?(Xt=ee(mr),Xt.anchor=Rt?Rt.previousSibling:Bt.lastChild):Xt=j.nodeType===3?fo(""):ee("div"),Xt.el=j,G.component.subTree=Xt}}else xt&64?zt!==8?Rt=at():Rt=G.type.hydrate(j,G,Q,nt,X,K,t,S):xt&128&&(Rt=G.type.hydrate(j,G,Q,nt,E_(l(j)),X,K,t,I))}return rt!=null&&m1(rt,null,nt,G),Rt},E=(j,G,Q,nt,X,K)=>{K=K||!!G.dynamicChildren;const{type:Z,props:at,patchFlag:pt,shapeFlag:rt,dirs:xt,transition:q}=G,zt=Z==="input"||Z==="option";if(zt||pt!==-1){xt&&yh(G,null,Q,"created");let Rt=!1;if(F(j)){Rt=oE(nt,q)&&Q&&Q.vnode.props&&Q.vnode.props.appear;const Xt=j.content.firstChild;Rt&&q.beforeEnter(Xt),V(Xt,j,Q),G.el=j=Xt}if(rt&16&&!(at&&(at.innerHTML||at.textContent))){let Xt=S(j.firstChild,G,j,Q,nt,X,K);for(;Xt;){Dm();const ge=Xt;Xt=Xt.nextSibling,o(ge)}}else rt&8&&j.textContent!==G.children&&(Dm(),j.textContent=G.children);if(at)if(zt||!K||pt&48)for(const Xt in at)(zt&&(Xt.endsWith("value")||Xt==="indeterminate")||Ny(Xt)&&!rg(Xt)||Xt[0]===".")&&a(j,Xt,null,at[Xt],void 0,void 0,Q);else at.onClick&&a(j,"onClick",null,at.onClick,void 0,void 0,Q);let Bt;(Bt=at&&at.onVnodeBeforeMount)&&Al(Bt,Q,G),xt&&yh(G,null,Q,"beforeMount"),((Bt=at&&at.onVnodeMounted)||xt||Rt)&&zS(()=>{Bt&&Al(Bt,Q,G),Rt&&q.enter(j),xt&&yh(G,null,Q,"mounted")},nt)}return j.nextSibling},S=(j,G,Q,nt,X,K,Z)=>{Z=Z||!!G.dynamicChildren;const at=G.children,pt=at.length;for(let rt=0;rt<pt;rt++){const xt=Z?at[rt]:at[rt]=fc(at[rt]);j?j=I(j,xt,nt,X,K,Z):xt.type===jp&&!xt.children?g(xt.el=s(""),Q):(Dm(),n(null,xt,Q,null,nt,X,E_(Q),K))}return j},k=(j,G,Q,nt,X,K)=>{const{slotScopeIds:Z}=G;Z&&(X=X?X.concat(Z):Z);const at=l(j),pt=S(d(j),G,at,Q,nt,X,K);return pt&&T_(pt)&&pt.data==="]"?d(G.anchor=pt):(Dm(),g(G.anchor=_("]"),at,pt),pt)},R=(j,G,Q,nt,X,K)=>{if(Dm(),G.el=null,K){const pt=B(j);for(;;){const rt=d(j);if(rt&&rt!==pt)o(rt);else break}}const Z=d(j),at=l(j);return o(j),n(null,G,at,Z,Q,nt,E_(at),X),Z},B=(j,G="[",Q="]")=>{let nt=0;for(;j;)if(j=d(j),j&&T_(j)&&(j.data===G&&nt++,j.data===Q)){if(nt===0)return d(j);nt--}return j},V=(j,G,Q)=>{const nt=G.parentNode;nt&&nt.replaceChild(j,G);let X=Q;for(;X;)X.vnode.el===G&&(X.vnode.el=X.subTree.el=j),X=X.parent},F=j=>j.nodeType===1&&j.tagName.toLowerCase()==="template";return[C,I]}const Ba=zS;function nE(t){return iE(t)}function rE(t){return iE(t,Jk)}function iE(t,e){const n=sS();n.__VUE__=!0;const{insert:a,remove:s,patchProp:d,createElement:l,createText:o,createComment:g,setText:_,setElementText:C,parentNode:I,nextSibling:E,setScopeId:S=Il,insertStaticContent:k}=t,R=(Tt,H,Dt,Pt=null,yt=null,vt=null,Ut=void 0,ne=null,ue=!!H.dynamicChildren)=>{if(Tt===H)return;Tt&&!Ou(Tt,H)&&(Pt=be(Tt),Gt(Tt,yt,vt,!0),Tt=null),H.patchFlag===-2&&(ue=!1,H.dynamicChildren=null);const{type:Ht,ref:Me,shapeFlag:je}=H;switch(Ht){case jp:B(Tt,H,Dt,Pt);break;case ja:V(Tt,H,Dt,Pt);break;case Bp:Tt==null&&F(H,Dt,Pt,Ut);break;case mr:rt(Tt,H,Dt,Pt,yt,vt,Ut,ne,ue);break;default:je&1?Q(Tt,H,Dt,Pt,yt,vt,Ut,ne,ue):je&6?xt(Tt,H,Dt,Pt,yt,vt,Ut,ne,ue):(je&64||je&128)&&Ht.process(Tt,H,Dt,Pt,yt,vt,Ut,ne,ue,Be)}Me!=null&&yt&&m1(Me,Tt&&Tt.ref,vt,H||Tt,!H)},B=(Tt,H,Dt,Pt)=>{if(Tt==null)a(H.el=o(H.children),Dt,Pt);else{const yt=H.el=Tt.el;H.children!==Tt.children&&_(yt,H.children)}},V=(Tt,H,Dt,Pt)=>{Tt==null?a(H.el=g(H.children||""),Dt,Pt):H.el=Tt.el},F=(Tt,H,Dt,Pt)=>{[Tt.el,Tt.anchor]=k(Tt.children,H,Dt,Pt,Tt.el,Tt.anchor)},j=({el:Tt,anchor:H},Dt,Pt)=>{let yt;for(;Tt&&Tt!==H;)yt=E(Tt),a(Tt,Dt,Pt),Tt=yt;a(H,Dt,Pt)},G=({el:Tt,anchor:H})=>{let Dt;for(;Tt&&Tt!==H;)Dt=E(Tt),s(Tt),Tt=Dt;s(H)},Q=(Tt,H,Dt,Pt,yt,vt,Ut,ne,ue)=>{H.type==="svg"?Ut="svg":H.type==="math"&&(Ut="mathml"),Tt==null?nt(H,Dt,Pt,yt,vt,Ut,ne,ue):Z(Tt,H,yt,vt,Ut,ne,ue)},nt=(Tt,H,Dt,Pt,yt,vt,Ut,ne)=>{let ue,Ht;const{props:Me,shapeFlag:je,transition:Le,dirs:Ke}=Tt;if(ue=Tt.el=l(Tt.type,vt,Me&&Me.is,Me),je&8?C(ue,Tt.children):je&16&&K(Tt.children,ue,null,Pt,yt,Kx(Tt,vt),Ut,ne),Ke&&yh(Tt,null,Pt,"created"),X(ue,Tt,Tt.scopeId,Ut,Pt),Me){for(const Cn in Me)Cn!=="value"&&!rg(Cn)&&d(ue,Cn,null,Me[Cn],vt,Tt.children,Pt,yt,nn);"value"in Me&&d(ue,"value",null,Me.value,vt),(Ht=Me.onVnodeBeforeMount)&&Al(Ht,Pt,Tt)}Ke&&yh(Tt,null,Pt,"beforeMount");const bn=oE(yt,Le);bn&&Le.beforeEnter(ue),a(ue,H,Dt),((Ht=Me&&Me.onVnodeMounted)||bn||Ke)&&Ba(()=>{Ht&&Al(Ht,Pt,Tt),bn&&Le.enter(ue),Ke&&yh(Tt,null,Pt,"mounted")},yt)},X=(Tt,H,Dt,Pt,yt)=>{if(Dt&&S(Tt,Dt),Pt)for(let vt=0;vt<Pt.length;vt++)S(Tt,Pt[vt]);if(yt){let vt=yt.subTree;if(H===vt){const Ut=yt.vnode;X(Tt,Ut,Ut.scopeId,Ut.slotScopeIds,yt.parent)}}},K=(Tt,H,Dt,Pt,yt,vt,Ut,ne,ue=0)=>{for(let Ht=ue;Ht<Tt.length;Ht++){const Me=Tt[Ht]=ne?df(Tt[Ht]):fc(Tt[Ht]);R(null,Me,H,Dt,Pt,yt,vt,Ut,ne)}},Z=(Tt,H,Dt,Pt,yt,vt,Ut)=>{const ne=H.el=Tt.el;let{patchFlag:ue,dynamicChildren:Ht,dirs:Me}=H;ue|=Tt.patchFlag&16;const je=Tt.props||zi,Le=H.props||zi;let Ke;if(Dt&&Ip(Dt,!1),(Ke=Le.onVnodeBeforeUpdate)&&Al(Ke,Dt,H,Tt),Me&&yh(H,Tt,Dt,"beforeUpdate"),Dt&&Ip(Dt,!0),Ht?at(Tt.dynamicChildren,Ht,ne,Dt,Pt,Kx(H,yt),vt):Ut||Xt(Tt,H,ne,null,Dt,Pt,Kx(H,yt),vt,!1),ue>0){if(ue&16)pt(ne,H,je,Le,Dt,Pt,yt);else if(ue&2&&je.class!==Le.class&&d(ne,"class",null,Le.class,yt),ue&4&&d(ne,"style",je.style,Le.style,yt),ue&8){const bn=H.dynamicProps;for(let Cn=0;Cn<bn.length;Cn++){const de=bn[Cn],ve=je[de],Te=Le[de];(Te!==ve||de==="value")&&d(ne,de,ve,Te,yt,Tt.children,Dt,Pt,nn)}}ue&1&&Tt.children!==H.children&&C(ne,H.children)}else!Ut&&Ht==null&&pt(ne,H,je,Le,Dt,Pt,yt);((Ke=Le.onVnodeUpdated)||Me)&&Ba(()=>{Ke&&Al(Ke,Dt,H,Tt),Me&&yh(H,Tt,Dt,"updated")},Pt)},at=(Tt,H,Dt,Pt,yt,vt,Ut)=>{for(let ne=0;ne<H.length;ne++){const ue=Tt[ne],Ht=H[ne],Me=ue.el&&(ue.type===mr||!Ou(ue,Ht)||ue.shapeFlag&70)?I(ue.el):Dt;R(ue,Ht,Me,null,Pt,yt,vt,Ut,!0)}},pt=(Tt,H,Dt,Pt,yt,vt,Ut)=>{if(Dt!==Pt){if(Dt!==zi)for(const ne in Dt)!rg(ne)&&!(ne in Pt)&&d(Tt,ne,Dt[ne],null,Ut,H.children,yt,vt,nn);for(const ne in Pt){if(rg(ne))continue;const ue=Pt[ne],Ht=Dt[ne];ue!==Ht&&ne!=="value"&&d(Tt,ne,Ht,ue,Ut,H.children,yt,vt,nn)}"value"in Pt&&d(Tt,"value",Dt.value,Pt.value,Ut)}},rt=(Tt,H,Dt,Pt,yt,vt,Ut,ne,ue)=>{const Ht=H.el=Tt?Tt.el:o(""),Me=H.anchor=Tt?Tt.anchor:o("");let{patchFlag:je,dynamicChildren:Le,slotScopeIds:Ke}=H;Ke&&(ne=ne?ne.concat(Ke):Ke),Tt==null?(a(Ht,Dt,Pt),a(Me,Dt,Pt),K(H.children||[],Dt,Me,yt,vt,Ut,ne,ue)):je>0&&je&64&&Le&&Tt.dynamicChildren?(at(Tt.dynamicChildren,Le,Dt,yt,vt,Ut,ne),(H.key!=null||yt&&H===yt.subTree)&&c2(Tt,H,!0)):Xt(Tt,H,Dt,Me,yt,vt,Ut,ne,ue)},xt=(Tt,H,Dt,Pt,yt,vt,Ut,ne,ue)=>{H.slotScopeIds=ne,Tt==null?H.shapeFlag&512?yt.ctx.activate(H,Dt,Pt,Ut,ue):q(H,Dt,Pt,yt,vt,Ut,ue):zt(Tt,H,ue)},q=(Tt,H,Dt,Pt,yt,vt,Ut)=>{const ne=Tt.component=wE(Tt,Pt,yt);if(Hy(Tt)&&(ne.ctx.renderer=Be),IE(ne),ne.asyncDep){if(yt&&yt.registerDep(ne,Rt,Ut),!Tt.el){const ue=ne.subTree=ee(ja);V(null,ue,H,Dt)}}else Rt(ne,Tt,H,Dt,yt,vt,Ut)},zt=(Tt,H,Dt)=>{const Pt=H.component=Tt.component;if(fk(Tt,H,Dt))if(Pt.asyncDep&&!Pt.asyncResolved){Bt(Pt,H,Dt);return}else Pt.next=H,ak(Pt.update),Pt.effect.dirty=!0,Pt.update();else H.el=Tt.el,Pt.vnode=H},Rt=(Tt,H,Dt,Pt,yt,vt,Ut)=>{const ne=()=>{if(Tt.isMounted){let{next:Me,bu:je,u:Le,parent:Ke,vnode:bn}=Tt;{const Ye=aE(Tt);if(Ye){Me&&(Me.el=bn.el,Bt(Tt,Me,Ut)),Ye.asyncDep.then(()=>{Tt.isUnmounted||ne()});return}}let Cn=Me,de;Ip(Tt,!1),Me?(Me.el=bn.el,Bt(Tt,Me,Ut)):Me=bn,je&&ig(je),(de=Me.props&&Me.props.onVnodeBeforeUpdate)&&Al(de,Ke,Me,bn),Ip(Tt,!0);const ve=Z_(Tt),Te=Tt.subTree;Tt.subTree=ve,R(Te,ve,I(Te.el),be(Te),Tt,yt,vt),Me.el=ve.el,Cn===null&&r2(Tt,ve.el),Le&&Ba(Le,yt),(de=Me.props&&Me.props.onVnodeUpdated)&&Ba(()=>Al(de,Ke,Me,bn),yt)}else{let Me;const{el:je,props:Le}=H,{bm:Ke,m:bn,parent:Cn}=Tt,de=Fp(H);if(Ip(Tt,!1),Ke&&ig(Ke),!de&&(Me=Le&&Le.onVnodeBeforeMount)&&Al(Me,Cn,H),Ip(Tt,!0),je&&Ln){const ve=()=>{Tt.subTree=Z_(Tt),Ln(je,Tt.subTree,Tt,yt,null)};de?H.type.__asyncLoader().then(()=>!Tt.isUnmounted&&ve()):ve()}else{const ve=Tt.subTree=Z_(Tt);R(null,ve,Dt,Pt,Tt,yt,vt),H.el=ve.el}if(bn&&Ba(bn,yt),!de&&(Me=Le&&Le.onVnodeMounted)){const ve=H;Ba(()=>Al(Me,Cn,ve),yt)}(H.shapeFlag&256||Cn&&Fp(Cn.vnode)&&Cn.vnode.shapeFlag&256)&&Tt.a&&Ba(Tt.a,yt),Tt.isMounted=!0,H=Dt=Pt=null}},ue=Tt.effect=new pg(ne,Il,()=>K1(Ht),Tt.scope),Ht=Tt.update=()=>{ue.dirty&&ue.run()};Ht.id=Tt.uid,Ip(Tt,!0),Ht()},Bt=(Tt,H,Dt)=>{H.component=Tt;const Pt=Tt.vnode.props;Tt.vnode=H,Tt.next=null,Wk(Tt,H.props,Pt,Dt),Yk(Tt,H.children,Dt),Of(),SC(Tt),zf()},Xt=(Tt,H,Dt,Pt,yt,vt,Ut,ne,ue=!1)=>{const Ht=Tt&&Tt.children,Me=Tt?Tt.shapeFlag:0,je=H.children,{patchFlag:Le,shapeFlag:Ke}=H;if(Le>0){if(Le&128){en(Ht,je,Dt,Pt,yt,vt,Ut,ne,ue);return}else if(Le&256){ge(Ht,je,Dt,Pt,yt,vt,Ut,ne,ue);return}}Ke&8?(Me&16&&nn(Ht,yt,vt),je!==Ht&&C(Dt,je)):Me&16?Ke&16?en(Ht,je,Dt,Pt,yt,vt,Ut,ne,ue):nn(Ht,yt,vt,!0):(Me&8&&C(Dt,""),Ke&16&&K(je,Dt,Pt,yt,vt,Ut,ne,ue))},ge=(Tt,H,Dt,Pt,yt,vt,Ut,ne,ue)=>{Tt=Tt||eg,H=H||eg;const Ht=Tt.length,Me=H.length,je=Math.min(Ht,Me);let Le;for(Le=0;Le<je;Le++){const Ke=H[Le]=ue?df(H[Le]):fc(H[Le]);R(Tt[Le],Ke,Dt,null,yt,vt,Ut,ne,ue)}Ht>Me?nn(Tt,yt,vt,!0,!1,je):K(H,Dt,Pt,yt,vt,Ut,ne,ue,je)},en=(Tt,H,Dt,Pt,yt,vt,Ut,ne,ue)=>{let Ht=0;const Me=H.length;let je=Tt.length-1,Le=Me-1;for(;Ht<=je&&Ht<=Le;){const Ke=Tt[Ht],bn=H[Ht]=ue?df(H[Ht]):fc(H[Ht]);if(Ou(Ke,bn))R(Ke,bn,Dt,null,yt,vt,Ut,ne,ue);else break;Ht++}for(;Ht<=je&&Ht<=Le;){const Ke=Tt[je],bn=H[Le]=ue?df(H[Le]):fc(H[Le]);if(Ou(Ke,bn))R(Ke,bn,Dt,null,yt,vt,Ut,ne,ue);else break;je--,Le--}if(Ht>je){if(Ht<=Le){const Ke=Le+1,bn=Ke<Me?H[Ke].el:Pt;for(;Ht<=Le;)R(null,H[Ht]=ue?df(H[Ht]):fc(H[Ht]),Dt,bn,yt,vt,Ut,ne,ue),Ht++}}else if(Ht>Le)for(;Ht<=je;)Gt(Tt[Ht],yt,vt,!0),Ht++;else{const Ke=Ht,bn=Ht,Cn=new Map;for(Ht=bn;Ht<=Le;Ht++){const ht=H[Ht]=ue?df(H[Ht]):fc(H[Ht]);ht.key!=null&&Cn.set(ht.key,Ht)}let de,ve=0;const Te=Le-bn+1;let Ye=!1,un=0;const Nn=new Array(Te);for(Ht=0;Ht<Te;Ht++)Nn[Ht]=0;for(Ht=Ke;Ht<=je;Ht++){const ht=Tt[Ht];if(ve>=Te){Gt(ht,yt,vt,!0);continue}let gt;if(ht.key!=null)gt=Cn.get(ht.key);else for(de=bn;de<=Le;de++)if(Nn[de-bn]===0&&Ou(ht,H[de])){gt=de;break}gt===void 0?Gt(ht,yt,vt,!0):(Nn[gt-bn]=Ht+1,gt>=un?un=gt:Ye=!0,R(ht,H[gt],Dt,null,yt,vt,Ut,ne,ue),ve++)}const ae=Ye?tL(Nn):eg;for(de=ae.length-1,Ht=Te-1;Ht>=0;Ht--){const ht=bn+Ht,gt=H[ht],Ct=ht+1<Me?H[ht+1].el:Pt;Nn[Ht]===0?R(null,gt,Dt,Ct,yt,vt,Ut,ne,ue):Ye&&(de<0||Ht!==ae[de]?te(gt,Dt,Ct,2):de--)}}},te=(Tt,H,Dt,Pt,yt=null)=>{const{el:vt,type:Ut,transition:ne,children:ue,shapeFlag:Ht}=Tt;if(Ht&6){te(Tt.component.subTree,H,Dt,Pt);return}if(Ht&128){Tt.suspense.move(H,Dt,Pt);return}if(Ht&64){Ut.move(Tt,H,Dt,Be);return}if(Ut===mr){a(vt,H,Dt);for(let je=0;je<ue.length;je++)te(ue[je],H,Dt,Pt);a(Tt.anchor,H,Dt);return}if(Ut===Bp){j(Tt,H,Dt);return}if(Pt!==2&&Ht&1&&ne)if(Pt===0)ne.beforeEnter(vt),a(vt,H,Dt),Ba(()=>ne.enter(vt),yt);else{const{leave:je,delayLeave:Le,afterLeave:Ke}=ne,bn=()=>a(vt,H,Dt),Cn=()=>{je(vt,()=>{bn(),Ke&&Ke()})};Le?Le(vt,bn,Cn):Cn()}else a(vt,H,Dt)},Gt=(Tt,H,Dt,Pt=!1,yt=!1)=>{const{type:vt,props:Ut,ref:ne,children:ue,dynamicChildren:Ht,shapeFlag:Me,patchFlag:je,dirs:Le,memoIndex:Ke}=Tt;if(ne!=null&&m1(ne,null,Dt,Tt,!0),Ke!=null&&(H.renderCache[Ke]=void 0),Me&256){H.ctx.deactivate(Tt);return}const bn=Me&1&&Le,Cn=!Fp(Tt);let de;if(Cn&&(de=Ut&&Ut.onVnodeBeforeUnmount)&&Al(de,H,Tt),Me&6)Ce(Tt.component,Dt,Pt);else{if(Me&128){Tt.suspense.unmount(Dt,Pt);return}bn&&yh(Tt,null,H,"beforeUnmount"),Me&64?Tt.type.remove(Tt,H,Dt,yt,Be,Pt):Ht&&(vt!==mr||je>0&&je&64)?nn(Ht,H,Dt,!1,!0):(vt===mr&&je&384||!yt&&Me&16)&&nn(ue,H,Dt),Pt&&Re(Tt)}(Cn&&(de=Ut&&Ut.onVnodeUnmounted)||bn)&&Ba(()=>{de&&Al(de,H,Tt),bn&&yh(Tt,null,H,"unmounted")},Dt)},Re=Tt=>{const{type:H,el:Dt,anchor:Pt,transition:yt}=Tt;if(H===mr){Ge(Dt,Pt);return}if(H===Bp){G(Tt);return}const vt=()=>{s(Dt),yt&&!yt.persisted&&yt.afterLeave&&yt.afterLeave()};if(Tt.shapeFlag&1&&yt&&!yt.persisted){const{leave:Ut,delayLeave:ne}=yt,ue=()=>Ut(Dt,vt);ne?ne(Tt.el,vt,ue):ue()}else vt()},Ge=(Tt,H)=>{let Dt;for(;Tt!==H;)Dt=E(Tt),s(Tt),Tt=Dt;s(H)},Ce=(Tt,H,Dt)=>{const{bum:Pt,scope:yt,update:vt,subTree:Ut,um:ne,m:ue,a:Ht}=Tt;g1(ue),g1(Ht),Pt&&ig(Pt),yt.stop(),vt&&(vt.active=!1,Gt(Ut,Tt,H,Dt)),ne&&Ba(ne,H),Ba(()=>{Tt.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&Tt.asyncDep&&!Tt.asyncResolved&&Tt.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},nn=(Tt,H,Dt,Pt=!1,yt=!1,vt=0)=>{for(let Ut=vt;Ut<Tt.length;Ut++)Gt(Tt[Ut],H,Dt,Pt,yt)},be=Tt=>Tt.shapeFlag&6?be(Tt.component.subTree):Tt.shapeFlag&128?Tt.suspense.next():E(Tt.anchor||Tt.el);let Se=!1;const xe=(Tt,H,Dt)=>{Tt==null?H._vnode&&Gt(H._vnode,null,null,!0):R(H._vnode||null,Tt,H,null,null,null,Dt),Se||(Se=!0,SC(),f1(),Se=!1),H._vnode=Tt},Be={p:R,um:Gt,m:te,r:Re,mt:q,mc:K,pc:Xt,pbc:at,n:be,o:t};let tn,Ln;return e&&([tn,Ln]=e(Be)),{render:xe,hydrate:tn,createApp:$k(xe,tn)}}function Kx({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ip({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function oE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function c2(t,e,n=!1){const a=t.children,s=e.children;if(ar(a)&&ar(s))for(let d=0;d<a.length;d++){const l=a[d];let o=s[d];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[d]=df(s[d]),o.el=l.el),!n&&o.patchFlag!==-2&&c2(l,o)),o.type===jp&&(o.el=l.el)}}function tL(t){const e=t.slice(),n=[0];let a,s,d,l,o;const g=t.length;for(a=0;a<g;a++){const _=t[a];if(_!==0){if(s=n[n.length-1],t[s]<_){e[a]=s,n.push(a);continue}for(d=0,l=n.length-1;d<l;)o=d+l>>1,t[n[o]]<_?d=o+1:l=o;_<t[n[d]]&&(d>0&&(e[a]=n[d-1]),n[d]=a)}}for(d=n.length,l=n[d-1];d-- >0;)n[d]=l,l=e[l];return n}function aE(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:aE(e)}function g1(t){if(t)for(let e=0;e<t.length;e++)t[e].active=!1}const sE=Symbol.for("v-scx"),lE=()=>Va(sE);function cE(t,e){return Uy(t,null,e)}function uE(t,e){return Uy(t,null,{flush:"post"})}function hE(t,e){return Uy(t,null,{flush:"sync"})}const P_={};function jo(t,e,n){return Uy(t,e,n)}function Uy(t,e,{immediate:n,deep:a,flush:s,once:d,onTrack:l,onTrigger:o}=zi){if(e&&d){const nt=e;e=(...X)=>{nt(...X),Q()}}const g=wa,_=nt=>a===!0?nt:gf(nt,a===!1?1:void 0);let C,I=!1,E=!1;if(mo(t)?(C=()=>t.value,I=xy(t)):og(t)?(C=()=>_(t),I=!0):ar(t)?(E=!0,I=t.some(nt=>og(nt)||xy(nt)),C=()=>t.map(nt=>{if(mo(nt))return nt.value;if(og(nt))return _(nt);if(Mr(nt))return ud(nt,g,2)})):Mr(t)?e?C=()=>ud(t,g,2):C=()=>(S&&S(),mc(t,g,3,[k])):C=Il,e&&a){const nt=C;C=()=>gf(nt())}let S,k=nt=>{S=j.onStop=()=>{ud(nt,g,4),S=j.onStop=void 0}},R;if($y)if(k=Il,e?n&&mc(e,g,3,[C(),E?[]:void 0,k]):C(),s==="sync"){const nt=lE();R=nt.__watcherHandles||(nt.__watcherHandles=[])}else return Il;let B=E?new Array(t.length).fill(P_):P_;const V=()=>{if(!(!j.active||!j.dirty))if(e){const nt=j.run();(a||I||(E?nt.some((X,K)=>Bu(X,B[K])):Bu(nt,B)))&&(S&&S(),mc(e,g,3,[nt,B===P_?void 0:E&&B[0]===P_?[]:B,k]),B=nt)}else j.run()};V.allowRecurse=!!e;let F;s==="sync"?F=V:s==="post"?F=()=>Ba(V,g&&g.suspense):(V.pre=!0,g&&(V.id=g.uid),F=()=>K1(V));const j=new pg(C,Il,F),G=Ww(),Q=()=>{j.stop(),G&&Hw(G.effects,j)};return e?n?V():B=j.run():s==="post"?Ba(j.run.bind(j),g&&g.suspense):j.run(),R&&R.push(Q),Q}function eL(t,e,n){const a=this.proxy,s=po(t)?t.includes(".")?dE(a,t):()=>a[t]:t.bind(a,a);let d;Mr(e)?d=e:(d=e.handler,n=e);const l=Up(this),o=Uy(s,d.bind(a),n);return l(),o}function dE(t,e){const n=e.split(".");return()=>{let a=t;for(let s=0;s<n.length&&a;s++)a=a[n[s]];return a}}function gf(t,e=1/0,n){if(e<=0||!ji(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,mo(t))gf(t.value,e,n);else if(ar(t))for(let a=0;a<t.length;a++)gf(t[a],e,n);else if(Zp(t)||ng(t))t.forEach(a=>{gf(a,e,n)});else if(oS(t)){for(const a in t)gf(t[a],e,n);for(const a of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,a)&&gf(t[a],e,n)}return t}const Hy=t=>t.type.__isKeepAlive,nL={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=xc(),a=n.ctx;if(!a.renderer)return()=>{const F=e.default&&e.default();return F&&F.length===1?F[0]:F};const s=new Map,d=new Set;let l=null;const o=n.suspense,{renderer:{p:g,m:_,um:C,o:{createElement:I}}}=a,E=I("div");a.activate=(F,j,G,Q,nt)=>{const X=F.component;_(F,j,G,0,o),g(X.vnode,F,j,G,X,o,Q,F.slotScopeIds,nt),Ba(()=>{X.isDeactivated=!1,X.a&&ig(X.a);const K=F.props&&F.props.onVnodeMounted;K&&Al(K,X.parent,F)},o)},a.deactivate=F=>{const j=F.component;g1(j.m),g1(j.a),_(F,E,null,1,o),Ba(()=>{j.da&&ig(j.da);const G=F.props&&F.props.onVnodeUnmounted;G&&Al(G,j.parent,F),j.isDeactivated=!0},o)};function S(F){Yx(F),C(F,n,o,!0)}function k(F){s.forEach((j,G)=>{const Q=cw(j.type);Q&&(!F||!F(Q))&&R(G)})}function R(F){const j=s.get(F);!l||!Ou(j,l)?S(j):l&&Yx(l),s.delete(F),d.delete(F)}jo(()=>[t.include,t.exclude],([F,j])=>{F&&k(G=>K0(F,G)),j&&k(G=>!K0(j,G))},{flush:"post",deep:!0});let B=null;const V=()=>{B!=null&&(KA(n.subTree.type)?Ba(()=>{s.set(B,k_(n.subTree))},n.subTree.suspense):s.set(B,k_(n.subTree)))};return go(V),J1(V),Kp(()=>{s.forEach(F=>{const{subTree:j,suspense:G}=n,Q=k_(j);if(F.type===Q.type&&F.key===Q.key){Yx(Q);const nt=Q.component.da;nt&&Ba(nt,G);return}S(F)})}),()=>{if(B=null,!e.default)return null;const F=e.default(),j=F[0];if(F.length>1)return l=null,F;if(!Mf(j)||!(j.shapeFlag&4)&&!(j.shapeFlag&128))return l=null,j;let G=k_(j);const Q=G.type,nt=cw(Fp(G)?G.type.__asyncResolved||{}:Q),{include:X,exclude:K,max:Z}=t;if(X&&(!nt||!K0(X,nt))||K&&nt&&K0(K,nt))return l=G,j;const at=G.key==null?Q:G.key,pt=s.get(at);return G.el&&(G=Ah(G),j.shapeFlag&128&&(j.ssContent=G)),B=at,pt?(G.el=pt.el,G.component=pt.component,G.transition&&If(G,G.transition),G.shapeFlag|=512,d.delete(at),d.add(at)):(d.add(at),Z&&d.size>parseInt(Z,10)&&R(d.values().next().value)),G.shapeFlag|=256,l=G,KA(j.type)?j:G}}},rL=nL;function K0(t,e){return ar(t)?t.some(n=>K0(n,e)):po(t)?t.split(",").includes(e):a5(t)?t.test(e):!1}function fE(t,e){mE(t,"a",e)}function pE(t,e){mE(t,"da",e)}function mE(t,e,n=wa){const a=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Q1(e,a,n),n){let s=n.parent;for(;s&&s.parent;)Hy(s.parent.vnode)&&iL(a,e,n,s),s=s.parent}}function iL(t,e,n,a){const s=Q1(e,t,a,!0);yd(()=>{Hw(a[e],s)},n)}function Yx(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function k_(t){return t.shapeFlag&128?t.ssContent:t}const hf=Symbol("_leaveCb"),L_=Symbol("_enterCb");function u2(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return go(()=>{t.isMounted=!0}),Kp(()=>{t.isUnmounting=!0}),t}const Hc=[Function,Array],h2={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Hc,onEnter:Hc,onAfterEnter:Hc,onEnterCancelled:Hc,onBeforeLeave:Hc,onLeave:Hc,onAfterLeave:Hc,onLeaveCancelled:Hc,onBeforeAppear:Hc,onAppear:Hc,onAfterAppear:Hc,onAppearCancelled:Hc},gE=t=>{const e=t.subTree;return e.component?gE(e.component):e},oL={name:"BaseTransition",props:h2,setup(t,{slots:e}){const n=xc(),a=u2();return()=>{const s=e.default&&tb(e.default(),!0);if(!s||!s.length)return;let d=s[0];if(s.length>1){for(const E of s)if(E.type!==ja){d=E;break}}const l=hi(t),{mode:o}=l;if(a.isLeaving)return Xx(d);const g=NC(d);if(!g)return Xx(d);let _=gg(g,l,a,n,E=>_=E);If(g,_);const C=n.subTree,I=C&&NC(C);if(I&&I.type!==ja&&!Ou(g,I)&&gE(n).type!==ja){const E=gg(I,l,a,n);if(If(I,E),o==="out-in"&&g.type!==ja)return a.isLeaving=!0,E.afterLeave=()=>{a.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Xx(d);o==="in-out"&&g.type!==ja&&(E.delayLeave=(S,k,R)=>{const B=vE(a,I);B[String(I.key)]=I,S[hf]=()=>{k(),S[hf]=void 0,delete _.delayedLeave},_.delayedLeave=R})}return d}}},yE=oL;function vE(t,e){const{leavingVNodes:n}=t;let a=n.get(e.type);return a||(a=Object.create(null),n.set(e.type,a)),a}function gg(t,e,n,a,s){const{appear:d,mode:l,persisted:o=!1,onBeforeEnter:g,onEnter:_,onAfterEnter:C,onEnterCancelled:I,onBeforeLeave:E,onLeave:S,onAfterLeave:k,onLeaveCancelled:R,onBeforeAppear:B,onAppear:V,onAfterAppear:F,onAppearCancelled:j}=e,G=String(t.key),Q=vE(n,t),nt=(Z,at)=>{Z&&mc(Z,a,9,at)},X=(Z,at)=>{const pt=at[1];nt(Z,at),ar(Z)?Z.every(rt=>rt.length<=1)&&pt():Z.length<=1&&pt()},K={mode:l,persisted:o,beforeEnter(Z){let at=g;if(!n.isMounted)if(d)at=B||g;else return;Z[hf]&&Z[hf](!0);const pt=Q[G];pt&&Ou(t,pt)&&pt.el[hf]&&pt.el[hf](),nt(at,[Z])},enter(Z){let at=_,pt=C,rt=I;if(!n.isMounted)if(d)at=V||_,pt=F||C,rt=j||I;else return;let xt=!1;const q=Z[L_]=zt=>{xt||(xt=!0,zt?nt(rt,[Z]):nt(pt,[Z]),K.delayedLeave&&K.delayedLeave(),Z[L_]=void 0)};at?X(at,[Z,q]):q()},leave(Z,at){const pt=String(t.key);if(Z[L_]&&Z[L_](!0),n.isUnmounting)return at();nt(E,[Z]);let rt=!1;const xt=Z[hf]=q=>{rt||(rt=!0,at(),q?nt(R,[Z]):nt(k,[Z]),Z[hf]=void 0,Q[pt]===t&&delete Q[pt])};Q[pt]=t,S?X(S,[Z,xt]):xt()},clone(Z){const at=gg(Z,e,n,a,s);return s&&s(at),at}};return K}function Xx(t){if(Hy(t))return t=Ah(t),t.children=null,t}function NC(t){if(!Hy(t))return t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Mr(n.default))return n.default()}}function If(t,e){t.shapeFlag&6&&t.component?If(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function tb(t,e=!1,n){let a=[],s=0;for(let d=0;d<t.length;d++){let l=t[d];const o=n==null?l.key:String(n)+String(l.key!=null?l.key:d);l.type===mr?(l.patchFlag&128&&s++,a=a.concat(tb(l.children,e,o))):(e||l.type!==ja)&&a.push(o!=null?Ah(l,{key:o}):l)}if(s>1)for(let d=0;d<a.length;d++)a[d].patchFlag=-2;return a}const aL=t=>t.__isTeleport,oy=t=>t&&(t.disabled||t.disabled===""),jC=t=>typeof SVGElement<"u"&&t instanceof SVGElement,VC=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,nw=(t,e)=>{const n=t&&t.to;return po(n)?e?e(n):null:n},sL={name:"Teleport",__isTeleport:!0,process(t,e,n,a,s,d,l,o,g,_){const{mc:C,pc:I,pbc:E,o:{insert:S,querySelector:k,createText:R,createComment:B}}=_,V=oy(e.props);let{shapeFlag:F,children:j,dynamicChildren:G}=e;if(t==null){const Q=e.el=R(""),nt=e.anchor=R("");S(Q,n,a),S(nt,n,a);const X=e.target=nw(e.props,k),K=e.targetAnchor=R("");X&&(S(K,X),l==="svg"||jC(X)?l="svg":(l==="mathml"||VC(X))&&(l="mathml"));const Z=(at,pt)=>{F&16&&C(j,at,pt,s,d,l,o,g)};V?Z(n,nt):X&&Z(X,K)}else{e.el=t.el;const Q=e.anchor=t.anchor,nt=e.target=t.target,X=e.targetAnchor=t.targetAnchor,K=oy(t.props),Z=K?n:nt,at=K?Q:X;if(l==="svg"||jC(nt)?l="svg":(l==="mathml"||VC(nt))&&(l="mathml"),G?(E(t.dynamicChildren,G,Z,s,d,l,o),c2(t,e,!0)):g||I(t,e,Z,at,s,d,l,o,!1),V)K?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):R_(e,n,Q,_,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const pt=e.target=nw(e.props,k);pt&&R_(e,pt,null,_,0)}else K&&R_(e,nt,X,_,1)}_E(e)},remove(t,e,n,a,{um:s,o:{remove:d}},l){const{shapeFlag:o,children:g,anchor:_,targetAnchor:C,target:I,props:E}=t;if(I&&d(C),l&&d(_),o&16){const S=l||!oy(E);for(let k=0;k<g.length;k++){const R=g[k];s(R,e,n,S,!!R.dynamicChildren)}}},move:R_,hydrate:lL};function R_(t,e,n,{o:{insert:a},m:s},d=2){d===0&&a(t.targetAnchor,e,n);const{el:l,anchor:o,shapeFlag:g,children:_,props:C}=t,I=d===2;if(I&&a(l,e,n),(!I||oy(C))&&g&16)for(let E=0;E<_.length;E++)s(_[E],e,n,2);I&&a(o,e,n)}function lL(t,e,n,a,s,d,{o:{nextSibling:l,parentNode:o,querySelector:g}},_){const C=e.target=nw(e.props,g);if(C){const I=C._lpa||C.firstChild;if(e.shapeFlag&16)if(oy(e.props))e.anchor=_(l(t),e,o(t),n,a,s,d),e.targetAnchor=I;else{e.anchor=l(t);let E=I;for(;E;)if(E=l(E),E&&E.nodeType===8&&E.data==="teleport anchor"){e.targetAnchor=E,C._lpa=e.targetAnchor&&l(e.targetAnchor);break}_(I,e,C,n,a,s,d)}_E(e)}return e.anchor&&l(e.anchor)}const rw=sL;function _E(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const mr=Symbol.for("v-fgt"),jp=Symbol.for("v-txt"),ja=Symbol.for("v-cmt"),Bp=Symbol.for("v-stc"),ay=[];let Ml=null;function Mt(t=!1){ay.push(Ml=t?null:[])}function bE(){ay.pop(),Ml=ay[ay.length-1]||null}let Vp=1;function iw(t){Vp+=t}function xE(t){return t.dynamicChildren=Vp>0?Ml||eg:null,bE(),Vp>0&&Ml&&Ml.push(t),t}function pe(t,e,n,a,s,d){return xE(Nt(t,e,n,a,s,d,!0))}function Je(t,e,n,a,s){return xE(ee(t,e,n,a,s,!0))}function Mf(t){return t?t.__v_isVNode===!0:!1}function Ou(t,e){return t.type===e.type&&t.key===e.key}function cL(t){}const AE=({key:t})=>t??null,W_=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?po(t)||mo(t)||Mr(t)?{i:Ca,r:t,k:e,f:!!n}:t:null);function Nt(t,e=null,n=null,a=0,s=null,d=t===mr?0:1,l=!1,o=!1){const g={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&AE(e),ref:e&&W_(e),scopeId:X1,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:a,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ca};return o?(d2(g,n),d&128&&t.normalize(g)):n&&(g.shapeFlag|=po(n)?8:16),Vp>0&&!l&&Ml&&(g.patchFlag>0||d&6)&&g.patchFlag!==32&&Ml.push(g),g}const ee=uL;function uL(t,e=null,n=null,a=0,s=null,d=!1){if((!t||t===OS)&&(t=ja),Mf(t)){const o=Ah(t,e,!0);return n&&d2(o,n),Vp>0&&!d&&Ml&&(o.shapeFlag&6?Ml[Ml.indexOf(t)]=o:Ml.push(o)),o.patchFlag=-2,o}if(yL(t)&&(t=t.__vccOpts),e){e=yo(e);let{class:o,style:g}=e;o&&!po(o)&&(e.class=Li(o)),ji(g)&&(Qw(g)&&!ar(g)&&(g=Ji({},g)),e.style=fi(g))}const l=po(t)?1:KA(t)?128:aL(t)?64:ji(t)?4:Mr(t)?2:0;return Nt(t,e,n,a,s,l,d,!0)}function yo(t){return t?Qw(t)||YS(t)?Ji({},t):t:null}function Ah(t,e,n=!1,a=!1){const{props:s,ref:d,patchFlag:l,children:o,transition:g}=t,_=e?Tr(s||{},e):s,C={__v_isVNode:!0,__v_skip:!0,type:t.type,props:_,key:_&&AE(_),ref:e&&e.ref?n&&d?ar(d)?d.concat(W_(e)):[d,W_(e)]:W_(e):d,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==mr?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:g,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ah(t.ssContent),ssFallback:t.ssFallback&&Ah(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return g&&a&&If(C,g.clone(C)),C}function fo(t=" ",e=0){return ee(jp,null,t,e)}function eb(t,e){const n=ee(Bp,null,t);return n.staticCount=e,n}function wn(t="",e=!1){return e?(Mt(),Je(ja,null,t)):ee(ja,null,t)}function fc(t){return t==null||typeof t=="boolean"?ee(ja):ar(t)?ee(mr,null,t.slice()):typeof t=="object"?df(t):ee(jp,null,String(t))}function df(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ah(t)}function d2(t,e){let n=0;const{shapeFlag:a}=t;if(e==null)e=null;else if(ar(e))n=16;else if(typeof e=="object")if(a&65){const s=e.default;s&&(s._c&&(s._d=!1),d2(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!YS(e)?e._ctx=Ca:s===3&&Ca&&(Ca.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Mr(e)?(e={default:e,_ctx:Ca},n=32):(e=String(e),a&64?(n=16,e=[fo(e)]):n=8);t.children=e,t.shapeFlag|=n}function Tr(...t){const e={};for(let n=0;n<t.length;n++){const a=t[n];for(const s in a)if(s==="class")e.class!==a.class&&(e.class=Li([e.class,a.class]));else if(s==="style")e.style=fi([e.style,a.style]);else if(Ny(s)){const d=e[s],l=a[s];l&&d!==l&&!(ar(d)&&d.includes(l))&&(e[s]=d?[].concat(d,l):l)}else s!==""&&(e[s]=a[s])}return e}function Al(t,e,n,a=null){mc(t,e,7,[n,a])}const hL=WS();let dL=0;function wE(t,e,n){const a=t.type,s=(e?e.appContext:t.appContext)||hL,d={uid:dL++,vnode:t,type:a,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Zw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:QS(a,s),emitsOptions:DS(a,s),emit:null,emitted:null,propsDefaults:zi,inheritAttrs:a.inheritAttrs,ctx:zi,data:zi,props:zi,attrs:zi,slots:zi,refs:zi,setupState:zi,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=e?e.root:d,d.emit=lk.bind(null,d),t.ce&&t.ce(d),d}let wa=null;const xc=()=>wa||Ca;let y1,ow;{const t=sS(),e=(n,a)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(a),d=>{s.length>1?s.forEach(l=>l(d)):s[0](d)}};y1=e("__VUE_INSTANCE_SETTERS__",n=>wa=n),ow=e("__VUE_SSR_SETTERS__",n=>$y=n)}const Up=t=>{const e=wa;return y1(t),t.scope.on(),()=>{t.scope.off(),y1(e)}},aw=()=>{wa&&wa.scope.off(),y1(null)};function CE(t){return t.vnode.shapeFlag&4}let $y=!1;function IE(t,e=!1){e&&ow(e);const{props:n,children:a}=t.vnode,s=CE(t);Zk(t,n,s,e),Kk(t,a);const d=s?fL(t,e):void 0;return e&&ow(!1),d}function fL(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,QA);const{setup:a}=n;if(a){const s=t.setupContext=a.length>1?SE(t):null,d=Up(t);Of();const l=ud(a,t,0,[t.props,s]);if(zf(),d(),$w(l)){if(l.then(aw,aw),e)return l.then(o=>{sw(t,o,e)}).catch(o=>{qp(o,t,0)});t.asyncDep=l}else sw(t,l,e)}else ME(t,e)}function sw(t,e,n){Mr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ji(e)&&(t.setupState=e2(e)),ME(t,n)}let v1,lw;function pL(t){v1=t,lw=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,Mk))}}const mL=()=>!v1;function ME(t,e,n){const a=t.type;if(!t.render){if(!e&&v1&&!a.render){const s=a.template||s2(t).template;if(s){const{isCustomElement:d,compilerOptions:l}=t.appContext.config,{delimiters:o,compilerOptions:g}=a,_=Ji(Ji({isCustomElement:d,delimiters:o},l),g);a.render=v1(s,_)}}t.render=a.render||Il,lw&&lw(t)}{const s=Up(t);Of();try{Bk(t)}finally{zf(),s()}}}const gL={get(t,e){return Sl(t,"get",""),t[e]}};function SE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,gL),slots:t.slots,emit:t.emit,expose:e}}function Gy(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(e2(IS(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in iy)return iy[n](t)},has(e,n){return n in e||n in iy}})):t.proxy}function cw(t,e=!0){return Mr(t)?t.displayName||t.name:t.name||e&&t.__name}function yL(t){return Mr(t)&&"__vccOpts"in t}const _n=(t,e)=>H5(t,e,$y);function la(t,e,n=zi){const a=xc(),s=el(e),d=pc(e),l=ES((g,_)=>{let C;return hE(()=>{const I=t[e];Bu(C,I)&&(C=I,_())}),{get(){return g(),n.get?n.get(C):C},set(I){const E=a.vnode.props;!(E&&(e in E||s in E||d in E)&&(`onUpdate:${e}`in E||`onUpdate:${s}`in E||`onUpdate:${d}`in E))&&Bu(I,C)&&(C=I,_()),a.emit(`update:${e}`,n.set?n.set(I):I)}}}),o=e==="modelValue"?"modelModifiers":`${e}Modifiers`;return l[Symbol.iterator]=()=>{let g=0;return{next(){return g<2?{value:g++?t[o]||{}:l,done:!1}:{done:!0}}}},l}function Sf(t,e,n){const a=arguments.length;return a===2?ji(e)&&!ar(e)?Mf(e)?ee(t,null,[e]):ee(t,e):ee(t,null,e):(a>3?n=Array.prototype.slice.call(arguments,2):a===3&&Mf(n)&&(n=[n]),ee(t,e,n))}function vL(){}function _L(t,e,n,a){const s=n[a];if(s&&EE(s,t))return s;const d=e();return d.memo=t.slice(),d.memoIndex=a,n[a]=d}function EE(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let a=0;a<n.length;a++)if(Bu(n[a],e[a]))return!1;return Vp>0&&Ml&&Ml.push(t),!0}const TE="3.4.29",bL=Il,xL=rk,AL=Hm,wL=RS,CL={createComponentInstance:wE,setupComponent:IE,renderComponentRoot:Z_,setCurrentRenderingInstance:Iy,isVNode:Mf,normalizeVNode:fc,getComponentPublicInstance:Gy},IL=CL,ML=null,SL=null,EL=null;/**
* @vue/runtime-dom v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const TL="http://www.w3.org/2000/svg",PL="http://www.w3.org/1998/Math/MathML",ad=typeof document<"u"?document:null,UC=ad&&ad.createElement("template"),kL={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,a)=>{const s=e==="svg"?ad.createElementNS(TL,t):e==="mathml"?ad.createElementNS(PL,t):n?ad.createElement(t,{is:n}):ad.createElement(t);return t==="select"&&a&&a.multiple!=null&&s.setAttribute("multiple",a.multiple),s},createText:t=>ad.createTextNode(t),createComment:t=>ad.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ad.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,a,s,d){const l=n?n.previousSibling:e.lastChild;if(s&&(s===d||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===d||!(s=s.nextSibling)););else{UC.innerHTML=a==="svg"?`<svg>${t}</svg>`:a==="mathml"?`<math>${t}</math>`:t;const o=UC.content;if(a==="svg"||a==="mathml"){const g=o.firstChild;for(;g.firstChild;)o.appendChild(g.firstChild);o.removeChild(g)}e.insertBefore(o,n)}return[l?l.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},sf="transition",B0="animation",yg=Symbol("_vtc"),nb=(t,{slots:e})=>Sf(yE,kE(t),e);nb.displayName="Transition";const PE={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},LL=nb.props=Ji({},h2,PE),Mp=(t,e=[])=>{ar(t)?t.forEach(n=>n(...e)):t&&t(...e)},HC=t=>t?ar(t)?t.some(e=>e.length>1):t.length>1:!1;function kE(t){const e={};for(const rt in t)rt in PE||(e[rt]=t[rt]);if(t.css===!1)return e;const{name:n="v",type:a,duration:s,enterFromClass:d=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:g=d,appearActiveClass:_=l,appearToClass:C=o,leaveFromClass:I=`${n}-leave-from`,leaveActiveClass:E=`${n}-leave-active`,leaveToClass:S=`${n}-leave-to`}=t,k=RL(s),R=k&&k[0],B=k&&k[1],{onBeforeEnter:V,onEnter:F,onEnterCancelled:j,onLeave:G,onLeaveCancelled:Q,onBeforeAppear:nt=V,onAppear:X=F,onAppearCancelled:K=j}=e,Z=(rt,xt,q)=>{cf(rt,xt?C:o),cf(rt,xt?_:l),q&&q()},at=(rt,xt)=>{rt._isLeaving=!1,cf(rt,I),cf(rt,S),cf(rt,E),xt&&xt()},pt=rt=>(xt,q)=>{const zt=rt?X:F,Rt=()=>Z(xt,rt,q);Mp(zt,[xt,Rt]),$C(()=>{cf(xt,rt?g:d),od(xt,rt?C:o),HC(zt)||GC(xt,a,R,Rt)})};return Ji(e,{onBeforeEnter(rt){Mp(V,[rt]),od(rt,d),od(rt,l)},onBeforeAppear(rt){Mp(nt,[rt]),od(rt,g),od(rt,_)},onEnter:pt(!1),onAppear:pt(!0),onLeave(rt,xt){rt._isLeaving=!0;const q=()=>at(rt,xt);od(rt,I),od(rt,E),RE(),$C(()=>{rt._isLeaving&&(cf(rt,I),od(rt,S),HC(G)||GC(rt,a,B,q))}),Mp(G,[rt,q])},onEnterCancelled(rt){Z(rt,!1),Mp(j,[rt])},onAppearCancelled(rt){Z(rt,!0),Mp(K,[rt])},onLeaveCancelled(rt){at(rt),Mp(Q,[rt])}})}function RL(t){if(t==null)return null;if(ji(t))return[Qx(t.enter),Qx(t.leave)];{const e=Qx(t);return[e,e]}}function Qx(t){return u1(t)}function od(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[yg]||(t[yg]=new Set)).add(e)}function cf(t,e){e.split(/\s+/).forEach(a=>a&&t.classList.remove(a));const n=t[yg];n&&(n.delete(e),n.size||(t[yg]=void 0))}function $C(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let DL=0;function GC(t,e,n,a){const s=t._endId=++DL,d=()=>{s===t._endId&&a()};if(n)return setTimeout(d,n);const{type:l,timeout:o,propCount:g}=LE(t,e);if(!l)return a();const _=l+"end";let C=0;const I=()=>{t.removeEventListener(_,E),d()},E=S=>{S.target===t&&++C>=g&&I()};setTimeout(()=>{C<g&&I()},o+1),t.addEventListener(_,E)}function LE(t,e){const n=window.getComputedStyle(t),a=k=>(n[k]||"").split(", "),s=a(`${sf}Delay`),d=a(`${sf}Duration`),l=ZC(s,d),o=a(`${B0}Delay`),g=a(`${B0}Duration`),_=ZC(o,g);let C=null,I=0,E=0;e===sf?l>0&&(C=sf,I=l,E=d.length):e===B0?_>0&&(C=B0,I=_,E=g.length):(I=Math.max(l,_),C=I>0?l>_?sf:B0:null,E=C?C===sf?d.length:g.length:0);const S=C===sf&&/\b(transform|all)(,|$)/.test(a(`${sf}Property`).toString());return{type:C,timeout:I,propCount:E,hasTransform:S}}function ZC(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,a)=>WC(n)+WC(t[a])))}function WC(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function RE(){return document.body.offsetHeight}function OL(t,e,n){const a=t[yg];a&&(e=(e?[e,...a]:[...a]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const _1=Symbol("_vod"),DE=Symbol("_vsh"),rb={beforeMount(t,{value:e},{transition:n}){t[_1]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):N0(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:a}){!e!=!n&&(a?e?(a.beforeEnter(t),N0(t,!0),a.enter(t)):a.leave(t,()=>{N0(t,!1)}):N0(t,e))},beforeUnmount(t,{value:e}){N0(t,e)}};function N0(t,e){t.style.display=e?t[_1]:"none",t[DE]=!e}function zL(){rb.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const OE=Symbol("");function FL(t){const e=xc();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(d=>hw(d,s))},a=()=>{const s=t(e.proxy);uw(e.subTree,s),n(s)};go(()=>{uE(a);const s=new MutationObserver(a);s.observe(e.subTree.el.parentNode,{childList:!0}),yd(()=>s.disconnect())})}function uw(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{uw(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)hw(t.el,e);else if(t.type===mr)t.children.forEach(n=>uw(n,e));else if(t.type===Bp){let{el:n,anchor:a}=t;for(;n&&(hw(n,e),n!==a);)n=n.nextSibling}}function hw(t,e){if(t.nodeType===1){const n=t.style;let a="";for(const s in e)n.setProperty(`--${s}`,e[s]),a+=`--${s}: ${e[s]};`;n[OE]=a}}const BL=/(^|;)\s*display\s*:/;function NL(t,e,n){const a=t.style,s=po(n);let d=!1;if(n&&!s){if(e)if(po(e))for(const l of e.split(";")){const o=l.slice(0,l.indexOf(":")).trim();n[o]==null&&q_(a,o,"")}else for(const l in e)n[l]==null&&q_(a,l,"");for(const l in n)l==="display"&&(d=!0),q_(a,l,n[l])}else if(s){if(e!==n){const l=a[OE];l&&(n+=";"+l),a.cssText=n,d=BL.test(n)}}else e&&t.removeAttribute("style");_1 in t&&(t[_1]=d?a.display:"",t[DE]&&(a.display="none"))}const qC=/\s*!important$/;function q_(t,e,n){if(ar(n))n.forEach(a=>q_(t,e,a));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const a=jL(t,e);qC.test(n)?t.setProperty(pc(a),n.replace(qC,""),"important"):t[a]=n}}const KC=["Webkit","Moz","ms"],Jx={};function jL(t,e){const n=Jx[e];if(n)return n;let a=el(e);if(a!=="filter"&&a in t)return Jx[e]=a;a=jy(a);for(let s=0;s<KC.length;s++){const d=KC[s]+a;if(d in t)return Jx[e]=d}return e}const YC="http://www.w3.org/1999/xlink";function XC(t,e,n,a,s,d=y5(e)){a&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(YC,e.slice(6,e.length)):t.setAttributeNS(YC,e,n):n==null||d&&!lS(n)?t.removeAttribute(e):t.setAttribute(e,d?"":String(n))}function VL(t,e,n,a,s,d,l){if(e==="innerHTML"||e==="textContent"){a&&l(a,s,d),t[e]=n??"";return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const _=o==="OPTION"?t.getAttribute("value")||"":t.value,C=n==null?"":String(n);(_!==C||!("_value"in t))&&(t.value=C),n==null&&t.removeAttribute(e),t._value=n;return}let g=!1;if(n===""||n==null){const _=typeof t[e];_==="boolean"?n=lS(n):n==null&&_==="string"?(n="",g=!0):_==="number"&&(n=0,g=!0)}try{t[e]=n}catch{}g&&t.removeAttribute(e)}function sd(t,e,n,a){t.addEventListener(e,n,a)}function UL(t,e,n,a){t.removeEventListener(e,n,a)}const QC=Symbol("_vei");function HL(t,e,n,a,s=null){const d=t[QC]||(t[QC]={}),l=d[e];if(a&&l)l.value=a;else{const[o,g]=$L(e);if(a){const _=d[e]=WL(a,s);sd(t,o,_,g)}else l&&(UL(t,o,l,g),d[e]=void 0)}}const JC=/(?:Once|Passive|Capture)$/;function $L(t){let e;if(JC.test(t)){e={};let a;for(;a=t.match(JC);)t=t.slice(0,t.length-a[0].length),e[a[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):pc(t.slice(2)),e]}let tA=0;const GL=Promise.resolve(),ZL=()=>tA||(GL.then(()=>tA=0),tA=Date.now());function WL(t,e){const n=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=n.attached)return;mc(qL(a,n.value),e,5,[a])};return n.value=t,n.attached=ZL(),n}function qL(t,e){if(ar(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(a=>s=>!s._stopped&&a&&a(s))}else return e}const tI=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,KL=(t,e,n,a,s,d,l,o,g)=>{const _=s==="svg";e==="class"?OL(t,a,_):e==="style"?NL(t,n,a):Ny(e)?Uw(e)||HL(t,e,n,a,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):YL(t,e,a,_))?(VL(t,e,a,d,l,o,g),(e==="value"||e==="checked"||e==="selected")&&XC(t,e,a,_,l,e!=="value")):(e==="true-value"?t._trueValue=a:e==="false-value"&&(t._falseValue=a),XC(t,e,a,_))};function YL(t,e,n,a){if(a)return!!(e==="innerHTML"||e==="textContent"||e in t&&tI(e)&&Mr(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return tI(e)&&po(n)?!1:e in t}/*! #__NO_SIDE_EFFECTS__ */function zE(t,e,n){const a=nr(t,e);class s extends ib{constructor(l){super(a,l,n)}}return s.def=a,s}/*! #__NO_SIDE_EFFECTS__ */const XL=(t,e)=>zE(t,e,GE),QL=typeof HTMLElement<"u"?HTMLElement:class{};class ib extends QL{constructor(e,n={},a){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&a?a(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,El(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),dw(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let a=0;a<this.attributes.length;a++)this._setAttr(this.attributes[a].name);this._ob=new MutationObserver(a=>{for(const s of a)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(a,s=!1)=>{const{props:d,styles:l}=a;let o;if(d&&!ar(d))for(const g in d){const _=d[g];(_===Number||_&&_.type===Number)&&(g in this._props&&(this._props[g]=u1(this._props[g])),(o||(o=Object.create(null)))[el(g)]=!0)}this._numberProps=o,s&&this._resolveProps(a),this._applyStyles(l),this._update()},n=this._def.__asyncLoader;n?n().then(a=>e(a,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,a=ar(n)?n:Object.keys(n||{});for(const s of Object.keys(this))s[0]!=="_"&&a.includes(s)&&this._setProp(s,this[s],!0,!1);for(const s of a.map(el))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(d){this._setProp(s,d)}})}_setAttr(e){let n=this.hasAttribute(e)?this.getAttribute(e):void 0;const a=el(e);this._numberProps&&this._numberProps[a]&&(n=u1(n)),this._setProp(a,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,a=!0,s=!0){n!==this._props[e]&&(this._props[e]=n,s&&this._instance&&this._update(),a&&(n===!0?this.setAttribute(pc(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(pc(e),n+""):n||this.removeAttribute(pc(e))))}_update(){dw(this._createVNode(),this.shadowRoot)}_createVNode(){const e=ee(this._def,Ji({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const a=(d,l)=>{this.dispatchEvent(new CustomEvent(d,{detail:l}))};n.emit=(d,...l)=>{a(d,l),pc(d)!==d&&a(pc(d),l)};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof ib){n.parent=s._instance,n.provides=s._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const a=document.createElement("style");a.textContent=n,this.shadowRoot.appendChild(a)})}}function JL(t="$style"){{const e=xc();if(!e)return zi;const n=e.type.__cssModules;if(!n)return zi;const a=n[t];return a||zi}}const FE=new WeakMap,BE=new WeakMap,b1=Symbol("_moveCb"),eI=Symbol("_enterCb"),NE={name:"TransitionGroup",props:Ji({},LL,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=xc(),a=u2();let s,d;return J1(()=>{if(!s.length)return;const l=t.moveClass||`${t.name||"v"}-move`;if(!oR(s[0].el,n.vnode.el,l))return;s.forEach(nR),s.forEach(rR);const o=s.filter(iR);RE(),o.forEach(g=>{const _=g.el,C=_.style;od(_,l),C.transform=C.webkitTransform=C.transitionDuration="";const I=_[b1]=E=>{E&&E.target!==_||(!E||/transform$/.test(E.propertyName))&&(_.removeEventListener("transitionend",I),_[b1]=null,cf(_,l))};_.addEventListener("transitionend",I)})}),()=>{const l=hi(t),o=kE(l);let g=l.tag||mr;if(s=[],d)for(let _=0;_<d.length;_++){const C=d[_];C.el&&C.el instanceof Element&&(s.push(C),If(C,gg(C,o,a,n)),FE.set(C,C.el.getBoundingClientRect()))}d=e.default?tb(e.default()):[];for(let _=0;_<d.length;_++){const C=d[_];C.key!=null&&If(C,gg(C,o,a,n))}return ee(g,null,d)}}},tR=t=>delete t.mode;NE.props;const eR=NE;function nR(t){const e=t.el;e[b1]&&e[b1](),e[eI]&&e[eI]()}function rR(t){BE.set(t,t.el.getBoundingClientRect())}function iR(t){const e=FE.get(t),n=BE.get(t),a=e.left-n.left,s=e.top-n.top;if(a||s){const d=t.el.style;return d.transform=d.webkitTransform=`translate(${a}px,${s}px)`,d.transitionDuration="0s",t}}function oR(t,e,n){const a=t.cloneNode(),s=t[yg];s&&s.forEach(o=>{o.split(/\s+/).forEach(g=>g&&a.classList.remove(g))}),n.split(/\s+/).forEach(o=>o&&a.classList.add(o)),a.style.display="none";const d=e.nodeType===1?e:e.parentNode;d.appendChild(a);const{hasTransform:l}=LE(a);return d.removeChild(a),l}const Ef=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ar(e)?n=>ig(e,n):e};function aR(t){t.target.composing=!0}function nI(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Kc=Symbol("_assign"),wh={created(t,{modifiers:{lazy:e,trim:n,number:a}},s){t[Kc]=Ef(s);const d=a||s.props&&s.props.type==="number";sd(t,e?"change":"input",l=>{if(l.target.composing)return;let o=t.value;n&&(o=o.trim()),d&&(o=c1(o)),t[Kc](o)}),n&&sd(t,"change",()=>{t.value=t.value.trim()}),e||(sd(t,"compositionstart",aR),sd(t,"compositionend",nI),sd(t,"change",nI))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:a,trim:s,number:d}},l){if(t[Kc]=Ef(l),t.composing)return;const o=(d||t.type==="number")&&!/^0\d/.test(t.value)?c1(t.value):t.value,g=e??"";o!==g&&(document.activeElement===t&&t.type!=="range"&&(a&&e===n||s&&t.value.trim()===g)||(t.value=g))}},ob={deep:!0,created(t,e,n){t[Kc]=Ef(n),sd(t,"change",()=>{const a=t._modelValue,s=vg(t),d=t.checked,l=t[Kc];if(ar(a)){const o=G1(a,s),g=o!==-1;if(d&&!g)l(a.concat(s));else if(!d&&g){const _=[...a];_.splice(o,1),l(_)}}else if(Zp(a)){const o=new Set(a);d?o.add(s):o.delete(s),l(o)}else l(jE(t,d))})},mounted:rI,beforeUpdate(t,e,n){t[Kc]=Ef(n),rI(t,e,n)}};function rI(t,{value:e,oldValue:n},a){t._modelValue=e,ar(e)?t.checked=G1(e,a.props.value)>-1:Zp(e)?t.checked=e.has(a.props.value):e!==n&&(t.checked=Cf(e,jE(t,!0)))}const f2={created(t,{value:e},n){t.checked=Cf(e,n.props.value),t[Kc]=Ef(n),sd(t,"change",()=>{t[Kc](vg(t))})},beforeUpdate(t,{value:e,oldValue:n},a){t[Kc]=Ef(a),e!==n&&(t.checked=Cf(e,a.props.value))}},ab={deep:!0,created(t,{value:e,modifiers:{number:n}},a){const s=Zp(e);sd(t,"change",()=>{const d=Array.prototype.filter.call(t.options,l=>l.selected).map(l=>n?c1(vg(l)):vg(l));t[Kc](t.multiple?s?new Set(d):d:d[0]),t._assigning=!0,El(()=>{t._assigning=!1})}),t[Kc]=Ef(a)},mounted(t,{value:e,modifiers:{number:n}}){iI(t,e)},beforeUpdate(t,e,n){t[Kc]=Ef(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||iI(t,e)}};function iI(t,e,n){const a=t.multiple,s=ar(e);if(!(a&&!s&&!Zp(e))){for(let d=0,l=t.options.length;d<l;d++){const o=t.options[d],g=vg(o);if(a)if(s){const _=typeof g;_==="string"||_==="number"?o.selected=e.some(C=>String(C)===String(g)):o.selected=G1(e,g)>-1}else o.selected=e.has(g);else if(Cf(vg(o),e)){t.selectedIndex!==d&&(t.selectedIndex=d);return}}!a&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function vg(t){return"_value"in t?t._value:t.value}function jE(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const p2={created(t,e,n){D_(t,e,n,null,"created")},mounted(t,e,n){D_(t,e,n,null,"mounted")},beforeUpdate(t,e,n,a){D_(t,e,n,a,"beforeUpdate")},updated(t,e,n,a){D_(t,e,n,a,"updated")}};function VE(t,e){switch(t){case"SELECT":return ab;case"TEXTAREA":return wh;default:switch(e){case"checkbox":return ob;case"radio":return f2;default:return wh}}}function D_(t,e,n,a,s){const l=VE(t.tagName,n.props&&n.props.type)[s];l&&l(t,e,n,a)}function sR(){wh.getSSRProps=({value:t})=>({value:t}),f2.getSSRProps=({value:t},e)=>{if(e.props&&Cf(e.props.value,t))return{checked:!0}},ob.getSSRProps=({value:t},e)=>{if(ar(t)){if(e.props&&G1(t,e.props.value)>-1)return{checked:!0}}else if(Zp(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},p2.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=VE(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const lR=["ctrl","shift","alt","meta"],cR={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>lR.some(n=>t[`${n}Key`]&&!e.includes(n))},_i=(t,e)=>{const n=t._withMods||(t._withMods={}),a=e.join(".");return n[a]||(n[a]=(s,...d)=>{for(let l=0;l<e.length;l++){const o=cR[e[l]];if(o&&o(s,e))return}return t(s,...d)})},uR={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},hR=(t,e)=>{const n=t._withKeys||(t._withKeys={}),a=e.join(".");return n[a]||(n[a]=s=>{if(!("key"in s))return;const d=pc(s.key);if(e.some(l=>l===d||uR[l]===d))return t(s)})},UE=Ji({patchProp:KL},kL);let sy,oI=!1;function HE(){return sy||(sy=nE(UE))}function $E(){return sy=oI?sy:rE(UE),oI=!0,sy}const dw=(...t)=>{HE().render(...t)},GE=(...t)=>{$E().hydrate(...t)},ZE=(...t)=>{const e=HE().createApp(...t),{mount:n}=e;return e.mount=a=>{const s=qE(a);if(!s)return;const d=e._component;!Mr(d)&&!d.render&&!d.template&&(d.template=s.innerHTML),s.innerHTML="";const l=n(s,!1,WE(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),l},e},dR=(...t)=>{const e=$E().createApp(...t),{mount:n}=e;return e.mount=a=>{const s=qE(a);if(s)return n(s,!0,WE(s))},e};function WE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function qE(t){return po(t)?document.querySelector(t):t}let aI=!1;const fR=()=>{aI||(aI=!0,sR(),zL())};/**
* vue v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const pR=()=>{},mR=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:yE,BaseTransitionPropsValidators:h2,Comment:ja,DeprecationTypes:EL,EffectScope:Zw,ErrorCodes:nk,ErrorTypeStrings:xL,Fragment:mr,KeepAlive:rL,ReactiveEffect:pg,Static:Bp,Suspense:yk,Teleport:rw,Text:jp,TrackOpTypes:J5,Transition:nb,TransitionGroup:eR,TriggerOpTypes:tk,VueElement:ib,assertNumber:ek,callWithAsyncErrorHandling:mc,callWithErrorHandling:ud,camelize:el,capitalize:jy,cloneVNode:Ah,compatUtils:SL,compile:pR,computed:_n,createApp:ZE,createBlock:Je,createCommentVNode:wn,createElementBlock:pe,createElementVNode:Nt,createHydrationRenderer:rE,createPropsRestProxy:zk,createRenderer:nE,createSSRApp:dR,createSlots:wk,createStaticVNode:eb,createTextVNode:fo,createVNode:ee,customRef:ES,defineAsyncComponent:Ck,defineComponent:nr,defineCustomElement:zE,defineEmits:Ek,defineExpose:Tk,defineModel:Lk,defineOptions:Pk,defineProps:Sk,defineSSRCustomElement:XL,defineSlots:kk,devtools:AL,effect:x5,effectScope:_5,getCurrentInstance:xc,getCurrentScope:Ww,getTransitionRawChildren:tb,guardReactiveProps:yo,h:Sf,handleError:qp,hasInjectionContext:Gk,hydrate:GE,initCustomFormatter:vL,initDirectivesForSSR:fR,inject:Va,isMemoSame:EE,isProxy:Qw,isReactive:og,isReadonly:mg,isRef:mo,isRuntimeOnly:mL,isShallow:xy,isVNode:Mf,markRaw:IS,mergeDefaults:Ok,mergeModels:to,mergeProps:Tr,nextTick:El,normalizeClass:Li,normalizeProps:Eo,normalizeStyle:fi,onActivated:fE,onBeforeMount:FS,onBeforeUnmount:Kp,onBeforeUpdate:BS,onDeactivated:pE,onErrorCaptured:US,onMounted:go,onRenderTracked:VS,onRenderTriggered:jS,onScopeDispose:hS,onServerPrefetch:NS,onUnmounted:yd,onUpdated:J1,openBlock:Mt,popScopeId:bc,provide:xf,proxyRefs:e2,pushScopeId:_c,queuePostFlushCb:d1,reactive:ls,readonly:Vy,ref:mn,registerRuntimeCompiler:pL,render:dw,renderList:ki,renderSlot:Wn,resolveComponent:Js,resolveDirective:mk,resolveDynamicComponent:sa,resolveFilter:ML,resolveTransitionHooks:gg,setBlockTracking:iw,setDevtoolsHook:wL,setTransitionHooks:If,shallowReactive:Xw,shallowReadonly:U5,shallowRef:Wp,ssrContextKey:sE,ssrUtils:IL,stop:A5,toDisplayString:Rn,toHandlerKey:ry,toHandlers:Ik,toRaw:hi,toRef:Q5,toRefs:K5,toValue:Z5,transformVNodeArgs:cL,triggerRef:G5,unref:ut,useAttrs:Dk,useCssModule:JL,useCssVars:FL,useModel:la,useSSRContext:lE,useSlots:$S,useTransitionState:u2,vModelCheckbox:ob,vModelDynamic:p2,vModelRadio:f2,vModelSelect:ab,vModelText:wh,vShow:rb,version:TE,warn:bL,watch:jo,watchEffect:cE,watchPostEffect:uE,watchSyncEffect:hE,withAsyncContext:Fk,withCtx:Ie,withDefaults:Rk,withDirectives:gc,withKeys:hR,withMemo:_L,withModifiers:_i,withScopeId:ck},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.3.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const $m=typeof document<"u";function gR(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Oi=Object.assign;function eA(t,e){const n={};for(const a in e){const s=e[a];n[a]=Nu(s)?s.map(t):t(s)}return n}const ly=()=>{},Nu=Array.isArray,KE=/#/g,yR=/&/g,vR=/\//g,_R=/=/g,bR=/\?/g,YE=/\+/g,xR=/%5B/g,AR=/%5D/g,XE=/%5E/g,wR=/%60/g,QE=/%7B/g,CR=/%7C/g,JE=/%7D/g,IR=/%20/g;function m2(t){return encodeURI(""+t).replace(CR,"|").replace(xR,"[").replace(AR,"]")}function MR(t){return m2(t).replace(QE,"{").replace(JE,"}").replace(XE,"^")}function fw(t){return m2(t).replace(YE,"%2B").replace(IR,"+").replace(KE,"%23").replace(yR,"%26").replace(wR,"`").replace(QE,"{").replace(JE,"}").replace(XE,"^")}function SR(t){return fw(t).replace(_R,"%3D")}function ER(t){return m2(t).replace(KE,"%23").replace(bR,"%3F")}function TR(t){return t==null?"":ER(t).replace(vR,"%2F")}function Ey(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const PR=/\/$/,kR=t=>t.replace(PR,"");function nA(t,e,n="/"){let a,s={},d="",l="";const o=e.indexOf("#");let g=e.indexOf("?");return o<g&&o>=0&&(g=-1),g>-1&&(a=e.slice(0,g),d=e.slice(g+1,o>-1?o:e.length),s=t(d)),o>-1&&(a=a||e.slice(0,o),l=e.slice(o,e.length)),a=OR(a??e,n),{fullPath:a+(d&&"?")+d+l,path:a,query:s,hash:Ey(l)}}function LR(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function sI(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function RR(t,e,n){const a=e.matched.length-1,s=n.matched.length-1;return a>-1&&a===s&&_g(e.matched[a],n.matched[s])&&tT(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function _g(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function tT(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!DR(t[n],e[n]))return!1;return!0}function DR(t,e){return Nu(t)?lI(t,e):Nu(e)?lI(e,t):t===e}function lI(t,e){return Nu(e)?t.length===e.length&&t.every((n,a)=>n===e[a]):t.length===1&&t[0]===e}function OR(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),a=t.split("/"),s=a[a.length-1];(s===".."||s===".")&&a.push("");let d=n.length-1,l,o;for(l=0;l<a.length;l++)if(o=a[l],o!==".")if(o==="..")d>1&&d--;else break;return n.slice(0,d).join("/")+"/"+a.slice(l).join("/")}var Ty;(function(t){t.pop="pop",t.push="push"})(Ty||(Ty={}));var cy;(function(t){t.back="back",t.forward="forward",t.unknown=""})(cy||(cy={}));function zR(t){if(!t)if($m){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),kR(t)}const FR=/^[^#]+#/;function BR(t,e){return t.replace(FR,"#")+e}function NR(t,e){const n=document.documentElement.getBoundingClientRect(),a=t.getBoundingClientRect();return{behavior:e.behavior,left:a.left-n.left-(e.left||0),top:a.top-n.top-(e.top||0)}}const sb=()=>({left:window.scrollX,top:window.scrollY});function jR(t){let e;if("el"in t){const n=t.el,a=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=NR(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function cI(t,e){return(history.state?history.state.position-e:-1)+t}const pw=new Map;function VR(t,e){pw.set(t,e)}function UR(t){const e=pw.get(t);return pw.delete(t),e}let HR=()=>location.protocol+"//"+location.host;function eT(t,e){const{pathname:n,search:a,hash:s}=e,d=t.indexOf("#");if(d>-1){let o=s.includes(t.slice(d))?t.slice(d).length:1,g=s.slice(o);return g[0]!=="/"&&(g="/"+g),sI(g,"")}return sI(n,t)+a+s}function $R(t,e,n,a){let s=[],d=[],l=null;const o=({state:E})=>{const S=eT(t,location),k=n.value,R=e.value;let B=0;if(E){if(n.value=S,e.value=E,l&&l===k){l=null;return}B=R?E.position-R.position:0}else a(S);s.forEach(V=>{V(n.value,k,{delta:B,type:Ty.pop,direction:B?B>0?cy.forward:cy.back:cy.unknown})})};function g(){l=n.value}function _(E){s.push(E);const S=()=>{const k=s.indexOf(E);k>-1&&s.splice(k,1)};return d.push(S),S}function C(){const{history:E}=window;E.state&&E.replaceState(Oi({},E.state,{scroll:sb()}),"")}function I(){for(const E of d)E();d=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",C)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",C,{passive:!0}),{pauseListeners:g,listen:_,destroy:I}}function uI(t,e,n,a=!1,s=!1){return{back:t,current:e,forward:n,replaced:a,position:window.history.length,scroll:s?sb():null}}function GR(t){const{history:e,location:n}=window,a={value:eT(t,n)},s={value:e.state};s.value||d(a.value,{back:null,current:a.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function d(g,_,C){const I=t.indexOf("#"),E=I>-1?(n.host&&document.querySelector("base")?t:t.slice(I))+g:HR()+t+g;try{e[C?"replaceState":"pushState"](_,"",E),s.value=_}catch(S){console.error(S),n[C?"replace":"assign"](E)}}function l(g,_){const C=Oi({},e.state,uI(s.value.back,g,s.value.forward,!0),_,{position:s.value.position});d(g,C,!0),a.value=g}function o(g,_){const C=Oi({},s.value,e.state,{forward:g,scroll:sb()});d(C.current,C,!0);const I=Oi({},uI(a.value,g,null),{position:C.position+1},_);d(g,I,!1),a.value=g}return{location:a,state:s,push:o,replace:l}}function ZR(t){t=zR(t);const e=GR(t),n=$R(t,e.state,e.location,e.replace);function a(d,l=!0){l||n.pauseListeners(),history.go(d)}const s=Oi({location:"",base:t,go:a,createHref:BR.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function WR(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),ZR(t)}function qR(t){return typeof t=="string"||t&&typeof t=="object"}function nT(t){return typeof t=="string"||typeof t=="symbol"}const lf={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},rT=Symbol("");var hI;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(hI||(hI={}));function bg(t,e){return Oi(new Error,{type:t,[rT]:!0},e)}function ed(t,e){return t instanceof Error&&rT in t&&(e==null||!!(t.type&e))}const dI="[^/]+?",KR={sensitive:!1,strict:!1,start:!0,end:!0},YR=/[.+*?^${}()[\]/\\]/g;function XR(t,e){const n=Oi({},KR,e),a=[];let s=n.start?"^":"";const d=[];for(const _ of t){const C=_.length?[]:[90];n.strict&&!_.length&&(s+="/");for(let I=0;I<_.length;I++){const E=_[I];let S=40+(n.sensitive?.25:0);if(E.type===0)I||(s+="/"),s+=E.value.replace(YR,"\\$&"),S+=40;else if(E.type===1){const{value:k,repeatable:R,optional:B,regexp:V}=E;d.push({name:k,repeatable:R,optional:B});const F=V||dI;if(F!==dI){S+=10;try{new RegExp(`(${F})`)}catch(G){throw new Error(`Invalid custom RegExp for param "${k}" (${F}): `+G.message)}}let j=R?`((?:${F})(?:/(?:${F}))*)`:`(${F})`;I||(j=B&&_.length<2?`(?:/${j})`:"/"+j),B&&(j+="?"),s+=j,S+=20,B&&(S+=-8),R&&(S+=-20),F===".*"&&(S+=-50)}C.push(S)}a.push(C)}if(n.strict&&n.end){const _=a.length-1;a[_][a[_].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const l=new RegExp(s,n.sensitive?"":"i");function o(_){const C=_.match(l),I={};if(!C)return null;for(let E=1;E<C.length;E++){const S=C[E]||"",k=d[E-1];I[k.name]=S&&k.repeatable?S.split("/"):S}return I}function g(_){let C="",I=!1;for(const E of t){(!I||!C.endsWith("/"))&&(C+="/"),I=!1;for(const S of E)if(S.type===0)C+=S.value;else if(S.type===1){const{value:k,repeatable:R,optional:B}=S,V=k in _?_[k]:"";if(Nu(V)&&!R)throw new Error(`Provided param "${k}" is an array but it is not repeatable (* or + modifiers)`);const F=Nu(V)?V.join("/"):V;if(!F)if(B)E.length<2&&(C.endsWith("/")?C=C.slice(0,-1):I=!0);else throw new Error(`Missing required param "${k}"`);C+=F}}return C||"/"}return{re:l,score:a,keys:d,parse:o,stringify:g}}function QR(t,e){let n=0;for(;n<t.length&&n<e.length;){const a=e[n]-t[n];if(a)return a;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function iT(t,e){let n=0;const a=t.score,s=e.score;for(;n<a.length&&n<s.length;){const d=QR(a[n],s[n]);if(d)return d;n++}if(Math.abs(s.length-a.length)===1){if(fI(a))return 1;if(fI(s))return-1}return s.length-a.length}function fI(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const JR={type:0,value:""},t4=/[a-zA-Z0-9_]/;function e4(t){if(!t)return[[]];if(t==="/")return[[JR]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(S){throw new Error(`ERR (${n})/"${_}": ${S}`)}let n=0,a=n;const s=[];let d;function l(){d&&s.push(d),d=[]}let o=0,g,_="",C="";function I(){_&&(n===0?d.push({type:0,value:_}):n===1||n===2||n===3?(d.length>1&&(g==="*"||g==="+")&&e(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),d.push({type:1,value:_,regexp:C,repeatable:g==="*"||g==="+",optional:g==="*"||g==="?"})):e("Invalid state to consume buffer"),_="")}function E(){_+=g}for(;o<t.length;){if(g=t[o++],g==="\\"&&n!==2){a=n,n=4;continue}switch(n){case 0:g==="/"?(_&&I(),l()):g===":"?(I(),n=1):E();break;case 4:E(),n=a;break;case 1:g==="("?n=2:t4.test(g)?E():(I(),n=0,g!=="*"&&g!=="?"&&g!=="+"&&o--);break;case 2:g===")"?C[C.length-1]=="\\"?C=C.slice(0,-1)+g:n=3:C+=g;break;case 3:I(),n=0,g!=="*"&&g!=="?"&&g!=="+"&&o--,C="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${_}"`),I(),l(),s}function n4(t,e,n){const a=XR(e4(t.path),n),s=Oi(a,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function r4(t,e){const n=[],a=new Map;e=gI({strict:!1,end:!0,sensitive:!1},e);function s(C){return a.get(C)}function d(C,I,E){const S=!E,k=i4(C);k.aliasOf=E&&E.record;const R=gI(e,C),B=[k];if("alias"in C){const j=typeof C.alias=="string"?[C.alias]:C.alias;for(const G of j)B.push(Oi({},k,{components:E?E.record.components:k.components,path:G,aliasOf:E?E.record:k}))}let V,F;for(const j of B){const{path:G}=j;if(I&&G[0]!=="/"){const Q=I.record.path,nt=Q[Q.length-1]==="/"?"":"/";j.path=I.record.path+(G&&nt+G)}if(V=n4(j,I,R),E?E.alias.push(V):(F=F||V,F!==V&&F.alias.push(V),S&&C.name&&!mI(V)&&l(C.name)),oT(V)&&g(V),k.children){const Q=k.children;for(let nt=0;nt<Q.length;nt++)d(Q[nt],V,E&&E.children[nt])}E=E||V}return F?()=>{l(F)}:ly}function l(C){if(nT(C)){const I=a.get(C);I&&(a.delete(C),n.splice(n.indexOf(I),1),I.children.forEach(l),I.alias.forEach(l))}else{const I=n.indexOf(C);I>-1&&(n.splice(I,1),C.record.name&&a.delete(C.record.name),C.children.forEach(l),C.alias.forEach(l))}}function o(){return n}function g(C){const I=s4(C,n);n.splice(I,0,C),C.record.name&&!mI(C)&&a.set(C.record.name,C)}function _(C,I){let E,S={},k,R;if("name"in C&&C.name){if(E=a.get(C.name),!E)throw bg(1,{location:C});R=E.record.name,S=Oi(pI(I.params,E.keys.filter(F=>!F.optional).concat(E.parent?E.parent.keys.filter(F=>F.optional):[]).map(F=>F.name)),C.params&&pI(C.params,E.keys.map(F=>F.name))),k=E.stringify(S)}else if(C.path!=null)k=C.path,E=n.find(F=>F.re.test(k)),E&&(S=E.parse(k),R=E.record.name);else{if(E=I.name?a.get(I.name):n.find(F=>F.re.test(I.path)),!E)throw bg(1,{location:C,currentLocation:I});R=E.record.name,S=Oi({},I.params,C.params),k=E.stringify(S)}const B=[];let V=E;for(;V;)B.unshift(V.record),V=V.parent;return{name:R,path:k,params:S,matched:B,meta:a4(B)}}return t.forEach(C=>d(C)),{addRoute:d,resolve:_,removeRoute:l,getRoutes:o,getRecordMatcher:s}}function pI(t,e){const n={};for(const a of e)a in t&&(n[a]=t[a]);return n}function i4(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:o4(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function o4(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const a in t.components)e[a]=typeof n=="object"?n[a]:n;return e}function mI(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function a4(t){return t.reduce((e,n)=>Oi(e,n.meta),{})}function gI(t,e){const n={};for(const a in t)n[a]=a in e?e[a]:t[a];return n}function s4(t,e){let n=0,a=e.length;for(;n!==a;){const d=n+a>>1;iT(t,e[d])<0?a=d:n=d+1}const s=l4(t);return s&&(a=e.lastIndexOf(s,a-1)),a}function l4(t){let e=t;for(;e=e.parent;)if(oT(e)&&iT(t,e)===0)return e}function oT({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function c4(t){const e={};if(t===""||t==="?")return e;const a=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<a.length;++s){const d=a[s].replace(YE," "),l=d.indexOf("="),o=Ey(l<0?d:d.slice(0,l)),g=l<0?null:Ey(d.slice(l+1));if(o in e){let _=e[o];Nu(_)||(_=e[o]=[_]),_.push(g)}else e[o]=g}return e}function yI(t){let e="";for(let n in t){const a=t[n];if(n=SR(n),a==null){a!==void 0&&(e+=(e.length?"&":"")+n);continue}(Nu(a)?a.map(d=>d&&fw(d)):[a&&fw(a)]).forEach(d=>{d!==void 0&&(e+=(e.length?"&":"")+n,d!=null&&(e+="="+d))})}return e}function u4(t){const e={};for(const n in t){const a=t[n];a!==void 0&&(e[n]=Nu(a)?a.map(s=>s==null?null:""+s):a==null?a:""+a)}return e}const h4=Symbol(""),vI=Symbol(""),g2=Symbol(""),aT=Symbol(""),mw=Symbol("");function j0(){let t=[];function e(a){return t.push(a),()=>{const s=t.indexOf(a);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ff(t,e,n,a,s,d=l=>l()){const l=a&&(a.enterCallbacks[s]=a.enterCallbacks[s]||[]);return()=>new Promise((o,g)=>{const _=E=>{E===!1?g(bg(4,{from:n,to:e})):E instanceof Error?g(E):qR(E)?g(bg(2,{from:e,to:E})):(l&&a.enterCallbacks[s]===l&&typeof E=="function"&&l.push(E),o())},C=d(()=>t.call(a&&a.instances[s],e,n,_));let I=Promise.resolve(C);t.length<3&&(I=I.then(_)),I.catch(E=>g(E))})}function rA(t,e,n,a,s=d=>d()){const d=[];for(const l of t)for(const o in l.components){let g=l.components[o];if(!(e!=="beforeRouteEnter"&&!l.instances[o]))if(d4(g)){const C=(g.__vccOpts||g)[e];C&&d.push(ff(C,n,a,l,o,s))}else{let _=g();d.push(()=>_.then(C=>{if(!C)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${l.path}"`));const I=gR(C)?C.default:C;l.components[o]=I;const S=(I.__vccOpts||I)[e];return S&&ff(S,n,a,l,o,s)()}))}}return d}function d4(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function _I(t){const e=Va(g2),n=Va(aT),a=_n(()=>{const g=ut(t.to);return e.resolve(g)}),s=_n(()=>{const{matched:g}=a.value,{length:_}=g,C=g[_-1],I=n.matched;if(!C||!I.length)return-1;const E=I.findIndex(_g.bind(null,C));if(E>-1)return E;const S=bI(g[_-2]);return _>1&&bI(C)===S&&I[I.length-1].path!==S?I.findIndex(_g.bind(null,g[_-2])):E}),d=_n(()=>s.value>-1&&g4(n.params,a.value.params)),l=_n(()=>s.value>-1&&s.value===n.matched.length-1&&tT(n.params,a.value.params));function o(g={}){return m4(g)?e[ut(t.replace)?"replace":"push"](ut(t.to)).catch(ly):Promise.resolve()}return{route:a,href:_n(()=>a.value.href),isActive:d,isExactActive:l,navigate:o}}const f4=nr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:_I,setup(t,{slots:e}){const n=ls(_I(t)),{options:a}=Va(g2),s=_n(()=>({[xI(t.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[xI(t.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const d=e.default&&e.default(n);return t.custom?d:Sf("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},d)}}}),p4=f4;function m4(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function g4(t,e){for(const n in e){const a=e[n],s=t[n];if(typeof a=="string"){if(a!==s)return!1}else if(!Nu(s)||s.length!==a.length||a.some((d,l)=>d!==s[l]))return!1}return!0}function bI(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const xI=(t,e,n)=>t??e??n,y4=nr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const a=Va(mw),s=_n(()=>t.route||a.value),d=Va(vI,0),l=_n(()=>{let _=ut(d);const{matched:C}=s.value;let I;for(;(I=C[_])&&!I.components;)_++;return _}),o=_n(()=>s.value.matched[l.value]);xf(vI,_n(()=>l.value+1)),xf(h4,o),xf(mw,s);const g=mn();return jo(()=>[g.value,o.value,t.name],([_,C,I],[E,S,k])=>{C&&(C.instances[I]=_,S&&S!==C&&_&&_===E&&(C.leaveGuards.size||(C.leaveGuards=S.leaveGuards),C.updateGuards.size||(C.updateGuards=S.updateGuards))),_&&C&&(!S||!_g(C,S)||!E)&&(C.enterCallbacks[I]||[]).forEach(R=>R(_))},{flush:"post"}),()=>{const _=s.value,C=t.name,I=o.value,E=I&&I.components[C];if(!E)return AI(n.default,{Component:E,route:_});const S=I.props[C],k=S?S===!0?_.params:typeof S=="function"?S(_):S:null,B=Sf(E,Oi({},k,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(I.instances[C]=null)},ref:g}));return AI(n.default,{Component:B,route:_})||B}}});function AI(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const sT=y4;function v4(t){const e=r4(t.routes,t),n=t.parseQuery||c4,a=t.stringifyQuery||yI,s=t.history,d=j0(),l=j0(),o=j0(),g=Wp(lf);let _=lf;$m&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const C=eA.bind(null,be=>""+be),I=eA.bind(null,TR),E=eA.bind(null,Ey);function S(be,Se){let xe,Be;return nT(be)?(xe=e.getRecordMatcher(be),Be=Se):Be=be,e.addRoute(Be,xe)}function k(be){const Se=e.getRecordMatcher(be);Se&&e.removeRoute(Se)}function R(){return e.getRoutes().map(be=>be.record)}function B(be){return!!e.getRecordMatcher(be)}function V(be,Se){if(Se=Oi({},Se||g.value),typeof be=="string"){const H=nA(n,be,Se.path),Dt=e.resolve({path:H.path},Se),Pt=s.createHref(H.fullPath);return Oi(H,Dt,{params:E(Dt.params),hash:Ey(H.hash),redirectedFrom:void 0,href:Pt})}let xe;if(be.path!=null)xe=Oi({},be,{path:nA(n,be.path,Se.path).path});else{const H=Oi({},be.params);for(const Dt in H)H[Dt]==null&&delete H[Dt];xe=Oi({},be,{params:I(H)}),Se.params=I(Se.params)}const Be=e.resolve(xe,Se),tn=be.hash||"";Be.params=C(E(Be.params));const Ln=LR(a,Oi({},be,{hash:MR(tn),path:Be.path})),Tt=s.createHref(Ln);return Oi({fullPath:Ln,hash:tn,query:a===yI?u4(be.query):be.query||{}},Be,{redirectedFrom:void 0,href:Tt})}function F(be){return typeof be=="string"?nA(n,be,g.value.path):Oi({},be)}function j(be,Se){if(_!==be)return bg(8,{from:Se,to:be})}function G(be){return X(be)}function Q(be){return G(Oi(F(be),{replace:!0}))}function nt(be){const Se=be.matched[be.matched.length-1];if(Se&&Se.redirect){const{redirect:xe}=Se;let Be=typeof xe=="function"?xe(be):xe;return typeof Be=="string"&&(Be=Be.includes("?")||Be.includes("#")?Be=F(Be):{path:Be},Be.params={}),Oi({query:be.query,hash:be.hash,params:Be.path!=null?{}:be.params},Be)}}function X(be,Se){const xe=_=V(be),Be=g.value,tn=be.state,Ln=be.force,Tt=be.replace===!0,H=nt(xe);if(H)return X(Oi(F(H),{state:typeof H=="object"?Oi({},tn,H.state):tn,force:Ln,replace:Tt}),Se||xe);const Dt=xe;Dt.redirectedFrom=Se;let Pt;return!Ln&&RR(a,Be,xe)&&(Pt=bg(16,{to:Dt,from:Be}),te(Be,Be,!0,!1)),(Pt?Promise.resolve(Pt):at(Dt,Be)).catch(yt=>ed(yt)?ed(yt,2)?yt:en(yt):Xt(yt,Dt,Be)).then(yt=>{if(yt){if(ed(yt,2))return X(Oi({replace:Tt},F(yt.to),{state:typeof yt.to=="object"?Oi({},tn,yt.to.state):tn,force:Ln}),Se||Dt)}else yt=rt(Dt,Be,!0,Tt,tn);return pt(Dt,Be,yt),yt})}function K(be,Se){const xe=j(be,Se);return xe?Promise.reject(xe):Promise.resolve()}function Z(be){const Se=Ge.values().next().value;return Se&&typeof Se.runWithContext=="function"?Se.runWithContext(be):be()}function at(be,Se){let xe;const[Be,tn,Ln]=_4(be,Se);xe=rA(Be.reverse(),"beforeRouteLeave",be,Se);for(const H of Be)H.leaveGuards.forEach(Dt=>{xe.push(ff(Dt,be,Se))});const Tt=K.bind(null,be,Se);return xe.push(Tt),nn(xe).then(()=>{xe=[];for(const H of d.list())xe.push(ff(H,be,Se));return xe.push(Tt),nn(xe)}).then(()=>{xe=rA(tn,"beforeRouteUpdate",be,Se);for(const H of tn)H.updateGuards.forEach(Dt=>{xe.push(ff(Dt,be,Se))});return xe.push(Tt),nn(xe)}).then(()=>{xe=[];for(const H of Ln)if(H.beforeEnter)if(Nu(H.beforeEnter))for(const Dt of H.beforeEnter)xe.push(ff(Dt,be,Se));else xe.push(ff(H.beforeEnter,be,Se));return xe.push(Tt),nn(xe)}).then(()=>(be.matched.forEach(H=>H.enterCallbacks={}),xe=rA(Ln,"beforeRouteEnter",be,Se,Z),xe.push(Tt),nn(xe))).then(()=>{xe=[];for(const H of l.list())xe.push(ff(H,be,Se));return xe.push(Tt),nn(xe)}).catch(H=>ed(H,8)?H:Promise.reject(H))}function pt(be,Se,xe){o.list().forEach(Be=>Z(()=>Be(be,Se,xe)))}function rt(be,Se,xe,Be,tn){const Ln=j(be,Se);if(Ln)return Ln;const Tt=Se===lf,H=$m?history.state:{};xe&&(Be||Tt?s.replace(be.fullPath,Oi({scroll:Tt&&H&&H.scroll},tn)):s.push(be.fullPath,tn)),g.value=be,te(be,Se,xe,Tt),en()}let xt;function q(){xt||(xt=s.listen((be,Se,xe)=>{if(!Ce.listening)return;const Be=V(be),tn=nt(Be);if(tn){X(Oi(tn,{replace:!0}),Be).catch(ly);return}_=Be;const Ln=g.value;$m&&VR(cI(Ln.fullPath,xe.delta),sb()),at(Be,Ln).catch(Tt=>ed(Tt,12)?Tt:ed(Tt,2)?(X(Tt.to,Be).then(H=>{ed(H,20)&&!xe.delta&&xe.type===Ty.pop&&s.go(-1,!1)}).catch(ly),Promise.reject()):(xe.delta&&s.go(-xe.delta,!1),Xt(Tt,Be,Ln))).then(Tt=>{Tt=Tt||rt(Be,Ln,!1),Tt&&(xe.delta&&!ed(Tt,8)?s.go(-xe.delta,!1):xe.type===Ty.pop&&ed(Tt,20)&&s.go(-1,!1)),pt(Be,Ln,Tt)}).catch(ly)}))}let zt=j0(),Rt=j0(),Bt;function Xt(be,Se,xe){en(be);const Be=Rt.list();return Be.length?Be.forEach(tn=>tn(be,Se,xe)):console.error(be),Promise.reject(be)}function ge(){return Bt&&g.value!==lf?Promise.resolve():new Promise((be,Se)=>{zt.add([be,Se])})}function en(be){return Bt||(Bt=!be,q(),zt.list().forEach(([Se,xe])=>be?xe(be):Se()),zt.reset()),be}function te(be,Se,xe,Be){const{scrollBehavior:tn}=t;if(!$m||!tn)return Promise.resolve();const Ln=!xe&&UR(cI(be.fullPath,0))||(Be||!xe)&&history.state&&history.state.scroll||null;return El().then(()=>tn(be,Se,Ln)).then(Tt=>Tt&&jR(Tt)).catch(Tt=>Xt(Tt,be,Se))}const Gt=be=>s.go(be);let Re;const Ge=new Set,Ce={currentRoute:g,listening:!0,addRoute:S,removeRoute:k,hasRoute:B,getRoutes:R,resolve:V,options:t,push:G,replace:Q,go:Gt,back:()=>Gt(-1),forward:()=>Gt(1),beforeEach:d.add,beforeResolve:l.add,afterEach:o.add,onError:Rt.add,isReady:ge,install(be){const Se=this;be.component("RouterLink",p4),be.component("RouterView",sT),be.config.globalProperties.$router=Se,Object.defineProperty(be.config.globalProperties,"$route",{enumerable:!0,get:()=>ut(g)}),$m&&!Re&&g.value===lf&&(Re=!0,G(s.location).catch(tn=>{}));const xe={};for(const tn in lf)Object.defineProperty(xe,tn,{get:()=>g.value[tn],enumerable:!0});be.provide(g2,Se),be.provide(aT,Xw(xe)),be.provide(mw,g);const Be=be.unmount;Ge.add(be),be.unmount=function(){Ge.delete(be),Ge.size<1&&(_=lf,xt&&xt(),xt=null,g.value=lf,Re=!1,Bt=!1),Be()}}};function nn(be){return be.reduce((Se,xe)=>Se.then(()=>Z(xe)),Promise.resolve())}return Ce}function _4(t,e){const n=[],a=[],s=[],d=Math.max(e.matched.length,t.matched.length);for(let l=0;l<d;l++){const o=e.matched[l];o&&(t.matched.find(_=>_g(_,o))?a.push(o):n.push(o));const g=t.matched[l];g&&(e.matched.find(_=>_g(_,g))||s.push(g))}return[n,a,s]}function Eg(t){return Ww()?(hS(t),!0):!1}function b4(){const t=new Set,e=s=>{t.delete(s)};return{on:s=>{t.add(s);const d=()=>e(s);return Eg(d),{off:d}},off:e,trigger:(...s)=>Promise.all(Array.from(t).map(d=>d(...s)))}}function y2(t,e){const n=window;return n.$_hungpv_store||(n.$_hungpv_store={}),n.$_hungpv_store[t]?e=n.$_hungpv_store[t]:n.$_hungpv_store[t]=e,e}function x4(t,e){return n=>Object.keys(t).reduce((a,s)=>{const l=typeof t[s]=="object"&&t[s]!=null&&!Array.isArray(t[s])?t[s]:{type:t[s]};return n&&s in n?a[s]={...l,default:n[s]}:a[s]=l,e&&!a[s].source&&(a[s].source=e),a},{})}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function lT(t){return typeof t>"u"||t===null}function A4(t){return typeof t=="object"&&t!==null}function w4(t){return Array.isArray(t)?t:lT(t)?[]:[t]}function C4(t,e){var n,a,s,d;if(e)for(d=Object.keys(e),n=0,a=d.length;n<a;n+=1)s=d[n],t[s]=e[s];return t}function I4(t,e){var n="",a;for(a=0;a<e;a+=1)n+=t;return n}function M4(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var S4=lT,E4=A4,T4=w4,P4=I4,k4=M4,L4=C4,v2={isNothing:S4,isObject:E4,toArray:T4,repeat:P4,isNegativeZero:k4,extend:L4};function cT(t,e){var n="",a=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),a+" "+n):a}function Py(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=cT(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Py.prototype=Object.create(Error.prototype);Py.prototype.constructor=Py;Py.prototype.toString=function(e){return this.name+": "+cT(this,e)};var Lp=Py,R4=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],D4=["scalar","sequence","mapping"];function O4(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(a){e[String(a)]=n})}),e}function z4(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(R4.indexOf(n)===-1)throw new Lp('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=O4(e.styleAliases||null),D4.indexOf(this.kind)===-1)throw new Lp('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Is=z4;function wI(t,e){var n=[];return t[e].forEach(function(a){var s=n.length;n.forEach(function(d,l){d.tag===a.tag&&d.kind===a.kind&&d.multi===a.multi&&(s=l)}),n[s]=a}),n}function F4(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function a(s){s.multi?(t.multi[s.kind].push(s),t.multi.fallback.push(s)):t[s.kind][s.tag]=t.fallback[s.tag]=s}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(a);return t}function gw(t){return this.extend(t)}gw.prototype.extend=function(e){var n=[],a=[];if(e instanceof Is)a.push(e);else if(Array.isArray(e))a=a.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(a=a.concat(e.explicit));else throw new Lp("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(d){if(!(d instanceof Is))throw new Lp("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(d.loadKind&&d.loadKind!=="scalar")throw new Lp("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(d.multi)throw new Lp("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(d){if(!(d instanceof Is))throw new Lp("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(gw.prototype);return s.implicit=(this.implicit||[]).concat(n),s.explicit=(this.explicit||[]).concat(a),s.compiledImplicit=wI(s,"implicit"),s.compiledExplicit=wI(s,"explicit"),s.compiledTypeMap=F4(s.compiledImplicit,s.compiledExplicit),s};var B4=gw,N4=new Is("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),j4=new Is("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),V4=new Is("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),U4=new B4({explicit:[N4,j4,V4]});function H4(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function $4(){return null}function G4(t){return t===null}var Z4=new Is("tag:yaml.org,2002:null",{kind:"scalar",resolve:H4,construct:$4,predicate:G4,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function W4(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function q4(t){return t==="true"||t==="True"||t==="TRUE"}function K4(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Y4=new Is("tag:yaml.org,2002:bool",{kind:"scalar",resolve:W4,construct:q4,predicate:K4,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function X4(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Q4(t){return 48<=t&&t<=55}function J4(t){return 48<=t&&t<=57}function t6(t){if(t===null)return!1;var e=t.length,n=0,a=!1,s;if(!e)return!1;if(s=t[n],(s==="-"||s==="+")&&(s=t[++n]),s==="0"){if(n+1===e)return!0;if(s=t[++n],s==="b"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(s!=="0"&&s!=="1")return!1;a=!0}return a&&s!=="_"}if(s==="x"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(!X4(t.charCodeAt(n)))return!1;a=!0}return a&&s!=="_"}if(s==="o"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(!Q4(t.charCodeAt(n)))return!1;a=!0}return a&&s!=="_"}}if(s==="_")return!1;for(;n<e;n++)if(s=t[n],s!=="_"){if(!J4(t.charCodeAt(n)))return!1;a=!0}return!(!a||s==="_")}function e6(t){var e=t,n=1,a;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),a=e[0],(a==="-"||a==="+")&&(a==="-"&&(n=-1),e=e.slice(1),a=e[0]),e==="0")return 0;if(a==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function n6(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!v2.isNegativeZero(t)}var r6=new Is("tag:yaml.org,2002:int",{kind:"scalar",resolve:t6,construct:e6,predicate:n6,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),i6=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function o6(t){return!(t===null||!i6.test(t)||t[t.length-1]==="_")}function a6(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var s6=/^[-+]?[0-9]+e/;function l6(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(v2.isNegativeZero(t))return"-0.0";return n=t.toString(10),s6.test(n)?n.replace("e",".e"):n}function c6(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||v2.isNegativeZero(t))}var u6=new Is("tag:yaml.org,2002:float",{kind:"scalar",resolve:o6,construct:a6,predicate:c6,represent:l6,defaultStyle:"lowercase"}),h6=U4.extend({implicit:[Z4,Y4,r6,u6]}),d6=h6,uT=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),hT=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function f6(t){return t===null?!1:uT.exec(t)!==null||hT.exec(t)!==null}function p6(t){var e,n,a,s,d,l,o,g=0,_=null,C,I,E;if(e=uT.exec(t),e===null&&(e=hT.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],a=+e[2]-1,s=+e[3],!e[4])return new Date(Date.UTC(n,a,s));if(d=+e[4],l=+e[5],o=+e[6],e[7]){for(g=e[7].slice(0,3);g.length<3;)g+="0";g=+g}return e[9]&&(C=+e[10],I=+(e[11]||0),_=(C*60+I)*6e4,e[9]==="-"&&(_=-_)),E=new Date(Date.UTC(n,a,s,d,l,o,g)),_&&E.setTime(E.getTime()-_),E}function m6(t){return t.toISOString()}var g6=new Is("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:f6,construct:p6,instanceOf:Date,represent:m6});function y6(t){return t==="<<"||t===null}var v6=new Is("tag:yaml.org,2002:merge",{kind:"scalar",resolve:y6}),_2=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function _6(t){if(t===null)return!1;var e,n,a=0,s=t.length,d=_2;for(n=0;n<s;n++)if(e=d.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;a+=6}return a%8===0}function b6(t){var e,n,a=t.replace(/[\r\n=]/g,""),s=a.length,d=_2,l=0,o=[];for(e=0;e<s;e++)e%4===0&&e&&(o.push(l>>16&255),o.push(l>>8&255),o.push(l&255)),l=l<<6|d.indexOf(a.charAt(e));return n=s%4*6,n===0?(o.push(l>>16&255),o.push(l>>8&255),o.push(l&255)):n===18?(o.push(l>>10&255),o.push(l>>2&255)):n===12&&o.push(l>>4&255),new Uint8Array(o)}function x6(t){var e="",n=0,a,s,d=t.length,l=_2;for(a=0;a<d;a++)a%3===0&&a&&(e+=l[n>>18&63],e+=l[n>>12&63],e+=l[n>>6&63],e+=l[n&63]),n=(n<<8)+t[a];return s=d%3,s===0?(e+=l[n>>18&63],e+=l[n>>12&63],e+=l[n>>6&63],e+=l[n&63]):s===2?(e+=l[n>>10&63],e+=l[n>>4&63],e+=l[n<<2&63],e+=l[64]):s===1&&(e+=l[n>>2&63],e+=l[n<<4&63],e+=l[64],e+=l[64]),e}function A6(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var w6=new Is("tag:yaml.org,2002:binary",{kind:"scalar",resolve:_6,construct:b6,predicate:A6,represent:x6}),C6=Object.prototype.hasOwnProperty,I6=Object.prototype.toString;function M6(t){if(t===null)return!0;var e=[],n,a,s,d,l,o=t;for(n=0,a=o.length;n<a;n+=1){if(s=o[n],l=!1,I6.call(s)!=="[object Object]")return!1;for(d in s)if(C6.call(s,d))if(!l)l=!0;else return!1;if(!l)return!1;if(e.indexOf(d)===-1)e.push(d);else return!1}return!0}function S6(t){return t!==null?t:[]}var E6=new Is("tag:yaml.org,2002:omap",{kind:"sequence",resolve:M6,construct:S6}),T6=Object.prototype.toString;function P6(t){if(t===null)return!0;var e,n,a,s,d,l=t;for(d=new Array(l.length),e=0,n=l.length;e<n;e+=1){if(a=l[e],T6.call(a)!=="[object Object]"||(s=Object.keys(a),s.length!==1))return!1;d[e]=[s[0],a[s[0]]]}return!0}function k6(t){if(t===null)return[];var e,n,a,s,d,l=t;for(d=new Array(l.length),e=0,n=l.length;e<n;e+=1)a=l[e],s=Object.keys(a),d[e]=[s[0],a[s[0]]];return d}var L6=new Is("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:P6,construct:k6}),R6=Object.prototype.hasOwnProperty;function D6(t){if(t===null)return!0;var e,n=t;for(e in n)if(R6.call(n,e)&&n[e]!==null)return!1;return!0}function O6(t){return t!==null?t:{}}var z6=new Is("tag:yaml.org,2002:set",{kind:"mapping",resolve:D6,construct:O6});d6.extend({implicit:[g6,v6],explicit:[w6,E6,L6,z6]});function CI(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}var F6=new Array(256),B6=new Array(256);for(var Om=0;Om<256;Om++)F6[Om]=CI(Om)?1:0,B6[Om]=CI(Om);function pd(t){return typeof t=="function"?t():ut(t)}function ky(t){return JSON.parse(JSON.stringify(t))}const Tg=typeof window<"u"&&typeof document<"u",N6=t=>t!=null,j6=Object.prototype.toString,V6=t=>j6.call(t)==="[object Object]",K_=()=>{},U6=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),H6=$6();function $6(){var t,e;return Tg&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const ju=function(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))};function dT(t){return xc()}function G6(t){let e;function n(){return e||(e=t()),e}return n.reset=async()=>{const a=e;e=void 0,a&&await a},n}function Z6(t,e){var d;if(typeof t=="number")return t+e;const n=((d=t.match(/^-?\d+\.?\d*/))==null?void 0:d[0])||"",a=t.slice(n.length),s=Number.parseFloat(n)+e;return Number.isNaN(s)?t:s+a}function W6(t,e){dT()&&yd(t,e)}function Rp(t){const e=pd(t);return(e==null?void 0:e.$el)??e}function q6(t,e,n={}){const{immediate:a=!0}=n,s=mn(!1);let d=null;function l(){d&&(clearTimeout(d),d=null)}function o(){s.value=!1,l()}function g(..._){l(),s.value=!0,d=setTimeout(()=>{s.value=!1,d=null,t(..._)},pd(e))}return a&&(s.value=!0,Tg&&g()),Eg(o),{isPending:Vy(s),start:g,stop:o}}function K6(t,e=!0,n){dT()?go(t,n):e?t():El(t)}const lb=Tg?window:void 0,fT=Tg?window.document:void 0,b2=Tg?window.navigator:void 0;function zu(...t){let e,n,a,s;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,a,s]=t,e=lb):[e,n,a,s]=t,!e)return K_;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const d=[],l=()=>{d.forEach(C=>C()),d.length=0},o=(C,I,E,S)=>(C.addEventListener(I,E,S),()=>C.removeEventListener(I,E,S)),g=jo(()=>[Rp(e),pd(s)],([C,I])=>{if(l(),!C)return;const E=V6(I)?{...I}:I;d.push(...n.flatMap(S=>a.map(k=>o(C,S,k,E))))},{immediate:!0,flush:"post"}),_=()=>{g(),l()};return Eg(_),_}let II=!1;function Y6(t,e,n={}){const{window:a=lb,ignore:s=[],capture:d=!0,detectIframe:l=!1}=n;if(!a)return K_;H6&&!II&&(II=!0,Array.from(a.document.body.children).forEach(E=>E.addEventListener("click",K_)),a.document.documentElement.addEventListener("click",K_));let o=!0;const g=E=>s.some(S=>{if(typeof S=="string")return Array.from(a.document.querySelectorAll(S)).some(k=>k===E.target||E.composedPath().includes(k));{const k=Rp(S);return k&&(E.target===k||E.composedPath().includes(k))}}),C=[zu(a,"click",E=>{const S=Rp(t);if(!(!S||S===E.target||E.composedPath().includes(S))){if(E.detail===0&&(o=!g(E)),!o){o=!0;return}e(E)}},{passive:!0,capture:d}),zu(a,"pointerdown",E=>{const S=Rp(t);o=!g(E)&&!!(S&&!E.composedPath().includes(S))},{passive:!0}),l&&zu(a,"blur",E=>{setTimeout(()=>{var k;const S=Rp(t);((k=a.document.activeElement)==null?void 0:k.tagName)==="IFRAME"&&!(S!=null&&S.contains(a.document.activeElement))&&e(E)},0)})].filter(Boolean);return()=>C.forEach(E=>E())}function X6(){const t=mn(!1),e=xc();return e&&go(()=>{t.value=!0},e),t}function Zy(t){const e=X6();return _n(()=>(e.value,!!t()))}function V0(t,e={}){const{window:n=lb}=e,a=Zy(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let s;const d=mn(!1),l=_=>{d.value=_.matches},o=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",l):s.removeListener(l))},g=cE(()=>{a.value&&(o(),s=n.matchMedia(pd(t)),"addEventListener"in s?s.addEventListener("change",l):s.addListener(l),d.value=s.matches)});return Eg(()=>{g(),o(),s=void 0}),d}function pT(t,e={}){function n(C,I){let E=pd(t[pd(C)]);return I!=null&&(E=Z6(E,I)),typeof E=="number"&&(E=`${E}px`),E}const{window:a=lb,strategy:s="min-width"}=e;function d(C){return a?a.matchMedia(C).matches:!1}const l=C=>V0(()=>`(min-width: ${n(C)})`,e),o=C=>V0(()=>`(max-width: ${n(C)})`,e),g=Object.keys(t).reduce((C,I)=>(Object.defineProperty(C,I,{get:()=>s==="min-width"?l(I):o(I),enumerable:!0,configurable:!0}),C),{});function _(){const C=Object.keys(t).map(I=>[I,l(I)]);return _n(()=>C.filter(([,I])=>I.value).map(([I])=>I))}return Object.assign(g,{greaterOrEqual:l,smallerOrEqual:o,greater(C){return V0(()=>`(min-width: ${n(C,.1)})`,e)},smaller(C){return V0(()=>`(max-width: ${n(C,-.1)})`,e)},between(C,I){return V0(()=>`(min-width: ${n(C)}) and (max-width: ${n(I,-.1)})`,e)},isGreater(C){return d(`(min-width: ${n(C,.1)})`)},isGreaterOrEqual(C){return d(`(min-width: ${n(C)})`)},isSmaller(C){return d(`(max-width: ${n(C,-.1)})`)},isSmallerOrEqual(C){return d(`(max-width: ${n(C)})`)},isInBetween(C,I){return d(`(min-width: ${n(C)}) and (max-width: ${n(I,-.1)})`)},current:_,active(){const C=_();return _n(()=>C.value.length===0?"":C.value[C.value.length-1])}})}function MI(t,e={}){const{controls:n=!1,navigator:a=b2}=e,s=Zy(()=>a&&"permissions"in a);let d;const l=typeof t=="string"?{name:t}:t,o=mn(),g=()=>{d&&(o.value=d.state)},_=G6(async()=>{if(s.value){if(!d)try{d=await a.permissions.query(l),zu(d,"change",g),g()}catch{o.value="prompt"}return d}});return _(),n?{state:o,isSupported:s,query:_}:o}function Q6(t={}){const{navigator:e=b2,read:n=!1,source:a,copiedDuring:s=1500,legacy:d=!0}=t,l=Zy(()=>e&&"clipboard"in e),o=MI("clipboard-read"),g=MI("clipboard-write"),_=_n(()=>l.value||d),C=mn(""),I=mn(!1),E=q6(()=>I.value=!1,s);function S(){l.value&&V(o.value)?e.clipboard.readText().then(F=>{C.value=F}):C.value=B()}_.value&&n&&zu(["copy","cut"],S);async function k(F=pd(a)){_.value&&F!=null&&(l.value&&V(g.value)?await e.clipboard.writeText(F):R(F),C.value=F,I.value=!0,E.start())}function R(F){const j=document.createElement("textarea");j.value=F??"",j.style.position="absolute",j.style.opacity="0",document.body.appendChild(j),j.select(),document.execCommand("copy"),j.remove()}function B(){var F,j;return((j=(F=document==null?void 0:document.getSelection)==null?void 0:F.call(document))==null?void 0:j.toString())??""}function V(F){return F==="granted"||F==="prompt"}return{isSupported:_,text:C,copied:I,copy:k}}function J6(t,e={}){const n=mn(!1),a=Wp(null);let s=0,d=!0;if(Tg){const l=typeof e=="function"?{onDrop:e}:e,o=g=>{var C;const _=Array.from(((C=g.dataTransfer)==null?void 0:C.files)??[]);return a.value=_.length===0?null:_};zu(t,"dragenter",g=>{var C,I;const _=Array.from(((C=g==null?void 0:g.dataTransfer)==null?void 0:C.items)||[]).map(E=>E.kind==="file"?E.type:null).filter(N6);if(l.dataTypes&&g.dataTransfer){const E=ut(l.dataTypes);if(d=typeof E=="function"?E(_):E?E.some(S=>_.includes(S)):!0,!d)return}g.preventDefault(),s+=1,n.value=!0,(I=l.onEnter)==null||I.call(l,o(g),g)}),zu(t,"dragover",g=>{var _;d&&(g.preventDefault(),(_=l.onOver)==null||_.call(l,o(g),g))}),zu(t,"dragleave",g=>{var _;d&&(g.preventDefault(),s-=1,s===0&&(n.value=!1),(_=l.onLeave)==null||_.call(l,o(g),g))}),zu(t,"drop",g=>{var _;g.preventDefault(),s=0,n.value=!1,(_=l.onDrop)==null||_.call(l,o(g),g)})}return{files:a,isOverDropZone:n}}const SI=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function tD(t,e={}){const{document:n=fT,autoExit:a=!1}=e,s=_n(()=>Rp(t)??(n==null?void 0:n.querySelector("html"))),d=mn(!1),l=_n(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(V=>n&&V in n||s.value&&V in s.value)),o=_n(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(V=>n&&V in n||s.value&&V in s.value)),g=_n(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(V=>n&&V in n||s.value&&V in s.value)),_=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(V=>n&&V in n),C=Zy(()=>s.value&&n&&l.value!==void 0&&o.value!==void 0&&g.value!==void 0),I=()=>_?(n==null?void 0:n[_])===s.value:!1,E=()=>{if(g.value){if(n&&n[g.value]!=null)return n[g.value];{const V=s.value;if((V==null?void 0:V[g.value])!=null)return!!V[g.value]}}return!1};async function S(){if(!(!C.value||!d.value)){if(o.value)if((n==null?void 0:n[o.value])!=null)await n[o.value]();else{const V=s.value;(V==null?void 0:V[o.value])!=null&&await V[o.value]()}d.value=!1}}async function k(){if(!C.value||d.value)return;E()&&await S();const V=s.value;l.value&&(V==null?void 0:V[l.value])!=null&&(await V[l.value](),d.value=!0)}async function R(){await(d.value?S():k())}const B=()=>{const V=E();(!V||V&&I())&&(d.value=V)};return zu(n,SI,B,!1),zu(()=>Rp(s),SI,B,!1),a&&Eg(S),{isSupported:C,isFullscreen:d,enter:k,exit:S,toggle:R}}function eD(t={}){const{enableHighAccuracy:e=!0,maximumAge:n=3e4,timeout:a=27e3,navigator:s=b2,immediate:d=!0}=t,l=Zy(()=>s&&"geolocation"in s),o=mn(null),g=Wp(null),_=mn({accuracy:0,latitude:Number.POSITIVE_INFINITY,longitude:Number.POSITIVE_INFINITY,altitude:null,altitudeAccuracy:null,heading:null,speed:null});function C(k){o.value=k.timestamp,_.value=k.coords,g.value=null}let I;function E(){l.value&&(I=s.geolocation.watchPosition(C,k=>g.value=k,{enableHighAccuracy:e,maximumAge:n,timeout:a}))}d&&E();function S(){I&&s&&s.geolocation.clearWatch(I)}return Eg(()=>{S()}),{isSupported:l,coords:_,locatedAt:o,error:g,resume:E,pause:S}}const nD={multiple:!0,accept:"*",reset:!1,directory:!1};function rD(t={}){const{document:e=fT}=t,n=mn(null),{on:a,trigger:s}=b4();let d;e&&(d=e.createElement("input"),d.type="file",d.onchange=g=>{const _=g.target;n.value=_.files,s(n.value)});const l=()=>{n.value=null,d&&d.value&&(d.value="",s(null))},o=g=>{if(!d)return;const _={...nD,...t,...g};d.multiple=_.multiple,d.accept=_.accept,d.webkitdirectory=_.directory,U6(_,"capture")&&(d.capture=_.capture),_.reset&&l(),d.click()};return{files:Vy(n),open:o,reset:l,onChange:a}}const iD=eb('<label class="ddf__label" for="upload-file" data-v-70127256><i class="ddf__label-inner" data-v-70127256><svg class="ddf__icon" viewBox="0 0 64 64" aria-hidden="true" data-v-70127256><path fill="currentColor" d="M51,27c-.374,0-.742.025-1.109.056a18,18,0,0,0-35.782,0C13.742,27.025,13.374,27,13,27a13,13,0,0,0,0,26H51a13,13,0,0,0,0-26Z" data-v-70127256></path><path d="M43.764,41.354l-11-13a1.033,1.033,0,0,0-1.526,0l-11,13A1,1,0,0,0,21,43h7V59h8V43h7a1,1,0,0,0,.764-1.646Z" data-v-70127256></path></svg><span class="ddf__text" data-v-70127256> Drag and drop your files here </span><span class="ddf__subtext" data-v-70127256> or click to browse your files </span></i></label>',1),oD=[iD],aD=nr({__name:"index",props:{multiple:Boolean,accept:String},emits:["change"],setup(t,{emit:e}){const n=t,a=e,{onChange:s,open:d}=rD({multiple:n.multiple,accept:n.accept});s(_=>{_&&l(Array.from(_))});function l(_){_&&a("change",n.multiple?_:_[0])}const o=mn(),{isOverDropZone:g}=J6(o,l);return(_,C)=>(Mt(),pe("div",{class:Li(["ddf__area",{ddf__active:ut(g)}]),ref_key:"dropZoneRef",ref:o,onClick:C[0]||(C[0]=I=>ut(d)())},oD,2))}}),Vn=(t,e)=>{const n=t.__vccOpts||t;for(const[a,s]of e)n[a]=s;return n},sD=Vn(aD,[["__scopeId","data-v-70127256"]]);function mT(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function gT(t){return Array.isArray(t)&&t.every(mT)}function yT(t){return Array.isArray(t)&&t.every(gT)}function lD(t){return Array.isArray(t)&&t.every(yT)}function cD(t){return t&&typeof t=="object"&&"geometry"in t}function vT(t){return Array.isArray(t)?1+Math.max(0,...t.map(vT)):0}function uD(){return{detectGeoType:e=>{if(e!=null&&e.type&&(e!=null&&e.coordinates))return e.type;switch(vT(e)){case 1:return"Point";case 2:return"LineString";case 3:return"Polygon";case 4:return"MultiPolygon";default:throw new Error("Unsupported geometry depth")}}}}function hD(){const t=e=>{if(e.type==="GeometryCollection")return e.geometries.every(t);const n=e.coordinates;switch(e.type){case"Point":return mT(n);case"MultiPoint":case"LineString":return gT(n);case"Polygon":case"MultiLineString":return yT(n);case"MultiPolygon":return lD(n);default:return!1}};return{validateGeometry:t}}function dD(){const{detectGeoType:t}=uD(),{validateGeometry:e}=hD(),n=s=>{if(!cD(s))throw new Error("Invalid input: not an InputFeature");const{geometry:d,...l}=s,o=d!=null&&d.type&&(d!=null&&d.coordinates)?d:{type:t(d),coordinates:d};if(!e(o))throw new Error("Invalid geometry");return{type:"Feature",geometry:o,properties:l}};return{convertFeature:n,convertList:s=>({type:"FeatureCollection",features:s.map(n)})}}const EI=t=>{if(typeof t=="string"){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://"))return"url";if(t.startsWith("data:"))return"base64"}else{if(t instanceof Blob||t instanceof File)return"blob";if(t instanceof ArrayBuffer||t instanceof Uint8Array)return"buffer"}throw new Error("Khng th xc nh loi d liu  ti")},TI=t=>{var a;const e=(a=t.split(".").pop())==null?void 0:a.toLowerCase();return{pdf:"application/pdf",txt:"text/plain",csv:"text/csv",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",html:"text/html"}[e||""]||"application/octet-stream"};function fD(){const t=mn("idle"),e=mn(null),n=()=>{t.value="idle",e.value=null},a=async(d,l,o,g)=>{n();try{t.value="downloading";const _=o||EI(d),C=l||"download",I=g||TI(C);let E;switch(_){case"url":{const S=await fetch(d);if(!S.ok)throw new Error(`Fetch failed: ${S.status} ${S.statusText}`);E=await S.blob();break}case"base64":{const S=d,k=atob(S.split(",")[1]||S),R=new ArrayBuffer(k.length),B=new Uint8Array(R);for(let V=0;V<k.length;V++)B[V]=k.charCodeAt(V);E=new Blob([R],{type:I});break}case"blob":{E=d;break}case"buffer":{if(d instanceof ArrayBuffer)E=new Blob([d],{type:I});else if(d instanceof Uint8Array)E=new Blob([d.buffer],{type:I});else throw new Error("Khng th chuyn buffer thnh Blob");break}default:throw new Error("Loi d liu khng hp l")}s(E,C),t.value="success"}catch(_){t.value="error",e.value=_.message||"Li khng xc nh"}},s=(d,l)=>{const o=document.createElement("a"),g=URL.createObjectURL(d);o.href=g,o.download=l,o.click(),URL.revokeObjectURL(g)};return{status:t,error:e,downloadFile:a,detectType:EI,guessMimeType:TI}}function pD(t={}){const e=new mD;async function n(a,s={}){return e.read(a,Object.assign({},t,s))}return{read:n}}class mD{async read(e,n={}){const a=n.parser||this.getParser(e),s=n.type||"text",d=n.onSuccess,l=n.onError;try{let o=await PI.read(e,s);return a&&(o=await a.parse(o,e)),d&&d(o),o}catch(o){throw l&&l(o),o}}getParser(e){switch(PI.getExtension(e)){case"geojson":case"json":return new gD}}}class PI{static getExtension(e){return e.name.split(".").pop()}static async read(e,n){return new Promise((a,s)=>{const d=new window.FileReader;d.onload=l=>l.target&&a(l.target.result),d.onerror=l=>s(l),n==="text"?d.readAsText(e):n==="arraybuffer"?d.readAsArrayBuffer(e):n==="binary"?d.readAsDataURL(e):s(new Error(`Read file as ${n} is not available`))})}}class gD{parse(e,n){const a=JSON.parse(e);return Promise.resolve(this.toGeojson(a))}toGeojson(e){return e.crs,e}}var ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ff(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Wy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var s=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(n,a,s.get?s:{enumerable:!0,get:function(){return t[a]}})}),n}var cb={},x2={};x2.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31};var _T={},yD={C:254,L:1,D:8,N:18,M:18,F:18,B:8},ub={};ub.lpad=function(e,n,a){for(;e.length<n;)e=a+e;return e};ub.rpad=function(e,n,a){for(;e.length<n;)e=e+a;return e};ub.writeField=function(e,n,a,s){for(var d=0;d<n;d++)e.setUint8(s,a.charCodeAt(d)),s++;return s};var hb={},vD=yD,_D={string:"C",number:"N",boolean:"L",null:"C"};hb.multi=bD;hb.bytesPer=AD;hb.obj=bT;function bD(t){var e={};t.forEach(n);function n(a){xD(e,a)}return bT(e)}function xD(t,e){for(var n in e){var a=typeof e[n]<"u"&&e[n]!==null;(typeof t[n]>"u"||a)&&(t[n]=e[n])}return t}function bT(t){var e={},n=[];for(var a in t)e[a]=t[a]===null?"null":typeof t[a];for(var s in e){var d=_D[e[s]];d&&n.push({name:s,type:d,size:vD[d]})}return n}function AD(t){return t.reduce(function(e,n){return e+n.size},1)}var zm=ub,kI=hb,wD=function(e,n){var a=n||kI.multi(e),s=32*a.length+1,d=kI.bytesPer(a),l=new ArrayBuffer(s+32+d*e.length+1),o=new Date,g=new DataView(l);g.setUint8(0,3),g.setUint8(1,o.getFullYear()-1900),g.setUint8(2,o.getMonth()+1),g.setUint8(3,o.getDate()),g.setUint32(4,e.length,!0);var _=s+32;g.setUint16(8,_,!0),g.setUint16(10,d,!0),g.setInt8(32+s-1,13),a.forEach(function(I,E){I.name.split("").slice(0,10).forEach(function(S,k){g.setInt8(32+E*32+k,S.charCodeAt(0))}),g.setInt8(32+E*32+11,I.type.charCodeAt(0)),g.setInt8(32+E*32+16,I.size),I.type=="N"&&g.setInt8(32+E*32+17,3)});var C=s+32;return e.forEach(function(I,E){g.setUint8(C,32),C++,a.forEach(function(S){var k=I[S.name];switch((k===null||typeof k>"u")&&(k=""),S.type){case"L":g.setUint8(C,k?84:70),C++;break;case"D":C=zm.writeField(g,8,zm.lpad(k.toString(),8," "),C);break;case"N":C=zm.writeField(g,S.size,zm.lpad(k.toString(),S.size," ").substr(0,18),C);break;case"C":C=zm.writeField(g,S.size,zm.rpad(k.toString(),S.size," "),C);break;default:throw new Error("Unknown field type")}})}),g.setUint8(C,26),g};_T.structure=wD;var xT='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]',Pg={},qy={};qy.enlarge=function(e,n){return n[0]<e.xmin&&(e.xmin=n[0]),n[0]>e.xmax&&(e.xmax=n[0]),n[1]<e.ymin&&(e.ymin=n[1]),n[1]>e.ymax&&(e.ymax=n[1]),e};qy.enlargeExtent=function(e,n){return n.xmax>e.xmax&&(e.xmax=n.xmax),n.xmin<e.xmin&&(e.xmin=n.xmin),n.ymax>e.ymax&&(e.ymax=n.ymax),n.ymin<e.ymin&&(e.ymin=n.ymin),e};qy.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}};var LI=qy;Pg.write=function(e,n,a,s){var d=28,l=100,o=0,g=0;e.forEach(function(C,I){a.setInt32(o,I+1),a.setInt32(o+4,10),a.setInt32(o+8,1,!0),a.setFloat64(o+12,C[0],!0),a.setFloat64(o+20,C[1],!0),s.setInt32(g,l/2),s.setInt32(g+4,10),g+=8,o+=d,l+=d})};Pg.extent=function(t){return t.reduce(function(e,n){return LI.enlarge(e,n)},LI.blank())};Pg.parts=function(e,n){return e.length};Pg.shxLength=function(t){return t.length*8};Pg.shpLength=function(t){return t.length*28};var kg={},x1=qy,RI=x2;kg.write=function(e,n,a,s,d){var l=0,o=0,g=100;e.forEach(_);function _(C,I){var E=db(C),S=AT([C],d),k=E.length*16+48+(S-1)*4,R=E.reduce(function(F,j){return x1.enlarge(F,j)},x1.blank());s.setInt32(o,g/2),s.setInt32(o+4,k/2),o+=8,g+=k+8,a.setInt32(l,I+1),a.setInt32(l+4,k/2),a.setInt32(l+8,d,!0),a.setFloat64(l+12,R.xmin,!0),a.setFloat64(l+20,R.ymin,!0),a.setFloat64(l+28,R.xmax,!0),a.setFloat64(l+36,R.ymax,!0),a.setInt32(l+44,S,!0),a.setInt32(l+48,E.length,!0),a.setInt32(l+52,0,!0);for(var B=C.reduce(function(F,j){return Array.isArray(j[0][0])?F=F.concat(j):F.push(j),F},[]),V=1;V<S;V++)a.setInt32(l+52+V*4,B.reduce(function(F,j,G){return G<V?F+j.length:F},0),!0);E.forEach(function(j,G){a.setFloat64(l+56+G*16+(S-1)*4,j[0],!0),a.setFloat64(l+56+G*16+(S-1)*4+8,j[1],!0)}),l+=k+8}};kg.shpLength=function(t){return t.length*56+db(t).length*16};kg.shxLength=function(t){return t.length*8};kg.extent=function(t){return db(t).reduce(function(e,n){return x1.enlarge(e,n)},x1.blank())};function AT(t,e){var n=1;return(e===RI.geometries.POLYGON||e===RI.geometries.POLYLINE)&&(n=t.reduce(function(a,s){return a+=s.length,Array.isArray(s[0][0][0])&&(a+=s.reduce(function(d,l){return d+l.length-1},0)),a},0)),n}kg.parts=AT;function db(t,e){return e===void 0&&(e=[]),typeof t[0][0]=="object"?t.reduce(function(n,a){return n.concat(db(a))},e):t}var CD=x2,ID=_T,MD=xT,SD=Pg,DI=kg,ED={1:SD,5:DI,3:DI},wT=TD;function TD(t,e,n,a){var s=CD.geometries[e],d=ED[s],l=d.parts(n,s),o=100+(l-n.length)*4+d.shpLength(n),g=100+d.shxLength(n),_=new ArrayBuffer(o),C=new DataView(_),I=new ArrayBuffer(g),E=new DataView(I),S=d.extent(n);OI(C,s),OI(E,s),zI(S,C),zI(S,E),d.write(n,S,new DataView(_,100),new DataView(I,100),s),C.setInt32(24,o/2),E.setInt32(24,50+n.length*4);var k=ID.structure(t);a(null,{shp:C,shx:E,dbf:k,prj:MD})}function OI(t,e){t.setInt32(0,9994),t.setInt32(28,1e3,!0),t.setInt32(32,e,!0)}function zI(t,e){e.setFloat64(36,t.xmin,!0),e.setFloat64(44,t.ymin,!0),e.setFloat64(52,t.xmax,!0),e.setFloat64(60,t.ymax,!0)}var Lg={};Lg.point=Ky("Point","POINT");Lg.line=Ky("LineString","POLYLINE");Lg.multiline=Ky("MultiLineString","POLYLINE");Lg.polygon=Ky("Polygon","POLYGON");Lg.multipolygon=Ky("MultiPolygon","POLYGON");function Ky(t,e){return function(n){var a=n.features.filter(kD(t));return{geometries:e==="POLYLINE"?[a.map(FI)]:a.map(FI),properties:a.map(PD),type:e}}}function FI(t){return t.geometry.coordinates}function PD(t){return t.properties}function kD(t){return Array.isArray(t)?function(e){return t.includes(e.geometry.type)}:function(e){return e.geometry.type===t}}function O_(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var CT={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(a,s,d){function l(_,C){if(!s[_]){if(!a[_]){var I=typeof O_=="function"&&O_;if(!C&&I)return I(_,!0);if(o)return o(_,!0);var E=new Error("Cannot find module '"+_+"'");throw E.code="MODULE_NOT_FOUND",E}var S=s[_]={exports:{}};a[_][0].call(S.exports,function(k){var R=a[_][1][k];return l(R||k)},S,S.exports,n,a,s,d)}return s[_].exports}for(var o=typeof O_=="function"&&O_,g=0;g<d.length;g++)l(d[g]);return l}({1:[function(n,a,s){var d=n("./utils"),l=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(g){for(var _,C,I,E,S,k,R,B=[],V=0,F=g.length,j=F,G=d.getTypeOf(g)!=="string";V<g.length;)j=F-V,I=G?(_=g[V++],C=V<F?g[V++]:0,V<F?g[V++]:0):(_=g.charCodeAt(V++),C=V<F?g.charCodeAt(V++):0,V<F?g.charCodeAt(V++):0),E=_>>2,S=(3&_)<<4|C>>4,k=1<j?(15&C)<<2|I>>6:64,R=2<j?63&I:64,B.push(o.charAt(E)+o.charAt(S)+o.charAt(k)+o.charAt(R));return B.join("")},s.decode=function(g){var _,C,I,E,S,k,R=0,B=0,V="data:";if(g.substr(0,V.length)===V)throw new Error("Invalid base64 input, it looks like a data url.");var F,j=3*(g=g.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(g.charAt(g.length-1)===o.charAt(64)&&j--,g.charAt(g.length-2)===o.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(F=l.uint8array?new Uint8Array(0|j):new Array(0|j);R<g.length;)_=o.indexOf(g.charAt(R++))<<2|(E=o.indexOf(g.charAt(R++)))>>4,C=(15&E)<<4|(S=o.indexOf(g.charAt(R++)))>>2,I=(3&S)<<6|(k=o.indexOf(g.charAt(R++))),F[B++]=_,S!==64&&(F[B++]=C),k!==64&&(F[B++]=I);return F}},{"./support":30,"./utils":32}],2:[function(n,a,s){var d=n("./external"),l=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),g=n("./stream/DataLengthProbe");function _(C,I,E,S,k){this.compressedSize=C,this.uncompressedSize=I,this.crc32=E,this.compression=S,this.compressedContent=k}_.prototype={getContentWorker:function(){var C=new l(d.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),I=this;return C.on("end",function(){if(this.streamInfo.data_length!==I.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),C},getCompressedWorker:function(){return new l(d.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},_.createWorkerFrom=function(C,I,E){return C.pipe(new o).pipe(new g("uncompressedSize")).pipe(I.compressWorker(E)).pipe(new g("compressedSize")).withStreamInfo("compression",I)},a.exports=_},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,a,s){var d=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new d("STORE compression")},uncompressWorker:function(){return new d("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,a,s){var d=n("./utils"),l=function(){for(var o,g=[],_=0;_<256;_++){o=_;for(var C=0;C<8;C++)o=1&o?3988292384^o>>>1:o>>>1;g[_]=o}return g}();a.exports=function(o,g){return o!==void 0&&o.length?d.getTypeOf(o)!=="string"?function(_,C,I,E){var S=l,k=E+I;_^=-1;for(var R=E;R<k;R++)_=_>>>8^S[255&(_^C[R])];return-1^_}(0|g,o,o.length,0):function(_,C,I,E){var S=l,k=E+I;_^=-1;for(var R=E;R<k;R++)_=_>>>8^S[255&(_^C.charCodeAt(R))];return-1^_}(0|g,o,o.length,0):0}},{"./utils":32}],5:[function(n,a,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,a,s){var d=null;d=typeof Promise<"u"?Promise:n("lie"),a.exports={Promise:d}},{lie:37}],7:[function(n,a,s){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=n("pako"),o=n("./utils"),g=n("./stream/GenericWorker"),_=d?"uint8array":"array";function C(I,E){g.call(this,"FlateWorker/"+I),this._pako=null,this._pakoAction=I,this._pakoOptions=E,this.meta={}}s.magic="\b\0",o.inherits(C,g),C.prototype.processChunk=function(I){this.meta=I.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(_,I.data),!1)},C.prototype.flush=function(){g.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},C.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this._pako=null},C.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var I=this;this._pako.onData=function(E){I.push({data:E,meta:I.meta})}},s.compressWorker=function(I){return new C("Deflate",I)},s.uncompressWorker=function(){return new C("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,a,s){function d(S,k){var R,B="";for(R=0;R<k;R++)B+=String.fromCharCode(255&S),S>>>=8;return B}function l(S,k,R,B,V,F){var j,G,Q=S.file,nt=S.compression,X=F!==_.utf8encode,K=o.transformTo("string",F(Q.name)),Z=o.transformTo("string",_.utf8encode(Q.name)),at=Q.comment,pt=o.transformTo("string",F(at)),rt=o.transformTo("string",_.utf8encode(at)),xt=Z.length!==Q.name.length,q=rt.length!==at.length,zt="",Rt="",Bt="",Xt=Q.dir,ge=Q.date,en={crc32:0,compressedSize:0,uncompressedSize:0};k&&!R||(en.crc32=S.crc32,en.compressedSize=S.compressedSize,en.uncompressedSize=S.uncompressedSize);var te=0;k&&(te|=8),X||!xt&&!q||(te|=2048);var Gt=0,Re=0;Xt&&(Gt|=16),V==="UNIX"?(Re=798,Gt|=function(Ce,nn){var be=Ce;return Ce||(be=nn?16893:33204),(65535&be)<<16}(Q.unixPermissions,Xt)):(Re=20,Gt|=function(Ce){return 63&(Ce||0)}(Q.dosPermissions)),j=ge.getUTCHours(),j<<=6,j|=ge.getUTCMinutes(),j<<=5,j|=ge.getUTCSeconds()/2,G=ge.getUTCFullYear()-1980,G<<=4,G|=ge.getUTCMonth()+1,G<<=5,G|=ge.getUTCDate(),xt&&(Rt=d(1,1)+d(C(K),4)+Z,zt+="up"+d(Rt.length,2)+Rt),q&&(Bt=d(1,1)+d(C(pt),4)+rt,zt+="uc"+d(Bt.length,2)+Bt);var Ge="";return Ge+=`
\0`,Ge+=d(te,2),Ge+=nt.magic,Ge+=d(j,2),Ge+=d(G,2),Ge+=d(en.crc32,4),Ge+=d(en.compressedSize,4),Ge+=d(en.uncompressedSize,4),Ge+=d(K.length,2),Ge+=d(zt.length,2),{fileRecord:I.LOCAL_FILE_HEADER+Ge+K+zt,dirRecord:I.CENTRAL_FILE_HEADER+d(Re,2)+Ge+d(pt.length,2)+"\0\0\0\0"+d(Gt,4)+d(B,4)+K+zt+pt}}var o=n("../utils"),g=n("../stream/GenericWorker"),_=n("../utf8"),C=n("../crc32"),I=n("../signature");function E(S,k,R,B){g.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=k,this.zipPlatform=R,this.encodeFileName=B,this.streamFiles=S,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(E,g),E.prototype.push=function(S){var k=S.meta.percent||0,R=this.entriesCount,B=this._sources.length;this.accumulate?this.contentBuffer.push(S):(this.bytesWritten+=S.data.length,g.prototype.push.call(this,{data:S.data,meta:{currentFile:this.currentFile,percent:R?(k+100*(R-B-1))/R:100}}))},E.prototype.openedSource=function(S){this.currentSourceOffset=this.bytesWritten,this.currentFile=S.file.name;var k=this.streamFiles&&!S.file.dir;if(k){var R=l(S,k,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:R.fileRecord,meta:{percent:0}})}else this.accumulate=!0},E.prototype.closedSource=function(S){this.accumulate=!1;var k=this.streamFiles&&!S.file.dir,R=l(S,k,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(R.dirRecord),k)this.push({data:function(B){return I.DATA_DESCRIPTOR+d(B.crc32,4)+d(B.compressedSize,4)+d(B.uncompressedSize,4)}(S),meta:{percent:100}});else for(this.push({data:R.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},E.prototype.flush=function(){for(var S=this.bytesWritten,k=0;k<this.dirRecords.length;k++)this.push({data:this.dirRecords[k],meta:{percent:100}});var R=this.bytesWritten-S,B=function(V,F,j,G,Q){var nt=o.transformTo("string",Q(G));return I.CENTRAL_DIRECTORY_END+"\0\0\0\0"+d(V,2)+d(V,2)+d(F,4)+d(j,4)+d(nt.length,2)+nt}(this.dirRecords.length,R,S,this.zipComment,this.encodeFileName);this.push({data:B,meta:{percent:100}})},E.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},E.prototype.registerPrevious=function(S){this._sources.push(S);var k=this;return S.on("data",function(R){k.processChunk(R)}),S.on("end",function(){k.closedSource(k.previous.streamInfo),k._sources.length?k.prepareNextSource():k.end()}),S.on("error",function(R){k.error(R)}),this},E.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},E.prototype.error=function(S){var k=this._sources;if(!g.prototype.error.call(this,S))return!1;for(var R=0;R<k.length;R++)try{k[R].error(S)}catch{}return!0},E.prototype.lock=function(){g.prototype.lock.call(this);for(var S=this._sources,k=0;k<S.length;k++)S[k].lock()},a.exports=E},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,a,s){var d=n("../compressions"),l=n("./ZipFileWorker");s.generateWorker=function(o,g,_){var C=new l(g.streamFiles,_,g.platform,g.encodeFileName),I=0;try{o.forEach(function(E,S){I++;var k=function(F,j){var G=F||j,Q=d[G];if(!Q)throw new Error(G+" is not a valid compression method !");return Q}(S.options.compression,g.compression),R=S.options.compressionOptions||g.compressionOptions||{},B=S.dir,V=S.date;S._compressWorker(k,R).withStreamInfo("file",{name:E,dir:B,date:V,comment:S.comment||"",unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions}).pipe(C)}),C.entriesCount=I}catch(E){C.error(E)}return C}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,a,s){function d(){if(!(this instanceof d))return new d;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new d;for(var o in this)typeof this[o]!="function"&&(l[o]=this[o]);return l}}(d.prototype=n("./object")).loadAsync=n("./load"),d.support=n("./support"),d.defaults=n("./defaults"),d.version="3.10.1",d.loadAsync=function(l,o){return new d().loadAsync(l,o)},d.external=n("./external"),a.exports=d},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,a,s){var d=n("./utils"),l=n("./external"),o=n("./utf8"),g=n("./zipEntries"),_=n("./stream/Crc32Probe"),C=n("./nodejsUtils");function I(E){return new l.Promise(function(S,k){var R=E.decompressed.getContentWorker().pipe(new _);R.on("error",function(B){k(B)}).on("end",function(){R.streamInfo.crc32!==E.decompressed.crc32?k(new Error("Corrupted zip : CRC32 mismatch")):S()}).resume()})}a.exports=function(E,S){var k=this;return S=d.extend(S||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),C.isNode&&C.isStream(E)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):d.prepareContent("the loaded zip file",E,!0,S.optimizedBinaryString,S.base64).then(function(R){var B=new g(S);return B.load(R),B}).then(function(R){var B=[l.Promise.resolve(R)],V=R.files;if(S.checkCRC32)for(var F=0;F<V.length;F++)B.push(I(V[F]));return l.Promise.all(B)}).then(function(R){for(var B=R.shift(),V=B.files,F=0;F<V.length;F++){var j=V[F],G=j.fileNameStr,Q=d.resolve(j.fileNameStr);k.file(Q,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:S.createFolders}),j.dir||(k.file(Q).unsafeOriginalName=G)}return B.zipComment.length&&(k.comment=B.zipComment),k})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,a,s){var d=n("../utils"),l=n("../stream/GenericWorker");function o(g,_){l.call(this,"Nodejs stream input adapter for "+g),this._upstreamEnded=!1,this._bindStream(_)}d.inherits(o,l),o.prototype._bindStream=function(g){var _=this;(this._stream=g).pause(),g.on("data",function(C){_.push({data:C,meta:{percent:0}})}).on("error",function(C){_.isPaused?this.generatedError=C:_.error(C)}).on("end",function(){_.isPaused?_._upstreamEnded=!0:_.end()})},o.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,a,s){var d=n("readable-stream").Readable;function l(o,g,_){d.call(this,g),this._helper=o;var C=this;o.on("data",function(I,E){C.push(I)||C._helper.pause(),_&&_(E)}).on("error",function(I){C.emit("error",I)}).on("end",function(){C.push(null)})}n("../utils").inherits(l,d),l.prototype._read=function(){this._helper.resume()},a.exports=l},{"../utils":32,"readable-stream":16}],14:[function(n,a,s){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(d,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(d,l);if(typeof d=="number")throw new Error('The "data" argument must not be a number');return new Buffer(d,l)},allocBuffer:function(d){if(Buffer.alloc)return Buffer.alloc(d);var l=new Buffer(d);return l.fill(0),l},isBuffer:function(d){return Buffer.isBuffer(d)},isStream:function(d){return d&&typeof d.on=="function"&&typeof d.pause=="function"&&typeof d.resume=="function"}}},{}],15:[function(n,a,s){function d(Q,nt,X){var K,Z=o.getTypeOf(nt),at=o.extend(X||{},C);at.date=at.date||new Date,at.compression!==null&&(at.compression=at.compression.toUpperCase()),typeof at.unixPermissions=="string"&&(at.unixPermissions=parseInt(at.unixPermissions,8)),at.unixPermissions&&16384&at.unixPermissions&&(at.dir=!0),at.dosPermissions&&16&at.dosPermissions&&(at.dir=!0),at.dir&&(Q=V(Q)),at.createFolders&&(K=B(Q))&&F.call(this,K,!0);var pt=Z==="string"&&at.binary===!1&&at.base64===!1;X&&X.binary!==void 0||(at.binary=!pt),(nt instanceof I&&nt.uncompressedSize===0||at.dir||!nt||nt.length===0)&&(at.base64=!1,at.binary=!0,nt="",at.compression="STORE",Z="string");var rt=null;rt=nt instanceof I||nt instanceof g?nt:k.isNode&&k.isStream(nt)?new R(Q,nt):o.prepareContent(Q,nt,at.binary,at.optimizedBinaryString,at.base64);var xt=new E(Q,rt,at);this.files[Q]=xt}var l=n("./utf8"),o=n("./utils"),g=n("./stream/GenericWorker"),_=n("./stream/StreamHelper"),C=n("./defaults"),I=n("./compressedObject"),E=n("./zipObject"),S=n("./generate"),k=n("./nodejsUtils"),R=n("./nodejs/NodejsStreamInputAdapter"),B=function(Q){Q.slice(-1)==="/"&&(Q=Q.substring(0,Q.length-1));var nt=Q.lastIndexOf("/");return 0<nt?Q.substring(0,nt):""},V=function(Q){return Q.slice(-1)!=="/"&&(Q+="/"),Q},F=function(Q,nt){return nt=nt!==void 0?nt:C.createFolders,Q=V(Q),this.files[Q]||d.call(this,Q,null,{dir:!0,createFolders:nt}),this.files[Q]};function j(Q){return Object.prototype.toString.call(Q)==="[object RegExp]"}var G={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(Q){var nt,X,K;for(nt in this.files)K=this.files[nt],(X=nt.slice(this.root.length,nt.length))&&nt.slice(0,this.root.length)===this.root&&Q(X,K)},filter:function(Q){var nt=[];return this.forEach(function(X,K){Q(X,K)&&nt.push(K)}),nt},file:function(Q,nt,X){if(arguments.length!==1)return Q=this.root+Q,d.call(this,Q,nt,X),this;if(j(Q)){var K=Q;return this.filter(function(at,pt){return!pt.dir&&K.test(at)})}var Z=this.files[this.root+Q];return Z&&!Z.dir?Z:null},folder:function(Q){if(!Q)return this;if(j(Q))return this.filter(function(Z,at){return at.dir&&Q.test(Z)});var nt=this.root+Q,X=F.call(this,nt),K=this.clone();return K.root=X.name,K},remove:function(Q){Q=this.root+Q;var nt=this.files[Q];if(nt||(Q.slice(-1)!=="/"&&(Q+="/"),nt=this.files[Q]),nt&&!nt.dir)delete this.files[Q];else for(var X=this.filter(function(Z,at){return at.name.slice(0,Q.length)===Q}),K=0;K<X.length;K++)delete this.files[X[K].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(Q){var nt,X={};try{if((X=o.extend(Q||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=X.type.toLowerCase(),X.compression=X.compression.toUpperCase(),X.type==="binarystring"&&(X.type="string"),!X.type)throw new Error("No output type specified.");o.checkSupport(X.type),X.platform!=="darwin"&&X.platform!=="freebsd"&&X.platform!=="linux"&&X.platform!=="sunos"||(X.platform="UNIX"),X.platform==="win32"&&(X.platform="DOS");var K=X.comment||this.comment||"";nt=S.generateWorker(this,X,K)}catch(Z){(nt=new g("error")).error(Z)}return new _(nt,X.type||"string",X.mimeType)},generateAsync:function(Q,nt){return this.generateInternalStream(Q).accumulate(nt)},generateNodeStream:function(Q,nt){return(Q=Q||{}).type||(Q.type="nodebuffer"),this.generateInternalStream(Q).toNodejsStream(nt)}};a.exports=G},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,a,s){a.exports=n("stream")},{stream:void 0}],17:[function(n,a,s){var d=n("./DataReader");function l(o){d.call(this,o);for(var g=0;g<this.data.length;g++)o[g]=255&o[g]}n("../utils").inherits(l,d),l.prototype.byteAt=function(o){return this.data[this.zero+o]},l.prototype.lastIndexOfSignature=function(o){for(var g=o.charCodeAt(0),_=o.charCodeAt(1),C=o.charCodeAt(2),I=o.charCodeAt(3),E=this.length-4;0<=E;--E)if(this.data[E]===g&&this.data[E+1]===_&&this.data[E+2]===C&&this.data[E+3]===I)return E-this.zero;return-1},l.prototype.readAndCheckSignature=function(o){var g=o.charCodeAt(0),_=o.charCodeAt(1),C=o.charCodeAt(2),I=o.charCodeAt(3),E=this.readData(4);return g===E[0]&&_===E[1]&&C===E[2]&&I===E[3]},l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var g=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,g},a.exports=l},{"../utils":32,"./DataReader":18}],18:[function(n,a,s){var d=n("../utils");function l(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var g,_=0;for(this.checkOffset(o),g=this.index+o-1;g>=this.index;g--)_=(_<<8)+this.byteAt(g);return this.index+=o,_},readString:function(o){return d.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},a.exports=l},{"../utils":32}],19:[function(n,a,s){var d=n("./Uint8ArrayReader");function l(o){d.call(this,o)}n("../utils").inherits(l,d),l.prototype.readData=function(o){this.checkOffset(o);var g=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,g},a.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,a,s){var d=n("./DataReader");function l(o){d.call(this,o)}n("../utils").inherits(l,d),l.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},l.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},l.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},l.prototype.readData=function(o){this.checkOffset(o);var g=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,g},a.exports=l},{"../utils":32,"./DataReader":18}],21:[function(n,a,s){var d=n("./ArrayReader");function l(o){d.call(this,o)}n("../utils").inherits(l,d),l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var g=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,g},a.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(n,a,s){var d=n("../utils"),l=n("../support"),o=n("./ArrayReader"),g=n("./StringReader"),_=n("./NodeBufferReader"),C=n("./Uint8ArrayReader");a.exports=function(I){var E=d.getTypeOf(I);return d.checkSupport(E),E!=="string"||l.uint8array?E==="nodebuffer"?new _(I):l.uint8array?new C(d.transformTo("uint8array",I)):new o(d.transformTo("array",I)):new g(I)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,a,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,a,s){var d=n("./GenericWorker"),l=n("../utils");function o(g){d.call(this,"ConvertWorker to "+g),this.destType=g}l.inherits(o,d),o.prototype.processChunk=function(g){this.push({data:l.transformTo(this.destType,g.data),meta:g.meta})},a.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,a,s){var d=n("./GenericWorker"),l=n("../crc32");function o(){d.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,d),o.prototype.processChunk=function(g){this.streamInfo.crc32=l(g.data,this.streamInfo.crc32||0),this.push(g)},a.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,a,s){var d=n("../utils"),l=n("./GenericWorker");function o(g){l.call(this,"DataLengthProbe for "+g),this.propName=g,this.withStreamInfo(g,0)}d.inherits(o,l),o.prototype.processChunk=function(g){if(g){var _=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=_+g.data.length}l.prototype.processChunk.call(this,g)},a.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,a,s){var d=n("../utils"),l=n("./GenericWorker");function o(g){l.call(this,"DataWorker");var _=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,g.then(function(C){_.dataIsReady=!0,_.data=C,_.max=C&&C.length||0,_.type=d.getTypeOf(C),_.isPaused||_._tickAndRepeat()},function(C){_.error(C)})}d.inherits(o,l),o.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,d.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(d.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var g=null,_=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":g=this.data.substring(this.index,_);break;case"uint8array":g=this.data.subarray(this.index,_);break;case"array":case"nodebuffer":g=this.data.slice(this.index,_)}return this.index=_,this.push({data:g,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,a,s){function d(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}d.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,o){return this._listeners[l].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,o){if(this._listeners[l])for(var g=0;g<this._listeners[l].length;g++)this._listeners[l][g].call(this,o)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var o=this;return l.on("data",function(g){o.processChunk(g)}),l.on("end",function(){o.end()}),l.on("error",function(g){o.error(g)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,o){return this.extraStreamInfo[l]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},a.exports=d},{}],29:[function(n,a,s){var d=n("../utils"),l=n("./ConvertWorker"),o=n("./GenericWorker"),g=n("../base64"),_=n("../support"),C=n("../external"),I=null;if(_.nodestream)try{I=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function E(k,R){return new C.Promise(function(B,V){var F=[],j=k._internalType,G=k._outputType,Q=k._mimeType;k.on("data",function(nt,X){F.push(nt),R&&R(X)}).on("error",function(nt){F=[],V(nt)}).on("end",function(){try{var nt=function(X,K,Z){switch(X){case"blob":return d.newBlob(d.transformTo("arraybuffer",K),Z);case"base64":return g.encode(K);default:return d.transformTo(X,K)}}(G,function(X,K){var Z,at=0,pt=null,rt=0;for(Z=0;Z<K.length;Z++)rt+=K[Z].length;switch(X){case"string":return K.join("");case"array":return Array.prototype.concat.apply([],K);case"uint8array":for(pt=new Uint8Array(rt),Z=0;Z<K.length;Z++)pt.set(K[Z],at),at+=K[Z].length;return pt;case"nodebuffer":return Buffer.concat(K);default:throw new Error("concat : unsupported type '"+X+"'")}}(j,F),Q);B(nt)}catch(X){V(X)}F=[]}).resume()})}function S(k,R,B){var V=R;switch(R){case"blob":case"arraybuffer":V="uint8array";break;case"base64":V="string"}try{this._internalType=V,this._outputType=R,this._mimeType=B,d.checkSupport(V),this._worker=k.pipe(new l(V)),k.lock()}catch(F){this._worker=new o("error"),this._worker.error(F)}}S.prototype={accumulate:function(k){return E(this,k)},on:function(k,R){var B=this;return k==="data"?this._worker.on(k,function(V){R.call(B,V.data,V.meta)}):this._worker.on(k,function(){d.delay(R,arguments,B)}),this},resume:function(){return d.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(k){if(d.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new I(this,{objectMode:this._outputType!=="nodebuffer"},k)}},a.exports=S},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,a,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var d=new ArrayBuffer(0);try{s.blob=new Blob([d],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(d),s.blob=l.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,a,s){for(var d=n("./utils"),l=n("./support"),o=n("./nodejsUtils"),g=n("./stream/GenericWorker"),_=new Array(256),C=0;C<256;C++)_[C]=252<=C?6:248<=C?5:240<=C?4:224<=C?3:192<=C?2:1;_[254]=_[254]=1;function I(){g.call(this,"utf-8 decode"),this.leftOver=null}function E(){g.call(this,"utf-8 encode")}s.utf8encode=function(S){return l.nodebuffer?o.newBufferFrom(S,"utf-8"):function(k){var R,B,V,F,j,G=k.length,Q=0;for(F=0;F<G;F++)(64512&(B=k.charCodeAt(F)))==55296&&F+1<G&&(64512&(V=k.charCodeAt(F+1)))==56320&&(B=65536+(B-55296<<10)+(V-56320),F++),Q+=B<128?1:B<2048?2:B<65536?3:4;for(R=l.uint8array?new Uint8Array(Q):new Array(Q),F=j=0;j<Q;F++)(64512&(B=k.charCodeAt(F)))==55296&&F+1<G&&(64512&(V=k.charCodeAt(F+1)))==56320&&(B=65536+(B-55296<<10)+(V-56320),F++),B<128?R[j++]=B:(B<2048?R[j++]=192|B>>>6:(B<65536?R[j++]=224|B>>>12:(R[j++]=240|B>>>18,R[j++]=128|B>>>12&63),R[j++]=128|B>>>6&63),R[j++]=128|63&B);return R}(S)},s.utf8decode=function(S){return l.nodebuffer?d.transformTo("nodebuffer",S).toString("utf-8"):function(k){var R,B,V,F,j=k.length,G=new Array(2*j);for(R=B=0;R<j;)if((V=k[R++])<128)G[B++]=V;else if(4<(F=_[V]))G[B++]=65533,R+=F-1;else{for(V&=F===2?31:F===3?15:7;1<F&&R<j;)V=V<<6|63&k[R++],F--;1<F?G[B++]=65533:V<65536?G[B++]=V:(V-=65536,G[B++]=55296|V>>10&1023,G[B++]=56320|1023&V)}return G.length!==B&&(G.subarray?G=G.subarray(0,B):G.length=B),d.applyFromCharCode(G)}(S=d.transformTo(l.uint8array?"uint8array":"array",S))},d.inherits(I,g),I.prototype.processChunk=function(S){var k=d.transformTo(l.uint8array?"uint8array":"array",S.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var R=k;(k=new Uint8Array(R.length+this.leftOver.length)).set(this.leftOver,0),k.set(R,this.leftOver.length)}else k=this.leftOver.concat(k);this.leftOver=null}var B=function(F,j){var G;for((j=j||F.length)>F.length&&(j=F.length),G=j-1;0<=G&&(192&F[G])==128;)G--;return G<0||G===0?j:G+_[F[G]]>j?G:j}(k),V=k;B!==k.length&&(l.uint8array?(V=k.subarray(0,B),this.leftOver=k.subarray(B,k.length)):(V=k.slice(0,B),this.leftOver=k.slice(B,k.length))),this.push({data:s.utf8decode(V),meta:S.meta})},I.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=I,d.inherits(E,g),E.prototype.processChunk=function(S){this.push({data:s.utf8encode(S.data),meta:S.meta})},s.Utf8EncodeWorker=E},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,a,s){var d=n("./support"),l=n("./base64"),o=n("./nodejsUtils"),g=n("./external");function _(R){return R}function C(R,B){for(var V=0;V<R.length;++V)B[V]=255&R.charCodeAt(V);return B}n("setimmediate"),s.newBlob=function(R,B){s.checkSupport("blob");try{return new Blob([R],{type:B})}catch{try{var V=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return V.append(R),V.getBlob(B)}catch{throw new Error("Bug : can't construct the Blob.")}}};var I={stringifyByChunk:function(R,B,V){var F=[],j=0,G=R.length;if(G<=V)return String.fromCharCode.apply(null,R);for(;j<G;)B==="array"||B==="nodebuffer"?F.push(String.fromCharCode.apply(null,R.slice(j,Math.min(j+V,G)))):F.push(String.fromCharCode.apply(null,R.subarray(j,Math.min(j+V,G)))),j+=V;return F.join("")},stringifyByChar:function(R){for(var B="",V=0;V<R.length;V++)B+=String.fromCharCode(R[V]);return B},applyCanBeUsed:{uint8array:function(){try{return d.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return d.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function E(R){var B=65536,V=s.getTypeOf(R),F=!0;if(V==="uint8array"?F=I.applyCanBeUsed.uint8array:V==="nodebuffer"&&(F=I.applyCanBeUsed.nodebuffer),F)for(;1<B;)try{return I.stringifyByChunk(R,V,B)}catch{B=Math.floor(B/2)}return I.stringifyByChar(R)}function S(R,B){for(var V=0;V<R.length;V++)B[V]=R[V];return B}s.applyFromCharCode=E;var k={};k.string={string:_,array:function(R){return C(R,new Array(R.length))},arraybuffer:function(R){return k.string.uint8array(R).buffer},uint8array:function(R){return C(R,new Uint8Array(R.length))},nodebuffer:function(R){return C(R,o.allocBuffer(R.length))}},k.array={string:E,array:_,arraybuffer:function(R){return new Uint8Array(R).buffer},uint8array:function(R){return new Uint8Array(R)},nodebuffer:function(R){return o.newBufferFrom(R)}},k.arraybuffer={string:function(R){return E(new Uint8Array(R))},array:function(R){return S(new Uint8Array(R),new Array(R.byteLength))},arraybuffer:_,uint8array:function(R){return new Uint8Array(R)},nodebuffer:function(R){return o.newBufferFrom(new Uint8Array(R))}},k.uint8array={string:E,array:function(R){return S(R,new Array(R.length))},arraybuffer:function(R){return R.buffer},uint8array:_,nodebuffer:function(R){return o.newBufferFrom(R)}},k.nodebuffer={string:E,array:function(R){return S(R,new Array(R.length))},arraybuffer:function(R){return k.nodebuffer.uint8array(R).buffer},uint8array:function(R){return S(R,new Uint8Array(R.length))},nodebuffer:_},s.transformTo=function(R,B){if(B=B||"",!R)return B;s.checkSupport(R);var V=s.getTypeOf(B);return k[V][R](B)},s.resolve=function(R){for(var B=R.split("/"),V=[],F=0;F<B.length;F++){var j=B[F];j==="."||j===""&&F!==0&&F!==B.length-1||(j===".."?V.pop():V.push(j))}return V.join("/")},s.getTypeOf=function(R){return typeof R=="string"?"string":Object.prototype.toString.call(R)==="[object Array]"?"array":d.nodebuffer&&o.isBuffer(R)?"nodebuffer":d.uint8array&&R instanceof Uint8Array?"uint8array":d.arraybuffer&&R instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(R){if(!d[R.toLowerCase()])throw new Error(R+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(R){var B,V,F="";for(V=0;V<(R||"").length;V++)F+="\\x"+((B=R.charCodeAt(V))<16?"0":"")+B.toString(16).toUpperCase();return F},s.delay=function(R,B,V){setImmediate(function(){R.apply(V||null,B||[])})},s.inherits=function(R,B){function V(){}V.prototype=B.prototype,R.prototype=new V},s.extend=function(){var R,B,V={};for(R=0;R<arguments.length;R++)for(B in arguments[R])Object.prototype.hasOwnProperty.call(arguments[R],B)&&V[B]===void 0&&(V[B]=arguments[R][B]);return V},s.prepareContent=function(R,B,V,F,j){return g.Promise.resolve(B).then(function(G){return d.blob&&(G instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(G))!==-1)&&typeof FileReader<"u"?new g.Promise(function(Q,nt){var X=new FileReader;X.onload=function(K){Q(K.target.result)},X.onerror=function(K){nt(K.target.error)},X.readAsArrayBuffer(G)}):G}).then(function(G){var Q=s.getTypeOf(G);return Q?(Q==="arraybuffer"?G=s.transformTo("uint8array",G):Q==="string"&&(j?G=l.decode(G):V&&F!==!0&&(G=function(nt){return C(nt,d.uint8array?new Uint8Array(nt.length):new Array(nt.length))}(G))),G):g.Promise.reject(new Error("Can't read the data of '"+R+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,a,s){var d=n("./reader/readerFor"),l=n("./utils"),o=n("./signature"),g=n("./zipEntry"),_=n("./support");function C(I){this.files=[],this.loadOptions=I}C.prototype={checkSignature:function(I){if(!this.reader.readAndCheckSignature(I)){this.reader.index-=4;var E=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(E)+", expected "+l.pretty(I)+")")}},isSignature:function(I,E){var S=this.reader.index;this.reader.setIndex(I);var k=this.reader.readString(4)===E;return this.reader.setIndex(S),k},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var I=this.reader.readData(this.zipCommentLength),E=_.uint8array?"uint8array":"array",S=l.transformTo(E,I);this.zipComment=this.loadOptions.decodeFileName(S)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var I,E,S,k=this.zip64EndOfCentralSize-44;0<k;)I=this.reader.readInt(2),E=this.reader.readInt(4),S=this.reader.readData(E),this.zip64ExtensibleData[I]={id:I,length:E,value:S}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var I,E;for(I=0;I<this.files.length;I++)E=this.files[I],this.reader.setIndex(E.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),E.readLocalPart(this.reader),E.handleUTF8(),E.processAttributes()},readCentralDir:function(){var I;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(I=new g({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(I);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var I=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(I<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(I);var E=I;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(I=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(I),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var S=this.centralDirOffset+this.centralDirSize;this.zip64&&(S+=20,S+=12+this.zip64EndOfCentralSize);var k=E-S;if(0<k)this.isSignature(E,o.CENTRAL_FILE_HEADER)||(this.reader.zero=k);else if(k<0)throw new Error("Corrupted zip: missing "+Math.abs(k)+" bytes.")},prepareReader:function(I){this.reader=d(I)},load:function(I){this.prepareReader(I),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=C},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,a,s){var d=n("./reader/readerFor"),l=n("./utils"),o=n("./compressedObject"),g=n("./crc32"),_=n("./utf8"),C=n("./compressions"),I=n("./support");function E(S,k){this.options=S,this.loadOptions=k}E.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(S){var k,R;if(S.skip(22),this.fileNameLength=S.readInt(2),R=S.readInt(2),this.fileName=S.readData(this.fileNameLength),S.skip(R),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((k=function(B){for(var V in C)if(Object.prototype.hasOwnProperty.call(C,V)&&C[V].magic===B)return C[V];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,k,S.readData(this.compressedSize))},readCentralPart:function(S){this.versionMadeBy=S.readInt(2),S.skip(2),this.bitFlag=S.readInt(2),this.compressionMethod=S.readString(2),this.date=S.readDate(),this.crc32=S.readInt(4),this.compressedSize=S.readInt(4),this.uncompressedSize=S.readInt(4);var k=S.readInt(2);if(this.extraFieldsLength=S.readInt(2),this.fileCommentLength=S.readInt(2),this.diskNumberStart=S.readInt(2),this.internalFileAttributes=S.readInt(2),this.externalFileAttributes=S.readInt(4),this.localHeaderOffset=S.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");S.skip(k),this.readExtraFields(S),this.parseZIP64ExtraField(S),this.fileComment=S.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var S=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),S==0&&(this.dosPermissions=63&this.externalFileAttributes),S==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var S=d(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=S.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=S.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=S.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=S.readInt(4))}},readExtraFields:function(S){var k,R,B,V=S.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});S.index+4<V;)k=S.readInt(2),R=S.readInt(2),B=S.readData(R),this.extraFields[k]={id:k,length:R,value:B};S.setIndex(V)},handleUTF8:function(){var S=I.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_.utf8decode(this.fileName),this.fileCommentStr=_.utf8decode(this.fileComment);else{var k=this.findExtraFieldUnicodePath();if(k!==null)this.fileNameStr=k;else{var R=l.transformTo(S,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(R)}var B=this.findExtraFieldUnicodeComment();if(B!==null)this.fileCommentStr=B;else{var V=l.transformTo(S,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(V)}}},findExtraFieldUnicodePath:function(){var S=this.extraFields[28789];if(S){var k=d(S.value);return k.readInt(1)!==1||g(this.fileName)!==k.readInt(4)?null:_.utf8decode(k.readData(S.length-5))}return null},findExtraFieldUnicodeComment:function(){var S=this.extraFields[25461];if(S){var k=d(S.value);return k.readInt(1)!==1||g(this.fileComment)!==k.readInt(4)?null:_.utf8decode(k.readData(S.length-5))}return null}},a.exports=E},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,a,s){function d(k,R,B){this.name=k,this.dir=B.dir,this.date=B.date,this.comment=B.comment,this.unixPermissions=B.unixPermissions,this.dosPermissions=B.dosPermissions,this._data=R,this._dataBinary=B.binary,this.options={compression:B.compression,compressionOptions:B.compressionOptions}}var l=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),g=n("./utf8"),_=n("./compressedObject"),C=n("./stream/GenericWorker");d.prototype={internalStream:function(k){var R=null,B="string";try{if(!k)throw new Error("No output type specified.");var V=(B=k.toLowerCase())==="string"||B==="text";B!=="binarystring"&&B!=="text"||(B="string"),R=this._decompressWorker();var F=!this._dataBinary;F&&!V&&(R=R.pipe(new g.Utf8EncodeWorker)),!F&&V&&(R=R.pipe(new g.Utf8DecodeWorker))}catch(j){(R=new C("error")).error(j)}return new l(R,B,"")},async:function(k,R){return this.internalStream(k).accumulate(R)},nodeStream:function(k,R){return this.internalStream(k||"nodebuffer").toNodejsStream(R)},_compressWorker:function(k,R){if(this._data instanceof _&&this._data.compression.magic===k.magic)return this._data.getCompressedWorker();var B=this._decompressWorker();return this._dataBinary||(B=B.pipe(new g.Utf8EncodeWorker)),_.createWorkerFrom(B,k,R)},_decompressWorker:function(){return this._data instanceof _?this._data.getContentWorker():this._data instanceof C?this._data:new o(this._data)}};for(var I=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],E=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},S=0;S<I.length;S++)d.prototype[I[S]]=E;a.exports=d},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,a,s){(function(d){var l,o,g=d.MutationObserver||d.WebKitMutationObserver;if(g){var _=0,C=new g(k),I=d.document.createTextNode("");C.observe(I,{characterData:!0}),l=function(){I.data=_=++_%2}}else if(d.setImmediate||d.MessageChannel===void 0)l="document"in d&&"onreadystatechange"in d.document.createElement("script")?function(){var R=d.document.createElement("script");R.onreadystatechange=function(){k(),R.onreadystatechange=null,R.parentNode.removeChild(R),R=null},d.document.documentElement.appendChild(R)}:function(){setTimeout(k,0)};else{var E=new d.MessageChannel;E.port1.onmessage=k,l=function(){E.port2.postMessage(0)}}var S=[];function k(){var R,B;o=!0;for(var V=S.length;V;){for(B=S,S=[],R=-1;++R<V;)B[R]();V=S.length}o=!1}a.exports=function(R){S.push(R)!==1||o||l()}}).call(this,typeof ho<"u"?ho:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,a,s){var d=n("immediate");function l(){}var o={},g=["REJECTED"],_=["FULFILLED"],C=["PENDING"];function I(V){if(typeof V!="function")throw new TypeError("resolver must be a function");this.state=C,this.queue=[],this.outcome=void 0,V!==l&&R(this,V)}function E(V,F,j){this.promise=V,typeof F=="function"&&(this.onFulfilled=F,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function S(V,F,j){d(function(){var G;try{G=F(j)}catch(Q){return o.reject(V,Q)}G===V?o.reject(V,new TypeError("Cannot resolve promise with itself")):o.resolve(V,G)})}function k(V){var F=V&&V.then;if(V&&(typeof V=="object"||typeof V=="function")&&typeof F=="function")return function(){F.apply(V,arguments)}}function R(V,F){var j=!1;function G(X){j||(j=!0,o.reject(V,X))}function Q(X){j||(j=!0,o.resolve(V,X))}var nt=B(function(){F(Q,G)});nt.status==="error"&&G(nt.value)}function B(V,F){var j={};try{j.value=V(F),j.status="success"}catch(G){j.status="error",j.value=G}return j}(a.exports=I).prototype.finally=function(V){if(typeof V!="function")return this;var F=this.constructor;return this.then(function(j){return F.resolve(V()).then(function(){return j})},function(j){return F.resolve(V()).then(function(){throw j})})},I.prototype.catch=function(V){return this.then(null,V)},I.prototype.then=function(V,F){if(typeof V!="function"&&this.state===_||typeof F!="function"&&this.state===g)return this;var j=new this.constructor(l);return this.state!==C?S(j,this.state===_?V:F,this.outcome):this.queue.push(new E(j,V,F)),j},E.prototype.callFulfilled=function(V){o.resolve(this.promise,V)},E.prototype.otherCallFulfilled=function(V){S(this.promise,this.onFulfilled,V)},E.prototype.callRejected=function(V){o.reject(this.promise,V)},E.prototype.otherCallRejected=function(V){S(this.promise,this.onRejected,V)},o.resolve=function(V,F){var j=B(k,F);if(j.status==="error")return o.reject(V,j.value);var G=j.value;if(G)R(V,G);else{V.state=_,V.outcome=F;for(var Q=-1,nt=V.queue.length;++Q<nt;)V.queue[Q].callFulfilled(F)}return V},o.reject=function(V,F){V.state=g,V.outcome=F;for(var j=-1,G=V.queue.length;++j<G;)V.queue[j].callRejected(F);return V},I.resolve=function(V){return V instanceof this?V:o.resolve(new this(l),V)},I.reject=function(V){var F=new this(l);return o.reject(F,V)},I.all=function(V){var F=this;if(Object.prototype.toString.call(V)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=V.length,G=!1;if(!j)return this.resolve([]);for(var Q=new Array(j),nt=0,X=-1,K=new this(l);++X<j;)Z(V[X],X);return K;function Z(at,pt){F.resolve(at).then(function(rt){Q[pt]=rt,++nt!==j||G||(G=!0,o.resolve(K,Q))},function(rt){G||(G=!0,o.reject(K,rt))})}},I.race=function(V){var F=this;if(Object.prototype.toString.call(V)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=V.length,G=!1;if(!j)return this.resolve([]);for(var Q=-1,nt=new this(l);++Q<j;)X=V[Q],F.resolve(X).then(function(K){G||(G=!0,o.resolve(nt,K))},function(K){G||(G=!0,o.reject(nt,K))});var X;return nt}},{immediate:36}],38:[function(n,a,s){var d={};(0,n("./lib/utils/common").assign)(d,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),a.exports=d},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,a,s){var d=n("./zlib/deflate"),l=n("./utils/common"),o=n("./utils/strings"),g=n("./zlib/messages"),_=n("./zlib/zstream"),C=Object.prototype.toString,I=0,E=-1,S=0,k=8;function R(V){if(!(this instanceof R))return new R(V);this.options=l.assign({level:E,method:k,chunkSize:16384,windowBits:15,memLevel:8,strategy:S,to:""},V||{});var F=this.options;F.raw&&0<F.windowBits?F.windowBits=-F.windowBits:F.gzip&&0<F.windowBits&&F.windowBits<16&&(F.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var j=d.deflateInit2(this.strm,F.level,F.method,F.windowBits,F.memLevel,F.strategy);if(j!==I)throw new Error(g[j]);if(F.header&&d.deflateSetHeader(this.strm,F.header),F.dictionary){var G;if(G=typeof F.dictionary=="string"?o.string2buf(F.dictionary):C.call(F.dictionary)==="[object ArrayBuffer]"?new Uint8Array(F.dictionary):F.dictionary,(j=d.deflateSetDictionary(this.strm,G))!==I)throw new Error(g[j]);this._dict_set=!0}}function B(V,F){var j=new R(F);if(j.push(V,!0),j.err)throw j.msg||g[j.err];return j.result}R.prototype.push=function(V,F){var j,G,Q=this.strm,nt=this.options.chunkSize;if(this.ended)return!1;G=F===~~F?F:F===!0?4:0,typeof V=="string"?Q.input=o.string2buf(V):C.call(V)==="[object ArrayBuffer]"?Q.input=new Uint8Array(V):Q.input=V,Q.next_in=0,Q.avail_in=Q.input.length;do{if(Q.avail_out===0&&(Q.output=new l.Buf8(nt),Q.next_out=0,Q.avail_out=nt),(j=d.deflate(Q,G))!==1&&j!==I)return this.onEnd(j),!(this.ended=!0);Q.avail_out!==0&&(Q.avail_in!==0||G!==4&&G!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(l.shrinkBuf(Q.output,Q.next_out))):this.onData(l.shrinkBuf(Q.output,Q.next_out)))}while((0<Q.avail_in||Q.avail_out===0)&&j!==1);return G===4?(j=d.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===I):G!==2||(this.onEnd(I),!(Q.avail_out=0))},R.prototype.onData=function(V){this.chunks.push(V)},R.prototype.onEnd=function(V){V===I&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=V,this.msg=this.strm.msg},s.Deflate=R,s.deflate=B,s.deflateRaw=function(V,F){return(F=F||{}).raw=!0,B(V,F)},s.gzip=function(V,F){return(F=F||{}).gzip=!0,B(V,F)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,a,s){var d=n("./zlib/inflate"),l=n("./utils/common"),o=n("./utils/strings"),g=n("./zlib/constants"),_=n("./zlib/messages"),C=n("./zlib/zstream"),I=n("./zlib/gzheader"),E=Object.prototype.toString;function S(R){if(!(this instanceof S))return new S(R);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},R||{});var B=this.options;B.raw&&0<=B.windowBits&&B.windowBits<16&&(B.windowBits=-B.windowBits,B.windowBits===0&&(B.windowBits=-15)),!(0<=B.windowBits&&B.windowBits<16)||R&&R.windowBits||(B.windowBits+=32),15<B.windowBits&&B.windowBits<48&&!(15&B.windowBits)&&(B.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C,this.strm.avail_out=0;var V=d.inflateInit2(this.strm,B.windowBits);if(V!==g.Z_OK)throw new Error(_[V]);this.header=new I,d.inflateGetHeader(this.strm,this.header)}function k(R,B){var V=new S(B);if(V.push(R,!0),V.err)throw V.msg||_[V.err];return V.result}S.prototype.push=function(R,B){var V,F,j,G,Q,nt,X=this.strm,K=this.options.chunkSize,Z=this.options.dictionary,at=!1;if(this.ended)return!1;F=B===~~B?B:B===!0?g.Z_FINISH:g.Z_NO_FLUSH,typeof R=="string"?X.input=o.binstring2buf(R):E.call(R)==="[object ArrayBuffer]"?X.input=new Uint8Array(R):X.input=R,X.next_in=0,X.avail_in=X.input.length;do{if(X.avail_out===0&&(X.output=new l.Buf8(K),X.next_out=0,X.avail_out=K),(V=d.inflate(X,g.Z_NO_FLUSH))===g.Z_NEED_DICT&&Z&&(nt=typeof Z=="string"?o.string2buf(Z):E.call(Z)==="[object ArrayBuffer]"?new Uint8Array(Z):Z,V=d.inflateSetDictionary(this.strm,nt)),V===g.Z_BUF_ERROR&&at===!0&&(V=g.Z_OK,at=!1),V!==g.Z_STREAM_END&&V!==g.Z_OK)return this.onEnd(V),!(this.ended=!0);X.next_out&&(X.avail_out!==0&&V!==g.Z_STREAM_END&&(X.avail_in!==0||F!==g.Z_FINISH&&F!==g.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=o.utf8border(X.output,X.next_out),G=X.next_out-j,Q=o.buf2string(X.output,j),X.next_out=G,X.avail_out=K-G,G&&l.arraySet(X.output,X.output,j,G,0),this.onData(Q)):this.onData(l.shrinkBuf(X.output,X.next_out)))),X.avail_in===0&&X.avail_out===0&&(at=!0)}while((0<X.avail_in||X.avail_out===0)&&V!==g.Z_STREAM_END);return V===g.Z_STREAM_END&&(F=g.Z_FINISH),F===g.Z_FINISH?(V=d.inflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===g.Z_OK):F!==g.Z_SYNC_FLUSH||(this.onEnd(g.Z_OK),!(X.avail_out=0))},S.prototype.onData=function(R){this.chunks.push(R)},S.prototype.onEnd=function(R){R===g.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=R,this.msg=this.strm.msg},s.Inflate=S,s.inflate=k,s.inflateRaw=function(R,B){return(B=B||{}).raw=!0,k(R,B)},s.ungzip=k},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,a,s){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(g){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var C=_.shift();if(C){if(typeof C!="object")throw new TypeError(C+"must be non-object");for(var I in C)C.hasOwnProperty(I)&&(g[I]=C[I])}}return g},s.shrinkBuf=function(g,_){return g.length===_?g:g.subarray?g.subarray(0,_):(g.length=_,g)};var l={arraySet:function(g,_,C,I,E){if(_.subarray&&g.subarray)g.set(_.subarray(C,C+I),E);else for(var S=0;S<I;S++)g[E+S]=_[C+S]},flattenChunks:function(g){var _,C,I,E,S,k;for(_=I=0,C=g.length;_<C;_++)I+=g[_].length;for(k=new Uint8Array(I),_=E=0,C=g.length;_<C;_++)S=g[_],k.set(S,E),E+=S.length;return k}},o={arraySet:function(g,_,C,I,E){for(var S=0;S<I;S++)g[E+S]=_[C+S]},flattenChunks:function(g){return[].concat.apply([],g)}};s.setTyped=function(g){g?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,l)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,o))},s.setTyped(d)},{}],42:[function(n,a,s){var d=n("./common"),l=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var g=new d.Buf8(256),_=0;_<256;_++)g[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function C(I,E){if(E<65537&&(I.subarray&&o||!I.subarray&&l))return String.fromCharCode.apply(null,d.shrinkBuf(I,E));for(var S="",k=0;k<E;k++)S+=String.fromCharCode(I[k]);return S}g[254]=g[254]=1,s.string2buf=function(I){var E,S,k,R,B,V=I.length,F=0;for(R=0;R<V;R++)(64512&(S=I.charCodeAt(R)))==55296&&R+1<V&&(64512&(k=I.charCodeAt(R+1)))==56320&&(S=65536+(S-55296<<10)+(k-56320),R++),F+=S<128?1:S<2048?2:S<65536?3:4;for(E=new d.Buf8(F),R=B=0;B<F;R++)(64512&(S=I.charCodeAt(R)))==55296&&R+1<V&&(64512&(k=I.charCodeAt(R+1)))==56320&&(S=65536+(S-55296<<10)+(k-56320),R++),S<128?E[B++]=S:(S<2048?E[B++]=192|S>>>6:(S<65536?E[B++]=224|S>>>12:(E[B++]=240|S>>>18,E[B++]=128|S>>>12&63),E[B++]=128|S>>>6&63),E[B++]=128|63&S);return E},s.buf2binstring=function(I){return C(I,I.length)},s.binstring2buf=function(I){for(var E=new d.Buf8(I.length),S=0,k=E.length;S<k;S++)E[S]=I.charCodeAt(S);return E},s.buf2string=function(I,E){var S,k,R,B,V=E||I.length,F=new Array(2*V);for(S=k=0;S<V;)if((R=I[S++])<128)F[k++]=R;else if(4<(B=g[R]))F[k++]=65533,S+=B-1;else{for(R&=B===2?31:B===3?15:7;1<B&&S<V;)R=R<<6|63&I[S++],B--;1<B?F[k++]=65533:R<65536?F[k++]=R:(R-=65536,F[k++]=55296|R>>10&1023,F[k++]=56320|1023&R)}return C(F,k)},s.utf8border=function(I,E){var S;for((E=E||I.length)>I.length&&(E=I.length),S=E-1;0<=S&&(192&I[S])==128;)S--;return S<0||S===0?E:S+g[I[S]]>E?S:E}},{"./common":41}],43:[function(n,a,s){a.exports=function(d,l,o,g){for(var _=65535&d|0,C=d>>>16&65535|0,I=0;o!==0;){for(o-=I=2e3<o?2e3:o;C=C+(_=_+l[g++]|0)|0,--I;);_%=65521,C%=65521}return _|C<<16|0}},{}],44:[function(n,a,s){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,a,s){var d=function(){for(var l,o=[],g=0;g<256;g++){l=g;for(var _=0;_<8;_++)l=1&l?3988292384^l>>>1:l>>>1;o[g]=l}return o}();a.exports=function(l,o,g,_){var C=d,I=_+g;l^=-1;for(var E=_;E<I;E++)l=l>>>8^C[255&(l^o[E])];return-1^l}},{}],46:[function(n,a,s){var d,l=n("../utils/common"),o=n("./trees"),g=n("./adler32"),_=n("./crc32"),C=n("./messages"),I=0,E=4,S=0,k=-2,R=-1,B=4,V=2,F=8,j=9,G=286,Q=30,nt=19,X=2*G+1,K=15,Z=3,at=258,pt=at+Z+1,rt=42,xt=113,q=1,zt=2,Rt=3,Bt=4;function Xt(H,Dt){return H.msg=C[Dt],Dt}function ge(H){return(H<<1)-(4<H?9:0)}function en(H){for(var Dt=H.length;0<=--Dt;)H[Dt]=0}function te(H){var Dt=H.state,Pt=Dt.pending;Pt>H.avail_out&&(Pt=H.avail_out),Pt!==0&&(l.arraySet(H.output,Dt.pending_buf,Dt.pending_out,Pt,H.next_out),H.next_out+=Pt,Dt.pending_out+=Pt,H.total_out+=Pt,H.avail_out-=Pt,Dt.pending-=Pt,Dt.pending===0&&(Dt.pending_out=0))}function Gt(H,Dt){o._tr_flush_block(H,0<=H.block_start?H.block_start:-1,H.strstart-H.block_start,Dt),H.block_start=H.strstart,te(H.strm)}function Re(H,Dt){H.pending_buf[H.pending++]=Dt}function Ge(H,Dt){H.pending_buf[H.pending++]=Dt>>>8&255,H.pending_buf[H.pending++]=255&Dt}function Ce(H,Dt){var Pt,yt,vt=H.max_chain_length,Ut=H.strstart,ne=H.prev_length,ue=H.nice_match,Ht=H.strstart>H.w_size-pt?H.strstart-(H.w_size-pt):0,Me=H.window,je=H.w_mask,Le=H.prev,Ke=H.strstart+at,bn=Me[Ut+ne-1],Cn=Me[Ut+ne];H.prev_length>=H.good_match&&(vt>>=2),ue>H.lookahead&&(ue=H.lookahead);do if(Me[(Pt=Dt)+ne]===Cn&&Me[Pt+ne-1]===bn&&Me[Pt]===Me[Ut]&&Me[++Pt]===Me[Ut+1]){Ut+=2,Pt++;do;while(Me[++Ut]===Me[++Pt]&&Me[++Ut]===Me[++Pt]&&Me[++Ut]===Me[++Pt]&&Me[++Ut]===Me[++Pt]&&Me[++Ut]===Me[++Pt]&&Me[++Ut]===Me[++Pt]&&Me[++Ut]===Me[++Pt]&&Me[++Ut]===Me[++Pt]&&Ut<Ke);if(yt=at-(Ke-Ut),Ut=Ke-at,ne<yt){if(H.match_start=Dt,ue<=(ne=yt))break;bn=Me[Ut+ne-1],Cn=Me[Ut+ne]}}while((Dt=Le[Dt&je])>Ht&&--vt!=0);return ne<=H.lookahead?ne:H.lookahead}function nn(H){var Dt,Pt,yt,vt,Ut,ne,ue,Ht,Me,je,Le=H.w_size;do{if(vt=H.window_size-H.lookahead-H.strstart,H.strstart>=Le+(Le-pt)){for(l.arraySet(H.window,H.window,Le,Le,0),H.match_start-=Le,H.strstart-=Le,H.block_start-=Le,Dt=Pt=H.hash_size;yt=H.head[--Dt],H.head[Dt]=Le<=yt?yt-Le:0,--Pt;);for(Dt=Pt=Le;yt=H.prev[--Dt],H.prev[Dt]=Le<=yt?yt-Le:0,--Pt;);vt+=Le}if(H.strm.avail_in===0)break;if(ne=H.strm,ue=H.window,Ht=H.strstart+H.lookahead,Me=vt,je=void 0,je=ne.avail_in,Me<je&&(je=Me),Pt=je===0?0:(ne.avail_in-=je,l.arraySet(ue,ne.input,ne.next_in,je,Ht),ne.state.wrap===1?ne.adler=g(ne.adler,ue,je,Ht):ne.state.wrap===2&&(ne.adler=_(ne.adler,ue,je,Ht)),ne.next_in+=je,ne.total_in+=je,je),H.lookahead+=Pt,H.lookahead+H.insert>=Z)for(Ut=H.strstart-H.insert,H.ins_h=H.window[Ut],H.ins_h=(H.ins_h<<H.hash_shift^H.window[Ut+1])&H.hash_mask;H.insert&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[Ut+Z-1])&H.hash_mask,H.prev[Ut&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=Ut,Ut++,H.insert--,!(H.lookahead+H.insert<Z)););}while(H.lookahead<pt&&H.strm.avail_in!==0)}function be(H,Dt){for(var Pt,yt;;){if(H.lookahead<pt){if(nn(H),H.lookahead<pt&&Dt===I)return q;if(H.lookahead===0)break}if(Pt=0,H.lookahead>=Z&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+Z-1])&H.hash_mask,Pt=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),Pt!==0&&H.strstart-Pt<=H.w_size-pt&&(H.match_length=Ce(H,Pt)),H.match_length>=Z)if(yt=o._tr_tally(H,H.strstart-H.match_start,H.match_length-Z),H.lookahead-=H.match_length,H.match_length<=H.max_lazy_match&&H.lookahead>=Z){for(H.match_length--;H.strstart++,H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+Z-1])&H.hash_mask,Pt=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart,--H.match_length!=0;);H.strstart++}else H.strstart+=H.match_length,H.match_length=0,H.ins_h=H.window[H.strstart],H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+1])&H.hash_mask;else yt=o._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++;if(yt&&(Gt(H,!1),H.strm.avail_out===0))return q}return H.insert=H.strstart<Z-1?H.strstart:Z-1,Dt===E?(Gt(H,!0),H.strm.avail_out===0?Rt:Bt):H.last_lit&&(Gt(H,!1),H.strm.avail_out===0)?q:zt}function Se(H,Dt){for(var Pt,yt,vt;;){if(H.lookahead<pt){if(nn(H),H.lookahead<pt&&Dt===I)return q;if(H.lookahead===0)break}if(Pt=0,H.lookahead>=Z&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+Z-1])&H.hash_mask,Pt=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),H.prev_length=H.match_length,H.prev_match=H.match_start,H.match_length=Z-1,Pt!==0&&H.prev_length<H.max_lazy_match&&H.strstart-Pt<=H.w_size-pt&&(H.match_length=Ce(H,Pt),H.match_length<=5&&(H.strategy===1||H.match_length===Z&&4096<H.strstart-H.match_start)&&(H.match_length=Z-1)),H.prev_length>=Z&&H.match_length<=H.prev_length){for(vt=H.strstart+H.lookahead-Z,yt=o._tr_tally(H,H.strstart-1-H.prev_match,H.prev_length-Z),H.lookahead-=H.prev_length-1,H.prev_length-=2;++H.strstart<=vt&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+Z-1])&H.hash_mask,Pt=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),--H.prev_length!=0;);if(H.match_available=0,H.match_length=Z-1,H.strstart++,yt&&(Gt(H,!1),H.strm.avail_out===0))return q}else if(H.match_available){if((yt=o._tr_tally(H,0,H.window[H.strstart-1]))&&Gt(H,!1),H.strstart++,H.lookahead--,H.strm.avail_out===0)return q}else H.match_available=1,H.strstart++,H.lookahead--}return H.match_available&&(yt=o._tr_tally(H,0,H.window[H.strstart-1]),H.match_available=0),H.insert=H.strstart<Z-1?H.strstart:Z-1,Dt===E?(Gt(H,!0),H.strm.avail_out===0?Rt:Bt):H.last_lit&&(Gt(H,!1),H.strm.avail_out===0)?q:zt}function xe(H,Dt,Pt,yt,vt){this.good_length=H,this.max_lazy=Dt,this.nice_length=Pt,this.max_chain=yt,this.func=vt}function Be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=F,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*X),this.dyn_dtree=new l.Buf16(2*(2*Q+1)),this.bl_tree=new l.Buf16(2*(2*nt+1)),en(this.dyn_ltree),en(this.dyn_dtree),en(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(K+1),this.heap=new l.Buf16(2*G+1),en(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*G+1),en(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function tn(H){var Dt;return H&&H.state?(H.total_in=H.total_out=0,H.data_type=V,(Dt=H.state).pending=0,Dt.pending_out=0,Dt.wrap<0&&(Dt.wrap=-Dt.wrap),Dt.status=Dt.wrap?rt:xt,H.adler=Dt.wrap===2?0:1,Dt.last_flush=I,o._tr_init(Dt),S):Xt(H,k)}function Ln(H){var Dt=tn(H);return Dt===S&&function(Pt){Pt.window_size=2*Pt.w_size,en(Pt.head),Pt.max_lazy_match=d[Pt.level].max_lazy,Pt.good_match=d[Pt.level].good_length,Pt.nice_match=d[Pt.level].nice_length,Pt.max_chain_length=d[Pt.level].max_chain,Pt.strstart=0,Pt.block_start=0,Pt.lookahead=0,Pt.insert=0,Pt.match_length=Pt.prev_length=Z-1,Pt.match_available=0,Pt.ins_h=0}(H.state),Dt}function Tt(H,Dt,Pt,yt,vt,Ut){if(!H)return k;var ne=1;if(Dt===R&&(Dt=6),yt<0?(ne=0,yt=-yt):15<yt&&(ne=2,yt-=16),vt<1||j<vt||Pt!==F||yt<8||15<yt||Dt<0||9<Dt||Ut<0||B<Ut)return Xt(H,k);yt===8&&(yt=9);var ue=new Be;return(H.state=ue).strm=H,ue.wrap=ne,ue.gzhead=null,ue.w_bits=yt,ue.w_size=1<<ue.w_bits,ue.w_mask=ue.w_size-1,ue.hash_bits=vt+7,ue.hash_size=1<<ue.hash_bits,ue.hash_mask=ue.hash_size-1,ue.hash_shift=~~((ue.hash_bits+Z-1)/Z),ue.window=new l.Buf8(2*ue.w_size),ue.head=new l.Buf16(ue.hash_size),ue.prev=new l.Buf16(ue.w_size),ue.lit_bufsize=1<<vt+6,ue.pending_buf_size=4*ue.lit_bufsize,ue.pending_buf=new l.Buf8(ue.pending_buf_size),ue.d_buf=1*ue.lit_bufsize,ue.l_buf=3*ue.lit_bufsize,ue.level=Dt,ue.strategy=Ut,ue.method=Pt,Ln(H)}d=[new xe(0,0,0,0,function(H,Dt){var Pt=65535;for(Pt>H.pending_buf_size-5&&(Pt=H.pending_buf_size-5);;){if(H.lookahead<=1){if(nn(H),H.lookahead===0&&Dt===I)return q;if(H.lookahead===0)break}H.strstart+=H.lookahead,H.lookahead=0;var yt=H.block_start+Pt;if((H.strstart===0||H.strstart>=yt)&&(H.lookahead=H.strstart-yt,H.strstart=yt,Gt(H,!1),H.strm.avail_out===0)||H.strstart-H.block_start>=H.w_size-pt&&(Gt(H,!1),H.strm.avail_out===0))return q}return H.insert=0,Dt===E?(Gt(H,!0),H.strm.avail_out===0?Rt:Bt):(H.strstart>H.block_start&&(Gt(H,!1),H.strm.avail_out),q)}),new xe(4,4,8,4,be),new xe(4,5,16,8,be),new xe(4,6,32,32,be),new xe(4,4,16,16,Se),new xe(8,16,32,32,Se),new xe(8,16,128,128,Se),new xe(8,32,128,256,Se),new xe(32,128,258,1024,Se),new xe(32,258,258,4096,Se)],s.deflateInit=function(H,Dt){return Tt(H,Dt,F,15,8,0)},s.deflateInit2=Tt,s.deflateReset=Ln,s.deflateResetKeep=tn,s.deflateSetHeader=function(H,Dt){return H&&H.state?H.state.wrap!==2?k:(H.state.gzhead=Dt,S):k},s.deflate=function(H,Dt){var Pt,yt,vt,Ut;if(!H||!H.state||5<Dt||Dt<0)return H?Xt(H,k):k;if(yt=H.state,!H.output||!H.input&&H.avail_in!==0||yt.status===666&&Dt!==E)return Xt(H,H.avail_out===0?-5:k);if(yt.strm=H,Pt=yt.last_flush,yt.last_flush=Dt,yt.status===rt)if(yt.wrap===2)H.adler=0,Re(yt,31),Re(yt,139),Re(yt,8),yt.gzhead?(Re(yt,(yt.gzhead.text?1:0)+(yt.gzhead.hcrc?2:0)+(yt.gzhead.extra?4:0)+(yt.gzhead.name?8:0)+(yt.gzhead.comment?16:0)),Re(yt,255&yt.gzhead.time),Re(yt,yt.gzhead.time>>8&255),Re(yt,yt.gzhead.time>>16&255),Re(yt,yt.gzhead.time>>24&255),Re(yt,yt.level===9?2:2<=yt.strategy||yt.level<2?4:0),Re(yt,255&yt.gzhead.os),yt.gzhead.extra&&yt.gzhead.extra.length&&(Re(yt,255&yt.gzhead.extra.length),Re(yt,yt.gzhead.extra.length>>8&255)),yt.gzhead.hcrc&&(H.adler=_(H.adler,yt.pending_buf,yt.pending,0)),yt.gzindex=0,yt.status=69):(Re(yt,0),Re(yt,0),Re(yt,0),Re(yt,0),Re(yt,0),Re(yt,yt.level===9?2:2<=yt.strategy||yt.level<2?4:0),Re(yt,3),yt.status=xt);else{var ne=F+(yt.w_bits-8<<4)<<8;ne|=(2<=yt.strategy||yt.level<2?0:yt.level<6?1:yt.level===6?2:3)<<6,yt.strstart!==0&&(ne|=32),ne+=31-ne%31,yt.status=xt,Ge(yt,ne),yt.strstart!==0&&(Ge(yt,H.adler>>>16),Ge(yt,65535&H.adler)),H.adler=1}if(yt.status===69)if(yt.gzhead.extra){for(vt=yt.pending;yt.gzindex<(65535&yt.gzhead.extra.length)&&(yt.pending!==yt.pending_buf_size||(yt.gzhead.hcrc&&yt.pending>vt&&(H.adler=_(H.adler,yt.pending_buf,yt.pending-vt,vt)),te(H),vt=yt.pending,yt.pending!==yt.pending_buf_size));)Re(yt,255&yt.gzhead.extra[yt.gzindex]),yt.gzindex++;yt.gzhead.hcrc&&yt.pending>vt&&(H.adler=_(H.adler,yt.pending_buf,yt.pending-vt,vt)),yt.gzindex===yt.gzhead.extra.length&&(yt.gzindex=0,yt.status=73)}else yt.status=73;if(yt.status===73)if(yt.gzhead.name){vt=yt.pending;do{if(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>vt&&(H.adler=_(H.adler,yt.pending_buf,yt.pending-vt,vt)),te(H),vt=yt.pending,yt.pending===yt.pending_buf_size)){Ut=1;break}Ut=yt.gzindex<yt.gzhead.name.length?255&yt.gzhead.name.charCodeAt(yt.gzindex++):0,Re(yt,Ut)}while(Ut!==0);yt.gzhead.hcrc&&yt.pending>vt&&(H.adler=_(H.adler,yt.pending_buf,yt.pending-vt,vt)),Ut===0&&(yt.gzindex=0,yt.status=91)}else yt.status=91;if(yt.status===91)if(yt.gzhead.comment){vt=yt.pending;do{if(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>vt&&(H.adler=_(H.adler,yt.pending_buf,yt.pending-vt,vt)),te(H),vt=yt.pending,yt.pending===yt.pending_buf_size)){Ut=1;break}Ut=yt.gzindex<yt.gzhead.comment.length?255&yt.gzhead.comment.charCodeAt(yt.gzindex++):0,Re(yt,Ut)}while(Ut!==0);yt.gzhead.hcrc&&yt.pending>vt&&(H.adler=_(H.adler,yt.pending_buf,yt.pending-vt,vt)),Ut===0&&(yt.status=103)}else yt.status=103;if(yt.status===103&&(yt.gzhead.hcrc?(yt.pending+2>yt.pending_buf_size&&te(H),yt.pending+2<=yt.pending_buf_size&&(Re(yt,255&H.adler),Re(yt,H.adler>>8&255),H.adler=0,yt.status=xt)):yt.status=xt),yt.pending!==0){if(te(H),H.avail_out===0)return yt.last_flush=-1,S}else if(H.avail_in===0&&ge(Dt)<=ge(Pt)&&Dt!==E)return Xt(H,-5);if(yt.status===666&&H.avail_in!==0)return Xt(H,-5);if(H.avail_in!==0||yt.lookahead!==0||Dt!==I&&yt.status!==666){var ue=yt.strategy===2?function(Ht,Me){for(var je;;){if(Ht.lookahead===0&&(nn(Ht),Ht.lookahead===0)){if(Me===I)return q;break}if(Ht.match_length=0,je=o._tr_tally(Ht,0,Ht.window[Ht.strstart]),Ht.lookahead--,Ht.strstart++,je&&(Gt(Ht,!1),Ht.strm.avail_out===0))return q}return Ht.insert=0,Me===E?(Gt(Ht,!0),Ht.strm.avail_out===0?Rt:Bt):Ht.last_lit&&(Gt(Ht,!1),Ht.strm.avail_out===0)?q:zt}(yt,Dt):yt.strategy===3?function(Ht,Me){for(var je,Le,Ke,bn,Cn=Ht.window;;){if(Ht.lookahead<=at){if(nn(Ht),Ht.lookahead<=at&&Me===I)return q;if(Ht.lookahead===0)break}if(Ht.match_length=0,Ht.lookahead>=Z&&0<Ht.strstart&&(Le=Cn[Ke=Ht.strstart-1])===Cn[++Ke]&&Le===Cn[++Ke]&&Le===Cn[++Ke]){bn=Ht.strstart+at;do;while(Le===Cn[++Ke]&&Le===Cn[++Ke]&&Le===Cn[++Ke]&&Le===Cn[++Ke]&&Le===Cn[++Ke]&&Le===Cn[++Ke]&&Le===Cn[++Ke]&&Le===Cn[++Ke]&&Ke<bn);Ht.match_length=at-(bn-Ke),Ht.match_length>Ht.lookahead&&(Ht.match_length=Ht.lookahead)}if(Ht.match_length>=Z?(je=o._tr_tally(Ht,1,Ht.match_length-Z),Ht.lookahead-=Ht.match_length,Ht.strstart+=Ht.match_length,Ht.match_length=0):(je=o._tr_tally(Ht,0,Ht.window[Ht.strstart]),Ht.lookahead--,Ht.strstart++),je&&(Gt(Ht,!1),Ht.strm.avail_out===0))return q}return Ht.insert=0,Me===E?(Gt(Ht,!0),Ht.strm.avail_out===0?Rt:Bt):Ht.last_lit&&(Gt(Ht,!1),Ht.strm.avail_out===0)?q:zt}(yt,Dt):d[yt.level].func(yt,Dt);if(ue!==Rt&&ue!==Bt||(yt.status=666),ue===q||ue===Rt)return H.avail_out===0&&(yt.last_flush=-1),S;if(ue===zt&&(Dt===1?o._tr_align(yt):Dt!==5&&(o._tr_stored_block(yt,0,0,!1),Dt===3&&(en(yt.head),yt.lookahead===0&&(yt.strstart=0,yt.block_start=0,yt.insert=0))),te(H),H.avail_out===0))return yt.last_flush=-1,S}return Dt!==E?S:yt.wrap<=0?1:(yt.wrap===2?(Re(yt,255&H.adler),Re(yt,H.adler>>8&255),Re(yt,H.adler>>16&255),Re(yt,H.adler>>24&255),Re(yt,255&H.total_in),Re(yt,H.total_in>>8&255),Re(yt,H.total_in>>16&255),Re(yt,H.total_in>>24&255)):(Ge(yt,H.adler>>>16),Ge(yt,65535&H.adler)),te(H),0<yt.wrap&&(yt.wrap=-yt.wrap),yt.pending!==0?S:1)},s.deflateEnd=function(H){var Dt;return H&&H.state?(Dt=H.state.status)!==rt&&Dt!==69&&Dt!==73&&Dt!==91&&Dt!==103&&Dt!==xt&&Dt!==666?Xt(H,k):(H.state=null,Dt===xt?Xt(H,-3):S):k},s.deflateSetDictionary=function(H,Dt){var Pt,yt,vt,Ut,ne,ue,Ht,Me,je=Dt.length;if(!H||!H.state||(Ut=(Pt=H.state).wrap)===2||Ut===1&&Pt.status!==rt||Pt.lookahead)return k;for(Ut===1&&(H.adler=g(H.adler,Dt,je,0)),Pt.wrap=0,je>=Pt.w_size&&(Ut===0&&(en(Pt.head),Pt.strstart=0,Pt.block_start=0,Pt.insert=0),Me=new l.Buf8(Pt.w_size),l.arraySet(Me,Dt,je-Pt.w_size,Pt.w_size,0),Dt=Me,je=Pt.w_size),ne=H.avail_in,ue=H.next_in,Ht=H.input,H.avail_in=je,H.next_in=0,H.input=Dt,nn(Pt);Pt.lookahead>=Z;){for(yt=Pt.strstart,vt=Pt.lookahead-(Z-1);Pt.ins_h=(Pt.ins_h<<Pt.hash_shift^Pt.window[yt+Z-1])&Pt.hash_mask,Pt.prev[yt&Pt.w_mask]=Pt.head[Pt.ins_h],Pt.head[Pt.ins_h]=yt,yt++,--vt;);Pt.strstart=yt,Pt.lookahead=Z-1,nn(Pt)}return Pt.strstart+=Pt.lookahead,Pt.block_start=Pt.strstart,Pt.insert=Pt.lookahead,Pt.lookahead=0,Pt.match_length=Pt.prev_length=Z-1,Pt.match_available=0,H.next_in=ue,H.input=Ht,H.avail_in=ne,Pt.wrap=Ut,S},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,a,s){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,a,s){a.exports=function(d,l){var o,g,_,C,I,E,S,k,R,B,V,F,j,G,Q,nt,X,K,Z,at,pt,rt,xt,q,zt;o=d.state,g=d.next_in,q=d.input,_=g+(d.avail_in-5),C=d.next_out,zt=d.output,I=C-(l-d.avail_out),E=C+(d.avail_out-257),S=o.dmax,k=o.wsize,R=o.whave,B=o.wnext,V=o.window,F=o.hold,j=o.bits,G=o.lencode,Q=o.distcode,nt=(1<<o.lenbits)-1,X=(1<<o.distbits)-1;t:do{j<15&&(F+=q[g++]<<j,j+=8,F+=q[g++]<<j,j+=8),K=G[F&nt];e:for(;;){if(F>>>=Z=K>>>24,j-=Z,(Z=K>>>16&255)===0)zt[C++]=65535&K;else{if(!(16&Z)){if(!(64&Z)){K=G[(65535&K)+(F&(1<<Z)-1)];continue e}if(32&Z){o.mode=12;break t}d.msg="invalid literal/length code",o.mode=30;break t}at=65535&K,(Z&=15)&&(j<Z&&(F+=q[g++]<<j,j+=8),at+=F&(1<<Z)-1,F>>>=Z,j-=Z),j<15&&(F+=q[g++]<<j,j+=8,F+=q[g++]<<j,j+=8),K=Q[F&X];n:for(;;){if(F>>>=Z=K>>>24,j-=Z,!(16&(Z=K>>>16&255))){if(!(64&Z)){K=Q[(65535&K)+(F&(1<<Z)-1)];continue n}d.msg="invalid distance code",o.mode=30;break t}if(pt=65535&K,j<(Z&=15)&&(F+=q[g++]<<j,(j+=8)<Z&&(F+=q[g++]<<j,j+=8)),S<(pt+=F&(1<<Z)-1)){d.msg="invalid distance too far back",o.mode=30;break t}if(F>>>=Z,j-=Z,(Z=C-I)<pt){if(R<(Z=pt-Z)&&o.sane){d.msg="invalid distance too far back",o.mode=30;break t}if(xt=V,(rt=0)===B){if(rt+=k-Z,Z<at){for(at-=Z;zt[C++]=V[rt++],--Z;);rt=C-pt,xt=zt}}else if(B<Z){if(rt+=k+B-Z,(Z-=B)<at){for(at-=Z;zt[C++]=V[rt++],--Z;);if(rt=0,B<at){for(at-=Z=B;zt[C++]=V[rt++],--Z;);rt=C-pt,xt=zt}}}else if(rt+=B-Z,Z<at){for(at-=Z;zt[C++]=V[rt++],--Z;);rt=C-pt,xt=zt}for(;2<at;)zt[C++]=xt[rt++],zt[C++]=xt[rt++],zt[C++]=xt[rt++],at-=3;at&&(zt[C++]=xt[rt++],1<at&&(zt[C++]=xt[rt++]))}else{for(rt=C-pt;zt[C++]=zt[rt++],zt[C++]=zt[rt++],zt[C++]=zt[rt++],2<(at-=3););at&&(zt[C++]=zt[rt++],1<at&&(zt[C++]=zt[rt++]))}break}}break}}while(g<_&&C<E);g-=at=j>>3,F&=(1<<(j-=at<<3))-1,d.next_in=g,d.next_out=C,d.avail_in=g<_?_-g+5:5-(g-_),d.avail_out=C<E?E-C+257:257-(C-E),o.hold=F,o.bits=j}},{}],49:[function(n,a,s){var d=n("../utils/common"),l=n("./adler32"),o=n("./crc32"),g=n("./inffast"),_=n("./inftrees"),C=1,I=2,E=0,S=-2,k=1,R=852,B=592;function V(rt){return(rt>>>24&255)+(rt>>>8&65280)+((65280&rt)<<8)+((255&rt)<<24)}function F(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(rt){var xt;return rt&&rt.state?(xt=rt.state,rt.total_in=rt.total_out=xt.total=0,rt.msg="",xt.wrap&&(rt.adler=1&xt.wrap),xt.mode=k,xt.last=0,xt.havedict=0,xt.dmax=32768,xt.head=null,xt.hold=0,xt.bits=0,xt.lencode=xt.lendyn=new d.Buf32(R),xt.distcode=xt.distdyn=new d.Buf32(B),xt.sane=1,xt.back=-1,E):S}function G(rt){var xt;return rt&&rt.state?((xt=rt.state).wsize=0,xt.whave=0,xt.wnext=0,j(rt)):S}function Q(rt,xt){var q,zt;return rt&&rt.state?(zt=rt.state,xt<0?(q=0,xt=-xt):(q=1+(xt>>4),xt<48&&(xt&=15)),xt&&(xt<8||15<xt)?S:(zt.window!==null&&zt.wbits!==xt&&(zt.window=null),zt.wrap=q,zt.wbits=xt,G(rt))):S}function nt(rt,xt){var q,zt;return rt?(zt=new F,(rt.state=zt).window=null,(q=Q(rt,xt))!==E&&(rt.state=null),q):S}var X,K,Z=!0;function at(rt){if(Z){var xt;for(X=new d.Buf32(512),K=new d.Buf32(32),xt=0;xt<144;)rt.lens[xt++]=8;for(;xt<256;)rt.lens[xt++]=9;for(;xt<280;)rt.lens[xt++]=7;for(;xt<288;)rt.lens[xt++]=8;for(_(C,rt.lens,0,288,X,0,rt.work,{bits:9}),xt=0;xt<32;)rt.lens[xt++]=5;_(I,rt.lens,0,32,K,0,rt.work,{bits:5}),Z=!1}rt.lencode=X,rt.lenbits=9,rt.distcode=K,rt.distbits=5}function pt(rt,xt,q,zt){var Rt,Bt=rt.state;return Bt.window===null&&(Bt.wsize=1<<Bt.wbits,Bt.wnext=0,Bt.whave=0,Bt.window=new d.Buf8(Bt.wsize)),zt>=Bt.wsize?(d.arraySet(Bt.window,xt,q-Bt.wsize,Bt.wsize,0),Bt.wnext=0,Bt.whave=Bt.wsize):(zt<(Rt=Bt.wsize-Bt.wnext)&&(Rt=zt),d.arraySet(Bt.window,xt,q-zt,Rt,Bt.wnext),(zt-=Rt)?(d.arraySet(Bt.window,xt,q-zt,zt,0),Bt.wnext=zt,Bt.whave=Bt.wsize):(Bt.wnext+=Rt,Bt.wnext===Bt.wsize&&(Bt.wnext=0),Bt.whave<Bt.wsize&&(Bt.whave+=Rt))),0}s.inflateReset=G,s.inflateReset2=Q,s.inflateResetKeep=j,s.inflateInit=function(rt){return nt(rt,15)},s.inflateInit2=nt,s.inflate=function(rt,xt){var q,zt,Rt,Bt,Xt,ge,en,te,Gt,Re,Ge,Ce,nn,be,Se,xe,Be,tn,Ln,Tt,H,Dt,Pt,yt,vt=0,Ut=new d.Buf8(4),ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!rt||!rt.state||!rt.output||!rt.input&&rt.avail_in!==0)return S;(q=rt.state).mode===12&&(q.mode=13),Xt=rt.next_out,Rt=rt.output,en=rt.avail_out,Bt=rt.next_in,zt=rt.input,ge=rt.avail_in,te=q.hold,Gt=q.bits,Re=ge,Ge=en,Dt=E;t:for(;;)switch(q.mode){case k:if(q.wrap===0){q.mode=13;break}for(;Gt<16;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}if(2&q.wrap&&te===35615){Ut[q.check=0]=255&te,Ut[1]=te>>>8&255,q.check=o(q.check,Ut,2,0),Gt=te=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&te)<<8)+(te>>8))%31){rt.msg="incorrect header check",q.mode=30;break}if((15&te)!=8){rt.msg="unknown compression method",q.mode=30;break}if(Gt-=4,H=8+(15&(te>>>=4)),q.wbits===0)q.wbits=H;else if(H>q.wbits){rt.msg="invalid window size",q.mode=30;break}q.dmax=1<<H,rt.adler=q.check=1,q.mode=512&te?10:12,Gt=te=0;break;case 2:for(;Gt<16;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}if(q.flags=te,(255&q.flags)!=8){rt.msg="unknown compression method",q.mode=30;break}if(57344&q.flags){rt.msg="unknown header flags set",q.mode=30;break}q.head&&(q.head.text=te>>8&1),512&q.flags&&(Ut[0]=255&te,Ut[1]=te>>>8&255,q.check=o(q.check,Ut,2,0)),Gt=te=0,q.mode=3;case 3:for(;Gt<32;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}q.head&&(q.head.time=te),512&q.flags&&(Ut[0]=255&te,Ut[1]=te>>>8&255,Ut[2]=te>>>16&255,Ut[3]=te>>>24&255,q.check=o(q.check,Ut,4,0)),Gt=te=0,q.mode=4;case 4:for(;Gt<16;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}q.head&&(q.head.xflags=255&te,q.head.os=te>>8),512&q.flags&&(Ut[0]=255&te,Ut[1]=te>>>8&255,q.check=o(q.check,Ut,2,0)),Gt=te=0,q.mode=5;case 5:if(1024&q.flags){for(;Gt<16;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}q.length=te,q.head&&(q.head.extra_len=te),512&q.flags&&(Ut[0]=255&te,Ut[1]=te>>>8&255,q.check=o(q.check,Ut,2,0)),Gt=te=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&(ge<(Ce=q.length)&&(Ce=ge),Ce&&(q.head&&(H=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),d.arraySet(q.head.extra,zt,Bt,Ce,H)),512&q.flags&&(q.check=o(q.check,zt,Ce,Bt)),ge-=Ce,Bt+=Ce,q.length-=Ce),q.length))break t;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(ge===0)break t;for(Ce=0;H=zt[Bt+Ce++],q.head&&H&&q.length<65536&&(q.head.name+=String.fromCharCode(H)),H&&Ce<ge;);if(512&q.flags&&(q.check=o(q.check,zt,Ce,Bt)),ge-=Ce,Bt+=Ce,H)break t}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(ge===0)break t;for(Ce=0;H=zt[Bt+Ce++],q.head&&H&&q.length<65536&&(q.head.comment+=String.fromCharCode(H)),H&&Ce<ge;);if(512&q.flags&&(q.check=o(q.check,zt,Ce,Bt)),ge-=Ce,Bt+=Ce,H)break t}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;Gt<16;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}if(te!==(65535&q.check)){rt.msg="header crc mismatch",q.mode=30;break}Gt=te=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),rt.adler=q.check=0,q.mode=12;break;case 10:for(;Gt<32;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}rt.adler=q.check=V(te),Gt=te=0,q.mode=11;case 11:if(q.havedict===0)return rt.next_out=Xt,rt.avail_out=en,rt.next_in=Bt,rt.avail_in=ge,q.hold=te,q.bits=Gt,2;rt.adler=q.check=1,q.mode=12;case 12:if(xt===5||xt===6)break t;case 13:if(q.last){te>>>=7&Gt,Gt-=7&Gt,q.mode=27;break}for(;Gt<3;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}switch(q.last=1&te,Gt-=1,3&(te>>>=1)){case 0:q.mode=14;break;case 1:if(at(q),q.mode=20,xt!==6)break;te>>>=2,Gt-=2;break t;case 2:q.mode=17;break;case 3:rt.msg="invalid block type",q.mode=30}te>>>=2,Gt-=2;break;case 14:for(te>>>=7&Gt,Gt-=7&Gt;Gt<32;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}if((65535&te)!=(te>>>16^65535)){rt.msg="invalid stored block lengths",q.mode=30;break}if(q.length=65535&te,Gt=te=0,q.mode=15,xt===6)break t;case 15:q.mode=16;case 16:if(Ce=q.length){if(ge<Ce&&(Ce=ge),en<Ce&&(Ce=en),Ce===0)break t;d.arraySet(Rt,zt,Bt,Ce,Xt),ge-=Ce,Bt+=Ce,en-=Ce,Xt+=Ce,q.length-=Ce;break}q.mode=12;break;case 17:for(;Gt<14;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}if(q.nlen=257+(31&te),te>>>=5,Gt-=5,q.ndist=1+(31&te),te>>>=5,Gt-=5,q.ncode=4+(15&te),te>>>=4,Gt-=4,286<q.nlen||30<q.ndist){rt.msg="too many length or distance symbols",q.mode=30;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;Gt<3;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}q.lens[ne[q.have++]]=7&te,te>>>=3,Gt-=3}for(;q.have<19;)q.lens[ne[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,Pt={bits:q.lenbits},Dt=_(0,q.lens,0,19,q.lencode,0,q.work,Pt),q.lenbits=Pt.bits,Dt){rt.msg="invalid code lengths set",q.mode=30;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;xe=(vt=q.lencode[te&(1<<q.lenbits)-1])>>>16&255,Be=65535&vt,!((Se=vt>>>24)<=Gt);){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}if(Be<16)te>>>=Se,Gt-=Se,q.lens[q.have++]=Be;else{if(Be===16){for(yt=Se+2;Gt<yt;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}if(te>>>=Se,Gt-=Se,q.have===0){rt.msg="invalid bit length repeat",q.mode=30;break}H=q.lens[q.have-1],Ce=3+(3&te),te>>>=2,Gt-=2}else if(Be===17){for(yt=Se+3;Gt<yt;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}Gt-=Se,H=0,Ce=3+(7&(te>>>=Se)),te>>>=3,Gt-=3}else{for(yt=Se+7;Gt<yt;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}Gt-=Se,H=0,Ce=11+(127&(te>>>=Se)),te>>>=7,Gt-=7}if(q.have+Ce>q.nlen+q.ndist){rt.msg="invalid bit length repeat",q.mode=30;break}for(;Ce--;)q.lens[q.have++]=H}}if(q.mode===30)break;if(q.lens[256]===0){rt.msg="invalid code -- missing end-of-block",q.mode=30;break}if(q.lenbits=9,Pt={bits:q.lenbits},Dt=_(C,q.lens,0,q.nlen,q.lencode,0,q.work,Pt),q.lenbits=Pt.bits,Dt){rt.msg="invalid literal/lengths set",q.mode=30;break}if(q.distbits=6,q.distcode=q.distdyn,Pt={bits:q.distbits},Dt=_(I,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,Pt),q.distbits=Pt.bits,Dt){rt.msg="invalid distances set",q.mode=30;break}if(q.mode=20,xt===6)break t;case 20:q.mode=21;case 21:if(6<=ge&&258<=en){rt.next_out=Xt,rt.avail_out=en,rt.next_in=Bt,rt.avail_in=ge,q.hold=te,q.bits=Gt,g(rt,Ge),Xt=rt.next_out,Rt=rt.output,en=rt.avail_out,Bt=rt.next_in,zt=rt.input,ge=rt.avail_in,te=q.hold,Gt=q.bits,q.mode===12&&(q.back=-1);break}for(q.back=0;xe=(vt=q.lencode[te&(1<<q.lenbits)-1])>>>16&255,Be=65535&vt,!((Se=vt>>>24)<=Gt);){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}if(xe&&!(240&xe)){for(tn=Se,Ln=xe,Tt=Be;xe=(vt=q.lencode[Tt+((te&(1<<tn+Ln)-1)>>tn)])>>>16&255,Be=65535&vt,!(tn+(Se=vt>>>24)<=Gt);){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}te>>>=tn,Gt-=tn,q.back+=tn}if(te>>>=Se,Gt-=Se,q.back+=Se,q.length=Be,xe===0){q.mode=26;break}if(32&xe){q.back=-1,q.mode=12;break}if(64&xe){rt.msg="invalid literal/length code",q.mode=30;break}q.extra=15&xe,q.mode=22;case 22:if(q.extra){for(yt=q.extra;Gt<yt;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}q.length+=te&(1<<q.extra)-1,te>>>=q.extra,Gt-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;xe=(vt=q.distcode[te&(1<<q.distbits)-1])>>>16&255,Be=65535&vt,!((Se=vt>>>24)<=Gt);){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}if(!(240&xe)){for(tn=Se,Ln=xe,Tt=Be;xe=(vt=q.distcode[Tt+((te&(1<<tn+Ln)-1)>>tn)])>>>16&255,Be=65535&vt,!(tn+(Se=vt>>>24)<=Gt);){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}te>>>=tn,Gt-=tn,q.back+=tn}if(te>>>=Se,Gt-=Se,q.back+=Se,64&xe){rt.msg="invalid distance code",q.mode=30;break}q.offset=Be,q.extra=15&xe,q.mode=24;case 24:if(q.extra){for(yt=q.extra;Gt<yt;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}q.offset+=te&(1<<q.extra)-1,te>>>=q.extra,Gt-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){rt.msg="invalid distance too far back",q.mode=30;break}q.mode=25;case 25:if(en===0)break t;if(Ce=Ge-en,q.offset>Ce){if((Ce=q.offset-Ce)>q.whave&&q.sane){rt.msg="invalid distance too far back",q.mode=30;break}nn=Ce>q.wnext?(Ce-=q.wnext,q.wsize-Ce):q.wnext-Ce,Ce>q.length&&(Ce=q.length),be=q.window}else be=Rt,nn=Xt-q.offset,Ce=q.length;for(en<Ce&&(Ce=en),en-=Ce,q.length-=Ce;Rt[Xt++]=be[nn++],--Ce;);q.length===0&&(q.mode=21);break;case 26:if(en===0)break t;Rt[Xt++]=q.length,en--,q.mode=21;break;case 27:if(q.wrap){for(;Gt<32;){if(ge===0)break t;ge--,te|=zt[Bt++]<<Gt,Gt+=8}if(Ge-=en,rt.total_out+=Ge,q.total+=Ge,Ge&&(rt.adler=q.check=q.flags?o(q.check,Rt,Ge,Xt-Ge):l(q.check,Rt,Ge,Xt-Ge)),Ge=en,(q.flags?te:V(te))!==q.check){rt.msg="incorrect data check",q.mode=30;break}Gt=te=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;Gt<32;){if(ge===0)break t;ge--,te+=zt[Bt++]<<Gt,Gt+=8}if(te!==(4294967295&q.total)){rt.msg="incorrect length check",q.mode=30;break}Gt=te=0}q.mode=29;case 29:Dt=1;break t;case 30:Dt=-3;break t;case 31:return-4;case 32:default:return S}return rt.next_out=Xt,rt.avail_out=en,rt.next_in=Bt,rt.avail_in=ge,q.hold=te,q.bits=Gt,(q.wsize||Ge!==rt.avail_out&&q.mode<30&&(q.mode<27||xt!==4))&&pt(rt,rt.output,rt.next_out,Ge-rt.avail_out)?(q.mode=31,-4):(Re-=rt.avail_in,Ge-=rt.avail_out,rt.total_in+=Re,rt.total_out+=Ge,q.total+=Ge,q.wrap&&Ge&&(rt.adler=q.check=q.flags?o(q.check,Rt,Ge,rt.next_out-Ge):l(q.check,Rt,Ge,rt.next_out-Ge)),rt.data_type=q.bits+(q.last?64:0)+(q.mode===12?128:0)+(q.mode===20||q.mode===15?256:0),(Re==0&&Ge===0||xt===4)&&Dt===E&&(Dt=-5),Dt)},s.inflateEnd=function(rt){if(!rt||!rt.state)return S;var xt=rt.state;return xt.window&&(xt.window=null),rt.state=null,E},s.inflateGetHeader=function(rt,xt){var q;return rt&&rt.state&&2&(q=rt.state).wrap?((q.head=xt).done=!1,E):S},s.inflateSetDictionary=function(rt,xt){var q,zt=xt.length;return rt&&rt.state?(q=rt.state).wrap!==0&&q.mode!==11?S:q.mode===11&&l(1,xt,zt,0)!==q.check?-3:pt(rt,xt,zt,zt)?(q.mode=31,-4):(q.havedict=1,E):S},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,a,s){var d=n("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(C,I,E,S,k,R,B,V){var F,j,G,Q,nt,X,K,Z,at,pt=V.bits,rt=0,xt=0,q=0,zt=0,Rt=0,Bt=0,Xt=0,ge=0,en=0,te=0,Gt=null,Re=0,Ge=new d.Buf16(16),Ce=new d.Buf16(16),nn=null,be=0;for(rt=0;rt<=15;rt++)Ge[rt]=0;for(xt=0;xt<S;xt++)Ge[I[E+xt]]++;for(Rt=pt,zt=15;1<=zt&&Ge[zt]===0;zt--);if(zt<Rt&&(Rt=zt),zt===0)return k[R++]=20971520,k[R++]=20971520,V.bits=1,0;for(q=1;q<zt&&Ge[q]===0;q++);for(Rt<q&&(Rt=q),rt=ge=1;rt<=15;rt++)if(ge<<=1,(ge-=Ge[rt])<0)return-1;if(0<ge&&(C===0||zt!==1))return-1;for(Ce[1]=0,rt=1;rt<15;rt++)Ce[rt+1]=Ce[rt]+Ge[rt];for(xt=0;xt<S;xt++)I[E+xt]!==0&&(B[Ce[I[E+xt]]++]=xt);if(X=C===0?(Gt=nn=B,19):C===1?(Gt=l,Re-=257,nn=o,be-=257,256):(Gt=g,nn=_,-1),rt=q,nt=R,Xt=xt=te=0,G=-1,Q=(en=1<<(Bt=Rt))-1,C===1&&852<en||C===2&&592<en)return 1;for(;;){for(K=rt-Xt,at=B[xt]<X?(Z=0,B[xt]):B[xt]>X?(Z=nn[be+B[xt]],Gt[Re+B[xt]]):(Z=96,0),F=1<<rt-Xt,q=j=1<<Bt;k[nt+(te>>Xt)+(j-=F)]=K<<24|Z<<16|at|0,j!==0;);for(F=1<<rt-1;te&F;)F>>=1;if(F!==0?(te&=F-1,te+=F):te=0,xt++,--Ge[rt]==0){if(rt===zt)break;rt=I[E+B[xt]]}if(Rt<rt&&(te&Q)!==G){for(Xt===0&&(Xt=Rt),nt+=q,ge=1<<(Bt=rt-Xt);Bt+Xt<zt&&!((ge-=Ge[Bt+Xt])<=0);)Bt++,ge<<=1;if(en+=1<<Bt,C===1&&852<en||C===2&&592<en)return 1;k[G=te&Q]=Rt<<24|Bt<<16|nt-R|0}}return te!==0&&(k[nt+te]=rt-Xt<<24|64<<16|0),V.bits=Rt,0}},{"../utils/common":41}],51:[function(n,a,s){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,a,s){var d=n("../utils/common"),l=0,o=1;function g(vt){for(var Ut=vt.length;0<=--Ut;)vt[Ut]=0}var _=0,C=29,I=256,E=I+1+C,S=30,k=19,R=2*E+1,B=15,V=16,F=7,j=256,G=16,Q=17,nt=18,X=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],K=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],at=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pt=new Array(2*(E+2));g(pt);var rt=new Array(2*S);g(rt);var xt=new Array(512);g(xt);var q=new Array(256);g(q);var zt=new Array(C);g(zt);var Rt,Bt,Xt,ge=new Array(S);function en(vt,Ut,ne,ue,Ht){this.static_tree=vt,this.extra_bits=Ut,this.extra_base=ne,this.elems=ue,this.max_length=Ht,this.has_stree=vt&&vt.length}function te(vt,Ut){this.dyn_tree=vt,this.max_code=0,this.stat_desc=Ut}function Gt(vt){return vt<256?xt[vt]:xt[256+(vt>>>7)]}function Re(vt,Ut){vt.pending_buf[vt.pending++]=255&Ut,vt.pending_buf[vt.pending++]=Ut>>>8&255}function Ge(vt,Ut,ne){vt.bi_valid>V-ne?(vt.bi_buf|=Ut<<vt.bi_valid&65535,Re(vt,vt.bi_buf),vt.bi_buf=Ut>>V-vt.bi_valid,vt.bi_valid+=ne-V):(vt.bi_buf|=Ut<<vt.bi_valid&65535,vt.bi_valid+=ne)}function Ce(vt,Ut,ne){Ge(vt,ne[2*Ut],ne[2*Ut+1])}function nn(vt,Ut){for(var ne=0;ne|=1&vt,vt>>>=1,ne<<=1,0<--Ut;);return ne>>>1}function be(vt,Ut,ne){var ue,Ht,Me=new Array(B+1),je=0;for(ue=1;ue<=B;ue++)Me[ue]=je=je+ne[ue-1]<<1;for(Ht=0;Ht<=Ut;Ht++){var Le=vt[2*Ht+1];Le!==0&&(vt[2*Ht]=nn(Me[Le]++,Le))}}function Se(vt){var Ut;for(Ut=0;Ut<E;Ut++)vt.dyn_ltree[2*Ut]=0;for(Ut=0;Ut<S;Ut++)vt.dyn_dtree[2*Ut]=0;for(Ut=0;Ut<k;Ut++)vt.bl_tree[2*Ut]=0;vt.dyn_ltree[2*j]=1,vt.opt_len=vt.static_len=0,vt.last_lit=vt.matches=0}function xe(vt){8<vt.bi_valid?Re(vt,vt.bi_buf):0<vt.bi_valid&&(vt.pending_buf[vt.pending++]=vt.bi_buf),vt.bi_buf=0,vt.bi_valid=0}function Be(vt,Ut,ne,ue){var Ht=2*Ut,Me=2*ne;return vt[Ht]<vt[Me]||vt[Ht]===vt[Me]&&ue[Ut]<=ue[ne]}function tn(vt,Ut,ne){for(var ue=vt.heap[ne],Ht=ne<<1;Ht<=vt.heap_len&&(Ht<vt.heap_len&&Be(Ut,vt.heap[Ht+1],vt.heap[Ht],vt.depth)&&Ht++,!Be(Ut,ue,vt.heap[Ht],vt.depth));)vt.heap[ne]=vt.heap[Ht],ne=Ht,Ht<<=1;vt.heap[ne]=ue}function Ln(vt,Ut,ne){var ue,Ht,Me,je,Le=0;if(vt.last_lit!==0)for(;ue=vt.pending_buf[vt.d_buf+2*Le]<<8|vt.pending_buf[vt.d_buf+2*Le+1],Ht=vt.pending_buf[vt.l_buf+Le],Le++,ue===0?Ce(vt,Ht,Ut):(Ce(vt,(Me=q[Ht])+I+1,Ut),(je=X[Me])!==0&&Ge(vt,Ht-=zt[Me],je),Ce(vt,Me=Gt(--ue),ne),(je=K[Me])!==0&&Ge(vt,ue-=ge[Me],je)),Le<vt.last_lit;);Ce(vt,j,Ut)}function Tt(vt,Ut){var ne,ue,Ht,Me=Ut.dyn_tree,je=Ut.stat_desc.static_tree,Le=Ut.stat_desc.has_stree,Ke=Ut.stat_desc.elems,bn=-1;for(vt.heap_len=0,vt.heap_max=R,ne=0;ne<Ke;ne++)Me[2*ne]!==0?(vt.heap[++vt.heap_len]=bn=ne,vt.depth[ne]=0):Me[2*ne+1]=0;for(;vt.heap_len<2;)Me[2*(Ht=vt.heap[++vt.heap_len]=bn<2?++bn:0)]=1,vt.depth[Ht]=0,vt.opt_len--,Le&&(vt.static_len-=je[2*Ht+1]);for(Ut.max_code=bn,ne=vt.heap_len>>1;1<=ne;ne--)tn(vt,Me,ne);for(Ht=Ke;ne=vt.heap[1],vt.heap[1]=vt.heap[vt.heap_len--],tn(vt,Me,1),ue=vt.heap[1],vt.heap[--vt.heap_max]=ne,vt.heap[--vt.heap_max]=ue,Me[2*Ht]=Me[2*ne]+Me[2*ue],vt.depth[Ht]=(vt.depth[ne]>=vt.depth[ue]?vt.depth[ne]:vt.depth[ue])+1,Me[2*ne+1]=Me[2*ue+1]=Ht,vt.heap[1]=Ht++,tn(vt,Me,1),2<=vt.heap_len;);vt.heap[--vt.heap_max]=vt.heap[1],function(Cn,de){var ve,Te,Ye,un,Nn,ae,ht=de.dyn_tree,gt=de.max_code,Ct=de.stat_desc.static_tree,kt=de.stat_desc.has_stree,_t=de.stat_desc.extra_bits,oe=de.stat_desc.extra_base,he=de.stat_desc.max_length,Kt=0;for(un=0;un<=B;un++)Cn.bl_count[un]=0;for(ht[2*Cn.heap[Cn.heap_max]+1]=0,ve=Cn.heap_max+1;ve<R;ve++)he<(un=ht[2*ht[2*(Te=Cn.heap[ve])+1]+1]+1)&&(un=he,Kt++),ht[2*Te+1]=un,gt<Te||(Cn.bl_count[un]++,Nn=0,oe<=Te&&(Nn=_t[Te-oe]),ae=ht[2*Te],Cn.opt_len+=ae*(un+Nn),kt&&(Cn.static_len+=ae*(Ct[2*Te+1]+Nn)));if(Kt!==0){do{for(un=he-1;Cn.bl_count[un]===0;)un--;Cn.bl_count[un]--,Cn.bl_count[un+1]+=2,Cn.bl_count[he]--,Kt-=2}while(0<Kt);for(un=he;un!==0;un--)for(Te=Cn.bl_count[un];Te!==0;)gt<(Ye=Cn.heap[--ve])||(ht[2*Ye+1]!==un&&(Cn.opt_len+=(un-ht[2*Ye+1])*ht[2*Ye],ht[2*Ye+1]=un),Te--)}}(vt,Ut),be(Me,bn,vt.bl_count)}function H(vt,Ut,ne){var ue,Ht,Me=-1,je=Ut[1],Le=0,Ke=7,bn=4;for(je===0&&(Ke=138,bn=3),Ut[2*(ne+1)+1]=65535,ue=0;ue<=ne;ue++)Ht=je,je=Ut[2*(ue+1)+1],++Le<Ke&&Ht===je||(Le<bn?vt.bl_tree[2*Ht]+=Le:Ht!==0?(Ht!==Me&&vt.bl_tree[2*Ht]++,vt.bl_tree[2*G]++):Le<=10?vt.bl_tree[2*Q]++:vt.bl_tree[2*nt]++,Me=Ht,bn=(Le=0)===je?(Ke=138,3):Ht===je?(Ke=6,3):(Ke=7,4))}function Dt(vt,Ut,ne){var ue,Ht,Me=-1,je=Ut[1],Le=0,Ke=7,bn=4;for(je===0&&(Ke=138,bn=3),ue=0;ue<=ne;ue++)if(Ht=je,je=Ut[2*(ue+1)+1],!(++Le<Ke&&Ht===je)){if(Le<bn)for(;Ce(vt,Ht,vt.bl_tree),--Le!=0;);else Ht!==0?(Ht!==Me&&(Ce(vt,Ht,vt.bl_tree),Le--),Ce(vt,G,vt.bl_tree),Ge(vt,Le-3,2)):Le<=10?(Ce(vt,Q,vt.bl_tree),Ge(vt,Le-3,3)):(Ce(vt,nt,vt.bl_tree),Ge(vt,Le-11,7));Me=Ht,bn=(Le=0)===je?(Ke=138,3):Ht===je?(Ke=6,3):(Ke=7,4)}}g(ge);var Pt=!1;function yt(vt,Ut,ne,ue){Ge(vt,(_<<1)+(ue?1:0),3),function(Ht,Me,je,Le){xe(Ht),Re(Ht,je),Re(Ht,~je),d.arraySet(Ht.pending_buf,Ht.window,Me,je,Ht.pending),Ht.pending+=je}(vt,Ut,ne)}s._tr_init=function(vt){Pt||(function(){var Ut,ne,ue,Ht,Me,je=new Array(B+1);for(Ht=ue=0;Ht<C-1;Ht++)for(zt[Ht]=ue,Ut=0;Ut<1<<X[Ht];Ut++)q[ue++]=Ht;for(q[ue-1]=Ht,Ht=Me=0;Ht<16;Ht++)for(ge[Ht]=Me,Ut=0;Ut<1<<K[Ht];Ut++)xt[Me++]=Ht;for(Me>>=7;Ht<S;Ht++)for(ge[Ht]=Me<<7,Ut=0;Ut<1<<K[Ht]-7;Ut++)xt[256+Me++]=Ht;for(ne=0;ne<=B;ne++)je[ne]=0;for(Ut=0;Ut<=143;)pt[2*Ut+1]=8,Ut++,je[8]++;for(;Ut<=255;)pt[2*Ut+1]=9,Ut++,je[9]++;for(;Ut<=279;)pt[2*Ut+1]=7,Ut++,je[7]++;for(;Ut<=287;)pt[2*Ut+1]=8,Ut++,je[8]++;for(be(pt,E+1,je),Ut=0;Ut<S;Ut++)rt[2*Ut+1]=5,rt[2*Ut]=nn(Ut,5);Rt=new en(pt,X,I+1,E,B),Bt=new en(rt,K,0,S,B),Xt=new en(new Array(0),Z,0,k,F)}(),Pt=!0),vt.l_desc=new te(vt.dyn_ltree,Rt),vt.d_desc=new te(vt.dyn_dtree,Bt),vt.bl_desc=new te(vt.bl_tree,Xt),vt.bi_buf=0,vt.bi_valid=0,Se(vt)},s._tr_stored_block=yt,s._tr_flush_block=function(vt,Ut,ne,ue){var Ht,Me,je=0;0<vt.level?(vt.strm.data_type===2&&(vt.strm.data_type=function(Le){var Ke,bn=4093624447;for(Ke=0;Ke<=31;Ke++,bn>>>=1)if(1&bn&&Le.dyn_ltree[2*Ke]!==0)return l;if(Le.dyn_ltree[18]!==0||Le.dyn_ltree[20]!==0||Le.dyn_ltree[26]!==0)return o;for(Ke=32;Ke<I;Ke++)if(Le.dyn_ltree[2*Ke]!==0)return o;return l}(vt)),Tt(vt,vt.l_desc),Tt(vt,vt.d_desc),je=function(Le){var Ke;for(H(Le,Le.dyn_ltree,Le.l_desc.max_code),H(Le,Le.dyn_dtree,Le.d_desc.max_code),Tt(Le,Le.bl_desc),Ke=k-1;3<=Ke&&Le.bl_tree[2*at[Ke]+1]===0;Ke--);return Le.opt_len+=3*(Ke+1)+5+5+4,Ke}(vt),Ht=vt.opt_len+3+7>>>3,(Me=vt.static_len+3+7>>>3)<=Ht&&(Ht=Me)):Ht=Me=ne+5,ne+4<=Ht&&Ut!==-1?yt(vt,Ut,ne,ue):vt.strategy===4||Me===Ht?(Ge(vt,2+(ue?1:0),3),Ln(vt,pt,rt)):(Ge(vt,4+(ue?1:0),3),function(Le,Ke,bn,Cn){var de;for(Ge(Le,Ke-257,5),Ge(Le,bn-1,5),Ge(Le,Cn-4,4),de=0;de<Cn;de++)Ge(Le,Le.bl_tree[2*at[de]+1],3);Dt(Le,Le.dyn_ltree,Ke-1),Dt(Le,Le.dyn_dtree,bn-1)}(vt,vt.l_desc.max_code+1,vt.d_desc.max_code+1,je+1),Ln(vt,vt.dyn_ltree,vt.dyn_dtree)),Se(vt),ue&&xe(vt)},s._tr_tally=function(vt,Ut,ne){return vt.pending_buf[vt.d_buf+2*vt.last_lit]=Ut>>>8&255,vt.pending_buf[vt.d_buf+2*vt.last_lit+1]=255&Ut,vt.pending_buf[vt.l_buf+vt.last_lit]=255&ne,vt.last_lit++,Ut===0?vt.dyn_ltree[2*ne]++:(vt.matches++,Ut--,vt.dyn_ltree[2*(q[ne]+I+1)]++,vt.dyn_dtree[2*Gt(Ut)]++),vt.last_lit===vt.lit_bufsize-1},s._tr_align=function(vt){Ge(vt,2,3),Ce(vt,j,pt),function(Ut){Ut.bi_valid===16?(Re(Ut,Ut.bi_buf),Ut.bi_buf=0,Ut.bi_valid=0):8<=Ut.bi_valid&&(Ut.pending_buf[Ut.pending++]=255&Ut.bi_buf,Ut.bi_buf>>=8,Ut.bi_valid-=8)}(vt)}},{"../utils/common":41}],53:[function(n,a,s){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,a,s){(function(d){(function(l,o){if(!l.setImmediate){var g,_,C,I,E=1,S={},k=!1,R=l.document,B=Object.getPrototypeOf&&Object.getPrototypeOf(l);B=B&&B.setTimeout?B:l,g={}.toString.call(l.process)==="[object process]"?function(G){process.nextTick(function(){F(G)})}:function(){if(l.postMessage&&!l.importScripts){var G=!0,Q=l.onmessage;return l.onmessage=function(){G=!1},l.postMessage("","*"),l.onmessage=Q,G}}()?(I="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",j,!1):l.attachEvent("onmessage",j),function(G){l.postMessage(I+G,"*")}):l.MessageChannel?((C=new MessageChannel).port1.onmessage=function(G){F(G.data)},function(G){C.port2.postMessage(G)}):R&&"onreadystatechange"in R.createElement("script")?(_=R.documentElement,function(G){var Q=R.createElement("script");Q.onreadystatechange=function(){F(G),Q.onreadystatechange=null,_.removeChild(Q),Q=null},_.appendChild(Q)}):function(G){setTimeout(F,0,G)},B.setImmediate=function(G){typeof G!="function"&&(G=new Function(""+G));for(var Q=new Array(arguments.length-1),nt=0;nt<Q.length;nt++)Q[nt]=arguments[nt+1];var X={callback:G,args:Q};return S[E]=X,g(E),E++},B.clearImmediate=V}function V(G){delete S[G]}function F(G){if(k)setTimeout(F,0,G);else{var Q=S[G];if(Q){k=!0;try{(function(nt){var X=nt.callback,K=nt.args;switch(K.length){case 0:X();break;case 1:X(K[0]);break;case 2:X(K[0],K[1]);break;case 3:X(K[0],K[1],K[2]);break;default:X.apply(o,K)}})(Q)}finally{V(G),k=!1}}}}function j(G){G.source===l&&typeof G.data=="string"&&G.data.indexOf(I)===0&&F(+G.data.slice(I.length))}})(typeof self>"u"?d===void 0?this:d:self)}).call(this,typeof ho<"u"?ho:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(CT);var LD=CT.exports,RD=wT,U0=Lg,DD=xT,OD=LD,IT=function(t,e,n=!1){let a=new OD,s=a;e&&e.folder&&(s=a.folder(e.folder));var d=e&&e.prj?e.prj:DD;[U0.point(t),U0.line(t),U0.polygon(t),U0.multipolygon(t),U0.multiline(t)].forEach(function(o){o.geometries.length&&o.geometries[0].length&&RD(o.properties,o.type,o.geometries,function(g,_){var C=e&&e.types&&e.types[o.type.toLowerCase()]?e.types[o.type.toLowerCase()]:o.type;s.file(C+".shp",_.shp.buffer,{binary:!0}),s.file(C+".shx",_.shx.buffer,{binary:!0}),s.file(C+".dbf",_.dbf.buffer,{binary:!0}),s.file(C+".prj",d)})});var l={};return!e||!e.outputType?l.type="base64":l.type=e.outputType,!e||!e.compression?l.compression="DEFLATE":l.compression=e.compression,n?a.generateNodeStream({...l,streamFiles:!0}):a.generateAsync(l)},MT={exports:{}};(function(t,e){(function(n,a){a()})(ho,function(){function n(_,C){return typeof C>"u"?C={autoBom:!1}:typeof C!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),C={autoBom:!C}),C.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_}function a(_,C,I){var E=new XMLHttpRequest;E.open("GET",_),E.responseType="blob",E.onload=function(){g(E.response,C,I)},E.onerror=function(){console.error("could not download file")},E.send()}function s(_){var C=new XMLHttpRequest;C.open("HEAD",_,!1);try{C.send()}catch{}return 200<=C.status&&299>=C.status}function d(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var C=document.createEvent("MouseEvents");C.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(C)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ho=="object"&&ho.global===ho?ho:void 0,o=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(_,C,I){var E=l.URL||l.webkitURL,S=document.createElement("a");C=C||_.name||"download",S.download=C,S.rel="noopener",typeof _=="string"?(S.href=_,S.origin===location.origin?d(S):s(S.href)?a(_,C,I):d(S,S.target="_blank")):(S.href=E.createObjectURL(_),setTimeout(function(){E.revokeObjectURL(S.href)},4e4),setTimeout(function(){d(S)},0))}:"msSaveOrOpenBlob"in navigator?function(_,C,I){if(C=C||_.name||"download",typeof _!="string")navigator.msSaveOrOpenBlob(n(_,I),C);else if(s(_))a(_,C,I);else{var E=document.createElement("a");E.href=_,E.target="_blank",setTimeout(function(){d(E)})}}:function(_,C,I,E){if(E=E||open("","_blank"),E&&(E.document.title=E.document.body.innerText="downloading..."),typeof _=="string")return a(_,C,I);var S=_.type==="application/octet-stream",k=/constructor/i.test(l.HTMLElement)||l.safari,R=/CriOS\/[\d]+/.test(navigator.userAgent);if((R||S&&k||o)&&typeof FileReader<"u"){var B=new FileReader;B.onloadend=function(){var j=B.result;j=R?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),E?E.location.href=j:location=j,E=null},B.readAsDataURL(_)}else{var V=l.URL||l.webkitURL,F=V.createObjectURL(_);E?E.location=F:location.href=F,E=null,setTimeout(function(){V.revokeObjectURL(F)},4e4)}});l.saveAs=g.saveAs=g,t.exports=g})})(MT);var fb=MT.exports;const zD=Ff(fb);var FD=IT,BD=fb.saveAs,ND=function(t,e){let n="download";e&&(e.filename||e.folder)&&(n=e.filename||e.folder),FD(t,e).then(function(a){BD(a,n+".zip")})};cb.download=ND;cb.write=wT;cb.zip=IT;var ST={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,a)=>{t.exports=a()})(ho,function n(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},s,d=!a.document&&!!a.postMessage,l=a.IS_PAPA_WORKER||!1,o={},g=0,_={};function C(K){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(Z){var at=Q(Z);at.chunkSize=parseInt(at.chunkSize),Z.step||Z.chunk||(at.chunkSize=null),this._handle=new R(at),(this._handle.streamer=this)._config=at}).call(this,K),this.parseChunk=function(Z,at){var pt=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<pt){let xt=this._config.newline;xt||(rt=this._config.quoteChar||'"',xt=this._handle.guessLineEndings(Z,rt)),Z=[...Z.split(xt).slice(pt)].join(xt)}this.isFirstChunk&&X(this._config.beforeFirstChunk)&&(rt=this._config.beforeFirstChunk(Z))!==void 0&&(Z=rt),this.isFirstChunk=!1,this._halted=!1;var pt=this._partialLine+Z,rt=(this._partialLine="",this._handle.parse(pt,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(Z=rt.meta.cursor,pt=(this._finished||(this._partialLine=pt.substring(Z-this._baseIndex),this._baseIndex=Z),rt&&rt.data&&(this._rowCount+=rt.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)a.postMessage({results:rt,workerId:_.WORKER_ID,finished:pt});else if(X(this._config.chunk)&&!at){if(this._config.chunk(rt,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=rt=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(rt.data),this._completeResults.errors=this._completeResults.errors.concat(rt.errors),this._completeResults.meta=rt.meta),this._completed||!pt||!X(this._config.complete)||rt&&rt.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),pt||rt&&rt.meta.paused||this._nextChunk(),rt}this._halted=!0},this._sendError=function(Z){X(this._config.error)?this._config.error(Z):l&&this._config.error&&a.postMessage({workerId:_.WORKER_ID,error:Z,finished:!1})}}function I(K){var Z;(K=K||{}).chunkSize||(K.chunkSize=_.RemoteChunkSize),C.call(this,K),this._nextChunk=d?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(at){this._input=at,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(Z=new XMLHttpRequest,this._config.withCredentials&&(Z.withCredentials=this._config.withCredentials),d||(Z.onload=nt(this._chunkLoaded,this),Z.onerror=nt(this._chunkError,this)),Z.open(this._config.downloadRequestBody?"POST":"GET",this._input,!d),this._config.downloadRequestHeaders){var at,pt=this._config.downloadRequestHeaders;for(at in pt)Z.setRequestHeader(at,pt[at])}var rt;this._config.chunkSize&&(rt=this._start+this._config.chunkSize-1,Z.setRequestHeader("Range","bytes="+this._start+"-"+rt));try{Z.send(this._config.downloadRequestBody)}catch(xt){this._chunkError(xt.message)}d&&Z.status===0&&this._chunkError()}},this._chunkLoaded=function(){Z.readyState===4&&(Z.status<200||400<=Z.status?this._chunkError():(this._start+=this._config.chunkSize||Z.responseText.length,this._finished=!this._config.chunkSize||this._start>=(at=>(at=at.getResponseHeader("Content-Range"))!==null?parseInt(at.substring(at.lastIndexOf("/")+1)):-1)(Z),this.parseChunk(Z.responseText)))},this._chunkError=function(at){at=Z.statusText||at,this._sendError(new Error(at))}}function E(K){(K=K||{}).chunkSize||(K.chunkSize=_.LocalChunkSize),C.call(this,K);var Z,at,pt=typeof FileReader<"u";this.stream=function(rt){this._input=rt,at=rt.slice||rt.webkitSlice||rt.mozSlice,pt?((Z=new FileReader).onload=nt(this._chunkLoaded,this),Z.onerror=nt(this._chunkError,this)):Z=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var rt=this._input,xt=(this._config.chunkSize&&(xt=Math.min(this._start+this._config.chunkSize,this._input.size),rt=at.call(rt,this._start,xt)),Z.readAsText(rt,this._config.encoding));pt||this._chunkLoaded({target:{result:xt}})},this._chunkLoaded=function(rt){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(rt.target.result)},this._chunkError=function(){this._sendError(Z.error)}}function S(K){var Z;C.call(this,K=K||{}),this.stream=function(at){return Z=at,this._nextChunk()},this._nextChunk=function(){var at,pt;if(!this._finished)return at=this._config.chunkSize,Z=at?(pt=Z.substring(0,at),Z.substring(at)):(pt=Z,""),this._finished=!Z,this.parseChunk(pt)}}function k(K){C.call(this,K=K||{});var Z=[],at=!0,pt=!1;this.pause=function(){C.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){C.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(rt){this._input=rt,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){pt&&Z.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),Z.length?this.parseChunk(Z.shift()):at=!0},this._streamData=nt(function(rt){try{Z.push(typeof rt=="string"?rt:rt.toString(this._config.encoding)),at&&(at=!1,this._checkIsFinished(),this.parseChunk(Z.shift()))}catch(xt){this._streamError(xt)}},this),this._streamError=nt(function(rt){this._streamCleanUp(),this._sendError(rt)},this),this._streamEnd=nt(function(){this._streamCleanUp(),pt=!0,this._streamData("")},this),this._streamCleanUp=nt(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function R(K){var Z,at,pt,rt,xt=Math.pow(2,53),q=-xt,zt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Rt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Bt=this,Xt=0,ge=0,en=!1,te=!1,Gt=[],Re={data:[],errors:[],meta:{}};function Ge(Se){return K.skipEmptyLines==="greedy"?Se.join("").trim()==="":Se.length===1&&Se[0].length===0}function Ce(){if(Re&&pt&&(be("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+_.DefaultDelimiter+"'"),pt=!1),K.skipEmptyLines&&(Re.data=Re.data.filter(function(tn){return!Ge(tn)})),nn()){let tn=function(Ln,Tt){X(K.transformHeader)&&(Ln=K.transformHeader(Ln,Tt)),Gt.push(Ln)};if(Re)if(Array.isArray(Re.data[0])){for(var Se=0;nn()&&Se<Re.data.length;Se++)Re.data[Se].forEach(tn);Re.data.splice(0,1)}else Re.data.forEach(tn)}function xe(tn,Ln){for(var Tt=K.header?{}:[],H=0;H<tn.length;H++){var Dt=H,Pt=tn[H],Pt=((yt,vt)=>(Ut=>(K.dynamicTypingFunction&&K.dynamicTyping[Ut]===void 0&&(K.dynamicTyping[Ut]=K.dynamicTypingFunction(Ut)),(K.dynamicTyping[Ut]||K.dynamicTyping)===!0))(yt)?vt==="true"||vt==="TRUE"||vt!=="false"&&vt!=="FALSE"&&((Ut=>{if(zt.test(Ut)&&(Ut=parseFloat(Ut),q<Ut&&Ut<xt))return 1})(vt)?parseFloat(vt):Rt.test(vt)?new Date(vt):vt===""?null:vt):vt)(Dt=K.header?H>=Gt.length?"__parsed_extra":Gt[H]:Dt,Pt=K.transform?K.transform(Pt,Dt):Pt);Dt==="__parsed_extra"?(Tt[Dt]=Tt[Dt]||[],Tt[Dt].push(Pt)):Tt[Dt]=Pt}return K.header&&(H>Gt.length?be("FieldMismatch","TooManyFields","Too many fields: expected "+Gt.length+" fields but parsed "+H,ge+Ln):H<Gt.length&&be("FieldMismatch","TooFewFields","Too few fields: expected "+Gt.length+" fields but parsed "+H,ge+Ln)),Tt}var Be;Re&&(K.header||K.dynamicTyping||K.transform)&&(Be=1,!Re.data.length||Array.isArray(Re.data[0])?(Re.data=Re.data.map(xe),Be=Re.data.length):Re.data=xe(Re.data,0),K.header&&Re.meta&&(Re.meta.fields=Gt),ge+=Be)}function nn(){return K.header&&Gt.length===0}function be(Se,xe,Be,tn){Se={type:Se,code:xe,message:Be},tn!==void 0&&(Se.row=tn),Re.errors.push(Se)}X(K.step)&&(rt=K.step,K.step=function(Se){Re=Se,nn()?Ce():(Ce(),Re.data.length!==0&&(Xt+=Se.data.length,K.preview&&Xt>K.preview?at.abort():(Re.data=Re.data[0],rt(Re,Bt))))}),this.parse=function(Se,xe,Be){var tn=K.quoteChar||'"',tn=(K.newline||(K.newline=this.guessLineEndings(Se,tn)),pt=!1,K.delimiter?X(K.delimiter)&&(K.delimiter=K.delimiter(Se),Re.meta.delimiter=K.delimiter):((tn=((Ln,Tt,H,Dt,Pt)=>{var yt,vt,Ut,ne;Pt=Pt||[",","	","|",";",_.RECORD_SEP,_.UNIT_SEP];for(var ue=0;ue<Pt.length;ue++){for(var Ht,Me=Pt[ue],je=0,Le=0,Ke=0,bn=(Ut=void 0,new V({comments:Dt,delimiter:Me,newline:Tt,preview:10}).parse(Ln)),Cn=0;Cn<bn.data.length;Cn++)H&&Ge(bn.data[Cn])?Ke++:(Ht=bn.data[Cn].length,Le+=Ht,Ut===void 0?Ut=Ht:0<Ht&&(je+=Math.abs(Ht-Ut),Ut=Ht));0<bn.data.length&&(Le/=bn.data.length-Ke),(vt===void 0||je<=vt)&&(ne===void 0||ne<Le)&&1.99<Le&&(vt=je,yt=Me,ne=Le)}return{successful:!!(K.delimiter=yt),bestDelimiter:yt}})(Se,K.newline,K.skipEmptyLines,K.comments,K.delimitersToGuess)).successful?K.delimiter=tn.bestDelimiter:(pt=!0,K.delimiter=_.DefaultDelimiter),Re.meta.delimiter=K.delimiter),Q(K));return K.preview&&K.header&&tn.preview++,Z=Se,at=new V(tn),Re=at.parse(Z,xe,Be),Ce(),en?{meta:{paused:!0}}:Re||{meta:{paused:!1}}},this.paused=function(){return en},this.pause=function(){en=!0,at.abort(),Z=X(K.chunk)?"":Z.substring(at.getCharIndex())},this.resume=function(){Bt.streamer._halted?(en=!1,Bt.streamer.parseChunk(Z,!0)):setTimeout(Bt.resume,3)},this.aborted=function(){return te},this.abort=function(){te=!0,at.abort(),Re.meta.aborted=!0,X(K.complete)&&K.complete(Re),Z=""},this.guessLineEndings=function(Ln,tn){Ln=Ln.substring(0,1048576);var tn=new RegExp(B(tn)+"([^]*?)"+B(tn),"gm"),Be=(Ln=Ln.replace(tn,"")).split("\r"),tn=Ln.split(`
`),Ln=1<tn.length&&tn[0].length<Be[0].length;if(Be.length===1||Ln)return`
`;for(var Tt=0,H=0;H<Be.length;H++)Be[H][0]===`
`&&Tt++;return Tt>=Be.length/2?`\r
`:"\r"}}function B(K){return K.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function V(K){var Z=(K=K||{}).delimiter,at=K.newline,pt=K.comments,rt=K.step,xt=K.preview,q=K.fastMode,zt=null,Rt=!1,Bt=K.quoteChar==null?'"':K.quoteChar,Xt=Bt;if(K.escapeChar!==void 0&&(Xt=K.escapeChar),(typeof Z!="string"||-1<_.BAD_DELIMITERS.indexOf(Z))&&(Z=","),pt===Z)throw new Error("Comment character same as delimiter");pt===!0?pt="#":(typeof pt!="string"||-1<_.BAD_DELIMITERS.indexOf(pt))&&(pt=!1),at!==`
`&&at!=="\r"&&at!==`\r
`&&(at=`
`);var ge=0,en=!1;this.parse=function(te,Gt,Re){if(typeof te!="string")throw new Error("Input must be a string");var Ge=te.length,Ce=Z.length,nn=at.length,be=pt.length,Se=X(rt),xe=[],Be=[],tn=[],Ln=ge=0;if(!te)return je();if(q||q!==!1&&te.indexOf(Bt)===-1){for(var Tt=te.split(at),H=0;H<Tt.length;H++){if(tn=Tt[H],ge+=tn.length,H!==Tt.length-1)ge+=at.length;else if(Re)return je();if(!pt||tn.substring(0,be)!==pt){if(Se){if(xe=[],ne(tn.split(Z)),Le(),en)return je()}else ne(tn.split(Z));if(xt&&xt<=H)return xe=xe.slice(0,xt),je(!0)}}return je()}for(var Dt=te.indexOf(Z,ge),Pt=te.indexOf(at,ge),yt=new RegExp(B(Xt)+B(Bt),"g"),vt=te.indexOf(Bt,ge);;)if(te[ge]===Bt)for(vt=ge,ge++;;){if((vt=te.indexOf(Bt,vt+1))===-1)return Re||Be.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:xe.length,index:ge}),Ht();if(vt===Ge-1)return Ht(te.substring(ge,vt).replace(yt,Bt));if(Bt===Xt&&te[vt+1]===Xt)vt++;else if(Bt===Xt||vt===0||te[vt-1]!==Xt){Dt!==-1&&Dt<vt+1&&(Dt=te.indexOf(Z,vt+1));var Ut=ue((Pt=Pt!==-1&&Pt<vt+1?te.indexOf(at,vt+1):Pt)===-1?Dt:Math.min(Dt,Pt));if(te.substr(vt+1+Ut,Ce)===Z){tn.push(te.substring(ge,vt).replace(yt,Bt)),te[ge=vt+1+Ut+Ce]!==Bt&&(vt=te.indexOf(Bt,ge)),Dt=te.indexOf(Z,ge),Pt=te.indexOf(at,ge);break}if(Ut=ue(Pt),te.substring(vt+1+Ut,vt+1+Ut+nn)===at){if(tn.push(te.substring(ge,vt).replace(yt,Bt)),Me(vt+1+Ut+nn),Dt=te.indexOf(Z,ge),vt=te.indexOf(Bt,ge),Se&&(Le(),en))return je();if(xt&&xe.length>=xt)return je(!0);break}Be.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:xe.length,index:ge}),vt++}}else if(pt&&tn.length===0&&te.substring(ge,ge+be)===pt){if(Pt===-1)return je();ge=Pt+nn,Pt=te.indexOf(at,ge),Dt=te.indexOf(Z,ge)}else if(Dt!==-1&&(Dt<Pt||Pt===-1))tn.push(te.substring(ge,Dt)),ge=Dt+Ce,Dt=te.indexOf(Z,ge);else{if(Pt===-1)break;if(tn.push(te.substring(ge,Pt)),Me(Pt+nn),Se&&(Le(),en))return je();if(xt&&xe.length>=xt)return je(!0)}return Ht();function ne(Ke){xe.push(Ke),Ln=ge}function ue(Ke){var bn=0;return bn=Ke!==-1&&(Ke=te.substring(vt+1,Ke))&&Ke.trim()===""?Ke.length:bn}function Ht(Ke){return Re||(Ke===void 0&&(Ke=te.substring(ge)),tn.push(Ke),ge=Ge,ne(tn),Se&&Le()),je()}function Me(Ke){ge=Ke,ne(tn),tn=[],Pt=te.indexOf(at,ge)}function je(Ke){if(K.header&&!Gt&&xe.length&&!Rt){var bn=xe[0],Cn={},de=new Set(bn);let ve=!1;for(let Te=0;Te<bn.length;Te++){let Ye=bn[Te];if(Cn[Ye=X(K.transformHeader)?K.transformHeader(Ye,Te):Ye]){let un,Nn=Cn[Ye];for(;un=Ye+"_"+Nn,Nn++,de.has(un););de.add(un),bn[Te]=un,Cn[Ye]++,ve=!0,(zt=zt===null?{}:zt)[un]=Ye}else Cn[Ye]=1,bn[Te]=Ye;de.add(Ye)}ve&&console.warn("Duplicate headers found and renamed."),Rt=!0}return{data:xe,errors:Be,meta:{delimiter:Z,linebreak:at,aborted:en,truncated:!!Ke,cursor:Ln+(Gt||0),renamedHeaders:zt}}}function Le(){rt(je()),xe=[],Be=[]}},this.abort=function(){en=!0},this.getCharIndex=function(){return ge}}function F(K){var Z=K.data,at=o[Z.workerId],pt=!1;if(Z.error)at.userError(Z.error,Z.file);else if(Z.results&&Z.results.data){var rt={abort:function(){pt=!0,j(Z.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:G,resume:G};if(X(at.userStep)){for(var xt=0;xt<Z.results.data.length&&(at.userStep({data:Z.results.data[xt],errors:Z.results.errors,meta:Z.results.meta},rt),!pt);xt++);delete Z.results}else X(at.userChunk)&&(at.userChunk(Z.results,rt,Z.file),delete Z.results)}Z.finished&&!pt&&j(Z.workerId,Z.results)}function j(K,Z){var at=o[K];X(at.userComplete)&&at.userComplete(Z),at.terminate(),delete o[K]}function G(){throw new Error("Not implemented.")}function Q(K){if(typeof K!="object"||K===null)return K;var Z,at=Array.isArray(K)?[]:{};for(Z in K)at[Z]=Q(K[Z]);return at}function nt(K,Z){return function(){K.apply(Z,arguments)}}function X(K){return typeof K=="function"}return _.parse=function(K,Z){var at=(Z=Z||{}).dynamicTyping||!1;if(X(at)&&(Z.dynamicTypingFunction=at,at={}),Z.dynamicTyping=at,Z.transform=!!X(Z.transform)&&Z.transform,!Z.worker||!_.WORKERS_SUPPORTED)return at=null,_.NODE_STREAM_INPUT,typeof K=="string"?(K=(pt=>pt.charCodeAt(0)!==65279?pt:pt.slice(1))(K),at=new(Z.download?I:S)(Z)):K.readable===!0&&X(K.read)&&X(K.on)?at=new k(Z):(a.File&&K instanceof File||K instanceof Object)&&(at=new E(Z)),at.stream(K);(at=(()=>{var pt;return!!_.WORKERS_SUPPORTED&&(pt=(()=>{var rt=a.URL||a.webkitURL||null,xt=n.toString();return _.BLOB_URL||(_.BLOB_URL=rt.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",xt,")();"],{type:"text/javascript"})))})(),(pt=new a.Worker(pt)).onmessage=F,pt.id=g++,o[pt.id]=pt)})()).userStep=Z.step,at.userChunk=Z.chunk,at.userComplete=Z.complete,at.userError=Z.error,Z.step=X(Z.step),Z.chunk=X(Z.chunk),Z.complete=X(Z.complete),Z.error=X(Z.error),delete Z.worker,at.postMessage({input:K,config:Z,workerId:at.id})},_.unparse=function(K,Z){var at=!1,pt=!0,rt=",",xt=`\r
`,q='"',zt=q+q,Rt=!1,Bt=null,Xt=!1,ge=((()=>{if(typeof Z=="object"){if(typeof Z.delimiter!="string"||_.BAD_DELIMITERS.filter(function(Gt){return Z.delimiter.indexOf(Gt)!==-1}).length||(rt=Z.delimiter),typeof Z.quotes!="boolean"&&typeof Z.quotes!="function"&&!Array.isArray(Z.quotes)||(at=Z.quotes),typeof Z.skipEmptyLines!="boolean"&&typeof Z.skipEmptyLines!="string"||(Rt=Z.skipEmptyLines),typeof Z.newline=="string"&&(xt=Z.newline),typeof Z.quoteChar=="string"&&(q=Z.quoteChar),typeof Z.header=="boolean"&&(pt=Z.header),Array.isArray(Z.columns)){if(Z.columns.length===0)throw new Error("Option columns is empty");Bt=Z.columns}Z.escapeChar!==void 0&&(zt=Z.escapeChar+q),Z.escapeFormulae instanceof RegExp?Xt=Z.escapeFormulae:typeof Z.escapeFormulae=="boolean"&&Z.escapeFormulae&&(Xt=/^[=+\-@\t\r].*$/)}})(),new RegExp(B(q),"g"));if(typeof K=="string"&&(K=JSON.parse(K)),Array.isArray(K)){if(!K.length||Array.isArray(K[0]))return en(null,K,Rt);if(typeof K[0]=="object")return en(Bt||Object.keys(K[0]),K,Rt)}else if(typeof K=="object")return typeof K.data=="string"&&(K.data=JSON.parse(K.data)),Array.isArray(K.data)&&(K.fields||(K.fields=K.meta&&K.meta.fields||Bt),K.fields||(K.fields=Array.isArray(K.data[0])?K.fields:typeof K.data[0]=="object"?Object.keys(K.data[0]):[]),Array.isArray(K.data[0])||typeof K.data[0]=="object"||(K.data=[K.data])),en(K.fields||[],K.data||[],Rt);throw new Error("Unable to serialize unrecognized input");function en(Gt,Re,Ge){var Ce="",nn=(typeof Gt=="string"&&(Gt=JSON.parse(Gt)),typeof Re=="string"&&(Re=JSON.parse(Re)),Array.isArray(Gt)&&0<Gt.length),be=!Array.isArray(Re[0]);if(nn&&pt){for(var Se=0;Se<Gt.length;Se++)0<Se&&(Ce+=rt),Ce+=te(Gt[Se],Se);0<Re.length&&(Ce+=xt)}for(var xe=0;xe<Re.length;xe++){var Be=(nn?Gt:Re[xe]).length,tn=!1,Ln=nn?Object.keys(Re[xe]).length===0:Re[xe].length===0;if(Ge&&!nn&&(tn=Ge==="greedy"?Re[xe].join("").trim()==="":Re[xe].length===1&&Re[xe][0].length===0),Ge==="greedy"&&nn){for(var Tt=[],H=0;H<Be;H++){var Dt=be?Gt[H]:H;Tt.push(Re[xe][Dt])}tn=Tt.join("").trim()===""}if(!tn){for(var Pt=0;Pt<Be;Pt++){0<Pt&&!Ln&&(Ce+=rt);var yt=nn&&be?Gt[Pt]:Pt;Ce+=te(Re[xe][yt],Pt)}xe<Re.length-1&&(!Ge||0<Be&&!Ln)&&(Ce+=xt)}}return Ce}function te(Gt,Re){var Ge,Ce;return Gt==null?"":Gt.constructor===Date?JSON.stringify(Gt).slice(1,25):(Ce=!1,Xt&&typeof Gt=="string"&&Xt.test(Gt)&&(Gt="'"+Gt,Ce=!0),Ge=Gt.toString().replace(ge,zt),(Ce=Ce||at===!0||typeof at=="function"&&at(Gt,Re)||Array.isArray(at)&&at[Re]||((nn,be)=>{for(var Se=0;Se<be.length;Se++)if(-1<nn.indexOf(be[Se]))return!0;return!1})(Ge,_.BAD_DELIMITERS)||-1<Ge.indexOf(rt)||Ge.charAt(0)===" "||Ge.charAt(Ge.length-1)===" ")?q+Ge+q:Ge)}},_.RECORD_SEP="",_.UNIT_SEP="",_.BYTE_ORDER_MARK="\uFEFF",_.BAD_DELIMITERS=["\r",`
`,'"',_.BYTE_ORDER_MARK],_.WORKERS_SUPPORTED=!d&&!!a.Worker,_.NODE_STREAM_INPUT=1,_.LocalChunkSize=10485760,_.RemoteChunkSize=5242880,_.DefaultDelimiter=",",_.Parser=V,_.ParserHandle=R,_.NetworkStreamer=I,_.FileStreamer=E,_.StringStreamer=S,_.ReadableStreamStreamer=k,a.jQuery&&((s=a.jQuery).fn.parse=function(K){var Z=K.config||{},at=[];return this.each(function(xt){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var q=0;q<this.files.length;q++)at.push({file:this.files[q],inputElem:this,instanceConfig:s.extend({},Z)})}),pt(),this;function pt(){if(at.length===0)X(K.complete)&&K.complete();else{var xt,q,zt,Rt,Bt=at[0];if(X(K.before)){var Xt=K.before(Bt.file,Bt.inputElem);if(typeof Xt=="object"){if(Xt.action==="abort")return xt="AbortError",q=Bt.file,zt=Bt.inputElem,Rt=Xt.reason,void(X(K.error)&&K.error({name:xt},q,zt,Rt));if(Xt.action==="skip")return void rt();typeof Xt.config=="object"&&(Bt.instanceConfig=s.extend(Bt.instanceConfig,Xt.config))}else if(Xt==="skip")return void rt()}var ge=Bt.instanceConfig.complete;Bt.instanceConfig.complete=function(en){X(ge)&&ge(en,Bt.file,Bt.inputElem),rt()},_.parse(Bt.file,Bt.instanceConfig)}}function rt(){at.splice(0,1),pt()}}),l&&(a.onmessage=function(K){K=K.data,_.WORKER_ID===void 0&&K&&(_.WORKER_ID=K.workerId),typeof K.input=="string"?a.postMessage({workerId:_.WORKER_ID,results:_.parse(K.input,K.config),finished:!0}):(a.File&&K.input instanceof File||K.input instanceof Object)&&(K=_.parse(K.input,K.config))&&a.postMessage({workerId:_.WORKER_ID,results:K,finished:!0})}),(I.prototype=Object.create(C.prototype)).constructor=I,(E.prototype=Object.create(C.prototype)).constructor=E,(S.prototype=Object.create(S.prototype)).constructor=S,(k.prototype=Object.create(C.prototype)).constructor=k,_})})(ST);var jD=ST.exports;const VD=Ff(jD);var Yy={};Yy.attr=A2;Yy.tagClose=UD;Yy.tag=HD;Yy.encode=$D;function A2(t){return t&&t.length?" "+t.map(function(e){return e[0]+'="'+e[1]+'"'}).join(" "):""}function UD(t,e){return"<"+t+A2(e)+"/>"}function HD(t,e,n){return"<"+t+A2(n)+">"+e+"</"+t+">"}function $D(t){return(t===null?"":t.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var ET=Yy,Kr=ET.tag,Ly=ET.encode,GD=function(e,n){return n=n||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"},'<?xml version="1.0" encoding="UTF-8"?>'+Kr("kml",Kr("Document",WD(n)+qD(n)+ZD(e,n)),[["xmlns","http://www.opengis.net/kml/2.2"]])};function iA(t,e){return function(n){if(!n.properties||!Wc.valid(n.geometry))return"";var a=Wc.any(n.geometry);if(!a)return"";var s="",d="";if(t.simplestyle){var l=aO(n.properties);l&&(Wc.isPoint(n.geometry)&&tO(n.properties)?(e.indexOf(l)===-1&&(s=eO(n.properties,l),e.push(l)),d=Kr("styleUrl","#"+l)):(Wc.isPolygon(n.geometry)||Wc.isLine(n.geometry))&&iO(n.properties)&&(e.indexOf(l)===-1&&(s=oO(n.properties,l),e.push(l)),d=Kr("styleUrl","#"+l)))}return s+Kr("Placemark",KD(n.properties,t)+YD(n.properties,t)+QD(n.properties)+XD(n.properties,t)+a+d)}}function ZD(t,e){if(!t.type)return"";var n=[];switch(t.type){case"FeatureCollection":return t.features?t.features.map(iA(e,n)).join(""):"";case"Feature":return iA(e,n)(t);default:return iA(e,n)({type:"Feature",geometry:t,properties:{}})}}function WD(t){return t.documentName!==void 0?Kr("name",t.documentName):""}function qD(t){return t.documentDescription!==void 0?Kr("description",t.documentDescription):""}function KD(t,e){return t[e.name]?Kr("name",Ly(t[e.name])):""}function YD(t,e){return t[e.description]?Kr("description",Ly(t[e.description])):""}function XD(t,e){return t[e.timestamp]?Kr("TimeStamp",Kr("when",Ly(t[e.timestamp]))):""}var Wc={Point:function(t){return Kr("Point",Kr("coordinates",t.coordinates.join(",")))},LineString:function(t){return Kr("LineString",Kr("coordinates",oA(t.coordinates)))},Polygon:function(t){if(!t.coordinates.length)return"";var e=t.coordinates[0],n=t.coordinates.slice(1),a=Kr("outerBoundaryIs",Kr("LinearRing",Kr("coordinates",oA(e)))),s=n.map(function(d){return Kr("innerBoundaryIs",Kr("LinearRing",Kr("coordinates",oA(d))))}).join("");return Kr("Polygon",a+s)},MultiPoint:function(t){return t.coordinates.length?Kr("MultiGeometry",t.coordinates.map(function(e){return Wc.Point({coordinates:e})}).join("")):""},MultiPolygon:function(t){return t.coordinates.length?Kr("MultiGeometry",t.coordinates.map(function(e){return Wc.Polygon({coordinates:e})}).join("")):""},MultiLineString:function(t){return t.coordinates.length?Kr("MultiGeometry",t.coordinates.map(function(e){return Wc.LineString({coordinates:e})}).join("")):""},GeometryCollection:function(t){return Kr("MultiGeometry",t.geometries.map(Wc.any).join(""))},valid:function(t){return t&&t.type&&(t.coordinates||t.type==="GeometryCollection"&&t.geometries&&t.geometries.every(Wc.valid))},any:function(t){return Wc[t.type]?Wc[t.type](t):""},isPoint:function(t){return t.type==="Point"||t.type==="MultiPoint"},isPolygon:function(t){return t.type==="Polygon"||t.type==="MultiPolygon"},isLine:function(t){return t.type==="LineString"||t.type==="MultiLineString"}};function oA(t){return t.map(function(e){return e.join(",")}).join(" ")}function QD(t){return Kr("ExtendedData",sO(t).map(JD).join(""))}function JD(t){return Kr("Data",Kr("value",Ly(t[1])),[["name",Ly(t[0])]])}function tO(t){return!!(t["marker-size"]||t["marker-symbol"]||t["marker-color"])}function eO(t,e){return Kr("Style",Kr("IconStyle",Kr("Icon",Kr("href",nO(t))))+rO(),[["id",e]])}function nO(t){var e=t["marker-size"]||"medium",n=t["marker-symbol"]?"-"+t["marker-symbol"]:"",a=(t["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+e.charAt(0)+n+"+"+a+".png"}function rO(t){return Kr("hotSpot","",[["xunits","fraction"],["yunits","fraction"],["x",.5],["y",.5]])}function iO(t){for(var e in t)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[e])return!0}function oO(t,e){var n=Kr("LineStyle",[Kr("color",BI(t.stroke,t["stroke-opacity"])||"ff555555")+Kr("width",t["stroke-width"]===void 0?2:t["stroke-width"])]),a="";return(t.fill||t["fill-opacity"])&&(a=Kr("PolyStyle",[Kr("color",BI(t.fill,t["fill-opacity"])||"88555555")])),Kr("Style",n+a,[["id",e]])}function aO(t){var e="";return t["marker-symbol"]&&(e=e+"ms"+t["marker-symbol"]),t["marker-color"]&&(e=e+"mc"+t["marker-color"].replace("#","")),t["marker-size"]&&(e=e+"ms"+t["marker-size"]),t.stroke&&(e=e+"s"+t.stroke.replace("#","")),t["stroke-width"]&&(e=e+"sw"+t["stroke-width"].toString().replace(".","")),t["stroke-opacity"]&&(e=e+"mo"+t["stroke-opacity"].toString().replace(".","")),t.fill&&(e=e+"f"+t.fill.replace("#","")),t["fill-opacity"]&&(e=e+"fo"+t["fill-opacity"].toString().replace(".","")),e}function BI(t,e){if(typeof t!="string")return"";if(t=t.replace("#","").toLowerCase(),t.length===3)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(t.length!==6)return"";var n=t[0]+t[1],a=t[2]+t[3],s=t[4]+t[5],d="ff";return typeof e=="number"&&e>=0&&e<=1&&(d=(e*255).toString(16),d.indexOf(".")>-1&&(d=d.substr(0,d.indexOf("."))),d.length<2&&(d="0"+d)),d+s+a+n}function sO(t){var e=[];for(var n in t)e.push([n,t[n]]);return e}const lO=Ff(GD);function cO(t){var n;switch((n=t.split(".").pop())==null?void 0:n.toLowerCase()){case"geojson":case"json":return"geojson";case"zip":case"shp":return"shapefile";case"kml":return"kml";case"csv":return"csv";default:return null}}function uO(){async function t(e,{format:n,filename:a="data"}={}){const s=n||cO(a);if(!s)return console.error("Khng xc nh c nh dng u ra."),null;switch(s){case"geojson":return new Blob([JSON.stringify(e)],{type:"application/geo+json"});case"shapefile":{const d={folder:"shapefile",types:{point:"points",polygon:"polygons",line:"lines"},compression:"DEFLATE",outputType:"blob"},l=await cb.zip(e,d);return l instanceof Blob?l:l instanceof ArrayBuffer?new Blob([l]):l instanceof Uint8Array?new Blob([l.buffer]):Array.isArray(l)?new Blob([new Uint8Array(l).buffer]):typeof l=="string"?new Blob([l],{type:"text/plain"}):(console.error("Kt qu khng xc nh:",l),null)}case"kml":{const d=lO(e);return new Blob([d],{type:"application/vnd.google-earth.kml+xml"})}case"csv":{const d=e.features.map(o=>({...o.properties,geometry:JSON.stringify(o.geometry)})),l=VD.unparse(d);return new Blob([l],{type:"text/csv"})}default:return console.error("nh dng khng c h tr:",s),null}}return{convert:t}}var TT="M17.45,17.55L12,23L6.55,17.55L7.96,16.14L11,19.17V4.83L7.96,7.86L6.55,6.45L12,1L17.45,6.45L16.04,7.86L13,4.83V19.17L16.04,16.14L17.45,17.55Z",hO="M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12",PT="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",kT="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",xg="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",dO="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",LT="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z",fO="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",pO="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",RT="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z",Rg="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z",mO="M20.94 11C20.5 6.83 17.17 3.5 13 3.06V1H11V3.06C9.87 3.18 8.81 3.5 7.84 4.03L9.34 5.53C10.16 5.19 11.06 5 12 5C15.87 5 19 8.13 19 12C19 12.94 18.81 13.84 18.5 14.65L20 16.15C20.5 15.19 20.82 14.13 20.95 13H23V11H20.94M3 4.27L5.04 6.31C3.97 7.62 3.25 9.23 3.06 11H1V13H3.06C3.5 17.17 6.83 20.5 11 20.94V23H13V20.94C14.77 20.74 16.38 20.03 17.69 18.96L19.73 21L21 19.73L4.27 3L3 4.27M16.27 17.54C15.09 18.45 13.61 19 12 19C8.13 19 5 15.87 5 12C5 10.39 5.55 8.91 6.46 7.73L16.27 17.54Z",gO="M13.75,10.19L14.38,10.32L18.55,12.4C19.25,12.63 19.71,13.32 19.65,14.06V14.19L19.65,14.32L18.75,20.44C18.69,20.87 18.5,21.27 18.15,21.55C17.84,21.85 17.43,22 17,22H10.12C9.63,22 9.18,21.82 8.85,21.47L2.86,15.5L3.76,14.5C4,14.25 4.38,14.11 4.74,14.13H5.03L9,15V4.5A2,2 0 0,1 11,2.5A2,2 0 0,1 13,4.5V10.19H13.75Z",Bf="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",w2="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",pb="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",yO="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",vO="M13,5V11H14.17L12,13.17L9.83,11H11V5H13M15,3H9V9H5L12,16L19,9H15V3M19,18H5V20H19V18Z",_O="M9.75 20.85C11.53 20.15 11.14 18.22 10.24 17C9.35 15.75 8.12 14.89 6.88 14.06C6 13.5 5.19 12.8 4.54 12C4.26 11.67 3.69 11.06 4.27 10.94C4.86 10.82 5.88 11.4 6.4 11.62C7.31 12 8.21 12.44 9.05 12.96L10.06 11.26C8.5 10.23 6.5 9.32 4.64 9.05C3.58 8.89 2.46 9.11 2.1 10.26C1.78 11.25 2.29 12.25 2.87 13.03C4.24 14.86 6.37 15.74 7.96 17.32C8.3 17.65 8.71 18.04 8.91 18.5C9.12 18.94 9.07 18.97 8.6 18.97C7.36 18.97 5.81 18 4.8 17.36L3.79 19.06C5.32 20 7.88 21.47 9.75 20.85M20.84 5.25C21.06 5.03 21.06 4.67 20.84 4.46L19.54 3.16C19.33 2.95 18.97 2.95 18.76 3.16L17.74 4.18L19.82 6.26M11 10.92V13H13.08L19.23 6.85L17.15 4.77L11 10.92Z",DT="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",OT="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z",bO="M3,16H8V14H3V16M9.5,16H14.5V14H9.5V16M16,16H21V14H16V16M3,20H5V18H3V20M7,20H9V18H7V20M11,20H13V18H11V20M15,20H17V18H15V20M19,20H21V18H19V20M3,12H11V10H3V12M13,12H21V10H13V12M3,4V8H21V4H3Z",xO="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z",AO="M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z",C2="M1,1V5H2V19H1V23H5V22H19V23H23V19H22V5H23V1H19V2H5V1M5,4H19V5H20V19H19V20H5V19H4V5H5M6,6V14H9V18H18V9H14V6M8,8H12V12H8M14,11H16V16H11V14H14",wO="M14,3V13L17.2,11.31L17.42,11.28C17.71,11.28 17.97,11.4 18.16,11.6L18.9,12.37L14,16.57C13.74,16.84 13.39,17 13,17H6.5C5.73,17 5,16.3 5,15.5V11.14C5,10.53 5.35,10 5.85,9.8L10.79,7.6L12,7.47V3A1,1 0 0,1 13,2A1,1 0 0,1 14,3M5,19H13V22H5V19Z",CO="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",IO="M19 3H5A2 2 0 0 0 3 5V19A2 2 0 0 0 5 21H19A2 2 0 0 0 21 19V5A2 2 0 0 0 19 3M5 19V17H8.13A4.13 4.13 0 0 0 9.4 19M19 19H14.6A4.13 4.13 0 0 0 15.87 17H19M19 15H14V16A2 2 0 0 1 10 16V15H5V5H19Z",zT="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",Xy="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z",MO="M12,18.54L19.37,12.8L21,14.07L12,21.07L3,14.07L4.62,12.81L12,18.54M12,16L3,9L12,2L21,9L12,16M12,4.53L6.26,9L12,13.47L17.74,9L12,4.53Z",I2="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z",SO="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",EO="M15,19L9,16.89V5L15,7.11M20.5,3C20.44,3 20.39,3 20.34,3L15,5.1L9,3L3.36,4.9C3.15,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21C3.55,21 3.61,21 3.66,20.97L9,18.9L15,21L20.64,19.1C20.85,19 21,18.85 21,18.62V3.5A0.5,0.5 0 0,0 20.5,3Z",M2="M12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5M12,2A7,7 0 0,1 19,9C19,14.25 12,22 12,22C12,22 5,14.25 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9C7,10 7,12 12,18.71C17,12 17,10 17,9A5,5 0 0,0 12,4Z",TO="M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M14,6.11L8,4V15.89L9,16.24V16.5C9,17.14 9.09,17.76 9.26,18.34L8,17.9L2.66,19.97L2.5,20A0.5,0.5 0 0,1 2,19.5V4.38C2,4.15 2.15,3.97 2.36,3.9L8,2L14,4.1L19.34,2H19.5A0.5,0.5 0 0,1 20,2.5V11.81C18.83,10.69 17.25,10 15.5,10C15,10 14.5,10.06 14,10.17V6.11Z",vJ="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",FT="M7,10L12,15L17,10H7Z",PO="M14,7L9,12L14,17V7Z",kO="M7,15L12,10L17,15H7Z",LO="M19,13H5V11H19V13Z",BT="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",RO="M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z",vd="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",DO="M9.8 21C9.6 20.6 9.3 20.2 9.2 19.7L8.8 19H8V14H13C14.2 13.4 15.6 13 17 13C18.9 13 20.6 13.6 22 14.6V11C22 9.3 20.7 8 19 8H5C3.3 8 2 9.3 2 11V17H6V21H9.8M19 10C19.6 10 20 10.4 20 11S19.6 12 19 12 18 11.6 18 11 18.4 10 19 10M18 7H6V3H18V7M17 18C17.6 18 18 18.4 18 19S17.6 20 17 20 16 19.6 16 19 16.4 18 17 18M17 15C14.3 15 11.9 16.7 11 19C11.9 21.3 14.3 23 17 23S22.1 21.3 23 19C22.1 16.7 19.7 15 17 15M17 21.5C15.6 21.5 14.5 20.4 14.5 19S15.6 16.5 17 16.5 19.5 17.6 19.5 19 18.4 21.5 17 21.5Z",OO="M19 8C20.66 8 22 9.34 22 11V17H18V21H6V17H2V11C2 9.34 3.34 8 5 8H6V3H18V8H19M8 5V8H16V5H8M16 19V15H8V19H16M18 15H20V11C20 10.45 19.55 10 19 10H5C4.45 10 4 10.45 4 11V15H6V13H18V15M19 11.5C19 12.05 18.55 12.5 18 12.5C17.45 12.5 17 12.05 17 11.5C17 10.95 17.45 10.5 18 10.5C18.55 10.5 19 10.95 19 11.5Z",zO="M1.39,18.36L3.16,16.6L4.58,18L5.64,16.95L4.22,15.54L5.64,14.12L8.11,16.6L9.17,15.54L6.7,13.06L8.11,11.65L9.53,13.06L10.59,12L9.17,10.59L10.59,9.17L13.06,11.65L14.12,10.59L11.65,8.11L13.06,6.7L14.47,8.11L15.54,7.05L14.12,5.64L15.54,4.22L18,6.7L19.07,5.64L16.6,3.16L18.36,1.39L22.61,5.64L5.64,22.61L1.39,18.36Z",FO="M20 19.88V22L18.2 20.83L13.41 11.83A4.94 4.94 0 0 0 15.19 10.83M15 7A3 3 0 0 1 12 10A3.27 3.27 0 0 1 11.56 10L5.8 20.83L4 22V19.88L9.79 9A3 3 0 0 1 12 4V2A1 1 0 0 1 13 3V4.18A3 3 0 0 1 15 7M13 7A1 1 0 1 0 12 8A1 1 0 0 0 13 7M4.22 10L6 11.8L4.56 14.56L2.1 12.1M12 17.76L10.5 16.25L9 19L12 22L15 19L13.53 16.23M19.78 10L18 11.8L19.5 14.56L21.9 12.1Z",BO="M4,3H5V5H3V4A1,1 0 0,1 4,3M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M21,20A1,1 0 0,1 20,21H19V19H21V20M15,21V19H17V21H15M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M3,7H5V9H3V7M21,7V9H19V7H21Z",NO="M1 6V19A2 2 0 0 0 3 21H9V11H21V6A2 2 0 0 0 19 4H3A2 2 0 0 0 1 6M3 6H7V9H3M7 19H3V16H7M7 14H3V11H7M9 9V6H13V9M19 9H15V6H19M17 16A1 1 0 1 1 16 17A1 1 0 0 1 17 16M17 13A6.45 6.45 0 0 1 23 17A6.5 6.5 0 0 1 11 17A6.45 6.45 0 0 1 17 13M17 14.5A2.5 2.5 0 1 0 19.5 17A2.5 2.5 0 0 0 17 14.5",jO="M2,2H6V3H13V2H17V6H16V9H18V8H22V12H21V18H22V22H18V21H12V22H8V18H9V16H6V17H2V13H3V6H2V2M18,12V11H16V13H17V17H13V16H11V18H12V19H18V18H19V12H18M13,6V5H6V6H5V13H6V14H9V12H8V8H12V9H14V6H13M12,12H11V14H13V13H14V11H12V12Z",VO="M9,10V16H15V10H19L12,3L5,10H9M12,5.8L14.2,8H13V14H11V8H9.8L12,5.8M19,18H5V20H19V18Z";const NI={mdi:{size:24,viewbox:"0 0 24 24"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},UO={name:"icon",props:{type:String,path:{type:String,required:!0},size:{type:[String,Number],default:24},viewbox:String,flip:{type:String,validator:t=>["horizontal","vertical","both","none"].includes(t)},rotate:{type:Number,default:0}},computed:{styles(){return{"--sx":["both","horizontal"].includes(this.flip)?"-1":"1","--sy":["both","vertical"].includes(this.flip)?"-1":"1","--r":isNaN(this.rotate)?this.rotate:this.rotate+"deg"}},defaults(){return NI[this.type]||NI.default},sizeValue(){return this.size||this.defaults.size},viewboxValue(){return this.viewbox||this.defaults.viewbox}}},HO=["width","height","viewBox"],$O=["d"];function GO(t,e,n,a,s,d){return Mt(),pe("svg",{width:d.sizeValue,height:d.sizeValue,viewBox:d.viewboxValue,style:fi(d.styles)},[Nt("path",{d:n.path},null,8,$O)],12,HO)}const Zn=Vn(UO,[["render",GO],["__scopeId","data-v-0fb36228"]]),ZO={components:{SvgIcon:Zn},props:{height:{default:32},width:{default:32},loading:Boolean,active:Boolean,disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},path(){return{loading:I2}}}},WO=["disabled"],qO={class:"map-control-button__content"};function KO(t,e,n,a,s,d){const l=Js("SvgIcon");return Mt(),pe("button",Tr({class:"map-control-button",style:d.bindStyle,disabled:n.disabled},t.$attrs,{class:{"map-control-button-active":n.active,"map-control-button-disabled":n.disabled}}),[Nt("span",qO,[n.loading?(Mt(),Je(l,{key:0,size:n.height*2/3,type:"mdi",path:d.path.loading,class:"spin"},null,8,["size","path"])):Wn(t.$slots,"default",{key:1},void 0,!0)])],16,WO)}const NT=Vn(ZO,[["render",KO],["__scopeId","data-v-06662425"]]),YO={props:{},computed:{iconName(){return""}}};function XO(t,e,n,a,s,d){return Mt(),pe("i",{class:Li(["map-icon mdi",d.iconName])},null,2)}const S2=Vn(YO,[["render",XO],["__scopeId","data-v-d0a88ad0"]]),QO={components:{MapButton:NT,MapIcon:S2},props:{items:{type:Array,default:()=>[]},row:Boolean,size:{type:[Number,String],default:32}},provide(){return{isGroup:!0,size:this.size}}};function JO(t,e,n,a,s,d){const l=Js("MapIcon"),o=Js("MapButton");return Mt(),pe("div",{class:Li(["button-container button-group-container",{"button-group-row-container":n.row,"button-group-column-container":!n.row}]),style:fi({width:n.row?null:n.size+"px",height:n.row?n.size+"px":null})},[Nt("div",{class:Li(["button-group-sheet",{"button-group-sheet-column":!n.row}]),style:{"border-radius":"150px"}},[(Mt(!0),pe(mr,null,ki(n.items,(g,_)=>(Mt(),Je(o,{key:_+""+g.titl,height:n.size,text:"",title:g.title,width:n.size,onClick:g.onClick},{default:Ie(()=>[ee(l,null,{default:Ie(()=>[fo(Rn(g.icon),1)]),_:2},1024)]),_:2},1032,["height","title","width","onClick"]))),128)),Wn(t.$slots,"default",{},void 0,!0)],2)],6)}const Ag=Vn(QO,[["render",JO],["__scopeId","data-v-a47987bf"]]),t8={components:{MapButton:NT,MapIcon:S2},props:{icon:{type:[String,Boolean]},tooltip:String,title:String,loading:Boolean,size:{type:Number,default:32},active:Boolean,disabled:Boolean},inject:{isGroup:{default:!1},groupSize:{default:0,from:"size"}},computed:{}},e8={key:1,class:"button-container"},n8=["title"];function r8(t,e,n,a,s,d){const l=Js("MapIcon"),o=Js("MapButton");return d.isGroup?(Mt(),Je(o,Tr({key:0},t.$attrs,{active:n.active,height:d.groupSize,title:n.tooltip||n.title,width:d.groupSize,disabled:n.disabled}),{default:Ie(()=>[Wn(t.$slots,"default",{},()=>[ee(l,null,{default:Ie(()=>[fo(Rn(n.icon),1)]),_:1})],!0)]),_:3},16,["active","height","title","width","disabled"])):(Mt(),pe("div",e8,[Nt("div",{title:n.tooltip||n.title},[Wn(t.$slots,"content",{},()=>[ee(o,Tr(t.$attrs,{active:n.active,height:n.size,loading:n.loading,width:n.size,disabled:n.disabled}),{default:Ie(()=>[Wn(t.$slots,"default",{},()=>[ee(l,null,{default:Ie(()=>[fo(Rn(n.icon),1)]),_:1})],!0)]),_:3},16,["active","height","loading","width","disabled"])],!0)],8,n8)]))}const ui=Vn(t8,[["render",r8],["__scopeId","data-v-da6cc99f"]]),i8={props:{src:{}},data:()=>({}),computed:{styleImage(){return this.src?{"background-image":`url(${this.src})`}:{}}},methods:{}},o8=t=>(_c("data-v-97c90e54"),t=t(),bc(),t),a8={class:"map-image"},s8=o8(()=>Nt("div",{class:"map-image__sizer",style:{"padding-bottom":"100%"}},null,-1)),l8={class:"map-image__content"};function c8(t,e,n,a,s,d){return Mt(),pe("div",a8,[s8,Nt("div",{class:"map-image__image",style:fi(d.styleImage)},null,4),Nt("div",l8,[Wn(t.$slots,"default",{},void 0,!0)])])}const yw=Vn(i8,[["render",c8],["__scopeId","data-v-97c90e54"]]),u8={props:{height:{},width:{}},data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},h8=eb('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1);function d8(t,e,n,a,s,d){return Mt(),pe("div",Tr({class:"card",style:d.cardStyle},t.$attrs),[Nt("div",null,[Wn(t.$slots,"default")]),h8],16)}const f8=Vn(u8,[["render",d8]]),p8={class:"form-group"},m8={key:0},g8={class:"input-container"},y8=["disabled"],v8={name:"InputText"},_8=nr({...v8,props:to({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=la(t,"modelValue");return(n,a)=>(Mt(),pe("div",p8,[t.label?(Mt(),pe("label",m8,Rn(t.label),1)):wn("",!0),Nt("div",g8,[gc(Nt("input",Tr(n.$attrs,{"onUpdate:modelValue":a[0]||(a[0]=s=>e.value=s),disabled:t.disabled}),null,16,y8),[[p2,e.value]])])]))}}),Pi=Vn(_8,[["__scopeId","data-v-52d6ae64"]]),b8={class:"form-group"},x8={key:0},A8={class:"input-container"},w8={value:"",disabled:"",selected:"",hidden:""},C8=["value"],I8=nr({__name:"input-select",props:to({label:String,items:{type:Array,default:()=>[]},itemValue:{type:String,default:"value"},itemText:{type:String,default:"text"},returnObject:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=la(t,"modelValue"),n=t;function a(l){return typeof l=="string"||n.returnObject?l:l[n.itemValue]}function s(l){return typeof l=="string"?l:l[n.itemText]}function d(l){return typeof l=="string"?l:l[n.itemValue]}return(l,o)=>(Mt(),pe("div",b8,[t.label?(Mt(),pe("label",x8,Rn(t.label),1)):wn("",!0),Nt("div",A8,[gc(Nt("select",Tr(l.$attrs,{"onUpdate:modelValue":o[0]||(o[0]=g=>e.value=g),required:""}),[Nt("option",w8,Rn(l.$attrs.placeholder),1),(Mt(!0),pe(mr,null,ki(t.items,g=>(Mt(),pe("option",{value:a(g),key:d(g)},Rn(s(g)),9,C8))),128))],16),[[ab,e.value]])])]))}}),Tf=Vn(I8,[["__scopeId","data-v-2fa00323"]]),M8={__name:"base-button",props:{active:Boolean,disabled:Boolean},setup(t){const e=t;return(n,a)=>(Mt(),pe("button",Tr({class:"map-control__button clickable"},n.$attrs,{class:{"map-control__button-active":e.active,"map-control__button-disabled":e.disabled}}),[Wn(n.$slots,"default",{},void 0,!0)],16))}},Cl=Vn(M8,[["__scopeId","data-v-60fc15c5"]]),S8=["aria-expanded"],E8={class:"collapse-header__title"},T8={class:"collapse-header__icon"},P8={key:0,class:"collapse-content"},k8={class:"collapse-content-box"},L8={name:"Collapse"},R8=Object.assign(L8,{props:{selected:{type:Boolean,default:!0}},emits:["update:selected","open","close"],setup(t,{emit:e}){const n=t,a=e,s=mn(n.selected),d=()=>{s.value=!s.value,a("update:selected",s.value),s.value?a("open"):a("close")},l={open:FT,close:kO};return(o,g)=>(Mt(),pe("div",{class:Li(["collapse collapse-item",{"is-active":s.value}])},[Nt("div",{class:"collapse-header touchable",role:"tab","aria-expanded":s.value?"true":"false",onClick:_i(d,["prevent"])},[Nt("div",E8,[Wn(o.$slots,"header",{},void 0,!0)]),Nt("div",T8,[s.value?(Mt(),Je(ut(Zn),{key:0,size:"14",type:"mdi",path:l.close},null,8,["path"])):(Mt(),Je(ut(Zn),{key:1,size:"14",type:"mdi",path:l.open},null,8,["path"]))])],8,S8),ee(nb,{name:"fade"},{default:Ie(()=>[s.value?(Mt(),pe("div",P8,[Nt("div",k8,[Wn(o.$slots,"default",{},void 0,!0)])])):wn("",!0)]),_:3})],2))}}),vw=Vn(R8,[["__scopeId","data-v-208c4e72"]]),D8={class:"form-group"},O8={key:0},z8={class:"input-container"},F8=nr({__name:"input-textarea",props:to({label:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=la(t,"modelValue");return(n,a)=>(Mt(),pe("div",D8,[t.label?(Mt(),pe("label",O8,Rn(t.label),1)):wn("",!0),Nt("div",z8,[gc(Nt("textarea",Tr(n.$attrs,{"onUpdate:modelValue":a[0]||(a[0]=s=>e.value=s)}),null,16),[[wh,e.value]])])]))}}),jT=Vn(F8,[["__scopeId","data-v-23a6d5c7"]]),B8={class:"form-group"},N8={key:0},j8={class:"input-container"},V8=["min","max","step","disabled"],U8={class:"input-slider__value"},H8=["min","max","step","disabled"],$8=nr({__name:"input-slider",props:to({label:String,min:{default:0},max:{default:100},step:{default:1},disabled:Boolean},{modelValue:{default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=la(t,"modelValue"),n=t,a=_n(()=>(e.value-n.min)*100/(n.max-n.min)+"% 100%");return(s,d)=>(Mt(),pe("div",B8,[t.label?(Mt(),pe("label",N8,Rn(t.label),1)):wn("",!0),Nt("div",j8,[gc(Nt("input",{"onUpdate:modelValue":d[0]||(d[0]=l=>e.value=l),type:"range",min:t.min,max:t.max,step:t.step,style:fi({backgroundSize:a.value}),disabled:t.disabled},null,12,V8),[[wh,e.value]]),Nt("div",U8,[gc(Nt("input",{"onUpdate:modelValue":d[1]||(d[1]=l=>e.value=l),type:"number",min:t.min,max:t.max,step:t.step,disabled:t.disabled},null,8,H8),[[wh,e.value]])])])]))}}),A1=Vn($8,[["__scopeId","data-v-6248ac13"]]),G8={class:"form-group"},Z8={class:"form-control form-checkbox"},W8=["disabled"],q8=nr({__name:"input-checkbox",props:to({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=la(t,"modelValue");return(n,a)=>(Mt(),pe("div",G8,[Nt("div",Z8,[gc(Nt("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=s=>e.value=s),disabled:t.disabled},null,8,W8),[[ob,e.value]]),Nt("label",null,Rn(t.label),1)])]))}}),K8=Vn(q8,[["__scopeId","data-v-d59a9d80"]]),Y8={class:"form-group"},X8={key:0},Q8={class:"input-container"},J8=["onClick"],tz={__name:"input-choose",props:to({label:String,items:{type:Array,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=la(t,"modelValue");function n(a){e.value=a.value}return(a,s)=>(Mt(),pe("div",Y8,[t.label?(Mt(),pe("label",X8,Rn(t.label),1)):wn("",!0),Nt("div",Q8,[(Mt(!0),pe(mr,null,ki(t.items,d=>(Mt(),pe("div",{key:d.value,class:Li(["item-choose",{"item-choose-active":d.value===e.value}]),onClick:_i(l=>n(d),["stop"])},Rn(d.text),11,J8))),128))])]))}},ez=Vn(tz,[["__scopeId","data-v-4763dc50"]]),nz="";function Dg(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&a.firstChild?a.insertBefore(s,a.firstChild):a.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}const Og=function(t,e){const{componentPrefix:n=nz}=e||{};t.component(`${n}${this.name}`,this)},aA={};var Qy={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":`url(${iz(this.white,this.grey,this.size)})`}}}};function rz(t,e,n){if(typeof document>"u")return null;const a=document.createElement("canvas");a.width=a.height=n*2;const s=a.getContext("2d");return s?(s.fillStyle=t,s.fillRect(0,0,a.width,a.height),s.fillStyle=e,s.fillRect(0,0,n,n),s.translate(n,n),s.fillRect(0,0,n,n),a.toDataURL()):null}function iz(t,e,n){const a=`${t},${e},${n}`;if(aA[a])return aA[a];const s=rz(t,e,n);return aA[a]=s,s}function oz(t,e,n,a,s,d){return Mt(),pe("div",{class:"vc-checkerboard",style:fi(d.bgStyle)},null,4)}var az=".vc-checkerboard{background-size:contain;bottom:0;left:0;position:absolute;right:0;top:0}";Dg(az);Qy.render=oz;Qy.__file="src/components/checkboard/checkboard.vue";Qy.install=Og;var mb={name:"Alpha",components:{Checkboard:Qy},props:{value:Object,onChange:Function},computed:{colors(){return this.value},gradientColor(){const{rgba:t}=this.colors,e=[t.r,t.g,t.b].join(",");return`linear-gradient(to right, rgba(${e}, 0) 0%, rgba(${e}, 1) 100%)`}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:n}=this.$refs;if(!n)return;const a=n.clientWidth,s=n.getBoundingClientRect().left+window.pageXOffset,l=(t.pageX||(t.touches?t.touches[0].pageX:0))-s;let o;l<0?o=0:l>a?o=1:o=Math.round(l*100/a)/100,this.colors.a!==o&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:o,source:"rgba"})},handleMouseDown(t){this.handleChange(t,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const sz={class:"vc-alpha"},lz={class:"vc-alpha-checkboard-wrap"},cz=Nt("div",{class:"vc-alpha-picker"},null,-1),uz=[cz];function hz(t,e,n,a,s,d){const l=Js("Checkboard");return Mt(),pe("div",sz,[Nt("div",lz,[ee(l)]),Nt("div",{class:"vc-alpha-gradient",style:fi({background:d.gradientColor})},null,4),Nt("div",{ref:"container",class:"vc-alpha-container",onMousedown:e[0]||(e[0]=(...o)=>d.handleMouseDown&&d.handleMouseDown(...o)),onTouchmove:e[1]||(e[1]=(...o)=>d.handleChange&&d.handleChange(...o)),onTouchstart:e[2]||(e[2]=(...o)=>d.handleChange&&d.handleChange(...o))},[Nt("div",{class:"vc-alpha-pointer",style:fi({left:`${d.colors.a*100}%`})},uz,4)],544)])}var dz=".vc-alpha,.vc-alpha-checkboard-wrap{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-container{cursor:pointer;height:100%;margin:0 3px;position:relative;z-index:2}.vc-alpha-pointer{position:absolute;z-index:2}.vc-alpha-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";Dg(dz);mb.render=hz;mb.__file="src/components/alpha/alpha.vue";mb.install=Og;function ss(t,e){fz(t)&&(t="100%");var n=pz(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function z_(t){return Math.min(1,Math.max(0,t))}function fz(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function pz(t){return typeof t=="string"&&t.indexOf("%")!==-1}function VT(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function F_(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Dp(t){return t.length===1?"0"+t:String(t)}function mz(t,e,n){return{r:ss(t,255)*255,g:ss(e,255)*255,b:ss(n,255)*255}}function jI(t,e,n){t=ss(t,255),e=ss(e,255),n=ss(n,255);var a=Math.max(t,e,n),s=Math.min(t,e,n),d=0,l=0,o=(a+s)/2;if(a===s)l=0,d=0;else{var g=a-s;switch(l=o>.5?g/(2-a-s):g/(a+s),a){case t:d=(e-n)/g+(e<n?6:0);break;case e:d=(n-t)/g+2;break;case n:d=(t-e)/g+4;break}d/=6}return{h:d,s:l,l:o}}function sA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function gz(t,e,n){var a,s,d;if(t=ss(t,360),e=ss(e,100),n=ss(n,100),e===0)s=n,d=n,a=n;else{var l=n<.5?n*(1+e):n+e-n*e,o=2*n-l;a=sA(o,l,t+1/3),s=sA(o,l,t),d=sA(o,l,t-1/3)}return{r:a*255,g:s*255,b:d*255}}function VI(t,e,n){t=ss(t,255),e=ss(e,255),n=ss(n,255);var a=Math.max(t,e,n),s=Math.min(t,e,n),d=0,l=a,o=a-s,g=a===0?0:o/a;if(a===s)d=0;else{switch(a){case t:d=(e-n)/o+(e<n?6:0);break;case e:d=(n-t)/o+2;break;case n:d=(t-e)/o+4;break}d/=6}return{h:d,s:g,v:l}}function yz(t,e,n){t=ss(t,360)*6,e=ss(e,100),n=ss(n,100);var a=Math.floor(t),s=t-a,d=n*(1-e),l=n*(1-s*e),o=n*(1-(1-s)*e),g=a%6,_=[n,l,d,d,o,n][g],C=[o,n,n,l,d,d][g],I=[d,d,o,n,n,l][g];return{r:_*255,g:C*255,b:I*255}}function UI(t,e,n,a){var s=[Dp(Math.round(t).toString(16)),Dp(Math.round(e).toString(16)),Dp(Math.round(n).toString(16))];return a&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function vz(t,e,n,a,s){var d=[Dp(Math.round(t).toString(16)),Dp(Math.round(e).toString(16)),Dp(Math.round(n).toString(16)),Dp(_z(a))];return s&&d[0].startsWith(d[0].charAt(1))&&d[1].startsWith(d[1].charAt(1))&&d[2].startsWith(d[2].charAt(1))&&d[3].startsWith(d[3].charAt(1))?d[0].charAt(0)+d[1].charAt(0)+d[2].charAt(0)+d[3].charAt(0):d.join("")}function _z(t){return Math.round(parseFloat(t)*255).toString(16)}function HI(t){return cc(t)/255}function cc(t){return parseInt(t,16)}function bz(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var _w={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function xz(t){var e={r:0,g:0,b:0},n=1,a=null,s=null,d=null,l=!1,o=!1;return typeof t=="string"&&(t=Cz(t)),typeof t=="object"&&(nd(t.r)&&nd(t.g)&&nd(t.b)?(e=mz(t.r,t.g,t.b),l=!0,o=String(t.r).substr(-1)==="%"?"prgb":"rgb"):nd(t.h)&&nd(t.s)&&nd(t.v)?(a=F_(t.s),s=F_(t.v),e=yz(t.h,a,s),l=!0,o="hsv"):nd(t.h)&&nd(t.s)&&nd(t.l)&&(a=F_(t.s),d=F_(t.l),e=gz(t.h,a,d),l=!0,o="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=VT(n),{ok:l,format:t.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var Az="[-\\+]?\\d+%?",wz="[-\\+]?\\d*\\.\\d+%?",vf="(?:".concat(wz,")|(?:").concat(Az,")"),lA="[\\s|\\(]+(".concat(vf,")[,|\\s]+(").concat(vf,")[,|\\s]+(").concat(vf,")\\s*\\)?"),cA="[\\s|\\(]+(".concat(vf,")[,|\\s]+(").concat(vf,")[,|\\s]+(").concat(vf,")[,|\\s]+(").concat(vf,")\\s*\\)?"),Lu={CSS_UNIT:new RegExp(vf),rgb:new RegExp("rgb"+lA),rgba:new RegExp("rgba"+cA),hsl:new RegExp("hsl"+lA),hsla:new RegExp("hsla"+cA),hsv:new RegExp("hsv"+lA),hsva:new RegExp("hsva"+cA),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Cz(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(_w[t])t=_w[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=Lu.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=Lu.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Lu.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=Lu.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Lu.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=Lu.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Lu.hex8.exec(t),n?{r:cc(n[1]),g:cc(n[2]),b:cc(n[3]),a:HI(n[4]),format:e?"name":"hex8"}:(n=Lu.hex6.exec(t),n?{r:cc(n[1]),g:cc(n[2]),b:cc(n[3]),format:e?"name":"hex"}:(n=Lu.hex4.exec(t),n?{r:cc(n[1]+n[1]),g:cc(n[2]+n[2]),b:cc(n[3]+n[3]),a:HI(n[4]+n[4]),format:e?"name":"hex8"}:(n=Lu.hex3.exec(t),n?{r:cc(n[1]+n[1]),g:cc(n[2]+n[2]),b:cc(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function nd(t){return!!Lu.CSS_UNIT.exec(String(t))}var Iz=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var a;if(e instanceof t)return e;typeof e=="number"&&(e=bz(e)),this.originalInput=e;var s=xz(e);this.originalInput=e,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=n.format)!==null&&a!==void 0?a:s.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,a,s,d=e.r/255,l=e.g/255,o=e.b/255;return d<=.03928?n=d/12.92:n=Math.pow((d+.055)/1.055,2.4),l<=.03928?a=l/12.92:a=Math.pow((l+.055)/1.055,2.4),o<=.03928?s=o/12.92:s=Math.pow((o+.055)/1.055,2.4),.2126*n+.7152*a+.0722*s},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=VT(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=VI(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=VI(this.r,this.g,this.b),n=Math.round(e.h*360),a=Math.round(e.s*100),s=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(a,"%, ").concat(s,"%)"):"hsva(".concat(n,", ").concat(a,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=jI(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=jI(this.r,this.g,this.b),n=Math.round(e.h*360),a=Math.round(e.s*100),s=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(a,"%, ").concat(s,"%)"):"hsla(".concat(n,", ").concat(a,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),UI(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),vz(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(a,")"):"rgba(".concat(e,", ").concat(n,", ").concat(a,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(ss(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(ss(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+UI(this.r,this.g,this.b,!1),n=0,a=Object.entries(_w);n<a.length;n++){var s=a[n],d=s[0],l=s[1];if(e===l)return d}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var a=!1,s=this.a<1&&this.a>=0,d=!n&&s&&(e.startsWith("hex")||e==="name");return d?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(a=this.toRgbString()),e==="prgb"&&(a=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(a=this.toHexString()),e==="hex3"&&(a=this.toHexString(!0)),e==="hex4"&&(a=this.toHex8String(!0)),e==="hex8"&&(a=this.toHex8String()),e==="name"&&(a=this.toName()),e==="hsl"&&(a=this.toHslString()),e==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=z_(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=z_(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=z_(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=z_(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),a=(n.h+e)%360;return n.h=a<0?360+a:a,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var a=this.toRgb(),s=new t(e).toRgb(),d=n/100,l={r:(s.r-a.r)*d+a.r,g:(s.g-a.g)*d+a.g,b:(s.b-a.b)*d+a.b,a:(s.a-a.a)*d+a.a};return new t(l)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var a=this.toHsl(),s=360/n,d=[this];for(a.h=(a.h-(s*e>>1)+720)%360;--e;)a.h=(a.h+s)%360,d.push(new t(a));return d},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),a=n.h,s=n.s,d=n.v,l=[],o=1/e;e--;)l.push(new t({h:a,s,v:d})),d=(d+o)%1;return l},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),a=new t(e).toRgb(),s=n.a+a.a*(1-n.a);return new t({r:(n.r*n.a+a.r*a.a*(1-n.a))/s,g:(n.g*n.a+a.g*a.a*(1-n.a))/s,b:(n.b*n.a+a.b*a.a*(1-n.a))/s,a:s})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),a=n.h,s=[this],d=360/e,l=1;l<e;l++)s.push(new t({h:(a+l*d)%360,s:n.s,l:n.l}));return s},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function pf(...t){return new Iz(...t)}function uA(t,e){const n=t&&t.a;let a;t&&t.hsl?a=pf(t.hsl):t&&t.hex&&t.hex.length>0?a=pf(t.hex):t&&t.hsv?a=pf(t.hsv):t&&t.rgba?a=pf(t.rgba):t&&t.rgb?a=pf(t.rgb):a=pf(t),a&&(a._a===void 0||a._a===null)&&a.setAlpha(n||a.getAlpha());const s=a.toHsl(),d=a.toHsv();return s.s===0&&(d.h=s.h=t.h||t.hsl&&t.hsl.h||e||0),d.v<.0164&&(d.h=t.h||t.hsv&&t.hsv.h||0,d.s=t.s||t.hsv&&t.hsv.s||0),s.l<.01&&(s.h=t.h||t.hsl&&t.hsl.h||0,s.s=t.s||t.hsl&&t.hsl.s||0),{hsl:s,hex:a.toHexString().toUpperCase(),hex8:a.toHex8String().toUpperCase(),rgba:a.toRgb(),hsv:d,oldHue:t.h||e||s.h,source:t.source,a:a.getAlpha()}}var Mz={model:{prop:"modelValue",event:"update:modelValue"},props:["modelValue"],data(){return{val:uA(this.modelValue)}},computed:{colors:{get(){return this.val},set(t){this.val=t,this.$emit("update:modelValue",t)}}},watch:{modelValue(t){this.val=uA(t)}},methods:{colorChange(t,e){this.oldHue=this.colors.hsl.h,this.colors=uA(t,e||this.oldHue)},isValidHex(t){return pf(t).isValid},simpleCheckForValidColor(t){const e=["r","g","b","a","h","s","l","v"];let n=0,a=0;for(let s=0;s<e.length;s++){const d=e[s];t[d]&&(n++,isNaN(t[d])||a++)}if(n===a)return t},paletteUpperCase(t){return t.map(e=>e.toUpperCase())},isTransparent(t){return pf(t).getAlpha()===0}}},gb={name:"EditableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.value},set(t){if(this.max!==void 0&&+t>this.max)this.$refs.input.value=this.max;else return t}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(t){this.handleChange(t.target.value)},handleChange(t){const e={};e[this.label]=t,e.hex===void 0&&e["#"]===void 0?this.$emit("change",e):t.length>5&&this.$emit("change",e)},handleKeyDown(t){let{val:e}=this;const n=Number(e);if(n){const a=this.arrowOffset||1;t.keyCode===38&&(e=n+a,this.handleChange(e),t.preventDefault()),t.keyCode===40&&(e=n-a,this.handleChange(e),t.preventDefault())}}}};const Sz={class:"vc-editable-input"},Ez=["aria-labelledby"],Tz=["id","for"],Pz={class:"vc-input__desc"};function kz(t,e,n,a,s,d){return Mt(),pe("div",Sz,[gc(Nt("input",{ref:"input","onUpdate:modelValue":e[0]||(e[0]=l=>d.val=l),"aria-labelledby":d.labelId,class:"vc-input__input",onKeydown:e[1]||(e[1]=(...l)=>d.handleKeyDown&&d.handleKeyDown(...l)),onInput:e[2]||(e[2]=(...l)=>d.update&&d.update(...l))},null,40,Ez),[[wh,d.val]]),Nt("span",{id:d.labelId,for:n.label,class:"vc-input__label"},Rn(d.labelSpanText),9,Tz),Nt("span",Pz,Rn(n.desc),1)])}var Lz=".vc-editable-input{position:relative}.vc-input__input{border:0;outline:none;padding:0}.vc-input__label{text-transform:capitalize}";Dg(Lz);gb.render=kz;gb.__file="src/components/editable-input/editable-input.vue";gb.install=Og;function hA(t,e,n){return e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t}var yb={name:"Saturation",props:{value:Object},computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return`${-(this.colors.hsv.v*100)+1+100}%`},pointerLeft(){return`${this.colors.hsv.s*100}%`}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:n}=this.$refs;if(!n)return;const a=n.clientWidth,s=n.clientHeight,d=n.getBoundingClientRect().left+window.pageXOffset,l=n.getBoundingClientRect().top+window.pageYOffset,o=t.pageX||(t.touches?t.touches[0].pageX:0),g=t.pageY||(t.touches?t.touches[0].pageY:0),_=hA(o-d,0,a),C=hA(g-l,0,s),I=_/a,E=hA(-(C/s)+1,0,1);this.onChange({h:this.colors.hsv.h,s:I,v:E,a:this.colors.hsv.a,source:"hsva"})},onChange(t){this.$emit("change",t)},handleMouseDown(t){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(t){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const Rz=Nt("div",{class:"vc-saturation--white"},null,-1),Dz=Nt("div",{class:"vc-saturation--black"},null,-1),Oz=Nt("div",{class:"vc-saturation-circle"},null,-1),zz=[Oz];function Fz(t,e,n,a,s,d){return Mt(),pe("div",{ref:"container",class:"vc-saturation",style:fi({background:d.bgColor}),onMousedown:e[0]||(e[0]=(...l)=>d.handleMouseDown&&d.handleMouseDown(...l)),onTouchmove:e[1]||(e[1]=(...l)=>d.handleChange&&d.handleChange(...l)),onTouchstart:e[2]||(e[2]=(...l)=>d.handleChange&&d.handleChange(...l))},[Rz,Dz,Nt("div",{class:"vc-saturation-pointer",style:fi({top:d.pointerTop,left:d.pointerLeft})},zz,4)],36)}var Bz=".vc-saturation,.vc-saturation--black,.vc-saturation--white{bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{border-radius:50%;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);cursor:head;height:4px;transform:translate(-2px,-2px);width:4px}";Dg(Bz);yb.render=Fz;yb.__file="src/components/saturation/saturation.vue";yb.install=Og;var vb={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){return this.value},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:`${-(this.colors.hsl.h*100/360)+100}%`:0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":`${this.colors.hsl.h*100/360}%`}},watch:{value:{handler(t,e){const{h:n}=t.hsl;n!==0&&n-this.oldHue>0&&(this.pullDirection="right"),n!==0&&n-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=n},deep:!0,immediate:!0}},methods:{handleChange(t,e){!e&&t.preventDefault();const{container:n}=this.$refs;if(!n)return;const a=n.clientWidth,s=n.clientHeight,d=n.getBoundingClientRect().left+window.pageXOffset,l=n.getBoundingClientRect().top+window.pageYOffset,o=t.pageX||(t.touches?t.touches[0].pageX:0),g=t.pageY||(t.touches?t.touches[0].pageY:0),_=o-d,C=g-l;let I,E;this.direction==="vertical"?(C<0?I=360:C>s?I=0:(E=-(C*100/s)+100,I=360*E/100),this.colors.hsl.h!==I&&this.$emit("change",{h:I,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(_<0?I=0:_>a?I=360:(E=_*100/a,I=360*E/100),this.colors.hsl.h!==I&&this.$emit("change",{h:I,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(t){this.handleChange(t,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(t){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const Nz=["aria-valuenow"],jz=Nt("div",{class:"vc-hue-picker"},null,-1),Vz=[jz];function Uz(t,e,n,a,s,d){return Mt(),pe("div",{class:Li(["vc-hue",[d.directionClass]])},[Nt("div",{ref:"container",class:"vc-hue-container",role:"slider","aria-valuenow":d.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",onMousedown:e[0]||(e[0]=(...l)=>d.handleMouseDown&&d.handleMouseDown(...l)),onTouchmove:e[1]||(e[1]=(...l)=>d.handleChange&&d.handleChange(...l)),onTouchstart:e[2]||(e[2]=(...l)=>d.handleChange&&d.handleChange(...l))},[Nt("div",{class:"vc-hue-pointer",style:fi({top:d.pointerTop,left:d.pointerLeft}),role:"presentation"},Vz,4)],40,Nz)],2)}var Hz=".vc-hue{border-radius:2px;bottom:0;left:0;position:absolute;right:0;top:0}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;height:100%;margin:0 2px;position:relative}.vc-hue-pointer{position:absolute;z-index:2}.vc-hue-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";Dg(Hz);vb.render=Uz;vb.__file="src/components/hue/hue.vue";vb.install=Og;const $z=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var _b={name:"Sketch",components:{Saturation:yb,Hue:vb,Alpha:mb,EdIn:gb,Checkboard:Qy},mixins:[Mz],props:{presetColors:{type:Array,default(){return $z}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let t;return this.colors.a<1?t=this.colors.hex8:t=this.colors.hex,t.replace("#","")},activeColor(){const{rgba:t}=this.colors;return`rgba(${[t.r,t.g,t.b,t.a].join(",")})`}},methods:{handlePreset(t){this.colorChange(t)},childChange(t){this.colorChange(t)},inputChange(t){t&&(t.hex?this.isValidHex(t.hex)&&this.colorChange({hex:t.hex,source:"hex"}):(t.r||t.g||t.b||t.a)&&this.colorChange({r:t.r||this.colors.rgba.r,g:t.g||this.colors.rgba.g,b:t.b||this.colors.rgba.b,a:t.a||this.colors.rgba.a,source:"rgba"}))}}};const Gz={class:"vc-sketch-saturation-wrap"},Zz={class:"vc-sketch-controls"},Wz={class:"vc-sketch-sliders"},qz={class:"vc-sketch-hue-wrap"},Kz={key:0,class:"vc-sketch-alpha-wrap"},Yz={class:"vc-sketch-color-wrap"},Xz=["aria-label"],Qz={key:0,class:"vc-sketch-field"},Jz={class:"vc-sketch-field--double"},tF={class:"vc-sketch-field--single"},eF={class:"vc-sketch-field--single"},nF={class:"vc-sketch-field--single"},rF={key:0,class:"vc-sketch-field--single"},iF={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},oF=["aria-label","onClick"],aF=["aria-label","onClick"];function sF(t,e,n,a,s,d){const l=Js("Saturation"),o=Js("Hue"),g=Js("Alpha"),_=Js("Checkboard"),C=Js("EdIn");return Mt(),pe("div",{role:"application","aria-label":"Sketch color picker",class:Li(["vc-sketch",[n.disableAlpha?"vc-sketch__disable-alpha":""]])},[Nt("div",Gz,[ee(l,{value:t.colors,onChange:d.childChange},null,8,["value","onChange"])]),Nt("div",Zz,[Nt("div",Wz,[Nt("div",qz,[ee(o,{value:t.colors,onChange:d.childChange},null,8,["value","onChange"])]),n.disableAlpha?wn("v-if",!0):(Mt(),pe("div",Kz,[ee(g,{value:t.colors,onChange:d.childChange},null,8,["value","onChange"])]))]),Nt("div",Yz,[Nt("div",{"aria-label":`Current color is ${d.activeColor}`,class:"vc-sketch-active-color",style:fi({background:d.activeColor})},null,12,Xz),ee(_)])]),n.disableFields?wn("v-if",!0):(Mt(),pe("div",Qz,[wn(" rgba "),Nt("div",Jz,[ee(C,{label:"hex",value:d.hex,onChange:d.inputChange},null,8,["value","onChange"])]),Nt("div",tF,[ee(C,{label:"r",value:t.colors.rgba.r,onChange:d.inputChange},null,8,["value","onChange"])]),Nt("div",eF,[ee(C,{label:"g",value:t.colors.rgba.g,onChange:d.inputChange},null,8,["value","onChange"])]),Nt("div",nF,[ee(C,{label:"b",value:t.colors.rgba.b,onChange:d.inputChange},null,8,["value","onChange"])]),n.disableAlpha?wn("v-if",!0):(Mt(),pe("div",rF,[ee(C,{label:"a",value:t.colors.a,"arrow-offset":.01,max:1,onChange:d.inputChange},null,8,["value","arrow-offset","onChange"])]))])),Nt("div",iF,[(Mt(!0),pe(mr,null,ki(n.presetColors,I=>(Mt(),pe(mr,null,[t.isTransparent(I)?(Mt(),pe("div",{key:I,"aria-label":`Color:${I}`,class:"vc-sketch-presets-color",onClick:E=>d.handlePreset(I)},[ee(_)],8,aF)):(Mt(),pe("div",{key:`!${I}`,class:"vc-sketch-presets-color","aria-label":`Color:${I}`,style:fi({background:I}),onClick:E=>d.handlePreset(I)},null,12,oF))],64))),256))])],2)}var lF=".vc-sketch{background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;padding:10px 10px 0;position:relative;width:200px}.vc-sketch-saturation-wrap{overflow:hidden;padding-bottom:75%;position:relative;width:100%}.vc-sketch-controls{display:flex}.vc-sketch-sliders{flex:1;padding:4px 0}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{height:10px;position:relative}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{border-radius:3px;height:24px;margin-left:4px;margin-top:4px;position:relative;width:24px}.vc-sketch-active-color{border-radius:2px;bottom:0;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);left:0;position:absolute;right:0;top:0;z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px;padding:4px 0 3px 10%;width:90%}.vc-sketch-field .vc-input__label{color:#222;display:block;font-size:11px;padding-bottom:4px;padding-top:3px;text-align:center;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{border-top:1px solid #eee;margin-left:-10px;margin-right:-10px;padding-left:10px;padding-top:10px}.vc-sketch-presets-color{cursor:pointer;display:inline-block;height:16px;margin:0 10px 10px 0;overflow:hidden;position:relative;vertical-align:top;width:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}";Dg(lF);_b.render=sF;_b.__file="src/components/sketch/sketch.vue";_b.install=Og;const cF={class:"form-group"},uF={key:0},hF={class:"input-container"},dF=nr({__name:"input-colorPicker",props:to({label:String,disabled:Boolean},{modelValue:{default:"#000000"},modelModifiers:{}}),emits:to(["change"],["update:modelValue"]),setup(t,{emit:e}){const n=la(t,"modelValue"),a=e;function s({hex:d}){n.value=d,a("change",d)}return(d,l)=>(Mt(),pe("div",cF,[t.label?(Mt(),pe("label",uF,Rn(t.label),1)):wn("",!0),Nt("div",hF,[ee(ut(_b),Tr({modelValue:n.value},d.$attrs,{"onUpdate:modelValue":s,disabled:t.disabled}),null,16,["modelValue","disabled"])])]))}});var w1={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */w1.exports;(function(t,e){(function(){var n,a="4.17.21",s=200,d="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",o="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",_=500,C="__lodash_placeholder__",I=1,E=2,S=4,k=1,R=2,B=1,V=2,F=4,j=8,G=16,Q=32,nt=64,X=128,K=256,Z=512,at=30,pt="...",rt=800,xt=16,q=1,zt=2,Rt=3,Bt=1/0,Xt=9007199254740991,ge=17976931348623157e292,en=NaN,te=4294967295,Gt=te-1,Re=te>>>1,Ge=[["ary",X],["bind",B],["bindKey",V],["curry",j],["curryRight",G],["flip",Z],["partial",Q],["partialRight",nt],["rearg",K]],Ce="[object Arguments]",nn="[object Array]",be="[object AsyncFunction]",Se="[object Boolean]",xe="[object Date]",Be="[object DOMException]",tn="[object Error]",Ln="[object Function]",Tt="[object GeneratorFunction]",H="[object Map]",Dt="[object Number]",Pt="[object Null]",yt="[object Object]",vt="[object Promise]",Ut="[object Proxy]",ne="[object RegExp]",ue="[object Set]",Ht="[object String]",Me="[object Symbol]",je="[object Undefined]",Le="[object WeakMap]",Ke="[object WeakSet]",bn="[object ArrayBuffer]",Cn="[object DataView]",de="[object Float32Array]",ve="[object Float64Array]",Te="[object Int8Array]",Ye="[object Int16Array]",un="[object Int32Array]",Nn="[object Uint8Array]",ae="[object Uint8ClampedArray]",ht="[object Uint16Array]",gt="[object Uint32Array]",Ct=/\b__p \+= '';/g,kt=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oe=/&(?:amp|lt|gt|quot|#39);/g,he=/[&<>"']/g,Kt=RegExp(oe.source),Fe=RegExp(he.source),Ve=/<%-([\s\S]+?)%>/g,we=/<%([\s\S]+?)%>/g,rn=/<%=([\s\S]+?)%>/g,Sn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,En=/^\w*$/,ir=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gr=/[\\^$.*+?()[\]{}|]/g,Ue=RegExp(gr.source),$n=/^\s+/,Fr=/\s/,Yr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pr=/\{\n\/\* \[wrapped with (.+)\] \*/,Ze=/,? & /,zn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Jn=/[()=,{}\[\]\/\s]/,eo=/\\(\\)?/g,Po=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pi=/\w*$/,Xn=/^[-+]0x[0-9a-f]+$/i,tu=/^0b[01]+$/i,Pl=/^\[object .+?Constructor\]$/,Uu=/^0o[0-7]+$/i,Ms=/^(?:0|[1-9]\d*)$/,Hu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ri=/($^)/,mi=/['\n\r\u2028\u2029\\]/g,wi="\\ud800-\\udfff",kl="\\u0300-\\u036f",Ac="\\ufe20-\\ufe2f",ri="\\u20d0-\\u20ff",Ss=kl+Ac+ri,$u="\\u2700-\\u27bf",us="a-z\\xdf-\\xf6\\xf8-\\xff",Ma="\\xac\\xb1\\xd7\\xf7",Es="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ts="\\u2000-\\u206f",Ll=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Sh="A-Z\\xc0-\\xd6\\xd8-\\xde",wd="\\ufe0e\\ufe0f",Eh=Ma+Es+Ts+Ll,Gu="[']",Zu="["+wi+"]",wc="["+Eh+"]",Rl="["+Ss+"]",Ps="\\d+",Th="["+$u+"]",eu="["+us+"]",Dl="[^"+wi+Eh+Ps+$u+us+Sh+"]",Ua="\\ud83c[\\udffb-\\udfff]",O="(?:"+Rl+"|"+Ua+")",Y="[^"+wi+"]",At="(?:\\ud83c[\\udde6-\\uddff]){2}",$t="[\\ud800-\\udbff][\\udc00-\\udfff]",Zt="["+Sh+"]",Qt="\\u200d",_e="(?:"+eu+"|"+Dl+")",cn="(?:"+Zt+"|"+Dl+")",dn="(?:"+Gu+"(?:d|ll|m|re|s|t|ve))?",An="(?:"+Gu+"(?:D|LL|M|RE|S|T|VE))?",gn=O+"?",Mn="["+wd+"]?",Kn="(?:"+Qt+"(?:"+[Y,At,$t].join("|")+")"+Mn+gn+")*",Zr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",or="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ai=Mn+gn+Kn,on="(?:"+[Th,At,$t].join("|")+")"+ai,kn="(?:"+[Y+Rl+"?",Rl,At,$t,Zu].join("|")+")",Rr=RegExp(Gu,"g"),xi=RegExp(Rl,"g"),gi=RegExp(Ua+"(?="+Ua+")|"+kn+ai,"g"),Jo=RegExp([Zt+"?"+eu+"+"+dn+"(?="+[wc,Zt,"$"].join("|")+")",cn+"+"+An+"(?="+[wc,Zt+_e,"$"].join("|")+")",Zt+"?"+_e+"+"+dn,Zt+"+"+An,or,Zr,Ps,on].join("|"),"g"),nu=RegExp("["+Qt+wi+Ss+wd+"]"),ur=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wr=-1,Fn={};Fn[de]=Fn[ve]=Fn[Te]=Fn[Ye]=Fn[un]=Fn[Nn]=Fn[ae]=Fn[ht]=Fn[gt]=!0,Fn[Ce]=Fn[nn]=Fn[bn]=Fn[Se]=Fn[Cn]=Fn[xe]=Fn[tn]=Fn[Ln]=Fn[H]=Fn[Dt]=Fn[yt]=Fn[ne]=Fn[ue]=Fn[Ht]=Fn[Le]=!1;var Xr={};Xr[Ce]=Xr[nn]=Xr[bn]=Xr[Cn]=Xr[Se]=Xr[xe]=Xr[de]=Xr[ve]=Xr[Te]=Xr[Ye]=Xr[un]=Xr[H]=Xr[Dt]=Xr[yt]=Xr[ne]=Xr[ue]=Xr[Ht]=Xr[Me]=Xr[Nn]=Xr[ae]=Xr[ht]=Xr[gt]=!0,Xr[tn]=Xr[Ln]=Xr[Le]=!1;var Dr={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Cc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ca={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ol={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ru=parseFloat,qu=parseInt,zl=typeof ho=="object"&&ho&&ho.Object===Object&&ho,iu=typeof self=="object"&&self&&self.Object===Object&&self,Fi=zl||iu||Function("return this")(),ou=e&&!e.nodeType&&e,Ha=ou&&!0&&t&&!t.nodeType&&t,Fl=Ha&&Ha.exports===ou,no=Fl&&zl.process,ro=function(){try{var me=Ha&&Ha.require&&Ha.require("util").types;return me||no&&no.binding&&no.binding("util")}catch{}}(),_o=ro&&ro.isArrayBuffer,nl=ro&&ro.isDate,Br=ro&&ro.isMap,Bl=ro&&ro.isRegExp,Ic=ro&&ro.isSet,Ku=ro&&ro.isTypedArray;function Xi(me,We,ze){switch(ze.length){case 0:return me.call(We);case 1:return me.call(We,ze[0]);case 2:return me.call(We,ze[0],ze[1]);case 3:return me.call(We,ze[0],ze[1],ze[2])}return me.apply(We,ze)}function Nl(me,We,ze,Tn){for(var rr=-1,br=me==null?0:me.length;++rr<br;){var xr=me[rr];We(Tn,xr,ze(xr),me)}return Tn}function Ho(me,We){for(var ze=-1,Tn=me==null?0:me.length;++ze<Tn&&We(me[ze],ze,me)!==!1;);return me}function Cd(me,We){for(var ze=me==null?0:me.length;ze--&&We(me[ze],ze,me)!==!1;);return me}function au(me,We){for(var ze=-1,Tn=me==null?0:me.length;++ze<Tn;)if(!We(me[ze],ze,me))return!1;return!0}function bo(me,We){for(var ze=-1,Tn=me==null?0:me.length,rr=0,br=[];++ze<Tn;){var xr=me[ze];We(xr,ze,me)&&(br[rr++]=xr)}return br}function $o(me,We){var ze=me==null?0:me.length;return!!ze&&hs(me,We,0)>-1}function jl(me,We,ze){for(var Tn=-1,rr=me==null?0:me.length;++Tn<rr;)if(ze(We,me[Tn]))return!0;return!1}function ii(me,We){for(var ze=-1,Tn=me==null?0:me.length,rr=Array(Tn);++ze<Tn;)rr[ze]=We(me[ze],ze,me);return rr}function ua(me,We){for(var ze=-1,Tn=We.length,rr=me.length;++ze<Tn;)me[rr+ze]=We[ze];return me}function $a(me,We,ze,Tn){var rr=-1,br=me==null?0:me.length;for(Tn&&br&&(ze=me[++rr]);++rr<br;)ze=We(ze,me[rr],rr,me);return ze}function su(me,We,ze,Tn){var rr=me==null?0:me.length;for(Tn&&rr&&(ze=me[--rr]);rr--;)ze=We(ze,me[rr],rr,me);return ze}function ta(me,We){for(var ze=-1,Tn=me==null?0:me.length;++ze<Tn;)if(We(me[ze],ze,me))return!0;return!1}var Ph=ds("length");function Vl(me){return me.split("")}function rl(me){return me.match(zn)||[]}function Mc(me,We,ze){var Tn;return ze(me,function(rr,br,xr){if(We(rr,br,xr))return Tn=br,!1}),Tn}function lu(me,We,ze,Tn){for(var rr=me.length,br=ze+(Tn?1:-1);Tn?br--:++br<rr;)if(We(me[br],br,me))return br;return-1}function hs(me,We,ze){return We===We?Rh(me,We,ze):lu(me,ks,ze)}function Nf(me,We,ze,Tn){for(var rr=ze-1,br=me.length;++rr<br;)if(Tn(me[rr],We))return rr;return-1}function ks(me){return me!==me}function Yu(me,We){var ze=me==null?0:me.length;return ze?Sa(me,We)/ze:en}function ds(me){return function(We){return We==null?n:We[me]}}function Ga(me){return function(We){return me==null?n:me[We]}}function Ls(me,We,ze,Tn,rr){return rr(me,function(br,xr,$r){ze=Tn?(Tn=!1,br):We(ze,br,xr,$r)}),ze}function Sc(me,We){var ze=me.length;for(me.sort(We);ze--;)me[ze]=me[ze].value;return me}function Sa(me,We){for(var ze,Tn=-1,rr=me.length;++Tn<rr;){var br=We(me[Tn]);br!==n&&(ze=ze===n?br:ze+br)}return ze}function cu(me,We){for(var ze=-1,Tn=Array(me);++ze<me;)Tn[ze]=We(ze);return Tn}function Ec(me,We){return ii(We,function(ze){return[ze,me[ze]]})}function Ul(me){return me&&me.slice(0,Ae(me)+1).replace($n,"")}function Zi(me){return function(We){return me(We)}}function uu(me,We){return ii(We,function(ze){return me[ze]})}function il(me,We){return me.has(We)}function Tc(me,We){for(var ze=-1,Tn=me.length;++ze<Tn&&hs(We,me[ze],0)>-1;);return ze}function kh(me,We){for(var ze=me.length;ze--&&hs(We,me[ze],0)>-1;);return ze}function hu(me,We){for(var ze=me.length,Tn=0;ze--;)me[ze]===We&&++Tn;return Tn}var du=Ga(Dr),Hl=Ga(Cc);function Id(me){return"\\"+Ol[me]}function Rs(me,We){return me==null?n:me[We]}function ol(me){return nu.test(me)}function fs(me){return ur.test(me)}function Lh(me){for(var We,ze=[];!(We=me.next()).done;)ze.push(We.value);return ze}function Pc(me){var We=-1,ze=Array(me.size);return me.forEach(function(Tn,rr){ze[++We]=[rr,Tn]}),ze}function ha(me,We){return function(ze){return me(We(ze))}}function da(me,We){for(var ze=-1,Tn=me.length,rr=0,br=[];++ze<Tn;){var xr=me[ze];(xr===We||xr===C)&&(me[ze]=C,br[rr++]=ze)}return br}function $l(me){var We=-1,ze=Array(me.size);return me.forEach(function(Tn){ze[++We]=Tn}),ze}function Xu(me){var We=-1,ze=Array(me.size);return me.forEach(function(Tn){ze[++We]=[Tn,Tn]}),ze}function Rh(me,We,ze){for(var Tn=ze-1,rr=me.length;++Tn<rr;)if(me[Tn]===We)return Tn;return-1}function Gl(me,We,ze){for(var Tn=ze+1;Tn--;)if(me[Tn]===We)return Tn;return Tn}function _r(me){return ol(me)?Dn(me):Ph(me)}function fa(me){return ol(me)?sr(me):Vl(me)}function Ae(me){for(var We=me.length;We--&&Fr.test(me.charAt(We)););return We}var qe=Ga(ca);function Dn(me){for(var We=gi.lastIndex=0;gi.test(me);)++We;return We}function sr(me){return me.match(gi)||[]}function yi(me){return me.match(Jo)||[]}var Hr=function me(We){We=We==null?Fi:si.defaults(Fi.Object(),We,si.pick(Fi,Wu));var ze=We.Array,Tn=We.Date,rr=We.Error,br=We.Function,xr=We.Math,$r=We.Object,Ds=We.RegExp,kc=We.String,Di=We.TypeError,Za=ze.prototype,fu=br.prototype,ps=$r.prototype,Zl=We["__core-js_shared__"],Jr=fu.toString,tr=ps.hasOwnProperty,Os=0,ms=function(){var m=/[^.]+$/.exec(Zl&&Zl.keys&&Zl.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),al=ps.toString,vr=Jr.call($r),Ea=Fi._,sl=Ds("^"+Jr.call(tr).replace(gr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wa=Fl?We.Buffer:n,Go=We.Symbol,zs=We.Uint8Array,ll=Wa?Wa.allocUnsafe:n,Wl=ha($r.getPrototypeOf,$r),pu=$r.create,Lc=ps.propertyIsEnumerable,pa=Za.splice,Fs=Go?Go.isConcatSpreadable:n,cl=Go?Go.iterator:n,Ta=Go?Go.toStringTag:n,ul=function(){try{var m=wu($r,"defineProperty");return m({},"",{}),m}catch{}}(),Md=We.clearTimeout!==Fi.clearTimeout&&We.clearTimeout,Sd=Tn&&Tn.now!==Fi.Date.now&&Tn.now,Ed=We.setTimeout!==Fi.setTimeout&&We.setTimeout,Dh=xr.ceil,Qu=xr.floor,jf=$r.getOwnPropertySymbols,Vf=Wa?Wa.isBuffer:n,Ju=We.isFinite,Td=Za.join,Uf=ha($r.keys,$r),Wi=xr.max,Qi=xr.min,Oh=Tn.now,Pd=We.parseInt,Hf=xr.random,qi=Za.reverse,ql=wu(We,"DataView"),ea=wu(We,"Map"),zh=wu(We,"Promise"),Rc=wu(We,"Set"),mu=wu(We,"WeakMap"),Bs=wu($r,"create"),Ns=mu&&new mu,Dc={},$f=dh(ql),Gf=dh(ea),Qp=dh(zh),Zf=dh(Rc),Wf=dh(mu),Pa=Go?Go.prototype:n,th=Pa?Pa.valueOf:n,qf=Pa?Pa.toString:n;function St(m){if($i(m)&&!Er(m)&&!(m instanceof kr)){if(m instanceof qa)return m;if(tr.call(m,"__wrapped__"))return _v(m)}return new qa(m)}var gu=function(){function m(){}return function(x){if(!Ki(x))return{};if(pu)return pu(x);m.prototype=x;var D=new m;return m.prototype=n,D}}();function Fh(){}function qa(m,x){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!x,this.__index__=0,this.__values__=n}St.templateSettings={escape:Ve,evaluate:we,interpolate:rn,variable:"",imports:{_:St}},St.prototype=Fh.prototype,St.prototype.constructor=St,qa.prototype=gu(Fh.prototype),qa.prototype.constructor=qa;function kr(m){this.__wrapped__=m,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function Oc(){var m=new kr(this.__wrapped__);return m.__actions__=va(this.__actions__),m.__dir__=this.__dir__,m.__filtered__=this.__filtered__,m.__iteratees__=va(this.__iteratees__),m.__takeCount__=this.__takeCount__,m.__views__=va(this.__views__),m}function ka(){if(this.__filtered__){var m=new kr(this);m.__dir__=-1,m.__filtered__=!0}else m=this.clone(),m.__dir__*=-1;return m}function ma(){var m=this.__wrapped__.value(),x=this.__dir__,D=Er(m),tt=x<0,mt=D?m.length:0,Lt=jb(0,mt,this.__views__),ie=Lt.start,ye=Lt.end,Pe=ye-ie,hn=tt?ye:ie-1,fn=this.__iteratees__,xn=fn.length,Un=0,dr=Qi(Pe,this.__takeCount__);if(!D||!tt&&mt==Pe&&dr==Pe)return Wo(m,this.__actions__);var wr=[];t:for(;Pe--&&Un<dr;){hn+=x;for(var qr=-1,Cr=m[hn];++qr<xn;){var ei=fn[qr],oi=ei.iteratee,sc=ei.type,Ks=oi(Cr);if(sc==zt)Cr=Ks;else if(!Ks){if(sc==q)continue t;break t}}wr[Un++]=Cr}return wr}kr.prototype=gu(Fh.prototype),kr.prototype.constructor=kr;function Zo(m){var x=-1,D=m==null?0:m.length;for(this.clear();++x<D;){var tt=m[x];this.set(tt[0],tt[1])}}function Jp(){this.__data__=Bs?Bs(null):{},this.size=0}function hl(m){var x=this.has(m)&&delete this.__data__[m];return this.size-=x?1:0,x}function dl(m){var x=this.__data__;if(Bs){var D=x[m];return D===g?n:D}return tr.call(x,m)?x[m]:n}function tm(m){var x=this.__data__;return Bs?x[m]!==n:tr.call(x,m)}function Kf(m,x){var D=this.__data__;return this.size+=this.has(m)?0:1,D[m]=Bs&&x===n?g:x,this}Zo.prototype.clear=Jp,Zo.prototype.delete=hl,Zo.prototype.get=dl,Zo.prototype.has=tm,Zo.prototype.set=Kf;function Kl(m){var x=-1,D=m==null?0:m.length;for(this.clear();++x<D;){var tt=m[x];this.set(tt[0],tt[1])}}function Yf(){this.__data__=[],this.size=0}function em(m){var x=this.__data__,D=zc(x,m);if(D<0)return!1;var tt=x.length-1;return D==tt?x.pop():pa.call(x,D,1),--this.size,!0}function Yl(m){var x=this.__data__,D=zc(x,m);return D<0?n:x[D][1]}function Xl(m){return zc(this.__data__,m)>-1}function On(m,x){var D=this.__data__,tt=zc(D,m);return tt<0?(++this.size,D.push([m,x])):D[tt][1]=x,this}Kl.prototype.clear=Yf,Kl.prototype.delete=em,Kl.prototype.get=Yl,Kl.prototype.has=Xl,Kl.prototype.set=On;function fl(m){var x=-1,D=m==null?0:m.length;for(this.clear();++x<D;){var tt=m[x];this.set(tt[0],tt[1])}}function Xf(){this.size=0,this.__data__={hash:new Zo,map:new(ea||Kl),string:new Zo}}function Bh(m){var x=pm(this,m).delete(m);return this.size-=x?1:0,x}function Nh(m){return pm(this,m).get(m)}function yu(m){return pm(this,m).has(m)}function jh(m,x){var D=pm(this,m),tt=D.size;return D.set(m,x),this.size+=D.size==tt?0:1,this}fl.prototype.clear=Xf,fl.prototype.delete=Bh,fl.prototype.get=Nh,fl.prototype.has=yu,fl.prototype.set=jh;function Ar(m){var x=-1,D=m==null?0:m.length;for(this.__data__=new fl;++x<D;)this.add(m[x])}function kd(m){return this.__data__.set(m,g),this}function nm(m){return this.__data__.has(m)}Ar.prototype.add=Ar.prototype.push=kd,Ar.prototype.has=nm;function La(m){var x=this.__data__=new Kl(m);this.size=x.size}function Qf(){this.__data__=new Kl,this.size=0}function rm(m){var x=this.__data__,D=x.delete(m);return this.size=x.size,D}function im(m){return this.__data__.get(m)}function Ld(m){return this.__data__.has(m)}function om(m,x){var D=this.__data__;if(D instanceof Kl){var tt=D.__data__;if(!ea||tt.length<s-1)return tt.push([m,x]),this.size=++D.size,this;D=this.__data__=new fl(tt)}return D.set(m,x),this.size=D.size,this}La.prototype.clear=Qf,La.prototype.delete=rm,La.prototype.get=im,La.prototype.has=Ld,La.prototype.set=om;function Jf(m,x){var D=Er(m),tt=!D&&ph(m),mt=!D&&!tt&&Ja(m),Lt=!D&&!tt&&!mt&&Yh(m),ie=D||tt||mt||Lt,ye=ie?cu(m.length,kc):[],Pe=ye.length;for(var hn in m)(x||tr.call(m,hn))&&!(ie&&(hn=="length"||mt&&(hn=="offset"||hn=="parent")||Lt&&(hn=="buffer"||hn=="byteLength"||hn=="byteOffset")||Cu(hn,Pe)))&&ye.push(hn);return ye}function Rd(m){var x=m.length;return x?m[le(0,x-1)]:n}function am(m,x){return hh(va(m),na(x,0,m.length))}function jg(m){return hh(va(m))}function pl(m,x,D){(D!==n&&!Fa(m[x],D)||D===n&&!(x in m))&&ml(m,x,D)}function li(m,x,D){var tt=m[x];(!(tr.call(m,x)&&Fa(tt,D))||D===n&&!(x in m))&&ml(m,x,D)}function zc(m,x){for(var D=m.length;D--;)if(Fa(m[D][0],x))return D;return-1}function Dd(m,x,D,tt){return gl(m,function(mt,Lt,ie){x(tt,mt,D(mt),ie)}),tt}function Od(m,x){return m&&vs(x,st(x),m)}function Vh(m,x){return m&&vs(x,It(x),m)}function ml(m,x,D){x=="__proto__"&&ul?ul(m,x,{configurable:!0,enumerable:!0,value:D,writable:!0}):m[x]=D}function Uh(m,x){for(var D=-1,tt=x.length,mt=ze(tt),Lt=m==null;++D<tt;)mt[D]=Lt?n:dt(m,x[D]);return mt}function na(m,x,D){return m===m&&(D!==n&&(m=m<=D?m:D),x!==n&&(m=m>=x?m:x)),m}function ga(m,x,D,tt,mt,Lt){var ie,ye=x&I,Pe=x&E,hn=x&S;if(D&&(ie=mt?D(m,tt,mt,Lt):D(m)),ie!==n)return ie;if(!Ki(m))return m;var fn=Er(m);if(fn){if(ie=Ub(m),!ye)return va(m,ie)}else{var xn=ko(m),Un=xn==Ln||xn==Tt;if(Ja(m))return Jl(m,ye);if(xn==yt||xn==Ce||Un&&!mt){if(ie=Pe||Un?{}:fv(m),!ye)return Pe?Ya(m,Vh(ie,m)):um(m,Od(ie,m))}else{if(!Xr[xn])return mt?m:{};ie=Hb(m,xn,ye)}}Lt||(Lt=new La);var dr=Lt.get(m);if(dr)return dr;Lt.set(m,ie),Tm(m)?m.forEach(function(Cr){ie.add(ga(Cr,x,D,Cr,m,Lt))}):wp(m)&&m.forEach(function(Cr,ei){ie.set(ei,ga(Cr,x,D,ei,m,Lt))});var wr=hn?Pe?lp:fm:Pe?It:st,qr=fn?n:wr(m);return Ho(qr||m,function(Cr,ei){qr&&(ei=Cr,Cr=m[ei]),li(ie,ei,ga(Cr,x,D,ei,m,Lt))}),ie}function Yn(m){var x=st(m);return function(D){return lr(D,m,x)}}function lr(m,x,D){var tt=D.length;if(m==null)return!tt;for(m=$r(m);tt--;){var mt=D[tt],Lt=x[mt],ie=m[mt];if(ie===n&&!(mt in m)||!Lt(ie))return!1}return!0}function eh(m,x,D){if(typeof m!="function")throw new Di(l);return Zd(function(){m.apply(n,D)},x)}function vu(m,x,D,tt){var mt=-1,Lt=$o,ie=!0,ye=m.length,Pe=[],hn=x.length;if(!ye)return Pe;D&&(x=ii(x,Zi(D))),tt?(Lt=jl,ie=!1):x.length>=s&&(Lt=il,ie=!1,x=new Ar(x));t:for(;++mt<ye;){var fn=m[mt],xn=D==null?fn:D(fn);if(fn=tt||fn!==0?fn:0,ie&&xn===xn){for(var Un=hn;Un--;)if(x[Un]===xn)continue t;Pe.push(fn)}else Lt(x,xn,tt)||Pe.push(fn)}return Pe}var gl=ep(Ra),ya=ep(ih,!0);function sm(m,x){var D=!0;return gl(m,function(tt,mt,Lt){return D=!!x(tt,mt,Lt),D}),D}function Ka(m,x,D){for(var tt=-1,mt=m.length;++tt<mt;){var Lt=m[tt],ie=x(Lt);if(ie!=null&&(ye===n?ie===ie&&!_s(ie):D(ie,ye)))var ye=ie,Pe=Lt}return Pe}function nh(m,x,D,tt){var mt=m.length;for(D=Or(D),D<0&&(D=-D>mt?0:mt+D),tt=tt===n||tt>mt?mt:Or(tt),tt<0&&(tt+=mt),tt=D>tt?0:km(tt);D<tt;)m[D++]=x;return m}function rh(m,x){var D=[];return gl(m,function(tt,mt,Lt){x(tt,mt,Lt)&&D.push(tt)}),D}function Nr(m,x,D,tt,mt){var Lt=-1,ie=m.length;for(D||(D=t0),mt||(mt=[]);++Lt<ie;){var ye=m[Lt];x>0&&D(ye)?x>1?Nr(ye,x-1,D,tt,mt):ua(mt,ye):tt||(mt[mt.length]=ye)}return mt}var Vi=sh(),zd=sh(!0);function Ra(m,x){return m&&Vi(m,x,st)}function ih(m,x){return m&&zd(m,x,st)}function gs(m,x){return bo(x,function(D){return Zs(m[D])})}function yl(m,x){x=qo(x,m);for(var D=0,tt=x.length;m!=null&&D<tt;)m=m[ec(x[D++])];return D&&D==tt?m:n}function oh(m,x,D){var tt=x(m);return Er(m)?tt:ua(tt,D(m))}function io(m){return m==null?m===n?je:Pt:Ta&&Ta in $r(m)?Jg(m):e0(m)}function _u(m,x){return m>x}function tp(m,x){return m!=null&&tr.call(m,x)}function ah(m,x){return m!=null&&x in $r(m)}function bu(m,x,D){return m>=Qi(x,D)&&m<Wi(x,D)}function Hh(m,x,D){for(var tt=D?jl:$o,mt=m[0].length,Lt=m.length,ie=Lt,ye=ze(Lt),Pe=1/0,hn=[];ie--;){var fn=m[ie];ie&&x&&(fn=ii(fn,Zi(x))),Pe=Qi(fn.length,Pe),ye[ie]=!D&&(x||mt>=120&&fn.length>=120)?new Ar(ie&&fn):n}fn=m[0];var xn=-1,Un=ye[0];t:for(;++xn<mt&&hn.length<Pe;){var dr=fn[xn],wr=x?x(dr):dr;if(dr=D||dr!==0?dr:0,!(Un?il(Un,wr):tt(hn,wr,D))){for(ie=Lt;--ie;){var qr=ye[ie];if(!(qr?il(qr,wr):tt(m[ie],wr,D)))continue t}Un&&Un.push(wr),hn.push(dr)}}return hn}function Fd(m,x,D,tt){return Ra(m,function(mt,Lt,ie){x(tt,D(mt),Lt,ie)}),tt}function js(m,x,D){x=qo(x,m),m=dp(m,x);var tt=m==null?m:m[ec(vl(x))];return tt==null?n:Xi(tt,m,D)}function Bd(m){return $i(m)&&io(m)==Ce}function Nd(m){return $i(m)&&io(m)==bn}function jd(m){return $i(m)&&io(m)==xe}function xu(m,x,D,tt,mt){return m===x?!0:m==null||x==null||!$i(m)&&!$i(x)?m!==m&&x!==x:b(m,x,D,tt,xu,mt)}function b(m,x,D,tt,mt,Lt){var ie=Er(m),ye=Er(x),Pe=ie?nn:ko(m),hn=ye?nn:ko(x);Pe=Pe==Ce?yt:Pe,hn=hn==Ce?yt:hn;var fn=Pe==yt,xn=hn==yt,Un=Pe==hn;if(Un&&Ja(m)){if(!Ja(x))return!1;ie=!0,fn=!1}if(Un&&!fn)return Lt||(Lt=new La),ie||Yh(m)?Kg(m,x,D,tt,mt,Lt):Yg(m,x,Pe,D,tt,mt,Lt);if(!(D&k)){var dr=fn&&tr.call(m,"__wrapped__"),wr=xn&&tr.call(x,"__wrapped__");if(dr||wr){var qr=dr?m.value():m,Cr=wr?x.value():x;return Lt||(Lt=new La),mt(qr,Cr,D,tt,Lt)}}return Un?(Lt||(Lt=new La),sp(m,x,D,tt,mt,Lt)):!1}function r(m){return $i(m)&&ko(m)==H}function c(m,x,D,tt){var mt=D.length,Lt=mt,ie=!tt;if(m==null)return!Lt;for(m=$r(m);mt--;){var ye=D[mt];if(ie&&ye[2]?ye[1]!==m[ye[0]]:!(ye[0]in m))return!1}for(;++mt<Lt;){ye=D[mt];var Pe=ye[0],hn=m[Pe],fn=ye[1];if(ie&&ye[2]){if(hn===n&&!(Pe in m))return!1}else{var xn=new La;if(tt)var Un=tt(hn,fn,Pe,m,x,xn);if(!(Un===n?xu(fn,hn,k|R,tt,xn):Un))return!1}}return!0}function p(m){if(!Ki(m)||Hd(m))return!1;var x=Zs(m)?sl:Pl;return x.test(dh(m))}function y(m){return $i(m)&&io(m)==ne}function A(m){return $i(m)&&ko(m)==ue}function T(m){return $i(m)&&qh(m.length)&&!!Fn[io(m)]}function L(m){return typeof m=="function"?m:m==null?ba:typeof m=="object"?Er(m)?ft(m[0],m[1]):ot(m):mC(m)}function N(m){if(!uh(m))return Uf(m);var x=[];for(var D in $r(m))tr.call(m,D)&&D!="constructor"&&x.push(D);return x}function $(m){if(!Ki(m))return hp(m);var x=uh(m),D=[];for(var tt in m)tt=="constructor"&&(x||!tr.call(m,tt))||D.push(tt);return D}function J(m,x){return m<x}function it(m,x){var D=-1,tt=Qa(m)?ze(m.length):[];return gl(m,function(mt,Lt,ie){tt[++D]=x(mt,Lt,ie)}),tt}function ot(m){var x=Qg(m);return x.length==1&&x[0][2]?$d(x[0][0],x[0][1]):function(D){return D===m||c(D,m,x)}}function ft(m,x){return Gh(m)&&up(x)?$d(ec(m),x):function(D){var tt=dt(D,m);return tt===n&&tt===x?Et(D,m):xu(x,tt,k|R)}}function bt(m,x,D,tt,mt){m!==x&&Vi(x,function(Lt,ie){if(mt||(mt=new La),Ki(Lt))Ft(m,x,ie,D,bt,tt,mt);else{var ye=tt?tt(Wh(m,ie),Lt,ie+"",m,x,mt):n;ye===n&&(ye=Lt),pl(m,ie,ye)}},It)}function Ft(m,x,D,tt,mt,Lt,ie){var ye=Wh(m,D),Pe=Wh(x,D),hn=ie.get(Pe);if(hn){pl(m,D,hn);return}var fn=Lt?Lt(ye,Pe,D+"",m,x,ie):n,xn=fn===n;if(xn){var Un=Er(Pe),dr=!Un&&Ja(Pe),wr=!Un&&!dr&&Yh(Pe);fn=Pe,Un||dr||wr?Er(ye)?fn=ye:wo(ye)?fn=va(ye):dr?(xn=!1,fn=Jl(Pe,!0)):wr?(xn=!1,fn=Ui(Pe,!0)):fn=[]:Kh(Pe)||ph(Pe)?(fn=ye,ph(ye)?fn=Jd(ye):(!Ki(ye)||Zs(ye))&&(fn=fv(Pe))):xn=!1}xn&&(ie.set(Pe,fn),mt(fn,Pe,tt,Lt,ie),ie.delete(Pe)),pl(m,D,fn)}function Ot(m,x){var D=m.length;if(D)return x+=x<0?D:0,Cu(x,D)?m[x]:n}function jt(m,x,D){x.length?x=ii(x,function(Lt){return Er(Lt)?function(ie){return yl(ie,Lt.length===1?Lt[0]:Lt)}:Lt}):x=[ba];var tt=-1;x=ii(x,Zi(yr()));var mt=it(m,function(Lt,ie,ye){var Pe=ii(x,function(hn){return hn(Lt)});return{criteria:Pe,index:++tt,value:Lt}});return Sc(mt,function(Lt,ie){return lm(Lt,ie,D)})}function Wt(m,x){return Jt(m,x,function(D,tt){return Et(m,tt)})}function Jt(m,x,D){for(var tt=-1,mt=x.length,Lt={};++tt<mt;){var ie=x[tt],ye=yl(m,ie);D(ye,ie)&&In(Lt,qo(ie,m),ye)}return Lt}function re(m){return function(x){return yl(x,m)}}function se(m,x,D,tt){var mt=tt?Nf:hs,Lt=-1,ie=x.length,ye=m;for(m===x&&(x=va(x)),D&&(ye=ii(m,Zi(D)));++Lt<ie;)for(var Pe=0,hn=x[Lt],fn=D?D(hn):hn;(Pe=mt(ye,fn,Pe,tt))>-1;)ye!==m&&pa.call(ye,Pe,1),pa.call(m,Pe,1);return m}function fe(m,x){for(var D=m?x.length:0,tt=D-1;D--;){var mt=x[D];if(D==tt||mt!==Lt){var Lt=mt;Cu(mt)?pa.call(m,mt,1):oo(m,mt)}}return m}function le(m,x){return m+Qu(Hf()*(x-m+1))}function ke(m,x,D,tt){for(var mt=-1,Lt=Wi(Dh((x-m)/(D||1)),0),ie=ze(Lt);Lt--;)ie[tt?Lt:++mt]=m,m+=D;return ie}function De(m,x){var D="";if(!m||x<1||x>Xt)return D;do x%2&&(D+=m),x=Qu(x/2),x&&(m+=m);while(x);return D}function Ee(m,x){return Iu(Zh(m,x,ba),m+"")}function Qe(m){return Rd(oa(m))}function $e(m,x){var D=oa(m);return hh(D,na(x,0,D.length))}function In(m,x,D,tt){if(!Ki(m))return m;x=qo(x,m);for(var mt=-1,Lt=x.length,ie=Lt-1,ye=m;ye!=null&&++mt<Lt;){var Pe=ec(x[mt]),hn=D;if(Pe==="__proto__"||Pe==="constructor"||Pe==="prototype")return m;if(mt!=ie){var fn=ye[Pe];hn=tt?tt(fn,Pe,ye):n,hn===n&&(hn=Ki(fn)?fn:Cu(x[mt+1])?[]:{})}li(ye,Pe,hn),ye=ye[Pe]}return m}var yn=Ns?function(m,x){return Ns.set(m,x),m}:ba,an=ul?function(m,x){return ul(m,"toString",{configurable:!0,enumerable:!1,value:F0(x),writable:!0})}:ba;function qn(m){return hh(oa(m))}function fr(m,x,D){var tt=-1,mt=m.length;x<0&&(x=-x>mt?0:mt+x),D=D>mt?mt:D,D<0&&(D+=mt),mt=x>D?0:D-x>>>0,x>>>=0;for(var Lt=ze(mt);++tt<mt;)Lt[tt]=m[tt+x];return Lt}function pr(m,x){var D;return gl(m,function(tt,mt,Lt){return D=x(tt,mt,Lt),!D}),!!D}function vi(m,x,D){var tt=0,mt=m==null?tt:m.length;if(typeof x=="number"&&x===x&&mt<=Re){for(;tt<mt;){var Lt=tt+mt>>>1,ie=m[Lt];ie!==null&&!_s(ie)&&(D?ie<=x:ie<x)?tt=Lt+1:mt=Lt}return mt}return ti(m,x,ba,D)}function ti(m,x,D,tt){var mt=0,Lt=m==null?0:m.length;if(Lt===0)return 0;x=D(x);for(var ie=x!==x,ye=x===null,Pe=_s(x),hn=x===n;mt<Lt;){var fn=Qu((mt+Lt)/2),xn=D(m[fn]),Un=xn!==n,dr=xn===null,wr=xn===xn,qr=_s(xn);if(ie)var Cr=tt||wr;else hn?Cr=wr&&(tt||Un):ye?Cr=wr&&Un&&(tt||!dr):Pe?Cr=wr&&Un&&!dr&&(tt||!qr):dr||qr?Cr=!1:Cr=tt?xn<=x:xn<x;Cr?mt=fn+1:Lt=fn}return Qi(Lt,Gt)}function Ci(m,x){for(var D=-1,tt=m.length,mt=0,Lt=[];++D<tt;){var ie=m[D],ye=x?x(ie):ie;if(!D||!Fa(ye,Pe)){var Pe=ye;Lt[mt++]=ie===0?0:ie}}return Lt}function Ai(m){return typeof m=="number"?m:_s(m)?en:+m}function Sr(m){if(typeof m=="string")return m;if(Er(m))return ii(m,Sr)+"";if(_s(m))return qf?qf.call(m):"";var x=m+"";return x=="0"&&1/m==-Bt?"-0":x}function jr(m,x,D){var tt=-1,mt=$o,Lt=m.length,ie=!0,ye=[],Pe=ye;if(D)ie=!1,mt=jl;else if(Lt>=s){var hn=x?null:Nb(m);if(hn)return $l(hn);ie=!1,mt=il,Pe=new Ar}else Pe=x?[]:ye;t:for(;++tt<Lt;){var fn=m[tt],xn=x?x(fn):fn;if(fn=D||fn!==0?fn:0,ie&&xn===xn){for(var Un=Pe.length;Un--;)if(Pe[Un]===xn)continue t;x&&Pe.push(xn),ye.push(fn)}else mt(Pe,xn,D)||(Pe!==ye&&Pe.push(xn),ye.push(fn))}return ye}function oo(m,x){return x=qo(x,m),m=dp(m,x),m==null||delete m[ec(vl(x))]}function ao(m,x,D,tt){return In(m,x,D(yl(m,x)),tt)}function so(m,x,D,tt){for(var mt=m.length,Lt=tt?mt:-1;(tt?Lt--:++Lt<mt)&&x(m[Lt],Lt,m););return D?fr(m,tt?0:Lt,tt?Lt+1:mt):fr(m,tt?Lt+1:0,tt?mt:Lt)}function Wo(m,x){var D=m;return D instanceof kr&&(D=D.value()),$a(x,function(tt,mt){return mt.func.apply(mt.thisArg,ua([tt],mt.args))},D)}function ys(m,x,D){var tt=m.length;if(tt<2)return tt?jr(m[0]):[];for(var mt=-1,Lt=ze(tt);++mt<tt;)for(var ie=m[mt],ye=-1;++ye<tt;)ye!=mt&&(Lt[mt]=vu(Lt[mt]||ie,m[ye],x,D));return jr(Nr(Lt,1),x,D)}function Ql(m,x,D){for(var tt=-1,mt=m.length,Lt=x.length,ie={};++tt<mt;){var ye=tt<Lt?x[tt]:n;D(ie,m[tt],ye)}return ie}function Vs(m){return wo(m)?m:[]}function Us(m){return typeof m=="function"?m:ba}function qo(m,x){return Er(m)?m:Gh(m,x)?[m]:gm(ci(m))}var Au=Ee;function Da(m,x,D){var tt=m.length;return D=D===n?tt:D,!x&&D>=tt?m:fr(m,x,D)}var Oa=Md||function(m){return Fi.clearTimeout(m)};function Jl(m,x){if(x)return m.slice();var D=m.length,tt=ll?ll(D):new m.constructor(D);return m.copy(tt),tt}function Hs(m){var x=new m.constructor(m.byteLength);return new zs(x).set(new zs(m)),x}function tc(m,x){var D=x?Hs(m.buffer):m.buffer;return new m.constructor(D,m.byteOffset,m.byteLength)}function Bi(m){var x=new m.constructor(m.source,pi.exec(m));return x.lastIndex=m.lastIndex,x}function Ii(m){return th?$r(th.call(m)):{}}function Ui(m,x){var D=x?Hs(m.buffer):m.buffer;return new m.constructor(D,m.byteOffset,m.length)}function Mi(m,x){if(m!==x){var D=m!==n,tt=m===null,mt=m===m,Lt=_s(m),ie=x!==n,ye=x===null,Pe=x===x,hn=_s(x);if(!ye&&!hn&&!Lt&&m>x||Lt&&ie&&Pe&&!ye&&!hn||tt&&ie&&Pe||!D&&Pe||!mt)return 1;if(!tt&&!Lt&&!hn&&m<x||hn&&D&&mt&&!tt&&!Lt||ye&&D&&mt||!ie&&mt||!Pe)return-1}return 0}function lm(m,x,D){for(var tt=-1,mt=m.criteria,Lt=x.criteria,ie=mt.length,ye=D.length;++tt<ie;){var Pe=Mi(mt[tt],Lt[tt]);if(Pe){if(tt>=ye)return Pe;var hn=D[tt];return Pe*(hn=="desc"?-1:1)}}return m.index-x.index}function Fc(m,x,D,tt){for(var mt=-1,Lt=m.length,ie=D.length,ye=-1,Pe=x.length,hn=Wi(Lt-ie,0),fn=ze(Pe+hn),xn=!tt;++ye<Pe;)fn[ye]=x[ye];for(;++mt<ie;)(xn||mt<Lt)&&(fn[D[mt]]=m[mt]);for(;hn--;)fn[ye++]=m[mt++];return fn}function cm(m,x,D,tt){for(var mt=-1,Lt=m.length,ie=-1,ye=D.length,Pe=-1,hn=x.length,fn=Wi(Lt-ye,0),xn=ze(fn+hn),Un=!tt;++mt<fn;)xn[mt]=m[mt];for(var dr=mt;++Pe<hn;)xn[dr+Pe]=x[Pe];for(;++ie<ye;)(Un||mt<Lt)&&(xn[dr+D[ie]]=m[mt++]);return xn}function va(m,x){var D=-1,tt=m.length;for(x||(x=ze(tt));++D<tt;)x[D]=m[D];return x}function vs(m,x,D,tt){var mt=!D;D||(D={});for(var Lt=-1,ie=x.length;++Lt<ie;){var ye=x[Lt],Pe=tt?tt(D[ye],m[ye],ye,D,m):n;Pe===n&&(Pe=m[ye]),mt?ml(D,ye,Pe):li(D,ye,Pe)}return D}function um(m,x){return vs(m,mm(m),x)}function Ya(m,x){return vs(m,ch(m),x)}function $s(m,x){return function(D,tt){var mt=Er(D)?Nl:Dd,Lt=x?x():{};return mt(D,m,yr(tt,2),Lt)}}function Bc(m){return Ee(function(x,D){var tt=-1,mt=D.length,Lt=mt>1?D[mt-1]:n,ie=mt>2?D[2]:n;for(Lt=m.length>3&&typeof Lt=="function"?(mt--,Lt):n,ie&&za(D[0],D[1],ie)&&(Lt=mt<3?n:Lt,mt=1),x=$r(x);++tt<mt;){var ye=D[tt];ye&&m(x,ye,tt,Lt)}return x})}function ep(m,x){return function(D,tt){if(D==null)return D;if(!Qa(D))return m(D,tt);for(var mt=D.length,Lt=x?mt:-1,ie=$r(D);(x?Lt--:++Lt<mt)&&tt(ie[Lt],Lt,ie)!==!1;);return D}}function sh(m){return function(x,D,tt){for(var mt=-1,Lt=$r(x),ie=tt(x),ye=ie.length;ye--;){var Pe=ie[m?ye:++mt];if(D(Lt[Pe],Pe,Lt)===!1)break}return x}}function np(m,x,D){var tt=x&B,mt=rp(m);function Lt(){var ie=this&&this!==Fi&&this instanceof Lt?mt:m;return ie.apply(tt?D:this,arguments)}return Lt}function Vd(m){return function(x){x=ci(x);var D=ol(x)?fa(x):n,tt=D?D[0]:x.charAt(0),mt=D?Da(D,1).join(""):x.slice(1);return tt[m]()+mt}}function $h(m){return function(x){return $a(b_(_a(x).replace(Rr,"")),m,"")}}function rp(m){return function(){var x=arguments;switch(x.length){case 0:return new m;case 1:return new m(x[0]);case 2:return new m(x[0],x[1]);case 3:return new m(x[0],x[1],x[2]);case 4:return new m(x[0],x[1],x[2],x[3]);case 5:return new m(x[0],x[1],x[2],x[3],x[4]);case 6:return new m(x[0],x[1],x[2],x[3],x[4],x[5]);case 7:return new m(x[0],x[1],x[2],x[3],x[4],x[5],x[6])}var D=gu(m.prototype),tt=m.apply(D,x);return Ki(tt)?tt:D}}function Vg(m,x,D){var tt=rp(m);function mt(){for(var Lt=arguments.length,ie=ze(Lt),ye=Lt,Pe=Ud(mt);ye--;)ie[ye]=arguments[ye];var hn=Lt<3&&ie[0]!==Pe&&ie[Lt-1]!==Pe?[]:da(ie,Pe);if(Lt-=hn.length,Lt<D)return $g(m,x,ip,mt.placeholder,n,ie,hn,n,n,D-Lt);var fn=this&&this!==Fi&&this instanceof mt?tt:m;return Xi(fn,this,ie)}return mt}function uv(m){return function(x,D,tt){var mt=$r(x);if(!Qa(x)){var Lt=yr(D,3);x=st(x),D=function(ye){return Lt(mt[ye],ye,mt)}}var ie=m(x,D,tt);return ie>-1?mt[Lt?x[ie]:ie]:n}}function hm(m){return xo(function(x){var D=x.length,tt=D,mt=qa.prototype.thru;for(m&&x.reverse();tt--;){var Lt=x[tt];if(typeof Lt!="function")throw new Di(l);if(mt&&!ie&&cp(Lt)=="wrapper")var ie=new qa([],!0)}for(tt=ie?tt:D;++tt<D;){Lt=x[tt];var ye=cp(Lt),Pe=ye=="wrapper"?Xg(Lt):n;Pe&&Hi(Pe[0])&&Pe[1]==(X|j|Q|K)&&!Pe[4].length&&Pe[9]==1?ie=ie[cp(Pe[0])].apply(ie,Pe[3]):ie=Lt.length==1&&Hi(Lt)?ie[ye]():ie.thru(Lt)}return function(){var hn=arguments,fn=hn[0];if(ie&&hn.length==1&&Er(fn))return ie.plant(fn).value();for(var xn=0,Un=D?x[xn].apply(this,hn):fn;++xn<D;)Un=x[xn].call(this,Un);return Un}})}function ip(m,x,D,tt,mt,Lt,ie,ye,Pe,hn){var fn=x&X,xn=x&B,Un=x&V,dr=x&(j|G),wr=x&Z,qr=Un?n:rp(m);function Cr(){for(var ei=arguments.length,oi=ze(ei),sc=ei;sc--;)oi[sc]=arguments[sc];if(dr)var Ks=Ud(Cr),lc=hu(oi,Ks);if(tt&&(oi=Fc(oi,tt,mt,dr)),Lt&&(oi=cm(oi,Lt,ie,dr)),ei-=lc,dr&&ei<hn){var Xo=da(oi,Ks);return $g(m,x,ip,Cr.placeholder,D,oi,Xo,ye,Pe,hn-ei)}var Tu=xn?D:this,td=Un?Tu[m]:m;return ei=oi.length,ye?oi=Gd(oi,ye):wr&&ei>1&&oi.reverse(),fn&&Pe<ei&&(oi.length=Pe),this&&this!==Fi&&this instanceof Cr&&(td=qr||rp(td)),td.apply(Tu,oi)}return Cr}function Ug(m,x){return function(D,tt){return Fd(D,m,x(tt),{})}}function Nc(m,x){return function(D,tt){var mt;if(D===n&&tt===n)return x;if(D!==n&&(mt=D),tt!==n){if(mt===n)return tt;typeof D=="string"||typeof tt=="string"?(D=Sr(D),tt=Sr(tt)):(D=Ai(D),tt=Ai(tt)),mt=m(D,tt)}return mt}}function Hg(m){return xo(function(x){return x=ii(x,Zi(yr())),Ee(function(D){var tt=this;return m(x,function(mt){return Xi(mt,tt,D)})})})}function lh(m,x){x=x===n?" ":Sr(x);var D=x.length;if(D<2)return D?De(x,m):x;var tt=De(x,Dh(m/_r(x)));return ol(x)?Da(fa(tt),0,m).join(""):tt.slice(0,m)}function dm(m,x,D,tt){var mt=x&B,Lt=rp(m);function ie(){for(var ye=-1,Pe=arguments.length,hn=-1,fn=tt.length,xn=ze(fn+Pe),Un=this&&this!==Fi&&this instanceof ie?Lt:m;++hn<fn;)xn[hn]=tt[hn];for(;Pe--;)xn[hn++]=arguments[++ye];return Xi(Un,mt?D:this,xn)}return ie}function op(m){return function(x,D,tt){return tt&&typeof tt!="number"&&za(x,D,tt)&&(D=tt=n),x=rc(x),D===n?(D=x,x=0):D=rc(D),tt=tt===n?x<D?1:-1:rc(tt),ke(x,D,tt,m)}}function ap(m){return function(x,D){return typeof x=="string"&&typeof D=="string"||(x=ts(x),D=ts(D)),m(x,D)}}function $g(m,x,D,tt,mt,Lt,ie,ye,Pe,hn){var fn=x&j,xn=fn?ie:n,Un=fn?n:ie,dr=fn?Lt:n,wr=fn?n:Lt;x|=fn?Q:nt,x&=~(fn?nt:Q),x&F||(x&=~(B|V));var qr=[m,x,mt,dr,xn,wr,Un,ye,Pe,hn],Cr=D.apply(n,qr);return Hi(m)&&yv(Cr,qr),Cr.placeholder=tt,vv(Cr,m,x)}function Gg(m){var x=xr[m];return function(D,tt){if(D=ts(D),tt=tt==null?0:Qi(Or(tt),292),tt&&Ju(D)){var mt=(ci(D)+"e").split("e"),Lt=x(mt[0]+"e"+(+mt[1]+tt));return mt=(ci(Lt)+"e").split("e"),+(mt[0]+"e"+(+mt[1]-tt))}return x(D)}}var Nb=Rc&&1/$l(new Rc([,-0]))[1]==Bt?function(m){return new Rc(m)}:qs;function Zg(m){return function(x){var D=ko(x);return D==H?Pc(x):D==ue?Xu(x):Ec(x,m(x))}}function jc(m,x,D,tt,mt,Lt,ie,ye){var Pe=x&V;if(!Pe&&typeof m!="function")throw new Di(l);var hn=tt?tt.length:0;if(hn||(x&=~(Q|nt),tt=mt=n),ie=ie===n?ie:Wi(Or(ie),0),ye=ye===n?ye:Or(ye),hn-=mt?mt.length:0,x&nt){var fn=tt,xn=mt;tt=mt=n}var Un=Pe?n:Xg(m),dr=[m,x,D,tt,mt,fn,xn,Lt,ie,ye];if(Un&&gv(dr,Un),m=dr[0],x=dr[1],D=dr[2],tt=dr[3],mt=dr[4],ye=dr[9]=dr[9]===n?Pe?0:m.length:Wi(dr[9]-hn,0),!ye&&x&(j|G)&&(x&=~(j|G)),!x||x==B)var wr=np(m,x,D);else x==j||x==G?wr=Vg(m,x,ye):(x==Q||x==(B|Q))&&!mt.length?wr=dm(m,x,D,tt):wr=ip.apply(n,dr);var qr=Un?yn:yv;return vv(qr(wr,dr),m,x)}function Wg(m,x,D,tt){return m===n||Fa(m,ps[D])&&!tr.call(tt,D)?x:m}function hv(m,x,D,tt,mt,Lt){return Ki(m)&&Ki(x)&&(Lt.set(x,m),bt(m,x,n,hv,Lt),Lt.delete(x)),m}function qg(m){return Kh(m)?n:m}function Kg(m,x,D,tt,mt,Lt){var ie=D&k,ye=m.length,Pe=x.length;if(ye!=Pe&&!(ie&&Pe>ye))return!1;var hn=Lt.get(m),fn=Lt.get(x);if(hn&&fn)return hn==x&&fn==m;var xn=-1,Un=!0,dr=D&R?new Ar:n;for(Lt.set(m,x),Lt.set(x,m);++xn<ye;){var wr=m[xn],qr=x[xn];if(tt)var Cr=ie?tt(qr,wr,xn,x,m,Lt):tt(wr,qr,xn,m,x,Lt);if(Cr!==n){if(Cr)continue;Un=!1;break}if(dr){if(!ta(x,function(ei,oi){if(!il(dr,oi)&&(wr===ei||mt(wr,ei,D,tt,Lt)))return dr.push(oi)})){Un=!1;break}}else if(!(wr===qr||mt(wr,qr,D,tt,Lt))){Un=!1;break}}return Lt.delete(m),Lt.delete(x),Un}function Yg(m,x,D,tt,mt,Lt,ie){switch(D){case Cn:if(m.byteLength!=x.byteLength||m.byteOffset!=x.byteOffset)return!1;m=m.buffer,x=x.buffer;case bn:return!(m.byteLength!=x.byteLength||!Lt(new zs(m),new zs(x)));case Se:case xe:case Dt:return Fa(+m,+x);case tn:return m.name==x.name&&m.message==x.message;case ne:case Ht:return m==x+"";case H:var ye=Pc;case ue:var Pe=tt&k;if(ye||(ye=$l),m.size!=x.size&&!Pe)return!1;var hn=ie.get(m);if(hn)return hn==x;tt|=R,ie.set(m,x);var fn=Kg(ye(m),ye(x),tt,mt,Lt,ie);return ie.delete(m),fn;case Me:if(th)return th.call(m)==th.call(x)}return!1}function sp(m,x,D,tt,mt,Lt){var ie=D&k,ye=fm(m),Pe=ye.length,hn=fm(x),fn=hn.length;if(Pe!=fn&&!ie)return!1;for(var xn=Pe;xn--;){var Un=ye[xn];if(!(ie?Un in x:tr.call(x,Un)))return!1}var dr=Lt.get(m),wr=Lt.get(x);if(dr&&wr)return dr==x&&wr==m;var qr=!0;Lt.set(m,x),Lt.set(x,m);for(var Cr=ie;++xn<Pe;){Un=ye[xn];var ei=m[Un],oi=x[Un];if(tt)var sc=ie?tt(oi,ei,Un,x,m,Lt):tt(ei,oi,Un,m,x,Lt);if(!(sc===n?ei===oi||mt(ei,oi,D,tt,Lt):sc)){qr=!1;break}Cr||(Cr=Un=="constructor")}if(qr&&!Cr){var Ks=m.constructor,lc=x.constructor;Ks!=lc&&"constructor"in m&&"constructor"in x&&!(typeof Ks=="function"&&Ks instanceof Ks&&typeof lc=="function"&&lc instanceof lc)&&(qr=!1)}return Lt.delete(m),Lt.delete(x),qr}function xo(m){return Iu(Zh(m,n,l0),m+"")}function fm(m){return oh(m,st,mm)}function lp(m){return oh(m,It,ch)}var Xg=Ns?function(m){return Ns.get(m)}:qs;function cp(m){for(var x=m.name+"",D=Dc[x],tt=tr.call(Dc,x)?D.length:0;tt--;){var mt=D[tt],Lt=mt.func;if(Lt==null||Lt==m)return mt.name}return x}function Ud(m){var x=tr.call(St,"placeholder")?St:m;return x.placeholder}function yr(){var m=St.iteratee||Rm;return m=m===Rm?L:m,arguments.length?m(arguments[0],arguments[1]):m}function pm(m,x){var D=m.__data__;return Gb(x)?D[typeof x=="string"?"string":"hash"]:D.map}function Qg(m){for(var x=st(m),D=x.length;D--;){var tt=x[D],mt=m[tt];x[D]=[tt,mt,up(mt)]}return x}function wu(m,x){var D=Rs(m,x);return p(D)?D:n}function Jg(m){var x=tr.call(m,Ta),D=m[Ta];try{m[Ta]=n;var tt=!0}catch{}var mt=al.call(m);return tt&&(x?m[Ta]=D:delete m[Ta]),mt}var mm=jf?function(m){return m==null?[]:(m=$r(m),bo(jf(m),function(x){return Lc.call(m,x)}))}:$x,ch=jf?function(m){for(var x=[];m;)ua(x,mm(m)),m=Wl(m);return x}:$x,ko=io;(ql&&ko(new ql(new ArrayBuffer(1)))!=Cn||ea&&ko(new ea)!=H||zh&&ko(zh.resolve())!=vt||Rc&&ko(new Rc)!=ue||mu&&ko(new mu)!=Le)&&(ko=function(m){var x=io(m),D=x==yt?m.constructor:n,tt=D?dh(D):"";if(tt)switch(tt){case $f:return Cn;case Gf:return H;case Qp:return vt;case Zf:return ue;case Wf:return Le}return x});function jb(m,x,D){for(var tt=-1,mt=D.length;++tt<mt;){var Lt=D[tt],ie=Lt.size;switch(Lt.type){case"drop":m+=ie;break;case"dropRight":x-=ie;break;case"take":x=Qi(x,m+ie);break;case"takeRight":m=Wi(m,x-ie);break}}return{start:m,end:x}}function Vb(m){var x=m.match(Pr);return x?x[1].split(Ze):[]}function dv(m,x,D){x=qo(x,m);for(var tt=-1,mt=x.length,Lt=!1;++tt<mt;){var ie=ec(x[tt]);if(!(Lt=m!=null&&D(m,ie)))break;m=m[ie]}return Lt||++tt!=mt?Lt:(mt=m==null?0:m.length,!!mt&&qh(mt)&&Cu(ie,mt)&&(Er(m)||ph(m)))}function Ub(m){var x=m.length,D=new m.constructor(x);return x&&typeof m[0]=="string"&&tr.call(m,"index")&&(D.index=m.index,D.input=m.input),D}function fv(m){return typeof m.constructor=="function"&&!uh(m)?gu(Wl(m)):{}}function Hb(m,x,D){var tt=m.constructor;switch(x){case bn:return Hs(m);case Se:case xe:return new tt(+m);case Cn:return tc(m,D);case de:case ve:case Te:case Ye:case un:case Nn:case ae:case ht:case gt:return Ui(m,D);case H:return new tt;case Dt:case Ht:return new tt(m);case ne:return Bi(m);case ue:return new tt;case Me:return Ii(m)}}function $b(m,x){var D=x.length;if(!D)return m;var tt=D-1;return x[tt]=(D>1?"& ":"")+x[tt],x=x.join(D>2?", ":" "),m.replace(Yr,`{
/* [wrapped with `+x+`] */
`)}function t0(m){return Er(m)||ph(m)||!!(Fs&&m&&m[Fs])}function Cu(m,x){var D=typeof m;return x=x??Xt,!!x&&(D=="number"||D!="symbol"&&Ms.test(m))&&m>-1&&m%1==0&&m<x}function za(m,x,D){if(!Ki(D))return!1;var tt=typeof x;return(tt=="number"?Qa(D)&&Cu(x,D.length):tt=="string"&&x in D)?Fa(D[x],m):!1}function Gh(m,x){if(Er(m))return!1;var D=typeof m;return D=="number"||D=="symbol"||D=="boolean"||m==null||_s(m)?!0:En.test(m)||!Sn.test(m)||x!=null&&m in $r(x)}function Gb(m){var x=typeof m;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?m!=="__proto__":m===null}function Hi(m){var x=cp(m),D=St[x];if(typeof D!="function"||!(x in kr.prototype))return!1;if(m===D)return!0;var tt=Xg(D);return!!tt&&m===tt[0]}function Hd(m){return!!ms&&ms in m}var pv=Zl?Zs:Gx;function uh(m){var x=m&&m.constructor,D=typeof x=="function"&&x.prototype||ps;return m===D}function up(m){return m===m&&!Ki(m)}function $d(m,x){return function(D){return D==null?!1:D[m]===x&&(x!==n||m in $r(D))}}function mv(m){var x=Im(m,function(tt){return D.size===_&&D.clear(),tt}),D=x.cache;return x}function gv(m,x){var D=m[1],tt=x[1],mt=D|tt,Lt=mt<(B|V|X),ie=tt==X&&D==j||tt==X&&D==K&&m[7].length<=x[8]||tt==(X|K)&&x[7].length<=x[8]&&D==j;if(!(Lt||ie))return m;tt&B&&(m[2]=x[2],mt|=D&B?0:F);var ye=x[3];if(ye){var Pe=m[3];m[3]=Pe?Fc(Pe,ye,x[4]):ye,m[4]=Pe?da(m[3],C):x[4]}return ye=x[5],ye&&(Pe=m[5],m[5]=Pe?cm(Pe,ye,x[6]):ye,m[6]=Pe?da(m[5],C):x[6]),ye=x[7],ye&&(m[7]=ye),tt&X&&(m[8]=m[8]==null?x[8]:Qi(m[8],x[8])),m[9]==null&&(m[9]=x[9]),m[0]=x[0],m[1]=mt,m}function hp(m){var x=[];if(m!=null)for(var D in $r(m))x.push(D);return x}function e0(m){return al.call(m)}function Zh(m,x,D){return x=Wi(x===n?m.length-1:x,0),function(){for(var tt=arguments,mt=-1,Lt=Wi(tt.length-x,0),ie=ze(Lt);++mt<Lt;)ie[mt]=tt[x+mt];mt=-1;for(var ye=ze(x+1);++mt<x;)ye[mt]=tt[mt];return ye[x]=D(ie),Xi(m,this,ye)}}function dp(m,x){return x.length<2?m:yl(m,fr(x,0,-1))}function Gd(m,x){for(var D=m.length,tt=Qi(x.length,D),mt=va(m);tt--;){var Lt=x[tt];m[tt]=Cu(Lt,D)?mt[Lt]:n}return m}function Wh(m,x){if(!(x==="constructor"&&typeof m[x]=="function")&&x!="__proto__")return m[x]}var yv=n0(yn),Zd=Ed||function(m,x){return Fi.setTimeout(m,x)},Iu=n0(an);function vv(m,x,D){var tt=x+"";return Iu(m,$b(tt,Zb(Vb(tt),D)))}function n0(m){var x=0,D=0;return function(){var tt=Oh(),mt=xt-(tt-D);if(D=tt,mt>0){if(++x>=rt)return arguments[0]}else x=0;return m.apply(n,arguments)}}function hh(m,x){var D=-1,tt=m.length,mt=tt-1;for(x=x===n?tt:x;++D<x;){var Lt=le(D,mt),ie=m[Lt];m[Lt]=m[D],m[D]=ie}return m.length=x,m}var gm=mv(function(m){var x=[];return m.charCodeAt(0)===46&&x.push(""),m.replace(ir,function(D,tt,mt,Lt){x.push(mt?Lt.replace(eo,"$1"):tt||D)}),x});function ec(m){if(typeof m=="string"||_s(m))return m;var x=m+"";return x=="0"&&1/m==-Bt?"-0":x}function dh(m){if(m!=null){try{return Jr.call(m)}catch{}try{return m+""}catch{}}return""}function Zb(m,x){return Ho(Ge,function(D){var tt="_."+D[0];x&D[1]&&!$o(m,tt)&&m.push(tt)}),m.sort()}function _v(m){if(m instanceof kr)return m.clone();var x=new qa(m.__wrapped__,m.__chain__);return x.__actions__=va(m.__actions__),x.__index__=m.__index__,x.__values__=m.__values__,x}function Wb(m,x,D){(D?za(m,x,D):x===n)?x=1:x=Wi(Or(x),0);var tt=m==null?0:m.length;if(!tt||x<1)return[];for(var mt=0,Lt=0,ie=ze(Dh(tt/x));mt<tt;)ie[Lt++]=fr(m,mt,mt+=x);return ie}function qb(m){for(var x=-1,D=m==null?0:m.length,tt=0,mt=[];++x<D;){var Lt=m[x];Lt&&(mt[tt++]=Lt)}return mt}function Kb(){var m=arguments.length;if(!m)return[];for(var x=ze(m-1),D=arguments[0],tt=m;tt--;)x[tt-1]=arguments[tt];return ua(Er(D)?va(D):[D],Nr(x,1))}var r0=Ee(function(m,x){return wo(m)?vu(m,Nr(x,1,wo,!0)):[]}),bv=Ee(function(m,x){var D=vl(x);return wo(D)&&(D=n),wo(m)?vu(m,Nr(x,1,wo,!0),yr(D,2)):[]}),i0=Ee(function(m,x){var D=vl(x);return wo(D)&&(D=n),wo(m)?vu(m,Nr(x,1,wo,!0),n,D):[]});function xv(m,x,D){var tt=m==null?0:m.length;return tt?(x=D||x===n?1:Or(x),fr(m,x<0?0:x,tt)):[]}function o0(m,x,D){var tt=m==null?0:m.length;return tt?(x=D||x===n?1:Or(x),x=tt-x,fr(m,0,x<0?0:x)):[]}function Av(m,x){return m&&m.length?so(m,yr(x,3),!0,!0):[]}function wv(m,x){return m&&m.length?so(m,yr(x,3),!0):[]}function ym(m,x,D,tt){var mt=m==null?0:m.length;return mt?(D&&typeof D!="number"&&za(m,x,D)&&(D=0,tt=mt),nh(m,x,D,tt)):[]}function a0(m,x,D){var tt=m==null?0:m.length;if(!tt)return-1;var mt=D==null?0:Or(D);return mt<0&&(mt=Wi(tt+mt,0)),lu(m,yr(x,3),mt)}function s0(m,x,D){var tt=m==null?0:m.length;if(!tt)return-1;var mt=tt-1;return D!==n&&(mt=Or(D),mt=D<0?Wi(tt+mt,0):Qi(mt,tt-1)),lu(m,yr(x,3),mt,!0)}function l0(m){var x=m==null?0:m.length;return x?Nr(m,1):[]}function fp(m){var x=m==null?0:m.length;return x?Nr(m,Bt):[]}function Yb(m,x){var D=m==null?0:m.length;return D?(x=x===n?1:Or(x),Nr(m,x)):[]}function c0(m){for(var x=-1,D=m==null?0:m.length,tt={};++x<D;){var mt=m[x];tt[mt[0]]=mt[1]}return tt}function Wd(m){return m&&m.length?m[0]:n}function u0(m,x,D){var tt=m==null?0:m.length;if(!tt)return-1;var mt=D==null?0:Or(D);return mt<0&&(mt=Wi(tt+mt,0)),hs(m,x,mt)}function Xb(m){var x=m==null?0:m.length;return x?fr(m,0,-1):[]}var Qb=Ee(function(m){var x=ii(m,Vs);return x.length&&x[0]===m[0]?Hh(x):[]}),Cv=Ee(function(m){var x=vl(m),D=ii(m,Vs);return x===vl(D)?x=n:D.pop(),D.length&&D[0]===m[0]?Hh(D,yr(x,2)):[]}),Iv=Ee(function(m){var x=vl(m),D=ii(m,Vs);return x=typeof x=="function"?x:n,x&&D.pop(),D.length&&D[0]===m[0]?Hh(D,n,x):[]});function Jb(m,x){return m==null?"":Td.call(m,x)}function vl(m){var x=m==null?0:m.length;return x?m[x-1]:n}function pp(m,x,D){var tt=m==null?0:m.length;if(!tt)return-1;var mt=tt;return D!==n&&(mt=Or(D),mt=mt<0?Wi(tt+mt,0):Qi(mt,tt-1)),x===x?Gl(m,x,mt):lu(m,ks,mt,!0)}function Mv(m,x){return m&&m.length?Ot(m,Or(x)):n}var tx=Ee(Sv);function Sv(m,x){return m&&m.length&&x&&x.length?se(m,x):m}function ex(m,x,D){return m&&m.length&&x&&x.length?se(m,x,yr(D,2)):m}function nx(m,x,D){return m&&m.length&&x&&x.length?se(m,x,n,D):m}var rx=xo(function(m,x){var D=m==null?0:m.length,tt=Uh(m,x);return fe(m,ii(x,function(mt){return Cu(mt,D)?+mt:mt}).sort(Mi)),tt});function ix(m,x){var D=[];if(!(m&&m.length))return D;var tt=-1,mt=[],Lt=m.length;for(x=yr(x,3);++tt<Lt;){var ie=m[tt];x(ie,tt,m)&&(D.push(ie),mt.push(tt))}return fe(m,mt),D}function vm(m){return m==null?m:qi.call(m)}function h0(m,x,D){var tt=m==null?0:m.length;return tt?(D&&typeof D!="number"&&za(m,x,D)?(x=0,D=tt):(x=x==null?0:Or(x),D=D===n?tt:Or(D)),fr(m,x,D)):[]}function Ev(m,x){return vi(m,x)}function Tv(m,x,D){return ti(m,x,yr(D,2))}function Pv(m,x){var D=m==null?0:m.length;if(D){var tt=vi(m,x);if(tt<D&&Fa(m[tt],x))return tt}return-1}function ox(m,x){return vi(m,x,!0)}function _m(m,x,D){return ti(m,x,yr(D,2),!0)}function ax(m,x){var D=m==null?0:m.length;if(D){var tt=vi(m,x,!0)-1;if(Fa(m[tt],x))return tt}return-1}function kv(m){return m&&m.length?Ci(m):[]}function sx(m,x){return m&&m.length?Ci(m,yr(x,2)):[]}function lx(m){var x=m==null?0:m.length;return x?fr(m,1,x):[]}function cx(m,x,D){return m&&m.length?(x=D||x===n?1:Or(x),fr(m,0,x<0?0:x)):[]}function Lv(m,x,D){var tt=m==null?0:m.length;return tt?(x=D||x===n?1:Or(x),x=tt-x,fr(m,x<0?0:x,tt)):[]}function ux(m,x){return m&&m.length?so(m,yr(x,3),!1,!0):[]}function hx(m,x){return m&&m.length?so(m,yr(x,3)):[]}var mp=Ee(function(m){return jr(Nr(m,1,wo,!0))}),Rv=Ee(function(m){var x=vl(m);return wo(x)&&(x=n),jr(Nr(m,1,wo,!0),yr(x,2))}),d0=Ee(function(m){var x=vl(m);return x=typeof x=="function"?x:n,jr(Nr(m,1,wo,!0),n,x)});function Dv(m){return m&&m.length?jr(m):[]}function Ao(m,x){return m&&m.length?jr(m,yr(x,2)):[]}function f0(m,x){return x=typeof x=="function"?x:n,m&&m.length?jr(m,n,x):[]}function p0(m){if(!(m&&m.length))return[];var x=0;return m=bo(m,function(D){if(wo(D))return x=Wi(D.length,x),!0}),cu(x,function(D){return ii(m,ds(D))})}function m0(m,x){if(!(m&&m.length))return[];var D=p0(m);return x==null?D:ii(D,function(tt){return Xi(x,n,tt)})}var g0=Ee(function(m,x){return wo(m)?vu(m,x):[]}),y0=Ee(function(m){return ys(bo(m,wo))}),dx=Ee(function(m){var x=vl(m);return wo(x)&&(x=n),ys(bo(m,wo),yr(x,2))}),fx=Ee(function(m){var x=vl(m);return x=typeof x=="function"?x:n,ys(bo(m,wo),n,x)}),px=Ee(p0);function mx(m,x){return Ql(m||[],x||[],li)}function Ov(m,x){return Ql(m||[],x||[],In)}var Xa=Ee(function(m){var x=m.length,D=x>1?m[x-1]:n;return D=typeof D=="function"?(m.pop(),D):n,m0(m,D)});function bm(m){var x=St(m);return x.__chain__=!0,x}function zv(m,x){return x(m),m}function nc(m,x){return x(m)}var xm=xo(function(m){var x=m.length,D=x?m[0]:0,tt=this.__wrapped__,mt=function(Lt){return Uh(Lt,m)};return x>1||this.__actions__.length||!(tt instanceof kr)||!Cu(D)?this.thru(mt):(tt=tt.slice(D,+D+(x?1:0)),tt.__actions__.push({func:nc,args:[mt],thisArg:n}),new qa(tt,this.__chain__).thru(function(Lt){return x&&!Lt.length&&Lt.push(n),Lt}))});function gp(){return bm(this)}function qd(){return new qa(this.value(),this.__chain__)}function Am(){this.__values__===n&&(this.__values__=Qd(this.value()));var m=this.__index__>=this.__values__.length,x=m?n:this.__values__[this.__index__++];return{done:m,value:x}}function wm(){return this}function gx(m){for(var x,D=this;D instanceof Fh;){var tt=_v(D);tt.__index__=0,tt.__values__=n,x?mt.__wrapped__=tt:x=tt;var mt=tt;D=D.__wrapped__}return mt.__wrapped__=m,x}function yx(){var m=this.__wrapped__;if(m instanceof kr){var x=m;return this.__actions__.length&&(x=new kr(this)),x=x.reverse(),x.__actions__.push({func:nc,args:[vm],thisArg:n}),new qa(x,this.__chain__)}return this.thru(vm)}function Fv(){return Wo(this.__wrapped__,this.__actions__)}var Bv=$s(function(m,x,D){tr.call(m,D)?++m[D]:ml(m,D,1)});function vx(m,x,D){var tt=Er(m)?au:sm;return D&&za(m,x,D)&&(x=n),tt(m,yr(x,3))}function Nv(m,x){var D=Er(m)?bo:rh;return D(m,yr(x,3))}var jv=uv(a0),v0=uv(s0);function _0(m,x){return Nr(yp(m,x),1)}function _x(m,x){return Nr(yp(m,x),Bt)}function Vv(m,x,D){return D=D===n?1:Or(D),Nr(yp(m,x),D)}function Uv(m,x){var D=Er(m)?Ho:gl;return D(m,yr(x,3))}function Hv(m,x){var D=Er(m)?Cd:ya;return D(m,yr(x,3))}var bx=$s(function(m,x,D){tr.call(m,D)?m[D].push(x):ml(m,D,[x])});function xx(m,x,D,tt){m=Qa(m)?m:oa(m),D=D&&!tt?Or(D):0;var mt=m.length;return D<0&&(D=Wi(mt+D,0)),Pm(m)?D<=mt&&m.indexOf(x,D)>-1:!!mt&&hs(m,x,D)>-1}var Ax=Ee(function(m,x,D){var tt=-1,mt=typeof x=="function",Lt=Qa(m)?ze(m.length):[];return gl(m,function(ie){Lt[++tt]=mt?Xi(x,ie,D):js(ie,x,D)}),Lt}),$v=$s(function(m,x,D){ml(m,D,x)});function yp(m,x){var D=Er(m)?ii:it;return D(m,yr(x,3))}function vp(m,x,D,tt){return m==null?[]:(Er(x)||(x=x==null?[]:[x]),D=tt?n:D,Er(D)||(D=D==null?[]:[D]),jt(m,x,D))}var Vc=$s(function(m,x,D){m[D?0:1].push(x)},function(){return[[],[]]});function fh(m,x,D){var tt=Er(m)?$a:Ls,mt=arguments.length<3;return tt(m,yr(x,4),D,mt,gl)}function Gv(m,x,D){var tt=Er(m)?su:Ls,mt=arguments.length<3;return tt(m,yr(x,4),D,mt,ya)}function b0(m,x){var D=Er(m)?bo:rh;return D(m,Mm(yr(x,3)))}function wx(m){var x=Er(m)?Rd:Qe;return x(m)}function Cx(m,x,D){(D?za(m,x,D):x===n)?x=1:x=Or(x);var tt=Er(m)?am:$e;return tt(m,x)}function Cm(m){var x=Er(m)?jg:qn;return x(m)}function x0(m){if(m==null)return 0;if(Qa(m))return Pm(m)?_r(m):m.length;var x=ko(m);return x==H||x==ue?m.size:N(m).length}function Ix(m,x,D){var tt=Er(m)?ta:pr;return D&&za(m,x,D)&&(x=n),tt(m,yr(x,3))}var A0=Ee(function(m,x){if(m==null)return[];var D=x.length;return D>1&&za(m,x[0],x[1])?x=[]:D>2&&za(x[0],x[1],x[2])&&(x=[x[0]]),jt(m,Nr(x,1),[])}),Kd=Sd||function(){return Fi.Date.now()};function Yd(m,x){if(typeof x!="function")throw new Di(l);return m=Or(m),function(){if(--m<1)return x.apply(this,arguments)}}function w0(m,x,D){return x=D?n:x,x=m&&x==null?m.length:x,jc(m,X,n,n,n,n,x)}function C0(m,x){var D;if(typeof x!="function")throw new Di(l);return m=Or(m),function(){return--m>0&&(D=x.apply(this,arguments)),m<=1&&(x=n),D}}var _p=Ee(function(m,x,D){var tt=B;if(D.length){var mt=da(D,Ud(_p));tt|=Q}return jc(m,tt,x,D,mt)}),I0=Ee(function(m,x,D){var tt=B|V;if(D.length){var mt=da(D,Ud(I0));tt|=Q}return jc(x,tt,m,D,mt)});function bp(m,x,D){x=D?n:x;var tt=jc(m,j,n,n,n,n,n,x);return tt.placeholder=bp.placeholder,tt}function M0(m,x,D){x=D?n:x;var tt=jc(m,G,n,n,n,n,n,x);return tt.placeholder=M0.placeholder,tt}function Zv(m,x,D){var tt,mt,Lt,ie,ye,Pe,hn=0,fn=!1,xn=!1,Un=!0;if(typeof m!="function")throw new Di(l);x=ts(x)||0,Ki(D)&&(fn=!!D.leading,xn="maxWait"in D,Lt=xn?Wi(ts(D.maxWait)||0,x):Lt,Un="trailing"in D?!!D.trailing:Un);function dr(Xo){var Tu=tt,td=mt;return tt=mt=n,hn=Xo,ie=m.apply(td,Tu),ie}function wr(Xo){return hn=Xo,ye=Zd(ei,x),fn?dr(Xo):ie}function qr(Xo){var Tu=Xo-Pe,td=Xo-hn,gC=x-Tu;return xn?Qi(gC,Lt-td):gC}function Cr(Xo){var Tu=Xo-Pe,td=Xo-hn;return Pe===n||Tu>=x||Tu<0||xn&&td>=Lt}function ei(){var Xo=Kd();if(Cr(Xo))return oi(Xo);ye=Zd(ei,qr(Xo))}function oi(Xo){return ye=n,Un&&tt?dr(Xo):(tt=mt=n,ie)}function sc(){ye!==n&&Oa(ye),hn=0,tt=Pe=mt=ye=n}function Ks(){return ye===n?ie:oi(Kd())}function lc(){var Xo=Kd(),Tu=Cr(Xo);if(tt=arguments,mt=this,Pe=Xo,Tu){if(ye===n)return wr(Pe);if(xn)return Oa(ye),ye=Zd(ei,x),dr(Pe)}return ye===n&&(ye=Zd(ei,x)),ie}return lc.cancel=sc,lc.flush=Ks,lc}var Mx=Ee(function(m,x){return eh(m,1,x)}),Wv=Ee(function(m,x,D){return eh(m,ts(x)||0,D)});function Sx(m){return jc(m,Z)}function Im(m,x){if(typeof m!="function"||x!=null&&typeof x!="function")throw new Di(l);var D=function(){var tt=arguments,mt=x?x.apply(this,tt):tt[0],Lt=D.cache;if(Lt.has(mt))return Lt.get(mt);var ie=m.apply(this,tt);return D.cache=Lt.set(mt,ie)||Lt,ie};return D.cache=new(Im.Cache||fl),D}Im.Cache=fl;function Mm(m){if(typeof m!="function")throw new Di(l);return function(){var x=arguments;switch(x.length){case 0:return!m.call(this);case 1:return!m.call(this,x[0]);case 2:return!m.call(this,x[0],x[1]);case 3:return!m.call(this,x[0],x[1],x[2])}return!m.apply(this,x)}}function Ex(m){return C0(2,m)}var Tx=Au(function(m,x){x=x.length==1&&Er(x[0])?ii(x[0],Zi(yr())):ii(Nr(x,1),Zi(yr()));var D=x.length;return Ee(function(tt){for(var mt=-1,Lt=Qi(tt.length,D);++mt<Lt;)tt[mt]=x[mt].call(this,tt[mt]);return Xi(m,this,tt)})}),xp=Ee(function(m,x){var D=da(x,Ud(xp));return jc(m,Q,n,x,D)}),Mu=Ee(function(m,x){var D=da(x,Ud(Mu));return jc(m,nt,n,x,D)}),qv=xo(function(m,x){return jc(m,K,n,n,n,x)});function Kv(m,x){if(typeof m!="function")throw new Di(l);return x=x===n?x:Or(x),Ee(m,x)}function Yv(m,x){if(typeof m!="function")throw new Di(l);return x=x==null?0:Wi(Or(x),0),Ee(function(D){var tt=D[x],mt=Da(D,0,x);return tt&&ua(mt,tt),Xi(m,this,mt)})}function Xv(m,x,D){var tt=!0,mt=!0;if(typeof m!="function")throw new Di(l);return Ki(D)&&(tt="leading"in D?!!D.leading:tt,mt="trailing"in D?!!D.trailing:mt),Zv(m,x,{leading:tt,maxWait:x,trailing:mt})}function Qv(m){return w0(m,1)}function S0(m,x){return xp(Us(x),m)}function Jv(){if(!arguments.length)return[];var m=arguments[0];return Er(m)?m:[m]}function Ap(m){return ga(m,S)}function t_(m,x){return x=typeof x=="function"?x:n,ga(m,S,x)}function E0(m){return ga(m,I|S)}function e_(m,x){return x=typeof x=="function"?x:n,ga(m,I|S,x)}function Gs(m,x){return x==null||lr(m,x,st(x))}function Fa(m,x){return m===x||m!==m&&x!==x}var n_=ap(_u),r_=ap(function(m,x){return m>=x}),ph=Bd(function(){return arguments}())?Bd:function(m){return $i(m)&&tr.call(m,"callee")&&!Lc.call(m,"callee")},Er=ze.isArray,i_=_o?Zi(_o):Nd;function Qa(m){return m!=null&&qh(m.length)&&!Zs(m)}function wo(m){return $i(m)&&Qa(m)}function o_(m){return m===!0||m===!1||$i(m)&&io(m)==Se}var Ja=Vf||Gx,a_=nl?Zi(nl):jd;function s_(m){return $i(m)&&m.nodeType===1&&!Kh(m)}function l_(m){if(m==null)return!0;if(Qa(m)&&(Er(m)||typeof m=="string"||typeof m.splice=="function"||Ja(m)||Yh(m)||ph(m)))return!m.length;var x=ko(m);if(x==H||x==ue)return!m.size;if(uh(m))return!N(m).length;for(var D in m)if(tr.call(m,D))return!1;return!0}function c_(m,x){return xu(m,x)}function Px(m,x,D){D=typeof D=="function"?D:n;var tt=D?D(m,x):n;return tt===n?xu(m,x,n,D):!!tt}function T0(m){if(!$i(m))return!1;var x=io(m);return x==tn||x==Be||typeof m.message=="string"&&typeof m.name=="string"&&!Kh(m)}function u_(m){return typeof m=="number"&&Ju(m)}function Zs(m){if(!Ki(m))return!1;var x=io(m);return x==Ln||x==Tt||x==be||x==Ut}function P0(m){return typeof m=="number"&&m==Or(m)}function qh(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=Xt}function Ki(m){var x=typeof m;return m!=null&&(x=="object"||x=="function")}function $i(m){return m!=null&&typeof m=="object"}var wp=Br?Zi(Br):r;function Sm(m,x){return m===x||c(m,x,Qg(x))}function kx(m,x,D){return D=typeof D=="function"?D:n,c(m,x,Qg(x),D)}function Lx(m){return Su(m)&&m!=+m}function Rx(m){if(pv(m))throw new rr(d);return p(m)}function Xd(m){return m===null}function ra(m){return m==null}function Su(m){return typeof m=="number"||$i(m)&&io(m)==Dt}function Kh(m){if(!$i(m)||io(m)!=yt)return!1;var x=Wl(m);if(x===null)return!0;var D=tr.call(x,"constructor")&&x.constructor;return typeof D=="function"&&D instanceof D&&Jr.call(D)==vr}var Em=Bl?Zi(Bl):y;function h_(m){return P0(m)&&m>=-Xt&&m<=Xt}var Tm=Ic?Zi(Ic):A;function Pm(m){return typeof m=="string"||!Er(m)&&$i(m)&&io(m)==Ht}function _s(m){return typeof m=="symbol"||$i(m)&&io(m)==Me}var Yh=Ku?Zi(Ku):T;function Dx(m){return m===n}function d_(m){return $i(m)&&ko(m)==Le}function k0(m){return $i(m)&&io(m)==Ke}var L0=ap(J),f_=ap(function(m,x){return m<=x});function Qd(m){if(!m)return[];if(Qa(m))return Pm(m)?fa(m):va(m);if(cl&&m[cl])return Lh(m[cl]());var x=ko(m),D=x==H?Pc:x==ue?$l:oa;return D(m)}function rc(m){if(!m)return m===0?m:0;if(m=ts(m),m===Bt||m===-Bt){var x=m<0?-1:1;return x*ge}return m===m?m:0}function Or(m){var x=rc(m),D=x%1;return x===x?D?x-D:x:0}function km(m){return m?na(Or(m),0,te):0}function ts(m){if(typeof m=="number")return m;if(_s(m))return en;if(Ki(m)){var x=typeof m.valueOf=="function"?m.valueOf():m;m=Ki(x)?x+"":x}if(typeof m!="string")return m===0?m:+m;m=Ul(m);var D=tu.test(m);return D||Uu.test(m)?qu(m.slice(2),D?2:8):Xn.test(m)?en:+m}function Jd(m){return vs(m,It(m))}function R0(m){return m?na(Or(m),-Xt,Xt):m===0?m:0}function ci(m){return m==null?"":Sr(m)}var D0=Bc(function(m,x){if(uh(x)||Qa(x)){vs(x,st(x),m);return}for(var D in x)tr.call(x,D)&&li(m,D,x[D])}),p_=Bc(function(m,x){vs(x,It(x),m)}),u=Bc(function(m,x,D,tt){vs(x,It(x),m,tt)}),i=Bc(function(m,x,D,tt){vs(x,st(x),m,tt)}),h=xo(Uh);function f(m,x){var D=gu(m);return x==null?D:Od(D,x)}var v=Ee(function(m,x){m=$r(m);var D=-1,tt=x.length,mt=tt>2?x[2]:n;for(mt&&za(x[0],x[1],mt)&&(tt=1);++D<tt;)for(var Lt=x[D],ie=It(Lt),ye=-1,Pe=ie.length;++ye<Pe;){var hn=ie[ye],fn=m[hn];(fn===n||Fa(fn,ps[hn])&&!tr.call(m,hn))&&(m[hn]=Lt[hn])}return m}),w=Ee(function(m){return m.push(n,hv),Xi(Ne,n,m)});function M(m,x){return Mc(m,yr(x,3),Ra)}function P(m,x){return Mc(m,yr(x,3),ih)}function z(m,x){return m==null?m:Vi(m,yr(x,3),It)}function U(m,x){return m==null?m:zd(m,yr(x,3),It)}function W(m,x){return m&&Ra(m,yr(x,3))}function et(m,x){return m&&ih(m,yr(x,3))}function lt(m){return m==null?[]:gs(m,st(m))}function ct(m){return m==null?[]:gs(m,It(m))}function dt(m,x,D){var tt=m==null?n:yl(m,x);return tt===n?D:tt}function wt(m,x){return m!=null&&dv(m,x,tp)}function Et(m,x){return m!=null&&dv(m,x,ah)}var Vt=Ug(function(m,x,D){x!=null&&typeof x.toString!="function"&&(x=al.call(x)),m[x]=D},F0(ba)),ce=Ug(function(m,x,D){x!=null&&typeof x.toString!="function"&&(x=al.call(x)),tr.call(m,x)?m[x].push(D):m[x]=[D]},yr),qt=Ee(js);function st(m){return Qa(m)?Jf(m):N(m)}function It(m){return Qa(m)?Jf(m,!0):$(m)}function Yt(m,x){var D={};return x=yr(x,3),Ra(m,function(tt,mt,Lt){ml(D,x(tt,mt,Lt),tt)}),D}function Oe(m,x){var D={};return x=yr(x,3),Ra(m,function(tt,mt,Lt){ml(D,mt,x(tt,mt,Lt))}),D}var sn=Bc(function(m,x,D){bt(m,x,D)}),Ne=Bc(function(m,x,D,tt){bt(m,x,D,tt)}),He=xo(function(m,x){var D={};if(m==null)return D;var tt=!1;x=ii(x,function(Lt){return Lt=qo(Lt,m),tt||(tt=Lt.length>1),Lt}),vs(m,lp(m),D),tt&&(D=ga(D,I|E|S,qg));for(var mt=x.length;mt--;)oo(D,x[mt]);return D});function pn(m,x){return vn(m,Mm(yr(x)))}var ln=xo(function(m,x){return m==null?{}:Wt(m,x)});function vn(m,x){if(m==null)return{};var D=ii(lp(m),function(tt){return[tt]});return x=yr(x),Jt(m,D,function(tt,mt){return x(tt,mt[0])})}function Xe(m,x,D){x=qo(x,m);var tt=-1,mt=x.length;for(mt||(mt=1,m=n);++tt<mt;){var Lt=m==null?n:m[ec(x[tt])];Lt===n&&(tt=mt,Lt=D),m=Zs(Lt)?Lt.call(m):Lt}return m}function jn(m,x,D){return m==null?m:In(m,x,D)}function cr(m,x,D,tt){return tt=typeof tt=="function"?tt:n,m==null?m:In(m,x,D,tt)}var er=Zg(st),Gn=Zg(It);function Vr(m,x,D){var tt=Er(m),mt=tt||Ja(m)||Yh(m);if(x=yr(x,4),D==null){var Lt=m&&m.constructor;mt?D=tt?new Lt:[]:Ki(m)?D=Zs(Lt)?gu(Wl(m)):{}:D={}}return(mt?Ho:Ra)(m,function(ie,ye,Pe){return x(D,ie,ye,Pe)}),D}function Gi(m,x){return m==null?!0:oo(m,x)}function Co(m,x,D){return m==null?m:ao(m,x,Us(D))}function ia(m,x,D,tt){return tt=typeof tt=="function"?tt:n,m==null?m:ao(m,x,Us(D),tt)}function oa(m){return m==null?[]:uu(m,st(m))}function es(m){return m==null?[]:uu(m,It(m))}function Ko(m,x,D){return D===n&&(D=x,x=n),D!==n&&(D=ts(D),D=D===D?D:0),x!==n&&(x=ts(x),x=x===x?x:0),na(ts(m),x,D)}function Ni(m,x,D){return x=rc(x),D===n?(D=x,x=0):D=rc(D),m=ts(m),bu(m,x,D)}function Lo(m,x,D){if(D&&typeof D!="boolean"&&za(m,x,D)&&(x=D=n),D===n&&(typeof x=="boolean"?(D=x,x=n):typeof m=="boolean"&&(D=m,m=n)),m===n&&x===n?(m=0,x=1):(m=rc(m),x===n?(x=m,m=0):x=rc(x)),m>x){var tt=m;m=x,x=tt}if(D||m%1||x%1){var mt=Hf();return Qi(m+mt*(x-m+ru("1e-"+((mt+"").length-1))),x)}return le(m,x)}var Yo=$h(function(m,x,D){return x=x.toLowerCase(),m+(D?Ro(x):x)});function Ro(m){return Lm(ci(m).toLowerCase())}function _a(m){return m=ci(m),m&&m.replace(Hu,du).replace(xi,"")}function Ws(m,x,D){m=ci(m),x=Sr(x);var tt=m.length;D=D===n?tt:na(Or(D),0,tt);var mt=D;return D-=x.length,D>=0&&m.slice(D,mt)==x}function Do(m){return m=ci(m),m&&Fe.test(m)?m.replace(he,Hl):m}function ns(m){return m=ci(m),m&&Ue.test(m)?m.replace(gr,"\\$&"):m}var Io=$h(function(m,x,D){return m+(D?"-":"")+x.toLowerCase()}),Oo=$h(function(m,x,D){return m+(D?" ":"")+x.toLowerCase()}),zo=Vd("toLowerCase");function lo(m,x,D){m=ci(m),x=Or(x);var tt=x?_r(m):0;if(!x||tt>=x)return m;var mt=(x-tt)/2;return lh(Qu(mt),D)+m+lh(Dh(mt),D)}function Si(m,x,D){m=ci(m),x=Or(x);var tt=x?_r(m):0;return x&&tt<x?m+lh(x-tt,D):m}function ic(m,x,D){m=ci(m),x=Or(x);var tt=x?_r(m):0;return x&&tt<x?lh(x-tt,D)+m:m}function tf(m,x,D){return D||x==null?x=0:x&&(x=+x),Pd(ci(m).replace($n,""),x||0)}function oc(m,x,D){return(D?za(m,x,D):x===n)?x=1:x=Or(x),De(ci(m),x)}function Ox(){var m=arguments,x=ci(m[0]);return m.length<3?x:x.replace(m[1],m[2])}var ef=$h(function(m,x,D){return m+(D?"_":"")+x.toLowerCase()});function Xh(m,x,D){return D&&typeof D!="number"&&za(m,x,D)&&(x=D=n),D=D===n?te:D>>>0,D?(m=ci(m),m&&(typeof x=="string"||x!=null&&!Em(x))&&(x=Sr(x),!x&&ol(m))?Da(fa(m),0,D):m.split(x,D)):[]}var nf=$h(function(m,x,D){return m+(D?" ":"")+Lm(x)});function rf(m,x,D){return m=ci(m),D=D==null?0:na(Or(D),0,m.length),x=Sr(x),m.slice(D,D+x.length)==x}function of(m,x,D){var tt=St.templateSettings;D&&za(m,x,D)&&(x=n),m=ci(m),x=u({},x,tt,Wg);var mt=u({},x.imports,tt.imports,Wg),Lt=st(mt),ie=uu(mt,Lt),ye,Pe,hn=0,fn=x.interpolate||Ri,xn="__p += '",Un=Ds((x.escape||Ri).source+"|"+fn.source+"|"+(fn===rn?Po:Ri).source+"|"+(x.evaluate||Ri).source+"|$","g"),dr="//# sourceURL="+(tr.call(x,"sourceURL")?(x.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wr+"]")+`
`;m.replace(Un,function(Cr,ei,oi,sc,Ks,lc){return oi||(oi=sc),xn+=m.slice(hn,lc).replace(mi,Id),ei&&(ye=!0,xn+=`' +
__e(`+ei+`) +
'`),Ks&&(Pe=!0,xn+=`';
`+Ks+`;
__p += '`),oi&&(xn+=`' +
((__t = (`+oi+`)) == null ? '' : __t) +
'`),hn=lc+Cr.length,Cr}),xn+=`';
`;var wr=tr.call(x,"variable")&&x.variable;if(!wr)xn=`with (obj) {
`+xn+`
}
`;else if(Jn.test(wr))throw new rr(o);xn=(Pe?xn.replace(Ct,""):xn).replace(kt,"$1").replace(_t,"$1;"),xn="function("+(wr||"obj")+`) {
`+(wr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ye?", __e = _.escape":"")+(Pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xn+`return __p
}`;var qr=x_(function(){return br(Lt,dr+"return "+xn).apply(n,ie)});if(qr.source=xn,T0(qr))throw qr;return qr}function m_(m){return ci(m).toLowerCase()}function g_(m){return ci(m).toUpperCase()}function y_(m,x,D){if(m=ci(m),m&&(D||x===n))return Ul(m);if(!m||!(x=Sr(x)))return m;var tt=fa(m),mt=fa(x),Lt=Tc(tt,mt),ie=kh(tt,mt)+1;return Da(tt,Lt,ie).join("")}function v_(m,x,D){if(m=ci(m),m&&(D||x===n))return m.slice(0,Ae(m)+1);if(!m||!(x=Sr(x)))return m;var tt=fa(m),mt=kh(tt,fa(x))+1;return Da(tt,0,mt).join("")}function O0(m,x,D){if(m=ci(m),m&&(D||x===n))return m.replace($n,"");if(!m||!(x=Sr(x)))return m;var tt=fa(m),mt=Tc(tt,fa(x));return Da(tt,mt).join("")}function z0(m,x){var D=at,tt=pt;if(Ki(x)){var mt="separator"in x?x.separator:mt;D="length"in x?Or(x.length):D,tt="omission"in x?Sr(x.omission):tt}m=ci(m);var Lt=m.length;if(ol(m)){var ie=fa(m);Lt=ie.length}if(D>=Lt)return m;var ye=D-_r(tt);if(ye<1)return tt;var Pe=ie?Da(ie,0,ye).join(""):m.slice(0,ye);if(mt===n)return Pe+tt;if(ie&&(ye+=Pe.length-ye),Em(mt)){if(m.slice(ye).search(mt)){var hn,fn=Pe;for(mt.global||(mt=Ds(mt.source,ci(pi.exec(mt))+"g")),mt.lastIndex=0;hn=mt.exec(fn);)var xn=hn.index;Pe=Pe.slice(0,xn===n?ye:xn)}}else if(m.indexOf(Sr(mt),ye)!=ye){var Un=Pe.lastIndexOf(mt);Un>-1&&(Pe=Pe.slice(0,Un))}return Pe+tt}function Eu(m){return m=ci(m),m&&Kt.test(m)?m.replace(oe,qe):m}var __=$h(function(m,x,D){return m+(D?" ":"")+x.toUpperCase()}),Lm=Vd("toUpperCase");function b_(m,x,D){return m=ci(m),x=D?n:x,x===n?fs(m)?yi(m):rl(m):m.match(x)||[]}var x_=Ee(function(m,x){try{return Xi(m,n,x)}catch(D){return T0(D)?D:new rr(D)}}),zx=xo(function(m,x){return Ho(x,function(D){D=ec(D),ml(m,D,_p(m[D],m))}),m});function Fx(m){var x=m==null?0:m.length,D=yr();return m=x?ii(m,function(tt){if(typeof tt[1]!="function")throw new Di(l);return[D(tt[0]),tt[1]]}):[],Ee(function(tt){for(var mt=-1;++mt<x;){var Lt=m[mt];if(Xi(Lt[0],this,tt))return Xi(Lt[1],this,tt)}})}function Bx(m){return Yn(ga(m,I))}function F0(m){return function(){return m}}function Nx(m,x){return m==null||m!==m?x:m}var jx=hm(),ac=hm(!0);function ba(m){return m}function Rm(m){return L(typeof m=="function"?m:ga(m,I))}function Vx(m){return ot(ga(m,I))}function Ux(m,x){return ft(m,ga(x,I))}var Hx=Ee(function(m,x){return function(D){return js(D,m,x)}}),xa=Ee(function(m,x){return function(D){return js(m,D,x)}});function rs(m,x,D){var tt=st(x),mt=gs(x,tt);D==null&&!(Ki(x)&&(mt.length||!tt.length))&&(D=x,x=m,m=this,mt=gs(x,st(x)));var Lt=!(Ki(D)&&"chain"in D)||!!D.chain,ie=Zs(m);return Ho(mt,function(ye){var Pe=x[ye];m[ye]=Pe,ie&&(m.prototype[ye]=function(){var hn=this.__chain__;if(Lt||hn){var fn=m(this.__wrapped__),xn=fn.__actions__=va(this.__actions__);return xn.push({func:Pe,args:arguments,thisArg:m}),fn.__chain__=hn,fn}return Pe.apply(m,ua([this.value()],arguments))})}),m}function Qh(){return Fi._===this&&(Fi._=Ea),this}function qs(){}function Jh(m){return m=Or(m),Ee(function(x){return Ot(x,m)})}var Uc=Hg(ii),P3=Hg(au),k3=Hg(ta);function mC(m){return Gh(m)?ds(ec(m)):re(m)}function L3(m){return function(x){return m==null?n:yl(m,x)}}var R3=op(),D3=op(!0);function $x(){return[]}function Gx(){return!1}function O3(){return{}}function z3(){return""}function F3(){return!0}function B3(m,x){if(m=Or(m),m<1||m>Xt)return[];var D=te,tt=Qi(m,te);x=yr(x),m-=te;for(var mt=cu(tt,x);++D<m;)x(D);return mt}function N3(m){return Er(m)?ii(m,ec):_s(m)?[m]:va(gm(ci(m)))}function j3(m){var x=++Os;return ci(m)+x}var V3=Nc(function(m,x){return m+x},0),U3=Gg("ceil"),H3=Nc(function(m,x){return m/x},1),$3=Gg("floor");function G3(m){return m&&m.length?Ka(m,ba,_u):n}function Z3(m,x){return m&&m.length?Ka(m,yr(x,2),_u):n}function W3(m){return Yu(m,ba)}function q3(m,x){return Yu(m,yr(x,2))}function K3(m){return m&&m.length?Ka(m,ba,J):n}function Y3(m,x){return m&&m.length?Ka(m,yr(x,2),J):n}var X3=Nc(function(m,x){return m*x},1),Q3=Gg("round"),J3=Nc(function(m,x){return m-x},0);function t5(m){return m&&m.length?Sa(m,ba):0}function e5(m,x){return m&&m.length?Sa(m,yr(x,2)):0}return St.after=Yd,St.ary=w0,St.assign=D0,St.assignIn=p_,St.assignInWith=u,St.assignWith=i,St.at=h,St.before=C0,St.bind=_p,St.bindAll=zx,St.bindKey=I0,St.castArray=Jv,St.chain=bm,St.chunk=Wb,St.compact=qb,St.concat=Kb,St.cond=Fx,St.conforms=Bx,St.constant=F0,St.countBy=Bv,St.create=f,St.curry=bp,St.curryRight=M0,St.debounce=Zv,St.defaults=v,St.defaultsDeep=w,St.defer=Mx,St.delay=Wv,St.difference=r0,St.differenceBy=bv,St.differenceWith=i0,St.drop=xv,St.dropRight=o0,St.dropRightWhile=Av,St.dropWhile=wv,St.fill=ym,St.filter=Nv,St.flatMap=_0,St.flatMapDeep=_x,St.flatMapDepth=Vv,St.flatten=l0,St.flattenDeep=fp,St.flattenDepth=Yb,St.flip=Sx,St.flow=jx,St.flowRight=ac,St.fromPairs=c0,St.functions=lt,St.functionsIn=ct,St.groupBy=bx,St.initial=Xb,St.intersection=Qb,St.intersectionBy=Cv,St.intersectionWith=Iv,St.invert=Vt,St.invertBy=ce,St.invokeMap=Ax,St.iteratee=Rm,St.keyBy=$v,St.keys=st,St.keysIn=It,St.map=yp,St.mapKeys=Yt,St.mapValues=Oe,St.matches=Vx,St.matchesProperty=Ux,St.memoize=Im,St.merge=sn,St.mergeWith=Ne,St.method=Hx,St.methodOf=xa,St.mixin=rs,St.negate=Mm,St.nthArg=Jh,St.omit=He,St.omitBy=pn,St.once=Ex,St.orderBy=vp,St.over=Uc,St.overArgs=Tx,St.overEvery=P3,St.overSome=k3,St.partial=xp,St.partialRight=Mu,St.partition=Vc,St.pick=ln,St.pickBy=vn,St.property=mC,St.propertyOf=L3,St.pull=tx,St.pullAll=Sv,St.pullAllBy=ex,St.pullAllWith=nx,St.pullAt=rx,St.range=R3,St.rangeRight=D3,St.rearg=qv,St.reject=b0,St.remove=ix,St.rest=Kv,St.reverse=vm,St.sampleSize=Cx,St.set=jn,St.setWith=cr,St.shuffle=Cm,St.slice=h0,St.sortBy=A0,St.sortedUniq=kv,St.sortedUniqBy=sx,St.split=Xh,St.spread=Yv,St.tail=lx,St.take=cx,St.takeRight=Lv,St.takeRightWhile=ux,St.takeWhile=hx,St.tap=zv,St.throttle=Xv,St.thru=nc,St.toArray=Qd,St.toPairs=er,St.toPairsIn=Gn,St.toPath=N3,St.toPlainObject=Jd,St.transform=Vr,St.unary=Qv,St.union=mp,St.unionBy=Rv,St.unionWith=d0,St.uniq=Dv,St.uniqBy=Ao,St.uniqWith=f0,St.unset=Gi,St.unzip=p0,St.unzipWith=m0,St.update=Co,St.updateWith=ia,St.values=oa,St.valuesIn=es,St.without=g0,St.words=b_,St.wrap=S0,St.xor=y0,St.xorBy=dx,St.xorWith=fx,St.zip=px,St.zipObject=mx,St.zipObjectDeep=Ov,St.zipWith=Xa,St.entries=er,St.entriesIn=Gn,St.extend=p_,St.extendWith=u,rs(St,St),St.add=V3,St.attempt=x_,St.camelCase=Yo,St.capitalize=Ro,St.ceil=U3,St.clamp=Ko,St.clone=Ap,St.cloneDeep=E0,St.cloneDeepWith=e_,St.cloneWith=t_,St.conformsTo=Gs,St.deburr=_a,St.defaultTo=Nx,St.divide=H3,St.endsWith=Ws,St.eq=Fa,St.escape=Do,St.escapeRegExp=ns,St.every=vx,St.find=jv,St.findIndex=a0,St.findKey=M,St.findLast=v0,St.findLastIndex=s0,St.findLastKey=P,St.floor=$3,St.forEach=Uv,St.forEachRight=Hv,St.forIn=z,St.forInRight=U,St.forOwn=W,St.forOwnRight=et,St.get=dt,St.gt=n_,St.gte=r_,St.has=wt,St.hasIn=Et,St.head=Wd,St.identity=ba,St.includes=xx,St.indexOf=u0,St.inRange=Ni,St.invoke=qt,St.isArguments=ph,St.isArray=Er,St.isArrayBuffer=i_,St.isArrayLike=Qa,St.isArrayLikeObject=wo,St.isBoolean=o_,St.isBuffer=Ja,St.isDate=a_,St.isElement=s_,St.isEmpty=l_,St.isEqual=c_,St.isEqualWith=Px,St.isError=T0,St.isFinite=u_,St.isFunction=Zs,St.isInteger=P0,St.isLength=qh,St.isMap=wp,St.isMatch=Sm,St.isMatchWith=kx,St.isNaN=Lx,St.isNative=Rx,St.isNil=ra,St.isNull=Xd,St.isNumber=Su,St.isObject=Ki,St.isObjectLike=$i,St.isPlainObject=Kh,St.isRegExp=Em,St.isSafeInteger=h_,St.isSet=Tm,St.isString=Pm,St.isSymbol=_s,St.isTypedArray=Yh,St.isUndefined=Dx,St.isWeakMap=d_,St.isWeakSet=k0,St.join=Jb,St.kebabCase=Io,St.last=vl,St.lastIndexOf=pp,St.lowerCase=Oo,St.lowerFirst=zo,St.lt=L0,St.lte=f_,St.max=G3,St.maxBy=Z3,St.mean=W3,St.meanBy=q3,St.min=K3,St.minBy=Y3,St.stubArray=$x,St.stubFalse=Gx,St.stubObject=O3,St.stubString=z3,St.stubTrue=F3,St.multiply=X3,St.nth=Mv,St.noConflict=Qh,St.noop=qs,St.now=Kd,St.pad=lo,St.padEnd=Si,St.padStart=ic,St.parseInt=tf,St.random=Lo,St.reduce=fh,St.reduceRight=Gv,St.repeat=oc,St.replace=Ox,St.result=Xe,St.round=Q3,St.runInContext=me,St.sample=wx,St.size=x0,St.snakeCase=ef,St.some=Ix,St.sortedIndex=Ev,St.sortedIndexBy=Tv,St.sortedIndexOf=Pv,St.sortedLastIndex=ox,St.sortedLastIndexBy=_m,St.sortedLastIndexOf=ax,St.startCase=nf,St.startsWith=rf,St.subtract=J3,St.sum=t5,St.sumBy=e5,St.template=of,St.times=B3,St.toFinite=rc,St.toInteger=Or,St.toLength=km,St.toLower=m_,St.toNumber=ts,St.toSafeInteger=R0,St.toString=ci,St.toUpper=g_,St.trim=y_,St.trimEnd=v_,St.trimStart=O0,St.truncate=z0,St.unescape=Eu,St.uniqueId=j3,St.upperCase=__,St.upperFirst=Lm,St.each=Uv,St.eachRight=Hv,St.first=Wd,rs(St,function(){var m={};return Ra(St,function(x,D){tr.call(St.prototype,D)||(m[D]=x)}),m}(),{chain:!1}),St.VERSION=a,Ho(["bind","bindKey","curry","curryRight","partial","partialRight"],function(m){St[m].placeholder=St}),Ho(["drop","take"],function(m,x){kr.prototype[m]=function(D){D=D===n?1:Wi(Or(D),0);var tt=this.__filtered__&&!x?new kr(this):this.clone();return tt.__filtered__?tt.__takeCount__=Qi(D,tt.__takeCount__):tt.__views__.push({size:Qi(D,te),type:m+(tt.__dir__<0?"Right":"")}),tt},kr.prototype[m+"Right"]=function(D){return this.reverse()[m](D).reverse()}}),Ho(["filter","map","takeWhile"],function(m,x){var D=x+1,tt=D==q||D==Rt;kr.prototype[m]=function(mt){var Lt=this.clone();return Lt.__iteratees__.push({iteratee:yr(mt,3),type:D}),Lt.__filtered__=Lt.__filtered__||tt,Lt}}),Ho(["head","last"],function(m,x){var D="take"+(x?"Right":"");kr.prototype[m]=function(){return this[D](1).value()[0]}}),Ho(["initial","tail"],function(m,x){var D="drop"+(x?"":"Right");kr.prototype[m]=function(){return this.__filtered__?new kr(this):this[D](1)}}),kr.prototype.compact=function(){return this.filter(ba)},kr.prototype.find=function(m){return this.filter(m).head()},kr.prototype.findLast=function(m){return this.reverse().find(m)},kr.prototype.invokeMap=Ee(function(m,x){return typeof m=="function"?new kr(this):this.map(function(D){return js(D,m,x)})}),kr.prototype.reject=function(m){return this.filter(Mm(yr(m)))},kr.prototype.slice=function(m,x){m=Or(m);var D=this;return D.__filtered__&&(m>0||x<0)?new kr(D):(m<0?D=D.takeRight(-m):m&&(D=D.drop(m)),x!==n&&(x=Or(x),D=x<0?D.dropRight(-x):D.take(x-m)),D)},kr.prototype.takeRightWhile=function(m){return this.reverse().takeWhile(m).reverse()},kr.prototype.toArray=function(){return this.take(te)},Ra(kr.prototype,function(m,x){var D=/^(?:filter|find|map|reject)|While$/.test(x),tt=/^(?:head|last)$/.test(x),mt=St[tt?"take"+(x=="last"?"Right":""):x],Lt=tt||/^find/.test(x);mt&&(St.prototype[x]=function(){var ie=this.__wrapped__,ye=tt?[1]:arguments,Pe=ie instanceof kr,hn=ye[0],fn=Pe||Er(ie),xn=function(ei){var oi=mt.apply(St,ua([ei],ye));return tt&&Un?oi[0]:oi};fn&&D&&typeof hn=="function"&&hn.length!=1&&(Pe=fn=!1);var Un=this.__chain__,dr=!!this.__actions__.length,wr=Lt&&!Un,qr=Pe&&!dr;if(!Lt&&fn){ie=qr?ie:new kr(this);var Cr=m.apply(ie,ye);return Cr.__actions__.push({func:nc,args:[xn],thisArg:n}),new qa(Cr,Un)}return wr&&qr?m.apply(this,ye):(Cr=this.thru(xn),wr?tt?Cr.value()[0]:Cr.value():Cr)})}),Ho(["pop","push","shift","sort","splice","unshift"],function(m){var x=Za[m],D=/^(?:push|sort|unshift)$/.test(m)?"tap":"thru",tt=/^(?:pop|shift)$/.test(m);St.prototype[m]=function(){var mt=arguments;if(tt&&!this.__chain__){var Lt=this.value();return x.apply(Er(Lt)?Lt:[],mt)}return this[D](function(ie){return x.apply(Er(ie)?ie:[],mt)})}}),Ra(kr.prototype,function(m,x){var D=St[x];if(D){var tt=D.name+"";tr.call(Dc,tt)||(Dc[tt]=[]),Dc[tt].push({name:x,func:D})}}),Dc[ip(n,V).name]=[{name:"wrapper",func:n}],kr.prototype.clone=Oc,kr.prototype.reverse=ka,kr.prototype.value=ma,St.prototype.at=xm,St.prototype.chain=gp,St.prototype.commit=qd,St.prototype.next=Am,St.prototype.plant=gx,St.prototype.reverse=yx,St.prototype.toJSON=St.prototype.valueOf=St.prototype.value=Fv,St.prototype.first=St.prototype.head,cl&&(St.prototype[cl]=wm),St},si=Hr();Ha?((Ha.exports=si)._=si,ou._=si):Fi._=si}).call(ho)})(w1,w1.exports);var zg=w1.exports;const E2=y2("map.queue",{pendingFunctions:{},pendingRemoveFunctions:{},mapIds:{}}),Y_=E2.pendingFunctions,dA=E2.pendingRemoveFunctions,ug=E2.mapIds;function _d(t,e,n){Y_[t]=e,UT()}function UT(){for(const t in ug)if(Object.prototype.hasOwnProperty.call(ug,t)){const e=ug[t];for(const n in Y_)if(Object.prototype.hasOwnProperty.call(Y_,n)&&!e[n]){const a=Y_[n];a(t),e[n]=!0}}}function $I(t){ug[t]={},UT()}function fF(t){for(const e in dA){const n=ug[t];if(Object.prototype.hasOwnProperty.call(dA,e)&&!n[e]){const a=dA[e];a(t),n[e]=!0}}ug[t]={}}const wl=y2("map.core",{state:{},getters:{getIsMulti(t){return!!wl.state[t].isMulti},getMaps(t){return wl.state[t].maps}},actions:{getMapStore(t){const e=wl.state[t];if(e)return e},initMaps(t,e){wl.state[t]={maps:e,isMulti:e.length>1},$I(t)},initMap(t,e){wl.state[t]={map:e},$I(t)},removeMap(t){delete wl.state[t],fF(t)},getMap(t,e){var s,d;const n=(s=wl.state[t])==null?void 0:s.map,a=(d=wl.state[t])==null?void 0:d.maps;a&&a.forEach(l=>{e&&e(l)}),n&&e&&e(n)}}}),{state:pF,getters:_J,actions:Af}=wl;function Vu(t,e,n){const a=Af.getMapStore(t);if(a)return a[e]||(a[e]=n||{}),a[e]}function Vo(t,e){const n=Af.getMapStore(t);return(n==null?void 0:n[e])||{}}const Yc=wl.actions.getMap,C1="lang";function HT(t){Vu(t,C1,ls({locale:{},localeDefault:{}}))}function bb(t){const e=Vo(t,C1);return e||(HT(t),Vo(t,C1))}function mF(t,e){const n=bb(t);n&&(n.locale=zg.merge({},n.locale,e))}function gF(t,e){const n=bb(t);n&&(n.localeDefault=zg.merge({},n.localeDefault,e))}function yF(t,e){const n=bb(t);n&&(n.translate=e)}_d(C1,HT);const vF=1e3,Fm=new Map;function To(t){if(!t)throw new Error("mapId is required");const e=_n(()=>bb(t));function n(o,g){var I,E,S;if((I=e.value)!=null&&I.translate)return e.value.translate(o,g);const _=bw((E=e.value)==null?void 0:E.locale,o);if(_!==void 0)return GI(_,g);const C=bw((S=e.value)==null?void 0:S.localeDefault,o);return C!==void 0?GI(C,g):o}const a=_n(()=>n);function s(o){mF(t,o)}function d(o){gF(t,o)}function l(o){yF(t,o)}return{trans:a,setLocale:s,setLocaleDefault:d,setTranslate:l}}function bw(t,e,n){if(!t||!e)return n;const a=Array.isArray(e)?e.join("."):e,s=`${JSON.stringify(t)}_${a}`;if(Fm.has(s))return Fm.get(s);Fm.size>=vF&&Fm.clear();const d=Array.isArray(e)?e:e.split(".").filter(o=>o.length);if(d.length<1){const o=t===void 0?n:t;return o!==void 0&&o!==n&&Fm.set(s,o),o}const l=bw(t[d.shift()],d,n);return l!==void 0&&l!==n&&Fm.set(s,l),l}function GI(t,e){return t?e?t.replace(/\{(\w+)\}/g,(n,a)=>{const s=e[a];return s!==void 0?String(s):n}):t:""}const Ur=y2("drag",{state:{container:ls({}),componentCard:void 0,componentCardHeader:void 0,componentCardSidebarToggle:void 0},getters:{getComponentCard(t){return Ur.state.componentCard},getComponentCardHeader(t){return Ur.state.componentCardHeader},getComponentCardSidebarToggle(t){return Ur.state.componentCardSidebarToggle},getItems(t){return Ur.actions.getContainer(t).items},getItemsShow(t){return Ur.actions.getContainer(t).show},getWidth(t){return Ur.actions.getContainer(t).width},getHeight(t){return Ur.actions.getContainer(t).height},getIsMobile(t){return Ur.actions.getContainer(t).isMobile}},actions:{initContainer(t){Ur.state.container[t]={items:[],show:[],actions:{},height:0,width:0,isMobile:!1}},removeContainer(t){delete Ur.state.container[t]},getContainer(t){if(!t)throw"Not set container id";const e=Ur.state.container[t];if(!e)throw"Not found container for id "+t;return e},setComponentCard(t){Ur.state.componentCard=t},setComponentCardHeader(t){Ur.state.componentCardHeader=t},setComponentCardSidebarToggle(t){Ur.state.componentCardSidebarToggle=t},setParentProps(t,e){const n=Ur.actions.getContainer(t);n.width=e.width,n.height=e.height,n.isMobile=e.isMobile},registerItem(t,e){Ur.actions.getContainer(t).items.push(e)},registerAction(t,e,n){const a=Ur.actions.getContainer(t);a.actions[e]=n},unRegisterItem(t,e){const n=Ur.state.container[t];n&&(n.items=n.items.filter(a=>a!==e),n.show=n.show.filter(a=>a!==e),delete n.actions[e])},registerItemShow(t,e,n){_F(t,e,n),fA(t)},setToBack(t,e){if(!t||!e)return;const n=ZI(t),a=n.show.findIndex(s=>s==e);a>0&&(n.show.splice(a,1),n.show.unshift(e),fA(t))},setToFront(t,e){if(!t||!e)return;const n=ZI(t),a=n.show.findIndex(s=>s==e);a<n.show.length-1&&(n.show.splice(a,1),n.show.push(e),fA(t))}}});function _F(t,e,n){const a=Ur.actions.getContainer(t),s=a.show;if(n&&!s.includes(e))s.push(e);else if(!n){const d=s.indexOf(e);d!==-1&&s.splice(d,1)}a.show=s}function fA(t){Ur.actions.getContainer(t).show.forEach((n,a)=>{const s=bF(t,n);s&&s.setZIndex(a<0?1:a+2)})}function bF(t,e){return Ur.actions.getContainer(t).actions[e]}function ZI(t){const e=Ur.state.container[t];if(!e)throw"Not found container for id "+t;return e}function xF(t){Ur.actions.initContainer(t)}function AF(t){Ur.actions.removeContainer(t)}const wF=Ur.actions.setParentProps;function CF(t,e){Ur.actions.registerItem(t,e)}function IF(t,e){Ur.actions.unRegisterItem(t,e)}const WI=Ur.actions.registerItemShow,MF=Ur.actions.registerAction,SF=Ur.actions.setToFront,EF=Ur.actions.setToBack;Ur.actions.setComponentCard;Ur.actions.setComponentCardHeader;Ur.actions.setComponentCardSidebarToggle;const TF=["id"],PF=nr({__name:"draggable-container",props:{containerId:{}},emits:{init:t=>!0,destroy:t=>!0},setup(t,{emit:e}){const n=e,a=mn(),{containerId:s}=t,d=mn(s||`draggable-container-${ju()}`),l=mn(!1);_n(()=>Ur.state),go(()=>{xF(d.value),window.addEventListener("resize",o),El(()=>{o(),l.value=!0,n("init",d.value)})}),yd(()=>{AF(d.value),window.removeEventListener("resize",o),n("destroy",d.value)}),xf("containerId",d);function o(){var _,C;const g=((_=a.value)==null?void 0:_.clientWidth)||0;wF(d.value,{width:g,height:((C=a.value)==null?void 0:C.clientHeight)||0,isMobile:g<600})}return(g,_)=>(Mt(),pe("div",{class:"draggable-container",ref_key:"box",ref:a,id:g.containerId},[d.value&&l.value?Wn(g.$slots,"default",{key:0,containerId:g.containerId},void 0,!0):wn("",!0)],8,TF))}}),kF=Vn(PF,[["__scopeId","data-v-57a91267"]]),LF={props:{height:{},width:{}},name:"MapCard",data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},RF={class:"card-container"},DF=eb('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1);function OF(t,e,n,a,s,d){return Mt(),pe("div",Tr({class:"card",style:d.cardStyle},t.$attrs),[Nt("div",RF,[Wn(t.$slots,"default")]),DF],16)}const zF=Vn(LF,[["render",OF]]),FF={name:"MapHeader"},T2=t=>(_c("data-v-9b566e91"),t=t(),bc(),t),BF=T2(()=>Nt("hr",{class:"map-divider"},null,-1)),NF={class:"draggable-header"},jF={class:"draggable-header__content"},VF={class:"draggable-header__title"},UF=T2(()=>Nt("div",{class:"map-spacer"},null,-1)),HF=T2(()=>Nt("hr",{class:"map-divider"},null,-1));function $F(t,e,n,a,s,d){return Mt(),pe(mr,null,[BF,Nt("div",NF,[Nt("div",jF,[Wn(t.$slots,"pre-title",{},void 0,!0),Nt("div",VF,[Wn(t.$slots,"title",{},void 0,!0)]),UF,Wn(t.$slots,"extra-btn",{},void 0,!0)])]),HF],64)}const GF=Vn(FF,[["render",$F],["__scopeId","data-v-9b566e91"]]);function xb(t){const e=_n(()=>Ur.getters.getComponentCard(t.containerId)||t.componentCard||zF),n=_n(()=>Ur.getters.getComponentCardHeader(t.containerId)||t.componentCardHeader||GF);return{componentCard:e,componentCardHeader:n}}const ZF={componentCard:{type:[String,Object]},componentCardHeader:{type:[String,Object]}},WF={name:"ArrangeBringForwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},qF=["aria-hidden","aria-label"],KF=["fill","width","height"],YF={d:"M2,2H16V16H2V2M22,8V22H8V18H10V20H20V10H18V8H22Z"},XF={key:0};function QF(t,e,n,a,s,d){return Mt(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrange-bring-forward-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(Mt(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Nt("path",YF,[n.title?(Mt(),pe("title",XF,Rn(n.title),1)):wn("",!0)])],8,KF))],16,qF)}const JF=Vn(WF,[["render",QF]]),tB={name:"ArrangeSendBackwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},eB=["aria-hidden","aria-label"],nB=["fill","width","height"],rB={d:"M2,2H16V16H2V2M22,8V22H8V18H18V8H22M4,4V14H14V4H4Z"},iB={key:0};function oB(t,e,n,a,s,d){return Mt(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrange-send-backward-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(Mt(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Nt("path",rB,[n.title?(Mt(),pe("title",iB,Rn(n.title),1)):wn("",!0)])],8,nB))],16,eB)}const aB=Vn(tB,[["render",oB]]),sB={name:"ArrowDownDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},lB=["aria-hidden","aria-label"],cB=["fill","width","height"],uB={d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M7,10L12,15L17,10H7Z"},hB={key:0};function dB(t,e,n,a,s,d){return Mt(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrow-down-drop-circle-outline-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(Mt(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Nt("path",uB,[n.title?(Mt(),pe("title",hB,Rn(n.title),1)):wn("",!0)])],8,cB))],16,lB)}const qI=Vn(sB,[["render",dB]]),fB={name:"ArrowUpDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},pB=["aria-hidden","aria-label"],mB=["fill","width","height"],gB={d:"M12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M17,14L12,9L7,14H17Z"},yB={key:0};function vB(t,e,n,a,s,d){return Mt(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon arrow-up-drop-circle-outline-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(Mt(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Nt("path",gB,[n.title?(Mt(),pe("title",yB,Rn(n.title),1)):wn("",!0)])],8,mB))],16,pB)}const KI=Vn(fB,[["render",vB]]),_B={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},bB=["aria-hidden","aria-label"],xB=["fill","width","height"],AB={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},wB={key:0};function CB(t,e,n,a,s,d){return Mt(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon close-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(Mt(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Nt("path",AB,[n.title?(Mt(),pe("title",wB,Rn(n.title),1)):wn("",!0)])],8,xB))],16,bB)}const IB=Vn(_B,[["render",CB]]),MB={name:"DragVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},SB=["aria-hidden","aria-label"],EB=["fill","width","height"],TB={d:"M22.67,12L18.18,16.5L15.67,14L17.65,12L15.67,10.04L18.18,7.53L22.67,12M12,1.33L16.47,5.82L13.96,8.33L12,6.35L10,8.33L7.5,5.82L12,1.33M12,22.67L7.53,18.18L10.04,15.67L12,17.65L14,15.67L16.5,18.18L12,22.67M1.33,12L5.82,7.5L8.33,10L6.35,12L8.33,13.96L5.82,16.47L1.33,12M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10Z"},PB={key:0};function kB(t,e,n,a,s,d){return Mt(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon drag-variant-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(Mt(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Nt("path",TB,[n.title?(Mt(),pe("title",PB,Rn(n.title),1)):wn("",!0)])],8,EB))],16,SB)}const LB=Vn(MB,[["render",kB]]),RB={name:"MenuLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},DB=["aria-hidden","aria-label"],OB=["fill","width","height"],zB={d:"M14,7L9,12L14,17V7Z"},FB={key:0};function BB(t,e,n,a,s,d){return Mt(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon menu-left-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(Mt(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Nt("path",zB,[n.title?(Mt(),pe("title",FB,Rn(n.title),1)):wn("",!0)])],8,OB))],16,DB)}const YI=Vn(RB,[["render",BB]]),NB={name:"MenuRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},jB=["aria-hidden","aria-label"],VB=["fill","width","height"],UB={d:"M10,17L15,12L10,7V17Z"},HB={key:0};function $B(t,e,n,a,s,d){return Mt(),pe("span",Tr(t.$attrs,{"aria-hidden":n.title?null:!0,"aria-label":n.title,class:"material-design-icon menu-right-icon",role:"img",onClick:e[0]||(e[0]=l=>t.$emit("click",l))}),[(Mt(),pe("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Nt("path",UB,[n.title?(Mt(),pe("title",HB,Rn(n.title),1)):wn("",!0)])],8,VB))],16,jB)}const XI=Vn(NB,[["render",$B]]);function Jy(){return{CloseIcon:IB,FullscreenIcon:qI,OffFullscreenIcon:KI,ToBackIcon:aB,ToFrontIcon:JF,ExpandedIcon:KI,CloseExpandedIcon:qI,DragIcon:LB,SidebarLeftExpandedIcon:YI,SidebarLeftCloseExpandedIcon:XI,SidebarRightExpandedIcon:XI,SidebarRightCloseExpandedIcon:YI}}function GB(t,e){return e.length<1?!1:e[e.length-1]==t}function ZB(t,e){return e.length<1?!1:e[0]==t}function Ab(t,e,n){const a=mn(`draggable-item-${ju()}`),s=mn(0);function d(l){s.value=l}return go(()=>{CF(t,a.value),MF(t,a.value,{setZIndex:d}),e.value&&WI(t,a.value,e.value)}),yd(()=>{IF(t,a.value)}),jo(e,l=>{WI(t,a.value,l)}),{itemId:a,zIndex:s}}function wb(t,e){const n=_n(()=>Ur.getters.getItems(t)),a=_n(()=>Ur.getters.getItemsShow(t)),s=_n(()=>GB(e,a.value)),d=_n(()=>ZB(e,a.value)),l=_n(()=>a.value.length>1);function o(){EF(t,e)}function g(){SF(t,e)}return{items:n,itemShows:a,isLast:s,isFirst:d,isHasItems:l,onToBack:o,onToFront:g}}function WB(t){const e=_n(()=>Ur.getters.getWidth(t)),n=_n(()=>Ur.getters.getHeight(t));return{containerWidth:e,containerHeight:n}}const Cb={disabledExpand:Boolean,disabledHeader:Boolean,disabledClose:Boolean,disabledOrder:Boolean,containerId:String,title:{type:String,default:""},...ZF};function Ib(t,e,n){const a=mn(!!t.show||!!n);return jo(()=>t.show,d=>{a.value=d}),{show:_n({get(){return a.value},set(d){a.value=d,e("update:show",d),d||e("close")}})}}const Mb={show:Boolean},Sb={"update:show":t=>Boolean,close:()=>Boolean};function Eb(t,e,n){const a=mn(!!n);jo(()=>t.expand,l=>{a.value=l});const s=_n({get(){return a.value},set(l){a.value=l,e("update:expand",l)}});function d(){s.value=!s.value}return{expand:s,toggle:d}}const Tb={expand:Boolean},Pb={"update:expand":t=>Boolean},qB={props:{height:{default:32},width:{default:32},disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},bindClass(){return{"map-control-button--disabled":this.disabled}}}},KB={class:"map-control-button__content"};function YB(t,e,n,a,s,d){return Mt(),pe("button",Tr({class:"map-control-button"},t.$attrs,{style:d.bindStyle,class:d.bindClass}),[Nt("span",KB,[Wn(t.$slots,"default",{},void 0,!0)])],16)}const Na=Vn(qB,[["render",YB],["__scopeId","data-v-cfd74f51"]]),XB={key:0},QB={key:1},JB={name:"MapSidebarToggle"},tN=nr({...JB,props:{right:Boolean,expand:Boolean},setup(t){const{SidebarLeftExpandedIcon:e,SidebarLeftCloseExpandedIcon:n,SidebarRightExpandedIcon:a,SidebarRightCloseExpandedIcon:s}=Jy();return(d,l)=>(Mt(),pe("button",null,[t.right?(Mt(),pe("span",QB,[t.expand?(Mt(),Je(ut(a),{key:0,size:16})):(Mt(),Je(ut(s),{key:1,size:16}))])):(Mt(),pe("span",XB,[t.expand?(Mt(),Je(ut(e),{key:0,size:16})):(Mt(),Je(ut(n),{key:1,size:16}))]))]))}}),eN=Vn(tN,[["__scopeId","data-v-cc94c956"]]),nN={class:"sidebar-container--content"},rN={class:"draggable-sidebar"},iN={class:"draggable-sidebar-content"},oN={key:0,class:"complex-button-close"},aN={key:0},sN={key:1},lN={name:"DraggableItemSideBar"},cN=nr({...lN,props:{...Mb,...Tb,...Cb,componentMapSidebarToggle:{type:[String,Object]},width:{type:[Number,String],default:"auto"},right:Boolean},emits:{...Sb,...Pb},setup(t,{emit:e}){const{CloseIcon:n,SidebarLeftExpandedIcon:a,SidebarLeftCloseExpandedIcon:s,SidebarRightExpandedIcon:d,SidebarRightCloseExpandedIcon:l,ToBackIcon:o,ToFrontIcon:g}=Jy(),_=t,C=e,I=Va("containerId",mn(_.containerId||""));if(!I.value)throw"Not set container id";const{show:E}=Ib(_,C),{zIndex:S,itemId:k}=Ab(I.value,E),{isLast:R,isFirst:B,isHasItems:V,onToBack:F,onToFront:j}=wb(I.value,k.value),{expand:G,toggle:Q}=Eb(_,C,!0),nt=_n(()=>!_.width||_.width=="auto"),{componentCard:X,componentCardHeader:K}=xb({..._,containerId:I.value});_n(()=>Ur.getters.getComponentCardSidebarToggle(I.value)||_.componentMapSidebarToggle||eN);function Z(){E.value=!1}const at=_n(()=>{let pt={};return pt.zIndex=S.value,_.width&&_.width!="auto"&&(_.width&&!isNaN(+_.width)?pt.width=_.width+"px":pt.width=_.width),pt});return(pt,rt)=>ut(E)?(Mt(),pe("div",{key:0,class:Li(["sidebar-container",{expand:ut(G),"left-sidebar-container":!t.right,"right-sidebar-container":t.right,"auto-sidebar-container":nt.value}]),style:fi(at.value)},[Nt("div",nN,[(Mt(),Je(sa(ut(X)),{width:"100%",height:"100%"},{default:Ie(()=>[Nt("div",rN,[pt.disabledHeader?wn("",!0):(Mt(),Je(sa(ut(K)),{key:0},{title:Ie(()=>[Wn(pt.$slots,"title",{},()=>[fo(Rn(pt.title),1)],!0)]),"extra-btn":Ie(()=>[Wn(pt.$slots,"extra-btn",{},void 0,!0),ut(V)&&!pt.disabledOrder?(Mt(),pe(mr,{key:0},[ee(Na,{disabled:ut(B),onClick:rt[0]||(rt[0]=xt=>ut(F)())},{default:Ie(()=>[ee(ut(o),{size:16})]),_:1},8,["disabled"]),ee(Na,{disabled:ut(R),onClick:rt[1]||(rt[1]=xt=>ut(j)())},{default:Ie(()=>[ee(ut(g),{size:16})]),_:1},8,["disabled"])],64)):wn("",!0),pt.disabledClose?wn("",!0):(Mt(),Je(Na,{key:1,onClick:Z},{default:Ie(()=>[ee(ut(n),{size:16})]),_:1}))]),_:3})),Nt("div",iN,[Wn(pt.$slots,"default",{},void 0,!0)])])]),_:3}))]),ut(E)&&!pt.disabledExpand?(Mt(),pe("div",oN,[Nt("button",{onClick:rt[2]||(rt[2]=(...xt)=>ut(Q)&&ut(Q)(...xt))},[t.right?(Mt(),pe("span",sN,[ut(G)?(Mt(),Je(ut(d),{key:0,size:16})):(Mt(),Je(ut(l),{key:1,size:16}))])):(Mt(),pe("span",aN,[ut(G)?(Mt(),Je(ut(a),{key:0,size:16})):(Mt(),Je(ut(s),{key:1,size:16}))]))])])):wn("",!0)],6)):wn("",!0)}}),uN=Vn(cN,[["__scopeId","data-v-a9ffb40e"]]);function QI(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Bm(t,e,n,a=1){const[s,d]=typeof a=="number"?[a,a]:a,l=Math.round(e/s/t[0])*t[0],o=Math.round(n/d/t[1])*t[1];return[l,o]}function pA(t,e,n){return t-e-n}function mA(t,e,n){return t-e-n}function $c(t,e,n){return e!==null&&t<e?e:n!==null&&n<t?n:t}function JI(t,e,n){let a=t;const s=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(d=>QI(a[d]));if(!QI(a[s]))return!1;do{if(a[s](e))return!0;if(a===n)return!1;a=a.parentNode}while(a);return!1}function hN(t){const e=window.getComputedStyle(t);return[parseFloat(e.getPropertyValue("width"),10),parseFloat(e.getPropertyValue("height"),10)]}function Sp(t,e,n){t&&(t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener?t.addEventListener(e,n,!0):t["on"+e]=n)}function rd(t,e,n){t&&(t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener?t.removeEventListener(e,n,!0):t["on"+e]=null)}const dN=(t,e)=>{const n=t.__vccOpts||t;for(const[a,s]of e)n[a]=s;return n},X_={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},fN={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},pN={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let id=X_.mouse;const mN={replace:!0,name:"vue-draggable-resizable",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},h:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},minWidth:{type:Number,default:0,validator:t=>t>=0},minHeight:{type:Number,default:0,validator:t=>t>=0},maxWidth:{type:Number,default:null,validator:t=>t>=0},maxHeight:{type:Number,default:null,validator:t=>t>=0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:t=>typeof t=="string"?t==="auto":t>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:t=>{const e=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(t.filter(n=>e.has(n))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:t=>["x","y","both"].includes(t)},grid:{type:Array,default:()=>[1,1]},parent:{type:Boolean,default:!1},scale:{type:[Number,Array],default:1,validator:t=>typeof t=="number"?t>0:t.length===2&&t[0]>0&&t[1]>0},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,handle:null,enabled:this.active,resizing:!1,dragging:!1,dragEnable:!1,resizeEnable:!1,zIndex:this.z}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxHeight&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e;const[n,a]=hN(this.$el);this.aspectFactor=(this.w!=="auto"?this.w:n)/(this.h!=="auto"?this.h:a),this.width=this.w!=="auto"?this.w:n,this.height=this.h!=="auto"?this.h:a,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.active&&this.$emit("activated"),Sp(document.documentElement,"mousedown",this.deselect),Sp(document.documentElement,"touchend touchcancel",this.deselect),Sp(window,"resize",this.checkParentSize)},beforeUnmount:function(){rd(document.documentElement,"mousedown",this.deselect),rd(document.documentElement,"touchstart",this.handleUp),rd(document.documentElement,"mousemove",this.move),rd(document.documentElement,"touchmove",this.move),rd(document.documentElement,"mouseup",this.handleUp),rd(document.documentElement,"touchend touchcancel",this.deselect),rd(window,"resize",this.checkParentSize)},methods:{resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top}},getParentSize(){if(this.parent){const t=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(t.getPropertyValue("width"),10),parseInt(t.getPropertyValue("height"),10)]}return[null,null]},elementTouchDown(t){id=X_.touch,this.elementDown(t)},elementMouseDown(t){id=X_.mouse,this.elementDown(t)},elementDown(t){if(t instanceof MouseEvent&&t.button!==0)return;const e=t.target||t.srcElement;if(this.$el.contains(e)){if(this.onDragStart(t)===!1)return;if(this.dragHandle&&!JI(e,this.dragHandle,this.$el)||this.dragCancel&&JI(e,this.dragCancel,this.$el)){this.dragging=!1;return}this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragEnable=!0),this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),Sp(document.documentElement,id.move,this.move),Sp(document.documentElement,id.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(t){const e=t.target||t.srcElement,n=new RegExp(this.className+"-([trmbl]{2})","");!this.$el.contains(e)&&!n.test(e.className)&&(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),rd(document.documentElement,id.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown(t,e){id=X_.touch,this.handleDown(t,e)},handleDown(t,e){e instanceof MouseEvent&&e.which!==1||this.onResizeStart(t,e)!==!1&&(e.stopPropagation&&e.stopPropagation(),this.lockAspectRatio&&!t.includes("m")?this.handle="m"+t.substring(1):this.handle=t,this.resizeEnable=!0,this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),Sp(document.documentElement,id.move,this.handleResize),Sp(document.documentElement,id.stop,this.handleUp))},calcResizeLimits(){let t=this.minW,e=this.minH,n=this.maxW,a=this.maxH;const s=this.aspectFactor,[d,l]=this.grid,o=this.width,g=this.height,_=this.left,C=this.top,I=this.right,E=this.bottom;this.lockAspectRatio&&(t/e>s?e=t/s:t=s*e,n&&a?(n=Math.min(n,s*a),a=Math.min(a,n/s)):n?a=n/s:a&&(n=s*a)),n=n-n%d,a=a-a%l;const S={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(S.minLeft=_%d,S.maxLeft=_+Math.floor((o-t)/d)*d,S.minTop=C%l,S.maxTop=C+Math.floor((g-e)/l)*l,S.minRight=I%d,S.maxRight=I+Math.floor((o-t)/d)*d,S.minBottom=E%l,S.maxBottom=E+Math.floor((g-e)/l)*l,n&&(S.minLeft=Math.max(S.minLeft,this.parentWidth-I-n),S.minRight=Math.max(S.minRight,this.parentWidth-_-n)),a&&(S.minTop=Math.max(S.minTop,this.parentHeight-E-a),S.minBottom=Math.max(S.minBottom,this.parentHeight-C-a)),this.lockAspectRatio&&(S.minLeft=Math.max(S.minLeft,_-C*s),S.minTop=Math.max(S.minTop,C-_/s),S.minRight=Math.max(S.minRight,I-E*s),S.minBottom=Math.max(S.minBottom,E-I/s))):(S.minLeft=null,S.maxLeft=_+Math.floor((o-t)/d)*d,S.minTop=null,S.maxTop=C+Math.floor((g-e)/l)*l,S.minRight=null,S.maxRight=I+Math.floor((o-t)/d)*d,S.minBottom=null,S.maxBottom=E+Math.floor((g-e)/l)*l,n&&(S.minLeft=-(I+n),S.minRight=-(_+n)),a&&(S.minTop=-(E+a),S.minBottom=-(C+a)),this.lockAspectRatio&&n&&a&&(S.minLeft=Math.min(S.minLeft,-(I+n)),S.minTop=Math.min(S.minTop,-(a+E)),S.minRight=Math.min(S.minRight,-_-n),S.minBottom=Math.min(S.minBottom,-C-a))),S},move(t){this.resizing?this.handleResize(t):this.dragEnable&&this.handleDrag(t)},handleDrag(t){const e=this.axis,n=this.grid,a=this.bounds,s=this.mouseClickPosition,d=e&&e!=="y"?s.mouseX-(t.touches?t.touches[0].pageX:t.pageX):0,l=e&&e!=="x"?s.mouseY-(t.touches?t.touches[0].pageY:t.pageY):0,[o,g]=Bm(n,d,l,this.scale),_=$c(s.left-o,a.minLeft,a.maxLeft),C=$c(s.top-g,a.minTop,a.maxTop);if(this.onDrag(_,C)===!1)return;const I=$c(s.right+o,a.minRight,a.maxRight),E=$c(s.bottom+g,a.minBottom,a.maxBottom);this.left=_,this.top=C,this.right=I,this.bottom=E,this.$emit("dragging",this.left,this.top),this.dragging=!0},moveHorizontally(t){const[e,n]=Bm(this.grid,t,this.top,1),a=$c(e,this.bounds.minLeft,this.bounds.maxLeft);this.left=a,this.right=this.parentWidth-this.width-a},moveVertically(t){const[e,n]=Bm(this.grid,this.left,t,1),a=$c(n,this.bounds.minTop,this.bounds.maxTop);this.top=a,this.bottom=this.parentHeight-this.height-a},handleResize(t){let e=this.left,n=this.top,a=this.right,s=this.bottom;const d=this.mouseClickPosition,l=this.aspectFactor,o=d.mouseX-(t.touches?t.touches[0].pageX:t.pageX),g=d.mouseY-(t.touches?t.touches[0].pageY:t.pageY);!this.widthTouched&&o&&(this.widthTouched=!0),!this.heightTouched&&g&&(this.heightTouched=!0);const[_,C]=Bm(this.grid,o,g,this.scale);this.handle.includes("b")?(s=$c(d.bottom+C,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(a=this.right-(this.bottom-s)*l)):this.handle.includes("t")&&(n=$c(d.top-C,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(e=this.left-(this.top-n)*l)),this.handle.includes("r")?(a=$c(d.right+_,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(s=this.bottom-(this.right-a)/l)):this.handle.includes("l")&&(e=$c(d.left-_,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(n=this.top-(this.left-e)/l));const I=pA(this.parentWidth,e,a),E=mA(this.parentHeight,n,s);this.onResize(this.handle,e,n,I,E)!==!1&&(this.left=e,this.top=n,this.right=a,this.bottom=s,this.width=I,this.height=E,this.$emit("resizing",this.left,this.top,this.width,this.height),this.resizing=!0)},changeWidth(t){const[e,n]=Bm(this.grid,t,0,1),a=$c(this.parentWidth-e-this.left,this.bounds.minRight,this.bounds.maxRight);let s=this.bottom;this.lockAspectRatio&&(s=this.bottom-(this.right-a)/this.aspectFactor);const d=pA(this.parentWidth,this.left,a),l=mA(this.parentHeight,this.top,s);this.right=a,this.bottom=s,this.width=d,this.height=l},changeHeight(t){const[e,n]=Bm(this.grid,0,t,1),a=$c(this.parentHeight-n-this.top,this.bounds.minBottom,this.bounds.maxBottom);let s=this.right;this.lockAspectRatio&&(s=this.right-(this.bottom-a)*this.aspectFactor);const d=pA(this.parentWidth,this.left,s),l=mA(this.parentHeight,this.top,a);this.right=s,this.bottom=a,this.width=d,this.height=l},handleUp(t){this.handle=null,this.resetBoundsAndMouseState(),this.dragEnable=!1,this.resizeEnable=!1,this.resizing&&(this.resizing=!1,this.$emit("resizeStop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragStop",this.left,this.top)),rd(document.documentElement,id.move,this.handleResize)}},computed:{style(){return{transform:`translate(${this.left}px, ${this.top}px)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,...this.dragging&&this.disableUserSelect?fN:pN}},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return this.w==="auto"&&!this.widthTouched?"auto":this.width+"px"},computedHeight(){return this.h==="auto"&&!this.heightTouched?"auto":this.height+"px"},minW(){return this.minWidth},minH(){return this.minHeight},maxW(){return this.maxWidth},maxH(){return this.maxHeight},resizingOnX(){return!!this.handle&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return!!this.handle&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return!!this.handle&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(t){this.enabled=t,t?this.$emit("activated"):this.$emit("deactivated")},z(t){(t>=0||t==="auto")&&(this.zIndex=t)},x(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(t))},y(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(t))},lockAspectRatio(t){t?this.aspectFactor=this.width/this.height:this.aspectFactor=void 0},w(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(t))},h(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(t))}}},gN=["onMousedown","onTouchstart"];function yN(t,e,n,a,s,d){return Mt(),pe("div",{style:fi(d.style),class:Li([{[n.classNameActive]:t.enabled,[n.classNameDragging]:t.dragging,[n.classNameResizing]:t.resizing,[n.classNameDraggable]:n.draggable,[n.classNameResizable]:n.resizable},n.className]),onMousedown:e[0]||(e[0]=(...l)=>d.elementMouseDown&&d.elementMouseDown(...l)),onTouchstart:e[1]||(e[1]=(...l)=>d.elementTouchDown&&d.elementTouchDown(...l))},[(Mt(!0),pe(mr,null,ki(d.actualHandles,l=>(Mt(),pe("div",{key:l,class:Li([n.classNameHandle,n.classNameHandle+"-"+l]),style:fi({display:t.enabled?"block":"none"}),onMousedown:_i(o=>d.handleDown(l,o),["stop","prevent"]),onTouchstart:_i(o=>d.handleTouchDown(l,o),["stop","prevent"])},[Wn(t.$slots,l)],46,gN))),128)),Wn(t.$slots,"default")],38)}const $T=dN(mN,[["render",yN]]);function xw(t){xw.installed||(xw.installed=!0,t.component("VueDraggableResizable",$T))}const vN={install:xw};let I1=null;typeof window<"u"?I1=window.Vue:typeof global<"u"&&(I1=global.Vue);I1&&I1.use(vN);const _N=t=>(_c("data-v-23372390"),t=t(),bc(),t),bN={class:"draggable-popup-desktop"},xN={class:"draggable-popup-drag-container"},AN=_N(()=>Nt("div",{class:"drag grabbing"},null,-1)),wN={class:"draggable-popup-desktop-content"},CN={name:"DraggableItemPopup"},IN=nr({...CN,props:{...Mb,...Tb,...Cb,sticks:{type:Array,default:()=>["bl","br"]},top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},centerX:Boolean,centerY:Boolean,center:Boolean},emits:{...Sb,...Pb},setup(t,{emit:e}){const{CloseIcon:n,CloseExpandedIcon:a,DragIcon:s,ExpandedIcon:d,ToBackIcon:l,ToFrontIcon:o}=Jy(),g=t,_=e,C=Va("containerId",mn(g.containerId||""));if(!C.value)throw"Not set container id";const{show:I}=Ib(g,_),{zIndex:E,itemId:S}=Ab(C.value,I),{containerWidth:k,containerHeight:R}=WB(C.value),{isLast:B,isFirst:V,isHasItems:F,onToBack:j,onToFront:G}=wb(C.value,S.value),Q=mn(!1),nt=mn(!1),X=mn(g.height||200),K=mn(X.value),Z=mn(g.width||200),at=mn(0),pt=mn(0),{expand:rt}=Eb(g,_,!0);function xt(){nt.value=!0}function q(){nt.value=!1}const{componentCard:zt,componentCardHeader:Rt}=xb({...g,containerId:C.value});function Bt(Gt,Re,Ge,Ce){Z.value=Ge,X.value=Ce}function Xt(){I.value=!1}jo(I,()=>{ge()},{immediate:!0});function ge(){Q.value=!1,I&&(g.left!=null&&(at.value=g.left),g.top!=null&&(pt.value=g.top),g.right&&(at.value=k.value-g.right-Z.value),g.bottom&&(pt.value=R.value-g.bottom-X.value),(g.center||g.centerX)&&(at.value=(k.value-Z.value)/2),(g.center||g.centerY)&&(pt.value=(R.value-X.value)/2),Q.value=!0)}function en(){rt.value&&X.value>50&&(K.value=X.value),rt.value=!rt.value,X.value=rt.value?K.value:50}function te(){var Gt;(Gt=window==null?void 0:window.getSelection())==null||Gt.removeAllRanges()}return(Gt,Re)=>ut(I)&&Q.value?(Mt(),Je(ut($T),Tr({key:0},Gt.$attrs,{dragHandle:".drag",parent:!0,handles:t.sticks,w:Z.value,h:X.value,x:at.value,y:pt.value,z:ut(E),onResizing:Bt,active:nt.value,onActivated:Re[2]||(Re[2]=Ge=>xt()),onDeactivated:Re[3]||(Re[3]=Ge=>q()),onDragging:te}),{default:Ie(()=>[(Mt(),Je(sa(ut(zt)),{width:Z.value,height:X.value},{default:Ie(()=>[Nt("div",bN,[Gt.disabledHeader?wn("",!0):(Mt(),Je(sa(ut(Rt)),{key:0},{title:Ie(()=>[Wn(Gt.$slots,"title",{},()=>[fo(Rn(Gt.title),1)],!0)]),"pre-title":Ie(()=>[Nt("div",xN,[ee(ut(s),{size:16}),AN])]),"extra-btn":Ie(()=>[Wn(Gt.$slots,"extra-btn",{},void 0,!0),ut(F)&&!Gt.disabledOrder?(Mt(),pe(mr,{key:0},[ee(Na,{disabled:ut(V),onClick:Re[0]||(Re[0]=Ge=>ut(j)())},{default:Ie(()=>[ee(ut(l),{size:16})]),_:1},8,["disabled"]),ee(Na,{disabled:ut(B),onClick:Re[1]||(Re[1]=Ge=>ut(G)())},{default:Ie(()=>[ee(ut(o),{size:16})]),_:1},8,["disabled"])],64)):wn("",!0),ee(Na,{onClick:en},{default:Ie(()=>[ut(rt)?(Mt(),Je(ut(d),{key:0,size:16})):(Mt(),Je(ut(a),{key:1,size:16}))]),_:1}),Gt.disabledClose?wn("",!0):(Mt(),Je(Na,{key:1,onClick:Xt},{default:Ie(()=>[ee(ut(n),{size:16})]),_:1}))]),_:3})),gc(Nt("div",wN,[Wn(Gt.$slots,"default",{},void 0,!0)],512),[[rb,ut(rt)]])])]),_:3},8,["width","height"]))]),_:3},16,["handles","w","h","x","y","z","active"])):wn("",!0)}}),MN=Vn(IN,[["__scopeId","data-v-23372390"]]),SN={class:"draggable-float"},EN={name:"DraggableItemFloat"},TN=nr({...EN,props:{...Mb,...Tb,...Cb,top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:[Number,String],default:"auto"},maxHeight:{type:Number,default:500},headerLocation:{type:String,default:"top",validator:function(t){return["top","bottom"].includes(t)}}},emits:{...Sb,...Pb},setup(t,{emit:e}){const{CloseIcon:n,ToBackIcon:a,ToFrontIcon:s,ExpandedIcon:d,CloseExpandedIcon:l}=Jy(),o=t,g=e,_=Va("containerId",mn(o.containerId||""));if(!_.value)throw"Not set container id";const{show:C}=Ib(o,g),{zIndex:I,itemId:E}=Ab(_.value,C),{isLast:S,isFirst:k,isHasItems:R,onToBack:B,onToFront:V}=wb(_.value,E.value),{expand:F,toggle:j}=Eb(o,g,!0),{componentCard:G,componentCardHeader:Q}=xb({...o,containerId:_.value});function nt(){C.value=!1}const X=_n(()=>{let at={};return at.zIndex=I.value,o.top&&(at.top=o.top+"px"),o.left&&(at.left=o.left+"px"),o.right&&(at.right=o.right+"px"),o.bottom&&(at.bottom=o.bottom+"px"),o.width&&o.width!="auto"&&(o.width&&!isNaN(+o.width)?at.width=o.width+"px":at.width=o.width),at}),K=_n(()=>{let at={};return at.maxHeight=o.maxHeight+"px",at}),Z=_n(()=>!o.width||o.width=="auto");return(at,pt)=>ut(C)?(Mt(),pe("div",{key:0,class:Li(["float-container",{"auto-float-container":Z.value}]),style:fi(X.value)},[(Mt(),Je(sa(ut(G)),null,{default:Ie(()=>[Nt("div",SN,[!at.disabledHeader&&t.headerLocation==="top"?(Mt(),Je(sa(ut(Q)),{key:0},{title:Ie(()=>[Wn(at.$slots,"title",{},()=>[fo(Rn(at.title),1)],!0)]),"extra-btn":Ie(()=>[Wn(at.$slots,"extra-btn",{},void 0,!0),ee(Na,{onClick:ut(j)},{default:Ie(()=>[ut(F)?(Mt(),Je(ut(d),{key:0,size:16})):(Mt(),Je(ut(l),{key:1,size:16}))]),_:1},8,["onClick"]),ut(R)&&!at.disabledOrder?(Mt(),pe(mr,{key:0},[ee(Na,{disabled:ut(k),onClick:pt[0]||(pt[0]=rt=>ut(B)())},{default:Ie(()=>[ee(ut(a),{size:16})]),_:1},8,["disabled"]),ee(Na,{disabled:ut(S),onClick:pt[1]||(pt[1]=rt=>ut(V)())},{default:Ie(()=>[ee(ut(s),{size:16})]),_:1},8,["disabled"])],64)):wn("",!0),at.disabledClose?wn("",!0):(Mt(),Je(Na,{key:1,onClick:nt},{default:Ie(()=>[ee(ut(n),{size:16})]),_:1}))]),_:3})):wn("",!0),gc(Nt("div",{class:"draggable-float-content",style:fi(K.value)},[Wn(at.$slots,"default",{},void 0,!0)],4),[[rb,ut(F)]]),!at.disabledHeader&&t.headerLocation==="bottom"?(Mt(),Je(sa(ut(Q)),{key:1},{title:Ie(()=>[Wn(at.$slots,"title",{},()=>[fo(Rn(at.title),1)],!0)]),"extra-btn":Ie(()=>[Wn(at.$slots,"extra-btn",{},void 0,!0),ee(Na,{onClick:ut(j)},{default:Ie(()=>[ut(F)?(Mt(),Je(ut(d),{key:0,size:16})):(Mt(),Je(ut(l),{key:1,size:16}))]),_:1},8,["onClick"]),ut(R)&&!at.disabledOrder?(Mt(),pe(mr,{key:0},[ee(Na,{disabled:ut(k),onClick:pt[2]||(pt[2]=rt=>ut(B)())},{default:Ie(()=>[ee(ut(a),{size:16})]),_:1},8,["disabled"]),ee(Na,{disabled:ut(S),onClick:pt[3]||(pt[3]=rt=>ut(V)())},{default:Ie(()=>[ee(ut(s),{size:16})]),_:1},8,["disabled"])],64)):wn("",!0),at.disabledClose?wn("",!0):(Mt(),Je(Na,{key:1,onClick:nt},{default:Ie(()=>[ee(ut(n),{size:16})]),_:1}))]),_:3})):wn("",!0)])]),_:3}))],6)):wn("",!0)}}),PN=Vn(TN,[["__scopeId","data-v-ecbbe79b"]]),kN={class:"draggable-bottom"},LN={class:"draggable-bottom-content"},RN={name:"DraggableItemBottom"},DN=nr({...RN,props:{...Mb,...Tb,...Cb},emits:{...Sb,...Pb},setup(t,{emit:e}){const{CloseIcon:n,ToBackIcon:a,FullscreenIcon:s,OffFullscreenIcon:d}=Jy(),l=t,o=e,g=Va("containerId",mn(l.containerId||""));if(!g.value)throw"Not set container id";const{show:_}=Ib(l,o),{zIndex:C,itemId:I}=Ab(g.value,_),{isFirst:E,isHasItems:S,onToBack:k}=wb(g.value,I.value),{expand:R,toggle:B}=Eb(l,o,!1),{componentCard:V,componentCardHeader:F}=xb({...l,containerId:g.value});function j(){_.value=!1}const G=_n(()=>{let Q={};return Q.zIndex=C.value,Q.height=R.value?"100%":"45%",Q});return(Q,nt)=>ut(_)?(Mt(),pe("div",{key:0,class:"popup-mobile-container",style:fi(G.value)},[(Mt(),Je(sa(ut(V)),null,{default:Ie(()=>[Nt("div",kN,[Q.disabledHeader?wn("",!0):(Mt(),Je(sa(ut(F)),{key:0},{title:Ie(()=>[Wn(Q.$slots,"title",{},()=>[fo(Rn(Q.title),1)],!0)]),"extra-btn":Ie(()=>[Wn(Q.$slots,"extra-btn",{},void 0,!0),ut(S)&&!Q.disabledOrder?(Mt(),Je(Na,{key:0,disabled:ut(E),onClick:nt[0]||(nt[0]=_i(X=>ut(k)(),["prevent","stop"]))},{default:Ie(()=>[ee(ut(a),{size:16})]),_:1},8,["disabled"])):wn("",!0),ee(Na,{onClick:nt[1]||(nt[1]=X=>ut(B)())},{default:Ie(()=>[ut(R)?(Mt(),Je(ut(s),{key:0,size:16})):(Mt(),Je(ut(d),{key:1,size:16}))]),_:1}),Q.disabledClose?wn("",!0):(Mt(),Je(Na,{key:1,onClick:j},{default:Ie(()=>[ee(ut(n),{size:16})]),_:1}))]),_:3})),Nt("div",LN,[Wn(Q.$slots,"default",{},void 0,!0)])])]),_:3}))],4)):wn("",!0)}}),P2=Vn(DN,[["__scopeId","data-v-5c196e37"]]);function k2(t,e){return nr({name:"WithMobileHandle"+t.name,props:{containerId:String},setup(n){const a=Va("containerId",mn(n.containerId||"")),s=_n(()=>Ur.getters.getIsMobile(a.value));return{p_containerId:a,isMobile:s}},render(){return this.isMobile?Sf(e,{...this.$attrs,containerId:this.p_containerId},this.$slots):Sf(t,{...this.$attrs,containerId:this.p_containerId},this.$slots)}})}const GT=k2(uN,P2),bd=k2(MN,P2),ON=k2(PN,P2),bi=(t={},e,n)=>{const a=Va("$map.id"),s=_n(()=>t.mapId||a);go(()=>{Af.getMap(s.value,async o=>{e instanceof Function&&await e(o)})}),yd(async()=>{n instanceof Function&&Af.getMap(s.value,async o=>{e instanceof Function&&await n(o)})});function d(o){return Af.getMap(s.value,o)}const l={mapId:t.mapId,dragId:t.dragId,btnWidth:t.btnWidth,position:t.position,controlVisible:t.controlVisible,order:t.order};return{callMap:d,mapId:s,moduleContainerProps:l}},vo={mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}};function Pf(t=!1){const e=mn(t);function n(a){if(a!=null){e.value=!!a;return}e.value=!e.value}return[e,n]}const ZT=x4({show:Boolean},"show"),zN={class:"module__container"},FN={name:"ModuleContainer"},BN=Object.assign(FN,{props:{mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}},setup(t){const e=$S(),n=t,a=_n(()=>!!e.btn),s=_n(()=>!!e.draggable),d=Va("$map.dragId"),l=Va("$map.id"),o=_n(()=>n.dragId||d),g=_n(()=>n.mapId||l),_=_n(()=>`#map-draggable-${g.value}`),C=_n(()=>`#${n.position}-${g.value}`),I=_n(()=>{let E={};return n.position.includes("left")&&(E.left=18+n.btnWidth),n.position.includes("right")&&(E.right=18+n.btnWidth),n.position.includes("top")&&(E.top=10),n.position.includes("bottom")&&(E.bottom=10),E.containerId=o.value,E});return(E,S)=>(Mt(),pe("div",zN,[t.controlVisible&&a.value?(Mt(),Je(rw,{key:0,to:C.value},[Wn(E.$slots,"btn",{},void 0,!0)],8,["to"])):wn("",!0),Wn(E.$slots,"default",{},void 0,!0),o.value&&s.value?(Mt(),Je(rw,{key:1,to:_.value},[Wn(E.$slots,"draggable",Eo(yo(I.value)),void 0,!0)],8,["to"])):wn("",!0)]))}}),Uo=Vn(BN,[["__scopeId","data-v-35db38a4"]]);var WT={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.4.0/LICENSE.txt
 */(function(t,e){(function(n,a){t.exports=a()})(ho,function(){var n={},a={};function s(l,o,g){if(a[l]=g,l==="index"){var _="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",C={};return a.shared(C),a.index(n,C),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([_],{type:"text/javascript"}))),n}}s("shared",["exports"],function(l){function o(u,i,h,f){return new(h||(h=Promise))(function(v,w){function M(U){try{z(f.next(U))}catch(W){w(W)}}function P(U){try{z(f.throw(U))}catch(W){w(W)}}function z(U){var W;U.done?v(U.value):(W=U.value,W instanceof h?W:new h(function(et){et(W)})).then(M,P)}z((f=f.apply(u,i||[])).next())})}function g(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var _,C;function I(){if(C)return _;function u(i,h){this.x=i,this.y=h}return C=1,_=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,h){return this.clone()._rotateAround(i,h)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var h=i.x-this.x,f=i.y-this.y;return h*h+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,h){return Math.atan2(this.x*h-this.y*i,this.x*i+this.y*h)},_matMult:function(i){var h=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=h,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var h=Math.cos(i),f=Math.sin(i),v=f*this.x+h*this.y;return this.x=h*this.x-f*this.y,this.y=v,this},_rotateAround:function(i,h){var f=Math.cos(i),v=Math.sin(i),w=h.y+v*(this.x-h.x)+f*(this.y-h.y);return this.x=h.x+f*(this.x-h.x)-v*(this.y-h.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(i){return i instanceof u?i:Array.isArray(i)?new u(i[0],i[1]):i},_}typeof SuppressedError=="function"&&SuppressedError;var E,S,k=g(I()),R=function(){if(S)return E;function u(i,h,f,v){this.cx=3*i,this.bx=3*(f-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(v-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=h,this.p2x=f,this.p2y=v}return S=1,E=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,h){if(h===void 0&&(h=1e-6),i<0)return 0;if(i>1)return 1;for(var f=i,v=0;v<8;v++){var w=this.sampleCurveX(f)-i;if(Math.abs(w)<h)return f;var M=this.sampleCurveDerivativeX(f);if(Math.abs(M)<1e-6)break;f-=w/M}var P=0,z=1;for(f=i,v=0;v<20&&(w=this.sampleCurveX(f),!(Math.abs(w-i)<h));v++)i>w?P=f:z=f,f=.5*(z-P)+P;return f},solve:function(i,h){return this.sampleCurveY(this.solveCurveX(i,h))}},E}(),B=g(R);let V,F;function j(){return V==null&&(V=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),V}function G(){if(F==null&&(F=!1,j())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let f=0;f<5*5;f++){const v=4*f;i.fillStyle=`rgb(${v},${v+1},${v+2})`,i.fillRect(f%5,Math.floor(f/5),1,1)}const h=i.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&h[f]!==f){F=!0;break}}}return F||!1}var Q=1e-6,nt=typeof Float32Array<"u"?Float32Array:Array;function X(){var u=new nt(9);return nt!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function K(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Z(){var u=new nt(3);return nt!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function at(u){return Math.hypot(u[0],u[1],u[2])}function pt(u,i,h){var f=new nt(3);return f[0]=u,f[1]=i,f[2]=h,f}Math.hypot||(Math.hypot=function(){for(var u=0,i=arguments.length;i--;)u+=arguments[i]*arguments[i];return Math.sqrt(u)});var rt,xt=at;function q(u,i,h){var f=i[0],v=i[1],w=i[2],M=i[3];return u[0]=h[0]*f+h[4]*v+h[8]*w+h[12]*M,u[1]=h[1]*f+h[5]*v+h[9]*w+h[13]*M,u[2]=h[2]*f+h[6]*v+h[10]*w+h[14]*M,u[3]=h[3]*f+h[7]*v+h[11]*w+h[15]*M,u}function zt(){var u=new nt(4);return nt!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function Rt(){var u=new nt(2);return nt!=Float32Array&&(u[0]=0,u[1]=0),u}function Bt(u,i){var h=new nt(2);return h[0]=u,h[1]=i,h}Z(),rt=new nt(4),nt!=Float32Array&&(rt[0]=0,rt[1]=0,rt[2]=0,rt[3]=0),Z(),pt(1,0,0),pt(0,1,0),zt(),zt(),X(),Rt();const Xt=8192;function ge(u,i,h){return i*(Xt/(u.tileSize*Math.pow(2,h-u.tileID.overscaledZ)))}function en(u,i){return(u%i+i)%i}function te(u,i,h){return u*(1-h)+i*h}function Gt(u){if(u<=0)return 0;if(u>=1)return 1;const i=u*u,h=i*u;return 4*(u<.5?h:3*(u-i)+h-.75)}function Re(u,i,h,f){const v=new B(u,i,h,f);return w=>v.solve(w)}const Ge=Re(.25,.1,.25,1);function Ce(u,i,h){return Math.min(h,Math.max(i,u))}function nn(u,i,h){const f=h-i,v=((u-i)%f+f)%f+i;return v===i?h:v}function be(u,...i){for(const h of i)for(const f in h)u[f]=h[f];return u}let Se=1;function xe(u,i,h){const f={};for(const v in u)f[v]=i.call(this,u[v],v,u);return f}function Be(u,i,h){const f={};for(const v in u)i.call(this,u[v],v,u)&&(f[v]=u[v]);return f}function tn(u){return Array.isArray(u)?u.map(tn):typeof u=="object"&&u?xe(u,tn):u}const Ln={};function Tt(u){Ln[u]||(typeof console<"u"&&console.warn(u),Ln[u]=!0)}function H(u,i,h){return(h.y-u.y)*(i.x-u.x)>(i.y-u.y)*(h.x-u.x)}function Dt(u){return typeof WorkerGlobalScope<"u"&&u!==void 0&&u instanceof WorkerGlobalScope}let Pt=null;function yt(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ut(u,i,h,f,v){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const w=new VideoFrame(u,{timestamp:0});try{const M=w==null?void 0:w.format;if(!M||!M.startsWith("BGR")&&!M.startsWith("RGB"))throw new Error(`Unrecognized format ${M}`);const P=M.startsWith("BGR"),z=new Uint8ClampedArray(f*v*4);if(yield w.copyTo(z,function(U,W,et,lt,ct){const dt=4*Math.max(1,0),wt=(Math.max(0,et)-et)*lt*4+dt,Et=4*lt,Vt=Math.max(0,W),ce=Math.max(0,et);return{rect:{x:Vt,y:ce,width:Math.min(U.width,W+lt)-Vt,height:Math.min(U.height,et+ct)-ce},layout:[{offset:wt,stride:Et}]}}(u,i,h,f,v)),P)for(let U=0;U<z.length;U+=4){const W=z[U];z[U]=z[U+2],z[U+2]=W}return z}finally{w.close()}})}let ne,ue;function Ht(u,i,h,f){return u.addEventListener(i,h,f),{unsubscribe:()=>{u.removeEventListener(i,h,f)}}}function Me(u){return u/Math.PI*180}const je={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Le={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ke="AbortError";function bn(){return new Error(Ke)}const Cn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function de(u){return Cn.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}const ve="global-dispatcher";class Te extends Error{constructor(i,h,f,v){super(`AJAXError: ${h} (${i}): ${f}`),this.status=i,this.statusText=h,this.url=f,this.body=v}}const Ye=()=>Dt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,un=function(u,i){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){const f=de(u.url);if(f)return f(u,i);if(Dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:ve},i)}if(!(/^file:/.test(h=u.url)||/^file:/.test(Ye())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(f,v){return o(this,void 0,void 0,function*(){const w=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:Ye(),signal:v.signal});let M,P;f.type!=="json"||w.headers.has("Accept")||w.headers.set("Accept","application/json");try{M=yield fetch(w)}catch(U){throw new Te(0,U.message,f.url,new Blob)}if(!M.ok){const U=yield M.blob();throw new Te(M.status,M.statusText,f.url,U)}P=f.type==="arrayBuffer"||f.type==="image"?M.arrayBuffer():f.type==="json"?M.json():M.text();const z=yield P;if(v.signal.aborted)throw bn();return{data:z,cacheControl:M.headers.get("Cache-Control"),expires:M.headers.get("Expires")}})}(u,i);if(Dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:ve},i)}var h;return function(f,v){return new Promise((w,M)=>{var P;const z=new XMLHttpRequest;z.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(z.responseType="arraybuffer");for(const U in f.headers)z.setRequestHeader(U,f.headers[U]);f.type==="json"&&(z.responseType="text",!((P=f.headers)===null||P===void 0)&&P.Accept||z.setRequestHeader("Accept","application/json")),z.withCredentials=f.credentials==="include",z.onerror=()=>{M(new Error(z.statusText))},z.onload=()=>{if(!v.signal.aborted)if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let U=z.response;if(f.type==="json")try{U=JSON.parse(z.response)}catch(W){return void M(W)}w({data:U,cacheControl:z.getResponseHeader("Cache-Control"),expires:z.getResponseHeader("Expires")})}else{const U=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});M(new Te(z.status,z.statusText,f.url,U))}},v.signal.addEventListener("abort",()=>{z.abort(),M(bn())}),z.send(f.body)})}(u,i)};function Nn(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;const i=new URL(u),h=window.location;return i.protocol===h.protocol&&i.host===h.host}function ae(u,i,h){h[u]&&h[u].indexOf(i)!==-1||(h[u]=h[u]||[],h[u].push(i))}function ht(u,i,h){if(h&&h[u]){const f=h[u].indexOf(i);f!==-1&&h[u].splice(f,1)}}class gt{constructor(i,h={}){be(this,h),this.type=i}}class Ct extends gt{constructor(i,h={}){super("error",be({error:i},h))}}class kt{on(i,h){return this._listeners=this._listeners||{},ae(i,h,this._listeners),{unsubscribe:()=>{this.off(i,h)}}}off(i,h){return ht(i,h,this._listeners),ht(i,h,this._oneTimeListeners),this}once(i,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},ae(i,h,this._oneTimeListeners),this):new Promise(f=>this.once(i,f))}fire(i,h){typeof i=="string"&&(i=new gt(i,h||{}));const f=i.type;if(this.listens(f)){i.target=this;const v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const P of v)P.call(this,i);const w=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const P of w)ht(f,P,this._oneTimeListeners),P.call(this,i);const M=this._eventedParent;M&&(be(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(i))}else i instanceof Ct&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,h){return this._eventedParent=i,this._eventedParentData=h,this}}var _t={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const oe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function he(u,i){const h={};for(const f in u)f!=="ref"&&(h[f]=u[f]);return oe.forEach(f=>{f in i&&(h[f]=i[f])}),h}function Kt(u,i){if(Array.isArray(u)){if(!Array.isArray(i)||u.length!==i.length)return!1;for(let h=0;h<u.length;h++)if(!Kt(u[h],i[h]))return!1;return!0}if(typeof u=="object"&&u!==null&&i!==null){if(typeof i!="object"||Object.keys(u).length!==Object.keys(i).length)return!1;for(const h in u)if(!Kt(u[h],i[h]))return!1;return!0}return u===i}function Fe(u,i){u.push(i)}function Ve(u,i,h){Fe(h,{command:"addSource",args:[u,i[u]]})}function we(u,i,h){Fe(i,{command:"removeSource",args:[u]}),h[u]=!0}function rn(u,i,h,f){we(u,h,f),Ve(u,i,h)}function Sn(u,i,h){let f;for(f in u[h])if(Object.prototype.hasOwnProperty.call(u[h],f)&&f!=="data"&&!Kt(u[h][f],i[h][f]))return!1;for(f in i[h])if(Object.prototype.hasOwnProperty.call(i[h],f)&&f!=="data"&&!Kt(u[h][f],i[h][f]))return!1;return!0}function En(u,i,h,f,v,w){u=u||{},i=i||{};for(const M in u)Object.prototype.hasOwnProperty.call(u,M)&&(Kt(u[M],i[M])||h.push({command:w,args:[f,M,i[M],v]}));for(const M in i)Object.prototype.hasOwnProperty.call(i,M)&&!Object.prototype.hasOwnProperty.call(u,M)&&(Kt(u[M],i[M])||h.push({command:w,args:[f,M,i[M],v]}))}function ir(u){return u.id}function gr(u,i){return u[i.id]=i,u}class Ue{constructor(i,h,f,v){this.message=(i?`${i}: `:"")+f,v&&(this.identifier=v),h!=null&&h.__line__&&(this.line=h.__line__)}}function $n(u,...i){for(const h of i)for(const f in h)u[f]=h[f];return u}class Fr extends Error{constructor(i,h){super(h),this.message=h,this.key=i}}class Yr{constructor(i,h=[]){this.parent=i,this.bindings={};for(const[f,v]of h)this.bindings[f]=v}concat(i){return new Yr(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Pr={kind:"null"},Ze={kind:"number"},zn={kind:"string"},Jn={kind:"boolean"},eo={kind:"color"},Po={kind:"projectionDefinition"},pi={kind:"object"},Xn={kind:"value"},tu={kind:"collator"},Pl={kind:"formatted"},Uu={kind:"padding"},Ms={kind:"resolvedImage"},Hu={kind:"variableAnchorOffsetCollection"};function Ri(u,i){return{kind:"array",itemType:u,N:i}}function mi(u){if(u.kind==="array"){const i=mi(u.itemType);return typeof u.N=="number"?`array<${i}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${i}>`}return u.kind}const wi=[Pr,Ze,zn,Jn,eo,Po,Pl,pi,Ri(Xn),Uu,Ms,Hu];function kl(u,i){if(i.kind==="error")return null;if(u.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!kl(u.itemType,i.itemType))&&(typeof u.N!="number"||u.N===i.N))return null}else{if(u.kind===i.kind)return null;if(u.kind==="value"){for(const h of wi)if(!kl(h,i))return null}}return`Expected ${mi(u)} but found ${mi(i)} instead.`}function Ac(u,i){return i.some(h=>h.kind===u.kind)}function ri(u,i){return i.some(h=>h==="null"?u===null:h==="array"?Array.isArray(u):h==="object"?u&&!Array.isArray(u)&&typeof u=="object":h===typeof u)}function Ss(u,i){return u.kind==="array"&&i.kind==="array"?u.itemType.kind===i.itemType.kind&&typeof u.N=="number":u.kind===i.kind}const $u=.96422,us=.82521,Ma=4/29,Es=6/29,Ts=3*Es*Es,Ll=Es*Es*Es,Sh=Math.PI/180,wd=180/Math.PI;function Eh(u){return(u%=360)<0&&(u+=360),u}function Gu([u,i,h,f]){let v,w;const M=wc((.2225045*(u=Zu(u))+.7168786*(i=Zu(i))+.0606169*(h=Zu(h)))/1);u===i&&i===h?v=w=M:(v=wc((.4360747*u+.3850649*i+.1430804*h)/$u),w=wc((.0139322*u+.0971045*i+.7141733*h)/us));const P=116*M-16;return[P<0?0:P,500*(v-M),200*(M-w),f]}function Zu(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function wc(u){return u>Ll?Math.pow(u,1/3):u/Ts+Ma}function Rl([u,i,h,f]){let v=(u+16)/116,w=isNaN(i)?v:v+i/500,M=isNaN(h)?v:v-h/200;return v=1*Th(v),w=$u*Th(w),M=us*Th(M),[Ps(3.1338561*w-1.6168667*v-.4906146*M),Ps(-.9787684*w+1.9161415*v+.033454*M),Ps(.0719453*w-.2289914*v+1.4052427*M),f]}function Ps(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function Th(u){return u>Es?u*u*u:Ts*(u-Ma)}function eu(u){return parseInt(u.padEnd(2,u),16)/255}function Dl(u,i){return Ua(i?u/100:u,0,1)}function Ua(u,i,h){return Math.min(Math.max(i,u),h)}function O(u){return!u.some(Number.isNaN)}const Y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function At(u,i,h){return u+h*(i-u)}function $t(u,i,h){return u.map((f,v)=>At(f,i[v],h))}class Zt{constructor(i,h,f,v=1,w=!0){this.r=i,this.g=h,this.b=f,this.a=v,w||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[i,h,f,v]))}static parse(i){if(i instanceof Zt)return i;if(typeof i!="string")return;const h=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=Y[f];if(v){const[M,P,z]=v;return[M/255,P/255,z/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const M=f.length<6?1:2;let P=1;return[eu(f.slice(P,P+=M)),eu(f.slice(P,P+=M)),eu(f.slice(P,P+=M)),eu(f.slice(P,P+M)||"ff")]}if(f.startsWith("rgb")){const M=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(M){const[P,z,U,W,et,lt,ct,dt,wt,Et,Vt,ce]=M,qt=[W||" ",ct||" ",Et].join("");if(qt==="  "||qt==="  /"||qt===",,"||qt===",,,"){const st=[U,lt,wt].join(""),It=st==="%%%"?100:st===""?255:0;if(It){const Yt=[Ua(+z/It,0,1),Ua(+et/It,0,1),Ua(+dt/It,0,1),Vt?Dl(+Vt,ce):1];if(O(Yt))return Yt}}return}}const w=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[M,P,z,U,W,et,lt,ct,dt]=w,wt=[z||" ",W||" ",lt].join("");if(wt==="  "||wt==="  /"||wt===",,"||wt===",,,"){const Et=[+P,Ua(+U,0,100),Ua(+et,0,100),ct?Dl(+ct,dt):1];if(O(Et))return function([Vt,ce,qt,st]){function It(Yt){const Oe=(Yt+Vt/30)%12,sn=ce*Math.min(qt,1-qt);return qt-sn*Math.max(-1,Math.min(Oe-3,9-Oe,1))}return Vt=Eh(Vt),ce/=100,qt/=100,[It(0),It(8),It(4),st]}(Et)}}}(i);return h?new Zt(...h,!1):void 0}get rgb(){const{r:i,g:h,b:f,a:v}=this,w=v||1/0;return this.overwriteGetter("rgb",[i/w,h/w,f/w,v])}get hcl(){return this.overwriteGetter("hcl",function(i){const[h,f,v,w]=Gu(i),M=Math.sqrt(f*f+v*v);return[Math.round(1e4*M)?Eh(Math.atan2(v,f)*wd):NaN,M,h,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Gu(this.rgb))}overwriteGetter(i,h){return Object.defineProperty(this,i,{value:h}),h}toString(){const[i,h,f,v]=this.rgb;return`rgba(${[i,h,f].map(w=>Math.round(255*w)).join(",")},${v})`}static interpolate(i,h,f,v="rgb"){switch(v){case"rgb":{const[w,M,P,z]=$t(i.rgb,h.rgb,f);return new Zt(w,M,P,z,!1)}case"hcl":{const[w,M,P,z]=i.hcl,[U,W,et,lt]=h.hcl;let ct,dt;if(isNaN(w)||isNaN(U))isNaN(w)?isNaN(U)?ct=NaN:(ct=U,P!==1&&P!==0||(dt=W)):(ct=w,et!==1&&et!==0||(dt=M));else{let qt=U-w;U>w&&qt>180?qt-=360:U<w&&w-U>180&&(qt+=360),ct=w+f*qt}const[wt,Et,Vt,ce]=function([qt,st,It,Yt]){return qt=isNaN(qt)?0:qt*Sh,Rl([It,Math.cos(qt)*st,Math.sin(qt)*st,Yt])}([ct,dt??At(M,W,f),At(P,et,f),At(z,lt,f)]);return new Zt(wt,Et,Vt,ce,!1)}case"lab":{const[w,M,P,z]=Rl($t(i.lab,h.lab,f));return new Zt(w,M,P,z,!1)}}}}Zt.black=new Zt(0,0,0,1),Zt.white=new Zt(1,1,1,1),Zt.transparent=new Zt(0,0,0,0),Zt.red=new Zt(1,0,0,1);class Qt{constructor(i,h,f){this.sensitivity=i?h?"variant":"case":h?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,h){return this.collator.compare(i,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const _e=["bottom","center","top"];class cn{constructor(i,h,f,v,w,M){this.text=i,this.image=h,this.scale=f,this.fontStack=v,this.textColor=w,this.verticalAlign=M}}class dn{constructor(i){this.sections=i}static fromString(i){return new dn([new cn(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof dn?i:dn.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class An{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof An)return i;if(typeof i=="number")return new An([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const h of i)if(typeof h!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new An(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,h,f){return new An($t(i.values,h.values,f))}}class gn{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const Mn=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Kn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Kn)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let h=0;h<i.length;h+=2){const f=i[h],v=i[h+1];if(typeof f!="string"||!Mn.has(f)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new Kn(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,h,f){const v=i.values,w=h.values;if(v.length!==w.length)throw new gn(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${h.toString()}`);const M=[];for(let P=0;P<v.length;P+=2){if(v[P]!==w[P])throw new gn(`Cannot interpolate values containing mismatched anchors. from[${P}]: ${v[P]}, to[${P}]: ${w[P]}`);M.push(v[P]);const[z,U]=v[P+1],[W,et]=w[P+1];M.push([At(z,W,f),At(U,et,f)])}return new Kn(M)}}class Zr{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Zr({name:i,available:!1}):null}}class or{constructor(i,h,f){this.from=i,this.to=h,this.transition=f}static interpolate(i,h,f){return new or(i,h,f)}static parse(i){return i instanceof or?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new or(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new or(i.from,i.to,i.transition):typeof i=="string"?new or(i,i,1):void 0}}function ai(u,i,h,f){return typeof u=="number"&&u>=0&&u<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof h=="number"&&h>=0&&h<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[u,i,h,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[u,i,h,f]:[u,i,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function on(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof or||u instanceof Zt||u instanceof Qt||u instanceof dn||u instanceof An||u instanceof Kn||u instanceof Zr)return!0;if(Array.isArray(u)){for(const i of u)if(!on(i))return!1;return!0}if(typeof u=="object"){for(const i in u)if(!on(u[i]))return!1;return!0}return!1}function kn(u){if(u===null)return Pr;if(typeof u=="string")return zn;if(typeof u=="boolean")return Jn;if(typeof u=="number")return Ze;if(u instanceof Zt)return eo;if(u instanceof or)return Po;if(u instanceof Qt)return tu;if(u instanceof dn)return Pl;if(u instanceof An)return Uu;if(u instanceof Kn)return Hu;if(u instanceof Zr)return Ms;if(Array.isArray(u)){const i=u.length;let h;for(const f of u){const v=kn(f);if(h){if(h===v)continue;h=Xn;break}h=v}return Ri(h||Xn,i)}return pi}function Rr(u){const i=typeof u;return u===null?"":i==="string"||i==="number"||i==="boolean"?String(u):u instanceof Zt||u instanceof or||u instanceof dn||u instanceof An||u instanceof Kn||u instanceof Zr?u.toString():JSON.stringify(u)}class xi{constructor(i,h){this.type=i,this.value=h}static parse(i,h){if(i.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!on(i[1]))return h.error("invalid value");const f=i[1];let v=kn(f);const w=h.expectedType;return v.kind!=="array"||v.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(v=w),new xi(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const gi={string:zn,number:Ze,boolean:Jn,object:pi};class Jo{constructor(i,h){this.type=i,this.args=h}static parse(i,h){if(i.length<2)return h.error("Expected at least one argument.");let f,v=1;const w=i[0];if(w==="array"){let P,z;if(i.length>2){const U=i[1];if(typeof U!="string"||!(U in gi)||U==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);P=gi[U],v++}else P=Xn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return h.error('The length argument to "array" must be a positive integer literal',2);z=i[2],v++}f=Ri(P,z)}else{if(!gi[w])throw new Error(`Types doesn't contain name = ${w}`);f=gi[w]}const M=[];for(;v<i.length;v++){const P=h.parse(i[v],v,Xn);if(!P)return null;M.push(P)}return new Jo(f,M)}evaluate(i){for(let h=0;h<this.args.length;h++){const f=this.args[h].evaluate(i);if(!kl(this.type,kn(f)))return f;if(h===this.args.length-1)throw new gn(`Expected value to be of type ${mi(this.type)}, but found ${mi(kn(f))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const nu={"to-boolean":Jn,"to-color":eo,"to-number":Ze,"to-string":zn};class ur{constructor(i,h){this.type=i,this.args=h}static parse(i,h){if(i.length<2)return h.error("Expected at least one argument.");const f=i[0];if(!nu[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&i.length!==2)return h.error("Expected one argument.");const v=nu[f],w=[];for(let M=1;M<i.length;M++){const P=h.parse(i[M],M,Xn);if(!P)return null;w.push(P)}return new ur(v,w)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let h,f;for(const v of this.args){if(h=v.evaluate(i),f=null,h instanceof Zt)return h;if(typeof h=="string"){const w=i.parseColor(h);if(w)return w}else if(Array.isArray(h)&&(f=h.length<3||h.length>4?`Invalid rgba value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:ai(h[0],h[1],h[2],h[3]),!f))return new Zt(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new gn(f||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const f of this.args){h=f.evaluate(i);const v=An.parse(h);if(v)return v}throw new gn(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const f of this.args){h=f.evaluate(i);const v=Kn.parse(h);if(v)return v}throw new gn(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const f of this.args){if(h=f.evaluate(i),h===null)return 0;const v=Number(h);if(!isNaN(v))return v}throw new gn(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return dn.fromString(Rr(this.args[0].evaluate(i)));case"resolvedImage":return Zr.fromString(Rr(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return Rr(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Wu=["Unknown","Point","LineString","Polygon"];class Wr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Wu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let h=this._parseColorCache[i];return h||(h=this._parseColorCache[i]=Zt.parse(i)),h}}class Fn{constructor(i,h,f=[],v,w=new Yr,M=[]){this.registry=i,this.path=f,this.key=f.map(P=>`[${P}]`).join(""),this.scope=w,this.errors=M,this.expectedType=v,this._isConstant=h}parse(i,h,f,v,w={}){return h?this.concat(h,f,v)._parse(i,w):this._parse(i,w)}_parse(i,h){function f(v,w,M){return M==="assert"?new Jo(w,[v]):M==="coerce"?new ur(w,[v]):v}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=i[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[v];if(w){let M=w.parse(i,this);if(!M)return null;if(this.expectedType){const P=this.expectedType,z=M.type;if(P.kind!=="string"&&P.kind!=="number"&&P.kind!=="boolean"&&P.kind!=="object"&&P.kind!=="array"||z.kind!=="value")if(P.kind!=="projectionDefinition"||z.kind!=="string"&&z.kind!=="array")if(P.kind!=="color"&&P.kind!=="formatted"&&P.kind!=="resolvedImage"||z.kind!=="value"&&z.kind!=="string")if(P.kind!=="padding"||z.kind!=="value"&&z.kind!=="number"&&z.kind!=="array")if(P.kind!=="variableAnchorOffsetCollection"||z.kind!=="value"&&z.kind!=="array"){if(this.checkSubtype(P,z))return null}else M=f(M,P,h.typeAnnotation||"coerce");else M=f(M,P,h.typeAnnotation||"coerce");else M=f(M,P,h.typeAnnotation||"coerce");else M=f(M,P,h.typeAnnotation||"coerce");else M=f(M,P,h.typeAnnotation||"assert")}if(!(M instanceof xi)&&M.type.kind!=="resolvedImage"&&this._isConstant(M)){const P=new Wr;try{M=new xi(M.type,M.evaluate(P))}catch(z){return this.error(z.message),null}}return M}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,h,f){const v=typeof i=="number"?this.path.concat(i):this.path,w=f?this.scope.concat(f):this.scope;return new Fn(this.registry,this._isConstant,v,h||null,w,this.errors)}error(i,...h){const f=`${this.key}${h.map(v=>`[${v}]`).join("")}`;this.errors.push(new Fr(f,i))}checkSubtype(i,h){const f=kl(i,h);return f&&this.error(f),f}}class Xr{constructor(i,h){this.type=h.type,this.bindings=[].concat(i),this.result=h}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const h of this.bindings)i(h[1]);i(this.result)}static parse(i,h){if(i.length<4)return h.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const f=[];for(let w=1;w<i.length-1;w+=2){const M=i[w];if(typeof M!="string")return h.error(`Expected string, but found ${typeof M} instead.`,w);if(/[^a-zA-Z0-9_]/.test(M))return h.error("Variable names must contain only alphanumeric characters or '_'.",w);const P=h.parse(i[w+1],w+1);if(!P)return null;f.push([M,P])}const v=h.parse(i[i.length-1],i.length-1,h.expectedType,f);return v?new Xr(f,v):null}outputDefined(){return this.result.outputDefined()}}class Dr{constructor(i,h){this.type=h.type,this.name=i,this.boundExpression=h}static parse(i,h){if(i.length!==2||typeof i[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const f=i[1];return h.scope.has(f)?new Dr(f,h.scope.get(f)):h.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Cc{constructor(i,h,f){this.type=i,this.index=h,this.input=f}static parse(i,h){if(i.length!==3)return h.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=h.parse(i[1],1,Ze),v=h.parse(i[2],2,Ri(h.expectedType||Xn));return f&&v?new Cc(v.type.itemType,f,v):null}evaluate(i){const h=this.index.evaluate(i),f=this.input.evaluate(i);if(h<0)throw new gn(`Array index out of bounds: ${h} < 0.`);if(h>=f.length)throw new gn(`Array index out of bounds: ${h} > ${f.length-1}.`);if(h!==Math.floor(h))throw new gn(`Array index must be an integer, but found ${h} instead.`);return f[h]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class ca{constructor(i,h){this.type=Jn,this.needle=i,this.haystack=h}static parse(i,h){if(i.length!==3)return h.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=h.parse(i[1],1,Xn),v=h.parse(i[2],2,Xn);return f&&v?Ac(f.type,[Jn,zn,Ze,Pr,Xn])?new ca(f,v):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${mi(f.type)} instead`):null}evaluate(i){const h=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!f)return!1;if(!ri(h,["boolean","string","number","null"]))throw new gn(`Expected first argument to be of type boolean, string, number or null, but found ${mi(kn(h))} instead.`);if(!ri(f,["string","array"]))throw new gn(`Expected second argument to be of type array or string, but found ${mi(kn(f))} instead.`);return f.indexOf(h)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class Ol{constructor(i,h,f){this.type=Ze,this.needle=i,this.haystack=h,this.fromIndex=f}static parse(i,h){if(i.length<=2||i.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=h.parse(i[1],1,Xn),v=h.parse(i[2],2,Xn);if(!f||!v)return null;if(!Ac(f.type,[Jn,zn,Ze,Pr,Xn]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${mi(f.type)} instead`);if(i.length===4){const w=h.parse(i[3],3,Ze);return w?new Ol(f,v,w):null}return new Ol(f,v)}evaluate(i){const h=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!ri(h,["boolean","string","number","null"]))throw new gn(`Expected first argument to be of type boolean, string, number or null, but found ${mi(kn(h))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(i)),ri(f,["string"])){const w=f.indexOf(h,v);return w===-1?-1:[...f.slice(0,w)].length}if(ri(f,["array"]))return f.indexOf(h,v);throw new gn(`Expected second argument to be of type array or string, but found ${mi(kn(f))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class ru{constructor(i,h,f,v,w,M){this.inputType=i,this.type=h,this.input=f,this.cases=v,this.outputs=w,this.otherwise=M}static parse(i,h){if(i.length<5)return h.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return h.error("Expected an even number of arguments.");let f,v;h.expectedType&&h.expectedType.kind!=="value"&&(v=h.expectedType);const w={},M=[];for(let U=2;U<i.length-1;U+=2){let W=i[U];const et=i[U+1];Array.isArray(W)||(W=[W]);const lt=h.concat(U);if(W.length===0)return lt.error("Expected at least one branch label.");for(const dt of W){if(typeof dt!="number"&&typeof dt!="string")return lt.error("Branch labels must be numbers or strings.");if(typeof dt=="number"&&Math.abs(dt)>Number.MAX_SAFE_INTEGER)return lt.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof dt=="number"&&Math.floor(dt)!==dt)return lt.error("Numeric branch labels must be integer values.");if(f){if(lt.checkSubtype(f,kn(dt)))return null}else f=kn(dt);if(w[String(dt)]!==void 0)return lt.error("Branch labels must be unique.");w[String(dt)]=M.length}const ct=h.parse(et,U,v);if(!ct)return null;v=v||ct.type,M.push(ct)}const P=h.parse(i[1],1,Xn);if(!P)return null;const z=h.parse(i[i.length-1],i.length-1,v);return z?P.type.kind!=="value"&&h.concat(1).checkSubtype(f,P.type)?null:new ru(f,v,P,w,M,z):null}evaluate(i){const h=this.input.evaluate(i);return(kn(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class qu{constructor(i,h,f){this.type=i,this.branches=h,this.otherwise=f}static parse(i,h){if(i.length<4)return h.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return h.error("Expected an odd number of arguments.");let f;h.expectedType&&h.expectedType.kind!=="value"&&(f=h.expectedType);const v=[];for(let M=1;M<i.length-1;M+=2){const P=h.parse(i[M],M,Jn);if(!P)return null;const z=h.parse(i[M+1],M+1,f);if(!z)return null;v.push([P,z]),f=f||z.type}const w=h.parse(i[i.length-1],i.length-1,f);if(!w)return null;if(!f)throw new Error("Can't infer output type");return new qu(f,v,w)}evaluate(i){for(const[h,f]of this.branches)if(h.evaluate(i))return f.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[h,f]of this.branches)i(h),i(f);i(this.otherwise)}outputDefined(){return this.branches.every(([i,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class zl{constructor(i,h,f,v){this.type=i,this.input=h,this.beginIndex=f,this.endIndex=v}static parse(i,h){if(i.length<=2||i.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=h.parse(i[1],1,Xn),v=h.parse(i[2],2,Ze);if(!f||!v)return null;if(!Ac(f.type,[Ri(Xn),zn,Xn]))return h.error(`Expected first argument to be of type array or string, but found ${mi(f.type)} instead`);if(i.length===4){const w=h.parse(i[3],3,Ze);return w?new zl(f.type,f,v,w):null}return new zl(f.type,f,v)}evaluate(i){const h=this.input.evaluate(i),f=this.beginIndex.evaluate(i);let v;if(this.endIndex&&(v=this.endIndex.evaluate(i)),ri(h,["string"]))return[...h].slice(f,v).join("");if(ri(h,["array"]))return h.slice(f,v);throw new gn(`Expected first argument to be of type array or string, but found ${mi(kn(h))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function iu(u,i){const h=u.length-1;let f,v,w=0,M=h,P=0;for(;w<=M;)if(P=Math.floor((w+M)/2),f=u[P],v=u[P+1],f<=i){if(P===h||i<v)return P;w=P+1}else{if(!(f>i))throw new gn("Input is not a number.");M=P-1}return 0}class Fi{constructor(i,h,f){this.type=i,this.input=h,this.labels=[],this.outputs=[];for(const[v,w]of f)this.labels.push(v),this.outputs.push(w)}static parse(i,h){if(i.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return h.error("Expected an even number of arguments.");const f=h.parse(i[1],1,Ze);if(!f)return null;const v=[];let w=null;h.expectedType&&h.expectedType.kind!=="value"&&(w=h.expectedType);for(let M=1;M<i.length;M+=2){const P=M===1?-1/0:i[M],z=i[M+1],U=M,W=M+1;if(typeof P!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(v.length&&v[v.length-1][0]>=P)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',U);const et=h.parse(z,W,w);if(!et)return null;w=w||et.type,v.push([P,et])}return new Fi(w,f,v)}evaluate(i){const h=this.labels,f=this.outputs;if(h.length===1)return f[0].evaluate(i);const v=this.input.evaluate(i);if(v<=h[0])return f[0].evaluate(i);const w=h.length;return v>=h[w-1]?f[w-1].evaluate(i):f[iu(h,v)].evaluate(i)}eachChild(i){i(this.input);for(const h of this.outputs)i(h)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function ou(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Ha,Fl,no=function(){if(Fl)return Ha;function u(i,h,f,v){this.cx=3*i,this.bx=3*(f-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(v-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=h,this.p2x=f,this.p2y=v}return Fl=1,Ha=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,h){if(h===void 0&&(h=1e-6),i<0)return 0;if(i>1)return 1;for(var f=i,v=0;v<8;v++){var w=this.sampleCurveX(f)-i;if(Math.abs(w)<h)return f;var M=this.sampleCurveDerivativeX(f);if(Math.abs(M)<1e-6)break;f-=w/M}var P=0,z=1;for(f=i,v=0;v<20&&(w=this.sampleCurveX(f),!(Math.abs(w-i)<h));v++)i>w?P=f:z=f,f=.5*(z-P)+P;return f},solve:function(i,h){return this.sampleCurveY(this.solveCurveX(i,h))}},Ha}(),ro=ou(no);class _o{constructor(i,h,f,v,w){this.type=i,this.operator=h,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(const[M,P]of w)this.labels.push(M),this.outputs.push(P)}static interpolationFactor(i,h,f,v){let w=0;if(i.name==="exponential")w=nl(h,i.base,f,v);else if(i.name==="linear")w=nl(h,1,f,v);else if(i.name==="cubic-bezier"){const M=i.controlPoints;w=new ro(M[0],M[1],M[2],M[3]).solve(nl(h,1,f,v))}return w}static parse(i,h){let[f,v,w,...M]=i;if(!Array.isArray(v)||v.length===0)return h.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const U=v[1];if(typeof U!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:U}}else{if(v[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const U=v.slice(1);if(U.length!==4||U.some(W=>typeof W!="number"||W<0||W>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:U}}}if(i.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(w=h.parse(w,2,Ze),!w)return null;const P=[];let z=null;f==="interpolate-hcl"||f==="interpolate-lab"?z=eo:h.expectedType&&h.expectedType.kind!=="value"&&(z=h.expectedType);for(let U=0;U<M.length;U+=2){const W=M[U],et=M[U+1],lt=U+3,ct=U+4;if(typeof W!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lt);if(P.length&&P[P.length-1][0]>=W)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',lt);const dt=h.parse(et,ct,z);if(!dt)return null;z=z||dt.type,P.push([W,dt])}return Ss(z,Ze)||Ss(z,Po)||Ss(z,eo)||Ss(z,Uu)||Ss(z,Hu)||Ss(z,Ri(Ze))?new _o(z,f,v,w,P):h.error(`Type ${mi(z)} is not interpolatable.`)}evaluate(i){const h=this.labels,f=this.outputs;if(h.length===1)return f[0].evaluate(i);const v=this.input.evaluate(i);if(v<=h[0])return f[0].evaluate(i);const w=h.length;if(v>=h[w-1])return f[w-1].evaluate(i);const M=iu(h,v),P=_o.interpolationFactor(this.interpolation,v,h[M],h[M+1]),z=f[M].evaluate(i),U=f[M+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return At(z,U,P);case"color":return Zt.interpolate(z,U,P);case"padding":return An.interpolate(z,U,P);case"variableAnchorOffsetCollection":return Kn.interpolate(z,U,P);case"array":return $t(z,U,P);case"projectionDefinition":return or.interpolate(z,U,P)}case"interpolate-hcl":return Zt.interpolate(z,U,P,"hcl");case"interpolate-lab":return Zt.interpolate(z,U,P,"lab")}}eachChild(i){i(this.input);for(const h of this.outputs)i(h)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function nl(u,i,h,f){const v=f-h,w=u-h;return v===0?0:i===1?w/v:(Math.pow(i,w)-1)/(Math.pow(i,v)-1)}const Br={color:Zt.interpolate,number:At,padding:An.interpolate,variableAnchorOffsetCollection:Kn.interpolate,array:$t};class Bl{constructor(i,h){this.type=i,this.args=h}static parse(i,h){if(i.length<2)return h.error("Expected at least one argument.");let f=null;const v=h.expectedType;v&&v.kind!=="value"&&(f=v);const w=[];for(const P of i.slice(1)){const z=h.parse(P,1+w.length,f,void 0,{typeAnnotation:"omit"});if(!z)return null;f=f||z.type,w.push(z)}if(!f)throw new Error("No output type");const M=v&&w.some(P=>kl(v,P.type));return new Bl(M?Xn:f,w)}evaluate(i){let h,f=null,v=0;for(const w of this.args)if(v++,f=w.evaluate(i),f&&f instanceof Zr&&!f.available&&(h||(h=f.name),f=null,v===this.args.length&&(f=h)),f!==null)break;return f}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function Ic(u,i){return u==="=="||u==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Ku(u,i,h,f){return f.compare(i,h)===0}function Xi(u,i,h){const f=u!=="=="&&u!=="!=";return class qT{constructor(w,M,P){this.type=Jn,this.lhs=w,this.rhs=M,this.collator=P,this.hasUntypedArgument=w.type.kind==="value"||M.type.kind==="value"}static parse(w,M){if(w.length!==3&&w.length!==4)return M.error("Expected two or three arguments.");const P=w[0];let z=M.parse(w[1],1,Xn);if(!z)return null;if(!Ic(P,z.type))return M.concat(1).error(`"${P}" comparisons are not supported for type '${mi(z.type)}'.`);let U=M.parse(w[2],2,Xn);if(!U)return null;if(!Ic(P,U.type))return M.concat(2).error(`"${P}" comparisons are not supported for type '${mi(U.type)}'.`);if(z.type.kind!==U.type.kind&&z.type.kind!=="value"&&U.type.kind!=="value")return M.error(`Cannot compare types '${mi(z.type)}' and '${mi(U.type)}'.`);f&&(z.type.kind==="value"&&U.type.kind!=="value"?z=new Jo(U.type,[z]):z.type.kind!=="value"&&U.type.kind==="value"&&(U=new Jo(z.type,[U])));let W=null;if(w.length===4){if(z.type.kind!=="string"&&U.type.kind!=="string"&&z.type.kind!=="value"&&U.type.kind!=="value")return M.error("Cannot use collator to compare non-string types.");if(W=M.parse(w[3],3,tu),!W)return null}return new qT(z,U,W)}evaluate(w){const M=this.lhs.evaluate(w),P=this.rhs.evaluate(w);if(f&&this.hasUntypedArgument){const z=kn(M),U=kn(P);if(z.kind!==U.kind||z.kind!=="string"&&z.kind!=="number")throw new gn(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${z.kind}, ${U.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const z=kn(M),U=kn(P);if(z.kind!=="string"||U.kind!=="string")return i(w,M,P)}return this.collator?h(w,M,P,this.collator.evaluate(w)):i(w,M,P)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const Nl=Xi("==",function(u,i,h){return i===h},Ku),Ho=Xi("!=",function(u,i,h){return i!==h},function(u,i,h,f){return!Ku(0,i,h,f)}),Cd=Xi("<",function(u,i,h){return i<h},function(u,i,h,f){return f.compare(i,h)<0}),au=Xi(">",function(u,i,h){return i>h},function(u,i,h,f){return f.compare(i,h)>0}),bo=Xi("<=",function(u,i,h){return i<=h},function(u,i,h,f){return f.compare(i,h)<=0}),$o=Xi(">=",function(u,i,h){return i>=h},function(u,i,h,f){return f.compare(i,h)>=0});class jl{constructor(i,h,f){this.type=tu,this.locale=f,this.caseSensitive=i,this.diacriticSensitive=h}static parse(i,h){if(i.length!==2)return h.error("Expected one argument.");const f=i[1];if(typeof f!="object"||Array.isArray(f))return h.error("Collator options argument must be an object.");const v=h.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Jn);if(!v)return null;const w=h.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Jn);if(!w)return null;let M=null;return f.locale&&(M=h.parse(f.locale,1,zn),!M)?null:new jl(v,w,M)}evaluate(i){return new Qt(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class ii{constructor(i,h,f,v,w){this.type=zn,this.number=i,this.locale=h,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=w}static parse(i,h){if(i.length!==3)return h.error("Expected two arguments.");const f=h.parse(i[1],1,Ze);if(!f)return null;const v=i[2];if(typeof v!="object"||Array.isArray(v))return h.error("NumberFormat options argument must be an object.");let w=null;if(v.locale&&(w=h.parse(v.locale,1,zn),!w))return null;let M=null;if(v.currency&&(M=h.parse(v.currency,1,zn),!M))return null;let P=null;if(v["min-fraction-digits"]&&(P=h.parse(v["min-fraction-digits"],1,Ze),!P))return null;let z=null;return v["max-fraction-digits"]&&(z=h.parse(v["max-fraction-digits"],1,Ze),!z)?null:new ii(f,w,M,P,z)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class ua{constructor(i){this.type=Pl,this.sections=i}static parse(i,h){if(i.length<2)return h.error("Expected at least one argument.");const f=i[1];if(!Array.isArray(f)&&typeof f=="object")return h.error("First argument must be an image or text section.");const v=[];let w=!1;for(let M=1;M<=i.length-1;++M){const P=i[M];if(w&&typeof P=="object"&&!Array.isArray(P)){w=!1;let z=null;if(P["font-scale"]&&(z=h.parse(P["font-scale"],1,Ze),!z))return null;let U=null;if(P["text-font"]&&(U=h.parse(P["text-font"],1,Ri(zn)),!U))return null;let W=null;if(P["text-color"]&&(W=h.parse(P["text-color"],1,eo),!W))return null;let et=null;if(P["vertical-align"]){if(typeof P["vertical-align"]=="string"&&!_e.includes(P["vertical-align"]))return h.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${P["vertical-align"]}' instead.`);if(et=h.parse(P["vertical-align"],1,zn),!et)return null}const lt=v[v.length-1];lt.scale=z,lt.font=U,lt.textColor=W,lt.verticalAlign=et}else{const z=h.parse(i[M],1,Xn);if(!z)return null;const U=z.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,v.push({content:z,scale:null,font:null,textColor:null,verticalAlign:null})}}return new ua(v)}evaluate(i){return new dn(this.sections.map(h=>{const f=h.content.evaluate(i);return kn(f)===Ms?new cn("",f,null,null,null,h.verticalAlign?h.verticalAlign.evaluate(i):null):new cn(Rr(f),null,h.scale?h.scale.evaluate(i):null,h.font?h.font.evaluate(i).join(","):null,h.textColor?h.textColor.evaluate(i):null,h.verticalAlign?h.verticalAlign.evaluate(i):null)}))}eachChild(i){for(const h of this.sections)i(h.content),h.scale&&i(h.scale),h.font&&i(h.font),h.textColor&&i(h.textColor),h.verticalAlign&&i(h.verticalAlign)}outputDefined(){return!1}}class $a{constructor(i){this.type=Ms,this.input=i}static parse(i,h){if(i.length!==2)return h.error("Expected two arguments.");const f=h.parse(i[1],1,zn);return f?new $a(f):h.error("No image name provided.")}evaluate(i){const h=this.input.evaluate(i),f=Zr.fromString(h);return f&&i.availableImages&&(f.available=i.availableImages.indexOf(h)>-1),f}eachChild(i){i(this.input)}outputDefined(){return!1}}class su{constructor(i){this.type=Ze,this.input=i}static parse(i,h){if(i.length!==2)return h.error(`Expected 1 argument, but found ${i.length-1} instead.`);const f=h.parse(i[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${mi(f.type)} instead.`):new su(f):null}evaluate(i){const h=this.input.evaluate(i);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new gn(`Expected value to be of type string or array, but found ${mi(kn(h))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const ta=8192;function Ph(u,i){const h=(180+u[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,v=Math.pow(2,i.z);return[Math.round(h*v*ta),Math.round(f*v*ta)]}function Vl(u,i){const h=Math.pow(2,i.z);return[(v=(u[0]/ta+i.x)/h,360*v-180),(f=(u[1]/ta+i.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,v}function rl(u,i){u[0]=Math.min(u[0],i[0]),u[1]=Math.min(u[1],i[1]),u[2]=Math.max(u[2],i[0]),u[3]=Math.max(u[3],i[1])}function Mc(u,i){return!(u[0]<=i[0]||u[2]>=i[2]||u[1]<=i[1]||u[3]>=i[3])}function lu(u,i,h){const f=u[0]-i[0],v=u[1]-i[1],w=u[0]-h[0],M=u[1]-h[1];return f*M-w*v==0&&f*w<=0&&v*M<=0}function hs(u,i,h,f){return(v=[f[0]-h[0],f[1]-h[1]])[0]*(w=[i[0]-u[0],i[1]-u[1]])[1]-v[1]*w[0]!=0&&!(!Ls(u,i,h,f)||!Ls(h,f,u,i));var v,w}function Nf(u,i,h){for(const f of h)for(let v=0;v<f.length-1;++v)if(hs(u,i,f[v],f[v+1]))return!0;return!1}function ks(u,i,h=!1){let f=!1;for(const P of i)for(let z=0;z<P.length-1;z++){if(lu(u,P[z],P[z+1]))return h;(w=P[z])[1]>(v=u)[1]!=(M=P[z+1])[1]>v[1]&&v[0]<(M[0]-w[0])*(v[1]-w[1])/(M[1]-w[1])+w[0]&&(f=!f)}var v,w,M;return f}function Yu(u,i){for(const h of i)if(ks(u,h))return!0;return!1}function ds(u,i){for(const h of u)if(!ks(h,i))return!1;for(let h=0;h<u.length-1;++h)if(Nf(u[h],u[h+1],i))return!1;return!0}function Ga(u,i){for(const h of i)if(ds(u,h))return!0;return!1}function Ls(u,i,h,f){const v=f[0]-h[0],w=f[1]-h[1],M=(u[0]-h[0])*w-v*(u[1]-h[1]),P=(i[0]-h[0])*w-v*(i[1]-h[1]);return M>0&&P<0||M<0&&P>0}function Sc(u,i,h){const f=[];for(let v=0;v<u.length;v++){const w=[];for(let M=0;M<u[v].length;M++){const P=Ph(u[v][M],h);rl(i,P),w.push(P)}f.push(w)}return f}function Sa(u,i,h){const f=[];for(let v=0;v<u.length;v++){const w=Sc(u[v],i,h);f.push(w)}return f}function cu(u,i,h,f){if(u[0]<h[0]||u[0]>h[2]){const v=.5*f;let w=u[0]-h[0]>v?-f:h[0]-u[0]>v?f:0;w===0&&(w=u[0]-h[2]>v?-f:h[2]-u[0]>v?f:0),u[0]+=w}rl(i,u)}function Ec(u,i,h,f){const v=Math.pow(2,f.z)*ta,w=[f.x*ta,f.y*ta],M=[];for(const P of u)for(const z of P){const U=[z.x+w[0],z.y+w[1]];cu(U,i,h,v),M.push(U)}return M}function Ul(u,i,h,f){const v=Math.pow(2,f.z)*ta,w=[f.x*ta,f.y*ta],M=[];for(const z of u){const U=[];for(const W of z){const et=[W.x+w[0],W.y+w[1]];rl(i,et),U.push(et)}M.push(U)}if(i[2]-i[0]<=v/2){(P=i)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(const z of M)for(const U of z)cu(U,i,h,v)}var P;return M}class Zi{constructor(i,h){this.type=Jn,this.geojson=i,this.geometries=h}static parse(i,h){if(i.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(on(i[1])){const f=i[1];if(f.type==="FeatureCollection"){const v=[];for(const w of f.features){const{type:M,coordinates:P}=w.geometry;M==="Polygon"&&v.push(P),M==="MultiPolygon"&&v.push(...P)}if(v.length)return new Zi(f,{type:"MultiPolygon",coordinates:v})}else if(f.type==="Feature"){const v=f.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Zi(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Zi(f,f)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(h,f){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],M=h.canonicalID();if(f.type==="Polygon"){const P=Sc(f.coordinates,w,M),z=Ec(h.geometry(),v,w,M);if(!Mc(v,w))return!1;for(const U of z)if(!ks(U,P))return!1}if(f.type==="MultiPolygon"){const P=Sa(f.coordinates,w,M),z=Ec(h.geometry(),v,w,M);if(!Mc(v,w))return!1;for(const U of z)if(!Yu(U,P))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(h,f){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],M=h.canonicalID();if(f.type==="Polygon"){const P=Sc(f.coordinates,w,M),z=Ul(h.geometry(),v,w,M);if(!Mc(v,w))return!1;for(const U of z)if(!ds(U,P))return!1}if(f.type==="MultiPolygon"){const P=Sa(f.coordinates,w,M),z=Ul(h.geometry(),v,w,M);if(!Mc(v,w))return!1;for(const U of z)if(!Ga(U,P))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let uu=class{constructor(u=[],i=(h,f)=>h<f?-1:h>f?1:0){if(this.data=u,this.length=this.data.length,this.compare=i,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:i,compare:h}=this,f=i[u];for(;u>0;){const v=u-1>>1,w=i[v];if(h(f,w)>=0)break;i[u]=w,u=v}i[u]=f}_down(u){const{data:i,compare:h}=this,f=this.length>>1,v=i[u];for(;u<f;){let w=1+(u<<1);const M=w+1;if(M<this.length&&h(i[M],i[w])<0&&(w=M),h(i[w],v)>=0)break;i[u]=i[w],u=w}i[u]=v}};function il(u,i,h=0,f=u.length-1,v=kh){for(;f>h;){if(f-h>600){const z=f-h+1,U=i-h+1,W=Math.log(z),et=.5*Math.exp(2*W/3),lt=.5*Math.sqrt(W*et*(z-et)/z)*(U-z/2<0?-1:1);il(u,i,Math.max(h,Math.floor(i-U*et/z+lt)),Math.min(f,Math.floor(i+(z-U)*et/z+lt)),v)}const w=u[i];let M=h,P=f;for(Tc(u,h,i),v(u[f],w)>0&&Tc(u,h,f);M<P;){for(Tc(u,M,P),M++,P--;v(u[M],w)<0;)M++;for(;v(u[P],w)>0;)P--}v(u[h],w)===0?Tc(u,h,P):(P++,Tc(u,P,f)),P<=i&&(h=P+1),i<=P&&(f=P-1)}}function Tc(u,i,h){const f=u[i];u[i]=u[h],u[h]=f}function kh(u,i){return u<i?-1:u>i?1:0}function hu(u,i){if(u.length<=1)return[u];const h=[];let f,v;for(const w of u){const M=Hl(w);M!==0&&(w.area=Math.abs(M),v===void 0&&(v=M<0),v===M<0?(f&&h.push(f),f=[w]):f.push(w))}if(f&&h.push(f),i>1)for(let w=0;w<h.length;w++)h[w].length<=i||(il(h[w],i,1,h[w].length-1,du),h[w]=h[w].slice(0,i));return h}function du(u,i){return i.area-u.area}function Hl(u){let i=0;for(let h,f,v=0,w=u.length,M=w-1;v<w;M=v++)h=u[v],f=u[M],i+=(f.x-h.x)*(h.y+f.y);return i}const Id=1/298.257223563,Rs=Id*(2-Id),ol=Math.PI/180;class fs{constructor(i){const h=6378.137*ol*1e3,f=Math.cos(i*ol),v=1/(1-Rs*(1-f*f)),w=Math.sqrt(v);this.kx=h*w*f,this.ky=h*w*v*(1-Rs)}distance(i,h){const f=this.wrap(i[0]-h[0])*this.kx,v=(i[1]-h[1])*this.ky;return Math.sqrt(f*f+v*v)}pointOnLine(i,h){let f,v,w,M,P=1/0;for(let z=0;z<i.length-1;z++){let U=i[z][0],W=i[z][1],et=this.wrap(i[z+1][0]-U)*this.kx,lt=(i[z+1][1]-W)*this.ky,ct=0;et===0&&lt===0||(ct=(this.wrap(h[0]-U)*this.kx*et+(h[1]-W)*this.ky*lt)/(et*et+lt*lt),ct>1?(U=i[z+1][0],W=i[z+1][1]):ct>0&&(U+=et/this.kx*ct,W+=lt/this.ky*ct)),et=this.wrap(h[0]-U)*this.kx,lt=(h[1]-W)*this.ky;const dt=et*et+lt*lt;dt<P&&(P=dt,f=U,v=W,w=z,M=ct)}return{point:[f,v],index:w,t:Math.max(0,Math.min(1,M))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function Lh(u,i){return i[0]-u[0]}function Pc(u){return u[1]-u[0]+1}function ha(u,i){return u[1]>=u[0]&&u[1]<i}function da(u,i){if(u[0]>u[1])return[null,null];const h=Pc(u);if(i){if(h===2)return[u,null];const v=Math.floor(h/2);return[[u[0],u[0]+v],[u[0]+v,u[1]]]}if(h===1)return[u,null];const f=Math.floor(h/2)-1;return[[u[0],u[0]+f],[u[0]+f+1,u[1]]]}function $l(u,i){if(!ha(i,u.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let f=i[0];f<=i[1];++f)rl(h,u[f]);return h}function Xu(u){const i=[1/0,1/0,-1/0,-1/0];for(const h of u)for(const f of h)rl(i,f);return i}function Rh(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function Gl(u,i,h){if(!Rh(u)||!Rh(i))return NaN;let f=0,v=0;return u[2]<i[0]&&(f=i[0]-u[2]),u[0]>i[2]&&(f=u[0]-i[2]),u[1]>i[3]&&(v=u[1]-i[3]),u[3]<i[1]&&(v=i[1]-u[3]),h.distance([0,0],[f,v])}function _r(u,i,h){const f=h.pointOnLine(i,u);return h.distance(u,f.point)}function fa(u,i,h,f,v){const w=Math.min(_r(u,[h,f],v),_r(i,[h,f],v)),M=Math.min(_r(h,[u,i],v),_r(f,[u,i],v));return Math.min(w,M)}function Ae(u,i,h,f,v){if(!ha(i,u.length)||!ha(f,h.length))return 1/0;let w=1/0;for(let M=i[0];M<i[1];++M){const P=u[M],z=u[M+1];for(let U=f[0];U<f[1];++U){const W=h[U],et=h[U+1];if(hs(P,z,W,et))return 0;w=Math.min(w,fa(P,z,W,et,v))}}return w}function qe(u,i,h,f,v){if(!ha(i,u.length)||!ha(f,h.length))return NaN;let w=1/0;for(let M=i[0];M<=i[1];++M)for(let P=f[0];P<=f[1];++P)if(w=Math.min(w,v.distance(u[M],h[P])),w===0)return w;return w}function Dn(u,i,h){if(ks(u,i,!0))return 0;let f=1/0;for(const v of i){const w=v[0],M=v[v.length-1];if(w!==M&&(f=Math.min(f,_r(u,[M,w],h)),f===0))return f;const P=h.pointOnLine(v,u);if(f=Math.min(f,h.distance(u,P.point)),f===0)return f}return f}function sr(u,i,h,f){if(!ha(i,u.length))return NaN;for(let w=i[0];w<=i[1];++w)if(ks(u[w],h,!0))return 0;let v=1/0;for(let w=i[0];w<i[1];++w){const M=u[w],P=u[w+1];for(const z of h)for(let U=0,W=z.length,et=W-1;U<W;et=U++){const lt=z[et],ct=z[U];if(hs(M,P,lt,ct))return 0;v=Math.min(v,fa(M,P,lt,ct,f))}}return v}function yi(u,i){for(const h of u)for(const f of h)if(ks(f,i,!0))return!0;return!1}function Hr(u,i,h,f=1/0){const v=Xu(u),w=Xu(i);if(f!==1/0&&Gl(v,w,h)>=f)return f;if(Mc(v,w)){if(yi(u,i))return 0}else if(yi(i,u))return 0;let M=1/0;for(const P of u)for(let z=0,U=P.length,W=U-1;z<U;W=z++){const et=P[W],lt=P[z];for(const ct of i)for(let dt=0,wt=ct.length,Et=wt-1;dt<wt;Et=dt++){const Vt=ct[Et],ce=ct[dt];if(hs(et,lt,Vt,ce))return 0;M=Math.min(M,fa(et,lt,Vt,ce,h))}}return M}function si(u,i,h,f,v,w){if(!w)return;const M=Gl($l(f,w),v,h);M<i&&u.push([M,w,[0,0]])}function me(u,i,h,f,v,w,M){if(!w||!M)return;const P=Gl($l(f,w),$l(v,M),h);P<i&&u.push([P,w,M])}function We(u,i,h,f,v=1/0){let w=Math.min(f.distance(u[0],h[0][0]),v);if(w===0)return w;const M=new uu([[0,[0,u.length-1],[0,0]]],Lh),P=Xu(h);for(;M.length>0;){const z=M.pop();if(z[0]>=w)continue;const U=z[1],W=i?50:100;if(Pc(U)<=W){if(!ha(U,u.length))return NaN;if(i){const et=sr(u,U,h,f);if(isNaN(et)||et===0)return et;w=Math.min(w,et)}else for(let et=U[0];et<=U[1];++et){const lt=Dn(u[et],h,f);if(w=Math.min(w,lt),w===0)return 0}}else{const et=da(U,i);si(M,w,f,u,P,et[0]),si(M,w,f,u,P,et[1])}}return w}function ze(u,i,h,f,v,w=1/0){let M=Math.min(w,v.distance(u[0],h[0]));if(M===0)return M;const P=new uu([[0,[0,u.length-1],[0,h.length-1]]],Lh);for(;P.length>0;){const z=P.pop();if(z[0]>=M)continue;const U=z[1],W=z[2],et=i?50:100,lt=f?50:100;if(Pc(U)<=et&&Pc(W)<=lt){if(!ha(U,u.length)&&ha(W,h.length))return NaN;let ct;if(i&&f)ct=Ae(u,U,h,W,v),M=Math.min(M,ct);else if(i&&!f){const dt=u.slice(U[0],U[1]+1);for(let wt=W[0];wt<=W[1];++wt)if(ct=_r(h[wt],dt,v),M=Math.min(M,ct),M===0)return M}else if(!i&&f){const dt=h.slice(W[0],W[1]+1);for(let wt=U[0];wt<=U[1];++wt)if(ct=_r(u[wt],dt,v),M=Math.min(M,ct),M===0)return M}else ct=qe(u,U,h,W,v),M=Math.min(M,ct)}else{const ct=da(U,i),dt=da(W,f);me(P,M,v,u,h,ct[0],dt[0]),me(P,M,v,u,h,ct[0],dt[1]),me(P,M,v,u,h,ct[1],dt[0]),me(P,M,v,u,h,ct[1],dt[1])}}return M}function Tn(u){return u.type==="MultiPolygon"?u.coordinates.map(i=>({type:"Polygon",coordinates:i})):u.type==="MultiLineString"?u.coordinates.map(i=>({type:"LineString",coordinates:i})):u.type==="MultiPoint"?u.coordinates.map(i=>({type:"Point",coordinates:i})):[u]}class rr{constructor(i,h){this.type=Ze,this.geojson=i,this.geometries=h}static parse(i,h){if(i.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(on(i[1])){const f=i[1];if(f.type==="FeatureCollection")return new rr(f,f.features.map(v=>Tn(v.geometry)).flat());if(f.type==="Feature")return new rr(f,Tn(f.geometry));if("type"in f&&"coordinates"in f)return new rr(f,Tn(f))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(h,f){const v=h.geometry(),w=v.flat().map(z=>Vl([z.x,z.y],h.canonical));if(v.length===0)return NaN;const M=new fs(w[0][1]);let P=1/0;for(const z of f){switch(z.type){case"Point":P=Math.min(P,ze(w,!1,[z.coordinates],!1,M,P));break;case"LineString":P=Math.min(P,ze(w,!1,z.coordinates,!0,M,P));break;case"Polygon":P=Math.min(P,We(w,!1,z.coordinates,M,P))}if(P===0)return P}return P}(i,this.geometries);if(i.geometryType()==="LineString")return function(h,f){const v=h.geometry(),w=v.flat().map(z=>Vl([z.x,z.y],h.canonical));if(v.length===0)return NaN;const M=new fs(w[0][1]);let P=1/0;for(const z of f){switch(z.type){case"Point":P=Math.min(P,ze(w,!0,[z.coordinates],!1,M,P));break;case"LineString":P=Math.min(P,ze(w,!0,z.coordinates,!0,M,P));break;case"Polygon":P=Math.min(P,We(w,!0,z.coordinates,M,P))}if(P===0)return P}return P}(i,this.geometries);if(i.geometryType()==="Polygon")return function(h,f){const v=h.geometry();if(v.length===0||v[0].length===0)return NaN;const w=hu(v,0).map(z=>z.map(U=>U.map(W=>Vl([W.x,W.y],h.canonical)))),M=new fs(w[0][0][0][1]);let P=1/0;for(const z of f)for(const U of w){switch(z.type){case"Point":P=Math.min(P,We([z.coordinates],!1,U,M,P));break;case"LineString":P=Math.min(P,We(z.coordinates,!0,U,M,P));break;case"Polygon":P=Math.min(P,Hr(U,z.coordinates,M,P))}if(P===0)return P}return P}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const br={"==":Nl,"!=":Ho,">":au,"<":Cd,">=":$o,"<=":bo,array:Jo,at:Cc,boolean:Jo,case:qu,coalesce:Bl,collator:jl,format:ua,image:$a,in:ca,"index-of":Ol,interpolate:_o,"interpolate-hcl":_o,"interpolate-lab":_o,length:su,let:Xr,literal:xi,match:ru,number:Jo,"number-format":ii,object:Jo,slice:zl,step:Fi,string:Jo,"to-boolean":ur,"to-color":ur,"to-number":ur,"to-string":ur,var:Dr,within:Zi,distance:rr};class xr{constructor(i,h,f,v){this.name=i,this.type=h,this._evaluate=f,this.args=v}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,h){const f=i[0],v=xr.definitions[f];if(!v)return h.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(v)?v[0]:v.type,M=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,P=M.filter(([U])=>!Array.isArray(U)||U.length===i.length-1);let z=null;for(const[U,W]of P){z=new Fn(h.registry,Za,h.path,null,h.scope);const et=[];let lt=!1;for(let ct=1;ct<i.length;ct++){const dt=i[ct],wt=Array.isArray(U)?U[ct-1]:U.type,Et=z.parse(dt,1+et.length,wt);if(!Et){lt=!0;break}et.push(Et)}if(!lt)if(Array.isArray(U)&&U.length!==et.length)z.error(`Expected ${U.length} arguments, but found ${et.length} instead.`);else{for(let ct=0;ct<et.length;ct++){const dt=Array.isArray(U)?U[ct]:U.type,wt=et[ct];z.concat(ct+1).checkSubtype(dt,wt.type)}if(z.errors.length===0)return new xr(f,w,W,et)}}if(P.length===1)h.errors.push(...z.errors);else{const U=(P.length?P:M).map(([et])=>{return lt=et,Array.isArray(lt)?`(${lt.map(mi).join(", ")})`:`(${mi(lt.type)}...)`;var lt}).join(" | "),W=[];for(let et=1;et<i.length;et++){const lt=h.parse(i[et],1+W.length);if(!lt)return null;W.push(mi(lt.type))}h.error(`Expected arguments of type ${U}, but found (${W.join(", ")}) instead.`)}return null}static register(i,h){xr.definitions=h;for(const f in h)i[f]=xr}}function $r(u,[i,h,f,v]){i=i.evaluate(u),h=h.evaluate(u),f=f.evaluate(u);const w=v?v.evaluate(u):1,M=ai(i,h,f,w);if(M)throw new gn(M);return new Zt(i/255,h/255,f/255,w,!1)}function Ds(u,i){return u in i}function kc(u,i){const h=i[u];return h===void 0?null:h}function Di(u){return{type:u}}function Za(u){if(u instanceof Dr)return Za(u.boundExpression);if(u instanceof xr&&u.name==="error"||u instanceof jl||u instanceof Zi||u instanceof rr)return!1;const i=u instanceof ur||u instanceof Jo;let h=!0;return u.eachChild(f=>{h=i?h&&Za(f):h&&f instanceof xi}),!!h&&fu(u)&&Zl(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function fu(u){if(u instanceof xr&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof Zi||u instanceof rr)return!1;let i=!0;return u.eachChild(h=>{i&&!fu(h)&&(i=!1)}),i}function ps(u){if(u instanceof xr&&u.name==="feature-state")return!1;let i=!0;return u.eachChild(h=>{i&&!ps(h)&&(i=!1)}),i}function Zl(u,i){if(u instanceof xr&&i.indexOf(u.name)>=0)return!1;let h=!0;return u.eachChild(f=>{h&&!Zl(f,i)&&(h=!1)}),h}function Jr(u){return{result:"success",value:u}}function tr(u){return{result:"error",value:u}}function Os(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function ms(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function al(u){return!!u.expression&&u.expression.interpolated}function vr(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Ea(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function sl(u){return u}function Wa(u,i){const h=i.type==="color",f=u.stops&&typeof u.stops[0][0]=="object",v=f||!(f||u.property!==void 0),w=u.type||(al(i)?"exponential":"interval");if(h||i.type==="padding"){const W=h?Zt.parse:An.parse;(u=$n({},u)).stops&&(u.stops=u.stops.map(et=>[et[0],W(et[1])])),u.default=W(u.default?u.default:i.default)}if(u.colorSpace&&(M=u.colorSpace)!=="rgb"&&M!=="hcl"&&M!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var M;let P,z,U;if(w==="exponential")P=Wl;else if(w==="interval")P=ll;else if(w==="categorical"){P=zs,z=Object.create(null);for(const W of u.stops)z[W[0]]=W[1];U=typeof u.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);P=pu}if(f){const W={},et=[];for(let dt=0;dt<u.stops.length;dt++){const wt=u.stops[dt],Et=wt[0].zoom;W[Et]===void 0&&(W[Et]={zoom:Et,type:u.type,property:u.property,default:u.default,stops:[]},et.push(Et)),W[Et].stops.push([wt[0].value,wt[1]])}const lt=[];for(const dt of et)lt.push([W[dt].zoom,Wa(W[dt],i)]);const ct={name:"linear"};return{kind:"composite",interpolationType:ct,interpolationFactor:_o.interpolationFactor.bind(void 0,ct),zoomStops:lt.map(dt=>dt[0]),evaluate:({zoom:dt},wt)=>Wl({stops:lt,base:u.base},i,dt).evaluate(dt,wt)}}if(v){const W=w==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:W,interpolationFactor:_o.interpolationFactor.bind(void 0,W),zoomStops:u.stops.map(et=>et[0]),evaluate:({zoom:et})=>P(u,i,et,z,U)}}return{kind:"source",evaluate(W,et){const lt=et&&et.properties?et.properties[u.property]:void 0;return lt===void 0?Go(u.default,i.default):P(u,i,lt,z,U)}}}function Go(u,i,h){return u!==void 0?u:i!==void 0?i:h!==void 0?h:void 0}function zs(u,i,h,f,v){return Go(typeof h===v?f[h]:void 0,u.default,i.default)}function ll(u,i,h){if(vr(h)!=="number")return Go(u.default,i.default);const f=u.stops.length;if(f===1||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[f-1][0])return u.stops[f-1][1];const v=iu(u.stops.map(w=>w[0]),h);return u.stops[v][1]}function Wl(u,i,h){const f=u.base!==void 0?u.base:1;if(vr(h)!=="number")return Go(u.default,i.default);const v=u.stops.length;if(v===1||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[v-1][0])return u.stops[v-1][1];const w=iu(u.stops.map(W=>W[0]),h),M=function(W,et,lt,ct){const dt=ct-lt,wt=W-lt;return dt===0?0:et===1?wt/dt:(Math.pow(et,wt)-1)/(Math.pow(et,dt)-1)}(h,f,u.stops[w][0],u.stops[w+1][0]),P=u.stops[w][1],z=u.stops[w+1][1],U=Br[i.type]||sl;return typeof P.evaluate=="function"?{evaluate(...W){const et=P.evaluate.apply(void 0,W),lt=z.evaluate.apply(void 0,W);if(et!==void 0&&lt!==void 0)return U(et,lt,M,u.colorSpace)}}:U(P,z,M,u.colorSpace)}function pu(u,i,h){switch(i.type){case"color":h=Zt.parse(h);break;case"formatted":h=dn.fromString(h.toString());break;case"resolvedImage":h=Zr.fromString(h.toString());break;case"padding":h=An.parse(h);break;default:vr(h)===i.type||i.type==="enum"&&i.values[h]||(h=void 0)}return Go(h,u.default,i.default)}xr.register(br,{error:[{kind:"error"},[zn],(u,[i])=>{throw new gn(i.evaluate(u))}],typeof:[zn,[Xn],(u,[i])=>mi(kn(i.evaluate(u)))],"to-rgba":[Ri(Ze,4),[eo],(u,[i])=>{const[h,f,v,w]=i.evaluate(u).rgb;return[255*h,255*f,255*v,w]}],rgb:[eo,[Ze,Ze,Ze],$r],rgba:[eo,[Ze,Ze,Ze,Ze],$r],has:{type:Jn,overloads:[[[zn],(u,[i])=>Ds(i.evaluate(u),u.properties())],[[zn,pi],(u,[i,h])=>Ds(i.evaluate(u),h.evaluate(u))]]},get:{type:Xn,overloads:[[[zn],(u,[i])=>kc(i.evaluate(u),u.properties())],[[zn,pi],(u,[i,h])=>kc(i.evaluate(u),h.evaluate(u))]]},"feature-state":[Xn,[zn],(u,[i])=>kc(i.evaluate(u),u.featureState||{})],properties:[pi,[],u=>u.properties()],"geometry-type":[zn,[],u=>u.geometryType()],id:[Xn,[],u=>u.id()],zoom:[Ze,[],u=>u.globals.zoom],"heatmap-density":[Ze,[],u=>u.globals.heatmapDensity||0],"line-progress":[Ze,[],u=>u.globals.lineProgress||0],accumulated:[Xn,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[Ze,Di(Ze),(u,i)=>{let h=0;for(const f of i)h+=f.evaluate(u);return h}],"*":[Ze,Di(Ze),(u,i)=>{let h=1;for(const f of i)h*=f.evaluate(u);return h}],"-":{type:Ze,overloads:[[[Ze,Ze],(u,[i,h])=>i.evaluate(u)-h.evaluate(u)],[[Ze],(u,[i])=>-i.evaluate(u)]]},"/":[Ze,[Ze,Ze],(u,[i,h])=>i.evaluate(u)/h.evaluate(u)],"%":[Ze,[Ze,Ze],(u,[i,h])=>i.evaluate(u)%h.evaluate(u)],ln2:[Ze,[],()=>Math.LN2],pi:[Ze,[],()=>Math.PI],e:[Ze,[],()=>Math.E],"^":[Ze,[Ze,Ze],(u,[i,h])=>Math.pow(i.evaluate(u),h.evaluate(u))],sqrt:[Ze,[Ze],(u,[i])=>Math.sqrt(i.evaluate(u))],log10:[Ze,[Ze],(u,[i])=>Math.log(i.evaluate(u))/Math.LN10],ln:[Ze,[Ze],(u,[i])=>Math.log(i.evaluate(u))],log2:[Ze,[Ze],(u,[i])=>Math.log(i.evaluate(u))/Math.LN2],sin:[Ze,[Ze],(u,[i])=>Math.sin(i.evaluate(u))],cos:[Ze,[Ze],(u,[i])=>Math.cos(i.evaluate(u))],tan:[Ze,[Ze],(u,[i])=>Math.tan(i.evaluate(u))],asin:[Ze,[Ze],(u,[i])=>Math.asin(i.evaluate(u))],acos:[Ze,[Ze],(u,[i])=>Math.acos(i.evaluate(u))],atan:[Ze,[Ze],(u,[i])=>Math.atan(i.evaluate(u))],min:[Ze,Di(Ze),(u,i)=>Math.min(...i.map(h=>h.evaluate(u)))],max:[Ze,Di(Ze),(u,i)=>Math.max(...i.map(h=>h.evaluate(u)))],abs:[Ze,[Ze],(u,[i])=>Math.abs(i.evaluate(u))],round:[Ze,[Ze],(u,[i])=>{const h=i.evaluate(u);return h<0?-Math.round(-h):Math.round(h)}],floor:[Ze,[Ze],(u,[i])=>Math.floor(i.evaluate(u))],ceil:[Ze,[Ze],(u,[i])=>Math.ceil(i.evaluate(u))],"filter-==":[Jn,[zn,Xn],(u,[i,h])=>u.properties()[i.value]===h.value],"filter-id-==":[Jn,[Xn],(u,[i])=>u.id()===i.value],"filter-type-==":[Jn,[zn],(u,[i])=>u.geometryType()===i.value],"filter-<":[Jn,[zn,Xn],(u,[i,h])=>{const f=u.properties()[i.value],v=h.value;return typeof f==typeof v&&f<v}],"filter-id-<":[Jn,[Xn],(u,[i])=>{const h=u.id(),f=i.value;return typeof h==typeof f&&h<f}],"filter->":[Jn,[zn,Xn],(u,[i,h])=>{const f=u.properties()[i.value],v=h.value;return typeof f==typeof v&&f>v}],"filter-id->":[Jn,[Xn],(u,[i])=>{const h=u.id(),f=i.value;return typeof h==typeof f&&h>f}],"filter-<=":[Jn,[zn,Xn],(u,[i,h])=>{const f=u.properties()[i.value],v=h.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[Jn,[Xn],(u,[i])=>{const h=u.id(),f=i.value;return typeof h==typeof f&&h<=f}],"filter->=":[Jn,[zn,Xn],(u,[i,h])=>{const f=u.properties()[i.value],v=h.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[Jn,[Xn],(u,[i])=>{const h=u.id(),f=i.value;return typeof h==typeof f&&h>=f}],"filter-has":[Jn,[Xn],(u,[i])=>i.value in u.properties()],"filter-has-id":[Jn,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[Jn,[Ri(zn)],(u,[i])=>i.value.indexOf(u.geometryType())>=0],"filter-id-in":[Jn,[Ri(Xn)],(u,[i])=>i.value.indexOf(u.id())>=0],"filter-in-small":[Jn,[zn,Ri(Xn)],(u,[i,h])=>h.value.indexOf(u.properties()[i.value])>=0],"filter-in-large":[Jn,[zn,Ri(Xn)],(u,[i,h])=>function(f,v,w,M){for(;w<=M;){const P=w+M>>1;if(v[P]===f)return!0;v[P]>f?M=P-1:w=P+1}return!1}(u.properties()[i.value],h.value,0,h.value.length-1)],all:{type:Jn,overloads:[[[Jn,Jn],(u,[i,h])=>i.evaluate(u)&&h.evaluate(u)],[Di(Jn),(u,i)=>{for(const h of i)if(!h.evaluate(u))return!1;return!0}]]},any:{type:Jn,overloads:[[[Jn,Jn],(u,[i,h])=>i.evaluate(u)||h.evaluate(u)],[Di(Jn),(u,i)=>{for(const h of i)if(h.evaluate(u))return!0;return!1}]]},"!":[Jn,[Jn],(u,[i])=>!i.evaluate(u)],"is-supported-script":[Jn,[zn],(u,[i])=>{const h=u.globals&&u.globals.isSupportedScript;return!h||h(i.evaluate(u))}],upcase:[zn,[zn],(u,[i])=>i.evaluate(u).toUpperCase()],downcase:[zn,[zn],(u,[i])=>i.evaluate(u).toLowerCase()],concat:[zn,Di(Xn),(u,i)=>i.map(h=>Rr(h.evaluate(u))).join("")],"resolved-locale":[zn,[tu],(u,[i])=>i.evaluate(u).resolvedLocale()]});class Lc{constructor(i,h){var f;this.expression=i,this._warningHistory={},this._evaluator=new Wr,this._defaultValue=h?(f=h).type==="color"&&Ea(f.default)?new Zt(0,0,0,0):f.type==="color"?Zt.parse(f.default)||null:f.type==="padding"?An.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?Kn.parse(f.default)||null:f.type==="projectionDefinition"?or.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(i,h,f,v,w,M){return this._evaluator.globals=i,this._evaluator.feature=h,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=M,this.expression.evaluate(this._evaluator)}evaluate(i,h,f,v,w,M){this._evaluator.globals=i,this._evaluator.feature=h||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=M||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new gn(`Expected value to be one of ${Object.keys(this._enumValues).map(z=>JSON.stringify(z)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(P.message)),this._defaultValue}}}function pa(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in br}function Fs(u,i){const h=new Fn(br,Za,[],i?function(v){const w={color:eo,string:zn,number:Ze,enum:zn,boolean:Jn,formatted:Pl,padding:Uu,projectionDefinition:Po,resolvedImage:Ms,variableAnchorOffsetCollection:Hu};return v.type==="array"?Ri(w[v.value]||Xn,v.length):w[v.type]}(i):void 0),f=h.parse(u,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Jr(new Lc(f,i)):tr(h.errors)}class cl{constructor(i,h){this.kind=i,this._styleExpression=h,this.isStateDependent=i!=="constant"&&!ps(h.expression)}evaluateWithoutErrorHandling(i,h,f,v,w,M){return this._styleExpression.evaluateWithoutErrorHandling(i,h,f,v,w,M)}evaluate(i,h,f,v,w,M){return this._styleExpression.evaluate(i,h,f,v,w,M)}}class Ta{constructor(i,h,f,v){this.kind=i,this.zoomStops=f,this._styleExpression=h,this.isStateDependent=i!=="camera"&&!ps(h.expression),this.interpolationType=v}evaluateWithoutErrorHandling(i,h,f,v,w,M){return this._styleExpression.evaluateWithoutErrorHandling(i,h,f,v,w,M)}evaluate(i,h,f,v,w,M){return this._styleExpression.evaluate(i,h,f,v,w,M)}interpolationFactor(i,h,f){return this.interpolationType?_o.interpolationFactor(this.interpolationType,i,h,f):0}}function ul(u,i){const h=Fs(u,i);if(h.result==="error")return h;const f=h.value.expression,v=fu(f);if(!v&&!Os(i))return tr([new Fr("","data expressions not supported")]);const w=Zl(f,["zoom"]);if(!w&&!ms(i))return tr([new Fr("","zoom expressions not supported")]);const M=Sd(f);return M||w?M instanceof Fr?tr([M]):M instanceof _o&&!al(i)?tr([new Fr("",'"interpolate" expressions cannot be used with this property')]):Jr(M?new Ta(v?"camera":"composite",h.value,M.labels,M instanceof _o?M.interpolation:void 0):new cl(v?"constant":"source",h.value)):tr([new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Md{constructor(i,h){this._parameters=i,this._specification=h,$n(this,Wa(this._parameters,this._specification))}static deserialize(i){return new Md(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Sd(u){let i=null;if(u instanceof Xr)i=Sd(u.result);else if(u instanceof Bl){for(const h of u.args)if(i=Sd(h),i)break}else(u instanceof Fi||u instanceof _o)&&u.input instanceof xr&&u.input.name==="zoom"&&(i=u);return i instanceof Fr||u.eachChild(h=>{const f=Sd(h);f instanceof Fr?i=f:!i&&f?i=new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&f&&i!==f&&(i=new Fr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function Ed(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const i of u.slice(1))if(!Ed(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const Dh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Qu(u){if(u==null)return{filter:()=>!0,needGeometry:!1};Ed(u)||(u=Ju(u));const i=Fs(u,Dh);if(i.result==="error")throw new Error(i.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,f,v)=>i.value.evaluate(h,f,{},v),needGeometry:Vf(u)}}function jf(u,i){return u<i?-1:u>i?1:0}function Vf(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let i=1;i<u.length;i++)if(Vf(u[i]))return!0;return!1}function Ju(u){if(!u)return!0;const i=u[0];return u.length<=1?i!=="any":i==="=="?Td(u[1],u[2],"=="):i==="!="?Qi(Td(u[1],u[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Td(u[1],u[2],i):i==="any"?(h=u.slice(1),["any"].concat(h.map(Ju))):i==="all"?["all"].concat(u.slice(1).map(Ju)):i==="none"?["all"].concat(u.slice(1).map(Ju).map(Qi)):i==="in"?Uf(u[1],u.slice(2)):i==="!in"?Qi(Uf(u[1],u.slice(2))):i==="has"?Wi(u[1]):i!=="!has"||Qi(Wi(u[1]));var h}function Td(u,i,h){switch(u){case"$type":return[`filter-type-${h}`,i];case"$id":return[`filter-id-${h}`,i];default:return[`filter-${h}`,u,i]}}function Uf(u,i){if(i.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(h=>typeof h!=typeof i[0])?["filter-in-large",u,["literal",i.sort(jf)]]:["filter-in-small",u,["literal",i]]}}function Wi(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Qi(u){return["!",u]}function Oh(u){const i=typeof u;if(i==="number"||i==="boolean"||i==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let v="[";for(const w of u)v+=`${Oh(w)},`;return`${v}]`}const h=Object.keys(u).sort();let f="{";for(let v=0;v<h.length;v++)f+=`${JSON.stringify(h[v])}:${Oh(u[h[v]])},`;return`${f}}`}function Pd(u){let i="";for(const h of oe)i+=`/${Oh(u[h])}`;return i}function Hf(u){const i=u.value;return i?[new Ue(u.key,i,"constants have been deprecated as of v8")]:[]}function qi(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function ql(u){if(Array.isArray(u))return u.map(ql);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const i={};for(const h in u)i[h]=ql(u[h]);return i}return qi(u)}function ea(u){const i=u.key,h=u.value,f=u.valueSpec||{},v=u.objectElementValidators||{},w=u.style,M=u.styleSpec,P=u.validateSpec;let z=[];const U=vr(h);if(U!=="object")return[new Ue(i,h,`object expected, ${U} found`)];for(const W in h){const et=W.split(".")[0],lt=f[et]||f["*"];let ct;if(v[et])ct=v[et];else if(f[et])ct=P;else if(v["*"])ct=v["*"];else{if(!f["*"]){z.push(new Ue(i,h[W],`unknown property "${W}"`));continue}ct=P}z=z.concat(ct({key:(i&&`${i}.`)+W,value:h[W],valueSpec:lt,style:w,styleSpec:M,object:h,objectKey:W,validateSpec:P},h))}for(const W in f)v[W]||f[W].required&&f[W].default===void 0&&h[W]===void 0&&z.push(new Ue(i,h,`missing required property "${W}"`));return z}function zh(u){const i=u.value,h=u.valueSpec,f=u.style,v=u.styleSpec,w=u.key,M=u.arrayElementValidator||u.validateSpec;if(vr(i)!=="array")return[new Ue(w,i,`array expected, ${vr(i)} found`)];if(h.length&&i.length!==h.length)return[new Ue(w,i,`array length ${h.length} expected, length ${i.length} found`)];if(h["min-length"]&&i.length<h["min-length"])return[new Ue(w,i,`array length at least ${h["min-length"]} expected, length ${i.length} found`)];let P={type:h.value,values:h.values};v.$version<7&&(P.function=h.function),vr(h.value)==="object"&&(P=h.value);let z=[];for(let U=0;U<i.length;U++)z=z.concat(M({array:i,arrayIndex:U,value:i[U],valueSpec:P,validateSpec:u.validateSpec,style:f,styleSpec:v,key:`${w}[${U}]`}));return z}function Rc(u){const i=u.key,h=u.value,f=u.valueSpec;let v=vr(h);return v==="number"&&h!=h&&(v="NaN"),v!=="number"?[new Ue(i,h,`number expected, ${v} found`)]:"minimum"in f&&h<f.minimum?[new Ue(i,h,`${h} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&h>f.maximum?[new Ue(i,h,`${h} is greater than the maximum value ${f.maximum}`)]:[]}function mu(u){const i=u.valueSpec,h=qi(u.value.type);let f,v,w,M={};const P=h!=="categorical"&&u.value.property===void 0,z=!P,U=vr(u.value.stops)==="array"&&vr(u.value.stops[0])==="array"&&vr(u.value.stops[0][0])==="object",W=ea({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(ct){if(h==="identity")return[new Ue(ct.key,ct.value,'identity function may not have a "stops" property')];let dt=[];const wt=ct.value;return dt=dt.concat(zh({key:ct.key,value:wt,valueSpec:ct.valueSpec,validateSpec:ct.validateSpec,style:ct.style,styleSpec:ct.styleSpec,arrayElementValidator:et})),vr(wt)==="array"&&wt.length===0&&dt.push(new Ue(ct.key,wt,"array must have at least one stop")),dt},default:function(ct){return ct.validateSpec({key:ct.key,value:ct.value,valueSpec:i,validateSpec:ct.validateSpec,style:ct.style,styleSpec:ct.styleSpec})}}});return h==="identity"&&P&&W.push(new Ue(u.key,u.value,'missing required property "property"')),h==="identity"||u.value.stops||W.push(new Ue(u.key,u.value,'missing required property "stops"')),h==="exponential"&&u.valueSpec.expression&&!al(u.valueSpec)&&W.push(new Ue(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(z&&!Os(u.valueSpec)?W.push(new Ue(u.key,u.value,"property functions not supported")):P&&!ms(u.valueSpec)&&W.push(new Ue(u.key,u.value,"zoom functions not supported"))),h!=="categorical"&&!U||u.value.property!==void 0||W.push(new Ue(u.key,u.value,'"property" property is required')),W;function et(ct){let dt=[];const wt=ct.value,Et=ct.key;if(vr(wt)!=="array")return[new Ue(Et,wt,`array expected, ${vr(wt)} found`)];if(wt.length!==2)return[new Ue(Et,wt,`array length 2 expected, length ${wt.length} found`)];if(U){if(vr(wt[0])!=="object")return[new Ue(Et,wt,`object expected, ${vr(wt[0])} found`)];if(wt[0].zoom===void 0)return[new Ue(Et,wt,"object stop key must have zoom")];if(wt[0].value===void 0)return[new Ue(Et,wt,"object stop key must have value")];if(w&&w>qi(wt[0].zoom))return[new Ue(Et,wt[0].zoom,"stop zoom values must appear in ascending order")];qi(wt[0].zoom)!==w&&(w=qi(wt[0].zoom),v=void 0,M={}),dt=dt.concat(ea({key:`${Et}[0]`,value:wt[0],valueSpec:{zoom:{}},validateSpec:ct.validateSpec,style:ct.style,styleSpec:ct.styleSpec,objectElementValidators:{zoom:Rc,value:lt}}))}else dt=dt.concat(lt({key:`${Et}[0]`,value:wt[0],validateSpec:ct.validateSpec,style:ct.style,styleSpec:ct.styleSpec},wt));return pa(ql(wt[1]))?dt.concat([new Ue(`${Et}[1]`,wt[1],"expressions are not allowed in function stops.")]):dt.concat(ct.validateSpec({key:`${Et}[1]`,value:wt[1],valueSpec:i,validateSpec:ct.validateSpec,style:ct.style,styleSpec:ct.styleSpec}))}function lt(ct,dt){const wt=vr(ct.value),Et=qi(ct.value),Vt=ct.value!==null?ct.value:dt;if(f){if(wt!==f)return[new Ue(ct.key,Vt,`${wt} stop domain type must match previous stop domain type ${f}`)]}else f=wt;if(wt!=="number"&&wt!=="string"&&wt!=="boolean")return[new Ue(ct.key,Vt,"stop domain value must be a number, string, or boolean")];if(wt!=="number"&&h!=="categorical"){let ce=`number expected, ${wt} found`;return Os(i)&&h===void 0&&(ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ue(ct.key,Vt,ce)]}return h!=="categorical"||wt!=="number"||isFinite(Et)&&Math.floor(Et)===Et?h!=="categorical"&&wt==="number"&&v!==void 0&&Et<v?[new Ue(ct.key,Vt,"stop domain values must appear in ascending order")]:(v=Et,h==="categorical"&&Et in M?[new Ue(ct.key,Vt,"stop domain values must be unique")]:(M[Et]=!0,[])):[new Ue(ct.key,Vt,`integer expected, found ${Et}`)]}}function Bs(u){const i=(u.expressionContext==="property"?ul:Fs)(ql(u.value),u.valueSpec);if(i.result==="error")return i.value.map(f=>new Ue(`${u.key}${f.key}`,u.value,f.message));const h=i.value.expression||i.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!h.outputDefined())return[new Ue(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!ps(h))return[new Ue(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!ps(h))return[new Ue(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Zl(h,["zoom","feature-state"]))return[new Ue(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!fu(h))return[new Ue(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ns(u){const i=u.key,h=u.value,f=u.valueSpec,v=[];return Array.isArray(f.values)?f.values.indexOf(qi(h))===-1&&v.push(new Ue(i,h,`expected one of [${f.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(f.values).indexOf(qi(h))===-1&&v.push(new Ue(i,h,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(h)} found`)),v}function Dc(u){return Ed(ql(u.value))?Bs($n({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):$f(u)}function $f(u){const i=u.value,h=u.key;if(vr(i)!=="array")return[new Ue(h,i,`array expected, ${vr(i)} found`)];const f=u.styleSpec;let v,w=[];if(i.length<1)return[new Ue(h,i,"filter array must have at least 1 element")];switch(w=w.concat(Ns({key:`${h}[0]`,value:i[0],valueSpec:f.filter_operator,style:u.style,styleSpec:u.styleSpec})),qi(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&qi(i[1])==="$type"&&w.push(new Ue(h,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&w.push(new Ue(h,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(v=vr(i[1]),v!=="string"&&w.push(new Ue(`${h}[1]`,i[1],`string expected, ${v} found`)));for(let M=2;M<i.length;M++)v=vr(i[M]),qi(i[1])==="$type"?w=w.concat(Ns({key:`${h}[${M}]`,value:i[M],valueSpec:f.geometry_type,style:u.style,styleSpec:u.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&w.push(new Ue(`${h}[${M}]`,i[M],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let M=1;M<i.length;M++)w=w.concat($f({key:`${h}[${M}]`,value:i[M],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":v=vr(i[1]),i.length!==2?w.push(new Ue(h,i,`filter array for "${i[0]}" operator must have 2 elements`)):v!=="string"&&w.push(new Ue(`${h}[1]`,i[1],`string expected, ${v} found`))}return w}function Gf(u,i){const h=u.key,f=u.validateSpec,v=u.style,w=u.styleSpec,M=u.value,P=u.objectKey,z=w[`${i}_${u.layerType}`];if(!z)return[];const U=P.match(/^(.*)-transition$/);if(i==="paint"&&U&&z[U[1]]&&z[U[1]].transition)return f({key:h,value:M,valueSpec:w.transition,style:v,styleSpec:w});const W=u.valueSpec||z[P];if(!W)return[new Ue(h,M,`unknown property "${P}"`)];let et;if(vr(M)==="string"&&Os(W)&&!W.tokens&&(et=/^{([^}]+)}$/.exec(M)))return[new Ue(h,M,`"${P}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(et[1])} }\`.`)];const lt=[];return u.layerType==="symbol"&&(P==="text-field"&&v&&!v.glyphs&&lt.push(new Ue(h,M,'use of "text-field" requires a style "glyphs" property')),P==="text-font"&&Ea(ql(M))&&qi(M.type)==="identity"&&lt.push(new Ue(h,M,'"text-font" does not support identity functions'))),lt.concat(f({key:u.key,value:M,valueSpec:W,style:v,styleSpec:w,expressionContext:"property",propertyType:i,propertyKey:P}))}function Qp(u){return Gf(u,"paint")}function Zf(u){return Gf(u,"layout")}function Wf(u){let i=[];const h=u.value,f=u.key,v=u.style,w=u.styleSpec;h.type||h.ref||i.push(new Ue(f,h,'either "type" or "ref" is required'));let M=qi(h.type);const P=qi(h.ref);if(h.id){const z=qi(h.id);for(let U=0;U<u.arrayIndex;U++){const W=v.layers[U];qi(W.id)===z&&i.push(new Ue(f,h.id,`duplicate layer id "${h.id}", previously used at line ${W.id.__line__}`))}}if("ref"in h){let z;["type","source","source-layer","filter","layout"].forEach(U=>{U in h&&i.push(new Ue(f,h[U],`"${U}" is prohibited for ref layers`))}),v.layers.forEach(U=>{qi(U.id)===P&&(z=U)}),z?z.ref?i.push(new Ue(f,h.ref,"ref cannot reference another ref layer")):M=qi(z.type):i.push(new Ue(f,h.ref,`ref layer "${P}" not found`))}else if(M!=="background")if(h.source){const z=v.sources&&v.sources[h.source],U=z&&qi(z.type);z?U==="vector"&&M==="raster"?i.push(new Ue(f,h.source,`layer "${h.id}" requires a raster source`)):U!=="raster-dem"&&M==="hillshade"?i.push(new Ue(f,h.source,`layer "${h.id}" requires a raster-dem source`)):U==="raster"&&M!=="raster"?i.push(new Ue(f,h.source,`layer "${h.id}" requires a vector source`)):U!=="vector"||h["source-layer"]?U==="raster-dem"&&M!=="hillshade"?i.push(new Ue(f,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):M!=="line"||!h.paint||!h.paint["line-gradient"]||U==="geojson"&&z.lineMetrics||i.push(new Ue(f,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Ue(f,h,`layer "${h.id}" must specify a "source-layer"`)):i.push(new Ue(f,h.source,`source "${h.source}" not found`))}else i.push(new Ue(f,h,'missing required property "source"'));return i=i.concat(ea({key:f,value:h,valueSpec:w.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${f}.type`,value:h.type,valueSpec:w.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:h,objectKey:"type"}),filter:Dc,layout:z=>ea({layer:h,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":U=>Zf($n({layerType:M},U))}}),paint:z=>ea({layer:h,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":U=>Qp($n({layerType:M},U))}})}})),i}function Pa(u){const i=u.value,h=u.key,f=vr(i);return f!=="string"?[new Ue(h,i,`string expected, ${f} found`)]:[]}const th={promoteId:function({key:u,value:i}){if(vr(i)==="string")return Pa({key:u,value:i});{const h=[];for(const f in i)h.push(...Pa({key:`${u}.${f}`,value:i[f]}));return h}}};function qf(u){const i=u.value,h=u.key,f=u.styleSpec,v=u.style,w=u.validateSpec;if(!i.type)return[new Ue(h,i,'"type" is required')];const M=qi(i.type);let P;switch(M){case"vector":case"raster":return P=ea({key:h,value:i,valueSpec:f[`source_${M.replace("-","_")}`],style:u.style,styleSpec:f,objectElementValidators:th,validateSpec:w}),P;case"raster-dem":return P=function(z){var U;const W=(U=z.sourceName)!==null&&U!==void 0?U:"",et=z.value,lt=z.styleSpec,ct=lt.source_raster_dem,dt=z.style;let wt=[];const Et=vr(et);if(et===void 0)return wt;if(Et!=="object")return wt.push(new Ue("source_raster_dem",et,`object expected, ${Et} found`)),wt;const Vt=qi(et.encoding)==="custom",ce=["redFactor","greenFactor","blueFactor","baseShift"],qt=z.value.encoding?`"${z.value.encoding}"`:"Default";for(const st in et)!Vt&&ce.includes(st)?wt.push(new Ue(st,et[st],`In "${W}": "${st}" is only valid when "encoding" is set to "custom". ${qt} encoding found`)):ct[st]?wt=wt.concat(z.validateSpec({key:st,value:et[st],valueSpec:ct[st],validateSpec:z.validateSpec,style:dt,styleSpec:lt})):wt.push(new Ue(st,et[st],`unknown property "${st}"`));return wt}({sourceName:h,value:i,style:u.style,styleSpec:f,validateSpec:w}),P;case"geojson":if(P=ea({key:h,value:i,valueSpec:f.source_geojson,style:v,styleSpec:f,validateSpec:w,objectElementValidators:th}),i.cluster)for(const z in i.clusterProperties){const[U,W]=i.clusterProperties[z],et=typeof U=="string"?[U,["accumulated"],["get",z]]:U;P.push(...Bs({key:`${h}.${z}.map`,value:W,expressionContext:"cluster-map"})),P.push(...Bs({key:`${h}.${z}.reduce`,value:et,expressionContext:"cluster-reduce"}))}return P;case"video":return ea({key:h,value:i,valueSpec:f.source_video,style:v,validateSpec:w,styleSpec:f});case"image":return ea({key:h,value:i,valueSpec:f.source_image,style:v,validateSpec:w,styleSpec:f});case"canvas":return[new Ue(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ns({key:`${h}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function St(u){const i=u.value,h=u.styleSpec,f=h.light,v=u.style;let w=[];const M=vr(i);if(i===void 0)return w;if(M!=="object")return w=w.concat([new Ue("light",i,`object expected, ${M} found`)]),w;for(const P in i){const z=P.match(/^(.*)-transition$/);w=w.concat(z&&f[z[1]]&&f[z[1]].transition?u.validateSpec({key:P,value:i[P],valueSpec:h.transition,validateSpec:u.validateSpec,style:v,styleSpec:h}):f[P]?u.validateSpec({key:P,value:i[P],valueSpec:f[P],validateSpec:u.validateSpec,style:v,styleSpec:h}):[new Ue(P,i[P],`unknown property "${P}"`)])}return w}function gu(u){const i=u.value,h=u.styleSpec,f=h.sky,v=u.style,w=vr(i);if(i===void 0)return[];if(w!=="object")return[new Ue("sky",i,`object expected, ${w} found`)];let M=[];for(const P in i)M=M.concat(f[P]?u.validateSpec({key:P,value:i[P],valueSpec:f[P],style:v,styleSpec:h}):[new Ue(P,i[P],`unknown property "${P}"`)]);return M}function Fh(u){const i=u.value,h=u.styleSpec,f=h.terrain,v=u.style;let w=[];const M=vr(i);if(i===void 0)return w;if(M!=="object")return w=w.concat([new Ue("terrain",i,`object expected, ${M} found`)]),w;for(const P in i)w=w.concat(f[P]?u.validateSpec({key:P,value:i[P],valueSpec:f[P],validateSpec:u.validateSpec,style:v,styleSpec:h}):[new Ue(P,i[P],`unknown property "${P}"`)]);return w}function qa(u){let i=[];const h=u.value,f=u.key;if(Array.isArray(h)){const v=[],w=[];for(const M in h)h[M].id&&v.includes(h[M].id)&&i.push(new Ue(f,h,`all the sprites' ids must be unique, but ${h[M].id} is duplicated`)),v.push(h[M].id),h[M].url&&w.includes(h[M].url)&&i.push(new Ue(f,h,`all the sprites' URLs must be unique, but ${h[M].url} is duplicated`)),w.push(h[M].url),i=i.concat(ea({key:`${f}[${M}]`,value:h[M],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return i}return Pa({key:f,value:h})}const kr={"*":()=>[],array:zh,boolean:function(u){const i=u.value,h=u.key,f=vr(i);return f!=="boolean"?[new Ue(h,i,`boolean expected, ${f} found`)]:[]},number:Rc,color:function(u){const i=u.key,h=u.value,f=vr(h);return f!=="string"?[new Ue(i,h,`color expected, ${f} found`)]:Zt.parse(String(h))?[]:[new Ue(i,h,`color expected, "${h}" found`)]},constants:Hf,enum:Ns,filter:Dc,function:mu,layer:Wf,object:ea,source:qf,light:St,sky:gu,terrain:Fh,projection:function(u){const i=u.value,h=u.styleSpec,f=h.projection,v=u.style,w=vr(i);if(i===void 0)return[];if(w!=="object")return[new Ue("projection",i,`object expected, ${w} found`)];let M=[];for(const P in i)M=M.concat(f[P]?u.validateSpec({key:P,value:i[P],valueSpec:f[P],style:v,styleSpec:h}):[new Ue(P,i[P],`unknown property "${P}"`)]);return M},projectionDefinition:function(u){const i=u.key;let h=u.value;h=h instanceof String?h.valueOf():h;const f=vr(h);return f!=="array"||function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"}(h)||function(v){return!!["interpolate","step","literal"].includes(v[0])}(h)?["array","string"].includes(f)?[]:[new Ue(i,h,`projection expected, invalid type "${f}" found`)]:[new Ue(i,h,`projection expected, invalid array ${JSON.stringify(h)} found`)]},string:Pa,formatted:function(u){return Pa(u).length===0?[]:Bs(u)},resolvedImage:function(u){return Pa(u).length===0?[]:Bs(u)},padding:function(u){const i=u.key,h=u.value;if(vr(h)==="array"){if(h.length<1||h.length>4)return[new Ue(i,h,`padding requires 1 to 4 values; ${h.length} values found`)];const f={type:"number"};let v=[];for(let w=0;w<h.length;w++)v=v.concat(u.validateSpec({key:`${i}[${w}]`,value:h[w],validateSpec:u.validateSpec,valueSpec:f}));return v}return Rc({key:i,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(u){const i=u.key,h=u.value,f=vr(h),v=u.styleSpec;if(f!=="array"||h.length<1||h.length%2!=0)return[new Ue(i,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let M=0;M<h.length;M+=2)w=w.concat(Ns({key:`${i}[${M}]`,value:h[M],valueSpec:v.layout_symbol["text-anchor"]})),w=w.concat(zh({key:`${i}[${M+1}]`,value:h[M+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:v}));return w},sprite:qa};function Oc(u){const i=u.value,h=u.valueSpec,f=u.styleSpec;return u.validateSpec=Oc,h.expression&&Ea(qi(i))?mu(u):h.expression&&pa(ql(i))?Bs(u):h.type&&kr[h.type]?kr[h.type](u):ea($n({},u,{valueSpec:h.type?f[h.type]:h}))}function ka(u){const i=u.value,h=u.key,f=Pa(u);return f.length||(i.indexOf("{fontstack}")===-1&&f.push(new Ue(h,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&f.push(new Ue(h,i,'"glyphs" url must include a "{range}" token'))),f}function ma(u,i=_t){let h=[];return h=h.concat(Oc({key:"",value:u,valueSpec:i.$root,styleSpec:i,style:u,validateSpec:Oc,objectElementValidators:{glyphs:ka,"*":()=>[]}})),u.constants&&(h=h.concat(Hf({key:"constants",value:u.constants}))),Jp(h)}function Zo(u){return function(i){return u({...i,validateSpec:Oc})}}function Jp(u){return[].concat(u).sort((i,h)=>i.line-h.line)}function hl(u){return function(...i){return Jp(u.apply(this,i))}}ma.source=hl(Zo(qf)),ma.sprite=hl(Zo(qa)),ma.glyphs=hl(Zo(ka)),ma.light=hl(Zo(St)),ma.sky=hl(Zo(gu)),ma.terrain=hl(Zo(Fh)),ma.layer=hl(Zo(Wf)),ma.filter=hl(Zo(Dc)),ma.paintProperty=hl(Zo(Qp)),ma.layoutProperty=hl(Zo(Zf));const dl=ma,tm=dl.light,Kf=dl.sky,Kl=dl.paintProperty,Yf=dl.layoutProperty;function em(u,i){let h=!1;if(i&&i.length)for(const f of i)u.fire(new Ct(new Error(f.message))),h=!0;return h}class Yl{constructor(i,h,f){const v=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const M=new Int32Array(this.arrayBuffer);i=M[0],this.d=(h=M[1])+2*(f=M[2]);for(let z=0;z<this.d*this.d;z++){const U=M[3+z],W=M[3+z+1];v.push(U===W?null:M.subarray(U,W))}const P=M[3+v.length+1];this.keys=M.subarray(M[3+v.length],P),this.bboxes=M.subarray(P),this.insert=this._insertReadonly}else{this.d=h+2*f;for(let M=0;M<this.d*this.d;M++)v.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=i,this.padding=f,this.scale=h/i,this.uid=0;const w=f/h*i;this.min=-w,this.max=i+w}insert(i,h,f,v,w){this._forEachCell(h,f,v,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,h,f,v,w,M){this.cells[w].push(M)}query(i,h,f,v,w){const M=this.min,P=this.max;if(i<=M&&h<=M&&P<=f&&P<=v&&!w)return Array.prototype.slice.call(this.keys);{const z=[];return this._forEachCell(i,h,f,v,this._queryCell,z,{},w),z}}_queryCell(i,h,f,v,w,M,P,z){const U=this.cells[w];if(U!==null){const W=this.keys,et=this.bboxes;for(let lt=0;lt<U.length;lt++){const ct=U[lt];if(P[ct]===void 0){const dt=4*ct;(z?z(et[dt+0],et[dt+1],et[dt+2],et[dt+3]):i<=et[dt+2]&&h<=et[dt+3]&&f>=et[dt+0]&&v>=et[dt+1])?(P[ct]=!0,M.push(W[ct])):P[ct]=!1}}}}_forEachCell(i,h,f,v,w,M,P,z){const U=this._convertToCellCoord(i),W=this._convertToCellCoord(h),et=this._convertToCellCoord(f),lt=this._convertToCellCoord(v);for(let ct=U;ct<=et;ct++)for(let dt=W;dt<=lt;dt++){const wt=this.d*dt+ct;if((!z||z(this._convertFromCellCoord(ct),this._convertFromCellCoord(dt),this._convertFromCellCoord(ct+1),this._convertFromCellCoord(dt+1)))&&w.call(this,i,h,f,v,wt,M,P,z))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,h=3+this.cells.length+1+1;let f=0;for(let M=0;M<this.cells.length;M++)f+=this.cells[M].length;const v=new Int32Array(h+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let w=h;for(let M=0;M<i.length;M++){const P=i[M];v[3+M]=w,v.set(P,w),w+=P.length}return v[3+i.length]=w,v.set(this.keys,w),w+=this.keys.length,v[3+i.length+1]=w,v.set(this.bboxes,w),w+=this.bboxes.length,v.buffer}static serialize(i,h){const f=i.toArrayBuffer();return h&&h.push(f),{buffer:f}}static deserialize(i){return new Yl(i.buffer)}}const Xl={};function On(u,i,h={}){if(Xl[u])throw new Error(`${u} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:u,writeable:!1}),Xl[u]={klass:i,omit:h.omit||[],shallow:h.shallow||[]}}On("Object",Object),On("TransferableGridIndex",Yl),On("Color",Zt),On("Error",Error),On("AJAXError",Te),On("ResolvedImage",Zr),On("StylePropertyFunction",Md),On("StyleExpression",Lc,{omit:["_evaluator"]}),On("ZoomDependentExpression",Ta),On("ZoomConstantExpression",cl),On("CompoundExpression",xr,{omit:["_evaluate"]});for(const u in br)br[u]._classRegistryKey||On(`Expression_${u}`,br[u]);function fl(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Xf(u){return u.$name||u.constructor._classRegistryKey}function Bh(u){return!function(i){if(i===null||typeof i!="object")return!1;const h=Xf(i);return!(!h||h==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||fl(u)||yt(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function Nh(u,i){if(Bh(u))return(fl(u)||yt(u))&&i&&i.push(u),ArrayBuffer.isView(u)&&i&&i.push(u.buffer),u instanceof ImageData&&i&&i.push(u.data.buffer),u;if(Array.isArray(u)){const w=[];for(const M of u)w.push(Nh(M,i));return w}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);const h=Xf(u);if(!h)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!Xl[h])throw new Error(`${h} is not registered.`);const{klass:f}=Xl[h],v=f.serialize?f.serialize(u,i):{};if(f.serialize){if(i&&v===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in u){if(!u.hasOwnProperty(w)||Xl[h].omit.indexOf(w)>=0)continue;const M=u[w];v[w]=Xl[h].shallow.indexOf(w)>=0?M:Nh(M,i)}u instanceof Error&&(v.message=u.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(v.$name=h),v}function yu(u){if(Bh(u))return u;if(Array.isArray(u))return u.map(yu);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);const i=Xf(u)||"Object";if(!Xl[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:h}=Xl[i];if(!h)throw new Error(`can't deserialize unregistered class ${i}`);if(h.deserialize)return h.deserialize(u);const f=Object.create(h.prototype);for(const v of Object.keys(u)){if(v==="$name")continue;const w=u[v];f[v]=Xl[i].shallow.indexOf(v)>=0?w:yu(w)}return f}class jh{constructor(){this.first=!0}update(i,h){const f=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=h),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=f,!0))}}const Ar={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Hangul Syllables":u=>u>=44032&&u<=55215,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function kd(u){for(const i of u)if(Ld(i.charCodeAt(0)))return!0;return!1}function nm(u){for(const i of u)if(!rm(i.charCodeAt(0)))return!1;return!0}function La(u){const i=u.map(h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}}).filter(h=>h);return new RegExp(i.join("|"),"u")}const Qf=La(["Arab","Dupl","Mong","Ougr","Syrc"]);function rm(u){return!Qf.test(String.fromCodePoint(u))}const im=La(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ld(u){return!(u!==746&&u!==747&&(u<4352||!(Ar["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Ar["CJK Compatibility"](u)||Ar["CJK Strokes"](u)||!(!Ar["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Ar["Enclosed CJK Letters and Months"](u)||Ar["Ideographic Description Characters"](u)||Ar.Kanbun(u)||Ar.Katakana(u)&&u!==12540||!(!Ar["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Ar["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Ar["Vertical Forms"](u)||Ar["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||im.test(String.fromCodePoint(u)))))}function om(u){return!(Ld(u)||function(i){return!!(Ar["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Ar["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Ar["Letterlike Symbols"](i)||Ar["Number Forms"](i)||Ar["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Ar["Control Pictures"](i)&&i!==9251||Ar["Optical Character Recognition"](i)||Ar["Enclosed Alphanumerics"](i)||Ar["Geometric Shapes"](i)||Ar["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Ar["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Ar["CJK Symbols and Punctuation"](i)||Ar.Katakana(i)||Ar["Private Use Area"](i)||Ar["CJK Compatibility Forms"](i)||Ar["Small Form Variants"](i)||Ar["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(u))}const Jf=La(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Rd(u){return Jf.test(String.fromCodePoint(u))}function am(u,i){return!(!i&&Rd(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Ar.Khmer(u))}function jg(u){for(const i of u)if(Rd(i.charCodeAt(0)))return!0;return!1}const pl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){if(pl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(u,i){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(u.pluginStatus!=="loading")return this.setState(u),u;const h=u.pluginURL,f=new Promise(w=>{this.loadScriptResolve=w});i(h);const v=new Promise(w=>setTimeout(()=>w(),this.TIMEOUT));if(yield Promise.race([f,v]),this.isParsed()){const w={pluginStatus:"loaded",pluginURL:h};return this.setState(w),w}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${h}`)})}};class li{constructor(i,h){this.zoom=i,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new jh,this.transition={})}isSupportedScript(i){return function(h,f){for(const v of h)if(!am(v.charCodeAt(0),f))return!1;return!0}(i,pl.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,h=i-Math.floor(i),f=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*h}}}class zc{constructor(i,h){this.property=i,this.value=h,this.expression=function(f,v){if(Ea(f))return new Md(f,v);if(pa(f)){const w=ul(f,v);if(w.result==="error")throw new Error(w.value.map(M=>`${M.key}: ${M.message}`).join(", "));return w.value}{let w=f;return v.type==="color"&&typeof f=="string"?w=Zt.parse(f):v.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(f)?w=Kn.parse(f):v.type==="projectionDefinition"&&typeof f=="string"&&(w=or.parse(f)):w=An.parse(f),{kind:"constant",evaluate:()=>w}}}(h===void 0?i.specification.default:h,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,h,f){return this.property.possiblyEvaluate(this,i,h,f)}}class Dd{constructor(i){this.property=i,this.value=new zc(i,void 0)}transitioned(i,h){return new Vh(this.property,this.value,h,be({},i.transition,this.transition),i.now)}untransitioned(){return new Vh(this.property,this.value,null,{},0)}}class Od{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return tn(this._values[i].value.value)}setValue(i,h){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Dd(this._values[i].property)),this._values[i].value=new zc(this._values[i].property,h===null?void 0:tn(h))}getTransition(i){return tn(this._values[i].transition)}setTransition(i,h){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Dd(this._values[i].property)),this._values[i].transition=tn(h)||void 0}serialize(){const i={};for(const h of Object.keys(this._values)){const f=this.getValue(h);f!==void 0&&(i[h]=f);const v=this.getTransition(h);v!==void 0&&(i[`${h}-transition`]=v)}return i}transitioned(i,h){const f=new ml(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(i,h._values[v]);return f}untransitioned(){const i=new ml(this._properties);for(const h of Object.keys(this._values))i._values[h]=this._values[h].untransitioned();return i}}class Vh{constructor(i,h,f,v,w){this.property=i,this.value=h,this.begin=w+v.delay||0,this.end=this.begin+v.duration||0,i.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(i,h,f){const v=i.now||0,w=this.value.possiblyEvaluate(i,h,f),M=this.prior;if(M){if(v>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(v<this.begin)return M.possiblyEvaluate(i,h,f);{const P=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(i,h,f),w,Gt(P))}}return w}}class ml{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,h,f){const v=new ga(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(i,h,f);return v}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Uh{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return tn(this._values[i].value)}setValue(i,h){this._values[i]=new zc(this._values[i].property,h===null?void 0:tn(h))}serialize(){const i={};for(const h of Object.keys(this._values)){const f=this.getValue(h);f!==void 0&&(i[h]=f)}return i}possiblyEvaluate(i,h,f){const v=new ga(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(i,h,f);return v}}class na{constructor(i,h,f){this.property=i,this.value=h,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,h,f,v){return this.property.evaluate(this.value,this.parameters,i,h,f,v)}}class ga{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Yn{constructor(i){this.specification=i}possiblyEvaluate(i,h){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(h)}interpolate(i,h,f){const v=Br[this.specification.type];return v?v(i,h,f):i}}class lr{constructor(i,h){this.specification=i,this.overrides=h}possiblyEvaluate(i,h,f,v){return new na(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(h,null,{},f,v)}:i.expression,h)}interpolate(i,h,f){if(i.value.kind!=="constant"||h.value.kind!=="constant")return i;if(i.value.value===void 0||h.value.value===void 0)return new na(this,{kind:"constant",value:void 0},i.parameters);const v=Br[this.specification.type];if(v){const w=v(i.value.value,h.value.value,f);return new na(this,{kind:"constant",value:w},i.parameters)}return i}evaluate(i,h,f,v,w,M){return i.kind==="constant"?i.value:i.evaluate(h,f,v,w,M)}}class eh extends lr{possiblyEvaluate(i,h,f,v){if(i.value===void 0)return new na(this,{kind:"constant",value:void 0},h);if(i.expression.kind==="constant"){const w=i.expression.evaluate(h,null,{},f,v),M=i.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,P=this._calculate(M,M,M,h);return new na(this,{kind:"constant",value:P},h)}if(i.expression.kind==="camera"){const w=this._calculate(i.expression.evaluate({zoom:h.zoom-1}),i.expression.evaluate({zoom:h.zoom}),i.expression.evaluate({zoom:h.zoom+1}),h);return new na(this,{kind:"constant",value:w},h)}return new na(this,i.expression,h)}evaluate(i,h,f,v,w,M){if(i.kind==="source"){const P=i.evaluate(h,f,v,w,M);return this._calculate(P,P,P,h)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(h.zoom)-1},f,v),i.evaluate({zoom:Math.floor(h.zoom)},f,v),i.evaluate({zoom:Math.floor(h.zoom)+1},f,v),h):i.value}_calculate(i,h,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:i,to:h}:{from:f,to:h}}interpolate(i){return i}}class vu{constructor(i){this.specification=i}possiblyEvaluate(i,h,f,v){if(i.value!==void 0){if(i.expression.kind==="constant"){const w=i.expression.evaluate(h,null,{},f,v);return this._calculate(w,w,w,h)}return this._calculate(i.expression.evaluate(new li(Math.floor(h.zoom-1),h)),i.expression.evaluate(new li(Math.floor(h.zoom),h)),i.expression.evaluate(new li(Math.floor(h.zoom+1),h)),h)}}_calculate(i,h,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:i,to:h}:{from:f,to:h}}interpolate(i){return i}}class gl{constructor(i){this.specification=i}possiblyEvaluate(i,h,f,v){return!!i.expression.evaluate(h,null,{},f,v)}interpolate(){return!1}}class ya{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in i){const f=i[h];f.specification.overridable&&this.overridableProperties.push(h);const v=this.defaultPropertyValues[h]=new zc(f,void 0),w=this.defaultTransitionablePropertyValues[h]=new Dd(f);this.defaultTransitioningPropertyValues[h]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=v.possiblyEvaluate({})}}}On("DataDrivenProperty",lr),On("DataConstantProperty",Yn),On("CrossFadedDataDrivenProperty",eh),On("CrossFadedProperty",vu),On("ColorRampProperty",gl);const sm="-transition";class Ka extends kt{constructor(i,h){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),h.layout&&(this._unevaluatedLayout=new Uh(h.layout)),h.paint)){this._transitionablePaint=new Od(h.paint);for(const f in i.paint)this.setPaintProperty(f,i.paint[f],{validate:!1});for(const f in i.layout)this.setLayoutProperty(f,i.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ga(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,h,f={}){h!=null&&this._validate(Yf,`layers.${this.id}.layout.${i}`,i,h,f)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,h):this.visibility=h)}getPaintProperty(i){return i.endsWith(sm)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,h,f={}){if(h!=null&&this._validate(Kl,`layers.${this.id}.paint.${i}`,i,h,f))return!1;if(i.endsWith(sm))return this._transitionablePaint.setTransition(i.slice(0,-11),h||void 0),!1;{const v=this._transitionablePaint._values[i],w=v.property.specification["property-type"]==="cross-faded-data-driven",M=v.value.isDataDriven(),P=v.value;this._transitionablePaint.setValue(i,h),this._handleSpecialPaintPropertyUpdate(i);const z=this._transitionablePaint._values[i].value;return z.isDataDriven()||M||w||this._handleOverridablePaintPropertyUpdate(i,P,z)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,h,f){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,h){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,h)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Be(i,(h,f)=>!(h===void 0||f==="layout"&&!Object.keys(h).length||f==="paint"&&!Object.keys(h).length))}_validate(i,h,f,v,w={}){return(!w||w.validate!==!1)&&em(this,i.call(dl,{key:h,layerType:this.type,objectKey:f,value:v,styleSpec:_t,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const h=this.paint.get(i);if(h instanceof na&&Os(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const nh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class rh{constructor(i,h){this._structArray=i,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Nr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,h){return i._trim(),h&&(i.isTransferred=!0,h.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const h=Object.create(this.prototype);return h.arrayBuffer=i.arrayBuffer,h.length=i.length,h.capacity=i.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Vi(u,i=1){let h=0,f=0;return{members:u.map(v=>{const w=nh[v.type].BYTES_PER_ELEMENT,M=h=zd(h,Math.max(i,w)),P=v.components||1;return f=Math.max(f,w),h+=w*P,{name:v.name,type:v.type,components:P,offset:M}}),size:zd(h,Math.max(f,i)),alignment:i}}function zd(u,i){return Math.ceil(u/i)*i}class Ra extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h){const f=this.length;return this.resize(f+1),this.emplace(f,i,h)}emplace(i,h,f){const v=2*i;return this.int16[v+0]=h,this.int16[v+1]=f,i}}Ra.prototype.bytesPerElement=4,On("StructArrayLayout2i4",Ra);class ih extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,h,f)}emplace(i,h,f,v){const w=3*i;return this.int16[w+0]=h,this.int16[w+1]=f,this.int16[w+2]=v,i}}ih.prototype.bytesPerElement=6,On("StructArrayLayout3i6",ih);class gs extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,i,h,f,v)}emplace(i,h,f,v,w){const M=4*i;return this.int16[M+0]=h,this.int16[M+1]=f,this.int16[M+2]=v,this.int16[M+3]=w,i}}gs.prototype.bytesPerElement=8,On("StructArrayLayout4i8",gs);class yl extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M){const P=this.length;return this.resize(P+1),this.emplace(P,i,h,f,v,w,M)}emplace(i,h,f,v,w,M,P){const z=6*i;return this.int16[z+0]=h,this.int16[z+1]=f,this.int16[z+2]=v,this.int16[z+3]=w,this.int16[z+4]=M,this.int16[z+5]=P,i}}yl.prototype.bytesPerElement=12,On("StructArrayLayout2i4i12",yl);class oh extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M){const P=this.length;return this.resize(P+1),this.emplace(P,i,h,f,v,w,M)}emplace(i,h,f,v,w,M,P){const z=4*i,U=8*i;return this.int16[z+0]=h,this.int16[z+1]=f,this.uint8[U+4]=v,this.uint8[U+5]=w,this.uint8[U+6]=M,this.uint8[U+7]=P,i}}oh.prototype.bytesPerElement=8,On("StructArrayLayout2i4ub8",oh);class io extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,h){const f=this.length;return this.resize(f+1),this.emplace(f,i,h)}emplace(i,h,f){const v=2*i;return this.float32[v+0]=h,this.float32[v+1]=f,i}}io.prototype.bytesPerElement=8,On("StructArrayLayout2f8",io);class _u extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M,P,z,U,W){const et=this.length;return this.resize(et+1),this.emplace(et,i,h,f,v,w,M,P,z,U,W)}emplace(i,h,f,v,w,M,P,z,U,W,et){const lt=10*i;return this.uint16[lt+0]=h,this.uint16[lt+1]=f,this.uint16[lt+2]=v,this.uint16[lt+3]=w,this.uint16[lt+4]=M,this.uint16[lt+5]=P,this.uint16[lt+6]=z,this.uint16[lt+7]=U,this.uint16[lt+8]=W,this.uint16[lt+9]=et,i}}_u.prototype.bytesPerElement=20,On("StructArrayLayout10ui20",_u);class tp extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M,P,z,U,W,et,lt){const ct=this.length;return this.resize(ct+1),this.emplace(ct,i,h,f,v,w,M,P,z,U,W,et,lt)}emplace(i,h,f,v,w,M,P,z,U,W,et,lt,ct){const dt=12*i;return this.int16[dt+0]=h,this.int16[dt+1]=f,this.int16[dt+2]=v,this.int16[dt+3]=w,this.uint16[dt+4]=M,this.uint16[dt+5]=P,this.uint16[dt+6]=z,this.uint16[dt+7]=U,this.int16[dt+8]=W,this.int16[dt+9]=et,this.int16[dt+10]=lt,this.int16[dt+11]=ct,i}}tp.prototype.bytesPerElement=24,On("StructArrayLayout4i4ui4i24",tp);class ah extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,h,f)}emplace(i,h,f,v){const w=3*i;return this.float32[w+0]=h,this.float32[w+1]=f,this.float32[w+2]=v,i}}ah.prototype.bytesPerElement=12,On("StructArrayLayout3f12",ah);class bu extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const h=this.length;return this.resize(h+1),this.emplace(h,i)}emplace(i,h){return this.uint32[1*i+0]=h,i}}bu.prototype.bytesPerElement=4,On("StructArrayLayout1ul4",bu);class Hh extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M,P,z,U){const W=this.length;return this.resize(W+1),this.emplace(W,i,h,f,v,w,M,P,z,U)}emplace(i,h,f,v,w,M,P,z,U,W){const et=10*i,lt=5*i;return this.int16[et+0]=h,this.int16[et+1]=f,this.int16[et+2]=v,this.int16[et+3]=w,this.int16[et+4]=M,this.int16[et+5]=P,this.uint32[lt+3]=z,this.uint16[et+8]=U,this.uint16[et+9]=W,i}}Hh.prototype.bytesPerElement=20,On("StructArrayLayout6i1ul2ui20",Hh);class Fd extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M){const P=this.length;return this.resize(P+1),this.emplace(P,i,h,f,v,w,M)}emplace(i,h,f,v,w,M,P){const z=6*i;return this.int16[z+0]=h,this.int16[z+1]=f,this.int16[z+2]=v,this.int16[z+3]=w,this.int16[z+4]=M,this.int16[z+5]=P,i}}Fd.prototype.bytesPerElement=12,On("StructArrayLayout2i2i2i12",Fd);class js extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w){const M=this.length;return this.resize(M+1),this.emplace(M,i,h,f,v,w)}emplace(i,h,f,v,w,M){const P=4*i,z=8*i;return this.float32[P+0]=h,this.float32[P+1]=f,this.float32[P+2]=v,this.int16[z+6]=w,this.int16[z+7]=M,i}}js.prototype.bytesPerElement=16,On("StructArrayLayout2f1f2i16",js);class Bd extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M){const P=this.length;return this.resize(P+1),this.emplace(P,i,h,f,v,w,M)}emplace(i,h,f,v,w,M,P){const z=16*i,U=4*i,W=8*i;return this.uint8[z+0]=h,this.uint8[z+1]=f,this.float32[U+1]=v,this.float32[U+2]=w,this.int16[W+6]=M,this.int16[W+7]=P,i}}Bd.prototype.bytesPerElement=16,On("StructArrayLayout2ub2f2i16",Bd);class Nd extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,h,f)}emplace(i,h,f,v){const w=3*i;return this.uint16[w+0]=h,this.uint16[w+1]=f,this.uint16[w+2]=v,i}}Nd.prototype.bytesPerElement=6,On("StructArrayLayout3ui6",Nd);class jd extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M,P,z,U,W,et,lt,ct,dt,wt,Et,Vt){const ce=this.length;return this.resize(ce+1),this.emplace(ce,i,h,f,v,w,M,P,z,U,W,et,lt,ct,dt,wt,Et,Vt)}emplace(i,h,f,v,w,M,P,z,U,W,et,lt,ct,dt,wt,Et,Vt,ce){const qt=24*i,st=12*i,It=48*i;return this.int16[qt+0]=h,this.int16[qt+1]=f,this.uint16[qt+2]=v,this.uint16[qt+3]=w,this.uint32[st+2]=M,this.uint32[st+3]=P,this.uint32[st+4]=z,this.uint16[qt+10]=U,this.uint16[qt+11]=W,this.uint16[qt+12]=et,this.float32[st+7]=lt,this.float32[st+8]=ct,this.uint8[It+36]=dt,this.uint8[It+37]=wt,this.uint8[It+38]=Et,this.uint32[st+10]=Vt,this.int16[qt+22]=ce,i}}jd.prototype.bytesPerElement=48,On("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",jd);class xu extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,h,f,v,w,M,P,z,U,W,et,lt,ct,dt,wt,Et,Vt,ce,qt,st,It,Yt,Oe,sn,Ne,He,pn,ln){const vn=this.length;return this.resize(vn+1),this.emplace(vn,i,h,f,v,w,M,P,z,U,W,et,lt,ct,dt,wt,Et,Vt,ce,qt,st,It,Yt,Oe,sn,Ne,He,pn,ln)}emplace(i,h,f,v,w,M,P,z,U,W,et,lt,ct,dt,wt,Et,Vt,ce,qt,st,It,Yt,Oe,sn,Ne,He,pn,ln,vn){const Xe=32*i,jn=16*i;return this.int16[Xe+0]=h,this.int16[Xe+1]=f,this.int16[Xe+2]=v,this.int16[Xe+3]=w,this.int16[Xe+4]=M,this.int16[Xe+5]=P,this.int16[Xe+6]=z,this.int16[Xe+7]=U,this.uint16[Xe+8]=W,this.uint16[Xe+9]=et,this.uint16[Xe+10]=lt,this.uint16[Xe+11]=ct,this.uint16[Xe+12]=dt,this.uint16[Xe+13]=wt,this.uint16[Xe+14]=Et,this.uint16[Xe+15]=Vt,this.uint16[Xe+16]=ce,this.uint16[Xe+17]=qt,this.uint16[Xe+18]=st,this.uint16[Xe+19]=It,this.uint16[Xe+20]=Yt,this.uint16[Xe+21]=Oe,this.uint16[Xe+22]=sn,this.uint32[jn+12]=Ne,this.float32[jn+13]=He,this.float32[jn+14]=pn,this.uint16[Xe+30]=ln,this.uint16[Xe+31]=vn,i}}xu.prototype.bytesPerElement=64,On("StructArrayLayout8i15ui1ul2f2ui64",xu);class b extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const h=this.length;return this.resize(h+1),this.emplace(h,i)}emplace(i,h){return this.float32[1*i+0]=h,i}}b.prototype.bytesPerElement=4,On("StructArrayLayout1f4",b);class r extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,h,f)}emplace(i,h,f,v){const w=3*i;return this.uint16[6*i+0]=h,this.float32[w+1]=f,this.float32[w+2]=v,i}}r.prototype.bytesPerElement=12,On("StructArrayLayout1ui2f12",r);class c extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,h,f)}emplace(i,h,f,v){const w=4*i;return this.uint32[2*i+0]=h,this.uint16[w+2]=f,this.uint16[w+3]=v,i}}c.prototype.bytesPerElement=8,On("StructArrayLayout1ul2ui8",c);class p extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,h){const f=this.length;return this.resize(f+1),this.emplace(f,i,h)}emplace(i,h,f){const v=2*i;return this.uint16[v+0]=h,this.uint16[v+1]=f,i}}p.prototype.bytesPerElement=4,On("StructArrayLayout2ui4",p);class y extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const h=this.length;return this.resize(h+1),this.emplace(h,i)}emplace(i,h){return this.uint16[1*i+0]=h,i}}y.prototype.bytesPerElement=2,On("StructArrayLayout1ui2",y);class A extends Nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,h,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,i,h,f,v)}emplace(i,h,f,v,w){const M=4*i;return this.float32[M+0]=h,this.float32[M+1]=f,this.float32[M+2]=v,this.float32[M+3]=w,i}}A.prototype.bytesPerElement=16,On("StructArrayLayout4f16",A);class T extends rh{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}T.prototype.size=20;class L extends Hh{get(i){return new T(this,i)}}On("CollisionBoxArray",L);class N extends rh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}N.prototype.size=48;class $ extends jd{get(i){return new N(this,i)}}On("PlacedSymbolArray",$);class J extends rh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}J.prototype.size=64;class it extends xu{get(i){return new J(this,i)}}On("SymbolInstanceArray",it);class ot extends b{getoffsetX(i){return this.float32[1*i+0]}}On("GlyphOffsetArray",ot);class ft extends ih{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}On("SymbolLineVertexArray",ft);class bt extends rh{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}bt.prototype.size=12;class Ft extends r{get(i){return new bt(this,i)}}On("TextAnchorOffsetArray",Ft);class Ot extends rh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ot.prototype.size=8;class jt extends c{get(i){return new Ot(this,i)}}On("FeatureIndexArray",jt);class Wt extends Ra{}class Jt extends Ra{}class re extends Ra{}class se extends yl{}class fe extends oh{}class le extends io{}class ke extends _u{}class De extends tp{}class Ee extends ah{}class Qe extends bu{}class $e extends Fd{}class In extends Bd{}class yn extends Nd{}class an extends p{}const qn=Vi([{name:"a_pos",components:2,type:"Int16"}],4),{members:fr}=qn;class pr{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,h,f,v){const w=this.segments[this.segments.length-1];return i>pr.MAX_VERTEX_ARRAY_LENGTH&&Tt(`Max vertices per segment is ${pr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${pr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!w||w.vertexLength+i>pr.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==v?this.createNewSegment(h,f,v):w}createNewSegment(i,h,f){const v={vertexOffset:i.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(v.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(i,h,f){return this.prepareSegment(0,i,h,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const i of this.segments)for(const h in i.vaos)i.vaos[h].destroy()}static simpleSegment(i,h,f,v){return new pr([{vertexOffset:i,primitiveOffset:h,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function vi(u,i){return 256*(u=Ce(Math.floor(u),0,255))+Ce(Math.floor(i),0,255)}pr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,On("SegmentVector",pr);const ti=Vi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ci,Ai,Sr,jr={exports:{}},oo={exports:{}},ao={exports:{}},so=function(){if(Sr)return jr.exports;Sr=1;var u=(Ci||(Ci=1,oo.exports=function(h,f){var v,w,M,P,z,U,W,et;for(w=h.length-(v=3&h.length),M=f,z=3432918353,U=461845907,et=0;et<w;)W=255&h.charCodeAt(et)|(255&h.charCodeAt(++et))<<8|(255&h.charCodeAt(++et))<<16|(255&h.charCodeAt(++et))<<24,++et,M=27492+(65535&(P=5*(65535&(M=(M^=W=(65535&(W=(W=(65535&W)*z+(((W>>>16)*z&65535)<<16)&4294967295)<<15|W>>>17))*U+(((W>>>16)*U&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(P>>>16)&65535)<<16);switch(W=0,v){case 3:W^=(255&h.charCodeAt(et+2))<<16;case 2:W^=(255&h.charCodeAt(et+1))<<8;case 1:M^=W=(65535&(W=(W=(65535&(W^=255&h.charCodeAt(et)))*z+(((W>>>16)*z&65535)<<16)&4294967295)<<15|W>>>17))*U+(((W>>>16)*U&65535)<<16)&4294967295}return M^=h.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0}),oo.exports),i=(Ai||(Ai=1,ao.exports=function(h,f){for(var v,w=h.length,M=f^w,P=0;w>=4;)v=1540483477*(65535&(v=255&h.charCodeAt(P)|(255&h.charCodeAt(++P))<<8|(255&h.charCodeAt(++P))<<16|(255&h.charCodeAt(++P))<<24))+((1540483477*(v>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),w-=4,++P;switch(w){case 3:M^=(255&h.charCodeAt(P+2))<<16;case 2:M^=(255&h.charCodeAt(P+1))<<8;case 1:M=1540483477*(65535&(M^=255&h.charCodeAt(P)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0}),ao.exports);return jr.exports=u,jr.exports.murmur3=u,jr.exports.murmur2=i,jr.exports}(),Wo=g(so);class ys{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,h,f,v){this.ids.push(Ql(i)),this.positions.push(h,f,v)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=Ql(i);let f=0,v=this.ids.length-1;for(;f<v;){const M=f+v>>1;this.ids[M]>=h?v=M:f=M+1}const w=[];for(;this.ids[f]===h;)w.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return w}static serialize(i,h){const f=new Float64Array(i.ids),v=new Uint32Array(i.positions);return Vs(f,v,0,f.length-1),h&&h.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(i){const h=new ys;return h.ids=i.ids,h.positions=i.positions,h.indexed=!0,h}}function Ql(u){const i=+u;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Wo(String(u))}function Vs(u,i,h,f){for(;h<f;){const v=u[h+f>>1];let w=h-1,M=f+1;for(;;){do w++;while(u[w]<v);do M--;while(u[M]>v);if(w>=M)break;Us(u,w,M),Us(i,3*w,3*M),Us(i,3*w+1,3*M+1),Us(i,3*w+2,3*M+2)}M-h<f-M?(Vs(u,i,h,M),h=M+1):(Vs(u,i,M+1,f),f=M)}}function Us(u,i,h){const f=u[i];u[i]=u[h],u[h]=f}On("FeaturePositionMap",ys);class qo{constructor(i,h){this.gl=i.gl,this.location=h}}class Au extends qo{constructor(i,h){super(i,h),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Da extends qo{constructor(i,h){super(i,h),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class Oa extends qo{constructor(i,h){super(i,h),this.current=Zt.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const Jl=new Float32Array(16);function Hs(u){return[vi(255*u.r,255*u.g),vi(255*u.b,255*u.a)]}class tc{constructor(i,h,f){this.value=i,this.uniformNames=h.map(v=>`u_${v}`),this.type=f}setUniform(i,h,f){i.set(f.constantOr(this.value))}getBinding(i,h,f){return this.type==="color"?new Oa(i,h):new Au(i,h)}}class Bi{constructor(i,h){this.uniformNames=h.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=i.tlbr}setUniform(i,h,f,v){const w=v==="u_pattern_to"?this.patternTo:v==="u_pattern_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&i.set(w)}getBinding(i,h,f){return f.substr(0,9)==="u_pattern"?new Da(i,h):new Au(i,h)}}class Ii{constructor(i,h,f,v){this.expression=i,this.type=f,this.maxValue=0,this.paintVertexAttributes=h.map(w=>({name:`a_${w}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(i,h,f,v,w){const M=this.paintVertexArray.length,P=this.expression.evaluate(new li(0),h,{},v,[],w);this.paintVertexArray.resize(i),this._setPaintValue(M,i,P)}updatePaintArray(i,h,f,v){const w=this.expression.evaluate({zoom:0},f,v);this._setPaintValue(i,h,w)}_setPaintValue(i,h,f){if(this.type==="color"){const v=Hs(f);for(let w=i;w<h;w++)this.paintVertexArray.emplace(w,v[0],v[1])}else{for(let v=i;v<h;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ui{constructor(i,h,f,v,w,M){this.expression=i,this.uniformNames=h.map(P=>`u_${P}_t`),this.type=f,this.useIntegerZoom=v,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=h.map(P=>({name:`a_${P}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new M}populatePaintArray(i,h,f,v,w){const M=this.expression.evaluate(new li(this.zoom),h,{},v,[],w),P=this.expression.evaluate(new li(this.zoom+1),h,{},v,[],w),z=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(z,i,M,P)}updatePaintArray(i,h,f,v){const w=this.expression.evaluate({zoom:this.zoom},f,v),M=this.expression.evaluate({zoom:this.zoom+1},f,v);this._setPaintValue(i,h,w,M)}_setPaintValue(i,h,f,v){if(this.type==="color"){const w=Hs(f),M=Hs(v);for(let P=i;P<h;P++)this.paintVertexArray.emplace(P,w[0],w[1],M[0],M[1])}else{for(let w=i;w<h;w++)this.paintVertexArray.emplace(w,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,h){const f=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,v=Ce(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);i.set(v)}getBinding(i,h,f){return new Au(i,h)}}class Mi{constructor(i,h,f,v,w,M){this.expression=i,this.type=h,this.useIntegerZoom=f,this.zoom=v,this.layerId=M,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(i,h,f){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(v,i,h.patterns&&h.patterns[this.layerId],f)}updatePaintArray(i,h,f,v,w){this._setPaintValues(i,h,f.patterns&&f.patterns[this.layerId],w)}_setPaintValues(i,h,f,v){if(!v||!f)return;const{min:w,mid:M,max:P}=f,z=v[w],U=v[M],W=v[P];if(z&&U&&W)for(let et=i;et<h;et++)this.zoomInPaintVertexArray.emplace(et,U.tl[0],U.tl[1],U.br[0],U.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],U.pixelRatio,z.pixelRatio),this.zoomOutPaintVertexArray.emplace(et,U.tl[0],U.tl[1],U.br[0],U.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],U.pixelRatio,W.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,ti.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,ti.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class lm{constructor(i,h,f){this.binders={},this._buffers=[];const v=[];for(const w in i.paint._values){if(!f(w))continue;const M=i.paint.get(w);if(!(M instanceof na&&Os(M.property.specification)))continue;const P=cm(w,i.type),z=M.value,U=M.property.specification.type,W=M.property.useIntegerZoom,et=M.property.specification["property-type"],lt=et==="cross-faded"||et==="cross-faded-data-driven";if(z.kind==="constant")this.binders[w]=lt?new Bi(z.value,P):new tc(z.value,P,U),v.push(`/u_${w}`);else if(z.kind==="source"||lt){const ct=va(w,U,"source");this.binders[w]=lt?new Mi(z,U,W,h,ct,i.id):new Ii(z,P,U,ct),v.push(`/a_${w}`)}else{const ct=va(w,U,"composite");this.binders[w]=new Ui(z,P,U,W,h,ct),v.push(`/z_${w}`)}}this.cacheKey=v.sort().join("")}getMaxValue(i){const h=this.binders[i];return h instanceof Ii||h instanceof Ui?h.maxValue:0}populatePaintArrays(i,h,f,v,w){for(const M in this.binders){const P=this.binders[M];(P instanceof Ii||P instanceof Ui||P instanceof Mi)&&P.populatePaintArray(i,h,f,v,w)}}setConstantPatternPositions(i,h){for(const f in this.binders){const v=this.binders[f];v instanceof Bi&&v.setConstantPatternPositions(i,h)}}updatePaintArrays(i,h,f,v,w){let M=!1;for(const P in i){const z=h.getPositions(P);for(const U of z){const W=f.feature(U.index);for(const et in this.binders){const lt=this.binders[et];if((lt instanceof Ii||lt instanceof Ui||lt instanceof Mi)&&lt.expression.isStateDependent===!0){const ct=v.paint.get(et);lt.expression=ct.value,lt.updatePaintArray(U.start,U.end,W,i[P],w),M=!0}}}}return M}defines(){const i=[];for(const h in this.binders){const f=this.binders[h];(f instanceof tc||f instanceof Bi)&&i.push(...f.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return i}getBinderAttributes(){const i=[];for(const h in this.binders){const f=this.binders[h];if(f instanceof Ii||f instanceof Ui)for(let v=0;v<f.paintVertexAttributes.length;v++)i.push(f.paintVertexAttributes[v].name);else if(f instanceof Mi)for(let v=0;v<ti.members.length;v++)i.push(ti.members[v].name)}return i}getBinderUniforms(){const i=[];for(const h in this.binders){const f=this.binders[h];if(f instanceof tc||f instanceof Bi||f instanceof Ui)for(const v of f.uniformNames)i.push(v)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,h){const f=[];for(const v in this.binders){const w=this.binders[v];if(w instanceof tc||w instanceof Bi||w instanceof Ui){for(const M of w.uniformNames)if(h[M]){const P=w.getBinding(i,h[M],M);f.push({name:M,property:v,binding:P})}}}return f}setUniforms(i,h,f,v){for(const{name:w,property:M,binding:P}of h)this.binders[M].setUniform(P,v,f.get(M),w)}updatePaintBuffers(i){this._buffers=[];for(const h in this.binders){const f=this.binders[h];if(i&&f instanceof Mi){const v=i.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof Ii||f instanceof Ui)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(i){for(const h in this.binders){const f=this.binders[h];(f instanceof Ii||f instanceof Ui||f instanceof Mi)&&f.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const h=this.binders[i];(h instanceof Ii||h instanceof Ui||h instanceof Mi)&&h.destroy()}}}class Fc{constructor(i,h,f=()=>!0){this.programConfigurations={};for(const v of i)this.programConfigurations[v.id]=new lm(v,h,f);this.needsUpload=!1,this._featureMap=new ys,this._bufferOffset=0}populatePaintArrays(i,h,f,v,w,M){for(const P in this.programConfigurations)this.programConfigurations[P].populatePaintArrays(i,h,v,w,M);h.id!==void 0&&this._featureMap.add(h.id,f,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,h,f,v){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(i,this._featureMap,h,w,v)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function cm(u,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${i}-`,"").replace(/-/g,"_")]}function va(u,i,h){const f={color:{source:io,composite:A},number:{source:b,composite:io}},v=function(w){return{"line-pattern":{source:ke,composite:ke},"fill-pattern":{source:ke,composite:ke},"fill-extrusion-pattern":{source:ke,composite:ke}}[w]}(u);return v&&v[h]||f[i][h]}On("ConstantBinder",tc),On("CrossFadedConstantBinder",Bi),On("SourceExpressionBinder",Ii),On("CrossFadedCompositeBinder",Mi),On("CompositeExpressionBinder",Ui),On("ProgramConfiguration",lm,{omit:["_buffers"]}),On("ProgramConfigurationSet",Fc);const vs=Math.pow(2,14)-1,um=-vs-1;function Ya(u){const i=Xt/u.extent,h=u.loadGeometry();for(let f=0;f<h.length;f++){const v=h[f];for(let w=0;w<v.length;w++){const M=v[w],P=Math.round(M.x*i),z=Math.round(M.y*i);M.x=Ce(P,um,vs),M.y=Ce(z,um,vs),(P<M.x||P>M.x+1||z<M.y||z>M.y+1)&&Tt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function $s(u,i){return{type:u.type,id:u.id,properties:u.properties,geometry:i?Ya(u):[]}}const Bc=-32768;function ep(u,i,h,f,v){u.emplaceBack(Bc+8*i+f,Bc+8*h+v)}class sh{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(h=>h.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Jt,this.indexArray=new yn,this.segments=new pr,this.programConfigurations=new Fc(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(i,h,f){const v=this.layers[0],w=[];let M=null,P=!1,z=v.type==="heatmap";if(v.type==="circle"){const W=v;M=W.layout.get("circle-sort-key"),P=!M.isConstant(),z=z||W.paint.get("circle-pitch-alignment")==="map"}const U=z?h.subdivisionGranularity.circle:1;for(const{feature:W,id:et,index:lt,sourceLayerIndex:ct}of i){const dt=this.layers[0]._featureFilter.needGeometry,wt=$s(W,dt);if(!this.layers[0]._featureFilter.filter(new li(this.zoom),wt,f))continue;const Et=P?M.evaluate(wt,{},f):void 0,Vt={id:et,properties:W.properties,type:W.type,sourceLayerIndex:ct,index:lt,geometry:dt?wt.geometry:Ya(W),patterns:{},sortKey:Et};w.push(Vt)}P&&w.sort((W,et)=>W.sortKey-et.sortKey);for(const W of w){const{geometry:et,index:lt,sourceLayerIndex:ct}=W,dt=i[lt].feature;this.addFeature(W,et,lt,f,U),h.featureIndex.insert(dt,et,lt,ct,this.index)}}update(i,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,h,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,fr),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,h,f,v,w=1){let M;switch(w){case 1:M=[0,7];break;case 3:M=[0,2,5,7];break;case 5:M=[0,1,3,4,6,7];break;case 7:M=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${w}; valid values are 1, 3, 5, 7.`)}const P=M.length;for(const z of h)for(const U of z){const W=U.x,et=U.y;if(W<0||W>=Xt||et<0||et>=Xt)continue;const lt=this.segments.prepareSegment(P*P,this.layoutVertexArray,this.indexArray,i.sortKey),ct=lt.vertexLength;for(let dt=0;dt<P;dt++)for(let wt=0;wt<P;wt++)ep(this.layoutVertexArray,W,et,M[wt],M[dt]);for(let dt=0;dt<P-1;dt++)for(let wt=0;wt<P-1;wt++){const Et=ct+dt*P+wt,Vt=ct+(dt+1)*P+wt;this.indexArray.emplaceBack(Et,Vt+1,Et+1),this.indexArray.emplaceBack(Et,Vt,Vt+1)}lt.vertexLength+=P*P,lt.primitiveLength+=(P-1)*(P-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{},v)}}function np(u,i){for(let h=0;h<u.length;h++)if(Nc(i,u[h]))return!0;for(let h=0;h<i.length;h++)if(Nc(u,i[h]))return!0;return!!Vg(u,i)}function Vd(u,i,h){return!!Nc(u,i)||!!hm(i,u,h)}function $h(u,i){if(u.length===1)return Ug(i,u[0]);for(let h=0;h<i.length;h++){const f=i[h];for(let v=0;v<f.length;v++)if(Nc(u,f[v]))return!0}for(let h=0;h<u.length;h++)if(Ug(i,u[h]))return!0;for(let h=0;h<i.length;h++)if(Vg(u,i[h]))return!0;return!1}function rp(u,i,h){if(u.length>1){if(Vg(u,i))return!0;for(let f=0;f<i.length;f++)if(hm(i[f],u,h))return!0}for(let f=0;f<u.length;f++)if(hm(u[f],i,h))return!0;return!1}function Vg(u,i){if(u.length===0||i.length===0)return!1;for(let h=0;h<u.length-1;h++){const f=u[h],v=u[h+1];for(let w=0;w<i.length-1;w++)if(uv(f,v,i[w],i[w+1]))return!0}return!1}function uv(u,i,h,f){return H(u,h,f)!==H(i,h,f)&&H(u,i,h)!==H(u,i,f)}function hm(u,i,h){const f=h*h;if(i.length===1)return u.distSqr(i[0])<f;for(let v=1;v<i.length;v++)if(ip(u,i[v-1],i[v])<f)return!0;return!1}function ip(u,i,h){const f=i.distSqr(h);if(f===0)return u.distSqr(i);const v=((u.x-i.x)*(h.x-i.x)+(u.y-i.y)*(h.y-i.y))/f;return u.distSqr(v<0?i:v>1?h:h.sub(i)._mult(v)._add(i))}function Ug(u,i){for(let h=0;h<u.length;h++)if(Nc(u[h],i))return!0;return!1}function Nc(u,i){let h=!1;for(let f=0,v=u.length-1;f<u.length;v=f++){const w=u[f],M=u[v];w.y>i.y!=M.y>i.y&&i.x<(M.x-w.x)*(i.y-w.y)/(M.y-w.y)+w.x&&(h=!h)}return h}function Hg(u,i,h){const f=h[0],v=h[2];if(u.x<f.x&&i.x<f.x||u.x>v.x&&i.x>v.x||u.y<f.y&&i.y<f.y||u.y>v.y&&i.y>v.y)return!1;const w=H(u,i,h[0]);return w!==H(u,i,h[1])||w!==H(u,i,h[2])||w!==H(u,i,h[3])}function lh(u,i,h){const f=i.paint.get(u).value;return f.kind==="constant"?f.value:h.programConfigurations.get(i.id).getMaxValue(u)}function dm(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function op(u,i,h,f,v){if(!i[0]&&!i[1])return u;const w=k.convert(i)._mult(v);h==="viewport"&&w._rotate(-f);const M=[];for(let P=0;P<u.length;P++)M.push(u[P].sub(w));return M}let ap,$g;On("CircleBucket",sh,{omit:["layers"]});var Gg={get paint(){return $g=$g||new ya({"circle-radius":new lr(_t.paint_circle["circle-radius"]),"circle-color":new lr(_t.paint_circle["circle-color"]),"circle-blur":new lr(_t.paint_circle["circle-blur"]),"circle-opacity":new lr(_t.paint_circle["circle-opacity"]),"circle-translate":new Yn(_t.paint_circle["circle-translate"]),"circle-translate-anchor":new Yn(_t.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Yn(_t.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Yn(_t.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new lr(_t.paint_circle["circle-stroke-width"]),"circle-stroke-color":new lr(_t.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new lr(_t.paint_circle["circle-stroke-opacity"])})},get layout(){return ap=ap||new ya({"circle-sort-key":new lr(_t.layout_circle["circle-sort-key"])})}};class Nb extends Ka{constructor(i){super(i,Gg)}createBucket(i){return new sh(i)}queryRadius(i){const h=i;return lh("circle-radius",this,h)+lh("circle-stroke-width",this,h)+dm(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:h,featureState:f,geometry:v,transform:w,pixelsToTileUnits:M,unwrappedTileID:P,getElevation:z}){const U=op(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-w.bearingInRadians,M),W=this.paint.get("circle-radius").evaluate(h,f)+this.paint.get("circle-stroke-width").evaluate(h,f),et=this.paint.get("circle-pitch-alignment")==="map",lt=et?U:function(dt,wt,Et,Vt){return dt.map(ce=>Zg(ce,wt,Et,Vt))}(U,w,P,z),ct=et?W*M:W;for(const dt of v)for(const wt of dt){const Et=et?wt:Zg(wt,w,P,z);let Vt=ct;const ce=w.projectTileCoordinates(wt.x,wt.y,P,z).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Vt*=ce/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Vt*=w.cameraToCenterDistance/ce),Vd(lt,Et,Vt))return!0}return!1}}function Zg(u,i,h,f){const v=i.projectTileCoordinates(u.x,u.y,h,f).point;return new k((.5*v.x+.5)*i.width,(.5*-v.y+.5)*i.height)}class jc extends sh{}let Wg;On("HeatmapBucket",jc,{omit:["layers"]});var hv={get paint(){return Wg=Wg||new ya({"heatmap-radius":new lr(_t.paint_heatmap["heatmap-radius"]),"heatmap-weight":new lr(_t.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Yn(_t.paint_heatmap["heatmap-intensity"]),"heatmap-color":new gl(_t.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Yn(_t.paint_heatmap["heatmap-opacity"])})}};function qg(u,{width:i,height:h},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==i*h*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${i*h*f}`)}else v=new Uint8Array(i*h*f);return u.width=i,u.height=h,u.data=v,u}function Kg(u,{width:i,height:h},f){if(i===u.width&&h===u.height)return;const v=qg({},{width:i,height:h},f);Yg(u,v,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,i),height:Math.min(u.height,h)},f),u.width=i,u.height=h,u.data=v.data}function Yg(u,i,h,f,v,w){if(v.width===0||v.height===0)return i;if(v.width>u.width||v.height>u.height||h.x>u.width-v.width||h.y>u.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>i.width||v.height>i.height||f.x>i.width-v.width||f.y>i.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const M=u.data,P=i.data;if(M===P)throw new Error("srcData equals dstData, so image is already copied");for(let z=0;z<v.height;z++){const U=((h.y+z)*u.width+h.x)*w,W=((f.y+z)*i.width+f.x)*w;for(let et=0;et<v.width*w;et++)P[W+et]=M[U+et]}return i}class sp{constructor(i,h){qg(this,i,1,h)}resize(i){Kg(this,i,1)}clone(){return new sp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,h,f,v,w){Yg(i,h,f,v,w,1)}}class xo{constructor(i,h){qg(this,i,4,h)}resize(i){Kg(this,i,4)}replace(i,h){h?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new xo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,h,f,v,w){Yg(i,h,f,v,w,4)}}function fm(u){const i={},h=u.resolution||256,f=u.clips?u.clips.length:1,v=u.image||new xo({width:h,height:f});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const w=(M,P,z)=>{i[u.evaluationKey]=z;const U=u.expression.evaluate(i);v.data[M+P+0]=Math.floor(255*U.r/U.a),v.data[M+P+1]=Math.floor(255*U.g/U.a),v.data[M+P+2]=Math.floor(255*U.b/U.a),v.data[M+P+3]=Math.floor(255*U.a)};if(u.clips)for(let M=0,P=0;M<f;++M,P+=4*h)for(let z=0,U=0;z<h;z++,U+=4){const W=z/(h-1),{start:et,end:lt}=u.clips[M];w(P,U,et*(1-W)+lt*W)}else for(let M=0,P=0;M<h;M++,P+=4)w(0,P,M/(h-1));return v}On("AlphaImage",sp),On("RGBAImage",xo);const lp="big-fb";class Xg extends Ka{createBucket(i){return new jc(i)}constructor(i){super(i,hv),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=fm({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(lp)&&this.heatmapFbos.delete(lp)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let cp;var Ud={get paint(){return cp=cp||new ya({"hillshade-illumination-direction":new Yn(_t.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Yn(_t.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Yn(_t.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Yn(_t.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Yn(_t.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Yn(_t.paint_hillshade["hillshade-accent-color"])})}};class yr extends Ka{constructor(i){super(i,Ud)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const pm=Vi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qg}=pm;function wu(u,i,h){const f=h.patternDependencies;let v=!1;for(const w of i){const M=w.paint.get(`${u}-pattern`);M.isConstant()||(v=!0);const P=M.constantOr(null);P&&(v=!0,f[P.to]=!0,f[P.from]=!0)}return v}function Jg(u,i,h,f,v){const w=v.patternDependencies;for(const M of i){const P=M.paint.get(`${u}-pattern`).value;if(P.kind!=="constant"){let z=P.evaluate({zoom:f-1},h,{},v.availableImages),U=P.evaluate({zoom:f},h,{},v.availableImages),W=P.evaluate({zoom:f+1},h,{},v.availableImages);z=z&&z.name?z.name:z,U=U&&U.name?U.name:U,W=W&&W.name?W.name:W,w[z]=!0,w[U]=!0,w[W]=!0,h.patterns[M.id]={min:z,mid:U,max:W}}}return h}function mm(u,i,h,f,v){let w;if(v===function(M,P,z,U){let W=0;for(let et=P,lt=z-U;et<z;et+=U)W+=(M[lt]-M[et])*(M[et+1]+M[lt+1]),lt=et;return W}(u,i,h,f)>0)for(let M=i;M<h;M+=f)w=gv(M/f|0,u[M],u[M+1],w);else for(let M=h-f;M>=i;M-=f)w=gv(M/f|0,u[M],u[M+1],w);return w&&Hd(w,w.next)&&(hp(w),w=w.next),w}function ch(u,i){if(!u)return u;i||(i=u);let h,f=u;do if(h=!1,f.steiner||!Hd(f,f.next)&&Hi(f.prev,f,f.next)!==0)f=f.next;else{if(hp(f),f=i=f.prev,f===f.next)break;h=!0}while(h||f!==i);return i}function ko(u,i,h,f,v,w,M){if(!u)return;!M&&w&&function(z,U,W,et){let lt=z;do lt.z===0&&(lt.z=t0(lt.x,lt.y,U,W,et)),lt.prevZ=lt.prev,lt.nextZ=lt.next,lt=lt.next;while(lt!==z);lt.prevZ.nextZ=null,lt.prevZ=null,function(ct){let dt,wt=1;do{let Et,Vt=ct;ct=null;let ce=null;for(dt=0;Vt;){dt++;let qt=Vt,st=0;for(let Yt=0;Yt<wt&&(st++,qt=qt.nextZ,qt);Yt++);let It=wt;for(;st>0||It>0&&qt;)st!==0&&(It===0||!qt||Vt.z<=qt.z)?(Et=Vt,Vt=Vt.nextZ,st--):(Et=qt,qt=qt.nextZ,It--),ce?ce.nextZ=Et:ct=Et,Et.prevZ=ce,ce=Et;Vt=qt}ce.nextZ=null,wt*=2}while(dt>1)}(lt)}(u,f,v,w);let P=u;for(;u.prev!==u.next;){const z=u.prev,U=u.next;if(w?Vb(u,f,v,w):jb(u))i.push(z.i,u.i,U.i),hp(u),u=U.next,P=U.next;else if((u=U)===P){M?M===1?ko(u=dv(ch(u),i),i,h,f,v,w,2):M===2&&Ub(u,i,h,f,v,w):ko(ch(u),i,h,f,v,w,1);break}}}function jb(u){const i=u.prev,h=u,f=u.next;if(Hi(i,h,f)>=0)return!1;const v=i.x,w=h.x,M=f.x,P=i.y,z=h.y,U=f.y,W=Math.min(v,w,M),et=Math.min(P,z,U),lt=Math.max(v,w,M),ct=Math.max(P,z,U);let dt=f.next;for(;dt!==i;){if(dt.x>=W&&dt.x<=lt&&dt.y>=et&&dt.y<=ct&&Gh(v,P,w,z,M,U,dt.x,dt.y)&&Hi(dt.prev,dt,dt.next)>=0)return!1;dt=dt.next}return!0}function Vb(u,i,h,f){const v=u.prev,w=u,M=u.next;if(Hi(v,w,M)>=0)return!1;const P=v.x,z=w.x,U=M.x,W=v.y,et=w.y,lt=M.y,ct=Math.min(P,z,U),dt=Math.min(W,et,lt),wt=Math.max(P,z,U),Et=Math.max(W,et,lt),Vt=t0(ct,dt,i,h,f),ce=t0(wt,Et,i,h,f);let qt=u.prevZ,st=u.nextZ;for(;qt&&qt.z>=Vt&&st&&st.z<=ce;){if(qt.x>=ct&&qt.x<=wt&&qt.y>=dt&&qt.y<=Et&&qt!==v&&qt!==M&&Gh(P,W,z,et,U,lt,qt.x,qt.y)&&Hi(qt.prev,qt,qt.next)>=0||(qt=qt.prevZ,st.x>=ct&&st.x<=wt&&st.y>=dt&&st.y<=Et&&st!==v&&st!==M&&Gh(P,W,z,et,U,lt,st.x,st.y)&&Hi(st.prev,st,st.next)>=0))return!1;st=st.nextZ}for(;qt&&qt.z>=Vt;){if(qt.x>=ct&&qt.x<=wt&&qt.y>=dt&&qt.y<=Et&&qt!==v&&qt!==M&&Gh(P,W,z,et,U,lt,qt.x,qt.y)&&Hi(qt.prev,qt,qt.next)>=0)return!1;qt=qt.prevZ}for(;st&&st.z<=ce;){if(st.x>=ct&&st.x<=wt&&st.y>=dt&&st.y<=Et&&st!==v&&st!==M&&Gh(P,W,z,et,U,lt,st.x,st.y)&&Hi(st.prev,st,st.next)>=0)return!1;st=st.nextZ}return!0}function dv(u,i){let h=u;do{const f=h.prev,v=h.next.next;!Hd(f,v)&&pv(f,h,h.next,v)&&$d(f,v)&&$d(v,f)&&(i.push(f.i,h.i,v.i),hp(h),hp(h.next),h=u=v),h=h.next}while(h!==u);return ch(h)}function Ub(u,i,h,f,v,w){let M=u;do{let P=M.next.next;for(;P!==M.prev;){if(M.i!==P.i&&Gb(M,P)){let z=mv(M,P);return M=ch(M,M.next),z=ch(z,z.next),ko(M,i,h,f,v,w,0),void ko(z,i,h,f,v,w,0)}P=P.next}M=M.next}while(M!==u)}function fv(u,i){let h=u.x-i.x;return h===0&&(h=u.y-i.y,h===0)&&(h=(u.next.y-u.y)/(u.next.x-u.x)-(i.next.y-i.y)/(i.next.x-i.x)),h}function Hb(u,i){const h=function(v,w){let M=w;const P=v.x,z=v.y;let U,W=-1/0;if(Hd(v,M))return M;do{if(Hd(v,M.next))return M.next;if(z<=M.y&&z>=M.next.y&&M.next.y!==M.y){const wt=M.x+(z-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(wt<=P&&wt>W&&(W=wt,U=M.x<M.next.x?M:M.next,wt===P))return U}M=M.next}while(M!==w);if(!U)return null;const et=U,lt=U.x,ct=U.y;let dt=1/0;M=U;do{if(P>=M.x&&M.x>=lt&&P!==M.x&&za(z<ct?P:W,z,lt,ct,z<ct?W:P,z,M.x,M.y)){const wt=Math.abs(z-M.y)/(P-M.x);$d(M,v)&&(wt<dt||wt===dt&&(M.x>U.x||M.x===U.x&&$b(U,M)))&&(U=M,dt=wt)}M=M.next}while(M!==et);return U}(u,i);if(!h)return i;const f=mv(h,u);return ch(f,f.next),ch(h,h.next)}function $b(u,i){return Hi(u.prev,u,i.prev)<0&&Hi(i.next,u,u.next)<0}function t0(u,i,h,f,v){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-h)*v|0)|u<<8))|u<<4))|u<<2))|u<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-f)*v|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Cu(u){let i=u,h=u;do(i.x<h.x||i.x===h.x&&i.y<h.y)&&(h=i),i=i.next;while(i!==u);return h}function za(u,i,h,f,v,w,M,P){return(v-M)*(i-P)>=(u-M)*(w-P)&&(u-M)*(f-P)>=(h-M)*(i-P)&&(h-M)*(w-P)>=(v-M)*(f-P)}function Gh(u,i,h,f,v,w,M,P){return!(u===M&&i===P)&&za(u,i,h,f,v,w,M,P)}function Gb(u,i){return u.next.i!==i.i&&u.prev.i!==i.i&&!function(h,f){let v=h;do{if(v.i!==h.i&&v.next.i!==h.i&&v.i!==f.i&&v.next.i!==f.i&&pv(v,v.next,h,f))return!0;v=v.next}while(v!==h);return!1}(u,i)&&($d(u,i)&&$d(i,u)&&function(h,f){let v=h,w=!1;const M=(h.x+f.x)/2,P=(h.y+f.y)/2;do v.y>P!=v.next.y>P&&v.next.y!==v.y&&M<(v.next.x-v.x)*(P-v.y)/(v.next.y-v.y)+v.x&&(w=!w),v=v.next;while(v!==h);return w}(u,i)&&(Hi(u.prev,u,i.prev)||Hi(u,i.prev,i))||Hd(u,i)&&Hi(u.prev,u,u.next)>0&&Hi(i.prev,i,i.next)>0)}function Hi(u,i,h){return(i.y-u.y)*(h.x-i.x)-(i.x-u.x)*(h.y-i.y)}function Hd(u,i){return u.x===i.x&&u.y===i.y}function pv(u,i,h,f){const v=up(Hi(u,i,h)),w=up(Hi(u,i,f)),M=up(Hi(h,f,u)),P=up(Hi(h,f,i));return v!==w&&M!==P||!(v!==0||!uh(u,h,i))||!(w!==0||!uh(u,f,i))||!(M!==0||!uh(h,u,f))||!(P!==0||!uh(h,i,f))}function uh(u,i,h){return i.x<=Math.max(u.x,h.x)&&i.x>=Math.min(u.x,h.x)&&i.y<=Math.max(u.y,h.y)&&i.y>=Math.min(u.y,h.y)}function up(u){return u>0?1:u<0?-1:0}function $d(u,i){return Hi(u.prev,u,u.next)<0?Hi(u,i,u.next)>=0&&Hi(u,u.prev,i)>=0:Hi(u,i,u.prev)<0||Hi(u,u.next,i)<0}function mv(u,i){const h=e0(u.i,u.x,u.y),f=e0(i.i,i.x,i.y),v=u.next,w=i.prev;return u.next=i,i.prev=u,h.next=v,v.prev=h,f.next=h,h.prev=f,w.next=f,f.prev=w,f}function gv(u,i,h,f){const v=e0(u,i,h);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function hp(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function e0(u,i,h){return{i:u,x:i,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Zh{constructor(i,h){if(h>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=h}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class dp{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}dp.noSubdivision=new dp({fill:new Zh(0,0),line:new Zh(0,0),tile:new Zh(0,0),stencil:new Zh(0,0),circle:1}),On("SubdivisionGranularityExpression",Zh),On("SubdivisionGranularitySetting",dp);const Gd=-32768,Wh=32767;class yv{constructor(i,h){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=Xt/i,this._canonical=h}_getKey(i,h){return(i+=32768)<<16|(h+=32768)<<0}_vertexToIndex(i,h){if(i<-32768||h<-32768||i>32767||h>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(i),v=0|Math.round(h),w=this._getKey(f,v);if(this._vertexDictionary.has(w))return this._vertexDictionary.get(w);const M=this._vertexBuffer.length/2;return this._vertexDictionary.set(w,M),this._vertexBuffer.push(f,v),M}_subdivideTrianglesScanline(i){if(this._granularity<2)return function(v,w){const M=[];for(let P=0;P<w.length;P+=3){const z=w[P],U=w[P+1],W=w[P+2],et=v[2*z],lt=v[2*z+1];(v[2*U]-et)*(v[2*W+1]-lt)-(v[2*U+1]-lt)*(v[2*W]-et)>0?(M.push(z),M.push(W),M.push(U)):(M.push(z),M.push(U),M.push(W))}return M}(this._vertexBuffer,i);const h=[],f=i.length;for(let v=0;v<f;v+=3){const w=[i[v+0],i[v+1],i[v+2]],M=[this._vertexBuffer[2*i[v+0]+0],this._vertexBuffer[2*i[v+0]+1],this._vertexBuffer[2*i[v+1]+0],this._vertexBuffer[2*i[v+1]+1],this._vertexBuffer[2*i[v+2]+0],this._vertexBuffer[2*i[v+2]+1]];let P=1/0,z=1/0,U=-1/0,W=-1/0;for(let wt=0;wt<3;wt++){const Et=M[2*wt],Vt=M[2*wt+1];P=Math.min(P,Et),U=Math.max(U,Et),z=Math.min(z,Vt),W=Math.max(W,Vt)}if(P===U||z===W)continue;const et=Math.floor(P/this._granularityCellSize),lt=Math.ceil(U/this._granularityCellSize),ct=Math.floor(z/this._granularityCellSize),dt=Math.ceil(W/this._granularityCellSize);if(et!==lt||ct!==dt)for(let wt=ct;wt<dt;wt++){const Et=this._scanlineGenerateVertexRingForCellRow(wt,M,w);vv(this._vertexBuffer,Et,h)}else h.push(...w)}return h}_scanlineGenerateVertexRingForCellRow(i,h,f){const v=i*this._granularityCellSize,w=v+this._granularityCellSize,M=[];for(let P=0;P<3;P++){const z=h[2*P],U=h[2*P+1],W=h[2*(P+1)%6],et=h[(2*(P+1)+1)%6],lt=h[2*(P+2)%6],ct=h[(2*(P+2)+1)%6],dt=W-z,wt=et-U,Et=dt===0,Vt=wt===0,ce=(v-U)/wt,qt=(w-U)/wt,st=Math.min(ce,qt),It=Math.max(ce,qt);if(!Vt&&(st>=1||It<=0)||Vt&&(U<v||U>w)){et>=v&&et<=w&&M.push(f[(P+1)%3]);continue}!Vt&&st>0&&M.push(this._vertexToIndex(z+dt*st,U+wt*st));const Yt=z+dt*Math.max(st,0),Oe=z+dt*Math.min(It,1);Et||this._generateIntraEdgeVertices(M,z,U,W,et,Yt,Oe),!Vt&&It<1&&M.push(this._vertexToIndex(z+dt*It,U+wt*It)),(Vt||et>=v&&et<=w)&&M.push(f[(P+1)%3]),!Vt&&(et<=v||et>=w)&&this._generateInterEdgeVertices(M,z,U,W,et,lt,ct,Oe,v,w)}return M}_generateIntraEdgeVertices(i,h,f,v,w,M,P){const z=v-h,U=w-f,W=U===0,et=W?Math.min(h,v):Math.min(M,P),lt=W?Math.max(h,v):Math.max(M,P),ct=Math.floor(et/this._granularityCellSize)+1,dt=Math.ceil(lt/this._granularityCellSize)-1;if(W?h<v:M<P)for(let wt=ct;wt<=dt;wt++){const Et=wt*this._granularityCellSize;i.push(this._vertexToIndex(Et,f+U*(Et-h)/z))}else for(let wt=dt;wt>=ct;wt--){const Et=wt*this._granularityCellSize;i.push(this._vertexToIndex(Et,f+U*(Et-h)/z))}}_generateInterEdgeVertices(i,h,f,v,w,M,P,z,U,W){const et=w-f,lt=M-v,ct=P-w,dt=(U-w)/ct,wt=(W-w)/ct,Et=Math.min(dt,wt),Vt=Math.max(dt,wt),ce=v+lt*Et;let qt=Math.floor(Math.min(ce,z)/this._granularityCellSize)+1,st=Math.ceil(Math.max(ce,z)/this._granularityCellSize)-1,It=z<ce;const Yt=ct===0;if(Yt&&(P===U||P===W))return;if(Yt||Et>=1||Vt<=0){const sn=f-P,Ne=M+(h-M)*Math.min((U-P)/sn,(W-P)/sn);qt=Math.floor(Math.min(Ne,z)/this._granularityCellSize)+1,st=Math.ceil(Math.max(Ne,z)/this._granularityCellSize)-1,It=z<Ne}const Oe=et>0?W:U;if(It)for(let sn=qt;sn<=st;sn++)i.push(this._vertexToIndex(sn*this._granularityCellSize,Oe));else for(let sn=st;sn>=qt;sn--)i.push(this._vertexToIndex(sn*this._granularityCellSize,Oe))}_generateOutline(i){const h=[];for(const f of i){const v=Iu(f,this._granularity,!0),w=this._pointArrayToIndices(v),M=[];for(let P=1;P<w.length;P++)M.push(w[P-1]),M.push(w[P]);h.push(M)}return h}_handlePoles(i){let h=!1,f=!1;this._canonical&&(this._canonical.y===0&&(h=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(h||f)&&this._fillPoles(i,h,f)}_ensureNoPoleVertices(){const i=this._vertexBuffer;for(let h=0;h<i.length;h+=2){const f=i[h+1];f===Gd&&(i[h+1]=-32767),f===Wh&&(i[h+1]=32766)}}_generatePoleQuad(i,h,f,v,w,M){v>w!=(M===Gd)?(i.push(h),i.push(f),i.push(this._vertexToIndex(v,M)),i.push(f),i.push(this._vertexToIndex(w,M)),i.push(this._vertexToIndex(v,M))):(i.push(f),i.push(h),i.push(this._vertexToIndex(v,M)),i.push(this._vertexToIndex(w,M)),i.push(f),i.push(this._vertexToIndex(v,M)))}_fillPoles(i,h,f){const v=this._vertexBuffer,w=Xt,M=i.length;for(let P=2;P<M;P+=3){const z=i[P-2],U=i[P-1],W=i[P],et=v[2*z],lt=v[2*z+1],ct=v[2*U],dt=v[2*U+1],wt=v[2*W],Et=v[2*W+1];h&&(lt===0&&dt===0&&this._generatePoleQuad(i,z,U,et,ct,Gd),dt===0&&Et===0&&this._generatePoleQuad(i,U,W,ct,wt,Gd),Et===0&&lt===0&&this._generatePoleQuad(i,W,z,wt,et,Gd)),f&&(lt===w&&dt===w&&this._generatePoleQuad(i,z,U,et,ct,Wh),dt===w&&Et===w&&this._generatePoleQuad(i,U,W,ct,wt,Wh),Et===w&&lt===w&&this._generatePoleQuad(i,W,z,wt,et,Wh))}}_initializeVertices(i){for(let h=0;h<i.length;h+=2)this._vertexToIndex(i[h],i[h+1])}subdividePolygonInternal(i,h){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:v}=function(P){const z=[],U=[];for(const W of P)if(W.length!==0){W!==P[0]&&z.push(U.length/2);for(let et=0;et<W.length;et++)U.push(W[et].x),U.push(W[et].y)}return{flattened:U,holeIndices:z}}(i);let w;this._initializeVertices(f);try{const P=function(U,W,et=2){const lt=W&&W.length,ct=lt?W[0]*et:U.length;let dt=mm(U,0,ct,et,!0);const wt=[];if(!dt||dt.next===dt.prev)return wt;let Et,Vt,ce;if(lt&&(dt=function(qt,st,It,Yt){const Oe=[];for(let sn=0,Ne=st.length;sn<Ne;sn++){const He=mm(qt,st[sn]*Yt,sn<Ne-1?st[sn+1]*Yt:qt.length,Yt,!1);He===He.next&&(He.steiner=!0),Oe.push(Cu(He))}Oe.sort(fv);for(let sn=0;sn<Oe.length;sn++)It=Hb(Oe[sn],It);return It}(U,W,dt,et)),U.length>80*et){Et=1/0,Vt=1/0;let qt=-1/0,st=-1/0;for(let It=et;It<ct;It+=et){const Yt=U[It],Oe=U[It+1];Yt<Et&&(Et=Yt),Oe<Vt&&(Vt=Oe),Yt>qt&&(qt=Yt),Oe>st&&(st=Oe)}ce=Math.max(qt-Et,st-Vt),ce=ce!==0?32767/ce:0}return ko(dt,wt,et,Et,Vt,ce,0),wt}(f,v),z=this._convertIndices(f,P);w=this._subdivideTrianglesScanline(z)}catch(P){console.error(P)}let M=[];return h&&(M=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(w),{verticesFlattened:this._vertexBuffer,indicesTriangles:w,indicesLineList:M}}_convertIndices(i,h){const f=[];for(let v=0;v<h.length;v++)f.push(this._vertexToIndex(i[2*h[v]],i[2*h[v]+1]));return f}_pointArrayToIndices(i){const h=[];for(let f=0;f<i.length;f++){const v=i[f];h.push(this._vertexToIndex(v.x,v.y))}return h}}function Zd(u,i,h,f=!0){return new yv(h,i).subdividePolygonInternal(u,f)}function Iu(u,i,h=!1){if(!u||u.length<1)return[];if(u.length<2)return[];const f=u[0],v=u[u.length-1],w=h&&(f.x!==v.x||f.y!==v.y);if(i<2)return w?[...u,u[0]]:[...u];const M=Math.floor(Xt/i),P=[];P.push(new k(u[0].x,u[0].y));const z=u.length,U=w?z:z-1;for(let W=0;W<U;W++){const et=u[W],lt=W<z-1?u[W+1]:u[0],ct=et.x,dt=et.y,wt=lt.x,Et=lt.y,Vt=ct!==wt,ce=dt!==Et;if(!Vt&&!ce)continue;const qt=wt-ct,st=Et-dt,It=Math.abs(qt),Yt=Math.abs(st);let Oe=ct,sn=dt;for(;;){const He=qt>0?(Math.floor(Oe/M)+1)*M:(Math.ceil(Oe/M)-1)*M,pn=st>0?(Math.floor(sn/M)+1)*M:(Math.ceil(sn/M)-1)*M,ln=Math.abs(Oe-He),vn=Math.abs(sn-pn),Xe=Math.abs(Oe-wt),jn=Math.abs(sn-Et),cr=Vt?ln/It:Number.POSITIVE_INFINITY,er=ce?vn/Yt:Number.POSITIVE_INFINITY;if((Xe<=ln||!Vt)&&(jn<=vn||!ce))break;if(cr<er&&Vt||!ce){Oe=He,sn+=st*cr;const Gn=new k(Oe,Math.round(sn));P[P.length-1].x===Gn.x&&P[P.length-1].y===Gn.y||P.push(Gn)}else{Oe+=qt*er,sn=pn;const Gn=new k(Math.round(Oe),sn);P[P.length-1].x===Gn.x&&P[P.length-1].y===Gn.y||P.push(Gn)}}const Ne=new k(wt,Et);P[P.length-1].x===Ne.x&&P[P.length-1].y===Ne.y||P.push(Ne)}return P}function vv(u,i,h){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,v=u[2*i[0]];for(let z=1;z<i.length;z++){const U=u[2*i[z]];U<v&&(v=U,f=z)}const w=i.length;let M=f,P=(M+1)%w;for(;;){const z=M-1>=0?M-1:w-1,U=(P+1)%w,W=u[2*i[z]],et=u[2*i[U]],lt=u[2*i[M]],ct=u[2*i[M]+1],dt=u[2*i[P]+1];let wt=!1;if(W<et)wt=!0;else if(W>et)wt=!1;else{const Et=dt-ct,Vt=-(u[2*i[P]]-lt),ce=ct<dt?1:-1;((W-lt)*Et+(u[2*i[z]+1]-ct)*Vt)*ce>((et-lt)*Et+(u[2*i[U]+1]-ct)*Vt)*ce&&(wt=!0)}if(wt){const Et=i[z],Vt=i[M],ce=i[P];Et!==Vt&&Et!==ce&&Vt!==ce&&h.push(ce,Vt,Et),M--,M<0&&(M=w-1)}else{const Et=i[U],Vt=i[M],ce=i[P];Et!==Vt&&Et!==ce&&Vt!==ce&&h.push(ce,Vt,Et),P++,P>=w&&(P=0)}if(z===U)break}}function n0(u,i,h,f,v,w,M,P,z){const U=v.length/2,W=M&&P&&z;if(U<pr.MAX_VERTEX_ARRAY_LENGTH){const et=i.prepareSegment(U,h,f),lt=et.vertexLength;for(let wt=0;wt<w.length;wt+=3)f.emplaceBack(lt+w[wt],lt+w[wt+1],lt+w[wt+2]);let ct,dt;et.vertexLength+=U,et.primitiveLength+=w.length/3,W&&(dt=M.prepareSegment(U,h,P),ct=dt.vertexLength,dt.vertexLength+=U);for(let wt=0;wt<v.length;wt+=2)u(v[wt],v[wt+1]);if(W)for(let wt=0;wt<z.length;wt++){const Et=z[wt];for(let Vt=1;Vt<Et.length;Vt+=2)P.emplaceBack(ct+Et[Vt-1],ct+Et[Vt]);dt.primitiveLength+=Et.length/2}}else(function(et,lt,ct,dt,wt,Et){const Vt=[];for(let Yt=0;Yt<dt.length/2;Yt++)Vt.push(-1);const ce={count:0};let qt=0,st=et.getOrCreateLatestSegment(lt,ct),It=st.vertexLength;for(let Yt=2;Yt<wt.length;Yt+=3){const Oe=wt[Yt-2],sn=wt[Yt-1],Ne=wt[Yt];let He=Vt[Oe]<qt,pn=Vt[sn]<qt,ln=Vt[Ne]<qt;st.vertexLength+((He?1:0)+(pn?1:0)+(ln?1:0))>pr.MAX_VERTEX_ARRAY_LENGTH&&(st=et.createNewSegment(lt,ct),qt=ce.count,He=!0,pn=!0,ln=!0,It=0);const vn=hh(Vt,dt,Et,ce,Oe,He,st),Xe=hh(Vt,dt,Et,ce,sn,pn,st),jn=hh(Vt,dt,Et,ce,Ne,ln,st);ct.emplaceBack(It+vn-qt,It+Xe-qt,It+jn-qt),st.primitiveLength++}})(i,h,f,v,w,u),W&&function(et,lt,ct,dt,wt,Et){const Vt=[];for(let Yt=0;Yt<dt.length/2;Yt++)Vt.push(-1);const ce={count:0};let qt=0,st=et.getOrCreateLatestSegment(lt,ct),It=st.vertexLength;for(let Yt=0;Yt<wt.length;Yt++){const Oe=wt[Yt];for(let sn=1;sn<wt[Yt].length;sn+=2){const Ne=Oe[sn-1],He=Oe[sn];let pn=Vt[Ne]<qt,ln=Vt[He]<qt;st.vertexLength+((pn?1:0)+(ln?1:0))>pr.MAX_VERTEX_ARRAY_LENGTH&&(st=et.createNewSegment(lt,ct),qt=ce.count,pn=!0,ln=!0,It=0);const vn=hh(Vt,dt,Et,ce,Ne,pn,st),Xe=hh(Vt,dt,Et,ce,He,ln,st);ct.emplaceBack(It+vn-qt,It+Xe-qt),st.primitiveLength++}}}(M,h,P,v,z,u),i.forceNewSegmentOnNextPrepare(),M==null||M.forceNewSegmentOnNextPrepare()}function hh(u,i,h,f,v,w,M){if(w){const P=f.count;return h(i[2*v],i[2*v+1]),u[v]=f.count,f.count++,M.vertexLength++,P}return u[v]}class gm{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(h=>h.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new re,this.indexArray=new yn,this.indexArray2=new an,this.programConfigurations=new Fc(i.layers,i.zoom),this.segments=new pr,this.segments2=new pr,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(i,h,f){this.hasPattern=wu("fill",this.layers,h);const v=this.layers[0].layout.get("fill-sort-key"),w=!v.isConstant(),M=[];for(const{feature:P,id:z,index:U,sourceLayerIndex:W}of i){const et=this.layers[0]._featureFilter.needGeometry,lt=$s(P,et);if(!this.layers[0]._featureFilter.filter(new li(this.zoom),lt,f))continue;const ct=w?v.evaluate(lt,{},f,h.availableImages):void 0,dt={id:z,properties:P.properties,type:P.type,sourceLayerIndex:W,index:U,geometry:et?lt.geometry:Ya(P),patterns:{},sortKey:ct};M.push(dt)}w&&M.sort((P,z)=>P.sortKey-z.sortKey);for(const P of M){const{geometry:z,index:U,sourceLayerIndex:W}=P;if(this.hasPattern){const et=Jg("fill",this.layers,P,this.zoom,h);this.patternFeatures.push(et)}else this.addFeature(P,z,U,f,{},h.subdivisionGranularity);h.featureIndex.insert(i[U].feature,z,U,W,this.index)}}update(i,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,h,this.stateDependentLayers,f)}addFeatures(i,h,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,h,f,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Qg),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,h,f,v,w,M){for(const P of hu(h,500)){const z=Zd(P,v,M.fill.getGranularityForZoomLevel(v.z)),U=this.layoutVertexArray;n0((W,et)=>{U.emplaceBack(W,et)},this.segments,this.layoutVertexArray,this.indexArray,z.verticesFlattened,z.indicesTriangles,this.segments2,this.indexArray2,z.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,w,v)}}let ec,dh;On("FillBucket",gm,{omit:["layers","patternFeatures"]});var Zb={get paint(){return dh=dh||new ya({"fill-antialias":new Yn(_t.paint_fill["fill-antialias"]),"fill-opacity":new lr(_t.paint_fill["fill-opacity"]),"fill-color":new lr(_t.paint_fill["fill-color"]),"fill-outline-color":new lr(_t.paint_fill["fill-outline-color"]),"fill-translate":new Yn(_t.paint_fill["fill-translate"]),"fill-translate-anchor":new Yn(_t.paint_fill["fill-translate-anchor"]),"fill-pattern":new eh(_t.paint_fill["fill-pattern"])})},get layout(){return ec=ec||new ya({"fill-sort-key":new lr(_t.layout_fill["fill-sort-key"])})}};class _v extends Ka{constructor(i){super(i,Zb)}recalculate(i,h){super.recalculate(i,h);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new gm(i)}queryRadius(){return dm(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:h,transform:f,pixelsToTileUnits:v}){return $h(op(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,v),h)}isTileClipped(){return!0}}const Wb=Vi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),qb=Vi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Kb}=Wb;var r0,bv,i0,xv,o0,Av,wv,ym={};function a0(){if(bv)return r0;bv=1;var u=I();function i(v,w,M,P,z){this.properties={},this.extent=M,this.type=0,this._pbf=v,this._geometry=-1,this._keys=P,this._values=z,v.readFields(h,this,w)}function h(v,w,M){v==1?w.id=M.readVarint():v==2?function(P,z){for(var U=P.readVarint()+P.pos;P.pos<U;){var W=z._keys[P.readVarint()],et=z._values[P.readVarint()];z.properties[W]=et}}(M,w):v==3?w.type=M.readVarint():v==4&&(w._geometry=M.pos)}function f(v){for(var w,M,P=0,z=0,U=v.length,W=U-1;z<U;W=z++)P+=((M=v[W]).x-(w=v[z]).x)*(w.y+M.y);return P}return r0=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var v=this._pbf;v.pos=this._geometry;for(var w,M=v.readVarint()+v.pos,P=1,z=0,U=0,W=0,et=[];v.pos<M;){if(z<=0){var lt=v.readVarint();P=7&lt,z=lt>>3}if(z--,P===1||P===2)U+=v.readSVarint(),W+=v.readSVarint(),P===1&&(w&&et.push(w),w=[]),w.push(new u(U,W));else{if(P!==7)throw new Error("unknown command "+P);w&&w.push(w[0].clone())}}return w&&et.push(w),et},i.prototype.bbox=function(){var v=this._pbf;v.pos=this._geometry;for(var w=v.readVarint()+v.pos,M=1,P=0,z=0,U=0,W=1/0,et=-1/0,lt=1/0,ct=-1/0;v.pos<w;){if(P<=0){var dt=v.readVarint();M=7&dt,P=dt>>3}if(P--,M===1||M===2)(z+=v.readSVarint())<W&&(W=z),z>et&&(et=z),(U+=v.readSVarint())<lt&&(lt=U),U>ct&&(ct=U);else if(M!==7)throw new Error("unknown command "+M)}return[W,lt,et,ct]},i.prototype.toGeoJSON=function(v,w,M){var P,z,U=this.extent*Math.pow(2,M),W=this.extent*v,et=this.extent*w,lt=this.loadGeometry(),ct=i.types[this.type];function dt(Vt){for(var ce=0;ce<Vt.length;ce++){var qt=Vt[ce];Vt[ce]=[360*(qt.x+W)/U-180,360/Math.PI*Math.atan(Math.exp((180-360*(qt.y+et)/U)*Math.PI/180))-90]}}switch(this.type){case 1:var wt=[];for(P=0;P<lt.length;P++)wt[P]=lt[P][0];dt(lt=wt);break;case 2:for(P=0;P<lt.length;P++)dt(lt[P]);break;case 3:for(lt=function(Vt){var ce=Vt.length;if(ce<=1)return[Vt];for(var qt,st,It=[],Yt=0;Yt<ce;Yt++){var Oe=f(Vt[Yt]);Oe!==0&&(st===void 0&&(st=Oe<0),st===Oe<0?(qt&&It.push(qt),qt=[Vt[Yt]]):qt.push(Vt[Yt]))}return qt&&It.push(qt),It}(lt),P=0;P<lt.length;P++)for(z=0;z<lt[P].length;z++)dt(lt[P][z])}lt.length===1?lt=lt[0]:ct="Multi"+ct;var Et={type:"Feature",geometry:{type:ct,coordinates:lt},properties:this.properties};return"id"in this&&(Et.id=this.id),Et},r0}function s0(){if(xv)return i0;xv=1;var u=a0();function i(f,v){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(h,this,v),this.length=this._features.length}function h(f,v,w){f===15?v.version=w.readVarint():f===1?v.name=w.readString():f===5?v.extent=w.readVarint():f===2?v._features.push(w.pos):f===3?v._keys.push(w.readString()):f===4&&v._values.push(function(M){for(var P=null,z=M.readVarint()+M.pos;M.pos<z;){var U=M.readVarint()>>3;P=U===1?M.readString():U===2?M.readFloat():U===3?M.readDouble():U===4?M.readVarint64():U===5?M.readVarint():U===6?M.readSVarint():U===7?M.readBoolean():null}return P}(w))}return i0=i,i.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var v=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,v,this.extent,this._keys,this._values)},i0}function l0(){return wv||(wv=1,ym.VectorTile=function(){if(Av)return o0;Av=1;var u=s0();function i(h,f,v){if(h===3){var w=new u(v,v.readVarint()+v.pos);w.length&&(f[w.name]=w)}}return o0=function(h,f){this.layers=h.readFields(i,{},f)},o0}(),ym.VectorTileFeature=a0(),ym.VectorTileLayer=s0()),ym}var fp=g(l0());const Yb=fp.VectorTileFeature.types,c0=Math.pow(2,13);function Wd(u,i,h,f,v,w,M,P){u.emplaceBack(i,h,2*Math.floor(f*c0)+M,v*c0*2,w*c0*2,Math.round(P))}class u0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(h=>h.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new se,this.centroidVertexArray=new Wt,this.indexArray=new yn,this.programConfigurations=new Fc(i.layers,i.zoom),this.segments=new pr,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(i,h,f){this.features=[],this.hasPattern=wu("fill-extrusion",this.layers,h);for(const{feature:v,id:w,index:M,sourceLayerIndex:P}of i){const z=this.layers[0]._featureFilter.needGeometry,U=$s(v,z);if(!this.layers[0]._featureFilter.filter(new li(this.zoom),U,f))continue;const W={id:w,sourceLayerIndex:P,index:M,geometry:z?U.geometry:Ya(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Jg("fill-extrusion",this.layers,W,this.zoom,h)):this.addFeature(W,W.geometry,M,f,{},h.subdivisionGranularity),h.featureIndex.insert(v,W.geometry,M,P,this.index,!0)}}addFeatures(i,h,f){for(const v of this.features){const{geometry:w}=v;this.addFeature(v,w,v.index,h,f,i.subdivisionGranularity)}}update(i,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,h,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Kb),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,qb.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,h,f,v,w,M){for(const P of hu(h,500)){const z={x:0,y:0,sampleCount:0},U=this.layoutVertexArray.length;this.processPolygon(z,v,i,P,M);const W=this.layoutVertexArray.length-U,et=Math.floor(z.x/z.sampleCount),lt=Math.floor(z.y/z.sampleCount);for(let ct=0;ct<W;ct++)this.centroidVertexArray.emplaceBack(et,lt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,w,v)}processPolygon(i,h,f,v,w){if(v.length<1||Cv(v[0]))return;for(const et of v)et.length!==0&&Xb(i,et);const M={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},P=w.fill.getGranularityForZoomLevel(h.z),z=Yb[f.type]==="Polygon";for(const et of v){if(et.length===0||Cv(et))continue;const lt=Iu(et,P,z);this._generateSideFaces(lt,M)}if(!z)return;const U=Zd(v,h,P,!1),W=this.layoutVertexArray;n0((et,lt)=>{Wd(W,et,lt,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,U.verticesFlattened,U.indicesTriangles)}_generateSideFaces(i,h){let f=0;for(let v=1;v<i.length;v++){const w=i[v],M=i[v-1];if(Qb(w,M))continue;h.segment.vertexLength+4>pr.MAX_VERTEX_ARRAY_LENGTH&&(h.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const P=w.sub(M)._perp()._unit(),z=M.dist(w);f+z>32768&&(f=0),Wd(this.layoutVertexArray,w.x,w.y,P.x,P.y,0,0,f),Wd(this.layoutVertexArray,w.x,w.y,P.x,P.y,0,1,f),f+=z,Wd(this.layoutVertexArray,M.x,M.y,P.x,P.y,0,0,f),Wd(this.layoutVertexArray,M.x,M.y,P.x,P.y,0,1,f);const U=h.segment.vertexLength;this.indexArray.emplaceBack(U,U+2,U+1),this.indexArray.emplaceBack(U+1,U+2,U+3),h.segment.vertexLength+=4,h.segment.primitiveLength+=2}}}function Xb(u,i){for(let h=0;h<i.length;h++){const f=i[h];h===i.length-1&&i[0].x===f.x&&i[0].y===f.y||(u.x+=f.x,u.y+=f.y,u.sampleCount++)}}function Qb(u,i){return u.x===i.x&&(u.x<0||u.x>Xt)||u.y===i.y&&(u.y<0||u.y>Xt)}function Cv(u){return u.every(i=>i.x<0)||u.every(i=>i.x>Xt)||u.every(i=>i.y<0)||u.every(i=>i.y>Xt)}let Iv;On("FillExtrusionBucket",u0,{omit:["layers","features"]});var Jb={get paint(){return Iv=Iv||new ya({"fill-extrusion-opacity":new Yn(_t["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new lr(_t["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Yn(_t["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Yn(_t["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new eh(_t["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new lr(_t["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new lr(_t["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Yn(_t["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class vl extends Ka{constructor(i){super(i,Jb)}createBucket(i){return new u0(i)}queryRadius(){return dm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:h,featureState:f,geometry:v,transform:w,pixelsToTileUnits:M,pixelPosMatrix:P}){const z=op(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-w.bearingInRadians,M),U=this.paint.get("fill-extrusion-height").evaluate(h,f),W=this.paint.get("fill-extrusion-base").evaluate(h,f),et=function(ct,dt,wt){const Et=[];for(const Vt of ct){const ce=[Vt.x,Vt.y,0,1];q(ce,ce,dt),Et.push(new k(ce[0]/ce[3],ce[1]/ce[3]))}return Et}(z,P),lt=function(ct,dt,wt,Et){const Vt=[],ce=[],qt=Et[8]*dt,st=Et[9]*dt,It=Et[10]*dt,Yt=Et[11]*dt,Oe=Et[8]*wt,sn=Et[9]*wt,Ne=Et[10]*wt,He=Et[11]*wt;for(const pn of ct){const ln=[],vn=[];for(const Xe of pn){const jn=Xe.x,cr=Xe.y,er=Et[0]*jn+Et[4]*cr+Et[12],Gn=Et[1]*jn+Et[5]*cr+Et[13],Vr=Et[2]*jn+Et[6]*cr+Et[14],Gi=Et[3]*jn+Et[7]*cr+Et[15],Co=Vr+It,ia=Gi+Yt,oa=er+Oe,es=Gn+sn,Ko=Vr+Ne,Ni=Gi+He,Lo=new k((er+qt)/ia,(Gn+st)/ia);Lo.z=Co/ia,ln.push(Lo);const Yo=new k(oa/Ni,es/Ni);Yo.z=Ko/Ni,vn.push(Yo)}Vt.push(ln),ce.push(vn)}return[Vt,ce]}(v,W,U,P);return function(ct,dt,wt){let Et=1/0;$h(wt,dt)&&(Et=Mv(wt,dt[0]));for(let Vt=0;Vt<dt.length;Vt++){const ce=dt[Vt],qt=ct[Vt];for(let st=0;st<ce.length-1;st++){const It=ce[st],Yt=[It,ce[st+1],qt[st+1],qt[st],It];np(wt,Yt)&&(Et=Math.min(Et,Mv(wt,Yt)))}}return Et!==1/0&&Et}(lt[0],lt[1],et)}}function pp(u,i){return u.x*i.x+u.y*i.y}function Mv(u,i){if(u.length===1){let h=0;const f=i[h++];let v;for(;!v||f.equals(v);)if(v=i[h++],!v)return 1/0;for(;h<i.length;h++){const w=i[h],M=u[0],P=v.sub(f),z=w.sub(f),U=M.sub(f),W=pp(P,P),et=pp(P,z),lt=pp(z,z),ct=pp(U,P),dt=pp(U,z),wt=W*lt-et*et,Et=(lt*ct-et*dt)/wt,Vt=(W*dt-et*ct)/wt,ce=f.z*(1-Et-Vt)+v.z*Et+w.z*Vt;if(isFinite(ce))return ce}return 1/0}{let h=1/0;for(const f of i)h=Math.min(h,f.z);return h}}const tx=Vi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Sv}=tx,ex=Vi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:nx}=ex,rx=fp.VectorTileFeature.types,ix=Math.cos(Math.PI/180*37.5),vm=Math.pow(2,14)/.5;class h0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(h=>h.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new fe,this.layoutVertexArray2=new le,this.indexArray=new yn,this.programConfigurations=new Fc(i.layers,i.zoom),this.segments=new pr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(i,h,f){this.hasPattern=wu("line",this.layers,h);const v=this.layers[0].layout.get("line-sort-key"),w=!v.isConstant(),M=[];for(const{feature:P,id:z,index:U,sourceLayerIndex:W}of i){const et=this.layers[0]._featureFilter.needGeometry,lt=$s(P,et);if(!this.layers[0]._featureFilter.filter(new li(this.zoom),lt,f))continue;const ct=w?v.evaluate(lt,{},f):void 0,dt={id:z,properties:P.properties,type:P.type,sourceLayerIndex:W,index:U,geometry:et?lt.geometry:Ya(P),patterns:{},sortKey:ct};M.push(dt)}w&&M.sort((P,z)=>P.sortKey-z.sortKey);for(const P of M){const{geometry:z,index:U,sourceLayerIndex:W}=P;if(this.hasPattern){const et=Jg("line",this.layers,P,this.zoom,h);this.patternFeatures.push(et)}else this.addFeature(P,z,U,f,{},h.subdivisionGranularity);h.featureIndex.insert(i[U].feature,z,U,W,this.index)}}update(i,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,h,this.stateDependentLayers,f)}addFeatures(i,h,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,h,f,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,nx)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Sv),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,h,f,v,w,M){const P=this.layers[0].layout,z=P.get("line-join").evaluate(i,{}),U=P.get("line-cap"),W=P.get("line-miter-limit"),et=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const lt of h)this.addLine(lt,i,z,U,W,et,v,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,w,v)}addLine(i,h,f,v,w,M,P,z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=Iu(i,P?z.line.getGranularityForZoomLevel(P.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let qt=0;qt<i.length-1;qt++)this.totalDistance+=i[qt].dist(i[qt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const U=rx[h.type]==="Polygon";let W=i.length;for(;W>=2&&i[W-1].equals(i[W-2]);)W--;let et=0;for(;et<W-1&&i[et].equals(i[et+1]);)et++;if(W<(U?3:2))return;f==="bevel"&&(w=1.05);const lt=this.overscaling<=16?15*Xt/(512*this.overscaling):0,ct=this.segments.prepareSegment(10*W,this.layoutVertexArray,this.indexArray);let dt,wt,Et,Vt,ce;this.e1=this.e2=-1,U&&(dt=i[W-2],ce=i[et].sub(dt)._unit()._perp());for(let qt=et;qt<W;qt++){if(Et=qt===W-1?U?i[et+1]:void 0:i[qt+1],Et&&i[qt].equals(Et))continue;ce&&(Vt=ce),dt&&(wt=dt),dt=i[qt],ce=Et?Et.sub(dt)._unit()._perp():Vt,Vt=Vt||ce;let st=Vt.add(ce);st.x===0&&st.y===0||st._unit();const It=Vt.x*ce.x+Vt.y*ce.y,Yt=st.x*ce.x+st.y*ce.y,Oe=Yt!==0?1/Yt:1/0,sn=2*Math.sqrt(2-2*Yt),Ne=Yt<ix&&wt&&Et,He=Vt.x*ce.y-Vt.y*ce.x>0;if(Ne&&qt>et){const vn=dt.dist(wt);if(vn>2*lt){const Xe=dt.sub(dt.sub(wt)._mult(lt/vn)._round());this.updateDistance(wt,Xe),this.addCurrentVertex(Xe,Vt,0,0,ct),wt=Xe}}const pn=wt&&Et;let ln=pn?f:U?"butt":v;if(pn&&ln==="round"&&(Oe<M?ln="miter":Oe<=2&&(ln="fakeround")),ln==="miter"&&Oe>w&&(ln="bevel"),ln==="bevel"&&(Oe>2&&(ln="flipbevel"),Oe<w&&(ln="miter")),wt&&this.updateDistance(wt,dt),ln==="miter")st._mult(Oe),this.addCurrentVertex(dt,st,0,0,ct);else if(ln==="flipbevel"){if(Oe>100)st=ce.mult(-1);else{const vn=Oe*Vt.add(ce).mag()/Vt.sub(ce).mag();st._perp()._mult(vn*(He?-1:1))}this.addCurrentVertex(dt,st,0,0,ct),this.addCurrentVertex(dt,st.mult(-1),0,0,ct)}else if(ln==="bevel"||ln==="fakeround"){const vn=-Math.sqrt(Oe*Oe-1),Xe=He?vn:0,jn=He?0:vn;if(wt&&this.addCurrentVertex(dt,Vt,Xe,jn,ct),ln==="fakeround"){const cr=Math.round(180*sn/Math.PI/20);for(let er=1;er<cr;er++){let Gn=er/cr;if(Gn!==.5){const Gi=Gn-.5;Gn+=Gn*Gi*(Gn-1)*((1.0904+It*(It*(3.55645-1.43519*It)-3.2452))*Gi*Gi+(.848013+It*(.215638*It-1.06021)))}const Vr=ce.sub(Vt)._mult(Gn)._add(Vt)._unit()._mult(He?-1:1);this.addHalfVertex(dt,Vr.x,Vr.y,!1,He,0,ct)}}Et&&this.addCurrentVertex(dt,ce,-Xe,-jn,ct)}else if(ln==="butt")this.addCurrentVertex(dt,st,0,0,ct);else if(ln==="square"){const vn=wt?1:-1;this.addCurrentVertex(dt,st,vn,vn,ct)}else ln==="round"&&(wt&&(this.addCurrentVertex(dt,Vt,0,0,ct),this.addCurrentVertex(dt,Vt,1,1,ct,!0)),Et&&(this.addCurrentVertex(dt,ce,-1,-1,ct,!0),this.addCurrentVertex(dt,ce,0,0,ct)));if(Ne&&qt<W-1){const vn=dt.dist(Et);if(vn>2*lt){const Xe=dt.add(Et.sub(dt)._mult(lt/vn)._round());this.updateDistance(dt,Xe),this.addCurrentVertex(Xe,ce,0,0,ct),dt=Xe}}}}addCurrentVertex(i,h,f,v,w,M=!1){const P=h.y*v-h.x,z=-h.y-h.x*v;this.addHalfVertex(i,h.x+h.y*f,h.y-h.x*f,M,!1,f,w),this.addHalfVertex(i,P,z,M,!0,-v,w),this.distance>vm/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,h,f,v,w,M))}addHalfVertex({x:i,y:h},f,v,w,M,P,z){const U=.5*(this.lineClips?this.scaledDistance*(vm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(w?1:0),(h<<1)+(M?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(P===0?0:P<0?-1:1)|(63&U)<<2,U>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const W=z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,W,this.e2),z.primitiveLength++),M?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,h){this.distance+=i.dist(h),this.updateScaledDistance()}}let Ev,Tv;On("LineBucket",h0,{omit:["layers","patternFeatures"]});var Pv={get paint(){return Tv=Tv||new ya({"line-opacity":new lr(_t.paint_line["line-opacity"]),"line-color":new lr(_t.paint_line["line-color"]),"line-translate":new Yn(_t.paint_line["line-translate"]),"line-translate-anchor":new Yn(_t.paint_line["line-translate-anchor"]),"line-width":new lr(_t.paint_line["line-width"]),"line-gap-width":new lr(_t.paint_line["line-gap-width"]),"line-offset":new lr(_t.paint_line["line-offset"]),"line-blur":new lr(_t.paint_line["line-blur"]),"line-dasharray":new vu(_t.paint_line["line-dasharray"]),"line-pattern":new eh(_t.paint_line["line-pattern"]),"line-gradient":new gl(_t.paint_line["line-gradient"])})},get layout(){return Ev=Ev||new ya({"line-cap":new Yn(_t.layout_line["line-cap"]),"line-join":new lr(_t.layout_line["line-join"]),"line-miter-limit":new Yn(_t.layout_line["line-miter-limit"]),"line-round-limit":new Yn(_t.layout_line["line-round-limit"]),"line-sort-key":new lr(_t.layout_line["line-sort-key"])})}};class ox extends lr{possiblyEvaluate(i,h){return h=new li(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(i,h)}evaluate(i,h,f,v){return h=be({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(i,h,f,v)}}let _m;class ax extends Ka{constructor(i){super(i,Pv),this.gradientVersion=0,_m||(_m=new ox(Pv.paint.properties["line-width"].specification),_m.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof Fi,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,h){super.recalculate(i,h),this.paint._values["line-floorwidth"]=_m.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new h0(i)}queryRadius(i){const h=i,f=kv(lh("line-width",this,h),lh("line-gap-width",this,h)),v=lh("line-offset",this,h);return f/2+Math.abs(v)+dm(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:h,featureState:f,geometry:v,transform:w,pixelsToTileUnits:M}){const P=op(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-w.bearingInRadians,M),z=M/2*kv(this.paint.get("line-width").evaluate(h,f),this.paint.get("line-gap-width").evaluate(h,f)),U=this.paint.get("line-offset").evaluate(h,f);return U&&(v=function(W,et){const lt=[];for(let ct=0;ct<W.length;ct++){const dt=W[ct],wt=[];for(let Et=0;Et<dt.length;Et++){const Vt=dt[Et-1],ce=dt[Et],qt=dt[Et+1],st=Et===0?new k(0,0):ce.sub(Vt)._unit()._perp(),It=Et===dt.length-1?new k(0,0):qt.sub(ce)._unit()._perp(),Yt=st._add(It)._unit(),Oe=Yt.x*It.x+Yt.y*It.y;Oe!==0&&Yt._mult(1/Oe),wt.push(Yt._mult(et)._add(ce))}lt.push(wt)}return lt}(v,U*M)),function(W,et,lt){for(let ct=0;ct<et.length;ct++){const dt=et[ct];if(W.length>=3){for(let wt=0;wt<dt.length;wt++)if(Nc(W,dt[wt]))return!0}if(rp(W,dt,lt))return!0}return!1}(P,v,z)}isTileClipped(){return!0}}function kv(u,i){return i>0?i+2*u:u}const sx=Vi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),lx=Vi([{name:"a_projected_pos",components:3,type:"Float32"}],4);Vi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const cx=Vi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Vi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Lv=Vi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ux=Vi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hx(u,i,h){return u.sections.forEach(f=>{f.text=function(v,w,M){const P=w.layout.get("text-transform").evaluate(M,{});return P==="uppercase"?v=v.toLocaleUpperCase():P==="lowercase"&&(v=v.toLocaleLowerCase()),pl.applyArabicShaping&&(v=pl.applyArabicShaping(v)),v}(f.text,i,h)}),u}Vi([{name:"triangle",components:3,type:"Uint16"}]),Vi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Vi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Vi([{type:"Float32",name:"offsetX"}]),Vi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Vi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const mp={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Rv,d0,Dv,Ao=24,f0={};function p0(){return Rv||(Rv=1,f0.read=function(u,i,h,f,v){var w,M,P=8*v-f-1,z=(1<<P)-1,U=z>>1,W=-7,et=h?v-1:0,lt=h?-1:1,ct=u[i+et];for(et+=lt,w=ct&(1<<-W)-1,ct>>=-W,W+=P;W>0;w=256*w+u[i+et],et+=lt,W-=8);for(M=w&(1<<-W)-1,w>>=-W,W+=f;W>0;M=256*M+u[i+et],et+=lt,W-=8);if(w===0)w=1-U;else{if(w===z)return M?NaN:1/0*(ct?-1:1);M+=Math.pow(2,f),w-=U}return(ct?-1:1)*M*Math.pow(2,w-f)},f0.write=function(u,i,h,f,v,w){var M,P,z,U=8*w-v-1,W=(1<<U)-1,et=W>>1,lt=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,ct=f?0:w-1,dt=f?1:-1,wt=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(P=isNaN(i)?1:0,M=W):(M=Math.floor(Math.log(i)/Math.LN2),i*(z=Math.pow(2,-M))<1&&(M--,z*=2),(i+=M+et>=1?lt/z:lt*Math.pow(2,1-et))*z>=2&&(M++,z/=2),M+et>=W?(P=0,M=W):M+et>=1?(P=(i*z-1)*Math.pow(2,v),M+=et):(P=i*Math.pow(2,et-1)*Math.pow(2,v),M=0));v>=8;u[h+ct]=255&P,ct+=dt,P/=256,v-=8);for(M=M<<v|P,U+=v;U>0;u[h+ct]=255&M,ct+=dt,M/=256,U-=8);u[h+ct-dt]|=128*wt}),f0}function m0(){if(Dv)return d0;Dv=1,d0=i;var u=p0();function i(st){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(st)?st:new Uint8Array(st||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var h=4294967296,f=1/h,v=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function w(st){return st.type===i.Bytes?st.readVarint()+st.pos:st.pos+1}function M(st,It,Yt){return Yt?4294967296*It+(st>>>0):4294967296*(It>>>0)+(st>>>0)}function P(st,It,Yt){var Oe=It<=16383?1:It<=2097151?2:It<=268435455?3:Math.floor(Math.log(It)/(7*Math.LN2));Yt.realloc(Oe);for(var sn=Yt.pos-1;sn>=st;sn--)Yt.buf[sn+Oe]=Yt.buf[sn]}function z(st,It){for(var Yt=0;Yt<st.length;Yt++)It.writeVarint(st[Yt])}function U(st,It){for(var Yt=0;Yt<st.length;Yt++)It.writeSVarint(st[Yt])}function W(st,It){for(var Yt=0;Yt<st.length;Yt++)It.writeFloat(st[Yt])}function et(st,It){for(var Yt=0;Yt<st.length;Yt++)It.writeDouble(st[Yt])}function lt(st,It){for(var Yt=0;Yt<st.length;Yt++)It.writeBoolean(st[Yt])}function ct(st,It){for(var Yt=0;Yt<st.length;Yt++)It.writeFixed32(st[Yt])}function dt(st,It){for(var Yt=0;Yt<st.length;Yt++)It.writeSFixed32(st[Yt])}function wt(st,It){for(var Yt=0;Yt<st.length;Yt++)It.writeFixed64(st[Yt])}function Et(st,It){for(var Yt=0;Yt<st.length;Yt++)It.writeSFixed64(st[Yt])}function Vt(st,It){return(st[It]|st[It+1]<<8|st[It+2]<<16)+16777216*st[It+3]}function ce(st,It,Yt){st[Yt]=It,st[Yt+1]=It>>>8,st[Yt+2]=It>>>16,st[Yt+3]=It>>>24}function qt(st,It){return(st[It]|st[It+1]<<8|st[It+2]<<16)+(st[It+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(st,It,Yt){for(Yt=Yt||this.length;this.pos<Yt;){var Oe=this.readVarint(),sn=Oe>>3,Ne=this.pos;this.type=7&Oe,st(sn,It,this),this.pos===Ne&&this.skip(Oe)}return It},readMessage:function(st,It){return this.readFields(st,It,this.readVarint()+this.pos)},readFixed32:function(){var st=Vt(this.buf,this.pos);return this.pos+=4,st},readSFixed32:function(){var st=qt(this.buf,this.pos);return this.pos+=4,st},readFixed64:function(){var st=Vt(this.buf,this.pos)+Vt(this.buf,this.pos+4)*h;return this.pos+=8,st},readSFixed64:function(){var st=Vt(this.buf,this.pos)+qt(this.buf,this.pos+4)*h;return this.pos+=8,st},readFloat:function(){var st=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,st},readDouble:function(){var st=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,st},readVarint:function(st){var It,Yt,Oe=this.buf;return It=127&(Yt=Oe[this.pos++]),Yt<128?It:(It|=(127&(Yt=Oe[this.pos++]))<<7,Yt<128?It:(It|=(127&(Yt=Oe[this.pos++]))<<14,Yt<128?It:(It|=(127&(Yt=Oe[this.pos++]))<<21,Yt<128?It:function(sn,Ne,He){var pn,ln,vn=He.buf;if(pn=(112&(ln=vn[He.pos++]))>>4,ln<128||(pn|=(127&(ln=vn[He.pos++]))<<3,ln<128)||(pn|=(127&(ln=vn[He.pos++]))<<10,ln<128)||(pn|=(127&(ln=vn[He.pos++]))<<17,ln<128)||(pn|=(127&(ln=vn[He.pos++]))<<24,ln<128)||(pn|=(1&(ln=vn[He.pos++]))<<31,ln<128))return M(sn,pn,Ne);throw new Error("Expected varint not more than 10 bytes")}(It|=(15&(Yt=Oe[this.pos]))<<28,st,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var st=this.readVarint();return st%2==1?(st+1)/-2:st/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var st=this.readVarint()+this.pos,It=this.pos;return this.pos=st,st-It>=12&&v?function(Yt,Oe,sn){return v.decode(Yt.subarray(Oe,sn))}(this.buf,It,st):function(Yt,Oe,sn){for(var Ne="",He=Oe;He<sn;){var pn,ln,vn,Xe=Yt[He],jn=null,cr=Xe>239?4:Xe>223?3:Xe>191?2:1;if(He+cr>sn)break;cr===1?Xe<128&&(jn=Xe):cr===2?(192&(pn=Yt[He+1]))==128&&(jn=(31&Xe)<<6|63&pn)<=127&&(jn=null):cr===3?(ln=Yt[He+2],(192&(pn=Yt[He+1]))==128&&(192&ln)==128&&((jn=(15&Xe)<<12|(63&pn)<<6|63&ln)<=2047||jn>=55296&&jn<=57343)&&(jn=null)):cr===4&&(ln=Yt[He+2],vn=Yt[He+3],(192&(pn=Yt[He+1]))==128&&(192&ln)==128&&(192&vn)==128&&((jn=(15&Xe)<<18|(63&pn)<<12|(63&ln)<<6|63&vn)<=65535||jn>=1114112)&&(jn=null)),jn===null?(jn=65533,cr=1):jn>65535&&(jn-=65536,Ne+=String.fromCharCode(jn>>>10&1023|55296),jn=56320|1023&jn),Ne+=String.fromCharCode(jn),He+=cr}return Ne}(this.buf,It,st)},readBytes:function(){var st=this.readVarint()+this.pos,It=this.buf.subarray(this.pos,st);return this.pos=st,It},readPackedVarint:function(st,It){if(this.type!==i.Bytes)return st.push(this.readVarint(It));var Yt=w(this);for(st=st||[];this.pos<Yt;)st.push(this.readVarint(It));return st},readPackedSVarint:function(st){if(this.type!==i.Bytes)return st.push(this.readSVarint());var It=w(this);for(st=st||[];this.pos<It;)st.push(this.readSVarint());return st},readPackedBoolean:function(st){if(this.type!==i.Bytes)return st.push(this.readBoolean());var It=w(this);for(st=st||[];this.pos<It;)st.push(this.readBoolean());return st},readPackedFloat:function(st){if(this.type!==i.Bytes)return st.push(this.readFloat());var It=w(this);for(st=st||[];this.pos<It;)st.push(this.readFloat());return st},readPackedDouble:function(st){if(this.type!==i.Bytes)return st.push(this.readDouble());var It=w(this);for(st=st||[];this.pos<It;)st.push(this.readDouble());return st},readPackedFixed32:function(st){if(this.type!==i.Bytes)return st.push(this.readFixed32());var It=w(this);for(st=st||[];this.pos<It;)st.push(this.readFixed32());return st},readPackedSFixed32:function(st){if(this.type!==i.Bytes)return st.push(this.readSFixed32());var It=w(this);for(st=st||[];this.pos<It;)st.push(this.readSFixed32());return st},readPackedFixed64:function(st){if(this.type!==i.Bytes)return st.push(this.readFixed64());var It=w(this);for(st=st||[];this.pos<It;)st.push(this.readFixed64());return st},readPackedSFixed64:function(st){if(this.type!==i.Bytes)return st.push(this.readSFixed64());var It=w(this);for(st=st||[];this.pos<It;)st.push(this.readSFixed64());return st},skip:function(st){var It=7&st;if(It===i.Varint)for(;this.buf[this.pos++]>127;);else if(It===i.Bytes)this.pos=this.readVarint()+this.pos;else if(It===i.Fixed32)this.pos+=4;else{if(It!==i.Fixed64)throw new Error("Unimplemented type: "+It);this.pos+=8}},writeTag:function(st,It){this.writeVarint(st<<3|It)},realloc:function(st){for(var It=this.length||16;It<this.pos+st;)It*=2;if(It!==this.length){var Yt=new Uint8Array(It);Yt.set(this.buf),this.buf=Yt,this.length=It}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(st){this.realloc(4),ce(this.buf,st,this.pos),this.pos+=4},writeSFixed32:function(st){this.realloc(4),ce(this.buf,st,this.pos),this.pos+=4},writeFixed64:function(st){this.realloc(8),ce(this.buf,-1&st,this.pos),ce(this.buf,Math.floor(st*f),this.pos+4),this.pos+=8},writeSFixed64:function(st){this.realloc(8),ce(this.buf,-1&st,this.pos),ce(this.buf,Math.floor(st*f),this.pos+4),this.pos+=8},writeVarint:function(st){(st=+st||0)>268435455||st<0?function(It,Yt){var Oe,sn;if(It>=0?(Oe=It%4294967296|0,sn=It/4294967296|0):(sn=~(-It/4294967296),4294967295^(Oe=~(-It%4294967296))?Oe=Oe+1|0:(Oe=0,sn=sn+1|0)),It>=18446744073709552e3||It<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Yt.realloc(10),function(Ne,He,pn){pn.buf[pn.pos++]=127&Ne|128,Ne>>>=7,pn.buf[pn.pos++]=127&Ne|128,Ne>>>=7,pn.buf[pn.pos++]=127&Ne|128,Ne>>>=7,pn.buf[pn.pos++]=127&Ne|128,pn.buf[pn.pos]=127&(Ne>>>=7)}(Oe,0,Yt),function(Ne,He){var pn=(7&Ne)<<4;He.buf[He.pos++]|=pn|((Ne>>>=3)?128:0),Ne&&(He.buf[He.pos++]=127&Ne|((Ne>>>=7)?128:0),Ne&&(He.buf[He.pos++]=127&Ne|((Ne>>>=7)?128:0),Ne&&(He.buf[He.pos++]=127&Ne|((Ne>>>=7)?128:0),Ne&&(He.buf[He.pos++]=127&Ne|((Ne>>>=7)?128:0),Ne&&(He.buf[He.pos++]=127&Ne)))))}(sn,Yt)}(st,this):(this.realloc(4),this.buf[this.pos++]=127&st|(st>127?128:0),st<=127||(this.buf[this.pos++]=127&(st>>>=7)|(st>127?128:0),st<=127||(this.buf[this.pos++]=127&(st>>>=7)|(st>127?128:0),st<=127||(this.buf[this.pos++]=st>>>7&127))))},writeSVarint:function(st){this.writeVarint(st<0?2*-st-1:2*st)},writeBoolean:function(st){this.writeVarint(!!st)},writeString:function(st){st=String(st),this.realloc(4*st.length),this.pos++;var It=this.pos;this.pos=function(Oe,sn,Ne){for(var He,pn,ln=0;ln<sn.length;ln++){if((He=sn.charCodeAt(ln))>55295&&He<57344){if(!pn){He>56319||ln+1===sn.length?(Oe[Ne++]=239,Oe[Ne++]=191,Oe[Ne++]=189):pn=He;continue}if(He<56320){Oe[Ne++]=239,Oe[Ne++]=191,Oe[Ne++]=189,pn=He;continue}He=pn-55296<<10|He-56320|65536,pn=null}else pn&&(Oe[Ne++]=239,Oe[Ne++]=191,Oe[Ne++]=189,pn=null);He<128?Oe[Ne++]=He:(He<2048?Oe[Ne++]=He>>6|192:(He<65536?Oe[Ne++]=He>>12|224:(Oe[Ne++]=He>>18|240,Oe[Ne++]=He>>12&63|128),Oe[Ne++]=He>>6&63|128),Oe[Ne++]=63&He|128)}return Ne}(this.buf,st,this.pos);var Yt=this.pos-It;Yt>=128&&P(It,Yt,this),this.pos=It-1,this.writeVarint(Yt),this.pos+=Yt},writeFloat:function(st){this.realloc(4),u.write(this.buf,st,this.pos,!0,23,4),this.pos+=4},writeDouble:function(st){this.realloc(8),u.write(this.buf,st,this.pos,!0,52,8),this.pos+=8},writeBytes:function(st){var It=st.length;this.writeVarint(It),this.realloc(It);for(var Yt=0;Yt<It;Yt++)this.buf[this.pos++]=st[Yt]},writeRawMessage:function(st,It){this.pos++;var Yt=this.pos;st(It,this);var Oe=this.pos-Yt;Oe>=128&&P(Yt,Oe,this),this.pos=Yt-1,this.writeVarint(Oe),this.pos+=Oe},writeMessage:function(st,It,Yt){this.writeTag(st,i.Bytes),this.writeRawMessage(It,Yt)},writePackedVarint:function(st,It){It.length&&this.writeMessage(st,z,It)},writePackedSVarint:function(st,It){It.length&&this.writeMessage(st,U,It)},writePackedBoolean:function(st,It){It.length&&this.writeMessage(st,lt,It)},writePackedFloat:function(st,It){It.length&&this.writeMessage(st,W,It)},writePackedDouble:function(st,It){It.length&&this.writeMessage(st,et,It)},writePackedFixed32:function(st,It){It.length&&this.writeMessage(st,ct,It)},writePackedSFixed32:function(st,It){It.length&&this.writeMessage(st,dt,It)},writePackedFixed64:function(st,It){It.length&&this.writeMessage(st,wt,It)},writePackedSFixed64:function(st,It){It.length&&this.writeMessage(st,Et,It)},writeBytesField:function(st,It){this.writeTag(st,i.Bytes),this.writeBytes(It)},writeFixed32Field:function(st,It){this.writeTag(st,i.Fixed32),this.writeFixed32(It)},writeSFixed32Field:function(st,It){this.writeTag(st,i.Fixed32),this.writeSFixed32(It)},writeFixed64Field:function(st,It){this.writeTag(st,i.Fixed64),this.writeFixed64(It)},writeSFixed64Field:function(st,It){this.writeTag(st,i.Fixed64),this.writeSFixed64(It)},writeVarintField:function(st,It){this.writeTag(st,i.Varint),this.writeVarint(It)},writeSVarintField:function(st,It){this.writeTag(st,i.Varint),this.writeSVarint(It)},writeStringField:function(st,It){this.writeTag(st,i.Bytes),this.writeString(It)},writeFloatField:function(st,It){this.writeTag(st,i.Fixed32),this.writeFloat(It)},writeDoubleField:function(st,It){this.writeTag(st,i.Fixed64),this.writeDouble(It)},writeBooleanField:function(st,It){this.writeVarintField(st,!!It)}},d0}var g0=g(m0());const y0=3;function dx(u,i,h){u===1&&h.readMessage(fx,i)}function fx(u,i,h){if(u===3){const{id:f,bitmap:v,width:w,height:M,left:P,top:z,advance:U}=h.readMessage(px,{});i.push({id:f,bitmap:new sp({width:w+2*y0,height:M+2*y0},v),metrics:{width:w,height:M,left:P,top:z,advance:U}})}}function px(u,i,h){u===1?i.id=h.readVarint():u===2?i.bitmap=h.readBytes():u===3?i.width=h.readVarint():u===4?i.height=h.readVarint():u===5?i.left=h.readSVarint():u===6?i.top=h.readSVarint():u===7&&(i.advance=h.readVarint())}const mx=y0;function Ov(u){let i=0,h=0;for(const M of u)i+=M.w*M.h,h=Math.max(h,M.w);u.sort((M,P)=>P.h-M.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),h),h:1/0}];let v=0,w=0;for(const M of u)for(let P=f.length-1;P>=0;P--){const z=f[P];if(!(M.w>z.w||M.h>z.h)){if(M.x=z.x,M.y=z.y,w=Math.max(w,M.y+M.h),v=Math.max(v,M.x+M.w),M.w===z.w&&M.h===z.h){const U=f.pop();P<f.length&&(f[P]=U)}else M.h===z.h?(z.x+=M.w,z.w-=M.w):M.w===z.w?(z.y+=M.h,z.h-=M.h):(f.push({x:z.x+M.w,y:z.y,w:z.w-M.w,h:M.h}),z.y+=M.h,z.h-=M.h);break}}return{w:v,h:w,fill:i/(v*w)||0}}const Xa=1;class bm{constructor(i,{pixelRatio:h,version:f,stretchX:v,stretchY:w,content:M,textFitWidth:P,textFitHeight:z}){this.paddedRect=i,this.pixelRatio=h,this.stretchX=v,this.stretchY=w,this.content=M,this.version=f,this.textFitWidth=P,this.textFitHeight=z}get tl(){return[this.paddedRect.x+Xa,this.paddedRect.y+Xa]}get br(){return[this.paddedRect.x+this.paddedRect.w-Xa,this.paddedRect.y+this.paddedRect.h-Xa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Xa)/this.pixelRatio,(this.paddedRect.h-2*Xa)/this.pixelRatio]}}class zv{constructor(i,h){const f={},v={};this.haveRenderCallbacks=[];const w=[];this.addImages(i,f,w),this.addImages(h,v,w);const{w:M,h:P}=Ov(w),z=new xo({width:M||1,height:P||1});for(const U in i){const W=i[U],et=f[U].paddedRect;xo.copy(W.data,z,{x:0,y:0},{x:et.x+Xa,y:et.y+Xa},W.data)}for(const U in h){const W=h[U],et=v[U].paddedRect,lt=et.x+Xa,ct=et.y+Xa,dt=W.data.width,wt=W.data.height;xo.copy(W.data,z,{x:0,y:0},{x:lt,y:ct},W.data),xo.copy(W.data,z,{x:0,y:wt-1},{x:lt,y:ct-1},{width:dt,height:1}),xo.copy(W.data,z,{x:0,y:0},{x:lt,y:ct+wt},{width:dt,height:1}),xo.copy(W.data,z,{x:dt-1,y:0},{x:lt-1,y:ct},{width:1,height:wt}),xo.copy(W.data,z,{x:0,y:0},{x:lt+dt,y:ct},{width:1,height:wt})}this.image=z,this.iconPositions=f,this.patternPositions=v}addImages(i,h,f){for(const v in i){const w=i[v],M={x:0,y:0,w:w.data.width+2*Xa,h:w.data.height+2*Xa};f.push(M),h[v]=new bm(M,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(i,h){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in i.updatedImages)this.patchUpdatedImage(this.iconPositions[f],i.getImage(f),h),this.patchUpdatedImage(this.patternPositions[f],i.getImage(f),h)}patchUpdatedImage(i,h,f){if(!i||!h||i.version===h.version)return;i.version=h.version;const[v,w]=i.tl;f.update(h.data,void 0,{x:v,y:w})}}var nc;On("ImagePosition",bm),On("ImageAtlas",zv),l.al=void 0,(nc=l.al||(l.al={}))[nc.none=0]="none",nc[nc.horizontal=1]="horizontal",nc[nc.vertical=2]="vertical",nc[nc.horizontalOnly=3]="horizontalOnly";const xm=-17;class gp{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(i,h,f){const v=new gp;return v.scale=i||1,v.fontStack=h,v.verticalAlign=f||"bottom",v}static forImage(i,h){const f=new gp;return f.imageName=i,f.verticalAlign=h||"bottom",f}}class qd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,h){const f=new qd;for(let v=0;v<i.sections.length;v++){const w=i.sections[v];w.image?f.addImageSection(w):f.addTextSection(w,h)}return f}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let h="";for(let f=0;f<i.length;f++){const v=i.charCodeAt(f+1)||null,w=i.charCodeAt(f-1)||null;h+=v&&om(v)&&!mp[i[f+1]]||w&&om(w)&&!mp[i[f-1]]||!mp[i[f]]?i[f]:mp[i[f]]}return h}(this.text)}trim(){let i=0;for(let f=0;f<this.text.length&&wm[this.text.charCodeAt(f)];f++)i++;let h=this.text.length;for(let f=this.text.length-1;f>=0&&f>=i&&wm[this.text.charCodeAt(f)];f--)h--;this.text=this.text.substring(i,h),this.sectionIndex=this.sectionIndex.slice(i,h)}substring(i,h){const f=new qd;return f.text=this.text.substring(i,h),f.sectionIndex=this.sectionIndex.slice(i,h),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,h)=>Math.max(i,this.sections[h].scale),0)}getMaxImageSize(i){let h=0,f=0;for(let v=0;v<this.length();v++){const w=this.getSection(v);if(w.imageName){const M=i[w.imageName];if(!M)continue;const P=M.displaySize;h=Math.max(h,P[0]),f=Math.max(f,P[1])}}return{maxImageWidth:h,maxImageHeight:f}}addTextSection(i,h){this.text+=i.text,this.sections.push(gp.forText(i.scale,i.fontStack||h,i.verticalAlign));const f=this.sections.length-1;for(let v=0;v<i.text.length;++v)this.sectionIndex.push(f)}addImageSection(i){const h=i.image?i.image.name:"";if(h.length===0)return void Tt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(gp.forImage(h,i.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Tt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Am(u,i,h,f,v,w,M,P,z,U,W,et,lt,ct,dt){const wt=qd.fromFeature(u,v);let Et;et===l.al.vertical&&wt.verticalizePunctuation();const{processBidirectionalText:Vt,processStyledBidirectionalText:ce}=pl;if(Vt&&wt.sections.length===1){Et=[];const It=Vt(wt.toString(),v0(wt,U,w,i,f,ct));for(const Yt of It){const Oe=new qd;Oe.text=Yt,Oe.sections=wt.sections;for(let sn=0;sn<Yt.length;sn++)Oe.sectionIndex.push(0);Et.push(Oe)}}else if(ce){Et=[];const It=ce(wt.text,wt.sectionIndex,v0(wt,U,w,i,f,ct));for(const Yt of It){const Oe=new qd;Oe.text=Yt[0],Oe.sectionIndex=Yt[1],Oe.sections=wt.sections,Et.push(Oe)}}else Et=function(It,Yt){const Oe=[],sn=It.text;let Ne=0;for(const He of Yt)Oe.push(It.substring(Ne,He)),Ne=He;return Ne<sn.length&&Oe.push(It.substring(Ne,sn.length)),Oe}(wt,v0(wt,U,w,i,f,ct));const qt=[],st={positionedLines:qt,text:wt.toString(),top:W[1],bottom:W[1],left:W[0],right:W[0],writingMode:et,iconsInText:!1,verticalizable:!1};return function(It,Yt,Oe,sn,Ne,He,pn,ln,vn,Xe,jn,cr){let er=0,Gn=0,Vr=0,Gi=0;const Co=ln==="right"?1:ln==="left"?0:.5,ia=Ao/cr;let oa=0;for(const Ni of Ne){Ni.trim();const Lo=Ni.getMaxScale(),Yo={positionedGlyphs:[],lineOffset:0};It.positionedLines[oa]=Yo;const Ro=Yo.positionedGlyphs;let _a=0;if(!Ni.length()){Gn+=He,++oa;continue}const Ws=_x(sn,Ni,ia);for(let ns=0;ns<Ni.length();ns++){const Io=Ni.getSection(ns),Oo=Ni.getSectionIndex(ns),zo=Ni.getCharCode(ns),lo=Uv(vn,jn,zo);let Si;if(Io.imageName){if(It.iconsInText=!0,Io.scale=Io.scale*ia,Si=bx(Io,lo,Lo,Ws,sn),!Si)continue;_a=Math.max(_a,Si.imageOffset)}else if(Si=Hv(Io,zo,lo,Ws,Yt,Oe),!Si)continue;const{rect:ic,metrics:tf,baselineOffset:oc}=Si;Ro.push({glyph:zo,imageName:Io.imageName,x:er,y:Gn+oc+xm,vertical:lo,scale:Io.scale,fontStack:Io.fontStack,sectionIndex:Oo,metrics:tf,rect:ic}),lo?(It.verticalizable=!0,er+=(Io.imageName?tf.advance:Ao)*Io.scale+Xe):er+=tf.advance*Io.scale+Xe}Ro.length!==0&&(Vr=Math.max(er-Xe,Vr),xx(Ro,0,Ro.length-1,Co)),er=0,Yo.lineOffset=Math.max(_a,(Lo-1)*Ao);const Do=He*Lo+_a;Gn+=Do,Gi=Math.max(Do,Gi),++oa}const{horizontalAlign:es,verticalAlign:Ko}=_0(pn);(function(Ni,Lo,Yo,Ro,_a,Ws,Do,ns,Io){const Oo=(Lo-Yo)*_a;let zo=0;zo=Ws!==Do?-ns*Ro-xm:-Ro*Io*Do+.5*Do;for(const lo of Ni)for(const Si of lo.positionedGlyphs)Si.x+=Oo,Si.y+=zo})(It.positionedLines,Co,es,Ko,Vr,Gi,He,Gn,Ne.length),It.top+=-Ko*Gn,It.bottom=It.top+Gn,It.left+=-es*Vr,It.right=It.left+Vr}(st,i,h,f,Et,M,P,z,et,U,lt,dt),!function(It){for(const Yt of It)if(Yt.positionedGlyphs.length!==0)return!1;return!0}(qt)&&st}const wm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},gx={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},yx={40:!0};function Fv(u,i,h,f,v,w){if(i.imageName){const M=f[i.imageName];return M?M.displaySize[0]*i.scale*Ao/w+v:0}{const M=h[i.fontStack],P=M&&M[u];return P?P.metrics.advance*i.scale+v:0}}function Bv(u,i,h,f){const v=Math.pow(u-i,2);return f?u<i?v/2:2*v:v+Math.abs(h)*h}function vx(u,i,h){let f=0;return u===10&&(f-=1e4),h&&(f+=150),u!==40&&u!==65288||(f+=50),i!==41&&i!==65289||(f+=50),f}function Nv(u,i,h,f,v,w){let M=null,P=Bv(i,h,v,w);for(const z of f){const U=Bv(i-z.x,h,v,w)+z.badness;U<=P&&(M=z,P=U)}return{index:u,x:i,priorBreak:M,badness:P}}function jv(u){return u?jv(u.priorBreak).concat(u.index):[]}function v0(u,i,h,f,v,w){if(!u)return[];const M=[],P=function(et,lt,ct,dt,wt,Et){let Vt=0;for(let ce=0;ce<et.length();ce++){const qt=et.getSection(ce);Vt+=Fv(et.getCharCode(ce),qt,dt,wt,lt,Et)}return Vt/Math.max(1,Math.ceil(Vt/ct))}(u,i,h,f,v,w),z=u.text.indexOf("")>=0;let U=0;for(let et=0;et<u.length();et++){const lt=u.getSection(et),ct=u.getCharCode(et);if(wm[ct]||(U+=Fv(ct,lt,f,v,i,w)),et<u.length()-1){const dt=!((W=ct)<11904)&&(!!Ar["CJK Compatibility Forms"](W)||!!Ar["CJK Compatibility"](W)||!!Ar["CJK Strokes"](W)||!!Ar["CJK Symbols and Punctuation"](W)||!!Ar["Enclosed CJK Letters and Months"](W)||!!Ar["Halfwidth and Fullwidth Forms"](W)||!!Ar["Ideographic Description Characters"](W)||!!Ar["Vertical Forms"](W)||im.test(String.fromCodePoint(W)));(gx[ct]||dt||lt.imageName||et!==u.length()-2&&yx[u.getCharCode(et+1)])&&M.push(Nv(et+1,U,P,M,vx(ct,u.getCharCode(et+1),dt&&z),!1))}}var W;return jv(Nv(u.length(),U,P,M,0,!0))}function _0(u){let i=.5,h=.5;switch(u){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:i,verticalAlign:h}}function _x(u,i,h){const f=i.getMaxScale()*Ao,{maxImageWidth:v,maxImageHeight:w}=i.getMaxImageSize(u),M=Math.max(f,w*h);return{verticalLineContentWidth:Math.max(f,v*h),horizontalLineContentHeight:M}}function Vv(u){switch(u){case"top":return 0;case"center":return .5;default:return 1}}function Uv(u,i,h){return!(u===l.al.horizontal||!i&&!Ld(h)||i&&(wm[h]||(f=h,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function Hv(u,i,h,f,v,w){const M=w[u.fontStack],P=function(U,W,et,lt){if(U&&U.rect)return U;const ct=W[et.fontStack],dt=ct&&ct[lt];return dt?{rect:null,metrics:dt.metrics}:null}(M&&M[i],v,u,i);if(P===null)return null;let z;if(h)z=f.verticalLineContentWidth-u.scale*Ao;else{const U=Vv(u.verticalAlign);z=(f.horizontalLineContentHeight-u.scale*Ao)*U}return{rect:P.rect,metrics:P.metrics,baselineOffset:z}}function bx(u,i,h,f,v){const w=v[u.imageName];if(!w)return null;const M=w.paddedRect,P=w.displaySize,z={width:P[0],height:P[1],left:Xa,top:-3,advance:i?P[1]:P[0]};let U;if(i)U=f.verticalLineContentWidth-P[1]*u.scale;else{const W=Vv(u.verticalAlign);U=(f.horizontalLineContentHeight-P[1]*u.scale)*W}return{rect:M,metrics:z,baselineOffset:U,imageOffset:(i?P[0]:P[1])*u.scale-Ao*h}}function xx(u,i,h,f){if(f===0)return;const v=u[h],w=(u[h].x+v.metrics.advance*v.scale)*f;for(let M=i;M<=h;M++)u[M].x-=w}function Ax(u,i,h){const{horizontalAlign:f,verticalAlign:v}=_0(h),w=i[0]-u.displaySize[0]*f,M=i[1]-u.displaySize[1]*v;return{image:u,top:M,bottom:M+u.displaySize[1],left:w,right:w+u.displaySize[0]}}function $v(u){var i,h;let f=u.left,v=u.top,w=u.right-f,M=u.bottom-v;const P=(i=u.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",z=(h=u.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",U=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(z==="proportional"){if(P==="stretchOnly"&&w/M<U||P==="proportional"){const W=Math.ceil(M*U);f*=W/w,w=W}}else if(P==="proportional"&&z==="stretchOnly"&&U!==0&&w/M>U){const W=Math.ceil(w/U);v*=W/M,M=W}return{x1:f,y1:v,x2:f+w,y2:v+M}}function yp(u,i,h,f,v,w){const M=u.image;let P;if(M.content){const Et=M.content,Vt=M.pixelRatio||1;P=[Et[0]/Vt,Et[1]/Vt,M.displaySize[0]-Et[2]/Vt,M.displaySize[1]-Et[3]/Vt]}const z=i.left*w,U=i.right*w;let W,et,lt,ct;h==="width"||h==="both"?(ct=v[0]+z-f[3],et=v[0]+U+f[1]):(ct=v[0]+(z+U-M.displaySize[0])/2,et=ct+M.displaySize[0]);const dt=i.top*w,wt=i.bottom*w;return h==="height"||h==="both"?(W=v[1]+dt-f[0],lt=v[1]+wt+f[2]):(W=v[1]+(dt+wt-M.displaySize[1])/2,lt=W+M.displaySize[1]),{image:M,top:W,right:et,bottom:lt,left:ct,collisionPadding:P}}const vp=255,Vc=128,fh=vp*Vc;function Gv(u,i){const{expression:h}=i;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new li(u+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:v}=h;let w=0;for(;w<f.length&&f[w]<=u;)w++;w=Math.max(0,w-1);let M=w;for(;M<f.length&&f[M]<u+1;)M++;M=Math.min(f.length-1,M);const P=f[w],z=f[M];return h.kind==="composite"?{kind:"composite",minZoom:P,maxZoom:z,interpolationType:v}:{kind:"camera",minZoom:P,maxZoom:z,minSize:h.evaluate(new li(P)),maxSize:h.evaluate(new li(z)),interpolationType:v}}}function b0(u,i,h){let f="never";const v=u.get(i);return v?f=v:u.get(h)&&(f="always"),f}const wx=fp.VectorTileFeature.types,Cx=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Cm(u,i,h,f,v,w,M,P,z,U,W,et,lt){const ct=P?Math.min(fh,Math.round(P[0])):0,dt=P?Math.min(fh,Math.round(P[1])):0;u.emplaceBack(i,h,Math.round(32*f),Math.round(32*v),w,M,(ct<<1)+(z?1:0),dt,16*U,16*W,256*et,256*lt)}function x0(u,i,h){u.emplaceBack(i.x,i.y,h),u.emplaceBack(i.x,i.y,h),u.emplaceBack(i.x,i.y,h),u.emplaceBack(i.x,i.y,h)}function Ix(u){for(const i of u.sections)if(jg(i.text))return!0;return!1}class A0{constructor(i){this.layoutVertexArray=new De,this.indexArray=new yn,this.programConfigurations=i,this.segments=new pr,this.dynamicLayoutVertexArray=new Ee,this.opacityVertexArray=new Qe,this.hasVisibleVertices=!1,this.placedSymbolArray=new $}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,h,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,sx.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,lx.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,Cx,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}On("SymbolBuffers",A0);class Kd{constructor(i,h,f){this.layoutVertexArray=new i,this.layoutAttributes=h,this.indexArray=new f,this.segments=new pr,this.collisionVertexArray=new In}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,cx.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}On("CollisionBuffers",Kd);class Yd{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(M=>M.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Gv(this.zoom,h["text-size"]),this.iconSizeData=Gv(this.zoom,h["icon-size"]);const f=this.layers[0].layout,v=f.get("symbol-sort-key"),w=f.get("symbol-z-order");this.canOverlap=b0(f,"text-overlap","text-allow-overlap")!=="never"||b0(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(M=>l.al[M])),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.sourceID=i.sourceID}createArrays(){this.text=new A0(new Fc(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new A0(new Fc(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new ot,this.lineVertexArray=new ft,this.symbolInstances=new it,this.textAnchorOffsets=new Ft}calculateGlyphDependencies(i,h,f,v,w){for(let M=0;M<i.length;M++)if(h[i.charCodeAt(M)]=!0,(f||v)&&w){const P=mp[i.charAt(M)];P&&(h[P.charCodeAt(0)]=!0)}}populate(i,h,f){const v=this.layers[0],w=v.layout,M=w.get("text-font"),P=w.get("text-field"),z=w.get("icon-image"),U=(P.value.kind!=="constant"||P.value.value instanceof dn&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),W=z.value.kind!=="constant"||!!z.value.value||Object.keys(z.parameters).length>0,et=w.get("symbol-sort-key");if(this.features=[],!U&&!W)return;const lt=h.iconDependencies,ct=h.glyphDependencies,dt=h.availableImages,wt=new li(this.zoom);for(const{feature:Et,id:Vt,index:ce,sourceLayerIndex:qt}of i){const st=v._featureFilter.needGeometry,It=$s(Et,st);if(!v._featureFilter.filter(wt,It,f))continue;let Yt,Oe;if(st||(It.geometry=Ya(Et)),U){const Ne=v.getValueAndResolveTokens("text-field",It,f,dt),He=dn.factory(Ne),pn=this.hasRTLText=this.hasRTLText||Ix(He);(!pn||pl.getRTLTextPluginStatus()==="unavailable"||pn&&pl.isParsed())&&(Yt=hx(He,v,It))}if(W){const Ne=v.getValueAndResolveTokens("icon-image",It,f,dt);Oe=Ne instanceof Zr?Ne:Zr.fromString(Ne)}if(!Yt&&!Oe)continue;const sn=this.sortFeaturesByKey?et.evaluate(It,{},f):void 0;if(this.features.push({id:Vt,text:Yt,icon:Oe,index:ce,sourceLayerIndex:qt,geometry:It.geometry,properties:Et.properties,type:wx[Et.type],sortKey:sn}),Oe&&(lt[Oe.name]=!0),Yt){const Ne=M.evaluate(It,{},f).join(","),He=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.al.vertical)>=0;for(const pn of Yt.sections)if(pn.image)lt[pn.image.name]=!0;else{const ln=kd(Yt.toString()),vn=pn.fontStack||Ne,Xe=ct[vn]=ct[vn]||{};this.calculateGlyphDependencies(pn.text,Xe,He,this.allowVerticalPlacement,ln)}}}w.get("symbol-placement")==="line"&&(this.features=function(Et){const Vt={},ce={},qt=[];let st=0;function It(Ne){qt.push(Et[Ne]),st++}function Yt(Ne,He,pn){const ln=ce[Ne];return delete ce[Ne],ce[He]=ln,qt[ln].geometry[0].pop(),qt[ln].geometry[0]=qt[ln].geometry[0].concat(pn[0]),ln}function Oe(Ne,He,pn){const ln=Vt[He];return delete Vt[He],Vt[Ne]=ln,qt[ln].geometry[0].shift(),qt[ln].geometry[0]=pn[0].concat(qt[ln].geometry[0]),ln}function sn(Ne,He,pn){const ln=pn?He[0][He[0].length-1]:He[0][0];return`${Ne}:${ln.x}:${ln.y}`}for(let Ne=0;Ne<Et.length;Ne++){const He=Et[Ne],pn=He.geometry,ln=He.text?He.text.toString():null;if(!ln){It(Ne);continue}const vn=sn(ln,pn),Xe=sn(ln,pn,!0);if(vn in ce&&Xe in Vt&&ce[vn]!==Vt[Xe]){const jn=Oe(vn,Xe,pn),cr=Yt(vn,Xe,qt[jn].geometry);delete Vt[vn],delete ce[Xe],ce[sn(ln,qt[cr].geometry,!0)]=cr,qt[jn].geometry=null}else vn in ce?Yt(vn,Xe,pn):Xe in Vt?Oe(vn,Xe,pn):(It(Ne),Vt[vn]=st-1,ce[Xe]=st-1)}return qt.filter(Ne=>Ne.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Et,Vt)=>Et.sortKey-Vt.sortKey)}update(i,h,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,h,this.layers,f),this.icon.programConfigurations.updatePaintArrays(i,h,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,h){const f=this.lineVertexArray.length;if(i.segment!==void 0){let v=i.dist(h[i.segment+1]),w=i.dist(h[i.segment]);const M={};for(let P=i.segment+1;P<h.length;P++)M[P]={x:h[P].x,y:h[P].y,tileUnitDistanceFromAnchor:v},P<h.length-1&&(v+=h[P+1].dist(h[P]));for(let P=i.segment||0;P>=0;P--)M[P]={x:h[P].x,y:h[P].y,tileUnitDistanceFromAnchor:w},P>0&&(w+=h[P-1].dist(h[P]));for(let P=0;P<h.length;P++){const z=M[P];this.lineVertexArray.emplaceBack(z.x,z.y,z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(i,h,f,v,w,M,P,z,U,W,et,lt){const ct=i.indexArray,dt=i.layoutVertexArray,wt=i.segments.prepareSegment(4*h.length,dt,ct,this.canOverlap?M.sortKey:void 0),Et=this.glyphOffsetArray.length,Vt=wt.vertexLength,ce=this.allowVerticalPlacement&&P===l.al.vertical?Math.PI/2:0,qt=M.text&&M.text.sections;for(let st=0;st<h.length;st++){const{tl:It,tr:Yt,bl:Oe,br:sn,tex:Ne,pixelOffsetTL:He,pixelOffsetBR:pn,minFontScaleX:ln,minFontScaleY:vn,glyphOffset:Xe,isSDF:jn,sectionIndex:cr}=h[st],er=wt.vertexLength,Gn=Xe[1];Cm(dt,z.x,z.y,It.x,Gn+It.y,Ne.x,Ne.y,f,jn,He.x,He.y,ln,vn),Cm(dt,z.x,z.y,Yt.x,Gn+Yt.y,Ne.x+Ne.w,Ne.y,f,jn,pn.x,He.y,ln,vn),Cm(dt,z.x,z.y,Oe.x,Gn+Oe.y,Ne.x,Ne.y+Ne.h,f,jn,He.x,pn.y,ln,vn),Cm(dt,z.x,z.y,sn.x,Gn+sn.y,Ne.x+Ne.w,Ne.y+Ne.h,f,jn,pn.x,pn.y,ln,vn),x0(i.dynamicLayoutVertexArray,z,ce),ct.emplaceBack(er,er+2,er+1),ct.emplaceBack(er+1,er+2,er+3),wt.vertexLength+=4,wt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Xe[0]),st!==h.length-1&&cr===h[st+1].sectionIndex||i.programConfigurations.populatePaintArrays(dt.length,M,M.index,{},lt,qt&&qt[cr])}i.placedSymbolArray.emplaceBack(z.x,z.y,Et,this.glyphOffsetArray.length-Et,Vt,U,W,z.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],P,0,!1,0,et)}_addCollisionDebugVertex(i,h,f,v,w,M){return h.emplaceBack(0,0),i.emplaceBack(f.x,f.y,v,w,Math.round(M.x),Math.round(M.y))}addCollisionDebugVertices(i,h,f,v,w,M,P){const z=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),U=z.vertexLength,W=w.layoutVertexArray,et=w.collisionVertexArray,lt=P.anchorX,ct=P.anchorY;this._addCollisionDebugVertex(W,et,M,lt,ct,new k(i,h)),this._addCollisionDebugVertex(W,et,M,lt,ct,new k(f,h)),this._addCollisionDebugVertex(W,et,M,lt,ct,new k(f,v)),this._addCollisionDebugVertex(W,et,M,lt,ct,new k(i,v)),z.vertexLength+=4;const dt=w.indexArray;dt.emplaceBack(U,U+1),dt.emplaceBack(U+1,U+2),dt.emplaceBack(U+2,U+3),dt.emplaceBack(U+3,U),z.primitiveLength+=4}addDebugCollisionBoxes(i,h,f,v){for(let w=i;w<h;w++){const M=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(M.x1,M.y1,M.x2,M.y2,v?this.textCollisionBox:this.iconCollisionBox,M.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Kd($e,Lv.members,an),this.iconCollisionBox=new Kd($e,Lv.members,an);for(let i=0;i<this.symbolInstances.length;i++){const h=this.symbolInstances.get(i);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(i,h,f,v,w,M,P,z,U){const W={};for(let et=h;et<f;et++){const lt=i.get(et);W.textBox={x1:lt.x1,y1:lt.y1,x2:lt.x2,y2:lt.y2,anchorPointX:lt.anchorPointX,anchorPointY:lt.anchorPointY},W.textFeatureIndex=lt.featureIndex;break}for(let et=v;et<w;et++){const lt=i.get(et);W.verticalTextBox={x1:lt.x1,y1:lt.y1,x2:lt.x2,y2:lt.y2,anchorPointX:lt.anchorPointX,anchorPointY:lt.anchorPointY},W.verticalTextFeatureIndex=lt.featureIndex;break}for(let et=M;et<P;et++){const lt=i.get(et);W.iconBox={x1:lt.x1,y1:lt.y1,x2:lt.x2,y2:lt.y2,anchorPointX:lt.anchorPointX,anchorPointY:lt.anchorPointY},W.iconFeatureIndex=lt.featureIndex;break}for(let et=z;et<U;et++){const lt=i.get(et);W.verticalIconBox={x1:lt.x1,y1:lt.y1,x2:lt.x2,y2:lt.y2,anchorPointX:lt.anchorPointX,anchorPointY:lt.anchorPointY},W.verticalIconFeatureIndex=lt.featureIndex;break}return W}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const f=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,h){const f=i.placedSymbolArray.get(h),v=f.vertexStartIndex+4*f.numGlyphs;for(let w=f.vertexStartIndex;w<v;w+=4)i.indexArray.emplaceBack(w,w+2,w+1),i.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(i),f=Math.cos(i),v=[],w=[],M=[];for(let P=0;P<this.symbolInstances.length;++P){M.push(P);const z=this.symbolInstances.get(P);v.push(0|Math.round(h*z.anchorX+f*z.anchorY)),w.push(z.featureIndex)}return M.sort((P,z)=>v[P]-v[z]||w[z]-w[P]),M}addToSortKeyRanges(i,h){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===h?f.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const f=this.symbolInstances.get(h);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((v,w,M)=>{v>=0&&M.indexOf(v)===w&&this.addIndicesForPlacedSymbol(this.text,v)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let w0,C0;On("SymbolBucket",Yd,{omit:["layers","collisionBoxArray","features","compareText"]}),Yd.MAX_GLYPHS=65535,Yd.addDynamicAttributes=x0;var _p={get paint(){return C0=C0||new ya({"icon-opacity":new lr(_t.paint_symbol["icon-opacity"]),"icon-color":new lr(_t.paint_symbol["icon-color"]),"icon-halo-color":new lr(_t.paint_symbol["icon-halo-color"]),"icon-halo-width":new lr(_t.paint_symbol["icon-halo-width"]),"icon-halo-blur":new lr(_t.paint_symbol["icon-halo-blur"]),"icon-translate":new Yn(_t.paint_symbol["icon-translate"]),"icon-translate-anchor":new Yn(_t.paint_symbol["icon-translate-anchor"]),"text-opacity":new lr(_t.paint_symbol["text-opacity"]),"text-color":new lr(_t.paint_symbol["text-color"],{runtimeType:eo,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new lr(_t.paint_symbol["text-halo-color"]),"text-halo-width":new lr(_t.paint_symbol["text-halo-width"]),"text-halo-blur":new lr(_t.paint_symbol["text-halo-blur"]),"text-translate":new Yn(_t.paint_symbol["text-translate"]),"text-translate-anchor":new Yn(_t.paint_symbol["text-translate-anchor"])})},get layout(){return w0=w0||new ya({"symbol-placement":new Yn(_t.layout_symbol["symbol-placement"]),"symbol-spacing":new Yn(_t.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Yn(_t.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new lr(_t.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Yn(_t.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Yn(_t.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Yn(_t.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Yn(_t.layout_symbol["icon-ignore-placement"]),"icon-optional":new Yn(_t.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Yn(_t.layout_symbol["icon-rotation-alignment"]),"icon-size":new lr(_t.layout_symbol["icon-size"]),"icon-text-fit":new Yn(_t.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yn(_t.layout_symbol["icon-text-fit-padding"]),"icon-image":new lr(_t.layout_symbol["icon-image"]),"icon-rotate":new lr(_t.layout_symbol["icon-rotate"]),"icon-padding":new lr(_t.layout_symbol["icon-padding"]),"icon-keep-upright":new Yn(_t.layout_symbol["icon-keep-upright"]),"icon-offset":new lr(_t.layout_symbol["icon-offset"]),"icon-anchor":new lr(_t.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Yn(_t.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Yn(_t.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Yn(_t.layout_symbol["text-rotation-alignment"]),"text-field":new lr(_t.layout_symbol["text-field"]),"text-font":new lr(_t.layout_symbol["text-font"]),"text-size":new lr(_t.layout_symbol["text-size"]),"text-max-width":new lr(_t.layout_symbol["text-max-width"]),"text-line-height":new Yn(_t.layout_symbol["text-line-height"]),"text-letter-spacing":new lr(_t.layout_symbol["text-letter-spacing"]),"text-justify":new lr(_t.layout_symbol["text-justify"]),"text-radial-offset":new lr(_t.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Yn(_t.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new lr(_t.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new lr(_t.layout_symbol["text-anchor"]),"text-max-angle":new Yn(_t.layout_symbol["text-max-angle"]),"text-writing-mode":new Yn(_t.layout_symbol["text-writing-mode"]),"text-rotate":new lr(_t.layout_symbol["text-rotate"]),"text-padding":new Yn(_t.layout_symbol["text-padding"]),"text-keep-upright":new Yn(_t.layout_symbol["text-keep-upright"]),"text-transform":new lr(_t.layout_symbol["text-transform"]),"text-offset":new lr(_t.layout_symbol["text-offset"]),"text-allow-overlap":new Yn(_t.layout_symbol["text-allow-overlap"]),"text-overlap":new Yn(_t.layout_symbol["text-overlap"]),"text-ignore-placement":new Yn(_t.layout_symbol["text-ignore-placement"]),"text-optional":new Yn(_t.layout_symbol["text-optional"])})}};class I0{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Pr,this.defaultValue=i}evaluate(i){if(i.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(i.formattedSection))return h.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}On("FormatSectionOverride",I0,{omit:["defaultValue"]});class bp extends Ka{constructor(i){super(i,_p)}recalculate(i,h){if(super.recalculate(i,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const v=[];for(const w of f)v.indexOf(w)<0&&v.push(w);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,h,f,v){const w=this.layout.get(i).evaluate(h,{},f,v),M=this._unevaluatedLayout._values[i];return M.isDataDriven()||pa(M.value)||!w?w:function(P,z){return z.replace(/{([^{}]+)}/g,(U,W)=>P&&W in P?String(P[W]):"")}(h.properties,w)}createBucket(i){return new Yd(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of _p.paint.overridableProperties){if(!bp.hasPaintOverride(this.layout,i))continue;const h=this.paint.get(i),f=new I0(h),v=new Lc(f,h.property.specification);let w=null;w=h.value.kind==="constant"||h.value.kind==="source"?new cl("source",v):new Ta("composite",v,h.value.zoomStops),this.paint._values[i]=new na(h.property,w,h.parameters)}}_handleOverridablePaintPropertyUpdate(i,h,f){return!(!this.layout||h.isDataDriven()||f.isDataDriven())&&bp.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,h){const f=i.get("text-field"),v=_p.paint.properties[h];let w=!1;const M=P=>{for(const z of P)if(v.overrides&&v.overrides.hasOverride(z))return void(w=!0)};if(f.value.kind==="constant"&&f.value.value instanceof dn)M(f.value.value.sections);else if(f.value.kind==="source"){const P=U=>{w||(U instanceof xi&&kn(U.value)===Pl?M(U.value.sections):U instanceof ua?M(U.sections):U.eachChild(P))},z=f.value;z._styleExpression&&P(z._styleExpression.expression)}return w}}let M0;var Zv={get paint(){return M0=M0||new ya({"background-color":new Yn(_t.paint_background["background-color"]),"background-pattern":new vu(_t.paint_background["background-pattern"]),"background-opacity":new Yn(_t.paint_background["background-opacity"])})}};class Mx extends Ka{constructor(i){super(i,Zv)}}let Wv;var Sx={get paint(){return Wv=Wv||new ya({"raster-opacity":new Yn(_t.paint_raster["raster-opacity"]),"raster-hue-rotate":new Yn(_t.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Yn(_t.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Yn(_t.paint_raster["raster-brightness-max"]),"raster-saturation":new Yn(_t.paint_raster["raster-saturation"]),"raster-contrast":new Yn(_t.paint_raster["raster-contrast"]),"raster-resampling":new Yn(_t.paint_raster["raster-resampling"]),"raster-fade-duration":new Yn(_t.paint_raster["raster-fade-duration"])})}};class Im extends Ka{constructor(i){super(i,Sx)}}class Mm extends Ka{constructor(i){super(i,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Ex{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Tx={once:!0},xp=63710088e-1;class Mu{constructor(i,h){if(isNaN(i)||isNaN(h))throw new Error(`Invalid LngLat object: (${i}, ${h})`);if(this.lng=+i,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Mu(nn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const h=Math.PI/180,f=this.lat*h,v=i.lat*h,w=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((i.lng-this.lng)*h);return xp*Math.acos(Math.min(w,1))}static convert(i){if(i instanceof Mu)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Mu(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Mu(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const qv=2*Math.PI*xp;function Kv(u){return qv*Math.cos(u*Math.PI/180)}function Yv(u){return(180+u)/360}function Xv(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function Qv(u,i){return u/Kv(i)}function S0(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function Jv(u,i){return u*Kv(S0(i))}class Ap{constructor(i,h,f=0){this.x=+i,this.y=+h,this.z=+f}static fromLngLat(i,h=0){const f=Mu.convert(i);return new Ap(Yv(f.lng),Xv(f.lat),Qv(h,f.lat))}toLngLat(){return new Mu(360*this.x-180,S0(this.y))}toAltitude(){return Jv(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/qv*(i=S0(this.y),1/Math.cos(i*Math.PI/180));var i}}function t_(u,i,h){var f=2*Math.PI*6378137/256/Math.pow(2,h);return[u*f-2*Math.PI*6378137/2,i*f-2*Math.PI*6378137/2]}class E0{constructor(i,h,f){if(!function(v,w,M){return!(v<0||v>25||M<0||M>=Math.pow(2,v)||w<0||w>=Math.pow(2,v))}(i,h,f))throw new Error(`x=${h}, y=${f}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=h,this.y=f,this.key=Fa(0,i,i,h,f)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,h,f){const v=(M=this.y,P=this.z,z=t_(256*(w=this.x),256*(M=Math.pow(2,P)-M-1),P),U=t_(256*(w+1),256*(M+1),P),z[0]+","+z[1]+","+U[0]+","+U[1]);var w,M,P,z,U;const W=function(et,lt,ct){let dt,wt="";for(let Et=et;Et>0;Et--)dt=1<<Et-1,wt+=(lt&dt?1:0)+(ct&dt?2:0);return wt}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,W).replace(/{bbox-epsg-3857}/g,v)}isChildOf(i){const h=this.z-i.z;return h>0&&i.x===this.x>>h&&i.y===this.y>>h}getTilePoint(i){const h=Math.pow(2,this.z);return new k((i.x*h-this.x)*Xt,(i.y*h-this.y)*Xt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class e_{constructor(i,h){this.wrap=i,this.canonical=h,this.key=Fa(i,h.z,h.z,h.x,h.y)}}class Gs{constructor(i,h,f,v,w){if(this.terrainRttPosMatrix32f=null,i<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${f}`);this.overscaledZ=i,this.wrap=h,this.canonical=new E0(f,+v,+w),this.key=Fa(h,i,f,v,w)}clone(){return new Gs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-i;return i>this.canonical.z?new Gs(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Gs(i,this.wrap,i,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(i,h){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-i;return i>this.canonical.z?Fa(this.wrap*+h,i,this.canonical.z,this.canonical.x,this.canonical.y):Fa(this.wrap*+h,i,i,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const h=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>h&&i.canonical.y===this.canonical.y>>h}children(i){if(this.overscaledZ>=i)return[new Gs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new Gs(h,this.wrap,h,f,v),new Gs(h,this.wrap,h,f+1,v),new Gs(h,this.wrap,h,f,v+1),new Gs(h,this.wrap,h,f+1,v+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Gs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Gs(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new e_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Ap(i.x-this.wrap,i.y))}}function Fa(u,i,h,f,v){(u*=2)<0&&(u=-1*u-1);const w=1<<h;return(w*w*u+w*v+f).toString(36)+h.toString(36)+i.toString(36)}On("CanonicalTileID",E0),On("OverscaledTileID",Gs,{omit:["terrainRttPosMatrix32f"]});class n_{constructor(i,h,f,v=1,w=1,M=1,P=0){if(this.uid=i,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Tt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const z=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=w,this.blueFactor=M,this.baseShift=P;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let U=0;U<z;U++)this.data[this._idx(-1,U)]=this.data[this._idx(0,U)],this.data[this._idx(z,U)]=this.data[this._idx(z-1,U)],this.data[this._idx(U,-1)]=this.data[this._idx(U,0)],this.data[this._idx(U,z)]=this.data[this._idx(U,z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(z,-1)]=this.data[this._idx(z-1,0)],this.data[this._idx(-1,z)]=this.data[this._idx(0,z-1)],this.data[this._idx(z,z)]=this.data[this._idx(z-1,z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let U=0;U<z;U++)for(let W=0;W<z;W++){const et=this.get(U,W);et>this.max&&(this.max=et),et<this.min&&(this.min=et)}}get(i,h){const f=new Uint8Array(this.data.buffer),v=4*this._idx(i,h);return this.unpack(f[v],f[v+1],f[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,h){if(i<-1||i>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(i+1)}unpack(i,h,f){return i*this.redFactor+h*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new xo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,h,f){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let v=h*this.dim,w=h*this.dim+this.dim,M=f*this.dim,P=f*this.dim+this.dim;switch(h){case-1:v=w-1;break;case 1:w=v+1}switch(f){case-1:M=P-1;break;case 1:P=M+1}const z=-h*this.dim,U=-f*this.dim;for(let W=M;W<P;W++)for(let et=v;et<w;et++)this.data[this._idx(et,W)]=i.data[this._idx(et+z,W+U)]}}On("DEMData",n_);class r_{constructor(i){this._stringToNumber={},this._numberToString=[];for(let h=0;h<i.length;h++){const f=i[h];this._stringToNumber[f]=h,this._numberToString[h]=f}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class ph{constructor(i,h,f,v,w){this.type="Feature",this._vectorTileFeature=i,i._z=h,i._x=f,i._y=v,this.properties=i.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(i[h]=this[h]);return i}}class Er{constructor(i,h){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Yl(Xt,16,0),this.grid3D=new Yl(Xt,16,0),this.featureIndexArray=new jt,this.promoteId=h}insert(i,h,f,v,w,M){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,w);const z=M?this.grid3D:this.grid;for(let U=0;U<h.length;U++){const W=h[U],et=[1/0,1/0,-1/0,-1/0];for(let lt=0;lt<W.length;lt++){const ct=W[lt];et[0]=Math.min(et[0],ct.x),et[1]=Math.min(et[1],ct.y),et[2]=Math.max(et[2],ct.x),et[3]=Math.max(et[3],ct.y)}et[0]<Xt&&et[1]<Xt&&et[2]>=0&&et[3]>=0&&z.insert(P,et[0],et[1],et[2],et[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new fp.VectorTile(new g0(this.rawTileData)).layers,this.sourceLayerCoder=new r_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,h,f,v){this.loadVTLayers();const w=i.params,M=Xt/i.tileSize/i.scale,P=Qu(w.filter),z=i.queryGeometry,U=i.queryPadding*M,W=Qa(z),et=this.grid.query(W.minX-U,W.minY-U,W.maxX+U,W.maxY+U),lt=Qa(i.cameraQueryGeometry),ct=this.grid3D.query(lt.minX-U,lt.minY-U,lt.maxX+U,lt.maxY+U,(Et,Vt,ce,qt)=>function(st,It,Yt,Oe,sn){for(const He of st)if(It<=He.x&&Yt<=He.y&&Oe>=He.x&&sn>=He.y)return!0;const Ne=[new k(It,Yt),new k(It,sn),new k(Oe,sn),new k(Oe,Yt)];if(st.length>2){for(const He of Ne)if(Nc(st,He))return!0}for(let He=0;He<st.length-1;He++)if(Hg(st[He],st[He+1],Ne))return!0;return!1}(i.cameraQueryGeometry,Et-U,Vt-U,ce+U,qt+U));for(const Et of ct)et.push(Et);et.sort(wo);const dt={};let wt;for(let Et=0;Et<et.length;Et++){const Vt=et[Et];if(Vt===wt)continue;wt=Vt;const ce=this.featureIndexArray.get(Vt);let qt=null;this.loadMatchingFeature(dt,ce.bucketIndex,ce.sourceLayerIndex,ce.featureIndex,P,w.layers,w.availableImages,h,f,v,(st,It,Yt)=>(qt||(qt=Ya(st)),It.queryIntersectsFeature({queryGeometry:z,feature:st,featureState:Yt,geometry:qt,zoom:this.z,transform:i.transform,pixelsToTileUnits:M,pixelPosMatrix:i.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:i.getElevation})))}return dt}loadMatchingFeature(i,h,f,v,w,M,P,z,U,W,et){const lt=this.bucketLayerIDs[h];if(M&&!lt.some(Et=>M.has(Et)))return;const ct=this.sourceLayerCoder.decode(f),dt=this.vtLayers[ct].feature(v);if(w.needGeometry){const Et=$s(dt,!0);if(!w.filter(new li(this.tileID.overscaledZ),Et,this.tileID.canonical))return}else if(!w.filter(new li(this.tileID.overscaledZ),dt))return;const wt=this.getId(dt,ct);for(let Et=0;Et<lt.length;Et++){const Vt=lt[Et];if(M&&!M.has(Vt))continue;const ce=z[Vt];if(!ce)continue;let qt={};wt&&W&&(qt=W.getState(ce.sourceLayer||"_geojsonTileLayer",wt));const st=be({},U[Vt]);st.paint=i_(st.paint,ce.paint,dt,qt,P),st.layout=i_(st.layout,ce.layout,dt,qt,P);const It=!et||et(dt,ce,qt);if(!It)continue;const Yt=new ph(dt,this.z,this.x,this.y,wt);Yt.layer=st;let Oe=i[Vt];Oe===void 0&&(Oe=i[Vt]=[]),Oe.push({featureIndex:v,feature:Yt,intersectionZ:It})}}lookupSymbolFeatures(i,h,f,v,w,M,P,z){const U={};this.loadVTLayers();const W=Qu(w);for(const et of i)this.loadMatchingFeature(U,f,v,et,W,M,P,z,h);return U}hasLayer(i){for(const h of this.bucketLayerIDs)for(const f of h)if(i===f)return!0;return!1}getId(i,h){var f;let v=i.id;return this.promoteId&&(v=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((f=i.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(v=Number(i.properties.cluster_id))),v}}function i_(u,i,h,f,v){return xe(u,(w,M)=>{const P=i instanceof ga?i.get(M):null;return P&&P.evaluate?P.evaluate(h,f,v):P})}function Qa(u){let i=1/0,h=1/0,f=-1/0,v=-1/0;for(const w of u)i=Math.min(i,w.x),h=Math.min(h,w.y),f=Math.max(f,w.x),v=Math.max(v,w.y);return{minX:i,minY:h,maxX:f,maxY:v}}function wo(u,i){return i-u}function o_(u,i,h,f,v){const w=[];for(let M=0;M<u.length;M++){const P=u[M];let z;for(let U=0;U<P.length-1;U++){let W=P[U],et=P[U+1];W.x<i&&et.x<i||(W.x<i?W=new k(i,W.y+(i-W.x)/(et.x-W.x)*(et.y-W.y))._round():et.x<i&&(et=new k(i,W.y+(i-W.x)/(et.x-W.x)*(et.y-W.y))._round()),W.y<h&&et.y<h||(W.y<h?W=new k(W.x+(h-W.y)/(et.y-W.y)*(et.x-W.x),h)._round():et.y<h&&(et=new k(W.x+(h-W.y)/(et.y-W.y)*(et.x-W.x),h)._round()),W.x>=f&&et.x>=f||(W.x>=f?W=new k(f,W.y+(f-W.x)/(et.x-W.x)*(et.y-W.y))._round():et.x>=f&&(et=new k(f,W.y+(f-W.x)/(et.x-W.x)*(et.y-W.y))._round()),W.y>=v&&et.y>=v||(W.y>=v?W=new k(W.x+(v-W.y)/(et.y-W.y)*(et.x-W.x),v)._round():et.y>=v&&(et=new k(W.x+(v-W.y)/(et.y-W.y)*(et.x-W.x),v)._round()),z&&W.equals(z[z.length-1])||(z=[W],w.push(z)),z.push(et)))))}}return w}On("FeatureIndex",Er,{omit:["rawTileData","sourceLayerCoder"]});class Ja extends k{constructor(i,h,f,v){super(i,h),this.angle=f,v!==void 0&&(this.segment=v)}clone(){return new Ja(this.x,this.y,this.angle,this.segment)}}function a_(u,i,h,f,v){if(i.segment===void 0||h===0)return!0;let w=i,M=i.segment+1,P=0;for(;P>-h/2;){if(M--,M<0)return!1;P-=u[M].dist(w),w=u[M]}P+=u[M].dist(u[M+1]),M++;const z=[];let U=0;for(;P<h/2;){const W=u[M],et=u[M+1];if(!et)return!1;let lt=u[M-1].angleTo(W)-W.angleTo(et);for(lt=Math.abs((lt+3*Math.PI)%(2*Math.PI)-Math.PI),z.push({distance:P,angleDelta:lt}),U+=lt;P-z[0].distance>f;)U-=z.shift().angleDelta;if(U>v)return!1;M++,P+=W.dist(et)}return!0}function s_(u){let i=0;for(let h=0;h<u.length-1;h++)i+=u[h].dist(u[h+1]);return i}function l_(u,i,h){return u?.6*i*h:0}function c_(u,i){return Math.max(u?u.right-u.left:0,i?i.right-i.left:0)}function Px(u,i,h,f,v,w){const M=l_(h,v,w),P=c_(h,f)*w;let z=0;const U=s_(u)/2;for(let W=0;W<u.length-1;W++){const et=u[W],lt=u[W+1],ct=et.dist(lt);if(z+ct>U){const dt=(U-z)/ct,wt=Br.number(et.x,lt.x,dt),Et=Br.number(et.y,lt.y,dt),Vt=new Ja(wt,Et,lt.angleTo(et),W);return Vt._round(),!M||a_(u,Vt,P,M,i)?Vt:void 0}z+=ct}}function T0(u,i,h,f,v,w,M,P,z){const U=l_(f,w,M),W=c_(f,v),et=W*M,lt=u[0].x===0||u[0].x===z||u[0].y===0||u[0].y===z;return i-et<i/4&&(i=et+i/4),u_(u,lt?i/2*P%i:(W/2+2*w)*M*P%i,i,U,h,et,lt,!1,z)}function u_(u,i,h,f,v,w,M,P,z){const U=w/2,W=s_(u);let et=0,lt=i-h,ct=[];for(let dt=0;dt<u.length-1;dt++){const wt=u[dt],Et=u[dt+1],Vt=wt.dist(Et),ce=Et.angleTo(wt);for(;lt+h<et+Vt;){lt+=h;const qt=(lt-et)/Vt,st=Br.number(wt.x,Et.x,qt),It=Br.number(wt.y,Et.y,qt);if(st>=0&&st<z&&It>=0&&It<z&&lt-U>=0&&lt+U<=W){const Yt=new Ja(st,It,ce,dt);Yt._round(),f&&!a_(u,Yt,w,f,v)||ct.push(Yt)}}et+=Vt}return P||ct.length||M||(ct=u_(u,et/2,h,f,v,w,M,!0,z)),ct}On("Anchor",Ja);const Zs=Xa;function P0(u,i,h,f){const v=[],w=u.image,M=w.pixelRatio,P=w.paddedRect.w-2*Zs,z=w.paddedRect.h-2*Zs;let U={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom};const W=w.stretchX||[[0,P]],et=w.stretchY||[[0,z]],lt=(Xe,jn)=>Xe+jn[1]-jn[0],ct=W.reduce(lt,0),dt=et.reduce(lt,0),wt=P-ct,Et=z-dt;let Vt=0,ce=ct,qt=0,st=dt,It=0,Yt=wt,Oe=0,sn=Et;if(w.content&&f){const Xe=w.content,jn=Xe[2]-Xe[0],cr=Xe[3]-Xe[1];(w.textFitWidth||w.textFitHeight)&&(U=$v(u)),Vt=qh(W,0,Xe[0]),qt=qh(et,0,Xe[1]),ce=qh(W,Xe[0],Xe[2]),st=qh(et,Xe[1],Xe[3]),It=Xe[0]-Vt,Oe=Xe[1]-qt,Yt=jn-ce,sn=cr-st}const Ne=U.x1,He=U.y1,pn=U.x2-Ne,ln=U.y2-He,vn=(Xe,jn,cr,er)=>{const Gn=$i(Xe.stretch-Vt,ce,pn,Ne),Vr=wp(Xe.fixed-It,Yt,Xe.stretch,ct),Gi=$i(jn.stretch-qt,st,ln,He),Co=wp(jn.fixed-Oe,sn,jn.stretch,dt),ia=$i(cr.stretch-Vt,ce,pn,Ne),oa=wp(cr.fixed-It,Yt,cr.stretch,ct),es=$i(er.stretch-qt,st,ln,He),Ko=wp(er.fixed-Oe,sn,er.stretch,dt),Ni=new k(Gn,Gi),Lo=new k(ia,Gi),Yo=new k(ia,es),Ro=new k(Gn,es),_a=new k(Vr/M,Co/M),Ws=new k(oa/M,Ko/M),Do=i*Math.PI/180;if(Do){const Oo=Math.sin(Do),zo=Math.cos(Do),lo=[zo,-Oo,Oo,zo];Ni._matMult(lo),Lo._matMult(lo),Ro._matMult(lo),Yo._matMult(lo)}const ns=Xe.stretch+Xe.fixed,Io=jn.stretch+jn.fixed;return{tl:Ni,tr:Lo,bl:Ro,br:Yo,tex:{x:w.paddedRect.x+Zs+ns,y:w.paddedRect.y+Zs+Io,w:cr.stretch+cr.fixed-ns,h:er.stretch+er.fixed-Io},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:_a,pixelOffsetBR:Ws,minFontScaleX:Yt/M/pn,minFontScaleY:sn/M/ln,isSDF:h}};if(f&&(w.stretchX||w.stretchY)){const Xe=Ki(W,wt,ct),jn=Ki(et,Et,dt);for(let cr=0;cr<Xe.length-1;cr++){const er=Xe[cr],Gn=Xe[cr+1];for(let Vr=0;Vr<jn.length-1;Vr++)v.push(vn(er,jn[Vr],Gn,jn[Vr+1]))}}else v.push(vn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:z+1}));return v}function qh(u,i,h){let f=0;for(const v of u)f+=Math.max(i,Math.min(h,v[1]))-Math.max(i,Math.min(h,v[0]));return f}function Ki(u,i,h){const f=[{fixed:-1,stretch:0}];for(const[v,w]of u){const M=f[f.length-1];f.push({fixed:v-M.stretch,stretch:M.stretch}),f.push({fixed:v-M.stretch,stretch:M.stretch+(w-v)})}return f.push({fixed:i+Zs,stretch:h}),f}function $i(u,i,h,f){return u/i*h+f}function wp(u,i,h,f){return u-i*h/f}class Sm{constructor(i,h,f,v,w,M,P,z,U,W){var et;if(this.boxStartIndex=i.length,U){let lt=M.top,ct=M.bottom;const dt=M.collisionPadding;dt&&(lt-=dt[1],ct+=dt[3]);let wt=ct-lt;wt>0&&(wt=Math.max(10,wt),this.circleDiameter=wt)}else{const lt=!((et=M.image)===null||et===void 0)&&et.content&&(M.image.textFitWidth||M.image.textFitHeight)?$v(M):{x1:M.left,y1:M.top,x2:M.right,y2:M.bottom};lt.y1=lt.y1*P-z[0],lt.y2=lt.y2*P+z[2],lt.x1=lt.x1*P-z[3],lt.x2=lt.x2*P+z[1];const ct=M.collisionPadding;if(ct&&(lt.x1-=ct[0]*P,lt.y1-=ct[1]*P,lt.x2+=ct[2]*P,lt.y2+=ct[3]*P),W){const dt=new k(lt.x1,lt.y1),wt=new k(lt.x2,lt.y1),Et=new k(lt.x1,lt.y2),Vt=new k(lt.x2,lt.y2),ce=W*Math.PI/180;dt._rotate(ce),wt._rotate(ce),Et._rotate(ce),Vt._rotate(ce),lt.x1=Math.min(dt.x,wt.x,Et.x,Vt.x),lt.x2=Math.max(dt.x,wt.x,Et.x,Vt.x),lt.y1=Math.min(dt.y,wt.y,Et.y,Vt.y),lt.y2=Math.max(dt.y,wt.y,Et.y,Vt.y)}i.emplaceBack(h.x,h.y,lt.x1,lt.y1,lt.x2,lt.y2,f,v,w)}this.boxEndIndex=i.length}}class kx{constructor(i=[],h=(f,v)=>f<v?-1:f>v?1:0){if(this.data=i,this.length=this.data.length,this.compare=h,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:h,compare:f}=this,v=h[i];for(;i>0;){const w=i-1>>1,M=h[w];if(f(v,M)>=0)break;h[i]=M,i=w}h[i]=v}_down(i){const{data:h,compare:f}=this,v=this.length>>1,w=h[i];for(;i<v;){let M=1+(i<<1);const P=M+1;if(P<this.length&&f(h[P],h[M])<0&&(M=P),f(h[M],w)>=0)break;h[i]=h[M],i=M}h[i]=w}}function Lx(u,i=1,h=!1){let f=1/0,v=1/0,w=-1/0,M=-1/0;const P=u[0];for(let ct=0;ct<P.length;ct++){const dt=P[ct];(!ct||dt.x<f)&&(f=dt.x),(!ct||dt.y<v)&&(v=dt.y),(!ct||dt.x>w)&&(w=dt.x),(!ct||dt.y>M)&&(M=dt.y)}const z=Math.min(w-f,M-v);let U=z/2;const W=new kx([],Rx);if(z===0)return new k(f,v);for(let ct=f;ct<w;ct+=z)for(let dt=v;dt<M;dt+=z)W.push(new Xd(ct+U,dt+U,U,u));let et=function(ct){let dt=0,wt=0,Et=0;const Vt=ct[0];for(let ce=0,qt=Vt.length,st=qt-1;ce<qt;st=ce++){const It=Vt[ce],Yt=Vt[st],Oe=It.x*Yt.y-Yt.x*It.y;wt+=(It.x+Yt.x)*Oe,Et+=(It.y+Yt.y)*Oe,dt+=3*Oe}return new Xd(wt/dt,Et/dt,0,ct)}(u),lt=W.length;for(;W.length;){const ct=W.pop();(ct.d>et.d||!et.d)&&(et=ct,h&&console.log("found best %d after %d probes",Math.round(1e4*ct.d)/1e4,lt)),ct.max-et.d<=i||(U=ct.h/2,W.push(new Xd(ct.p.x-U,ct.p.y-U,U,u)),W.push(new Xd(ct.p.x+U,ct.p.y-U,U,u)),W.push(new Xd(ct.p.x-U,ct.p.y+U,U,u)),W.push(new Xd(ct.p.x+U,ct.p.y+U,U,u)),lt+=4)}return h&&(console.log(`num probes: ${lt}`),console.log(`best distance: ${et.d}`)),et.p}function Rx(u,i){return i.max-u.max}function Xd(u,i,h,f){this.p=new k(u,i),this.h=h,this.d=function(v,w){let M=!1,P=1/0;for(let z=0;z<w.length;z++){const U=w[z];for(let W=0,et=U.length,lt=et-1;W<et;lt=W++){const ct=U[W],dt=U[lt];ct.y>v.y!=dt.y>v.y&&v.x<(dt.x-ct.x)*(v.y-ct.y)/(dt.y-ct.y)+ct.x&&(M=!M),P=Math.min(P,ip(v,ct,dt))}}return(M?1:-1)*Math.sqrt(P)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var ra;l.aB=void 0,(ra=l.aB||(l.aB={}))[ra.center=1]="center",ra[ra.left=2]="left",ra[ra.right=3]="right",ra[ra.top=4]="top",ra[ra.bottom=5]="bottom",ra[ra["top-left"]=6]="top-left",ra[ra["top-right"]=7]="top-right",ra[ra["bottom-left"]=8]="bottom-left",ra[ra["bottom-right"]=9]="bottom-right";const Su=7,Kh=Number.POSITIVE_INFINITY;function Em(u,i){return i[1]!==Kh?function(h,f,v){let w=0,M=0;switch(f=Math.abs(f),v=Math.abs(v),h){case"top-right":case"top-left":case"top":M=v-Su;break;case"bottom-right":case"bottom-left":case"bottom":M=-v+Su}switch(h){case"top-right":case"bottom-right":case"right":w=-f;break;case"top-left":case"bottom-left":case"left":w=f}return[w,M]}(u,i[0],i[1]):function(h,f){let v=0,w=0;f<0&&(f=0);const M=f/Math.SQRT2;switch(h){case"top-right":case"top-left":w=M-Su;break;case"bottom-right":case"bottom-left":w=-M+Su;break;case"bottom":w=-f+Su;break;case"top":w=f-Su}switch(h){case"top-right":case"bottom-right":v=-M;break;case"top-left":case"bottom-left":v=M;break;case"left":v=f;break;case"right":v=-f}return[v,w]}(u,i[0])}function h_(u,i,h){var f;const v=u.layout,w=(f=v.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(i,{},h);if(w){const P=w.values,z=[];for(let U=0;U<P.length;U+=2){const W=z[U]=P[U],et=P[U+1].map(lt=>lt*Ao);W.startsWith("top")?et[1]-=Su:W.startsWith("bottom")&&(et[1]+=Su),z[U+1]=et}return new Kn(z)}const M=v.get("text-variable-anchor");if(M){let P;P=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(i,{},h)*Ao,Kh]:v.get("text-offset").evaluate(i,{},h).map(U=>U*Ao);const z=[];for(const U of M)z.push(U,Em(U,P));return new Kn(z)}return null}function Tm(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Pm(u,i,h,f,v,w,M,P,z,U,W,et){let lt=w.textMaxSize.evaluate(i,{});lt===void 0&&(lt=M);const ct=u.layers[0].layout,dt=ct.get("icon-offset").evaluate(i,{},W),wt=Yh(h.horizontal),Et=M/24,Vt=u.tilePixelRatio*Et,ce=u.tilePixelRatio*lt/24,qt=u.tilePixelRatio*P,st=u.tilePixelRatio*ct.get("symbol-spacing"),It=ct.get("text-padding")*u.tilePixelRatio,Yt=function(cr,er,Gn,Vr=1){const Gi=cr.get("icon-padding").evaluate(er,{},Gn),Co=Gi&&Gi.values;return[Co[0]*Vr,Co[1]*Vr,Co[2]*Vr,Co[3]*Vr]}(ct,i,W,u.tilePixelRatio),Oe=ct.get("text-max-angle")/180*Math.PI,sn=ct.get("text-rotation-alignment")!=="viewport"&&ct.get("symbol-placement")!=="point",Ne=ct.get("icon-rotation-alignment")==="map"&&ct.get("symbol-placement")!=="point",He=ct.get("symbol-placement"),pn=st/2,ln=ct.get("icon-text-fit");let vn;f&&ln!=="none"&&(u.allowVerticalPlacement&&h.vertical&&(vn=yp(f,h.vertical,ln,ct.get("icon-text-fit-padding"),dt,Et)),wt&&(f=yp(f,wt,ln,ct.get("icon-text-fit-padding"),dt,Et)));const Xe=W?et.line.getGranularityForZoomLevel(W.z):1,jn=(cr,er)=>{er.x<0||er.x>=Xt||er.y<0||er.y>=Xt||function(Gn,Vr,Gi,Co,ia,oa,es,Ko,Ni,Lo,Yo,Ro,_a,Ws,Do,ns,Io,Oo,zo,lo,Si,ic,tf,oc,Ox){const ef=Gn.addToLineVertexArray(Vr,Gi);let Xh,nf,rf,of,m_=0,g_=0,y_=0,v_=0,O0=-1,z0=-1;const Eu={};let __=Wo("");if(Gn.allowVerticalPlacement&&Co.vertical){const xa=Ko.layout.get("text-rotate").evaluate(Si,{},oc)+90;rf=new Sm(Ni,Vr,Lo,Yo,Ro,Co.vertical,_a,Ws,Do,xa),es&&(of=new Sm(Ni,Vr,Lo,Yo,Ro,es,Io,Oo,Do,xa))}if(ia){const xa=Ko.layout.get("icon-rotate").evaluate(Si,{}),rs=Ko.layout.get("icon-text-fit")!=="none",Qh=P0(ia,xa,tf,rs),qs=es?P0(es,xa,tf,rs):void 0;nf=new Sm(Ni,Vr,Lo,Yo,Ro,ia,Io,Oo,!1,xa),m_=4*Qh.length;const Jh=Gn.iconSizeData;let Uc=null;Jh.kind==="source"?(Uc=[Vc*Ko.layout.get("icon-size").evaluate(Si,{})],Uc[0]>fh&&Tt(`${Gn.layerIds[0]}: Value for "icon-size" is >= ${vp}. Reduce your "icon-size".`)):Jh.kind==="composite"&&(Uc=[Vc*ic.compositeIconSizes[0].evaluate(Si,{},oc),Vc*ic.compositeIconSizes[1].evaluate(Si,{},oc)],(Uc[0]>fh||Uc[1]>fh)&&Tt(`${Gn.layerIds[0]}: Value for "icon-size" is >= ${vp}. Reduce your "icon-size".`)),Gn.addSymbols(Gn.icon,Qh,Uc,lo,zo,Si,l.al.none,Vr,ef.lineStartIndex,ef.lineLength,-1,oc),O0=Gn.icon.placedSymbolArray.length-1,qs&&(g_=4*qs.length,Gn.addSymbols(Gn.icon,qs,Uc,lo,zo,Si,l.al.vertical,Vr,ef.lineStartIndex,ef.lineLength,-1,oc),z0=Gn.icon.placedSymbolArray.length-1)}const Lm=Object.keys(Co.horizontal);for(const xa of Lm){const rs=Co.horizontal[xa];if(!Xh){__=Wo(rs.text);const qs=Ko.layout.get("text-rotate").evaluate(Si,{},oc);Xh=new Sm(Ni,Vr,Lo,Yo,Ro,rs,_a,Ws,Do,qs)}const Qh=rs.positionedLines.length===1;if(y_+=_s(Gn,Vr,rs,oa,Ko,Do,Si,ns,ef,Co.vertical?l.al.horizontal:l.al.horizontalOnly,Qh?Lm:[xa],Eu,O0,ic,oc),Qh)break}Co.vertical&&(v_+=_s(Gn,Vr,Co.vertical,oa,Ko,Do,Si,ns,ef,l.al.vertical,["vertical"],Eu,z0,ic,oc));const b_=Xh?Xh.boxStartIndex:Gn.collisionBoxArray.length,x_=Xh?Xh.boxEndIndex:Gn.collisionBoxArray.length,zx=rf?rf.boxStartIndex:Gn.collisionBoxArray.length,Fx=rf?rf.boxEndIndex:Gn.collisionBoxArray.length,Bx=nf?nf.boxStartIndex:Gn.collisionBoxArray.length,F0=nf?nf.boxEndIndex:Gn.collisionBoxArray.length,Nx=of?of.boxStartIndex:Gn.collisionBoxArray.length,jx=of?of.boxEndIndex:Gn.collisionBoxArray.length;let ac=-1;const ba=(xa,rs)=>xa&&xa.circleDiameter?Math.max(xa.circleDiameter,rs):rs;ac=ba(Xh,ac),ac=ba(rf,ac),ac=ba(nf,ac),ac=ba(of,ac);const Rm=ac>-1?1:0;Rm&&(ac*=Ox/Ao),Gn.glyphOffsetArray.length>=Yd.MAX_GLYPHS&&Tt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Si.sortKey!==void 0&&Gn.addToSortKeyRanges(Gn.symbolInstances.length,Si.sortKey);const Vx=h_(Ko,Si,oc),[Ux,Hx]=function(xa,rs){const Qh=xa.length,qs=rs==null?void 0:rs.values;if((qs==null?void 0:qs.length)>0)for(let Jh=0;Jh<qs.length;Jh+=2){const Uc=qs[Jh+1];xa.emplaceBack(l.aB[qs[Jh]],Uc[0],Uc[1])}return[Qh,xa.length]}(Gn.textAnchorOffsets,Vx);Gn.symbolInstances.emplaceBack(Vr.x,Vr.y,Eu.right>=0?Eu.right:-1,Eu.center>=0?Eu.center:-1,Eu.left>=0?Eu.left:-1,Eu.vertical||-1,O0,z0,__,b_,x_,zx,Fx,Bx,F0,Nx,jx,Lo,y_,v_,m_,g_,Rm,0,_a,ac,Ux,Hx)}(u,er,cr,h,f,v,vn,u.layers[0],u.collisionBoxArray,i.index,i.sourceLayerIndex,u.index,Vt,[It,It,It,It],sn,z,qt,Yt,Ne,dt,i,w,U,W,M)};if(He==="line")for(const cr of o_(i.geometry,0,0,Xt,Xt)){const er=Iu(cr,Xe),Gn=T0(er,st,Oe,h.vertical||wt,f,24,ce,u.overscaling,Xt);for(const Vr of Gn)wt&&Dx(u,wt.text,pn,Vr)||jn(er,Vr)}else if(He==="line-center"){for(const cr of i.geometry)if(cr.length>1){const er=Iu(cr,Xe),Gn=Px(er,Oe,h.vertical||wt,f,24,ce);Gn&&jn(er,Gn)}}else if(i.type==="Polygon")for(const cr of hu(i.geometry,0)){const er=Lx(cr,16);jn(Iu(cr[0],Xe,!0),new Ja(er.x,er.y,0))}else if(i.type==="LineString")for(const cr of i.geometry){const er=Iu(cr,Xe);jn(er,new Ja(er[0].x,er[0].y,0))}else if(i.type==="Point")for(const cr of i.geometry)for(const er of cr)jn([er],new Ja(er.x,er.y,0))}function _s(u,i,h,f,v,w,M,P,z,U,W,et,lt,ct,dt){const wt=function(ce,qt,st,It,Yt,Oe,sn,Ne){const He=It.layout.get("text-rotate").evaluate(Oe,{})*Math.PI/180,pn=[];for(const ln of qt.positionedLines)for(const vn of ln.positionedGlyphs){if(!vn.rect)continue;const Xe=vn.rect||{};let jn=mx+1,cr=!0,er=1,Gn=0;const Vr=(Yt||Ne)&&vn.vertical,Gi=vn.metrics.advance*vn.scale/2;if(Ne&&qt.verticalizable&&(Gn=ln.lineOffset/2-(vn.imageName?-(Ao-vn.metrics.width*vn.scale)/2:(vn.scale-1)*Ao)),vn.imageName){const Oo=sn[vn.imageName];cr=Oo.sdf,er=Oo.pixelRatio,jn=Xa/er}const Co=Yt?[vn.x+Gi,vn.y]:[0,0];let ia=Yt?[0,0]:[vn.x+Gi+st[0],vn.y+st[1]-Gn],oa=[0,0];Vr&&(oa=ia,ia=[0,0]);const es=vn.metrics.isDoubleResolution?2:1,Ko=(vn.metrics.left-jn)*vn.scale-Gi+ia[0],Ni=(-vn.metrics.top-jn)*vn.scale+ia[1],Lo=Ko+Xe.w/es*vn.scale/er,Yo=Ni+Xe.h/es*vn.scale/er,Ro=new k(Ko,Ni),_a=new k(Lo,Ni),Ws=new k(Ko,Yo),Do=new k(Lo,Yo);if(Vr){const Oo=new k(-Gi,Gi-xm),zo=-Math.PI/2,lo=Ao/2-Gi,Si=new k(5-xm-lo,-(vn.imageName?lo:0)),ic=new k(...oa);Ro._rotateAround(zo,Oo)._add(Si)._add(ic),_a._rotateAround(zo,Oo)._add(Si)._add(ic),Ws._rotateAround(zo,Oo)._add(Si)._add(ic),Do._rotateAround(zo,Oo)._add(Si)._add(ic)}if(He){const Oo=Math.sin(He),zo=Math.cos(He),lo=[zo,-Oo,Oo,zo];Ro._matMult(lo),_a._matMult(lo),Ws._matMult(lo),Do._matMult(lo)}const ns=new k(0,0),Io=new k(0,0);pn.push({tl:Ro,tr:_a,bl:Ws,br:Do,tex:Xe,writingMode:qt.writingMode,glyphOffset:Co,sectionIndex:vn.sectionIndex,isSDF:cr,pixelOffsetTL:ns,pixelOffsetBR:Io,minFontScaleX:0,minFontScaleY:0})}return pn}(0,h,P,v,w,M,f,u.allowVerticalPlacement),Et=u.textSizeData;let Vt=null;Et.kind==="source"?(Vt=[Vc*v.layout.get("text-size").evaluate(M,{})],Vt[0]>fh&&Tt(`${u.layerIds[0]}: Value for "text-size" is >= ${vp}. Reduce your "text-size".`)):Et.kind==="composite"&&(Vt=[Vc*ct.compositeTextSizes[0].evaluate(M,{},dt),Vc*ct.compositeTextSizes[1].evaluate(M,{},dt)],(Vt[0]>fh||Vt[1]>fh)&&Tt(`${u.layerIds[0]}: Value for "text-size" is >= ${vp}. Reduce your "text-size".`)),u.addSymbols(u.text,wt,Vt,P,w,M,U,i,z.lineStartIndex,z.lineLength,lt,dt);for(const ce of W)et[ce]=u.text.placedSymbolArray.length-1;return 4*wt.length}function Yh(u){for(const i in u)return u[i];return null}function Dx(u,i,h,f){const v=u.compareText;if(i in v){const w=v[i];for(let M=w.length-1;M>=0;M--)if(f.dist(w[M])<h)return!0}else v[i]=[];return v[i].push(f),!1}const d_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class k0{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,f]=new Uint8Array(i,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=f>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const w=d_[15&f];if(!w)throw new Error("Unrecognized array type.");const[M]=new Uint16Array(i,2,1),[P]=new Uint32Array(i,4,1);return new k0(P,M,w,i)}constructor(i,h=64,f=Float64Array,v){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=f,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const w=d_.indexOf(this.ArrayType),M=2*i*this.ArrayType.BYTES_PER_ELEMENT,P=i*this.IndexArrayType.BYTES_PER_ELEMENT,z=(8-P%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${f}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+P+z,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+M+P+z),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+P+z,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=i)}add(i,h){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=i,this.coords[this._pos++]=h,f}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return L0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,h,f,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:M,nodeSize:P}=this,z=[0,w.length-1,0],U=[];for(;z.length;){const W=z.pop()||0,et=z.pop()||0,lt=z.pop()||0;if(et-lt<=P){for(let Et=lt;Et<=et;Et++){const Vt=M[2*Et],ce=M[2*Et+1];Vt>=i&&Vt<=f&&ce>=h&&ce<=v&&U.push(w[Et])}continue}const ct=lt+et>>1,dt=M[2*ct],wt=M[2*ct+1];dt>=i&&dt<=f&&wt>=h&&wt<=v&&U.push(w[ct]),(W===0?i<=dt:h<=wt)&&(z.push(lt),z.push(ct-1),z.push(1-W)),(W===0?f>=dt:v>=wt)&&(z.push(ct+1),z.push(et),z.push(1-W))}return U}within(i,h,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:w,nodeSize:M}=this,P=[0,v.length-1,0],z=[],U=f*f;for(;P.length;){const W=P.pop()||0,et=P.pop()||0,lt=P.pop()||0;if(et-lt<=M){for(let Et=lt;Et<=et;Et++)Or(w[2*Et],w[2*Et+1],i,h)<=U&&z.push(v[Et]);continue}const ct=lt+et>>1,dt=w[2*ct],wt=w[2*ct+1];Or(dt,wt,i,h)<=U&&z.push(v[ct]),(W===0?i-f<=dt:h-f<=wt)&&(P.push(lt),P.push(ct-1),P.push(1-W)),(W===0?i+f>=dt:h+f>=wt)&&(P.push(ct+1),P.push(et),P.push(1-W))}return z}}function L0(u,i,h,f,v,w){if(v-f<=h)return;const M=f+v>>1;f_(u,i,M,f,v,w),L0(u,i,h,f,M-1,1-w),L0(u,i,h,M+1,v,1-w)}function f_(u,i,h,f,v,w){for(;v>f;){if(v-f>600){const U=v-f+1,W=h-f+1,et=Math.log(U),lt=.5*Math.exp(2*et/3),ct=.5*Math.sqrt(et*lt*(U-lt)/U)*(W-U/2<0?-1:1);f_(u,i,h,Math.max(f,Math.floor(h-W*lt/U+ct)),Math.min(v,Math.floor(h+(U-W)*lt/U+ct)),w)}const M=i[2*h+w];let P=f,z=v;for(Qd(u,i,f,h),i[2*v+w]>M&&Qd(u,i,f,v);P<z;){for(Qd(u,i,P,z),P++,z--;i[2*P+w]<M;)P++;for(;i[2*z+w]>M;)z--}i[2*f+w]===M?Qd(u,i,f,z):(z++,Qd(u,i,z,v)),z<=h&&(f=z+1),h<=z&&(v=z-1)}}function Qd(u,i,h,f){rc(u,h,f),rc(i,2*h,2*f),rc(i,2*h+1,2*f+1)}function rc(u,i,h){const f=u[i];u[i]=u[h],u[h]=f}function Or(u,i,h,f){const v=u-h,w=i-f;return v*v+w*w}var km;l.cm=void 0,(km=l.cm||(l.cm={})).create="create",km.load="load",km.fullLoad="fullLoad";let ts=null,Jd=[];const R0=1e3/60,ci="loadTime",D0="fullLoadTime",p_={mark(u){performance.mark(u)},frame(u){const i=u;ts!=null&&Jd.push(i-ts),ts=i},clearMetrics(){ts=null,Jd=[],performance.clearMeasures(ci),performance.clearMeasures(D0);for(const u in l.cm)performance.clearMarks(l.cm[u])},getPerformanceMetrics(){performance.measure(ci,l.cm.create,l.cm.load),performance.measure(D0,l.cm.create,l.cm.fullLoad);const u=performance.getEntriesByName(ci)[0].duration,i=performance.getEntriesByName(D0)[0].duration,h=Jd.length,f=1/(Jd.reduce((w,M)=>w+M,0)/h/1e3),v=Jd.filter(w=>w>R0).reduce((w,M)=>w+(M-R0)/R0,0);return{loadTime:u,fullLoadTime:i,fps:f,percentDroppedFrames:v/(h+v)*100,totalFrames:h}}};l.$=Ap,l.A=nt,l.B=Br,l.C=li,l.D=Yn,l.E=kt,l.F=Kf,l.G=function(u){if(Pt==null){const i=u.navigator?u.navigator.userAgent:null;Pt=!!u.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Pt},l.H=class{constructor(u,i){this.target=u,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Ex(()=>this.process()),this.subscription=Ht(this.target,"message",h=>this.receive(h),!1),this.globalScope=Dt(self)?u:window}registerMessageHandler(u,i){this.messageHandlers[u]=i}sendAsync(u,i){return new Promise((h,f)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),w=i?Ht(i.signal,"abort",()=>{w==null||w.unsubscribe(),delete this.resolveRejects[v];const z={id:v,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(z)},Tx):null;this.resolveRejects[v]={resolve:z=>{w==null||w.unsubscribe(),h(z)},reject:z=>{w==null||w.unsubscribe(),f(z)}};const M=[],P=Object.assign(Object.assign({},u),{id:v,sourceMapId:this.mapId,origin:location.origin,data:Nh(u.data,M)});this.target.postMessage(P,{transfer:M})})}receive(u){const i=u.data,h=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[h];const f=this.abortControllers[h];return delete this.abortControllers[h],void(f&&f.abort())}if(Dt(self)||i.mustQueue)return this.tasks[h]=i,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,i)}}process(){if(this.taskQueue.length===0)return;const u=this.taskQueue.shift(),i=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(u,i)}processTask(u,i){return o(this,void 0,void 0,function*(){if(i.type==="<response>"){const v=this.resolveRejects[u];return delete this.resolveRejects[u],v?void(i.error?v.reject(yu(i.error)):v.resolve(yu(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=yu(i.data),f=new AbortController;this.abortControllers[u]=f;try{const v=yield this.messageHandlers[i.type](i.sourceMapId,h,f);this.completeTask(u,null,v)}catch(v){this.completeTask(u,v)}})}completeTask(u,i,h){const f=[];delete this.abortControllers[u];const v={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?Nh(i):null,data:Nh(h,f)};this.target.postMessage(v,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.I=bm,l.J=ve,l.K=function(){var u=new nt(16);return nt!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},l.L=function(u,i,h){var f,v,w,M,P,z,U,W,et,lt,ct,dt,wt=h[0],Et=h[1],Vt=h[2];return i===u?(u[12]=i[0]*wt+i[4]*Et+i[8]*Vt+i[12],u[13]=i[1]*wt+i[5]*Et+i[9]*Vt+i[13],u[14]=i[2]*wt+i[6]*Et+i[10]*Vt+i[14],u[15]=i[3]*wt+i[7]*Et+i[11]*Vt+i[15]):(v=i[1],w=i[2],M=i[3],P=i[4],z=i[5],U=i[6],W=i[7],et=i[8],lt=i[9],ct=i[10],dt=i[11],u[0]=f=i[0],u[1]=v,u[2]=w,u[3]=M,u[4]=P,u[5]=z,u[6]=U,u[7]=W,u[8]=et,u[9]=lt,u[10]=ct,u[11]=dt,u[12]=f*wt+P*Et+et*Vt+i[12],u[13]=v*wt+z*Et+lt*Vt+i[13],u[14]=w*wt+U*Et+ct*Vt+i[14],u[15]=M*wt+W*Et+dt*Vt+i[15]),u},l.M=function(u,i,h){var f=h[0],v=h[1],w=h[2];return u[0]=i[0]*f,u[1]=i[1]*f,u[2]=i[2]*f,u[3]=i[3]*f,u[4]=i[4]*v,u[5]=i[5]*v,u[6]=i[6]*v,u[7]=i[7]*v,u[8]=i[8]*w,u[9]=i[9]*w,u[10]=i[10]*w,u[11]=i[11]*w,u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15],u},l.N=function(u,i,h){var f=i[0],v=i[1],w=i[2],M=i[3],P=i[4],z=i[5],U=i[6],W=i[7],et=i[8],lt=i[9],ct=i[10],dt=i[11],wt=i[12],Et=i[13],Vt=i[14],ce=i[15],qt=h[0],st=h[1],It=h[2],Yt=h[3];return u[0]=qt*f+st*P+It*et+Yt*wt,u[1]=qt*v+st*z+It*lt+Yt*Et,u[2]=qt*w+st*U+It*ct+Yt*Vt,u[3]=qt*M+st*W+It*dt+Yt*ce,u[4]=(qt=h[4])*f+(st=h[5])*P+(It=h[6])*et+(Yt=h[7])*wt,u[5]=qt*v+st*z+It*lt+Yt*Et,u[6]=qt*w+st*U+It*ct+Yt*Vt,u[7]=qt*M+st*W+It*dt+Yt*ce,u[8]=(qt=h[8])*f+(st=h[9])*P+(It=h[10])*et+(Yt=h[11])*wt,u[9]=qt*v+st*z+It*lt+Yt*Et,u[10]=qt*w+st*U+It*ct+Yt*Vt,u[11]=qt*M+st*W+It*dt+Yt*ce,u[12]=(qt=h[12])*f+(st=h[13])*P+(It=h[14])*et+(Yt=h[15])*wt,u[13]=qt*v+st*z+It*lt+Yt*Et,u[14]=qt*w+st*U+It*ct+Yt*Vt,u[15]=qt*M+st*W+It*dt+Yt*ce,u},l.O=function(u,i){const h={};for(let f=0;f<i.length;f++){const v=i[f];v in u&&(h[v]=u[v])}return h},l.P=k,l.Q=Mu,l.R=xo,l.S=Xv,l.T=Od,l.U=Yv,l.V=j,l.W=G,l.X=Ut,l.Y=Gs,l.Z=Xt,l._=o,l.a=Cn,l.a$=function(u,i,h){var f=Math.sin(h),v=Math.cos(h),w=i[4],M=i[5],P=i[6],z=i[7],U=i[8],W=i[9],et=i[10],lt=i[11];return i!==u&&(u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[3],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[4]=w*v+U*f,u[5]=M*v+W*f,u[6]=P*v+et*f,u[7]=z*v+lt*f,u[8]=U*v-w*f,u[9]=W*v-M*f,u[10]=et*v-P*f,u[11]=lt*v-z*f,u},l.a0=25,l.a1=E0,l.a2=u=>{const i=window.document.createElement("video");return i.muted=!0,new Promise(h=>{i.onloadstart=()=>{h(i)};for(const f of u){const v=window.document.createElement("source");Nn(f)||(i.crossOrigin="Anonymous"),v.src=f,i.appendChild(v)}})},l.a3=Ue,l.a4=function(){return Se++},l.a5=L,l.a6=Yd,l.a7=Qu,l.a8=$s,l.a9=ph,l.aA=function(u,i,h,f,v=!1){if(!h[0]&&!h[1])return[0,0];const w=v?f==="map"?-u.bearingInRadians:0:f==="viewport"?u.bearingInRadians:0;if(w){const M=Math.sin(w),P=Math.cos(w);h=[h[0]*P-h[1]*M,h[0]*M+h[1]*P]}return[v?h[0]:ge(i,h[0],u.zoom),v?h[1]:ge(i,h[1],u.zoom)]},l.aC=b0,l.aD=Tm,l.aE=_0,l.aF=k0,l.aG=Vi,l.aH=dp,l.aI=Wt,l.aJ=pr,l.aK=yn,l.aL=nn,l.aM=Me,l.aN=Jv,l.aO=function(u,i,h){return u[0]=i[0]*h,u[1]=i[1]*h,u[2]=i[2]*h,u},l.aP=function(u,i,h){return u[0]=i[0]+h[0],u[1]=i[1]+h[1],u[2]=i[2]+h[2],u},l.aQ=function(u){var i=new nt(3);return i[0]=u[0],i[1]=u[1],i[2]=u[2],i},l.aR=function(u,i,h){return u[0]=i[0]*h[0],u[1]=i[1]*h[1],u[2]=i[2]*h[2],u[3]=i[3]*h[3],u},l.aS=function(u,i,h){return u[0]=i[0]-h[0],u[1]=i[1]-h[1],u[2]=i[2]-h[2],u},l.aT=function(u,i){var h=i[0],f=i[1],v=i[2],w=h*h+f*f+v*v;return w>0&&(w=1/Math.sqrt(w)),u[0]=i[0]*w,u[1]=i[1]*w,u[2]=i[2]*w,u},l.aU=function(u,i,h){var f=i[0],v=i[1],w=i[2],M=h[0],P=h[1],z=h[2];return u[0]=v*z-w*P,u[1]=w*M-f*z,u[2]=f*P-v*M,u},l.aV=function(u,i){return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]},l.aW=e_,l.aX=Fa,l.aY=function(u,i,h,f,v){var w,M=1/Math.tan(i/2);return u[0]=M/h,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=M,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,v!=null&&v!==1/0?(u[10]=(v+f)*(w=1/(f-v)),u[14]=2*v*f*w):(u[10]=-1,u[14]=-2*f),u},l.aZ=function(u){var i=new nt(16);return i[0]=u[0],i[1]=u[1],i[2]=u[2],i[3]=u[3],i[4]=u[4],i[5]=u[5],i[6]=u[6],i[7]=u[7],i[8]=u[8],i[9]=u[9],i[10]=u[10],i[11]=u[11],i[12]=u[12],i[13]=u[13],i[14]=u[14],i[15]=u[15],i},l.a_=function(u,i,h){var f=Math.sin(h),v=Math.cos(h),w=i[0],M=i[1],P=i[2],z=i[3],U=i[4],W=i[5],et=i[6],lt=i[7];return i!==u&&(u[8]=i[8],u[9]=i[9],u[10]=i[10],u[11]=i[11],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[0]=w*v+U*f,u[1]=M*v+W*f,u[2]=P*v+et*f,u[3]=z*v+lt*f,u[4]=U*v-w*f,u[5]=W*v-M*f,u[6]=et*v-P*f,u[7]=lt*v-z*f,u},l.aa=function(u){const i={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,f,v,w)=>{const M=v||w;return i[f]=!M||M.toLowerCase(),""}),i["max-age"]){const h=parseInt(i["max-age"],10);isNaN(h)?delete i["max-age"]:i["max-age"]=h}return i},l.ab=function(u){return u*Math.PI/180},l.ac=function(u){return Math.pow(2,u)},l.ad=K,l.ae=Ce,l.af=85.051129,l.ag=Qv,l.ah=function(u){return Math.log(u)/Math.LN2},l.ai=function(u){var i=u[0],h=u[1];return i*i+h*h},l.aj=function(u,i){const h=[];for(const f in u)f in i||h.push(f);return h},l.ak=function(u,i){let h=0,f=0;if(u.kind==="constant")f=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:v,minZoom:w,maxZoom:M}=u,P=v?Ce(_o.interpolationFactor(v,i,w,M),0,1):0;u.kind==="camera"?f=Br.number(u.minSize,u.maxSize,P):h=P}return{uSizeT:h,uSize:f}},l.am=function(u,{uSize:i,uSizeT:h},{lowerSize:f,upperSize:v}){return u.kind==="source"?f/Vc:u.kind==="composite"?Br.number(f/Vc,v/Vc,h):i},l.an=function(u,i){var h=i[0],f=i[1],v=i[2],w=i[3],M=i[4],P=i[5],z=i[6],U=i[7],W=i[8],et=i[9],lt=i[10],ct=i[11],dt=i[12],wt=i[13],Et=i[14],Vt=i[15],ce=h*P-f*M,qt=h*z-v*M,st=h*U-w*M,It=f*z-v*P,Yt=f*U-w*P,Oe=v*U-w*z,sn=W*wt-et*dt,Ne=W*Et-lt*dt,He=W*Vt-ct*dt,pn=et*Et-lt*wt,ln=et*Vt-ct*wt,vn=lt*Vt-ct*Et,Xe=ce*vn-qt*ln+st*pn+It*He-Yt*Ne+Oe*sn;return Xe?(u[0]=(P*vn-z*ln+U*pn)*(Xe=1/Xe),u[1]=(v*ln-f*vn-w*pn)*Xe,u[2]=(wt*Oe-Et*Yt+Vt*It)*Xe,u[3]=(lt*Yt-et*Oe-ct*It)*Xe,u[4]=(z*He-M*vn-U*Ne)*Xe,u[5]=(h*vn-v*He+w*Ne)*Xe,u[6]=(Et*st-dt*Oe-Vt*qt)*Xe,u[7]=(W*Oe-lt*st+ct*qt)*Xe,u[8]=(M*ln-P*He+U*sn)*Xe,u[9]=(f*He-h*ln-w*sn)*Xe,u[10]=(dt*Yt-wt*st+Vt*ce)*Xe,u[11]=(et*st-W*Yt-ct*ce)*Xe,u[12]=(P*Ne-M*pn-z*sn)*Xe,u[13]=(h*pn-f*Ne+v*sn)*Xe,u[14]=(wt*qt-dt*It-Et*ce)*Xe,u[15]=(W*It-et*qt+lt*ce)*Xe,u):null},l.ao=Rt,l.ap=function(u){return Math.hypot(u[0],u[1])},l.aq=function(u){return u[0]=0,u[1]=0,u},l.ar=function(u,i,h){return u[0]=i[0]*h,u[1]=i[1]*h,u},l.as=x0,l.at=q,l.au=function(u,i,h,f){const v=i.y-u.y,w=i.x-u.x,M=f.y-h.y,P=f.x-h.x,z=M*w-P*v;if(z===0)return null;const U=(P*(u.y-h.y)-M*(u.x-h.x))/z;return new k(u.x+U*w,u.y+U*v)},l.av=o_,l.aw=np,l.ax=function(u){let i=1/0,h=1/0,f=-1/0,v=-1/0;for(const w of u)i=Math.min(i,w.x),h=Math.min(h,w.y),f=Math.max(f,w.x),v=Math.max(v,w.y);return[i,h,f,v]},l.ay=Ao,l.az=ge,l.b=yt,l.b$=function(u,i){var h=u[0],f=u[1],v=u[2],w=u[3],M=u[4],P=u[5],z=u[6],U=u[7],W=u[8],et=u[9],lt=u[10],ct=u[11],dt=u[12],wt=u[13],Et=u[14],Vt=u[15],ce=i[0],qt=i[1],st=i[2],It=i[3],Yt=i[4],Oe=i[5],sn=i[6],Ne=i[7],He=i[8],pn=i[9],ln=i[10],vn=i[11],Xe=i[12],jn=i[13],cr=i[14],er=i[15];return Math.abs(h-ce)<=Q*Math.max(1,Math.abs(h),Math.abs(ce))&&Math.abs(f-qt)<=Q*Math.max(1,Math.abs(f),Math.abs(qt))&&Math.abs(v-st)<=Q*Math.max(1,Math.abs(v),Math.abs(st))&&Math.abs(w-It)<=Q*Math.max(1,Math.abs(w),Math.abs(It))&&Math.abs(M-Yt)<=Q*Math.max(1,Math.abs(M),Math.abs(Yt))&&Math.abs(P-Oe)<=Q*Math.max(1,Math.abs(P),Math.abs(Oe))&&Math.abs(z-sn)<=Q*Math.max(1,Math.abs(z),Math.abs(sn))&&Math.abs(U-Ne)<=Q*Math.max(1,Math.abs(U),Math.abs(Ne))&&Math.abs(W-He)<=Q*Math.max(1,Math.abs(W),Math.abs(He))&&Math.abs(et-pn)<=Q*Math.max(1,Math.abs(et),Math.abs(pn))&&Math.abs(lt-ln)<=Q*Math.max(1,Math.abs(lt),Math.abs(ln))&&Math.abs(ct-vn)<=Q*Math.max(1,Math.abs(ct),Math.abs(vn))&&Math.abs(dt-Xe)<=Q*Math.max(1,Math.abs(dt),Math.abs(Xe))&&Math.abs(wt-jn)<=Q*Math.max(1,Math.abs(wt),Math.abs(jn))&&Math.abs(Et-cr)<=Q*Math.max(1,Math.abs(Et),Math.abs(cr))&&Math.abs(Vt-er)<=Q*Math.max(1,Math.abs(Vt),Math.abs(er))},l.b0=function(){const u=new Float32Array(16);return K(u),u},l.b1=function(){const u=new Float64Array(16);return K(u),u},l.b2=function(){return new Float64Array(16)},l.b3=function(u,i,h){const f=new Float64Array(4);return function(v,w,M,P){var z=.5*Math.PI/180;w*=z,M*=z,P*=z;var U=Math.sin(w),W=Math.cos(w),et=Math.sin(M),lt=Math.cos(M),ct=Math.sin(P),dt=Math.cos(P);v[0]=U*lt*dt-W*et*ct,v[1]=W*et*dt+U*lt*ct,v[2]=W*lt*ct-U*et*dt,v[3]=W*lt*dt+U*et*ct}(f,u,i-90,h),f},l.b4=function(u,i,h,f){var v,w,M,P,z,U=i[0],W=i[1],et=i[2],lt=i[3],ct=h[0],dt=h[1],wt=h[2],Et=h[3];return(w=U*ct+W*dt+et*wt+lt*Et)<0&&(w=-w,ct=-ct,dt=-dt,wt=-wt,Et=-Et),1-w>Q?(v=Math.acos(w),M=Math.sin(v),P=Math.sin((1-f)*v)/M,z=Math.sin(f*v)/M):(P=1-f,z=f),u[0]=P*U+z*ct,u[1]=P*W+z*dt,u[2]=P*et+z*wt,u[3]=P*lt+z*Et,u},l.b5=function(u){const i=new Float64Array(9);var h,f,v,w,M,P,z,U,W,et,lt,ct,dt,wt,Et,Vt,ce,qt;et=(v=(f=u)[0])*(z=v+v),lt=(w=f[1])*z,dt=(M=f[2])*z,wt=M*(U=w+w),Vt=(P=f[3])*z,ce=P*U,qt=P*(W=M+M),(h=i)[0]=1-(ct=w*U)-(Et=M*W),h[3]=lt-qt,h[6]=dt+ce,h[1]=lt+qt,h[4]=1-et-Et,h[7]=wt-Vt,h[2]=dt-ce,h[5]=wt+Vt,h[8]=1-et-ct;const st=Me(-Math.asin(Ce(i[2],-1,1)));let It,Yt;return Math.hypot(i[5],i[8])<.001?(It=0,Yt=-Me(Math.atan2(i[3],i[4]))):(It=Me(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),Yt=Me(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:It,pitch:st+90,bearing:Yt}},l.b6=function(u,i){return u.roll==i.roll&&u.pitch==i.pitch&&u.bearing==i.bearing},l.b7=Zt,l.b8=Au,l.b9=Gd,l.bA=function(u){if(u.type==="custom")return new Mm(u);switch(u.type){case"background":return new Mx(u);case"circle":return new Nb(u);case"fill":return new _v(u);case"fill-extrusion":return new vl(u);case"heatmap":return new Xg(u);case"hillshade":return new yr(u);case"line":return new ax(u);case"raster":return new Im(u);case"symbol":return new bp(u)}},l.bB=tn,l.bC=function(u,i){if(!u)return[{command:"setStyle",args:[i]}];let h=[];try{if(!Kt(u.version,i.version))return[{command:"setStyle",args:[i]}];Kt(u.center,i.center)||h.push({command:"setCenter",args:[i.center]}),Kt(u.centerAltitude,i.centerAltitude)||h.push({command:"setCenterAltitude",args:[i.centerAltitude]}),Kt(u.zoom,i.zoom)||h.push({command:"setZoom",args:[i.zoom]}),Kt(u.bearing,i.bearing)||h.push({command:"setBearing",args:[i.bearing]}),Kt(u.pitch,i.pitch)||h.push({command:"setPitch",args:[i.pitch]}),Kt(u.roll,i.roll)||h.push({command:"setRoll",args:[i.roll]}),Kt(u.sprite,i.sprite)||h.push({command:"setSprite",args:[i.sprite]}),Kt(u.glyphs,i.glyphs)||h.push({command:"setGlyphs",args:[i.glyphs]}),Kt(u.transition,i.transition)||h.push({command:"setTransition",args:[i.transition]}),Kt(u.light,i.light)||h.push({command:"setLight",args:[i.light]}),Kt(u.terrain,i.terrain)||h.push({command:"setTerrain",args:[i.terrain]}),Kt(u.sky,i.sky)||h.push({command:"setSky",args:[i.sky]}),Kt(u.projection,i.projection)||h.push({command:"setProjection",args:[i.projection]});const f={},v=[];(function(M,P,z,U){let W;for(W in P=P||{},M=M||{})Object.prototype.hasOwnProperty.call(M,W)&&(Object.prototype.hasOwnProperty.call(P,W)||we(W,z,U));for(W in P)Object.prototype.hasOwnProperty.call(P,W)&&(Object.prototype.hasOwnProperty.call(M,W)?Kt(M[W],P[W])||(M[W].type==="geojson"&&P[W].type==="geojson"&&Sn(M,P,W)?Fe(z,{command:"setGeoJSONSourceData",args:[W,P[W].data]}):rn(W,P,z,U)):Ve(W,P,z))})(u.sources,i.sources,v,f);const w=[];u.layers&&u.layers.forEach(M=>{"source"in M&&f[M.source]?h.push({command:"removeLayer",args:[M.id]}):w.push(M)}),h=h.concat(v),function(M,P,z){P=P||[];const U=(M=M||[]).map(ir),W=P.map(ir),et=M.reduce(gr,{}),lt=P.reduce(gr,{}),ct=U.slice(),dt=Object.create(null);let wt,Et,Vt,ce,qt;for(let st=0,It=0;st<U.length;st++)wt=U[st],Object.prototype.hasOwnProperty.call(lt,wt)?It++:(Fe(z,{command:"removeLayer",args:[wt]}),ct.splice(ct.indexOf(wt,It),1));for(let st=0,It=0;st<W.length;st++)wt=W[W.length-1-st],ct[ct.length-1-st]!==wt&&(Object.prototype.hasOwnProperty.call(et,wt)?(Fe(z,{command:"removeLayer",args:[wt]}),ct.splice(ct.lastIndexOf(wt,ct.length-It),1)):It++,ce=ct[ct.length-st],Fe(z,{command:"addLayer",args:[lt[wt],ce]}),ct.splice(ct.length-st,0,wt),dt[wt]=!0);for(let st=0;st<W.length;st++)if(wt=W[st],Et=et[wt],Vt=lt[wt],!dt[wt]&&!Kt(Et,Vt))if(Kt(Et.source,Vt.source)&&Kt(Et["source-layer"],Vt["source-layer"])&&Kt(Et.type,Vt.type)){for(qt in En(Et.layout,Vt.layout,z,wt,null,"setLayoutProperty"),En(Et.paint,Vt.paint,z,wt,null,"setPaintProperty"),Kt(Et.filter,Vt.filter)||Fe(z,{command:"setFilter",args:[wt,Vt.filter]}),Kt(Et.minzoom,Vt.minzoom)&&Kt(Et.maxzoom,Vt.maxzoom)||Fe(z,{command:"setLayerZoomRange",args:[wt,Vt.minzoom,Vt.maxzoom]}),Et)Object.prototype.hasOwnProperty.call(Et,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?En(Et[qt],Vt[qt],z,wt,qt.slice(6),"setPaintProperty"):Kt(Et[qt],Vt[qt])||Fe(z,{command:"setLayerProperty",args:[wt,qt,Vt[qt]]}));for(qt in Vt)Object.prototype.hasOwnProperty.call(Vt,qt)&&!Object.prototype.hasOwnProperty.call(Et,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?En(Et[qt],Vt[qt],z,wt,qt.slice(6),"setPaintProperty"):Kt(Et[qt],Vt[qt])||Fe(z,{command:"setLayerProperty",args:[wt,qt,Vt[qt]]}))}else Fe(z,{command:"removeLayer",args:[wt]}),ce=ct[ct.lastIndexOf(wt)+1],Fe(z,{command:"addLayer",args:[Vt,ce]})}(w,i.layers,h)}catch(f){console.warn("Unable to compute style diff:",f),h=[{command:"setStyle",args:[i]}]}return h},l.bD=function(u){const i=[],h=u.id;return h===void 0&&i.push({message:`layers.${h}: missing required property "id"`}),u.render===void 0&&i.push({message:`layers.${h}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&i.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),i},l.bE=function u(i,h){if(Array.isArray(i)){if(!Array.isArray(h)||i.length!==h.length)return!1;for(let f=0;f<i.length;f++)if(!u(i[f],h[f]))return!1;return!0}if(typeof i=="object"&&i!==null&&h!==null){if(typeof h!="object"||Object.keys(i).length!==Object.keys(h).length)return!1;for(const f in i)if(!u(i[f],h[f]))return!1;return!0}return i===h},l.bF=xe,l.bG=Be,l.bH=class extends qo{constructor(u,i){super(u,i),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},l.bI=Oa,l.bJ=class extends qo{constructor(u,i){super(u,i),this.current=Jl}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let i=1;i<16;i++)if(u[i]!==this.current[i]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},l.bK=Da,l.bL=class extends qo{constructor(u,i){super(u,i),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},l.bM=class extends qo{constructor(u,i){super(u,i),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},l.bN=X,l.bO=function(u,i){var h=Math.sin(i),f=Math.cos(i);return u[0]=f,u[1]=h,u[2]=0,u[3]=-h,u[4]=f,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},l.bP=function(u,i,h){var f=i[0],v=i[1],w=i[2];return u[0]=f*h[0]+v*h[3]+w*h[6],u[1]=f*h[1]+v*h[4]+w*h[7],u[2]=f*h[2]+v*h[5]+w*h[8],u},l.bQ=function(u,i,h,f,v,w,M){var P=1/(i-h),z=1/(f-v),U=1/(w-M);return u[0]=-2*P,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*z,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*U,u[11]=0,u[12]=(i+h)*P,u[13]=(v+f)*z,u[14]=(M+w)*U,u[15]=1,u},l.bR=class extends js{},l.bS=ux,l.bT=class extends Nd{},l.bU=lp,l.bV=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},l.bW=fm,l.bX=function(u,i,h){var f=i[0],v=i[1],w=i[2],M=h[3]*f+h[7]*v+h[11]*w+h[15];return u[0]=(h[0]*f+h[4]*v+h[8]*w+h[12])/(M=M||1),u[1]=(h[1]*f+h[5]*v+h[9]*w+h[13])/M,u[2]=(h[2]*f+h[6]*v+h[10]*w+h[14])/M,u},l.bY=class extends gs{},l.bZ=class extends y{},l.b_=function(u,i){return u[0]===i[0]&&u[1]===i[1]&&u[2]===i[2]&&u[3]===i[3]&&u[4]===i[4]&&u[5]===i[5]&&u[6]===i[6]&&u[7]===i[7]&&u[8]===i[8]&&u[9]===i[9]&&u[10]===i[10]&&u[11]===i[11]&&u[12]===i[12]&&u[13]===i[13]&&u[14]===i[14]&&u[15]===i[15]},l.ba=Wh,l.bb=Zh,l.bc=te,l.bd=Gt,l.be=or,l.bf=function(u,i,h,f,v){return te(f,v,Ce((u-i)/(h-i),0,1))},l.bg=en,l.bh=function(){return new Float64Array(3)},l.bi=function(u,i,h,f){return u[0]=i[0]+h[0]*f,u[1]=i[1]+h[1]*f,u[2]=i[2]+h[2]*f,u},l.bj=xt,l.bk=function(){return new Float64Array(4)},l.bl=function(u,i,h,f){var v=[],w=[];return v[0]=i[0]-h[0],v[1]=i[1]-h[1],v[2]=i[2]-h[2],w[0]=v[0]*Math.cos(f)-v[1]*Math.sin(f),w[1]=v[0]*Math.sin(f)+v[1]*Math.cos(f),w[2]=v[2],u[0]=w[0]+h[0],u[1]=w[1]+h[1],u[2]=w[2]+h[2],u},l.bm=function(u,i,h,f){var v=[],w=[];return v[0]=i[0]-h[0],v[1]=i[1]-h[1],v[2]=i[2]-h[2],w[0]=v[0],w[1]=v[1]*Math.cos(f)-v[2]*Math.sin(f),w[2]=v[1]*Math.sin(f)+v[2]*Math.cos(f),u[0]=w[0]+h[0],u[1]=w[1]+h[1],u[2]=w[2]+h[2],u},l.bn=function(u,i,h,f){var v=[],w=[];return v[0]=i[0]-h[0],v[1]=i[1]-h[1],v[2]=i[2]-h[2],w[0]=v[2]*Math.sin(f)+v[0]*Math.cos(f),w[1]=v[1],w[2]=v[2]*Math.cos(f)-v[0]*Math.sin(f),u[0]=w[0]+h[0],u[1]=w[1]+h[1],u[2]=w[2]+h[2],u},l.bo=at,l.bp=function(u,i,h){var f=Math.sin(h),v=Math.cos(h),w=i[0],M=i[1],P=i[2],z=i[3],U=i[8],W=i[9],et=i[10],lt=i[11];return i!==u&&(u[4]=i[4],u[5]=i[5],u[6]=i[6],u[7]=i[7],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[0]=w*v-U*f,u[1]=M*v-W*f,u[2]=P*v-et*f,u[3]=z*v-lt*f,u[8]=w*f+U*v,u[9]=M*f+W*v,u[10]=P*f+et*v,u[11]=z*f+lt*v,u},l.bq=function(u,i){const h=en(u,360),f=en(i,360),v=f-h,w=f>h?v-360:v+360;return Math.abs(v)<Math.abs(w)?v:w},l.br=function(u){return u[0]=0,u[1]=0,u[2]=0,u},l.bs=function(u,i,h,f){const v=Math.sqrt(u*u+i*i),w=Math.sqrt(h*h+f*f);u/=v,i/=v,h/=w,f/=w;const M=Math.acos(u*h+i*f);return-i*h+u*f>0?M:-M},l.bt=function(u,i){return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]+u[3]},l.bu=xp,l.bv=function(u,i){const h=en(u,2*Math.PI),f=en(i,2*Math.PI);return Math.min(Math.abs(h-f),Math.abs(h-f+2*Math.PI),Math.abs(h-f-2*Math.PI))},l.bw=function(){const u={},i=_t.$version;for(const h in _t.$root){const f=_t.$root[h];if(f.required){let v=null;v=h==="version"?i:f.type==="array"?[]:{},v!=null&&(u[h]=v)}}return u},l.bx=jh,l.by=Ye,l.bz=function(u){u=u.slice();const i=Object.create(null);for(let h=0;h<u.length;h++)i[u[h].id]=u[h];for(let h=0;h<u.length;h++)"ref"in u[h]&&(u[h]=he(u[h],i[u[h].ref]));return u},l.c=bn,l.c0=function(u,i){return u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[3],u[4]=i[4],u[5]=i[5],u[6]=i[6],u[7]=i[7],u[8]=i[8],u[9]=i[9],u[10]=i[10],u[11]=i[11],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15],u},l.c1=u=>u.type==="symbol",l.c2=u=>u.type==="circle",l.c3=u=>u.type==="heatmap",l.c4=u=>u.type==="line",l.c5=u=>u.type==="fill",l.c6=u=>u.type==="fill-extrusion",l.c7=u=>u.type==="hillshade",l.c8=u=>u.type==="raster",l.c9=u=>u.type==="background",l.cA=fp,l.cB=g0,l.cC=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},l.cD=function(u,i,h,f,v){return o(this,void 0,void 0,function*(){if(G())try{return yield Ut(u,i,h,f,v)}catch{}return function(w,M,P,z,U){const W=w.width,et=w.height;ne&&ue||(ne=new OffscreenCanvas(W,et),ue=ne.getContext("2d",{willReadFrequently:!0})),ne.width=W,ne.height=et,ue.drawImage(w,0,0,W,et);const lt=ue.getImageData(M,P,z,U);return ue.clearRect(0,0,W,et),lt.data}(u,i,h,f,v)})},l.cE=n_,l.cF=g,l.cG=I,l.cH=l0,l.cI=m0,l.cJ=Fs,l.cK=pl,l.ca=u=>u.type==="custom",l.cb=Re,l.cc=function(u,i,h){const f=Bt(i.x-h.x,i.y-h.y),v=Bt(u.x-h.x,u.y-h.y);var w,M;return Me(Math.atan2(f[0]*v[1]-f[1]*v[0],(w=f)[0]*(M=v)[0]+w[1]*M[1]))},l.cd=Ge,l.ce=function(u,i){return Le[i]&&(u instanceof MouseEvent||u instanceof WheelEvent)},l.cf=function(u,i){return je[i]&&"touches"in u},l.cg=function(u){return je[u]||Le[u]},l.ch=function(u,i,h){var f=i[0],v=i[1];return u[0]=h[0]*f+h[4]*v+h[12],u[1]=h[1]*f+h[5]*v+h[13],u},l.ci=function(u,i){const{x:h,y:f}=Ap.fromLngLat(i);return!(u<0||u>25||f<0||f>=1||h<0||h>=1)},l.cj=function(u,i){return u[0]=i[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=i[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=i[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},l.ck=class extends ih{},l.cl=p_,l.cn=function(u){return u.message===Ke},l.co=Te,l.cp=function(u,i){Cn.REGISTERED_PROTOCOLS[u]=i},l.cq=function(u){delete Cn.REGISTERED_PROTOCOLS[u]},l.cr=function(u,i){const h={};for(let v=0;v<u.length;v++){const w=i&&i[u[v].id]||Pd(u[v]);i&&(i[u[v].id]=w);let M=h[w];M||(M=h[w]=[]),M.push(u[v])}const f=[];for(const v in h)f.push(h[v]);return f},l.cs=On,l.ct=r_,l.cu=Er,l.cv=zv,l.cw=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=Xt/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const i=u.bucket.layers[0],h=i.layout,f=i._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new li(u.bucket.zoom+1),u.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new li(u.bucket.zoom+1),u.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new li(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:U,maxZoom:W}=u.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new li(U),u.canonical),f["text-size"].possiblyEvaluate(new li(W),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:U,maxZoom:W}=u.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new li(U),u.canonical),f["icon-size"].possiblyEvaluate(new li(W),u.canonical)]}const w=h.get("text-line-height")*Ao,M=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",P=h.get("text-keep-upright"),z=h.get("text-size");for(const U of u.bucket.features){const W=h.get("text-font").evaluate(U,{},u.canonical).join(","),et=z.evaluate(U,{},u.canonical),lt=v.layoutTextSize.evaluate(U,{},u.canonical),ct=v.layoutIconSize.evaluate(U,{},u.canonical),dt={horizontal:{},vertical:void 0},wt=U.text;let Et,Vt=[0,0];if(wt){const st=wt.toString(),It=h.get("text-letter-spacing").evaluate(U,{},u.canonical)*Ao,Yt=nm(st)?It:0,Oe=h.get("text-anchor").evaluate(U,{},u.canonical),sn=h_(i,U,u.canonical);if(!sn){const ln=h.get("text-radial-offset").evaluate(U,{},u.canonical);Vt=ln?Em(Oe,[ln*Ao,Kh]):h.get("text-offset").evaluate(U,{},u.canonical).map(vn=>vn*Ao)}let Ne=M?"center":h.get("text-justify").evaluate(U,{},u.canonical);const He=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(U,{},u.canonical)*Ao:1/0,pn=()=>{u.bucket.allowVerticalPlacement&&kd(st)&&(dt.vertical=Am(wt,u.glyphMap,u.glyphPositions,u.imagePositions,W,He,w,Oe,"left",Yt,Vt,l.al.vertical,!0,lt,et))};if(!M&&sn){const ln=new Set;if(Ne==="auto")for(let Xe=0;Xe<sn.values.length;Xe+=2)ln.add(Tm(sn.values[Xe]));else ln.add(Ne);let vn=!1;for(const Xe of ln)if(!dt.horizontal[Xe])if(vn)dt.horizontal[Xe]=dt.horizontal[0];else{const jn=Am(wt,u.glyphMap,u.glyphPositions,u.imagePositions,W,He,w,"center",Xe,Yt,Vt,l.al.horizontal,!1,lt,et);jn&&(dt.horizontal[Xe]=jn,vn=jn.positionedLines.length===1)}pn()}else{Ne==="auto"&&(Ne=Tm(Oe));const ln=Am(wt,u.glyphMap,u.glyphPositions,u.imagePositions,W,He,w,Oe,Ne,Yt,Vt,l.al.horizontal,!1,lt,et);ln&&(dt.horizontal[Ne]=ln),pn(),kd(st)&&M&&P&&(dt.vertical=Am(wt,u.glyphMap,u.glyphPositions,u.imagePositions,W,He,w,Oe,Ne,Yt,Vt,l.al.vertical,!1,lt,et))}}let ce=!1;if(U.icon&&U.icon.name){const st=u.imageMap[U.icon.name];st&&(Et=Ax(u.imagePositions[U.icon.name],h.get("icon-offset").evaluate(U,{},u.canonical),h.get("icon-anchor").evaluate(U,{},u.canonical)),ce=!!st.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=ce:u.bucket.sdfIcons!==ce&&Tt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(st.pixelRatio!==u.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const qt=Yh(dt.horizontal)||dt.vertical;u.bucket.iconsInText=!!qt&&qt.iconsInText,(qt||Et)&&Pm(u.bucket,U,dt,Et,u.imageMap,v,lt,ct,Vt,ce,u.canonical,u.subdivisionGranularity)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},l.cx=h0,l.cy=gm,l.cz=u0,l.d=Nn,l.e=be,l.f=u=>o(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(i)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.g=de,l.h=u=>new Promise((i,h)=>{const f=new Image;f.onload=()=>{i(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame(()=>{f.src=vt})},f.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(u)],{type:"image/png"});f.src=u.byteLength?URL.createObjectURL(v):vt}),l.i=Dt,l.j=(u,i)=>un(be(u,{type:"json"}),i),l.k=Ct,l.l=gt,l.m=un,l.n=(u,i)=>un(be(u,{type:"arrayBuffer"}),i),l.o=function(u){return new g0(u).readFields(dx,[])},l.p=Ov,l.q=sp,l.r=ya,l.s=Ht,l.t=tm,l.u=Ar,l.v=_t,l.w=Tt,l.x=em,l.y=dl,l.z=function([u,i,h]){return i+=90,i*=Math.PI/180,h*=Math.PI/180,{x:u*Math.cos(i)*Math.sin(h),y:u*Math.sin(i)*Math.sin(h),z:u*Math.cos(h)}}}),s("worker",["./shared"],function(l){class o{constructor(ht){this.keyCache={},ht&&this.replace(ht)}replace(ht){this._layerConfigs={},this._layers={},this.update(ht,[])}update(ht,gt){for(const kt of ht){this._layerConfigs[kt.id]=kt;const _t=this._layers[kt.id]=l.bA(kt);_t._featureFilter=l.a7(_t.filter),this.keyCache[kt.id]&&delete this.keyCache[kt.id]}for(const kt of gt)delete this.keyCache[kt],delete this._layerConfigs[kt],delete this._layers[kt];this.familiesBySource={};const Ct=l.cr(Object.values(this._layerConfigs),this.keyCache);for(const kt of Ct){const _t=kt.map(we=>this._layers[we.id]),oe=_t[0];if(oe.visibility==="none")continue;const he=oe.source||"";let Kt=this.familiesBySource[he];Kt||(Kt=this.familiesBySource[he]={});const Fe=oe.sourceLayer||"_geojsonTileLayer";let Ve=Kt[Fe];Ve||(Ve=Kt[Fe]=[]),Ve.push(_t)}}}class g{constructor(ht){const gt={},Ct=[];for(const he in ht){const Kt=ht[he],Fe=gt[he]={};for(const Ve in Kt){const we=Kt[+Ve];if(!we||we.bitmap.width===0||we.bitmap.height===0)continue;const rn={x:0,y:0,w:we.bitmap.width+2,h:we.bitmap.height+2};Ct.push(rn),Fe[Ve]={rect:rn,metrics:we.metrics}}}const{w:kt,h:_t}=l.p(Ct),oe=new l.q({width:kt||1,height:_t||1});for(const he in ht){const Kt=ht[he];for(const Fe in Kt){const Ve=Kt[+Fe];if(!Ve||Ve.bitmap.width===0||Ve.bitmap.height===0)continue;const we=gt[he][Fe].rect;l.q.copy(Ve.bitmap,oe,{x:0,y:0},{x:we.x+1,y:we.y+1},Ve.bitmap)}}this.image=oe,this.positions=gt}}l.cs("GlyphAtlas",g);class _{constructor(ht){this.tileID=new l.Y(ht.tileID.overscaledZ,ht.tileID.wrap,ht.tileID.canonical.z,ht.tileID.canonical.x,ht.tileID.canonical.y),this.uid=ht.uid,this.zoom=ht.zoom,this.pixelRatio=ht.pixelRatio,this.tileSize=ht.tileSize,this.source=ht.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ht.showCollisionBoxes,this.collectResourceTiming=!!ht.collectResourceTiming,this.returnDependencies=!!ht.returnDependencies,this.promoteId=ht.promoteId,this.inFlightDependencies=[]}parse(ht,gt,Ct,kt,_t){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=ht,this.collisionBoxArray=new l.a5;const oe=new l.ct(Object.keys(ht.layers).sort()),he=new l.cu(this.tileID,this.promoteId);he.bucketLayerIDs=[];const Kt={},Fe={featureIndex:he,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ct,subdivisionGranularity:_t},Ve=gt.familiesBySource[this.source];for(const Ze in Ve){const zn=ht.layers[Ze];if(!zn)continue;zn.version===1&&l.w(`Vector tile source "${this.source}" layer "${Ze}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Jn=oe.encode(Ze),eo=[];for(let Po=0;Po<zn.length;Po++){const pi=zn.feature(Po),Xn=he.getId(pi,Ze);eo.push({feature:pi,id:Xn,index:Po,sourceLayerIndex:Jn})}for(const Po of Ve[Ze]){const pi=Po[0];pi.source!==this.source&&l.w(`layer.source = ${pi.source} does not equal this.source = ${this.source}`),pi.minzoom&&this.zoom<Math.floor(pi.minzoom)||pi.maxzoom&&this.zoom>=pi.maxzoom||pi.visibility!=="none"&&(C(Po,this.zoom,Ct),(Kt[pi.id]=pi.createBucket({index:he.bucketLayerIDs.length,layers:Po,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Jn,sourceID:this.source})).populate(eo,Fe,this.tileID.canonical),he.bucketLayerIDs.push(Po.map(Xn=>Xn.id)))}}const we=l.bF(Fe.glyphDependencies,Ze=>Object.keys(Ze).map(Number));this.inFlightDependencies.forEach(Ze=>Ze==null?void 0:Ze.abort()),this.inFlightDependencies=[];let rn=Promise.resolve({});if(Object.keys(we).length){const Ze=new AbortController;this.inFlightDependencies.push(Ze),rn=kt.sendAsync({type:"GG",data:{stacks:we,source:this.source,tileID:this.tileID,type:"glyphs"}},Ze)}const Sn=Object.keys(Fe.iconDependencies);let En=Promise.resolve({});if(Sn.length){const Ze=new AbortController;this.inFlightDependencies.push(Ze),En=kt.sendAsync({type:"GI",data:{icons:Sn,source:this.source,tileID:this.tileID,type:"icons"}},Ze)}const ir=Object.keys(Fe.patternDependencies);let gr=Promise.resolve({});if(ir.length){const Ze=new AbortController;this.inFlightDependencies.push(Ze),gr=kt.sendAsync({type:"GI",data:{icons:ir,source:this.source,tileID:this.tileID,type:"patterns"}},Ze)}const[Ue,$n,Fr]=yield Promise.all([rn,En,gr]),Yr=new g(Ue),Pr=new l.cv($n,Fr);for(const Ze in Kt){const zn=Kt[Ze];zn instanceof l.a6?(C(zn.layers,this.zoom,Ct),l.cw({bucket:zn,glyphMap:Ue,glyphPositions:Yr.positions,imageMap:$n,imagePositions:Pr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Fe.subdivisionGranularity})):zn.hasPattern&&(zn instanceof l.cx||zn instanceof l.cy||zn instanceof l.cz)&&(C(zn.layers,this.zoom,Ct),zn.addFeatures(Fe,this.tileID.canonical,Pr.patternPositions))}return this.status="done",{buckets:Object.values(Kt).filter(Ze=>!Ze.isEmpty()),featureIndex:he,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Yr.image,imageAtlas:Pr,glyphMap:this.returnDependencies?Ue:null,iconMap:this.returnDependencies?$n:null,glyphPositions:this.returnDependencies?Yr.positions:null}})}}function C(ae,ht,gt){const Ct=new l.C(ht);for(const kt of ae)kt.recalculate(Ct,gt)}class I{constructor(ht,gt,Ct){this.actor=ht,this.layerIndex=gt,this.availableImages=Ct,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ht,gt){return l._(this,void 0,void 0,function*(){const Ct=yield l.n(ht.request,gt);try{return{vectorTile:new l.cA.VectorTile(new l.cB(Ct.data)),rawData:Ct.data,cacheControl:Ct.cacheControl,expires:Ct.expires}}catch(kt){const _t=new Uint8Array(Ct.data);let oe=`Unable to parse the tile at ${ht.request.url}, `;throw oe+=_t[0]===31&&_t[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${kt.message}`,new Error(oe)}})}loadTile(ht){return l._(this,void 0,void 0,function*(){const gt=ht.uid,Ct=!!(ht&&ht.request&&ht.request.collectResourceTiming)&&new l.cC(ht.request),kt=new _(ht);this.loading[gt]=kt;const _t=new AbortController;kt.abort=_t;try{const oe=yield this.loadVectorTile(ht,_t);if(delete this.loading[gt],!oe)return null;const he=oe.rawData,Kt={};oe.expires&&(Kt.expires=oe.expires),oe.cacheControl&&(Kt.cacheControl=oe.cacheControl);const Fe={};if(Ct){const we=Ct.finish();we&&(Fe.resourceTiming=JSON.parse(JSON.stringify(we)))}kt.vectorTile=oe.vectorTile;const Ve=kt.parse(oe.vectorTile,this.layerIndex,this.availableImages,this.actor,ht.subdivisionGranularity);this.loaded[gt]=kt,this.fetching[gt]={rawTileData:he,cacheControl:Kt,resourceTiming:Fe};try{const we=yield Ve;return l.e({rawTileData:he.slice(0)},we,Kt,Fe)}finally{delete this.fetching[gt]}}catch(oe){throw delete this.loading[gt],kt.status="done",this.loaded[gt]=kt,oe}})}reloadTile(ht){return l._(this,void 0,void 0,function*(){const gt=ht.uid;if(!this.loaded||!this.loaded[gt])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Ct=this.loaded[gt];if(Ct.showCollisionBoxes=ht.showCollisionBoxes,Ct.status==="parsing"){const kt=yield Ct.parse(Ct.vectorTile,this.layerIndex,this.availableImages,this.actor,ht.subdivisionGranularity);let _t;if(this.fetching[gt]){const{rawTileData:oe,cacheControl:he,resourceTiming:Kt}=this.fetching[gt];delete this.fetching[gt],_t=l.e({rawTileData:oe.slice(0)},kt,he,Kt)}else _t=kt;return _t}if(Ct.status==="done"&&Ct.vectorTile)return Ct.parse(Ct.vectorTile,this.layerIndex,this.availableImages,this.actor,ht.subdivisionGranularity)})}abortTile(ht){return l._(this,void 0,void 0,function*(){const gt=this.loading,Ct=ht.uid;gt&&gt[Ct]&&gt[Ct].abort&&(gt[Ct].abort.abort(),delete gt[Ct])})}removeTile(ht){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ht.uid]&&delete this.loaded[ht.uid]})}}class E{constructor(){this.loaded={}}loadTile(ht){return l._(this,void 0,void 0,function*(){const{uid:gt,encoding:Ct,rawImageData:kt,redFactor:_t,greenFactor:oe,blueFactor:he,baseShift:Kt}=ht,Fe=kt.width+2,Ve=kt.height+2,we=l.b(kt)?new l.R({width:Fe,height:Ve},yield l.cD(kt,-1,-1,Fe,Ve)):kt,rn=new l.cE(gt,we,Ct,_t,oe,he,Kt);return this.loaded=this.loaded||{},this.loaded[gt]=rn,rn})}removeTile(ht){const gt=this.loaded,Ct=ht.uid;gt&&gt[Ct]&&delete gt[Ct]}}var S,k,R=function(){if(k)return S;function ae(gt,Ct){if(gt.length!==0){ht(gt[0],Ct);for(var kt=1;kt<gt.length;kt++)ht(gt[kt],!Ct)}}function ht(gt,Ct){for(var kt=0,_t=0,oe=0,he=gt.length,Kt=he-1;oe<he;Kt=oe++){var Fe=(gt[oe][0]-gt[Kt][0])*(gt[Kt][1]+gt[oe][1]),Ve=kt+Fe;_t+=Math.abs(kt)>=Math.abs(Fe)?kt-Ve+Fe:Fe-Ve+kt,kt=Ve}kt+_t>=0!=!!Ct&&gt.reverse()}return k=1,S=function gt(Ct,kt){var _t,oe=Ct&&Ct.type;if(oe==="FeatureCollection")for(_t=0;_t<Ct.features.length;_t++)gt(Ct.features[_t],kt);else if(oe==="GeometryCollection")for(_t=0;_t<Ct.geometries.length;_t++)gt(Ct.geometries[_t],kt);else if(oe==="Feature")gt(Ct.geometry,kt);else if(oe==="Polygon")ae(Ct.coordinates,kt);else if(oe==="MultiPolygon")for(_t=0;_t<Ct.coordinates.length;_t++)ae(Ct.coordinates[_t],kt);return Ct}}(),B=l.cF(R);const V=l.cA.VectorTileFeature.prototype.toGeoJSON;class F{constructor(ht){this._feature=ht,this.extent=l.Z,this.type=ht.type,this.properties=ht.tags,"id"in ht&&!isNaN(ht.id)&&(this.id=parseInt(ht.id,10))}loadGeometry(){if(this._feature.type===1){const ht=[];for(const gt of this._feature.geometry)ht.push([new l.P(gt[0],gt[1])]);return ht}{const ht=[];for(const gt of this._feature.geometry){const Ct=[];for(const kt of gt)Ct.push(new l.P(kt[0],kt[1]));ht.push(Ct)}return ht}}toGeoJSON(ht,gt,Ct){return V.call(this,ht,gt,Ct)}}class j{constructor(ht){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.Z,this.length=ht.length,this._features=ht}feature(ht){return new F(this._features[ht])}}var G,Q,nt,X={exports:{}},K=function(){if(nt)return X.exports;nt=1;var ae=l.cI(),ht=function(){if(Q)return G;Q=1;var Ve=l.cG(),we=l.cH().VectorTileFeature;function rn(En,ir){this.options=ir||{},this.features=En,this.length=En.length}function Sn(En,ir){this.id=typeof En.id=="number"?En.id:void 0,this.type=En.type,this.rawGeometry=En.type===1?[En.geometry]:En.geometry,this.properties=En.tags,this.extent=ir||4096}return G=rn,rn.prototype.feature=function(En){return new Sn(this.features[En],this.options.extent)},Sn.prototype.loadGeometry=function(){var En=this.rawGeometry;this.geometry=[];for(var ir=0;ir<En.length;ir++){for(var gr=En[ir],Ue=[],$n=0;$n<gr.length;$n++)Ue.push(new Ve(gr[$n][0],gr[$n][1]));this.geometry.push(Ue)}return this.geometry},Sn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var En=this.geometry,ir=1/0,gr=-1/0,Ue=1/0,$n=-1/0,Fr=0;Fr<En.length;Fr++)for(var Yr=En[Fr],Pr=0;Pr<Yr.length;Pr++){var Ze=Yr[Pr];ir=Math.min(ir,Ze.x),gr=Math.max(gr,Ze.x),Ue=Math.min(Ue,Ze.y),$n=Math.max($n,Ze.y)}return[ir,Ue,gr,$n]},Sn.prototype.toGeoJSON=we.prototype.toGeoJSON,G}();function gt(Ve){var we=new ae;return function(rn,Sn){for(var En in rn.layers)Sn.writeMessage(3,Ct,rn.layers[En])}(Ve,we),we.finish()}function Ct(Ve,we){var rn;we.writeVarintField(15,Ve.version||1),we.writeStringField(1,Ve.name||""),we.writeVarintField(5,Ve.extent||4096);var Sn={keys:[],values:[],keycache:{},valuecache:{}};for(rn=0;rn<Ve.length;rn++)Sn.feature=Ve.feature(rn),we.writeMessage(2,kt,Sn);var En=Sn.keys;for(rn=0;rn<En.length;rn++)we.writeStringField(3,En[rn]);var ir=Sn.values;for(rn=0;rn<ir.length;rn++)we.writeMessage(4,Fe,ir[rn])}function kt(Ve,we){var rn=Ve.feature;rn.id!==void 0&&we.writeVarintField(1,rn.id),we.writeMessage(2,_t,Ve),we.writeVarintField(3,rn.type),we.writeMessage(4,Kt,rn)}function _t(Ve,we){var rn=Ve.feature,Sn=Ve.keys,En=Ve.values,ir=Ve.keycache,gr=Ve.valuecache;for(var Ue in rn.properties){var $n=rn.properties[Ue],Fr=ir[Ue];if($n!==null){Fr===void 0&&(Sn.push(Ue),ir[Ue]=Fr=Sn.length-1),we.writeVarint(Fr);var Yr=typeof $n;Yr!=="string"&&Yr!=="boolean"&&Yr!=="number"&&($n=JSON.stringify($n));var Pr=Yr+":"+$n,Ze=gr[Pr];Ze===void 0&&(En.push($n),gr[Pr]=Ze=En.length-1),we.writeVarint(Ze)}}}function oe(Ve,we){return(we<<3)+(7&Ve)}function he(Ve){return Ve<<1^Ve>>31}function Kt(Ve,we){for(var rn=Ve.loadGeometry(),Sn=Ve.type,En=0,ir=0,gr=rn.length,Ue=0;Ue<gr;Ue++){var $n=rn[Ue],Fr=1;Sn===1&&(Fr=$n.length),we.writeVarint(oe(1,Fr));for(var Yr=Sn===3?$n.length-1:$n.length,Pr=0;Pr<Yr;Pr++){Pr===1&&Sn!==1&&we.writeVarint(oe(2,Yr-1));var Ze=$n[Pr].x-En,zn=$n[Pr].y-ir;we.writeVarint(he(Ze)),we.writeVarint(he(zn)),En+=Ze,ir+=zn}Sn===3&&we.writeVarint(oe(7,1))}}function Fe(Ve,we){var rn=typeof Ve;rn==="string"?we.writeStringField(1,Ve):rn==="boolean"?we.writeBooleanField(7,Ve):rn==="number"&&(Ve%1!=0?we.writeDoubleField(3,Ve):Ve<0?we.writeSVarintField(6,Ve):we.writeVarintField(5,Ve))}return X.exports=gt,X.exports.fromVectorTileJs=gt,X.exports.fromGeojsonVt=function(Ve,we){we=we||{};var rn={};for(var Sn in Ve)rn[Sn]=new ht(Ve[Sn].features,we),rn[Sn].name=Sn,rn[Sn].version=we.version,rn[Sn].extent=we.extent;return gt({layers:rn})},X.exports.GeoJSONWrapper=ht,X.exports}(),Z=l.cF(K);const at={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ae=>ae},pt=Math.fround||(rt=new Float32Array(1),ae=>(rt[0]=+ae,rt[0]));var rt;const xt=3,q=5,zt=6;class Rt{constructor(ht){this.options=Object.assign(Object.create(at),ht),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ht){const{log:gt,minZoom:Ct,maxZoom:kt}=this.options;gt&&console.time("total time");const _t=`prepare ${ht.length} points`;gt&&console.time(_t),this.points=ht;const oe=[];for(let Kt=0;Kt<ht.length;Kt++){const Fe=ht[Kt];if(!Fe.geometry)continue;const[Ve,we]=Fe.geometry.coordinates,rn=pt(ge(Ve)),Sn=pt(en(we));oe.push(rn,Sn,1/0,Kt,-1,1),this.options.reduce&&oe.push(0)}let he=this.trees[kt+1]=this._createTree(oe);gt&&console.timeEnd(_t);for(let Kt=kt;Kt>=Ct;Kt--){const Fe=+Date.now();he=this.trees[Kt]=this._createTree(this._cluster(he,Kt)),gt&&console.log("z%d: %d clusters in %dms",Kt,he.numItems,+Date.now()-Fe)}return gt&&console.timeEnd("total time"),this}getClusters(ht,gt){let Ct=((ht[0]+180)%360+360)%360-180;const kt=Math.max(-90,Math.min(90,ht[1]));let _t=ht[2]===180?180:((ht[2]+180)%360+360)%360-180;const oe=Math.max(-90,Math.min(90,ht[3]));if(ht[2]-ht[0]>=360)Ct=-180,_t=180;else if(Ct>_t){const we=this.getClusters([Ct,kt,180,oe],gt),rn=this.getClusters([-180,kt,_t,oe],gt);return we.concat(rn)}const he=this.trees[this._limitZoom(gt)],Kt=he.range(ge(Ct),en(oe),ge(_t),en(kt)),Fe=he.data,Ve=[];for(const we of Kt){const rn=this.stride*we;Ve.push(Fe[rn+q]>1?Bt(Fe,rn,this.clusterProps):this.points[Fe[rn+xt]])}return Ve}getChildren(ht){const gt=this._getOriginId(ht),Ct=this._getOriginZoom(ht),kt="No cluster with the specified id.",_t=this.trees[Ct];if(!_t)throw new Error(kt);const oe=_t.data;if(gt*this.stride>=oe.length)throw new Error(kt);const he=this.options.radius/(this.options.extent*Math.pow(2,Ct-1)),Kt=_t.within(oe[gt*this.stride],oe[gt*this.stride+1],he),Fe=[];for(const Ve of Kt){const we=Ve*this.stride;oe[we+4]===ht&&Fe.push(oe[we+q]>1?Bt(oe,we,this.clusterProps):this.points[oe[we+xt]])}if(Fe.length===0)throw new Error(kt);return Fe}getLeaves(ht,gt,Ct){const kt=[];return this._appendLeaves(kt,ht,gt=gt||10,Ct=Ct||0,0),kt}getTile(ht,gt,Ct){const kt=this.trees[this._limitZoom(ht)],_t=Math.pow(2,ht),{extent:oe,radius:he}=this.options,Kt=he/oe,Fe=(Ct-Kt)/_t,Ve=(Ct+1+Kt)/_t,we={features:[]};return this._addTileFeatures(kt.range((gt-Kt)/_t,Fe,(gt+1+Kt)/_t,Ve),kt.data,gt,Ct,_t,we),gt===0&&this._addTileFeatures(kt.range(1-Kt/_t,Fe,1,Ve),kt.data,_t,Ct,_t,we),gt===_t-1&&this._addTileFeatures(kt.range(0,Fe,Kt/_t,Ve),kt.data,-1,Ct,_t,we),we.features.length?we:null}getClusterExpansionZoom(ht){let gt=this._getOriginZoom(ht)-1;for(;gt<=this.options.maxZoom;){const Ct=this.getChildren(ht);if(gt++,Ct.length!==1)break;ht=Ct[0].properties.cluster_id}return gt}_appendLeaves(ht,gt,Ct,kt,_t){const oe=this.getChildren(gt);for(const he of oe){const Kt=he.properties;if(Kt&&Kt.cluster?_t+Kt.point_count<=kt?_t+=Kt.point_count:_t=this._appendLeaves(ht,Kt.cluster_id,Ct,kt,_t):_t<kt?_t++:ht.push(he),ht.length===Ct)break}return _t}_createTree(ht){const gt=new l.aF(ht.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ct=0;Ct<ht.length;Ct+=this.stride)gt.add(ht[Ct],ht[Ct+1]);return gt.finish(),gt.data=ht,gt}_addTileFeatures(ht,gt,Ct,kt,_t,oe){for(const he of ht){const Kt=he*this.stride,Fe=gt[Kt+q]>1;let Ve,we,rn;if(Fe)Ve=Xt(gt,Kt,this.clusterProps),we=gt[Kt],rn=gt[Kt+1];else{const ir=this.points[gt[Kt+xt]];Ve=ir.properties;const[gr,Ue]=ir.geometry.coordinates;we=ge(gr),rn=en(Ue)}const Sn={type:1,geometry:[[Math.round(this.options.extent*(we*_t-Ct)),Math.round(this.options.extent*(rn*_t-kt))]],tags:Ve};let En;En=Fe||this.options.generateId?gt[Kt+xt]:this.points[gt[Kt+xt]].id,En!==void 0&&(Sn.id=En),oe.features.push(Sn)}}_limitZoom(ht){return Math.max(this.options.minZoom,Math.min(Math.floor(+ht),this.options.maxZoom+1))}_cluster(ht,gt){const{radius:Ct,extent:kt,reduce:_t,minPoints:oe}=this.options,he=Ct/(kt*Math.pow(2,gt)),Kt=ht.data,Fe=[],Ve=this.stride;for(let we=0;we<Kt.length;we+=Ve){if(Kt[we+2]<=gt)continue;Kt[we+2]=gt;const rn=Kt[we],Sn=Kt[we+1],En=ht.within(Kt[we],Kt[we+1],he),ir=Kt[we+q];let gr=ir;for(const Ue of En){const $n=Ue*Ve;Kt[$n+2]>gt&&(gr+=Kt[$n+q])}if(gr>ir&&gr>=oe){let Ue,$n=rn*ir,Fr=Sn*ir,Yr=-1;const Pr=((we/Ve|0)<<5)+(gt+1)+this.points.length;for(const Ze of En){const zn=Ze*Ve;if(Kt[zn+2]<=gt)continue;Kt[zn+2]=gt;const Jn=Kt[zn+q];$n+=Kt[zn]*Jn,Fr+=Kt[zn+1]*Jn,Kt[zn+4]=Pr,_t&&(Ue||(Ue=this._map(Kt,we,!0),Yr=this.clusterProps.length,this.clusterProps.push(Ue)),_t(Ue,this._map(Kt,zn)))}Kt[we+4]=Pr,Fe.push($n/gr,Fr/gr,1/0,Pr,-1,gr),_t&&Fe.push(Yr)}else{for(let Ue=0;Ue<Ve;Ue++)Fe.push(Kt[we+Ue]);if(gr>1)for(const Ue of En){const $n=Ue*Ve;if(!(Kt[$n+2]<=gt)){Kt[$n+2]=gt;for(let Fr=0;Fr<Ve;Fr++)Fe.push(Kt[$n+Fr])}}}}return Fe}_getOriginId(ht){return ht-this.points.length>>5}_getOriginZoom(ht){return(ht-this.points.length)%32}_map(ht,gt,Ct){if(ht[gt+q]>1){const oe=this.clusterProps[ht[gt+zt]];return Ct?Object.assign({},oe):oe}const kt=this.points[ht[gt+xt]].properties,_t=this.options.map(kt);return Ct&&_t===kt?Object.assign({},_t):_t}}function Bt(ae,ht,gt){return{type:"Feature",id:ae[ht+xt],properties:Xt(ae,ht,gt),geometry:{type:"Point",coordinates:[(Ct=ae[ht],360*(Ct-.5)),te(ae[ht+1])]}};var Ct}function Xt(ae,ht,gt){const Ct=ae[ht+q],kt=Ct>=1e4?`${Math.round(Ct/1e3)}k`:Ct>=1e3?Math.round(Ct/100)/10+"k":Ct,_t=ae[ht+zt],oe=_t===-1?{}:Object.assign({},gt[_t]);return Object.assign(oe,{cluster:!0,cluster_id:ae[ht+xt],point_count:Ct,point_count_abbreviated:kt})}function ge(ae){return ae/360+.5}function en(ae){const ht=Math.sin(ae*Math.PI/180),gt=.5-.25*Math.log((1+ht)/(1-ht))/Math.PI;return gt<0?0:gt>1?1:gt}function te(ae){const ht=(180-360*ae)*Math.PI/180;return 360*Math.atan(Math.exp(ht))/Math.PI-90}function Gt(ae,ht,gt,Ct){let kt=Ct;const _t=ht+(gt-ht>>1);let oe,he=gt-ht;const Kt=ae[ht],Fe=ae[ht+1],Ve=ae[gt],we=ae[gt+1];for(let rn=ht+3;rn<gt;rn+=3){const Sn=Re(ae[rn],ae[rn+1],Kt,Fe,Ve,we);if(Sn>kt)oe=rn,kt=Sn;else if(Sn===kt){const En=Math.abs(rn-_t);En<he&&(oe=rn,he=En)}}kt>Ct&&(oe-ht>3&&Gt(ae,ht,oe,Ct),ae[oe+2]=kt,gt-oe>3&&Gt(ae,oe,gt,Ct))}function Re(ae,ht,gt,Ct,kt,_t){let oe=kt-gt,he=_t-Ct;if(oe!==0||he!==0){const Kt=((ae-gt)*oe+(ht-Ct)*he)/(oe*oe+he*he);Kt>1?(gt=kt,Ct=_t):Kt>0&&(gt+=oe*Kt,Ct+=he*Kt)}return oe=ae-gt,he=ht-Ct,oe*oe+he*he}function Ge(ae,ht,gt,Ct){const kt={id:ae??null,type:ht,geometry:gt,tags:Ct,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ht==="Point"||ht==="MultiPoint"||ht==="LineString")Ce(kt,gt);else if(ht==="Polygon")Ce(kt,gt[0]);else if(ht==="MultiLineString")for(const _t of gt)Ce(kt,_t);else if(ht==="MultiPolygon")for(const _t of gt)Ce(kt,_t[0]);return kt}function Ce(ae,ht){for(let gt=0;gt<ht.length;gt+=3)ae.minX=Math.min(ae.minX,ht[gt]),ae.minY=Math.min(ae.minY,ht[gt+1]),ae.maxX=Math.max(ae.maxX,ht[gt]),ae.maxY=Math.max(ae.maxY,ht[gt+1])}function nn(ae,ht,gt,Ct){if(!ht.geometry)return;const kt=ht.geometry.coordinates;if(kt&&kt.length===0)return;const _t=ht.geometry.type,oe=Math.pow(gt.tolerance/((1<<gt.maxZoom)*gt.extent),2);let he=[],Kt=ht.id;if(gt.promoteId?Kt=ht.properties[gt.promoteId]:gt.generateId&&(Kt=Ct||0),_t==="Point")be(kt,he);else if(_t==="MultiPoint")for(const Fe of kt)be(Fe,he);else if(_t==="LineString")Se(kt,he,oe,!1);else if(_t==="MultiLineString"){if(gt.lineMetrics){for(const Fe of kt)he=[],Se(Fe,he,oe,!1),ae.push(Ge(Kt,"LineString",he,ht.properties));return}xe(kt,he,oe,!1)}else if(_t==="Polygon")xe(kt,he,oe,!0);else{if(_t!=="MultiPolygon"){if(_t==="GeometryCollection"){for(const Fe of ht.geometry.geometries)nn(ae,{id:Kt,geometry:Fe,properties:ht.properties},gt,Ct);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Fe of kt){const Ve=[];xe(Fe,Ve,oe,!0),he.push(Ve)}}ae.push(Ge(Kt,_t,he,ht.properties))}function be(ae,ht){ht.push(Be(ae[0]),tn(ae[1]),0)}function Se(ae,ht,gt,Ct){let kt,_t,oe=0;for(let Kt=0;Kt<ae.length;Kt++){const Fe=Be(ae[Kt][0]),Ve=tn(ae[Kt][1]);ht.push(Fe,Ve,0),Kt>0&&(oe+=Ct?(kt*Ve-Fe*_t)/2:Math.sqrt(Math.pow(Fe-kt,2)+Math.pow(Ve-_t,2))),kt=Fe,_t=Ve}const he=ht.length-3;ht[2]=1,Gt(ht,0,he,gt),ht[he+2]=1,ht.size=Math.abs(oe),ht.start=0,ht.end=ht.size}function xe(ae,ht,gt,Ct){for(let kt=0;kt<ae.length;kt++){const _t=[];Se(ae[kt],_t,gt,Ct),ht.push(_t)}}function Be(ae){return ae/360+.5}function tn(ae){const ht=Math.sin(ae*Math.PI/180),gt=.5-.25*Math.log((1+ht)/(1-ht))/Math.PI;return gt<0?0:gt>1?1:gt}function Ln(ae,ht,gt,Ct,kt,_t,oe,he){if(Ct/=ht,_t>=(gt/=ht)&&oe<Ct)return ae;if(oe<gt||_t>=Ct)return null;const Kt=[];for(const Fe of ae){const Ve=Fe.geometry;let we=Fe.type;const rn=kt===0?Fe.minX:Fe.minY,Sn=kt===0?Fe.maxX:Fe.maxY;if(rn>=gt&&Sn<Ct){Kt.push(Fe);continue}if(Sn<gt||rn>=Ct)continue;let En=[];if(we==="Point"||we==="MultiPoint")Tt(Ve,En,gt,Ct,kt);else if(we==="LineString")H(Ve,En,gt,Ct,kt,!1,he.lineMetrics);else if(we==="MultiLineString")Pt(Ve,En,gt,Ct,kt,!1);else if(we==="Polygon")Pt(Ve,En,gt,Ct,kt,!0);else if(we==="MultiPolygon")for(const ir of Ve){const gr=[];Pt(ir,gr,gt,Ct,kt,!0),gr.length&&En.push(gr)}if(En.length){if(he.lineMetrics&&we==="LineString"){for(const ir of En)Kt.push(Ge(Fe.id,we,ir,Fe.tags));continue}we!=="LineString"&&we!=="MultiLineString"||(En.length===1?(we="LineString",En=En[0]):we="MultiLineString"),we!=="Point"&&we!=="MultiPoint"||(we=En.length===3?"Point":"MultiPoint"),Kt.push(Ge(Fe.id,we,En,Fe.tags))}}return Kt.length?Kt:null}function Tt(ae,ht,gt,Ct,kt){for(let _t=0;_t<ae.length;_t+=3){const oe=ae[_t+kt];oe>=gt&&oe<=Ct&&yt(ht,ae[_t],ae[_t+1],ae[_t+2])}}function H(ae,ht,gt,Ct,kt,_t,oe){let he=Dt(ae);const Kt=kt===0?vt:Ut;let Fe,Ve,we=ae.start;for(let gr=0;gr<ae.length-3;gr+=3){const Ue=ae[gr],$n=ae[gr+1],Fr=ae[gr+2],Yr=ae[gr+3],Pr=ae[gr+4],Ze=kt===0?Ue:$n,zn=kt===0?Yr:Pr;let Jn=!1;oe&&(Fe=Math.sqrt(Math.pow(Ue-Yr,2)+Math.pow($n-Pr,2))),Ze<gt?zn>gt&&(Ve=Kt(he,Ue,$n,Yr,Pr,gt),oe&&(he.start=we+Fe*Ve)):Ze>Ct?zn<Ct&&(Ve=Kt(he,Ue,$n,Yr,Pr,Ct),oe&&(he.start=we+Fe*Ve)):yt(he,Ue,$n,Fr),zn<gt&&Ze>=gt&&(Ve=Kt(he,Ue,$n,Yr,Pr,gt),Jn=!0),zn>Ct&&Ze<=Ct&&(Ve=Kt(he,Ue,$n,Yr,Pr,Ct),Jn=!0),!_t&&Jn&&(oe&&(he.end=we+Fe*Ve),ht.push(he),he=Dt(ae)),oe&&(we+=Fe)}let rn=ae.length-3;const Sn=ae[rn],En=ae[rn+1],ir=kt===0?Sn:En;ir>=gt&&ir<=Ct&&yt(he,Sn,En,ae[rn+2]),rn=he.length-3,_t&&rn>=3&&(he[rn]!==he[0]||he[rn+1]!==he[1])&&yt(he,he[0],he[1],he[2]),he.length&&ht.push(he)}function Dt(ae){const ht=[];return ht.size=ae.size,ht.start=ae.start,ht.end=ae.end,ht}function Pt(ae,ht,gt,Ct,kt,_t){for(const oe of ae)H(oe,ht,gt,Ct,kt,_t,!1)}function yt(ae,ht,gt,Ct){ae.push(ht,gt,Ct)}function vt(ae,ht,gt,Ct,kt,_t){const oe=(_t-ht)/(Ct-ht);return yt(ae,_t,gt+(kt-gt)*oe,1),oe}function Ut(ae,ht,gt,Ct,kt,_t){const oe=(_t-gt)/(kt-gt);return yt(ae,ht+(Ct-ht)*oe,_t,1),oe}function ne(ae,ht){const gt=[];for(let Ct=0;Ct<ae.length;Ct++){const kt=ae[Ct],_t=kt.type;let oe;if(_t==="Point"||_t==="MultiPoint"||_t==="LineString")oe=ue(kt.geometry,ht);else if(_t==="MultiLineString"||_t==="Polygon"){oe=[];for(const he of kt.geometry)oe.push(ue(he,ht))}else if(_t==="MultiPolygon"){oe=[];for(const he of kt.geometry){const Kt=[];for(const Fe of he)Kt.push(ue(Fe,ht));oe.push(Kt)}}gt.push(Ge(kt.id,_t,oe,kt.tags))}return gt}function ue(ae,ht){const gt=[];gt.size=ae.size,ae.start!==void 0&&(gt.start=ae.start,gt.end=ae.end);for(let Ct=0;Ct<ae.length;Ct+=3)gt.push(ae[Ct]+ht,ae[Ct+1],ae[Ct+2]);return gt}function Ht(ae,ht){if(ae.transformed)return ae;const gt=1<<ae.z,Ct=ae.x,kt=ae.y;for(const _t of ae.features){const oe=_t.geometry,he=_t.type;if(_t.geometry=[],he===1)for(let Kt=0;Kt<oe.length;Kt+=2)_t.geometry.push(Me(oe[Kt],oe[Kt+1],ht,gt,Ct,kt));else for(let Kt=0;Kt<oe.length;Kt++){const Fe=[];for(let Ve=0;Ve<oe[Kt].length;Ve+=2)Fe.push(Me(oe[Kt][Ve],oe[Kt][Ve+1],ht,gt,Ct,kt));_t.geometry.push(Fe)}}return ae.transformed=!0,ae}function Me(ae,ht,gt,Ct,kt,_t){return[Math.round(gt*(ae*Ct-kt)),Math.round(gt*(ht*Ct-_t))]}function je(ae,ht,gt,Ct,kt){const _t=ht===kt.maxZoom?0:kt.tolerance/((1<<ht)*kt.extent),oe={features:[],numPoints:0,numSimplified:0,numFeatures:ae.length,source:null,x:gt,y:Ct,z:ht,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const he of ae)Le(oe,he,_t,kt);return oe}function Le(ae,ht,gt,Ct){const kt=ht.geometry,_t=ht.type,oe=[];if(ae.minX=Math.min(ae.minX,ht.minX),ae.minY=Math.min(ae.minY,ht.minY),ae.maxX=Math.max(ae.maxX,ht.maxX),ae.maxY=Math.max(ae.maxY,ht.maxY),_t==="Point"||_t==="MultiPoint")for(let he=0;he<kt.length;he+=3)oe.push(kt[he],kt[he+1]),ae.numPoints++,ae.numSimplified++;else if(_t==="LineString")Ke(oe,kt,ae,gt,!1,!1);else if(_t==="MultiLineString"||_t==="Polygon")for(let he=0;he<kt.length;he++)Ke(oe,kt[he],ae,gt,_t==="Polygon",he===0);else if(_t==="MultiPolygon")for(let he=0;he<kt.length;he++){const Kt=kt[he];for(let Fe=0;Fe<Kt.length;Fe++)Ke(oe,Kt[Fe],ae,gt,!0,Fe===0)}if(oe.length){let he=ht.tags||null;if(_t==="LineString"&&Ct.lineMetrics){he={};for(const Fe in ht.tags)he[Fe]=ht.tags[Fe];he.mapbox_clip_start=kt.start/kt.size,he.mapbox_clip_end=kt.end/kt.size}const Kt={geometry:oe,type:_t==="Polygon"||_t==="MultiPolygon"?3:_t==="LineString"||_t==="MultiLineString"?2:1,tags:he};ht.id!==null&&(Kt.id=ht.id),ae.features.push(Kt)}}function Ke(ae,ht,gt,Ct,kt,_t){const oe=Ct*Ct;if(Ct>0&&ht.size<(kt?oe:Ct))return void(gt.numPoints+=ht.length/3);const he=[];for(let Kt=0;Kt<ht.length;Kt+=3)(Ct===0||ht[Kt+2]>oe)&&(gt.numSimplified++,he.push(ht[Kt],ht[Kt+1])),gt.numPoints++;kt&&function(Kt,Fe){let Ve=0;for(let we=0,rn=Kt.length,Sn=rn-2;we<rn;Sn=we,we+=2)Ve+=(Kt[we]-Kt[Sn])*(Kt[we+1]+Kt[Sn+1]);if(Ve>0===Fe)for(let we=0,rn=Kt.length;we<rn/2;we+=2){const Sn=Kt[we],En=Kt[we+1];Kt[we]=Kt[rn-2-we],Kt[we+1]=Kt[rn-1-we],Kt[rn-2-we]=Sn,Kt[rn-1-we]=En}}(he,_t),ae.push(he)}const bn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Cn{constructor(ht,gt){const Ct=(gt=this.options=function(_t,oe){for(const he in oe)_t[he]=oe[he];return _t}(Object.create(bn),gt)).debug;if(Ct&&console.time("preprocess data"),gt.maxZoom<0||gt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(gt.promoteId&&gt.generateId)throw new Error("promoteId and generateId cannot be used together.");let kt=function(_t,oe){const he=[];if(_t.type==="FeatureCollection")for(let Kt=0;Kt<_t.features.length;Kt++)nn(he,_t.features[Kt],oe,Kt);else nn(he,_t.type==="Feature"?_t:{geometry:_t},oe);return he}(ht,gt);this.tiles={},this.tileCoords=[],Ct&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",gt.indexMaxZoom,gt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),kt=function(_t,oe){const he=oe.buffer/oe.extent;let Kt=_t;const Fe=Ln(_t,1,-1-he,he,0,-1,2,oe),Ve=Ln(_t,1,1-he,2+he,0,-1,2,oe);return(Fe||Ve)&&(Kt=Ln(_t,1,-he,1+he,0,-1,2,oe)||[],Fe&&(Kt=ne(Fe,1).concat(Kt)),Ve&&(Kt=Kt.concat(ne(Ve,-1)))),Kt}(kt,gt),kt.length&&this.splitTile(kt,0,0,0),Ct&&(kt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ht,gt,Ct,kt,_t,oe,he){const Kt=[ht,gt,Ct,kt],Fe=this.options,Ve=Fe.debug;for(;Kt.length;){kt=Kt.pop(),Ct=Kt.pop(),gt=Kt.pop(),ht=Kt.pop();const we=1<<gt,rn=de(gt,Ct,kt);let Sn=this.tiles[rn];if(!Sn&&(Ve>1&&console.time("creation"),Sn=this.tiles[rn]=je(ht,gt,Ct,kt,Fe),this.tileCoords.push({z:gt,x:Ct,y:kt}),Ve)){Ve>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",gt,Ct,kt,Sn.numFeatures,Sn.numPoints,Sn.numSimplified),console.timeEnd("creation"));const Jn=`z${gt}`;this.stats[Jn]=(this.stats[Jn]||0)+1,this.total++}if(Sn.source=ht,_t==null){if(gt===Fe.indexMaxZoom||Sn.numPoints<=Fe.indexMaxPoints)continue}else{if(gt===Fe.maxZoom||gt===_t)continue;if(_t!=null){const Jn=_t-gt;if(Ct!==oe>>Jn||kt!==he>>Jn)continue}}if(Sn.source=null,ht.length===0)continue;Ve>1&&console.time("clipping");const En=.5*Fe.buffer/Fe.extent,ir=.5-En,gr=.5+En,Ue=1+En;let $n=null,Fr=null,Yr=null,Pr=null,Ze=Ln(ht,we,Ct-En,Ct+gr,0,Sn.minX,Sn.maxX,Fe),zn=Ln(ht,we,Ct+ir,Ct+Ue,0,Sn.minX,Sn.maxX,Fe);ht=null,Ze&&($n=Ln(Ze,we,kt-En,kt+gr,1,Sn.minY,Sn.maxY,Fe),Fr=Ln(Ze,we,kt+ir,kt+Ue,1,Sn.minY,Sn.maxY,Fe),Ze=null),zn&&(Yr=Ln(zn,we,kt-En,kt+gr,1,Sn.minY,Sn.maxY,Fe),Pr=Ln(zn,we,kt+ir,kt+Ue,1,Sn.minY,Sn.maxY,Fe),zn=null),Ve>1&&console.timeEnd("clipping"),Kt.push($n||[],gt+1,2*Ct,2*kt),Kt.push(Fr||[],gt+1,2*Ct,2*kt+1),Kt.push(Yr||[],gt+1,2*Ct+1,2*kt),Kt.push(Pr||[],gt+1,2*Ct+1,2*kt+1)}}getTile(ht,gt,Ct){ht=+ht,gt=+gt,Ct=+Ct;const kt=this.options,{extent:_t,debug:oe}=kt;if(ht<0||ht>24)return null;const he=1<<ht,Kt=de(ht,gt=gt+he&he-1,Ct);if(this.tiles[Kt])return Ht(this.tiles[Kt],_t);oe>1&&console.log("drilling down to z%d-%d-%d",ht,gt,Ct);let Fe,Ve=ht,we=gt,rn=Ct;for(;!Fe&&Ve>0;)Ve--,we>>=1,rn>>=1,Fe=this.tiles[de(Ve,we,rn)];return Fe&&Fe.source?(oe>1&&(console.log("found parent tile z%d-%d-%d",Ve,we,rn),console.time("drilling down")),this.splitTile(Fe.source,Ve,we,rn,ht,gt,Ct),oe>1&&console.timeEnd("drilling down"),this.tiles[Kt]?Ht(this.tiles[Kt],_t):null):null}}function de(ae,ht,gt){return 32*((1<<ae)*gt+ht)+ae}function ve(ae,ht){return ht?ae.properties[ht]:ae.id}function Te(ae,ht){if(ae==null)return!0;if(ae.type==="Feature")return ve(ae,ht)!=null;if(ae.type==="FeatureCollection"){const gt=new Set;for(const Ct of ae.features){const kt=ve(Ct,ht);if(kt==null||gt.has(kt))return!1;gt.add(kt)}return!0}return!1}function Ye(ae,ht){const gt=new Map;if(ae!=null)if(ae.type==="Feature")gt.set(ve(ae,ht),ae);else for(const Ct of ae.features)gt.set(ve(Ct,ht),Ct);return gt}class un extends I{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ht,gt){return l._(this,void 0,void 0,function*(){const Ct=ht.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const kt=this._geoJSONIndex.getTile(Ct.z,Ct.x,Ct.y);if(!kt)return null;const _t=new j(kt.features);let oe=Z(_t);return oe.byteOffset===0&&oe.byteLength===oe.buffer.byteLength||(oe=new Uint8Array(oe)),{vectorTile:_t,rawData:oe.buffer}})}loadData(ht){return l._(this,void 0,void 0,function*(){var gt;(gt=this._pendingRequest)===null||gt===void 0||gt.abort();const Ct=!!(ht&&ht.request&&ht.request.collectResourceTiming)&&new l.cC(ht.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ht,this._pendingRequest),this._geoJSONIndex=ht.cluster?new Rt(function({superclusterOptions:oe,clusterProperties:he}){if(!he||!oe)return oe;const Kt={},Fe={},Ve={accumulated:null,zoom:0},we={properties:null},rn=Object.keys(he);for(const Sn of rn){const[En,ir]=he[Sn],gr=l.cJ(ir),Ue=l.cJ(typeof En=="string"?[En,["accumulated"],["get",Sn]]:En);Kt[Sn]=gr.value,Fe[Sn]=Ue.value}return oe.map=Sn=>{we.properties=Sn;const En={};for(const ir of rn)En[ir]=Kt[ir].evaluate(Ve,we);return En},oe.reduce=(Sn,En)=>{we.properties=En;for(const ir of rn)Ve.accumulated=Sn[ir],Sn[ir]=Fe[ir].evaluate(Ve,we)},oe}(ht)).load((yield this._pendingData).features):(kt=yield this._pendingData,new Cn(kt,ht.geojsonVtOptions)),this.loaded={};const _t={};if(Ct){const oe=Ct.finish();oe&&(_t.resourceTiming={},_t.resourceTiming[ht.source]=JSON.parse(JSON.stringify(oe)))}return _t}catch(_t){if(delete this._pendingRequest,l.cn(_t))return{abandoned:!0};throw _t}var kt})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ht){const gt=this.loaded;return gt&&gt[ht.uid]?super.reloadTile(ht):this.loadTile(ht)}loadAndProcessGeoJSON(ht,gt){return l._(this,void 0,void 0,function*(){let Ct=yield this.loadGeoJSON(ht,gt);if(delete this._pendingRequest,typeof Ct!="object")throw new Error(`Input data given to '${ht.source}' is not a valid GeoJSON object.`);if(B(Ct,!0),ht.filter){const kt=l.cJ(ht.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(kt.result==="error")throw new Error(kt.value.map(oe=>`${oe.key}: ${oe.message}`).join(", "));Ct={type:"FeatureCollection",features:Ct.features.filter(oe=>kt.value.evaluate({zoom:0},oe))}}return Ct})}loadGeoJSON(ht,gt){return l._(this,void 0,void 0,function*(){const{promoteId:Ct}=ht;if(ht.request){const kt=yield l.j(ht.request,gt);return this._dataUpdateable=Te(kt.data,Ct)?Ye(kt.data,Ct):void 0,kt.data}if(typeof ht.data=="string")try{const kt=JSON.parse(ht.data);return this._dataUpdateable=Te(kt,Ct)?Ye(kt,Ct):void 0,kt}catch{throw new Error(`Input data given to '${ht.source}' is not a valid GeoJSON object.`)}if(!ht.dataDiff)throw new Error(`Input data given to '${ht.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ht.source}`);return function(kt,_t,oe){var he,Kt,Fe,Ve;if(_t.removeAll&&kt.clear(),_t.remove)for(const we of _t.remove)kt.delete(we);if(_t.add)for(const we of _t.add){const rn=ve(we,oe);rn!=null&&kt.set(rn,we)}if(_t.update)for(const we of _t.update){let rn=kt.get(we.id);if(rn==null)continue;const Sn=!we.removeAllProperties&&(((he=we.removeProperties)===null||he===void 0?void 0:he.length)>0||((Kt=we.addOrUpdateProperties)===null||Kt===void 0?void 0:Kt.length)>0);if((we.newGeometry||we.removeAllProperties||Sn)&&(rn=Object.assign({},rn),kt.set(we.id,rn),Sn&&(rn.properties=Object.assign({},rn.properties))),we.newGeometry&&(rn.geometry=we.newGeometry),we.removeAllProperties)rn.properties={};else if(((Fe=we.removeProperties)===null||Fe===void 0?void 0:Fe.length)>0)for(const En of we.removeProperties)Object.prototype.hasOwnProperty.call(rn.properties,En)&&delete rn.properties[En];if(((Ve=we.addOrUpdateProperties)===null||Ve===void 0?void 0:Ve.length)>0)for(const{key:En,value:ir}of we.addOrUpdateProperties)rn.properties[En]=ir}}(this._dataUpdateable,ht.dataDiff,Ct),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ht){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ht){return this._geoJSONIndex.getClusterExpansionZoom(ht.clusterId)}getClusterChildren(ht){return this._geoJSONIndex.getChildren(ht.clusterId)}getClusterLeaves(ht){return this._geoJSONIndex.getLeaves(ht.clusterId,ht.limit,ht.offset)}}class Nn{constructor(ht){this.self=ht,this.actor=new l.H(ht),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(gt,Ct)=>{if(this.externalWorkerSourceTypes[gt])throw new Error(`Worker source with name "${gt}" already registered.`);this.externalWorkerSourceTypes[gt]=Ct},this.self.addProtocol=l.cp,this.self.removeProtocol=l.cq,this.self.registerRTLTextPlugin=gt=>{l.cK.setMethods(gt)},this.actor.registerMessageHandler("LDT",(gt,Ct)=>this._getDEMWorkerSource(gt,Ct.source).loadTile(Ct)),this.actor.registerMessageHandler("RDT",(gt,Ct)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(gt,Ct.source).removeTile(Ct)})),this.actor.registerMessageHandler("GCEZ",(gt,Ct)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(gt,Ct.type,Ct.source).getClusterExpansionZoom(Ct)})),this.actor.registerMessageHandler("GCC",(gt,Ct)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(gt,Ct.type,Ct.source).getClusterChildren(Ct)})),this.actor.registerMessageHandler("GCL",(gt,Ct)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(gt,Ct.type,Ct.source).getClusterLeaves(Ct)})),this.actor.registerMessageHandler("LD",(gt,Ct)=>this._getWorkerSource(gt,Ct.type,Ct.source).loadData(Ct)),this.actor.registerMessageHandler("GD",(gt,Ct)=>this._getWorkerSource(gt,Ct.type,Ct.source).getData()),this.actor.registerMessageHandler("LT",(gt,Ct)=>this._getWorkerSource(gt,Ct.type,Ct.source).loadTile(Ct)),this.actor.registerMessageHandler("RT",(gt,Ct)=>this._getWorkerSource(gt,Ct.type,Ct.source).reloadTile(Ct)),this.actor.registerMessageHandler("AT",(gt,Ct)=>this._getWorkerSource(gt,Ct.type,Ct.source).abortTile(Ct)),this.actor.registerMessageHandler("RMT",(gt,Ct)=>this._getWorkerSource(gt,Ct.type,Ct.source).removeTile(Ct)),this.actor.registerMessageHandler("RS",(gt,Ct)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[gt]||!this.workerSources[gt][Ct.type]||!this.workerSources[gt][Ct.type][Ct.source])return;const kt=this.workerSources[gt][Ct.type][Ct.source];delete this.workerSources[gt][Ct.type][Ct.source],kt.removeSource!==void 0&&kt.removeSource(Ct)})),this.actor.registerMessageHandler("RM",gt=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[gt],delete this.availableImages[gt],delete this.workerSources[gt],delete this.demWorkerSources[gt]})),this.actor.registerMessageHandler("SR",(gt,Ct)=>l._(this,void 0,void 0,function*(){this.referrer=Ct})),this.actor.registerMessageHandler("SRPS",(gt,Ct)=>this._syncRTLPluginState(gt,Ct)),this.actor.registerMessageHandler("IS",(gt,Ct)=>l._(this,void 0,void 0,function*(){this.self.importScripts(Ct)})),this.actor.registerMessageHandler("SI",(gt,Ct)=>this._setImages(gt,Ct)),this.actor.registerMessageHandler("UL",(gt,Ct)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(gt).update(Ct.layers,Ct.removedIds)})),this.actor.registerMessageHandler("SL",(gt,Ct)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(gt).replace(Ct)}))}_setImages(ht,gt){return l._(this,void 0,void 0,function*(){this.availableImages[ht]=gt;for(const Ct in this.workerSources[ht]){const kt=this.workerSources[ht][Ct];for(const _t in kt)kt[_t].availableImages=gt}})}_syncRTLPluginState(ht,gt){return l._(this,void 0,void 0,function*(){return yield l.cK.syncState(gt,this.self.importScripts)})}_getAvailableImages(ht){let gt=this.availableImages[ht];return gt||(gt=[]),gt}_getLayerIndex(ht){let gt=this.layerIndexes[ht];return gt||(gt=this.layerIndexes[ht]=new o),gt}_getWorkerSource(ht,gt,Ct){if(this.workerSources[ht]||(this.workerSources[ht]={}),this.workerSources[ht][gt]||(this.workerSources[ht][gt]={}),!this.workerSources[ht][gt][Ct]){const kt={sendAsync:(_t,oe)=>(_t.targetMapId=ht,this.actor.sendAsync(_t,oe))};switch(gt){case"vector":this.workerSources[ht][gt][Ct]=new I(kt,this._getLayerIndex(ht),this._getAvailableImages(ht));break;case"geojson":this.workerSources[ht][gt][Ct]=new un(kt,this._getLayerIndex(ht),this._getAvailableImages(ht));break;default:this.workerSources[ht][gt][Ct]=new this.externalWorkerSourceTypes[gt](kt,this._getLayerIndex(ht),this._getAvailableImages(ht))}}return this.workerSources[ht][gt][Ct]}_getDEMWorkerSource(ht,gt){return this.demWorkerSources[ht]||(this.demWorkerSources[ht]={}),this.demWorkerSources[ht][gt]||(this.demWorkerSources[ht][gt]=new E),this.demWorkerSources[ht][gt]}}return l.i(self)&&(self.worker=new Nn(self)),Nn}),s("index",["exports","./shared"],function(l,o){var g="5.4.0";function _(){var b=new o.A(4);return o.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}let C,I;const E={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(b,r,c){const p=requestAnimationFrame(A=>{y(),r(A)}),{unsubscribe:y}=o.s(b.signal,"abort",()=>{y(),cancelAnimationFrame(p),c(o.c())},!1)},frameAsync(b){return new Promise((r,c)=>{this.frame(b,r,c)})},getImageData(b,r=0){return this.getImageCanvasContext(b).getImageData(-r,-r,b.width+2*r,b.height+2*r)},getImageCanvasContext(b){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=b.width,r.height=b.height,c.drawImage(b,0,0,b.width,b.height),c},resolveURL:b=>(C||(C=document.createElement("a")),C.href=b,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class S{static testProp(r){if(!S.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in S.docStyle)return r[c];return r[0]}static create(r,c,p){const y=window.document.createElement(r);return c!==void 0&&(y.className=c),p&&p.appendChild(y),y}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){S.docStyle&&S.selectProp&&(S.userSelect=S.docStyle[S.selectProp],S.docStyle[S.selectProp]="none")}static enableDrag(){S.docStyle&&S.selectProp&&(S.docStyle[S.selectProp]=S.userSelect)}static setTransform(r,c){r.style[S.transformProp]=c}static addEventListener(r,c,p,y={}){r.addEventListener(c,p,"passive"in y?y:y.capture)}static removeEventListener(r,c,p,y={}){r.removeEventListener(c,p,"passive"in y?y:y.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",S.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",S.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",S.suppressClickInternal,!0)},0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,p){const y=c.boundingClientRect;return new o.P((p.clientX-y.left)/c.x-r.clientLeft,(p.clientY-y.top)/c.y-r.clientTop)}static mousePos(r,c){const p=S.getScale(r);return S.getPoint(r,p,c)}static touchPos(r,c){const p=[],y=S.getScale(r);for(let A=0;A<c.length;A++)p.push(S.getPoint(r,y,c[A]));return p}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const c=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),p=c.querySelectorAll("script");for(const y of p)y.remove();return S.clean(c),c.innerHTML}static isPossiblyDangerous(r,c){const p=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!p.includes("javascript:")&&!p.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const c=r.children;for(const p of c)S.removeAttributes(p),S.clean(p)}static removeAttributes(r){for(const{name:c,value:p}of r.attributes)S.isPossiblyDangerous(c,p)&&r.removeAttribute(c)}}S.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,S.selectProp=S.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),S.transformProp=S.testProp(["transform","WebkitTransform"]);const k={supported:!1,testSupport:function(b){!V&&B&&(F?j(b):R=b)}};let R,B,V=!1,F=!1;function j(b){const r=b.createTexture();b.bindTexture(b.TEXTURE_2D,r);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,B),b.isContextLost())return;k.supported=!0}catch{}b.deleteTexture(r),V=!0}var G;typeof document<"u"&&(B=document.createElement("img"),B.onload=()=>{R&&j(R),R=null,F=!0},B.onerror=()=>{V=!0,R=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(b){let r,c,p,y;b.resetRequestQueue=()=>{r=[],c=0,p=0,y={}},b.addThrottleControl=N=>{const $=p++;return y[$]=N,$},b.removeThrottleControl=N=>{delete y[N],T()},b.getImage=(N,$,J=!0)=>new Promise((it,ot)=>{k.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*"),o.e(N,{type:"image"}),r.push({abortController:$,requestParameters:N,supportImageRefresh:J,state:"queued",onError:ft=>{ot(ft)},onSuccess:ft=>{it(ft)}}),T()});const A=N=>o._(this,void 0,void 0,function*(){N.state="running";const{requestParameters:$,supportImageRefresh:J,onError:it,onSuccess:ot,abortController:ft}=N,bt=J===!1&&!o.i(self)&&!o.g($.url)&&(!$.headers||Object.keys($.headers).reduce((jt,Wt)=>jt&&Wt==="accept",!0));c++;const Ft=bt?L($,ft):o.m($,ft);try{const jt=yield Ft;delete N.abortController,N.state="completed",jt.data instanceof HTMLImageElement||o.b(jt.data)?ot(jt):jt.data&&ot({data:yield(Ot=jt.data,typeof createImageBitmap=="function"?o.f(Ot):o.h(Ot)),cacheControl:jt.cacheControl,expires:jt.expires})}catch(jt){delete N.abortController,it(jt)}finally{c--,T()}var Ot}),T=()=>{const N=(()=>{for(const $ of Object.keys(y))if(y[$]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let $=c;$<N&&r.length>0;$++){const J=r.shift();J.abortController.signal.aborted?$--:A(J)}},L=(N,$)=>new Promise((J,it)=>{const ot=new Image,ft=N.url,bt=N.credentials;bt&&bt==="include"?ot.crossOrigin="use-credentials":(bt&&bt==="same-origin"||!o.d(ft))&&(ot.crossOrigin="anonymous"),$.signal.addEventListener("abort",()=>{ot.src="",it(o.c())}),ot.fetchPriority="high",ot.onload=()=>{ot.onerror=ot.onload=null,J({data:ot})},ot.onerror=()=>{ot.onerror=ot.onload=null,$.signal.aborted||it(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ot.src=ft})}(G||(G={})),G.resetRequestQueue();class Q{constructor(r){this._transformRequestFn=r}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function nt(b){const r=[];if(typeof b=="string")r.push({id:"default",url:b});else if(b&&b.length>0){const c=[];for(const{id:p,url:y}of b){const A=`${p}${y}`;c.indexOf(A)===-1&&(c.push(A),r.push({id:p,url:y}))}}return r}function X(b,r,c){try{const p=new URL(b);return p.pathname+=`${r}${c}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${b}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class K{constructor(r,c,p,y){this.context=r,this.format=p,this.texture=r.gl.createTexture(),this.update(c,y)}update(r,c,p){const{width:y,height:A}=r,T=!(this.size&&this.size[0]===y&&this.size[1]===A||p),{context:L}=this,{gl:N}=L;if(this.useMipmap=!!(c&&c.useMipmap),N.bindTexture(N.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===N.RGBA&&(!c||c.premultiply!==!1)),T)this.size=[y,A],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||o.b(r)?N.texImage2D(N.TEXTURE_2D,0,this.format,this.format,N.UNSIGNED_BYTE,r):N.texImage2D(N.TEXTURE_2D,0,this.format,y,A,0,this.format,N.UNSIGNED_BYTE,r.data);else{const{x:$,y:J}=p||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||o.b(r)?N.texSubImage2D(N.TEXTURE_2D,0,$,J,N.RGBA,N.UNSIGNED_BYTE,r):N.texSubImage2D(N.TEXTURE_2D,0,$,J,y,A,N.RGBA,N.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&N.generateMipmap(N.TEXTURE_2D),L.pixelStoreUnpackFlipY.setDefault(),L.pixelStoreUnpack.setDefault(),L.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,c,p){const{context:y}=this,{gl:A}=y;A.bindTexture(A.TEXTURE_2D,this.texture),p!==A.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=A.LINEAR),r!==this.filter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,r),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,p||r),this.filter=r),c!==this.wrap&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,c),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function Z(b){const{userImage:r}=b;return!!(r&&r.render&&r.render())&&(b.data.replace(new Uint8Array(r.data.buffer)),!0)}class at extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:p}of this.requestors)p(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new o.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let p=!0;const y=c.data||c.spriteData;return this._validateStretch(c.stretchX,y&&y.width)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,y&&y.height)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "content" value`))),p=!1),p}_validateStretch(r,c){if(!r)return!0;let p=0;for(const y of r){if(y[0]<p||y[1]<y[0]||c<y[1])return!1;p=y[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const p=c.spriteData,y=p&&p.width||c.data.width,A=p&&p.height||c.data.height;return!(r[0]<0||y<r[0]||r[1]<0||A<r[1]||r[2]<0||y<r[2]||r[3]<0||A<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,p=!0){const y=this.getImage(r);if(p&&(y.data.width!==c.data.width||y.data.height!==c.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=y.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((c,p)=>{let y=!0;if(!this.isLoaded())for(const A of r)this.images[A]||(y=!1);this.isLoaded()||y?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})})}_getImagesForIds(r){const c={};for(const p of r){let y=this.getImage(p);y||(this.fire(new o.l("styleimagemissing",{id:p})),y=this.getImage(p)),y?c[p]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:o.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],p=this.getImage(r);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const y={w:p.data.width+2,h:p.data.height+2,x:0,y:0},A=new o.I(y,p);this.patterns[r]={bin:y,position:A}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new K(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const A in this.patterns)r.push(this.patterns[A].bin);const{w:c,h:p}=o.p(r),y=this.atlasImage;y.resize({width:c||1,height:p||1});for(const A in this.patterns){const{bin:T}=this.patterns[A],L=T.x+1,N=T.y+1,$=this.getImage(A).data,J=$.width,it=$.height;o.R.copy($,y,{x:0,y:0},{x:L,y:N},{width:J,height:it}),o.R.copy($,y,{x:0,y:it-1},{x:L,y:N-1},{width:J,height:1}),o.R.copy($,y,{x:0,y:0},{x:L,y:N+it},{width:J,height:1}),o.R.copy($,y,{x:J-1,y:0},{x:L-1,y:N},{width:1,height:it}),o.R.copy($,y,{x:0,y:0},{x:L+J,y:N},{width:1,height:it})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||o.w(`Image with ID: "${c}" was not found`),Z(p)&&this.updateImage(c,p)}}}const pt=1e20;function rt(b,r,c,p,y,A,T,L,N){for(let $=r;$<r+p;$++)xt(b,c*A+$,A,y,T,L,N);for(let $=c;$<c+y;$++)xt(b,$*A+r,1,p,T,L,N)}function xt(b,r,c,p,y,A,T){A[0]=0,T[0]=-1e20,T[1]=pt,y[0]=b[r];for(let L=1,N=0,$=0;L<p;L++){y[L]=b[r+L*c];const J=L*L;do{const it=A[N];$=(y[L]-y[it]+J-it*it)/(L-it)/2}while($<=T[N]&&--N>-1);N++,A[N]=L,T[N]=$,T[N+1]=pt}for(let L=0,N=0;L<p;L++){for(;T[N+1]<L;)N++;const $=A[N],J=L-$;b[r+L*c]=y[$]+J*J}}class q{constructor(r,c){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return o._(this,void 0,void 0,function*(){const c=[];for(const A in r)for(const T of r[A])c.push(this._getAndCacheGlyphsPromise(A,T));const p=yield Promise.all(c),y={};for(const{stack:A,id:T,glyph:L}of p)y[A]||(y[A]={}),y[A][T]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics};return y})}_getAndCacheGlyphsPromise(r,c){return o._(this,void 0,void 0,function*(){let p=this.entries[r];p||(p=this.entries[r]={glyphs:{},requests:{},ranges:{}});let y=p.glyphs[c];if(y!==void 0)return{stack:r,id:c,glyph:y};if(y=this._tinySDF(p,r,c),y)return p.glyphs[c]=y,{stack:r,id:c,glyph:y};const A=Math.floor(c/256);if(256*A>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[A])return{stack:r,id:c,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[A]){const L=q.loadGlyphRange(r,A,this.url,this.requestManager);p.requests[A]=L}const T=yield p.requests[A];for(const L in T)this._doesCharSupportLocalGlyph(+L)||(p.glyphs[+L]=T[+L]);return p.ranges[A]=!0,{stack:r,id:c,glyph:T[c]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||o.u["CJK Unified Ideographs"](r)||o.u["Hangul Syllables"](r)||o.u.Hiragana(r)||o.u.Katakana(r)||o.u["CJK Symbols and Punctuation"](r)||o.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,c,p){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(p))return;let A=r.tinySDF;if(!A){let L="400";/bold/i.test(c)?L="900":/medium/i.test(c)?L="500":/light/i.test(c)&&(L="200"),A=r.tinySDF=new q.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:L})}const T=A.draw(String.fromCharCode(p));return{id:p,bitmap:new o.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}q.loadGlyphRange=function(b,r,c,p){return o._(this,void 0,void 0,function*(){const y=256*r,A=y+255,T=p.transformRequest(c.replace("{fontstack}",b).replace("{range}",`${y}-${A}`),"Glyphs"),L=yield o.n(T,new AbortController);if(!L||!L.data)throw new Error(`Could not load glyph range. range: ${r}, ${y}-${A}`);const N={};for(const $ of o.o(L.data))N[$.id]=$;return N})},q.TinySDF=class{constructor({fontSize:b=24,buffer:r=3,radius:c=8,cutoff:p=.25,fontFamily:y="sans-serif",fontWeight:A="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=p,this.radius=c;const L=this.size=b+4*r,N=this._createCanvas(L),$=this.ctx=N.getContext("2d",{willReadFrequently:!0});$.font=`${T} ${A} ${b}px ${y}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(b){const r=document.createElement("canvas");return r.width=r.height=b,r}draw(b){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:y,actualBoundingBoxRight:A}=this.ctx.measureText(b),T=Math.ceil(c),L=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(A-y))),N=Math.min(this.size-this.buffer,T+Math.ceil(p)),$=L+2*this.buffer,J=N+2*this.buffer,it=Math.max($*J,0),ot=new Uint8ClampedArray(it),ft={data:ot,width:$,height:J,glyphWidth:L,glyphHeight:N,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(L===0||N===0)return ft;const{ctx:bt,buffer:Ft,gridInner:Ot,gridOuter:jt}=this;bt.clearRect(Ft,Ft,L,N),bt.fillText(b,Ft,Ft+T);const Wt=bt.getImageData(Ft,Ft,L,N);jt.fill(pt,0,it),Ot.fill(0,0,it);for(let Jt=0;Jt<N;Jt++)for(let re=0;re<L;re++){const se=Wt.data[4*(Jt*L+re)+3]/255;if(se===0)continue;const fe=(Jt+Ft)*$+re+Ft;if(se===1)jt[fe]=0,Ot[fe]=pt;else{const le=.5-se;jt[fe]=le>0?le*le:0,Ot[fe]=le<0?le*le:0}}rt(jt,0,0,$,J,$,this.f,this.v,this.z),rt(Ot,Ft,Ft,L,N,$,this.f,this.v,this.z);for(let Jt=0;Jt<it;Jt++){const re=Math.sqrt(jt[Jt])-Math.sqrt(Ot[Jt]);ot[Jt]=Math.round(255-255*(re/this.radius+this.cutoff))}return ft}};class zt{constructor(){this.specification=o.v.light.position}possiblyEvaluate(r,c){return o.z(r.expression.evaluate(c))}interpolate(r,c,p){return{x:o.B.number(r.x,c.x,p),y:o.B.number(r.y,c.y,p),z:o.B.number(r.z,c.z,p)}}}let Rt;class Bt extends o.E{constructor(r){super(),Rt=Rt||new o.r({anchor:new o.D(o.v.light.anchor),position:new zt,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(Rt),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(o.t,r,c))for(const p in r){const y=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),y):this._transitionable.setValue(p,y)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,p){return(!p||p.validate!==!1)&&o.x(this,r.call(o.y,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const Xt=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class ge extends o.E{constructor(r){super(),this._transitionable=new o.T(Xt),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0))}setSky(r,c={}){if(!this._validate(o.F,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in r){const y=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),y):this._transitionable.setValue(p,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,p={}){return(p==null?void 0:p.validate)!==!1&&o.x(this,r.call(o.y,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class en{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const p=r.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(r,c)),this.dashEntry[p]}getDashRanges(r,c,p){const y=[];let A=r.length%2==1?-r[r.length-1]*p:0,T=r[0]*p,L=!0;y.push({left:A,right:T,isDash:L,zeroLength:r[0]===0});let N=r[0];for(let $=1;$<r.length;$++){L=!L;const J=r[$];A=N*p,N+=J,T=N*p,y.push({left:A,right:T,isDash:L,zeroLength:J===0})}return y}addRoundDash(r,c,p){const y=c/2;for(let A=-p;A<=p;A++){const T=this.width*(this.nextRow+p+A);let L=0,N=r[L];for(let $=0;$<this.width;$++){$/N.right>1&&(N=r[++L]);const J=Math.abs($-N.left),it=Math.abs($-N.right),ot=Math.min(J,it);let ft;const bt=A/p*(y+1);if(N.isDash){const Ft=y-Math.abs(bt);ft=Math.sqrt(ot*ot+Ft*Ft)}else ft=y-Math.sqrt(ot*ot+bt*bt);this.data[T+$]=Math.max(0,Math.min(255,ft+128))}}}addRegularDash(r){for(let L=r.length-1;L>=0;--L){const N=r[L],$=r[L+1];N.zeroLength?r.splice(L,1):$&&$.isDash===N.isDash&&($.left=N.left,r.splice(L,1))}const c=r[0],p=r[r.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const y=this.width*this.nextRow;let A=0,T=r[A];for(let L=0;L<this.width;L++){L/T.right>1&&(T=r[++A]);const N=Math.abs(L-T.left),$=Math.abs(L-T.right),J=Math.min(N,$);this.data[y+L]=Math.max(0,Math.min(255,(T.isDash?J:-J)+128))}}addDash(r,c){const p=c?7:0,y=2*p+1;if(this.nextRow+y>this.height)return o.w("LineAtlas out of space"),null;let A=0;for(let L=0;L<r.length;L++)A+=r[L];if(A!==0){const L=this.width/A,N=this.getDashRanges(r,this.width,L);c?this.addRoundDash(N,L,p):this.addRegularDash(N)}const T={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:A};return this.nextRow+=y,this.dirty=!0,T}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const te="maplibre_preloaded_worker_pool";class Gt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Gt.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[te]}numActive(){return Object.keys(this.active).length}}const Re=Math.floor(E.hardwareConcurrency/2);let Ge,Ce;function nn(){return Ge||(Ge=new Gt),Ge}Gt.workerCount=o.G(globalThis)?Math.max(Math.min(Re,3),1):1;class be{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const p=this.workerPool.acquire(c);for(let y=0;y<p.length;y++){const A=new o.H(p[y],c);A.name=`Worker ${y}`,this.actors.push(A)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const p=[];for(const y of this.actors)p.push(y.sendAsync({type:r,data:c}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const p of this.actors)p.registerMessageHandler(r,c)}}function Se(){return Ce||(Ce=new be(nn(),o.J),Ce.registerMessageHandler("GR",(b,r,c)=>o.m(r,c))),Ce}function xe(b,r){const c=o.K();return o.L(c,c,[1,1,0]),o.M(c,c,[.5*b.width,.5*b.height,1]),b.calculatePosMatrix?o.N(c,c,b.calculatePosMatrix(r.toUnwrapped())):c}function Be(b,r,c,p,y,A,T){var L;const N=function(ot,ft,bt){if(ot)for(const Ft of ot){const Ot=ft[Ft];if(Ot&&Ot.source===bt&&Ot.type==="fill-extrusion")return!0}else for(const Ft in ft){const Ot=ft[Ft];if(Ot.source===bt&&Ot.type==="fill-extrusion")return!0}return!1}((L=y==null?void 0:y.layers)!==null&&L!==void 0?L:null,r,b.id),$=A.maxPitchScaleFactor(),J=b.tilesIn(p,$,N);J.sort(tn);const it=[];for(const ot of J)it.push({wrappedTileID:ot.tileID.wrapped().key,queryResults:ot.tile.queryRenderedFeatures(r,c,b._state,ot.queryGeometry,ot.cameraQueryGeometry,ot.scale,y,A,$,xe(b.transform,ot.tileID),T?(ft,bt)=>T(ot.tileID,ft,bt):void 0)});return function(ot,ft){for(const bt in ot)for(const Ft of ot[bt])Ln(Ft,ft);return ot}(function(ot){const ft={},bt={};for(const Ft of ot){const Ot=Ft.queryResults,jt=Ft.wrappedTileID,Wt=bt[jt]=bt[jt]||{};for(const Jt in Ot){const re=Ot[Jt],se=Wt[Jt]=Wt[Jt]||{},fe=ft[Jt]=ft[Jt]||[];for(const le of re)se[le.featureIndex]||(se[le.featureIndex]=!0,fe.push(le))}}return ft}(it),b)}function tn(b,r){const c=b.tileID,p=r.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function Ln(b,r){const c=b.feature,p=r.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=p}function Tt(b,r,c){return o._(this,void 0,void 0,function*(){let p=b;if(b.url?p=(yield o.j(r.transformRequest(b.url,"Source"),c)).data:yield E.frameAsync(c),!p)return null;const y=o.O(o.e(p,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(y.vectorLayerIds=p.vector_layers.map(A=>A.id)),y})}class H{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof o.Q?new o.Q(r.lng,r.lat):o.Q.convert(r),this}setSouthWest(r){return this._sw=r instanceof o.Q?new o.Q(r.lng,r.lat):o.Q.convert(r),this}extend(r){const c=this._sw,p=this._ne;let y,A;if(r instanceof o.Q)y=r,A=r;else{if(!(r instanceof H))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(H.convert(r)):this.extend(o.Q.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(o.Q.convert(r)):this;if(y=r._sw,A=r._ne,!y||!A)return this}return c||p?(c.lng=Math.min(y.lng,c.lng),c.lat=Math.min(y.lat,c.lat),p.lng=Math.max(A.lng,p.lng),p.lat=Math.max(A.lat,p.lat)):(this._sw=new o.Q(y.lng,y.lat),this._ne=new o.Q(A.lng,A.lat)),this}getCenter(){return new o.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.Q(this.getWest(),this.getNorth())}getSouthEast(){return new o.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:p}=o.Q.convert(r);let y=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&y}static convert(r){return r instanceof H?r:r&&new H(r)}static fromLngLat(r,c=0){const p=360*c/40075017,y=p/Math.cos(Math.PI/180*r.lat);return new H(new o.Q(r.lng-y,r.lat-p),new o.Q(r.lng+y,r.lat+p))}adjustAntiMeridian(){const r=new o.Q(this._sw.lng,this._sw.lat),c=new o.Q(this._ne.lng,this._ne.lat);return new H(r,r.lng>c.lng?new o.Q(c.lng+360,c.lat):c)}}class Dt{constructor(r,c,p){this.bounds=H.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),p=Math.floor(o.U(this.bounds.getWest())*c),y=Math.floor(o.S(this.bounds.getNorth())*c),A=Math.ceil(o.U(this.bounds.getEast())*c),T=Math.ceil(o.S(this.bounds.getSouth())*c);return r.x>=p&&r.x<A&&r.y>=y&&r.y<T}}class Pt extends o.E{constructor(r,c,p,y){if(super(),this.id=r,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.O(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Tt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(o.e(this,r),r.bounds&&(this.tileBounds=new Dt(r.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new o.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(r){return o._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};p.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((A,T)=>{r.reloadPromise={resolve:A,reject:T}})}else r.actor=this.dispatcher.getActor(),y="LT";r.abortController=new AbortController;try{const A=yield r.actor.sendAsync({type:y,data:p},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,A)}catch(A){if(delete r.abortController,r.aborted)return;if(A&&A.status!==404)throw A;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const p=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(p.resolve).catch(p.reject)}}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class yt extends o.E{constructor(r,c,p,y){super(),this.id=r,this.dispatcher=p,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.O(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield Tt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new Dt(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(c){this._tileJSONRequest=null,this.fire(new o.k(c))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return o.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return o._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const p=yield G.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&r.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const y=this.map.painter.context,A=y.gl,T=p.data;r.texture=this.map.painter.getTileTexture(T.width),r.texture?r.texture.update(T,{useMipmap:!0}):(r.texture=new K(y,T,A.RGBA,{useMipmap:!0}),r.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(p){if(delete r.abortController,r.aborted)r.state="unloaded";else if(p)throw r.state="errored",p}})}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class vt extends yt{constructor(r,c,p,y){super(r,c,p,y),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return o._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const y=yield G.getImage(p,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(y&&y.data){const A=y.data;this.map._refreshExpiredTiles&&y.cacheControl&&y.expires&&r.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const T=o.b(A)&&o.V()?A:yield this.readImageNow(A),L={type:this.type,uid:r.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const N=yield r.actor.sendAsync({type:"LDT",data:L});r.dem=N,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(y){if(delete r.abortController,r.aborted)r.state="unloaded";else if(y)throw r.state="errored",y}})}readImageNow(r){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.W()){const c=r.width+2,p=r.height+2;try{return new o.R({width:c,height:p},yield o.X(r,-1,-1,c,p))}catch{}}return E.getImageData(r,1)})}_getNeighboringTiles(r){const c=r.canonical,p=Math.pow(2,c.z),y=(c.x-1+p)%p,A=c.x===0?r.wrap-1:r.wrap,T=(c.x+1+p)%p,L=c.x+1===p?r.wrap+1:r.wrap,N={};return N[new o.Y(r.overscaledZ,A,c.z,y,c.y).key]={backfilled:!1},N[new o.Y(r.overscaledZ,L,c.z,T,c.y).key]={backfilled:!1},c.y>0&&(N[new o.Y(r.overscaledZ,A,c.z,y,c.y-1).key]={backfilled:!1},N[new o.Y(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},N[new o.Y(r.overscaledZ,L,c.z,T,c.y-1).key]={backfilled:!1}),c.y+1<p&&(N[new o.Y(r.overscaledZ,A,c.z,y,c.y+1).key]={backfilled:!1},N[new o.Y(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},N[new o.Y(r.overscaledZ,L,c.z,T,c.y+1).key]={backfilled:!1}),N}unloadTile(r){return o._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Ut extends o.E{constructor(r,c,p,y){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(y),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.Z,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.Z,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(o.Z/this.tileSize)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return o._(this,void 0,void 0,function*(){const r=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(c=>c.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){const r=new H,c=yield this.getData();let p;switch(c.type){case"FeatureCollection":p=c.features.map(y=>this.getCoordinatesFromGeometry(y.geometry)).flat(1/0);break;case"Feature":p=this.getCoordinatesFromGeometry(c.geometry);break;default:p=this.getCoordinatesFromGeometry(c)}if(p.length==0)return r;for(let y=0;y<p.length-1;y+=2)r.extend([p[y],p[y+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:p}})}_updateWorkerData(r){return o._(this,void 0,void 0,function*(){const c=o.e({type:this.type},this.workerOptions);r?c.dataDiff=r:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(E.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.l("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));let y=null;p.resourceTiming&&p.resourceTiming[this.id]&&(y=p.resourceTiming[this.id].slice(0));const A={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&o.e(A,{resourceTiming:y}),this.fire(new o.l("data",Object.assign(Object.assign({},A),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},A),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(p))}})}loaded(){return this._pendingLoads===0}loadTile(r){return o._(this,void 0,void 0,function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const p={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const y=yield this.actor.sendAsync({type:c,data:p},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(y,this.map.painter,c==="RT")})}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class ne extends o.E{constructor(r,c,p,y){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}load(r){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield G.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new o.k(c))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(o.$.fromLngLat);var p;return this.tileID=function(y){let A=1/0,T=1/0,L=-1/0,N=-1/0;for(const ot of y)A=Math.min(A,ot.x),T=Math.min(T,ot.y),L=Math.max(L,ot.x),N=Math.max(N,ot.y);const $=Math.max(L-A,N-T),J=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),it=Math.pow(2,J);return new o.a1(J,Math.floor((A+L)/2*it),Math.floor((T+N)/2*it))}(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(y=>this.tileID.getTilePoint(y)._round()),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.texture||(this.texture=new K(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const y in this.tiles){const A=this.tiles[y];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,p=!0)}p&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){let c=1/0,p=1/0,y=-1/0,A=-1/0;for(const L of r)c=Math.min(c,L.x),p=Math.min(p,L.y),y=Math.max(y,L.x),A=Math.max(A,L.y);const T={};for(let L=0;L<=o.a0;L++){const N=Math.pow(2,L),$=Math.floor(c*N),J=Math.floor(p*N),it=Math.floor(y*N),ot=Math.floor(A*N);T[L]={minTileX:$,minTileY:J,maxTileX:it,maxTileY:ot}}return T}}class ue extends ne{constructor(r,c,p,y){super(r,c,p,y),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.a2(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.k(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new o.k(new o.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new K(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const y in this.tiles){const A=this.tiles[y];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,p=!0)}p&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ht extends ne{constructor(r,c,p,y){super(r,c,p,y),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(A=>!Array.isArray(A)||A.length!==2||A.some(T=>typeof T!="number"))||this.fire(new o.k(new o.a3(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a3(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.k(new o.a3(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a3(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a3(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,p=c.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new K(c,this.canvas,p.RGBA,{premultiply:!0});let y=!1;for(const A in this.tiles){const T=this.tiles[A];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Me={},je=b=>{switch(b){case"geojson":return Ut;case"image":return ne;case"raster":return yt;case"raster-dem":return vt;case"vector":return Pt;case"video":return ue;case"canvas":return Ht}return Me[b]},Le="RTLPluginLoaded";class Ke extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Se()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return o._(this,arguments,void 0,function*(c,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=E.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(Le))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let bn=null;function Cn(){return bn||(bn=new Ke),bn}class de{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=o.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(y,A){const T={};if(!A)return T;for(const L of y){const N=L.layerIds.map($=>A.getLayer($)).filter(Boolean);if(N.length!==0){L.layers=N,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map($=>N.filter(J=>J.id===$)[0]));for(const $ of N)T[$.id]=L}}return T}(r.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const A=this.buckets[y];if(A instanceof o.a6){if(this.hasSymbolBuckets=!0,!p)break;A.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const A=this.buckets[y];if(A instanceof o.a6&&A.hasRTLText){this.hasRTLText=!0,Cn().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const A=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(y).queryRadius(A))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const p in this.buckets){const y=this.buckets[p];y.uploadPending()&&y.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new K(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new K(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,p,y,A,T,L,N,$,J,it){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:A,scale:T,tileSize:this.tileSize,pixelPosMatrix:J,transform:N,params:L,queryPadding:this.queryPadding*$,getElevation:it},r,c,p):{}}querySourceFeatures(r,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const y=p.loadVTLayers(),A=c&&c.sourceLayer?c.sourceLayer:"",T=y._geojsonTileLayer||y[A];if(!T)return;const L=o.a7(c&&c.filter),{z:N,x:$,y:J}=this.tileID.canonical,it={z:N,x:$,y:J};for(let ot=0;ot<T.length;ot++){const ft=T.feature(ot);if(L.needGeometry){const Ot=o.a8(ft,!0);if(!L.filter(new o.C(this.tileID.overscaledZ),Ot,this.tileID.canonical))continue}else if(!L.filter(new o.C(this.tileID.overscaledZ),ft))continue;const bt=p.getId(ft,A),Ft=new o.a9(ft,N,$,J,bt);Ft.tile=it,r.push(Ft)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const p=o.aa(r.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const p=Date.now();let y=!1;if(this.expirationTime>p)y=!1;else if(c)if(this.expirationTime<c)y=!0;else{const A=this.expirationTime-c;A?this.expirationTime=p+Math.max(A,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!c.style.hasLayer(y))continue;const A=this.buckets[y],T=A.layers[0].sourceLayer||"_geojsonTileLayer",L=p[T],N=r[T];if(!L||!N||Object.keys(N).length===0)continue;A.update(N,L,this.imageAtlas&&this.imageAtlas.patternPositions||{});const $=c&&c.style&&c.style.getLayer(y);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(A)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<E.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=E.now()+r}setDependencies(r,c){const p={};for(const y of c)p[y]=!0;this.dependencies[r]=p}hasDependency(r,c){for(const p of r){const y=this.dependencies[p];if(y){for(const A of c)if(y[A])return!0}}return!1}}class ve{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,p){const y=r.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const A={value:c,timeout:void 0};if(p!==void 0&&(A.timeout=setTimeout(()=>{this.remove(r,A)},p)),this.data[y].push(A),this.order.push(y),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const p=r.wrapped().key,y=c===void 0?0:this.data[p].indexOf(c),A=this.data[p][y];return this.data[p].splice(y,1),A.timeout&&clearTimeout(A.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(A.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const p in this.data)for(const y of this.data[p])r(y.value)||c.push(y);for(const p of c)this.remove(p.value.tileID,p)}}class Te{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,p){const y=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][y]=this.stateChanges[r][y]||{},o.e(this.stateChanges[r][y],p),this.deletedStates[r]===null){this.deletedStates[r]={};for(const A in this.state[r])A!==y&&(this.deletedStates[r][A]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][y]===null){this.deletedStates[r][y]={};for(const A in this.state[r][y])p[A]||(this.deletedStates[r][y][A]=null)}else for(const A in p)this.deletedStates[r]&&this.deletedStates[r][y]&&this.deletedStates[r][y][A]===null&&delete this.deletedStates[r][y][A]}removeFeatureState(r,c,p){if(this.deletedStates[r]===null)return;const y=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},p&&c!==void 0)this.deletedStates[r][y]!==null&&(this.deletedStates[r][y]=this.deletedStates[r][y]||{},this.deletedStates[r][y][p]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][y])for(p in this.deletedStates[r][y]={},this.stateChanges[r][y])this.deletedStates[r][y][p]=null;else this.deletedStates[r][y]=null;else this.deletedStates[r]=null}getState(r,c){const p=String(c),y=o.e({},(this.state[r]||{})[p],(this.stateChanges[r]||{})[p]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const A=this.deletedStates[r][c];if(A===null)return{};for(const T in A)delete y[T]}return y}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const p={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const A={};for(const T in this.stateChanges[y])this.state[y][T]||(this.state[y][T]={}),o.e(this.state[y][T],this.stateChanges[y][T]),A[T]=this.state[y][T];p[y]=A}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const A={};if(this.deletedStates[y]===null)for(const T in this.state[y])A[T]={},this.state[y][T]={};else for(const T in this.deletedStates[y]){if(this.deletedStates[y][T]===null)this.state[y][T]={};else for(const L of Object.keys(this.deletedStates[y][T]))delete this.state[y][T][L];A[T]=this.state[y][T]}p[y]=p[y]||{},o.e(p[y],A)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const y in r)r[y].setFeatureState(p,c)}}const Ye=89.25;function un(b,r){const c=o.ae(r.lat,-85.051129,o.af);return new o.P(o.U(r.lng)*b,o.S(c)*b)}function Nn(b,r){return new o.$(r.x/b,r.y/b).toLngLat()}function ae(b){return b.cameraToCenterDistance*Math.min(.85*Math.tan(o.ab(90-b.pitch)),Math.tan(o.ab(Ye-b.pitch)))}function ht(b,r){const c=b.canonical,p=r/o.ac(c.z),y=c.x+Math.pow(2,c.z)*b.wrap,A=o.ad(new Float64Array(16));return o.L(A,A,[y*p,c.y*p,0]),o.M(A,A,[p/o.Z,p/o.Z,1]),A}function gt(b,r,c,p,y){const A=o.$.fromLngLat(b,r),T=y*o.ag(1,b.lat),L=T*Math.cos(o.ab(c)),N=Math.sqrt(T*T-L*L),$=N*Math.sin(o.ab(-p)),J=N*Math.cos(o.ab(-p));return new o.$(A.x+$,A.y+J,A.z+L)}function Ct(b,r,c){const p=r.intersectsFrustum(b);if(!c)return p;const y=r.intersectsPlane(c);return p===0||y===0?0:p===2&&y===2?2:1}function kt(b,r,c){let p=0;const y=(c-r)/10;for(let A=0;A<10;A++)p+=y*Math.pow(Math.cos(r+(A+.5)/10*(c-r)),b);return p}function _t(b,r){return function(c,p,y,A,T){const L=2*((b-1)/o.ah(Math.cos(o.ab(Ye-T))/Math.cos(o.ab(Ye)))-1),N=Math.acos(y/A),$=2*kt(L-1,0,o.ab(T/2)),J=Math.min(o.ab(Ye),N+o.ab(T/2)),it=kt(L-1,Math.min(J,N-o.ab(T/2)),J),ot=Math.atan(p/y),ft=Math.hypot(p,y);let bt=c;return bt+=o.ah(A/ft/Math.max(.5,Math.cos(o.ab(T/2)))),bt+=L*o.ah(Math.cos(ot))/2,bt-=o.ah(Math.max(1,it/$/r))/2,bt}}const oe=_t(9.314,3);function he(b,r){const c=(r.roundZoom?Math.round:Math.floor)(b.zoom+o.ah(b.tileSize/r.tileSize));return Math.max(0,c)}function Kt(b,r){const c=b.getCameraFrustum(),p=b.getClippingPlane(),y=b.screenPointToMercatorCoordinate(b.getCameraPoint()),A=o.$.fromLngLat(b.center,b.elevation);y.z=A.z+Math.cos(b.pitchInRadians)*b.cameraToCenterDistance/b.worldSize;const T=b.getCoveringTilesDetailsProvider(),L=T.allowVariableZoom(b,r),N=he(b,r),$=r.minzoom||0,J=r.maxzoom!==void 0?r.maxzoom:b.maxZoom,it=Math.min(Math.max(0,N),J),ot=Math.pow(2,it),ft=[ot*y.x,ot*y.y,0],bt=[ot*A.x,ot*A.y,0],Ft=Math.hypot(A.x-y.x,A.y-y.y),Ot=Math.abs(A.z-y.z),jt=Math.hypot(Ft,Ot),Wt=se=>({zoom:0,x:0,y:0,wrap:se,fullyVisible:!1}),Jt=[],re=[];if(b.renderWorldCopies&&T.allowWorldCopies())for(let se=1;se<=3;se++)Jt.push(Wt(-se)),Jt.push(Wt(se));for(Jt.push(Wt(0));Jt.length>0;){const se=Jt.pop(),fe=se.x,le=se.y;let ke=se.fullyVisible;const De={x:fe,y:le,z:se.zoom},Ee=T.getTileAABB(De,se.wrap,b.elevation,r);if(!ke){const yn=Ct(c,Ee,p);if(yn===0)continue;ke=yn===2}const Qe=T.distanceToTile2d(y.x,y.y,De,Ee);let $e=N;L&&($e=(r.calculateTileZoom||oe)(b.zoom+o.ah(b.tileSize/r.tileSize),Qe,Ot,jt,b.fov)),$e=(r.roundZoom?Math.round:Math.floor)($e),$e=Math.max(0,$e);const In=Math.min($e,J);if(se.wrap=T.getWrap(A,De,se.wrap),se.zoom>=In){if(se.zoom<$)continue;const yn=it-se.zoom,an=ft[0]-.5-(fe<<yn),qn=ft[1]-.5-(le<<yn),fr=r.reparseOverscaled?Math.max(se.zoom,$e):se.zoom;re.push({tileID:new o.Y(se.zoom===J?fr:se.zoom,se.wrap,se.zoom,fe,le),distanceSq:o.ai([bt[0]-.5-fe,bt[1]-.5-le]),tileDistanceToCamera:Math.sqrt(an*an+qn*qn)})}else for(let yn=0;yn<4;yn++)Jt.push({zoom:se.zoom+1,x:(fe<<1)+yn%2,y:(le<<1)+(yn>>1),wrap:se.wrap,fullyVisible:ke})}return re.sort((se,fe)=>se.distanceSq-fe.distanceSq).map(se=>se.tileID)}class Fe extends o.E{constructor(r,c,p){super(),this.id=r,this.dispatcher=p,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,A,T,L)=>{const N=new(je(A.type))(y,A,T,L);if(N.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${N.id}`);return N})(r,c,p,this),this._tiles={},this._cache=new ve(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Te,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,p){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,p)}catch(y){r.state="errored",y.status!==404?this._source.fire(new o.k(y,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new o.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const p=this._tiles[c];p.upload(r),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Ve).map(r=>r.key)}getRenderableIds(r){const c=[];for(const p in this._tiles)this._isIdRenderable(p,r)&&c.push(this._tiles[p]);return r?c.sort((p,y)=>{const A=p.tileID,T=y.tileID,L=new o.P(A.canonical.x,A.canonical.y)._rotate(-this.transform.bearingInRadians),N=new o.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians);return A.overscaledZ-T.overscaledZ||N.y-L.y||N.x-L.x}).map(p=>p.tileID.key):c.map(p=>p.tileID).sort(Ve).map(p=>p.key)}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(r||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(r,c){return o._(this,void 0,void 0,function*(){const p=this._tiles[r];p&&(p.state!=="loading"&&(p.state=c),yield this._loadTile(p,r,c))})}_tileLoaded(r,c,p){r.timeAdded=E.now(),p==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let y=0;y<c.length;y++){const A=c[y];if(r.neighboringTiles&&r.neighboringTiles[A]){const T=this.getTileByID(A);p(r,T),p(T,r)}}function p(y,A){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let T=A.tileID.canonical.x-y.tileID.canonical.x;const L=A.tileID.canonical.y-y.tileID.canonical.y,N=Math.pow(2,y.tileID.canonical.z),$=A.tileID.key;T===0&&L===0||Math.abs(L)>1||(Math.abs(T)>1&&(Math.abs(T+N)===1?T+=N:Math.abs(T-N)===1&&(T-=N)),A.dem&&y.dem&&(y.dem.backfillBorder(A.dem,T,L),y.neighboringTiles&&y.neighboringTiles[$]&&(y.neighboringTiles[$].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c,p,y){for(const A in this._tiles){let T=this._tiles[A];if(y[A]||!T.hasData()||T.tileID.overscaledZ<=c||T.tileID.overscaledZ>p)continue;let L=T.tileID;for(;T&&T.tileID.overscaledZ>c+1;){const $=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[$.key],T&&T.hasData()&&(L=$)}let N=L;for(;N.overscaledZ>c;)if(N=N.scaledTo(N.overscaledZ-1),r[N.key]||r[N.canonical.key]){y[L.key]=L;break}}}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const p=this._loadedParentTiles[r.key];return p&&p.tileID.overscaledZ>=c?p:null}for(let p=r.overscaledZ-1;p>=c;p--){const y=r.scaledTo(p),A=this._getLoadedTile(y);if(A)return A}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,p=Math.ceil(r.height/this._source.tileSize)+1,y=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),A=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(A)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const p={};for(const y in this._tiles){const A=this._tiles[y];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+c),p[A.tileID.key]=A}this._tiles=p;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(r,c,p,y,A,T){const L={},N={},$=Object.keys(r),J=E.now();for(const it of $){const ot=r[it],ft=this._tiles[it];if(!ft||ft.fadeEndTime!==0&&ft.fadeEndTime<=J)continue;const bt=this.findLoadedParent(ot,c),Ft=this.findLoadedSibling(ot),Ot=bt||Ft||null;Ot&&(this._addTile(Ot.tileID),L[Ot.tileID.key]=Ot.tileID),N[it]=ot}this._retainLoadedChildren(N,y,p,r);for(const it in L)r[it]||(this._coveredTiles[it]=!0,r[it]=L[it]);if(T){const it={},ot={};for(const ft of A)this._tiles[ft.key].hasData()?it[ft.key]=ft:ot[ft.key]=ft;for(const ft in ot){const bt=ot[ft].children(this._source.maxzoom);this._tiles[bt[0].key]&&this._tiles[bt[1].key]&&this._tiles[bt[2].key]&&this._tiles[bt[3].key]&&(it[bt[0].key]=r[bt[0].key]=bt[0],it[bt[1].key]=r[bt[1].key]=bt[1],it[bt[2].key]=r[bt[2].key]=bt[2],it[bt[3].key]=r[bt[3].key]=bt[3],delete ot[ft])}for(const ft in ot){const bt=ot[ft],Ft=this.findLoadedParent(bt,this._source.minzoom),Ot=this.findLoadedSibling(bt),jt=Ft||Ot||null;if(jt){it[jt.tileID.key]=r[jt.tileID.key]=jt.tileID;for(const Wt in it)it[Wt].isChildOf(jt.tileID)&&delete it[Wt]}}for(const ft in this._tiles)it[ft]||(this._coveredTiles[ft]=!0)}}update(r,c){if(!this._sourceLoaded||this._paused)return;let p;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(J=>new o.Y(J.canonical.z,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y)):(p=Kt(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter(J=>this._source.hasTile(J)))):p=[];const y=he(r,this._source),A=Math.max(y-Fe.maxOverzooming,this._source.minzoom),T=Math.max(y+Fe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const J={};for(const it of p)if(it.canonical.z>this._source.minzoom){const ot=it.scaledTo(it.canonical.z-1);J[ot.key]=ot;const ft=it.scaledTo(Math.max(this._source.minzoom,Math.min(it.canonical.z,5)));J[ft.key]=ft}p=p.concat(Object.values(J))}const L=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,L&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const N=this._updateRetainedTiles(p,y);we(this._source.type)&&this._updateCoveredAndRetainedTiles(N,A,T,y,p,c);for(const J in N)this._tiles[J].clearFadeHold();const $=o.aj(this._tiles,N);for(const J of $){const it=this._tiles[J];it.hasSymbolBuckets&&!it.holdingForFade()?it.setHoldDuration(this.map._fadeDuration):it.hasSymbolBuckets&&!it.symbolFadeFinished()||this._removeTile(J)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var p;const y={},A={},T=Math.max(c-Fe.maxOverzooming,this._source.minzoom),L=Math.max(c+Fe.maxUnderzooming,this._source.minzoom),N={};for(const $ of r){const J=this._addTile($);y[$.key]=$,J.hasData()||c<this._source.maxzoom&&(N[$.key]=$)}this._retainLoadedChildren(N,c,L,y);for(const $ of r){let J=this._tiles[$.key];if(J.hasData())continue;if(c+1>this._source.maxzoom){const ot=$.children(this._source.maxzoom)[0],ft=this.getTile(ot);if(ft&&ft.hasData()){y[ot.key]=ot;continue}}else{const ot=$.children(this._source.maxzoom);if(y[ot[0].key]&&y[ot[1].key]&&y[ot[2].key]&&y[ot[3].key])continue}let it=J.wasRequested();for(let ot=$.overscaledZ-1;ot>=T;--ot){const ft=$.scaledTo(ot);if(A[ft.key])break;if(A[ft.key]=!0,J=this.getTile(ft),!J&&it&&(J=this._addTile(ft)),J){const bt=J.hasData();if((bt||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||it)&&(y[ft.key]=ft),it=J.wasRequested(),bt)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let p,y=this._tiles[r].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){p=this._loadedParentTiles[y.key];break}c.push(y.key);const A=y.scaledTo(y.overscaledZ-1);if(p=this._getLoadedTile(A),p)break;y=A}for(const A of c)this._loadedParentTiles[A]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const c=this._tiles[r].tileID,p=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=p}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const p=c;return c||(c=new de(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._tiles[r.key]=c,p||this._source.fire(new o.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const p=c.getExpiryTimeout();p&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},p))}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){const c=r.sourceDataType;r.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&c==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,p){const y=[],A=this.transform;if(!A)return y;const T=p?A.getCameraQueryGeometry(r):r,L=r.map(bt=>A.screenPointToMercatorCoordinate(bt,this.terrain)),N=T.map(bt=>A.screenPointToMercatorCoordinate(bt,this.terrain)),$=this.getIds();let J=1/0,it=1/0,ot=-1/0,ft=-1/0;for(const bt of N)J=Math.min(J,bt.x),it=Math.min(it,bt.y),ot=Math.max(ot,bt.x),ft=Math.max(ft,bt.y);for(let bt=0;bt<$.length;bt++){const Ft=this._tiles[$[bt]];if(Ft.holdingForFade())continue;const Ot=A.getCoveringTilesDetailsProvider().allowWorldCopies()?Ft.tileID:Ft.tileID.unwrapTo(0),jt=Math.pow(2,A.zoom-Ft.tileID.overscaledZ),Wt=c*Ft.queryPadding*o.Z/Ft.tileSize/jt,Jt=[Ot.getTilePoint(new o.$(J,it)),Ot.getTilePoint(new o.$(ot,ft))];if(Jt[0].x-Wt<o.Z&&Jt[0].y-Wt<o.Z&&Jt[1].x+Wt>=0&&Jt[1].y+Wt>=0){const re=L.map(fe=>Ot.getTilePoint(fe)),se=N.map(fe=>Ot.getTilePoint(fe));y.push({tile:Ft,tileID:Ot,queryGeometry:re,cameraQueryGeometry:se,scale:jt})}}return y}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map(p=>this._tiles[p].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(we(this._source.type)){const r=E.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,p){this._state.updateState(r=r||"_geojsonTileLayer",c,p)}removeFeatureState(r,c,p){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,p)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,p){const y=this._tiles[r];y&&y.setDependencies(c,p)}reloadTilesForDependencies(r,c){for(const p in this._tiles)this._tiles[p].hasDependency(r,c)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(r,c))}}function Ve(b,r){const c=Math.abs(2*b.wrap)-+(b.wrap<0),p=Math.abs(2*r.wrap)-+(r.wrap<0);return b.overscaledZ-r.overscaledZ||p-c||r.canonical.y-b.canonical.y||r.canonical.x-b.canonical.x}function we(b){return b==="raster"||b==="image"||b==="video"}Fe.maxOverzooming=10,Fe.maxUnderzooming=3;class rn{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=o.ae(r,0,1);let c=1,p=this._distances[c];const y=r*this.paddedLength+this.padding;for(;p<y&&c<this._distances.length;)p=this._distances[++c];const A=c-1,T=this._distances[A],L=p-T,N=L>0?(y-T)/L:0;return this.points[A].mult(1-N).add(this.points[c].mult(N))}}function Sn(b,r){let c=!0;return b==="always"||b!=="never"&&r!=="never"||(c=!1),c}class En{constructor(r,c,p){const y=this.boxCells=[],A=this.circleCells=[];this.xCellCount=Math.ceil(r/p),this.yCellCount=Math.ceil(c/p);for(let T=0;T<this.xCellCount*this.yCellCount;T++)y.push([]),A.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,p,y,A){this._forEachCell(c,p,y,A,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(A)}insertCircle(r,c,p,y){this._forEachCell(c-y,p-y,c+y,p+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(p),this.circles.push(y)}_insertBoxCell(r,c,p,y,A,T){this.boxCells[A].push(T)}_insertCircleCell(r,c,p,y,A,T){this.circleCells[A].push(T)}_query(r,c,p,y,A,T,L){if(p<0||r>this.width||y<0||c>this.height)return[];const N=[];if(r<=0&&c<=0&&this.width<=p&&this.height<=y){if(A)return[{key:null,x1:r,y1:c,x2:p,y2:y}];for(let $=0;$<this.boxKeys.length;$++)N.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const J=this.circles[3*$],it=this.circles[3*$+1],ot=this.circles[3*$+2];N.push({key:this.circleKeys[$],x1:J-ot,y1:it-ot,x2:J+ot,y2:it+ot})}}else this._forEachCell(r,c,p,y,this._queryCell,N,{hitTest:A,overlapMode:T,seenUids:{box:{},circle:{}}},L);return N}query(r,c,p,y){return this._query(r,c,p,y,!1,null)}hitTest(r,c,p,y,A,T){return this._query(r,c,p,y,!0,A,T).length>0}hitTestCircle(r,c,p,y,A){const T=r-p,L=r+p,N=c-p,$=c+p;if(L<0||T>this.width||$<0||N>this.height)return!1;const J=[];return this._forEachCell(T,N,L,$,this._queryCellCircle,J,{hitTest:!0,overlapMode:y,circle:{x:r,y:c,radius:p},seenUids:{box:{},circle:{}}},A),J.length>0}_queryCell(r,c,p,y,A,T,L,N){const{seenUids:$,hitTest:J,overlapMode:it}=L,ot=this.boxCells[A];if(ot!==null){const bt=this.bboxes;for(const Ft of ot)if(!$.box[Ft]){$.box[Ft]=!0;const Ot=4*Ft,jt=this.boxKeys[Ft];if(r<=bt[Ot+2]&&c<=bt[Ot+3]&&p>=bt[Ot+0]&&y>=bt[Ot+1]&&(!N||N(jt))&&(!J||!Sn(it,jt.overlapMode))&&(T.push({key:jt,x1:bt[Ot],y1:bt[Ot+1],x2:bt[Ot+2],y2:bt[Ot+3]}),J))return!0}}const ft=this.circleCells[A];if(ft!==null){const bt=this.circles;for(const Ft of ft)if(!$.circle[Ft]){$.circle[Ft]=!0;const Ot=3*Ft,jt=this.circleKeys[Ft];if(this._circleAndRectCollide(bt[Ot],bt[Ot+1],bt[Ot+2],r,c,p,y)&&(!N||N(jt))&&(!J||!Sn(it,jt.overlapMode))){const Wt=bt[Ot],Jt=bt[Ot+1],re=bt[Ot+2];if(T.push({key:jt,x1:Wt-re,y1:Jt-re,x2:Wt+re,y2:Jt+re}),J)return!0}}}return!1}_queryCellCircle(r,c,p,y,A,T,L,N){const{circle:$,seenUids:J,overlapMode:it}=L,ot=this.boxCells[A];if(ot!==null){const bt=this.bboxes;for(const Ft of ot)if(!J.box[Ft]){J.box[Ft]=!0;const Ot=4*Ft,jt=this.boxKeys[Ft];if(this._circleAndRectCollide($.x,$.y,$.radius,bt[Ot+0],bt[Ot+1],bt[Ot+2],bt[Ot+3])&&(!N||N(jt))&&!Sn(it,jt.overlapMode))return T.push(!0),!0}}const ft=this.circleCells[A];if(ft!==null){const bt=this.circles;for(const Ft of ft)if(!J.circle[Ft]){J.circle[Ft]=!0;const Ot=3*Ft,jt=this.circleKeys[Ft];if(this._circlesCollide(bt[Ot],bt[Ot+1],bt[Ot+2],$.x,$.y,$.radius)&&(!N||N(jt))&&!Sn(it,jt.overlapMode))return T.push(!0),!0}}}_forEachCell(r,c,p,y,A,T,L,N){const $=this._convertToXCellCoord(r),J=this._convertToYCellCoord(c),it=this._convertToXCellCoord(p),ot=this._convertToYCellCoord(y);for(let ft=$;ft<=it;ft++)for(let bt=J;bt<=ot;bt++)if(A.call(this,r,c,p,y,this.xCellCount*bt+ft,T,L,N))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,p,y,A,T){const L=y-r,N=A-c,$=p+T;return $*$>L*L+N*N}_circleAndRectCollide(r,c,p,y,A,T,L){const N=(T-y)/2,$=Math.abs(r-(y+N));if($>N+p)return!1;const J=(L-A)/2,it=Math.abs(c-(A+J));if(it>J+p)return!1;if($<=N||it<=J)return!0;const ot=$-N,ft=it-J;return ot*ot+ft*ft<=p*p}}function ir(b,r,c){const p=o.K();if(!b){const{vecSouth:it,vecEast:ot}=Ue(r),ft=_();ft[0]=ot[0],ft[1]=ot[1],ft[2]=it[0],ft[3]=it[1],y=ft,(J=(T=(A=ft)[0])*($=A[3])-(N=A[2])*(L=A[1]))&&(y[0]=$*(J=1/J),y[1]=-L*J,y[2]=-N*J,y[3]=T*J),p[0]=ft[0],p[1]=ft[1],p[4]=ft[2],p[5]=ft[3]}var y,A,T,L,N,$,J;return o.M(p,p,[1/c,1/c,1]),p}function gr(b,r,c,p){if(b){const y=o.K();if(!r){const{vecSouth:A,vecEast:T}=Ue(c);y[0]=T[0],y[1]=T[1],y[4]=A[0],y[5]=A[1]}return o.M(y,y,[p,p,1]),y}return c.pixelsToClipSpaceMatrix}function Ue(b){const r=Math.cos(b.rollInRadians),c=Math.sin(b.rollInRadians),p=Math.cos(b.pitchInRadians),y=Math.cos(b.bearingInRadians),A=Math.sin(b.bearingInRadians),T=o.ao();T[0]=-y*p*c-A*r,T[1]=-A*p*c+y*r;const L=o.ap(T);L<1e-9?o.aq(T):o.ar(T,T,1/L);const N=o.ao();N[0]=y*p*r-A*c,N[1]=A*p*r+y*c;const $=o.ap(N);return $<1e-9?o.aq(N):o.ar(N,N,1/$),{vecEast:N,vecSouth:T}}function $n(b,r,c,p){let y;p?(y=[b,r,p(b,r),1],o.at(y,y,c)):(y=[b,r,0,1],mi(y,y,c));const A=y[3];return{point:new o.P(y[0]/A,y[1]/A),signedDistanceFromCamera:A,isOccluded:!1}}function Fr(b,r){return .5+b/r*.5}function Yr(b,r){return b.x>=-r[0]&&b.x<=r[0]&&b.y>=-r[1]&&b.y<=r[1]}function Pr(b,r,c,p,y,A,T,L,N,$,J,it,ot){const ft=c?b.textSizeData:b.iconSizeData,bt=o.ak(ft,r.transform.zoom),Ft=[256/r.width*2+1,256/r.height*2+1],Ot=c?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;Ot.clear();const jt=b.lineVertexArray,Wt=c?b.text.placedSymbolArray:b.icon.placedSymbolArray,Jt=r.transform.width/r.transform.height;let re=!1;for(let se=0;se<Wt.length;se++){const fe=Wt.get(se);if(fe.hidden||fe.writingMode===o.al.vertical&&!re){Ri(fe.numGlyphs,Ot);continue}re=!1;const le=new o.P(fe.anchorX,fe.anchorY),ke={getElevation:ot,pitchedLabelPlaneMatrix:p,lineVertexArray:jt,pitchWithMap:A,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:le,unwrappedTileID:N,width:$,height:J,translation:it},De=tu(fe.anchorX,fe.anchorY,ke);if(!Yr(De.point,Ft)){Ri(fe.numGlyphs,Ot);continue}const Ee=Fr(r.transform.cameraToCenterDistance,De.signedDistanceFromCamera),Qe=o.am(ft,bt,fe),$e=A?Qe*r.transform.getPitchedTextCorrection(fe.anchorX,fe.anchorY,N)/Ee:Qe*Ee,In=Jn({projectionContext:ke,pitchedLabelPlaneMatrixInverse:y,symbol:fe,fontSize:$e,flip:!1,keepUpright:T,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:Ot,aspectRatio:Jt,rotateToLine:L});re=In.useVertical,(In.notEnoughRoom||re||In.needsFlipping&&Jn({projectionContext:ke,pitchedLabelPlaneMatrixInverse:y,symbol:fe,fontSize:$e,flip:!0,keepUpright:T,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:Ot,aspectRatio:Jt,rotateToLine:L}).notEnoughRoom)&&Ri(fe.numGlyphs,Ot)}c?b.text.dynamicLayoutVertexBuffer.updateData(Ot):b.icon.dynamicLayoutVertexBuffer.updateData(Ot)}function Ze(b,r,c,p,y,A,T,L){const N=A.glyphStartIndex+A.numGlyphs,$=A.lineStartIndex,J=A.lineStartIndex+A.lineLength,it=r.getoffsetX(A.glyphStartIndex),ot=r.getoffsetX(N-1),ft=Ms(b*it,c,p,y,A.segment,$,J,L,T);if(!ft)return null;const bt=Ms(b*ot,c,p,y,A.segment,$,J,L,T);return bt?L.projectionCache.anyProjectionOccluded?null:{first:ft,last:bt}:null}function zn(b,r,c,p){return b===o.al.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*p?{useVertical:!0}:(b===o.al.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function Jn(b){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:c,symbol:p,fontSize:y,flip:A,keepUpright:T,glyphOffsetArray:L,dynamicLayoutVertexArray:N,aspectRatio:$,rotateToLine:J}=b,it=y/24,ot=p.lineOffsetX*it,ft=p.lineOffsetY*it;let bt;if(p.numGlyphs>1){const Ft=p.glyphStartIndex+p.numGlyphs,Ot=p.lineStartIndex,jt=p.lineStartIndex+p.lineLength,Wt=Ze(it,L,ot,ft,A,p,J,r);if(!Wt)return{notEnoughRoom:!0};const Jt=Xn(Wt.first.point.x,Wt.first.point.y,r,c),re=Xn(Wt.last.point.x,Wt.last.point.y,r,c);if(T&&!A){const se=zn(p.writingMode,Jt,re,$);if(se)return se}bt=[Wt.first];for(let se=p.glyphStartIndex+1;se<Ft-1;se++)bt.push(Ms(it*L.getoffsetX(se),ot,ft,A,p.segment,Ot,jt,r,J));bt.push(Wt.last)}else{if(T&&!A){const Ot=pi(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,jt=p.lineStartIndex+p.segment+1,Wt=new o.P(r.lineVertexArray.getx(jt),r.lineVertexArray.gety(jt)),Jt=pi(Wt.x,Wt.y,r),re=Jt.signedDistanceFromCamera>0?Jt.point:eo(r.tileAnchorPoint,Wt,Ot,1,r),se=Xn(Ot.x,Ot.y,r,c),fe=Xn(re.x,re.y,r,c),le=zn(p.writingMode,se,fe,$);if(le)return le}const Ft=Ms(it*L.getoffsetX(p.glyphStartIndex),ot,ft,A,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,r,J);if(!Ft||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};bt=[Ft]}for(const Ft of bt)o.as(N,Ft.point,Ft.angle);return{}}function eo(b,r,c,p,y){const A=b.add(b.sub(r)._unit()),T=pi(A.x,A.y,y).point,L=c.sub(T);return c.add(L._mult(p/L.mag()))}function Po(b,r,c){const p=r.projectionCache;if(p.projections[b])return p.projections[b];const y=new o.P(r.lineVertexArray.getx(b),r.lineVertexArray.gety(b)),A=pi(y.x,y.y,r);if(A.signedDistanceFromCamera>0)return p.projections[b]=A.point,p.anyProjectionOccluded=p.anyProjectionOccluded||A.isOccluded,A.point;const T=b-c.direction;return eo(c.distanceFromAnchor===0?r.tileAnchorPoint:new o.P(r.lineVertexArray.getx(T),r.lineVertexArray.gety(T)),y,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function pi(b,r,c){const p=b+c.translation[0],y=r+c.translation[1];let A;return c.pitchWithMap?(A=$n(p,y,c.pitchedLabelPlaneMatrix,c.getElevation),A.isOccluded=!1):(A=c.transform.projectTileCoordinates(p,y,c.unwrappedTileID,c.getElevation),A.point.x=(.5*A.point.x+.5)*c.width,A.point.y=(.5*-A.point.y+.5)*c.height),A}function Xn(b,r,c,p){if(c.pitchWithMap){const y=[b,r,0,1];return o.at(y,y,p),c.transform.projectTileCoordinates(y[0]/y[3],y[1]/y[3],c.unwrappedTileID,c.getElevation).point}return{x:b/c.width*2-1,y:r/c.height*2-1}}function tu(b,r,c){return c.transform.projectTileCoordinates(b,r,c.unwrappedTileID,c.getElevation)}function Pl(b,r,c){return b._unit()._perp()._mult(r*c)}function Uu(b,r,c,p,y,A,T,L,N){if(L.projectionCache.offsets[b])return L.projectionCache.offsets[b];const $=c.add(r);if(b+N.direction<p||b+N.direction>=y)return L.projectionCache.offsets[b]=$,$;const J=Po(b+N.direction,L,N),it=Pl(J.sub(c),T,N.direction),ot=c.add(it),ft=J.add(it);return L.projectionCache.offsets[b]=o.au(A,$,ot,ft)||$,L.projectionCache.offsets[b]}function Ms(b,r,c,p,y,A,T,L,N){const $=p?b-r:b+r;let J=$>0?1:-1,it=0;p&&(J*=-1,it=Math.PI),J<0&&(it+=Math.PI);let ot,ft=J>0?A+y:A+y+1;L.projectionCache.cachedAnchorPoint?ot=L.projectionCache.cachedAnchorPoint:(ot=pi(L.tileAnchorPoint.x,L.tileAnchorPoint.y,L).point,L.projectionCache.cachedAnchorPoint=ot);let bt,Ft,Ot=ot,jt=ot,Wt=0,Jt=0;const re=Math.abs($),se=[];let fe;for(;Wt+Jt<=re;){if(ft+=J,ft<A||ft>=T)return null;Wt+=Jt,jt=Ot,Ft=bt;const De={absOffsetX:re,direction:J,distanceFromAnchor:Wt,previousVertex:jt};if(Ot=Po(ft,L,De),c===0)se.push(jt),fe=Ot.sub(jt);else{let Ee;const Qe=Ot.sub(jt);Ee=Qe.mag()===0?Pl(Po(ft+J,L,De).sub(Ot),c,J):Pl(Qe,c,J),Ft||(Ft=jt.add(Ee)),bt=Uu(ft,Ee,Ot,A,T,Ft,c,L,De),se.push(Ft),fe=bt.sub(Ft)}Jt=fe.mag()}const le=fe._mult((re-Wt)/Jt)._add(Ft||jt),ke=it+Math.atan2(Ot.y-jt.y,Ot.x-jt.x);return se.push(le),{point:le,angle:N?ke:0,path:se}}const Hu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ri(b,r){for(let c=0;c<b;c++){const p=r.length;r.resize(p+4),r.float32.set(Hu,3*p)}}function mi(b,r,c){const p=r[0],y=r[1];return b[0]=c[0]*p+c[4]*y+c[12],b[1]=c[1]*p+c[5]*y+c[13],b[3]=c[3]*p+c[7]*y+c[15],b}const wi=100;class kl{constructor(r,c=new En(r.width+200,r.height+200,25),p=new En(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=p,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+wi,this.screenBottomBoundary=r.height+wi,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,p,y,A,T,L,N,$,J,it,ot){const ft=this.projectAndGetPerspectiveRatio(r.anchorPointX+N[0],r.anchorPointY+N[1],A,J,ot),bt=p*ft.perspectiveRatio;let Ft;if(T||L)Ft=this._projectCollisionBox(r,bt,y,A,T,L,N,ft,J,it,ot);else{const fe=ft.x+(it?it.x*bt:0),le=ft.y+(it?it.y*bt:0);Ft={allPointsOccluded:!1,box:[fe+r.x1*bt,le+r.y1*bt,fe+r.x2*bt,le+r.y2*bt]}}const[Ot,jt,Wt,Jt]=Ft.box,re=T?Ft.allPointsOccluded:ft.isOccluded;let se=re;return se||(se=ft.perspectiveRatio<this.perspectiveRatioCutoff),se||(se=!this.isInsideGrid(Ot,jt,Wt,Jt)),se||c!=="always"&&this.grid.hitTest(Ot,jt,Wt,Jt,c,$)?{box:[Ot,jt,Wt,Jt],placeable:!1,offscreen:!1,occluded:re}:{box:[Ot,jt,Wt,Jt],placeable:!0,offscreen:this.isOffscreen(Ot,jt,Wt,Jt),occluded:re}}placeCollisionCircles(r,c,p,y,A,T,L,N,$,J,it,ot,ft,bt){const Ft=[],Ot=new o.P(c.anchorX,c.anchorY),jt=this.getPerspectiveRatio(Ot.x,Ot.y,T,bt),Wt=($?A*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,T)/jt:A*jt)/o.ay,Jt={getElevation:bt,pitchedLabelPlaneMatrix:L,lineVertexArray:p,pitchWithMap:$,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Ot,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:ft},re=Ze(Wt,y,c.lineOffsetX*Wt,c.lineOffsetY*Wt,!1,c,!1,Jt);let se=!1,fe=!1,le=!0;if(re){const ke=.5*it*jt+ot,De=new o.P(-100,-100),Ee=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Qe=new rn,$e=re.first,In=re.last;let yn=[];for(let fr=$e.path.length-1;fr>=1;fr--)yn.push($e.path[fr]);for(let fr=1;fr<In.path.length;fr++)yn.push(In.path[fr]);const an=2.5*ke;if($){const fr=this.projectPathToScreenSpace(yn,Jt);yn=fr.some(pr=>pr.signedDistanceFromCamera<=0)?[]:fr.map(pr=>pr.point)}let qn=[];if(yn.length>0){const fr=yn[0].clone(),pr=yn[0].clone();for(let vi=1;vi<yn.length;vi++)fr.x=Math.min(fr.x,yn[vi].x),fr.y=Math.min(fr.y,yn[vi].y),pr.x=Math.max(pr.x,yn[vi].x),pr.y=Math.max(pr.y,yn[vi].y);qn=fr.x>=De.x&&pr.x<=Ee.x&&fr.y>=De.y&&pr.y<=Ee.y?[yn]:pr.x<De.x||fr.x>Ee.x||pr.y<De.y||fr.y>Ee.y?[]:o.av([yn],De.x,De.y,Ee.x,Ee.y)}for(const fr of qn){Qe.reset(fr,.25*ke);let pr=0;pr=Qe.length<=.5*ke?1:Math.ceil(Qe.paddedLength/an)+1;for(let vi=0;vi<pr;vi++){const ti=vi/Math.max(pr-1,1),Ci=Qe.lerp(ti),Ai=Ci.x+wi,Sr=Ci.y+wi;Ft.push(Ai,Sr,ke,0);const jr=Ai-ke,oo=Sr-ke,ao=Ai+ke,so=Sr+ke;if(le=le&&this.isOffscreen(jr,oo,ao,so),fe=fe||this.isInsideGrid(jr,oo,ao,so),r!=="always"&&this.grid.hitTestCircle(Ai,Sr,ke,r,J)&&(se=!0,!N))return{circles:[],offscreen:!1,collisionDetected:se}}}}return{circles:!N&&se||!fe||jt<this.perspectiveRatioCutoff?[]:Ft,offscreen:le,collisionDetected:se}}projectPathToScreenSpace(r,c){const p=function(y,A){const T=o.K();return o.an(T,A.pitchedLabelPlaneMatrix),y.map(L=>{const N=$n(L.x,L.y,T,A.getElevation),$=A.transform.projectTileCoordinates(N.point.x,N.point.y,A.unwrappedTileID,A.getElevation);return $.point.x=(.5*$.point.x+.5)*A.width,$.point.y=(.5*-$.point.y+.5)*A.height,$})}(r,c);return function(y){let A=0,T=0,L=0,N=0;for(let $=0;$<y.length;$++)y[$].isOccluded?(L=$+1,N=0):(N++,N>T&&(T=N,A=L));return y.slice(A,A+T)}(p)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,y=1/0,A=-1/0,T=-1/0;for(const J of r){const it=new o.P(J.x+wi,J.y+wi);p=Math.min(p,it.x),y=Math.min(y,it.y),A=Math.max(A,it.x),T=Math.max(T,it.y),c.push(it)}const L=this.grid.query(p,y,A,T).concat(this.ignoredGrid.query(p,y,A,T)),N={},$={};for(const J of L){const it=J.key;if(N[it.bucketInstanceId]===void 0&&(N[it.bucketInstanceId]={}),N[it.bucketInstanceId][it.featureIndex])continue;const ot=[new o.P(J.x1,J.y1),new o.P(J.x2,J.y1),new o.P(J.x2,J.y2),new o.P(J.x1,J.y2)];o.aw(c,ot)&&(N[it.bucketInstanceId][it.featureIndex]=!0,$[it.bucketInstanceId]===void 0&&($[it.bucketInstanceId]=[]),$[it.bucketInstanceId].push(it.featureIndex))}return $}insertCollisionBox(r,c,p,y,A,T){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:A,collisionGroupID:T,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,p,y,A,T){const L=p?this.ignoredGrid:this.grid,N={bucketInstanceId:y,featureIndex:A,collisionGroupID:T,overlapMode:c};for(let $=0;$<r.length;$+=4)L.insertCircle(N,r[$],r[$+1],r[$+2])}projectAndGetPerspectiveRatio(r,c,p,y,A){if(A){let T;y?(T=[r,c,y(r,c),1],o.at(T,T,A)):(T=[r,c,0,1],mi(T,T,A));const L=T[3];return{x:(T[0]/L+1)/2*this.transform.width+wi,y:(-T[1]/L+1)/2*this.transform.height+wi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/L*.5,isOccluded:!1,signedDistanceFromCamera:L}}{const T=this.transform.projectTileCoordinates(r,c,p,y);return{x:(T.point.x+1)/2*this.transform.width+wi,y:(1-T.point.y)/2*this.transform.height+wi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}}getPerspectiveRatio(r,c,p,y){const A=this.transform.projectTileCoordinates(r,c,p,y);return .5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5}isOffscreen(r,c,p,y){return p<wi||r>=this.screenRightBoundary||y<wi||c>this.screenBottomBoundary}isInsideGrid(r,c,p,y){return p>=0&&r<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=o.ad([]);return o.L(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,p,y,A,T,L,N,$,J,it){let ot=1,ft=0,bt=0,Ft=1;const Ot=r.anchorPointX+L[0],jt=r.anchorPointY+L[1];if(T&&!A){const yn=this.projectAndGetPerspectiveRatio(Ot+1,jt,y,$,it),an=yn.x-N.x,qn=Math.atan((yn.y-N.y)/an)+(an<0?Math.PI:0),fr=Math.sin(qn),pr=Math.cos(qn);ot=pr,ft=fr,bt=-fr,Ft=pr}else if(!T&&A){const yn=Ue(this.transform);ot=yn.vecEast[0],ft=yn.vecEast[1],bt=yn.vecSouth[0],Ft=yn.vecSouth[1]}let Wt=N.x,Jt=N.y,re=c;A&&(Wt=Ot,Jt=jt,re=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),re*=this.transform.getPitchedTextCorrection(Ot,jt,y),J||(re*=o.ae(.5+N.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),J&&(Wt+=ot*J.x*re+bt*J.y*re,Jt+=ft*J.x*re+Ft*J.y*re);const se=r.x1*re,fe=r.x2*re,le=(se+fe)/2,ke=r.y1*re,De=r.y2*re,Ee=(ke+De)/2,Qe=[{offsetX:se,offsetY:ke},{offsetX:le,offsetY:ke},{offsetX:fe,offsetY:ke},{offsetX:fe,offsetY:Ee},{offsetX:fe,offsetY:De},{offsetX:le,offsetY:De},{offsetX:se,offsetY:De},{offsetX:se,offsetY:Ee}];let $e=[];for(const{offsetX:yn,offsetY:an}of Qe)$e.push(new o.P(Wt+ot*yn+bt*an,Jt+ft*yn+Ft*an));let In=!1;if(A){const yn=$e.map(an=>this.projectAndGetPerspectiveRatio(an.x,an.y,y,$,it));In=yn.some(an=>!an.isOccluded),$e=yn.map(an=>new o.P(an.x,an.y))}else In=!0;return{box:o.ax($e),allPointsOccluded:!In}}}class Ac{constructor(r,c,p,y){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):y&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class ri{constructor(r,c,p,y,A){this.text=new Ac(r?r.text:null,c,p,A),this.icon=new Ac(r?r.icon:null,c,y,A)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ss{constructor(r,c,p){this.text=r,this.icon=c,this.skipFade=p}}class $u{constructor(r,c,p,y,A){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=y,this.tileID=A}}class us{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[r]}}function Ma(b,r,c,p,y){const{horizontalAlign:A,verticalAlign:T}=o.aE(b);return new o.P(-(A-.5)*r+p[0]*y,-(T-.5)*c+p[1]*y)}class Es{constructor(r,c,p,y,A){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new kl(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new us(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=A,A&&(A.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(p,y)=>c.getElevation(r,p,y):null}getBucketParts(r,c,p,y){const A=p.getBucket(c),T=p.latestFeatureIndex;if(!A||!T||c.id!==A.layerIds[0])return;const L=p.collisionBoxArray,N=A.layers[0].layout,$=A.layers[0].paint,J=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),it=p.tileSize/o.Z,ot=p.tileID.toUnwrapped(),ft=N.get("text-rotation-alignment")==="map",bt=o.az(p,1,this.transform.zoom),Ft=o.aA(this.collisionIndex.transform,p,$.get("text-translate"),$.get("text-translate-anchor")),Ot=o.aA(this.collisionIndex.transform,p,$.get("icon-translate"),$.get("icon-translate-anchor")),jt=ir(ft,this.transform,bt);this.retainedQueryData[A.bucketInstanceId]=new $u(A.bucketInstanceId,T,A.sourceLayerIndex,A.index,p.tileID);const Wt={bucket:A,layout:N,translationText:Ft,translationIcon:Ot,unwrappedTileID:ot,pitchedLabelPlaneMatrix:jt,scale:J,textPixelRatio:it,holdingForFade:p.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:o.ak(A.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(A.sourceID)};if(y)for(const Jt of A.sortKeyRanges){const{sortKey:re,symbolInstanceStart:se,symbolInstanceEnd:fe}=Jt;r.push({sortKey:re,symbolInstanceStart:se,symbolInstanceEnd:fe,parameters:Wt})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:A.symbolInstances.length,parameters:Wt})}attemptAnchorPlacement(r,c,p,y,A,T,L,N,$,J,it,ot,ft,bt,Ft,Ot,jt,Wt,Jt,re){const se=o.aB[r.textAnchor],fe=[r.textOffset0,r.textOffset1],le=Ma(se,p,y,fe,A),ke=this.collisionIndex.placeCollisionBox(c,ot,N,$,J,L,T,Ot,it.predicate,Jt,le,re);if((!Wt||this.collisionIndex.placeCollisionBox(Wt,ot,N,$,J,L,T,jt,it.predicate,Jt,le,re).placeable)&&ke.placeable){let De;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ft.crossTileID]&&this.prevPlacement.placements[ft.crossTileID]&&this.prevPlacement.placements[ft.crossTileID].text&&(De=this.prevPlacement.variableOffsets[ft.crossTileID].anchor),ft.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ft.crossTileID]={textOffset:fe,width:p,height:y,anchor:se,textBoxScale:A,prevAnchor:De},this.markUsedJustification(bt,se,ft,Ft),bt.allowVerticalPlacement&&(this.markUsedOrientation(bt,Ft,ft),this.placedOrientations[ft.crossTileID]=Ft),{shift:le,placedGlyphBoxes:ke}}}placeLayerBucketPart(r,c,p){const{bucket:y,layout:A,translationText:T,translationIcon:L,unwrappedTileID:N,pitchedLabelPlaneMatrix:$,textPixelRatio:J,holdingForFade:it,collisionBoxArray:ot,partiallyEvaluatedTextSize:ft,collisionGroup:bt}=r.parameters,Ft=A.get("text-optional"),Ot=A.get("icon-optional"),jt=o.aC(A,"text-overlap","text-allow-overlap"),Wt=jt==="always",Jt=o.aC(A,"icon-overlap","icon-allow-overlap"),re=Jt==="always",se=A.get("text-rotation-alignment")==="map",fe=A.get("text-pitch-alignment")==="map",le=A.get("icon-text-fit")!=="none",ke=A.get("symbol-z-order")==="viewport-y",De=Wt&&(re||!y.hasIconData()||Ot),Ee=re&&(Wt||!y.hasTextData()||Ft);!y.collisionArrays&&ot&&y.deserializeCollisionBoxes(ot);const Qe=this.retainedQueryData[y.bucketInstanceId].tileID,$e=this._getTerrainElevationFunc(Qe),In=this.transform.getFastPathSimpleProjectionMatrix(Qe),yn=(an,qn,fr)=>{var pr,vi;if(c[an.crossTileID])return;if(it)return void(this.placements[an.crossTileID]=new Ss(!1,!1,!1));let ti=!1,Ci=!1,Ai=!0,Sr=null,jr={box:null,placeable:!1,offscreen:null,occluded:!1},oo={placeable:!1},ao=null,so=null,Wo=null,ys=0,Ql=0,Vs=0;qn.textFeatureIndex?ys=qn.textFeatureIndex:an.useRuntimeCollisionCircles&&(ys=an.featureIndex),qn.verticalTextFeatureIndex&&(Ql=qn.verticalTextFeatureIndex);const Us=qn.textBox;if(Us){const Oa=Bi=>{let Ii=o.al.horizontal;if(y.allowVerticalPlacement&&!Bi&&this.prevPlacement){const Ui=this.prevPlacement.placedOrientations[an.crossTileID];Ui&&(this.placedOrientations[an.crossTileID]=Ui,Ii=Ui,this.markUsedOrientation(y,Ii,an))}return Ii},Jl=(Bi,Ii)=>{if(y.allowVerticalPlacement&&an.numVerticalGlyphVertices>0&&qn.verticalTextBox){for(const Ui of y.writingModes)if(Ui===o.al.vertical?(jr=Ii(),oo=jr):jr=Bi(),jr&&jr.placeable)break}else jr=Bi()},Hs=an.textAnchorOffsetStartIndex,tc=an.textAnchorOffsetEndIndex;if(tc===Hs){const Bi=(Ii,Ui)=>{const Mi=this.collisionIndex.placeCollisionBox(Ii,jt,J,Qe,N,fe,se,T,bt.predicate,$e,void 0,In);return Mi&&Mi.placeable&&(this.markUsedOrientation(y,Ui,an),this.placedOrientations[an.crossTileID]=Ui),Mi};Jl(()=>Bi(Us,o.al.horizontal),()=>{const Ii=qn.verticalTextBox;return y.allowVerticalPlacement&&an.numVerticalGlyphVertices>0&&Ii?Bi(Ii,o.al.vertical):{box:null,offscreen:null}}),Oa(jr&&jr.placeable)}else{let Bi=o.aB[(vi=(pr=this.prevPlacement)===null||pr===void 0?void 0:pr.variableOffsets[an.crossTileID])===null||vi===void 0?void 0:vi.anchor];const Ii=(Mi,lm,Fc)=>{const cm=Mi.x2-Mi.x1,va=Mi.y2-Mi.y1,vs=an.textBoxScale,um=le&&Jt==="never"?lm:null;let Ya=null,$s=jt==="never"?1:2,Bc="never";Bi&&$s++;for(let ep=0;ep<$s;ep++){for(let sh=Hs;sh<tc;sh++){const np=y.textAnchorOffsets.get(sh);if(Bi&&np.textAnchor!==Bi)continue;const Vd=this.attemptAnchorPlacement(np,Mi,cm,va,vs,se,fe,J,Qe,N,bt,Bc,an,y,Fc,T,L,um,$e);if(Vd&&(Ya=Vd.placedGlyphBoxes,Ya&&Ya.placeable))return ti=!0,Sr=Vd.shift,Ya}Bi?Bi=null:Bc=jt}return p&&!Ya&&(Ya={box:this.collisionIndex.placeCollisionBox(Us,"always",J,Qe,N,fe,se,T,bt.predicate,$e,void 0,In).box,offscreen:!1,placeable:!1,occluded:!1}),Ya};Jl(()=>Ii(Us,qn.iconBox,o.al.horizontal),()=>{const Mi=qn.verticalTextBox;return y.allowVerticalPlacement&&(!jr||!jr.placeable)&&an.numVerticalGlyphVertices>0&&Mi?Ii(Mi,qn.verticalIconBox,o.al.vertical):{box:null,occluded:!0,offscreen:null}}),jr&&(ti=jr.placeable,Ai=jr.offscreen);const Ui=Oa(jr&&jr.placeable);if(!ti&&this.prevPlacement){const Mi=this.prevPlacement.variableOffsets[an.crossTileID];Mi&&(this.variableOffsets[an.crossTileID]=Mi,this.markUsedJustification(y,Mi.anchor,an,Ui))}}}if(ao=jr,ti=ao&&ao.placeable,Ai=ao&&ao.offscreen,an.useRuntimeCollisionCircles){const Oa=y.text.placedSymbolArray.get(an.centerJustifiedTextSymbolIndex),Jl=o.am(y.textSizeData,ft,Oa),Hs=A.get("text-padding");so=this.collisionIndex.placeCollisionCircles(jt,Oa,y.lineVertexArray,y.glyphOffsetArray,Jl,N,$,p,fe,bt.predicate,an.collisionCircleDiameter,Hs,T,$e),so.circles.length&&so.collisionDetected&&!p&&o.w("Collisions detected, but collision boxes are not shown"),ti=Wt||so.circles.length>0&&!so.collisionDetected,Ai=Ai&&so.offscreen}if(qn.iconFeatureIndex&&(Vs=qn.iconFeatureIndex),qn.iconBox){const Oa=Jl=>this.collisionIndex.placeCollisionBox(Jl,Jt,J,Qe,N,fe,se,L,bt.predicate,$e,le&&Sr?Sr:void 0,In);oo&&oo.placeable&&qn.verticalIconBox?(Wo=Oa(qn.verticalIconBox),Ci=Wo.placeable):(Wo=Oa(qn.iconBox),Ci=Wo.placeable),Ai=Ai&&Wo.offscreen}const qo=Ft||an.numHorizontalGlyphVertices===0&&an.numVerticalGlyphVertices===0,Au=Ot||an.numIconVertices===0;qo||Au?Au?qo||(Ci=Ci&&ti):ti=Ci&&ti:Ci=ti=Ci&&ti;const Da=Ci&&Wo.placeable;if(ti&&ao.placeable&&this.collisionIndex.insertCollisionBox(ao.box,jt,A.get("text-ignore-placement"),y.bucketInstanceId,oo&&oo.placeable&&Ql?Ql:ys,bt.ID),Da&&this.collisionIndex.insertCollisionBox(Wo.box,Jt,A.get("icon-ignore-placement"),y.bucketInstanceId,Vs,bt.ID),so&&ti&&this.collisionIndex.insertCollisionCircles(so.circles,jt,A.get("text-ignore-placement"),y.bucketInstanceId,ys,bt.ID),p&&this.storeCollisionData(y.bucketInstanceId,fr,qn,ao,Wo,so),an.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[an.crossTileID]=new Ss((ti||De)&&!(ao!=null&&ao.occluded),(Ci||Ee)&&!(Wo!=null&&Wo.occluded),Ai||y.justReloaded),c[an.crossTileID]=!0};if(ke){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const an=y.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let qn=an.length-1;qn>=0;--qn){const fr=an[qn];yn(y.symbolInstances.get(fr),y.collisionArrays[fr],fr)}}else for(let an=r.symbolInstanceStart;an<r.symbolInstanceEnd;an++)yn(y.symbolInstances.get(an),y.collisionArrays[an],an);y.justReloaded=!1}storeCollisionData(r,c,p,y,A,T){if(p.textBox||p.iconBox){let L,N;this.collisionBoxArrays.has(r)?L=this.collisionBoxArrays.get(r):(L=new Map,this.collisionBoxArrays.set(r,L)),L.has(c)?N=L.get(c):(N={text:null,icon:null},L.set(c,N)),p.textBox&&(N.text=y.box),p.iconBox&&(N.icon=A.box)}if(T){let L=this.collisionCircleArrays[r];L===void 0&&(L=this.collisionCircleArrays[r]=[]);for(let N=0;N<T.circles.length;N+=4)L.push(T.circles[N+0]-wi),L.push(T.circles[N+1]-wi),L.push(T.circles[N+2]),L.push(T.collisionDetected?1:0)}}markUsedJustification(r,c,p,y){let A;A=y===o.al.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[o.aD(c)];const T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const L of T)L>=0&&(r.text.placedSymbolArray.get(L).crossTileID=A>=0&&L!==A?0:p.crossTileID)}markUsedOrientation(r,c,p){const y=c===o.al.horizontal||c===o.al.horizontalOnly?c:0,A=c===o.al.vertical?c:0,T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const L of T)r.text.placedSymbolArray.get(L).placedOrientation=y;p.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=A)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(r):1,A=c?c.opacities:{},T=c?c.variableOffsets:{},L=c?c.placedOrientations:{};for(const N in this.placements){const $=this.placements[N],J=A[N];J?(this.opacities[N]=new ri(J,y,$.text,$.icon),p=p||$.text!==J.text.placed||$.icon!==J.icon.placed):(this.opacities[N]=new ri(null,y,$.text,$.icon,$.skipFade),p=p||$.text||$.icon)}for(const N in A){const $=A[N];if(!this.opacities[N]){const J=new ri($,y,!1,!1);J.isHidden()||(this.opacities[N]=J,p=p||$.text.placed||$.icon.placed)}}for(const N in T)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=T[N]);for(const N in L)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=L[N]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const p={};for(const y of c){const A=y.getBucket(r);A&&y.latestFeatureIndex&&r.id===A.layerIds[0]&&this.updateBucketOpacities(A,y.tileID,p,y.collisionBoxArray)}}updateBucketOpacities(r,c,p,y){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const A=r.layers[0],T=A.layout,L=new ri(null,0,!1,!1,!0),N=T.get("text-allow-overlap"),$=T.get("icon-allow-overlap"),J=A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"),it=T.get("text-rotation-alignment")==="map",ot=T.get("text-pitch-alignment")==="map",ft=T.get("icon-text-fit")!=="none",bt=new ri(null,0,N&&($||!r.hasIconData()||T.get("icon-optional")),$&&(N||!r.hasTextData()||T.get("text-optional")),!0);!r.collisionArrays&&y&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(y);const Ft=(jt,Wt,Jt)=>{for(let re=0;re<Wt/4;re++)jt.opacityVertexArray.emplaceBack(Jt);jt.hasVisibleVertices=jt.hasVisibleVertices||Jt!==Ps},Ot=this.collisionBoxArrays.get(r.bucketInstanceId);for(let jt=0;jt<r.symbolInstances.length;jt++){const Wt=r.symbolInstances.get(jt),{numHorizontalGlyphVertices:Jt,numVerticalGlyphVertices:re,crossTileID:se}=Wt;let fe=this.opacities[se];p[se]?fe=L:fe||(fe=bt,this.opacities[se]=fe),p[se]=!0;const le=Wt.numIconVertices>0,ke=this.placedOrientations[Wt.crossTileID],De=ke===o.al.vertical,Ee=ke===o.al.horizontal||ke===o.al.horizontalOnly;if(Jt>0||re>0){const $e=Rl(fe.text);Ft(r.text,Jt,De?Ps:$e),Ft(r.text,re,Ee?Ps:$e);const In=fe.text.isHidden();[Wt.rightJustifiedTextSymbolIndex,Wt.centerJustifiedTextSymbolIndex,Wt.leftJustifiedTextSymbolIndex].forEach(qn=>{qn>=0&&(r.text.placedSymbolArray.get(qn).hidden=In||De?1:0)}),Wt.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Wt.verticalPlacedTextSymbolIndex).hidden=In||Ee?1:0);const yn=this.variableOffsets[Wt.crossTileID];yn&&this.markUsedJustification(r,yn.anchor,Wt,ke);const an=this.placedOrientations[Wt.crossTileID];an&&(this.markUsedJustification(r,"left",Wt,an),this.markUsedOrientation(r,an,Wt))}if(le){const $e=Rl(fe.icon),In=!(ft&&Wt.verticalPlacedIconSymbolIndex&&De);Wt.placedIconSymbolIndex>=0&&(Ft(r.icon,Wt.numIconVertices,In?$e:Ps),r.icon.placedSymbolArray.get(Wt.placedIconSymbolIndex).hidden=fe.icon.isHidden()),Wt.verticalPlacedIconSymbolIndex>=0&&(Ft(r.icon,Wt.numVerticalIconVertices,In?Ps:$e),r.icon.placedSymbolArray.get(Wt.verticalPlacedIconSymbolIndex).hidden=fe.icon.isHidden())}const Qe=Ot&&Ot.has(jt)?Ot.get(jt):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const $e=r.collisionArrays[jt];if($e){let In=new o.P(0,0);if($e.textBox||$e.verticalTextBox){let yn=!0;if(J){const an=this.variableOffsets[se];an?(In=Ma(an.anchor,an.width,an.height,an.textOffset,an.textBoxScale),it&&In._rotate(ot?-this.transform.bearingInRadians:this.transform.bearingInRadians)):yn=!1}if($e.textBox||$e.verticalTextBox){let an;$e.textBox&&(an=De),$e.verticalTextBox&&(an=Ee),Ts(r.textCollisionBox.collisionVertexArray,fe.text.placed,!yn||an,Qe.text,In.x,In.y)}}if($e.iconBox||$e.verticalIconBox){const yn=!!(!Ee&&$e.verticalIconBox);let an;$e.iconBox&&(an=yn),$e.verticalIconBox&&(an=!yn),Ts(r.iconCollisionBox.collisionVertexArray,fe.icon.placed,an,Qe.icon,ft?In.x:0,ft?In.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>r}setStale(){this.stale=!0}}function Ts(b,r,c,p,y,A){p&&p.length!==0||(p=[0,0,0,0]);const T=p[0]-wi,L=p[1]-wi,N=p[2]-wi,$=p[3]-wi;b.emplaceBack(r?1:0,c?1:0,y||0,A||0,T,L),b.emplaceBack(r?1:0,c?1:0,y||0,A||0,N,L),b.emplaceBack(r?1:0,c?1:0,y||0,A||0,N,$),b.emplaceBack(r?1:0,c?1:0,y||0,A||0,T,$)}const Ll=Math.pow(2,25),Sh=Math.pow(2,24),wd=Math.pow(2,17),Eh=Math.pow(2,16),Gu=Math.pow(2,9),Zu=Math.pow(2,8),wc=Math.pow(2,1);function Rl(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const r=b.placed?1:0,c=Math.floor(127*b.opacity);return c*Ll+r*Sh+c*wd+r*Eh+c*Gu+r*Zu+c*wc+r}const Ps=0;class Th{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,p,y,A){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(T,y,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,A())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((L,N)=>L.sortKey-N.sortKey));this._currentPartIndex<T.length;)if(c.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,A())return!0;return!1}}class eu{constructor(r,c,p,y,A,T,L,N){this.placement=new Es(r,c,T,L,N),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=A,this._done=!1}isDone(){return this._done}continuePlacement(r,c,p){const y=E.now(),A=()=>!this._forceFullPlacement&&E.now()-y>2;for(;this._currentPlacementIndex>=0;){const T=c[r[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=L)&&(!T.maxzoom||T.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new Th(T)),this._inProgressLayer.continuePlacement(p[T.source],this.placement,this._showCollisionBoxes,T,A))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Dl=512/o.Z/2;class Ua{constructor(r,c,p){this.tileID=r,this.bucketInstanceId=p,this._symbolsByKey={};const y=new Map;for(let A=0;A<c.length;A++){const T=c.get(A),L=T.key,N=y.get(L);N?N.push(T):y.set(L,[T])}for(const[A,T]of y){const L={positions:T.map(N=>({x:Math.floor(N.anchorX*Dl),y:Math.floor(N.anchorY*Dl)})),crossTileIDs:T.map(N=>N.crossTileID)};if(L.positions.length>128){const N=new o.aF(L.positions.length,16,Uint16Array);for(const{x:$,y:J}of L.positions)N.add($,J);N.finish(),delete L.positions,L.index=N}this._symbolsByKey[A]=L}}getScaledCoordinates(r,c){const{x:p,y,z:A}=this.tileID.canonical,{x:T,y:L,z:N}=c.canonical,$=Dl/Math.pow(2,N-A),J=(L*o.Z+r.anchorY)*$,it=y*o.Z*Dl;return{x:Math.floor((T*o.Z+r.anchorX)*$-p*o.Z*Dl),y:Math.floor(J-it)}}findMatches(r,c,p){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let A=0;A<r.length;A++){const T=r.get(A);if(T.crossTileID)continue;const L=this._symbolsByKey[T.key];if(!L)continue;const N=this.getScaledCoordinates(T,c);if(L.index){const $=L.index.range(N.x-y,N.y-y,N.x+y,N.y+y).sort();for(const J of $){const it=L.crossTileIDs[J];if(!p[it]){p[it]=!0,T.crossTileID=it;break}}}else if(L.positions)for(let $=0;$<L.positions.length;$++){const J=L.positions[$],it=L.crossTileIDs[$];if(Math.abs(J.x-N.x)<=y&&Math.abs(J.y-N.y)<=y&&!p[it]){p[it]=!0,T.crossTileID=it;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class O{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Y{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const p in this.indexes){const y=this.indexes[p],A={};for(const T in y){const L=y[T];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+c),A[L.tileID.key]=L}this.indexes[p]=A}this.lng=r}addBucket(r,c,p){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let A=0;A<c.symbolInstances.length;A++)c.symbolInstances.get(A).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const y=this.usedCrossTileIDs[r.overscaledZ];for(const A in this.indexes){const T=this.indexes[A];if(Number(A)>r.overscaledZ)for(const L in T){const N=T[L];N.tileID.isChildOf(r)&&N.findMatches(c.symbolInstances,r,y)}else{const L=T[r.scaledTo(Number(A)).key];L&&L.findMatches(c.symbolInstances,r,y)}}for(let A=0;A<c.symbolInstances.length;A++){const T=c.symbolInstances.get(A);T.crossTileID||(T.crossTileID=p.generate(),y[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ua(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const p of c.getCrossTileIDsLists())for(const y of p)delete this.usedCrossTileIDs[r][y]}removeStaleBuckets(r){let c=!1;for(const p in this.indexes){const y=this.indexes[p];for(const A in y)r[y[A].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,y[A]),delete y[A],c=!0)}return c}}class At{constructor(){this.layerIndexes={},this.crossTileIDs=new O,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,p){let y=this.layerIndexes[r.id];y===void 0&&(y=this.layerIndexes[r.id]=new Y);let A=!1;const T={};y.handleWrapJump(p);for(const L of c){const N=L.getBucket(r);N&&r.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(L.tileID,N,this.crossTileIDs)&&(A=!0),T[N.bucketInstanceId]=!0)}return y.removeStaleBuckets(T)&&(A=!0),A}pruneUnusedLayers(r){const c={};r.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}var $t="void main() {fragColor=vec4(1.0);}";const Zt={prelude:Qt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Qt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Qt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Qt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Qt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Qt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Qt($t,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Qt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Qt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Qt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Qt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Qt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Qt($t,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Qt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Qt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Qt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Qt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Qt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Qt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Qt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Qt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Qt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Qt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Qt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Qt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Qt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Qt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Qt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Qt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Qt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Qt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Qt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Qt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Qt(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Qt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Qt(b,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=r.match(/in ([\w]+) ([\w]+)/g),y=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=A?A.concat(y):y,L={};return{fragmentSource:b=b.replace(c,(N,$,J,it,ot)=>(L[ot]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${ot}
in ${J} ${it} ${ot};
#else
uniform ${J} ${it} u_${ot};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ot}
    ${J} ${it} ${ot} = u_${ot};
#endif
`)),vertexSource:r=r.replace(c,(N,$,J,it,ot)=>{const ft=it==="float"?"vec2":"vec4",bt=ot.match(/color/)?"color":ft;return L[ot]?$==="define"?`
#ifndef HAS_UNIFORM_u_${ot}
uniform lowp float u_${ot}_t;
in ${J} ${ft} a_${ot};
out ${J} ${it} ${ot};
#else
uniform ${J} ${it} u_${ot};
#endif
`:bt==="vec4"?`
#ifndef HAS_UNIFORM_u_${ot}
    ${ot} = a_${ot};
#else
    ${J} ${it} ${ot} = u_${ot};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ot}
    ${ot} = unpack_mix_${bt}(a_${ot}, u_${ot}_t);
#else
    ${J} ${it} ${ot} = u_${ot};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${ot}
uniform lowp float u_${ot}_t;
in ${J} ${ft} a_${ot};
#else
uniform ${J} ${it} u_${ot};
#endif
`:bt==="vec4"?`
#ifndef HAS_UNIFORM_u_${ot}
    ${J} ${it} ${ot} = a_${ot};
#else
    ${J} ${it} ${ot} = u_${ot};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ot}
    ${J} ${it} ${ot} = unpack_mix_${bt}(a_${ot}, u_${ot}_t);
#else
    ${J} ${it} ${ot} = u_${ot};
#endif
`}),staticAttributes:p,staticUniforms:T}}class _e{constructor(r,c,p){this.vertexBuffer=r,this.indexBuffer=c,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var cn=o.aG([{name:"a_pos",type:"Int16",components:2}]);const dn="#define PROJECTION_MERCATOR",An="mercator";class gn{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return An}get shaderDefine(){return dn}get shaderPreludeCode(){return Zt.projectionMercator}get vertexShaderPreludeCode(){return Zt.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,c,p,y,A){if(this._cachedMesh)return this._cachedMesh;const T=new o.aI;T.emplaceBack(0,0),T.emplaceBack(o.Z,0),T.emplaceBack(0,o.Z),T.emplaceBack(o.Z,o.Z);const L=r.createVertexBuffer(T,cn.members),N=o.aJ.simpleSegment(0,0,4,2),$=new o.aK;$.emplaceBack(1,0,2),$.emplaceBack(1,2,3);const J=r.createIndexBuffer($);return this._cachedMesh=new _e(L,J,N),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class Mn{constructor(r=0,c=0,p=0,y=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=p,this.right=y}interpolate(r,c,p){return c.top!=null&&r.top!=null&&(this.top=o.B.number(r.top,c.top,p)),c.bottom!=null&&r.bottom!=null&&(this.bottom=o.B.number(r.bottom,c.bottom,p)),c.left!=null&&r.left!=null&&(this.left=o.B.number(r.left,c.left,p)),c.right!=null&&r.right!=null&&(this.right=o.B.number(r.right,c.right,p)),this}getCenter(r,c){const p=o.ae((this.left+r-this.right)/2,0,r),y=o.ae((this.top+c-this.bottom)/2,0,c);return new o.P(p,y)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Mn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Kn(b,r){if(!b.renderWorldCopies||b.lngRange)return;const c=r.lng-b.center.lng;r.lng+=c>180?-360:c<-180?360:0}function Zr(b){return Math.max(0,Math.floor(b))}class or{constructor(r,c,p,y,A,T){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=T===void 0||!!T,this._minZoom=c||0,this._maxZoom=p||22,this._minPitch=y??0,this._maxPitch=A??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Zr(this._zoom),this._scale=o.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Mn,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,c,p){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=Zr(this._zoom),this._scale=o.ac(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new Mn(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!p&&r.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const c=o.aL(r,-180,180)*Math.PI/180;var p,y,A,T,L,N,$,J,it;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=_(),p=this._rotationMatrix,A=-this._bearingInRadians,T=(y=this._rotationMatrix)[0],L=y[1],N=y[2],$=y[3],J=Math.sin(A),it=Math.cos(A),p[0]=T*it+N*J,p[1]=L*it+$*J,p[2]=T*-J+N*it,p[3]=L*-J+$*it)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const c=o.ae(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const c=r/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aM(this._fovInRadians)}setFov(r){r=o.ae(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=o.ab(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const c=this.getConstrained(this._center,r).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.ac(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,c){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,p){this._unmodified=!1,this._edgeInsets.interpolate(r,c,p),this._constrain(),this._calcMatrices()}resize(r,c,p=!0){this._width=r,this._height=c,p&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new H([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.af])}getConstrained(r,c){return this._callbacks.getConstrained(r,c)}getCameraQueryGeometry(r,c){if(c.length===1)return[c[0],r];{let p=r.x,y=r.y,A=r.x,T=r.y;for(const L of c)p=Math.min(p,L.x),y=Math.min(y,L.y),A=Math.max(A,L.x),T=Math.max(T,L.y);return[new o.P(p,y),new o.P(A,y),new o.P(A,T),new o.P(p,T),new o.P(p,y)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:p}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(p),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=o.ad(new Float64Array(16));o.M(r,r,[this._width/2,-this._height/2,1]),o.L(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=o.ad(new Float64Array(16)),o.M(r,r,[1,-1,1]),o.L(r,r,[-1,-1,0]),o.M(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,c,p,y){const A=p!==void 0?p:this.bearing,T=y=y!==void 0?y:this.pitch,L=o.$.fromLngLat(r,c),N=-Math.cos(o.ab(T)),$=Math.sin(o.ab(T)),J=$*Math.sin(o.ab(A)),it=-$*Math.cos(o.ab(A));let ot=this.elevation;const ft=c-ot;let bt;N*ft>=0||Math.abs(N)<.1?(bt=1e4,ot=c+bt*N):bt=-ft/N;let Ft,Ot,jt=o.aN(1,L.y),Wt=0;do{if(Wt+=1,Wt>10)break;Ot=bt/jt,Ft=new o.$(L.x+J*Ot,L.y+it*Ot),jt=1/Ft.meterInMercatorCoordinateUnits()}while(Math.abs(bt-Ot*jt)>1e-12);return{center:Ft.toLngLat(),elevation:ot,zoom:o.ah(this.height/2/Math.tan(this.fovInRadians/2)/Ot/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const c=o.ag(1,this.center.lat)*this.worldSize,p=this.cameraToCenterDistance/c,y=o.$.fromLngLat(this.center,this.elevation),A=gt(this.center,this.elevation,this.pitch,this.bearing,p);this._elevation=r;const T=this.calculateCenterFromCameraLngLatAlt(A.toLngLat(),o.aN(A.z,y.y),this.bearing,this.pitch);this._elevation=T.elevation,this._center=T.center,this.setZoom(T.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=o.ag(1,this.center.lat)*this.worldSize;return gt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const c=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/c,r.canonical.y/c,1/c/o.Z,1/c/o.Z]}}class ai{constructor(r,c){this.min=r,this.max=c,this.center=o.aO([],o.aP([],this.min,this.max),.5)}quadrant(r){const c=[r%2==0,r<2],p=o.aQ(this.min),y=o.aQ(this.max);for(let A=0;A<c.length;A++)p[A]=c[A]?this.min[A]:this.center[A],y[A]=c[A]?this.center[A]:this.max[A];return y[2]=this.max[2],new ai(p,y)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let c=!0;for(let p=0;p<r.planes.length;p++){const y=this.intersectsPlane(r.planes[p]);if(y===0)return 0;y===1&&(c=!1)}return c?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let c=r[3],p=r[3];for(let y=0;y<3;y++)r[y]>0?(c+=r[y]*this.min[y],p+=r[y]*this.max[y]):(p+=r[y]*this.min[y],c+=r[y]*this.max[y]);return c>=0?2:p<0?0:1}}class on{distanceToTile2d(r,c,p,y){const A=y.distanceX([r,c]),T=y.distanceY([r,c]);return Math.hypot(A,T)}getWrap(r,c,p){return p}getTileAABB(r,c,p,y){var A,T;let L=p,N=p;if(y.terrain){const J=new o.Y(r.z,c,r.z,r.x,r.y),it=y.terrain.getMinMaxElevation(J);L=(A=it.minElevation)!==null&&A!==void 0?A:p,N=(T=it.maxElevation)!==null&&T!==void 0?T:p}const $=1<<r.z;return new ai([c+r.x/$,r.y/$,L],[c+(r.x+1)/$,(r.y+1)/$,N])}allowVariableZoom(r,c){const p=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,y=o.ae(78.5-p/2,0,60);return!!c.terrain||r.pitch>y}allowWorldCopies(){return!0}recalculateCache(){}}class kn{constructor(r,c,p){this.points=r,this.planes=c,this.aabb=p}static fromInvProjectionMatrix(r,c=1,p=0){const y=Math.pow(2,p),A=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map($=>{const J=1/($=o.at([],$,r))[3]/c*y;return o.aR($,$,[J,J,1/$[3],J])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map($=>{const J=o.aS([],A[$[0]],A[$[1]]),it=o.aS([],A[$[2]],A[$[1]]),ot=o.aT([],o.aU([],J,it)),ft=-o.aV(ot,A[$[1]]);return ot.concat(ft)}),L=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],N=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const $ of A)for(let J=0;J<3;J++)L[J]=Math.min(L[J],$[J]),N[J]=Math.max(N[J],$[J]);return new kn(A,T,new ai(L,N))}}class Rr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,p){return this._helper.interpolatePadding(r,c,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,p=!0){this._helper.resize(r,c,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,c){}constructor(r,c,p,y,A){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new or({calcMatrices:()=>{this._calcMatrices()},getConstrained:(T,L)=>this.getConstrained(T,L)},r,c,p,y,A),this._coveringTilesDetailsProvider=new on}clone(){const r=new Rr;return r.apply(this),r}apply(r,c,p){this._helper.apply(r,c,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const c=[new o.aW(0,r)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new o.P(0,0)),y=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),A=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),T=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),L=Math.floor(Math.min(p.x,y.x,A.x,T.x)),N=Math.floor(Math.max(p.x,y.x,A.x,T.x)),$=1;for(let J=L-$;J<=N+$;J++)J!==0&&c.push(new o.aW(J,r))}return c}getCameraFrustum(){return kn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const c=this.screenPointToLocation(this.centerPoint,r),p=r?r.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(r,c){const p=o.ag(this.elevation,this.center.lat),y=this.screenPointToMercatorCoordinateAtZ(c,p),A=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),T=o.$.fromLngLat(r),L=new o.$(T.x-(y.x-A.x),T.y-(y.y-A.y));this.setCenter(L==null?void 0:L.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,c){return c?this.coordinatePoint(o.$.fromLngLat(r),c.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.$.fromLngLat(r))}screenPointToLocation(r,c){var p;return(p=this.screenPointToMercatorCoordinate(r,c))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(r,c){if(c){const p=c.pointCoordinate(r);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,c){const p=c||0,y=[r.x,r.y,0,1],A=[r.x,r.y,1,1];o.at(y,y,this._pixelMatrixInverse),o.at(A,A,this._pixelMatrixInverse);const T=y[3],L=A[3],N=y[1]/T,$=A[1]/L,J=y[2]/T,it=A[2]/L,ot=J===it?0:(p-J)/(it-J);return new o.$(o.B.number(y[0]/T,A[0]/L,ot)/this.worldSize,o.B.number(N,$,ot)/this.worldSize,p)}coordinatePoint(r,c=0,p=this._pixelMatrix){const y=[r.x*this.worldSize,r.y*this.worldSize,c,1];return o.at(y,y,p),new o.P(y[0]/y[3],y[1]/y[3])}getBounds(){const r=Math.max(0,this._helper._height/2-ae(this));return new H().extend(this.screenPointToLocation(new o.P(0,r))).extend(this.screenPointToLocation(new o.P(this._helper._width,r))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(r,c){return c?c.pointCoordinate(r)!=null:r.y>this.height/2-ae(this)}calculatePosMatrix(r,c=!1,p){var y;const A=(y=r.key)!==null&&y!==void 0?y:o.aX(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),T=c?this._alignedPosMatrixCache:this._posMatrixCache;if(T.has(A)){const $=T.get(A);return p?$.f32:$.f64}const L=ht(r,this.worldSize);o.N(L,c?this._alignedProjMatrix:this._viewProjMatrix,L);const N={f64:L,f32:new Float32Array(L)};return T.set(A,N),p?N.f32:N.f64}calculateFogMatrix(r){const c=r.key,p=this._fogMatrixCacheF32;if(p.has(c))return p.get(c);const y=ht(r,this.worldSize);return o.N(y,this._fogMatrix,y),p.set(c,new Float32Array(y)),p.get(c)}getConstrained(r,c){c=o.ae(+c,this.minZoom,this.maxZoom);const p={center:new o.Q(r.lng,r.lat),zoom:c};let y=this._helper._lngRange;this._helper._renderWorldCopies||y!==null||(y=[-179.9999999999,180-1e-10]);const A=this.tileSize*o.ac(p.zoom);let T=0,L=A,N=0,$=A,J=0,it=0;const{x:ot,y:ft}=this.size;if(this._helper._latRange){const Jt=this._helper._latRange;T=o.S(Jt[1])*A,L=o.S(Jt[0])*A,L-T<ft&&(J=ft/(L-T))}y&&(N=o.aL(o.U(y[0])*A,0,A),$=o.aL(o.U(y[1])*A,0,A),$<N&&($+=A),$-N<ot&&(it=ot/($-N)));const{x:bt,y:Ft}=un(A,r);let Ot,jt;const Wt=Math.max(it||0,J||0);if(Wt){const Jt=new o.P(it?($+N)/2:bt,J?(L+T)/2:Ft);return p.center=Nn(A,Jt).wrap(),p.zoom+=o.ah(Wt),p}if(this._helper._latRange){const Jt=ft/2;Ft-Jt<T&&(jt=T+Jt),Ft+Jt>L&&(jt=L-Jt)}if(y){const Jt=(N+$)/2;let re=bt;this._helper._renderWorldCopies&&(re=o.aL(bt,Jt-A/2,Jt+A/2));const se=ot/2;re-se<N&&(Ot=N+se),re+se>$&&(Ot=$-se)}if(Ot!==void 0||jt!==void 0){const Jt=new o.P(Ot??bt,jt??Ft);p.center=Nn(A,Jt).wrap()}return p}calculateCenterFromCameraLngLatAlt(r,c,p,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,p,y)}_calculateNearFarZIfNeeded(r,c,p){if(!this._helper.autoCalculateNearFarZ)return;const y=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),A=r-y*this._helper._pixelPerMeter/Math.cos(c),T=y<0?A:r,L=Math.PI/2+this.pitchInRadians,N=o.ab(this.fov)*(Math.abs(Math.cos(o.ab(this.roll)))*this.height+Math.abs(Math.sin(o.ab(this.roll)))*this.width)/this.height*(.5+p.y/this.height),$=Math.sin(N)*T/Math.sin(o.ae(Math.PI-L-N,.01,Math.PI-.01)),J=ae(this),it=Math.atan(J/this._helper.cameraToCenterDistance),ot=o.ab(.75),ft=it>ot?2*it*(.5+p.y/(2*J)):ot,bt=Math.sin(ft)*T/Math.sin(o.ae(Math.PI-L-ft,.01,Math.PI-.01)),Ft=Math.min($,bt);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*Ft+T),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,c=un(this.worldSize,this.center),p=c.x,y=c.y;this._helper._pixelPerMeter=o.ag(1,this.center.lat)*this.worldSize;const A=o.ab(Math.min(this.pitch,Ye)),T=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(A));let L;this._calculateNearFarZIfNeeded(T,A,r),L=new Float64Array(16),o.aY(L,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.an(this._invProjMatrix,L),L[8]=2*-r.x/this._helper._width,L[9]=2*r.y/this._helper._height,this._projectionMatrix=o.aZ(L),o.M(L,L,[1,-1,1]),o.L(L,L,[0,0,-this._helper.cameraToCenterDistance]),o.a_(L,L,-this.rollInRadians),o.a$(L,L,this.pitchInRadians),o.a_(L,L,-this.bearingInRadians),o.L(L,L,[-p,-y,0]),this._mercatorMatrix=o.M([],L,[this.worldSize,this.worldSize,this.worldSize]),o.M(L,L,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,L),o.L(L,L,[0,0,-this.elevation]),this._viewProjMatrix=L,this._invViewProjMatrix=o.an([],L);const N=[0,0,-1,1];o.at(N,N,this._invViewProjMatrix),this._cameraPosition=[N[0]/N[3],N[1]/N[3],N[2]/N[3]],this._fogMatrix=new Float64Array(16),o.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,T,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,o.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.L(this._fogMatrix,this._fogMatrix,[-p,-y,0]),o.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,L);const $=this._helper._width%2/2,J=this._helper._height%2/2,it=Math.cos(this.bearingInRadians),ot=Math.sin(-this.bearingInRadians),ft=p-Math.round(p)+it*$+ot*J,bt=y-Math.round(y)+it*J+ot*$,Ft=new Float64Array(L);if(o.L(Ft,Ft,[ft>.5?ft-1:ft,bt>.5?bt-1:bt,0]),this._alignedProjMatrix=Ft,L=o.an(new Float64Array(16),this._pixelMatrix),!L)throw new Error("failed to invert matrix");this._pixelMatrixInverse=L,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return o.at(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=o.ag(1,this.center.lat)*this.worldSize;return gt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,c){const p=o.$.fromLngLat(r),y=[p.x*this.worldSize,p.y*this.worldSize,c,1];return o.at(y,y,this._viewProjMatrix),y[2]/y[3]}getProjectionData(r){const{overscaledTileID:c,aligned:p,applyTerrainMatrix:y}=r,A=this._helper.getMercatorTileCoordinates(c),T=c?this.calculatePosMatrix(c,p,!0):null;let L;return L=c&&c.terrainRttPosMatrix32f&&y?c.terrainRttPosMatrix32f:T||o.b0(),{mainMatrix:L,tileMercatorCoords:A,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:L}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,c,p){return 1}transformLightDirection(r){return o.aQ(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,c,p,y){const A=this.calculatePosMatrix(p);let T;y?(T=[r,c,y(r,c),1],o.at(T,T,A)):(T=[r,c,0,1],mi(T,T,A));const L=T[3];return{point:new o.P(T[0]/L,T[1]/L),signedDistanceFromCamera:L,isOccluded:!1}}populateCache(r){for(const c of r)this.calculatePosMatrix(c)}getMatrixForModel(r,c){const p=o.$.fromLngLat(r,c),y=p.meterInMercatorCoordinateUnits(),A=o.b1();return o.L(A,A,[p.x,p.y,p.z]),o.a_(A,A,Math.PI),o.a$(A,A,Math.PI/2),o.M(A,A,[-y,y,y]),A}getProjectionDataForCustomLayer(r=!0){const c=new o.Y(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:r}),y=ht(c,this.worldSize);o.N(y,this._viewProjMatrix,y),p.tileMercatorCoords=[0,0,1,1];const A=[o.Z,o.Z,this.worldSize/this._helper.pixelsPerMeter],T=o.b2();return o.M(T,y,A),p.fallbackMatrix=T,p.mainMatrix=T,p}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function xi(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function gi(b){if(b.useSlerp)if(b.k<1){const r=o.b3(b.startEulerAngles.roll,b.startEulerAngles.pitch,b.startEulerAngles.bearing),c=o.b3(b.endEulerAngles.roll,b.endEulerAngles.pitch,b.endEulerAngles.bearing),p=new Float64Array(4);o.b4(p,r,c,b.k);const y=o.b5(p);b.tr.setRoll(y.roll),b.tr.setPitch(y.pitch),b.tr.setBearing(y.bearing)}else b.tr.setRoll(b.endEulerAngles.roll),b.tr.setPitch(b.endEulerAngles.pitch),b.tr.setBearing(b.endEulerAngles.bearing);else b.tr.setRoll(o.B.number(b.startEulerAngles.roll,b.endEulerAngles.roll,b.k)),b.tr.setPitch(o.B.number(b.startEulerAngles.pitch,b.endEulerAngles.pitch,b.k)),b.tr.setBearing(o.B.number(b.startEulerAngles.bearing,b.endEulerAngles.bearing,b.k))}function Jo(b,r,c,p,y){const A=y.padding,T=un(y.worldSize,c.getNorthWest()),L=un(y.worldSize,c.getNorthEast()),N=un(y.worldSize,c.getSouthEast()),$=un(y.worldSize,c.getSouthWest()),J=o.ab(-p),it=T.rotate(J),ot=L.rotate(J),ft=N.rotate(J),bt=$.rotate(J),Ft=new o.P(Math.max(it.x,ot.x,bt.x,ft.x),Math.max(it.y,ot.y,bt.y,ft.y)),Ot=new o.P(Math.min(it.x,ot.x,bt.x,ft.x),Math.min(it.y,ot.y,bt.y,ft.y)),jt=Ft.sub(Ot),Wt=(y.width-(A.left+A.right+r.left+r.right))/jt.x,Jt=(y.height-(A.top+A.bottom+r.top+r.bottom))/jt.y;if(Jt<0||Wt<0)return void xi();const re=Math.min(o.ah(y.scale*Math.min(Wt,Jt)),b.maxZoom),se=o.P.convert(b.offset),fe=new o.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(o.ab(p)),le=se.add(fe).mult(y.scale/o.ac(re));return{center:Nn(y.worldSize,T.add(N).div(2).sub(le)),zoom:re,bearing:p}}class nu{get useGlobeControls(){return!1}handlePanInertia(r,c){return{easingOffset:r,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(r,c){r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta),r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta)}handleMapControlsPan(r,c,p){r.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(p,r.around)}cameraForBoxAndBearing(r,c,p,y,A){return Jo(r,c,p,y,A)}handleJumpToCenterZoom(r,c){r.zoom!==(c.zoom!==void 0?+c.zoom:r.zoom)&&r.setZoom(+c.zoom),c.center!==void 0&&r.setCenter(o.Q.convert(c.center))}handleEaseTo(r,c){const p=r.zoom,y=r.padding,A={roll:r.roll,pitch:r.pitch,bearing:r.bearing},T={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},L=c.zoom!==void 0,N=!r.isPaddingEqual(c.padding);let $=!1;const J=L?+c.zoom:r.zoom;let it=r.centerPoint.add(c.offsetAsPoint);const ot=r.screenPointToLocation(it),{center:ft,zoom:bt}=r.getConstrained(o.Q.convert(c.center||ot),J??p);Kn(r,ft);const Ft=un(r.worldSize,ot),Ot=un(r.worldSize,ft).sub(Ft),jt=o.ac(bt-p);return $=bt!==p,{easeFunc:Wt=>{if($&&r.setZoom(o.B.number(p,bt,Wt)),o.b6(A,T)||gi({startEulerAngles:A,endEulerAngles:T,tr:r,k:Wt,useSlerp:A.roll!=T.roll}),N&&(r.interpolatePadding(y,c.padding,Wt),it=r.centerPoint.add(c.offsetAsPoint)),c.around)r.setLocationAtPoint(c.around,c.aroundPoint);else{const Jt=o.ac(r.zoom-p),re=bt>p?Math.min(2,jt):Math.max(.5,jt),se=Math.pow(re,1-Wt),fe=Nn(r.worldSize,Ft.add(Ot.mult(Wt*se)).mult(Jt));r.setLocationAtPoint(r.renderWorldCopies?fe.wrap():fe,it)}},isZooming:$,elevationCenter:ft}}handleFlyTo(r,c){const p=c.zoom!==void 0,y=r.zoom,A=r.getConstrained(o.Q.convert(c.center||c.locationAtOffset),p?+c.zoom:y),T=A.center,L=A.zoom;Kn(r,T);const N=un(r.worldSize,c.locationAtOffset),$=un(r.worldSize,T).sub(N),J=$.mag(),it=o.ac(L-y);let ot;if(c.minZoom!==void 0){const ft=Math.min(+c.minZoom,y,L),bt=r.getConstrained(T,ft).zoom;ot=o.ac(bt-y)}return{easeFunc:(ft,bt,Ft,Ot)=>{r.setZoom(ft===1?L:y+o.ah(bt));const jt=ft===1?T:Nn(r.worldSize,N.add($.mult(Ft)).mult(bt));r.setLocationAtPoint(r.renderWorldCopies?jt.wrap():jt,Ot)},scaleOfZoom:it,targetCenter:T,scaleOfMinZoom:ot,pixelPathLength:J}}}class ur{constructor(r,c,p){this.blendFunction=r,this.blendColor=c,this.mask=p}}ur.Replace=[1,0],ur.disabled=new ur(ur.Replace,o.b7.transparent,[!1,!1,!1,!1]),ur.unblended=new ur(ur.Replace,o.b7.transparent,[!0,!0,!0,!0]),ur.alphaBlended=new ur([1,771],o.b7.transparent,[!0,!0,!0,!0]);const Wu=2305;class Wr{constructor(r,c,p){this.enable=r,this.mode=c,this.frontFace=p}}Wr.disabled=new Wr(!1,1029,Wu),Wr.backCCW=new Wr(!0,1029,Wu),Wr.frontCCW=new Wr(!0,1028,Wu);class Fn{constructor(r,c,p){this.func=r,this.mask=c,this.range=p}}Fn.ReadOnly=!1,Fn.ReadWrite=!0,Fn.disabled=new Fn(519,Fn.ReadOnly,[0,1]);const Xr=7680;class Dr{constructor(r,c,p,y,A,T){this.test=r,this.ref=c,this.mask=p,this.fail=y,this.depthFail=A,this.pass=T}}Dr.disabled=new Dr({func:519,mask:0},0,0,Xr,Xr,Xr);const Cc=new WeakMap;function ca(b){var r;if(Cc.has(b))return Cc.get(b);{const c=(r=b.getParameter(b.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Cc.set(b,c),c}}class Ol{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const c=r.context,p=c.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const y=new o.aI;y.emplaceBack(-1,-1),y.emplaceBack(2,-1),y.emplaceBack(-1,2);const A=new o.aK;A.emplaceBack(0,1,2),this._fullscreenTriangle=new _e(c.createVertexBuffer(y,cn.members),c.createIndexBuffer(A),o.aJ.simpleSegment(0,0,y.length,A.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(p.TEXTURE1);const T=p.createTexture();p.bindTexture(p.TEXTURE_2D,T),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(T),ca(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,c){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,c=r.gl;r.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,c){const p=this._cachedRenderContext.context,y=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:o.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,y.TRIANGLES,Fn.disabled,Dr.disabled,ur.unblended,Wr.disabled,((A,T)=>({u_input:A,u_output_expected:T}))(r,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ca(y)){y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.readBuffer(y.COLOR_ATTACHMENT0),y.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),y.bindBuffer(y.PIXEL_PACK_BUFFER,null);const A=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0);y.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:A}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ca(r)){const c=r.clientWaitSync(this._readbackQueue.sync,0,0);if(c===r.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ol._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let c=0;return c+=r[0]/256,c+=r[1]/65536,c+=r[2]/16777216,r[3]<127&&(c=-c),c/128}}const ru=o.Z/128;function qu(b,r){const c=b.granularity!==void 0?Math.max(b.granularity,1):1,p=c+(b.generateBorders?2:0),y=c+(b.extendToNorthPole||b.generateBorders?1:0)+(b.extendToSouthPole||b.generateBorders?1:0),A=p+1,T=y+1,L=b.generateBorders?-1:0,N=b.generateBorders||b.extendToNorthPole?-1:0,$=c+(b.generateBorders?1:0),J=c+(b.generateBorders||b.extendToSouthPole?1:0),it=A*T,ot=p*y*6,ft=A*T>65536;if(ft&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const bt=ft||r==="32bit",Ft=new Int16Array(2*it);let Ot=0;for(let Jt=N;Jt<=J;Jt++)for(let re=L;re<=$;re++){let se=re/c*o.Z;re===-1&&(se=-64),re===c+1&&(se=o.Z+ru);let fe=Jt/c*o.Z;Jt===-1&&(fe=b.extendToNorthPole?o.b9:-64),Jt===c+1&&(fe=b.extendToSouthPole?o.ba:o.Z+ru),Ft[Ot++]=se,Ft[Ot++]=fe}const jt=bt?new Uint32Array(ot):new Uint16Array(ot);let Wt=0;for(let Jt=0;Jt<y;Jt++)for(let re=0;re<p;re++){const se=re+1+Jt*A,fe=re+(Jt+1)*A,le=re+1+(Jt+1)*A;jt[Wt++]=re+Jt*A,jt[Wt++]=fe,jt[Wt++]=se,jt[Wt++]=se,jt[Wt++]=fe,jt[Wt++]=le}return{vertices:Ft.buffer.slice(0),indices:jt.buffer.slice(0),uses32bitIndices:bt}}const zl=new o.aH({fill:new o.bb(128,2),line:new o.bb(512,0),tile:new o.bb(128,32),stencil:new o.bb(128,1),circle:3});class iu{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Zt.projectionGlobe}get vertexShaderPreludeCode(){return Zt.projectionMercator.vertexSource}get subdivisionGranularity(){return zl}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new Ol(r));const c=o.S(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,y=this._errorMeasurement.updateErrorLoop(c,p),A=E.now();y!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=y,this._errorMeasurementLastChangeTime=A);const T=Math.min(Math.max((A-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bd(T))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,c,p,y,A){const T=(A==="stencil"?zl.stencil:zl.tile).getGranularityForZoomLevel(c.z);return this._getMesh(r,{granularity:T,generateBorders:p,extendToNorthPole:c.y===0&&y,extendToSouthPole:c.y===(1<<c.z)-1&&y})}_getMesh(r,c){const p=this._getMeshKey(c);if(p in this._tileMeshCache)return this._tileMeshCache[p];const y=function(A,T){const L=qu(T,"16bit"),N=o.aI.deserialize({arrayBuffer:L.vertices,length:L.vertices.byteLength/2/2}),$=o.aK.deserialize({arrayBuffer:L.indices,length:L.indices.byteLength/2/3});return new _e(A.createVertexBuffer(N,cn.members),A.createIndexBuffer($),o.aJ.simpleSegment(0,0,N.length,$.length))}(r,c);return this._tileMeshCache[p]=y,y}recalculate(r){}hasTransition(){const r=E.now();let c=!1;return c=c||(r-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const Fi=new o.r({type:new o.D(o.v.projection.type)});class ou extends o.E{constructor(r){super(),this._transitionable=new o.T(Fi),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0)),this._mercatorProjection=new gn,this._verticalPerspectiveProjection=new iu}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof o.be){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,c,p,y,A){return this.currentProjection.getMeshFromTileID(r,c,p,y,A)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Ha(b){const r=ro(b.worldSize,b.center.lat);return 2*Math.PI*r}function Fl(b,r,c,p,y){const A=1/(1<<y),T=r/o.Z*A+p*A,L=o.bg((b/o.Z*A+c*A)*Math.PI*2+Math.PI,2*Math.PI),N=2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI,$=Math.cos(N),J=new Float64Array(3);return J[0]=Math.sin(L)*$,J[1]=Math.sin(N),J[2]=Math.cos(L)*$,J}function no(b){return function(r,c){const p=Math.cos(c),y=new Float64Array(3);return y[0]=Math.sin(r)*p,y[1]=Math.sin(c),y[2]=Math.cos(r)*p,y}(b.lng*Math.PI/180,b.lat*Math.PI/180)}function ro(b,r){return b/(2*Math.PI)/Math.cos(r*Math.PI/180)}function _o(b){const r=Math.asin(b[1])/Math.PI*180,c=Math.sqrt(b[0]*b[0]+b[2]*b[2]);if(c>1e-6){const p=b[0]/c,y=Math.acos(b[2]/c),A=(p>0?y:-y)/Math.PI*180;return new o.Q(o.aL(A,-180,180),r)}return new o.Q(0,r)}function nl(b){return Math.cos(b*Math.PI/180)}function Br(b,r){const c=nl(b),p=nl(r);return o.ah(p/c)}function Bl(b,r){const c=b.rotate(r.bearingInRadians),p=r.zoom+Br(r.center.lat,0),y=o.bc(1/nl(r.center.lat),1/nl(Math.min(Math.abs(r.center.lat),60)),o.bf(p,7,3,0,1)),A=360/Ha({worldSize:r.worldSize,center:{lat:r.center.lat}});return new o.Q(r.center.lng-c.x*A*y,o.ae(r.center.lat+c.y*A,-85.051129,o.af))}function Ic(b){const r=.5*b,c=Math.sin(r),p=Math.cos(r);return Math.log(c+p)-Math.log(p-c)}function Ku(b,r,c,p){const y=b.lat+c*p;if(Math.abs(c)>1){const A=(Math.sign(b.lat+c)!==Math.sign(b.lat)?-Math.abs(b.lat):Math.abs(b.lat))*Math.PI/180,T=Math.abs(b.lat+c)*Math.PI/180,L=Ic(A+p*(T-A)),N=Ic(A),$=Ic(T);return new o.Q(b.lng+r*((L-N)/($-N)),y)}return new o.Q(b.lng+r*p,y)}class Xi{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=r}recalculateCache(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(r,c,p,y){const A=`${r.z}_${r.x}_${r.y}`,T=this._cache.get(A);if(T)return T;const L=this._cachePrevious.get(A);if(L)return this._cache.set(A,L),L;const N=this._aabbFactory(r,c,p,y);return this._cache.set(A,N),this._hadAnyChanges=!0,N}}function Nl(b,r,c){const p=b-r;return p<0?-p:Math.max(0,p-c)}function Ho(b,r,c,p,y){const A=b-c;let T;return T=A<0?Math.min(-A,1+A-y):A>1?Math.min(Math.max(A-y,0),1-A):0,Math.max(T,Nl(r,p,y))}class Cd{constructor(){this._aabbCache=new Xi(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(r,c,p,y){const A=1<<p.z,T=1/A,L=p.x/A,N=p.y/A;let $=2;return $=Math.min($,Ho(r,c,L,N,T)),$=Math.min($,Ho(r,c,L+.5,-N-T,T)),$=Math.min($,Ho(r,c,L+.5,2-N-T,T)),$}getWrap(r,c,p){const y=1<<c.z,A=1/y,T=c.x/y,L=Nl(r.x,T,A),N=Nl(r.x,T-1,A),$=Nl(r.x,T+1,A),J=Math.min(L,N,$);return J===$?1:J===N?-1:0}allowVariableZoom(r,c){return he(r,c)>4}allowWorldCopies(){return!1}getTileAABB(r,c,p,y){return this._aabbCache.getTileAABB(r,c,p,y)}_computeTileAABB(r,c,p,y){if(r.z<=0)return new ai([-1,-1,-1],[1,1,1]);if(r.z===1)return new ai([r.x===0?-1:0,r.y===0?0:-1,-1],[r.x===0?0:1,r.y===0?1:0,1]);{const A=[Fl(0,0,r.x,r.y,r.z),Fl(o.Z,0,r.x,r.y,r.z),Fl(o.Z,o.Z,r.x,r.y,r.z),Fl(0,o.Z,r.x,r.y,r.z)],T=[1,1,1],L=[-1,-1,-1];for(const N of A)for(let $=0;$<3;$++)T[$]=Math.min(T[$],N[$]),L[$]=Math.max(L[$],N[$]);if(r.y===0||r.y===(1<<r.z)-1){const N=[0,r.y===0?1:-1,0];for(let $=0;$<3;$++)T[$]=Math.min(T[$],N[$]),L[$]=Math.max(L[$],N[$])}return new ai(T,L)}}}class au{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,p){return this._helper.interpolatePadding(r,c,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c){this._helper.resize(r,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=o.bk(),this._projectionMatrix=o.b1(),this._globeViewProjMatrix32f=o.b0(),this._globeViewProjMatrixNoCorrection=o.b1(),this._globeViewProjMatrixNoCorrectionInverted=o.b1(),this._globeProjMatrixInverted=o.b1(),this._cameraPosition=o.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new or({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._coveringTilesDetailsProvider=new Cd}clone(){const r=new au;return r.apply(this),r}apply(r,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=o.bh();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:c,applyGlobeMatrix:p}=r,y=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:y,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const c=this.pitchInRadians,p=this.cameraToCenterDistance/r,y=Math.sin(c)*p,A=Math.cos(c)*p+1,T=1/Math.sqrt(y*y+A*A)*1;let L=-y,N=A;const $=Math.sqrt(L*L+N*N);L/=$,N/=$;const J=[0,L,N];o.bl(J,J,[0,0,0],-this.bearingInRadians),o.bm(J,J,[0,0,0],-1*this.center.lat*Math.PI/180),o.bn(J,J,[0,0,0],this.center.lng*Math.PI/180);const it=1/o.bo(J);return o.aO(J,J,it),[...J,-T*it]}isLocationOccluded(r){return!this.isSurfacePointVisible(no(r))}transformLightDirection(r){const c=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,y=Math.cos(p),A=[Math.sin(c)*y,Math.sin(p),Math.cos(c)*y],T=[A[2],0,-A[0]],L=[0,0,0];o.aU(L,T,A),o.aT(T,T),o.aT(L,L);const N=[0,0,0];return o.aT(N,[T[0]*r[0]+L[0]*r[1]+A[0]*r[2],T[1]*r[0]+L[1]*r[1]+A[1]*r[2],T[2]*r[0]+L[2]*r[1]+A[2]*r[2]]),N}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,c,p){const y=function(L,N,$){const J=1/(1<<$.z);return new o.$(L/o.Z*J+$.x*J,N/o.Z*J+$.y*J)}(r,c,p.canonical),A=(T=y.y,[o.bg(y.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI]);var T;return this.getCircleRadiusCorrection()/Math.cos(A[1])}projectTileCoordinates(r,c,p,y){const A=p.canonical,T=Fl(r,c,A.x,A.y,A.z),L=1+(y?y(r,c):0)/o.bu,N=[T[0]*L,T[1]*L,T[2]*L,1];o.at(N,N,this._globeViewProjMatrixNoCorrection);const $=this._cachedClippingPlane,J=$[0]*T[0]+$[1]*T[1]+$[2]*T[2]+$[3]<0;return{point:new o.P(N[0]/N[3],N[1]/N[3]),signedDistanceFromCamera:N[3],isOccluded:J}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=ro(this.worldSize,this.center.lat),c=o.b2(),p=o.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),o.aY(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const y=this.centerOffset;c[8]=2*-y.x/this._helper._width,c[9]=2*y.y/this._helper._height,this._projectionMatrix=o.aZ(c),this._globeProjMatrixInverted=o.b2(),o.an(this._globeProjMatrixInverted,c),o.L(c,c,[0,0,-this.cameraToCenterDistance]),o.a_(c,c,this.rollInRadians),o.a$(c,c,-this.pitchInRadians),o.a_(c,c,this.bearingInRadians),o.L(c,c,[0,0,-r]);const A=o.bh();A[0]=r,A[1]=r,A[2]=r,o.a$(p,c,this.center.lat*Math.PI/180),o.bp(p,p,-this.center.lng*Math.PI/180),o.M(p,p,A),this._globeViewProjMatrixNoCorrection=p,o.a$(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bp(c,c,-this.center.lng*Math.PI/180),o.M(c,c,A),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.b2(),o.an(this._globeViewProjMatrixNoCorrectionInverted,p);const T=o.bh();this._cameraPosition=o.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/r,o.bl(this._cameraPosition,this._cameraPosition,T,-this.rollInRadians),o.bm(this._cameraPosition,this._cameraPosition,T,this.pitchInRadians),o.bl(this._cameraPosition,this._cameraPosition,T,-this.bearingInRadians),o.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bm(this._cameraPosition,this._cameraPosition,T,-this.center.lat*Math.PI/180),o.bn(this._cameraPosition,this._cameraPosition,T,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const L=o.aZ(this._globeViewProjMatrixNoCorrectionInverted);o.M(L,L,[1,1,-1]),this._cachedFrustum=kn.fromInvProjectionMatrix(L)}calculateFogMatrix(r){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.b2();return o.ad(c),c}getVisibleUnwrappedCoordinates(r){return[new o.aW(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=no(r);o.aO(p,p,1+c/o.bu);const y=o.bk();return o.at(y,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),y[2]/y[3]}populateCache(r){}getBounds(){const r=.5*this.width,c=.5*this.height,p=[new o.P(0,0),new o.P(r,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(r,this.height),new o.P(0,this.height),new o.P(0,c)],y=[];for(const it of p)y.push(this.unprojectScreenPoint(it));let A=0,T=0,L=0,N=0;const $=this.center;for(const it of y){const ot=o.bq($.lng,it.lng),ft=o.bq($.lat,it.lat);ot<T&&(T=ot),ot>A&&(A=ot),ft<N&&(N=ft),ft>L&&(L=ft)}const J=[$.lng+T,$.lat+N,$.lng+A,$.lat+L];return this.isSurfacePointOnScreen([0,1,0])&&(J[3]=90,J[0]=-180,J[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(J[1]=-90,J[0]=-180,J[2]=180),new H(J)}getConstrained(r,c){const p=o.ae(r.lat,-85.051129,o.af),y=o.ae(+c,this.minZoom+Br(0,p),this.maxZoom);return{center:new o.Q(r.lng,p),zoom:y}}calculateCenterFromCameraLngLatAlt(r,c,p,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,p,y)}setLocationAtPoint(r,c){const p=no(this.unprojectScreenPoint(c)),y=no(r),A=o.bh();o.br(A);const T=o.bh();o.bn(T,p,A,-this.center.lng*Math.PI/180),o.bm(T,T,A,this.center.lat*Math.PI/180);const L=y[0]*y[0]+y[2]*y[2],N=T[0]*T[0];if(L<N)return;const $=Math.sqrt(L-N),J=-$,it=o.bs(y[0],y[2],T[0],$),ot=o.bs(y[0],y[2],T[0],J),ft=o.bh();o.bn(ft,y,A,-it);const bt=o.bs(ft[1],ft[2],T[1],T[2]),Ft=o.bh();o.bn(Ft,y,A,-ot);const Ot=o.bs(Ft[1],Ft[2],T[1],T[2]),jt=.5*Math.PI,Wt=bt>=-jt&&bt<=jt,Jt=Ot>=-jt&&Ot<=jt;let re,se;if(Wt&&Jt){const De=this.center.lng*Math.PI/180,Ee=this.center.lat*Math.PI/180;o.bv(it,De)+o.bv(bt,Ee)<o.bv(ot,De)+o.bv(Ot,Ee)?(re=it,se=bt):(re=ot,se=Ot)}else if(Wt)re=it,se=bt;else{if(!Jt)return;re=ot,se=Ot}const fe=re/Math.PI*180,le=se/Math.PI*180,ke=this.center.lat;this.setCenter(new o.Q(fe,o.ae(le,-90,90))),this.setZoom(this.zoom+Br(ke,this.center.lat))}locationToScreenPoint(r,c){const p=no(r);if(c){const y=c.getElevationForLngLatZoom(r,this._helper._tileZoom);o.aO(p,p,1+y/o.bu)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(r){const c=o.bk();return o.at(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,c){if(c){const p=c.pointCoordinate(r);if(p)return p}return o.$.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,c){var p;return(p=this.screenPointToMercatorCoordinate(r,c))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(r,c){const p=this._cameraPosition,y=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(p,y)}getRayDirectionFromPixel(r){const c=o.bk();c[0]=r.x/this.width*2-1,c[1]=-1*(r.y/this.height*2-1),c[2]=1,c[3]=1,o.at(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const p=o.bh();p[0]=c[0]-this._cameraPosition[0],p[1]=c[1]-this._cameraPosition[1],p[2]=c[2]-this._cameraPosition[2];const y=o.bh();return o.aT(y,p),y}isSurfacePointVisible(r){const c=this._cachedClippingPlane;return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]+c[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const c=o.bk();return o.at(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(r,c){const p=o.aV(r,c),y=o.bh(),A=o.bh();o.aO(A,c,p),o.aS(y,r,A);const T=1-o.aV(y,y);if(T<0)return null;const L=o.aV(r,r)-1,N=-p+(p<0?1:-1)*Math.sqrt(T),$=L/N,J=N;return{tMin:Math.min($,J),tMax:Math.max($,J)}}unprojectScreenPoint(r){const c=this._cameraPosition,p=this.getRayDirectionFromPixel(r),y=this.rayPlanetIntersection(c,p);if(y){const J=o.bh();o.aP(J,c,[p[0]*y.tMin,p[1]*y.tMin,p[2]*y.tMin]);const it=o.bh();return o.aT(it,J),_o(it)}const A=this._cachedClippingPlane,T=A[0]*p[0]+A[1]*p[1]+A[2]*p[2],L=-o.bt(A,c)/T,N=o.bh();if(L>0)o.aP(N,c,[p[0]*L,p[1]*L,p[2]*L]);else{const J=o.bh();o.aP(J,c,[2*p[0],2*p[1],2*p[2]]);const it=o.bt(this._cachedClippingPlane,J);o.aS(N,J,[this._cachedClippingPlane[0]*it,this._cachedClippingPlane[1]*it,this._cachedClippingPlane[2]*it])}const $=function(J){const it=o.bh();return it[0]=J[0]*-J[3],it[1]=J[1]*-J[3],it[2]=J[2]*-J[3],{center:it,radius:Math.sqrt(1-J[3]*J[3])}}(A);return _o(function(J,it,ot){const ft=o.bh();o.aS(ft,ot,J);const bt=o.bh();return o.bi(bt,J,ft,it/o.bj(ft)),bt}($.center,$.radius,N))}getMatrixForModel(r,c){const p=o.Q.convert(r),y=1/o.bu,A=o.b1();return o.bp(A,A,p.lng/180*Math.PI),o.a$(A,A,-p.lat/180*Math.PI),o.L(A,A,[0,0,1+c/o.bu]),o.a$(A,A,.5*Math.PI),o.M(A,A,[y,y,y]),A}getProjectionDataForCustomLayer(r=!0){const c=this.getProjectionData({overscaledTileID:new o.Y(0,0,0,0,0),applyGlobeMatrix:r});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(r){}}class bo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,p){return this._helper.interpolatePadding(r,c,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,p=!0){this._helper.resize(r,c,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,c){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new or({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._globeness=1,this._mercatorTransform=new Rr,this._verticalPerspectiveTransform=new au}clone(){const r=new bo;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const c=this._mercatorTransform.getProjectionData(r),p=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:c.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return o.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,c,p){const y=this._mercatorTransform.getPitchedTextCorrection(r,c,p),A=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,c,p);return o.bc(y,A,this._globeness)}projectTileCoordinates(r,c,p,y){return this.currentTransform.projectTileCoordinates(r,c,p,y)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){return this.currentTransform.lngLatToCameraDepth(r,c)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,c){return this.currentTransform.getConstrained(r,c)}calculateCenterFromCameraLngLatAlt(r,c,p,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,p,y)}setLocationAtPoint(r,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,c){return this.currentTransform.locationToScreenPoint(r,c)}screenPointToMercatorCoordinate(r,c){return this.currentTransform.screenPointToMercatorCoordinate(r,c)}screenPointToLocation(r,c){return this.currentTransform.screenPointToLocation(r,c)}isPointOnMapSurface(r,c){return this.currentTransform.isPointOnMapSurface(r,c)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,c){return this.currentTransform.getMatrixForModel(r,c)}getProjectionDataForCustomLayer(r=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return c;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return p.fallbackMatrix=c.mainMatrix,p}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class $o{get useGlobeControls(){return!0}handlePanInertia(r,c){const p=Bl(r,c);return Math.abs(p.lng-c.center.lng)>180&&(p.lng=c.center.lng+179.5*Math.sign(p.lng-c.center.lng)),{easingCenter:p,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,c){const p=r.around,y=c.screenPointToLocation(p);r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta);const A=c.zoom;r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta);const T=c.zoom-A;if(T===0)return;const L=o.bq(c.center.lng,y.lng),N=L/(Math.abs(L/180)+1),$=o.bq(c.center.lat,y.lat),J=c.getRayDirectionFromPixel(p),it=c.cameraPosition,ot=-1*o.aV(it,J),ft=o.bh();o.aP(ft,it,[J[0]*ot,J[1]*ot,J[2]*ot]);const bt=o.bo(ft)-1,Ft=Math.exp(.5*-Math.max(bt-.3,0)),Ot=ro(c.worldSize,c.center.lat)/Math.min(c.width,c.height),jt=o.bf(Ot,.9,.5,1,.25),Wt=(1-o.ac(-T))*Math.min(Ft,jt),Jt=c.center.lat,re=c.zoom,se=new o.Q(c.center.lng+N*Wt,o.ae(c.center.lat+$*Wt,-85.051129,o.af));c.setLocationAtPoint(y,p);const fe=c.center,le=o.bf(Math.abs(L),45,85,0,1),ke=o.bf(Ot,.75,.35,0,1),De=Math.pow(Math.max(le,ke),.25),Ee=o.bq(fe.lng,se.lng),Qe=o.bq(fe.lat,se.lat);c.setCenter(new o.Q(fe.lng+Ee*De,fe.lat+Qe*De).wrap()),c.setZoom(re+Br(Jt,c.center.lat))}handleMapControlsPan(r,c,p){if(!r.panDelta)return;const y=c.center.lat,A=c.zoom;c.setCenter(Bl(r.panDelta,c).wrap()),c.setZoom(A+Br(y,c.center.lat))}cameraForBoxAndBearing(r,c,p,y,A){const T=Jo(r,c,p,y,A),L=c.left/A.width*2-1,N=(A.width-c.right)/A.width*2-1,$=c.top/A.height*-2+1,J=(A.height-c.bottom)/A.height*-2+1,it=o.bq(p.getWest(),p.getEast())<0,ot=it?p.getEast():p.getWest(),ft=it?p.getWest():p.getEast(),bt=Math.max(p.getNorth(),p.getSouth()),Ft=Math.min(p.getNorth(),p.getSouth()),Ot=ot+.5*o.bq(ot,ft),jt=bt+.5*o.bq(bt,Ft),Wt=A.clone();Wt.setCenter(T.center),Wt.setBearing(T.bearing),Wt.setPitch(0),Wt.setRoll(0),Wt.setZoom(T.zoom);const Jt=Wt.modelViewProjectionMatrix,re=[no(p.getNorthWest()),no(p.getNorthEast()),no(p.getSouthWest()),no(p.getSouthEast()),no(new o.Q(ft,jt)),no(new o.Q(ot,jt)),no(new o.Q(Ot,bt)),no(new o.Q(Ot,Ft))],se=no(T.center);let fe=Number.POSITIVE_INFINITY;for(const le of re)L<0&&(fe=$o.getLesserNonNegativeNonNull(fe,$o.solveVectorScale(le,se,Jt,"x",L))),N>0&&(fe=$o.getLesserNonNegativeNonNull(fe,$o.solveVectorScale(le,se,Jt,"x",N))),$>0&&(fe=$o.getLesserNonNegativeNonNull(fe,$o.solveVectorScale(le,se,Jt,"y",$))),J<0&&(fe=$o.getLesserNonNegativeNonNull(fe,$o.solveVectorScale(le,se,Jt,"y",J)));if(Number.isFinite(fe)&&fe!==0)return T.zoom=Wt.zoom+o.ah(fe),T;xi()}handleJumpToCenterZoom(r,c){const p=r.center.lat,y=r.getConstrained(c.center?o.Q.convert(c.center):r.center,r.zoom).center;r.setCenter(y.wrap());const A=c.zoom!==void 0?+c.zoom:r.zoom+Br(p,y.lat);r.zoom!==A&&r.setZoom(A)}handleEaseTo(r,c){const p=r.zoom,y=r.center,A=r.padding,T={roll:r.roll,pitch:r.pitch,bearing:r.bearing},L={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},N=c.zoom!==void 0,$=!r.isPaddingEqual(c.padding);let J=!1;const it=c.center?o.Q.convert(c.center):y,ot=r.getConstrained(it,p).center;Kn(r,ot);const ft=r.clone();ft.setCenter(ot),ft.setZoom(N?+c.zoom:p+Br(y.lat,it.lat)),ft.setBearing(c.bearing);const bt=new o.P(o.ae(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),o.ae(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));ft.setLocationAtPoint(ot,bt);const Ft=(c.offset&&c.offsetAsPoint.mag())>0?ft.center:ot,Ot=N?+c.zoom:p+Br(y.lat,Ft.lat),jt=p+Br(y.lat,0),Wt=Ot+Br(Ft.lat,0),Jt=o.bq(y.lng,Ft.lng),re=o.bq(y.lat,Ft.lat),se=o.ac(Wt-jt);return J=Ot!==p,{easeFunc:fe=>{if(o.b6(T,L)||gi({startEulerAngles:T,endEulerAngles:L,tr:r,k:fe,useSlerp:T.roll!=L.roll}),$&&r.interpolatePadding(A,c.padding,fe),c.around)o.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(c.around,c.aroundPoint);else{const le=Wt>jt?Math.min(2,se):Math.max(.5,se),ke=Math.pow(le,1-fe),De=Ku(y,Jt,re,fe*ke);r.setCenter(De.wrap())}if(J){const le=o.B.number(jt,Wt,fe)+Br(0,r.center.lat);r.setZoom(le)}},isZooming:J,elevationCenter:Ft}}handleFlyTo(r,c){const p=c.zoom!==void 0,y=r.center,A=r.zoom,T=r.padding,L=!r.isPaddingEqual(c.padding),N=r.getConstrained(o.Q.convert(c.center||c.locationAtOffset),A).center,$=p?+c.zoom:r.zoom+Br(r.center.lat,N.lat),J=r.clone();J.setCenter(N),J.setZoom($),J.setBearing(c.bearing);const it=new o.P(o.ae(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),o.ae(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));J.setLocationAtPoint(N,it);const ot=J.center;Kn(r,ot);const ft=function(re,se,fe){const le=no(se),ke=no(fe),De=o.aV(le,ke),Ee=Math.acos(De),Qe=Ha(re);return Ee/(2*Math.PI)*Qe}(r,y,ot),bt=A+Br(y.lat,0),Ft=$+Br(ot.lat,0),Ot=o.ac(Ft-bt);let jt;if(typeof c.minZoom=="number"){const re=+c.minZoom+Br(ot.lat,0),se=Math.min(re,bt,Ft)+Br(0,ot.lat),fe=r.getConstrained(ot,se).zoom+Br(ot.lat,0);jt=o.ac(fe-bt)}const Wt=o.bq(y.lng,ot.lng),Jt=o.bq(y.lat,ot.lat);return{easeFunc:(re,se,fe,le)=>{const ke=Ku(y,Wt,Jt,fe);L&&r.interpolatePadding(T,c.padding,re);const De=re===1?ot:ke;r.setCenter(De.wrap());const Ee=bt+o.ah(se);r.setZoom(re===1?$:Ee+Br(0,De.lat))},scaleOfZoom:Ot,targetCenter:ot,scaleOfMinZoom:jt,pixelPathLength:ft}}static solveVectorScale(r,c,p,y,A){const T=y==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],L=[p[3],p[7],p[11],p[15]],N=r[0]*T[0]+r[1]*T[1]+r[2]*T[2],$=r[0]*L[0]+r[1]*L[1]+r[2]*L[2],J=c[0]*T[0]+c[1]*T[1]+c[2]*T[2],it=c[0]*L[0]+c[1]*L[1]+c[2]*L[2];return J+A*$===N+A*it||L[3]*(N-J)+T[3]*(it-$)+N*it==J*$?null:(J+T[3]-A*it-A*L[3])/(J-N-A*it+A*$)}static getLesserNonNegativeNonNull(r,c){return c!==null&&c>=0&&c<r?c:r}}class jl{constructor(r){this._globe=r,this._mercatorCameraHelper=new nu,this._verticalPerspectiveCameraHelper=new $o}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,c){return this.currentHelper.handlePanInertia(r,c)}handleMapControlsRollPitchBearingZoom(r,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,c)}handleMapControlsPan(r,c,p){this.currentHelper.handleMapControlsPan(r,c,p)}cameraForBoxAndBearing(r,c,p,y,A){return this.currentHelper.cameraForBoxAndBearing(r,c,p,y,A)}handleJumpToCenterZoom(r,c){this.currentHelper.handleJumpToCenterZoom(r,c)}handleEaseTo(r,c){return this.currentHelper.handleEaseTo(r,c)}handleFlyTo(r,c){return this.currentHelper.handleFlyTo(r,c)}}const ii=(b,r)=>o.x(b,r&&r.filter(c=>c.identifier!=="source.canvas")),ua=o.bw();class $a extends o.E{constructor(r,c={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const y=this.sourceCaches[p].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[p].reload()}},this.map=r,this.dispatcher=new be(nn(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,y)=>this.getGlyphs(p,y)),this.dispatcher.registerMessageHandler("GI",(p,y)=>this.getImages(p,y)),this.imageManager=new at,this.imageManager.setEventedParent(this),this.glyphManager=new q(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new en(256,512),this.crossTileSymbolIndex=new At,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.by()),Cn().on(Le,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const y=this.sourceCaches[p.sourceId];if(!y)return;const A=y.getSource();if(A&&A.vectorLayerIds)for(const T in this._layers){const L=this._layers[T];L.source===A.id&&this._validateLayer(L)}})}loadURL(r,c={},p){this.fire(new o.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const y=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const A=this._loadStyleRequest;o.j(y,this._loadStyleRequest).then(T=>{this._loadStyleRequest=null,this._load(T.data,c,p)}).catch(T=>{this._loadStyleRequest=null,T&&!A.signal.aborted&&this.fire(new o.k(T))})}loadJSON(r,c={},p){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,E.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,p)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(ua,{validate:!1})}_load(r,c,p){var y,A;const T=c.transformStyle?c.transformStyle(p,r):r;if(!c.validate||!ii(this,o.y(T))){this._loaded=!0,this.stylesheet=T;for(const L in T.sources)this.addSource(L,T.sources[L],{validate:!1});T.sprite?this._loadSprite(T.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(T.glyphs),this._createLayers(),this.light=new Bt(this.stylesheet.light),this._setProjectionInternal(((y=this.stylesheet.projection)===null||y===void 0?void 0:y.type)||"mercator"),this.sky=new ge(this.stylesheet.sky),this.map.setTerrain((A=this.stylesheet.terrain)!==null&&A!==void 0?A:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){const r=o.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of r){const p=o.bA(c);p.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=p}}_loadSprite(r,c=!1,p=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(A,T,L,N){return o._(this,void 0,void 0,function*(){const $=nt(A),J=L>1?"@2x":"",it={},ot={};for(const{id:ft,url:bt}of $){const Ft=T.transformRequest(X(bt,J,".json"),"SpriteJSON");it[ft]=o.j(Ft,N);const Ot=T.transformRequest(X(bt,J,".png"),"SpriteImage");ot[ft]=G.getImage(Ot,N)}return yield Promise.all([...Object.values(it),...Object.values(ot)]),function(ft,bt){return o._(this,void 0,void 0,function*(){const Ft={};for(const Ot in ft){Ft[Ot]={};const jt=E.getImageCanvasContext((yield bt[Ot]).data),Wt=(yield ft[Ot]).data;for(const Jt in Wt){const{width:re,height:se,x:fe,y:le,sdf:ke,pixelRatio:De,stretchX:Ee,stretchY:Qe,content:$e,textFitWidth:In,textFitHeight:yn}=Wt[Jt];Ft[Ot][Jt]={data:null,pixelRatio:De,sdf:ke,stretchX:Ee,stretchY:Qe,content:$e,textFitWidth:In,textFitHeight:yn,spriteData:{width:re,height:se,x:fe,y:le,context:jt}}}}return Ft})}(it,ot)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(A=>{if(this._spriteRequest=null,A)for(const T in A){this._spritesImagesIds[T]=[];const L=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(N=>!(N in A)):[];for(const N of L)this.imageManager.removeImage(N),this._changedImages[N]=!0;for(const N in A[T]){const $=T==="default"?N:`${T}:${N}`;this._spritesImagesIds[T].push($),$ in this.imageManager.images?this.imageManager.updateImage($,A[T][N],!1):this.imageManager.addImage($,A[T][N]),c&&(this._changedImages[$]=!0)}}}).catch(A=>{this._spriteRequest=null,y=A,this.fire(new o.k(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),p&&p(y)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const p=r.sourceLayer;if(!p)return;const y=c.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(p)===-1)&&this.fire(new o.k(new Error(`Source layer "${p}" does not exist on source "${y.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){const p=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?o.bB(p):p);const y=[];for(const A of r)if(p[A]){const T=c?o.bB(p[A]):p[A];y.push(T)}return y}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const y=this._layers[p];y.type!=="custom"&&(r[p]=y.serialize())}return r}hasTransitions(){var r,c,p;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const y in this.sourceCaches)if(this.sourceCaches[y].hasTransition())return!0;for(const y in this._layers)if(this._layers[y].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const y=Object.keys(this._updatedLayers),A=Object.keys(this._removedLayers);(y.length||A.length)&&this._updateWorkerLayers(y,A);for(const T in this._updatedSources){const L=this._updatedSources[T];if(L==="reload")this._reloadSource(T);else{if(L!=="clear")throw new Error(`Invalid action ${L}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const p={};for(const y in this.sourceCaches){const A=this.sourceCaches[y];p[y]=A.used,A.used=!1}for(const y of this._order){const A=this._layers[y];A.recalculate(r,this._availableImages),!A.isHidden(r.zoom)&&A.source&&(this.sourceCaches[A.source].used=!0)}for(const y in p){const A=this.sourceCaches[y];!!p[y]!=!!A.used&&A.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,c&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var p;this._checkLoaded();const y=this.serialize();if(r=c.transformStyle?c.transformStyle(y,r):r,((p=c.validate)===null||p===void 0||p)&&ii(this,o.y(r)))return!1;(r=o.bB(r)).layers=o.bz(r.layers);const A=o.bC(y,r),T=this._getOperationsToPerform(A);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const L of T.operations)L();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],p=[];for(const y of r)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":c.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":c.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,y.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setSky":c.push(()=>this.setSky.apply(this,y.args));break;case"setProjection":this.setProjection.apply(this,y.args);break;case"setTransition":c.push(()=>{});break;default:p.push(y.command)}return{operations:c,unimplemented:p}}addImage(r,c){if(this.getImage(r))return this.fire(new o.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new o.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,p={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.y.source,`sources.${r}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=this.sourceCaches[r]=new Fe(r,c,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:r})),y.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===r)return this.fire(new o.k(new Error(`Source "${r}" cannot be removed while layer "${p}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const p=this.sourceCaches[r].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,p={}){this._checkLoaded();const y=r.id;if(this.getLayer(y))return void this.fire(new o.k(new Error(`Layer "${y}" already exists on this map.`)));let A;if(r.type==="custom"){if(ii(this,o.bD(r)))return;A=o.bA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(y,r.source),r=o.bB(r),r=o.e(r,{source:y})),this._validate(o.y.layer,`layers.${y}`,r,{arrayIndex:-1},p))return;A=o.bA(r),this._validateLayer(A),A.setEventedParent(this,{layer:{id:y}})}const T=c?this._order.indexOf(c):this._order.length;if(c&&T===-1)this.fire(new o.k(new Error(`Cannot add layer "${y}" before non-existing layer "${c}".`)));else{if(this._order.splice(T,0,y),this._layerOrderChanged=!0,this._layers[y]=A,this._removedLayers[y]&&A.source&&A.type!=="custom"){const L=this._removedLayers[y];delete this._removedLayers[y],L.type!==A.type?this._updatedSources[A.source]="clear":(this._updatedSources[A.source]="reload",this.sourceCaches[A.source].pause())}this._updateLayer(A),A.onAdd&&A.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new o.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const p=this._order.indexOf(r);this._order.splice(p,1);const y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new o.k(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(y,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const p=this._order.indexOf(r);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,p){this._checkLoaded();const y=this.getLayer(r);y?y.minzoom===c&&y.maxzoom===p||(c!=null&&(y.minzoom=c),p!=null&&(y.maxzoom=p),this._updateLayer(y)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,p={}){this._checkLoaded();const y=this.getLayer(r);if(y){if(!o.bE(y.filter,c))return c==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(o.y.filter,`layers.${y.id}.filter`,c,null,p)||(y.filter=o.bB(c),this._updateLayer(y)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return o.bB(this.getLayer(r).filter)}setLayoutProperty(r,c,p,y={}){this._checkLoaded();const A=this.getLayer(r);A?o.bE(A.getLayoutProperty(c),p)||(A.setLayoutProperty(c,p,y),this._updateLayer(A)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const p=this.getLayer(r);if(p)return p.getLayoutProperty(c);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,p,y={}){this._checkLoaded();const A=this.getLayer(r);A?o.bE(A.getPaintProperty(c),p)||(A.setPaintProperty(c,p,y)&&this._updateLayer(A),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new o.k(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const p=r.source,y=r.sourceLayer,A=this.sourceCaches[p];if(A===void 0)return void this.fire(new o.k(new Error(`The source '${p}' does not exist in the map's style.`)));const T=A.getSource().type;T==="geojson"&&y?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||y?(r.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),A.setFeatureState(y,r.id,c)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const p=r.source,y=this.sourceCaches[p];if(y===void 0)return void this.fire(new o.k(new Error(`The source '${p}' does not exist in the map's style.`)));const A=y.getSource().type,T=A==="vector"?r.sourceLayer:void 0;A!=="vector"||T?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(T,r.id,c):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,p=r.sourceLayer,y=this.sourceCaches[c];if(y!==void 0)return y.getSource().type!=="vector"||p?(r.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),y.getFeatureState(p,r.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=o.bF(this.sourceCaches,A=>A.serialize()),c=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,y=this.stylesheet;return o.bG({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,projection:y.projection,sources:r,layers:c,terrain:p},A=>A!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=T=>this._layers[T].type==="fill-extrusion",p={},y=[];for(let T=this._order.length-1;T>=0;T--){const L=this._order[T];if(c(L)){p[L]=T;for(const N of r){const $=N[L];if($)for(const J of $)y.push(J)}}}y.sort((T,L)=>L.intersectionZ-T.intersectionZ);const A=[];for(let T=this._order.length-1;T>=0;T--){const L=this._order[T];if(c(L))for(let N=y.length-1;N>=0;N--){const $=y[N].feature;if(p[$.layer.id]<T)break;A.push($),y.pop()}else for(const N of r){const $=N[L];if($)for(const J of $)A.push(J.feature)}}return A}queryRenderedFeatures(r,c,p){c&&c.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const $ of c.layers){const J=this._layers[$];if(!J)return this.fire(new o.k(new Error(`The layer '${$}' does not exist in the map's style and cannot be queried for features.`))),[];y[J.source]=!0}}const A=[];c.availableImages=this._availableImages;const T=this._serializedAllLayers(),L=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,N=Object.assign(Object.assign({},c),{layers:L});for(const $ in this.sourceCaches)c.layers&&!y[$]||A.push(Be(this.sourceCaches[$],this._layers,T,r,N,p,this.map.terrain?(J,it,ot)=>this.map.terrain.getElevation(J,it,ot):void 0));return this.placement&&A.push(function($,J,it,ot,ft,bt,Ft){const Ot={},jt=bt.queryRenderedSymbols(ot),Wt=[];for(const Jt of Object.keys(jt).map(Number))Wt.push(Ft[Jt]);Wt.sort(tn);for(const Jt of Wt){const re=Jt.featureIndex.lookupSymbolFeatures(jt[Jt.bucketInstanceId],J,Jt.bucketIndex,Jt.sourceLayerIndex,ft.filter,ft.layers,ft.availableImages,$);for(const se in re){const fe=Ot[se]=Ot[se]||[],le=re[se];le.sort((ke,De)=>{const Ee=Jt.featureSortOrder;if(Ee){const Qe=Ee.indexOf(ke.featureIndex);return Ee.indexOf(De.featureIndex)-Qe}return De.featureIndex-ke.featureIndex});for(const ke of le)fe.push(ke)}}return function(Jt,re,se){for(const fe in Jt)for(const le of Jt[fe])Ln(le,se[re[fe].source]);return Jt}(Ot,$,it)}(this._layers,T,this.sourceCaches,r,N,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(A)}querySourceFeatures(r,c){c&&c.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.sourceCaches[r];return p?function(y,A){const T=y.getRenderableIds().map($=>y.getTileByID($)),L=[],N={};for(let $=0;$<T.length;$++){const J=T[$],it=J.tileID.canonical.key;N[it]||(N[it]=!0,J.querySourceFeatures(L,A))}return L}(p,c):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const p=this.light.getLight();let y=!1;for(const T in r)if(!o.bE(r[T],p[T])){y=!0;break}if(!y)return;const A={now:E.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(A)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){this._checkLoaded();const p=this.getSky();let y=!1;if(!r&&!p)return;if(r&&!p)y=!0;else if(!r&&p)y=!0;else for(const T in r)if(!o.bE(r[T],p[T])){y=!0;break}if(!y)return;const A={now:E.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(A)}_setProjectionInternal(r){const c=function(p){if(Array.isArray(p)){const y=new ou({type:p});return{projection:y,transform:new bo,cameraHelper:new jl(y)}}switch(p){case"mercator":return{projection:new gn,transform:new Rr,cameraHelper:new nu};case"globe":{const y=new ou({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:y,transform:new bo,cameraHelper:new jl(y)}}case"vertical-perspective":return{projection:new iu,transform:new au,cameraHelper:new $o};default:return o.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new gn,transform:new Rr,cameraHelper:new nu}}}(r);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const p in this.sourceCaches)this.sourceCaches[p].reload()}_validate(r,c,p,y,A={}){return(!A||A.validate!==!1)&&ii(this,r.call(o.y,o.e({key:c,style:this.serialize(),value:p,styleSpec:o.v},y)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Cn().off(Le,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const p=this.sourceCaches[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,p,y,A=!1){let T=!1,L=!1;const N={};for(const $ of this._order){const J=this._layers[$];if(J.type!=="symbol")continue;if(!N[J.source]){const ot=this.sourceCaches[J.source];N[J.source]=ot.getRenderableIds(!0).map(ft=>ot.getTileByID(ft)).sort((ft,bt)=>bt.tileID.overscaledZ-ft.tileID.overscaledZ||(ft.tileID.isLessThan(bt.tileID)?-1:1))}const it=this.crossTileSymbolIndex.addLayer(J,N[J.source],r.center.lng);T=T||it}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((A=A||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(E.now(),r.zoom))&&(this.pauseablePlacement=new eu(r,this.map.terrain,this._order,A,c,p,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(E.now()),L=!0),T&&this.pauseablePlacement.placement.setStale()),L||T)for(const $ of this._order){const J=this._layers[$];J.type==="symbol"&&this.placement.updateLayerOpacities(J,N[J.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(E.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c){return o._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const y=this.sourceCaches[c.source];return y&&y.setDependencies(c.tileID.key,c.type,c.icons),p})}getGlyphs(r,c){return o._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(c.stacks),y=this.sourceCaches[c.source];return y&&y.setDependencies(c.tileID.key,c.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(o.y.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,p={},y){this._checkLoaded();const A=[{id:r,url:c}],T=[...nt(this.stylesheet.sprite),...A];this._validate(o.y.sprite,"sprite",T,null,p)||(this.stylesheet.sprite=T,this._loadSprite(A,!0,y))}removeSprite(r){this._checkLoaded();const c=nt(this.stylesheet.sprite);if(c.find(p=>p.id===r)){if(this._spritesImagesIds[r])for(const p of this._spritesImagesIds[r])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex(p=>p.id===r),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return nt(this.stylesheet.sprite)}setSprite(r,c={},p){this._checkLoaded(),r&&this._validate(o.y.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,p):(this._unloadSprite(),p&&p(null)))}}var su=o.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ta{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,p,y,A,T,L,N,$){this.context=r;let J=this.boundPaintVertexBuffers.length!==y.length;for(let it=0;!J&&it<y.length;it++)this.boundPaintVertexBuffers[it]!==y[it]&&(J=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||J||this.boundIndexBuffer!==A||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==L||this.boundDynamicVertexBuffer2!==N||this.boundDynamicVertexBuffer3!==$?this.freshBind(c,p,y,A,T,L,N,$):(r.bindVertexArray.set(this.vao),L&&L.bind(),A&&A.dynamicDraw&&A.bind(),N&&N.bind(),$&&$.bind())}freshBind(r,c,p,y,A,T,L,N){const $=r.numAttributes,J=this.context,it=J.gl;this.vao&&this.destroy(),this.vao=J.createVertexArray(),J.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=y,this.boundVertexOffset=A,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=L,this.boundDynamicVertexBuffer3=N,c.enableAttributes(it,r);for(const ot of p)ot.enableAttributes(it,r);T&&T.enableAttributes(it,r),L&&L.enableAttributes(it,r),N&&N.enableAttributes(it,r),c.bind(),c.setVertexAttribPointers(it,r,A);for(const ot of p)ot.bind(),ot.setVertexAttribPointers(it,r,A);T&&(T.bind(),T.setVertexAttribPointers(it,r,A)),y&&y.bind(),L&&(L.bind(),L.setVertexAttribPointers(it,r,A)),N&&(N.bind(),N.setVertexAttribPointers(it,r,A)),J.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Ph=(b,r,c,p,y)=>({u_texture:0,u_ele_delta:b,u_fog_matrix:r,u_fog_color:c?c.properties.get("fog-color"):o.b7.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:y?0:c?c.calculateFogBlendOpacity(p):0,u_horizon_color:c?c.properties.get("horizon-color"):o.b7.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:y?1:0}),Vl={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function rl(b){const r=[];for(let c=0;c<b.length;c++){if(b[c]===null)continue;const p=b[c].split(" ");r.push(p.pop())}return r}class Mc{constructor(r,c,p,y,A,T,L,N){const $=r.gl;this.program=$.createProgram();const J=rl(c.staticAttributes),it=p?p.getBinderAttributes():[],ot=J.concat(it),ft=Zt.prelude.staticUniforms?rl(Zt.prelude.staticUniforms):[],bt=L.staticUniforms?rl(L.staticUniforms):[],Ft=c.staticUniforms?rl(c.staticUniforms):[],Ot=p?p.getBinderUniforms():[],jt=ft.concat(bt).concat(Ft).concat(Ot),Wt=[];for(const De of jt)Wt.indexOf(De)<0&&Wt.push(De);const Jt=p?p.defines():[];ca($)&&Jt.unshift("#version 300 es"),A&&Jt.push("#define OVERDRAW_INSPECTOR;"),T&&Jt.push("#define TERRAIN3D;"),N&&Jt.push(N);let re=Jt.concat(Zt.prelude.fragmentSource,L.fragmentSource,c.fragmentSource).join(`
`),se=Jt.concat(Zt.prelude.vertexSource,L.vertexSource,c.vertexSource).join(`
`);ca($)||(re=function(De){return De.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(re),se=function(De){return De.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(se));const fe=$.createShader($.FRAGMENT_SHADER);if($.isContextLost())return void(this.failedToCreate=!0);if($.shaderSource(fe,re),$.compileShader(fe),!$.getShaderParameter(fe,$.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${$.getShaderInfoLog(fe)}`);$.attachShader(this.program,fe);const le=$.createShader($.VERTEX_SHADER);if($.isContextLost())return void(this.failedToCreate=!0);if($.shaderSource(le,se),$.compileShader(le),!$.getShaderParameter(le,$.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${$.getShaderInfoLog(le)}`);$.attachShader(this.program,le),this.attributes={};const ke={};this.numAttributes=ot.length;for(let De=0;De<this.numAttributes;De++)ot[De]&&($.bindAttribLocation(this.program,De,ot[De]),this.attributes[ot[De]]=De);if($.linkProgram(this.program),!$.getProgramParameter(this.program,$.LINK_STATUS))throw new Error(`Program failed to link: ${$.getProgramInfoLog(this.program)}`);$.deleteShader(le),$.deleteShader(fe);for(let De=0;De<Wt.length;De++){const Ee=Wt[De];if(Ee&&!ke[Ee]){const Qe=$.getUniformLocation(this.program,Ee);Qe&&(ke[Ee]=Qe)}}this.fixedUniforms=y(r,ke),this.terrainUniforms=((De,Ee)=>({u_depth:new o.bH(De,Ee.u_depth),u_terrain:new o.bH(De,Ee.u_terrain),u_terrain_dim:new o.b8(De,Ee.u_terrain_dim),u_terrain_matrix:new o.bJ(De,Ee.u_terrain_matrix),u_terrain_unpack:new o.bK(De,Ee.u_terrain_unpack),u_terrain_exaggeration:new o.b8(De,Ee.u_terrain_exaggeration)}))(r,ke),this.projectionUniforms=((De,Ee)=>({u_projection_matrix:new o.bJ(De,Ee.u_projection_matrix),u_projection_tile_mercator_coords:new o.bK(De,Ee.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bK(De,Ee.u_projection_clipping_plane),u_projection_transition:new o.b8(De,Ee.u_projection_transition),u_projection_fallback_matrix:new o.bJ(De,Ee.u_projection_fallback_matrix)}))(r,ke),this.binderUniforms=p?p.getUniforms(r,ke):[]}draw(r,c,p,y,A,T,L,N,$,J,it,ot,ft,bt,Ft,Ot,jt,Wt,Jt){const re=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(p),r.setStencilMode(y),r.setColorMode(A),r.setCullFace(T),N){r.activeTexture.set(re.TEXTURE2),re.bindTexture(re.TEXTURE_2D,N.depthTexture),r.activeTexture.set(re.TEXTURE3),re.bindTexture(re.TEXTURE_2D,N.texture);for(const fe in this.terrainUniforms)this.terrainUniforms[fe].set(N[fe])}if($)for(const fe in $)this.projectionUniforms[Vl[fe]].set($[fe]);if(L)for(const fe in this.fixedUniforms)this.fixedUniforms[fe].set(L[fe]);Ot&&Ot.setUniforms(r,this.binderUniforms,bt,{zoom:Ft});let se=0;switch(c){case re.LINES:se=2;break;case re.TRIANGLES:se=3;break;case re.LINE_STRIP:se=1}for(const fe of ft.get()){const le=fe.vaos||(fe.vaos={});(le[J]||(le[J]=new ta)).bind(r,this,it,Ot?Ot.getPaintVertexBuffers():[],ot,fe.vertexOffset,jt,Wt,Jt),re.drawElements(c,fe.primitiveLength*se,re.UNSIGNED_SHORT,fe.primitiveOffset*se*2)}}}function lu(b,r,c){const p=1/o.az(c,1,r.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),A=c.tileSize*Math.pow(2,r.transform.tileZoom)/y,T=A*(c.tileID.canonical.x+c.tileID.wrap*y),L=A*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[T>>16,L>>16],u_pixel_coord_lower:[65535&T,65535&L]}}const hs=(b,r,c,p)=>{const y=b.style.light,A=y.properties.get("position"),T=[A.x,A.y,A.z],L=o.bN();y.properties.get("anchor")==="viewport"&&o.bO(L,b.transform.bearingInRadians),o.bP(T,T,L);const N=b.transform.transformLightDirection(T),$=y.properties.get("color");return{u_lightpos:T,u_lightpos_globe:N,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[$.r,$.g,$.b],u_vertical_gradient:+r,u_opacity:c,u_fill_translate:p}},Nf=(b,r,c,p,y,A,T)=>o.e(hs(b,r,c,p),lu(A,b,T),{u_height_factor:-Math.pow(2,y.overscaledZ)/T.tileSize/8}),ks=(b,r,c,p)=>o.e(lu(r,b,c),{u_fill_translate:p}),Yu=(b,r)=>({u_world:b,u_fill_translate:r}),ds=(b,r,c,p,y)=>o.e(ks(b,r,c,y),{u_world:p}),Ga=(b,r,c,p,y)=>{const A=b.transform;let T,L,N=0;if(c.paint.get("circle-pitch-alignment")==="map"){const $=o.az(r,1,A.zoom);T=!0,L=[$,$],N=$/(o.Z*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*y}else T=!1,L=A.pixelsToGLUnits;return{u_camera_to_center_distance:A.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+T,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:L,u_globe_extrude_scale:N,u_translate:p}},Ls=b=>({u_pixel_extrude_scale:[1/b.width,1/b.height]}),Sc=b=>({u_viewport_size:[b.width,b.height]}),Sa=(b,r=1)=>({u_color:b,u_overlay:0,u_overlay_scale:r}),cu=(b,r,c,p)=>{const y=o.az(b,1,r)/(o.Z*Math.pow(2,b.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:o.az(b,1,r),u_intensity:c,u_globe_extrude_scale:y}},Ec=(b,r,c,p)=>{const y=o.K();o.bQ(y,0,b.width,b.height,0,0,1);const A=b.context.gl;return{u_matrix:y,u_world:[A.drawingBufferWidth,A.drawingBufferHeight],u_image:c,u_color_ramp:p,u_opacity:r.paint.get("heatmap-opacity")}},Ul=(b,r,c)=>{const p=c.paint.get("hillshade-shadow-color"),y=c.paint.get("hillshade-highlight-color"),A=c.paint.get("hillshade-accent-color");let T=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);return c.paint.get("hillshade-illumination-anchor")==="viewport"&&(T+=b.transform.bearingInRadians),{u_image:0,u_latrange:uu(0,r.tileID),u_light:[c.paint.get("hillshade-exaggeration"),T],u_shadow:p,u_highlight:y,u_accent:A}},Zi=(b,r)=>{const c=r.stride,p=o.K();return o.bQ(p,0,o.Z,-8192,0,0,1),o.L(p,p,[0,-8192,0]),{u_matrix:p,u_image:1,u_dimension:[c,c],u_zoom:b.overscaledZ,u_unpack:r.getUnpackVector()}};function uu(b,r){const c=Math.pow(2,r.canonical.z),p=r.canonical.y;return[new o.$(0,p/c).toLngLat().lat,new o.$(0,(p+1)/c).toLngLat().lat]}const il=(b,r,c,p)=>{const y=b.transform;return{u_translation:Hl(b,r,c),u_ratio:p/o.az(r,1,y.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Tc=(b,r,c,p,y)=>o.e(il(b,r,c,p),{u_image:0,u_image_height:y}),kh=(b,r,c,p,y)=>{const A=b.transform,T=du(r,A);return{u_translation:Hl(b,r,c),u_texsize:r.imageAtlasTexture.size,u_ratio:p/o.az(r,1,A.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[T,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]]}},hu=(b,r,c,p,y,A)=>{const T=b.lineAtlas,L=du(r,b.transform),N=c.layout.get("line-cap")==="round",$=T.getDash(y.from,N),J=T.getDash(y.to,N),it=$.width*A.fromScale,ot=J.width*A.toScale;return o.e(il(b,r,c,p),{u_patternscale_a:[L/it,-$.height/2],u_patternscale_b:[L/ot,-J.height/2],u_sdfgamma:T.width/(256*Math.min(it,ot)*b.pixelRatio)/2,u_image:0,u_tex_y_a:$.y,u_tex_y_b:J.y,u_mix:A.t})};function du(b,r){return 1/o.az(b,1,r.tileZoom)}function Hl(b,r,c){return o.aA(b.transform,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Id=(b,r,c,p,y)=>{return{u_tl_parent:b,u_scale_parent:r,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(T=p.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(A=p.paint.get("raster-contrast"),A>0?1/(1-A):1+A),u_spin_weights:Rs(p.paint.get("raster-hue-rotate")),u_coords_top:[y[0].x,y[0].y,y[1].x,y[1].y],u_coords_bottom:[y[3].x,y[3].y,y[2].x,y[2].y]};var A,T};function Rs(b){b*=Math.PI/180;const r=Math.sin(b),c=Math.cos(b);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const ol=(b,r,c,p,y,A,T,L,N,$,J,it,ot)=>{const ft=T.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:ft.cameraToCenterDistance,u_pitch:ft.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:ft.width/ft.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_label_plane_matrix:L,u_coord_matrix:N,u_is_text:+J,u_pitch_with_map:+p,u_is_along_line:y,u_is_variable_anchor:A,u_texsize:it,u_texture:0,u_translation:$,u_pitched_scale:ot}},fs=(b,r,c,p,y,A,T,L,N,$,J,it,ot,ft)=>{const bt=T.transform;return o.e(ol(b,r,c,p,y,A,T,L,N,$,J,it,ft),{u_gamma_scale:p?Math.cos(bt.pitch*Math.PI/180)*bt.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:1})},Lh=(b,r,c,p,y,A,T,L,N,$,J,it,ot)=>o.e(fs(b,r,c,p,y,A,T,L,N,$,!0,J,0,ot),{u_texsize_icon:it,u_texture_icon:1}),Pc=(b,r)=>({u_opacity:b,u_color:r}),ha=(b,r,c,p,y)=>o.e(function(A,T,L,N){const $=L.imageManager.getPattern(A.from.toString()),J=L.imageManager.getPattern(A.to.toString()),{width:it,height:ot}=L.imageManager.getPixelSize(),ft=Math.pow(2,N.tileID.overscaledZ),bt=N.tileSize*Math.pow(2,L.transform.tileZoom)/ft,Ft=bt*(N.tileID.canonical.x+N.tileID.wrap*ft),Ot=bt*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:$.tl,u_pattern_br_a:$.br,u_pattern_tl_b:J.tl,u_pattern_br_b:J.br,u_texsize:[it,ot],u_mix:T.t,u_pattern_size_a:$.displaySize,u_pattern_size_b:J.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/o.az(N,1,L.transform.tileZoom),u_pixel_coord_upper:[Ft>>16,Ot>>16],u_pixel_coord_lower:[65535&Ft,65535&Ot]}}(c,y,r,p),{u_opacity:b}),da=(b,r)=>{},$l={fillExtrusion:(b,r)=>({u_lightpos:new o.bL(b,r.u_lightpos),u_lightpos_globe:new o.bL(b,r.u_lightpos_globe),u_lightintensity:new o.b8(b,r.u_lightintensity),u_lightcolor:new o.bL(b,r.u_lightcolor),u_vertical_gradient:new o.b8(b,r.u_vertical_gradient),u_opacity:new o.b8(b,r.u_opacity),u_fill_translate:new o.bM(b,r.u_fill_translate)}),fillExtrusionPattern:(b,r)=>({u_lightpos:new o.bL(b,r.u_lightpos),u_lightpos_globe:new o.bL(b,r.u_lightpos_globe),u_lightintensity:new o.b8(b,r.u_lightintensity),u_lightcolor:new o.bL(b,r.u_lightcolor),u_vertical_gradient:new o.b8(b,r.u_vertical_gradient),u_height_factor:new o.b8(b,r.u_height_factor),u_opacity:new o.b8(b,r.u_opacity),u_fill_translate:new o.bM(b,r.u_fill_translate),u_image:new o.bH(b,r.u_image),u_texsize:new o.bM(b,r.u_texsize),u_pixel_coord_upper:new o.bM(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(b,r.u_pixel_coord_lower),u_scale:new o.bL(b,r.u_scale),u_fade:new o.b8(b,r.u_fade)}),fill:(b,r)=>({u_fill_translate:new o.bM(b,r.u_fill_translate)}),fillPattern:(b,r)=>({u_image:new o.bH(b,r.u_image),u_texsize:new o.bM(b,r.u_texsize),u_pixel_coord_upper:new o.bM(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(b,r.u_pixel_coord_lower),u_scale:new o.bL(b,r.u_scale),u_fade:new o.b8(b,r.u_fade),u_fill_translate:new o.bM(b,r.u_fill_translate)}),fillOutline:(b,r)=>({u_world:new o.bM(b,r.u_world),u_fill_translate:new o.bM(b,r.u_fill_translate)}),fillOutlinePattern:(b,r)=>({u_world:new o.bM(b,r.u_world),u_image:new o.bH(b,r.u_image),u_texsize:new o.bM(b,r.u_texsize),u_pixel_coord_upper:new o.bM(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(b,r.u_pixel_coord_lower),u_scale:new o.bL(b,r.u_scale),u_fade:new o.b8(b,r.u_fade),u_fill_translate:new o.bM(b,r.u_fill_translate)}),circle:(b,r)=>({u_camera_to_center_distance:new o.b8(b,r.u_camera_to_center_distance),u_scale_with_map:new o.bH(b,r.u_scale_with_map),u_pitch_with_map:new o.bH(b,r.u_pitch_with_map),u_extrude_scale:new o.bM(b,r.u_extrude_scale),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_globe_extrude_scale:new o.b8(b,r.u_globe_extrude_scale),u_translate:new o.bM(b,r.u_translate)}),collisionBox:(b,r)=>({u_pixel_extrude_scale:new o.bM(b,r.u_pixel_extrude_scale)}),collisionCircle:(b,r)=>({u_viewport_size:new o.bM(b,r.u_viewport_size)}),debug:(b,r)=>({u_color:new o.bI(b,r.u_color),u_overlay:new o.bH(b,r.u_overlay),u_overlay_scale:new o.b8(b,r.u_overlay_scale)}),depth:da,clippingMask:da,heatmap:(b,r)=>({u_extrude_scale:new o.b8(b,r.u_extrude_scale),u_intensity:new o.b8(b,r.u_intensity),u_globe_extrude_scale:new o.b8(b,r.u_globe_extrude_scale)}),heatmapTexture:(b,r)=>({u_matrix:new o.bJ(b,r.u_matrix),u_world:new o.bM(b,r.u_world),u_image:new o.bH(b,r.u_image),u_color_ramp:new o.bH(b,r.u_color_ramp),u_opacity:new o.b8(b,r.u_opacity)}),hillshade:(b,r)=>({u_image:new o.bH(b,r.u_image),u_latrange:new o.bM(b,r.u_latrange),u_light:new o.bM(b,r.u_light),u_shadow:new o.bI(b,r.u_shadow),u_highlight:new o.bI(b,r.u_highlight),u_accent:new o.bI(b,r.u_accent)}),hillshadePrepare:(b,r)=>({u_matrix:new o.bJ(b,r.u_matrix),u_image:new o.bH(b,r.u_image),u_dimension:new o.bM(b,r.u_dimension),u_zoom:new o.b8(b,r.u_zoom),u_unpack:new o.bK(b,r.u_unpack)}),line:(b,r)=>({u_translation:new o.bM(b,r.u_translation),u_ratio:new o.b8(b,r.u_ratio),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_units_to_pixels:new o.bM(b,r.u_units_to_pixels)}),lineGradient:(b,r)=>({u_translation:new o.bM(b,r.u_translation),u_ratio:new o.b8(b,r.u_ratio),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_units_to_pixels:new o.bM(b,r.u_units_to_pixels),u_image:new o.bH(b,r.u_image),u_image_height:new o.b8(b,r.u_image_height)}),linePattern:(b,r)=>({u_translation:new o.bM(b,r.u_translation),u_texsize:new o.bM(b,r.u_texsize),u_ratio:new o.b8(b,r.u_ratio),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_image:new o.bH(b,r.u_image),u_units_to_pixels:new o.bM(b,r.u_units_to_pixels),u_scale:new o.bL(b,r.u_scale),u_fade:new o.b8(b,r.u_fade)}),lineSDF:(b,r)=>({u_translation:new o.bM(b,r.u_translation),u_ratio:new o.b8(b,r.u_ratio),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_units_to_pixels:new o.bM(b,r.u_units_to_pixels),u_patternscale_a:new o.bM(b,r.u_patternscale_a),u_patternscale_b:new o.bM(b,r.u_patternscale_b),u_sdfgamma:new o.b8(b,r.u_sdfgamma),u_image:new o.bH(b,r.u_image),u_tex_y_a:new o.b8(b,r.u_tex_y_a),u_tex_y_b:new o.b8(b,r.u_tex_y_b),u_mix:new o.b8(b,r.u_mix)}),raster:(b,r)=>({u_tl_parent:new o.bM(b,r.u_tl_parent),u_scale_parent:new o.b8(b,r.u_scale_parent),u_buffer_scale:new o.b8(b,r.u_buffer_scale),u_fade_t:new o.b8(b,r.u_fade_t),u_opacity:new o.b8(b,r.u_opacity),u_image0:new o.bH(b,r.u_image0),u_image1:new o.bH(b,r.u_image1),u_brightness_low:new o.b8(b,r.u_brightness_low),u_brightness_high:new o.b8(b,r.u_brightness_high),u_saturation_factor:new o.b8(b,r.u_saturation_factor),u_contrast_factor:new o.b8(b,r.u_contrast_factor),u_spin_weights:new o.bL(b,r.u_spin_weights),u_coords_top:new o.bK(b,r.u_coords_top),u_coords_bottom:new o.bK(b,r.u_coords_bottom)}),symbolIcon:(b,r)=>({u_is_size_zoom_constant:new o.bH(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(b,r.u_is_size_feature_constant),u_size_t:new o.b8(b,r.u_size_t),u_size:new o.b8(b,r.u_size),u_camera_to_center_distance:new o.b8(b,r.u_camera_to_center_distance),u_pitch:new o.b8(b,r.u_pitch),u_rotate_symbol:new o.bH(b,r.u_rotate_symbol),u_aspect_ratio:new o.b8(b,r.u_aspect_ratio),u_fade_change:new o.b8(b,r.u_fade_change),u_label_plane_matrix:new o.bJ(b,r.u_label_plane_matrix),u_coord_matrix:new o.bJ(b,r.u_coord_matrix),u_is_text:new o.bH(b,r.u_is_text),u_pitch_with_map:new o.bH(b,r.u_pitch_with_map),u_is_along_line:new o.bH(b,r.u_is_along_line),u_is_variable_anchor:new o.bH(b,r.u_is_variable_anchor),u_texsize:new o.bM(b,r.u_texsize),u_texture:new o.bH(b,r.u_texture),u_translation:new o.bM(b,r.u_translation),u_pitched_scale:new o.b8(b,r.u_pitched_scale)}),symbolSDF:(b,r)=>({u_is_size_zoom_constant:new o.bH(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(b,r.u_is_size_feature_constant),u_size_t:new o.b8(b,r.u_size_t),u_size:new o.b8(b,r.u_size),u_camera_to_center_distance:new o.b8(b,r.u_camera_to_center_distance),u_pitch:new o.b8(b,r.u_pitch),u_rotate_symbol:new o.bH(b,r.u_rotate_symbol),u_aspect_ratio:new o.b8(b,r.u_aspect_ratio),u_fade_change:new o.b8(b,r.u_fade_change),u_label_plane_matrix:new o.bJ(b,r.u_label_plane_matrix),u_coord_matrix:new o.bJ(b,r.u_coord_matrix),u_is_text:new o.bH(b,r.u_is_text),u_pitch_with_map:new o.bH(b,r.u_pitch_with_map),u_is_along_line:new o.bH(b,r.u_is_along_line),u_is_variable_anchor:new o.bH(b,r.u_is_variable_anchor),u_texsize:new o.bM(b,r.u_texsize),u_texture:new o.bH(b,r.u_texture),u_gamma_scale:new o.b8(b,r.u_gamma_scale),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_is_halo:new o.bH(b,r.u_is_halo),u_translation:new o.bM(b,r.u_translation),u_pitched_scale:new o.b8(b,r.u_pitched_scale)}),symbolTextAndIcon:(b,r)=>({u_is_size_zoom_constant:new o.bH(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(b,r.u_is_size_feature_constant),u_size_t:new o.b8(b,r.u_size_t),u_size:new o.b8(b,r.u_size),u_camera_to_center_distance:new o.b8(b,r.u_camera_to_center_distance),u_pitch:new o.b8(b,r.u_pitch),u_rotate_symbol:new o.bH(b,r.u_rotate_symbol),u_aspect_ratio:new o.b8(b,r.u_aspect_ratio),u_fade_change:new o.b8(b,r.u_fade_change),u_label_plane_matrix:new o.bJ(b,r.u_label_plane_matrix),u_coord_matrix:new o.bJ(b,r.u_coord_matrix),u_is_text:new o.bH(b,r.u_is_text),u_pitch_with_map:new o.bH(b,r.u_pitch_with_map),u_is_along_line:new o.bH(b,r.u_is_along_line),u_is_variable_anchor:new o.bH(b,r.u_is_variable_anchor),u_texsize:new o.bM(b,r.u_texsize),u_texsize_icon:new o.bM(b,r.u_texsize_icon),u_texture:new o.bH(b,r.u_texture),u_texture_icon:new o.bH(b,r.u_texture_icon),u_gamma_scale:new o.b8(b,r.u_gamma_scale),u_device_pixel_ratio:new o.b8(b,r.u_device_pixel_ratio),u_is_halo:new o.bH(b,r.u_is_halo),u_translation:new o.bM(b,r.u_translation),u_pitched_scale:new o.b8(b,r.u_pitched_scale)}),background:(b,r)=>({u_opacity:new o.b8(b,r.u_opacity),u_color:new o.bI(b,r.u_color)}),backgroundPattern:(b,r)=>({u_opacity:new o.b8(b,r.u_opacity),u_image:new o.bH(b,r.u_image),u_pattern_tl_a:new o.bM(b,r.u_pattern_tl_a),u_pattern_br_a:new o.bM(b,r.u_pattern_br_a),u_pattern_tl_b:new o.bM(b,r.u_pattern_tl_b),u_pattern_br_b:new o.bM(b,r.u_pattern_br_b),u_texsize:new o.bM(b,r.u_texsize),u_mix:new o.b8(b,r.u_mix),u_pattern_size_a:new o.bM(b,r.u_pattern_size_a),u_pattern_size_b:new o.bM(b,r.u_pattern_size_b),u_scale_a:new o.b8(b,r.u_scale_a),u_scale_b:new o.b8(b,r.u_scale_b),u_pixel_coord_upper:new o.bM(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(b,r.u_pixel_coord_lower),u_tile_units_to_pixels:new o.b8(b,r.u_tile_units_to_pixels)}),terrain:(b,r)=>({u_texture:new o.bH(b,r.u_texture),u_ele_delta:new o.b8(b,r.u_ele_delta),u_fog_matrix:new o.bJ(b,r.u_fog_matrix),u_fog_color:new o.bI(b,r.u_fog_color),u_fog_ground_blend:new o.b8(b,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.b8(b,r.u_fog_ground_blend_opacity),u_horizon_color:new o.bI(b,r.u_horizon_color),u_horizon_fog_blend:new o.b8(b,r.u_horizon_fog_blend),u_is_globe_mode:new o.b8(b,r.u_is_globe_mode)}),terrainDepth:(b,r)=>({u_ele_delta:new o.b8(b,r.u_ele_delta)}),terrainCoords:(b,r)=>({u_texture:new o.bH(b,r.u_texture),u_terrain_coords_id:new o.b8(b,r.u_terrain_coords_id),u_ele_delta:new o.b8(b,r.u_ele_delta)}),projectionErrorMeasurement:(b,r)=>({u_input:new o.b8(b,r.u_input),u_output_expected:new o.b8(b,r.u_output_expected)}),atmosphere:(b,r)=>({u_sun_pos:new o.bL(b,r.u_sun_pos),u_atmosphere_blend:new o.b8(b,r.u_atmosphere_blend),u_globe_position:new o.bL(b,r.u_globe_position),u_globe_radius:new o.b8(b,r.u_globe_radius),u_inv_proj_matrix:new o.bJ(b,r.u_inv_proj_matrix)}),sky:(b,r)=>({u_sky_color:new o.bI(b,r.u_sky_color),u_horizon_color:new o.bI(b,r.u_horizon_color),u_horizon:new o.bM(b,r.u_horizon),u_horizon_normal:new o.bM(b,r.u_horizon_normal),u_sky_horizon_blend:new o.b8(b,r.u_sky_horizon_blend),u_sky_blend:new o.b8(b,r.u_sky_blend)})};class Xu{constructor(r,c,p){this.context=r;const y=r.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Gl{constructor(r,c,p,y){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=r;const A=r.gl;this.buffer=A.createBuffer(),r.bindVertexBuffer.set(this.buffer),A.bufferData(A.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?A.DYNAMIC_DRAW:A.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let p=0;p<this.attributes.length;p++){const y=c.attributes[this.attributes[p].name];y!==void 0&&r.enableVertexAttribArray(y)}}setVertexAttribPointers(r,c,p){for(let y=0;y<this.attributes.length;y++){const A=this.attributes[y],T=c.attributes[A.name];T!==void 0&&r.vertexAttribPointer(T,A.components,r[Rh[A.type]],!1,this.itemSize,A.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class _r{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class fa extends _r{getDefault(){return o.b7.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ae extends _r{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class qe extends _r{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Dn extends _r{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class sr extends _r{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class yi extends _r{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Hr extends _r{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class si extends _r{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class me extends _r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class We extends _r{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class ze extends _r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class Tn extends _r{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class rr extends _r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class br extends _r{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class xr extends _r{getDefault(){return o.b7.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class $r extends _r{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Ds extends _r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class kc extends _r{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Di extends _r{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Za extends _r{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class fu extends _r{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class ps extends _r{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Zl extends _r{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Jr extends _r{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class tr extends _r{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Os extends _r{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ms extends _r{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class al extends _r{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const p=this.gl;ca(p)?p.bindVertexArray(r):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class vr extends _r{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Ea extends _r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class sl extends _r{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Wa extends _r{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class Go extends Wa{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class zs extends Wa{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ll extends Wa{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const Wl="Framebuffer is not complete";class pu{constructor(r,c,p,y,A){this.context=r,this.width=c,this.height=p;const T=r.gl,L=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Go(r,L),y)this.depthAttachment=A?new ll(r,L):new zs(r,L);else if(A)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error(Wl)}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&r.deleteRenderbuffer(p)}r.deleteFramebuffer(this.framebuffer)}}class Lc{constructor(r){var c,p;if(this.gl=r,this.clearColor=new fa(this),this.clearDepth=new Ae(this),this.clearStencil=new qe(this),this.colorMask=new Dn(this),this.depthMask=new sr(this),this.stencilMask=new yi(this),this.stencilFunc=new Hr(this),this.stencilOp=new si(this),this.stencilTest=new me(this),this.depthRange=new We(this),this.depthTest=new ze(this),this.depthFunc=new Tn(this),this.blend=new rr(this),this.blendFunc=new br(this),this.blendColor=new xr(this),this.blendEquation=new $r(this),this.cullFace=new Ds(this),this.cullFaceSide=new kc(this),this.frontFace=new Di(this),this.program=new Za(this),this.activeTexture=new fu(this),this.viewport=new ps(this),this.bindFramebuffer=new Zl(this),this.bindRenderbuffer=new Jr(this),this.bindTexture=new tr(this),this.bindVertexBuffer=new Os(this),this.bindElementBuffer=new ms(this),this.bindVertexArray=new al(this),this.pixelStoreUnpack=new vr(this),this.pixelStoreUnpackPremultiplyAlpha=new Ea(this),this.pixelStoreUnpackFlipY=new sl(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),ca(r)){this.HALF_FLOAT=r.HALF_FLOAT;const y=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(p=r.RGB16F)!==null&&p!==void 0?p:y==null?void 0:y.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const y=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new Xu(this,r,c)}createVertexBuffer(r,c,p){return new Gl(this,r,c,p)}createRenderbuffer(r,c,p){const y=this.gl,A=y.createRenderbuffer();return this.bindRenderbuffer.set(A),y.renderbufferStorage(y.RENDERBUFFER,r,c,p),this.bindRenderbuffer.set(null),A}createFramebuffer(r,c,p,y){return new pu(this,r,c,p,y)}clear({color:r,depth:c,stencil:p}){const y=this.gl;let A=0;r&&(A|=y.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(A|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(A|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),y.clear(A)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){o.bE(r.blendFunction,ur.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return ca(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return ca(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let pa;function Fs(b,r,c,p,y){const A=b.context,T=b.transform,L=A.gl,N=b.useProgram("collisionBox"),$=[];let J=0,it=0;for(let jt=0;jt<p.length;jt++){const Wt=p[jt],Jt=r.getTile(Wt).getBucket(c);if(!Jt)continue;const re=y?Jt.textCollisionBox:Jt.iconCollisionBox,se=Jt.collisionCircleArray;se.length>0&&($.push({circleArray:se,circleOffset:it,coord:Wt}),J+=se.length/4,it=J),re&&N.draw(A,L.LINES,Fn.disabled,Dr.disabled,b.colorModeForRenderPass(),Wr.disabled,Ls(b.transform),b.style.map.terrain&&b.style.map.terrain.getTerrainData(Wt),T.getProjectionData({overscaledTileID:Wt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,null,b.transform.zoom,null,null,re.collisionVertexBuffer)}if(!y||!$.length)return;const ot=b.useProgram("collisionCircle"),ft=new o.bR;ft.resize(4*J),ft._trim();let bt=0;for(const jt of $)for(let Wt=0;Wt<jt.circleArray.length/4;Wt++){const Jt=4*Wt,re=jt.circleArray[Jt+0],se=jt.circleArray[Jt+1],fe=jt.circleArray[Jt+2],le=jt.circleArray[Jt+3];ft.emplace(bt++,re,se,fe,le,0),ft.emplace(bt++,re,se,fe,le,1),ft.emplace(bt++,re,se,fe,le,2),ft.emplace(bt++,re,se,fe,le,3)}(!pa||pa.length<2*J)&&(pa=function(jt){const Wt=2*jt,Jt=new o.bT;Jt.resize(Wt),Jt._trim();for(let re=0;re<Wt;re++){const se=6*re;Jt.uint16[se+0]=4*re+0,Jt.uint16[se+1]=4*re+1,Jt.uint16[se+2]=4*re+2,Jt.uint16[se+3]=4*re+2,Jt.uint16[se+4]=4*re+3,Jt.uint16[se+5]=4*re+0}return Jt}(J));const Ft=A.createIndexBuffer(pa,!0),Ot=A.createVertexBuffer(ft,o.bS.members,!0);for(const jt of $){const Wt=Sc(b.transform);ot.draw(A,L.TRIANGLES,Fn.disabled,Dr.disabled,b.colorModeForRenderPass(),Wr.disabled,Wt,b.style.map.terrain&&b.style.map.terrain.getTerrainData(jt.coord),null,c.id,Ot,Ft,o.aJ.simpleSegment(0,2*jt.circleOffset,jt.circleArray.length,jt.circleArray.length/2),null,b.transform.zoom,null,null,null)}Ot.destroy(),Ft.destroy()}const cl=o.ad(new Float32Array(16));function Ta(b,r,c,p,y,A){const{horizontalAlign:T,verticalAlign:L}=o.aE(b);return new o.P((-(T-.5)*r/y+p[0])*A,(-(L-.5)*c/y+p[1])*A)}function ul(b,r,c,p,y,A){const T=r.tileAnchorPoint.add(new o.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let L=p.mult(A);c||(L=L.rotate(-y));const N=T.add(L);return $n(N.x,N.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(c){const L=pi(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(b),N=Math.atan(L.y/L.x)+(L.x<0?Math.PI:0);return b.add(p.rotate(N))}return b.add(p)}function Md(b,r,c,p,y,A,T,L,N,$,J,it){const ot=b.text.placedSymbolArray,ft=b.text.dynamicLayoutVertexArray,bt=b.icon.dynamicLayoutVertexArray,Ft={};ft.clear();for(let Ot=0;Ot<ot.length;Ot++){const jt=ot.get(Ot),Wt=jt.hidden||!jt.crossTileID||b.allowVerticalPlacement&&!jt.placedOrientation?null:p[jt.crossTileID];if(Wt){const Jt=new o.P(jt.anchorX,jt.anchorY),re={getElevation:it,width:y.width,height:y.height,pitchedLabelPlaneMatrix:A,pitchWithMap:c,transform:y,tileAnchorPoint:Jt,translation:$,unwrappedTileID:J},se=c?tu(Jt.x,Jt.y,re):pi(Jt.x,Jt.y,re),fe=Fr(y.cameraToCenterDistance,se.signedDistanceFromCamera);let le=o.am(b.textSizeData,L,jt)*fe/o.ay;c&&(le*=b.tilePixelRatio/T);const{width:ke,height:De,anchor:Ee,textOffset:Qe,textBoxScale:$e}=Wt,In=Ta(Ee,ke,De,Qe,$e,le),yn=y.getPitchedTextCorrection(Jt.x+$[0],Jt.y+$[1],J),an=ul(se.point,re,r,In,-y.bearingInRadians,yn),qn=b.allowVerticalPlacement&&jt.placedOrientation===o.al.vertical?Math.PI/2:0;for(let fr=0;fr<jt.numGlyphs;fr++)o.as(ft,an,qn);N&&jt.associatedIconIndex>=0&&(Ft[jt.associatedIconIndex]={shiftedAnchor:an,angle:qn})}else Ri(jt.numGlyphs,ft)}if(N){bt.clear();const Ot=b.icon.placedSymbolArray;for(let jt=0;jt<Ot.length;jt++){const Wt=Ot.get(jt);if(Wt.hidden)Ri(Wt.numGlyphs,bt);else{const Jt=Ft[jt];if(Jt)for(let re=0;re<Wt.numGlyphs;re++)o.as(bt,Jt.shiftedAnchor,Jt.angle);else Ri(Wt.numGlyphs,bt)}}b.icon.dynamicLayoutVertexBuffer.updateData(bt)}b.text.dynamicLayoutVertexBuffer.updateData(ft)}function Sd(b,r,c){return c.iconsInText&&r?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function Ed(b,r,c,p,y,A,T,L,N,$,J,it,ot){const ft=b.context,bt=ft.gl,Ft=b.transform,Ot=L==="map",jt=N==="map",Wt=L!=="viewport"&&c.layout.get("symbol-placement")!=="point",Jt=Ot&&!jt&&!Wt,re=!c.layout.get("symbol-sort-key").isConstant();let se=!1;const fe=b.getDepthModeForSublayer(0,Fn.ReadOnly),le=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ke=[],De=Ft.getCircleRadiusCorrection();for(const Ee of p){const Qe=r.getTile(Ee),$e=Qe.getBucket(c);if(!$e)continue;const In=y?$e.text:$e.icon;if(!In||!In.segments.get().length||!In.hasVisibleVertices)continue;const yn=In.programConfigurations.get(c.id),an=y||$e.sdfIcons,qn=y?$e.textSizeData:$e.iconSizeData,fr=jt||Ft.pitch!==0,pr=b.useProgram(Sd(an,y,$e),yn),vi=o.ak(qn,Ft.zoom),ti=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ee);let Ci,Ai,Sr,jr,oo=[0,0],ao=null;if(y)Ai=Qe.glyphAtlasTexture,Sr=bt.LINEAR,Ci=Qe.glyphAtlasTexture.size,$e.iconsInText&&(oo=Qe.imageAtlasTexture.size,ao=Qe.imageAtlasTexture,jr=fr||b.options.rotating||b.options.zooming||qn.kind==="composite"||qn.kind==="camera"?bt.LINEAR:bt.NEAREST);else{const Bi=c.layout.get("icon-size").constantOr(0)!==1||$e.iconsNeedLinear;Ai=Qe.imageAtlasTexture,Sr=an||b.options.rotating||b.options.zooming||Bi||fr?bt.LINEAR:bt.NEAREST,Ci=Qe.imageAtlasTexture.size}const so=o.az(Qe,1,b.transform.zoom),Wo=ir(Ot,b.transform,so),ys=o.K();o.an(ys,Wo);const Ql=gr(jt,Ot,b.transform,so),Vs=o.aA(Ft,Qe,A,T),Us=Ft.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!ot,applyTerrainMatrix:!0}),qo=le&&$e.hasTextData(),Au=c.layout.get("icon-text-fit")!=="none"&&qo&&$e.hasIconData();if(Wt){const Bi=b.style.map.terrain?(Ui,Mi)=>b.style.map.terrain.getElevation(Ee,Ui,Mi):null,Ii=c.layout.get("text-rotation-alignment")==="map";Pr($e,b,y,Wo,ys,jt,$,Ii,Ee.toUnwrapped(),Ft.width,Ft.height,Vs,Bi)}const Da=y&&le||Au,Oa=Wt||Da?cl:jt?Wo:b.transform.clipSpaceToPixelsMatrix,Jl=an&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Hs;Hs=an?$e.iconsInText?Lh(qn.kind,vi,Jt,jt,Wt,Da,b,Oa,Ql,Vs,Ci,oo,De):fs(qn.kind,vi,Jt,jt,Wt,Da,b,Oa,Ql,Vs,y,Ci,0,De):ol(qn.kind,vi,Jt,jt,Wt,Da,b,Oa,Ql,Vs,y,Ci,De);const tc={program:pr,buffers:In,uniformValues:Hs,projectionData:Us,atlasTexture:Ai,atlasTextureIcon:ao,atlasInterpolation:Sr,atlasInterpolationIcon:jr,isSDF:an,hasHalo:Jl};if(re&&$e.canOverlap){se=!0;const Bi=In.segments.get();for(const Ii of Bi)ke.push({segments:new o.aJ([Ii]),sortKey:Ii.sortKey,state:tc,terrainData:ti})}else ke.push({segments:In.segments,sortKey:0,state:tc,terrainData:ti})}se&&ke.sort((Ee,Qe)=>Ee.sortKey-Qe.sortKey);for(const Ee of ke){const Qe=Ee.state;if(ft.activeTexture.set(bt.TEXTURE0),Qe.atlasTexture.bind(Qe.atlasInterpolation,bt.CLAMP_TO_EDGE),Qe.atlasTextureIcon&&(ft.activeTexture.set(bt.TEXTURE1),Qe.atlasTextureIcon&&Qe.atlasTextureIcon.bind(Qe.atlasInterpolationIcon,bt.CLAMP_TO_EDGE)),Qe.isSDF){const $e=Qe.uniformValues;Qe.hasHalo&&($e.u_is_halo=1,Dh(Qe.buffers,Ee.segments,c,b,Qe.program,fe,J,it,$e,Qe.projectionData,Ee.terrainData)),$e.u_is_halo=0}Dh(Qe.buffers,Ee.segments,c,b,Qe.program,fe,J,it,Qe.uniformValues,Qe.projectionData,Ee.terrainData)}}function Dh(b,r,c,p,y,A,T,L,N,$,J){const it=p.context;y.draw(it,it.gl.TRIANGLES,A,T,L,Wr.backCCW,N,J,$,c.id,b.layoutVertexBuffer,b.indexBuffer,r,c.paint,p.transform.zoom,b.programConfigurations.get(c.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function Qu(b,r,c,p,y){const A=b.context,T=A.gl,L=Dr.disabled,N=new ur([T.ONE,T.ONE],o.b7.transparent,[!0,!0,!0,!0]),$=r.getBucket(c);if(!$)return;const J=p.key;let it=c.heatmapFbos.get(J);it||(it=Vf(A,r.tileSize,r.tileSize),c.heatmapFbos.set(J,it)),A.bindFramebuffer.set(it.framebuffer),A.viewport.set([0,0,r.tileSize,r.tileSize]),A.clear({color:o.b7.transparent});const ot=$.programConfigurations.get(c.id),ft=b.useProgram("heatmap",ot,!y),bt=b.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ft=b.style.map.terrain.getTerrainData(p);ft.draw(A,T.TRIANGLES,Fn.disabled,L,N,Wr.disabled,cu(r,b.transform.zoom,c.paint.get("heatmap-intensity"),1),Ft,bt,c.id,$.layoutVertexBuffer,$.indexBuffer,$.segments,c.paint,b.transform.zoom,ot)}function jf(b,r,c,p,y){const A=b.context,T=A.gl,L=b.transform;A.setColorMode(b.colorModeForRenderPass());const N=Ju(A,r),$=c.key,J=r.heatmapFbos.get($);if(!J)return;A.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,J.colorAttachment.get()),A.activeTexture.set(T.TEXTURE1),N.bind(T.LINEAR,T.CLAMP_TO_EDGE);const it=L.getProjectionData({overscaledTileID:c,applyTerrainMatrix:y,applyGlobeMatrix:!p});b.useProgram("heatmapTexture").draw(A,T.TRIANGLES,Fn.disabled,Dr.disabled,b.colorModeForRenderPass(),Wr.disabled,Ec(b,r,0,1),null,it,r.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,r.paint,L.zoom),J.destroy(),r.heatmapFbos.delete($)}function Vf(b,r,c){var p,y;const A=b.gl,T=A.createTexture();A.bindTexture(A.TEXTURE_2D,T),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR);const L=(p=b.HALF_FLOAT)!==null&&p!==void 0?p:A.UNSIGNED_BYTE,N=(y=b.RGBA16F)!==null&&y!==void 0?y:A.RGBA;A.texImage2D(A.TEXTURE_2D,0,N,r,c,0,A.RGBA,L,null);const $=b.createFramebuffer(r,c,!1,!1);return $.colorAttachment.set(T),$}function Ju(b,r){return r.colorRampTexture||(r.colorRampTexture=new K(b,r.colorRamp,b.gl.RGBA)),r.colorRampTexture}function Td(b,r,c,p,y){if(!c||!p||!p.imageAtlas)return;const A=p.imageAtlas.patternPositions;let T=A[c.to.toString()],L=A[c.from.toString()];if(!T&&L&&(T=L),!L&&T&&(L=T),!T||!L){const N=y.getPaintProperty(r);T=A[N],L=A[N]}T&&L&&b.setConstantPatternPositions(T,L)}function Uf(b,r,c,p,y,A,T,L){const N=b.context.gl,$="fill-pattern",J=c.paint.get($),it=J&&J.constantOr(1),ot=c.getCrossfadeParameters();let ft,bt,Ft,Ot,jt;const Wt=b.transform,Jt=c.paint.get("fill-translate"),re=c.paint.get("fill-translate-anchor");T?(bt=it&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ft=N.LINES):(bt=it?"fillPattern":"fill",ft=N.TRIANGLES);const se=J.constantOr(null);for(const fe of p){const le=r.getTile(fe);if(it&&!le.patternsLoaded())continue;const ke=le.getBucket(c);if(!ke)continue;const De=ke.programConfigurations.get(c.id),Ee=b.useProgram(bt,De),Qe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(fe);it&&(b.context.activeTexture.set(N.TEXTURE0),le.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),De.updatePaintBuffers(ot)),Td(De,$,se,le,c);const $e=Wt.getProjectionData({overscaledTileID:fe,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),In=o.aA(Wt,le,Jt,re);if(T){Ot=ke.indexBuffer2,jt=ke.segments2;const an=[N.drawingBufferWidth,N.drawingBufferHeight];Ft=bt==="fillOutlinePattern"&&it?ds(b,ot,le,an,In):Yu(an,In)}else Ot=ke.indexBuffer,jt=ke.segments,Ft=it?ks(b,ot,le,In):{u_fill_translate:In};let yn;if(b.renderPass==="translucent"&&L){const[an]=b.getStencilConfigForOverlapAndUpdateStencilID(p);yn=an[fe.overscaledZ]}else yn=b.stencilModeForClipping(fe);Ee.draw(b.context,ft,y,yn,A,Wr.backCCW,Ft,Qe,$e,c.id,ke.layoutVertexBuffer,Ot,jt,c.paint,b.transform.zoom,De)}}function Wi(b,r,c,p,y,A,T,L){const N=b.context,$=N.gl,J="fill-extrusion-pattern",it=c.paint.get(J),ot=it.constantOr(1),ft=c.getCrossfadeParameters(),bt=c.paint.get("fill-extrusion-opacity"),Ft=it.constantOr(null),Ot=b.transform;for(const jt of p){const Wt=r.getTile(jt),Jt=Wt.getBucket(c);if(!Jt)continue;const re=b.style.map.terrain&&b.style.map.terrain.getTerrainData(jt),se=Jt.programConfigurations.get(c.id),fe=b.useProgram(ot?"fillExtrusionPattern":"fillExtrusion",se);ot&&(b.context.activeTexture.set($.TEXTURE0),Wt.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),se.updatePaintBuffers(ft));const le=Ot.getProjectionData({overscaledTileID:jt,applyGlobeMatrix:!L,applyTerrainMatrix:!0});Td(se,J,Ft,Wt,c);const ke=o.aA(Ot,Wt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),De=c.paint.get("fill-extrusion-vertical-gradient"),Ee=ot?Nf(b,De,bt,ke,jt,ft,Wt):hs(b,De,bt,ke);fe.draw(N,N.gl.TRIANGLES,y,A,T,Wr.backCCW,Ee,re,le,c.id,Jt.layoutVertexBuffer,Jt.indexBuffer,Jt.segments,c.paint,b.transform.zoom,se,b.style.map.terrain&&Jt.centroidVertexBuffer)}}function Qi(b,r,c,p,y,A,T,L,N){var $;const J=b.style.projection,it=b.context,ot=b.transform,ft=it.gl,bt=b.useProgram("hillshade"),Ft=!b.options.moving;for(const Ot of p){const jt=r.getTile(Ot),Wt=jt.fbo;if(!Wt)continue;const Jt=J.getMeshFromTileID(it,Ot.canonical,L,!0,"raster"),re=($=b.style.map.terrain)===null||$===void 0?void 0:$.getTerrainData(Ot);it.activeTexture.set(ft.TEXTURE0),ft.bindTexture(ft.TEXTURE_2D,Wt.colorAttachment.get());const se=ot.getProjectionData({overscaledTileID:Ot,aligned:Ft,applyGlobeMatrix:!N,applyTerrainMatrix:!0});bt.draw(it,ft.TRIANGLES,A,y[Ot.overscaledZ],T,Wr.backCCW,Ul(b,jt,c),re,se,c.id,Jt.vertexBuffer,Jt.indexBuffer,Jt.segments)}}const Oh=[new o.P(0,0),new o.P(o.Z,0),new o.P(o.Z,o.Z),new o.P(0,o.Z)];function Pd(b,r,c,p,y,A,T,L,N=!1,$=!1){const J=p[p.length-1].overscaledZ,it=b.context,ot=it.gl,ft=b.useProgram("raster"),bt=b.transform,Ft=b.style.projection,Ot=b.colorModeForRenderPass(),jt=!b.options.moving;for(const Wt of p){const Jt=b.getDepthModeForSublayer(Wt.overscaledZ-J,c.paint.get("raster-opacity")===1?Fn.ReadWrite:Fn.ReadOnly,ot.LESS),re=r.getTile(Wt);re.registerFadeDuration(c.paint.get("raster-fade-duration"));const se=r.findLoadedParent(Wt,0),fe=r.findLoadedSibling(Wt),le=Hf(re,se||fe||null,r,c,b.transform,b.style.map.terrain);let ke,De;const Ee=c.paint.get("raster-resampling")==="nearest"?ot.NEAREST:ot.LINEAR;it.activeTexture.set(ot.TEXTURE0),re.texture.bind(Ee,ot.CLAMP_TO_EDGE,ot.LINEAR_MIPMAP_NEAREST),it.activeTexture.set(ot.TEXTURE1),se?(se.texture.bind(Ee,ot.CLAMP_TO_EDGE,ot.LINEAR_MIPMAP_NEAREST),ke=Math.pow(2,se.tileID.overscaledZ-re.tileID.overscaledZ),De=[re.tileID.canonical.x*ke%1,re.tileID.canonical.y*ke%1]):re.texture.bind(Ee,ot.CLAMP_TO_EDGE,ot.LINEAR_MIPMAP_NEAREST),re.texture.useMipmap&&it.extTextureFilterAnisotropic&&b.transform.pitch>20&&ot.texParameterf(ot.TEXTURE_2D,it.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,it.extTextureFilterAnisotropicMax);const Qe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Wt),$e=bt.getProjectionData({overscaledTileID:Wt,aligned:jt,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),In=Id(De||[0,0],ke||1,le,c,L),yn=Ft.getMeshFromTileID(it,Wt.canonical,A,T,"raster");ft.draw(it,ot.TRIANGLES,Jt,y?y[Wt.overscaledZ]:Dr.disabled,Ot,N?Wr.frontCCW:Wr.backCCW,In,Qe,$e,c.id,yn.vertexBuffer,yn.indexBuffer,yn.segments)}}function Hf(b,r,c,p,y,A){const T=p.paint.get("raster-fade-duration");if(!A&&T>0){const L=E.now(),N=(L-b.timeAdded)/T,$=r?(L-r.timeAdded)/T:-1,J=c.getSource(),it=he(y,{tileSize:J.tileSize,roundZoom:J.roundZoom}),ot=!r||Math.abs(r.tileID.overscaledZ-it)>Math.abs(b.tileID.overscaledZ-it),ft=ot&&b.refreshedUponExpiration?1:o.ae(ot?N:1-$,0,1);return b.refreshedUponExpiration&&N>=1&&(b.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ft}:{opacity:ft,mix:0}}return{opacity:1,mix:0}}const qi=new o.b7(1,0,0,1),ql=new o.b7(0,1,0,1),ea=new o.b7(0,0,1,1),zh=new o.b7(1,0,1,1),Rc=new o.b7(0,1,1,1);function mu(b,r,c,p){Ns(b,0,r+c/2,b.transform.width,c,p)}function Bs(b,r,c,p){Ns(b,r-c/2,0,c,b.transform.height,p)}function Ns(b,r,c,p,y,A){const T=b.context,L=T.gl;L.enable(L.SCISSOR_TEST),L.scissor(r*b.pixelRatio,c*b.pixelRatio,p*b.pixelRatio,y*b.pixelRatio),T.clear({color:A}),L.disable(L.SCISSOR_TEST)}function Dc(b,r,c){const p=b.context,y=p.gl,A=b.useProgram("debug"),T=Fn.disabled,L=Dr.disabled,N=b.colorModeForRenderPass(),$="$debug",J=b.style.map.terrain&&b.style.map.terrain.getTerrainData(c);p.activeTexture.set(y.TEXTURE0);const it=r.getTileByID(c.key).latestRawTileData,ot=Math.floor((it&&it.byteLength||0)/1024),ft=r.getTile(c).tileSize,bt=512/Math.min(ft,512)*(c.overscaledZ/b.transform.zoom)*.5;let Ft=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Ft+=` => ${c.overscaledZ}`),function(jt,Wt){jt.initDebugOverlayCanvas();const Jt=jt.debugOverlayCanvas,re=jt.context.gl,se=jt.debugOverlayCanvas.getContext("2d");se.clearRect(0,0,Jt.width,Jt.height),se.shadowColor="white",se.shadowBlur=2,se.lineWidth=1.5,se.strokeStyle="white",se.textBaseline="top",se.font="bold 36px Open Sans, sans-serif",se.fillText(Wt,5,5),se.strokeText(Wt,5,5),jt.debugOverlayTexture.update(Jt),jt.debugOverlayTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE)}(b,`${Ft} ${ot}kB`);const Ot=b.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});A.draw(p,y.TRIANGLES,T,L,ur.alphaBlended,Wr.disabled,Sa(o.b7.transparent,bt),null,Ot,$,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),A.draw(p,y.LINE_STRIP,T,L,N,Wr.disabled,Sa(o.b7.red),J,Ot,$,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function $f(b,r,c,p){const{isRenderingGlobe:y}=p,A=b.context,T=A.gl,L=b.transform,N=b.colorModeForRenderPass(),$=b.getDepthModeFor3D(),J=b.useProgram("terrain");A.bindFramebuffer.set(null),A.viewport.set([0,0,b.width,b.height]);for(const it of c){const ot=r.getTerrainMesh(it.tileID),ft=b.renderToTexture.getTexture(it),bt=r.getTerrainData(it.tileID);A.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,ft.texture);const Ft=r.getMeshFrameDelta(L.zoom),Ot=L.calculateFogMatrix(it.tileID.toUnwrapped()),jt=Ph(Ft,Ot,b.style.sky,L.pitch,y),Wt=L.getProjectionData({overscaledTileID:it.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});J.draw(A,T.TRIANGLES,$,Dr.disabled,N,Wr.backCCW,jt,bt,Wt,"terrain",ot.vertexBuffer,ot.indexBuffer,ot.segments)}}function Gf(b,r){if(!r.mesh){const c=new o.aI;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const p=new o.aK;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),r.mesh=new _e(b.createVertexBuffer(c,cn.members),b.createIndexBuffer(p),o.aJ.simpleSegment(0,0,c.length,p.length))}return r.mesh}class Qp{constructor(r,c){this.context=new Lc(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Fe.maxUnderzooming+Fe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new At}resize(r,c,p){if(this.width=Math.floor(r*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const r=this.context,c=new o.aI;c.emplaceBack(0,0),c.emplaceBack(o.Z,0),c.emplaceBack(0,o.Z),c.emplaceBack(o.Z,o.Z),this.tileExtentBuffer=r.createVertexBuffer(c,cn.members),this.tileExtentSegments=o.aJ.simpleSegment(0,0,4,2);const p=new o.aI;p.emplaceBack(0,0),p.emplaceBack(o.Z,0),p.emplaceBack(0,o.Z),p.emplaceBack(o.Z,o.Z),this.debugBuffer=r.createVertexBuffer(p,cn.members),this.debugSegments=o.aJ.simpleSegment(0,0,4,5);const y=new o.bY;y.emplaceBack(0,0,0,0),y.emplaceBack(o.Z,0,o.Z,0),y.emplaceBack(0,o.Z,0,o.Z),y.emplaceBack(o.Z,o.Z,o.Z,o.Z),this.rasterBoundsBuffer=r.createVertexBuffer(y,su.members),this.rasterBoundsSegments=o.aJ.simpleSegment(0,0,4,2);const A=new o.aI;A.emplaceBack(0,0),A.emplaceBack(o.Z,0),A.emplaceBack(0,o.Z),A.emplaceBack(o.Z,o.Z),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(A,cn.members),this.rasterBoundsSegmentsPosOnly=o.aJ.simpleSegment(0,0,4,5);const T=new o.aI;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(T,cn.members),this.viewportSegments=o.aJ.simpleSegment(0,0,4,2);const L=new o.bZ;L.emplaceBack(0),L.emplaceBack(1),L.emplaceBack(3),L.emplaceBack(2),L.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(L);const N=new o.aK;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(N);const $=this.context.gl;this.stencilClearMode=new Dr({func:$.ALWAYS,mask:0},0,255,$.ZERO,$.ZERO,$.ZERO),this.tileExtentMesh=new _e(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=o.K();o.bQ(p,0,this.width,this.height,0,0,1),o.M(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const y={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(r,c.TRIANGLES,Fn.disabled,this.stencilClearMode,ur.disabled,Wr.disabled,null,null,y,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c,p){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source,this.nextStencilID+c.length>256&&this.clearStencil();const y=this.context;y.setColorMode(ur.disabled),y.setDepthMode(Fn.disabled);const A={};for(const T of c)A[T.key]=this.nextStencilID++;this._renderTileMasks(A,c,p,!0),this._renderTileMasks(A,c,p,!1),this._tileClippingMaskIDs=A}_renderTileMasks(r,c,p,y){const A=this.context,T=A.gl,L=this.style.projection,N=this.transform,$=this.useProgram("clippingMask");for(const J of c){const it=r[J.key],ot=this.style.map.terrain&&this.style.map.terrain.getTerrainData(J),ft=L.getMeshFromTileID(this.context,J.canonical,y,!0,"stencil"),bt=N.getProjectionData({overscaledTileID:J,applyGlobeMatrix:!0,applyTerrainMatrix:!0});$.draw(A,T.TRIANGLES,Fn.disabled,new Dr({func:T.ALWAYS,mask:0},it,255,T.KEEP,T.KEEP,T.REPLACE),ur.disabled,p?Wr.disabled:Wr.backCCW,null,ot,bt,"$clipping",ft.vertexBuffer,ft.indexBuffer,ft.segments)}}_renderTilesDepthBuffer(){const r=this.context,c=r.gl,p=this.style.projection,y=this.transform,A=this.useProgram("depth"),T=this.getDepthModeFor3D(),L=Kt(y,{tileSize:y.tileSize});for(const N of L){const $=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N),J=p.getMeshFromTileID(this.context,N.canonical,!0,!0,"raster"),it=y.getProjectionData({overscaledTileID:N,applyGlobeMatrix:!0,applyTerrainMatrix:!0});A.draw(r,c.TRIANGLES,T,Dr.disabled,ur.disabled,Wr.backCCW,null,$,it,"$clipping",J.vertexBuffer,J.indexBuffer,J.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new Dr({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new Dr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const c=this.context.gl,p=r.sort((T,L)=>L.overscaledZ-T.overscaledZ),y=p[p.length-1].overscaledZ,A=p[0].overscaledZ-y+1;if(A>1){this.currentStencilSource=void 0,this.nextStencilID+A>256&&this.clearStencil();const T={};for(let L=0;L<A;L++)T[L+y]=new Dr({func:c.GEQUAL,mask:255},L+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=A,[T,p]}return[{[y]:Dr.disabled},p]}stencilConfigForOverlapTwoPass(r){const c=this.context.gl,p=r.sort((T,L)=>L.overscaledZ-T.overscaledZ),y=p[p.length-1].overscaledZ,A=p[0].overscaledZ-y+1;if(this.clearStencil(),A>1){const T={},L={};for(let N=0;N<A;N++)T[N+y]=new Dr({func:c.GREATER,mask:255},A+1+N,255,c.KEEP,c.KEEP,c.REPLACE),L[N+y]=new Dr({func:c.GREATER,mask:255},1+N,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*A+1,[T,L,p]}return this.nextStencilID=3,[{[y]:new Dr({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[y]:new Dr({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},p]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new ur([r.CONSTANT_COLOR,r.ONE],new o.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ur.unblended:ur.alphaBlended}getDepthModeForSublayer(r,c,p){if(!this.opaquePassEnabledForLayer())return Fn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Fn(p||this.context.gl.LEQUAL,c,[y,y])}getDepthModeFor3D(){return new Fn(this.context.gl.LEQUAL,Fn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){var p,y;this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(E.now()),this.imageManager.beginFrame();const A=this.style._order,T=this.style.sourceCaches,L={},N={},$={},J={isRenderingToTexture:!1,isRenderingGlobe:((p=r.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const ot in T){const ft=T[ot];ft.used&&ft.prepare(this.context),L[ot]=ft.getVisibleCoordinates(!1),N[ot]=L[ot].slice().reverse(),$[ot]=ft.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ot=0;ot<A.length;ot++)if(this.style._layers[A[ot]].is3D()){this.opaquePassCutoff=ot;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ot of A){const ft=this.style._layers[ot];if(!ft.hasOffscreenPass()||ft.isHidden(this.transform.zoom))continue;const bt=N[ft.source];(ft.type==="custom"||bt.length)&&this.renderLayer(this,T[ft.source],ft,bt,J)}if((y=this.style.projection)===null||y===void 0||y.updateGPUdependent({context:this.context,useProgram:ot=>this.useProgram(ot)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.b7.black:o.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(ot,ft){const bt=ot.context,Ft=bt.gl,Ot=((fe,le,ke)=>{const De=Math.cos(le.rollInRadians),Ee=Math.sin(le.rollInRadians),Qe=ae(le),$e=le.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:fe.properties.get("sky-color"),u_horizon_color:fe.properties.get("horizon-color"),u_horizon:[(le.width/2-Qe*Ee)*ke,(le.height/2+Qe*De)*ke],u_horizon_normal:[-Ee,De],u_sky_horizon_blend:fe.properties.get("sky-horizon-blend")*le.height/2*ke,u_sky_blend:$e}})(ft,ot.style.map.transform,ot.pixelRatio),jt=new Fn(Ft.LEQUAL,Fn.ReadWrite,[0,1]),Wt=Dr.disabled,Jt=ot.colorModeForRenderPass(),re=ot.useProgram("sky"),se=Gf(bt,ft);re.draw(bt,Ft.TRIANGLES,jt,Wt,Jt,Wr.disabled,Ot,null,void 0,"sky",se.vertexBuffer,se.indexBuffer,se.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=A.length-1;this.currentLayer>=0;this.currentLayer--){const ot=this.style._layers[A[this.currentLayer]],ft=T[ot.source],bt=L[ot.source];this._renderTileClippingMasks(ot,bt,!1),this.renderLayer(this,ft,ot,bt,J)}this.renderPass="translucent";let it=!1;for(this.currentLayer=0;this.currentLayer<A.length;this.currentLayer++){const ot=this.style._layers[A[this.currentLayer]],ft=T[ot.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ot,J))continue;this.opaquePassEnabledForLayer()||it||(it=!0,J.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const bt=(ot.type==="symbol"?$:N)[ot.source];this._renderTileClippingMasks(ot,L[ot.source],!1),this.renderLayer(this,ft,ot,bt,J)}if(J.isRenderingGlobe&&function(ot,ft,bt){const Ft=ot.context,Ot=Ft.gl,jt=ot.useProgram("atmosphere"),Wt=new Fn(Ot.LEQUAL,Fn.ReadOnly,[0,1]),Jt=ot.transform,re=function($e,In){const yn=$e.properties.get("position"),an=[-yn.x,-yn.y,-yn.z],qn=o.ad(new Float64Array(16));return $e.properties.get("anchor")==="map"&&(o.a_(qn,qn,In.rollInRadians),o.a$(qn,qn,-In.pitchInRadians),o.a_(qn,qn,In.bearingInRadians),o.a$(qn,qn,In.center.lat*Math.PI/180),o.bp(qn,qn,-In.center.lng*Math.PI/180)),o.bX(an,an,qn),an}(bt,ot.transform),se=Jt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),fe=ft.properties.get("atmosphere-blend")*se.projectionTransition;if(fe===0)return;const le=ro(Jt.worldSize,Jt.center.lat),ke=Jt.inverseProjectionMatrix,De=new Float64Array(4);De[3]=1,o.at(De,De,Jt.modelViewProjectionMatrix),De[0]/=De[3],De[1]/=De[3],De[2]/=De[3],De[3]=1,o.at(De,De,ke),De[0]/=De[3],De[1]/=De[3],De[2]/=De[3],De[3]=1;const Ee=(($e,In,yn,an,qn)=>({u_sun_pos:$e,u_atmosphere_blend:In,u_globe_position:yn,u_globe_radius:an,u_inv_proj_matrix:qn}))(re,fe,[De[0],De[1],De[2]],le,ke),Qe=Gf(Ft,ft);jt.draw(Ft,Ot.TRIANGLES,Wt,Dr.disabled,ur.alphaBlended,Wr.disabled,Ee,null,null,"atmosphere",Qe.vertexBuffer,Qe.indexBuffer,Qe.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ot=function(ft,bt){let Ft=null;const Ot=Object.values(ft._layers).flatMap(re=>re.source&&!re.isHidden(bt)?[ft.sourceCaches[re.source]]:[]),jt=Ot.filter(re=>re.getSource().type==="vector"),Wt=Ot.filter(re=>re.getSource().type!=="vector"),Jt=re=>{(!Ft||Ft.getSource().maxzoom<re.getSource().maxzoom)&&(Ft=re)};return jt.forEach(re=>Jt(re)),Ft||Wt.forEach(re=>Jt(re)),Ft}(this.style,this.transform.zoom);ot&&function(ft,bt,Ft){for(let Ot=0;Ot<Ft.length;Ot++)Dc(ft,bt,Ft[Ot])}(this,ot,ot.getVisibleCoordinates())}this.options.showPadding&&function(ot){const ft=ot.transform.padding;mu(ot,ot.transform.height-(ft.top||0),3,qi),mu(ot,ft.bottom||0,3,ql),Bs(ot,ft.left||0,3,ea),Bs(ot,ot.transform.width-(ft.right||0),3,zh);const bt=ot.transform.centerPoint;(function(Ft,Ot,jt,Wt){Ns(Ft,Ot-1,jt-10,2,20,Wt),Ns(Ft,Ot-10,jt-1,20,2,Wt)})(ot,bt.x,ot.transform.height-bt.y,Rc)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=r?!o.b_(c,p):!o.b$(c,p)),y||(y=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),y&&(o.c0(c,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(A,T){const L=A.context,N=L.gl,$=A.transform,J=ur.unblended,it=new Fn(N.LEQUAL,Fn.ReadWrite,[0,1]),ot=T.sourceCache.getRenderableTiles(),ft=A.useProgram("terrainDepth");L.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),L.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),L.clear({color:o.b7.transparent,depth:1});for(const bt of ot){const Ft=T.getTerrainMesh(bt.tileID),Ot=T.getTerrainData(bt.tileID),jt=$.getProjectionData({overscaledTileID:bt.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Wt={u_ele_delta:T.getMeshFrameDelta($.zoom)};ft.draw(L,N.TRIANGLES,it,Dr.disabled,J,Wr.backCCW,Wt,Ot,jt,"terrain",Ft.vertexBuffer,Ft.indexBuffer,Ft.segments)}L.bindFramebuffer.set(null),L.viewport.set([0,0,A.width,A.height])}(this,this.style.map.terrain),function(A,T){const L=A.context,N=L.gl,$=A.transform,J=ur.unblended,it=new Fn(N.LEQUAL,Fn.ReadWrite,[0,1]),ot=T.getCoordsTexture(),ft=T.sourceCache.getRenderableTiles(),bt=A.useProgram("terrainCoords");L.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),L.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),L.clear({color:o.b7.transparent,depth:1}),T.coordsIndex=[];for(const Ft of ft){const Ot=T.getTerrainMesh(Ft.tileID),jt=T.getTerrainData(Ft.tileID);L.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,ot.texture);const Wt={u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta($.zoom)},Jt=$.getProjectionData({overscaledTileID:Ft.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});bt.draw(L,N.TRIANGLES,it,Dr.disabled,J,Wr.backCCW,Wt,jt,Jt,"terrain",Ot.vertexBuffer,Ot.indexBuffer,Ot.segments),T.coordsIndex.push(Ft.tileID.key)}L.bindFramebuffer.set(null),L.viewport.set([0,0,A.width,A.height])}(this,this.style.map.terrain))}renderLayer(r,c,p,y,A){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(y||[]).length)&&(this.id=p.id,o.c1(p)?function(T,L,N,$,J,it){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:ot}=it,ft=Dr.disabled,bt=T.colorModeForRenderPass();(N._unevaluatedLayout.hasValue("text-variable-anchor")||N._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Ft,Ot,jt,Wt,Jt,re,se,fe,le){const ke=Ot.transform,De=Ot.style.map.terrain,Ee=Jt==="map",Qe=re==="map";for(const $e of Ft){const In=Wt.getTile($e),yn=In.getBucket(jt);if(!yn||!yn.text||!yn.text.segments.get().length)continue;const an=o.ak(yn.textSizeData,ke.zoom),qn=o.az(In,1,Ot.transform.zoom),fr=ir(Ee,Ot.transform,qn),pr=jt.layout.get("icon-text-fit")!=="none"&&yn.hasIconData();if(an){const vi=Math.pow(2,ke.zoom-In.tileID.overscaledZ),ti=De?(Ci,Ai)=>De.getElevation($e,Ci,Ai):null;Md(yn,Ee,Qe,le,ke,fr,vi,an,pr,o.aA(ke,In,se,fe),$e.toUnwrapped(),ti)}}}($,T,N,L,N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),J),N.paint.get("icon-opacity").constantOr(1)!==0&&Ed(T,L,N,$,!1,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),N.layout.get("icon-rotation-alignment"),N.layout.get("icon-pitch-alignment"),N.layout.get("icon-keep-upright"),ft,bt,ot),N.paint.get("text-opacity").constantOr(1)!==0&&Ed(T,L,N,$,!0,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.layout.get("text-keep-upright"),ft,bt,ot),L.map.showCollisionBoxes&&(Fs(T,L,N,$,!0),Fs(T,L,N,$,!1))}(r,c,p,y,this.style.placement.variableOffsets,A):o.c2(p)?function(T,L,N,$,J){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:it}=J,ot=N.paint.get("circle-opacity"),ft=N.paint.get("circle-stroke-width"),bt=N.paint.get("circle-stroke-opacity"),Ft=!N.layout.get("circle-sort-key").isConstant();if(ot.constantOr(1)===0&&(ft.constantOr(1)===0||bt.constantOr(1)===0))return;const Ot=T.context,jt=Ot.gl,Wt=T.transform,Jt=T.getDepthModeForSublayer(0,Fn.ReadOnly),re=Dr.disabled,se=T.colorModeForRenderPass(),fe=[],le=Wt.getCircleRadiusCorrection();for(let ke=0;ke<$.length;ke++){const De=$[ke],Ee=L.getTile(De),Qe=Ee.getBucket(N);if(!Qe)continue;const $e=N.paint.get("circle-translate"),In=N.paint.get("circle-translate-anchor"),yn=o.aA(Wt,Ee,$e,In),an=Qe.programConfigurations.get(N.id),qn=T.useProgram("circle",an),fr=Qe.layoutVertexBuffer,pr=Qe.indexBuffer,vi=T.style.map.terrain&&T.style.map.terrain.getTerrainData(De),ti={programConfiguration:an,program:qn,layoutVertexBuffer:fr,indexBuffer:pr,uniformValues:Ga(T,Ee,N,yn,le),terrainData:vi,projectionData:Wt.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!it,applyTerrainMatrix:!0})};if(Ft){const Ci=Qe.segments.get();for(const Ai of Ci)fe.push({segments:new o.aJ([Ai]),sortKey:Ai.sortKey,state:ti})}else fe.push({segments:Qe.segments,sortKey:0,state:ti})}Ft&&fe.sort((ke,De)=>ke.sortKey-De.sortKey);for(const ke of fe){const{programConfiguration:De,program:Ee,layoutVertexBuffer:Qe,indexBuffer:$e,uniformValues:In,terrainData:yn,projectionData:an}=ke.state;Ee.draw(Ot,jt.TRIANGLES,Jt,re,se,Wr.backCCW,In,yn,an,N.id,Qe,$e,ke.segments,N.paint,T.transform.zoom,De)}}(r,c,p,y,A):o.c3(p)?function(T,L,N,$,J){if(N.paint.get("heatmap-opacity")===0)return;const it=T.context,{isRenderingToTexture:ot,isRenderingGlobe:ft}=J;if(T.style.map.terrain){for(const bt of $){const Ft=L.getTile(bt);L.hasRenderableParent(bt)||(T.renderPass==="offscreen"?Qu(T,Ft,N,bt,ft):T.renderPass==="translucent"&&jf(T,N,bt,ot,ft))}it.viewport.set([0,0,T.width,T.height])}else T.renderPass==="offscreen"?function(bt,Ft,Ot,jt){const Wt=bt.context,Jt=Wt.gl,re=bt.transform,se=Dr.disabled,fe=new ur([Jt.ONE,Jt.ONE],o.b7.transparent,[!0,!0,!0,!0]);(function(le,ke,De){const Ee=le.gl;le.activeTexture.set(Ee.TEXTURE1),le.viewport.set([0,0,ke.width/4,ke.height/4]);let Qe=De.heatmapFbos.get(o.bU);Qe?(Ee.bindTexture(Ee.TEXTURE_2D,Qe.colorAttachment.get()),le.bindFramebuffer.set(Qe.framebuffer)):(Qe=Vf(le,ke.width/4,ke.height/4),De.heatmapFbos.set(o.bU,Qe))})(Wt,bt,Ot),Wt.clear({color:o.b7.transparent});for(let le=0;le<jt.length;le++){const ke=jt[le];if(Ft.hasRenderableParent(ke))continue;const De=Ft.getTile(ke),Ee=De.getBucket(Ot);if(!Ee)continue;const Qe=Ee.programConfigurations.get(Ot.id),$e=bt.useProgram("heatmap",Qe),In=re.getProjectionData({overscaledTileID:ke,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),yn=re.getCircleRadiusCorrection();$e.draw(Wt,Jt.TRIANGLES,Fn.disabled,se,fe,Wr.backCCW,cu(De,re.zoom,Ot.paint.get("heatmap-intensity"),yn),null,In,Ot.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,Ot.paint,re.zoom,Qe)}Wt.viewport.set([0,0,bt.width,bt.height])}(T,L,N,$):T.renderPass==="translucent"&&function(bt,Ft){const Ot=bt.context,jt=Ot.gl;Ot.setColorMode(bt.colorModeForRenderPass());const Wt=Ft.heatmapFbos.get(o.bU);Wt&&(Ot.activeTexture.set(jt.TEXTURE0),jt.bindTexture(jt.TEXTURE_2D,Wt.colorAttachment.get()),Ot.activeTexture.set(jt.TEXTURE1),Ju(Ot,Ft).bind(jt.LINEAR,jt.CLAMP_TO_EDGE),bt.useProgram("heatmapTexture").draw(Ot,jt.TRIANGLES,Fn.disabled,Dr.disabled,bt.colorModeForRenderPass(),Wr.disabled,Ec(bt,Ft,0,1),null,null,Ft.id,bt.viewportBuffer,bt.quadTriangleIndexBuffer,bt.viewportSegments,Ft.paint,bt.transform.zoom))}(T,N)}(r,c,p,y,A):o.c4(p)?function(T,L,N,$,J){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:it}=J,ot=N.paint.get("line-opacity"),ft=N.paint.get("line-width");if(ot.constantOr(1)===0||ft.constantOr(1)===0)return;const bt=T.getDepthModeForSublayer(0,Fn.ReadOnly),Ft=T.colorModeForRenderPass(),Ot=N.paint.get("line-dasharray"),jt=N.paint.get("line-pattern"),Wt=jt.constantOr(1),Jt=N.paint.get("line-gradient"),re=N.getCrossfadeParameters(),se=Wt?"linePattern":Ot?"lineSDF":Jt?"lineGradient":"line",fe=T.context,le=fe.gl,ke=T.transform;let De=!0;for(const Ee of $){const Qe=L.getTile(Ee);if(Wt&&!Qe.patternsLoaded())continue;const $e=Qe.getBucket(N);if(!$e)continue;const In=$e.programConfigurations.get(N.id),yn=T.context.program.get(),an=T.useProgram(se,In),qn=De||an.program!==yn,fr=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ee),pr=jt.constantOr(null);if(pr&&Qe.imageAtlas){const Sr=Qe.imageAtlas,jr=Sr.patternPositions[pr.to.toString()],oo=Sr.patternPositions[pr.from.toString()];jr&&oo&&In.setConstantPatternPositions(jr,oo)}const vi=ke.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!it,applyTerrainMatrix:!0}),ti=ke.getPixelScale(),Ci=Wt?kh(T,Qe,N,ti,re):Ot?hu(T,Qe,N,ti,Ot,re):Jt?Tc(T,Qe,N,ti,$e.lineClipsArray.length):il(T,Qe,N,ti);if(Wt)fe.activeTexture.set(le.TEXTURE0),Qe.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),In.updatePaintBuffers(re);else if(Ot&&(qn||T.lineAtlas.dirty))fe.activeTexture.set(le.TEXTURE0),T.lineAtlas.bind(fe);else if(Jt){const Sr=$e.gradients[N.id];let jr=Sr.texture;if(N.gradientVersion!==Sr.version){let oo=256;if(N.stepInterpolant){const ao=L.getSource().maxzoom,so=Ee.canonical.z===ao?Math.ceil(1<<T.transform.maxZoom-Ee.canonical.z):1;oo=o.ae(o.bV($e.maxLineLength/o.Z*1024*so),256,fe.maxTextureSize)}Sr.gradient=o.bW({expression:N.gradientExpression(),evaluationKey:"lineProgress",resolution:oo,image:Sr.gradient||void 0,clips:$e.lineClipsArray}),Sr.texture?Sr.texture.update(Sr.gradient):Sr.texture=new K(fe,Sr.gradient,le.RGBA),Sr.version=N.gradientVersion,jr=Sr.texture}fe.activeTexture.set(le.TEXTURE0),jr.bind(N.stepInterpolant?le.NEAREST:le.LINEAR,le.CLAMP_TO_EDGE)}let Ai;if(it){const[Sr]=T.getStencilConfigForOverlapAndUpdateStencilID($);Ai=Sr[Ee.overscaledZ]}else Ai=T.stencilModeForClipping(Ee);an.draw(fe,le.TRIANGLES,bt,Ai,Ft,Wr.disabled,Ci,fr,vi,N.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,N.paint,T.transform.zoom,In,$e.layoutVertexBuffer2),De=!1}}(r,c,p,y,A):o.c5(p)?function(T,L,N,$,J){const it=N.paint.get("fill-color"),ot=N.paint.get("fill-opacity");if(ot.constantOr(1)===0)return;const{isRenderingToTexture:ft}=J,bt=T.colorModeForRenderPass(),Ft=N.paint.get("fill-pattern"),Ot=T.opaquePassEnabledForLayer()&&!Ft.constantOr(1)&&it.constantOr(o.b7.transparent).a===1&&ot.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===Ot){const jt=T.getDepthModeForSublayer(1,T.renderPass==="opaque"?Fn.ReadWrite:Fn.ReadOnly);Uf(T,L,N,$,jt,bt,!1,ft)}if(T.renderPass==="translucent"&&N.paint.get("fill-antialias")){const jt=T.getDepthModeForSublayer(N.getPaintProperty("fill-outline-color")?2:0,Fn.ReadOnly);Uf(T,L,N,$,jt,bt,!0,ft)}}(r,c,p,y,A):o.c6(p)?function(T,L,N,$,J){const it=N.paint.get("fill-extrusion-opacity");if(it===0)return;const{isRenderingToTexture:ot}=J;if(T.renderPass==="translucent"){const ft=new Fn(T.context.gl.LEQUAL,Fn.ReadWrite,T.depthRangeFor3D);if(it!==1||N.paint.get("fill-extrusion-pattern").constantOr(1))Wi(T,L,N,$,ft,Dr.disabled,ur.disabled,ot),Wi(T,L,N,$,ft,T.stencilModeFor3D(),T.colorModeForRenderPass(),ot);else{const bt=T.colorModeForRenderPass();Wi(T,L,N,$,ft,Dr.disabled,bt,ot)}}}(r,c,p,y,A):o.c7(p)?function(T,L,N,$,J){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const{isRenderingToTexture:it}=J,ot=T.context,ft=T.style.projection.useSubdivision,bt=T.getDepthModeForSublayer(0,Fn.ReadOnly),Ft=T.colorModeForRenderPass();if(T.renderPass==="offscreen")(function(Ot,jt,Wt,Jt,re,se,fe){const le=Ot.context,ke=le.gl;for(const De of Wt){const Ee=jt.getTile(De),Qe=Ee.dem;if(!Qe||!Qe.data||!Ee.needsHillshadePrepare)continue;const $e=Qe.dim,In=Qe.stride,yn=Qe.getPixels();if(le.activeTexture.set(ke.TEXTURE1),le.pixelStoreUnpackPremultiplyAlpha.set(!1),Ee.demTexture=Ee.demTexture||Ot.getTileTexture(In),Ee.demTexture){const qn=Ee.demTexture;qn.update(yn,{premultiply:!1}),qn.bind(ke.NEAREST,ke.CLAMP_TO_EDGE)}else Ee.demTexture=new K(le,yn,ke.RGBA,{premultiply:!1}),Ee.demTexture.bind(ke.NEAREST,ke.CLAMP_TO_EDGE);le.activeTexture.set(ke.TEXTURE0);let an=Ee.fbo;if(!an){const qn=new K(le,{width:$e,height:$e,data:null},ke.RGBA);qn.bind(ke.LINEAR,ke.CLAMP_TO_EDGE),an=Ee.fbo=le.createFramebuffer($e,$e,!0,!1),an.colorAttachment.set(qn.texture)}le.bindFramebuffer.set(an.framebuffer),le.viewport.set([0,0,$e,$e]),Ot.useProgram("hillshadePrepare").draw(le,ke.TRIANGLES,re,se,fe,Wr.disabled,Zi(Ee.tileID,Qe),null,null,Jt.id,Ot.rasterBoundsBuffer,Ot.quadTriangleIndexBuffer,Ot.rasterBoundsSegments),Ee.needsHillshadePrepare=!1}})(T,L,$,N,bt,Dr.disabled,Ft),ot.viewport.set([0,0,T.width,T.height]);else if(T.renderPass==="translucent")if(ft){const[Ot,jt,Wt]=T.stencilConfigForOverlapTwoPass($);Qi(T,L,N,Wt,Ot,bt,Ft,!1,it),Qi(T,L,N,Wt,jt,bt,Ft,!0,it)}else{const[Ot,jt]=T.getStencilConfigForOverlapAndUpdateStencilID($);Qi(T,L,N,jt,Ot,bt,Ft,!1,it)}}(r,c,p,y,A):o.c8(p)?function(T,L,N,$,J){if(T.renderPass!=="translucent"||N.paint.get("raster-opacity")===0||!$.length)return;const{isRenderingToTexture:it}=J,ot=L.getSource(),ft=T.style.projection.useSubdivision;if(ot instanceof ne)Pd(T,L,N,$,null,!1,!1,ot.tileCoords,ot.flippedWindingOrder,it);else if(ft){const[bt,Ft,Ot]=T.stencilConfigForOverlapTwoPass($);Pd(T,L,N,Ot,bt,!1,!0,Oh,!1,it),Pd(T,L,N,Ot,Ft,!0,!0,Oh,!1,it)}else{const[bt,Ft]=T.getStencilConfigForOverlapAndUpdateStencilID($);Pd(T,L,N,Ft,bt,!1,!0,Oh,!1,it)}}(r,c,p,y,A):o.c9(p)?function(T,L,N,$,J){const it=N.paint.get("background-color"),ot=N.paint.get("background-opacity");if(ot===0)return;const{isRenderingToTexture:ft}=J,bt=T.context,Ft=bt.gl,Ot=T.style.projection,jt=T.transform,Wt=jt.tileSize,Jt=N.paint.get("background-pattern");if(T.isPatternMissing(Jt))return;const re=!Jt&&it.a===1&&ot===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==re)return;const se=Dr.disabled,fe=T.getDepthModeForSublayer(0,re==="opaque"?Fn.ReadWrite:Fn.ReadOnly),le=T.colorModeForRenderPass(),ke=T.useProgram(Jt?"backgroundPattern":"background"),De=$||Kt(jt,{tileSize:Wt,terrain:T.style.map.terrain});Jt&&(bt.activeTexture.set(Ft.TEXTURE0),T.imageManager.bind(T.context));const Ee=N.getCrossfadeParameters();for(const Qe of De){const $e=jt.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!ft,applyTerrainMatrix:!0}),In=Jt?ha(ot,T,Jt,{tileID:Qe,tileSize:Wt},Ee):Pc(ot,it),yn=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Qe),an=Ot.getMeshFromTileID(bt,Qe.canonical,!1,!0,"raster");ke.draw(bt,Ft.TRIANGLES,fe,se,le,Wr.backCCW,In,yn,$e,N.id,an.vertexBuffer,an.indexBuffer,an.segments)}}(r,0,p,y,A):o.ca(p)&&function(T,L,N,$){const{isRenderingGlobe:J}=$,it=T.context,ot=N.implementation,ft=T.style.projection,bt=T.transform,Ft=bt.getProjectionDataForCustomLayer(J),Ot={farZ:bt.farZ,nearZ:bt.nearZ,fov:bt.fov*Math.PI/180,modelViewProjectionMatrix:bt.modelViewProjectionMatrix,projectionMatrix:bt.projectionMatrix,shaderData:{variantName:ft.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ft.shaderPreludeCode.vertexSource}`,define:ft.shaderDefine},defaultProjectionData:Ft},jt=ot.renderingMode?ot.renderingMode:"2d";if(T.renderPass==="offscreen"){const Wt=ot.prerender;Wt&&(T.setCustomLayerDefaults(),it.setColorMode(T.colorModeForRenderPass()),Wt.call(ot,it.gl,Ot),it.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),it.setColorMode(T.colorModeForRenderPass()),it.setStencilMode(Dr.disabled);const Wt=jt==="3d"?T.getDepthModeFor3D():T.getDepthModeForSublayer(0,Fn.ReadOnly);it.setDepthMode(Wt),ot.render(it.gl,Ot),it.setDirty(),T.setBaseState(),it.bindFramebuffer.set(null)}}(r,0,p,A))}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),p=this.imageManager.getPattern(r.to.toString());return!c||!p}useProgram(r,c,p=!1){this.cache=this.cache||{};const y=!!this.style.map.terrain,A=this.style.projection,T=r+(c?c.cacheKey:"")+`/${p?An:A.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(y?"/terrain":"");return this.cache[T]||(this.cache[T]=new Mc(this.context,Zt[r],c,$l[r],this._showOverdrawInspector,y,p?Zt.projectionMercator:A.shaderPreludeCode,p?dn:A.shaderDefine)),this.cache[T]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new K(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}function Zf(b,r){let c,p=!1,y=null,A=null;const T=()=>{y=null,p&&(b.apply(A,c),y=setTimeout(T,r),p=!1)};return(...L)=>(p=!0,A=this,c=L,y||T(),y)}class Wf{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(p=y)}),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const p=c.join("/");let y=p;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${p}`);let A=window.location.hash.replace(y,"");A.startsWith("#&")?A=A.slice(0,1)+A.slice(2):A==="#"&&(A="");let T=window.location.href.replace(/(#.+)?$/,A);T=T.replace("&&","&"),window.history.replaceState(window.history.state,null,T)},this._updateHash=Zf(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,y=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),A=Math.pow(10,y),T=Math.round(c.lng*A)/A,L=Math.round(c.lat*A)/A,N=this._map.getBearing(),$=this._map.getPitch();let J="";if(J+=r?`/${T}/${L}/${p}`:`${p}/${L}/${T}`,(N||$)&&(J+="/"+Math.round(10*N)/10),$&&(J+=`/${Math.round($)}`),this._hashName){const it=this._hashName;let ot=!1;const ft=window.location.hash.slice(1).split("&").map(bt=>{const Ft=bt.split("=")[0];return Ft===it?(ot=!0,`${Ft}=${J}`):bt}).filter(bt=>bt);return ot||ft.push(`${it}=${J}`),`#${ft.join("&")}`}return`#${J}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new o.Q(+r[2],+r[1])}catch{return!1}const c=+r[0],p=+(r[3]||0),y=+(r[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&p>=-180&&p<=180&&y>=this._map.getMinPitch()&&y<=this._map.getMaxPitch()}}const Pa={linearity:.3,easing:o.cb(0,0,.3,1)},th=o.e({deceleration:2500,maxSpeed:1400},Pa),qf=o.e({deceleration:20,maxSpeed:1400},Pa),St=o.e({deceleration:1e3,maxSpeed:360},Pa),gu=o.e({deceleration:1e3,maxSpeed:90},Pa),Fh=o.e({deceleration:1e3,maxSpeed:360},Pa);class qa{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:E.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=E.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:A}of this._inertiaBuffer)c.zoom+=A.zoomDelta||0,c.bearing+=A.bearingDelta||0,c.pitch+=A.pitchDelta||0,c.roll+=A.rollDelta||0,A.panDelta&&c.pan._add(A.panDelta),A.around&&(c.around=A.around),A.pinchAround&&(c.pinchAround=A.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const A=Oc(c.pan.mag(),p,o.e({},th,r||{})),T=c.pan.mult(A.amount/c.pan.mag()),L=this._map.cameraHelper.handlePanInertia(T,this._map.transform);y.center=L.easingCenter,y.offset=L.easingOffset,kr(y,A)}if(c.zoom){const A=Oc(c.zoom,p,qf);y.zoom=this._map.transform.zoom+A.amount,kr(y,A)}if(c.bearing){const A=Oc(c.bearing,p,St);y.bearing=this._map.transform.bearing+o.ae(A.amount,-179,179),kr(y,A)}if(c.pitch){const A=Oc(c.pitch,p,gu);y.pitch=this._map.transform.pitch+A.amount,kr(y,A)}if(c.roll){const A=Oc(c.roll,p,Fh);y.roll=this._map.transform.roll+o.ae(A.amount,-179,179),kr(y,A)}if(y.zoom||y.bearing){const A=c.pinchAround===void 0?c.around:c.pinchAround;y.around=A?this._map.unproject(A):this._map.getCenter()}return this.clear(),o.e(y,{noMoveStart:!0})}}function kr(b,r){(!b.duration||b.duration<r.duration)&&(b.duration=r.duration,b.easing=r.easing)}function Oc(b,r,c){const{maxSpeed:p,linearity:y,deceleration:A}=c,T=o.ae(b*y/(r/1e3),-p,p),L=Math.abs(T)/(A*y);return{easing:c.easing,duration:1e3*L,amount:T*(L/2)}}class ka extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,p,y={}){p=p instanceof MouseEvent?p:new MouseEvent(r,p);const A=S.mousePos(c.getCanvas(),p),T=c.unproject(A);super(r,o.e({point:A,lngLat:T,originalEvent:p},y)),this._defaultPrevented=!1,this.target=c}}class ma extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,p){const y=r==="touchend"?p.changedTouches:p.touches,A=S.touchPos(c.getCanvasContainer(),y),T=A.map(N=>c.unproject(N)),L=A.reduce((N,$,J,it)=>N.add($.div(it.length)),new o.P(0,0));super(r,{points:A,point:L,lngLats:T,lngLat:c.unproject(L),originalEvent:p}),this._defaultPrevented=!1}}class Zo extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,p){super(r,{originalEvent:p}),this._defaultPrevented=!1}}class Jp{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Zo(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new ka(r.type,this._map,r))}mouseup(r){this._map.fire(new ka(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new ka(r.type,this._map,r))}dblclick(r){return this._firePreventable(new ka(r.type,this._map,r))}mouseover(r){this._map.fire(new ka(r.type,this._map,r))}mouseout(r){this._map.fire(new ka(r.type,this._map,r))}touchstart(r){return this._firePreventable(new ma(r.type,this._map,r))}touchmove(r){this._map.fire(new ma(r.type,this._map,r))}touchend(r){this._map.fire(new ma(r.type,this._map,r))}touchcancel(r){this._map.fire(new ma(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hl{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new ka(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ka("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new ka(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class dl{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(o.P.convert(r),this._map.terrain)}}class tm{constructor(r,c){this._map=r,this._tr=new dl(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(S.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=p,this._box||(this._box=S.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const A=Math.min(y.x,p.x),T=Math.max(y.x,p.x),L=Math.min(y.y,p.y),N=Math.max(y.y,p.y);S.setTransform(this._box,`translate(${A}px,${L}px)`),this._box.style.width=T-A+"px",this._box.style.height=N-L+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const p=this._startPos,y=c;if(this.reset(),S.suppressClick(),p.x!==y.x||p.y!==y.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:r})),{cameraAnimation:A=>A.fitScreenCoordinates(p,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(S.remove(this._box),this._box=null),S.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new o.l(r,{originalEvent:c}))}}function Kf(b,r){if(b.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${r.length}`);const c={};for(let p=0;p<b.length;p++)c[b[p].identifier]=r[p];return c}class Kl{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),p.length===this.numTouches&&(this.centroid=function(y){const A=new o.P(0,0);for(const T of y)A._add(T);return A.div(y.length)}(c),this.touches=Kf(p,c)))}touchmove(r,c,p){if(this.aborted||!this.centroid)return;const y=Kf(p,c);for(const A in this.touches){const T=y[A];(!T||T.dist(this.touches[A])>30)&&(this.aborted=!0)}}touchend(r,c,p){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Yf{constructor(r){this.singleTap=new Kl(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,p){this.singleTap.touchstart(r,c,p)}touchmove(r,c,p){this.singleTap.touchmove(r,c,p)}touchend(r,c,p){const y=this.singleTap.touchend(r,c,p);if(y){const A=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(y)<30;if(A&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class em{constructor(r){this._tr=new dl(r),this._zoomIn=new Yf({numTouches:1,numTaps:2}),this._zoomOut=new Yf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,p){this._zoomIn.touchstart(r,c,p),this._zoomOut.touchstart(r,c,p)}touchmove(r,c,p){this._zoomIn.touchmove(r,c,p),this._zoomOut.touchmove(r,c,p)}touchend(r,c,p){const y=this._zoomIn.touchend(r,c,p),A=this._zoomOut.touchend(r,c,p),T=this._tr;return y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(y)},{originalEvent:r})}):A?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(A)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yl{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const y=Array.isArray(c)?c[0]:c;return!this._moved&&y.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(p,y))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&S.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Xl={0:1,2:2};class On{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=S.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(c,p){const y=Xl[p];return c.buttons===void 0||(c.buttons&y)!==y}(r,this._eventButton)}isValidEndEvent(r){return S.mouseButton(r)===this._eventButton}}class fl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class Xf{constructor(r=new On({checkCorrectEvent:()=>!0}),c=new fl){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(r,c,p){return r instanceof MouseEvent?c(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?p(r):void 0}startMove(r){this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(r){this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(r){return this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(r){return this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(r){return this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const Bh=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=r=>{r.preventDefault()}};class Nh{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,p){return this._calculateTransform(r,c,p)}touchmove(r,c,p){if(this._active){if(!this._shouldBePrevented(p.length))return r.preventDefault(),this._calculateTransform(r,c,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,p){this._calculateTransform(r,c,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,p){p.length>0&&(this._active=!0);const y=Kf(p,c),A=new o.P(0,0),T=new o.P(0,0);let L=0;for(const $ in y){const J=y[$],it=this._touches[$];it&&(A._add(J),T._add(J.sub(it)),L++,y[$]=J)}if(this._touches=y,this._shouldBePrevented(L)||!T.mag())return;const N=T.div(L);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:A.div(L),panDelta:N}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,p){if(!this._firstTwoTouches)return;r.preventDefault();const[y,A]=this._firstTwoTouches,T=jh(p,c,y),L=jh(p,c,A);if(!T||!L)return;const N=this._aroundCenter?null:T.add(L).div(2);return this._move([T,L],N,r)}touchend(r,c,p){if(!this._firstTwoTouches)return;const[y,A]=this._firstTwoTouches,T=jh(p,c,y),L=jh(p,c,A);T&&L||(this._active&&S.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function jh(b,r,c){for(let p=0;p<b.length;p++)if(b[p].identifier===c)return r[p]}function Ar(b,r){return Math.log(b/r)/Math.LN2}class kd extends yu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const p=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Ar(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ar(this._distance,p),pinchAround:c}}}function nm(b,r){return 180*b.angleWith(r)/Math.PI}class La extends yu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,p){const y=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:nm(this._vector,y),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,p=nm(r,this._startVector);return Math.abs(p)<c}}function Qf(b){return Math.abs(b.y)>Math.abs(b.x)}class rm extends yu{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,p){super.touchstart(r,c,p),this._currentTouchCount=p.length}_start(r){this._lastPoints=r,Qf(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=r[0].sub(this._lastPoints[0]),A=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,A,p.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(y.y+A.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,p){if(this._valid!==void 0)return this._valid;const y=r.mag()>=2,A=c.mag()>=2;if(!y&&!A)return;if(!y||!A)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const T=r.y>0==c.y>0;return Qf(r)&&Qf(c)&&T}}const im={panStep:100,bearingStep:15,pitchStep:10};class Ld{constructor(r){this._tr=new dl(r);const c=im;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,p=0,y=0,A=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?p=-1:(r.preventDefault(),A=-1);break;case 39:r.shiftKey?p=1:(r.preventDefault(),A=1);break;case 38:r.shiftKey?y=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?y=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(p=0,y=0),{cameraAnimation:L=>{const N=this._tr;L.easeTo({duration:300,easeId:"keyboardHandler",easing:om,zoom:c?Math.round(N.zoom)+c*(r.shiftKey?2:1):N.zoom,bearing:N.bearing+p*this._bearingStep,pitch:N.pitch+y*this._pitchStep,offset:[-A*this._panStep,-T*this._panStep],center:N.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function om(b){return b*(2-b)}const Jf=4.000244140625;class Rd{constructor(r,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=r,this._tr=new dl(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const p=E.now(),y=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%Jf==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=S.mousePos(this._map.getCanvas(),r),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(o.Q.convert(p.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const L=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=L),typeof this._targetZoom=="number"&&(this._targetZoom+=L)}if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>Jf?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&N!==0&&(N=1/N);const $=typeof this._targetZoom!="number"?r.scale:o.ac(this._targetZoom);this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,o.ah($*N))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,p=this._startZoom,y=this._easing;let A,T=!1;if(this._type==="wheel"&&p&&y){const L=E.now()-this._lastWheelEventTime,N=Math.min((L+5)/200,1),$=y(N);A=o.B.number(p,c,$),N<1?this._frameId||(this._frameId=!0):T=!0}else A=c,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=A,{noInertia:!0,needsRenderFrame:!T,zoomDelta:A-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=o.cd;if(this._prevEase){const p=this._prevEase,y=(E.now()-p.start)/p.duration,A=p.easing(y+.01)-p.easing(y),T=.27/Math.sqrt(A*A+1e-4)*.01,L=Math.sqrt(.0729-T*T);c=o.cb(T,L,.25,1)}return this._prevEase={start:E.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class am{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class jg{constructor(r){this._tr=new dl(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pl{constructor(){this._tap=new Yf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,p){if(!this._swipePoint)if(this._tapTime){const y=c[0],A=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(y)<30;A&&T?p.length>0&&(this._swipePoint=y,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(r,c,p)}touchmove(r,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const y=c[0],A=y.y-this._swipePoint.y;return this._swipePoint=y,r.preventDefault(),this._active=!0,{zoomDelta:A/128}}}else this._tap.touchmove(r,c,p)}touchend(r,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const y=this._tap.touchend(r,c,p);y&&(this._tapTime=r.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class li{constructor(r,c,p){this._el=r,this._mousePan=c,this._touchPan=p}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zc{constructor(r,c,p,y){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=c,this._mousePitch=p,this._mouseRoll=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Dd{constructor(r,c,p,y){this._el=r,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Od{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=S.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=c,this._container.appendChild(y);const A=document.createElement("div");A.className="maplibregl-mobile-message",A.textContent=p,this._container.appendChild(A),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(S.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Vh=b=>b.zoom||b.drag||b.roll||b.pitch||b.rotate;class ml extends o.l{}function Uh(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta||b.rollDelta}class na{constructor(r,c){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,A)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=y.type==="renderFrame"?void 0:y,L={needsRenderFrame:!1},N={},$={};for(const{handlerName:ot,handler:ft,allowed:bt}of this._handlers){if(!ft.isEnabled())continue;let Ft;if(this._blockedByActive($,bt,ot))ft.reset();else if(ft[A||y.type]){if(o.ce(y,A||y.type)){const Ot=S.mousePos(this._map.getCanvas(),y);Ft=ft[A||y.type](y,Ot)}else if(o.cf(y,A||y.type)){const Ot=this._getMapTouches(y.touches),jt=S.touchPos(this._map.getCanvas(),Ot);Ft=ft[A||y.type](y,jt,Ot)}else o.cg(A||y.type)||(Ft=ft[A||y.type](y));this.mergeHandlerResult(L,N,Ft,ot,T),Ft&&Ft.needsRenderFrame&&this._triggerRenderFrame()}(Ft||ft.isActive())&&($[ot]=ft)}const J={};for(const ot in this._previousActiveHandlers)$[ot]||(J[ot]=T);this._previousActiveHandlers=$,(Object.keys(J).length||Uh(L))&&(this._changes.push([L,N,J]),this._triggerRenderFrame()),(Object.keys($).length||Uh(L))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:it}=L;it&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],it(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new qa(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,A,T]of this._listeners)S.addEventListener(y,A,y===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,c,p]of this._listeners)S.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(r){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new Jp(c,r));const y=c.boxZoom=new tm(c,r);this._add("boxZoom",y),r.interactive&&r.boxZoom&&y.enable();const A=c.cooperativeGestures=new Od(c,r.cooperativeGestures);this._add("cooperativeGestures",A),r.cooperativeGestures&&A.enable();const T=new em(c),L=new jg(c);c.doubleClickZoom=new am(L,T),this._add("tapZoom",T),this._add("clickZoom",L),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const N=new pl;this._add("tapDragZoom",N);const $=c.touchPitch=new rm(c);this._add("touchPitch",$),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const J=()=>c.project(c.getCenter()),it=function({enable:re,clickTolerance:se,aroundCenter:fe=!0,minPixelCenterThreshold:le=100,rotateDegreesPerPixelMoved:ke=.8},De){const Ee=new On({checkCorrectEvent:Qe=>S.mouseButton(Qe)===0&&Qe.ctrlKey||S.mouseButton(Qe)===2&&!Qe.ctrlKey});return new Yl({clickTolerance:se,move:(Qe,$e)=>{const In=De();if(fe&&Math.abs(In.y-Qe.y)>le)return{bearingDelta:o.cc(new o.P(Qe.x,$e.y),$e,In)};let yn=($e.x-Qe.x)*ke;return fe&&$e.y<In.y&&(yn=-yn),{bearingDelta:yn}},moveStateManager:Ee,enable:re,assignEvents:Bh})}(r,J),ot=function({enable:re,clickTolerance:se,pitchDegreesPerPixelMoved:fe=-.5}){const le=new On({checkCorrectEvent:ke=>S.mouseButton(ke)===0&&ke.ctrlKey||S.mouseButton(ke)===2});return new Yl({clickTolerance:se,move:(ke,De)=>({pitchDelta:(De.y-ke.y)*fe}),moveStateManager:le,enable:re,assignEvents:Bh})}(r),ft=function({enable:re,clickTolerance:se,rollDegreesPerPixelMoved:fe=.3},le){const ke=new On({checkCorrectEvent:De=>S.mouseButton(De)===2&&De.ctrlKey});return new Yl({clickTolerance:se,move:(De,Ee)=>{const Qe=le();let $e=(Ee.x-De.x)*fe;return Ee.y<Qe.y&&($e=-$e),{rollDelta:$e}},moveStateManager:ke,enable:re,assignEvents:Bh})}(r,J);c.dragRotate=new zc(r,it,ot,ft),this._add("mouseRotate",it,["mousePitch"]),this._add("mousePitch",ot,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ft,["mousePitch"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const bt=function({enable:re,clickTolerance:se}){const fe=new On({checkCorrectEvent:le=>S.mouseButton(le)===0&&!le.ctrlKey});return new Yl({clickTolerance:se,move:(le,ke)=>({around:ke,panDelta:ke.sub(le)}),activateOnStart:!0,moveStateManager:fe,enable:re,assignEvents:Bh})}(r),Ft=new Nh(r,c);c.dragPan=new li(p,bt,Ft),this._add("mousePan",bt),this._add("touchPan",Ft,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const Ot=new La,jt=new kd;c.touchZoomRotate=new Dd(p,jt,Ot,N),this._add("touchRotate",Ot,["touchPan","touchZoom"]),this._add("touchZoom",jt,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const Wt=c.scrollZoom=new Rd(c,()=>this._triggerRenderFrame());this._add("scrollZoom",Wt,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const Jt=c.keyboard=new Ld(c);this._add("keyboard",Jt),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new hl(c))}_add(r,c,p){this._handlers.push({handlerName:r,handler:c,allowed:p}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Vh(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,p){for(const y in r)if(y!==p&&(!c||c.indexOf(y)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const p of r)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(r,c,p,y,A){if(!p)return;o.e(r,p);const T={handlerName:y,originalEvent:p.originalEvent||A};p.zoomDelta!==void 0&&(c.zoom=T),p.panDelta!==void 0&&(c.drag=T),p.rollDelta!==void 0&&(c.roll=T),p.pitchDelta!==void 0&&(c.pitch=T),p.bearingDelta!==void 0&&(c.rotate=T)}_applyChanges(){const r={},c={},p={};for(const[y,A,T]of this._changes)y.panDelta&&(r.panDelta=(r.panDelta||new o.P(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.rollDelta&&(r.rollDelta=(r.rollDelta||0)+y.rollDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),o.e(c,A),o.e(p,T);this._updateMapTransform(r,c,p),this._changes=[]}_updateMapTransform(r,c,p){const y=this._map,A=y._getTransformForUpdate(),T=y.terrain;if(!(Uh(r)||T&&this._terrainMovement))return this._fireEvents(c,p,!0);y._stop(!0);let{panDelta:L,zoomDelta:N,bearingDelta:$,pitchDelta:J,rollDelta:it,around:ot,pinchAround:ft}=r;ft!==void 0&&(ot=ft),ot=ot||y.transform.centerPoint,T&&!A.isPointOnMapSurface(ot)&&(ot=A.centerPoint);const bt={panDelta:L,zoomDelta:N,rollDelta:it,pitchDelta:J,bearingDelta:$,around:ot};this._map.cameraHelper.useGlobeControls&&!A.isPointOnMapSurface(ot)&&(ot=A.centerPoint);const Ft=ot.distSqr(A.centerPoint)<.01?A.center:A.screenPointToLocation(L?ot.sub(L):ot);T?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(bt,A),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?A.setCenter(A.screenPointToLocation(A.centerPoint.sub(L))):this._map.cameraHelper.handleMapControlsPan(bt,A,Ft):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(bt,A,Ft))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(bt,A),this._map.cameraHelper.handleMapControlsPan(bt,A,Ft)),y._applyUpdatedTransform(A),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,p,!0)}_fireEvents(r,c,p){const y=Vh(this._eventsInProgress),A=Vh(r),T={};for(const it in r){const{originalEvent:ot}=r[it];this._eventsInProgress[it]||(T[`${it}start`]=ot),this._eventsInProgress[it]=r[it]}!y&&A&&this._fireEvent("movestart",A.originalEvent);for(const it in T)this._fireEvent(it,T[it]);A&&this._fireEvent("move",A.originalEvent);for(const it in r){const{originalEvent:ot}=r[it];this._fireEvent(it,ot)}const L={};let N;for(const it in this._eventsInProgress){const{handlerName:ot,originalEvent:ft}=this._eventsInProgress[it];this._handlersById[ot].isActive()||(delete this._eventsInProgress[it],N=c[ot]||ft,L[`${it}end`]=N)}for(const it in L)this._fireEvent(it,L[it]);const $=Vh(this._eventsInProgress),J=(y||A)&&!$;if(J&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const it=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&it.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(it)}if(p&&J){this._updatingCamera=!0;const it=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ot=ft=>ft!==0&&-this._bearingSnap<ft&&ft<this._bearingSnap;!it||!it.essential&&E.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:N})),ot(this._map.getBearing())&&this._map.resetNorth()):(ot(it.bearing||this._map.getBearing())&&(it.bearing=0),it.freezeElevation=!0,this._map.easeTo(it,{originalEvent:N})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new o.l(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new ml("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ga extends o.E{constructor(r,c,p){super(),this._renderFrameCallback=()=>{const y=Math.min((E.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=p.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,c){r.apply(this.transform),this.transform=r,this.cameraHelper=c}getCenter(){return new o.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,c){return this.jumpTo({elevation:r},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,c,p){return r=o.P.convert(r).mult(-1),this.panTo(this.transform.center,o.e({offset:r},c),p)}panTo(r,c,p){return this.easeTo(o.e({center:r},c),p)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,p){return this.easeTo(o.e({zoom:r},c),p)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,c){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)).fire(new o.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,p){return this.easeTo(o.e({bearing:r},c),p)}resetNorth(r,c){return this.rotateTo(0,o.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}getRoll(){return this.transform.roll}setRoll(r,c){return this.jumpTo({roll:r},c),this}cameraForBounds(r,c){r=H.convert(r).adjustAntiMeridian();const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),p,c)}_cameraForBoxAndBearing(r,c,p,y){const A={top:0,bottom:0,right:0,left:0};if(typeof(y=o.e({padding:A,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const $=y.padding;y.padding={top:$,bottom:$,right:$,left:$}}const T=o.e(A,y.padding);y.padding=T;const L=this.transform,N=new H(r,c);return this.cameraHelper.cameraForBoxAndBearing(y,T,N,p,L)}fitBounds(r,c,p){return this._fitInternal(this.cameraForBounds(r,c),c,p)}fitScreenCoordinates(r,c,p,y,A){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(r)),this.transform.screenPointToLocation(o.P.convert(c)),p,y),y,A)}_fitInternal(r,c,p){return r?(delete(c=o.e(r,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(r,c){this.stop();const p=this._getTransformForUpdate();let y=!1,A=!1,T=!1;const L=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,r);const N=p.zoom!==L;return"elevation"in r&&p.elevation!==+r.elevation&&p.setElevation(+r.elevation),"bearing"in r&&p.bearing!==+r.bearing&&(y=!0,p.setBearing(+r.bearing)),"pitch"in r&&p.pitch!==+r.pitch&&(A=!0,p.setPitch(+r.pitch)),"roll"in r&&p.roll!==+r.roll&&(T=!0,p.setRoll(+r.roll)),r.padding==null||p.isPaddingEqual(r.padding)||p.setPadding(r.padding),this._applyUpdatedTransform(p),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)),N&&this.fire(new o.l("zoomstart",c)).fire(new o.l("zoom",c)).fire(new o.l("zoomend",c)),y&&this.fire(new o.l("rotatestart",c)).fire(new o.l("rotate",c)).fire(new o.l("rotateend",c)),A&&this.fire(new o.l("pitchstart",c)).fire(new o.l("pitch",c)).fire(new o.l("pitchend",c)),T&&this.fire(new o.l("rollstart",c)).fire(new o.l("roll",c)).fire(new o.l("rollend",c)),this.fire(new o.l("moveend",c))}calculateCameraOptionsFromTo(r,c,p,y=0){const A=o.$.fromLngLat(r,c),T=o.$.fromLngLat(p,y),L=T.x-A.x,N=T.y-A.y,$=T.z-A.z,J=Math.hypot(L,N,$);if(J===0)throw new Error("Can't calculate camera options with same From and To");const it=Math.hypot(L,N),ot=o.ah(this.transform.cameraToCenterDistance/J/this.transform.tileSize),ft=180*Math.atan2(L,-N)/Math.PI;let bt=180*Math.acos(it/J)/Math.PI;return bt=$<0?90-bt:90+bt,{center:T.toLngLat(),elevation:y,zoom:ot,pitch:bt,bearing:ft}}calculateCameraOptionsFromCameraLngLatAltRotation(r,c,p,y,A){const T=this.transform.calculateCenterFromCameraLngLatAlt(r,c,p,y);return{center:T.center,elevation:T.elevation,zoom:T.zoom,bearing:p,pitch:y,roll:A}}easeTo(r,c){this._stop(!1,r.easeId),((r=o.e({offset:[0,0],duration:500,easing:o.cd},r)).animate===!1||!r.essential&&E.prefersReducedMotion)&&(r.duration=0);const p=this._getTransformForUpdate(),y=this.getBearing(),A=p.pitch,T=p.roll,L="bearing"in r?this._normalizeBearing(r.bearing,y):y,N="pitch"in r?+r.pitch:A,$="roll"in r?this._normalizeBearing(r.roll,T):T,J="padding"in r?r.padding:p.padding,it=o.P.convert(r.offset);let ot,ft;r.around&&(ot=o.Q.convert(r.around),ft=p.locationToScreenPoint(ot));const bt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ft=this.cameraHelper.handleEaseTo(p,{bearing:L,pitch:N,roll:$,padding:J,around:ot,aroundPoint:ft,offsetAsPoint:it,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||y!==L,this._pitching=this._pitching||N!==A,this._rolling=this._rolling||$!==T,this._padding=!p.isPaddingEqual(J),this._zooming=this._zooming||Ft.isZooming,this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,bt),this.terrain&&this._prepareElevation(Ft.elevationCenter),this._ease(Ot=>{Ft.easeFunc(Ot),this.terrain&&!r.freezeElevation&&this._updateElevation(Ot),this._applyUpdatedTransform(p),this._fireMoveEvents(c)},Ot=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,Ot)},r),this}_prepareEase(r,c,p={}){this._moving=!0,c||p.moving||this.fire(new o.l("movestart",r)),this._zooming&&!p.zooming&&this.fire(new o.l("zoomstart",r)),this._rotating&&!p.rotating&&this.fire(new o.l("rotatestart",r)),this._pitching&&!p.pitching&&this.fire(new o.l("pitchstart",r)),this._rolling&&!p.rolling&&this.fire(new o.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(p-(c-(p*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.setElevation(o.B.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const c=r.getCameraLngLat(),p=r.getCameraAltitude(),y=this.terrain?this.terrain.getElevationForLngLatZoom(c,r.zoom):0;if(p<y){const A=this.calculateCameraOptionsFromTo(c,y,r.center,r.elevation);return{pitch:A.pitch,zoom:A.zoom}}return{}}_applyUpdatedTransform(r){const c=[];if(c.push(y=>this._elevateCameraIfInsideTerrain(y)),this.transformCameraUpdate&&c.push(y=>this.transformCameraUpdate(y)),!c.length)return;const p=r.clone();for(const y of c){const A=p.clone(),{center:T,zoom:L,roll:N,pitch:$,bearing:J,elevation:it}=y(A);T&&A.setCenter(T),it!==void 0&&A.setElevation(it),L!==void 0&&A.setZoom(L),N!==void 0&&A.setRoll(N),$!==void 0&&A.setPitch($),J!==void 0&&A.setBearing(J),p.apply(A)}this.transform.apply(p)}_fireMoveEvents(r){this.fire(new o.l("move",r)),this._zooming&&this.fire(new o.l("zoom",r)),this._rotating&&this.fire(new o.l("rotate",r)),this._pitching&&this.fire(new o.l("pitch",r)),this._rolling&&this.fire(new o.l("roll",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,y=this._rotating,A=this._pitching,T=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new o.l("zoomend",r)),y&&this.fire(new o.l("rotateend",r)),A&&this.fire(new o.l("pitchend",r)),T&&this.fire(new o.l("rollend",r)),this.fire(new o.l("moveend",r))}flyTo(r,c){if(!r.essential&&E.prefersReducedMotion){const $e=o.O(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo($e,c)}this.stop(),r=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cd},r);const p=this._getTransformForUpdate(),y=p.bearing,A=p.pitch,T=p.roll,L=p.padding,N="bearing"in r?this._normalizeBearing(r.bearing,y):y,$="pitch"in r?+r.pitch:A,J="roll"in r?this._normalizeBearing(r.roll,T):T,it="padding"in r?r.padding:p.padding,ot=o.P.convert(r.offset);let ft=p.centerPoint.add(ot);const bt=p.screenPointToLocation(ft),Ft=this.cameraHelper.handleFlyTo(p,{bearing:N,pitch:$,roll:J,padding:it,locationAtOffset:bt,offsetAsPoint:ot,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let Ot=r.curve;const jt=Math.max(p.width,p.height),Wt=jt/Ft.scaleOfZoom,Jt=Ft.pixelPathLength;typeof Ft.scaleOfMinZoom=="number"&&(Ot=Math.sqrt(jt/Ft.scaleOfMinZoom/Jt*2));const re=Ot*Ot;function se($e){const In=(Wt*Wt-jt*jt+($e?-1:1)*re*re*Jt*Jt)/(2*($e?Wt:jt)*re*Jt);return Math.log(Math.sqrt(In*In+1)-In)}function fe($e){return(Math.exp($e)-Math.exp(-$e))/2}function le($e){return(Math.exp($e)+Math.exp(-$e))/2}const ke=se(!1);let De=function($e){return le(ke)/le(ke+Ot*$e)},Ee=function($e){return jt*((le(ke)*(fe(In=ke+Ot*$e)/le(In))-fe(ke))/re)/Jt;var In},Qe=(se(!0)-ke)/Ot;if(Math.abs(Jt)<2e-6||!isFinite(Qe)){if(Math.abs(jt-Wt)<1e-6)return this.easeTo(r,c);const $e=Wt<jt?-1:1;Qe=Math.abs(Math.log(Wt/jt))/Ot,Ee=()=>0,De=In=>Math.exp($e*Ot*In)}return r.duration="duration"in r?+r.duration:1e3*Qe/("screenSpeed"in r?+r.screenSpeed/Ot:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=y!==N,this._pitching=$!==A,this._rolling=J!==T,this._padding=!p.isPaddingEqual(it),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(Ft.targetCenter),this._ease($e=>{const In=$e*Qe,yn=1/De(In),an=Ee(In);this._rotating&&p.setBearing(o.B.number(y,N,$e)),this._pitching&&p.setPitch(o.B.number(A,$,$e)),this._rolling&&p.setRoll(o.B.number(T,J,$e)),this._padding&&(p.interpolatePadding(L,it,$e),ft=p.centerPoint.add(ot)),Ft.easeFunc($e,yn,an,ft),this.terrain&&!r.freezeElevation&&this._updateElevation($e),this._applyUpdatedTransform(p),this._fireMoveEvents(c)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,c)}return r||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(r,c,p){p.animate===!1||p.duration===0?(r(1),c()):(this._easeStart=E.now(),this._easeOptions=p,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=o.aL(r,-180,180);const p=Math.abs(r-c);return Math.abs(r-360-c)<p&&(r-=360),Math.abs(r+360-c)<p&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(o.Q.convert(r),this.transform.tileZoom):null}}const Yn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class lr{constructor(r=Yn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=S.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=S.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=S.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){S.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const p=this._map._getUIString(`AttributionControl.${c}`);r.title=p,r.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style.sourceCaches;for(const y in c){const A=c[y];if(A.used||A.usedForTerrain){const T=A.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(y=>String(y).trim()),r.sort((y,A)=>y.length-A.length),r=r.filter((y,A)=>{for(let T=A+1;T<r.length;T++)if(r[T].indexOf(y)>=0)return!1;return!0});const p=r.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,r.length?(this._innerContainer.innerHTML=S.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class eh{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=S.create("div","maplibregl-ctrl");const c=S.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){S.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class vu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const y of p)if(y.id===r)return void(y.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var gl=o.aG([{name:"a_pos3d",type:"Int16",components:3}]);class ya extends o.E{constructor(r){super(),this._lastTilesetChange=E.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const p={};for(const y of Kt(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))p[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.terrainRttPosMatrix32f=new Float64Array(16),o.bQ(y.terrainRttPosMatrix32f,0,o.Z,o.Z,0,0,1),this._tiles[y.key]=new de(y,this.tileSize),this._lastTilesetChange=E.now());for(const y in this._tiles)p[y]||delete this._tiles[y]}freeRtt(r){for(const c in this._tiles){const p=this._tiles[c];(!r||p.tileID.equals(r)||p.tileID.isChildOf(r)||r.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,c){return c?this._getTerrainCoordsForTileRanges(r,c):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const c={};for(const p of this._renderableTilesKeys){const y=this._tiles[p].tileID,A=r.clone(),T=o.b2();if(y.canonical.equals(r.canonical))o.bQ(T,0,o.Z,o.Z,0,0,1);else if(y.canonical.isChildOf(r.canonical)){const L=y.canonical.z-r.canonical.z,N=y.canonical.x-(y.canonical.x>>L<<L),$=y.canonical.y-(y.canonical.y>>L<<L),J=o.Z>>L;o.bQ(T,0,J,J,0,0,1),o.L(T,T,[-N*J,-$*J,0])}else{if(!r.canonical.isChildOf(y.canonical))continue;{const L=r.canonical.z-y.canonical.z,N=r.canonical.x-(r.canonical.x>>L<<L),$=r.canonical.y-(r.canonical.y>>L<<L),J=o.Z>>L;o.bQ(T,0,o.Z,o.Z,0,0,1),o.L(T,T,[N*J,$*J,0]),o.M(T,T,[1/2**L,1/2**L,0])}}A.terrainRttPosMatrix32f=new Float32Array(T),c[p]=A}return c}_getTerrainCoordsForTileRanges(r,c){const p={};for(const y of this._renderableTilesKeys){const A=this._tiles[y].tileID;if(!this._isWithinTileRanges(A,c))continue;const T=r.clone(),L=o.b2();if(A.canonical.z===r.canonical.z){const N=r.canonical.x-A.canonical.x,$=r.canonical.y-A.canonical.y;o.bQ(L,0,o.Z,o.Z,0,0,1),o.L(L,L,[N*o.Z,$*o.Z,0])}else if(A.canonical.z>r.canonical.z){const N=A.canonical.z-r.canonical.z,$=A.canonical.x-(A.canonical.x>>N<<N),J=A.canonical.y-(A.canonical.y>>N<<N),it=r.canonical.x-(A.canonical.x>>N),ot=r.canonical.y-(A.canonical.y>>N),ft=o.Z>>N;o.bQ(L,0,ft,ft,0,0,1),o.L(L,L,[-$*ft+it*o.Z,-J*ft+ot*o.Z,0])}else{const N=r.canonical.z-A.canonical.z,$=r.canonical.x-(r.canonical.x>>N<<N),J=r.canonical.y-(r.canonical.y>>N<<N),it=(r.canonical.x>>N)-A.canonical.x,ot=(r.canonical.y>>N)-A.canonical.y,ft=o.Z<<N;o.bQ(L,0,ft,ft,0,0,1),o.L(L,L,[$*o.Z+it*ft,J*o.Z+ot*ft,0])}T.terrainRttPosMatrix32f=new Float32Array(L),p[y]=T}return p}getSourceTile(r,c){const p=this.sourceCache._source;let y=r.overscaledZ-this.deltaZoom;if(y>p.maxzoom&&(y=p.maxzoom),y<p.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(y).key);let A=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!A||!A.dem)&&c)for(;y>=p.minzoom&&(!A||!A.dem);)A=this.sourceCache.getTileByID(r.scaledTo(y--).key);return A}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,c){return c[r.canonical.z]&&r.canonical.x>=c[r.canonical.z].minTileX&&r.canonical.x<=c[r.canonical.z].maxTileX&&r.canonical.y>=c[r.canonical.z].minTileY&&r.canonical.y<=c[r.canonical.z].maxTileY}}class sm{constructor(r,c,p){this._meshCache={},this.painter=r,this.sourceCache=new ya(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,p,y=o.Z){var A;if(!(c>=0&&c<y&&p>=0&&p<y))return 0;const T=this.getTerrainData(r),L=(A=T.tile)===null||A===void 0?void 0:A.dem;if(!L)return 0;const N=o.ch([],[c/y*o.Z,p/y*o.Z],T.u_terrain_matrix),$=[N[0]*L.dim,N[1]*L.dim],J=Math.floor($[0]),it=Math.floor($[1]),ot=$[0]-J,ft=$[1]-it;return L.get(J,it)*(1-ot)*(1-ft)+L.get(J+1,it)*ot*(1-ft)+L.get(J,it+1)*(1-ot)*ft+L.get(J+1,it+1)*ot*ft}getElevationForLngLatZoom(r,c){if(!o.ci(c,r.wrap()))return 0;const{tileID:p,mercatorX:y,mercatorY:A}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(p,y%o.Z,A%o.Z,o.Z)}getElevation(r,c,p,y=o.Z){return this.getDEMElevation(r,c,p,y)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const y=this.painter.context,A=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new K(y,A,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new K(y,new o.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ad([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const y=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new K(y,c.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),c.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c+c.tileID.key+r.key;if(p&&!this._demMatrixCache[p]){const y=this.sourceCache.sourceCache._source.maxzoom;let A=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=y?A=r.canonical.z-y:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>A<<A),L=r.canonical.y-(r.canonical.y>>A<<A),N=o.cj(new Float64Array(16),[1/(o.Z<<A),1/(o.Z<<A),0]);o.L(N,N,[T*o.Z,L*o.Z,0]),this._demMatrixCache[r.key]={matrix:N,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,p=c.width/devicePixelRatio,y=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new K(c.context,{width:p,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new K(c.context,{width:p,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,y,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,y))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let A=0,T=0;A<this._coordsTextureSize;A++)for(let L=0;L<this._coordsTextureSize;L++,T+=4)c[T+0]=255&L,c[T+1]=255&A,c[T+2]=L>>8<<4|A>>8,c[T+3]=0;const p=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),y=new K(r,p,r.gl.RGBA,{premultiply:!1});return y.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),p=this.painter.context,y=p.gl,A=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),L=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(A,L-T-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const N=c[0]+(c[2]>>4<<8),$=c[1]+((15&c[2])<<8),J=this.coordsIndex[255-c[3]],it=J&&this.sourceCache.getTileByID(J);if(!it)return null;const ot=this._coordsTextureSize,ft=(1<<it.tileID.canonical.z)*ot;return new o.$((it.tileID.canonical.x*ot+N)/ft+it.tileID.wrap,(it.tileID.canonical.y*ot+$)/ft,this.getElevation(it.tileID,N,$,ot))}depthAtPoint(r){const c=new Uint8Array(4),p=this.painter.context,y=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(r){var c;const p=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,y=p&&r.canonical.y===0,A=p&&r.canonical.y===(1<<r.canonical.z)-1,T=`m_${y?"n":""}_${A?"s":""}`;if(this._meshCache[T])return this._meshCache[T];const L=this.painter.context,N=new o.ck,$=new o.aK,J=this.meshSize,it=o.Z/J,ot=J*J;for(let le=0;le<=J;le++)for(let ke=0;ke<=J;ke++)N.emplaceBack(ke*it,le*it,0);for(let le=0;le<ot;le+=J+1)for(let ke=0;ke<J;ke++)$.emplaceBack(ke+le,J+ke+le+1,J+ke+le+2),$.emplaceBack(ke+le,J+ke+le+2,ke+le+1);const ft=N.length,bt=ft+(J+1),Ft=(J+1)*J,Ot=y?o.b9:0,jt=y?0:1,Wt=A?o.ba:o.Z,Jt=A?0:1;for(let le=0;le<=J;le++)N.emplaceBack(le*it,Ot,jt);for(let le=0;le<=J;le++)N.emplaceBack(le*it,Wt,Jt);for(let le=0;le<J;le++)$.emplaceBack(Ft+le,bt+le,bt+le+1),$.emplaceBack(Ft+le,bt+le+1,Ft+le+1),$.emplaceBack(0+le,ft+le+1,ft+le),$.emplaceBack(0+le,0+le+1,ft+le+1);const re=N.length,se=re+2*(J+1);for(const le of[0,1])for(let ke=0;ke<=J;ke++)for(const De of[0,1])N.emplaceBack(le*o.Z,ke*it,De);for(let le=0;le<2*J;le+=2)$.emplaceBack(re+le,re+le+1,re+le+3),$.emplaceBack(re+le,re+le+3,re+le+2),$.emplaceBack(se+le,se+le+3,se+le+1),$.emplaceBack(se+le,se+le+2,se+le+3);const fe=new _e(L.createVertexBuffer(N,gl.members),L.createIndexBuffer($),o.aJ.simpleSegment(0,0,N.length,$.length));return this._meshCache[T]=fe,fe}getMeshFrameDelta(r){return 2*Math.PI*o.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,c){var p;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(p=this.getMinMaxElevation(y).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(r,c){const p=o.$.fromLngLat(r.wrap()),y=(1<<c)*o.Z,A=p.x*y,T=p.y*y,L=Math.floor(A/o.Z),N=Math.floor(T/o.Z);return{tileID:new o.Y(c,0,c,L,N),mercatorX:A,mercatorY:T}}}class Ka{constructor(r,c,p){this._context=r,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new K(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:r,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>r.id!==c),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const nh={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class rh{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new Ka(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(p=>!r._layers[p].isHidden(c)),this._coordsAscending={};for(const p in r.sourceCaches){this._coordsAscending[p]={};const y=r.sourceCaches[p].getVisibleCoordinates(),A=r.sourceCaches[p].getSource(),T=A instanceof ne?A.terrainTileRanges:null;for(const L of y){const N=this.terrain.sourceCache.getTerrainCoords(L,T);for(const $ in N)this._coordsAscending[p][$]||(this._coordsAscending[p][$]=[]),this._coordsAscending[p][$].push(N[$])}}this._coordsAscendingStr={};for(const p of r._order){const y=r._layers[p],A=y.source;if(nh[y.type]&&!this._coordsAscendingStr[A]){this._coordsAscendingStr[A]={};for(const T in this._coordsAscending[A])this._coordsAscendingStr[A][T]=this._coordsAscending[A][T].map(L=>L.key).sort().join()}}for(const p of this._renderableTiles)for(const y in this._coordsAscendingStr){const A=this._coordsAscendingStr[y][p.tileID.key];A&&A!==p.rttCoords[y]&&(p.rtt=[])}}renderLayer(r,c){if(r.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),y=r.type,A=this.painter,T=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(nh[y]&&(this._prevType&&nh[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(r.id),!T))return!0;if(nh[this._prevType]||nh[y]&&T){this._prevType=y;const L=this._stacks.length-1,N=this._stacks[L]||[];for(const $ of this._renderableTiles){if(this.pool.isFull()&&($f(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push($),$.rtt[L]){const it=this.pool.getObjectForId($.rtt[L].id);if(it.stamp===$.rtt[L].stamp){this.pool.useObject(it);continue}}const J=this.pool.getOrCreateFreeObject();this.pool.useObject(J),this.pool.stampObject(J),$.rtt[L]={id:J.id,stamp:J.stamp},A.context.bindFramebuffer.set(J.fbo.framebuffer),A.context.clear({color:o.b7.transparent,stencil:0}),A.currentStencilSource=void 0;for(let it=0;it<N.length;it++){const ot=A.style._layers[N[it]],ft=ot.source?this._coordsAscending[ot.source][$.tileID.key]:[$.tileID];A.context.viewport.set([0,0,J.fbo.width,J.fbo.height]),A._renderTileClippingMasks(ot,ft,!0),A.renderLayer(A,A.style.sourceCaches[ot.source],ot,ft,p),ot.source&&($.rttCoords[ot.source]=this._coordsAscendingStr[ot.source][$.tileID.key])}}return $f(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),nh[y]}return!1}}const Nr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Vi=g,zd={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Yn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Ra={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ih{constructor(r,c,p=!1){this.mousedown=A=>{this.startMove(A,S.mousePos(this.element,A)),S.addEventListener(window,"mousemove",this.mousemove),S.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.move(A,S.mousePos(this.element,A))},this.mouseup=A=>{this._rotatePitchHanlder.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=S.touchPos(this.element,A.targetTouches)[0],this.startMove(A,this._startPos),S.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),S.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=S.touchPos(this.element,A.targetTouches)[0],this.move(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const y=new Xf;this._rotatePitchHanlder=new Yl({clickTolerance:3,move:(A,T)=>{const L=c.getBoundingClientRect(),N=new o.P((L.bottom-L.top)/2,(L.right-L.left)/2);return{bearingDelta:o.cc(new o.P(A.x,T.y),T,N),pitchDelta:p?-.5*(T.y-A.y):void 0}},moveStateManager:y,enable:!0,assignEvents:()=>{}}),this.map=r,S.addEventListener(c,"mousedown",this.mousedown),S.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),S.addEventListener(c,"touchcancel",this.reset)}startMove(r,c){this._rotatePitchHanlder.dragStart(r,c),S.disableDrag()}move(r,c){const p=this.map,{bearingDelta:y,pitchDelta:A}=this._rotatePitchHanlder.dragMove(r,c)||{};y&&p.setBearing(p.getBearing()+y),A&&p.setPitch(p.getPitch()+A)}off(){const r=this.element;S.removeEventListener(r,"mousedown",this.mousedown),S.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),S.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),S.removeEventListener(window,"touchend",this.touchend),S.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){S.enableDrag(),S.removeEventListener(window,"mousemove",this.mousemove),S.removeEventListener(window,"mouseup",this.mouseup),S.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),S.removeEventListener(window,"touchend",this.touchend)}}let gs;function yl(b,r,c,p=!1){if(p||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return b==null?void 0:b.wrap();const y=new o.Q(b.lng,b.lat);if(b=new o.Q(b.lng,b.lat),r){const A=new o.Q(b.lng-360,b.lat),T=new o.Q(b.lng+360,b.lat),L=c.locationToScreenPoint(b).distSqr(r);c.locationToScreenPoint(A).distSqr(r)<L?b=A:c.locationToScreenPoint(T).distSqr(r)<L&&(b=T)}for(;Math.abs(b.lng-c.center.lng)>180;){const A=c.locationToScreenPoint(b);if(A.x>=0&&A.y>=0&&A.x<=c.width&&A.y<=c.height)break;b.lng>c.center.lng?b.lng-=360:b.lng+=360}return b.lng!==y.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(b))?b:y}const oh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function io(b,r,c){const p=b.classList;for(const y in oh)p.remove(`maplibregl-${c}-anchor-${y}`);p.add(`maplibregl-${c}-anchor-${r}`)}class _u extends o.E{constructor(r){if(super(),this._onKeyPress=c=>{const p=c.code,y=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,y=this._element;this._popup&&(p===y||y.contains(p))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=yl(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),S.setTransform(this._element,`${oh[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${y}`),E.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=o.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=S.create("div");const c=S.createNS("http://www.w3.org/2000/svg","svg"),p=41,y=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${y}px`),c.setAttributeNS(null,"viewBox",`0 0 ${y} ${p}`);const A=S.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"stroke","none"),A.setAttributeNS(null,"stroke-width","1"),A.setAttributeNS(null,"fill","none"),A.setAttributeNS(null,"fill-rule","evenodd");const T=S.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const L=S.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const jt of N){const Wt=S.createNS("http://www.w3.org/2000/svg","ellipse");Wt.setAttributeNS(null,"opacity","0.04"),Wt.setAttributeNS(null,"cx","10.5"),Wt.setAttributeNS(null,"cy","5.80029008"),Wt.setAttributeNS(null,"rx",jt.rx),Wt.setAttributeNS(null,"ry",jt.ry),L.appendChild(Wt)}const $=S.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);const J=S.createNS("http://www.w3.org/2000/svg","path");J.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(J);const it=S.createNS("http://www.w3.org/2000/svg","g");it.setAttributeNS(null,"opacity","0.25"),it.setAttributeNS(null,"fill","#000000");const ot=S.createNS("http://www.w3.org/2000/svg","path");ot.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),it.appendChild(ot);const ft=S.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ft.setAttributeNS(null,"fill","#FFFFFF");const bt=S.createNS("http://www.w3.org/2000/svg","g");bt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ft=S.createNS("http://www.w3.org/2000/svg","circle");Ft.setAttributeNS(null,"fill","#000000"),Ft.setAttributeNS(null,"opacity","0.25"),Ft.setAttributeNS(null,"cx","5.5"),Ft.setAttributeNS(null,"cy","5.5"),Ft.setAttributeNS(null,"r","5.4999962");const Ot=S.createNS("http://www.w3.org/2000/svg","circle");Ot.setAttributeNS(null,"fill","#FFFFFF"),Ot.setAttributeNS(null,"cx","5.5"),Ot.setAttributeNS(null,"cy","5.5"),Ot.setAttributeNS(null,"r","5.4999962"),bt.appendChild(Ft),bt.appendChild(Ot),T.appendChild(L),T.appendChild($),T.appendChild(it),T.appendChild(ft),T.appendChild(bt),c.appendChild(T),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),io(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),S.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=o.Q.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const y=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,p;if(!(!((c=this._map)===null||c===void 0)&&c.terrain)){const it=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==it&&(this._element.style.opacity=it))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const y=this._map,A=y.terrain.depthAtPoint(this._pos),T=y.terrain.getElevationForLngLatZoom(this._lngLat,y.transform.tileZoom);if(y.transform.lngLatToCameraDepth(this._lngLat,T)-A<.006)return void(this._element.style.opacity=this._opacity);const L=-this._offset.y/y.transform.pixelsPerMeter,N=Math.sin(y.getPitch()*Math.PI/180)*L,$=y.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),J=y.transform.lngLatToCameraDepth(this._lngLat,T+N)-$>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&J&&this._popup.remove(),this._element.style.opacity=J?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=o.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return(this._opacity===void 0||r===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const tp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ah=0,bu=!1;const Hh={maxWidth:100,unit:"metric"};function Fd(b,r,c){const p=c&&c.maxWidth||100,y=b._container.clientHeight/2,A=b._container.clientWidth/2,T=b.unproject([A-p/2,y]),L=b.unproject([A+p/2,y]),N=Math.round(b.project(L).x-b.project(T).x),$=Math.min(p,N,b._container.clientWidth),J=T.distanceTo(L);if(c&&c.unit==="imperial"){const it=3.2808*J;it>5280?js(r,$,it/5280,b._getUIString("ScaleControl.Miles")):js(r,$,it,b._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?js(r,$,J/1852,b._getUIString("ScaleControl.NauticalMiles")):J>=1e3?js(r,$,J/1e3,b._getUIString("ScaleControl.Kilometers")):js(r,$,J,b._getUIString("ScaleControl.Meters"))}function js(b,r,c,p){const y=function(A){const T=Math.pow(10,`${Math.floor(A)}`.length-1);let L=A/T;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(N){const $=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*$)/$}(L),T*L}(c);b.style.width=r*(y/c)+"px",b.innerHTML=`${y}&nbsp;${p}`}const Bd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Nd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function jd(b){if(b){if(typeof b=="number"){const r=Math.round(Math.abs(b)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,b),"top-left":new o.P(r,r),"top-right":new o.P(-r,r),bottom:new o.P(0,-b),"bottom-left":new o.P(r,-r),"bottom-right":new o.P(-r,-r),left:new o.P(b,0),right:new o.P(-b,0)}}if(b instanceof o.P||Array.isArray(b)){const r=o.P.convert(b);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:o.P.convert(b.center||[0,0]),top:o.P.convert(b.top||[0,0]),"top-left":o.P.convert(b["top-left"]||[0,0]),"top-right":o.P.convert(b["top-right"]||[0,0]),bottom:o.P.convert(b.bottom||[0,0]),"bottom-left":o.P.convert(b["bottom-left"]||[0,0]),"bottom-right":o.P.convert(b["bottom-right"]||[0,0]),left:o.P.convert(b.left||[0,0]),right:o.P.convert(b.right||[0,0])}}return jd(new o.P(0,0))}const xu=g;l.AJAXError=o.co,l.Event=o.l,l.Evented=o.E,l.LngLat=o.Q,l.MercatorCoordinate=o.$,l.Point=o.P,l.addProtocol=o.cp,l.config=o.a,l.removeProtocol=o.cq,l.AttributionControl=lr,l.BoxZoomHandler=tm,l.CanvasSource=Ht,l.CooperativeGesturesHandler=Od,l.DoubleClickZoomHandler=am,l.DragPanHandler=li,l.DragRotateHandler=zc,l.EdgeInsets=Mn,l.FullscreenControl=class extends o.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c==null?void 0:c.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){S.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=S.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);S.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=Ut,l.GeolocateControl=class extends o.E{constructor(b){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new o.Q(r.coords.longitude,r.coords.latitude),p=r.coords.accuracy,y=this._map.getBearing(),A=o.e({bearing:y},this.options.fitBoundsOptions),T=H.fromLngLat(c,p);this._map.fitBounds(T,A,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new o.Q(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&bu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=S.create("button","maplibregl-ctrl-geolocate",this._container),S.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=S.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new _u({element:this._dotElement}),this._circleElement=S.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new _u({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},tp,b)}onAdd(b){return this._map=b,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(r=!1){if(gs!==void 0&&!r)return gs;if(window.navigator.permissions===void 0)return gs=!!window.navigator.geolocation,gs;try{gs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{gs=!!window.navigator.geolocation}return gs})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),S.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ah=0,bu=!1}_isOutOfMapMaxBounds(b){const r=this._map.getMaxBounds(),c=b.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const b=this._map.getBounds(),r=b.getSouthEast(),c=b.getNorthEast(),p=r.distanceTo(c),y=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ah--,bu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ah++,ah>1?(b={maximumAge:6e5,timeout:0},bu=!0):(b=this.options.positionOptions,bu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var b;const r=(b=this._map.getProjection())===null||b===void 0?void 0:b.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var b;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((b=this._map.getProjection())===null||b===void 0?void 0:b.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(b){return this._map=b,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=S.create("button","maplibregl-ctrl-globe",this._container),S.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){S.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=Wf,l.ImageSource=ne,l.KeyboardHandler=Ld,l.LngLatBounds=H,l.LogoControl=eh,l.Map=class extends ga{constructor(b){var r,c;o.cl.mark(o.cm.create);const p=Object.assign(Object.assign(Object.assign({},zd),b),{canvasContextAttributes:Object.assign(Object.assign({},zd.canvasContextAttributes),b.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const y=new Rr,A=new nu;if(p.minZoom!==void 0&&y.setMinZoom(p.minZoom),p.maxZoom!==void 0&&y.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&y.setMinPitch(p.minPitch),p.maxPitch!==void 0&&y.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&y.setRenderWorldCopies(p.renderWorldCopies),super(y,A,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new vu,this._controls=[],this._mapId=o.a4(),this._contextLost=L=>{L.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:L}))},this._contextRestored=L=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:L}))},this._onMapScroll=L=>{if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Nr),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this.transformCameraUpdate=p.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=G.addThrottleControl(()=>this.isMoving()),this._requestManager=new Q(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let L=!1;const N=Zf($=>{this._trackResize&&!this._removed&&(this.resize($),this.redraw())},50);this._resizeObserver=new ResizeObserver($=>{L?N($):L=!0}),this._resizeObserver.observe(this._container)}this.handlers=new na(this,p),this._hash=p.hash&&new Wf(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,o.e({},p.fitBoundsOptions,{duration:0}))));const T=typeof p.style=="string"||((c=(r=p.style)===null||r===void 0?void 0:r.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,T),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new lr(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new eh,p.logoPosition),this.on("style.load",()=>{if(T||this._resizeTransform(),this.transform.unmodified){const L=o.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(L)}}),this.on("data",L=>{this._update(L.dataType==="style"),this.fire(new o.l(`${L.dataType}data`,L))}),this.on("dataloading",L=>{this.fire(new o.l(`${L.dataType}dataloading`,L))}),this.on("dataabort",L=>{this.fire(new o.l("sourcedataabort",L))})}_getMapId(){return this._mapId}addControl(b,r){if(r===void 0&&(r=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=b.onAdd(this);this._controls.push(b);const p=this._controlPositions[r];return r.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(b);return r>-1&&this._controls.splice(r,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}calculateCameraOptionsFromTo(b,r,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,r,c,p)}resize(b,r=!0){const[c,p]=this._containerDimensions(),y=this._getClampedPixelRatio(c,p);if(this._resizeCanvas(c,p,y),this.painter.resize(c,p,y),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const L=this._getClampedPixelRatio(c,p);this._resizeCanvas(c,p,L),this.painter.resize(c,p,L)}this._resizeTransform(r);const A=!this._moving;return A&&(this.stop(),this.fire(new o.l("movestart",b)).fire(new o.l("move",b))),this.fire(new o.l("resize",b)),A&&this.fire(new o.l("moveend",b)),this}_resizeTransform(b=!0){var r;const[c,p]=this._containerDimensions();this.transform.resize(c,p,b),(r=this._requestedCameraState)===null||r===void 0||r.resize(c,p,b)}_getClampedPixelRatio(b,r){const{0:c,1:p}=this._maxCanvasSize,y=this.getPixelRatio(),A=b*y,T=r*y;return Math.min(A>c?c/A:1,T>p?p/T:1)*y}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(H.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.setMinZoom(b),this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.setMaxZoom(b),this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.setMinPitch(b),this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(b>=this.transform.minPitch)return this.transform.setMaxPitch(b),this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.setRenderWorldCopies(b),this._update()}project(b){return this.transform.locationToScreenPoint(o.Q.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.screenPointToLocation(o.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,r,c){if(b==="mouseenter"||b==="mouseover"){let p=!1;return{layers:r,listener:c,delegates:{mousemove:A=>{const T=r.filter(N=>this.getLayer(N)),L=T.length!==0?this.queryRenderedFeatures(A.point,{layers:T}):[];L.length?p||(p=!0,c.call(this,new ka(b,this,A.originalEvent,{features:L}))):p=!1},mouseout:()=>{p=!1}}}}if(b==="mouseleave"||b==="mouseout"){let p=!1;return{layers:r,listener:c,delegates:{mousemove:T=>{const L=r.filter(N=>this.getLayer(N));(L.length!==0?this.queryRenderedFeatures(T.point,{layers:L}):[]).length?p=!0:p&&(p=!1,c.call(this,new ka(b,this,T.originalEvent)))},mouseout:T=>{p&&(p=!1,c.call(this,new ka(b,this,T.originalEvent)))}}}}{const p=y=>{const A=r.filter(L=>this.getLayer(L)),T=A.length!==0?this.queryRenderedFeatures(y.point,{layers:A}):[];T.length&&(y.features=T,c.call(this,y),delete y.features)};return{layers:r,listener:c,delegates:{[b]:p}}}}_saveDelegatedListener(b,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(r)}_removeDelegatedListener(b,r,c){if(!this._delegatedListeners||!this._delegatedListeners[b])return;const p=this._delegatedListeners[b];for(let y=0;y<p.length;y++){const A=p[y];if(A.listener===c&&A.layers.length===r.length&&A.layers.every(T=>r.includes(T))){for(const T in A.delegates)this.off(T,A.delegates[T]);return void p.splice(y,1)}}}on(b,r,c){if(c===void 0)return super.on(b,r);const p=typeof r=="string"?[r]:r,y=this._createDelegatedListener(b,p,c);this._saveDelegatedListener(b,y);for(const A in y.delegates)this.on(A,y.delegates[A]);return{unsubscribe:()=>{this._removeDelegatedListener(b,p,c)}}}once(b,r,c){if(c===void 0)return super.once(b,r);const p=typeof r=="string"?[r]:r,y=this._createDelegatedListener(b,p,c);for(const A in y.delegates){const T=y.delegates[A];y.delegates[A]=(...L)=>{this._removeDelegatedListener(b,p,c),T(...L)}}this._saveDelegatedListener(b,y);for(const A in y.delegates)this.once(A,y.delegates[A]);return this}off(b,r,c){return c===void 0?super.off(b,r):(this._removeDelegatedListener(b,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(b,r){if(!this.style)return[];let c;const p=b instanceof o.P||Array.isArray(b),y=p?b:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(p?{}:b)||{},y instanceof o.P||typeof y[0]=="number")c=[o.P.convert(y)];else{const A=o.P.convert(y[0]),T=o.P.convert(y[1]);c=[A,new o.P(T.x,A.y),T,new o.P(A.x,T.y),A]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(b,r){return this.style.querySourceFeatures(b,r)}setStyle(b,r){return(r=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(b,r))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const r=this._locale[b];if(r==null)throw new Error(`Missing UI string '${b}'`);return r}_updateStyle(b,r){var c,p;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(b,r));const y=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new $a(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,r,y):this.style.loadJSON(b,r,y),this):((p=(c=this.style)===null||c===void 0?void 0:c.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new $a(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,r){if(typeof b=="string"){const c=this._requestManager.transformRequest(b,"Style");o.j(c,new AbortController).then(p=>{this._updateDiff(p.data,r)}).catch(p=>{p&&this.fire(new o.k(p))})}else typeof b=="object"&&this._updateDiff(b,r)}_updateDiff(b,r){try{this.style.setState(b,r)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(b,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(b,r){return this._lazyInitEmptyStyle(),this.style.addSource(b,r),this._update(!0)}isSourceLoaded(b){const r=this.style&&this.style.sourceCaches[b];if(r!==void 0)return r.loaded();this.fire(new o.k(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const r=this.style.sourceCaches[b.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===b.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new sm(this.painter,r,b),this.painter.renderToTexture=new rh(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var p;c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==b.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=c.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:b})),this}getTerrain(){var b,r;return(r=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const r in b){const c=b[r]._tiles;for(const p in c){const y=c[p];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}setSourceTileLodParams(b,r,c){if(c){const p=this.getSource(c);if(!p)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);p.calculateTileZoom=_t(Math.max(1,b),Math.max(1,r))}else for(const p in this.style.sourceCaches)this.style.sourceCaches[p].getSource().calculateTileZoom=_t(Math.max(1,b),Math.max(1,r));return this._update(!0),this}addImage(b,r,c={}){const{pixelRatio:p=1,sdf:y=!1,stretchX:A,stretchY:T,content:L,textFitWidth:N,textFitHeight:$}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||o.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:J,height:it,data:ot}=r,ft=r;return this.style.addImage(b,{data:new o.R({width:J,height:it},new Uint8Array(ot)),pixelRatio:p,stretchX:A,stretchY:T,content:L,textFitWidth:N,textFitHeight:$,sdf:y,version:0,userImage:ft}),ft.onAdd&&ft.onAdd(this,b),this}}{const{width:J,height:it,data:ot}=E.getImageData(r);this.style.addImage(b,{data:new o.R({width:J,height:it},ot),pixelRatio:p,stretchX:A,stretchY:T,content:L,textFitWidth:N,textFitHeight:$,sdf:y,version:0})}}updateImage(b,r){const c=this.style.getImage(b);if(!c)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=r instanceof HTMLImageElement||o.b(r)?E.getImageData(r):r,{width:y,height:A,data:T}=p;if(y===void 0||A===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==c.data.width||A!==c.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const L=!(r instanceof HTMLImageElement||o.b(r));return c.data.replace(T,L),this.style.updateImage(b,c),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return G.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,r){return this._lazyInitEmptyStyle(),this.style.addLayer(b,r),this._update(!0)}moveLayer(b,r){return this.style.moveLayer(b,r),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,r,c){return this.style.setLayerZoomRange(b,r,c),this._update(!0)}setFilter(b,r,c={}){return this.style.setFilter(b,r,c),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,r,c,p={}){return this.style.setPaintProperty(b,r,c,p),this._update(!0)}getPaintProperty(b,r){return this.style.getPaintProperty(b,r)}setLayoutProperty(b,r,c,p={}){return this.style.setLayoutProperty(b,r,c,p),this._update(!0)}getLayoutProperty(b,r){return this.style.getLayoutProperty(b,r)}setGlyphs(b,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,r,c,p=>{p||this._update(!0)}),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,r,c=>{c||this._update(!0)}),this}setLight(b,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(b,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(b,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,r){return this.style.setFeatureState(b,r),this._update()}removeFeatureState(b,r){return this.style.removeFeatureState(b,r),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,r=0;return this._container&&(b=this._container.clientWidth||400,r=this._container.clientHeight||300),[b,r]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const r=this._canvasContainer=S.create("div","maplibregl-canvas-container",b);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=S.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const y=this._controlContainer=S.create("div","maplibregl-control-container",b),A=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{A[T]=S.create("div",`maplibregl-ctrl-${T} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,r,c){this._canvas.width=Math.floor(c*b),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const b=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{r={requestedAttributes:b},p&&(r.statusMessage=p.statusMessage,r.type=p.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,b):this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b),!c){const p="Failed to initialize WebGL";throw r?(r.message=p,new Error(JSON.stringify(r))):new Error(p)}this.painter=new Qp(c,this.transform),k.testSupport(c)}migrateProjection(b,r){super.migrateProjection(b,r),this.painter.transform=b,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){var r,c,p,y,A;const T=this._idleTriggered?this._fadeDuration:0,L=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let N=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const it=this.transform.zoom,ot=E.now();this.style.zoomHistory.update(it,ot);const ft=new o.C(it,{now:ot,fadeDuration:T,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),bt=ft.crossFadingFactor();bt===1&&bt===this._crossFadingFactor||(N=!0,this._crossFadingFactor=bt),this.style.update(ft)}const $=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==L;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((y=this.style.projection)===null||y===void 0?void 0:y.transitionState,(A=this.style.projection)===null||A===void 0?void 0:A.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||$)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,T,this._crossSourceCollisions,$),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cl.mark(o.cm.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||N)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const J=this._sourcesDirty||this._styleDirty||this._placementDirty;return J||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||J||(this._fullyLoaded=!0,o.cl.mark(o.cm.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),G.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),S.remove(this._canvasContainer),S.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cl.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,E.frame(this._frameRequest,b=>{o.cl.frame(b),this._frameRequest=null;try{this._render(b)}catch(r){if(!o.cn(r)&&!function(c){return c.message===Wl}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return Vi}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(b){return this._lazyInitEmptyStyle(),this.style.setProjection(b),this._update(!0)}},l.MapMouseEvent=ka,l.MapTouchEvent=ma,l.MapWheelEvent=Zo,l.Marker=_u,l.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),p=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);r.title=p,r.setAttribute("aria-label",p)},this.options=o.e({},Ra,b),this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),S.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),S.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=S.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ih(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){S.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,r){const c=S.create("button",b,this._container);return c.type="button",c.addEventListener("click",r),c}},l.Popup=class extends o.E{constructor(b){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&S.remove(this._content),this._container&&(S.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=S.create("div","maplibregl-popup",this._map.getContainer()),this._tip=S.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=yl(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const c=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const y=jd(this.options.offset);if(!p){const T=this._container.offsetWidth,L=this._container.offsetHeight;let N;N=c.y+y.bottom.y<L?["top"]:c.y>this._map.transform.height-L?["bottom"]:[],c.x<T/2?N.push("left"):c.x>this._map.transform.width-T/2&&N.push("right"),p=N.length===0?"bottom":N.join("-")}let A=c.add(y[p]);this.options.subpixelPositioning||(A=A.round()),S.setTransform(this._container,`${oh[p]} translate(${A.x}px,${A.y}px)`),io(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Bd),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=o.Q.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const r=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=b;p=c.firstChild,p;)r.appendChild(p);return this.setDOMContent(r)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=S.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=S.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(Nd);b&&b.focus()}},l.RasterDEMTileSource=vt,l.RasterTileSource=yt,l.ScaleControl=class{constructor(b){this._onMove=()=>{Fd(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Fd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Hh),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){S.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=Rd,l.Style=$a,l.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=S.create("button","maplibregl-ctrl-terrain",this._container),S.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){S.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=rm,l.TwoFingersTouchRotateHandler=La,l.TwoFingersTouchZoomHandler=kd,l.TwoFingersTouchZoomRotateHandler=Dd,l.VectorTileSource=Pt,l.VideoSource=ue,l.addSourceType=(b,r)=>o._(void 0,void 0,void 0,function*(){if(je(b))throw new Error(`A source type called "${b}" already exists.`);((c,p)=>{Me[c]=p})(b,r)}),l.clearPrewarmedResources=function(){const b=Ge;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(te),Ge=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=qu,l.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return Cn().getRTLTextPluginStatus()},l.getVersion=function(){return xu},l.getWorkerCount=function(){return Gt.workerCount},l.getWorkerUrl=function(){return o.a.WORKER_URL},l.importScriptInWorkers=function(b){return Se().broadcast("IS",b)},l.prewarm=function(){nn().acquire(te)},l.setMaxParallelImageRequests=function(b){o.a.MAX_PARALLEL_IMAGE_REQUESTS=b},l.setRTLTextPlugin=function(b,r){return Cn().setRTLTextPlugin(b,r)},l.setWorkerCount=function(b){Gt.workerCount=b},l.setWorkerUrl=function(b){o.a.WORKER_URL=b}});var d=n;return d})})(WT);var wg=WT.exports;const Aw=Ff(wg),Yp="event";function NN(t){Vu(t,Yp,ls({items:[],current:{}}))}_d(Yp,NN);async function jN(t,e){Vo(t,Yp).items.unshift(e)}async function VN(t,e){const n=Vo(t,Yp);if(!n||!n.items||n.items.length<1)return;const s=n.items.findIndex(d=>d.id===e.id);s<0||n.items.splice(s,1)}function UN(t,e){return(Vo(t,Yp).current||{})[e]}function tM(t,e,n){const a=Vo(t,Yp);a.current[e]=n}const HN=nr({__name:"ActionControl",props:{...vo},setup(t){const e=t,{callMap:n,mapId:a,moduleContainerProps:s}=bi(e),d={},l=Vo(a.value,Yp),o=_n(()=>l.items);jo(o,_=>{g(_)},{deep:!0});function g(_){const C=zg.groupBy(_,I=>I.event_map_type);n(I=>{const E=[];d[I.id]||(d[I.id]={});for(const S in C)if(E.push(S),Object.prototype.hasOwnProperty.call(C,S)){const k=C[S],R=d[I.id][S],B=k[0];if(R&&R.id===B.id)return;R&&R.removeFromMap(I),d[I.id][S]=B,B&&B.addToMap(I),tM(a.value,S,B)}for(const S in d[I.id])if(Object.prototype.hasOwnProperty.call(d[I.id],S)){const k=d[I.id][S];!E.includes(S)&&k&&(k.removeFromMap(I),tM(a.value,S,void 0),d[I.id][S]=void 0)}})}return(_,C)=>(Mt(),Je(Uo,Eo(yo(ut(s))),null,16))}}),$N=t=>(_c("data-v-23125816"),t=t(),bc(),t),GN={key:0,class:""},ZN=$N(()=>Nt("div",{class:"not-support-map"},[Nt("p",{class:""}," Trnh duyt ca bn khng h tr hin th bn , vui lng i trnh duyt hoc cp nht bn mi  xem. ")],-1)),WN=[ZN],qN=["mapId"],KN={class:"map-viewer"},YN=["id"],XN=["id"],QN=["id"],JN=["id"],t9=["id"],e9=nr({__name:"Map",props:{mapboxAccessToken:{type:String,default:""},initOptions:{type:Object,default:()=>({attributionControl:!1,zoomControl:!1})},dragId:{type:String}},emits:["map-loaded","map-destroy"],setup(t,{emit:e}){if(!Aw)throw new Error("mapboxgl is not installed.");const n=pT({mobile:0,tablet:640,laptop:1024,desktop:1280}),a={center:[105.19084739818732,15.827971829957548],zoom:5.297175623863693,maxZoom:22},s=t,d=e;function l(){if(window.WebGLRenderingContext){const F=document.createElement("canvas");try{const j=F.getContext("webgl2")||F.getContext("webgl");if(j&&typeof j.getParameter=="function")return!0}catch{}return!1}return!1}const o=mn(),g=mn(l()),_=mn(!1);let C;const I=mn(ju());_n(()=>pF[I.value]),go(()=>{const F=Object.assign({},a,s.initOptions);C=new Aw.Map({container:o.value,style:{version:8,metadata:{},sources:{},sprite:"https://tiles.eofactory.ai/styles/basic/sprite",glyphs:"https://tiles.eofactory.ai/fonts/{fontstack}/{range}.pbf",layers:[]},...F}),C.id=I.value,Af.initMap(I.value,C),C.once("load",()=>{_.value=!0,d("map-loaded",C)})}),yd(()=>{C&&(C.remove(),d("map-destroy",C)),C=void 0,Af.removeMap(I.value)});const E=_n(()=>`map-draggable-${I.value}`),S=_n(()=>`bottom-right-${I.value}`),k=_n(()=>`bottom-left-${I.value}`),R=_n(()=>`top-right-${I.value}`),B=_n(()=>`top-left-${I.value}`);xf("$map.dragId",s.dragId||E.value),xf("$map.id",I.value);const V=n.smallerOrEqual("tablet");return(F,j)=>g.value?(Mt(),pe("div",{key:1,class:Li(["map-container",{"map-mobile-container":ut(V)}]),mapId:I.value},[Nt("div",KN,[Nt("div",{ref_key:"mapContainer",ref:o,class:"map-content",id:I.value},null,8,YN),s.dragId?wn("",!0):(Mt(),pe(mr,{key:0},[Nt("div",{class:"right-bottom-container",id:S.value},null,8,XN),Nt("div",{class:"left-bottom-container",id:k.value},null,8,QN),Nt("div",{class:"right-top-container",id:R.value},null,8,JN),Nt("div",{class:"left-top-container",id:B.value},null,8,t9),ee(ut(kF),{class:"drag-container","container-id":E.value},null,8,["container-id"])],64)),_.value?Wn(F.$slots,"default",{key:1},void 0,!0):wn("",!0),_.value?(Mt(),Je(HN,{key:2})):wn("",!0)])],10,qN)):(Mt(),pe("div",GN,WN))}}),n9=Vn(e9,[["__scopeId","data-v-23125816"]]),hd="crs",eM=[{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"},{name:"VN-2000",epsg:"4756",unit:"degree",proj4js:"+proj=longlat +ellps=WGS84 +towgs84=-191.90441429,-39.30318279,-111.45032835,-0.00928836,0.01975479,-0.00427372,0.252906278 +no_defs +type=crs"}];function r9(t){Vu(t,hd,ls({crs:"4326",items:eM.slice(),item:eM[0]}))}_d(hd,r9);async function i9(t,e){const n=Vo(t,hd);n.items=e}const o9=t=>Vo(t,hd).items,KT=t=>Vo(t,hd).item,a9=t=>Vo(t,hd).crs;function s9(t,e){Vo(t,hd).crs=e,Vo(t,hd).item=Vo(t,hd).items.find(n=>n.epsg==e)}const L2=Object.freeze(Object.defineProperty({__proto__:null,getCrs:a9,getCrsItem:KT,getCrsItems:o9,setCrs:s9,setCrsItems:i9},Symbol.toStringTag,{value:"Module"}));function l9(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var Hp=1,$p=2,hg=3,c9=4,ww=5,nM=6378137,u9=6356752314e-3,rM=.0066943799901413165,uy=484813681109536e-20,Pn=Math.PI/2,h9=.16666666666666666,d9=.04722222222222222,f9=.022156084656084655,Hn=1e-10,os=.017453292519943295,_h=57.29577951308232,Ei=Math.PI/4,Ry=Math.PI*2,Qo=3.14159265359,Tl={};Tl.greenwich=0;Tl.lisbon=-9.131906111111;Tl.paris=2.337229166667;Tl.bogota=-74.080916666667;Tl.madrid=-3.687938888889;Tl.rome=12.452333333333;Tl.bern=7.439583333333;Tl.jakarta=106.807719444444;Tl.ferro=-17.666666666667;Tl.brussels=4.367975;Tl.stockholm=18.058277777778;Tl.athens=23.7163375;Tl.oslo=10.722916666667;const p9={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var iM=/[\s_\-\/\(\)]/g;function kf(t,e){if(t[e])return t[e];for(var n=Object.keys(t),a=e.toLowerCase().replace(iM,""),s=-1,d,l;++s<n.length;)if(d=n[s],l=d.toLowerCase().replace(iM,""),l===a)return t[d]}function Cw(t){var e={},n=t.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,g){var _=g.split("=");return _.push(!0),o[_[0].toLowerCase()]=_[1],o},{}),a,s,d,l={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*os},lat_1:function(o){e.lat1=o*os},lat_2:function(o){e.lat2=o*os},lat_ts:function(o){e.lat_ts=o*os},lon_0:function(o){e.long0=o*os},lon_1:function(o){e.long1=o*os},lon_2:function(o){e.long2=o*os},alpha:function(o){e.alpha=parseFloat(o)*os},gamma:function(o){e.rectified_grid_angle=parseFloat(o)},lonc:function(o){e.longc=o*os},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(g){return parseFloat(g)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var g=kf(p9,o);g&&(e.to_meter=g.to_meter)},from_greenwich:function(o){e.from_greenwich=o*os},pm:function(o){var g=kf(Tl,o);e.from_greenwich=(g||parseFloat(o))*os},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var g="ewnsud";o.length===3&&g.indexOf(o.substr(0,1))!==-1&&g.indexOf(o.substr(1,1))!==-1&&g.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0}};for(a in n)s=n[a],a in l?(d=l[a],typeof d=="function"?d(s):e[d]=s):e[a]=s;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Dy=1,YT=2,XT=3,M1=4,QT=5,R2=-1,m9=/\s/,g9=/[A-Za-z]/,y9=/[A-Za-z84_]/,kb=/[,\]]/,JT=/[\d\.E\-\+]/;function xd(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Dy}xd.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==M1)for(;m9.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Dy:return this.neutral(t);case YT:return this.keyword(t);case M1:return this.quoted(t);case QT:return this.afterquote(t);case XT:return this.number(t);case R2:return}};xd.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=M1;return}if(kb.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};xd.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Dy;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Dy,this.currentObject=this.stack.pop(),this.currentObject||(this.state=R2);return}};xd.prototype.number=function(t){if(JT.test(t)){this.word+=t;return}if(kb.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};xd.prototype.quoted=function(t){if(t==='"'){this.state=QT;return}this.word+=t};xd.prototype.keyword=function(t){if(y9.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Dy;return}if(kb.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};xd.prototype.neutral=function(t){if(g9.test(t)){this.word=t,this.state=YT;return}if(t==='"'){this.word="",this.state=M1;return}if(JT.test(t)){this.word=t,this.state=XT;return}if(kb.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};xd.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===R2)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function v9(t){var e=new xd(t);return e.output()}function oM(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var a=e?{}:t,s=n.reduce(function(d,l){return Wm(l,d),d},a);e&&(t[e]=s)}function Wm(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Wm(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var a;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Wm(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Wm(t[3],e[n]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],oM(e,n,t);return;default:for(a=-1;++a<t.length;)if(!Array.isArray(t[a]))return Wm(t,e[n]);return oM(e,n,t)}}var _9=.017453292519943295;function b9(t,e){var n=e[0],a=e[1];!(n in t)&&a in t&&(t[n]=t[a],e.length===3&&(t[n]=e[2](t[n])))}function mh(t){return t*_9}function x9(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,a=t.AXIS.length;n<a;++n){var s=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?e+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?e+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?e+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var d=t.GEOGCS;t.type==="GEOGCS"&&(d=t),d&&(d.DATUM?t.datumCode=d.DATUM.name.toLowerCase():t.datumCode=d.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),d.DATUM&&d.DATUM.SPHEROID&&(t.ellps=d.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=d.DATUM.SPHEROID.a,t.rf=parseFloat(d.DATUM.SPHEROID.rf,10)),d.DATUM&&d.DATUM.TOWGS84&&(t.datum_params=d.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function l(_){var C=t.to_meter||1;return _*C}var o=function(_){return b9(t,_)},g=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",mh],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",mh],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",mh],["lat0","latitude_of_origin",mh],["lat0","standard_parallel_1",mh],["lat1","standard_parallel_1",mh],["lat2","standard_parallel_2",mh],["azimuth","Azimuth"],["alpha","azimuth",mh],["srsCode","name"]];g.forEach(o),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=mh(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=mh(t.lat0>0?90:-90))}function tP(t){var e=v9(t),n=e.shift(),a=e.shift();e.unshift(["name",a]),e.unshift(["type",n]);var s={};return Wm(e,s),x9(s),s}function Qs(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?Qs[t]=Cw(arguments[1]):Qs[t]=tP(arguments[1]):Qs[t]=n}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(a){Array.isArray(a)?Qs.apply(e,a):Qs(a)});if(typeof t=="string"){if(t in Qs)return Qs[t]}else"EPSG"in t?Qs["EPSG:"+t.EPSG]=t:"ESRI"in t?Qs["ESRI:"+t.ESRI]=t:"IAU2000"in t?Qs["IAU2000:"+t.IAU2000]=t:console.log(t);return}}l9(Qs);function A9(t){return typeof t=="string"}function w9(t){return t in Qs}var C9=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function I9(t){return C9.some(function(e){return t.indexOf(e)>-1})}var M9=["3857","900913","3785","102113"];function S9(t){var e=kf(t,"authority");if(e){var n=kf(e,"epsg");return n&&M9.indexOf(n)>-1}}function E9(t){var e=kf(t,"extension");if(e)return kf(e,"proj4")}function T9(t){return t[0]==="+"}function P9(t){if(A9(t)){if(w9(t))return Qs[t];if(I9(t)){var e=tP(t);if(S9(e))return Qs["EPSG:3857"];var n=E9(e);return n?Cw(n):e}if(T9(t))return Cw(t)}else return t}function aM(t,e){t=t||{};var n,a;if(!e)return t;for(a in e)n=e[a],n!==void 0&&(t[a]=n);return t}function Ch(t,e,n){var a=t*e;return n/Math.sqrt(1-a*a)}function tv(t){return t<0?-1:1}function Qn(t){return Math.abs(t)<=Qo?t:t-tv(t)*Ry}function Fu(t,e,n){var a=t*n,s=.5*t;return a=Math.pow((1-a)/(1+a),s),Math.tan(.5*(Pn-e))/a}function Oy(t,e){for(var n=.5*t,a,s,d=Pn-2*Math.atan(e),l=0;l<=15;l++)if(a=t*Math.sin(d),s=Pn-2*Math.atan(e*Math.pow((1-a)/(1+a),n))-d,d+=s,Math.abs(s)<=1e-10)return d;return-9999}function k9(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ch(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function L9(t){var e=t.x,n=t.y;if(n*_h>90&&n*_h<-90&&e*_h>180&&e*_h<-180)return null;var a,s;if(Math.abs(Math.abs(n)-Pn)<=Hn)return null;if(this.sphere)a=this.x0+this.a*this.k0*Qn(e-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(Ei+.5*n));else{var d=Math.sin(n),l=Fu(this.e,n,d);a=this.x0+this.a*this.k0*Qn(e-this.long0),s=this.y0-this.a*this.k0*Math.log(l)}return t.x=a,t.y=s,t}function R9(t){var e=t.x-this.x0,n=t.y-this.y0,a,s;if(this.sphere)s=Pn-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var d=Math.exp(-n/(this.a*this.k0));if(s=Oy(this.e,d),s===-9999)return null}return a=Qn(this.long0+e/(this.a*this.k0)),t.x=a,t.y=s,t}var D9=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const O9={init:k9,forward:L9,inverse:R9,names:D9};function z9(){}function sM(t){return t}var F9=["longlat","identity"];const B9={init:z9,forward:sM,inverse:sM,names:F9};var N9=[O9,B9],Q_={},S1=[];function eP(t,e){var n=S1.length;return t.names?(S1[n]=t,t.names.forEach(function(a){Q_[a.toLowerCase()]=n}),this):(console.log(e),!0)}function j9(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Q_[e]<"u"&&S1[Q_[e]])return S1[Q_[e]]}function V9(){N9.forEach(eP)}const U9={start:V9,add:eP,get:j9};var Lr={};Lr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Lr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Lr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Lr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Lr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Lr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Lr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Lr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Lr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Lr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Lr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Lr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Lr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Lr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Lr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Lr.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Lr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Lr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Lr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Lr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Lr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Lr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Lr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Lr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Lr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Lr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Lr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Lr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Lr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Lr.hough={a:6378270,rf:297,ellipseName:"Hough"};Lr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Lr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Lr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Lr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Lr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Lr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Lr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Lr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Lr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Lr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Lr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Lr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var H9=Lr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Lr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function $9(t,e,n,a){var s=t*t,d=e*e,l=(s-d)/s,o=0;a?(t*=1-l*(h9+l*(d9+l*f9)),s=t*t,l=0):o=Math.sqrt(l);var g=(s-d)/d;return{es:l,e:o,ep2:g}}function G9(t,e,n,a,s){if(!t){var d=kf(Lr,a);d||(d=H9),t=d.a,e=d.b,n=d.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<Hn)&&(s=!0,e=t),{a:t,b:e,rf:n,sphere:s}}var Ia={};Ia.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Ia.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Ia.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Ia.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Ia.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Ia.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Ia.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Ia.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Ia.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};Ia.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Ia.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Ia.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Ia.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Ia.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Ia.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Ia.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Ia.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Ia.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function Z9(t,e,n,a,s,d,l){var o={};return t===void 0||t==="none"?o.datum_type=ww:o.datum_type=c9,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=Hp),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=$p,o.datum_params[3]*=uy,o.datum_params[4]*=uy,o.datum_params[5]*=uy,o.datum_params[6]=o.datum_params[6]/1e6+1)),l&&(o.datum_type=hg,o.grids=l),o.a=n,o.b=a,o.es=s,o.ep2=d,o}var nP={};function W9(t,e){var n=new DataView(e),a=Y9(n),s=X9(n,a),d=Q9(n,s,a),l={header:s,subgrids:d};return nP[t]=l,l}function q9(t){if(t===void 0)return null;var e=t.split(",");return e.map(K9)}function K9(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:nP[t]||null,isNull:!1}}function qm(t){return t/3600*Math.PI/180}function Y9(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function X9(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Iw(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Iw(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function Q9(t,e,n){for(var a=176,s=[],d=0;d<e.nSubgrids;d++){var l=t7(t,a,n),o=e7(t,a,l,n),g=Math.round(1+(l.upperLongitude-l.lowerLongitude)/l.longitudeInterval),_=Math.round(1+(l.upperLatitude-l.lowerLatitude)/l.latitudeInterval);s.push({ll:[qm(l.lowerLongitude),qm(l.lowerLatitude)],del:[qm(l.longitudeInterval),qm(l.latitudeInterval)],lim:[g,_],count:l.gridNodeCount,cvs:J9(o)}),a+=176+l.gridNodeCount*16}return s}function J9(t){return t.map(function(e){return[qm(e.longitudeShift),qm(e.latitudeShift)]})}function t7(t,e,n){return{name:Iw(t,e+8,e+16).trim(),parent:Iw(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function e7(t,e,n,a){for(var s=e+176,d=16,l=[],o=0;o<n.gridNodeCount;o++){var g={latitudeShift:t.getFloat32(s+o*d,a),longitudeShift:t.getFloat32(s+o*d+4,a),latitudeAccuracy:t.getFloat32(s+o*d+8,a),longitudeAccuracy:t.getFloat32(s+o*d+12,a)};l.push(g)}return l}function bh(t,e){if(!(this instanceof bh))return new bh(t);e=e||function(_){if(_)throw _};var n=P9(t);if(typeof n!="object"){e(t);return}var a=bh.projections.get(n.projName);if(!a){e(t);return}if(n.datumCode&&n.datumCode!=="none"){var s=kf(Ia,n.datumCode);s&&(n.datum_params=n.datum_params||(s.towgs84?s.towgs84.split(","):null),n.ellps=s.ellipse,n.datumName=s.datumName?s.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var d=G9(n.a,n.b,n.rf,n.ellps,n.sphere),l=$9(d.a,d.b,d.rf,n.R_A),o=q9(n.nadgrids),g=n.datum||Z9(n.datumCode,n.datum_params,d.a,d.b,l.es,l.ep2,o);aM(this,n),aM(this,a),this.a=d.a,this.b=d.b,this.rf=d.rf,this.sphere=d.sphere,this.es=l.es,this.e=l.e,this.ep2=l.ep2,this.datum=g,this.init(),e(null,this)}bh.projections=U9;bh.projections.start();function n7(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===Hp?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===$p?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function rP(t,e,n){var a=t.x,s=t.y,d=t.z?t.z:0,l,o,g,_;if(s<-Pn&&s>-1.001*Pn)s=-Pn;else if(s>Pn&&s<1.001*Pn)s=Pn;else{if(s<-Pn)return{x:-1/0,y:-1/0,z:t.z};if(s>Pn)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),o=Math.sin(s),_=Math.cos(s),g=o*o,l=n/Math.sqrt(1-e*g),{x:(l+d)*_*Math.cos(a),y:(l+d)*_*Math.sin(a),z:(l*(1-e)+d)*o}}function iP(t,e,n,a){var s=1e-12,d=s*s,l=30,o,g,_,C,I,E,S,k,R,B,V,F,j,G=t.x,Q=t.y,nt=t.z?t.z:0,X,K,Z;if(o=Math.sqrt(G*G+Q*Q),g=Math.sqrt(G*G+Q*Q+nt*nt),o/n<s){if(X=0,g/n<s)return K=Pn,Z=-a,{x:t.x,y:t.y,z:t.z}}else X=Math.atan2(Q,G);_=nt/g,C=o/g,I=1/Math.sqrt(1-e*(2-e)*C*C),k=C*(1-e)*I,R=_*I,j=0;do j++,S=n/Math.sqrt(1-e*R*R),Z=o*k+nt*R-S*(1-e*R*R),E=e*S/(S+Z),I=1/Math.sqrt(1-E*(2-E)*C*C),B=C*(1-E)*I,V=_*I,F=V*k-B*R,k=B,R=V;while(F*F>d&&j<l);return K=Math.atan(V/Math.abs(B)),{x:X,y:K,z:Z}}function r7(t,e,n){if(e===Hp)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===$p){var a=n[0],s=n[1],d=n[2],l=n[3],o=n[4],g=n[5],_=n[6];return{x:_*(t.x-g*t.y+o*t.z)+a,y:_*(g*t.x+t.y-l*t.z)+s,z:_*(-o*t.x+l*t.y+t.z)+d}}}function i7(t,e,n){if(e===Hp)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===$p){var a=n[0],s=n[1],d=n[2],l=n[3],o=n[4],g=n[5],_=n[6],C=(t.x-a)/_,I=(t.y-s)/_,E=(t.z-d)/_;return{x:C+g*I-o*E,y:-g*C+I+l*E,z:o*C-l*I+E}}}function B_(t){return t===Hp||t===$p}function o7(t,e,n){if(n7(t,e)||t.datum_type===ww||e.datum_type===ww)return n;var a=t.a,s=t.es;if(t.datum_type===hg){var d=lM(t,!1,n);if(d!==0)return;a=nM,s=rM}var l=e.a,o=e.b,g=e.es;if(e.datum_type===hg&&(l=nM,o=u9,g=rM),s===g&&a===l&&!B_(t.datum_type)&&!B_(e.datum_type))return n;if(n=rP(n,s,a),B_(t.datum_type)&&(n=r7(n,t.datum_type,t.datum_params)),B_(e.datum_type)&&(n=i7(n,e.datum_type,e.datum_params)),n=iP(n,g,l,o),e.datum_type===hg){var _=lM(e,!0,n);if(_!==0)return}return n}function lM(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-n.x,y:n.y},s={x:Number.NaN,y:Number.NaN},d=[];t:for(var l=0;l<t.grids.length;l++){var o=t.grids[l];if(d.push(o.name),o.isNull){s=a;break}if(o.mandatory,o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var g=o.grid.subgrids,_=0,C=g.length;_<C;_++){var I=g[_],E=(Math.abs(I.del[1])+Math.abs(I.del[0]))/1e4,S=I.ll[0]-E,k=I.ll[1]-E,R=I.ll[0]+(I.lim[0]-1)*I.del[0]+E,B=I.ll[1]+(I.lim[1]-1)*I.del[1]+E;if(!(k>a.y||S>a.x||B<a.y||R<a.x)&&(s=a7(a,e,I),!isNaN(s.x)))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*_h+" "+a.y*_h+" tried: '"+d+"'"),-1):(n.x=-s.x,n.y=s.y,0)}function a7(t,e,n){var a={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return a;var s={x:t.x,y:t.y};s.x-=n.ll[0],s.y-=n.ll[1],s.x=Qn(s.x-Math.PI)+Math.PI;var d=cM(s,n);if(e){if(isNaN(d.x))return a;d.x=s.x-d.x,d.y=s.y-d.y;var l=9,o=1e-12,g,_;do{if(_=cM(d,n),isNaN(_.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}g={x:s.x-(_.x+d.x),y:s.y-(_.y+d.y)},d.x+=g.x,d.y+=g.y}while(l--&&Math.abs(g.x)>o&&Math.abs(g.y)>o);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=Qn(d.x+n.ll[0]),a.y=d.y+n.ll[1]}else isNaN(d.x)||(a.x=t.x+d.x,a.y=t.y+d.y);return a}function cM(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},a={x:Math.floor(n.x),y:Math.floor(n.y)},s={x:n.x-1*a.x,y:n.y-1*a.y},d={x:Number.NaN,y:Number.NaN},l;if(a.x<0||a.x>=e.lim[0]||a.y<0||a.y>=e.lim[1])return d;l=a.y*e.lim[0]+a.x;var o={x:e.cvs[l][0],y:e.cvs[l][1]};l++;var g={x:e.cvs[l][0],y:e.cvs[l][1]};l+=e.lim[0];var _={x:e.cvs[l][0],y:e.cvs[l][1]};l--;var C={x:e.cvs[l][0],y:e.cvs[l][1]},I=s.x*s.y,E=s.x*(1-s.y),S=(1-s.x)*(1-s.y),k=(1-s.x)*s.y;return d.x=S*o.x+E*g.x+k*C.x+I*_.x,d.y=S*o.y+E*g.y+k*C.y+I*_.y,d}function uM(t,e,n){var a=n.x,s=n.y,d=n.z||0,l,o,g,_={};for(g=0;g<3;g++)if(!(e&&g===2&&n.z===void 0))switch(g===0?(l=a,"ew".indexOf(t.axis[g])!==-1?o="x":o="y"):g===1?(l=s,"ns".indexOf(t.axis[g])!==-1?o="y":o="x"):(l=d,o="z"),t.axis[g]){case"e":_[o]=l;break;case"w":_[o]=-l;break;case"n":_[o]=l;break;case"s":_[o]=-l;break;case"u":n[o]!==void 0&&(_.z=l);break;case"d":n[o]!==void 0&&(_.z=-l);break;default:return null}return _}function oP(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function s7(t){hM(t.x),hM(t.y)}function hM(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function l7(t,e){return(t.datum.datum_type===Hp||t.datum.datum_type===$p||t.datum.datum_type===hg)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Hp||e.datum.datum_type===$p||e.datum.datum_type===hg)&&t.datumCode!=="WGS84"}function E1(t,e,n,a){var s;Array.isArray(n)?n=oP(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var d=n.z!==void 0;if(s7(n),t.datum&&e.datum&&l7(t,e)&&(s=new bh("WGS84"),n=E1(t,s,n,a),t=s),a&&t.axis!=="enu"&&(n=uM(t,!1,n)),t.projName==="longlat")n={x:n.x*os,y:n.y*os,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=o7(t.datum,e.datum,n),!!n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*_h,y:n.y*_h,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),a&&e.axis!=="enu"?uM(e,!0,n):(n&&!d&&delete n.z,n)}var dM=bh("WGS84");function gA(t,e,n,a){var s,d,l;return Array.isArray(n)?(s=E1(t,e,n,a)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(n.splice(3)):[s.x,s.y,n[2]].concat(n.splice(3)):[s.x,s.y].concat(n.splice(2)):[s.x,s.y]):(d=E1(t,e,n,a),l=Object.keys(n),l.length===2||l.forEach(function(o){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;d[o]=n[o]}),d)}function fM(t){return t instanceof bh?t:t.oProj?t.oProj:bh(t)}function yc(t,e,n){t=fM(t);var a=!1,s;return typeof e>"u"?(e=t,t=dM,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,e=t,t=dM,a=!0),e=fM(e),n?gA(t,e,n):(s={forward:function(d,l){return gA(t,e,d,l)},inverse:function(d,l){return gA(e,t,d,l)}},a&&(s.oProj=e),s)}var pM=6,aP="AJSAJS",sP="AFAFAF",Km=65,xl=73,Zc=79,Y0=86,X0=90;const c7={forward:lP,inverse:u7,toPoint:cP};function lP(t,e){return e=e||5,f7(h7({lat:t[1],lon:t[0]}),e)}function u7(t){var e=D2(hP(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function cP(t){var e=D2(hP(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function yA(t){return t*(Math.PI/180)}function mM(t){return 180*(t/Math.PI)}function h7(t){var e=t.lat,n=t.lon,a=6378137,s=.00669438,d=.9996,l,o,g,_,C,I,E,S=yA(e),k=yA(n),R,B;B=Math.floor((n+180)/6)+1,n===180&&(B=60),e>=56&&e<64&&n>=3&&n<12&&(B=32),e>=72&&e<84&&(n>=0&&n<9?B=31:n>=9&&n<21?B=33:n>=21&&n<33?B=35:n>=33&&n<42&&(B=37)),l=(B-1)*6-180+3,R=yA(l),o=s/(1-s),g=a/Math.sqrt(1-s*Math.sin(S)*Math.sin(S)),_=Math.tan(S)*Math.tan(S),C=o*Math.cos(S)*Math.cos(S),I=Math.cos(S)*(k-R),E=a*((1-s/4-3*s*s/64-5*s*s*s/256)*S-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*S)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*S)-35*s*s*s/3072*Math.sin(6*S));var V=d*g*(I+(1-_+C)*I*I*I/6+(5-18*_+_*_+72*C-58*o)*I*I*I*I*I/120)+5e5,F=d*(E+g*Math.tan(S)*(I*I/2+(5-_+9*C+4*C*C)*I*I*I*I/24+(61-58*_+_*_+600*C-330*o)*I*I*I*I*I*I/720));return e<0&&(F+=1e7),{northing:Math.round(F),easting:Math.round(V),zoneNumber:B,zoneLetter:d7(e)}}function D2(t){var e=t.northing,n=t.easting,a=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var d=.9996,l=6378137,o=.00669438,g,_=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),C,I,E,S,k,R,B,V,F,j=n-5e5,G=e;a<"N"&&(G-=1e7),B=(s-1)*6-180+3,g=o/(1-o),R=G/d,V=R/(l*(1-o/4-3*o*o/64-5*o*o*o/256)),F=V+(3*_/2-27*_*_*_/32)*Math.sin(2*V)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*V)+151*_*_*_/96*Math.sin(6*V),C=l/Math.sqrt(1-o*Math.sin(F)*Math.sin(F)),I=Math.tan(F)*Math.tan(F),E=g*Math.cos(F)*Math.cos(F),S=l*(1-o)/Math.pow(1-o*Math.sin(F)*Math.sin(F),1.5),k=j/(C*d);var Q=F-C*Math.tan(F)/S*(k*k/2-(5+3*I+10*E-4*E*E-9*g)*k*k*k*k/24+(61+90*I+298*E+45*I*I-252*g-3*E*E)*k*k*k*k*k*k/720);Q=mM(Q);var nt=(k-(1+2*I+E)*k*k*k/6+(5-2*E+28*I-3*E*E+8*g+24*I*I)*k*k*k*k*k/120)/Math.cos(F);nt=B+mM(nt);var X;if(t.accuracy){var K=D2({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});X={top:K.lat,right:K.lon,bottom:Q,left:nt}}else X={lat:Q,lon:nt};return X}function d7(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function f7(t,e){var n="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+p7(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+a.substr(a.length-5,e)}function p7(t,e,n){var a=uP(n),s=Math.floor(t/1e5),d=Math.floor(e/1e5)%20;return m7(s,d,a)}function uP(t){var e=t%pM;return e===0&&(e=pM),e}function m7(t,e,n){var a=n-1,s=aP.charCodeAt(a),d=sP.charCodeAt(a),l=s+t-1,o=d+e,g=!1;l>X0&&(l=l-X0+Km-1,g=!0),(l===xl||s<xl&&l>xl||(l>xl||s<xl)&&g)&&l++,(l===Zc||s<Zc&&l>Zc||(l>Zc||s<Zc)&&g)&&(l++,l===xl&&l++),l>X0&&(l=l-X0+Km-1),o>Y0?(o=o-Y0+Km-1,g=!0):g=!1,(o===xl||d<xl&&o>xl||(o>xl||d<xl)&&g)&&o++,(o===Zc||d<Zc&&o>Zc||(o>Zc||d<Zc)&&g)&&(o++,o===xl&&o++),o>Y0&&(o=o-Y0+Km-1);var _=String.fromCharCode(l)+String.fromCharCode(o);return _}function hP(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,a="",s,d=0;!/[A-Z]/.test(s=t.charAt(d));){if(d>=2)throw"MGRSPoint bad conversion from: "+t;a+=s,d++}var l=parseInt(a,10);if(d===0||d+3>e)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(d++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+t;n=t.substring(d,d+=2);for(var g=uP(l),_=g7(n.charAt(0),g),C=y7(n.charAt(1),g);C<v7(o);)C+=2e6;var I=e-d;if(I%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var E=I/2,S=0,k=0,R,B,V,F,j;return E>0&&(R=1e5/Math.pow(10,E),B=t.substring(d,d+E),S=parseFloat(B)*R,V=t.substring(d+E),k=parseFloat(V)*R),F=S+_,j=k+C,{easting:F,northing:j,zoneLetter:o,zoneNumber:l,accuracy:R}}function g7(t,e){for(var n=aP.charCodeAt(e-1),a=1e5,s=!1;n!==t.charCodeAt(0);){if(n++,n===xl&&n++,n===Zc&&n++,n>X0){if(s)throw"Bad character: "+t;n=Km,s=!0}a+=1e5}return a}function y7(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=sP.charCodeAt(e-1),a=0,s=!1;n!==t.charCodeAt(0);){if(n++,n===xl&&n++,n===Zc&&n++,n>Y0){if(s)throw"Bad character: "+t;n=Km,s=!0}a+=1e5}return a}function v7(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Cg(t,e,n){if(!(this instanceof Cg))return new Cg(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Cg.fromMGRS=function(t){return new Cg(cP(t))};Cg.prototype.toMGRS=function(t){return lP([this.x,this.y],t)};var _7=1,b7=.25,gM=.046875,yM=.01953125,vM=.01068115234375,x7=.75,A7=.46875,w7=.013020833333333334,C7=.007120768229166667,I7=.3645833333333333,M7=.005696614583333333,S7=.3076171875;function dP(t){var e=[];e[0]=_7-t*(b7+t*(gM+t*(yM+t*vM))),e[1]=t*(x7-t*(gM+t*(yM+t*vM)));var n=t*t;return e[2]=n*(A7-t*(w7+t*C7)),n*=t,e[3]=n*(I7-t*M7),e[4]=n*t*S7,e}function Lb(t,e,n,a){return n*=e,e*=e,a[0]*t-n*(a[1]+e*(a[2]+e*(a[3]+e*a[4])))}var E7=20;function fP(t,e,n){for(var a=1/(1-e),s=t,d=E7;d;--d){var l=Math.sin(s),o=1-e*l*l;if(o=(Lb(s,l,Math.cos(s),n)-t)*(o*Math.sqrt(o))*a,s-=o,Math.abs(o)<Hn)return s}return s}function T7(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=dP(this.es),this.ml0=Lb(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function P7(t){var e=t.x,n=t.y,a=Qn(e-this.long0),s,d,l,o=Math.sin(n),g=Math.cos(n);if(this.es){var C=g*a,I=Math.pow(C,2),E=this.ep2*Math.pow(g,2),S=Math.pow(E,2),k=Math.abs(g)>Hn?Math.tan(n):0,R=Math.pow(k,2),B=Math.pow(R,2);s=1-this.es*Math.pow(o,2),C=C/Math.sqrt(s);var V=Lb(n,o,g,this.en);d=this.a*(this.k0*C*(1+I/6*(1-R+E+I/20*(5-18*R+B+14*E-58*R*E+I/42*(61+179*B-B*R-479*R)))))+this.x0,l=this.a*(this.k0*(V-this.ml0+o*a*C/2*(1+I/12*(5-R+9*E+4*S+I/30*(61+B-58*R+270*E-330*R*E+I/56*(1385+543*B-B*R-3111*R))))))+this.y0}else{var _=g*Math.sin(a);if(Math.abs(Math.abs(_)-1)<Hn)return 93;if(d=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,l=g*Math.cos(a)/Math.sqrt(1-Math.pow(_,2)),_=Math.abs(l),_>=1){if(_-1>Hn)return 93;l=0}else l=Math.acos(l);n<0&&(l=-l),l=this.a*this.k0*(l-this.lat0)+this.y0}return t.x=d,t.y=l,t}function k7(t){var e,n,a,s,d=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+l/this.k0,n=fP(e,this.es,this.en),Math.abs(n)<Pn){var I=Math.sin(n),E=Math.cos(n),S=Math.abs(E)>Hn?Math.tan(n):0,k=this.ep2*Math.pow(E,2),R=Math.pow(k,2),B=Math.pow(S,2),V=Math.pow(B,2);e=1-this.es*Math.pow(I,2);var F=d*Math.sqrt(e)/this.k0,j=Math.pow(F,2);e=e*S,a=n-e*j/(1-this.es)*.5*(1-j/12*(5+3*B-9*k*B+k-4*R-j/30*(61+90*B-252*k*B+45*V+46*k-j/56*(1385+3633*B+4095*V+1574*V*B)))),s=Qn(this.long0+F*(1-j/6*(1+2*B+k-j/20*(5+28*B+24*V+8*k*B+6*k-j/42*(61+662*B+1320*V+720*V*B))))/E)}else a=Pn*tv(l),s=0;else{var o=Math.exp(d/this.k0),g=.5*(o-1/o),_=this.lat0+l/this.k0,C=Math.cos(_);e=Math.sqrt((1-Math.pow(C,2))/(1+Math.pow(g,2))),a=Math.asin(e),l<0&&(a=-a),g===0&&C===0?s=0:s=Qn(Math.atan2(g,C)+this.long0)}return t.x=s,t.y=a,t}var L7=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const J_={init:T7,forward:P7,inverse:k7,names:L7};function pP(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function qc(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),a=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(a,2))}function R7(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function D7(t){var e=Math.abs(t);return e=R7(e*(1+e/(qc(1,e)+1))),t<0?-e:e}function O2(t,e){for(var n=2*Math.cos(2*e),a=t.length-1,s=t[a],d=0,l;--a>=0;)l=-d+n*s+t[a],d=s,s=l;return e+l*Math.sin(2*e)}function O7(t,e){for(var n=2*Math.cos(e),a=t.length-1,s=t[a],d=0,l;--a>=0;)l=-d+n*s+t[a],d=s,s=l;return Math.sin(e)*l}function z7(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function mP(t,e,n){for(var a=Math.sin(e),s=Math.cos(e),d=pP(n),l=z7(n),o=2*s*l,g=-2*a*d,_=t.length-1,C=t[_],I=0,E=0,S=0,k,R;--_>=0;)k=E,R=I,E=C,I=S,C=-k+o*E-g*I+t[_],S=-R+g*E+o*I;return o=a*l,g=s*d,[o*C-g*S,o*S+g*C]}function F7(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(J_.init.apply(this),this.forward=J_.forward,this.inverse=J_.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var a=O2(this.cbg,this.lat0);this.Zb=-this.Qn*(a+O7(this.gtu,2*a))}function B7(t){var e=Qn(t.x-this.long0),n=t.y;n=O2(this.cbg,n);var a=Math.sin(n),s=Math.cos(n),d=Math.sin(e),l=Math.cos(e);n=Math.atan2(a,l*s),e=Math.atan2(d*s,qc(a,s*l)),e=D7(Math.tan(e));var o=mP(this.gtu,2*n,2*e);n=n+o[0],e=e+o[1];var g,_;return Math.abs(e)<=2.623395162778?(g=this.a*(this.Qn*e)+this.x0,_=this.a*(this.Qn*n+this.Zb)+this.y0):(g=1/0,_=1/0),t.x=g,t.y=_,t}function N7(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var a,s;if(Math.abs(e)<=2.623395162778){var d=mP(this.utg,2*n,2*e);n=n+d[0],e=e+d[1],e=Math.atan(pP(e));var l=Math.sin(n),o=Math.cos(n),g=Math.sin(e),_=Math.cos(e);n=Math.atan2(l*_,qc(g,_*o)),e=Math.atan2(g,_*o),a=Qn(e+this.long0),s=O2(this.cgb,n)}else a=1/0,s=1/0;return t.x=a,t.y=s,t}var j7=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const t1={init:F7,forward:B7,inverse:N7,names:j7};function V7(t,e){if(t===void 0){if(t=Math.floor((Qn(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var U7="etmerc";function H7(){var t=V7(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*os,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,t1.init.apply(this),this.forward=t1.forward,this.inverse=t1.inverse}var $7=["Universal Transverse Mercator System","utm"];const G7={init:H7,names:$7,dependsOn:U7};function z2(t,e){return Math.pow((1-t)/(1+t),e)}var Z7=20;function W7(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Ei)/(Math.pow(Math.tan(.5*this.lat0+Ei),this.C)*z2(this.e*t,this.ratexp))}function q7(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Ei),this.C)*z2(this.e*Math.sin(n),this.ratexp))-Pn,t.x=this.C*e,t}function K7(t){for(var e=1e-14,n=t.x/this.C,a=t.y,s=Math.pow(Math.tan(.5*a+Ei)/this.K,1/this.C),d=Z7;d>0&&(a=2*Math.atan(s*z2(this.e*Math.sin(t.y),-.5*this.e))-Pn,!(Math.abs(a-t.y)<e));--d)t.y=a;return d?(t.x=n,t.y=a,t):null}var Y7=["gauss"];const F2={init:W7,forward:q7,inverse:K7,names:Y7};function X7(){F2.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Q7(t){var e,n,a,s;return t.x=Qn(t.x-this.long0),F2.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),a=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*a),t.x=s*n*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*n*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function J7(t){var e,n,a,s,d;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,d=qc(t.x,t.y)){var l=2*Math.atan2(d,this.R2);e=Math.sin(l),n=Math.cos(l),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/d),a=Math.atan2(t.x*e,d*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,a=0;return t.x=a,t.y=s,F2.inverse.apply(this,[t]),t.x=Qn(t.x+this.long0),t}var tj=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const ej={init:X7,forward:Q7,inverse:J7,names:tj};function nj(t,e,n){return e*=n,Math.tan(.5*(Pn+t))*Math.pow((1-e)/(1+e),.5*n)}function rj(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Hn&&(this.k0=.5*(1+tv(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Hn&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Hn&&Math.abs(Math.cos(this.lat_ts))>Hn&&(this.k0=.5*this.cons*Ch(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Fu(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ch(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Pn,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function ij(t){var e=t.x,n=t.y,a=Math.sin(n),s=Math.cos(n),d,l,o,g,_,C,I=Qn(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Hn&&Math.abs(n+this.lat0)<=Hn?(t.x=NaN,t.y=NaN,t):this.sphere?(d=2*this.k0/(1+this.sinlat0*a+this.coslat0*s*Math.cos(I)),t.x=this.a*d*s*Math.sin(I)+this.x0,t.y=this.a*d*(this.coslat0*a-this.sinlat0*s*Math.cos(I))+this.y0,t):(l=2*Math.atan(this.ssfn_(n,a,this.e))-Pn,g=Math.cos(l),o=Math.sin(l),Math.abs(this.coslat0)<=Hn?(_=Fu(this.e,n*this.con,this.con*a),C=2*this.a*this.k0*_/this.cons,t.x=this.x0+C*Math.sin(e-this.long0),t.y=this.y0-this.con*C*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<Hn?(d=2*this.a*this.k0/(1+g*Math.cos(I)),t.y=d*o):(d=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*g*Math.cos(I))),t.y=d*(this.cosX0*o-this.sinX0*g*Math.cos(I))+this.y0),t.x=d*g*Math.sin(I)+this.x0,t))}function oj(t){t.x-=this.x0,t.y-=this.y0;var e,n,a,s,d,l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var o=2*Math.atan(l/(2*this.a*this.k0));return e=this.long0,n=this.lat0,l<=Hn?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(o)*this.sinlat0+t.y*Math.sin(o)*this.coslat0/l),Math.abs(this.coslat0)<Hn?this.lat0>0?e=Qn(this.long0+Math.atan2(t.x,-1*t.y)):e=Qn(this.long0+Math.atan2(t.x,t.y)):e=Qn(this.long0+Math.atan2(t.x*Math.sin(o),l*this.coslat0*Math.cos(o)-t.y*this.sinlat0*Math.sin(o))),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=Hn){if(l<=Hn)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,a=l*this.cons/(2*this.a*this.k0),n=this.con*Oy(this.e,a),e=this.con*Qn(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,l<=Hn?d=this.X0:(d=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/l),e=Qn(this.long0+Math.atan2(t.x*Math.sin(s),l*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),n=-1*Oy(this.e,Math.tan(.5*(Pn+d)));return t.x=e,t.y=n,t}var aj=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const sj={init:rj,forward:ij,inverse:oj,names:aj,ssfn_:nj};function lj(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,a=this.rf,s=1/a,d=2*s-Math.pow(s,2),l=this.e=Math.sqrt(d);this.R=this.k0*n*Math.sqrt(1-d)/(1-d*Math.pow(e,2)),this.alpha=Math.sqrt(1+d/(1-d)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),g=Math.log(Math.tan(Math.PI/4+t/2)),_=Math.log((1+l*e)/(1-l*e));this.K=o-this.alpha*g+this.alpha*l/2*_}function cj(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(e+n)+this.K,s=2*(Math.atan(Math.exp(a))-Math.PI/4),d=this.alpha*(t.x-this.lambda0),l=Math.atan(Math.sin(d)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(d))),o=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(d));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*l+this.x0,t}function uj(t){for(var e=t.x-this.x0,n=t.y-this.y0,a=e/this.R,s=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),d=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(a)),l=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(s))),o=this.lambda0+l/this.alpha,g=0,_=d,C=-1e3,I=0;Math.abs(_-C)>1e-7;){if(++I>20)return;g=1/this.alpha*(Math.log(Math.tan(Math.PI/4+d/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(_))/2)),C=_,_=2*Math.atan(Math.exp(g))-Math.PI/2}return t.x=o,t.y=_,t}var hj=["somerc"];const dj={init:lj,forward:cj,inverse:uj,names:hj};var Gm=1e-7;function fj(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1}function pj(){var t,e,n,a,s,d,l,o,g,_,C=0,I,E=0,S=0,k=0,R=0,B=0,V=0;this.no_off=fj(this),this.no_rot="no_rot"in this;var F=!1;"alpha"in this&&(F=!0);var j=!1;if("rectified_grid_angle"in this&&(j=!0),F&&(V=this.alpha),j&&(C=this.rectified_grid_angle*os),F||j)E=this.longc;else if(S=this.long1,R=this.lat1,k=this.long2,B=this.lat2,Math.abs(R-B)<=Gm||(t=Math.abs(R))<=Gm||Math.abs(t-Pn)<=Gm||Math.abs(Math.abs(this.lat0)-Pn)<=Gm||Math.abs(Math.abs(B)-Pn)<=Gm)throw new Error;var G=1-this.es;e=Math.sqrt(G),Math.abs(this.lat0)>Hn?(o=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*o*o,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/G),this.A=this.B*this.k0*e/t,a=this.B*e/(n*Math.sqrt(t)),s=a*a-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=a,this.E*=Math.pow(Fu(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=a=s=1),F||j?(F?(I=Math.asin(Math.sin(V)/a),j||(C=V)):(I=C,V=Math.asin(a*Math.sin(I))),this.lam0=E-Math.asin(.5*(s-1/s)*Math.tan(I))/this.B):(d=Math.pow(Fu(this.e,R,Math.sin(R)),this.B),l=Math.pow(Fu(this.e,B,Math.sin(B)),this.B),s=this.E/d,g=(l-d)/(l+d),_=this.E*this.E,_=(_-l*d)/(_+l*d),t=S-k,t<-Math.pi?k-=Ry:t>Math.pi&&(k+=Ry),this.lam0=Qn(.5*(S+k)-Math.atan(_*Math.tan(.5*this.B*(S-k))/g)/this.B),I=Math.atan(2*Math.sin(this.B*Qn(S-this.lam0))/(s-1/s)),C=V=Math.asin(a*Math.sin(I))),this.singam=Math.sin(I),this.cosgam=Math.cos(I),this.sinrot=Math.sin(C),this.cosrot=Math.cos(C),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(V))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*I,this.v_pole_n=this.ArB*Math.log(Math.tan(Ei-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(Ei+s))}function mj(t){var e={},n,a,s,d,l,o,g,_;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Pn)>Hn){if(l=this.E/Math.pow(Fu(this.e,t.y,Math.sin(t.y)),this.B),o=1/l,n=.5*(l-o),a=.5*(l+o),d=Math.sin(this.B*t.x),s=(n*this.singam-d*this.cosgam)/a,Math.abs(Math.abs(s)-1)<Hn)throw new Error;_=.5*this.ArB*Math.log((1-s)/(1+s)),o=Math.cos(this.B*t.x),Math.abs(o)<Gm?g=this.A*t.x:g=this.ArB*Math.atan2(n*this.cosgam+d*this.singam,o)}else _=t.y>0?this.v_pole_n:this.v_pole_s,g=this.ArB*t.y;return this.no_rot?(e.x=g,e.y=_):(g-=this.u_0,e.x=_*this.cosrot+g*this.sinrot,e.y=g*this.cosrot-_*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function gj(t){var e,n,a,s,d,l,o,g={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*n),s=.5*(a-1/a),d=.5*(a+1/a),l=Math.sin(this.BrA*e),o=(l*this.cosgam+s*this.singam)/d,Math.abs(Math.abs(o)-1)<Hn)g.x=0,g.y=o<0?-Pn:Pn;else{if(g.y=this.E/Math.sqrt((1+o)/(1-o)),g.y=Oy(this.e,Math.pow(g.y,1/this.B)),g.y===1/0)throw new Error;g.x=-this.rB*Math.atan2(s*this.cosgam-l*this.singam,Math.cos(this.BrA*e))}return g.x+=this.lam0,g}var yj=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const vj={init:pj,forward:mj,inverse:gj,names:yj};function _j(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Hn)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),a=Ch(this.e,e,n),s=Fu(this.e,this.lat1,e),d=Math.sin(this.lat2),l=Math.cos(this.lat2),o=Ch(this.e,d,l),g=Fu(this.e,this.lat2,d),_=Fu(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Hn?this.ns=Math.log(a/o)/Math.log(s/g):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(_,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function bj(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=Hn&&(n=tv(n)*(Pn-2*Hn));var a=Math.abs(Math.abs(n)-Pn),s,d;if(a>Hn)s=Fu(this.e,n,Math.sin(n)),d=this.a*this.f0*Math.pow(s,this.ns);else{if(a=n*this.ns,a<=0)return null;d=0}var l=this.ns*Qn(e-this.long0);return t.x=this.k0*(d*Math.sin(l))+this.x0,t.y=this.k0*(this.rh-d*Math.cos(l))+this.y0,t}function xj(t){var e,n,a,s,d,l=(t.x-this.x0)/this.k0,o=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(l*l+o*o),n=1):(e=-Math.sqrt(l*l+o*o),n=-1);var g=0;if(e!==0&&(g=Math.atan2(n*l,n*o)),e!==0||this.ns>0){if(n=1/this.ns,a=Math.pow(e/(this.a*this.f0),n),s=Oy(this.e,a),s===-9999)return null}else s=-Pn;return d=Qn(g/this.ns+this.long0),t.x=d,t.y=s,t}var Aj=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const wj={init:_j,forward:bj,inverse:xj,names:Aj};function Cj(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Ij(t){var e,n,a,s,d,l,o,g=t.x,_=t.y,C=Qn(g-this.long0);return e=Math.pow((1+this.e*Math.sin(_))/(1-this.e*Math.sin(_)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(_/2+this.s45),this.alfa)/e)-this.s45),a=-C*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(a)),d=Math.asin(Math.cos(n)*Math.sin(a)/Math.cos(s)),l=this.n*d,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=o*Math.cos(l)/1,t.x=o*Math.sin(l)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Mj(t){var e,n,a,s,d,l,o,g,_=t.x;t.x=t.y,t.y=_,this.czech||(t.y*=-1,t.x*=-1),l=Math.sqrt(t.x*t.x+t.y*t.y),d=Math.atan2(t.y,t.x),s=d/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/l,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(s)),n=Math.asin(Math.cos(a)*Math.sin(s)/Math.cos(e)),t.x=this.long0-n/this.alfa,o=e,g=0;var C=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(g=1),o=t.y,C+=1;while(g===0&&C<15);return C>=15?null:t}var Sj=["Krovak","krovak"];const Ej={init:Cj,forward:Ij,inverse:Mj,names:Sj};function tl(t,e,n,a,s){return t*s-e*Math.sin(2*s)+n*Math.sin(4*s)-a*Math.sin(6*s)}function ev(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function nv(t){return .375*t*(1+.25*t*(1+.46875*t))}function rv(t){return .05859375*t*t*(1+.75*t)}function iv(t){return t*t*t*(35/3072)}function Ig(t,e,n){var a=e*n;return t/Math.sqrt(1-a*a)}function Fg(t){return Math.abs(t)<Pn?t:t-tv(t)*Math.PI}function T1(t,e,n,a,s){var d,l;d=t/e;for(var o=0;o<15;o++)if(l=(t-(e*d-n*Math.sin(2*d)+a*Math.sin(4*d)-s*Math.sin(6*d)))/(e-2*n*Math.cos(2*d)+4*a*Math.cos(4*d)-6*s*Math.cos(6*d)),d+=l,Math.abs(l)<=1e-10)return d;return NaN}function Tj(){this.sphere||(this.e0=ev(this.es),this.e1=nv(this.es),this.e2=rv(this.es),this.e3=iv(this.es),this.ml0=this.a*tl(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Pj(t){var e,n,a=t.x,s=t.y;if(a=Qn(a-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(a)),n=this.a*(Math.atan2(Math.tan(s),Math.cos(a))-this.lat0);else{var d=Math.sin(s),l=Math.cos(s),o=Ig(this.a,this.e,d),g=Math.tan(s)*Math.tan(s),_=a*Math.cos(s),C=_*_,I=this.es*l*l/(1-this.es),E=this.a*tl(this.e0,this.e1,this.e2,this.e3,s);e=o*_*(1-C*g*(1/6-(8-g+8*I)*C/120)),n=E-this.ml0+o*d/l*C*(.5+(5-g+6*I)*C/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function kj(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,a,s;if(this.sphere){var d=n+this.lat0;a=Math.asin(Math.sin(d)*Math.cos(e)),s=Math.atan2(Math.tan(e),Math.cos(d))}else{var l=this.ml0/this.a+n,o=T1(l,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Pn)<=Hn)return t.x=this.long0,t.y=Pn,n<0&&(t.y*=-1),t;var g=Ig(this.a,this.e,Math.sin(o)),_=g*g*g/this.a/this.a*(1-this.es),C=Math.pow(Math.tan(o),2),I=e*this.a/g,E=I*I;a=o-g*Math.tan(o)/_*I*I*(.5-(1+3*C)*I*I/24),s=I*(1-E*(C/3+(1+3*C)*C*E/15))/Math.cos(o)}return t.x=Qn(s+this.long0),t.y=Fg(a),t}var Lj=["Cassini","Cassini_Soldner","cass"];const Rj={init:Tj,forward:Pj,inverse:kj,names:Lj};function wf(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var Dj=1,Oj=2,zj=3,Fj=4;function Bj(){var t=Math.abs(this.lat0);if(Math.abs(t-Pn)<Hn?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<Hn?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=wf(this.e,1),this.mmf=.5/(1-this.es),this.apa=Wj(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=wf(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Nj(t){var e,n,a,s,d,l,o,g,_,C,I=t.x,E=t.y;if(I=Qn(I-this.long0),this.sphere){if(d=Math.sin(E),C=Math.cos(E),a=Math.cos(I),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+C*a:1+this.sinph0*d+this.cosph0*C*a,n<=Hn)return null;n=Math.sqrt(2/n),e=n*C*Math.sin(I),n*=this.mode===this.EQUIT?d:this.cosph0*d-this.sinph0*C*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(E+this.lat0)<Hn)return null;n=Ei-E*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(I),n*=a}}else{switch(o=0,g=0,_=0,a=Math.cos(I),s=Math.sin(I),d=Math.sin(E),l=wf(this.e,d),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=l/this.qp,g=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:_=1+this.sinb1*o+this.cosb1*g*a;break;case this.EQUIT:_=1+g*a;break;case this.N_POLE:_=Pn+E,l=this.qp-l;break;case this.S_POLE:_=E-Pn,l=this.qp+l;break}if(Math.abs(_)<Hn)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:_=Math.sqrt(2/_),this.mode===this.OBLIQ?n=this.ymf*_*(this.cosb1*o-this.sinb1*g*a):n=(_=Math.sqrt(2/(1+g*a)))*o*this.ymf,e=this.xmf*_*g*s;break;case this.N_POLE:case this.S_POLE:l>=0?(e=(_=Math.sqrt(l))*s,n=a*(this.mode===this.S_POLE?_:-_)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function jj(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,a,s,d,l,o,g,_;if(this.sphere){var C=0,I,E=0;if(I=Math.sqrt(e*e+n*n),s=I*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(E=Math.sin(s),C=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(I)<=Hn?0:Math.asin(n*E/I),e*=E,n=C*I;break;case this.OBLIQ:s=Math.abs(I)<=Hn?this.lat0:Math.asin(C*this.sinph0+n*E*this.cosph0/I),e*=E*this.cosph0,n=(C-Math.sin(s)*this.sinph0)*I;break;case this.N_POLE:n=-n,s=Pn-s;break;case this.S_POLE:s-=Pn;break}a=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(_=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,g=Math.sqrt(e*e+n*n),g<Hn)return t.x=this.long0,t.y=this.lat0,t;l=2*Math.asin(.5*g/this.rq),d=Math.cos(l),e*=l=Math.sin(l),this.mode===this.OBLIQ?(_=d*this.sinb1+n*l*this.cosb1/g,o=this.qp*_,n=g*this.cosb1*d-n*this.sinb1*l):(_=n*l/g,o=this.qp*_,n=g*d)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),o=e*e+n*n,!o)return t.x=this.long0,t.y=this.lat0,t;_=1-o/this.qp,this.mode===this.S_POLE&&(_=-_)}a=Math.atan2(e,n),s=qj(Math.asin(_),this.apa)}return t.x=Qn(this.long0+a),t.y=s,t}var Vj=.3333333333333333,Uj=.17222222222222222,Hj=.10257936507936508,$j=.06388888888888888,Gj=.0664021164021164,Zj=.016415012942191543;function Wj(t){var e,n=[];return n[0]=t*Vj,e=t*t,n[0]+=e*Uj,n[1]=e*$j,e*=t,n[0]+=e*Hj,n[1]+=e*Gj,n[2]=e*Zj,n}function qj(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var Kj=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Yj={init:Bj,forward:Nj,inverse:jj,names:Kj,S_POLE:Dj,N_POLE:Oj,EQUIT:zj,OBLIQ:Fj};function Lf(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function Xj(){Math.abs(this.lat1+this.lat2)<Hn||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ch(this.e3,this.sin_po,this.cos_po),this.qs1=wf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ch(this.e3,this.sin_po,this.cos_po),this.qs2=wf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=wf(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Hn?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Qj(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var a=wf(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,d=this.ns0*Qn(e-this.long0),l=s*Math.sin(d)+this.x0,o=this.rh-s*Math.cos(d)+this.y0;return t.x=l,t.y=o,t}function Jj(t){var e,n,a,s,d,l;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1),s=0,e!==0&&(s=Math.atan2(a*t.x,a*t.y)),a=e*this.ns0/this.a,this.sphere?l=Math.asin((this.c-a*a)/(2*this.ns0)):(n=(this.c-a*a)/this.ns0,l=this.phi1z(this.e3,n)),d=Qn(s/this.ns0+this.long0),t.x=d,t.y=l,t}function tV(t,e){var n,a,s,d,l,o=Lf(.5*e);if(t<Hn)return o;for(var g=t*t,_=1;_<=25;_++)if(n=Math.sin(o),a=Math.cos(o),s=t*n,d=1-s*s,l=.5*d*d/a*(e/(1-g)-n/d+.5/t*Math.log((1-s)/(1+s))),o=o+l,Math.abs(l)<=1e-7)return o;return null}var eV=["Albers_Conic_Equal_Area","Albers","aea"];const nV={init:Xj,forward:Qj,inverse:Jj,names:eV,phi1z:tV};function rV(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function iV(t){var e,n,a,s,d,l,o,g,_=t.x,C=t.y;return a=Qn(_-this.long0),e=Math.sin(C),n=Math.cos(C),s=Math.cos(a),l=this.sin_p14*e+this.cos_p14*n*s,d=1,l>0||Math.abs(l)<=Hn?(o=this.x0+this.a*d*n*Math.sin(a)/l,g=this.y0+this.a*d*(this.cos_p14*e-this.sin_p14*n*s)/l):(o=this.x0+this.infinity_dist*n*Math.sin(a),g=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*s)),t.x=o,t.y=g,t}function oV(t){var e,n,a,s,d,l;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),n=Math.sin(s),a=Math.cos(s),l=Lf(a*this.sin_p14+t.y*n*this.cos_p14/e),d=Math.atan2(t.x*n,e*this.cos_p14*a-t.y*this.sin_p14*n),d=Qn(this.long0+d)):(l=this.phic0,d=0),t.x=d,t.y=l,t}var aV=["gnom"];const sV={init:rV,forward:iV,inverse:oV,names:aV};function lV(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*Pn:Pn;for(var a=Math.asin(.5*e),s,d,l,o,g=0;g<30;g++)if(d=Math.sin(a),l=Math.cos(a),o=t*d,s=Math.pow(1-o*o,2)/(2*l)*(e/(1-t*t)-d/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),a+=s,Math.abs(s)<=1e-10)return a;return NaN}function cV(){this.sphere||(this.k0=Ch(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function uV(t){var e=t.x,n=t.y,a,s,d=Qn(e-this.long0);if(this.sphere)a=this.x0+this.a*d*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var l=wf(this.e,Math.sin(n));a=this.x0+this.a*this.k0*d,s=this.y0+this.a*l*.5/this.k0}return t.x=a,t.y=s,t}function hV(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Qn(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=lV(this.e,2*t.y*this.k0/this.a),e=Qn(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var dV=["cea"];const fV={init:cV,forward:uV,inverse:hV,names:dV};function pV(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function mV(t){var e=t.x,n=t.y,a=Qn(e-this.long0),s=Fg(n-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*s,t}function gV(t){var e=t.x,n=t.y;return t.x=Qn(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Fg(this.lat0+(n-this.y0)/this.a),t}var yV=["Equirectangular","Equidistant_Cylindrical","eqc"];const vV={init:pV,forward:mV,inverse:gV,names:yV};var _M=20;function _V(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ev(this.es),this.e1=nv(this.es),this.e2=rv(this.es),this.e3=iv(this.es),this.ml0=this.a*tl(this.e0,this.e1,this.e2,this.e3,this.lat0)}function bV(t){var e=t.x,n=t.y,a,s,d,l=Qn(e-this.long0);if(d=l*Math.sin(n),this.sphere)Math.abs(n)<=Hn?(a=this.a*l,s=-1*this.a*this.lat0):(a=this.a*Math.sin(d)/Math.tan(n),s=this.a*(Fg(n-this.lat0)+(1-Math.cos(d))/Math.tan(n)));else if(Math.abs(n)<=Hn)a=this.a*l,s=-1*this.ml0;else{var o=Ig(this.a,this.e,Math.sin(n))/Math.tan(n);a=o*Math.sin(d),s=this.a*tl(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+o*(1-Math.cos(d))}return t.x=a+this.x0,t.y=s+this.y0,t}function xV(t){var e,n,a,s,d,l,o,g,_;if(a=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=Hn)e=Qn(a/this.a+this.long0),n=0;else{l=this.lat0+s/this.a,o=a*a/this.a/this.a+l*l,g=l;var C;for(d=_M;d;--d)if(C=Math.tan(g),_=-1*(l*(g*C+1)-g-.5*(g*g+o)*C)/((g-l)/C-1),g+=_,Math.abs(_)<=Hn){n=g;break}e=Qn(this.long0+Math.asin(a*Math.tan(g)/this.a)/Math.sin(n))}else if(Math.abs(s+this.ml0)<=Hn)n=0,e=Qn(this.long0+a/this.a);else{l=(this.ml0+s)/this.a,o=a*a/this.a/this.a+l*l,g=l;var I,E,S,k,R;for(d=_M;d;--d)if(R=this.e*Math.sin(g),I=Math.sqrt(1-R*R)*Math.tan(g),E=this.a*tl(this.e0,this.e1,this.e2,this.e3,g),S=this.e0-2*this.e1*Math.cos(2*g)+4*this.e2*Math.cos(4*g)-6*this.e3*Math.cos(6*g),k=E/this.a,_=(l*(I*k+1)-k-.5*I*(k*k+o))/(this.es*Math.sin(2*g)*(k*k+o-2*l*k)/(4*I)+(l-k)*(I*S-2/Math.sin(2*g))-S),g-=_,Math.abs(_)<=Hn){n=g;break}I=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Qn(this.long0+Math.asin(a*I/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var AV=["Polyconic","poly"];const wV={init:_V,forward:bV,inverse:xV,names:AV};function CV(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function IV(t){var e,n=t.x,a=t.y,s=a-this.lat0,d=n-this.long0,l=s/uy*1e-5,o=d,g=1,_=0;for(e=1;e<=10;e++)g=g*l,_=_+this.A[e]*g;var C=_,I=o,E=1,S=0,k,R,B=0,V=0;for(e=1;e<=6;e++)k=E*C-S*I,R=S*C+E*I,E=k,S=R,B=B+this.B_re[e]*E-this.B_im[e]*S,V=V+this.B_im[e]*E+this.B_re[e]*S;return t.x=V*this.a+this.x0,t.y=B*this.a+this.y0,t}function MV(t){var e,n=t.x,a=t.y,s=n-this.x0,d=a-this.y0,l=d/this.a,o=s/this.a,g=1,_=0,C,I,E=0,S=0;for(e=1;e<=6;e++)C=g*l-_*o,I=_*l+g*o,g=C,_=I,E=E+this.C_re[e]*g-this.C_im[e]*_,S=S+this.C_im[e]*g+this.C_re[e]*_;for(var k=0;k<this.iterations;k++){var R=E,B=S,V,F,j=l,G=o;for(e=2;e<=6;e++)V=R*E-B*S,F=B*E+R*S,R=V,B=F,j=j+(e-1)*(this.B_re[e]*R-this.B_im[e]*B),G=G+(e-1)*(this.B_im[e]*R+this.B_re[e]*B);R=1,B=0;var Q=this.B_re[1],nt=this.B_im[1];for(e=2;e<=6;e++)V=R*E-B*S,F=B*E+R*S,R=V,B=F,Q=Q+e*(this.B_re[e]*R-this.B_im[e]*B),nt=nt+e*(this.B_im[e]*R+this.B_re[e]*B);var X=Q*Q+nt*nt;E=(j*Q+G*nt)/X,S=(G*Q-j*nt)/X}var K=E,Z=S,at=1,pt=0;for(e=1;e<=9;e++)at=at*K,pt=pt+this.D[e]*at;var rt=this.lat0+pt*uy*1e5,xt=this.long0+Z;return t.x=xt,t.y=rt,t}var SV=["New_Zealand_Map_Grid","nzmg"];const EV={init:CV,forward:IV,inverse:MV,names:SV};function TV(){}function PV(t){var e=t.x,n=t.y,a=Qn(e-this.long0),s=this.x0+this.a*a,d=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=s,t.y=d,t}function kV(t){t.x-=this.x0,t.y-=this.y0;var e=Qn(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var LV=["Miller_Cylindrical","mill"];const RV={init:TV,forward:PV,inverse:kV,names:LV};var DV=20;function OV(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=dP(this.es)}function zV(t){var e,n,a=t.x,s=t.y;if(a=Qn(a-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var d=this.n*Math.sin(s),l=DV;l;--l){var o=(this.m*s+Math.sin(s)-d)/(this.m+Math.cos(s));if(s-=o,Math.abs(o)<Hn)break}e=this.a*this.C_x*a*(this.m+Math.cos(s)),n=this.a*this.C_y*s}else{var g=Math.sin(s),_=Math.cos(s);n=this.a*Lb(s,g,_,this.en),e=this.a*a*_/Math.sqrt(1-this.es*g*g)}return t.x=e,t.y=n,t}function FV(t){var e,n,a,s;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(e))),this.m?e=Lf((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Lf(Math.sin(e)/this.n)),a=Qn(a+this.long0),e=Fg(e)):(e=fP(t.y/this.a,this.es,this.en),s=Math.abs(e),s<Pn?(s=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),a=Qn(n)):s-Hn<Pn&&(a=this.long0)),t.x=a,t.y=e,t}var BV=["Sinusoidal","sinu"];const NV={init:OV,forward:zV,inverse:FV,names:BV};function jV(){}function VV(t){for(var e=t.x,n=t.y,a=Qn(e-this.long0),s=n,d=Math.PI*Math.sin(n);;){var l=-(s+Math.sin(s)-d)/(1+Math.cos(s));if(s+=l,Math.abs(l)<Hn)break}s/=2,Math.PI/2-Math.abs(n)<Hn&&(a=0);var o=.900316316158*this.a*a*Math.cos(s)+this.x0,g=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=o,t.y=g,t}function UV(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var a=Qn(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var s=Math.asin(n);return t.x=a,t.y=s,t}var HV=["Mollweide","moll"];const $V={init:jV,forward:VV,inverse:UV,names:HV};function GV(){Math.abs(this.lat1+this.lat2)<Hn||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ev(this.es),this.e1=nv(this.es),this.e2=rv(this.es),this.e3=iv(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ch(this.e,this.sinphi,this.cosphi),this.ml1=tl(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Hn?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ch(this.e,this.sinphi,this.cosphi),this.ml2=tl(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=tl(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function ZV(t){var e=t.x,n=t.y,a;if(this.sphere)a=this.a*(this.g-n);else{var s=tl(this.e0,this.e1,this.e2,this.e3,n);a=this.a*(this.g-s)}var d=this.ns*Qn(e-this.long0),l=this.x0+a*Math.sin(d),o=this.y0+this.rh-a*Math.cos(d);return t.x=l,t.y=o,t}function WV(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,a,s;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var d=0;if(n!==0&&(d=Math.atan2(e*t.x,e*t.y)),this.sphere)return s=Qn(this.long0+d/this.ns),a=Fg(this.g-n/this.a),t.x=s,t.y=a,t;var l=this.g-n/this.a;return a=T1(l,this.e0,this.e1,this.e2,this.e3),s=Qn(this.long0+d/this.ns),t.x=s,t.y=a,t}var qV=["Equidistant_Conic","eqdc"];const KV={init:GV,forward:ZV,inverse:WV,names:qV};function YV(){this.R=this.a}function XV(t){var e=t.x,n=t.y,a=Qn(e-this.long0),s,d;Math.abs(n)<=Hn&&(s=this.x0+this.R*a,d=this.y0);var l=Lf(2*Math.abs(n/Math.PI));(Math.abs(a)<=Hn||Math.abs(Math.abs(n)-Pn)<=Hn)&&(s=this.x0,n>=0?d=this.y0+Math.PI*this.R*Math.tan(.5*l):d=this.y0+Math.PI*this.R*-Math.tan(.5*l));var o=.5*Math.abs(Math.PI/a-a/Math.PI),g=o*o,_=Math.sin(l),C=Math.cos(l),I=C/(_+C-1),E=I*I,S=I*(2/_-1),k=S*S,R=Math.PI*this.R*(o*(I-k)+Math.sqrt(g*(I-k)*(I-k)-(k+g)*(E-k)))/(k+g);a<0&&(R=-R),s=this.x0+R;var B=g+I;return R=Math.PI*this.R*(S*B-o*Math.sqrt((k+g)*(g+1)-B*B))/(k+g),n>=0?d=this.y0+R:d=this.y0-R,t.x=s,t.y=d,t}function QV(t){var e,n,a,s,d,l,o,g,_,C,I,E,S;return t.x-=this.x0,t.y-=this.y0,I=Math.PI*this.R,a=t.x/I,s=t.y/I,d=a*a+s*s,l=-Math.abs(s)*(1+d),o=l-2*s*s+a*a,g=-2*l+1+2*s*s+d*d,S=s*s/g+(2*o*o*o/g/g/g-9*l*o/g/g)/27,_=(l-o*o/3/g)/g,C=2*Math.sqrt(-_/3),I=3*S/_/C,Math.abs(I)>1&&(I>=0?I=1:I=-1),E=Math.acos(I)/3,t.y>=0?n=(-C*Math.cos(E+Math.PI/3)-o/3/g)*Math.PI:n=-(-C*Math.cos(E+Math.PI/3)-o/3/g)*Math.PI,Math.abs(a)<Hn?e=this.long0:e=Qn(this.long0+Math.PI*(d-1+Math.sqrt(1+2*(a*a-s*s)+d*d))/2/a),t.x=e,t.y=n,t}var JV=["Van_der_Grinten_I","VanDerGrinten","vandg"];const tU={init:YV,forward:XV,inverse:QV,names:JV};function eU(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function nU(t){var e=t.x,n=t.y,a=Math.sin(t.y),s=Math.cos(t.y),d=Qn(e-this.long0),l,o,g,_,C,I,E,S,k,R,B,V,F,j,G,Q,nt,X,K,Z,at,pt,rt;return this.sphere?Math.abs(this.sin_p12-1)<=Hn?(t.x=this.x0+this.a*(Pn-n)*Math.sin(d),t.y=this.y0-this.a*(Pn-n)*Math.cos(d),t):Math.abs(this.sin_p12+1)<=Hn?(t.x=this.x0+this.a*(Pn+n)*Math.sin(d),t.y=this.y0+this.a*(Pn+n)*Math.cos(d),t):(X=this.sin_p12*a+this.cos_p12*s*Math.cos(d),Q=Math.acos(X),nt=Q?Q/Math.sin(Q):1,t.x=this.x0+this.a*nt*s*Math.sin(d),t.y=this.y0+this.a*nt*(this.cos_p12*a-this.sin_p12*s*Math.cos(d)),t):(l=ev(this.es),o=nv(this.es),g=rv(this.es),_=iv(this.es),Math.abs(this.sin_p12-1)<=Hn?(C=this.a*tl(l,o,g,_,Pn),I=this.a*tl(l,o,g,_,n),t.x=this.x0+(C-I)*Math.sin(d),t.y=this.y0-(C-I)*Math.cos(d),t):Math.abs(this.sin_p12+1)<=Hn?(C=this.a*tl(l,o,g,_,Pn),I=this.a*tl(l,o,g,_,n),t.x=this.x0+(C+I)*Math.sin(d),t.y=this.y0+(C+I)*Math.cos(d),t):(E=a/s,S=Ig(this.a,this.e,this.sin_p12),k=Ig(this.a,this.e,a),R=Math.atan((1-this.es)*E+this.es*S*this.sin_p12/(k*s)),B=Math.atan2(Math.sin(d),this.cos_p12*Math.tan(R)-this.sin_p12*Math.cos(d)),B===0?K=Math.asin(this.cos_p12*Math.sin(R)-this.sin_p12*Math.cos(R)):Math.abs(Math.abs(B)-Math.PI)<=Hn?K=-Math.asin(this.cos_p12*Math.sin(R)-this.sin_p12*Math.cos(R)):K=Math.asin(Math.sin(d)*Math.cos(R)/Math.sin(B)),V=this.e*this.sin_p12/Math.sqrt(1-this.es),F=this.e*this.cos_p12*Math.cos(B)/Math.sqrt(1-this.es),j=V*F,G=F*F,Z=K*K,at=Z*K,pt=at*K,rt=pt*K,Q=S*K*(1-Z*G*(1-G)/6+at/8*j*(1-2*G)+pt/120*(G*(4-7*G)-3*V*V*(1-7*G))-rt/48*j),t.x=this.x0+Q*Math.sin(B),t.y=this.y0+Q*Math.cos(B),t))}function rU(t){t.x-=this.x0,t.y-=this.y0;var e,n,a,s,d,l,o,g,_,C,I,E,S,k,R,B,V,F,j,G,Q,nt,X,K;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*Pn*this.a?void 0:(n=e/this.a,a=Math.sin(n),s=Math.cos(n),d=this.long0,Math.abs(e)<=Hn?l=this.lat0:(l=Lf(s*this.sin_p12+t.y*a*this.cos_p12/e),o=Math.abs(this.lat0)-Pn,Math.abs(o)<=Hn?this.lat0>=0?d=Qn(this.long0+Math.atan2(t.x,-t.y)):d=Qn(this.long0-Math.atan2(-t.x,t.y)):d=Qn(this.long0+Math.atan2(t.x*a,e*this.cos_p12*s-t.y*this.sin_p12*a))),t.x=d,t.y=l,t)):(g=ev(this.es),_=nv(this.es),C=rv(this.es),I=iv(this.es),Math.abs(this.sin_p12-1)<=Hn?(E=this.a*tl(g,_,C,I,Pn),e=Math.sqrt(t.x*t.x+t.y*t.y),S=E-e,l=T1(S/this.a,g,_,C,I),d=Qn(this.long0+Math.atan2(t.x,-1*t.y)),t.x=d,t.y=l,t):Math.abs(this.sin_p12+1)<=Hn?(E=this.a*tl(g,_,C,I,Pn),e=Math.sqrt(t.x*t.x+t.y*t.y),S=e-E,l=T1(S/this.a,g,_,C,I),d=Qn(this.long0+Math.atan2(t.x,t.y)),t.x=d,t.y=l,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),B=Math.atan2(t.x,t.y),k=Ig(this.a,this.e,this.sin_p12),V=Math.cos(B),F=this.e*this.cos_p12*V,j=-F*F/(1-this.es),G=3*this.es*(1-j)*this.sin_p12*this.cos_p12*V/(1-this.es),Q=e/k,nt=Q-j*(1+j)*Math.pow(Q,3)/6-G*(1+3*j)*Math.pow(Q,4)/24,X=1-j*nt*nt/2-Q*nt*nt*nt/6,R=Math.asin(this.sin_p12*Math.cos(nt)+this.cos_p12*Math.sin(nt)*V),d=Qn(this.long0+Math.asin(Math.sin(B)*Math.sin(nt)/Math.cos(R))),K=Math.sin(R),l=Math.atan2((K-this.es*X*this.sin_p12)*Math.tan(R),K*(1-this.es)),t.x=d,t.y=l,t))}var iU=["Azimuthal_Equidistant","aeqd"];const oU={init:eU,forward:nU,inverse:rU,names:iU};function aU(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function sU(t){var e,n,a,s,d,l,o,g,_=t.x,C=t.y;return a=Qn(_-this.long0),e=Math.sin(C),n=Math.cos(C),s=Math.cos(a),l=this.sin_p14*e+this.cos_p14*n*s,d=1,(l>0||Math.abs(l)<=Hn)&&(o=this.a*d*n*Math.sin(a),g=this.y0+this.a*d*(this.cos_p14*e-this.sin_p14*n*s)),t.x=o,t.y=g,t}function lU(t){var e,n,a,s,d,l,o;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Lf(e/this.a),a=Math.sin(n),s=Math.cos(n),l=this.long0,Math.abs(e)<=Hn?(o=this.lat0,t.x=l,t.y=o,t):(o=Lf(s*this.sin_p14+t.y*a*this.cos_p14/e),d=Math.abs(this.lat0)-Pn,Math.abs(d)<=Hn?(this.lat0>=0?l=Qn(this.long0+Math.atan2(t.x,-t.y)):l=Qn(this.long0-Math.atan2(-t.x,t.y)),t.x=l,t.y=o,t):(l=Qn(this.long0+Math.atan2(t.x*a,e*this.cos_p14*s-t.y*this.sin_p14*a)),t.x=l,t.y=o,t))}var cU=["ortho"];const uU={init:aU,forward:sU,inverse:lU,names:cU};var So={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ti={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function hU(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Pn-Ei/2?this.face=So.TOP:this.lat0<=-(Pn-Ei/2)?this.face=So.BOTTOM:Math.abs(this.long0)<=Ei?this.face=So.FRONT:Math.abs(this.long0)<=Pn+Ei?this.face=this.long0>0?So.RIGHT:So.LEFT:this.face=So.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function dU(t){var e={x:0,y:0},n,a,s,d,l,o,g={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,a=t.x,this.face===So.TOP)d=Pn-n,a>=Ei&&a<=Pn+Ei?(g.value=Ti.AREA_0,s=a-Pn):a>Pn+Ei||a<=-(Pn+Ei)?(g.value=Ti.AREA_1,s=a>0?a-Qo:a+Qo):a>-(Pn+Ei)&&a<=-Ei?(g.value=Ti.AREA_2,s=a+Pn):(g.value=Ti.AREA_3,s=a);else if(this.face===So.BOTTOM)d=Pn+n,a>=Ei&&a<=Pn+Ei?(g.value=Ti.AREA_0,s=-a+Pn):a<Ei&&a>=-Ei?(g.value=Ti.AREA_1,s=-a):a<-Ei&&a>=-(Pn+Ei)?(g.value=Ti.AREA_2,s=-a-Pn):(g.value=Ti.AREA_3,s=a>0?-a+Qo:-a-Qo);else{var _,C,I,E,S,k,R;this.face===So.RIGHT?a=dg(a,+Pn):this.face===So.BACK?a=dg(a,+Qo):this.face===So.LEFT&&(a=dg(a,-Pn)),E=Math.sin(n),S=Math.cos(n),k=Math.sin(a),R=Math.cos(a),_=S*R,C=S*k,I=E,this.face===So.FRONT?(d=Math.acos(_),s=N_(d,I,C,g)):this.face===So.RIGHT?(d=Math.acos(C),s=N_(d,I,-_,g)):this.face===So.BACK?(d=Math.acos(-_),s=N_(d,I,-C,g)):this.face===So.LEFT?(d=Math.acos(-C),s=N_(d,I,_,g)):(d=s=0,g.value=Ti.AREA_0)}return o=Math.atan(12/Qo*(s+Math.acos(Math.sin(s)*Math.cos(Ei))-Pn)),l=Math.sqrt((1-Math.cos(d))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(s))))),g.value===Ti.AREA_1?o+=Pn:g.value===Ti.AREA_2?o+=Qo:g.value===Ti.AREA_3&&(o+=1.5*Qo),e.x=l*Math.cos(o),e.y=l*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function fU(t){var e={lam:0,phi:0},n,a,s,d,l,o,g,_,C,I={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,a=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?I.value=Ti.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(I.value=Ti.AREA_1,n-=Pn):t.x<0&&-t.x>=Math.abs(t.y)?(I.value=Ti.AREA_2,n=n<0?n+Qo:n-Qo):(I.value=Ti.AREA_3,n+=Pn),C=Qo/12*Math.tan(n),l=Math.sin(C)/(Math.cos(C)-1/Math.sqrt(2)),o=Math.atan(l),s=Math.cos(n),d=Math.tan(a),g=1-s*s*d*d*(1-Math.cos(Math.atan(1/Math.cos(o)))),g<-1?g=-1:g>1&&(g=1),this.face===So.TOP)_=Math.acos(g),e.phi=Pn-_,I.value===Ti.AREA_0?e.lam=o+Pn:I.value===Ti.AREA_1?e.lam=o<0?o+Qo:o-Qo:I.value===Ti.AREA_2?e.lam=o-Pn:e.lam=o;else if(this.face===So.BOTTOM)_=Math.acos(g),e.phi=_-Pn,I.value===Ti.AREA_0?e.lam=-o+Pn:I.value===Ti.AREA_1?e.lam=-o:I.value===Ti.AREA_2?e.lam=-o-Pn:e.lam=o<0?-o-Qo:-o+Qo;else{var E,S,k;E=g,C=E*E,C>=1?k=0:k=Math.sqrt(1-C)*Math.sin(o),C+=k*k,C>=1?S=0:S=Math.sqrt(1-C),I.value===Ti.AREA_1?(C=S,S=-k,k=C):I.value===Ti.AREA_2?(S=-S,k=-k):I.value===Ti.AREA_3&&(C=S,S=k,k=-C),this.face===So.RIGHT?(C=E,E=-S,S=C):this.face===So.BACK?(E=-E,S=-S):this.face===So.LEFT&&(C=E,E=S,S=-C),e.phi=Math.acos(-k)-Pn,e.lam=Math.atan2(S,E),this.face===So.RIGHT?e.lam=dg(e.lam,-Pn):this.face===So.BACK?e.lam=dg(e.lam,-Qo):this.face===So.LEFT&&(e.lam=dg(e.lam,+Pn))}if(this.es!==0){var R,B,V;R=e.phi<0?1:0,B=Math.tan(e.phi),V=this.b/Math.sqrt(B*B+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-V*V)/(this.one_minus_f*V)),R&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function N_(t,e,n,a){var s;return t<Hn?(a.value=Ti.AREA_0,s=0):(s=Math.atan2(e,n),Math.abs(s)<=Ei?a.value=Ti.AREA_0:s>Ei&&s<=Pn+Ei?(a.value=Ti.AREA_1,s-=Pn):s>Pn+Ei||s<=-(Pn+Ei)?(a.value=Ti.AREA_2,s=s>=0?s-Qo:s+Qo):(a.value=Ti.AREA_3,s+=Pn)),s}function dg(t,e){var n=t+e;return n<-Qo?n+=Ry:n>+Qo&&(n-=Ry),n}var pU=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const mU={init:hU,forward:dU,inverse:fU,names:pU};var Mw=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Q0=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],gP=.8487,yP=1.3523,vP=_h/5,gU=1/vP,Ym=18,P1=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},yU=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function vU(t,e,n,a){for(var s=e;a;--a){var d=t(s);if(s-=d,Math.abs(d)<n)break}return s}function _U(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function bU(t){var e=Qn(t.x-this.long0),n=Math.abs(t.y),a=Math.floor(n*vP);a<0?a=0:a>=Ym&&(a=Ym-1),n=_h*(n-gU*a);var s={x:P1(Mw[a],n)*e,y:P1(Q0[a],n)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*gP+this.x0,s.y=s.y*this.a*yP+this.y0,s}function xU(t){var e={x:(t.x-this.x0)/(this.a*gP),y:Math.abs(t.y-this.y0)/(this.a*yP)};if(e.y>=1)e.x/=Mw[Ym][0],e.y=t.y<0?-Pn:Pn;else{var n=Math.floor(e.y*Ym);for(n<0?n=0:n>=Ym&&(n=Ym-1);;)if(Q0[n][0]>e.y)--n;else if(Q0[n+1][0]<=e.y)++n;else break;var a=Q0[n],s=5*(e.y-a[0])/(Q0[n+1][0]-a[0]);s=vU(function(d){return(P1(a,d)-e.y)/yU(a,d)},s,Hn,100),e.x/=P1(Mw[n],s),e.y=(5*n+s)*os,t.y<0&&(e.y=-e.y)}return e.x=Qn(e.x+this.long0),e}var AU=["Robinson","robin"];const wU={init:_U,forward:bU,inverse:xU,names:AU};function CU(){this.name="geocent"}function IU(t){var e=rP(t,this.es,this.a);return e}function MU(t){var e=iP(t,this.es,this.a,this.b);return e}var SU=["Geocentric","geocentric","geocent","Geocent"];const EU={init:CU,forward:IU,inverse:MU,names:SU};var As={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},H0={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function TU(){if(Object.keys(H0).forEach((function(n){if(typeof this[n]>"u")this[n]=H0[n].def;else{if(H0[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);H0[n].num&&(this[n]=parseFloat(this[n]))}H0[n].degrees&&(this[n]=this[n]*os)}).bind(this)),Math.abs(Math.abs(this.lat0)-Pn)<Hn?this.mode=this.lat0<0?As.S_POLE:As.N_POLE:Math.abs(this.lat0)<Hn?this.mode=As.EQUIT:(this.mode=As.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function PU(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),a=Math.cos(t.x),s,d;switch(this.mode){case As.OBLIQ:d=this.sinph0*e+this.cosph0*n*a;break;case As.EQUIT:d=n*a;break;case As.S_POLE:d=-e;break;case As.N_POLE:d=e;break}switch(d=this.pn1/(this.p-d),s=d*n*Math.sin(t.x),this.mode){case As.OBLIQ:d*=this.cosph0*e-this.sinph0*n*a;break;case As.EQUIT:d*=e;break;case As.N_POLE:d*=-(n*a);break;case As.S_POLE:d*=n*a;break}var l,o;return l=d*this.cg+s*this.sg,o=1/(l*this.sw*this.h1+this.cw),s=(s*this.cg-d*this.sg)*this.cw*o,d=l*o,t.x=s*this.a,t.y=d*this.a,t}function kU(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,a,s;s=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*s,a=this.pn1*t.y*this.cw*s,t.x=n*this.cg+a*this.sg,t.y=a*this.cg-n*this.sg;var d=qc(t.x,t.y);if(Math.abs(d)<Hn)e.x=0,e.y=t.y;else{var l,o;switch(o=1-d*d*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/d+d/this.pn1),l=Math.sqrt(1-o*o),this.mode){case As.OBLIQ:e.y=Math.asin(l*this.sinph0+t.y*o*this.cosph0/d),t.y=(l-this.sinph0*Math.sin(e.y))*d,t.x*=o*this.cosph0;break;case As.EQUIT:e.y=Math.asin(t.y*o/d),t.y=l*d,t.x*=o;break;case As.N_POLE:e.y=Math.asin(l),t.y=-t.y;break;case As.S_POLE:e.y=-Math.asin(l);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var LU=["Tilted_Perspective","tpers"];const RU={init:TU,forward:PU,inverse:kU,names:LU};function DU(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function OU(t){var e=t.x,n=t.y,a,s,d,l;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var o=this.radius_p/qc(this.radius_p*Math.cos(n),Math.sin(n));if(s=o*Math.cos(e)*Math.cos(n),d=o*Math.sin(e)*Math.cos(n),l=o*Math.sin(n),(this.radius_g-s)*s-d*d-l*l*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(d/qc(l,a)),t.y=this.radius_g_1*Math.atan(l/a)):(t.x=this.radius_g_1*Math.atan(d/a),t.y=this.radius_g_1*Math.atan(l/qc(d,a)))}else this.shape==="sphere"&&(a=Math.cos(n),s=Math.cos(e)*a,d=Math.sin(e)*a,l=Math.sin(n),a=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(d/qc(l,a)),t.y=this.radius_g_1*Math.atan(l/a)):(t.x=this.radius_g_1*Math.atan(d/a),t.y=this.radius_g_1*Math.atan(l/qc(d,a))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function zU(t){var e=-1,n=0,a=0,s,d,l,o;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*qc(1,a)):(n=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*qc(1,n));var g=a/this.radius_p;if(s=n*n+g*g+e*e,d=2*this.radius_g*e,l=d*d-4*s*this.C,l<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-d-Math.sqrt(l))/(2*s),e=this.radius_g+o*e,n*=o,a*=o,t.x=Math.atan2(n,e),t.y=Math.atan(a*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(n=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),s=n*n+a*a+e*e,d=2*this.radius_g*e,l=d*d-4*s*this.C,l<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-d-Math.sqrt(l))/(2*s),e=this.radius_g+o*e,n*=o,a*=o,t.x=Math.atan2(n,e),t.y=Math.atan(a*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var FU=["Geostationary Satellite View","Geostationary_Satellite","geos"];const BU={init:DU,forward:OU,inverse:zU,names:FU};var hy=1.340264,dy=-.081106,fy=893e-6,py=.003796,k1=Math.sqrt(3)/2;function NU(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function jU(t){var e=Qn(t.x-this.long0),n=t.y,a=Math.asin(k1*Math.sin(n)),s=a*a,d=s*s*s;return t.x=e*Math.cos(a)/(k1*(hy+3*dy*s+d*(7*fy+9*py*s))),t.y=a*(hy+dy*s+d*(fy+py*s)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function VU(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,a=t.y,s,d,l,o,g,_;for(_=0;_<n&&(s=a*a,d=s*s*s,l=a*(hy+dy*s+d*(fy+py*s))-t.y,o=hy+3*dy*s+d*(7*fy+9*py*s),a-=g=l/o,!(Math.abs(g)<e));++_);return s=a*a,d=s*s*s,t.x=k1*t.x*(hy+3*dy*s+d*(7*fy+9*py*s))/Math.cos(a),t.y=Math.asin(Math.sin(a)/k1),t.x=Qn(t.x+this.long0),t}var UU=["eqearth","Equal Earth","Equal_Earth"];const HU={init:NU,forward:jU,inverse:VU,names:UU};function $U(t){t.Proj.projections.add(J_),t.Proj.projections.add(t1),t.Proj.projections.add(G7),t.Proj.projections.add(ej),t.Proj.projections.add(sj),t.Proj.projections.add(dj),t.Proj.projections.add(vj),t.Proj.projections.add(wj),t.Proj.projections.add(Ej),t.Proj.projections.add(Rj),t.Proj.projections.add(Yj),t.Proj.projections.add(nV),t.Proj.projections.add(sV),t.Proj.projections.add(fV),t.Proj.projections.add(vV),t.Proj.projections.add(wV),t.Proj.projections.add(EV),t.Proj.projections.add(RV),t.Proj.projections.add(NV),t.Proj.projections.add($V),t.Proj.projections.add(KV),t.Proj.projections.add(tU),t.Proj.projections.add(oU),t.Proj.projections.add(uU),t.Proj.projections.add(mU),t.Proj.projections.add(wU),t.Proj.projections.add(EU),t.Proj.projections.add(RU),t.Proj.projections.add(BU),t.Proj.projections.add(HU)}yc.defaultDatum="WGS84";yc.Proj=bh;yc.WGS84=new yc.Proj("WGS84");yc.Point=Cg;yc.toPoint=oP;yc.defs=Qs;yc.nadgrid=W9;yc.transform=E1;yc.mgrs=c7;yc.version="__VERSION__";$U(yc);function _P(t){function e({longitude:n,latitude:a},s=!1){const d=KT(t)||{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"};return Sw({longitude:n,latitude:a},d,s)}return{format:e}}function Sw({longitude:t,latitude:e},n,a=!1){const s={longitude:"0",latitude:"0"};return!t||!e||(n&&!n.default&&n.proj4js&&([t,e]=yc(n.proj4js,[t,e])),n&&n.unit==="meter"?(s.longitude=t.toFixed(0),s.latitude=e.toFixed(0)):a?(s.longitude=ZU(+t),s.latitude=GU(+e)):(s.longitude=t.toFixed(6),s.latitude=e.toFixed(6))),s}const GU=t=>`${B2(t)} ${N2(t)}' ${parseFloat(bP(t).toFixed(2))}" ${t>0?"N":"S"}`,ZU=t=>`${B2(t)} ${N2(t)}' ${parseFloat(bP(t).toFixed(2))}" ${t>0?"E":"W"}`,B2=t=>t===0?0:Math.floor(Math.abs(t)),N2=t=>t===0?0:Math.floor((Math.abs(t)-Math.floor(Math.abs(t)))*60),bP=t=>t===0?0:(Math.abs(t)-B2(t)-N2(t)/60)*3600;function L1(t,e,n=!1){const{add:a,remove:s,isActive:d}=R1(t,e);return Kp(()=>{s()}),n&&go(()=>{a()}),{add:a,remove:s,isActive:d}}function R1(t,e){const n=()=>{jN(t,e)},a=()=>{VN(t,e)},s=_n(()=>{const d=UN(t,e.event_map_type);return d&&d.id===e.id});return{add:n,remove:a,isActive:s}}let WU=class{get id(){return this._id}constructor(){this._id=`${ju()}`}},j2=class extends WU{constructor(e,n="map"){super(),this.event_map_type=e,this.type_select=n,this.options={}}setHandler(e){return this.handler=e,this}addToMap(e){return this.handler&&e.on(this.event_map_type,this.handler),this}removeFromMap(e){return this.handler&&e.off(this.event_map_type,this.handler),this}};class qU extends j2{constructor(){super("click","map"),this._originalHandlers={},this.setClassPointer("pointer")}setClassPointer(e){this.options.classPointer=e}setHandler(e){return this.handler=e,this}addToMap(e){if(!this.handler)return this;this.options.classPointer&&e.getCanvas().classList.add(this.options.classPointer);try{this._originalHandlers={scrollZoom:e.scrollZoom.isEnabled(),dragRotate:e.dragRotate.isEnabled(),touchZoomRotate:e.touchZoomRotate.isEnabled(),doubleClickZoom:e.doubleClickZoom.isEnabled(),dragPan:e.dragPan.isEnabled(),boxZoom:e.boxZoom.isEnabled()},e.scrollZoom.isEnabled()&&e.scrollZoom.disable(),e.dragRotate.isEnabled()&&e.dragRotate.disable(),e.touchZoomRotate.isEnabled()&&e.touchZoomRotate.disable(),e.doubleClickZoom.isEnabled()&&e.doubleClickZoom.disable(),e.dragPan.isEnabled()&&e.dragPan.disable(),e.boxZoom.isEnabled()&&e.boxZoom.disable(),this.map_ranger=KU(e.getCanvasContainer(),this.handler)}catch(n){console.error("Error disabling map controls:",n)}return this}removeFromMap(e){this.options.classPointer&&e.getCanvas().classList.remove(this.options.classPointer);try{this._originalHandlers.scrollZoom!==!1&&e.scrollZoom.enable(),this._originalHandlers.dragRotate!==!1&&e.dragRotate.enable(),this._originalHandlers.touchZoomRotate!==!1&&e.touchZoomRotate.enable(),this._originalHandlers.doubleClickZoom!==!1&&e.doubleClickZoom.enable(),this._originalHandlers.dragPan!==!1&&e.dragPan.enable(),this._originalHandlers.boxZoom!==!1&&e.boxZoom.enable()}catch(n){console.error("Error re-enabling map controls:",n)}return this.map_ranger&&(this.map_ranger.destroy(),this.map_ranger=void 0),this}}function KU(t,e){let n,a,s;function d(E){const S=t.getBoundingClientRect();return{x:E.clientX-S.left-t.clientLeft,y:E.clientY-S.top-t.clientTop}}function l(E){E.preventDefault(),E.stopPropagation(),n=d(E),document.addEventListener("mousemove",o),document.addEventListener("mouseup",g),document.addEventListener("keydown",_)}function o(E){E.preventDefault(),E.stopPropagation(),a=d(E),s||(s=document.createElement("div"),s.classList.add("boxdraw"),t.appendChild(s));const S=Math.min(n.x,a.x),k=Math.max(n.x,a.x),R=Math.min(n.y,a.y),B=Math.max(n.y,a.y);s.style.transform=`translate(${S}px, ${R}px)`,s.style.width=k-S+"px",s.style.height=B-R+"px"}function g(E){E.preventDefault(),E.stopPropagation(),C([n,d(E)])}function _(E){E.keyCode===27&&C()}function C(E){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",g),document.removeEventListener("keydown",_),s&&(s.parentNode&&s.parentNode.removeChild(s),s=void 0),E&&e&&e(E)}function I(){t.removeEventListener("mousedown",l,!0),e=void 0,C()}return t.addEventListener("mousedown",l,!0),t.style.cursor="crosshair",{destroy:I}}class ov extends j2{constructor(e="map"){super("click",e),this.setClassPointer("pointer")}setClassPointer(e){this.options.classPointer=e}addToMap(e){return this.options.classPointer&&e.getCanvas().classList.add(this.options.classPointer),this.handler&&(e.on("click",this.handler),e.on("touchstart",this.handler)),this}removeFromMap(e){return this.options.classPointer&&e.getCanvas().classList.remove(this.options.classPointer),this.handler&&(e.off("click",this.handler),e.off("touchstart",this.handler)),this}}class YU extends j2{constructor(e="map"){super("mousemove",e),this.setClassPointer("pointer")}setClassPointer(e){this.options.classPointer=e}addToMap(e){return this.options.classPointer&&e.getCanvas().classList.add(this.options.classPointer),this.handler&&e.on("mousemove",this.handler),this}removeFromMap(e){return this.options.classPointer&&e.getCanvas().classList.remove(this.options.classPointer),this.handler&&e.off("mousemove",this.handler),this}}const vA={};function XU(t){const e=Wp({}),n=g=>{if(!g)return;const _=g.listImages(),C={};_.forEach(I=>{const E=g.getImage(I);E&&(C[I]=E)}),e.value=C};let a;const s=g=>{g&&(a=()=>n(g),g.on("styledata",a),g.on("idle",a))},d=g=>{g&&a&&(g.off("styledata",a),g.off("idle",a))};go(()=>{Yc(t,g=>{n(g),s(g)})}),Kp(()=>{Yc(t,g=>{d(g)})});const l=()=>{Yc(t,g=>{n(g),s(g)})};function o(g,_){if(vA[g])return vA[g];const C=_.data,I=QU(C),E=document.createElement("canvas"),S=E.getContext("2d");E.width=C.width,E.height=C.height,S.putImageData(I,0,0);const k=E.toDataURL("image/png");return vA[g]=k,k}return{images:e,reload:l,toDataURL:o}}function QU(t){const{width:e,height:n,data:a}=t,s=new Uint8ClampedArray(a);return new ImageData(s,e,n)}async function JU(t,e,n,a={}){const s=await t.loadImage(n);return t.hasImage(e)||t.addImage(e,s.data,a),!0}const V2="image";function xP(t){Vu(t,V2,ls({images:{}}))}_d(V2,xP);async function tH(t,e,n,a={}){const s=Vo(t,V2);return s.images[e]={path:n,id:e,name:e,is_sprite:!1,category:"custom"},Af.getMap(t,async l=>JU(l,e,n,a))}const eH=Object.freeze(Object.defineProperty({__proto__:null,addImage:tH,initMapImage:xP},Symbol.toStringTag,{value:"Module"})),nH={class:"crs-container"},rH={class:"grow"},iH={class:"crs-item-header"},oH={class:"crs-item-header__title"},aH={class:"crs-item-header__action"},sH=["onClick"],lH={class:"crs-item"},cH={key:0},uH={key:1},hH={class:"crs-item__add"},dH=nr({__name:"CrsControl",props:{...vo},setup(t){const{getCrsItems:e,setCrsItems:n}=L2,a=t,{mapId:s,moduleContainerProps:d}=bi(a),{trans:l,setLocaleDefault:o}=To(s.value);o({map:{"crs-control":{title:"Crs setting",field:{name:"name",unit:"unit",epsg:"epsg",proj4js:"proj4js"}}}});const[g,_]=Pf(!1);function C(){_(!g.value)}const I=_n(()=>e(s.value)),E=[{text:"degree",value:"degree"},{text:"meter",value:"meter"}],S={delete:Bf,plus:vd},k=B=>{n(s.value,I.value.filter(V=>V.epsg!==B.epsg))},R=()=>{I.value.push({name:"",unit:"degree",epsg:""})};return(B,V)=>(Mt(),Je(Uo,Eo(yo(ut(d))),{btn:Ie(()=>[ee(ui,{onClick:_i(C,["stop"]),tooltip:ut(l)("map.crs-control.title")},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:ut(IO)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Ie(F=>[ut(g)?(Mt(),Je(ut(bd),Tr({key:0,height:200,width:400},F,{show:ut(g),"onUpdate:show":V[1]||(V[1]=j=>mo(g)?g.value=j:null),title:ut(l)("map.crs-control.title")}),{default:Ie(()=>[Nt("div",nH,[Nt("div",rH,[(Mt(!0),pe(mr,null,ki(I.value,j=>(Mt(),Je(ut(vw),{key:j.epsg,selected:!1},{header:Ie(()=>[Nt("div",iH,[Nt("div",oH,Rn(j.name),1),Nt("div",aH,[j.default?wn("",!0):(Mt(),pe("button",{key:0,class:"clickable",onClick:_i(G=>k(j),["stop"])},[ee(ut(Zn),{size:"16",type:"mdi",path:S.delete},null,8,["path"])],8,sH))])])]),default:Ie(()=>[Nt("div",lH,[Nt("div",null,[ee(ut(Pi),{readonly:j.default,modelValue:j.name,"onUpdate:modelValue":G=>j.name=G,label:ut(l)("map.crs-control.field.name")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),Nt("div",null,[ee(ut(Pi),{readonly:j.default,modelValue:j.epsg,"onUpdate:modelValue":G=>j.epsg=G,label:ut(l)("map.crs-control.field.epsg")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),j.default?wn("",!0):(Mt(),pe("div",cH,[ee(ut(Pi),{modelValue:j.proj4js,"onUpdate:modelValue":G=>j.proj4js=G,label:ut(l)("map.crs-control.field.proj4js")},null,8,["modelValue","onUpdate:modelValue","label"])])),j.default?wn("",!0):(Mt(),pe("div",uH,[ee(ut(Tf),{modelValue:j.unit,"onUpdate:modelValue":G=>j.unit=G,label:ut(l)("map.crs-control.field.unit"),items:E},null,8,["modelValue","onUpdate:modelValue","label"])]))])]),_:2},1024))),128))]),Nt("div",hH,[Nt("button",{class:"layer-item__button clickable",onClick:V[0]||(V[0]=_i(j=>R(),["stop"]))},[ee(ut(Zn),{size:"16",type:"mdi",path:S.plus},null,8,["path"])])])])]),_:2},1040,["show","title"])):wn("",!0)]),default:Ie(()=>[Wn(B.$slots,"default",{},void 0,!0)]),_:3},16))}}),fH=Vn(dH,[["__scopeId","data-v-58016c9c"]]),pH=nr({__name:"FullScreenControl",props:{...vo,type:{type:String,default:"body"}},setup(t){const e={fullscreen:xO,exitFullscreen:AO},n=t,{callMap:a,mapId:s,moduleContainerProps:d}=bi(n),{trans:l,setLocaleDefault:o}=To(s.value);o({map:{action:{"fullscreen-control-enter":"Enter fullscreen","fullscreen-control-exit":"Exit fullscreen"}}});const{isFullscreen:g,enter:_,exit:C,toggle:I}=tD(n.type=="body"?document.querySelector("body"):E());function E(S){return a(k=>{if(S||(S=k.getContainer()),S.classList.contains("map-container")||S.tagName==="BODY")return S;S=E(S.parentElement)}),S}return(S,k)=>(Mt(),Je(Uo,Eo(yo(ut(d))),{btn:Ie(()=>[ee(ui,{icon:"",title:ut(g)?ut(l)("map.action.fullscreen-control-exit"):ut(l)("map.action.fullscreen-control-enter"),onClick:k[0]||(k[0]=R=>ut(I)())},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:ut(g)?e.exitFullscreen:e.fullscreen},null,8,["path"])]),_:1},8,["title"])]),default:Ie(()=>[Wn(S.$slots,"default")]),_:3},16))}}),mH=nr({__name:"GeoLocateControl",props:{...vo},setup(t){const{coords:e,error:n,resume:a,pause:s}=eD({immediate:!1}),d=t,{mapId:l,callMap:o,moduleContainerProps:g}=bi(d),{trans:_,setLocaleDefault:C}=To(l.value);C({map:{action:{"geolocate-control-find-my-location":"Find my location","geolocate-control-location-not-available":"Location not available"}}});const I=mn(!1),E=mn(),S=mn(0);let k,R,B=mn(void 0),V=mn(void 0);const F=_n(()=>n.value?mO:Rg),j=_n(()=>n.value?n.value.message||_.value("map.action.geolocate-control-location-not-available"):_.value("map.action.geolocate-control-find-my-location"));jo(e,pt=>{pt.longitude==Number.POSITIVE_INFINITY||pt.latitude==Number.POSITIVE_INFINITY||(E.value=[pt.longitude,pt.latitude],nt(),S.value=pt.accuracy)});async function G(){o(pt=>{if(!I.value){I.value=!0,a(),El(()=>{E.value&&pt.flyTo({center:pd(E),zoom:14})});return}if(at(pt,pd(e))){pt.flyTo({center:E.value,zoom:14});return}s(),I.value=!1,E.value=void 0,Q()})}W6(()=>{Q()});function Q(){o(pt=>{pt.off("zoom",K)}),B.value&&B.value.remove(),V.value&&V.value.remove()}K6(()=>{k||(k=Z("div","mapboxgl-user-location"),k.classList.add("mapboxgl-user-location"),k.appendChild(Z("div","mapboxgl-user-location-dot")),k.appendChild(Z("div","mapboxgl-user-location-heading"))),R||(R=Z("div","mapboxgl-user-location-accuracy-circle"))});function nt(){B.value=new wg.Marker({element:k,rotationAlignment:"map",pitchAlignment:"map"}),V.value=new wg.Marker({element:R,pitchAlignment:"map"}),o(pt=>{pt.on("zoom",K),E.value&&(B.value&&B.value.setLngLat(E.value).addTo(pt),V.value&&V.value.setLngLat(E.value).addTo(pt)),X(pt)})}function X(pt){const rt=pt.getContainer().getBoundingClientRect().height/2,xt=pt.unproject([0,rt]),q=pt.unproject([100,rt]),zt=xt.distanceTo(q)/100,Rt=Math.ceil(2*S.value/zt);R.style.width=`${Rt}px`,R.style.height=`${Rt}px`}function K(pt){X(pt.target)}const Z=function(pt,rt,xt){const q=window.document.createElement(pt);return rt!==void 0&&(q.className=rt),q};function at(pt,rt){const xt=pt.getBounds();return xt&&(rt.longitude<xt.getWest()||rt.longitude>xt.getEast()||rt.latitude<xt.getSouth()||rt.latitude>xt.getNorth())}return(pt,rt)=>(Mt(),Je(Uo,Eo(yo(ut(g))),{btn:Ie(()=>[ee(ui,{disabled:!!ut(n),icon:F.value,tooltip:j.value,active:I.value,onClick:_i(G,["stop"])},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:F.value},null,8,["path"])]),_:1},8,["disabled","icon","tooltip","active"])]),default:Ie(()=>[Wn(pt.$slots,"default")]),_:3},16))}}),gH={class:"setting-container"},yH={class:"setting-field-container"},vH={class:"setting-center-container"},_H={__name:"GotoControl",props:{...vo},setup(t){const e=t,[n,a]=Pf(!1),{callMap:s,mapId:d,moduleContainerProps:l}=bi(e),{trans:o,setLocaleDefault:g}=To(d.value);g({map:{"goto-control":{title:"Go to",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Go to"}}}});function _(){a(!n.value),n.value&&s(E=>{C.value.zoom=E.getZoom(),C.value.center=[E.getCenter().lng.toFixed(6),E.getCenter().lat.toFixed(6)],C.value.sprite=E.getStyle().sprite,C.value.glyphs=E.getStyle().glyphs})}const C=mn({zoom:null,center:null,sprite:null,glyphs:null}),I=()=>{s(E=>{C.value.zoom&&E.setZoom(C.value.zoom),C.value.center&&E.setCenter(C.value.center)})};return(E,S)=>(Mt(),Je(Uo,Eo(yo(ut(l))),{btn:Ie(()=>[ee(ui,{onClick:S[0]||(S[0]=_i(k=>_(),["stop"])),tooltip:ut(o)("map.goto-control.title")},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:ut(M2)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Ie(k=>[ut(n)?(Mt(),Je(ut(bd),Tr({key:0,height:300,width:400},k,{show:ut(n),"onUpdate:show":S[5]||(S[5]=R=>mo(n)?n.value=R:null),title:ut(o)("map.goto-control.title")}),{default:Ie(()=>[Nt("div",gH,[Nt("div",yH,[Nt("div",null,[Nt("label",null,Rn(ut(o)("map.goto-control.field.center")),1),Nt("div",vH,[ee(ut(Pi),{modelValue:C.value.center[0],"onUpdate:modelValue":S[1]||(S[1]=R=>C.value.center[0]=R),type:"number",step:"0.0000001"},null,8,["modelValue"]),ee(ut(Pi),{modelValue:C.value.center[1],"onUpdate:modelValue":S[2]||(S[2]=R=>C.value.center[1]=R),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),Nt("div",null,[ee(ut(Pi),{label:ut(o)("map.goto-control.field.zoom"),modelValue:C.value.zoom,"onUpdate:modelValue":S[3]||(S[3]=R=>C.value.zoom=R),type:"number",min:"0",max:"24"},null,8,["label","modelValue"])])]),ee(ut(Cl),{class:"btn-container",onClick:S[4]||(S[4]=R=>I())},{default:Ie(()=>[fo(Rn(ut(o)("map.goto-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):wn("",!0)]),default:Ie(()=>[Wn(E.$slots,"default")]),_:3},16))}},bH=nr({__name:"HomeControl",props:{...vo,zoom:Number,center:Array},setup(t){const e=t,n=mn({lat:0,lng:0}),a=mn(e.zoom||0),{callMap:s,mapId:d,moduleContainerProps:l}=bi(e,C),{trans:o,setLocaleDefault:g}=To(d.value);g({map:{home:{title:"Default view"}}});function _(){s(I=>{I.setZoom(a.value),I.setCenter(n.value)})}function C(I){e.zoom!=null?a.value=e.zoom:a.value=I.getZoom(),e.center!=null?(n.value.lat=e.center[1],n.value.lng=e.center[0]):n.value=I.getCenter()}return(I,E)=>(Mt(),Je(Uo,Eo(yo(ut(l))),{btn:Ie(()=>[ee(ui,{onClick:_,tooltip:ut(o)("map.home.title")},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:ut(CO)},null,8,["path"])]),_:1},8,["tooltip"])]),default:Ie(()=>[Wn(I.$slots,"default")]),_:3},16))}}),xH={class:"button-container mouse-coordinates-container"},AH={key:0,class:"mouse-coordinates-part zoom-part"},wH={class:"mouse-coordinates-zoom"},CH={title:"Current Zoom",class:"icon"},IH={style:{"margin-left":"4px"}},MH={key:1,class:"mouse-coordinates-part coordinates-part"},SH={class:"mouse-coordinates-point"},EH=["innerHTML"],TH=["title"],PH={key:2,class:"mouse-coordinates-part crs-part"},kH={class:"mouse-coordinates-point"},LH=["value"],RH={key:3,class:"mouse-coordinates-part scale-part"},DH=nr({__name:"MouseCoordinatesControl",props:{...vo,hideZoom:Boolean,hideCrsSelect:Boolean,hideScale:Boolean,hideCoordinates:Boolean},setup(t){const{getCrsItems:e,setCrs:n,getCrs:a,getCrsItem:s}=L2,d=t,l={icon:M2,zoom:SO,change:hO},o=mn(),g=mn(""),_=mn({latitude:0,longitude:0}),C=mn(0),I=mn(!1),{callMap:E,mapId:S,moduleContainerProps:k}=bi(d,Q,nt),{format:R}=_P(S.value),B=_n(()=>e(S.value)),V=mn(a(S.value)),F=mn(s(S.value)),j=_n({get(){return V.value},set(Rt){return V.value=Rt,F.value=B.value.find(Bt=>Bt.epsg==Rt),n(S.value,Rt)}}),G=_n(()=>{var Rt;return((Rt=F.value)==null?void 0:Rt.unit)==="degree"});function Q(Rt){C.value=+Rt.getZoom().toFixed(2),Rt.on("zoomend",pt),Rt.on("mousemove",K),Rt.on("move",X),C.value=+Rt.getZoom().toFixed(2);let Bt=Rt.getCenter();_.value.latitude=Bt.lat,_.value.longitude=Bt.lng,at(),El(()=>{rt(Rt,o.value)})}function nt(Rt){Rt.off("zoomend",pt),Rt.off("mousemove",K),Rt.off("move",X)}function X(){E(Rt=>{rt(Rt,o.value)})}const K=zg.debounce(function(Rt){let Bt=[Rt.lngLat.lng,Rt.lngLat.lat];_.value.latitude=Bt[1],_.value.longitude=Bt[0],at()},15);function Z(){I.value=!I.value,at()}function at(){const Rt=R(_.value,I.value);g.value=Rt.longitude+", &nbsp;"+Rt.latitude}function pt(){E(Rt=>{C.value=+Rt.getZoom().toFixed(2)})}function rt(Rt,Bt){if(d.hideScale)return;const Xt=100,ge=Rt.getContainer().clientHeight/2,en=Rt.unproject([0,ge]),te=Rt.unproject([Xt,ge]),Gt=en.distanceTo(te);Gt>=1e3?xt(Bt,Gt/1e3,"km"):xt(Bt,Gt,"m")}function xt(Rt,Bt,Xt){const ge=zt(Bt);Rt&&(Rt.innerHTML=`${ge}&nbsp;${Xt}`)}function q(Rt){const Bt=Math.pow(10,Math.ceil(-Math.log(Rt)/Math.LN10));return Math.round(Rt*Bt)/Bt}function zt(Rt){const Bt=Math.pow(10,`${Math.floor(Rt)}`.length-1);let Xt=Rt/Bt;return Xt=Xt>=10?10:Xt>=5?5:Xt>=3?3:Xt>=2?2:Xt>=1?1:q(Xt),Bt*Xt}return(Rt,Bt)=>(Mt(),Je(Uo,Eo(yo(ut(k))),{btn:Ie(()=>[Nt("div",xH,[t.hideZoom?wn("",!0):(Mt(),pe("div",AH,[Nt("div",wH,[Nt("span",CH,[ee(ut(Zn),{size:16,type:"mdi",path:l.zoom},null,8,["path"])]),Nt("div",IH,Rn(C.value),1)])])),t.hideCoordinates?wn("",!0):(Mt(),pe("div",MH,[Nt("div",SH,[Nt("div",{style:fi([{"margin-left":"4px"},{"min-width":I.value?"220px":"100px"}]),class:"selectable",innerHTML:g.value},null,12,EH),G.value?(Mt(),pe("i",{key:0,title:I.value?"DMS <=> Latitude, Longitude":"Latitude, Longitude <=> DMS",style:{"margin-left":"4px"},onClick:Z,class:"icon icon-clickable"},[ee(ut(Zn),{size:16,type:"mdi",path:l.change},null,8,["path"])],8,TH)):wn("",!0)])])),t.hideCrsSelect?wn("",!0):(Mt(),pe("div",PH,[Nt("div",kH,[gc(Nt("select",{"onUpdate:modelValue":Bt[0]||(Bt[0]=Xt=>j.value=Xt),class:"crs-select",style:{width:"70px"}},[(Mt(!0),pe(mr,null,ki(B.value,Xt=>(Mt(),pe("option",{value:Xt.epsg,key:Xt.epsg},Rn(Xt.name||Xt.epsg),9,LH))),128))],512),[[ab,j.value]])])])),t.hideScale?wn("",!0):(Mt(),pe("div",RH,[Nt("div",{ref_key:"scale",ref:o,class:"scale-custom"},null,512)]))])]),_:1},16))}}),OH=Vn(DH,[["__scopeId","data-v-2471b70e"]]),zH={class:"setting-container"},FH={class:"setting-field-container"},BH={class:"setting-center-container"},NH={__name:"SettingControl",props:{...vo},setup(t){const e=t,[n,a]=Pf(!1),{callMap:s,mapId:d,moduleContainerProps:l}=bi(e),{trans:o,setLocaleDefault:g}=To(d.value);g({map:{"setting-control":{title:"Setting",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Apply"}}}});function _(){a(!n.value),n.value&&s(E=>{C.value.zoom=E.getZoom(),C.value.center=[E.getCenter().lng.toFixed(6),E.getCenter().lat.toFixed(6)],C.value.sprite=E.getStyle().sprite,C.value.glyphs=E.getStyle().glyphs})}const C=mn({zoom:null,center:null,sprite:null,glyphs:null}),I=()=>{s(E=>{C.value.zoom&&E.setZoom(C.value.zoom),C.value.center&&E.setCenter(C.value.center);const S=E.getStyle();C.value.sprite&&(S.sprite=C.value.sprite),C.value.glyphs&&(S.glyphs=C.value.glyphs),E.setStyle(S)})};return(E,S)=>(Mt(),Je(Uo,Eo(yo(ut(l))),{btn:Ie(()=>[ee(ui,{onClick:S[0]||(S[0]=_i(k=>_(),["stop"])),tooltip:ut(o)("map.setting-control.title")},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:ut(dO)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:Ie(k=>[ut(n)?(Mt(),Je(ut(bd),Tr({key:0,height:400,width:400},k,{show:ut(n),"onUpdate:show":S[7]||(S[7]=R=>mo(n)?n.value=R:null),title:ut(o)("map.setting-control.title")}),{default:Ie(()=>[Nt("div",zH,[Nt("div",FH,[Nt("div",null,[Nt("label",null,Rn(ut(o)("map.setting-control.field.center")),1),Nt("div",BH,[ee(ut(Pi),{modelValue:C.value.center[0],"onUpdate:modelValue":S[1]||(S[1]=R=>C.value.center[0]=R),type:"number",step:"0.0000001"},null,8,["modelValue"]),ee(ut(Pi),{modelValue:C.value.center[1],"onUpdate:modelValue":S[2]||(S[2]=R=>C.value.center[1]=R),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),Nt("div",null,[ee(ut(Pi),{label:ut(o)("map.setting-control.field.zoom"),modelValue:C.value.zoom,"onUpdate:modelValue":S[3]||(S[3]=R=>C.value.zoom=R)},null,8,["label","modelValue"])]),Nt("div",null,[ee(ut(Pi),{label:ut(o)("map.setting-control.field.sprite"),modelValue:C.value.sprite,"onUpdate:modelValue":S[4]||(S[4]=R=>C.value.sprite=R)},null,8,["label","modelValue"])]),Nt("div",null,[ee(ut(Pi),{label:ut(o)("map.setting-control.field.glyphs"),modelValue:C.value.glyphs,"onUpdate:modelValue":S[5]||(S[5]=R=>C.value.glyphs=R)},null,8,["label","modelValue"])])]),ee(ut(Cl),{class:"btn-container",onClick:S[6]||(S[6]=R=>I())},{default:Ie(()=>[fo(Rn(ut(o)("map.setting-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):wn("",!0)]),default:Ie(()=>[Wn(E.$slots,"default")]),_:3},16))}},jH=Nt("g",{fill:"none","fill-rule":"evenodd"},[Nt("path",{d:"M0 0h24v24H0z"}),Nt("path",{d:"M12 3l4 8H8z",fill:"#f44336"}),Nt("path",{d:"M12 21l-4-8h8z",fill:"#9E9E9E"})],-1),VH=[jH],UH={__name:"ZoomControl",props:{...vo,showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0}},setup(t){const e={plus:vd,minus:LO},n=t,a=mn("rotate(0deg)"),{callMap:s,mapId:d,moduleContainerProps:l}=bi(n,C,I),{trans:o,setLocaleDefault:g}=To(d.value);g({map:{action:{"navigation-control-zoom-in":"Zoom in","navigation-control-zoom-out":"Zoom out","navigation-control-reset-bearing":"Reset bearing to north"}}});let _=null;function C(B){_=R.bind(null,B),B.on("rotate",_)}function I(B){B.off("rotate",_)}function E(B){s(V=>{V.zoomIn({},{originalEvent:B})})}function S(B){s(V=>{V.zoomOut({},{originalEvent:B})})}function k(){s(B=>{B.easeTo({bearing:0,pitch:0})})}function R(B){const V=B.getBearing()*-1;a.value=`rotate(${V}deg)`}return(B,V)=>(Mt(),Je(Uo,Eo(yo(ut(l))),{btn:Ie(()=>[ee(Ag,null,{default:Ie(()=>[t.showCompass?(Mt(),Je(ui,{key:0,onClick:k,title:ut(o)("map.action.navigation-control-reset-bearing")},{default:Ie(()=>[(Mt(),pe("svg",{height:"22",style:fi({transform:a.value}),viewBox:"0 0 24 24",width:"22",xmlns:"http://www.w3.org/2000/svg"},VH,4))]),_:1},8,["title"])):wn("",!0),t.showZoom?(Mt(),Je(ui,{key:1,onClick:E,title:ut(o)("map.action.navigation-control-zoom-in")},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:e.plus},null,8,["path"])]),_:1},8,["title"])):wn("",!0),t.showZoom?(Mt(),Je(ui,{key:2,onClick:S,title:ut(o)("map.action.navigation-control-zoom-out")},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:e.minus},null,8,["path"])]),_:1},8,["title"])):wn("",!0)]),_:1})]),default:Ie(()=>[Wn(B.$slots,"default")]),_:3},16))}};function e1(){const t=Math.floor(Math.random()*bM.length);return bM[t]}const bM=["#0E9F6E","#84A2AE","#BAC9CF","#D7E3E8","#EBF1F3","#da251d","#ffbd99","#ffa07f","#ff8365","#ff664c","#fb4834","#b90004","#9a0000","#7c0000","#600000","#25CCF7","#FD7272","#54a0ff","#00d2d3","#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d","#55efc4","#81ecec","#74b9ff","#a29bfe","#dfe6e9","#00b894","#00cec9","#0984e3","#6c5ce7","#ffeaa7","#fab1a0","#ff7675","#fd79a8","#fdcb6e","#e17055","#d63031","#feca57","#5f27cd","#54a0ff","#01a3a4"];var xs=63710088e-1,U2={centimeters:xs*100,centimetres:xs*100,degrees:xs/111325,feet:xs*3.28084,inches:xs*39.37,kilometers:xs/1e3,kilometres:xs/1e3,meters:xs,metres:xs,miles:xs/1609.344,millimeters:xs*1e3,millimetres:xs*1e3,nauticalmiles:xs/1852,radians:1,yards:xs*1.0936},HH={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/xs,yards:1.0936133},Ew={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Xc(t,e,n){n===void 0&&(n={});var a={type:"Feature"};return(n.id===0||n.id)&&(a.id=n.id),n.bbox&&(a.bbox=n.bbox),a.properties=e||{},a.geometry=t,a}function $H(t,e,n){switch(t){case"Point":return Aa(e).geometry;case"LineString":return as(e).geometry;case"Polygon":return Bg(e).geometry;case"MultiPoint":return AP(e).geometry;case"MultiLineString":return H2(e).geometry;case"MultiPolygon":return wP(e).geometry;default:throw new Error(t+" is invalid")}}function Aa(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!D1(t[0])||!D1(t[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:t};return Xc(a,e,n)}function GH(t,e,n){return n===void 0&&(n={}),Rf(t.map(function(a){return Aa(a,e)}),n)}function Bg(t,e,n){n===void 0&&(n={});for(var a=0,s=t;a<s.length;a++){var d=s[a];if(d.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<d[d.length-1].length;l++)if(d[d.length-1][l]!==d[0][l])throw new Error("First and last Position are not equivalent.")}var o={type:"Polygon",coordinates:t};return Xc(o,e,n)}function ZH(t,e,n){return n===void 0&&(n={}),Rf(t.map(function(a){return Bg(a,e)}),n)}function as(t,e,n){if(n===void 0&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var a={type:"LineString",coordinates:t};return Xc(a,e,n)}function WH(t,e,n){return n===void 0&&(n={}),Rf(t.map(function(a){return as(a,e)}),n)}function Rf(t,e){e===void 0&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function H2(t,e,n){n===void 0&&(n={});var a={type:"MultiLineString",coordinates:t};return Xc(a,e,n)}function AP(t,e,n){n===void 0&&(n={});var a={type:"MultiPoint",coordinates:t};return Xc(a,e,n)}function wP(t,e,n){n===void 0&&(n={});var a={type:"MultiPolygon",coordinates:t};return Xc(a,e,n)}function qH(t,e,n){n===void 0&&(n={});var a={type:"GeometryCollection",geometries:t};return Xc(a,e,n)}function KH(t,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function $2(t,e){e===void 0&&(e="kilometers");var n=U2[e];if(!n)throw new Error(e+" units is invalid");return t*n}function G2(t,e){e===void 0&&(e="kilometers");var n=U2[e];if(!n)throw new Error(e+" units is invalid");return t/n}function YH(t,e){return Z2(G2(t,e))}function CP(t){var e=t%360;return e<0&&(e+=360),e}function Z2(t){var e=t%(2*Math.PI);return e*180/Math.PI}function ld(t){var e=t%360;return e*Math.PI/180}function XH(t,e,n){if(e===void 0&&(e="kilometers"),n===void 0&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return $2(G2(t,e),n)}function QH(t,e,n){if(e===void 0&&(e="meters"),n===void 0&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var a=Ew[e];if(!a)throw new Error("invalid original units");var s=Ew[n];if(!s)throw new Error("invalid final units");return t/a*s}function D1(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function W2(t){return!!t&&t.constructor===Object}function JH(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(t.length!==4&&t.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(e){if(!D1(e))throw new Error("bbox must only contain numbers")})}function t$(t){if(!t)throw new Error("id is required");if(["string","number"].indexOf(typeof t)===-1)throw new Error("id must be a number or a string")}const e$=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:Ew,bearingToAzimuth:CP,convertArea:QH,convertLength:XH,degreesToRadians:ld,earthRadius:xs,factors:U2,feature:Xc,featureCollection:Rf,geometry:$H,geometryCollection:qH,isNumber:D1,isObject:W2,lengthToDegrees:YH,lengthToRadians:G2,lineString:as,lineStrings:WH,multiLineString:H2,multiPoint:AP,multiPolygon:wP,point:Aa,points:GH,polygon:Bg,polygons:ZH,radiansToDegrees:Z2,radiansToLength:$2,round:KH,unitsFactors:HH,validateBBox:JH,validateId:t$},Symbol.toStringTag,{value:"Module"}));function Xp(t,e,n){if(t!==null)for(var a,s,d,l,o,g,_,C=0,I=0,E,S=t.type,k=S==="FeatureCollection",R=S==="Feature",B=k?t.features.length:1,V=0;V<B;V++){_=k?t.features[V].geometry:R?t.geometry:t,E=_?_.type==="GeometryCollection":!1,o=E?_.geometries.length:1;for(var F=0;F<o;F++){var j=0,G=0;if(l=E?_.geometries[F]:_,l!==null){g=l.coordinates;var Q=l.type;switch(C=n&&(Q==="Polygon"||Q==="MultiPolygon")?1:0,Q){case null:break;case"Point":if(e(g,I,V,j,G)===!1)return!1;I++,j++;break;case"LineString":case"MultiPoint":for(a=0;a<g.length;a++){if(e(g[a],I,V,j,G)===!1)return!1;I++,Q==="MultiPoint"&&j++}Q==="LineString"&&j++;break;case"Polygon":case"MultiLineString":for(a=0;a<g.length;a++){for(s=0;s<g[a].length-C;s++){if(e(g[a][s],I,V,j,G)===!1)return!1;I++}Q==="MultiLineString"&&j++,Q==="Polygon"&&G++}Q==="Polygon"&&j++;break;case"MultiPolygon":for(a=0;a<g.length;a++){for(G=0,s=0;s<g[a].length;s++){for(d=0;d<g[a][s].length-C;d++){if(e(g[a][s][d],I,V,j,G)===!1)return!1;I++}G++}j++}break;case"GeometryCollection":for(a=0;a<l.geometries.length;a++)if(Xp(l.geometries[a],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function n$(t,e,n,a){var s=n;return Xp(t,function(d,l,o,g,_){l===0&&n===void 0?s=d:s=e(s,d,l,o,g,_)},a),s}function IP(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&e(t.features[n].properties,n)!==!1;n++);break;case"Feature":e(t.properties,0);break}}function r$(t,e,n){var a=n;return IP(t,function(s,d){d===0&&n===void 0?a=s:a=e(a,s,d)}),a}function O1(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var n=0;n<t.features.length&&e(t.features[n],n)!==!1;n++);}function i$(t,e,n){var a=n;return O1(t,function(s,d){d===0&&n===void 0?a=s:a=e(a,s,d)}),a}function o$(t){var e=[];return Xp(t,function(n){e.push(n)}),e}function q2(t,e){var n,a,s,d,l,o,g,_,C,I,E=0,S=t.type==="FeatureCollection",k=t.type==="Feature",R=S?t.features.length:1;for(n=0;n<R;n++){for(o=S?t.features[n].geometry:k?t.geometry:t,_=S?t.features[n].properties:k?t.properties:{},C=S?t.features[n].bbox:k?t.bbox:void 0,I=S?t.features[n].id:k?t.id:void 0,g=o?o.type==="GeometryCollection":!1,l=g?o.geometries.length:1,s=0;s<l;s++){if(d=g?o.geometries[s]:o,d===null){if(e(null,E,_,C,I)===!1)return!1;continue}switch(d.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(d,E,_,C,I)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<d.geometries.length;a++)if(e(d.geometries[a],E,_,C,I)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}E++}}function MP(t,e,n){var a=n;return q2(t,function(s,d,l,o,g){d===0&&n===void 0?a=s:a=e(a,s,d,l,o,g)}),a}function md(t,e){q2(t,function(n,a,s,d,l){var o=n===null?null:n.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return e(Xc(n,s,{bbox:d,id:l}),a,0)===!1?!1:void 0}var g;switch(o){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon";break}for(var _=0;_<n.coordinates.length;_++){var C=n.coordinates[_],I={type:g,coordinates:C};if(e(Xc(I,s),a,_)===!1)return!1}})}function a$(t,e,n){var a=n;return md(t,function(s,d,l){d===0&&l===0&&n===void 0?a=s:a=e(a,s,d,l)}),a}function SP(t,e){md(t,function(n,a,s){var d=0;if(n.geometry){var l=n.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var o,g=0,_=0,C=0;if(Xp(n,function(I,E,S,k,R){if(o===void 0||a>g||k>_||R>C){o=I,g=a,_=k,C=R,d=0;return}var B=as([o,I],n.properties);if(e(B,a,s,R,d)===!1)return!1;d++,o=I})===!1)return!1}}})}function EP(t,e,n){var a=n,s=!1;return SP(t,function(d,l,o,g,_){s===!1&&n===void 0?a=d:a=e(a,d,l,o,g,_),s=!0}),a}function TP(t,e){if(!t)throw new Error("geojson is required");md(t,function(n,a,s){if(n.geometry!==null){var d=n.geometry.type,l=n.geometry.coordinates;switch(d){case"LineString":if(e(n,a,s,0,0)===!1)return!1;break;case"Polygon":for(var o=0;o<l.length;o++)if(e(as(l[o],n.properties),a,s,o)===!1)return!1;break}}})}function s$(t,e,n){var a=n;return TP(t,function(s,d,l,o){d===0&&n===void 0?a=s:a=e(a,s,d,l,o)}),a}function l$(t,e){if(e=e||{},!W2(e))throw new Error("options is invalid");var n=e.featureIndex||0,a=e.multiFeatureIndex||0,s=e.geometryIndex||0,d=e.segmentIndex||0,l=e.properties,o;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),l=l||t.features[n].properties,o=t.features[n].geometry;break;case"Feature":l=l||t.properties,o=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=t;break;default:throw new Error("geojson is invalid")}if(o===null)return null;var g=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=g.length+d-1),as([g[d],g[d+1]],l,e);case"Polygon":return s<0&&(s=g.length+s),d<0&&(d=g[s].length+d-1),as([g[s][d],g[s][d+1]],l,e);case"MultiLineString":return a<0&&(a=g.length+a),d<0&&(d=g[a].length+d-1),as([g[a][d],g[a][d+1]],l,e);case"MultiPolygon":return a<0&&(a=g.length+a),s<0&&(s=g[a].length+s),d<0&&(d=g[a][s].length-d-1),as([g[a][s][d],g[a][s][d+1]],l,e)}throw new Error("geojson is invalid")}function c$(t,e){if(e=e||{},!W2(e))throw new Error("options is invalid");var n=e.featureIndex||0,a=e.multiFeatureIndex||0,s=e.geometryIndex||0,d=e.coordIndex||0,l=e.properties,o;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),l=l||t.features[n].properties,o=t.features[n].geometry;break;case"Feature":l=l||t.properties,o=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=t;break;default:throw new Error("geojson is invalid")}if(o===null)return null;var g=o.coordinates;switch(o.type){case"Point":return Aa(g,l,e);case"MultiPoint":return a<0&&(a=g.length+a),Aa(g[a],l,e);case"LineString":return d<0&&(d=g.length+d),Aa(g[d],l,e);case"Polygon":return s<0&&(s=g.length+s),d<0&&(d=g[s].length+d),Aa(g[s][d],l,e);case"MultiLineString":return a<0&&(a=g.length+a),d<0&&(d=g[a].length+d),Aa(g[a][d],l,e);case"MultiPolygon":return a<0&&(a=g.length+a),s<0&&(s=g[a].length+s),d<0&&(d=g[a][s].length-d),Aa(g[a][s][d],l,e)}throw new Error("geojson is invalid")}const u$=Object.freeze(Object.defineProperty({__proto__:null,coordAll:o$,coordEach:Xp,coordReduce:n$,featureEach:O1,featureReduce:i$,findPoint:c$,findSegment:l$,flattenEach:md,flattenReduce:a$,geomEach:q2,geomReduce:MP,lineEach:TP,lineReduce:s$,propEach:IP,propReduce:r$,segmentEach:SP,segmentReduce:EP},Symbol.toStringTag,{value:"Module"}));function Df(t){var e=[1/0,1/0,-1/0,-1/0];return Xp(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}Df.default=Df;const h$=Object.freeze(Object.defineProperty({__proto__:null,default:Df},Symbol.toStringTag,{value:"Module"}));function zy(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Fy(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Rb(t){return t.type==="Feature"?t.geometry:t}function By(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var a=zy(t),s=Rb(e),d=s.type,l=e.bbox,o=s.coordinates;if(l&&d$(a,l)===!1)return!1;d==="Polygon"&&(o=[o]);for(var g=!1,_=0;_<o.length&&!g;_++)if(xM(a,o[_][0],n.ignoreBoundary)){for(var C=!1,I=1;I<o[_].length&&!C;)xM(a,o[_][I],!n.ignoreBoundary)&&(C=!0),I++;C||(g=!0)}return g}function xM(t,e,n){var a=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var s=0,d=e.length-1;s<e.length;d=s++){var l=e[s][0],o=e[s][1],g=e[d][0],_=e[d][1],C=t[1]*(l-g)+o*(g-t[0])+_*(t[0]-l)===0&&(l-t[0])*(g-t[0])<=0&&(o-t[1])*(_-t[1])<=0;if(C)return!n;var I=o>t[1]!=_>t[1]&&t[0]<(g-l)*(t[1]-o)/(_-o)+l;I&&(a=!a)}return a}function d$(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function f$(t,e,n){n===void 0&&(n={});var a=zy(t),s=zy(e),d=ld(s[1]-a[1]),l=ld(s[0]-a[0]),o=ld(a[1]),g=ld(s[1]),_=Math.pow(Math.sin(d/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(o)*Math.cos(g);return $2(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),n.units)}function PP(t,e,n){if(n===void 0&&(n={}),n.final===!0)return p$(t,e);var a=zy(t),s=zy(e),d=ld(a[0]),l=ld(s[0]),o=ld(a[1]),g=ld(s[1]),_=Math.sin(l-d)*Math.cos(g),C=Math.cos(o)*Math.sin(g)-Math.sin(o)*Math.cos(g)*Math.cos(l-d);return Z2(Math.atan2(_,C))}function p$(t,e){var n=PP(e,t);return n=(n+180)%360,n}function m$(t,e){e===void 0&&(e={});var n=Df(t),a=(n[0]+n[2])/2,s=(n[1]+n[3])/2;return Aa([a,s],e.properties,e)}function g$(t,e){e===void 0&&(e={});var n=0,a=0,s=0;return Xp(t,function(d){n+=d[0],a+=d[1],s++},!0),Aa([n/s,a/s],e.properties)}function AM(t){if(!t)throw new Error("geojson is required");var e=[];return md(t,function(n){y$(n,e)}),Rf(e)}function y$(t,e){var n=[],a=t.geometry;if(a!==null){switch(a.type){case"Polygon":n=Fy(a);break;case"LineString":n=[Fy(a)]}n.forEach(function(s){var d=v$(s,t.properties);d.forEach(function(l){l.id=e.length,e.push(l)})})}}function v$(t,e){var n=[];return t.reduce(function(a,s){var d=as([a,s],e);return d.bbox=_$(a,s),n.push(d),s}),n}function _$(t,e){var n=t[0],a=t[1],s=e[0],d=e[1],l=n<s?n:s,o=a<d?a:d,g=n>s?n:s,_=a>d?a:d;return[l,o,g,_]}var K2={exports:{}},kP={exports:{}};(function(t,e){(function(n,a){t.exports=a()})(ho,function(){function n(F,j,G,Q,nt){(function X(K,Z,at,pt,rt){for(;pt>at;){if(pt-at>600){var xt=pt-at+1,q=Z-at+1,zt=Math.log(xt),Rt=.5*Math.exp(2*zt/3),Bt=.5*Math.sqrt(zt*Rt*(xt-Rt)/xt)*(q-xt/2<0?-1:1),Xt=Math.max(at,Math.floor(Z-q*Rt/xt+Bt)),ge=Math.min(pt,Math.floor(Z+(xt-q)*Rt/xt+Bt));X(K,Z,Xt,ge,rt)}var en=K[Z],te=at,Gt=pt;for(a(K,at,Z),rt(K[pt],en)>0&&a(K,at,pt);te<Gt;){for(a(K,te,Gt),te++,Gt--;rt(K[te],en)<0;)te++;for(;rt(K[Gt],en)>0;)Gt--}rt(K[at],en)===0?a(K,at,Gt):a(K,++Gt,pt),Gt<=Z&&(at=Gt+1),Z<=Gt&&(pt=Gt-1)}})(F,j,G||0,Q||F.length-1,nt||s)}function a(F,j,G){var Q=F[j];F[j]=F[G],F[G]=Q}function s(F,j){return F<j?-1:F>j?1:0}var d=function(F){F===void 0&&(F=9),this._maxEntries=Math.max(4,F),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(F,j,G){if(!G)return j.indexOf(F);for(var Q=0;Q<j.length;Q++)if(G(F,j[Q]))return Q;return-1}function o(F,j){g(F,0,F.children.length,j,F)}function g(F,j,G,Q,nt){nt||(nt=B(null)),nt.minX=1/0,nt.minY=1/0,nt.maxX=-1/0,nt.maxY=-1/0;for(var X=j;X<G;X++){var K=F.children[X];_(nt,F.leaf?Q(K):K)}return nt}function _(F,j){return F.minX=Math.min(F.minX,j.minX),F.minY=Math.min(F.minY,j.minY),F.maxX=Math.max(F.maxX,j.maxX),F.maxY=Math.max(F.maxY,j.maxY),F}function C(F,j){return F.minX-j.minX}function I(F,j){return F.minY-j.minY}function E(F){return(F.maxX-F.minX)*(F.maxY-F.minY)}function S(F){return F.maxX-F.minX+(F.maxY-F.minY)}function k(F,j){return F.minX<=j.minX&&F.minY<=j.minY&&j.maxX<=F.maxX&&j.maxY<=F.maxY}function R(F,j){return j.minX<=F.maxX&&j.minY<=F.maxY&&j.maxX>=F.minX&&j.maxY>=F.minY}function B(F){return{children:F,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function V(F,j,G,Q,nt){for(var X=[j,G];X.length;)if(!((G=X.pop())-(j=X.pop())<=Q)){var K=j+Math.ceil((G-j)/Q/2)*Q;n(F,K,j,G,nt),X.push(j,K,K,G)}}return d.prototype.all=function(){return this._all(this.data,[])},d.prototype.search=function(F){var j=this.data,G=[];if(!R(F,j))return G;for(var Q=this.toBBox,nt=[];j;){for(var X=0;X<j.children.length;X++){var K=j.children[X],Z=j.leaf?Q(K):K;R(F,Z)&&(j.leaf?G.push(K):k(F,Z)?this._all(K,G):nt.push(K))}j=nt.pop()}return G},d.prototype.collides=function(F){var j=this.data;if(!R(F,j))return!1;for(var G=[];j;){for(var Q=0;Q<j.children.length;Q++){var nt=j.children[Q],X=j.leaf?this.toBBox(nt):nt;if(R(F,X)){if(j.leaf||k(F,X))return!0;G.push(nt)}}j=G.pop()}return!1},d.prototype.load=function(F){if(!F||!F.length)return this;if(F.length<this._minEntries){for(var j=0;j<F.length;j++)this.insert(F[j]);return this}var G=this._build(F.slice(),0,F.length-1,0);if(this.data.children.length)if(this.data.height===G.height)this._splitRoot(this.data,G);else{if(this.data.height<G.height){var Q=this.data;this.data=G,G=Q}this._insert(G,this.data.height-G.height-1,!0)}else this.data=G;return this},d.prototype.insert=function(F){return F&&this._insert(F,this.data.height-1),this},d.prototype.clear=function(){return this.data=B([]),this},d.prototype.remove=function(F,j){if(!F)return this;for(var G,Q,nt,X=this.data,K=this.toBBox(F),Z=[],at=[];X||Z.length;){if(X||(X=Z.pop(),Q=Z[Z.length-1],G=at.pop(),nt=!0),X.leaf){var pt=l(F,X.children,j);if(pt!==-1)return X.children.splice(pt,1),Z.push(X),this._condense(Z),this}nt||X.leaf||!k(X,K)?Q?(G++,X=Q.children[G],nt=!1):X=null:(Z.push(X),at.push(G),G=0,Q=X,X=X.children[0])}return this},d.prototype.toBBox=function(F){return F},d.prototype.compareMinX=function(F,j){return F.minX-j.minX},d.prototype.compareMinY=function(F,j){return F.minY-j.minY},d.prototype.toJSON=function(){return this.data},d.prototype.fromJSON=function(F){return this.data=F,this},d.prototype._all=function(F,j){for(var G=[];F;)F.leaf?j.push.apply(j,F.children):G.push.apply(G,F.children),F=G.pop();return j},d.prototype._build=function(F,j,G,Q){var nt,X=G-j+1,K=this._maxEntries;if(X<=K)return o(nt=B(F.slice(j,G+1)),this.toBBox),nt;Q||(Q=Math.ceil(Math.log(X)/Math.log(K)),K=Math.ceil(X/Math.pow(K,Q-1))),(nt=B([])).leaf=!1,nt.height=Q;var Z=Math.ceil(X/K),at=Z*Math.ceil(Math.sqrt(K));V(F,j,G,at,this.compareMinX);for(var pt=j;pt<=G;pt+=at){var rt=Math.min(pt+at-1,G);V(F,pt,rt,Z,this.compareMinY);for(var xt=pt;xt<=rt;xt+=Z){var q=Math.min(xt+Z-1,rt);nt.children.push(this._build(F,xt,q,Q-1))}}return o(nt,this.toBBox),nt},d.prototype._chooseSubtree=function(F,j,G,Q){for(;Q.push(j),!j.leaf&&Q.length-1!==G;){for(var nt=1/0,X=1/0,K=void 0,Z=0;Z<j.children.length;Z++){var at=j.children[Z],pt=E(at),rt=(xt=F,q=at,(Math.max(q.maxX,xt.maxX)-Math.min(q.minX,xt.minX))*(Math.max(q.maxY,xt.maxY)-Math.min(q.minY,xt.minY))-pt);rt<X?(X=rt,nt=pt<nt?pt:nt,K=at):rt===X&&pt<nt&&(nt=pt,K=at)}j=K||j.children[0]}var xt,q;return j},d.prototype._insert=function(F,j,G){var Q=G?F:this.toBBox(F),nt=[],X=this._chooseSubtree(Q,this.data,j,nt);for(X.children.push(F),_(X,Q);j>=0&&nt[j].children.length>this._maxEntries;)this._split(nt,j),j--;this._adjustParentBBoxes(Q,nt,j)},d.prototype._split=function(F,j){var G=F[j],Q=G.children.length,nt=this._minEntries;this._chooseSplitAxis(G,nt,Q);var X=this._chooseSplitIndex(G,nt,Q),K=B(G.children.splice(X,G.children.length-X));K.height=G.height,K.leaf=G.leaf,o(G,this.toBBox),o(K,this.toBBox),j?F[j-1].children.push(K):this._splitRoot(G,K)},d.prototype._splitRoot=function(F,j){this.data=B([F,j]),this.data.height=F.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},d.prototype._chooseSplitIndex=function(F,j,G){for(var Q,nt,X,K,Z,at,pt,rt=1/0,xt=1/0,q=j;q<=G-j;q++){var zt=g(F,0,q,this.toBBox),Rt=g(F,q,G,this.toBBox),Bt=(nt=zt,X=Rt,K=void 0,Z=void 0,at=void 0,pt=void 0,K=Math.max(nt.minX,X.minX),Z=Math.max(nt.minY,X.minY),at=Math.min(nt.maxX,X.maxX),pt=Math.min(nt.maxY,X.maxY),Math.max(0,at-K)*Math.max(0,pt-Z)),Xt=E(zt)+E(Rt);Bt<rt?(rt=Bt,Q=q,xt=Xt<xt?Xt:xt):Bt===rt&&Xt<xt&&(xt=Xt,Q=q)}return Q||G-j},d.prototype._chooseSplitAxis=function(F,j,G){var Q=F.leaf?this.compareMinX:C,nt=F.leaf?this.compareMinY:I;this._allDistMargin(F,j,G,Q)<this._allDistMargin(F,j,G,nt)&&F.children.sort(Q)},d.prototype._allDistMargin=function(F,j,G,Q){F.children.sort(Q);for(var nt=this.toBBox,X=g(F,0,j,nt),K=g(F,G-j,G,nt),Z=S(X)+S(K),at=j;at<G-j;at++){var pt=F.children[at];_(X,F.leaf?nt(pt):pt),Z+=S(X)}for(var rt=G-j-1;rt>=j;rt--){var xt=F.children[rt];_(K,F.leaf?nt(xt):xt),Z+=S(K)}return Z},d.prototype._adjustParentBBoxes=function(F,j,G){for(var Q=G;Q>=0;Q--)_(j[Q],F)},d.prototype._condense=function(F){for(var j=F.length-1,G=void 0;j>=0;j--)F[j].children.length===0?j>0?(G=F[j-1].children).splice(G.indexOf(F[j]),1):this.clear():o(F[j],this.toBBox)},d})})(kP);var b$=kP.exports;const x$=Wy(e$),A$=Wy(u$),w$=Wy(h$);var gh=b$,LP=x$,RP=A$,Nm=w$.default,C$=RP.featureEach;RP.coordEach;LP.polygon;var wM=LP.featureCollection;function DP(t){var e=new gh(t);return e.insert=function(n){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Nm(n),gh.prototype.insert.call(this,n)},e.load=function(n){var a=[];return Array.isArray(n)?n.forEach(function(s){if(s.type!=="Feature")throw new Error("invalid features");s.bbox=s.bbox?s.bbox:Nm(s),a.push(s)}):C$(n,function(s){if(s.type!=="Feature")throw new Error("invalid features");s.bbox=s.bbox?s.bbox:Nm(s),a.push(s)}),gh.prototype.load.call(this,a)},e.remove=function(n,a){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Nm(n),gh.prototype.remove.call(this,n,a)},e.clear=function(){return gh.prototype.clear.call(this)},e.search=function(n){var a=gh.prototype.search.call(this,this.toBBox(n));return wM(a)},e.collides=function(n){return gh.prototype.collides.call(this,this.toBBox(n))},e.all=function(){var n=gh.prototype.all.call(this);return wM(n)},e.toJSON=function(){return gh.prototype.toJSON.call(this)},e.fromJSON=function(n){return gh.prototype.fromJSON.call(this,n)},e.toBBox=function(n){var a;if(n.bbox)a=n.bbox;else if(Array.isArray(n)&&n.length===4)a=n;else if(Array.isArray(n)&&n.length===6)a=[n[0],n[1],n[3],n[4]];else if(n.type==="Feature")a=Nm(n);else if(n.type==="FeatureCollection")a=Nm(n);else throw new Error("invalid geojson");return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}},e}K2.exports=DP;K2.exports.default=DP;var I$=K2.exports;const M$=Ff(I$);function Y2(t,e){var n={},a=[];if(t.type==="LineString"&&(t=Xc(t)),e.type==="LineString"&&(e=Xc(e)),t.type==="Feature"&&e.type==="Feature"&&t.geometry!==null&&e.geometry!==null&&t.geometry.type==="LineString"&&e.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var s=CM(t,e);return s&&a.push(s),Rf(a)}var d=M$();return d.load(AM(e)),O1(AM(t),function(l){O1(d.search(l),function(o){var g=CM(l,o);if(g){var _=Fy(g).join(",");n[_]||(n[_]=!0,a.push(g))}})}),Rf(a)}function CM(t,e){var n=Fy(t),a=Fy(e);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(a.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var s=n[0][0],d=n[0][1],l=n[1][0],o=n[1][1],g=a[0][0],_=a[0][1],C=a[1][0],I=a[1][1],E=(I-_)*(l-s)-(C-g)*(o-d),S=(C-g)*(d-_)-(I-_)*(s-g),k=(l-s)*(d-_)-(o-d)*(s-g);if(E===0)return null;var R=S/E,B=k/E;if(R>=0&&R<=1&&B>=0&&B<=1){var V=s+R*(l-s),F=d+R*(o-d);return Aa([V,F])}return null}var IM=6378137;function S$(t){return MP(t,function(e,n){return e+E$(n)},0)}function E$(t){var e=0,n;switch(t.type){case"Polygon":return MM(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=MM(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function MM(t){var e=0;if(t&&t.length>0){e+=Math.abs(SM(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(SM(t[n]))}return e}function SM(t){var e,n,a,s,d,l,o,g=0,_=t.length;if(_>2){for(o=0;o<_;o++)o===_-2?(s=_-2,d=_-1,l=0):o===_-1?(s=_-1,d=0,l=1):(s=o,d=o+1,l=o+2),e=t[s],n=t[d],a=t[l],g+=(_A(a[0])-_A(e[0]))*Math.sin(_A(n[1]));g=g*IM*IM/2}return g}function _A(t){return t*Math.PI/180}function EM(t,e){return e===void 0&&(e={}),EP(t,function(n,a){var s=a.geometry.coordinates;return n+f$(s[0],s[1],e)},0)}function Tw(t,e){e===void 0&&(e={});var n=Rb(t);switch(!e.properties&&t.type==="Feature"&&(e.properties=t.properties),n.type){case"Polygon":return T$(n,e);case"MultiPolygon":return P$(n,e);default:throw new Error("invalid poly")}}function T$(t,e){e===void 0&&(e={});var n=Rb(t),a=n.coordinates,s=e.properties?e.properties:t.type==="Feature"?t.properties:{};return OP(a,s)}function P$(t,e){e===void 0&&(e={});var n=Rb(t),a=n.coordinates,s=e.properties?e.properties:t.type==="Feature"?t.properties:{},d=[];return a.forEach(function(l){d.push(OP(l,s))}),Rf(d)}function OP(t,e){return t.length>1?H2(t,e):as(t[0],e)}function k$(t,e){var n=!0;return md(t,function(a){md(e,function(s){if(n===!1)return!1;n=L$(a.geometry,s.geometry)})}),n}function L$(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!z$(t.coordinates,e.coordinates);case"LineString":return!TM(e,t);case"Polygon":return!By(t,e)}break;case"LineString":switch(e.type){case"Point":return!TM(t,e);case"LineString":return!R$(t,e);case"Polygon":return!PM(e,t)}break;case"Polygon":switch(e.type){case"Point":return!By(e,t);case"LineString":return!PM(t,e);case"Polygon":return!D$(e,t)}}return!1}function TM(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(O$(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function R$(t,e){var n=Y2(t,e);return n.features.length>0}function PM(t,e){for(var n=0,a=e.coordinates;n<a.length;n++){var s=a[n];if(By(s,t))return!0}var d=Y2(e,Tw(t));return d.features.length>0}function D$(t,e){for(var n=0,a=t.coordinates[0];n<a.length;n++){var s=a[n];if(By(s,e))return!0}for(var d=0,l=e.coordinates[0];d<l.length;d++){var o=l[d];if(By(o,t))return!0}var g=Y2(Tw(t),Tw(e));return g.features.length>0}function O$(t,e,n){var a=n[0]-t[0],s=n[1]-t[1],d=e[0]-t[0],l=e[1]-t[1],o=a*l-s*d;return o!==0?!1:Math.abs(d)>=Math.abs(l)?d>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:l>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]}function z$(t,e){return t[0]===e[0]&&t[1]===e[1]}function F$(t,e){var n=!1;return md(t,function(a){md(e,function(s){if(n===!0)return!0;n=!k$(a.geometry,s.geometry)})}),n}function zP(t,e,{zoom:n=15}={}){if(!e||!t)return;const a={top:50,bottom:50,left:50,right:50};if(["Point"].includes(e.type)){t.easeTo({center:e.coordinates,zoom:n,duration:0,padding:a});return}a.left=a.left,a.right=a.right;let s;e.length==4?s=e:s=B$(e),s&&t.fitBounds(s,{padding:a,duration:0})}function B$(t){if(!t.type)return;let e;return["Feature","FeatureCollection"].includes(t.type)?e=Df(t):e=Df({type:"Feature",properties:{},geometry:t}),e}function N$(t,e={}){if(t.length!=0)return t.length==1?Aa(t[0],e):t.length==2?as(t,e):Bg([[...t,t[0]]],e)}const my="base_map_control_";class j${constructor(){this._baseMap=void 0,this.layers=[],this.sources={}}getBeforeId(){return this.layers[0].id}async setBaseMap(e){if(this._baseMap&&this._baseMap.id===e.id)return;this._baseMap=e;const{sources:n,layers:a}=await V$(e.type)(e);this.layers=a,this.sources=n}addToMap(e,n){for(const a in this.sources)if(Object.hasOwnProperty.call(this.sources,a)){const s=this.sources[a];e.getSource(a)||e.addSource(a,s)}this.layers.forEach(a=>{e.getLayer(a.id)||e.addLayer(a,n)})}removeFromMap(e){this.layers.forEach(n=>{e.getLayer(n.id)&&e.removeLayer(n.id)});for(const n in this.sources)e.getSource(n)&&e.removeSource(n)}}function V$(t){switch(t){case"vector":return H$;case"raster":return $$;case"no-basemap":return U$;default:throw new Error(`Not support ${t}`)}}async function U$(){return{layers:[],sources:{}}}async function H$(t){const e=await fetch(t.links[0]).then(l=>l.json()),n=[],a={};for(const l in e.sources){const o=my+l;a[o]=e.sources[l]}for(const l of e.layers){const o=my+l.id,g=my+l.source;n.push(Object.assign(l,{id:o,source:g}))}const s=e.glyphs,d=e.sprite;return{layers:n,sources:a,glyphs:s,sprite:d}}async function $$(t){if(!t)throw new Error("Not found item");const e=`${my}layer`,n=`${my}source`,a={};return a[n]={type:"raster",tiles:t.links,scheme:t.scheme||"xyz",maxzoom:t.maxzoom||22,minzoom:t.minzoom||0,tileSize:t.tileSize||256},{layers:[{id:e,type:"raster",source:n}],sources:a}}const X2="basemap";function FP(t){const e=Vu(t,X2,ls({baseMaps:[],defaultBaseMap:"",current:void 0,layer:void 0,loading:!1}));function n(o){e.baseMaps=o}function a(o){e.defaultBaseMap=o,e.current||s(G$(t))}function s(o){e.current=o,W$(t,e.current)}const d=_n(()=>e.baseMaps),l=_n(()=>e.current);return{setBaseMaps:n,baseMaps:d,setDefaultBaseMap:a,setCurrent:s,currentBaseMap:l}}function G$(t){const e=Vo(t,X2),n=e.baseMaps.findIndex(s=>s.default||s.title===e.defaultBaseMap),a=n<0?0:n;return e.baseMaps[a]}function Z$(t){const e=t.getStyle().layers;return e.length>0?e[0].id:void 0}const W$=async(t,e)=>{if(!e)return;const n=Vo(t,X2);if(n.loading)return;n.current=e,n.loading=!0;let a=n.layer;a||(n.layer=new j$,a=n.layer),wl.actions.getMap(t,s=>{a.removeFromMap(s)}),await a.setBaseMap(e),wl.actions.getMap(t,s=>{a.addToMap(s,Z$(s))}),n.loading=!1},q$={class:"base-map-card"},K$={class:"base-map-card__image"},Y$={class:"base-map-card__content"},X$={class:"base-map-card__title"},Q$=nr({__name:"BaseMapCard",props:{mapId:{type:String,required:!0},title:{type:String,default:""}},setup(t){const e=t,{mapId:n}=bi(e),{trans:a}=To(n.value),{baseMaps:s,setCurrent:d,currentBaseMap:l}=FP(n.value),o=g=>{d(g)};return(g,_)=>(Mt(),pe("div",q$,[Nt("div",K$,[ut(l)?(Mt(),Je(ut(yw),{key:0,src:ut(l).thumbnail},null,8,["src"])):wn("",!0)]),Nt("div",Y$,[Nt("div",X$,Rn(t.title||ut(a)("map.basemap.title")),1),Nt("div",null,[ee(ut(Tf),{modelValue:ut(l),items:ut(s),returnObject:"",itemText:"title",itemValue:"id","onUpdate:modelValue":o},null,8,["modelValue","items"])])])]))}}),J$=Vn(Q$,[["__scopeId","data-v-20f20e83"]]),tG=[{link:"",thumbnail:"/static/img/icon-stack.png",type:"no-basemap",title:"None",id:"null"},{id:1,title:"Streets",type:"vector",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9TfE2haV8QDcaOLS60zxBp9rHc2wJDfaGeEOYiOATgLk8fNzk4Iat+y1f3em+K9U014pESRFadHjwYnTcBnJGDk4xtJOe2Kzfhc15q1vrer2MNlNdwoqTWHkJ/pysvOG+8nKbgOjFeQTk1l+BvHN18LvihcXWppPMxaS3v4xIXdsnOQWPzEEAgk8jPPOa+5WGnPDYnK6UlJxUXyt3alo5WvrZ7rVpN77pfkMcfRhjMJm1SLgpSknJKycLtRvbS61T0TaWq2b92+J3jjTfBnh6T7dcxxyXMbiCFgS1xgDIAHPcc8AZGTXyw0nnOzEsxYkks24k+57mtPxl4ouPF3im81GWWVjNMzQ7mJ8lNxKquScAA9BTNS1K78X6kh8lGlWIqkcEeMKoLtgcn+83tzjA4r2chyf+zaV5auSvJt2tbZJW83d36Hi8UcQLN63uqyg7QSV3K+7bv5KyS6/Mb4Y8OXHi3W4bC12edMT8zkhUAGSTjPAFdV4r+BWoaFp32mzmGoLDEZJ0CbJFx1Krk7gPz9qufCq9sfDPhDVNUt2Da0lnM+6bmKFVYBVwOfmYoTnrlRkd+40DTI/Eej2Sz2l7NbWkiyxPfEidmAYZK8lhl+S2AcngACvk+JOLsdg8bzUPdo03ytOKvN2u7XadtUlZ66vZWfr5Hwxg8Tg7VveqzXMmm/dTdlsmr7t3Wmi3PMPDHgDW9e8PvaW9htt725SRrxpQqL5YddrDqy5fOVzgg/eIwvdeDPhlZWGo2PnWzQ3+n2MTSH5XXzWkk37uSDkAgZH3T2YA13fI9fancKDxgtySO56fyA/Kvgsz48x2OjOCSpxfZu+umt3reOlrJfjf7HLeEMJhXGUm5uPe3rppprre7fntZxG8YPIP61Sm8M6ZPNE0mnWLtCCsZNuh2ArtIHHTHGPpU3lZuBJuk3Ku0DzG2Y/3c4J98ZqTLZr4uGJnDWk2vQ+pnThP41f8TjdG+Amhabp0sE32y9M6pueSXbsZQfmQKBjOe+7oPfPK67+zje288f8AZ15Dcw7RvM/7uQNk5wACCMY6kd69H8T+O9M8GRw/2lc+Q0+fLVUZ2YDqcKDx2z0rBufjdZWcTXclneHSnlaG1uUXLXjLt3FVbbtUZYEk84GBncF/QMozrimUvrWH5pqf8y91tae7eyvpqo9m2rJtfGZnlfDqj9XrcsHDs/eSevvWvp5y72WrV/LPHHw91DwFLEt5GrJIDtuInLRSe3IBUjI4PXPFdZYfs6vqPh62uF1eEXU6CUqIxJAARkAOrc/7wyD29+Y8XfFDUvFN/duks1na3aoptRMXjGw5XsO4BPHJ9uK9Oi+Leh6H4XtJ/tN5fCRmU/ulWbd947lAVRyeMYHB5yDX3Od47iTD4PDKjFe2k3zcq5ul7O6aXW9nZ2urbL5HJ8HkFfFYh1X+6ily8z5etrqzTfTdXV7Pu+R0b4Da7p2rrcrLpTGxnSSIPIzLOVIYZAXIHGDnHQ/WivTfDXirT/GmlPNYP9ohy0ciuu109iPoR7Givz7M+K8fUrcmY0488dLOG3/ky9T7zLuHsJQpc2Xzlyy1up6P8GUNC1DStN0zUtTtxHZC7KXFykyiFYW2Koz8vQ4znkElsck15F8SPE0PivUFuPKhgvIWMEghAcSoANrmQN87dR04GOTir3xd8b2niq5tlsYEWBk815iiiSc8gKw6jYQ2MnvnpiuNr9H4O4Zlh3/aWJ5lUlok3dxilaz+S6q60WjTv+fcV5/CsvqGGs4R1bSsm3rdf1Z67poK0/Ct5LZ6luit/PxtZ2ETyGFQwJb5CDjs3PKkjvWZXd/AfwvqOpeImv7YywW0IMBnULjedpA+Yjpwx4bgYx81fXZ5iIUcDUqTSats21fstE3+B87kGFq4jMKdKje7fRXa7vVpeup0fh7w9o+gpa6fdQ6TdvNP+9jZkmAZs4BJm6YTI+Q8KBlmGTr2/ivwzaapFZTtYqJ2WWKK56RMxPIDqFQdRndnoAvNZPib4HhdPkudDvZ4XUN5pvhKkkxZlDH7o9BztIOe2ARZ0fwtqXh/WVstWv8Aw9dWJncM7ZMm9tzqJlYqGBAcqGLHjjjNfkGIwFDER+sVMQ6js/dfutPul7yt5XWnVW0/aMPUxmHq/V44VU03H3lZxt2bvF36Xs7PWzur9hb+JoNVubyK133LWJUv5ajDblDAK5IU/KwOc4+YYPWrMd5mMM0ckDt/yzfaSecfwsR75z3Ga5XS4dEi1e9kimttN1C4hRQovjHDNtLncmzaHXhgWB+8p+UHk6ug6dBpF3e6lJYeYxbcblD9paRcHDJ8ztjGM4A+UrwccfMYrBKDTSlFNLddbK9rbq97eVj6HDTlNNTkm05bdru1/O1r+Zp3Kz/Z90ccsrNwBB5ZZf8Aay7AEcfy46062sysSRruVIkCjnPTjBPfp196rz682voBpt9GjKfmJh3qQfUHHTrXD/G26m8OaZpd2s9zJcvcAThbh0imUDkCLcVXAAG4Lnk85PPPgsto4zEQwdF+9K+/e2n9dPvMsxxVLCUJYme0d/S6/rz2Mb49XWn392n2WFJr6BVN1cx5bylJxGjEcf3uozyvPauCv9dudS06xtJXzBp0bxwIOi7nLsfqSQPoo9KjuZbdLcQ20cqoGDM8rKWcgEZwANo5PGT9TjNQV/Q2RZRHBYOnhpXlyapy3V013dt2kk9Iu3c/nzOczeKxdSvCy591HZ637K+ybb3av2ClZy55JPGOT2pKK908Y6H4X+Lp/CPi2B4lMsV2wt5od2BJu4U9DyGIOcZ6juaKwIJ3tp0kjO2SNg6sOxByDRXwvE/B8MzxMcTCMea1m22r222/rp0PsuHeKJZfQdCbdr3Widu+5v8AhvwdceLjd/YZLYwW2B+/DF8sDjaEUt/CegwPfGaztc8L3nh6d1niJRCAZUBKAnOASQCp4PysAeOmK7n4F6tYLbT2s/2aO4ifzh5zf61euVycArj5uCcY5GK9HvrK18Q2XlTW1te2U65bLhxxgjGOvOMEHjivnMx42xuU5rPCVqd6St/ia095PZt6vt00aPoMJwnhM0y2GKoztUa/7dT/AJWt1bbe/XU+b69O+E3jm30zwp9lN1HDc2zEossssagFi24hSVcZbGCoJ5BOMVynxU0XTfDni+Wy0xZUSBF81WcsquQGwpPOMEZyeua5wjNfd4zCUs9y6Ek5QUrTW1/mtd0+58hl2YV8hzGbjaUo3i+2+tn6rsfSWneMYtW0z7bb3UNx8u0rADdRwNlsHCqJMnGMZAx9Caj8SS3HiDRDHbsyMZEmhdLcCa2kRt+/95Iv8SjGQODg7gTXknwVgN/rl3A1q9zGIBPmJlSWJ1YKpDFl4+c8ZxnBxxXomv262mhapcJPeSSW9tKYZryR2ihkALBgG/dtyAFOCVzx97FfjOcYOvlua/UqdS+sbOye9rX+f4bJn7HledrMMs+tVY6WakvTe3y8zivjV8RNX1C7l0a5e2jiUhpUt3ck85COSFDdFbhe4561l+CfiPJ4X8IajbeZvvIyraZ5yiSO23EiUoD904JI7EscgiuZ1OwurGZGvElSW6QXA80/O6sThjnnnBPPJBB6EVXr9no5Dg5ZfDBySlG6baWjkt3u9Hazu3ppc/HcTxHjXmE8a5SUmnGzeqi1tsrWvdWS11sdn4G+JM+mWd1FqMt7c2rMZBIsu145G/iLY3MOM4z3JwQMVzt9Nc6yZLu9e5lMwcwTXUpbOzllDHgnBA/HgZIqDStZm0Z5/KEbrcwtBLHICUkVh3AIPBwQQeCK0Ev77xe1tp9vbfaJkiCQpDAqyfKMliVC5JwMsRnAGSSMnKOVwweMqYqjTjGM7OUr2tZb2731lsuXu9m8ynjMJTw1SblON1FW3v3fpot3zdkYtFdVrng278O6dcxalo6RSWiRStdwF/lR/lGfm2N820HA7nvzXKjp/hXs4HHwxUXKmtF1umnpe6s30fWz7o8fG4CphZKFXd9LNNdNbpdV0uvMKM0UV3HCFFFFAHRfCaIv8QNPfZI625eVti5KAIQGI64BI6c+nNek/FTxdF4Q0CRLe6u/t+oBTAhZ0aLDcy84YD5SPfp0rifgbcxaX4h1HUZZVjTT9PkmIb+IZXr3xwOnPSuS1TUrnWL17q7eSWaclyzknOSentnNfA5hkcM1z32mI/h0Iw0/mbblb02v5WXVn3WBzuWWZJ7Oh/ErSk7/AMqSjG/r2+8ju7uW/u5Z55HlmmYvI7sWZmPU5NR0UV95CEYRUIKyR8POcpyc5u7Zs/D/AMRr4X8VW9xLJNFbyZgmaN2Uqj8bvlycKdrEY/hrofjB8QbPxXDb21olrNwsktygYnA+6gLorDGWJGO475A4WivExPD2Fr5jTzOr8cFZLp1s35q+n/APaw+f4mhl88up/DN3b69Lpettf+CWta1mfX9QNzcFTIUSPCLtVVRQigDtwoqrRQRivZp04U4KnTVktEuyR405ynJzm7t6sK9X+DHxB8O+C/A0jXxt7fUfPkQlId9xcJhSOQM7ecDJA+U15RRXDmmWU8fR9hVbSunp5dD08mzerluI+s0Ypys1rqtep9I+HPGGk+ONAvZo7qbULUIftMFxCu+BTn5WVF5yAcfezjg5r5zv3tzf3BtN/wBkMreRvB3eXuO3Oec4x15ptvcG3LYAIdGRgehBBH5jOR7in2EkEV2jXMTzwrkmNH2bzjgE+mcZxzjOMda8rKMgWWVa1SlJyjJK0fS/nZvzsj1c94klnEKMK8FGUb3l3vbpul5XZCw2sQeoOCPSin3N1Ley75XeR9qruYknCgKBk88AAfhTK+lhzOK5tz5afKpPl2CiiiqJOPtPiDrGly+bb3hicqUJEafMp6g8cioh4w1Ef8tx/wB+k/woorg295bs9KyfuvYP+Ex1H/n4H/fpP8Kmh8VX72sjGflen7tf8KKKpSl3Dkj2If8AhMNR/wCfgf8AfpP8KP8AhMNR/wCfgf8AfpP8KKKXPLuHJHsH/CYaj/z8D/v0n+FH/CYaj/z8D/v0n+FFFHPLuHJHsH/CYaj/AM/A/wC/Sf4Uf8JhqP8Az8D/AL9J/hRRRzy7hyR7B/wmGo/8/A/79J/hR/wmGo/8/A/79J/hRRRzy7hyR7B/wmGo/wDPwP8Av0n+FH/CYaj/AM/A/wC/Sf4UUUc8u4ckewf8JhqP/PwP+/Sf4UUUUc8u4ckex//Z",links:["https://tiles.eofactory.ai/styles/basic/style.json"]},{id:2,title:"ArcGIS Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABgESAAMAAAABAAEAAAMBAAUAAAABAAAAVgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAAAAAYagAACxj//bAEMAAgEBAgEBAgICAgICAgIDBQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwHCQ4PDQwOCwwMDP/bAEMBAgICAwMDBgMDBgwIBwgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIAEMAeAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APM/GWnaJ+074c1Hw/qNndab4gjCy6BNazG4kku5Yg7W0qyScrKFVWZFOJhGcgErJ7V/wbkfF/X/AIRftrT/AA/ulure28ZWNxZ6pY3MJRorixjmmjchiCsiASJt2klZGzjbkfH+meLxPf6jdraWKfaosXVgIAbe8TKkruOWT5lVgBxlRnPOdj9jD/goJdfsF/t+6T488QWGo69pNsbqHVLa3vGWa8SeCSPfvkJEmx3DYfOdnUHBH22HwtX6vicqhJS5Ixai3eSlpKVr62d9NWruyd7pfHvFQlXo4+StzOV2lZOOqje2l++z022b/cT/AILLftTeB/gp+zDqnhvxJ4gttP1rxRaytpunfZpbmbUvLHzIqxjK/M0fzM0a5YZcDIr+bH4nBHlur64huGkZsqZWBON2Bk45OOpGMntXdftI/tba5+0v+0h4u+IGsaldXaavqM81qkrvhIS58qNVLHYqR7QFBwvaqOvatefGxYY9UtLW1kECmFLK3S3CxofvOqj5iSTnufbFe9kmUvL4cz3krybdlG2yStru7ttbHnZtmTxVTsov3VbV33bd/JWSRzPwj8P6lca1Htt447aRS7SOdqBNpbPHPABJ9B9QD6lc6DDANtrcrcMsRdwQE3DjlBkk9e+DweOlY9vp9p4c8NWtvatfNOxML/KNgj3AhQe5IGTyMYH1OZdtfWN1/q4txAMe3O9Rg7hjGCAducHGM9wK+V4i4vxuCxrdH3aVN8rTivfaV5Wu07apKz11e294XLcPWo3qaykrpp7Lp3V+915HZafDeSaJNp8MSiO6uY5ZJd+CPLEgww6lcybuO4/iIAW9Y6N5dxG8lobea2Cwhi48uVleQv7FmDAZxkADoRkcLpmpalaTRzGO4WGNx82DnnIGPp0+oB7VutrU1ppsdqzOqTAMW2bQoxxz9P5V+b51xtjsxTg7U4t3tFu+1nd3100tZK3Te/0GW5dh8PrbmaVk3bvdWVtNde/meoS+KYZ7eO8kvj9nGAttHGdznjgnsMEnj6cZyMWXxpa6r4sW1utPtZreRzGmVw+37pBPOPQ4OSABk9/KrXxNPb3En79lWFtqbeBz9fw/L6Vq219qBuFvLi0nkDLiOVuAMHg/Xp1/rXx8cRKEuaDa9Ox7TzDnVrfqd0vhnTND0ljI015G0qxMHJUuyjBYbSP72fqQM9zip4T/ALTuY4rCV7hmTPlyLiRjnHy/w+nVh+PStDQfHEI0uZr+OTznby1VUHJP3iQf9liMj+tU9Q+L+j+CrdZbgTx2szfZoWiTM1xJ2xzhFAzkk9h64H6Fk+ecVO+Kw/PNT6yV4ya093msm1baPRNtWi7eHi8HlErUqijG3RaNddba29e+m5H4s8GXXg54kuogVcZ89JPMikzggDgbSARkHOazvEv7OGj+MYYLm+1Sy0+7mIH2mORWXGOhxnfjI5GeDVLw98f3+I5uobS6u7JDjNlLNvGxG3K4/wCBHJx34ORiuq1rxH4X8PaTeaxr2qTtBIVEMawFt2d/mblVkJcN5e1VIBzJyCoB+5z7MeJaGCwsaaXtZN83KuZbJpSunFO99nZ2urLReLl+Gyt4mq9eVJW5nbrurNNrbddbPXV8r4G+F1p8NvENjPBf6fezpKJI5ZFdYWVXBAYEA4bHOOg57jJXU6tdaVJo0l5oGqWfi/wveosMV49olveafIRlYpwy7o5PlcAcrKsZIwMhSvzzMuKMyq1eTMqceeGlnDVfiv68j6bCYPD0I3w8pWlro/8Ahzh7XxTeaxaR3kdg0UkkSl0mUrvzjJxkFsjHK8HPFct49j03W9EvI7rULO2urVRcsxfdLb/MBygyxB3Y9+PY1V/aS+It5ovhzSm0+4kWPXGadr1GwzhVUBAw5G1XHHB6HArwG2vRc6p5cbuGzgnOOvWv0Dg3h+phUsfjLqrLRRb1jG3Kk++m6aurLZpnz+YYiVePsqcvcWu27vv/AFo9dzsNO1S6v7ZlWT93GCykcZP8+a9I/Zv+KLp4jNldaZdX088kam6htHuDbxBgQJNvKoMAEgYxnPXNeTp4pt9FsbiytfLaaVfmZhu3H09up6V9z/8ABEj9hb4j/GL4gXnjjQ4ZNH8JxxSaPda1NawzLLO7RFo4vNON6rIh4VwdwVhhiR9RxHmFLC5bVr1bcqjtJtJvorpN3fSyZz5bgJYrEwoxTvJ6WWvm9Wl+IkNnoenXjWAjhuFWUGUuT5cEj7gu5ckhDtwCc4C8+77y68OaZq1vb6vqVha31+uEgnYbgHZkU/T5ScnnpxzX2T8av+CCNjqfg9F+DvxAuo/iG8so1OXxBPK0dwZJIo2KtBH+7J8t8+ZEykt1jK710PhF/wAEwfGH7OHxn0vRvjF4i+EfiT4eeIL6aCxurSzkXVdTuUinlEBea3KwFSsk5jEpI8kKjMd238HxlXAYug8ZLGSrNKTcZXjO6s20mpKz3tpddVZ2+2o5XiqNdYV0VBNqzWsfK+sXv1/B3R5v8Fv2ENL+POnzT6PqUOqW/hu+W0vn8wCO3meFZFA5+YbJFII4LMMZYEDN+Lv7KEfhDSrnT2uNJFxkC23OJJEOQu9gv8Az1JAGRzX114S8D+Bf2Rvjf4msf7at9C1TxFHp0f2W9uI4bS5t0juHiubcSKpYZadHMbYEsW0qpUVx3i34kaX8DPi63iXU9C0nVfD2vBrmy1Oytft0tsN21pzE0jySRlgdjooKhcKhUkj5XEUeXlnGMuVxi1fS7cU3bur3s+qsfUU6FF03GfLe7Tt0SbSv20te+zPkjU/+CZ11f6FZR6FrVnrV/M6x3kxnj+zx7MYaJh8rKeQDzjAyK4H46/sg658DdLhj1S6aa8tYi14qyAQxxAfJ5ZY5O7oCechielfSH7QH/BUe/ufGNrY+DFgk+wSl5zNay24vICCGV1Khdqgghhg5UY74+VPif8Rv+Em8PXWtazeL/aUky3M7yuSrqSxaMHgKB97GDjBxg5qsoy+vmGMjhKd05OyvprbT0Xm9tfM8fOp4HDYeTiru3R6afm/66o8c8T+JF0q21ItKZV0vyvNKTKFgzyMsWAVccZPoRivD/id8ZLrxrrlv5KPHY2cJiijzyzHBZyCO5AABHQAnByA74r+NLPVvDpsdFsWt7O3vd00rndLOQjCNiMAKOXOOuRnPauDbUI4ooF2tnP71jlTntj/P4V/TeT5ZHBYKnhG3JU3eLlve1rrV2WrSSeidnrc/OeXnqOs1rLRr/Pvt950dp8Urqwnhkt7bT4LiH/VzCN3dDkkHDOVyM91I4FO1Tx1qXim/jm1LULrUJEGFM0hbYD2UfdUeygCsR7RdT2mzhJkP3ju3bvwxxUFv5kcjBty+hHGa9nmd9Q9lDoj2X4M+Mn0zWPsskK3FrfYgaEyGPeW4GGwcEHB5BGQCQcYJXmvh/UbrSNQguI53WS3kWVOejKQR+oor43iThOOZ144iCipWs221e22x0YHHSw0XTu7Xvsn+Z7LaeB5PiRY32n2uswtpkce5P7WkeZvNIyRwQsONp+ZTkcYzXA+Mvg1deDdQW8s4o7vT9iuWhbfszwWAb5ymejEY+YDPSvQ/g9ZzfFPwillpMMb61pLzSXNiHVZL2E7pDcRRcNIUUbXVQxVURujceifD74eXD62WuJo5LNomgdWVTvU7PkYMTlCSflA2nbnPINfM5pxticpzSph60E6UWla1pNWXvJqyber106aNHVhsrnWoxdPeXXp6fLY+Sbewktr7zvs6XEJbJBO0/Q+lfq1/wSx/4LSaX+y1+zNoPw51PRdLvIfDstw++fLSK8t3LN8q4UfL5pCnLHI69APzv/av0HQ/APjuLTfDUNxatDbRtqIYkw+ew3YiznK7SOehJ4wBXBTWcY0GKRkVm5O7HP8Ak19fmmVYbiXKYQk5QjLlnHRXWjtdarVN9eqZng8dXyzFOcbOSvF9V0v+KR/QHZf8F5/hbqHhS8ml0DUNUGofK2y7WFvlUqzo6cuTgKctyoAB4IOH8af+Cjfhv9s/4WaZoPh3T9Stbgyw3Saj5AafRLuGVZIZ1wSMiRFyD8sgYrwDivxz/Y98Gah8W/7csIdLutRt9LtxdM1suWtyzBB0GeRkg9th7Zz754WbWP2b/Cur3Olx3mj6gIJxbXk1w0Zhl8sqXKhgkn3FChlJXdkcFg34JnnDiyrOI4PDzvJOLi3/AHrW5rdn0s7q2mtj77L88r4qjKriaa5LO9r9F09fz69T17/gtJ/wVB+JXjHRYvgReN4Es9HuLK0v9at9Dea+uWIk8yOGaeeGIQyMY45mihjPyyRqZnUstfLPwl/aruPDX7N2vaLeTK2rWjINDkumJEI8xfNjAPXbGWZVOBnjByAfE/EHhC903xLJH4gW7GparbnUzNcMWuAG3sGcMckvtJ+b5uVPfB5vxBfNHPDCrN+7UvISflLnjj8Av41/QGX8L5fTyungOWMoJqTaWjlFq71b3tyu7b5dLn5/is1xFXGyxEW02mtekWnpsl1vstdbH1F8EfiXH4y0+b/hIGurtvOJa88394jOqqMjHzhVRTtJ5DY6DB8v+Nq3/imy1htcvZVjRpH0a2mfAYxZc4HA3Op4xnkkDPNee+C/itffC3xLJPGI5o/9Tc2zMQtwF46j05wea9Y8L6jfftHaqLHw/ot9Z3yIs/ntF9pU/wB7a3y/3QDx0B5GOaWW0sJi6uJw9OMVOzlK9kklq0rWWustVFxXVnDKpWkoRk3JLbTXW2nd+Wjep4VpOlT/ANjTL+4fcq/LM/CHrnp16/5zUUWi3CFRcKo3HcgIyrfj6H619OfFH9mt/h9oMk1/pEs11GiLM0Fmvku0hI3Yyo3A5G3k8jkDmvGdXdb6C2tVt0S6t4mUAhkGB0BUndnAJxzjHU162X42ljIOdLVLS6cWnondOLfRrez7rYmrKpTlyzVn2aaa6dbdjg21F5pifLjjJ+QsBxwO3p9cfj1qa8W5ljjjmZXVcsjY5Offv06Hpz6mrmteD7vS7Vby4YeTMc/ux359cdcHH0ptlbyzXnl2p86PIKZ+Uc4OOenJx712KL6lc8WrxG6dZNDMrfMFXruNFaUljIs+1gY2wCVaitDllLmd2e1f8E9rufRf2yvBusWsLTT6KLu8i2gkQsLSZI3O3nasjoxxgnHUdR7T+0JJb/s+eA4dSbVoUv8AUYVEFnJahZ5WOAG642D5sn249R55/wAE020yx+OV14g1C+stOtfDOlT3zLM5DXnymMxJg7tw3l/lDHEZwO483/aybxR488bWuqXUn262kjJVGuFVkYn5iAxHy8YGCcba/P8AMuG1m+fe2xH8KhGF1a/M25SS16fzb3WnW696jmCw+XQpRdpzlN3vaySir+r2Xzfk+A8aatN8QNRuNQub1pry4l3OpTAxwBz9PQDGKrT6VjS44SzLxkkk7R71TttPvLO7kWaAx+WdjMrB1B+oyD+BrfhRtZslVNzMowUxwwr9ApwSXLFW6WXkeDUk01qep/8ABO74/aZ8Av2kNNm1eSSPw3q1s2j6iyNsJSVgRKf9yQI3uqYyCcjuv+CgH7Vuh/Eu6utN8O3cWoRxyRs12oIVMEKsUeRk4Vck8jIHPUV8tX+gSRFtsa7mOHUDp6Cl0abGrwrextN5IVYYUAHTpn3+tfP4nhvCV81pZtUv7SmuVL7L3s2u6u7a/ketTzatDAzwMLcknd9+l0n2dlf/AIJsfFzxTqHi7xzeapNNCJJlghHkLsjIijWNQo9BsB9jz6Vmi2OrWxkk+aSMDcW7joKm8TPa6lKqKs1u6ttfzjyn+fpXQan4X/4RTS4LmC6i1CyukA8+NflDAcoeeoz3r6Clh4U4qnTVopWSXRdDyKlZytKXxM47X9Ms4GmuFmlkmEhKq0Xy4J5IOTnr3r7I/Yw/a68D/B34IabDrF9puh6pbyTW900DC4uLqIsHVioyxHO3bkAAAdBx8pzLDqke75VYdgMVj6loy5P3Sx4BI59BXi8Q8P4fN8L9TxDag2m+V2bt066a9j1cmzqtl+IWIo25kmtVda/1/SP1cvP2o/hv8WP2a7yLS7iHV5JpGS9a4ijYQhgdqLvJAOF56/eOOhA/OBNQh8YRap9hcSxpfTCDcP3i27FvLYk4/wBk7j3681zPhCe48D3k0kM3l2+oW0lrcDBdSGUgEgHsSMHqPfkHU+ANmT8SreSVJGhhjkZ4Vk8vz8IQEJ54yRk4zj0JBry+FuEaWRVK31eUpQna0dLq1/NJvs9P1OniDiCpmyjUrqMZR6pWv+bXyv8Aocz8Qxc6abbR5451nt5JJpd3UsflX2JChun96sSzvPKKrICVHGBwcV3fxm8VWt7rs0ccNnc3mSklyssjNEy/KUAJA4AHIyO3UGuHW1a5j29G+lfWWl1362PIpSvBXNbT75ZFX/nmORu6iiqemaTLFchW4ORxRVxu1oYVIxuavw18Vah4X1SGexuWgkf90xwGDKeoIIIPqPQgEYIBqW78Q3+tXcIvL26uMjJ8yUt70UUoRSSkt3v8tvzZdT4ix4hnk1PT2FxJJN9gtneDcxPlnBf8RuycHjk+pqjoFxJFGWWR1YBuQ31ooq+pEfg+f6GRqusXU+qqGmkbbgDmqsl7Lb6o0sblZN33h2oorF7nXyrT0HxXk1y7+ZI8m05G45wT1/kK9C1a1S28G3Ece5Y/Jjn27jtDlsEgfTt0ooraicuI+KPr/kcmkjQxJtO3K/4U2Ri0KsSS2ev40UVHQnqvU0tDcyRyK3zKyHIPOcVQ13Vrrw9cCSxuJrWSZWhZomKsUODjPb8KKKqTfKOlrUszGiG4LnknGTXVeG7SO4gi3orfX6GiilS3NMRsFzMz2MchP7yMEKw4xzRRRRJsyif/2Q==",links:["https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],maxzoom:19},{id:3,title:"Dark",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8VdE1S88J+XfebFd6ZdTPFIQCPLCuVD57Drj2/S58X4YbvS7G7WRG5IjZWyHDYPHHPTOc/nmpfGYg0qbTdPuJbiOCRi0d15hH2YqePl+63DY9QDxgcVoa94fh8Y+DII7IxIAqS2zFdqjjoQBxwT26/SgDz3w14euvEOoBbaJ3WNh5jggCLOcEk/Q+/FexRx+VGqgABQAABgD6CqXh/RY9E0SC1VEGyMCTAHztj5ifXJpbW0t/Ddk37wrG0m5nkbqzEAc9PQflQA/WtYh0HTZLqfPlxjoOrHsBWBoPxUtNTvBDcIbUyPsibO5TnoCex/T3qt4+guNa8QWVjMGXTmnjXCcPIWBycnjgBvpzXLanqD6de3XlS26TTB0cWynygu4cDPT7vGPbk5NAHca34w0zS9WW4kui0ttCyC2EZJbftbcP7rYXHzYz7A5PKeI/GNze29ztm32l3cvsAyp2BU249McZ9x3BrmSP1ozuP8vagAB5zznOc1Yj1e7hR1W6uVEhDMBK3zEHIzz6/wA6hEpERT5ME5zsG7/vrGaZmgDpNQ+KOqXt7HMn2e38ottVEzuDY4bOfTtit3TPjJBJE32y2kjk3fL5XzJjHcnnPXoDXHaH4ZvvEbOLOAyiLG9iwULnpySOa1IPhtdXUwtkuLf7csYlnhZuLcHOASM5JGDwO/PbIB3Xhbxja+KlkMLlXTGYHXEij16kMPpWDdfGEWmrTRHT5DBGxQFn2ScHklSOPp1ra0DwNZ6FZQK0cdxcQFiJ/LCudwwR+XH/ANfmuJb4fanqWuXEPkwWxUAjDkxhegwSSfTrzyOMGgDodS+Kul3umtF5d9/pMbJJtUBogQQec4z/APW96K4nXPD934YvFS5TY2AUZTkN9DRQBPqEF9e3NrYylrjyA0UBjO8yDcx9evtxgAZ6V6F4H0SbQbMxb5ZbaRRIhk+UxsScqExwOh69c8CqPw58FtoD3E93tN3nylXGfKUc5Dd85HT0+tdXQAVR8QxLJp7brj7O2CsZMioCxBx14z1x+dXq5b4naxaQadHayhJZmcSiNhkBRkZIx35A6evagDAu9e1TVX+1wy3EcSQ4+UyBXAwMhgic85PPfsKz7jwte3WlvcLat5cG7cYoxhcY9yx4x29eeCa1dH+IA85IdTt4ZIuNgtzHsiChsDr7n+LP1zgxXN5Yazab7O11KG4MaqEG3YBwvyYBIJ4BwADmgDnW0t4IbaWQxxpdI0iMzcYBIyQAe4IA68VCyYON6yIOrqCAv5gH8K3BJqNtZRoiztDBI4Bjtl3xscBlc87TwOMdD1rP1HF/Oq+dvuHONrkqQc9DkADuMetAFSGNHbl1AHOX3YPt8oJpk7DezEglmJPGPyHapXsWsSDcRSBc4wG2k/Q4P8q6H4VWceoardRvGGTydwk2g+U2cDnGeQTwDzjpQBqfCmK7slPnTGO1mYiCF+PNYDLMo68cfk3pXX2ekQWN7dXCJia8dXlb12qFA+nB/Emi0tZxcmaeUMdmxY0XCRjIJ56seBzx04Ayas0AJtz3NCRiMYUADOeB1NLRQBj+ONAi17QJg52PApljkxymOT+YGP8A9VFa00K3ELxuNyOpVh6g8GigDD1XxFF4fFt9sjmS4myWEB+TCnkksQD1HXmtLR9ettcg3wP/AMBYYYf4j3HFcl8VNOuku47iITyRSpsyg/1TDPBwM/NnjnGc8Vx1rcz6NP5sUsttdITtwmDz15PTqe386APaRmuL8d+G57nXftIi328u1XKRLI4+XHTGew53VtfD/U7/AFnw8tzfvG5ldvKZVCsVBx8wHHUHoOlbdAHkOoeH5tNZle3mOxjn91IjkY7nBT34zSaW0Wn7Lh/LdXDI0bTH51IKkMqoSOP1wR2rt/iiIodOtLh/IMkc21VmQsrqQSRwCR90elcpZGS41awH2WKGCWdA6Wq7WlUsARkfMOOo46e3AB0/w20G2WxS8ie9KqzLGJCUjY9C4TcfcZPoeBVjxP4LXWPElpcYdbWUFb1Ym2mXA+TOOvofYVu2F5b3Ubi2ZGjt28k+WPlUgDgduM44+naplJPWgDmPE3hCzlvInt0t4bhlCLGdoVgOgC4xk+uO2Mgmte2hi0sxQW8cCGIr50UEY438AnAyBnJz6DmrGp6Wmpxx5LRyQuJYpF6ow/oehHcGs1dGs/DKz3cjRwJLIXmcudrluBwd3TJwAe57GgDborntK8SRapdxmy1DzFuGdEhnHO5fmOMcgYyRn0+mN9cqOeff1oAdRjmgNn+VGaACigjIooAxfiJN5fg+7UFN0u1FDMFB+YEjJ46A1xng3we/iS7h89bc2cB/feWRk4HCZXucgnnpXT/FK3kv9GtLWNCzXN2iAg4weQP510GnWMGmWiwW6okcQ24Ue3f3oAdaWkdhapDCixxRKFRV6KKkoooAyfHGinXfDc8SKGmjxNEpXO5l5x+IyPxrN8B+FpdOvXvJ0lg+Ty4onCK3JyxITjHTGeevtXUUUAQadp0el2ghj3lQWbLtuYkkk5P41PRQDmgArhfiF4W1XxB4nC26yzWpiVhufbFE3IPU4zxnjn5hXdUUAeO6/pF34X1GNZYEtZgd0UkLsRIRjlSSemR7167ZCU2UH2jH2gRr5uOm/HzY/HNLcWwuQucgo6uCOoIIP64wfakvklltWWCRYpGwA7Lu2DPJA9cZx2zjNAEisHUEcg8ilqO0tI7GARxKFQEnA7knJP1JJP41JQAUUUUAQ3Fsl9H5cqh1znB7Ed6fuNFFAADg1YgiD2krH7y9DnpRRQBX3GjcaKKADcaNxoooANxo3GiigA3GjcaKKADcaNxoooANxooooA//2Q==",links:["https://cartodb-basemaps-1.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-2.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-3.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"]},{id:4,title:"Open Street Map",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4RFkRXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM4OjM3AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAABJEAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A9oEG5Rng96yr20aFy4GUJ6+/NW5riaCGIn7zZz1qZWW6tiCAW29PfFXFuOphNRmuXqYanDA+9blhKr26qDkjP8zWNNG0cjKykc8cVpaYSUHAAHU+vWrqq8bmOHbU7GlSHoaWoJ7mKAYducZwCM1zJXO5tJXZmakT5gGcr1/HmqNTXM/nSkjO3tmoa7YKyPMqO8mwoopQMkD1qiBAMnFKVK9R1rVtLFAiu4yTzz0qeazilUgqF9CoArJ1Vex0LDycbmFU1qFNym445GPc5qSeykhkC9QehoitJX5jzuBzuGcf/rqnJNGahJS2I7osbl89mIH0zViCz8yzaQ9TjH51NHprup85vmPIIPOffIqwImt7NoyR8vQ/jWbmrWRtGk7uUkMtLUQHJ53de2MVeAxSAZAyMH2oBrGTb1OqMVFWQpGab5Sc8cnrzT6Km5ViD7HD5vmbfm+prOurN3uAsSfw56+9a3z5H3cfrS7RnOBnpmrjNoznSjJWMyHT3NuyyHac9MZ7fWq1xYyQkY+YHv0rdprIrfeUH6imqruRLDxasc0ylGwwwaStybTopnLcr/u4H9KjXS48EMT+H/6q2VWNjneHnfQyTGyqGI4PSm1dvLOSHlSzR9u+KrRR+bIELBc92OKtSTVzKUGpWGrG7KWAyBTa6NLaFE2iNcfQVG9jA4+4F+gArL2yOh4V20ZgVPZsiXKNIcKM5/Krx0pTISGOz68/yqU6ZDgAFgfXI/wqnUi1YmNCadypdESlD5mV54DVYsmi8sorMG65YjP/AOqs6ElpVUjPXitKW2CW4lhG2Tbk988e9TJJLlKpttuSKV9IXm2nadvGR+NWdKl+9GcdsfrVCdJFYGTqw3fnRbztbyhwM47VbjeFkZqfLU5mbF9dG2QbMFj6/hWNNM8773PNTXt0LllIGMZqrRThyrzCtU5paPQuWy27RkyFQR2OOaguDGZj5f3aioqlGzuQ53VrBVqzt2klDMCEU5JI4qsQV61uw+Uke0DALe9TUlZaF0YKUtegs0hRFjg2lzxj0HrxSRLN0nZCT/cJ/rUDusV+u05ymAPxqyvmNLkrtA985rnasjsUrtoZDC7j982QOnP+NWlRUGFUKPQDFIgwNpOcd6dUt3LjFJBTWQN97kelOopFBRRRQAUUUYoADRmiigAoqOWeOEDzG259iahN/BtJV9xHbBH9Kai3sS5xW7LVB4FZ0V6/liWXhe3v2qObVC0eI12t65z/AEqvZyuZutBK7Hz34ScxumU9x3z9elVI5I/tJZosqSSAi81Wd2kbc5yaktpFjnV35A7fhXQoJI5HVcpam/Ecxg4Yf73Wn1ELiMxlwcgVVOpxqwHUev8AkVzcreyO1zjFasvDv9aRhkccVFBcxzDKHv6VPUtNFpprQx5dOEc8ah8q+e3TA+takQKRIvUKAM02OSO4Cvj5hnAbqKexwPlxmrlJvRmcIRjdxK19bG4iyOGXke/WsWRGjcowwRWpNeSiXy3CqmcFgCP1qhdhDLuR92ffNbU7rRnNX5XqtyCiiitjmCpraEzyhAce+KhpyOyHKMVPqDik9tBxaTuy5dxs8a3H8Jzx6dqktLWVE3GP5g2RyKktR58AD4ZB/CvPfvVsJtGNzfga55TaXKdsKak+crpayCZppPmyOnTHOasxtjjGB9aUNgAbgR7mgtGuOR+NZttm8YqKJaTvTUcOMqcikMihgrOAx6DNTYd0PoyfSkJwcjJPTFAb1BA96Big57UtNJA5HX0FHzHrx9KAFPrngUituJ9B0NMkLKOOfWiJiV+7j8KBEmQKDnB45pBz1pc460DMW/in80ySD5eg6dOaprjcM9K0tRnViUBzgY/HmsyuuF3E82qkp6GlqcykiFf4ev6Gs2nO7SMWYkk9zTaqMeVWJqT55XClA9TikopkEvnFQAg2jv3zUVFFFgbbJbeUwyhh+Nb0MwlQYPOBmucq7YXLRyFDk7un4ZrOpC6ub0KnK+V7GotvtIwQPUjrVS+vBEPKjJL92/Ordzcrbx7jyT0HrWFNJ5szPjGSTWdOPM7s2rzUFaO4kkryY3MTj3plFFdBxN33CiiimAVNaRrLcojdDn+VQ1PaJI9wojba3POM44qZbMqHxI0HkjsUIRWBb+8PT/8AXVdb2VhuboTtIXP5j3q+9vHK+J2346DGMflUdxYoE/cR4cHI5/xrCMo9dztnCf2dhkVwvIcghRkev0+tK8bXgSSNiijPGcH/ADxVJba5MjDb8wyTyKkR72H5QMD0yKfKt0yFUbVpJ2LlrFNAWDOCnuTmop2aO7jkwCDhcN9etWkLlAGXce5zilMSTAGWP5lOR81Z82t2buHu2QFpCAV2c+uaUO2MPtP0p+0AAAcY6ZpNoJI24A9+tQaDlUjk4pe+MfjQOOCaWgBuc8ZU0uKQIqkkDk9adQBC9zHG+wnBqne3zxMERQMr3H1pmqKUdHXoc5/SoJZorhxK64wNu3J5/GtoQWjOWpVesdiM58lpHGWZu/v3qvU00wkAVV2qoxjOahrdHJJ6hRRRVEhRRRQAUUUUAFTWpC3KFiAOev0qGgHFJq6GnZ3J49zRNHjOcY56VCylDgipZovIcYYMOxBzSq8vlkLHlT3waSfVFNdGQUUpBHUEUlMgKKKKYDkXc6r6nFbFpAsceM/P3PrWRDxPGf8AaH866CFwYxgjHrWFZvY68LFasBEhOQME9af0ORTW5/Ghs5yB09a5zsHZ65NJkYxmj5ivOMGlX5QB29aAIIJHKFCu51+9zjrRLE5IkT5HHB78U10ZLkTDG0/ez9MCmT3wRM7GJ7HHFXZt6GTaStIZPfPbkK8e/vnOKmtbxbkfd2kdRnNY00pmkLkAfSltpBFOrnoM/wAq2dJcvmcyxD5/I6IjNQ+ahkCBsk9sVBqF0YY1VQCW/pisdCBIrHoCDxWcKd1c2qV1GXKdIDt4NMe4ijBLtjHsarRzpJEIxncRxVC9QxsFJB9MUowu7MupU5Y8yHX1ytwRtb5R0GPpVKplQNb7gfm9PxqGumKSVkcE22+ZhRRRVEBRRRQAUUUUAFFLngj1pKQBRRRTAnhZ5GEe0P8AUZNa8aokaKYuSAD8vFZ2m7ftIz17fka2COQPxrmqvWx3YaN43ZBNaRTJjYF91AFZt1YtAu4cr3rbx6UySJZU2uMj0qY1Gi6lKMltqc3RWvLpSHJjbb6DGf61mTRGGQoeorojNS2OKdKUNyPpV21vjCNsmWX25NUqKbimrMmM3F3RpvqinBRT+I/+vVi2uUuGKqZeBn5qxKt2E3lTgYzu+Xr6kVnKmraG9OvJy1ZtdRjn0ppQKDudsH3p69KjuCPlBbaD1OM1zo7RrFcElwfUE8VlXdx5gCKEC9crVi/mEahYv4up/Ksyt6UOpyYirryIKKKK3OQlknaVMPyR0NRDrRRSSsNtvcuCNhb+YrEFe6n26VFHFNdvnk+5zin29wBE0Mg+VgcfXpU9vM9tu2xb04wd2MVm7q5suWVr7EDf6NcMoUlRjqPaqxBHUVZll8wFiPnPvUaum4+YmQRjOelUr2IkleyZDRWg1nFJCHjbBx0weTVN4jHkMcN6U1JMUqco6sjooIxRVEBRRRQAUUUUAFFFFACg4ORWzZ3MckSRj74xkVi1c00Zuvov9RWdSKaubUJuMrLqbSscnK4H1pST2GajYPuB+XApTJtQs+MDuK5D0SO9lMNqzKcNxj8xWC7F3LHqTk1avL77SAoXCj1HNU66qceVannV6nPLTYKKKK1MQqa1XdcxgnHzD+dQ06NtkqN6EGk9hx3R0WCCPn+X0xSMwHGetMhldgpYx7SgIx1qR3VVLk/L3riPVvpczb90mEcanLjP9Kr3Np9miBY5Yt+lMSRPtIY52/8A1qkv7hZ5VKfdC/410xTVkjgnKMk5PcqUUUVqYBRRRQAUUVJBGJZlRjgHP8qT0BK7sPtoJLiQKnAHf0rRj0uNVbed57dv61djjEa4BP404sB1IFc0qrb0O+FCKWurMj7A4SUkbduWXnOfTvVFy33W7V0oIIyDkVmapbf8twf979BVU6l3ZmdWjaN4mZnjFJSg4OaStzkAjFFFFMAooooAKKKKACtDSkPnM+OMYz+VZ9aul5ELYG47jxnHYVnUfum1BXmjRchVLHoBzWVfXm5PKi4Hf9Kfe3zqTEq7cjB5zWYSWOT1rOnT6s1r1vsxEoooroOQKKKKACiiigDSs7yOODEuSwOBjHTFR3d8sq7IgwU9c1RorP2avc1daXLyhRRRWhkFFFFABRRRQAUqsVYEHBpKKQG1LqcKcKGY+2CP51XGqFnAeNdh68c/zrNorNUoo2eIm2dJDIksYaPGPbtVPVJgsPld2/piqNrdSxERo+1WPoDTbyR3nId92O+MdqiNO0jWdfmplelAJ6UlTRqUUylNyg4xnHvW7djmjFydiGinOQzFgMAnOPSm0EvRhRRRTAKKKKACtix2x2bMT2JP5CserdvOogeJ+NwPP4YrOoro1oyUZFeVt8zsOhYkUynZ2MwXBByKbVozYUUUUxBRRRQAUUUUAFFFFABRRRQAUdqKKACiiigAooooAKKKKACiiigAqae4knI3npUNFKw7tKwUUUUxBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH//ZAP/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo3NjE0NWViZS03M2ZjLTQ0ZjUtYWU5Ny1hMGY3ZTlhOTA2ZjciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzYyNDYxMzAtZTBmNy00YTAyLThkMDUtMTAxODVjMjYxMzY4IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjNlMTAxNmEtMjc5My00Njk1LThjMGItMzdiOGY0Y2I3MGM4IiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTEyMDg1MTU4NSIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJmMWZjYzliLTdmMDQtNDIzNC1iYjIxLWI5MDc0OTVlYjQyYiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzg6NDArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAQCAwUBBgf/xAAZAQADAQEBAAAAAAAAAAAAAAAAAwQCAQX/2gAMAwEAAhADEAAAAfvrI6dr1ZrfJen4VmduppjrOpPboz116ymydJ0yLpnk0x7yXNLsSttIGiizRnscW4DocCrS1mKxq/P2ZPQYW6vWMKzzEXTMYduReqxht2e953gSDFr87Kphr1gBxVDK3ZNMIGlPa4qi3LL1uYwyRxF03nrvJq1gACR1xNK7E06X6CH19BFcO8yKvP51cuNSdKqycADocDdi9XTRX5u/xk2o1pr9WX0PL+l4UO5uyy7DZc6k6bhwAB1VG3H6nmvQ8WHctqoeTVl0wVawBux+lpT2eT9Pw49zwANJFibZqdYAAAA6HAAtzuPecCPcgWc1DuQOAAAAAAAAAAAB/8QAIhAAAgICAgIDAQEAAAAAAAAAAgMBBAAREBIFEyAwMSIz/9oACAEBAAEFAmgL88fMwbmisZ/VrlhNpEELQwwVXEZyQGcGksRPx87dXJOR4/YBRYJV9nimyiw1ksYRS0qvVagCCj4McCsm4MY20TCiysFrYLRDoMWThhYkupikAj2CJdtzk71GX+s4TJIeKrZUy5Yg+aQz3OrOgA+0CPeI1n7ltkqEpjXMTqRSTcYolTlIo9UFvDjsNt+8RalaUWp0RS35UZGQMBYNlYqZlAv7bvRb3gH0yWeyCXAj8KkbsPd6AMpMsrH0bddEwxnsLimSwVEi8C1Bc0v9GMlpfQDJDB1uZ3PAnIff/8QAJxEAAgIBAwMEAgMAAAAAAAAAAQIAEQMEEBIgITETIjJBMFEzQoH/2gAIAQMBAT8BdVy+37mlJBKzI6oO+yIXNCPpmUWImJ2WqiYgK/exVT9QaZAKjaU/1MyYmx+YNLa3cXTODcxW1uImQ4shLR3LtcZjkMwcVQv9wDkBfS2RU+U9dR3+o+ZnM9ZFW7iurixFCiyJmYMb2xNxMGJB2hdQeMBB6NVX+wuSAP1vhfg01GXl2XfSq3KxGwEd0MVWv31BXI753KAEQkVQ6Aa7wYy/xjoyedtMw4VPMYWJqch+FTFnKoRMOft74Tzuz1aQjjUZQ4ozMio1LtpD3Ij2ASI1+W2R+ML8xxqFAB7hR6dP/IJlyemsZixs7YH4PNTlFcVjtzN76coqcjLXIIexNdGl7MTHcubP4Vcr4i1feMeRvdWK+Pz/AP/EACQRAAICAQQCAgMBAAAAAAAAAAECABEDEBIhMSBBEzAiMlJh/9oACAECAQE/AVJTn1M/VxFLHjRjtFxcwPcZ1BuM5OlmHMxgzj3FcP1Pno9Q5lIj0KWMu9OIq7RUACzJZbb6hNeKqW6nxHqLjCz42JjKVPMNngzGCo0cWIXY8zaSLleGG4Fo3rkXcJiSuTrmIqoMg6aEivxnNa4l3cQeJcL3AwbrTMDuvQcTEnuPjtrj4v5gG3ryzA3cBK8iY2LCzpnHFxe6gr1oRc27eYGs8Hxy/oYibzAKFDTIu5ZiQ9mKNuuUMWoTlDB14ZuqiqFFD6SAYf8AIBWpF/f/AP/EACkQAAEDAgUDBAMBAAAAAAAAAAEAAhEhMRASIkFRIGGRMDJSgQNicaH/2gAIAQEABj8CLYyvAlOatRwyhSNSyhtzdNpqAw9qIqZWkyO6E+UDnqp00T3gCfjyiX/aLvCt4Tng64QoYvU9Oowpg5djyjs07IHNK0mUXCkqYh2FpUf4omp2R7dH7Jrdm4jgoNZ7b/3EuFoU/jNd8yh4Ye6d8uMWuB3soHnolHJDgOVDhGEbjDuskBOG4sjmP2nS4njqIioKg1CytODhtdEjhS7fA7goNiYtARzMLXDjpajWuyLjc4CsTRZWx9KccxgO5RsWoxboceApJ9EwTVVt0U9f/8QAIRABAAICAQUAAwAAAAAAAAAAAQARITFBECBRYXEwkbH/2gAIAQEAAT8hDtDD3jURRXn1GdBejzFaYD2strgZOYpoFmfiXhU9/czZHCw8DWo4PqYMV8kJg4eDiNWLl1WIBtlst3Fdw7pAqObDHQrnbgh7CwqjKFG7DxGCyxbI9oJvaga8moKkXzEtMPzMv1CUXNyOKleAmkM37vpUYh3fEv0G21QNddCgQjasy/3HoLfE08RMUWdvgic0Y6Ku5ylhSAbjJMdWimC6uZyr5dwdG39MtjsZU8WFLc8QA22TCru1c9iENmZWOBODLIeh+fNmYqNnyWBkGRrTGwGc1mXHvmyus/zL4R5a7ucqLKciy/poyPHRijdLMY3o6zL8i8reemMqhSSuihUIhVjeRXuPrs/cf5Lpk9GKzezpxw2QayXao13GArrd+0itzfCxCG7Cg+uzFLQuY9c+PX4cGAKQamDn8R7nqwvIpHn8/wD/2gAMAwEAAgADAAAAEFTd6EMr0j2vaa0FntdF+3zUtv5k99sMNnkxNssg8bcFptjJr/s3BsTttltl9iVtttttt//EACYRAQACAgECBgIDAAAAAAAAAAEAESExQRCBIFFhcaHwMLGRwfH/2gAIAQMBAT8QIaUC/jUYhLS4tqwHulyb84gOzv2v7iP2MA/nNzZNoIyVtwTwespQd+IobfiZOMfMVEF5PPvudwmMW+0DYz6Eoh0ZgjB4SRVXElx4D5+0cU0PEAVaXJsgOHefKVYU6f8Aei4S7hd8r9++0BpyxRDjpVyqxLdGHxGbroVdxxOHEEGvfv1QsRVTmhzf39zFlDzt+fpAWHLXVEudec+cHz8CIHEvyqHnj9RWjXRtbk3BBYxahp4g8qX3ljLTX30i2F3j3N6dvFbHcrHZLndFKuEi2QDE3keiXOHDKQWrWP6tiUcK1rvGuPAL736ho88RHuehDenEUGu91FsdcGBzmC9ZGEFp4KK8Es/+GztuYTrNIrqgvKX+b//EACIRAQACAgICAgMBAAAAAAAAAAEAESExEEEgUTBhcYGRsf/aAAgBAgEBPxCm2UAiMAQKKg2InWEtR11DHOFmoF3EBMSpjLyEIaSgZzDaOPfqCB+sIQQHf9lUiLLTnx0+CtHP+QgvLFMqpQobGSpSFs47SIUhSDBFAL3wVGVGdQEG3gAgr7IrdvNAty9Rj6meSRUTqPAJR1A3b4JZTKBxYVa4+kMStkdrdQu8E+juFYj9QKA/PkQdI52cnQpAEL3KCunGP7IWKd7zEBJGfnwVQYDqEWji4+oRqgijnZgieoxKF34ZEdsoB8NbZqWr2lCuROfn/8QAJhABAQACAgEEAgIDAQAAAAAAAREAITFBURBhcaGBsSDBMJHw0f/aAAgBAQABPxAYVIx2r5f+4u3ghNovOLyoa8x0ZWFVVq1yXnmeA85ocUlB5Q7MmBZOA2I+SvX30ybKHZTX9/jCcWvGV1gYWiT9ZwhisIl2T5zViPA32yyHyZ/RPzh6Cps2OKP3nB0aiMfjBxNAtgnTycXw49jVSvPO+evxgmRaF2aDEQOFKQ2/24QPFToDg15ZjMBoSk3d+/GjnWAABo6DACwlzjJTGE+tFX8GbCQKWyWHg3iXIC6CNHjFehqhK5aABivcURInyYabYcFQNzrXuW5ezD1A4XB9LysCCxd8eeHXC5EfVFavUvtrXXnNaxqd7s5ye5gg6Usvx+816Toc3BJEPyykEYO24TxQgrs0PXn684wu4E91V/7xgzrItLCF6MEgWB+7x94zCFwToa9p3/Xq9CadEumERvH/ADgdzitlJ7e3f7w6pKOrbQ30bZ1MMwRDiIcJSuu/b2w9gB4OsQJUuvOJaAOm1bPr7yuytPvw11y/wc2OB9zGCc0jYa4efnKFHnkfh49JwBE3q0c0T7mk/wB/WSFSpaBvjs6+LgWohSEb41o+8iRMnjHn/XOBLy3S79ybD+zHhNbaKbSeZNfwuvSWQRk2PCf9+8RuE1ZvqJjUGD3T1fj026hAKiMOPlzT0oFEQWp3kS0/NF5+vR0wXf4ez3MaHiYL26FtmBWJG2tCKzf7/GAvKeH+DDLpTPlgh8NO7fY6MrgVXosyDQmrxyJzMa41sAHBT9ZCpoRwAT1TAzTsadf7OMnyLUbT3oRyqzS7rTjbHrz6kKWTRrY9/GLieA9Lwf4ZxkI60x14uF0g7Zq+35xFKvgD9erGG4igenFWV449v83/2Q==",links:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"]},{id:5,title:"Google Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4Rn+RXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM5OjE4AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAADkGAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8AqW98IroP5/H8Q2e3FUNZst4N3bt5kchyzYxhzkkYP86pRgvI2JH/AO+uta8F8ZbM6dJBGd3+rYJ8xbG0c10UnOl7z2Mp8stOphWbMCVPGP0Ne1/DHXEuNJXS2fMsHQY/vM7en9a8ae2ltLxkkQof9oEZ5rvvhlOV8QpEoC7s7s8FvkcjHriurFJSp8xjTdpWPZ6o6vIItMnZhkbGz7cGr1c54q17TdNspIbyUhzGWCIy7jww6E+xrzkm3ZHS3ZHjPiq8juLyTyuVBKE/7WWrkpYWZi2M1tardi+vJpIotkRkYoNuCRk4J98GsqQspPUV69KLjBJnJJ3ZQYBfc1LA4Dgn1qCMNK20datRWkhYkkADkmrXck1EIMYbtinAgjjpVBpTGoXcQB0GetMS8ZW7Y965ZYyClY0VN2uamKXdsw3oaijnR03foKWSZFHzdMdO9byqQcL3JSaZKW3nce9MZ8OAD0qAXK5G0HHvRv3Sgjv2rlniFyqMHroaRhrdjnlycCozJtFMYg/xcj3oikVwQRkV59Sbm7s3iktByyl22qPrTjhDwaYzrGuEXnPXFMZi6+lQVcnEjSjaDUkbeWh3tnn0rPDsrYUkfjVlnwnPPNbU684O9zNxUlYsmZScjmnLKrZHpVJ22oMdxTBcMq9OfWtIYuopXewnTjaxpg5paow3ZztI/SrCyMzDGAPU12LGU7XZl7KXQl70YpAwzg4zSk4Ga6IVFKPNchxadijeWUc54OHrNfT54+q8fUf41pn5m3eYQf8Aep4dACXYMPrmuRY2LeqNPYu25n29oznGK1UTy0C+wFQ+fEiEoqg+wFIt2rHD8e9XPF0muXuSqckywIhCWKnPSo3kkJUoxR1O4MDj9fWpZGwhzVZZgz7T0zgVNaKjFU2y4Nt8xZuLmSVEedwzKoG4nJP1Jrs/hhqEB8RQwFIy7btr4GRhHPXNef3hPkZU5AP9KXw/r02gaxDfwjc0eeMgZypHcH1rWVNSpcqIUvfue9+P/FLeHtNVbeSMXEuduW5GCuehB6GvEtS8Q3WsX5lupmkPT5mJAGTwMk8cmtDxz4vj8UG0kSPY8e/cuc9duP4R/drk4ePnP4UsPT5I3a1CpK78jah8qR9skoQEcHcAKhvIlBZYnWTGMMpzn8azxI8rbVq3CSmFPJ9K1jBqTlclvSxn21vIsmdpz9K0LiURRgKM8849KsJGoJPes25l+XAXnuc9qyxFRwhaPUcFd6kWfNZnfcEGcH+lQkqWwCce9WVUyWRUJgbtxbPtVVotpGHz6jFedONkjTm1Lb3CqB5XGetQNOznO4n6mo8EDBOcUAegqJyctwuTpLweTmpUlI53HP1qqn3sZqXAA9ajYqLJWfNMjk2UmciomO0jmgcn1LXmgnml83jHFVg/r1p27LYA5pE8zHg5JNTrKrDDZFVQSpxil3cigFKxoBQyrxx6ioJkAf5cEHtUsMhMWxY93HrilEbEjcmPxq1TnLZFOSsMWMJyafuccdqdNtjyScDufSqj3ipHuVdwzjrjmtfqtRuyBVEaSDcgz1pWBKHBx9TVazu1uE6YYcYq1ICyEL1r0VRUIO29jFzbeplTswkKj/x2neRLg7wUwM4ORmp4oFF2pkG5ecjOM8Vc8+zRo/tz7wXAMmCML6YH415apTk3ZGzkkZS+WcBiw7U+aALGGQ5HrmtfUtKspYhd6VL50ATL/Ky7W5J+8c9MViPNKIymz5enUVLi46Mdy2LvfC77eVx365qkZC5YnuTUbPJEWQ8jjJXoajDE+oGa1q1ZzspdCIuK1RaScfcb7pG3/wCvUN5biNBKhyrfp2qzFbRmPzFYs+MhSc1KYWmtGjdQpHTIwOtduGUorlexnNp6ox0dc57VI0q44Paq9wnkzFFdWHqpyKI8sDXSSXra5WPtyenuauoz4M7Djsv6VguzIeM5BzWjYajGF8ufJ+uMd/U0O7TS3EatsdjGMnkVFdSJJwGypGDxSmRQd6HIP8VViDgnB4rz6tdwXs0WlfUkZl8gIi8Dvn2qq6bqnGdmRjbinpFvUMAee2K5JVJTepViv5PAz361IkIIxt/WrUMAdwGNa9vpsUjbAV3E9DjP8qjU0jC5gQ2hkdjjABx1qYWG47T1rqodDKqx8sdz0/8ArVFNpjIchcH3H/1qnmNFRRys9j5fbIqltXbkdc11N5p7SYjHD+g//VU9t4ZjjzHOjBjyCRx+op3JdJt6HIGFiAfXpU0aBEyeW9K6Gbw/J5pjijcgNkHHBH5VD/YNzHOWlQiL6H0+lPmVheykmYbS/NjHNJv7MP1rQvNPCXO1FbA6nHt9KoOu7kcADJzQmZyTT1L0E6eVhOo6ipUk8z61RgISFnI45/KmNqCQ4bBVffjP05r2qEm6a5jF7lW8uACE657VArGQbUO4Zz6VQnuHkmMjcH0HQUGdlb5SV+nFKlH2cVEp6mmsckUyFPvcMK011AQJm6bHA5x/gK5tryUgfOQQMZBOaaZncYeR3H+02a05n0FY3LjWEZcRruz/ABZxj9KzmneZw0jbiBjOMVU3U9G5pJAalpKUkQg4ZWDKcdCOlW7ud5P3gHzkku3qT3xWRG5DAitOG4YqBsjYgDhhnNYYilzrmW5UXYlmKBdoCkn1FRKscR8yZlC9QuR/I09I/Mck9B39Ky9RnJn8sdF+X9TXPh6bm+aWwMmn1UqWWBVVcnBxg4/A1GmrTeWyOxIbHJJyP1rPYgDk0wGu/bYViwGJbPJq9BHmLccCqsSqoyam8/CFVOMCqTEQXLYYjvmp9OiEzsHXJ7Aj61UDGWXLHvWxo1lNcXo8kYXv09D61E/hb2HHV2NS4t4rW3XaxwfuhiPXmqMczMNxQsM42qM13tp4QW7jRruTzAM/Ltxj8Q30q1f+BbW3tT9hXdKe2SOx9W9cV5dPE0F7s9X3OyWEqtcyWh56DGTw3PXYSOPwqzBbTXREcBCnv1H8qsr4Q1mS+mEUHzIGbG9OQD0+9T4tK1+wugPs3lk9BvjPb6+9buEE705K/qYKEl8SdiGPSrxZNwcEduT/AIVq6Y0trqMRmjXLkJ+8B4BI5Ga63T9EjOnKs8W+4XOTux3PocdKqS6VE1xG8qbmXBDZI7/WuOOITm3L0Ol4dxSsaTMnlEr5ZGzoOuawb6SZpSqJ+YPtWwtuzDbF2OSPasrWfMtAJV4YdentXOtzWWiJLXQpbtRNJMAfXcfp6Vof2WdhL3LSEf3Xz/Sqmmat59uPKfEf93HufakuNUa1Usj8EYxjr+lVrcSStcsxCAOY/OXevJBYZ4qpqeowWqeWyq+fUA+nvXOXeutHdmaOPDkbTz15z6Vm3GrSXsh8wfQf5HtS5ddSZVlFWJbq8d4cCMB26nb71gt5hBA7j3rYV/OU8dKzrkraLluc969KhQjZTtdHDOTbKs0z21qd2CSeM9OlY81w8z5Y/RR0H0q1qVwXjVc/KcN/Os4fM3Wu2PmTYftPUijG4Ywc06Zgvyqc+tLGy456561QEJBzg0o4qaQofujn1qHnPWkA7PvT1YCoR6U7NO4WLSSirltMDKMGsxRU8bNGwYdqHqrAby3G5Qhb94OrYrEvoXSZ36qzE5/Or5tYYow7M+/0BFMYTNC3lxMU91OalPS62ZNtb3MRgxp0StuFaE9o7QCTawYDnI46VUjBRuadi7hK7AGo1LnntUkoJ/8ArUxHCkChIRqaLZG+1K3tgcebIqZ+pA/rXteg+HLbSbGMEbplzvOSN3Jx3I6GvHNEuEj1a0kzwkiMc+zCvV7PxfaQ4jxz36f/ABVefmUp8qjHY7cF7NNuZ0gh322Ryx/xpixTkhnb5QeRgVSPiG0uWVjLGoHqwH9as2msWIkMrTpwMYDr9fWvE5Zdj1PaRvdMvQ3CRK0atubk9MY9qS6JltCWGG7fnVK51nTWlRo7hS2QcF1/xqG71y1jh3+Yn03DP86PeTFeDiUdEu52la1mP72L7/TvkjpWvqWmNeFLqKTy50wpbGcoMnGM461xsd+kuqrfW/KH/WBuv3cDGK2NV8aQ2FqZIbaaQjo2wFQcHrhvau105OalSW5zRnFwaqPYxdY1y58P3nlT2nmCT5lk8wDIJI6AH0pkHiaC6tWmaPEvGFyeOcdcVweua1NrWqPdzpGrHIAQEDG4nuT60mmXOyRl4wcZ/WvT+pxdPVe8ee67U9NjbmlTzvMj+R/XrUF5c3kqhTNvB4+6BUOpTJDs2HO7P9KpwTBpADgDvWNHCuceZkznZ2QB2DFJeWHAp6o7t8o6+9OaFVJkXcQDkfWo7i5K24yp3Htj3qaVDnnyy0IlJsWW+SwHzcuep9P85rFuL9rkgtxxjFWZLd3tSWVh6jHvWSB8/FejFKK5VsiUWmxJbfd3MG9cYGKrFB9Pap4jtjYnHeonk3HocVQxpQgZpURmbC9acoJHANSLI0fykDBoENGVO1hUmEK4ximedgkjHpTWYv2OaYA8IwWPSmKcU4OdpXHFIKQyQNT15PWogtSJxVWJNUOzEjAIHdhUouREuC3ttU1Ha/6RFNt++u3A9arSKRIQ3UHmvOxkve5UUu5aFyZM7guzpt9qT7LDecRLsdfUAZ/ziqwOO1WbV3EmY/lPc9azpYiUN9gauZzxGN9rKR7EU0wo3Pet1rFbrcWXa/8Aezmse9Q2kxjBzj2r0KdaFT4WJprcjV/IKlMhwavw6q4H7zII7jv9eay0ZpH5qdo12e9XOCmrSFsa664SNu6T8/8A69XDq0yRZWU7SccMf8a5XIQZ71p2cguFMTcYO6uWphYcj5VqUpM0W1SYkP5jAg9mOf51NFqctxgSTOQPVj/jWe9vlgEOO2KltoFSUo5+93x0rzLIpNnVaci2A3yyq0HqGyD1/DqayPFviCC5tY7OyKgFhIzR454YEZB+lQ6rqDxWYt4j8o68e4PpXMBCzgOcD1ruwmHvapI2nWtH2cRVIdcHhvWprfMco56+hprweXhlOV9cUDIXf029a9I5Se5vfOwOMDpTYZgpBJGCcVQ307f8n40kktgOmt5kbagAKkDg+vr9KS/W3VAXwMdBxntWRYXgEiB3wVIA47cVqzxw3qqxmwR1+U/57Vi5SSdlr0AzpZ3aQBVfaevHy1mC0eI5YZ/Cte72xZWNuPTFJbxtdnZ5fQ5zuqo33e4FBVAiyUUnOORTAiyybQig+wrQe38qdkdMryevvUTCCOdWQY9eT6U41Iy0QFWSAxNgEio5FynvWhcqj4YNgfSqMzIowpzmtGgRVA4PrmnKcHmkOc4pUjLt1wKgZKyKRlelNEZJpAxBxTw2TTQhQmKXAFKcjrSdaoCW1me3uVlXquf5V0EFlBrCF7WTN0qZePaeT3OTgdTXPMDsKjvW/wCCAI9ddj2hJ/8AHlrlxMFKF+xrS1lZ9Ss1s0ExjlXaVODznmrMUA+8D1q3qziXVJ3wceY3P/AjVbzxtEYBzXkpNuyG0othcyyJE4iPPGelc1dbmldmPzZOa2L64UIVBBJ7jp2rGnLNzjjPWvXw1H2cPe3M5SuxsH3qtPynWqkakkVOwOzAroQis/3q1vD9sbq+2A4IG768jisoIS4GK2dLuEttVt9rApvXJz/tCk03F2BWvqbVzpkqSNkY9Bx/jUC2jJy3IrtFgjeDzt+FZd4568ZrC1J0Dv1wcc/lXgptux2TpKKuc7LCZCsYOSaqaharZoqg5Yn9Of8ACp1uUXUxvPA64+lQa1cCW6jK9Ao/ma9eMZQcYR26nLo02yKNytpt3dW6Y7YqvPkJgdDUYmw+cVKW85QK6LkWKo4qS5URuADxjNKUp1yrM4xzx2oAqF/QVPbiWX5Ix834VGIyhLMCM1s6BHHJdgFsDuM89D0qbpK7Gk27Iv6Rp07RDzVy3pkcdfetk2LjgHmr8T+QGXg46YqUP5kiqnUkDmvJq46bfuaI9OGAjb3nqc9f2kvkHJ27ep4PY1hzW8gAfduU9sYr0fULXyrMGTdkrkAfQ1xmqIsSvIQ3OOPyrow2M9pK0zlr4f2exgudsgO3ge9PMS55FWnw8IkB6VWnzEcIMgjvXo2scokkKmIsvGBmqBcq2Vq9O22xJOMtxj6iswHHFS9xomb95IWPGalWJT1fafpmoQ/SnqCx4xQBMyYAwcgULSLx1p4Az1qhDTyK3fC+5LqaRf8AnmR79VrDCHFb2gAxTsAM7o8/qK58U7UmaUfjRbuwXnb5erE9Pes+8mS0TcceYegrTvHWIPI/G3Jrk9SvftVydv3R0/IVhhsPa05fIKj1aQ0z5bJAPsac0iyL9xRxjgVVzT0Y13mZNGgHIpzZx0pYSM05yB2oAgLLGfU1HA/lyK/oc0503ZbOPQVGF7k8UgO2sPES/wBmiOV87Rjk+w96ytR1cXMgSPIXufy96wUkZTt3YTPPHanySpkbOawWGp8/P1NHVk48rJI5Ee/3HJU/4UXI81gRnAot4No3nr2FSSKwQ44ro6GZRIG7AxUiErUZBD/jUyDOKSQEroOuKc8oBBWNSPcU8gEemKa0Yxwc1QitcShwMLg+wp2nyiG4WUybMZ/ix2NI8XrUZiHpUtDOsPiK3SQOWDDuAQf61La+J7d5lI2pgg/NgH+dcV5eKaoOQR2rljg6SVmjo+s1ejPT7jWxd22WkXgcEntj61yWtXgkXYrZz0IP0qrYXzEeTN8y7cDt6DHFQ6gVMo2DCj/61Y0sJyVL9B1MRKcbMs2zpNbFBjcO34057Uupx6d6zrWYwy5Fb7AFDsX5jx1r0W0kcpzl8zhlix8q4Offmq2DjNbN1YTSHcV/Uf41myx+X8pHtU26sq5BnFPVyOhpCB3puAOlAFhXz1qQNiqqk5xUqHJ5piJ0c5FdTo8MY083TH59/l/hgGuPjfmtnT7hf7yjaOcnr06VjXjzxsi4PldzVvovtMMkYON2ecfWuXutMmhlOz5h68D+tbcupwHKgPkfTH86zp7pZGO3rW+lrEamc9tPGm512g+4NIisMZ71pxGJ2XzN4A9MVDc/KxWL5l6+poAgQ4PSrC4cYI5qru55696nicA9KABoW7jFRvGCuB161caVOhzVSSZF6HNDBEDI2KRVCMC34VMsoKnGOneq8jZcmkMvx3UgXK0Ndl1II61HBcLEnuajaZGPOc44p3JJIVR5wHPGf61rGzhe3HlL831PrWGvLD1zWhYyNbybipI9ccd6aBkD/JxSK9S37Zfdg4P/ANaqinnNAFk4PSo2AHXik3cUFxikMYy8Z70scJI5GKaxzT1koACgikVjyMjIouGR8Mgx6ipVxIMHrio2Qg4osAWcXmTqCOP/AK1dBJGEQktgAZPFc/byLHdKz8KM8/hV2+1ZJIjFGM7hyT+PvSSjuwdyvfzAnET5XoeO/NZ3XrQRk05RQAD0pdmelSrHn61IsRXmiwXK3l881MkdStGrLuB5+tIh2nmmBTToKuWv3qKKlAI/+sf6mox/rKKKYFkdDQv3qKKYFM/6x/8AfNTR9aKKSBiyVSfqKKKBj0+6aY33qKKAFHSk/iFFFAE8f31+taaf6j/PrRRVITIr7/VJ+P8ASqa9KKKHuJCnpTTRRSGJ3pR1oooAni6int940UUwKcn3BUH8QooqEMkHSlXvRRTAsx9an/5ZtRRVEkafcP1pj0UUugz/2f/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo2ZjdlNWMyYS1mODAzLTQ0NjktYmQzZC1kNjYyNGRjMWU3MWYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDFiZjkwZDMtZWVlNy00YzVjLWI4NjEtNGNjMTA4OGU0MjY5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTQzYzI0NTctY2Q4OC00Yzg3LTg2ZDYtZjRhZDExYjQwZmYxIiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTE2MDczODM3MyIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmYxNGJlZGJkLWJjMWItNDQ4Mi04Yzk1LTQ0MTZhNTlhNGU2MyIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzk6MjArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAAAwUEBgABAgcI/8QAGgEAAgMBAQAAAAAAAAAAAAAAAQIAAwQFBv/aAAwDAQACEAMQAAABru7NfdFXrfO0/Ifo+cNCwyWSGgeXpFz7+XU+yom6mTsrWYrcZZId1fWtuRewBz7F/NfnPJAu4lZBJ1zZpU/WpDyL90sues3apSaVZVBjw7h52tFOvFYUC01K+5iQ7YCyZIyoJs0ru4zXW5crdecG3daPqLF1aK2FQ6POpnbpVtOjOAZcDrOqy5olg9n8117hyti6xK92stI287S1r9QRWnkzINAkdXfFtkYIt76w9SNeY7rkX131OaIwJUW1cKIr1BcjYQZg/wAWmbxhWPR0CaWLHon43q3TzAtQYl94fYsXM1+c+w84qVosEto/w3x9lCFhOaRFnRhTJRABIitLSFcbkTgkMmVk1q8yCkjgjk3I4sVep4kkSDQxDJzLsH//xAAnEAACAgICAgEDBQEAAAAAAAABAgMEABEFEgYTIRQiJAcQFTEyI//aAAgBAQABBQLuLsX6e2pK/KeVchFS4u3/AHX7JkdhXJlC40mdvj2fJn1iWA2b3k0STNEI4ckIGcF5B/Cc1y/NPynKN+Qky6O2RgTvtgkzZORHuraiFaZJQY1DTRLGHZyXiHqVywqWA+O7FvWMp8L9Utji+gPjzEW+MlqqknrW1c9souFS1l5TXk3luVoV77cShF8a4ee5JZ8RPSt41LWsQ0l4+ZpkoW7nkQR5bX1mW5gybGEb/aNipeP2rJV9ZC6bx/yaKjQXyul1ueQw3I/K/IJHijvFqifkC4GKIp6dDnb5O8UYimeGCNu14LC+v+dHc6V3aoHVnlkbIrRgkXVx56PqV9EPEy4N71nCnpykjekTn3kr9nAWkrW+Ytx9rcjNPruJIwM4qzDFUnevLR+JcsNoK2Kd5xC7sct7GkXYP+1KEYh7NLp8aEwAqGxo8hZocob994oG1vEB3TlZHew8pk+5YmIx5T37ESdyxb4r71hOIdj2tA3+jGoOH+v/xAApEQACAgEEAQIFBQAAAAAAAAABAgARAwQSITEQIEEFExQwUSIjMjNS/9oACAEDAQE/AXAfj3mHg1HYAczuAbjUbHXUVSRUVAJcNXBjUCfJ/wAx8ZTuDDx3BiYGIbtop2vzGNm4TuiUBcuXL4lyzN494MgEbITN4qBrgcDqMd3PkLU494uNTGxifT/iPiK9xvFeFNGE+dLhfK1iZfhxAvG1zHpjv25KqbFxOYSFbmNlC/xmTIW9QHPnS6tcKbCJ9djmbVJmoL3NZlYftkRclLUDfmD1BbHE23CAD4UXFJx8iEk8n0EEd+nT/wBgjGvOBgj/AKupqGUmlhO7nzo3wItt3MpwZUtZ0YPODhrhbcbP2QfTdff/AP/EACoRAAICAQQBBAEDBQAAAAAAAAECAAMRBBIhMRAFEyBBUSIyQhQwM2GR/9oACAECAQE/AaWej9R5BmsAIDSutrDhZ0I7ipdxlWtVzhuJZqKkfJMt1DNnB4PgMw4Bjay1jkcRPUF/mJTet3UOvAcjbxG11TLt55moCptrYyysW1AJKk2JiKoqXuanc9gQ/thYoxx8a6nt/YJ/SN1nmU6ZK1H5h01jORjEeo1nDR97EK3M06GtcZ48WjeuI+otc7hBW7LuA4jZXBP3MzfN26aEsBk9TaAxcfcyfF9fuJNNQU/U/czMz1C2utMN3KfUlJ22rgf6lmorKbqc5hZrKh+J2MTbmaStbCVM57mfPfce5awN/BiMtgysE9R07Nbv/MOncdyhDU2T1PT9OufdzLtKHsDfX3L9IMg1/wDJsWsAATmY+GuB3A/USxqzlZp7HtTc3jXLlA0QBmAaKFHC/XhxugTZlswOWI2HImfzDB41n+EzT0+8/PUCBV2r41dfu0nHYmhpZTvcRU9sYHgzWrfZZsXqBbtPZzxFyygmHzrOUCj8xahUNqj+yyBu5+r+MxjjwIVDDn5/Xw6Pw//EAC8QAAEDAwMCBQIGAwAAAAAAAAEAAhESITEDIkEQUQQTMmGBIEIjJDNDUnFyseH/2gAIAQEABj8COm/1ftxe6d4Y41Gw4HuFqV6jWPcNoN5TnEKojaows9Jmyjj6L295VjfuowFp6+oC7Rw6nK1/EueXaZcaAe3Chwp/pM070o4U9ZRtKElQMjunO1TSF+G9viNM4c1AFEF4teTx0LXTV3UqTZS0yAiLShS4Pdyt9jyE6TYLb6UCAAVudUqTgoEHc7lZRAyvMaI0+XlflterXOQ+yDPGeSdI4c03KexrqZiyLtRgLHYeboDSpcR25Ti8qGC0oLb1pmf8lUNze4WJC0vDu05p5+Uag6fay02aQMzNX8Sm+D8rTEtBJyf+Lc6XNsFP3J4O0DAR5V1iFfpUwen1Be2EBp/KlOEHanFsyidUms3kqFfHZHygas7lMT3CAi6k4UC/TRdwJ/0nOtCqn4UKh/6bxBThpR8JzlPKLpn2TJpY7mpTUHOTiMyms5yetQ+0SU0Bp8v2VxHXehBV7z1pnae6tjlYl/eetkKiv6HHWVdETbP0SwwcKTnpK//EACUQAQACAgEFAAICAwAAAAAAAAEAESExQVFhcYGRscEQ8KHR8f/aAAgBAQABPyEF6Jyv4c9fzLWBwWcqfuA2E2szgPkYtresuwrTymG+Y1NOLmr0gmONtwMbLi61MXTcB/pGqRnHKcmqHx5PkCrsishN57zPoCFHFXGIwh440vzGM3Vg3Gh0XGIEZeZYKuOYvBLhR8xMwvGJTKF+xWnY2lU39xsiWHSPccnPyDYqYHdxlqAOL43EgOCKdmAv7OBqxBshbrKK5M9LgY/oWzgvAsohBxSy0Ef00Yt4wPrCR3nML3+UoIX0GpWo+Q7QWJK7ZT0rrE3HwWX2+zn+ZtP75l1c7RK0We5ZKYlquGakFKlwmdzxER5pLy4Ix65esqOXWDmMwUe8GN6l9SQvPntWotaeUqZF8SAYN7DVNmAda7VMeRBHslhzc9ZfzT/kyw2F4n9kXOkRnmJwZVthwPs6Qi+gRCW9Ohcd/Efww7sdI+Wa8BjQZXBdAzE4uajmhYqmcSiB7su1kObRXivZzqBZodAmZwcnWCYBdIOE8VL3X5nTlae0uhF8usx0ohaWllQs3V4ZxmPpMKDRjxN55RqqrhtWUKKSsbcaOJhGIYVGU5v6Jov/ABB7pfNWYXjX7JeE25Wy3E7GPB8mZCntxAPQODmGp9sQBiBdmoXZB4h7oXGlwPsMOs2F2CidL+EBWmen1UfZseF+ZYUxomIblla4cioUIIRVlkOcRaxDKXkLW2Glk0Apn//aAAwDAQACAAMAAAAQmzVu8s1W1nzW/vxGlh9XjIpgwdesdisODvLuOoM7ZARAtGWxX8OTVLDMHlpsxtg0ECD3/8QAJhEBAAMAAgIBAQkAAAAAAAAAAQARITFBEFFxYSCBobHB0eHw8f/aAAgBAwEBPxBOpQiVUsSnKNQii1cXg57lRZofvAVdxLREg7FLq4mAiIeUItmRqBvr3FZ+/HdMV2ESw7KJDewOJc4Z3SonpMjb6lIpuCMlgjmXseARyBhlB1OJbqHEOYWKWwsjTAwHy0oC0SsiVOIodxBcd3/kOAs77/GBm6cz9SWDg9zU1U3WBKnzKlVLbBsusYsE+xvyzDBgNj6vUEClg+3+IqN04icKK2WXLnzLqXGR6cwU1gfDJAlvyRiy18VcBujZwipXqGx8Is+fymmpdtsuGe7GXDslq3gZS0NWsdqP99ZGkDicLleEWuhiJ4OPCZC4N+C4hxEO4eGoLhCEQYFcRL5nU7+wAmwi1PpP/8QAJhEBAAIBAwMEAwEBAAAAAAAAAQARITFBUWFx8IGRoeEQscHR8f/aAAgBAgEBPxClS0ns1cIzKUSqjiP9MlfrOkJXEHFc1no94XrB9qK++sqG2ghmqnmbiBwPTJBleeN/uaQDHD7fyMKYKeksIB0ePTRlXGyQCJms948FUu7CfORpvcuQC4xt50iXmakriUy2LK83g6EY2nHeACWbz3iE9zHu2sqxTElNMG958+JYNtRtXStYXAVKdu3idYlZAONvH5jC4N5QByIBzKGUxMykTLT0OXdgPM/wV+IMw0vU0Zc9J29es11DjAOZN0Neu+J0Ujw/qO1I20Da8c/MDUwunvqP+f7DuJcZhnbYeGZoqrg2miY2l1HBN0TGptr/ADSWTsgp0i+zQK9CI1hEGVYTk806y2LaUDQ+4Xils+PfSMDL+X2yiI5rXMBEtvNdJSwJbrox/YLemUnDit5tCScjXv8A8mn8pfvCsYYY2ly0I0jcJLS8tuOmWtI4CtnDZx6eby2AQVv+VC3p+44AaasJYAlbRwcw9NfiOKlYLh69lfduBzAGYasaiBp6/cABUaebxhNMrYEuFawuukQrgft6wZrpEYNtMQiVGIGkrqjXJcunLrKmmZUDCXBs7y248wWotuYYbJrK/IzFcE2gDNrn/8QAJBABAQACAgICAQUBAAAAAAAAAREAITFBUWFxgZGhscHR8OH/2gAIAQEAAT8QZzF2xILVog4HQ4OUaVRAFG3SCJLv04n9Q/GUe1r2Au0Mdpaj4XBriNt5J1++c9Hh6cb6mKRr7/XHOFIK+jJppB3H1fGLJUoQYVwjhp94ikDwBzjHQzlmjnERp5JvHzTZpAL3h376nXf94zOXIrDZuId+MtwEQpgJeA15wV1Cug6fZ0fRgpCDQ0Yu3l0/EyFAFBkPBr44x4KV0jGzAT4zcoSE4wcVHRGFaSzQNtbriKawl5dHrHZUbLTz8ZHmxAo7+3YEpz6ibT+1oYSJQRN0lMNPCyxvIcv9TA/FAraJyhv25ahvE0ODDZk4nR4Trq7wOVEhIT2vJXv3kLjUGD/3LHFjBBFlkeR16zm7RQor6694YKtoFJsRiJx9ZWVL4SR98fnHBVhgaebXqc/eXM0Q7gb/AE/n4P8ArDdPYXn5uIspoLQ+QNGCvCkq+LHwYOdDBFmcvd6xQKER5yH7bdrkXC2aWUFLDhezzgitpQBUNQ73g/VwoIugPInXeEfnDHUoks52aompASMupq2JyF4ZOb6sAAEUCbATWtk494w/fqI9E8F1kIBg9sGlfD/GHJVa+E+MnJe2S+zprO/8MXEJUA8HaBftnR8aQvH+845WzV5f8ywYNk4KHZeXmes1PDNAzbR3XPFB9o0R3UidjLvL5mWGUmhFT2x8tu0rB1bcfQ9YUyCVdQNkH6PxiijV1WbVQ3S8+8r/ADgBz52+8YaRtAu/vJVc4pqa6wjwWx4W44O0+M2SdF86OdjV6T2YFdEkpD2RxP6xSFBKVHRcG3Xajiu5KPJPzrX3hJXelBTdOwlPeS6NqrAee5DXjGeUoeHj+P1w3BXEaTi/78YHSpeQ6gzjUwGMk9fUm5tMQ6VgEj/ObRrbtiNkpQuucVC0wU0TC5hgcJOJ8pzi0hEjboH3m6msBaBxm0Y+LjCQGe2/Rx8L5y0pBB6ChF7ZvD7tJqhIg/WPAEQwxLnQe/3yKZLDrY3wl/3KhWSmniJPGNIj3MGxxu2AJPWn5yKEh32wQVT0vOQKCwG3E+/wZOlEJpebPrKCRpGT6yhCMIg24jVS7N8MOeDgVXl840mtjOjlvFg9XrJMD1hLBeNGMATLadE8OT4tacCY3L10b0oHPr3mnQp6zXR54cVwad/vhyFboP2Y6LGSgpzw5wxQ09YWKB6JctNq6u8FRK2zHMUDGxWOEY9XClcTQW2+speVQsNOveKpG1OVec54JbjAYPYc/Of/2Q==",links:["https://mt0.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt2.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt3.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"]}],eG={class:"base-map-button__content"},nG={class:"base-map-button__title"},rG={class:""},iG={key:1},oG={class:"base-map-control-setting"},aG=["title","onClick"],sG=nr({__name:"BaseMapControl",props:{...vo,baseMaps:{type:Array,default:()=>tG},title:{type:String,default:""},defaultBaseMap:{type:String,default:"Open Street Map"},controlIcon:{type:String,default:""}},setup(t){const e=t,{mapId:n,moduleContainerProps:a}=bi(e),{trans:s,setLocaleDefault:d}=To(n.value),{setBaseMaps:l,baseMaps:o,setDefaultBaseMap:g,setCurrent:_,currentBaseMap:C}=FP(n.value);jo(()=>e.baseMaps,B=>{l(B)},{immediate:!0}),jo(()=>e.defaultBaseMap,B=>{g(B)},{immediate:!0}),d({map:{basemap:{title:"Map basemap",setting:"Setting"}}});const I=_n(()=>70),E={layer:MO},S=mn(!1);function k(B){_(B)}function R(){S.value=!S.value}return(B,V)=>(Mt(),Je(ut(Uo),Tr(ut(a),{btnWidth:70}),{btn:Ie(()=>[ut(C)?(Mt(),Je(ut(ui),{key:0,tooltip:t.title},{content:Ie(()=>[ee(ut(f8),{class:"clickable base-map-button__container",height:"70px",width:"70px",onClick:R},{default:Ie(()=>[Nt("div",eG,[ee(ut(yw),{src:ut(C).thumbnail},{default:Ie(()=>[Nt("div",nG,[t.controlIcon?(Mt(),Je(ut(S2),{key:0,dark:"",small:""},{default:Ie(()=>[fo(Rn(t.controlIcon),1)]),_:1})):(Mt(),Je(ut(Zn),{key:1,type:"mdi",path:E.layer},null,8,["path"])),Nt("div",rG,Rn(t.title||ut(s)("map.basemap.title")),1)])]),_:1},8,["src"])])]),_:1})]),_:1},8,["tooltip"])):(Mt(),pe("div",iG))]),draggable:Ie(F=>[S.value?(Mt(),Je(ut(bd),Tr({key:0},F,{height:I.value*(Math.floor(ut(o).length/3)+1)+48+10,show:S.value,"onUpdate:show":V[0]||(V[0]=j=>S.value=j),"is-resizable":!1,title:ut(s)("map.basemap.setting"),width:I.value*3+24}),{default:Ie(()=>[Nt("div",oG,[(Mt(!0),pe(mr,null,ki(ut(o),j=>(Mt(),pe("div",{key:j.id,class:"clickable base-map-control-setting-item",style:fi({width:I.value+"px"}),title:j.title,onClick:G=>k(j)},[Nt("div",{style:fi({width:I.value-34+"px",height:I.value-34+"px"})},[ee(ut(yw),{src:j.thumbnail},null,8,["src"])],4),Nt("div",{class:Li(["base-map-control-setting-item__title",{"base-map-control-setting-item__active":ut(C)&&j.id==ut(C).id}]),style:{"font-size":"14px"}},Rn(j.title),3)],12,aG))),128))])]),_:2},1040,["height","show","title","width"])):wn("",!0)]),default:Ie(()=>[Wn(B.$slots,"default",{},void 0,!0)]),_:3},16))}}),lG=Vn(sG,[["__scopeId","data-v-da52311a"]]);class cG{get id(){return this._id}constructor(){this._id=`${ju()}`}}function uG(){const t=ju();return{get id(){return t}}}function Jc(t,e){try{let n;if(typeof t=="string")n=new Function(`return function ${t}() {}`)();else if(typeof t=="function")n=t;else throw new Error("Invalid prototype source");const a=Object.create(n.prototype);return Object.assign(a,e)}catch{return{...e}}}function hG(t,e){let n;return{...uG(),type:"base",getName(){return t},setName(s){t=s},getData(){return e},setData(s){e=s},setParent(s){n=s},getParent(){return n},isComposite(){return!1},accept(s){return s.visitLeaf(this)}}}function Ng(t,e){return{...hG(t,e),type:"leaf"}}function dG(t,e={}){const n=Ng(t,e);return Jc("DataManagementComponent",{...n,get type(){return"dataManagement"},get fields(){return e.fields},showDetail(a,s){throw new Error("Method showDetail not implemented.")},getList(a){throw new Error("Method getList not implemented.")}})}class av{visitChildren(e){e.getChildren&&e.getChildren().forEach(n=>n.accept(this))}}class BP extends av{constructor(){super(...arguments),this.rootDataset=null}visitLeaf(e){return this.findRoot(e)}visitComposite(e){return this.findRoot(e)}visitRoot(e){return this.rootDataset=e,this.rootDataset}findRoot(e){let n=e;for(;n;){const a=n.getParent();if(!a){this.rootDataset=n;break}n=a}return this.rootDataset}getRootDataset(){return this.rootDataset}reset(){this.rootDataset=null}}class fG extends av{constructor(e,n){super(),this.sourceLeaf=null,this.foundLeaf=null,this.sourceLeaf=e,this.typePredicate=n}visitLeaf(e){return this.sourceLeaf&&e===this.sourceLeaf?this.foundLeaf:(this.typePredicate(e)&&!this.foundLeaf&&(this.foundLeaf=e),this.foundLeaf)}visitComposite(e){return this.foundLeaf||this.visitChildren(e),this.foundLeaf}visitRoot(e){return this.visitComposite(e)}getFoundLeaf(){return this.foundLeaf}reset(e,n){this.foundLeaf=null,e&&(this.sourceLeaf=e),n&&(this.typePredicate=n)}}function kM(t,e){const n=new BP;t.accept(n);const a=n.getRootDataset();if(!a)throw new Error("Could not find root dataset");const s=new fG(t,d=>d.type===e);return a.accept(s),s.getFoundLeaf()}function vc(t,e){const n=t.getParent();if(n&&n.isComposite()&&n.getChildren){const d=n.getChildren();if(d){for(const l of d)if(l!==t&&!l.isComposite()&&e(l))return l}}const a=new BP;t.accept(a);const s=a.getRootDataset();return s?gG(s,e):null}class NP extends av{constructor(e,n=[]){super(),this.functions=[],this.foundComponents=[],this.results=new Map,this.typeCheckFunction=e,this.functions=n}addFunction(e){this.functions.push(e)}visitLeaf(e){if(this.typeCheckFunction(e)&&(this.foundComponents.push(e),this.functions.length>0)){const n=this.functions.map(a=>a(e));this.results.set(e.getName(),n)}return this.foundComponents}visitComposite(e){if(this.typeCheckFunction(e)&&(this.foundComponents.push(e),this.functions.length>0)){const n=this.functions.map(a=>a(e));this.results.set(e.getName(),n)}return this.visitChildren(e),this.foundComponents}visitRoot(e){return this.visitComposite(e)}getFoundComponents(){return this.foundComponents}getResults(){return this.results}reset(e,n){this.foundComponents=[],this.results=new Map,e&&(this.typeCheckFunction=e),n&&(this.functions=n)}}function Gp(t,e,n=[]){const a=new NP(e,n);return t.accept(a),a.getResults()}function Q2(t,e=[]){const n=new NP(a=>!a.isComposite(),e);return t.accept(n),n.getResults()}class pG extends av{constructor(e){super(),this.foundComponents=[],this.typeCheckFunction=e}visitLeaf(e){return this.typeCheckFunction(e)&&this.foundComponents.push(e),this.foundComponents}visitComposite(e){return this.typeCheckFunction(e)&&this.foundComponents.push(e),this.visitChildren(e),this.foundComponents}visitRoot(e){return this.visitComposite(e)}getFoundComponents(){return this.foundComponents}reset(e){this.foundComponents=[],e&&(this.typeCheckFunction=e)}}function jP(t,e){const n=new pG(a=>a.type===e);return t.accept(n),n.getFoundComponents()}class mG extends av{constructor(e){super(),this.queue=[],this.result=null,this.checkFunction=e}visitLeaf(e){return this.checkFunction(e)?(this.result=e,this.result):null}visitComposite(e){return this.checkFunction(e)?(this.result=e,this.result):(e.getChildren&&this.queue.push(...e.getChildren()),null)}visitRoot(e){for(this.queue=[e],this.result=null;this.queue.length>0&&!this.result;){const n=this.queue.shift();n.isComposite()?this.visitComposite(n):this.visitLeaf(n)}return this.result}getResult(){return this.result}}function gG(t,e){const n=new mG(e);return t.accept(n),n.getResult()}function z1(t){return"removeFromMap"in t&&"addToMap"in t}function yG(t){return"removeFromMap"in t&&"addToMap"in t}function Ih(t){return"toggleShow"in t&&"setOpacity"in t&&"moveLayer"in t&&"getBeforeId"in t}function vG(t){return t.isComposite()}function _G(t){return"identifyGroupId"in t}function Pw(t){return(t==null?void 0:t.type)==="dataManagement"&&typeof t.showDetail=="function"&&typeof t.getList=="function"}const J2="dataset-component";function bG(t="component"){return`${t}-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}function xG(t){const e=[],n=mn([]);Vu(t,J2,{components:e,componentIds:n})}_d(J2,xG);function Db(t){return Vo(t,J2)}function AG(t){var e;return(e=Db(t))==null?void 0:e.componentIds}function tC(t,e){const n=Db(t);if(!n)return;if(e.check){const s=n.components.findIndex(d=>d.check==e.check);if(s>=0){const d=n.components[s].id;return Object.assign(n.components[s],e),n.componentIds.value.splice(s,1),n.componentIds.value.push(d),d}}const a=bG();return n.components.push({...e,id:a}),n.componentIds.value.push(a),a}function wG(t,e){const n=Db(t);n&&(n.components=n.components.filter(a=>a.id!==e),n.componentIds.value=n.componentIds.value.filter(a=>a!==e))}const eC="dataset-highlight";function CG(t){const e={feature:mn(void 0),source:mn(void 0),dataset:void 0};Vu(t,eC,e)}_d(eC,CG);function nC(t){return Vo(t,eC)}function Ob(t,e,n,a){const s=nC(t);if(s){if(!e&&s.source.value===n&&s.feature.value){if(s.feature.value=void 0,s.source.value=void 0,s.dataset){const d=vc(s.dataset,l=>l.type=="source");if(d&&"hightLight"in d){Yc(t,l=>{var o;(o=d.hightLight)==null||o.call(d,l,void 0)});return}}s.dataset=void 0;return}s.dataset=a,s.feature.value=e,s.source.value=n}}function IG(t){const e=nC(t);if(e)return e.feature}function MG(t){const e=nC(t);if(e)return e.dataset}const zb="dataset";function SG(t){Vu(t,zb,{datasets:{},datasetIds:mn([])})}_d(zb,SG);async function kw(t,e){const n=VP(t);if(!n)return;const a=sv(t,"list"),s=jP(e,"list");n.datasets[e.id]=e,s.forEach((d,l)=>{d.index=l+1+a.length}),n.datasetIds.value.push(e.id),Yc(t,async d=>{Q2(e,[l=>{z1(l)&&l.addToMap(d)}])})}function bA(t,e){const n=e.getParent()||e;Yc(t,async a=>{z1(e)&&e.removeFromMap(a),Q2(n,[s=>{z1(s)&&s.removeFromMap(a)}])}),n&&vG(n)&&n.remove(e)}function VP(t){return Vo(t,zb)}function sv(t,e){const n=VP(t);if(!n)return[];const a=[];return(Object.values(n.datasets||{})||[]).forEach(s=>{const d=jP(s,e);a.push(...d)}),a}function rC(t){return Vo(t,zb).datasetIds}const EG={class:"row-container"},TG={class:"btn-copy"},PG={__name:"table-td-copy",props:{value:{}},setup(t){const{copy:e}=Q6({}),n={copy:fO};return(a,s)=>(Mt(),pe("div",EG,[Nt("div",TG,[ee(ut(Cl),{onClick:s[0]||(s[0]=d=>ut(e)(t.value))},{default:Ie(()=>[ee(ut(Zn),{path:n.copy,size:"14",type:"mdi"},null,8,["path"])]),_:1})]),Wn(a.$slots,"default",{},void 0,!0)]))}},kG=Vn(PG,[["__scopeId","data-v-94841ed8"]]),LG={key:0,class:"grid-row"},RG=["title"],DG={class:"value-cell"},OG={key:1,class:"grid-row grid-row-full"},zG={__name:"table-td-layer",props:{item:{},view:{},field:{},label:{}},setup(t){const e=t,n=_n(()=>e.item?e.item[e.field.value]:"");return(a,s)=>(Mt(),Je(kG,{value:n.value},{default:Ie(()=>[t.field.inline?(Mt(),pe("div",OG,[ee(ut(jT),{readonly:"",rows:"10",modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=d=>n.value=d),label:t.label},null,8,["modelValue","label"])])):(Mt(),pe("div",LG,[Nt("div",{class:"label-cell",title:t.label},Rn(t.label),9,RG),Nt("div",DG,Rn(n.value),1)]))]),_:1},8,["value"]))}},FG=Vn(zG,[["__scopeId","data-v-b9f907c8"]]),BG={class:"table-show-info"},NG={class:"table-content"},jG={name:"detail-layer-info"},VG=Object.assign(jG,{props:{item:{},view:{},fields:{type:Array,default:()=>[]}},emits:["close"],setup(t,{emit:e}){const{mapId:n}=bi(),{trans:a}=To(n.value),s=e;function d(o){o||s("close")}function l(){Ob(n.value,void 0,"detail")}return(o,g)=>(Mt(),Je(ut(Uo),Eo(yo(o.$attrs)),{draggable:Ie(_=>[ee(ut(bd),Tr(_,{show:"",onClose:l,"onUpdate:show":d,width:400}),{title:Ie(()=>[fo(Rn(ut(a)("map.layer-control.info.title")),1)]),default:Ie(()=>[Nt("div",BG,[Nt("div",NG,[(Mt(!0),pe(mr,null,ki(t.fields,(C,I)=>(Mt(),Je(FG,{field:C,label:C.trans?ut(a)(C.trans):C.text,item:t.item,view:t.view,key:I},null,8,["field","label","item","view"]))),128))])])]),_:2},1040)]),_:1},16))}}),UP=Vn(VG,[["__scopeId","data-v-b9180281"]]);function Lw(t){return{id:t.id,...t.properties,geometry:t.geometry}}function xA(t){const{geometry:e,...n}=t;return{id:t.id,type:"Feature",geometry:e,properties:n}}function Rw(t,e={}){const n=dG(t,e);let a=[];const s=g=>g?Promise.resolve(a.filter(_=>g.includes(_.id))):Promise.resolve(a),o=Jc("DataManagementMapboxComponent",{...n,addToMap:g=>{s().then(_=>{var I;const C=vc(n,E=>E.type==="source");C&&yG(C)&&((I=C.updateData)==null||I.call(C,g,{type:"FeatureCollection",features:_.map(E=>xA(E))}))})},removeFromMap:g=>{console.warn("removeFromMap not supported")},getList:s,setItems(g){a=g},showDetail:(g,_)=>{tC(g,{component:()=>UP,attr:{item:_,fields:e.fields,view:o},check:"detail"}),Ob(g,xA(_),"detail",o)},async addFeatures(g=[]){a.push(...g.map(Lw)),a=ky(a)},async updateFeatures(g=[]){const _=g.reduce((C,I)=>(C[I.properties.id]=I,C),{});a=a.map(C=>_[C.id]?Lw(_[C.id]):C)},async deleteFeatures(g=[]){const _=g.map(C=>C.properties.id);a=a.filter(C=>!_.includes(C.id))},async getFeatures(g){return a.filter(_=>F$(_.geometry,Aa(g))).map(xA)}});return o}class HP extends cG{constructor(e,n){super(),this.name=e,this.data=n}setParent(e){this.parent=e}getParent(){return this.parent}accept(e){return e.visitLeaf(this)}isComposite(){return!1}getName(){return this.name}setName(e){this.name=e}getData(){return this.data}setData(e){this.data=e}}class UG extends HP{get type(){return"leaf"}constructor(e,n){super(e,n)}accept(e){return e.visitLeaf(this)}}class HG extends HP{constructor(e){super(e),this.children=[]}get type(){return"composite"}isComposite(){return!0}getData(){return this.children.map(e=>e.getData())}add(e){this.children.push(e),typeof(e==null?void 0:e.setParent)=="function"&&e.setParent(this)}remove(e){const n=this.children.findIndex(a=>a===e||a.id===e.id);n!==-1&&(this.children.splice(n,1),typeof(e==null?void 0:e.setParent)=="function"&&e.setParent(void 0))}getChildren(){return[...this.children]}accept(e){return this.parent?e.visitComposite(this):e.visitRoot(this)}}function Ru(t,e,n=!1){return n?new HG(t):new UG(t,e)}function $P(t,e,{zoom:n=15}={}){if(!e||!t)return;const a={top:50,bottom:50,left:50,right:50};if(["Point"].includes(e.type)){t.easeTo({center:e.coordinates,zoom:n,duration:0,padding:a});return}a.left=a.left,a.right=a.right;let s;e.length==4?s=e:s=$G(e),s&&t.fitBounds(s,{padding:a,duration:100})}function $G(t){if(!t.type)return;let e;return["Feature","FeatureCollection"].includes(t.type)?e=Df(t):e=Df({type:"Feature",properties:{},geometry:t}),e}const GG="Style Control",ZG={area:"Area",line:"Line",point:"Point",symbol:"Symbol"},WG={title:"Layer",id:"Id",type:"Type","min-zoom":"Min zoom","max-zoom":"Max zoom"},qG={title:"Style"},KG={title:GG,add:ZG,"back-to-default":"Back to default value",layer:WG,style:qG},YG={color:"Color",width:"Width",opacity:"Opacity",blur:"Blur","stroke-color":"Stroke color","circle-pitch-alignment":"Pitch alignment","circle-pitch-scale":"Pitch scale","stroke-width":"Stroke width","stroke-opacity":"Stroke opacity",translate:"Translate"},XG={setting:YG},QG={color:"Color",pattern:"Pattern",opacity:"Opacity",antialias:"Antialias",translate:"Translate","fill-antialias":"Antialias","fill-pattern":"Pattern","fill-outline-color":"Outline color"},JG={setting:QG},tZ={color:"Color",pattern:"Pattern",opacity:"Opacity",width:"Width",cap:"Cap",join:"Join","round-limit":"Round limit","miter-limit":"Miter limit","dash-array":"Dash array","grap-width":"Grap width",blur:"Blur",offset:"Offset",translate:"Translate","translate-anchor":"Translate anchor"},eZ={setting:tZ},nZ={"raster-brightness-max":"Max brightness","raster-brightness-min":"Min brightness","raster-contrast":"Contrast","raster-fade-duration":"Fade duration","raster-opacity":"Opacity","raster-hue-rotate":"Hue rotate","raster-resampling":"Resampling","raster-saturation":"Saturation"},rZ={setting:nZ},iZ={text:"Text",icon:"Icon",position:"Position",placement:"Placement"},oZ={"text-font":"Font","text-color":"Color","text-field":"Content",image:"Image",color:"Color",opacity:"Opacity",font:"Font","letter-spacing":"Letter spacing","line-height":"Line height","max-width":"Max width",transform:"Transform","halo-color":"Halo color","halo-width":"Halo width","halo-blur":"Halo blur","fit-icon":"Fit icon to text",size:"Size","icon-opacity":"Icon opacity","icon-size":"Icon size","icon-text-fit":"Fit icon to text","icon-text-fit-padding":"Icon-text padding","icon-image":"Icon image","text-justify":"Text justification","text-anchor":"Text anchor","text-offset":"Text offset","text-radial-offset":"Text radial offset","text-translate":"Text translation","text-rotate":"Text rotation","text-pitch-alignment":"Text pitch alignment","icon-offset":"Icon offset","icon-translate":"Icon translation","icon-rotate":"Icon rotation","symbol-placement":"Symbol placement","symbol-spacing":"Symbol spacing","text-max-angle":"Max text angle","avoid-edges":"Avoid edges","sort-key":"Sort key","text-orientation":"Text orientation","text-padding":"Text padding","allow-text-overlap":"Allow text overlap","text-ignore-placement":"Text ignore placement","text-optional":"Text optional","icon-padding":"Icon padding","allow-icon-overlap":"Allow icon overlap","icon-ignore-placement":"Icon ignore placement","icon-optional":"Icon optional"},aZ={tab:iZ,setting:oZ},sZ={class:"layer-control__title"},lZ={class:"style-control"},cZ=nr({__name:"style-control",props:{item:{}},emits:["close"],setup(t,{emit:e}){const n=e,a=t,{mapId:s,callMap:d}=bi(),{trans:l,setLocaleDefault:o}=To(s.value);o({map:{"style-control":KG},"circle-style":XG,"line-style":eZ,"fill-style":JG,"symbol-style":aZ,"raster-style":rZ});const[g,_]=Pf(!1),C=mn(),I=mn(void 0);let E=Wp("");go(()=>{_(!0),I.value=void 0,R()});const S=()=>{I.value=void 0,C.value=void 0,n("close")},k=B=>{d(V=>{I.value&&I.value.updateValue(V,B)}),R()},R=()=>{const B=vc(a.item,V=>Ih(V));B&&Ih(B)&&(I.value=B||void 0,E.value=B.getComponentUpdate(),C.value=ky(B.getData()))};return(B,V)=>(Mt(),Je(ut(Uo),Eo(yo(B.$attrs)),{draggable:Ie(F=>[ut(E)?(Mt(),Je(ut(GT),Tr({key:0},F,{right:"",show:ut(g),"onUpdate:show":V[1]||(V[1]=j=>mo(g)?g.value=j:null),onClose:S}),{title:Ie(()=>[Nt("span",sZ,Rn(ut(l)("map.style-control.title")),1)]),default:Ie(()=>[Nt("div",lZ,[(Mt(),Je(sa(ut(E)()),{modelValue:C.value,"onUpdate:modelValue":V[0]||(V[0]=j=>C.value=j),onUpdateStyle:k,trans:ut(l),mapId:ut(s)},null,40,["modelValue","trans","mapId"]))])]),_:2},1040,["show"])):wn("",!0)]),_:1},16))}}),uZ={key:0,class:"toggle-buttons-container"},hZ=Nt("span",null,"#1",-1),dZ=[hZ],fZ=Nt("span",null,"#2",-1),pZ=[fZ],mZ=nr({__name:"toggle-show",props:{item:{},data:{},mapId:{}},setup(t){const e={show:DT,hide:OT},n=t,{callMap:a,mapId:s}=bi(n),d=()=>{const _=!n.data.show;let C=n.data;C.show=!C.show,a(I=>{Gp(n.data.getParent(),E=>Ih(E),[E=>{E.toggleShow(I,_)}])})};function l(_){const I=wl.getters.getMaps(s.value)[_],E=g(_);let S=n.data;S.shows[_]=!E,Gp(n.data.getParent(),k=>Ih(k),[k=>{k.toggleShow(I,S.shows[_])}])}const o=mn(!1);go(()=>{o.value=wl.getters.getIsMulti(s.value)});function g(_){let C=n.data;if(n.data.shows==null||n.data.shows.length<1){const I=n.data.show==null?!0:n.data.show;C.shows=[I,I]}return n.data.shows[_]}return(_,C)=>o.value?(Mt(),pe("div",uZ,[Nt("button",{class:Li(["layer-item__button",{_active:g(0)}]),onClick:C[0]||(C[0]=_i(I=>l(0),["stop"]))},dZ,2),Nt("button",{class:Li(["layer-item__button",{_active:g(1)}]),onClick:C[1]||(C[1]=_i(I=>l(1),["stop"]))},pZ,2)])):(Mt(),pe("button",{key:1,class:"layer-item__button",onClick:_i(d,["stop"])},[_.data.show?(Mt(),Je(ut(Zn),{key:0,size:"14",type:"mdi",path:e.show},null,8,["path"])):(Mt(),Je(ut(Zn),{key:1,size:"14",type:"mdi",path:e.hide},null,8,["path"]))]))}});function iC(){const t=[];return{getMenus(){return t},addMenu(e){e.id&&t.some(n=>n.id===e.id)||t.push(e)},addMenus(e){for(const n of e)n.id&&t.some(a=>a.id===n.id)||t.push(n)},removeMenu(e){const n=t.findIndex(a=>a.id===e);n!==-1&&t.splice(n,1)},getMenu(e){return t.find(n=>n.id===e)},hasMenu(e){return t.some(n=>n.id===e)},updateMenu(e,n){const a=t.findIndex(s=>s.id===e);a!==-1&&(t[a]=n(t[a]))}}}function AA(){return{location:"extra",type:"item",name:"Fly to",icon:Rg,click:(t,e)=>{const n=vc(t,a=>a.type=="metadata");Yc(e,a=>{var s;$P(a,(s=n==null?void 0:n.metadata)==null?void 0:s.bbox)})}}}function n1(){return{type:"item",name:"Fly to",icon:Rg,click:(t,e,n)=>{Yc(e,a=>{$P(a,n.geometry);const{geometry:s,...d}=n;Ob(e,{type:"Feature",geometry:s,properties:d},"identify",t)})}}}function r1(){return{type:"item",name:"Detail",id:"show-detail",icon:zT,click:(t,e,n)=>{const a=vc(t,s=>s.type=="dataManagement");a==null||a.showDetail(e,n)}}}function wA(){return{type:"item",name:"Info",icon:zT,click:(t,e)=>{const n=vc(t,a=>a.type=="source");n&&tC(e,{component:()=>UP,attr:{item:n.getDataInfo(),fields:n.getFieldsInfo(),view:t},check:"detail"})}}}function LM(){return{type:"item",name:"Edit style",icon:bO,click:(t,e)=>{tC(e,{component:()=>cZ,attr:{item:t}})}}}function CA(t){return{type:"item",location:"bottom",name:"ToggleShow",component:()=>mZ,...t}}function gZ(t){const e=new Set;return t.filter(({identifyId:n,rawId:a})=>{const s=`${n}_${a}`;return e.has(s)?!1:(e.add(s),!0)})}function RM(t,e){return t.map(({identify:n,identifyId:a,feature:s,rawId:d})=>{var l;return{identify:n,identifyId:a,feature:{id:d,name:((l=s.properties)==null?void 0:l[n.config.field_name||"name"])??"",data:e.get(d)||{...s.properties,geometry:s.geometry}}}})}function yZ(t){return new Map(t.map(e=>[String(e.id),e]))}async function vZ(t,e){return new Promise(n=>{const a=e.layerIdMap;Yc(e.mapId,s=>{const d=Object.keys(a),l=s.queryRenderedFeatures(e.pointOrBox,{layers:d}),o=[],g=new Set;l.forEach(S=>{var F;const k=S.layer.id,R=a[k],B=((F=S.properties)==null?void 0:F[R.config.field_id||"id"])??S.id;if(!B)return;const V=String(B);g.add(V),o.push({identify:R,identifyId:R.id,feature:S,rawId:V})});const _=gZ(o),C=t[0],I=vc(C,S=>S.type==="dataManagement");if(!Pw(I)){const S=RM(_,new Map);n(S);return}I.getList([...g]).then(S=>{const k=yZ(S),R=RM(_,k);n(R)})})})}const _Z=(t,e,n)=>{const a=new Map;return n.forEach(({identifyId:s,identify:d,feature:l})=>{var o;a.has(s)||a.set(s,{identify:d,features:[]}),(o=a.get(s))==null||o.features.push(l)}),Array.from(a.values())},bZ=(t,e,n)=>{const a={};return t.forEach(s=>{const d=Gp(s.getParent()||s,o=>Ih(o),[o=>o.getAllLayerIds()]);Array.from(d.values()).flat(2).forEach(o=>{a[o]=s})}),{identifies:t,mapId:e,pointOrBox:n,layerIdMap:a}};function GP(t,e){const n=Ng(t,e),a=iC();return Jc("IdentifyComponent",{get config(){return{}},...n,...a,get type(){return"identify"},getFeatures(s,d){throw new Error("Method not implemented.")}})}function ZP(t,e){const n=GP(t,e);return Jc("IdentifyMapboxComponent",{...n,getFeatures:async(s,d)=>new Promise(l=>{const o=Gp(n.getParent()||n,_=>Ih(_),[_=>_.getAllLayerIds()]),g=Array.from(o.values()).flat(2);Yc(s,_=>{const C=_.queryRenderedFeatures(d,{layers:g}),I=new Set,E=vc(n,k=>k.type=="dataManagement");C.forEach(k=>{var B;const R=((B=k.properties)==null?void 0:B[n.config.field_id||"id"])??k.id;I.has(R)||I.add(R)});const S=[...I];if(!S||S.length<1){l([]);return}E.getList([...S]).then(k=>{l(k.map((R,B)=>({id:R.id??B,name:R[n.config.field_name||"name"]??"",data:R})))})})})})}function DM(t,e){const n=GP(t,e);return Jc("IdentifyMapboxMergedComponent",{...n,identifyGroupId:"mapbox-group",mergePayload:bZ,getMergedFeatures:vZ,splitResponse:_Z})}function WP(t,e,n){return t.getFeatures(e,n).then(a=>({identify:t,features:a}))}function xZ(t,e,n){const a=t[0];if(t.length===1)return WP(a,e,n).then(d=>[d]);const s=a.mergePayload(t,e,n);return a.getMergedFeatures(t,s).then(d=>a.splitResponse(t,s,d))}async function AZ(t,e,n){const a=[],s={};t.forEach(d=>{if(!_G(d)){a.push(WP(d,e,n));return}const l=d.identifyGroupId;s[l]||(s[l]=[]),s[l].push(d)});for(const d in s){const l=s[d];a.push(xZ(l,e,n))}return Promise.all(a).then(d=>d.flat())}async function wZ(t,e,n){const a=[],s={};return t.forEach(d=>{const l=Gp(d.getParent()||d,g=>Ih(g),[g=>g.getAllLayerIds()]),o=Array.from(l.values()).flat(2);o.forEach(g=>{s[g]=d}),a.push(...o)}),new Promise(d=>{Yc(e,l=>{var g,_,C,I;const o=l.queryRenderedFeatures(n,{layers:a});if(o.length>0){const E=o[0],S=s[E.layer.id],k=((_=E.properties)==null?void 0:_[((g=S==null?void 0:S.config)==null?void 0:g.field_id)||"id"])??E.id,R=((I=E.properties)==null?void 0:I[((C=S==null?void 0:S.config)==null?void 0:C.field_name)||"id"])??E.id;d({identify:S,features:[{id:k,name:R,data:Lw(E)}]})}})})}function CZ(t,e){const n=Ng(t,e),a=iC();return Jc("DatasetPartMapboxLayerComponent",{...n,...a,get type(){return"layer"},getBeforeId(){throw new Error("Method not implemented.")},getAllLayerIds(){throw new Error("Method not implemented.")},addToMap(s,d){throw new Error("Method not implemented.")},removeFromMap(s){throw new Error("Method not implemented.")},moveLayer(s,d){throw new Error("Method not implemented.")},toggleShow(s,d){throw new Error("Method not implemented.")},setOpacity(s,d){throw new Error("Method not implemented.")},updateValue(s,d){throw new Error("Method not implemented.")},getComponentUpdate(){throw new Error("Method not implemented.")}})}class Xm{constructor(){this.type="point"}setColor(e){return this.color=e,this}setStyleType(e){return this.type=e,this}setOpacity(e){return this.opacity=e,this}build(){return IZ(this.type,this.color,this.opacity)}}const IZ=(t,e,n)=>{switch(t){case"point":return{layout:{visibility:"visible"},type:"circle",paint:{"circle-color":e||e1(),"circle-radius":6,"circle-opacity":n||1}};case"line":return{layout:{visibility:"visible"},type:"line",paint:{"line-color":e||e1(),"line-width":4,"line-opacity":n||1}};case"area":return{layout:{visibility:"visible"},type:"fill",paint:{"fill-color":e||e1(),"fill-opacity":n||1}};case"symbol":return{layout:{visibility:"visible"},type:"symbol",paint:{}};default:throw new Error("Invalid type: "+t)}},MZ=t=>(_c("data-v-89a28113"),t=t(),bc(),t),SZ={class:"tab-item"},EZ={key:0,class:"tab-item-content"},TZ={key:2,class:"full-width"},PZ=MZ(()=>Nt("hr",{class:"map-divider"},null,-1)),kZ=["disabled"],LZ=nr({__name:"tab-content",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,trans:{required:!0},mapId:{required:!0}},emits:["input"],setup(t,{emit:e}){const n=t,a=e,s=_n({get(){return n.value!=null?n.value:n.default_value!=null?ky(n.default_value):void 0},set(o){a("input",o)}}),d=_n(()=>!n.item||!n.item.props||!n.item.props.content?{}:typeof n.item.props.content=="function"?n.item.props.content(n.item):n.item.props.content),l=()=>{s.value=n.default_value!=null?ky(n.default_value):void 0};return(o,g)=>(Mt(),pe("div",SZ,[!t.item.component||!t.item.component.content?(Mt(),pe("div",EZ,[Nt("p",null,Rn(t.value||t.default_value),1)])):(Mt(),Je(sa(t.item.component.content()),Tr({key:1},d.value,{modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=_=>s.value=_),mapId:t.mapId,class:"tab-item-content"}),null,16,["modelValue","mapId"])),t.default_value!=null?(Mt(),pe("div",TZ,[PZ,Nt("button",{onClick:g[1]||(g[1]=_=>l()),disabled:s.value==null||s.value==t.default_value,class:"map-button text-center full-width"},Rn(t.trans("map.style-control.back-to-default")),9,kZ)])):wn("",!0)]))}}),RZ=Vn(LZ,[["__scopeId","data-v-89a28113"]]),DZ=["disabled"],OZ=["title"],zZ=["title"],FZ={key:0},BZ=nr({__name:"tab-item",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,active:Boolean},setup(t){const e=t,n=_n(()=>!e.item||!e.item.props||!e.item.props.label?{}:typeof e.item.props.label=="function"?e.item.props.label(e.item):e.item.props.label),a=_n(()=>e.value!=null&&e.value!=""?e.value:e.default_value!=null&&e.default_value!=""?e.default_value:"None");return(s,d)=>(Mt(),pe("button",Tr({class:["tab-item",{"tab-item-active":t.active,"tab-item-disabled":t.disabled}],disabled:t.disabled},s.$attrs),[Nt("div",{class:"tab-item-title",title:t.text},Rn(t.text),9,OZ),Nt("div",{class:"tab-item-sub-title",title:a.value},[!t.item.component||!t.item.component.label?(Mt(),pe("p",FZ,Rn(a.value),1)):(Mt(),Je(sa(t.item.component.label()),Tr({key:1},n.value,{tab:t.item,value:t.value,default_value:t.default_value}),null,16,["tab","value","default_value"]))],8,zZ)],16,DZ))}}),NZ=Vn(BZ,[["__scopeId","data-v-650c1f3b"]]),qP={TAB:{type:"single",items:[{trans:"circle-style.setting.color",key:"circle-color",type:"color"},{trans:"circle-style.setting.width",key:"circle-radius",type:"unit",unit:"px"},{trans:"circle-style.setting.opacity",key:"circle-opacity",type:"opacity"},{trans:"circle-style.setting.blur",key:"circle-blur",type:"number"},{trans:"circle-style.setting.stroke-color",key:"circle-stroke-color",type:"color"},{trans:"circle-style.setting.stroke-width",key:"circle-stroke-width",type:"unit",unit:"px"},{trans:"circle-style.setting.stroke-opacity",key:"circle-stroke-opacity",type:"opacity"},{trans:"circle-style.setting.circle-pitch-alignment",key:"circle-pitch-alignment",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]},{trans:"circle-style.setting.circle-pitch-scale",key:"circle-pitch-scale",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]},{trans:"circle-style.setting.translate",key:"circle-translate",type:"array-x-y"}]},DEFAULT:{type:"circle",paint:{"circle-radius":5,"circle-color":"#000000","circle-blur":0,"circle-opacity":1,"circle-stroke-color":"#000000","circle-stroke-width":0,"circle-stroke-opacity":1,"circle-pitch-alignment":"viewport","circle-pitch-scale":"map","circle-translate":[0,0]}}},jZ=nr({__name:"InputArrayIndex",props:to({mapId:{type:String,required:!0},items:{type:Array,required:!0,default:()=>[]}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:to(["update:modelValue"],["update:modelValue"]),setup(t,{emit:e}){const n=la(t,"modelValue"),a=e;function s(d,l){n.value[l]=d,a("update:modelValue",n.value)}return(d,l)=>(Mt(),pe("div",Tr(d.$attrs,{class:"input-array-index"}),[(Mt(!0),pe(mr,null,ki(t.items,(o,g)=>(Mt(),pe("div",{class:"input-array-item",key:`array_${g}`},[Nt("span",null,Rn(o.text)+": ",1),ee(ut(Pi),{modelValue:n.value[g],type:o.type,onChange:_=>s(+_.target.value,g)},null,8,["modelValue","type","onChange"])]))),128))],16))}}),VZ=Vn(jZ,[["__scopeId","data-v-d979bf74"]]),KP=t=>(_c("data-v-4c3e7b15"),t=t(),bc(),t),UZ={class:"input-array-item"},HZ=KP(()=>Nt("span",null," x: ",-1)),$Z={class:"input-array-item"},GZ=KP(()=>Nt("span",null," y: ",-1)),ZZ=nr({__name:"InputArrayXY",props:to({mapId:{type:String,required:!0}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:to(["update:modelValue"],["update:modelValue"]),setup(t,{emit:e}){const n=la(t,"modelValue"),a=e;function s(d,l){n.value[l]=d,a("update:modelValue",n.value)}return(d,l)=>(Mt(),pe("div",Tr(d.$attrs,{class:"input-array-x-y"}),[Nt("div",UZ,[HZ,ee(ut(Pi),{modelValue:n.value[0],type:"number",onChange:l[0]||(l[0]=o=>s(+o.target.value,0))},null,8,["modelValue"])]),Nt("div",$Z,[GZ,ee(ut(Pi),{modelValue:n.value[1],type:"number",onChange:l[1]||(l[1]=o=>s(+o.target.value,1))},null,8,["modelValue"])])],16))}}),WZ=Vn(ZZ,[["__scopeId","data-v-4c3e7b15"]]),qZ={class:"fill-canvas"},KZ={class:"item-image"},YZ=["src","onClick"],XZ=nr({__name:"InputImage",props:to({mapId:{type:String,required:!0}},{modelValue:{default:void 0},modelModifiers:{}}),emits:to(["update:modelValue"],["update:modelValue"]),setup(t,{emit:e}){const n=la(t,"modelValue"),a=e,s=t,{images:d,toDataURL:l}=XU(s.mapId);function o(g){a("update:modelValue",g==n.value?void 0:g)}return(g,_)=>(Mt(),pe("div",Tr(g.$attrs,{class:"input-image"}),[Nt("div",null,[ee(ut(Pi),{modelValue:n.value,onChange:_[0]||(_[0]=C=>o(C.target.value))},null,8,["modelValue"])]),Nt("div",qZ,[(Mt(!0),pe(mr,null,ki(ut(d),(C,I)=>(Mt(),pe("div",{key:I,class:Li(["item-icon",{"item-icon-active":I==n.value}])},[Nt("div",KZ,[Nt("img",{src:ut(l)(I,C),alt:"Map image",onClick:E=>o(I)},null,8,YZ)])],2))),128))])],16))}}),QZ=Vn(XZ,[["__scopeId","data-v-ffdf76eb"]]),JZ={class:"input-array-item__action"},tW=nr({__name:"InputMultiple",props:to({mapId:{type:String,required:!0}},{modelValue:{default:()=>[0,0]},modelModifiers:{}}),emits:to(["update:modelValue"],["update:modelValue"]),setup(t,{emit:e}){const n=la(t,"modelValue"),a=e,s={delete:Bf};function d(g,_){n.value[_]=g,a("update:modelValue",n.value)}function l(g,_){g&&g.splice(_,1),n.value=g,a("update:modelValue",g)}function o(){n.value.push(0),a("update:modelValue",n.value)}return(g,_)=>(Mt(),pe("div",Tr(g.$attrs,{class:"input-array-index"}),[(Mt(!0),pe(mr,null,ki(n.value,(C,I)=>(Mt(),pe("div",{class:"input-array-item",key:`array_${I}`},[ee(ut(Pi),{modelValue:n.value[I],type:C.type,onChange:E=>d(+E.target.value,I)},null,8,["modelValue","type","onChange"]),Nt("div",JZ,[n.value.length>2?(Mt(),Je(ut(Cl),{key:0,onClick:E=>l(n.value,I)},{default:Ie(()=>[ee(ut(Zn),{size:"16",type:"mdi",path:s.delete},null,8,["path"])]),_:2},1032,["onClick"])):wn("",!0)])]))),128)),ee(ut(Cl),{onClick:_[0]||(_[0]=C=>o())},{default:Ie(()=>[fo(" Add")]),_:1})],16))}}),eW=Vn(tW,[["__scopeId","data-v-295c1e6a"]]),nW={props:{value:{type:String},default_value:{type:String}},data:()=>({}),computed:{},methods:{}};function rW(t,e,n,a,s,d){return Mt(),pe("div",{style:fi(`
      border: 1px solid #ccc;
      width:20px ; height: 20px ; background-color: ${n.value||n.default_value||"transparent"} ;
              border-radius: 5px `),class:Li({"fill-canvas":!n.value&&!n.default_value})},null,6)}const iW=Vn(nW,[["render",rW]]),oW={props:{value:{},default_value:{},tab:{default:()=>({})}},data:()=>({}),computed:{},methods:{}};function aW(t,e,n,a,s,d){return Mt(),pe("div",null,Rn(n.value||n.default_value||"0")+" "+Rn(n.tab.unit||""),1)}const sW=Vn(oW,[["render",aW]]),lW={props:{value:{},default_value:{},format:{default:()=>()=>""}},data:()=>({}),computed:{c_value(){return this.value!=null?this.value:this.default_value}},methods:{}};function cW(t,e,n,a,s,d){return Mt(),pe("div",null,Rn(n.format(d.c_value||"0")),1)}const IA=Vn(lW,[["render",cW]]),OM={"array-index":{component:{content:()=>VZ},props:{content:t=>({items:t.data})}},multiple:{component:{content:()=>eW},props:{}},select:{component:{content:()=>Tf},props:{content:t=>({items:t.items})}},image:{component:{content:()=>QZ},props:{content:{}}},color:{component:{content:()=>dF,label:()=>iW},props:{content:{disableAlpha:!0,class:"tab-content-no-padding"}}},boolean:{component:{content:()=>K8},props:{content:{}}},chose:{component:{content:()=>ez,label:()=>IA},props:{content:t=>({items:t.menu,class:"tab-content-padding"}),label:t=>({format(e){var n;return(n=t.menu.find(a=>a.value==e))==null?void 0:n.text}})}},opacity:{component:{content:()=>A1,label:()=>IA},props:{content:{min:0,max:1,step:.01},label:{format:t=>`${(+t*100).toFixed(0)} %`}},format:t=>+t},minMax:{component:{content:()=>A1,label:()=>IA},props:{content:{min:0,max:1,step:.01},label:{format:t=>`${(+t).toFixed(2)}`}},format:t=>+t},unit:{component:{content:()=>Pi,label:()=>sW},props:{content:{type:"number",min:0}},format:t=>+t},number:{component:{content:()=>Pi},props:{content:{type:"number",min:0}},format:t=>+t},text:{component:{content:()=>Pi},props:{content:{}}},"array-x-y":{component:{content:()=>WZ},props:{}},default:{component:{content:()=>Pi},props:{content:{}}}},YP={TAB:{type:"single",items:[{trans:"fill-style.setting.color",key:"fill-color",type:"color",disabled:t=>{var e;return!!((e=t.paint)!=null&&e["fill-pattern"])}},{trans:"fill-style.setting.fill-pattern",key:"fill-pattern",type:"image",format:t=>{if(t)return t}},{trans:"fill-style.setting.opacity",key:"fill-opacity",type:"opacity"},{trans:"fill-style.setting.fill-antialias",key:"fill-antialias",type:"boolean"},{trans:"fill-style.setting.fill-outline-color",key:"fill-outline-color",type:"color",disabled:t=>{var e,n;return!!((e=t.paint)!=null&&e["fill-pattern"])||((n=t.paint)==null?void 0:n["fill-antialias"])===!1}},{trans:"fill-style.setting.translate",key:"fill-translate",type:"array-x-y"}]},DEFAULT:{type:"fill",paint:{"fill-antialias":!0,"fill-color":"#000000","fill-opacity":1,"fill-translate":[0,0]}}},XP={TAB:{type:"single",items:[{trans:"line-style.setting.color",key:"line-color",type:"color",disabled:t=>{var e;return!!((e=t.paint)!=null&&e["line-pattern"])}},{trans:"line-style.setting.pattern",key:"line-pattern",type:"image",format:t=>{if(t)return t}},{trans:"line-style.setting.opacity",key:"line-opacity",type:"opacity"},{trans:"line-style.setting.width",key:"line-width",type:"unit",unit:"px"},{trans:"line-style.setting.cap",key:"line-cap",type:"chose",menu:[{text:"butt",value:"butt"},{text:"round",value:"round"},{text:"square",value:"square"}],part:"layout"},{trans:"line-style.setting.join",key:"line-join",type:"chose",menu:[{text:"bevel",value:"bevel"},{text:"round",value:"round"},{text:"miter",value:"miter"}],part:"layout"},{trans:"line-style.setting.round-limit",key:"line-round-limit",type:"unit",part:"layout",unit:"px",disabled:t=>{var e;return((e=t.layout)==null?void 0:e["line-join"])!="round"}},{trans:"line-style.setting.miter-limit",key:"line-miter-limit",type:"unit",part:"layout",unit:"px"},{type:"divider"},{trans:"line-style.setting.dash-array",key:"line-dasharray",type:"multiple",disabled:t=>{var e;return!!((e=t.paint)!=null&&e["line-pattern"])}},{trans:"line-style.setting.grap-width",key:"line-gap-width",type:"unit",unit:"px"},{trans:"line-style.setting.blur",key:"line-blur",type:"unit",unit:"px"},{trans:"line-style.setting.offset",key:"line-offset",type:"unit",unit:"px"},{trans:"line-style.setting.translate",key:"line-translate",type:"array-x-y"}]},DEFAULT:{type:"line",paint:{"line-color":"#000000","line-opacity":1,"line-width":0,"line-gap-width":0,"line-blur":0,"line-offset":0,"line-translate":[0,0]},layout:{"line-cap":"butt","line-join":"bevel","line-round-limit":0,"line-miter-limit":0}}},QP={TAB:{type:"single",items:[{trans:"raster-style.setting.raster-opacity",key:"raster-opacity",type:"opacity"},{trans:"raster-style.setting.raster-brightness-max",key:"raster-brightness-max",type:"minMax"},{trans:"raster-style.setting.raster-brightness-min",key:"raster-brightness-min",type:"minMax"},{trans:"raster-style.setting.raster-contrast",key:"raster-contrast",type:"minMax",props:{content:{class:"tab-content-padding",min:-1,max:1,step:.01}}},{trans:"raster-style.setting.raster-fade-duration",key:"raster-fade-duration",type:"unit",unit:"milliseconds"},{trans:"raster-style.setting.raster-hue-rotate",key:"raster-hue-rotate",type:"unit",unit:"degrees"},{trans:"raster-style.setting.raster-resampling",key:"raster-resampling",type:"chose",menu:[{text:"linear",value:"linear"},{text:"nearest",value:"nearest"}]},{trans:"raster-style.setting.raster-saturation",key:"raster-saturation",type:"minMax",props:{content:{min:-1,max:1}}}]},DEFAULT:{type:"raster",paint:{"raster-brightness-max":1,"raster-brightness-min":0,"raster-contrast":0,"raster-fade-duration":300,"raster-opacity":1,"raster-hue-rotate":0,"raster-resampling":"linear","raster-saturation":0}}},uW=[{trans:"symbol-style.setting.text-field",key:"text-field",part:"layout",type:"text"},{trans:"symbol-style.setting.text-color",key:"text-color",type:"color"},{trans:"symbol-style.setting.opacity",key:"text-opacity",type:"opacity"},{trans:"symbol-style.setting.size",key:"text-size",part:"layout",type:"unit",unit:"px"},{trans:"symbol-style.setting.letter-spacing",key:"text-letter-spacing",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.line-height",key:"text-line-height",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.max-width",key:"text-max-width",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.transform",key:"text-transform",part:"layout",type:"chose",menu:[{text:"none",value:"none"},{text:"uppercase",value:"uppercase"},{text:"lowercase",value:"lowercase"}]},{type:"divider"},{trans:"symbol-style.setting.halo-color",key:"text-halo-color",type:"color"},{trans:"symbol-style.setting.halo-blur",key:"text-halo-blur",type:"unit"},{trans:"symbol-style.setting.halo-width",key:"text-halo-width",type:"unit"}],hW=[{trans:"symbol-style.setting.icon-image",key:"icon-image",part:"layout",type:"image"},{trans:"symbol-style.setting.icon-opacity",key:"icon-opacity",type:"opacity"},{trans:"symbol-style.setting.icon-size",key:"icon-size",part:"layout",type:"unit"},{trans:"symbol-style.setting.icon-text-fit",key:"icon-text-fit",part:"layout",type:"chose",menu:[{text:"none",value:"none"},{text:"width",value:"width"},{text:"height",value:"height"},{text:"both",value:"both"}]},{trans:"symbol-style.setting.icon-text-fit-padding",key:"icon-text-fit-padding",part:"layout",type:"array-index",data:[{text:"top",type:"number",value:0},{text:"right",type:"number",value:0},{text:"bottom",type:"number",value:0},{text:"left",type:"number",value:0}]}],dW=[{trans:"symbol-style.setting.symbol-placement",key:"symbol-placement",type:"chose",menu:[{text:"point",value:"point"},{text:"line",value:"line"},{text:"line-center",value:"line-center"}],part:"layout"},{trans:"symbol-style.setting.symbol-spacing",key:"symbol-spacing",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.text-max-angle",key:"text-max-angle",type:"unit",unit:"deg",part:"layout"},{trans:"symbol-style.setting.avoid-edges",key:"symbol-avoid-edges",type:"boolean",part:"layout"},{trans:"symbol-style.setting.sort-key",key:"symbol-sort-key",type:"text",part:"layout"},{trans:"symbol-style.setting.text-orientation",key:"icon-pitch-alignment",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"},{text:"auto",value:"auto"}],text:"Text orientation",part:"layout"},{trans:"symbol-style.setting.text-padding",key:"text-padding",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.allow-text-overlap",key:"text-allow-overlap",type:"boolean",part:"layout"},{trans:"symbol-style.setting.text-ignore-placement",key:"text-ignore-placement",type:"boolean",part:"layout"},{trans:"symbol-style.setting.text-optional",key:"text-optional",type:"boolean",part:"layout"},{trans:"symbol-style.setting.icon-padding",key:"icon-padding",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.allow-icon-overlap",key:"icon-allow-overlap",type:"boolean",part:"layout"},{trans:"symbol-style.setting.icon-ignore-placement",key:"icon-ignore-placement",type:"boolean",part:"layout"},{trans:"symbol-style.setting.icon-optional",key:"icon-optional",type:"boolean",part:"layout"}],fW=[{trans:"symbol-style.setting.text-justify",key:"text-justify",type:"chose",menu:[{text:"auto",value:"auto"},{text:"left",subtitle:"symbol-style.translate.left",value:"left"},{text:"center",value:"center"},{text:"right",value:"right"}],text:"Text justify",part:"layout"},{trans:"symbol-style.setting.text-anchor",key:"text-anchor",type:"select",items:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],part:"layout"},{trans:"symbol-style.setting.text-offset",key:"text-offset",type:"array-x-y",unit:"em",part:"layout"},{trans:"symbol-style.setting.text-radial-offset",key:"text-radial-offset",type:"unit",unit:"em",part:"layout"},{trans:"symbol-style.setting.text-translate",key:"text-translate",type:"array-x-y",unit:"em"},{trans:"symbol-style.setting.text-rotate",key:"text-rotate",type:"unit",unit:"deg",part:"layout"},{trans:"symbol-style.setting.text-pitch-alignment",key:"text-pitch-alignment",type:"chose",menu:[{text:"auto",value:"auto"},{text:"map",value:"map"},{text:"viewport",value:"viewport"}],text:"Text justify",part:"layout"},{trans:"symbol-style.setting.icon-offset",key:"icon-offset",type:"array-x-y",unit:"em",part:"layout"},{trans:"symbol-style.setting.icon-translate",key:"icon-translate",type:"array-x-y",unit:"em"},{trans:"symbol-style.setting.icon-rotate",key:"icon-rotate",type:"unit",unit:"deg",part:"layout"}],JP={TAB:{type:"multi",tabs:[{trans:"symbol-style.tab.text",items:uW},{trans:"symbol-style.tab.icon",items:hW},{trans:"symbol-style.tab.position",items:dW},{trans:"symbol-style.tab.placement",items:fW}]},DEFAULT:{type:"symbol",paint:{"icon-color":void 0,"icon-halo-blur":0,"icon-halo-color":"rgba(0, 0, 0, 0)","icon-halo-width":0,"icon-opacity":1,"icon-translate":[0,0],"icon-translate-anchor":"map","text-color":"#000000","text-halo-blur":0,"text-halo-color":"rgba(0, 0, 0, 0)","text-halo-width":0,"text-opacity":1,"text-translate":[0,0],"text-translate-anchor":"map"},layout:{"symbol-placement":"point","symbol-spacing":250,"symbol-avoid-edges":!1,"symbol-sort-key":void 0,"icon-allow-overlap":!1,"icon-anchor":"center","icon-image":void 0,"icon-offset":[0,0],"icon-optional":!1,"icon-padding":2,"icon-pitch-alignment":"auto","icon-rotate":0,"icon-rotation-alignment":"auto","icon-size":1,"icon-text-fit":"none","icon-text-fit-padding":[0,0,0,0],"icon-keep-upright":!1,"text-allow-overlap":!1,"text-anchor":"center","text-field":"","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-justify":"center","text-letter-spacing":0,"text-line-height":1.2,"text-max-angle":45,"text-max-width":10,"text-offset":[0,0],"text-optional":!1,"text-padding":2,"text-pitch-alignment":"auto","text-rotate":0,"text-rotation-alignment":"auto","text-size":16,"text-transform":"none","text-variable-anchor":void 0,"text-writing-mode":void 0,"text-keep-upright":!0,visibility:"visible"}}},pW={circle:qP.TAB,line:XP.TAB,fill:YP.TAB,raster:QP.TAB,symbol:JP.TAB},mW={circle:qP.DEFAULT,line:XP.DEFAULT,fill:YP.DEFAULT,raster:QP.DEFAULT,symbol:JP.DEFAULT};function zM(t,e=OM){return t.map(n=>{if(n.type==="divider")return n;const a=Object.assign({},e.default,e[n.type]||{},n);return e[n.type]||console.log("type","missing",n.type),a.props=zg.merge({},a.props,(OM[n.type]||{}).props,n.props),a})}const gW={class:"style-edit-container"},yW={class:"label-config-container"},vW={class:"label-config-item"},_W={class:"label-config-item__label"},bW={class:"label-config-item__input"},xW={class:"label-config-item"},AW={class:"label-config-item__label"},wW={class:"label-config-item__input"},CW={class:"label-config-item"},IW={class:"label-config-item__label"},MW={class:"label-config-item__input"},SW={class:"label-config-item"},EW={class:"label-config-item__label"},TW={class:"label-config-item__input"},PW={key:0,class:"tab-group-label"},kW=["onClick"],LW={class:"tab-group-container"},RW={class:"label-container"},DW={key:0},OW=["onClick"],zW={key:0,class:"tab-divider"},FW={class:"value-container"},BW={key:0,class:"value-container__label"},NW=nr({__name:"single-style",props:to({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:to(["input","update-style"],["update:modelValue"]),setup(t,{emit:e}){const n=t,a=e,s=la(t,"modelValue"),d=_n(()=>{const k=pW[s.value.type];return k.type==="multi"?k.tabs.map(R=>({...R,items:zM(R.items)})):[{type:"single",text:"style",items:zM(k.items)}]}),l=_n(()=>mW[s.value.type]),o=mn(void 0),g=mn(void 0),_=k=>{g.value=k,g.value&&g.value.menu&&(g.value.menu=g.value.menu.map(R=>({...R,text:R.text||n.trans(R.text_trans||"")||"",subtitle:R.subtitle||n.trans(R.subtitle_trans||"")||""})))},C=k=>{o.value=k,o.value&&o.value.items&&_(o.value.items[0])},I=(k,R,B)=>{R.type!=="divider"&&(R.format&&(k=R.format(k)),"key"in R&&(R.format&&(k=R.format(k)),B[R.part||"paint"][R.key]=k),a("update-style",B))};go(()=>{d.value&&C(d.value[0])});const E=(k,R)=>{R["min-zoom"]=k,a("update-style",R)},S=(k,R)=>{R["max-zoom"]=k,a("update-style",R)};return(k,R)=>(Mt(),pe("div",gW,[ee(ut(vw),null,{header:Ie(()=>[fo(Rn(t.trans("map.style-control.layer.title")),1)]),default:Ie(()=>[Nt("div",yW,[Nt("div",vW,[Nt("div",_W,Rn(t.trans("map.style-control.layer.id")),1),Nt("div",bW,Rn(s.value.id),1)]),Nt("div",xW,[Nt("div",AW,Rn(t.trans("map.style-control.layer.type")),1),Nt("div",wW,Rn(s.value.type),1)]),Nt("div",CW,[Nt("div",IW,Rn(t.trans("map.style-control.layer.min-zoom")),1),Nt("div",MW,[ee(ut(A1),{modelValue:s.value["min-zoom"]!=null?s.value["min-zoom"]:0,"onUpdate:modelValue":R[0]||(R[0]=B=>E(B,s.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])]),Nt("div",SW,[Nt("div",EW,Rn(t.trans("map.style-control.layer.max-zoom")),1),Nt("div",TW,[ee(ut(A1),{modelValue:s.value["max-zoom"]!=null?s.value["max-zoom"]:24,"onUpdate:modelValue":R[1]||(R[1]=B=>S(B,s.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])])])]),_:1}),ee(ut(vw),null,{header:Ie(()=>[fo(Rn(t.trans("map.style-control.style.title")),1)]),default:Ie(()=>[d.value&&d.value.length>1?(Mt(),pe("div",PW,[(Mt(!0),pe(mr,null,ki(d.value,B=>(Mt(),pe("div",{key:B.key,class:Li(["tab clickable",{"tab-active":o.value&&o.value.trans==B.trans}]),onClick:_i(V=>C(B),["stop"])},Rn(B.text||t.trans(B.trans)),11,kW))),128))])):wn("",!0),Nt("div",LW,[Nt("div",RW,[o.value?(Mt(),pe("div",DW,[(Mt(!0),pe(mr,null,ki(o.value.items,B=>(Mt(),pe("div",{key:B.key,class:"clickable",onClick:_i(V=>_(B),["stop"])},[B.type==="divider"?(Mt(),pe("div",zW)):(Mt(),Je(NZ,{key:1,value:s.value[B.part||"paint"][B.key],item:B,text:B.text||t.trans(B.trans),default_value:l.value[B.part||"paint"][B.key],active:g.value&&g.value.key===B.key,disabled:B.disabled&&B.disabled(s.value)},null,8,["value","item","text","default_value","active","disabled"]))],8,OW))),128))])):wn("",!0)]),Nt("div",FW,[Nt("div",null,[g.value?(Mt(),pe("div",BW,Rn(g.value.text||t.trans(g.value.trans)),1)):wn("",!0),g.value?(Mt(),Je(RZ,{key:1,item:g.value,value:s.value[g.value.part||"paint"][g.value.key],onInput:R[2]||(R[2]=B=>I(B,g.value,s.value)),default_value:l.value[g.value.part||"paint"][g.value.key],trans:t.trans,mapId:t.mapId},null,8,["item","value","default_value","trans","mapId"])):wn("",!0)])])])]),_:1})]))}}),FM=Vn(NW,[["__scopeId","data-v-bdb9ac77"]]),jW={class:"multi-style-edit-container"},VW={class:"tab-container"},UW={class:"tab-item"},HW=["disabled"],$W={key:0,class:"style-container"},GW={class:"add-style-container"},ZW={key:1,class:"style-container"},WW=nr({__name:"multi-style",props:to({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0,default:()=>[]},modelModifiers:{}}),emits:to(["input","update-style","close"],["update:modelValue"]),setup(t,{expose:e,emit:n}){e({SvgIcon:Zn,SingleStyle:FM,BaseButton:Cl,InputSelect:Tf});const a=n,s=la(t,"modelValue");jo(s,()=>{!_.value&&s.value.length>0&&(_.value=s.value[s.value.length-1].id)});const d=B=>{_.value=void 0,El(()=>{_.value=B})},l=(B,V)=>{a("update-style",{type:"update-one-layer",layer:B,index:s.value.findIndex(F=>F.id===V)})},o=B=>{_.value=void 0,a("update-style",{type:"add-one-layer",layer:new Xm().setStyleType(B).setColor("#fff").build()}),R(!1)},g=B=>{var F;let V=s.value.findIndex(j=>j.id===B);s.value[V]&&(_.value=void 0,a("update-style",{type:"remove-one-layer",index:V,layer:s.value[V]}),s.value.splice(V,1),s.value.length===0?(_.value=void 0,R(!0)):_.value=(F=s.value[s.value.length-1])==null?void 0:F.id,s.value[0]&&d(s.value[0].id))},_=mn(s.value[0].id),C=_n(()=>s.value.map((B,V)=>({text:`#${V+1}`,value:B.id}))),I=_n(()=>s.value.find(B=>B.id===_.value)),E={delete:Bf,create:vd,close:xg},[S,k]=Pf(!1),R=B=>{k(B)};return(B,V)=>(Mt(),pe("div",jW,[Nt("div",VW,[Nt("div",UW,[ee(ut(Tf),{modelValue:_.value,"onUpdate:modelValue":d,items:C.value},null,8,["modelValue","items"])]),Nt("button",{class:"tab-item tab-add clickable",onClick:V[0]||(V[0]=F=>g(_.value)),disabled:!_.value},[ee(ut(Zn),{size:"14",type:"mdi",path:E.delete,disabled:!_.value},null,8,["path","disabled"])],8,HW),Nt("button",{class:"tab-item tab-add clickable",onClick:V[1]||(V[1]=F=>R(!ut(S)))},[ee(ut(Zn),{size:"14",type:"mdi",path:ut(S)?E.close:E.create},null,8,["path"])])]),ut(S)?(Mt(),pe("div",$W,[Nt("div",GW,[ee(ut(Cl),{onClick:V[2]||(V[2]=F=>o("area"))},{default:Ie(()=>[fo(Rn(t.trans("map.style-control.add.area")),1)]),_:1}),ee(ut(Cl),{onClick:V[3]||(V[3]=F=>o("line"))},{default:Ie(()=>[fo(Rn(t.trans("map.style-control.add.line")),1)]),_:1}),ee(ut(Cl),{onClick:V[4]||(V[4]=F=>o("point"))},{default:Ie(()=>[fo(Rn(t.trans("map.style-control.add.point")),1)]),_:1}),ee(ut(Cl),{onClick:V[5]||(V[5]=F=>o("symbol"))},{default:Ie(()=>[fo(Rn(t.trans("map.style-control.add.symbol")),1)]),_:1})])])):_.value?(Mt(),pe("div",ZW,[(Mt(),Je(FM,{modelValue:I.value,trans:t.trans,mapId:t.mapId,key:_.value,onUpdateStyle:V[6]||(V[6]=F=>l(F,_.value))},null,8,["modelValue","trans","mapId"]))])):wn("",!0)]))}});function Qm(t,e=[]){const n=CZ(t,e),a={};return n.getData().forEach(s=>{var l;const d=s.id||ju();s.id=d,a[d]=((l=s.paint)==null?void 0:l[MA(s)])??1}),Jc("MultiMapboxLayerComponent",{...n,setData(s){n.setData(s.map(d=>{var o;const l=d.id||ju();return d.id=l,a[l]=((o=d.paint)==null?void 0:o[MA(d)])??1,d}))},getBeforeId(){var s;return(s=n.getData()[0])==null?void 0:s.id},getAllLayerIds(){return n.getData().map(s=>s.id)},getComponentUpdate(){return()=>WW},addToMap(s,d){const l=kM(n,"source");n.getData().forEach(o=>{s.getLayer(o.id)||(!o.source&&l&&(o.source=l.getSourceId()),s.addLayer(o,d))})},removeFromMap(s){n.getData().forEach(d=>{s.getLayer(d.id)&&s.removeLayer(d.id)})},moveLayer(s,d){n.getData().forEach(l=>{s.getLayer(l.id)&&s.moveLayer(l.id,d)})},toggleShow(s,d){n.getData().forEach(l=>{s.getLayer(l.id)&&s.setLayoutProperty(l.id,"visibility",d?"visible":"none")})},setOpacity(s,d){n.getData().forEach(l=>{s.getLayer(l.id)&&s.setPaintProperty(l.id,MA(l),d*(a[l.id]??1))})},updateValue(s,d){const{type:l,index:o}=d;let{layer:g}=d;const _=kM(n,"source");switch(l){case"update-one-layer":qW(s,n.getData()[o],g),n.getData()[o]=ky({...n.getData()[o],...g});break;case"add-one-layer":g={...g,id:`${n.id}-${n.getData().length}`,source:_.getSourceId()},s.addLayer(g),n.getData().push(g);break;case"remove-one-layer":s.getLayer(g.id)&&s.removeLayer(g.id),n.getData().splice(o,1);break}}})}function qW(t,e,n){var a,s;t.setLayerZoomRange(e.id,n["min-zoom"]??e["min-zoom"]??0,n["max-zoom"]??e["max-zoom"]??24);for(const d in n.paint)n.paint[d]!==((a=e.paint)==null?void 0:a[d])&&t.setPaintProperty(e.id,d,n.paint[d]);for(const d in n.layout)n.layout[d]!==((s=e.layout)==null?void 0:s[d])&&t.setLayoutProperty(e.id,d,n.layout[d])}function MA(t){return t.type==="symbol"?"icon-opacity":`${t.type}-opacity`}function Jm(t,e){const n=Ng(t,e),a=iC();return Jc("ListViewUIComponent",{...n,...a,get type(){return"list"},opacity:1,selected:!1,color:void 0,config:{disable_delete:!1,disabled_opacity:!1,component:void 0},index:0,group:void 0,show:!0,shows:[],legend:void 0})}function BM(t,e){const n=Ng(t,e);return Jc("MetadataComponent",{...n,type:"metadata",metadata:e})}function t3(t,e){const n=Ng(t,e);return Jc("DatasetPartMapboxSourceComponent",{...n,get type(){return"source"},getSourceId(){return this.getMapboxSource().id||n.id},addToMap(a){const s=this.getSourceId();s&&!a.getSource(s)&&a.addSource(s,this.getMapboxSource())},removeFromMap(a){const s=this.getSourceId();s&&a.getLayer(s+"-hightLight")&&a.removeLayer(s+"-hightLight"),s&&a.getSource(s)&&a.removeSource(s)},getMapboxSource(){throw new Error("Method not implemented.")},getFieldsInfo(){throw new Error("Method not implemented.")},getDataInfo(){throw new Error("Method not implemented.")}})}function Dw(t,e){const n=t3(t,e);return Jc("GeojsonSourceComponent",{...n,getMapboxSource:()=>({type:"geojson",data:n.getData()||{type:"FeatureCollection",features:[]}}),getFieldsInfo:()=>[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:"bbox"},{trans:"map.layer-control.field.geojson",value:"geojson",inline:!0}],getDataInfo:()=>{var s;const a=vc(n,d=>d.type==="metadata");return{name:n.getName(),bbox:(s=a==null?void 0:a.metadata)==null?void 0:s.bbox,geojson:JSON.stringify(n.getData(),void 0,2)}},updateData(a,s){const d=a.getSource(n.id);d&&d.setData(s),n.setData(s)},hightLight(a,s){var l,o;a.getLayer(n.id+"-hightLight")?a.setFilter(n.id+"-hightLight",["==",["get","id"],((o=s==null?void 0:s.properties)==null?void 0:o.id)||null]):a.addLayer({id:n.id+"-hightLight",source:n.id,type:"line",filter:["==",["get","id"],((l=s==null?void 0:s.properties)==null?void 0:l.id)||null],paint:{"line-color":"#004E98","line-width":4,"line-dasharray":[2,2]}}),a.moveLayer(n.id+"-hightLight")}})}function e3(t,e){const n=t3(t,e);return Jc("RasterSourceComponent",{...n,getMapboxSource:()=>n.getData(),getFieldsInfo:()=>[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:"bbox"},{trans:"map.layer-control.field.tiles",value:"tiles"}],getDataInfo:()=>{var d,l;const a=vc(n,o=>o.type==="metadata"),s=n.getData();return{name:n.getName(),bbox:((d=a==null?void 0:a.metadata)==null?void 0:d.bbox)||(s==null?void 0:s.bounds),tiles:(l=s==null?void 0:s.tiles)==null?void 0:l.join(`,
`)}}})}const KW=nr({__name:"ComponentManagementControl",props:{...vo},setup(t){const e=xc(),n=t,{mapId:a}=bi(n),s=Db(a.value);function d(g){wG(a.value,g.id)}const l=_n(()=>{var g;return((g=AG(a.value))==null?void 0:g.value)||[]}),o=mn([]);return jo(l,()=>{var g;o.value=(s==null?void 0:s.components)||[],(g=e==null?void 0:e.proxy)==null||g.$forceUpdate()},{deep:!0}),(g,_)=>(Mt(!0),pe(mr,null,ki(o.value,C=>(Mt(),Je(sa(C.component()),Tr({key:C.id,ref_for:!0},C.attr,{onClose:I=>d(C)}),null,16,["onClose"]))),128))}}),YW={},XW={class:"map-row"};function QW(t,e,n,a,s,d){return Mt(),pe("div",XW,[Wn(t.$slots,"default")])}const n3=Vn(YW,[["render",QW]]),JW={class:"map-row"},tq={class:"map-col-12"},eq={__name:"xyz-json",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=la(t,"modelValue"),{mapId:n}=bi(),{trans:a}=To(n.value);return(s,d)=>(Mt(),pe("div",JW,[Wn(s.$slots,"default"),Nt("div",tq,[ee(ut(Pi),{modelValue:e.value.url,"onUpdate:modelValue":d[0]||(d[0]=l=>e.value.url=l),label:ut(a)("map.layer-control.field.url")},null,8,["modelValue","label"])])]))}},nq={class:"map-row"},rq={class:"map-col-12"},iq={class:"map-col-6"},oq={class:"map-col-6"},aq={class:"map-col-6"},sq={class:"map-col-6"},lq={class:"map-col-6"},cq={class:"map-col-6"},uq={__name:"xyz-url",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=la(t,"modelValue"),{mapId:n}=bi(),{trans:a}=To(n.value);return(s,d)=>(Mt(),pe("div",nq,[Wn(s.$slots,"default"),Nt("div",rq,[ee(ut(Pi),{modelValue:e.value.url,"onUpdate:modelValue":d[0]||(d[0]=l=>e.value.url=l),label:ut(a)("map.layer-control.field.url")},null,8,["modelValue","label"])]),Nt("div",iq,[ee(ut(Pi),{modelValue:e.value.minzoom,"onUpdate:modelValue":d[1]||(d[1]=l=>e.value.minzoom=l),label:ut(a)("map.layer-control.field.minzoom")},null,8,["modelValue","label"])]),Nt("div",oq,[ee(ut(Pi),{modelValue:e.value.maxzoom,"onUpdate:modelValue":d[2]||(d[2]=l=>e.value.maxzoom=l),label:ut(a)("map.layer-control.field.maxzoom")},null,8,["modelValue","label"])]),e.value.bounds?(Mt(),pe(mr,{key:0},[Nt("div",aq,[ee(ut(Pi),{modelValue:e.value.bounds[0],"onUpdate:modelValue":d[3]||(d[3]=l=>e.value.bounds[0]=l),label:ut(a)("map.layer-control.field.bound.minx")},null,8,["modelValue","label"])]),Nt("div",sq,[ee(ut(Pi),{modelValue:e.value.bounds[1],"onUpdate:modelValue":d[4]||(d[4]=l=>e.value.bounds[1]=l),label:ut(a)("map.layer-control.field.bound.miny")},null,8,["modelValue","label"])]),Nt("div",lq,[ee(ut(Pi),{modelValue:e.value.bounds[2],"onUpdate:modelValue":d[5]||(d[5]=l=>e.value.bounds[2]=l),label:ut(a)("map.layer-control.field.bound.maxx")},null,8,["modelValue","label"])]),Nt("div",cq,[ee(ut(Pi),{modelValue:e.value.bounds[3],"onUpdate:modelValue":d[6]||(d[6]=l=>e.value.bounds[3]=l),label:ut(a)("map.layer-control.field.bound.maxy")},null,8,["modelValue","label"])])],64)):wn("",!0)]))}},hq={class:"map-row"},dq={class:"map-col-12"},fq={class:"map-col-12"},pq={key:0,class:"map-col-12"},mq={__name:"geojson-upload",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const{read:e}=pD(),n=["point","line","area"],a=la(t,"modelValue"),s=mn(null),{mapId:d}=bi(),{trans:l}=To(d.value);function o(g){e(g).then(_=>{a.value.geojson=_,s.value=_?JSON.stringify(_,null,2):""})}return(g,_)=>(Mt(),pe("div",hq,[Wn(g.$slots,"default"),Nt("div",dq,[ee(ut(Tf),{modelValue:a.value.type,"onUpdate:modelValue":_[0]||(_[0]=C=>a.value.type=C),items:n,label:ut(l)("map.layer-control.field.type")},null,8,["modelValue","label"])]),Nt("div",fq,[ee(ut(sD),{onChange:o,accept:".json,.geojson"})]),s.value?(Mt(),pe("div",pq,[ee(ut(jT),{modelValue:s.value,rows:"4",readonly:""},null,8,["modelValue"])])):wn("",!0)]))}};function gq(t){const e=Ru(t.name,null,!0),n=Jm(t.name);n.color=t.color||e1();const a=Ru(t.name,null,!0),s=Qm(t.name,[new Xm().setStyleType(t.type).setColor(n.color).setOpacity(n.opacity).build()]);a.add(s),a.add(n);const d=yq(t.geojson),l=Rw(t.name,{fields:d.fields});l.setItems(d.items);const o=ZP(t.name);o.addMenus([n1(),r1()]);const g=Dw(t.name,{type:"FeatureCollection",features:[]});return e.add(g),e.add(l),e.add(a),e.add(o),e}function yq(t){const e=[],n=new Set,a=d=>{const{properties:l={},geometry:o}=d;return Object.keys(l).forEach(g=>n.add(g)),{...l,geometry:o}};if(t.type==="FeatureCollection")for(const d of t.features)e.push(a(d));else t.type==="Feature"&&e.push(a(t));const s=Array.from(n).map(d=>({text:d,value:d}));return{items:e,fields:s}}function r3(t){const e=Ru(t.name,null,!0),n=e3(t.name,{type:"raster",tiles:t.tiles,maxzoom:t.maxZoom,minzoom:t.minZoom,bounds:t.bounds}),a=Qm(t.name,[{type:"raster"}]),s=Jm(t.name),d=Ru(t.name,null,!0);return e.add(n),d.add(s),d.add(a),e.add(d),e}class oC{get default_value(){return{}}validate(e){return!!e.name}}class vq extends oC{get component(){return()=>eq}validate(e){return!(!e.name||!e.url)}get create(){return e=>r3({...e})}}class _q extends oC{get component(){return()=>uq}get default_value(){return{bounds:[-180,-85.051129,180,85.051129],minzoom:0,maxzoom:24}}validate(e){return!(!e.name||!e.url)}get create(){return e=>r3({...e,tiles:[e.url]})}}class bq extends oC{get component(){return()=>mq}get default_value(){return{type:"point",geojson:null}}validate(e){return!(!e.name||!e.geojson||!e.type)}get create(){return e=>gq({...e})}}const NM={"raster-url":"Raster url layer","raster-json":"Raster json layer",geojson:"Geojson layer"};class xq{constructor(e){this.setType(e)}setType(e){this.helper=Aq.create(e)}get default_value(){return this.helper.default_value}get create(){return this.helper.create}get component(){return this.helper.component||n3}validate(e){return this.helper.validate(e)}}const Aq={create(t){switch(t){case"raster-url":return new _q;case"raster-json":return new vq;case"geojson":return new bq;default:throw new Error("not support type: "+t)}}},wq={class:"create-control-container"},Cq={class:"form-container"},Iq={class:"map-col-12"},Mq={class:"map-col-12"},Sq={name:"create-layer-control"},Eq=Object.assign(Sq,{props:{show:Boolean},emits:["update:show"],setup(t,{emit:e}){const n=t,{mapId:a,moduleContainerProps:s,callMap:d}=bi(n),{trans:l}=To(a.value),o=e,g=_n({get(){return n.show},set(j){o("update:show",j)}}),_={type:"geojson"},C=mn(1),I=mn(()=>n3),E=new xq(_.type),S=mn({..._,config:{name:"",...E.default_value}}),k=Object.keys(NM).map(j=>({value:j,text:NM[j]}));function R(j){E.setType(j),I.value=E.component,S.value={config:{name:S.value.config.name,...E.default_value},type:S.value.type}}function B(j){const G=E.create;if(!G||!E.validate(j.config))return;let Q=G(j.config);d(nt=>{kw(nt.id,Q)}),V(),g.value=!1}function V(){E.setType(_.type),S.value={..._,config:{name:"",...E.default_value}},C.value++}function F(){V()}return go(()=>{R(S.value.type)}),(j,G)=>(Mt(),Je(ut(Uo),Eo(yo(ut(s))),{draggable:Ie(Q=>[ee(ut(bd),Tr({show:g.value,"onUpdate:show":G[4]||(G[4]=nt=>g.value=nt)},Q,{width:400,height:300,onClose:F,title:ut(l)("map.layer-control.create.title")}),{default:Ie(()=>[Nt("div",wq,[Nt("div",Cq,[(Mt(),Je(sa(I.value()),{modelValue:S.value.config,"onUpdate:modelValue":G[2]||(G[2]=nt=>S.value.config=nt),class:"create-control-form",key:C.value},{default:Ie(()=>[Nt("div",Iq,[ee(ut(Pi),{modelValue:S.value.config.name,"onUpdate:modelValue":G[0]||(G[0]=nt=>S.value.config.name=nt),label:ut(l)("map.layer-control.field.name")},null,8,["modelValue","label"])]),Nt("div",Mq,[ee(ut(Tf),{modelValue:S.value.type,"onUpdate:modelValue":[G[1]||(G[1]=nt=>S.value.type=nt),R],items:ut(k),label:ut(l)("map.layer-control.field.type")},null,8,["modelValue","items","label"])])]),_:1},8,["modelValue"]))]),ee(ut(Cl),{onClick:G[3]||(G[3]=nt=>B(S.value)),class:"btn-container"},{default:Ie(()=>[fo(Rn(ut(l)("map.layer-control.create-btn")),1)]),_:1})])]),_:2},1040,["show","title"])]),_:1},16))}}),Tq=Vn(Eq,[["__scopeId","data-v-2f2c18bd"]]),Pq={class:"menu-divider"},kq=nr({__name:"menu-divider",props:{item:{},data:{}},setup(t){return(e,n)=>(Mt(),pe("div",Pq))}}),Lq=["title"],Rq=nr({__name:"menu-item",props:{item:{},data:{},mapId:{}},setup(t){return(e,n)=>(Mt(),pe("button",Tr(e.$attrs,{class:"menu-item",title:e.item.name}),[e.item.icon?(Mt(),Je(ut(Zn),{key:0,size:"14",type:"mdi",path:e.item.icon},null,8,["path"])):wn("",!0)],16,Lq))}}),Dq=nr({__name:"index",props:{item:{},data:{},mapId:{}},setup(t){const e=t,n=_n(()=>{switch(e.item.type){case"divider":return kq}return Rq});return(a,s)=>(Mt(),Je(sa(n.value),Tr({item:a.item,data:a.data},a.$attrs,{mapId:a.mapId}),null,16,["item","data","mapId"]))}}),aC=t=>(_c("data-v-1e7e1a1a"),t=t(),bc(),t),Oq={class:"identify-control-container"},zq={class:"identify-control-header"},Fq=["innerHTML"],Bq=aC(()=>Nt("hr",{class:"identify-control-separator"},null,-1)),Nq={class:"identify-control-body"},jq={key:0,class:"identify-control-state"},Vq={class:"identify-control-state__content"},Uq=aC(()=>Nt("div",{class:"identify-control-state__loading"},null,-1)),Hq={key:1,class:"identify-control-state"},$q={class:"identify-control-state__content"},Gq={key:2,class:"identify-control-state"},Zq={class:"identify-control-state__content"},Wq={class:"identify-control-list-item__container"},qq=["title"],Kq={class:"identify-control-list-item__child-container"},Yq=aC(()=>Nt("div",{class:"identify-control-child-item__spacer"},null,-1)),Xq={class:"identify-control-child-item__action"},Qq=nr({__name:"IdentifyControl",props:{...vo,immediately:Boolean},setup(t){const e={icon:wO,boxSelect:BO,mapClick:gO},n=t,{mapId:a,moduleContainerProps:s}=bi(n),{trans:d,setLocale:l}=To(a.value),{format:o}=_P(a.value);l({map:{identify:{title:"Identify",point:"Point",no_selection:"Please select a point on the map",no_data:"No data found",loading:"Loading..."}}});const g=mn([]),_=_n(()=>rC(a.value).value);jo(_,()=>{I()},{deep:!0}),go(()=>{I()});const C=_n(()=>g.value);function I(){E()}function E(){g.value=sv(a.value,"identify")||[]}const S=_n(()=>g.value.length>0),{add:k,remove:R,isActive:B}=L1(a.value,new ov().setHandler(Q)),{add:V,remove:F,isActive:j}=L1(a.value,new qU().setHandler(nt)),G=ls({latitude:0,longitude:0});function Q(Ce){G.latitude=Ce.lngLat.lat,G.longitude=Ce.lngLat.lng,pt(Ce.point)}function nt(Ce){Re(),Ce&&pt(Ce)}const X=ls({items:[],loading:!1}),K=_n(()=>{if(!G)return"";const Ce=o(G);return Ce.longitude+", &nbsp;"+Ce.latitude}),Z=_n(()=>G.latitude!==0||G.longitude!==0);function at(Ce){if(X.items=Ce,n.immediately&&Ce&&Ce[0]&&Ce[0].features&&Ce[0].features[0]){const nn=Ce[0].identify.getMenu("show-detail");nn&&Ge(Ce[0].identify,nn,Ce[0].features[0].data)}}async function pt(Ce){X.loading=!0;try{const nn=Date.now(),be=await AZ(C.value,a.value,Ce),Se=Date.now()-nn;Se<500&&await new Promise(xe=>setTimeout(xe,500-Se)),at(be.filter(xe=>xe.features.length>0))}finally{X.loading=!1}}const rt=mn(!1);function xt(){rt.value=!rt.value,Bt()}function q(){zt(),Ob(a.value,void 0,"identify"),at([])}function zt(){n.immediately||(ge(),Re())}const Rt=mn(!1);function Bt(){Rt.value?ge():Xt()}function Xt(){Rt.value=!0,k()}function ge(){Rt.value=!1,R()}const en=mn(!1);function te(){en.value?Re():Gt()}function Gt(){en.value=!0,V()}function Re(){en.value=!1,F()}function Ge(Ce,nn,be){nn.type!="item"||!Ce||"click"in nn&&nn.click(Ce,a.value,be)}return go(()=>{n.immediately&&Bt()}),(Ce,nn)=>(Mt(),Je(ut(Uo),Eo(yo(ut(s))),{btn:Ie(()=>[S.value?(Mt(),Je(ut(ui),{key:0,tooltip:ut(d)("map.identify.title"),onClick:nn[0]||(nn[0]=_i(be=>xt(),["stop"])),active:rt.value},{default:Ie(()=>[ee(ut(Zn),{size:"16",type:"mdi",path:e.icon},null,8,["path"])]),_:1},8,["tooltip","active"])):wn("",!0)]),draggable:Ie(be=>[rt.value?(Mt(),Je(ut(bd),Tr({key:0,show:rt.value,"onUpdate:show":nn[3]||(nn[3]=Se=>rt.value=Se)},be,{width:400,height:300,onClose:q,title:ut(d)("map.identify.title")}),{"extra-btn":Ie(()=>[ee(ut(Cl),{onClick:nn[1]||(nn[1]=_i(Se=>Bt(),["stop"])),active:ut(B),disabled:ut(B)},{default:Ie(()=>[ee(ut(Zn),{size:"16",type:"mdi",path:e.mapClick},null,8,["path"])]),_:1},8,["active","disabled"]),ee(ut(Cl),{onClick:nn[2]||(nn[2]=_i(Se=>te(),["stop"])),active:ut(j),disabled:ut(j)},{default:Ie(()=>[ee(ut(Zn),{size:"16",type:"mdi",path:e.boxSelect},null,8,["path"])]),_:1},8,["active","disabled"])]),default:Ie(()=>[Nt("div",Oq,[Nt("div",zq,[Nt("b",null,Rn(ut(d)("map.identify.point"))+":",1),Nt("span",{innerHTML:K.value},null,8,Fq)]),Bq,Nt("div",Nq,[X.loading?(Mt(),pe("div",jq,[Nt("div",Vq,[Uq,Nt("span",null,Rn(ut(d)("map.identify.loading")),1)])])):Z.value?X.items.length===0?(Mt(),pe("div",Gq,[Nt("div",Zq,[Nt("span",null,Rn(ut(d)("map.identify.no_data")),1)])])):(Mt(!0),pe(mr,{key:3},ki(X.items,Se=>(Mt(),pe("div",{key:Se.identify.id,class:"identify-control-list-item"},[Nt("div",Wq,[Nt("div",{class:"identify-control-list-item__header",title:Se.identify.getName()},Rn(Se.identify.getName()||"---"),9,qq),Nt("div",Kq,[(Mt(!0),pe(mr,null,ki(Se.features,xe=>(Mt(),pe("div",{class:"identify-control-child-item",key:xe.id},[Nt("span",null,Rn(xe.name),1),Yq,Nt("div",Xq,[(Mt(!0),pe(mr,null,ki(Se.identify.getMenus(),(Be,tn)=>(Mt(),Je(Dq,{key:tn,class:"layer-item__button",item:Be,data:xe,mapId:ut(a),onClick:Ln=>Ge(Se.identify,Be,xe.data)},null,8,["item","data","mapId","onClick"]))),128))])]))),128))])])]))),128)):(Mt(),pe("div",Hq,[Nt("div",$q,[Nt("span",null,Rn(ut(d)("map.identify.no_selection")),1)])]))])])]),_:2},1040,["show","title"])):wn("",!0)]),_:1},16))}}),Jq=Vn(Qq,[["__scopeId","data-v-1e7e1a1a"]]),tK=nr({__name:"IdentifyShowFirstControl",props:{...vo},setup(t){const e=t,{mapId:n}=bi(e),a=mn([]),s=_n(()=>rC(n.value).value);jo(s,()=>{d()},{deep:!0}),go(()=>{d()});function d(){l()}function l(){a.value=sv(n.value,"identify")||[]}const{add:o,remove:g,isActive:_}=L1(n.value,new ov().setHandler(C));function C(B){k(B.point)}const I=ls({items:[],loading:!1});function E(B){if(B&&B.features&&B.features[0]){const V=B.identify.getMenu("show-detail");V&&R(B.identify,V,B.features[0].data)}}const S=_n(()=>a.value);async function k(B){I.loading=!0;try{const V=await wZ(S.value,n.value,B);E(V)}finally{I.loading=!1}}function R(B,V,F){V.type!="item"||!B||"click"in V&&V.click(B,n.value,F)}return go(()=>{o()}),(B,V)=>(Mt(),pe("div"))}}),eK=t=>(_c("data-v-4881fa35"),t=t(),bc(),t),nK=eK(()=>Nt("button",{type:"button",class:"btn-close"},"Close",-1)),rK=[nK],iK=nr({__name:"context-menu",props:{zIndex:{type:[String,Number],default:"9"}},setup(t,{expose:e}){const a=pT({mobile:0,tablet:640,laptop:1024,desktop:1280}).smallerOrEqual("tablet"),s=t,d=mn(),l=mn(!1),o=mn(null),g=mn(null);Y6(d,()=>C());function _(I){l.value=!0;const E=d.value;if(E)if((!o.value||!g.value)&&(E.style.visibility="hidden",E.style.display="block",o.value=E.offsetWidth,g.value=E.offsetHeight,E.removeAttribute("style")),E.style.position="fixed",E.style.zIndex=s.zIndex+"",!a.value)o.value+I.pageX>=window.innerWidth?E.style.left=I.pageX-o.value+10+"px":E.style.left=I.pageX-10+"px",g.value+I.pageY>=window.innerHeight?E.style.top=I.pageY-g.value+10+"px":E.style.top=I.pageY-10+"px";else{E.style.top="0px",E.style.left="0px",E.style.right="0px",E.style.bottom="0px",E.style.background="#00000085";const S=E.childNodes[0];S.style.width="100%",S.style.position="absolute",S.style.top="50%",S.style.left="50%",S.style.transform="translate(-50%, -50%)",S.style.padding="40px",S.style.height="100%",S.style.overflow="auto"}}function C(){o.value=null,g.value=null,l.value=!1;const I=d.value;I&&(I.style.display="none")}return e({open:_,close:C}),(I,E)=>(Mt(),pe("div",{class:"menu-container",ref_key:"target",ref:d},[Nt("div",null,[Wn(I.$slots,"default",{},void 0,!0)]),l.value&&ut(a)?(Mt(),pe("div",{key:0,onClick:E[0]||(E[0]=S=>C())},rK)):wn("",!0)],512))}}),sC=Vn(iK,[["__scopeId","data-v-4881fa35"]]);var i3={exports:{}};const oK=Wy(mR);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function jM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Mh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jM(Object(n),!0).forEach(function(a){aK(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function i1(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?i1=function(e){return typeof e}:i1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i1(t)}function aK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qc(){return Qc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Qc.apply(this,arguments)}function sK(t,e){if(t==null)return{};var n={},a=Object.keys(t),s,d;for(d=0;d<a.length;d++)s=a[d],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function lK(t,e){if(t==null)return{};var n=sK(t,e),a,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(s=0;s<d.length;s++)a=d[s],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function cK(t){return uK(t)||hK(t)||dK(t)||fK()}function uK(t){if(Array.isArray(t))return Ow(t)}function hK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dK(t,e){if(t){if(typeof t=="string")return Ow(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ow(t,e)}}function Ow(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function fK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var pK="1.14.0";function dd(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ad=dd(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),lv=dd(/Edge/i),VM=dd(/firefox/i),gy=dd(/safari/i)&&!dd(/chrome/i)&&!dd(/android/i),o3=dd(/iP(ad|od|hone)/i),mK=dd(/chrome/i)&&dd(/android/i),a3={capture:!1,passive:!1};function ni(t,e,n){t.addEventListener(e,n,!Ad&&a3)}function Qr(t,e,n){t.removeEventListener(e,n,!Ad&&a3)}function F1(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function gK(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Du(t,e,n,a){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&F1(t,e):F1(t,e))||a&&t===n)return t;if(t===n)break}while(t=gK(t))}return null}var UM=/\s+/g;function Mo(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var a=(" "+t.className+" ").replace(UM," ").replace(" "+e+" "," ");t.className=(a+(n?" "+e:"")).replace(UM," ")}}function hr(t,e,n){var a=t&&t.style;if(a){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=n+(typeof n=="string"?"":"px")}}function Np(t,e){var n="";if(typeof t=="string")n=t;else do{var a=hr(t,"transform");a&&a!=="none"&&(n=a+" "+n)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(n)}function s3(t,e,n){if(t){var a=t.getElementsByTagName(e),s=0,d=a.length;if(n)for(;s<d;s++)n(a[s],s);return a}return[]}function xh(){var t=document.scrollingElement;return t||document.documentElement}function uo(t,e,n,a,s){if(!(!t.getBoundingClientRect&&t!==window)){var d,l,o,g,_,C,I;if(t!==window&&t.parentNode&&t!==xh()?(d=t.getBoundingClientRect(),l=d.top,o=d.left,g=d.bottom,_=d.right,C=d.height,I=d.width):(l=0,o=0,g=window.innerHeight,_=window.innerWidth,C=window.innerHeight,I=window.innerWidth),(e||n)&&t!==window&&(s=s||t.parentNode,!Ad))do if(s&&s.getBoundingClientRect&&(hr(s,"transform")!=="none"||n&&hr(s,"position")!=="static")){var E=s.getBoundingClientRect();l-=E.top+parseInt(hr(s,"border-top-width")),o-=E.left+parseInt(hr(s,"border-left-width")),g=l+d.height,_=o+d.width;break}while(s=s.parentNode);if(a&&t!==window){var S=Np(s||t),k=S&&S.a,R=S&&S.d;S&&(l/=R,o/=k,I/=k,C/=R,g=l+C,_=o+I)}return{top:l,left:o,bottom:g,right:_,width:I,height:C}}}function HM(t,e,n){for(var a=_f(t,!0),s=uo(t)[e];a;){var d=uo(a)[n],l=void 0;if(l=s>=d,!l)return a;if(a===xh())break;a=_f(a,!1)}return!1}function Mg(t,e,n,a){for(var s=0,d=0,l=t.children;d<l.length;){if(l[d].style.display!=="none"&&l[d]!==Ir.ghost&&(a||l[d]!==Ir.dragged)&&Du(l[d],n.draggable,t,!1)){if(s===e)return l[d];s++}d++}return null}function lC(t,e){for(var n=t.lastElementChild;n&&(n===Ir.ghost||hr(n,"display")==="none"||e&&!F1(n,e));)n=n.previousElementSibling;return n||null}function No(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Ir.clone&&(!e||F1(t,e))&&n++;return n}function $M(t){var e=0,n=0,a=xh();if(t)do{var s=Np(t),d=s.a,l=s.d;e+=t.scrollLeft*d,n+=t.scrollTop*l}while(t!==a&&(t=t.parentNode));return[e,n]}function yK(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t[n][a])return Number(n)}return-1}function _f(t,e){if(!t||!t.getBoundingClientRect)return xh();var n=t,a=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var s=hr(n);if(n.clientWidth<n.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return xh();if(a||e)return n;a=!0}}while(n=n.parentNode);return xh()}function vK(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function SA(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var yy;function l3(t,e){return function(){if(!yy){var n=arguments,a=this;n.length===1?t.call(a,n[0]):t.apply(a,n),yy=setTimeout(function(){yy=void 0},e)}}}function _K(){clearTimeout(yy),yy=void 0}function c3(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function cC(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function GM(t,e){hr(t,"position","absolute"),hr(t,"top",e.top),hr(t,"left",e.left),hr(t,"width",e.width),hr(t,"height",e.height)}function EA(t){hr(t,"position",""),hr(t,"top",""),hr(t,"left",""),hr(t,"width",""),hr(t,"height","")}var Cs="Sortable"+new Date().getTime();function bK(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(s){if(!(hr(s,"display")==="none"||s===Ir.ghost)){t.push({target:s,rect:uo(s)});var d=Mh({},t[t.length-1].rect);if(s.thisAnimationDuration){var l=Np(s,!0);l&&(d.top-=l.f,d.left-=l.e)}s.fromRect=d}})}},addAnimationState:function(a){t.push(a)},removeAnimationState:function(a){t.splice(yK(t,{target:a}),1)},animateAll:function(a){var s=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var d=!1,l=0;t.forEach(function(o){var g=0,_=o.target,C=_.fromRect,I=uo(_),E=_.prevFromRect,S=_.prevToRect,k=o.rect,R=Np(_,!0);R&&(I.top-=R.f,I.left-=R.e),_.toRect=I,_.thisAnimationDuration&&SA(E,I)&&!SA(C,I)&&(k.top-I.top)/(k.left-I.left)===(C.top-I.top)/(C.left-I.left)&&(g=AK(k,E,S,s.options)),SA(I,C)||(_.prevFromRect=C,_.prevToRect=I,g||(g=s.options.animation),s.animate(_,k,I,g)),g&&(d=!0,l=Math.max(l,g),clearTimeout(_.animationResetTimer),_.animationResetTimer=setTimeout(function(){_.animationTime=0,_.prevFromRect=null,_.fromRect=null,_.prevToRect=null,_.thisAnimationDuration=null},g),_.thisAnimationDuration=g)}),clearTimeout(e),d?e=setTimeout(function(){typeof a=="function"&&a()},l):typeof a=="function"&&a(),t=[]},animate:function(a,s,d,l){if(l){hr(a,"transition",""),hr(a,"transform","");var o=Np(this.el),g=o&&o.a,_=o&&o.d,C=(s.left-d.left)/(g||1),I=(s.top-d.top)/(_||1);a.animatingX=!!C,a.animatingY=!!I,hr(a,"transform","translate3d("+C+"px,"+I+"px,0)"),this.forRepaintDummy=xK(a),hr(a,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),hr(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){hr(a,"transition",""),hr(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},l)}}}}function xK(t){return t.offsetWidth}function AK(t,e,n,a){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*a.animation}var jm=[],TA={initializeByDefault:!0},cv={mount:function(e){for(var n in TA)TA.hasOwnProperty(n)&&!(n in e)&&(e[n]=TA[n]);jm.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),jm.push(e)},pluginEvent:function(e,n,a){var s=this;this.eventCanceled=!1,a.cancel=function(){s.eventCanceled=!0};var d=e+"Global";jm.forEach(function(l){n[l.pluginName]&&(n[l.pluginName][d]&&n[l.pluginName][d](Mh({sortable:n},a)),n.options[l.pluginName]&&n[l.pluginName][e]&&n[l.pluginName][e](Mh({sortable:n},a)))})},initializePlugins:function(e,n,a,s){jm.forEach(function(o){var g=o.pluginName;if(!(!e.options[g]&&!o.initializeByDefault)){var _=new o(e,n,e.options);_.sortable=e,_.options=e.options,e[g]=_,Qc(a,_.defaults)}});for(var d in e.options)if(e.options.hasOwnProperty(d)){var l=this.modifyOption(e,d,e.options[d]);typeof l<"u"&&(e.options[d]=l)}},getEventProperties:function(e,n){var a={};return jm.forEach(function(s){typeof s.eventProperties=="function"&&Qc(a,s.eventProperties.call(n[s.pluginName],e))}),a},modifyOption:function(e,n,a){var s;return jm.forEach(function(d){e[d.pluginName]&&d.optionListeners&&typeof d.optionListeners[n]=="function"&&(s=d.optionListeners[n].call(e[d.pluginName],a))}),s}};function J0(t){var e=t.sortable,n=t.rootEl,a=t.name,s=t.targetEl,d=t.cloneEl,l=t.toEl,o=t.fromEl,g=t.oldIndex,_=t.newIndex,C=t.oldDraggableIndex,I=t.newDraggableIndex,E=t.originalEvent,S=t.putSortable,k=t.extraEventProperties;if(e=e||n&&n[Cs],!!e){var R,B=e.options,V="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Ad&&!lv?R=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(R=document.createEvent("Event"),R.initEvent(a,!0,!0)),R.to=l||n,R.from=o||n,R.item=s||n,R.clone=d,R.oldIndex=g,R.newIndex=_,R.oldDraggableIndex=C,R.newDraggableIndex=I,R.originalEvent=E,R.pullMode=S?S.lastPutMode:void 0;var F=Mh(Mh({},k),cv.getEventProperties(a,e));for(var j in F)R[j]=F[j];n&&n.dispatchEvent(R),B[V]&&B[V].call(e,R)}}var wK=["evt"],_l=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.evt,d=lK(a,wK);cv.pluginEvent.bind(Ir)(e,n,Mh({dragEl:Bn,parentEl:Fo,ghostEl:Gr,rootEl:co,nextEl:Pp,lastDownEl:o1,cloneEl:Bo,cloneHidden:yf,dragStarted:ty,putSortable:is,activeSortable:Ir.active,originalEvent:s,oldIndex:tg,oldDraggableIndex:vy,newIndex:hc,newDraggableIndex:mf,hideGhostForTarget:f3,unhideGhostForTarget:p3,cloneNowHidden:function(){yf=!0},cloneNowShown:function(){yf=!1},dispatchSortableEvent:function(o){Xs({sortable:n,name:o,originalEvent:s})}},d))};function Xs(t){J0(Mh({putSortable:is,cloneEl:Bo,targetEl:Bn,rootEl:co,oldIndex:tg,oldDraggableIndex:vy,newIndex:hc,newDraggableIndex:mf},t))}var Bn,Fo,Gr,co,Pp,o1,Bo,yf,tg,hc,vy,mf,j_,is,Zm=!1,B1=!1,N1=[],Ep,Pu,PA,kA,ZM,WM,ty,Vm,_y,by=!1,V_=!1,a1,bs,LA=[],zw=!1,j1=[],Fb=typeof document<"u",U_=o3,qM=lv||Ad?"cssFloat":"float",CK=Fb&&!mK&&!o3&&"draggable"in document.createElement("div"),u3=function(){if(Fb){if(Ad)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),h3=function(e,n){var a=hr(e),s=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),d=Mg(e,0,n),l=Mg(e,1,n),o=d&&hr(d),g=l&&hr(l),_=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+uo(d).width,C=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+uo(l).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(d&&o.float&&o.float!=="none"){var I=o.float==="left"?"left":"right";return l&&(g.clear==="both"||g.clear===I)?"vertical":"horizontal"}return d&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||_>=s&&a[qM]==="none"||l&&a[qM]==="none"&&_+C>s)?"vertical":"horizontal"},IK=function(e,n,a){var s=a?e.left:e.top,d=a?e.right:e.bottom,l=a?e.width:e.height,o=a?n.left:n.top,g=a?n.right:n.bottom,_=a?n.width:n.height;return s===o||d===g||s+l/2===o+_/2},MK=function(e,n){var a;return N1.some(function(s){var d=s[Cs].options.emptyInsertThreshold;if(!(!d||lC(s))){var l=uo(s),o=e>=l.left-d&&e<=l.right+d,g=n>=l.top-d&&n<=l.bottom+d;if(o&&g)return a=s}}),a},d3=function(e){function n(d,l){return function(o,g,_,C){var I=o.options.group.name&&g.options.group.name&&o.options.group.name===g.options.group.name;if(d==null&&(l||I))return!0;if(d==null||d===!1)return!1;if(l&&d==="clone")return d;if(typeof d=="function")return n(d(o,g,_,C),l)(o,g,_,C);var E=(l?o:g).options.group.name;return d===!0||typeof d=="string"&&d===E||d.join&&d.indexOf(E)>-1}}var a={},s=e.group;(!s||i1(s)!="object")&&(s={name:s}),a.name=s.name,a.checkPull=n(s.pull,!0),a.checkPut=n(s.put),a.revertClone=s.revertClone,e.group=a},f3=function(){!u3&&Gr&&hr(Gr,"display","none")},p3=function(){!u3&&Gr&&hr(Gr,"display","")};Fb&&document.addEventListener("click",function(t){if(B1)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),B1=!1,!1},!0);var Tp=function(e){if(Bn){e=e.touches?e.touches[0]:e;var n=MK(e.clientX,e.clientY);if(n){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);a.target=a.rootEl=n,a.preventDefault=void 0,a.stopPropagation=void 0,n[Cs]._onDragOver(a)}}},SK=function(e){Bn&&Bn.parentNode[Cs]._isOutsideThisEl(e.target)};function Ir(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Qc({},e),t[Cs]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return h3(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,o){l.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ir.supportPointer!==!1&&"PointerEvent"in window&&!gy,emptyInsertThreshold:5};cv.initializePlugins(this,t,n);for(var a in n)!(a in e)&&(e[a]=n[a]);d3(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:CK,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ni(t,"pointerdown",this._onTapStart):(ni(t,"mousedown",this._onTapStart),ni(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ni(t,"dragover",this),ni(t,"dragenter",this)),N1.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Qc(this,bK())}Ir.prototype={constructor:Ir,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Vm=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Bn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,a=this.el,s=this.options,d=s.preventOnFilter,l=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,g=(o||e).target,_=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||g,C=s.filter;if(OK(a),!Bn&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||s.disabled)&&!_.isContentEditable&&!(!this.nativeDraggable&&gy&&g&&g.tagName.toUpperCase()==="SELECT")&&(g=Du(g,s.draggable,a,!1),!(g&&g.animated)&&o1!==g)){if(tg=No(g),vy=No(g,s.draggable),typeof C=="function"){if(C.call(this,e,g,this)){Xs({sortable:n,rootEl:_,name:"filter",targetEl:g,toEl:a,fromEl:a}),_l("filter",n,{evt:e}),d&&e.cancelable&&e.preventDefault();return}}else if(C&&(C=C.split(",").some(function(I){if(I=Du(_,I.trim(),a,!1),I)return Xs({sortable:n,rootEl:I,name:"filter",targetEl:g,fromEl:a,toEl:a}),_l("filter",n,{evt:e}),!0}),C)){d&&e.cancelable&&e.preventDefault();return}s.handle&&!Du(_,s.handle,a,!1)||this._prepareDragStart(e,o,g)}}},_prepareDragStart:function(e,n,a){var s=this,d=s.el,l=s.options,o=d.ownerDocument,g;if(a&&!Bn&&a.parentNode===d){var _=uo(a);if(co=d,Bn=a,Fo=Bn.parentNode,Pp=Bn.nextSibling,o1=a,j_=l.group,Ir.dragged=Bn,Ep={target:Bn,clientX:(n||e).clientX,clientY:(n||e).clientY},ZM=Ep.clientX-_.left,WM=Ep.clientY-_.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Bn.style["will-change"]="all",g=function(){if(_l("delayEnded",s,{evt:e}),Ir.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!VM&&s.nativeDraggable&&(Bn.draggable=!0),s._triggerDragStart(e,n),Xs({sortable:s,name:"choose",originalEvent:e}),Mo(Bn,l.chosenClass,!0)},l.ignore.split(",").forEach(function(C){s3(Bn,C.trim(),RA)}),ni(o,"dragover",Tp),ni(o,"mousemove",Tp),ni(o,"touchmove",Tp),ni(o,"mouseup",s._onDrop),ni(o,"touchend",s._onDrop),ni(o,"touchcancel",s._onDrop),VM&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Bn.draggable=!0),_l("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(lv||Ad))){if(Ir.eventCanceled){this._onDrop();return}ni(o,"mouseup",s._disableDelayedDrag),ni(o,"touchend",s._disableDelayedDrag),ni(o,"touchcancel",s._disableDelayedDrag),ni(o,"mousemove",s._delayedDragTouchMoveHandler),ni(o,"touchmove",s._delayedDragTouchMoveHandler),l.supportPointer&&ni(o,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(g,l.delay)}else g()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Bn&&RA(Bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Qr(e,"mouseup",this._disableDelayedDrag),Qr(e,"touchend",this._disableDelayedDrag),Qr(e,"touchcancel",this._disableDelayedDrag),Qr(e,"mousemove",this._delayedDragTouchMoveHandler),Qr(e,"touchmove",this._delayedDragTouchMoveHandler),Qr(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?ni(document,"pointermove",this._onTouchMove):n?ni(document,"touchmove",this._onTouchMove):ni(document,"mousemove",this._onTouchMove):(ni(Bn,"dragend",this),ni(co,"dragstart",this._onDragStart));try{document.selection?s1(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Zm=!1,co&&Bn){_l("dragStarted",this,{evt:n}),this.nativeDraggable&&ni(document,"dragover",SK);var a=this.options;!e&&Mo(Bn,a.dragClass,!1),Mo(Bn,a.ghostClass,!0),Ir.active=this,e&&this._appendGhost(),Xs({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Pu){this._lastX=Pu.clientX,this._lastY=Pu.clientY,f3();for(var e=document.elementFromPoint(Pu.clientX,Pu.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Pu.clientX,Pu.clientY),e!==n);)n=e;if(Bn.parentNode[Cs]._isOutsideThisEl(e),n)do{if(n[Cs]){var a=void 0;if(a=n[Cs]._onDragOver({clientX:Pu.clientX,clientY:Pu.clientY,target:e,rootEl:n}),a&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);p3()}},_onTouchMove:function(e){if(Ep){var n=this.options,a=n.fallbackTolerance,s=n.fallbackOffset,d=e.touches?e.touches[0]:e,l=Gr&&Np(Gr,!0),o=Gr&&l&&l.a,g=Gr&&l&&l.d,_=U_&&bs&&$M(bs),C=(d.clientX-Ep.clientX+s.x)/(o||1)+(_?_[0]-LA[0]:0)/(o||1),I=(d.clientY-Ep.clientY+s.y)/(g||1)+(_?_[1]-LA[1]:0)/(g||1);if(!Ir.active&&!Zm){if(a&&Math.max(Math.abs(d.clientX-this._lastX),Math.abs(d.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(Gr){l?(l.e+=C-(PA||0),l.f+=I-(kA||0)):l={a:1,b:0,c:0,d:1,e:C,f:I};var E="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");hr(Gr,"webkitTransform",E),hr(Gr,"mozTransform",E),hr(Gr,"msTransform",E),hr(Gr,"transform",E),PA=C,kA=I,Pu=d}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Gr){var e=this.options.fallbackOnBody?document.body:co,n=uo(Bn,!0,U_,!0,e),a=this.options;if(U_){for(bs=e;hr(bs,"position")==="static"&&hr(bs,"transform")==="none"&&bs!==document;)bs=bs.parentNode;bs!==document.body&&bs!==document.documentElement?(bs===document&&(bs=xh()),n.top+=bs.scrollTop,n.left+=bs.scrollLeft):bs=xh(),LA=$M(bs)}Gr=Bn.cloneNode(!0),Mo(Gr,a.ghostClass,!1),Mo(Gr,a.fallbackClass,!0),Mo(Gr,a.dragClass,!0),hr(Gr,"transition",""),hr(Gr,"transform",""),hr(Gr,"box-sizing","border-box"),hr(Gr,"margin",0),hr(Gr,"top",n.top),hr(Gr,"left",n.left),hr(Gr,"width",n.width),hr(Gr,"height",n.height),hr(Gr,"opacity","0.8"),hr(Gr,"position",U_?"absolute":"fixed"),hr(Gr,"zIndex","100000"),hr(Gr,"pointerEvents","none"),Ir.ghost=Gr,e.appendChild(Gr),hr(Gr,"transform-origin",ZM/parseInt(Gr.style.width)*100+"% "+WM/parseInt(Gr.style.height)*100+"%")}},_onDragStart:function(e,n){var a=this,s=e.dataTransfer,d=a.options;if(_l("dragStart",this,{evt:e}),Ir.eventCanceled){this._onDrop();return}_l("setupClone",this),Ir.eventCanceled||(Bo=cC(Bn),Bo.draggable=!1,Bo.style["will-change"]="",this._hideClone(),Mo(Bo,this.options.chosenClass,!1),Ir.clone=Bo),a.cloneId=s1(function(){_l("clone",a),!Ir.eventCanceled&&(a.options.removeCloneOnHide||co.insertBefore(Bo,Bn),a._hideClone(),Xs({sortable:a,name:"clone"}))}),!n&&Mo(Bn,d.dragClass,!0),n?(B1=!0,a._loopId=setInterval(a._emulateDragOver,50)):(Qr(document,"mouseup",a._onDrop),Qr(document,"touchend",a._onDrop),Qr(document,"touchcancel",a._onDrop),s&&(s.effectAllowed="move",d.setData&&d.setData.call(a,s,Bn)),ni(document,"drop",a),hr(Bn,"transform","translateZ(0)")),Zm=!0,a._dragStartId=s1(a._dragStarted.bind(a,n,e)),ni(document,"selectstart",a),ty=!0,gy&&hr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,a=e.target,s,d,l,o=this.options,g=o.group,_=Ir.active,C=j_===g,I=o.sort,E=is||_,S,k=this,R=!1;if(zw)return;function B(Xt,ge){_l(Xt,k,Mh({evt:e,isOwner:C,axis:S?"vertical":"horizontal",revert:l,dragRect:s,targetRect:d,canSort:I,fromSortable:E,target:a,completed:F,onMove:function(te,Gt){return H_(co,n,Bn,s,te,uo(te),e,Gt)},changed:j},ge))}function V(){B("dragOverAnimationCapture"),k.captureAnimationState(),k!==E&&E.captureAnimationState()}function F(Xt){return B("dragOverCompleted",{insertion:Xt}),Xt&&(C?_._hideClone():_._showClone(k),k!==E&&(Mo(Bn,is?is.options.ghostClass:_.options.ghostClass,!1),Mo(Bn,o.ghostClass,!0)),is!==k&&k!==Ir.active?is=k:k===Ir.active&&is&&(is=null),E===k&&(k._ignoreWhileAnimating=a),k.animateAll(function(){B("dragOverAnimationComplete"),k._ignoreWhileAnimating=null}),k!==E&&(E.animateAll(),E._ignoreWhileAnimating=null)),(a===Bn&&!Bn.animated||a===n&&!a.animated)&&(Vm=null),!o.dragoverBubble&&!e.rootEl&&a!==document&&(Bn.parentNode[Cs]._isOutsideThisEl(e.target),!Xt&&Tp(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),R=!0}function j(){hc=No(Bn),mf=No(Bn,o.draggable),Xs({sortable:k,name:"change",toEl:n,newIndex:hc,newDraggableIndex:mf,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=Du(a,o.draggable,n,!0),B("dragOver"),Ir.eventCanceled)return R;if(Bn.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||k._ignoreWhileAnimating===a)return F(!1);if(B1=!1,_&&!o.disabled&&(C?I||(l=Fo!==co):is===this||(this.lastPutMode=j_.checkPull(this,_,Bn,e))&&g.checkPut(this,_,Bn,e))){if(S=this._getDirection(e,a)==="vertical",s=uo(Bn),B("dragOverValid"),Ir.eventCanceled)return R;if(l)return Fo=co,V(),this._hideClone(),B("revert"),Ir.eventCanceled||(Pp?co.insertBefore(Bn,Pp):co.appendChild(Bn)),F(!0);var G=lC(n,o.draggable);if(!G||kK(e,S,this)&&!G.animated){if(G===Bn)return F(!1);if(G&&n===e.target&&(a=G),a&&(d=uo(a)),H_(co,n,Bn,s,a,d,e,!!a)!==!1)return V(),n.appendChild(Bn),Fo=n,j(),F(!0)}else if(G&&PK(e,S,this)){var Q=Mg(n,0,o,!0);if(Q===Bn)return F(!1);if(a=Q,d=uo(a),H_(co,n,Bn,s,a,d,e,!1)!==!1)return V(),n.insertBefore(Bn,Q),Fo=n,j(),F(!0)}else if(a.parentNode===n){d=uo(a);var nt=0,X,K=Bn.parentNode!==n,Z=!IK(Bn.animated&&Bn.toRect||s,a.animated&&a.toRect||d,S),at=S?"top":"left",pt=HM(a,"top","top")||HM(Bn,"top","top"),rt=pt?pt.scrollTop:void 0;Vm!==a&&(X=d[at],by=!1,V_=!Z&&o.invertSwap||K),nt=LK(e,a,d,S,Z?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,V_,Vm===a);var xt;if(nt!==0){var q=No(Bn);do q-=nt,xt=Fo.children[q];while(xt&&(hr(xt,"display")==="none"||xt===Gr))}if(nt===0||xt===a)return F(!1);Vm=a,_y=nt;var zt=a.nextElementSibling,Rt=!1;Rt=nt===1;var Bt=H_(co,n,Bn,s,a,d,e,Rt);if(Bt!==!1)return(Bt===1||Bt===-1)&&(Rt=Bt===1),zw=!0,setTimeout(TK,30),V(),Rt&&!zt?n.appendChild(Bn):a.parentNode.insertBefore(Bn,Rt?zt:a),pt&&c3(pt,0,rt-pt.scrollTop),Fo=Bn.parentNode,X!==void 0&&!V_&&(a1=Math.abs(X-uo(a)[at])),j(),F(!0)}if(n.contains(Bn))return F(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Qr(document,"mousemove",this._onTouchMove),Qr(document,"touchmove",this._onTouchMove),Qr(document,"pointermove",this._onTouchMove),Qr(document,"dragover",Tp),Qr(document,"mousemove",Tp),Qr(document,"touchmove",Tp)},_offUpEvents:function(){var e=this.el.ownerDocument;Qr(e,"mouseup",this._onDrop),Qr(e,"touchend",this._onDrop),Qr(e,"pointerup",this._onDrop),Qr(e,"touchcancel",this._onDrop),Qr(document,"selectstart",this)},_onDrop:function(e){var n=this.el,a=this.options;if(hc=No(Bn),mf=No(Bn,a.draggable),_l("drop",this,{evt:e}),Fo=Bn&&Bn.parentNode,hc=No(Bn),mf=No(Bn,a.draggable),Ir.eventCanceled){this._nulling();return}Zm=!1,V_=!1,by=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Fw(this.cloneId),Fw(this._dragStartId),this.nativeDraggable&&(Qr(document,"drop",this),Qr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),gy&&hr(document.body,"user-select",""),hr(Bn,"transform",""),e&&(ty&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),Gr&&Gr.parentNode&&Gr.parentNode.removeChild(Gr),(co===Fo||is&&is.lastPutMode!=="clone")&&Bo&&Bo.parentNode&&Bo.parentNode.removeChild(Bo),Bn&&(this.nativeDraggable&&Qr(Bn,"dragend",this),RA(Bn),Bn.style["will-change"]="",ty&&!Zm&&Mo(Bn,is?is.options.ghostClass:this.options.ghostClass,!1),Mo(Bn,this.options.chosenClass,!1),Xs({sortable:this,name:"unchoose",toEl:Fo,newIndex:null,newDraggableIndex:null,originalEvent:e}),co!==Fo?(hc>=0&&(Xs({rootEl:Fo,name:"add",toEl:Fo,fromEl:co,originalEvent:e}),Xs({sortable:this,name:"remove",toEl:Fo,originalEvent:e}),Xs({rootEl:Fo,name:"sort",toEl:Fo,fromEl:co,originalEvent:e}),Xs({sortable:this,name:"sort",toEl:Fo,originalEvent:e})),is&&is.save()):hc!==tg&&hc>=0&&(Xs({sortable:this,name:"update",toEl:Fo,originalEvent:e}),Xs({sortable:this,name:"sort",toEl:Fo,originalEvent:e})),Ir.active&&((hc==null||hc===-1)&&(hc=tg,mf=vy),Xs({sortable:this,name:"end",toEl:Fo,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){_l("nulling",this),co=Bn=Fo=Gr=Pp=Bo=o1=yf=Ep=Pu=ty=hc=mf=tg=vy=Vm=_y=is=j_=Ir.dragged=Ir.ghost=Ir.clone=Ir.active=null,j1.forEach(function(e){e.checked=!0}),j1.length=PA=kA=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Bn&&(this._onDragOver(e),EK(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,a=this.el.children,s=0,d=a.length,l=this.options;s<d;s++)n=a[s],Du(n,l.draggable,this.el,!1)&&e.push(n.getAttribute(l.dataIdAttr)||DK(n));return e},sort:function(e,n){var a={},s=this.el;this.toArray().forEach(function(d,l){var o=s.children[l];Du(o,this.options.draggable,s,!1)&&(a[d]=o)},this),n&&this.captureAnimationState(),e.forEach(function(d){a[d]&&(s.removeChild(a[d]),s.appendChild(a[d]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Du(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var a=this.options;if(n===void 0)return a[e];var s=cv.modifyOption(this,e,n);typeof s<"u"?a[e]=s:a[e]=n,e==="group"&&d3(a)},destroy:function(){_l("destroy",this);var e=this.el;e[Cs]=null,Qr(e,"mousedown",this._onTapStart),Qr(e,"touchstart",this._onTapStart),Qr(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Qr(e,"dragover",this),Qr(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),N1.splice(N1.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!yf){if(_l("hideClone",this),Ir.eventCanceled)return;hr(Bo,"display","none"),this.options.removeCloneOnHide&&Bo.parentNode&&Bo.parentNode.removeChild(Bo),yf=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(yf){if(_l("showClone",this),Ir.eventCanceled)return;Bn.parentNode==co&&!this.options.group.revertClone?co.insertBefore(Bo,Bn):Pp?co.insertBefore(Bo,Pp):co.appendChild(Bo),this.options.group.revertClone&&this.animate(Bn,Bo),hr(Bo,"display",""),yf=!1}}};function EK(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function H_(t,e,n,a,s,d,l,o){var g,_=t[Cs],C=_.options.onMove,I;return window.CustomEvent&&!Ad&&!lv?g=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent("move",!0,!0)),g.to=e,g.from=t,g.dragged=n,g.draggedRect=a,g.related=s||e,g.relatedRect=d||uo(e),g.willInsertAfter=o,g.originalEvent=l,t.dispatchEvent(g),C&&(I=C.call(_,g,l)),I}function RA(t){t.draggable=!1}function TK(){zw=!1}function PK(t,e,n){var a=uo(Mg(n.el,0,n.options,!0)),s=10;return e?t.clientX<a.left-s||t.clientY<a.top&&t.clientX<a.right:t.clientY<a.top-s||t.clientY<a.bottom&&t.clientX<a.left}function kK(t,e,n){var a=uo(lC(n.el,n.options.draggable)),s=10;return e?t.clientX>a.right+s||t.clientX<=a.right&&t.clientY>a.bottom&&t.clientX>=a.left:t.clientX>a.right&&t.clientY>a.top||t.clientX<=a.right&&t.clientY>a.bottom+s}function LK(t,e,n,a,s,d,l,o){var g=a?t.clientY:t.clientX,_=a?n.height:n.width,C=a?n.top:n.left,I=a?n.bottom:n.right,E=!1;if(!l){if(o&&a1<_*s){if(!by&&(_y===1?g>C+_*d/2:g<I-_*d/2)&&(by=!0),by)E=!0;else if(_y===1?g<C+a1:g>I-a1)return-_y}else if(g>C+_*(1-s)/2&&g<I-_*(1-s)/2)return RK(e)}return E=E||l,E&&(g<C+_*d/2||g>I-_*d/2)?g>C+_/2?1:-1:0}function RK(t){return No(Bn)<No(t)?1:-1}function DK(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,a=0;n--;)a+=e.charCodeAt(n);return a.toString(36)}function OK(t){j1.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var a=e[n];a.checked&&j1.push(a)}}function s1(t){return setTimeout(t,0)}function Fw(t){return clearTimeout(t)}Fb&&ni(document,"touchmove",function(t){(Ir.active||Zm)&&t.cancelable&&t.preventDefault()});Ir.utils={on:ni,off:Qr,css:hr,find:s3,is:function(e,n){return!!Du(e,n,e,!1)},extend:vK,throttle:l3,closest:Du,toggleClass:Mo,clone:cC,index:No,nextTick:s1,cancelNextTick:Fw,detectDirection:h3,getChild:Mg};Ir.get=function(t){return t[Cs]};Ir.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(Ir.utils=Mh(Mh({},Ir.utils),a.utils)),cv.mount(a)})};Ir.create=function(t,e){return new Ir(t,e)};Ir.version=pK;var aa=[],ey,Bw,Nw=!1,DA,OA,V1,ny;function zK(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var a=n.originalEvent;this.sortable.nativeDraggable?ni(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ni(document,"pointermove",this._handleFallbackAutoScroll):a.touches?ni(document,"touchmove",this._handleFallbackAutoScroll):ni(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var a=n.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?Qr(document,"dragover",this._handleAutoScroll):(Qr(document,"pointermove",this._handleFallbackAutoScroll),Qr(document,"touchmove",this._handleFallbackAutoScroll),Qr(document,"mousemove",this._handleFallbackAutoScroll)),KM(),l1(),_K()},nulling:function(){V1=Bw=ey=Nw=ny=DA=OA=null,aa.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,a){var s=this,d=(n.touches?n.touches[0]:n).clientX,l=(n.touches?n.touches[0]:n).clientY,o=document.elementFromPoint(d,l);if(V1=n,a||this.options.forceAutoScrollFallback||lv||Ad||gy){zA(n,this.options,o,a);var g=_f(o,!0);Nw&&(!ny||d!==DA||l!==OA)&&(ny&&KM(),ny=setInterval(function(){var _=_f(document.elementFromPoint(d,l),!0);_!==g&&(g=_,l1()),zA(n,s.options,_,a)},10),DA=d,OA=l)}else{if(!this.options.bubbleScroll||_f(o,!0)===xh()){l1();return}zA(n,this.options,_f(o,!1),!1)}}},Qc(t,{pluginName:"scroll",initializeByDefault:!0})}function l1(){aa.forEach(function(t){clearInterval(t.pid)}),aa=[]}function KM(){clearInterval(ny)}var zA=l3(function(t,e,n,a){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,d=(t.touches?t.touches[0]:t).clientY,l=e.scrollSensitivity,o=e.scrollSpeed,g=xh(),_=!1,C;Bw!==n&&(Bw=n,l1(),ey=e.scroll,C=e.scrollFn,ey===!0&&(ey=_f(n,!0)));var I=0,E=ey;do{var S=E,k=uo(S),R=k.top,B=k.bottom,V=k.left,F=k.right,j=k.width,G=k.height,Q=void 0,nt=void 0,X=S.scrollWidth,K=S.scrollHeight,Z=hr(S),at=S.scrollLeft,pt=S.scrollTop;S===g?(Q=j<X&&(Z.overflowX==="auto"||Z.overflowX==="scroll"||Z.overflowX==="visible"),nt=G<K&&(Z.overflowY==="auto"||Z.overflowY==="scroll"||Z.overflowY==="visible")):(Q=j<X&&(Z.overflowX==="auto"||Z.overflowX==="scroll"),nt=G<K&&(Z.overflowY==="auto"||Z.overflowY==="scroll"));var rt=Q&&(Math.abs(F-s)<=l&&at+j<X)-(Math.abs(V-s)<=l&&!!at),xt=nt&&(Math.abs(B-d)<=l&&pt+G<K)-(Math.abs(R-d)<=l&&!!pt);if(!aa[I])for(var q=0;q<=I;q++)aa[q]||(aa[q]={});(aa[I].vx!=rt||aa[I].vy!=xt||aa[I].el!==S)&&(aa[I].el=S,aa[I].vx=rt,aa[I].vy=xt,clearInterval(aa[I].pid),(rt!=0||xt!=0)&&(_=!0,aa[I].pid=setInterval((function(){a&&this.layer===0&&Ir.active._onTouchMove(V1);var zt=aa[this.layer].vy?aa[this.layer].vy*o:0,Rt=aa[this.layer].vx?aa[this.layer].vx*o:0;typeof C=="function"&&C.call(Ir.dragged.parentNode[Cs],Rt,zt,t,V1,aa[this.layer].el)!=="continue"||c3(aa[this.layer].el,Rt,zt)}).bind({layer:I}),24))),I++}while(e.bubbleScroll&&E!==g&&(E=_f(E,!1)));Nw=_}},30),m3=function(e){var n=e.originalEvent,a=e.putSortable,s=e.dragEl,d=e.activeSortable,l=e.dispatchSortableEvent,o=e.hideGhostForTarget,g=e.unhideGhostForTarget;if(n){var _=a||d;o();var C=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,I=document.elementFromPoint(C.clientX,C.clientY);g(),_&&!_.el.contains(I)&&(l("spill"),this.onSpill({dragEl:s,putSortable:a}))}};function uC(){}uC.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var s=Mg(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(n,s):this.sortable.el.appendChild(n),this.sortable.animateAll(),a&&a.animateAll()},drop:m3};Qc(uC,{pluginName:"revertOnSpill"});function hC(){}hC.prototype={onSpill:function(e){var n=e.dragEl,a=e.putSortable,s=a||this.sortable;s.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),s.animateAll()},drop:m3};Qc(hC,{pluginName:"removeOnSpill"});var Gc;function FK(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var a=n.dragEl;Gc=a},dragOverValid:function(n){var a=n.completed,s=n.target,d=n.onMove,l=n.activeSortable,o=n.changed,g=n.cancel;if(l.options.swap){var _=this.sortable.el,C=this.options;if(s&&s!==_){var I=Gc;d(s)!==!1?(Mo(s,C.swapClass,!0),Gc=s):Gc=null,I&&I!==Gc&&Mo(I,C.swapClass,!1)}o(),a(!0),g()}},drop:function(n){var a=n.activeSortable,s=n.putSortable,d=n.dragEl,l=s||this.sortable,o=this.options;Gc&&Mo(Gc,o.swapClass,!1),Gc&&(o.swap||s&&s.options.swap)&&d!==Gc&&(l.captureAnimationState(),l!==a&&a.captureAnimationState(),BK(d,Gc),l.animateAll(),l!==a&&a.animateAll())},nulling:function(){Gc=null}},Qc(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Gc}}})}function BK(t,e){var n=t.parentNode,a=e.parentNode,s,d;!n||!a||n.isEqualNode(e)||a.isEqualNode(t)||(s=No(t),d=No(e),n.isEqualNode(a)&&s<d&&d++,n.insertBefore(e,n.children[s]),a.insertBefore(t,a.children[d]))}var zr=[],uc=[],$0,ku,G0=!1,bl=!1,Um=!1,Yi,Z0,$_;function NK(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?ni(document,"pointerup",this._deselectMultiDrag):(ni(document,"mouseup",this._deselectMultiDrag),ni(document,"touchend",this._deselectMultiDrag)),ni(document,"keydown",this._checkKeyDown),ni(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,d){var l="";zr.length&&ku===e?zr.forEach(function(o,g){l+=(g?", ":"")+o.textContent}):l=d.textContent,s.setData("Text",l)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var a=n.dragEl;Yi=a},delayEnded:function(){this.isMultiDrag=~zr.indexOf(Yi)},setupClone:function(n){var a=n.sortable,s=n.cancel;if(this.isMultiDrag){for(var d=0;d<zr.length;d++)uc.push(cC(zr[d])),uc[d].sortableIndex=zr[d].sortableIndex,uc[d].draggable=!1,uc[d].style["will-change"]="",Mo(uc[d],this.options.selectedClass,!1),zr[d]===Yi&&Mo(uc[d],this.options.chosenClass,!1);a._hideClone(),s()}},clone:function(n){var a=n.sortable,s=n.rootEl,d=n.dispatchSortableEvent,l=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||zr.length&&ku===a&&(YM(!0,s),d("clone"),l()))},showClone:function(n){var a=n.cloneNowShown,s=n.rootEl,d=n.cancel;this.isMultiDrag&&(YM(!1,s),uc.forEach(function(l){hr(l,"display","")}),a(),$_=!1,d())},hideClone:function(n){var a=this;n.sortable;var s=n.cloneNowHidden,d=n.cancel;this.isMultiDrag&&(uc.forEach(function(l){hr(l,"display","none"),a.options.removeCloneOnHide&&l.parentNode&&l.parentNode.removeChild(l)}),s(),$_=!0,d())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&ku&&ku.multiDrag._deselectMultiDrag(),zr.forEach(function(a){a.sortableIndex=No(a)}),zr=zr.sort(function(a,s){return a.sortableIndex-s.sortableIndex}),Um=!0},dragStarted:function(n){var a=this,s=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){zr.forEach(function(l){l!==Yi&&hr(l,"position","absolute")});var d=uo(Yi,!1,!0,!0);zr.forEach(function(l){l!==Yi&&GM(l,d)}),bl=!0,G0=!0}s.animateAll(function(){bl=!1,G0=!1,a.options.animation&&zr.forEach(function(l){EA(l)}),a.options.sort&&G_()})}},dragOver:function(n){var a=n.target,s=n.completed,d=n.cancel;bl&&~zr.indexOf(a)&&(s(!1),d())},revert:function(n){var a=n.fromSortable,s=n.rootEl,d=n.sortable,l=n.dragRect;zr.length>1&&(zr.forEach(function(o){d.addAnimationState({target:o,rect:bl?uo(o):l}),EA(o),o.fromRect=l,a.removeAnimationState(o)}),bl=!1,jK(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(n){var a=n.sortable,s=n.isOwner,d=n.insertion,l=n.activeSortable,o=n.parentEl,g=n.putSortable,_=this.options;if(d){if(s&&l._hideClone(),G0=!1,_.animation&&zr.length>1&&(bl||!s&&!l.options.sort&&!g)){var C=uo(Yi,!1,!0,!0);zr.forEach(function(E){E!==Yi&&(GM(E,C),o.appendChild(E))}),bl=!0}if(!s)if(bl||G_(),zr.length>1){var I=$_;l._showClone(a),l.options.animation&&!$_&&I&&uc.forEach(function(E){l.addAnimationState({target:E,rect:Z0}),E.fromRect=Z0,E.thisAnimationDuration=null})}else l._showClone(a)}},dragOverAnimationCapture:function(n){var a=n.dragRect,s=n.isOwner,d=n.activeSortable;if(zr.forEach(function(o){o.thisAnimationDuration=null}),d.options.animation&&!s&&d.multiDrag.isMultiDrag){Z0=Qc({},a);var l=Np(Yi,!0);Z0.top-=l.f,Z0.left-=l.e}},dragOverAnimationComplete:function(){bl&&(bl=!1,G_())},drop:function(n){var a=n.originalEvent,s=n.rootEl,d=n.parentEl,l=n.sortable,o=n.dispatchSortableEvent,g=n.oldIndex,_=n.putSortable,C=_||this.sortable;if(a){var I=this.options,E=d.children;if(!Um)if(I.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Mo(Yi,I.selectedClass,!~zr.indexOf(Yi)),~zr.indexOf(Yi))zr.splice(zr.indexOf(Yi),1),$0=null,J0({sortable:l,rootEl:s,name:"deselect",targetEl:Yi,originalEvt:a});else{if(zr.push(Yi),J0({sortable:l,rootEl:s,name:"select",targetEl:Yi,originalEvt:a}),a.shiftKey&&$0&&l.el.contains($0)){var S=No($0),k=No(Yi);if(~S&&~k&&S!==k){var R,B;for(k>S?(B=S,R=k):(B=k,R=S+1);B<R;B++)~zr.indexOf(E[B])||(Mo(E[B],I.selectedClass,!0),zr.push(E[B]),J0({sortable:l,rootEl:s,name:"select",targetEl:E[B],originalEvt:a}))}}else $0=Yi;ku=C}if(Um&&this.isMultiDrag){if(bl=!1,(d[Cs].options.sort||d!==s)&&zr.length>1){var V=uo(Yi),F=No(Yi,":not(."+this.options.selectedClass+")");if(!G0&&I.animation&&(Yi.thisAnimationDuration=null),C.captureAnimationState(),!G0&&(I.animation&&(Yi.fromRect=V,zr.forEach(function(G){if(G.thisAnimationDuration=null,G!==Yi){var Q=bl?uo(G):V;G.fromRect=Q,C.addAnimationState({target:G,rect:Q})}})),G_(),zr.forEach(function(G){E[F]?d.insertBefore(G,E[F]):d.appendChild(G),F++}),g===No(Yi))){var j=!1;zr.forEach(function(G){if(G.sortableIndex!==No(G)){j=!0;return}}),j&&o("update")}zr.forEach(function(G){EA(G)}),C.animateAll()}ku=C}(s===d||_&&_.lastPutMode!=="clone")&&uc.forEach(function(G){G.parentNode&&G.parentNode.removeChild(G)})}},nullingGlobal:function(){this.isMultiDrag=Um=!1,uc.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Qr(document,"pointerup",this._deselectMultiDrag),Qr(document,"mouseup",this._deselectMultiDrag),Qr(document,"touchend",this._deselectMultiDrag),Qr(document,"keydown",this._checkKeyDown),Qr(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Um<"u"&&Um)&&ku===this.sortable&&!(n&&Du(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;zr.length;){var a=zr[0];Mo(a,this.options.selectedClass,!1),zr.shift(),J0({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:a,originalEvt:n})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Qc(t,{pluginName:"multiDrag",utils:{select:function(n){var a=n.parentNode[Cs];!a||!a.options.multiDrag||~zr.indexOf(n)||(ku&&ku!==a&&(ku.multiDrag._deselectMultiDrag(),ku=a),Mo(n,a.options.selectedClass,!0),zr.push(n))},deselect:function(n){var a=n.parentNode[Cs],s=zr.indexOf(n);!a||!a.options.multiDrag||!~s||(Mo(n,a.options.selectedClass,!1),zr.splice(s,1))}},eventProperties:function(){var n=this,a=[],s=[];return zr.forEach(function(d){a.push({multiDragElement:d,index:d.sortableIndex});var l;bl&&d!==Yi?l=-1:bl?l=No(d,":not(."+n.options.selectedClass+")"):l=No(d),s.push({multiDragElement:d,index:l})}),{items:cK(zr),clones:[].concat(uc),oldIndicies:a,newIndicies:s}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function jK(t,e){zr.forEach(function(n,a){var s=e.children[n.sortableIndex+(t?Number(a):0)];s?e.insertBefore(n,s):e.appendChild(n)})}function YM(t,e){uc.forEach(function(n,a){var s=e.children[n.sortableIndex+(t?Number(a):0)];s?e.insertBefore(n,s):e.appendChild(n)})}function G_(){zr.forEach(function(t){t!==Yi&&t.parentNode&&t.parentNode.removeChild(t)})}Ir.mount(new zK);Ir.mount(hC,uC);const VK=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:NK,Sortable:Ir,Swap:FK,default:Ir},Symbol.toStringTag,{value:"Module"})),UK=Wy(VK);(function(t,e){(function(a,s){t.exports=s(oK,UK)})(typeof self<"u"?self:ho,function(n,a){return function(s){var d={};function l(o){if(d[o])return d[o].exports;var g=d[o]={i:o,l:!1,exports:{}};return s[o].call(g.exports,g,g.exports,l),g.l=!0,g.exports}return l.m=s,l.c=d,l.d=function(o,g,_){l.o(o,g)||Object.defineProperty(o,g,{enumerable:!0,get:_})},l.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},l.t=function(o,g){if(g&1&&(o=l(o)),g&8||g&4&&typeof o=="object"&&o&&o.__esModule)return o;var _=Object.create(null);if(l.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:o}),g&2&&typeof o!="string")for(var C in o)l.d(_,C,(function(I){return o[I]}).bind(null,C));return _},l.n=function(o){var g=o&&o.__esModule?function(){return o.default}:function(){return o};return l.d(g,"a",g),g},l.o=function(o,g){return Object.prototype.hasOwnProperty.call(o,g)},l.p="",l(l.s="fb15")}({"00ee":function(s,d,l){var o=l("b622"),g=o("toStringTag"),_={};_[g]="z",s.exports=String(_)==="[object z]"},"0366":function(s,d,l){var o=l("1c0b");s.exports=function(g,_,C){if(o(g),_===void 0)return g;switch(C){case 0:return function(){return g.call(_)};case 1:return function(I){return g.call(_,I)};case 2:return function(I,E){return g.call(_,I,E)};case 3:return function(I,E,S){return g.call(_,I,E,S)}}return function(){return g.apply(_,arguments)}}},"057f":function(s,d,l){var o=l("fc6a"),g=l("241c").f,_={}.toString,C=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],I=function(E){try{return g(E)}catch{return C.slice()}};s.exports.f=function(S){return C&&_.call(S)=="[object Window]"?I(S):g(o(S))}},"06cf":function(s,d,l){var o=l("83ab"),g=l("d1e7"),_=l("5c6c"),C=l("fc6a"),I=l("c04e"),E=l("5135"),S=l("0cfb"),k=Object.getOwnPropertyDescriptor;d.f=o?k:function(B,V){if(B=C(B),V=I(V,!0),S)try{return k(B,V)}catch{}if(E(B,V))return _(!g.f.call(B,V),B[V])}},"0cfb":function(s,d,l){var o=l("83ab"),g=l("d039"),_=l("cc12");s.exports=!o&&!g(function(){return Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,d,l){var o=l("23e7"),g=l("d58f").left,_=l("a640"),C=l("ae40"),I=_("reduce"),E=C("reduce",{1:0});o({target:"Array",proto:!0,forced:!I||!E},{reduce:function(k){return g(this,k,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,d,l){var o=l("c6b6"),g=l("9263");s.exports=function(_,C){var I=_.exec;if(typeof I=="function"){var E=I.call(_,C);if(typeof E!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return E}if(o(_)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return g.call(_,C)}},"159b":function(s,d,l){var o=l("da84"),g=l("fdbc"),_=l("17c2"),C=l("9112");for(var I in g){var E=o[I],S=E&&E.prototype;if(S&&S.forEach!==_)try{C(S,"forEach",_)}catch{S.forEach=_}}},"17c2":function(s,d,l){var o=l("b727").forEach,g=l("a640"),_=l("ae40"),C=g("forEach"),I=_("forEach");s.exports=!C||!I?function(S){return o(this,S,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,d,l){var o=l("d066");s.exports=o("document","documentElement")},"1c0b":function(s,d){s.exports=function(l){if(typeof l!="function")throw TypeError(String(l)+" is not a function");return l}},"1c7e":function(s,d,l){var o=l("b622"),g=o("iterator"),_=!1;try{var C=0,I={next:function(){return{done:!!C++}},return:function(){_=!0}};I[g]=function(){return this},Array.from(I,function(){throw 2})}catch{}s.exports=function(E,S){if(!S&&!_)return!1;var k=!1;try{var R={};R[g]=function(){return{next:function(){return{done:k=!0}}}},E(R)}catch{}return k}},"1d80":function(s,d){s.exports=function(l){if(l==null)throw TypeError("Can't call method on "+l);return l}},"1dde":function(s,d,l){var o=l("d039"),g=l("b622"),_=l("2d00"),C=g("species");s.exports=function(I){return _>=51||!o(function(){var E=[],S=E.constructor={};return S[C]=function(){return{foo:1}},E[I](Boolean).foo!==1})}},"23cb":function(s,d,l){var o=l("a691"),g=Math.max,_=Math.min;s.exports=function(C,I){var E=o(C);return E<0?g(E+I,0):_(E,I)}},"23e7":function(s,d,l){var o=l("da84"),g=l("06cf").f,_=l("9112"),C=l("6eeb"),I=l("ce4e"),E=l("e893"),S=l("94ca");s.exports=function(k,R){var B=k.target,V=k.global,F=k.stat,j,G,Q,nt,X,K;if(V?G=o:F?G=o[B]||I(B,{}):G=(o[B]||{}).prototype,G)for(Q in R){if(X=R[Q],k.noTargetGet?(K=g(G,Q),nt=K&&K.value):nt=G[Q],j=S(V?Q:B+(F?".":"#")+Q,k.forced),!j&&nt!==void 0){if(typeof X==typeof nt)continue;E(X,nt)}(k.sham||nt&&nt.sham)&&_(X,"sham",!0),C(G,Q,X,k)}}},"241c":function(s,d,l){var o=l("ca84"),g=l("7839"),_=g.concat("length","prototype");d.f=Object.getOwnPropertyNames||function(I){return o(I,_)}},"25f0":function(s,d,l){var o=l("6eeb"),g=l("825a"),_=l("d039"),C=l("ad6d"),I="toString",E=RegExp.prototype,S=E[I],k=_(function(){return S.call({source:"a",flags:"b"})!="/a/b"}),R=S.name!=I;(k||R)&&o(RegExp.prototype,I,function(){var V=g(this),F=String(V.source),j=V.flags,G=String(j===void 0&&V instanceof RegExp&&!("flags"in E)?C.call(V):j);return"/"+F+"/"+G},{unsafe:!0})},"2ca0":function(s,d,l){var o=l("23e7"),g=l("06cf").f,_=l("50c4"),C=l("5a34"),I=l("1d80"),E=l("ab13"),S=l("c430"),k="".startsWith,R=Math.min,B=E("startsWith"),V=!S&&!B&&!!function(){var F=g(String.prototype,"startsWith");return F&&!F.writable}();o({target:"String",proto:!0,forced:!V&&!B},{startsWith:function(j){var G=String(I(this));C(j);var Q=_(R(arguments.length>1?arguments[1]:void 0,G.length)),nt=String(j);return k?k.call(G,nt,Q):G.slice(Q,Q+nt.length)===nt}})},"2d00":function(s,d,l){var o=l("da84"),g=l("342f"),_=o.process,C=_&&_.versions,I=C&&C.v8,E,S;I?(E=I.split("."),S=E[0]+E[1]):g&&(E=g.match(/Edge\/(\d+)/),(!E||E[1]>=74)&&(E=g.match(/Chrome\/(\d+)/),E&&(S=E[1]))),s.exports=S&&+S},"342f":function(s,d,l){var o=l("d066");s.exports=o("navigator","userAgent")||""},"35a1":function(s,d,l){var o=l("f5df"),g=l("3f8c"),_=l("b622"),C=_("iterator");s.exports=function(I){if(I!=null)return I[C]||I["@@iterator"]||g[o(I)]}},"37e8":function(s,d,l){var o=l("83ab"),g=l("9bf2"),_=l("825a"),C=l("df75");s.exports=o?Object.defineProperties:function(E,S){_(E);for(var k=C(S),R=k.length,B=0,V;R>B;)g.f(E,V=k[B++],S[V]);return E}},"3bbe":function(s,d,l){var o=l("861d");s.exports=function(g){if(!o(g)&&g!==null)throw TypeError("Can't set "+String(g)+" as a prototype");return g}},"3ca3":function(s,d,l){var o=l("6547").charAt,g=l("69f3"),_=l("7dd0"),C="String Iterator",I=g.set,E=g.getterFor(C);_(String,"String",function(S){I(this,{type:C,string:String(S),index:0})},function(){var k=E(this),R=k.string,B=k.index,V;return B>=R.length?{value:void 0,done:!0}:(V=o(R,B),k.index+=V.length,{value:V,done:!1})})},"3f8c":function(s,d){s.exports={}},4160:function(s,d,l){var o=l("23e7"),g=l("17c2");o({target:"Array",proto:!0,forced:[].forEach!=g},{forEach:g})},"428f":function(s,d,l){var o=l("da84");s.exports=o},"44ad":function(s,d,l){var o=l("d039"),g=l("c6b6"),_="".split;s.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(C){return g(C)=="String"?_.call(C,""):Object(C)}:Object},"44d2":function(s,d,l){var o=l("b622"),g=l("7c73"),_=l("9bf2"),C=o("unscopables"),I=Array.prototype;I[C]==null&&_.f(I,C,{configurable:!0,value:g(null)}),s.exports=function(E){I[C][E]=!0}},"44e7":function(s,d,l){var o=l("861d"),g=l("c6b6"),_=l("b622"),C=_("match");s.exports=function(I){var E;return o(I)&&((E=I[C])!==void 0?!!E:g(I)=="RegExp")}},4930:function(s,d,l){var o=l("d039");s.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},"4d64":function(s,d,l){var o=l("fc6a"),g=l("50c4"),_=l("23cb"),C=function(I){return function(E,S,k){var R=o(E),B=g(R.length),V=_(k,B),F;if(I&&S!=S){for(;B>V;)if(F=R[V++],F!=F)return!0}else for(;B>V;V++)if((I||V in R)&&R[V]===S)return I||V||0;return!I&&-1}};s.exports={includes:C(!0),indexOf:C(!1)}},"4de4":function(s,d,l){var o=l("23e7"),g=l("b727").filter,_=l("1dde"),C=l("ae40"),I=_("filter"),E=C("filter");o({target:"Array",proto:!0,forced:!I||!E},{filter:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,d,l){var o=l("0366"),g=l("7b0b"),_=l("9bdd"),C=l("e95a"),I=l("50c4"),E=l("8418"),S=l("35a1");s.exports=function(R){var B=g(R),V=typeof this=="function"?this:Array,F=arguments.length,j=F>1?arguments[1]:void 0,G=j!==void 0,Q=S(B),nt=0,X,K,Z,at,pt,rt;if(G&&(j=o(j,F>2?arguments[2]:void 0,2)),Q!=null&&!(V==Array&&C(Q)))for(at=Q.call(B),pt=at.next,K=new V;!(Z=pt.call(at)).done;nt++)rt=G?_(at,j,[Z.value,nt],!0):Z.value,E(K,nt,rt);else for(X=I(B.length),K=new V(X);X>nt;nt++)rt=G?j(B[nt],nt):B[nt],E(K,nt,rt);return K.length=nt,K}},"4fad":function(s,d,l){var o=l("23e7"),g=l("6f53").entries;o({target:"Object",stat:!0},{entries:function(C){return g(C)}})},"50c4":function(s,d,l){var o=l("a691"),g=Math.min;s.exports=function(_){return _>0?g(o(_),9007199254740991):0}},5135:function(s,d){var l={}.hasOwnProperty;s.exports=function(o,g){return l.call(o,g)}},5319:function(s,d,l){var o=l("d784"),g=l("825a"),_=l("7b0b"),C=l("50c4"),I=l("a691"),E=l("1d80"),S=l("8aa5"),k=l("14c3"),R=Math.max,B=Math.min,V=Math.floor,F=/\$([$&'`]|\d\d?|<[^>]*>)/g,j=/\$([$&'`]|\d\d?)/g,G=function(Q){return Q===void 0?Q:String(Q)};o("replace",2,function(Q,nt,X,K){var Z=K.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,at=K.REPLACE_KEEPS_$0,pt=Z?"$":"$0";return[function(q,zt){var Rt=E(this),Bt=q==null?void 0:q[Q];return Bt!==void 0?Bt.call(q,Rt,zt):nt.call(String(Rt),q,zt)},function(xt,q){if(!Z&&at||typeof q=="string"&&q.indexOf(pt)===-1){var zt=X(nt,xt,this,q);if(zt.done)return zt.value}var Rt=g(xt),Bt=String(this),Xt=typeof q=="function";Xt||(q=String(q));var ge=Rt.global;if(ge){var en=Rt.unicode;Rt.lastIndex=0}for(var te=[];;){var Gt=k(Rt,Bt);if(Gt===null||(te.push(Gt),!ge))break;var Re=String(Gt[0]);Re===""&&(Rt.lastIndex=S(Bt,C(Rt.lastIndex),en))}for(var Ge="",Ce=0,nn=0;nn<te.length;nn++){Gt=te[nn];for(var be=String(Gt[0]),Se=R(B(I(Gt.index),Bt.length),0),xe=[],Be=1;Be<Gt.length;Be++)xe.push(G(Gt[Be]));var tn=Gt.groups;if(Xt){var Ln=[be].concat(xe,Se,Bt);tn!==void 0&&Ln.push(tn);var Tt=String(q.apply(void 0,Ln))}else Tt=rt(be,Bt,Se,xe,tn,q);Se>=Ce&&(Ge+=Bt.slice(Ce,Se)+Tt,Ce=Se+be.length)}return Ge+Bt.slice(Ce)}];function rt(xt,q,zt,Rt,Bt,Xt){var ge=zt+xt.length,en=Rt.length,te=j;return Bt!==void 0&&(Bt=_(Bt),te=F),nt.call(Xt,te,function(Gt,Re){var Ge;switch(Re.charAt(0)){case"$":return"$";case"&":return xt;case"`":return q.slice(0,zt);case"'":return q.slice(ge);case"<":Ge=Bt[Re.slice(1,-1)];break;default:var Ce=+Re;if(Ce===0)return Gt;if(Ce>en){var nn=V(Ce/10);return nn===0?Gt:nn<=en?Rt[nn-1]===void 0?Re.charAt(1):Rt[nn-1]+Re.charAt(1):Gt}Ge=Rt[Ce-1]}return Ge===void 0?"":Ge})}})},5692:function(s,d,l){var o=l("c430"),g=l("c6cd");(s.exports=function(_,C){return g[_]||(g[_]=C!==void 0?C:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,d,l){var o=l("d066"),g=l("241c"),_=l("7418"),C=l("825a");s.exports=o("Reflect","ownKeys")||function(E){var S=g.f(C(E)),k=_.f;return k?S.concat(k(E)):S}},"5a34":function(s,d,l){var o=l("44e7");s.exports=function(g){if(o(g))throw TypeError("The method doesn't accept regular expressions");return g}},"5c6c":function(s,d){s.exports=function(l,o){return{enumerable:!(l&1),configurable:!(l&2),writable:!(l&4),value:o}}},"5db7":function(s,d,l){var o=l("23e7"),g=l("a2bf"),_=l("7b0b"),C=l("50c4"),I=l("1c0b"),E=l("65f0");o({target:"Array",proto:!0},{flatMap:function(k){var R=_(this),B=C(R.length),V;return I(k),V=E(R,0),V.length=g(V,R,R,B,0,1,k,arguments.length>1?arguments[1]:void 0),V}})},6547:function(s,d,l){var o=l("a691"),g=l("1d80"),_=function(C){return function(I,E){var S=String(g(I)),k=o(E),R=S.length,B,V;return k<0||k>=R?C?"":void 0:(B=S.charCodeAt(k),B<55296||B>56319||k+1===R||(V=S.charCodeAt(k+1))<56320||V>57343?C?S.charAt(k):B:C?S.slice(k,k+2):(B-55296<<10)+(V-56320)+65536)}};s.exports={codeAt:_(!1),charAt:_(!0)}},"65f0":function(s,d,l){var o=l("861d"),g=l("e8b5"),_=l("b622"),C=_("species");s.exports=function(I,E){var S;return g(I)&&(S=I.constructor,typeof S=="function"&&(S===Array||g(S.prototype))?S=void 0:o(S)&&(S=S[C],S===null&&(S=void 0))),new(S===void 0?Array:S)(E===0?0:E)}},"69f3":function(s,d,l){var o=l("7f9a"),g=l("da84"),_=l("861d"),C=l("9112"),I=l("5135"),E=l("f772"),S=l("d012"),k=g.WeakMap,R,B,V,F=function(Z){return V(Z)?B(Z):R(Z,{})},j=function(Z){return function(at){var pt;if(!_(at)||(pt=B(at)).type!==Z)throw TypeError("Incompatible receiver, "+Z+" required");return pt}};if(o){var G=new k,Q=G.get,nt=G.has,X=G.set;R=function(Z,at){return X.call(G,Z,at),at},B=function(Z){return Q.call(G,Z)||{}},V=function(Z){return nt.call(G,Z)}}else{var K=E("state");S[K]=!0,R=function(Z,at){return C(Z,K,at),at},B=function(Z){return I(Z,K)?Z[K]:{}},V=function(Z){return I(Z,K)}}s.exports={set:R,get:B,has:V,enforce:F,getterFor:j}},"6eeb":function(s,d,l){var o=l("da84"),g=l("9112"),_=l("5135"),C=l("ce4e"),I=l("8925"),E=l("69f3"),S=E.get,k=E.enforce,R=String(String).split("String");(s.exports=function(B,V,F,j){var G=j?!!j.unsafe:!1,Q=j?!!j.enumerable:!1,nt=j?!!j.noTargetGet:!1;if(typeof F=="function"&&(typeof V=="string"&&!_(F,"name")&&g(F,"name",V),k(F).source=R.join(typeof V=="string"?V:"")),B===o){Q?B[V]=F:C(V,F);return}else G?!nt&&B[V]&&(Q=!0):delete B[V];Q?B[V]=F:g(B,V,F)})(Function.prototype,"toString",function(){return typeof this=="function"&&S(this).source||I(this)})},"6f53":function(s,d,l){var o=l("83ab"),g=l("df75"),_=l("fc6a"),C=l("d1e7").f,I=function(E){return function(S){for(var k=_(S),R=g(k),B=R.length,V=0,F=[],j;B>V;)j=R[V++],(!o||C.call(k,j))&&F.push(E?[j,k[j]]:k[j]);return F}};s.exports={entries:I(!0),values:I(!1)}},"73d9":function(s,d,l){var o=l("44d2");o("flatMap")},7418:function(s,d){d.f=Object.getOwnPropertySymbols},"746f":function(s,d,l){var o=l("428f"),g=l("5135"),_=l("e538"),C=l("9bf2").f;s.exports=function(I){var E=o.Symbol||(o.Symbol={});g(E,I)||C(E,I,{value:_.f(I)})}},7839:function(s,d){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,d,l){var o=l("1d80");s.exports=function(g){return Object(o(g))}},"7c73":function(s,d,l){var o=l("825a"),g=l("37e8"),_=l("7839"),C=l("d012"),I=l("1be4"),E=l("cc12"),S=l("f772"),k=">",R="<",B="prototype",V="script",F=S("IE_PROTO"),j=function(){},G=function(Z){return R+V+k+Z+R+"/"+V+k},Q=function(Z){Z.write(G("")),Z.close();var at=Z.parentWindow.Object;return Z=null,at},nt=function(){var Z=E("iframe"),at="java"+V+":",pt;return Z.style.display="none",I.appendChild(Z),Z.src=String(at),pt=Z.contentWindow.document,pt.open(),pt.write(G("document.F=Object")),pt.close(),pt.F},X,K=function(){try{X=document.domain&&new ActiveXObject("htmlfile")}catch{}K=X?Q(X):nt();for(var Z=_.length;Z--;)delete K[B][_[Z]];return K()};C[F]=!0,s.exports=Object.create||function(at,pt){var rt;return at!==null?(j[B]=o(at),rt=new j,j[B]=null,rt[F]=at):rt=K(),pt===void 0?rt:g(rt,pt)}},"7dd0":function(s,d,l){var o=l("23e7"),g=l("9ed3"),_=l("e163"),C=l("d2bb"),I=l("d44e"),E=l("9112"),S=l("6eeb"),k=l("b622"),R=l("c430"),B=l("3f8c"),V=l("ae93"),F=V.IteratorPrototype,j=V.BUGGY_SAFARI_ITERATORS,G=k("iterator"),Q="keys",nt="values",X="entries",K=function(){return this};s.exports=function(Z,at,pt,rt,xt,q,zt){g(pt,at,rt);var Rt=function(nn){if(nn===xt&&te)return te;if(!j&&nn in ge)return ge[nn];switch(nn){case Q:return function(){return new pt(this,nn)};case nt:return function(){return new pt(this,nn)};case X:return function(){return new pt(this,nn)}}return function(){return new pt(this)}},Bt=at+" Iterator",Xt=!1,ge=Z.prototype,en=ge[G]||ge["@@iterator"]||xt&&ge[xt],te=!j&&en||Rt(xt),Gt=at=="Array"&&ge.entries||en,Re,Ge,Ce;if(Gt&&(Re=_(Gt.call(new Z)),F!==Object.prototype&&Re.next&&(!R&&_(Re)!==F&&(C?C(Re,F):typeof Re[G]!="function"&&E(Re,G,K)),I(Re,Bt,!0,!0),R&&(B[Bt]=K))),xt==nt&&en&&en.name!==nt&&(Xt=!0,te=function(){return en.call(this)}),(!R||zt)&&ge[G]!==te&&E(ge,G,te),B[at]=te,xt)if(Ge={values:Rt(nt),keys:q?te:Rt(Q),entries:Rt(X)},zt)for(Ce in Ge)(j||Xt||!(Ce in ge))&&S(ge,Ce,Ge[Ce]);else o({target:at,proto:!0,forced:j||Xt},Ge);return Ge}},"7f9a":function(s,d,l){var o=l("da84"),g=l("8925"),_=o.WeakMap;s.exports=typeof _=="function"&&/native code/.test(g(_))},"825a":function(s,d,l){var o=l("861d");s.exports=function(g){if(!o(g))throw TypeError(String(g)+" is not an object");return g}},"83ab":function(s,d,l){var o=l("d039");s.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,d,l){var o=l("c04e"),g=l("9bf2"),_=l("5c6c");s.exports=function(C,I,E){var S=o(I);S in C?g.f(C,S,_(0,E)):C[S]=E}},"861d":function(s,d){s.exports=function(l){return typeof l=="object"?l!==null:typeof l=="function"}},8875:function(s,d,l){var o,g,_;(function(C,I){g=[],o=I,_=typeof o=="function"?o.apply(d,g):o,_!==void 0&&(s.exports=_)})(typeof self<"u"?self:this,function(){function C(){var I=Object.getOwnPropertyDescriptor(document,"currentScript");if(!I&&"currentScript"in document&&document.currentScript||I&&I.get!==C&&document.currentScript)return document.currentScript;try{throw new Error}catch(X){var E=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,S=/@([^@]*):(\d+):(\d+)\s*$/ig,k=E.exec(X.stack)||S.exec(X.stack),R=k&&k[1]||!1,B=k&&k[2]||!1,V=document.location.href.replace(document.location.hash,""),F,j,G,Q=document.getElementsByTagName("script");R===V&&(F=document.documentElement.outerHTML,j=new RegExp("(?:[^\\n]+?\\n){0,"+(B-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),G=F.replace(j,"$1").trim());for(var nt=0;nt<Q.length;nt++)if(Q[nt].readyState==="interactive"||Q[nt].src===R||R===V&&Q[nt].innerHTML&&Q[nt].innerHTML.trim()===G)return Q[nt];return null}}return C})},8925:function(s,d,l){var o=l("c6cd"),g=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(_){return g.call(_)}),s.exports=o.inspectSource},"8aa5":function(s,d,l){var o=l("6547").charAt;s.exports=function(g,_,C){return _+(C?o(g,_).length:1)}},"8bbf":function(s,d){s.exports=n},"90e3":function(s,d){var l=0,o=Math.random();s.exports=function(g){return"Symbol("+String(g===void 0?"":g)+")_"+(++l+o).toString(36)}},9112:function(s,d,l){var o=l("83ab"),g=l("9bf2"),_=l("5c6c");s.exports=o?function(C,I,E){return g.f(C,I,_(1,E))}:function(C,I,E){return C[I]=E,C}},9263:function(s,d,l){var o=l("ad6d"),g=l("9f7f"),_=RegExp.prototype.exec,C=String.prototype.replace,I=_,E=function(){var B=/a/,V=/b*/g;return _.call(B,"a"),_.call(V,"a"),B.lastIndex!==0||V.lastIndex!==0}(),S=g.UNSUPPORTED_Y||g.BROKEN_CARET,k=/()??/.exec("")[1]!==void 0,R=E||k||S;R&&(I=function(V){var F=this,j,G,Q,nt,X=S&&F.sticky,K=o.call(F),Z=F.source,at=0,pt=V;return X&&(K=K.replace("y",""),K.indexOf("g")===-1&&(K+="g"),pt=String(V).slice(F.lastIndex),F.lastIndex>0&&(!F.multiline||F.multiline&&V[F.lastIndex-1]!==`
`)&&(Z="(?: "+Z+")",pt=" "+pt,at++),G=new RegExp("^(?:"+Z+")",K)),k&&(G=new RegExp("^"+Z+"$(?!\\s)",K)),E&&(j=F.lastIndex),Q=_.call(X?G:F,pt),X?Q?(Q.input=Q.input.slice(at),Q[0]=Q[0].slice(at),Q.index=F.lastIndex,F.lastIndex+=Q[0].length):F.lastIndex=0:E&&Q&&(F.lastIndex=F.global?Q.index+Q[0].length:j),k&&Q&&Q.length>1&&C.call(Q[0],G,function(){for(nt=1;nt<arguments.length-2;nt++)arguments[nt]===void 0&&(Q[nt]=void 0)}),Q}),s.exports=I},"94ca":function(s,d,l){var o=l("d039"),g=/#|\.prototype\./,_=function(k,R){var B=I[C(k)];return B==S?!0:B==E?!1:typeof R=="function"?o(R):!!R},C=_.normalize=function(k){return String(k).replace(g,".").toLowerCase()},I=_.data={},E=_.NATIVE="N",S=_.POLYFILL="P";s.exports=_},"99af":function(s,d,l){var o=l("23e7"),g=l("d039"),_=l("e8b5"),C=l("861d"),I=l("7b0b"),E=l("50c4"),S=l("8418"),k=l("65f0"),R=l("1dde"),B=l("b622"),V=l("2d00"),F=B("isConcatSpreadable"),j=9007199254740991,G="Maximum allowed index exceeded",Q=V>=51||!g(function(){var Z=[];return Z[F]=!1,Z.concat()[0]!==Z}),nt=R("concat"),X=function(Z){if(!C(Z))return!1;var at=Z[F];return at!==void 0?!!at:_(Z)},K=!Q||!nt;o({target:"Array",proto:!0,forced:K},{concat:function(at){var pt=I(this),rt=k(pt,0),xt=0,q,zt,Rt,Bt,Xt;for(q=-1,Rt=arguments.length;q<Rt;q++)if(Xt=q===-1?pt:arguments[q],X(Xt)){if(Bt=E(Xt.length),xt+Bt>j)throw TypeError(G);for(zt=0;zt<Bt;zt++,xt++)zt in Xt&&S(rt,xt,Xt[zt])}else{if(xt>=j)throw TypeError(G);S(rt,xt++,Xt)}return rt.length=xt,rt}})},"9bdd":function(s,d,l){var o=l("825a");s.exports=function(g,_,C,I){try{return I?_(o(C)[0],C[1]):_(C)}catch(S){var E=g.return;throw E!==void 0&&o(E.call(g)),S}}},"9bf2":function(s,d,l){var o=l("83ab"),g=l("0cfb"),_=l("825a"),C=l("c04e"),I=Object.defineProperty;d.f=o?I:function(S,k,R){if(_(S),k=C(k,!0),_(R),g)try{return I(S,k,R)}catch{}if("get"in R||"set"in R)throw TypeError("Accessors not supported");return"value"in R&&(S[k]=R.value),S}},"9ed3":function(s,d,l){var o=l("ae93").IteratorPrototype,g=l("7c73"),_=l("5c6c"),C=l("d44e"),I=l("3f8c"),E=function(){return this};s.exports=function(S,k,R){var B=k+" Iterator";return S.prototype=g(o,{next:_(1,R)}),C(S,B,!1,!0),I[B]=E,S}},"9f7f":function(s,d,l){var o=l("d039");function g(_,C){return RegExp(_,C)}d.UNSUPPORTED_Y=o(function(){var _=g("a","y");return _.lastIndex=2,_.exec("abcd")!=null}),d.BROKEN_CARET=o(function(){var _=g("^r","gy");return _.lastIndex=2,_.exec("str")!=null})},a2bf:function(s,d,l){var o=l("e8b5"),g=l("50c4"),_=l("0366"),C=function(I,E,S,k,R,B,V,F){for(var j=R,G=0,Q=V?_(V,F,3):!1,nt;G<k;){if(G in S){if(nt=Q?Q(S[G],G,E):S[G],B>0&&o(nt))j=C(I,E,nt,g(nt.length),j,B-1)-1;else{if(j>=9007199254740991)throw TypeError("Exceed the acceptable array length");I[j]=nt}j++}G++}return j};s.exports=C},a352:function(s,d){s.exports=a},a434:function(s,d,l){var o=l("23e7"),g=l("23cb"),_=l("a691"),C=l("50c4"),I=l("7b0b"),E=l("65f0"),S=l("8418"),k=l("1dde"),R=l("ae40"),B=k("splice"),V=R("splice",{ACCESSORS:!0,0:0,1:2}),F=Math.max,j=Math.min,G=9007199254740991,Q="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!B||!V},{splice:function(X,K){var Z=I(this),at=C(Z.length),pt=g(X,at),rt=arguments.length,xt,q,zt,Rt,Bt,Xt;if(rt===0?xt=q=0:rt===1?(xt=0,q=at-pt):(xt=rt-2,q=j(F(_(K),0),at-pt)),at+xt-q>G)throw TypeError(Q);for(zt=E(Z,q),Rt=0;Rt<q;Rt++)Bt=pt+Rt,Bt in Z&&S(zt,Rt,Z[Bt]);if(zt.length=q,xt<q){for(Rt=pt;Rt<at-q;Rt++)Bt=Rt+q,Xt=Rt+xt,Bt in Z?Z[Xt]=Z[Bt]:delete Z[Xt];for(Rt=at;Rt>at-q+xt;Rt--)delete Z[Rt-1]}else if(xt>q)for(Rt=at-q;Rt>pt;Rt--)Bt=Rt+q-1,Xt=Rt+xt-1,Bt in Z?Z[Xt]=Z[Bt]:delete Z[Xt];for(Rt=0;Rt<xt;Rt++)Z[Rt+pt]=arguments[Rt+2];return Z.length=at-q+xt,zt}})},a4d3:function(s,d,l){var o=l("23e7"),g=l("da84"),_=l("d066"),C=l("c430"),I=l("83ab"),E=l("4930"),S=l("fdbf"),k=l("d039"),R=l("5135"),B=l("e8b5"),V=l("861d"),F=l("825a"),j=l("7b0b"),G=l("fc6a"),Q=l("c04e"),nt=l("5c6c"),X=l("7c73"),K=l("df75"),Z=l("241c"),at=l("057f"),pt=l("7418"),rt=l("06cf"),xt=l("9bf2"),q=l("d1e7"),zt=l("9112"),Rt=l("6eeb"),Bt=l("5692"),Xt=l("f772"),ge=l("d012"),en=l("90e3"),te=l("b622"),Gt=l("e538"),Re=l("746f"),Ge=l("d44e"),Ce=l("69f3"),nn=l("b727").forEach,be=Xt("hidden"),Se="Symbol",xe="prototype",Be=te("toPrimitive"),tn=Ce.set,Ln=Ce.getterFor(Se),Tt=Object[xe],H=g.Symbol,Dt=_("JSON","stringify"),Pt=rt.f,yt=xt.f,vt=at.f,Ut=q.f,ne=Bt("symbols"),ue=Bt("op-symbols"),Ht=Bt("string-to-symbol-registry"),Me=Bt("symbol-to-string-registry"),je=Bt("wks"),Le=g.QObject,Ke=!Le||!Le[xe]||!Le[xe].findChild,bn=I&&k(function(){return X(yt({},"a",{get:function(){return yt(this,"a",{value:7}).a}})).a!=7})?function(Ct,kt,_t){var oe=Pt(Tt,kt);oe&&delete Tt[kt],yt(Ct,kt,_t),oe&&Ct!==Tt&&yt(Tt,kt,oe)}:yt,Cn=function(Ct,kt){var _t=ne[Ct]=X(H[xe]);return tn(_t,{type:Se,tag:Ct,description:kt}),I||(_t.description=kt),_t},de=S?function(Ct){return typeof Ct=="symbol"}:function(Ct){return Object(Ct)instanceof H},ve=function(kt,_t,oe){kt===Tt&&ve(ue,_t,oe),F(kt);var he=Q(_t,!0);return F(oe),R(ne,he)?(oe.enumerable?(R(kt,be)&&kt[be][he]&&(kt[be][he]=!1),oe=X(oe,{enumerable:nt(0,!1)})):(R(kt,be)||yt(kt,be,nt(1,{})),kt[be][he]=!0),bn(kt,he,oe)):yt(kt,he,oe)},Te=function(kt,_t){F(kt);var oe=G(_t),he=K(oe).concat(ht(oe));return nn(he,function(Kt){(!I||un.call(oe,Kt))&&ve(kt,Kt,oe[Kt])}),kt},Ye=function(kt,_t){return _t===void 0?X(kt):Te(X(kt),_t)},un=function(kt){var _t=Q(kt,!0),oe=Ut.call(this,_t);return this===Tt&&R(ne,_t)&&!R(ue,_t)?!1:oe||!R(this,_t)||!R(ne,_t)||R(this,be)&&this[be][_t]?oe:!0},Nn=function(kt,_t){var oe=G(kt),he=Q(_t,!0);if(!(oe===Tt&&R(ne,he)&&!R(ue,he))){var Kt=Pt(oe,he);return Kt&&R(ne,he)&&!(R(oe,be)&&oe[be][he])&&(Kt.enumerable=!0),Kt}},ae=function(kt){var _t=vt(G(kt)),oe=[];return nn(_t,function(he){!R(ne,he)&&!R(ge,he)&&oe.push(he)}),oe},ht=function(kt){var _t=kt===Tt,oe=vt(_t?ue:G(kt)),he=[];return nn(oe,function(Kt){R(ne,Kt)&&(!_t||R(Tt,Kt))&&he.push(ne[Kt])}),he};if(E||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var kt=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),_t=en(kt),oe=function(he){this===Tt&&oe.call(ue,he),R(this,be)&&R(this[be],_t)&&(this[be][_t]=!1),bn(this,_t,nt(1,he))};return I&&Ke&&bn(Tt,_t,{configurable:!0,set:oe}),Cn(_t,kt)},Rt(H[xe],"toString",function(){return Ln(this).tag}),Rt(H,"withoutSetter",function(Ct){return Cn(en(Ct),Ct)}),q.f=un,xt.f=ve,rt.f=Nn,Z.f=at.f=ae,pt.f=ht,Gt.f=function(Ct){return Cn(te(Ct),Ct)},I&&(yt(H[xe],"description",{configurable:!0,get:function(){return Ln(this).description}}),C||Rt(Tt,"propertyIsEnumerable",un,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!E,sham:!E},{Symbol:H}),nn(K(je),function(Ct){Re(Ct)}),o({target:Se,stat:!0,forced:!E},{for:function(Ct){var kt=String(Ct);if(R(Ht,kt))return Ht[kt];var _t=H(kt);return Ht[kt]=_t,Me[_t]=kt,_t},keyFor:function(kt){if(!de(kt))throw TypeError(kt+" is not a symbol");if(R(Me,kt))return Me[kt]},useSetter:function(){Ke=!0},useSimple:function(){Ke=!1}}),o({target:"Object",stat:!0,forced:!E,sham:!I},{create:Ye,defineProperty:ve,defineProperties:Te,getOwnPropertyDescriptor:Nn}),o({target:"Object",stat:!0,forced:!E},{getOwnPropertyNames:ae,getOwnPropertySymbols:ht}),o({target:"Object",stat:!0,forced:k(function(){pt.f(1)})},{getOwnPropertySymbols:function(kt){return pt.f(j(kt))}}),Dt){var gt=!E||k(function(){var Ct=H();return Dt([Ct])!="[null]"||Dt({a:Ct})!="{}"||Dt(Object(Ct))!="{}"});o({target:"JSON",stat:!0,forced:gt},{stringify:function(kt,_t,oe){for(var he=[kt],Kt=1,Fe;arguments.length>Kt;)he.push(arguments[Kt++]);if(Fe=_t,!(!V(_t)&&kt===void 0||de(kt)))return B(_t)||(_t=function(Ve,we){if(typeof Fe=="function"&&(we=Fe.call(this,Ve,we)),!de(we))return we}),he[1]=_t,Dt.apply(null,he)}})}H[xe][Be]||zt(H[xe],Be,H[xe].valueOf),Ge(H,Se),ge[be]=!0},a630:function(s,d,l){var o=l("23e7"),g=l("4df4"),_=l("1c7e"),C=!_(function(I){Array.from(I)});o({target:"Array",stat:!0,forced:C},{from:g})},a640:function(s,d,l){var o=l("d039");s.exports=function(g,_){var C=[][g];return!!C&&o(function(){C.call(null,_||function(){throw 1},1)})}},a691:function(s,d){var l=Math.ceil,o=Math.floor;s.exports=function(g){return isNaN(g=+g)?0:(g>0?o:l)(g)}},ab13:function(s,d,l){var o=l("b622"),g=o("match");s.exports=function(_){var C=/./;try{"/./"[_](C)}catch{try{return C[g]=!1,"/./"[_](C)}catch{}}return!1}},ac1f:function(s,d,l){var o=l("23e7"),g=l("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==g},{exec:g})},ad6d:function(s,d,l){var o=l("825a");s.exports=function(){var g=o(this),_="";return g.global&&(_+="g"),g.ignoreCase&&(_+="i"),g.multiline&&(_+="m"),g.dotAll&&(_+="s"),g.unicode&&(_+="u"),g.sticky&&(_+="y"),_}},ae40:function(s,d,l){var o=l("83ab"),g=l("d039"),_=l("5135"),C=Object.defineProperty,I={},E=function(S){throw S};s.exports=function(S,k){if(_(I,S))return I[S];k||(k={});var R=[][S],B=_(k,"ACCESSORS")?k.ACCESSORS:!1,V=_(k,0)?k[0]:E,F=_(k,1)?k[1]:void 0;return I[S]=!!R&&!g(function(){if(B&&!o)return!0;var j={length:-1};B?C(j,1,{enumerable:!0,get:E}):j[1]=1,R.call(j,V,F)})}},ae93:function(s,d,l){var o=l("e163"),g=l("9112"),_=l("5135"),C=l("b622"),I=l("c430"),E=C("iterator"),S=!1,k=function(){return this},R,B,V;[].keys&&(V=[].keys(),"next"in V?(B=o(o(V)),B!==Object.prototype&&(R=B)):S=!0),R==null&&(R={}),!I&&!_(R,E)&&g(R,E,k),s.exports={IteratorPrototype:R,BUGGY_SAFARI_ITERATORS:S}},b041:function(s,d,l){var o=l("00ee"),g=l("f5df");s.exports=o?{}.toString:function(){return"[object "+g(this)+"]"}},b0c0:function(s,d,l){var o=l("83ab"),g=l("9bf2").f,_=Function.prototype,C=_.toString,I=/^\s*function ([^ (]*)/,E="name";o&&!(E in _)&&g(_,E,{configurable:!0,get:function(){try{return C.call(this).match(I)[1]}catch{return""}}})},b622:function(s,d,l){var o=l("da84"),g=l("5692"),_=l("5135"),C=l("90e3"),I=l("4930"),E=l("fdbf"),S=g("wks"),k=o.Symbol,R=E?k:k&&k.withoutSetter||C;s.exports=function(B){return _(S,B)||(I&&_(k,B)?S[B]=k[B]:S[B]=R("Symbol."+B)),S[B]}},b64b:function(s,d,l){var o=l("23e7"),g=l("7b0b"),_=l("df75"),C=l("d039"),I=C(function(){_(1)});o({target:"Object",stat:!0,forced:I},{keys:function(S){return _(g(S))}})},b727:function(s,d,l){var o=l("0366"),g=l("44ad"),_=l("7b0b"),C=l("50c4"),I=l("65f0"),E=[].push,S=function(k){var R=k==1,B=k==2,V=k==3,F=k==4,j=k==6,G=k==5||j;return function(Q,nt,X,K){for(var Z=_(Q),at=g(Z),pt=o(nt,X,3),rt=C(at.length),xt=0,q=K||I,zt=R?q(Q,rt):B?q(Q,0):void 0,Rt,Bt;rt>xt;xt++)if((G||xt in at)&&(Rt=at[xt],Bt=pt(Rt,xt,Z),k)){if(R)zt[xt]=Bt;else if(Bt)switch(k){case 3:return!0;case 5:return Rt;case 6:return xt;case 2:E.call(zt,Rt)}else if(F)return!1}return j?-1:V||F?F:zt}};s.exports={forEach:S(0),map:S(1),filter:S(2),some:S(3),every:S(4),find:S(5),findIndex:S(6)}},c04e:function(s,d,l){var o=l("861d");s.exports=function(g,_){if(!o(g))return g;var C,I;if(_&&typeof(C=g.toString)=="function"&&!o(I=C.call(g))||typeof(C=g.valueOf)=="function"&&!o(I=C.call(g))||!_&&typeof(C=g.toString)=="function"&&!o(I=C.call(g)))return I;throw TypeError("Can't convert object to primitive value")}},c430:function(s,d){s.exports=!1},c6b6:function(s,d){var l={}.toString;s.exports=function(o){return l.call(o).slice(8,-1)}},c6cd:function(s,d,l){var o=l("da84"),g=l("ce4e"),_="__core-js_shared__",C=o[_]||g(_,{});s.exports=C},c740:function(s,d,l){var o=l("23e7"),g=l("b727").findIndex,_=l("44d2"),C=l("ae40"),I="findIndex",E=!0,S=C(I);I in[]&&Array(1)[I](function(){E=!1}),o({target:"Array",proto:!0,forced:E||!S},{findIndex:function(R){return g(this,R,arguments.length>1?arguments[1]:void 0)}}),_(I)},c8ba:function(s,d){var l;l=function(){return this}();try{l=l||new Function("return this")()}catch{typeof window=="object"&&(l=window)}s.exports=l},c975:function(s,d,l){var o=l("23e7"),g=l("4d64").indexOf,_=l("a640"),C=l("ae40"),I=[].indexOf,E=!!I&&1/[1].indexOf(1,-0)<0,S=_("indexOf"),k=C("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:E||!S||!k},{indexOf:function(B){return E?I.apply(this,arguments)||0:g(this,B,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,d,l){var o=l("5135"),g=l("fc6a"),_=l("4d64").indexOf,C=l("d012");s.exports=function(I,E){var S=g(I),k=0,R=[],B;for(B in S)!o(C,B)&&o(S,B)&&R.push(B);for(;E.length>k;)o(S,B=E[k++])&&(~_(R,B)||R.push(B));return R}},caad:function(s,d,l){var o=l("23e7"),g=l("4d64").includes,_=l("44d2"),C=l("ae40"),I=C("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!I},{includes:function(S){return g(this,S,arguments.length>1?arguments[1]:void 0)}}),_("includes")},cc12:function(s,d,l){var o=l("da84"),g=l("861d"),_=o.document,C=g(_)&&g(_.createElement);s.exports=function(I){return C?_.createElement(I):{}}},ce4e:function(s,d,l){var o=l("da84"),g=l("9112");s.exports=function(_,C){try{g(o,_,C)}catch{o[_]=C}return C}},d012:function(s,d){s.exports={}},d039:function(s,d){s.exports=function(l){try{return!!l()}catch{return!0}}},d066:function(s,d,l){var o=l("428f"),g=l("da84"),_=function(C){return typeof C=="function"?C:void 0};s.exports=function(C,I){return arguments.length<2?_(o[C])||_(g[C]):o[C]&&o[C][I]||g[C]&&g[C][I]}},d1e7:function(s,d,l){var o={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,_=g&&!o.call({1:2},1);d.f=_?function(I){var E=g(this,I);return!!E&&E.enumerable}:o},d28b:function(s,d,l){var o=l("746f");o("iterator")},d2bb:function(s,d,l){var o=l("825a"),g=l("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var _=!1,C={},I;try{I=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,I.call(C,[]),_=C instanceof Array}catch{}return function(S,k){return o(S),g(k),_?I.call(S,k):S.__proto__=k,S}}():void 0)},d3b7:function(s,d,l){var o=l("00ee"),g=l("6eeb"),_=l("b041");o||g(Object.prototype,"toString",_,{unsafe:!0})},d44e:function(s,d,l){var o=l("9bf2").f,g=l("5135"),_=l("b622"),C=_("toStringTag");s.exports=function(I,E,S){I&&!g(I=S?I:I.prototype,C)&&o(I,C,{configurable:!0,value:E})}},d58f:function(s,d,l){var o=l("1c0b"),g=l("7b0b"),_=l("44ad"),C=l("50c4"),I=function(E){return function(S,k,R,B){o(k);var V=g(S),F=_(V),j=C(V.length),G=E?j-1:0,Q=E?-1:1;if(R<2)for(;;){if(G in F){B=F[G],G+=Q;break}if(G+=Q,E?G<0:j<=G)throw TypeError("Reduce of empty array with no initial value")}for(;E?G>=0:j>G;G+=Q)G in F&&(B=k(B,F[G],G,V));return B}};s.exports={left:I(!1),right:I(!0)}},d784:function(s,d,l){l("ac1f");var o=l("6eeb"),g=l("d039"),_=l("b622"),C=l("9263"),I=l("9112"),E=_("species"),S=!g(function(){var F=/./;return F.exec=function(){var j=[];return j.groups={a:"7"},j},"".replace(F,"$<a>")!=="7"}),k=function(){return"a".replace(/./,"$0")==="$0"}(),R=_("replace"),B=function(){return/./[R]?/./[R]("a","$0")==="":!1}(),V=!g(function(){var F=/(?:)/,j=F.exec;F.exec=function(){return j.apply(this,arguments)};var G="ab".split(F);return G.length!==2||G[0]!=="a"||G[1]!=="b"});s.exports=function(F,j,G,Q){var nt=_(F),X=!g(function(){var xt={};return xt[nt]=function(){return 7},""[F](xt)!=7}),K=X&&!g(function(){var xt=!1,q=/a/;return F==="split"&&(q={},q.constructor={},q.constructor[E]=function(){return q},q.flags="",q[nt]=/./[nt]),q.exec=function(){return xt=!0,null},q[nt](""),!xt});if(!X||!K||F==="replace"&&!(S&&k&&!B)||F==="split"&&!V){var Z=/./[nt],at=G(nt,""[F],function(xt,q,zt,Rt,Bt){return q.exec===C?X&&!Bt?{done:!0,value:Z.call(q,zt,Rt)}:{done:!0,value:xt.call(zt,q,Rt)}:{done:!1}},{REPLACE_KEEPS_$0:k,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:B}),pt=at[0],rt=at[1];o(String.prototype,F,pt),o(RegExp.prototype,nt,j==2?function(xt,q){return rt.call(xt,this,q)}:function(xt){return rt.call(xt,this)})}Q&&I(RegExp.prototype[nt],"sham",!0)}},d81d:function(s,d,l){var o=l("23e7"),g=l("b727").map,_=l("1dde"),C=l("ae40"),I=_("map"),E=C("map");o({target:"Array",proto:!0,forced:!I||!E},{map:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,d,l){(function(o){var g=function(_){return _&&_.Math==Math&&_};s.exports=g(typeof globalThis=="object"&&globalThis)||g(typeof window=="object"&&window)||g(typeof self=="object"&&self)||g(typeof o=="object"&&o)||Function("return this")()}).call(this,l("c8ba"))},dbb4:function(s,d,l){var o=l("23e7"),g=l("83ab"),_=l("56ef"),C=l("fc6a"),I=l("06cf"),E=l("8418");o({target:"Object",stat:!0,sham:!g},{getOwnPropertyDescriptors:function(k){for(var R=C(k),B=I.f,V=_(R),F={},j=0,G,Q;V.length>j;)Q=B(R,G=V[j++]),Q!==void 0&&E(F,G,Q);return F}})},dbf1:function(s,d,l){(function(o){l.d(d,"a",function(){return _});function g(){return typeof window<"u"?window.console:o.console}var _=g()}).call(this,l("c8ba"))},ddb0:function(s,d,l){var o=l("da84"),g=l("fdbc"),_=l("e260"),C=l("9112"),I=l("b622"),E=I("iterator"),S=I("toStringTag"),k=_.values;for(var R in g){var B=o[R],V=B&&B.prototype;if(V){if(V[E]!==k)try{C(V,E,k)}catch{V[E]=k}if(V[S]||C(V,S,R),g[R]){for(var F in _)if(V[F]!==_[F])try{C(V,F,_[F])}catch{V[F]=_[F]}}}}},df75:function(s,d,l){var o=l("ca84"),g=l("7839");s.exports=Object.keys||function(C){return o(C,g)}},e01a:function(s,d,l){var o=l("23e7"),g=l("83ab"),_=l("da84"),C=l("5135"),I=l("861d"),E=l("9bf2").f,S=l("e893"),k=_.Symbol;if(g&&typeof k=="function"&&(!("description"in k.prototype)||k().description!==void 0)){var R={},B=function(){var nt=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),X=this instanceof B?new k(nt):nt===void 0?k():k(nt);return nt===""&&(R[X]=!0),X};S(B,k);var V=B.prototype=k.prototype;V.constructor=B;var F=V.toString,j=String(k("test"))=="Symbol(test)",G=/^Symbol\((.*)\)[^)]+$/;E(V,"description",{configurable:!0,get:function(){var nt=I(this)?this.valueOf():this,X=F.call(nt);if(C(R,nt))return"";var K=j?X.slice(7,-1):X.replace(G,"$1");return K===""?void 0:K}}),o({global:!0,forced:!0},{Symbol:B})}},e163:function(s,d,l){var o=l("5135"),g=l("7b0b"),_=l("f772"),C=l("e177"),I=_("IE_PROTO"),E=Object.prototype;s.exports=C?Object.getPrototypeOf:function(S){return S=g(S),o(S,I)?S[I]:typeof S.constructor=="function"&&S instanceof S.constructor?S.constructor.prototype:S instanceof Object?E:null}},e177:function(s,d,l){var o=l("d039");s.exports=!o(function(){function g(){}return g.prototype.constructor=null,Object.getPrototypeOf(new g)!==g.prototype})},e260:function(s,d,l){var o=l("fc6a"),g=l("44d2"),_=l("3f8c"),C=l("69f3"),I=l("7dd0"),E="Array Iterator",S=C.set,k=C.getterFor(E);s.exports=I(Array,"Array",function(R,B){S(this,{type:E,target:o(R),index:0,kind:B})},function(){var R=k(this),B=R.target,V=R.kind,F=R.index++;return!B||F>=B.length?(R.target=void 0,{value:void 0,done:!0}):V=="keys"?{value:F,done:!1}:V=="values"?{value:B[F],done:!1}:{value:[F,B[F]],done:!1}},"values"),_.Arguments=_.Array,g("keys"),g("values"),g("entries")},e439:function(s,d,l){var o=l("23e7"),g=l("d039"),_=l("fc6a"),C=l("06cf").f,I=l("83ab"),E=g(function(){C(1)}),S=!I||E;o({target:"Object",stat:!0,forced:S,sham:!I},{getOwnPropertyDescriptor:function(R,B){return C(_(R),B)}})},e538:function(s,d,l){var o=l("b622");d.f=o},e893:function(s,d,l){var o=l("5135"),g=l("56ef"),_=l("06cf"),C=l("9bf2");s.exports=function(I,E){for(var S=g(E),k=C.f,R=_.f,B=0;B<S.length;B++){var V=S[B];o(I,V)||k(I,V,R(E,V))}}},e8b5:function(s,d,l){var o=l("c6b6");s.exports=Array.isArray||function(_){return o(_)=="Array"}},e95a:function(s,d,l){var o=l("b622"),g=l("3f8c"),_=o("iterator"),C=Array.prototype;s.exports=function(I){return I!==void 0&&(g.Array===I||C[_]===I)}},f5df:function(s,d,l){var o=l("00ee"),g=l("c6b6"),_=l("b622"),C=_("toStringTag"),I=g(function(){return arguments}())=="Arguments",E=function(S,k){try{return S[k]}catch{}};s.exports=o?g:function(S){var k,R,B;return S===void 0?"Undefined":S===null?"Null":typeof(R=E(k=Object(S),C))=="string"?R:I?g(k):(B=g(k))=="Object"&&typeof k.callee=="function"?"Arguments":B}},f772:function(s,d,l){var o=l("5692"),g=l("90e3"),_=o("keys");s.exports=function(C){return _[C]||(_[C]=g(C))}},fb15:function(s,d,l){if(l.r(d),typeof window<"u"){var o=window.document.currentScript;{var g=l("8875");o=g(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:g})}var _=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);_&&(l.p=_[1])}l("99af"),l("4de4"),l("4160"),l("c975"),l("d81d"),l("a434"),l("159b"),l("a4d3"),l("e439"),l("dbb4"),l("b64b");function C(de,ve,Te){return ve in de?Object.defineProperty(de,ve,{value:Te,enumerable:!0,configurable:!0,writable:!0}):de[ve]=Te,de}function I(de,ve){var Te=Object.keys(de);if(Object.getOwnPropertySymbols){var Ye=Object.getOwnPropertySymbols(de);ve&&(Ye=Ye.filter(function(un){return Object.getOwnPropertyDescriptor(de,un).enumerable})),Te.push.apply(Te,Ye)}return Te}function E(de){for(var ve=1;ve<arguments.length;ve++){var Te=arguments[ve]!=null?arguments[ve]:{};ve%2?I(Object(Te),!0).forEach(function(Ye){C(de,Ye,Te[Ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(Te)):I(Object(Te)).forEach(function(Ye){Object.defineProperty(de,Ye,Object.getOwnPropertyDescriptor(Te,Ye))})}return de}function S(de){if(Array.isArray(de))return de}l("e01a"),l("d28b"),l("e260"),l("d3b7"),l("3ca3"),l("ddb0");function k(de,ve){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(de)))){var Te=[],Ye=!0,un=!1,Nn=void 0;try{for(var ae=de[Symbol.iterator](),ht;!(Ye=(ht=ae.next()).done)&&(Te.push(ht.value),!(ve&&Te.length===ve));Ye=!0);}catch(gt){un=!0,Nn=gt}finally{try{!Ye&&ae.return!=null&&ae.return()}finally{if(un)throw Nn}}return Te}}l("a630"),l("fb6a"),l("b0c0"),l("25f0");function R(de,ve){(ve==null||ve>de.length)&&(ve=de.length);for(var Te=0,Ye=new Array(ve);Te<ve;Te++)Ye[Te]=de[Te];return Ye}function B(de,ve){if(de){if(typeof de=="string")return R(de,ve);var Te=Object.prototype.toString.call(de).slice(8,-1);if(Te==="Object"&&de.constructor&&(Te=de.constructor.name),Te==="Map"||Te==="Set")return Array.from(de);if(Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return R(de,ve)}}function V(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(de,ve){return S(de)||k(de,ve)||B(de,ve)||V()}function j(de){if(Array.isArray(de))return R(de)}function G(de){if(typeof Symbol<"u"&&Symbol.iterator in Object(de))return Array.from(de)}function Q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nt(de){return j(de)||G(de)||B(de)||Q()}var X=l("a352"),K=l.n(X);function Z(de){de.parentElement!==null&&de.parentElement.removeChild(de)}function at(de,ve,Te){var Ye=Te===0?de.children[0]:de.children[Te-1].nextSibling;de.insertBefore(ve,Ye)}var pt=l("dbf1");l("13d5"),l("4fad"),l("ac1f"),l("5319");function rt(de){var ve=Object.create(null);return function(Ye){var un=ve[Ye];return un||(ve[Ye]=de(Ye))}}var xt=/-(\w)/g,q=rt(function(de){return de.replace(xt,function(ve,Te){return Te.toUpperCase()})});l("5db7"),l("73d9");var zt=["Start","Add","Remove","Update","End"],Rt=["Choose","Unchoose","Sort","Filter","Clone"],Bt=["Move"],Xt=[Bt,zt,Rt].flatMap(function(de){return de}).map(function(de){return"on".concat(de)}),ge={manage:Bt,manageAndEmit:zt,emit:Rt};function en(de){return Xt.indexOf(de)!==-1}l("caad"),l("2ca0");var te=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Gt(de){return te.includes(de)}function Re(de){return["transition-group","TransitionGroup"].includes(de)}function Ge(de){return["id","class","role","style"].includes(de)||de.startsWith("data-")||de.startsWith("aria-")||de.startsWith("on")}function Ce(de){return de.reduce(function(ve,Te){var Ye=F(Te,2),un=Ye[0],Nn=Ye[1];return ve[un]=Nn,ve},{})}function nn(de){var ve=de.$attrs,Te=de.componentData,Ye=Te===void 0?{}:Te,un=Ce(Object.entries(ve).filter(function(Nn){var ae=F(Nn,2),ht=ae[0];return ae[1],Ge(ht)}));return E(E({},un),Ye)}function be(de){var ve=de.$attrs,Te=de.callBackBuilder,Ye=Ce(Se(ve));Object.entries(Te).forEach(function(Nn){var ae=F(Nn,2),ht=ae[0],gt=ae[1];ge[ht].forEach(function(Ct){Ye["on".concat(Ct)]=gt(Ct)})});var un="[data-draggable]".concat(Ye.draggable||"");return E(E({},Ye),{},{draggable:un})}function Se(de){return Object.entries(de).filter(function(ve){var Te=F(ve,2),Ye=Te[0];return Te[1],!Ge(Ye)}).map(function(ve){var Te=F(ve,2),Ye=Te[0],un=Te[1];return[q(Ye),un]}).filter(function(ve){var Te=F(ve,2),Ye=Te[0];return Te[1],!en(Ye)})}l("c740");function xe(de,ve){if(!(de instanceof ve))throw new TypeError("Cannot call a class as a function")}function Be(de,ve){for(var Te=0;Te<ve.length;Te++){var Ye=ve[Te];Ye.enumerable=Ye.enumerable||!1,Ye.configurable=!0,"value"in Ye&&(Ye.writable=!0),Object.defineProperty(de,Ye.key,Ye)}}function tn(de,ve,Te){return ve&&Be(de.prototype,ve),de}var Ln=function(ve){var Te=ve.el;return Te},Tt=function(ve,Te){return ve.__draggable_context=Te},H=function(ve){return ve.__draggable_context},Dt=function(){function de(ve){var Te=ve.nodes,Ye=Te.header,un=Te.default,Nn=Te.footer,ae=ve.root,ht=ve.realList;xe(this,de),this.defaultNodes=un,this.children=[].concat(nt(Ye),nt(un),nt(Nn)),this.externalComponent=ae.externalComponent,this.rootTransition=ae.transition,this.tag=ae.tag,this.realList=ht}return tn(de,[{key:"render",value:function(Te,Ye){var un=this.tag,Nn=this.children,ae=this._isRootComponent,ht=ae?{default:function(){return Nn}}:Nn;return Te(un,Ye,ht)}},{key:"updated",value:function(){var Te=this.defaultNodes,Ye=this.realList;Te.forEach(function(un,Nn){Tt(Ln(un),{element:Ye[Nn],index:Nn})})}},{key:"getUnderlyingVm",value:function(Te){return H(Te)}},{key:"getVmIndexFromDomIndex",value:function(Te,Ye){var un=this.defaultNodes,Nn=un.length,ae=Ye.children,ht=ae.item(Te);if(ht===null)return Nn;var gt=H(ht);if(gt)return gt.index;if(Nn===0)return 0;var Ct=Ln(un[0]),kt=nt(ae).findIndex(function(_t){return _t===Ct});return Te<kt?0:Nn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),de}(),Pt=l("8bbf");function yt(de,ve){var Te=de[ve];return Te?Te():[]}function vt(de){var ve=de.$slots,Te=de.realList,Ye=de.getKey,un=Te||[],Nn=["header","footer"].map(function(_t){return yt(ve,_t)}),ae=F(Nn,2),ht=ae[0],gt=ae[1],Ct=ve.item;if(!Ct)throw new Error("draggable element must have an item slot");var kt=un.flatMap(function(_t,oe){return Ct({element:_t,index:oe}).map(function(he){return he.key=Ye(_t),he.props=E(E({},he.props||{}),{},{"data-draggable":!0}),he})});if(kt.length!==un.length)throw new Error("Item slot must have only one child");return{header:ht,footer:gt,default:kt}}function Ut(de){var ve=Re(de),Te=!Gt(de)&&!ve;return{transition:ve,externalComponent:Te,tag:Te?Object(Pt.resolveComponent)(de):ve?Pt.TransitionGroup:de}}function ne(de){var ve=de.$slots,Te=de.tag,Ye=de.realList,un=de.getKey,Nn=vt({$slots:ve,realList:Ye,getKey:un}),ae=Ut(Te);return new Dt({nodes:Nn,root:ae,realList:Ye})}function ue(de,ve){var Te=this;Object(Pt.nextTick)(function(){return Te.$emit(de.toLowerCase(),ve)})}function Ht(de){var ve=this;return function(Te,Ye){if(ve.realList!==null)return ve["onDrag".concat(de)](Te,Ye)}}function Me(de){var ve=this,Te=Ht.call(this,de);return function(Ye,un){Te.call(ve,Ye,un),ue.call(ve,de,Ye)}}var je=null,Le={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ve){return ve}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Ke=["update:modelValue","change"].concat(nt([].concat(nt(ge.manageAndEmit),nt(ge.emit)).map(function(de){return de.toLowerCase()}))),bn=Object(Pt.defineComponent)({name:"draggable",inheritAttrs:!1,props:Le,emits:Ke,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ve=this.$slots,Te=this.$attrs,Ye=this.tag,un=this.componentData,Nn=this.realList,ae=this.getKey,ht=ne({$slots:ve,tag:Ye,realList:Nn,getKey:ae});this.componentStructure=ht;var gt=nn({$attrs:Te,componentData:un});return ht.render(Pt.h,gt)}catch(Ct){return this.error=!0,Object(Pt.h)("pre",{style:{color:"red"}},Ct.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&pt.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ve=this;if(!this.error){var Te=this.$attrs,Ye=this.$el,un=this.componentStructure;un.updated();var Nn=be({$attrs:Te,callBackBuilder:{manageAndEmit:function(gt){return Me.call(ve,gt)},emit:function(gt){return ue.bind(ve,gt)},manage:function(gt){return Ht.call(ve,gt)}}}),ae=Ye.nodeType===1?Ye:Ye.parentElement;this._sortable=new K.a(ae,Nn),this.targetDomElement=ae,ae.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ve=this.list;return ve||this.modelValue},getKey:function(){var ve=this.itemKey;return typeof ve=="function"?ve:function(Te){return Te[ve]}}},watch:{$attrs:{handler:function(ve){var Te=this._sortable;Te&&Se(ve).forEach(function(Ye){var un=F(Ye,2),Nn=un[0],ae=un[1];Te.option(Nn,ae)})},deep:!0}},methods:{getUnderlyingVm:function(ve){return this.componentStructure.getUnderlyingVm(ve)||null},getUnderlyingPotencialDraggableComponent:function(ve){return ve.__draggable_component__},emitChanges:function(ve){var Te=this;Object(Pt.nextTick)(function(){return Te.$emit("change",ve)})},alterList:function(ve){if(this.list){ve(this.list);return}var Te=nt(this.modelValue);ve(Te),this.$emit("update:modelValue",Te)},spliceList:function(){var ve=arguments,Te=function(un){return un.splice.apply(un,nt(ve))};this.alterList(Te)},updatePosition:function(ve,Te){var Ye=function(Nn){return Nn.splice(Te,0,Nn.splice(ve,1)[0])};this.alterList(Ye)},getRelatedContextFromMoveEvent:function(ve){var Te=ve.to,Ye=ve.related,un=this.getUnderlyingPotencialDraggableComponent(Te);if(!un)return{component:un};var Nn=un.realList,ae={list:Nn,component:un};if(Te!==Ye&&Nn){var ht=un.getUnderlyingVm(Ye)||{};return E(E({},ht),ae)}return ae},getVmIndexFromDomIndex:function(ve){return this.componentStructure.getVmIndexFromDomIndex(ve,this.targetDomElement)},onDragStart:function(ve){this.context=this.getUnderlyingVm(ve.item),ve.item._underlying_vm_=this.clone(this.context.element),je=ve.item},onDragAdd:function(ve){var Te=ve.item._underlying_vm_;if(Te!==void 0){Z(ve.item);var Ye=this.getVmIndexFromDomIndex(ve.newIndex);this.spliceList(Ye,0,Te);var un={element:Te,newIndex:Ye};this.emitChanges({added:un})}},onDragRemove:function(ve){if(at(this.$el,ve.item,ve.oldIndex),ve.pullMode==="clone"){Z(ve.clone);return}var Te=this.context,Ye=Te.index,un=Te.element;this.spliceList(Ye,1);var Nn={element:un,oldIndex:Ye};this.emitChanges({removed:Nn})},onDragUpdate:function(ve){Z(ve.item),at(ve.from,ve.item,ve.oldIndex);var Te=this.context.index,Ye=this.getVmIndexFromDomIndex(ve.newIndex);this.updatePosition(Te,Ye);var un={element:this.context.element,oldIndex:Te,newIndex:Ye};this.emitChanges({moved:un})},computeFutureIndex:function(ve,Te){if(!ve.element)return 0;var Ye=nt(Te.to.children).filter(function(ht){return ht.style.display!=="none"}),un=Ye.indexOf(Te.related),Nn=ve.component.getVmIndexFromDomIndex(un),ae=Ye.indexOf(je)!==-1;return ae||!Te.willInsertAfter?Nn:Nn+1},onDragMove:function(ve,Te){var Ye=this.move,un=this.realList;if(!Ye||!un)return!0;var Nn=this.getRelatedContextFromMoveEvent(ve),ae=this.computeFutureIndex(Nn,ve),ht=E(E({},this.context),{},{futureIndex:ae}),gt=E(E({},ve),{},{relatedContext:Nn,draggedContext:ht});return Ye(gt,Te)},onDragEnd:function(){je=null}}}),Cn=bn;d.default=Cn},fb6a:function(s,d,l){var o=l("23e7"),g=l("861d"),_=l("e8b5"),C=l("23cb"),I=l("50c4"),E=l("fc6a"),S=l("8418"),k=l("b622"),R=l("1dde"),B=l("ae40"),V=R("slice"),F=B("slice",{ACCESSORS:!0,0:0,1:2}),j=k("species"),G=[].slice,Q=Math.max;o({target:"Array",proto:!0,forced:!V||!F},{slice:function(X,K){var Z=E(this),at=I(Z.length),pt=C(X,at),rt=C(K===void 0?at:K,at),xt,q,zt;if(_(Z)&&(xt=Z.constructor,typeof xt=="function"&&(xt===Array||_(xt.prototype))?xt=void 0:g(xt)&&(xt=xt[j],xt===null&&(xt=void 0)),xt===Array||xt===void 0))return G.call(Z,pt,rt);for(q=new(xt===void 0?Array:xt)(Q(rt-pt,0)),zt=0;pt<rt;pt++,zt++)pt in Z&&S(q,zt,Z[pt]);return q.length=zt,q}})},fc6a:function(s,d,l){var o=l("44ad"),g=l("1d80");s.exports=function(_){return o(g(_))}},fdbc:function(s,d){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,d,l){var o=l("4930");s.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(i3);var HK=i3.exports;const XM=Ff(HK),$K={components:{SvgIcon:Zn},props:{isSelected:Boolean,disabledDrag:Boolean,item:{type:Object,default:()=>({})}},computed:{path(){return{draggable:TT}}}},GK={class:"draggable-handle__icon"},ZK={class:"draggale-item__info"};function WK(t,e,n,a,s,d){const l=Js("SvgIcon");return Mt(),pe("div",{class:Li(["draggale-item",{"draggale-item-active":n.isSelected}])},[n.disabledDrag?wn("",!0):(Mt(),pe("div",{key:0,class:"draggable-handle",style:fi({background:n.item.color})},[Nt("div",GK,[ee(l,{size:"14",type:"mdi",path:d.path.draggable},null,8,["path"])])],4)),Nt("div",ZK,[Wn(t.$slots,"default",{},void 0,!0)])],2)}const jw=Vn($K,[["render",WK],["__scopeId","data-v-4edf7736"]]),qK={class:"draggable-group__info"},KK=["title"],YK={class:"draggable-group__action"},XK={key:0,class:"draggable-group__divider"},QK={key:0,class:"draggable-group__nodata"},JK=nr({__name:"draggable-list-group",props:{layerGroup:{type:Object,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean,checkItemCanPutInChildren:{type:Function},readonly:Boolean},emits:["click:delete","click:un-group","click:select","drag-done","update:layer-group"],setup(t,{emit:e}){const n=e,a={group:{open:kT,close:PT,unGroup:jO,delete:Bf,show:DT,hide:OT}},s=mn(!0);function d(){s.value=!s.value}function l(){n("click:delete")}function o(){n("click:un-group")}return(g,_)=>(Mt(),Je(jw,{disabledDrag:t.disabledDrag,class:"draggable-group__item"},{default:Ie(()=>[Nt("div",qK,[Nt("span",{class:"draggable-group__title",title:t.layerGroup.name},Rn(t.layerGroup.name),9,KK),Nt("div",YK,[!t.readonly&&t.layerGroup.children&&t.layerGroup.children.length>0?(Mt(),pe("span",{key:0,onClick:_[0]||(_[0]=C=>o())},[ee(ut(Zn),{size:"14",type:"mdi",path:a.group.unGroup},null,8,["path"])])):wn("",!0),t.readonly?wn("",!0):(Mt(),pe("span",{key:1,onClick:_[1]||(_[1]=C=>l())},[ee(ut(Zn),{size:"14",type:"mdi",path:a.group.delete},null,8,["path"])])),Nt("span",{onClick:_[2]||(_[2]=C=>d())},[s.value?(Mt(),Je(ut(Zn),{key:0,size:"14",type:"mdi",path:a.group.close},null,8,["path"])):(Mt(),Je(ut(Zn),{key:1,size:"14",type:"mdi",path:a.group.open},null,8,["path"]))])])]),s.value?(Mt(),pe("div",XK)):wn("",!0),Nt("div",{class:Li({"draggable-group__children-container":!0,_show:s.value})},[Wn(g.$slots,"item",{group:t.layerGroup},()=>[!g.p_children||g.p_children.length<1?(Mt(),pe("div",QK," Drag layer inside this group ")):wn("",!0)],!0)],2)]),_:3},8,["disabledDrag"]))}}),tY=Vn(JK,[["__scopeId","data-v-465facc7"]]),eY={class:"draggable__item item"},nY={class:"draggable__item"},rY=nr({__name:"draggable-list",props:{items:{type:Array,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean},emits:["update:selected","click-group:remove","click-drag:done","update:items"],setup(t,{expose:e,emit:n}){const a=t,s=n,d=mn([]),l=mn({}),o=_n({get(){return a.selected},set(G){s("update:selected",G)}}),g=G=>G&&G.isGroup,_=G=>{var Z;const Q=G.draggedContext.element,nt=(Z=G.to.__vue__)==null?void 0:Z.element,X=g(Q),K=nt&&g(nt);return X&&K?!1:(!X&&!nt||!X&&nt&&!g(nt),!0)};go(()=>{C(a.items)});function C(G=[]){(G==null||G.length===0)&&(G=a.items),d.value=I(G)}function I(G){let Q=[];if(!G||G.length==0)return Q;let nt={};return G.forEach(X=>{if(!X.group){Q.push(X);return}nt[X.group.id]||(nt[X.group.id]=j(X.group),Q.push(nt[X.group.id])),nt[X.group.id].children.push(X)}),Q}function E(G){return G.reduce((Q,nt)=>(nt.isGroup?nt.children.length>0&&Q.push(...nt.children.map(X=>(X.group={id:nt.id,name:nt.name},X))):(nt.group=void 0,Q.push(nt)),Q),[])}function S(G){a.disabledSelect||(o.value.includes(G.id)?o.value=o.value.filter(Q=>Q!=G.id):(o.value.push(G.id),l.value[G.id]=G))}function k(G){let Q=[];o.value&&o.value.length>0&&(d.value=d.value.filter(X=>!o.value.includes(X.id)).map(X=>("isGroup"in X&&X.isGroup&&(X.children=X.children.filter(K=>!o.value.includes(K.id))),X)),Q=o.value.map(X=>l.value[X]),o.value=[],l.value={});let nt=j({name:G||"New Group",children:Q});d.value.unshift(nt),nt.children.length>0&&V()}function R(G,Q){d.value.splice(Q,1),G.children.length>0&&d.value.splice(Q,0,...G.children)}function B(G,Q){d.value[Q]={...d.value[Q],...G}}function V(){El(()=>{s("update:items",E(d.value)),s("click-drag:done")})}function F(G,Q){d.value.splice(Q,1),s("click-group:remove",G)}function j(G){let Q={id:`group-${new Date().getTime()}`,name:"New Group",isGroup:!0,show:!0,children:[]};return Q=Object.assign({},Q,G),Q}return e({update:C,addNewGroup:k}),(G,Q)=>(Mt(),Je(ut(XM),{modelValue:d.value,"onUpdate:modelValue":Q[0]||(Q[0]=nt=>d.value=nt),group:"layers","item-key":"id",animation:200,move:_,handle:".draggable-handle",class:"draggable-group-container",onEnd:V},{item:Ie(({element:nt,index:X})=>[Nt("div",eY,[nt.isGroup?(Mt(),Je(tY,{key:nt.id,"layer-group":nt,"onUpdate:layerGroup":K=>B(K,X),disabledDrag:t.disabledDrag,"onClick:delete":K=>F(nt,X),"onClick:unGroup":K=>R(nt,X),onDragDone:V,"onClick:select":S,onEnd:V},{item:Ie(()=>[ee(ut(XM),{modelValue:nt.children,"onUpdate:modelValue":K=>nt.children=K,group:"layers",handle:".draggable-handle","item-key":"id",animation:200,move:_,class:"draggable-group-container"},{item:Ie(({element:K,index:Z})=>[Nt("div",nY,[(Mt(),Je(jw,{disabledDrag:t.disabledDrag,isSelected:o.value.includes(K.id),item:K,key:K.id+"-child"},{default:Ie(()=>[Wn(G.$slots,"item",{isSelected:o.value.includes(K.id),item:K,index:Z,toggleSelect:S},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["layer-group","onUpdate:layerGroup","disabledDrag","onClick:delete","onClick:unGroup"])):(Mt(),Je(jw,{disabledDrag:t.disabledDrag,isSelected:o.value.includes(nt.id),item:nt,key:nt.id+"-child"},{default:Ie(()=>[Wn(G.$slots,"item",{isSelected:o.value.includes(nt.id),item:nt,index:X,toggleSelect:S},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))])]),_:3},8,["modelValue"]))}}),iY=Vn(rY,[["__scopeId","data-v-f4c80f65"]]),oY={__name:"layer-item-icon",props:{loading:Boolean,item:{require:!0,type:Object}},setup(t){const e={loading:I2,layer:Xy};return(n,a)=>(Mt(),pe("div",null,[t.loading?(Mt(),Je(ut(Zn),{key:0,size:"14",type:"mdi",path:e.loading,class:"spin"},null,8,["path"])):(Mt(),Je(ut(Zn),{key:1,size:"14",type:"mdi",path:e.layer},null,8,["path"]))]))}},aY={name:"VueSlider",props:{modelValue:{},min:{default:0},max:{default:1},step:{default:.01},disabled:Boolean},computed:{backgroundSize(){return(this.modelValue-this.min)*100/(this.max-this.min)+"% 100%"},form:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}},sY=["value","min","max","step","disabled"];function lY(t,e,n,a,s,d){return Mt(),pe("input",{value:d.form,onChange:e[0]||(e[0]=({target:l})=>d.form=parseFloat(l.value)),type:"range",min:n.min,max:n.max,step:n.step,style:fi({backgroundSize:d.backgroundSize}),disabled:n.disabled},null,44,sY)}const cY=Vn(aY,[["render",lY],["__scopeId","data-v-fb1c3ee7"]]),uY={class:"menu-divider"},hY=nr({__name:"menu-divider",props:{item:{},data:{}},setup(t){return(e,n)=>(Mt(),pe("div",uY))}}),dY=["title"],fY=nr({__name:"menu-item",props:{item:{}},setup(t){return(e,n)=>(Mt(),pe("button",Tr(e.$attrs,{class:"menu-item",title:e.item.name}),[e.item.icon?(Mt(),Je(ut(Zn),{key:0,size:"14",type:"mdi",path:e.item.icon},null,8,["path"])):wn("",!0)],16,dY))}}),FA=nr({__name:"index",props:{item:{},data:{},mapId:{}},setup(t){const e=t,n=_n(()=>{switch(e.item.type){case"divider":return hY}return e.item.type=="item"&&"component"in e.item?e.item.component():fY});return(a,s)=>(Mt(),Je(sa(n.value),Tr({item:a.item,data:a.data,mapId:a.mapId},a.$attrs),null,16,["item","data","mapId"]))}}),g3=t=>(_c("data-v-1b24f90a"),t=t(),bc(),t),pY={class:"layer-item-container"},mY={class:"layer-item__info"},gY=["title"],yY=g3(()=>Nt("div",{class:"v-spacer"},null,-1)),vY={class:"layer-item__title-action"},_Y=["disabled"],bY=["disabled"],xY={key:0,class:"layer-item__action"},AY={key:0,class:"layer-item__opacity"},wY=g3(()=>Nt("div",{class:"v-spacer"},null,-1)),CY={key:1},IY=nr({__name:"layer-item",props:{item:{},mapId:{},readonly:{type:Boolean}},emits:["update:item","click","click:remove","click:action","click:content-menu"],setup(t,{emit:e}){const n=t,a=e,s={menu:pb,loading:I2,layer:Xy,flyTo:Rg,delete:Bf,edit:RO,legendOpen:PO,legendClose:FT},d=mn(!1),l=_n({get(){return n.item.opacity},set(F){let j=n.item;j.opacity=F,a("update:item",j)}}),o=()=>{a("click:remove",n.item)},g=_n(()=>n.item?n.item.getMenus()||[]:[]),_=_n(()=>g.value.filter(F=>!F.location||F.location=="extra").sort((F,j)=>(F.order||0)-(j.order||0))),C=_n(()=>g.value.filter(F=>F.location=="bottom").sort((F,j)=>(F.order||0)-(j.order||0))),I=_n(()=>g.value.filter(F=>F.location=="menu").sort((F,j)=>(F.order||0)-(j.order||0))),E=_n(()=>!n.readonly&&(!n.item.config.disabled_opacity||C.value.length>0));function S(F){a("click:action",{action:F,item:n.item})}function k(F){a("click:content-menu",{event:F,actions:I.value,item:n.item})}const R=_n(()=>n.item&&n.item.legend),B=mn(!1);function V(){B.value=!B.value}return(F,j)=>(Mt(),pe("div",pY,[Nt("div",mY,[ee(oY,{class:"layer-item__icon",loading:d.value,item:{item:F.item}},null,8,["loading","item"]),Nt("span",{class:"layer-item__title",title:F.item.getName(),onClick:j[0]||(j[0]=G=>a("click",F.item))},[Nt("span",null,Rn(F.item.getName()),1)],8,gY),yY,Nt("div",vY,[Wn(F.$slots,"pre-btn",{loading:d.value},void 0,!0),(Mt(!0),pe(mr,null,ki(_.value,(G,Q)=>(Mt(),Je(FA,{key:Q,class:"layer-item__button",item:G,data:F.item,disabled:d.value,mapId:F.mapId,onClick:nt=>S(G)},null,8,["item","data","disabled","mapId","onClick"]))),128)),!F.item.config.disable_delete&&!n.readonly?(Mt(),pe("button",{key:0,class:"layer-item__button",disabled:d.value,onClick:_i(o,["stop"])},[ee(ut(Zn),{size:"14",type:"mdi",path:s.delete},null,8,["path"])],8,_Y)):wn("",!0),Wn(F.$slots,"extra-btn",{loading:d.value},void 0,!0),I.value.length>0?(Mt(),pe("button",{key:1,class:"layer-item__button",disabled:d.value,onClick:_i(k,["prevent","stop"])},[ee(ut(Zn),{size:"14",type:"mdi",path:s.menu},null,8,["path"])],8,bY)):wn("",!0),E.value?wn("",!0):(Mt(),pe(mr,{key:2},[(Mt(!0),pe(mr,null,ki(C.value,(G,Q)=>(Mt(),Je(FA,{key:Q,class:"layer-item__button",item:G,data:F.item,disabled:d.value,mapId:F.mapId,onClick:nt=>S(G)},null,8,["item","data","disabled","mapId","onClick"]))),128)),R.value?(Mt(),pe("button",{key:0,class:"layer-item__button",onClick:_i(V,["stop"])},[ee(ut(Zn),{size:"14",type:"mdi",path:B.value?s.legendClose:s.legendOpen},null,8,["path"])])):wn("",!0)],64))])]),E.value?(Mt(),pe("div",xY,[F.item.config.disabled_opacity?wn("",!0):(Mt(),pe("div",AY,[ee(cY,{modelValue:l.value,"onUpdate:modelValue":j[1]||(j[1]=G=>l.value=G),modelModifiers:{number:!0},disabled:d.value},null,8,["modelValue","disabled"])])),wY,(Mt(!0),pe(mr,null,ki(C.value,(G,Q)=>(Mt(),Je(FA,{key:Q,class:"layer-item__button",item:G,data:F.item,disabled:d.value,mapId:F.mapId,onClick:nt=>S(G)},null,8,["item","data","disabled","mapId","onClick"]))),128)),R.value?(Mt(),pe("button",{key:1,class:"layer-item__button",onClick:_i(V,["stop"])},[ee(ut(Zn),{size:"14",type:"mdi",path:B.value?s.legendClose:s.legendOpen},null,8,["path"])])):wn("",!0)])):wn("",!0),n.item.legend&&B.value?(Mt(),pe("div",CY,[(Mt(),Je(sa(n.item.legend())))])):wn("",!0)]))}}),y3=Vn(IY,[["__scopeId","data-v-1b24f90a"]]),MY=t=>(_c("data-v-286327a2"),t=t(),bc(),t),SY={class:"layer-control-container"},EY={class:"layer-control__header"},TY=MY(()=>Nt("div",{class:"v-spacer"},null,-1)),PY={class:"layer-control__list"},kY={class:"layer-context-menu"},LY=["onClick"],RY={class:"layer-context-menu__item-icon"},DY=["innerHTML"],OY=nr({__name:"LayerList",props:{...vo,disabledDrag:Boolean,disabled:Boolean},setup(t){const e=t,n={icon:Xy,menu:pb,group:{create:C2},deleteAll:Bf,layer:{create:vd}},{callMap:a,mapId:s}=bi(e),d=mn([]),l=_n(()=>rC(s.value).value);jo(l,()=>{S()},{deep:!0}),go(()=>{S()});const o=mn(void 0),g=mn([]);function _(){a(X=>{let K="";d.value.slice().forEach((Z,at)=>{Z.index=at,Q2(Z.getParent(),[pt=>{Ih(pt)&&(pt.moveLayer(X,K),K=pt.getBeforeId())}])})})}function C(X){X&&typeof X!="string"&&(!X||!X.children||X.children.length===0||X.children.forEach(K=>{bA(s.value,K)}))}function I(X){a(K=>{Gp(X.getParent(),Z=>Ih(Z),[Z=>{X.config.disabled_opacity||Z.setOpacity(K,X.opacity)}])})}function E(X){X&&(bA(s.value,X),S())}function S(){R(),El(()=>{k()})}function k(){o.value&&o.value.update(d.value)}function R(){d.value=sv(s.value,"list").sort((X,K)=>K.index-X.index)||[]}function B(){o.value&&o.value.addNewGroup("")}function V(){!d.value||d.value.length===0||(d.value.forEach(X=>{bA(s.value,X)}),S())}const F=mn(),j=ls({items:[],view:void 0});function G({event:X,item:K,actions:Z}){j.items=Z?[...Z]:[],j.view=K,F.value&&F.value.open(X,K)}function Q(){j.items=[],j.view=void 0,F.value&&F.value.close()}function nt({action:X,item:K}){X&&X.type==="item"&&K&&"click"in X&&X.click(K,s.value,K)}return(X,K)=>(Mt(),pe("div",SY,[Nt("div",EY,[Wn(X.$slots,"title",{},void 0,!0),TY,Nt("button",{class:"layer-item__button",onClick:K[0]||(K[0]=Z=>B())},[ee(ut(Zn),{size:"16",type:"mdi",path:n.group.create},null,8,["path"])]),Nt("button",{class:"layer-item__button",onClick:V},[ee(ut(Zn),{size:"16",type:"mdi",path:n.deleteAll},null,8,["path"])])]),Nt("div",PY,[ee(iY,{ref_key:"groupRef",ref:o,items:d.value,"onUpdate:items":K[1]||(K[1]=Z=>d.value=Z),selected:g.value,"onUpdate:selected":K[2]||(K[2]=Z=>g.value=Z),disabled:t.disabled,disabledDrag:t.disabledDrag,"onClickDrag:done":K[3]||(K[3]=Z=>_()),"onClickGroup:remove":C},{item:Ie(({isSelected:Z,item:at,toggleSelect:pt})=>[Wn(X.$slots,"item",{item:at,isSelected:Z,toggleSelect:pt},()=>[(Mt(),Je(sa(at.component||y3),{item:at,isSelected:Z,onClick:rt=>pt(at),"onUpdate:item":I,"onClick:remove":E,"onClick:contentMenu":G,"onClick:action":nt,mapId:ut(s),readonly:!1},null,40,["item","isSelected","onClick","mapId"]))],!0)]),_:3},8,["items","selected","disabled","disabledDrag"])]),ee(ut(sC),{ref_key:"contextMenuRef",ref:F},{default:Ie(()=>[Nt("ul",kY,[(Mt(!0),pe(mr,null,ki(j.items,(Z,at)=>(Mt(),pe("li",{key:at,onClick:_i(pt=>{nt({action:Z,item:j.view}),Q()},["stop"]),class:Li(["layer-context-menu__item",[Z.class,Z.type==="divider"?"layer-context-menu__divider":""]])},[Nt("div",RY,[ee(ut(Zn),{size:"16",type:"mdi",path:Z.icon||X.mdiCircleSmall},null,8,["path"])]),Nt("span",{innerHTML:Z.name},null,8,DY)],10,LY))),128))])]),_:1},512)]))}}),zY=Vn(OY,[["__scopeId","data-v-286327a2"]]),FY={class:"layer-control__title"},BY={class:"layer-control"},NY={class:"base-map-card-container"},jY={name:"layer-control"},VY=nr({...jY,props:{...vo,...ZT({show:!1})},setup(t){const e=t,{mapId:n,moduleContainerProps:a}=bi(e),{trans:s,setLocale:d}=To(n.value);d({map:{"layer-control":{title:"Layer Control","create-btn":"Create Layer",create:{title:"New Layer"},field:{name:"Name",type:"Type",url:"Url",minzoom:"Min zoom",maxzoom:"Max zoom",file:"File",geojson:"Geojson",tiles:"Tiles",bound:{title:"Bound",minx:"Min Longitude",miny:"Min Latitude",maxx:"Max Longitude",maxy:"Max Latitude"}},info:{title:"Info"}}}});const l={icon:Xy,menu:pb,group:{create:C2},deleteAll:Bf,layer:{create:vd}},[o,g]=Pf(e.show),[_,C]=Pf();function I(){C()}return(E,S)=>(Mt(),Je(ut(Uo),Eo(yo(ut(a))),{btn:Ie(()=>[ut(o)?wn("",!0):(Mt(),Je(ut(ui),{key:0,tooltip:ut(s)("map.layer-control.title"),onClick:S[0]||(S[0]=_i(k=>ut(g)(),["stop"])),active:ut(o)},{default:Ie(()=>[ee(ut(Zn),{size:"14",type:"mdi",path:l.icon},null,8,["path"])]),_:1},8,["tooltip","active"]))]),draggable:Ie(k=>[ee(ut(GT),{containerId:k.containerId,show:ut(o),"onUpdate:show":S[2]||(S[2]=R=>mo(o)?o.value=R:null)},{title:Ie(()=>[Nt("span",FY,Rn(ut(s)("map.layer-control.title")),1)]),default:Ie(()=>[Nt("div",BY,[ee(zY,{mapId:ut(n)},{title:Ie(()=>[Wn(E.$slots,"titleList",{mapId:ut(n)},()=>[Nt("button",{class:"layer-item__button",onClick:S[1]||(S[1]=_i(R=>I(),["stop"]))},[ee(ut(Zn),{size:"14",type:"mdi",path:l.layer.create},null,8,["path"])])],!0)]),_:3},8,["mapId"]),Nt("div",NY,[Wn(E.$slots,"endList",{mapId:ut(n)},void 0,!0)])])]),_:2},1032,["containerId","show"])]),default:Ie(()=>[ee(Tq,{show:ut(_),"onUpdate:show":S[3]||(S[3]=k=>mo(_)?_.value=k:null)},null,8,["show"]),Wn(E.$slots,"default",{},void 0,!0)]),_:3},16))}}),UY=Vn(VY,[["__scopeId","data-v-d955a1d5"]]);function HY(t){const e=[];if(!t||t.length==0)return e;const n={};return t.forEach(a=>{if(!a.group){e.push(a);return}n[a.group.id]||(n[a.group.id]=$Y(a.group),e.push(n[a.group.id])),n[a.group.id].children.push(a)}),e}function $Y(t){let e={id:`group-${new Date().getTime()}`,name:"New Group",isGroup:!0,show:!0,children:[]};return e=Object.assign({},e,t),e}const GY={components:{SvgIcon:Zn},props:{isSelected:Boolean,disabledDrag:Boolean,item:{type:Object,default:()=>({})}},computed:{path(){return{draggable:TT}}}},ZY={class:"draggable-handle__icon"},WY={class:"draggale-item__info"};function qY(t,e,n,a,s,d){const l=Js("SvgIcon");return Mt(),pe("div",{class:Li(["draggale-item",{"draggale-item-active":n.isSelected}])},[n.disabledDrag?wn("",!0):(Mt(),pe("div",{key:0,class:"draggable-handle",style:fi({background:n.item.color})},[Nt("div",ZY,[ee(l,{size:"14",type:"mdi",path:d.path.draggable},null,8,["path"])])],4)),Nt("div",WY,[Wn(t.$slots,"default",{},void 0,!0)])],2)}const v3=Vn(GY,[["render",qY],["__scopeId","data-v-7e4827cb"]]),KY={class:"draggable-group__info"},YY=["title"],XY={class:"draggable-group__action"},QY={key:0,class:"draggable-group__divider"},JY={key:0,class:"draggable-group__nodata"},tX=nr({__name:"ListGroupItem",props:{item:{type:Object,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean,readonly:Boolean},setup(t){const e={group:{open:kT,close:PT}},n=mn(!0);function a(){n.value=!n.value}return(s,d)=>(Mt(),Je(v3,{disabledDrag:t.disabledDrag,class:"draggable-group__item"},{default:Ie(()=>[Nt("div",KY,[Nt("span",{class:"draggable-group__title",title:t.item.name},Rn(t.item.name),9,YY),Nt("div",XY,[Wn(s.$slots,"extra-data",{item:t.item},void 0,!0),Nt("span",{onClick:d[0]||(d[0]=l=>a())},[n.value?(Mt(),Je(ut(Zn),{key:0,size:"14",type:"mdi",path:e.group.close},null,8,["path"])):(Mt(),Je(ut(Zn),{key:1,size:"14",type:"mdi",path:e.group.open},null,8,["path"]))])])]),n.value?(Mt(),pe("div",QY)):wn("",!0),Nt("div",{class:Li({"draggable-group__children-container":!0,_show:n.value})},[Wn(s.$slots,"items-list",{},()=>[!t.item.children||t.item.children.length===0?(Mt(),pe("div",JY," Drag layer inside this group ")):wn("",!0)],!0)],2)]),_:3},8,["disabledDrag"]))}}),eX=Vn(tX,[["__scopeId","data-v-2a8c9003"]]),nX={class:"draggable-group__children"},rX={class:"leaf-item"},iX=["title"],oX={name:"RecursiveList"},aX=nr({...oX,props:{item:{type:Object,required:!0},disabledDrag:{type:Boolean,default:!1},isGroup:{type:Function,default:t=>Array.isArray(t.children)},isLeaf:{type:Function,default:t=>!Array.isArray(t.children)}},setup(t){return(e,n)=>{const a=Js("RecursiveList",!0);return t.isGroup(t.item)?(Mt(),Je(eX,{key:0,item:t.item,"disabled-drag":t.disabledDrag},{"extra-data":Ie(({item:s})=>[Wn(e.$slots,"group-extra-data",{item:s},void 0,!0)]),"items-list":Ie(()=>[Nt("div",nX,[(Mt(!0),pe(mr,null,ki(t.item.children,(s,d)=>(Mt(),Je(a,{key:s.id||d,item:s,"disabled-drag":t.disabledDrag,"is-group":t.isGroup,"is-leaf":t.isLeaf},{"group-extra-data":Ie(({item:l})=>[Wn(e.$slots,"group-extra-data",{item:l},void 0,!0)]),leaf:Ie(({item:l})=>[Wn(e.$slots,"leaf",{item:l},void 0,!0)]),_:2},1032,["item","disabled-drag","is-group","is-leaf"]))),128))])]),_:3},8,["item","disabled-drag"])):(Mt(),Je(v3,{key:1,item:t.item,"disabled-drag":t.disabledDrag},{default:Ie(()=>[Wn(e.$slots,"leaf",{item:t.item},()=>[Nt("div",rX,[Nt("span",{class:"leaf-item__title",title:t.item.name},Rn(t.item.name),9,iX)])],!0)]),_:3},8,["item","disabled-drag"]))}}}),sX=Vn(aX,[["__scopeId","data-v-58a983c4"]]),lX=t=>(_c("data-v-eedfe689"),t=t(),bc(),t),cX={class:"layer-control-container"},uX=lX(()=>Nt("div",{class:"layer-control__header"},[Nt("div",{class:"v-spacer"})],-1)),hX={class:"layer-control__list"},dX={class:"layer-context-menu"},fX=["onClick"],pX={class:"layer-context-menu__item-icon"},mX=["innerHTML"],gX=nr({__name:"LayerListReadonly",props:{...vo,disabledDrag:Boolean,disabled:Boolean},setup(t){const e=t,{callMap:n,mapId:a}=bi(e),s=mn([]);go(()=>{l()});function d(B){n(V=>{Gp(B.getParent(),F=>Ih(F),[F=>{F.toggleShow(V,B.show)},F=>{B.config.disabled_opacity||F.setOpacity(V,B.opacity)}])})}function l(){C(),El(()=>{_()})}const o=xc(),g=mn([]);function _(){var B;g.value=HY(s.value),(B=o==null?void 0:o.proxy)==null||B.$forceUpdate()}function C(){s.value=sv(a.value,"list").sort((B,V)=>V.index-B.index)||[]}const I=mn(),E=ls({items:[],view:void 0});function S({event:B,item:V,actions:F}){E.items=F?[...F]:[],E.view=V,I.value&&I.value.open(B,V)}function k(){E.items=[],E.view=void 0,I.value&&I.value.close()}function R({action:B,item:V}){B&&B.type==="item"&&V&&B.click(V,a.value,V)}return(B,V)=>(Mt(),pe("div",cX,[uX,Nt("div",hX,[(Mt(!0),pe(mr,null,ki(g.value,(F,j)=>(Mt(),pe("div",{key:F.id||j},[ee(sX,{item:F,disabledDrag:""},{leaf:Ie(({item:G})=>[(Mt(),Je(sa(G.component||y3),{item:G,"onUpdate:item":d,"onClick:contentMenu":S,"onClick:action":R,mapId:ut(a),readonly:""},null,40,["item","mapId"]))]),_:2},1032,["item"])]))),128))]),ee(ut(sC),{ref_key:"contextMenuRef",ref:I},{default:Ie(()=>[Nt("ul",dX,[(Mt(!0),pe(mr,null,ki(E.items,(F,j)=>(Mt(),pe("li",{key:j,onClick:_i(G=>{R({action:F,item:E.view}),k()},["stop"]),class:Li(["layer-context-menu__item",[F.class,F.type==="divider"?"layer-context-menu__divider":""]])},[Nt("div",pX,[ee(ut(Zn),{size:"16",type:"mdi",path:F.icon||B.mdiCircleSmall},null,8,["path"])]),Nt("span",{innerHTML:F.name},null,8,mX)],10,fX))),128))])]),_:1},512)]))}}),yX=Vn(gX,[["__scopeId","data-v-eedfe689"]]),vX={class:"layer-control__title"},_X={class:"layer-control"},bX={class:"base-map-card-container"},xX={name:"layer-control"};({...xX,props:{...vo,...ZT({show:!1})}});const BA="source-highlighted",NA="layer-highlighted",AX=nr({__name:"LayerHighlight",props:{...vo,layer:{type:Object,default:()=>({type:"line",paint:{"line-color":"#004E98","line-width":4,"line-dasharray":[2,2]}})}},setup(t){const e=t;let n;const{mapId:a,callMap:s}=bi(e),d=_n(()=>{var C;return(C=IG(a.value))==null?void 0:C.value}),l=(C,I)=>{const E=C.getSource(BA);E?E.setData(I||{type:"FeatureCollection",features:[]}):C.addSource(BA,{type:"geojson",data:I||{type:"FeatureCollection",features:[]}})},o=C=>{var I,E;if(C.getLayer(NA))C.moveLayer(NA);else{const S={...e.layer};S.source=BA,S.id=NA;const k=(E=(I=C.getStyle().layers)==null?void 0:I[C.getStyle().layers.length-1])==null?void 0:E.id;C.addLayer(S,k)}},g=(C,I)=>{var R,B;if(n==null||n.remove(),n=void 0,!I||typeof I=="string"||!(I.type==="Feature"||I.type==="FeatureCollection"&&((R=I.features)==null?void 0:R.length)>0))return;const S=m$(I),k=(B=S==null?void 0:S.geometry)==null?void 0:B.coordinates;if(Array.isArray(k)){const[V,F]=k;n=new wg.Marker({}).setLngLat([V,F]).addTo(C)}};function _(C){const I=MG(a.value);if(I){const E=vc(I,S=>S.type=="source");if(E&&"hightLight"in E){s(S=>{var k;(k=E.hightLight)==null||k.call(E,S,C)});return}}s(E=>{l(E,C),o(E),g(E,C)})}return jo(d,()=>{_(d.value)},{deep:!0}),(C,I)=>(Mt(),pe("div"))}}),wX={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value},items(){return this.value.items||[]},colors(){return this.items.map(t=>t.color)}}},CX={class:"legend-item"},IX={class:"legend-text"},MX={class:"legend-value-container"};function SX(t,e,n,a,s,d){return Mt(),pe("div",CX,[Nt("div",IX,Rn(d.item.text)+":",1),Nt("div",MX,[(Mt(!0),pe(mr,null,ki(d.items,(l,o)=>(Mt(),pe("div",{class:"legend-value",key:o},Rn(l.value),1))),128))]),Nt("div",null,[Nt("div",{style:fi({background:`linear-gradient(to right,${d.colors.join(",")})`}),class:"legend-item-color"},null,4)])])}const EX=Vn(wX,[["render",SX],["__scopeId","data-v-38b04422"]]),TX={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value}}},PX={class:"legend-item"},kX={class:"legend-text"},LX={class:"legend-value"};function RX(t,e,n,a,s,d){return Mt(),pe("div",PX,[Nt("div",kX,Rn(d.item.text)+":",1),Nt("div",{style:fi({background:`${d.item.color}`}),class:"legend-item-color"},null,4),Nt("div",LX,Rn(d.item.value),1)])}const DX=Vn(TX,[["render",RX],["__scopeId","data-v-261080ab"]]),OX={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value}}},zX={class:"legend-item"},FX={class:"legend-text"},BX={class:"legend-value"};function NX(t,e,n,a,s,d){return Mt(),pe("div",zX,[Nt("div",FX,Rn(d.item.text)+":",1),Nt("div",BX,Rn(d.item.value),1)])}const jX=Vn(OX,[["render",NX],["__scopeId","data-v-81e4c2e4"]]),_3={linear:EX,color:DX,text:jX};function VX(t,e){const n=_3[t];return()=>Sf(n,{value:e})}function UX(t){return()=>nr({name:"MultiLegend",setup(){return()=>t.map(e=>{const n=_3[e.type];return Sf(n,{value:e.value})})}})}var b3={exports:{}};(function(t,e){(function(n,a){t.exports=a()})(ho,function(){var n=function(O,Y){var At={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},$t={on:function(Qt,_e,cn){if(At[Qt]===void 0)throw new Error("Invalid event type: "+Qt);At[Qt].push({selector:_e,fn:cn})},render:function(Qt){Y.store.featureChanged(Qt)}},Zt=function(Qt,_e){for(var cn=At[Qt],dn=cn.length;dn--;){var An=cn[dn];if(An.selector(_e)){An.fn.call($t,_e)||Y.store.render(),Y.ui.updateMapClasses();break}}};return O.start.call($t),{render:O.render,stop:function(){O.stop&&O.stop()},trash:function(){O.trash&&(O.trash(),Y.store.render())},combineFeatures:function(){O.combineFeatures&&O.combineFeatures()},uncombineFeatures:function(){O.uncombineFeatures&&O.uncombineFeatures()},drag:function(Qt){Zt("drag",Qt)},click:function(Qt){Zt("click",Qt)},mousemove:function(Qt){Zt("mousemove",Qt)},mousedown:function(Qt){Zt("mousedown",Qt)},mouseup:function(Qt){Zt("mouseup",Qt)},mouseout:function(Qt){Zt("mouseout",Qt)},keydown:function(Qt){Zt("keydown",Qt)},keyup:function(Qt){Zt("keyup",Qt)},touchstart:function(Qt){Zt("touchstart",Qt)},touchmove:function(Qt){Zt("touchmove",Qt)},touchend:function(Qt){Zt("touchend",Qt)},tap:function(Qt){Zt("tap",Qt)}}};function a(O){return O&&O.__esModule&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O}function s(O){if(O.__esModule)return O;var Y=O.default;if(typeof Y=="function"){var At=function $t(){if(this instanceof $t){var Zt=[null];Zt.push.apply(Zt,arguments);var Qt=Function.bind.apply(Y,Zt);return new Qt}return Y.apply(this,arguments)};At.prototype=Y.prototype}else At={};return Object.defineProperty(At,"__esModule",{value:!0}),Object.keys(O).forEach(function($t){var Zt=Object.getOwnPropertyDescriptor(O,$t);Object.defineProperty(At,$t,Zt.get?Zt:{enumerable:!0,get:function(){return O[$t]}})}),At}var d={},l={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},o=l;function g(O){var Y=0;if(O&&O.length>0){Y+=Math.abs(_(O[0]));for(var At=1;At<O.length;At++)Y-=Math.abs(_(O[At]))}return Y}function _(O){var Y,At,$t,Zt,Qt,_e,cn=0,dn=O.length;if(dn>2){for(_e=0;_e<dn;_e++)_e===dn-2?($t=dn-2,Zt=dn-1,Qt=0):_e===dn-1?($t=dn-1,Zt=0,Qt=1):($t=_e,Zt=_e+1,Qt=_e+2),Y=O[$t],At=O[Zt],cn+=(C(O[Qt][0])-C(Y[0]))*Math.sin(C(At[1]));cn=cn*o.RADIUS*o.RADIUS/2}return cn}function C(O){return O*Math.PI/180}d.geometry=function O(Y){var At,$t=0;switch(Y.type){case"Polygon":return g(Y.coordinates);case"MultiPolygon":for(At=0;At<Y.coordinates.length;At++)$t+=g(Y.coordinates[At]);return $t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(At=0;At<Y.geometries.length;At++)$t+=O(Y.geometries[At]);return $t}},d.ring=_;var I={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},E={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},S={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},k={POLYGON:"polygon",LINE:"line_string",POINT:"point"},R={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},B={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},V={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},F={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},j={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},G={ACTIVE:"true",INACTIVE:"false"},Q=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],nt=-85,X=Object.freeze({__proto__:null,classes:I,sources:E,cursors:S,types:k,geojsonTypes:R,modes:B,events:V,updateActions:F,meta:j,activeStates:G,interactions:Q,LAT_MIN:-90,LAT_RENDERED_MIN:nt,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),K={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Z(O,Y){var At=K[O.geometry.type]-K[Y.geometry.type];return At===0&&O.geometry.type===R.POLYGON?O.area-Y.area:At}function at(O){return O.map(function(Y){return Y.geometry.type===R.POLYGON&&(Y.area=d.geometry({type:R.FEATURE,property:{},geometry:Y.geometry})),Y}).sort(Z).map(function(Y){return delete Y.area,Y})}function pt(O,Y){return Y===void 0&&(Y=0),[[O.point.x-Y,O.point.y-Y],[O.point.x+Y,O.point.y+Y]]}function rt(O){if(this._items={},this._nums={},this._length=O?O.length:0,O)for(var Y=0,At=O.length;Y<At;Y++)this.add(O[Y]),O[Y]!==void 0&&(typeof O[Y]=="string"?this._items[O[Y]]=Y:this._nums[O[Y]]=Y)}rt.prototype.add=function(O){return this.has(O)||(this._length++,typeof O=="string"?this._items[O]=this._length:this._nums[O]=this._length),this},rt.prototype.delete=function(O){return this.has(O)===!1||(this._length--,delete this._items[O],delete this._nums[O]),this},rt.prototype.has=function(O){return(typeof O=="string"||typeof O=="number")&&(this._items[O]!==void 0||this._nums[O]!==void 0)},rt.prototype.values=function(){var O=this,Y=[];return Object.keys(this._items).forEach(function(At){Y.push({k:At,v:O._items[At]})}),Object.keys(this._nums).forEach(function(At){Y.push({k:JSON.parse(At),v:O._nums[At]})}),Y.sort(function(At,$t){return At.v-$t.v}).map(function(At){return At.k})},rt.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var xt=[j.FEATURE,j.MIDPOINT,j.VERTEX],q={click:function(O,Y,At){return zt(O,Y,At,At.options.clickBuffer)},touch:function(O,Y,At){return zt(O,Y,At,At.options.touchBuffer)}};function zt(O,Y,At,$t){if(At.map===null)return[];var Zt=O?pt(O,$t):Y,Qt={};At.options.styles&&(Qt.layers=At.options.styles.map(function(An){return An.id}).filter(function(An){return At.map.getLayer(An)!=null}));var _e=At.map.queryRenderedFeatures(Zt,Qt).filter(function(An){return xt.indexOf(An.properties.meta)!==-1}),cn=new rt,dn=[];return _e.forEach(function(An){var gn=An.properties.id;cn.has(gn)||(cn.add(gn),dn.push(An))}),at(dn)}function Rt(O,Y){var At=q.click(O,null,Y),$t={mouse:S.NONE};return At[0]&&($t.mouse=At[0].properties.active===G.ACTIVE?S.MOVE:S.POINTER,$t.feature=At[0].properties.meta),Y.events.currentModeName().indexOf("draw")!==-1&&($t.mouse=S.ADD),Y.ui.queueMapClasses($t),Y.ui.updateMapClasses(),At[0]}function Bt(O,Y){var At=O.x-Y.x,$t=O.y-Y.y;return Math.sqrt(At*At+$t*$t)}function Xt(O,Y,At){At===void 0&&(At={});var $t=At.fineTolerance!=null?At.fineTolerance:4,Zt=At.grossTolerance!=null?At.grossTolerance:12,Qt=At.interval!=null?At.interval:500;O.point=O.point||Y.point,O.time=O.time||Y.time;var _e=Bt(O.point,Y.point);return _e<$t||_e<Zt&&Y.time-O.time<Qt}function ge(O,Y,At){At===void 0&&(At={});var $t=At.tolerance!=null?At.tolerance:25,Zt=At.interval!=null?At.interval:250;return O.point=O.point||Y.point,O.time=O.time||Y.time,Bt(O.point,Y.point)<$t&&Y.time-O.time<Zt}var en={exports:{}},te=en.exports=function(O,Y){if(Y||(Y=16),O===void 0&&(O=128),O<=0)return"0";for(var At=Math.log(Math.pow(2,O))/Math.log(Y),$t=2;At===1/0;$t*=2)At=Math.log(Math.pow(2,O/$t))/Math.log(Y)*$t;var Zt=At-Math.floor(At),Qt="";for($t=0;$t<Math.floor(At);$t++)Qt=Math.floor(Math.random()*Y).toString(Y)+Qt;if(Zt){var _e=Math.pow(Y,Zt);Qt=Math.floor(Math.random()*_e).toString(Y)+Qt}var cn=parseInt(Qt,Y);return cn!==1/0&&cn>=Math.pow(2,O)?te(O,Y):Qt};te.rack=function(O,Y,At){var $t=function(Qt){var _e=0;do{if(_e++>10){if(!At)throw new Error("too many ID collisions, use more bits");O+=At}var cn=te(O,Y)}while(Object.hasOwnProperty.call(Zt,cn));return Zt[cn]=Qt,cn},Zt=$t.hats={};return $t.get=function(Qt){return $t.hats[Qt]},$t.set=function(Qt,_e){return $t.hats[Qt]=_e,$t},$t.bits=O||128,$t.base=Y||16,$t};var Gt=a(en.exports),Re=function(O,Y){this.ctx=O,this.properties=Y.properties||{},this.coordinates=Y.geometry.coordinates,this.id=Y.id||Gt(),this.type=Y.geometry.type};Re.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Re.prototype.incomingCoords=function(O){this.setCoordinates(O)},Re.prototype.setCoordinates=function(O){this.coordinates=O,this.changed()},Re.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Re.prototype.setProperty=function(O,Y){this.properties[O]=Y},Re.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:R.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Re.prototype.internal=function(O){var Y={id:this.id,meta:j.FEATURE,"meta:type":this.type,active:G.INACTIVE,mode:O};if(this.ctx.options.userProperties)for(var At in this.properties)Y["user_"+At]=this.properties[At];return{type:R.FEATURE,properties:Y,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Ge=function(O,Y){Re.call(this,O,Y)};(Ge.prototype=Object.create(Re.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Ge.prototype.updateCoordinate=function(O,Y,At){this.coordinates=arguments.length===3?[Y,At]:[O,Y],this.changed()},Ge.prototype.getCoordinate=function(){return this.getCoordinates()};var Ce=function(O,Y){Re.call(this,O,Y)};(Ce.prototype=Object.create(Re.prototype)).isValid=function(){return this.coordinates.length>1},Ce.prototype.addCoordinate=function(O,Y,At){this.changed();var $t=parseInt(O,10);this.coordinates.splice($t,0,[Y,At])},Ce.prototype.getCoordinate=function(O){var Y=parseInt(O,10);return JSON.parse(JSON.stringify(this.coordinates[Y]))},Ce.prototype.removeCoordinate=function(O){this.changed(),this.coordinates.splice(parseInt(O,10),1)},Ce.prototype.updateCoordinate=function(O,Y,At){var $t=parseInt(O,10);this.coordinates[$t]=[Y,At],this.changed()};var nn=function(O,Y){Re.call(this,O,Y),this.coordinates=this.coordinates.map(function(At){return At.slice(0,-1)})};(nn.prototype=Object.create(Re.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(O){return O.length>2})},nn.prototype.incomingCoords=function(O){this.coordinates=O.map(function(Y){return Y.slice(0,-1)}),this.changed()},nn.prototype.setCoordinates=function(O){this.coordinates=O,this.changed()},nn.prototype.addCoordinate=function(O,Y,At){this.changed();var $t=O.split(".").map(function(Zt){return parseInt(Zt,10)});this.coordinates[$t[0]].splice($t[1],0,[Y,At])},nn.prototype.removeCoordinate=function(O){this.changed();var Y=O.split(".").map(function($t){return parseInt($t,10)}),At=this.coordinates[Y[0]];At&&(At.splice(Y[1],1),At.length<3&&this.coordinates.splice(Y[0],1))},nn.prototype.getCoordinate=function(O){var Y=O.split(".").map(function($t){return parseInt($t,10)}),At=this.coordinates[Y[0]];return JSON.parse(JSON.stringify(At[Y[1]]))},nn.prototype.getCoordinates=function(){return this.coordinates.map(function(O){return O.concat([O[0]])})},nn.prototype.updateCoordinate=function(O,Y,At){this.changed();var $t=O.split("."),Zt=parseInt($t[0],10),Qt=parseInt($t[1],10);this.coordinates[Zt]===void 0&&(this.coordinates[Zt]=[]),this.coordinates[Zt][Qt]=[Y,At]};var be={MultiPoint:Ge,MultiLineString:Ce,MultiPolygon:nn},Se=function(O,Y,At,$t,Zt){var Qt=At.split("."),_e=parseInt(Qt[0],10),cn=Qt[1]?Qt.slice(1).join("."):null;return O[_e][Y](cn,$t,Zt)},xe=function(O,Y){if(Re.call(this,O,Y),delete this.coordinates,this.model=be[Y.geometry.type],this.model===void 0)throw new TypeError(Y.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(Y.geometry.coordinates)};function Be(O){this.map=O.map,this.drawConfig=JSON.parse(JSON.stringify(O.options||{})),this._ctx=O}(xe.prototype=Object.create(Re.prototype))._coordinatesToFeatures=function(O){var Y=this,At=this.model.bind(this);return O.map(function($t){return new At(Y.ctx,{id:Gt(),type:R.FEATURE,properties:{},geometry:{coordinates:$t,type:Y.type.replace("Multi","")}})})},xe.prototype.isValid=function(){return this.features.every(function(O){return O.isValid()})},xe.prototype.setCoordinates=function(O){this.features=this._coordinatesToFeatures(O),this.changed()},xe.prototype.getCoordinate=function(O){return Se(this.features,"getCoordinate",O)},xe.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(O){return O.type===R.POLYGON?O.getCoordinates():O.coordinates})))},xe.prototype.updateCoordinate=function(O,Y,At){Se(this.features,"updateCoordinate",O,Y,At),this.changed()},xe.prototype.addCoordinate=function(O,Y,At){Se(this.features,"addCoordinate",O,Y,At),this.changed()},xe.prototype.removeCoordinate=function(O){Se(this.features,"removeCoordinate",O),this.changed()},xe.prototype.getFeatures=function(){return this.features},Be.prototype.setSelected=function(O){return this._ctx.store.setSelected(O)},Be.prototype.setSelectedCoordinates=function(O){var Y=this;this._ctx.store.setSelectedCoordinates(O),O.reduce(function(At,$t){return At[$t.feature_id]===void 0&&(At[$t.feature_id]=!0,Y._ctx.store.get($t.feature_id).changed()),At},{})},Be.prototype.getSelected=function(){return this._ctx.store.getSelected()},Be.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Be.prototype.isSelected=function(O){return this._ctx.store.isSelected(O)},Be.prototype.getFeature=function(O){return this._ctx.store.get(O)},Be.prototype.select=function(O){return this._ctx.store.select(O)},Be.prototype.deselect=function(O){return this._ctx.store.deselect(O)},Be.prototype.deleteFeature=function(O,Y){return Y===void 0&&(Y={}),this._ctx.store.delete(O,Y)},Be.prototype.addFeature=function(O){return this._ctx.store.add(O)},Be.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Be.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Be.prototype.setActionableState=function(O){O===void 0&&(O={});var Y={trash:O.trash||!1,combineFeatures:O.combineFeatures||!1,uncombineFeatures:O.uncombineFeatures||!1};return this._ctx.events.actionable(Y)},Be.prototype.changeMode=function(O,Y,At){return Y===void 0&&(Y={}),At===void 0&&(At={}),this._ctx.events.changeMode(O,Y,At)},Be.prototype.updateUIClasses=function(O){return this._ctx.ui.queueMapClasses(O)},Be.prototype.activateUIButton=function(O){return this._ctx.ui.setActiveButton(O)},Be.prototype.featuresAt=function(O,Y,At){if(At===void 0&&(At="click"),At!=="click"&&At!=="touch")throw new Error("invalid buffer type");return q[At](O,Y,this._ctx)},Be.prototype.newFeature=function(O){var Y=O.geometry.type;return Y===R.POINT?new Ge(this._ctx,O):Y===R.LINE_STRING?new Ce(this._ctx,O):Y===R.POLYGON?new nn(this._ctx,O):new xe(this._ctx,O)},Be.prototype.isInstanceOf=function(O,Y){if(O===R.POINT)return Y instanceof Ge;if(O===R.LINE_STRING)return Y instanceof Ce;if(O===R.POLYGON)return Y instanceof nn;if(O==="MultiFeature")return Y instanceof xe;throw new Error("Unknown feature class: "+O)},Be.prototype.doRender=function(O){return this._ctx.store.featureChanged(O)},Be.prototype.onSetup=function(){},Be.prototype.onDrag=function(){},Be.prototype.onClick=function(){},Be.prototype.onMouseMove=function(){},Be.prototype.onMouseDown=function(){},Be.prototype.onMouseUp=function(){},Be.prototype.onMouseOut=function(){},Be.prototype.onKeyUp=function(){},Be.prototype.onKeyDown=function(){},Be.prototype.onTouchStart=function(){},Be.prototype.onTouchMove=function(){},Be.prototype.onTouchEnd=function(){},Be.prototype.onTap=function(){},Be.prototype.onStop=function(){},Be.prototype.onTrash=function(){},Be.prototype.onCombineFeature=function(){},Be.prototype.onUncombineFeature=function(){},Be.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var tn={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Ln=Object.keys(tn);function Tt(O){var Y=Object.keys(O);return function(At,$t){$t===void 0&&($t={});var Zt={},Qt=Y.reduce(function(_e,cn){return _e[cn]=O[cn],_e},new Be(At));return{start:function(){var _e=this;Zt=Qt.onSetup($t),Ln.forEach(function(cn){var dn,An=tn[cn],gn=function(){return!1};O[An]&&(gn=function(){return!0}),_e.on(cn,gn,(dn=An,function(Mn){return Qt[dn](Zt,Mn)}))})},stop:function(){Qt.onStop(Zt)},trash:function(){Qt.onTrash(Zt)},combineFeatures:function(){Qt.onCombineFeatures(Zt)},uncombineFeatures:function(){Qt.onUncombineFeatures(Zt)},render:function(_e,cn){Qt.toDisplayFeatures(Zt,_e,cn)}}}}function H(O){return[].concat(O).filter(function(Y){return Y!==void 0})}function Dt(){var O=this;if(!(O.ctx.map&&O.ctx.map.getSource(E.HOT)!==void 0))return dn();var Y=O.ctx.events.currentModeName();O.ctx.ui.queueMapClasses({mode:Y});var At=[],$t=[];O.isDirty?$t=O.getAllIds():(At=O.getChangedIds().filter(function(An){return O.get(An)!==void 0}),$t=O.sources.hot.filter(function(An){return An.properties.id&&At.indexOf(An.properties.id)===-1&&O.get(An.properties.id)!==void 0}).map(function(An){return An.properties.id})),O.sources.hot=[];var Zt=O.sources.cold.length;O.sources.cold=O.isDirty?[]:O.sources.cold.filter(function(An){var gn=An.properties.id||An.properties.parent;return At.indexOf(gn)===-1});var Qt=Zt!==O.sources.cold.length||$t.length>0;function _e(An,gn){var Mn=O.get(An).internal(Y);O.ctx.events.currentModeRender(Mn,function(Kn){O.sources[gn].push(Kn)})}if(At.forEach(function(An){return _e(An,"hot")}),$t.forEach(function(An){return _e(An,"cold")}),Qt&&O.ctx.map.getSource(E.COLD).setData({type:R.FEATURE_COLLECTION,features:O.sources.cold}),O.ctx.map.getSource(E.HOT).setData({type:R.FEATURE_COLLECTION,features:O.sources.hot}),O._emitSelectionChange&&(O.ctx.map.fire(V.SELECTION_CHANGE,{features:O.getSelected().map(function(An){return An.toGeoJSON()}),points:O.getSelectedCoordinates().map(function(An){return{type:R.FEATURE,properties:{},geometry:{type:R.POINT,coordinates:An.coordinates}}})}),O._emitSelectionChange=!1),O._deletedFeaturesToEmit.length){var cn=O._deletedFeaturesToEmit.map(function(An){return An.toGeoJSON()});O._deletedFeaturesToEmit=[],O.ctx.map.fire(V.DELETE,{features:cn})}function dn(){O.isDirty=!1,O.clearChangedIds()}dn(),O.ctx.map.fire(V.RENDER,{})}function Pt(O){var Y,At=this;this._features={},this._featureIds=new rt,this._selectedFeatureIds=new rt,this._selectedCoordinates=[],this._changedFeatureIds=new rt,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=O,this.sources={hot:[],cold:[]},this.render=function(){Y||(Y=requestAnimationFrame(function(){Y=null,Dt.call(At)}))},this.isDirty=!1}function yt(O,Y){var At=O._selectedCoordinates.filter(function($t){return O._selectedFeatureIds.has($t.feature_id)});O._selectedCoordinates.length===At.length||Y.silent||(O._emitSelectionChange=!0),O._selectedCoordinates=At}Pt.prototype.createRenderBatch=function(){var O=this,Y=this.render,At=0;return this.render=function(){At++},function(){O.render=Y,At>0&&O.render()}},Pt.prototype.setDirty=function(){return this.isDirty=!0,this},Pt.prototype.featureChanged=function(O){return this._changedFeatureIds.add(O),this},Pt.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Pt.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Pt.prototype.getAllIds=function(){return this._featureIds.values()},Pt.prototype.add=function(O){return this.featureChanged(O.id),this._features[O.id]=O,this._featureIds.add(O.id),this},Pt.prototype.delete=function(O,Y){var At=this;return Y===void 0&&(Y={}),H(O).forEach(function($t){At._featureIds.has($t)&&(At._featureIds.delete($t),At._selectedFeatureIds.delete($t),Y.silent||At._deletedFeaturesToEmit.indexOf(At._features[$t])===-1&&At._deletedFeaturesToEmit.push(At._features[$t]),delete At._features[$t],At.isDirty=!0)}),yt(this,Y),this},Pt.prototype.get=function(O){return this._features[O]},Pt.prototype.getAll=function(){var O=this;return Object.keys(this._features).map(function(Y){return O._features[Y]})},Pt.prototype.select=function(O,Y){var At=this;return Y===void 0&&(Y={}),H(O).forEach(function($t){At._selectedFeatureIds.has($t)||(At._selectedFeatureIds.add($t),At._changedFeatureIds.add($t),Y.silent||(At._emitSelectionChange=!0))}),this},Pt.prototype.deselect=function(O,Y){var At=this;return Y===void 0&&(Y={}),H(O).forEach(function($t){At._selectedFeatureIds.has($t)&&(At._selectedFeatureIds.delete($t),At._changedFeatureIds.add($t),Y.silent||(At._emitSelectionChange=!0))}),yt(this,Y),this},Pt.prototype.clearSelected=function(O){return O===void 0&&(O={}),this.deselect(this._selectedFeatureIds.values(),{silent:O.silent}),this},Pt.prototype.setSelected=function(O,Y){var At=this;return Y===void 0&&(Y={}),O=H(O),this.deselect(this._selectedFeatureIds.values().filter(function($t){return O.indexOf($t)===-1}),{silent:Y.silent}),this.select(O.filter(function($t){return!At._selectedFeatureIds.has($t)}),{silent:Y.silent}),this},Pt.prototype.setSelectedCoordinates=function(O){return this._selectedCoordinates=O,this._emitSelectionChange=!0,this},Pt.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Pt.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Pt.prototype.getSelected=function(){var O=this;return this._selectedFeatureIds.values().map(function(Y){return O.get(Y)})},Pt.prototype.getSelectedCoordinates=function(){var O=this;return this._selectedCoordinates.map(function(Y){return{coordinates:O.get(Y.feature_id).getCoordinate(Y.coord_path)}})},Pt.prototype.isSelected=function(O){return this._selectedFeatureIds.has(O)},Pt.prototype.setFeatureProperty=function(O,Y,At){this.get(O).setProperty(Y,At),this.featureChanged(O)},Pt.prototype.storeMapConfig=function(){var O=this;Q.forEach(function(Y){O.ctx.map[Y]&&(O._mapInitialConfig[Y]=O.ctx.map[Y].isEnabled())})},Pt.prototype.restoreMapConfig=function(){var O=this;Object.keys(this._mapInitialConfig).forEach(function(Y){O._mapInitialConfig[Y]?O.ctx.map[Y].enable():O.ctx.map[Y].disable()})},Pt.prototype.getInitialConfigValue=function(O){return this._mapInitialConfig[O]===void 0||this._mapInitialConfig[O]};var vt=function(){for(var O=arguments,Y={},At=0;At<arguments.length;At++){var $t=O[At];for(var Zt in $t)Ut.call($t,Zt)&&(Y[Zt]=$t[Zt])}return Y},Ut=Object.prototype.hasOwnProperty,ne=a(vt),ue=["mode","feature","mouse"];function Ht(O){var Y=null,At=null,$t={onRemove:function(){return O.map.off("load",$t.connect),clearInterval(At),$t.removeLayers(),O.store.restoreMapConfig(),O.ui.removeButtons(),O.events.removeEventListeners(),O.ui.clearMapClasses(),O.boxZoomInitial&&O.map.boxZoom.enable(),O.map=null,O.container=null,O.store=null,Y&&Y.parentNode&&Y.parentNode.removeChild(Y),Y=null,this},connect:function(){O.map.off("load",$t.connect),clearInterval(At),$t.addLayers(),O.store.storeMapConfig(),O.events.addEventListeners()},onAdd:function(Zt){var Qt=Zt.fire;return Zt.fire=function(_e,cn){var dn=arguments;return Qt.length===1&&arguments.length!==1&&(dn=[ne({},{type:_e},cn)]),Qt.apply(Zt,dn)},O.map=Zt,O.events=function(_e){var cn=Object.keys(_e.options.modes).reduce(function(on,kn){return on[kn]=Tt(_e.options.modes[kn]),on},{}),dn={},An={},gn={},Mn=null,Kn=null;gn.drag=function(on,kn){kn({point:on.point,time:new Date().getTime()})?(_e.ui.queueMapClasses({mouse:S.DRAG}),Kn.drag(on)):on.originalEvent.stopPropagation()},gn.mousedrag=function(on){gn.drag(on,function(kn){return!Xt(dn,kn)})},gn.touchdrag=function(on){gn.drag(on,function(kn){return!ge(An,kn)})},gn.mousemove=function(on){if((on.originalEvent.buttons!==void 0?on.originalEvent.buttons:on.originalEvent.which)===1)return gn.mousedrag(on);var kn=Rt(on,_e);on.featureTarget=kn,Kn.mousemove(on)},gn.mousedown=function(on){dn={time:new Date().getTime(),point:on.point};var kn=Rt(on,_e);on.featureTarget=kn,Kn.mousedown(on)},gn.mouseup=function(on){var kn=Rt(on,_e);on.featureTarget=kn,Xt(dn,{point:on.point,time:new Date().getTime()})?Kn.click(on):Kn.mouseup(on)},gn.mouseout=function(on){Kn.mouseout(on)},gn.touchstart=function(on){if(_e.options.touchEnabled){An={time:new Date().getTime(),point:on.point};var kn=q.touch(on,null,_e)[0];on.featureTarget=kn,Kn.touchstart(on)}},gn.touchmove=function(on){if(_e.options.touchEnabled)return Kn.touchmove(on),gn.touchdrag(on)},gn.touchend=function(on){if(on.originalEvent.preventDefault(),_e.options.touchEnabled){var kn=q.touch(on,null,_e)[0];on.featureTarget=kn,ge(An,{time:new Date().getTime(),point:on.point})?Kn.tap(on):Kn.touchend(on)}};var Zr=function(on){return!(on===8||on===46||on>=48&&on<=57)};function or(on,kn,Rr){Rr===void 0&&(Rr={}),Kn.stop();var xi=cn[on];if(xi===void 0)throw new Error(on+" is not valid");Mn=on;var gi=xi(_e,kn);Kn=n(gi,_e),Rr.silent||_e.map.fire(V.MODE_CHANGE,{mode:on}),_e.store.setDirty(),_e.store.render()}gn.keydown=function(on){(on.srcElement||on.target).classList.contains("mapboxgl-canvas")&&(on.keyCode!==8&&on.keyCode!==46||!_e.options.controls.trash?Zr(on.keyCode)?Kn.keydown(on):on.keyCode===49&&_e.options.controls.point?or(B.DRAW_POINT):on.keyCode===50&&_e.options.controls.line_string?or(B.DRAW_LINE_STRING):on.keyCode===51&&_e.options.controls.polygon&&or(B.DRAW_POLYGON):(on.preventDefault(),Kn.trash()))},gn.keyup=function(on){Zr(on.keyCode)&&Kn.keyup(on)},gn.zoomend=function(){_e.store.changeZoom()},gn.data=function(on){if(on.dataType==="style"){var kn=_e.setup,Rr=_e.map,xi=_e.options,gi=_e.store;xi.styles.some(function(Jo){return Rr.getLayer(Jo.id)})||(kn.addLayers(),gi.setDirty(),gi.render())}};var ai={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Mn=_e.options.defaultMode,Kn=n(cn[Mn](_e),_e)},changeMode:or,actionable:function(on){var kn=!1;Object.keys(on).forEach(function(Rr){if(ai[Rr]===void 0)throw new Error("Invalid action type");ai[Rr]!==on[Rr]&&(kn=!0),ai[Rr]=on[Rr]}),kn&&_e.map.fire(V.ACTIONABLE,{actions:ai})},currentModeName:function(){return Mn},currentModeRender:function(on,kn){return Kn.render(on,kn)},fire:function(on,kn){gn[on]&&gn[on](kn)},addEventListeners:function(){_e.map.on("mousemove",gn.mousemove),_e.map.on("mousedown",gn.mousedown),_e.map.on("mouseup",gn.mouseup),_e.map.on("data",gn.data),_e.map.on("touchmove",gn.touchmove),_e.map.on("touchstart",gn.touchstart),_e.map.on("touchend",gn.touchend),_e.container.addEventListener("mouseout",gn.mouseout),_e.options.keybindings&&(_e.container.addEventListener("keydown",gn.keydown),_e.container.addEventListener("keyup",gn.keyup))},removeEventListeners:function(){_e.map.off("mousemove",gn.mousemove),_e.map.off("mousedown",gn.mousedown),_e.map.off("mouseup",gn.mouseup),_e.map.off("data",gn.data),_e.map.off("touchmove",gn.touchmove),_e.map.off("touchstart",gn.touchstart),_e.map.off("touchend",gn.touchend),_e.container.removeEventListener("mouseout",gn.mouseout),_e.options.keybindings&&(_e.container.removeEventListener("keydown",gn.keydown),_e.container.removeEventListener("keyup",gn.keyup))},trash:function(on){Kn.trash(on)},combineFeatures:function(){Kn.combineFeatures()},uncombineFeatures:function(){Kn.uncombineFeatures()},getMode:function(){return Mn}}}(O),O.ui=function(_e){var cn={},dn=null,An={mode:null,feature:null,mouse:null},gn={mode:null,feature:null,mouse:null};function Mn(on){gn=ne(gn,on)}function Kn(){var on,kn;if(_e.container){var Rr=[],xi=[];ue.forEach(function(gi){gn[gi]!==An[gi]&&(Rr.push(gi+"-"+An[gi]),gn[gi]!==null&&xi.push(gi+"-"+gn[gi]))}),Rr.length>0&&(on=_e.container.classList).remove.apply(on,Rr),xi.length>0&&(kn=_e.container.classList).add.apply(kn,xi),An=ne(An,gn)}}function Zr(on,kn){kn===void 0&&(kn={});var Rr=document.createElement("button");return Rr.className=I.CONTROL_BUTTON+" "+kn.className,Rr.setAttribute("title",kn.title),kn.container.appendChild(Rr),Rr.addEventListener("click",function(xi){if(xi.preventDefault(),xi.stopPropagation(),xi.target===dn)return or(),void kn.onDeactivate();ai(on),kn.onActivate()},!0),Rr}function or(){dn&&(dn.classList.remove(I.ACTIVE_BUTTON),dn=null)}function ai(on){or();var kn=cn[on];kn&&kn&&on!=="trash"&&(kn.classList.add(I.ACTIVE_BUTTON),dn=kn)}return{setActiveButton:ai,queueMapClasses:Mn,updateMapClasses:Kn,clearMapClasses:function(){Mn({mode:null,feature:null,mouse:null}),Kn()},addButtons:function(){var on=_e.options.controls,kn=document.createElement("div");return kn.className=I.CONTROL_GROUP+" "+I.CONTROL_BASE,on&&(on[k.LINE]&&(cn[k.LINE]=Zr(k.LINE,{container:kn,className:I.CONTROL_BUTTON_LINE,title:"LineString tool "+(_e.options.keybindings?"(l)":""),onActivate:function(){return _e.events.changeMode(B.DRAW_LINE_STRING)},onDeactivate:function(){return _e.events.trash()}})),on[k.POLYGON]&&(cn[k.POLYGON]=Zr(k.POLYGON,{container:kn,className:I.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(_e.options.keybindings?"(p)":""),onActivate:function(){return _e.events.changeMode(B.DRAW_POLYGON)},onDeactivate:function(){return _e.events.trash()}})),on[k.POINT]&&(cn[k.POINT]=Zr(k.POINT,{container:kn,className:I.CONTROL_BUTTON_POINT,title:"Marker tool "+(_e.options.keybindings?"(m)":""),onActivate:function(){return _e.events.changeMode(B.DRAW_POINT)},onDeactivate:function(){return _e.events.trash()}})),on.trash&&(cn.trash=Zr("trash",{container:kn,className:I.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){_e.events.trash()}})),on.combine_features&&(cn.combine_features=Zr("combineFeatures",{container:kn,className:I.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){_e.events.combineFeatures()}})),on.uncombine_features&&(cn.uncombine_features=Zr("uncombineFeatures",{container:kn,className:I.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){_e.events.uncombineFeatures()}}))),kn},removeButtons:function(){Object.keys(cn).forEach(function(on){var kn=cn[on];kn.parentNode&&kn.parentNode.removeChild(kn),delete cn[on]})}}}(O),O.container=Zt.getContainer(),O.store=new Pt(O),Y=O.ui.addButtons(),O.options.boxSelect&&(O.boxZoomInitial=Zt.boxZoom.isEnabled(),Zt.boxZoom.disable(),Zt.dragPan.disable(),Zt.dragPan.enable()),Zt.loaded()?$t.connect():(Zt.on("load",$t.connect),At=setInterval(function(){Zt.loaded()&&$t.connect()},16)),O.events.start(),Y},addLayers:function(){O.map.addSource(E.COLD,{data:{type:R.FEATURE_COLLECTION,features:[]},type:"geojson"}),O.map.addSource(E.HOT,{data:{type:R.FEATURE_COLLECTION,features:[]},type:"geojson"}),O.options.styles.forEach(function(Zt){O.map.addLayer(Zt)}),O.store.setDirty(!0),O.store.render()},removeLayers:function(){O.options.styles.forEach(function(Zt){O.map.getLayer(Zt.id)&&O.map.removeLayer(Zt.id)}),O.map.getSource(E.COLD)&&O.map.removeSource(E.COLD),O.map.getSource(E.HOT)&&O.map.removeSource(E.HOT)}};return O.setup=$t,$t}var Me=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function je(O){return function(Y){var At=Y.featureTarget;return!!At&&!!At.properties&&At.properties.meta===O}}function Le(O){return!!O.originalEvent&&!!O.originalEvent.shiftKey&&O.originalEvent.button===0}function Ke(O){return!!O.featureTarget&&!!O.featureTarget.properties&&O.featureTarget.properties.active===G.ACTIVE&&O.featureTarget.properties.meta===j.FEATURE}function bn(O){return!!O.featureTarget&&!!O.featureTarget.properties&&O.featureTarget.properties.active===G.INACTIVE&&O.featureTarget.properties.meta===j.FEATURE}function Cn(O){return O.featureTarget===void 0}function de(O){return!!O.featureTarget&&!!O.featureTarget.properties&&O.featureTarget.properties.meta===j.FEATURE}function ve(O){var Y=O.featureTarget;return!!Y&&!!Y.properties&&Y.properties.meta===j.VERTEX}function Te(O){return!!O.originalEvent&&O.originalEvent.shiftKey===!0}function Ye(O){return O.keyCode===27}function un(O){return O.keyCode===13}var Nn=Object.freeze({__proto__:null,isOfMetaType:je,isShiftMousedown:Le,isActiveFeature:Ke,isInactiveFeature:bn,noTarget:Cn,isFeature:de,isVertex:ve,isShiftDown:Te,isEscapeKey:Ye,isEnterKey:un,isTrue:function(){return!0}}),ae=ht;function ht(O,Y){this.x=O,this.y=Y}ht.prototype={clone:function(){return new ht(this.x,this.y)},add:function(O){return this.clone()._add(O)},sub:function(O){return this.clone()._sub(O)},multByPoint:function(O){return this.clone()._multByPoint(O)},divByPoint:function(O){return this.clone()._divByPoint(O)},mult:function(O){return this.clone()._mult(O)},div:function(O){return this.clone()._div(O)},rotate:function(O){return this.clone()._rotate(O)},rotateAround:function(O,Y){return this.clone()._rotateAround(O,Y)},matMult:function(O){return this.clone()._matMult(O)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(O){return this.x===O.x&&this.y===O.y},dist:function(O){return Math.sqrt(this.distSqr(O))},distSqr:function(O){var Y=O.x-this.x,At=O.y-this.y;return Y*Y+At*At},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(O){return Math.atan2(this.y-O.y,this.x-O.x)},angleWith:function(O){return this.angleWithSep(O.x,O.y)},angleWithSep:function(O,Y){return Math.atan2(this.x*Y-this.y*O,this.x*O+this.y*Y)},_matMult:function(O){var Y=O[0]*this.x+O[1]*this.y,At=O[2]*this.x+O[3]*this.y;return this.x=Y,this.y=At,this},_add:function(O){return this.x+=O.x,this.y+=O.y,this},_sub:function(O){return this.x-=O.x,this.y-=O.y,this},_mult:function(O){return this.x*=O,this.y*=O,this},_div:function(O){return this.x/=O,this.y/=O,this},_multByPoint:function(O){return this.x*=O.x,this.y*=O.y,this},_divByPoint:function(O){return this.x/=O.x,this.y/=O.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var O=this.y;return this.y=this.x,this.x=-O,this},_rotate:function(O){var Y=Math.cos(O),At=Math.sin(O),$t=Y*this.x-At*this.y,Zt=At*this.x+Y*this.y;return this.x=$t,this.y=Zt,this},_rotateAround:function(O,Y){var At=Math.cos(O),$t=Math.sin(O),Zt=Y.x+At*(this.x-Y.x)-$t*(this.y-Y.y),Qt=Y.y+$t*(this.x-Y.x)+At*(this.y-Y.y);return this.x=Zt,this.y=Qt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ht.convert=function(O){return O instanceof ht?O:Array.isArray(O)?new ht(O[0],O[1]):O};var gt=a(ae);function Ct(O,Y){var At=Y.getBoundingClientRect();return new gt(O.clientX-At.left-(Y.clientLeft||0),O.clientY-At.top-(Y.clientTop||0))}function kt(O,Y,At,$t){return{type:R.FEATURE,properties:{meta:j.VERTEX,parent:O,coord_path:At,active:$t?G.ACTIVE:G.INACTIVE},geometry:{type:R.POINT,coordinates:Y}}}function _t(O,Y,At){var $t=Y.geometry.coordinates,Zt=At.geometry.coordinates;if($t[1]>85||$t[1]<nt||Zt[1]>85||Zt[1]<nt)return null;var Qt={lng:($t[0]+Zt[0])/2,lat:($t[1]+Zt[1])/2};return{type:R.FEATURE,properties:{meta:j.MIDPOINT,parent:O,lng:Qt.lng,lat:Qt.lat,coord_path:At.properties.coord_path},geometry:{type:R.POINT,coordinates:[Qt.lng,Qt.lat]}}}function oe(O,Y,At){Y===void 0&&(Y={}),At===void 0&&(At=null);var $t,Zt=O.geometry,Qt=Zt.type,_e=Zt.coordinates,cn=O.properties&&O.properties.id,dn=[];function An(Mn,Kn){var Zr="",or=null;Mn.forEach(function(ai,on){var kn=Kn!=null?Kn+"."+on:String(on),Rr=kt(cn,ai,kn,gn(kn));if(Y.midpoints&&or){var xi=_t(cn,or,Rr);xi&&dn.push(xi)}or=Rr;var gi=JSON.stringify(ai);Zr!==gi&&dn.push(Rr),on===0&&(Zr=gi)})}function gn(Mn){return!!Y.selectedPaths&&Y.selectedPaths.indexOf(Mn)!==-1}return Qt===R.POINT?dn.push(kt(cn,_e,At,gn(At))):Qt===R.POLYGON?_e.forEach(function(Mn,Kn){An(Mn,At!==null?At+"."+Kn:String(Kn))}):Qt===R.LINE_STRING?An(_e,At):Qt.indexOf(R.MULTI_PREFIX)===0&&($t=Qt.replace(R.MULTI_PREFIX,""),_e.forEach(function(Mn,Kn){var Zr={type:R.FEATURE,properties:O.properties,geometry:{type:$t,coordinates:Mn}};dn=dn.concat(oe(Zr,Y,Kn))})),dn}var he={enable:function(O){setTimeout(function(){O.map&&O.map.doubleClickZoom&&O._ctx&&O._ctx.store&&O._ctx.store.getInitialConfigValue&&O._ctx.store.getInitialConfigValue("doubleClickZoom")&&O.map.doubleClickZoom.enable()},0)},disable:function(O){setTimeout(function(){O.map&&O.map.doubleClickZoom&&O.map.doubleClickZoom.disable()},0)}},Kt={exports:{}},Fe=function(O){if(!O||!O.type)return null;var Y=Ve[O.type];if(!Y)return null;if(Y==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:O}]};if(Y==="feature")return{type:"FeatureCollection",features:[O]};if(Y==="featurecollection")return O},Ve={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},we=a(Fe),rn=Object.freeze({__proto__:null,default:function O(Y){switch(Y&&Y.type||null){case"FeatureCollection":return Y.features=Y.features.reduce(function(At,$t){return At.concat(O($t))},[]),Y;case"Feature":return Y.geometry?O(Y.geometry).map(function(At){var $t={type:"Feature",properties:JSON.parse(JSON.stringify(Y.properties)),geometry:At};return Y.id!==void 0&&($t.id=Y.id),$t}):[Y];case"MultiPoint":return Y.coordinates.map(function(At){return{type:"Point",coordinates:At}});case"MultiPolygon":return Y.coordinates.map(function(At){return{type:"Polygon",coordinates:At}});case"MultiLineString":return Y.coordinates.map(function(At){return{type:"LineString",coordinates:At}});case"GeometryCollection":return Y.geometries.map(O).reduce(function(At,$t){return At.concat($t)},[]);case"Point":case"Polygon":case"LineString":return[Y]}}}),Sn=Fe,En=s(rn),ir=function(O){return function Y(At){return Array.isArray(At)&&At.length&&typeof At[0]=="number"?[At]:At.reduce(function($t,Zt){return Array.isArray(Zt)&&Array.isArray(Zt[0])?$t.concat(Y(Zt)):($t.push(Zt),$t)},[])}(O)};En instanceof Function||(En=En.default);var gr={exports:{}},Ue=gr.exports=function(O){return new $n(O)};function $n(O){this.value=O}function Fr(O,Y,At){var $t=[],Zt=[],Qt=!0;return function _e(cn){var dn=At?Yr(cn):cn,An={},gn=!0,Mn={node:dn,node_:cn,path:[].concat($t),parent:Zt[Zt.length-1],parents:Zt,key:$t.slice(-1)[0],isRoot:$t.length===0,level:$t.length,circular:null,update:function(or,ai){Mn.isRoot||(Mn.parent.node[Mn.key]=or),Mn.node=or,ai&&(gn=!1)},delete:function(or){delete Mn.parent.node[Mn.key],or&&(gn=!1)},remove:function(or){zn(Mn.parent.node)?Mn.parent.node.splice(Mn.key,1):delete Mn.parent.node[Mn.key],or&&(gn=!1)},keys:null,before:function(or){An.before=or},after:function(or){An.after=or},pre:function(or){An.pre=or},post:function(or){An.post=or},stop:function(){Qt=!1},block:function(){gn=!1}};if(!Qt)return Mn;function Kn(){if(typeof Mn.node=="object"&&Mn.node!==null){Mn.keys&&Mn.node_===Mn.node||(Mn.keys=Pr(Mn.node)),Mn.isLeaf=Mn.keys.length==0;for(var or=0;or<Zt.length;or++)if(Zt[or].node_===cn){Mn.circular=Zt[or];break}}else Mn.isLeaf=!0,Mn.keys=null;Mn.notLeaf=!Mn.isLeaf,Mn.notRoot=!Mn.isRoot}Kn();var Zr=Y.call(Mn,Mn.node);return Zr!==void 0&&Mn.update&&Mn.update(Zr),An.before&&An.before.call(Mn,Mn.node),gn&&(typeof Mn.node!="object"||Mn.node===null||Mn.circular||(Zt.push(Mn),Kn(),Jn(Mn.keys,function(or,ai){$t.push(or),An.pre&&An.pre.call(Mn,Mn.node[or],or);var on=_e(Mn.node[or]);At&&eo.call(Mn.node,or)&&(Mn.node[or]=on.node),on.isLast=ai==Mn.keys.length-1,on.isFirst=ai==0,An.post&&An.post.call(Mn,on),$t.pop()}),Zt.pop()),An.after&&An.after.call(Mn,Mn.node)),Mn}(O).node}function Yr(O){if(typeof O=="object"&&O!==null){var Y;if(zn(O))Y=[];else if(Ze(O)==="[object Date]")Y=new Date(O.getTime?O.getTime():O);else if(function(Zt){return Ze(Zt)==="[object RegExp]"}(O))Y=new RegExp(O);else if(function(Zt){return Ze(Zt)==="[object Error]"}(O))Y={message:O.message};else if(function(Zt){return Ze(Zt)==="[object Boolean]"}(O))Y=new Boolean(O);else if(function(Zt){return Ze(Zt)==="[object Number]"}(O))Y=new Number(O);else if(function(Zt){return Ze(Zt)==="[object String]"}(O))Y=new String(O);else if(Object.create&&Object.getPrototypeOf)Y=Object.create(Object.getPrototypeOf(O));else if(O.constructor===Object)Y={};else{var At=O.constructor&&O.constructor.prototype||O.__proto__||{},$t=function(){};$t.prototype=At,Y=new $t}return Jn(Pr(O),function(Zt){Y[Zt]=O[Zt]}),Y}return O}$n.prototype.get=function(O){for(var Y=this.value,At=0;At<O.length;At++){var $t=O[At];if(!Y||!eo.call(Y,$t)){Y=void 0;break}Y=Y[$t]}return Y},$n.prototype.has=function(O){for(var Y=this.value,At=0;At<O.length;At++){var $t=O[At];if(!Y||!eo.call(Y,$t))return!1;Y=Y[$t]}return!0},$n.prototype.set=function(O,Y){for(var At=this.value,$t=0;$t<O.length-1;$t++){var Zt=O[$t];eo.call(At,Zt)||(At[Zt]={}),At=At[Zt]}return At[O[$t]]=Y,Y},$n.prototype.map=function(O){return Fr(this.value,O,!0)},$n.prototype.forEach=function(O){return this.value=Fr(this.value,O,!1),this.value},$n.prototype.reduce=function(O,Y){var At=arguments.length===1,$t=At?this.value:Y;return this.forEach(function(Zt){this.isRoot&&At||($t=O.call(this,$t,Zt))}),$t},$n.prototype.paths=function(){var O=[];return this.forEach(function(Y){O.push(this.path)}),O},$n.prototype.nodes=function(){var O=[];return this.forEach(function(Y){O.push(this.node)}),O},$n.prototype.clone=function(){var O=[],Y=[];return function At($t){for(var Zt=0;Zt<O.length;Zt++)if(O[Zt]===$t)return Y[Zt];if(typeof $t=="object"&&$t!==null){var Qt=Yr($t);return O.push($t),Y.push(Qt),Jn(Pr($t),function(_e){Qt[_e]=At($t[_e])}),O.pop(),Y.pop(),Qt}return $t}(this.value)};var Pr=Object.keys||function(O){var Y=[];for(var At in O)Y.push(At);return Y};function Ze(O){return Object.prototype.toString.call(O)}var zn=Array.isArray||function(O){return Object.prototype.toString.call(O)==="[object Array]"},Jn=function(O,Y){if(O.forEach)return O.forEach(Y);for(var At=0;At<O.length;At++)Y(O[At],At,O)};Jn(Pr($n.prototype),function(O){Ue[O]=function(Y){var At=[].slice.call(arguments,1),$t=new $n(Y);return $t[O].apply($t,At)}});var eo=Object.hasOwnProperty||function(O,Y){return Y in O},Po=gr.exports,pi=Xn;function Xn(O){if(!(this instanceof Xn))return new Xn(O);this._bbox=O||[1/0,1/0,-1/0,-1/0],this._valid=!!O}Xn.prototype.include=function(O){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],O[0]),this._bbox[1]=Math.min(this._bbox[1],O[1]),this._bbox[2]=Math.max(this._bbox[2],O[0]),this._bbox[3]=Math.max(this._bbox[3],O[1]),this},Xn.prototype.equals=function(O){var Y;return Y=O instanceof Xn?O.bbox():O,this._bbox[0]==Y[0]&&this._bbox[1]==Y[1]&&this._bbox[2]==Y[2]&&this._bbox[3]==Y[3]},Xn.prototype.center=function(O){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Xn.prototype.union=function(O){var Y;return this._valid=!0,Y=O instanceof Xn?O.bbox():O,this._bbox[0]=Math.min(this._bbox[0],Y[0]),this._bbox[1]=Math.min(this._bbox[1],Y[1]),this._bbox[2]=Math.max(this._bbox[2],Y[2]),this._bbox[3]=Math.max(this._bbox[3],Y[3]),this},Xn.prototype.bbox=function(){return this._valid?this._bbox:null},Xn.prototype.contains=function(O){if(!O)return this._fastContains();if(!this._valid)return null;var Y=O[0],At=O[1];return this._bbox[0]<=Y&&this._bbox[1]<=At&&this._bbox[2]>=Y&&this._bbox[3]>=At},Xn.prototype.intersect=function(O){return this._valid?(Y=O instanceof Xn?O.bbox():O,!(this._bbox[0]>Y[2]||this._bbox[2]<Y[0]||this._bbox[3]<Y[1]||this._bbox[1]>Y[3])):null;var Y},Xn.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var O="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",O)},Xn.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var tu=function(O){if(!O)return[];var Y=En(Sn(O)),At=[];return Y.features.forEach(function($t){$t.geometry&&(At=At.concat(ir($t.geometry.coordinates)))}),At},Pl=Po,Uu=pi,Ms={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Hu=Object.keys(Ms);function Ri(O){for(var Y=Uu(),At=tu(O),$t=0;$t<At.length;$t++)Y.include(At[$t]);return Y}Kt.exports=function(O){return Ri(O).bbox()},Kt.exports.polygon=function(O){return Ri(O).polygon()},Kt.exports.bboxify=function(O){return Pl(O).map(function(Y){Y&&Hu.some(function(At){return!!Y[At]&&Ms[At].indexOf(Y.type)!==-1})&&(Y.bbox=Ri(Y).bbox(),this.update(Y))})};var mi=a(Kt.exports),wi=-90;function kl(O,Y){var At=wi,$t=90,Zt=wi,Qt=90,_e=270,cn=-270;O.forEach(function(An){var gn=mi(An),Mn=gn[1],Kn=gn[3],Zr=gn[0],or=gn[2];Mn>At&&(At=Mn),Kn<$t&&($t=Kn),Kn>Zt&&(Zt=Kn),Mn<Qt&&(Qt=Mn),Zr<_e&&(_e=Zr),or>cn&&(cn=or)});var dn=Y;return At+dn.lat>85&&(dn.lat=85-At),Zt+dn.lat>90&&(dn.lat=90-Zt),$t+dn.lat<-85&&(dn.lat=-85-$t),Qt+dn.lat<wi&&(dn.lat=wi-Qt),_e+dn.lng<=-270&&(dn.lng+=360*Math.ceil(Math.abs(dn.lng)/360)),cn+dn.lng>=270&&(dn.lng-=360*Math.ceil(Math.abs(dn.lng)/360)),dn}function Ac(O,Y){var At=kl(O.map(function($t){return $t.toGeoJSON()}),Y);O.forEach(function($t){var Zt,Qt=$t.getCoordinates(),_e=function(dn){var An={lng:dn[0]+At.lng,lat:dn[1]+At.lat};return[An.lng,An.lat]},cn=function(dn){return dn.map(function(An){return _e(An)})};$t.type===R.POINT?Zt=_e(Qt):$t.type===R.LINE_STRING||$t.type===R.MULTI_POINT?Zt=Qt.map(_e):$t.type===R.POLYGON||$t.type===R.MULTI_LINE_STRING?Zt=Qt.map(cn):$t.type===R.MULTI_POLYGON&&(Zt=Qt.map(function(dn){return dn.map(function(An){return cn(An)})})),$t.incomingCoords(Zt)})}var ri={onSetup:function(O){var Y=this,At={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:O.featureIds||[]};return this.setSelected(At.initiallySelectedFeatureIds.filter(function($t){return Y.getFeature($t)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),At},fireUpdate:function(){this.map.fire(V.UPDATE,{action:F.MOVE,features:this.getSelected().map(function(O){return O.toGeoJSON()})})},fireActionable:function(){var O=this,Y=this.getSelected(),At=Y.filter(function(cn){return O.isInstanceOf("MultiFeature",cn)}),$t=!1;if(Y.length>1){$t=!0;var Zt=Y[0].type.replace("Multi","");Y.forEach(function(cn){cn.type.replace("Multi","")!==Zt&&($t=!1)})}var Qt=At.length>0,_e=Y.length>0;this.setActionableState({combineFeatures:$t,uncombineFeatures:Qt,trash:_e})},getUniqueIds:function(O){return O.length?O.map(function(Y){return Y.properties.id}).filter(function(Y){return Y!==void 0}).reduce(function(Y,At){return Y.add(At),Y},new rt).values():[]},stopExtendedInteractions:function(O){O.boxSelectElement&&(O.boxSelectElement.parentNode&&O.boxSelectElement.parentNode.removeChild(O.boxSelectElement),O.boxSelectElement=null),this.map.dragPan.enable(),O.boxSelecting=!1,O.canBoxSelect=!1,O.dragMoving=!1,O.canDragMove=!1},onStop:function(){he.enable(this)},onMouseMove:function(O,Y){return de(Y)&&O.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(O),!0},onMouseOut:function(O){return!O.dragMoving||this.fireUpdate()}};ri.onTap=ri.onClick=function(O,Y){return Cn(Y)?this.clickAnywhere(O,Y):je(j.VERTEX)(Y)?this.clickOnVertex(O,Y):de(Y)?this.clickOnFeature(O,Y):void 0},ri.clickAnywhere=function(O){var Y=this,At=this.getSelectedIds();At.length&&(this.clearSelectedFeatures(),At.forEach(function($t){return Y.doRender($t)})),he.enable(this),this.stopExtendedInteractions(O)},ri.clickOnVertex=function(O,Y){this.changeMode(B.DIRECT_SELECT,{featureId:Y.featureTarget.properties.parent,coordPath:Y.featureTarget.properties.coord_path,startPos:Y.lngLat}),this.updateUIClasses({mouse:S.MOVE})},ri.startOnActiveFeature=function(O,Y){this.stopExtendedInteractions(O),this.map.dragPan.disable(),this.doRender(Y.featureTarget.properties.id),O.canDragMove=!0,O.dragMoveLocation=Y.lngLat},ri.clickOnFeature=function(O,Y){var At=this;he.disable(this),this.stopExtendedInteractions(O);var $t=Te(Y),Zt=this.getSelectedIds(),Qt=Y.featureTarget.properties.id,_e=this.isSelected(Qt);if(!$t&&_e&&this.getFeature(Qt).type!==R.POINT)return this.changeMode(B.DIRECT_SELECT,{featureId:Qt});_e&&$t?(this.deselect(Qt),this.updateUIClasses({mouse:S.POINTER}),Zt.length===1&&he.enable(this)):!_e&&$t?(this.select(Qt),this.updateUIClasses({mouse:S.MOVE})):_e||$t||(Zt.forEach(function(cn){return At.doRender(cn)}),this.setSelected(Qt),this.updateUIClasses({mouse:S.MOVE})),this.doRender(Qt)},ri.onMouseDown=function(O,Y){return Ke(Y)?this.startOnActiveFeature(O,Y):this.drawConfig.boxSelect&&Le(Y)?this.startBoxSelect(O,Y):void 0},ri.startBoxSelect=function(O,Y){this.stopExtendedInteractions(O),this.map.dragPan.disable(),O.boxSelectStartLocation=Ct(Y.originalEvent,this.map.getContainer()),O.canBoxSelect=!0},ri.onTouchStart=function(O,Y){if(Ke(Y))return this.startOnActiveFeature(O,Y)},ri.onDrag=function(O,Y){return O.canDragMove?this.dragMove(O,Y):this.drawConfig.boxSelect&&O.canBoxSelect?this.whileBoxSelect(O,Y):void 0},ri.whileBoxSelect=function(O,Y){O.boxSelecting=!0,this.updateUIClasses({mouse:S.ADD}),O.boxSelectElement||(O.boxSelectElement=document.createElement("div"),O.boxSelectElement.classList.add(I.BOX_SELECT),this.map.getContainer().appendChild(O.boxSelectElement));var At=Ct(Y.originalEvent,this.map.getContainer()),$t=Math.min(O.boxSelectStartLocation.x,At.x),Zt=Math.max(O.boxSelectStartLocation.x,At.x),Qt=Math.min(O.boxSelectStartLocation.y,At.y),_e=Math.max(O.boxSelectStartLocation.y,At.y),cn="translate("+$t+"px, "+Qt+"px)";O.boxSelectElement.style.transform=cn,O.boxSelectElement.style.WebkitTransform=cn,O.boxSelectElement.style.width=Zt-$t+"px",O.boxSelectElement.style.height=_e-Qt+"px"},ri.dragMove=function(O,Y){O.dragMoving=!0,Y.originalEvent.stopPropagation();var At={lng:Y.lngLat.lng-O.dragMoveLocation.lng,lat:Y.lngLat.lat-O.dragMoveLocation.lat};Ac(this.getSelected(),At),O.dragMoveLocation=Y.lngLat},ri.onTouchEnd=ri.onMouseUp=function(O,Y){var At=this;if(O.dragMoving)this.fireUpdate();else if(O.boxSelecting){var $t=[O.boxSelectStartLocation,Ct(Y.originalEvent,this.map.getContainer())],Zt=this.featuresAt(null,$t,"click"),Qt=this.getUniqueIds(Zt).filter(function(_e){return!At.isSelected(_e)});Qt.length&&(this.select(Qt),Qt.forEach(function(_e){return At.doRender(_e)}),this.updateUIClasses({mouse:S.MOVE}))}this.stopExtendedInteractions(O)},ri.toDisplayFeatures=function(O,Y,At){Y.properties.active=this.isSelected(Y.properties.id)?G.ACTIVE:G.INACTIVE,At(Y),this.fireActionable(),Y.properties.active===G.ACTIVE&&Y.geometry.type!==R.POINT&&oe(Y).forEach(At)},ri.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},ri.onCombineFeatures=function(){var O=this.getSelected();if(!(O.length===0||O.length<2)){for(var Y=[],At=[],$t=O[0].type.replace("Multi",""),Zt=0;Zt<O.length;Zt++){var Qt=O[Zt];if(Qt.type.replace("Multi","")!==$t)return;Qt.type.includes("Multi")?Qt.getCoordinates().forEach(function(cn){Y.push(cn)}):Y.push(Qt.getCoordinates()),At.push(Qt.toGeoJSON())}if(At.length>1){var _e=this.newFeature({type:R.FEATURE,properties:At[0].properties,geometry:{type:"Multi"+$t,coordinates:Y}});this.addFeature(_e),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([_e.id]),this.map.fire(V.COMBINE_FEATURES,{createdFeatures:[_e.toGeoJSON()],deletedFeatures:At})}this.fireActionable()}},ri.onUncombineFeatures=function(){var O=this,Y=this.getSelected();if(Y.length!==0){for(var At=[],$t=[],Zt=function(_e){var cn=Y[_e];O.isInstanceOf("MultiFeature",cn)&&(cn.getFeatures().forEach(function(dn){O.addFeature(dn),dn.properties=cn.properties,At.push(dn.toGeoJSON()),O.select([dn.id])}),O.deleteFeature(cn.id,{silent:!0}),$t.push(cn.toGeoJSON()))},Qt=0;Qt<Y.length;Qt++)Zt(Qt);At.length>1&&this.map.fire(V.UNCOMBINE_FEATURES,{createdFeatures:At,deletedFeatures:$t}),this.fireActionable()}};var Ss=je(j.VERTEX),$u=je(j.MIDPOINT),us={fireUpdate:function(){this.map.fire(V.UPDATE,{action:F.CHANGE_COORDINATES,features:this.getSelected().map(function(O){return O.toGeoJSON()})})},fireActionable:function(O){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:O.selectedCoordPaths.length>0})},startDragging:function(O,Y){this.map.dragPan.disable(),O.canDragMove=!0,O.dragMoveLocation=Y.lngLat},stopDragging:function(O){this.map.dragPan.enable(),O.dragMoving=!1,O.canDragMove=!1,O.dragMoveLocation=null},onVertex:function(O,Y){this.startDragging(O,Y);var At=Y.featureTarget.properties,$t=O.selectedCoordPaths.indexOf(At.coord_path);Te(Y)||$t!==-1?Te(Y)&&$t===-1&&O.selectedCoordPaths.push(At.coord_path):O.selectedCoordPaths=[At.coord_path];var Zt=this.pathsToCoordinates(O.featureId,O.selectedCoordPaths);this.setSelectedCoordinates(Zt)},onMidpoint:function(O,Y){this.startDragging(O,Y);var At=Y.featureTarget.properties;O.feature.addCoordinate(At.coord_path,At.lng,At.lat),this.fireUpdate(),O.selectedCoordPaths=[At.coord_path]},pathsToCoordinates:function(O,Y){return Y.map(function(At){return{feature_id:O,coord_path:At}})},onFeature:function(O,Y){O.selectedCoordPaths.length===0?this.startDragging(O,Y):this.stopDragging(O)},dragFeature:function(O,Y,At){Ac(this.getSelected(),At),O.dragMoveLocation=Y.lngLat},dragVertex:function(O,Y,At){for(var $t=O.selectedCoordPaths.map(function(cn){return O.feature.getCoordinate(cn)}),Zt=kl($t.map(function(cn){return{type:R.FEATURE,properties:{},geometry:{type:R.POINT,coordinates:cn}}}),At),Qt=0;Qt<$t.length;Qt++){var _e=$t[Qt];O.feature.updateCoordinate(O.selectedCoordPaths[Qt],_e[0]+Zt.lng,_e[1]+Zt.lat)}},clickNoTarget:function(){this.changeMode(B.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(B.SIMPLE_SELECT)},clickActiveFeature:function(O){O.selectedCoordPaths=[],this.clearSelectedCoordinates(),O.feature.changed()},onSetup:function(O){var Y=O.featureId,At=this.getFeature(Y);if(!At)throw new Error("You must provide a featureId to enter direct_select mode");if(At.type===R.POINT)throw new TypeError("direct_select mode doesn't handle point features");var $t={featureId:Y,feature:At,dragMoveLocation:O.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:O.coordPath?[O.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(Y,$t.selectedCoordPaths)),this.setSelected(Y),he.disable(this),this.setActionableState({trash:!0}),$t},onStop:function(){he.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(O,Y,At){O.featureId===Y.properties.id?(Y.properties.active=G.ACTIVE,At(Y),oe(Y,{map:this.map,midpoints:!0,selectedPaths:O.selectedCoordPaths}).forEach(At)):(Y.properties.active=G.INACTIVE,At(Y)),this.fireActionable(O)},onTrash:function(O){O.selectedCoordPaths.sort(function(Y,At){return At.localeCompare(Y,"en",{numeric:!0})}).forEach(function(Y){return O.feature.removeCoordinate(Y)}),this.fireUpdate(),O.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(O),O.feature.isValid()===!1&&(this.deleteFeature([O.featureId]),this.changeMode(B.SIMPLE_SELECT,{}))},onMouseMove:function(O,Y){var At=Ke(Y),$t=Ss(Y),Zt=$u(Y),Qt=O.selectedCoordPaths.length===0;return At&&Qt||$t&&!Qt?this.updateUIClasses({mouse:S.MOVE}):this.updateUIClasses({mouse:S.NONE}),($t||At||Zt)&&O.dragMoving&&this.fireUpdate(),this.stopDragging(O),!0},onMouseOut:function(O){return O.dragMoving&&this.fireUpdate(),!0}};us.onTouchStart=us.onMouseDown=function(O,Y){return Ss(Y)?this.onVertex(O,Y):Ke(Y)?this.onFeature(O,Y):$u(Y)?this.onMidpoint(O,Y):void 0},us.onDrag=function(O,Y){if(O.canDragMove===!0){O.dragMoving=!0,Y.originalEvent.stopPropagation();var At={lng:Y.lngLat.lng-O.dragMoveLocation.lng,lat:Y.lngLat.lat-O.dragMoveLocation.lat};O.selectedCoordPaths.length>0?this.dragVertex(O,Y,At):this.dragFeature(O,Y,At),O.dragMoveLocation=Y.lngLat}},us.onClick=function(O,Y){return Cn(Y)?this.clickNoTarget(O,Y):Ke(Y)?this.clickActiveFeature(O,Y):bn(Y)?this.clickInactive(O,Y):void this.stopDragging(O)},us.onTap=function(O,Y){return Cn(Y)?this.clickNoTarget(O,Y):Ke(Y)?this.clickActiveFeature(O,Y):bn(Y)?this.clickInactive(O,Y):void 0},us.onTouchEnd=us.onMouseUp=function(O){O.dragMoving&&this.fireUpdate(),this.stopDragging(O)};var Ma={};function Es(O,Y){return!!O.lngLat&&O.lngLat.lng===Y[0]&&O.lngLat.lat===Y[1]}Ma.onSetup=function(){var O=this.newFeature({type:R.FEATURE,properties:{},geometry:{type:R.POINT,coordinates:[]}});return this.addFeature(O),this.clearSelectedFeatures(),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(k.POINT),this.setActionableState({trash:!0}),{point:O}},Ma.stopDrawingAndRemove=function(O){this.deleteFeature([O.point.id],{silent:!0}),this.changeMode(B.SIMPLE_SELECT)},Ma.onTap=Ma.onClick=function(O,Y){this.updateUIClasses({mouse:S.MOVE}),O.point.updateCoordinate("",Y.lngLat.lng,Y.lngLat.lat),this.map.fire(V.CREATE,{features:[O.point.toGeoJSON()]}),this.changeMode(B.SIMPLE_SELECT,{featureIds:[O.point.id]})},Ma.onStop=function(O){this.activateUIButton(),O.point.getCoordinate().length||this.deleteFeature([O.point.id],{silent:!0})},Ma.toDisplayFeatures=function(O,Y,At){var $t=Y.properties.id===O.point.id;if(Y.properties.active=$t?G.ACTIVE:G.INACTIVE,!$t)return At(Y)},Ma.onTrash=Ma.stopDrawingAndRemove,Ma.onKeyUp=function(O,Y){if(Ye(Y)||un(Y))return this.stopDrawingAndRemove(O,Y)};var Ts={onSetup:function(){var O=this.newFeature({type:R.FEATURE,properties:{},geometry:{type:R.POLYGON,coordinates:[[]]}});return this.addFeature(O),this.clearSelectedFeatures(),he.disable(this),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(k.POLYGON),this.setActionableState({trash:!0}),{polygon:O,currentVertexPosition:0}},clickAnywhere:function(O,Y){if(O.currentVertexPosition>0&&Es(Y,O.polygon.coordinates[0][O.currentVertexPosition-1]))return this.changeMode(B.SIMPLE_SELECT,{featureIds:[O.polygon.id]});this.updateUIClasses({mouse:S.ADD}),O.polygon.updateCoordinate("0."+O.currentVertexPosition,Y.lngLat.lng,Y.lngLat.lat),O.currentVertexPosition++,O.polygon.updateCoordinate("0."+O.currentVertexPosition,Y.lngLat.lng,Y.lngLat.lat)},clickOnVertex:function(O){return this.changeMode(B.SIMPLE_SELECT,{featureIds:[O.polygon.id]})},onMouseMove:function(O,Y){O.polygon.updateCoordinate("0."+O.currentVertexPosition,Y.lngLat.lng,Y.lngLat.lat),ve(Y)&&this.updateUIClasses({mouse:S.POINTER})}};Ts.onTap=Ts.onClick=function(O,Y){return ve(Y)?this.clickOnVertex(O,Y):this.clickAnywhere(O,Y)},Ts.onKeyUp=function(O,Y){Ye(Y)?(this.deleteFeature([O.polygon.id],{silent:!0}),this.changeMode(B.SIMPLE_SELECT)):un(Y)&&this.changeMode(B.SIMPLE_SELECT,{featureIds:[O.polygon.id]})},Ts.onStop=function(O){this.updateUIClasses({mouse:S.NONE}),he.enable(this),this.activateUIButton(),this.getFeature(O.polygon.id)!==void 0&&(O.polygon.removeCoordinate("0."+O.currentVertexPosition),O.polygon.isValid()?this.map.fire(V.CREATE,{features:[O.polygon.toGeoJSON()]}):(this.deleteFeature([O.polygon.id],{silent:!0}),this.changeMode(B.SIMPLE_SELECT,{},{silent:!0})))},Ts.toDisplayFeatures=function(O,Y,At){var $t=Y.properties.id===O.polygon.id;if(Y.properties.active=$t?G.ACTIVE:G.INACTIVE,!$t)return At(Y);if(Y.geometry.coordinates.length!==0){var Zt=Y.geometry.coordinates[0].length;if(!(Zt<3)){if(Y.properties.meta=j.FEATURE,At(kt(O.polygon.id,Y.geometry.coordinates[0][0],"0.0",!1)),Zt>3){var Qt=Y.geometry.coordinates[0].length-3;At(kt(O.polygon.id,Y.geometry.coordinates[0][Qt],"0."+Qt,!1))}if(Zt<=4){var _e=[[Y.geometry.coordinates[0][0][0],Y.geometry.coordinates[0][0][1]],[Y.geometry.coordinates[0][1][0],Y.geometry.coordinates[0][1][1]]];if(At({type:R.FEATURE,properties:Y.properties,geometry:{coordinates:_e,type:R.LINE_STRING}}),Zt===3)return}return At(Y)}}},Ts.onTrash=function(O){this.deleteFeature([O.polygon.id],{silent:!0}),this.changeMode(B.SIMPLE_SELECT)};var Ll={onSetup:function(O){var Y,At,$t=(O=O||{}).featureId,Zt="forward";if($t){if(!(Y=this.getFeature($t)))throw new Error("Could not find a feature with the provided featureId");var Qt=O.from;if(Qt&&Qt.type==="Feature"&&Qt.geometry&&Qt.geometry.type==="Point"&&(Qt=Qt.geometry),Qt&&Qt.type==="Point"&&Qt.coordinates&&Qt.coordinates.length===2&&(Qt=Qt.coordinates),!Qt||!Array.isArray(Qt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var _e=Y.coordinates.length-1;if(Y.coordinates[_e][0]===Qt[0]&&Y.coordinates[_e][1]===Qt[1])At=_e+1,Y.addCoordinate.apply(Y,[At].concat(Y.coordinates[_e]));else{if(Y.coordinates[0][0]!==Qt[0]||Y.coordinates[0][1]!==Qt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");Zt="backwards",At=0,Y.addCoordinate.apply(Y,[At].concat(Y.coordinates[0]))}}else Y=this.newFeature({type:R.FEATURE,properties:{},geometry:{type:R.LINE_STRING,coordinates:[]}}),At=0,this.addFeature(Y);return this.clearSelectedFeatures(),he.disable(this),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(k.LINE),this.setActionableState({trash:!0}),{line:Y,currentVertexPosition:At,direction:Zt}},clickAnywhere:function(O,Y){if(O.currentVertexPosition>0&&Es(Y,O.line.coordinates[O.currentVertexPosition-1])||O.direction==="backwards"&&Es(Y,O.line.coordinates[O.currentVertexPosition+1]))return this.changeMode(B.SIMPLE_SELECT,{featureIds:[O.line.id]});this.updateUIClasses({mouse:S.ADD}),O.line.updateCoordinate(O.currentVertexPosition,Y.lngLat.lng,Y.lngLat.lat),O.direction==="forward"?(O.currentVertexPosition++,O.line.updateCoordinate(O.currentVertexPosition,Y.lngLat.lng,Y.lngLat.lat)):O.line.addCoordinate(0,Y.lngLat.lng,Y.lngLat.lat)},clickOnVertex:function(O){return this.changeMode(B.SIMPLE_SELECT,{featureIds:[O.line.id]})},onMouseMove:function(O,Y){O.line.updateCoordinate(O.currentVertexPosition,Y.lngLat.lng,Y.lngLat.lat),ve(Y)&&this.updateUIClasses({mouse:S.POINTER})}};Ll.onTap=Ll.onClick=function(O,Y){if(ve(Y))return this.clickOnVertex(O,Y);this.clickAnywhere(O,Y)},Ll.onKeyUp=function(O,Y){un(Y)?this.changeMode(B.SIMPLE_SELECT,{featureIds:[O.line.id]}):Ye(Y)&&(this.deleteFeature([O.line.id],{silent:!0}),this.changeMode(B.SIMPLE_SELECT))},Ll.onStop=function(O){he.enable(this),this.activateUIButton(),this.getFeature(O.line.id)!==void 0&&(O.line.removeCoordinate(""+O.currentVertexPosition),O.line.isValid()?this.map.fire(V.CREATE,{features:[O.line.toGeoJSON()]}):(this.deleteFeature([O.line.id],{silent:!0}),this.changeMode(B.SIMPLE_SELECT,{},{silent:!0})))},Ll.onTrash=function(O){this.deleteFeature([O.line.id],{silent:!0}),this.changeMode(B.SIMPLE_SELECT)},Ll.toDisplayFeatures=function(O,Y,At){var $t=Y.properties.id===O.line.id;if(Y.properties.active=$t?G.ACTIVE:G.INACTIVE,!$t)return At(Y);Y.geometry.coordinates.length<2||(Y.properties.meta=j.FEATURE,At(kt(O.line.id,Y.geometry.coordinates[O.direction==="forward"?Y.geometry.coordinates.length-2:1],""+(O.direction==="forward"?Y.geometry.coordinates.length-2:1),!1)),At(Y))};var Sh={simple_select:ri,direct_select:us,draw_point:Ma,draw_polygon:Ts,draw_line_string:Ll},wd={defaultMode:B.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Me,modes:Sh,controls:{},userProperties:!1},Eh={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Gu={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Zu(O,Y){return O.map(function(At){return At.source?At:ne(At,{id:At.id+"."+Y,source:Y==="hot"?E.HOT:E.COLD})})}var wc={exports:{}};(function(O,Y){var At="__lodash_hash_undefined__",$t=9007199254740991,Zt="[object Arguments]",Qt="[object Array]",_e="[object Boolean]",cn="[object Date]",dn="[object Error]",An="[object Function]",gn="[object Map]",Mn="[object Number]",Kn="[object Object]",Zr="[object Promise]",or="[object RegExp]",ai="[object Set]",on="[object String]",kn="[object Symbol]",Rr="[object WeakMap]",xi="[object ArrayBuffer]",gi="[object DataView]",Jo=/^\[object .+?Constructor\]$/,nu=/^(?:0|[1-9]\d*)$/,ur={};ur["[object Float32Array]"]=ur["[object Float64Array]"]=ur["[object Int8Array]"]=ur["[object Int16Array]"]=ur["[object Int32Array]"]=ur["[object Uint8Array]"]=ur["[object Uint8ClampedArray]"]=ur["[object Uint16Array]"]=ur["[object Uint32Array]"]=!0,ur[Zt]=ur[Qt]=ur[xi]=ur[_e]=ur[gi]=ur[cn]=ur[dn]=ur[An]=ur[gn]=ur[Mn]=ur[Kn]=ur[or]=ur[ai]=ur[on]=ur[Rr]=!1;var Wu=typeof ho=="object"&&ho&&ho.Object===Object&&ho,Wr=typeof self=="object"&&self&&self.Object===Object&&self,Fn=Wu||Wr||Function("return this")(),Xr=Y&&!Y.nodeType&&Y,Dr=Xr&&O&&!O.nodeType&&O,Cc=Dr&&Dr.exports===Xr,ca=Cc&&Wu.process,Ol=function(){try{return ca&&ca.binding&&ca.binding("util")}catch{}}(),ru=Ol&&Ol.isTypedArray;function qu(Ae,qe){for(var Dn=-1,sr=Ae==null?0:Ae.length;++Dn<sr;)if(qe(Ae[Dn],Dn,Ae))return!0;return!1}function zl(Ae){var qe=-1,Dn=Array(Ae.size);return Ae.forEach(function(sr,yi){Dn[++qe]=[yi,sr]}),Dn}function iu(Ae){var qe=-1,Dn=Array(Ae.size);return Ae.forEach(function(sr){Dn[++qe]=sr}),Dn}var Fi,ou,Ha,Fl=Array.prototype,no=Function.prototype,ro=Object.prototype,_o=Fn["__core-js_shared__"],nl=no.toString,Br=ro.hasOwnProperty,Bl=(Fi=/[^.]+$/.exec(_o&&_o.keys&&_o.keys.IE_PROTO||""))?"Symbol(src)_1."+Fi:"",Ic=ro.toString,Ku=RegExp("^"+nl.call(Br).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xi=Cc?Fn.Buffer:void 0,Nl=Fn.Symbol,Ho=Fn.Uint8Array,Cd=ro.propertyIsEnumerable,au=Fl.splice,bo=Nl?Nl.toStringTag:void 0,$o=Object.getOwnPropertySymbols,jl=Xi?Xi.isBuffer:void 0,ii=(ou=Object.keys,Ha=Object,function(Ae){return ou(Ha(Ae))}),ua=Hl(Fn,"DataView"),$a=Hl(Fn,"Map"),su=Hl(Fn,"Promise"),ta=Hl(Fn,"Set"),Ph=Hl(Fn,"WeakMap"),Vl=Hl(Object,"create"),rl=fs(ua),Mc=fs($a),lu=fs(su),hs=fs(ta),Nf=fs(Ph),ks=Nl?Nl.prototype:void 0,Yu=ks?ks.valueOf:void 0;function ds(Ae){var qe=-1,Dn=Ae==null?0:Ae.length;for(this.clear();++qe<Dn;){var sr=Ae[qe];this.set(sr[0],sr[1])}}function Ga(Ae){var qe=-1,Dn=Ae==null?0:Ae.length;for(this.clear();++qe<Dn;){var sr=Ae[qe];this.set(sr[0],sr[1])}}function Ls(Ae){var qe=-1,Dn=Ae==null?0:Ae.length;for(this.clear();++qe<Dn;){var sr=Ae[qe];this.set(sr[0],sr[1])}}function Sc(Ae){var qe=-1,Dn=Ae==null?0:Ae.length;for(this.__data__=new Ls;++qe<Dn;)this.add(Ae[qe])}function Sa(Ae){var qe=this.__data__=new Ga(Ae);this.size=qe.size}function cu(Ae,qe){var Dn=ha(Ae),sr=!Dn&&Pc(Ae),yi=!Dn&&!sr&&da(Ae),Hr=!Dn&&!sr&&!yi&&_r(Ae),si=Dn||sr||yi||Hr,me=si?function(Tn,rr){for(var br=-1,xr=Array(Tn);++br<Tn;)xr[br]=rr(br);return xr}(Ae.length,String):[],We=me.length;for(var ze in Ae)!Br.call(Ae,ze)||si&&(ze=="length"||yi&&(ze=="offset"||ze=="parent")||Hr&&(ze=="buffer"||ze=="byteLength"||ze=="byteOffset")||ol(ze,We))||me.push(ze);return me}function Ec(Ae,qe){for(var Dn=Ae.length;Dn--;)if(Lh(Ae[Dn][0],qe))return Dn;return-1}function Ul(Ae){return Ae==null?Ae===void 0?"[object Undefined]":"[object Null]":bo&&bo in Object(Ae)?function(qe){var Dn=Br.call(qe,bo),sr=qe[bo];try{qe[bo]=void 0;var yi=!0}catch{}var Hr=Ic.call(qe);return yi&&(Dn?qe[bo]=sr:delete qe[bo]),Hr}(Ae):function(qe){return Ic.call(qe)}(Ae)}function Zi(Ae){return Gl(Ae)&&Ul(Ae)==Zt}function uu(Ae,qe,Dn,sr,yi){return Ae===qe||(Ae==null||qe==null||!Gl(Ae)&&!Gl(qe)?Ae!=Ae&&qe!=qe:function(Hr,si,me,We,ze,Tn){var rr=ha(Hr),br=ha(si),xr=rr?Qt:Rs(Hr),$r=br?Qt:Rs(si),Ds=(xr=xr==Zt?Kn:xr)==Kn,kc=($r=$r==Zt?Kn:$r)==Kn,Di=xr==$r;if(Di&&da(Hr)){if(!da(si))return!1;rr=!0,Ds=!1}if(Di&&!Ds)return Tn||(Tn=new Sa),rr||_r(Hr)?kh(Hr,si,me,We,ze,Tn):function(Jr,tr,Os,ms,al,vr,Ea){switch(Os){case gi:if(Jr.byteLength!=tr.byteLength||Jr.byteOffset!=tr.byteOffset)return!1;Jr=Jr.buffer,tr=tr.buffer;case xi:return!(Jr.byteLength!=tr.byteLength||!vr(new Ho(Jr),new Ho(tr)));case _e:case cn:case Mn:return Lh(+Jr,+tr);case dn:return Jr.name==tr.name&&Jr.message==tr.message;case or:case on:return Jr==tr+"";case gn:var sl=zl;case ai:var Wa=1&ms;if(sl||(sl=iu),Jr.size!=tr.size&&!Wa)return!1;var Go=Ea.get(Jr);if(Go)return Go==tr;ms|=2,Ea.set(Jr,tr);var zs=kh(sl(Jr),sl(tr),ms,al,vr,Ea);return Ea.delete(Jr),zs;case kn:if(Yu)return Yu.call(Jr)==Yu.call(tr)}return!1}(Hr,si,xr,me,We,ze,Tn);if(!(1&me)){var Za=Ds&&Br.call(Hr,"__wrapped__"),fu=kc&&Br.call(si,"__wrapped__");if(Za||fu){var ps=Za?Hr.value():Hr,Zl=fu?si.value():si;return Tn||(Tn=new Sa),ze(ps,Zl,me,We,Tn)}}return Di?(Tn||(Tn=new Sa),function(Jr,tr,Os,ms,al,vr){var Ea=1&Os,sl=hu(Jr),Wa=sl.length,Go=hu(tr).length;if(Wa!=Go&&!Ea)return!1;for(var zs=Wa;zs--;){var ll=sl[zs];if(!(Ea?ll in tr:Br.call(tr,ll)))return!1}var Wl=vr.get(Jr);if(Wl&&vr.get(tr))return Wl==tr;var pu=!0;vr.set(Jr,tr),vr.set(tr,Jr);for(var Lc=Ea;++zs<Wa;){var pa=Jr[ll=sl[zs]],Fs=tr[ll];if(ms)var cl=Ea?ms(Fs,pa,ll,tr,Jr,vr):ms(pa,Fs,ll,Jr,tr,vr);if(!(cl===void 0?pa===Fs||al(pa,Fs,Os,ms,vr):cl)){pu=!1;break}Lc||(Lc=ll=="constructor")}if(pu&&!Lc){var Ta=Jr.constructor,ul=tr.constructor;Ta==ul||!("constructor"in Jr)||!("constructor"in tr)||typeof Ta=="function"&&Ta instanceof Ta&&typeof ul=="function"&&ul instanceof ul||(pu=!1)}return vr.delete(Jr),vr.delete(tr),pu}(Hr,si,me,We,ze,Tn)):!1}(Ae,qe,Dn,sr,uu,yi))}function il(Ae){return!(!Rh(Ae)||function(qe){return!!Bl&&Bl in qe}(Ae))&&($l(Ae)?Ku:Jo).test(fs(Ae))}function Tc(Ae){if(Dn=(qe=Ae)&&qe.constructor,sr=typeof Dn=="function"&&Dn.prototype||ro,qe!==sr)return ii(Ae);var qe,Dn,sr,yi=[];for(var Hr in Object(Ae))Br.call(Ae,Hr)&&Hr!="constructor"&&yi.push(Hr);return yi}function kh(Ae,qe,Dn,sr,yi,Hr){var si=1&Dn,me=Ae.length,We=qe.length;if(me!=We&&!(si&&We>me))return!1;var ze=Hr.get(Ae);if(ze&&Hr.get(qe))return ze==qe;var Tn=-1,rr=!0,br=2&Dn?new Sc:void 0;for(Hr.set(Ae,qe),Hr.set(qe,Ae);++Tn<me;){var xr=Ae[Tn],$r=qe[Tn];if(sr)var Ds=si?sr($r,xr,Tn,qe,Ae,Hr):sr(xr,$r,Tn,Ae,qe,Hr);if(Ds!==void 0){if(Ds)continue;rr=!1;break}if(br){if(!qu(qe,function(kc,Di){if(Za=Di,!br.has(Za)&&(xr===kc||yi(xr,kc,Dn,sr,Hr)))return br.push(Di);var Za})){rr=!1;break}}else if(xr!==$r&&!yi(xr,$r,Dn,sr,Hr)){rr=!1;break}}return Hr.delete(Ae),Hr.delete(qe),rr}function hu(Ae){return function(qe,Dn,sr){var yi=Dn(qe);return ha(qe)?yi:function(Hr,si){for(var me=-1,We=si.length,ze=Hr.length;++me<We;)Hr[ze+me]=si[me];return Hr}(yi,sr(qe))}(Ae,fa,Id)}function du(Ae,qe){var Dn,sr,yi=Ae.__data__;return((sr=typeof(Dn=qe))=="string"||sr=="number"||sr=="symbol"||sr=="boolean"?Dn!=="__proto__":Dn===null)?yi[typeof qe=="string"?"string":"hash"]:yi.map}function Hl(Ae,qe){var Dn=function(sr,yi){return sr==null?void 0:sr[yi]}(Ae,qe);return il(Dn)?Dn:void 0}ds.prototype.clear=function(){this.__data__=Vl?Vl(null):{},this.size=0},ds.prototype.delete=function(Ae){var qe=this.has(Ae)&&delete this.__data__[Ae];return this.size-=qe?1:0,qe},ds.prototype.get=function(Ae){var qe=this.__data__;if(Vl){var Dn=qe[Ae];return Dn===At?void 0:Dn}return Br.call(qe,Ae)?qe[Ae]:void 0},ds.prototype.has=function(Ae){var qe=this.__data__;return Vl?qe[Ae]!==void 0:Br.call(qe,Ae)},ds.prototype.set=function(Ae,qe){var Dn=this.__data__;return this.size+=this.has(Ae)?0:1,Dn[Ae]=Vl&&qe===void 0?At:qe,this},Ga.prototype.clear=function(){this.__data__=[],this.size=0},Ga.prototype.delete=function(Ae){var qe=this.__data__,Dn=Ec(qe,Ae);return!(Dn<0)&&(Dn==qe.length-1?qe.pop():au.call(qe,Dn,1),--this.size,!0)},Ga.prototype.get=function(Ae){var qe=this.__data__,Dn=Ec(qe,Ae);return Dn<0?void 0:qe[Dn][1]},Ga.prototype.has=function(Ae){return Ec(this.__data__,Ae)>-1},Ga.prototype.set=function(Ae,qe){var Dn=this.__data__,sr=Ec(Dn,Ae);return sr<0?(++this.size,Dn.push([Ae,qe])):Dn[sr][1]=qe,this},Ls.prototype.clear=function(){this.size=0,this.__data__={hash:new ds,map:new($a||Ga),string:new ds}},Ls.prototype.delete=function(Ae){var qe=du(this,Ae).delete(Ae);return this.size-=qe?1:0,qe},Ls.prototype.get=function(Ae){return du(this,Ae).get(Ae)},Ls.prototype.has=function(Ae){return du(this,Ae).has(Ae)},Ls.prototype.set=function(Ae,qe){var Dn=du(this,Ae),sr=Dn.size;return Dn.set(Ae,qe),this.size+=Dn.size==sr?0:1,this},Sc.prototype.add=Sc.prototype.push=function(Ae){return this.__data__.set(Ae,At),this},Sc.prototype.has=function(Ae){return this.__data__.has(Ae)},Sa.prototype.clear=function(){this.__data__=new Ga,this.size=0},Sa.prototype.delete=function(Ae){var qe=this.__data__,Dn=qe.delete(Ae);return this.size=qe.size,Dn},Sa.prototype.get=function(Ae){return this.__data__.get(Ae)},Sa.prototype.has=function(Ae){return this.__data__.has(Ae)},Sa.prototype.set=function(Ae,qe){var Dn=this.__data__;if(Dn instanceof Ga){var sr=Dn.__data__;if(!$a||sr.length<199)return sr.push([Ae,qe]),this.size=++Dn.size,this;Dn=this.__data__=new Ls(sr)}return Dn.set(Ae,qe),this.size=Dn.size,this};var Id=$o?function(Ae){return Ae==null?[]:(Ae=Object(Ae),function(qe,Dn){for(var sr=-1,yi=qe==null?0:qe.length,Hr=0,si=[];++sr<yi;){var me=qe[sr];Dn(me,sr,qe)&&(si[Hr++]=me)}return si}($o(Ae),function(qe){return Cd.call(Ae,qe)}))}:function(){return[]},Rs=Ul;function ol(Ae,qe){return!!(qe=qe??$t)&&(typeof Ae=="number"||nu.test(Ae))&&Ae>-1&&Ae%1==0&&Ae<qe}function fs(Ae){if(Ae!=null){try{return nl.call(Ae)}catch{}try{return Ae+""}catch{}}return""}function Lh(Ae,qe){return Ae===qe||Ae!=Ae&&qe!=qe}(ua&&Rs(new ua(new ArrayBuffer(1)))!=gi||$a&&Rs(new $a)!=gn||su&&Rs(su.resolve())!=Zr||ta&&Rs(new ta)!=ai||Ph&&Rs(new Ph)!=Rr)&&(Rs=function(Ae){var qe=Ul(Ae),Dn=qe==Kn?Ae.constructor:void 0,sr=Dn?fs(Dn):"";if(sr)switch(sr){case rl:return gi;case Mc:return gn;case lu:return Zr;case hs:return ai;case Nf:return Rr}return qe});var Pc=Zi(function(){return arguments}())?Zi:function(Ae){return Gl(Ae)&&Br.call(Ae,"callee")&&!Cd.call(Ae,"callee")},ha=Array.isArray,da=jl||function(){return!1};function $l(Ae){if(!Rh(Ae))return!1;var qe=Ul(Ae);return qe==An||qe=="[object GeneratorFunction]"||qe=="[object AsyncFunction]"||qe=="[object Proxy]"}function Xu(Ae){return typeof Ae=="number"&&Ae>-1&&Ae%1==0&&Ae<=$t}function Rh(Ae){var qe=typeof Ae;return Ae!=null&&(qe=="object"||qe=="function")}function Gl(Ae){return Ae!=null&&typeof Ae=="object"}var _r=ru?function(Ae){return function(qe){return Ae(qe)}}(ru):function(Ae){return Gl(Ae)&&Xu(Ae.length)&&!!ur[Ul(Ae)]};function fa(Ae){return(qe=Ae)!=null&&Xu(qe.length)&&!$l(qe)?cu(Ae):Tc(Ae);var qe}O.exports=function(Ae,qe){return uu(Ae,qe)}})(wc,wc.exports);var Rl=a(wc.exports);function Ps(O,Y){return O.length===Y.length&&JSON.stringify(O.map(function(At){return At}).sort())===JSON.stringify(Y.map(function(At){return At}).sort())}var Th={Polygon:nn,LineString:Ce,Point:Ge,MultiPolygon:xe,MultiLineString:xe,MultiPoint:xe},eu=Object.freeze({__proto__:null,CommonSelectors:Nn,constrainFeatureMovement:kl,createMidPoint:_t,createSupplementaryPoints:oe,createVertex:kt,doubleClickZoom:he,euclideanDistance:Bt,featuresAt:q,getFeatureAtAndSetCursors:Rt,isClick:Xt,isEventAtCoordinates:Es,isTap:ge,mapEventToBoundingBox:pt,ModeHandler:n,moveFeatures:Ac,sortFeatures:at,stringSetsAreEqual:Ps,StringSet:rt,theme:Me,toDenseArray:H}),Dl=function(O,Y){var At={options:O=function(Zt){Zt===void 0&&(Zt={});var Qt=ne(Zt);return Zt.controls||(Qt.controls={}),Zt.displayControlsDefault===!1?Qt.controls=ne(Gu,Zt.controls):Qt.controls=ne(Eh,Zt.controls),(Qt=ne(wd,Qt)).styles=Zu(Qt.styles,"cold").concat(Zu(Qt.styles,"hot")),Qt}(O)};Y=function(Zt,Qt){return Qt.modes=B,Qt.getFeatureIdsAt=function(_e){return q.click({point:_e},null,Zt).map(function(cn){return cn.properties.id})},Qt.getSelectedIds=function(){return Zt.store.getSelectedIds()},Qt.getSelected=function(){return{type:R.FEATURE_COLLECTION,features:Zt.store.getSelectedIds().map(function(_e){return Zt.store.get(_e)}).map(function(_e){return _e.toGeoJSON()})}},Qt.getSelectedPoints=function(){return{type:R.FEATURE_COLLECTION,features:Zt.store.getSelectedCoordinates().map(function(_e){return{type:R.FEATURE,properties:{},geometry:{type:R.POINT,coordinates:_e.coordinates}}})}},Qt.set=function(_e){if(_e.type===void 0||_e.type!==R.FEATURE_COLLECTION||!Array.isArray(_e.features))throw new Error("Invalid FeatureCollection");var cn=Zt.store.createRenderBatch(),dn=Zt.store.getAllIds().slice(),An=Qt.add(_e),gn=new rt(An);return(dn=dn.filter(function(Mn){return!gn.has(Mn)})).length&&Qt.delete(dn),cn(),An},Qt.add=function(_e){var cn=JSON.parse(JSON.stringify(we(_e))).features.map(function(dn){if(dn.id=dn.id||Gt(),dn.geometry===null)throw new Error("Invalid geometry: null");if(Zt.store.get(dn.id)===void 0||Zt.store.get(dn.id).type!==dn.geometry.type){var An=Th[dn.geometry.type];if(An===void 0)throw new Error("Invalid geometry type: "+dn.geometry.type+".");var gn=new An(Zt,dn);Zt.store.add(gn)}else{var Mn=Zt.store.get(dn.id);Mn.properties=dn.properties,Rl(Mn.properties,dn.properties)||Zt.store.featureChanged(Mn.id),Rl(Mn.getCoordinates(),dn.geometry.coordinates)||Mn.incomingCoords(dn.geometry.coordinates)}return dn.id});return Zt.store.render(),cn},Qt.get=function(_e){var cn=Zt.store.get(_e);if(cn)return cn.toGeoJSON()},Qt.getAll=function(){return{type:R.FEATURE_COLLECTION,features:Zt.store.getAll().map(function(_e){return _e.toGeoJSON()})}},Qt.delete=function(_e){return Zt.store.delete(_e,{silent:!0}),Qt.getMode()!==B.DIRECT_SELECT||Zt.store.getSelectedIds().length?Zt.store.render():Zt.events.changeMode(B.SIMPLE_SELECT,void 0,{silent:!0}),Qt},Qt.deleteAll=function(){return Zt.store.delete(Zt.store.getAllIds(),{silent:!0}),Qt.getMode()===B.DIRECT_SELECT?Zt.events.changeMode(B.SIMPLE_SELECT,void 0,{silent:!0}):Zt.store.render(),Qt},Qt.changeMode=function(_e,cn){return cn===void 0&&(cn={}),_e===B.SIMPLE_SELECT&&Qt.getMode()===B.SIMPLE_SELECT?(Ps(cn.featureIds||[],Zt.store.getSelectedIds())||(Zt.store.setSelected(cn.featureIds,{silent:!0}),Zt.store.render()),Qt):(_e===B.DIRECT_SELECT&&Qt.getMode()===B.DIRECT_SELECT&&cn.featureId===Zt.store.getSelectedIds()[0]||Zt.events.changeMode(_e,cn,{silent:!0}),Qt)},Qt.getMode=function(){return Zt.events.getMode()},Qt.trash=function(){return Zt.events.trash({silent:!0}),Qt},Qt.combineFeatures=function(){return Zt.events.combineFeatures({silent:!0}),Qt},Qt.uncombineFeatures=function(){return Zt.events.uncombineFeatures({silent:!0}),Qt},Qt.setFeatureProperty=function(_e,cn,dn){return Zt.store.setFeatureProperty(_e,cn,dn),Qt},Qt}(At,Y),At.api=Y;var $t=Ht(At);return Y.onAdd=$t.onAdd,Y.onRemove=$t.onRemove,Y.types=k,Y.options=O,Y};function Ua(O){Dl(O,this)}return Ua.modes=Sh,Ua.constants=X,Ua.lib=eu,Ua})})(b3);var HX=b3.exports;const $X=Ff(HX),dC="draw";function GX(t){Vu(t,dC,{control:null,state:ls({activated:!1,register_id:void 0,show:!1,draw_support:[],cleanAfterDone:!1}),featuresAdded:{},featuresUpdated:{},featuresDeleted:{},action:{}})}_d(dC,GX);function cs(t){return Vo(t,dC)}const ZX=(t,e)=>{cs(t).control=e},QM=(t,e,n)=>{if(!e)throw new Error("Need register id");const a=cs(t),s=a.state,d=a.control;s.register_id=e,s.activated=!0,d.changeMode("simple_select")},WX=t=>{const e=cs(t),n=e.control,a=A3(e);e.action.save&&e.action.save(a.geojson),e.action.close&&e.action.close(),e.state.draw_support=[];const s=e.state;s.show=!1,e.action={},s.register_id=void 0,s.activated=!1,e.callback=void 0,e.featuresAdded={},e.featuresUpdated={},e.featuresDeleted={},n==null||n.deleteAll()};function x3(t,e){const a=cs(t).state;if(!a.activated)throw new Error("Need to call activateDraw first");if(a.register_id&&a.register_id!==e)throw new Error("register id not match")}const JM=(t,e,n,a,s)=>{const d=cs(t);x3(t,e);const l=d.control;d.callback=a,l.changeMode(n,s)};function A3(t){const e=t.control,n=t.featuresDeleted,a=t.featuresAdded,s=t.featuresUpdated,d={added:{},updated:{},deleted:n,geojson:{type:"FeatureCollection",features:[]}},l=e.getAll();return l.features.forEach(o=>{const g=o.id;a[g]?(d.added[g]=o,o.properties||(o.properties={}),o.properties.id=o.id):s[g]&&(d.updated[g]=o)}),d.geojson=l,d}const w3=(t,e,n)=>{const a=cs(t),s=a.state,d=a.action;if(x3(t,e),n&&!(n instanceof Function))throw new Error("Callback is not available");const l=A3(a);d.deleteFeatures&&d.deleteFeatures(Object.values(l.deleted)),d.addFeatures&&d.addFeatures(Object.values(l.added)),d.updateFeatures&&d.updateFeatures(Object.values(l.updated)),d.reset&&d.reset(),n&&n(l),s.activated=!1,C3(t)};function qX(t){const n=cs(t).state;C3(t),n.activated=!1}const C3=t=>{const e=cs(t),n=e.state;e.featuresAdded={},e.featuresAdded={},e.featuresDeleted={},n.cleanAfterDone&&e.control.deleteAll(),e.control.changeMode("simple_select")};function jA(t,e,n){const a=cs(t);switch(e){case"added":a.featuresAdded[n.id]=!0;break;case"updated":if(a.featuresAdded[n.id])return;a.featuresUpdated[n.id]=!0;break;case"deleted":if(a.featuresAdded[n.id])return;a.featuresDeleted[n.id]=n;break}}function VA(t,e){const n=cs(t);n.callback&&(w3(t,e,n.callback),n.callback=void 0)}function I3(t,e){const n=ju(),a=cs(t),s=a.state,d=a.action;return s.register_id=n,s.show=!0,s.cleanAfterDone=!!e.cleanAfterDone,s.draw_support=e.draw_support,d.addFeatures=e.addFeatures,d.updateFeatures=e.updateFeatures,d.deleteFeatures=e.deleteFeatures,d.getFeatures=e.getFeatures,d.reset=e.reset,d.save=e.save,n}const KX=t=>cs(t).state.activated,YX=t=>cs(t).state.draw_support,XX=t=>cs(t).state.register_id,M3=t=>cs(t).state.show,QX=t=>cs(t).action,JX=t=>cs(t).control,tQ={key:0,class:"d-flex button-custom-container"},eQ={key:1,class:"d-flex button-custom-container"},nQ={class:"context-menu"},rQ=["onClick"],iQ=["innerHTML"],oQ=nr({__name:"DrawControl",props:{...vo,drawOptions:Object},setup(t){const e=t,n=e.drawOptions,{mapId:a,moduleContainerProps:s,callMap:d}=bi(e),l=_n(()=>M3(a.value));jo(l,q=>{d(zt=>{q?(R("select"),zt.on("draw.create",C),zt.on("draw.update",I),zt.on("draw.delete",E),zt.addControl(_)):(zt.off("draw.create",C),zt.off("draw.update",I),zt.off("draw.delete",E),zt.removeControl(_))})});const{add:o,remove:g}=L1(a.value,new ov().setHandler(K));let _=new $X({displayControlsDefault:!1,boxSelect:!1});function C(q){for(const zt of q.features)jA(a.value,"added",zt);VA(a.value,B.value),R("select")}function I(q){for(const zt of q.features)jA(a.value,"updated",zt);VA(a.value,B.value),R("select")}function E(q){for(const zt of q.features)jA(a.value,"deleted",zt);VA(a.value,B.value),R("select")}ZX(a.value,_);const S={add:vd,delete:w2,update:BT,save:pO,discard:xg,close:xg,draw:_O},k=mn("");function R(q){switch(g(),k.value=q,q){case"select":case"delete":o();break}}const B=_n(()=>XX(a.value));function V(q){QM(a.value,B.value),JM(a.value,B.value,q)}const F=_n(()=>KX(a.value)),j=_n(()=>YX(a.value)),G=_n(()=>F.value);function Q(){w3(a.value,B.value)}function nt(){qX(a.value)}function X(){WX(a.value),g()}async function K(q){const zt=QX(a.value),Rt=JX(a.value),Bt=await(zt.getFeatures&&zt.getFeatures([q.lngLat.lng,q.lngLat.lat]))||[];switch(k.value){case"select":{const Xt=Rt==null?void 0:Rt.add({type:"FeatureCollection",features:Bt});Xt&&Xt.length>0&&(QM(a.value,B.value),JM(a.value,B.value,"direct_select",void 0,{featureId:Xt[0]}));break}case"delete":{Rt==null||Rt.delete(Rt.getSelectedIds()),zt.deleteFeatures&&zt.deleteFeatures(Bt),zt.reset&&zt.reset();break}}}const Z=mn(),at=_n(()=>j.value.map(q=>typeof q=="string"?{id:q,name:xQ[q]||q}:q));function pt(){Z.value&&Z.value.close()}function rt(q){if(j.value.length>1){Z.value&&Z.value.open(q);return}R("create"),V(j.value[0])}function xt(){n&&I3(a.value,n)}return(q,zt)=>(Mt(),Je(ut(Uo),Eo(yo(ut(s))),{btn:Ie(()=>[l.value?(Mt(),pe("div",tQ,[G.value?(Mt(),Je(ut(Ag),{key:0,row:""},{default:Ie(()=>[ee(ut(ui),{onClick:zt[0]||(zt[0]=Rt=>nt())},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:S.discard},null,8,["path"])]),_:1}),ee(ut(ui),{onClick:zt[1]||(zt[1]=Rt=>Q())},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:S.save},null,8,["path"])]),_:1})]),_:1})):(Mt(),Je(ut(Ag),{key:1,row:""},{default:Ie(()=>[ee(ut(ui),{onClick:zt[2]||(zt[2]=Rt=>X())},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:S.close},null,8,["path"])]),_:1}),ee(ut(ui),{active:k.value==="create",onClick:rt},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:S.add},null,8,["path"])]),_:1},8,["active"]),ee(ut(ui),{active:k.value==="select",onClick:zt[3]||(zt[3]=Rt=>R("select"))},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:S.update},null,8,["path"])]),_:1},8,["active"]),ee(ut(ui),{active:k.value==="delete",onClick:zt[4]||(zt[4]=Rt=>R("delete"))},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:S.delete},null,8,["path"])]),_:1},8,["active"])]),_:1}))])):ut(n)?(Mt(),pe("div",eQ,[ee(ut(ui),null,{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:S.draw,onClick:xt},null,8,["path"])]),_:1})])):wn("",!0)]),default:Ie(()=>[ee(ut(sC),{ref_key:"contextMenuRef",ref:Z},{default:Ie(()=>[Nt("ul",nQ,[(Mt(!0),pe(mr,null,ki(at.value,(Rt,Bt)=>(Mt(),pe("li",{key:Bt,onClick:_i(Xt=>{R("create"),V(Rt.id),pt()},["stop"]),class:"context-menu__item"},[Nt("span",{innerHTML:Rt.name},null,8,iQ)],8,rQ))),128))])]),_:1},512)]),_:1},16))}}),aQ=Vn(oQ,[["__scopeId","data-v-30f1a685"]]);var Vw={exports:{}};(function(t,e){(function(n,a){{var s=a();t&&t.exports&&(e=t.exports=s),e.randomColor=s}})(ho,function(){var n=null,a={};V();var s=[],d=function(X){if(X=X||{},X.seed!==void 0&&X.seed!==null&&X.seed===parseInt(X.seed,10))n=X.seed;else if(typeof X.seed=="string")n=Q(X.seed);else{if(X.seed!==void 0&&X.seed!==null)throw new TypeError("The seed value must be an integer or string");n=null}var K,Z,at;if(X.count!==null&&X.count!==void 0){for(var pt=X.count,rt=[],xt=0;xt<X.count;xt++)s.push(!1);for(X.count=null;pt>rt.length;){var q=d(X);n!==null&&(X.seed=n),rt.push(q)}return X.count=pt,rt}return K=l(X),Z=o(K,X),at=g(K,Z,X),_([K,Z,at],X)};function l(X){if(s.length>0){var K=nt(X.hue),Z=k(K),at=(K[1]-K[0])/s.length,pt=parseInt((Z-K[0])/at);s[pt]===!0?pt=(pt+2)%s.length:s[pt]=!0;var rt=(K[0]+pt*at)%359,xt=(K[0]+(pt+1)*at)%359;return K=[rt,xt],Z=k(K),Z<0&&(Z=360+Z),Z}else{var K=I(X.hue);return Z=k(K),Z<0&&(Z=360+Z),Z}}function o(X,K){if(K.hue==="monochrome")return 0;if(K.luminosity==="random")return k([0,100]);var Z=E(X),at=Z[0],pt=Z[1];switch(K.luminosity){case"bright":at=55;break;case"dark":at=pt-10;break;case"light":pt=55;break}return k([at,pt])}function g(X,K,Z){var at=C(X,K),pt=100;switch(Z.luminosity){case"dark":pt=at+20;break;case"light":at=(pt+at)/2;break;case"random":at=0,pt=100;break}return k([at,pt])}function _(X,K){switch(K.format){case"hsvArray":return X;case"hslArray":return G(X);case"hsl":var Z=G(X);return"hsl("+Z[0]+", "+Z[1]+"%, "+Z[2]+"%)";case"hsla":var at=G(X),xt=K.alpha||Math.random();return"hsla("+at[0]+", "+at[1]+"%, "+at[2]+"%, "+xt+")";case"rgbArray":return F(X);case"rgb":var pt=F(X);return"rgb("+pt.join(", ")+")";case"rgba":var rt=F(X),xt=K.alpha||Math.random();return"rgba("+rt.join(", ")+", "+xt+")";default:return R(X)}}function C(X,K){for(var Z=S(X).lowerBounds,at=0;at<Z.length-1;at++){var pt=Z[at][0],rt=Z[at][1],xt=Z[at+1][0],q=Z[at+1][1];if(K>=pt&&K<=xt){var zt=(q-rt)/(xt-pt),Rt=rt-zt*pt;return zt*K+Rt}}return 0}function I(X){if(typeof parseInt(X)=="number"){var K=parseInt(X);if(K<360&&K>0)return[K,K]}if(typeof X=="string"){if(a[X]){var Z=a[X];if(Z.hueRange)return Z.hueRange}else if(X.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var at=j(X)[0];return[at,at]}}return[0,360]}function E(X){return S(X).saturationRange}function S(X){X>=334&&X<=360&&(X-=360);for(var K in a){var Z=a[K];if(Z.hueRange&&X>=Z.hueRange[0]&&X<=Z.hueRange[1])return a[K]}return"Color not found"}function k(X){if(n===null){var K=.618033988749895,Z=Math.random();return Z+=K,Z%=1,Math.floor(X[0]+Z*(X[1]+1-X[0]))}else{var at=X[1]||1,pt=X[0]||0;n=(n*9301+49297)%233280;var rt=n/233280;return Math.floor(pt+rt*(at-pt))}}function R(X){var K=F(X);function Z(pt){var rt=pt.toString(16);return rt.length==1?"0"+rt:rt}var at="#"+Z(K[0])+Z(K[1])+Z(K[2]);return at}function B(X,K,Z){var at=Z[0][0],pt=Z[Z.length-1][0],rt=Z[Z.length-1][1],xt=Z[0][1];a[X]={hueRange:K,lowerBounds:Z,saturationRange:[at,pt],brightnessRange:[rt,xt]}}function V(){B("monochrome",null,[[0,0],[100,0]]),B("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),B("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),B("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),B("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),B("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),B("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),B("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function F(X){var K=X[0];K===0&&(K=1),K===360&&(K=359),K=K/360;var Z=X[1]/100,at=X[2]/100,pt=Math.floor(K*6),rt=K*6-pt,xt=at*(1-Z),q=at*(1-rt*Z),zt=at*(1-(1-rt)*Z),Rt=256,Bt=256,Xt=256;switch(pt){case 0:Rt=at,Bt=zt,Xt=xt;break;case 1:Rt=q,Bt=at,Xt=xt;break;case 2:Rt=xt,Bt=at,Xt=zt;break;case 3:Rt=xt,Bt=q,Xt=at;break;case 4:Rt=zt,Bt=xt,Xt=at;break;case 5:Rt=at,Bt=xt,Xt=q;break}var ge=[Math.floor(Rt*255),Math.floor(Bt*255),Math.floor(Xt*255)];return ge}function j(X){X=X.replace(/^#/,""),X=X.length===3?X.replace(/(.)/g,"$1$1"):X;var K=parseInt(X.substr(0,2),16)/255,Z=parseInt(X.substr(2,2),16)/255,at=parseInt(X.substr(4,2),16)/255,pt=Math.max(K,Z,at),rt=pt-Math.min(K,Z,at),xt=pt?rt/pt:0;switch(pt){case K:return[60*((Z-at)/rt%6)||0,xt,pt];case Z:return[60*((at-K)/rt+2)||0,xt,pt];case at:return[60*((K-Z)/rt+4)||0,xt,pt]}}function G(X){var K=X[0],Z=X[1]/100,at=X[2]/100,pt=(2-Z)*at;return[K,Math.round(Z*at/(pt<1?pt:2-pt)*1e4)/100,pt/2*100]}function Q(X){for(var K=0,Z=0;Z!==X.length&&!(K>=Number.MAX_SAFE_INTEGER);Z++)K+=X.charCodeAt(Z);return K}function nt(X){if(isNaN(X)){if(typeof X=="string"){if(a[X]){var Z=a[X];if(Z.hueRange)return Z.hueRange}else if(X.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var at=j(X)[0];return S(at).hueRange}}}else{var K=parseInt(X);if(K<360&&K>0)return S(X).hueRange}return[0,360]}return d})})(Vw,Vw.exports);var sQ=Vw.exports;const lQ=Ff(sQ);function cQ(t,e){let n="bright",a;return/water|ocean|lake|sea|river/.test(t)&&(a="blue"),/state|country|place/.test(t)&&(a="pink"),/road|highway|transport|streets/.test(t)&&(a="orange"),/contour|building|earth/.test(t)&&(a="monochrome"),/building/.test(t)&&(n="dark"),/earth/.test(t)&&(n="light"),/contour|landuse/.test(t)&&(a="yellow"),/wood|forest|park|landcover|land|natural/.test(t)&&(a="green"),`rgba(${lQ({luminosity:n,hue:a,seed:t,format:"rgbArray"}).join(", ")}, ${e||"1"})`}function uQ(t){return t.metadata&&t.metadata["maplibregl-inspect:inspect"]}function hQ(t){const e={};return Object.keys(t.style.sourceCaches).forEach(n=>{const a=t.style.sourceCaches[n]||{_source:{}},s=a._source.vectorLayerIds;s?e[n]=s:a._source.type==="geojson"&&(e[n]=[])}),e}function dQ(t){return Object.assign(t,{metadata:Object.assign({},t.metadata,{"maplibregl-inspect:inspect":!0})})}function fQ(t){return typeof t>"u"||t===null?t:t instanceof Date?t.toLocaleString():typeof t=="object"||typeof t=="number"||typeof t=="string"?t.toString():t}function UA(t,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${t}</div><div class="maplibregl-inspect_property-value">${fQ(e)}</div></div>`}function pQ(t){return`<div class="maplibregl-inspect_layer">${t}</div>`}function mQ(t){const e=pQ(t.layer["source-layer"]||t.layer.source),n=UA("$id",t.id),a=UA("$type",t.geometry.type),s=Object.keys(t.properties).map(d=>UA(d,t.properties[d]));return[e,n,a].concat(s).join("")}function gQ(t){return t.map(e=>`<div class="maplibregl-inspect_feature">${mQ(e)}</div>`).join("")}function yQ(t){return`<div class="maplibregl-inspect_popup-container"><div class="maplibregl-inspect_popup" style="max-height: 200px; overflow-y: auto;">${gQ(t)}</div></div>`}function tS(t,e,n){const a={id:[e,n,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":t,"circle-radius":2},filter:["==","$type","Point"]};return n&&(a["source-layer"]=n),a}function eS(t,e,n,a){const s={id:[n,a,"polygon"].join("_"),source:n,type:"fill",paint:{"fill-color":t,"fill-antialias":!0,"fill-outline-color":t},filter:["==","$type","Polygon"]};return a&&(s["source-layer"]=a),s}function nS(t,e,n){const a={id:[e,n,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":t},filter:["==","$type","LineString"]};return n&&(a["source-layer"]=n),a}function vQ(t,e){const n=[],a=[],s=[];function d(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(t).forEach(l=>{const o=t[l];if(!o||o.length===0){const g=d(l);a.push(tS(g.circle,l)),s.push(nS(g.line,l)),n.push(eS(g.polygon,g.polygonOutline,l))}else o.forEach(g=>{const _=d(g);a.push(tS(_.circle,l,g)),s.push(nS(_.line,l,g)),n.push(eS(_.polygon,_.polygonOutline,l,g))})}),n.concat(s).concat(a)}function _Q(t,e,n){n=Object.assign({backgroundColor:"#fff"},n);const a={id:"background",type:"background",paint:{"background-color":n.backgroundColor}},s={};return Object.keys(t.sources).forEach(d=>{const l=t.sources[d];(l.type==="vector"||l.type==="geojson")&&(s[d]=l)}),Object.assign(t,{layers:[a].concat(e),sources:s})}const bQ=nr({__name:"InspectControl",props:{...vo,showInspectDefault:Boolean,useInspectStyle:{type:Boolean,default:!0},showInspectMapPopup:{type:Boolean,default:!0},showInspectMapPopupOnHover:{type:Boolean,default:!1},showMapPopup:{type:Boolean,default:!1},showMapPopupOnHover:{type:Boolean,default:!0},blockHoverPopupOnClick:{type:Boolean,default:!1},buildInspectStyle:{type:Function,default:_Q},backgroundColor:{type:String,default:"#fff"},assignLayerColor:{type:Function,default:cQ},renderPopup:{type:Function,default:yQ},selectThreshold:{type:Number,default:5},queryParameters:{type:Object,default:()=>({})}},setup(t){const e=t,n=Wp(new wg.Popup({closeButton:!1,closeOnClick:!1})),{callMap:a,mapId:s,moduleContainerProps:d}=bi(e,Z,at),{trans:l,setLocaleDefault:o}=To(s.value),g=mn(e.showInspectDefault);o({map:{"inspect-control":{button:"Toggle inspect"}}});const _=new ov().setHandler(B),C=new YU().setHandler(B),I=mn(!1),{add:E,remove:S}=R1(s.value,_),{add:k,remove:R}=R1(s.value,C);function B(q){if(g.value){if(!e.showInspectMapPopup||q.type==="mousemove"&&!e.showInspectMapPopupOnHover)return;q.type==="click"&&e.showInspectMapPopupOnHover&&e.blockHoverPopupOnClick&&(I.value=!I.value)}else{if(!e.showMapPopup||q.type==="mousemove"&&!e.showMapPopupOnHover)return;q.type==="click"&&e.showMapPopupOnHover&&e.blockHoverPopupOnClick&&(I.value=!I.value)}if(!I.value&&n.value){let zt;e.selectThreshold===0?zt=q.point:zt=[[q.point.x-e.selectThreshold,q.point.y+e.selectThreshold],[q.point.x+e.selectThreshold,q.point.y-e.selectThreshold]],a(Rt=>{const Bt=Rt.queryRenderedFeatures(zt,e.queryParameters)||[];if(Rt.getCanvas().style.cursor=Bt.length?"pointer":"",!Bt.length)n.value.remove();else{n.value.setLngLat(q.lngLat);const Xt=e.renderPopup(Bt);typeof Xt=="string"?n.value.setHTML(Xt):n.value.setDOMContent(Xt),n.value.addTo(Rt)}})}}function V(){var q;g.value=!g.value,g.value?(E(),k()):((q=n.value)==null||q.remove(),S(),R()),a(zt=>pt(zt))}const F={map:EO,inspect:TO};let j={},G;const Q=(q,zt)=>{if(q.sourceDataType==="visibility"||!q.isSourceLoaded)return;const Rt=Object.assign({},j);j=hQ(zt),!zg.isEqual(Rt,j)&&Object.keys(j).length>0&&setTimeout(()=>pt(zt),1e3)},nt=q=>{const zt=q.getStyle();uQ(zt)||(G=zt)};let X,K;function Z(q){X=zt=>Q(zt,q),K=()=>nt(q),Object.keys(j).length===0&&(q.on("tiledata",X),q.on("sourcedata",X)),q.on("styledata",K),q.on("load",K)}function at(q){g.value=!1,q.off("styledata",X),q.off("load",X),q.off("tiledata",K),q.off("sourcedata",K),S(),R(),pt(q)}function pt(q){g.value?e.useInspectStyle&&q.setStyle(dQ(rt(q))):G&&e.useInspectStyle&&q.setStyle(G)}function rt(q){const zt=vQ(j,e.assignLayerColor);return e.buildInspectStyle(q.getStyle(),zt,{backgroundColor:e.backgroundColor})}const xt=_n(()=>M3(s.value));return(q,zt)=>(Mt(),Je(ut(Uo),Eo(yo(ut(d))),{btn:Ie(()=>[xt.value?wn("",!0):(Mt(),Je(ut(ui),{key:0,tooltip:ut(l)("map.inspect-control.button")},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",onClick:zt[0]||(zt[0]=Rt=>V()),path:g.value?F.inspect:F.map},null,8,["path"])]),_:1},8,["tooltip"]))]),default:Ie(()=>[Wn(q.$slots,"default")]),_:3},16))}}),fg={POINT:"draw_point",LINE_STRING:"draw_line_string",POLYGON:"draw_polygon"},xQ={[fg.POINT]:"draw point",[fg.LINE_STRING]:"draw line string",[fg.POLYGON]:"draw polygon"},AQ={class:"field-container"},wQ={class:"label-container"},CQ={class:"label-field"},IQ=["disabled","title"],MQ=["disabled"],SQ={class:"geometry-list-container"},EQ={class:""},TQ=["onUpdate:modelValue","onChange"],PQ={class:""},kQ=["onUpdate:modelValue","onChange"],LQ={class:""},RQ=["onClick"],DQ={__name:"field-geometry",props:to({modelValue:{type:Array,default:()=>[[0,0]]},maxLength:{type:Number,default:0},title:String,titleActionDownload:String,titleActionFillBound:String,titleActionAddPoint:String},{modelValue:{default:[[0,0]]},modelModifiers:{}}),emits:to(["click:remove","click:fillbound"],["update:modelValue"]),setup(t,{emit:e}){const n=t,a=la(t,"modelValue"),s={add:vd,fillBound:Rg,delete:w2,download:vO,upload:VO},d=e,l=k=>{a.value=k},o=()=>{a.value||(a.value=[]),a.value.push([null,null])},g=()=>{l(a)},_=k=>{a.value.splice(k,1),d("click:remove",k),l(a)},C=k=>{if(!(!k||!k.length))return k.length==1?Aa(k[0]):k.length==2?as(k):Bg([[...k,k[0]]])},I=()=>{let k={type:"FeatureCollection",features:[C(a.value)]};const R=new window.Blob([JSON.stringify(k)],{type:"text/plain;charset=utf-8"});zD.saveAs(R,"geojson.json")},E=()=>{d("click:fillbound",C(a.value))},S=_n(()=>!n.maxLength||a.value.length<n.maxLength);return(k,R)=>(Mt(),pe("div",AQ,[Nt("div",wQ,[Nt("div",CQ,Rn(t.title),1),Nt("div",null,[Nt("button",{onClick:E,disabled:!t.modelValue||t.modelValue.length<1,class:"setting-button",title:t.titleActionFillBound},[ee(ut(Zn),{size:16,type:"mdi",path:s.fillBound,title:t.titleActionDownload},null,8,["path","title"])],8,IQ),Nt("button",{onClick:I,class:"setting-button",disabled:!t.modelValue||t.modelValue.length<1},[ee(ut(Zn),{size:16,type:"mdi",path:s.download,title:t.titleActionAddPoint},null,8,["path","title"])],8,MQ),S.value?(Mt(),pe("button",{key:0,onClick:o,class:"setting-button"},[ee(ut(Zn),{size:16,type:"mdi",path:s.add},null,8,["path"])])):wn("",!0)])]),Nt("div",SQ,[(Mt(!0),pe(mr,null,ki(t.modelValue,(B,V)=>(Mt(),pe("div",{class:"geometry-list-item",key:V},[Nt("div",null,"#"+Rn(V+1),1),Nt("div",EQ,[gc(Nt("input",{class:"setting-input","onUpdate:modelValue":F=>a.value[V][0]=F,type:"number",step:"any",onChange:F=>g()},null,40,TQ),[[wh,a.value[V][0]]])]),Nt("div",PQ,[gc(Nt("input",{class:"setting-input","onUpdate:modelValue":F=>a.value[V][1]=F,type:"number",step:"any",onChange:F=>g()},null,40,kQ),[[wh,a.value[V][1]]])]),Nt("div",LQ,[Nt("button",{onClick:F=>_(V),class:"setting-button"},[ee(ut(Zn),{size:16,type:"mdi",path:s.delete},null,8,["path"])],8,RQ)])]))),128))])]))}},OQ=Vn(DQ,[["__scopeId","data-v-e28afdf9"]]),zQ={class:"label-container"},FQ={class:"label-field"},BQ={class:"label-field-value"},NQ={__name:"fields-show",props:{fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]}},setup(t){return(e,n)=>(Mt(),pe("div",null,[(Mt(!0),pe(mr,null,ki(t.fields,(a,s)=>(Mt(),pe("div",{class:"field-container label-value",key:s},[Nt("div",zQ,[Nt("div",FQ,Rn(a.text),1),Nt("div",BQ,Rn(a.value),1)])]))),128))]))}},jQ=Vn(NQ,[["__scopeId","data-v-6556841c"]]),VQ={class:"setting-container"},UQ={__name:"MeasurementSettingPopup",props:to({...vo,modelValue:Array,maxLength:{type:Number,default:0},fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]},popUpPosition:{type:Object,default:()=>({top:50,right:40,width:350,height:300})}},{modelValue:{default:[[0,0]]},modelModifiers:{},show:{default:!1},showModifiers:{}}),emits:to(["update:modelValue"],["update:modelValue","update:show"]),setup(t,{emit:e}){const n=e,a=t,{callMap:s,moduleContainerProps:d,mapId:l}=bi(a),{trans:o}=To(l.value),g=la(t,"modelValue"),_=la(t,"show"),C=E=>{s(S=>{zP(S,E)})};function I(E){n("update:modelValue",E.value)}return(E,S)=>(Mt(),Je(ut(Uo),Eo(yo(ut(d))),{draggable:Ie(k=>[_.value?(Mt(),Je(ut(bd),Tr({key:0},Object.assign(k,t.popUpPosition),{show:_.value,"onUpdate:show":S[0]||(S[0]=R=>_.value=R),title:ut(o)("map.measurement.setting.title")}),{default:Ie(()=>[Nt("div",VQ,[ee(jQ,{fields:t.fields},null,8,["fields"]),ee(OQ,{"onUpdate:modelValue":I,modelValue:g.value,maxLength:t.maxLength,"onClick:fillbound":C,title:ut(o)("map.measurement.setting.field.data"),titleActionDownload:ut(o)("map.measurement.action.download"),titleActionFillBound:ut(o)("map.measurement.action.fly-to"),titleActionAddPoint:ut(o)("map.measurement.action.add-point")},null,8,["modelValue","maxLength","title","titleActionDownload","titleActionFillBound","titleActionAddPoint"])])]),_:2},1040,["show","title"])):wn("",!0)]),default:Ie(()=>[Wn(E.$slots,"default",{},void 0,!0)]),_:3},16))}},HQ=Vn(UQ,[["__scopeId","data-v-1a628ab0"]]);class Bb{constructor(){this.value=[]}get coordinates(){return this.value.filter(e=>e[0]!=null&&e[1]!=null)}start(){}add(e){const n=$Q(this.value);n>=0?this.value[n]=e:this.value.push(e)}init(e){this.value=e}getResult(){return{}}reset(){this.value=[]}destroy(){this.value=[]}}function $Q(t=[]){return t.findIndex(e=>!e[0]||!e[1])}function U1(t,e="vi"){return new Intl.NumberFormat(e).format(t)}class GQ extends Bb{get name(){return"Measure Area"}get type(){return"area"}getResult(){const s={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return s;if(this.coordinates.length==1)return s.features=[Aa(this.coordinates[0])],s;if(this.coordinates.length==2)return s.features=[as(this.coordinates)],s;const d=Bg([[...this.coordinates,this.coordinates[0]]]);return s.features=[d],s.value=S$(d),s.format=HA(s.value),s.features_label=[g$(d,{properties:{is_label:!0,is_center:!0,text:HA(s.value)}})],s.fields=[{trans:"map.measurement.setting.area",value:HA(s.value)}],s}}function HA(t=0){return t<1e6?`${U1(t.toFixed(2))} m`:`${U1((t/1e6).toFixed(2))} km`}class ZQ extends Bb{get name(){return"Measure Azimuth"}get type(){return"line"}get setting(){return{maxLength:2}}add(e){this.value.length>1&&(this.value=this.value.slice(0,1)),this.value.push(e)}getResult(){const s={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return s;if(this.coordinates.length==1)return s.features=[Aa(this.coordinates[0])],s;const d=this.coordinates[this.coordinates.length-1],l=this.coordinates[this.coordinates.length-2],o=as(this.coordinates);s.features=[o];const g=PP(l,d);return s.value=CP(g).toFixed(3),s.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:d},properties:{is_label:!0,text:`${s.value} `,rotation:g}}],s.fields=[{trans:"map.measurement.setting.azimuth",value:`${s.value} `}],s}}class WQ extends Bb{get name(){return"Measure Distance"}get type(){return"line"}getResult(){const s={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return s;if(this.coordinates.length==1)return s.features=[Aa(this.coordinates[0])],s;const d=as(this.coordinates);return s.features=[d],s.value=EM(d),s.format=$A(s.value),s.features_label=this.coordinates.map((l,o,g)=>({type:"Feature",properties:{is_label:!0,text:$A(o<1?0:EM(as(g.slice(0,o+1))))},geometry:{type:"Point",coordinates:l}})),s.fields=[{trans:"map.measurement.setting.distance",value:$A(s.value)}],s}}function $A(t=0){return t<1?`${U1((t*1e3).toFixed(2))} m`:`${U1(t.toFixed(2))} km`}class qQ extends Bb{constructor(e=[]){super(),this.crs_items=e}get name(){return"Measure Point"}get type(){return"point"}get setting(){return{maxLength:1}}add(e){this.value.length>0&&(this.value=[]),this.value.push(e)}getResult(){const s={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return s;s.features=[Aa(this.coordinates[0])];const d=this.coordinates[0][0],l=this.coordinates[0][1],o=Sw({longitude:d,latitude:l},void 0,!1);if(o&&(s.value=`${o.longitude}, ${o.latitude}`),this.crs_items){const g=this.crs_items.find(_=>_.default);s.fields=[{trans:g==null?void 0:g.name,value:s.value}],this.crs_items.filter(_=>!_.default).forEach(_=>{var C;if(!_.default&&_.proj4js){const I=Sw({longitude:d,latitude:l},_,!1);I&&((C=s.fields)==null||C.push({trans:_.name,value:`${I.longitude}, ${I.latitude}`}))}})}else s.fields=[{trans:"map.measurement.setting.point",value:s.value}];return s.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:this.coordinates[0]},properties:{is_label:!0,text:s.value}}],s}}class fC{start(e){}view(e){}reset(){}destroy(){}}class KQ extends fC{constructor(e){super(),this.layers=[],this.map=e}init(e,n){return n.id||(n.id=`measurment-control-${ju()}`),this.map.addSource(n.id,n.data),e.forEach(a=>{a.id||(a.id=`measurment-control-${ju()}`),a.source||(a.source=n.id),this.map.addLayer(a)}),this.source=n,this.layers=e,this}start(){this.onStart&&this.onStart(),this.layers.forEach(e=>{const n=e.id;this.map.getLayer(n)&&this.map.moveLayer(n)})}reset(){const e=this.map.getSource(this.source.id);e&&e.setData({type:"FeatureCollection",features:[]}),this.onReset&&this.onReset()}destroy(){this.map&&(this.layers.forEach(e=>{const n=e.id;this.map.getLayer(n)&&this.map.removeLayer(n),this.map.getSource(n)&&this.map.removeSource(n)}),this.map.getSource(this.source.id)&&this.map.removeSource(this.source.id))}view({features:e=[],features_label:n=[]}={}){const a=this.map.getSource(this.source.id);a&&a.setData({type:"FeatureCollection",features:[...e,...n]})}}class YQ extends fC{constructor(e){super(),this.markers=[],this.bindEvent={},this.color="#fff",this.map=e,this.markers=[]}setColor(e){return this.color=e,this}view({coordinates:e=[]}={}){const n=!!this.onDragMarker;if(e.length<this.markers.length)for(;e.length<this.markers.length;){const a=this.markers.pop();a&&a.remove()}e.forEach((a,s)=>{if(!a[0]||!a[1])return;let d=this.markers[s];d||(this.bindEvent[s]={},d=XQ({color:this.color,draggable:n}),this.markers[s]=d),d.setLngLat({lng:a[0],lat:a[1]}).addTo(this.map),n&&(this.bindEvent[s].dragend&&d.off("dragend",this.bindEvent[s].dragend),this.bindEvent[s].dragend=()=>{const o=d.getLngLat(),g=[o.lng,o.lat],_=e.slice();_[s]=g,this.onDragMarker&&this.onDragMarker(_,g,s,d)},d.on("dragend",this.bindEvent[s].dragend));const l=d.getElement();this.onRightClickMarker&&(this.bindEvent[s].contextmenu&&l.removeEventListener("contextmenu",this.bindEvent[s].contextmenu),this.bindEvent[s].contextmenu=o=>{o.preventDefault();const g=d.getLngLat();this.onRightClickMarker&&this.onRightClickMarker([g.lng,g.lat],s,d)},l.addEventListener("contextmenu",this.bindEvent[s].contextmenu))})}reset(){this.markers.forEach(e=>{e.remove()}),this.markers=[]}destroy(){this.reset()}}function XQ({color:t,draggable:e=!1}={}){const n=document.createElement("div");return n.style.width="12px",n.style.height="12px",n.style.borderRadius="50%",n.style.background="#fff",n.style.boxSizing="border-box",n.style.border=`2px solid ${t}`,n.style.cursor="pointer",new wg.Marker({element:n,draggable:e})}const QQ=function(){let t=null;const e=[],n=I=>{for(let E=0;E<e.length;E++)I(e[E])},a=I=>{t=I},s=I=>{e.push(I)},d=()=>{t&&t.start(),n(I=>{I.start&&I.start(g())})},l=()=>{t&&t.reset(),n(I=>{I.reset&&I.reset()})},o=()=>{t&&t.destroy(),n(I=>{I.destroy()})},g=()=>({coordinates:t.value,setting:t.setting,...t.getResult()});return{get type(){return t?t.type:null},get action(){return t},setAction:a,addView:s,start:d,reset:l,destroy:o,add:I=>{t&&t.add(I),n(E=>{E.view&&E.view(g())})},init:(I=[])=>{t&&t.init(I),n(E=>{E.view(g())})},getResult:g}};class JQ extends fC{start({setting:e}={}){this.onChangeSetting&&this.onChangeSetting(e)}view({coordinates:e=[],setting:n={},fields:a=[]}={}){this.onChangeValue&&this.onChangeValue(e),this.onChangeSetting&&(n.fields=a,this.onChangeSetting(n))}reset(){this.onChangeValue&&this.onChangeValue([]),this.onChangeSetting&&this.onChangeSetting()}}const tJ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAADo6zjiAAAAAXNSR0IArs4c6QAAA4RJREFUWEe9l09o02AYxtdkTRlfL13aie1Cdwgt7cqwiptUA2MHYb04xXhRUFQ6ENHT7rnvpOBhZaIieMlBPYyBIBtEKhtq/TM7W3JYyVpxbdZLvkHTtUrKNrou/5pt5tCWfu/7Pr/naXlJbF2HuKLRqFdpT6fTRatjbFYblT4AwHflHUI4ZHWOZQCapjGWZauKME3TDpZlZSsQlgFcLtfLSqVyQxHFcfyVKIrX/ytAV1fX3zZBS2YsNXm93gfFYvFRK4DX631YLBYfd5qCJQAEQbYbjQbaKoYgSL3RaHQfO0AgELiQy+U4NaFAIEDlcrkPnUB0nIDdbt+s1WouNREMwyqyLPceGwBFUSc5jtNdOhRFeTmO+20WoqMEAABpCOEpveEAgK8QwuiRAyQSCXsymTS1bDpZTKYTwHH8uSiKN804w3H8hSiKt8zUmgZQWTxG803NNlVEEMQ9QRCeGCm2nhMEcd9MjykAtcVjBGN2MRkCkCR5juf5j0aCaueRSOT8yspKSq/XEADDsLIsy7gVAAzDRFmW3ZYBYrFYXyqV+mNFfLcnFoudSKVSG1ozdBMAAHyCEJ45DIDT6fwiSZLmDE2AThaPEWAikcCSyWRNrU4ToLe3d3Zzc/OO0XAz5x6P51mpVLrdEYCFxWPEompW9Uufz5coFAozRhM7Off5fJOFQiHZ3qMKgCBIzcrdjR4QiqLb9XrdbggQDoeHM5nMkhl3PT09WQRBlOeCoJn6cDg8kslklltrDyTgcDg2qtWqx2hgMBi8ls1mWaWOJMmrPM83P+tdDoejVK1W+zQBKIrycBynuTSURgBAdmpqKsIwzHbrIIZhuqenp1eM0qAoqo/juNJu774EAABLEMJhLRd+v/9KPp9/reeSIIgJQRA0awAAyxDCkQMAo6Oj3YuLi6rLQnEdj8cHWZatG8WsnNM0jc7Pz/+UJEn1v8EwjH03wb0E3G73TLlcTrQLEARxWRCEN2aE22sGBgYm1tbWDqThdruT5XJ5Uqlv/Qn2PWo5nc5f4+PjEbOutQB30vghSVKoraap3Xzp7++/s76+PrtbsEP+1oprrR6SJC/xPL+XpN/vv5vP5582AVAUlZUlAQDIxOPxocO61ktjbm7u29bW1iCKorV6vY7ZQqHQ6dXV1c8kSU7wPH+kro3SiEQiZ204jr8fGxu7eFyu9dJYWFh49w9KoVXl/UeUKQAAAABJRU5ErkJggg==",eJ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGmSURBVDiNldPBitpAGAfwv5mMmy85JCistD5Ai/gCPYovYJENCPZQF8VD36HXUkrfQws9R8WLF58gh2h2W2PpoeTWxBgzMr1spd3uUvOHOQ2//3yHb4C/UyGi95Zl3XLOUwASgFRVNTVN8ysRfQTwFA+FMdYhoqjf7+9ns5kMgkCGYSjDMJTb7VbO53M5HA4PRBRzzl//g8vlcrxYLE7osbNcLmWlUok459cAULgb+2YymRi1Wu3B6e7H9300Go1dkiTPGRG97Xa7LzqdjnqWBlAqlRBFEVzXNZRisXhl2/bFufh3bNvmAF4WOOd73/cvDMPIVSCEQLVaFUqWZbkxAKiqCsaYVHLLe1E452kcx7mhEALH47Gg6Lr+3fO83AXr9Rq6rofK4XD4NB6P07wFo9Eok1J+LgC41DTt1nEco16vn4VXqxWazeYuSZJnCoAfWZZdt9vtneu6/8We56HVasVCiDcAvp0uGGM2Ef3s9Xp7x3HkZrM57X8QBHI6ncrBYJASUcQYe/XYA5eapr2zLOuGc77H3XfmnKemaX4hog8AnvwJfgHMKs1jQ++4tQAAAABJRU5ErkJggg==",W0="#004E98",nJ=nr({__name:"MeasurementControl",props:{...vo},setup(t){const{getCrsItems:e}=L2,{addImage:n}=eH;let a=QQ();const s=t,d=mn(""),l=mn([]),o=mn({show:!0,maxLength:0,fields:[]}),g={add:vd,fillBound:Rg,distance:zO,area:FO,azimuth:NO,point:M2,clear:w2,close:xg,setting:LT},{callMap:_,mapId:C,moduleContainerProps:I}=bi(s,V,F),{trans:E,setLocaleDefault:S}=To(C.value);S({map:{measurement:{action:{clear:"Clear",close:"Close",setting:"Setting",download:"Download","add-point":"Add point","fly-to":"Fill bound",add:"Add"},title:"Measurement",result:"Measurement Result",field:{"unit-distance":"Unit distance","unit-area":"Unit area"},tools:{point:"Measure Point",distance:"Measure Distance",area:"Measure Area",azimuth:"Measure azimuth"},unit:{meter:"Meter",kilometer:"Kilometer","square-meter":"Square Meter",hecta:"Hecta","square-kilometer":"Square Kilometer"},setting:{title:"Setting",field:{data:"Data"},point:"Point",distance:"Distance",area:"Area",azimuth:"Azimuthi"},"no-data":{text:"Status",value:"Waiting..."}}}});const k=new ov().setHandler(j),{add:R,remove:B}=R1(C.value,k);function V(q){n(q.id,"azimuth-arrow",tJ,{sdf:!0}),n(q.id,"measurment-round",eJ,{content:[4,4,12,12],stretchX:[[6,10]],stretchY:[[6,10]]});let zt=new KQ(q);zt.init([{type:"line",paint:{"line-color":W0,"line-width":2}},{type:"fill",filter:["==","$type","Polygon"],paint:{"fill-color":W0,"fill-opacity":.3}},{type:"symbol",filter:["has","rotation"],paint:{"icon-color":W0},layout:{"icon-size":1.2,"icon-rotate":{type:"identity",property:"rotation"},"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":"azimuth-arrow",visibility:"visible"}},{type:"symbol",filter:["all",["has","is_label"],["==","$type","Point"]],layout:{"text-field":"{text}","text-offset":["case",["to-boolean",["get","is_center"]],["literal",[0,0]],["literal",[0,2]]],"text-size":14,"text-allow-overlap":!0,"icon-allow-overlap":!0,"icon-image":"measurment-round","icon-text-fit":"both"},paint:{"text-color":"#fff","text-halo-color":W0,"text-halo-width":2}}],{data:{type:"geojson",data:{type:"FeatureCollection",features:[]}}}),zt.onStart=()=>{q&&R()},zt.onReset=()=>{B()};let Rt=new YQ(q);Rt.setColor(W0),Rt.onDragMarker=Xt=>{a.init(Xt)},Rt.onRightClickMarker=(Xt,ge)=>{l.value.splice(ge,1),a.init(l.value)};let Bt=new JQ;Bt.onChangeValue=Xt=>{l.value=(Xt||[]).slice()},Bt.onChangeSetting=(Xt={})=>{o.value.maxLength=Xt.maxLength||0;let ge=Xt.fields;(!ge||ge.length==0)&&(ge=[{text:E.value("map.measurement.no-data.text"),value:E.value("map.measurement.no-data.value")}]),o.value.fields=ge.map(en=>({...en,text:en.trans?E.value(en.trans):en.text}))},a.addView(zt),a.addView(Rt),a.addView(Bt)}function F(){a&&a.destroy(),rt()}function j(q){const zt=[q.lngLat.lng,q.lngLat.lat];a.action&&a.add(zt)}function G(q){return pt(!1),d.value==q?(d.value=void 0,a.setAction(null),!1):(d.value=q,!0)}function Q(){G("distance")&&(a.setAction(new WQ),a.start())}function nt(){G("area")&&(a.setAction(new GQ),a.start())}function X(){G("azimuth")&&(a.setAction(new ZQ),a.start())}function K(){G("point")&&(a.setAction(new qQ(e(C.value))),a.start())}function Z(){o.value.show=!o.value.show}function at(){_(q=>{zP(q,N$(l.value))})}function pt(q=!0){a&&(a.reset(),q&&El(()=>{a.start()}))}function rt(){pt(!1),d.value=void 0,a&&a.setAction(null)}function xt(q=[]){a&&a.init(q)}return(q,zt)=>(Mt(),Je(ut(Uo),Eo(yo(ut(I))),{btn:Ie(()=>[d.value?(Mt(),Je(ut(Ag),{key:1,row:""},{default:Ie(()=>[ee(ut(ui),{tooltip:ut(E)("map.measurement.action.setting"),onClick:zt[4]||(zt[4]=Rt=>Z()),active:o.value.show},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:g.setting},null,8,["path"])]),_:1},8,["tooltip","active"]),ee(ut(ui),{disabled:!l.value||l.value.length<1,tooltip:ut(E)("map.measurement.action.fly-to"),onClick:zt[5]||(zt[5]=Rt=>at())},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:g.fillBound},null,8,["path"])]),_:1},8,["disabled","tooltip"]),ee(ut(ui),{tooltip:ut(E)("map.measurement.action.clear"),onClick:zt[6]||(zt[6]=Rt=>pt())},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:g.clear},null,8,["path"])]),_:1},8,["tooltip"]),ee(ut(ui),{tooltip:ut(E)("map.measurement.action.close"),onClick:zt[7]||(zt[7]=Rt=>rt())},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:g.close},null,8,["path"])]),_:1},8,["tooltip"])]),_:1})):(Mt(),Je(ut(Ag),{key:0,row:""},{default:Ie(()=>[ee(ut(ui),{tooltip:ut(E)("map.measurement.tools.distance"),onClick:zt[0]||(zt[0]=Rt=>Q()),active:d.value=="distance"},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:g.distance},null,8,["path"])]),_:1},8,["tooltip","active"]),ee(ut(ui),{tooltip:ut(E)("map.measurement.tools.area"),onClick:zt[1]||(zt[1]=Rt=>nt()),active:d.value=="area"},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:g.area},null,8,["path"])]),_:1},8,["tooltip","active"]),ee(ut(ui),{tooltip:ut(E)("map.measurement.tools.azimuth"),onClick:zt[2]||(zt[2]=Rt=>X()),active:d.value=="azimuth"},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:g.azimuth},null,8,["path"])]),_:1},8,["tooltip","active"]),ee(ut(ui),{tooltip:ut(E)("map.measurement.tools.point"),onClick:zt[3]||(zt[3]=Rt=>K()),active:d.value=="point"},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:g.point},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1}))]),default:Ie(()=>[Wn(q.$slots,"default"),d.value?(Mt(),Je(HQ,{key:0,modelValue:l.value,show:o.value.show,"onUpdate:show":zt[8]||(zt[8]=Rt=>o.value.show=Rt),position:q.position,"onUpdate:modelValue":xt,maxLength:o.value.maxLength,fields:o.value.fields},null,8,["modelValue","show","position","maxLength","fields"])):wn("",!0)]),_:3},16))}});class rJ{constructor(e){this.mapCanvas=e,this.color="#535353"}create(){this.updateValues(),this.createCanvas(this.mapCanvas.parentElement)}updateValues(){this.width=this.mapCanvas.clientWidth,this.height=this.mapCanvas.clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const e=this.width/2,n=this.height/2;this.yLine.setAttribute("x1",`${e}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${e}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${n}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${n}px`)}}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["pointer-events"]="none",n.setAttribute("width",`${this.width}px`),n.setAttribute("height",`${this.height}px`);const a=this.width/2,s=this.height/2;this.yLine=n.appendChild(this.createLine(a,0,a,this.height,this.color,"2px")),this.xLine=n.appendChild(this.createLine(0,s,this.width,s,this.color,"2px")),e.appendChild(n),this.svgCanvas=n}}createLine(e,n,a,s,d,l){const o=document.createElementNS("http://www.w3.org/2000/svg","line");return o.setAttribute("x1",e+""),o.setAttribute("y1",n+""),o.setAttribute("x2",a+""),o.setAttribute("y2",s+""),o.setAttribute("stroke-dasharray","5,5"),o.setAttribute("stroke",d),o.setAttribute("stroke-width",l),o}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}function S3(t){const{renderMap:e,hidden:n}=E3(t,a=>{const s=t.getCanvas();a.style.width=s.clientWidth+"px",a.style.height=s.clientHeight+"px"});return new Promise(a=>{e.once("idle",()=>{var d;const s=e.getCanvas();a(s.toDataURL()),e.remove(),(d=n.parentNode)==null||d.removeChild(n)})})}async function iJ(t,e){const{renderMap:n,hidden:a}=E3(t,s=>{s.style.width=rS(+e.width,1),s.style.height=rS(+e.height,1)});return new Promise(s=>{n.once("idle",()=>{var l;const d=n.getCanvas();s(d.toDataURL()),n.remove(),(l=a.parentNode)==null||l.removeChild(a)})})}function rS(t,e=96){return`${e*t}px`}function E3(t,e){var o;const n=document.createElement("div");n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.padding="0",n.style.margin="0",n.style.background="transparent",n.style.zIndex="-1",document.body.appendChild(n);const a=document.createElement("div");e(a),n.appendChild(a);const s=new Aw.Map({container:a,center:t.getCenter(),zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:t._requestManager._transformRequestFn}),d=(t.style.imageManager||{}).images||{};d&&((o=Object.keys(d))==null?void 0:o.length)>0&&Object.keys(d).forEach(g=>{g&&s.addImage(g,d[g].data)});const l=t.getStyle();if(l&&l.sources){const g=l.sources;Object.keys(g).forEach(_=>{const C=g[_];Object.keys(C).forEach(I=>{C[I]||delete C[I]})})}return s.setStyle(l),{renderMap:s,hidden:n}}class oJ{constructor(e,n){this.mapCanvas=e,this.setOption(n)}getCutSize(){return{width:this.cutWidth,height:this.cutHeight,startX:this.cutStartX,startY:this.cutStartY}}mapResize(){this.generateCutOut()}create(){this.createCanvas(this.mapCanvas.parentElement),this.generateCutOut()}createCanvas(e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=this.mapCanvas.clientWidth,s=this.mapCanvas.clientHeight;n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["pointer-events"]="none",n.setAttribute("width",`${a}px`),n.setAttribute("height",`${s}px`);const d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("style","fill:#888888;stroke-width:0"),d.setAttribute("fill-opacity","0.5"),n.append(d),e.appendChild(n),this.svgCanvas=n,this.svgPath=d}generateCutOut(){if(this.svgCanvas===void 0||this.svgPath===void 0)return;const e=this.mapCanvas.clientWidth,n=this.mapCanvas.clientHeight,a=this.option.ratio;let s=n;s>e&&(s=e);let d=0,l=0;if(a>=1?(d=Math.floor(s*4/5-30),l=d/a):(l=Math.floor(s*4/5-30),d=Math.floor(l*a)),this.option.orientation!=="landscape"){if(d>l){const S=l;l=d,d=S}}else if(d<l){const S=l;l=d,d=S}this.cutStartX=e/2-d/2,this.cutStartY=n/2-l/2;const o=l,g=d;this.cutWidth=d,this.cutHeight=l;const _=this.cutStartX,C=_+g,I=this.cutStartY,E=I+o;this.svgCanvas.setAttribute("width",`${e}px`),this.svgCanvas.setAttribute("height",`${n}px`),this.svgPath.setAttribute("d",`M 0 0 L ${e} 0 L ${e} ${n} L 0 ${n} M ${_} ${I} L ${_} ${E} L ${C} ${E} L ${C} ${I}`)}setOption(e){this.option=e,this.generateCutOut()}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}const aJ=nr({__name:"PrintControl",props:{...vo,fileName:{type:String,default:"map"}},setup(t){const e=t,n={print:OO,close:xg,save:RT},{callMap:a,mapId:s,moduleContainerProps:d}=bi(e),{trans:l,setLocaleDefault:o}=To(s.value);o({map:{print:{title:"Print",actions:{save:"save",clear:"clear"}}}});const g=mn({show:!1,loading:!1});function _(I){a(async E=>{g.value.loading=!0;try{let S=await S3(E);I?I(S):await C(S)}finally{g.value.loading=!1}})}async function C(I){fb.saveAs(I,`${e.fileName}.png`)}return(I,E)=>(Mt(),Je(ut(Uo),Eo(yo(ut(d))),{btn:Ie(()=>[ee(ut(ui),{tooltip:ut(l)("map.print.title"),onClick:E[0]||(E[0]=_i(S=>_(C),["stop"])),loading:g.value.loading},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:n.print},null,8,["path"])]),_:1},8,["tooltip","loading"])]),_:1},16))}}),pC="print";function sJ(t){Vu(t,pC,void 0)}_d(pC,sJ);const lJ=(t,{show:e,close:n,save:a,saveAll:s})=>{Vu(t,pC,{show:e,close:n,save:a,saveAll:s})},cJ=t=>(_c("data-v-f39c3a1c"),t=t(),bc(),t),uJ={class:"setting-container"},hJ=cJ(()=>Nt("div",{class:"grow"},null,-1)),dJ=nr({__name:"PrintAdvancedControl",props:{...vo,disabledCrosshair:Boolean,disabledPrintableArea:Boolean,fileName:{type:String,default:"map"}},setup(t){const e=t,n={print:DO,close:xg,save:RT,setting:LT},{callMap:a,mapId:s,moduleContainerProps:d}=bi(e,_),{trans:l,setLocaleDefault:o}=To(s.value);o({map:{print:{title:"Print",actions:{save:"save",clear:"clear",setting:"Setting"},setting:{title:"Setting"},field:{ratio:"Ratio",orientation:"Orientation"},btn:{apply:"Print"}}}});const g=mn({show:!1,loading:!1,setting_show:!1,setting:{ratio:1,orientation:"portrait"}});Kp(()=>{E()});function _(){lJ(s.value,{show:nt=>S(nt),close:()=>E(),save:nt=>I(nt),saveAll:nt=>C(nt)})}function C(nt){a(async X=>{g.value.loading=!0;try{let K=await S3(X);nt?nt(K):await k(K)}finally{g.value.loading=!1}})}async function I(nt){a(async X=>{if(B)try{g.value.loading=!0;let K=await iJ(X,B.getCutSize());nt?nt(K):await k(K)}finally{g.value.loading=!1}})}function E(){g.value.loading=!1,g.value.show=!1,V(g.value.show),F(g.value.show,g.value.setting)}function S(nt){g.value.show=!0,V(g.value.show),F(g.value.show,nt)}async function k(nt){fb.saveAs(nt,`${e.fileName}.png`)}let R,B;function V(nt){e.disabledCrosshair||a(X=>{nt===!1?R!==void 0&&(R.destroy(),R=void 0):(R=new rJ(X.getCanvas()),R.create())})}function F(nt,X){e.disabledPrintableArea||a(K=>{nt===!1?(K.off("resize",j),B!==void 0&&(B.destroy(),B=void 0)):(K.on("resize",j),B=new oJ(K.getCanvas(),X),B.create())})}function j(){B&&B.mapResize(),R&&R.mapResize()}function G(){g.value.setting_show=!g.value.setting_show}function Q(){B&&B.setOption(g.value.setting)}return(nt,X)=>(Mt(),Je(ut(Uo),Eo(yo(ut(d))),{btn:Ie(()=>[ee(ut(Ag),{row:""},{default:Ie(()=>[g.value.show?(Mt(),pe(mr,{key:1},[ee(ut(ui),{disabled:g.value.loading,loading:g.value.loading,tooltip:ut(l)("map.print.actions.save"),onClick:X[1]||(X[1]=K=>I())},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:n.save},null,8,["path"])]),_:1},8,["disabled","loading","tooltip"]),ee(ut(ui),{disabled:g.value.loading,tooltip:ut(l)("map.print.actions.clear"),onClick:X[2]||(X[2]=K=>E())},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:n.close},null,8,["path"])]),_:1},8,["disabled","tooltip"])],64)):(Mt(),Je(ut(ui),{key:0,active:g.value.show,tooltip:ut(l)("map.print.title"),onClick:X[0]||(X[0]=_i(K=>S(g.value.setting),["stop"])),loading:g.value.loading},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:n.print},null,8,["path"])]),_:1},8,["active","tooltip","loading"])),ee(ut(ui),{tooltip:ut(l)("map.print.actions.setting"),onClick:X[3]||(X[3]=K=>G()),active:g.value.setting_show},{default:Ie(()=>[ee(ut(Zn),{size:18,type:"mdi",path:n.setting},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1})]),draggable:Ie(K=>[g.value.setting_show?(Mt(),Je(ut(bd),Tr({key:0},K,{height:220,show:g.value.setting_show,"onUpdate:show":X[9]||(X[9]=Z=>g.value.setting_show=Z),title:ut(l)("map.print.setting.title")}),{default:Ie(()=>[Nt("div",uJ,[Nt("div",null,[ee(ut(Pi),{modelValue:g.value.setting.ratio,"onUpdate:modelValue":X[4]||(X[4]=Z=>g.value.setting.ratio=Z),label:ut(l)("map.print.field.ratio"),onChange:X[5]||(X[5]=Z=>Q())},null,8,["modelValue","label"])]),Nt("div",null,[ee(ut(Tf),{modelValue:g.value.setting.orientation,"onUpdate:modelValue":X[6]||(X[6]=Z=>g.value.setting.orientation=Z),items:[{value:"landscape",text:"Landscape"},{value:"portrait",text:"Portrait"}],label:ut(l)("map.print.field.orientation"),onChange:X[7]||(X[7]=Z=>Q())},null,8,["modelValue","label"])]),hJ,g.value.show?(Mt(),Je(ut(Cl),{key:0,class:"btn-container",onClick:X[8]||(X[8]=Z=>I())},{default:Ie(()=>[fo(Rn(ut(l)("map.print.btn.apply")),1)]),_:1})):wn("",!0)])]),_:2},1040,["show","title"])):wn("",!0)]),_:1},16))}}),fJ=Vn(dJ,[["__scopeId","data-v-f39c3a1c"]]),pJ=nr({__name:"AllMapView",setup(t){const{downloadFile:e}=fD(),n=mn(),{convertList:a}=dD(),{convert:s}=uO();function d(_){const C=Ru("Group test",null,!0),I=e3("source",{type:"raster",tiles:["https://naturalearthtiles.roblabs.com/tiles/natural_earth_cross_blended_hypso_shaded_relief.raster/{z}/{x}/{y}.png"],maxzoom:6,bounds:[104.96327341667353,18.461221184685627,106.65936430823979,19.549518287564368]}),E=Qm("layer raster",[{type:"raster"}]),S=Jm("test raster");S.color="#0000FF";const k=Ru("Group layer 1",null,!0);C.add(I),k.add(S),k.add(E),C.add(k),S.addMenu(wA());const R=Ru("Group test",null,!0),B=Dw("source",{type:"FeatureCollection",features:[]}),V=Ru("Group layer 1",null,!0),F=Jm("test area");F.color="#0000FF",F.legend=UX([{type:"text",value:{text:"text-test",value:"test-value"}},{type:"linear",value:{text:"legend linear",items:[{value:"test 1",color:"#fff"},{value:"test 2",color:"#000"},{value:"test 3",color:"red"}]}}]);const j=Qm("layer area",[new Xm().setStyleType("area").setColor(F.color).setOpacity(.5).build()]);V.add(j),V.add(F);const G=Ru("Group layer 2",null,!0),Q=Jm("test point");Q.color="#ff0000",Q.legend=VX("color",{text:"color-test",color:"#fff"});const nt=Qm("layer point",[new Xm().setStyleType("point").setColor(Q.color).setOpacity(Q.opacity).build(),new Xm().setStyleType("line").setColor(Q.color).setOpacity(.5).build()]);F.addMenus([CA({location:"extra"}),AA(),wA(),LM()]),Q.addMenus([CA({location:"extra"}),AA(),g(),o()]);const X=BM("metadata for list2",{bbox:[105.88454157202995,20.878811643339404,106.16710803591963,21.0854254401454]}),K=BM("metadata",{bbox:[104.96327341667353,18.461221184685627,107.53334783357559,20.18022781865689]}),Z=ZP("test identify"),at=DM("test identify 1"),pt=DM("test identify 2");Z.addMenus([n1(),r1()]),at.addMenus([n1(),r1()]),pt.addMenus([n1(),r1()]);const rt={id:"test",name:"test"};F.group=rt,V.add(at),Q.group=rt,G.add(nt),G.add(Q),G.add(pt),G.add(X);const xt=Rw("data management",{fields:[{text:"Name rat dai rat dai rat dai rat dai",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"}]});xt.setItems([{id:"1",name:"feature 1",geometry:{coordinates:[[[104.96327341667353,19.549518287564368],[104.96327341667353,18.461221184685627],[106.65936430823979,18.461221184685627],[106.65936430823979,19.549518287564368],[104.96327341667353,19.549518287564368]]],type:"Polygon"}},{id:"2",name:"feature 2",geometry:{coordinates:[[[105.80782070639765,20.18022781865689],[105.80782070639765,18.841791883714322],[107.53334783357559,18.841791883714322],[107.53334783357559,20.18022781865689],[105.80782070639765,20.18022781865689]]],type:"Polygon"}}]),R.add(B),R.add(xt),R.add(V),R.add(G),R.add(Z),R.add(K),kw(_.id,R),kw(_.id,l())}function l(){const _=Ru("Group test",null,!0),C=Dw("source",{type:"FeatureCollection",features:[]}),I=Ru("Group layer 1",null,!0),E=Jm("test point"),S=Qm("layer area",[new Xm().setStyleType("point").setColor(E.color).build()]);I.add(S),I.add(E),E.addMenus([CA({location:"extra"}),AA(),wA(),LM()]);const k=Rw("data management",{fields:[{text:"Name",value:"name"}]});return k.setItems([{id:"2",name:"feature 2",geometry:{coordinates:[106.26447460804093,20.9143362367018],type:"Point"}}]),_.add(C),_.add(k),_.add(I),_}function o(){return{type:"item",name:"Download",icon:yO,click:async(_,C)=>{const I=vc(_,E=>E.type==="dataManagement");if(Pw(I)){const E=await s(a(await I.getList()||[]),{filename:"download.geojson"});E&&e(E,"download.geojson")}}}}function g(){return{type:"item",name:"Edit feature",icon:BT,click:(_,C)=>{const I=vc(_,E=>E.type==="dataManagement");Pw(I)&&I3(C,{cleanAfterDone:!0,draw_support:[fg.POINT,fg.POLYGON,fg.LINE_STRING],getFeatures:I.getFeatures&&I.getFeatures.bind(I),addFeatures:I.addFeatures&&I.addFeatures.bind(I),updateFeatures:I.updateFeatures&&I.updateFeatures.bind(I),deleteFeatures:I.deleteFeatures&&I.deleteFeatures.bind(I),reset:async()=>{Yc(C,E=>{z1(I)&&I.addToMap(E)})}})}}}return(_,C)=>(Mt(),Je(ut(n9),{ref_key:"mapRef",ref:n,onMapLoaded:d},{default:Ie(()=>[ee(ut(KW)),ee(ut(nJ),{position:"top-right"}),ee(ut(aQ),{position:"top-right"}),ee(ut(bQ),{position:"top-right"}),ee(ut(UY),{position:"top-left",show:""},{endList:Ie(({mapId:I})=>[ee(ut(J$),{mapId:I},null,8,["mapId"])]),_:1}),ee(ut(Jq),{position:"top-right"}),ee(ut(fJ)),ee(ut(aJ)),ee(ut(_H),{position:"top-right"}),ee(ut(fH)),ee(ut(NH)),ee(ut(mH)),ee(ut(pH)),ee(ut(UH)),ee(ut(bH)),ee(ut(OH)),ee(ut(lG),{position:"bottom-left"}),ee(ut(tK)),ee(ut(AX))]),_:1},512))}}),mJ=v4({history:WR("/demo-map/"),routes:[{path:"/",name:"home",component:pJ},{path:"/draw/",component:()=>Cp(()=>import("./example-1gWQdROH.js"),__vite__mapDeps([0,1,2,3]))},{path:"/inspect/",component:()=>Cp(()=>import("./inspect-CmNS4pfo.js"),__vite__mapDeps([4,1,2,3]))},{path:"/compare/",component:()=>Cp(()=>import("./AllMapCompareView-Drd8k6ks.js"),__vite__mapDeps([5,3]))},{path:"/basemap/",component:()=>Cp(()=>import("./example-CmGo2IC9.js"),__vite__mapDeps([6,1,2,7]))},{path:"/measurement/",component:()=>Cp(()=>import("./example-D30XGEvZ.js"),__vite__mapDeps([8,1,2,3]))},{path:"/story-telling/",component:()=>Cp(()=>import("./example-CIKwJ15C.js"),__vite__mapDeps([9,10,11]))},{path:"/story-telling-gps/",component:()=>Cp(()=>import("./example-gps-CoHWcKdV.js"),__vite__mapDeps([12,10,11]))}]}),gJ=nr({__name:"App",setup(t){return(e,n)=>(Mt(),Je(ut(sT)))}}),yJ=Vn(gJ,[["__scopeId","data-v-b7680054"]]),T3=ZE(yJ);T3.use(mJ);T3.mount("#root");export{bc as $,yo as A,lG as B,Uo as C,aQ as D,Ff as E,pT as F,ju as G,go as H,K8 as I,El as J,yd as K,_n as L,n9 as M,xf as N,Af as O,zg as P,Kp as Q,Li as R,Zn as S,mr as T,ki as U,kF as V,HN as W,wl as X,jo as Y,_c as Z,bQ as _,ee as a,f$ as a$,FP as a0,yw as a1,Rn as a2,Tf as a3,tG as a4,S2 as a5,fo as a6,f8 as a7,MO as a8,fi as a9,DM as aA,n1 as aB,r1 as aC,Rw as aD,kw as aE,Ag as aF,J$ as aG,x4 as aH,ls as aI,cE as aJ,K5 as aK,xc as aL,sa as aM,Sf as aN,GT as aO,p4 as aP,ZT as aQ,vJ as aR,Js as aS,Yc as aT,zy as aU,ld as aV,G2 as aW,Aa as aX,Z2 as aY,Rb as aZ,PP as a_,KW as aa,nJ as ab,UY as ac,Jq as ad,_H as ae,fH as af,NH as ag,mH as ah,pH as ai,UH as aj,bH as ak,OH as al,AX as am,Ru as an,e3 as ao,Qm as ap,Jm as aq,wA as ar,CA as as,Dw as at,UX as au,Xm as av,VX as aw,LM as ax,BM as ay,ZP as az,fg as b,wg as b0,as as b1,EM as b2,Je as c,nr as d,Vu as e,To as f,Vo as g,pe as h,Nt as i,Vn as j,vo as k,Pf as l,bi as m,dO as n,Mt as o,_i as p,ui as q,mn as r,bd as s,Tr as t,ut as u,mo as v,Ie as w,wn as x,Wn as y,Eo as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/example-1gWQdROH.js","assets/aside-control-BpksgB7d.js","assets/aside-control-CNIY_DRj.css","assets/example-BRI0LJKA.css","assets/inspect-CmNS4pfo.js","assets/AllMapCompareView-Drd8k6ks.js","assets/example-CmGo2IC9.js","assets/example-7vOpaiIK.css","assets/example-D30XGEvZ.js","assets/example-CIKwJ15C.js","assets/useStorytelling-BUPD1K1z.js","assets/example-Ca6w4nUQ.css","assets/example-gps-CoHWcKdV.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
